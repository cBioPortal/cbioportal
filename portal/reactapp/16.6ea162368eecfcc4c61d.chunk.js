(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{1173:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return h});var r=n(0),o=n(29),a=n(1),i=n(1262),l=n(2),u=n(9);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var m=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":d(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},h="GRCh37",y=function(t){function n(e){var t,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),r=this,t=!(o=c(n).call(this,e))||"object"!==d(o)&&"function"!=typeof o?p(r):o,Object.defineProperty(p(t),"genePanelInTooltip",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object(l.makeObservable)(p(t)),t}var u,m,y;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(n,r["Component"]),u=n,(m=[{key:"componentDidMount",value:function(){this.drawTracks()}},{key:"setGenePanelInTooltip",value:function(e){this.genePanelInTooltip=e}},{key:"drawTracks",value:function(){var t=this,n=a.keyBy(this.props.samples.filter(function(e){return e.copyNumberSegmentPresent}),function(e){return e.sampleId}),r=a.keyBy(this.props.samples.filter(function(e){return e.sequenced}),function(e){return e.sampleId}),l=!!(this.props.mutationGenePanelIconData&&a.keys(this.props.mutationGenePanelIconData).length>0||this.props.copyNumberGenePanelIconData&&a.keys(this.props.copyNumberGenePanelIconData).length>0),u=i.a(Object.keys(n).length+Object.keys(r).length,this.props.width,l),s=0,c=i.b(document.getElementsByClassName("genomicOverviewTracksContainer")[0],u),p=h;this.props.mutations&&this.props.mutations.length>0&&(p=this.props.mutations[0].ncbiBuild);var f=i.c(p);i.d(c,u,f,p),a.each(this.props.sampleManager.samples,function(r){var l={};if(t.props.mutationGenePanelIconData&&(l=t.props.mutationGenePanelIconData[r.id]),n[r.id]){var p=[],d=a.filter(t.props.cnaSegments,function(e){return e.sampleId===r.id});if(a.each(d,function(e){var t=[];t.push(e.sampleId),t.push(e.chromosome),t.push(e.end),t.push(e.start),t.push(e.numberOfProbes),t.push(e.segmentMean),p.push(t)}),i.e(c,u,f,s,p,1,3,2,5,r.id,l,t.setGenePanelInTooltip),s+=1,t.props.sampleManager.samples.length>1){var m=e('[id="cnaTrack'.concat(r.id,'"]')),h={x:parseInt(m.attr("x"))-10,y:parseInt(m.attr("y"))-5},y=e('<svg height="12" width="12" />').attr(h);m.replaceWith(y);var b=t.props.sampleManager.getComponentForSample(r.id,1,"",null,t.props.onSelectGenePanel);o.render(b,y[0])}}}),a.each(this.props.sampleManager.samples,function(n){var l={};if(t.props.mutationGenePanelIconData&&(l=t.props.mutationGenePanelIconData[n.id]),r[n.id]){var p=a.filter(t.props.mutations,function(e){return e.sampleId===n.id});if(i.f(c,u,f,s,p,n.id,l,t.setGenePanelInTooltip),s+=1,t.props.sampleManager.samples.length>1){var d="mutTrack".concat(n.id),m=e('[id="'.concat(d,'"]')),h={x:parseInt(m.attr("x"))-10,y:parseInt(m.attr("y"))-5},y=e('<svg id="'.concat(d,'" height="12" width="12" />'));y.attr(h),m.replaceWith(y);var b=t.props.sampleManager.getComponentForSample(n.id,1,"",null,t.props.onSelectGenePanel);o.render(b,y[0])}}})}},{key:"render",value:function(){var e=this;return r.createElement(r.Fragment,null,r.createElement("div",{className:"genomicOverviewTracksContainer"}),r.createElement("div",{className:"tooltip-content",style:{display:"none"}},r.createElement("span",null,this.genePanelInTooltip?r.createElement(r.Fragment,null,"Gene panel:"," ",r.createElement("a",{onClick:function(){return e.props.onSelectGenePanel(e.genePanelInTooltip)}},this.genePanelInTooltip)):"Gene panel information not found. Sample is presumed to be whole exome/genome sequenced.")))}}])&&s(u.prototype,m),y&&s(u,y),n}();m([l.observable],y.prototype,"genePanelInTooltip",void 0),m([l.action.bound],y.prototype,"setGenePanelInTooltip",null),y=m([u.observer],y),t.b=y}).call(this,n(26))},1177:function(e,t,n){},1178:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__31Bse",framedImage:"styles-module__framedImage__1BiD7",genesList:"styles-module__genesList__2enmP",searchInput:"styles-module__searchInput__385Z_",panelName:"styles-module__panelName__czMY2",copyDownloadControls:"styles-module__copyDownloadControls__2Edes",patientViewModal:"styles-module__patientViewModal__17gba"}},1262:function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return p}),n.d(t,"c",function(){return m}),n.d(t,"d",function(){return h}),n.d(t,"e",function(){return g}),n.d(t,"f",function(){return v});var r=n(1263),o=n.n(r),a=n(26),i=n.n(a),l=n(1),u=(n(1174),n(1175),n(1173)),s=n(1264);function c(e,t,n){var r={};return r.nRows=e,r.canvasWidth=t,r.wideLeftText=25,r.wideRightText=50,r.wideGenePanelIcon=20,r.heigthGenePanelIcon=18,r.GenomeWidth=r.canvasWidth-r.wideLeftText-r.wideRightText-(n?r.wideGenePanelIcon:0),r.pixelsPerBinMut=3,r.rowHeight=20,r.rowMargin=5,r.ticHeight=10,r.cnTh=[.2,1.5],r.cnLengthTh=5e4,r.getCnColor=function(e){if(e>=r.cnTh[1])return"#f00";if(e<=-r.cnTh[1])return"#00f";var t=Math.round(255*(r.cnTh[1]-Math.abs(e))/(r.cnTh[1]-r.cnTh[0]));return e<0?"rgb("+t+","+t+",255)":"rgb(255,"+t+","+t+")"},r.canvasHeight=function(){return 2*r.rowMargin+r.ticHeight+r.nRows*(r.rowHeight+r.rowMargin)},r.yRow=function(e){return 2*r.rowMargin+r.ticHeight+e*(r.rowHeight+r.rowMargin)},r.xRightText=function(){return r.wideLeftText+r.GenomeWidth+5},r.xGenePanelIcon=function(){return r.xRightText()+40},r.xGenePanelIconText=function(){return r.xGenePanelIcon()+r.wideGenePanelIcon/2},r}function p(e,t){return o()(e,t.canvasWidth,t.canvasHeight())}var f=new Map([["hg19","GRCh37"],["37","GRCh37"],["hg38","GRCh38"],["38","GRCh38"],["mm10","GRCm38"]]),d=s.reduce(function(e,t){return e[t.genomeBuild]=t.chromosomeSize||[],e},{});function m(e){var t={genomeRef:{},total:0},n=f.get(e);n&&""!==n||(n=u.a);var r=d[n];return r&&(t.genomeRef=r,t.total=l.sum(r)),t.perc=function(e,t){for(var n=[0],r=1;r<e.length;r++)n.push(n[r-1]+e[r]/t);return n}(t.genomeRef,t.total),t.loc2perc=function(e,n){return t.perc[e-1]+n/t.total},t.loc2xpixil=function(e,n,r){return t.loc2perc(e,n)*r.GenomeWidth+r.wideLeftText},t.perc2loc=function(e,n){var r;if(n){for(o=n;o<t.genomeRef.length&&!(e<=t.perc[o]);o++);r=o}else{for(var o,a=1,i=t.genomeRef.length-1;a<=i;)o=Math.floor((a+i)/2),t.perc[o]>=e?i=o-1:a=o+1;r=a}return[r,Math.round(t.total*(e-t.perc[r-1]))]},t.xpixil2loc=function(e,n,r){var o=(n-e.wideLeftText)/e.GenomeWidth;return t.perc2loc(o,r)},t.middle=function(e,n){var r=t.genomeRef[e]/2;return t.loc2xpixil(e,r,n)},t.chmName=function(e){return 23===e?"X":24===e?"Y":e},t}function h(e,t,n,r){var o=t.rowMargin+t.ticHeight;y(t.wideLeftText,o,t.wideLeftText+t.GenomeWidth,o,e,"#000",1);for(var a=1;a<n.genomeRef.length;a++)if(0===n.genomeRef[a]&&"GRCm38"===r);else{var i=n.loc2xpixil(a,0,t);y(i,o,i,t.rowMargin,e,"#000",1);var l=n.middle(a,t);e.text(l,o-t.rowMargin,n.chmName(a))}y(t.wideLeftText+t.GenomeWidth,o,t.wideLeftText+t.GenomeWidth,t.rowMargin,e,"#000",1)}function y(e,t,n,r,o,a,i){var l="M"+e+" "+t+" L"+n+" "+r,u=o.path(l);return u.attr("stroke",a),u.attr("stroke-width",i),u.attr("opacity",.5),u.translate(.5,.5),u}function b(e,t){return"chr"+t.chmName(e[0])+":"+function(e){var t=e.toString(),n=/(\d+)(\d{3})/;for(;n.test(t);)t=t.replace(n,"$1,$2");return t}(e[1])}function g(e,t,n,r,o,a,u,s,c,p,f,d){var m=t.yRow(r),h=0,y=0;if(l.each(o,function(r){var o=O(r[a]);if(!(null==o||o[0]>=n.genomeRef.length)){var i=r[u],l=r[s],p=r[c];if(h+=l-i,!(Math.abs(p)<t.cnTh[0]||l-i<t.cnLengthTh)){y+=l-i;var f=n.loc2xpixil(o,i,t),d=n.loc2xpixil(o,l,t),g=e.rect(f,m,d-f,t.rowHeight),v=t.getCnColor(p);g.attr("fill",v),g.attr("stroke",v),g.attr("stroke-width",1),g.attr("opacity",.5),g.translate(.5,.5);var S="Mean copy number log2 value: "+p+"<br/>from "+b([o,i],n)+"<br/>to "+b([o,l],n);w(g.node,S,"","")}}}),null!=p){var g="CNA";(E=e.text(12,m+t.rowHeight/2,g).attr({"text-anchor":"center",fill:"black"})).node.setAttribute("id","cnaTrack"+p)}else e.text(0,m+t.rowHeight/2,"CNA").attr({"text-anchor":"start"});g=0===h?"N/A":(100*y/h).toFixed(1)+"%";var v=0===h?"Copy number segment data not available":"Percentage of copy number altered chromosome regions (mean copy number log value >0.2 or <-0.2) out of measured regions.";S(E=e.text(t.xRightText(),m+t.rowHeight/2,g).attr({"text-anchor":"start","font-weight":"bold"}),e),w(E.node,v,null,{my:"top right",at:"bottom left",viewport:i()(window)});if(f&&f.label){var E,P=e.rect(t.xGenePanelIcon(),m+1,t.wideGenePanelIcon,t.heigthGenePanelIcon,4);P.attr("fill",f.color||"#FFFFFF"),P.attr("fill-opacity",.2),P.attr("stroke-width",0),(E=e.text(t.xGenePanelIconText(),m+t.heigthGenePanelIcon/2+1,f.label).attr({"text-anchor":"center",fill:"black"})).node.setAttribute("data-test","cna-track-genepanel-icon-"+r);var T=f.genePanelId?"Gene panel: "+f.genePanelId:"Gene panel information not found. Sample is presumed to be whole exome/genome sequenced.";w(E.node,T,null,{my:"top right",at:"bottom left"},f.genePanelId,i()(".tooltip-content").find("span"),d)}}function v(e,t,n,r,o,a,u,s){for(var c=l.filter(o,function(e){return e.sampleId===a}),p=[],f=0;f<c.length;f++){var d=c[f];if(void 0!==d.chr){var m=O(d.chr);if(null!=m&&m<=n.genomeRef.length){var h=Math.round(n.loc2xpixil(m,(d.startPosition+d.endPosition)/2,t)),y=h-h%t.pixelsPerBinMut;null==p[y]&&(p[y]=[]),p[y].push(d.gene.hugoGeneSymbol+": "+d.proteinChange),0}}}var b=t.yRow(r)+t.rowHeight;if(i.a.each(p,function(n,r){var o=n;if(r){var a=r.length>5?t.rowHeight:t.rowHeight*r.length/5,i=e.rect(o,b-a,t.pixelsPerBinMut,a);i.attr("fill","#0f0"),i.attr("stroke","#0f0"),i.attr("stroke-width",1),i.attr("opacity",.5),i.translate(.5,.5),w(i.node,r.join("</br>"),100,"")}}),null!==a){(g=e.text(12,b-t.rowHeight/2,"MUT").attr({"text-anchor":"center",fill:"black"})).node.setAttribute("id","mutTrack"+a)}else e.text(0,b-t.rowHeight/2,"MUT").attr({"text-anchor":"start"});S(g=e.text(t.xRightText(),b-t.rowHeight/2,o.length).attr({"text-anchor":"start","font-weight":"bold"}),e);if(w(g.node,"Number of mutation events.",null,{my:"top right",at:"bottom left"}),u&&u.label){var g,v=e.rect(t.xGenePanelIcon(),b-t.heigthGenePanelIcon-1,t.wideGenePanelIcon,t.heigthGenePanelIcon,4);v.attr("fill",u.color||"#FFFFFF"),v.attr("fill-opacity",.2),v.attr("stroke-width",0),(g=e.text(t.xGenePanelIconText(),b-t.heigthGenePanelIcon/2-1,u.label).attr({"text-anchor":"center",fill:"black"})).node.setAttribute("data-test","mut-track-genepanel-icon-"+r),w(g.node,"",null,{my:"top right",at:"bottom left"},u.genePanelId,i()(".tooltip-content").find("span"),s)}}function w(e,t,n,r,o,a,l){var u={content:{text:function(){return a||t}},show:{event:"mouseover"},hide:{fixed:!0,delay:100,event:"mouseout"},style:{classes:"qtip-light qtip-rounded"},position:{my:"bottom right",at:"top left",viewport:i()("body")},events:{show:function(){l&&o&&l(o)},hide:function(){l&&l("")}}};i()(e).qtip(u)}function S(e,t){var n=e.getBBox();return t.path("M"+n.x+" "+(n.y+n.height)+"L"+(n.x+n.width)+" "+(n.y+n.height))}function O(e){return 0===e.toLowerCase().indexOf("chr")&&(e=e.substring(3)),"X"!==e&&"x"!==e||(e=23),"Y"!==e&&"y"!==e||(e=24),isNaN(e)||e<1||e>24?null:parseInt(e)}},1263:function(e,t,n){e.exports=n(35)(894)},1264:function(e){e.exports=[{genomeBuild:"GRCh37",chromosomeSize:[0,249250621,243199373,198022430,191154276,180915260,171115067,159138663,146364022,141213431,135534747,135006516,133851895,115169878,107349540,102531392,90354753,81195210,78077248,59128983,63025520,48129895,51304566,155270560,59373566]},{genomeBuild:"GRCh38",chromosomeSize:[0,248956422,242193529,198295559,190214555,181538259,170805979,159345973,145138636,138394717,133797422,135086622,133275309,114364328,107043718,101991189,90338345,83257441,80373285,58617616,64444167,46709983,50818468,156040895,57227415]},{genomeBuild:"GRCm38",chromosomeSize:[0,195471971,182113224,160039680,156508116,151834684,149736546,145441459,129401213,124595110,130694993,122082543,120129022,120421639,124902244,104043685,98207768,94987271,90702639,61431566,0,0,0,171031299,91744698]}]},1265:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return i});var r,o=n(226),a={process_data:r=function(e,t,n){if(_.find(e,function(e){return void 0!==e[n]}))return o.zip(e,t).map(function(e){return void 0===e[0][n]===e[1][n]?0:e[0][n]/(e[0][n]+e[1][n])})},extract_and_process:function(e,t){var n=e.mutations.data["alt-count"],o=e.mutations.data["ref-count"];return r(n,o,t)},kernelDensityEstimator:function(e,t){return function(n){return t.map(function(t){return[t,o.mean(n,function(n){return e(t-n)})]})}},gaussianKernel:function(e){return function(t){return 1/(e*Math.sqrt(2*Math.PI))*Math.exp(-1*Math.pow(t-0,2)/(2*Math.pow(e,2)))}},calculate_bandwidth:function(e){var t=o.mean(e),n=o.mean(e.map(function(e){return Math.pow(e-t,2)}));return 1.06*Math.pow(n,.5)*Math.pow(e.length,-.2)}},i=function(t,n,r,i,l,u,s){var c=t.div,p={};if(i||(i={}),0===Object.keys(i).length){var f=0;for(var d in n)n.hasOwnProperty(d)&&(i[d]=f,f+=1)}for(var d in l=e.extend(!0,{},l),n)if(n.hasOwnProperty(d)){for(var m=o.rgb(l[d]||"rgb(0,0,0)");m.toString()in p&&(0!==m.r||0!==m.g||0!==m.b);)m=m.darker(.4);var h=m.toString();p[h]=!0,l[d]={stroke:h,fill:h}}var y=0===(r=r||{label_font_size:"11.5px",xticks:3,yticks:8,nolegend:!1}).xticks?13:30;r.margin=r.margin||{};var b=e.extend({top:20,right:30,bottom:30+y/2,left:50},r.margin),g=r.width||200,v=r.height||(500+y)/2-b.top-b.bottom,w=o.scale.linear().domain([-.1,1]).range([0,g]),S=o.svg.axis().scale(w).orient("bottom").ticks(r.xticks),O=a,E={},P={},T={};for(var d in n)n.hasOwnProperty(d)&&(E[d]=Math.max(O.calculate_bandwidth(n[d]),.01),P[d]=O.kernelDensityEstimator(O.gaussianKernel(E[d]),w.ticks(100)),T[d]=P[d](n[d]));var C=o.layout.histogram().frequency(!1).bins(w.ticks(30)),I={};for(var d in n)n.hasOwnProperty(d)&&(I[d]=C(n[d]));var _=[];for(var d in T)T.hasOwnProperty(d)&&(_=_.concat(T[d]));var k=_.map(function(e){return e[1]}),x=[o.min(k),o.max(k)],j=o.scale.linear().domain(x).range([v,0]),M=o.svg.line().x(function(e){return w(e[0])}).y(function(e){return j(e[1])}),A=o.select(c).append("svg").attr("width",g+b.left+(0===r.yticks?0:b.right)+(r.nolegend?0:100)).attr("height",v+b.top+b.bottom).attr("data-test","vaf-plot").append("g").attr("transform","translate("+(0===r.yticks?b.left/2:b.left)+","+b.top+")"),D=A.append("g").attr("transform","translate(0,"+v+")").call(S),R=function(e){return e.attr("fill","none").attr("stroke","#000").attr("shape-rendering","crispEdges")};R(D.selectAll("path")),R(D.selectAll("line")),D.append("text").attr("x",g/2).attr("y",y).attr("font-size",r.label_font_size).style("text-anchor","middle").style("font-style","italic").text("variant allele frequency");var N=[];for(var d in I)I.hasOwnProperty(d)&&(N=N.concat(I[d]));var L,G=N.map(function(e){return e.length}),V=[0,o.max(G)],F=o.svg.axis().scale(j.copy().domain(V)).orient("left").ticks(r.yticks),B=A.append("g").call(F),U=y;U+=0===r.yticks?0:((L=(""+V[1]).split("").length)>=4&&(L+=1.5),7*L/3),B.append("text").attr("transform","rotate(-90)").attr("x",-v/2).attr("y",-U).attr("font-size",r.label_font_size).style("text-anchor","middle").style("font-style","italic").text("mutation count"),R(B.selectAll("path")).attr("display",0===r.yticks?"":"none"),R(B.selectAll("line"));var H=N.map(function(e){return e.y}),W=[o.min(H),o.max(H)],q=j.copy();for(var d in q.domain(W),I)I.hasOwnProperty(d)&&A.selectAll(".bar").data(I[d]).enter().insert("rect").attr("x",function(e){return w(e.x)+1}).attr("y",function(e){return q(e.y)}).attr("class",i[d]+"_viz_hist viz_hist").attr("width",w(I[d][0].dx+I[d][0].x)-w(I[d][0].x)-1).attr("height",function(e){return v-q(e.y)}).attr("fill",l[d].fill).attr("opacity",Object.keys(n).length>1?"0.1":"0.3");for(var d in T)T.hasOwnProperty(d)&&A.append("path").datum(T[d]).attr("d",M).attr("class","curve "+i[d]+"_viz_curve viz_curve").attr("fill","none").attr("stroke",l[d].stroke).attr("stroke-width","1.5px").attr("opacity","0.9").attr("data-legend",function(){return d}).attr("data-legend-pos",function(){return i[d]});if(!r.nolegend&&Object.keys(n).length>1){var z=A.append("g").attr("class","legend").attr("transform","translate("+(g+25)+",0)").style("font-size","13px");o.legend(t,z,13,u,i,s)}return c};o.legend=function(t,n,r,a,i,l){return n.each(function(){var n=o.select(this),u={},s=o.select(n.property("nearestViewportElement")),c=n.attr("data-style-padding")||5,p=n.selectAll(".legend-box").data([!0]),f=n.selectAll(".legend-items").data([!0]);f.enter().append("g").classed("legend-items",!0),s.selectAll("[data-legend]").each(function(){var e=o.select(this);u[e.attr("data-legend")]={pos:e.attr("data-legend-pos")||this.getBBox().y,color:null!=e.attr("data-legend-color")?e.attr("data-legend-color"):"none"!=e.style("fill")?e.style("fill"):e.style("stroke")}}),u=o.entries(u).sort(function(e,t){return e.value.pos-t.value.pos});f.selectAll("text").data(u,function(e){return e.key}).call(function(e){e.enter().append("text")}).call(function(e){e.exit().remove()}).attr("y",function(e,t){return t-.2+.4*t+"em"}).attr("x","2em").text(function(e){var t=e.key;return t.length>10?t.substring(0,4)+"..."+t.slice(-3):t}),f.selectAll("circle").data(u,function(e){return e.key}).call(function(e){e.enter().append("circle")}).call(function(e){e.exit().remove()}).attr("cy",function(e,t){return t-.5+.4*t+"em"}).attr("cx","1.25em").attr("r","0.5em").style("fill",function(e){return e.value.color});for(var d=0,m=Object.keys(u);d<m.length;d++)f.append("text").attr("x","1.65em").attr("y",(d-.5+.4*d)*r).attr("fill","white").attr("font-size","10").attr("dy","0.34em").attr("text-anchor","middle").text(a[u[m[d]].key]).attr("class","sample-icon-text");for(d=0,m=Object.keys(u);d<m.length;d++){var h=u[d].key;if(Object.keys(l).includes(h)){var y=l[h].label,b=l[h].color;f.append("rect").attr("x","-0.75em").attr("y",d-1.06+.4*d+"em").attr("width",function(e){return"1.25em"}).attr("height",function(e){return"1.1em"}).attr("rx",4).attr("ry",4).attr("fill",function(e){return b}).attr("class","genepanel-icon"),f.append("text").attr("x","-0.15em").attr("y",(d-.5+.4*d)*r).attr("fill","white").attr("font-size","10").attr("dy","0.34em").attr("text-anchor","middle").text(y).attr("class","genepanel-icon-text")}}f.selectAll("rect:not(.genepanel-icon)").data(u,function(e){return e.key}).call(function(e){e.enter().append("rect")}).call(function(e){e.exit().remove()}).attr("id",function(e){return e.key+"legend_hover_rect"}).attr("y",function(e,t){return t-1+.4*t-.2+"em"}).attr("x","-1em").attr("width",function(e){return"117px"}).attr("height","1.4em").style("fill",function(e){return e.value.color}).attr("opacity","0").on("mouseover",Object.keys(u).length>1?function(n){e(this).attr("opacity","0.2"),function(t,n,r,o,a){e(t).find(".viz_hist").hide(),e(t).find(".viz_curve").hide(),o&&(e(t).find("."+r[n]+"_viz_hist").show(),e(t).find("."+r[n]+"_viz_hist").attr("opacity","0.5")),a&&e(t).find("."+r[n]+"_viz_curve").show()}(t.div,n.key,i,t.state.show_histogram,t.state.show_curve)}:function(e){}).on("mouseout",function(t){e(this).attr("opacity","0")});for(d=0;d<u.length;d++){var g=u[d].key;g.length>10&&(e("#"+g+"legend_hover_rect").attr("title",g),e("#"+g+"legend_hover_rect").qtip({content:{attr:"title"},style:{classes:"qtip-light qtip-rounded"},position:{my:"center left",at:"center right",viewport:e(window)}}))}f.on("mouseout",Object.keys(u).length>1?function(){var n,r,o;n=t.div,r=t.state.show_histogram,o=t.state.show_curve,r&&(e(n).find(".viz_hist").show(),e(n).find(".viz_hist").attr("opacity","0.1")),o&&e(n).find(".viz_curve").show()}:function(){});var v=f[0][0].getBBox();p.attr("x",v.x-c).attr("y",v.y-c).attr("height",v.height+2*c).attr("width",v.width+2*c)}),n}}).call(this,n(26))},1266:function(e,t,n){e.exports={portalWidth:"patientTable-module__portalWidth__10-JD",framedImage:"patientTable-module__framedImage__95IdD",patientTable:"patientTable-module__patientTable__2vI5g"}},1267:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEoAAABCCAYAAADwg0AcAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAABgJJREFUeJztnGtsFFUUx1sqQhAD2Igi+E4xRlHRSDTVmKgYNX4iMeonY3xFpRRKAQsq1SKUVqEKviUEWoxAqmAqpWWlFBBLpbZUAYu47+223d3u+707x3Pubqft7uyjwdDp9t7k30d2zsw9v3vuuWfv7E5WllR7Q5WDWoiqR5lQAgoyWFbUMdQLqEmSTCQg3YOqQ4Vk4MBoqAX1WCpIs1FtMujsaEuLmp8IEk23Whl0Ui5qR02VArUoK/Nz0UhVKgVKkcowd7kKWlVe+F3tG9MiH2auUMLExSlBqaVAWZIZfdZkhjaNFwQBxnwjHzp0XvjhDxvMXatLBkqQApVw2l1ZqIRT6ggkAX9kgqjprQHI/8gA2W8miSoJUAkPpnCNjIQw2jnjf9MAMGWfD65dpeWgkoGKRFUQZr3NQaUEZbBxUBwUB8VByU8cFAfFQXFQchYHxUFxUByUnMVBcVAc1NgERUYEphtPkPeejm2TJgP1/Ld9oDQFxf3oUBjA5gmDtj8Ip/V+UPzthWV7LXBFoRomDNlynYL/F+y2sGMHWjAsgMUVBqU5CB06P9Sf8cBStL0O+5Qdc90Xd5ggtpHvLr8A53sDUNPqhAXlBpi4WJ0S1OwSLfOVfHZ4QzCvTJ8aFHXqlMbPTqLvD4jg0gWVqLWj4w9UdMNlbyUGJdX8IQGaurxw0zu6YaClQMU2lSXIBim3WJMU1H0bDMxXak5fGEEZRgbKEN0mTRcUOb16vxUK9ligrN4KR857od89COLEv74ILBzlWFAYTPDaLjMUomMVh+xw/IIXeh0hFqEEq+GsB255dxDWUFBWvAY5+yCe++VqExz4y8NsiEUQfz9aZUwJiny9ZKC67aFhzkxdqoGKRhsEQpFOObxh2HDQxjbzY0HRtBt63unLNVB2wApGPKcQHQQ6nqZwLCiTMyTaTSpQw1Nbe8HsGhwgOlbWoEjkmMoced0fFEBxzgu3lepTgiLdjOeiaUdR4UPbPW0uuCo6jaRAZUev93QMqNe/M8sfFC0G359yidPrrDEAd39oSAtUbrEWvj7uBDtGYhAPa1H5YOZKbRwoiyvE+n3jGh08uaUHdrW6GFi6nicgwMJPeuQPilR12B6xh0iCnb8+PVDTizSwsdHOooOc/tMQgGtWxYOi17ptISaTM8zgECg6fvMvdpizOv5usOxA0d/7TrvZ65SYqWSYty49UBQ92084WW6j6Xf0Hy9cvSIxKANKg2UJRe1BLC1e2mmCOSU6XGnjSwRZgcrBUuCOD/RslKl5sMapPuliS30qUFRGPPSxEdq0fgaY6qNNCjtMK4rPUU6fwFbMV2vM8Ow3fWwgLi+Qrp9kAYqWc1r+r8dQp0ScX2nEgtMjOkSF5KKvehmkWFAEg65NEXAr2j6yyQg/drgZBIqYLiwiF2zsFqMj0aqXrkYVFDlVddgB5Q02VhlbXMOLyd24alHEkZ1UHVVaZ4XKQzaobXezBB6KmrsxmrYecYjRJDtQ9DZkpJU5XZ/qJnLOgoUg5Q7KGZTQqSzISVKZEywqIQg4QaacQxV9eYOd5avsBJX5xYK6F0GRryMCNQtXlWasqDsNftiLEUDlfzJQT3zaA/sxWRNc0m9KH3uPVt3ihPX1NpY75q7Vx9lNXqKG5xAyVe8DtlS5/9Tphm2/OmEd2r5SbYbb35fON8983ivaKc55LgrUnQiGfCWfaWApr6YENQMr4pW1FnGKkMbL7gH5vFlhYzk2JSgpjRdQkuKgOCgOioPioOQrDoqD4qA4KDmLg+KgOCgOSs7ioDgoDipzQG1psrHNfmq0BZsJokY3Ses63eJt+nRBhRMdPGWJCto0kajKpEafh8qvHPlXZXuTRVXJPgvsbLGLITuWG/lQc9IOlY1WuGFN0i9fh6VA/ZxqXk9bpoQvmu3w5THHmBb5MKNIKX6oLYm6pEA9njV+n8eSSMVSoLJR22TQObnoKGpyPKgIrFxUsww6Odo6g8qThjQIKw+1A+WTQYcvtSj10DOz7k8OaTiwu6LAiC49iMqZobKjLmRFnnT0MGqCFI7/AKBNHdZf2IG3AAAAAElFTkSuQmCC"},1268:function(e,t,n){},1269:function(e,t,n){e.exports={sampleColorPrimary:"#000",sampleColorRecurrence:"orange",sampleColorMetastasis:"red",sampleColorCfdna:"blue",sampleColorXenograft:"pink"}},1270:function(e,t,n){e.exports={portalWidth:"sampleTable-module__portalWidth__2sn4E",framedImage:"sampleTable-module__framedImage__2E0br",sampleTable:"sampleTable-module__sampleTable__37lEE"}},1271:function(e,t,n){},1273:function(e,t,n){e.exports=n(35)(893)},1276:function(e,t,n){},1278:function(e,t,n){},1279:function(e,t,n){e.exports={portalWidth:"trialMatch-module__portalWidth__3OMBJ",framedImage:"trialMatch-module__framedImage__llM-4",armDiv:"trialMatch-module__armDiv__8Ikbp",criteriaHr:"trialMatch-module__criteriaHr__33xV1",alterationUl:"trialMatch-module__alterationUl__15PAE",genomicSpan:"trialMatch-module__genomicSpan__1MdPT",tooltip:"trialMatch-module__tooltip__3TLty",statusBackground:"trialMatch-module__statusBackground__1izwh",icon:"trialMatch-module__icon__1kFBu",marginLeft:"trialMatch-module__marginLeft__3bEGE",marginRight:"trialMatch-module__marginRight__2Ei8B",matchInfoContainer:"trialMatch-module__matchInfoContainer__2Mbjv",sampleIdsContainer:"trialMatch-module__sampleIdsContainer__nJeC2",genomicInfoContainer:"trialMatch-module__genomicInfoContainer__2rTwv",criteriaContainer:"trialMatch-module__criteriaContainer__10CIJ",firstLeft:"trialMatch-module__firstLeft__3xi9Y",firstRight:"trialMatch-module__firstRight__x9eHB",secondLeft:"trialMatch-module__secondLeft__3fgcR",secondRight:"trialMatch-module__secondRight__Yz5Ho",powered:"trialMatch-module__powered__1pOTQ",statusContainer:"trialMatch-module__statusContainer__1xnON",feedback:"trialMatch-module__feedback__1u4I4",feedbackButton:"trialMatch-module__feedbackButton__2-8zQ"}},1280:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAydJREFUeNrs2F9MUlEYAPBPBFH+iTYs/EfLRJ2rMZuvic2H8sHZew/40LPaSy9t9eBLtdR6qDlXsdbmY7q52VYZulk60GhrOZ8ElykIchVFLlzu7TvGdVkRF7jEC9/27dxxOR+/HeCcew5APvKRj3xkNQqyWbzJ1GrCphfTFE8K04k5gWlddtqpnAERN4RNX+uFFmhvuwjG+jpgYyzYF5dgcuo1bGx6CK4fkdb/+pUgTIv5qaOzi1uwOziGYTiaprlQKMQFg0GOoijO7/dzj0dGOXwfScu/6hWKjcPmfWOD0TT24hkYamsgFov9kSzLQqOxHip0Ovgwv9CtO1U149v87vpbTYnIAzhUVak3WUefgFKhSIjjrzva26Djkpn0u52ooETE0XuuVqstjwbvC8Lx2dV5mXQ3Y//TWQPyODJyxrN1gnEka2uq+TLZAWaC47O5qTE7QDFwJF3uNVJO3D8JwakqDZaBB8MZ4TxeL+yHQhCfxMUBEpy0RGE5d+0GTAWKYY0KpYUjaZudOxw9nLCdogB5nOn6LSjSlMN+OAJDH93HkEJxqy43TL15R8r2izJR/4pTVtTg0sXgBzFARxlwrFNgLC8GlUwiGDdwbxBwhSFr8t2MgYlwLBkxbCOIXPwWOEQqpQWp4HoyXuqS4X5HVspZ0CrkGeMEARF3B3F9yXBHyAgD86se0BRyoNeUZIRLCowvP6/O99wEddWZpDiW+dly+BT3xRMErVwCJ5VFaeNISJPc71XpDVBqaBCMix29zsDYkhsizXpo0Mpg5Kk1ZZwQoOlEU0taOP7eS9siMM634PP5U8YJAeLvrjptHL3tBe/MOLBROi2coIk6crCXM5wg4N6GO2c4IcCJwMrnlHBM+EA0nBCgld7xU5v2aeG42UOcTQxc0nkQNzJh3NB4dl0r3TJVKcjLKhLiokEKtuYmIUr5yFPJFdI368A40olI9+7q1+7IbgBkZTooKJQe4ZjwPuwsO2DbMQ2xUHAcu1wVsiEX/WQBVxVzfPdlluJoypQaiNFhiFBb/NPwQ4QN5/zoI778HTvKQJgtf4qUj3zkKH4IMADm03zZs4fvPwAAAABJRU5ErkJggg=="},1281:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__3hRmD",framedImage:"styles-module__framedImage__WKn6v",zoomControls:"styles-module__zoomControls__uXkD3",zoomButton:"styles-module__zoomButton__17cGd"}},1282:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__2aeY-",framedImage:"styles-module__framedImage__NILoq",Tooltip:"styles-module__Tooltip__1Qxp7"}},1283:function(e,t,n){},1285:function(e,t,n){e.exports={portalWidth:"mutationalSignatureTable-module__portalWidth__3o3k5",framedImage:"mutationalSignatureTable-module__framedImage__3wxhg",mutationalSignatureValue:"mutationalSignatureTable-module__mutationalSignatureValue__1jp3y"}},1766:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(1),i=n.n(a),l=n(23),u=n(1173),s=(n(88),n(26)),c=n.n(s),p=n(1265);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=function(e){function t(e){var n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=m(t).call(this,e),n=!o||"object"!==f(o)&&"function"!=typeof o?h(r):o,Object.defineProperty(h(n),"histogramCheckbox",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(h(n),"curveCheckbox",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(h(n),"div",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(h(n),"refHandlers",{enumerable:!0,configurable:!0,writable:!0,value:{histogramCheckbox:function(e){n.histogramCheckbox=e},curveCheckbox:function(e){n.curveCheckbox=e},div:function(e){n.div=e}}});var a=0===n.props.xticks?13:30,i={label_font_size:n.props.label_font_size,xticks:n.props.xticks,yticks:n.props.yticks,nolegend:n.props.nolegend,margin:{top:n.props.margin_top,left:n.props.margin_left,right:n.props.margin_right,bottom:n.props.margin_bottom},width:n.props.width,height:n.props.height};return void 0===i.margin.bottom&&(i.margin.bottom=30+a/2),void 0===i.height&&void 0!==i.margin.top&&(i.height=(500+a)/2-i.margin.top-i.margin.bottom),n.state={show_histogram:!!n.props.init_show_histogram,show_curve:!!n.props.init_show_curve,options:i},n.toggleShowHistogram=n.toggleShowHistogram.bind(h(n)),n.toggleShowCurve=n.toggleShowCurve.bind(h(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){Object(p.a)(this,this.props.data,this.state.options,this.props.order,this.props.colors,this.props.labels,this.props.genepanel_icon_data)}},{key:"componentDidUpdate",value:function(){c()(this.div).find("svg").remove(),Object(p.a)(this,this.props.data,this.state.options,this.props.order,this.props.colors,this.props.labels,this.props.genepanel_icon_data)}},{key:"shouldComponentUpdate",value:function(e,t){return this.histogramCheckbox&&(t.show_histogram?c()(this.div).find(".viz_hist").show():c()(this.div).find(".viz_hist").hide()),this.curveCheckbox&&(t.show_curve?c()(this.div).find(".viz_curve").show():c()(this.div).find(".viz_curve").hide()),t.show_histogram!==this.state.show_histogram||t.show_curve!==this.state.show_curve||!i.a.isEqual(this.props.data,e.data)}},{key:"toggleShowHistogram",value:function(){var e=!this.state.show_histogram;this.setState({show_histogram:e})}},{key:"toggleShowCurve",value:function(){var e=!this.state.show_curve;this.setState({show_curve:e})}},{key:"render",value:function(){var e=[r.createElement("label",{key:"histogram-toggle",style:{marginRight:10}},r.createElement("input",{ref:this.refHandlers.histogramCheckbox,type:"checkbox",checked:this.state.show_histogram,onChange:this.toggleShowHistogram,style:{marginRight:3}}),"histogram"),r.createElement("label",{key:"curve-toggle"},r.createElement("input",{ref:this.refHandlers.curveCheckbox,type:"checkbox",checked:this.state.show_curve,onChange:this.toggleShowCurve,style:{marginRight:3}}),"density estimation")];return r.createElement("div",{style:{display:"inline"},ref:this.refHandlers.div},this.props.show_controls?e:[],this.props.show_controls?r.createElement("br",null):[])}}])&&d(n.prototype,o),a&&d(n,a),t}();Object.defineProperty(b,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{data:{},order:{},colors:{},labels:{},width:200,height:void 0,margin_left:50,margin_top:20,margin_right:30,margin_bottom:void 0,xticks:3,yticks:8,label_font_size:"11.5px",nolegend:!1,init_show_histogram:!0,init_show_curve:!0,show_controls:!1}});var g=n(3);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var P=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),S(this,O(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e={data:this.props.data,colors:this.props.colors,order:this.props.order,show_controls:!1,nolegend:!0,width:64,height:64,label_font_size:"6.5px",xticks:0,yticks:0,margin_bottom:15},t={data:this.props.data,colors:this.props.colors,labels:this.props.labels,order:this.props.order,show_controls:!0,nolegend:!1,init_show_histogram:!0,init_show_curve:!0,genepanel_icon_data:this.props.genePanelIconData};return r.createElement(g.i,{placement:this.props.overlayPlacement,trigger:["hover","focus"],overlay:r.createElement(b,t),arrowContent:r.createElement("div",{className:"rc-tooltip-arrow-inner"}),destroyTooltipOnHide:!1,mouseLeaveDelay:Object(g.pb)()?2:.05},r.createElement("div",{className:this.props.cssClass||""},r.createElement(b,e)))}}])&&w(n.prototype,o),a&&w(n,a),t}();Object.defineProperty(P,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{order:{},colors:{},labels:{},overlayPlacement:"left"}});var T=n(2),C=n(21),I="blue",_="P",k={label:"W",color:"#007fff",genePanelId:void 0};function x(e,t){var n=i.a.values(e),r=i.a.values(C.a);if(!e||0===i.a.difference(n,r).length)return{};var o=i()(e).omitBy(function(e){return e in t}).mapValues(function(){return k}).value();return i()(e).pickBy(function(e){return e in t}).forIn(function(e,n){return o[n]=t[e]}),o}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var N=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":R(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},L=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=M(t).call(this,e))||"object"!==R(o)&&"function"!=typeof o?A(r):o,Object(T.makeObservable)(A(n)),n}var n,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=a.reduce(this.props.sampleManager.samples,function(e,t,n){return e[t.id]=n+1,e},{});return r.createElement("div",{style:{display:"flex"}},r.createElement(u.b,{mutations:a.flatten(this.props.mergedMutations),key:Math.random(),sampleManager:this.props.sampleManager,width:this.getTracksWidth(),cnaSegments:this.props.cnaSegments,samples:this.props.samples,mutationGenePanelIconData:this.sampleIdToMutationGenePanelIconData,copyNumberGenePanelIconData:this.sampleIdToCopyNumberGenePanelIconData,onSelectGenePanel:this.props.onSelectGenePanel}),r.createElement(l.If,{condition:this.shouldShowVAFPlot()},r.createElement(P,{data:this.frequencies,order:this.props.sampleManager.sampleIndex,colors:this.props.sampleColors,labels:e,overlayPlacement:"right",cssClass:"vafPlot",genePanelIconData:this.sampleIdToMutationGenePanelIconData})))}},{key:"shouldShowVAFPlot",value:function(){return this.props.mergedMutations.length>0&&this.isFrequencyExist()}},{key:"isFrequencyExist",value:function(){for(var e=0,t=Object.keys(this.frequencies);e<t.length;e++){var n=t[e];if(this.frequencies.hasOwnProperty(n)){var r=!0,o=!1,a=void 0;try{for(var i,l=this.frequencies[n][Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var u=i.value;return!isNaN(u)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}}}return!1}},{key:"getTracksWidth",value:function(){return this.props.containerWidth-(this.shouldShowVAFPlot()?140:40)}},{key:"computeMutationFrequencyBySample",value:function(e){var t,n,r={},o=!0,a=!1,i=void 0;try{for(var l,u=e[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var s=l.value,c=!0,p=!1,f=void 0;try{for(var d,m=s[Symbol.iterator]();!(c=(d=m.next()).done);c=!0){var h=d.value;h.tumorAltCount>=0&&h.tumorRefCount>=0&&(t=h.sampleId,n=h.tumorAltCount/(h.tumorRefCount+h.tumorAltCount),r[t]=r[t]||[],r[t].push(n))}}catch(e){p=!0,f=e}finally{try{c||null==m.return||m.return()}finally{if(p)throw f}}}}catch(e){a=!0,i=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw i}}for(var y=0,b=Object.keys(this.props.sampleOrder);y<b.length;y++){var g=b[y];r[g]=r[g]||[];for(var v=e.length-r[g].length,w=0;w<v;w++)r[g].push(NaN)}return r}},{key:"frequencies",get:function(){return this.computeMutationFrequencyBySample(this.props.mergedMutations)}},{key:"genePanelIds",get:function(){return a.uniq(a.concat(a.values(this.props.sampleIdToMutationGenePanelId),a.values(this.props.sampleIdToCopyNumberGenePanelId)))}},{key:"genePanelIdToIconData",get:function(){return e=this.genePanelIds,t=i.a.uniq(i.a.filter(e,function(e){return void 0!==e})).sort(),n={},i()(t).filter(function(e){return i.a.values(C.a).includes(e)}).each(function(e){var t=Object.assign({},k);t.genePanelId=e,n[e]=t}),i()(t).reject(function(e){return i.a.values(C.a).includes(e)}).each(function(e,t){n[e]={genePanelId:e,label:_+(t+1),color:I}}),n;var e,t,n}},{key:"sampleIdToMutationGenePanelIconData",get:function(){return x(this.props.sampleIdToMutationGenePanelId,this.genePanelIdToIconData)}},{key:"sampleIdToCopyNumberGenePanelIconData",get:function(){return x(this.props.sampleIdToCopyNumberGenePanelId,this.genePanelIdToIconData)}}])&&j(n.prototype,o),s&&j(n,s),t}();N([T.computed],L.prototype,"frequencies",null),N([T.computed],L.prototype,"genePanelIds",null),N([T.computed],L.prototype,"genePanelIdToIconData",null),N([T.computed],L.prototype,"sampleIdToMutationGenePanelIconData",null),N([T.computed],L.prototype,"sampleIdToCopyNumberGenePanelIconData",null);var G=n(73),V=n(1266),F=n.n(V),B=n(136);function U(e,t){var n=Number(e.priority)||0,r=(Number(t.priority)||0)-n;return 0===r?(void 0===e.displayName?"":e.displayName).localeCompare(t.displayName):r}var H=n(12);function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){return!t||"object"!==Q(t)&&"function"!=typeof t?K(e):t}function K(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var $=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Q(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},J=function(e){function t(){return q(this,t),z(this,Y(t).apply(this,arguments))}return X(t,G["b"]),t}(),ee=function(e){function t(){var e;return q(this,t),e=z(this,Y(t).apply(this,arguments)),Object.defineProperty(K(e),"renderGenePanelLinks",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n=[],o=t.split(",");return o.forEach(function(t,a){if((t=t.trim()).includes("N/A")||"WXS"===t)n.push(t);else{var i=t.split(" ");n.push(r.createElement("a",{onClick:function(){return e.handleClick(i[0])}},t))}a<o.length-1&&n.push(", ")}),r.createElement("span",null,n)}}),e}var n,o,a;return X(t,r["Component"]),n=t,(o=[{key:"getDisplayValue",value:function(e){var t;switch(e.attribute){case"Overall Survival (Months)":t=parseInt(e.value,10).toFixed(0);break;default:t=e.value}return t}},{key:"handleClick",value:function(e){this.props.onSelectGenePanel&&this.props.onSelectGenePanel(e)}},{key:"render",value:function(){var e=this,t=this.props.data&&this.props.data.sort(function(e,t){return U(e.clinicalAttribute,t.clinicalAttribute)}).map(function(e){return{attribute:e.clinicalAttribute.displayName||"",value:e.value}});return r.createElement(J,{data:t,columns:[{name:"Attribute",render:function(e){return r.createElement("span",null,e.attribute)},download:function(e){return e.attribute},filter:function(e,t,n){return e.attribute.toString().toUpperCase().indexOf(n)>-1},sortBy:function(e){return e.attribute}},{name:"Value",render:function(t){return Object(g.ob)(t.value)?r.createElement("a",{href:t.value,target:"_blank"},t.value):"Gene Panel"===t.attribute?e.renderGenePanelLinks(t.value):r.createElement("span",null,e.getDisplayValue(t))},download:function(t){return e.getDisplayValue(t)},filter:function(e,t,n){return e.value.toString().toUpperCase().indexOf(n)>-1}}],showPagination:!1,showColumnVisibility:!1,className:F.a.patientTable,initialItemsPerPage:B.b,showFilter:!1!==this.props.showFilter,showCopyDownload:!1!==this.props.showCopyDownload})}}])&&W(n.prototype,o),a&&W(n,a),t}();$([H.default],ee.prototype,"handleClick",null);n(1176);var te="orange",ne={AGE:{primary:!0,formatter:function(e){return"".concat(e," years old")},order:2},BREAST_CANCER_RECEPTOR_STATUS:{primary:!0,order:6},CANCER_TYPE:{primary:!0,order:3},CANCER_TYPE_DETAILED:{primary:!1,order:4},DERIVED_NORMALIZED_CASE_TYPE:{primary:!0,values:{Primary:"black",Progressed:te,Recurrence:te,Metastasis:"red"},order:1},DERIVED_SAMPLE_LOCATION:{primary:!1,order:2},DFS_STATUS:{primary:!0,values:{_:"#f00",DiseaseFree:"rgb(0, 128, 0)",Yes:"rgb(0, 128, 0)"},order:9},DFS_MONTHS:{primary:!1,formatter:function(e){return"".concat(e," months")},order:10},DRIVER_MUTATIONS:{primary:!0,order:6},ERG_FUSION_ACGH:{primary:!0,formatter:function(e){return"ERG-fusion aCGH: ".concat(e)},order:6},ETS_RAF_SPINK1_STATUS:{primary:!0,order:6},GLEASON:{primary:!0,formatter:function(e){return"Gleason: ".concat(e)}},GLEASON_SCORE:{primary:!0,order:6},GENDER:{primary:!0,order:1},HISTOLOGY:{primary:!0,order:6},KNOWN_MOLECULAR_CLASSIFIER:{primary:!0,order:5},MOUSE_STRAIN:{primary:!0,order:6},PATIENT_DISPLAY_NAME:{primary:!1,order:0},OS_MONTHS:{primary:!1,formatter:function(e){return"".concat(e," months")},order:8},OS_STATUS:{primary:!0,values:{DECEASED:"#f00",DEAD:"#f00",LIVING:"rgb(0, 128, 0)",ALIVE:"rgb(0, 128, 0)"},order:7},SAMPLE_DISPLAY_NAME:{primary:!1,order:0},SERUM_PSA:{primary:!0,formatter:function(e){return"Serum PSA: ".concat(e)},order:6},SEX:{primary:!0,order:1},TMPRSS2_ERG_FUSION_STATUS:{primary:!0,formatter:function(e){return"TMPRSS2-ERG Fusion: ".concat(e)},order:6},TUMOR_GRADE:{primary:!0,order:6},TUMOR_STAGE_2009:{primary:!0,order:6}};function re(e,t){return e in t&&ie("order",t[e])?t[e].order:Number.MAX_VALUE}function oe(e,t,n,r){var o=void 0!==n&&ie(t,n),a=o&&ie("primary",n[t]),i=o&&ie("formatter",n[t])?n[t].formatter:function(e){return"".concat(e)},l=!!a&&n[t].primary,u=r.indexOf(t),s=0===u?", ":"",c=function(e,t){return e===t.length-1?"":!0===t[e]?", ":" "}(u,r.map(function(e){return function(e,t,n){var r=t.indexOf(e)+1,o=t[r];return void 0!==o&&void 0!==n&&ie("primary",n[o])&&n[o].primary}(e,r,n)})),p=[];return l?p.push(""):p.push("("),p.push(i(e)),l?p.push(""):p.push(")"),[s,p.join(""),c]}function ae(e,t,n){var r=void 0!==n&&ie(t,n)&&ie("values",n[t]),o=r?n[t].values:void 0;return r&&e in o?o[e]:r&&"_"in o?o._:"#333333"}function ie(e,t){return e in t&&void 0!==t[e]}function le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ue(e,t){if(!e)return null;for(var n=0;n<t.length;n+=1){var r=e[t[n]];if(null!=r)return r}return null}function se(e){return function(e){var t,n=s.extend({},e),r=function(e,t){var n,r,o,a=null;for(o=0;o<t.length&&(null==(n=e[t[o]])||((r=n.toLowerCase()).indexOf("metasta")>=0?a="Metastasis":r.indexOf("recurr")>=0?a="Recurrence":r.indexOf("progr")>=0?a="Progressed":r.indexOf("xeno")>=0||r.indexOf("pdx")>=0?a="Xenograft":r.indexOf("cfdna")>=0?a="cfDNA":r.indexOf("prim")>=0&&(a="Primary"),null==a));o+=1);return a}(e,["SAMPLE_CLASS","SAMPLE_TYPE","TUMOR_TISSUE_SITE","TUMOR_TYPE"]);return null!==r&&(n.DERIVED_NORMALIZED_CASE_TYPE=r,null!==(t="Metastasis"===n.DERIVED_NORMALIZED_CASE_TYPE?ue(e,["METASTATIC_SITE","TUMOR_SITE"]):"Primary"===n.DERIVED_NORMALIZED_CASE_TYPE?ue(e,["PRIMARY_SITE","TUMOR_SITE"]):ue(e,["TUMOR_SITE"]))&&(n.DERIVED_SAMPLE_LOCATION=t)),n}(function(e){for(var t=s.extend({},e),n=["not applicable","not available","pending","discrepancy","completed","","null","unknown","na","n/a","[unkown]","[not submitted]","[not evaluated]","[not applicable]","[not available]","[undefined]"],r=Object.keys(e),o=0;o<r.length;o+=1){var a=void 0,i=r[o];if(a=e[i],n.indexOf(a.toLowerCase())>-1)delete t[i];else switch(i){case"OS_MONTHS":case"DFS_MONTHS":case"AGE":s.isNumeric(a)&&(a=Math.floor(a)),t[i]=a;break;case"OS_STATUS":case"DFS_STATUS":a.match(/^(1|0):/)&&(a=a.replace(/^(1|0):/,""),t[i]=a)}}return t}(e))}function ce(e){var t=ne,n=Object.keys(e).sort(function(e,n){return function(e,t,n){return re(e,n)-re(t,n)}(e,n,t)}).filter(function(e){return function(e,t){return void 0!==t&&e in t}(e,t)});return n.map(function(o){var a=e[o],i=le(oe(a,o,t,n),3),l=i[0],u=i[1],s=i[2];return r.createElement("span",{is:!0,style:{color:ae(a,o,t)}},r.createElement("span",{class:"dark-comma"},l),u,r.createElement("span",{class:"dark-comma"},s))})}function pe(e){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function de(e,t){return!t||"object"!==pe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function he(e,t){return(he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ye=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),de(this,me(t).apply(this,arguments))}var o,i,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&he(e,t)}(t,r["Component"]),o=t,(i=[{key:"render",value:function(){return r.createElement("div",null,this.props.patient&&this.getOverlayTriggerPatient(this.props.patient,this.props.studyId,this.props.sampleManager),this.getDarwinUrl(this.props.darwinUrl))}},{key:"getDarwinUrl",value:function(e){if(null!=e&&""!==e){var t=n(1267);return r.createElement("a",{target:"_blank",href:e},r.createElement("img",{style:{paddingLeft:"5px",height:"21px",width:"29px"},src:t}))}return null}},{key:"getPopoverPatient",value:function(e){return e&&r.createElement("div",{key:e.id,style:{maxHeight:400,maxWidth:600,overflow:"auto"}},r.createElement("h5",null,e.id),r.createElement(ee,{showFilter:!1,showCopyDownload:!1,showTitleBar:!1,data:e.clinicalData}))}},{key:"getOverlayTriggerPatient",value:function(e,t,n){var o=this,i=Object(a.fromPairs)(e.clinicalData.map(function(e){return[e.clinicalAttributeId,e.value]}));return n&&Object.keys(n.commonClinicalDataLegacyCleanAndDerived).forEach(function(e){i[e]=n.commonClinicalDataLegacyCleanAndDerived[e]}),e&&r.createElement(g.i,{placement:"bottomLeft",trigger:["hover","focus"],overlay:this.getPopoverPatient(e),arrowContent:r.createElement("div",{className:"rc-tooltip-arrow-inner"}),destroyTooltipOnHide:!0,onPopupAlign:g.tb},r.createElement("span",{className:"clinical-spans",id:"patient-attributes"},r.createElement("a",{href:"javascript:void(0)",onClick:function(){return o.props.handlePatientClick(e.id)}},e.id),ce(se(i))))}}])&&fe(o.prototype,i),l&&fe(o,l),t}(),be=n(13),ge=n(27),ve=n(77),we=n(34),Se=n(38);function Oe(e){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ee(e,t){return!t||"object"!==Oe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pe(e){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Te(e,t){return(Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ce=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return Ee(this,(n=Pe(t)).call.apply(n,[this,function(e){return e.sampleId+","+e.entrezGeneId},function(e){return e.sampleId+","+e.entrezGeneId},e].concat(o)))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Te(e,t)}(t,Se["a"]),t}();function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _e(e,t){return!t||"object"!==Ie(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ke(e){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xe(e,t){return(xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var je=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function l(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,l)}u((r=r.apply(e,t||[])).next())})};function Me(e,t){return je(this,void 0,void 0,regeneratorRuntime.mark(function n(){var r,o,i,l,u,s,c,p;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:for(n.prev=0,r={},o=!0,i=!1,l=void 0,n.prev=5,u=e[Symbol.iterator]();!(o=(s=u.next()).done);o=!0)c=s.value,r[c.sampleId]=r[c.sampleId]||[],r[c.sampleId].push(c.entrezGeneId);n.next=13;break;case 9:n.prev=9,n.t0=n.catch(5),i=!0,l=n.t0;case 13:n.prev=13,n.prev=14,o||null==u.return||u.return();case 16:if(n.prev=16,!i){n.next=19;break}throw l;case 19:return n.finish(16);case 20:return n.finish(13);case 21:return n.next=23,Promise.all(Object.keys(r).map(function(e){return null===t?Promise.reject("No molecular profile id given."):ge.a.fetchMrnaPercentileUsingPOST({molecularProfileId:t,sampleId:e,entrezGeneIds:r[e]})}));case 23:return p=n.sent,n.abrupt("return",a.flatten(p));case 27:throw n.prev=27,n.t1=n.catch(0),n.t1;case 30:case"end":return n.stop()}},n,null,[[0,27],[5,9,13,21],[14,,16,20]])}))}var Ae=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),_e(this,ke(t).call(this,Me,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xe(e,t)}(t,Ce),t}(),De=n(24),Re=n.n(De),Ne=n(253),Le=n(19),Ge=n(347),Ve=n(243),Fe=n(245),Be=n(62),Ue=n(15);function He(e){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function We(e,t){return!t||"object"!==He(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qe(e){return(qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ze(e,t){return(ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ke(e){return e.keyword?e.entrezGeneId+"~"+e.keyword:e.entrezGeneId+""}function Ye(e,t){return t?e.length>0?ge.a.fetchVariantCountsUsingPOST({molecularProfileId:t,variantCountIdentifiers:e}):Promise.resolve([]):Promise.reject("No mutation molecular profile id given")}var Xe=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),We(this,qe(t).call(this,Ke,Ke,Ye,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ze(e,t)}(t,Se["a"]),t}();function Ze(e){return(Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qe(e,t){return!t||"object"!==Ze(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $e(e){return($e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Je(e,t){return(Je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function et(e){return e.entrezGeneId+"~"+e.alteration}function tt(e,t){return t?e.length?ge.a.fetchCopyNumberCountsUsingPOST({molecularProfileId:t,copyNumberCountIdentifiers:e}):Promise.resolve([]):Promise.reject("No discrete CNA molecular profile id given")}var nt=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Qe(this,$e(t).call(this,et,et,tt,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Je(e,t)}(t,Se["a"]),t}(),rt=n(429),ot=n(252),at=n(7),it=n(406),lt=n(6);function ut(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function st(e,t,n){var r={};if(2===e[0].alteration)for(var o in n[t])o===lt.c.AMPLIFICATION&&(r=ut({},t,n[t][o]));else if(-2===e[0].alteration)for(var a in n[t])a===lt.c.DELETION&&(r=ut({},t,n[t][a]));return r}function ct(e,t,n){var r=Object(C.g)(t,n);return Object(lt.A)(e,r)}function pt(e){if(e.result&&e.result.length>0){var t=new Set([]);e.result.forEach(function(e){t.add(e.gene.entrezGeneId)});var n=Array.from(t);return Object(lt.R)(n)}return Promise.resolve({})}var ft=n(349),dt=n(246),mt=n(403),ht=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function l(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,l)}u((r=r.apply(e,t||[])).next())})};function yt(e){return ht(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(Le.a)("api/matchminer/api"),t.abrupt("return",De.post(n+"/trials").set("Content-Type","application/json").send(e).then(function(e){return JSON.parse(e.text).map(function(e){return{id:e.nct_id+"+"+e.protocol_no,nctId:e.nct_id,protocolNo:e.protocol_no,principalInvestigator:e.principal_investigator,phase:e.phase,shortTitle:e.short_title,status:e.status,treatmentList:e.treatment_list}})}));case 2:case"end":return t.stop()}},t)}))}function bt(e,t){t=function(e){var t=["Control Arm","Placebo Arm"],n=[];return a.forEach(e,function(e){e.armType&&t.includes(e.armType)||n.push(e)}),n}(t);var n=a.groupBy(t,function(e){return e.id}),r=a.map(n,function(t,n){var r,o,i=a.find(e,function(e){return e.id===n}),l={id:i.id,nctId:i.nctId,principalInvestigator:i.principalInvestigator,protocolNo:i.protocolNo,phase:i.phase,shortTitle:i.shortTitle,status:i.status,matches:[],priority:0};return l.matches=function(e,t){var n=a.groupBy(e,function(e){return e.armDescription});return a.map(n,function(e,n){var r={armDescription:n,drugs:[],matches:[],sampleIds:a.uniq(e.map(function(e){return e.sampleId})).sort()};return a.isUndefined(t.treatmentList.step[0].arm)||(r.drugs=function(e,t){var n=[];if(""!==e){var r=a.find(t,function(t){return t.arm_description===e});a.isUndefined(r.drugs)||(n=r.drugs.map(function(e){return e.map(function(e){return e.name})}))}return n}(n,t.treatmentList.step[0].arm)),r.matches=function(e){var t=a.groupBy(e,function(e){return e.trialAgeNumerical}),n=a.map(t,function(e,n){var r=a.uniq(a.map(e,function(e){return e.trialOncotreePrimaryDiagnosis})),o=[],i=[];a.map(r,function(e){a.isUndefined(e)||(e.includes("!")?i.push(e.replace("!","")):o.push(e))});var l,u,s,c={trialAgeNumerical:[n],trialOncotreePrimaryDiagnosis:{positive:o,negative:i}},p=a.filter(t[n],function(e){if(!a.isUndefined(e.genomicAlteration)&&""!==e.genomicAlteration)return!e.genomicAlteration.includes("!")}),f=a.filter(t[n],function(e){if(!a.isUndefined(e.genomicAlteration)&&""!==e.genomicAlteration)return e.genomicAlteration.includes("!")});return p.length>0&&(c.matches=(l=p,u=a.groupBy(l,function(e){return e.matchType}),s={MUTATION:[],CNA:[],MSI:[],WILDTYPE:[]},a.forEach(u,function(e,t){if("MUTATION"===t){var n=a.groupBy(e,function(e){return e.trueHugoSymbol});a.forEach(n,function(e){var t={genomicAlteration:a.uniq(e.map(function(e){return e.genomicAlteration})),patientGenomic:{trueHugoSymbol:e[0].trueHugoSymbol,trueProteinChange:a.uniq(e.map(function(e){return e.trueProteinChange})).sort()}};s.MUTATION.push(t)})}else{var r={genomicAlteration:a.uniq(e.map(function(e){return e.genomicAlteration}))};s[t].push(r)}}),s)),f.length>0&&(c.notMatches=function(e){var t=a.groupBy(e,function(e){return e.matchType}),n={MUTATION:[],CNA:[],MSI:[],WILDTYPE:[]};return a.forEach(t,function(e,t){var r={genomicAlteration:a.uniq(e.map(function(e){return e.genomicAlteration}))};n[t].push(r)}),n}(f)),c});if(n.length>1)return r=n,o=[],i=a.groupBy(r,function(e){return e.trialOncotreePrimaryDiagnosis}),a.forEach(i,function(e){a.forEach(e,function(t,n){0!==n&&(e[0].trialAgeNumerical=e[0].trialAgeNumerical.concat(t.trialAgeNumerical))}),o.push(e[0])}),o;var r,o,i;return n}(e),r})}(t,i),l.priority=(r=l.matches,o=0,a.forEach(r,function(e){a.forEach(e.matches,function(e){o+=function(e){var t=0,n=0;return a.isUndefined(e.matches)||(t=gt(e.matches)),a.isUndefined(e.notMatches)||(n=gt(e.notMatches)),n>0?0===t?2:1:0}(e)})}),o),l});return a.sortBy(r,function(e){return e.priority})}function gt(e){return a.sum([e.MUTATION.length,e.CNA.length,e.MSI.length,e.WILDTYPE.length])}var vt=n(17),wt=n(9);function St(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ot(e,t){return!t||"object"!==Tt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Et(e){return(Et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pt(e,t){return(Pt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Tt(e){return(Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ct,It=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Tt(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};!function(e){e.ANY_SAMPLE="anySample",e.ALL_SAMPLES="allSamples"}(Ct||(Ct={}));var _t=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ot(this,Et(t).call(this,e))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pt(e,t)}(t,o.a.Component),n=t,(r=[{key:"handleOptionChange",value:function(e){if(this.props.onOptionChanged){var t=e.target;this.props.onOptionChanged(t.value)}}},{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,"Different gene panels were used for the samples."),o.a.createElement("div",null,"Filter mutations for:"),o.a.createElement(vt.Radio,{value:Ct.ANY_SAMPLE,checked:this.props.currentSelection===Ct.ANY_SAMPLE,onChange:function(t){return e.handleOptionChange(t)}},"Genes profiled in any sample"),o.a.createElement(vt.Radio,{value:Ct.ALL_SAMPLES,checked:this.props.currentSelection===Ct.ALL_SAMPLES,onChange:function(t){return e.handleOptionChange(t)}},"Genes profiled in all samples"))}}])&&St(n.prototype,r),a&&St(n,a),t}(),kt=_t=It([wt.observer],_t),xt=n(14);n(1268);function jt(e){return(jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function At(e,t){return!t||"object"!==jt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dt(e){return(Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rt(e,t){return(Rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Nt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),At(this,Dt(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rt(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement(l.If,{condition:!0===this.props.tooltipEnabled},r.createElement(l.Then,null,this.contentWithTooltip()),r.createElement(l.Else,null,this.mainContent()))}},{key:"tooltipContent",value:function(){var e=this.props,t=e.sample,n=e.extraTooltipText;return r.createElement("div",{style:{maxHeight:400,maxWidth:600,overflow:"auto"}},r.createElement("h5",{style:{marginBottom:1}},r.createElement("span",{className:"sample-inline-tooltip-children"},this.props.children),t.id),n&&r.createElement("h5",null,n),!this.props.hideClinicalTable&&r.createElement(ee,{showFilter:!1,showCopyDownload:!1,showTitleBar:!1,data:t.clinicalData,onSelectGenePanel:this.props.onSelectGenePanel}))}},{key:"mainContent",value:function(){var e=this.props.additionalContent,t=r.createElement("svg",{height:"12",width:"12"},this.props.children);return e&&(t=r.createElement("span",null,t,e)),t}},{key:"contentWithTooltip",value:function(){return r.createElement(g.i,{placement:"bottomLeft",trigger:["hover","focus"],overlay:this.tooltipContent(),arrowContent:r.createElement("div",{className:"rc-tooltip-arrow-inner"}),destroyTooltipOnHide:!1,onPopupAlign:g.tb,disabled:this.props.disableTooltip},this.mainContent())}}])&&Mt(n.prototype,o),a&&Mt(n,a),t}();function Lt(e){return(Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vt(e,t){return!t||"object"!==Lt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ft(e){return(Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bt(e,t){return(Bt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(Nt,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{tooltipEnabled:!0,hideClinicalInfoTable:!1,disableTooltip:!1}});var Ut=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Vt(this,Ft(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bt(e,t)}(t,o.a.Component),n=t,(r=[{key:"render",value:function(){return o.a.createElement(Nt,{sample:this.props.sample,extraTooltipText:"This gene was not profiled for this sample (absent from gene panel). It is unknown whether it is mutated.",onSelectGenePanel:this.props.onSelectGenePanel,disableTooltip:this.props.disableTooltip},o.a.createElement("svg",{width:"12",height:"12","data-test":"not-profiled-icon"},o.a.createElement("g",{transform:"translate(0,5)"},o.a.createElement("rect",{width:"12",height:"2.5",rx:"1.25",ry:"1.25",fill:"#cccccc",fillOpacity:1}))))}}])&&Gt(n.prototype,r),a&&Gt(n,a),t}();function Ht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Wt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"renderFunction",value:function(t,n,o,a,l,u){if(!n)return r.createElement("span",null);var s=n.samples,c=i.a.map(s,function(e){return e.id}),p=t[0].entrezGeneId,f=e.getPresentSamples(t),d=e.getProfiledSamplesForGene(p,c,o,a),m="This gene was not profiled for this sample (absent from gene panel)",h=s.map(function(e){var t=e.id in f,o=e.id in d&&d[e.id],a="";return t?(f[e.id]||(a="Mutation has supporting reads, but wasn't called. "),o||(a="".concat(a).concat(m))):o||(a="".concat(m,". It is unknown whether it is mutated.")),r.createElement("li",{className:o&&!t?"invisible":""},o?n.getComponentForSample(e.id,f[e.id]?1:.1,a,null,l,u):r.createElement(Nt,{sample:e,extraTooltipText:a,onSelectGenePanel:l,disableTooltip:u},r.createElement(Ut,{sample:e,onSelectGenePanel:l,disableTooltip:u})))});return r.createElement("div",{style:{position:"relative"},"data-test":"samples-cell"},r.createElement("ul",{style:{marginBottom:0},className:"list-inline list-unstyled"},h))}},{key:"getSortValue",value:function(t,n){if(n){var r=e.getPresentSamples(t),o=[];o.push(Object.keys(r).filter(function(e){return r[e]}).length);var a=!0,i=!1,l=void 0;try{for(var u,s=n.getSampleIdsInOrder()[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var c=u.value;o.push(+!!r[c])}}catch(e){i=!0,l=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw l}}return o}return[]}},{key:"getPresentSamples",value:function(e){return e.reduce(function(e,t,n){return t.molecularProfileId&&Object(xt.w)(t.molecularProfileId)?t.tumorAltCount&&t.tumorAltCount>0&&(e[t.sampleId]=!1):e[t.sampleId]=!0,e},{})}},{key:"getProfiledSamplesForGene",value:function(e,t,n,r){return t.reduce(function(t,o,a){var i=n[o],l=Object(C.vb)(i),u=!l&&!!i&&i in r&&r[i].includes(e);return t[o]=l||u,t},{})}},{key:"getSample",value:function(e){var t=[];return e&&e.forEach(function(e){t.push(e.sampleId)}),1==t.length?t[0]:t}}],(n=null)&&Ht(t.prototype,n),o&&Ht(t,o),e}();function qt(e){if(e&&"serverConfig"in e){var t=e.serverConfig,n="skin_patientview_filter_genes_profiled_all_samples";if(t&&n in t&&t[n])return Ct.ALL_SAMPLES}return Ct.ANY_SAMPLE}function zt(e,t,n,r){return i.a.some(t,function(t){var o=Wt.getProfiledSamplesForGene(t,e,n,r);return i.a.values(o).includes(!1)})}var Kt=n(114),Yt=n(1269),Xt=n.n(Yt),Zt=n(215),Qt=n.n(Zt);function $t(e){return($t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function en(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tn(e,t,n){return t&&en(e.prototype,t),n&&en(e,n),e}function nn(e,t){return!t||"object"!==$t(t)&&"function"!=typeof t?on(e):t}function rn(e){return(rn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function on(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function an(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ln(e,t)}function ln(e,t){return(ln=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var un=function(e){function t(e){var n;return Jt(this,t),(n=nn(this,rn(t).call(this,e))).render=n.render.bind(on(n)),n}return an(t,r["Component"]),tn(t,[{key:"render",value:function(){var e=this.props,t=e.label,n=e.color,o=e.x,a=e.y;return r.createElement("g",null,r.createElement("circle",{cx:o,cy:a,fill:n,r:this.props.r}),r.createElement("text",{x:o,y:a+5,dy:this.props.textDy,fill:"white",fontSize:10,textAnchor:"middle"},t))}}]),t}();Object.defineProperty(un,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{r:10}});var sn=function(e){function t(e){var n;return Jt(this,t),(n=nn(this,rn(t).call(this,e))).render=n.render.bind(on(n)),n}return an(t,r["Component"]),tn(t,[{key:"render",value:function(){var e=this.props,t=e.label,n=e.color,o=e.fillOpacity;return r.createElement("svg",{width:"12",height:"12",className:"case-label-header","data-test":"sample-icon"},r.createElement("g",{transform:"translate(6,6)"},r.createElement("circle",{r:"6",fill:n,fillOpacity:o})),r.createElement("g",{transform:"translate(6,5.5)"},r.createElement("text",{y:"4",textAnchor:"middle",fontSize:"10",fill:"white",style:{cursor:"default"}},t)))}}]),t}();function cn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pn(e){return(pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var fn=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":pn(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};function dn(e,t){var n=new Map;return void 0===t?[]:(e.forEach(function(e,r){e.clinicalData.forEach(function(r,o){if(r.clinicalAttributeId===t){var a=n.get(r.value);void 0===a&&(a=[]),a.push(e.id),n.set(r.value,a)}})}),n)}var mn=function(){function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,"samples",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"sampleIdsInHeader",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"sampleIndex",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sampleLabels",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sampleOrder",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clinicalDataLegacyCleanAndDerived",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sampleColors",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"commonClinicalDataLegacyCleanAndDerived",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object(T.makeObservable)(this),this.sampleIndex={},this.sampleLabels={},this.clinicalDataLegacyCleanAndDerived={},this.sampleColors={},this.commonClinicalDataLegacyCleanAndDerived={},t.forEach(function(e,t){o.clinicalDataLegacyCleanAndDerived[e.id]=se(a.fromPairs(e.clinicalData.map(function(e){return[e.clinicalAttributeId,e.value]})));var n="black";"Primary"===o.clinicalDataLegacyCleanAndDerived[e.id].DERIVED_NORMALIZED_CASE_TYPE?n=Xt.a.sampleColorPrimary:"Recurrence"===o.clinicalDataLegacyCleanAndDerived[e.id].DERIVED_NORMALIZED_CASE_TYPE||"Progressed"===o.clinicalDataLegacyCleanAndDerived[e.id].DERIVED_NORMALIZED_CASE_TYPE?n=Xt.a.sampleColorRecurrence:"Metastasis"===o.clinicalDataLegacyCleanAndDerived[e.id].DERIVED_NORMALIZED_CASE_TYPE?n=Xt.a.sampleColorMetastasis:"cfDNA"===o.clinicalDataLegacyCleanAndDerived[e.id].DERIVED_NORMALIZED_CASE_TYPE?n=Xt.a.sampleColorCfdna:"Xenograft"===o.clinicalDataLegacyCleanAndDerived[e.id].DERIVED_NORMALIZED_CASE_TYPE&&(n=Xt.a.sampleColorXenograft),o.sampleColors[e.id]=n}),["CANCER_TYPE","CANCER_TYPE_DETAILED"].forEach(function(n){e.isSameClinicalAttributeInAllSamples(t,n)&&(o.commonClinicalDataLegacyCleanAndDerived[n]=o.clinicalDataLegacyCleanAndDerived[t[0].id][n],t.forEach(function(e){delete o.clinicalDataLegacyCleanAndDerived[e.id][n]}))}),this.samples=function(e,t,n){var r=[];r=r.concat(e.map(function(e){return e.id})).sort(Qt.a);var o={};n&&(o=n.filter(function(e){return"SPECIMEN"===e.eventType||"SAMPLE_ACQUISITION"}).reduce(function(e,t){var n=a.find(t.attributes,function(e){return("SAMPLE_ID"===e.key||"SpecimenReferenceNumber"===e.key||"SPECIMEN_REFERENCE_NUMBER"===e.key)&&-1!==r.indexOf(e.value)});return n&&(e[n.value]=t.startNumberOfDaysSinceDiagnosis),e},{}));for(var i=["primary","metastasis","cfdna"],l=[],u=0;u<e.length;u++){var s=e[u].id,c=o[s],p=t[s].DERIVED_NORMALIZED_CASE_TYPE,f=p?i.indexOf(p.toLowerCase()):-1;-1===f&&(f=i.length);var d=r.indexOf(s);l=l.concat({id:s,sampleTypeIndex:f,naturalSortIndex:d,eventOrdering:c})}l=a.orderBy(l,["eventOrdering","sampleTypeIndex","naturalSortIndex"],["asc","asc","asc"]);var m=a.fromPairs(l.map(function(e,t){return[e.id,t]}));return a.sortBy(e,function(e){return m[e.id]})}(t,this.clinicalDataLegacyCleanAndDerived,n),this.samples.forEach(function(e,t){o.sampleIndex[e.id]=t,o.sampleLabels[e.id]=String(t+1)}),this.sampleOrder=a.sortBy(Object.keys(this.sampleIndex),function(e){return o.sampleIndex[e]})}var t,n,o;return t=e,o=[{key:"isSameClinicalAttributeInAllSamples",value:function(e,t){var n=a.uniq(e.map(function(e){var n=e.clinicalData.find(function(e){return e.clinicalAttributeId===t});return n?n.value:n}));return 1===n.length&&n[0]}},{key:"getClinicalAttributeInSample",value:function(e,t){return a.find(e.clinicalData,function(e){return e.clinicalAttributeId===t})}}],(n=[{key:"isSampleVisibleInHeader",value:function(e){return!this.sampleIdsInHeader||this.sampleIdsInHeader.includes(e)}},{key:"getComponentForSample",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4?arguments[4]:void 0,l=arguments.length>5?arguments[5]:void 0,u=a.find(this.samples,function(t){return t.id===e});return u&&r.createElement(Nt,{sample:u,extraTooltipText:n,additionalContent:o,onSelectGenePanel:i,disableTooltip:l},r.createElement(sn,{label:(this.sampleIndex[u.id]+1).toString(),fillOpacity:t,color:this.sampleColors[u.id]}))}},{key:"getColorForSample",value:function(e){return this.sampleColors[e]}},{key:"getSampleIdsInOrder",value:function(){return this.samples.map(function(e){return e.id})}},{key:"getComponentsForSamples",value:function(){var e=this;this.samples.map(function(t){return e.getComponentForSample(t.id)})}},{key:"getSampleLabel",value:function(e){return e in this.sampleLabels?this.sampleLabels[e]:""}},{key:"sampleIdToIndexMap",get:function(){var e={};return this.samples.forEach(function(t,n){e[t.id]=n}),e}}])&&cn(t.prototype,n),o&&cn(t,o),e}();fn([T.computed],mn.prototype,"sampleIdToIndexMap",null);var hn,yn,bn=mn,gn=n(31),vn=n(58),wn=n(10),Sn=n(64),On=n(83),En=n(46),Pn=n(8);!function(e){e.V2="v2",e.V3="v3"}(hn||(hn={})),function(e){e.MutationalSignatureContributionKeyWord="contribution",e.MutationalSignatureConfidenceKeyWord="pvalue"}(yn||(yn={}));var Tn=.05,Cn={smoking:"#b221e8",hrd:"#f06b49",tmz:"#076b82",uv:"#ffec00",apobec:"#8ed14b",age:"#3b99d4",aging:"#3b99d4",pole:"#19413e",sequencing:"#651067",ber:"#5574a6",platinum:"#3b3eac",ros:"#b77322",haloalkane:"#b91383",aid:"#f4359e",aza:"#9c5935","aid/apobec":"#aaaa11","pol-eta":"#16d620",mmr:"#d92b45","mmr/msi":"#d92b45","defective mmr/msi":"#d92b45","defective dna mismatch repair":"#d92b45",tabacco:"#50136d","tobacco chewing":"#50136d",unknown:"#e8e8e8",aflatoxin:"#e8e8e8",ighv:"#e8e8e8","aristolochic acid":"#e8e8e8"};function In(e){return Cn[e.toLowerCase()]}function _n(e){return{label:"".concat(Object(Pn.n)(En.b.MUTATIONAL_SIGNATURE)," ").concat(e.toUpperCase()),value:e}}var kn=function(e){var t=e.contribution,n=e.color,o=Math.round(100*parseFloat(t)),a={backgroundColor:n};return r.createElement("div",{className:"progress",style:{position:"relative",width:100,marginBottom:0}},r.createElement("div",{"data-test":"progress-bar",className:"progress-bar ".concat("progress-bar-info"),role:"progressbar","aria-valuenow":o,"aria-valuemin":0,"aria-valuemax":100,style:Object.assign(a,{width:"".concat(o,"%")})}),r.createElement("div",{style:{position:"absolute",textShadow:"-1px 0 white, 0 1px white, 1px 0 white, 0 -1px white",width:100,marginTop:2,textAlign:"center"}},o,"%"))};function xn(e){var t=new RegExp("(".concat(yn.MutationalSignatureContributionKeyWord,"|").concat(yn.MutationalSignatureConfidenceKeyWord,")")),n={};return i.a.reduce(e,function(e,r){var o=r.molecularProfileId;if(t.test(o)&&!(o in e)){e[o]=o;var a=i.a.last(o.split("_"));a in n?n[a].push(o):n[a]=[o]}return e},{}),i.a.every(n,function(e){return 2===e.length})}function jn(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Mn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function An(e){return(An="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Dn=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":An(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},Rn=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function l(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,l)}u((r=r.apply(e,t||[])).next())})};function Nn(e){return Rn(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!1!==/TCGA/.test(e)){t.next=4;break}return t.abrupt("return",!1);case 4:return t.next=6,Re.a.get(Object(Le.k)(e));case 6:return n=t.sent,t.abrupt("return",n.body&&n.body.total_count&&n.body.total_count>0);case 8:case"end":return t.stop()}},t)}))}function Ln(e,t,n,r){return a.filter(e,function(e){var o=e[0].gene.entrezGeneId,i=Wt.getProfiledSamplesForGene(o,t,n,r);return a(i).values().filter(function(e){return e}).value().length===t.length})}function Gn(e,t,n,r,o){return{patient:{id:e,clinicalData:r},samples:Object(C.lb)(n,o)}}var Vn=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,"appStore",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"internalClient",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"activeTabId",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"_patientId",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"urlValidationError",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"ajaxErrors",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"studyId",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"_sampleId",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"openResourceTabMap",{enumerable:!0,configurable:!0,writable:!0,value:T.observable.map()}),Object.defineProperty(this,"mutationTableGeneFilterOption",{enumerable:!0,configurable:!0,writable:!0,value:qt(Object(g.eb)().frontendConfig)}),Object.defineProperty(this,"copyNumberTableGeneFilterOption",{enumerable:!0,configurable:!0,writable:!0,value:qt(Object(g.eb)().frontendConfig)}),Object.defineProperty(this,"structuralVariantTableGeneFilterOption",{enumerable:!0,configurable:!0,writable:!0,value:qt(Object(g.eb)().frontendConfig)}),Object.defineProperty(this,"mutationMolecularProfile",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.molecularProfilesInStudy]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(C.Q)(this.molecularProfilesInStudy,this.studyId));case 1:case"end":return e.stop()}},e,this)}))}})}),Object.defineProperty(this,"discreteMolecularProfile",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.molecularProfilesInStudy]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(C.N)(this.molecularProfilesInStudy));case 1:case"end":return e.stop()}},e,this)}))}})}),Object.defineProperty(this,"mutationMolecularProfileId",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.mutationMolecularProfile]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.mutationMolecularProfile.result){e.next=4;break}return e.abrupt("return",this.mutationMolecularProfile.result.molecularProfileId);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}},e,this)}))}})}),Object.defineProperty(this,"structuralVariantProfile",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.studyIdToMolecularProfiles]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=Object(gn.V)(this.studyIdToMolecularProfiles.result,wn.a.STRUCTURAL_VARIANT,[wn.b.FUSION,wn.b.SV])).length>0)){e.next=3;break}return e.abrupt("return",t[0]);case 3:return e.abrupt("return",void 0);case 4:case"end":return e.stop()}},e,this)}))}})}),Object.defineProperty(this,"uncalledMutationMolecularProfileId",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.molecularProfilesInStudy]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(C.S)(this.molecularProfilesInStudy,this.studyId));case 1:case"end":return e.stop()}},e,this)}))}})}),Object.defineProperty(this,"_patientIdsInCohort",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"myCancerGenomeData",{enumerable:!0,configurable:!0,writable:!0,value:Object(lt.U)()}),Object.defineProperty(this,"mutationalSignatureMolecularProfiles",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.molecularProfilesInStudy]},invoke:function(){return Promise.resolve(n.molecularProfilesInStudy.result.filter(function(e){return!!e.genericAssayType&&e.genericAssayType===En.b.MUTATIONAL_SIGNATURE}))}},[])}),Object.defineProperty(this,"fetchAllMutationalSignatureData",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.samples,n.mutationalSignatureMolecularProfiles]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=this.mutationalSignatureMolecularProfiles.result.map(function(e){return e.molecularProfileId})).length>0)){e.next=8;break}return n=a.flatMap(t,function(e){return a.map(o.samples.result,function(t){return{molecularProfileId:e,sampleId:t.sampleId}})}),e.next=5,be.a.fetchGenericAssayDataInMultipleMolecularProfilesUsingPOST({genericAssayDataMultipleStudyFilter:{sampleMolecularIdentifiers:n}});case 5:if(!xn(r=e.sent)){e.next=8;break}return e.abrupt("return",Promise.resolve(r));case 8:return e.abrupt("return",Promise.resolve([]));case 9:case"end":return e.stop()}},e,this)}))}},[])}),Object.defineProperty(this,"mutationalSignatureDataGroupByVersion",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.fetchAllMutationalSignatureData,n.mutationData,n.mutationalSignatureMetaGroupByStableId]},invoke:function(){var e=n.fetchAllMutationalSignatureData.result.filter(function(e){return e.molecularProfileId.includes(yn.MutationalSignatureContributionKeyWord)}),t=n.fetchAllMutationalSignatureData.result.filter(function(e){return e.molecularProfileId.includes(yn.MutationalSignatureConfidenceKeyWord)}),r=a.keyBy(t,function(e){return e.uniqueSampleKey+a.last(e.genericAssayStableId.split("_"))}),o=n.mutationData.result.length,i=[];if(e&&e.length>0){var l=!0,u=!1,s=void 0;try{for(var c,p=e[Symbol.iterator]();!(l=(c=p.next()).done);l=!0){var f=c.value,d={};d.mutationalSignatureId=f.genericAssayStableId,d.patientId=f.patientId,d.sampleId=f.sampleId,d.studyId=f.studyId,d.uniquePatientKey=f.uniquePatientKey,d.uniqueSampleKey=f.uniqueSampleKey,d.value=parseFloat(f.value),d.confidence=parseFloat(r[f.uniqueSampleKey+a.last(f.genericAssayStableId.split("_"))].value),d.numberOfMutationsForSample=o,d.version=a.last(f.molecularProfileId.split("_")),d.meta=n.mutationalSignatureMetaGroupByStableId.result[f.genericAssayStableId],i.push(d)}}catch(e){u=!0,s=e}finally{try{l||null==p.return||p.return()}finally{if(u)throw s}}}return Promise.resolve(a.groupBy(i,function(e){return e.version}))}},{})}),Object.defineProperty(this,"fetchAllMutationalSignatureContributionMetaData",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.fetchAllMutationalSignatureData]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.chain(this.fetchAllMutationalSignatureData.result).map(function(e){return e.stableId}).uniq().filter(function(e){return e.includes(yn.MutationalSignatureContributionKeyWord)}).value(),e.abrupt("return",be.a.fetchGenericAssayMetaDataUsingPOST({genericAssayMetaFilter:{genericAssayStableIds:t||[]}}));case 2:case"end":return e.stop()}},e,this)}))}})}),Object.defineProperty(this,"mutationalSignatureMeta",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.fetchAllMutationalSignatureContributionMetaData]},invoke:function(){return Promise.resolve(n.fetchAllMutationalSignatureContributionMetaData.result.map(function(e){var t={},n="NAME"in e.genericEntityMetaProperties?e.genericEntityMetaProperties.NAME:"",r="DESCRIPTION"in e.genericEntityMetaProperties?e.genericEntityMetaProperties.DESCRIPTION:"No description",o="URL"in e.genericEntityMetaProperties?e.genericEntityMetaProperties.URL:"No url",a=n?n.substring(n.lastIndexOf("(")+1,n.lastIndexOf(")")):"No category",i="DESCRIPTION"in e.genericEntityMetaProperties?e.genericEntityMetaProperties.DESCRIPTION:"No confidence statement";return t.mutationalSignatureId=e.stableId,t.name=n,t.description=r,t.url=o,t.category=a,t.confidenceStatement=i,t}))}},[])}),Object.defineProperty(this,"mutationalSignatureMetaGroupByStableId",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.mutationalSignatureMeta]},invoke:function(){return Promise.resolve(a.keyBy(n.mutationalSignatureMeta.result,function(e){return e.mutationalSignatureId}))}})}),Object.defineProperty(this,"hasMutationalSignatureData",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.fetchAllMutationalSignatureData]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve(this.fetchAllMutationalSignatureData.result&&this.fetchAllMutationalSignatureData.result.length>0));case 1:case"end":return e.stop()}},e,this)}))}})}),Object.defineProperty(this,"_selectedMutationalSignatureVersion",{enumerable:!0,configurable:!0,writable:!0,value:hn.V2}),Object.defineProperty(this,"derivedPatientId",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.samples]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,o,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,n=!1,r=void 0,e.prev=3,o=this.samples.result[Symbol.iterator]();case 5:if(t=(a=o.next()).done){e.next=11;break}return i=a.value,e.abrupt("return",i.patientId);case 8:t=!0,e.next=5;break;case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),n=!0,r=e.t0;case 17:e.prev=17,e.prev=18,t||null==o.return||o.return();case 20:if(e.prev=20,!n){e.next=23;break}throw r;case 23:return e.finish(20);case 24:return e.finish(17);case 25:return e.abrupt("return","");case 26:case"end":return e.stop()}},e,this,[[3,13,17,25],[18,,20,24]])}))},default:""})}),Object.defineProperty(this,"clinicalDataPatient",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return"patient"===n.pageMode?[]:[n.derivedPatientId]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(C.m)(this.studyId,this.patientId));case 1:case"end":return e.stop()}},e,this)}))},default:[]})}),Object.defineProperty(this,"samples",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({invoke:function(){return Object(C.F)(n.studyId,n._patientId,n.sampleId)},onError:function(e){n.appStore.siteErrors.push({errorObj:e,dismissed:!1,title:"Samples / Patients not valid"})}},[])}),Object.defineProperty(this,"allSamplesForPatient",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.derivedPatientId]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be.a.getAllSamplesOfPatientInStudyUsingGET({studyId:this.studyId,patientId:this.derivedPatientId.result,projection:"DETAILED"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}))},default:[]})}),Object.defineProperty(this,"samplesWithUniqueKeys",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.samples,n.allSamplesForPatient]},invoke:function(){return Promise.resolve(n.samples.result.map(function(e){return n.allSamplesForPatient.result.find(function(t){return t.sampleId===e.sampleId})||e}))}},[])}),Object.defineProperty(this,"samplesWithoutCancerTypeClinicalData",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.samples,n.clinicalDataForSamples]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(C.R)(this.samples,this.clinicalDataForSamples));case 1:case"end":return e.stop()}},e,this)}))}},[])}),Object.defineProperty(this,"studiesForSamplesWithoutCancerTypeClinicalData",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.samplesWithoutCancerTypeClinicalData]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(C.H)(this.samplesWithoutCancerTypeClinicalData));case 1:case"end":return e.stop()}},e,this)}))}},[])}),Object.defineProperty(this,"studies",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be.a.getStudyUsingGET({studyId:this.studyId});case 2:return e.t0=e.sent,e.abrupt("return",[e.t0]);case 4:case"end":return e.stop()}},e,this)}))}},[])}),Object.defineProperty(this,"studyIdToStudy",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.studies]},invoke:function(){return Promise.resolve(a.keyBy(n.studies.result,function(e){return e.studyId}))}},{})}),Object.defineProperty(this,"cnaSegments",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.samples]},invoke:function(){return Object(C.q)(n.studyId,n.sampleIds)}},[])}),Object.defineProperty(this,"resourceDefinitions",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({invoke:function(){return ge.a.getAllResourceDefinitionsInStudyUsingGET({studyId:n.studyId})},onResult:function(e){if(e){var t=!0,r=!1,o=void 0;try{for(var a,i=e[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var l=a.value;l.openByDefault&&n.setResourceTabOpen(l.resourceId,!0)}}catch(e){r=!0,o=e}finally{try{t||null==i.return||i.return()}finally{if(r)throw o}}}}})}),Object.defineProperty(this,"studyResourceData",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.resourceDefinitions]},invoke:function(){var e=[],t=n.resourceDefinitions.result.filter(function(e){return"STUDY"===e.resourceType}),r=[],o=!0,a=!1,i=void 0;try{for(var l,u=t[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var s=l.value;r.push(ge.a.getAllStudyResourceDataInStudyUsingGET({studyId:n.studyId,resourceId:s.resourceId,projection:"DETAILED"}).then(function(t){return e.push.apply(e,jn(t))}))}}catch(e){a=!0,i=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw i}}return Promise.all(r).then(function(){return e})}})}),Object.defineProperty(this,"sampleResourceData",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.resourceDefinitions,n.samples]},invoke:function(){var e=n.resourceDefinitions.result.filter(function(e){return"SAMPLE"===e.resourceType});if(!e.length)return Promise.resolve({});var t=n.samples.result,r={},o=[],a=!0,i=!1,l=void 0;try{for(var u,s=function(){var t=u.value,a=!0,i=!1,l=void 0;try{for(var s,c=e[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var p=s.value;o.push(ge.a.getAllResourceDataOfSampleInStudyUsingGET({sampleId:t.sampleId,studyId:n.studyId,resourceId:p.resourceId,projection:"DETAILED"}).then(function(e){var n;r[t.sampleId]=r[t.sampleId]||[],(n=r[t.sampleId]).push.apply(n,jn(e))}))}}catch(e){i=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(i)throw l}}},c=t[Symbol.iterator]();!(a=(u=c.next()).done);a=!0)s()}catch(e){i=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(i)throw l}}return Promise.all(o).then(function(){return r})}})}),Object.defineProperty(this,"patientResourceData",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.resourceDefinitions]},invoke:function(){var e=[],t=n.resourceDefinitions.result.filter(function(e){return"PATIENT"===e.resourceType}),r=[],o=!0,a=!1,i=void 0;try{for(var l,u=t[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var s=l.value;r.push(ge.a.getAllResourceDataOfPatientInStudyUsingGET({studyId:n.studyId,patientId:n.patientId,resourceId:s.resourceId,projection:"DETAILED"}).then(function(t){return e.push.apply(e,jn(t))}))}}catch(e){a=!0,i=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw i}}return Promise.all(r).then(function(){return e})}})}),Object.defineProperty(this,"resourceIdToResourceData",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.sampleResourceData,n.patientResourceData,n.studyResourceData]},invoke:function(){var e=a.flatMap(n.sampleResourceData.result,function(e){return e}).concat(n.patientResourceData.result).concat(n.studyResourceData.result);return Promise.resolve(a.groupBy(e,function(e){return e.resourceId}))}})}),Object.defineProperty(this,"pathologyReport",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.derivedPatientId]},invoke:function(){if(n.studyId.toLowerCase().indexOf("tcga")>-1){var e="https://raw.githubusercontent.com/inodb/datahub/a0d36d77b242e32cda3175127de73805b028f595/tcga/pathology_reports/symlink_by_patient",t="https://github.com/inodb/datahub/raw/a0d36d77b242e32cda3175127de73805b028f595/tcga/pathology_reports",r=[];return function n(o,a){return Re.a.get("".concat(e,"/").concat(o,".").concat(a)).then(function(e){var i=e.text.split("/")[1];return r.push({name:"".concat(i),url:"".concat(t,"/").concat(i)}),n(o,a+1)},function(){return r})}(n.patientId,0)}return Promise.resolve([])},onError:function(e){}},[])}),Object.defineProperty(this,"cosmicData",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.mutationData,n.uncalledMutationData]},invoke:function(){return Object(C.s)(n.mutationData,n.uncalledMutationData)}})}),Object.defineProperty(this,"mutSigData",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(C.x)(this.studyId));case 1:case"end":return e.stop()}},e,this)}))}})}),Object.defineProperty(this,"indexedVariantAnnotations",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.mutationData,n.uncalledMutationData]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.K)(Object(C.g)(this.mutationData,this.uncalledMutationData),["annotation_summary","hotspots","clinvar",at.b.serverConfig.show_signal?"signal":""].filter(function(e){return e}),at.b.serverConfig.isoformOverrideSource,this.genomeNexusClient);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}))},onError:function(e){}},void 0)}),Object.defineProperty(this,"indexedMyVariantInfoAnnotations",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.mutationData,n.uncalledMutationData]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.K)(Object(C.g)(this.mutationData,this.uncalledMutationData),["my_variant_info"],at.b.serverConfig.isoformOverrideSource,this.genomeNexusClient);case 2:return t=e.sent,e.abrupt("return",Object(lt.X)(t));case 4:case"end":return e.stop()}},e,this)}))},onError:function(){}})}),Object.defineProperty(this,"hotspotData",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.mutationData,n.uncalledMutationData]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(ft.a)(this.mutationData,this.uncalledMutationData,this.genomeNexusInternalClient));case 1:case"end":return e.stop()}},e,this)}))},onError:function(){}})}),Object.defineProperty(this,"clinicalDataForAllSamplesForPatient",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.allSamplesForPatient]},invoke:function(){var e={identifiers:n.allSamplesForPatient.result.map(function(e){return{entityId:e.sampleId,studyId:n.studyId}})};return Object(C.l)(e)}})}),Object.defineProperty(this,"clinicalDataForSamples",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.samples]},invoke:function(){var e={identifiers:n.sampleIds.map(function(e){return{entityId:e,studyId:n.studyId}})};return Object(C.l)(e)}},[])}),Object.defineProperty(this,"clinicalDataGroupedBySample",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.clinicalDataForSamples]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(C.lb)(this.sampleIds,this.clinicalDataForSamples.result));case 1:case"end":return e.stop()}},e,this)}))}},[])}),Object.defineProperty(this,"clinicalDataGroupedBySampleMap",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.clinicalDataGroupedBySample]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(C.rb)(this.clinicalDataGroupedBySample.result));case 1:case"end":return e.stop()}},e,this)}))}},{})}),Object.defineProperty(this,"getWholeSlideViewerIds",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.clinicalDataGroupedBySample]},invoke:function(){var e=n.clinicalDataGroupedBySample.result;if(e){var t=a.chain(e).map(function(e){return e.clinicalData}).flatten().filter(function(e){return"MSK_SLIDE_ID"===e.clinicalAttributeId}).map(function(e){return e.value}).value();return Promise.resolve(t)}return Promise.resolve([])}})}),Object.defineProperty(this,"studyMetaData",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",be.a.getStudyUsingGET({studyId:this.studyId}));case 1:case"end":return e.stop()}},e,this)}))}})}),Object.defineProperty(this,"sampleManager",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.patientViewDataForAllSamplesForPatient,n.studyMetaData,n.clinicalEvents]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.patientViewDataForAllSamplesForPatient.result,!(this.clinicalEvents.result.length>0)){e.next=5;break}return e.abrupt("return",new bn(t.samples,this.clinicalEvents.result,this.sampleIds));case 5:return e.abrupt("return",new bn(t.samples,void 0,this.sampleIds));case 6:case"end":return e.stop()}},e,this)}))}})}),Object.defineProperty(this,"patientViewData",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.clinicalDataPatient,n.clinicalDataForSamples]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gn(this.patientId,this.studyId,this.sampleIds,this.clinicalDataPatient.result,this.clinicalDataForSamples.result));case 1:case"end":return e.stop()}},e,this)}))}},{})}),Object.defineProperty(this,"patientViewDataForAllSamplesForPatient",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.clinicalDataPatient,n.allSamplesForPatient,n.clinicalDataForAllSamplesForPatient]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gn(this.patientId,this.studyId,this.allSamplesForPatient.result.map(function(e){return e.sampleId}),this.clinicalDataPatient.result,this.clinicalDataForAllSamplesForPatient.result));case 1:case"end":return e.stop()}},e,this)}))}})}),Object.defineProperty(this,"sequencedSampleIdsInStudy",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=g.Bb,e.next=3,be.a.getAllSampleIdsInSampleListUsingGET({sampleListId:"".concat(this.studyId,"_sequenced")});case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}},e,this)}))},onError:function(e){}},{})}),Object.defineProperty(this,"molecularProfilesInStudy",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)(function(){return be.a.getAllMolecularProfilesInStudyUsingGET({studyId:n.studyId})},[])}),Object.defineProperty(this,"studyIdToMolecularProfiles",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.molecularProfilesInStudy]},invoke:function(){return Promise.resolve(a.groupBy(n.molecularProfilesInStudy.result,function(e){return e.studyId}))},onError:function(e){},default:{}})}),Object.defineProperty(this,"molecularProfileIdToMolecularProfile",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.molecularProfilesInStudy]},invoke:function(){return Promise.resolve(n.molecularProfilesInStudy.result.reduce(function(e,t){return e[t.molecularProfileId]=t,e},{}))}},{})}),Object.defineProperty(this,"referenceGenes",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.studies,n.discreteCNAData]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(C.E)(this.studies.result[0].referenceGenome,this.discreteCNAData.result.map(function(e){return e.gene.hugoGeneSymbol.toUpperCase()})));case 1:case"end":return e.stop()}},e,this)}))},onError:function(e){throw e}})}),Object.defineProperty(this,"mrnaRankMolecularProfileId",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.molecularProfilesInStudy]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(C.P)(this.molecularProfilesInStudy));case 1:case"end":return e.stop()}},e,this)}))}},null)}),Object.defineProperty(this,"discreteCNAData",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.molecularProfileIdDiscrete,n.samples]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={sampleIds:this.sampleIds},e.abrupt("return",Object(C.t)(t,this.molecularProfileIdDiscrete));case 2:case"end":return e.stop()}},e,this)}))},onResult:function(e){n.discreteCNACache.addData(e)}},[])}),Object.defineProperty(this,"molecularData",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.discreteCNAData]},invoke:function(){return Promise.resolve(n.discreteCNAData.result.map(function(e){return Object.assign(Object.assign({},e),{value:e.alteration})}))}},[])}),Object.defineProperty(this,"gisticData",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(C.w)(this.studyId));case 1:case"end":return e.stop()}},e,this)}))}},{})}),Object.defineProperty(this,"clinicalEvents",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.patientViewData]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge.a.getAllClinicalEventsOfPatientInStudyUsingGET({studyId:this.studyId,patientId:this.patientId,projection:"DETAILED"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}))}},[])}),Object.defineProperty(this,"molecularProfileIdDiscrete",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.molecularProfilesInStudy]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(C.O)(this.molecularProfilesInStudy));case 1:case"end":return e.stop()}},e,this)}))}})}),Object.defineProperty(this,"studyToMolecularProfileDiscrete",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.molecularProfileIdDiscrete]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={},!this.molecularProfileIdDiscrete.result){e.next=5;break}return e.next=4,be.a.getMolecularProfileUsingGET({molecularProfileId:this.molecularProfileIdDiscrete.result});case 4:t[this.studyId]=e.sent;case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}},e,this)}))}},{})}),Object.defineProperty(this,"darwinUrl",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.derivedPatientId]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==at.b.serverConfig.enable_darwin){e.next=7;break}return e.next=3,Re.a.get(Object(Le.i)(this.sampleIds,this.patientId));case 3:return t=e.sent,e.abrupt("return",t.text);case 7:return e.abrupt("return","");case 8:case"end":return e.stop()}},e,this)}))},onError:function(){}})}),Object.defineProperty(this,"hasTissueImageIFrameUrl",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.derivedPatientId]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nn(this.patientId));case 1:case"end":return e.stop()}},e,this)}))},onError:function(){}},!1)}),Object.defineProperty(this,"uncalledMutationData",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.samples,n.uncalledMutationMolecularProfileId]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={sampleIds:this.samples.result.map(function(e){return e.sampleId})},e.abrupt("return",Object(C.y)(t,this.uncalledMutationMolecularProfileId.result));case 2:case"end":return e.stop()}},e,this)}))}},[])}),Object.defineProperty(this,"genePanelData",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.samples,n.molecularProfilesInStudy]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],this.samples.result.forEach(function(e){var n=r.molecularProfilesInStudy.result;if(n){var o=e.sampleId,a=!0,i=!1,l=void 0;try{for(var u,s=n[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var c=u.value;t.push({molecularProfileId:c.molecularProfileId,sampleId:o})}}catch(e){i=!0,l=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw l}}}}),n=[],!t.length){e.next=7;break}return e.next=6,be.a.fetchGenePanelDataInMultipleMolecularProfilesUsingPOST({genePanelDataMultipleStudyFilter:{sampleMolecularIdentifiers:t}});case 6:n=e.sent;case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}},e,this)}))}},[])}),Object.defineProperty(this,"genePanels",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.genePanelData]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.genePanelData.result,!(n=a.uniq(t.map(function(e){return e.genePanelId}).filter(function(e){return!!e}))).length){e.next=4;break}return e.abrupt("return",be.a.fetchGenePanelsUsingPOST({genePanelIds:n,projection:"DETAILED"}));case 4:return e.abrupt("return",[]);case 5:case"end":return e.stop()}},e,this)}))}},[])}),Object.defineProperty(this,"genePanelIdToPanel",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.genePanels]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.keyBy(this.genePanels.result,function(e){return e.genePanelId}));case 1:case"end":return e.stop()}},e,this)}))}},{})}),Object.defineProperty(this,"coverageInformation",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.mutatedGenes,n.samplesWithUniqueKeys,n.genePanelData,n.genePanels]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(it.a)(this.genePanelData.result,this.genePanels.result,this.samplesWithUniqueKeys.result,[{uniquePatientKey:this.samplesWithUniqueKeys.result[0].uniquePatientKey}],this.mutatedGenes.result));case 1:case"end":return e.stop()}},e,this)}))}},{samples:{},patients:{}})}),Object.defineProperty(this,"genePanelDataByMolecularProfileIdAndSampleId",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.genePanelData]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.chain(this.genePanelData.result).groupBy(function(e){return e.molecularProfileId}).mapValues(function(e){return a.keyBy(e,function(e){return e.sampleId})}).value());case 1:case"end":return e.stop()}},e,this)}))}},{})}),Object.defineProperty(this,"mutationData",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.samples,n.mutationMolecularProfileId]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={sampleIds:this.sampleIds},e.abrupt("return",Object(C.y)(t,this.mutationMolecularProfileId.result));case 2:case"end":return e.stop()}},e,this)}))}},[])}),Object.defineProperty(this,"structuralVariantData",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.samples,n.structuralVariantProfile]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.structuralVariantProfile.result){e.next=3;break}return t={sampleMolecularIdentifiers:this.sampleIds.map(function(e){return{molecularProfileId:n.structuralVariantProfile.result.molecularProfileId,sampleId:e}})},e.abrupt("return",be.a.fetchStructuralVariantsUsingPOST({structuralVariantFilter:t}));case 3:return e.abrupt("return",[]);case 4:case"end":return e.stop()}},e,this)}))},default:[]})}),Object.defineProperty(this,"groupedStructuralVariantData",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.structuralVariantData]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a(this.structuralVariantData.result).groupBy(C.V).values().value());case 1:case"end":return e.stop()}},e,this)}))},default:[]})}),Object.defineProperty(this,"mutatedGenes",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.mutationData]},invoke:function(){return Promise.resolve(a.uniqBy(n.mutationData.result,function(e){return e.entrezGeneId}).map(function(e){return{hugoGeneSymbol:e.gene.hugoGeneSymbol,entrezGeneId:e.entrezGeneId}}))}})}),Object.defineProperty(this,"oncoKbCancerGenes",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({invoke:function(){return at.b.serverConfig.show_oncokb?Object(C.z)():Promise.resolve([])}},[])}),Object.defineProperty(this,"oncoKbInfo",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({invoke:function(){return at.b.serverConfig.show_oncokb?Object(C.C)():Promise.resolve(Ue.u)}},Ue.u)}),Object.defineProperty(this,"oncoKbAnnotatedGenes",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.oncoKbCancerGenes]},invoke:function(){return at.b.serverConfig.show_oncokb?Promise.resolve(a.reduce(n.oncoKbCancerGenes.result,function(e,t){return t.oncokbAnnotated&&(e[t.entrezGeneId]=!0),e},{})):Promise.resolve({})}},{})}),Object.defineProperty(this,"oncoKbData",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.oncoKbAnnotatedGenes,n.mutationData,n.uncalledMutationData,n.clinicalDataForSamples,n.studiesForSamplesWithoutCancerTypeClinicalData,n.studies]},invoke:function(){return at.b.serverConfig.show_oncokb?Object(C.A)(n.uniqueSampleKeyToTumorType,n.oncoKbAnnotatedGenes.result||{},n.mutationData,void 0,n.uncalledMutationData):Promise.resolve({indicatorMap:null,uniqueSampleKeyToTumorType:null})},onError:function(e){}},C.c)}),Object.defineProperty(this,"civicGenes",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.mutationData,n.uncalledMutationData,n.clinicalDataForSamples]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",at.b.serverConfig.show_civic?(t=this.mutationData,n=this.uncalledMutationData,r=void 0,r=Object(C.g)(t,n),Object(lt.z)(r,function(e){return e.gene.entrezGeneId})):{});case 1:case"end":return e.stop()}var t,n,r},e,this)}))},onError:function(e){}},void 0)}),Object.defineProperty(this,"civicVariants",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.civicGenes,n.mutationData,n.uncalledMutationData]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!at.b.serverConfig.show_civic||!this.civicGenes.result){e.next=4;break}return e.abrupt("return",ct(this.civicGenes.result,this.mutationData,this.uncalledMutationData));case 4:return e.abrupt("return",{});case 5:case"end":return e.stop()}},e,this)}))},onError:function(e){}},void 0)}),Object.defineProperty(this,"cnaOncoKbData",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.oncoKbAnnotatedGenes,n.discreteCNAData,n.clinicalDataForSamples,n.studies]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!at.b.serverConfig.show_oncokb){e.next=4;break}return e.abrupt("return",Object(C.n)(this.uniqueSampleKeyToTumorType,this.oncoKbAnnotatedGenes.result||{},this.discreteCNAData));case 4:return e.abrupt("return",C.c);case 5:case"end":return e.stop()}},e,this)}))},onError:function(e){}},C.c)}),Object.defineProperty(this,"structuralVariantOncoKbData",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.oncoKbAnnotatedGenes,n.structuralVariantData,n.clinicalDataForSamples,n.studies]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!at.b.serverConfig.show_oncokb){e.next=4;break}return e.abrupt("return",Object(C.G)(this.uniqueSampleKeyToTumorType,this.oncoKbAnnotatedGenes.result||{},this.structuralVariantData));case 4:return e.abrupt("return",C.c);case 5:case"end":return e.stop()}},e,this)}))},onError:function(e){}},C.c)}),Object.defineProperty(this,"cnaCivicGenes",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.discreteCNAData,n.clinicalDataForSamples]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",at.b.serverConfig.show_civic?pt(this.discreteCNAData):{});case 1:case"end":return e.stop()}},e,this)}))},onError:function(e){}},void 0)}),Object.defineProperty(this,"cnaCivicVariants",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.civicGenes,n.mutationData]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("complete"!=this.cnaCivicGenes.status){e.next=2;break}return e.abrupt("return",ct(this.cnaCivicGenes.result));case 2:case"end":return e.stop()}},e,this)}))},onError:function(e){}},void 0)}),Object.defineProperty(this,"copyNumberCountData",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.discreteCNAData]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(C.p)(this.discreteCNAData,this.molecularProfileIdDiscrete));case 1:case"end":return e.stop()}},e,this)}))}},[])}),Object.defineProperty(this,"indexedHotspotData",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.hotspotData]},invoke:function(){return Promise.resolve(Object(lt.hb)(n.hotspotData))}})}),Object.defineProperty(this,"sampleToMutationGenePanelId",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.mutationMolecularProfileId,n.genePanelDataByMolecularProfileIdAndSampleId]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.mutationMolecularProfileId.result){e.next=2;break}return e.abrupt("return",a.mapValues(this.genePanelDataByMolecularProfileIdAndSampleId.result[this.mutationMolecularProfileId.result]||{},function(e){return e.genePanelId}));case 2:return e.abrupt("return",{});case 3:case"end":return e.stop()}},e,this)}))}},{})}),Object.defineProperty(this,"sampleToStructuralVariantGenePanelId",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.structuralVariantProfile,n.genePanelDataByMolecularProfileIdAndSampleId]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.structuralVariantProfile.result){e.next=2;break}return e.abrupt("return",a.mapValues(this.genePanelDataByMolecularProfileIdAndSampleId.result[this.structuralVariantProfile.result.molecularProfileId]||{},function(e){return e.genePanelId}));case 2:return e.abrupt("return",{});case 3:case"end":return e.stop()}},e,this)}))}},{})}),Object.defineProperty(this,"sampleToDiscreteGenePanelId",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.molecularProfileIdDiscrete,n.genePanelDataByMolecularProfileIdAndSampleId]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.molecularProfileIdDiscrete.result){e.next=2;break}return e.abrupt("return",a.mapValues(this.genePanelDataByMolecularProfileIdAndSampleId.result[this.molecularProfileIdDiscrete.result]||{},function(e){return e.genePanelId}));case 2:return e.abrupt("return",{});case 3:case"end":return e.stop()}},e,this)}))}},{})}),Object.defineProperty(this,"genePanelIdToEntrezGeneIds",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.genePanelIdToPanel]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a(this.genePanelIdToPanel.result).mapValues(function(e){return a.map(e.genes,function(e){return e.entrezGeneId})}).value());case 1:case"end":return e.stop()}},e,this)}))}},{})}),Object.defineProperty(this,"getDiscreteCNAPutativeDriverInfo",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.getOncoKbCnaAnnotationForOncoprint]},invoke:function(){return Promise.resolve(function(e){var t=n.getOncoKbCnaAnnotationForOncoprint.result,r=t&&!(t instanceof Error)&&t(e);return Object(C.h)(e,r,!1,void 0)})}})}),Object.defineProperty(this,"mutationTableShowGeneFilterMenu",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.samples,n.sampleToMutationGenePanelId,n.genePanelIdToEntrezGeneIds]},invoke:function(){var e=a.uniq(a.map(n.mergedMutationDataIncludingUncalled,function(e){return e[0].entrezGeneId})),t=n.samples.result.map(function(e){return e.sampleId});return Promise.resolve(t.length>1&&zt(t,e,n.sampleToMutationGenePanelId.result,n.genePanelIdToEntrezGeneIds.result))}})}),Object.defineProperty(this,"cnaTableShowGeneFilterMenu",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.samples,n.sampleToMutationGenePanelId,n.genePanelIdToEntrezGeneIds]},invoke:function(){var e=a.uniq(a.map(n.mergedDiscreteCNAData,function(e){return e[0].entrezGeneId})),t=n.samples.result.map(function(e){return e.sampleId});return Promise.resolve(t.length>1&&zt(t,e,n.sampleToMutationGenePanelId.result,n.genePanelIdToEntrezGeneIds.result))}})}),Object.defineProperty(this,"structuralVariantTableShowGeneFilterMenu",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.samples,n.sampleToStructuralVariantGenePanelId,n.genePanelIdToEntrezGeneIds,n.groupedStructuralVariantData]},invoke:function(){var e=a.uniq(a.flatMap(n.groupedStructuralVariantData.result,function(e){return e[0].site2EntrezGeneId?[e[0].site1EntrezGeneId,e[0].site2EntrezGeneId]:[e[0].site1EntrezGeneId]})),t=n.samples.result.map(function(e){return e.sampleId});return Promise.resolve(t.length>1&&zt(t,e,n.sampleToStructuralVariantGenePanelId.result,n.genePanelIdToEntrezGeneIds.result))},default:!1})}),Object.defineProperty(this,"trialMatches",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({invoke:function(){return function(e){return ht(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(Le.a)("api/matchminer/api"),t.abrupt("return",De.post(n+"/post_trial_match").set("Content-Type","application/json").send(e).then(function(e){return JSON.parse(e.text).map(function(e){return{id:e.nct_id+"+"+e.protocol_no,nctId:e.nct_id,protocolNo:e.protocol_no,gender:e.gender?e.gender:"",matchType:e.match_type?e.match_type:"",armDescription:e.arm_description?e.arm_description:"",armType:e.arm_type?e.arm_type:"",sampleId:e.sample_id,mrn:e.mrn,vitalStatus:e.vital_status?e.vital_status:"",genomicAlteration:e.genomic_alteration?e.genomic_alteration:"",trueHugoSymbol:e.true_hugo_symbol?e.true_hugo_symbol:"",trueProteinChange:e.true_protein_change?e.true_protein_change:"",oncotreePrimaryDiagnosisName:e.oncotreePrimaryDiagnosisName?e.oncotreePrimaryDiagnosisName:"",trialAgeNumerical:e.trial_age_numerical?e.trial_age_numerical:"",trialOncotreePrimaryDiagnosis:e.trial_oncotree_primary_diagnosis?e.trial_oncotree_primary_diagnosis:""}})}));case 2:case"end":return t.stop()}},t)}))}({mrn:n.patientId})}},[])}),Object.defineProperty(this,"trialIds",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.trialMatches]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Set,n=new Set,a.forEach(this.trialMatches.result,function(e){a.isEmpty(e.protocolNo)?t.add(e.nctId):n.add(e.protocolNo)}),e.abrupt("return",{nct_id:jn(t),protocol_no:jn(n)});case 4:case"end":return e.stop()}},e,this)}))}},{nct_id:[],protocol_no:[]})}),Object.defineProperty(this,"trials",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.trialIds]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.trialIds.result.protocol_no.length>0||this.trialIds.result.nct_id.length>0)){e.next=2;break}return e.abrupt("return",yt(this.trialIds.result));case 2:return e.abrupt("return",[]);case 3:case"end":return e.stop()}},e,this)}))}},[])}),Object.defineProperty(this,"detailedTrialMatches",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.trials,n.trialMatches]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.trials.result||!this.trialMatches.result){e.next=2;break}return e.abrupt("return",bt(this.trials.result,this.trialMatches.result));case 2:return e.abrupt("return",[]);case 3:case"end":return e.stop()}},e,this)}))}},[])}),Object.defineProperty(this,"oncoKbDataForOncoprint",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.mutationData,n.oncoKbAnnotatedGenes]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(C.B)(this.oncoKbAnnotatedGenes,this.mutationData));case 1:case"end":return e.stop()}},e,this)}))}},C.c)}),Object.defineProperty(this,"cnaOncoKbDataForOncoprint",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.oncoKbAnnotatedGenes,n.molecularData,n.molecularProfileIdToMolecularProfile]},invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(C.o)(this.oncoKbAnnotatedGenes,this.molecularData));case 1:case"end":return e.stop()}},e,this)}))}},C.c)}),Object.defineProperty(this,"getMutationPutativeDriverInfo",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.getOncoKbMutationAnnotationForOncoprint,n.isHotspotForOncoprint]},invoke:function(){return Promise.resolve(function(e){var t=n.getOncoKbMutationAnnotationForOncoprint.result,r=t&&!(t instanceof Error)&&t(e),o=!(n.isHotspotForOncoprint.result instanceof Error)&&n.isHotspotForOncoprint.result(e);return Object(C.i)(e,r,!0,o,!1,!1,!1,!1,!1,void 0)})}})}),Object.defineProperty(this,"getOncoKbMutationAnnotationForOncoprint",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.oncoKbDataForOncoprint]},invoke:function(){return Object(C.ob)(n.oncoKbDataForOncoprint)}})}),Object.defineProperty(this,"getOncoKbCnaAnnotationForOncoprint",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.cnaOncoKbDataForOncoprint]},invoke:function(){return Object(C.nb)(n.cnaOncoKbDataForOncoprint,!0)}})}),Object.defineProperty(this,"isHotspotForOncoprint",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.indexedHotspotData]},invoke:function(){return Object(C.pb)(n.indexedHotspotData)}})}),Object.defineProperty(this,"entrezGeneIdToGene",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.mutatedGenes,n.referenceGenes]},invoke:function(){return Promise.resolve(a.keyBy([].concat(jn(n.mutatedGenes.result),jn(n.referenceGenes.result)),function(e){return e.entrezGeneId}))}})}),Object.defineProperty(this,"geneticTrackData",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.mutationData,n.discreteCNAData,n.samplesWithUniqueKeys,n.molecularProfileIdDiscrete,n.mutationMolecularProfile,n.discreteMolecularProfile,n.coverageInformation,n.getMutationPutativeDriverInfo,n.entrezGeneIdToGene,n.getOncoKbCnaAnnotationForOncoprint,n.getDiscreteCNAPutativeDriverInfo]},invoke:function(){return Promise.resolve(a.mapValues(n.caseAggregatedAlterationDataGroupedByGene,function(e){return Object(vn.e)(e.samples,a.values(e.samples)[0][0].hugoGeneSymbol,n.samplesWithUniqueKeys.result,n.coverageInformation.result,a.compact([n.mutationMolecularProfile.result,n.discreteMolecularProfile.result]))}))}})}),Object.defineProperty(this,"getOtherBiomarkersOncoKbData",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({invoke:function(){return Rn(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.a.annotateMutationsByProteinChangePostUsingPOST_1({body:this.otherBiomarkerQueries});case 2:return t=e.sent,n=t.map(function(e){return Object.assign(Object.assign({},e),Object(C.wb)(e.query.id))}),e.abrupt("return",a.chain(n).groupBy(function(e){return e.sampleId}).mapValues(function(e){return a.keyBy(e,function(e){return e.type})}).value());case 5:case"end":return e.stop()}},e,this)}))},default:{}})}),Object(T.makeObservable)(this),this.internalClient=ge.a}var t,n,r;return t=e,(n=[{key:"isResourceTabOpen",value:function(e){return!!this.openResourceTabMap.get(e)}},{key:"setResourceTabOpen",value:function(e,t){this.openResourceTabMap.set(e,t)}},{key:"onFilterGenesStructuralVariantTable",value:function(e){this.structuralVariantTableGeneFilterOption=e}},{key:"setMutationalSignaturesVersion",value:function(e){this._selectedMutationalSignatureVersion=e}},{key:"setSampleId",value:function(e){e&&(this._patientId=""),this._sampleId=e}},{key:"setPatientId",value:function(e){e&&(this._sampleId=""),this._patientId=e}},{key:"setActiveTabId",value:function(e){this.activeTabId=e}},{key:"clearErrors",value:function(){this.ajaxErrors=[]}},{key:"generateGenomeNexusHgvsgUrl",value:function(e){return Object(Le.p)(e,this.referenceGenomeBuild)}},{key:"getOtherBiomarkerQueries",value:function(e,t){var n=this;return a.values(t).map(function(t){var r;return{id:Object(C.eb)({sampleId:t.sampleId,type:e}),alteration:Ue.w[e],gene:{hugoSymbol:Ue.v},tumorType:Object(C.zb)(Object(C.ib)(n.clinicalDataForSamples.result,null===(r=n.studyMetaData.result)||void 0===r?void 0:r.cancerType.name))}})}},{key:"patientId",get:function(){return this._patientId?this._patientId:this.derivedPatientId.result}},{key:"sampleId",get:function(){return this._sampleId}},{key:"pageTitle",get:function(){return"patient"===this.pageMode?"Patient: ".concat(this.patientId):"Sample: ".concat(this.sampleId)}},{key:"metaDescription",get:function(){var e="patient"===this.pageMode?this.patientId:this.sampleId;return"".concat(e," from ").concat(this.studyMetaData.result.name)}},{key:"pageMode",get:function(){return this._sampleId?"sample":"patient"}},{key:"caseId",get:function(){return"sample"===this.pageMode?this.sampleId:this.patientId}},{key:"patientIdsInCohort",set:function(e){var t=this;Object(T.runInAction)(function(){return t._patientIdsInCohort=e})},get:function(){var e=Object(mt.a)();return e||this._patientIdsInCohort}},{key:"selectedMutationalSignatureVersion",get:function(){return this._selectedMutationalSignatureVersion}},{key:"studyToCancerType",get:function(){return Object(C.qb)(this.studies.result)}},{key:"mergedDiscreteCNAData",get:function(){return Object(C.sb)(this.discreteCNAData)}},{key:"usingPublicOncoKbInstance",get:function(){return this.oncoKbInfo.result?this.oncoKbInfo.result.publicInstance:Ue.D}},{key:"sampleIds",get:function(){return this.samples.result?this.samples.result.map(function(e){return e.sampleId}):[]}},{key:"mergedMutationData",get:function(){return Object(C.tb)(this.mutationData)}},{key:"mergedMutationDataIncludingUncalled",get:function(){return Object(C.ub)(this.mutationData,this.uncalledMutationData)}},{key:"annotatedExtendedAlterationData",get:function(){var e=this,t=Object(C.M)(a.flatten(this.mergedMutationDataIncludingUncalledFilteredByGene),this.getMutationPutativeDriverInfo.result,this.entrezGeneIdToGene.result),n=[].concat(jn(t.data),jn(t.vusAndGermline),jn(t.vus),jn(t.germline)),r=Object(C.L)(a.flatten(this.mergedDiscreteCNADataFilteredByGene).map(function(e){return Object.assign(Object.assign({},e),{value:e.alteration})}),this.getDiscreteCNAPutativeDriverInfo.result,this.entrezGeneIdToGene),o=[].concat(jn(r.data),jn(r.vus)).map(function(t){return Object.assign(Object.assign({},t),{molecularProfileAlterationType:e.discreteMolecularProfile.result.molecularAlterationType,alterationType:wn.a.COPY_NUMBER_ALTERATION,alterationSubType:Sn.a[t.value]})}),i=n.map(function(t){var n="fusion"===Object(Sn.d)(t.mutationType)?wn.a.FUSION:wn.a.MUTATION_EXTENDED;return Object.assign(Object.assign({},t),{molecularProfileAlterationType:e.mutationMolecularProfile.result.molecularAlterationType,alterationType:n,alterationSubType:Object(Sn.c)(t)||"",value:0})});return[].concat(jn(i),jn(o))}},{key:"caseAggregatedAlterationDataGroupedByGene",get:function(){var e=a.groupBy(this.annotatedExtendedAlterationData,function(e){return e.hugoGeneSymbol});return a.mapValues(e,function(e){return{samples:a.groupBy(e,function(e){return e.uniqueSampleKey})}})}},{key:"mergedMutationDataFilteredByGene",get:function(){return this.mutationTableGeneFilterOption===Ct.ALL_SAMPLES?Ln(this.mergedMutationData,this.sampleIds,this.sampleToMutationGenePanelId.result,this.genePanelIdToEntrezGeneIds.result):this.mergedMutationData}},{key:"mergedMutationDataIncludingUncalledFilteredByGene",get:function(){return this.mutationTableGeneFilterOption===Ct.ALL_SAMPLES?Ln(this.mergedMutationDataIncludingUncalled,this.sampleIds,this.sampleToMutationGenePanelId.result,this.genePanelIdToEntrezGeneIds.result):this.mergedMutationDataIncludingUncalled}},{key:"mergedDiscreteCNADataFilteredByGene",get:function(){var e=this;return this.copyNumberTableGeneFilterOption===Ct.ALL_SAMPLES?a.filter(this.mergedDiscreteCNAData,function(t){var n=t[0].gene.entrezGeneId,r=Wt.getProfiledSamplesForGene(n,e.sampleIds,e.sampleToMutationGenePanelId.result,e.genePanelIdToEntrezGeneIds.result);return a(r).values().filter(function(e){return e}).value().length===e.sampleIds.length}):this.mergedDiscreteCNAData}},{key:"existsSomeMutationWithVAFData",get:function(){return a.some(this.mergedMutationDataIncludingUncalled,function(e){return a.some(e,function(e){var t=Object(xt.q)(e);return null!==t&&t.vaf>0})})}},{key:"existsSomeMutationWithAscnProperty",get:function(){return Object(C.j)(this.mergedMutationDataIncludingUncalled)}},{key:"uniqueSampleKeyToTumorType",get:function(){return Object(C.W)(this.clinicalDataForSamples,this.studiesForSamplesWithoutCancerTypeClinicalData,this.samplesWithoutCancerTypeClinicalData)}},{key:"mrnaExprRankCache",get:function(){return new Ae(this.mrnaRankMolecularProfileId.result)}},{key:"variantCountCache",get:function(){return new Xe(this.mutationMolecularProfileId.result)}},{key:"discreteCNACache",get:function(){return new Ne.a(this.studyToMolecularProfileDiscrete.result)}},{key:"genomeNexusCache",get:function(){return new Ve.a(Object(Kt.a)(["annotation_summary"],this.genomeNexusClient))}},{key:"genomeNexusMutationAssessorCache",get:function(){return new Fe.a(Object(Kt.a)(["annotation_summary","mutation_assessor"],this.genomeNexusClient))}},{key:"pubMedCache",get:function(){return new Ge.a}},{key:"copyNumberCountCache",get:function(){return new nt(this.molecularProfileIdDiscrete.result)}},{key:"cancerTypeCache",get:function(){return new rt.a}},{key:"mutationCountCache",get:function(){return new ot.a}},{key:"downloadDataFetcher",get:function(){return new dt.a(this.mutationData)}},{key:"referenceGenomeBuild",get:function(){if(!this.studies.isComplete)throw new Error("Failed to get studies");return Object(C.ab)(this.studies.result)}},{key:"genomeNexusClient",get:function(){return new Be.b(this.referenceGenomeBuild)}},{key:"genomeNexusInternalClient",get:function(){return new Be.c(this.referenceGenomeBuild)}},{key:"sampleMsiHInfo",get:function(){return Object(C.fb)(this.clinicalDataForSamples.result,"MSI_TYPE",["Instable"])}},{key:"sampleTmbHInfo",get:function(){return Object(C.gb)(this.clinicalDataForSamples.result,"CVR_TMB_SCORE",On.f)}},{key:"otherBiomarkerQueries",get:function(){var e=[];return a.keys(this.sampleMsiHInfo).length>0&&e.push.apply(e,jn(this.getOtherBiomarkerQueries(Ue.z.MSIH,this.sampleMsiHInfo))),a.keys(this.sampleTmbHInfo).length>0&&e.push.apply(e,jn(this.getOtherBiomarkerQueries(Ue.z.TMBH,this.sampleTmbHInfo))),e}}])&&Mn(t.prototype,n),r&&Mn(t,r),e}();Dn([T.observable],Vn.prototype,"activeTabId",void 0),Dn([T.observable],Vn.prototype,"_patientId",void 0),Dn([T.computed],Vn.prototype,"patientId",null),Dn([T.observable],Vn.prototype,"urlValidationError",void 0),Dn([T.observable],Vn.prototype,"ajaxErrors",void 0),Dn([T.observable],Vn.prototype,"studyId",void 0),Dn([T.observable],Vn.prototype,"_sampleId",void 0),Dn([H.default],Vn.prototype,"isResourceTabOpen",null),Dn([T.action.bound],Vn.prototype,"setResourceTabOpen",null),Dn([T.action.bound],Vn.prototype,"onFilterGenesStructuralVariantTable",null),Dn([T.observable],Vn.prototype,"mutationTableGeneFilterOption",void 0),Dn([T.observable],Vn.prototype,"copyNumberTableGeneFilterOption",void 0),Dn([T.observable],Vn.prototype,"structuralVariantTableGeneFilterOption",void 0),Dn([T.computed],Vn.prototype,"sampleId",null),Dn([T.computed],Vn.prototype,"pageTitle",null),Dn([T.computed],Vn.prototype,"metaDescription",null),Dn([T.computed],Vn.prototype,"pageMode",null),Dn([T.computed],Vn.prototype,"caseId",null),Dn([T.observable],Vn.prototype,"_patientIdsInCohort",void 0),Dn([T.computed],Vn.prototype,"patientIdsInCohort",null),Dn([T.observable],Vn.prototype,"_selectedMutationalSignatureVersion",void 0),Dn([T.computed],Vn.prototype,"selectedMutationalSignatureVersion",null),Dn([T.action],Vn.prototype,"setMutationalSignaturesVersion",null),Dn([T.computed],Vn.prototype,"studyToCancerType",null),Dn([T.computed],Vn.prototype,"mergedDiscreteCNAData",null),Dn([T.computed],Vn.prototype,"usingPublicOncoKbInstance",null),Dn([T.computed],Vn.prototype,"sampleIds",null),Dn([T.computed],Vn.prototype,"mergedMutationData",null),Dn([T.computed],Vn.prototype,"mergedMutationDataIncludingUncalled",null),Dn([T.computed],Vn.prototype,"annotatedExtendedAlterationData",null),Dn([T.computed],Vn.prototype,"caseAggregatedAlterationDataGroupedByGene",null),Dn([T.computed],Vn.prototype,"mergedMutationDataFilteredByGene",null),Dn([T.computed],Vn.prototype,"mergedMutationDataIncludingUncalledFilteredByGene",null),Dn([T.computed],Vn.prototype,"mergedDiscreteCNADataFilteredByGene",null),Dn([T.computed],Vn.prototype,"existsSomeMutationWithVAFData",null),Dn([T.computed],Vn.prototype,"existsSomeMutationWithAscnProperty",null),Dn([T.computed],Vn.prototype,"uniqueSampleKeyToTumorType",null),Dn([Object(T.action)("SetSampleId")],Vn.prototype,"setSampleId",null),Dn([Object(T.action)("SetPatientId")],Vn.prototype,"setPatientId",null),Dn([we.cached,T.computed],Vn.prototype,"mrnaExprRankCache",null),Dn([we.cached,T.computed],Vn.prototype,"variantCountCache",null),Dn([we.cached,T.computed],Vn.prototype,"discreteCNACache",null),Dn([we.cached,T.computed],Vn.prototype,"genomeNexusCache",null),Dn([we.cached,T.computed],Vn.prototype,"genomeNexusMutationAssessorCache",null),Dn([we.cached,T.computed],Vn.prototype,"pubMedCache",null),Dn([we.cached,T.computed],Vn.prototype,"copyNumberCountCache",null),Dn([we.cached,T.computed],Vn.prototype,"cancerTypeCache",null),Dn([we.cached,T.computed],Vn.prototype,"mutationCountCache",null),Dn([we.cached,T.computed],Vn.prototype,"downloadDataFetcher",null),Dn([T.action],Vn.prototype,"setActiveTabId",null),Dn([T.action],Vn.prototype,"clearErrors",null),Dn([T.computed],Vn.prototype,"referenceGenomeBuild",null),Dn([H.default],Vn.prototype,"generateGenomeNexusHgvsgUrl",null),Dn([T.computed],Vn.prototype,"genomeNexusClient",null),Dn([T.computed],Vn.prototype,"genomeNexusInternalClient",null),Dn([T.computed],Vn.prototype,"sampleMsiHInfo",null),Dn([T.computed],Vn.prototype,"sampleTmbHInfo",null),Dn([T.computed],Vn.prototype,"otherBiomarkerQueries",null);var Fn=n(1270),Bn=n.n(Fn);function Un(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Hn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wn(e){return(Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zn(e,t){return!t||"object"!==Wn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Kn(e){return(Kn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xn(e,t)}function Xn(e,t){return(Xn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Zn=function(e){function t(){return qn(this,t),zn(this,Kn(t).apply(this,arguments))}return Yn(t,G["b"]),t}(),Qn=function(e){function t(){return qn(this,t),zn(this,Kn(t).apply(this,arguments))}var n,o,i;return Yn(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e,t,n=(e=this.props.samples,t={columns:[],items:{}},e&&e.forEach(function(e){var n=e.id;t.columns.push({id:n}),e.clinicalData.forEach(function(e){t.items[e.clinicalAttributeId]=t.items[e.clinicalAttributeId]||{},t.items[e.clinicalAttributeId][n]=e.value.toString(),t.items[e.clinicalAttributeId].clinicalAttribute=e.clinicalAttribute,t.items[e.clinicalAttributeId].id=e.clinicalAttributeId})}),t),o=this.prepareData(n),a=[{id:"attribute"}].concat(Un(n.columns)).map(function(e){return{name:e.id,render:function(t){return Object(g.ob)(t[e.id])?r.createElement("a",{href:t[e.id],target:"_blank"},t[e.id]):r.createElement("span",null,t[e.id])},download:function(t){return"".concat(t[e.id])},filter:function(t,n,r){return t[e.id].toString().toUpperCase().indexOf(r)>-1}}});return a[0].sortBy=function(e){return e.attribute},r.createElement(Zn,{columns:a,data:o,className:Bn.a.sampleTable,showPagination:!1,initialItemsPerPage:B.b,showColumnVisibility:!1})}},{key:"prepareData",value:function(e){var t=[];return a.each(a.values(e.items).sort(function(e,t){return U(e.clinicalAttribute,t.clinicalAttribute)}),function(n){var r={attribute:n.clinicalAttribute.displayName};e.columns.map(function(e){e.id in n?r[e.id]=n[e.id]:r[e.id]="n/a"}),t.push(r)}),t}}])&&Hn(n.prototype,o),i&&Hn(n,i),t}(),$n=n(416),Jn=n(355),er=n(45),tr=n(986);function nr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var rr,or=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"renderFunction",value:function(t,n,o){var a=e.getCopyNumberCount(t,n),i=e.makeCohortFrequencyViz(t,a),u=e.getGisticValue(t,o),s=0,c=0;return null!==u&&(s=u.qValue,c=u.peakGeneCount),r.createElement("div",null,null!==i&&i,r.createElement(l.If,{condition:null!==u},r.createElement(l.Then,null,r.createElement(tr.a,{qValue:s,peakGeneCount:c}))))}},{key:"makeCohortFrequencyViz",value:function(t,n){if(null!==n){var o=n.data;if("complete"===n.status&&o){var a=[o.numberOfSamplesWithAlterationInGene],i=t[0].alteration>0?["red"]:["blue"];return r.createElement(Jn.a,{counts:a,freqColors:i,totalCount:o.numberOfSamples,tooltip:e.tooltipContent(t,o)})}return"complete"===n.status?r.createElement(g.i,{placement:"left",overlay:r.createElement("span",null,"Data not available for this gene and alteration.")},r.createElement("span",{style:{color:"gray",fontSize:"xx-small",textAlign:"center"}},"NA")):r.createElement(g.i,{placement:"left",overlay:r.createElement("span",null,"Error retrieving data.")},r.createElement("span",{style:{color:"gray",fontSize:"xx-small",textAlign:"center"}},"ERROR"))}return r.createElement(g.i,{placement:"left",overlay:r.createElement("span",null,"Querying server for data.")},r.createElement("span",{style:{color:"gray",fontSize:"xx-small",textAlign:"center"}},"LOADING"))}},{key:"tooltipContent",value:function(e,t){var n=t.numberOfSamplesWithAlterationInGene,o=t.numberOfSamplesWithAlterationInGene/t.numberOfSamples,a=r.createElement("b",null,Object(er.d)(o)),i=e[0].gene.hugoGeneSymbol,l=-2===e[0].alteration?"deleted":"amplified",u=1===n?"sample":"samples",s=1===n?"has":"have";return r.createElement("span",null,n," ",u," (",a,") in this study ",s," ",l," ",i)}},{key:"getSortValue",value:function(t,n){var r=e.getCopyNumberCount(t,n);return r&&r.data?r.data.numberOfSamplesWithAlterationInGene:null}},{key:"getDownloadValue",value:function(t,n){var r=e.getCopyNumberCount(t,n);if(r&&r.data){var o=r.data.numberOfSamplesWithAlterationInGene/r.data.numberOfSamples;return Object(er.d)(o)}return"N/A"}},{key:"getCopyNumberCount",value:function(e,t){return t.get({entrezGeneId:e[0].entrezGeneId,alteration:e[0].alteration})}},{key:"getGisticValue",value:function(e,t){var n,r=t[e[0].entrezGeneId];if(r){var o=2===e[0].alteration;n=r.find(function(e){return e.amp===o})}return void 0===n?null:n}}],(n=null)&&nr(t.prototype,n),o&&nr(t,o),e}();function ar(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}!function(e){e[e.DeepDel=-2]="DeepDel",e[e.AMP=2]="AMP"}(rr||(rr={}));var ir=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"displayText",value:function(e){return rr[e[0].alteration]}},{key:"renderFunction",value:function(t){var n=null;switch(t[0].alteration){case-2:n="#0000FF";break;case 2:n="#FF0000"}return n?r.createElement("span",{style:{color:n}},e.displayText(t)):r.createElement("span",null)}},{key:"download",value:function(e){return rr[e[0].alteration]}},{key:"sortValue",value:function(e){return e[0].alteration}}],(n=null)&&ar(t.prototype,n),o&&ar(t,o),e}(),lr=n(244),ur=n(343);function sr(){return(sr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function cr(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function pr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var fr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"getData",value:function(t,n,r,o,i,l,u,s){var c;if(t){var p=void 0,f="complete",d=t[0].gene.hugoGeneSymbol,m=!1,h=!1;!n||n instanceof Error||(m=void 0!==a.find(n.result,function(e){return e.oncokbAnnotated&&e.entrezGeneId===t[0].entrezGeneId}),h=void 0!==a.find(n.result,function(e){return e.entrezGeneId===t[0].entrezGeneId}));var y=[lt.f.BIOLOGICAL];r&&r.result instanceof Error?f="error":m&&(!r||!r.result||r.result instanceof Error||"complete"!==r.status||(p=e.getIndicatorData(t,r.result,i,s),y=a.uniq([].concat(cr(y),cr(Object(lt.m)(a.values(r.result.indicatorMap)))))),f=r?r.status:"pending"),c={hugoGeneSymbol:d,oncoKbStatus:f,oncoKbIndicator:p,oncoKbAvailableDataTypes:y,oncoKbGeneExist:m,isOncoKbCancerGene:h,usingPublicOncoKbInstance:void 0===o?Ue.D:o,civicEntry:l&&l.result&&u&&u.result?e.getCivicEntry(t,l.result,u.result):void 0,civicStatus:l&&l.status&&u&&u.status?e.getCivicStatus(l.status,u.status):"pending",hasCivicVariants:!(l&&l.result&&u&&u.result)||e.hasCivicVariants(t,l.result,u.result),myCancerGenomeLinks:[],hotspotStatus:"complete",isHotspot:!1,is3dHotspot:!1}}else c=Ue.e;return c}},{key:"getCivicEntry",value:function(e,t,n){var r=null,o=e[0].gene.hugoGeneSymbol,i=st(e,o,n),l=t[o];return!l||a.isEmpty(i)&&""===l.description||(r=Object(lt.k)(l,i)),r}},{key:"getCivicStatus",value:function(e,t){return"error"===e||"error"===t?"error":"complete"===e&&"complete"===t?"complete":"pending"}},{key:"hasCivicVariants",value:function(e,t,n){var r=e[0].gene.hugoGeneSymbol,o=st(e,r,n);return!t[r]||!a.isEmpty(o)}},{key:"getIndicatorData",value:function(e,t,n,r){if(null!==n&&null!==t.indicatorMap){var o=Object(lt.N)(e[0].gene.entrezGeneId,n[e[0].uniqueSampleKey],Object(lr.a)(e[0].alteration));if(t.indicatorMap[o]){var a=t.indicatorMap[o];if(null===a.query.tumorType&&r){var i=r[e[0].studyId];"mixed"!==i.cancerTypeId&&(a.query.tumorType=i.cancerType.name)}return a}}}},{key:"sortValue",value:function(t,n,r,o,i,l,u){var s=e.getData(t,n,o,r,i,l,u);return a.flatten([Object(Ue.pb)(s.oncoKbIndicator),Object(Ue.I)(s.civicEntry),s.isOncoKbCancerGene?1:0])}},{key:"renderFunction",value:function(t,n){var o=e.getData(t,n.oncoKbCancerGenes,n.oncoKbData,n.usingPublicOncoKbInstance,n.uniqueSampleKeyToTumorType,n.civicGenes,n.civicVariants,n.studyIdToStudy);return r.createElement(Ue.m,sr({},n,{annotation:o}))}},{key:"headerRender",value:function(e,t){return r.createElement(ur.a,{name:e,width:t})}}],(n=null)&&pr(t.prototype,n),o&&pr(t,o),e}(),dr=n(316);n(1271);function mr(e){return(mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yr(e){return(yr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function br(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gr(e,t){return(gr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vr=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=yr(t).call(this,e),n=!o||"object"!==mr(o)&&"function"!=typeof o?br(r):o,Object.defineProperty(br(n),"iconClicked",{enumerable:!0,configurable:!0,writable:!0,value:function(e){n.props.suppressClickBubble&&e.stopPropagation()}}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gr(e,t)}(t,o.a.Component),n=t,(r=[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{style:{marginRight:"5px"}},this.props.name),this.props.showIcon&&o.a.createElement(dr.a,{trigger:["click"],overlay:this.props.children},o.a.createElement("i",{className:"fa fa-filter",onClick:this.iconClicked,"data-test":"gene-filter-icon"})))}}])&&hr(n.prototype,r),a&&hr(n,a),t}();function wr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Or(e,t,n){return t&&Sr(e.prototype,t),n&&Sr(e,n),e}function Er(e,t){return!t||"object"!==_r(t)&&"function"!=typeof t?Tr(e):t}function Pr(e){return(Pr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ir(e,t)}function Ir(e,t){return(Ir=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _r(e){return(_r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(vr,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{suppressClickBubble:!0,showIcon:!0}});var kr=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":_r(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},xr=function(e){function t(e){var n;return wr(this,t),n=Er(this,Pr(t).call(this,e)),Object(T.makeObservable)(Tr(n)),n}return Cr(t,r["Component"]),Or(t,[{key:"handleClick",value:function(e){this.props.onSelectGenePanel&&e&&this.props.onSelectGenePanel(e)}},{key:"render",value:function(){return r.createElement(r.Fragment,null,this.renderGenePanelLinks)}},{key:"renderGenePanelLinks",get:function(){var e=this,t=Mr(this.props),n=[];return t.forEach(function(o,a){o&&"N/A"!==o?n.push(r.createElement("a",{onClick:function(){return e.handleClick(o)}},o)):n.push(o),a<t.length-1&&n.push(", ")}),n}}]),t}();kr([H.default],xr.prototype,"handleClick",null),kr([T.computed],xr.prototype,"renderGenePanelLinks",null);var jr=function(e){function t(e){return wr(this,t),Er(this,Pr(t).call(this,e))}return Cr(t,r["Component"]),Or(t,[{key:"render",value:function(){var e=this.props,t=e.sampleToGenePanelId,n=e.sampleManager;if(t&&n)return t&&!Object.keys(t).length?r.createElement("i",{className:"fa fa-spinner fa-pulse"}):r.createElement("div",{style:{position:"relative"}},r.createElement("ul",{style:{marginBottom:0},className:"list-inline list-unstyled"},r.createElement(xr,this.props)))}}]),t}(),Mr=function(e){var t=e.data,n=e.sampleToGenePanelId,r=e.sampleManager,o=e.genePanelIdToGene;if(n&&r){var i=r.samples,l=Object(a.map)(i,function(e){return e.id}),u=t[0].entrezGeneId,s=Wt.getPresentSamples(t),c=Wt.getProfiledSamplesForGene(u,l,n,o);return i.map(function(e){var t=e.id in s;return e.id in c&&c[e.id]&&!t?"":n[e.id]||"N/A"}).filter(function(e){return e})}return[]},Ar={renderFunction:function(e){return r.createElement(jr,{data:e.data,sampleToGenePanelId:e.sampleToGenePanelId,sampleManager:e.sampleManager,genePanelIdToGene:e.genePanelIdToGene,onSelectGenePanel:e.onSelectGenePanel})},download:function(e){return Mr(e)},getGenePanelIds:Mr};function Dr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nr(e,t){return!t||"object"!==Br(t)&&"function"!=typeof t?Lr(e):t}function Lr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gr(e){return(Gr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fr(e,t)}function Fr(e,t){return(Fr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Br(e){return(Br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ur=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Br(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},Hr=function(e){function t(){return Rr(this,t),Nr(this,Gr(t).apply(this,arguments))}return Vr(t,G["b"]),t}(),Wr=function(e){function t(e){var n;return Rr(this,t),n=Nr(this,Gr(t).call(this,e)),Object.defineProperty(Lr(n),"oncokbWidth",{enumerable:!0,configurable:!0,writable:!0,value:22}),Object.defineProperty(Lr(n),"oncokbInterval",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object(T.makeObservable)(Lr(n)),n.oncokbInterval=setInterval(function(){var e,t,r,o;(null===(t=null===(e=document.getElementById("copy-number-annotation"))||void 0===e?void 0:e.getElementsByClassName("oncokb-content")[0])||void 0===t?void 0:t.clientWidth)&&(n.oncokbWidth=Number(null===(o=null===(r=document.getElementById("copy-number-annotation"))||void 0===r?void 0:r.getElementsByClassName("oncokb-content")[0])||void 0===o?void 0:o.clientWidth)||22,clearInterval(n.oncokbInterval))},500),n}var n,o,i;return Vr(t,r["Component"]),n=t,(o=[{key:"destroy",value:function(){clearInterval(this.oncokbInterval)}},{key:"getCytobandForGene",value:function(e){return this.hugoGeneSymbolToCytoband[e]}},{key:"render",value:function(){var e=this,t=[],n=this.props.sampleIds.length;n>=2&&t.push({name:"Samples",render:function(t){return Wt.renderFunction(t,e.props.sampleManager,e.props.sampleToGenePanelId,e.props.genePanelIdToEntrezGeneIds,e.props.onSelectGenePanel,e.props.disableTooltip)},sortBy:function(t){return Wt.getSortValue(t,e.props.sampleManager)},download:function(e){return Wt.getSample(e)},order:20,resizable:!0}),t.push({name:"Gene",render:function(e){return r.createElement("span",{"data-test":"cna-table-gene-column"},e[0].gene.hugoGeneSymbol)},filter:function(e,t,n){return e[0].gene.hugoGeneSymbol.indexOf(n)>-1},download:function(e){return e[0].gene.hugoGeneSymbol},sortBy:function(e){return e[0].gene.hugoGeneSymbol},headerRender:function(t){return r.createElement(vr,{name:t,showIcon:e.props.showGeneFilterMenu},r.createElement(kt,{onOptionChanged:e.props.onFilterGenes,currentSelection:e.props.currentGeneFilter}))},visible:!0,order:30});var o=function(t){return{data:t,sampleToGenePanelId:e.props.sampleToGenePanelId,sampleManager:e.props.sampleManager,genePanelIdToGene:e.props.genePanelIdToEntrezGeneIds,onSelectGenePanel:e.props.onSelectGenePanel}};t.push({name:"Gene panel",render:function(e){return Ar.renderFunction(o(e))},download:function(e){return Ar.download(o(e))},sortBy:function(e){return Ar.getGenePanelIds(o(e))},visible:!1,order:35}),t.push({name:"CNA",render:ir.renderFunction,filter:function(e,t,n){return ir.displayText(e).toUpperCase().indexOf(n)>-1},download:ir.download,sortBy:ir.sortValue,visible:!0,order:40}),t.push({name:"Annotation",headerRender:function(t){return fr.headerRender(t,e.oncokbWidth)},render:function(t){return r.createElement("span",{id:"copy-number-annotation"},fr.renderFunction(t,{uniqueSampleKeyToTumorType:e.props.uniqueSampleKeyToTumorType,oncoKbData:e.props.cnaOncoKbData,oncoKbCancerGenes:e.props.oncoKbCancerGenes,usingPublicOncoKbInstance:e.props.usingPublicOncoKbInstance,enableOncoKb:e.props.enableOncoKb,pubMedCache:e.props.pubMedCache,civicGenes:e.props.cnaCivicGenes,civicVariants:e.props.cnaCivicVariants,enableCivic:e.props.enableCivic,enableMyCancerGenome:!1,enableHotspot:!1,userEmailAddress:e.props.userEmailAddress,studyIdToStudy:e.props.studyIdToStudy}))},sortBy:function(t){return fr.sortValue(t,e.props.oncoKbCancerGenes,e.props.usingPublicOncoKbInstance,e.props.cnaOncoKbData,e.props.uniqueSampleKeyToTumorType,e.props.cnaCivicGenes,e.props.cnaCivicVariants)},order:50}),t.push({name:"Cytoband",render:function(t){return r.createElement("span",null,e.getCytobandForGene(t[0].gene.hugoGeneSymbol))},sortBy:function(t){return e.getCytobandForGene(t[0].gene.hugoGeneSymbol)},download:function(t){return e.getCytobandForGene(t[0].gene.hugoGeneSymbol)},visible:!0,order:60}),t.push({name:"Cohort",render:function(t){return e.props.copyNumberCountCache?or.renderFunction(t,e.props.copyNumberCountCache,e.props.gisticData):r.createElement("span",null)},sortBy:function(t){return e.props.copyNumberCountCache?or.getSortValue(t,e.props.copyNumberCountCache):0},download:function(t){return e.props.copyNumberCountCache?or.getDownloadValue(t,e.props.copyNumberCountCache):"N/A"},tooltip:r.createElement("span",null,"Alteration frequency in cohort"),defaultSortDirection:"desc",order:80}),1===n&&this.props.mrnaExprRankMolecularProfileId&&t.push({name:"mRNA Expr.",render:function(t){return e.props.mrnaExprRankCache?$n.a.cnaRenderFunction(t,e.props.mrnaExprRankCache):r.createElement("span",null)},download:function(t){return e.props.mrnaExprRankCache?$n.a.getDownloadData(t,e.props.mrnaExprRankCache):"N/A"},order:70});var i=a.sortBy(t,function(e){return e.order});return r.createElement("div",null,"unavailable"===this.props.status&&r.createElement("div",{className:"alert alert-info",role:"alert"},"Copy Number Alterations are not available."),"available"===this.props.status&&r.createElement(Hr,{columns:i,data:this.props.data,initialSortColumn:"Annotation",initialSortDirection:"desc",initialItemsPerPage:10,itemsLabel:"Copy Number Alteration",itemsLabelPlural:"Copy Number Alterations",showCountHeader:!0,columnVisibility:this.props.columnVisibility,columnVisibilityProps:this.props.columnVisibilityProps}))}},{key:"hugoGeneSymbolToCytoband",get:function(){return this.props.referenceGenes.reduce(function(e,t){return e[t.hugoGeneSymbol]=t.cytoband||"",e},{})}}])&&Dr(n.prototype,o),i&&Dr(n,i),t}();Object.defineProperty(Wr,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{enableOncoKb:!0,enableCivic:!1,showGeneFilterMenu:!0}}),Ur([T.observable],Wr.prototype,"oncokbWidth",void 0),Ur([T.computed],Wr.prototype,"hugoGeneSymbolToCytoband",null);var qr=Wr=Ur([wt.observer],Wr),zr=(n(1272),n(226)),Kr=n(1274),Yr=["SAMPLE_ID","SPECIMEN_REFERENCE_NUMBER","SpecimenReferenceNumber"];function Xr(e,t,n,r,o,i,l){if(0!==i.length){var u=Kr.clinicalTimelineParser(i);if(0!==u.length){var s=window.location.href.includes("genie_bpc");if(s){var p=a.find(u,function(e){return"Status"===e.label||"Med Onc Assessment"==e.label});p&&(p.label="Med Onc Assessment",p.times.forEach(function(e){var t=a.find(e.tooltip_tables[0],function(e){return"STATUS"===e[0]})[1].toLowerCase();t.includes("indeter")?e.color="white":t.includes("stable")?e.color="gainsboro":t.includes("mixed")?e.color="goldenrod":t.includes("improving")?e.color="rgb(44, 160, 44)":t.includes("worsening")&&(e.color="rgb(214, 39, 40)")}));var f=a.find(u,function(e){return"Imaging"===e.label});f&&f.times.forEach(function(e){var t=a.find(e.tooltip_tables[0],function(e){return"IMAGE_OVERALL"===e[0]});(t=t?t[1].toLowerCase():"indeterminate").includes("indeter")||t.includes("does not mention")?e.color="white":t.includes("stable")?e.color="gainsboro":t.includes("mixed")?e.color="goldenrod":t.includes("improving")?e.color="rgb(44, 160, 44)":t.includes("worsening")&&(e.color="rgb(214, 39, 40)")})}var d,m,h=a.find(u,function(e){return"Specimen"===e.label});if(h&&(h.times=a.sortBy(h.times,function(e){var n=1/0,r=a.filter(e.tooltip_tables[0],function(e){return Yr.includes(e[0])});return r&&(r.length>1?console.warn("More than 1 specimen reference number found in tooltip table"):1===r.length&&-1===(n=t.indexOf(r[0][1]))&&(n=1/0)),n})),!window.location.href.includes("mskimpact_test_june"))for(m=Object.keys(n).filter(function(e){return/OS_STATUS$/.test(e)}).map(function(e){return e.substr(0,e.length-"OS_STATUS".length)}),d=0;d<m.length;d++){var y=m[d];if("1:DECEASED"===n[y+"OS_STATUS"]&&y+"OS_MONTHS"in n){var b=Math.round(30.4*parseFloat(n[y+"OS_MONTHS"])),g={starting_time:b,ending_time:b,display:"circle",color:"#000",tooltip_tables:[[["START_DATE",b],["STATUS","DECEASED"]]]},v=u.filter(function(e){return"Status"===e.label})[0];v?v.times=v.times.concat(g):u=u.concat({label:"Status",times:[g]});break}}window.pvTimeline=Kr.clinicalTimeline().width(l).data(u).divId("#timeline").setTimepointsDisplay("Imaging","square").orderTracks(["Specimen","Surgery","Med Onc Assessment","Status","Diagnostics","Diagnostic","Imaging","Lab_test","Treatment"]).splitByClinicalAttributes("Lab_test","TEST"),window.pvTimeline.data().filter(function(e){return"Lab_test"===e.parent_track&&a.every(e.times.map(function(e){return 1===e.tooltip_tables.length&&e.tooltip_tables[0].filter(function(e){return"RESULT"===e[0]}).length>0}))}).map(function(e){return e.label}).forEach(function(e){window.pvTimeline=window.pvTimeline.sizeByClinicalAttribute(e,"RESULT")}),window.pvTimeline=s?window.pvTimeline.orderTracks(["Sample acquisition","Sequencing","Surgery","Med Onc Assessment","Status","Diagnostics","Diagnostic","Imaging","Lab_test","Treatment"]).setTimepointsDisplay("Imaging","circle").splitByClinicalAttributes("Treatment",["TREATMENT_TYPE","AGENT"]).enableTrackTooltips(!1).plugins([{obj:new Kr.trimClinicalTimeline("Trim Timeline"),enabled:!0}]).addPostTimelineHook(function(){c()("circle[id^='timelineItem_2']").attr("stroke","gray"),c()("circle[id^='timelineItem_2']").attr("stroke-width","0.5px"),c()("circle[id^='timelineItem_2']").attr("r","4.5"),c()("circle[id^='timelineItem_3']").attr("stroke","gray"),c()("circle[id^='timelineItem_3']").attr("stroke-width","0.5px"),c()("circle[id^='timelineItem_3']").attr("r","4.5"),c()("circle[id^='timelineItem_4']").attr("stroke","gray"),c()("circle[id^='timelineItem_4']").attr("stroke-width","0.5px"),c()("circle[id^='timelineItem_4']").attr("r","4.5")}.bind(this)):window.pvTimeline.splitByClinicalAttributes("Treatment",["TREATMENT_TYPE","SUBTYPE","AGENT"]).splitByClinicalAttributes("Diagnosis",["SUBTYPE"]).collapseAll().enableTrackTooltips(!1).plugins([{obj:new Kr.trimClinicalTimeline("Trim Timeline"),enabled:!0}]);var w=window.pvTimeline.data().reduce(function(e,t,n){return t.times.length>0&&a.every(t.times.map(function(e){return e.tooltip_tables.length>0&&a.every(e.tooltip_tables.map(function(e){return e.filter(function(e){return Yr.includes(e[0])}).length>0}))}))?a.concat(e,[{label:t.label,index:n,className:".timelineSeries_".concat(n)}]):e},[]);w&&w.length>0&&(w.forEach(function(e){window.pvTimeline.toggleTrackCollapse(e.label)}),window.pvTimeline.addPostTimelineHook(function(e,t,n,r){for(var o=function(e,t){var n=r.label[t],o=r.color[t];e.select("circle").attr("fill",o),e.append("text").attr("y",4).attr("r",6).attr("text-anchor","middle").attr("font-size",10).attr("fill","white").text(n)},a=0;a<t.length;a++){var i=t[a],l=n[i],u=[i],s=l.OTHER_SAMPLE_ID;s&&(u=u.concat(s)),e.forEach(function(e){var t=zr.selectAll(e).filter(function(e){if(1===e.tooltip_tables.length){var t=e.tooltip_tables[0].filter(function(e){return Yr.includes(e[0])})[0];if(t)return-1!==u.indexOf(t[1])}});if(t[0][0]){var n=document.createElementNS("http://www.w3.org/2000/svg","g");null!==t.attr("cx")&&null!==t.attr("cy")&&c()(n).attr("transform","translate("+t.attr("cx")+","+t.attr("cy")+")"),c()(t[0]).removeAttr("cx"),c()(t[0]).removeAttr("cy"),c()(t[0]).removeAttr("style"),c()(t[0]).qtip("destroy"),c()(t[0]).unbind("mouseover mouseout"),c()(t[0]).wrap(n),(n=c()(t[0]).parent()).prop("__data__",c()(t[0]).prop("__data__")),o(zr.select(n.get(0)),i),window.pvTimeline.addDataPointTooltip(n)}})}}.bind(this,w.map(function(e){return e.className}),t,r,o))),window.pvTimeline(),c()("#timeline-container").show()}}}n(1174),n(1175),n(1276);function Zr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qr(e){return(Qr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jr(e,t){return(Jr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function eo(e){return(eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var to=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":eo(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};n(1273);var no=function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,e=!(r=Qr(t).apply(this,arguments))||"object"!==eo(r)&&"function"!=typeof r?$r(n):r,Object.defineProperty($r(e),"currentWidth",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty($r(e),"svgContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jr(e,t)}(t,r["Component"]),n=t,(o=[{key:"shouldComponentUpdate",value:function(e){return e.width!==this.currentWidth&&this.drawTimeline(e.width),!1}},{key:"componentDidMount",value:function(){this.drawTimeline(this.props.width)}},{key:"drawTimeline",value:function(e){var t=this.props.store.patientViewData.result.samples.reduce(function(e,t){return e[t.id]=t.clinicalData.reduce(function(e,t){return e[t.clinicalAttributeId]=t.value,e},{}),e},{}),n=this.props.sampleManager.getSampleIdsInOrder();this.props.store.studyId,this.props.store.patientId;Xr(0,n,this.props.store.patientViewData.result.patient.clinicalData.reduce(function(e,t){return e[t.clinicalAttributeId]=t.value,e},{}),t,{color:this.props.sampleManager.sampleColors,label:this.props.sampleManager.sampleLabels,index:this.props.sampleManager.sampleIndex},this.props.store.clinicalEvents.result.map(function(e){return{eventType:e.eventType,patientId:e.patientId,startDate:a.isUndefined(e.startNumberOfDaysSinceDiagnosis)?null:e.startNumberOfDaysSinceDiagnosis,stopDate:a.isUndefined(e.endNumberOfDaysSinceDiagnosis)?null:e.endNumberOfDaysSinceDiagnosis,eventData:e.attributes.reduce(function(e,t){return e[t.key]=t.value,e},{})}}),e),this.currentWidth=e}},{key:"getSvg",value:function(){return this.svgContainer.firstChild}},{key:"render",value:function(){var e=this;return r.createElement("div",{id:"timeline-container",className:"timelineContainer"},r.createElement("div",{id:"timeline",ref:function(t){e.svgContainer=t}}),r.createElement(g.j,{buttons:["PDF","PNG","SVG"],dataExtension:"tsv",getSvg:this.getSvg,filename:"timeline",dontFade:!0,type:"button",style:{position:"absolute",top:0,right:5}}))}}])&&Zr(n.prototype,o),i&&Zr(n,i),t}();to([H.default],no.prototype,"getSvg",null);var ro=n(16),oo=n(131),ao=n(125);function io(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var lo=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"getComponentForSampleArgs",value:function(e){var t=e.tumorAltCount,n=1,r="";return Object(xt.w)(e.molecularProfileId)&&(t>0?(n=.1,r="Mutation has supporting reads, but wasn't called"):(n=0,r="Mutation has 0 supporting reads and wasn't called")),{opacity:n,extraTooltipText:r}}},{key:"convertMutationToSampleElement",value:function(t,n,o,a){var i=t.tumorAltCount,l=t.tumorRefCount;if(i<0||l<0)return null;var u=i/(i+l),s=(isNaN(u)?0:u)*e.maxBarHeight,c=e.maxBarHeight-s,p=r.createElement("rect",{x:o,y:c,width:e.barWidth,height:s,fill:n}),f="".concat(Object(xt.w)(t.molecularProfileId)?"(uncalled) ":"","(").concat(i," variant reads out of ").concat(i+l," total)"),d=r.createElement("span",null,r.createElement("strong",null,Object(ao.b)(u))," ",f);return{sampleId:t.sampleId,bar:p,component:a,text:d,freq:u}}},{key:"renderFunction",value:function(t,n){if(!n)return r.createElement("span",null);var o=n.getSampleIdsInOrder(),a=o.reduce(function(t,n,r){return t[n]=e.indexToBarLeft(r),t},{}),i=t.map(function(t){var r=e.getComponentForSampleArgs(t);return e.convertMutationToSampleElement(t,n.getColorForSample(t.sampleId),a[t.sampleId],n.getComponentForSample(t.sampleId,r.opacity,r.extraTooltipText))}).reduce(function(e,t){return t&&(e[t.sampleId]=t),e},{}),l=o.map(function(e){return i[e]}).filter(function(e){return!!e}),u=l.map(function(e){return r.createElement("span",{key:e.sampleId},e.component," ",e.text,r.createElement("br",null))}),s=o.map(function(e){return i[e]&&i[e].freq||void 0}),c=l.map(function(e){return e.bar}),p=r.createElement("span",null);if(1===n.samples.length?p=r.createElement("span",null,isNaN(s[0])?"":Object(ao.b)(s[0])):u.length>0&&(p=r.createElement("svg",{width:e.getSVGWidth(o.length),height:e.maxBarHeight},c)),u.length>0&&s.filter(function(e){return void 0!==e}).length>0){p=r.createElement(g.i,{placement:"left",overlay:function(){return r.createElement("span",null,u)},arrowContent:r.createElement("div",{className:"rc-tooltip-arrow-inner"}),destroyTooltipOnHide:!0},p)}return p}},{key:"getSVGWidth",value:function(t){return t*e.barWidth+(t-1)*e.barSpacing}},{key:"getSortValue",value:function(t,n){if(!n)return[null];var r=t.reduce(function(e,t){return e[t.sampleId]=t,e},{});return n.getSampleIdsInOrder().map(function(e){return r[e]}).map(function(t){return e.calcFrequency(t)||null})}},{key:"isVisible",value:function(e,t){if(t){var n=!0,r=!1,o=void 0;try{for(var i,l=t[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var u=i.value,s=this.getSortValue(u,e);if(a.compact(s).length>0)return!0}}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}}return!1}},{key:"getFrequency",value:function(t){var n=[];if(t){var r=!0,o=!1,a=void 0;try{for(var i,l=t[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var u=i.value,s=e.calcFrequency(u),c=null===s?"":String(s);n.push(c)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}}return 1===n.length?n[0]:n}},{key:"calcFrequency",value:function(e){if(!e)return null;var t=e.tumorAltCount,n=e.tumorRefCount;return t<0||n<0?null:t/(t+n)}}],(n=null)&&io(t.prototype,n),o&&io(t,o),e}();Object.defineProperty(lo,"barWidth",{enumerable:!0,configurable:!0,writable:!0,value:6}),Object.defineProperty(lo,"barSpacing",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(lo,"maxBarHeight",{enumerable:!0,configurable:!0,writable:!0,value:12}),Object.defineProperty(lo,"indexToBarLeft",{enumerable:!0,configurable:!0,writable:!0,value:function(e){return e*(lo.barWidth+lo.barSpacing)}});var uo=n(187),so=n(428),co=n(255),po=n(65),fo=n(256),mo=n(348);function ho(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bo(e,t,n){return(bo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=go(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function go(e){return(go=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vo(e,t){return(vo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wo(e){return(wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var So=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":wo(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},Oo=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=go(t).call(this,e))||"object"!==wo(o)&&"function"!=typeof o?yo(r):o,Object(T.makeObservable)(yo(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vo(e,t)}(t,ro["b"]),n=t,(o=[{key:"getSamples",value:function(){return this.props.sampleIds?this.props.sampleIds:[]}},{key:"generateColumns",value:function(){var e=this;bo(go(t.prototype),"generateColumns",this).call(this),this._columns[ro.a.TUMOR_ALLELE_FREQ]={name:"Allele Freq",render:function(t){return lo.renderFunction(t,e.props.sampleManager)},sortBy:function(t){return lo.getSortValue(t,e.props.sampleManager)},download:function(e){return lo.getFrequency(e)},tooltip:r.createElement("span",null,"Variant allele frequency in the tumor sample"),visible:lo.isVisible(this.props.sampleManager,this.props.dataStore?this.props.dataStore.allData:this.props.data)},this._columns[ro.a.SAMPLES]={name:"Samples",render:function(t){return Wt.renderFunction(t,e.props.sampleManager,e.props.sampleToGenePanelId,e.props.genePanelIdToEntrezGeneIds,e.props.onSelectGenePanel,e.props.disableTooltip)},sortBy:function(t){return Wt.getSortValue(t,e.props.sampleManager)},download:function(e){return Wt.getSample(e)},resizable:!0};var n=function(t){return{data:t,sampleToGenePanelId:e.props.sampleToGenePanelId,sampleManager:e.props.sampleManager,genePanelIdToGene:e.props.genePanelIdToEntrezGeneIds,onSelectGenePanel:e.props.onSelectGenePanel}};this._columns[ro.a.GENE_PANEL]={name:"Gene panel",render:function(e){return Ar.renderFunction(n(e))},download:function(e){return Ar.download(n(e))},visible:!1,sortBy:function(e){return Ar.getGenePanelIds(n(e))}},this._columns[ro.a.CANCER_CELL_FRACTION]=Object(co.b)(this.getSamples(),this.props.sampleManager),this._columns[ro.a.CLONAL]=Object(po.c)(this.getSamples(),this.props.sampleManager),this._columns[ro.a.EXPECTED_ALT_COPIES]=Object(fo.a)(this.getSamples(),this.props.sampleManager),this._columns[ro.a.ASCN_COPY_NUM]=Object(so.a)(this.getSamples(),this.props.sampleIdToClinicalDataMap,this.props.sampleManager),this._columns[ro.a.REF_READS_N].render=function(t){return oo.a.renderFunction(t,e.getSamples(),"normalRefCount")},this._columns[ro.a.REF_READS_N].download=function(e){return oo.a.getReads(e,"normalRefCount")},this._columns[ro.a.VAR_READS_N].render=function(t){return oo.a.renderFunction(t,e.getSamples(),"normalAltCount")},this._columns[ro.a.VAR_READS_N].download=function(e){return oo.a.getReads(e,"normalAltCount")},this._columns[ro.a.REF_READS].render=function(t){return oo.a.renderFunction(t,e.getSamples(),"tumorRefCount")},this._columns[ro.a.REF_READS].download=function(e){return oo.a.getReads(e,"tumorRefCount")},this._columns[ro.a.VAR_READS].render=function(t){return oo.a.renderFunction(t,e.getSamples(),"tumorAltCount")},this._columns[ro.a.VAR_READS].download=function(e){return oo.a.getReads(e,"tumorAltCount")},this._columns[ro.a.EXON].sortBy=void 0,this._columns[ro.a.EXON].render=function(t){return uo.a.renderFunction(t,e.props.genomeNexusCache,!0)},this._columns[ro.a.GENE].headerRender=function(t){return r.createElement(vr,{name:t,showIcon:e.props.showGeneFilterMenu},r.createElement(kt,{onOptionChanged:e.props.onFilterGenes,currentSelection:e.props.currentGeneFilter}))},this._columns[ro.a.ANNOTATION].headerRender=function(t){return r.createElement(ur.a,{name:t,width:e.oncokbWidth})},this._columns[ro.a.SAMPLES].order=5,this._columns[ro.a.GENE].order=20,this._columns[ro.a.GENE_PANEL].order=25,this._columns[ro.a.PROTEIN_CHANGE].order=30,this._columns[ro.a.ANNOTATION].order=35,this._columns[ro.a.FUNCTIONAL_IMPACT].order=38,this._columns[ro.a.CHROMOSOME].order=40,this._columns[ro.a.START_POS].order=50,this._columns[ro.a.END_POS].order=60,this._columns[ro.a.REF_ALLELE].order=70,this._columns[ro.a.VAR_ALLELE].order=80,this._columns[ro.a.HGVSG].order=81,this._columns[ro.a.HGVSC].order=82,this._columns[ro.a.MUTATION_STATUS].order=90,this._columns[ro.a.VALIDATION_STATUS].order=100,this._columns[ro.a.MUTATION_TYPE].order=110,this._columns[ro.a.VARIANT_TYPE].order=114,this._columns[ro.a.ASCN_METHOD].order=115,this._columns[ro.a.CLONAL].order=116,this._columns[ro.a.CANCER_CELL_FRACTION].order=117,this._columns[ro.a.EXPECTED_ALT_COPIES].order=118,this._columns[ro.a.ASCN_COPY_NUM].order=119,this._columns[ro.a.CENTER].order=120,this._columns[ro.a.TUMOR_ALLELE_FREQ].order=130,this._columns[ro.a.VAR_READS].order=140,this._columns[ro.a.REF_READS].order=150,this._columns[ro.a.VAR_READS_N].order=170,this._columns[ro.a.REF_READS_N].order=175,this._columns[ro.a.COPY_NUM].order=177,this._columns[ro.a.MRNA_EXPR].order=182,this._columns[ro.a.COHORT].order=183,this._columns[ro.a.COSMIC].order=184,this._columns[ro.a.EXON].order=185,this._columns[ro.a.GNOMAD].order=187,this._columns[ro.a.CLINVAR].order=188,this._columns[ro.a.DBSNP].order=189,this._columns[ro.a.SIGNAL].order=190,this._columns[ro.a.MRNA_EXPR].shouldExclude=function(){return!e.props.mrnaExprRankMolecularProfileId||e.getSamples().length>1},this._columns[ro.a.CLONAL].shouldExclude=function(){return!e.props.existsSomeMutationWithAscnProperty[mo.a.CCF_EXPECTED_COPIES_STRING]},this._columns[ro.a.ASCN_METHOD].shouldExclude=function(){return!e.props.existsSomeMutationWithAscnProperty[mo.a.ASCN_METHOD_STRING]},this._columns[ro.a.CANCER_CELL_FRACTION].shouldExclude=function(){return!e.props.existsSomeMutationWithAscnProperty[mo.a.CCF_EXPECTED_COPIES_STRING]},this._columns[ro.a.EXPECTED_ALT_COPIES].shouldExclude=function(){return!e.props.existsSomeMutationWithAscnProperty[mo.a.EXPECTED_ALT_COPIES_STRING]},this._columns[ro.a.ASCN_COPY_NUM].shouldExclude=function(){return!e.props.existsSomeMutationWithAscnProperty[mo.a.ASCN_INTEGER_COPY_NUMBER_STRING]||!e.props.existsSomeMutationWithAscnProperty[mo.a.TOTAL_COPY_NUMBER_STRING]||!e.props.existsSomeMutationWithAscnProperty[mo.a.MINOR_COPY_NUMBER_STRING]},this._columns[ro.a.SAMPLES].shouldExclude=function(){return e.getSamples().length<2&&!e.hasUncalledMutations},this._columns[ro.a.COPY_NUM].shouldExclude=function(){return!e.props.discreteCNAMolecularProfileId||e.getSamples().length>1}}},{key:"hasUncalledMutations",get:function(){var e=[];return this.props.data?e=this.props.data:this.props.dataStore&&(e=this.props.dataStore.allData),e.some(function(e){return e.some(function(e){return Object(xt.w)(e.molecularProfileId)})})}}])&&ho(n.prototype,o),a&&ho(n,a),t}();Object.defineProperty(Oo,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign(Object.assign({},ro.b.defaultProps),{initialItemsPerPage:10,paginationProps:{itemsPerPageOptions:[10,25,50,100]},showGeneFilterMenu:!0,columns:[ro.a.COHORT,ro.a.MRNA_EXPR,ro.a.COPY_NUM,ro.a.ASCN_METHOD,ro.a.ASCN_COPY_NUM,ro.a.ANNOTATION,ro.a.HGVSG,ro.a.REF_READS_N,ro.a.VAR_READS_N,ro.a.REF_READS,ro.a.VAR_READS,ro.a.START_POS,ro.a.END_POS,ro.a.REF_ALLELE,ro.a.VAR_ALLELE,ro.a.MUTATION_STATUS,ro.a.VALIDATION_STATUS,ro.a.CENTER,ro.a.GENE,ro.a.CHROMOSOME,ro.a.PROTEIN_CHANGE,ro.a.MUTATION_TYPE,ro.a.VARIANT_TYPE,ro.a.CLONAL,ro.a.CANCER_CELL_FRACTION,ro.a.EXPECTED_ALT_COPIES,ro.a.FUNCTIONAL_IMPACT,ro.a.COSMIC,ro.a.TUMOR_ALLELE_FREQ,ro.a.SAMPLES,ro.a.EXON,ro.a.HGVSC,ro.a.GNOMAD,ro.a.CLINVAR,ro.a.DBSNP,ro.a.GENE_PANEL,ro.a.SIGNAL]})}),So([T.computed],Oo.prototype,"hasUncalledMutations",null);var Eo=n(940);function Po(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function To(e){return(To=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Co(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Io(e,t){return(Io=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _o(e){return(_o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ko=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":_o(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},xo=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=To(t).call(this,e))||"object"!==_o(o)&&"function"!=typeof o?Co(r):o,Object.defineProperty(Co(n),"pdfSelectList",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(Co(n),"pdfEmbed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n.state={pdfUrl:n.buildPDFUrl(e.pdfs[0].url)},n.handleSelection=n.handleSelection.bind(Co(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Io(e,t)}(t,r["Component"]),n=t,(o=[{key:"buildPDFUrl",value:function(e){return"https://docs.google.com/viewerng/viewer?url=".concat(e,"?pid=explorer&efh=false&a=v&chrome=false&embedded=true")}},{key:"handleSelection",value:function(){this.setState({pdfUrl:this.buildPDFUrl(this.pdfSelectList.options[this.pdfSelectList.selectedIndex].value)})}},{key:"render",value:function(){var e=this;return r.createElement("div",null,r.createElement(l.If,{condition:this.props.pdfs.length>1},r.createElement("select",{ref:function(t){return e.pdfSelectList=t},style:{marginBottom:15},onChange:this.handleSelection},a.map(this.props.pdfs,function(e){return r.createElement("option",{value:e.url},e.name)}))),r.createElement(Eo.a,{height:this.props.iframeHeight,url:this.state.pdfUrl}))}}])&&Po(n.prototype,o),i&&Po(n,i),t}(),jo=xo=ko([wt.observer],xo),Mo=n(804),Ao=n(1277);function Do(e){return function(e,t){var n=a.reduce(e,function(e,t,n){return t&&t.length>0&&(e[n]=t),e},{});try{return Object(Ao.validate)(n,t),{isValid:!0,message:null}}catch(e){return{isValid:!1,message:e.message}}}(e,["studyId",["sampleId","caseId"]])}var Ro=n(72);function No(e){return(No="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Go(e,t){return!t||"object"!==No(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vo(e){return(Vo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fo(e,t){return(Fo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Bo=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Go(this,Vo(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fo(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement("div",{className:"alert alert-danger urlError",role:"alert"},r.createElement("i",{className:"fa fa-warning","aria-hidden":"true"}),r.createElement("h3",null,"The URL is invalid"),r.createElement("ul",null,this.props.urlValidationError.split(".").map(function(e){return e.length>0?r.createElement("li",null,e):null})))}}])&&Lo(n.prototype,o),a&&Lo(n,a),t}(),Uo=n(174);function Ho(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Wo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qo(e){return(qo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ko(e,t){return(Ko=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yo(e){return(Yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Xo=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Yo(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};function Zo(e,t){return e[0].proteinChange===t.proteinChange&&e[0].gene.hugoGeneSymbol===t.gene.hugoGeneSymbol}function Qo(e){return'{ "proteinChange": "'.concat(e.proteinChange,'", "hugoGeneSymbol": "').concat(e.gene.hugoGeneSymbol,'" }')}var $o=function(e){function t(e,n){var r,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,a=qo(t).call(this,e),r=!a||"object"!==Yo(a)&&"function"!=typeof a?zo(o):a,Object.defineProperty(zo(r),"urlWrapper",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(zo(r),"mouseOverMutation",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(zo(r),"selectedMutationsMap",{enumerable:!0,configurable:!0,writable:!0,value:T.observable.map()}),Object.defineProperty(zo(r),"getSortedFilteredData",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e=r.filterString.toUpperCase(),t=r.filterString.toLowerCase();return r.sortedData.filter(function(n){var o=r.dataFilter(n,r.filterString,e,t),a=!r.onlyShowSelectedInTable||0===r.selectedMutations.length||i.a.some(r.selectedMutations,function(e){return Zo(n,e)});return o&&a})}}),Object(T.makeObservable)(zo(r)),r.dataHighlighter=function(e){var t=[];return r.onlyShowSelectedInTable||t.push.apply(t,Ho(r.selectedMutations)),r.mouseOverMutation&&t.push(r.mouseOverMutation),i.a.some(t,function(t){return Zo(e,t)})},r}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ko(e,t)}(t,Uo["a"]),n=t,(r=[{key:"setMouseOverMutation",value:function(e){this.mouseOverMutation=e}},{key:"setOnlyShowSelectedInTable",value:function(e){this.urlWrapper.updateURL(function(t){return t.genomicEvolutionSettings.showOnlySelectedMutationsInTable=e.toString(),t})}},{key:"setOnlyShowSelectedInVAFChart",value:function(e){this.urlWrapper.updateURL(function(t){return t.genomicEvolutionSettings.showOnlySelectedMutationsInChart=e.toString(),t})}},{key:"toggleSelectedMutation",value:function(e){var t=Qo(e);this.selectedMutationsMap.has(t)?this.selectedMutationsMap.delete(t):this.selectedMutationsMap.set(t,e)}},{key:"setSelectedMutations",value:function(e){this.selectedMutationsMap.clear();var t=!0,n=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value;this.toggleSelectedMutation(i),1}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"isMutationSelected",value:function(e){return this.selectedMutationsMap.has(Qo(e))}},{key:"onlyShowSelectedInTable",get:function(){return"true"===this.urlWrapper.query.genomicEvolutionSettings.showOnlySelectedMutationsInTable}},{key:"onlyShowSelectedInVAFChart",get:function(){return"true"===this.urlWrapper.query.genomicEvolutionSettings.showOnlySelectedMutationsInChart}},{key:"selectedMutations",get:function(){return Array.from(this.selectedMutationsMap.values())}}])&&Wo(n.prototype,r),o&&Wo(n,o),t}();Xo([T.observable],$o.prototype,"mouseOverMutation",void 0),Xo([T.action],$o.prototype,"setMouseOverMutation",null),Xo([T.action],$o.prototype,"setOnlyShowSelectedInTable",null),Xo([T.action],$o.prototype,"setOnlyShowSelectedInVAFChart",null),Xo([T.action],$o.prototype,"toggleSelectedMutation",null),Xo([T.action],$o.prototype,"setSelectedMutations",null),Xo([T.computed],$o.prototype,"selectedMutations",null);n(1278);var Jo=n(329),ea=n(330),ta=n(987),na=n(825),ra=n(220),oa=n(1279),aa=n.n(oa);function ia(e){return(ia="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function la(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ua(e,t){return!t||"object"!==ia(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function sa(e){return(sa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ca(e,t){return(ca=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pa=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ua(this,sa(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ca(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e="";if(this.props.show)if(!a.isUndefined(this.props.isTrialFeedback)&&this.props.isTrialFeedback){var t="https://docs.google.com/forms/d/e/1FAIpQLSfcoLRG0iWO_qUb4hfzWFQ1toP575EKCTwqPcXE9DmMzuS34w/viewform",n="entry.1655318994=".concat(this.props.userEmailAddress||""),o="entry.1782078941=".concat(encodeURIComponent(window.location.href));if(e="".concat(t,"?").concat(n,"&").concat(o,"&embedded=true"),!a.isUndefined(this.props.data)){var i="entry.1070287537=".concat(this.props.data.nctId||""),l="entry.699867040=".concat(this.props.data.protocolNo||"");e="".concat(t,"?").concat(n,"&").concat(o,"&").concat(i,"&").concat(l,"&embedded=true")}}else{var u="entry.251841421=".concat(this.props.userEmailAddress||""),s="entry.1295500928=".concat(encodeURIComponent(window.location.href));e="".concat("https://docs.google.com/forms/d/e/1FAIpQLSes1WuMattmo_aT8-34LaPRTC47vVzvdWMgYZ5tSuw8EHoLZw/viewform","?").concat(u,"&").concat(s,"&embedded=true")}return r.createElement(vt.Modal,{show:this.props.show,onHide:this.props.onHide},r.createElement(vt.Modal.Header,{closeButton:!0},r.createElement(vt.Modal.Title,null,this.props.title)),r.createElement(vt.Modal.Body,null,r.createElement("iframe",{src:e,style:{width:550,height:700,border:"none",marginLeft:"10px"},marginHeight:0,marginWidth:0},r.createElement("i",{className:"fa fa-spinner fa-pulse fa-2x"}))))}}])&&la(n.prototype,o),i&&la(n,i),t}();function fa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function da(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ma(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ha(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ya(e,t){return!t||"object"!==Sa(t)&&"function"!=typeof t?ba(e):t}function ba(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ga(e){return(ga=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function va(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wa(e,t)}function wa(e,t){return(wa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Sa(e){return(Sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Oa,Ea,Pa,Ta=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Sa(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};!function(e){e.TITLE="Title",e.MATCHING_CRITERIA="Matching Criteria",e.STATUS="Status"}(Oa||(Oa={})),function(e){e[e.STATUS=140]="STATUS"}(Ea||(Ea={})),function(e){e.MUTATION="Mutation",e.CNA="Copy Number Alteration",e.MSI="Microsatellite Instability",e.WILDTYPE="Wildtype"}(Pa||(Pa={}));var Ca=function(e){function t(){return ha(this,t),ya(this,ga(t).apply(this,arguments))}return va(t,G["b"]),t}(),Ia=function(e){function t(e){var o;return ha(this,t),o=ya(this,ga(t).call(this,e)),Object.defineProperty(ba(o),"selectedTrialFeedbackFormData",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(ba(o),"showGeneralFeedback",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(ba(o),"_columns",{enumerable:!0,configurable:!0,writable:!0,value:[{name:Oa.TITLE,render:function(e){return r.createElement("div",null,r.createElement(l.If,{condition:e.protocolNo.length>0},r.createElement("div",null,r.createElement("a",{target:"_blank",href:"https://www.mskcc.org/cancer-care/clinical-trials/"+e.protocolNo},e.protocolNo))),r.createElement(l.If,{condition:e.nctId.length>0},r.createElement("div",null,r.createElement("a",{target:"_blank",href:"https://clinicaltrials.gov/ct2/show/"+e.nctId},e.nctId))),r.createElement("div",null,e.shortTitle),e.principalInvestigator&&r.createElement("div",{className:aa.a.icon},r.createElement("i",{className:"fa fa-user-md ".concat(aa.a.marginRight),"aria-hidden":"true"}),r.createElement(l.If,{condition:!a.isUndefined(e.principalInvestigator.url)},r.createElement(l.Then,null,r.createElement("a",{target:"_blank",href:e.principalInvestigator.url},e.principalInvestigator.full_name)),r.createElement(l.Else,null,e.principalInvestigator.full_name)),r.createElement(l.If,{condition:!a.isUndefined(e.principalInvestigator.email)},r.createElement("a",{href:"mailto:"+e.principalInvestigator.email},r.createElement("i",{className:"fa fa-envelope-o ".concat(aa.a.marginLeft),"aria-hidden":"true"})))))},width:o.columnWidths[Oa.TITLE]},{name:Oa.MATCHING_CRITERIA,render:function(e){return r.createElement("div",null,e.matches.map(function(t,a){return r.createElement("div",null,r.createElement("div",{className:aa.a.matchInfoContainer},r.createElement("div",{className:aa.a.genomicInfoContainer},r.createElement("div",null,t.matches.map(function(e,n){return r.createElement("div",{className:aa.a.criteriaContainer},r.createElement(l.If,{condition:e.matches||e.notMatches},r.createElement("div",{className:aa.a.firstLeft},e.matches&&o.getGenomicMatch(e.matches),e.notMatches&&o.getGenomicNotMatch(e.notMatches))),o.getClinicalMatch(e),r.createElement(l.If,{condition:n<t.matches.length-1},r.createElement("hr",{className:aa.a.criteriaHr})))})),r.createElement("div",{style:{marginTop:5}},r.createElement("span",null,"Matched Samples:"," ",o.getSampleIdIcons(t.sampleIds))),r.createElement(l.If,{condition:""!==t.armDescription},r.createElement("div",{style:{width:"75%"}},r.createElement("span",null,"Arm: ",t.armDescription))),r.createElement(l.If,{condition:t.drugs.length>0},r.createElement("div",null,r.createElement("span",null,r.createElement("img",{src:n(1280),style:{width:18,marginTop:-5,marginRight:5},alt:"drug icon"}),r.createElement("b",null,t.drugs.map(function(e){return e.join(" + ")}).join(", "))))))),r.createElement(l.If,{condition:a<e.matches.length-1},r.createElement("hr",{className:aa.a.criteriaHr})))}))},width:o.columnWidths[Oa.MATCHING_CRITERIA]},{name:Oa.STATUS,render:function(e){return r.createElement("div",{className:aa.a.statusContainer},r.createElement("a",{target:"_blank",href:"https://www.mskcc.org/cancer-care/clinical-trials/"+e.protocolNo},r.createElement("span",{className:aa.a.statusBackground},e.status)),r.createElement("span",{className:aa.a.feedback},r.createElement(vt.Button,{type:"button",className:"btn btn-default btn-sm btn-xs "+aa.a.feedbackButton,onClick:function(){return o.openCloseFeedbackForm({nctId:e.nctId,protocolNo:e.protocolNo})}},"Feedback")))},sortBy:function(e){return e.status},width:o.columnWidths[Oa.STATUS]}]}),Object(T.makeObservable)(ba(o)),o}var o,i,u;return va(t,r["Component"]),o=t,(i=[{key:"getSampleIdIcons",value:function(e){var t=this,n=e;e.length>1&&(n=this.props.sampleManager.getSampleIdsInOrder().filter(function(t){return e.includes(t)}));return r.createElement(r.Fragment,null,n.map(function(e){return r.createElement("span",{className:aa.a.genomicSpan},t.props.sampleManager.getComponentForSample(e,1,""))}))}},{key:"getClinicalMatch",value:function(e){return r.createElement("div",{className:aa.a.firstRight,style:e.matches||e.notMatches?{}:{width:"100%"}},r.createElement("span",{className:aa.a.secondLeft},function(e){if(e.length>1){var t=e.map(function(e){return e.match(/\d+(\.?\d+)?/g).map(function(e){return Number(e)})});if(2===e.length){var n="",r="";return e[0].includes(">")&&e[1].includes("<")?(n=e[0].includes("=")?"".concat(t[0]," ≤"):"".concat(t[0]," <"),r=e[1].includes("=")?"≤ ".concat(t[1]):"< ".concat(t[1]),"".concat(n," Age ").concat(r)):e[0].includes("<")&&e[1].includes(">")?(n=e[1].includes("=")?"".concat(t[1]," ≤"):"".concat(t[1]," <"),r=e[0].includes("=")?"≤ ".concat(t[0]):"< ".concat(t[0]),"".concat(n," Age ").concat(r)):"Age: ".concat(e.join(", "))}return"Age: ".concat(e.join(", "))}return"".concat(e[0]," yrs old")}(e.trialAgeNumerical)),r.createElement("span",{className:aa.a.secondRight},e.trialOncotreePrimaryDiagnosis.positive.join(", "),e.trialOncotreePrimaryDiagnosis.negative.length>0&&r.createElement("span",null,r.createElement("b",null," except "),r.createElement(l.If,{condition:e.trialOncotreePrimaryDiagnosis.negative.length<4},r.createElement(l.Then,null,r.createElement("span",null,e.trialOncotreePrimaryDiagnosis.negative.join(", ").replace(/,(?!.*,)/gim," and"))),r.createElement(l.Else,null,r.createElement(g.i,{placement:"bottomLeft",trigger:["hover","focus"],overlay:this.tooltipClinicalContent(e.trialOncotreePrimaryDiagnosis.negative),destroyTooltipOnHide:!0,onPopupAlign:g.tb},r.createElement("span",null,e.trialOncotreePrimaryDiagnosis.negative.length+" cancer types")))))))}},{key:"openCloseFeedbackForm",value:function(e){this.selectedTrialFeedbackFormData=e}},{key:"getGenomicMatch",value:function(e){var t=this;return r.createElement(r.Fragment,null,e.MUTATION.map(function(e){return r.createElement("div",null,r.createElement("span",{style:{marginRight:5}},r.createElement("b",null,e.patientGenomic.trueHugoSymbol," "),e.patientGenomic.trueProteinChange.join(", ")),r.createElement(g.i,{placement:"bottomLeft",trigger:["hover","focus"],overlay:t.tooltipGenomicContent(e.genomicAlteration),destroyTooltipOnHide:!1,onPopupAlign:g.tb},r.createElement("i",{className:"fa fa-info-circle "+aa.a.icon})))}),e.MSI.length>0&&r.createElement("div",null,"Tumor is ",r.createElement("b",null,"MSI-H")),e.CNA.map(function(e){return r.createElement("div",null,t.getGenomicAlteration(e.genomicAlteration))}),e.WILDTYPE.map(function(e){return r.createElement("div",null,t.getGenomicAlteration(e.genomicAlteration))}))}},{key:"getGenomicNotMatch",value:function(e){var t=[];return e.MUTATION.length>0&&(t=e.MUTATION[0].genomicAlteration),e.CNA.length>0&&(t=t.concat(e.CNA[0].genomicAlteration)),r.createElement(r.Fragment,null,t.length>0&&r.createElement("div",null,r.createElement("span",{className:aa.a.genomicSpan},this.getDescriptionForNotMatches(t,3,Pa.MUTATION)),r.createElement(g.i,{placement:"bottomLeft",trigger:["hover","focus"],overlay:this.tooltipGenomicContent(t),destroyTooltipOnHide:!1,onPopupAlign:g.tb},r.createElement("i",{className:"fa fa-info-circle "+aa.a.icon}))),e.MSI.length>0&&r.createElement("div",null,"Tumor is ",r.createElement("b",null,"not MSI-H")),e.WILDTYPE.length>0&&r.createElement("div",null,r.createElement("span",{className:aa.a.genomicSpan},this.getDescriptionForNotMatches(e.WILDTYPE[0].genomicAlteration,3,Pa.WILDTYPE)),r.createElement(g.i,{placement:"bottomLeft",trigger:["hover","focus"],overlay:this.tooltipGenomicContent(e.WILDTYPE[0].genomicAlteration),destroyTooltipOnHide:!1,onPopupAlign:g.tb},r.createElement("i",{className:"fa fa-info-circle "+aa.a.icon}))))}},{key:"getGenomicAlteration",value:function(e){var t=e.map(function(e){return e.split(" ")});return r.createElement("div",null,t.map(function(e){return r.createElement("div",null,r.createElement("b",null,e[0])," ",e[1])}))}},{key:"tooltipGenomicContent",value:function(e){return r.createElement("div",{className:aa.a.tooltip},r.createElement("div",null,"Genomic selection"," ",e.length>1?"criteria":"criterion"," specified in the trial:"),e.map(function(e){return r.createElement("div",{className:aa.a.genomicSpan},r.createElement(l.If,{condition:e.includes("!")},r.createElement(l.Then,null,r.createElement("b",null,"Not "),e.replace(/!/g,"")),r.createElement(l.Else,null,e)))}))}},{key:"tooltipClinicalContent",value:function(e){return r.createElement("div",{className:aa.a.tooltip},r.createElement("ul",{className:aa.a.alterationUl},e.map(function(e){return r.createElement("li",null,e)})))}},{key:"getDescriptionForNotMatches",value:function(e,t,n){var r=new Set(da(e).map(function(e){return e.split(" ")[0]})),o="";return n===Pa.MUTATION?1===r.size?(o=da(r).join(", ")+" "+da(e).map(function(e){return e.split(" ")[1].replace(/!/g,"")}).join(", "),"Negative for ".concat(o)):(o=r.size<=t?da(r).join(", "):"".concat(r.size," genes"),"Negative for alterations in ".concat(o)):n===Pa.WILDTYPE?(o=r.size<=t?da(r).join(", "):"".concat(r.size," genes"),"Tumor doesn't have ".concat(o," defined by the trial")):""}},{key:"render",value:function(){var e=this;return r.createElement("div",null,r.createElement("p",{style:{marginBottom:"0"}},"Curated genomic and clinical criteria from open clinical trials at Memorial Sloan Kettering. Please"," ",r.createElement("a",{href:"mailto:team@oncokb.org"},"contact us")," or submit"," ",r.createElement("a",{onClick:function(){return e.showGeneralFeedback=!0}},"feedback form")," ","if you have any questions."),!a.isUndefined(this.showGeneralFeedback)&&r.createElement(pa,{show:this.showGeneralFeedback,onHide:function(){return e.showGeneralFeedback=!1},title:"OncoKB Matched Trials General Feedback",userEmailAddress:at.b.serverConfig.user_email_address}),this.selectedTrialFeedbackFormData&&r.createElement(pa,{show:!!this.selectedTrialFeedbackFormData,data:this.selectedTrialFeedbackFormData,onHide:function(){return e.openCloseFeedbackForm()},isTrialFeedback:!0,title:"OncoKB Matched Trial Feedback",userEmailAddress:at.b.serverConfig.user_email_address}),r.createElement(Ca,{data:this.props.detailedTrialMatches,columns:this._columns,showCopyDownload:!1}),r.createElement("div",{className:aa.a.powered},"Powered by"," ",r.createElement("a",{href:"https://oncokb.org/",target:"_blank"},"OncoKB")," ","&"," ",r.createElement("a",{href:"https://matchminer.org/",target:"_blank"},"MatchMiner")))}},{key:"columnWidths",get:function(){var e;return fa(e={},Oa.STATUS,Ea.STATUS),fa(e,Oa.TITLE,.35*(this.props.containerWidth-Ea.STATUS)),fa(e,Oa.MATCHING_CRITERIA,.65*(this.props.containerWidth-Ea.STATUS)),e}}])&&ma(o.prototype,i),u&&ma(o,u),t}();Ta([T.computed],Ia.prototype,"columnWidths",null),Ta([T.observable],Ia.prototype,"selectedTrialFeedbackFormData",void 0),Ta([T.observable],Ia.prototype,"showGeneralFeedback",void 0),Ta([T.action],Ia.prototype,"openCloseFeedbackForm",null);var _a=Ia=Ta([wt.observer],Ia),ka=(n(459),n(941),n(942),n(109)),xa=n(344),ja=n(208),Ma=n(310);function Aa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Da(e){return(Da=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ra(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Na(e,t){return(Na=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function La(e){return(La="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ga=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":La(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},Va=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=Da(t).call(this,e,{studyId:{isSessionProp:!1},caseId:{isSessionProp:!1},sampleId:{isSessionProp:!1},resourceUrl:{isSessionProp:!1},genomicEvolutionSettings:{isSessionProp:!1,nestedObjectProps:{showTimeline:"",clusterHeatmap:"",transposeHeatmap:"",showMutationLabelsInHeatmap:"",showOnlySelectedMutationsInChart:"",logScaleChart:"",yAxisDataRangeInChart:"",showOnlySelectedMutationsInTable:""}}}))||"object"!==La(o)&&"function"!=typeof o?Ra(r):o,Object(T.makeObservable)(Ra(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Na(e,t)}(t,xa["a"]),n=t,(r=[{key:"setActiveTab",value:function(e){this.updateURL({},"".concat(ja.a.Patient,"/").concat(e))}},{key:"setResourceUrl",value:function(e){this.updateURL({resourceUrl:e})}},{key:"activeTabId",get:function(){return this.pathName.split("/").pop()||Ma.a.Summary}}])&&Aa(n.prototype,r),o&&Aa(n,o),t}();Ga([T.computed],Va.prototype,"activeTabId",null);var Fa,Ba=n(118),Ua=n(867),Ha=n(94);function Wa(e,t){var n;function o(e){return"".concat(e.variantReadCount," reads of ").concat(e.totalReadCount," total")}var a=null;if(t){var i;switch(t.mutationStatus){case Fa.MUTATED_WITH_VAF:i="VAF: ".concat(t.vafReport.vaf.toFixed(2)," (").concat(o(t.vafReport),")");break;case Fa.MUTATED_BUT_NO_VAF:i="Mutated, but we don't have VAF data.";break;case Fa.PROFILED_WITH_READS_BUT_UNCALLED:case Fa.PROFILED_BUT_NOT_MUTATED:i="Mutation not detected (VAF: ".concat(((null===(n=t.vafReport)||void 0===n?void 0:n.vaf)||0).toFixed(2)," (").concat(o(t.vafReport),"))");break;case Fa.NOT_PROFILED:default:i="".concat(t.sampleId," is not sequenced for ").concat(e.gene.hugoGeneSymbol," mutations.")}a=[r.createElement("span",null,"Sample ID: ",t.sampleId),r.createElement("br",null),r.createElement("span",null,i)]}return r.createElement("div",null,r.createElement("span",null,"Gene: ",e.gene.hugoGeneSymbol),r.createElement("br",null),r.createElement("span",null,"Protein Change: ",e.proteinChange),r.createElement("br",null),a)}!function(e){e[e.MUTATED_WITH_VAF=0]="MUTATED_WITH_VAF",e[e.MUTATED_BUT_NO_VAF=1]="MUTATED_BUT_NO_VAF",e[e.PROFILED_WITH_READS_BUT_UNCALLED=2]="PROFILED_WITH_READS_BUT_UNCALLED",e[e.PROFILED_BUT_NOT_MUTATED=3]="PROFILED_BUT_NOT_MUTATED",e[e.NOT_PROFILED=4]="NOT_PROFILED"}(Fa||(Fa={}));var qa=[{type:"rectangle",fill:[255,255,255,1],z:1e3},{type:"line",stroke:[190,190,190,1],"stroke-width":1,x1:20,x2:80,y1:50,y2:50,z:1e3}];function za(e){return"".concat(e.gene.hugoGeneSymbol," ").concat(e.proteinChange)}function Ka(e,t,n,r){var o=i.a.keyBy(t,C.U),a=i.a.groupBy(t,function(e){return e.uniqueSampleKey}),l=i.a.mapValues(o,function(){return!1}),u=[],s=!0,c=!1,p=void 0;try{for(var f,d=function(){var e=f.value,t=a[e.uniqueSampleKey]||[],i={},s=!0,c=!1,p=void 0;try{for(var d,m=t[Symbol.iterator]();!(s=(d=m.next()).done);s=!0){var h=d.value,y=Object(C.U)(h),b=r===ui.SAMPLE_TRACKS?y:e.sampleId,g="uncalled"===h.mutationStatus.toLowerCase();if(!g||h.tumorAltCount>0){i[y]=!0;var v=Object(xt.q)(h),w=void 0;g?w=Fa.PROFILED_WITH_READS_BUT_UNCALLED:null===v?w=Fa.MUTATED_BUT_NO_VAF:(w=Fa.MUTATED_WITH_VAF,l[y]=!0),u.push({profile_data:v?v.vaf:null,sample:e.sampleId,patient:e.patientId,study_id:e.studyId,hugo_gene_symbol:"",mutation:h,uid:b,mutationId:y,mutationStatus:w})}}}catch(e){c=!0,p=e}finally{try{s||null==m.return||m.return()}finally{if(c)throw p}}var S=Object.keys(o).filter(function(e){return!(e in i)}).map(function(e){return o[e]}),O=!0,E=!1,P=void 0;try{for(var T,I=S[Symbol.iterator]();!(O=(T=I.next()).done);O=!0){var _=T.value,k=Object(C.U)(_),x=r===ui.SAMPLE_TRACKS?k:e.sampleId,j=Object(Ha.a)(e.uniqueSampleKey,_.molecularProfileId,_.gene.hugoGeneSymbol,n);u.push({profile_data:null,sample:e.sampleId,patient:e.patientId,study_id:e.studyId,hugo_gene_symbol:"",mutation:_,uid:x,mutationId:k,mutationStatus:j?Fa.PROFILED_BUT_NOT_MUTATED:Fa.NOT_PROFILED,na:!j})}}catch(e){E=!0,P=e}finally{try{O||null==I.return||I.return()}finally{if(E)throw P}}},m=e[Symbol.iterator]();!(s=(f=m.next()).done);s=!0)d()}catch(e){c=!0,p=e}finally{try{s||null==m.return||m.return()}finally{if(c)throw p}}return u=u.filter(function(e){return l[e.mutationId]}),r===ui.SAMPLE_TRACKS?i.a.groupBy(u,function(e){return e.sample}):i.a.groupBy(u,function(e){return e.mutationId})}var Ya=n(328),Xa=n(176),Za=n(332),Qa=n.n(Za),$a=(n(836),n(1281)),Ja=n.n($a),ei=n(29),ti=n.n(ei);function ni(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ri(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oi(e){return(oi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ai(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ii(e,t){return(ii=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function li(e){return(li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ui,si=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":li(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};!function(e){e[e.MUTATION_TRACKS=0]="MUTATION_TRACKS",e[e.SAMPLE_TRACKS=1]="SAMPLE_TRACKS"}(ui||(ui={}));var ci=2,pi={init_cell_width:20,init_cell_padding:1,cell_padding_off_cell_width_threshold:10},fi=function(e){function t(e){var n,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,a=oi(t).call(this,e),n=!a||"object"!==li(a)&&"function"!=typeof a?ai(o):a,Object.defineProperty(ai(n),"oncoprint",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(ai(n),"oncoprintComponent",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(ai(n),"horzZoomSliderState",{enumerable:!0,configurable:!0,writable:!0,value:100}),Object.defineProperty(ai(n),"minZoom",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(ai(n),"minZoomUpdater",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(ai(n),"sortConfig",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.sampleIdOrder]},invoke:function(){return n.clustered?Promise.resolve({clusterHeatmapTrackGroupIndex:ci}):n.mode===ui.MUTATION_TRACKS?Promise.resolve({order:n.sampleIdOrder.result}):Promise.resolve({})}})}),Object.defineProperty(ai(n),"sampleIdOrder",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.props.store.samples]},invoke:function(){return n.props.sampleManager?Promise.resolve(n.props.sampleManager.getSampleIdsInOrder()):Promise.resolve(n.props.store.samples.result.map(function(e){return e.sampleId}))}})}),Object.defineProperty(ai(n),"mutationWithIdOrder",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({invoke:function(){var e=[],t=!0,r=!1,o=void 0;try{for(var a,l=n.mutations[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var u=a.value;e.push({mutation:u,id:Object(C.U)(u)})}}catch(e){r=!0,o=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw o}}return Promise.resolve(i.a.chain(e).uniqBy(function(e){return e.id}).sortBy(function(e){return za(e.mutation)}).value())}})}),Object.defineProperty(ai(n),"mutationModeColumnLabels",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.sampleIdOrder]},invoke:function(){return Promise.resolve(n.sampleIdOrder.result.reduce(function(e,t,r){var o=r+1;return e[t]={text:o.toString(),angle_in_degrees:0,text_color:"#ffffff",circle_color:n.props.sampleManager.getColorForSample(t),left_padding_percent:o<10?-15:-34},e},{}))}})}),Object.defineProperty(ai(n),"sampleModeColumnLabels",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({invoke:function(){var e={};if(n.showMutationLabels){var t=!0,r=!1,o=void 0;try{for(var a,i=n.mutations[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var l=a.value;e[Object(C.U)(l)]={text:za(l)}}}catch(e){r=!0,o=e}finally{try{t||null==i.return||i.return()}finally{if(r)throw o}}}return Promise.resolve(e)}})}),Object.defineProperty(ai(n),"sampleModeHeatmapTracksOrder",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.sampleIdOrder]},invoke:function(){return n.clustered?Promise.resolve(void 0):Promise.resolve(ni({},ci,n.sampleIdOrder.result))}})}),Object.defineProperty(ai(n),"mutationModeHeatmapTracksOrder",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.mutationWithIdOrder]},invoke:function(){return n.clustered?Promise.resolve(void 0):Promise.resolve(ni({},ci,n.mutationWithIdOrder.result.map(function(e){return e.id})))}})}),Object.defineProperty(ai(n),"sampleModeHeatmapTracks",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.props.store.samples,n.sampleIdOrder,n.props.store.mutationMolecularProfile,n.props.store.coverageInformation]},invoke:function(){if(0===n.mutations.length)return Promise.resolve([]);var e=n.props.store.mutationMolecularProfile.result,t=Ka(n.props.store.samples.result,n.mutations,n.props.store.coverageInformation.result,ui.SAMPLE_TRACKS),r=[];return n.sampleIdOrder.result.forEach(function(o,a){var i=t[o];if(i&&i.length){var l=n.props.sampleManager?n.props.sampleManager.getColorForSample(o):void 0,u=a+1;r.push({key:o,label:"".concat(u),description:"".concat(o," data from ").concat(e.molecularProfileId),molecularProfileId:e.molecularProfileId,molecularAlterationType:e.molecularAlterationType,datatype:e.datatype,data:i,trackGroupIndex:ci,naLegendLabel:"Not sequenced",labelColor:l?"white":"black",labelCircleColor:l,labelFontWeight:"normal",labelLeftPadding:u<10?21:17,hasColumnSpacing:!0,tooltip:function(e){var t=e[0],n=Object(xt.q)(t.mutation),r=Wa(t.mutation,{sampleId:t.sample,mutationStatus:t.mutationStatus,vafReport:n}),o=document.createElement("div");ti.a.render(r,o);var a=o.innerHTML;return c()(a)},sortDirectionChangeable:!1,initSortDirection:-1,movable:!1,customNaShapes:qa})}}),Promise.resolve(r)}})}),Object.defineProperty(ai(n),"mutationModeHeatmapTracks",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.props.store.samples,n.mutationWithIdOrder,n.props.store.mutationMolecularProfile,n.props.store.coverageInformation]},invoke:function(){if(0===n.mutations.length)return Promise.resolve([]);var e=n.props.store.mutationMolecularProfile.result,t=Ka(n.props.store.samples.result,n.mutations,n.props.store.coverageInformation.result,ui.MUTATION_TRACKS),r=[];return n.mutationWithIdOrder.result.forEach(function(n){var o=t[n.id];o&&o.length&&r.push({key:n.id,label:za(n.mutation),description:"".concat(za(n.mutation)," data from ").concat(e.molecularProfileId),molecularProfileId:e.molecularProfileId,molecularAlterationType:e.molecularAlterationType,datatype:e.datatype,data:o,trackGroupIndex:ci,naLegendLabel:"Not sequenced",labelFontWeight:"normal",hasColumnSpacing:!0,tooltip:function(e){var t=e[0],n=Object(xt.q)(t.mutation),r=Wa(t.mutation,{sampleId:t.sample,mutationStatus:t.mutationStatus,vafReport:n}),o=document.createElement("div");ti.a.render(r,o);var a=o.innerHTML;return c()(a)},sortDirectionChangeable:!1,initSortDirection:-1,movable:!1,customNaShapes:qa})}),Promise.resolve(r)}})}),Object.defineProperty(ai(n),"oncoprintUI",{enumerable:!0,configurable:!0,writable:!0,value:Object(Ba.a)({await:function(){return[n.heatmapTracks,n.heatmapTracksOrder,n.columnLabels,n.sortConfig]},render:function(){return 0===n.heatmapTracks.result.length?null:r.createElement("div",{className:"borderedChart",style:{display:"inline-block"}},n.header,r.createElement(Ua.c,{key:"MutationOncoprint",ref:n.oncoprintComponentRef,oncoprintRef:n.oncoprintRef,highlightedIds:n.highlightedIds,highlightedTracks:n.highlightedTracks,initParams:pi,keepSorted:!0,showTrackLabels:!(n.mode===ui.MUTATION_TRACKS&&!n.showMutationLabels),columnLabels:n.columnLabels.result,clinicalTracks:[],geneticTracks:[],genesetHeatmapTracks:[],heatmapTracks:n.heatmapTracks.result,heatmapTracksOrder:n.heatmapTracksOrder.result,divId:"MutationHeatmap",width:ra.a.size.width-100,caseLinkOutInTooltips:!1,sortConfig:n.sortConfig.result}))},renderPending:function(){return r.createElement(Ro.a,{isLoading:!0})},renderError:function(){return r.createElement(Ya.a,null)},showLastRenderWhenPending:!0})}),Object(T.makeObservable)(ai(n)),window.mutationOncoprint=ai(n),n.minZoomUpdater=setInterval(function(){n.oncoprint&&(n.minZoom=n.oncoprint.model.getMinHorzZoom())},500),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ii(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentWillUnmount",value:function(){clearInterval(this.minZoomUpdater)}},{key:"oncoprintComponentRef",value:function(e){this.oncoprintComponent=e}},{key:"oncoprintRef",value:function(e){var t=this;this.oncoprint=e,this.oncoprint.onHorzZoom(function(e){return t.horzZoomSliderState=e}),this.horzZoomSliderState=this.oncoprint.getHorzZoom(),this.oncoprint.onCellMouseOver(function(e,n){if(t.mode===ui.SAMPLE_TRACKS&&null!==e){var r=t.mutationKeyToMutation[e];r&&t.props.dataStore.setMouseOverMutation(r)}else if(t.mode===ui.MUTATION_TRACKS&&void 0!==n){if(t.oncoprintComponent){var o=t.oncoprintComponent.getTrackSpecKey(n),a=o&&t.mutationKeyToMutation[o];a&&t.props.dataStore.setMouseOverMutation(a)}}else t.props.dataStore.setMouseOverMutation(null)}),this.oncoprint.onCellClick(function(e,n){if(t.mode===ui.SAMPLE_TRACKS&&null!==e){var r=t.mutationKeyToMutation[e];r&&t.props.dataStore.toggleSelectedMutation(r)}else if(t.mode===ui.MUTATION_TRACKS&&void 0!==n){if(t.oncoprintComponent){var o=t.oncoprintComponent.getTrackSpecKey(n),a=o&&t.mutationKeyToMutation[o];a&&t.props.dataStore.toggleSelectedMutation(a)}}else t.props.dataStore.setSelectedMutations([])})}},{key:"updateOncoprintHorzZoom",value:function(){this.oncoprint&&this.oncoprint.setHorzZoom(this.horzZoomSliderState)}},{key:"onClickZoomIn",value:function(){this.oncoprint&&this.oncoprint.setHorzZoom(this.oncoprint.getHorzZoom()/.7)}},{key:"onClickZoomOut",value:function(){this.oncoprint&&this.oncoprint.setHorzZoom(.7*this.oncoprint.getHorzZoom())}},{key:"render",value:function(){return this.oncoprintUI.component}},{key:"showMutationLabels",get:function(){var e=this.props.urlWrapper.query.genomicEvolutionSettings.showMutationLabelsInHeatmap;return!e||"true"===e},set:function(e){this.props.urlWrapper.updateURL(function(t){return t.genomicEvolutionSettings.showMutationLabelsInHeatmap=e.toString(),t})}},{key:"clustered",get:function(){var e=this.props.urlWrapper.query.genomicEvolutionSettings.clusterHeatmap;return!e||"true"===e},set:function(e){this.props.urlWrapper.updateURL(function(t){return t.genomicEvolutionSettings.clusterHeatmap=e.toString(),t})}},{key:"mode",get:function(){return"true"===this.props.urlWrapper.query.genomicEvolutionSettings.transposeHeatmap?ui.MUTATION_TRACKS:ui.SAMPLE_TRACKS},set:function(e){this.props.urlWrapper.updateURL(function(t){return t.genomicEvolutionSettings.transposeHeatmap=(e===ui.MUTATION_TRACKS).toString(),t})}},{key:"mutations",get:function(){return i.a.flatten(this.props.dataStore.allData)}},{key:"highlightedMutationIds",get:function(){var e=this.props.dataStore.mouseOverMutation,t=this.props.dataStore.selectedMutations.slice();return e&&t.push(e),t.map(C.U)}},{key:"highlightedIds",get:function(){return this.mode===ui.SAMPLE_TRACKS?this.highlightedMutationIds:void 0}},{key:"highlightedTracks",get:function(){return this.mode===ui.MUTATION_TRACKS?this.highlightedMutationIds:void 0}},{key:"mutationKeyToMutation",get:function(){return i.a.keyBy(this.mutations,C.U)}},{key:"columnLabels",get:function(){switch(this.mode){case ui.MUTATION_TRACKS:return this.mutationModeColumnLabels;case ui.SAMPLE_TRACKS:default:return this.sampleModeColumnLabels}}},{key:"heatmapTracksOrder",get:function(){switch(this.mode){case ui.MUTATION_TRACKS:return this.mutationModeHeatmapTracksOrder;case ui.SAMPLE_TRACKS:default:return this.sampleModeHeatmapTracksOrder}}},{key:"heatmapTracks",get:function(){switch(this.mode){case ui.MUTATION_TRACKS:return this.mutationModeHeatmapTracks;case ui.SAMPLE_TRACKS:default:return this.sampleModeHeatmapTracks}}},{key:"zoomControls",get:function(){var e=this;return r.createElement("div",{className:Ja.a.zoomControls},r.createElement(g.i,{overlay:r.createElement("span",null,"Zoom out of heatmap"),placement:"top"},r.createElement("div",{onClick:this.onClickZoomOut,className:Ja.a.zoomButton},r.createElement("i",{className:"fa fa-search-minus"}))),r.createElement(g.i,{overlay:r.createElement("span",null,"Zoom in/out of heatmap"),placement:"top"},r.createElement("div",{style:{width:"90px"}},r.createElement(Qa.a,{value:this.horzZoomSliderState,onChange:function(t){return e.horzZoomSliderState=t},onChangeComplete:this.updateOncoprintHorzZoom,step:.01,max:1,min:this.minZoom,tooltip:!1}))),r.createElement(g.i,{overlay:r.createElement("span",null,"Zoom in to heatmap"),placement:"top"},r.createElement("div",{className:Ja.a.zoomButton,onClick:this.onClickZoomIn},r.createElement("i",{className:"fa fa-search-plus"}))))}},{key:"header",get:function(){var e=this;return r.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:5}},r.createElement("div",{style:{display:"inline-flex",alignItems:"center"}},r.createElement(Xa.a,{checked:this.clustered,onChange:function(){e.clustered=!e.clustered},labelProps:{style:{marginRight:10}},inputProps:{"data-test":"HeatmapCluster"}},r.createElement("span",{style:{marginTop:-3}},"Cluster")),r.createElement(Xa.a,{checked:this.mode===ui.MUTATION_TRACKS,onChange:function(){e.mode=e.mode===ui.MUTATION_TRACKS?ui.SAMPLE_TRACKS:ui.MUTATION_TRACKS},labelProps:{style:{marginRight:10}},inputProps:{"data-test":"HeatmapTranspose"}},r.createElement("span",{style:{marginTop:-3}},"Transpose")),r.createElement(Xa.a,{checked:this.showMutationLabels,onChange:function(){e.showMutationLabels=!e.showMutationLabels},labelProps:{style:{marginRight:10}},inputProps:{"data-test":"HeatmapMutationLabels"}},r.createElement("span",{style:{marginTop:-3}},"Show mutation labels")),this.zoomControls),r.createElement(g.j,{filename:"vafHeatmap",getSvg:function(){return e.oncoprint?e.oncoprint.toSVG(!0):null},getData:function(){return function(e){var t=[];t.push(["Sample_ID","Gene","Protein_Change","Variant_Allele_Frequency"]);var n=!0,r=!1,o=void 0;try{for(var a,i=e[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var l=a.value;null!==l.profile_data&&t.push([l.sample,l.mutation.gene.hugoGeneSymbol,l.mutation.proteinChange,l.profile_data])}}catch(e){r=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}return t.map(function(e){return e.join("\t")}).join("\n")}(i.a.flatMap(e.heatmapTracks.result,function(e){return e.data}))},buttons:["SVG","PNG","Data"],type:"button",dontFade:!0,style:{marginLeft:10}}))}}])&&ri(n.prototype,o),a&&ri(n,a),t}();si([T.observable],fi.prototype,"horzZoomSliderState",void 0),si([T.observable],fi.prototype,"minZoom",void 0),si([H.default],fi.prototype,"oncoprintComponentRef",null),si([H.default],fi.prototype,"oncoprintRef",null),si([T.computed],fi.prototype,"mutations",null),si([T.computed],fi.prototype,"highlightedMutationIds",null),si([T.computed],fi.prototype,"highlightedIds",null),si([T.computed],fi.prototype,"highlightedTracks",null),si([H.default],fi.prototype,"updateOncoprintHorzZoom",null),si([H.default],fi.prototype,"onClickZoomIn",null),si([H.default],fi.prototype,"onClickZoomOut",null),si([T.computed],fi.prototype,"mutationKeyToMutation",null),si([T.computed],fi.prototype,"columnLabels",null),si([T.computed],fi.prototype,"heatmapTracksOrder",null),si([T.computed],fi.prototype,"heatmapTracks",null),si([T.computed],fi.prototype,"zoomControls",null),si([T.computed],fi.prototype,"header",null);var di=fi=si([wt.observer],fi),mi=n(120);function hi(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var yi="None",bi=Object(wt.observer)(function(e){var t,n,r,a,i=e.wrapperStore,l=e.sampleManager,u=[{label:yi,value:yi}].concat(hi((t=l.samples,n={},r=[],t.forEach(function(e,t){e.clinicalData.forEach(function(e,t){void 0===n[e.clinicalAttributeId]&&(r.push({id:e.clinicalAttributeId,value:e.clinicalAttribute.displayName}),n[e.clinicalAttributeId]=e.clinicalAttribute)})}),r).map(function(e){return{label:"".concat(e.value),value:"".concat(e.id)}})));return o.a.createElement("div",{className:"VAFChartControls","data-test":"VAFChartControls"},o.a.createElement("label",null,"Group by: ",o.a.createElement(mi.default,{name:"group-by-options-select",value:(a=u.find(function(e){return e.value==i.groupByOption}),a?{label:a.label,value:i.groupByOption}:""),options:u,onChange:function(e){i.setGroupByOption(e?e.value:"")},styles:{container:function(e){return Object.assign(Object.assign({},e),{width:250})}},clearable:!1,searchable:!0})),!i.isOnlySequentialModePossible&&o.a.createElement("label",{className:"checkbox-inline"},o.a.createElement("input",{type:"checkbox","data-test":"VAFSequentialMode",checked:i.showSequentialMode,onChange:function(){return i.setShowSequentialMode(!i.showSequentialMode)}})," ","Show samples in sequential mode"),o.a.createElement("label",{className:"checkbox-inline"},o.a.createElement("input",{type:"checkbox",checked:i.onlyShowSelectedInVAFChart,"data-test":"VAFOnlyHighlighted",onChange:function(){return i.setOnlyShowSelectedInVAFChart(!i.onlyShowSelectedInVAFChart)}})," ","Show only selected mutations"),o.a.createElement("label",{className:"checkbox-inline"},o.a.createElement("input",{type:"checkbox","data-test":"VAFLogScale",checked:i.vafChartLogScale,onChange:function(){i.setVafChartLogScale(!i.vafChartLogScale)}})," ","Log scale"),o.a.createElement("label",{className:"checkbox-inline"},o.a.createElement("input",{type:"checkbox","data-test":"VAFDataRange",checked:i.vafChartYAxisToDataRange,onChange:function(){i.setVafChartYAxisToDataRange(!i.vafChartYAxisToDataRange)}})," ","Set y-axis to data range"))}),gi=n(75),vi=n(5),wi=n.n(vi),Si=n(454),Oi=n(814),Ei=n.n(Oi),Pi=n(1282),Ti=n.n(Pi);n(1283);function Ci(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ii(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _i(e){return(_i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ki(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xi(e,t){return(xi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ji(e){return(ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Mi=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ji(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},Ai=function(e){var t=e.x,n=e.y,r=e.color,a=e.datum,i=e.mutation,l=e.onMutationClick,u=e.setTooltipModel;return o.a.createElement("g",null,o.a.createElement("path",{d:"M ".concat(t,", ").concat(n,"\n                            m -3, 0\n                            a 3, 3 0 1,0 6,0\n                            a 3, 3 0 1,0 -6,01"),role:"presentation","shape-rendering":"auto",style:{stroke:"".concat(r),fill:"white",strokeWidth:2,opacity:1},onMouseOver:function(e){u({datum:a,mutation:i,mouseEvent:e,tooltipOnPoint:!0})},onMouseOut:function(e){u({datum:null,mutation:null,mouseEvent:e,tooltipOnPoint:!0})},onClick:function(e){l(i)},onMouseMove:function(e){e.persist(),u({datum:a,mutation:i,mouseEvent:e,tooltipOnPoint:!0})}}))},Di=function(e){var t=e.x1,n=e.y1,r=e.x2,a=e.y2,i=e.color,l=e.datum,u=e.mutation,s=e.onMutationClick,c=e.setTooltipModel;return o.a.createElement("g",null,o.a.createElement("path",{d:"M".concat(t,",").concat(n,"L").concat(r,",").concat(a),role:"presentation","shape-rendering":"auto",style:{fill:"white",stroke:"".concat(i),strokeOpacity:.5,opacity:1,strokeWidth:2},onMouseOver:function(e){c({datum:l,mutation:u,mouseEvent:e,tooltipOnPoint:!0})},onMouseOut:function(e){c({datum:null,mutation:null,mouseEvent:e,tooltipOnPoint:!1})},onClick:function(e){s(u)},onMouseMove:function(e){e.persist(),c({datum:l,mutation:u,mouseEvent:e,tooltipOnPoint:!0})}}))},Ri=function(e){var t=e.highlightedMutations,n=e.mutationLines;return o.a.createElement(o.a.Fragment,null,t.map(function(e){var t=n[e.proteinChange+"_"+e.gene.hugoGeneSymbol];if(!t)return o.a.createElement("g",null);var r=[],a=[];return i.a.forEach(t,function(e,t){if(e.points.length>1){for(var n="M ".concat(e.points[0].x," ").concat(e.points[0].y),i=1;i<e.points.length;i++)n="".concat(n," L ").concat(e.points[i].x," ").concat(e.points[i].y);r.push(o.a.createElement("path",{style:{stroke:"#318ec4",strokeOpacity:1,strokeWidth:6,fillOpacity:0,pointerEvents:"none"},d:n}))}a.push(e.points.map(function(e){return o.a.createElement("path",{d:"M ".concat(e.x," ").concat(e.y,"\n                            m -").concat(3,", 0\n                            a ").concat(3,", ").concat(3," 0 1,0 ").concat(6,",0\n                            a ").concat(3,", ").concat(3," 0 1,0 ").concat(-6,",0\n                            "),style:{stroke:"#318ec4",fill:"white",strokeWidth:2,opacity:1,pointerEvents:"none"}})}))}),o.a.createElement("g",null,r,a)}))},Ni=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=_i(t).call(this,e))||"object"!==ji(o)&&"function"!=typeof o?ki(r):o,Object.defineProperty(ki(n),"tooltipModel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object(T.makeObservable)(ki(n)),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xi(e,t)}(t,o.a.Component),n=t,(r=[{key:"getMutationKey",value:function(e){return e.proteinChange+"_"+e.gene.hugoGeneSymbol}},{key:"getHighlights",value:function(){var e=[];this.props.onlyShowSelectedInVAFChart||e.push.apply(e,Ci(this.props.selectedMutations));var t=this.props.mouseOverMutation;return t&&e.push(t),e.length>0?o.a.createElement("g",null,o.a.createElement(Ri,{highlightedMutations:e,mutationLines:this.mutationToLines})):o.a.createElement("g",null)}},{key:"tooltipFunction",value:function(e){return Wa(e.mutation,e.tooltipOnPoint?{mutationStatus:e.datum.mutationStatus,sampleId:e.datum.sampleId,vafReport:e.datum.vafReport}:void 0)}},{key:"getTooltipComponent",value:function(){var e=this.tooltipModel;if(e&&null!=e.mouseEvent&&null!=e.mutation&&null!=e.datum){var t=e.mouseEvent.clientY<250?"bottom":"top";return o.a.createElement(Si.a,{isOpened:!0,node:document.body},o.a.createElement(vt.Popover,{className:wi()("cbioportal-frontend","cbioTooltip",Ei.a.Tooltip,Ti.a.Tooltip),positionLeft:e.mouseEvent.pageX,positionTop:e.mouseEvent.pageY+("top"===t?-7:7),style:{transform:"top"===t?"translate(-50%,-100%)":"translate(-50%,0%)",maxWidth:400},placement:t},this.tooltipFunction(e)))}return o.a.createElement("span",null)}},{key:"render",value:function(){var e=this;return o.a.createElement("svg",{width:this.props.width,height:this.props.height},this.props.lineData.map(function(t,n){return t.map(function(n,r){var a,i,l=n.x,u=n.y,s=t[r+1];s&&(a=s.x,i=s.y);var c={mutationStatus:n.mutationStatus,sampleId:n.sampleId,vafReport:Object(xt.q)(n.mutation)},p=n.color;return o.a.createElement("g",null,a&&i&&o.a.createElement(Di,{x1:l,y1:u,x2:a,y2:i,color:p,datum:c,mutation:n.mutation,onMutationClick:e.props.onMutationClick,setTooltipModel:function(t){e.tooltipModel=t,e.props.onMutationMouseOver(t.mutation)}}),o.a.createElement(Ai,{x:l,y:u,color:p,datum:c,mutation:n.mutation,onMutationClick:e.props.onMutationClick,setTooltipModel:function(t){e.tooltipModel=t,e.props.onMutationMouseOver(t.mutation)}}))})}),o.a.createElement(wt.Observer,null,this.getHighlights),o.a.createElement(wt.Observer,null,this.getTooltipComponent))}},{key:"mutationToLines",get:function(){var e={},t=!0,n=!1,r=void 0;try{for(var o,a=this.props.lineData[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value,l={points:i},u=this.getMutationKey(i[0].mutation);e[u]||(e[u]=[]),e[u].push(l)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return e}},{key:"headerHeight",get:function(){return 20}},{key:"mutationToDataPoints",get:function(){var e=new gi.a,t=!0,n=!1,r=void 0;try{for(var o,a=this.props.lineData[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value;e.set({hugoGeneSymbol:i[0].mutation.gene.hugoGeneSymbol,proteinChange:i[0].mutation.proteinChange},i)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return e}}])&&Ii(n.prototype,r),a&&Ii(n,a),t}();Mi([T.observable.ref],Ni.prototype,"tooltipModel",void 0),Mi([T.computed],Ni.prototype,"mutationToLines",null),Mi([T.computed],Ni.prototype,"headerHeight",null),Mi([T.computed],Ni.prototype,"mutationToDataPoints",null),Mi([H.default],Ni.prototype,"getHighlights",null),Mi([H.default],Ni.prototype,"getTooltipComponent",null);var Li=Ni=Mi([wt.observer],Ni),Gi=(n(1177),n(992)),Vi="-";function Fi(e,t){var n=e.event.attributes.find(function(e){return"SAMPLE_ID"===e.key});return n?{color:t.color[n.value]||"#333333",label:t.label[n.value]||Vi}:null}function Bi(e,t,n){var r=e.event.attributes.find(function(e){return t.includes(e.key)}),o="#ffffff";if(r){var a=n.find(function(e){return e.re.test(r.value)});a&&(o=a.color)}return o}var Ui=function(e){var t=e.colors,n=e.labels,r=e.y,a=function(e,t){for(var n=[],r=0;r<t.length;r++){var o=parseInt(t[r]);isNaN(o)||n.push({label:o,color:e[r]})}return i.a.sortBy(n,function(e){return e.label})}(t,n),l=function(e){if(!e.length)return Vi;var t=[],n={start:e[0],end:e[0]};return e.forEach(function(e,r){0!==r&&(e===n.end+1?n.end+=1:(t.push(n),n={start:e,end:e}))}),t.push(n),t.map(function(e){return e.start!==e.end?"".concat(e.start,"-").concat(e.end):e.start.toString()}).join(", ")}(a.map(function(e){return e.label})),u=Math.ceil(Object(g.mb)(l,"Arial","10px"))+8,s="clipPath_".concat(Math.random()),c=i.a.uniq(a.map(function(e){return e.color})),p=u/c.length;return o.a.createElement("g",{transform:"translate(0 ".concat(r,")")},o.a.createElement("clipPath",{id:s},o.a.createElement("rect",{x:-u/2,y:-7,rx:7,ry:7,width:u,height:14})),o.a.createElement("g",{clipPath:"url(#".concat(s,")")},c.map(function(e,t){return o.a.createElement("rect",{x:-u/2+t*p,y:-7,width:p,height:14,fill:e})}),o.a.createElement("text",{x:"0",y:"0","text-anchor":"middle",fill:"white","font-size":"10px","font-family":"Arial",dy:".3em"},l)))},Hi=function(e){var t=e.color,n=e.label,r=e.y;return o.a.createElement("g",{transform:"translate(0 ".concat(r,")")},o.a.createElement("circle",{cx:"0",cy:"0",r:"7",fill:t}),o.a.createElement("text",{x:"0",y:"0","text-anchor":"middle",fill:"white","font-size":"10px","font-family":"Arial",dy:".3em"},n))},Wi="Other";function qi(e){return e.sortOrder=["Sample acquisition","Sequencing","Surgery","Diagnostics","Diagnostic","Diagnosis","Treatment","Lab_test","Status","IMAGING","Med Onc Assessment"],e.trackStructures=[["TREATMENT","TREATMENT_TYPE","AGENT"],["LAB_TEST","TEST"]],e.trackEventRenderers.push({trackTypeMatch:/Med Onc Assessment|MedOnc/i,configureTrack:function(e){e.label="Med Onc Assessment";var t=function(e){return Bi(e,["CURATED_CANCER_STATUS"],[{re:/indeter/i,color:"#ffffff"},{re:/stable/i,color:"gainsboro"},{re:/mixed/i,color:"goldenrod"},{re:/improving/i,color:"rgb(44, 160, 44)"},{re:/worsening/i,color:"rgb(214, 39, 40)"}])},n=!0,r=!1,a=void 0;try{for(var i,l=function(){var e=i.value,n=t(e);e.render=function(e){return o.a.createElement("circle",{cx:"0",cy:Gi.a/2,r:"4",stroke:"#999999",fill:n})}},u=e.items[Symbol.iterator]();!(n=(i=u.next()).done);n=!0)l()}catch(e){r=!0,a=e}finally{try{n||null==u.return||u.return()}finally{if(r)throw a}}e.renderEvents=function(e){return o.a.createElement(o.a.Fragment,null,Object(Gi.i)(e.length),Object(Gi.h)(e.map(t)))}}}),e.trackEventRenderers.push({trackTypeMatch:/IMAGING/i,configureTrack:function(e){if(e.label="Imaging Assessment",e.items&&e.items.length){var t=function(e){return Bi(e,["IMAGE_OVERALL","CURATED_CANCER_STATUS"],[{re:/indeter|does not mention/i,color:"#ffffff"},{re:/stable/i,color:"gainsboro"},{re:/mixed/i,color:"goldenrod"},{re:/improving/i,color:"rgb(44, 160, 44)"},{re:/worsening/i,color:"rgb(214, 39, 40)"}])},n=!0,r=!1,a=void 0;try{for(var i,l=function(){var e=i.value,n=t(e);e.render=function(){return o.a.createElement("circle",{cx:"0",cy:Gi.a/2,r:"4",stroke:"#999999",fill:n})}},u=e.items[Symbol.iterator]();!(n=(i=u.next()).done);n=!0)l()}catch(e){r=!0,a=e}finally{try{n||null==u.return||u.return()}finally{if(r)throw a}}e.renderEvents=function(e){return o.a.createElement(o.a.Fragment,null,Object(Gi.i)(e.length),Object(Gi.h)(e.map(t)))}}}}),e}function zi(e,t){return{sortOrder:["Specimen","Sequencing","Sample Acquisition","Surgery","Med Onc","Med Onc Assessment","Status","Diagnostics","Diagnostic","Imaging","Imaging Assessment","Lab_test","Treatment"],trackStructures:[["TREATMENT","TREATMENT_TYPE","SUBTYPE","AGENT"],["LAB_TEST","TEST"],["DIAGNOSIS","SUBTYPE"]],trackEventRenderers:[{trackTypeMatch:/LAB_TEST/i,configureTrack:function(e){e.tracks&&e.tracks.forEach(function(e){"PSA"!==e.type&&Qi(e)});var t=e.tracks?e.tracks.find(function(e){return"PSA"===e.type}):void 0;t&&t&&t.items.length&&(t.trackType=Gi.d.LINE_CHART,t.getLineChartValue=function(e){var t=Object(Gi.g)("VALUE",e)||Object(Gi.g)("RESULT",e);return void 0===t?null:parseFloat(t.replace(/^[<>]/gi,""))})}},{trackTypeMatch:/SPECIMEN|SAMPLE ACQUISITION|SEQUENCING/i,configureTrack:function(n){n.renderTooltip=function(t){var n=t.event.attributes.find(function(e){return"SAMPLE_ID"===e.key});if(!n||!n.value)return null;var r=e.samples.find(function(e){return e.id===n.value});return r?o.a.createElement("table",null,o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("th",null,"SAMPLE ID"),o.a.createElement("td",null,r.id)),r.clinicalData.map(function(e){return o.a.createElement("tr",null,o.a.createElement("th",null,e.clinicalAttributeId.toUpperCase().replace(/_/g," ")),o.a.createElement("td",null,e.value))}),o.a.createElement("tr",null,o.a.createElement("th",null,"START DATE"),o.a.createElement("td",{className:"nowrap"},Object(Gi.f)(t.start))))):null},n.items.forEach(function(e,n){var r=Fi(e,t);r&&(e.render=function(e){return o.a.createElement(Hi,{color:r.color,label:r.label,y:Gi.a/2})})}),n.sortSimultaneousEvents=function(e){return i.a.sortBy(e,function(e){var n=Number.POSITIVE_INFINITY,r=Fi(e,t);if(r){var o=parseInt(r.label);isNaN(o)||(n=o)}return n})},n.renderEvents=function(e){var n=[],r=[],a=!0,i=!1,l=void 0;try{for(var u,s=e[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var c=Fi(u.value,t);c&&(n.push(c.color),r.push(c.label))}}catch(e){i=!0,l=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw l}}return o.a.createElement(Ui,{colors:n,labels:r,y:Gi.a/2})}}}]}}function Ki(e,t){var n=i.a.keyBy(e.trackStructures,function(e){return e[0]}),r=i.a.groupBy(t,function(e){return e.eventType.toUpperCase()});return i.a.uniq(e.sortOrder.map(function(e){return e.toUpperCase()}).concat(Object.keys(r))).reduce(function(e,t){var o=r[t];if(!o)return e;if(t in n)e.push(Yi(function e(t,n,r,o){var a=i.a.groupBy(r,function(e){var t=e.attributes.find(function(e){return e.key===n[0]});return t?t.value:Wi});var l=i.a.map(a,function(t,r){if(n.length>1){var a=e(r,n.slice(1),t,"".concat(o,".").concat(r));return a}var i={type:r,uid:"".concat(o,".").concat(r)};return i.items=Xi(t,i),i});var u={type:t,tracks:l,items:[],uid:o};return u}(t,n[t].slice(1),o,t)));else{var a={type:t,uid:t};a.items=Xi(o,a),e.push(a)}return e},[])}function Yi(e){for(;e.tracks&&1===e.tracks.length&&e.tracks[0].type===Wi;)e.items=e.items.concat(e.tracks[0].items),e.tracks=e.tracks[0].tracks;return e.tracks&&e.tracks.forEach(Yi),e}function Xi(e,t){return e.map(function(e){return{end:e.endNumberOfDaysSinceDiagnosis||e.startNumberOfDaysSinceDiagnosis,start:e.startNumberOfDaysSinceDiagnosis,event:e,containingTrack:t}})}function Zi(e,t){var n=Object(Gi.g)(e,t);return void 0===n?null:parseFloat(n.replace(/^[<>]/gi,""))}function Qi(e){var t;e.items.length&&(t=e.items,i.a.every(t,function(e){var t=Zi("RESULT",e);return!(null===t||isNaN(t))})&&(e.trackType=Gi.d.LINE_CHART,e.getLineChartValue=function(e){return Zi("RESULT",e)}),e.tracks&&e.tracks.forEach(Qi))}function $i(e){return($i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ji(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var el=.001;function tl(e){return e.mutationStatus===Fa.MUTATED_WITH_VAF||e.mutationStatus===Fa.PROFILED_WITH_READS_BUT_UNCALLED}function nl(e,t,n){if(void 0===n||0==+n)return Math[e](t);if(t=+t,n=+n,isNaN(t)||"number"!=typeof n||n%1!=0)return NaN;var r=t.toString().split("e");return+((r=Math[e](+(r[0]+"e"+(r[1]?+r[1]-n:-n))).toString().split("e"))[0]+"e"+(r[1]?+r[1]+n:n))}function rl(e){return 0==e||e>=.1?0:Object(lt.nb)(e)}var ol=Object(wt.observer)(function(e){var t=e.ticks,n=e.legendHeight,r=i()(t).map(function(e){return e.offset}).max()||0;return o.a.createElement("div",{style:{height:n,width:50}},o.a.createElement("svg",{height:n,width:50,style:{textTransform:"none",position:"relative"}},o.a.createElement("text",{style:{textAlign:"left"},"text-anchor":"middle",transform:"translate(".concat(10,",").concat(r/2,") rotate(-90)")},"Allele Frequency"),o.a.createElement("g",{transform:"translate(0,0)"},t.map(function(e,t){return o.a.createElement("g",{transform:"translate(".concat(20,",0)")},o.a.createElement("text",{y:e.offset,"font-size":"10px",style:{textAlign:"right"}},e.label),o.a.createElement("rect",{width:5,height:1,fill:"#aaa",transform:"translate(20,".concat(e.offset-4,")")}))}))))}),al=n(28),il=n(1284),ll=n.n(il),ul=n(74),sl=n.n(ul);function cl(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var pl=["PATIENT_ID","START_DATE","STOP_DATE","EVENT_TYPE"];function fl(e){var t=i.a.groupBy(e,function(e){return e.eventType}),n=new ll.a;i.a.forEach(t,function(e,t){n.file("data_timeline_".concat(t.toLowerCase(),".txt"),dl(e).map(function(e){return e.join("\t")}).join("\n")+"\n")}),n.generateAsync({type:"blob"}).then(function(e){sl()(e,"timeline.zip")})}function dl(e){var t={},n=!0,r=!1,o=void 0;try{for(var a,i=e[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var l=a.value,u=!0,s=!1,c=void 0;try{for(var p,f=l.attributes[Symbol.iterator]();!(u=(p=f.next()).done);u=!0){t[p.value.key]=!0}}catch(e){s=!0,c=e}finally{try{u||null==f.return||f.return()}finally{if(s)throw c}}}}catch(e){r=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}var d=Object.keys(t),m=[];m.push(pl.concat(d));var h=!0,y=!1,b=void 0;try{for(var g,v=e[Symbol.iterator]();!(h=(g=v.next()).done);h=!0){var w=g.value;m.push(ml(w,d))}}catch(e){y=!0,b=e}finally{try{h||null==v.return||v.return()}finally{if(y)throw b}}return m}function ml(e,t){return[e.patientId,void 0!==e.startNumberOfDaysSinceDiagnosis?e.startNumberOfDaysSinceDiagnosis.toString():"",void 0!==e.endNumberOfDaysSinceDiagnosis?e.endNumberOfDaysSinceDiagnosis.toString():"",e.eventType].concat(cl(t.map(function(t){return function(e,t){var n=e.find(function(e){return e.key===t});return void 0===n?void 0:n.value}(e.attributes,t)||""})))}function hl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yl(e){return(yl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gl(e,t){return(gl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vl(e){return(vl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var wl=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":vl(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},Sl=function(e){function t(e){var n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=yl(t).call(this,e))||"object"!==vl(o)&&"function"!=typeof o?bl(r):o,Object.defineProperty(bl(n),"store",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(bl(n),"wrapperStore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object(T.makeObservable)(bl(n));var a=window.location.href.includes("genie_bpc"),i=zi(e.sampleManager,e.caseMetaData);a&&qi(i);var l=Ki(i,n.props.data);return Object(Gi.e)(l,i.trackEventRenderers),n.store=new Gi.c(l),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gl(e,t)}(t,o.a.Component),n=t,(r=[{key:"sampleIcons",value:function(e){var t=this,n=i.a.groupBy(e,function(e){return t.xPosition[e]}),r=Object.values(n).map(function(e){var n=e[0],r=t.xPosition[n],a=e.map(function(e){return t.props.caseMetaData.color[e]})||["#333333"],i=e.map(function(e){return t.props.caseMetaData.label[e]})||["-"];return o.a.createElement("g",{transform:"translate(".concat(r,")")},o.a.createElement(Ui,{colors:a,labels:i,y:10}))});return o.a.createElement("g",null,r)}},{key:"groupByTrackLabel",value:function(e){return o.a.createElement(g.m,{text:this.clinicalValuesForGrouping[e],style:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",color:this.groupColorByGroupIndex(e)}})}},{key:"groupColorByGroupIndex",value:function(e){var t=this.clinicalValueToColor[this.clinicalValuesForGrouping[e]];return this.props.wrapperStore.groupingByIsSelected&&this.numGroupByGroups>1&&null!=t?t:"rgb(0,0,0)"}},{key:"render",value:function(){var e=this;return this.store&&this.props.wrapperStore?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{marginTop:20},"data-test":"VAFChartWrapper"},o.a.createElement(bi,{wrapperStore:this.props.wrapperStore,sampleManager:this.props.sampleManager}),o.a.createElement(Gi.b,{key:"this.props.headerWidth-".concat(this.numGroupByGroups.toString(),"-").concat(this.props.wrapperStore.showSequentialMode?"seq":"noseq"),store:this.store,onClickDownload:function(){return fl(e.props.data)},width:this.props.width,hideLabels:!1,hideXAxis:this.props.wrapperStore.showSequentialMode,visibleTracks:[],disableZoom:!0,customTracks:this.customTracks,headerWidth:this.numGroupByGroups>0?150:this.props.headerWidth}))):null}},{key:"maxYTickmarkValue",get:function(){return this.props.wrapperStore.vafChartYAxisToDataRange&&void 0!==this.maxYValue?(e=this.maxYValue,t=-rl(this.maxYValue)-1,nl("ceil",e,t)):1;var e,t}},{key:"minYTickmarkValue",get:function(){return this.props.wrapperStore.vafChartYAxisToDataRange&&void 0!==this.minYValue?(e=this.minYValue,t=-rl(this.minYValue)-1,nl("floor",e,t)):0;var e,t}},{key:"ticks",get:function(){var e=this,t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6;if(0===n)return[e,t];for(var r=(t-e)/(n-1),o=[e],a=1;a<n;a++){var i=o[a-1]+r;o[a]=i}return o}(this.minYTickmarkValue,this.maxYTickmarkValue),n=function(e){for(var t=e.filter(function(e,t,n){return n.indexOf(e)===t}),n=t.map(function(e){return Number.isInteger(e)?0:rl(e)+1}),r=function(e){var n=t.map(function(t){return t.toFixed(e)}).filter(function(e,t,n){return n.indexOf(e)===t});if(n.length===t.length)return{v:n}},o=Math.min.apply(Math,Ji(n));o<=3;o++){var a=r(o);if("object"===$i(a))return a.v}return t.map(function(e){return e.toExponential()})}(t);return t.length!==n.length&&(t=n.map(function(e){return Number(e)})),i.a.map(t,function(t,r){return{label:n[r],value:t,offset:e.scaleYValue(t)}})}},{key:"yPosition",get:function(){var e=this,t={};return this.lineData.forEach(function(n,r){n.forEach(function(n,r){t[n.y]=e.scaleYValue(n.y)})}),t}},{key:"scaleYValue",get:function(){return function(e,t,n,r){if(void 0!==t&&void 0!==e){var o=n-20;if(r){var a=Math.log10(Math.max(el,e)),i=o/(Math.log10(Math.max(el,t))-a);return function(e){var t=Math.log10(Math.max(el,e));return n-10-(t-a)*i}}var l=o/(t-e);return function(t){return n-10-(t-e)*l}}return function(e){return e}}(this.minYTickmarkValue,this.maxYTickmarkValue,this.props.wrapperStore.dataHeight,this.props.wrapperStore.vafChartLogScale)}},{key:"mutations",get:function(){var e=this;return this.props.wrapperStore.onlyShowSelectedInVAFChart?this.props.dataStore.allData.filter(function(t){return e.props.dataStore.isMutationSelected(t[0])}):this.props.dataStore.allData}},{key:"lineData",get:function(){return function(e,t,n,r,o,a,l){var u=[],s=[];a&&a!=yi&&(t=function(e,t){var n={},r=[];return e.forEach(function(e,o){for(var a in n={},e.forEach(function(e,r){void 0===n[t[e.sampleId]]&&(n[t[e.sampleId]]=[]),n[t[e.sampleId]].push(e)}),n)r.push(n[a])}),r}(t,l));var c=!0,p=!1,f=void 0;try{for(var d,m=t[Symbol.iterator]();!(c=(d=m.next()).done);c=!0){var h=d.value,y=[],b={},g=a&&a!=yi?l[h[0].sampleId]:void 0,v=!0,w=!1,S=void 0;try{for(var O,E=h[Symbol.iterator]();!(v=(O=E.next()).done);v=!0){var P=O.value,T=P.uniqueSampleKey,C=P.sampleId,I=Object(xt.q)(P);null!==I?"uncalled"===P.mutationStatus.toLowerCase()?P.tumorAltCount>0&&(y.push({x:n[C],y:I.vaf,sampleId:C,mutation:P,mutationStatus:Fa.PROFILED_WITH_READS_BUT_UNCALLED}),b[T]=!0):(y.push({x:n[C],y:I.vaf,sampleId:C,mutation:P,mutationStatus:Fa.MUTATED_WITH_VAF}),b[T]=!0):(y.push({x:n[C],sampleId:C,mutation:P,mutationStatus:Fa.MUTATED_BUT_NO_VAF}),b[T]=!0)}}catch(e){w=!0,S=e}finally{try{v||null==E.return||E.return()}finally{if(w)throw S}}var _=h[0],k=!0,x=!1,j=void 0;try{for(var M,A=e[Symbol.iterator]();!(k=(M=A.next()).done);k=!0){var D=M.value;D.uniqueSampleKey in b||null!=a&&a!=yi&&l[D.sampleId]!=g||(Object(Ha.a)(D.uniqueSampleKey,r,_.gene.hugoGeneSymbol,o)?y.push({x:n[D.sampleId],y:0,sampleId:D.sampleId,mutation:_,mutationStatus:Fa.PROFILED_BUT_NOT_MUTATED}):y.push({x:n[D.sampleId],sampleId:D.sampleId,mutation:_,mutationStatus:Fa.NOT_PROFILED}))}}catch(e){x=!0,j=e}finally{try{k||null==A.return||A.return()}finally{if(x)throw j}}for(y=i.a.sortBy(y,function(e){return e.x});y.length>0&&!tl(y[0]);)y.shift();for(;y.length>0&&!tl(y[y.length-1]);)y.pop();if(0!==y.length){for(var R=[],N=[],L=0;L<y.length;L++)if(0!==L&&L!==y.length-1&&void 0===y[L].y){var G=0,V=0;for(G=L;G>=0&&void 0===y[G].y;G--);for(V=L;V<=y.length-1&&void 0===y[V].y;V++);var F=1/(V-G);y[L].y=(L-G)*F*(y[G].y+y[V].y),N.push(y[L])}else R.push(y[L]);u.push.apply(u,N),s.push(R)}}}catch(e){p=!0,f=e}finally{try{c||null==m.return||m.return()}finally{if(p)throw f}}return{lineData:s,grayPoints:u}}(this.props.samples,this.mutations,this.props.sampleManager.sampleIdToIndexMap,this.props.mutationProfileId,this.props.coverageInformation,this.props.wrapperStore.groupByOption,this.sampleIdToClinicalValue).lineData}},{key:"scaledAndColoredLineData",get:function(){var e=this,t=[];return this.lineData.map(function(n,r){t[r]=[],n.map(function(n,o){t[r].push({x:e.xPosition[n.sampleId],y:e.yPosition[n.y],sampleId:n.sampleId,mutation:n.mutation,mutationStatus:n.mutationStatus,color:e.groupColor(n.sampleId)})})}),t}},{key:"minYValue",get:function(){return i()(this.lineData).flatten().map(function(e){return e.y}).min()}},{key:"maxYValue",get:function(){return i()(this.lineData).flatten().map(function(e){return e.y}).max()}},{key:"sampleIdToClinicalValue",get:function(){var e=this,t={};return this.props.wrapperStore.groupingByIsSelected&&this.props.sampleManager.samples.forEach(function(n,r){var o=bn.getClinicalAttributeInSample(n,e.props.wrapperStore.groupByOption);t[n.id]=null!=o?o.value:"undefined-group"}),t}},{key:"sampleIconsTracks",get:function(){var e=this,t=[];return this.props.wrapperStore.groupingByIsSelected?i.a.forIn(this.sampleGroups,function(n,r){var o=parseInt(r);t.push({renderHeader:function(){return e.groupByTrackLabel(o)},renderTrack:function(){return e.sampleIcons(n)},height:function(){return 20},labelForExport:e.clinicalValuesForGrouping[o]})}):t.push({renderHeader:function(){return""},renderTrack:function(){return e.sampleIcons(e.sampleIds)},height:function(){return 20},labelForExport:"VAF Samples"}),t}},{key:"xPosition",get:function(){var e,t=this,n=0;return this.props.wrapperStore.showSequentialMode?(n=(this.store.pixelWidth-40)/(this.props.samples.length-1),e=this.props.samples.reduce(function(e,r){return e[r.sampleId]=t.sampleIdOrder[r.sampleId]*n+20,e},{})):e=this.store.sampleEvents.reduce(function(e,n){return e[n.event.attributes.find(function(e){return"SAMPLE_ID"===e.key}).value]=t.store.getPosition(n).pixelLeft,e},{}),e}},{key:"sampleIdOrder",get:function(){return Object(g.zb)(this.props.sampleManager.getSampleIdsInOrder())}},{key:"groupColor",get:function(){var e=this;return function(t){var n=e.clinicalValueToColor[e.sampleIdToClinicalValue[t]];return e.props.wrapperStore.groupingByIsSelected&&e.numGroupByGroups>1&&null!=n?n:"rgb(0,0,0)"}}},{key:"clinicalValueToColor",get:function(){var e={},t=Object(al.i)();return dn(this.props.sampleManager.samples,this.props.wrapperStore.groupByOption).forEach(function(n,r){e[r]=t()}),e}},{key:"numGroupByGroups",get:function(){return this.props.wrapperStore.groupingByIsSelected?i.a.keys(this.sampleGroups).length:0}},{key:"sampleIds",get:function(){return this.props.samples.map(function(e){return e.sampleId})}},{key:"sampleGroups",get:function(){var e=this,t={};return this.sampleIds.forEach(function(n,r){null==t[e.clinicalValuesForGrouping.indexOf(e.sampleIdToClinicalValue[n])]&&(t[e.clinicalValuesForGrouping.indexOf(e.sampleIdToClinicalValue[n])]=[]),t[e.clinicalValuesForGrouping.indexOf(e.sampleIdToClinicalValue[n])].push(n)}),t}},{key:"clinicalValuesForGrouping",get:function(){var e=[];return dn(this.props.sampleManager.samples,this.props.wrapperStore.groupByOption).forEach(function(t,n){e.push(n)}),e}},{key:"vafChartHeight",get:function(){return i.a.sum([this.props.wrapperStore.dataHeight,20])}},{key:"customTracks",get:function(){var e=this,t=this.props.dataStore.mouseOverMutation,n=this.props.dataStore.selectedMutations,r=this.scaledAndColoredLineData,a=this.vafChartHeight;this.numGroupByGroups>0||this.props.headerWidth;return[{renderHeader:function(t){return o.a.createElement("div",{className:"positionAbsolute",style:{right:-6}},o.a.createElement(ol,{ticks:e.ticks,legendHeight:e.vafChartHeight}))},renderTrack:function(i){return o.a.createElement(Li,{mouseOverMutation:t,onMutationMouseOver:function(t){return e.props.dataStore.setMouseOverMutation(t)},selectedMutations:n,onMutationClick:function(t){return e.props.dataStore.toggleSelectedMutation(t)},onlyShowSelectedInVAFChart:e.props.wrapperStore.onlyShowSelectedInVAFChart,lineData:r,height:a,width:e.store.viewPortWidth})},disableHover:!0,height:function(e){return a},labelForExport:"VAF"}].concat(this.sampleIconsTracks)}}])&&hl(n.prototype,r),a&&hl(n,a),t}();wl([T.computed],Sl.prototype,"maxYTickmarkValue",null),wl([T.computed],Sl.prototype,"minYTickmarkValue",null),wl([T.computed],Sl.prototype,"ticks",null),wl([T.computed],Sl.prototype,"yPosition",null),wl([T.computed],Sl.prototype,"scaleYValue",null),wl([T.computed],Sl.prototype,"mutations",null),wl([T.computed],Sl.prototype,"lineData",null),wl([T.computed],Sl.prototype,"scaledAndColoredLineData",null),wl([T.computed],Sl.prototype,"minYValue",null),wl([T.computed],Sl.prototype,"maxYValue",null),wl([T.computed],Sl.prototype,"sampleIdToClinicalValue",null),wl([T.computed],Sl.prototype,"sampleIconsTracks",null),wl([T.computed],Sl.prototype,"xPosition",null),wl([T.computed],Sl.prototype,"sampleIdOrder",null),wl([T.computed],Sl.prototype,"groupColor",null),wl([T.computed],Sl.prototype,"clinicalValueToColor",null),wl([T.computed],Sl.prototype,"numGroupByGroups",null),wl([T.computed],Sl.prototype,"sampleIds",null),wl([T.computed],Sl.prototype,"sampleGroups",null),wl([T.computed],Sl.prototype,"clinicalValuesForGrouping",null),wl([T.computed],Sl.prototype,"vafChartHeight",null),wl([T.computed],Sl.prototype,"customTracks",null);var Ol=Sl=wl([wt.observer],Sl),El=n(1259);function Pl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Tl=Object(El.a)(function(e){var t=e.data,n=e.caseMetaData,a=e.sampleManager,i=e.width,l=e.headerWidth,u=Pl(Object(r.useState)(null),2),s=(u[0],u[1],Pl(Object(r.useState)(null),2)),c=s[0],p=s[1];return Object(r.useEffect)(function(){var e=window.location.href.includes("genie_bpc"),r=zi(a,n);e&&qi(r);var o=Ki(r,t);Object(Gi.e)(o,r.trackEventRenderers);var i=new Gi.c(o);p(i)},[]),c?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement(Gi.b,{store:c,width:i,headerWidth:l,onClickDownload:function(){return fl(t)}})))):o.a.createElement("div",null)});function Cl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Il(e){return(Il="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var _l=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Il(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},kl=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"groupByOption",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_showSequentialMode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onlyShowSelectedInVAFChart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"vafChartLogScale",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"vafChartYAxisToDataRange",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"minYAxisToDataRange",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"maxYAxisToDataRange",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"dataHeight",{enumerable:!0,configurable:!0,writable:!0,value:200}),Object(T.makeObservable)(this)}var t,n,r;return t=e,(n=[{key:"setGroupByOption",value:function(e){this.groupByOption=e}},{key:"setShowSequentialMode",value:function(e){this._showSequentialMode=e}},{key:"setOnlyShowSelectedInVAFChart",value:function(e){this.onlyShowSelectedInVAFChart=e}},{key:"setVafChartLogScale",value:function(e){this.vafChartLogScale=e}},{key:"setVafChartYAxisToDataRange",value:function(e){this.vafChartYAxisToDataRange=e}},{key:"showSequentialMode",get:function(){return this.isOnlySequentialModePossible||this._showSequentialMode}},{key:"groupingByIsSelected",get:function(){return!(null==this.groupByOption||"None"===this.groupByOption)}},{key:"isOnlySequentialModePossible",get:function(){return!!(this.options&&this.options.isOnlySequentialModePossible&&this.options.isOnlySequentialModePossible())}}])&&Cl(t.prototype,n),r&&Cl(t,r),e}();function xl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jl(e){return(jl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ml(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Al(e,t){return(Al=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Dl(e){return(Dl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}_l([T.observable],kl.prototype,"groupByOption",void 0),_l([T.observable],kl.prototype,"_showSequentialMode",void 0),_l([T.computed],kl.prototype,"showSequentialMode",null),_l([T.observable],kl.prototype,"onlyShowSelectedInVAFChart",void 0),_l([T.observable],kl.prototype,"vafChartLogScale",void 0),_l([T.observable],kl.prototype,"vafChartYAxisToDataRange",void 0),_l([T.observable],kl.prototype,"minYAxisToDataRange",void 0),_l([T.observable],kl.prototype,"maxYAxisToDataRange",void 0),_l([T.observable],kl.prototype,"dataHeight",void 0),_l([T.action],kl.prototype,"setGroupByOption",null),_l([T.action],kl.prototype,"setShowSequentialMode",null),_l([T.action],kl.prototype,"setOnlyShowSelectedInVAFChart",null),_l([T.action],kl.prototype,"setVafChartLogScale",null),_l([T.action],kl.prototype,"setVafChartYAxisToDataRange",null),_l([T.computed],kl.prototype,"groupingByIsSelected",null),_l([T.computed],kl.prototype,"isOnlySequentialModePossible",null);var Rl,Nl=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Dl(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};!function(e){e.LINE_CHART="lineChart",e.HEATMAP="heatmap",e.TIMELINE="timeline"}(Rl||(Rl={}));var Ll="patient_view_mutations_tab__vaf_plot_choice",Gl=function(e){function t(e){var n,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,a=jl(t).call(this,e),n=!a||"object"!==Dl(a)&&"function"!=typeof a?Ml(o):a,Object.defineProperty(Ml(n),"vafChartWrapperStore",{enumerable:!0,configurable:!0,writable:!0,value:new kl({isOnlySequentialModePossible:function(){return 0===n.props.patientViewPageStore.clinicalEvents.result.length}})}),Object.defineProperty(Ml(n),"dataStore",{enumerable:!0,configurable:!0,writable:!0,value:new $o(function(){return n.mergedMutations},n.props.urlWrapper)}),Object.defineProperty(Ml(n),"vafLineChartSvg",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(Ml(n),"_plotTab",{enumerable:!0,configurable:!0,writable:!0,value:localStorage.getItem(Ll)||Rl.LINE_CHART}),Object.defineProperty(Ml(n),"vafLineChart",{enumerable:!0,configurable:!0,writable:!0,value:Object(Ba.a)({await:function(){return[n.props.patientViewPageStore.coverageInformation,n.props.patientViewPageStore.samples,n.props.patientViewPageStore.mutationMolecularProfileId]},renderPending:function(){return r.createElement(Ro.a,{isLoading:!0,size:"small"})},render:function(){return r.createElement(r.Fragment,null,n.props.sampleManager&&r.createElement(Ol,{key:"vafKey".concat(ra.a.size.width,"-").concat(n.showTimeline),wrapperStore:n.vafChartWrapperStore,dataStore:n.dataStore,caseMetaData:{color:n.props.sampleManager.sampleColors,label:n.props.sampleManager.sampleLabels,index:n.props.sampleManager.sampleIndex},data:n.props.patientViewPageStore.clinicalEvents.result,sampleManager:n.props.sampleManager,width:ra.a.size.width,samples:n.props.patientViewPageStore.samples.result,mutationProfileId:n.props.patientViewPageStore.mutationMolecularProfileId.result,coverageInformation:n.props.patientViewPageStore.coverageInformation.result,headerWidth:n.showTimeline?150:50}))},showLastRenderWhenPending:!0})}),Object.defineProperty(Ml(n),"table",{enumerable:!0,configurable:!0,writable:!0,value:Object(Ba.a)({await:function(){return[n.props.patientViewPageStore.mutationData,n.props.patientViewPageStore.uncalledMutationData,n.props.patientViewPageStore.oncoKbAnnotatedGenes,n.props.patientViewPageStore.studyIdToStudy,n.props.patientViewPageStore.sampleToMutationGenePanelId,n.props.patientViewPageStore.genePanelIdToEntrezGeneIds]},renderPending:function(){return r.createElement(Ro.a,{isLoading:!0,size:"small"})},render:function(){return r.createElement("div",{"data-test":"GenomicEvolutionMutationTable"},r.createElement("div",{style:{float:"left",marginRight:15,marginTop:4}},r.createElement(Xa.a,{checked:n.dataStore.onlyShowSelectedInTable,onChange:function(){return n.dataStore.setOnlyShowSelectedInTable(!n.dataStore.onlyShowSelectedInTable)},labelProps:{style:{marginRight:10}},inputProps:{"data-test":"TableShowOnlyHighlighted"}},r.createElement("span",{style:{marginTop:-3}},"Show only selected mutations"))),r.createElement(Oo,{dataStore:n.dataStore,showGeneFilterMenu:n.props.patientViewPageStore.mutationTableShowGeneFilterMenu.result,currentGeneFilter:n.props.patientViewPageStore.mutationTableGeneFilterOption,onFilterGenes:n.onFilterGenesMutationTable,onRowClick:n.onTableRowClick,onRowMouseEnter:n.onTableRowMouseEnter,onRowMouseLeave:n.onTableRowMouseLeave,studyIdToStudy:n.props.patientViewPageStore.studyIdToStudy.result,sampleManager:n.props.sampleManager,sampleIds:n.props.sampleManager?n.props.sampleManager.getSampleIdsInOrder():[],uniqueSampleKeyToTumorType:n.props.patientViewPageStore.uniqueSampleKeyToTumorType,molecularProfileIdToMolecularProfile:n.props.patientViewPageStore.molecularProfileIdToMolecularProfile.result,variantCountCache:n.props.patientViewPageStore.variantCountCache,indexedVariantAnnotations:n.props.patientViewPageStore.indexedVariantAnnotations,indexedMyVariantInfoAnnotations:n.props.patientViewPageStore.indexedMyVariantInfoAnnotations,discreteCNACache:n.props.patientViewPageStore.discreteCNACache,mrnaExprRankCache:n.props.patientViewPageStore.mrnaExprRankCache,pubMedCache:n.props.patientViewPageStore.pubMedCache,genomeNexusCache:n.props.patientViewPageStore.genomeNexusCache,mrnaExprRankMolecularProfileId:n.props.patientViewPageStore.mrnaRankMolecularProfileId.result||void 0,discreteCNAMolecularProfileId:n.props.patientViewPageStore.molecularProfileIdDiscrete.result,downloadDataFetcher:n.props.patientViewPageStore.downloadDataFetcher,mutSigData:n.props.patientViewPageStore.mutSigData.result,myCancerGenomeData:n.props.patientViewPageStore.myCancerGenomeData,hotspotData:n.props.patientViewPageStore.indexedHotspotData,cosmicData:n.props.patientViewPageStore.cosmicData.result,oncoKbData:n.props.patientViewPageStore.oncoKbData,oncoKbCancerGenes:n.props.patientViewPageStore.oncoKbCancerGenes,usingPublicOncoKbInstance:n.props.patientViewPageStore.usingPublicOncoKbInstance,civicGenes:n.props.patientViewPageStore.civicGenes,civicVariants:n.props.patientViewPageStore.civicVariants,userEmailAddress:at.a.getUserEmailAddress(),enableOncoKb:at.b.serverConfig.show_oncokb,enableFunctionalImpact:at.b.serverConfig.show_genomenexus,enableHotspot:at.b.serverConfig.show_hotspot,enableMyCancerGenome:at.b.serverConfig.mycancergenome_show,enableCivic:at.b.serverConfig.show_civic,columnVisibility:n.props.mutationTableColumnVisibility,columnVisibilityProps:{onColumnToggled:n.props.onMutationTableColumnVisibilityToggled},sampleToGenePanelId:n.props.patientViewPageStore.sampleToMutationGenePanelId.result,genePanelIdToEntrezGeneIds:n.props.patientViewPageStore.genePanelIdToEntrezGeneIds.result,generateGenomeNexusHgvsgUrl:n.props.patientViewPageStore.generateGenomeNexusHgvsgUrl,sampleIdToClinicalDataMap:n.props.patientViewPageStore.clinicalDataGroupedBySampleMap,existsSomeMutationWithAscnProperty:n.props.patientViewPageStore.existsSomeMutationWithAscnProperty}))}})}),Object.defineProperty(Ml(n),"timeline",{enumerable:!0,configurable:!0,writable:!0,value:Object(Ba.a)({await:function(){return[n.props.patientViewPageStore.clinicalEvents]},render:function(){return null!==n.props.sampleManager&&n.props.patientViewPageStore.clinicalEvents.result.length>0?r.createElement("div",{style:{marginBottom:20}},r.createElement("button",{className:"btn btn-xs btn-default displayBlock",onClick:n.toggleTimeline,"data-test":"ToggleTimeline"},n.showTimeline?"Hide Timeline":"Show Timeline"),n.showTimeline&&r.createElement("div",{style:{marginTop:10}},r.createElement(Tl,{key:"tlkey-".concat(ra.a.size.width,"-").concat(n.showTimeline,"1"),dataStore:n.dataStore,caseMetaData:{color:n.props.sampleManager.sampleColors,label:n.props.sampleManager.sampleLabels,index:n.props.sampleManager.sampleIndex},data:n.props.patientViewPageStore.clinicalEvents.result,sampleManager:n.props.sampleManager,width:ra.a.size.width,samples:n.props.patientViewPageStore.samples.result,mutationProfileId:n.props.patientViewPageStore.mutationMolecularProfileId.result,headerWidth:150}))):null}})}),Object.defineProperty(Ml(n),"tabUI",{enumerable:!0,configurable:!0,writable:!0,value:Object(Ba.a)({await:function(){return[n.table,n.vafLineChart,n.timeline]},renderPending:function(){return r.createElement(Ro.a,{isLoading:!0,size:"big",center:!0})},render:function(){return r.createElement("div",{"data-test":"GenomicEvolutionTab"},r.createElement(Mo.b,{activeTabId:n.plotTab,onTabClick:n.setPlotTab,className:"secondaryNavigation vafVizNavTabs",unmountOnHide:!1},r.createElement(Mo.a,{id:Rl.LINE_CHART,linkText:"Line Chart"},r.createElement("div",{style:{paddingBottom:10,width:ra.a.size.width-50}},n.timeline.component,n.vafLineChart.component)),r.createElement(Mo.a,{id:Rl.HEATMAP,linkText:"Heatmap"},r.createElement("div",{style:{paddingBottom:10}},r.createElement(di,{store:n.props.patientViewPageStore,dataStore:n.dataStore,sampleManager:n.props.sampleManager,urlWrapper:n.props.urlWrapper})))),r.createElement("div",{style:{marginTop:20}},n.table.component))}})}),Object(T.makeObservable)(Ml(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Al(e,t)}(t,r["Component"]),n=t,(o=[{key:"toggleTimeline",value:function(){this.showTimeline=!this.showTimeline}},{key:"setPlotTab",value:function(e){this._plotTab=e,localStorage.setItem(Ll,e)}},{key:"vafLineChartSvgRef",value:function(e){this.vafLineChartSvg=e}},{key:"onTableRowClick",value:function(e){e.length&&this.dataStore.toggleSelectedMutation(e[0])}},{key:"onTableRowMouseEnter",value:function(e){e.length&&this.dataStore.setMouseOverMutation(e[0])}},{key:"onTableRowMouseLeave",value:function(){this.dataStore.setMouseOverMutation(null)}},{key:"onFilterGenesMutationTable",value:function(e){this.props.patientViewPageStore.mutationTableGeneFilterOption=e}},{key:"render",value:function(){return this.tabUI.component}},{key:"showTimeline",get:function(){return"true"===this.props.urlWrapper.query.genomicEvolutionSettings.showTimeline},set:function(e){this.props.urlWrapper.updateURL({genomicEvolutionSettings:Object.assign({},this.props.urlWrapper.query.genomicEvolutionSettings,{showTimeline:e.toString()})})}},{key:"vafLineChartLogScale",get:function(){return"true"===this.props.urlWrapper.query.genomicEvolutionSettings.logScaleChart},set:function(e){this.props.urlWrapper.updateURL(function(t){return t.genomicEvolutionSettings.logScaleChart=e.toString(),t})}},{key:"vafLineChartZeroToOneYAxis",get:function(){var e=this.props.urlWrapper.query.genomicEvolutionSettings.yAxisDataRangeInChart;return!e||"true"===e},set:function(e){this.props.urlWrapper.updateURL(function(t){return t.genomicEvolutionSettings.yAxisDataRangeInChart=e.toString(),t})}},{key:"plotTab",get:function(){return this._plotTab}},{key:"mergedMutations",get:function(){return this.props.patientViewPageStore.mergedMutationDataIncludingUncalledFilteredByGene.filter(function(e){return!Object(xt.u)(e[0])})}}])&&xl(n.prototype,o),a&&xl(n,a),t}();Nl([T.action.bound],Gl.prototype,"toggleTimeline",null),Nl([T.observable],Gl.prototype,"_plotTab",void 0),Nl([T.computed],Gl.prototype,"plotTab",null),Nl([T.action.bound],Gl.prototype,"setPlotTab",null),Nl([H.default],Gl.prototype,"vafLineChartSvgRef",null),Nl([T.computed],Gl.prototype,"mergedMutations",null),Nl([H.default],Gl.prototype,"onTableRowClick",null),Nl([H.default],Gl.prototype,"onTableRowMouseEnter",null),Nl([H.default],Gl.prototype,"onTableRowMouseLeave",null),Nl([H.default],Gl.prototype,"onFilterGenesMutationTable",null);var Vl=Gl=Nl([wt.observer],Gl),Fl=n(868),Bl=n(359),Ul=n(415),Hl=n(1178),Wl=n.n(Hl),ql=n(407);function zl(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Kl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yl(e){return(Yl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zl(e,t){return(Zl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ql(e){return(Ql="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var $l=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Ql(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},Jl=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=Yl(t).call(this,e),n=!o||"object"!==Ql(o)&&"function"!=typeof o?Xl(r):o,Object.defineProperty(Xl(n),"filter",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(Xl(n),"genesDividedToColumns",{enumerable:!0,configurable:!0,writable:!0,value:function(e){for(var t=[],r=n.columnCount,o=zl(e);r>0;){var i=Object(a.chunk)(o,Math.ceil(o.length/r));if(i.length===r){t=t.concat(i);break}t.push(i[0]),o=o.slice(Object(a.flatten)(t).length),r--}return t}}),Object.defineProperty(Xl(n),"getDownloadData",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e=[["Genes"]].concat(zl(n.props.genePanel.genes.map(function(e){return[e.hugoGeneSymbol]})));return Object(Ul.a)(e)}}),Object.defineProperty(Xl(n),"genesDividedToRows",{enumerable:!0,configurable:!0,writable:!0,value:function(e){for(var t=n.genesDividedToColumns(e),r=[],o=n.geneCountPerColumn(e.length),a=0;a<o;a++){for(var i=[],l=0;l<n.columnCount;l++)i.push(t[l]&&t[l][a]?t[l][a].hugoGeneSymbol:"");r.push(i)}return r}}),Object.defineProperty(Xl(n),"geneCountPerColumn",{enumerable:!0,configurable:!0,writable:!0,value:function(e){return Math.ceil(e/n.columnCount)}}),Object(T.makeObservable)(Xl(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zl(e,t)}(t,r["Component"]),n=t,(o=[{key:"handleChangeInput",value:function(e){this.filter=e}},{key:"render",value:function(){var e=this;return r.createElement("div",{id:this.props.id,className:Wl.a.genesList},r.createElement("h4",{className:Wl.a.panelName},this.props.genePanel.genePanelId),r.createElement("span",null,"Number of genes: ",this.props.genePanel.genes.length),r.createElement("div",{className:wi()("pull-right has-feedback input-group-sm",Wl.a.searchInput)},r.createElement("input",{type:"text",value:this.filter,onInput:function(t){return e.handleChangeInput(t.target.value)},className:"form-control"}),r.createElement("span",{className:"fa fa-search form-control-feedback","aria-hidden":"true"})),r.createElement(Bl.a,{className:wi()("pull-right",Wl.a.copyDownloadControls),downloadData:this.getDownloadData,downloadFilename:"gene_panel_".concat(this.props.genePanel.genePanelId,".tsv"),controlsStyle:"BUTTON",containerId:this.props.id}),r.createElement(ql.a,{headers:this.renderTableHeaders,rows:this.renderTableRows,noRowsText:"No matches"}))}},{key:"filteredGenes",get:function(){var e=this.props.genePanel.genes;if(this.filter){var t=new RegExp(this.filter,"i");return e.filter(function(e){return t.test(e.entrezGeneId.toString())||t.test(e.hugoGeneSymbol)})}return e}},{key:"renderTableRows",get:function(){var e=this.filteredGenes;if(0===e.length)return[];var t=[];return this.genesDividedToRows(e).forEach(function(e){var n=e.map(function(e){return r.createElement("td",{key:e||Math.random()},e)});t.push(r.createElement("tr",null,n))}),t}},{key:"columnCount",get:function(){return this.props.columns||1}},{key:"renderTableHeaders",get:function(){return[r.createElement("th",null,"Genes")].concat(Array(this.columnCount-1).fill(r.createElement("th",null)))}}])&&Kl(n.prototype,o),i&&Kl(n,i),t}();$l([T.observable],Jl.prototype,"filter",void 0),$l([T.action.bound],Jl.prototype,"handleChangeInput",null),$l([T.computed],Jl.prototype,"filteredGenes",null),$l([T.computed],Jl.prototype,"renderTableRows",null),$l([T.computed],Jl.prototype,"columnCount",null),$l([T.computed],Jl.prototype,"renderTableHeaders",null);var eu=Jl=$l([wt.observer],Jl);function tu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nu(e,t){return!t||"object"!==au(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ru(e){return(ru=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ou(e,t){return(ou=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function au(e){return(au="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var iu=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":au(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},lu=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),nu(this,ru(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ou(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement(Fl.a,{panelName:"Gene Panel",show:this.props.show,onHide:this.props.onHide,className:Wl.a.patientViewModal},r.createElement(eu,{id:"patient-view-gene-panel",genePanel:this.props.genePanel,columns:this.props.columns}))}}])&&tu(n.prototype,o),a&&tu(n,a),t}(),uu=lu=iu([wt.observer],lu),su=n(993),cu=n(943),pu=n(336);n(994),n(995),n(996);function fu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function du(e){return(du=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hu(e,t){return(hu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yu(e){return(yu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var bu=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":yu(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},gu=Object(pu.f)(!0,!0,!0),vu=function(e){function t(e){var r,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,a=du(t).call(this,e),r=!a||"object"!==yu(a)&&"function"!=typeof a?mu(o):a,Object.defineProperty(mu(r),"PathwayMapperComponent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object(T.makeObservable)(mu(r)),n.e(9).then(n.t.bind(null,1765,7)).then(function(e){r.PathwayMapperComponent=e.default}),r}var o,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hu(e,t)}(t,r["Component"]),o=t,(a=[{key:"render",value:function(){return this.PathwayMapperComponent?r.createElement("div",{className:"pathwayMapper"},r.createElement("div",{"data-test":"pathwayMapperTabDiv",className:"cBioMode",style:{width:"99%"}},r.createElement(vt.Row,null,r.createElement(this.PathwayMapperComponent,{isCBioPortal:!0,isCollaborative:!1,genes:this.queryGenes,cBioAlterationData:this.alterationFrequencyData,sampleIconData:this.sampleIconData,tableComponent:this.renderTable,patientView:!0})))):null}},{key:"renderTable",value:function(e,t,n){return r.createElement(su.b,{data:e,selectedPathway:t,changePathway:n,columnsOverride:(o={},a=su.a.SCORE,i={name:"Pathway altered",tooltip:r.createElement("span",null,"Whether Genes in the Pathway Were Altered"),render:function(e){return r.createElement("span",null,r.createElement("b",null,e.score>0?"Yes":"No"))}},a in o?Object.defineProperty(o,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[a]=i,o)});var o,a,i}},{key:"queryGenes",get:function(){return Object(cu.c)(this.alterationFrequencyData)}},{key:"alterationFrequencyData",get:function(){return this.alterationFrequencyDataForQueryGenes}},{key:"alterationFrequencyDataForQueryGenes",get:function(){var e=this,t=[];return this.props.store.mergedMutationDataIncludingUncalledFilteredByGene.forEach(function(n){var r,o={gene:n[0].gene.hugoGeneSymbol,altered:1,sequenced:1,percentAltered:n[0].mutationType,geneticTrackRuleSetParams:gu,geneticTrackData:Object(cu.b)(e.props.store.geneticTrackData.result,n[0].gene.hugoGeneSymbol,null===(r=e.props.sampleManager)||void 0===r?void 0:r.sampleIndex)};o&&t.push(o)}),this.props.store.mergedDiscreteCNADataFilteredByGene.forEach(function(n){var r,o={gene:n[0].gene.hugoGeneSymbol,altered:1,sequenced:1,percentAltered:Object(cu.a)(n[0].alteration),geneticTrackRuleSetParams:gu,geneticTrackData:Object(cu.b)(e.props.store.geneticTrackData.result,n[0].gene.hugoGeneSymbol,null===(r=e.props.sampleManager)||void 0===r?void 0:r.sampleIndex)};o&&t.push(o)}),t}},{key:"sampleIconData",get:function(){return this.props.sampleManager?{sampleIndex:this.props.sampleManager.sampleIndex,sampleColors:this.props.sampleManager.sampleColors}:{sampleIndex:{},sampleColors:{}}}}])&&fu(o.prototype,a),i&&fu(o,i),t}();bu([T.observable.ref],vu.prototype,"PathwayMapperComponent",void 0),bu([T.computed],vu.prototype,"queryGenes",null),bu([T.computed],vu.prototype,"alterationFrequencyData",null),bu([T.computed],vu.prototype,"alterationFrequencyDataForQueryGenes",null),bu([T.computed],vu.prototype,"sampleIconData",null),bu([H.default],vu.prototype,"renderTable",null);var wu=vu=bu([wt.observer],vu),Su=n(846),Ou=n(944);function Eu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pu(e){return(Pu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cu(e,t){return(Cu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Iu(e){return(Iu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var _u=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Iu(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},ku=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=Pu(t).call(this,e))||"object"!==Iu(o)&&"function"!=typeof o?Tu(r):o,Object(T.makeObservable)(Tu(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cu(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement(G.b,{columns:this.columns,data:this.data,showPagination:!1})}},{key:"data",get:function(){var e=Object(g.zb)(this.props.sampleManager.getSampleIdsInOrder());return i.a.sortBy(this.props.data,function(t){return e[t.sample.sampleId]})}},{key:"columns",get:function(){var e=this;return[{name:"Sample",sortBy:function(e){return e.sample.sampleId},render:function(t){return e.props.sampleManager.getComponentForSample(t.sample.sampleId)||r.createElement("span",null,t.sample.sampleId)}},{name:"Resources",render:function(t){return r.createElement(r.Fragment,null,i.a.sortBy(t.resources,function(e){return e.resourceDefinition.priority}).map(function(t){return r.createElement(Ou.a,{resource:t,isTabOpen:e.props.isTabOpen,openResource:e.props.openResource})}))}}]}}])&&Eu(n.prototype,o),a&&Eu(n,a),t}();_u([T.computed],ku.prototype,"data",null),_u([T.computed],ku.prototype,"columns",null);var xu=ku=_u([wt.observer],ku);function ju(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mu(e){return(Mu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Au(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Du(e,t){return(Du=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ru(e){return(Ru="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Nu=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Ru(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},Lu=function(e){function t(){var e,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=Mu(t).apply(this,arguments),e=!o||"object"!==Ru(o)&&"function"!=typeof o?Au(n):o,Object.defineProperty(Au(e),"sampleRows",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[e.props.store.samples,e.props.store.sampleResourceData]},invoke:function(){var t=e.props.store.sampleResourceData.result,n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e.props.store.samples.result[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var u=i.value,s=t[u.sampleId];s&&s.length&&n.push({sample:u,resources:s})}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return Promise.resolve(n)}})}),Object.defineProperty(Au(e),"sampleResources",{enumerable:!0,configurable:!0,writable:!0,value:Object(Ba.a)({await:function(){return[e.sampleRows]},render:function(){return e.props.sampleManager&&e.sampleRows.result.length>0?r.createElement("div",{className:"resourcesSection"},r.createElement("h4",{className:"blackHeader"},"Sample Resources"),r.createElement(xu,{data:e.sampleRows.result,sampleManager:e.props.sampleManager,isTabOpen:e.props.store.isResourceTabOpen,openResource:e.props.openResource})):null}})}),Object.defineProperty(Au(e),"patientResources",{enumerable:!0,configurable:!0,writable:!0,value:Object(Ba.a)({await:function(){return[e.props.store.patientResourceData]},render:function(){return e.props.store.patientResourceData.result.length>0?r.createElement("div",{className:"resourcesSection"},r.createElement("h4",{className:"blackHeader"},"Patient Resources for ",e.props.store.patientId),i.a.sortBy(e.props.store.patientResourceData.result,function(e){return parseFloat(e.resourceDefinition.priority)}).map(function(t){return r.createElement(Ou.a,{resource:t,isTabOpen:e.props.store.isResourceTabOpen,openResource:e.props.openResource})})):null}})}),Object.defineProperty(Au(e),"studyResources",{enumerable:!0,configurable:!0,writable:!0,value:Object(Ba.a)({await:function(){return[e.props.store.studyResourceData,e.props.store.studies]},render:function(){return e.props.store.studyResourceData.result.length>0?r.createElement("div",{className:"resourcesSection"},r.createElement("h4",{className:"blackHeader"},"Study Resources for"," ",e.props.store.studies.result[0].name),i.a.sortBy(e.props.store.studyResourceData.result,function(e){return e.resourceDefinition.priority}).map(function(t){return r.createElement(Ou.a,{resource:t,isTabOpen:e.props.store.isResourceTabOpen,openResource:e.props.openResource})})):null}})}),e}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Du(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement("div",{className:"resourcesTab"},r.createElement(Su.a,{title:"Files & Links",isLoading:this.sampleResources.isPending||this.patientResources.isPending||this.studyResources.isPending,className:"pull-left"}),r.createElement("br",null),r.createElement("br",null),r.createElement("div",null,this.patientResources.component,this.sampleResources.component,this.studyResources.component))}}])&&ju(n.prototype,o),a&&ju(n,a),t}(),Gu=Lu=Nu([wt.observer],Lu),Vu=n(997);function Fu(){return(Fu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Bu(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Uu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Hu=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"getData",value:function(e,t,n,r,o,i){var l;if(e){var u=void 0,s="complete",c=!1,p=!1,f=!1,d=!1,m=!1,h=!1;if(t&&!(t instanceof Error)&&!(t.result instanceof Error)){var y=a.keyBy(t.result,function(e){return e.entrezGeneId});d=void 0!==y[e[0].site1EntrezGeneId],h=void 0!==y[e[0].site2EntrezGeneId],f=d&&y[e[0].site1EntrezGeneId].oncokbAnnotated,m=h&&y[e[0].site2EntrezGeneId].oncokbAnnotated,c=f||m,p=d||h}var b=[lt.f.BIOLOGICAL];n&&n.result instanceof Error?s="error":c&&(n&&n.result&&!(n.result instanceof Error)&&n.isComplete&&(u=this.getIndicatorData(e,n.result,o,i),b=a.uniq([].concat(Bu(b),Bu(Object(lt.m)(a.values(n.result.indicatorMap)))))),s=n?n.status:"pending");var g=e[0].site1HugoSymbol,v=e[0].site2HugoSymbol,w=g;c?w=f?g:v:p&&(w=d?g:v),l={hugoGeneSymbol:w,oncoKbStatus:s,oncoKbIndicator:u,oncoKbGeneExist:c,isOncoKbCancerGene:p,usingPublicOncoKbInstance:void 0===r?Ue.D:r,civicEntry:void 0,civicStatus:"complete",hasCivicVariants:!1,myCancerGenomeLinks:[],hotspotStatus:"complete",isHotspot:!1,is3dHotspot:!1,oncoKbAvailableDataTypes:b}}else l=Ue.e;return l}},{key:"getIndicatorData",value:function(e,t,n,r){if(null!==n&&null!==t.indicatorMap){var o=Object(lt.M)(e[0].site1EntrezGeneId,e[0].site2EntrezGeneId,n[e[0].uniqueSampleKey]);if(t.indicatorMap[o]){var a=t.indicatorMap[o];if(null===a.query.tumorType&&r){var i=r[e[0].studyId];"mixed"!==i.cancerTypeId&&(a.query.tumorType=i.cancerType.name)}return a}}}},{key:"sortValue",value:function(e,t,n,r,o){var i=this.getData(e,t,r,n,o);return a.flatten([Object(Ue.pb)(i.oncoKbIndicator),Object(Ue.I)(i.civicEntry),i.isOncoKbCancerGene?1:0])}},{key:"headerRender",value:function(e,t){return r.createElement(ur.a,{name:e,width:t})}},{key:"renderFunction",value:function(e,t){var n=this.getData(e,t.oncoKbCancerGenes,t.oncoKbData,t.usingPublicOncoKbInstance,t.uniqueSampleKeyToTumorType,t.studyIdToStudy);return r.createElement(Ue.m,Fu({},t,{annotation:n}))}}],(n=null)&&Uu(t.prototype,n),o&&Uu(t,o),e}(),Wu=n(166);function qu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ku(e,t){return!t||"object"!==$u(t)&&"function"!=typeof t?Yu(e):t}function Yu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xu(e){return(Xu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zu(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qu(e,t)}function Qu(e,t){return(Qu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $u(e){return($u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ju=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":$u(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},es=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function l(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,l)}u((r=r.apply(e,t||[])).next())})},ts=function(e){function t(){return zu(this,t),Ku(this,Xu(t).apply(this,arguments))}return Zu(t,G["b"]),t}(),ns=function(e){function t(e){var n;return zu(this,t),n=Ku(this,Xu(t).call(this,e)),Object.defineProperty(Yu(n),"oncokbWidth",{enumerable:!0,configurable:!0,writable:!0,value:22}),Object.defineProperty(Yu(n),"oncokbInterval",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(Yu(n),"columns",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.props.store.sampleManager,n.props.store.sampleToStructuralVariantGenePanelId,n.props.store.genePanelIdToEntrezGeneIds,n.props.store.structuralVariantTableShowGeneFilterMenu,n.props.store.oncoKbAnnotatedGenes,n.props.store.studyIdToStudy,n.props.store.oncoKbCancerGenes]},invoke:function(){return es(Yu(n),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],this.props.store.sampleIds.length>=2&&t.push({name:"Samples",render:function(e){return Wt.renderFunction(e.map(function(e){return{sampleId:e.sampleId,entrezGeneId:e.site1EntrezGeneId}}),o.props.store.sampleManager.result,o.props.store.sampleToStructuralVariantGenePanelId.result,o.props.store.genePanelIdToEntrezGeneIds.result,o.props.onSelectGenePanel)},sortBy:function(e){return Wt.getSortValue(e,o.props.store.sampleManager.result)},download:function(e){return Wt.getSample(e)},order:20,resizable:!0}),t.push({name:"Gene 1",render:function(e){return r.createElement("span",{"data-test":"sv-table-gene1-column"},e[0].site1HugoSymbol)},filter:function(e,t,n){return e[0].site1HugoSymbol.indexOf(n)>-1},download:function(e){return e[0].site1HugoSymbol},sortBy:function(e){return e[0].site1HugoSymbol},headerRender:function(e){return r.createElement(vr,{name:e,showIcon:o.props.store.structuralVariantTableShowGeneFilterMenu.result},r.createElement(kt,{onOptionChanged:o.props.store.onFilterGenesStructuralVariantTable,currentSelection:o.props.store.structuralVariantTableGeneFilterOption}))},visible:!0,order:30}),t.push({name:"Gene 2",render:function(e){return r.createElement("span",{"data-test":"sv-table-gene2-column"},e[0].site2HugoSymbol)},filter:function(e,t,n){return(e[0].site2HugoSymbol||"").indexOf(n)>-1},download:function(e){return e[0].site2HugoSymbol},sortBy:function(e){return e[0].site2HugoSymbol},headerRender:function(e){return r.createElement(vr,{name:e,showIcon:o.props.store.structuralVariantTableShowGeneFilterMenu.result},r.createElement(kt,{onOptionChanged:o.props.store.onFilterGenesStructuralVariantTable,currentSelection:o.props.store.structuralVariantTableGeneFilterOption}))},visible:!0,order:35}),n=function(e){return{data:e.map(function(e){return{sampleId:e.sampleId,entrezGeneId:e.site1EntrezGeneId}}),sampleToGenePanelId:o.props.store.sampleToStructuralVariantGenePanelId.result,sampleManager:o.props.store.sampleManager.result,genePanelIdToGene:o.props.store.genePanelIdToEntrezGeneIds.result,onSelectGenePanel:o.props.onSelectGenePanel}},t.push({name:"Gene panel",render:function(e){return Ar.renderFunction(n(e))},download:function(e){return Ar.download(n(e))},sortBy:function(e){return Ar.getGenePanelIds(n(e))},visible:!1,order:40}),t.push({name:"Annotation",headerRender:function(e){return Hu.headerRender(e,o.oncokbWidth)},render:function(e){return r.createElement("span",{id:"sv-annotation"},Hu.renderFunction(e,{uniqueSampleKeyToTumorType:o.props.store.uniqueSampleKeyToTumorType,oncoKbData:o.props.store.structuralVariantOncoKbData,oncoKbCancerGenes:o.props.store.oncoKbCancerGenes,usingPublicOncoKbInstance:o.props.store.usingPublicOncoKbInstance,enableOncoKb:at.b.serverConfig.show_oncokb,pubMedCache:o.props.store.pubMedCache,enableCivic:!1,enableMyCancerGenome:!1,enableHotspot:!1,userEmailAddress:at.a.getUserEmailAddress(),studyIdToStudy:o.props.store.studyIdToStudy.result}))},sortBy:function(e){return Hu.sortValue(e,o.props.store.oncoKbCancerGenes,o.props.store.usingPublicOncoKbInstance,o.props.store.structuralVariantOncoKbData,o.props.store.uniqueSampleKeyToTumorType)},order:45}),t.push({name:"Variant Class",render:function(e){return r.createElement("span",null,e[0].variantClass)},filter:function(e,t,n){return e[0].variantClass.toUpperCase().indexOf(n)>-1},download:function(e){return e[0].variantClass},sortBy:function(e){return e[0].variantClass},visible:!0,order:50}),t.push({name:"Site1 Chromosome",render:function(e){return r.createElement("span",null,Wu.a.getData(e.map(function(e){return{chr:e.site1Chromosome}})))},download:function(e){return Wu.a.getData(e.map(function(e){return{chr:e.site1Chromosome}}))||""},sortBy:function(e){return Wu.a.getSortValue(e.map(function(e){return{chr:e.site1Chromosome}}))},filter:function(e,t,n){return(Wu.a.getData(e.map(function(e){return{chr:e.site1Chromosome}}))+"").toUpperCase().includes(n)},visible:!1,order:51}),t.push({name:"Site2 Chromosome",render:function(e){return r.createElement("span",null,Wu.a.getData(e.map(function(e){return{chr:e.site2Chromosome}})))},download:function(e){return Wu.a.getData(e.map(function(e){return{chr:e.site2Chromosome}}))||""},sortBy:function(e){return Wu.a.getSortValue(e.map(function(e){return{chr:e.site2Chromosome}}))},filter:function(e,t,n){return(Wu.a.getData(e.map(function(e){return{chr:e.site2Chromosome}}))+"").toUpperCase().includes(n)},visible:!1,order:52}),t.push({name:"Site1 Position",render:function(e){return r.createElement("span",null,e[0].site1Position)},download:function(e){return"".concat(e[0].site1Position)},sortBy:function(e){return"".concat(e[0].site1Position)},visible:!1,order:55}),t.push({name:"Site2 Position",render:function(e){return r.createElement("span",null,e[0].site2Position)},download:function(e){return"".concat(e[0].site2Position)},sortBy:function(e){return"".concat(e[0].site2Position)},visible:!1,order:65}),t.push({name:"Event Info",render:function(e){return r.createElement("span",null,e[0].eventInfo)},download:function(e){return e[0].eventInfo},sortBy:function(e){return e[0].eventInfo},visible:!0,order:66}),t.push({name:"Connection Type",render:function(e){return r.createElement("span",null,e[0].connectionType)},download:function(e){return e[0].connectionType},sortBy:function(e){return e[0].connectionType},visible:!0,order:70}),t.push({name:"Breakpoint Type",render:function(e){return r.createElement("span",null,e[0].breakpointType)},download:function(e){return e[0].breakpointType},sortBy:function(e){return e[0].breakpointType},visible:!1,order:75}),t.push({name:"Additional Annotation",render:function(e){return r.createElement("span",null,e[0].annotation)},download:function(e){return e[0].annotation},sortBy:function(e){return e[0].annotation},visible:!1,order:80}),e.abrupt("return",a.sortBy(t,function(e){return e.order}));case 18:case"end":return e.stop()}},e,this)}))},default:[]})}),Object.defineProperty(Yu(n),"tableUI",{enumerable:!0,configurable:!0,writable:!0,value:Object(Ba.a)({await:function(){return[n.props.store.structuralVariantProfile,n.props.store.groupedStructuralVariantData,n.columns]},render:function(){return void 0===n.props.store.structuralVariantProfile.result?r.createElement("div",{className:"alert alert-info",role:"alert"},"Structural Variants are not available."):r.createElement(ts,{columns:n.columns.result,data:n.props.store.groupedStructuralVariantData.result,initialSortColumn:"Annotation",initialSortDirection:"desc",initialItemsPerPage:10,itemsLabel:"Structural Variants",itemsLabelPlural:"Structural Variants",showCountHeader:!0})},renderPending:function(){return r.createElement(Ro.a,{isLoading:!0})},renderError:function(){return r.createElement(Ya.a,null)}})}),Object(T.makeObservable)(Yu(n)),n.oncokbInterval=setInterval(function(){var e,t,r,o;(null===(t=null===(e=document.getElementById("sv-annotation"))||void 0===e?void 0:e.getElementsByClassName("oncokb-content")[0])||void 0===t?void 0:t.clientWidth)&&(n.oncokbWidth=Number(null===(o=null===(r=document.getElementById("sv-annotation"))||void 0===r?void 0:r.getElementsByClassName("oncokb-content")[0])||void 0===o?void 0:o.clientWidth)||22,clearInterval(n.oncokbInterval))},500),n}var n,o,i;return Zu(t,r["Component"]),n=t,(o=[{key:"destroy",value:function(){clearInterval(this.oncokbInterval)}},{key:"render",value:function(){return this.tableUI.component}}])&&qu(n.prototype,o),i&&qu(n,i),t}();Ju([T.observable],ns.prototype,"oncokbWidth",void 0);var rs=ns=Ju([wt.observer],ns);function os(e){return(os="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function as(e,t){return!t||"object"!==os(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function is(e){return(is=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ls(e,t){return(ls=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var us=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),as(this,is(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ls(e,t)}(t,G["b"]),t}();var ss=function(e){var t,n,r=e.clinicalEvents,a=(t=r,n=i.a.groupBy(t,function(e){return e.eventType}),i.a.mapValues(n,function(e){return dl(e)}));return o.a.createElement("div",null,i.a.map(a,function(e,t){var n,r=e[0].reduce(function(e,t,n){return["PATIENT_ID"].includes(t)&&e.push(n),e},[]),a=e.map(function(e,t){return e.filter(function(e,t){return!r.includes(t)})});return o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",{className:"pull-left",style:{textTransform:"capitalize"}},t.toLowerCase()),o.a.createElement(us,{data:a.slice(1),columns:(n=a,n[0].map(function(e,t){return{name:e,render:function(e){return o.a.createElement("span",null,e[t])},download:function(e){return e[t]},sortBy:function(e){return e[t]},filter:function(e,t,n){return e.toUpperCase().includes(n)}}})),showPagination:!1,showColumnVisibility:!1,showFilter:!0,showCopyDownload:!0}))}))},cs=n(1285),ps=n.n(cs);function fs(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ds(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ms(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hs(e,t){return!t||"object"!==ws(t)&&"function"!=typeof t?ys(e):t}function ys(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bs(e){return(bs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gs(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vs(e,t)}function vs(e,t){return(vs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ws(e){return(ws="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ss=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ws(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},Os=function(e){function t(){return ms(this,t),hs(this,bs(t).apply(this,arguments))}return gs(t,G["b"]),t}();var Es=function(e){function t(e){var n;return ms(this,t),n=hs(this,bs(t).call(this,e)),Object.defineProperty(ys(n),"firstCol",{enumerable:!0,configurable:!0,writable:!0,value:"name"}),Object(T.makeObservable)(ys(n)),n}var n,o,a;return gs(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement(Os,{columns:this.columns,data:this.tableData,showPagination:!1,initialItemsPerPage:B.b,showColumnVisibility:!1,initialSortColumn:this.uniqueSamples[0].id,initialSortDirection:"desc"})}},{key:"uniqueSamples",get:function(){return i.a.map(i.a.uniqBy(this.props.data,"sampleId"),function(e){return{id:e.sampleId}})}},{key:"tableData",get:function(){return function(e){var t=[],n=i()(e).groupBy(function(e){return e.meta.name}).map(function(e,t){return{name:t,samples:e}}).value(),r=!0,o=!1,a=void 0;try{for(var l,u=n[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var s=l.value,c={name:"",sampleValues:{}};c.name=s.name;var p=!0,f=!1,d=void 0;try{for(var m,h=s.samples[Symbol.iterator]();!(p=(m=h.next()).done);p=!0){var y=m.value;c.sampleValues[y.sampleId]={value:y.value,confidence:y.confidence}}}catch(e){f=!0,d=e}finally{try{p||null==h.return||h.return()}finally{if(f)throw d}}t.push(c)}}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return t}(this.props.data)}},{key:"columns",get:function(){var e=this;return[{name:"Mutational Signature",render:function(t){return r.createElement("span",null,t[e.firstCol])},download:function(t){return"".concat(t[e.firstCol])},filter:function(t,n,r){return t[e.firstCol].toString().toUpperCase().indexOf(r)>-1},sortBy:function(t){return t[e.firstCol]}}].concat(fs(this.uniqueSamples.map(function(e){return{name:e.id,render:function(t){return t.sampleValues[e.id].confidence<Tn?r.createElement("span",{className:ps.a.mutationalSignatureValue},Object(er.c)(t.sampleValues[e.id].value)):r.createElement("span",null,Object(er.c)(t.sampleValues[e.id].value))},download:function(t){return"".concat(Object(er.c)(t.sampleValues[e.id].value))},filter:function(t,n,r){return Object(er.c)(t.sampleValues[e.id].value).toUpperCase().indexOf(r)>-1},sortBy:function(t){return t.sampleValues[e.id].value}}})))}}])&&ds(n.prototype,o),a&&ds(n,a),t}();Ss([T.computed],Es.prototype,"uniqueSamples",null),Ss([T.computed],Es.prototype,"tableData",null),Ss([T.computed],Es.prototype,"columns",null);var Ps=Es=Ss([wt.observer],Es);function Ts(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Cs(e){return(Cs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Is(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _s(e,t){return(_s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ks(e){return(ks="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var xs=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ks(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},js=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=Cs(t).call(this,e))||"object"!==ks(o)&&"function"!=typeof o?Is(r):o,Object(T.makeObservable)(Is(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_s(e,t)}(t,r["Component"]),n=t,(o=[{key:"onVersionChange",value:function(e){this.props.onVersionChange(e.value)}},{key:"render",value:function(){return r.createElement("div",{"data-test":"MutationalSignaturesContainer"},r.createElement("div",null,r.createElement("div",{style:{display:"flex",alignItems:"center"}},r.createElement("strong",null,"Mutational Signatures Version:"),r.createElement("div",{style:{display:"inline-block",marginLeft:5,width:400}},r.createElement(mi.default,{className:"basic-single",name:"mutationalSignaturesVersionSelector",classNamePrefix:"mutationalSignaturesVersionSelector",value:_n(this.selectedVersion),onChange:this.onVersionChange,options:(e=this.availableVersions,e.map(function(e){return _n(e)})),searchable:!1,clearable:!1})))),this.props.data&&r.createElement("div",null,r.createElement(Su.a,{title:"Mutational Signatures",isLoading:!1,className:"pull-left"}),r.createElement(Ps,{data:this.props.data[this.props.version]})));var e}},{key:"availableVersions",get:function(){return i.a.chain(this.props.profiles).map(function(e){return i.a.last(e.molecularProfileId.split("_"))}).uniq().value()}},{key:"selectedVersion",get:function(){var e=this;return i.a.find(this.availableVersions,function(t){return t===e.props.version})||this.availableVersions[0]}}])&&Ts(n.prototype,o),a&&Ts(n,a),t}();xs([T.computed],js.prototype,"availableVersions",null),xs([T.computed],js.prototype,"selectedVersion",null),xs([T.action.bound],js.prototype,"onVersionChange",null);var Ms=js=xs([wt.observer],js);n(460);function As(e){return(As="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ds(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rs(e,t){return!t||"object"!==As(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ns(e){return(Ns=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ls(e,t){return(Ls=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Gs=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Rs(this,Ns(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ls(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e,t,n=(e=this.props.data[this.props.version],t=this.props.sampleId,i.a.chain(e).filter(function(e){return e.sampleId===t}).filter(function(e){return e.confidence<Tn}).sortBy(function(e){return-e.value}).value());return i.a.isEmpty(n)?null:r.createElement(g.i,{placement:"bottomLeft",trigger:["hover","focus"],overlay:this.makeTooltipContent(n),destroyTooltipOnHide:!1,onPopupAlign:g.tb},this.makeProgressBar(n))}},{key:"makeTooltipContent",value:function(e){return r.createElement("div",{style:{maxWidth:250},"data-test":"SignificantMutationalSignaturesTooltip"},r.createElement("div",null,i.a.map(e,function(e){return r.createElement("div",null,r.createElement("a",{href:e.meta.url},e.meta.name),":",r.createElement("span",null,e.meta.description))})),r.createElement("hr",{style:{marginTop:10,marginBottom:10}}),r.createElement("table",null,r.createElement("th",null,"Significant Mutational Signatures"),r.createElement("th",null,"Exposure"),e.map(function(e){return r.createElement("tr",null,r.createElement("td",{style:{paddingTop:3}},e.meta.name),r.createElement("td",{style:{paddingTop:3}},r.createElement(kn,{contribution:e.value.toString(),color:In(e.meta.category)})))})))}},{key:"makeProgressBar",value:function(e){var t=i.a.reduce(e,function(e,t){var n=In(t.meta.category);return n in e?e[n]+=t.value:e[n]=t.value,e},{}),n=i.a.map(t,function(e,t){return r.createElement(vt.ProgressBar,{style:{backgroundColor:t},now:Math.floor(100*e),key:t})});return r.createElement("span",{style:{padding:"0px 13px",height:20,width:100}},r.createElement(vt.ProgressBar,{style:{height:10,marginTop:4,marginBottom:0}},n))}}])&&Ds(n.prototype,o),a&&Ds(n,a),t}(),Vs=function(e){return r.createElement("span",{className:"clinical-spans"},Ue.w[e.type],r.createElement("span",{style:{marginLeft:2,display:"flex"}},r.createElement(Ue.x,{usingPublicOncoKbInstance:e.isPublicOncoKbInstance,isCancerGene:!0,geneNotExist:!1,hugoGeneSymbol:Ue.v,status:"complete",availableDataTypes:Object(lt.m)([e.annotation]),indicator:e.annotation})))};function Fs(e){return(Fs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Us(e,t){return!t||"object"!==Fs(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Hs(e){return(Hs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ws(e,t){return(Ws=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var qs=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Us(this,Hs(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ws(e,t)}(t,r["Component"]),n=t,(o=[{key:"getOncoKbOtherBiomarkerAnnotationComponent",value:function(e,t){var n=Object(C.hb)(this.props.patientViewPageStore.clinicalDataForSamples.result,t,C.d[e]);return this.props.patientViewPageStore.getOtherBiomarkersOncoKbData.result[t][e]&&void 0!==n?r.createElement("span",null,","," ",r.createElement(Vs,{type:e,isPublicOncoKbInstance:this.props.patientViewPageStore.usingPublicOncoKbInstance,annotation:this.props.patientViewPageStore.getOtherBiomarkersOncoKbData.result[t][e]})):null}},{key:"isPDX",value:function(e){return this.props.sampleManager&&this.props.sampleManager.clinicalDataLegacyCleanAndDerived&&this.props.sampleManager.clinicalDataLegacyCleanAndDerived[e.id]&&"Xenograft"===this.props.sampleManager.clinicalDataLegacyCleanAndDerived[e.id].DERIVED_NORMALIZED_CASE_TYPE}},{key:"render",value:function(){var e=this,t=null;return(t=i.a.map(this.props.sampleManager.samples,function(t){if(e.props.sampleManager.isSampleVisibleInHeader(t.id)){var n=e.isPDX(t);return r.createElement("div",{className:"patientSample"},r.createElement("span",{className:"clinical-spans"},e.props.sampleManager.getComponentForSample(t.id,1,"",r.createElement("span",{style:{display:"inline-flex"}}," ",n&&r.createElement("svg",{id:"Layer_2",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"15px",height:"15px",viewBox:"7.015 20 388.209 342.605","enable-background":"new 7.015 47.906 388.209 342.605"},r.createElement("path",{fill:"none",stroke:"#000000",strokeWidth:"20",strokeLinejoin:"bevel",strokeMiterlimit:"10",d:"M377.5,250.5 c-2.896,138.241-177.896,163.241-280.896,89.241"}),r.createElement("g",null,r.createElement("g",null,r.createElement("path",{fill:"#0C0202",stroke:"#000000",strokeMiterlimit:"10",d:"M10.5,251.5h377c0,0,66-275-201-185 C186.5,66.5-19.5,159.5,10.5,251.5z"})),r.createElement("path",{fill:"#0C0202",stroke:"#000000",strokeLinejoin:"bevel",strokeMiterlimit:"10",d:"M50.5,159.5 C-65.396,141.741,82.604,2.741,88.604,128.741"})),r.createElement("circle",{fill:"#FFFFFF",stroke:"#000000",strokeMiterlimit:"10",cx:"50.854",cy:"210.991",r:"21.25"})),n&&" ",r.createElement("a",{href:Object(Le.x)(e.props.patientViewPageStore.studyMetaData.result.studyId,t.id),target:"_blank",onClick:function(n){return e.props.handleSampleClick(t.id,n)}},bn.getClinicalAttributeInSample(t,"DISPLAY_SAMPLE_NAME")?"".concat(bn.getClinicalAttributeInSample(t,"DISPLAY_SAMPLE_NAME").value," (").concat(t.id,")"):t.id),e.props.sampleManager&&e.props.sampleManager.clinicalDataLegacyCleanAndDerived[t.id]&&ce(e.props.sampleManager.clinicalDataLegacyCleanAndDerived[t.id])),e.props.toggleGenePanelModal,e.props.genePanelModal.isOpen),e.props.patientViewPageStore.getOtherBiomarkersOncoKbData.result[t.id]&&r.createElement(r.Fragment,null,e.getOncoKbOtherBiomarkerAnnotationComponent(Ue.z.MSIH,t.id),e.getOncoKbOtherBiomarkerAnnotationComponent(Ue.z.TMBH,t.id)),r.createElement(l.If,{condition:e.props.patientViewPageStore.hasMutationalSignatureData.result},r.createElement(l.Then,null,r.createElement(l.If,{condition:e.props.patientViewPageStore.mutationalSignatureDataGroupByVersion.isComplete},r.createElement(l.Then,null,r.createElement(Gs,{data:e.props.patientViewPageStore.mutationalSignatureDataGroupByVersion.result,sampleId:t.id,version:e.props.patientViewPageStore.selectedMutationalSignatureVersion})),r.createElement(l.Else,null,r.createElement(Ro.a,{isLoading:!0})))))))}}))&&t.length>0&&"sample"===this.props.patientViewPageStore.pageMode&&this.props.patientViewPageStore.patientId&&this.props.patientViewPageStore.allSamplesForPatient.result&&this.props.patientViewPageStore.allSamplesForPatient.result.length>1&&t.push(r.createElement("button",{className:"btn btn-default btn-xs",onClick:function(){return e.props.handlePatientClick(e.props.patientViewPageStore.patientId)}},"Show all"," ",this.props.patientViewPageStore.allSamplesForPatient.result.length," ","samples")),t}}])&&Bs(n.prototype,o),a&&Bs(n,a),t}();function zs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Ks(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ys(e){return(Ys=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zs(e,t){return(Zs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qs(e){return(Qs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var $s=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Qs(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},Js=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function l(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,l)}u((r=r.apply(e,t||[])).next())})},ec=function(e){function t(e){var n,o,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,i=Ys(t).call(this,e),n=!i||"object"!==Qs(i)&&"function"!=typeof i?Xs(o):i,Object.defineProperty(Xs(n),"mutationTableColumnVisibility",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(Xs(n),"cnaTableColumnVisibility",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(Xs(n),"genePanelModal",{enumerable:!0,configurable:!0,writable:!0,value:{genePanelId:"",isOpen:!1}}),Object.defineProperty(Xs(n),"urlWrapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(Xs(n),"patientViewPageStore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(Xs(n),"dataStore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(Xs(n),"wholeSlideViewerUrl",{enumerable:!0,configurable:!0,writable:!0,value:Object(g.vb)({await:function(){return[n.patientViewPageStore.getWholeSlideViewerIds]},invoke:function(){return Js(Xs(n),void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.isEmpty(this.patientViewPageStore.getWholeSlideViewerIds.result)){e.next=11;break}return t=Object(Le.B)(this.patientViewPageStore.getWholeSlideViewerIds.result,this.props.appStore.userName),e.prev=2,e.next=5,Re.a.get(t);case 5:return e.abrupt("return",t);case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",void 0);case 11:return e.abrupt("return",void 0);case 12:case"end":return e.stop()}},e,this,[[2,8]])}))}})}),Object.defineProperty(Xs(n),"resourceTabs",{enumerable:!0,configurable:!0,writable:!0,value:Object(Ba.a)({await:function(){return[n.patientViewPageStore.resourceDefinitions,n.patientViewPageStore.resourceIdToResourceData]},render:function(){var e=n.patientViewPageStore.resourceDefinitions.result.filter(function(e){return n.patientViewPageStore.isResourceTabOpen(e.resourceId)}),t=a.sortBy(e,function(e){return e.priority}),o=n.patientViewPageStore.resourceIdToResourceData.result;return t.reduce(function(e,t){var a=o[t.resourceId];return a&&a.length>0&&e.push(r.createElement(Mo.a,{key:Object(Ma.d)(t.resourceId),id:Object(Ma.d)(t.resourceId),linkText:t.displayName,onClickClose:n.closeResourceTab},r.createElement(Vu.a,{resourceData:o[t.resourceId],urlWrapper:n.urlWrapper}))),e},[])}})}),Object(T.makeObservable)(Xs(n)),n.urlWrapper=new Va(e.routing),n.patientViewPageStore=new Vn(n.props.appStore),n.dataStore=new $o(function(){return n.mergedMutations},n.urlWrapper),Object(g.eb)().patientViewPageStore=n.patientViewPageStore;var l=n.urlWrapper.activeTabId&&Object(Ma.c)(n.urlWrapper.activeTabId);return l&&n.patientViewPageStore.setResourceTabOpen(l,!0),Object(T.reaction)(function(){return[n.urlWrapper.query.caseId,n.urlWrapper.query.studyId]},function(e){var t=zs(e,2),r=(t[0],t[1]);r&&n.props.routing.location.pathname.includes("/"+ja.a.Patient)&&Object(ka.g)(r)},{fireImmediately:!0}),Object(T.reaction)(function(){return[e.routing.query,e.routing.location.hash,e.routing.location.pathname]},function(e){var t=zs(e,3),r=t[0],o=t[1];if(t[2].includes("/"+ja.a.Patient)){var a=Do(r);if(a.isValid){n.patientViewPageStore.urlValidationError=null,"studyId"in r&&(n.patientViewPageStore.studyId=r.studyId),"caseId"in r?n.patientViewPageStore.setPatientId(r.caseId):"sampleId"in r&&n.patientViewPageStore.setSampleId(r.sampleId);var i=o.match(/navCaseIds=([^&]*)/);i&&i.length>1&&(n.patientViewPageStore.patientIdsInCohort=function(e){var t=this;return e.split(",").map(function(e){return e.includes(":")?e:t.studyId+":"+e})}(i[1]))}else n.patientViewPageStore.urlValidationError=a.message}},{fireImmediately:!0}),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zs(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){var e,t=Object(g.eb)().clientPostedData;t&&t.navCaseIds&&(this.patientViewPageStore.patientIdsInCohort=(e=t.navCaseIds,a.map(e,function(e){return e.studyId+":"+e.patientId})),Object(g.eb)().clientPostedData=null)}},{key:"handleSampleClick",value:function(e,t){t.shiftKey||t.altKey||t.metaKey||(t.preventDefault(),this.urlWrapper.updateURL({caseId:void 0,sampleId:e}))}},{key:"handlePatientClick",value:function(e){var t=e.split(":");2==t.length?this.urlWrapper.updateURL({studyId:t[0],caseId:t[1],sampleId:void 0}):this.urlWrapper.updateURL({caseId:e,sampleId:void 0})}},{key:"onCnaTableColumnVisibilityToggled",value:function(e,t){this.cnaTableColumnVisibility=Object(g.Eb)(this.cnaTableColumnVisibility,e,t)}},{key:"onMutationTableColumnVisibilityToggled",value:function(e,t){this.mutationTableColumnVisibility=Object(g.Eb)(this.mutationTableColumnVisibility,e,t)}},{key:"customTabMountCallback",value:function(e,t){Object(ta.a)(e,t,this.props.routing.location,this.patientViewPageStore)}},{key:"onFilterGenesMutationTable",value:function(e){this.patientViewPageStore.mutationTableGeneFilterOption=e}},{key:"onFilterGenesCopyNumberTable",value:function(e){this.patientViewPageStore.copyNumberTableGeneFilterOption=e}},{key:"mutationTableShowGeneFilterMenu",value:function(e){var t=a.uniq(a.map(this.patientViewPageStore.mergedMutationDataIncludingUncalled,function(e){return e[0].entrezGeneId}));return e.length>1&&zt(e,t,this.patientViewPageStore.sampleToMutationGenePanelId.result,this.patientViewPageStore.genePanelIdToEntrezGeneIds.result)}},{key:"cnaTableShowGeneFilterMenu",value:function(e){var t=a.uniq(a.map(this.patientViewPageStore.mergedDiscreteCNAData,function(e){return e[0].entrezGeneId}));return e.length>1&&zt(e,t,this.patientViewPageStore.sampleToDiscreteGenePanelId.result,this.patientViewPageStore.genePanelIdToEntrezGeneIds.result)}},{key:"toggleGenePanelModal",value:function(e){this.genePanelModal={isOpen:!this.genePanelModal.isOpen,genePanelId:e||""}}},{key:"onMutationTableRowClick",value:function(e){e.length&&this.dataStore.toggleSelectedMutation(e[0])}},{key:"onMutationTableRowMouseEnter",value:function(e){e.length&&this.dataStore.setMouseOverMutation(e[0])}},{key:"onMutationTableRowMouseLeave",value:function(){this.dataStore.setMouseOverMutation(null)}},{key:"openResource",value:function(e){this.patientViewPageStore.setResourceTabOpen(e.resourceId,!0),this.urlWrapper.setActiveTab(Object(Ma.d)(e.resourceId)),this.urlWrapper.setResourceUrl(e.url)}},{key:"closeResourceTab",value:function(e){var t=Object(Ma.c)(e);t&&(this.patientViewPageStore.setResourceTabOpen(t,!1),this.urlWrapper.activeTabId===Object(Ma.d)(t)&&this.urlWrapper.setActiveTab(Ma.a.FilesAndLinks))}},{key:"onMutationalSignatureVersionChange",value:function(e){this.patientViewPageStore.setMutationalSignaturesVersion(e)}},{key:"render",value:function(){var e=this,t=null;this.patientViewPageStore.sampleManager.isComplete&&(t=this.patientViewPageStore.sampleManager.result);var n=null,o=null;if(this.patientViewPageStore.urlValidationError)return r.createElement(Bo,{urlValidationError:this.patientViewPageStore.urlValidationError});if(this.patientViewPageStore.studyMetaData.isComplete){var i=this.patientViewPageStore.studyMetaData.result;o=r.createElement(na.a,{studyId:i.studyId},i.name)}if(this.patientViewPageStore.patientIdsInCohort&&this.patientViewPageStore.patientIdsInCohort.length>0){var u=this.patientViewPageStore.patientIdsInCohort.indexOf(this.patientViewPageStore.studyId+":"+this.patientViewPageStore.patientId);n=r.createElement(B.a,{currentPage:u+1,showMoreButton:!1,showItemsPerPageSelector:!1,showFirstPage:!0,showLastPage:!0,textBetweenButtons:" of ".concat(this.patientViewPageStore.patientIdsInCohort.length," patients"),firstPageDisabled:0===u,previousPageDisabled:0===u,nextPageDisabled:u===this.patientViewPageStore.patientIdsInCohort.length-1,lastPageDisabled:u===this.patientViewPageStore.patientIdsInCohort.length-1,onFirstPageClick:function(){return e.handlePatientClick(e.patientViewPageStore.patientIdsInCohort[0])},onPreviousPageClick:function(){return e.handlePatientClick(e.patientViewPageStore.patientIdsInCohort[u-1])},onNextPageClick:function(){return e.handlePatientClick(e.patientViewPageStore.patientIdsInCohort[u+1])},onLastPageClick:function(){return e.handlePatientClick(e.patientViewPageStore.patientIdsInCohort[e.patientViewPageStore.patientIdsInCohort.length-1])},onChangeCurrentPage:function(t){t>0&&t<=e.patientViewPageStore.patientIdsInCohort.length&&e.handlePatientClick(e.patientViewPageStore.patientIdsInCohort[t-1])},pageNumberEditable:!0,className:"cohortNav"})}return r.createElement(Jo.a,{noMargin:!0,hideFooter:!0},this.patientViewPageStore.patientViewData.isComplete&&r.createElement(ea.b,null,r.createElement("title",null,this.patientViewPageStore.pageTitle),r.createElement("meta",{name:"description",content:this.patientViewPageStore.metaDescription})),r.createElement("div",{className:"patientViewPage"},this.genePanelModal.isOpen&&r.createElement(uu,{genePanel:this.modalSelectedGenePanel,show:this.genePanelModal.isOpen,onHide:this.toggleGenePanelModal,columns:3}),r.createElement("div",{className:"headBlock"},this.patientViewPageStore.patientViewData.isComplete&&r.createElement("div",{className:"patientPageHeader"},r.createElement("i",{className:"fa fa-user-circle-o patientIcon","aria-hidden":"true"}),r.createElement("div",{className:"patientDataTable"},r.createElement("table",null,r.createElement("tr",null,r.createElement("td",null,"Patient:"),r.createElement("td",null,r.createElement(ye,{handlePatientClick:function(t){return e.handlePatientClick(t)},patient:this.patientViewPageStore.patientViewData.result.patient,studyId:this.patientViewPageStore.studyId,darwinUrl:this.patientViewPageStore.darwinUrl.result,sampleManager:t}))),r.createElement("tr",null,r.createElement("td",null,"Samples:"),r.createElement("td",null,r.createElement("div",{className:"patientSamples"},null!==t&&r.createElement(l.If,{condition:this.isSampleSummaryListLoading},r.createElement(l.Then,null,r.createElement(Ro.a,{isLoading:!0})),r.createElement(l.Else,null,r.createElement(qs,{sampleManager:t,patientViewPageStore:this.patientViewPageStore,handleSampleClick:this.handleSampleClick,toggleGenePanelModal:this.toggleGenePanelModal,genePanelModal:this.genePanelModal,handlePatientClick:this.handlePatientClick})))))))),r.createElement("div",{className:"studyMetaBar"},o," ",r.createElement(l.If,{condition:null!=n},n)))),r.createElement(l.If,{condition:this.patientViewPageStore.patientViewData.isComplete},r.createElement(l.Then,null,r.createElement(Mo.b,{id:"patientViewPageTabs",activeTabId:this.urlWrapper.activeTabId,onTabClick:function(t){return e.urlWrapper.setActiveTab(t)},className:"mainTabs",getPaginationWidth:ra.a.getWindowWidth},r.createElement(Mo.a,{key:0,id:Ma.a.Summary,linkText:"Summary"},r.createElement(Ro.a,{isLoading:this.patientViewPageStore.clinicalEvents.isPending}),!!t&&this.patientViewPageStore.clinicalEvents.isComplete&&this.patientViewPageStore.clinicalEvents.result.length>0&&r.createElement("div",null,r.createElement("div",{style:{marginTop:20,marginBottom:20}}," ",this.showNewTimeline&&r.createElement(Tl,{dataStore:this.dataStore,caseMetaData:{color:t.sampleColors,label:t.sampleLabels,index:t.sampleIndex},data:this.patientViewPageStore.clinicalEvents.result,sampleManager:t,width:ra.a.size.width,samples:this.patientViewPageStore.samples.result,mutationProfileId:this.patientViewPageStore.mutationMolecularProfileId.result})),this.showOldTimeline&&r.createElement("div",{style:{marginTop:20}},r.createElement(no,{store:this.patientViewPageStore,width:ra.a.size.width-60,sampleManager:t})),r.createElement("hr",null)),r.createElement(Ro.a,{isLoading:this.patientViewPageStore.mutationData.isPending||this.patientViewPageStore.cnaSegments.isPending}),this.patientViewPageStore.mutationData.isComplete&&this.patientViewPageStore.cnaSegments.isComplete&&this.patientViewPageStore.sequencedSampleIdsInStudy.isComplete&&this.patientViewPageStore.sampleToMutationGenePanelId.isComplete&&this.patientViewPageStore.sampleToDiscreteGenePanelId.isComplete&&(this.patientViewPageStore.mergedMutationDataFilteredByGene.length>0||this.patientViewPageStore.cnaSegments.result.length>0)&&t&&r.createElement("div",null,r.createElement(L,{mergedMutations:this.patientViewPageStore.mergedMutationDataFilteredByGene,samples:this.patientViewPageStore.samples.result,cnaSegments:this.patientViewPageStore.cnaSegments.result,sampleOrder:t.sampleIndex,sampleLabels:t.sampleLabels,sampleColors:t.sampleColors,sampleManager:t,containerWidth:ra.a.size.width-20,sampleIdToMutationGenePanelId:this.patientViewPageStore.sampleToMutationGenePanelId.result,sampleIdToCopyNumberGenePanelId:this.patientViewPageStore.sampleToDiscreteGenePanelId.result,onSelectGenePanel:this.toggleGenePanelModal,disableTooltip:this.genePanelModal.isOpen}),r.createElement("hr",null)),r.createElement(Ro.a,{isLoading:this.patientViewPageStore.mutationData.isPending||this.patientViewPageStore.uncalledMutationData.isPending||this.patientViewPageStore.oncoKbAnnotatedGenes.isPending||this.patientViewPageStore.studyIdToStudy.isPending}),this.patientViewPageStore.oncoKbAnnotatedGenes.isComplete&&this.patientViewPageStore.mutationData.isComplete&&this.patientViewPageStore.uncalledMutationData.isComplete&&this.patientViewPageStore.studyIdToStudy.isComplete&&this.patientViewPageStore.sampleToMutationGenePanelId.isComplete&&this.patientViewPageStore.genePanelIdToEntrezGeneIds.isComplete&&!!t&&r.createElement("div",{"data-test":"patientview-mutation-table"},r.createElement(Oo,{studyIdToStudy:this.patientViewPageStore.studyIdToStudy.result,sampleManager:t,sampleToGenePanelId:this.patientViewPageStore.sampleToMutationGenePanelId.result,genePanelIdToEntrezGeneIds:this.patientViewPageStore.genePanelIdToEntrezGeneIds.result,sampleIds:t?t.getSampleIdsInOrder():[],uniqueSampleKeyToTumorType:this.patientViewPageStore.uniqueSampleKeyToTumorType,molecularProfileIdToMolecularProfile:this.patientViewPageStore.molecularProfileIdToMolecularProfile.result,variantCountCache:this.patientViewPageStore.variantCountCache,indexedVariantAnnotations:this.patientViewPageStore.indexedVariantAnnotations,indexedMyVariantInfoAnnotations:this.patientViewPageStore.indexedMyVariantInfoAnnotations,discreteCNACache:this.patientViewPageStore.discreteCNACache,mrnaExprRankCache:this.patientViewPageStore.mrnaExprRankCache,pubMedCache:this.patientViewPageStore.pubMedCache,genomeNexusCache:this.patientViewPageStore.genomeNexusCache,genomeNexusMutationAssessorCache:this.patientViewPageStore.genomeNexusMutationAssessorCache,mrnaExprRankMolecularProfileId:this.patientViewPageStore.mrnaRankMolecularProfileId.result||void 0,discreteCNAMolecularProfileId:this.patientViewPageStore.molecularProfileIdDiscrete.result,data:this.patientViewPageStore.mergedMutationDataIncludingUncalledFilteredByGene,downloadDataFetcher:this.patientViewPageStore.downloadDataFetcher,mutSigData:this.patientViewPageStore.mutSigData.result,myCancerGenomeData:this.patientViewPageStore.myCancerGenomeData,hotspotData:this.patientViewPageStore.indexedHotspotData,cosmicData:this.patientViewPageStore.cosmicData.result,oncoKbData:this.patientViewPageStore.oncoKbData,oncoKbCancerGenes:this.patientViewPageStore.oncoKbCancerGenes,usingPublicOncoKbInstance:this.patientViewPageStore.usingPublicOncoKbInstance,civicGenes:this.patientViewPageStore.civicGenes,civicVariants:this.patientViewPageStore.civicVariants,userEmailAddress:at.a.getUserEmailAddress(),enableOncoKb:at.b.serverConfig.show_oncokb,enableFunctionalImpact:at.b.serverConfig.show_genomenexus,enableHotspot:at.b.serverConfig.show_hotspot,enableMyCancerGenome:at.b.serverConfig.mycancergenome_show,enableCivic:at.b.serverConfig.show_civic,columnVisibility:this.mutationTableColumnVisibility,showGeneFilterMenu:this.patientViewPageStore.mutationTableShowGeneFilterMenu.result,currentGeneFilter:this.patientViewPageStore.mutationTableGeneFilterOption,onFilterGenes:this.onFilterGenesMutationTable,columnVisibilityProps:{onColumnToggled:this.onMutationTableColumnVisibilityToggled},onSelectGenePanel:this.toggleGenePanelModal,disableTooltip:this.genePanelModal.isOpen,generateGenomeNexusHgvsgUrl:this.patientViewPageStore.generateGenomeNexusHgvsgUrl,onRowClick:this.onMutationTableRowClick,onRowMouseEnter:this.onMutationTableRowMouseEnter,onRowMouseLeave:this.onMutationTableRowMouseLeave,sampleIdToClinicalDataMap:this.patientViewPageStore.clinicalDataGroupedBySampleMap,existsSomeMutationWithAscnProperty:this.patientViewPageStore.existsSomeMutationWithAscnProperty})),r.createElement("hr",null),r.createElement(Ro.a,{isLoading:"loading"===this.cnaTableStatus||this.patientViewPageStore.studyIdToStudy.isPending}),r.createElement(rs,{store:this.patientViewPageStore,onSelectGenePanel:this.toggleGenePanelModal}),r.createElement("hr",null),this.patientViewPageStore.studyIdToStudy.isComplete&&this.patientViewPageStore.genePanelIdToEntrezGeneIds.isComplete&&this.patientViewPageStore.referenceGenes.isComplete&&r.createElement("div",{"data-test":"patientview-copynumber-table"},r.createElement(qr,{uniqueSampleKeyToTumorType:this.patientViewPageStore.uniqueSampleKeyToTumorType,studyIdToStudy:this.patientViewPageStore.studyIdToStudy.result,sampleIds:t?t.getSampleIdsInOrder():[],sampleManager:t,sampleToGenePanelId:this.patientViewPageStore.sampleToDiscreteGenePanelId.result,genePanelIdToEntrezGeneIds:this.patientViewPageStore.genePanelIdToEntrezGeneIds.result,cnaOncoKbData:this.patientViewPageStore.cnaOncoKbData,cnaCivicGenes:this.patientViewPageStore.cnaCivicGenes,cnaCivicVariants:this.patientViewPageStore.cnaCivicVariants,oncoKbCancerGenes:this.patientViewPageStore.oncoKbCancerGenes,usingPublicOncoKbInstance:this.patientViewPageStore.usingPublicOncoKbInstance,enableOncoKb:at.b.serverConfig.show_oncokb,enableCivic:at.b.serverConfig.show_civic,userEmailAddress:at.b.serverConfig.user_email_address,pubMedCache:this.patientViewPageStore.pubMedCache,referenceGenes:this.patientViewPageStore.referenceGenes.result,data:this.patientViewPageStore.mergedDiscreteCNADataFilteredByGene,copyNumberCountCache:this.patientViewPageStore.copyNumberCountCache,mrnaExprRankCache:this.patientViewPageStore.mrnaExprRankCache,gisticData:this.patientViewPageStore.gisticData.result,mrnaExprRankMolecularProfileId:this.patientViewPageStore.mrnaRankMolecularProfileId.result||void 0,status:this.cnaTableStatus,columnVisibility:this.cnaTableColumnVisibility,showGeneFilterMenu:this.patientViewPageStore.cnaTableShowGeneFilterMenu.result,currentGeneFilter:this.patientViewPageStore.copyNumberTableGeneFilterOption,onFilterGenes:this.onFilterGenesCopyNumberTable,columnVisibilityProps:{onColumnToggled:this.onCnaTableColumnVisibilityToggled},onSelectGenePanel:this.toggleGenePanelModal,disableTooltip:this.genePanelModal.isOpen}))),!!t&&this.patientViewPageStore.sampleIds.length>1&&this.patientViewPageStore.existsSomeMutationWithVAFData&&r.createElement(Mo.a,{key:1,id:"genomicEvolution",linkText:"Genomic Evolution"},r.createElement(Vl,{patientViewPageStore:this.patientViewPageStore,mutationTableColumnVisibility:this.mutationTableColumnVisibility,onMutationTableColumnVisibilityToggled:this.onMutationTableColumnVisibilityToggled,sampleManager:t,urlWrapper:this.urlWrapper})),r.createElement(Mo.a,{key:8,id:Ma.a.PathwayMapper,linkText:"Pathways"},this.patientViewPageStore.geneticTrackData.isComplete&&this.patientViewPageStore.mergedMutationDataIncludingUncalledFilteredByGene?r.createElement(wu,{store:this.patientViewPageStore,sampleManager:t}):r.createElement(Ro.a,{isLoading:!0,size:"big",center:!0})),r.createElement(Mo.a,{key:2,id:Ma.a.ClinicalData,linkText:"Clinical Data",className:"patient-clinical-data-tab"},r.createElement("div",{className:"clearfix"},r.createElement("h3",{className:"pull-left"},"Patient"),this.patientViewPageStore.clinicalDataPatient.isComplete&&r.createElement(ee,{showTitleBar:!0,data:this.patientViewPageStore.clinicalDataPatient.result})),r.createElement("div",{className:"clearfix"},r.createElement("h3",{className:"pull-left"},"Samples"),this.patientViewPageStore.clinicalDataGroupedBySample.isComplete&&r.createElement(Qn,{samples:this.patientViewPageStore.clinicalDataGroupedBySample.result})),r.createElement("h2",{className:"divider"},"Timeline Data"),this.patientViewPageStore.clinicalEvents.isComplete&&r.createElement(ss,{clinicalEvents:this.patientViewPageStore.clinicalEvents.result})),r.createElement(Mo.a,{key:4,id:Ma.a.FilesAndLinks,linkText:"Files & Links",hide:!this.shouldShowResources},r.createElement("div",null,r.createElement(Gu,{store:this.patientViewPageStore,sampleManager:this.patientViewPageStore.sampleManager.result,openResource:this.openResource}))),r.createElement(Mo.a,{key:3,id:Ma.a.PathologyReport,linkText:"Pathology Report",hide:!this.shouldShowPathologyReport},r.createElement("div",null,r.createElement(jo,{iframeHeight:ra.a.size.height-220,pdfs:this.patientViewPageStore.pathologyReport.result}))),r.createElement(Mo.a,{key:5,id:Ma.a.TissueImage,linkText:"Tissue Image",hide:this.hideTissueImageTab},r.createElement("div",null,r.createElement(Eo.a,{height:ra.a.size.height-220,url:Object(Le.j)(this.patientViewPageStore.patientId,this.patientViewPageStore.studyId)}))),this.showWholeSlideViewerTab&&this.wholeSlideViewerUrl.result&&r.createElement(Mo.a,{key:6,id:Ma.a.MSKTissueImage,linkText:"Tissue Image",unmountOnHide:!1},r.createElement("div",null,r.createElement(Eo.a,{height:ra.a.size.height-220,url:this.wholeSlideViewerUrl.result}))),this.shouldShowTrialMatch&&r.createElement(Mo.a,{key:7,id:Ma.a.TrialMatchTab,linkText:"Matched Trials"},r.createElement(_a,{sampleManager:t,detailedTrialMatches:this.patientViewPageStore.detailedTrialMatches.result,containerWidth:ra.a.size.width-20})),this.patientViewPageStore.hasMutationalSignatureData.result&&r.createElement(Mo.a,{key:8,id:"mutationalSignatures",linkText:"Mutational Signature Data",hide:this.patientViewPageStore.mutationalSignatureMolecularProfiles.isPending||a.isEmpty(this.patientViewPageStore.mutationalSignatureDataGroupByVersion.result)},r.createElement(Ms,{data:this.patientViewPageStore.mutationalSignatureDataGroupByVersion.result,profiles:this.patientViewPageStore.mutationalSignatureMolecularProfiles.result,onVersionChange:this.onMutationalSignatureVersionChange,version:this.patientViewPageStore.selectedMutationalSignatureVersion})),this.resourceTabs.component,at.b.serverConfig.custom_tabs&&at.b.serverConfig.custom_tabs.filter(function(e){return"PATIENT_PAGE"===e.location}).map(function(t,n){return r.createElement(Mo.a,{key:Object(Ma.d)("customTab"+n),id:Object(Ma.d)("customTab"+n),unmountOnHide:!0===t.unmountOnHide,onTabDidMount:function(n){e.customTabMountCallback(n,t)},linkText:t.title})}))),r.createElement(l.Else,null,r.createElement(Ro.a,{isLoading:!0,center:!0,size:"big"})))))}},{key:"mergedMutations",get:function(){return this.patientViewPageStore.mergedMutationDataIncludingUncalledFilteredByGene.filter(function(e){return!Object(xt.u)(e[0])})}},{key:"showNewTimeline",get:function(){return!at.b.serverConfig.patient_view_use_legacy_timeline}},{key:"showOldTimeline",get:function(){return at.b.serverConfig.patient_view_use_legacy_timeline}},{key:"cnaTableStatus",get:function(){return this.patientViewPageStore.molecularProfileIdDiscrete.isComplete?void 0===this.patientViewPageStore.molecularProfileIdDiscrete.result?"unavailable":this.patientViewPageStore.discreteCNAData.isComplete?"available":"loading":"loading"}},{key:"isSampleSummaryListLoading",get:function(){return this.patientViewPageStore.studyMetaData.isPending||this.patientViewPageStore.hasMutationalSignatureData.isPending||this.patientViewPageStore.mutationalSignatureDataGroupByVersion.isPending||this.patientViewPageStore.allSamplesForPatient.isPending}},{key:"showWholeSlideViewerTab",get:function(){return this.patientViewPageStore.clinicalDataForSamples.isComplete&&a.some(this.patientViewPageStore.clinicalDataForSamples.result,function(e){return"MSK_SLIDE_ID"===e.clinicalAttributeId})}},{key:"shouldShowResources",get:function(){return!!this.patientViewPageStore.resourceIdToResourceData.isComplete&&a.some(this.patientViewPageStore.resourceIdToResourceData.result,function(e){return e.length>0})}},{key:"shouldShowPathologyReport",get:function(){return this.patientViewPageStore.pathologyReport.isComplete&&this.patientViewPageStore.pathologyReport.result.length>0}},{key:"hideTissueImageTab",get:function(){return this.patientViewPageStore.hasTissueImageIFrameUrl.isPending||this.patientViewPageStore.hasTissueImageIFrameUrl.isError||this.patientViewPageStore.hasTissueImageIFrameUrl.isComplete&&!this.patientViewPageStore.hasTissueImageIFrameUrl.result}},{key:"shouldShowTrialMatch",get:function(){return"true"===Object(g.eb)().localStorage.trialmatch&&this.patientViewPageStore.detailedTrialMatches.isComplete&&this.patientViewPageStore.detailedTrialMatches.result.length>0}},{key:"modalSelectedGenePanel",get:function(){return this.patientViewPageStore.genePanelIdToPanel.result[this.genePanelModal.genePanelId]}}])&&Ks(n.prototype,o),i&&Ks(n,i),t}();$s([T.observable],ec.prototype,"mutationTableColumnVisibility",void 0),$s([T.observable],ec.prototype,"cnaTableColumnVisibility",void 0),$s([T.observable],ec.prototype,"genePanelModal",void 0),$s([T.observable],ec.prototype,"urlWrapper",void 0),$s([T.computed],ec.prototype,"mergedMutations",null),$s([T.action.bound],ec.prototype,"handleSampleClick",null),$s([T.action.bound],ec.prototype,"handlePatientClick",null),$s([T.computed],ec.prototype,"cnaTableStatus",null),$s([T.computed],ec.prototype,"isSampleSummaryListLoading",null),$s([T.computed],ec.prototype,"showWholeSlideViewerTab",null),$s([T.action.bound],ec.prototype,"onCnaTableColumnVisibilityToggled",null),$s([T.action.bound],ec.prototype,"onMutationTableColumnVisibilityToggled",null),$s([T.computed],ec.prototype,"shouldShowResources",null),$s([T.computed],ec.prototype,"shouldShowPathologyReport",null),$s([T.computed],ec.prototype,"hideTissueImageTab",null),$s([T.computed],ec.prototype,"shouldShowTrialMatch",null),$s([H.default],ec.prototype,"customTabMountCallback",null),$s([H.default],ec.prototype,"onFilterGenesMutationTable",null),$s([H.default],ec.prototype,"onFilterGenesCopyNumberTable",null),$s([T.action.bound],ec.prototype,"toggleGenePanelModal",null),$s([T.computed],ec.prototype,"modalSelectedGenePanel",null),$s([H.default],ec.prototype,"onMutationTableRowClick",null),$s([H.default],ec.prototype,"onMutationTableRowMouseEnter",null),$s([H.default],ec.prototype,"onMutationTableRowMouseLeave",null),$s([T.action.bound],ec.prototype,"openResource",null),$s([T.action.bound],ec.prototype,"closeResourceTab",null),$s([T.action.bound],ec.prototype,"onMutationalSignatureVersionChange",null),ec=$s([Object(wt.inject)("routing","appStore"),wt.observer],ec);t.default=ec},814:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__1kueS",framedImage:"styles-module__framedImage__1ndwn",SurvivalTable:"styles-module__SurvivalTable__2NKCT",Tooltip:"styles-module__Tooltip__1I-Ty",NotAvailable:"styles-module__NotAvailable__1Zx5R",XmaxNumberInput:"styles-module__XmaxNumberInput__SQsf6"}},825:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),o=n(68);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,u(t).apply(this,arguments))}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){return r.createElement(o.a,{to:"/study?id=".concat(this.props.studyId),className:this.props.className},this.props.children)}}])&&i(n.prototype,a),c&&i(n,c),t}()},846:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(0),o=n(23),a=n(72);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p={marginTop:0},f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,s(t).apply(this,arguments))}var n,i,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r["Component"]),n=t,(i=[{key:"render",value:function(){return r.createElement(o.If,{condition:this.props.isHidden},r.createElement(o.Else,null,r.createElement("h2",{style:this.props.style||p,className:this.props.className||""},this.props.title,r.createElement(a.a,{isLoading:this.props.isLoading,small:!0}))))}}])&&l(n.prototype,i),f&&l(n,f),t}()},890:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return a});var r=/.+\.(.+)/;function o(e){var t=new URL(e).pathname;if(t){var n=t.match(r);if(n)return n[1].toLowerCase()}}function a(e){return"https://docs.google.com/viewerng/viewer?url=".concat(e,"?pid=explorer&efh=false&a=v&chrome=false&embedded=true")}},940:function(e,t,n){"use strict";var r=n(0),o=n(72),a=n(9),i=n(2),l=n(12);function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":f(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},m=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=s(t).call(this,e))||"object"!==f(o)&&"function"!=typeof o?c(r):o,Object.defineProperty(c(n),"iframeLoaded",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object(i.makeObservable)(c(n)),n}var n,a,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,r["Component"]),n=t,(a=[{key:"onLoad",value:function(){this.iframeLoaded=!0}},{key:"render",value:function(){return r.createElement("div",{style:{position:"relative"}},r.createElement(o.a,{center:!0,size:"big",isLoading:!this.iframeLoaded}),r.createElement("iframe",{id:this.props.iframeId||"",className:this.props.className||"",style:{width:"100%",position:"relative",zIndex:100,height:this.props.height,border:"none"},src:this.props.url,onLoad:this.onLoad}))}}])&&u(n.prototype,a),l&&u(n,l),t}();d([i.observable],m.prototype,"iframeLoaded",void 0),d([l.default],m.prototype,"onLoad",null),m=d([a.observer],m),t.a=m},943:function(e,t,n){"use strict";n.d(t,"d",function(){return a}),n.d(t,"c",function(){return i}),n.d(t,"a",function(){return l}),n.d(t,"b",function(){return u});var r=n(1),o=n.n(r);function a(e,t){var n=0,r="",o=!0,a=!1,i=void 0;try{for(var l,u=e[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var s=l.value;if(!((n+=s.length)<t))return r+"...";r+=s+" ",n++}}catch(e){a=!0,i=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw i}}return r.trim()}function i(e){return o.a.uniq(e.map(function(e){return e.gene})).map(function(e){return{hugoGeneSymbol:e}})}function l(e){switch(e){case-2:return"DeepDel";case-1:return"SHALLOWDEL";case 0:return"DIPLOID";case 1:return"GAIN";default:return"AMP"}}function u(e,t,n){var r=e?e[t]:void 0;return r&&n&&r.sort(function(e,t){return n[e.sample||""]-n[t.sample||""]||0}),r}},944:function(e,t,n){"use strict";var r=n(0),o=n(9),a=n(2),i=n(890),l=n(12);function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":f(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},m=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=s(t).call(this,e))||"object"!==f(o)&&"function"!=typeof o?c(r):o,Object(a.makeObservable)(c(n)),n}var n,o,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,r["Component"]),n=t,(o=[{key:"openResource",value:function(){this.props.openResource(this.props.resource)}},{key:"render",value:function(){return r.createElement("div",null,r.createElement("a",{onClick:this.openResource},this.icon,this.props.resource.resourceDefinition.displayName||this.props.resource.url),r.createElement("a",{href:this.props.resource.url,style:{marginLeft:16,fontSize:10},target:"_blank"},r.createElement("i",{className:"fa fa-external-link fa-sm",style:{marginRight:5,color:"black"}}),"Open in new window"))}},{key:"icon",get:function(){var e="";switch(Object(i.b)(this.props.resource.url)){case"pdf":e="fa fa-file-pdf-o";break;case"png":case"jpeg":case"jpg":case"gif":e="fa fa-file-image-o";break;case"m4a":case"flac":case"mp3":case"mp4":case"wav":e="fa fa-file-audio-o"}return e?r.createElement("i",{className:"".concat(e," fa-sm"),style:{marginRight:5,color:"black"}}):null}}])&&u(n.prototype,o),l&&u(n,l),t}();d([a.computed],m.prototype,"icon",null),d([l.default],m.prototype,"openResource",null),m=d([o.observer],m),t.a=m},986:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(0),o=n(356),a=n(23);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,s(t).apply(this,arguments))}var n,i,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r["Component"]),n=t,(i=[{key:"render",value:function(){var e=this;return r.createElement("span",{style:{cursor:"default"}},r.createElement(o.a,{text:"G",tooltip:function(){return e.getToolTip(e.props.qValue,e.props.peakGeneCount)}}))}},{key:"getToolTip",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r.createElement("div",null,"Candidate driver gene, as determined by the ",r.createElement("b",null,"GISTIC"),r.createElement("br",null),"algorithm.",r.createElement("p",null),"The GISTIC algorithm identifies likely driver copy number",r.createElement("br",null),"alterations by evaluating the frequency and amplitude of",r.createElement("br",null),"observed CNA events within the entire study.",r.createElement("p",null),r.createElement("span",null," Q-value: ",(e||0).toExponential(3)),r.createElement(a.If,{condition:t>0},r.createElement(a.Then,null,r.createElement("br",null),r.createElement("span",null," ","Number of genes in the peak: ",t))))}}])&&l(n.prototype,i),p&&l(n,p),t}()},987:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return l});var r=n(988),o=n.n(r),a=n(3),i=n(2);function l(t,n,r,l){var u=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n.dependencyPromise=n.dependencyPromise||function(t){if(t.pathsToCSS&&t.pathsToCSS.forEach(function(t){e("head").append('<link rel="stylesheet" href='.concat(t,' type="text/css" />'))}),t.pathsToJs){var n=[];return t.pathsToJs.forEach(function(e){var t=new Promise(function(t,n){o()(e,function(e){e?n(e):t()})});n.push(t)}),Promise.all(n)}}(n);n.dependencyPromise.then(function(){!function(e){Object(a.eb)()[e.mountCallbackName]?Object(a.eb)()[e.mountCallbackName](t,e,r,l,i.autorun,u):alert("Callback for tab ".concat(e.title," not found"))}(n)})}}).call(this,n(26))},992:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return O}),n.d(t,"b",function(){return Gt}),n.d(t,"c",function(){return $}),n.d(t,"d",function(){return y}),n.d(t,"e",function(){return Vt}),n.d(t,"f",function(){return M}),n.d(t,"g",function(){return C}),n.d(t,"h",function(){return F}),n.d(t,"i",function(){return W});var r=n(2),o=n(1),a=n.n(o),i=n(12),l=n(0),u=n.n(l),s=n(9),c=n(3),p=n(1259),f=n(29),d=n.n(f),m=n(17);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var y,b,g=function(){return(g=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function v(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":h(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i}function w(e,t){return{start:Math.min(e,t),end:Math.max(e,t)}}function S(e,t,n){return e>=t&&e<=n}!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.LINE_CHART=1]="LINE_CHART"}(y||(y={})),function(e){e[e.MONTH=30.41666]="MONTH",e[e.YEAR=365]="YEAR",e[e.DAY=1]="DAY"}(b||(b={}));var O=20,E=100,P="tl-remove-for-download";function T(e){switch(e.trackType){case y.LINE_CHART:return E;case y.DEFAULT:case void 0:default:return O}}function C(e,t){var n=a.a.at(t,["event.attributes"]),r=n[0]?n[0].find(function(t){return e instanceof RegExp?e.test(t.key):t.key===e}):void 0;return r?r.value:void 0}var I=4;function _(e,t){var n=[],r=Math.min.apply(Math,e.map(function(e){return e.start})),o=Math.max.apply(Math,e.map(function(e){return e.end})),a=Math.floor(r/t)*t,i=Math.ceil(o/t)*t,l=function(){var r=a,o=a+t-1;n.push({start:r,end:o,events:e.filter(function(e){return t=e.start,n=e.end,a=r,i=o,s=w(t,n),c=s.start,p=s.end,f=w(a,i),d=f.start,m=f.end,p-c>m-d?(l={start:d,end:m},u={start:c,end:p}):(l={start:c,end:p},u={start:d,end:m}),S(l.start,u.start,u.end)||S(l.end,u.start,u.end);var t,n,a,i,l,u,s,c,p,f,d,m})}),a+=t};do{l()}while(a<i);return Math.abs(n[0].start)-Math.abs(r)<20?n.unshift({start:n[0].start-20,end:n[0].start-1,events:[]}):n[0].start=r-20,n[n.length-1].end=o+20,n}function k(e,t){return e/t*100}function x(e,t){var n=a.a.find(t,function(t){return t.start<=e&&(t.end>=e||t.realEnd>=e)});return n?n.isTrim?n.start-(n.offset||0):e-(n.offset||0):void 0}function j(e,t){var n=e,r=0;return a.a.forEach(t,function(e){return!!e.isTrim||(n>=e.end-e.start?(n-=e.end-e.start,!0):(r=e.start+n,!1))}),r}function M(e){var t,n,r,o=e<0;e=Math.abs(e),t=Math.floor(e/365),n=Math.floor((e-365*t)/30),r=Math.floor(e-365*t-30*n);var a=[];return t>0&&a.push(t+" year"+(1===t?"":"s")),n>0&&a.push(n+" month"+(1===n?"":"s")),(0===e||r>0)&&a.push(r+" day"+(1===r?"":"s")),(o?"-":"")+a.join(", ")}function A(e,t){if(t.push.apply(t,e.items),e.tracks)for(var n=0,r=e.tracks;n<r.length;n++){A(r[n],t)}return t}function D(e,t,n){var r,o=[{track:e,indent:t,height:T(e)}];if(e.tracks)if(n(e.uid))o[0].track=g(g({},e),{items:A(e,[])});else{var i=(r=e.tracks,a.a.sortBy(r,function(e){return e.items&&e.items.length?e.items[0].start:0}));o.push.apply(o,a.a.flatMap(i,function(e){return D(e,t+17,n)}))}return o}function R(e,t){return t.includes(e.type)}var N=.52,L=.2;function G(e,t,n,r){return u.a.createElement("ellipse",{cx:0,cy:t,rx:e/2,ry:N*e/2,fill:n,stroke:"black",strokeWidth:r})}function V(e,t,n){return u.a.createElement(u.a.Fragment,null,G(e,t,n,L),u.a.createElement("g",{transform:"translate(0 -1)"},G(e,t,"#fff",0)))}function F(e){return function(e,t,n){return 2===n.length?u.a.createElement("g",null,V(e,t+e/8,n[1]),G(e,t-e/8,n[0],L)):(n=function(e,t){for(var n=[],r=0;n.length<t;)n.push(e[r]),r=(r+1)%e.length;return n}(n,3),u.a.createElement("g",null,V(e,t+e/4,n[2]),V(e,t,n[1]),G(e,t-e/4,n[0],L)))}(9,O/2,e)}function B(e){var t=U(e),n=T(e),r=[t.min,(t.min+t.max)/2,t.max];return r.map(function(o){return{label:Object(c.Db)(o,r),offset:H(o,e,n,t)}})}function U(e){for(var t,n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,o=0,a=e.items;o<a.length;o++){var i=a[o];null!==(t=e.getLineChartValue(i))&&(n=Math.min(t,n),r=Math.max(t,r))}return r===n&&(r=n+1),{min:n,max:r}}function H(e,t,n,r){var o=Math.min(n/7,15),a=n-2*o;return o+(1-(e-r.min)/(r.max-r.min))*a}function W(e){return u.a.createElement("g",{transform:"translate(3 -8)"},u.a.createElement("text",{x:1,y:0,dy:"1em",className:"noselect",style:{fontFamily:"Arial",fill:"#666",pointerEvents:"none"}},u.a.createElement("tspan",{style:{fontSize:7}},e)))}function q(e,t,n,r){return r?function(e,t,n,r){var o=e.map(t.getLineChartValue).filter(function(e){return null!==e});return 0===o.length?null:H(a.a.mean(o),0,n,r)}(e,t,n,r):n/2}var z=4,K="rgb(31, 119, 180)";function Y(e,t){return 1===e.length&&e[0].render?e[0].render(e[0]):1===a.a.uniq(e.map(function(e){return e.containingTrack.uid})).length&&e[0].containingTrack.renderEvents?e[0].containingTrack.renderEvents(e):u.a.createElement("g",null,e.length>1?u.a.createElement(u.a.Fragment,null,W(e.length),F(e.map(function(e){return K}))):u.a.createElement("circle",{cx:"0",cy:t,r:z,fill:K}))}var X=Object(s.observer)(function(e){var t,n,r,o=e.trackData,i=e.limit,l=e.getPosition,s=e.handleTrackHover,c=e.store,p=e.y,f=e.height,d=e.width;o.items&&(n=o.items,t=a.a.groupBy(n,function(e){return e.start+"-"+e.end}),o.sortSimultaneousEvents&&(t=a.a.mapValues(t,o.sortSimultaneousEvents)));var m=[];o.trackType===y.LINE_CHART&&(r=U(o));var h=t&&a.a.map(t,function(e){var t,n=e[0],a=l(n,i),s=null;if(n.start===n.end){var p=q(e,o,f,r);null!==p&&(s=Y(e,p),m.push({x:a?a.pixelLeft:0,y:p}))}else a&&a.pixelWidth&&(t=a.pixelWidth,s=u.a.createElement("rect",{width:Math.max(t,2*z),height:5,y:(O-5)/2,rx:"2",ry:"2",fill:"rgb(31, 119, 180)"}));return u.a.createElement(Z,{x:a&&a.pixelLeft,store:c,track:o,events:e,content:s})});return u.a.createElement("g",{className:"tl-track",transform:"translate(0 "+p+")",onMouseEnter:s,onMouseLeave:s},u.a.createElement("rect",{className:"tl-track-highlight "+P,x:0,y:0,height:f,width:d}),o.trackType===y.LINE_CHART&&function(e,t){return B(e).map(function(e){return u.a.createElement("line",{className:"tl-axis-grid-line tl-track-highlight",x1:0,x2:t,y1:e.offset,y2:e.offset})})}(o,d),o.trackType===y.LINE_CHART&&function(e){return e.length<2?null:u.a.createElement("g",null,e.map(function(t,n){if(0===n)return null;var r=e[n-1];return u.a.createElement("line",{style:{stroke:"#555",strokeWidth:2},x1:r.x,y1:r.y,x2:t.x,y2:t.y})}))}(m),h,u.a.createElement("line",{x1:0,x2:d,y1:f-.5,y2:f-.5,stroke:"#eee",strokeWidth:1,strokeDasharray:"3,2"}))}),Z=function(e){var t=e.x,n=e.store,r=e.track,o=e.events,a=e.content,i=Object(l.useState)(null),s=i[0],c=i[1],p=[];function f(){return s&&!n.doesTooltipExist(s)?(c(null),null):s}return t&&p.push("translate("+t+" 0)"),u.a.createElement("g",{style:{cursor:"pointer"},transform:p.join(" "),onMouseMove:function(e){var t=f();t||(t=n.addTooltip({track:r,events:o}),c(t)),n.setHoveredTooltipUid(t),n.setMousePosition({x:e.pageX,y:e.pageY})},onMouseLeave:function(e){var t=f();t&&!n.isTooltipPinned(t)&&(n.removeTooltip(t),c(null))},onClick:function(){var e=f();e&&n.togglePinTooltip(e)}},a)},Q=function(e){var t=e.event;return u.a.createElement("div",null,u.a.createElement("table",null,u.a.createElement("tbody",null,a.a.map(t.event.attributes,function(e){return u.a.createElement("tr",null,u.a.createElement("th",null,e.key.replace(/_/g," ")),u.a.createElement("td",null,e.value))}),u.a.createElement("tr",null,u.a.createElement("th",null,t.event.endNumberOfDaysSinceDiagnosis?"START DATE":"DATE"),u.a.createElement("td",{className:"nowrap"},M(t.event.startNumberOfDaysSinceDiagnosis))),t.event.endNumberOfDaysSinceDiagnosis&&u.a.createElement("tr",null,u.a.createElement("th",null,"END DATE"),u.a.createElement("td",{className:"nowrap"},M(t.event.endNumberOfDaysSinceDiagnosis))))))},$=function(){function e(e){Object.defineProperty(this,"_expandedTrims",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"collapsedTracks",{enumerable:!0,configurable:!0,writable:!0,value:r.observable.map({},{deep:!1})}),Object.defineProperty(this,"uniqueId",{enumerable:!0,configurable:!0,writable:!0,value:"tl-id-"+a.a.random(1,1e4)}),Object.defineProperty(this,"enableCollapseTrack",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"tooltipUidCounter",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"tooltipModelsByUid",{enumerable:!0,configurable:!0,writable:!0,value:r.observable.map({},{deep:!1})}),Object.defineProperty(this,"tooltipIndexByUid",{enumerable:!0,configurable:!0,writable:!0,value:r.observable.map({},{deep:!1})}),Object.defineProperty(this,"_lastHoveredTooltipUid",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"mousePosition",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0}}),Object.defineProperty(this,"zoomBounds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dragging",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"viewPortWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"headersWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"hoveredTrackIndex",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object(r.makeObservable)(this),this._data=e,window.timelineStore=this}return Object.defineProperty(e.prototype,"data",{get:function(){return e=this._data,t=this.isTrackCollapsed,a.a.flatMap(e,function(e){return D(e,5,t)});var e,t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"toggleTrackCollapse",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.collapsedTracks.has(e)?this.collapsedTracks.delete(e):this.collapsedTracks.set(e,!0)}}),Object.defineProperty(e.prototype,"isTrackCollapsed",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.collapsedTracks.has(e)}}),Object.defineProperty(e.prototype,"sampleEvents",{get:function(){return this.allItems.filter(function(e){return/^SPECIMEN$|^SAMPLE ACQUISITION$/i.test(e.event.eventType)})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sampleIds",{get:function(){var e=[];return this.sampleEvents.forEach(function(t,n){t.event.attributes.forEach(function(t,n){"SAMPLE_ID"===t.key&&e.push(t.value)})}),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"expandedTrims",{get:function(){return this._expandedTrims},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"toggleExpandedTrims",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._expandedTrims=!this._expandedTrims}}),Object.defineProperty(e.prototype,"setHoveredTooltipUid",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._lastHoveredTooltipUid=e}}),Object.defineProperty(e.prototype,"hoveredTooltipUid",{get:function(){return this._lastHoveredTooltipUid&&this.doesTooltipExist(this._lastHoveredTooltipUid)?this._lastHoveredTooltipUid:1===this.tooltipModelsByUid.size?this.tooltipModelsByUid.keys().next().value:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doesTooltipExist",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.tooltipModelsByUid.has(e)}}),Object.defineProperty(e.prototype,"tooltipModels",{get:function(){var e=this;return Array.from(this.tooltipModelsByUid.entries()).map(function(t){return function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var a=arguments[t],i=0,l=a.length;i<l;i++,o++)r[o]=a[i];return r}(t,[e.tooltipIndexByUid.get(t[0])])})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"addTooltip",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=(this.tooltipUidCounter++).toString();return this.tooltipModelsByUid.set(t,e),this.tooltipIndexByUid.set(t,0),t}}),Object.defineProperty(e.prototype,"removeTooltip",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.tooltipModelsByUid.delete(e),this.tooltipIndexByUid.delete(e),e===this.hoveredTooltipUid&&this.setHoveredTooltipUid(null)}}),Object.defineProperty(e.prototype,"removeAllTooltips",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.tooltipModelsByUid.clear(),this.tooltipIndexByUid.clear()}}),Object.defineProperty(e.prototype,"removeAllTooltipsExcept",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t=0,n=Array.from(this.tooltipModelsByUid.keys());t<n.length;t++){var r=n[t];r!==e&&(this.tooltipModelsByUid.delete(r),this.tooltipIndexByUid.delete(r))}}}),Object.defineProperty(e.prototype,"togglePinTooltip",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.tooltipModelsByUid.get(e);t.position?t.position=void 0:t.position=g({},this.mousePosition)}}),Object.defineProperty(e.prototype,"isTooltipPinned",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return!!this.tooltipModelsByUid.get(e).position}}),Object.defineProperty(e.prototype,"nextTooltipEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(!this.hoveredTooltipUid)return!1;var e=this.tooltipModelsByUid.get(this.hoveredTooltipUid),t=this.tooltipIndexByUid.get(this.hoveredTooltipUid);return this.tooltipIndexByUid.set(this.hoveredTooltipUid,(t+1)%e.events.length),!0}}),Object.defineProperty(e.prototype,"prevTooltipEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(!this.hoveredTooltipUid)return!1;for(var e=this.tooltipModelsByUid.get(this.hoveredTooltipUid),t=this.tooltipIndexByUid.get(this.hoveredTooltipUid)-1;t<0;)t+=e.events.length;return this.tooltipIndexByUid.set(this.hoveredTooltipUid,t),!0}}),Object.defineProperty(e.prototype,"getTooltipContent",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){var r=this,o=t.events[n],a=null;t.track.renderTooltip&&(a=t.track.renderTooltip(o)),null===a&&(a=Object(l.createElement)(Q,{event:o}));var i=t.events.length>1,u=null;return i&&(u=Object(l.createElement)("svg",{width:O,height:O,style:{marginRight:5}},Object(l.createElement)("g",{transform:"translate("+O/2+" 0)"},Y([o],O/2)))),Object(l.createElement)("div",{onMouseEnter:function(){return r.setHoveredTooltipUid(e)},onMouseMove:function(){return r.setHoveredTooltipUid(e)},onClick:function(){return r.removeAllTooltipsExcept(e)}},i&&Object(l.createElement)("div",{style:{display:"flex",alignItems:"center",borderBottom:"1px dashed white",paddingBottom:3,marginBottom:3}},u,e===this.hoveredTooltipUid&&Object(l.createElement)("span",null,n+1," of"," ",t.events.length,". Use spacebar or arrow keys to see others.")),Object(l.createElement)("div",null,a))}}),Object.defineProperty(e.prototype,"setMousePosition",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.mousePosition.x=e.x,this.mousePosition.y=e.y}}),Object.defineProperty(e.prototype,"limit",{get:function(){return this.lastTick.end},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tickInterval",{get:function(){return b.YEAR},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"setZoomBounds",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.zoomBounds=e&&t?{start:e,end:t}:void 0}}),Object.defineProperty(e.prototype,"getPosition",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=x(e.start,this.ticks),n=x(e.end||e.start,this.ticks);if(void 0!==t&&void 0!==n){var r=t-this.firstTick.start,o=k(n-this.firstTick.start-r,this.absoluteWidth);return{left:k(r,this.absoluteWidth)+"%",width:o+"%",pixelLeft:k(r,this.absoluteWidth)/100*this.pixelWidth,pixelWidth:o/100*this.pixelWidth}}}}),Object.defineProperty(e.prototype,"trimmedLimit",{get:function(){return this.lastTick.end+Math.abs(this.firstTick.start)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allItems",{get:function(){var e=a.a.flattenDeep(this.data.map(function(e){return function e(t){return t.tracks&&t.tracks.length>0?a.a.flatten(t.tracks.map(function(t){return e(t)})):t.items}(e.track)}));return a.a.sortBy(e,function(e){return e.start})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ticks",{get:function(){var e,t,n,r,o=_(this.allItems,b.YEAR);return e=o,t=this.expandedTrims,n=[],r=0,e.reduce(function(e,o){if(0===o.events.length)o.offset=r,n.push(o);else{if(!t&&n.length>=I){e.push(n[0]);var i=n.slice(1,-1);e.push({isTrim:!0,start:i[0].start,end:i[0].end,realEnd:i[i.length-1].end,offset:r});var l=n[n.length-1];r+=a.a.sumBy(i,function(e){return e.end-e.start+1}),l.offset=r,e.push(l),n=[]}else e.push.apply(e,n);e.push(o),n=[]}return o.offset=r,e},[])},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastTick",{get:function(){return this.ticks[this.ticks.length-1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstTick",{get:function(){return this.ticks[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"absoluteWidth",{get:function(){var e=this.firstTick.start+Math.abs(this.firstTick.start);return x(this.lastTick.end,this.ticks)+Math.abs(this.firstTick.start)-e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zoomedWidth",{get:function(){return this.zoomRange?this.zoomRange.end-this.zoomRange.start:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tickPixelWidth",{get:function(){return this.viewPortWidth*this.zoomLevel/this.ticks.filter(function(e){return!e.isTrim}).length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pixelWidth",{get:function(){return void 0!==this.viewPortWidth?this.viewPortWidth*this.zoomLevel:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zoomRange",{get:function(){return this.zoomBounds?{start:x(this.zoomBounds.start,this.ticks),end:x(this.zoomBounds.end,this.ticks)}:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zoomLevel",{get:function(){return this.zoomedWidth?this.absoluteWidth/this.zoomedWidth:1},enumerable:!1,configurable:!0}),v([r.observable],e.prototype,"_expandedTrims",void 0),v([r.observable.ref],e.prototype,"_data",void 0),v([r.observable],e.prototype,"enableCollapseTrack",void 0),v([r.computed],e.prototype,"data",null),v([r.action],e.prototype,"toggleTrackCollapse",null),v([i.default],e.prototype,"isTrackCollapsed",null),v([r.computed],e.prototype,"sampleEvents",null),v([r.computed],e.prototype,"sampleIds",null),v([r.computed],e.prototype,"expandedTrims",null),v([r.action.bound],e.prototype,"toggleExpandedTrims",null),v([r.observable],e.prototype,"_lastHoveredTooltipUid",void 0),v([r.action],e.prototype,"setHoveredTooltipUid",null),v([r.computed],e.prototype,"hoveredTooltipUid",null),v([r.observable],e.prototype,"mousePosition",void 0),v([r.computed],e.prototype,"tooltipModels",null),v([r.action.bound],e.prototype,"addTooltip",null),v([r.action.bound],e.prototype,"removeTooltip",null),v([r.action.bound],e.prototype,"removeAllTooltips",null),v([r.action],e.prototype,"removeAllTooltipsExcept",null),v([r.action.bound],e.prototype,"togglePinTooltip",null),v([r.action.bound],e.prototype,"nextTooltipEvent",null),v([r.action.bound],e.prototype,"prevTooltipEvent",null),v([r.action.bound],e.prototype,"setMousePosition",null),v([r.computed],e.prototype,"limit",null),v([r.computed],e.prototype,"tickInterval",null),v([r.observable.ref],e.prototype,"zoomBounds",void 0),v([r.observable],e.prototype,"viewPortWidth",void 0),v([r.observable],e.prototype,"headersWidth",void 0),v([i.default],e.prototype,"getPosition",null),v([r.computed],e.prototype,"trimmedLimit",null),v([r.computed],e.prototype,"allItems",null),v([r.computed],e.prototype,"ticks",null),v([r.computed],e.prototype,"lastTick",null),v([r.computed],e.prototype,"firstTick",null),v([r.computed],e.prototype,"absoluteWidth",null),v([r.computed],e.prototype,"zoomedWidth",null),v([r.computed],e.prototype,"tickPixelWidth",null),v([r.computed],e.prototype,"pixelWidth",null),v([r.computed],e.prototype,"zoomRange",null),v([r.computed],e.prototype,"zoomLevel",null),v([r.observable],e.prototype,"hoveredTrackIndex",void 0),e}(),J="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{};function ee(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function te(e,t){return e(t={exports:{}},t.exports),t.exports}var ne=te(function(e){
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){var t={}.hasOwnProperty;function n(){for(var e=[],r=0;r<arguments.length;r++){var o=arguments[r];if(o){var a=h(o);if("string"===a||"number"===a)e.push(o);else if(Array.isArray(o)&&o.length){var i=n.apply(null,o);i&&e.push(i)}else if("object"===a)for(var l in o)t.call(o,l)&&o[l]&&e.push(l)}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):window.classNames=n}()}),re=te(function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}}});ee(re);var oe=te(function(e,t){t.__esModule=!0,t.default=void 0;var n=!("undefined"==typeof window||!window.document||!window.document.createElement);t.default=n,e.exports=t.default});ee(oe);var ae=te(function(e,t){t.__esModule=!0,t.default=void 0;var n=re(oe).default?function(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):r(e,t)}:r;function r(e,t){if(t)do{if(t===e)return!0}while(t=t.parentNode);return!1}t.default=n,e.exports=t.default});ee(ae);var ie=te(function(e,t){t.__esModule=!0,t.default=function(e){return e===e.window?e:9===e.nodeType&&(e.defaultView||e.parentWindow)},e.exports=t.default});ee(ie);var le=te(function(e,t){t.__esModule=!0,t.default=function(e){return e&&e.ownerDocument||document},e.exports=t.default});ee(le);var ue=te(function(e,t){t.__esModule=!0,t.default=function(e){var t=(0,o.default)(e),a=(0,r.default)(t),i=t&&t.documentElement,l={top:0,left:0,height:0,width:0};if(!t)return;if(!(0,n.default)(i,e))return l;void 0!==e.getBoundingClientRect&&(l=e.getBoundingClientRect());return l={top:l.top+(a.pageYOffset||i.scrollTop)-(i.clientTop||0),left:l.left+(a.pageXOffset||i.scrollLeft)-(i.clientLeft||0),width:(null==l.width?e.offsetWidth:l.width)||0,height:(null==l.height?e.offsetHeight:l.height)||0}};var n=re(ae),r=re(ie),o=re(le);e.exports=t.default});ee(ue);var se=te(function(e,t){t.__esModule=!0,t.default=function(e,t){var o=(0,r.default)(e);return o?o.innerHeight:t?e.clientHeight:(0,n.default)(e).height};var n=re(ue),r=re(ie);e.exports=t.default});ee(se);var ce=te(function(e,t){t.__esModule=!0,t.default=function(e){return e.replace(n,function(e,t){return t.toUpperCase()})};var n=/-(.)/g;e.exports=t.default});ee(ce);var pe=te(function(e,t){t.__esModule=!0,t.default=function(e){return(0,n.default)(e.replace(r,"ms-"))};var n=re(ce),r=/^-ms-/;e.exports=t.default});ee(pe);var fe=te(function(e,t){t.__esModule=!0,t.default=function(e){return e.replace(n,"-$1").toLowerCase()};var n=/([A-Z])/g;e.exports=t.default});ee(fe);var de=te(function(e,t){t.__esModule=!0,t.default=function(e){return(0,n.default)(e).replace(r,"-ms-")};var n=re(fe),r=/^ms-/;e.exports=t.default});ee(de);var me=te(function(e,t){t.__esModule=!0,t.default=function(e){if(!e)throw new TypeError("No Element passed to `getComputedStyle()`");var t=e.ownerDocument;return"defaultView"in t?t.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):window.getComputedStyle(e,null):{getPropertyValue:function(t){var a=e.style;"float"==(t=(0,n.default)(t))&&(t="styleFloat");var i=e.currentStyle[t]||null;if(null==i&&a&&a[t]&&(i=a[t]),o.test(i)&&!r.test(t)){var l=a.left,u=e.runtimeStyle,s=u&&u.left;s&&(u.left=e.currentStyle.left),a.left="fontSize"===t?"1em":i,i=a.pixelLeft+"px",a.left=l,s&&(u.left=s)}return i}}};var n=re(pe),r=/^(top|right|bottom|left)$/,o=/^([+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|))(?!px)[a-z%]+$/i;e.exports=t.default});ee(me);var he=te(function(e,t){t.__esModule=!0,t.default=function(e,t){return"removeProperty"in e.style?e.style.removeProperty(t):e.style.removeAttribute(t)},e.exports=t.default});ee(he);var ye=te(function(e,t){t.__esModule=!0,t.default=t.animationEnd=t.animationDelay=t.animationTiming=t.animationDuration=t.animationName=t.transitionEnd=t.transitionDuration=t.transitionDelay=t.transitionTiming=t.transitionProperty=t.transform=void 0;var n,r,o,a,i,l,u,s,c,p,f,d=re(oe),m="transform";if(t.transform=m,t.animationEnd=o,t.transitionEnd=r,t.transitionDelay=u,t.transitionTiming=l,t.transitionDuration=i,t.transitionProperty=a,t.animationDelay=f,t.animationTiming=p,t.animationDuration=c,t.animationName=s,d.default){var h=function(){for(var e,t,n=document.createElement("div").style,r={O:function(e){return"o"+e.toLowerCase()},Moz:function(e){return e.toLowerCase()},Webkit:function(e){return"webkit"+e},ms:function(e){return"MS"+e}},o=Object.keys(r),a="",i=0;i<o.length;i++){var l=o[i];if(l+"TransitionProperty"in n){a="-"+l.toLowerCase(),e=r[l]("TransitionEnd"),t=r[l]("AnimationEnd");break}}!e&&"transitionProperty"in n&&(e="transitionend");!t&&"animationName"in n&&(t="animationend");return n=null,{animationEnd:t,transitionEnd:e,prefix:a}}();n=h.prefix,t.transitionEnd=r=h.transitionEnd,t.animationEnd=o=h.animationEnd,t.transform=m=n+"-"+m,t.transitionProperty=a=n+"-transition-property",t.transitionDuration=i=n+"-transition-duration",t.transitionDelay=u=n+"-transition-delay",t.transitionTiming=l=n+"-transition-timing-function",t.animationName=s=n+"-animation-name",t.animationDuration=c=n+"-animation-duration",t.animationTiming=p=n+"-animation-delay",t.animationDelay=f=n+"-animation-timing-function"}var y={transform:m,end:r,property:a,timing:l,delay:u,duration:i};t.default=y});ee(ye);ye.animationEnd,ye.animationDelay,ye.animationTiming,ye.animationDuration,ye.animationName,ye.transitionEnd,ye.transitionDuration,ye.transitionDelay,ye.transitionTiming,ye.transitionProperty,ye.transform;var be=te(function(e,t){t.__esModule=!0,t.default=function(e){return!(!e||!n.test(e))};var n=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;e.exports=t.default});ee(be);var ge=te(function(e,t){t.__esModule=!0,t.default=function(e,t,l){var u="",s="",c=t;if("string"==typeof t){if(void 0===l)return e.style[(0,n.default)(t)]||(0,o.default)(e).getPropertyValue((0,r.default)(t));(c={})[t]=l}Object.keys(c).forEach(function(t){var n=c[t];n||0===n?(0,i.default)(t)?s+=t+"("+n+") ":u+=(0,r.default)(t)+": "+n+";":(0,a.default)(e,(0,r.default)(t))}),s&&(u+=ye.transform+": "+s+";");e.style.cssText+=";"+u};var n=re(pe),r=re(de),o=re(me),a=re(he),i=re(be);e.exports=t.default});ee(ge);var ve=te(function(e,t){t.__esModule=!0,t.default=function(e){var t=(0,n.default)(e),a=e&&e.offsetParent;for(;a&&"html"!==o(e)&&"static"===(0,r.default)(a,"position");)a=a.offsetParent;return a||t.documentElement};var n=re(le),r=re(ge);function o(e){return e.nodeName&&e.nodeName.toLowerCase()}e.exports=t.default});ee(ve);var we=te(function(e,t){t.__esModule=!0,t.default=function(e,t){var r=(0,n.default)(e);if(void 0===t)return r?"pageYOffset"in r?r.pageYOffset:r.document.documentElement.scrollTop:e.scrollTop;r?r.scrollTo("pageXOffset"in r?r.pageXOffset:r.document.documentElement.scrollLeft,t):e.scrollTop=t};var n=re(ie);e.exports=t.default});ee(we);var Se=te(function(e,t){t.__esModule=!0,t.default=void 0;var n,r=re(oe),o="clearTimeout",a=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-l)),r=setTimeout(e,n);return l=t,r},i=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};r.default&&["","webkit","moz","o","ms"].some(function(e){var t=i(e,"request");if(t in window)return o=i(e,"cancel"),a=function(e){return window[t](e)}});var l=(new Date).getTime();(n=function(e){return a(e)}).cancel=function(e){window[o]&&"function"==typeof window[o]&&window[o](e)};var u=n;t.default=u,e.exports=t.default});ee(Se);var Oe=te(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,i=n?Symbol.for("react.strict_mode"):60108,l=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,s=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,p=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,m=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116;function b(e){if("object"===h(e)&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case p:case a:case l:case i:case d:return e;default:switch(e=e&&e.$$typeof){case s:case f:case u:return e;default:return t}}case y:case m:case o:return t}}}function g(e){return b(e)===p}t.typeOf=b,t.AsyncMode=c,t.ConcurrentMode=p,t.ContextConsumer=s,t.ContextProvider=u,t.Element=r,t.ForwardRef=f,t.Fragment=a,t.Lazy=y,t.Memo=m,t.Portal=o,t.Profiler=l,t.StrictMode=i,t.Suspense=d,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===p||e===l||e===i||e===d||"object"===h(e)&&null!==e&&(e.$$typeof===y||e.$$typeof===m||e.$$typeof===u||e.$$typeof===s||e.$$typeof===f)},t.isAsyncMode=function(e){return g(e)||b(e)===c},t.isConcurrentMode=g,t.isContextConsumer=function(e){return b(e)===s},t.isContextProvider=function(e){return b(e)===u},t.isElement=function(e){return"object"===h(e)&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return b(e)===f},t.isFragment=function(e){return b(e)===a},t.isLazy=function(e){return b(e)===y},t.isMemo=function(e){return b(e)===m},t.isPortal=function(e){return b(e)===o},t.isProfiler=function(e){return b(e)===l},t.isStrictMode=function(e){return b(e)===i},t.isSuspense=function(e){return b(e)===d}});ee(Oe);Oe.typeOf,Oe.AsyncMode,Oe.ConcurrentMode,Oe.ContextConsumer,Oe.ContextProvider,Oe.Element,Oe.ForwardRef,Oe.Fragment,Oe.Lazy,Oe.Memo,Oe.Portal,Oe.Profiler,Oe.StrictMode,Oe.Suspense,Oe.isValidElementType,Oe.isAsyncMode,Oe.isConcurrentMode,Oe.isContextConsumer,Oe.isContextProvider,Oe.isElement,Oe.isForwardRef,Oe.isFragment,Oe.isLazy,Oe.isMemo,Oe.isPortal,Oe.isProfiler,Oe.isStrictMode,Oe.isSuspense;var Ee=te(function(e,t){0});ee(Ee);Ee.typeOf,Ee.AsyncMode,Ee.ConcurrentMode,Ee.ContextConsumer,Ee.ContextProvider,Ee.Element,Ee.ForwardRef,Ee.Fragment,Ee.Lazy,Ee.Memo,Ee.Portal,Ee.Profiler,Ee.StrictMode,Ee.Suspense,Ee.isValidElementType,Ee.isAsyncMode,Ee.isConcurrentMode,Ee.isContextConsumer,Ee.isContextProvider,Ee.isElement,Ee.isForwardRef,Ee.isFragment,Ee.isLazy,Ee.isMemo,Ee.isPortal,Ee.isProfiler,Ee.isStrictMode,Ee.isSuspense,te(function(e){e.exports=Oe});var Pe=Object.getOwnPropertySymbols,Te=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable;(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}})()&&Object.assign;var Ie="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function _e(e,t,n,r,o){}_e.resetWarningCache=function(){0};Function.call.bind(Object.prototype.hasOwnProperty);function ke(){}function xe(){}xe.resetWarningCache=ke;var je=te(function(e){e.exports=function(){function e(e,t,n,r,o,a){if(a!==Ie){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:xe,resetWarningCache:ke};return n.PropTypes=n,n}()}),Me=te(function(e,t){t.__esModule=!0,t.default=void 0;var n=function(){};re(oe).default&&(n=document.addEventListener?function(e,t,n,r){return e.addEventListener(t,n,r||!1)}:document.attachEvent?function(e,t,n){return e.attachEvent("on"+t,function(t){(t=t||window.event).target=t.target||t.srcElement,t.currentTarget=e,n.call(e,t)})}:void 0);var r=n;t.default=r,e.exports=t.default});ee(Me);var Ae=te(function(e,t){t.__esModule=!0,t.default=void 0;var n=function(){};re(oe).default&&(n=document.addEventListener?function(e,t,n,r){return e.removeEventListener(t,n,r||!1)}:document.attachEvent?function(e,t,n){return e.detachEvent("on"+t,n)}:void 0);var r=n;t.default=r,e.exports=t.default});ee(Ae);var De=te(function(e,t){t.__esModule=!0,t.default=function(e,t,o,a){return(0,n.default)(e,t,o,a),{remove:function(){(0,r.default)(e,t,o,a)}}};var n=o(Me),r=o(Ae);function o(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default});ee(De);var Re=te(function(e,t){t.__esModule=!0,t.default=function(e){return Math.max(e.documentElement.offsetHeight||0,e.height||0,e.body.scrollHeight||0,e.body.offsetHeight||0)},e.exports=t.default});ee(Re);var Ne=te(function(e,t){t.__esModule=!0,t.default=function(e){return(0,r.default)(n.default.findDOMNode(e))};var n=o(d.a),r=o(le);function o(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default});ee(Ne);var Le=te(function(e,t){t.__esModule=!0,t.default=function(e){var t=(0,n.default)(e);return t&&t.defaultView||t.parentWindow};var n=re(le);e.exports=t.default});ee(Le);var Ge=te(function(e,t){t.__esModule=!0,t.default=function(e){return(0,r.default)(n.default.findDOMNode(e))};var n=o(d.a),r=o(Le);function o(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default});ee(Ge);var Ve=te(function(e,t){t.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=v(ne),o=v(se),a=v(ue),i=v(ve),l=v(we),s=v(Se),c=v(je),p=v(u.a),f=v(d.a),m=v(De),y=v(Re),b=v(Ne),g=v(Ge);function v(e){return e&&e.__esModule?e:{default:e}}var w=function(e){function t(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==h(t)&&"function"!=typeof t?e:t}(this,e.call(this,n,r));return u.onWindowScroll=function(){u.onUpdate()},u.onDocumentClick=function(){(0,s.default)(function(){return u.onUpdate()})},u.onUpdate=function(){if(u._isMounted){var e=u.props,t=e.offsetTop,n=e.viewportOffsetTop,r=(0,l.default)((0,g.default)(u))+(n||0);r<=t?u.updateState("top",null,null):r>u.getPositionTopMax()?"bottom"===u.state.affixed?u.updateStateAtBottom():u.setState({affixed:"bottom",position:"absolute",top:null},function(){u._isMounted&&u.updateStateAtBottom()}):u.updateState("affix","fixed",n)}},u.getPositionTopMax=function(){return(0,y.default)((0,b.default)(u))-(0,o.default)(f.default.findDOMNode(u))-u.props.offsetBottom},u.updateState=function(e,t,n){if(e!==u.state.affixed||t!==u.state.position||n!==u.state.top){var r="affix"===e?"":e.charAt(0).toUpperCase()+e.substr(1);u.props["onAffix"+r]&&u.props["onAffix"+r](),u.setState({affixed:e,position:t,top:n},function(){u.props["onAffixed"+r]&&u.props["onAffixed"+r]()})}},u.updateStateAtBottom=function(){var e=u.getPositionTopMax(),t=(0,i.default)(f.default.findDOMNode(u)),n=(0,a.default)(t).top;u.updateState("bottom","absolute",e-n)},u.state={affixed:"top",position:null,top:null},u._needPositionUpdate=!1,u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+h(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){var e=this;this._isMounted=!0,this._windowScrollListener=(0,m.default)((0,g.default)(this),"scroll",function(){return e.onWindowScroll()}),this._documentClickListener=(0,m.default)((0,b.default)(this),"click",function(){return e.onDocumentClick()}),this.onUpdate()},t.prototype.componentWillReceiveProps=function(){this._needPositionUpdate=!0},t.prototype.componentDidUpdate=function(){this._needPositionUpdate&&(this._needPositionUpdate=!1,this.onUpdate())},t.prototype.componentWillUnmount=function(){this._isMounted=!1,this._windowScrollListener&&this._windowScrollListener.remove(),this._documentClickListener&&this._documentClickListener.remove()},t.prototype.render=function(){var e=p.default.Children.only(this.props.children),t=e.props,o=t.className,a=t.style,i=this.state,l=i.affixed,u={position:i.position,top:i.top},s=void 0,c=void 0;return"top"===l?(s=this.props.topClassName,c=this.props.topStyle):"bottom"===l?(s=this.props.bottomClassName,c=this.props.bottomStyle):(s=this.props.affixClassName,c=this.props.affixStyle),p.default.cloneElement(e,{className:(0,r.default)(s,o),style:n({},u,c,a)})},t}(p.default.Component);w.propTypes={offsetTop:c.default.number,viewportOffsetTop:c.default.number,offsetBottom:c.default.number,topClassName:c.default.string,topStyle:c.default.object,affixClassName:c.default.string,affixStyle:c.default.object,bottomClassName:c.default.string,bottomStyle:c.default.object,onAffix:c.default.func,onAffixed:c.default.func,onAffixTop:c.default.func,onAffixedTop:c.default.func,onAffixBottom:c.default.func,onAffixedBottom:c.default.func},w.defaultProps={offsetTop:0,viewportOffsetTop:null,offsetBottom:0},t.default=w,e.exports=t.default});ee(Ve);var Fe=te(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t,n,r,o,a,i){var l=o||"<<anonymous>>",u=i||r;if(null==n[r])return t?new Error("Required "+a+" `"+u+"` was not specified in `"+l+"`."):null;for(var s=arguments.length,c=Array(s>6?s-6:0),p=6;p<s;p++)c[p-6]=arguments[p];return e.apply(void 0,[n,r,l,a,u].concat(c))}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n},e.exports=t.default});ee(Fe);var Be=te(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"===h(Symbol.iterator)?function(e){return h(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":h(e)},r=a(u.a),o=a(Fe);function a(e){return e&&e.__esModule?e:{default:e}}t.default=(0,o.default)(function(e,t,o,a,i){var l=e[t],u=void 0===l?"undefined":n(l);return r.default.isValidElement(l)?new Error("Invalid "+a+" `"+i+"` of type ReactElement supplied to `"+o+"`, expected a ReactComponent or a DOMElement. You can usually obtain a ReactComponent or DOMElement from a ReactElement by attaching a ref to it."):"object"===u&&"function"==typeof l.render||1===l.nodeType?null:new Error("Invalid "+a+" `"+i+"` of value `"+l+"` supplied to `"+o+"`, expected a ReactComponent or a DOMElement.")}),e.exports=t.default});ee(Be);var Ue=te(function(e,t){t.__esModule=!0,t.default=function(e,t){return e="function"==typeof e?e():e,r.default.findDOMNode(e)||t};var n,r=(n=d.a)&&n.__esModule?n:{default:n};e.exports=t.default});ee(Ue);var He=te(function(e,t){t.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=y(ue),o=y(Se),a=y(je),i=y(Be),l=y(u.a),s=y(Ve),c=y(De),p=y(Ue),f=y(Re),d=y(Ne),m=y(Ge);function y(e){return e&&e.__esModule?e:{default:e}}var b=n({},s.default.propTypes,{container:a.default.oneOfType([i.default,a.default.func]),autoWidth:a.default.bool}),g=function(e){function t(n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==h(t)&&"function"!=typeof t?e:t}(this,e.call(this,n,a));return i.onWindowScroll=function(){i.onUpdate()},i.onWindowResize=function(){i.props.autoWidth&&(0,o.default)(function(){return i.onUpdate()})},i.onDocumentClick=function(){(0,o.default)(function(){return i.onUpdate()})},i.onUpdate=function(){if(i._isMounted){var e=(0,r.default)(i.positioner),t=e.top,n=e.width,o=(0,p.default)(i.props.container),a=void 0;if(o){var l=(0,f.default)((0,d.default)(i)),u=(0,r.default)(o);a=l-u.top-u.height}else a=null;i.updateState(t,a,n)}},i.updateState=function(e,t,n){e===i.state.offsetTop&&t===i.state.offsetBottom&&n===i.state.width||i.setState({offsetTop:e,offsetBottom:t,width:n})},i.state={offsetTop:null,offsetBottom:null,width:null},i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+h(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){var e=this;this._isMounted=!0,this._windowScrollListener=(0,c.default)((0,m.default)(this),"scroll",function(){return e.onWindowScroll()}),this._windowResizeListener=(0,c.default)((0,m.default)(this),"resize",function(){return e.onWindowResize()}),this._documentClickListener=(0,c.default)((0,d.default)(this),"click",function(){return e.onDocumentClick()}),this.onUpdate()},t.prototype.componentWillReceiveProps=function(){this._needPositionUpdate=!0},t.prototype.componentDidUpdate=function(){this._needPositionUpdate&&(this._needPositionUpdate=!1,this.onUpdate())},t.prototype.componentWillUnmount=function(){this._isMounted=!1,this._windowScrollListener&&this._windowScrollListener.remove(),this._documentClickListener&&this._documentClickListener.remove(),this._windowResizeListener&&this._windowResizeListener.remove()},t.prototype.render=function(){var e=this,t=this.props,r=t.autoWidth,o=t.viewportOffsetTop,a=t.children,i=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["autoWidth","viewportOffsetTop","children"]),u=this.state,c=u.offsetTop,p=u.offsetBottom,f=u.width;delete i.container;var d=Math.max(c,o||0),m=this.props,h=m.affixStyle,y=m.bottomStyle;return r&&(h=n({width:f},h),y=n({width:f},y)),l.default.createElement("div",null,l.default.createElement("div",{ref:function(t){e.positioner=t}}),l.default.createElement(s.default,n({},i,{offsetTop:d,viewportOffsetTop:o,offsetBottom:p,affixStyle:h,bottomStyle:y}),a))},t}(l.default.Component);g.displayName="AutoAffix",g.propTypes=b,g.defaultProps={viewportOffsetTop:0,autoWidth:!0},t.default=g,e.exports=t.default});ee(He);var We=te(function(e,t){t.__esModule=!0,t.default=function(e){void 0===e&&(e=(0,n.default)());try{return e.activeElement}catch(e){}};var n=re(le);e.exports=t.default});ee(We);var qe=function(){};var ze=qe,Ke=te(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var n,r=(n=ze)&&n.__esModule?n:{default:n};var o={};function a(e,t){return function(n,a,i,l,u){var s=i||"<<anonymous>>",c=u||a;if(null!=n[a]){var p=i+"."+a;(0,r.default)(o[p],"The "+l+" `"+c+"` of `"+s+"` is deprecated. "+t+"."),o[p]=!0}for(var f=arguments.length,d=Array(f>5?f-5:0),m=5;m<f;m++)d[m-5]=arguments[m];return e.apply(void 0,[n,a,i,l,u].concat(d))}}a._resetWarned=function(){o={}},e.exports=t.default});ee(Ke);var Ye=te(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,i=n?Symbol.for("react.strict_mode"):60108,l=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,s=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,p=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,m=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116;function b(e){if("object"===h(e)&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case p:case a:case l:case i:case d:return e;default:switch(e=e&&e.$$typeof){case s:case f:case u:return e;default:return t}}case y:case m:case o:return t}}}function g(e){return b(e)===p}t.typeOf=b,t.AsyncMode=c,t.ConcurrentMode=p,t.ContextConsumer=s,t.ContextProvider=u,t.Element=r,t.ForwardRef=f,t.Fragment=a,t.Lazy=y,t.Memo=m,t.Portal=o,t.Profiler=l,t.StrictMode=i,t.Suspense=d,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===p||e===l||e===i||e===d||"object"===h(e)&&null!==e&&(e.$$typeof===y||e.$$typeof===m||e.$$typeof===u||e.$$typeof===s||e.$$typeof===f)},t.isAsyncMode=function(e){return g(e)||b(e)===c},t.isConcurrentMode=g,t.isContextConsumer=function(e){return b(e)===s},t.isContextProvider=function(e){return b(e)===u},t.isElement=function(e){return"object"===h(e)&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return b(e)===f},t.isFragment=function(e){return b(e)===a},t.isLazy=function(e){return b(e)===y},t.isMemo=function(e){return b(e)===m},t.isPortal=function(e){return b(e)===o},t.isProfiler=function(e){return b(e)===l},t.isStrictMode=function(e){return b(e)===i},t.isSuspense=function(e){return b(e)===d}});ee(Ye);Ye.typeOf,Ye.AsyncMode,Ye.ConcurrentMode,Ye.ContextConsumer,Ye.ContextProvider,Ye.Element,Ye.ForwardRef,Ye.Fragment,Ye.Lazy,Ye.Memo,Ye.Portal,Ye.Profiler,Ye.StrictMode,Ye.Suspense,Ye.isValidElementType,Ye.isAsyncMode,Ye.isConcurrentMode,Ye.isContextConsumer,Ye.isContextProvider,Ye.isElement,Ye.isForwardRef,Ye.isFragment,Ye.isLazy,Ye.isMemo,Ye.isPortal,Ye.isProfiler,Ye.isStrictMode,Ye.isSuspense;var Xe=te(function(e,t){0});ee(Xe);Xe.typeOf,Xe.AsyncMode,Xe.ConcurrentMode,Xe.ContextConsumer,Xe.ContextProvider,Xe.Element,Xe.ForwardRef,Xe.Fragment,Xe.Lazy,Xe.Memo,Xe.Portal,Xe.Profiler,Xe.StrictMode,Xe.Suspense,Xe.isValidElementType,Xe.isAsyncMode,Xe.isConcurrentMode,Xe.isContextConsumer,Xe.isContextProvider,Xe.isElement,Xe.isForwardRef,Xe.isFragment,Xe.isLazy,Xe.isMemo,Xe.isPortal,Xe.isProfiler,Xe.isStrictMode,Xe.isSuspense;var Ze=te(function(e){e.exports=Ye}),Qe=te(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=o(u.a),r=o(Fe);function o(e){return e&&e.__esModule?e:{default:e}}t.default=(0,r.default)(function(e,t,r,o,a){var i=e[t];return n.default.isValidElement(i)?new Error("Invalid "+o+" `"+a+"` of type ReactElement supplied to `"+r+"`,expected an element type (a string , component class, or function component)."):(0,Ze.isValidElementType)(i)?null:new Error("Invalid "+o+" `"+a+"` of value `"+i+"` supplied to `"+r+"`, expected an element type (a string , component class, or function component).")}),e.exports=t.default});ee(Qe);var $e=te(function(e,t){t.__esModule=!0,t.default=function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")},e.exports=t.default});ee($e);var Je=te(function(e,t){t.__esModule=!0,t.default=function(e,t){e.classList?e.classList.add(t):(0,n.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))};var n=re($e);e.exports=t.default});function et(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}ee(Je);var tt=function(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=et(e.className,t):e.setAttribute("class",et(e.className&&e.className.baseVal||"",t))},nt=te(function(e,t){t.__esModule=!0,t.default=void 0;var n=re(Je);t.addClass=n.default;var r=re(tt);t.removeClass=r.default;var o=re($e);t.hasClass=o.default;var a={addClass:n.default,removeClass:r.default,hasClass:o.default};t.default=a});ee(nt);nt.addClass,nt.removeClass,nt.hasClass;var rt=te(function(e,t){t.__esModule=!0,t.default=function(e){if((!n&&0!==n||e)&&r.default){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),n=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return n};var n,r=re(oe);e.exports=t.default});ee(rt);var ot=te(function(e,t){t.__esModule=!0,t.default=function(e){return(0,n.default)(e)||(t=e,t&&"body"===t.tagName.toLowerCase())?function(e){var t=(0,r.default)(e),o=(0,n.default)(t).innerWidth;if(!o){var a=t.documentElement.getBoundingClientRect();o=a.right-Math.abs(a.left)}return t.body.clientWidth<o}(e):e.scrollHeight>e.clientHeight;var t};var n=o(ie),r=o(le);function o(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default});ee(ot);var at=te(function(e,t){t.__esModule=!0,t.ariaHidden=o,t.hideSiblings=function(e,t){r(e,t,function(e){return o(!0,e)})},t.showSiblings=function(e,t){r(e,t,function(e){return o(!1,e)})};var n=["template","script","style"],r=function(e,t,r){t=[].concat(t),[].forEach.call(e.children,function(e){var o,a,i;-1===t.indexOf(e)&&(a=(o=e).nodeType,i=o.tagName,1===a&&-1===n.indexOf(i.toLowerCase()))&&r(e)})};function o(e,t){t&&(e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden"))}});ee(at);at.ariaHidden,at.hideSiblings,at.showSiblings;var it=te(function(e,t){t.__esModule=!0;var n=i(nt),r=i(ge),o=i(rt),a=i(ot);function i(e){return e&&e.__esModule?e:{default:e}}t.default=function e(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=i.hideSiblingNodes,u=void 0===l||l,s=i.handleContainerOverflow,c=void 0===s||s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.add=function(e,i,l){var u=t.modals.indexOf(e),s=t.containers.indexOf(i);if(-1!==u)return u;if(u=t.modals.length,t.modals.push(e),t.hideSiblingNodes&&(0,at.hideSiblings)(i,e.mountNode),-1!==s)return t.data[s].modals.push(e),u;var c={modals:[e],classes:l?l.split(/\s+/):[],overflowing:(0,a.default)(i)};return t.handleContainerOverflow&&function(e,t){var n={overflow:"hidden"};e.style={overflow:t.style.overflow,paddingRight:t.style.paddingRight},e.overflowing&&(n.paddingRight=parseInt((0,r.default)(t,"paddingRight")||0,10)+(0,o.default)()+"px"),(0,r.default)(t,n)}(c,i),c.classes.forEach(n.default.addClass.bind(null,i)),t.containers.push(i),t.data.push(c),u},this.remove=function(e){var r=t.modals.indexOf(e);if(-1!==r){var o=function(e,t){return n=function(e){return-1!==e.modals.indexOf(t)},r=-1,e.some(function(e,t){if(n(e,t))return r=t,!0}),r;var n,r}(t.data,e),a=t.data[o],i=t.containers[o];a.modals.splice(a.modals.indexOf(e),1),t.modals.splice(r,1),0===a.modals.length?(a.classes.forEach(n.default.removeClass.bind(null,i)),t.handleContainerOverflow&&function(e,t){var n=e.style;Object.keys(n).forEach(function(e){return t.style[e]=n[e]})}(a,i),t.hideSiblingNodes&&(0,at.showSiblings)(i,e.mountNode),t.containers.splice(o,1),t.data.splice(o,1)):t.hideSiblingNodes&&(0,at.ariaHidden)(!1,a.modals[a.modals.length-1].mountNode)}},this.isTopModal=function(e){return!!t.modals.length&&t.modals[t.modals.length-1]===e},this.hideSiblingNodes=u,this.handleContainerOverflow=c,this.modals=[],this.containers=[],this.data=[]},e.exports=t.default});ee(it);var lt=te(function(e,t){t.__esModule=!0;var n=s(je),r=s(Be),o=s(u.a),a=s(d.a),i=s(Ue),l=s(Ne);function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==h(t)&&"function"!=typeof t?e:t}var p=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var u=arguments.length,s=Array(u),p=0;p<u;p++)s[p]=arguments[p];return n=r=c(this,e.call.apply(e,[this].concat(s))),r._mountOverlayTarget=function(){r._overlayTarget||(r._overlayTarget=document.createElement("div"),r._portalContainerNode=(0,i.default)(r.props.container,(0,l.default)(r).body),r._portalContainerNode.appendChild(r._overlayTarget))},r._unmountOverlayTarget=function(){r._overlayTarget&&(r._portalContainerNode.removeChild(r._overlayTarget),r._overlayTarget=null),r._portalContainerNode=null},r._renderOverlay=function(){var e=r.props.children?o.default.Children.only(r.props.children):null;if(null!==e){r._mountOverlayTarget();var t=!r._overlayInstance;r._overlayInstance=a.default.unstable_renderSubtreeIntoContainer(r,e,r._overlayTarget,function(){t&&r.props.onRendered&&r.props.onRendered()})}else r._unrenderOverlay(),r._unmountOverlayTarget()},r._unrenderOverlay=function(){r._overlayTarget&&(a.default.unmountComponentAtNode(r._overlayTarget),r._overlayInstance=null)},r.getMountNode=function(){return r._overlayTarget},c(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+h(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this._isMounted=!0,this._renderOverlay()},t.prototype.componentDidUpdate=function(){this._renderOverlay()},t.prototype.componentWillReceiveProps=function(e){this._overlayTarget&&e.container!==this.props.container&&(this._portalContainerNode.removeChild(this._overlayTarget),this._portalContainerNode=(0,i.default)(e.container,(0,l.default)(this).body),this._portalContainerNode.appendChild(this._overlayTarget))},t.prototype.componentWillUnmount=function(){this._isMounted=!1,this._unrenderOverlay(),this._unmountOverlayTarget()},t.prototype.render=function(){return null},t}(o.default.Component);p.displayName="Portal",p.propTypes={container:n.default.oneOfType([r.default,n.default.func]),onRendered:n.default.func},t.default=p,e.exports=t.default});ee(lt);var ut=te(function(e,t){t.__esModule=!0;var n=c(je),r=c(Be),o=c(u.a),a=c(d.a),i=c(Ue),l=c(Ne),s=c(lt);function c(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==h(t)&&"function"!=typeof t?e:t}var f=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=Array(o),u=0;u<o;u++)a[u]=arguments[u];return n=r=p(this,e.call.apply(e,[this].concat(a))),r.setContainer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.props;r._portalContainerNode=(0,i.default)(e.container,(0,l.default)(r).body)},r.getMountNode=function(){return r._portalContainerNode},p(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+h(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.setContainer(),this.forceUpdate(this.props.onRendered)},t.prototype.componentWillReceiveProps=function(e){e.container!==this.props.container&&this.setContainer(e)},t.prototype.componentWillUnmount=function(){this._portalContainerNode=null},t.prototype.render=function(){return this.props.children&&this._portalContainerNode?a.default.createPortal(this.props.children,this._portalContainerNode):null},t}(o.default.Component);f.displayName="Portal",f.propTypes={container:n.default.oneOfType([r.default,n.default.func]),onRendered:n.default.func},t.default=a.default.createPortal?f:s.default,e.exports=t.default});ee(ut);var st=te(function(e,t){t.__esModule=!0;var n=o(je),r=o(u.a);function o(e){return e&&e.__esModule?e:{default:e}}var a={children:n.default.node},i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==h(t)&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+h(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){return this.props.children},t}(r.default.Component);i.propTypes=a,t.default=i,e.exports=t.default});ee(st);var ct=te(function(e,t){t.__esModule=!0,t.default=function(e){var t=!document.addEventListener,n=void 0;t?(document.attachEvent("onfocusin",e),n=function(){return document.detachEvent("onfocusin",e)}):(document.addEventListener("focus",e,!0),n=function(){return document.removeEventListener("focus",e,!0)});return{remove:n}},e.exports=t.default});ee(ct);var pt=te(function(e,t){t.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=E(We),o=E(ae),a=E(oe),i=E(je),l=E(Be),s=E(Ke),c=E(Qe),p=E(u.a),f=E(d.a),m=E(ze),y=E(it),b=E(ut),g=E(st),v=E(De),w=E(ct),S=E(Ue),O=E(Ne);function E(e){return e&&e.__esModule?e:{default:e}}function P(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==h(t)&&"function"!=typeof t?e:t}var T=new y.default,C=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=P(this,e.call.apply(e,[this].concat(a))),I.call(r),P(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+h(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.omitProps=function(e,t){var n=Object.keys(e),r={};return n.map(function(n){Object.prototype.hasOwnProperty.call(t,n)||(r[n]=e[n])}),r},t.prototype.render=function(){var e=this.props,r=e.show,o=e.container,a=e.children,i=e.transition,l=e.backdrop,s=e.dialogTransitionTimeout,c=e.className,f=e.style,d=e.onExit,m=e.onExiting,h=e.onEnter,y=e.onEntering,v=e.onEntered,w=p.default.Children.only(a),S=this.omitProps(this.props,t.propTypes);if(!(r||i&&!this.state.exited))return null;var O=w.props,E=O.role,P=O.tabIndex;return void 0!==E&&void 0!==P||(w=(0,u.a.cloneElement)(w,{role:void 0===E?"document":E,tabIndex:null==P?"-1":P})),i&&(w=p.default.createElement(i,{transitionAppear:!0,unmountOnExit:!0,in:r,timeout:s,onExit:d,onExiting:m,onExited:this.handleHidden,onEnter:h,onEntering:y,onEntered:v},w)),p.default.createElement(b.default,{ref:this.setMountNode,container:o,onRendered:this.onPortalRendered},p.default.createElement("div",n({ref:this.setModalNodeRef,role:E||"dialog"},S,{style:f,className:c}),l&&this.renderBackdrop(),p.default.createElement(g.default,{ref:this.setDialogRef},w)))},t.prototype.componentWillReceiveProps=function(e){e.show?this.setState({exited:!1}):e.transition||this.setState({exited:!0})},t.prototype.componentWillUpdate=function(e){!this.props.show&&e.show&&this.checkForFocus()},t.prototype.componentDidMount=function(){this._isMounted=!0,this.props.show&&this.onShow()},t.prototype.componentDidUpdate=function(e){var t=this.props.transition;!e.show||this.props.show||t?!e.show&&this.props.show&&this.onShow():this.onHide()},t.prototype.componentWillUnmount=function(){var e=this.props,t=e.show,n=e.transition;this._isMounted=!1,(t||n&&!this.state.exited)&&this.onHide()},t.prototype.autoFocus=function(){if(this.props.autoFocus){var e=this.getDialogElement(),t=(0,r.default)((0,O.default)(this));e&&!(0,o.default)(e,t)&&(this.lastFocus=t,e.hasAttribute("tabIndex")||((0,m.default)(!1,'The modal content node does not accept focus. For the benefit of assistive technologies, the tabIndex of the node is being set to "-1".'),e.setAttribute("tabIndex",-1)),e.focus())}},t.prototype.restoreLastFocus=function(){this.lastFocus&&this.lastFocus.focus&&(this.lastFocus.focus(),this.lastFocus=null)},t.prototype.getDialogElement=function(){return f.default.findDOMNode(this.dialog)},t.prototype.isTopModal=function(){return this.props.manager.isTopModal(this)},t}(p.default.Component);C.propTypes=n({},b.default.propTypes,{show:i.default.bool,container:i.default.oneOfType([l.default,i.default.func]),onShow:i.default.func,onHide:i.default.func,backdrop:i.default.oneOfType([i.default.bool,i.default.oneOf(["static"])]),renderBackdrop:i.default.func,onEscapeKeyDown:i.default.func,onEscapeKeyUp:(0,s.default)(i.default.func,"Please use onEscapeKeyDown instead for consistency"),onBackdropClick:i.default.func,backdropStyle:i.default.object,backdropClassName:i.default.string,containerClassName:i.default.string,keyboard:i.default.bool,transition:c.default,dialogTransitionTimeout:i.default.number,backdropTransitionTimeout:i.default.number,autoFocus:i.default.bool,enforceFocus:i.default.bool,restoreFocus:i.default.bool,onEnter:i.default.func,onEntering:i.default.func,onEntered:i.default.func,onExit:i.default.func,onExiting:i.default.func,onExited:i.default.func,manager:i.default.object.isRequired}),C.defaultProps={show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,onHide:function(){},manager:T,renderBackdrop:function(e){return p.default.createElement("div",e)}};var I=function(){var e=this;this.state={exited:!this.props.show},this.renderBackdrop=function(){var t=e.props,n=t.backdropStyle,r=t.backdropClassName,o=t.renderBackdrop,a=t.transition,i=t.backdropTransitionTimeout,l=o({ref:function(t){return e.backdrop=t},style:n,className:r,onClick:e.handleBackdropClick});return a&&(l=p.default.createElement(a,{transitionAppear:!0,in:e.props.show,timeout:i},l)),l},this.onPortalRendered=function(){e.autoFocus(),e.props.onShow&&e.props.onShow()},this.onShow=function(){var t=(0,O.default)(e),n=(0,S.default)(e.props.container,t.body);e.props.manager.add(e,n,e.props.containerClassName),e._onDocumentKeydownListener=(0,v.default)(t,"keydown",e.handleDocumentKeyDown),e._onDocumentKeyupListener=(0,v.default)(t,"keyup",e.handleDocumentKeyUp),e._onFocusinListener=(0,w.default)(e.enforceFocus)},this.onHide=function(){e.props.manager.remove(e),e._onDocumentKeydownListener.remove(),e._onDocumentKeyupListener.remove(),e._onFocusinListener.remove(),e.props.restoreFocus&&e.restoreLastFocus()},this.setMountNode=function(t){e.mountNode=t?t.getMountNode():t},this.setModalNodeRef=function(t){e.modalNode=t},this.setDialogRef=function(t){e.dialog=t},this.handleHidden=function(){var t;(e.setState({exited:!0}),e.onHide(),e.props.onExited)&&(t=e.props).onExited.apply(t,arguments)},this.handleBackdropClick=function(t){t.target===t.currentTarget&&(e.props.onBackdropClick&&e.props.onBackdropClick(t),!0===e.props.backdrop&&e.props.onHide())},this.handleDocumentKeyDown=function(t){e.props.keyboard&&27===t.keyCode&&e.isTopModal()&&(e.props.onEscapeKeyDown&&e.props.onEscapeKeyDown(t),e.props.onHide())},this.handleDocumentKeyUp=function(t){e.props.keyboard&&27===t.keyCode&&e.isTopModal()&&e.props.onEscapeKeyUp&&e.props.onEscapeKeyUp(t)},this.checkForFocus=function(){a.default&&(e.lastFocus=(0,r.default)())},this.enforceFocus=function(){if(e.props.enforceFocus&&e._isMounted&&e.isTopModal()){var t=e.getDialogElement(),n=(0,r.default)((0,O.default)(e));t&&!(0,o.default)(t,n)&&t.focus()}}};C.Manager=y.default,t.default=C,e.exports=t.default});ee(pt);var ft=te(function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t.apply(this,arguments)}e.exports=t}),dt=te(function(e,t){t.__esModule=!0,t.default=function(e,t){var r=(0,n.default)(e);if(void 0===t)return r?"pageXOffset"in r?r.pageXOffset:r.document.documentElement.scrollLeft:e.scrollLeft;r?r.scrollTo(t,"pageYOffset"in r?r.pageYOffset:r.document.documentElement.scrollTop):e.scrollLeft=t};var n=re(ie);e.exports=t.default});ee(dt);var mt=te(function(e,t){t.__esModule=!0,t.default=function(e,t){var u,s={top:0,left:0};"fixed"===(0,l.default)(e,"position")?u=e.getBoundingClientRect():(t=t||(0,o.default)(e),u=(0,r.default)(e),"html"!==function(e){return e.nodeName&&e.nodeName.toLowerCase()}(t)&&(s=(0,r.default)(t)),s.top+=parseInt((0,l.default)(t,"borderTopWidth"),10)-(0,a.default)(t)||0,s.left+=parseInt((0,l.default)(t,"borderLeftWidth"),10)-(0,i.default)(t)||0);return(0,n.default)({},u,{top:u.top-s.top-(parseInt((0,l.default)(e,"marginTop"),10)||0),left:u.left-s.left-(parseInt((0,l.default)(e,"marginLeft"),10)||0)})};var n=re(ft),r=re(ue),o=re(ve),a=re(we),i=re(dt),l=re(ge);e.exports=t.default});ee(mt);var ht=te(function(e,t){t.__esModule=!0,t.default=function(e,t,o,a,i){var u="BODY"===a.tagName?(0,n.default)(o):(0,r.default)(o,a),s=(0,n.default)(t),c=s.height,p=s.width,f=void 0,d=void 0,m=void 0,h=void 0;if("left"===e||"right"===e){d=u.top+(u.height-c)/2,f="left"===e?u.left-p:u.left+u.width;var y=function(e,t,n,r){var o=l(n),a=o.scroll,i=o.height,u=e-r-a,s=e+r-a+t;return u<0?-u:s>i?i-s:0}(d,c,a,i);d+=y,h=50*(1-2*y/c)+"%",m=void 0}else{if("top"!==e&&"bottom"!==e)throw new Error('calcOverlayPosition(): No such placement of "'+e+'" found.');f=u.left+(u.width-p)/2,d="top"===e?u.top-c:u.top+u.height;var b=function(e,t,n,r){var o=l(n).width,a=e-r,i=e+r+t;if(a<0)return-a;if(i>o)return o-i;return 0}(f,p,a,i);f+=b,m=50*(1-2*b/p)+"%",h=void 0}return{positionLeft:f,positionTop:d,arrowOffsetLeft:m,arrowOffsetTop:h}};var n=i(ue),r=i(mt),o=i(we),a=i(Ne);function i(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=void 0,r=void 0,i=void 0;if("BODY"===e.tagName)t=window.innerWidth,r=window.innerHeight,i=(0,o.default)((0,a.default)(e).documentElement)||(0,o.default)(e);else{var l=(0,n.default)(e);t=l.width,r=l.height,i=(0,o.default)(e)}return{width:t,height:r,scroll:i}}e.exports=t.default});ee(ht);var yt=te(function(e,t){t.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=f(ne),o=f(je),a=f(Be),i=f(u.a),l=f(d.a),s=f(ht),c=f(Ue),p=f(Ne);function f(e){return e&&e.__esModule?e:{default:e}}function m(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var y=function(e){function t(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==h(t)&&"function"!=typeof t?e:t}(this,e.call(this,n,r));return o.getTarget=function(){var e=o.props.target,t="function"==typeof e?e():e;return t&&l.default.findDOMNode(t)||null},o.maybeUpdatePosition=function(e){var t=o.getTarget();(o.props.shouldUpdatePosition||t!==o._lastTarget||e)&&o.updatePosition(t)},o.state={positionLeft:0,positionTop:0,arrowOffsetLeft:null,arrowOffsetTop:null},o._needsFlush=!1,o._lastTarget=null,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+h(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.updatePosition(this.getTarget())},t.prototype.componentWillReceiveProps=function(){this._needsFlush=!0},t.prototype.componentDidUpdate=function(e){this._needsFlush&&(this._needsFlush=!1,this.maybeUpdatePosition(this.props.placement!==e.placement))},t.prototype.render=function(){var e=this.props,t=e.children,o=e.className,a=m(e,["children","className"]),l=this.state,s=l.positionLeft,c=l.positionTop,p=m(l,["positionLeft","positionTop"]);delete a.target,delete a.container,delete a.containerPadding,delete a.shouldUpdatePosition;var f=i.default.Children.only(t);return(0,u.a.cloneElement)(f,n({},a,p,{positionLeft:s,positionTop:c,className:(0,r.default)(o,f.props.className),style:n({},f.props.style,{left:s,top:c})}))},t.prototype.updatePosition=function(e){if(this._lastTarget=e,e){var t=l.default.findDOMNode(this),n=(0,c.default)(this.props.container,(0,p.default)(this).body);this.setState((0,s.default)(this.props.placement,t,e,n,this.props.containerPadding))}else this.setState({positionLeft:0,positionTop:0,arrowOffsetLeft:null,arrowOffsetTop:null})},t}(i.default.Component);y.propTypes={target:o.default.oneOfType([a.default,o.default.func]),container:o.default.oneOfType([a.default,o.default.func]),containerPadding:o.default.number,placement:o.default.oneOf(["top","right","bottom","left"]),shouldUpdatePosition:o.default.bool},y.displayName="Position",y.defaultProps={containerPadding:0,placement:"right",shouldUpdatePosition:!1},t.default=y,e.exports=t.default});ee(yt);var bt=te(function(e,t){t.__esModule=!0;var n=s(ae),r=s(je),o=s(u.a),a=s(d.a),i=s(De),l=s(Ne);function s(e){return e&&e.__esModule?e:{default:e}}var c=27;var p=function(e){function t(r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==h(t)&&"function"!=typeof t?e:t}(this,e.call(this,r,o));return u.addEventListeners=function(){var e=u.props.event,t=(0,l.default)(u);u.documentMouseCaptureListener=(0,i.default)(t,e,u.handleMouseCapture,!0),u.documentMouseListener=(0,i.default)(t,e,u.handleMouse),u.documentKeyupListener=(0,i.default)(t,"keyup",u.handleKeyUp)},u.removeEventListeners=function(){u.documentMouseCaptureListener&&u.documentMouseCaptureListener.remove(),u.documentMouseListener&&u.documentMouseListener.remove(),u.documentKeyupListener&&u.documentKeyupListener.remove()},u.handleMouseCapture=function(e){var t;u.preventMouseRootClose=!!((t=e).metaKey||t.altKey||t.ctrlKey||t.shiftKey)||!function(e){return 0===e.button}(e)||(0,n.default)(a.default.findDOMNode(u),e.target)},u.handleMouse=function(e){!u.preventMouseRootClose&&u.props.onRootClose&&u.props.onRootClose(e)},u.handleKeyUp=function(e){e.keyCode===c&&u.props.onRootClose&&u.props.onRootClose(e)},u.preventMouseRootClose=!1,u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+h(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.props.disabled||this.addEventListeners()},t.prototype.componentDidUpdate=function(e){!this.props.disabled&&e.disabled?this.addEventListeners():this.props.disabled&&!e.disabled&&this.removeEventListeners()},t.prototype.componentWillUnmount=function(){this.props.disabled||this.removeEventListeners()},t.prototype.render=function(){return this.props.children},t}(o.default.Component);p.displayName="RootCloseWrapper",p.propTypes={onRootClose:r.default.func,children:r.default.element,disabled:r.default.bool,event:r.default.oneOf(["click","mousedown"])},p.defaultProps={event:"click"},t.default=p,e.exports=t.default});ee(bt);var gt=te(function(e,t){t.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=c(je),o=c(Qe),a=c(u.a),i=c(ut),l=c(yt),s=c(bt);function c(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==h(t)&&"function"!=typeof t?e:t}(this,e.call(this,n,r));return o.handleHidden=function(){var e;(o.setState({exited:!0}),o.props.onExited)&&(e=o.props).onExited.apply(e,arguments)},o.state={exited:!n.show},o.onHiddenListener=o.handleHidden.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+h(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillReceiveProps=function(e){e.show?this.setState({exited:!1}):e.transition||this.setState({exited:!0})},t.prototype.render=function(){var e=this.props,t=e.container,n=e.containerPadding,r=e.target,o=e.placement,u=e.shouldUpdatePosition,c=e.rootClose,p=e.children,f=e.transition,d=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["container","containerPadding","target","placement","shouldUpdatePosition","rootClose","children","transition"]);if(!(d.show||f&&!this.state.exited))return null;var m=p;if(m=a.default.createElement(l.default,{container:t,containerPadding:n,target:r,placement:o,shouldUpdatePosition:u},m),f){var h=d.onExit,y=d.onExiting,b=d.onEnter,g=d.onEntering,v=d.onEntered;m=a.default.createElement(f,{in:d.show,transitionAppear:!0,onExit:h,onExiting:y,onExited:this.onHiddenListener,onEnter:b,onEntering:g,onEntered:v},m)}return c&&(m=a.default.createElement(s.default,{onRootClose:d.onHide},m)),a.default.createElement(i.default,{container:t},m)},t}(a.default.Component);p.propTypes=n({},i.default.propTypes,l.default.propTypes,{show:r.default.bool,rootClose:r.default.bool,onHide:function(e){var t=r.default.func;e.rootClose&&(t=t.isRequired);for(var n=arguments.length,o=Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];return t.apply(void 0,[e].concat(o))},transition:o.default,onEnter:r.default.func,onEntering:r.default.func,onEntered:r.default.func,onExit:r.default.func,onExiting:r.default.func,onExited:r.default.func}),t.default=p,e.exports=t.default});ee(gt);var vt=te(function(e,t){t.__esModule=!0,t.EXITING=t.ENTERED=t.ENTERING=t.EXITED=t.UNMOUNTED=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=c(ne),o=c(Me),a=c(ye),i=c(je),l=c(u.a),s=c(d.a);function c(e){return e&&e.__esModule?e:{default:e}}var p=a.default.end,f=t.UNMOUNTED=0,m=t.EXITED=1,y=t.ENTERING=2,b=t.ENTERED=3,g=t.EXITING=4,v=function(e){function t(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==h(t)&&"function"!=typeof t?e:t}(this,e.call(this,n,r));a.updateStatus=function(){if(null!==a.nextStatus){a.cancelNextCallback();var e=s.default.findDOMNode(a);a.nextStatus===y?(a.props.onEnter(e),a.safeSetState({status:y},function(){a.props.onEntering(e),a.onTransitionEnd(e,function(){a.safeSetState({status:b},function(){a.props.onEntered(e)})})})):(a.props.onExit(e),a.safeSetState({status:g},function(){a.props.onExiting(e),a.onTransitionEnd(e,function(){a.safeSetState({status:m},function(){a.props.onExited(e)})})})),a.nextStatus=null}else a.props.unmountOnExit&&a.state.status===m&&a.setState({status:f})},a.cancelNextCallback=function(){null!==a.nextCallback&&(a.nextCallback.cancel(),a.nextCallback=null)},a.safeSetState=function(e,t){a.setState(e,a.setNextCallback(t))},a.setNextCallback=function(e){var t=!0;return a.nextCallback=function(n){t&&(t=!1,a.nextCallback=null,e(n))},a.nextCallback.cancel=function(){t=!1},a.nextCallback},a.onTransitionEnd=function(e,t){a.setNextCallback(t),e?((0,o.default)(e,p,a.nextCallback),setTimeout(a.nextCallback,a.props.timeout)):setTimeout(a.nextCallback,0)};var i=void 0;return a.nextStatus=null,n.in?n.transitionAppear?(i=m,a.nextStatus=y):i=b:i=n.unmountOnExit||n.mountOnEnter?f:m,a.state={status:i},a.nextCallback=null,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+h(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.updateStatus()},t.prototype.componentWillReceiveProps=function(e){var t=this.state.status;e.in?(t===f&&this.setState({status:m}),t!==y&&t!==b&&(this.nextStatus=y)):t!==y&&t!==b||(this.nextStatus=g)},t.prototype.componentDidUpdate=function(){this.updateStatus()},t.prototype.componentWillUnmount=function(){this.cancelNextCallback()},t.prototype.render=function(){var e=this.state.status;if(e===f)return null;var o=this.props,a=o.children,i=o.className,u=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(o,["children","className"]);Object.keys(t.propTypes).forEach(function(e){return delete u[e]});var s=void 0;e===m?s=this.props.exitedClassName:e===y?s=this.props.enteringClassName:e===b?s=this.props.enteredClassName:e===g&&(s=this.props.exitingClassName);var c=l.default.Children.only(a);return l.default.cloneElement(c,n({},u,{className:(0,r.default)(c.props.className,i,s)}))},t}(l.default.Component);function w(){}v.propTypes={in:i.default.bool,mountOnEnter:i.default.bool,unmountOnExit:i.default.bool,transitionAppear:i.default.bool,timeout:i.default.number,exitedClassName:i.default.string,exitingClassName:i.default.string,enteredClassName:i.default.string,enteringClassName:i.default.string,onEnter:i.default.func,onEntering:i.default.func,onEntered:i.default.func,onExit:i.default.func,onExiting:i.default.func,onExited:i.default.func},v.displayName="Transition",v.defaultProps={in:!1,unmountOnExit:!1,transitionAppear:!1,timeout:5e3,onEnter:w,onEntering:w,onEntered:w,onExit:w,onExiting:w,onExited:w},t.default=v});ee(vt);vt.EXITING,vt.ENTERED,vt.ENTERING,vt.EXITED,vt.UNMOUNTED;var wt=te(function(e,t){t.__esModule=!0,t.RootCloseWrapper=t.Transition=t.Position=t.Portal=t.Overlay=t.Modal=t.AutoAffix=t.Affix=void 0;var n=c(Ve),r=c(He),o=c(pt),a=c(gt),i=c(ut),l=c(yt),u=c(vt),s=c(bt);function c(e){return e&&e.__esModule?e:{default:e}}t.Affix=n.default,t.AutoAffix=r.default,t.Modal=o.default,t.Overlay=a.default,t.Portal=i.default,t.Position=l.default,t.Transition=u.default,t.RootCloseWrapper=s.default});ee(wt);wt.RootCloseWrapper,wt.Transition,wt.Position;var St=wt.Portal,Ot=(wt.Overlay,wt.Modal,wt.AutoAffix,wt.Affix,function(e){var t=e.store,n=e.specification,r=e.width,o=e.y,a=e.handleTrackHover,i=e.disableHover;return Object(l.createElement)("g",{className:ne("tl-track",{"tl-hover-disabled":i}),transform:"translate(0 "+o+")",onMouseEnter:a,onMouseLeave:a},Object(l.createElement)("rect",{className:"tl-track-highlight "+P,x:0,y:0,height:n.height(t),width:r}),n.renderTrack(t),Object(l.createElement)("line",{x1:0,x2:r,y1:n.height(t)-.5,y2:n.height(t)-.5,stroke:"#eee",strokeWidth:1,strokeDasharray:"3,2"}))}),Et=20,Pt={fontSize:9,fontFamily:"Arial",textAnchor:"middle"};var Tt="#ccc",Ct=Object(s.observer)(function(e){var t=e.store,n=e.width;return u.a.createElement(u.a.Fragment,null,u.a.createElement("g",null,u.a.createElement("rect",{transform:"translate(0 "+(Et-1)+")",fill:Tt,height:1,width:n}),t.ticks.map(function(e,n){var r,o=null;r=e===t.firstTick?e.end-t.tickInterval+1:e.start;var a,i=t.getPosition({start:r}),l=i?"translate("+i.pixelLeft+" 0)":void 0,s=[];if(e.isTrim)a=t.toggleExpandedTrims,o=u.a.createElement("g",{transform:"translate(-6 "+(Et-6)+")"},u.a.createElement("rect",{y:5,height:1,width:20,fill:"#ffffff"}),u.a.createElement("rect",{y:0,height:10,width:20,fillOpacity:0,style:{cursor:"pointer"},onClick:a}),u.a.createElement("path",{d:["M0,5","L2.5,8","L5,0","L7.5,10","L10,0","L12.5,10","L15,0","L17.5,8","L20,5"].join(""),stroke:Tt,strokeWidth:"1",fill:"none",pointerEvents:"none"}));else{var c=r/t.tickInterval,p=t.tickInterval===b.MONTH?"m":"y",f="";if(c<0&&(f=""+c+p),0===c&&(f="0"),c>0&&(f=""+c+p),o=u.a.createElement(u.a.Fragment,null,u.a.createElement("text",{dy:"1em",style:g({fill:"#333"},Pt)},f),u.a.createElement("rect",{height:6,width:1,transform:"translate(0 "+(Et-6)+")",fill:"#aaa"})),t.tickPixelWidth>150)for(var d=b.MONTH,m=1;m<12;m++){var h=t.getPosition({start:r+d*m}),y=h?"translate("+h.pixelLeft+" 0)":void 0,v="",w=!1;if(t.tickPixelWidth>150&&(m%4==0&&(w=!0),t.tickPixelWidth>700&&(w=!0)),w){var S=m;c<0?(S=12-m,f=c+1===0?"":""+(c+1)+p,v=-1===c?"-"+S+"m":f+" "+S+"m"):v=0===c?S+"m":f+" "+S+"m"}y&&s.push(u.a.createElement("g",{transform:y},u.a.createElement("text",{dy:"1.5em",style:g({fill:"#aaa"},Pt)},v),u.a.createElement("rect",{height:3,width:1,transform:"translate(0 "+(Et-3)+")",fill:"#aaa"})))}}var O=n>0&&t.ticks[n-1].isTrim;return u.a.createElement(u.a.Fragment,null,!O&&l&&u.a.createElement("g",{transform:l},o),s)})))}),It=Object(s.observer)(function(e){var t=e.store,n=e.width,r=e.handleTrackHover,o=e.customTracks,a=e.visibleTracks,i=t.data,l=0;return u.a.createElement(u.a.Fragment,null,u.a.createElement("g",{transform:"translate(0 "+Et+")"},i.map(function(e){var o=void 0===a||a.includes(e.track.type),i=l;return l+=o?e.height:0,o?u.a.createElement(X,{limit:t.trimmedLimit,trackData:e.track,getPosition:t.getPosition,handleTrackHover:r,store:t,y:i,height:e.height,width:n}):null}),o&&o.map(function(e){var o=l;return l+=e.height(t),u.a.createElement(Ot,{store:t,specification:e,handleTrackHover:r,width:n,y:o,disableHover:e.disableHover})})),t.tooltipModels.map(function(e){var r=e[0],o=e[1],a=e[2],i=o.position||t.mousePosition,l=i.x>n/2;return u.a.createElement(St,{container:document.body},u.a.createElement(m.Popover,{arrowOffsetTop:17,placement:l?"left":"right",style:{transform:l?"translate(-100%, 0)":""},className:"tl-timeline-tooltip cbioTooltip",positionLeft:i.x+(l?-10:10),positionTop:i.y-17},t.getTooltipContent(r,o,a)))}))}),_t=te(function(e){
/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */
var t,n;t="undefined"!=typeof window?window:J,n=function(e,t){var n=[],r=e.document,o=Object.getPrototypeOf,a=n.slice,i=n.concat,l=n.push,u=n.indexOf,s={},c=s.toString,p=s.hasOwnProperty,f=p.toString,d=f.call(Object),m={},y=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},b=function(e){return null!=e&&e===e.window},g={type:!0,src:!0,noModule:!0};function v(e,t,n){var o,a=(t=t||r).createElement("script");if(a.text=e,n)for(o in g)n[o]&&(a[o]=n[o]);t.head.appendChild(a).parentNode.removeChild(a)}function w(e){return null==e?e+"":"object"===h(e)||"function"==typeof e?s[c.call(e)]||"object":h(e)}var S=function e(t,n){return new e.fn.init(t,n)},O=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function E(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!y(e)&&!b(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}S.fn=S.prototype={jquery:"3.3.1",constructor:S,length:0,toArray:function(){return a.call(this)},get:function(e){return null==e?a.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(e){return this.pushStack(S.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:n.sort,splice:n.splice},S.extend=S.fn.extend=function(){var e,t,n,r,o,a,i=arguments[0]||{},l=1,u=arguments.length,s=!1;for("boolean"==typeof i&&(s=i,i=arguments[l]||{},l++),"object"===h(i)||y(i)||(i={}),l===u&&(i=this,l--);l<u;l++)if(null!=(e=arguments[l]))for(t in e)n=i[t],i!==(r=e[t])&&(s&&r&&(S.isPlainObject(r)||(o=Array.isArray(r)))?(o?(o=!1,a=n&&Array.isArray(n)?n:[]):a=n&&S.isPlainObject(n)?n:{},i[t]=S.extend(s,a,r)):void 0!==r&&(i[t]=r));return i},S.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==c.call(e))&&(!(t=o(e))||"function"==typeof(n=p.call(t,"constructor")&&t.constructor)&&f.call(n)===d)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){v(e)},each:function(e,t){var n,r=0;if(E(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(O,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(E(Object(e))?S.merge(n,"string"==typeof e?[e]:e):l.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:u.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,o=e.length;r<n;r++)e[o++]=t[r];return e.length=o,e},grep:function(e,t,n){for(var r=[],o=0,a=e.length,i=!n;o<a;o++)!t(e[o],o)!==i&&r.push(e[o]);return r},map:function(e,t,n){var r,o,a=0,l=[];if(E(e))for(r=e.length;a<r;a++)null!=(o=t(e[a],a,n))&&l.push(o);else for(a in e)null!=(o=t(e[a],a,n))&&l.push(o);return i.apply([],l)},guid:1,support:m}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=n[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){s["[object "+t+"]"]=t.toLowerCase()});var P=
/*!
 * Sizzle CSS Selector Engine v2.3.3
 * https://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-08-08
 */
function(e){var t,n,r,o,a,i,l,u,s,c,p,f,d,m,h,y,b,g,v,w="sizzle"+1*new Date,S=e.document,O=0,E=0,P=ie(),T=ie(),C=ie(),I=function(e,t){return e===t&&(p=!0),0},_={}.hasOwnProperty,k=[],x=k.pop,j=k.push,M=k.push,A=k.slice,D=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",N="[\\x20\\t\\r\\n\\f]",L="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",G="\\["+N+"*("+L+")(?:"+N+"*([*^$|!~]?=)"+N+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+L+"))|)"+N+"*\\]",V=":("+L+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+G+")*)|.*)\\)|)",F=new RegExp(N+"+","g"),B=new RegExp("^"+N+"+|((?:^|[^\\\\])(?:\\\\.)*)"+N+"+$","g"),U=new RegExp("^"+N+"*,"+N+"*"),H=new RegExp("^"+N+"*([>+~]|"+N+")"+N+"*"),W=new RegExp("="+N+"*([^\\]'\"]*?)"+N+"*\\]","g"),q=new RegExp(V),z=new RegExp("^"+L+"$"),K={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L+"|[*])"),ATTR:new RegExp("^"+G),PSEUDO:new RegExp("^"+V),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+N+"*(even|odd|(([+-]|)(\\d*)n|)"+N+"*(?:([+-]|)"+N+"*(\\d+)|))"+N+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+N+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+N+"*((?:-\\d)?\\d*)"+N+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,$=/[+~]/,J=new RegExp("\\\\([\\da-f]{1,6}"+N+"?|("+N+")|.)","ig"),ee=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ne=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},re=function(){f()},oe=ge(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{M.apply(k=A.call(S.childNodes),S.childNodes),k[S.childNodes.length].nodeType}catch(e){M={apply:k.length?function(e,t){j.apply(e,A.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function ae(e,t,r,o){var a,l,s,c,p,m,b,g=t&&t.ownerDocument,O=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==O&&9!==O&&11!==O)return r;if(!o&&((t?t.ownerDocument||t:S)!==d&&f(t),t=t||d,h)){if(11!==O&&(p=Q.exec(e)))if(a=p[1]){if(9===O){if(!(s=t.getElementById(a)))return r;if(s.id===a)return r.push(s),r}else if(g&&(s=g.getElementById(a))&&v(t,s)&&s.id===a)return r.push(s),r}else{if(p[2])return M.apply(r,t.getElementsByTagName(e)),r;if((a=p[3])&&n.getElementsByClassName&&t.getElementsByClassName)return M.apply(r,t.getElementsByClassName(a)),r}if(n.qsa&&!C[e+" "]&&(!y||!y.test(e))){if(1!==O)g=t,b=e;else if("object"!==t.nodeName.toLowerCase()){for((c=t.getAttribute("id"))?c=c.replace(te,ne):t.setAttribute("id",c=w),l=(m=i(e)).length;l--;)m[l]="#"+c+" "+be(m[l]);b=m.join(","),g=$.test(e)&&he(t.parentNode)||t}if(b)try{return M.apply(r,g.querySelectorAll(b)),r}catch(e){}finally{c===w&&t.removeAttribute("id")}}}return u(e.replace(B,"$1"),t,r,o)}function ie(){var e=[];return function t(n,o){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=o}}function le(e){return e[w]=!0,e}function ue(e){var t=d.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function se(e,t){for(var n=e.split("|"),o=n.length;o--;)r.attrHandle[n[o]]=t}function ce(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function pe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function fe(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function de(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&oe(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function me(e){return le(function(t){return t=+t,le(function(n,r){for(var o,a=e([],n.length,t),i=a.length;i--;)n[o=a[i]]&&(n[o]=!(r[o]=n[o]))})})}function he(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=ae.support={},a=ae.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},f=ae.setDocument=function(e){var t,o,i=e?e.ownerDocument||e:S;return i!==d&&9===i.nodeType&&i.documentElement?(m=(d=i).documentElement,h=!a(d),S!==d&&(o=d.defaultView)&&o.top!==o&&(o.addEventListener?o.addEventListener("unload",re,!1):o.attachEvent&&o.attachEvent("onunload",re)),n.attributes=ue(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ue(function(e){return e.appendChild(d.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Z.test(d.getElementsByClassName),n.getById=ue(function(e){return m.appendChild(e).id=w,!d.getElementsByName||!d.getElementsByName(w).length}),n.getById?(r.filter.ID=function(e){var t=e.replace(J,ee);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&h){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(J,ee);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&h){var n,r,o,a=t.getElementById(e);if(a){if((n=a.getAttributeNode("id"))&&n.value===e)return[a];for(o=t.getElementsByName(e),r=0;a=o[r++];)if((n=a.getAttributeNode("id"))&&n.value===e)return[a]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],o=0,a=t.getElementsByTagName(e);if("*"===e){for(;n=a[o++];)1===n.nodeType&&r.push(n);return r}return a},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&h)return t.getElementsByClassName(e)},b=[],y=[],(n.qsa=Z.test(d.querySelectorAll))&&(ue(function(e){m.appendChild(e).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&y.push("[*^$]="+N+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||y.push("\\["+N+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+w+"-]").length||y.push("~="),e.querySelectorAll(":checked").length||y.push(":checked"),e.querySelectorAll("a#"+w+"+*").length||y.push(".#.+[+~]")}),ue(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=d.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&y.push("name"+N+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&y.push(":enabled",":disabled"),m.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&y.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),y.push(",.*:")})),(n.matchesSelector=Z.test(g=m.matches||m.webkitMatchesSelector||m.mozMatchesSelector||m.oMatchesSelector||m.msMatchesSelector))&&ue(function(e){n.disconnectedMatch=g.call(e,"*"),g.call(e,"[s!='']:x"),b.push("!=",V)}),y=y.length&&new RegExp(y.join("|")),b=b.length&&new RegExp(b.join("|")),t=Z.test(m.compareDocumentPosition),v=t||Z.test(m.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},I=t?function(e,t){if(e===t)return p=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===d||e.ownerDocument===S&&v(S,e)?-1:t===d||t.ownerDocument===S&&v(S,t)?1:c?D(c,e)-D(c,t):0:4&r?-1:1)}:function(e,t){if(e===t)return p=!0,0;var n,r=0,o=e.parentNode,a=t.parentNode,i=[e],l=[t];if(!o||!a)return e===d?-1:t===d?1:o?-1:a?1:c?D(c,e)-D(c,t):0;if(o===a)return ce(e,t);for(n=e;n=n.parentNode;)i.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;i[r]===l[r];)r++;return r?ce(i[r],l[r]):i[r]===S?-1:l[r]===S?1:0},d):d},ae.matches=function(e,t){return ae(e,null,null,t)},ae.matchesSelector=function(e,t){if((e.ownerDocument||e)!==d&&f(e),t=t.replace(W,"='$1']"),n.matchesSelector&&h&&!C[t+" "]&&(!b||!b.test(t))&&(!y||!y.test(t)))try{var r=g.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return ae(t,d,null,[e]).length>0},ae.contains=function(e,t){return(e.ownerDocument||e)!==d&&f(e),v(e,t)},ae.attr=function(e,t){(e.ownerDocument||e)!==d&&f(e);var o=r.attrHandle[t.toLowerCase()],a=o&&_.call(r.attrHandle,t.toLowerCase())?o(e,t,!h):void 0;return void 0!==a?a:n.attributes||!h?e.getAttribute(t):(a=e.getAttributeNode(t))&&a.specified?a.value:null},ae.escape=function(e){return(e+"").replace(te,ne)},ae.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ae.uniqueSort=function(e){var t,r=[],o=0,a=0;if(p=!n.detectDuplicates,c=!n.sortStable&&e.slice(0),e.sort(I),p){for(;t=e[a++];)t===e[a]&&(o=r.push(a));for(;o--;)e.splice(r[o],1)}return c=null,e},o=ae.getText=function(e){var t,n="",r=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[r++];)n+=o(t);return n},(r=ae.selectors={cacheLength:50,createPseudo:le,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(J,ee),e[3]=(e[3]||e[4]||e[5]||"").replace(J,ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ae.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ae.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return K.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&q.test(n)&&(t=i(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(J,ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=P[e+" "];return t||(t=new RegExp("(^|"+N+")"+e+"("+N+"|$)"))&&P(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var o=ae.attr(r,e);return null==o?"!="===t:!t||(o+="","="===t?o===n:"!="===t?o!==n:"^="===t?n&&0===o.indexOf(n):"*="===t?n&&o.indexOf(n)>-1:"$="===t?n&&o.slice(-n.length)===n:"~="===t?(" "+o.replace(F," ")+" ").indexOf(n)>-1:"|="===t&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,o){var a="nth"!==e.slice(0,3),i="last"!==e.slice(-4),l="of-type"===t;return 1===r&&0===o?function(e){return!!e.parentNode}:function(t,n,u){var s,c,p,f,d,m,h=a!==i?"nextSibling":"previousSibling",y=t.parentNode,b=l&&t.nodeName.toLowerCase(),g=!u&&!l,v=!1;if(y){if(a){for(;h;){for(f=t;f=f[h];)if(l?f.nodeName.toLowerCase()===b:1===f.nodeType)return!1;m=h="only"===e&&!m&&"nextSibling"}return!0}if(m=[i?y.firstChild:y.lastChild],i&&g){for(v=(d=(s=(c=(p=(f=y)[w]||(f[w]={}))[f.uniqueID]||(p[f.uniqueID]={}))[e]||[])[0]===O&&s[1])&&s[2],f=d&&y.childNodes[d];f=++d&&f&&f[h]||(v=d=0)||m.pop();)if(1===f.nodeType&&++v&&f===t){c[e]=[O,d,v];break}}else if(g&&(v=d=(s=(c=(p=(f=t)[w]||(f[w]={}))[f.uniqueID]||(p[f.uniqueID]={}))[e]||[])[0]===O&&s[1]),!1===v)for(;(f=++d&&f&&f[h]||(v=d=0)||m.pop())&&((l?f.nodeName.toLowerCase()!==b:1!==f.nodeType)||!++v||(g&&((c=(p=f[w]||(f[w]={}))[f.uniqueID]||(p[f.uniqueID]={}))[e]=[O,v]),f!==t)););return(v-=o)===r||v%r==0&&v/r>=0}}},PSEUDO:function(e,t){var n,o=r.pseudos[e]||r.setFilters[e.toLowerCase()]||ae.error("unsupported pseudo: "+e);return o[w]?o(t):o.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,n){for(var r,a=o(e,t),i=a.length;i--;)e[r=D(e,a[i])]=!(n[r]=a[i])}):function(e){return o(e,0,n)}):o}},pseudos:{not:le(function(e){var t=[],n=[],r=l(e.replace(B,"$1"));return r[w]?le(function(e,t,n,o){for(var a,i=r(e,null,o,[]),l=e.length;l--;)(a=i[l])&&(e[l]=!(t[l]=a))}):function(e,o,a){return t[0]=e,r(t,null,a,n),t[0]=null,!n.pop()}}),has:le(function(e){return function(t){return ae(e,t).length>0}}),contains:le(function(e){return e=e.replace(J,ee),function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),lang:le(function(e){return z.test(e||"")||ae.error("unsupported lang: "+e),e=e.replace(J,ee).toLowerCase(),function(t){var n;do{if(n=h?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===m},focus:function(e){return e===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:de(!1),disabled:de(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return X.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:me(function(){return[0]}),last:me(function(e,t){return[t-1]}),eq:me(function(e,t,n){return[n<0?n+t:n]}),even:me(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:me(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:me(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:me(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=pe(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=fe(t);function ye(){}function be(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function ge(e,t,n){var r=t.dir,o=t.next,a=o||r,i=n&&"parentNode"===a,l=E++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o);return!1}:function(t,n,u){var s,c,p,f=[O,l];if(u){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,u))return!0}else for(;t=t[r];)if(1===t.nodeType||i)if(c=(p=t[w]||(t[w]={}))[t.uniqueID]||(p[t.uniqueID]={}),o&&o===t.nodeName.toLowerCase())t=t[r]||t;else{if((s=c[a])&&s[0]===O&&s[1]===l)return f[2]=s[2];if(c[a]=f,f[2]=e(t,n,u))return!0}return!1}}function ve(e){return e.length>1?function(t,n,r){for(var o=e.length;o--;)if(!e[o](t,n,r))return!1;return!0}:e[0]}function we(e,t,n,r,o){for(var a,i=[],l=0,u=e.length,s=null!=t;l<u;l++)(a=e[l])&&(n&&!n(a,r,o)||(i.push(a),s&&t.push(l)));return i}function Se(e,t,n,r,o,a){return r&&!r[w]&&(r=Se(r)),o&&!o[w]&&(o=Se(o,a)),le(function(a,i,l,u){var s,c,p,f=[],d=[],m=i.length,h=a||function(e,t,n){for(var r=0,o=t.length;r<o;r++)ae(e,t[r],n);return n}(t||"*",l.nodeType?[l]:l,[]),y=!e||!a&&t?h:we(h,f,e,l,u),b=n?o||(a?e:m||r)?[]:i:y;if(n&&n(y,b,l,u),r)for(s=we(b,d),r(s,[],l,u),c=s.length;c--;)(p=s[c])&&(b[d[c]]=!(y[d[c]]=p));if(a){if(o||e){if(o){for(s=[],c=b.length;c--;)(p=b[c])&&s.push(y[c]=p);o(null,b=[],s,u)}for(c=b.length;c--;)(p=b[c])&&(s=o?D(a,p):f[c])>-1&&(a[s]=!(i[s]=p))}}else b=we(b===i?b.splice(m,b.length):b),o?o(null,i,b,u):M.apply(i,b)})}function Oe(e){for(var t,n,o,a=e.length,i=r.relative[e[0].type],l=i||r.relative[" "],u=i?1:0,c=ge(function(e){return e===t},l,!0),p=ge(function(e){return D(t,e)>-1},l,!0),f=[function(e,n,r){var o=!i&&(r||n!==s)||((t=n).nodeType?c(e,n,r):p(e,n,r));return t=null,o}];u<a;u++)if(n=r.relative[e[u].type])f=[ge(ve(f),n)];else{if((n=r.filter[e[u].type].apply(null,e[u].matches))[w]){for(o=++u;o<a&&!r.relative[e[o].type];o++);return Se(u>1&&ve(f),u>1&&be(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(B,"$1"),n,u<o&&Oe(e.slice(u,o)),o<a&&Oe(e=e.slice(o)),o<a&&be(e))}f.push(n)}return ve(f)}return ye.prototype=r.filters=r.pseudos,r.setFilters=new ye,i=ae.tokenize=function(e,t){var n,o,a,i,l,u,s,c=T[e+" "];if(c)return t?0:c.slice(0);for(l=e,u=[],s=r.preFilter;l;){for(i in n&&!(o=U.exec(l))||(o&&(l=l.slice(o[0].length)||l),u.push(a=[])),n=!1,(o=H.exec(l))&&(n=o.shift(),a.push({value:n,type:o[0].replace(B," ")}),l=l.slice(n.length)),r.filter)!(o=K[i].exec(l))||s[i]&&!(o=s[i](o))||(n=o.shift(),a.push({value:n,type:i,matches:o}),l=l.slice(n.length));if(!n)break}return t?l.length:l?ae.error(e):T(e,u).slice(0)},l=ae.compile=function(e,t){var n,o=[],a=[],l=C[e+" "];if(!l){for(t||(t=i(e)),n=t.length;n--;)(l=Oe(t[n]))[w]?o.push(l):a.push(l);(l=C(e,function(e,t){var n=t.length>0,o=e.length>0,a=function(a,i,l,u,c){var p,m,y,b=0,g="0",v=a&&[],w=[],S=s,E=a||o&&r.find.TAG("*",c),P=O+=null==S?1:Math.random()||.1,T=E.length;for(c&&(s=i===d||i||c);g!==T&&null!=(p=E[g]);g++){if(o&&p){for(m=0,i||p.ownerDocument===d||(f(p),l=!h);y=e[m++];)if(y(p,i||d,l)){u.push(p);break}c&&(O=P)}n&&((p=!y&&p)&&b--,a&&v.push(p))}if(b+=g,n&&g!==b){for(m=0;y=t[m++];)y(v,w,i,l);if(a){if(b>0)for(;g--;)v[g]||w[g]||(w[g]=x.call(u));w=we(w)}M.apply(u,w),c&&!a&&w.length>0&&b+t.length>1&&ae.uniqueSort(u)}return c&&(O=P,s=S),v};return n?le(a):a}(a,o))).selector=e}return l},u=ae.select=function(e,t,n,o){var a,u,s,c,p,f="function"==typeof e&&e,d=!o&&i(e=f.selector||e);if(n=n||[],1===d.length){if((u=d[0]=d[0].slice(0)).length>2&&"ID"===(s=u[0]).type&&9===t.nodeType&&h&&r.relative[u[1].type]){if(!(t=(r.find.ID(s.matches[0].replace(J,ee),t)||[])[0]))return n;f&&(t=t.parentNode),e=e.slice(u.shift().value.length)}for(a=K.needsContext.test(e)?0:u.length;a--&&(s=u[a],!r.relative[c=s.type]);)if((p=r.find[c])&&(o=p(s.matches[0].replace(J,ee),$.test(u[0].type)&&he(t.parentNode)||t))){if(u.splice(a,1),!(e=o.length&&be(u)))return M.apply(n,o),n;break}}return(f||l(e,d))(o,t,!h,n,!t||$.test(e)&&he(t.parentNode)||t),n},n.sortStable=w.split("").sort(I).join("")===w,n.detectDuplicates=!!p,f(),n.sortDetached=ue(function(e){return 1&e.compareDocumentPosition(d.createElement("fieldset"))}),ue(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||se("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&ue(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||se("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ue(function(e){return null==e.getAttribute("disabled")})||se(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),ae}(e);S.find=P,S.expr=P.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=P.uniqueSort,S.text=P.getText,S.isXMLDoc=P.isXML,S.contains=P.contains,S.escapeSelector=P.escape;var T=function(e,t,n){for(var r=[],o=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&S(e).is(n))break;r.push(e)}return r},C=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},I=S.expr.match.needsContext;function _(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var k=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function x(e,t,n){return y(t)?S.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?S.grep(e,function(e){return e===t!==n}):"string"!=typeof t?S.grep(e,function(e){return u.call(t,e)>-1!==n}):S.filter(t,e,n)}S.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?S.find.matchesSelector(r,e)?[r]:[]:S.find.matches(e,S.grep(t,function(e){return 1===e.nodeType}))},S.fn.extend({find:function(e){var t,n,r=this.length,o=this;if("string"!=typeof e)return this.pushStack(S(e).filter(function(){for(t=0;t<r;t++)if(S.contains(o[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)S.find(e,o[t],n);return r>1?S.uniqueSort(n):n},filter:function(e){return this.pushStack(x(this,e||[],!1))},not:function(e){return this.pushStack(x(this,e||[],!0))},is:function(e){return!!x(this,"string"==typeof e&&I.test(e)?S(e):e||[],!1).length}});var j,M=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(e,t,n){var o,a;if(!e)return this;if(n=n||j,"string"==typeof e){if(!(o="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:M.exec(e))||!o[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(o[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(o[1],t&&t.nodeType?t.ownerDocument||t:r,!0)),k.test(o[1])&&S.isPlainObject(t))for(o in t)y(this[o])?this[o](t[o]):this.attr(o,t[o]);return this}return(a=r.getElementById(o[2]))&&(this[0]=a,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):y(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this)}).prototype=S.fn,j=S(r);var A=/^(?:parents|prev(?:Until|All))/,D={children:!0,contents:!0,next:!0,prev:!0};function R(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,o=this.length,a=[],i="string"!=typeof e&&S(e);if(!I.test(e))for(;r<o;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(i?i.index(n)>-1:1===n.nodeType&&S.find.matchesSelector(n,e))){a.push(n);break}return this.pushStack(a.length>1?S.uniqueSort(a):a)},index:function(e){return e?"string"==typeof e?u.call(S(e),this[0]):u.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return T(e,"parentNode")},parentsUntil:function(e,t,n){return T(e,"parentNode",n)},next:function(e){return R(e,"nextSibling")},prev:function(e){return R(e,"previousSibling")},nextAll:function(e){return T(e,"nextSibling")},prevAll:function(e){return T(e,"previousSibling")},nextUntil:function(e,t,n){return T(e,"nextSibling",n)},prevUntil:function(e,t,n){return T(e,"previousSibling",n)},siblings:function(e){return C((e.parentNode||{}).firstChild,e)},children:function(e){return C(e.firstChild)},contents:function(e){return _(e,"iframe")?e.contentDocument:(_(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},function(e,t){S.fn[e]=function(n,r){var o=S.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(o=S.filter(r,o)),this.length>1&&(D[e]||S.uniqueSort(o),A.test(e)&&o.reverse()),this.pushStack(o)}});var N=/[^\x20\t\r\n\f]+/g;function L(e){return e}function G(e){throw e}function V(e,t,n,r){var o;try{e&&y(o=e.promise)?o.call(e).done(t).fail(n):e&&y(o=e.then)?o.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return S.each(e.match(N)||[],function(e,n){t[n]=!0}),t}(e):S.extend({},e);var t,n,r,o,a=[],i=[],l=-1,u=function(){for(o=o||e.once,r=t=!0;i.length;l=-1)for(n=i.shift();++l<a.length;)!1===a[l].apply(n[0],n[1])&&e.stopOnFalse&&(l=a.length,n=!1);e.memory||(n=!1),t=!1,o&&(a=n?[]:"")},s={add:function(){return a&&(n&&!t&&(l=a.length-1,i.push(n)),function t(n){S.each(n,function(n,r){y(r)?e.unique&&s.has(r)||a.push(r):r&&r.length&&"string"!==w(r)&&t(r)})}(arguments),n&&!t&&u()),this},remove:function(){return S.each(arguments,function(e,t){for(var n;(n=S.inArray(t,a,n))>-1;)a.splice(n,1),n<=l&&l--}),this},has:function(e){return e?S.inArray(e,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return o=i=[],a=n="",this},disabled:function(){return!a},lock:function(){return o=i=[],n||t||(a=n=""),this},locked:function(){return!!o},fireWith:function(e,n){return o||(n=[e,(n=n||[]).slice?n.slice():n],i.push(n),t||u()),this},fire:function(){return s.fireWith(this,arguments),this},fired:function(){return!!r}};return s},S.extend({Deferred:function(t){var n=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],r="pending",o={state:function(){return r},always:function(){return a.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var e=arguments;return S.Deferred(function(t){S.each(n,function(n,r){var o=y(e[r[4]])&&e[r[4]];a[r[1]](function(){var e=o&&o.apply(this,arguments);e&&y(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+"With"](this,o?[e]:arguments)})}),e=null}).promise()},then:function(t,r,o){var a=0;function i(t,n,r,o){return function(){var l=this,u=arguments,s=function(){var e,s;if(!(t<a)){if((e=r.apply(l,u))===n.promise())throw new TypeError("Thenable self-resolution");s=e&&("object"===h(e)||"function"==typeof e)&&e.then,y(s)?o?s.call(e,i(a,n,L,o),i(a,n,G,o)):(a++,s.call(e,i(a,n,L,o),i(a,n,G,o),i(a,n,L,n.notifyWith))):(r!==L&&(l=void 0,u=[e]),(o||n.resolveWith)(l,u))}},c=o?s:function(){try{s()}catch(e){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(e,c.stackTrace),t+1>=a&&(r!==G&&(l=void 0,u=[e]),n.rejectWith(l,u))}};t?c():(S.Deferred.getStackHook&&(c.stackTrace=S.Deferred.getStackHook()),e.setTimeout(c))}}return S.Deferred(function(e){n[0][3].add(i(0,e,y(o)?o:L,e.notifyWith)),n[1][3].add(i(0,e,y(t)?t:L)),n[2][3].add(i(0,e,y(r)?r:G))}).promise()},promise:function(e){return null!=e?S.extend(e,o):o}},a={};return S.each(n,function(e,t){var i=t[2],l=t[5];o[t[1]]=i.add,l&&i.add(function(){r=l},n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),i.add(t[3].fire),a[t[0]]=function(){return a[t[0]+"With"](this===a?void 0:this,arguments),this},a[t[0]+"With"]=i.fireWith}),o.promise(a),t&&t.call(a,a),a},when:function(e){var t=arguments.length,n=t,r=Array(n),o=a.call(arguments),i=S.Deferred(),l=function(e){return function(n){r[e]=this,o[e]=arguments.length>1?a.call(arguments):n,--t||i.resolveWith(r,o)}};if(t<=1&&(V(e,i.done(l(n)).resolve,i.reject,!t),"pending"===i.state()||y(o[n]&&o[n].then)))return i.then();for(;n--;)V(o[n],l(n),i.reject);return i.promise()}});var F=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&F.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},S.readyException=function(t){e.setTimeout(function(){throw t})};var B=S.Deferred();function U(){r.removeEventListener("DOMContentLoaded",U),e.removeEventListener("load",U),S.ready()}S.fn.ready=function(e){return B.then(e).catch(function(e){S.readyException(e)}),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0,!0!==e&&--S.readyWait>0||B.resolveWith(r,[S]))}}),S.ready.then=B.then,"complete"===r.readyState||"loading"!==r.readyState&&!r.documentElement.doScroll?e.setTimeout(S.ready):(r.addEventListener("DOMContentLoaded",U),e.addEventListener("load",U));var H=function e(t,n,r,o,a,i,l){var u=0,s=t.length,c=null==r;if("object"===w(r))for(u in a=!0,r)e(t,n,u,r[u],!0,i,l);else if(void 0!==o&&(a=!0,y(o)||(l=!0),c&&(l?(n.call(t,o),n=null):(c=n,n=function(e,t,n){return c.call(S(e),n)})),n))for(;u<s;u++)n(t[u],r,l?o:o.call(t[u],u,n(t[u],r)));return a?t:c?n.call(t):s?n(t[0],r):i},W=/^-ms-/,q=/-([a-z])/g;function z(e,t){return t.toUpperCase()}function K(e){return e.replace(W,"ms-").replace(q,z)}var Y=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function X(){this.expando=S.expando+X.uid++}X.uid=1,X.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Y(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,o=this.cache(e);if("string"==typeof t)o[K(t)]=n;else for(r in t)o[K(r)]=t[r];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][K(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(K):(t=K(t))in r?[t]:t.match(N)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||S.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var Z=new X,Q=new X,$=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,J=/[A-Z]/g;function ee(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(J,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:$.test(e)?JSON.parse(e):e)}(n)}catch(e){}Q.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return Q.hasData(e)||Z.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return Z.access(e,t,n)},_removeData:function(e,t){Z.remove(e,t)}}),S.fn.extend({data:function(e,t){var n,r,o,a=this[0],i=a&&a.attributes;if(void 0===e){if(this.length&&(o=Q.get(a),1===a.nodeType&&!Z.get(a,"hasDataAttrs"))){for(n=i.length;n--;)i[n]&&0===(r=i[n].name).indexOf("data-")&&(r=K(r.slice(5)),ee(a,r,o[r]));Z.set(a,"hasDataAttrs",!0)}return o}return"object"===h(e)?this.each(function(){Q.set(this,e)}):H(this,function(t){var n;if(a&&void 0===t)return void 0!==(n=Q.get(a,e))?n:void 0!==(n=ee(a,e))?n:void 0;this.each(function(){Q.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Q.remove(this,e)})}}),S.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Z.get(e,t),n&&(!r||Array.isArray(n)?r=Z.access(e,t,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=S.queue(e,t),r=n.length,o=n.shift(),a=S._queueHooks(e,t);"inprogress"===o&&(o=n.shift(),r--),o&&("fx"===t&&n.unshift("inprogress"),delete a.stop,o.call(e,function(){S.dequeue(e,t)},a)),!r&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Z.get(e,n)||Z.access(e,n,{empty:S.Callbacks("once memory").add(function(){Z.remove(e,[t+"queue",n])})})}}),S.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?S.queue(this[0],e):void 0===t?this:this.each(function(){var n=S.queue(this,e,t);S._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&S.dequeue(this,e)})},dequeue:function(e){return this.each(function(){S.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,o=S.Deferred(),a=this,i=this.length,l=function(){--r||o.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";i--;)(n=Z.get(a[i],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(l));return l(),o.promise(t)}});var te=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ne=new RegExp("^(?:([+-])=|)("+te+")([a-z%]*)$","i"),re=["Top","Right","Bottom","Left"],oe=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&S.contains(e.ownerDocument,e)&&"none"===S.css(e,"display")},ae=function(e,t,n,r){var o,a,i={};for(a in t)i[a]=e.style[a],e.style[a]=t[a];for(a in o=n.apply(e,r||[]),t)e.style[a]=i[a];return o};function ie(e,t,n,r){var o,a,i=20,l=r?function(){return r.cur()}:function(){return S.css(e,t,"")},u=l(),s=n&&n[3]||(S.cssNumber[t]?"":"px"),c=(S.cssNumber[t]||"px"!==s&&+u)&&ne.exec(S.css(e,t));if(c&&c[3]!==s){for(u/=2,s=s||c[3],c=+u||1;i--;)S.style(e,t,c+s),(1-a)*(1-(a=l()/u||.5))<=0&&(i=0),c/=a;c*=2,S.style(e,t,c+s),n=n||[]}return n&&(c=+c||+u||0,o=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=s,r.start=c,r.end=o)),o}var le={};function ue(e){var t,n=e.ownerDocument,r=e.nodeName,o=le[r];return o||(t=n.body.appendChild(n.createElement(r)),o=S.css(t,"display"),t.parentNode.removeChild(t),"none"===o&&(o="block"),le[r]=o,o)}function se(e,t){for(var n,r,o=[],a=0,i=e.length;a<i;a++)(r=e[a]).style&&(n=r.style.display,t?("none"===n&&(o[a]=Z.get(r,"display")||null,o[a]||(r.style.display="")),""===r.style.display&&oe(r)&&(o[a]=ue(r))):"none"!==n&&(o[a]="none",Z.set(r,"display",n)));for(a=0;a<i;a++)null!=o[a]&&(e[a].style.display=o[a]);return e}S.fn.extend({show:function(){return se(this,!0)},hide:function(){return se(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){oe(this)?S(this).show():S(this).hide()})}});var ce=/^(?:checkbox|radio)$/i,pe=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,fe=/^$|^module$|\/(?:java|ecma)script/i,de={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function me(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&_(e,t)?S.merge([e],n):n}function he(e,t){for(var n=0,r=e.length;n<r;n++)Z.set(e[n],"globalEval",!t||Z.get(t[n],"globalEval"))}de.optgroup=de.option,de.tbody=de.tfoot=de.colgroup=de.caption=de.thead,de.th=de.td;var ye,be,ge=/<|&#?\w+;/;function ve(e,t,n,r,o){for(var a,i,l,u,s,c,p=t.createDocumentFragment(),f=[],d=0,m=e.length;d<m;d++)if((a=e[d])||0===a)if("object"===w(a))S.merge(f,a.nodeType?[a]:a);else if(ge.test(a)){for(i=i||p.appendChild(t.createElement("div")),l=(pe.exec(a)||["",""])[1].toLowerCase(),u=de[l]||de._default,i.innerHTML=u[1]+S.htmlPrefilter(a)+u[2],c=u[0];c--;)i=i.lastChild;S.merge(f,i.childNodes),(i=p.firstChild).textContent=""}else f.push(t.createTextNode(a));for(p.textContent="",d=0;a=f[d++];)if(r&&S.inArray(a,r)>-1)o&&o.push(a);else if(s=S.contains(a.ownerDocument,a),i=me(p.appendChild(a),"script"),s&&he(i),n)for(c=0;a=i[c++];)fe.test(a.type||"")&&n.push(a);return p}ye=r.createDocumentFragment().appendChild(r.createElement("div")),(be=r.createElement("input")).setAttribute("type","radio"),be.setAttribute("checked","checked"),be.setAttribute("name","t"),ye.appendChild(be),m.checkClone=ye.cloneNode(!0).cloneNode(!0).lastChild.checked,ye.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!ye.cloneNode(!0).lastChild.defaultValue;var we=r.documentElement,Se=/^key/,Oe=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ee=/^([^.]*)(?:\.(.+)|)/;function Pe(){return!0}function Te(){return!1}function Ce(){try{return r.activeElement}catch(e){}}function Ie(e,t,n,r,o,a){var i,l;if("object"===h(t)){for(l in"string"!=typeof n&&(r=r||n,n=void 0),t)Ie(e,l,n,r,t[l],a);return e}if(null==r&&null==o?(o=n,r=n=void 0):null==o&&("string"==typeof n?(o=r,r=void 0):(o=r,r=n,n=void 0)),!1===o)o=Te;else if(!o)return e;return 1===a&&(i=o,(o=function(e){return S().off(e),i.apply(this,arguments)}).guid=i.guid||(i.guid=S.guid++)),e.each(function(){S.event.add(this,t,o,r,n)})}S.event={global:{},add:function(e,t,n,r,o){var a,i,l,u,s,c,p,f,d,m,h,y=Z.get(e);if(y)for(n.handler&&(n=(a=n).handler,o=a.selector),o&&S.find.matchesSelector(we,o),n.guid||(n.guid=S.guid++),(u=y.events)||(u=y.events={}),(i=y.handle)||(i=y.handle=function(t){return void 0!==S&&S.event.triggered!==t.type?S.event.dispatch.apply(e,arguments):void 0}),s=(t=(t||"").match(N)||[""]).length;s--;)d=h=(l=Ee.exec(t[s])||[])[1],m=(l[2]||"").split(".").sort(),d&&(p=S.event.special[d]||{},d=(o?p.delegateType:p.bindType)||d,p=S.event.special[d]||{},c=S.extend({type:d,origType:h,data:r,handler:n,guid:n.guid,selector:o,needsContext:o&&S.expr.match.needsContext.test(o),namespace:m.join(".")},a),(f=u[d])||((f=u[d]=[]).delegateCount=0,p.setup&&!1!==p.setup.call(e,r,m,i)||e.addEventListener&&e.addEventListener(d,i)),p.add&&(p.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),o?f.splice(f.delegateCount++,0,c):f.push(c),S.event.global[d]=!0)},remove:function(e,t,n,r,o){var a,i,l,u,s,c,p,f,d,m,h,y=Z.hasData(e)&&Z.get(e);if(y&&(u=y.events)){for(s=(t=(t||"").match(N)||[""]).length;s--;)if(d=h=(l=Ee.exec(t[s])||[])[1],m=(l[2]||"").split(".").sort(),d){for(p=S.event.special[d]||{},f=u[d=(r?p.delegateType:p.bindType)||d]||[],l=l[2]&&new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=a=f.length;a--;)c=f[a],!o&&h!==c.origType||n&&n.guid!==c.guid||l&&!l.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(f.splice(a,1),c.selector&&f.delegateCount--,p.remove&&p.remove.call(e,c));i&&!f.length&&(p.teardown&&!1!==p.teardown.call(e,m,y.handle)||S.removeEvent(e,d,y.handle),delete u[d])}else for(d in u)S.event.remove(e,d+t[s],n,r,!0);S.isEmptyObject(u)&&Z.remove(e,"handle events")}},dispatch:function(e){var t,n,r,o,a,i,l=S.event.fix(e),u=new Array(arguments.length),s=(Z.get(this,"events")||{})[l.type]||[],c=S.event.special[l.type]||{};for(u[0]=l,t=1;t<arguments.length;t++)u[t]=arguments[t];if(l.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,l)){for(i=S.event.handlers.call(this,l,s),t=0;(o=i[t++])&&!l.isPropagationStopped();)for(l.currentTarget=o.elem,n=0;(a=o.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!l.rnamespace.test(a.namespace)||(l.handleObj=a,l.data=a.data,void 0!==(r=((S.event.special[a.origType]||{}).handle||a.handler).apply(o.elem,u))&&!1===(l.result=r)&&(l.preventDefault(),l.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,l),l.result}},handlers:function(e,t){var n,r,o,a,i,l=[],u=t.delegateCount,s=e.target;if(u&&s.nodeType&&!("click"===e.type&&e.button>=1))for(;s!==this;s=s.parentNode||this)if(1===s.nodeType&&("click"!==e.type||!0!==s.disabled)){for(a=[],i={},n=0;n<u;n++)void 0===i[o=(r=t[n]).selector+" "]&&(i[o]=r.needsContext?S(o,this).index(s)>-1:S.find(o,this,null,[s]).length),i[o]&&a.push(r);a.length&&l.push({elem:s,handlers:a})}return s=this,u<t.length&&l.push({elem:s,handlers:t.slice(u)}),l},addProp:function(e,t){Object.defineProperty(S.Event.prototype,e,{enumerable:!0,configurable:!0,get:y(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Ce()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Ce()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&_(this,"input"))return this.click(),!1},_default:function(e){return _(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Pe:Te,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Te,isPropagationStopped:Te,isImmediatePropagationStopped:Te,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Pe,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Pe,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Pe,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Se.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Oe.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},S.event.addProp),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){S.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,o=e.handleObj;return r&&(r===this||S.contains(this,r))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),S.fn.extend({on:function(e,t,n,r){return Ie(this,e,t,n,r)},one:function(e,t,n,r){return Ie(this,e,t,n,r,1)},off:function(e,t,n){var r,o;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,S(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"===h(e)){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Te),this.each(function(){S.event.remove(this,e,n,t)})}});var _e=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,ke=/<script|<style|<link/i,xe=/checked\s*(?:[^=]|=\s*.checked.)/i,je=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Me(e,t){return _(e,"table")&&_(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function Ae(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function De(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Re(e,t){var n,r,o,a,i,l,u,s;if(1===t.nodeType){if(Z.hasData(e)&&(a=Z.access(e),i=Z.set(t,a),s=a.events))for(o in delete i.handle,i.events={},s)for(n=0,r=s[o].length;n<r;n++)S.event.add(t,o,s[o][n]);Q.hasData(e)&&(l=Q.access(e),u=S.extend({},l),Q.set(t,u))}}function Ne(e,t,n,r){t=i.apply([],t);var o,a,l,u,s,c,p=0,f=e.length,d=f-1,h=t[0],b=y(h);if(b||f>1&&"string"==typeof h&&!m.checkClone&&xe.test(h))return e.each(function(o){var a=e.eq(o);b&&(t[0]=h.call(this,o,a.html())),Ne(a,t,n,r)});if(f&&(a=(o=ve(t,e[0].ownerDocument,!1,e,r)).firstChild,1===o.childNodes.length&&(o=a),a||r)){for(u=(l=S.map(me(o,"script"),Ae)).length;p<f;p++)s=o,p!==d&&(s=S.clone(s,!0,!0),u&&S.merge(l,me(s,"script"))),n.call(e[p],s,p);if(u)for(c=l[l.length-1].ownerDocument,S.map(l,De),p=0;p<u;p++)s=l[p],fe.test(s.type||"")&&!Z.access(s,"globalEval")&&S.contains(c,s)&&(s.src&&"module"!==(s.type||"").toLowerCase()?S._evalUrl&&S._evalUrl(s.src):v(s.textContent.replace(je,""),c,s))}return e}function Le(e,t,n){for(var r,o=t?S.filter(t,e):e,a=0;null!=(r=o[a]);a++)n||1!==r.nodeType||S.cleanData(me(r)),r.parentNode&&(n&&S.contains(r.ownerDocument,r)&&he(me(r,"script")),r.parentNode.removeChild(r));return e}S.extend({htmlPrefilter:function(e){return e.replace(_e,"<$1></$2>")},clone:function(e,t,n){var r,o,a,i,l,u,s,c=e.cloneNode(!0),p=S.contains(e.ownerDocument,e);if(!(m.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(i=me(c),r=0,o=(a=me(e)).length;r<o;r++)l=a[r],u=i[r],s=void 0,"input"===(s=u.nodeName.toLowerCase())&&ce.test(l.type)?u.checked=l.checked:"input"!==s&&"textarea"!==s||(u.defaultValue=l.defaultValue);if(t)if(n)for(a=a||me(e),i=i||me(c),r=0,o=a.length;r<o;r++)Re(a[r],i[r]);else Re(e,c);return(i=me(c,"script")).length>0&&he(i,!p&&me(e,"script")),c},cleanData:function(e){for(var t,n,r,o=S.event.special,a=0;void 0!==(n=e[a]);a++)if(Y(n)){if(t=n[Z.expando]){if(t.events)for(r in t.events)o[r]?S.event.remove(n,r):S.removeEvent(n,r,t.handle);n[Z.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Le(this,e,!0)},remove:function(e){return Le(this,e)},text:function(e){return H(this,function(e){return void 0===e?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Ne(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Me(this,e).appendChild(e)})},prepend:function(){return Ne(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Me(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Ne(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Ne(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(me(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return S.clone(this,e,t)})},html:function(e){return H(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!ke.test(e)&&!de[(pe.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(S.cleanData(me(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Ne(this,arguments,function(t){var n=this.parentNode;S.inArray(this,e)<0&&(S.cleanData(me(this)),n&&n.replaceChild(t,this))},e)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){S.fn[e]=function(e){for(var n,r=[],o=S(e),a=o.length-1,i=0;i<=a;i++)n=i===a?this:this.clone(!0),S(o[i])[t](n),l.apply(r,n.get());return this.pushStack(r)}});var Ge=new RegExp("^("+te+")(?!px)[a-z%]+$","i"),Ve=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Fe=new RegExp(re.join("|"),"i");function Be(e,t,n){var r,o,a,i,l=e.style;return(n=n||Ve(e))&&(""!==(i=n.getPropertyValue(t)||n[t])||S.contains(e.ownerDocument,e)||(i=S.style(e,t)),!m.pixelBoxStyles()&&Ge.test(i)&&Fe.test(t)&&(r=l.width,o=l.minWidth,a=l.maxWidth,l.minWidth=l.maxWidth=l.width=i,i=n.width,l.width=r,l.minWidth=o,l.maxWidth=a)),void 0!==i?i+"":i}function Ue(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function t(){if(c){s.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",we.appendChild(s).appendChild(c);var t=e.getComputedStyle(c);o="1%"!==t.top,u=12===n(t.marginLeft),c.style.right="60%",l=36===n(t.right),a=36===n(t.width),c.style.position="absolute",i=36===c.offsetWidth||"absolute",we.removeChild(s),c=null}}function n(e){return Math.round(parseFloat(e))}var o,a,i,l,u,s=r.createElement("div"),c=r.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===c.style.backgroundClip,S.extend(m,{boxSizingReliable:function(){return t(),a},pixelBoxStyles:function(){return t(),l},pixelPosition:function(){return t(),o},reliableMarginLeft:function(){return t(),u},scrollboxSize:function(){return t(),i}}))}();var He=/^(none|table(?!-c[ea]).+)/,We=/^--/,qe={position:"absolute",visibility:"hidden",display:"block"},ze={letterSpacing:"0",fontWeight:"400"},Ke=["Webkit","Moz","ms"],Ye=r.createElement("div").style;function Xe(e){var t=S.cssProps[e];return t||(t=S.cssProps[e]=function(e){if(e in Ye)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=Ke.length;n--;)if((e=Ke[n]+t)in Ye)return e}(e)||e),t}function Ze(e,t,n){var r=ne.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Qe(e,t,n,r,o,a){var i="width"===t?1:0,l=0,u=0;if(n===(r?"border":"content"))return 0;for(;i<4;i+=2)"margin"===n&&(u+=S.css(e,n+re[i],!0,o)),r?("content"===n&&(u-=S.css(e,"padding"+re[i],!0,o)),"margin"!==n&&(u-=S.css(e,"border"+re[i]+"Width",!0,o))):(u+=S.css(e,"padding"+re[i],!0,o),"padding"!==n?u+=S.css(e,"border"+re[i]+"Width",!0,o):l+=S.css(e,"border"+re[i]+"Width",!0,o));return!r&&a>=0&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-a-u-l-.5))),u}function $e(e,t,n){var r=Ve(e),o=Be(e,t,r),a="border-box"===S.css(e,"boxSizing",!1,r),i=a;if(Ge.test(o)){if(!n)return o;o="auto"}return i=i&&(m.boxSizingReliable()||o===e.style[t]),("auto"===o||!parseFloat(o)&&"inline"===S.css(e,"display",!1,r))&&(o=e["offset"+t[0].toUpperCase()+t.slice(1)],i=!0),(o=parseFloat(o)||0)+Qe(e,t,n||(a?"border":"content"),i,r,o)+"px"}function Je(e,t,n,r,o){return new Je.prototype.init(e,t,n,r,o)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Be(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,i,l=K(t),u=We.test(t),s=e.style;if(u||(t=Xe(l)),i=S.cssHooks[t]||S.cssHooks[l],void 0===n)return i&&"get"in i&&void 0!==(o=i.get(e,!1,r))?o:s[t];"string"===(a=h(n))&&(o=ne.exec(n))&&o[1]&&(n=ie(e,t,o),a="number"),null!=n&&n==n&&("number"===a&&(n+=o&&o[3]||(S.cssNumber[l]?"":"px")),m.clearCloneStyle||""!==n||0!==t.indexOf("background")||(s[t]="inherit"),i&&"set"in i&&void 0===(n=i.set(e,n,r))||(u?s.setProperty(t,n):s[t]=n))}},css:function(e,t,n,r){var o,a,i,l=K(t);return We.test(t)||(t=Xe(l)),(i=S.cssHooks[t]||S.cssHooks[l])&&"get"in i&&(o=i.get(e,!0,n)),void 0===o&&(o=Be(e,t,r)),"normal"===o&&t in ze&&(o=ze[t]),""===n||n?(a=parseFloat(o),!0===n||isFinite(a)?a||0:o):o}}),S.each(["height","width"],function(e,t){S.cssHooks[t]={get:function(e,n,r){if(n)return!He.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?$e(e,t,r):ae(e,qe,function(){return $e(e,t,r)})},set:function(e,n,r){var o,a=Ve(e),i="border-box"===S.css(e,"boxSizing",!1,a),l=r&&Qe(e,t,r,i,a);return i&&m.scrollboxSize()===a.position&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(a[t])-Qe(e,t,"border",!1,a)-.5)),l&&(o=ne.exec(n))&&"px"!==(o[3]||"px")&&(e.style[t]=n,n=S.css(e,t)),Ze(0,n,l)}}}),S.cssHooks.marginLeft=Ue(m.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Be(e,"marginLeft"))||e.getBoundingClientRect().left-ae(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),S.each({margin:"",padding:"",border:"Width"},function(e,t){S.cssHooks[e+t]={expand:function(n){for(var r=0,o={},a="string"==typeof n?n.split(" "):[n];r<4;r++)o[e+re[r]+t]=a[r]||a[r-2]||a[0];return o}},"margin"!==e&&(S.cssHooks[e+t].set=Ze)}),S.fn.extend({css:function(e,t){return H(this,function(e,t,n){var r,o,a={},i=0;if(Array.isArray(t)){for(r=Ve(e),o=t.length;i<o;i++)a[t[i]]=S.css(e,t[i],!1,r);return a}return void 0!==n?S.style(e,t,n):S.css(e,t)},e,t,arguments.length>1)}}),S.Tween=Je,Je.prototype={constructor:Je,init:function(e,t,n,r,o,a){this.elem=e,this.prop=n,this.easing=o||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=a||(S.cssNumber[n]?"":"px")},cur:function(){var e=Je.propHooks[this.prop];return e&&e.get?e.get(this):Je.propHooks._default.get(this)},run:function(e){var t,n=Je.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Je.propHooks._default.set(this),this}},Je.prototype.init.prototype=Je.prototype,Je.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[S.cssProps[e.prop]]&&!S.cssHooks[e.prop]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}},Je.propHooks.scrollTop=Je.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=Je.prototype.init,S.fx.step={};var et,tt,nt=/^(?:toggle|show|hide)$/,rt=/queueHooks$/;function ot(){tt&&(!1===r.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(ot):e.setTimeout(ot,S.fx.interval),S.fx.tick())}function at(){return e.setTimeout(function(){et=void 0}),et=Date.now()}function it(e,t){var n,r=0,o={height:e};for(t=t?1:0;r<4;r+=2-t)o["margin"+(n=re[r])]=o["padding"+n]=e;return t&&(o.opacity=o.width=e),o}function lt(e,t,n){for(var r,o=(ut.tweeners[t]||[]).concat(ut.tweeners["*"]),a=0,i=o.length;a<i;a++)if(r=o[a].call(n,t,e))return r}function ut(e,t,n){var r,o,a=0,i=ut.prefilters.length,l=S.Deferred().always(function(){delete u.elem}),u=function(){if(o)return!1;for(var t=et||at(),n=Math.max(0,s.startTime+s.duration-t),r=1-(n/s.duration||0),a=0,i=s.tweens.length;a<i;a++)s.tweens[a].run(r);return l.notifyWith(e,[s,r,n]),r<1&&i?n:(i||l.notifyWith(e,[s,1,0]),l.resolveWith(e,[s]),!1)},s=l.promise({elem:e,props:S.extend({},t),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},n),originalProperties:t,originalOptions:n,startTime:et||at(),duration:n.duration,tweens:[],createTween:function(t,n){var r=S.Tween(e,s.opts,t,n,s.opts.specialEasing[t]||s.opts.easing);return s.tweens.push(r),r},stop:function(t){var n=0,r=t?s.tweens.length:0;if(o)return this;for(o=!0;n<r;n++)s.tweens[n].run(1);return t?(l.notifyWith(e,[s,1,0]),l.resolveWith(e,[s,t])):l.rejectWith(e,[s,t]),this}}),c=s.props;for(!function(e,t){var n,r,o,a,i;for(n in e)if(o=t[r=K(n)],a=e[n],Array.isArray(a)&&(o=a[1],a=e[n]=a[0]),n!==r&&(e[r]=a,delete e[n]),(i=S.cssHooks[r])&&"expand"in i)for(n in a=i.expand(a),delete e[r],a)n in e||(e[n]=a[n],t[n]=o);else t[r]=o}(c,s.opts.specialEasing);a<i;a++)if(r=ut.prefilters[a].call(s,e,c,s.opts))return y(r.stop)&&(S._queueHooks(s.elem,s.opts.queue).stop=r.stop.bind(r)),r;return S.map(c,lt,s),y(s.opts.start)&&s.opts.start.call(e,s),s.progress(s.opts.progress).done(s.opts.done,s.opts.complete).fail(s.opts.fail).always(s.opts.always),S.fx.timer(S.extend(u,{elem:e,anim:s,queue:s.opts.queue})),s}S.Animation=S.extend(ut,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ie(n.elem,e,ne.exec(t),n),n}]},tweener:function(e,t){y(e)?(t=e,e=["*"]):e=e.match(N);for(var n,r=0,o=e.length;r<o;r++)n=e[r],ut.tweeners[n]=ut.tweeners[n]||[],ut.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,o,a,i,l,u,s,c,p="width"in t||"height"in t,f=this,d={},m=e.style,h=e.nodeType&&oe(e),y=Z.get(e,"fxshow");for(r in n.queue||(null==(i=S._queueHooks(e,"fx")).unqueued&&(i.unqueued=0,l=i.empty.fire,i.empty.fire=function(){i.unqueued||l()}),i.unqueued++,f.always(function(){f.always(function(){i.unqueued--,S.queue(e,"fx").length||i.empty.fire()})})),t)if(o=t[r],nt.test(o)){if(delete t[r],a=a||"toggle"===o,o===(h?"hide":"show")){if("show"!==o||!y||void 0===y[r])continue;h=!0}d[r]=y&&y[r]||S.style(e,r)}if((u=!S.isEmptyObject(t))||!S.isEmptyObject(d))for(r in p&&1===e.nodeType&&(n.overflow=[m.overflow,m.overflowX,m.overflowY],null==(s=y&&y.display)&&(s=Z.get(e,"display")),"none"===(c=S.css(e,"display"))&&(s?c=s:(se([e],!0),s=e.style.display||s,c=S.css(e,"display"),se([e]))),("inline"===c||"inline-block"===c&&null!=s)&&"none"===S.css(e,"float")&&(u||(f.done(function(){m.display=s}),null==s&&(c=m.display,s="none"===c?"":c)),m.display="inline-block")),n.overflow&&(m.overflow="hidden",f.always(function(){m.overflow=n.overflow[0],m.overflowX=n.overflow[1],m.overflowY=n.overflow[2]})),u=!1,d)u||(y?"hidden"in y&&(h=y.hidden):y=Z.access(e,"fxshow",{display:s}),a&&(y.hidden=!h),h&&se([e],!0),f.done(function(){for(r in h||se([e]),Z.remove(e,"fxshow"),d)S.style(e,r,d[r])})),u=lt(h?y[r]:0,r,f),r in y||(y[r]=u.start,h&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?ut.prefilters.unshift(e):ut.prefilters.push(e)}}),S.speed=function(e,t,n){var r=e&&"object"===h(e)?S.extend({},e):{complete:n||!n&&t||y(e)&&e,duration:e,easing:n&&t||t&&!y(t)&&t};return S.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in S.fx.speeds?r.duration=S.fx.speeds[r.duration]:r.duration=S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){y(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(e,t,n,r){return this.filter(oe).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var o=S.isEmptyObject(e),a=S.speed(t,n,r),i=function(){var t=ut(this,S.extend({},e),a);(o||Z.get(this,"finish"))&&t.stop(!0)};return i.finish=i,o||!1===a.queue?this.each(i):this.queue(a.queue,i)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,o=null!=e&&e+"queueHooks",a=S.timers,i=Z.get(this);if(o)i[o]&&i[o].stop&&r(i[o]);else for(o in i)i[o]&&i[o].stop&&rt.test(o)&&r(i[o]);for(o=a.length;o--;)a[o].elem!==this||null!=e&&a[o].queue!==e||(a[o].anim.stop(n),t=!1,a.splice(o,1));!t&&n||S.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=Z.get(this),r=n[e+"queue"],o=n[e+"queueHooks"],a=S.timers,i=r?r.length:0;for(n.finish=!0,S.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;t<i;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),S.each(["toggle","show","hide"],function(e,t){var n=S.fn[t];S.fn[t]=function(e,r,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(it(t,!0),e,r,o)}}),S.each({slideDown:it("show"),slideUp:it("hide"),slideToggle:it("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){S.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(et=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),et=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){tt||(tt=!0,ot())},S.fx.stop=function(){tt=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(t,n){return t=S.fx&&S.fx.speeds[t]||t,n=n||"fx",this.queue(n,function(n,r){var o=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(o)}})},function(){var e=r.createElement("input"),t=r.createElement("select").appendChild(r.createElement("option"));e.type="checkbox",m.checkOn=""!==e.value,m.optSelected=t.selected,(e=r.createElement("input")).value="t",e.type="radio",m.radioValue="t"===e.value}();var st,ct=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return H(this,S.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){S.removeAttr(this,e)})}}),S.extend({attr:function(e,t,n){var r,o,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return void 0===e.getAttribute?S.prop(e,t,n):(1===a&&S.isXMLDoc(e)||(o=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?st:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):o&&"set"in o&&void 0!==(r=o.set(e,n,t))?r:(e.setAttribute(t,n+""),n):o&&"get"in o&&null!==(r=o.get(e,t))?r:null==(r=S.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!m.radioValue&&"radio"===t&&_(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,o=t&&t.match(N);if(o&&1===e.nodeType)for(;n=o[r++];)e.removeAttribute(n)}}),st={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),function(e,t){var n=ct[t]||S.find.attr;ct[t]=function(e,t,r){var o,a,i=t.toLowerCase();return r||(a=ct[i],ct[i]=o,o=null!=n(e,t,r)?i:null,ct[i]=a),o}});var pt=/^(?:input|select|textarea|button)$/i,ft=/^(?:a|area)$/i;function dt(e){return(e.match(N)||[]).join(" ")}function mt(e){return e.getAttribute&&e.getAttribute("class")||""}function ht(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(N)||[]}S.fn.extend({prop:function(e,t){return H(this,S.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[S.propFix[e]||e]})}}),S.extend({prop:function(e,t,n){var r,o,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&S.isXMLDoc(e)||(t=S.propFix[t]||t,o=S.propHooks[t]),void 0!==n?o&&"set"in o&&void 0!==(r=o.set(e,n,t))?r:e[t]=n:o&&"get"in o&&null!==(r=o.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):pt.test(e.nodeName)||ft.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){S.propFix[this.toLowerCase()]=this}),S.fn.extend({addClass:function(e){var t,n,r,o,a,i,l,u=0;if(y(e))return this.each(function(t){S(this).addClass(e.call(this,t,mt(this)))});if((t=ht(e)).length)for(;n=this[u++];)if(o=mt(n),r=1===n.nodeType&&" "+dt(o)+" "){for(i=0;a=t[i++];)r.indexOf(" "+a+" ")<0&&(r+=a+" ");o!==(l=dt(r))&&n.setAttribute("class",l)}return this},removeClass:function(e){var t,n,r,o,a,i,l,u=0;if(y(e))return this.each(function(t){S(this).removeClass(e.call(this,t,mt(this)))});if(!arguments.length)return this.attr("class","");if((t=ht(e)).length)for(;n=this[u++];)if(o=mt(n),r=1===n.nodeType&&" "+dt(o)+" "){for(i=0;a=t[i++];)for(;r.indexOf(" "+a+" ")>-1;)r=r.replace(" "+a+" "," ");o!==(l=dt(r))&&n.setAttribute("class",l)}return this},toggleClass:function(e,t){var n=h(e),r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):y(e)?this.each(function(n){S(this).toggleClass(e.call(this,n,mt(this),t),t)}):this.each(function(){var t,o,a,i;if(r)for(o=0,a=S(this),i=ht(e);t=i[o++];)a.hasClass(t)?a.removeClass(t):a.addClass(t);else void 0!==e&&"boolean"!==n||((t=mt(this))&&Z.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Z.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+dt(mt(n))+" ").indexOf(t)>-1)return!0;return!1}});var yt=/\r/g;S.fn.extend({val:function(e){var t,n,r,o=this[0];return arguments.length?(r=y(e),this.each(function(n){var o;1===this.nodeType&&(null==(o=r?e.call(this,n,S(this).val()):e)?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=S.map(o,function(e){return null==e?"":e+""})),(t=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))})):o?(t=S.valHooks[o.type]||S.valHooks[o.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(o,"value"))?n:"string"==typeof(n=o.value)?n.replace(yt,""):null==n?"":n:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:dt(S.text(e))}},select:{get:function(e){var t,n,r,o=e.options,a=e.selectedIndex,i="select-one"===e.type,l=i?null:[],u=i?a+1:o.length;for(r=a<0?u:i?a:0;r<u;r++)if(((n=o[r]).selected||r===a)&&!n.disabled&&(!n.parentNode.disabled||!_(n.parentNode,"optgroup"))){if(t=S(n).val(),i)return t;l.push(t)}return l},set:function(e,t){for(var n,r,o=e.options,a=S.makeArray(t),i=o.length;i--;)((r=o[i]).selected=S.inArray(S.valHooks.option.get(r),a)>-1)&&(n=!0);return n||(e.selectedIndex=-1),a}}}}),S.each(["radio","checkbox"],function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=S.inArray(S(e).val(),t)>-1}},m.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),m.focusin="onfocusin"in e;var bt=/^(?:focusinfocus|focusoutblur)$/,gt=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(t,n,o,a){var i,l,u,s,c,f,d,m,g=[o||r],v=p.call(t,"type")?t.type:t,w=p.call(t,"namespace")?t.namespace.split("."):[];if(l=m=u=o=o||r,3!==o.nodeType&&8!==o.nodeType&&!bt.test(v+S.event.triggered)&&(v.indexOf(".")>-1&&(w=v.split("."),v=w.shift(),w.sort()),c=v.indexOf(":")<0&&"on"+v,(t=t[S.expando]?t:new S.Event(v,"object"===h(t)&&t)).isTrigger=a?2:3,t.namespace=w.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+w.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=o),n=null==n?[t]:S.makeArray(n,[t]),d=S.event.special[v]||{},a||!d.trigger||!1!==d.trigger.apply(o,n))){if(!a&&!d.noBubble&&!b(o)){for(s=d.delegateType||v,bt.test(s+v)||(l=l.parentNode);l;l=l.parentNode)g.push(l),u=l;u===(o.ownerDocument||r)&&g.push(u.defaultView||u.parentWindow||e)}for(i=0;(l=g[i++])&&!t.isPropagationStopped();)m=l,t.type=i>1?s:d.bindType||v,(f=(Z.get(l,"events")||{})[t.type]&&Z.get(l,"handle"))&&f.apply(l,n),(f=c&&l[c])&&f.apply&&Y(l)&&(t.result=f.apply(l,n),!1===t.result&&t.preventDefault());return t.type=v,a||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(g.pop(),n)||!Y(o)||c&&y(o[v])&&!b(o)&&((u=o[c])&&(o[c]=null),S.event.triggered=v,t.isPropagationStopped()&&m.addEventListener(v,gt),o[v](),t.isPropagationStopped()&&m.removeEventListener(v,gt),S.event.triggered=void 0,u&&(o[c]=u)),t.result}},simulate:function(e,t,n){var r=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(r,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each(function(){S.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}}),m.focusin||S.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){S.event.simulate(t,e.target,S.event.fix(e))};S.event.special[t]={setup:function(){var r=this.ownerDocument||this,o=Z.access(r,t);o||r.addEventListener(e,n,!0),Z.access(r,t,(o||0)+1)},teardown:function(){var r=this.ownerDocument||this,o=Z.access(r,t)-1;o?Z.access(r,t,o):(r.removeEventListener(e,n,!0),Z.remove(r,t))}}});var vt=e.location,wt=Date.now(),St=/\?/;S.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||S.error("Invalid XML: "+t),n};var Ot=/\[\]$/,Et=/\r?\n/g,Pt=/^(?:submit|button|image|reset|file)$/i,Tt=/^(?:input|select|textarea|keygen)/i;function Ct(e,t,n,r){var o;if(Array.isArray(t))S.each(t,function(t,o){n||Ot.test(e)?r(e,o):Ct(e+"["+("object"===h(o)&&null!=o?t:"")+"]",o,n,r)});else if(n||"object"!==w(t))r(e,t);else for(o in t)Ct(e+"["+o+"]",t[o],n,r)}S.param=function(e,t){var n,r=[],o=function(e,t){var n=y(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,function(){o(this.name,this.value)});else for(n in e)Ct(n,e[n],t,o);return r.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&Tt.test(this.nodeName)&&!Pt.test(e)&&(this.checked||!ce.test(e))}).map(function(e,t){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,function(e){return{name:t.name,value:e.replace(Et,"\r\n")}}):{name:t.name,value:n.replace(Et,"\r\n")}}).get()}});var It=/%20/g,_t=/#.*$/,kt=/([?&])_=[^&]*/,xt=/^(.*?):[ \t]*([^\r\n]*)$/gm,jt=/^(?:GET|HEAD)$/,Mt=/^\/\//,At={},Dt={},Rt="*/".concat("*"),Nt=r.createElement("a");function Lt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,o=0,a=t.toLowerCase().match(N)||[];if(y(n))for(;r=a[o++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Gt(e,t,n,r){var o={},a=e===Dt;function i(l){var u;return o[l]=!0,S.each(e[l]||[],function(e,l){var s=l(t,n,r);return"string"!=typeof s||a||o[s]?a?!(u=s):void 0:(t.dataTypes.unshift(s),i(s),!1)}),u}return i(t.dataTypes[0])||!o["*"]&&i("*")}function Vt(e,t){var n,r,o=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((o[n]?e:r||(r={}))[n]=t[n]);return r&&S.extend(!0,e,r),e}Nt.href=vt.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:vt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(vt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Rt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Vt(Vt(e,S.ajaxSettings),t):Vt(S.ajaxSettings,e)},ajaxPrefilter:Lt(At),ajaxTransport:Lt(Dt),ajax:function(t,n){"object"===h(t)&&(n=t,t=void 0),n=n||{};var o,a,i,l,u,s,c,p,f,d,m=S.ajaxSetup({},n),y=m.context||m,b=m.context&&(y.nodeType||y.jquery)?S(y):S.event,g=S.Deferred(),v=S.Callbacks("once memory"),w=m.statusCode||{},O={},E={},P="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(c){if(!l)for(l={};t=xt.exec(i);)l[t[1].toLowerCase()]=t[2];t=l[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return c?i:null},setRequestHeader:function(e,t){return null==c&&(e=E[e.toLowerCase()]=E[e.toLowerCase()]||e,O[e]=t),this},overrideMimeType:function(e){return null==c&&(m.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||P;return o&&o.abort(t),C(0,t),this}};if(g.promise(T),m.url=((t||m.url||vt.href)+"").replace(Mt,vt.protocol+"//"),m.type=n.method||n.type||m.method||m.type,m.dataTypes=(m.dataType||"*").toLowerCase().match(N)||[""],null==m.crossDomain){s=r.createElement("a");try{s.href=m.url,s.href=s.href,m.crossDomain=Nt.protocol+"//"+Nt.host!=s.protocol+"//"+s.host}catch(e){m.crossDomain=!0}}if(m.data&&m.processData&&"string"!=typeof m.data&&(m.data=S.param(m.data,m.traditional)),Gt(At,m,n,T),c)return T;for(f in(p=S.event&&m.global)&&0==S.active++&&S.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!jt.test(m.type),a=m.url.replace(_t,""),m.hasContent?m.data&&m.processData&&0===(m.contentType||"").indexOf("application/x-www-form-urlencoded")&&(m.data=m.data.replace(It,"+")):(d=m.url.slice(a.length),m.data&&(m.processData||"string"==typeof m.data)&&(a+=(St.test(a)?"&":"?")+m.data,delete m.data),!1===m.cache&&(a=a.replace(kt,"$1"),d=(St.test(a)?"&":"?")+"_="+wt+++d),m.url=a+d),m.ifModified&&(S.lastModified[a]&&T.setRequestHeader("If-Modified-Since",S.lastModified[a]),S.etag[a]&&T.setRequestHeader("If-None-Match",S.etag[a])),(m.data&&m.hasContent&&!1!==m.contentType||n.contentType)&&T.setRequestHeader("Content-Type",m.contentType),T.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Rt+"; q=0.01":""):m.accepts["*"]),m.headers)T.setRequestHeader(f,m.headers[f]);if(m.beforeSend&&(!1===m.beforeSend.call(y,T,m)||c))return T.abort();if(P="abort",v.add(m.complete),T.done(m.success),T.fail(m.error),o=Gt(Dt,m,n,T)){if(T.readyState=1,p&&b.trigger("ajaxSend",[T,m]),c)return T;m.async&&m.timeout>0&&(u=e.setTimeout(function(){T.abort("timeout")},m.timeout));try{c=!1,o.send(O,C)}catch(e){if(c)throw e;C(-1,e)}}else C(-1,"No Transport");function C(t,n,r,l){var s,f,d,h,O,E=n;c||(c=!0,u&&e.clearTimeout(u),o=void 0,i=l||"",T.readyState=t>0?4:0,s=t>=200&&t<300||304===t,r&&(h=function(e,t,n){for(var r,o,a,i,l=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(o in l)if(l[o]&&l[o].test(r)){u.unshift(o);break}if(u[0]in n)a=u[0];else{for(o in n){if(!u[0]||e.converters[o+" "+u[0]]){a=o;break}i||(i=o)}a=a||i}if(a)return a!==u[0]&&u.unshift(a),n[a]}(m,T,r)),h=function(e,t,n,r){var o,a,i,l,u,s={},c=e.dataTypes.slice();if(c[1])for(i in e.converters)s[i.toLowerCase()]=e.converters[i];for(a=c.shift();a;)if(e.responseFields[a]&&(n[e.responseFields[a]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=a,a=c.shift())if("*"===a)a=u;else if("*"!==u&&u!==a){if(!(i=s[u+" "+a]||s["* "+a]))for(o in s)if((l=o.split(" "))[1]===a&&(i=s[u+" "+l[0]]||s["* "+l[0]])){!0===i?i=s[o]:!0!==s[o]&&(a=l[0],c.unshift(l[1]));break}if(!0!==i)if(i&&e.throws)t=i(t);else try{t=i(t)}catch(e){return{state:"parsererror",error:i?e:"No conversion from "+u+" to "+a}}}return{state:"success",data:t}}(m,h,T,s),s?(m.ifModified&&((O=T.getResponseHeader("Last-Modified"))&&(S.lastModified[a]=O),(O=T.getResponseHeader("etag"))&&(S.etag[a]=O)),204===t||"HEAD"===m.type?E="nocontent":304===t?E="notmodified":(E=h.state,f=h.data,s=!(d=h.error))):(d=E,!t&&E||(E="error",t<0&&(t=0))),T.status=t,T.statusText=(n||E)+"",s?g.resolveWith(y,[f,E,T]):g.rejectWith(y,[T,E,d]),T.statusCode(w),w=void 0,p&&b.trigger(s?"ajaxSuccess":"ajaxError",[T,m,s?f:d]),v.fireWith(y,[T,E]),p&&(b.trigger("ajaxComplete",[T,m]),--S.active||S.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return S.get(e,t,n,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],function(e,t){S[t]=function(e,n,r,o){return y(n)&&(o=o||r,r=n,n=void 0),S.ajax(S.extend({url:e,type:t,dataType:o,data:n,success:r},S.isPlainObject(e)&&e))}}),S._evalUrl=function(e){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(y(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return y(e)?this.each(function(t){S(this).wrapInner(e.call(this,t))}):this.each(function(){var t=S(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=y(e);return this.each(function(n){S(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){S(this).replaceWith(this.childNodes)}),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Ft={0:200,1223:204},Bt=S.ajaxSettings.xhr();m.cors=!!Bt&&"withCredentials"in Bt,m.ajax=Bt=!!Bt,S.ajaxTransport(function(t){var n,r;if(m.cors||Bt&&!t.crossDomain)return{send:function(o,a){var i,l=t.xhr();if(l.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(i in t.xhrFields)l[i]=t.xhrFields[i];for(i in t.mimeType&&l.overrideMimeType&&l.overrideMimeType(t.mimeType),t.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest"),o)l.setRequestHeader(i,o[i]);n=function(e){return function(){n&&(n=r=l.onload=l.onerror=l.onabort=l.ontimeout=l.onreadystatechange=null,"abort"===e?l.abort():"error"===e?"number"!=typeof l.status?a(0,"error"):a(l.status,l.statusText):a(Ft[l.status]||l.status,l.statusText,"text"!==(l.responseType||"text")||"string"!=typeof l.responseText?{binary:l.response}:{text:l.responseText},l.getAllResponseHeaders()))}},l.onload=n(),r=l.onerror=l.ontimeout=n("error"),void 0!==l.onabort?l.onabort=r:l.onreadystatechange=function(){4===l.readyState&&e.setTimeout(function(){n&&r()})},n=n("abort");try{l.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}}),S.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),S.ajaxTransport("script",function(e){var t,n;if(e.crossDomain)return{send:function(o,a){t=S("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&a("error"===e.type?404:200,e.type)}),r.head.appendChild(t[0])},abort:function(){n&&n()}}});var Ut,Ht=[],Wt=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ht.pop()||S.expando+"_"+wt++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",function(t,n,r){var o,a,i,l=!1!==t.jsonp&&(Wt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Wt.test(t.data)&&"data");if(l||"jsonp"===t.dataTypes[0])return o=t.jsonpCallback=y(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,l?t[l]=t[l].replace(Wt,"$1"+o):!1!==t.jsonp&&(t.url+=(St.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return i||S.error(o+" was not called"),i[0]},t.dataTypes[0]="json",a=e[o],e[o]=function(){i=arguments},r.always(function(){void 0===a?S(e).removeProp(o):e[o]=a,t[o]&&(t.jsonpCallback=n.jsonpCallback,Ht.push(o)),i&&y(a)&&a(i[0]),i=a=void 0}),"script"}),m.createHTMLDocument=((Ut=r.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ut.childNodes.length),S.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(m.createHTMLDocument?((o=(t=r.implementation.createHTMLDocument("")).createElement("base")).href=r.location.href,t.head.appendChild(o)):t=r),i=!n&&[],(a=k.exec(e))?[t.createElement(a[1])]:(a=ve([e],t,i),i&&i.length&&S(i).remove(),S.merge([],a.childNodes)));var o,a,i},S.fn.load=function(e,t,n){var r,o,a,i=this,l=e.indexOf(" ");return l>-1&&(r=dt(e.slice(l)),e=e.slice(0,l)),y(t)?(n=t,t=void 0):t&&"object"===h(t)&&(o="POST"),i.length>0&&S.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done(function(e){a=arguments,i.html(r?S("<div>").append(S.parseHTML(e)).find(r):e)}).always(n&&function(e,t){i.each(function(){n.apply(this,a||[e.responseText,t,e])})}),this},S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){S.fn[t]=function(e){return this.on(t,e)}}),S.expr.pseudos.animated=function(e){return S.grep(S.timers,function(t){return e===t.elem}).length},S.offset={setOffset:function(e,t,n){var r,o,a,i,l,u,s=S.css(e,"position"),c=S(e),p={};"static"===s&&(e.style.position="relative"),l=c.offset(),a=S.css(e,"top"),u=S.css(e,"left"),("absolute"===s||"fixed"===s)&&(a+u).indexOf("auto")>-1?(i=(r=c.position()).top,o=r.left):(i=parseFloat(a)||0,o=parseFloat(u)||0),y(t)&&(t=t.call(e,n,S.extend({},l))),null!=t.top&&(p.top=t.top-l.top+i),null!=t.left&&(p.left=t.left-l.left+o),"using"in t?t.using.call(e,p):c.css(p)}},S.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){S.offset.setOffset(this,e,t)});var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],o={top:0,left:0};if("fixed"===S.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===S.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((o=S(e).offset()).top+=S.css(e,"borderTopWidth",!0),o.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-o.top-S.css(r,"marginTop",!0),left:t.left-o.left-S.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===S.css(e,"position");)e=e.offsetParent;return e||we})}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;S.fn[e]=function(r){return H(this,function(e,r,o){var a;if(b(e)?a=e:9===e.nodeType&&(a=e.defaultView),void 0===o)return a?a[t]:e[r];a?a.scrollTo(n?a.pageXOffset:o,n?o:a.pageYOffset):e[r]=o},e,r,arguments.length)}}),S.each(["top","left"],function(e,t){S.cssHooks[t]=Ue(m.pixelPosition,function(e,n){if(n)return n=Be(e,t),Ge.test(n)?S(e).position()[t]+"px":n})}),S.each({Height:"height",Width:"width"},function(e,t){S.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){S.fn[r]=function(o,a){var i=arguments.length&&(n||"boolean"!=typeof o),l=n||(!0===o||!0===a?"margin":"border");return H(this,function(t,n,o){var a;return b(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])):void 0===o?S.css(t,n,l):S.style(t,n,o,l)},t,i?o:void 0,i)}})}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){S.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),S.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),S.proxy=function(e,t){var n,r,o;if("string"==typeof t&&(n=e[t],t=e,e=n),y(e))return r=a.call(arguments,2),(o=function(){return e.apply(t||this,r.concat(a.call(arguments)))}).guid=e.guid=e.guid||S.guid++,o},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=_,S.isFunction=y,S.isWindow=b,S.camelCase=K,S.type=w,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))};var qt=e.jQuery,zt=e.$;return S.noConflict=function(t){return e.$===S&&(e.$=zt),t&&e.jQuery===S&&(e.jQuery=qt),S},t||(e.jQuery=e.$=S),S},e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}}),kt=50,xt=function(e){var t=e.track,n=e.standalone,r=T(t),o=B(t),a=kt,i=u.a.createElement("g",{transform:"translate("+(a-5)+",0)"},o.map(function(e,t){return u.a.createElement("g",{transform:"translate(0, "+e.offset+")"},u.a.createElement("text",{fontFamily:c.a.axis.fontFamily,fontSize:"10px",textAnchor:"end",dy:"0.3em",dx:-3,fill:"#aaa"},e.label),u.a.createElement("line",{x1:0,x2:5,y1:0,y2:0,strokeWidth:1,stroke:"#aaa"}))}));return n?u.a.createElement("svg",{height:r,width:a},i):i};function jt(e){return(e.label||e.type).replace(/_/g,"")}var Mt=function(e){var t=e.store,n=e.track,r=e.handleTrackHover,o=e.height,a=e.paddingLeft,i=void 0===a?5:a,s=Object(l.useCallback)(function(){return t.toggleTrackCollapse(n.uid)},[n]),f=n.trackType===y.LINE_CHART;return Object(p.b)(function(){return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{style:{paddingLeft:i,height:o,position:"relative"},onMouseEnter:r,onMouseLeave:r},u.a.createElement("span",null,u.a.createElement(c.S,{text:jt(n),maxLength:20})),f&&u.a.createElement("div",{style:{position:"absolute",top:0,right:0}},u.a.createElement(xt,{track:n,standalone:!0})),t.enableCollapseTrack&&n.tracks&&n.tracks.length>0&&u.a.createElement("div",{onClick:s,style:{cursor:"pointer",fontSize:15,lineHeight:.5,padding:3,right:f?kt+10:2,top:0,position:"absolute"}},t.isTrackCollapsed(n.uid)?u.a.createElement("i",{className:"fa fa-caret-right fa-sm"}):u.a.createElement("i",{className:"fa fa-caret-down fa-sm"}))))})},At="font-size: 12px;font-family:Arial",Dt="track-header-border";var Rt=function(e){var t=e.store,n=e.specification,r=e.handleTrackHover,o=e.disableHover;return Object(l.createElement)("div",{className:ne("tl-custom-track-header",{"tl-hover-disabled":o}),style:{paddingLeft:5,height:n.height(t)},onMouseEnter:r,onMouseLeave:r},n.renderHeader(t))};function Nt(e,t,n,r){if(!t)return null;var o=document.createElementNS("http://www.w3.org/2000/svg","svg");document.body.appendChild(o);var a=document.createElementNS("http://www.w3.org/2000/svg","g");o.append(a);try{var i=function(e,t,n){var r=document.createElementNS("http://www.w3.org/2000/svg","g");function o(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","text");return n.setAttribute("style",At),n.setAttribute("x",e+"px"),n.setAttribute("y",t+"px"),n.setAttribute("dy","1em"),n}function a(t,n){var r=document.createElementNS("http://www.w3.org/2000/svg","line");return r.classList.add(Dt),r.setAttribute("x1","0"),r.setAttribute("x2",e.headersWidth.toString()),r.setAttribute("y1",""+(t+n-.5)),r.setAttribute("y2",""+(t+n-.5)),r.setAttribute("stroke","#eee"),r.setAttribute("stroke-width","1"),r.setAttribute("stroke-dasharray","3,2"),r}for(var i=Et,l=0,s=e.data;l<s.length;l++){var c=s[l];if(!n||R(c.track,n)){if((h=o(c.indent,i)).textContent=jt(c.track),r.appendChild(h),c.track.trackType===y.LINE_CHART){var p=document.createElementNS("http://www.w3.org/2000/svg","g");p.setAttribute("transform","translate("+(e.headersWidth-kt)+", "+i+")"),d.a.render(u.a.createElement(xt,{track:c.track,standalone:!1}),p),r.appendChild(p)}r.appendChild(a(i,c.height)),i+=c.height}}if(t)for(var f=0,m=t;f<m.length;f++){var h;c=m[f],(h=o(5,i)).textContent=c.labelForExport,r.appendChild(h);var b=c.height(e);r.appendChild(a(i,b)),i+=b}return r}(e,n,r);a.appendChild(i);var l=i.getBBox(),s=document.createElementNS("http://www.w3.org/2000/svg","line");s.setAttribute("x1",""+e.headersWidth),s.setAttribute("x2",""+e.headersWidth),s.setAttribute("y1","0"),s.setAttribute("y2",""+(l.y+l.height)),s.setAttribute("style","stroke-width:1; stroke:"+Tt),a.appendChild(s),t=t.cloneNode(!0),a.appendChild(t),t.setAttribute("transform","translate("+e.headersWidth+" 0)");var c=a.getBBox();o.setAttribute("width",""+c.width),o.setAttribute("height",""+c.height),_t(o).find("."+P).remove(),_t(o).find("."+Dt).each(function(){this.setAttribute("x2",""+(l.width+10))})}finally{document.body.removeChild(o)}return o}function Lt(e,t,n,r){void 0===r&&(r=!1);var o=_t(n.timeline.current),a=_t(n.zoomSelectBox.current),i=_t(n.zoomSelectBoxMask.current);switch(e.type){case"mouseleave":_t(n.cursor.current).hide();break;case"mouseup":if(t.dragging){if(t.dragging.start&&t.dragging.end&&Math.abs(t.dragging.start-t.dragging.end)>10){var l=o.width(),u=t.dragging.start/l,s=t.dragging.end/l,c=u*t.absoluteWidth,p=s*t.absoluteWidth,f=j(c,t.ticks),d=j(p,t.ticks);f<=d?t.setZoomBounds(f,d):t.setZoomBounds(d,f),setTimeout(function(){!function(e,t,n){var r=0;if(e){var o=n({start:e.start,end:e.end});o&&(r=o.pixelLeft)}t.scrollLeft=r}(t.zoomBounds,n.timelineViewPort.current,t.getPosition)},10)}t.dragging=void 0,i.hide(),a.hide()}t.dragging=void 0;break;case"mousedown":r||(t.dragging={start:null,end:null});break;case"mousemove":var m=e.clientX-o.offset().left+(_t(document).scrollLeft()||0);t.dragging?(e.preventDefault(),null===t.dragging.start&&(t.dragging.start=m),t.dragging.end=m,i.show(),a.show().css({left:t.dragging.start<t.dragging.end?t.dragging.start:t.dragging.end,width:Math.abs(t.dragging.end-t.dragging.start)})):r||_t(n.cursor.current).css({left:e.clientX-o.offset().left+(_t(document).scrollLeft()||0),display:"block"})}}var Gt=Object(p.a)(function(e){var t=e.store,n=e.customTracks,r=e.width,o=e.hideLabels,i=void 0!==o&&o,s=e.onClickDownload,p=e.visibleTracks,f=e.hideXAxis,d=e.headerWidth,m=e.disableZoom,h=t.data,y=Et+a.a.sumBy(h,function(e){return p?R(e.track,p)?e.height:0:e.height})+a.a.sumBy(n||[],function(e){return e.height(t)})+15,b={cursor:Object(l.useRef)(null),wrapper:Object(l.useRef)(null),timeline:Object(l.useRef)(null),timelineTracksArea:Object(l.useRef)(null),timelineHeadersArea:Object(l.useRef)(null),zoomSelectBox:Object(l.useRef)(null),zoomSelectBoxMask:Object(l.useRef)(null),cursorText:Object(l.useRef)(null),hoverStyleTag:Object(l.useRef)(null),timelineViewPort:Object(l.useRef)(null),scrollPanel:Object(l.useRef)(null)},g=Object(l.useCallback)(function(e){!function(e,t,n){if(t&&t.current)switch(e.type){case"mouseenter":var r=a.a.findIndex(e.currentTarget.parentNode.children,function(t){return t===e.currentTarget});void 0!==r&&_t(t.current).text("\n                    #"+n+" .tl-timeline-tracklabels > div:nth-child("+(r+1)+") {\n                        background:#F2F2F2;\n                    }\n                    \n                     #"+n+" .tl-timeline .tl-track:nth-child("+(r+1)+") .tl-track-highlight {\n                        opacity: 1 !important;\n                    }\n                ");break;default:_t(t.current).empty()}}(e,b.hoverStyleTag,t.uniqueId)},[b.hoverStyleTag]);Object(l.useEffect)(function(){setTimeout(function(){t.viewPortWidth=_t(b.timelineViewPort.current).width(),t.headersWidth=_t(b.timelineHeadersArea.current).width()},200);var e=function(e,t){var n=function(t){var n=!1;switch(t.which){case 37:case 40:e.prevTooltipEvent()&&(n=!0);break;case 38:case 39:case 32:e.nextTooltipEvent()&&(n=!0);break;case 27:e.removeAllTooltips(),n=!0}n&&t.preventDefault()};_t(document).on("keydown",n);var r=function(){e.viewPortWidth=_t(t.timelineViewPort.current).width()};_t(window).on("resize",r);var o=function(){e.removeAllTooltips()};return _t("body").on("mouseleave",o),function(){_t(window).off("resize",r),_t("body").off("mouseleave",o),_t(document).off("keydown",n)}}(t,b);return function(){e()}},[]);var v=1;t.zoomRange&&t.zoomedWidth&&(v=t.absoluteWidth/t.zoomedWidth);var w=t.viewPortWidth?t.viewPortWidth*v:0,S=void 0===p?h:h.filter(function(e){return R(e.track,p)});return u.a.createElement("div",{ref:b.wrapper,className:"tl-timeline-wrapper",id:t.uniqueId},u.a.createElement("div",{className:"tl-timeline-reset-buttons"},t.zoomBounds&&u.a.createElement("div",{className:"tl-timeline-unzoom"},u.a.createElement("button",{className:"btn btn-xs",onClick:function(){t.setZoomBounds()}},"reset zoom")),t.expandedTrims&&u.a.createElement("div",null,u.a.createElement("button",{className:"btn btn-xs",onClick:t.toggleExpandedTrims},"reset axis"))),u.a.createElement("style",{ref:b.hoverStyleTag}),u.a.createElement("div",{style:{flexBasis:r-28,display:"flex"}}," ",u.a.createElement("div",{className:"tl-timeline-leftbar",style:{paddingTop:Et,flexShrink:0}},u.a.createElement("div",{ref:b.timelineHeadersArea,className:ne("tl-timeline-tracklabels",{"tl-displaynone":i}),style:{width:d||"auto",minWidth:d||t.headersWidth}},S.map(function(e){return u.a.createElement(Mt,{store:t,track:e.track,height:e.height,paddingLeft:e.indent,handleTrackHover:g})}),n&&n.map(function(e){return u.a.createElement(Rt,{store:t,specification:e,handleTrackHover:g,disableHover:e.disableHover})}))),u.a.createElement("div",{className:"tl-viewport-pseudo-border",style:{height:y-15}}),u.a.createElement("div",{ref:b.timelineViewPort,className:"tl-timelineviewport scrollbarAlwaysVisible",style:{flexShrink:1,height:y}},t.viewPortWidth>0&&t.ticks&&u.a.createElement("div",{className:"tl-timeline",onMouseDown:function(e){return Lt(e,t,b,m)},onMouseUp:function(e){return Lt(e,t,b,m)},onMouseMove:function(e){return Lt(e,t,b,m)},onMouseLeave:function(e){return Lt(e,t,b,m)}},u.a.createElement("div",{ref:b.cursor,style:{height:y-15},className:"tl-cursor"},u.a.createElement("div",{ref:b.cursorText})),u.a.createElement("div",{ref:b.zoomSelectBoxMask,className:"tl-zoom-selectbox-mask"}),u.a.createElement("div",{ref:b.zoomSelectBox,style:{height:y-15},className:"tl-zoom-selectbox"}),u.a.createElement("svg",{ref:b.timeline,width:w,height:y,className:"tl-timeline-svg"},u.a.createElement("g",{ref:b.timelineTracksArea},u.a.createElement(It,{store:t,width:w,customTracks:n,handleTrackHover:g,visibleTracks:p}),!0!==f&&u.a.createElement(Ct,{store:t,width:w}))))),u.a.createElement("div",{className:"tl-viewport-pseudo-border",style:{height:y-15}}),u.a.createElement(c.j,{buttons:["PDF","PNG","SVG"],filename:"timeline",getSvg:function(){return Nt(t,b.timelineTracksArea.current,n,p)},additionalRightButtons:[{key:"Data (ZIP)",content:u.a.createElement("span",null,"Data (ZIP)"),onClick:s}],dontFade:!0,type:"button",style:{marginLeft:7}})))}),Vt=function e(t,n){t.forEach(function(t){var r=n.find(function(e){return e.trackTypeMatch.test(t.type)});r&&r.configureTrack(t),t.tracks&&t.tracks.length&&e(t.tracks,n)})}}).call(this,n(119))},993:function(e,t,n){"use strict";n.d(t,"a",function(){return w});var r=n(0),o=n(1),a=n(9),i=n(73),l=n(2),u=n(17),s=n(3),c=n(174),p=n(943);function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var w,S=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":v(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};!function(e){e[e.NAME=0]="NAME",e[e.SCORE=1]="SCORE",e[e.GENES=2]="GENES"}(w||(w={}));var O=function(e){function t(){return d(this,t),m(this,y(t).apply(this,arguments))}return b(t,i["b"]),t}();var E=function(e){function t(e){var n;return d(this,t),n=m(this,y(t).call(this,e)),Object.defineProperty(h(n),"_columns",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(h(n),"selectedPathway",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(h(n),"dataStore",{enumerable:!0,configurable:!0,writable:!0,value:new c.a(function(){return n.props.data})}),Object(l.makeObservable)(h(n)),n._columns={},n.generateColumns(),Object(l.makeObservable)(h(n)),n}var n,a,i;return b(t,r["Component"]),n=t,(a=[{key:"generateColumns",value:function(){var e=this;this._columns={},this._columns[w.NAME]=Object.assign({name:"Pathway name",render:function(t){var n=t.name,o=n.length<20;return r.createElement(u.Radio,{style:{marginTop:0,marginBottom:0},checked:e.props.selectedPathway===t.name,onChange:function(n){e.props.onSelectedPathwayChange&&e.props.onSelectedPathwayChange(),e.props.changePathway(t.name)}},r.createElement(s.i,{overlay:n,disabled:o},r.createElement("b",null,o?n:n.substring(0,20)+"...")))},tooltip:r.createElement("span",null,"Pathway name"),filter:function(e,t,n){return e.name.toUpperCase().includes(n)},sortBy:function(e){return e.name},download:function(e){return e.name}},this.props.columnsOverride[w.NAME]),this._columns[w.SCORE]=Object.assign({name:"Score",render:function(e){return r.createElement("span",null,r.createElement("b",null,e.score.toFixed(2)))},tooltip:r.createElement("span",null,"Score"),filter:function(e,t,n){return(e.score+"").includes(n)},sortBy:function(e){return e.score},download:function(e){return e.score+""}},this.props.columnsOverride[w.SCORE]),this._columns[w.GENES]=Object.assign({name:"Genes matched",render:function(e){var t=e.genes.join(" ").length;return r.createElement(s.i,{overlay:e.genes.join(" "),disabled:t<20},r.createElement("span",null,Object(p.d)(e.genes,20)))},tooltip:r.createElement("span",null,"Genes matched"),filter:function(e,t,n){return e.genes.join(" ").toUpperCase().includes(n)},sortBy:function(e){return e.genes.length},download:function(e){return e.genes.toString()}},this.props.columnsOverride[w.GENES])}},{key:"componentWillUpdate",value:function(e){var t,n,r,a,i,l;this.dataStore.page=(t=e.data,n=this.dataStore,r=e.selectedPathway,a=Object(c.c)(t,n.sortMetric,n.sortAscending),i=Object(c.d)(a,n.filterString,n.getFilter()),(l=o.findIndex(i,function(e){return e.name===r}))>=0?Math.floor(l/(n.itemsPerPage||10)):0)}},{key:"render",value:function(){var e=o.sortBy(this._columns);return r.createElement(O,{columns:e,dataStore:this.dataStore,initialItemsPerPage:10,initialSortColumn:this.props.initialSortColumn,initialSortDirection:"desc",paginationProps:{itemsPerPageOptions:[10]},showColumnVisibility:!1})}}])&&f(n.prototype,a),i&&f(n,i),t}();Object.defineProperty(E,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{columns:[w.NAME,w.SCORE,w.GENES],columnsOverride:{},initialSortColumn:"Score"}}),S([l.observable],E.prototype,"_columns",void 0),S([l.observable.ref],E.prototype,"selectedPathway",void 0),E=S([a.observer],E),t.b=E},997:function(e,t,n){"use strict";var r=n(0),o=n(9),a=n(846),i=n(220),l=n(2),u=n(998),s=n.n(u),c=n(5),p=n.n(c),f=n(3),d=n(890);function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var w=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":v(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},S=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=y(t).call(this,e))||"object"!==v(o)&&"function"!=typeof o?b(r):o,Object(l.makeObservable)(b(n)),n}var n,o,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,r["Component"]),n=t,(o=[{key:"goToNextDatum",value:function(){this.isLastDatum||this.props.urlWrapper.setResourceUrl(this.props.resourceData[this.currentResourceIndex+1].url)}},{key:"goToPrevDatum",value:function(){this.isFirstDatum||this.props.urlWrapper.setResourceUrl(this.props.resourceData[this.currentResourceIndex-1].url)}},{key:"render",value:function(){var e=this.props.resourceData.length>1;return r.createElement("div",null,r.createElement(a.a,{title:this.currentResourceDatum.resourceDefinition.displayName,isLoading:!1,className:"pull-left",style:{marginBottom:10}}),r.createElement("div",{style:{width:"100%",height:this.iframeHeight,display:"flex",alignItems:"center"}},e&&r.createElement("div",{className:p()(s.a.carouselButton,m({},s.a.active,!this.isFirstDatum)),onClick:this.goToPrevDatum},r.createElement("i",{style:{marginRight:15},className:"fa fa-4x fa-chevron-left"})),this.httpIframeWithHttpsPortal?r.createElement("div",null,r.createElement("span",null,"We can't show this URL in the portal. Please use the link below:"),r.createElement("br",null),r.createElement("a",{href:this.currentResourceDatum.url},this.currentResourceDatum.url)):r.createElement("iframe",{src:this.iframeUrl,style:{width:"100%",height:"100%"}}),e&&r.createElement("div",{className:p()(s.a.carouselButton,m({},s.a.active,!this.isLastDatum)),onClick:this.goToNextDatum},r.createElement("i",{style:{marginLeft:15},className:"fa fa-4x fa-chevron-right"}))))}},{key:"iframeHeight",get:function(){return i.a.size.height-275}},{key:"currentResourceIndex",get:function(){var e=this;if(this.props.urlWrapper.query.resourceUrl){var t=this.props.resourceData.findIndex(function(t){return t.url===e.props.urlWrapper.query.resourceUrl});return-1===t?0:t}return 0}},{key:"currentResourceDatum",get:function(){return this.props.resourceData[this.currentResourceIndex]}},{key:"isFirstDatum",get:function(){return 0===this.currentResourceIndex}},{key:"isLastDatum",get:function(){return this.currentResourceIndex===this.props.resourceData.length-1}},{key:"httpIframeWithHttpsPortal",get:function(){return"https:"===Object(f.eb)().location.protocol&&"http:"===new URL(this.currentResourceDatum.url).protocol}},{key:"iframeUrl",get:function(){var e=Object(d.b)(this.currentResourceDatum.url),t=this.currentResourceDatum.url;switch(e){case"pdf":t=Object(d.a)(this.currentResourceDatum.url)}return t}}])&&h(n.prototype,o),u&&h(n,u),t}();w([l.computed],S.prototype,"iframeHeight",null),w([l.computed],S.prototype,"currentResourceIndex",null),w([l.computed],S.prototype,"currentResourceDatum",null),w([l.action.bound],S.prototype,"goToNextDatum",null),w([l.action.bound],S.prototype,"goToPrevDatum",null),w([l.computed],S.prototype,"isFirstDatum",null),w([l.computed],S.prototype,"isLastDatum",null),w([l.computed],S.prototype,"httpIframeWithHttpsPortal",null),w([l.computed],S.prototype,"iframeUrl",null),S=w([o.observer],S),t.a=S},998:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__3mtfh",framedImage:"styles-module__framedImage__24LeD",carouselButton:"styles-module__carouselButton__35zgJ",active:"styles-module__active__xJZuN"}}}]);