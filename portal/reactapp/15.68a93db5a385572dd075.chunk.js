(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{1016:function(e,t,n){"use strict";var r=n(0),o=n(939),a=n(9),i=n.n(a),s=n(626),l=n.n(s),u=n(608),c=n(7),d=n(2),p=n(4),f=n.n(p),y=n(15),h=n(594),m=n(3),b=n(688),g=n(940),v=(n(945),n(178)),S=n(101);function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t,n){return t&&E(e.prototype,t),n&&E(e,n),e}function P(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?O(e):t}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var R=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":k(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},x=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,s)}l((r=r.apply(e,t||[])).next())})},N=function(e){function t(){var e;return _(this,t),(e=P(this,T(t).apply(this,arguments))).studyMetadata=Object(m.S)({invoke:function(){return x(O(e),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.a.getTagsUsingGET({studyId:this.props.studyId}));case 1:case"end":return e.stop()}},e,this)}))},onError:function(e){console.error("Error on getting study tags.",e)}}),e}return C(t,r["Component"]),w(t,[{key:"addHTMLDescription",value:function(e){return{__html:e}}},{key:"render",value:function(){var e="";if(this.props.isVirtualStudy)e=r.createElement("div",{dangerouslySetInnerHTML:this.addHTMLDescription(this.props.studyDescription)});else if(this.studyMetadata.isPending)e=r.createElement(S.a,{isLoading:!0});else if(this.studyMetadata.isComplete){var t=Object.keys(this.studyMetadata.result).length,n=r.createElement("div",{dangerouslySetInnerHTML:this.addHTMLDescription(this.props.studyDescription)});e=t>0?[n,r.createElement("br",null),r.createElement("div",{className:"studyTagsTooltip"}," ",r.createElement(g.JsonToTable,{json:this.studyMetadata.result}))]:n}else this.studyMetadata.isError&&(e="error");return e}}]),t}();R([d.observable],N.prototype,"studyMetadata",void 0),N=R([c.observer],N);var j=function(e){function t(){return _(this,t),P(this,T(t).apply(this,arguments))}return C(t,r["Component"]),w(t,[{key:"renderTooltip",value:function(){return r.createElement(m.c,{key:this.props.key,mouseEnterDelay:this.props.mouseEnterDelay,placement:this.props.placement,overlay:r.createElement(N,{studyDescription:this.props.studyDescription,studyId:this.props.studyId,isVirtualStudy:this.props.isVirtualStudy}),children:this.props.children})}},{key:"render",value:function(){return this.renderTooltip()}}]),t}(),A=j=R([c.observer],j),D=n(602);function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(e,t,n){return t&&V(e.prototype,t),n&&V(e,n),e}function F(e,t){return!t||"object"!==U(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var K=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":U(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},W=Object.assign(Object.assign({},o),{Level:function(e){return o["Level".concat(e)]}}),Y=function(e){function t(){var e;return G(this,t),(e=F(this,Q(t).apply(this,arguments))).renderCancerType=function(t){var n,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=e.logic.getDepth(t),u=e.view.getChildCancerTypes(t),c=e.view.getChildCancerStudies(t),d=e.logic.cancerTypeListView.getDescendantCancerStudies(t).map(function(e){return e.studyId});if(t!=e.rootCancerType){var p=i()(W.CancerType,W.Level(s));3===s&&(o=r.createElement(l.a,{className:W.indentArrow,name:"long-arrow-right"})),n=r.createElement("li",{className:p},r.createElement(z,{view:e.view,node:t},o,r.createElement("span",null,t.name),!e.store.forDownloadTab&&r.createElement("span",{className:W.SelectAll},f.a.intersection(d,e.store.selectableSelectedStudyIds).length?"Deselect All":"Select All")))}var y=i()(W.StudyList,W.Level(s));return r.createElement("ul",{key:a,className:y},n,c.map(e.renderCancerStudy),u.map(e.renderCancerType))},e.renderCancerStudy=function(t,n){var o=i()(W.Study),a=t.studyId in e.store.getOverlappingStudiesMap,s=a?r.createElement(m.c,{mouseEnterDelay:0,placement:"top",overlay:r.createElement("div",null,"This study has overlapping data with another selected study.")},r.createElement("i",{className:"fa fa-exclamation-triangle"})):null,l=f.a.includes(e.store.selectableSelectedStudyIds,t.studyId)&&e.store.isMixedReferenceGenome,u=l?r.createElement(m.c,{mouseEnterDelay:0,placement:"top",overlay:r.createElement("div",null,"You are combining studies with molecular data based on both GRCh37/hg19 and GRCh38/hg38. This is not fully supported yet. Please double check your findings")},r.createElement("span",null,r.createElement("i",{className:"fa fa-exclamation-triangle"})," ",Object(D.b)(t.referenceGenome))):null;return r.createElement("li",{key:n,className:o,"data-test":e.store.isVirtualStudy(t.studyId)?"VirtualStudySelect":"StudySelect"},r.createElement(c.Observer,null,function(){var n,o=i()((L(n={},W.StudyName,!0),L(n,"overlappingStudy",a||l),L(n,W.DeletedStudy,e.store.isDeletedVirtualStudy(t.studyId)),L(n,"studyItem_".concat(t.studyId),!0),n));return r.createElement(z,{view:e.view,node:t},r.createElement("span",{className:o},t.name,s,u))}),r.createElement(c.Observer,null,function(){return r.createElement("div",{className:W.StudyMeta},!e.store.isDeletedVirtualStudy(t.studyId)&&e.renderSamples(t),e.renderStudyLinks(t))}))},e.renderSamples=function(e){return r.createElement("span",{className:W.StudySamples},"".concat(e.allSampleCount," samples"))},e.renderStudyLinks=function(t){if(e.store.isDeletedVirtualStudy(t.studyId))return r.createElement(m.c,{mouseEnterDelay:0,placement:"top",overlay:r.createElement("div",{className:W.tooltip},"Restore study"),children:r.createElement("button",{className:"btn btn-default btn-xs",onClick:function(){return e.store.restoreVirtualStudy(t.studyId)},style:{lineHeight:"80%"},"data-test":"virtualStudyRestore"},"Restore")});var n=[{icon:"info-circle",tooltip:""}];return e.store.isVirtualStudy(t.studyId)?n.push({icon:"trash",tooltip:"Delete this virtual study.",onClick:function(){return e.store.deleteVirtualStudy(t.studyId)}}):n.push({icon:"book",onClick:t.pmid&&Object(y.x)(t.pmid),tooltip:t.pmid&&"PubMed"}),r.createElement("span",{className:W.StudyLinks},n.map(function(n,o){var a,s=r.createElement(l.a,{key:o,name:n.icon,className:i()((a={},L(a,W.icon,!0),L(a,W.iconWithTooltip,!!n.tooltip),L(a,W.trashIcon,"trash"===n.icon),L(a,W.infoCircleIcon,"info-circle"===n.icon),a))});if(n.onClick){var u={key:o};"string"==typeof n.onClick?(u.href=n.onClick,u.target="_blank"):u.onClick=n.onClick,s=r.createElement("a",u,s)}if(n.tooltip){var c=r.createElement("div",{className:W.tooltip,dangerouslySetInnerHTML:{__html:n.tooltip}});s=r.createElement(m.c,{key:o,mouseEnterDelay:0,placement:"top",overlay:c,children:s})}return"info-circle"===n.icon&&(s=r.createElement(A,{key:o,studyDescription:e.store.isVirtualStudy(t.studyId)?t.description.replace(/\r?\n/g,"<br />"):t.description,studyId:t.studyId,isVirtualStudy:e.store.isVirtualStudy(t.studyId),mouseEnterDelay:0,placement:"top"},r.createElement("a",null,s))),s}),t.studyId&&r.createElement(m.c,{mouseEnterDelay:0,placement:"top",overlay:r.createElement("div",{className:W.tooltip},"View clinical and genomic data of this study")},r.createElement("span",null,r.createElement(b.a,{studyId:t.studyId,className:i()(W.summaryIcon,"ci ci-pie-chart")}))))},e}return H(t,h["d"]),B(t,[{key:"componentDidMount",value:function(){this.props.showSelectedStudiesOnly&&(this._view=this.view)}},{key:"render",value:function(){var e=this,t=this.renderCancerType(this.rootCancerType);return this.props.showSelectedStudiesOnly?r.createElement("div",{className:W.SelectedStudyList},r.createElement("span",{className:W.deselectAll,onClick:function(){e.view.onCheck(e.store.treeData.rootCancerType,!1),e.store.showSelectedStudiesOnly=!1}},"Deselect all"),t):t}},{key:"view",get:function(){return this._view||(this.props.showSelectedStudiesOnly?this.logic.selectedStudiesView:this.logic.mainView)}},{key:"logic",get:function(){return this.store.studyListLogic}},{key:"rootCancerType",get:function(){return this.store.treeData.rootCancerType}}]),t}();Y=K([c.observer],Y);t.a=Y;var z=function(e){function t(){return G(this,t),F(this,Q(t).apply(this,arguments))}return H(t,h["d"]),B(t,[{key:"render",value:function(){var e=this;return r.createElement(u.a,M({},this.checkboxProps,{onChange:function(t){e.props.view.onCheck(e.props.node,t.target.checked)}}),this.props.children)}},{key:"checkboxProps",get:function(){return this.props.view.getCheckboxProps(this.props.node)}}]),t}();K([d.computed.struct],z.prototype,"checkboxProps",null),z=K([c.observer],z)},1038:function(e,t,n){e.exports=n(16)(901)},1040:function(e,t,n){e.exports=n(16)(55)},1041:function(e,t,n){e.exports=n(16)(115)},1042:function(e,t,n){e.exports=n(16)(379)},1043:function(e,t,n){e.exports=n(16)(919)},1196:function(e,t,n){e.exports=n(16)(651)},1198:function(e,t,n){e.exports=n(16)(650)},1200:function(e,t,n){e.exports=n(16)(374)},1203:function(e,t,n){e.exports=n(16)(649)},1205:function(e,t,n){e.exports=n(16)(102)},1206:function(e,t,n){e.exports=n(16)(1009)},1208:function(e,t,n){e.exports=n(16)(656)},1210:function(e,t,n){e.exports=n(16)(993)},1211:function(e,t,n){e.exports=n(16)(966)},1212:function(e,t,n){e.exports=n(16)(992)},1215:function(e,t,n){e.exports=n(16)(964)},1219:function(e,t,n){e.exports=n(16)(205)},1222:function(e,t,n){e.exports=n(16)(755)},1223:function(e,t,n){e.exports=n(16)(687)},1224:function(e,t,n){e.exports=n(16)(254)},1225:function(e,t,n){e.exports=n(16)(70)},1226:function(e,t,n){e.exports=n(16)(377)},1229:function(e,t,n){e.exports=n(16)(50)},1237:function(e,t,n){},567:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(7),a=n(2),i=n(1038),s=n.n(i),l=n(6),u=(n(728),n(852)),c=n(179),d=n(4),p=n(1191),f=n.n(p);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var S=n(1192),_=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=b(this,g(t).apply(this,arguments))).backgroundColorPlugin={beforeDraw:function(e){var t=e.chart.ctx;t.fillStyle="#F1F6FE",t.fillRect(0,0,e.chart.width,e.chart.height)}},e}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,r["Component"]),n=t,(o=[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"getShortName",value:function(e){var t=e.shortName;return Object.assign(Object.assign({},e),{shortName:{"Esophagus/Stomach":"Stomach","Ovary/Fallopian Tube":"Ovary","Bladder/Urinary Tract":"Bladder","Head and Neck":"Head/Neck","Peripheral Nervous System":"PNS","Ampulla of Vater":"Amp. of Vater"}[t]||t})}},{key:"lightenDarkenColor",value:function(e,t){var n=S(e).slice(1),r=parseInt(n,16),o=(r>>16)+t;o>255?o=255:o<0&&(o=0);var a=(r>>8&255)+t;a>255?a=255:a<0&&(a=0);var i=(255&r)+t;return i>255?i=255:i<0&&(i=0),.2126*o+.7152*i+.0722*a>=254&&"White"!==e&&t>1?this.lightenDarkenColor(e,t/2):"#"+(i|a<<8|o<<16).toString(16)}},{key:"formatTooltipString",value:function(e){return f()(e,{width:30}).split(/\r?\n/).map(function(e){return e.trim()})}},{key:"componentDidMount",value:function(){var e=this,t=this.byPrimarySiteStudies;if(t.length){t.forEach(function(e){e.caseCount=e.studies.reduce(function(e,t){return e+t.allSampleCount},0)});var n=t.sort(function(e,t){return t.caseCount-e.caseCount}).slice(0,20).map(function(t){return e.getShortName(t)}),r=d.flattenDeep(n.map(function(t,n){return t.studies.sort(function(e,t){return t.allSampleCount-e.allSampleCount}).map(function(r,o){var a=3,i=t.color,s=r.name,l=r.studyId,u=r.allSampleCount,c=t.studies.length;"Cyan"===i?a=18:"Yellow"===i?a=11:d.includes(["LightBlue","LightSkyBlue","PeachPuff","LightYellow"],i)?a=0:"Teal"===i?a=1:"LightYellow"===i?a=-3:"Black"===i&&(a=6);var p=e.lightenDarkenColor(i,(o+a)/c*90);return{studyId:l,borderColor:d.includes(["Gainsboro","White","LightYellow"],i)?"#dddddd":"#F1F6FE",backgroundColor:p,borderWidth:1,label:s,total:t.caseCount,data:0===n?[u]:[].concat(h(Array(n).fill(0)),[u])}})})),o={labels:n.map(function(e){return e.shortName}),datasets:r},a=this,i={animation:{duration:0},title:{display:!0,text:"Cases by Top 20 Primary Sites",fontSize:14,fontStyle:"normal"},onClick:function(e){if(this.getElementAtEvent(e)[0]){var t=r[this.getElementAtEvent(e)[0]._datasetIndex].studyId;a.props.openStudy(t)}return!1},responsive:!0,tooltips:{enabled:!0,displayColors:!1,xPadding:10,yPadding:10,backgroundColor:"rgb(255,255,255)",bodyFontColor:"#000",bodyFontStyle:"bold",bodyFontSize:11,titleFontColor:"#000",titleFontStyle:"normal",filter:function(e){return!!e&&Number(e.xLabel)>0},callbacks:{title:function(t,n){if(t.length>0){var r=t[0],o=r.yLabel+": "+n.datasets[r.datasetIndex].total+" cases";return e.formatTooltipString(o)}},label:function(t,n){var r=n.datasets[t.datasetIndex].label+": "+t.xLabel+" cases";return e.formatTooltipString(r)}}},scales:{xAxes:[{stacked:!0}],yAxes:[{stacked:!0,gridLines:{display:!1},ticks:{fontSize:11}}]},legend:{display:!1}};new s.a(this.chartTarget,{type:"horizontalBar",data:o,options:i,plugins:[this.backgroundColorPlugin]})}}},{key:"render",value:function(){var e=this,t=this.byPrimarySiteStudies.length;return t?r.createElement("canvas",{ref:function(t){return e.chartTarget=t},height:70+430*(t>20?20:t)/20}):null}},{key:"byPrimarySiteStudies",get:function(){return this.props.data.filter(function(e){return d.every(e.studies,function(e){return"other"!==e.cancerTypeId&&"mixed"!==e.cancerTypeId})})}}])&&m(n.prototype,o),a&&m(n,a),t}(),E=n(236),w=n(10),P=n(101),T=n(15),O=n(67);function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var N=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":x(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},j=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=I(this,k(t).call(this,e))).state={twitterLoading:!0},n}var o,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(t,r["Component"]),o=t,(a=[{key:"CancerTypeList",value:function(){return this.logic.cancerTypeListView.getChildCancerTypes(this.studyStore.treeData.rootCancerType,!0)}},{key:"CancerTypeDescendantStudy",value:function(e){var t=e.cancerType;return this.logic.cancerTypeListView.getDescendantCancerStudies(t)}},{key:"CancerTypeDescendantStudies",value:function(e){var t=this;return e.filter(function(e){return"other"!==e.cancerTypeId&&"mixed"!==e.cancerTypeId}).map(function(e){return{shortName:e.name,color:e.dedicatedColor,studies:t.CancerTypeDescendantStudy({cancerType:e})}})}},{key:"getWhatsNew",value:function(){var e=this;if(l.b.serverConfig.skin_right_nav_show_whats_new){if(d.isEmpty(l.b.serverConfig.skin_right_nav_whats_new_blurb)){var t=n(1194).Timeline;return r.createElement("div",{className:"rightBarSection",style:{paddingBottom:20}},r.createElement("h3",{style:{borderBottom:0}},"What's New",r.createElement("a",{href:"http://www.twitter.com/cbioportal",className:"pull-right"},"@cbioportal"," ",r.createElement("i",{className:"fa fa-twitter","aria-hidden":"true"}))),r.createElement("div",{style:{marginTop:3}},r.createElement(t,{dataSource:{sourceType:"profile",screenName:"cbioportal"},options:{username:"cbioportal",height:"200",chrome:"noheader%20nofooter"},onLoad:function(){return e.setState({twitterLoading:!1})}})),r.createElement("div",null,this.state.twitterLoading&&r.createElement("span",{style:{textAlign:"center"}},r.createElement(P.a,{isLoading:!0,small:!0}))||r.createElement("div",{style:{paddingTop:5}},r.createElement("p",{style:{textAlign:"center"}},"Sign up for low-volume email news alerts"),r.createElement("a",{target:"_blank",className:"btn btn-default btn-sm",href:"http://groups.google.com/group/cbioportal-news/boxsubscribe",style:{width:"100%"}},"Subscribe"))))}return r.createElement("div",{className:"rightBarSection"},r.createElement("h3",null,"What's New"),r.createElement("div",{dangerouslySetInnerHTML:{__html:l.b.serverConfig.skin_right_nav_whats_new_blurb}}))}return null}},{key:"getExampleSection",value:function(){return l.b.serverConfig.skin_right_nav_show_examples?d.isEmpty(l.b.serverConfig.skin_examples_right_column_html)?r.createElement("div",{className:"rightBarSection exampleQueries"},r.createElement("h3",null,"Example Queries"),r.createElement("ul",null,r.createElement("li",null,r.createElement(w.b,{to:"/comparison/mutations?sessionId=5cf89323e4b0ab413787436c"},"Primary vs. metastatic prostate cancer")),r.createElement("li",null,r.createElement(w.b,{to:"/results?cancer_study_list=coadread_tcga_pub&cancer_study_id=coadread_tcga_pub&genetic_profile_ids_PROFILE_MUTATION_EXTENDED=coadread_tcga_pub_mutations&genetic_profile_ids_PROFILE_COPY_NUMBER_ALTERATION=coadread_tcga_pub_gistic&Z_SCORE_THRESHOLD=2.0&case_set_id=coadread_tcga_pub_nonhypermut&gene_list=KRAS+NRAS+BRAF&gene_set_choice=user-defined-list"},"RAS/RAF alterations in colorectal cancer")),r.createElement("li",null,r.createElement(w.b,{to:"/results/".concat(O.b.MUTATIONS,"?cancer_study_list=ov_tcga_pub&cancer_study_id=ov_tcga_pub&genetic_profile_ids_PROFILE_MUTATION_EXTENDED=ov_tcga_pub_mutations&Z_SCORE_THRESHOLD=2.0&case_set_id=ov_tcga_pub_3way_complete&gene_list=BRCA1+BRCA2&gene_set_choice=user-defined-list")},"BRCA1 and BRCA2 mutations in ovarian cancer")),r.createElement("li",null,r.createElement(w.b,{to:"/results?cancer_study_list=ucec_tcga_pub&cancer_study_id=ucec_tcga_pub&genetic_profile_ids_PROFILE_MUTATION_EXTENDED=ucec_tcga_pub_mutations&Z_SCORE_THRESHOLD=2.0&RPPA_SCORE_THRESHOLD=2.0&data_priority=0&case_set_id=ucec_tcga_pub_sequenced&gene_set_choice=user-defined-list&gene_list=POLE%3A+MUT+%3D+P286+MUT+%3D+V411+MUT+%3D+L424+MUT+%3D+S297F&clinical_param_selection=null"},"POLE hotspot mutations in endometrial cancer")),r.createElement("li",null,r.createElement(w.b,{to:"/results?case_set_id=gbm_tcga_pub_sequenced&Action=Submit&genetic_profile_ids_PROFILE_MUTATION_EXTENDED=gbm_tcga_pub_mutations&genetic_profile_ids_PROFILE_COPY_NUMBER_ALTERATION=gbm_tcga_pub_cna_rae&Z_SCORE_THRESHOLD=1.0&cancer_study_list=gbm_tcga_pub&cancer_study_id=gbm_tcga_pub&gene_list=TP53+MDM2+MDM4&gene_set_choice=user-defined_list"},"TP53 and MDM2/4 alterations in GBM")),r.createElement("li",null,r.createElement(w.b,{to:"/results/".concat(O.b.DOWNLOAD,"?case_set_id=gbm_tcga_pub_sequenced&Action=Submit&genetic_profile_ids_PROFILE_MUTATION_EXTENDED=gbm_tcga_pub_mutations&cancer_study_list=gbm_tcga_pub&cancer_study_id=gbm_tcga_pub&gene_list=PTEN&gene_set_choice=user-defined_list&transpose_matrix=on")},"PTEN mutations in GBM in text format")),r.createElement("li",null,r.createElement(w.b,{to:"/patient?studyId=ucec_tcga_pub&caseId=TCGA-BK-A0CC"},"Patient view of an endometrial cancer case")),r.createElement("li",null,r.createElement(w.b,{to:"/study?id=laml_tcga_pan_can_atlas_2018,acc_tcga_pan_can_atlas_2018,blca_tcga_pan_can_atlas_2018,lgg_tcga_pan_can_atlas_2018,brca_tcga_pan_can_atlas_2018,cesc_tcga_pan_can_atlas_2018,chol_tcga_pan_can_atlas_2018,coadread_tcga_pan_can_atlas_2018,dlbc_tcga_pan_can_atlas_2018,esca_tcga_pan_can_atlas_2018,gbm_tcga_pan_can_atlas_2018,hnsc_tcga_pan_can_atlas_2018,kich_tcga_pan_can_atlas_2018,kirc_tcga_pan_can_atlas_2018,kirp_tcga_pan_can_atlas_2018,lihc_tcga_pan_can_atlas_2018,luad_tcga_pan_can_atlas_2018,lusc_tcga_pan_can_atlas_2018,meso_tcga_pan_can_atlas_2018,ov_tcga_pan_can_atlas_2018,paad_tcga_pan_can_atlas_2018,pcpg_tcga_pan_can_atlas_2018,prad_tcga_pan_can_atlas_2018,sarc_tcga_pan_can_atlas_2018,skcm_tcga_pan_can_atlas_2018,stad_tcga_pan_can_atlas_2018,tgct_tcga_pan_can_atlas_2018,thym_tcga_pan_can_atlas_2018,thca_tcga_pan_can_atlas_2018,ucs_tcga_pan_can_atlas_2018,ucec_tcga_pan_can_atlas_2018,uvm_tcga_pan_can_atlas_2018"},"All TCGA Pan-Cancer")),r.createElement("li",null,r.createElement(w.b,{to:"/study?id=msk_impact_2017"},"MSK-IMPACT clinical cohort, Zehir et al. 2017")),r.createElement("li",null,r.createElement(w.b,{to:"/study?id=5c26a970e4b05228701f9fa9"},"Histone mutations across cancer types")))):r.createElement("div",{className:"rightBarSection exampleQueries",dangerouslySetInnerHTML:{__html:"<h3>Example Queries</h3>"+l.b.serverConfig.skin_examples_right_column_html}}):null}},{key:"getTestimonialsSection",value:function(){return l.b.serverConfig.skin_right_nav_show_testimonials?r.createElement("div",{className:"rightBarSection",style:{minHeight:"300px"}},r.createElement("h3",null,"Testimonials"),r.createElement(E.b,null)):null}},{key:"getDataSetsSection",value:function(){return l.b.serverConfig.skin_right_nav_show_data_sets?r.createElement("div",{className:"rightBarSection"},r.createElement("h3",null,"Cancer Studies"),this.studyStore.cancerStudies.isComplete&&this.studyStore.cancerTypes.isComplete&&r.createElement("div",null,r.createElement("p",null,"The portal contains"," ",this.studyStore.cancerStudies.result.length," ","cancer studies"," ",r.createElement(w.b,{to:"/datasets"},"(details)")),r.createElement(_,{data:this.CancerTypeDescendantStudies(this.CancerTypeList()),openStudy:function(e){Object(T.E)(e)}})),this.studyStore.cancerStudies.isPending&&r.createElement("span",{style:{textAlign:"center"}},r.createElement(P.a,{isLoading:!0,small:!0}))):null}},{key:"render",value:function(){return r.createElement("div",null,this.getWhatsNew(),this.getDataSetsSection(),this.getExampleSection(),this.getTestimonialsSection())}},{key:"studyStore",get:function(){return this.props.queryStore}},{key:"logic",get:function(){return this.studyStore.studyListLogic}}])&&C(o.prototype,a),i&&C(o,i),t}(),A=j=N([o.observer],j),D=(n(1237),n(8)),M=n(838);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t){return!t||"object"!==Q(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Q(e){return(Q="function"==typeof Symbol&&"symbol"===L(Symbol.iterator)?function(e){return L(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":L(e)})(e)}var H=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Q(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};s.a.plugins.register({beforeDraw:function(e){var t=e.chart.ctx;t.fillStyle="white",t.fillRect(0,0,e.chart.width,e.chart.height)}});var q=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=V(this,B(t).call(this,e))).showQuerySelector=!0,n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentWillMount",value:function(){this.queryStore=Object(M.a)()}},{key:"handleTabChange",value:function(e){this.props.routing.updateRoute({tab:e})}},{key:"getQueryStore",value:function(){return this.queryStore}},{key:"render",value:function(){return r.createElement(c.a,{className:"homePageLayout",noMargin:!0,rightBar:r.createElement(A,{queryStore:this.queryStore})},r.createElement("div",{className:"headBlock",dangerouslySetInnerHTML:{__html:l.b.serverConfig.skin_blurb}}),r.createElement(u.a,{getQueryStore:this.getQueryStore,showQuickSearchTab:l.b.serverConfig.quick_search_enabled,showDownloadTab:!0}))}}])&&G(n.prototype,o),a&&G(n,a),t}();H([a.observable],q.prototype,"showQuerySelector",void 0),H([D.default],q.prototype,"getQueryStore",null),q=H([Object(o.inject)("routing"),o.observer],q);t.default=q},581:function(e,t,n){e.exports=n(16)(903)},584:function(e,t,n){"use strict";var r=n(3);t.a=new r.p},591:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__1P_Zv",framedImage:"styles-module__framedImage__1iqVk",QueryAndDownloadTabs:"styles-module__QueryAndDownloadTabs__ivykJ",QueryContainer:"styles-module__QueryContainer__2cy7B",forkedButtons:"styles-module__forkedButtons__2ctM7",errorMessage:"styles-module__errorMessage__32yZg",oqlMessage:"styles-module__oqlMessage__3xhe8",CancerStudySelector:"styles-module__CancerStudySelector__1FU50",MolecularProfileSelector:"styles-module__MolecularProfileSelector__rlomm",DataTypePrioritySelector:"styles-module__DataTypePrioritySelector__1_VUf",CaseSetSelector:"styles-module__CaseSetSelector__YteFo",StudySelection:"styles-module__StudySelection__3booh",GeneSetSelector:"styles-module__GeneSetSelector__2DY1b",icon:"styles-module__icon__1E8Oh",geneCount:"styles-module__geneCount__3cB9u",SelectedStudiesWindow:"styles-module__SelectedStudiesWindow__NAG6X",CancerStudySelectorHeader:"styles-module__CancerStudySelectorHeader__D2N40",selectAll:"styles-module__selectAll__sQO_b",noData:"styles-module__noData__3J5xx",selectedCount:"styles-module__selectedCount__TRoaE",selectionsExist:"styles-module__selectionsExist__1icpM",cancerStudySelectorBody:"styles-module__cancerStudySelectorBody__2BfDm",cancerTypeListContainer:"styles-module__cancerTypeListContainer__rnSbV",cancerStudyListContainer:"styles-module__cancerStudyListContainer__356jB",cancerTypeList:"styles-module__cancerTypeList__ouFgb",cancerTypeListItemLabel:"styles-module__cancerTypeListItemLabel__31N8Y",cancerTypeListItemCount:"styles-module__cancerTypeListItemCount__1HB2c",selectable:"styles-module__selectable__3NCiW",selected:"styles-module__selected__Zy9_9",matchingNodeText:"styles-module__matchingNodeText__3lV9e",nonMatchingNodeText:"styles-module__nonMatchingNodeText__1l5PU",containsSelectedStudies:"styles-module__containsSelectedStudies__20v-B",searchTextInput:"styles-module__searchTextInput__1VIxV",group:"styles-module__group__Cs8DR",zScore:"styles-module__zScore__23rtN",infoIcon:"styles-module__infoIcon__zMiog",profileName:"styles-module__profileName__1fbIy",DataTypePriorityLabel:"styles-module__DataTypePriorityLabel__21k9z",radioRow:"styles-module__radioRow__1G_fF",buttonRow:"styles-module__buttonRow__51RtG",geneSet:"styles-module__geneSet__Ra6KD",notEmpty:"styles-module__notEmpty__23mDp",GeneSymbolValidator:"styles-module__GeneSymbolValidator__ZK8rf",pendingMessage:"styles-module__pendingMessage__2jgIM",oqlNotice:"styles-module__oqlNotice__1tycm",validBubble:"styles-module__validBubble__QCGq3",invalidBubble:"styles-module__invalidBubble__1gB6Z",suggestionBubble:"styles-module__suggestionBubble__aRL1R",noChoiceLabel:"styles-module__noChoiceLabel__2GF5_",singleChoiceLabel:"styles-module__singleChoiceLabel__2wdqL",multiChoiceLabel:"styles-module__multiChoiceLabel__19sFa",MutSigGeneSelectorWindow:"styles-module__MutSigGeneSelectorWindow__1Uiku",MutSigGeneSelector:"styles-module__MutSigGeneSelector__25hKH",selectionColumnHeader:"styles-module__selectionColumnHeader__2MSUO",selectionColumnCell:"styles-module__selectionColumnCell__3RJ8f",selectButton:"styles-module__selectButton__2dXHK",GisticGeneSelectorWindow:"styles-module__GisticGeneSelectorWindow__1J2UG",GisticGeneSelector:"styles-module__GisticGeneSelector__U5Lb9",header:"styles-module__header__3cqyY",amp:"styles-module__amp__1zeIe",del:"styles-module__del__1_otl",gisticTable:"styles-module__gisticTable__2fquv",GisticGeneToggles:"styles-module__GisticGeneToggles__1aR6k",someGenes:"styles-module__someGenes__J-RhD",moreGenes:"styles-module__moreGenes__2gVF_",geneToggle:"styles-module__geneToggle__EGiaB",simulateHovered:"styles-module__simulateHovered__3IL_G",notSelected:"styles-module__notSelected__3-Rmx",showMoreLess:"styles-module__showMoreLess__3Ef4J",GenesetsSelectorWindow:"styles-module__GenesetsSelectorWindow__NTbph",GenesetsFormGroup:"styles-module__GenesetsFormGroup__1uJYh",GenesetsVolcanoSelectorWindow:"styles-module__GenesetsVolcanoSelectorWindow__w4nHP",GenesetsSelectionArea:"styles-module__GenesetsSelectionArea__3ebp-",transposeDataMatrix:"styles-module__transposeDataMatrix__YP_NR",submitRow:"styles-module__submitRow__k2sC8",genomeSpace:"styles-module__genomeSpace__2augo",tooltip:"styles-module__tooltip__ux3KI",learnOql:"styles-module__learnOql__1Aj5I",quickSelect:"styles-module__quickSelect__3ZhaC",studyName:"styles-module__studyName__2iQkr"}},594:function(e,t,n){"use strict";var r=n(4),o=n(178),a=n(2);function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l="tissue",u="My Virtual Studies",c="Studies",d=function(){function e(t){var n,o,a,s=this,d=t.cancerTypes,p=void 0===d?[]:d,f=t.studies,y=void 0===f?[]:f,h=t.priorityStudies,m=void 0===h?{}:h,b=t.virtualStudies,g=void 0===b?[]:b,v=t.maxTreeDepth,S=void 0===v?0:v;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootCancerType={clinicalTrialKeywords:"",dedicatedColor:"",name:"All",parent:"",shortName:"All",cancerTypeId:l},this.virtualStudyCategory={clinicalTrialKeywords:"",dedicatedColor:"",name:u,parent:l,shortName:u,cancerTypeId:u,alwaysVisible:!0},this.physicalStudyCategory={clinicalTrialKeywords:"",dedicatedColor:"",name:c,parent:l,shortName:c,cancerTypeId:c,alwaysVisible:!0},this.priorityCategories=[],this.map_node_meta=new Map,this.map_cancerTypeId_cancerType=new Map,this.map_studyId_cancerStudy=new Map,p=e.sortNodes(p);var _=g.map(function(e){if(e.data)return{allSampleCount:r.sumBy(e.data.studies,function(e){return e.samples.length}),studyId:e.id,name:e.data.name,description:e.data.description,cancerTypeId:u}}).filter(function(e){return e});for(var E in m)this.priorityCategories.push({clinicalTrialKeywords:"",dedicatedColor:"",name:E,parent:l,shortName:E,cancerTypeId:E});0===S&&g.length>0&&(y=r.map(y,function(e){return e.cancerTypeId=s.physicalStudyCategory.cancerTypeId,e}));for(var w=0,P=[p=[this.virtualStudyCategory,this.physicalStudyCategory].concat(i(this.priorityCategories),[this.rootCancerType],i(p)),y=e.sortNodes([].concat(i(_),i(y)))];w<P.length;w++){n=P[w];var T=!0,O=!1,C=void 0;try{for(var I,k=n[Symbol.iterator]();!(T=(I=k.next()).done);T=!0){o=I.value;var R=n==p;R?this.map_cancerTypeId_cancerType.set(o.cancerTypeId,o):this.map_studyId_cancerStudy.set(o.studyId,o);var x=R?o.name:[o.name,o.description].join("\n");this.map_node_meta.set(o,{isCancerType:R,isPriorityCategory:!1,priorityCategories:[],childCancerTypes:[],childStudies:[],descendantStudies:[],descendantCancerTypes:[],ancestors:[],siblings:[],searchTerms:x})}}catch(e){O=!0,C=e}finally{try{T||null==k.return||k.return()}finally{if(O)throw C}}}var N=!0,j=!1,A=void 0;try{for(var D,M=this.priorityCategories[Symbol.iterator]();!(N=(D=M.next()).done);N=!0){var L=D.value;(a=this.map_node_meta.get(L)).isPriorityCategory=!0;var G=!0,V=!1,B=void 0;try{for(var F,Q=m[L.cancerTypeId][Symbol.iterator]();!(G=(F=Q.next()).done);G=!0){var H=F.value,q=this.map_studyId_cancerStudy.get(H);if(q)a.childStudies.push(q),a.descendantStudies.push(q),this.map_node_meta.get(q).priorityCategories.push(L)}}catch(e){V=!0,B=e}finally{try{G||null==Q.return||Q.return()}finally{if(V)throw B}}}}catch(e){j=!0,A=e}finally{try{N||null==M.return||M.return()}finally{if(j)throw A}}for(var U=0,K=[p,y];U<K.length;U++){n=K[U];var W=!0,Y=!1,z=void 0;try{for(var X,J=n[Symbol.iterator]();!(W=(X=J.next()).done);W=!0){o=X.value,a=this.map_node_meta.get(o);var Z=void 0;if(a.isCancerType){var $=o.alwaysVisible;Z=this.map_cancerTypeId_cancerType.get(o.parent),$&&Z&&(Z.alwaysVisible=$)}else Z=this.map_cancerTypeId_cancerType.get(o.cancerTypeId);var ee=Z&&this.map_node_meta.get(Z);for(ee&&(a.isCancerType?ee.childCancerTypes.push(o):ee.childStudies.push(o));Z&&ee;)a.ancestors.push(Z),a.isCancerType?ee.descendantCancerTypes.push(o):ee.descendantStudies.push(o),ee=(Z=this.map_cancerTypeId_cancerType.get(Z.parent))&&this.map_node_meta.get(Z);var te=[].concat(i(a.ancestors),i(a.priorityCategories)).map(function(e){return e.name});a.searchTerms=[a.searchTerms].concat(i(te)).join("\n")}}catch(e){Y=!0,z=e}finally{try{W||null==J.return||J.return()}finally{if(Y)throw z}}}var ne=!0,re=!1,oe=void 0;try{for(var ae,ie=y[Symbol.iterator]();!(ne=(ae=ie.next()).done);ne=!0){o=ae.value;var se=(a=this.map_node_meta.get(o)).ancestors[a.ancestors.length-2];if(se){var le=this.map_node_meta.get(se);a.siblings=le.descendantStudies}}}catch(e){re=!0,oe=e}finally{try{ne||null==ie.return||ie.return()}finally{if(re)throw oe}}}var t,n,o;return t=e,o=[{key:"sortNodes",value:function(e){return r.sortBy(e,function(e){return e.name})}}],(n=null)&&s(t.prototype,n),o&&s(t,o),e}(),p=n(3),f=n(66),y=n(103),h=n(588),m=n(104),b=n.n(m),g=n(6),v=n(692),S=n(50),_=n.n(S),E=n(15),w=n(701),P=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,s)}l((r=r.apply(e,t||[])).next())})};function T(e,t,n){return P(this,void 0,void 0,regeneratorRuntime.mark(function o(){var a,i;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return a=r.chunk(e,n),i=a.map(t),o.t0=r,o.next=5,Promise.all(i);case 5:return o.t1=o.sent,o.abrupt("return",o.t0.flatten.call(o.t0,o.t1));case 7:case"end":return o.stop()}},o)}))}var O=n(570);function C(e){var t=e.selectableSelectedStudyIds,n=e.asyncCustomCaseSet.result.map(function(e){return e.studyId+":"+e.sampleId}).join("+"),r=e.getSelectedProfileIdFromMolecularAlterationType("MUTATION_EXTENDED");e.alterationTypesInOQL.haveMutInQuery&&!r&&e.defaultMutationProfile&&(r=e.defaultMutationProfile.molecularProfileId);var o=e.getSelectedProfileIdFromMolecularAlterationType("COPY_NUMBER_ALTERATION");e.alterationTypesInOQL.haveCnaInQuery&&!o&&e.defaultCnaProfile&&(o=e.defaultCnaProfile.molecularProfileId);var a=e.getSelectedProfileIdFromMolecularAlterationType("MRNA_EXPRESSION");e.alterationTypesInOQL.haveMrnaInQuery&&!a&&e.defaultMrnaProfile&&(a=e.defaultMrnaProfile.molecularProfileId);var i=e.getSelectedProfileIdFromMolecularAlterationType("PROTEIN_LEVEL");e.alterationTypesInOQL.haveProtInQuery&&!i&&e.defaultProtProfile&&(i=e.defaultProtProfile.molecularProfileId);var s={genetic_profile_ids_PROFILE_MUTATION_EXTENDED:r,genetic_profile_ids_PROFILE_COPY_NUMBER_ALTERATION:o,genetic_profile_ids_PROFILE_MRNA_EXPRESSION:a,genetic_profile_ids_PROFILE_METHYLATION:e.getSelectedProfileIdFromMolecularAlterationType("METHYLATION")||e.getSelectedProfileIdFromMolecularAlterationType("METHYLATION_BINARY"),genetic_profile_ids_PROFILE_PROTEIN_EXPRESSION:i,genetic_profile_ids_PROFILE_GENESET_SCORE:e.getSelectedProfileIdFromMolecularAlterationType("GENESET_SCORE"),genetic_profile_ids_PROFILE_GENERIC_ASSAY:e.getSelectedProfileIdFromMolecularAlterationType("GENERIC_ASSAY"),cancer_study_id:1===t.length?t[0]:"all",cancer_study_list:void 0,Z_SCORE_THRESHOLD:e.zScoreThreshold,RPPA_SCORE_THRESHOLD:e.rppaScoreThreshold,data_priority:e.dataTypePriorityCode,profileFilter:e.dataTypePriorityCode,case_set_id:e.selectedSampleListId||"-1",case_ids:n,gene_list:ie(e.geneQuery)||" ",geneset_list:ie(e.genesetQuery)||" ",tab_index:e.forDownloadTab?"tab_download":"tab_visualize",transpose_matrix:e.transposeDataMatrix?"on":void 0,Action:"Submit"};return 1!==t.length&&(s.cancer_study_list=t.join(",")),{query:s}}function I(e){var t=!1,n=!1,r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var l=i.value;if(l.showProfileInAnalysisTab){switch(l.molecularAlterationType){case O.a.MUTATION_EXTENDED:t=!0;break;case O.a.COPY_NUMBER_ALTERATION:n=!0}if(t&&n)break}}}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return{mutation:t,cna:n}}function k(e,t,n){var o={},a={},i={},s={},l={},u={},c={},d={};r.each(e,function(e){switch(e.category){case"all_cases_with_mutation_and_cna_data":i[e.studyId]=r.keyBy(e.sampleIds);break;case"all_cases_with_mutation_data":o[e.studyId]=r.keyBy(e.sampleIds);break;case"all_cases_with_cna_data":a[e.studyId]=r.keyBy(e.sampleIds);break;case"all_cases_in_study":s[e.studyId]=r.keyBy(e.sampleIds);break;default:e.sampleListId===e.studyId+"_all"&&(s[e.studyId]=r.keyBy(e.sampleIds))}});var p=r.map(n,function(e){return e.id}),f=t.filter(function(e){return!r.includes(p,e)});return r.forEach(f,function(e){l[e]=o[e]||{},u[e]=a[e]||{},c[e]=i[e]||{},d[e]=s[e]||{}}),r.forEach(n,function(e){r.forEach(e.data.studies,function(e){r.includes(f,e.id)||(l[e.id]=l[e.id]||{},u[e.id]=u[e.id]||{},c[e.id]=c[e.id]||{},d[e.id]=d[e.id]||{},r.forEach(e.samples,function(t){o[e.id]&&o[e.id][t]&&(l[e.id][t]=t),a[e.id]&&a[e.id][t]&&(u[e.id][t]=t),i[e.id]&&i[e.id][t]&&(c[e.id][t]=t),s[e.id]&&s[e.id][t]&&(d[e.id][t]=t)}))})}),{w_mut:r.reduce(l,function(e,t){return e+Object.keys(t).length},0),w_cna:r.reduce(u,function(e,t){return e+Object.keys(t).length},0),w_mut_cna:r.reduce(c,function(e,t){return e+Object.keys(t).length},0),all:r.reduce(d,function(e,t){return e+Object.keys(t).length},0)}}var R=n(571);function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var D=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,s)}l((r=r.apply(e,t||[])).next())})};function M(e){return e}function L(e,t){return t}function G(e){return D(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.fetchMolecularProfilesUsingPOST({molecularProfileFilter:{studyIds:e}});case 2:return n=t.sent,a=r.groupBy(n,function(e){return e.studyId}),t.abrupt("return",e.map(function(e){return{data:[a[e]||[]],meta:e}}));case 5:case"end":return t.stop()}},t)}))}var V=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),N(this,j(t).call(this,M,L,G))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,R["a"]),t}(),B=n(572),F=n(127);function Q(e){var t=[],n=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var l=i.value;r.has(l,"genesets")&&l.genesets.forEach(function(e){return t.push(e)})}}catch(e){o=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw a}}return t}var H=n(616);function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){return!t||"object"!==q(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Y=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,s)}l((r=r.apply(e,t||[])).next())})};var z=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),U(this,K(t).call(this,function(e){return{invoke:function(){return function(e){return Y(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.getAllSampleListsInStudyUsingGET({studyId:e,projection:"DETAILED"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}))}(e)}}},function(e){return e}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(t,H["a"]),t}();var X=n(128),J=n(602);function Z(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",function(){return oe}),n.d(t,"e",function(){return ie}),n.d(t,"b",function(){return se}),n.d(t,"c",function(){return ue}),n.d(t,"d",function(){return ce});var ne=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":te(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},re=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,s)}l((r=r.apply(e,t||[])).next())})},oe="-1";function ae(e){return Number.isInteger(Number(e))}function ie(e){return e.trim().replace(/^\s+|\s+$/g,"").replace(/[ \+]+/g," ").toUpperCase()}var se,le=["searchText","selectableSelectedStudyIds","dataTypePriority","selectedProfileIds","zScoreThreshold","rppaScoreThreshold","selectedSampleListId","caseIds","caseIdsMode","geneQuery","genesetQuery"];!function(e){e[e.Unfocused=0]="Unfocused",e[e.ShouldFocus=1]="ShouldFocus",e[e.Focused=2]="Focused"}(se||(se={}));var ue=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.studiesHaveChangedSinceInitialization=!1,this.deletedVirtualStudies=[],this.forDownloadTab=!1,this.transposeDataMatrix=!1,this.searchText="",this._allSelectedStudyIds=a.observable.map(),this._defaultSelectedIds=a.observable.map(),this.dataTypePriority={mutation:!0,cna:!0},this._selectedProfileIds=void 0,this.zScoreThreshold="2.0",this.rppaScoreThreshold="2.0",this._selectedSampleListId=void 0,this.caseIds="",this._defaultStudySampleMap={},this._caseIdsMode="sample",this._geneQuery="",this.rawGenesetQuery="",this.geneQueryErrorDisplayStatus=se.Unfocused,this.genesetQueryErrorDisplayStatus=se.Unfocused,this.showMutSigPopup=!1,this.showGisticPopup=!1,this.showGenesetsHierarchyPopup=!1,this.showGenesetsVolcanoPopup=!1,this.priorityStudies=g.a.parseConfigFormat(g.b.serverConfig.priority_studies),this.showSelectedStudiesOnly=!1,this.selectedCancerTypeIds=[],this.clickAgainToDeselectSingle=!0,this.searchExampleMessage="",this.volcanoPlotSelectedPercentile={label:"75%",value:"75"},this._maxTreeDepth=parseInt(g.b.serverConfig.skin_query_max_tree_depth,10),this.cancerTypes=Object(p.S)({invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.a.getAllCancerTypesUsingGET({}).then(function(e){return e.filter(function(e){return"null"!==e.parent})}));case 1:case"end":return e.stop()}},e)}))}},[]),this.cancerStudies=Object(p.S)(o.a.getAllStudiesUsingGET({projection:"SUMMARY"}),[]),this.cancerStudyIdsSet=Object(p.S)({await:function(){return[n.cancerStudies]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(p.Y)(this.cancerStudies.result.map(function(e){return e.studyId})));case 1:case"end":return e.stop()}},e,this)}))},default:{}}),this.physicalStudiesIdsSet=Object(p.S)({await:function(){return[n.cancerStudies]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.cancerStudies.result.reduce(function(e,t){return e[t.studyId]=[t.studyId],e},{}));case 1:case"end":return e.stop()}},e,this)}))},default:{}}),this.virtualStudiesIdsSet=Object(p.S)({await:function(){return[n.userVirtualStudies]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.userVirtualStudies.result.reduce(function(e,t){return e[t.id]=[t.id],e},{}));case 1:case"end":return e.stop()}},e,this)}))},default:{}}),this.sharedQueriedStudiesSet=Object(p.S)({await:function(){return[n.physicalStudiesIdsSet,n.virtualStudiesIdsSet]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,o,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.physicalStudiesIdsSet.result,n=this.virtualStudiesIdsSet.result,o=Object.assign({},t,n),a=this._defaultSelectedIds.keys().filter(function(e){return!o[e]}),i={},e.next=7,Promise.all(a.map(function(e){return new Promise(function(n,o){F.a.getVirtualStudy(e).then(function(o){var a=o.data.studies.map(function(e){return e.id}),s=a.filter(function(e){return!t[e]});r.isEmpty(s)&&(i[e]=a),n()}).catch(function(){n()})})}));case 7:return e.abrupt("return",i);case 8:case"end":return e.stop()}},e,this)}))},default:{}}),this.physicalStudiesSet=Object(p.S)({await:function(){return[n.cancerStudies]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.cancerStudies.result.reduce(function(e,t){return e[t.studyId]=t,e},{}));case 1:case"end":return e.stop()}},e,this)}))},default:{}}),this.userVirtualStudies=Object(p.S)(function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!g.a.sessionServiceIsEnabled()||!this.userLoggedIn){e.next=13;break}return e.prev=1,e.next=4,F.a.getUserVirtualStudies();case 4:return t=e.sent,e.abrupt("return",t);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",[]);case 11:e.next=14;break;case 13:return e.abrupt("return",[]);case 14:case"end":return e.stop()}},e,this,[[1,8]])}))},[]),this.userVirtualStudiesSet=Object(p.S)({await:function(){return[n.userVirtualStudies]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.userVirtualStudies.result.reduce(function(e,t){return e[t.id]=t,e},{}));case 1:case"end":return e.stop()}},e,this)}))},default:{}}),this.sharedVirtualStudiesSet=Object(p.S)({await:function(){return[n.physicalStudiesSet,n.userVirtualStudiesSet]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,o,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.physicalStudiesSet.result,n=this.userVirtualStudiesSet.result,o=Object.assign([],Object.keys(t),Object.keys(n)),a=this._defaultSelectedIds.keys().filter(function(e){return!r.includes(o,e)}),i={},e.next=7,Promise.all(a.map(function(e){return new Promise(function(n,r){F.a.getVirtualStudy(e).then(function(r){0===r.data.studies.map(function(e){return e.id}).filter(function(e){return!t[e]}).length&&(i[e]=r),n()}).catch(function(){n()})})}));case 7:return e.abrupt("return",i);case 8:case"end":return e.stop()}},e,this)}))},default:{}}),this.selectedStudyToSampleSet=Object(p.S)({await:function(){return[n.userVirtualStudiesSet,n.sharedVirtualStudiesSet]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,a,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={},n=r.filter(this.allSelectedStudyIds,function(e){return i.physicalStudiesSet.result[e]}),this._allSelectedStudyIds.keys().length===n.length){e.next=9;break}return e.next=5,Promise.all(r.map(n,function(e){return o.a.getAllSamplesInStudyUsingGET({studyId:e}).then(function(n){t[e]=Object(p.Y)(n.map(function(e){return e.sampleId}))})}));case 5:a=Object.assign(Object.assign({},this.userVirtualStudiesSet.result),this.sharedVirtualStudiesSet.result),this._allSelectedStudyIds.keys().forEach(function(e){a[e]&&a[e].data.studies.forEach(function(e){void 0===t[e.id]&&(t[e.id]=Object(p.Y)(e.samples))})}),e.next=10;break;case 9:n.forEach(function(e){t[e]={}});case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}},e,this)}))},default:{}}),this.selectableStudiesSet=Object(p.S)({await:function(){return[n.physicalStudiesSet,n.selectedStudyToSampleSet]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},r.each(this.physicalStudiesSet.result,function(e,n){t[n]=[n]}),r.each(this.userVirtualStudiesSet.result,function(e,n){t[n]=[n]}),r.each(this.sharedVirtualStudiesSet.result,function(e,n){t[n]=e.data.studies.map(function(e){return e.id})}),e.abrupt("return",t);case 5:case"end":return e.stop()}},e,this)}))},default:{},onResult:function(){if(n.selectedSampleListId!==oe){var e=n.sharedVirtualStudiesSet.result,t=r.filter(n._allSelectedStudyIds.keys(),function(t){return void 0!==e[t]});if(r.isEmpty(t))n.caseIds="";else{var o=n._defaultStudySampleMap;(void 0===o||r.isEmpty(o))&&(o=r.reduce(n.selectedStudyToSampleSet.result,function(e,t,n){return e[n]=r.keys(t),e},{})),r.some(o,function(e){return e.length>0})&&n.setCaseIds(o)}}}}),this.unknownStudyIds=Object(p.S)({await:function(){return[n.selectableStudiesSet]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.selectableStudiesSet.result,n=this._allSelectedStudyIds.keys(),e.abrupt("return",n.filter(function(e){return!(e in t)}));case 3:case"end":return e.stop()}},e,this)}))},default:[]}),this.molecularProfiles=Object(p.S)({invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==this.physicalStudyIdsInSelection.length){e.next=6;break}return e.next=3,o.a.getAllMolecularProfilesInStudyUsingGET({studyId:this.physicalStudyIdsInSelection[0]});case 3:return e.abrupt("return",e.sent);case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}},e,this)}))},default:[],onResult:function(){n.initiallySelected.profileIds&&!n.studiesHaveChangedSinceInitialization||(n._selectedProfileIds=void 0)}}),this.molecularProfilesInSelectedStudies=Object(p.S)({invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.molecularProfilesInStudyCache.getPromise(this.physicalStudyIdsInSelection,!0);case 2:return t=e.sent,e.abrupt("return",r.flatten(t.map(function(e){return e.data?e.data:[]})));case 4:case"end":return e.stop()}},e,this)}))},default:[]}),this.sampleListInSelectedStudies=Object(p.S)({await:function(){return n.physicalStudyIdsInSelection.map(function(e){return n.sampleListsInStudyCache.get(e)})},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.reduce(this.physicalStudyIdsInSelection,function(e,n){var o=t.sampleListsInStudyCache.get(n).result;return r.isUndefined(o)||(e=e.concat(o)),e},[]));case 1:case"end":return e.stop()}},e,this)}))},default:[],onResult:function(){n.initiallySelected.sampleListId&&!n.studiesHaveChangedSinceInitialization||(n._selectedSampleListId=void 0)}}),this.profileAvailability=Object(p.S)({await:function(){return[n.molecularProfilesInSelectedStudies]},invoke:function(){return Promise.resolve(I(n.molecularProfilesInSelectedStudies.result))},default:{mutation:!1,cna:!1},onResult:function(){n.initiallySelected.sampleListId&&!n.studiesHaveChangedSinceInitialization||(n.dataTypePriority=I(n.molecularProfilesInSelectedStudies.result))}}),this.profiledSamplesCount=Object(p.S)({await:function(){return[n.sampleListInSelectedStudies]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k(this.sampleListInSelectedStudies.result,this.selectableSelectedStudyIds,this.selectedVirtualStudies));case 1:case"end":return e.stop()}},e,this)}))},default:{w_mut:0,w_cna:0,w_mut_cna:0,all:0}}),this.sampleLists=Object(p.S)({invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isSingleNonVirtualStudySelected){e.next=2;break}return e.abrupt("return",[]);case 2:return this.sampleListsInStudyCache.get(this.selectableSelectedStudyIds[0]).result,e.next=5,this.sampleListsInStudyCache.get(this.selectableSelectedStudyIds[0]).result;case 5:return t=e.sent,e.abrupt("return",r.sortBy(t,function(e){return e.name}));case 7:case"end":return e.stop()}},e,this)}))},default:[],onResult:function(){n.initiallySelected.sampleListId&&!n.studiesHaveChangedSinceInitialization||(n._selectedSampleListId=void 0)}}),this.mutSigForSingleStudy=Object(p.S)({invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isSingleNonVirtualStudySelected){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,y.a.getSignificantlyMutatedGenesUsingGET({studyId:this.selectableSelectedStudyIds[0]});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}))},default:[]}),this.gisticForSingleStudy=Object(p.S)({invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isSingleNonVirtualStudySelected){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,y.a.getSignificantCopyNumberRegionsUsingGET({studyId:this.selectableSelectedStudyIds[0]});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}))},default:[]}),this.genes=Object(p.S)({invoke:function(){return n.invokeGenesLater(n.geneIds)},default:{found:[],suggestions:[]}}),this.genesets=Object(p.S)({invoke:function(){return n.invokeGenesetsLater(n.genesetIds)},default:{found:[],invalid:[]}}),this.invokeGenesLater=Object(f.debounceAsync)(function(e){return re(n,void 0,void 0,regeneratorRuntime.mark(function t(){var n,a,i,s,l,u,c,d,p,f,y=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.partition(r.uniq(e),ae),a=$(n,2),i=a[0],s=a[1],l=function(){return re(y,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,a,s,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.length){e.next=6;break}return e.next=3,o.a.fetchGenesUsingPOST({geneIdType:"ENTREZ_GENE_ID",geneIds:i});case 3:t=e.sent,e.next=7;break;case 6:t=[];case 7:return n=r.difference(i,t.map(function(e){return e.entrezGeneId+""})),a=n.map(function(e){return{alias:e,genes:[]}}),s=t.map(function(e){return{alias:e.entrezGeneId+"",genes:[e]}}),l=[].concat(Z(a),Z(s)),e.abrupt("return",{found:t,suggestions:l});case 12:case"end":return e.stop()}},e)}))},u=function(){return re(y,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,a,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.length){e.next=6;break}return e.next=3,o.a.fetchGenesUsingPOST({geneIdType:"HUGO_GENE_SYMBOL",geneIds:s});case 3:t=e.sent,e.next=7;break;case 6:t=[];case 7:return n=r.difference(s,t.map(function(e){return e.hugoGeneSymbol})),e.next=10,Promise.all(n.map(function(e){return i.getGeneSuggestions(e)}));case 10:return a=e.sent,e.abrupt("return",{found:t,suggestions:a});case 12:case"end":return e.stop()}},e)}))},t.next=5,Promise.all([l(),u()]);case 5:return c=t.sent,d=$(c,2),p=d[0],f=d[1],t.abrupt("return",{found:[].concat(Z(p.found),Z(f.found)),suggestions:[].concat(Z(p.suggestions),Z(f.suggestions))});case 10:case"end":return t.stop()}},t)}))},500),this.invokeGenesetsLater=Object(f.debounceAsync)(function(e){return re(n,void 0,void 0,regeneratorRuntime.mark(function t(){var n,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.length>0)){t.next=8;break}return t.next=3,y.a.fetchGenesetsUsingPOST({genesetIds:e});case 3:return n=t.sent,o=r.difference(e,n.map(function(e){return e.genesetId})),t.abrupt("return",{found:n,invalid:o});case 8:return t.abrupt("return",Promise.resolve({found:[],invalid:[]}));case 9:case"end":return t.stop()}},t)}))},500),this.asyncCustomCaseSet=Object(p.S)({invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.selectedSampleListId===oe&&0!==this.caseIds.trim().length){e.next=2;break}return e.abrupt("return",[]);case 2:return e.abrupt("return",this.invokeCustomCaseSetLater({isVirtualStudySelected:this.isVirtualStudySelected,caseIds:this.caseIds,caseIdsMode:this.caseIdsMode}));case 3:case"end":return e.stop()}},e,this)}))},default:[]}),this.invokeCustomCaseSetLater=Object(f.debounceAsync)(function(e){return re(n,void 0,void 0,regeneratorRuntime.mark(function t(){var n,a,i,s,l,u,c,d,f,y,h,m,b,g,v,S,_,E,w,P,O,C,I,k,R,x,N=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n="",this.isSingleNonVirtualStudySelected&&(n=this.selectableSelectedStudyIds[0]),a=e.caseIds.trim().split(/\s+/g),i=Object(p.Y)(this.physicalStudyIdsInSelection),s=a.map(function(e){var t=e.split(":");if(1===t.length){if(n)return{id:e,study:n};throw new Error("No study specified for ".concat(N.caseIdsMode," id: ").concat(e,", and more than one study selected for query."))}if(2===t.length){var r=t[0],o=t[1];if(!i[r]){var a="";throw N.isVirtualStudySelected&&(a=", nor part of a selected Saved Study"),new Error("Study ".concat(r," is not selected").concat(a,"."))}return{id:o,study:r}}throw new Error("Input error for entity: ".concat(e,"."))}),l=Object(p.W)(s.map(function(e){return"".concat(e.study,":").concat(e.id)})),u=[],c={},d=[],"sample"!==e.caseIdsMode){t.next=37;break}if(!(f=s.map(function(e){return{studyId:e.study,sampleId:e.id}})).length){t.next=35;break}return t.next=14,T(f,function(e){return o.a.fetchSamplesUsingPOST({sampleFilter:{sampleIdentifiers:e},projection:"SUMMARY"})},990);case 14:for(y=t.sent,y=r.sortBy(y,function(e){return l["".concat(e.studyId,":").concat(e.sampleId)]}),h=!0,m=!1,b=void 0,t.prev=19,g=y[Symbol.iterator]();!(h=(v=g.next()).done);h=!0)S=v.value,u.push({studyId:S.studyId,sampleId:S.sampleId}),c["".concat(S.studyId,":").concat(S.sampleId)]=!0;t.next=27;break;case 23:t.prev=23,t.t0=t.catch(19),m=!0,b=t.t0;case 27:t.prev=27,t.prev=28,h||null==g.return||g.return();case 30:if(t.prev=30,!m){t.next=33;break}throw b;case 33:return t.finish(30);case 34:return t.finish(27);case 35:t.next=61;break;case 37:return _=s.map(function(e){return N.getSamplesForStudyAndPatient(e.study,e.id)}),t.next=40,Promise.all(_);case 40:for(E=t.sent,E=r.sortBy(E,function(e){return l["".concat(e.studyId,":").concat(e.patientId)]}),w=!0,P=!1,O=void 0,t.prev=45,C=E[Symbol.iterator]();!(w=(I=C.next()).done);w=!0)k=I.value,k.studyId,k.patientId,R=k.samples,!k.error&&R.length&&(u=u.concat(R.map(function(e){return c["".concat(e.studyId,":").concat(e.patientId)]=!0,{studyId:e.studyId,sampleId:e.sampleId}})));t.next=53;break;case 49:t.prev=49,t.t1=t.catch(45),P=!0,O=t.t1;case 53:t.prev=53,t.prev=54,w||null==C.return||C.return();case 56:if(t.prev=56,!P){t.next=59;break}throw O;case 59:return t.finish(56);case 60:return t.finish(53);case 61:if(d=d.concat(s.filter(function(e){return!c["".concat(e.study,":").concat(e.id)]})),x=this.selectedStudyToSampleSet.result,u.forEach(function(e){x[e.studyId]&&!r.isEmpty(x[e.studyId])&&(x[e.studyId][e.sampleId]||d.push({id:e.sampleId,study:e.studyId}))}),!d.length){t.next=70;break}if(!this.isSingleNonVirtualStudySelected){t.next=69;break}throw new Error("Invalid ".concat(e.caseIdsMode).concat(d.length>1?"s":""," for the selected cancer study: ").concat(d.map(function(e){return e.id}).join(", ")));case 69:throw new Error("Invalid (study, ".concat(e.caseIdsMode,") pair").concat(d.length>1?"s":"",": ").concat(d.map(function(e){return"(".concat(e.study,", ").concat(e.id,")")}).join(", "),"\n\t\t\t\t\t\t"));case 70:return t.abrupt("return",u);case 71:case"end":return t.stop()}},t,this,[[19,23,27,35],[28,,30,34],[45,49,53,61],[54,,56,60]])}))},500),this.studyListLogic=new w.b(this),this.hierarchyData=Object(p.S)({invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(B.T)(this.getFilteredProfiles("GENESET_SCORE")[0].molecularProfileId,Number(this.volcanoPlotSelectedPercentile.value),0,1,this.defaultSelectedSampleListId);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e,this)}))}}),this.volcanoPlotTableData=Object(p.S)({await:function(){return[n.hierarchyData]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Q(this.hierarchyData.result));case 1:case"end":return e.stop()}},e,this)}))}}),this.map_genesets_selected_volcano=new a.ObservableMap,this.dict_molecularAlterationType_filenameSuffix={MUTATION_EXTENDED:"mutations",COPY_NUMBER_ALTERATION:"cna",MRNA_EXPRESSION:"mrna",METHYLATION:"methylation",METHYLATION_BINARY:"methylation",PROTEIN_LEVEL:"rppa"},this.asyncUrlParams=Object(p.S)({await:function(){return[n.asyncCustomCaseSet]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C(this));case 1:case"end":return e.stop()}},e,this)}))}}),this.initiallySelected={profileIds:!1,sampleListId:!1},this.initialize(t)}var t,n,i;return t=e,(n=[{key:"initialize",value:function(e){var t=this;Object(f.labelMobxPromises)(this),e&&this.setParamsFromUrl(e);var n=localStorage.getItem("legacyStudySubmission");if(localStorage.removeItem("legacyStudySubmission"),n)try{this.setParamsFromLocalStorage(JSON.parse(n))}catch(e){throw"error parseing/setting legacyStudySubmission"}Object(a.reaction)(function(){return t.allSelectedStudyIds},function(){t.studiesHaveChangedSinceInitialization=!0})}},{key:"deleteVirtualStudy",value:function(e){var t=this;F.a.deleteVirtualStudy(e).then(Object(a.action)(function(){t.deletedVirtualStudies.push(e),-1!==t.selectableSelectedStudyIds.indexOf(e)&&(t.selectableSelectedStudyIds=r.difference(t.selectableSelectedStudyIds,[e]))}),Object(a.action)(function(e){}))}},{key:"restoreVirtualStudy",value:function(e){var t=this;F.a.addVirtualStudy(e).then(Object(a.action)(function(){t.deletedVirtualStudies=t.deletedVirtualStudies.filter(function(t){return t!==e})}),Object(a.action)(function(e){}))}},{key:"setStudyIdSelected",value:function(e,t){if(this.forDownloadTab){var n={};t&&(n[e]=t),this._allSelectedStudyIds=a.observable.map(n)}else t?this._allSelectedStudyIds.set(e,!0):this._allSelectedStudyIds.delete(e)}},{key:"setCaseIds",value:function(e){this.selectedSampleListId=oe,this.caseIdsMode="sample",this.caseIds=r.flatten(Object.keys(e).map(function(t){return e[t].map(function(e){return"".concat(t,":").concat(e)})})).join("\n")}},{key:"getGeneSuggestions",value:function(e){return re(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,o.a.getAllGenesUsingGET({alias:e});case 3:return t.t1=t.sent,t.abrupt("return",{alias:t.t0,genes:t.t1});case 5:case"end":return t.stop()}},t)}))}},{key:"getSamplesForStudyAndPatient",value:function(e,t){return o.a.getAllSamplesOfPatientInStudyUsingGET({studyId:e,patientId:t}).then(function(n){return{studyId:e,patientId:t,samples:n,error:void 0}},function(n){return{studyId:e,patientId:t,samples:[],error:n}})}},{key:"isVirtualStudy",value:function(e){return!this.cancerStudyIdsSet.result[e]}},{key:"isDeletedVirtualStudy",value:function(e){return!!(this.isVirtualStudy(e)&&this.deletedVirtualStudies.indexOf(e)>-1)}},{key:"isSingleStudySelected",value:function(e){if(1!==this.selectableSelectedStudyIds.length)return!1;var t=this.selectableSelectedStudyIds[0];return this.isVirtualStudy(t)===e}},{key:"calculateDataTypePriorityCode",value:function(e){var t=e.mutation,n=e.cna;return t&&n?"0":t?"1":n?"2":"0"}},{key:"getFilteredProfiles",value:function(e){var t=this;return this.molecularProfiles.result.filter(function(n){return n.molecularAlterationType==e&&(n.showProfileInAnalysisTab||t.forDownloadTab)})}},{key:"isProfileSelected",value:function(e){return r.includes(this.selectedProfileIds,e)}},{key:"getSelectedProfileIdFromMolecularAlterationType",value:function(e,t){var n=!0,r=!1,o=void 0;try{for(var a,i=(t||this.selectedProfileIds)[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var s=a.value,l=this.dict_molecularProfileId_molecularProfile[s];if(l&&l.molecularAlterationType===e)return l.molecularProfileId}}catch(e){r=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}return""}},{key:"sanitizeQueryParams",value:function(e){return e?decodeURIComponent(e).replace(/\+/g,"\n"):""}},{key:"setParamsFromUrl",value:function(e){var t;"string"==typeof e?t=_.a.parse(e,!0).query:t=e;var n=[t.genetic_profile_ids_PROFILE_MUTATION_EXTENDED,t.genetic_profile_ids_PROFILE_COPY_NUMBER_ALTERATION,t.genetic_profile_ids_PROFILE_MRNA_EXPRESSION,t.genetic_profile_ids_PROFILE_METHYLATION,t.genetic_profile_ids_PROFILE_PROTEIN_EXPRESSION,t.genetic_profile_ids_PROFILE_GENESET_SCORE,t.genetic_profile_ids_PROFILE_GENERIC_ASSAY],o=t.cancer_study_list?t.cancer_study_list.split(","):t.cancer_study_id?[t.cancer_study_id]:[];this.selectableSelectedStudyIds=o,this._defaultSelectedIds=a.observable.map(Object(p.Y)(o)),this._selectedProfileIds=n.every(function(e){return void 0===e})?void 0:n.filter(r.identity),this.zScoreThreshold=t.Z_SCORE_THRESHOLD||"2.0",this.rppaScoreThreshold=t.RPPA_SCORE_THRESHOLD||"2.0",this.dataTypePriorityCode=t.data_priority||t.profileFilter||"0",this.selectedSampleListId=t.case_set_id?t.case_set_id.toString():"",this.caseIds=this.sanitizeQueryParams(t.case_ids),this.caseIdsMode="sample",this.geneQuery=ie(decodeURIComponent(t.gene_list||"")),this.genesetQuery=ie(decodeURIComponent(t[X.a.geneset_list]||"")),this.forDownloadTab="tab_download"===t.tab_index,this.initiallySelected.profileIds=!0,this.initiallySelected.sampleListId=!0}},{key:"setParamsFromLocalStorage",value:function(e){var t=e.case_ids;if(t&&e.case_set_id==oe&&(this.selectedSampleListId=oe,this.caseIdsMode="sample",this.caseIds=t.replace(/\+/g,"\n"),this.initiallySelected.sampleListId=!0),e.cancer_study_list){var n=!0,r=!1,o=void 0;try{for(var a,i=e.cancer_study_list.split(",")[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var s=a.value;"null"!==s&&(this.setStudyIdSelected(s,!0),this._defaultSelectedIds.set(s,!0))}}catch(e){r=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}}}},{key:"selectCancerType",value:function(e,t){var n=e.cancerTypeId;t?r.includes(this.selectedCancerTypeIds,n)?this.selectedCancerTypeIds=r.difference(this.selectedCancerTypeIds,[n]):this.selectedCancerTypeIds=r.union(this.selectedCancerTypeIds,[n]):this.clickAgainToDeselectSingle&&r.isEqual(Object(a.toJS)(this.selectedCancerTypeIds),[n])?this.selectedCancerTypeIds=[]:this.selectedCancerTypeIds=[n]}},{key:"setSearchText",value:function(e){this.clearSelectedCancerType(),this.searchText=e}},{key:"clearSelectedCancerType",value:function(){this.selectedCancerTypeIds=[]}},{key:"selectMolecularProfile",value:function(e,t){var n=this.getFilteredProfiles(e.molecularAlterationType).map(function(e){return e.molecularProfileId});if(this.forDownloadTab)this._selectedProfileIds=[e.molecularProfileId];else{var o=r.difference(this.selectedProfileIds,n);this._selectedProfileIds=t?r.union(o,[e.molecularProfileId]):o}}},{key:"replaceGene",value:function(e,t){this.geneQuery=ie(this.geneQuery.toUpperCase().replace(new RegExp("\\b".concat(e.toUpperCase(),"\\b"),"g"),function(){return t.toUpperCase()}))}},{key:"replaceGeneset",value:function(e,t){this.genesetQuery=ie(this.genesetQuery.toUpperCase().replace(new RegExp("\\b".concat(e.toUpperCase(),"\\b"),"g"),function(){return t.toUpperCase()}))}},{key:"applyGeneSelection",value:function(e){var t=$(r.partition(e.keys(),function(t){return e.get(t)}),2),n=t[0],o=t[1];n=r.difference(n,this.geneIds),o=r.intersection(o,this.geneIds);var a=!0,i=!1,s=void 0;try{for(var l,u=o[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value;this.replaceGene(c,"")}}catch(e){i=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(i)throw s}}this.geneQuery=ie([this.geneQuery].concat(Z(n)).join(" "))}},{key:"addToGenesetSelection",value:function(e){var t=$(r.partition(e.keys(),function(t){return e.get(t)}),2),n=t[0],o=(t[1],r.union(n,this.genesetIds).join(" "));this.genesetQuery=ie(o)}},{key:"applyGenesetSelection",value:function(e){var t=$(r.partition(e.keys(),function(t){return e.get(t)}),2),n=t[0],o=t[1],a=this.genesetQuery;if(n.length>0){var i=[],s=!0,l=!1,u=void 0;try{for(var c,d=n[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var p=c.value;i.push(p)}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}a=i.join(" ")}if(o.length>0){var f=a.split(" "),y=!0,h=!1,m=void 0;try{for(var b,g=o[Symbol.iterator]();!(y=(b=g.next()).done);y=!0){var v=b.value,S=!0,_=!1,E=void 0;try{for(var w,P=f[Symbol.iterator]();!(S=(w=P.next()).done);S=!0){var T=w.value;if(v===T){var O=f.indexOf(T);O>=0&&f.splice(O,1)}}}catch(e){_=!0,E=e}finally{try{S||null==P.return||P.return()}finally{if(_)throw E}}}}catch(e){h=!0,m=e}finally{try{y||null==g.return||g.return()}finally{if(h)throw m}}a=f.join(" ")}a=ie(a),this.genesetQuery=a}},{key:"submit",value:function(){if(this.oql.error)return this.geneQueryErrorDisplayStatus=se.ShouldFocus,this.genesetQueryErrorDisplayStatus=se.ShouldFocus,!1;if(!this.submitEnabled||!this.asyncUrlParams.isComplete)return!1;var e=this.asyncUrlParams.result;return this.forDownloadTab?function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"post",o=document.createElement("form"),a=r;"smart"===r&&(a=Object(E.b)(e,t).length>1800?"post":"get"),o.setAttribute("method",a),o.setAttribute("action",e),n&&o.setAttribute("target",n);for(var i=0,s=Object.keys(t);i<s.length;i++){var l=s[i],u=document.createElement("input");u.setAttribute("type","hidden"),u.setAttribute("name",l),u.setAttribute("value",t[l]),o.appendChild(u)}document.body.appendChild(o),o.submit()}(Object(E.b)("data_download"),e.query,void 0,"smart"):this.singlePageAppSubmitRoutine(e.query),!0}},{key:"openSummary",value:function(){this.summaryEnabled&&Object(E.E)(this.selectableSelectedStudyIds)}},{key:"virtualStudiesMap",get:function(){return r.keyBy(this.userVirtualStudies.result,function(e){return e.id})}},{key:"selectedVirtualStudies",get:function(){var e=this;return r.reduce(this.selectableSelectedStudies,function(t,n){return e.isVirtualStudy(n.studyId)&&void 0!==e.virtualStudiesMap&&e.virtualStudiesMap[n.studyId]&&t.push(e.virtualStudiesMap[n.studyId]),t},[])}},{key:"physicalStudyIdsInSelection",get:function(){var e={},t=!0,n=!1,r=void 0;try{for(var o,a=this.selectableSelectedStudyIds[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value,s=this.virtualStudiesMap[i];s?s.data.studies.forEach(function(t){return e[t.id]=!0}):e[i]=!0}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return Object.keys(e)}},{key:"stateToSerialize",get:function(){return r.pick(this,le)}},{key:"onlyOneReferenceGenome",get:function(){return 1===r.uniq(this.selectableSelectedStudies.map(function(e){return e.referenceGenome})).length}},{key:"allSelectedStudyIds",get:function(){return this._allSelectedStudyIds.keys()}},{key:"selectableSelectedStudyIds",get:function(){var e=this._allSelectedStudyIds.keys(),t=this.selectableStudiesSet.result;return e=e.reduce(function(e,n){return t[n]?e.concat(t[n]):e},[]),e=r.uniq(e),this.forDownloadTab?e.slice(-1):e},set:function(e){this._allSelectedStudyIds=a.observable.map(Object(p.Y)(e))}},{key:"defaultSelectedIds",get:function(){return this._defaultSelectedIds}},{key:"selectedProfileIds",get:function(){var e,t=this;if(void 0!==this._selectedProfileIds)e=this._selectedProfileIds;else{e=[];for(var n=0,r=["MUTATION_EXTENDED","COPY_NUMBER_ALTERATION"];n<r.length;n++){var o=r[n],a=this.getFilteredProfiles(o);a.length&&e.push(a[0].molecularProfileId)}}return this.forDownloadTab?e.slice(0,1):e.filter(function(e){var n=t.dict_molecularProfileId_molecularProfile[e];return n&&n.showProfileInAnalysisTab})},set:function(e){this._selectedProfileIds=e}},{key:"selectedSampleListId",get:function(){return void 0!==this._selectedSampleListId?this._selectedSampleListId:this.defaultSelectedSampleListId},set:function(e){this._selectedSampleListId=e}},{key:"caseIdsMode",get:function(){return this.selectedSampleListId===oe?this._caseIdsMode:"sample"},set:function(e){this._caseIdsMode=e}},{key:"geneQuery",get:function(){return this._geneQuery},set:function(e){this.geneQueryErrorDisplayStatus=se.Unfocused,this._geneQuery=e}},{key:"genesetQuery",get:function(){return this.rawGenesetQuery.toUpperCase()},set:function(e){this.genesetQueryErrorDisplayStatus=se.Unfocused,this.rawGenesetQuery=e}},{key:"maxTreeDepth",get:function(){return this.forDownloadTab&&this._maxTreeDepth>0?1:this._maxTreeDepth},set:function(e){this._maxTreeDepth=e}},{key:"userLoggedIn",get:function(){return Object(p.B)().globalStores.appStore.isLoggedIn}},{key:"treeData",get:function(){return new d({cancerTypes:this.cancerTypes.result,studies:this.cancerStudies.result,priorityStudies:this.priorityStudies,virtualStudies:this.forDownloadTab?[]:this.userVirtualStudies.result,maxTreeDepth:this.maxTreeDepth})}},{key:"selectedCancerTypes",get:function(){var e=this;return this.selectedCancerTypeIds.map(function(t){return e.treeData.map_cancerTypeId_cancerType.get(t)}).filter(r.identity)}},{key:"selectableSelectedStudies",get:function(){var e=this;return this.selectableSelectedStudyIds.map(function(t){return e.treeData.map_studyId_cancerStudy.get(t)}).filter(r.identity)}},{key:"isSingleVirtualStudySelected",get:function(){return this.isSingleStudySelected(!0)}},{key:"isSingleNonVirtualStudySelected",get:function(){return this.isSingleStudySelected(!1)}},{key:"isMultipleNonVirtualStudiesSelected",get:function(){var e=this;return this.selectableSelectedStudyIds.filter(function(t){return!e.isVirtualStudy(t)}).length>1}},{key:"getOverlappingStudiesMap",get:function(){var e,t,n=(e=this.selectableSelectedStudies,t=r.reduce(e,function(e,t){if(/_tcga/.test(t.studyId)){var n=t.studyId.replace(/(_\d\d\d\d|_pub|(_pub\d\d\d\d)|_pan_can_atlas_\d\d\d\d)$/g,"");n&&(n in e?e[n].push(t):e[n]=[t])}return e},{}),r.filter(t,function(e){return e.length>1}));return r.chain(n).flatten().keyBy(function(e){return e.studyId}).value()}},{key:"isVirtualStudySelected",get:function(){var e=!1,t=!0,n=!1,r=void 0;try{for(var o,a=this.selectableSelectedStudyIds[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value;if(this.virtualStudiesMap[i]){e=!0;break}}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return e}},{key:"isVirtualStudyQuery",get:function(){return 0!==this.selectableSelectedStudyIds.length&&(this.selectableSelectedStudyIds.length>1||this.isSingleVirtualStudySelected)}},{key:"dataTypePriorityCode",set:function(e){switch(e){default:case"0":this.dataTypePriority={mutation:!0,cna:!0};break;case"1":this.dataTypePriority={mutation:!0,cna:!1};break;case"2":this.dataTypePriority={mutation:!1,cna:!0}}},get:function(){return this.calculateDataTypePriorityCode(this.dataTypePriority)}},{key:"dict_molecularProfileId_molecularProfile",get:function(){return r.keyBy(this.molecularProfiles.result,function(e){return e.molecularProfileId})}},{key:"isGenesetProfileSelected",get:function(){var e=!1;if(this.getFilteredProfiles("GENESET_SCORE")[0])for(var t in this.selectedProfileIds)this.selectedProfileIds[t]===this.getFilteredProfiles("GENESET_SCORE")[0].molecularProfileId&&(e=!0);return e}},{key:"defaultProfilesForOql",get:function(){if(this.molecularProfilesInSelectedStudies.isComplete)return Object(B.R)(this.molecularProfilesInSelectedStudies.result)}},{key:"defaultMutationProfile",get:function(){return this.defaultProfilesForOql&&this.defaultProfilesForOql[O.a.MUTATION_EXTENDED]}},{key:"defaultCnaProfile",get:function(){return this.defaultProfilesForOql&&this.defaultProfilesForOql[O.a.COPY_NUMBER_ALTERATION]}},{key:"defaultMrnaProfile",get:function(){return this.defaultProfilesForOql&&this.defaultProfilesForOql[O.a.MRNA_EXPRESSION]}},{key:"defaultProtProfile",get:function(){return this.defaultProfilesForOql&&this.defaultProfilesForOql[O.a.PROTEIN_LEVEL]}},{key:"defaultSelectedSampleListId",get:function(){if(this.isVirtualStudyQuery)return"all";if(1===this.selectableSelectedStudyIds.length){var e=this.selectableSelectedStudyIds[0],t=this.getSelectedProfileIdFromMolecularAlterationType("MUTATION_EXTENDED"),n=this.getSelectedProfileIdFromMolecularAlterationType("COPY_NUMBER_ALTERATION"),r=this.getSelectedProfileIdFromMolecularAlterationType("MRNA_EXPRESSION"),o=this.getSelectedProfileIdFromMolecularAlterationType("PROTEIN_LEVEL"),a=e+"_all";return t&&n&&!r&&!o?a=e+"_cnaseq":!t||n||r||o?t||!n||r||o?t||n||!r||o?(t||n)&&r&&!o?a=e+"_3way_complete":t||n||r||!o||(a=e+"_rppa"):this.isProfileSelected(e+"_mrna_median_Zscores")?a=e+"_mrna":this.isProfileSelected(e+"_rna_seq_mrna_median_Zscores")?a=e+"_rna_seq_mrna":this.isProfileSelected(e+"_rna_seq_v2_mrna_median_Zscores")&&(a=e+"_rna_seq_v2_mrna"):a=e+"_cna":a=e+"_sequenced",this.dict_sampleListId_sampleList[a]||(a===e+"_cnaseq"?a=e+"_cna_seq":a===e+"_3way_complete"&&(a=e+"_complete")),this.dict_sampleListId_sampleList[a]||(a=e+"_all"),a}}},{key:"dict_sampleListId_sampleList",get:function(){return r.keyBy(this.sampleLists.result,function(e){return e.sampleListId})}},{key:"oql",get:function(){try{return{query:this.geneQuery?Object(h.g)(this.geneQuery.trim().toUpperCase()):[],error:void 0}}catch(o){if("SyntaxError"!==o.name)return{query:[],error:{start:0,end:0,message:"Unexpected ".concat(o)}};var e,t,n,r=o.location.start.offset;return r===this.geneQuery.length?(e="after",t=r-1,n=r):0===r?(e="before",t=r,n=r+1):(e="at",t=r,n=r+1),{query:[],error:{start:t,end:n,message:"OQL syntax error ".concat(e," selected character; please fix and submit again.")}}}}},{key:"geneIds",get:function(){try{return this.oql.query.map(function(e){return e.gene})}catch(e){return[]}}},{key:"genesetIdsQuery",get:function(){try{return{query:this.genesetQuery?this.genesetQuery.split(/[ \n]+/):[],error:void 0}}catch(o){if("SyntaxError"!==o.name)return{query:[],error:{start:0,end:0,message:"Unexpected ".concat(o)}};var e,t,n,r=o.location.start.offset;return r===this.geneQuery.length?(e="after",t=r-1,n=r):0===r?(e="before",t=r,n=r+1):(e="at",t=r,n=r+1),{query:[],error:{start:t,end:n,message:"OQL syntax error ".concat(e," selected character; please fix and submit again.")}}}}},{key:"genesetIds",get:function(){return this.genesetIdsQuery.query}},{key:"minYVolcanoPlot",get:function(){return this.volcanoPlotTableData.result&&(e=this.volcanoPlotTableData.result).length>0?r.minBy(e,function(e){return e.representativePvalue}).representativePvalue:void 0;var e}},{key:"volcanoPlotGraphData",get:function(){return this.volcanoPlotTableData.result?(e=this.volcanoPlotTableData.result,t=this.map_genesets_selected_volcano,e.length>0?e.map(function(e){var n=e.representativeScore,r=e.representativePvalue,o=e.name;return{x:n,y:-Math.log(r)/Math.log(10),fill:t.get(o)?"tomato":"3786C2"}}):void 0):void 0;var e,t}},{key:"submitEnabled",get:function(){return!this.submitError&&(this.genes.isComplete||this.genesets.isComplete)&&this.asyncUrlParams.isComplete||!!this.oql.error||!!this.genesetIdsQuery.error}},{key:"summaryEnabled",get:function(){return this.selectableSelectedStudyIds.length>0}},{key:"hasSelectedStudies",get:function(){return this.selectableSelectedStudyIds.length>0}},{key:"oqlMessages",get:function(){return Object(B.U)(this.oql.query)}},{key:"approxSampleCount",get:function(){var e=this.selectedSampleListId;if(!e)return this.profiledSamplesCount.result.all;if(e===oe)return this.caseIds?Math.max(this.caseIds.trim().split(/\s+/g).length,1):1;var t=this.sampleLists.result.find(function(t){return t.sampleListId===e});return t?t.sampleCount:e in this.profiledSamplesCount.result?this.profiledSamplesCount.result[e]:this.profiledSamplesCount.result.all}},{key:"isQueryLimitReached",get:function(){return this.oql.query.length*this.approxSampleCount>g.b.serverConfig.query_product_limit}},{key:"geneLimit",get:function(){return Math.floor(g.b.serverConfig.query_product_limit/this.approxSampleCount)}},{key:"isMixedReferenceGenome",get:function(){var e=this;if(this.physicalStudyIdsInSelection&&this.physicalStudiesSet.result){var t=r.map(this.physicalStudyIdsInSelection,function(t){return e.physicalStudiesSet.result[t]});return Object(J.c)(t)}}},{key:"alterationTypesInOQL",get:function(){return Object(B.P)(this.oql.query)}},{key:"submitError",get:function(){if(!this.selectableSelectedStudyIds.length)return"Please select one or more cancer studies.";if(this.isSingleNonVirtualStudySelected){if(!this.selectedProfileIds.length)return"Please select one or more molecular profiles.";if(this.alterationTypesInOQL.haveMutInQuery&&!this.defaultMutationProfile)return"Mutation data query specified in OQL, but no mutation profile is available for the selected study.";if(this.alterationTypesInOQL.haveCnaInQuery&&!this.defaultCnaProfile)return"CNA data query specified in OQL, but no CNA profile is available in the selected study.";if(this.alterationTypesInOQL.haveMrnaInQuery&&!this.defaultMrnaProfile)return"mRNA expression data query specified in OQL, but no mRNA profile is available in the selected study.";if(this.alterationTypesInOQL.haveProtInQuery&&!this.defaultProtProfile)return"Protein level data query specified in OQL, but no protein level profile is available in the selected study."}else if(!this.dataTypePriority.mutation&&!this.dataTypePriority.cna)return"Please select one or more molecular profiles.";if(this.selectableSelectedStudyIds.length&&this.selectedSampleListId===oe){if(this.asyncCustomCaseSet.isComplete&&!this.asyncCustomCaseSet.result.length)return"Please enter at least one ID in your custom case set.";if(this.asyncCustomCaseSet.error)return"Error in custom case set."}else{if(this.alterationTypesInOQL.haveMrnaInQuery&&this.selectableSelectedStudyIds.length>1)return"Expression filtering in the gene list (the EXP command) is not supported when doing cross cancer queries.";if(this.alterationTypesInOQL.haveProtInQuery&&this.selectableSelectedStudyIds.length>1)return"Protein level filtering in the gene list (the PROT command) is not supported when doing cross cancer queries."}if(0!==this.selectedProfileIds.length){if(1===this.selectedProfileIds.length){if(this.isGenesetProfileSelected){if(!this.genesetQuery.length&&!this.oql.query.length)return"Please enter one or more gene symbols and gene sets.";if(!this.genesetQuery.length)return"Please enter one or more gene sets or deselect gene set profiles.";if(!this.oql.query.length)return"Please enter one or more gene symbols."}else if(!this.oql.query.length)return"Please enter one or more gene symbols."}else if(this.isGenesetProfileSelected){if(!this.genesetQuery.length&&!this.oql.query.length)return"Please enter one or more gene symbols and gene sets.";if(!this.oql.query.length)return"Please enter one or more gene symbols."}else if(!this.oql.query.length)return"Please enter one or more gene symbols."}else if(!this.oql.query.length)return"Please enter one or more gene symbols.";if(this.isQueryLimitReached)return"Please limit your queries to ".concat(this.geneLimit," genes or fewer.");if(this.genes.result.suggestions.length)return"Please edit the gene symbols.";var e=r.groupBy(this.genes.result.found,function(e){return e.hugoGeneSymbol});return r.some(e,function(e){return e.length>1})?"Please edit the gene symbols.":void 0}},{key:"downloadDataFilename",get:function(){var e=1===this.selectableSelectedStudyIds.length&&this.treeData.map_studyId_cancerStudy.get(this.selectableSelectedStudyIds[0]),t=this.dict_molecularProfileId_molecularProfile[this.selectedProfileIds[0]];if(!this.forDownloadTab||!e||!t)return"cbioportal-data.txt";var n=this.dict_molecularAlterationType_filenameSuffix[t.molecularAlterationType]||t.molecularAlterationType.toLowerCase();return"cbioportal-".concat(e.studyId,"-").concat(n,".txt")}},{key:"molecularProfilesInStudyCache",get:function(){return new V}},{key:"sampleListsInStudyCache",get:function(){return new z}}])&&ee(t.prototype,n),i&&ee(t,i),e}();ne([a.observable],ue.prototype,"studiesHaveChangedSinceInitialization",void 0),ne([a.observable],ue.prototype,"deletedVirtualStudies",void 0),ne([a.computed],ue.prototype,"virtualStudiesMap",null),ne([a.computed],ue.prototype,"selectedVirtualStudies",null),ne([a.computed],ue.prototype,"physicalStudyIdsInSelection",null),ne([a.computed],ue.prototype,"stateToSerialize",null),ne([a.computed],ue.prototype,"onlyOneReferenceGenome",null),ne([a.observable],ue.prototype,"forDownloadTab",void 0),ne([a.observable],ue.prototype,"transposeDataMatrix",void 0),ne([a.observable],ue.prototype,"searchText",void 0),ne([a.observable],ue.prototype,"_allSelectedStudyIds",void 0),ne([a.computed],ue.prototype,"allSelectedStudyIds",null),ne([a.computed],ue.prototype,"selectableSelectedStudyIds",null),ne([a.action],ue.prototype,"setStudyIdSelected",null),ne([a.computed],ue.prototype,"defaultSelectedIds",null),ne([a.observable],ue.prototype,"dataTypePriority",void 0),ne([a.observable.ref],ue.prototype,"_selectedProfileIds",void 0),ne([a.computed],ue.prototype,"selectedProfileIds",null),ne([a.observable],ue.prototype,"zScoreThreshold",void 0),ne([a.observable],ue.prototype,"rppaScoreThreshold",void 0),ne([a.observable],ue.prototype,"_selectedSampleListId",void 0),ne([a.computed],ue.prototype,"selectedSampleListId",null),ne([a.observable],ue.prototype,"caseIds",void 0),ne([a.observable],ue.prototype,"_defaultStudySampleMap",void 0),ne([a.observable],ue.prototype,"_caseIdsMode",void 0),ne([a.computed],ue.prototype,"caseIdsMode",null),ne([a.observable],ue.prototype,"_geneQuery",void 0),ne([a.observable],ue.prototype,"rawGenesetQuery",void 0),ne([a.observable],ue.prototype,"geneQueryErrorDisplayStatus",void 0),ne([a.observable],ue.prototype,"genesetQueryErrorDisplayStatus",void 0),ne([a.observable],ue.prototype,"showMutSigPopup",void 0),ne([a.observable],ue.prototype,"showGisticPopup",void 0),ne([a.observable],ue.prototype,"showGenesetsHierarchyPopup",void 0),ne([a.observable],ue.prototype,"showGenesetsVolcanoPopup",void 0),ne([a.observable],ue.prototype,"priorityStudies",void 0),ne([a.observable],ue.prototype,"showSelectedStudiesOnly",void 0),ne([a.observable.shallow],ue.prototype,"selectedCancerTypeIds",void 0),ne([a.observable],ue.prototype,"clickAgainToDeselectSingle",void 0),ne([a.observable],ue.prototype,"searchExampleMessage",void 0),ne([a.observable],ue.prototype,"volcanoPlotSelectedPercentile",void 0),ne([a.observable],ue.prototype,"_maxTreeDepth",void 0),ne([a.computed],ue.prototype,"maxTreeDepth",null),ne([a.computed],ue.prototype,"userLoggedIn",null),ne([a.action],ue.prototype,"setCaseIds",null),ne([b.a],ue.prototype,"getGeneSuggestions",null),ne([b.a],ue.prototype,"getSamplesForStudyAndPatient",null),ne([f.cached],ue.prototype,"treeData",null),ne([a.computed],ue.prototype,"selectedCancerTypes",null),ne([a.computed],ue.prototype,"selectableSelectedStudies",null),ne([a.computed],ue.prototype,"isSingleVirtualStudySelected",null),ne([a.computed],ue.prototype,"isSingleNonVirtualStudySelected",null),ne([a.computed],ue.prototype,"isMultipleNonVirtualStudiesSelected",null),ne([a.computed],ue.prototype,"getOverlappingStudiesMap",null),ne([a.computed],ue.prototype,"isVirtualStudySelected",null),ne([a.computed],ue.prototype,"isVirtualStudyQuery",null),ne([a.computed],ue.prototype,"dataTypePriorityCode",null),ne([a.computed],ue.prototype,"dict_molecularProfileId_molecularProfile",null),ne([a.computed],ue.prototype,"defaultProfilesForOql",null),ne([a.computed],ue.prototype,"defaultMutationProfile",null),ne([a.computed],ue.prototype,"defaultCnaProfile",null),ne([a.computed],ue.prototype,"defaultMrnaProfile",null),ne([a.computed],ue.prototype,"defaultProtProfile",null),ne([a.computed],ue.prototype,"defaultSelectedSampleListId",null),ne([a.computed],ue.prototype,"dict_sampleListId_sampleList",null),ne([a.computed],ue.prototype,"oql",null),ne([a.computed],ue.prototype,"geneIds",null),ne([a.computed],ue.prototype,"genesetIdsQuery",null),ne([a.computed],ue.prototype,"genesetIds",null),ne([a.computed],ue.prototype,"minYVolcanoPlot",null),ne([a.observable],ue.prototype,"map_genesets_selected_volcano",void 0),ne([a.computed],ue.prototype,"volcanoPlotGraphData",null),ne([a.computed],ue.prototype,"submitEnabled",null),ne([a.computed],ue.prototype,"summaryEnabled",null),ne([a.computed],ue.prototype,"hasSelectedStudies",null),ne([a.computed],ue.prototype,"oqlMessages",null),ne([a.computed],ue.prototype,"approxSampleCount",null),ne([a.computed],ue.prototype,"isQueryLimitReached",null),ne([a.computed],ue.prototype,"geneLimit",null),ne([a.computed],ue.prototype,"isMixedReferenceGenome",null),ne([a.computed],ue.prototype,"alterationTypesInOQL",null),ne([a.computed],ue.prototype,"submitError",null),ne([a.computed],ue.prototype,"downloadDataFilename",null),ne([a.action],ue.prototype,"setParamsFromUrl",null),ne([a.action],ue.prototype,"setParamsFromLocalStorage",null),ne([a.action],ue.prototype,"selectCancerType",null),ne([a.action],ue.prototype,"setSearchText",null),ne([a.action],ue.prototype,"clearSelectedCancerType",null),ne([a.action],ue.prototype,"selectMolecularProfile",null),ne([a.action],ue.prototype,"replaceGene",null),ne([a.action],ue.prototype,"replaceGeneset",null),ne([a.action],ue.prototype,"applyGeneSelection",null),ne([a.action],ue.prototype,"addToGenesetSelection",null),ne([a.action],ue.prototype,"applyGenesetSelection",null),ne([a.action],ue.prototype,"submit",null),ne([a.action],ue.prototype,"openSummary",null),ne([f.cached],ue.prototype,"molecularProfilesInStudyCache",null),ne([f.cached],ue.prototype,"sampleListsInStudyCache",null);var ce=Object(v.a)(ue)},605:function(e,t,n){"use strict";n.d(t,"a",function(){return E}),n.d(t,"b",function(){return w});var r=n(0),o=n(4),a=n(9),i=n.n(a),s=(n(666),n(8)),l=n(101),u=n(2),c=n(7),d=n(649);function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}function h(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var S=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":v(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},_=function(e){function t(){var e;return p(this,t),(e=h(this,m(t).apply(this,arguments))).renderedOnce=!1,e}return b(t,r["Component"]),y(t,[{key:"render",value:function(){var e=this;return this.renderedOnce||setTimeout(function(){return e.renderedOnce=!0}),r.createElement("div",{className:this.props.className},this.renderedOnce&&this.props.children,!this.renderedOnce&&(this.props.loadingState||null))}}]),t}();S([u.observable],_.prototype,"renderedOnce",void 0),_=S([c.observer],_);var E=function(e){function t(){return p(this,t),h(this,m(t).apply(this,arguments))}return b(t,r["Component"]),y(t,[{key:"componentDidMount",value:function(){this.props.onTabDidMount&&this.props.onTabDidMount(this.div)}},{key:"componentWillUnmount",value:function(){this.props.onTabUnmount&&this.props.onTabUnmount(this.div)}},{key:"assignRef",value:function(e){this.div=e}},{key:"render",value:function(){var e=this;return r.createElement("div",{ref:function(t){return e.div=t},className:i()({"msk-tab":!0,hiddenByPosition:!!this.props.inactive},this.props.className)},this.props.children)}}]),t}();S([s.default],E.prototype,"assignRef",null);var w=function(e){function t(e){var n;return p(this,t),(n=h(this,m(t).call(this,e))).shownTabs=[],n.tabRefs=[],n.tabIdToNavTabWidth={},n.needToRecomputeNavTabWidths=!0,n.tabClickHandlers=Object(d.a)(function(e,t){e.preventDefault(),n.setActiveTab(t.id,t.datum)}),n.state={currentPage:1,pageBreaks:[]},n}return b(t,r["Component"]),y(t,[{key:"cloneTab",value:function(e,t,n){return n?r.cloneElement(e,{inactive:t},this.props.loadingComponent):r.cloneElement(e,{inactive:t})}},{key:"setActiveTab",value:function(e,t){this.props.onTabClick&&this.props.onTabClick(e,t)}},{key:"navTabsRefHandler",value:function(e){this.navTabsRef=e}},{key:"tabRefHandler",value:function(e,t){e&&t&&this.tabRefs.push({id:e,element:t})}},{key:"nextPage",value:function(){this.setState({currentPage:this.state.currentPage+1})}},{key:"prevPage",value:function(){this.setState({currentPage:this.state.currentPage-1})}},{key:"render",value:function(){var e=this;if(this.props.children&&r.Children.count(this.props.children)){var t,n=this.props.children,a=r.Children.toArray(n),s=e.props.activeTabId&&o.some(a,function(t){return t.props.id===e.props.activeTabId})?e.props.activeTabId:a[0].props.id;return t=o.reduce(a,function(t,n){return n.props.hide||(n.props.id===s?(e.shownTabs.push(n.props.id),t.push(e.cloneTab(n,!1))):(!1===n.props.unmountOnHide||void 0===n.props.unmountOnHide&&!1===e.props.unmountOnHide)&&o.includes(e.shownTabs,n.props.id)&&t.push(e.cloneTab(n,!0))),t},[]),r.createElement("div",{id:this.props.id?this.props.id:"",className:i()("msk-tabs","posRelative",this.props.className)},this.navTabs(n,s),r.createElement(_,{className:"tab-content",loadingState:r.createElement(l.a,{isLoading:!0,center:!0,size:"big"})},t))}return null}},{key:"navTabs",value:function(e,t){this.tabRefs=[];var n=this.tabPages(e,t),o=this.state.pageBreaks.length+1,a=this.state.currentPage>1?r.createElement("li",{key:"prevPage",style:{cursor:"pointer"}},r.createElement("a",{onClick:this.prevPage.bind(this)},r.createElement("i",{className:"fa fa-chevron-left",style:this.props.arrowStyle}))):null,s=this.state.currentPage<o?r.createElement("li",{key:"nextPage",style:{cursor:"pointer"}},r.createElement("a",{onClick:this.nextPage.bind(this)},r.createElement("i",{className:"fa fa-chevron-right",style:this.props.arrowStyle}))):null,l=this.props.tabButtonStyle||"tabs";return r.createElement("ul",{ref:this.navTabsRefHandler.bind(this),className:i()("nav","nav-".concat(l))},a,n[this.state.currentPage-1],s)}},{key:"tabPages",value:function(e,t){var n=this,o=[[]],a=1;return r.Children.forEach(e,function(e){if(e&&!e.props.hide){var s=t===e.props.id?"active":"";n.props.getPaginationWidth&&n.state.pageBreaks.length>0&&n.state.pageBreaks[a-1]===e.props.id&&(o[++a-1]=[]);var l=null;if(e.props.onClickClose){var u=e.props.onClickClose;l=r.createElement("div",{className:"closeButton",onClick:function(t){t.stopPropagation(),u(e.props.id)}},r.createElement("i",{className:"fa fa-md fa-times-circle"}))}o[a-1].push(r.createElement("li",{key:e.props.id,style:{cursor:"pointer"},ref:n.tabRefHandler.bind(n,e.props.id),className:s},r.createElement("a",{className:i()("tabAnchor","tabAnchor_".concat(e.props.id),e.props.anchorClassName),onClick:n.tabClickHandlers(e.props),href:n.props.getTabHref&&n.props.getTabHref(e.props.id),style:e.props.anchorStyle},e.props.linkText,l)))}}),o}},{key:"componentWillReceiveProps",value:function(e){o.isEqual(t.getVisibleTabIds(e.children),t.getVisibleTabIds(this.props.children))||(this.needToRecomputeNavTabWidths=!0)}},{key:"componentDidMount",value:function(){var e=this;this.computeNavTabWidths(),this.needToRecomputeNavTabWidths=!1,this.widthReaction=Object(u.autorun)(function(){e.props.getPaginationWidth&&(e.props.getPaginationWidth(),e.initPaging())})}},{key:"componentWillUnmount",value:function(){this.widthReaction()}},{key:"componentDidUpdate",value:function(){this.needToRecomputeNavTabWidths&&(this.computeNavTabWidths(),this.needToRecomputeNavTabWidths=!1,this.initPaging())}},{key:"computeNavTabWidths",value:function(){var e=this;o.each(this.tabRefs,function(t){e.tabIdToNavTabWidth[t.id]=t.element.offsetWidth}),window.test=this.tabIdToNavTabWidth}},{key:"initPaging",value:function(){if(this.props.getPaginationWidth){var e=this.findPageBreaks(),t=this.findCurrentPage(e);this.setState({currentPage:t,pageBreaks:e})}}},{key:"findCurrentPage",value:function(e){var t=this,n=1,r=!1;return this.props.activeTabId&&e.length>0&&o.each(this.tabRefs,function(o){if(o.id===e[n-1]&&n++,o.id===t.props.activeTabId)return r=!0,!1}),r?n:1}},{key:"findPageBreaks",value:function(){var e=this,t=[];if(this.needToRecomputeNavTabWidths)return[];var n=this.props.getPaginationWidth&&this.props.getPaginationWidth()||0;if(n>0){var o=0;r.Children.forEach(this.props.children,function(r,a){if(r&&r.props.id in e.tabIdToNavTabWidth&&(o+=e.tabIdToNavTabWidth[r.props.id],0!==a)){o>n-50&&(t.push(r.props.id),o=e.tabIdToNavTabWidth[r.props.id])}})}return t}}],[{key:"getVisibleTabIds",value:function(e){return r.Children.map(e,function(e){return e&&!e.props.hide?e.props.id:null}).filter(function(e){return null!==e})}}]),t}();w.defaultProps={unmountOnHide:!0,loadingComponent:r.createElement(l.a,{isLoading:!0,center:!0,size:"big"})},S([s.default],w.prototype,"initPaging",null)},608:function(e,t,n){"use strict";n.d(t,"a",function(){return y});var r=n(0),o=n(691),a=n.n(o),i=n(9),s=n.n(i);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=d(this,p(t).apply(this,arguments))).handleInputRef=function(t){e.input=t,e.props.inputProps&&"function"==typeof e.props.inputProps.ref&&e.props.inputProps.ref(t)},e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){this.input.indeterminate=!!this.props.indeterminate}},{key:"componentDidUpdate",value:function(){this.input.indeterminate=!!this.props.indeterminate}},{key:"render",value:function(){var e=this.props.labelProps&&this.props.labelProps.className,t=s()(a.a.labeledCheckbox,e);return r.createElement("label",u({className:t},this.props.labelProps),r.createElement("input",u({type:this.props.inputProps&&this.props.inputProps.type||"checkbox",checked:this.props.checked,onChange:this.props.onChange,disabled:this.props.disabled},this.props.inputProps,{ref:this.handleInputRef})),this.props.children)}}])&&c(n.prototype,o),i&&c(n,i),t}()},609:function(e,t,n){e.exports=n(16)(1037)},648:function(e,t,n){"use strict";n.d(t,"b",function(){return v}),n.d(t,"a",function(){return S});var r=n(0),o=n(938),a=n.n(o),i=n(9),s=n.n(i);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function p(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var b=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function g(e,t){var n=e.padded,o=e.overflow,i=e.flex,l=b(e,["padded","overflow","flex"]),u=Object.assign(Object.assign({flex:i,display:"flex",overflow:o?"visible":"auto"},e.style),{flexDirection:t}),c=s()(e.className,a.a[t],n&&a.a.padded);return r.createElement("div",m({},l,{style:u,className:c}))}var v=function(e){function t(){return u(this,t),p(this,f(t).apply(this,arguments))}return y(t,r["Component"]),d(t,[{key:"render",value:function(){return g(this.props,"row")}}]),t}(),S=function(e){function t(){return u(this,t),p(this,f(t).apply(this,arguments))}return y(t,r["Component"]),d(t,[{key:"render",value:function(){return g(this.props,"column")}}]),t}()},649:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.inputToKey=t,this.inputToOutput=n,this.memo={}}var t,n,o;return t=e,(n=[{key:"get",value:function(e){var t=this.inputToKey(e);return this.memo[t]=this.memo[t]||this.inputToOutput(e),this.memo[t]}},{key:"has",value:function(e){return this.inputToKey(e)in this.memo}}])&&r(t.prototype,n),o&&r(t,o),e}();function a(e){return JSON.stringify(e,Object.keys(e).sort())}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,n=new o(t,function(t){return function(n){return e(n,t)}});return function(e){return n.get(e)}}n.d(t,"a",function(){return i})},650:function(e,t,n){"use strict";var r=n(0),o=n(7),a=n(946),i=n.n(a),s=n(9),l=n.n(s),u=n(626),c=n.n(u),d=n(947),p=n.n(d);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},S=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),m(this,b(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.error,n=e.children,o=e.className,a=v(e,["error","children","className"]);return r.createElement("div",y({className:l()(o,p.a.error)},a),r.createElement("span",{className:p.a.message},r.createElement(c.a,{className:p.a.icon,name:"exclamation-circle"}),t.message+""),n)}}])&&h(n.prototype,o),a&&h(n,a),t}(),_=n(101);function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var I=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":C(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},k=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},R=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),P(this,T(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.promises,n=e.children,o=e.className,a=e.secondaryComponent,s=k(e,["promises","children","className","secondaryComponent"]);return r.createElement("div",E({className:l()(o,i.a.SectionHeader)},s),r.createElement("h2",null,n,!(!t||!t.some(function(e){return e.isPending}))&&r.createElement(_.a,{isLoading:!0,size:"small"})),!!a&&a,t&&t.map(function(e){return!!e.error&&r.createElement(S,{className:i.a.error,error:e.error})}))}}])&&w(n.prototype,o),a&&w(n,a),t}();R=I([o.observer],R);t.a=R},661:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__3xfuL",framedImage:"styles-module__framedImage__3MWaq",validationBubbleBase:"styles-module__validationBubbleBase__1bQNI",genesSelection:"styles-module__genesSelection__17BpH",GeneSymbolValidator:"styles-module__GeneSymbolValidator__1K2q1",validBubble:"styles-module__validBubble__2iAqd",invalidBubble:"styles-module__invalidBubble__3Hs4P",suggestionBubble:"styles-module__suggestionBubble__1TnzN",topRow:"styles-module__topRow__2F7H0",default:"styles-module__default__3ZAms",oncoprintHeatmap:"styles-module__oncoprintHeatmap__lvPrO",studyView:"styles-module__studyView__3TtjM",studyViewFocus:"styles-module__studyViewFocus__1CfEf",nowrap:"styles-module__nowrap__1GVDf",icon:"styles-module__icon__2RDD6",pendingMessage:"styles-module__pendingMessage__1gVAe",oqlNotice:"styles-module__oqlNotice__3naFJ",errorMessage:"styles-module__errorMessage__3pZ_v",noChoiceLabel:"styles-module__noChoiceLabel__2sdit",singleChoiceLabel:"styles-module__singleChoiceLabel__178JA",multiChoiceLabel:"styles-module__multiChoiceLabel__1PPmp"}},662:function(e,t,n){"use strict";var r=n(0),o=n(4),a=n(7),i=n(9),s=n.n(i),l=n(661),u=n.n(l),c=n(591),d=n.n(c),p=n(2),f=n(594),y=n(588);function h(e){try{return{query:e?Object(y.g)(e.trim().toUpperCase()):[],error:void 0}}catch(a){if("SyntaxError"!==a.name)return{query:[],error:{start:0,end:0,message:"Unexpected ".concat(a)}};var t,n,r,o=a.location.start.offset;return o===e.length?(t="after",n=o-1,r=o):0===o?(t="before",n=o,r=o+1):(t="at",n=o,r=o+1),{query:[],error:{start:n,end:r,message:"OQL syntax error ".concat(t," selected character; please fix and submit again.")}}}}n(728);var m=n(3),b=n(178),g=n(104),v=n.n(g),S=n(626),_=n.n(S),E=n(56);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var k=function(e){if(0==e.genes.length){return r.createElement("div",{className:u.a.suggestionBubble,title:"Could not find gene symbol. Click to remove it from the gene list.",onClick:function(){return e.replaceGene(e.alias,"")}},r.createElement(_.a,{className:u.a.icon,name:"times-circle"}),r.createElement("span",{className:u.a.noChoiceLabel},e.alias))}if(1==e.genes.length){var t=e.genes[0].hugoGeneSymbol,n="'".concat(e.alias,"' is a synonym for '").concat(t,"'. Click here to replace it with the official symbol.");return r.createElement("div",{className:u.a.suggestionBubble,title:n,onClick:function(){return e.replaceGene(e.alias,t)}},r.createElement(_.a,{className:u.a.icon,name:"question"}),r.createElement("span",{className:u.a.singleChoiceLabel},e.alias),r.createElement("span",null,": ".concat(t)))}var o="Ambiguous gene symbol. Click on one of the alternatives to replace it.",a=e.genes.map(function(e){return{label:e.hugoGeneSymbol,value:e.hugoGeneSymbol}});return r.createElement("div",{className:u.a.suggestionBubble,title:o},r.createElement(_.a,{className:u.a.icon,name:"question"}),r.createElement("span",{className:u.a.multiChoiceLabel},e.alias),r.createElement("span",null,":",""),r.createElement(E.DropdownButton,{bsStyle:o.toLowerCase(),bsSize:"xsmall",title:"Select symbol",id:"geneReplace_".concat(e.alias)},a.map(function(t,n){return r.createElement(E.MenuItem,{onClick:function(){e.replaceGene(e.alias,t.value)},eventKey:n+1},t.label)})))},R=function(e){if(e.oql instanceof Error)return r.createElement("div",{className:u.a.GeneSymbolValidator},r.createElement("span",{className:u.a.errorMessage},"Cannot validate gene symbols because of invalid OQL.","",r.createElement("a",{className:"underline",onMouseDown:function(t){t.preventDefault(),e.highlightError()}},"Click to highlight error")));if(0===e.oql.query.length)return null;if(!e.errorMessageOnly&&e.validatingGenes)return r.createElement("div",{className:u.a.GeneSymbolValidator},r.createElement("span",{className:u.a.pendingMessage},"Validating gene symbols..."));if(e.genes instanceof Error)return r.createElement("div",{className:u.a.GeneSymbolValidator},r.createElement("span",{className:u.a.pendingMessage},"Unable to validate gene symbols."));if(e.genes.suggestions.length>0)return r.createElement("div",{className:u.a.GeneSymbolValidator},r.createElement("div",{className:u.a.invalidBubble,title:"Please edit the gene symbols."},r.createElement(_.a,{className:u.a.icon,name:"exclamation-circle"}),r.createElement("span",null,"Invalid gene symbols.")),e.genes.suggestions.map(function(t,n){return r.createElement(k,{key:n,genes:t.genes,alias:t.alias,replaceGene:e.replaceGene})}));var t,n,a,i=o.groupBy(e.genes.found,function(e){return e.hugoGeneSymbol}),l=o.reduce(i,function(e,t,n){return t.length>1&&e.push(n),e},[]);return l.length>0?r.createElement("div",{className:u.a.GeneSymbolValidator},r.createElement("div",{className:u.a.invalidBubble,title:"Please edit the gene symbols."},r.createElement(_.a,{className:u.a.icon,name:"exclamation-circle"}),r.createElement("span",null,"The portal does not currently support the following gene(s):")),l.map(function(t,n){return r.createElement(k,{key:n,genes:[],alias:t,replaceGene:e.replaceGene})})):e.errorMessageOnly?null:r.createElement("div",{className:s()(u.a.GeneSymbolValidator,(t={},n=u.a.nowrap,a=!e.wrapTheContent,n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t))},r.createElement("div",{className:u.a.validBubble,title:"You can now submit the list."},r.createElement(_.a,{className:u.a.icon,name:"check-circle"}),r.createElement("span",null,"All gene symbols are valid.")))},x=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),O(this,C(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return this.props.children?r.createElement("div",{id:"wideGeneBoxValidationStatus"},this.props.children):r.createElement("div",{id:"geneBoxValidationStatus"},r.createElement(R,P({replaceGene:this.props.replaceGene},this.props)))}}])&&T(n.prototype,o),a&&T(n,a),t}();function N(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var V=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":G(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},B=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,s)}l((r=r.apply(e,t||[])).next())})};function F(e){return Number.isInteger(Number(e))}var Q=function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=D(t).apply(this,arguments),(e=!r||"object"!==G(r)&&"function"!=typeof r?M(n):r).genes=Object(m.S)({invoke:function(){return B(M(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,a,i,s,l,u,c,d,p=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.geneIds.length){e.next=2;break}return e.abrupt("return",{found:[],suggestions:[]});case 2:return t=o.partition(o.uniq(this.geneIds),F),n=j(t,2),r=n[0],a=n[1],i=function(){return B(p,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,a,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.length){e.next=6;break}return e.next=3,b.a.fetchGenesUsingPOST({geneIdType:"ENTREZ_GENE_ID",geneIds:r});case 3:t=e.sent,e.next=7;break;case 6:t=[];case 7:return n=o.difference(r,t.map(function(e){return e.entrezGeneId+""})),a=n.map(function(e){return{alias:e,genes:[]}}),i=t.map(function(e){return{alias:e.entrezGeneId+"",genes:[e]}}),s=[].concat(N(a),N(i)),e.abrupt("return",{found:t,suggestions:s});case 12:case"end":return e.stop()}},e)}))},s=function(){return B(p,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.length){e.next=6;break}return e.next=3,b.a.fetchGenesUsingPOST({geneIdType:"HUGO_GENE_SYMBOL",geneIds:a});case 3:t=e.sent,e.next=7;break;case 6:t=[];case 7:return n=o.difference(a,t.map(function(e){return e.hugoGeneSymbol})),e.next=10,Promise.all(n.map(function(e){return i.getGeneSuggestions(e)}));case 10:return r=e.sent,e.abrupt("return",{found:t,suggestions:r});case 12:case"end":return e.stop()}},e)}))},e.next=7,Promise.all([i(),s()]);case 7:return l=e.sent,u=j(l,2),c=u[0],d=u[1],e.abrupt("return",{found:[].concat(N(c.found),N(d.found)),suggestions:[].concat(N(c.suggestions),N(d.suggestions))});case 12:case"end":return e.stop()}},e,this)}))},onResult:function(t){e.props.afterValidation&&e.props.afterValidation(0===t.suggestions.length,e.genes.result,e.oql)},default:{found:[],suggestions:[]}}),e}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(t,r["Component"]),n=t,(a=[{key:"getGeneSuggestions",value:function(e){return B(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,b.a.getAllGenesUsingGET({alias:e});case 3:return t.t1=t.sent,t.abrupt("return",{alias:t.t0,genes:t.t1});case 5:case"end":return t.stop()}},t)}))}},{key:"render",value:function(){var e=this;return this.props.skipGeneValidation&&this.props.afterValidation&&this.props.afterValidation(!0,{found:[],suggestions:[]},this.oql),r.createElement(x,{genes:this.props.skipGeneValidation?{found:[],suggestions:[]}:this.genes.isError?new Error("ERROR"):this.genes.result,highlightError:function(){e.props.highlightError&&e.props.highlightError(e.oql)},oql:this.oqlOrError,validatingGenes:!this.props.skipGeneValidation&&this.genes.isPending,errorMessageOnly:this.props.errorMessageOnly,wrapTheContent:this.props.wrap,replaceGene:this.props.replaceGene},this.props.children)}},{key:"oql",get:function(){return h(this.props.geneQuery)}},{key:"geneIds",get:function(){return this.oql.error?[]:this.oql.query.map(function(e){return e.gene})}},{key:"oqlOrError",get:function(){return this.oql.error?new Error("OQL error at character ".concat(this.oql.error.start)):this.oql}}])&&A(n.prototype,a),i&&A(n,i),t}();Q.defaultProps={errorMessageOnly:!1},V([v.a],Q.prototype,"getGeneSuggestions",null),V([p.computed],Q.prototype,"oql",null),V([p.computed],Q.prototype,"geneIds",null),V([p.computed],Q.prototype,"oqlOrError",null);var H=Q=V([a.observer],Q),q=n(8),U=n(586),K=n.n(U);function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Y(e,t){return!t||"object"!==J(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",function(){return Z});var Z,$=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":J(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.STUDY_VIEW_PAGE=1]="STUDY_VIEW_PAGE",e[e.ONCOPRINT_HEATMAP=2]="ONCOPRINT_HEATMAP"}(Z||(Z={}));var ee=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Y(this,z(t).call(this,e))).currentTextAreaValue="",n._geneQuery="",n.geneQueryIsValid=!0,n.queryToBeValidated="",n.isFocused=!1,n.skipGenesValidation=!1,n.updateQueryToBeValidateDebounce=o.debounce(function(){n.queryToBeValidated=n.currentTextAreaValue,n.skipGenesValidation=!1,""===n.currentTextAreaValue&&(n.geneQuery="",n.props.callback&&n.props.callback(h(""),{found:[],suggestions:[]},n.geneQuery))},500),n.geneQuery=n.props.inputGeneQuery||"",n.queryToBeValidated=n.geneQuery,n.props.validateInputGeneQuery||(n.skipGenesValidation=!0),n.textAreaRef=r.createRef(),n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){var e=this;this.disposers=[Object(p.reaction)(function(){return e.props.inputGeneQuery},function(t){(t||"").toUpperCase()!==e.geneQuery.toUpperCase()&&(e.props.validateInputGeneQuery||(e.skipGenesValidation=!0),e.geneQuery=(t||"").trim(),e.queryToBeValidated=e.geneQuery),e.updateTextAreaRefValue()}),Object(p.reaction)(function(){return e.showFullText},function(){e.updateTextAreaRefValue()})]}},{key:"componentWillUnmount",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,o=this.disposers[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){(0,r.value)()}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}}},{key:"updateGeneQuery",value:function(e){this.geneQuery=e,this.queryToBeValidated=e,this.isFocused=!0,this.updateTextAreaRefValue()}},{key:"getTextAreaValue",value:function(){return this.showFullText?this.geneQuery:this.getFocusOutValue()}},{key:"updateTextAreaRefValue",value:function(){this.textAreaRef.current.value=this.getTextAreaValue()}},{key:"getFocusOutValue",value:function(){return function(e){var t="";if(e.length>0){t=e[0];for(var n=1;n<e.length;n++){if(t.length>13||t.length+e[n].length>13){t+=" and "+(e.length-n)+" more";break}t+=" "+e[n]}}return t}(h(this.geneQuery).query.map(function(e){return e.gene}))}},{key:"afterGeneSymbolValidation",value:function(e,t,n){this.geneQueryIsValid=e,this.props.callback&&this.props.callback(n,t,this.geneQuery)}},{key:"highlightError",value:function(e){this.textAreaRef.current.focus(),this.textAreaRef.current.setSelectionRange(e.error.start,e.error.end)}},{key:"onChange",value:function(e){this.currentTextAreaValue=e.currentTarget.value,this.geneQuery=this.currentTextAreaValue,this.updateQueryToBeValidateDebounce()}},{key:"onFocus",value:function(){this.isFocused=!0}},{key:"onBlur",value:function(){this.isFocused=!1}},{key:"replaceGene",value:function(e,t){var n=Object(f.e)(this.getTextAreaValue().toUpperCase().replace(new RegExp("\\b".concat(e.toUpperCase(),"\\b"),"g"),function(){return t.toUpperCase()}));this.updateGeneQuery(n)}},{key:"render",value:function(){return r.createElement("div",{className:u.a.genesSelection},r.createElement("div",{className:u.a.topRow},r.createElement("textarea",{ref:this.textAreaRef,onFocus:this.onFocus,onBlur:this.onBlur,className:s()(this.textAreaClasses),rows:5,cols:80,placeholder:this.promptText,title:this.promptText,defaultValue:this.getTextAreaValue(),onChange:this.onChange,"data-test":"geneSet",style:{height:this.props.textAreaHeight}}),this.props.submitButton),r.createElement("div",{className:"oqlValidationContainer"},r.createElement(H,{focus:this.props.focus,geneQuery:this.queryToBeValidated,skipGeneValidation:this.skipGenesValidation,updateGeneQuery:this.updateGeneQuery,afterValidation:this.afterGeneSymbolValidation,replaceGene:this.replaceGene,errorMessageOnly:this.props.location===Z.STUDY_VIEW_PAGE,highlightError:this.highlightError},this.props.children)),r.createElement("div",null,this.showErrorsAndMessages&&this.props.error&&r.createElement("span",{className:d.a.errorMessage,"data-test":"oqlErrorMessage"},this.props.error),this.showErrorsAndMessages&&this.props.messages&&this.props.messages.map(function(e){return r.createElement("span",{className:d.a.oqlMessage},r.createElement("i",{className:"fa fa-info-circle",style:{marginRight:5}}),e)})))}},{key:"geneQuery",get:function(){return this.queryStore?this.queryStore.geneQuery:this._geneQuery},set:function(e){this.queryStore?this.queryStore.geneQuery=e:this._geneQuery=e}},{key:"textAreaClasses",get:function(){var e=[];switch(this.props.location){case Z.STUDY_VIEW_PAGE:e.push(u.a.studyView),!this.isFocused&&this.geneQueryIsValid||e.push(u.a.studyViewFocus);break;case Z.ONCOPRINT_HEATMAP:e.push(u.a.oncoprintHeatmap);break;default:e.push(u.a.default)}return this.geneQuery||e.push(u.a.empty),e}},{key:"showFullText",get:function(){return!this.geneQueryIsValid||this.isFocused||this.props.location!==Z.STUDY_VIEW_PAGE}},{key:"promptText",get:function(){return this.props.textBoxPrompt?this.props.textBoxPrompt:"Click gene symbols below or enter here"}},{key:"showErrorsAndMessages",get:function(){return this.props.location!==Z.STUDY_VIEW_PAGE||this.isFocused}}])&&W(n.prototype,a),i&&W(n,i),t}();ee.defaultProps={validateInputGeneQuery:!0},$([p.observable],ee.prototype,"_geneQuery",void 0),$([p.computed],ee.prototype,"geneQuery",null),$([p.observable],ee.prototype,"geneQueryIsValid",void 0),$([p.observable],ee.prototype,"queryToBeValidated",void 0),$([p.observable],ee.prototype,"isFocused",void 0),$([p.observable],ee.prototype,"skipGenesValidation",void 0),$([q.default,p.action],ee.prototype,"updateGeneQuery",null),$([q.default,p.action],ee.prototype,"updateTextAreaRefValue",null),$([p.computed],ee.prototype,"textAreaClasses",null),$([p.computed],ee.prototype,"showFullText",null),$([q.default,p.action],ee.prototype,"afterGeneSymbolValidation",null),$([q.default],ee.prototype,"highlightError",null),$([p.computed],ee.prototype,"promptText",null),$([K.a],ee.prototype,"onChange",null),$([K.a],ee.prototype,"onFocus",null),$([K.a],ee.prototype,"onBlur",null),$([K.a],ee.prototype,"replaceGene",null),$([p.computed],ee.prototype,"showErrorsAndMessages",null),ee=$([a.observer],ee);t.b=ee},666:function(e,t,n){},688:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),o=n(10);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,l(t).apply(this,arguments))}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){return r.createElement(o.b,{to:"/study?id=".concat(this.props.studyId),className:this.props.className},this.props.children)}}])&&i(n.prototype,a),c&&i(n,c),t}()},691:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__-Qj7G",framedImage:"styles-module__framedImage__TmznI",labeledCheckbox:"styles-module__labeledCheckbox__jTAe1"}},692:function(e,t,n){"use strict";n.d(t,"b",function(){return p}),n.d(t,"a",function(){return f});var r=n(0),o=n(758),a=n.n(o);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){return function(t,n,r){return n in t&&t[n]instanceof e?null:new Error("Expecting ".concat(r," to receive {").concat(JSON.stringify(n),": ").concat(e.name,"} from context"))}}function p(e){return a()({store:d(e)},function(e){return{store:e.store}})}function f(e){var t;return(t=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,u(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r["Component"]),n=t,(o=[{key:"store",get:function(){return this.context.store}}])&&s(n.prototype,o),a&&s(n,a),t}()).contextTypes={store:d(e)},t}},697:function(e,t,n){"use strict";function r(e){return new Promise(function(t){return setTimeout(t,e)})}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3;return new Promise(function(r){var o=0,a=setInterval(function(){if(o+=t,e())clearInterval(a),r();else if(o>n)throw clearInterval(a),new Error("sleepUntil timeout")},t)})}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o})},701:function(e,t,n){"use strict";var r=n(4),o=n(2);function a(e,t){return t.toLowerCase().indexOf(e.toLowerCase())>-1}function i(e,t,n){n||(n=a);var r=!1,o=!1,i=!1,s=!0,l=!1,u=void 0;try{for(var c,d=e[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){if("not"!==c.value.type){o=!0;break}}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}o||(r=!0);var p=!0,f=!1,y=void 0;try{for(var h,m=e[Symbol.iterator]();!(p=(h=m.next()).done);p=!0){var b=h.value;if("not"===b.type){if(n(b.data,t)){r=!1,i=!0;break}}else if("and"===b.type){o=!0;var g=!0,v=!0,S=!1,_=void 0;try{for(var E,w=b.data[Symbol.iterator]();!(v=(E=w.next()).done);v=!0){var P=E.value;g=g&&n(P,t)}}catch(e){S=!0,_=e}finally{try{v||null==w.return||w.return()}finally{if(S)throw _}}r=r||g}}}catch(e){f=!0,y=e}finally{try{p||null==m.return||m.return()}finally{if(f)throw y}}return{match:r,forced:i}}var s=n(66),l=n(6),u=n(104),c=n.n(u);function d(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),e}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",function(){return g}),n.d(t,"b",function(){return v});var b=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":m(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},g="pan_can_atlas",v=function(){function e(t){f(this,e),this.store=t}return h(e,[{key:"getMetadata",value:function(e){return this.store.treeData.map_node_meta.get(e)}},{key:"cancerTypeContainsSelectedStudies",value:function(e){var t=this.getMetadata(e).descendantStudies;return r.intersection(this.store.selectableSelectedStudies,t).length>0}},{key:"getDepth",value:function(e){return this.getMetadata(e).ancestors.length}},{key:"isHighlighted",value:function(e){return!!this.store.searchText&&!!this.map_node_filterBySearchText.get(e)}},{key:"map_node_filterByDepth",get:function(){var e=new Map,t=!0,n=!1,r=void 0;try{for(var o,a=this.store.treeData.map_node_meta.entries()[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=p(o.value,2),s=i[0],l=i[1],u=!0;l.isCancerType&&(!l.descendantStudies.length||l.ancestors.length>this.store.maxTreeDepth&&!s.alwaysVisible)&&(u=!1),e.set(s,u)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return e}},{key:"map_node_filterBySearchText",get:function(){var e=function(e){e=e.toLowerCase().trim().split(/\s+/g).join(" ");for(var t,n,r=[],o=0;o<e.length;)'"'===e[o]?-1===(n=e.indexOf('"',o+1))?(r.push(e.substring(o+1)),o=e.length):(r.push(e.substring(o+1,n)),o=n+1):" "===e[o]?o+=1:"-"===e[o]?(r.push("-"),o+=1):-1===(t=e.indexOf(" ",o))?(r.push(e.substring(o)),o=e.length):(r.push(e.substring(o,t)),o=t+1);var a,i,s=[];for(o=0;o<r.length;)"-"===r[o]?(o<r.length-1&&s.push({type:"not",data:r[o+1]}),o+=2):(a=r.indexOf("or",o),i=r.indexOf("-",o),-1===a&&-1===i?(s.push({type:"and",data:r.slice(o)}),o=r.length):-1===a&&i>0?(s.push({type:"and",data:r.slice(o,i)}),o=i):a>0&&-1===i?(s.push({type:"and",data:r.slice(o,a)}),o=a+1):a<i?(s.push({type:"and",data:r.slice(o,a)}),o=a+1):(s.push({type:"and",data:r.slice(o,i)}),o=i));return s}(this.store.searchText),t=new Map,n=!0,r=!1,o=void 0;try{for(var a,s=this.store.treeData.map_node_meta.entries()[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=p(a.value,2),u=l[0],c=(S=l[1]).searchTerms;u.hasOwnProperty("studyId")&&(c+=u.studyId?u.studyId:""),t.set(u,i(e,c))}}catch(e){r=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}var f=new Map,y=!0,h=!1,m=void 0;try{for(var b,g=this.store.treeData.map_node_meta.entries()[Symbol.iterator]();!(y=(b=g.next()).done);y=!0){var v=p(b.value,2),S=(u=v[0],v[1]);if(!f.has(u)){for(var _=!1,E=0,w=[u].concat(d(S.ancestors),d(S.priorityCategories));E<w.length;E++){var P=w[E],T=t.get(P);if(!T.match&&T.forced){_=!1;break}_=_||T.match}if(f.set(u,_),_&&!S.isCancerType)for(var O=0,C=[S.ancestors,S.priorityCategories];O<C.length;O++){var I=C[O],k=!0,R=!1,x=void 0;try{for(var N,j=I[Symbol.iterator]();!(k=(N=j.next()).done);k=!0){var A=N.value;f.set(A,!0)}}catch(e){R=!0,x=e}finally{try{k||null==j.return||j.return()}finally{if(R)throw x}}}}}}catch(e){h=!0,m=e}finally{try{y||null==g.return||g.return()}finally{if(h)throw m}}return f}},{key:"map_node_filterBySelectedCancerTypes",get:function(){var e=new Map;if(this.store.selectedCancerTypes.length){var t=!0,n=!1,r=void 0;try{for(var o,a=this.store.selectedCancerTypes[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value,s=this.getMetadata(i);e.set(i,!0);for(var l=0,u=[s.ancestors,s.descendantCancerTypes,s.descendantStudies];l<u.length;l++){var c=u[l],d=!0,p=!1,f=void 0;try{for(var y,h=c[Symbol.iterator]();!(d=(y=h.next()).done);d=!0){var m=y.value;e.set(m,!0)}}catch(e){p=!0,f=e}finally{try{d||null==h.return||h.return()}finally{if(p)throw f}}}}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}else{var b=!0,g=!1,v=void 0;try{for(var S,_=this.store.treeData.map_node_meta.keys()[Symbol.iterator]();!(b=(S=_.next()).done);b=!0){var E=S.value;e.set(E,!0)}}catch(e){g=!0,v=e}finally{try{b||null==_.return||_.return()}finally{if(g)throw v}}}return e}},{key:"map_node_filterBySelectedStudies",get:function(){var e=new Map;if(this.store.selectableSelectedStudies.length){var t=!0,n=!1,r=void 0;try{for(var o,a=this.store.selectableSelectedStudies[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value,s=this.store.treeData.map_node_meta.get(i);e.set(i,!0);for(var l=0,u=[s.descendantStudies,s.ancestors,s.priorityCategories];l<u.length;l++){var c=u[l],d=!0,p=!1,f=void 0;try{for(var y,h=c[Symbol.iterator]();!(d=(y=h.next()).done);d=!0){var m=y.value;e.set(m,!0)}}catch(e){p=!0,f=e}finally{try{d||null==h.return||h.return()}finally{if(p)throw f}}}}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}return e}},{key:"mainView",get:function(){return new S(this.store,[this.map_node_filterByDepth,this.map_node_filterBySearchText,this.map_node_filterBySelectedCancerTypes])}},{key:"cancerTypeListView",get:function(){return new S(this.store,[this.map_node_filterByDepth,this.map_node_filterBySearchText])}},{key:"selectedStudiesView",get:function(){var e=this;return new S(this.store,[this.map_node_filterByDepth,this.map_node_filterBySelectedStudies,{get:function(t){return!e.getMetadata(t).isPriorityCategory}}])}}]),e}();b([s.cached],v.prototype,"map_node_filterByDepth",null),b([s.cached],v.prototype,"map_node_filterBySearchText",null),b([s.cached],v.prototype,"map_node_filterBySelectedCancerTypes",null),b([s.cached],v.prototype,"map_node_filterBySelectedStudies",null),b([o.computed],v.prototype,"mainView",null),b([o.computed],v.prototype,"cancerTypeListView",null),b([o.computed],v.prototype,"selectedStudiesView",null);var S=function(){function e(t,n){var r=this;f(this,e),this.store=t,this.filters=n,this.nodeFilter=function(e){return r.filters.every(function(t){return!!t.get(e)})}}return h(e,[{key:"getMetadata",value:function(e){return this.store.treeData.map_node_meta.get(e)}},{key:"getChildCancerTypes",value:function(e,t){var n=this.getMetadata(e);return(n.ancestors.length<this.store.maxTreeDepth||!t&&e.alwaysVisible?n.childCancerTypes:[]).filter(this.nodeFilter)}},{key:"getChildCancerStudies",value:function(e){var t=this.getMetadata(e),n=[];if(t.ancestors.length<this.store.maxTreeDepth)n=t.childStudies;else if(n=t.descendantStudies,e.alwaysVisible){var o=r.chain(t.descendantCancerTypes).filter(function(e){return e.alwaysVisible}).map(function(e){return e.cancerTypeId}).value();n=r.filter(n,function(e){return!o.includes(e.cancerTypeId)})}return n.filter(this.nodeFilter)}},{key:"getDescendantCancerStudies",value:function(e){return this.getMetadata(e).descendantStudies.filter(this.nodeFilter)}},{key:"getCheckboxProps",value:function(e){var t=this;if(this.getMetadata(e).isCancerType){var n=(this.store.selectableSelectedStudyIds||[]).map(function(e){return t.store.treeData.map_studyId_cancerStudy.get(e)}),o=this.getDescendantCancerStudies(e),a=r.intersection(o,n),i=a.length>0;return{checked:i,indeterminate:i&&a.length!=o.length}}var s=e;return{checked:!!this.store.selectableSelectedStudyIds.find(function(e){return e==s.studyId}),disabled:this.store.isDeletedVirtualStudy(s.studyId)}}},{key:"isCheckBoxDisabled",value:function(e){if(this.getMetadata(e).isCancerType)return!1;var t=e;return!!this.store.isDeletedVirtualStudy(t.studyId)}},{key:"clearAllSelection",value:function(){this.store.selectableSelectedStudyIds=[]}},{key:"onCheck",value:function(e,t){var n;this.getMetadata(e).isCancerType?this.store.forDownloadTab||(n=this.getDescendantCancerStudies(e).map(function(e){return e.studyId})):n=[e.studyId],n&&this.handleCheckboxStudyIds(n,t)}},{key:"getSelectionReport",value:function(){var e=this,t=this.store.selectableSelectedStudyIds||[],n=t.map(function(t){return e.store.treeData.map_studyId_cancerStudy.get(t)}),o=this.getDescendantCancerStudies(this.store.treeData.rootCancerType);return{selectableSelectedStudyIds:t,selectableSelectedStudies:n,shownStudies:o,shownAndSelectedStudies:r.intersection(o,n)}}},{key:"quickSelectButtons",value:function(e){if(!e)return{};try{return l.a.parseConfigFormat(e)}catch(e){return{}}}},{key:"toggleAllFiltered",value:function(){var e=this,t=this.getSelectionReport(),n=(t.selectableSelectedStudyIds,t.selectableSelectedStudies,t.shownStudies),o=t.shownAndSelectedStudies,a=[];a=n.length===o.length?r.without.apply(r,[this.store.selectableSelectedStudyIds].concat(d(n.map(function(e){return e.studyId})))):r.union(this.store.selectableSelectedStudyIds,n.map(function(e){return e.studyId})),this.store.selectableSelectedStudyIds=a.filter(function(t){return!r.includes(e.store.deletedVirtualStudies,t)})}},{key:"selectAllMatchingStudies",value:function(e){var t=this.getSelectionReport(),n=(t.selectableSelectedStudyIds,t.selectableSelectedStudies,t.shownStudies);t.shownAndSelectedStudies;this.store.selectableSelectedStudyIds=n.map(function(e){return e.studyId}).filter(function(t){return r.isArray(e)?e.includes(t):t.includes(e)})}},{key:"handleCheckboxStudyIds",value:function(e,t){var n=this,o=this.store.selectableSelectedStudyIds;o=t?r.union(o,e):r.difference(o,e),this.store.selectableSelectedStudyIds=o.filter(function(e){return!r.includes(n.store.deletedVirtualStudies,e)})}},{key:"isFiltered",get:function(){return this.store.selectedCancerTypeIds.length>0||this.store.searchText.length>0}}]),e}();b([o.action],S.prototype,"clearAllSelection",null),b([o.action],S.prototype,"onCheck",null),b([o.computed],S.prototype,"isFiltered",null),b([c.a],S.prototype,"quickSelectButtons",null),b([o.action],S.prototype,"toggleAllFiltered",null),b([o.action],S.prototype,"selectAllMatchingStudies",null)},711:function(e,t,n){e.exports=n(16)(1035)},827:function(e,t,n){e.exports=n(16)(77)},830:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),o=n(7),a=n(2),i=n(101),s=Object(o.observer)(function(e){return e.store.cancerTypes.isPending||e.store.cancerStudies.isPending||e.store.profiledSamplesCount.isPending?r.createElement(i.a,{isLoading:!0,size:"small",center:!1}):r.createElement(o.Observer,null,function(){var t=Object(a.expr)(function(){return e.store.selectableSelectedStudyIds.length});return r.createElement(r.Fragment,null,r.createElement("a",{onClick:function(){t&&(e.store.showSelectedStudiesOnly=!e.store.showSelectedStudiesOnly)}},r.createElement("b",null,t)," ",1===t?"study":"studies"," ","selected (",r.createElement("b",null,e.store.profiledSamplesCount.result.all)," ","samples)"),e.store.selectableSelectedStudies.length>0&&r.createElement("a",{"data-test":"globalDeselectAllStudiesButton",style:{marginLeft:10},onClick:function(){return e.store.studyListLogic.mainView.clearAllSelection()}},"Deselect all"))})})},836:function(e,t,n){"use strict";var r=n(0),o=n(7);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,s(t).apply(this,arguments))}var n,o,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement("span",null,"Queries are limited by gene and sample count. The product of the query's gene and sample count must be less than"," ",this.props.queryProductLimit.toLocaleString(),". You have selected ",this.props.sampleCount.toLocaleString()," samples, so you can have no more than"," ",Math.floor(this.props.queryProductLimit/this.props.sampleCount).toLocaleString()," ","genes in your query. Please"," ",r.createElement("a",{style:{color:"#ccc"},href:"mailto:".concat(this.props.email)},"let us know")," ","your use case(s) if you need to query more than that.")}}])&&a(n.prototype,o),u&&a(n,u),t}();d=c([o.observer],d),t.a=d},838:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(594),o=n(67),a=n(128),i=n(597);function s(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=window,l=new r.c(e);return l.singlePageAppSubmitRoutine=function(r){(r.cancer_study_list=r.cancer_study_list||r.cancer_study_id,delete r.cancer_study_id,e)&&((e.cancer_study_id!==r.cancer_study_id||e.cancer_study_list!==r.cancer_study_list||Object(i.a)(e.case_ids,"")!==Object(i.a)(r.case_ids,"")||e.case_set_id!==r.case_set_id)&&(r.comparison_createdGroupsSessionId=void 0));var u=l.physicalStudyIdsInSelection.length>1&&1===l.geneIds.length?o.b.CANCER_TYPES_SUMMARY:o.b.ONCOPRINT,c=t||new a.b(s.routingStore);c.updateURL(r,"results/".concat(u),n,!1),void 0===t&&c.destroy()},l}},852:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(591),i=n.n(a),s=n(7),l=n(937),u=n(648),c=n(4),d=n(626),p=n.n(d),f=n(594),y=n(3),h=n(650),m=n(6);function b(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var w=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":E(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},P=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=v(this,S(t).apply(this,arguments))).ProfileToggle=function(t){var n=t.profile,o=t.type,a=t.label,s=t.checked,l=t.isGroupToggle;return r.createElement("label",null,r.createElement("input",{type:o,checked:s,onChange:function(t){return e.store.selectMolecularProfile(n,t.target.checked)},"data-test":n.molecularAlterationType}),r.createElement("span",{className:l?i.a.groupName:i.a.profileName},a),!l&&r.createElement(y.c,{mouseEnterDelay:0,placement:"right",overlay:r.createElement("div",{className:i.a.tooltip},n.description)},r.createElement(p.a,{className:i.a.infoIcon,name:"question-circle"})))},e}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,f["d"]),n=t,(o=[{key:"render",value:function(){return 1!==this.store.selectableSelectedStudyIds.length?null:r.createElement(u.b,{padded:!0,className:i.a.MolecularProfileSelector},r.createElement(h.a,{className:"sectionLabel",promises:[this.store.molecularProfiles]},"Select Genomic Profiles:"),r.createElement("div",{className:i.a.group,"data-test":"molecularProfileSelector"},this.renderGroup("MUTATION_EXTENDED","Mutation"),this.renderGroup("COPY_NUMBER_ALTERATION","Copy Number"),this.showGSVA&&this.renderGroup("GENESET_SCORE","GSVA scores"),this.renderGroup("MRNA_EXPRESSION","mRNA Expression"),this.renderGroup("METHYLATION","DNA Methylation"),this.renderGroup("METHYLATION_BINARY","DNA Methylation"),this.renderGroup("PROTEIN_LEVEL","Protein/phosphoprotein level"),!(!this.store.molecularProfiles.isComplete||this.store.molecularProfiles.result.length)&&r.createElement("strong",null,"No Genomic Profiles available for this Cancer Study")))}},{key:"renderGroup",value:function(e,t){var n=this,o=this.store.getFilteredProfiles(e);if(!o.length)return null;var a=o.map(function(e){return e.molecularProfileId}),s=c.intersection(this.store.selectedProfileIds,a).length>0,l=[];o.length>1&&!this.store.forDownloadTab&&l.push(r.createElement(this.ProfileToggle,{key:"altTypeCheckbox:"+e,profile:o[0],type:"checkbox",label:"".concat(t,". Select one of the profiles below:"),checked:s,isGroupToggle:!0}));var u=o.map(function(e){return r.createElement(n.ProfileToggle,{key:"profile:"+e.molecularProfileId,profile:e,type:n.store.forDownloadTab||o.length>1?"radio":"checkbox",label:e.name,checked:c.includes(n.store.selectedProfileIds,e.molecularProfileId),isGroupToggle:!1})});return this.store.forDownloadTab||1==o.length?l.push.apply(l,b(u)):l.push(r.createElement("div",{key:"group:"+e,className:i.a.group},u)),this.store.forDownloadTab?l:(s&&"MRNA_EXPRESSION"==e&&l.push(r.createElement("div",{key:l.length,className:i.a.zScore},"Enter a z-score threshold"," ",r.createElement("span",{dangerouslySetInnerHTML:{__html:["&","plusmn;"].join("")}}),r.createElement("input",{type:"text",value:this.store.zScoreThreshold,onChange:function(e){n.store.zScoreThreshold=e.target.value}}))),s&&"PROTEIN_LEVEL"==e&&l.push(r.createElement("div",{key:l.length,className:i.a.zScore},"Enter a z-score threshold"," ",r.createElement("span",{dangerouslySetInnerHTML:{__html:["&","plusmn;"].join("")}}),r.createElement("input",{type:"text",value:this.store.rppaScoreThreshold,onChange:function(e){n.store.rppaScoreThreshold=e.target.value}}))),l)}},{key:"showGSVA",get:function(){return m.b.serverConfig.skin_show_gsva}}])&&g(n.prototype,o),a&&g(n,a),t}(),T=P=w([s.observer],P),O=n(101);function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var N=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":x(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},j=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),I(this,k(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(t,f["d"]),n=t,(o=[{key:"render",value:function(){if(!this.store.isVirtualStudyQuery)return null;var e=[];return e.push(r.createElement(O.a,{key:"loading",isLoading:this.store.profileAvailability.isPending})),this.store.profileAvailability.isError?e.push(r.createElement("span",{key:"error"},"Error loading profiles for selected studies.")):this.store.profileAvailability.isComplete&&(e=e.concat(function(e,t){var n=[];e.mutation&&n.push(r.createElement(D,{key:"M",label:"Mutation",state:"mutation",store:t,dataTest:"M"}));e.cna&&n.push(r.createElement(D,{key:"C",label:"Copy number alterations",state:"cna",store:t,dataTest:"C"}));return n}(this.store.profileAvailability.result,this.store))),r.createElement(u.b,{padded:!0,className:i.a.DataTypePrioritySelector,"data-test":"dataTypePrioritySelector"},r.createElement(h.a,{className:"sectionLabel"},"Select Molecular Profiles:"),r.createElement(u.b,null,e))}}])&&C(n.prototype,o),a&&C(n,a),t}(),A=j=N([s.observer],j),D=Object(s.observer)(function(e){return r.createElement("label",{className:i.a.DataTypePriorityLabel},r.createElement("input",{type:"checkbox",checked:e.store.dataTypePriority[e.state]||!1,onChange:function(t){e.store.dataTypePriority[e.state]=t.currentTarget.checked},"data-test":e.dataTest}),e.label)});var M=n(56),L=n(2),G=[{id:"Prostate Cancer: AR Signaling",genes:["SOX9","RAN","TNK2","EP300","PXN","NCOA2","AR","NRIP1","NCOR1","NCOR2"]},{id:"Prostate Cancer: AR and steroid synthesis enzymes",genes:["AKR1C3","AR","CYB5A","CYP11A1","CYP11B1","CYP11B2","CYP17A1","CYP19A1","CYP21A2","HSD17B1","HSD17B10","HSD17B11","HSD17B12","HSD17B13","HSD17B14","HSD17B2","HSD17B3","HSD17B4","HSD17B6","HSD17B7","HSD17B8","HSD3B1","HSD3B2","HSD3B7","RDH5","SHBG","SRD5A1","SRD5A2","SRD5A3","STAR"]},{id:"Prostate Cancer: Steroid inactivating genes",genes:["AKR1C1","AKR1C2","AKR1C4","CYP3A4","CYP3A43","CYP3A5","CYP3A7","UGT2B15","UGT2B17","UGT2B7"]},{id:"Prostate Cancer: Down-regulated by androgen",genes:["BCHE","CDK8","CTBP1","ACKR3","DDC","DPH1","FN1","HES6","MMP16","MYC","PEG3","PIK3R3","PRKD1","SCNN1A","SDC4","SERPINI1","SLC29A1","ST7","TULP4"]},{id:"Glioblastoma: TP53 Pathway",genes:["CDKN2A","MDM2","MDM4","TP53"]},{id:"Glioblastoma: RTK/Ras/PI3K/AKT Signaling",genes:["EGFR","ERBB2","PDGFRA","MET","KRAS","NRAS","HRAS","NF1","SPRY2","FOXO1","FOXO3","AKT1","AKT2","AKT3","PIK3R1","PIK3CA","PTEN"]},{id:"Glioblastoma: RB Pathway",genes:["CDKN2A","CDKN2B","CDKN2C","CDK4","CDK6","CCND2","RB1"]},{id:"Ovarian Cancer: Oncogenes associated with epithelial ovarian cancer",genes:["RAB25","MECOM","EIF5A2","PRKCI","PIK3CA","KIT","FGF1","MYC","EGFR","NOTCH3","KRAS","AKT1","ERBB2","PIK3R1","CCNE1","AKT2","AURKA"]},{id:"Ovarian Cancer: Putative tumor-suppressor genes in epithelial ovarian cancer",genes:["DIRAS3","RASSF1","DLEC1","SPARC","DAB2","PLAGL1","RPS6KA2","PTEN","OPCML","BRCA2","ARL11","WWOX","TP53","DPH1","BRCA1","PEG3"]},{id:"General: Cell Cycle Control",genes:["RB1","RBL1","RBL2","CCNA1","CCNB1","CDK1","CCNE1","CDK2","CDC25A","CCND1","CDK4","CDK6","CCND2","CDKN2A","CDKN2B","MYC","CDKN1A","CDKN1B","E2F1","E2F2","E2F3","E2F4","E2F5","E2F6","E2F7","E2F8","SRC","JAK1","JAK2","STAT1","STAT2","STAT3","STAT5A","STAT5B"]},{id:"General: p53 signaling",genes:["TP53","MDM2","MDM4","CDKN2A","CDKN2B","TP53BP1"]},{id:"General: Notch signaling",genes:["ADAM10","ADAM17","APH1A","APH1B","ARRDC1","CIR1","CTBP1","CTBP2","CUL1","DLL1","DLL3","DLL4","DTX1","DTX2","DTX3","DTX3L","DTX4","EP300","FBXW7","HDAC1","HDAC2","HES1","HES5","HEYL","ITCH","JAG1","JAG2","KDM5A","LFNG","MAML1","MAML2","MAML3","MFNG","NCOR2","NCSTN","NOTCH1","NOTCH2","NOTCH3","NOTCH4","NRARP","NUMB","NUMBL","PSEN1","PSEN2","PSENEN","RBPJ","RBPJL","RFNG","SNW1","SPEN","HES2","HES4","HES7","HEY1","HEY2"]},{id:"General: DNA Damage Response",genes:["CHEK1","CHEK2","RAD51","BRCA1","BRCA2","MLH1","MSH2","ATM","ATR","MDC1","PARP1","FANCF"]},{id:"General: Other growth / proliferation signaling",genes:["CSF1","CSF1R","IGF1","IGF1R","FGF1","FGFR1","AURKA","DLEC1","PLAGL1","OPCML","DPH1"]},{id:"General: Survival / cell death regulation signaling",genes:["NFKB1","NFKB2","CHUK","DIRAS3","FAS","HLA-G","BAD","BCL2","BCL2L1","APAF1","CASP9","CASP8","CASP10","CASP3","CASP6","CASP7","GSK3B","ARL11","WWOX","PEG3","TGFB1","TGFBR1","TGFBR2"]},{id:"General: Telomere maintenance",genes:["TERC","TERT"]},{id:"General: RTK signaling family",genes:["EGFR","ERBB2","ERBB3","ERBB4","PDGFA","PDGFB","PDGFRA","PDGFRB","KIT","FGF1","FGFR1","IGF1","IGF1R","VEGFA","VEGFB","KDR"]},{id:"General: PI3K-AKT-mTOR signaling",genes:["PIK3CA","PIK3R1","PIK3R2","PTEN","PDPK1","AKT1","AKT2","FOXO1","FOXO3","MTOR","RICTOR","TSC1","TSC2","RHEB","AKT1S1","RPTOR","MLST8"]},{id:"General: Ras-Raf-MEK-Erk/JNK signaling",genes:["KRAS","HRAS","BRAF","RAF1","MAP3K1","MAP3K2","MAP3K3","MAP3K4","MAP3K5","MAP2K1","MAP2K2","MAP2K3","MAP2K4","MAP2K5","MAPK1","MAPK3","MAPK4","MAPK6","MAPK7","MAPK8","MAPK9","MAPK12","MAPK14","DAB2","RASSF1","RAB25"]},{id:"General: Regulation of ribosomal protein synthesis and cell growth",genes:["RPS6KA1","RPS6KA2","RPS6KB1","RPS6KB2","EIF5A2","EIF4E","EIF4EBP1","RPS6","HIF1A"]},{id:"General: Angiogenesis",genes:["VEGFA","VEGFB","KDR","CXCL8","CXCR1","CXCR2"]},{id:"General: Folate transport",genes:["SLC19A1","FOLR1","FOLR2","FOLR3","IZUMO1R"]},{id:"General: Invasion and metastasis",genes:["MMP1","MMP2","MMP3","MMP7","MMP9","MMP10","MMP11","MMP12","MMP13","MMP14","MMP15","MMP16","MMP17","MMP19","MMP21","MMP23B","MMP24","MMP25","MMP26","MMP27","MMP28","ITGB3","ITGAV","PTK2","CDH1","SPARC","WFDC2"]},{id:"General: TGF- Pathway",genes:["TGFB1","TGFB2","TGFB3","TGFBR1","TGFBR2","TGFBR3","BMP2","BMP3","BMP4","BMP5","BMP6","BMP7","GDF2","BMP10","BMP15","BMPR1A","BMPR1B","BMPR2","ACVR1","ACVR1B","ACVR1C","ACVR2A","ACVR2B","ACVRL1","Nodal","GDF1","GDF11","INHA","INHBA","INHBB","INHBC","INHBE","SMAD2","SMAD3","SMAD1","SMAD5","SMAD4","SMAD9","SMAD6","SMAD7","SPTBN1","TGFBRAP1","ZFYVE9"]}],V=n(9),B=n.n(V),F=n(11),Q=n.n(F),H=n(572);n(956),n(957);function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e,t){return!t||"object"!==Y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var z=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Y(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},X=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,s)}l((r=r.apply(e,t||[])).next())})},J=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=U(this,K(t).call(this,e))).isLoading=!0,n.map_geneSets_selected=new L.ObservableMap,n.map_geneSets_selected.replace(e.initialSelection.map(function(e){return[e,!0]})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(t,o.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){var e=this;this.promisedTree=this.initTree(this.tree),this.promisedTree.then(function(t){return e.isLoading=!1,t})}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.scoreThreshold===e.scoreThreshold&&this.props.pvalueThreshold===e.pvalueThreshold&&this.props.percentile===e.percentile||(this.promisedTree=this.promisedTree.then(function(e){return t.isLoading=!0,t.replaceTree(e)}).then(function(e){return t.isLoading=!1,e})),this.props.searchValue!==e.searchValue&&(this.promisedTree=this.promisedTree.then(function(e){return t.searchTree(e,t.props.searchValue)}))}},{key:"transformHierarchyData",value:function(e){var t=e,n=[],r=0,o=!0,a=!1,i=void 0;try{for(var s,l=t[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var u=s.value,d=u.nodeName,p=u.parentNodeName?u.parentNodeName:"#";if(n.push({id:d,parent:p,text:d,li_attr:{name:d},geneset:!1,state:{opened:!0,selected:!1}}),c.has(u,"genesets")){var f=!0,y=!1,h=void 0;try{for(var m,b=u.genesets[Symbol.iterator]();!(f=(m=b.next()).done);f=!0){var g=m.value,v=r++,S=g.genesetId,_=g.description,E=g.representativeScore,w=g.representativePvalue,P=g.refLink,T="",O=S+'<span style="font-weight:normal;font-style:italic;"> '+(T=(T=T+"score = "+E.toFixed(2))+", p-value = "+(w=w<.005?w.toExponential(0):w.toFixed(2)))+"</span>";n.push({id:v.toString(),parent:d,text:O,state:{selected:!1},li_attr:{name:S},description:_,representativeScore:E,representativePvalue:w,refLink:P,geneset:!0})}}catch(e){y=!0,h=e}finally{try{f||null==b.return||b.return()}finally{if(y)throw h}}}}}catch(e){a=!0,i=e}finally{try{o||null==l.return||l.return()}finally{if(a)throw i}}return n}},{key:"initTree",value:function(e){return X(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(H.T)(this.props.gsvaProfile,this.props.percentile,this.props.scoreThreshold,this.props.pvalueThreshold,this.props.sampleListId);case 2:return n=t.sent,Q()(e).jstree({search:{show_only_matches:!0,show_only_matches_children:!0},checkbox:{cascade_to_disabled:!1,cascade_to_hidden:!1},core:{themes:{icons:!1},check_callback:!0,data:this.transformHierarchyData(n)},plugins:["checkbox","search"]}),t.abrupt("return",e);case 5:case"end":return t.stop()}},t,this)}))}},{key:"destroyTree",value:function(e){Q()(e).jstree(!0).destroy()}},{key:"replaceTree",value:function(e){return X(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.destroyTree(e),t.next=3,this.initTree(e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t,this)}))}},{key:"submitGeneSets",value:function(e){if(e){var t=Q()(e).jstree("get_selected",!0),n=!0,r=!1,o=void 0;try{for(var a,i=t[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var s=a.value;s.original.geneset&&this.map_geneSets_selected.set(s.original.description,!0)}}catch(e){r=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}}return this.map_geneSets_selected}},{key:"searchTree",value:function(e,t){return Q()(e).jstree(!0).search(t),e}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(O.a,{isLoading:this.isLoading}),o.a.createElement("div",{ref:function(t){return e.tree=t},style:{maxHeight:"380px",overflowY:"scroll"},"data-test":"gsva-tree-container"}),o.a.createElement("div",{style:{padding:"30px 0px"}},o.a.createElement("button",{className:"btn btn-primary btn-sm pull-right",style:{margin:"2px"},disabled:this.isLoading,onClick:function(){var t=e.submitGeneSets(e.tree);e.props.onSelect(t)}},"Select")))}}])&&q(n.prototype,r),a&&q(n,a),t}();z([L.observable],J.prototype,"isLoading",void 0);var Z=J=z([s.observer],J),$=n(609);function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ae=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":oe(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},ie=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=te(t).call(this,e))||"object"!==oe(o)&&"function"!=typeof o?ne(r):o).percentile=n.props.percentile,n.pvalueThreshold=String(n.props.pvalueThreshold),n.scoreThreshold=String(n.props.scoreThreshold),n.percentileOptions=[{label:"50%",value:50},{label:"75%",value:75},{label:"100%",value:100}],n.percentileChange=n.percentileChange.bind(ne(n)),n.applyFilter=n.applyFilter.bind(ne(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(t,r["Component"]),n=t,(o=[{key:"percentileChange",value:function(e){this.percentile=e?e.value:75}},{key:"applyFilter",value:function(){var e=this.pvalueThreshold?Number(this.pvalueThreshold):NaN,t=this.scoreThreshold?Number(this.scoreThreshold):NaN;Number.isNaN(e)||Number.isNaN(t)||this.props.onApply(this.percentile,e,t)}},{key:"render",value:function(){var e=this;return r.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center",width:"100%",background:"#eee",padding:"10px 10px"}},r.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.createElement("label",{htmlFor:"GSVAScore"},"GSVA score"),r.createElement("input",{id:"GSVAScore",type:"string",value:this.scoreThreshold,style:{width:160,height:36,padding:10},onChange:function(t){return e.scoreThreshold=t.target.value},step:"0.1"})),r.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.createElement("label",{htmlFor:"Pvalue"},"P-value"),r.createElement("input",{id:"Pvalue",type:"string",value:this.pvalueThreshold,style:{width:160,height:36,padding:10},onChange:function(t){return e.pvalueThreshold=t.target.value},step:"0.01",min:"0"})),r.createElement("div",null,r.createElement("label",{htmlFor:"PercentileScoreCalculation"},"Percentile for score calculation"),r.createElement($.default,{addLabelText:"Percentile for score calculation",style:{width:160,borderRadius:"2px"},clearable:!1,name:"PercentileScoreCalculation",value:this.percentile,options:this.percentileOptions,onChange:this.percentileChange})),r.createElement("div",null,r.createElement("button",{id:"filterButton",className:"btn btn-primary btn-sm",style:{padding:"20px 18px"},onClick:this.applyFilter},"Apply Filter")))}}])&&ee(n.prototype,o),a&&ee(n,a),t}();ae([L.observable],ie.prototype,"percentile",void 0),ae([L.observable],ie.prototype,"pvalueThreshold",void 0),ae([L.observable],ie.prototype,"scoreThreshold",void 0);var se=ie=ae([s.observer],ie);function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function de(e,t){return(de=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pe(e){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var fe=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":pe(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},ye=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=ue(t).call(this,e))||"object"!==pe(o)&&"function"!=typeof o?ce(r):o).percentile=75,n.pvalueThreshold=.05,n.scoreThreshold=.5,n.searchValue="",n.updateSelectionParameters=n.updateSelectionParameters.bind(ce(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&de(e,t)}(t,r["Component"]),n=t,(o=[{key:"updateSelectionParameters",value:function(e,t,n){this.percentile=e,this.pvalueThreshold=t,this.scoreThreshold=n}},{key:"render",value:function(){var e=this;return r.createElement("div",null,r.createElement("text",null,"Search hierarchy"),r.createElement("div",{className:"form-group has-feedback input-group-sm",style:{display:"inline-block"}},r.createElement("input",{type:"text",id:"geneset-hierarchy-search",className:"form-control tableSearchInput",style:{width:768},value:this.searchValue,onChange:function(t){return e.searchValue=t.target.value}}),r.createElement("span",{className:"fa fa-search form-control-feedback","aria-hidden":"true"})),r.createElement(se,{percentile:this.percentile,pvalueThreshold:this.pvalueThreshold,scoreThreshold:this.scoreThreshold,onApply:this.updateSelectionParameters}),r.createElement(Z,{initialSelection:this.props.initialSelection,scoreThreshold:this.scoreThreshold,pvalueThreshold:this.pvalueThreshold,percentile:this.percentile,gsvaProfile:this.props.gsvaProfile,sampleListId:this.props.sampleListId,searchValue:this.searchValue,onSelect:this.props.onSelect}))}}])&&le(n.prototype,o),a&&le(n,a),t}();fe([L.observable],ye.prototype,"percentile",void 0),fe([L.observable],ye.prototype,"pvalueThreshold",void 0),fe([L.observable],ye.prototype,"scoreThreshold",void 0),fe([L.observable],ye.prototype,"searchValue",void 0);var he=ye=fe([s.observer],ye),me=n(608),be=n(575),ge=n(580),ve=n(581),Se=n(576);function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function we(e,t){return!t||"object"!==Ie(t)&&"function"!=typeof t?Pe(e):t}function Pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Te(e){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Oe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ce(e,t)}function Ce(e,t){return(Ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ke=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Ie(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},Re=function(e){function t(){return Ee(this,t),we(this,Te(t).apply(this,arguments))}return Oe(t,be["b"]),t}(),xe=function(e){function t(e){var n;return Ee(this,t),(n=we(this,Te(t).call(this,e))).percentileOptions=[{label:"50%",value:"50"},{label:"75%",value:"75"},{label:"100%",value:"100"}],n.percentileChange=n.percentileChange.bind(Pe(n)),n.updateSelectionFromPlot=n.updateSelectionFromPlot.bind(Pe(n)),n}var n,o,a;return Oe(t,f["d"]),n=t,(o=[{key:"percentileChange",value:function(e){this.store.volcanoPlotSelectedPercentile=e||{label:"75%",value:"75"}}},{key:"updateSelectionFromPlot",value:function(e,t){var n=this,r=e&&e[0].data?e[0].data:[];this.store.volcanoPlotTableData.result.map(function(e){var t=e.representativeScore,o=e.representativePvalue,a=e.name,i=t,s=-Math.log(o)/Math.log(10),l=!0,u=!1,c=void 0;try{for(var d,p=r[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var f=d.value;f.x===i&&f.y===s&&n.store.map_genesets_selected_volcano.set(a,!0)}}catch(e){u=!0,c=e}finally{try{l||null==p.return||p.return()}finally{if(u)throw c}}})}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:i.a.GenesetsVolcanoSelectorWindow,style:{height:"400px"}},r.createElement("div",{style:{float:"left"},className:"form-inline"},r.createElement("label",{htmlFor:"PercentileScoreCalculation"},"Percentile for score calculation:"),r.createElement("span",{style:{display:"inline-block",verticalAlign:"middle",marginLeft:"1em"}},r.createElement($.default,{addLabelText:"Percentile for score calculation",style:{width:160,borderRadius:"2px"},clearable:!1,name:"PercentileScoreCalculation",value:this.store.volcanoPlotSelectedPercentile,options:this.percentileOptions,onChange:this.percentileChange})),r.createElement(O.a,{isLoading:!(this.props.plotData&&this.props.maxY&&this.store.volcanoPlotTableData.isComplete&&this.props.data)}),this.store.volcanoPlotGraphData&&this.store.minYVolcanoPlot&&this.props.plotData&&this.props.maxY&&this.store.volcanoPlotTableData.isComplete&&this.props.data&&r.createElement(ve.VictoryChart,{theme:Se.d,width:510,height:350,containerComponent:r.createElement(ve.VictorySelectionContainer,{onSelection:this.updateSelectionFromPlot,selectionStyle:{fill:"tomato",fillOpacity:.5,stroke:"tomato",strokeWidth:2}})},r.createElement(ve.VictoryAxis,{crossAxis:!0,domain:[-1,1.25],tickValues:[-1,-.5,0,.5,1],style:{axisLabel:{padding:35}},label:"GSVA score",offsetY:50,standalone:!1}),r.createElement(ve.VictoryAxis,{dependentAxis:!0,crossAxis:!0,domain:[0,this.props.maxY],style:{axisLabel:{padding:35},stroke:"none"},label:"-log10 p-value",offsetX:50,standalone:!1}),r.createElement(ve.VictoryLabel,{text:"significance",datum:{x:1,y:1.3},textAnchor:"start"}),r.createElement(ve.VictoryLine,{style:{data:{stroke:"black",strokeDasharray:5},parent:{border:"dotted 1px #f00"}},data:[{x:-1.2,y:1.3},{x:1,y:1.3}]}),r.createElement(ve.VictoryLine,{style:{data:{stroke:"rgb(144, 164, 174)"},parent:{border:"1px dashed solid"}},data:[{x:0,y:0},{x:0,y:this.props.maxY}]}),r.createElement(ve.VictoryScatter,{style:{data:{fill:function(e){return e?e.fill:""},fillOpacity:.3}},size:3,data:this.props.plotData}))),r.createElement("div",{style:{float:"right",height:"356.5px",overflowY:"scroll",width:"650px"}},r.createElement(O.a,{isLoading:!(this.store.volcanoPlotTableData.isComplete&&this.props.data)}),this.store.volcanoPlotTableData.isComplete&&this.props.data&&r.createElement(Re,{data:this.props.data,columns:[{name:"Gene Sets",render:function(e){return r.createElement("span",null,e.name)},sortBy:function(e){return e.name},filter:function(e,t,n){return e.name.toUpperCase().indexOf(n)>-1}},{name:"GSVA Score",render:function(e){return r.createElement("span",null,e.representativeScore.toFixed(2))},sortBy:function(e){return e.representativeScore}},{name:"P Value",render:function(e){return r.createElement("span",null,Object(ge.g)(e.representativePvalue,2,.1))},sortBy:function(e){return e.representativePvalue}},{name:"Selected",render:function(t){return r.createElement(me.a,{checked:!!e.store.map_genesets_selected_volcano.get(t.name),onChange:function(n){return e.store.map_genesets_selected_volcano.set(t.name,n.target.checked)}})}}],initialSortColumn:"P Value",initialSortDirection:"asc",showPagination:!0,initialItemsPerPage:100,showColumnVisibility:!1,showFilter:!0,showCopyDownload:!1})),r.createElement("div",{style:{float:"right"}},this.store.volcanoPlotTableData.isComplete&&this.props.data&&r.createElement("button",{style:{marginTop:15,float:"right"},className:"btn btn-primary btn-sm pull-right",onClick:function(){return e.props.onSelect(e.store.map_genesets_selected_volcano)}},"Add selection to the query"),this.store.volcanoPlotTableData.isComplete&&this.props.data&&r.createElement("button",{style:{marginRight:15,marginTop:15,float:"right"},className:"btn btn-primary btn-sm pull-right",onClick:function(){return e.store.map_genesets_selected_volcano.replace(e.props.initialSelection.map(function(e){return[e,!0]}))}},"Clear selection")))}}])&&_e(n.prototype,o),a&&_e(n,a),t}();ke([L.action],xe.prototype,"updateSelectionFromPlot",null);var Ne=xe=ke([s.observer],xe);function je(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function De(e,t){return!t||"object"!==Ge(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Me(e){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Le(e,t){return(Le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ge(e){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ve=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Ge(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},Be=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),De(this,Me(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Le(e,t)}(t,f["d"]),n=t,(o=[{key:"render",value:function(){var e=this;return r.createElement(u.b,{padded:!0,overflow:!0,className:i.a.GeneSetSelector},r.createElement(h.a,{className:"sectionLabel"},"Enter Gene Sets:"),r.createElement(u.a,{overflow:!0},r.createElement(u.b,{padded:!0,className:i.a.buttonRow},r.createElement("button",{className:"btn btn-default btn-sm","data-test":"GENESET_HIERARCHY_BUTTON",onClick:function(){return e.store.showGenesetsHierarchyPopup=!0}},"Select Gene Sets from Hierarchy"),r.createElement("button",{className:"btn btn-default btn-sm","data-test":"GENESET_VOLCANO_BUTTON",onClick:function(){return e.store.showGenesetsVolcanoPopup=!0}},"Select Gene Sets from Volcano Plot")),r.createElement("textarea",{ref:this.textAreaRef,className:B()(i.a.geneSet,this.store.genesetQuery?i.a.notEmpty:i.a.empty),rows:5,cols:80,placeholder:"Enter Gene Sets",title:"Enter Gene Sets",value:this.store.genesetQuery,onChange:function(t){return e.store.genesetQuery=t.currentTarget.value},"data-test":"GENESETS_TEXT_AREA"}),r.createElement(M.Modal,{className:B()("cbioportal-frontend",i.a.GenesetsSelectorWindow),show:this.store.showGenesetsHierarchyPopup,onHide:function(){return e.store.showGenesetsHierarchyPopup=!1}},r.createElement(M.Modal.Header,{closeButton:!0},r.createElement(M.Modal.Title,null,"Select Gene Sets From Hierarchy")),r.createElement(M.Modal.Body,null,r.createElement(he,{initialSelection:this.store.genesetIds,gsvaProfile:this.store.getFilteredProfiles("GENESET_SCORE")[0].molecularProfileId,sampleListId:this.store.defaultSelectedSampleListId,onSelect:function(t){e.store.applyGenesetSelection(t),e.store.showGenesetsHierarchyPopup=!1}}))),r.createElement(M.Modal,{className:B()("cbioportal-frontend",i.a.GenesetsVolcanoSelectorWindow),show:this.store.showGenesetsVolcanoPopup,onHide:function(){return e.store.showGenesetsVolcanoPopup=!1},onShow:function(){return e.store.map_genesets_selected_volcano.replace(e.store.genesetIds.map(function(e){return[e,!0]}))}},r.createElement(M.Modal.Header,{closeButton:!0},r.createElement(M.Modal.Title,null,"Select Gene Sets From Volcano Plot")),r.createElement(M.Modal.Body,null,r.createElement(Ne,{initialSelection:this.store.genesetIds,data:this.store.volcanoPlotTableData.result,plotData:this.store.volcanoPlotGraphData,maxY:this.store.minYVolcanoPlot?-Math.log(this.store.minYVolcanoPlot)/Math.log(10):void 0,onSelect:function(t){e.store.addToGenesetSelection(t),e.store.showGenesetsVolcanoPopup=!1}})))))}},{key:"selectedGeneListOption",get:function(){var e=this,t=this.geneListOptions.find(function(t){return t.value===e.store.geneQuery});return t?t.value:""}},{key:"geneListOptions",get:function(){var e=G;if(m.b.serverConfig.query_sets_of_genes){var t=m.a.parseQuerySetsOfGenes(m.b.serverConfig.query_sets_of_genes);t&&(e=t)}return[{label:"User-defined List",value:""}].concat(je(e.map(function(e){return{label:"".concat(e.id," (").concat(e.genes.length," genes)"),value:e.genes.join(" ")}})))}},{key:"textAreaRef",get:function(){var e=this;if(this.store.geneQueryErrorDisplayStatus===f.b.ShouldFocus)return function(t){var n=e.store.oql.error;t&&n&&(t.focus(),t.setSelectionRange(n.start,n.end),e.store.geneQueryErrorDisplayStatus=f.b.Focused)}}}])&&Ae(n.prototype,o),a&&Ae(n,a),t}();Ve([L.computed],Be.prototype,"selectedGeneListOption",null),Ve([L.computed],Be.prototype,"geneListOptions",null),Ve([L.computed],Be.prototype,"textAreaRef",null);var Fe=Be=Ve([s.observer],Be),Qe=n(15),He=n(958),qe=n(766),Ue=n(126),Ke=n.n(Ue),We=n(603),Ye=n(17),ze=n(681);function Xe(e){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Je(){return(Je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $e(e){return($e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function et(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tt(e,t){return(tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n(966);var nt=n(613);function rt(e,t){var n=[];return t||(Object.keys(e[0]).forEach(function(e){return n.push(e,",")}),n.pop(),n.push("\r\n")),e.forEach(function(e){c.each(e,function(e){n.push(e,",")}),n.pop(),n.push("\r\n")}),n.join("")}var ot=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=$e(t).call(this,e),(n=!o||"object"!==Xe(o)&&"function"!=typeof o?et(r):o).downloadData=function(){n.props.downloadDataGenerator?Ke()(rt(n.props.downloadDataGenerator()||[],n.props.downloadDataContainsHeader),n.props.downloadFilename):Ke()(rt(n.props.tableData||[],n.props.downloadDataContainsHeader),n.props.downloadFilename)},n.handleInput=n.handleInput.bind(et(n)),n.getText=n.getText.bind(et(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tt(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){this.props.showCopyAndDownload&&this._copyButton&&this.bindCopyButton()}},{key:"bindCopyButton",value:function(){new nt(this._copyButton,{text:function(){return this.getText()}.bind(this)})}},{key:"handleInput",value:function(e){var t=this;null!==this.searchTimeout&&(clearTimeout(this.searchTimeout),this.searchTimeout=null);var n=e.currentTarget.value;this.searchTimeout=setTimeout(function(){t.props.handleInput&&t.props.handleInput(n)},this.props.searchDelayMs)}},{key:"render",value:function(){var e=this,t=r.createElement("div",{className:"rc-tooltip-arrow-inner"});return r.createElement("div",{className:(this.props.className||"")+""},r.createElement(M.ButtonToolbar,null,r.createElement(Ye.If,{condition:this.props.showPagination},r.createElement(We.a,Je({className:"pull-left"},this.props.paginationProps))),r.createElement(Ye.If,{condition:this.props.showHideShowColumnButton},r.createElement(ze.a,this.props.columnVisibilityProps)),r.createElement(Ye.If,{condition:this.props.showCopyAndDownload},r.createElement(M.ButtonGroup,{className:this.props.copyDownloadClassName,style:{marginLeft:10}},r.createElement(y.c,{overlay:r.createElement("span",null,"Copy"),placement:"top",mouseLeaveDelay:0,mouseEnterDelay:.5,arrowContent:t},r.createElement("button",{ref:function(t){e._copyButton=t},className:"btn btn-sm btn-default","option-text":this.getText},r.createElement("i",{className:"fa fa-clipboard"}))),r.createElement(y.c,{overlay:r.createElement("span",null,"Download CSV"),mouseLeaveDelay:0,mouseEnterDelay:.5,placement:"top",arrowContent:t},r.createElement(M.Button,{className:"btn-sm",onClick:this.downloadData},r.createElement("i",{className:"fa fa-cloud-download"}))))),r.createElement(Ye.If,{condition:this.props.showSearch},r.createElement("div",{className:"".concat(this.props.searchClassName," form-group has-feedback input-group-sm"),style:{display:"inline-block",marginLeft:10}},r.createElement("input",{type:"text",onInput:this.handleInput,className:"form-control tableSearchInput",style:{width:200}}),r.createElement("span",{className:"fa fa-search form-control-feedback","aria-hidden":"true"})))))}},{key:"getText",value:function(){return this.props.downloadDataGenerator?rt(this.props.downloadDataGenerator()||[],this.props.downloadDataContainsHeader):rt(this.props.tableData||[],this.props.downloadDataContainsHeader)}}])&&Ze(n.prototype,o),a&&Ze(n,a),t}();ot.defaultProps={showSearch:!1,showCopyAndDownload:!0,showPagination:!1,searchClassName:"",copyDownloadClassName:"",downloadFilename:"patient-clinical-attributes.tsv",downloadDataContainsHeader:!1,paginationProps:{},columnVisibilityProps:{},searchDelayMs:400};n(967);function at(e){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function it(){return(it=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function st(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lt(e){return(lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ut(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ct(e,t){return(ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var dt=function(e){function t(e){var n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=lt(t).call(this,e),(n=!o||"object"!==at(o)&&"function"!=typeof o?ut(r):o).rawDataSelector=function(e,t){return t.rawData},n.columnsSelector=function(e,t){return t.columns},n.columnVisibilitySelector=function(e){return e.columnVisibility},n.visibleColsSelector=Object(He.createSelector)(n.columnsSelector,n.columnVisibilitySelector,function(e,t){return n.resolveVisible(e,t)}),n.sortedVisibleColsSelector=Object(He.createSelector)(n.visibleColsSelector,function(e){return n.resolveOrder(e)}),n.sortedColsSelector=Object(He.createSelector)(n.columnsSelector,function(e){return n.resolveOrder(e)}),n.columnVisibilityArraySelector=Object(He.createSelector)(n.sortedColsSelector,n.columnVisibilitySelector,function(e,t){return n.resolveColumnVisibility(n.colNameToId,e,t)}),n.downloadDataSelector=Object(He.createSelector)(n.sortedColsSelector,n.columnVisibilitySelector,n.rawDataSelector,function(e,t,r){return n.generateDownloadData(e,t,r)}),n.headersSelector=Object(He.createSelector)(n.sortedVisibleColsSelector,function(e){return n.generateHeaders(e)}),n.rowsSelector=Object(He.createSelector)(n.sortedColsSelector,n.rawDataSelector,function(e,t){return n.generateRows(e,t)}),n.colNameToId=n.mapColNameToId(e.columns),n.state={columnVisibility:t.resolveVisibility(e.columns,e.rawData),sortableColumns:n.resolveSortable(n.props.columns||{}),filterableColumns:n.resolveFilterable(n.props.columns||{}),filter:"",itemsPerPage:n.props.initItemsPerPage||25,currentPage:n.props.initPage||0},n.filteredDataLength=e.rawData.length,n.shouldSetState=!1;var a=qe.Table.prototype.applyFilter;qe.Table.prototype.applyFilter=function(){var e,t=a.apply(this,arguments);return(e=t.length)!==n.filteredDataLength&&(n.filteredDataLength=e,n.shouldSetState=!0),t};var i=qe.Table.prototype.render;return qe.Table.prototype.render=function(){var e,t=i.apply(this,arguments);return e=t.props.children.find(function(e){return"tbody"===e.type}).props.children||[],n.props.onVisibleRowsChange&&n.props.onVisibleRowsChange(e.map(function(e){return e.props.rowData})),t},n.handleDownload=n.handleDownload.bind(ut(n)),n.handleFilterInput=n.handleFilterInput.bind(ut(n)),n.handleVisibilityToggle=n.handleVisibilityToggle.bind(ut(n)),n.handleChangeItemsPerPage=n.handleChangeItemsPerPage.bind(ut(n)),n.handlePreviousPageClick=n.handlePreviousPageClick.bind(ut(n)),n.handleNextPageClick=n.handleNextPageClick.bind(ut(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ct(e,t)}(t,r["Component"]),n=t,a=[{key:"resolveVisibility",value:function(e,t){var n={};return e?(c.each(c.keys(e),function(r){var o=e[r],a="visible";o.visible&&(a=c.isFunction(o.visible)?o.visible(t,o.columnProps):o.visible),"excluded"!==a&&(n[r]=a)}),n):n}},{key:"columnSort",value:function(e,t){return e.priority&&t.priority?e.priority-t.priority:e.priority?-1:t.priority?1:e.name>t.name?1:-1}}],(o=[{key:"render",value:function(){var e=this.props,t=e.className,n=e.reactTableProps,o=e.headerControlsProps,a=(this.columnVisibilityArraySelector(this.state,this.props),this.headersSelector(this.state,this.props)),i=this.rowsSelector(this.state,this.props),s=this.rowIndexesOnPage(),l=s.firstIndex,u=s.numIndexes;return r.createElement("div",{className:t},r.createElement(ot,it({showCopyAndDownload:!0,showHideShowColumnButton:!0,handleInput:this.handleFilterInput,downloadDataGenerator:this.handleDownload,downloadDataContainsHeader:!0,downloadFilename:"mutations.csv",showSearch:!0,columnVisibilityProps:{className:"pull-right",onColumnToggled:this.handleVisibilityToggle},paginationProps:{className:"pull-right",itemsPerPage:this.state.itemsPerPage,currentPage:this.state.currentPage,onChangeItemsPerPage:this.handleChangeItemsPerPage,onPreviousPageClick:this.handlePreviousPageClick,onNextPageClick:this.handleNextPageClick,textBetweenButtons:"".concat(this.filteredDataLength?l+1:0,"-").concat(l+u," of ").concat(this.filteredDataLength),previousPageDisabled:0===this.state.currentPage,nextPageDisabled:this.state.currentPage>=this.numPages()-1}},o)),r.createElement(qe.Table,it({sortable:this.state.sortableColumns,filterable:this.state.filterableColumns,filterBy:this.state.filter,itemsPerPage:-1===this.state.itemsPerPage?void 0:this.state.itemsPerPage,currentPage:this.state.currentPage},n),a,i))}},{key:"componentWillUpdate",value:function(e,t){0===t.filter.length&&(this.filteredDataLength=this.props.rawData.length)}},{key:"componentDidUpdate",value:function(){this.shouldSetState&&(this.shouldSetState=!1,this.setState({currentPage:Math.max(0,Math.min(this.state.currentPage,this.numPages()-1))}))}},{key:"rowIndexesOnPage",value:function(){var e,t;return-1===this.state.itemsPerPage?(e=0,t=this.filteredDataLength):(e=this.state.itemsPerPage*this.state.currentPage,t=Math.min(this.filteredDataLength-e,this.state.itemsPerPage)),{firstIndex:e,numIndexes:t}}},{key:"numPages",value:function(e){return-1===(e=e||this.state.itemsPerPage)?1:Math.ceil(this.filteredDataLength/e)}},{key:"mapColNameToId",value:function(e){var t={};return e&&c.each(e,function(e,n){e.name&&(t[e.name],t[e.name]=n)}),t}},{key:"resolveOrder",value:function(e){return e?c.values(e).sort(t.columnSort):[]}},{key:"resolveColumnVisibility",value:function(e,t,n){var r=[];return c.each(t,function(t){var o=e[t.name];n[o]&&r.push({id:o,name:t.name,visibility:n[o]})}),r}},{key:"generateHeaders",value:function(e){var t=[];return c.each(e,function(e){var n=e.header||r.createElement("span",null,e.name);if(e.description){var o=r.createElement("div",{className:"rc-tooltip-arrow-inner"});n=r.createElement(y.c,{overlay:r.createElement("span",null,e.description),placement:"top",arrowContent:o},n)}t.push(r.createElement(qe.Th,{key:e.name,column:e.name},n))}),t}},{key:"generateDownloadData",value:function(e,t,n){var r=this,o=[];return o[0]=[],c.each(e,function(e){var n=r.colNameToId[e.name];n in t&&"excluded"!==t[n]&&o[0].push(e.name)}),c.each(n,function(a,i){var s=[];c.each(e,function(e){var o=r.colNameToId[e.name];if(o in t&&"excluded"!==t[o]){var i=r.getColumnData(e,n,a);e.downloader?s.push(e.downloader(i,e.columnProps)):s.push((i.columnData||"").toString())}}),o.push(s)}),o}},{key:"getColumnData",value:function(e,t,n){var r={name:e.name,tableData:t,rowData:n,columnData:null};if(e.columnDataFunction)r.columnData=e.columnDataFunction(r);else if(e.dataField){var o=null;(o=c.isArray(r.rowData)&&r.rowData.length>0?r.rowData[0]:r.rowData)&&(r.columnData=o[e.dataField])}return r}},{key:"generateRows",value:function(e,t){var n=this,o=[];return c.each(t,function(a,i){var s=n.generateColumns(e,t,a);o.push(r.createElement(qe.Tr,{key:i,rowData:a},s))}),o}},{key:"generateColumns",value:function(e,t,n){var r=this,o=[];return c.each(e,function(e){var a=r.getColumnData(e,t,n);o.push(r.generateColumn(a,e))}),o}},{key:"generateColumn",value:function(e,t){return t.formatter?t.formatter(e,t.columnProps):r.createElement(qe.Td,{key:t.name,column:t.name,value:e.columnData},e.columnData)}},{key:"resolveVisible",value:function(e,t){var n={};return c.each(c.keys(t),function(r){"visible"===t[r]&&(n[r]=e[r])}),n}},{key:"resolveSortable",value:function(e){var t=[];return c.each(e,function(e){c.isFunction(e.sortable)?t.push({column:e.name,sortFunction:e.sortable}):e.sortable&&t.push(e.name)}),t}},{key:"resolveFilterable",value:function(e){var t=[];return c.each(e,function(e){c.isFunction(e.filterable)?t.push({column:e.name,filterFunction:e.filterable}):e.filterable&&t.push(e.name)}),t}},{key:"handleFilterInput",value:function(e){this.setState({filter:e})}},{key:"handleDownload",value:function(){return this.downloadDataSelector(this.state,this.props)}},{key:"handleVisibilityToggle",value:function(e){var t=e,n=this.state.columnVisibility[t],r=Object.assign({},this.state.columnVisibility);"hidden"===n?n="visible":"visible"===n&&(n="hidden"),r[t]=n,this.setState({columnVisibility:r})}},{key:"handleChangeItemsPerPage",value:function(e){this.setState({itemsPerPage:e,currentPage:Math.min(this.state.currentPage,this.numPages(e)-1)})}},{key:"handlePreviousPageClick",value:function(){this.setState({currentPage:Math.max(0,this.state.currentPage-1)})}},{key:"handleNextPageClick",value:function(){this.setState({currentPage:Math.min(this.state.currentPage+1,this.numPages()-1)})}}])&&st(n.prototype,o),a&&st(n,a),t}();function pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ft(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yt(e,t){return!t||"object"!==gt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ht(e){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bt(e,t)}function bt(e,t){return(bt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gt(e){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var vt=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":gt(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},St=function(e){function t(){return ft(this,t),yt(this,ht(t).apply(this,arguments))}return mt(t,dt),t}(),_t=function(e){function t(e){var n;return ft(this,t),(n=yt(this,ht(t).call(this,e))).map_geneSymbol_selected=L.observable.map(),n.columns={hugoGeneSymbol:{priority:1,dataField:"hugoGeneSymbol",name:"Gene Symbol",sortable:!0,filterable:!0},numberOfMutations:{priority:2,dataField:"numberOfMutations",name:"Num Mutations",sortable:!0,filterable:!0},qValue:{priority:3,dataField:"qValue",name:"Q-Value",sortable:!0,filterable:!0,formatter:function(e){var t=e.name,n=e.columnData;return r.createElement(qe.Td,{key:t,column:t,value:n},Object(ge.g)(n,2,.1))}},selected:{name:"Selected",priority:4,sortable:!1,filterable:!1,header:r.createElement("div",{className:i.a.selectionColumnHeader},r.createElement("span",null,"All"),r.createElement(s.Observer,null,function(){return r.createElement(me.a,{checked:n.selectedGenes.length>0,indeterminate:n.selectedGenes.length>0&&n.selectedGenes.length<n.allGenes.length,onChange:function(e){return n.selectAll(e.target.checked)}})})),formatter:function(e){var t=e.name,o=e.rowData;return r.createElement(qe.Td,{key:t,column:t},!!o&&r.createElement("div",{className:i.a.selectionColumnCell},r.createElement(s.Observer,null,function(){return r.createElement(me.a,{checked:!!n.map_geneSymbol_selected.get(o.hugoGeneSymbol),onChange:function(e){return n.map_geneSymbol_selected.set(o.hugoGeneSymbol,e.target.checked)}})})))}}},n.map_geneSymbol_selected.replace(e.initialSelection.map(function(e){return[e,!0]})),n}var n,o,a;return mt(t,r["Component"]),n=t,(o=[{key:"selectAll",value:function(e){var t=!0,n=!1,r=void 0;try{for(var o,a=this.allGenes[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value;this.map_geneSymbol_selected.set(i,e)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:i.a.MutSigGeneSelector},r.createElement(St,{itemsName:"genes",initItemsPerPage:10,columns:this.columns,rawData:this.props.data,headerControlsProps:{showCopyAndDownload:!1,showHideShowColumnButton:!1,showPagination:!0},reactTableProps:{className:"table table-striped table-border-top",hideFilterInput:!0,defaultSort:this.columns.qValue.name}}),r.createElement("div",null,r.createElement("button",{style:{marginTop:20},className:"btn btn-primary btn-sm pull-right",onClick:function(){return e.props.onSelect(e.map_geneSymbol_selected)}},"Select")))}},{key:"allGenes",get:function(){return c.uniq(this.props.data.map(function(e){return e.hugoGeneSymbol}))}},{key:"selectedGenes",get:function(){var e=this;return this.allGenes.filter(function(t){return e.map_geneSymbol_selected.get(t)})}}])&&pt(n.prototype,o),a&&pt(n,a),t}();vt([L.computed],_t.prototype,"allGenes",null),vt([L.computed],_t.prototype,"selectedGenes",null),vt([L.action],_t.prototype,"selectAll",null);var Et=_t=vt([s.observer],_t);function wt(e){return e?e.genes.map(function(e){return e.hugoGeneSymbol}):[]}var Pt=new RegExp("^([0-9]{1,2})([pq])([0-9]{1,2})(?:.?)([0-9]{0,2})$");function Tt(e,t){var n=e.match(Pt),r=t.match(Pt);return n&&r?parseInt(n[1],10)-parseInt(r[1],10)!=0?parseInt(n[1],10)-parseInt(r[1],10):"p"===n[2]&&"q"===r[2]?-1:"q"===n[2]&&"p"===r[2]?1:n[2]===r[2]?parseInt(n[3],10)-parseInt(r[3],10):0:+!!n-+!!r}function Ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ct(e,t,n){return t&&Ot(e.prototype,t),n&&Ot(e,n),e}function It(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kt(e,t){return!t||"object"!==jt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Rt(e){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nt(e,t)}function Nt(e,t){return(Nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jt(e){return(jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var At=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":jt(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},Dt=function(e){function t(){return It(this,t),kt(this,Rt(t).apply(this,arguments))}return xt(t,dt),t}(),Mt=function(e){function t(e){var n;return It(this,t),(n=kt(this,Rt(t).call(this,e))).map_geneSymbol_selected=L.observable.map(),n.columns={amp:{priority:1,columnDataFunction:function(e){var t=e.rowData;return t&&(t.amp?"Amp":"Del")},name:"Amp Del",sortable:!0,filterable:!0,header:r.createElement("div",{className:B()(i.a.header,i.a.amp,i.a.del)},r.createElement("span",{className:i.a.amp},"Amp"),r.createElement("span",{className:i.a.del},"Del")),formatter:function(e){var t=e.name,n=e.rowData,o=e.columnData;return r.createElement(qe.Td,{key:t,column:t,value:o},!!n&&r.createElement("div",{className:n.amp?i.a.amp:i.a.del}))}},chromosome:{priority:2,dataField:"chromosome",name:"Chr",sortable:!0,filterable:!0},cytoband:{priority:3,dataField:"cytoband",name:"Cytoband",sortable:Tt,filterable:!0},"#":{priority:4,columnDataFunction:function(e){return wt(e.rowData).length},name:"#",sortable:!0,filterable:!0},genes:{priority:5,columnDataFunction:function(e){return wt(e.rowData).join(" ")},name:"Genes",sortable:function(e,t){return e.length-t.length||+(e>t)-+(e<t)},filterable:!0,formatter:function(e){var t=e.name,o=e.rowData,a=e.columnData;return r.createElement(qe.Td,{key:t,column:t,value:a},r.createElement(Gt,{gistic:o,map_geneSymbol_selected:n.map_geneSymbol_selected}))}},qValue:{priority:6,dataField:"qValue",name:"Q-Value",sortable:!0,filterable:!0,formatter:function(e){var t=e.name,n=(e.rowData,e.columnData);return r.createElement(qe.Td,{key:t,column:t,value:n},Object(ge.g)(n,2,.1))}}},n.map_geneSymbol_selected.replace(e.initialSelection.map(function(e){return[e,!0]})),n}return xt(t,r["Component"]),Ct(t,[{key:"render",value:function(){var e=this;return r.createElement("div",{className:i.a.GisticGeneSelector},r.createElement("span",null,"Click on a gene to ",r.createElement("span",{className:B()(i.a.geneToggle,i.a.selected,i.a.simulateHovered)},"select")," it."),r.createElement(Dt,{className:i.a.gisticTable,itemsName:"genes",initItemsPerPage:10,columns:this.columns,rawData:this.props.data,headerControlsProps:{showCopyAndDownload:!1,showHideShowColumnButton:!1,showPagination:!0},reactTableProps:{className:"table table-striped table-border-top",hideFilterInput:!0,defaultSort:this.columns.qValue.name}}),r.createElement("div",null,r.createElement("button",{style:{marginTop:20},className:"btn btn-primary btn-sm pull-right",onClick:function(){return e.props.onSelect(e.map_geneSymbol_selected)}},"Select")))}}]),t}(),Lt=Mt=At([s.observer],Mt),Gt=function(e){function t(){var e;return It(this,t),(e=kt(this,Rt(t).apply(this,arguments))).showAll=!1,e}return xt(t,r["Component"]),Ct(t,[{key:"renderGeneToggles",value:function(e){var t=this;return e.map(function(e){return r.createElement(s.Observer,null,function(){var n=!!t.props.map_geneSymbol_selected.get(e);return r.createElement("span",{key:e,className:B()(i.a.geneToggle,n?i.a.selected:i.a.notSelected),onClick:function(r){return t.props.map_geneSymbol_selected.set(e,!n)}},e)})})}},{key:"render",value:function(){var e=this,t=wt(this.props.gistic),n=t.slice(0,5),o=t.slice(5);return r.createElement("div",{className:i.a.GisticGeneToggles},r.createElement("div",{className:i.a.someGenes},this.renderGeneToggles(n),!!o.length&&r.createElement("a",{className:i.a.showMoreLess,onClick:function(){return e.showAll=!e.showAll}},this.showAll?"less":"+".concat(o.length," more"))),r.createElement("div",{className:i.a.moreGenes},this.showAll&&this.renderGeneToggles(o)))}}]),t}();At([L.observable],Gt.prototype,"showAll",void 0),Gt=At([s.observer],Gt);var Vt=n(662),Bt=n(586);function Ft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qt(e,t){return!t||"object"!==Ut(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ht(e){return(Ht=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qt(e,t){return(qt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ut(e){return(Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Kt=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Ut(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},Wt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Qt(this,Ht(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qt(e,t)}(t,f["d"]),n=t,(o=[{key:"render",value:function(){return this.store.genesetIdsQuery.error?r.createElement("div",{className:i.a.GeneSymbolValidator},r.createElement("span",{className:i.a.errorMessage},"Cannot validate gene sets because of invalid OQL. ".concat(this.store.genesetQueryErrorDisplayStatus===f.b.Focused?"Please click 'Submit' to see location of error.":this.store.genesetIdsQuery.error.message))):this.store.genesetIdsQuery.query.length?this.store.genesets.isError?r.createElement("div",{className:i.a.GeneSymbolValidator},r.createElement("span",{className:i.a.pendingMessage},"Unable to validate gene sets.")):this.store.genesets.isPending&&0===this.store.genesets.result.invalid.length?r.createElement("div",{className:i.a.GeneSymbolValidator},r.createElement("span",{className:i.a.pendingMessage},"Validating gene sets...")):this.store.genesets.result.invalid.length?r.createElement("div",{className:i.a.GeneSymbolValidator},r.createElement("div",{className:i.a.invalidBubble,title:"Please edit the gene sets."},r.createElement(p.a,{className:i.a.icon,name:"exclamation-circle"}),r.createElement("span",null,"Invalid gene sets.")),this.store.genesets.result.invalid.map(this.renderSuggestion,this)):r.createElement("div",{className:i.a.GeneSymbolValidator},r.createElement("div",{className:i.a.validBubble,title:"You can now submit the list."},r.createElement(p.a,{className:i.a.icon,name:"check-circle"}),r.createElement("span",null,"All gene sets are valid."))):null}},{key:"renderSuggestion",value:function(e,t){var n=this;return r.createElement("div",{key:t,className:i.a.suggestionBubble,title:"Could not find gene set. Click to remove it from the gene list.",onClick:function(){return n.store.replaceGeneset(e,"")}},r.createElement(p.a,{className:i.a.icon,name:"times-circle"}),r.createElement("span",{className:i.a.noChoiceLabel},e))}}])&&Ft(n.prototype,o),a&&Ft(n,a),t}(),Yt=Wt=Kt([s.observer],Wt),zt=n(836);function Xt(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Jt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zt(e,t){return!t||"object"!==tn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $t(e){return($t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function en(e,t){return(en=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tn(e){return(tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var nn=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":tn(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},rn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Zt(this,$t(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&en(e,t)}(t,f["d"]),n=t,(o=[{key:"handleOQLUpdate",value:function(e,t,n){n!==this.store.geneQuery&&(this.store.geneQuery=n,this.store.oql.error=e.error)}},{key:"render",value:function(){var e=this;return r.createElement(u.b,{overflow:!0,padded:!0,className:i.a.GeneSetSelector},r.createElement(h.a,{className:"sectionLabel",secondaryComponent:r.createElement("a",{target:"_blank",className:i.a.learnOql,href:Object(Qe.v)()},r.createElement("strong",null,"Hint:")," Learn Onco Query Language (OQL)",r.createElement("br",null),"to write more powerful queries"," ",r.createElement("i",{className:"fa fa-external-link"}))},"Enter Genes:"),r.createElement(u.a,{overflow:!0},r.createElement($.default,{value:this.selectedGeneListOption,options:this.geneListOptions,onChange:function(t){return e.store.geneQuery=t?t.value:""}}),r.createElement(Vt.b,{focus:this.store.geneQueryErrorDisplayStatus,inputGeneQuery:this.store.geneQuery,validateInputGeneQuery:!0,location:Vt.a.DEFAULT,textBoxPrompt:"Enter HUGO Gene Symbols, Gene Aliases, or OQL",callback:this.handleOQLUpdate,error:this.store.submitError,messages:this.store.oqlMessages},this.customError),r.createElement(Yt,null),r.createElement(M.Modal,{className:B()("cbioportal-frontend",i.a.MutSigGeneSelectorWindow),show:this.store.showMutSigPopup,onHide:function(){return e.store.showMutSigPopup=!1}},r.createElement(M.Modal.Header,{closeButton:!0},r.createElement(M.Modal.Title,null,"Recently Mutated Genes")),r.createElement(M.Modal.Body,null,r.createElement(Et,{initialSelection:this.store.geneIds,data:this.store.mutSigForSingleStudy.result,onSelect:function(t){e.store.applyGeneSelection(t),e.store.showMutSigPopup=!1}}))),r.createElement(M.Modal,{className:B()("cbioportal-frontend",i.a.GisticGeneSelectorWindow),show:this.store.showGisticPopup,onHide:function(){return e.store.showGisticPopup=!1}},r.createElement(M.Modal.Header,{closeButton:!0},r.createElement(M.Modal.Title,null,"Recurrent Copy Number Alterations (Gistic)")),r.createElement(M.Modal.Body,null,r.createElement(Lt,{initialSelection:this.store.geneIds,data:this.store.gisticForSingleStudy.result,onSelect:function(t){e.store.applyGeneSelection(t),e.store.showGisticPopup=!1}})))))}},{key:"selectedGeneListOption",get:function(){var e=this,t=this.geneListOptions.find(function(t){return t.value==e.store.geneQuery});return t?t.value:""}},{key:"geneListOptions",get:function(){var e=G;if(m.b.serverConfig.query_sets_of_genes){var t=m.a.parseQuerySetsOfGenes(m.b.serverConfig.query_sets_of_genes);t&&(e=t)}return[{label:"User-defined List",value:""}].concat(Xt(e.map(function(e){return{label:"".concat(e.id," (").concat(e.genes.length," genes)"),value:e.genes.join(" ")}})))}},{key:"customError",get:function(){return this.store.isQueryLimitReached?r.createElement("div",{className:i.a.geneCount},r.createElement("div",{className:"",title:"Please limit your queries to ".concat(this.store.geneLimit," genes or fewer.")},r.createElement(p.a,{className:i.a.icon,name:"exclamation-circle"}),r.createElement(zt.a,{sampleCount:this.store.approxSampleCount,queryProductLimit:m.b.serverConfig.query_product_limit,email:m.b.serverConfig.skin_email_contact}))):null}}])&&Jt(n.prototype,o),a&&Jt(n,a),t}();nn([L.computed],rn.prototype,"selectedGeneListOption",null),nn([L.computed],rn.prototype,"geneListOptions",null),nn([Bt.bind,L.action],rn.prototype,"handleOQLUpdate",null),nn([L.computed],rn.prototype,"customError",null);var on,an=rn=nn([s.observer],rn),sn=n(692);!function(e){e.custom="-1",e.mutation_cna="w_mut_cna",e.mutation="w_mut",e.cna="w_cna",e.all="all"}(on||(on={}));var ln=[{name:"All",description:"All cases in the selected cohorts",value:on.all,isdefault:!1},{name:"Cases with mutations data",description:"All cases with mutations data",value:on.mutation,isdefault:!1},{name:"Cases with copy number alterations data",description:"All cases with copy number alterations data",value:on.cna,isdefault:!1},{name:"Cases with both mutations and copy number alterations data",description:"All cases with both mutations and copy number alterations data",value:on.mutation_cna,isdefault:!1},{name:"User-defined Case List",description:"Specify your own case list",value:on.custom,isdefault:!0}];function un(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cn(e,t){return!t||"object"!==fn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dn(e){return(dn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pn(e,t){return(pn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fn(e){return(fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var yn=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":fn(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};function hn(e,t){return c.includes(e.textLabel.toLowerCase(),t.toLowerCase())}var mn=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=cn(this,dn(t).apply(this,arguments))).isQueryModified=!1,e.CaseIdsModeRadio=Object(s.observer)(function(t){return r.createElement("label",null,r.createElement("input",{type:"radio",checked:e.store.caseIdsMode==t.state,onChange:function(n){n.currentTarget.checked&&(e.store.caseIdsMode=t.state)}}),t.label)}),e}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pn(e,t)}(t,f["d"]),n=t,(o=[{key:"render",value:function(){var e=this;return!this.isQueryModified&&this.props.modifyQueryParams&&this.modifyQuery(),this.store.selectableSelectedStudyIds.length?r.createElement(u.b,{padded:!0,overflow:!0,className:i.a.CaseSetSelector,"data-test":"CaseSetSelector"},r.createElement("div",null,r.createElement(h.a,{className:"sectionLabel",secondaryComponent:r.createElement("a",{href:Object(Qe.B)(this.store.selectableSelectedStudyIds),target:"_blank"},"To build your own case set,",r.createElement("br",null),"try out our enhanced Study View."),promises:[this.store.sampleLists,this.store.asyncCustomCaseSet,this.store.profiledSamplesCount]},"Select Patient/Case Set:")),r.createElement("div",null,r.createElement($.default,{value:this.store.selectedSampleListId,options:this.caseSetOptions,filterOption:hn,onChange:function(t){return e.store.selectedSampleListId=t?t.value:void 0},"data-test":"caseSetSelector"}),!(this.store.selectedSampleListId!==f.a)&&r.createElement(u.a,{padded:!0},r.createElement("div",{className:i.a.radioRow},r.createElement(u.b,{padded:!0},r.createElement(this.CaseIdsModeRadio,{label:"By sample ID",state:"sample"}),r.createElement(this.CaseIdsModeRadio,{label:"By patient ID",state:"patient"}))),r.createElement("span",null,"Enter case IDs below:"),r.createElement("textarea",{title:"Enter case IDs",rows:6,cols:80,value:this.store.caseIds,onChange:function(t){return e.store.caseIds=t.currentTarget.value},"data-test":"CustomCaseSetInput"})))):null}},{key:"modifyQuery",value:function(){this.store.selectedSampleListId=this.props.modifyQueryParams.selectedSampleListId,this.store.caseIds=this.props.modifyQueryParams.selectedSampleIds.join("\n"),this.store.caseIdsMode=this.props.modifyQueryParams.caseIdsMode,this.isQueryModified=!0}},{key:"caseSetOptions",get:function(){var e,t,n,o=this.store.sampleLists.result.map(function(e){return{label:r.createElement(y.c,{placement:"right",mouseEnterDelay:0,overlay:r.createElement("div",{className:i.a.tooltip},e.description)},r.createElement("span",null,"".concat(e.name," (").concat(e.sampleCount,")"))),value:e.sampleListId,textLabel:e.name}}),a=(e=this.store.isVirtualStudySelected,t=this.store.isMultipleNonVirtualStudiesSelected,n=this.store.profiledSamplesCount.result,c.reduce(ln,function(r,o){if(o.isdefault)r.push(o);else if(t&&!e){var a=n[o.value];a>0&&r.push(Object.assign({},o,{name:"".concat(o.name," (").concat(a,")")}))}else if(e&&o.value===on.all){var i=n[o.value];i>0&&r.push(Object.assign({},o,{name:"".concat(o.name," (").concat(i,")")}))}return r},[])).map(function(e){return{value:e.value,label:r.createElement(y.c,{placement:"right",mouseEnterDelay:0,overlay:r.createElement("div",{className:i.a.tooltip},e.description)},r.createElement("span",null,e.name)),textLabel:e.name}});return o.concat(a)}}])&&un(n.prototype,o),a&&un(n,a),t}();yn([L.computed],mn.prototype,"caseSetOptions",null),yn([L.action],mn.prototype,"modifyQuery",null);var bn=mn=yn([s.observer],mn);function gn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vn(e,t){return!t||"object"!==En(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Sn(e){return(Sn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _n(e,t){return(_n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function En(e){return(En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var wn=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":En(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},Pn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),vn(this,Sn(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_n(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return this.props.ids.length>0?r.createElement("div",{className:"alert alert-danger","data-test":"unkown-study-warning",style:{marginBottom:0}},r.createElement("i",{className:"fa fa-exclamation-triangle"})," The following studies do not exist or you do not have access to them:",r.createElement("ul",{style:{margin:"10px 0"}},this.props.ids.map(function(e){return r.createElement("li",null,e)})),"Please resubmit your query below."):null}}])&&gn(n.prototype,o),a&&gn(n,a),t}(),Tn=Pn=wn([s.observer],Pn),On=n(8),Cn=n(968),In=n(830),kn=n(65);function Rn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xn(e){return(xn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jn(e,t){return(jn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function An(e){return(An="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Dn=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":An(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},Mn=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=xn(t).call(this,e))||"object"!==An(o)&&"function"!=typeof o?Nn(r):o)._showQueryControls=!1,n.handleSubmit=n.handleSubmit.bind(Nn(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jn(e,t)}(t,r["Component"]),n=t,(o=[{key:"handleSubmit",value:function(){this.store.submit(),this.props.onSubmit&&this.props.onSubmit()}},{key:"toggleQueryControls",value:function(){Q()(document).scrollTop(0),this._showQueryControls=!this._showQueryControls}},{key:"render",value:function(){var e=this;return r.createElement(u.a,{padded:!0,overflow:!0,className:B()("small",i.a.QueryContainer,{forkedMode:this.props.forkedMode})},this.props.showAlerts&&this.store.genes.isComplete&&this.store.genes.result.suggestions.length>0&&r.createElement("div",{className:"alert alert-danger","data-test":"invalidQueryAlert",style:{marginBottom:0}},r.createElement("i",{className:"fa fa-exclamation-triangle"})," Your query has invalid or out-dated gene symbols. Please correct below."),this.store.unknownStudyIds.isComplete&&r.createElement(Tn,{ids:this.store.unknownStudyIds.result}),this.store.forDownloadTab&&r.createElement("div",{className:"alert alert-danger",role:"alert"},"The Download interface has been removed. Enhanced download functionality is now available through the Query interface. Run a query with your gene(s) of interest and use the Download tab to download all available data types."),!this.store.forDownloadTab&&r.createElement(Ye.If,{condition:0===this.store.defaultSelectedIds.size||this.studiesDataReady},r.createElement(Ye.Then,null,r.createElement(Ye.If,{condition:this.props.forkedMode&&this.showQueryControls},r.createElement(u.b,{className:i.a.StudySelection},r.createElement(h.a,{className:"sectionLabel"},"Selected Studies:"," ",r.createElement("button",{"data-test":"modifyStudySelectionButton",className:"btn btn-default btn-xs",onClick:this.toggleQueryControls},"Modify")),r.createElement("div",{style:{marginLeft:8}},this.selectedStudySummary))),this.getWrappedCancerStudySelector,r.createElement(Ye.If,{condition:this.showQueryControls},r.createElement(r.Fragment,null,this.store.physicalStudyIdsInSelection.length>1?r.createElement(A,null):r.createElement(T,null),this.store.selectableSelectedStudyIds.length>0&&r.createElement(bn,{modifyQueryParams:this.props.modifyQueryParams}),r.createElement(an,null),!!this.store.isGenesetProfileSelected&&r.createElement(Fe,null),!!this.store.forDownloadTab&&r.createElement("span",{className:i.a.downloadSubmitExplanation},"Clicking submit will generate a tab-delimited file containing your requested data."),!!this.store.forDownloadTab&&r.createElement(me.a,{labelProps:{className:i.a.transposeDataMatrix},checked:this.store.transposeDataMatrix,onChange:function(t){return e.store.transposeDataMatrix=t.currentTarget.checked}},"Transpose data matrix"),r.createElement(u.b,{overflow:!0,padded:!0,className:B()(i.a.submitRow,"posRelative")},r.createElement("button",{style:{paddingLeft:50,paddingRight:50,marginRight:50},disabled:!this.store.submitEnabled,className:"btn btn-primary btn-lg",onClick:function(){return e.handleSubmit()},"data-test":"queryButton"},this.store.forDownloadTab?"Download":"Submit Query")))),r.createElement(Ye.If,{condition:!this.showQueryControls},r.createElement(u.b,{className:i.a.forkedButtons},r.createElement("div",{style:{width:330,textAlign:"right",marginRight:20}},r.createElement(In.a,{store:this.store})),r.createElement(y.c,{placement:"top",trigger:["hover"],destroyTooltipOnHide:!0,mouseEnterDelay:0,mouseLeaveDelay:0,disabled:this.store.selectableSelectedStudies.length>0,overlay:this.queryByGeneTooltipMessage},r.createElement("a",{"data-test":"queryByGeneButton",onClick:function(){return e.store.hasSelectedStudies&&e.toggleQueryControls()},"data-event":Object(kn.e)({action:"clickQueryByGeneButton",label:"",category:"homePage"}),className:B()("btn btn-primary btn-lg",{disabled:!this.store.hasSelectedStudies})},"Query By Gene")),"OR",r.createElement(y.c,{placement:"top",trigger:["hover"],destroyTooltipOnHide:!0,mouseEnterDelay:0,mouseLeaveDelay:0,disabled:!this.exploreCohortsButtonDisabled,overlay:this.exploreCohortsButtonTooltipMessage},r.createElement("a",{onClick:function(){return!e.exploreCohortsButtonDisabled&&e.store.openSummary()},"data-event":Object(kn.e)({action:"clickExploreStudiesButton",label:"",category:"homePage"}),className:B()("btn btn-primary btn-lg",{disabled:this.exploreCohortsButtonDisabled})},r.createElement("i",{style:{marginTop:5},className:"ci ci-pie-chart"})," ","Explore Selected Studies"))))),r.createElement(Ye.Else,null,r.createElement(O.a,{isLoading:!0,center:!0,size:"big"}))))}},{key:"store",get:function(){return this.props.store}},{key:"studiesDataReady",get:function(){return this.store.studiesHaveChangedSinceInitialization||this.store.selectableStudiesSet.isComplete&&this.store.initiallySelected.profileIds&&this.store.cancerTypes.isComplete&&this.store.cancerStudies.isComplete&&this.store.profiledSamplesCount.isComplete}},{key:"showQueryControls",get:function(){return!1===this.props.forkedMode||this._showQueryControls}},{key:"selectedStudySummary",get:function(){var e=this,t=null;if(this.store.selectableSelectedStudies.length>4){t=r.createElement("span",{className:"inlineBlock"},r.createElement(y.c,{overlay:function(){return e.store.selectableSelectedStudies.slice(4).map(function(e){return r.createElement("div",null,e.name)})}},r.createElement("a",null,"and"," ",this.store.selectableSelectedStudies.length-4," ","more")))}return r.createElement("span",{className:"inlineBlock"},this.store.selectableSelectedStudies.slice(0,4).reduce(function(e,t,n,o){return e.push(r.createElement("span",{className:i.a.studyName},t.name)),e},[]),t,t&&r.createElement("span",null,""),"(",r.createElement("b",null,this.store.profiledSamplesCount.result.all)," ",1===this.store.profiledSamplesCount.result.all?"sample":"total samples",")")}},{key:"getWrappedCancerStudySelector",get:function(){var e=r.createElement(l.a,{queryStore:this.store,forkedMode:this.props.forkedMode});return this.props.forkedMode?r.createElement("div",{style:{marginTop:0}},r.createElement(Cn.Fade,{duration:500,collapse:!1,className:"monkeys",unmountOnExit:!0,when:!this.showQueryControls},e)):e}},{key:"studyLimitedReached",get:function(){return this.store.selectableSelectedStudyIds.length>50}},{key:"exploreCohortsButtonDisabled",get:function(){return this.studyLimitedReached||!this.store.hasSelectedStudies}},{key:"exploreCohortsButtonTooltipMessage",get:function(){return 0===this.store.selectableSelectedStudyIds.length?"Please select at least one study above":this.studyLimitedReached?"Too many studies selected for study summary (limit: 50)":"Open summary of selected studies"}},{key:"queryByGeneTooltipMessage",get:function(){return 0===this.store.selectableSelectedStudies.length?"Please select at least one study above":"Continue to query configuration"}}])&&Rn(n.prototype,o),a&&Rn(n,a),t}();Dn([L.computed],Mn.prototype,"studiesDataReady",null),Dn([L.observable],Mn.prototype,"_showQueryControls",void 0),Dn([L.computed],Mn.prototype,"showQueryControls",null),Dn([L.computed],Mn.prototype,"selectedStudySummary",null),Dn([L.computed],Mn.prototype,"getWrappedCancerStudySelector",null),Dn([On.default],Mn.prototype,"toggleQueryControls",null),Dn([L.computed],Mn.prototype,"studyLimitedReached",null),Dn([L.computed],Mn.prototype,"exploreCohortsButtonDisabled",null),Dn([L.computed],Mn.prototype,"exploreCohortsButtonTooltipMessage",null),Dn([L.computed],Mn.prototype,"queryByGeneTooltipMessage",null);var Ln,Gn=Mn=Dn([Object(sn.b)(f.c),s.observer],Mn),Vn=n(605),Bn=n(88),Fn=n(178);!function(e){e.STUDY="STUDY",e.STUDY_COUNT="studies",e.GENE="GENE",e.GENE_COUNT="genes",e.PATIENT="PATIENT",e.PATIENT_COUNT="patients",e.SAMPLE="SAMPLE",e.SAMPLE_COUNT="samples"}(Ln||(Ln={}));n(978);var Qn=n(697),Hn=n(979),qn=n(711),Un=n.n(qn),Kn=n(127),Wn=n(89);function Yn(){return(Yn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function zn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xn(e){return(Xn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zn(e,t){return(Zn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $n(e){return($n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var er,tr=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":$n(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},nr=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,s)}l((r=r.apply(e,t||[])).next())})},rr=20,or=3;!function(e){e[e.SESSION=0]="SESSION",e[e.STUDY_LIST=1]="STUDY_LIST"}(er||(er={}));var ar=function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=Xn(t).apply(this,arguments),(e=!r||"object"!==$n(r)&&"function"!=typeof r?Jn(n):r).studyPageMultiplier=0,e.genePageMultiplier=0,e.patientPageMultiplier=0,e.samplePageMultiplier=0,e.inputValue="",e.isFocusing=!1,e.isLoading=!1,e.geneStudyQueryVirtualStudy=Object(y.S)(function(){return nr(Jn(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=m.b.serverConfig.default_cross_cancer_study_session_id,!m.a.sessionServiceIsEnabled()||!t){e.next=14;break}return e.prev=2,e.next=5,Kn.a.getVirtualStudy(t);case 5:return n=e.sent,e.abrupt("return",n);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:e.next=15;break;case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}},e,null,[[2,9]])}))},null),e.geneStudyQuery=Object(y.S)({await:function(){return[e.geneStudyQueryVirtualStudy]},invoke:function(){return e.geneStudyQueryVirtualStudy.result?Promise.resolve({type:er.SESSION,query:e.geneStudyQueryVirtualStudy.result.id,name:e.geneStudyQueryVirtualStudy.result.data.name}):Promise.resolve({type:er.STUDY_LIST,query:m.b.serverConfig.default_cross_cancer_study_list,name:m.b.serverConfig.default_cross_cancer_study_list_name})}}),e.options=Object(y.S)({await:function(){return[e.geneStudyQuery]},invoke:function(){var t=e.inputValue,n=e.geneStudyQuery.result;return t.length>0?Promise.all([Fn.a.getAllStudiesUsingGETWithHttpInfo({keyword:t,pageSize:or+rr*e.studyPageMultiplier}),Fn.a.getAllStudiesUsingGETWithHttpInfo({keyword:t,projection:"META"}),Fn.a.getAllGenesUsingGETWithHttpInfo({keyword:t,pageSize:or+rr*e.genePageMultiplier}),Fn.a.getAllGenesUsingGETWithHttpInfo({keyword:t,projection:"META"}),Fn.a.getAllPatientsUsingGETWithHttpInfo({keyword:t,pageSize:or+rr*e.patientPageMultiplier,projection:"DETAILED"}),Fn.a.getAllPatientsUsingGETWithHttpInfo({keyword:t,projection:"META"}),Fn.a.getSamplesByKeywordUsingGETWithHttpInfo({keyword:t,pageSize:or+rr*e.samplePageMultiplier}),Fn.a.getSamplesByKeywordUsingGETWithHttpInfo({keyword:t,projection:"META"}),Object(Qn.a)(0)]).then(function(r){return nr(Jn(e),void 0,void 0,regeneratorRuntime.mark(function e(){var o,a,i,s,l,u,c,d,p,f,y,h=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=r[0].body.map(this.studyToOption),a={value:parseInt(r[1].headers["total-count"])-o.length,type:Ln.STUDY_COUNT},i=r[2].body.map(this.geneToOption),s={value:parseInt(r[3].headers["total-count"])-i.length,type:Ln.GENE_COUNT},l=r[4].body.map(this.patientToOption),u={value:parseInt(r[5].headers["total-count"])-l.length,type:Ln.PATIENT_COUNT},c=r[6].body.map(this.sampleToOption),d={value:parseInt(r[7].headers["total-count"])-c.length,type:Ln.SAMPLE_COUNT},!(i.length+l.length<2*or&&a.value>0)){e.next=13;break}return p=2*or-(i.length+l.length),e.next=12,Fn.a.getAllStudiesUsingGETWithHttpInfo({keyword:t,pageSize:p+or+rr*this.studyPageMultiplier}).then(function(e){o=e.body.map(h.studyToOption)});case 12:a.value=a.value-p;case 13:return f=[],(y=[]).push({label:"Studies",options:o,groupData:a,instruction:"Click on a study to open its summary"}),a.value>0&&(o.push(a),f.push(a)),n&&(y.push({label:"Genes",options:i,groupData:s,instruction:"Click on a gene to query it across ".concat(n.name)}),s.value>0&&(i.push(s),f.push(s))),y.push({label:"Patients",options:l,groupData:u,instruction:"Click on a patient to see a summary"}),u.value>0&&(l.push(u),f.push(u)),y.push({label:"Samples",options:c,groupData:d,instruction:"Click on a sample to open its summary"}),d.value>0&&(c.push(d),f.push(d)),e.abrupt("return",y);case 23:case"end":return e.stop()}},e,this)}))}):Promise.resolve([])}}),e}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zn(e,t)}(t,r["Component"]),n=t,(o=[{key:"selectRef",value:function(e){this.select=e}},{key:"studyToOption",value:function(e,t){return{value:e.studyId,type:Ln.STUDY,studyId:e.studyId,name:e.name,allSampleCount:e.allSampleCount,index:t}}},{key:"geneToOption",value:function(e,t){return{value:e.entrezGeneId,type:Ln.GENE,hugoGeneSymbol:e.hugoGeneSymbol,cytoband:e.cytoband,index:t}}},{key:"patientToOption",value:function(e,t){return{value:e.uniquePatientKey,type:Ln.PATIENT,studyId:e.studyId,patientId:e.patientId,studyName:e.cancerStudy.name,index:t}}},{key:"sampleToOption",value:function(e,t){return{value:e.sampleId,type:Ln.SAMPLE,studyId:e.studyId,studyName:this.studies.get(e.studyId),patientId:e.patientId,sampleType:e.sampleType,index:t}}},{key:"handleChange",value:function(e){var t,n;if(e.type===Ln.STUDY)t={id:e.studyId},n=Wn.a.Study,this.trackClick(Wn.a.Study,this.inputValue);else if(e.type===Ln.GENE){var r=this.geneStudyQuery.isComplete&&this.geneStudyQuery.result.query;t={case_set_id:"all",gene_list:e.hugoGeneSymbol,cancer_study_list:r},n="results/cancerTypesSummary",this.trackClick("gene",this.inputValue)}else e.type===Ln.PATIENT?(t={studyId:e.studyId,caseId:e.patientId},n=Wn.a.Patient,this.trackClick(Wn.a.Patient,this.inputValue)):e.type===Ln.SAMPLE?(t={studyId:e.studyId,sampleId:e.value},n=Wn.a.Patient,this.trackClick("sample",this.inputValue)):e.type===Ln.STUDY_COUNT?this.studyPageMultiplier++:e.type===Ln.GENE_COUNT?this.genePageMultiplier++:e.type===Ln.PATIENT_COUNT?this.patientPageMultiplier++:e.type===Ln.SAMPLE_COUNT&&this.samplePageMultiplier++;n&&Object(y.B)().routingStore.updateRoute(t,n)}},{key:"trackClick",value:function(e,t){Object(kn.f)({category:"quickSearch",action:e,label:t})}},{key:"handleInputChange",value:function(e,t){var n=t.action;"set-value"!==n&&(e!=this.inputValue&&(this.studyPageMultiplier=0,this.genePageMultiplier=0,this.patientPageMultiplier=0,this.samplePageMultiplier=0),"input-change"===n&&(this.inputValue=e)),"input-blur"===n&&(this.isFocusing=!1)}},{key:"onFocus",value:function(){this.isFocusing=!0}},{key:"renderInput",value:function(e){return delete e.value,console.log(e),r.createElement("div",{className:"Select-input"},r.createElement("input",Yn({placeholder:"e.g. Lung, EGFR, TCGA-OR-A5J2"},e)))}},{key:"render",value:function(){return r.createElement("div",{onFocusCapture:this.onFocus},r.createElement(Bn.default,{options:this.options.result||[],autoFocus:!0,onInputChange:this.handleInputChange,onChange:this.handleChange,components:{Group:sr,GroupHeading:lr},formatOptionLabel:ur,controlShouldRenderValue:!1,filterOption:!1,inputValue:this.inputValue,isLoading:this.options.isPending,placeholder:"e.g. Lung, EGFR, TCGA-OR-A5J2",noOptionsMessage:function(){return"No results"},blurInputOnSelect:!1,closeMenuOnSelect:!1,onSelectResetsInput:!1,menuIsOpen:this.menuIsOpen,maxMenuHeight:550,styles:{dropdownIndicator:function(){return{display:"none"}},control:function(e){return Object.assign(Object.assign({},e),{cursor:"text"})},option:function(e,t){return t.isSelected?Object.assign(Object.assign({},e),{backgroundColor:"inherit",color:"inherit",":hover":{backgroundColor:"#DEEBFF"}}):Object.assign({},e)}}}),r.createElement("p",{style:{fontSize:"x-small",textAlign:"center",paddingTop:15}},"We would love to hear what you think:",r.createElement("a",{href:"mailto:cbioportal@googlegroups.com"},"cbioportal@googlegroups.com")))}},{key:"menuIsOpen",get:function(){return this.isFocusing&&this.inputValue.length>0}},{key:"studies",get:function(){return this.props.studies.reduce(function(e,t){return e.set(t.studyId,t.name),e},new Map)}}])&&zn(n.prototype,o),a&&zn(n,a),t}();tr([L.observable],ar.prototype,"studyPageMultiplier",void 0),tr([L.observable],ar.prototype,"genePageMultiplier",void 0),tr([L.observable],ar.prototype,"patientPageMultiplier",void 0),tr([L.observable],ar.prototype,"samplePageMultiplier",void 0),tr([L.observable],ar.prototype,"inputValue",void 0),tr([L.observable],ar.prototype,"isFocusing",void 0),tr([L.observable],ar.prototype,"isLoading",void 0),tr([L.computed],ar.prototype,"menuIsOpen",null),tr([L.computed],ar.prototype,"studies",null),tr([On.default],ar.prototype,"selectRef",null),tr([On.default],ar.prototype,"sampleToOption",null),tr([On.default,L.action],ar.prototype,"handleChange",null),tr([On.default,L.action],ar.prototype,"handleInputChange",null),tr([On.default,L.action],ar.prototype,"onFocus",null),tr([On.default],ar.prototype,"renderInput",null);var ir=ar=tr([s.observer],ar),sr=function(e){var t=e.data.groupData;t.value,Un()(t.type,t.value),t.value<rr&&t.value;return r.createElement("div",{className:Hn.optionGroup},r.createElement("div",{className:Hn.groupHeader},e.data.instruction),r.createElement(Bn.components.Group,e))},lr=function(e){return null};function ur(e){var t,n,o;return e.type===Ln.STUDY?(t=e.name,n="primary",o=e.allSampleCount+" samples","Select a study to open its summary"):e.type===Ln.GENE?(t=e.hugoGeneSymbol,n="success",o=e.cytoband||"-","Select a gene to query it across all TCGA PanCancer Atlas studies"):e.type===Ln.PATIENT?(t=e.patientId,n="danger",o=e.studyName,"Select a patient to see a summary"):e.type===Ln.SAMPLE?(t=e.value,n="warning",o="".concat(e.studyName?e.studyName:e.studyId),"Select a sample to open its summary"):t=e.value+" more "+Un()(e.type,e.value)+" (click to load "+(e.value<rr?e.value:rr)+" more)",r.createElement("div",{className:Hn.optionWrapper},n&&r.createElement("div",{className:Hn.optionLabelWrapper},r.createElement(M.Label,{bsStyle:n},e.type)),r.createElement("div",null,r.createElement("div",null,r.createElement("strong",null,t)),o&&r.createElement("small",null,o)))}function cr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dr(e,t){return!t||"object"!==yr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pr(e){return(pr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fr(e,t){return(fr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yr(e){return(yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var hr=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":yr(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},mr="quickSearch",br="defaultHomePageTab",gr=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=dr(this,pr(t).call(this,e)),e.showQuickSearchTab&&Object(y.B)().localStorage.getItem(br)===mr&&(n.activeTabId=Object(y.B)().localStorage.getItem(br)),n.store=e.getQueryStore(),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fr(e,t)}(t,r["Component"]),n=t,(o=[{key:"setDefaultTab",value:function(e){this.props.showQuickSearchTab&&(Object(y.B)().localStorage.defaultHomePageTab=e===mr?mr:void 0)}},{key:"trackQuickSearch",value:function(){Object(kn.f)({category:"quickSearch",action:"quickSearchLoad"})}},{key:"onSelectTab",value:function(e){this.store.forDownloadTab="download"===e,this.activeTabId=e}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:i.a.QueryAndDownloadTabs},r.createElement(Ye.If,{condition:m.b.serverConfig.skin_citation_rule_text},r.createElement("div",{className:"citationRule",dangerouslySetInnerHTML:{__html:m.b.serverConfig.skin_citation_rule_text}})),r.createElement(Vn.b,{activeTabId:this.activeTabId,onTabClick:this.onSelectTab,className:"mainTabs"},r.createElement(Vn.a,{id:"advanced",linkText:"Query",onTabDidMount:function(){return e.setDefaultTab(void 0)}},r.createElement(Gn,{forkedMode:this.props.forkedMode,onSubmit:this.props.onSubmit,store:this.store,modifyQueryParams:this.props.modifyQueryParams,showAlerts:this.props.showAlerts})),r.createElement(Vn.a,{id:mr,linkText:r.createElement("span",null,"Quick Search"," ",r.createElement("strong",{className:"beta-text"},"Beta!")),hide:!this.props.showQuickSearchTab,onTabDidMount:function(){e.setDefaultTab(mr),e.trackQuickSearch()}},r.createElement("div",null,this.store.cancerStudies.isComplete&&r.createElement(ir,{studies:this.store.cancerStudies.result}))),r.createElement(Vn.a,{id:"download",linkText:"Download",hide:!this.props.showDownloadTab,onTabDidMount:function(){return e.setDefaultTab(void 0)}},r.createElement(Gn,{forkedMode:!1,onSubmit:this.props.onSubmit,store:this.store,showAlerts:this.props.showAlerts}))))}},{key:"quickSearchDefaulted",get:function(){return Object(y.B)().localStorage.getItem(br)===mr}}])&&cr(n.prototype,o),a&&cr(n,a),t}();gr.defaultProps={forkedMode:!0},hr([L.observable.ref],gr.prototype,"store",void 0),hr([L.observable],gr.prototype,"activeTabId",void 0),hr([On.default],gr.prototype,"setDefaultTab",null),hr([On.default,L.action],gr.prototype,"onSelectTab",null),gr=hr([s.observer],gr);t.a=gr},872:function(e,t,n){e.exports=n(16)(910)},937:function(e,t,n){"use strict";(function(e){var r=n(4),o=n(0),a=n(21),i=n.n(a),s=n(648),l=n(591),u=n.n(l),c=n(9),d=n.n(c),p=n(1016),f=n(7),y=n(2),h=n(104),m=n.n(h),b=n(17),g=n(650),v=n(56),S=n(948),_=n.n(S),E=n(6),w=n(8),P=n(701),T=n(955),O=n(830),C=n(584);function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var A=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":j(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},D=function(t){function n(e){var t,a=this;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=R(this,x(n).call(this,e))).handlers={onSummaryClick:function(){t.store.openSummary()},onCheckAllFiltered:function(){t.logic.mainView.toggleAllFiltered()},onClearFilter:function(){t.store.setSearchText("")}},t.CancerTypeList=Object(f.observer)(function(){var e=t.logic.cancerTypeListView.getChildCancerTypes(t.store.treeData.rootCancerType);return o.createElement("ul",{className:u.a.cancerTypeList},e.map(function(e,t){return o.createElement(a.CancerTypeListItem,{key:t,cancerType:e})}))}),t.CancerTypeListItem=Object(f.observer)(function(e){var n,a=e.cancerType,i=Object(y.expr)(function(){return t.logic.cancerTypeListView.getDescendantCancerStudies(a).length}),s=r.includes(t.store.selectedCancerTypeIds,a.cancerTypeId),l=t.logic.isHighlighted(a),c=d()((I(n={},u.a.selectable,!0),I(n,u.a.selected,s),I(n,u.a.matchingNodeText,!!t.store.searchText&&l),I(n,u.a.nonMatchingNodeText,!!t.store.searchText&&!l),I(n,u.a.containsSelectedStudies,Object(y.expr)(function(){return t.logic.cancerTypeContainsSelectedStudies(a)})),n));return o.createElement("li",{className:c,onMouseDown:t.getCancerTypeListClickHandler(a)},o.createElement("span",{className:u.a.cancerTypeListItemLabel},a.name),o.createElement("span",{className:u.a.cancerTypeListItemCount},i))}),t.store=t.props.queryStore,t}var a,l,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(n,o["Component"]),a=n,(l=[{key:"getCancerTypeListClickHandler",value:function(e){var t=this;return function(n){return t.store.selectCancerType(e,n.ctrlKey)}}},{key:"selectTCGAPanAtlas",value:function(){this.logic.mainView.selectAllMatchingStudies(P.a)}},{key:"selectMatchingStudies",value:function(e){e&&(1===e.length&&/^\*.*\*$/.test(e[0])?this.logic.mainView.selectAllMatchingStudies(e[0].replace(/\*/g,"")):this.logic.mainView.selectAllMatchingStudies(e))}},{key:"componentDidMount",value:function(){var e,t=this;this.windowSizeDisposer=Object(y.reaction)(function(){return C.a.size},function(){t.props.forkedMode&&(clearTimeout(e),e=setTimeout(function(){return t.setListHeight()},200))},{fireImmediately:!0})}},{key:"componentWillUnmount",value:function(){this.windowSizeDisposer()}},{key:"setListHeight",value:function(){var t=e(i.a.findDOMNode(this)),n=C.a.size.height-t.offset().top;n=n<200?200:n,t.css("height",n-75)}},{key:"render",value:function(){var e=this,t=this.logic.mainView.getSelectionReport(),n=t.shownStudies,a=t.shownAndSelectedStudies,i=this.logic.mainView.quickSelectButtons(E.b.serverConfig.skin_quick_select_buttons);return o.createElement(s.a,{overflow:!0,"data-test":"studyList",className:u.a.CancerStudySelector},o.createElement(s.b,{overflow:!0,className:u.a.CancerStudySelectorHeader},o.createElement(g.a,{promises:[this.store.cancerTypes,this.store.cancerStudies]},"Select Studies for Visualization & Analysis:"),this.store.selectableStudiesSet.isComplete&&o.createElement("div",null,o.createElement(O.a,{store:this.store})),o.createElement(f.Observer,null,function(){var t=E.a.skin_example_study_queries(E.b.serverConfig.skin_example_study_queries||"");e.store.searchText&&t.indexOf(e.store.searchText)<0&&(t=[e.store.searchText].concat(t));var n=null,r=t.map(function(e,t){return{value:e,sortKey:t}});return o.createElement("div",{style:{display:"flex",alignItems:"center"}},e.store.searchText&&o.createElement("span",{"data-test":"clearStudyFilter",onClick:function(t){e.autosuggest.setState({inputValue:""}),e.handlers.onClearFilter()},style:{fontSize:18,cursor:"pointer",color:"#999999",position:"relative",left:164,zIndex:10}},"x"),o.createElement(_.a,{datalist:r,ref:function(t){return e.autosuggest=t},placeholder:"Search...",bsSize:"small",onChange:function(t){null!==n&&(window.clearTimeout(n),n=null),n=window.setTimeout(function(){e.store.setSearchText(t)},400)},onFocus:function(t){0===t.length&&setTimeout(function(){e.autosuggest.setState({open:!0})},400)}}))})),o.createElement(b.If,{condition:this.studiesDataComplete},o.createElement(s.b,{className:u.a.cancerStudySelectorBody},o.createElement(b.If,{condition:this.store.maxTreeDepth>0},o.createElement(b.Then,null,o.createElement("div",{className:u.a.cancerTypeListContainer},o.createElement(this.CancerTypeList,null)))),o.createElement("div",{className:u.a.cancerStudyListContainer,"data-test":"cancerTypeListContainer"},o.createElement("div",{className:"checkbox",style:{marginLeft:19}},o.createElement(b.If,{condition:n.length>0},o.createElement(b.If,{condition:!this.logic.mainView.isFiltered&&!r.isEmpty(i)},o.createElement(b.Then,null,o.createElement("div",{className:u.a.quickSelect},o.createElement(T.a,{onSelect:this.selectMatchingStudies,buttonsConfig:i}))),o.createElement(b.Else,null,o.createElement("label",null,o.createElement("input",{type:"checkbox","data-test":"selectAllStudies",style:{top:-2},onClick:this.handlers.onCheckAllFiltered,checked:a.length===n.length}),o.createElement("strong",null,a.length===n.length?"Deselect all listed studies ".concat(n.length<this.store.cancerStudies.result.length?"matching filter":""," (").concat(n.length,")"):"Select all listed studies ".concat(n.length<this.store.cancerStudies.result.length?"matching filter":"","  (").concat(n.length,")")))))),o.createElement(b.If,{condition:this.store.cancerStudies.isComplete&&this.store.cancerTypes.isComplete&&0===n.length},o.createElement("p",null,"There are no studies matching your filter."))),o.createElement(p.a,null)))),o.createElement(v.Modal,{className:d()(u.a.SelectedStudiesWindow,"cbioportal-frontend"),show:this.store.showSelectedStudiesOnly,onHide:function(){return e.store.showSelectedStudiesOnly=!1}},o.createElement(v.Modal.Header,{closeButton:!0},o.createElement(v.Modal.Title,null,"Selected Studies")),o.createElement(v.Modal.Body,null,o.createElement(p.a,{showSelectedStudiesOnly:!0}))))}},{key:"studiesDataComplete",get:function(){return this.store.cancerTypes.isComplete&&this.store.cancerStudies.isComplete&&this.store.userVirtualStudies.isComplete}},{key:"logic",get:function(){return this.store.studyListLogic}}])&&k(a.prototype,l),c&&k(a,c),n}();A([y.computed],D.prototype,"studiesDataComplete",null),A([m.a],D.prototype,"getCancerTypeListClickHandler",null),A([w.default,y.action],D.prototype,"selectTCGAPanAtlas",null),A([w.default,y.action],D.prototype,"selectMatchingStudies",null),D=A([f.observer],D),t.a=D}).call(this,n(11))},938:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__3uFIJ",framedImage:"styles-module__framedImage__3chnD",padded:"styles-module__padded__3vpqj",column:"styles-module__column__2pa-R",row:"styles-module__row__3l99O"}},939:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__agNQJ",framedImage:"styles-module__framedImage__JjRC-",selectAllStudies:"styles-module__selectAllStudies__2gWhF",SelectedStudyList:"styles-module__SelectedStudyList__27Hpt",StudyList:"styles-module__StudyList__2mxsz",deselectAll:"styles-module__deselectAll__26p-l",Level0:"styles-module__Level0__1RUPZ",Level1:"styles-module__Level1__2R0IW",Level3:"styles-module__Level3__1vXaT",Level4:"styles-module__Level4__3ZJ1g",Level2:"styles-module__Level2__3AEJ-",CancerType:"styles-module__CancerType__Zm_qX",Study:"styles-module__Study__398QL",indentArrow:"styles-module__indentArrow__32udx",SelectAll:"styles-module__SelectAll__3SSsJ",StudyName:"styles-module__StudyName__3IA_4",DeletedStudy:"styles-module__DeletedStudy__2axOg",StudySamples:"styles-module__StudySamples__3_cjf",StudyMeta:"styles-module__StudyMeta__3UFnp",StudyLinks:"styles-module__StudyLinks__cMCHs",summaryIcon:"styles-module__summaryIcon__WR75I",iconWithTooltip:"styles-module__iconWithTooltip__2yBW3",icon:"styles-module__icon__1ZBlQ",trashIcon:"styles-module__trashIcon__1z-wJ",infoCircleIcon:"styles-module__infoCircleIcon__27xSR",tooltip:"styles-module__tooltip__b54B6",fadein:"styles-module__fadein__2G2-B"}},945:function(e,t,n){},946:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__1fCuf",framedImage:"styles-module__framedImage__1w-Q4",SectionHeader:"styles-module__SectionHeader__3RwOA",error:"styles-module__error__1QyPg"}},947:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__3FkcF",framedImage:"styles-module__framedImage__Jd87U",error:"styles-module__error__19z3B",icon:"styles-module__icon__1tBLC"}},955:function(e,t,n){"use strict";var r=n(0),o=n(4),a=n(7),i=n(3);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":p(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,c(t).apply(this,arguments))}var n,a,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this;return r.createElement("div",null,"Quick select:",o.map(this.props.buttonsConfig,function(t,n){var o=s(n.split("|"),2),a=o[0],l=o[1],u=r.createElement("button",{"data-test":"selectPanCan",className:"btn btn-default btn-xs",onClick:function(){return e.props.onSelect(t)}},a),c=r.createElement("span",{style:{display:"inline-block",width:"300px"}},l||"");return l?r.createElement(i.c,{overlay:c},u):u}))}}])&&l(n.prototype,a),p&&l(n,p),t}();y=f([a.observer],y),t.a=y},957:function(e,t,n){},967:function(e,t,n){},978:function(e,t,n){},979:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__3ybLz",framedImage:"styles-module__framedImage__1LRLJ",optionGroup:"styles-module__optionGroup__2f4nW",groupHeader:"styles-module__groupHeader__1pzK0",optionWrapper:"styles-module__optionWrapper__10YFL",optionLabelWrapper:"styles-module__optionLabelWrapper__Nj0Ws"}},992:function(e,t,n){e.exports=n(16)(388)}}]);