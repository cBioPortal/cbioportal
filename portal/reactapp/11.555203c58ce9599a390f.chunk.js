(window.webpackJsonp=window.webpackJsonp||[]).push([[11,3,5,6],Array(781).concat([function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1),i=n.n(o),a=n(17),s=n.n(a),l=n(102),u=n.n(l),c=n(9),p=n(2),d=n(11),f=n(1095),h=n(792),m=n(6),y=n(36),g=n(12),b=n(1087),v=n(304),_=n(44),S=n(3);function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var P=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":T(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};function x(e){return e.description?r.createElement("span",null,e.title,r.createElement(S.d,{placement:"right",overlay:r.createElement("span",null,e.description)},r.createElement("i",{className:"fa fa-info-circle",style:{marginLeft:"0.2rem"}}))):e.title}var A=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),O(this,C(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return void 0===this.props.germlineContent?r.createElement(r.Fragment,null,this.somaticInfo,this.germlinePlaceholder):r.createElement(y.p,E({badgeSelectorOptions:this.mutationStatusFilterOptions},this.props))}},{key:"mutationStatusFilterOptions",get:function(){var e=[{value:"Somatic",label:x(this.props.somaticContent),badgeStyleOverride:y.n,badgeStyleSelectedOverride:y.n}];return this.props.germlineContent&&e.push({value:"Germline",label:x(this.props.germlineContent),badgeStyleOverride:y.n,badgeStyleSelectedOverride:y.n}),e}},{key:"somaticInfo",get:function(){return this.props.rates?r.createElement(y.b,{label:x(this.props.somaticContent),badgeContent:"".concat(Object(g.q)(this.props.rates.Somatic),"%"),badgeStyleOverride:this.mutationStatusFilterOptions[0].badgeStyleOverride}):null}},{key:"germlinePlaceholder",get:function(){return r.createElement("div",{"data-test":"germlineMutationRate",className:"invisible"},"%")}}])&&w(n.prototype,o),i&&w(n,i),t}();P([p.computed],A.prototype,"mutationStatusFilterOptions",null);var j=A=P([c.observer],A);function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var L=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":R(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},G=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),N(this,M(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement("span",{"data-test":"mutation-rate-summary"},r.createElement(j,{filter:this.props.mutationStatusFilter,onSelect:this.props.onMutationStatusSelect,rates:{Germline:this.germlineMutationRate,Somatic:this.somaticMutationRate},somaticContent:{title:"Somatic Mutation Frequency",description:"Percentage of samples with a somatic mutation in ".concat(this.props.hugoGeneSymbol)},germlineContent:this.germlineMutationRate>0?{title:"Germline Mutation Frequency",description:"Percentage of samples with a germline mutation in ".concat(this.props.hugoGeneSymbol)}:void 0}))}},{key:"germlineMutationRate",get:function(){var e;return"pending"!==this.props.germlineConsentedSamples.status&&(e=this.props.germlineConsentedSamples&&this.props.germlineConsentedSamples.result&&this.props.germlineConsentedSamples.result.length>0?this.props.germlineConsentedSamples.result:this.props.samples),e?Object(_.g)(this.props.hugoGeneSymbol,this.props.mutations,this.props.molecularProfileIdToMolecularProfile.result,e):0}},{key:"somaticMutationRate",get:function(){return this.props.samples.length>0?Object(_.q)(this.props.hugoGeneSymbol,this.props.mutations,this.props.molecularProfileIdToMolecularProfile.result,this.props.samples):0}}])&&I(n.prototype,o),i&&I(n,i),t}();L([p.computed],G.prototype,"germlineMutationRate",null),L([p.computed],G.prototype,"somaticMutationRate",null);var V=G=L([c.observer],G),B=n(942),F=n(864),H=n(820),U=n(865),W=n(308);function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e,t){return!t||"object"!==X(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Q(e,t,n){return(Q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=K(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Z=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":X(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},J=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),z(this,K(t).call(this,e))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(t,B["b"]),n=t,(o=[{key:"componentWillUpdate",value:function(e){this._columns[B.a.STUDY].visible=!!(e.studyIdToStudy&&Object.keys(e.studyIdToStudy).length>1)}},{key:"generateColumns",value:function(){var e=this;Q(K(t.prototype),"generateColumns",this).call(this),this._columns[B.a.CANCER_TYPE].visible=F.a.isVisible(this.props.dataStore?this.props.dataStore.allData:this.props.data,this.props.uniqueSampleKeyToTumorType),this._columns[B.a.TUMOR_ALLELE_FREQ].visible=H.a.isVisible(this.props.dataStore?this.props.dataStore.allData:this.props.data),this._columns[B.a.ANNOTATION].shouldExclude=function(){return!1===e.props.isCanonicalTranscript},this._columns[B.a.STUDY].order=0,this._columns[B.a.SAMPLE_ID].order=10,this._columns[B.a.CANCER_TYPE].order=15,this._columns[B.a.PROTEIN_CHANGE].order=20,this._columns[B.a.ANNOTATION].order=30,this._columns[B.a.FUNCTIONAL_IMPACT].order=38,this._columns[B.a.MUTATION_TYPE].order=40,this._columns[B.a.VARIANT_TYPE].order=45,this._columns[B.a.ASCN_METHOD].order=46,this._columns[B.a.CLONAL].order=47,this._columns[B.a.CANCER_CELL_FRACTION].order=48,this._columns[B.a.EXPECTED_ALT_COPIES].order=49,this._columns[B.a.ASCN_COPY_NUM].order=50,this._columns[B.a.COPY_NUM].order=51,this._columns[B.a.COSMIC].order=60,this._columns[B.a.MUTATION_STATUS].order=70,this._columns[B.a.VALIDATION_STATUS].order=80,this._columns[B.a.CENTER].order=100,this._columns[B.a.CHROMOSOME].order=110,this._columns[B.a.START_POS].order=120,this._columns[B.a.END_POS].order=130,this._columns[B.a.REF_ALLELE].order=140,this._columns[B.a.VAR_ALLELE].order=150,this._columns[B.a.HGVSG].order=151,this._columns[B.a.HGVSC].order=152,this._columns[B.a.TUMOR_ALLELE_FREQ].order=160,this._columns[B.a.NORMAL_ALLELE_FREQ].order=170,this._columns[B.a.VAR_READS].order=180,this._columns[B.a.REF_READS].order=190,this._columns[B.a.VAR_READS_N].order=200,this._columns[B.a.REF_READS_N].order=210,this._columns[B.a.NUM_MUTATIONS].order=220,this._columns[B.a.EXON].order=230,this._columns[B.a.GNOMAD].order=260,this._columns[B.a.CLINVAR].order=270,this._columns[B.a.DBSNP].order=280,this._columns[B.a.CANCER_TYPE].shouldExclude=function(){return!e.props.uniqueSampleKeyToTumorType},this._columns[B.a.CLONAL].shouldExclude=function(){return!e.props.existsSomeMutationWithAscnProperty[W.a.CCF_EXPECTED_COPIES_STRING]},this._columns[B.a.ASCN_METHOD].shouldExclude=function(){return!e.props.existsSomeMutationWithAscnProperty[W.a.ASCN_METHOD_STRING]},this._columns[B.a.CANCER_CELL_FRACTION].shouldExclude=function(){return!e.props.existsSomeMutationWithAscnProperty[W.a.CCF_EXPECTED_COPIES_STRING]},this._columns[B.a.EXPECTED_ALT_COPIES].shouldExclude=function(){return!e.props.existsSomeMutationWithAscnProperty[W.a.EXPECTED_ALT_COPIES_STRING]},this._columns[B.a.ASCN_COPY_NUM].shouldExclude=function(){return!e.props.existsSomeMutationWithAscnProperty[W.a.ASCN_INTEGER_COPY_NUMBER_STRING]||!e.props.existsSomeMutationWithAscnProperty[W.a.TOTAL_COPY_NUMBER_STRING]||!e.props.existsSomeMutationWithAscnProperty[W.a.MINOR_COPY_NUMBER_STRING]},this._columns[B.a.NUM_MUTATIONS].shouldExclude=function(){return!e.props.mutationCountCache},this._columns[B.a.EXON].render=function(t){return U.a.renderFunction(t,e.props.genomeNexusCache,!1)},this._columns[B.a.EXON].headerRender=function(){return r.createElement("span",{style:{display:"inline-block"}},"Exon",r.createElement("br",null),"(",e.props.totalNumberOfExons," in total)")}}}])&&q(n.prototype,o),i&&q(n,i),t}();J.defaultProps=Object.assign(Object.assign({},B.b.defaultProps),{columns:[B.a.STUDY,B.a.SAMPLE_ID,B.a.COPY_NUM,B.a.ASCN_METHOD,B.a.ASCN_COPY_NUM,B.a.ANNOTATION,B.a.HGVSG,B.a.FUNCTIONAL_IMPACT,B.a.REF_READS_N,B.a.VAR_READS_N,B.a.REF_READS,B.a.VAR_READS,B.a.START_POS,B.a.END_POS,B.a.REF_ALLELE,B.a.VAR_ALLELE,B.a.MUTATION_STATUS,B.a.VALIDATION_STATUS,B.a.CENTER,B.a.CHROMOSOME,B.a.PROTEIN_CHANGE,B.a.MUTATION_TYPE,B.a.VARIANT_TYPE,B.a.CLONAL,B.a.CANCER_CELL_FRACTION,B.a.EXPECTED_ALT_COPIES,B.a.COSMIC,B.a.TUMOR_ALLELE_FREQ,B.a.NORMAL_ALLELE_FREQ,B.a.CANCER_TYPE,B.a.NUM_MUTATIONS,B.a.EXON,B.a.HGVSC,B.a.GNOMAD,B.a.CLINVAR,B.a.DBSNP]});var $=J=Z([c.observer],J);function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e,t){return!t||"object"!==oe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ie=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":oe(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ae=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),te(this,ne(t).call(this,e))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(t,b["a"]),n=t,(o=[{key:"onMutationStatusSelect",value:function(e,t){Object(y.S)(e,t,this.store.dataStore,y.f.MUTATION_STATUS,v.a)}},{key:"mutationStatusFilter",get:function(){return this.store.dataStore.dataFilters.find(function(e){return e.id===v.a})}},{key:"mutationRateSummary",get:function(){return this.props.store.germlineConsentedSamples&&this.props.store.germlineConsentedSamples.result&&this.props.store.mutationData.isComplete&&this.props.store.mutationData.result.length>0?r.createElement(V,{hugoGeneSymbol:this.props.store.gene.hugoGeneSymbol,molecularProfileIdToMolecularProfile:this.props.store.molecularProfileIdToMolecularProfile,mutations:this.props.store.mutationData.result,samples:this.props.store.samples.result,germlineConsentedSamples:this.props.store.germlineConsentedSamples,onMutationStatusSelect:this.onMutationStatusSelect,mutationStatusFilter:this.mutationStatusFilter}):null}},{key:"isMutationTableDataLoading",get:function(){return"pending"===Object(g.H)(this.props.store.clinicalDataForSamples,this.props.store.studiesForSamplesWithoutCancerTypeClinicalData,this.props.store.canonicalTranscript,this.props.store.mutationData,this.props.store.indexedVariantAnnotations,this.props.store.activeTranscript,this.props.store.clinicalDataGroupedBySampleMap)}},{key:"totalExonNumber",get:function(){var e=this.props.store.canonicalTranscript.result&&this.props.store.canonicalTranscript.result.transcriptId,t=this.props.store.activeTranscript.result&&this.props.store.activeTranscript.result===e?this.props.store.canonicalTranscript.result:this.props.store.transcriptsByTranscriptId[this.props.store.activeTranscript.result];return t&&t.exons&&t.exons.length>0?t.exons.length.toString():"None"}},{key:"mutationTableComponent",get:function(){return r.createElement($,{uniqueSampleKeyToTumorType:this.props.store.uniqueSampleKeyToTumorType,oncoKbCancerGenes:this.props.store.oncoKbCancerGenes,discreteCNACache:this.props.discreteCNACache,studyIdToStudy:this.props.store.studyIdToStudy.result,molecularProfileIdToMolecularProfile:this.props.store.molecularProfileIdToMolecularProfile.result,pubMedCache:this.props.pubMedCache,mutationCountCache:this.props.mutationCountCache,genomeNexusCache:this.props.genomeNexusCache,genomeNexusMutationAssessorCache:this.props.genomeNexusMutationAssessorCache,dataStore:this.props.store.dataStore,itemsLabelPlural:this.itemsLabelPlural,downloadDataFetcher:this.props.store.downloadDataFetcher,myCancerGenomeData:this.props.store.myCancerGenomeData,hotspotData:this.props.store.indexedHotspotData,indexedVariantAnnotations:this.props.store.indexedVariantAnnotations,indexedMyVariantInfoAnnotations:this.props.store.indexedMyVariantInfoAnnotations,cosmicData:this.props.store.cosmicData.result,oncoKbData:this.props.store.oncoKbData,usingPublicOncoKbInstance:this.props.store.usingPublicOncoKbInstance,civicGenes:this.props.store.civicGenes,civicVariants:this.props.store.civicVariants,userEmailAddress:this.props.userEmailAddress,enableOncoKb:this.props.enableOncoKb,enableFunctionalImpact:this.props.enableGenomeNexus,enableHotspot:this.props.enableHotspot,enableMyCancerGenome:this.props.enableMyCancerGenome,enableCivic:this.props.enableCivic,totalNumberOfExons:this.totalExonNumber,generateGenomeNexusHgvsgUrl:this.props.store.generateGenomeNexusHgvsgUrl,isCanonicalTranscript:this.props.store.isCanonicalTranscript,selectedTranscriptId:this.props.store.activeTranscript.result,sampleIdToClinicalDataMap:this.props.store.clinicalDataGroupedBySampleMap,existsSomeMutationWithAscnProperty:this.props.existsSomeMutationWithAscnProperty})}},{key:"mutationTable",get:function(){return r.createElement("span",null,!this.isMutationTableDataLoading&&this.mutationTableComponent)}}])&&ee(n.prototype,o),i&&ee(n,i),t}();ie([p.computed],ae.prototype,"mutationStatusFilter",null),ie([p.computed],ae.prototype,"mutationRateSummary",null),ie([m.default,p.action],ae.prototype,"onMutationStatusSelect",null);var se=ae=ie([c.observer],ae),le=n(968),ue=n(969),ce=n(8),pe=n(294),de=(n(1167),n(295)),fe=n(18),he=n(292),me=n(66);function ye(){return(ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _e(e,t){return(_e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Se(e){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ee=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Se(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},we=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=be(t).call(this,e))||"object"!==Se(o)&&"function"!=typeof o?ve(r):o).handleTabChange.bind(ve(n)),n.userSelectionStore=new ue.a,n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_e(e,t)}(t,r["Component"]),n=t,(o=[{key:"onToggleOql",value:function(){this.props.store.mutationsTabFilteringSettings.useOql=!this.props.store.mutationsTabFilteringSettings.useOql}},{key:"onToggleVUS",value:function(){this.props.store.mutationsTabFilteringSettings.excludeVus=!this.props.store.mutationsTabFilteringSettings.excludeVus}},{key:"onToggleGermline",value:function(){this.props.store.mutationsTabFilteringSettings.excludeGermline=!this.props.store.mutationsTabFilteringSettings.excludeGermline}},{key:"setSelectedGeneSymbol",value:function(e){this.props.urlWrapper.updateURL({mutations_gene:e})}},{key:"render",value:function(){var e=this,t=this.selectedGeneSymbol;return r.createElement("div",{"data-test":"mutationsTabDiv"},this.props.store.mutationsByGene.isComplete&&r.createElement(h.b,{id:"mutationsPageTabs",activeTabId:t,onTabClick:function(t){return e.handleTabChange(t)},className:"pillTabs resultsPageMutationsGeneTabs",arrowStyle:{"line-height":.8},tabButtonStyle:"pills",unmountOnHide:!0},this.generateTabs(this.props.store.hugoGeneSymbols,this.props.store.mutationsByGene.result)),this.props.store.mutationsByGene.isPending&&r.createElement(me.a,{center:!0,size:"big",isLoading:!0}))}},{key:"generateTabs",value:function(e,t){var n=this,o=[];return e.forEach(function(e){if(t[e]){var i=t[e].length>0?void 0:{color:"#bbb"};o.push(r.createElement(h.a,{key:e,id:e,linkText:e,anchorStyle:i},n.selectedGeneSymbol===e&&n.geneTabContent))}}),o}},{key:"handleTabChange",value:function(e){this.setSelectedGeneSymbol(e)}},{key:"onTranscriptChange",value:function(e){this.props.urlWrapper.updateURL({mutations_transcript_id:e})}},{key:"selectedGeneSymbol",get:function(){return this.props.urlWrapper.query.mutations_gene&&this.props.store.hugoGeneSymbols.includes(this.props.urlWrapper.query.mutations_gene)?this.props.urlWrapper.query.mutations_gene:this.props.store.hugoGeneSymbols[0]}},{key:"selectedGene",get:function(){var e=this;return i.a.find(this.props.store.genes.result,function(t){return t.hugoGeneSymbol===e.selectedGeneSymbol})}},{key:"geneTabContent",get:function(){if(this.selectedGene&&this.props.store.getMutationMapperStore(this.selectedGene)){var e=this.props.store.getMutationMapperStore(this.selectedGene);return r.createElement("div",null,r.createElement("div",{className:"tabMessageContainer"},r.createElement(pe.a,{className:"mutations-oql-status-banner",store:this.props.store,tabReflectsOql:this.props.store.mutationsTabFilteringSettings.useOql,isUnaffected:!this.props.store.queryContainsMutationOql,onToggle:this.onToggleOql}),r.createElement(de.a,{store:this.props.store,mutationsTabModeSettings:{excludeVUS:this.props.store.mutationsTabFilteringSettings.excludeVus,excludeGermline:this.props.store.mutationsTabFilteringSettings.excludeGermline,toggleExcludeVUS:this.onToggleVUS,toggleExcludeGermline:this.onToggleGermline,hugoGeneSymbol:this.selectedGene.hugoGeneSymbol}}),r.createElement(he.a,{store:this.props.store})),r.createElement(se,ye({},Object(le.a)(Object.assign(Object.assign({},ce.b.serverConfig),{ensembl_transcript_url:this.props.store.ensemblLink,show_oncokb:!!e.isCanonicalTranscript&&ce.b.serverConfig.show_oncokb,show_hotspot:!!e.isCanonicalTranscript&&ce.b.serverConfig.show_hotspot})),{oncoKbPublicApiUrl:Object(fe.u)(),store:e,trackVisibility:this.userSelectionStore.trackVisibility,discreteCNACache:this.props.store.discreteCNACache,pubMedCache:this.props.store.pubMedCache,cancerTypeCache:this.props.store.cancerTypeCache,mutationCountCache:this.props.store.mutationCountCache,genomeNexusCache:this.props.store.genomeNexusCache,genomeNexusMutationAssessorCache:this.props.store.genomeNexusMutationAssessorCache,pdbHeaderCache:this.props.store.pdbHeaderCache,userEmailAddress:this.props.appStore.userName,generateGenomeNexusHgvsgUrl:this.props.store.generateGenomeNexusHgvsgUrl,existsSomeMutationWithAscnProperty:this.props.store.existsSomeMutationWithAscnProperty,mutationAlignerUrlTemplate:Object(fe.t)(),showTranscriptDropDown:ce.b.serverConfig.show_transcript_dropdown,onTranscriptChange:this.onTranscriptChange})))}return null}}])&&ge(n.prototype,o),a&&ge(n,a),t}();Ee([p.computed],we.prototype,"selectedGeneSymbol",null),Ee([p.computed],we.prototype,"selectedGene",null),Ee([m.default],we.prototype,"onToggleOql",null),Ee([m.default],we.prototype,"onToggleVUS",null),Ee([m.default],we.prototype,"onToggleGermline",null),Ee([p.action],we.prototype,"setSelectedGeneSymbol",null),Ee([p.computed],we.prototype,"geneTabContent",null),Ee([m.default,p.action],we.prototype,"onTranscriptChange",null);var Oe=we=Ee([c.observer],we),Ce=n(944),ke=n(76),Te=n.n(ke),Pe=n(29),xe=n(829),Ae=n(315),je=n(96),Ie=n(856);function Ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function De(e,t){return!t||"object"!==Ve(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Re(e){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Le(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ge(e,t)}function Ge(e,t){return(Ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ve(e){return(Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Be=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Ve(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Fe=function(e){function t(){return Me(this,t),De(this,Re(t).apply(this,arguments))}return Le(t,je["b"]),t}(),He=function(e){function t(){return Me(this,t),De(this,Re(t).apply(this,arguments))}var n,o,i;return Le(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement(Fe,{data:this.props.geneAlterationData,columns:[{name:"Gene Symbol",render:function(e){return r.createElement("span",null,e.gene)},download:function(e){return e.gene},sortBy:function(e){return e.gene},filter:function(e,t,n){return e.gene.toUpperCase().indexOf(n)>-1}},{name:"OQL Line",visible:!1,render:function(e){return r.createElement("span",null,e.oqlLine)},download:function(e){return e.oqlLine},sortBy:function(e){return e.oqlLine},filter:function(e,t,n){return e.oqlLine.toUpperCase().indexOf(n)>-1}},{name:"Num Samples Altered",render:function(e){return r.createElement("span",null,e.sequenced?e.altered:"Not Profiled")},download:function(e){return e.sequenced?"".concat(e.altered):"N/P"},sortBy:function(e){return e.altered}},{name:"Percent Samples Altered",render:function(e){return e.sequenced?r.createElement(Ie.a,{barWidth:200,textWidth:45,counts:[e.altered],totalCount:e.sequenced}):r.createElement("span",null,"Not Profiled")},download:function(e){return e.percentAltered},sortBy:function(e){return e.altered/e.sequenced}}],initialSortColumn:"Percent Samples Altered",initialSortDirection:"desc",showPagination:!0,initialItemsPerPage:10,showColumnVisibility:!0,showFilter:!0,showCopyDownload:!0,copyDownloadProps:{downloadFilename:"gene_alteration_frequency.tsv"}})}}])&&Ne(n.prototype,o),i&&Ne(n,i),t}(),Ue=He=Be([c.observer],He),We=n(805),qe=n(1104),ze=n.n(qe),Qe=n(922),Ke=n.n(Qe),Ye=n(144),Xe=n(46),Ze=n(831);function Je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function et(e,t){return!t||"object"!==ot(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tt(e){return(tt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rt(e,t)}function rt(e,t){return(rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ot(e){return(ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var it=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ot(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};function at(e){return e.map(function(e){return r.createElement("span",null,r.createElement("span",null,e.proteinChange),e.isGermline&&r.createElement("span",{className:Ke.a.germline},"Germline"))})}function st(e,t,n){if(!o.isEmpty(e)&&e[t])return function(e,t){var n,r=function(e){return e.map(function(e){return e.type})},o=void 0;switch(0!==e.alterationTypes.length&&e.alterationTypes.includes(t)||(o={summaryContent:"no alteration",summaryClass:ze.a.noAlterationSpan,summaryAlteredStatus:Ye.a.UNALTERED}),t){case"MUT":n={label:"MUT",getAlterationData:function(e){return e.mutation},isNotProfiled:function(e){return e.isMutationNotProfiled},getValues:at};break;case"FUSION":n={label:"FUSION",getAlterationData:function(e){return e.fusion},isNotProfiled:function(e){return e.isFusionNotProfiled},getValues:function(e){return e}};break;case"CNA":n={label:"CNA",getAlterationData:function(e){return e.cna},isNotProfiled:function(e){return e.isCnaNotProfiled},getValues:r};break;case"EXP":n={label:"EXP",getAlterationData:function(e){return e.mrnaExp},isNotProfiled:function(e){return e.isMrnaExpNotProfiled},getValues:r};break;case"PROT":n={label:"PROT",getAlterationData:function(e){return e.proteinLevel},isNotProfiled:function(e){return e.isProteinLevelNotProfiled},getValues:r}}if(n){var i=n.getAlterationData(e);i.length>0&&(o={summaryContent:Object(Ze.a)(", ",n.getValues(i)),summaryClass:ze.a.alterationSpan,summaryAlteredStatus:Ye.a.ALTERED}),n.isNotProfiled(e)&&(o={summaryContent:"not profiled",summaryClass:ze.a.notProfiledSpan,summaryAlteredStatus:Ye.a.UNPROFILED})}return o||void 0}(e[t],n)}function lt(e,t,n){var r=o.map(n,function(n){return st(e,t,n)}),i=o.filter(r,function(e){return!!e&&e.summaryAlteredStatus===Ye.a.UNPROFILED});if(i&&i.length===n.length)return{summaryContent:"not profiled",summaryClass:ze.a.notProfiledSpan,summaryAlteredStatus:Ye.a.UNPROFILED};var a=o.filter(r,function(e){return!!e&&e.summaryAlteredStatus===Ye.a.ALTERED}),s=Object(Ze.a)(", ",o.map(a,function(e){return e.summaryContent}));return a.length>0?{summaryContent:s,summaryClass:ze.a.alterationSpan,summaryAlteredStatus:Ye.a.ALTERED}:{summaryContent:"no alteration",summaryClass:ze.a.noAlterationSpan,summaryAlteredStatus:Ye.a.UNALTERED}}var ut=function(e){function t(){return $e(this,t),et(this,tt(t).apply(this,arguments))}return nt(t,je["b"]),t}(),ct=function(e){function t(){return $e(this,t),et(this,tt(t).apply(this,arguments))}var n,i,a;return nt(t,r["Component"]),n=t,(i=[{key:"render",value:function(){var e=this,t=[{name:"Study ID",render:function(e){return r.createElement("span",{style:{whiteSpace:"nowrap"}},r.createElement(We.a,{studyId:e.studyId},e.studyId))},download:function(e){return e.studyId},sortBy:function(e){return e.studyId},filter:function(e,t){return new RegExp(t,"i").test(e.studyId)}},{name:"Sample ID",render:function(e){return r.createElement("span",{style:{whiteSpace:"nowrap"}},r.createElement("a",{href:Object(fe.y)(e.studyId,e.sampleId),target:"_blank"},e.sampleId))},download:function(e){return"".concat(e.sampleId)},sortBy:function(e){return e.sampleId},filter:function(e,t){return new RegExp(t,"i").test(e.sampleId)}},{name:"Patient ID",render:function(e){return r.createElement("span",{style:{whiteSpace:"nowrap"}},r.createElement("a",{href:Object(fe.w)(e.studyId,e.patientId),target:"_blank"},e.patientId))},download:function(e){return"".concat(e.patientId)},sortBy:function(e){return e.patientId},filter:function(e,t){return new RegExp(t,"i").test(e.patientId)}},{name:"Altered",tooltip:r.createElement("span",null,"1 = Sample harbors alteration in one of the input genes"),render:function(e){return r.createElement("span",null,e.altered?"1":"0")},download:function(e){return e.altered?"1":"0"},sortBy:function(e){return e.altered?1:0}}];o.forEach(this.props.trackLabels,function(n){t.push({name:"".concat(n),headerDownload:function(e){return"".concat(n)},render:function(t){var o=lt(t.oqlData,n,e.props.trackAlterationTypesMap[n]);return r.createElement("span",{className:o.summaryClass},o.summaryContent)},download:function(t){return lt(t.oqlData,n,e.props.trackAlterationTypesMap[n]).summaryContent},sortBy:function(t){return lt(t.oqlData,n,e.props.trackAlterationTypesMap[n]).summaryContent},filter:function(t,r){return new RegExp(r,"i").test(lt(t.oqlData,n,e.props.trackAlterationTypesMap[n]).summaryContent)},visible:!0})});var n=o.uniq(o.map(this.props.oqls,function(e){return e.gene}));return o.forEach(n,function(n){e.props.geneAlterationTypesMap[n].forEach(function(e){var i=Object(Xe.h)(e),a=e.alteration_type.toUpperCase(),s="".concat(n,": ").concat(i);o.isEmpty(t.find(function(e){return e.name===s}))&&t.push({name:"".concat(n,": ").concat(i),headerDownload:function(e){return"".concat(n,": ").concat(i)},render:function(e){var t=st(e.oqlDataByGene,n,a);return r.createElement("span",{className:t.summaryClass},t.summaryContent)},download:function(e){return st(e.oqlDataByGene,n,a).summaryContent},sortBy:function(e){return st(e.oqlDataByGene,n,a).summaryContent},filter:function(e,t){return new RegExp(t,"i").test(st(e.oqlDataByGene,n,a).summaryContent)},visible:!1})})}),r.createElement(ut,{data:this.props.caseAlterationData,columns:t,initialSortColumn:"Altered",initialSortDirection:"desc",initialItemsPerPage:20,showPagination:!0,showColumnVisibility:!0,showFilter:!0,showCopyDownload:!0,enableHorizontalScroll:!0,copyDownloadProps:{downloadFilename:"alterations_across_samples.tsv"}})}}])&&Je(n.prototype,i),a&&Je(n,a),t}(),pt=ct=it([c.observer],ct),dt=n(374),ft=n(5),ht=n.n(ft),mt=n(928),yt=n(193),gt=n(289),bt=n(788),vt=n(794),_t=n.n(vt);function St(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wt(e){return(wt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ot(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ct(e,t){return(Ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kt(e){return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Tt=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":kt(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Pt=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,i=wt(t).call(this,e),(n=!i||"object"!==kt(i)&&"function"!=typeof i?Ot(r):i).geneAlterationData=Object(S.T)({await:function(){return[n.props.store.oqlFilteredCaseAggregatedDataByOQLLine,n.props.store.filteredSequencedSampleKeysByGene]},invoke:function(){return Promise.resolve(Object(dt.e)(n.props.store.oqlFilteredCaseAggregatedDataByOQLLine.result,n.props.store.filteredSequencedSampleKeysByGene.result))}}),n.geneAlterationDataByGene=Object(S.T)({await:function(){return[n.geneAlterationData]},invoke:function(){return Promise.resolve(o.keyBy(n.geneAlterationData.result,"gene"))}}),n.caseAlterationData=Object(S.T)({await:function(){return[n.props.store.selectedMolecularProfiles,n.props.store.oqlFilteredCaseAggregatedDataByOQLLine,n.props.store.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine,n.props.store.coverageInformation,n.props.store.filteredSamples,n.geneAlterationDataByGene,n.props.store.molecularProfileIdToMolecularProfile]},invoke:function(){return Promise.resolve(Object(dt.b)(n.props.store.oqlText,n.props.store.selectedMolecularProfiles.result,n.props.store.oqlFilteredCaseAggregatedDataByOQLLine.result,n.props.store.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine.result,n.props.store.coverageInformation.result,n.props.store.filteredSamples.result,n.geneAlterationDataByGene.result,n.props.store.molecularProfileIdToMolecularProfile.result))}}),n.mutationData=Object(S.T)({await:function(){return[n.props.store.nonOqlFilteredCaseAggregatedData]},invoke:function(){return Promise.resolve(Object(dt.i)(n.props.store.nonOqlFilteredCaseAggregatedData.result))}}),n.mutationDownloadData=Object(S.T)({await:function(){return[n.mutationData,n.props.store.samples,n.props.store.genes]},invoke:function(){return Promise.resolve(Object(dt.j)(n.mutationData.result,n.props.store.samples.result,n.props.store.genes.result))}}),n.allOtherMolecularProfileDataGroupByProfileName=Object(S.T)({await:function(){return[n.props.store.nonSelectedDownloadableMolecularData,n.props.store.nonSelectedDownloadableMolecularProfilesGroupByName]},invoke:function(){var e=o.keys(n.props.store.nonSelectedDownloadableMolecularProfilesGroupByName.result);if(n.props.store.doNonSelectedDownloadableMolecularProfilesExist){var t={samples:o.groupBy(n.props.store.nonSelectedDownloadableMolecularData.result,function(e){return e.uniqueSampleKey})},r=o.reduce(e,function(e,r){return e[r]=Object(dt.k)(n.props.store.nonSelectedDownloadableMolecularProfilesGroupByName.result[r].map(function(e){return e.molecularProfileId}),t),e},{});return Promise.resolve(r)}return Promise.resolve({})}}),n.allOtherMolecularProfileDownloadDataGroupByProfileName=Object(S.T)({await:function(){return[n.allOtherMolecularProfileDataGroupByProfileName,n.props.store.samples,n.props.store.genes]},invoke:function(){return Promise.resolve(o.mapValues(n.allOtherMolecularProfileDataGroupByProfileName.result,function(e){return Object(dt.l)(e,n.props.store.samples.result,n.props.store.genes.result)}))}}),n.genericAssayProfileDownloadDataGroupByProfileIdSuffix=Object(S.T)({await:function(){return[n.props.store.samples,n.props.store.genericAssayEntityStableIdsGroupByProfileIdSuffix,n.props.store.genericAssayDataGroupByProfileIdSuffix,n.props.store.genericAssayProfilesGroupByProfileIdSuffix]},invoke:function(){var e=o.mapValues(n.props.store.genericAssayDataGroupByProfileIdSuffix.result,function(e,t){var r={samples:o.groupBy(e,function(e){return e.uniqueSampleKey})};return Object(dt.f)(n.props.store.genericAssayProfilesGroupByProfileIdSuffix.result[t].map(function(e){return e.molecularProfileId}),r)});return Promise.resolve(o.mapValues(e,function(e,t){return Object(dt.g)(e,n.props.store.samples.result,n.props.store.genericAssayEntityStableIdsGroupByProfileIdSuffix.result[t])}))}}),n.mrnaData=Object(S.T)({await:function(){return[n.props.store.nonOqlFilteredCaseAggregatedData]},invoke:function(){return Promise.resolve(Object(dt.h)(n.props.store.nonOqlFilteredCaseAggregatedData.result))}}),n.mrnaDownloadData=Object(S.T)({await:function(){return[n.mrnaData,n.props.store.samples,n.props.store.genes]},invoke:function(){return Promise.resolve(Object(dt.d)(n.mrnaData.result,n.props.store.samples.result,n.props.store.genes.result))}}),n.proteinData=Object(S.T)({await:function(){return[n.props.store.nonOqlFilteredCaseAggregatedData]},invoke:function(){return Promise.resolve(Object(dt.m)(n.props.store.nonOqlFilteredCaseAggregatedData.result))}}),n.proteinDownloadData=Object(S.T)({await:function(){return[n.proteinData,n.props.store.samples,n.props.store.genes]},invoke:function(){return Promise.resolve(Object(dt.d)(n.proteinData.result,n.props.store.samples.result,n.props.store.genes.result))}}),n.cnaData=Object(S.T)({await:function(){return[n.props.store.nonOqlFilteredCaseAggregatedData]},invoke:function(){return Promise.resolve(Object(dt.c)(n.props.store.nonOqlFilteredCaseAggregatedData.result))}}),n.cnaDownloadData=Object(S.T)({await:function(){return[n.cnaData,n.props.store.samples,n.props.store.genes]},invoke:function(){return Promise.resolve(Object(dt.d)(n.cnaData.result,n.props.store.samples.result,n.props.store.genes.result))}}),n.alteredCaseAlterationData=Object(S.T)({await:function(){return[n.caseAlterationData]},invoke:function(){return Promise.resolve(n.caseAlterationData.result.filter(function(e){return e.altered}))}}),n.unalteredCaseAlterationData=Object(S.T)({await:function(){return[n.caseAlterationData]},invoke:function(){return Promise.resolve(n.caseAlterationData.result.filter(function(e){return!e.altered}))}}),n.sampleMatrix=Object(S.T)({await:function(){return[n.caseAlterationData]},invoke:function(){var e=[];return o.map(n.caseAlterationData.result,function(t){if(o.isEmpty(e)){var n=o.keys(t.oqlDataByGene);e.push(["studyID:sampleId","Altered"].concat(St(n)))}var r=o.map(t.oqlDataByGene,function(e){return o.isEmpty(e.alterationTypes)?"0":"1"});e.push(["".concat(t.studyId,":").concat(t.sampleId),t.altered?"1":"0"].concat(St(r)))}),Promise.resolve(e)}}),n.sampleMatrixText=Object(S.T)({await:function(){return[n.sampleMatrix]},invoke:function(){return Promise.resolve(Object(dt.p)(n.sampleMatrix.result))}}),n.oqls=Object(S.T)({await:function(){return[n.props.store.oqlFilteredCaseAggregatedDataByOQLLine]},invoke:function(){return Promise.resolve(n.props.store.oqlFilteredCaseAggregatedDataByOQLLine.result.map(function(e){return e.oql}))}}),n.trackLabels=Object(S.T)({await:function(){return[n.props.store.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine]},invoke:function(){var e=[];return n.props.store.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine.result.forEach(function(t,r){void 0===t.mergedTrackOqlList?e.push(Object(Pe.p)(r,n.props.store.oqlText,t.oql)):e.push(Object(Pe.m)(t.oql))}),Promise.resolve(e)}}),n.trackAlterationTypesMap=Object(S.T)({await:function(){return[n.props.store.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine]},invoke:function(){var e={};return n.props.store.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine.result.forEach(function(t,r){if(void 0===t.mergedTrackOqlList){var i=t.oql,a=Object(Pe.p)(r,n.props.store.oqlText,t.oql);i.parsed_oql_line.alterations&&(e[a]=o.uniq(o.map(i.parsed_oql_line.alterations,function(e){return e.alteration_type.toUpperCase()})))}else{var s=t.oql,l=Object(Pe.m)(t.oql),u=[];o.forEach(s.list,function(e){if(e.parsed_oql_line.alterations){var t=o.map(e.parsed_oql_line.alterations,function(e){return e.alteration_type.toUpperCase()});u.push.apply(u,St(t))}}),e[l]=o.uniq(u)}}),Promise.resolve(e)}}),n.geneAlterationMap=Object(S.T)({await:function(){return[n.props.store.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine]},invoke:function(){var e={};return n.props.store.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine.result.forEach(function(t,n){if(void 0===t.mergedTrackOqlList){var r=t.oql;r.parsed_oql_line.alterations&&(e[r.gene]=o.chain(r.parsed_oql_line.alterations).union(e[r.gene]).uniq().value())}else{var i=t.oql;o.forEach(i.list,function(t){if(t.parsed_oql_line.alterations){o.map(t.parsed_oql_line.alterations,function(e){return e.alteration_type});e[t.gene]=o.chain(t.parsed_oql_line.alterations).union(e[t.gene]).uniq().value()}})}}),Promise.resolve(e)}}),n.handleMutationDownload=n.handleMutationDownload.bind(Ot(n)),n.handleTransposedMutationDownload=n.handleTransposedMutationDownload.bind(Ot(n)),n.handleCnaDownload=n.handleCnaDownload.bind(Ot(n)),n.handleTransposedCnaDownload=n.handleTransposedCnaDownload.bind(Ot(n)),n.handleMrnaDownload=n.handleMrnaDownload.bind(Ot(n)),n.handleTransposedMrnaDownload=n.handleTransposedMrnaDownload.bind(Ot(n)),n.handleProteinDownload=n.handleProteinDownload.bind(Ot(n)),n.handleTransposedProteinDownload=n.handleTransposedProteinDownload.bind(Ot(n)),n}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ct(e,t)}(t,r["Component"]),n=t,(i=[{key:"render",value:function(){switch(Object(g.H)(this.geneAlterationData,this.caseAlterationData,this.oqls,this.trackLabels,this.trackAlterationTypesMap,this.geneAlterationMap,this.cnaData,this.mutationData,this.mrnaData,this.proteinData,this.unalteredCaseAlterationData,this.alteredCaseAlterationData,this.props.store.virtualStudyParams,this.sampleMatrixText,this.props.store.nonSelectedDownloadableMolecularProfilesGroupByName,this.props.store.studies,this.props.store.selectedMolecularProfiles)){case"pending":return r.createElement(me.a,{isLoading:!0,center:!0,size:"big"});case"error":return r.createElement(gt.a,null);case"complete":return r.createElement(mt.a,{"data-test":"downloadTabDiv",offset:60},r.createElement("div",{className:"tabMessageContainer"},r.createElement(pe.a,{className:"download-oql-status-banner",store:this.props.store,tabReflectsOql:!0}),r.createElement(de.a,{store:this.props.store}),r.createElement(he.a,{store:this.props.store})),r.createElement("div",null,r.createElement(xe.a,{title:"Downloadable Data Files",className:"forceHeaderStyle h4",isLoading:!1,style:{marginBottom:15}}),r.createElement("table",{className:ht()("table","table-striped",ze.a.downloadCopyTable)},r.createElement("tbody",null,Object(dt.n)(this.cnaData.result)&&this.cnaDownloadControls(),Object(dt.o)(this.mutationData.result)&&this.mutationDownloadControls(),Object(dt.n)(this.mrnaData.result)&&this.mrnaExprDownloadControls(this.props.store.selectedMolecularProfiles.result.find(function(e){return e.molecularAlterationType===d.a.MRNA_EXPRESSION}).name),Object(dt.n)(this.proteinData.result)&&this.proteinExprDownloadControls(this.props.store.selectedMolecularProfiles.result.find(function(e){return e.molecularAlterationType===d.a.PROTEIN_LEVEL}).name),this.alteredSamplesDownloadControls(this.alteredCaseAlterationData.result,this.props.store.virtualStudyParams.result),this.unalteredSamplesDownloadControls(this.unalteredCaseAlterationData.result,this.props.store.virtualStudyParams.result),this.sampleMatrixDownloadControls(this.sampleMatrixText.result),this.props.store.doNonSelectedDownloadableMolecularProfilesExist&&this.nonSelectedProfileDownloadRow(this.props.store.nonSelectedDownloadableMolecularProfilesGroupByName.result)))),r.createElement("hr",null),r.createElement("div",{className:ze.a["tables-container"],"data-test":"dataDownloadGeneAlterationTable"},r.createElement(xe.a,{title:"Gene Alteration Frequency",isLoading:!1,className:"pull-left forceHeaderStyle h4"}),r.createElement(Ue,{geneAlterationData:this.geneAlterationData.result})),r.createElement("hr",null),r.createElement("div",{className:ze.a["tables-container"]},r.createElement(xe.a,{title:"Type of Genetic Alterations Across All Samples",isLoading:!1,className:"pull-left forceHeaderStyle h4"}),r.createElement(pt,{caseAlterationData:this.caseAlterationData.result,oqls:this.oqls.result,trackLabels:this.trackLabels.result,trackAlterationTypesMap:this.trackAlterationTypesMap.result,geneAlterationTypesMap:this.geneAlterationMap.result})));default:return r.createElement(gt.a,null)}}},{key:"cnaDownloadControls",value:function(){return this.downloadControlsRow("Copy-number Alterations (OQL is not in effect)",this.handleCnaDownload,this.handleTransposedCnaDownload)}},{key:"mutationDownloadControls",value:function(){return this.downloadControlsRow("Mutations (OQL is not in effect)",this.handleMutationDownload,this.handleTransposedMutationDownload)}},{key:"mrnaExprDownloadControls",value:function(e){return this.downloadControlsRow(e,this.handleMrnaDownload,this.handleTransposedMrnaDownload)}},{key:"proteinExprDownloadControls",value:function(e){return this.downloadControlsRow(e,this.handleProteinDownload,this.handleTransposedProteinDownload)}},{key:"downloadControlsRow",value:function(e,t,n){return r.createElement("tr",null,r.createElement("td",{style:{width:500}},e),r.createElement("td",null,r.createElement("a",{onClick:function(n){return t(e)}},r.createElement("i",{className:"fa fa-cloud-download",style:{marginRight:5}}),"Tab Delimited Format"),r.createElement("span",{style:{margin:"0px 10px"}},"|"),r.createElement("a",{onClick:function(t){return n(e)}},r.createElement("i",{className:"fa fa-cloud-download",style:{marginRight:5}}),"Transposed Matrix")))}},{key:"nonSelectedProfileDownloadRow",value:function(e){var t=this,n=o.map(e,function(e,n){return 1===t.props.store.studies.result.length?{name:n,description:e[0].description}:{name:n}});return o.map(n,function(e){return r.createElement("tr",null,r.createElement("td",{style:{width:500}},r.createElement("div",{style:{display:"flex",alignItems:"center"}},e.name,e.description&&r.createElement(S.d,{mouseEnterDelay:0,placement:"right",overlay:r.createElement("div",{className:ze.a.tooltip},e.description)},r.createElement(_t.a,{className:ze.a.infoIcon,name:"info-circle"})))),r.createElement("td",null,r.createElement("div",null,r.createElement("a",{onClick:function(){return t.handleOtherMolecularProfileDownload(e.name)}},r.createElement("i",{className:"fa fa-cloud-download",style:{marginRight:5}}),"Tab Delimited Format"),r.createElement("span",{style:{margin:"0px 10px"}},"|"),r.createElement("a",{onClick:function(){return t.handleTransposedOtherMolecularProfileDownload(e.name)}},r.createElement("i",{className:"fa fa-cloud-download",style:{marginRight:5}}),"Transposed Matrix"))))})}},{key:"genericAssayProfileDownloadRows",value:function(e){var t=this,n=o.map(e,function(e,t){var n=e[0];return{name:n.name,description:n.description,profileIdSuffix:t}});return o.map(n,function(e){return r.createElement("tr",null,r.createElement("td",{style:{width:500}},r.createElement("div",{style:{display:"flex",alignItems:"center"}},e.name,e.description&&r.createElement(S.d,{mouseEnterDelay:0,placement:"right",overlay:r.createElement("div",{className:ze.a.tooltip},e.description)},r.createElement(_t.a,{className:ze.a.infoIcon,name:"info-circle"})))),r.createElement("td",null,r.createElement("div",null,r.createElement("a",{onClick:function(){return t.handleGenericAssayProfileDownload(e.name,e.profileIdSuffix)}},r.createElement("i",{className:"fa fa-cloud-download",style:{marginRight:5}}),"Tab Delimited Format"),r.createElement("span",{style:{margin:"0px 10px"}},"|"),r.createElement("a",{onClick:function(){return t.handleTransposedGenericAssayProfileDownload(e.name,e.profileIdSuffix)}},r.createElement("i",{className:"fa fa-cloud-download",style:{marginRight:5}}),"Transposed Matrix"))))})}},{key:"copyDownloadControlsRow",value:function(e,t,n){return r.createElement("tr",null,r.createElement("td",null,e),r.createElement("td",null,r.createElement(Ae.a,{controlsStyle:"LINK",downloadData:t,downloadFilename:n})))}},{key:"copyDownloadQueryControlsRow",value:function(e,t,n,o,i){return r.createElement("tr",null,r.createElement("td",null,e),r.createElement("td",null,r.createElement(Ae.a,{controlsStyle:"QUERY",downloadData:t,downloadFilename:n,handleQuery:o,virtualStudyParams:i})))}},{key:"alteredSamplesDownloadControls",value:function(e,t){var n=this,r=o.map(e,function(e){return"".concat(e.studyId,":").concat(e.sampleId)}),i={user:t.user,name:t.name,description:t.description,studyWithSamples:t.studyWithSamples,selectedSamples:o.filter(t.selectedSamples,function(e){return r.includes("".concat(e.studyId,":").concat(e.sampleId))}),filter:t.filter,attributesMetaSet:t.attributesMetaSet};return this.copyDownloadQueryControlsRow("Altered samples: List of samples with alterations",function(){return r.join("\n")},"altered_samples.txt",function(){return n.handleQueryButtonClick(r)},i)}},{key:"unalteredSamplesDownloadControls",value:function(e,t){var n=this,r=o.map(e,function(e){return"".concat(e.studyId,":").concat(e.sampleId)}),i={user:t.user,name:t.name,description:t.description,studyWithSamples:t.studyWithSamples,selectedSamples:o.filter(t.selectedSamples,function(e){return r.includes("".concat(e.studyId,":").concat(e.sampleId))}),filter:t.filter,attributesMetaSet:t.attributesMetaSet};return this.copyDownloadQueryControlsRow("Unaltered samples: List of samples without any alteration",function(){return r.join("\n")},"unaltered_samples.txt",function(){return n.handleQueryButtonClick(r)},i)}},{key:"sampleMatrixDownloadControls",value:function(e){return this.copyDownloadControlsRow("Sample matrix: List of all samples where 1=altered and 0=unaltered",function(){return e},"sample_matrix.txt")}},{key:"handleMutationDownload",value:function(){var e=this;Object(yt.a)(this.mutationDownloadData,function(t){var n=e.downloadDataText(t);Te()(n,"mutations.txt")})}},{key:"handleTransposedMutationDownload",value:function(){var e=this;Object(yt.a)(this.mutationDownloadData,function(t){var n=e.downloadDataText(e.unzipDownloadData(t));Te()(n,"mutations_transposed.txt")})}},{key:"handleMrnaDownload",value:function(e){var t=this;Object(yt.a)(this.mrnaDownloadData,function(n){var r=t.downloadDataText(n);Te()(r,"".concat(e,".txt"))})}},{key:"handleTransposedMrnaDownload",value:function(e){var t=this;Object(yt.a)(this.mrnaDownloadData,function(n){var r=t.downloadDataText(t.unzipDownloadData(n));Te()(r,"".concat(e,".txt"))})}},{key:"handleProteinDownload",value:function(e){var t=this;Object(yt.a)(this.proteinDownloadData,function(n){var r=t.downloadDataText(n);Te()(r,"".concat(e,".txt"))})}},{key:"handleTransposedProteinDownload",value:function(e){var t=this;Object(yt.a)(this.proteinDownloadData,function(n){var r=t.downloadDataText(t.unzipDownloadData(n));Te()(r,"".concat(e,".txt"))})}},{key:"handleCnaDownload",value:function(){var e=this;Object(yt.a)(this.cnaDownloadData,function(t){var n=e.downloadDataText(t);Te()(n,"cna.txt")})}},{key:"handleTransposedCnaDownload",value:function(){var e=this;Object(yt.a)(this.cnaDownloadData,function(t){var n=e.downloadDataText(e.unzipDownloadData(t));Te()(n,"cna_transposed.txt")})}},{key:"handleOtherMolecularProfileDownload",value:function(e){var t=this;Object(yt.a)(this.allOtherMolecularProfileDownloadDataGroupByProfileName,function(n){var r=t.downloadDataTextGroupByKey(n);Te()(r[e],"".concat(e,".txt"))})}},{key:"handleTransposedOtherMolecularProfileDownload",value:function(e){var t=this;Object(yt.a)(this.allOtherMolecularProfileDownloadDataGroupByProfileName,function(n){var r=t.downloadDataTextGroupByKey(t.unzipDownloadDataGroupByKey(n));Te()(r[e],"".concat(e,".txt"))})}},{key:"handleGenericAssayProfileDownload",value:function(e,t){var n=this;Object(yt.a)(this.genericAssayProfileDownloadDataGroupByProfileIdSuffix,function(r){var o=n.downloadDataTextGroupByKey(r);Te()(o[t],"".concat(e,".txt"))})}},{key:"handleTransposedGenericAssayProfileDownload",value:function(e,t){var n=this;Object(yt.a)(this.genericAssayProfileDownloadDataGroupByProfileIdSuffix,function(r){var o=n.downloadDataTextGroupByKey(n.unzipDownloadDataGroupByKey(r));Te()(o[t],"".concat(e,".txt"))})}},{key:"handleQueryButtonClick",value:function(e){var t={selectedSampleListId:bt.a,selectedSampleIds:e,caseIdsMode:"sample"};this.props.store.modifyQueryParams=t,this.props.store.queryFormVisible=!0}},{key:"unzipDownloadDataGroupByKey",value:function(e){return o.mapValues(e,function(e){return o.unzip(e)})}},{key:"downloadDataTextGroupByKey",value:function(e){return o.mapValues(e,function(e){return Object(dt.p)(e)})}},{key:"unzipDownloadData",value:function(e){return o.unzip(e)}},{key:"downloadDataText",value:function(e){return Object(dt.p)(e)}}])&&Et(n.prototype,i),a&&Et(n,a),t}();Tt([m.default],Pt.prototype,"handleOtherMolecularProfileDownload",null),Tt([m.default],Pt.prototype,"handleTransposedOtherMolecularProfileDownload",null),Tt([m.default],Pt.prototype,"handleGenericAssayProfileDownload",null),Tt([m.default],Pt.prototype,"handleTransposedGenericAssayProfileDownload",null),Tt([p.action],Pt.prototype,"handleQueryButtonClick",null);var xt=Pt=Tt([c.observer],Pt),At=n(15),jt=n(64),It=n(970),Nt=n(972),Mt=n(192),Dt=n(833),Rt=n(847);function Lt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gt(e,t){return!t||"object"!==Ft(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vt(e){return(Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bt(e,t){return(Bt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ft(e){return(Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ht=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Ft(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Ut=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Gt(this,Vt(t).call(this,e))).renderingComplete=!1,n.chromosome=Object(S.T)({await:function(){return[n.props.store.hugoGeneSymbolToReferenceGene]},invoke:function(){return Promise.resolve(n.props.store.hugoGeneSymbolToReferenceGene.result[n.activeLocus].chromosome)}}),n.segmentTrackMaxHeight=.7*Mt.a.size.height,n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bt(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=this;return r.createElement("div",{className:"pillTabs"},r.createElement(me.a,{isLoading:this.isHidden,size:"big",center:!0},r.createElement(Rt.a,{getItems:function(){return e.progressItems},show:this.isHidden,sequential:!0})),r.createElement(Nt.a,{promise:this.props.store.cnSegments,filename:this.filename}),r.createElement("div",{className:"tabMessageContainer"},r.createElement(he.a,{store:this.props.store})),r.createElement(At.Nav,{bsStyle:"pills",activeKey:this.activeLocus,onSelect:this.onTabSelect},r.createElement(At.NavItem,{eventKey:Dt.a},"Whole Genome"),this.props.store.genes.result&&this.props.store.genes.result.map(function(e){return r.createElement(At.NavItem,{eventKey:e.hugoGeneSymbol},e.hugoGeneSymbol)})),r.createElement("div",{style:this.isHidden?{opacity:0}:void 0},r.createElement(It.a,{tracks:[Object.assign(Object.assign({},Object(Dt.c)()),{height:this.segmentTrackHeight,features:this.features})],genome:this.props.store.referenceGenome,locus:this.activeLocus,onRenderingStart:this.onIgvRenderingStart,onRenderingComplete:this.onIgvRenderingComplete,disableSearch:this.activeLocus!==Dt.a,isVisible:this.props.store.tabId===jt.b.CN_SEGMENTS&&!this.isHidden})))}},{key:"onTabSelect",value:function(e){this.selectedLocus=e}},{key:"onIgvRenderingStart",value:function(){this.renderingComplete=!1}},{key:"onIgvRenderingComplete",value:function(){this.renderingComplete=!0}},{key:"segmentTrackHeight",get:function(){return Object(Dt.b)(this.features,this.segmentTrackMaxHeight)}},{key:"activeLocus",get:function(){var e=this.selectedLocus;return e||(e=this.props.store.genes.result?this.props.store.genes.result[0].hugoGeneSymbol:Dt.a),e}},{key:"features",get:function(){var e=this.activePromise&&this.activePromise.result||[];return Object(Dt.d)(e)}},{key:"filename",get:function(){return"".concat(this.props.store.downloadFilenamePrefix,"segments.seg")}},{key:"isHidden",get:function(){return this.isLoading||!this.renderingComplete}},{key:"isLoading",get:function(){return!this.activePromise||this.activePromise.isPending}},{key:"activePromise",get:function(){return this.activeLocus===Dt.a?this.props.store.cnSegments:this.props.store.cnSegmentsByChromosome.result&&this.chromosome?this.props.store.cnSegmentsByChromosome.result[this.chromosome.result]:void 0}},{key:"indicatorPromises",get:function(){var e=[this.props.store.studies,this.props.store.genes];return this.activeLocus!==Dt.a&&e.push(this.props.store.cnSegmentsByChromosome),this.activePromise&&e.push(this.activePromise),e}},{key:"progressItems",get:function(){return[{label:"Loading copy number segments data...",promises:this.indicatorPromises},{label:"Rendering"}]}}])&&Lt(n.prototype,o),i&&Lt(n,i),t}();Ht([p.observable],Ut.prototype,"renderingComplete",void 0),Ht([p.observable],Ut.prototype,"selectedLocus",void 0),Ht([p.observable],Ut.prototype,"segmentTrackMaxHeight",void 0),Ht([p.computed],Ut.prototype,"segmentTrackHeight",null),Ht([p.computed],Ut.prototype,"activeLocus",null),Ht([p.computed],Ut.prototype,"features",null),Ht([p.computed],Ut.prototype,"filename",null),Ht([p.computed],Ut.prototype,"isHidden",null),Ht([p.computed],Ut.prototype,"isLoading",null),Ht([p.computed],Ut.prototype,"activePromise",null),Ht([p.computed],Ut.prototype,"indicatorPromises",null),Ht([p.computed],Ut.prototype,"progressItems",null),Ht([m.default,p.action],Ut.prototype,"onTabSelect",null),Ht([m.default,p.action],Ut.prototype,"onIgvRenderingStart",null),Ht([m.default,p.action],Ut.prototype,"onIgvRenderingComplete",null);var Wt=Ut=Ht([c.observer],Ut),qt=(n(1105),n(1168),n(151));function zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kt(e,t){return!t||"object"!==Jt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Yt(e){return(Yt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zt(e,t)}function Zt(e,t){return(Zt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Jt(e){return(Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var $t,en=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Jt(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};!function(e){e[e.NAME=0]="NAME",e[e.SCORE=1]="SCORE",e[e.GENES=2]="GENES"}($t||($t={}));var tn=function(e){function t(){return Qt(this,t),Kt(this,Yt(t).apply(this,arguments))}return Xt(t,je["b"]),t}();var nn=function(e){function t(e){var n;return Qt(this,t),(n=Kt(this,Yt(t).call(this,e))).dataStore=new qt.a(function(){return n.props.data}),n._columns={},n.generateColumns(),n}var n,i,a;return Xt(t,r["Component"]),n=t,(i=[{key:"generateColumns",value:function(){var e=this;this._columns={},this._columns[$t.NAME]={name:"Pathway name",render:function(t){var n=t.name,o=n.length<20;return r.createElement(At.Radio,{style:{marginTop:0,marginBottom:0},checked:e.props.selectedPathway===t.name,onChange:function(n){e.props.changePathway(t.name)}},r.createElement(S.d,{overlay:n,disabled:o},r.createElement("b",null,o?n:n.substring(0,20)+"...")))},tooltip:r.createElement("span",null,"Pathway name"),filter:function(e,t,n){return e.name.toUpperCase().includes(n)},sortBy:function(e){return e.name},download:function(e){return e.name}},this._columns[$t.SCORE]={name:"Score",render:function(e){return r.createElement("span",null,r.createElement("b",null,e.score.toFixed(2)))},tooltip:r.createElement("span",null,"Score"),filter:function(e,t,n){return(e.score+"").includes(n)},sortBy:function(e){return e.score},download:function(e){return e.score+""}},this._columns[$t.GENES]={name:"Genes matched",render:function(e){var t=e.genes.join(" ").length;return r.createElement(S.d,{overlay:e.genes.join(" "),disabled:t<20},r.createElement("span",null,function(e,t){var n=0,r="",o=!0,i=!1,a=void 0;try{for(var s,l=e[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var u=s.value;if(!((n+=u.length)<t))return r+"...";r+=u+" ",n++}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}return r.trim()}(e.genes,20)))},tooltip:r.createElement("span",null,"Genes matched"),sortBy:function(e){return e.genes.length},download:function(e){return e.genes.toString()}}}},{key:"componentWillUpdate",value:function(e){var t,n,r,i,a,s;this.dataStore.page=(t=e.data,n=this.dataStore,r=e.selectedPathway,i=Object(qt.c)(t,n.sortMetric,n.sortAscending),a=Object(qt.d)(i,n.filterString,n.getFilter()),(s=o.findIndex(a,function(e){return e.name===r}))>=0?Math.floor(s/(n.itemsPerPage||10)):0)}},{key:"render",value:function(){var e=o.sortBy(this._columns);return r.createElement(tn,{columns:e,dataStore:this.dataStore,initialItemsPerPage:10,initialSortColumn:this.props.initialSortColumn,initialSortDirection:"desc",paginationProps:{itemsPerPageOptions:[10]},showColumnVisibility:!1})}}])&&zt(n.prototype,i),a&&zt(n,a),t}();nn.defaultProps={columns:[$t.NAME,$t.SCORE,$t.GENES],initialSortColumn:"Score"},en([p.observable],nn.prototype,"_columns",void 0),en([p.observable],nn.prototype,"selectedPathway",void 0);var rn=nn=en([c.observer],nn),on=n(21),an=n(297),sn=(n(1106),n(1142)),ln=n(843),un=n(1090),cn=n(50);function pn(e,t,n,r,o,i,a,s,l){var u="sample"===s?"SAMPLE_DATA_":"PATIENT_DATA_";Te()(function(e,t,n,r,o,i,a,s,l){function u(e,t){return"".concat(e," (").concat(t,")")}var c=i.map(a),p={CLINICAL:{},CNA:{},MUTATIONS:{},MRNA:{},PROTEIN:{},FUSION:{}},d={amp:"Amplification",gain:"Gain",hetloss:"Shallow Deletion",homdel:"Deep Deletion"},f={};f=l?{inframe:"Inframe Mutation (putative passenger)",inframe_rec:"Inframe Mutation (putative driver)",missense:"Missense Mutation (putative passenger)",missense_rec:"Missense Mutation (putative driver)",promoter:"Promoter Mutation",promoter_rec:"Promoter Mutation",trunc:"Truncating mutation (putative passenger)",trunc_rec:"Truncating mutation (putative driver)"}:{inframe:"Inframe Mutation",inframe_rec:"Inframe Mutation",missense:"Missense Mutation",missense_rec:"Missense Mutation",promoter:"Promoter Mutation",promoter_rec:"Promoter Mutation",trunc:"Truncating mutation",trunc_rec:"Truncating mutation"};var h={high:"mRNA High",low:"mRNA Low"},m={low:"Protein Low",high:"Protein High"},y={true:"Fusion"},g=!0,b=!1,v=void 0;try{for(var _,S=e[Symbol.iterator]();!(g=(_=S.next()).done);g=!0){var E=_.value.data,w=E[0].trackLabel;void 0===p.CNA[w]&&(p.CNA[w]={}),void 0===p.MUTATIONS[w]&&(p.MUTATIONS[w]={}),void 0===p.MRNA[w]&&(p.MRNA[w]={}),void 0===p.PROTEIN[w]&&(p.PROTEIN[w]={}),void 0===p.FUSION[w]&&(p.FUSION[w]={});var O=!0,C=!1,k=void 0;try{for(var T,P=E[Symbol.iterator]();!(O=(T=P.next()).done);O=!0){var x=T.value,A="sample"===s?x.sample:x.patient;p.CNA[w][A]="",p.MUTATIONS[w][A]="",p.MRNA[w][A]="",p.PROTEIN[w][A]="",p.FUSION[w][A]="",void 0!==x.disp_cna&&(p.CNA[w][A]=d[x.disp_cna]?d[x.disp_cna]:x.disp_cna),void 0!==x.disp_fusion&&(p.FUSION[w][A]=y[x.disp_fusion+""]?y[x.disp_fusion+""]:x.disp_fusion),void 0!==x.disp_mrna&&(p.MRNA[w][A]=h[x.disp_mrna]?h[x.disp_mrna]:x.disp_mrna),void 0!==x.disp_prot&&(p.PROTEIN[w][A]=m[x.disp_prot]?m[x.disp_prot]:x.disp_prot),void 0!==x.disp_mut&&(p.MUTATIONS[w][A]=f[x.disp_mut]?f[x.disp_mut]:x.disp_mut)}}catch(e){C=!0,k=e}finally{try{O||null==P.return||P.return()}finally{if(C)throw k}}}}catch(e){b=!0,v=e}finally{try{g||null==S.return||S.return()}finally{if(b)throw v}}var j=!0,I=!1,N=void 0;try{for(var M,D=t[Symbol.iterator]();!(j=(M=D.next()).done);j=!0){var R=M.value,L=R.data,G=R.label;if("counts"===R.datatype){var V=!0,B=!1,F=void 0;try{for(var H,U=R.countsCategoryLabels[Symbol.iterator]();!(V=(H=U.next()).done);V=!0){var W=u(G,H.value);p.CLINICAL[W]=p.CLINICAL[W]||{}}}catch(e){B=!0,F=e}finally{try{V||null==U.return||U.return()}finally{if(B)throw F}}}else void 0===p.CLINICAL[G]&&(p.CLINICAL[G]={});var q=!0,z=!1,Q=void 0;try{for(var K,Y=L[Symbol.iterator]();!(q=(K=Y.next()).done);q=!0){var X=K.value,Z="sample"===s?X.sample:X.patient;if("counts"===R.datatype){var J=!0,$=!1,ee=void 0;try{for(var te,ne=R.countsCategoryLabels[Symbol.iterator]();!(J=(te=ne.next()).done);J=!0){var re=te.value;p.CLINICAL[u(G,re)][Z]=X.attr_val?X.attr_val[re]:""}}catch(e){$=!0,ee=e}finally{try{J||null==ne.return||ne.return()}finally{if($)throw ee}}}else p.CLINICAL[G][Z]="",p.CLINICAL[G][Z]=Object(cn.a)(X.attr_val,"")}}catch(e){z=!0,Q=e}finally{try{q||null==Y.return||Y.return()}finally{if(z)throw Q}}}}catch(e){I=!0,N=e}finally{try{j||null==D.return||D.return()}finally{if(I)throw N}}var oe=n.concat(r).concat(o),ie=!0,ae=!1,se=void 0;try{for(var le,ue=oe[Symbol.iterator]();!(ie=(le=ue.next()).done);ie=!0){var ce=le.value,pe=ce.label,de="HEATMAP "+ce.molecularAlterationType+" "+ce.datatype,fe=ce.data,he=!0,me=!1,ye=void 0;try{for(var ge,be=fe[Symbol.iterator]();!(he=(ge=be.next()).done);he=!0){var ve=ge.value;void 0===p[de]&&(p[de]={}),void 0===p[de][pe]&&(p[de][pe]={});var _e="sample"===s?ve.sample:ve.patient;p[de][pe][_e]=null===ve.profile_data?"":ve.profile_data}}catch(e){me=!0,ye=e}finally{try{he||null==be.return||be.return()}finally{if(me)throw ye}}}}catch(e){ae=!0,se=e}finally{try{ie||null==ue.return||ue.return()}finally{if(ae)throw se}}for(var Se="track_name\ttrack_type",Ee=0;Ee<c.length;Ee++)Se+="\t"+c[Ee];return Se+="\n",Object.keys(p).forEach(function(e){Object.keys(p[e]).forEach(function(t){Se+=t+"\t"+e;for(var n=0;n<c.length;n++)Se+="\t"+p[e][t][c[n]];Se+="\n"})}),Se}(e,t,n,r,o,i,a,s,l),u+"oncoprint.tsv")}var dn=n(34),fn=n(222),hn=n(936),mn=n(58),yn=n(68),gn=n(892),bn=n(92),vn={missense:d.a.MUTATION_EXTENDED,inframe:d.a.MUTATION_EXTENDED,fusion:d.a.FUSION,promoter:d.a.MUTATION_EXTENDED,trunc:d.a.MUTATION_EXTENDED,other:d.a.MUTATION_EXTENDED,amp:d.a.COPY_NUMBER_ALTERATION,homdel:d.a.COPY_NUMBER_ALTERATION,gain:d.a.COPY_NUMBER_ALTERATION,hetloss:d.a.COPY_NUMBER_ALTERATION,mrnaHigh:d.a.MRNA_EXPRESSION,mrnaLow:d.a.MRNA_EXPRESSION,protHigh:d.a.PROTEIN_LEVEL,protLow:d.a.PROTEIN_LEVEL};function _n(e,t,n){var r=function(e){var t=null;switch(e.molecularProfileAlterationType){case d.a.MUTATION_EXTENDED:t=Object(mn.b)(e);break;case d.a.COPY_NUMBER_ALTERATION:t=yn.a[e.value];break;case d.a.MRNA_EXPRESSION:"high"===e.alterationSubType?t="mrnaHigh":"low"===e.alterationSubType&&(t="mrnaLow");break;case d.a.PROTEIN_LEVEL:"high"===e.alterationSubType?t="protHigh":"low"===e.alterationSubType&&(t="protLow")}return t}(e);if(r){var o={};return o.sampleId=n,o.hugoGeneSymbol=e.hugoGeneSymbol,o.trackName=t,o.alteration=r,o.proteinChange=e.proteinChange,o.isGermline=!Object(_.o)(e),o.isCustomDriver=e.driverFilter===bn.d,o}return{sampleId:n}}function Sn(e){var t=[e.sampleId];if(Object(hn.l)(e)){switch(t.push(e.hugoGeneSymbol),vn[e.alteration]){case d.a.MUTATION_EXTENDED:t.push(e.proteinChange||"mutation"),t.push(e.alteration.toUpperCase()+(e.isGermline?"_GERMLINE":"")+(e.isCustomDriver?"_DRIVER":""));break;case d.a.COPY_NUMBER_ALTERATION:t.push(e.alteration.toUpperCase()),t.push("CNA");break;case d.a.MRNA_EXPRESSION:t.push("mrnaHigh"===e.alteration?"HIGH":"LOW"),t.push("EXP");break;case d.a.PROTEIN_LEVEL:t.push("protHigh"===e.alteration?"HIGH":"LOW"),t.push("PROT");break;case d.a.FUSION:t.push(e.proteinChange||"fusion"),t.push("FUSION")}e.trackName&&t.push(En(e.trackName))}return t.join("  ")}function En(e){return e.replace(/\s+/g,"_")}function wn(e){return e.replace(/[()]/g,"").replace(/\s+/g,"_")}function On(e,t,n){var r=i.a.mapValues(i.a.keyBy(e,function(e){return e.key}),function(e){return i.a.keyBy(e.data,function(e){return e[n]})}),o=[];o.push(["Sample"].concat(e.map(function(e){return"".concat(wn("".concat(e.label,"_").concat(e.molecularProfileName)),"(").concat(function(e,t){if(/zscores/i.test(e))return gn.b.HEATMAP_ZSCORE;switch(t){case d.a.METHYLATION:return gn.b.HEATMAP_01;default:return gn.b.HEATMAP}}(e.molecularProfileId,e.molecularAlterationType),")")})));var a=!0,s=!1,l=void 0;try{for(var u,c=function(){var t=u.value;o.push([t].concat(e.map(function(e){var n=r[e.key][t];return!n||n.na||null===n.profile_data||isNaN(n.profile_data)?gn.c:n.profile_data})))},p=t[Symbol.iterator]();!(a=(u=p.next()).done);a=!0)c()}catch(e){s=!0,l=e}finally{try{a||null==p.return||p.return()}finally{if(s)throw l}}return o.map(function(e){return e.join("  ")}).join("\n")}n(1014);function Cn(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function kn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tn(e){return(Tn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xn(e,t){return(xn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function An(e){return(An="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var jn,In=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":An(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Nn=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};!function(e){e.CASE_ID="case_id",e.CASE_LIST="case_list",e.NONE=""}(jn||(jn={}));var Mn=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t){return!t||"object"!==An(t)&&"function"!=typeof t?Pn(e):t}(this,Tn(t).call(this,e))).distinguishGermlineMutations=!0,n.distinguishMutationType=!0,n.showUnalteredColumns=!0,n.showWhitespaceBetweenColumns=!0,n.showClinicalTrackLegends=!0,n._onlyShowClinicalLegendForAlteredCases=!1,n.showOqlInLabels=!1,n.showMinimap=!1,n.selectedHeatmapProfileId="",n.heatmapGeneInputValue="",n.horzZoom=.5,n.mouseInsideBounds=!1,n.renderingComplete=!1,n.molecularProfileIdToHeatmapTrackGroupIndex={},n.expansionsByGeneticTrackKey=p.observable.map(),n.expansionsByGenesetHeatmapTrackKey=p.observable.map(),n.unalteredKeys=Object(S.T)({await:function(){return[n.geneticTracks]},invoke:function(){return Nn(Pn(n),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(an.h)(this.geneticTracks.result));case 1:case"end":return e.stop()}},e,this)}))}}),n.genericAssayEntitiesSelectOptionsGroupByGenericAssayType=Object(S.T)({await:function(){return[n.props.store.genericAssayEntitiesGroupByGenericAssayType]},invoke:function(){return Nn(Pn(n),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve(Object(fn.c)(this.props.store.genericAssayEntitiesGroupByGenericAssayType.result)));case 1:case"end":return e.stop()}},e,this)}))}}),n.genericAssayEntitiesSelectOptionsGroupByMolecularProfileId=Object(S.T)({await:function(){return[n.props.store.genericAssayEntitiesGroupByMolecularProfileId]},invoke:function(){return Nn(Pn(n),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve(Object(fn.c)(this.props.store.genericAssayEntitiesGroupByMolecularProfileId.result)));case 1:case"end":return e.stop()}},e,this)}))}}),n.alteredKeys=Object(S.T)({await:function(){return[n.geneticTracks]},invoke:function(){return Nn(Pn(n),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(an.c)(this.geneticTracks.result));case 1:case"end":return e.stop()}},e,this)}))},default:[]}),n.sampleGeneticTracks=Object(an.m)(Pn(n),!0),n.patientGeneticTracks=Object(an.m)(Pn(n),!1),n.sampleClinicalTracks=Object(an.i)(Pn(n),!0),n.patientClinicalTracks=Object(an.i)(Pn(n),!1),n.sampleHeatmapTracks=Object(an.n)(Pn(n),!0),n.patientHeatmapTracks=Object(an.n)(Pn(n),!1),n.samplegGenericAssayHeatmapTracks=Object(an.j)(Pn(n),!0),n.patientGenericAssayHeatmapTracks=Object(an.j)(Pn(n),!1),n.sampleGenesetHeatmapTracks=Object(an.l)(Pn(n),!0,Object(an.k)(Pn(n),!0)),n.patientGenesetHeatmapTracks=Object(an.l)(Pn(n),!1,Object(an.k)(Pn(n),!1)),n.heatmapTrackHeaders=Object(S.T)({await:function(){return[n.props.store.molecularProfileIdToMolecularProfile]},invoke:function(){return Promise.resolve(Object(fn.g)(n.props.store.molecularProfileIdToMolecularProfile.result,n.molecularProfileIdToHeatmapTracks,n.genesetHeatmapTrackGroupIndex,function(){return n.clusteredHeatmapTrackGroupIndex},n.clusterHeatmapByIndex,function(){return n.sortByData()},n.removeHeatmapByIndex))},default:{}}),n.alterationTypesInQuery=Object(S.T)({await:function(){return[n.props.store.selectedMolecularProfiles]},invoke:function(){return Promise.resolve(i.a.uniq(n.props.store.selectedMolecularProfiles.result.map(function(e){return e.molecularAlterationType})))}}),n.loadingGeneticDataDuringCurrentLoad=!1,n.loadingClinicalDataDuringCurrentLoad=!1,n.showOqlInLabels=e.store.queryContainsOql,window.resultsViewOncoprint=Pn(n);var r=Pn(n);return n.onChangeSelectedClinicalTracks=n.onChangeSelectedClinicalTracks.bind(Pn(n)),n.onDeleteClinicalTrack=n.onDeleteClinicalTrack.bind(Pn(n)),n.onMinimapClose=n.onMinimapClose.bind(Pn(n)),n.oncoprintRef=n.oncoprintRef.bind(Pn(n)),n.toggleColumnMode=n.toggleColumnMode.bind(Pn(n)),n.onTrackSortDirectionChange=n.onTrackSortDirectionChange.bind(Pn(n)),n.onSuppressRendering=n.onSuppressRendering.bind(Pn(n)),n.onReleaseRendering=n.onReleaseRendering.bind(Pn(n)),Object(yt.a)(n.props.store.heatmapMolecularProfiles,function(e){e.length&&(n.selectedHeatmapProfileId=e[0].molecularProfileId)}),n.heatmapGeneInputValueUpdater=Object(yt.a)(n.props.store.genes,function(e){n.heatmapGeneInputValue=e.map(function(e){return e.hugoGeneSymbol}).join(" ")},Number.POSITIVE_INFINITY),n.onMouseEnter=n.onMouseEnter.bind(Pn(n)),n.onMouseLeave=n.onMouseLeave.bind(Pn(n)),n.controlsHandlers=n.buildControlsHandlers(),n.controlsState=Object(p.observable)({get selectedClinicalAttributeIds(){return r.selectedClinicalAttributeIds.keys()},get selectedColumnType(){return r.oncoprintAnalysisCaseType},get showUnalteredColumns(){return r.showUnalteredColumns},get showWhitespaceBetweenColumns(){return r.showWhitespaceBetweenColumns},get showClinicalTrackLegends(){return r.showClinicalTrackLegends},get onlyShowClinicalLegendForAlteredCases(){return r.onlyShowClinicalLegendForAlteredCases},get showOqlInLabels(){return r.showOqlInLabels},get showMinimap(){return r.showMinimap},get hideHeatmapMenu(){return r.props.store.studies.result.length>1},get sortByMutationType(){return r.sortByMutationType},get sortByCaseListDisabled(){return!r.caseListSortPossible},get distinguishMutationType(){return r.distinguishMutationType},get distinguishDrivers(){return r.distinguishDrivers},get distinguishGermlineMutations(){return r.distinguishGermlineMutations},get annotateDriversOncoKb(){return r.props.store.driverAnnotationSettings.oncoKb},get annotateDriversOncoKbDisabled(){return!ce.b.serverConfig.show_oncokb},get annotateDriversOncoKbError(){return r.props.store.didOncoKbFailInOncoprint},get annotateDriversHotspots(){return r.props.store.driverAnnotationSettings.hotspots},get annotateDriversHotspotsDisabled(){return!ce.b.serverConfig.show_hotspot},get annotateDriversHotspotsError(){return r.props.store.didHotspotFailInOncoprint},get annotateDriversCBioPortal(){return r.props.store.driverAnnotationSettings.cbioportalCount},get annotateDriversCOSMIC(){return r.props.store.driverAnnotationSettings.cosmicCount},get hidePutativePassengers(){return r.props.store.driverAnnotationSettings.excludeVUS},get hideGermlineMutations(){return r.props.store.excludeGermlineMutations},get annotateCBioPortalInputValue(){return r.props.store.driverAnnotationSettings.cbioportalCountThreshold+""},get annotateCOSMICInputValue(){return r.props.store.driverAnnotationSettings.cosmicCountThreshold+""},get sortMode(){return r.sortMode},get sortByDrivers(){return r.sortByDrivers},get heatmapProfilesPromise(){return r.props.store.heatmapMolecularProfiles},get genericAssayEntitiesGroupByGenericAssayTypePromise(){return r.props.store.genericAssayEntitiesGroupByGenericAssayType},get selectedHeatmapProfileId(){return r.selectedHeatmapProfileId},get selectedHeatmapProfileAlterationType(){return r.selectedHeatmapProfileAlterationType},get selectedHeatmapProfileGenericAssayType(){return r.selectedHeatmapProfileGenericAssayType},get heatmapIsDynamicallyQueried(){return r.heatmapIsDynamicallyQueried},get ngchmButtonActive(){return!(!ce.b.serverConfig.show_mdacc_heatmap||!r.props.store.remoteNgchmUrl.result||""==r.props.store.remoteNgchmUrl.result)},get heatmapGeneInputValue(){return r.heatmapGeneInputValue},get customDriverAnnotationBinaryMenuLabel(){var e=ce.b.serverConfig.oncoprint_custom_driver_annotation_binary_menu_label,t=r.props.store.customDriverAnnotationReport.result;return e&&t&&t.hasBinary?e:void 0},get customDriverAnnotationTiersMenuLabel(){var e=ce.b.serverConfig.oncoprint_custom_driver_annotation_tiers_menu_label,t=r.props.store.customDriverAnnotationReport.result;return e&&t&&t.tiers.length?e:void 0},get customDriverAnnotationTiers(){var e=r.props.store.customDriverAnnotationReport.result;return e&&e.tiers.length?e.tiers:void 0},get annotateCustomDriverBinary(){return r.props.store.driverAnnotationSettings.customBinary},get selectedCustomDriverAnnotationTiers(){return r.props.store.driverAnnotationSettings.driverTiers},get columnMode(){return r.oncoprintAnalysisCaseType},get horzZoom(){return isNaN(r.horzZoom)?1:r.horzZoom}}),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xn(e,t)}(t,r["Component"]),n=t,(o=[{key:"onMouseEnter",value:function(){this.mouseInsideBounds=!0}},{key:"onMouseLeave",value:function(){this.mouseInsideBounds=!1}},{key:"selectHeatmapProfile",value:function(e){var t=this;Object(yt.a)(this.props.store.heatmapMolecularProfiles,function(n){t.selectedHeatmapProfileId=t.props.store.heatmapMolecularProfiles.result[e].molecularProfileId})}},{key:"setAnnotateCBioPortalInputValue",value:function(e){this.controlsHandlers.onChangeAnnotateCBioPortalInputValue&&this.controlsHandlers.onChangeAnnotateCBioPortalInputValue(e)}},{key:"setAnnotateCOSMICInputValue",value:function(e){this.controlsHandlers.onChangeAnnotateCOSMICInputValue&&this.controlsHandlers.onChangeAnnotateCOSMICInputValue(e)}},{key:"buildControlsHandlers",value:function(){var e=this;return{onSelectColumnType:function(t){e.props.store.setOncoprintAnalysisCaseType(t)},onSelectShowUnalteredColumns:function(t){e.showUnalteredColumns=t},onSelectShowWhitespaceBetweenColumns:function(t){e.showWhitespaceBetweenColumns=t},onSelectShowClinicalTrackLegends:function(t){e.showClinicalTrackLegends=t},onSelectOnlyShowClinicalLegendForAlteredCases:function(t){e._onlyShowClinicalLegendForAlteredCases=t},onSelectShowOqlInLabels:function(t){e.showOqlInLabels=t},onSelectShowMinimap:function(t){e.showMinimap=t},onSelectDistinguishMutationType:function(t){e.distinguishMutationType=t},onSelectDistinguishDrivers:Object(p.action)(function(t){t?(e.controlsState.annotateDriversOncoKbDisabled||e.controlsState.annotateDriversOncoKbError||(e.props.store.driverAnnotationSettings.oncoKb=!0),e.controlsState.annotateDriversHotspotsDisabled||e.controlsState.annotateDriversHotspotsError||(e.props.store.driverAnnotationSettings.hotspots=!0),e.props.store.driverAnnotationSettings.cbioportalCount=!0,e.props.store.driverAnnotationSettings.cosmicCount=!0,e.props.store.driverAnnotationSettings.customBinary=!0,e.props.store.driverAnnotationSettings.driverTiers.forEach(function(t,n){e.props.store.driverAnnotationSettings.driverTiers.set(n,!0)})):(e.props.store.driverAnnotationSettings.oncoKb=!1,e.props.store.driverAnnotationSettings.hotspots=!1,e.props.store.driverAnnotationSettings.cbioportalCount=!1,e.props.store.driverAnnotationSettings.cosmicCount=!1,e.props.store.driverAnnotationSettings.customBinary=!1,e.props.store.driverAnnotationSettings.driverTiers.forEach(function(t,n){e.props.store.driverAnnotationSettings.driverTiers.set(n,!1)}),e.props.store.driverAnnotationSettings.excludeVUS=!1)}),onSelectDistinguishGermlineMutations:function(t){e.distinguishGermlineMutations=t},onSelectAnnotateOncoKb:Object(p.action)(function(t){e.props.store.driverAnnotationSettings.oncoKb=t}),onSelectAnnotateHotspots:Object(p.action)(function(t){e.props.store.driverAnnotationSettings.hotspots=t}),onSelectAnnotateCBioPortal:Object(p.action)(function(t){e.props.store.driverAnnotationSettings.cbioportalCount=t}),onSelectAnnotateCOSMIC:Object(p.action)(function(t){e.props.store.driverAnnotationSettings.cosmicCount=t}),onChangeAnnotateCBioPortalInputValue:Object(p.action)(function(t){e.props.store.driverAnnotationSettings.cbioportalCountThreshold=parseInt(t,10),e.controlsHandlers.onSelectAnnotateCBioPortal&&e.controlsHandlers.onSelectAnnotateCBioPortal(!0)}),onChangeAnnotateCOSMICInputValue:Object(p.action)(function(t){e.props.store.driverAnnotationSettings.cosmicCountThreshold=parseInt(t,10),e.controlsHandlers.onSelectAnnotateCOSMIC&&e.controlsHandlers.onSelectAnnotateCOSMIC(!0)}),onSelectCustomDriverAnnotationBinary:Object(p.action)(function(t){e.props.store.driverAnnotationSettings.customBinary=t}),onSelectCustomDriverAnnotationTier:Object(p.action)(function(t,n){e.props.store.driverAnnotationSettings.driverTiers.set(t,n)}),onSelectHidePutativePassengers:function(t){e.props.store.driverAnnotationSettings.excludeVUS=t},onSelectHideGermlineMutations:function(t){e.props.store.setExcludeGermlineMutations(t)},onSelectSortByMutationType:function(t){e.urlWrapper.updateURL({oncoprint_sort_by_mutation_type:t.toString()})},onClickSortAlphabetical:function(){e.urlWrapper.updateURL({oncoprint_sortby:"case_id",oncoprint_cluster_profile:""})},onClickSortCaseListOrder:function(){e.urlWrapper.updateURL({oncoprint_sortby:"case_list",oncoprint_cluster_profile:""})},onSelectSortByDrivers:function(t){e.urlWrapper.updateURL({oncoprint_sort_by_drivers:t.toString()})},onClickSortByData:function(){e.urlWrapper.updateURL({oncoprint_sortby:"",oncoprint_cluster_profile:""})},onChangeSelectedClinicalTracks:this.onChangeSelectedClinicalTracks,onChangeHeatmapGeneInputValue:Object(p.action)(function(t){e.heatmapGeneInputValue=t,e.heatmapGeneInputValueUpdater()}),onSelectHeatmapProfile:function(t){e.selectedHeatmapProfileId=t},onClickAddGenesToHeatmap:function(){var t=Object(Xe.g)(e.heatmapGeneInputValue.toUpperCase().trim()).map(function(e){return e.gene});e.addHeatmapTracks(e.selectedHeatmapProfileId,t)},onClickAddGenericAssaysToHeatmap:function(t){e.addHeatmapTracks(e.selectedHeatmapProfileId,t)},onClickNGCHM:function(){window.open(e.props.store.remoteNgchmUrl.result,"_blank")},onClickDownload:function(t){switch(t){case"pdf":Object(S.ab)("oncoprint.pdf",e.oncoprint.toSVG(!1));break;case"png":e.oncoprint.toCanvas(function(e,t){e.toBlob(function(n){t&&alert("Oncoprint too large - PNG truncated to ".concat(e.getAttribute("width"),"x").concat(e.getAttribute("height"))),Te()(n,"oncoprint.png")})},2);break;case"svg":Te()((new XMLSerializer).serializeToString(e.oncoprint.toSVG(!1)),"oncoprint.svg");break;case"order":var n=Object(S.z)(e.oncoprintAnalysisCaseType);Object(yt.a)([e.props.store.sampleKeyToSample,e.props.store.patientKeyToPatient],function(t,r){var o="".concat(n," order in the Oncoprint is:\n"),i=(e.oncoprintAnalysisCaseType,Pe.b.SAMPLE,e.oncoprint.getIdOrder().map(e.oncoprintAnalysisCaseType===Pe.b.SAMPLE?function(e){return t[e].sampleId}:function(e){return r[e].patientId})),a=!0,s=!1,l=void 0;try{for(var u,c=i[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var p=u.value;o+="".concat(p,"\n")}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}Te()(o,"OncoPrint".concat(n,"s.txt"))});break;case"tabular":Object(yt.a)([e.props.store.sampleKeyToSample,e.props.store.patientKeyToPatient],function(t,n){pn(e.geneticTracks.result,e.clinicalTracks.result,e.heatmapTracks.result,e.genericAssayHeatmapTracks.result,e.genesetHeatmapTracks.result,e.oncoprint.getIdOrder(),e.oncoprintAnalysisCaseType===Pe.b.SAMPLE?function(e){return t[e].sampleId}:function(e){return n[e].patientId},e.oncoprintAnalysisCaseType,e.distinguishDrivers)});break;case"oncoprinter":Object(yt.a)([e.props.store.samples,e.props.store.patients,e.geneticTracks,e.clinicalTracks,e.heatmapTracks,e.genesetHeatmapTracks,e.props.store.clinicalAttributeIdToClinicalAttribute],function(t,n,r,o,a,s,l){var u=e.oncoprintAnalysisCaseType===Pe.b.SAMPLE?t.map(function(e){return e.sampleId}):n.map(function(e){return e.patientId}),c="";r.length>0&&(c=function(e,t,n){var r={};return i.a.flatMapDeep(e,function(e){var t=function(e,t){var n=e;for(t[n]=t[n]||0,t[n]+=1;t[n]>1;)t[n="".concat(n,"_").concat(t[n])]=t[n]||0,t[n]+=1;return n}(e.label,r);return e.data.map(function(e){return e.data.map(function(r){return _n(r,t,e[n])})})}).map(Sn).concat(t).join("\n")}(r,u,e.oncoprintAnalysisCaseType));var p="";o.length>0&&(p=function(e,t,n,r,o){var a=i.a.groupBy(e,function(e){return e[o]}),s=[];s.push(["Sample"].concat(n.map(function(e){var t=r[e],n=wn(t.displayName),o=t.datatype.toLowerCase();return"MUTATION_COUNT"===t.clinicalAttributeId&&(o=gn.a.LOG_NUMBER),t.clinicalAttributeId===dn.c.MutationSpectrum&&(o=dn.a.join("/")),"".concat(n,"(").concat(o,")")})));var l=!0,u=!1,c=void 0;try{for(var p,d=function(){var e=p.value;s.push([e].concat(n.map(function(t){var n=a[e]&&a[e].find(function(e){return e.attr_id===t});return n&&!n.na&&n.attr_val?t===dn.c.MutationSpectrum?dn.a.map(function(e){return n.attr_val[e]}).join("/"):En(n.attr_val.toString()):gn.c})))},f=t[Symbol.iterator]();!(l=(p=f.next()).done);l=!0)d()}catch(e){u=!0,c=e}finally{try{l||null==f.return||f.return()}finally{if(u)throw c}}return s.map(function(e){return e.join("  ")}).join("\n")}(i.a.flatMap(o,function(e){return e.data}),u,o.map(function(e){return e.attributeId}),l,e.oncoprintAnalysisCaseType));var d="";a.length>0&&(d=On(a,u,e.oncoprintAnalysisCaseType)),s.length>0&&alert("Oncoprinter does not support geneset heatmaps - all other tracks will still be exported."),window.open(Object(fe.b)("/oncoprinter")).clientPostedData={genetic:c,clinical:p,heatmap:d}})}},onSetHorzZoom:function(t){e.oncoprint.setHorzZoomCentered(t)},onClickZoomIn:function(){e.oncoprint.setHorzZoomCentered(e.oncoprint.getHorzZoom()/.7)},onClickZoomOut:function(){e.oncoprint.setHorzZoomCentered(.7*e.oncoprint.getHorzZoom())}}}},{key:"sortByData",value:function(){this.urlWrapper.updateURL({oncoprint_sortby:"",oncoprint_cluster_profile:""})}},{key:"addHeatmapTracks",value:function(e,t){var n=i.a.cloneDeep(this.molecularProfileIdToHeatmapTracks),r=i.a.chain(t).keyBy(function(e){return e}).mapValues(function(){return!0}).value();delete n[e];var o=this.props.store.molecularProfileIdToMolecularProfile.result[e].molecularAlterationType;t&&t.length?n[e]={entities:r,molecularAlterationType:o,molecularProfileId:e}:delete n[e];var a=i.a.map(n,function(e,t){return"".concat(t,",").concat(i.a.keys(e.entities).join(","))}).join(";"),s=i.a.filter(n,function(e){return e.molecularAlterationType===d.a.GENERIC_ASSAY}).map(function(e){return"".concat(e.molecularProfileId,",").concat(i.a.keys(e.entities).join(","))}).join(";");this.urlWrapper.updateURL({heatmap_track_groups:a,generic_assay_groups:s})}},{key:"toggleColumnMode",value:function(){switch(this.oncoprintAnalysisCaseType){case Pe.b.SAMPLE:this.controlsHandlers.onSelectColumnType&&this.controlsHandlers.onSelectColumnType(Pe.b.PATIENT);break;case Pe.b.PATIENT:this.controlsHandlers.onSelectColumnType&&this.controlsHandlers.onSelectColumnType(Pe.b.SAMPLE)}}},{key:"oncoprintRef",value:function(e){var t=this;this.oncoprint=e,this.props.addOnBecomeVisibleListener&&this.props.addOnBecomeVisibleListener(function(){return t.oncoprint.triggerPendingResizeAndOrganize(t.onReleaseRendering)}),this.oncoprint.onHorzZoom(function(e){return t.horzZoom=e}),this.horzZoom=this.oncoprint.getHorzZoom(),Object(yt.a)(this.alteredKeys,function(e){t.oncoprint.setHorzZoomToFit(e)})}},{key:"setColumnMode",value:function(e){this.urlWrapper.updateURL({show_samples:e===Pe.b.SAMPLE?"true":"false"})}},{key:"onMinimapClose",value:function(){this.showMinimap=!1}},{key:"onSuppressRendering",value:function(){this.renderingComplete=!1}},{key:"onReleaseRendering",value:function(){this.renderingComplete=!0}},{key:"clinicalTrackKeyToAttributeId",value:function(e){return e.substr("CLINICALTRACK_".length)}},{key:"clinicalAttributeIdToTrackKey",value:function(e){return"".concat("CLINICALTRACK_").concat(e)}},{key:"onChangeSelectedClinicalTracks",value:function(e){this.urlWrapper.updateURL({clinicallist:e.join(",")})}},{key:"onDeleteClinicalTrack",value:function(e){var t=this;if(!this.isHidden){var n=this.selectedClinicalAttributeIds.keys(),r=i.a.filter(n,function(n){return n!==t.clinicalTrackKeyToAttributeId(e)});this.urlWrapper.updateURL({clinicallist:r.join(",")})}}},{key:"onTrackSortDirectionChange",value:function(e,t){1!==t&&-1!==t||this.sortByData()}},{key:"clearSortDirectionsAndSortByData",value:function(){this.oncoprint&&(this.oncoprint.resetSortableTracksSortDirection(),this.sortByData())}},{key:"clusterHeatmapByIndex",value:function(e){var t;if(this.oncoprint&&this.oncoprint.resetSortableTracksSortDirection(),e===this.genesetHeatmapTrackGroupIndex)t=this.props.store.genesetMolecularProfile.result&&this.props.store.genesetMolecularProfile.result.value&&this.props.store.genesetMolecularProfile.result.value.molecularProfileId;else{var n=i.a.values(this.molecularProfileIdToHeatmapTracks).find(function(t){return t.trackGroupIndex===e});t=n?n.molecularProfileId:void 0}t&&this.urlWrapper.updateURL({oncoprint_sortby:"cluster",oncoprint_cluster_profile:t})}},{key:"removeHeatmapByIndex",value:function(e){var t=i.a.values(this.molecularProfileIdToHeatmapTracks).find(function(t){return t.trackGroupIndex===e});t&&this.removeHeatmapByMolecularProfileId(t.molecularProfileId)}},{key:"removeHeatmapByMolecularProfileId",value:function(e){delete this.molecularProfileIdToHeatmapTrackGroupIndex[e],this.addHeatmapTracks(e,[])}},{key:"getControls",value:function(){return this.oncoprint&&!this.oncoprint.webgl_unavailable&&this.props.store.molecularProfileIdToMolecularProfile.result?r.createElement(S.h,{showByDefault:!0,show:!0},r.createElement(un.a,{handlers:this.controlsHandlers,state:this.controlsState,store:this.props.store,molecularProfileIdToMolecularProfile:this.props.store.molecularProfileIdToMolecularProfile.result,genericAssayEntitiesSelectOptionsGroupByGenericAssayTypePromise:this.genericAssayEntitiesSelectOptionsGroupByGenericAssayType,genericAssayEntitiesSelectOptionsGroupByMolecularProfileIdPromise:this.genericAssayEntitiesSelectOptionsGroupByMolecularProfileId,selectedGenericAssayEntitiesGroupByGenericAssayTypeFromUrl:this.selectedGenericAssayEntitiesGroupByGenericAssayTypeFromUrl})):r.createElement("span",null)}},{key:"getProgressItems",value:function(e){0===e&&(this.loadingGeneticDataDuringCurrentLoad=!1,this.loadingClinicalDataDuringCurrentLoad=!1);var t=i.a.some(this.selectedClinicalAttributeIds.keys(),function(e){return!Object(dn.e)({clinicalAttributeId:e})});this.geneticTracks.isPending&&(this.loadingGeneticDataDuringCurrentLoad=!0),t&&this.clinicalTracks.isPending&&(this.loadingClinicalDataDuringCurrentLoad=!0);var n,r=[];if(this.props.store.genes.isComplete&&this.props.store.filteredSamples.isComplete){var o=this.props.store.genes.result.length,a=this.props.store.filteredSamples.result.length;n="Querying ".concat(o," genes in ").concat(a," samples")}else n="Querying ... genes in ... samples";var s="";e>2&&(s=" - this can take several seconds"),r.push({label:"".concat(n).concat(s),promises:[],hideIcon:!0,style:{fontWeight:"bold"}});var l=[];this.loadingGeneticDataDuringCurrentLoad&&l.push("genetic"),this.loadingClinicalDataDuringCurrentLoad&&l.push("clinical"),r.push({label:"Loading ".concat(l.join(" and ")," data"),promises:[this.props.store.molecularData,this.props.store.mutations].concat(Cn(t?[this.clinicalTracks]:[]))});var u=this.props.store.driverAnnotationSettings.oncoKb,c=this.props.store.driverAnnotationSettings.hotspots;return r.push({label:Object(fn.d)(u,c),promises:[this.props.store.filteredAndAnnotatedMolecularData,this.props.store.filteredAndAnnotatedMutations]}),r.push({label:"Rendering"}),r}},{key:"render",value:function(){return r.createElement("div",{style:{position:"relative"}},r.createElement(me.a,{isLoading:this.isHidden,size:"big",centerRelativeToContainer:!1,center:!0,className:"oncoprintLoadingIndicator"},r.createElement("div",null,r.createElement(Rt.a,{getItems:this.getProgressItems,show:this.isHidden,sequential:!0}))),r.createElement("div",{className:"tabMessageContainer"},r.createElement(pe.a,{className:"oncoprint-oql-status-banner",store:this.props.store,tabReflectsOql:!0}),r.createElement(de.a,{store:this.props.store}),r.createElement(he.a,{store:this.props.store,isPatientMode:this.oncoprintAnalysisCaseType===Pe.b.PATIENT})),r.createElement("div",{className:ht()("oncoprintContainer",{fadeIn:!this.isHidden}),onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},r.createElement(c.Observer,null,this.getControls),r.createElement("div",{style:{position:"relative",marginTop:15}},r.createElement("div",null,r.createElement(ln.c,{oncoprintRef:this.oncoprintRef,clinicalTracks:this.clinicalTracks.result,geneticTracks:this.geneticTracks.result,genesetHeatmapTracks:this.genesetHeatmapTracks.result,heatmapTracks:[].concat(this.genericAssayHeatmapTracks.result).concat(this.heatmapTracks.result),divId:this.props.divId,width:this.width,caseLinkOutInTooltips:!0,suppressRendering:this.isLoading,onSuppressRendering:this.onSuppressRendering,onReleaseRendering:this.onReleaseRendering,hiddenIds:this.showUnalteredColumns?void 0:this.unalteredKeys.result,molecularProfileIdToMolecularProfile:this.props.store.molecularProfileIdToMolecularProfile.result,alterationTypesInQuery:this.alterationTypesInQuery.result,showSublabels:this.showOqlInLabels,heatmapTrackHeaders:this.heatmapTrackHeaders.result,horzZoomToFitIds:this.alteredKeys.result,distinguishMutationType:this.distinguishMutationType,distinguishDrivers:this.distinguishDrivers,distinguishGermlineMutations:this.distinguishGermlineMutations,sortConfig:this.oncoprintLibrarySortConfig,showClinicalTrackLegends:this.showClinicalTrackLegends,showWhitespaceBetweenColumns:this.showWhitespaceBetweenColumns,showMinimap:this.showMinimap,onMinimapClose:this.onMinimapClose,onDeleteClinicalTrack:this.onDeleteClinicalTrack,onTrackSortDirectionChange:this.onTrackSortDirectionChange,initParams:{max_height:Number.POSITIVE_INFINITY}})))))}},{key:"columnMode",get:function(){return"true"===this.urlWrapper.query.show_samples?"sample":"patient"}},{key:"sortMode",get:function(){var e;switch(this.urlWrapper.query.oncoprint_sortby){case"case_id":e={type:"alphabetical"};break;case"case_list":e={type:"caseList"};break;case"cluster":e={type:"heatmap",clusteredHeatmapProfile:this.urlWrapper.query.oncoprint_cluster_profile};break;case"":default:e={type:"data"}}return e}},{key:"sortByMutationType",get:function(){return!this.urlWrapper.query.oncoprint_sort_by_mutation_type||"true"===this.urlWrapper.query.oncoprint_sort_by_mutation_type}},{key:"sortByDrivers",get:function(){return!this.urlWrapper.query.oncoprint_sort_by_drivers||"true"===this.urlWrapper.query.oncoprint_sort_by_drivers}},{key:"selectedGenericAssayEntitiesGroupByGenericAssayTypeFromUrl",get:function(){var e=this;return i.a.reduce(this.props.store.selectedGenericAssayEntitiesGroupByMolecularProfileId,function(t,n,r){if(e.props.store.molecularProfileIdToMolecularProfile.result[r]){var o=e.props.store.molecularProfileIdToMolecularProfile.result[r].genericAssayType;t[o]=t[o]?i.a.union(n,t[o]):n}return t},{})}},{key:"onlyShowClinicalLegendForAlteredCases",get:function(){return this.showClinicalTrackLegends&&this._onlyShowClinicalLegendForAlteredCases}},{key:"selectedClinicalAttributeIds",get:function(){var e=this.urlWrapper.query.clinicallist?this.urlWrapper.query.clinicallist.split(","):[];return void 0===this.urlWrapper.query.clinicallist&&(this.props.store.studyIds.result&&this.props.store.studyIds.result.length>1&&e.push(dn.c.StudyOfOrigin),this.props.store.filteredSamples.result&&this.props.store.filteredPatients.result&&this.props.store.filteredSamples.result.length>this.props.store.filteredPatients.result.length&&e.push(dn.c.NumSamplesPerPatient),i.a.forEach(this.props.store.clinicalAttributes_profiledIn.result,function(t){e.push(t.clinicalAttributeId)})),e.reduce(function(e,t){return e.set(t,!0),e},p.observable.shallowMap())}},{key:"molecularProfileIdToHeatmapTracks",get:function(){var e,t=this,n=(this.urlWrapper.query.heatmap_track_groups?this.urlWrapper.query.heatmap_track_groups.split(";").map(function(e){return e.split(",")}):[]).reduce(function(e,t){return e[t[0]]=t.slice(1),e},{}),r={};return e=i.a.isEmpty(this.molecularProfileIdToHeatmapTrackGroupIndex)?2:Math.max.apply(Math,Cn(i.a.values(this.molecularProfileIdToHeatmapTrackGroupIndex)))+1,i.a.forEach(n,function(n,o){var i=t.props.store.molecularProfileIdToMolecularProfile.result[o];if(i&&n&&n.length){i.molecularProfileId in t.molecularProfileIdToHeatmapTrackGroupIndex||(t.molecularProfileIdToHeatmapTrackGroupIndex[i.molecularProfileId]=e,e+=1);var a={trackGroupIndex:t.molecularProfileIdToHeatmapTrackGroupIndex[i.molecularProfileId],molecularProfileId:i.molecularProfileId,molecularAlterationType:i.molecularAlterationType,entities:{}};n.forEach(function(e){return a.entities[e]=!0}),r[o]=a}}),r}},{key:"urlWrapper",get:function(){return this.props.urlWrapper}},{key:"caseListSortPossible",get:function(){return!(!this.props.store.givenSampleOrder.isComplete||!this.props.store.givenSampleOrder.result.length)}},{key:"distinguishDrivers",get:function(){return this.props.store.driverAnnotationSettings.driversAnnotated}},{key:"heatmapIsDynamicallyQueried",get:function(){var e=this.props.store.molecularProfileIdToMolecularProfile.result;return e.hasOwnProperty(this.selectedHeatmapProfileId)&&e[this.selectedHeatmapProfileId].molecularAlterationType!==d.a.GENESET_SCORE}},{key:"clinicalTracksUrlParam",get:function(){return this.selectedClinicalAttributeIds.keys().join(",")}},{key:"selectedHeatmapProfileAlterationType",get:function(){var e=this.props.store.molecularProfileIdToMolecularProfile.result[this.selectedHeatmapProfileId];return e?e.molecularAlterationType:void 0}},{key:"selectedHeatmapProfileGenericAssayType",get:function(){if(this.props.store.molecularProfileIdToMolecularProfile.result&&this.selectedHeatmapProfileAlterationType===d.a.GENERIC_ASSAY)return this.props.store.molecularProfileIdToMolecularProfile.result[this.selectedHeatmapProfileId].genericAssayType}},{key:"oncoprintAnalysisCaseType",get:function(){return"true"===this.urlWrapper.query.show_samples?Pe.b.SAMPLE:Pe.b.PATIENT}},{key:"sortOrder",get:function(){return"alphabetical"===this.sortMode.type?this.oncoprintAnalysisCaseType===Pe.b.SAMPLE?this.alphabeticalSampleOrder:this.alphabeticalPatientOrder:"caseList"===this.sortMode.type?this.oncoprintAnalysisCaseType===Pe.b.SAMPLE&&this.props.store.givenSampleOrder.isComplete?this.props.store.givenSampleOrder.result.map(function(e){return e.uniqueSampleKey}):this.oncoprintAnalysisCaseType===Pe.b.PATIENT&&this.props.store.givenSampleOrder.isComplete?i.a.uniq(this.props.store.givenSampleOrder.result.map(function(e){return e.uniquePatientKey})):void 0:void 0}},{key:"alphabeticalSampleOrder",get:function(){return this.props.store.filteredSamples.isComplete?i.a.sortBy(this.props.store.filteredSamples.result,function(e){return e.sampleId}).map(function(e){return e.uniqueSampleKey}):void 0}},{key:"alphabeticalPatientOrder",get:function(){return this.props.store.filteredPatients.isComplete?i.a.sortBy(this.props.store.filteredPatients.result,function(e){return e.patientId}).map(function(e){return e.uniquePatientKey}):void 0}},{key:"geneticTracks",get:function(){return this.oncoprintAnalysisCaseType===Pe.b.SAMPLE?this.sampleGeneticTracks:this.patientGeneticTracks}},{key:"clinicalTracks",get:function(){return this.oncoprintAnalysisCaseType===Pe.b.SAMPLE?this.sampleClinicalTracks:this.patientClinicalTracks}},{key:"heatmapTracks",get:function(){return this.oncoprintAnalysisCaseType===Pe.b.SAMPLE?this.sampleHeatmapTracks:this.patientHeatmapTracks}},{key:"genericAssayHeatmapTracks",get:function(){return this.oncoprintAnalysisCaseType===Pe.b.SAMPLE?this.samplegGenericAssayHeatmapTracks:this.patientGenericAssayHeatmapTracks}},{key:"genesetHeatmapTrackGroupIndex",get:function(){return this.props.store.genesetIds.length>0?1+Math.max.apply(Math,[ln.b].concat(Cn(this.heatmapTracks.result.map(function(e){return e.trackGroupIndex})),Cn(this.genericAssayHeatmapTracks.result.map(function(e){return e.trackGroupIndex})))):void 0}},{key:"genesetHeatmapTracks",get:function(){return this.oncoprintAnalysisCaseType===Pe.b.SAMPLE?this.sampleGenesetHeatmapTracks:this.patientGenesetHeatmapTracks}},{key:"clusteredHeatmapTrackGroupIndex",get:function(){if("heatmap"===this.sortMode.type){var e=this.sortMode.clusteredHeatmapProfile;if(e===(this.props.store.genesetMolecularProfile.result&&this.props.store.genesetMolecularProfile.result.value&&this.props.store.genesetMolecularProfile.result.value.molecularProfileId))return this.genesetHeatmapTrackGroupIndex;var t=this.molecularProfileIdToHeatmapTracks[e];return t&&t.trackGroupIndex}}},{key:"oncoprintLibrarySortConfig",get:function(){return{sortByMutationType:this.sortByMutationType,sortByDrivers:this.sortByDrivers,order:this.sortOrder,clusterHeatmapTrackGroupIndex:this.clusteredHeatmapTrackGroupIndex}}},{key:"isLoading",get:function(){return"pending"===Object(g.H)(this.clinicalTracks,this.geneticTracks,this.genesetHeatmapTracks,this.genericAssayHeatmapTracks,this.heatmapTracks,this.props.store.molecularProfileIdToMolecularProfile,this.alterationTypesInQuery,this.alteredKeys,this.heatmapTrackHeaders)}},{key:"isHidden",get:function(){return this.isLoading||!this.renderingComplete}},{key:"loadingIndicatorHeight",get:function(){return 300}},{key:"loadingIndicatorMessage",get:function(){return this.isLoading?"Downloading Oncoprint data...":this.renderingComplete?"":"Data downloaded. Rendering Oncoprint.."}},{key:"width",get:function(){return Mt.a.size.width-75}}])&&kn(n.prototype,o),a&&kn(n,a),t}();In([p.computed],Mn.prototype,"columnMode",null),In([p.computed],Mn.prototype,"sortMode",null),In([p.computed],Mn.prototype,"sortByMutationType",null),In([p.computed],Mn.prototype,"sortByDrivers",null),In([p.computed],Mn.prototype,"selectedGenericAssayEntitiesGroupByGenericAssayTypeFromUrl",null),In([p.observable],Mn.prototype,"distinguishGermlineMutations",void 0),In([p.observable],Mn.prototype,"distinguishMutationType",void 0),In([p.observable],Mn.prototype,"showUnalteredColumns",void 0),In([p.observable],Mn.prototype,"showWhitespaceBetweenColumns",void 0),In([p.observable],Mn.prototype,"showClinicalTrackLegends",void 0),In([p.observable],Mn.prototype,"_onlyShowClinicalLegendForAlteredCases",void 0),In([p.observable],Mn.prototype,"showOqlInLabels",void 0),In([p.computed],Mn.prototype,"onlyShowClinicalLegendForAlteredCases",null),In([p.observable],Mn.prototype,"showMinimap",void 0),In([p.observable],Mn.prototype,"selectedHeatmapProfileId",void 0),In([p.observable],Mn.prototype,"heatmapGeneInputValue",void 0),In([p.observable],Mn.prototype,"horzZoom",void 0),In([p.observable],Mn.prototype,"mouseInsideBounds",void 0),In([p.observable],Mn.prototype,"renderingComplete",void 0),In([p.computed],Mn.prototype,"selectedClinicalAttributeIds",null),In([p.computed],Mn.prototype,"molecularProfileIdToHeatmapTracks",null),In([p.observable.ref],Mn.prototype,"oncoprint",void 0),In([p.computed],Mn.prototype,"caseListSortPossible",null),In([p.computed],Mn.prototype,"distinguishDrivers",null),In([p.action],Mn.prototype,"selectHeatmapProfile",null),In([p.action],Mn.prototype,"setAnnotateCBioPortalInputValue",null),In([p.action],Mn.prototype,"setAnnotateCOSMICInputValue",null),In([p.computed],Mn.prototype,"heatmapIsDynamicallyQueried",null),In([p.action],Mn.prototype,"sortByData",null),In([p.computed],Mn.prototype,"clinicalTracksUrlParam",null),In([p.computed],Mn.prototype,"selectedHeatmapProfileAlterationType",null),In([p.computed],Mn.prototype,"selectedHeatmapProfileGenericAssayType",null),In([p.action],Mn.prototype,"onMinimapClose",null),In([p.action],Mn.prototype,"onSuppressRendering",null),In([p.action],Mn.prototype,"onReleaseRendering",null),In([p.action],Mn.prototype,"onChangeSelectedClinicalTracks",null),In([m.default,p.action],Mn.prototype,"clearSortDirectionsAndSortByData",null),In([p.computed],Mn.prototype,"sortOrder",null),In([p.computed],Mn.prototype,"alphabeticalSampleOrder",null),In([p.computed],Mn.prototype,"alphabeticalPatientOrder",null),In([p.computed],Mn.prototype,"geneticTracks",null),In([p.computed],Mn.prototype,"clinicalTracks",null),In([p.computed],Mn.prototype,"heatmapTracks",null),In([p.computed],Mn.prototype,"genericAssayHeatmapTracks",null),In([p.computed],Mn.prototype,"genesetHeatmapTrackGroupIndex",null),In([p.computed],Mn.prototype,"genesetHeatmapTracks",null),In([p.computed],Mn.prototype,"clusteredHeatmapTrackGroupIndex",null),In([p.computed],Mn.prototype,"oncoprintLibrarySortConfig",null),In([m.default,p.action],Mn.prototype,"clusterHeatmapByIndex",null),In([m.default,p.action],Mn.prototype,"removeHeatmapByIndex",null),In([m.default,p.action],Mn.prototype,"removeHeatmapByMolecularProfileId",null),In([p.computed],Mn.prototype,"isLoading",null),In([p.computed],Mn.prototype,"isHidden",null),In([p.computed],Mn.prototype,"loadingIndicatorMessage",null),In([m.default],Mn.prototype,"getControls",null),In([m.default],Mn.prototype,"getProgressItems",null),In([p.computed],Mn.prototype,"width",null);var Dn=Mn=In([c.observer],Mn),Rn=n(1112),Ln=n(22),Gn=n(290),Vn=n(149),Bn=n(31),Fn="rgb(41, 87, 41)",Hn="rgb(180, 4, 4)";function Un(e){return e>0?Fn:Hn}function Wn(e){return[Math.abs(e),e>0?1:0]}var qn=n(128),zn=n(176),Qn=n(35),Kn=n(225),Yn=n(54),Xn=n(49);function Zn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jn(e,t){return!t||"object"!==tr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $n(e){return($n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function er(e,t){return(er=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tr(e){return(tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var nr=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":tr(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},rr=[{name:"Correlated Gene",render:function(e){return r.createElement("span",{style:{fontWeight:"bold"}},e.geneticEntityName)},filter:function(e,t,n){return e.geneticEntityName.indexOf(n)>-1},download:function(e){return e.geneticEntityName},sortBy:function(e){return e.geneticEntityName},width:"30%"},{name:"Cytoband",render:function(e){return r.createElement("span",null,e.cytoband)},filter:Kn.a,download:function(e){return e.cytoband},sortBy:function(e){return e.cytoband},width:"30%"},or("Spearman's Correlation","spearmansCorrelation",!0,!1),Object.assign(or("p-Value","pValue",!1,!1),{tooltip:r.createElement("span",null,"Derived from 2-sided t-test.")}),Object.assign(or("q-Value","qValue",!1,!0),{sortBy:function(e){return[e.qValue,e.pValue]},tooltip:r.createElement("span",null,"Derived from Benjamini-Hochberg FDR correction procedure.")})];function or(e,t,n,o){return{name:e,render:function(e){return r.createElement("span",{style:{color:n?Un(e[t]):"#000000",textAlign:"right",float:"right",whiteSpace:"nowrap"}},o?Object(Xn.b)(e[t]):Object(Yn.b)(e[t],3,.01))},download:function(e){return e[t].toString()+""},sortBy:function(e){return Wn(e[t])},align:"right"}}var ir=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Jn(this,$n(t).apply(this,arguments))).tableModeOptions=[{label:"Show Any Correlation",value:Yr.SHOW_ALL},{label:"Show Only Positively Correlated",value:Yr.SHOW_POSITIVE},{label:"Show Only Negatively Correlated",value:Yr.SHOW_NEGATIVE}],e.paginationProps={itemsPerPageOptions:[25]},e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&er(e,t)}(t,r["Component"]),n=t,(o=[{key:"onRowClick",value:function(e){this.props.dataStore.setHighlighted(e)}},{key:"onSelectTableMode",value:function(e){this.props.onSelectTableMode(e.value)}},{key:"render",value:function(){return r.createElement("div",null,r.createElement("div",{style:{float:"left",display:"flex",flexDirection:"row"}},r.createElement("div",{style:{width:180}},r.createElement(Vn.default,{value:this.props.tableMode,onChange:this.onSelectTableMode,options:this.tableModeOptions,searchable:!1,clearable:!1,className:"coexpression-select-table-mode"})),r.createElement(zn.a,{style:{marginLeft:21,marginTop:"0.7em"},tooltip:r.createElement("div",{style:{maxWidth:200}},qn.e),tooltipPlacement:"left"})),r.createElement(je.b,{initialSortColumn:"q-Value",initialSortDirection:"asc",columns:rr,showColumnVisibility:!1,dataStore:this.props.dataStore,onRowClick:this.onRowClick,filterPlaceholder:"Enter gene or cytoband..",paginationProps:this.paginationProps,initialItemsPerPage:25,copyDownloadProps:{showCopy:!1}}))}}])&&Zn(n.prototype,o),i&&Zn(n,i),t}();nr([Qn.bind],ir.prototype,"onRowClick",null),nr([Qn.bind],ir.prototype,"onSelectTableMode",null);var ar=ir=nr([c.observer],ir);function sr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lr(e,t){return!t||"object"!==pr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ur(e){return(ur=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cr(e,t){return(cr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pr(e){return(pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var dr=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":pr(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},fr=[{name:"Correlated Gene Set",render:function(e){return r.createElement("span",{style:{fontWeight:"bold"}},e.geneticEntityName.length>28?e.geneticEntityName.substring(0,25)+"...":e.geneticEntityName)},filter:function(e,t,n){return e.geneticEntityName.indexOf(n)>-1},download:function(e){return e.geneticEntityName},sortBy:function(e){return e.geneticEntityName},width:"60%"},hr("Spearman's Correlation","spearmansCorrelation",!0,!1),hr("p-Value","pValue",!1,!1),Object.assign(hr("q-Value","qValue",!1,!0),{sortBy:function(e){return[e.qValue,e.pValue]}})];function hr(e,t,n,o){return{name:e,render:function(e){return r.createElement("span",{style:{color:n?Un(e[t]):"#000000",textAlign:"right",float:"right",whiteSpace:"nowrap"}},o?Object(Xn.b)(e[t]):Object(Yn.b)(e[t],3,.01))},download:function(e){return e[t].toString()+""},sortBy:function(e){return Wn(e[t])},align:"right"}}var mr=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=lr(this,ur(t).apply(this,arguments))).tableModeOptions=[{label:"Show Any Correlation",value:Yr.SHOW_ALL},{label:"Show Only Positively Correlated",value:Yr.SHOW_POSITIVE},{label:"Show Only Negatively Correlated",value:Yr.SHOW_NEGATIVE}],e.paginationProps={itemsPerPageOptions:[25]},e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cr(e,t)}(t,r["Component"]),n=t,(o=[{key:"onRowClick",value:function(e){this.props.dataStore.setHighlighted(e)}},{key:"onSelectTableMode",value:function(e){this.props.onSelectTableMode(e.value)}},{key:"render",value:function(){return r.createElement("div",null,r.createElement("div",{style:{float:"left",display:"flex",flexDirection:"row"}},r.createElement("div",{style:{width:180}},r.createElement(Vn.default,{value:this.props.tableMode,onChange:this.onSelectTableMode,options:this.tableModeOptions,searchable:!1,clearable:!1,className:"coexpression-select-table-mode"})),r.createElement(zn.a,{style:{marginLeft:21,marginTop:"0.7em"},tooltip:r.createElement("div",{style:{maxWidth:200}},qn.e),tooltipPlacement:"left"})),r.createElement(je.b,{initialSortColumn:"q-Value",initialSortDirection:"asc",columns:fr,showColumnVisibility:!1,dataStore:this.props.dataStore,onRowClick:this.onRowClick,filterPlaceholder:"Enter gene set..",paginationProps:this.paginationProps,initialItemsPerPage:25,copyDownloadProps:{showCopy:!1}}))}}])&&sr(n.prototype,o),i&&sr(n,i),t}();dr([Qn.bind],mr.prototype,"onRowClick",null),dr([Qn.bind],mr.prototype,"onSelectTableMode",null);var yr=mr=dr([c.observer],mr),gr=n(7),br=(n(1199),n(380));function vr(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _r(e,t,n){return"".concat(n,": ").concat(e.geneticEntityName," ").concat(e.cytoband?"(".concat(e.cytoband,") "):"").concat(t?"(".concat(t.label,") "):"")}function Sr(e){return!e.profiledX&&!e.profiledY}var Er=n(26);function wr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Or(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cr(e,t){return!t||"object"!==xr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kr(e){return(kr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pr(e,t)}function Pr(e,t){return(Pr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xr(e){return(xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ar=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":xr(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},jr=function(e){function t(){return Or(this,t),Cr(this,kr(t).apply(this,arguments))}return Tr(t,br["a"]),t}();function Ir(){}var Nr="coexpression-plot-svg",Mr=function(e){function t(){return Or(this,t),Cr(this,kr(t).apply(this,arguments))}var n,o,a;return Tr(t,r["Component"]),n=t,(o=[{key:"getSvg",value:function(){return document.getElementById(Nr)}},{key:"plot",value:function(){return this.data.length?r.createElement(jr,{svgId:Nr,title:this.title,data:this.data,size:Er.j,chartWidth:this.props.width,chartHeight:this.props.height,stroke:this.stroke,fill:this.fill,strokeWidth:1.2,legendData:this.mutationLegendElements,showRegressionLine:this.props.showRegressionLine,logX:this.axisLogScaleFunction,logY:this.axisLogScaleFunction,useLogSpaceTicks:!0,axisLabelX:this.axisLabelX,axisLabelY:this.axisLabelY,tooltip:this.tooltip,fontFamily:"Arial,Helvetica"}):r.createElement("div",{className:"alert alert-info"},"No data to plot.")}},{key:"toolbar",value:function(){return r.createElement("div",{style:{textAlign:"center",position:"relative"}},r.createElement("div",{style:{display:"inline-block"}},this.props.showMutationControls&&r.createElement("div",{className:"checkbox coexpression-plot-toolbar-elt"},r.createElement("label",null,r.createElement("input",{type:"checkbox",checked:this.props.showMutations,onClick:this.props.handlers.onClickShowMutations||Ir,"data-test":"ShowMutations"}),"Show Mutations")),this.props.showLogScaleControls&&r.createElement("div",{className:"coexpression-plot-toolbar-elt"},r.createElement("div",{className:"checkbox coexpression-plot-toolbar-elt"},r.createElement("label",null,r.createElement("input",{type:"checkbox",checked:this.props.logScale,onClick:this.props.handlers.onClickLogScale||Ir,"data-test":"logScale"}),"Log Scale"))),r.createElement("div",{className:"checkbox coexpression-plot-toolbar-elt"},r.createElement("label",null,r.createElement("input",{type:"checkbox",checked:this.props.showRegressionLine,onClick:this.props.handlers.onClickShowRegressionLine,"data-test":"ShowRegressionLine"}),"Show Regression Line"))),r.createElement(S.e,{getSvg:this.getSvg,getData:this.getDownloadData,buttons:["SVG","PNG","PDF","Data"],filename:"coexpression",dontFade:!0,type:"button",style:{position:"absolute",top:0,right:0}}))}},{key:"getDownloadData",value:function(){return e=this.props.data,t=this.props.xAxisGeneticEntity,n=this.props.yAxisGeneticEntity,r=this.props.molecularProfileX,o=this.props.molecularProfileY,i=!!this.props.showMutations,a=["Sample ID","".concat(t.geneticEntityName," (").concat(r.name,")"),"".concat(n.geneticEntityName," (").concat(o.name,")")],i&&a.push("".concat(t.geneticEntityName," Mutations"),"".concat(n.geneticEntityName," Mutations")),[a].concat(vr(e.map(function(e){var t=[e.sampleId,e.x,e.y];return i&&t.push(e.profiledX?e.mutationsX||"WT":"NS",e.profiledY?e.mutationsY||"WT":"NS"),t}))).map(function(e){return e.join("\t")}).join("\n");var e,t,n,r,o,i,a}},{key:"tooltip",value:function(e){return r.createElement("div",null,r.createElement("div",null,r.createElement("span",null,"Sample ID: "),r.createElement("a",{href:Object(fe.y)(e.studyId,e.sampleId)},e.sampleId)),r.createElement("div",null,r.createElement("span",null,this.props.xAxisGeneticEntity.geneticEntityName,": ",r.createElement("b",null,e.x.toFixed(2)))),r.createElement("div",null,r.createElement("span",null,this.props.yAxisGeneticEntity.geneticEntityName,": ",r.createElement("b",null,e.y.toFixed(2)))),e.mutationsX&&r.createElement("div",null,r.createElement("span",null,this.props.xAxisGeneticEntity.geneticEntityName," ","Mutation: ",r.createElement("b",null,e.mutationsX))),e.mutationsY&&r.createElement("div",null,r.createElement("span",null,this.props.yAxisGeneticEntity.geneticEntityName," ","Mutation: ",r.createElement("b",null,e.mutationsY))))}},{key:"render",value:function(){return r.createElement("div",{className:"borderedChart inlineBlock","data-test":"CoExpressionPlot"},r.createElement(c.Observer,null,this.toolbar),r.createElement(c.Observer,null,this.plot))}},{key:"stroke",get:function(){return this.props.showMutations?function(e){return Sr(e)?"#d3d3d3":e.mutationsX&&e.mutationsY?"#B40404":e.mutationsX||e.mutationsY?e.mutationsX?"#886A08":"#F7819F":"#0174df"}:"#0174df"}},{key:"fill",get:function(){return this.props.showMutations?function(e){return Sr(e)?"#ffffff":e.mutationsX&&e.mutationsY?"#FF0000":e.mutationsX||e.mutationsY?e.mutationsX?"#DBA901":"#F5A9F2":"#58acfa"}:"#58acfa"}},{key:"mutationLegendElements",get:function(){if(!this.props.showMutations)return[];var e=!1,t=!1,n=!1,r=!1,o=!1,i=!0,a=!1,s=void 0;try{for(var l,u=this.data[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value;Sr(c)&&(o=!0),c.mutationsX&&c.mutationsY?e=!0:c.mutationsX||c.mutationsY?c.mutationsX?t=!0:n=!0:r=!0}}catch(e){a=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw s}}var p=[];return t&&p.push({name:[this.props.xAxisGeneticEntity.geneticEntityName,"mutated"],symbol:{fill:"#DBA901",stroke:"#886A08"}}),n&&p.push({name:[this.props.yAxisGeneticEntity.geneticEntityName,"mutated"],symbol:{fill:"#F5A9F2",stroke:"#F7819F"}}),e&&p.push({name:"Both mutated",symbol:{fill:"#FF0000",stroke:"#B40404"}}),r&&p.push({name:"Neither mutated",symbol:{fill:"#58acfa",stroke:"#0174df"}}),o&&p.push({name:"Not profiled for mutations",symbol:{fill:"#ffffff",stroke:"#d3d3d3"}}),p}},{key:"data",get:function(){return i.a.sortBy(this.props.data,function(e){return e.mutationsX&&e.mutationsY?3:e.mutationsX||e.mutationsY?2:Sr(e)?0:1})}},{key:"title",get:function(){return"".concat(this.props.xAxisGeneticEntity.geneticEntityName," vs. ").concat(this.props.yAxisGeneticEntity.geneticEntityName)}},{key:"axisLabelX",get:function(){return _r({geneticEntityName:this.props.xAxisGeneticEntity.geneticEntityName,cytoband:this.props.xAxisGeneticEntity.cytoband},this.axisLogScaleFunction,this.props.molecularProfileX.name)}},{key:"axisLabelY",get:function(){return _r({geneticEntityName:this.props.yAxisGeneticEntity.geneticEntityName},this.axisLogScaleFunction,this.props.molecularProfileY.name)}},{key:"axisLogScaleFunction",get:function(){if(this.props.logScale)return{label:"log2",fLogScale:function(e,t){return Math.log2(Math.max(e,.01))},fInvLogScale:function(e){return Math.pow(2,e)}}}}])&&wr(n.prototype,o),a&&wr(n,a),t}();Ar([Qn.bind],Mr.prototype,"getSvg",null),Ar([p.computed],Mr.prototype,"stroke",null),Ar([p.computed],Mr.prototype,"fill",null),Ar([p.computed],Mr.prototype,"mutationLegendElements",null),Ar([p.computed],Mr.prototype,"data",null),Ar([p.computed],Mr.prototype,"axisLabelX",null),Ar([p.computed],Mr.prototype,"axisLabelY",null),Ar([p.computed],Mr.prototype,"axisLogScaleFunction",null),Ar([Qn.bind],Mr.prototype,"plot",null),Ar([Qn.bind],Mr.prototype,"toolbar",null),Ar([m.default],Mr.prototype,"getDownloadData",null),Ar([Qn.bind],Mr.prototype,"tooltip",null);var Dr=Mr=Ar([c.observer],Mr),Rr=n(117),Lr=" ";function Gr(e){return e.map(function(e){return"".concat(e.proteinChange).concat(Object(_.o)(e)?"":" [germline]")}).filter(function(e){return!!e}).join(", ")}function Vr(e,t,n,r,o){var i=o[t];return!!i&&Object(Rr.a)(e,i.molecularProfileId,n,r)}var Br=n(158);function Fr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ur(e,t,n){return t&&Hr(e.prototype,t),n&&Hr(e,n),e}function Wr(e,t){return!t||"object"!==Kr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qr(e){return(qr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qr(e,t)}function Qr(e,t){return(Qr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Kr(e){return(Kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Yr,Xr=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Kr(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};!function(e){e[e.SHOW_ALL=0]="SHOW_ALL",e[e.SHOW_POSITIVE=1]="SHOW_POSITIVE",e[e.SHOW_NEGATIVE=2]="SHOW_NEGATIVE"}(Yr||(Yr={}));var Zr=function(e){function t(e,n,r){var o;return Fr(this,t),(o=Wr(this,qr(t).call(this,e))).setHighlighted=r,o.tableMode=Yr.SHOW_ALL,o.dataHighlighter=function(e){var t=n();return!(!t||e.geneticEntityId!==t.geneticEntityId)},o.dataSelector=function(e){var t;switch(o.tableMode){case Yr.SHOW_POSITIVE:t=e.spearmansCorrelation>=0;break;case Yr.SHOW_NEGATIVE:t=e.spearmansCorrelation<=0;break;default:t=!0}return t},o.reactionDisposer=Object(p.autorun)(function(){o.sortMetric&&o.sortedFilteredData.length>0&&!n()&&o.setHighlighted(o.sortedFilteredData[0])}),o}return zr(t,qt["a"]),Ur(t,[{key:"destroy",value:function(){this.reactionDisposer()}}]),t}();Xr([p.observable],Zr.prototype,"tableMode",void 0);var Jr=function(e){function t(){var e;return Fr(this,t),(e=Wr(this,qr(t).apply(this,arguments))).allDataRequested=!0,e.coExpressionsWithQValues=Object(S.T)({await:function(){return[e.coExpressionDataPromise]},invoke:function(){var t=e.coExpressionDataPromise.result,n=i.a.sortBy(t,function(e){return e.pValue});return Object(Br.a)(n.map(function(e){return e.pValue})).forEach(function(e,t){n[t].qValue=e}),Promise.resolve(n)}}),e.dataStore=new Zr(function(){return e.props.hidden?e.lastCoExpressionData||[]:e.coExpressionsWithQValues.isComplete?(e.lastCoExpressionData=e.coExpressionsWithQValues.result,e.coExpressionsWithQValues.result):[]},function(){return e.highlightedCoExpression},function(t){e.highlightedCoExpression=t}),e.plotData=Object(S.T)({await:function(){if(e.props.hidden)return[];var t=e.getPlotDataPromises(e.highlightedCoExpression),n=[e.props.coverageInformation,e.props.studyToMutationMolecularProfile,t.molecularX];return t.mutationX&&n.push(t.mutationX),t.molecularY&&n.push(t.molecularY),t.mutationY&&n.push(t.mutationY),n},invoke:function(){if(e.props.hidden)return Promise.resolve([]);if(!e.highlightedCoExpression)return Promise.resolve([]);var t=e.getPlotDataPromises(e.highlightedCoExpression),n=[];t.molecularX&&t.molecularX.isComplete&&(n=n.concat(t.molecularX.result)),t.molecularY&&t.molecularY.isComplete&&(n=n.concat(t.molecularY.result));var r=[];return t.mutationX&&t.mutationX.isComplete&&(r=r.concat(t.mutationX.result)),t.mutationY&&t.mutationY.isComplete&&(r=r.concat(t.mutationY.result)),Promise.resolve(function(e,t,n,r,o,i,a,s){var l={},u={},c={},p={},d={},f=function(e){d[e.uniqueSampleKey]||(d[e.uniqueSampleKey]=e)};if("number"==typeof n){var h=!0,m=!1,y=void 0;try{for(var g,b=t[Symbol.iterator]();!(h=(g=b.next()).done);h=!0){var v=g.value;if(v.proteinChange){var _=v.entrezGeneId===n?c:p;_[v.uniqueSampleKey]=_[v.uniqueSampleKey]||[],_[v.uniqueSampleKey].push(v),f(v)}}}catch(e){m=!0,y=e}finally{try{h||null==b.return||b.return()}finally{if(m)throw y}}}if(e[0]&&void 0!==e[0].entrezGeneId){var S=!0,E=!1,w=void 0;try{for(var O,C=e[Symbol.iterator]();!(S=(O=C.next()).done);S=!0){var k=O.value;(k.entrezGeneId===n?l:u)[k.uniqueSampleKey]=k,f(k)}}catch(e){E=!0,w=e}finally{try{S||null==C.return||C.return()}finally{if(E)throw w}}}else{var T=!0,P=!1,x=void 0;try{for(var A,j=e[Symbol.iterator]();!(T=(A=j.next()).done);T=!0){var I=A.value;(I.genesetId===n.toString()?l:u)[I.uniqueSampleKey]=I,f(I)}}catch(e){P=!0,x=e}finally{try{T||null==j.return||j.return()}finally{if(P)throw x}}}for(var N=[],M=0,D=Object.keys(l);M<D.length;M++){var R=D[M],L=d[R].studyId,G=l[R],V=u[R];if(G&&V){var B=Number(G.value),F=Number(V.value);isNaN(B)||isNaN(F)||N.push({x:B,y:F,mutationsX:Gr(c[R]||[]),mutationsY:Gr(p[R]||[]),profiledX:"number"==typeof n&&Vr(R,L,o,a,s),profiledY:"number"==typeof r&&Vr(R,L,i,a,s),studyId:L,sampleId:d[R].sampleId})}}return N}(n,r,e.props.geneticEntity.geneticEntityId,isNaN(Number(e.highlightedCoExpression.geneticEntityId))?e.highlightedCoExpression.geneticEntityId:Number(e.highlightedCoExpression.geneticEntityId),e.props.geneticEntity.geneticEntityName,e.highlightedCoExpression.geneticEntityName,e.props.coverageInformation.result,e.props.studyToMutationMolecularProfile.result))}}),e}return zr(t,r["Component"]),Ur(t,[{key:"onSelectTableMode",value:function(e){this.dataStore.tableMode=e}},{key:"requestAllData",value:function(){this.allDataRequested=!0}},{key:"getPlotDataPromises",value:function(e){var t={molecularX:this.props.profileX.molecularAlterationType===d.a.GENESET_SCORE?this.props.numericGenesetMolecularDataCache.get({genesetId:this.props.geneticEntity.geneticEntityId.toString(),molecularProfileId:this.props.profileX.molecularProfileId}):this.props.numericGeneMolecularDataCache.get({entrezGeneId:parseInt(String(this.props.geneticEntity.geneticEntityId),10),molecularProfileId:this.props.profileX.molecularProfileId}),mutationX:void 0,molecularY:void 0,mutationY:void 0};return e&&(t.molecularY=this.props.profileY.molecularAlterationType===d.a.GENESET_SCORE?this.props.numericGenesetMolecularDataCache.get({genesetId:e.geneticEntityId,molecularProfileId:this.props.profileY.molecularProfileId}):this.props.numericGeneMolecularDataCache.get({entrezGeneId:parseInt(e.geneticEntityId,10),molecularProfileId:this.props.profileY.molecularProfileId})),this.props.mutationCache&&(t.mutationX=this.props.mutationCache.get({entrezGeneId:parseInt(String(this.props.geneticEntity.geneticEntityId),10)}),e&&(t.mutationY=this.props.mutationCache.get({entrezGeneId:parseInt(e.geneticEntityId,10)}))),t}},{key:"table",value:function(){return this.props.profileY.molecularAlterationType!==d.a.GENESET_SCORE?r.createElement("div",null,r.createElement(ar,{referenceGeneticEntity:this.props.geneticEntity.geneticEntityData,dataStore:this.dataStore,tableMode:this.dataStore.tableMode,onSelectTableMode:this.onSelectTableMode}),this.requestAllDataButton):r.createElement("div",null,r.createElement(yr,{referenceGeneticEntity:this.props.geneticEntity.geneticEntityData,dataStore:this.dataStore,tableMode:this.dataStore.tableMode,onSelectTableMode:this.onSelectTableMode}),this.requestAllDataButton)}},{key:"plot",value:function(){if(this.props.hidden)return r.createElement("span",null);if(this.plotData.isError)return r.createElement("span",null,"Error fetching data. Please refresh the page and try again.");var e;if(this.highlightedCoExpression){e={geneticEntityName:this.highlightedCoExpression.geneticEntityName,geneticEntityType:this.highlightedCoExpression.geneticEntityType,geneticEntityId:this.highlightedCoExpression.geneticEntityId,cytoband:this.highlightedCoExpression.cytoband,geneticEntityData:{geneticEntityId:0,entrezGeneId:0,hugoGeneSymbol:"",type:""}}}return r.createElement("div",{style:{position:"relative"}},r.createElement(me.a,{isLoading:this.dataStore.allData.length>0&&(this.plotData.isPending||!this.highlightedCoExpression),center:!0,size:"big"}),this.plotData.isComplete&&this.highlightedCoExpression&&r.createElement("div",{style:{marginLeft:10}},r.createElement(Dr,{xAxisGeneticEntity:this.props.geneticEntity,yAxisGeneticEntity:e,data:this.plotData.result,showLogScaleControls:this.showLogScaleControls,showMutationControls:this.showMutationControls,showMutations:this.plotShowMutations,showRegressionLine:this.props.plotState.plotShowRegressionLine,logScale:this.plotLogScale,handlers:this.props.plotHandlers,molecularProfileY:this.props.profileY,molecularProfileX:this.props.profileX,height:530,width:530})))}},{key:"componentWillUnmount",value:function(){this.dataStore.destroy()}},{key:"render",value:function(){var e=r.createElement("div",{style:{display:!this.props.hidden&&this.coExpressionsWithQValues.isComplete?"inherit":"none"},"data-test":"CoExpressionGeneTabContent"},r.createElement("div",{className:"clearfix"},this.dataStore.allData.length>0?[r.createElement("div",{style:{width:"40%",float:"left",marginTop:6}},r.createElement(c.Observer,null,this.table)),r.createElement("div",{style:{width:"60%",float:"right",marginTop:6}},r.createElement(c.Observer,null,this.plot))]:r.createElement("div",{style:{position:"absolute",top:200,left:"50%",transform:"translate(-50%, 0)"}},"There is no expression data for"," ",r.createElement("strong",null,this.props.geneticEntity.geneticEntityName)," ","with the selected samples in"," ",r.createElement("strong",null,this.props.profileX.name),".")));return r.createElement("div",{style:{display:this.props.hidden?"none":"inherit",minHeight:826,position:"relative"}},e,r.createElement(me.a,{isLoading:!this.props.hidden&&this.coExpressionsWithQValues.isPending,center:!0,size:"big"}))}},{key:"coExpressionDataPromise",get:function(){return this.props.coExpressionCache.get({geneticEntityId:this.props.geneticEntity.geneticEntityId.toString(),geneticEntityType:this.props.geneticEntity.geneticEntityType,profileX:this.props.profileX,profileY:this.props.profileY,allData:this.allDataRequested})}},{key:"plotShowMutations",get:function(){return this.props.plotState.plotShowMutations&&this.showMutationControls}},{key:"plotLogScale",get:function(){return this.props.plotState.plotLogScale&&this.showLogScaleControls}},{key:"showMutationControls",get:function(){return!!this.props.mutationCache}},{key:"showLogScaleControls",get:function(){var e=this.props.profileX.molecularProfileId.toLowerCase(),t=this.props.profileY.molecularProfileId.toLowerCase();return Object(gr.C)(e)||Object(gr.C)(t)}},{key:"requestAllDataButton",get:function(){return!this.plotData.isComplete||this.dataStore.allData.length||this.allDataRequested?null:r.createElement("div",null,r.createElement("span",{style:{marginRight:5}},(e=this.props.geneticEntity.geneticEntityName,"There are no genes with a Pearson or Spearman correlation with ".concat(e," of").concat(Lr,">").concat(Lr,"0.3").concat(Lr,"or").concat(Lr,"<").concat(Lr,"-0.3."))),r.createElement(At.Button,{onClick:this.requestAllData},"Load data for all genes."));var e}}]),t}();Xr([p.observable.ref],Jr.prototype,"highlightedCoExpression",void 0),Xr([p.observable],Jr.prototype,"allDataRequested",void 0),Xr([Qn.bind,p.action],Jr.prototype,"onSelectTableMode",null),Xr([Qn.bind,p.action],Jr.prototype,"requestAllData",null),Xr([p.computed],Jr.prototype,"plotShowMutations",null),Xr([p.computed],Jr.prototype,"plotLogScale",null),Xr([p.computed],Jr.prototype,"showMutationControls",null),Xr([p.computed],Jr.prototype,"showLogScaleControls",null),Xr([Qn.bind],Jr.prototype,"table",null),Xr([Qn.bind],Jr.prototype,"plot",null);var $r=Jr=Xr([c.observer],Jr),eo=n(104);function to(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function no(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ro(e,t){return!t||"object"!==lo(t)&&"function"!=typeof t?oo(e):t}function oo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function io(e){return(io=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ao(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&so(e,t)}function so(e,t){return(so=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lo(e){return(lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var uo=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":lo(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},co=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},po=function(e){function t(){return no(this,t),ro(this,io(t).apply(this,arguments))}return ao(t,eo["a"]),t}(),fo=function(e){function t(e){var n;return no(this,t),(n=ro(this,io(t).call(this,e))).selectedProfileX=Object(S.T)({await:function(){return[n.xProfileOptions]},invoke:function(){return!n._selectedProfileX&&n.xProfileOptions.result.length>0?Promise.resolve(n.xProfileOptions.result[0].value):Promise.resolve(n._selectedProfileX)}}),n.selectedProfileY=Object(S.T)({await:function(){return[n.yProfileOptions]},invoke:function(){return!n._selectedProfileY&&n.yProfileOptions.result.length>0?Promise.resolve(n.yProfileOptions.result[0].value):Promise.resolve(n._selectedProfileY)}}),n.selectedGeneticEntity=Object(S.T)({await:function(){return[n.props.store.geneticEntities]},invoke:function(){return n._selectedGeneticEntity?Promise.resolve(n._selectedGeneticEntity):Promise.resolve(n.props.store.geneticEntities.result[0])}}),n.isSelectedGeneticEntityAGeneSet=Object(S.T)({await:function(){return[n.props.store.geneticEntities]},invoke:function(){if(n._selectedGeneticEntity){var e=!0,t=!1,r=void 0;try{for(var o,i=n.props.store.geneticEntities.result[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var a=o.value;if(a.geneticEntityType===d.d.GENESET&&a.geneticEntityId===n._selectedGeneticEntity.geneticEntityId)return Promise.resolve(!0)}}catch(e){t=!0,r=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}}return Promise.resolve(!1)}}),n.plotState={plotLogScale:!1,plotShowMutations:!0,plotShowRegressionLine:!1},n.xProfileOptions=Object(S.T)({await:function(){return[n.props.store.coexpressionTabMolecularProfiles,n.isSelectedGeneticEntityAGeneSet,n.props.store.molecularProfileIdToProfiledFilteredSamples]},invoke:function(){var e=[];return e=n.isSelectedGeneticEntityAGeneSet.result?Object(qn.b)(n.props.store.coexpressionTabMolecularProfiles.result):Object(qn.a)(n.props.store.coexpressionTabMolecularProfiles.result),Promise.resolve(Object(qn.c)(e,n.props.store.molecularProfileIdToProfiledFilteredSamples.result))}}),n.yProfileOptions=Object(S.T)({await:function(){return[n.props.store.coexpressionTabMolecularProfiles,n.props.store.molecularProfileIdToProfiledFilteredSamples]},invoke:function(){return Promise.resolve(Object(qn.c)(n.props.store.coexpressionTabMolecularProfiles.result,n.props.store.molecularProfileIdToProfiledFilteredSamples.result))}}),n.coExpressionCache=new po(function(e){return{await:function(){return[n.props.store.entrezGeneIdToReferenceGene,n.props.store.molecularProfileIdToProfiledFilteredSamples]},invoke:function(){return co(oo(n),void 0,void 0,regeneratorRuntime.mark(function t(){var n,r,o,a,s,l,u,c,p,f,h;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=.3,e.allData&&(n=0),r=this.props.store.molecularProfileIdToProfiledFilteredSamples.result[e.profileX.molecularProfileId],o=this.props.store.molecularProfileIdToProfiledFilteredSamples.result[e.profileY.molecularProfileId],a={},e.profileX.molecularProfileId===e.profileY.molecularProfileId?a=this.props.store.studyToDataQueryFilter.result[e.profileX.studyId]:(s=i.a.intersectionWith(r,o,function(e,t){return e.uniqueSampleKey===t.uniqueSampleKey}),a.sampleIds=s.map(function(e){return e.sampleId})),!i.a.isEmpty(a.sampleIds)||!i.a.isEmpty(a.sampleListId)){t.next=8;break}return t.abrupt("return",Promise.resolve([]));case 8:if(null==(l=this.createDataQueryFilterForCoExpression(a,e.geneticEntityId,e.geneticEntityType))){t.next=25;break}return void 0,t.next=13,Bn.a.fetchCoExpressionsUsingPOST({molecularProfileIdA:e.profileX.molecularProfileId,molecularProfileIdB:e.profileY.molecularProfileId,coExpressionFilter:l,threshold:n,$domain:void 0});case 13:if(u=t.sent,c={},e.profileY.molecularAlterationType!==d.a.GENESET_SCORE){t.next=21;break}return p=i.a.chain(u).map(function(e){return e.geneticEntityId}).uniq().value(),t.next=19,Bn.a.fetchGenesetsUsingPOST({genesetIds:p});case 19:f=t.sent,c=i.a.keyBy(f,function(e){return e.genesetId});case 21:return h=this.props.store.entrezGeneIdToReferenceGene.result||{},t.abrupt("return",Promise.resolve(i.a.reduce(u,function(t,n){var r=void 0,o="-";return e.profileY.molecularAlterationType===d.a.GENESET_SCORE?r=c[n.geneticEntityId].name:void 0!==h[n.geneticEntityId]&&(r=h[n.geneticEntityId].hugoGeneSymbol,o=h[n.geneticEntityId].cytoband),void 0!==r&&t.push(Object.assign(Object.assign({},n),{geneticEntityName:r,cytoband:o})),t},[])));case 25:return t.abrupt("return",Promise.resolve([]));case 26:case"end":return t.stop()}},t,this)}))}}},function(e){return"".concat(e.geneticEntityId,",").concat(e.profileX.molecularProfileId,",").concat(e.profileY.molecularProfileId)}),window.resultsViewCoExpressionTab=oo(n),n.plotHandlers={onClickLogScale:Object(p.action)(function(){n.plotState.plotLogScale=!n.plotState.plotLogScale}),onClickShowMutations:Object(p.action)(function(){n.plotState.plotShowMutations=!n.plotState.plotShowMutations}),onClickShowRegressionLine:Object(p.action)(function(){n.plotState.plotShowRegressionLine=!n.plotState.plotShowRegressionLine})},n}var n,o,a;return ao(t,r["Component"]),n=t,(o=[{key:"onSelectProfileX",value:function(e){this._selectedProfileX=e.value}},{key:"onSelectProfileY",value:function(e){this._selectedProfileY=e.value}},{key:"onSelectGeneticEntity",value:function(e){if(!this.props.store.geneticEntities.isComplete)throw new Error("Invalid Genetic Entity");var t=!0,n=!1,r=void 0;try{for(var o,i=this.props.store.geneticEntities.result[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;a.geneticEntityId.toString()===e&&(this._selectedGeneticEntity=a)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}},{key:"createDataQueryFilterForCoExpression",value:function(e,t,n){var r=void 0;return n===d.d.GENE?r=Object.assign(Object.assign({},e),{entrezGeneId:parseFloat(t)}):n===d.d.GENESET&&(r=Object.assign(Object.assign({},e),{genesetId:t})),r}},{key:"header",value:function(){return r.createElement("div",{style:{marginBottom:20}},this.profilesSelector)}},{key:"geneTabs",value:function(){if(this.selectedGeneticEntity.isComplete&&this.selectedProfileX.isComplete&&this.selectedProfileY.isComplete&&this.props.store.geneticEntities.isComplete&&this.props.store.coexpressionTabMolecularProfiles.isComplete){var e=[],t=!0,n=!1,o=void 0;try{for(var i,a=this.props.store.geneticEntities.result[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value,l=!0,u=!1,p=void 0;try{for(var f,m=(s.geneticEntityType===d.d.GENE?Object(qn.a)(this.props.store.coexpressionTabMolecularProfiles.result):Object(qn.b)(this.props.store.coexpressionTabMolecularProfiles.result))[Symbol.iterator]();!(l=(f=m.next()).done);l=!0){var y=f.value,g=!0,b=!1,v=void 0;try{for(var _,S=this.props.store.coexpressionTabMolecularProfiles.result[Symbol.iterator]();!(g=(_=S.next()).done);g=!0){var E=_.value;e.push(r.createElement($r,{key:"".concat(s.geneticEntityId,",").concat(y.molecularProfileId,",").concat(E.molecularProfileId),coExpressionCache:this.coExpressionCache,geneticEntity:s,profileX:y,profileY:E,numericGeneMolecularDataCache:this.props.store.numericGeneMolecularDataCache,numericGenesetMolecularDataCache:this.props.store.numericGenesetMolecularDataCache,mutationCache:this.hasMutationData?this.props.store.mutationCache:void 0,hidden:y.molecularProfileId!==this.selectedProfileX.result||E.molecularProfileId!==this.selectedProfileY.result||s.geneticEntityId!==this.selectedGeneticEntity.result.geneticEntityId,plotState:this.plotState,plotHandlers:this.plotHandlers,coverageInformation:this.props.store.coverageInformation,studyToMutationMolecularProfile:this.props.store.studyToMutationMolecularProfile}))}}catch(e){b=!0,v=e}finally{try{g||null==S.return||S.return()}finally{if(b)throw v}}}}catch(e){u=!0,p=e}finally{try{l||null==m.return||m.return()}finally{if(u)throw p}}}}catch(e){n=!0,o=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw o}}return r.createElement("div",null,r.createElement(h.b,{id:"coexpressionTabGeneTabs",activeTabId:this.selectedGeneticEntity.result.geneticEntityId.toString(),onTabClick:this.onSelectGeneticEntity,className:"coexpressionTabGeneTabs pillTabs",unmountOnHide:!0,tabButtonStyle:"pills",arrowStyle:{"line-height":.8}},this.props.store.geneticEntities.result.map(function(e,t){return r.createElement(h.a,{key:t,id:e.geneticEntityId.toString(),linkText:e.geneticEntityName})})),r.createElement(c.Observer,null,this.header),e)}return r.createElement(me.a,{isLoading:!0,center:!0,size:"big"})}},{key:"render",value:function(){var e=null;e=this.props.store.coexpressionTabMolecularProfiles.isComplete&&this.props.store.coexpressionTabMolecularProfiles.result.length>0?r.createElement("div",null,r.createElement(c.Observer,null,this.geneTabs)):r.createElement("div",{className:"alert alert-info"},"There are no available profiles in the queried studies.");var t=Object(g.H)(this.props.store.genes,this.props.store.molecularProfileIdToProfiledFilteredSamples,this.props.store.coexpressionTabMolecularProfiles);return r.createElement("div",{"data-test":"coExpressionTabDiv"},r.createElement("div",{className:"tabMessageContainer"},r.createElement(pe.a,{className:"coexp-oql-status-banner",store:this.props.store,tabReflectsOql:!1}),r.createElement(de.a,{store:this.props.store,isUnaffected:!0}),r.createElement(he.a,{store:this.props.store})),"complete"===t&&e,r.createElement(me.a,{center:!0,size:"big",isLoading:"pending"===t}))}},{key:"hasMutationData",get:function(){return!!i.a.find(this.props.store.molecularProfilesWithData.result,function(e){return e.molecularAlterationType===d.a.MUTATION_EXTENDED})}},{key:"profilesSelector",get:function(){return this.selectedGeneticEntity.isComplete&&this.selectedProfileX.isComplete&&this.selectedProfileY.isComplete&&this.xProfileOptions.isComplete&&this.yProfileOptions.isComplete&&this.props.store.coexpressionTabMolecularProfiles.isComplete&&this.isSelectedGeneticEntityAGeneSet.isComplete?r.createElement("div",null,r.createElement("div",{style:{float:"left",width:"100%",display:"flex",alignItems:"center"}},r.createElement("span",null,"Find"," ",Object(qn.b)(this.props.store.coexpressionTabMolecularProfiles.result).length>0?"genes/genesets":"genes"," ","in"," "),r.createElement("div",{style:{display:"inline-block",width:376,marginLeft:4,marginRight:4,zIndex:10}},r.createElement(Vn.default,{name:"query-profile-select",value:this.selectedProfileY.result,onChange:this.onSelectProfileY,options:this.yProfileOptions.result,searchable:!1,clearable:!1,className:"coexpression-select-query-profile"})),r.createElement("span",null," ","that are correlated with"," ",this.selectedGeneticEntity.result.geneticEntityName," ","in"," "),r.createElement("div",{style:{display:"inline-block",width:376,marginLeft:4,marginRight:4,zIndex:15}},r.createElement(Vn.default,{name:"subject-profile-select",value:this.selectedProfileX.result,onChange:this.onSelectProfileX,options:this.xProfileOptions.result,searchable:!1,clearable:!1,disabled:this.isSelectedGeneticEntityAGeneSet.result,className:"coexpression-select-subject-profile"})))):r.createElement(me.a,{isLoading:!0,center:!0,size:"big"})}}])&&to(n.prototype,o),a&&to(n,a),t}();uo([p.observable],fo.prototype,"_selectedProfileX",void 0),uo([p.observable],fo.prototype,"_selectedProfileY",void 0),uo([p.observable],fo.prototype,"_selectedGeneticEntity",void 0),uo([p.observable],fo.prototype,"plotState",void 0),uo([Qn.bind],fo.prototype,"onSelectProfileX",null),uo([Qn.bind],fo.prototype,"onSelectProfileY",null),uo([Qn.bind],fo.prototype,"onSelectGeneticEntity",null),uo([p.computed],fo.prototype,"hasMutationData",null),uo([Qn.bind],fo.prototype,"header",null),uo([Qn.bind],fo.prototype,"geneTabs",null);var ho=fo=uo([c.observer],fo),mo=n(291),yo=n.n(mo),go=n(924),bo=n(97),vo=n(918),_o=n(903),So=n(234);function Eo(e,t){window&&(window[e]=t)}var wo=n(905),Oo=n(84),Co=n(110),ko=n(1059),To=n(1093),Po=n(1064),xo=n(1067),Ao=n(1068),jo=n(1069),Io=n(112),No=n(174),Mo=n(171),Do=n(143);function Ro(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lo(e,t){return!t||"object"!==Bo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Go(e){return(Go=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vo(e,t){return(Vo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Bo(e){return(Bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Fo=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Bo(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Ho=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},Uo=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=Lo(this,Go(t).call(this,e,r))).urlWrapper=n,o.resultsViewStore=r,o._currentTabId=void 0,o._originalGroups=Object(S.T)({await:function(){return[o.resultsViewStore.comparisonTabGroups]},invoke:function(){var e=o.resultsViewStore.comparisonTabGroups.result;if(o.groupOrder){var t=Object(S.X)(o.groupOrder);return Promise.resolve(i.a.sortBy(e,function(e){return Object(cn.a)(t[e.name],Number.POSITIVE_INFINITY)}))}return Promise.resolve(e)}}),o.nameToUserCreatedGroup=Object(S.T)({await:function(){return[o._session]},invoke:function(){return Promise.resolve(i.a.keyBy(o._session.result.groups,function(e){return e.name}))}}),o}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vo(e,t)}(t,No["b"]),n=t,(r=[{key:"updateOverlapStrategy",value:function(e){this.urlWrapper.updateURL({comparison_overlapStrategy:e})}},{key:"setUsePatientLevelEnrichments",value:function(e){this.resultsViewStore.setUsePatientLevelEnrichments(e)}},{key:"isGroupDeletable",value:function(e){return!!this.nameToUserCreatedGroup.isComplete&&e.name in this.nameToUserCreatedGroup.result}},{key:"updateSelectedGroups",value:function(e){this.urlWrapper.updateURL({comparison_selectedGroups:JSON.stringify(e)})}},{key:"isGroupSelected",value:function(e){return this.selectedGroups.includes(e)}},{key:"toggleGroupSelected",value:function(e){var t=this.selectedGroups.slice();t.includes(e)?t.splice(t.indexOf(e),1):t.push(e),this.updateSelectedGroups(t)}},{key:"selectAllGroups",value:function(){var e=this._originalGroups.result;this.updateSelectedGroups(e.map(function(e){return e.name}))}},{key:"deselectAllGroups",value:function(){this.updateSelectedGroups([])}},{key:"updateGroupOrder",value:function(e,t){var n=this.groupOrder;n||(n=this._originalGroups.result.map(function(e){return e.name}));var r=(n=n.slice()).splice(e,1)[0];n.splice(t,0,r),this.urlWrapper.updateURL({comparison_groupOrder:JSON.stringify(n)})}},{key:"saveAndGoToSession",value:function(e){return Ho(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Do.a.addComparisonSession(e);case 2:n=t.sent,r=n.id,this.urlWrapper.updateURL({comparison_createdGroupsSessionId:r});case 5:case"end":return t.stop()}},t,this)}))}},{key:"overlapStrategy",get:function(){return this.urlWrapper.query.comparison_overlapStrategy||No.a.EXCLUDE}},{key:"usePatientLevelEnrichments",get:function(){return this.resultsViewStore.usePatientLevelEnrichments}},{key:"_session",get:function(){return this.resultsViewStore.comparisonTabComparisonSession}},{key:"selectedGroups",get:function(){var e=this.urlWrapper.query.comparison_selectedGroups;return e?JSON.parse(e):[Mo.b,Mo.d]}},{key:"groupOrder",get:function(){var e=this.urlWrapper.query.comparison_groupOrder;return e?JSON.parse(e):void 0}},{key:"samples",get:function(){return this.resultsViewStore.samples}},{key:"studies",get:function(){return this.resultsViewStore.studies}}])&&Ro(n.prototype,r),o&&Ro(n,o),t}();Fo([p.observable],Uo.prototype,"_currentTabId",void 0),Fo([p.action],Uo.prototype,"updateOverlapStrategy",null),Fo([p.computed],Uo.prototype,"overlapStrategy",null),Fo([p.computed],Uo.prototype,"usePatientLevelEnrichments",null),Fo([m.default,p.action],Uo.prototype,"setUsePatientLevelEnrichments",null),Fo([p.computed],Uo.prototype,"_session",null),Fo([m.default],Uo.prototype,"isGroupDeletable",null),Fo([p.computed],Uo.prototype,"selectedGroups",null),Fo([p.action],Uo.prototype,"updateSelectedGroups",null),Fo([m.default],Uo.prototype,"isGroupSelected",null),Fo([m.default,p.action],Uo.prototype,"toggleGroupSelected",null),Fo([m.default,p.action],Uo.prototype,"selectAllGroups",null),Fo([m.default,p.action],Uo.prototype,"deselectAllGroups",null),Fo([p.computed],Uo.prototype,"groupOrder",null),Fo([p.action],Uo.prototype,"updateGroupOrder",null),Fo([p.action],Uo.prototype,"saveAndGoToSession",null);var Wo=n(43),qo=n(1092),zo=n(801),Qo=n.n(zo),Ko=n(1091),Yo=n(1071),Xo=n(1094);function Zo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jo(e){return(Jo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ei(e,t){return(ei=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ti(e){return(ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ni=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ti(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ri=function(e){function t(e){var n,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,a=Jo(t).call(this,e),(n=!a||"object"!==ti(a)&&"function"!=typeof a?$o(o):a).overlapStrategySelector=Object(Co.a)({await:function(){return[n.store.overlapComputations]},render:function(){if(n.store.overlapComputations.result.totalSampleOverlap||n.store.overlapComputations.result.totalPatientOverlap){var e="Include overlapping samples and patients",t="Exclude overlapping samples and patients";return r.createElement("div",{style:{minWidth:355,width:355,zIndex:20}},r.createElement(Io.default,{name:"select overlap strategy",onChange:function(e){e&&n.onOverlapStrategySelect(e)},options:[{label:e,value:No.a.INCLUDE},{label:t,value:No.a.EXCLUDE}],clearable:!1,searchable:!1,value:{label:n.store.overlapStrategy===No.a.EXCLUDE?t:e,value:n.store.overlapStrategy}}))}return null}}),n.tabs=Object(Co.a)({await:function(){return[n.store._activeGroupsNotOverlapRemoved,n.store.activeGroups,n.store.mutationEnrichmentProfiles,n.store.copyNumberEnrichmentProfiles,n.store.mRNAEnrichmentProfiles,n.store.proteinEnrichmentProfiles,n.store.methylationEnrichmentProfiles,n.store.survivalClinicalDataExists,n.store.genericAssayEnrichmentProfilesGroupByGenericAssayType]},render:function(){return r.createElement(h.b,{unmountOnHide:!1,activeTabId:n.props.urlWrapper.comparisonSubTabId,onTabClick:n.props.urlWrapper.setComparisonSubTabId,className:"secondaryNavigation comparisonTabSubTabs"},r.createElement(h.a,{id:jt.a.OVERLAP,linkText:"Overlap"},r.createElement(ko.a,{store:n.store})),n.store.showSurvivalTab&&r.createElement(h.a,{id:Wo.a.SURVIVAL,linkText:"Survival",anchorClassName:n.store.survivalTabUnavailable?"greyedOut":""},r.createElement(qo.a,{store:n.store})),r.createElement(h.a,{id:jt.a.CLINICAL,linkText:"Clinical",anchorClassName:n.store.clinicalTabUnavailable?"greyedOut":""},r.createElement(To.a,{store:n.store})),n.store.showMutationsTab&&r.createElement(h.a,{id:jt.a.MUTATIONS,linkText:"Mutations",anchorClassName:n.store.mutationsTabUnavailable?"greyedOut":""},r.createElement(Po.a,{store:n.store,resultsViewStore:n.props.store})),n.store.showCopyNumberTab&&r.createElement(h.a,{id:jt.a.CNA,linkText:"Copy-number",anchorClassName:n.store.copyNumberUnavailable?"greyedOut":""},r.createElement(xo.a,{store:n.store,resultsViewStore:n.props.store})),n.store.showMRNATab&&r.createElement(h.a,{id:jt.a.MRNA,linkText:"mRNA",anchorClassName:n.store.mRNATabUnavailable?"greyedOut":""},r.createElement(Ao.a,{store:n.store,resultsViewMode:!0})),n.store.showProteinTab&&r.createElement(h.a,{id:jt.a.PROTEIN,linkText:"Protein",anchorClassName:n.store.proteinTabUnavailable?"greyedOut":""},r.createElement(jo.a,{store:n.store,resultsViewMode:!0})),n.store.showMethylationTab&&r.createElement(h.a,{id:jt.a.DNAMETHYLATION,linkText:"DNA Methylation",anchorClassName:n.store.methylationTabUnavailable?"greyedOut":""},r.createElement(Yo.a,{store:n.store,resultsViewMode:!0})),n.store.showGenericAssayTab&&i.a.keys(n.store.genericAssayEnrichmentProfilesGroupByGenericAssayType.result).map(function(e){return r.createElement(h.a,{id:"".concat(jt.a.GENERIC_ASSAY_PREFIX,"_").concat(e.toLowerCase()),linkText:Object(gr.n)(e),anchorClassName:n.store.genericAssayTabUnavailable?"greyedOut":""},r.createElement(Xo.a,{store:n.store,genericAssayType:e,resultsViewMode:!0}))}))},renderPending:function(){return r.createElement(me.a,{center:!0,isLoading:!0,size:"big"})},renderError:function(){return r.createElement(gt.a,null)}}),window.comparisonTab=$o(n),n.store=new Uo(n.props.appStore,n.props.urlWrapper,n.props.store),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ei(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentWillUnmount",value:function(){this.store&&this.store.destroy()}},{key:"onOverlapStrategySelect",value:function(e){Object(bo.f)({category:"resultsView",action:"setComparisonTabOverlapStrategy",label:e.value}),this.store.updateOverlapStrategy(e.value)}},{key:"render",value:function(){return this.store?r.createElement("div",{"data-test":"ComparisonTabDiv"},r.createElement(me.a,{center:!0,isLoading:this.store.newSessionPending,size:"big"}),r.createElement("div",{className:"tabMessageContainer",style:{marginBottom:10}},r.createElement(pe.a,{className:"comparison-oql-status-banner",store:this.props.store,tabReflectsOql:!0}),r.createElement(de.a,{store:this.props.store}),r.createElement(he.a,{store:this.props.store})),r.createElement("div",{style:{display:"flex",justifyContent:"space-between",paddingBottom:25}},r.createElement("div",{className:Qo.a.headerControls},r.createElement(Ko.a,{store:this.store,groupCollapseThreshold:40,isGroupDeletable:this.store.isGroupDeletable})),r.createElement("div",null,this.overlapStrategySelector.component)),this.tabs.component):null}}])&&Zo(n.prototype,o),a&&Zo(n,a),t}();ni([p.observable.ref],ri.prototype,"store",void 0),ni([m.default,p.action],ri.prototype,"onOverlapStrategySelect",null);var oi=ri=ni([c.observer],ri),ii=n(803),ai=n(220),si=n.n(ai),li=n(301);function ui(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ci(e,t){return!t||"object"!==fi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pi(e){return(pi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function di(e,t){return(di=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fi(e){return(fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var hi=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":fi(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};function mi(e,t){var n=new d.e(e,t);return Eo("resultsViewPageStore",n),Object(p.reaction)(function(){return[n.studyIds,n.oqlText]},function(){n.studyIds.isComplete&&n.oqlText&&Object(bo.h)(n.studyIds.result,n.oqlText,n.hugoGeneSymbols,n.queriedVirtualStudies.result.length>0)}),n}function yi(e){s()("#oncoprint-result-tab").click(e)}var gi=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ci(this,pi(t).call(this,e))).quickOQLQueryStore=null,n.showTabs=!0,n.userMessages=Object(S.T)({await:function(){return[n.resultsViewPageStore.expressionProfiles,n.resultsViewPageStore.studies]},invoke:function(){return n.resultsViewPageStore.expressionProfiles.result.length>0&&n.resultsViewPageStore.studies.result.length>1?Promise.resolve([{dateEnd:1e19,content:r.createElement("span",null,"Looking for the ",r.createElement("strong",null,"Expression")," tab?"," ","That functionality is now available"," ",r.createElement("a",{style:{color:"white",textDecoration:"underline"},onClick:function(){return n.urlWrapper.updateURL({},"results/".concat(jt.b.EXPRESSION_REDIRECT))}},"in the ",r.createElement("strong",null,"Plots")," tab.")),id:"2020_merge_expression_to_plots"}]):Promise.resolve([])}}),n.urlWrapper=new So.b(e.routing),Object(Oo.d)(n.urlWrapper),Object(Oo.f)(n.urlWrapper),Eo("urlWrapper",n.urlWrapper),n.urlWrapper.hasSessionId?Object(yt.a)(n.urlWrapper.remoteSessionData,function(){n.resultsViewPageStore=mi(e.appStore,n.urlWrapper)}):n.resultsViewPageStore=mi(e.appStore,n.urlWrapper),n}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&di(e,t)}(t,r["Component"]),n=t,(i=[{key:"handleTabChange",value:function(e,t){this.urlWrapper.updateURL({},"results/".concat(e),!1,t)}},{key:"customTabCallback",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(go.a)(e,t,Object(S.C)().location.href,this.resultsViewPageStore,n)}},{key:"componentWillUnmount",value:function(){this.resultsViewPageStore.destroy(),this.urlWrapper.destroy()}},{key:"evaluateTabInclusion",value:function(e){var t=ce.b.serverConfig.disabled_tabs||"",n=Object(jt.e)(t).includes(e.id),r=this.resultsViewPageStore.tabId===e.id,o=!!e.hide&&e.hide();return r||!n&&!o}},{key:"handleQuickOQLSubmission",value:function(){this.quickOQLQueryStore.submit(),this.showOQLEditor=!1}},{key:"toggleOQLEditor",value:function(){this.showOQLEditor=!this.showOQLEditor}},{key:"getTabHref",value:function(e){return u.a.format({pathname:e,query:this.props.routing.location.query,hash:this.props.routing.location.hash})}},{key:"render",value:function(){var e=this;return this.urlWrapper.isPendingSession||this.urlWrapper.isLoadingSession||!this.resultsViewPageStore.studies.isComplete?r.createElement(me.a,{isLoading:!0,center:!0,size:"big"}):this.resultsViewPageStore.studies.isComplete&&!this.resultsViewPageStore.tabId?(setTimeout(function(){e.handleTabChange(e.resultsViewPageStore.tabId,!0)}),null):r.createElement(Gn.a,{noMargin:!0,hideFooter:!0,className:"subhead-dark"},this.pageContent)}},{key:"tabs",get:function(){var e=this,t=this.resultsViewPageStore,n=[{id:jt.b.ONCOPRINT,getTab:function(){return r.createElement(h.a,{key:0,id:jt.b.ONCOPRINT,linkText:"OncoPrint"},r.createElement(Dn,{divId:"oncoprintDiv",store:t,urlWrapper:t.urlWrapper,key:t.hugoGeneSymbols.join(","),addOnBecomeVisibleListener:yi}))}},{id:jt.b.CANCER_TYPES_SUMMARY,getTab:function(){return r.createElement(h.a,{key:1,id:jt.b.CANCER_TYPES_SUMMARY,linkText:"Cancer Types Summary"},r.createElement(f.b,{store:t}))}},{id:jt.b.MUTUAL_EXCLUSIVITY,getTab:function(){return r.createElement(h.a,{key:5,id:jt.b.MUTUAL_EXCLUSIVITY,linkText:"Mutual Exclusivity"},r.createElement(Ce.a,{store:t,isSampleAlteredMap:t.isSampleAlteredMap}))},hide:function(){return!e.resultsViewPageStore.isSampleAlteredMap.isComplete||o.size(e.resultsViewPageStore.isSampleAlteredMap.result)<2}},{id:jt.b.PLOTS,getTab:function(){return r.createElement(h.a,{key:12,id:jt.b.PLOTS,linkText:"Plots"},r.createElement(Ln.g,{store:t,urlWrapper:e.urlWrapper}))}},{id:jt.b.MUTATIONS,getTab:function(){return r.createElement(h.a,{key:3,id:jt.b.MUTATIONS,linkText:"Mutations"},r.createElement(Oe,{store:t,appStore:e.props.appStore,urlWrapper:e.urlWrapper}))}},{id:jt.b.COEXPRESSION,hide:function(){if(e.resultsViewPageStore.isThereDataForCoExpressionTab.isComplete&&e.resultsViewPageStore.studies.isComplete){var t=e.resultsViewPageStore.studies.result.length>1,n=!e.resultsViewPageStore.isThereDataForCoExpressionTab.result;return t||n}return!0},getTab:function(){return r.createElement(h.a,{key:7,id:jt.b.COEXPRESSION,linkText:"Co-expression"},r.createElement(ho,{store:t}))}},{id:jt.b.COMPARISON,hide:function(){return e.resultsViewPageStore.survivalClinicalDataExists.isPending},getTab:function(){var t=e.resultsViewPageStore.survivalClinicalDataExists.result?"Comparison/Survival":"Comparison";return r.createElement(h.a,{key:10,id:jt.b.COMPARISON,linkText:t},r.createElement(oi,{urlWrapper:e.urlWrapper,appStore:e.props.appStore,store:e.resultsViewPageStore}))}},{id:jt.b.CN_SEGMENTS,hide:function(){return!(e.resultsViewPageStore.studies.isComplete&&e.resultsViewPageStore.genes.isComplete&&e.resultsViewPageStore.referenceGenes.isComplete&&Object(Pe.f)(e.resultsViewPageStore.samples.result))},getTab:function(){return r.createElement(h.a,{key:6,id:jt.b.CN_SEGMENTS,linkText:"CN Segments"},r.createElement(Wt,{store:t}))}},{id:jt.b.NETWORK,hide:function(){return!0},getTab:function(){return r.createElement(h.a,{key:9,id:jt.b.NETWORK,linkText:"Network"},r.createElement("div",{className:"alert alert-info"},"The Network tab has been retired. For similar functionality, please visit"," ",r.createElement("a",{href:"http://www.pathwaycommons.org/pcviz/",target:"_blank"},"http://www.pathwaycommons.org/pcviz/")))}},{id:jt.b.PATHWAY_MAPPER,hide:function(){return"Internet Explorer"===si.a.name||!ce.b.serverConfig.show_pathway_mapper||!e.resultsViewPageStore.studies.isComplete},getTab:function(){var n=t.filteredSequencedSampleKeysByGene.isComplete&&t.oqlFilteredCaseAggregatedDataByOQLLine.isComplete&&t.genes.isComplete&&t.samples.isComplete&&t.patients.isComplete&&t.coverageInformation.isComplete&&t.filteredSequencedSampleKeysByGene.isComplete&&t.filteredSequencedPatientKeysByGene.isComplete&&t.selectedMolecularProfiles.isComplete&&t.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine.isComplete;return r.createElement(h.a,{key:13,id:jt.b.PATHWAY_MAPPER,linkText:"Pathways"},n?r.createElement(xi,{store:t,appStore:e.props.appStore,urlWrapper:e.urlWrapper}):r.createElement(me.a,{isLoading:!0,size:"big",center:!0}))}},{id:jt.b.DOWNLOAD,getTab:function(){return r.createElement(h.a,{key:11,id:jt.b.DOWNLOAD,linkText:"Download"},r.createElement(xt,{store:t}))}}].filter(this.evaluateTabInclusion).map(function(e){return e.getTab()});if(ce.b.serverConfig.custom_tabs){var i=ce.b.serverConfig.custom_tabs.filter(function(e){return"RESULTS_PAGE"===e.location}).map(function(t,n){return r.createElement(h.a,{key:100+n,id:"customTab"+n,unmountOnHide:!0===t.unmountOnHide,onTabDidMount:function(n){e.customTabCallback(n,t)},onTabUnmount:function(n){e.customTabCallback(n,t,!0)},linkText:t.title})});n=n.concat(i)}return n}},{key:"quickOQLSubmitButton",get:function(){if(this.quickOQLQueryStore)return r.createElement(r.Fragment,null,r.createElement("button",{className:"btn btn-primary btn-sm","data-test":"oqlQuickEditSubmitButton",style:{marginLeft:10},onClick:this.handleQuickOQLSubmission,disabled:!this.quickOQLQueryStore.submitEnabled},"Submit Query")," ",r.createElement("button",{className:"btn btn-link btn-sm",onClick:this.toggleOQLEditor},"Cancel"))}},{key:"showOQLEditor",get:function(){return!!this.quickOQLQueryStore},set:function(e){this.quickOQLQueryStore=e?Object(wo.a)(this.urlWrapper.query,this.urlWrapper,!1):null}},{key:"pageContent",get:function(){var e=this;return this.resultsViewPageStore.invalidStudyIds.result.length>0?r.createElement("div",null,r.createElement("div",{className:"headBlock"}),r.createElement(vo.a,{forkedMode:!1,showQuickSearchTab:!1,showDownloadTab:!1,showAlerts:!0,getQueryStore:function(){return Object(wo.a)(e.urlWrapper.query,e.urlWrapper)}})):r.createElement(r.Fragment,null,this.resultsViewPageStore.isQueryInvalid&&r.createElement("div",{className:"alert alert-danger queryInvalid",style:{marginBottom:"40px"},role:"alert"},r.createElement(_o.a,{sampleCount:this.resultsViewPageStore.samples.result.length,queryProductLimit:ce.b.serverConfig.query_product_limit,email:ce.b.serverConfig.skin_email_contact})),this.userMessages.isComplete&&this.userMessages.result.length>0&&r.createElement(li.a,{messages:this.userMessages.result}),this.resultsViewPageStore.studies.isPending&&r.createElement(me.a,{isLoading:!0,center:!0,size:"big"}),this.resultsViewPageStore.studies.isComplete&&r.createElement(r.Fragment,null,r.createElement(yo.a,null,r.createElement("title",null,Object(Pe.c)(this.resultsViewPageStore.hugoGeneSymbols,this.resultsViewPageStore.studies.result))),r.createElement("div",null,r.createElement("div",{className:"headBlock"},r.createElement(Rn.a,{routingStore:this.props.routing,store:this.resultsViewPageStore,onToggleQueryFormVisibility:function(t){Object(p.runInAction)(function(){e.showTabs=t,e.showOQLEditor=!1})},onToggleOQLEditUIVisibility:this.toggleOQLEditor}),this.showOQLEditor&&r.createElement("div",{className:"quick_oql_edit"},r.createElement(ii.b,{validateInputGeneQuery:!0,inputGeneQuery:this.quickOQLQueryStore.geneQuery,callback:function(){e.quickOQLQueryStore.geneQuery=arguments.length<=2?void 0:arguments[2]},location:ii.a.DEFAULT,submitButton:this.quickOQLSubmitButton,error:this.quickOQLQueryStore.submitError,messages:this.quickOQLQueryStore.oqlMessages}))),this.showTabs&&!this.resultsViewPageStore.genesInvalid&&!this.resultsViewPageStore.isQueryInvalid&&r.createElement(h.b,{key:this.urlWrapper.hash,activeTabId:this.resultsViewPageStore.tabId,unmountOnHide:!1,onTabClick:function(t){return e.handleTabChange(t)},className:"mainTabs",getTabHref:this.getTabHref},this.tabs))))}}])&&ui(n.prototype,i),a&&ui(n,a),t}();hi([p.observable.ref],gi.prototype,"quickOQLQueryStore",void 0),hi([p.observable],gi.prototype,"showTabs",void 0),hi([m.default],gi.prototype,"customTabCallback",null),hi([p.computed],gi.prototype,"tabs",null),hi([m.default],gi.prototype,"evaluateTabInclusion",null),hi([p.computed],gi.prototype,"quickOQLSubmitButton",null),hi([p.computed],gi.prototype,"showOQLEditor",null),hi([m.default,p.action],gi.prototype,"handleQuickOQLSubmission",null),hi([m.default,p.action],gi.prototype,"toggleOQLEditor",null),hi([m.default],gi.prototype,"getTabHref",null),hi([p.computed],gi.prototype,"pageContent",null);gi=hi([Object(c.inject)("appStore","routing"),c.observer],gi),n(1202),n(1203);var bi=n(1204),vi=n.n(bi);function _i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Si(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ei(e){return(Ei=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oi(e,t){return(Oi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ci(e){return(Ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ki=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Ci(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Ti=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},Pi=function(e){function t(e){var r,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,i=Ei(t).call(this,e),(r=!i||"object"!==Ci(i)&&"function"!=typeof i?wi(o):i).selectedPathway="",r.validNonQueryGenes=Object(S.T)({invoke:function(){return Ti(wi(r),void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(on.r)(this.newGenesFromPathway);case 2:return t=e.sent,e.abrupt("return",t.map(function(e){return e.hugoGeneSymbol}));case 4:case"end":return e.stop()}},e,this)}))},onResult:function(e){if(e.length>0){var t=Object(sn.toast)("Loading alteration data...",{autoClose:!1,draggable:!1,position:"bottom-left",className:vi.a.toast});r.activeToasts.push(t)}}}),r.PathwayMapperComponent=void 0,r.activeToasts=[],r.accumulatedValidGenes={},r.accumulatedAlterationFrequencyDataForNonQueryGenes=[],r.toastReaction=Object(p.reaction)(function(){return[e.store.tabId]},function(e){_i(e,1)[0]!==jt.b.PATHWAY_MAPPER&&(r.activeToasts.length=0,sn.toast.dismiss())},{fireImmediately:!0}),Promise.all([n.e(8),n.e(10)]).then(n.t.bind(null,1424,7)).then(function(e){r.PathwayMapperComponent=e.default}),r}var o,a,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oi(e,t)}(t,r["Component"]),o=t,(a=[{key:"render",value:function(){return this.isNewStoreReady&&(this.addGenomicData(this.alterationFrequencyData),this.dismissActiveToasts()),this.PathwayMapperComponent?r.createElement("div",{className:"pathwayMapper"},r.createElement("div",{className:"tabMessageContainer"},r.createElement(pe.a,{className:"plots-oql-status-banner",store:this.props.store,tabReflectsOql:!0}),r.createElement(de.a,{store:this.props.store}),r.createElement(he.a,{store:this.props.store})),r.createElement("div",{"data-test":"pathwayMapperTabDiv",className:"cBioMode",style:{width:"99%"}},r.createElement(At.Row,null,r.createElement(r.Fragment,null,r.createElement(pe.a,{className:"coexp-oql-status-banner",store:this.props.store,tabReflectsOql:!0}),r.createElement(this.PathwayMapperComponent,{isCBioPortal:!0,isCollaborative:!1,genes:this.props.store.genes.result,cBioAlterationData:this.alterationFrequencyData,onAddGenes:this.handleAddGenes,changePathwayHandler:this.handlePathwayChange,addGenomicDataHandler:this.addGenomicDataHandler,tableComponent:this.renderTable,validGenes:this.validGenes,toast:sn.toast}),r.createElement(sn.ToastContainer,{closeButton:r.createElement("i",{className:"fa fa-times"})}))))):null}},{key:"componentWillUnmount",value:function(){this.toastReaction()}},{key:"addGenomicDataHandler",value:function(e){this.addGenomicData=e}},{key:"handlePathwayChange",value:function(e){this.newGenesFromPathway=e}},{key:"handleAddGenes",value:function(e){Object(jt.c)(this.props.urlWrapper,e)}},{key:"dismissActiveToasts",value:function(){var e=this;setTimeout(function(){e.activeToasts.forEach(function(e){sn.toast.dismiss(e)})},2e3)}},{key:"renderTable",value:function(e,t,n){return r.createElement(rn,{data:e,selectedPathway:t,changePathway:n})}},{key:"alterationFrequencyData",get:function(){return this.alterationFrequencyDataForQueryGenes.concat(this.alterationFrequencyDataForNonQueryGenes)}},{key:"alterationFrequencyDataForQueryGenes",get:function(){var e=this,t=[];return this.props.store.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine.result.forEach(function(n){var r=Object(an.b)(e.props.store.samples.result,e.props.store.patients.result,e.props.store.coverageInformation.result,e.props.store.filteredSequencedSampleKeysByGene.result,e.props.store.filteredSequencedPatientKeysByGene.result,e.props.store.selectedMolecularProfiles.result,n,!0,e.props.store.genes.result);r&&t.push(r)}),t}},{key:"alterationFrequencyDataForNonQueryGenes",get:function(){var e=this,t=[];return this.isNewStoreReady&&this.storeForAllData.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine.result.forEach(function(n){var r=Object(an.b)(e.storeForAllData.samples.result,e.storeForAllData.patients.result,e.storeForAllData.coverageInformation.result,e.storeForAllData.filteredSequencedSampleKeysByGene.result,e.storeForAllData.filteredSequencedPatientKeysByGene.result,e.storeForAllData.selectedMolecularProfiles.result,n,!1,e.props.store.genes.result);r&&t.push(r)}),this.accumulatedAlterationFrequencyDataForNonQueryGenes=this.accumulatedAlterationFrequencyDataForNonQueryGenes.concat(t),this.accumulatedAlterationFrequencyDataForNonQueryGenes}},{key:"isNewStoreReady",get:function(){return this.storeForAllData&&this.storeForAllData.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine.isComplete&&this.storeForAllData.samples.isComplete&&this.storeForAllData.patients.isComplete&&this.storeForAllData.coverageInformation.isComplete&&this.storeForAllData.filteredSequencedSampleKeysByGene.isComplete&&this.storeForAllData.filteredSequencedPatientKeysByGene.isComplete&&this.storeForAllData.selectedMolecularProfiles.isComplete}},{key:"storeForAllData",get:function(){return!this.urlWrapperForAllGenes||this.urlWrapperForAllGenes.hasSessionId&&this.urlWrapperForAllGenes.remoteSessionData.isPending?void 0:mi(this.props.appStore,this.urlWrapperForAllGenes)}},{key:"urlWrapperForAllGenes",get:function(){var e;if(this.validNonQueryGenes.isComplete&&this.validNonQueryGenes.result.length>0){var t=i.a.cloneDeep(this.props.urlWrapper.query);t.gene_list=this.validNonQueryGenes.result.join(" "),e={query:t}}return e}},{key:"validGenes",get:function(){var e=this;return this.validNonQueryGenes.isComplete&&this.validNonQueryGenes.result.forEach(function(t){e.accumulatedValidGenes[t]=!0}),this.accumulatedValidGenes}}])&&Si(o.prototype,a),s&&Si(o,s),t}();ki([p.observable],Pi.prototype,"selectedPathway",void 0),ki([p.observable],Pi.prototype,"newGenesFromPathway",void 0),ki([p.observable],Pi.prototype,"activeToasts",void 0),ki([p.observable],Pi.prototype,"addGenomicData",void 0),ki([p.observable.ref],Pi.prototype,"PathwayMapperComponent",void 0),ki([p.computed],Pi.prototype,"alterationFrequencyData",null),ki([p.computed],Pi.prototype,"alterationFrequencyDataForQueryGenes",null),ki([p.computed],Pi.prototype,"alterationFrequencyDataForNonQueryGenes",null),ki([p.computed],Pi.prototype,"isNewStoreReady",null),ki([p.computed],Pi.prototype,"storeForAllData",null),ki([p.computed],Pi.prototype,"urlWrapperForAllGenes",null),ki([p.computed],Pi.prototype,"validGenes",null),ki([m.default,p.action],Pi.prototype,"addGenomicDataHandler",null),ki([m.default,p.action],Pi.prototype,"handlePathwayChange",null),ki([m.default,p.action],Pi.prototype,"handleAddGenes",null),ki([m.default],Pi.prototype,"dismissActiveToasts",null),ki([m.default],Pi.prototype,"renderTable",null);var xi=Pi=ki([c.observer],Pi);function Ai(e){return(Ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ji(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ii(e,t){return!t||"object"!==Di(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ni(e){return(Ni=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mi(e,t){return(Mi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Di(e){return(Di="function"==typeof Symbol&&"symbol"===Ai(Symbol.iterator)?function(e){return Ai(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Ai(e)})(e)}n.d(t,"initStore",function(){return Li});var Ri=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Di(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};function Li(e,t){var n=new d.e(e,t);return Eo("resultsViewPageStore",n),Object(p.reaction)(function(){return[n.studyIds,n.oqlText]},function(){n.studyIds.isComplete&&n.oqlText&&Object(bo.h)(n.studyIds.result,n.oqlText,n.hugoGeneSymbols,n.queriedVirtualStudies.result.length>0)}),n}function Gi(e){s()("#oncoprint-result-tab").click(e)}var Vi=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ii(this,Ni(t).call(this,e))).quickOQLQueryStore=null,n.showTabs=!0,n.userMessages=Object(S.T)({await:function(){return[n.resultsViewPageStore.expressionProfiles,n.resultsViewPageStore.studies]},invoke:function(){return n.resultsViewPageStore.expressionProfiles.result.length>0&&n.resultsViewPageStore.studies.result.length>1?Promise.resolve([{dateEnd:1e19,content:r.createElement("span",null,"Looking for the ",r.createElement("strong",null,"Expression")," tab?"," ","That functionality is now available"," ",r.createElement("a",{style:{color:"white",textDecoration:"underline"},onClick:function(){return n.urlWrapper.updateURL({},"results/".concat(jt.b.EXPRESSION_REDIRECT))}},"in the ",r.createElement("strong",null,"Plots")," tab.")),id:"2020_merge_expression_to_plots"}]):Promise.resolve([])}}),n.urlWrapper=new So.b(e.routing),Object(Oo.d)(n.urlWrapper),Object(Oo.f)(n.urlWrapper),Eo("urlWrapper",n.urlWrapper),n.urlWrapper.hasSessionId?Object(yt.a)(n.urlWrapper.remoteSessionData,function(){n.resultsViewPageStore=Li(e.appStore,n.urlWrapper)}):n.resultsViewPageStore=Li(e.appStore,n.urlWrapper),n}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mi(e,t)}(t,r["Component"]),n=t,(i=[{key:"handleTabChange",value:function(e,t){this.urlWrapper.updateURL({},"results/".concat(e),!1,t)}},{key:"customTabCallback",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(go.a)(e,t,Object(S.C)().location.href,this.resultsViewPageStore,n)}},{key:"componentWillUnmount",value:function(){this.resultsViewPageStore.destroy(),this.urlWrapper.destroy()}},{key:"evaluateTabInclusion",value:function(e){var t=ce.b.serverConfig.disabled_tabs||"",n=Object(jt.e)(t).includes(e.id),r=this.resultsViewPageStore.tabId===e.id,o=!!e.hide&&e.hide();return r||!n&&!o}},{key:"handleQuickOQLSubmission",value:function(){this.quickOQLQueryStore.submit(),this.showOQLEditor=!1}},{key:"toggleOQLEditor",value:function(){this.showOQLEditor=!this.showOQLEditor}},{key:"getTabHref",value:function(e){return u.a.format({pathname:e,query:this.props.routing.location.query,hash:this.props.routing.location.hash})}},{key:"render",value:function(){var e=this;return this.urlWrapper.isPendingSession||this.urlWrapper.isLoadingSession||!this.resultsViewPageStore.studies.isComplete?r.createElement(me.a,{isLoading:!0,center:!0,size:"big"}):this.resultsViewPageStore.studies.isComplete&&!this.resultsViewPageStore.tabId?(setTimeout(function(){e.handleTabChange(e.resultsViewPageStore.tabId,!0)}),null):r.createElement(Gn.a,{noMargin:!0,hideFooter:!0,className:"subhead-dark"},this.pageContent)}},{key:"tabs",get:function(){var e=this,t=this.resultsViewPageStore,n=[{id:jt.b.ONCOPRINT,getTab:function(){return r.createElement(h.a,{key:0,id:jt.b.ONCOPRINT,linkText:"OncoPrint"},r.createElement(Dn,{divId:"oncoprintDiv",store:t,urlWrapper:t.urlWrapper,key:t.hugoGeneSymbols.join(","),addOnBecomeVisibleListener:Gi}))}},{id:jt.b.CANCER_TYPES_SUMMARY,getTab:function(){return r.createElement(h.a,{key:1,id:jt.b.CANCER_TYPES_SUMMARY,linkText:"Cancer Types Summary"},r.createElement(f.b,{store:t}))}},{id:jt.b.MUTUAL_EXCLUSIVITY,getTab:function(){return r.createElement(h.a,{key:5,id:jt.b.MUTUAL_EXCLUSIVITY,linkText:"Mutual Exclusivity"},r.createElement(Ce.a,{store:t,isSampleAlteredMap:t.isSampleAlteredMap}))},hide:function(){return!e.resultsViewPageStore.isSampleAlteredMap.isComplete||o.size(e.resultsViewPageStore.isSampleAlteredMap.result)<2}},{id:jt.b.PLOTS,getTab:function(){return r.createElement(h.a,{key:12,id:jt.b.PLOTS,linkText:"Plots"},r.createElement(Ln.g,{store:t,urlWrapper:e.urlWrapper}))}},{id:jt.b.MUTATIONS,getTab:function(){return r.createElement(h.a,{key:3,id:jt.b.MUTATIONS,linkText:"Mutations"},r.createElement(Oe,{store:t,appStore:e.props.appStore,urlWrapper:e.urlWrapper}))}},{id:jt.b.COEXPRESSION,hide:function(){if(e.resultsViewPageStore.isThereDataForCoExpressionTab.isComplete&&e.resultsViewPageStore.studies.isComplete){var t=e.resultsViewPageStore.studies.result.length>1,n=!e.resultsViewPageStore.isThereDataForCoExpressionTab.result;return t||n}return!0},getTab:function(){return r.createElement(h.a,{key:7,id:jt.b.COEXPRESSION,linkText:"Co-expression"},r.createElement(ho,{store:t}))}},{id:jt.b.COMPARISON,hide:function(){return e.resultsViewPageStore.survivalClinicalDataExists.isPending},getTab:function(){var t=e.resultsViewPageStore.survivalClinicalDataExists.result?"Comparison/Survival":"Comparison";return r.createElement(h.a,{key:10,id:jt.b.COMPARISON,linkText:t},r.createElement(oi,{urlWrapper:e.urlWrapper,appStore:e.props.appStore,store:e.resultsViewPageStore}))}},{id:jt.b.CN_SEGMENTS,hide:function(){return!(e.resultsViewPageStore.studies.isComplete&&e.resultsViewPageStore.genes.isComplete&&e.resultsViewPageStore.referenceGenes.isComplete&&Object(Pe.f)(e.resultsViewPageStore.samples.result))},getTab:function(){return r.createElement(h.a,{key:6,id:jt.b.CN_SEGMENTS,linkText:"CN Segments"},r.createElement(Wt,{store:t}))}},{id:jt.b.NETWORK,hide:function(){return!0},getTab:function(){return r.createElement(h.a,{key:9,id:jt.b.NETWORK,linkText:"Network"},r.createElement("div",{className:"alert alert-info"},"The Network tab has been retired. For similar functionality, please visit"," ",r.createElement("a",{href:"http://www.pathwaycommons.org/pcviz/",target:"_blank"},"http://www.pathwaycommons.org/pcviz/")))}},{id:jt.b.PATHWAY_MAPPER,hide:function(){return"Internet Explorer"===si.a.name||!ce.b.serverConfig.show_pathway_mapper||!e.resultsViewPageStore.studies.isComplete},getTab:function(){var n=t.filteredSequencedSampleKeysByGene.isComplete&&t.oqlFilteredCaseAggregatedDataByOQLLine.isComplete&&t.genes.isComplete&&t.samples.isComplete&&t.patients.isComplete&&t.coverageInformation.isComplete&&t.filteredSequencedSampleKeysByGene.isComplete&&t.filteredSequencedPatientKeysByGene.isComplete&&t.selectedMolecularProfiles.isComplete&&t.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine.isComplete;return r.createElement(h.a,{key:13,id:jt.b.PATHWAY_MAPPER,linkText:"Pathways"},n?r.createElement(xi,{store:t,appStore:e.props.appStore,urlWrapper:e.urlWrapper}):r.createElement(me.a,{isLoading:!0,size:"big",center:!0}))}},{id:jt.b.DOWNLOAD,getTab:function(){return r.createElement(h.a,{key:11,id:jt.b.DOWNLOAD,linkText:"Download"},r.createElement(xt,{store:t}))}}].filter(this.evaluateTabInclusion).map(function(e){return e.getTab()});if(ce.b.serverConfig.custom_tabs){var i=ce.b.serverConfig.custom_tabs.filter(function(e){return"RESULTS_PAGE"===e.location}).map(function(t,n){return r.createElement(h.a,{key:100+n,id:"customTab"+n,unmountOnHide:!0===t.unmountOnHide,onTabDidMount:function(n){e.customTabCallback(n,t)},onTabUnmount:function(n){e.customTabCallback(n,t,!0)},linkText:t.title})});n=n.concat(i)}return n}},{key:"quickOQLSubmitButton",get:function(){if(this.quickOQLQueryStore)return r.createElement(r.Fragment,null,r.createElement("button",{className:"btn btn-primary btn-sm","data-test":"oqlQuickEditSubmitButton",style:{marginLeft:10},onClick:this.handleQuickOQLSubmission,disabled:!this.quickOQLQueryStore.submitEnabled},"Submit Query")," ",r.createElement("button",{className:"btn btn-link btn-sm",onClick:this.toggleOQLEditor},"Cancel"))}},{key:"showOQLEditor",get:function(){return!!this.quickOQLQueryStore},set:function(e){this.quickOQLQueryStore=e?Object(wo.a)(this.urlWrapper.query,this.urlWrapper,!1):null}},{key:"pageContent",get:function(){var e=this;return this.resultsViewPageStore.invalidStudyIds.result.length>0?r.createElement("div",null,r.createElement("div",{className:"headBlock"}),r.createElement(vo.a,{forkedMode:!1,showQuickSearchTab:!1,showDownloadTab:!1,showAlerts:!0,getQueryStore:function(){return Object(wo.a)(e.urlWrapper.query,e.urlWrapper)}})):r.createElement(r.Fragment,null,this.resultsViewPageStore.isQueryInvalid&&r.createElement("div",{className:"alert alert-danger queryInvalid",style:{marginBottom:"40px"},role:"alert"},r.createElement(_o.a,{sampleCount:this.resultsViewPageStore.samples.result.length,queryProductLimit:ce.b.serverConfig.query_product_limit,email:ce.b.serverConfig.skin_email_contact})),this.userMessages.isComplete&&this.userMessages.result.length>0&&r.createElement(li.a,{messages:this.userMessages.result}),this.resultsViewPageStore.studies.isPending&&r.createElement(me.a,{isLoading:!0,center:!0,size:"big"}),this.resultsViewPageStore.studies.isComplete&&r.createElement(r.Fragment,null,r.createElement(yo.a,null,r.createElement("title",null,Object(Pe.c)(this.resultsViewPageStore.hugoGeneSymbols,this.resultsViewPageStore.studies.result))),r.createElement("div",null,r.createElement("div",{className:"headBlock"},r.createElement(Rn.a,{routingStore:this.props.routing,store:this.resultsViewPageStore,onToggleQueryFormVisibility:function(t){Object(p.runInAction)(function(){e.showTabs=t,e.showOQLEditor=!1})},onToggleOQLEditUIVisibility:this.toggleOQLEditor}),this.showOQLEditor&&r.createElement("div",{className:"quick_oql_edit"},r.createElement(ii.b,{validateInputGeneQuery:!0,inputGeneQuery:this.quickOQLQueryStore.geneQuery,callback:function(){e.quickOQLQueryStore.geneQuery=arguments.length<=2?void 0:arguments[2]},location:ii.a.DEFAULT,submitButton:this.quickOQLSubmitButton,error:this.quickOQLQueryStore.submitError,messages:this.quickOQLQueryStore.oqlMessages}))),this.showTabs&&!this.resultsViewPageStore.genesInvalid&&!this.resultsViewPageStore.isQueryInvalid&&r.createElement(h.b,{key:this.urlWrapper.hash,activeTabId:this.resultsViewPageStore.tabId,unmountOnHide:!1,onTabClick:function(t){return e.handleTabChange(t)},className:"mainTabs",getTabHref:this.getTabHref},this.tabs))))}}])&&ji(n.prototype,i),a&&ji(n,a),t}();Ri([p.observable.ref],Vi.prototype,"quickOQLQueryStore",void 0),Ri([p.observable],Vi.prototype,"showTabs",void 0),Ri([m.default],Vi.prototype,"customTabCallback",null),Ri([p.computed],Vi.prototype,"tabs",null),Ri([m.default],Vi.prototype,"evaluateTabInclusion",null),Ri([p.computed],Vi.prototype,"quickOQLSubmitButton",null),Ri([p.computed],Vi.prototype,"showOQLEditor",null),Ri([m.default,p.action],Vi.prototype,"handleQuickOQLSubmission",null),Ri([m.default,p.action],Vi.prototype,"toggleOQLEditor",null),Ri([m.default],Vi.prototype,"getTabHref",null),Ri([p.computed],Vi.prototype,"pageContent",null),Vi=Ri([Object(c.inject)("appStore","routing"),c.observer],Vi);t.default=Vi},,,,,,function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__1P_Zv",framedImage:"styles-module__framedImage__1iqVk",QueryAndDownloadTabs:"styles-module__QueryAndDownloadTabs__ivykJ",QueryContainer:"styles-module__QueryContainer__2cy7B",forkedButtons:"styles-module__forkedButtons__2ctM7",errorMessage:"styles-module__errorMessage__32yZg",oqlMessage:"styles-module__oqlMessage__3xhe8",CancerStudySelector:"styles-module__CancerStudySelector__1FU50",MolecularProfileSelector:"styles-module__MolecularProfileSelector__rlomm",DataTypePrioritySelector:"styles-module__DataTypePrioritySelector__1_VUf",CaseSetSelector:"styles-module__CaseSetSelector__YteFo",StudySelection:"styles-module__StudySelection__3booh",GeneSetSelector:"styles-module__GeneSetSelector__2DY1b",icon:"styles-module__icon__1E8Oh",geneCount:"styles-module__geneCount__3cB9u",SelectedStudiesWindow:"styles-module__SelectedStudiesWindow__NAG6X",CancerStudySelectorHeader:"styles-module__CancerStudySelectorHeader__D2N40",selectAll:"styles-module__selectAll__sQO_b",noData:"styles-module__noData__3J5xx",selectedCount:"styles-module__selectedCount__TRoaE",selectionsExist:"styles-module__selectionsExist__1icpM",cancerStudySelectorBody:"styles-module__cancerStudySelectorBody__2BfDm",cancerTypeListContainer:"styles-module__cancerTypeListContainer__rnSbV",cancerStudyListContainer:"styles-module__cancerStudyListContainer__356jB",cancerTypeList:"styles-module__cancerTypeList__ouFgb",cancerTypeListItemLabel:"styles-module__cancerTypeListItemLabel__31N8Y",cancerTypeListItemCount:"styles-module__cancerTypeListItemCount__1HB2c",selectable:"styles-module__selectable__3NCiW",selected:"styles-module__selected__Zy9_9",matchingNodeText:"styles-module__matchingNodeText__3lV9e",nonMatchingNodeText:"styles-module__nonMatchingNodeText__1l5PU",containsSelectedStudies:"styles-module__containsSelectedStudies__20v-B",searchTextInput:"styles-module__searchTextInput__1VIxV",group:"styles-module__group__Cs8DR",zScore:"styles-module__zScore__23rtN",infoIcon:"styles-module__infoIcon__zMiog",profileName:"styles-module__profileName__1fbIy",DataTypePriorityLabel:"styles-module__DataTypePriorityLabel__21k9z",radioRow:"styles-module__radioRow__1G_fF",buttonRow:"styles-module__buttonRow__51RtG",geneSet:"styles-module__geneSet__Ra6KD",notEmpty:"styles-module__notEmpty__23mDp",GeneSymbolValidator:"styles-module__GeneSymbolValidator__ZK8rf",pendingMessage:"styles-module__pendingMessage__2jgIM",oqlNotice:"styles-module__oqlNotice__1tycm",validBubble:"styles-module__validBubble__QCGq3",invalidBubble:"styles-module__invalidBubble__1gB6Z",suggestionBubble:"styles-module__suggestionBubble__aRL1R",noChoiceLabel:"styles-module__noChoiceLabel__2GF5_",singleChoiceLabel:"styles-module__singleChoiceLabel__2wdqL",multiChoiceLabel:"styles-module__multiChoiceLabel__19sFa",MutSigGeneSelectorWindow:"styles-module__MutSigGeneSelectorWindow__1Uiku",MutSigGeneSelector:"styles-module__MutSigGeneSelector__25hKH",selectionColumnHeader:"styles-module__selectionColumnHeader__2MSUO",selectionColumnCell:"styles-module__selectionColumnCell__3RJ8f",selectButton:"styles-module__selectButton__2dXHK",GisticGeneSelectorWindow:"styles-module__GisticGeneSelectorWindow__1J2UG",GisticGeneSelector:"styles-module__GisticGeneSelector__U5Lb9",header:"styles-module__header__3cqyY",amp:"styles-module__amp__1zeIe",del:"styles-module__del__1_otl",gisticTable:"styles-module__gisticTable__2fquv",GisticGeneToggles:"styles-module__GisticGeneToggles__1aR6k",someGenes:"styles-module__someGenes__J-RhD",moreGenes:"styles-module__moreGenes__2gVF_",geneToggle:"styles-module__geneToggle__EGiaB",simulateHovered:"styles-module__simulateHovered__3IL_G",notSelected:"styles-module__notSelected__3-Rmx",showMoreLess:"styles-module__showMoreLess__3Ef4J",GenesetsSelectorWindow:"styles-module__GenesetsSelectorWindow__NTbph",GenesetsFormGroup:"styles-module__GenesetsFormGroup__1uJYh",GenesetsVolcanoSelectorWindow:"styles-module__GenesetsVolcanoSelectorWindow__w4nHP",GenesetsSelectionArea:"styles-module__GenesetsSelectionArea__3ebp-",transposeDataMatrix:"styles-module__transposeDataMatrix__YP_NR",submitRow:"styles-module__submitRow__k2sC8",genomeSpace:"styles-module__genomeSpace__2augo",tooltip:"styles-module__tooltip__ux3KI",learnOql:"styles-module__learnOql__1Aj5I",quickSelect:"styles-module__quickSelect__3ZhaC",studyName:"styles-module__studyName__2iQkr"}},function(e,t,n){"use strict";var r=n(1),o=n(13),i=n(2);function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l="tissue",u="My Virtual Studies",c="Studies",p=function(){function e(t){var n,o,i,s=this,p=t.cancerTypes,d=void 0===p?[]:p,f=t.studies,h=void 0===f?[]:f,m=t.priorityStudies,y=void 0===m?{}:m,g=t.virtualStudies,b=void 0===g?[]:g,v=t.maxTreeDepth,_=void 0===v?0:v;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootCancerType={clinicalTrialKeywords:"",dedicatedColor:"",name:"All",parent:"",shortName:"All",cancerTypeId:l},this.virtualStudyCategory={clinicalTrialKeywords:"",dedicatedColor:"",name:u,parent:l,shortName:u,cancerTypeId:u,alwaysVisible:!0},this.physicalStudyCategory={clinicalTrialKeywords:"",dedicatedColor:"",name:c,parent:l,shortName:c,cancerTypeId:c,alwaysVisible:!0},this.priorityCategories=[],this.map_node_meta=new Map,this.map_cancerTypeId_cancerType=new Map,this.map_studyId_cancerStudy=new Map,d=e.sortNodes(d);var S=b.map(function(e){if(e.data)return{allSampleCount:r.sumBy(e.data.studies,function(e){return e.samples.length}),studyId:e.id,name:e.data.name,description:e.data.description,cancerTypeId:u}}).filter(function(e){return e});for(var E in y)this.priorityCategories.push({clinicalTrialKeywords:"",dedicatedColor:"",name:E,parent:l,shortName:E,cancerTypeId:E});0===_&&b.length>0&&(h=r.map(h,function(e){return e.cancerTypeId=s.physicalStudyCategory.cancerTypeId,e}));for(var w=0,O=[d=[this.virtualStudyCategory,this.physicalStudyCategory].concat(a(this.priorityCategories),[this.rootCancerType],a(d)),h=e.sortNodes([].concat(a(S),a(h)))];w<O.length;w++){n=O[w];var C=!0,k=!1,T=void 0;try{for(var P,x=n[Symbol.iterator]();!(C=(P=x.next()).done);C=!0){o=P.value;var A=n==d;A?this.map_cancerTypeId_cancerType.set(o.cancerTypeId,o):this.map_studyId_cancerStudy.set(o.studyId,o);var j=A?o.name:[o.name,o.description].join("\n");this.map_node_meta.set(o,{isCancerType:A,isPriorityCategory:!1,priorityCategories:[],childCancerTypes:[],childStudies:[],descendantStudies:[],descendantCancerTypes:[],ancestors:[],siblings:[],searchTerms:j})}}catch(e){k=!0,T=e}finally{try{C||null==x.return||x.return()}finally{if(k)throw T}}}var I=!0,N=!1,M=void 0;try{for(var D,R=this.priorityCategories[Symbol.iterator]();!(I=(D=R.next()).done);I=!0){var L=D.value;(i=this.map_node_meta.get(L)).isPriorityCategory=!0;var G=!0,V=!1,B=void 0;try{for(var F,H=y[L.cancerTypeId][Symbol.iterator]();!(G=(F=H.next()).done);G=!0){var U=F.value,W=this.map_studyId_cancerStudy.get(U);if(W)i.childStudies.push(W),i.descendantStudies.push(W),this.map_node_meta.get(W).priorityCategories.push(L)}}catch(e){V=!0,B=e}finally{try{G||null==H.return||H.return()}finally{if(V)throw B}}}}catch(e){N=!0,M=e}finally{try{I||null==R.return||R.return()}finally{if(N)throw M}}for(var q=0,z=[d,h];q<z.length;q++){n=z[q];var Q=!0,K=!1,Y=void 0;try{for(var X,Z=n[Symbol.iterator]();!(Q=(X=Z.next()).done);Q=!0){o=X.value,i=this.map_node_meta.get(o);var J=void 0;if(i.isCancerType){var $=o.alwaysVisible;J=this.map_cancerTypeId_cancerType.get(o.parent),$&&J&&(J.alwaysVisible=$)}else J=this.map_cancerTypeId_cancerType.get(o.cancerTypeId);var ee=J&&this.map_node_meta.get(J);for(ee&&(i.isCancerType?ee.childCancerTypes.push(o):ee.childStudies.push(o));J&&ee;)i.ancestors.push(J),i.isCancerType?ee.descendantCancerTypes.push(o):ee.descendantStudies.push(o),ee=(J=this.map_cancerTypeId_cancerType.get(J.parent))&&this.map_node_meta.get(J);var te=[].concat(a(i.ancestors),a(i.priorityCategories)).map(function(e){return e.name});i.searchTerms=[i.searchTerms].concat(a(te)).join("\n")}}catch(e){K=!0,Y=e}finally{try{Q||null==Z.return||Z.return()}finally{if(K)throw Y}}}var ne=!0,re=!1,oe=void 0;try{for(var ie,ae=h[Symbol.iterator]();!(ne=(ie=ae.next()).done);ne=!0){o=ie.value;var se=(i=this.map_node_meta.get(o)).ancestors[i.ancestors.length-2];if(se){var le=this.map_node_meta.get(se);i.siblings=le.descendantStudies}}}catch(e){re=!0,oe=e}finally{try{ne||null==ae.return||ae.return()}finally{if(re)throw oe}}}var t,n,o;return t=e,o=[{key:"sortNodes",value:function(e){return r.sortBy(e,function(e){return e.name})}}],(n=null)&&s(t.prototype,n),o&&s(t,o),e}(),d=n(3),f=n(38),h=n(31),m=n(46),y=n(152),g=n.n(y),b=n(8),v=n(832),_=n(102),S=n.n(_),E=n(18),w=n(842),O=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};function C(e,t,n){return O(this,void 0,void 0,regeneratorRuntime.mark(function o(){var i,a;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return i=r.chunk(e,n),a=i.map(t),o.t0=r,o.next=5,Promise.all(a);case 5:return o.t1=o.sent,o.abrupt("return",o.t0.flatten.call(o.t0,o.t1));case 7:case"end":return o.stop()}},o)}))}var k=n(11);function T(e){var t=e.selectableSelectedStudyIds,n=e.asyncCustomCaseSet.result.map(function(e){return e.studyId+":"+e.sampleId}).join("+"),r=e.getSelectedProfileIdFromMolecularAlterationType("MUTATION_EXTENDED");e.alterationTypesInOQL.haveMutInQuery&&!r&&e.defaultMutationProfile&&(r=e.defaultMutationProfile.molecularProfileId);var o=e.getSelectedProfileIdFromMolecularAlterationType("COPY_NUMBER_ALTERATION");e.alterationTypesInOQL.haveCnaInQuery&&!o&&e.defaultCnaProfile&&(o=e.defaultCnaProfile.molecularProfileId);var i=e.getSelectedProfileIdFromMolecularAlterationType("MRNA_EXPRESSION");e.alterationTypesInOQL.haveMrnaInQuery&&!i&&e.defaultMrnaProfile&&(i=e.defaultMrnaProfile.molecularProfileId);var a=e.getSelectedProfileIdFromMolecularAlterationType("PROTEIN_LEVEL");e.alterationTypesInOQL.haveProtInQuery&&!a&&e.defaultProtProfile&&(a=e.defaultProtProfile.molecularProfileId);var s={genetic_profile_ids_PROFILE_MUTATION_EXTENDED:r,genetic_profile_ids_PROFILE_COPY_NUMBER_ALTERATION:o,genetic_profile_ids_PROFILE_MRNA_EXPRESSION:i,genetic_profile_ids_PROFILE_METHYLATION:e.getSelectedProfileIdFromMolecularAlterationType("METHYLATION")||e.getSelectedProfileIdFromMolecularAlterationType("METHYLATION_BINARY"),genetic_profile_ids_PROFILE_PROTEIN_EXPRESSION:a,genetic_profile_ids_PROFILE_GENESET_SCORE:e.getSelectedProfileIdFromMolecularAlterationType("GENESET_SCORE"),genetic_profile_ids_PROFILE_GENERIC_ASSAY:e.getSelectedProfileIdFromMolecularAlterationType("GENERIC_ASSAY"),cancer_study_id:1===t.length?t[0]:"all",cancer_study_list:void 0,Z_SCORE_THRESHOLD:e.zScoreThreshold,RPPA_SCORE_THRESHOLD:e.rppaScoreThreshold,data_priority:e.dataTypePriorityCode,profileFilter:e.dataTypePriorityCode,case_set_id:e.selectedSampleListId||"-1",case_ids:n,gene_list:ae(e.geneQuery)||" ",geneset_list:ae(e.genesetQuery)||" ",tab_index:e.forDownloadTab?"tab_download":"tab_visualize",transpose_matrix:e.transposeDataMatrix?"on":void 0,Action:"Submit"};return 1!==t.length&&(s.cancer_study_list=t.join(",")),{query:s}}function P(e){var t=!1,n=!1,r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;if(l.showProfileInAnalysisTab){switch(l.molecularAlterationType){case k.a.MUTATION_EXTENDED:t=!0;break;case k.a.COPY_NUMBER_ALTERATION:n=!0}if(t&&n)break}}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return{mutation:t,cna:n}}function x(e,t,n){var o={},i={},a={},s={},l={},u={},c={},p={};r.each(e,function(e){switch(e.category){case"all_cases_with_mutation_and_cna_data":a[e.studyId]=r.keyBy(e.sampleIds);break;case"all_cases_with_mutation_data":o[e.studyId]=r.keyBy(e.sampleIds);break;case"all_cases_with_cna_data":i[e.studyId]=r.keyBy(e.sampleIds);break;case"all_cases_in_study":s[e.studyId]=r.keyBy(e.sampleIds);break;default:e.sampleListId===e.studyId+"_all"&&(s[e.studyId]=r.keyBy(e.sampleIds))}});var d=r.map(n,function(e){return e.id}),f=t.filter(function(e){return!r.includes(d,e)});return r.forEach(f,function(e){l[e]=o[e]||{},u[e]=i[e]||{},c[e]=a[e]||{},p[e]=s[e]||{}}),r.forEach(n,function(e){r.forEach(e.data.studies,function(e){r.includes(f,e.id)||(l[e.id]=l[e.id]||{},u[e.id]=u[e.id]||{},c[e.id]=c[e.id]||{},p[e.id]=p[e.id]||{},r.forEach(e.samples,function(t){o[e.id]&&o[e.id][t]&&(l[e.id][t]=t),i[e.id]&&i[e.id][t]&&(u[e.id][t]=t),a[e.id]&&a[e.id][t]&&(c[e.id][t]=t),s[e.id]&&s[e.id][t]&&(p[e.id][t]=t)}))})}),{w_mut:r.reduce(l,function(e,t){return e+Object.keys(t).length},0),w_cna:r.reduce(u,function(e,t){return e+Object.keys(t).length},0),w_mut_cna:r.reduce(c,function(e,t){return e+Object.keys(t).length},0),all:r.reduce(p,function(e,t){return e+Object.keys(t).length},0)}}var A=n(41);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var D=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};function R(e){return e}function L(e,t){return t}function G(e){return D(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.fetchMolecularProfilesUsingPOST({molecularProfileFilter:{studyIds:e}});case 2:return n=t.sent,i=r.groupBy(n,function(e){return e.studyId}),t.abrupt("return",e.map(function(e){return{data:[i[e]||[]],meta:e}}));case 5:case"end":return t.stop()}},t)}))}var V=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),I(this,N(t).call(this,R,L,G))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(t,A["a"]),t}(),B=n(21),F=n(122);function H(e){var t=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value;r.has(l,"genesets")&&l.genesets.forEach(function(e){return t.push(e)})}}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return t}var U=n(104);function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){return!t||"object"!==W(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var K=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};var Y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),q(this,z(t).call(this,function(e){return{invoke:function(){return function(e){return K(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.getAllSampleListsInStudyUsingGET({studyId:e,projection:"DETAILED"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}))}(e)}}},function(e){return e}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(t,U["a"]),t}();var X=n(234),Z=n(173);function J(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",function(){return oe}),n.d(t,"e",function(){return ae}),n.d(t,"b",function(){return se}),n.d(t,"c",function(){return ue}),n.d(t,"d",function(){return ce});var ne=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":te(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},re=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},oe="-1";function ie(e){return Number.isInteger(Number(e))}function ae(e){return e.trim().replace(/^\s+|\s+$/g,"").replace(/[ \+]+/g," ").toUpperCase()}var se,le=["searchText","selectableSelectedStudyIds","dataTypePriority","selectedProfileIds","zScoreThreshold","rppaScoreThreshold","selectedSampleListId","caseIds","caseIdsMode","geneQuery","genesetQuery"];!function(e){e[e.Unfocused=0]="Unfocused",e[e.ShouldFocus=1]="ShouldFocus",e[e.Focused=2]="Focused"}(se||(se={}));var ue=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.studiesHaveChangedSinceInitialization=!1,this.deletedVirtualStudies=[],this.forDownloadTab=!1,this.transposeDataMatrix=!1,this.searchText="",this._allSelectedStudyIds=i.observable.map(),this._defaultSelectedIds=i.observable.map(),this.dataTypePriority={mutation:!0,cna:!0},this._selectedProfileIds=void 0,this.zScoreThreshold="2.0",this.rppaScoreThreshold="2.0",this._selectedSampleListId=void 0,this.caseIds="",this._defaultStudySampleMap={},this._caseIdsMode="sample",this._geneQuery="",this.rawGenesetQuery="",this.geneQueryErrorDisplayStatus=se.Unfocused,this.genesetQueryErrorDisplayStatus=se.Unfocused,this.showMutSigPopup=!1,this.showGisticPopup=!1,this.showGenesetsHierarchyPopup=!1,this.showGenesetsVolcanoPopup=!1,this.priorityStudies=b.a.parseConfigFormat(b.b.serverConfig.priority_studies),this.showSelectedStudiesOnly=!1,this.selectedCancerTypeIds=[],this.clickAgainToDeselectSingle=!0,this.searchExampleMessage="",this.volcanoPlotSelectedPercentile={label:"75%",value:"75"},this._maxTreeDepth=parseInt(b.b.serverConfig.skin_query_max_tree_depth,10),this.cancerTypes=Object(d.T)({invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.a.getAllCancerTypesUsingGET({}).then(function(e){return e.filter(function(e){return"null"!==e.parent})}));case 1:case"end":return e.stop()}},e)}))}},[]),this.cancerStudies=Object(d.T)(o.a.getAllStudiesUsingGET({projection:"SUMMARY"}),[]),this.cancerStudyIdsSet=Object(d.T)({await:function(){return[n.cancerStudies]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(d.Z)(this.cancerStudies.result.map(function(e){return e.studyId})));case 1:case"end":return e.stop()}},e,this)}))},default:{}}),this.physicalStudiesIdsSet=Object(d.T)({await:function(){return[n.cancerStudies]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.cancerStudies.result.reduce(function(e,t){return e[t.studyId]=[t.studyId],e},{}));case 1:case"end":return e.stop()}},e,this)}))},default:{}}),this.virtualStudiesIdsSet=Object(d.T)({await:function(){return[n.userVirtualStudies]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.userVirtualStudies.result.reduce(function(e,t){return e[t.id]=[t.id],e},{}));case 1:case"end":return e.stop()}},e,this)}))},default:{}}),this.sharedQueriedStudiesSet=Object(d.T)({await:function(){return[n.physicalStudiesIdsSet,n.virtualStudiesIdsSet]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,o,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.physicalStudiesIdsSet.result,n=this.virtualStudiesIdsSet.result,o=Object.assign({},t,n),i=this._defaultSelectedIds.keys().filter(function(e){return!o[e]}),a={},e.next=7,Promise.all(i.map(function(e){return new Promise(function(n,o){F.a.getVirtualStudy(e).then(function(o){var i=o.data.studies.map(function(e){return e.id}),s=i.filter(function(e){return!t[e]});r.isEmpty(s)&&(a[e]=i),n()}).catch(function(){n()})})}));case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}},e,this)}))},default:{}}),this.physicalStudiesSet=Object(d.T)({await:function(){return[n.cancerStudies]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.cancerStudies.result.reduce(function(e,t){return e[t.studyId]=t,e},{}));case 1:case"end":return e.stop()}},e,this)}))},default:{}}),this.userVirtualStudies=Object(d.T)(function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!b.a.sessionServiceIsEnabled()||!this.userLoggedIn){e.next=13;break}return e.prev=1,e.next=4,F.a.getUserVirtualStudies();case 4:return t=e.sent,e.abrupt("return",t);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",[]);case 11:e.next=14;break;case 13:return e.abrupt("return",[]);case 14:case"end":return e.stop()}},e,this,[[1,8]])}))},[]),this.userVirtualStudiesSet=Object(d.T)({await:function(){return[n.userVirtualStudies]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.userVirtualStudies.result.reduce(function(e,t){return e[t.id]=t,e},{}));case 1:case"end":return e.stop()}},e,this)}))},default:{}}),this.sharedVirtualStudiesSet=Object(d.T)({await:function(){return[n.physicalStudiesSet,n.userVirtualStudiesSet]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,o,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.physicalStudiesSet.result,n=this.userVirtualStudiesSet.result,o=Object.assign([],Object.keys(t),Object.keys(n)),i=this._defaultSelectedIds.keys().filter(function(e){return!r.includes(o,e)}),a={},e.next=7,Promise.all(i.map(function(e){return new Promise(function(n,r){F.a.getVirtualStudy(e).then(function(r){0===r.data.studies.map(function(e){return e.id}).filter(function(e){return!t[e]}).length&&(a[e]=r),n()}).catch(function(){n()})})}));case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}},e,this)}))},default:{}}),this.selectedStudyToSampleSet=Object(d.T)({await:function(){return[n.userVirtualStudiesSet,n.sharedVirtualStudiesSet]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,i,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={},n=r.filter(this.allSelectedStudyIds,function(e){return a.physicalStudiesSet.result[e]}),this._allSelectedStudyIds.keys().length===n.length){e.next=9;break}return e.next=5,Promise.all(r.map(n,function(e){return o.a.getAllSamplesInStudyUsingGET({studyId:e}).then(function(n){t[e]=Object(d.Z)(n.map(function(e){return e.sampleId}))})}));case 5:i=Object.assign(Object.assign({},this.userVirtualStudiesSet.result),this.sharedVirtualStudiesSet.result),this._allSelectedStudyIds.keys().forEach(function(e){i[e]&&i[e].data.studies.forEach(function(e){void 0===t[e.id]&&(t[e.id]=Object(d.Z)(e.samples))})}),e.next=10;break;case 9:n.forEach(function(e){t[e]={}});case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}},e,this)}))},default:{}}),this.selectableStudiesSet=Object(d.T)({await:function(){return[n.physicalStudiesSet,n.selectedStudyToSampleSet]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},r.each(this.physicalStudiesSet.result,function(e,n){t[n]=[n]}),r.each(this.userVirtualStudiesSet.result,function(e,n){t[n]=[n]}),r.each(this.sharedVirtualStudiesSet.result,function(e,n){t[n]=e.data.studies.map(function(e){return e.id})}),e.abrupt("return",t);case 5:case"end":return e.stop()}},e,this)}))},default:{},onResult:function(){if(n.selectedSampleListId!==oe){var e=n.sharedVirtualStudiesSet.result,t=r.filter(n._allSelectedStudyIds.keys(),function(t){return void 0!==e[t]});if(r.isEmpty(t))n.caseIds="";else{var o=n._defaultStudySampleMap;(void 0===o||r.isEmpty(o))&&(o=r.reduce(n.selectedStudyToSampleSet.result,function(e,t,n){return e[n]=r.keys(t),e},{})),r.some(o,function(e){return e.length>0})&&n.setCaseIds(o)}}}}),this.unknownStudyIds=Object(d.T)({await:function(){return[n.selectableStudiesSet]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.selectableStudiesSet.result,n=this._allSelectedStudyIds.keys(),e.abrupt("return",n.filter(function(e){return!(e in t)}));case 3:case"end":return e.stop()}},e,this)}))},default:[]}),this.molecularProfiles=Object(d.T)({invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==this.physicalStudyIdsInSelection.length){e.next=6;break}return e.next=3,o.a.getAllMolecularProfilesInStudyUsingGET({studyId:this.physicalStudyIdsInSelection[0]});case 3:return e.abrupt("return",e.sent);case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}},e,this)}))},default:[],onResult:function(){n.initiallySelected.profileIds&&!n.studiesHaveChangedSinceInitialization||(n._selectedProfileIds=void 0)}}),this.molecularProfilesInSelectedStudies=Object(d.T)({invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.molecularProfilesInStudyCache.getPromise(this.physicalStudyIdsInSelection,!0);case 2:return t=e.sent,e.abrupt("return",r.flatten(t.map(function(e){return e.data?e.data:[]})));case 4:case"end":return e.stop()}},e,this)}))},default:[]}),this.sampleListInSelectedStudies=Object(d.T)({await:function(){return n.physicalStudyIdsInSelection.map(function(e){return n.sampleListsInStudyCache.get(e)})},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.reduce(this.physicalStudyIdsInSelection,function(e,n){var o=t.sampleListsInStudyCache.get(n).result;return r.isUndefined(o)||(e=e.concat(o)),e},[]));case 1:case"end":return e.stop()}},e,this)}))},default:[],onResult:function(){n.initiallySelected.sampleListId&&!n.studiesHaveChangedSinceInitialization||(n._selectedSampleListId=void 0)}}),this.profileAvailability=Object(d.T)({await:function(){return[n.molecularProfilesInSelectedStudies]},invoke:function(){return Promise.resolve(P(n.molecularProfilesInSelectedStudies.result))},default:{mutation:!1,cna:!1},onResult:function(){n.initiallySelected.sampleListId&&!n.studiesHaveChangedSinceInitialization||(n.dataTypePriority=P(n.molecularProfilesInSelectedStudies.result))}}),this.profiledSamplesCount=Object(d.T)({await:function(){return[n.sampleListInSelectedStudies]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x(this.sampleListInSelectedStudies.result,this.selectableSelectedStudyIds,this.selectedVirtualStudies));case 1:case"end":return e.stop()}},e,this)}))},default:{w_mut:0,w_cna:0,w_mut_cna:0,all:0}}),this.sampleLists=Object(d.T)({invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isSingleNonVirtualStudySelected){e.next=2;break}return e.abrupt("return",[]);case 2:return this.sampleListsInStudyCache.get(this.selectableSelectedStudyIds[0]).result,e.next=5,this.sampleListsInStudyCache.get(this.selectableSelectedStudyIds[0]).result;case 5:return t=e.sent,e.abrupt("return",r.sortBy(t,function(e){return e.name}));case 7:case"end":return e.stop()}},e,this)}))},default:[],onResult:function(){n.initiallySelected.sampleListId&&!n.studiesHaveChangedSinceInitialization||(n._selectedSampleListId=void 0)}}),this.mutSigForSingleStudy=Object(d.T)({invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isSingleNonVirtualStudySelected){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,h.a.getSignificantlyMutatedGenesUsingGET({studyId:this.selectableSelectedStudyIds[0]});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}))},default:[]}),this.gisticForSingleStudy=Object(d.T)({invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isSingleNonVirtualStudySelected){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,h.a.getSignificantCopyNumberRegionsUsingGET({studyId:this.selectableSelectedStudyIds[0]});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}))},default:[]}),this.genes=Object(d.T)({invoke:function(){return n.invokeGenesLater(n.geneIds)},default:{found:[],suggestions:[]}}),this.genesets=Object(d.T)({invoke:function(){return n.invokeGenesetsLater(n.genesetIds)},default:{found:[],invalid:[]}}),this.invokeGenesLater=Object(f.debounceAsync)(function(e){return re(n,void 0,void 0,regeneratorRuntime.mark(function t(){var n,i,a,s,l,u,c,p,d,f,h=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.partition(r.uniq(e),ie),i=$(n,2),a=i[0],s=i[1],l=function(){return re(h,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,i,s,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.length){e.next=6;break}return e.next=3,o.a.fetchGenesUsingPOST({geneIdType:"ENTREZ_GENE_ID",geneIds:a});case 3:t=e.sent,e.next=7;break;case 6:t=[];case 7:return n=r.difference(a,t.map(function(e){return e.entrezGeneId+""})),i=n.map(function(e){return{alias:e,genes:[]}}),s=t.map(function(e){return{alias:e.entrezGeneId+"",genes:[e]}}),l=[].concat(J(i),J(s)),e.abrupt("return",{found:t,suggestions:l});case 12:case"end":return e.stop()}},e)}))},u=function(){return re(h,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,i,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.length){e.next=6;break}return e.next=3,o.a.fetchGenesUsingPOST({geneIdType:"HUGO_GENE_SYMBOL",geneIds:s});case 3:t=e.sent,e.next=7;break;case 6:t=[];case 7:return n=r.difference(s,t.map(function(e){return e.hugoGeneSymbol})),e.next=10,Promise.all(n.map(function(e){return a.getGeneSuggestions(e)}));case 10:return i=e.sent,e.abrupt("return",{found:t,suggestions:i});case 12:case"end":return e.stop()}},e)}))},t.next=5,Promise.all([l(),u()]);case 5:return c=t.sent,p=$(c,2),d=p[0],f=p[1],t.abrupt("return",{found:[].concat(J(d.found),J(f.found)),suggestions:[].concat(J(d.suggestions),J(f.suggestions))});case 10:case"end":return t.stop()}},t)}))},500),this.invokeGenesetsLater=Object(f.debounceAsync)(function(e){return re(n,void 0,void 0,regeneratorRuntime.mark(function t(){var n,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.length>0)){t.next=8;break}return t.next=3,h.a.fetchGenesetsUsingPOST({genesetIds:e});case 3:return n=t.sent,o=r.difference(e,n.map(function(e){return e.genesetId})),t.abrupt("return",{found:n,invalid:o});case 8:return t.abrupt("return",Promise.resolve({found:[],invalid:[]}));case 9:case"end":return t.stop()}},t)}))},500),this.asyncCustomCaseSet=Object(d.T)({invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.selectedSampleListId===oe&&0!==this.caseIds.trim().length){e.next=2;break}return e.abrupt("return",[]);case 2:return e.abrupt("return",this.invokeCustomCaseSetLater({isVirtualStudySelected:this.isVirtualStudySelected,caseIds:this.caseIds,caseIdsMode:this.caseIdsMode}));case 3:case"end":return e.stop()}},e,this)}))},default:[]}),this.invokeCustomCaseSetLater=Object(f.debounceAsync)(function(e){return re(n,void 0,void 0,regeneratorRuntime.mark(function t(){var n,i,a,s,l,u,c,p,f,h,m,y,g,b,v,_,S,E,w,O,k,T,P,x,A,j,I=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n="",this.isSingleNonVirtualStudySelected&&(n=this.selectableSelectedStudyIds[0]),i=e.caseIds.trim().split(/\s+/g),a=Object(d.Z)(this.physicalStudyIdsInSelection),s=i.map(function(e){var t=e.split(":");if(1===t.length){if(n)return{id:e,study:n};throw new Error("No study specified for ".concat(I.caseIdsMode," id: ").concat(e,", and more than one study selected for query."))}if(2===t.length){var r=t[0],o=t[1];if(!a[r]){var i="";throw I.isVirtualStudySelected&&(i=", nor part of a selected Saved Study"),new Error("Study ".concat(r," is not selected").concat(i,"."))}return{id:o,study:r}}throw new Error("Input error for entity: ".concat(e,"."))}),l=Object(d.X)(s.map(function(e){return"".concat(e.study,":").concat(e.id)})),u=[],c={},p=[],"sample"!==e.caseIdsMode){t.next=37;break}if(!(f=s.map(function(e){return{studyId:e.study,sampleId:e.id}})).length){t.next=35;break}return t.next=14,C(f,function(e){return o.a.fetchSamplesUsingPOST({sampleFilter:{sampleIdentifiers:e},projection:"SUMMARY"})},990);case 14:for(h=t.sent,h=r.sortBy(h,function(e){return l["".concat(e.studyId,":").concat(e.sampleId)]}),m=!0,y=!1,g=void 0,t.prev=19,b=h[Symbol.iterator]();!(m=(v=b.next()).done);m=!0)_=v.value,u.push({studyId:_.studyId,sampleId:_.sampleId}),c["".concat(_.studyId,":").concat(_.sampleId)]=!0;t.next=27;break;case 23:t.prev=23,t.t0=t.catch(19),y=!0,g=t.t0;case 27:t.prev=27,t.prev=28,m||null==b.return||b.return();case 30:if(t.prev=30,!y){t.next=33;break}throw g;case 33:return t.finish(30);case 34:return t.finish(27);case 35:t.next=61;break;case 37:return S=s.map(function(e){return I.getSamplesForStudyAndPatient(e.study,e.id)}),t.next=40,Promise.all(S);case 40:for(E=t.sent,E=r.sortBy(E,function(e){return l["".concat(e.studyId,":").concat(e.patientId)]}),w=!0,O=!1,k=void 0,t.prev=45,T=E[Symbol.iterator]();!(w=(P=T.next()).done);w=!0)x=P.value,x.studyId,x.patientId,A=x.samples,!x.error&&A.length&&(u=u.concat(A.map(function(e){return c["".concat(e.studyId,":").concat(e.patientId)]=!0,{studyId:e.studyId,sampleId:e.sampleId}})));t.next=53;break;case 49:t.prev=49,t.t1=t.catch(45),O=!0,k=t.t1;case 53:t.prev=53,t.prev=54,w||null==T.return||T.return();case 56:if(t.prev=56,!O){t.next=59;break}throw k;case 59:return t.finish(56);case 60:return t.finish(53);case 61:if(p=p.concat(s.filter(function(e){return!c["".concat(e.study,":").concat(e.id)]})),j=this.selectedStudyToSampleSet.result,u.forEach(function(e){j[e.studyId]&&!r.isEmpty(j[e.studyId])&&(j[e.studyId][e.sampleId]||p.push({id:e.sampleId,study:e.studyId}))}),!p.length){t.next=70;break}if(!this.isSingleNonVirtualStudySelected){t.next=69;break}throw new Error("Invalid ".concat(e.caseIdsMode).concat(p.length>1?"s":""," for the selected cancer study: ").concat(p.map(function(e){return e.id}).join(", ")));case 69:throw new Error("Invalid (study, ".concat(e.caseIdsMode,") pair").concat(p.length>1?"s":"",": ").concat(p.map(function(e){return"(".concat(e.study,", ").concat(e.id,")")}).join(", "),"\n\t\t\t\t\t\t"));case 70:return t.abrupt("return",u);case 71:case"end":return t.stop()}},t,this,[[19,23,27,35],[28,,30,34],[45,49,53,61],[54,,56,60]])}))},500),this.studyListLogic=new w.b(this),this.hierarchyData=Object(d.T)({invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(B.X)(this.getFilteredProfiles("GENESET_SCORE")[0].molecularProfileId,Number(this.volcanoPlotSelectedPercentile.value),0,1,this.defaultSelectedSampleListId);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e,this)}))}}),this.volcanoPlotTableData=Object(d.T)({await:function(){return[n.hierarchyData]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H(this.hierarchyData.result));case 1:case"end":return e.stop()}},e,this)}))}}),this.map_genesets_selected_volcano=new i.ObservableMap,this.dict_molecularAlterationType_filenameSuffix={MUTATION_EXTENDED:"mutations",COPY_NUMBER_ALTERATION:"cna",MRNA_EXPRESSION:"mrna",METHYLATION:"methylation",METHYLATION_BINARY:"methylation",PROTEIN_LEVEL:"rppa"},this.asyncUrlParams=Object(d.T)({await:function(){return[n.asyncCustomCaseSet]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",T(this));case 1:case"end":return e.stop()}},e,this)}))}}),this.initiallySelected={profileIds:!1,sampleListId:!1},this.initialize(t)}var t,n,a;return t=e,(n=[{key:"initialize",value:function(e){var t=this;Object(f.labelMobxPromises)(this),e&&this.setParamsFromUrl(e);var n=localStorage.getItem("legacyStudySubmission");if(localStorage.removeItem("legacyStudySubmission"),n)try{this.setParamsFromLocalStorage(JSON.parse(n))}catch(e){throw"error parseing/setting legacyStudySubmission"}Object(i.reaction)(function(){return t.allSelectedStudyIds},function(){t.studiesHaveChangedSinceInitialization=!0})}},{key:"deleteVirtualStudy",value:function(e){var t=this;F.a.deleteVirtualStudy(e).then(Object(i.action)(function(){t.deletedVirtualStudies.push(e),-1!==t.selectableSelectedStudyIds.indexOf(e)&&(t.selectableSelectedStudyIds=r.difference(t.selectableSelectedStudyIds,[e]))}),Object(i.action)(function(e){}))}},{key:"restoreVirtualStudy",value:function(e){var t=this;F.a.addVirtualStudy(e).then(Object(i.action)(function(){t.deletedVirtualStudies=t.deletedVirtualStudies.filter(function(t){return t!==e})}),Object(i.action)(function(e){}))}},{key:"setStudyIdSelected",value:function(e,t){if(this.forDownloadTab){var n={};t&&(n[e]=t),this._allSelectedStudyIds=i.observable.map(n)}else t?this._allSelectedStudyIds.set(e,!0):this._allSelectedStudyIds.delete(e)}},{key:"setCaseIds",value:function(e){this.selectedSampleListId=oe,this.caseIdsMode="sample",this.caseIds=r.flatten(Object.keys(e).map(function(t){return e[t].map(function(e){return"".concat(t,":").concat(e)})})).join("\n")}},{key:"getGeneSuggestions",value:function(e){return re(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,o.a.getAllGenesUsingGET({alias:e});case 3:return t.t1=t.sent,t.abrupt("return",{alias:t.t0,genes:t.t1});case 5:case"end":return t.stop()}},t)}))}},{key:"getSamplesForStudyAndPatient",value:function(e,t){return o.a.getAllSamplesOfPatientInStudyUsingGET({studyId:e,patientId:t}).then(function(n){return{studyId:e,patientId:t,samples:n,error:void 0}},function(n){return{studyId:e,patientId:t,samples:[],error:n}})}},{key:"isVirtualStudy",value:function(e){return!this.cancerStudyIdsSet.result[e]}},{key:"isDeletedVirtualStudy",value:function(e){return!!(this.isVirtualStudy(e)&&this.deletedVirtualStudies.indexOf(e)>-1)}},{key:"isSingleStudySelected",value:function(e){if(1!==this.selectableSelectedStudyIds.length)return!1;var t=this.selectableSelectedStudyIds[0];return this.isVirtualStudy(t)===e}},{key:"calculateDataTypePriorityCode",value:function(e){var t=e.mutation,n=e.cna;return t&&n?"0":t?"1":n?"2":"0"}},{key:"getFilteredProfiles",value:function(e){var t=this;return this.molecularProfiles.result.filter(function(n){return n.molecularAlterationType==e&&(n.showProfileInAnalysisTab||t.forDownloadTab)})}},{key:"isProfileSelected",value:function(e){return r.includes(this.selectedProfileIds,e)}},{key:"getSelectedProfileIdFromMolecularAlterationType",value:function(e,t){var n=!0,r=!1,o=void 0;try{for(var i,a=(t||this.selectedProfileIds)[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value,l=this.dict_molecularProfileId_molecularProfile[s];if(l&&l.molecularAlterationType===e)return l.molecularProfileId}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return""}},{key:"sanitizeQueryParams",value:function(e){return e?decodeURIComponent(e).replace(/\+/g,"\n"):""}},{key:"setParamsFromUrl",value:function(e){var t;"string"==typeof e?t=S.a.parse(e,!0).query:t=e;var n=[t.genetic_profile_ids_PROFILE_MUTATION_EXTENDED,t.genetic_profile_ids_PROFILE_COPY_NUMBER_ALTERATION,t.genetic_profile_ids_PROFILE_MRNA_EXPRESSION,t.genetic_profile_ids_PROFILE_METHYLATION,t.genetic_profile_ids_PROFILE_PROTEIN_EXPRESSION,t.genetic_profile_ids_PROFILE_GENESET_SCORE,t.genetic_profile_ids_PROFILE_GENERIC_ASSAY],o=t.cancer_study_list?t.cancer_study_list.split(","):t.cancer_study_id?[t.cancer_study_id]:[];this.selectableSelectedStudyIds=o,this._defaultSelectedIds=i.observable.map(Object(d.Z)(o)),this._selectedProfileIds=n.every(function(e){return void 0===e})?void 0:n.filter(r.identity),this.zScoreThreshold=t.Z_SCORE_THRESHOLD||"2.0",this.rppaScoreThreshold=t.RPPA_SCORE_THRESHOLD||"2.0",this.dataTypePriorityCode=t.data_priority||t.profileFilter||"0",this.selectedSampleListId=t.case_set_id?t.case_set_id.toString():"",this.caseIds=this.sanitizeQueryParams(t.case_ids),this.caseIdsMode="sample",this.geneQuery=ae(decodeURIComponent(t.gene_list||"")),this.genesetQuery=ae(decodeURIComponent(t[X.a.geneset_list]||"")),this.forDownloadTab="tab_download"===t.tab_index,this.initiallySelected.profileIds=!0,this.initiallySelected.sampleListId=!0}},{key:"setParamsFromLocalStorage",value:function(e){var t=e.case_ids;if(t&&e.case_set_id==oe&&(this.selectedSampleListId=oe,this.caseIdsMode="sample",this.caseIds=t.replace(/\+/g,"\n"),this.initiallySelected.sampleListId=!0),e.cancer_study_list){var n=!0,r=!1,o=void 0;try{for(var i,a=e.cancer_study_list.split(",")[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;"null"!==s&&(this.setStudyIdSelected(s,!0),this._defaultSelectedIds.set(s,!0))}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}}}},{key:"selectCancerType",value:function(e,t){var n=e.cancerTypeId;t?r.includes(this.selectedCancerTypeIds,n)?this.selectedCancerTypeIds=r.difference(this.selectedCancerTypeIds,[n]):this.selectedCancerTypeIds=r.union(this.selectedCancerTypeIds,[n]):this.clickAgainToDeselectSingle&&r.isEqual(Object(i.toJS)(this.selectedCancerTypeIds),[n])?this.selectedCancerTypeIds=[]:this.selectedCancerTypeIds=[n]}},{key:"setSearchText",value:function(e){this.clearSelectedCancerType(),this.searchText=e}},{key:"clearSelectedCancerType",value:function(){this.selectedCancerTypeIds=[]}},{key:"selectMolecularProfile",value:function(e,t){var n=this.getFilteredProfiles(e.molecularAlterationType).map(function(e){return e.molecularProfileId});if(this.forDownloadTab)this._selectedProfileIds=[e.molecularProfileId];else{var o=r.difference(this.selectedProfileIds,n);this._selectedProfileIds=t?r.union(o,[e.molecularProfileId]):o}}},{key:"replaceGene",value:function(e,t){this.geneQuery=ae(this.geneQuery.toUpperCase().replace(new RegExp("\\b".concat(e.toUpperCase(),"\\b"),"g"),function(){return t.toUpperCase()}))}},{key:"replaceGeneset",value:function(e,t){this.genesetQuery=ae(this.genesetQuery.toUpperCase().replace(new RegExp("\\b".concat(e.toUpperCase(),"\\b"),"g"),function(){return t.toUpperCase()}))}},{key:"applyGeneSelection",value:function(e){var t=$(r.partition(e.keys(),function(t){return e.get(t)}),2),n=t[0],o=t[1];n=r.difference(n,this.geneIds),o=r.intersection(o,this.geneIds);var i=!0,a=!1,s=void 0;try{for(var l,u=o[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value;this.replaceGene(c,"")}}catch(e){a=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw s}}this.geneQuery=ae([this.geneQuery].concat(J(n)).join(" "))}},{key:"addToGenesetSelection",value:function(e){var t=$(r.partition(e.keys(),function(t){return e.get(t)}),2),n=t[0],o=(t[1],r.union(n,this.genesetIds).join(" "));this.genesetQuery=ae(o)}},{key:"applyGenesetSelection",value:function(e){var t=$(r.partition(e.keys(),function(t){return e.get(t)}),2),n=t[0],o=t[1],i=this.genesetQuery;if(n.length>0){var a=[],s=!0,l=!1,u=void 0;try{for(var c,p=n[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){var d=c.value;a.push(d)}}catch(e){l=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw u}}i=a.join(" ")}if(o.length>0){var f=i.split(" "),h=!0,m=!1,y=void 0;try{for(var g,b=o[Symbol.iterator]();!(h=(g=b.next()).done);h=!0){var v=g.value,_=!0,S=!1,E=void 0;try{for(var w,O=f[Symbol.iterator]();!(_=(w=O.next()).done);_=!0){var C=w.value;if(v===C){var k=f.indexOf(C);k>=0&&f.splice(k,1)}}}catch(e){S=!0,E=e}finally{try{_||null==O.return||O.return()}finally{if(S)throw E}}}}catch(e){m=!0,y=e}finally{try{h||null==b.return||b.return()}finally{if(m)throw y}}i=f.join(" ")}i=ae(i),this.genesetQuery=i}},{key:"submit",value:function(){if(this.oql.error)return this.geneQueryErrorDisplayStatus=se.ShouldFocus,this.genesetQueryErrorDisplayStatus=se.ShouldFocus,!1;if(!this.submitEnabled||!this.asyncUrlParams.isComplete)return!1;var e=this.asyncUrlParams.result;return this.forDownloadTab?function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"post",o=document.createElement("form"),i=r;"smart"===r&&(i=Object(E.b)(e,t).length>1800?"post":"get"),o.setAttribute("method",i),o.setAttribute("action",e),n&&o.setAttribute("target",n);for(var a=0,s=Object.keys(t);a<s.length;a++){var l=s[a],u=document.createElement("input");u.setAttribute("type","hidden"),u.setAttribute("name",l),u.setAttribute("value",t[l]),o.appendChild(u)}document.body.appendChild(o),o.submit()}(Object(E.b)("data_download"),e.query,void 0,"smart"):this.singlePageAppSubmitRoutine(e.query),!0}},{key:"openSummary",value:function(){this.summaryEnabled&&Object(E.E)(this.selectableSelectedStudyIds)}},{key:"virtualStudiesMap",get:function(){return r.keyBy(this.userVirtualStudies.result,function(e){return e.id})}},{key:"selectedVirtualStudies",get:function(){var e=this;return r.reduce(this.selectableSelectedStudies,function(t,n){return e.isVirtualStudy(n.studyId)&&void 0!==e.virtualStudiesMap&&e.virtualStudiesMap[n.studyId]&&t.push(e.virtualStudiesMap[n.studyId]),t},[])}},{key:"physicalStudyIdsInSelection",get:function(){var e={},t=!0,n=!1,r=void 0;try{for(var o,i=this.selectableSelectedStudyIds[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value,s=this.virtualStudiesMap[a];s?s.data.studies.forEach(function(t){return e[t.id]=!0}):e[a]=!0}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return Object.keys(e)}},{key:"stateToSerialize",get:function(){return r.pick(this,le)}},{key:"onlyOneReferenceGenome",get:function(){return 1===r.uniq(this.selectableSelectedStudies.map(function(e){return e.referenceGenome})).length}},{key:"allSelectedStudyIds",get:function(){return this._allSelectedStudyIds.keys()}},{key:"selectableSelectedStudyIds",get:function(){var e=this._allSelectedStudyIds.keys(),t=this.selectableStudiesSet.result;return e=e.reduce(function(e,n){return t[n]?e.concat(t[n]):e},[]),e=r.uniq(e),this.forDownloadTab?e.slice(-1):e},set:function(e){this._allSelectedStudyIds=i.observable.map(Object(d.Z)(e))}},{key:"defaultSelectedIds",get:function(){return this._defaultSelectedIds}},{key:"selectedProfileIds",get:function(){var e,t=this;if(void 0!==this._selectedProfileIds)e=this._selectedProfileIds;else{e=[];for(var n=0,r=["MUTATION_EXTENDED","COPY_NUMBER_ALTERATION"];n<r.length;n++){var o=r[n],i=this.getFilteredProfiles(o);i.length&&e.push(i[0].molecularProfileId)}}return this.forDownloadTab?e.slice(0,1):e.filter(function(e){var n=t.dict_molecularProfileId_molecularProfile[e];return n&&n.showProfileInAnalysisTab})},set:function(e){this._selectedProfileIds=e}},{key:"selectedSampleListId",get:function(){return void 0!==this._selectedSampleListId?this._selectedSampleListId:this.defaultSelectedSampleListId},set:function(e){this._selectedSampleListId=e}},{key:"caseIdsMode",get:function(){return this.selectedSampleListId===oe?this._caseIdsMode:"sample"},set:function(e){this._caseIdsMode=e}},{key:"geneQuery",get:function(){return this._geneQuery},set:function(e){this.geneQueryErrorDisplayStatus=se.Unfocused,this._geneQuery=e}},{key:"genesetQuery",get:function(){return this.rawGenesetQuery.toUpperCase()},set:function(e){this.genesetQueryErrorDisplayStatus=se.Unfocused,this.rawGenesetQuery=e}},{key:"maxTreeDepth",get:function(){return this.forDownloadTab&&this._maxTreeDepth>0?1:this._maxTreeDepth},set:function(e){this._maxTreeDepth=e}},{key:"userLoggedIn",get:function(){return Object(d.C)().globalStores.appStore.isLoggedIn}},{key:"treeData",get:function(){return new p({cancerTypes:this.cancerTypes.result,studies:this.cancerStudies.result,priorityStudies:this.priorityStudies,virtualStudies:this.forDownloadTab?[]:this.userVirtualStudies.result,maxTreeDepth:this.maxTreeDepth})}},{key:"selectedCancerTypes",get:function(){var e=this;return this.selectedCancerTypeIds.map(function(t){return e.treeData.map_cancerTypeId_cancerType.get(t)}).filter(r.identity)}},{key:"selectableSelectedStudies",get:function(){var e=this;return this.selectableSelectedStudyIds.map(function(t){return e.treeData.map_studyId_cancerStudy.get(t)}).filter(r.identity)}},{key:"isSingleVirtualStudySelected",get:function(){return this.isSingleStudySelected(!0)}},{key:"isSingleNonVirtualStudySelected",get:function(){return this.isSingleStudySelected(!1)}},{key:"isMultipleNonVirtualStudiesSelected",get:function(){var e=this;return this.selectableSelectedStudyIds.filter(function(t){return!e.isVirtualStudy(t)}).length>1}},{key:"getOverlappingStudiesMap",get:function(){var e,t,n=(e=this.selectableSelectedStudies,t=r.reduce(e,function(e,t){if(/_tcga/.test(t.studyId)){var n=t.studyId.replace(/(_\d\d\d\d|_pub|(_pub\d\d\d\d)|_pan_can_atlas_\d\d\d\d)$/g,"");n&&(n in e?e[n].push(t):e[n]=[t])}return e},{}),r.filter(t,function(e){return e.length>1}));return r.chain(n).flatten().keyBy(function(e){return e.studyId}).value()}},{key:"isVirtualStudySelected",get:function(){var e=!1,t=!0,n=!1,r=void 0;try{for(var o,i=this.selectableSelectedStudyIds[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;if(this.virtualStudiesMap[a]){e=!0;break}}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return e}},{key:"isVirtualStudyQuery",get:function(){return 0!==this.selectableSelectedStudyIds.length&&(this.selectableSelectedStudyIds.length>1||this.isSingleVirtualStudySelected)}},{key:"dataTypePriorityCode",set:function(e){switch(e){default:case"0":this.dataTypePriority={mutation:!0,cna:!0};break;case"1":this.dataTypePriority={mutation:!0,cna:!1};break;case"2":this.dataTypePriority={mutation:!1,cna:!0}}},get:function(){return this.calculateDataTypePriorityCode(this.dataTypePriority)}},{key:"dict_molecularProfileId_molecularProfile",get:function(){return r.keyBy(this.molecularProfiles.result,function(e){return e.molecularProfileId})}},{key:"isGenesetProfileSelected",get:function(){var e=!1;if(this.getFilteredProfiles("GENESET_SCORE")[0])for(var t in this.selectedProfileIds)this.selectedProfileIds[t]===this.getFilteredProfiles("GENESET_SCORE")[0].molecularProfileId&&(e=!0);return e}},{key:"defaultProfilesForOql",get:function(){if(this.molecularProfilesInSelectedStudies.isComplete)return Object(B.V)(this.molecularProfilesInSelectedStudies.result)}},{key:"defaultMutationProfile",get:function(){return this.defaultProfilesForOql&&this.defaultProfilesForOql[k.a.MUTATION_EXTENDED]}},{key:"defaultCnaProfile",get:function(){return this.defaultProfilesForOql&&this.defaultProfilesForOql[k.a.COPY_NUMBER_ALTERATION]}},{key:"defaultMrnaProfile",get:function(){return this.defaultProfilesForOql&&this.defaultProfilesForOql[k.a.MRNA_EXPRESSION]}},{key:"defaultProtProfile",get:function(){return this.defaultProfilesForOql&&this.defaultProfilesForOql[k.a.PROTEIN_LEVEL]}},{key:"defaultSelectedSampleListId",get:function(){if(this.isVirtualStudyQuery)return"all";if(1===this.selectableSelectedStudyIds.length){var e=this.selectableSelectedStudyIds[0],t=this.getSelectedProfileIdFromMolecularAlterationType("MUTATION_EXTENDED"),n=this.getSelectedProfileIdFromMolecularAlterationType("COPY_NUMBER_ALTERATION"),r=this.getSelectedProfileIdFromMolecularAlterationType("MRNA_EXPRESSION"),o=this.getSelectedProfileIdFromMolecularAlterationType("PROTEIN_LEVEL"),i=e+"_all";return t&&n&&!r&&!o?i=e+"_cnaseq":!t||n||r||o?t||!n||r||o?t||n||!r||o?(t||n)&&r&&!o?i=e+"_3way_complete":t||n||r||!o||(i=e+"_rppa"):this.isProfileSelected(e+"_mrna_median_Zscores")?i=e+"_mrna":this.isProfileSelected(e+"_rna_seq_mrna_median_Zscores")?i=e+"_rna_seq_mrna":this.isProfileSelected(e+"_rna_seq_v2_mrna_median_Zscores")&&(i=e+"_rna_seq_v2_mrna"):i=e+"_cna":i=e+"_sequenced",this.dict_sampleListId_sampleList[i]||(i===e+"_cnaseq"?i=e+"_cna_seq":i===e+"_3way_complete"&&(i=e+"_complete")),this.dict_sampleListId_sampleList[i]||(i=e+"_all"),i}}},{key:"dict_sampleListId_sampleList",get:function(){return r.keyBy(this.sampleLists.result,function(e){return e.sampleListId})}},{key:"oql",get:function(){try{return{query:this.geneQuery?Object(m.g)(this.geneQuery.trim().toUpperCase()):[],error:void 0}}catch(o){if("SyntaxError"!==o.name)return{query:[],error:{start:0,end:0,message:"Unexpected ".concat(o)}};var e,t,n,r=o.location.start.offset;return r===this.geneQuery.length?(e="after",t=r-1,n=r):0===r?(e="before",t=r,n=r+1):(e="at",t=r,n=r+1),{query:[],error:{start:t,end:n,message:"OQL syntax error ".concat(e," selected character; please fix and submit again.")}}}}},{key:"geneIds",get:function(){try{return this.oql.query.map(function(e){return e.gene})}catch(e){return[]}}},{key:"genesetIdsQuery",get:function(){try{return{query:this.genesetQuery?this.genesetQuery.split(/[ \n]+/):[],error:void 0}}catch(o){if("SyntaxError"!==o.name)return{query:[],error:{start:0,end:0,message:"Unexpected ".concat(o)}};var e,t,n,r=o.location.start.offset;return r===this.geneQuery.length?(e="after",t=r-1,n=r):0===r?(e="before",t=r,n=r+1):(e="at",t=r,n=r+1),{query:[],error:{start:t,end:n,message:"OQL syntax error ".concat(e," selected character; please fix and submit again.")}}}}},{key:"genesetIds",get:function(){return this.genesetIdsQuery.query}},{key:"minYVolcanoPlot",get:function(){return this.volcanoPlotTableData.result&&(e=this.volcanoPlotTableData.result).length>0?r.minBy(e,function(e){return e.representativePvalue}).representativePvalue:void 0;var e}},{key:"volcanoPlotGraphData",get:function(){return this.volcanoPlotTableData.result?(e=this.volcanoPlotTableData.result,t=this.map_genesets_selected_volcano,e.length>0?e.map(function(e){var n=e.representativeScore,r=e.representativePvalue,o=e.name;return{x:n,y:-Math.log(r)/Math.log(10),fill:t.get(o)?"tomato":"3786C2"}}):void 0):void 0;var e,t}},{key:"submitEnabled",get:function(){return!this.submitError&&(this.genes.isComplete||this.genesets.isComplete)&&this.asyncUrlParams.isComplete||!!this.oql.error||!!this.genesetIdsQuery.error}},{key:"summaryEnabled",get:function(){return this.selectableSelectedStudyIds.length>0}},{key:"hasSelectedStudies",get:function(){return this.selectableSelectedStudyIds.length>0}},{key:"oqlMessages",get:function(){return Object(B.Y)(this.oql.query)}},{key:"approxSampleCount",get:function(){var e=this.selectedSampleListId;if(!e)return this.profiledSamplesCount.result.all;if(e===oe)return this.caseIds?Math.max(this.caseIds.trim().split(/\s+/g).length,1):1;var t=this.sampleLists.result.find(function(t){return t.sampleListId===e});return t?t.sampleCount:e in this.profiledSamplesCount.result?this.profiledSamplesCount.result[e]:this.profiledSamplesCount.result.all}},{key:"isQueryLimitReached",get:function(){return this.oql.query.length*this.approxSampleCount>b.b.serverConfig.query_product_limit}},{key:"geneLimit",get:function(){return Math.floor(b.b.serverConfig.query_product_limit/this.approxSampleCount)}},{key:"isMixedReferenceGenome",get:function(){var e=this;if(this.physicalStudyIdsInSelection&&this.physicalStudiesSet.result){var t=r.map(this.physicalStudyIdsInSelection,function(t){return e.physicalStudiesSet.result[t]});return Object(Z.c)(t)}}},{key:"alterationTypesInOQL",get:function(){return Object(B.T)(this.oql.query)}},{key:"submitError",get:function(){if(!this.selectableSelectedStudyIds.length)return"Please select one or more cancer studies.";if(this.isSingleNonVirtualStudySelected){if(!this.selectedProfileIds.length)return"Please select one or more molecular profiles.";if(this.alterationTypesInOQL.haveMutInQuery&&!this.defaultMutationProfile)return"Mutation data query specified in OQL, but no mutation profile is available for the selected study.";if(this.alterationTypesInOQL.haveCnaInQuery&&!this.defaultCnaProfile)return"CNA data query specified in OQL, but no CNA profile is available in the selected study.";if(this.alterationTypesInOQL.haveMrnaInQuery&&!this.defaultMrnaProfile)return"mRNA expression data query specified in OQL, but no mRNA profile is available in the selected study.";if(this.alterationTypesInOQL.haveProtInQuery&&!this.defaultProtProfile)return"Protein level data query specified in OQL, but no protein level profile is available in the selected study."}else if(!this.dataTypePriority.mutation&&!this.dataTypePriority.cna)return"Please select one or more molecular profiles.";if(this.selectableSelectedStudyIds.length&&this.selectedSampleListId===oe){if(this.asyncCustomCaseSet.isComplete&&!this.asyncCustomCaseSet.result.length)return"Please enter at least one ID in your custom case set.";if(this.asyncCustomCaseSet.error)return"Error in custom case set."}else{if(this.alterationTypesInOQL.haveMrnaInQuery&&this.selectableSelectedStudyIds.length>1)return"Expression filtering in the gene list (the EXP command) is not supported when doing cross cancer queries.";if(this.alterationTypesInOQL.haveProtInQuery&&this.selectableSelectedStudyIds.length>1)return"Protein level filtering in the gene list (the PROT command) is not supported when doing cross cancer queries."}if(0!==this.selectedProfileIds.length){if(1===this.selectedProfileIds.length){if(this.isGenesetProfileSelected){if(!this.genesetQuery.length&&!this.oql.query.length)return"Please enter one or more gene symbols and gene sets.";if(!this.genesetQuery.length)return"Please enter one or more gene sets or deselect gene set profiles.";if(!this.oql.query.length)return"Please enter one or more gene symbols."}else if(!this.oql.query.length)return"Please enter one or more gene symbols."}else if(this.isGenesetProfileSelected){if(!this.genesetQuery.length&&!this.oql.query.length)return"Please enter one or more gene symbols and gene sets.";if(!this.oql.query.length)return"Please enter one or more gene symbols."}else if(!this.oql.query.length)return"Please enter one or more gene symbols."}else if(!this.oql.query.length)return"Please enter one or more gene symbols.";if(this.isQueryLimitReached)return"Please limit your queries to ".concat(this.geneLimit," genes or fewer.");if(this.genes.result.suggestions.length)return"Please edit the gene symbols.";var e=r.groupBy(this.genes.result.found,function(e){return e.hugoGeneSymbol});return r.some(e,function(e){return e.length>1})?"Please edit the gene symbols.":void 0}},{key:"downloadDataFilename",get:function(){var e=1===this.selectableSelectedStudyIds.length&&this.treeData.map_studyId_cancerStudy.get(this.selectableSelectedStudyIds[0]),t=this.dict_molecularProfileId_molecularProfile[this.selectedProfileIds[0]];if(!this.forDownloadTab||!e||!t)return"cbioportal-data.txt";var n=this.dict_molecularAlterationType_filenameSuffix[t.molecularAlterationType]||t.molecularAlterationType.toLowerCase();return"cbioportal-".concat(e.studyId,"-").concat(n,".txt")}},{key:"molecularProfilesInStudyCache",get:function(){return new V}},{key:"sampleListsInStudyCache",get:function(){return new Y}}])&&ee(t.prototype,n),a&&ee(t,a),e}();ne([i.observable],ue.prototype,"studiesHaveChangedSinceInitialization",void 0),ne([i.observable],ue.prototype,"deletedVirtualStudies",void 0),ne([i.computed],ue.prototype,"virtualStudiesMap",null),ne([i.computed],ue.prototype,"selectedVirtualStudies",null),ne([i.computed],ue.prototype,"physicalStudyIdsInSelection",null),ne([i.computed],ue.prototype,"stateToSerialize",null),ne([i.computed],ue.prototype,"onlyOneReferenceGenome",null),ne([i.observable],ue.prototype,"forDownloadTab",void 0),ne([i.observable],ue.prototype,"transposeDataMatrix",void 0),ne([i.observable],ue.prototype,"searchText",void 0),ne([i.observable],ue.prototype,"_allSelectedStudyIds",void 0),ne([i.computed],ue.prototype,"allSelectedStudyIds",null),ne([i.computed],ue.prototype,"selectableSelectedStudyIds",null),ne([i.action],ue.prototype,"setStudyIdSelected",null),ne([i.computed],ue.prototype,"defaultSelectedIds",null),ne([i.observable],ue.prototype,"dataTypePriority",void 0),ne([i.observable.ref],ue.prototype,"_selectedProfileIds",void 0),ne([i.computed],ue.prototype,"selectedProfileIds",null),ne([i.observable],ue.prototype,"zScoreThreshold",void 0),ne([i.observable],ue.prototype,"rppaScoreThreshold",void 0),ne([i.observable],ue.prototype,"_selectedSampleListId",void 0),ne([i.computed],ue.prototype,"selectedSampleListId",null),ne([i.observable],ue.prototype,"caseIds",void 0),ne([i.observable],ue.prototype,"_defaultStudySampleMap",void 0),ne([i.observable],ue.prototype,"_caseIdsMode",void 0),ne([i.computed],ue.prototype,"caseIdsMode",null),ne([i.observable],ue.prototype,"_geneQuery",void 0),ne([i.observable],ue.prototype,"rawGenesetQuery",void 0),ne([i.observable],ue.prototype,"geneQueryErrorDisplayStatus",void 0),ne([i.observable],ue.prototype,"genesetQueryErrorDisplayStatus",void 0),ne([i.observable],ue.prototype,"showMutSigPopup",void 0),ne([i.observable],ue.prototype,"showGisticPopup",void 0),ne([i.observable],ue.prototype,"showGenesetsHierarchyPopup",void 0),ne([i.observable],ue.prototype,"showGenesetsVolcanoPopup",void 0),ne([i.observable],ue.prototype,"priorityStudies",void 0),ne([i.observable],ue.prototype,"showSelectedStudiesOnly",void 0),ne([i.observable.shallow],ue.prototype,"selectedCancerTypeIds",void 0),ne([i.observable],ue.prototype,"clickAgainToDeselectSingle",void 0),ne([i.observable],ue.prototype,"searchExampleMessage",void 0),ne([i.observable],ue.prototype,"volcanoPlotSelectedPercentile",void 0),ne([i.observable],ue.prototype,"_maxTreeDepth",void 0),ne([i.computed],ue.prototype,"maxTreeDepth",null),ne([i.computed],ue.prototype,"userLoggedIn",null),ne([i.action],ue.prototype,"setCaseIds",null),ne([g.a],ue.prototype,"getGeneSuggestions",null),ne([g.a],ue.prototype,"getSamplesForStudyAndPatient",null),ne([f.cached],ue.prototype,"treeData",null),ne([i.computed],ue.prototype,"selectedCancerTypes",null),ne([i.computed],ue.prototype,"selectableSelectedStudies",null),ne([i.computed],ue.prototype,"isSingleVirtualStudySelected",null),ne([i.computed],ue.prototype,"isSingleNonVirtualStudySelected",null),ne([i.computed],ue.prototype,"isMultipleNonVirtualStudiesSelected",null),ne([i.computed],ue.prototype,"getOverlappingStudiesMap",null),ne([i.computed],ue.prototype,"isVirtualStudySelected",null),ne([i.computed],ue.prototype,"isVirtualStudyQuery",null),ne([i.computed],ue.prototype,"dataTypePriorityCode",null),ne([i.computed],ue.prototype,"dict_molecularProfileId_molecularProfile",null),ne([i.computed],ue.prototype,"defaultProfilesForOql",null),ne([i.computed],ue.prototype,"defaultMutationProfile",null),ne([i.computed],ue.prototype,"defaultCnaProfile",null),ne([i.computed],ue.prototype,"defaultMrnaProfile",null),ne([i.computed],ue.prototype,"defaultProtProfile",null),ne([i.computed],ue.prototype,"defaultSelectedSampleListId",null),ne([i.computed],ue.prototype,"dict_sampleListId_sampleList",null),ne([i.computed],ue.prototype,"oql",null),ne([i.computed],ue.prototype,"geneIds",null),ne([i.computed],ue.prototype,"genesetIdsQuery",null),ne([i.computed],ue.prototype,"genesetIds",null),ne([i.computed],ue.prototype,"minYVolcanoPlot",null),ne([i.observable],ue.prototype,"map_genesets_selected_volcano",void 0),ne([i.computed],ue.prototype,"volcanoPlotGraphData",null),ne([i.computed],ue.prototype,"submitEnabled",null),ne([i.computed],ue.prototype,"summaryEnabled",null),ne([i.computed],ue.prototype,"hasSelectedStudies",null),ne([i.computed],ue.prototype,"oqlMessages",null),ne([i.computed],ue.prototype,"approxSampleCount",null),ne([i.computed],ue.prototype,"isQueryLimitReached",null),ne([i.computed],ue.prototype,"geneLimit",null),ne([i.computed],ue.prototype,"isMixedReferenceGenome",null),ne([i.computed],ue.prototype,"alterationTypesInOQL",null),ne([i.computed],ue.prototype,"submitError",null),ne([i.computed],ue.prototype,"downloadDataFilename",null),ne([i.action],ue.prototype,"setParamsFromUrl",null),ne([i.action],ue.prototype,"setParamsFromLocalStorage",null),ne([i.action],ue.prototype,"selectCancerType",null),ne([i.action],ue.prototype,"setSearchText",null),ne([i.action],ue.prototype,"clearSelectedCancerType",null),ne([i.action],ue.prototype,"selectMolecularProfile",null),ne([i.action],ue.prototype,"replaceGene",null),ne([i.action],ue.prototype,"replaceGeneset",null),ne([i.action],ue.prototype,"applyGeneSelection",null),ne([i.action],ue.prototype,"addToGenesetSelection",null),ne([i.action],ue.prototype,"applyGenesetSelection",null),ne([i.action],ue.prototype,"submit",null),ne([i.action],ue.prototype,"openSummary",null),ne([f.cached],ue.prototype,"molecularProfilesInStudyCache",null),ne([f.cached],ue.prototype,"sampleListsInStudyCache",null);var ce=Object(v.a)(ue)},,function(e,t,n){"use strict";function r(e){try{return h.insertRule(e,h.cssRules.length)}catch(e){console.warn("react-reveal - animation failed")}}function o(){c||(t.globalHide=c=!0,window.removeEventListener("scroll",o,!0),r("."+i+" { opacity: 0; }"),window.removeEventListener("orientationchange",o,!0),window.document.removeEventListener("visibilitychange",o))}Object.defineProperty(t,"__esModule",{value:!0}),t.insertRule=r,t.cascade=function(e,t,n,r,o){var i=Math.log(r),a=(Math.log(o)-i)/(n-t);return Math.exp(i+a*(e-t))},t.animation=function(e){if(!h)return"";var t="@keyframes "+(m+d)+"{"+e+"}",n=f[e];return n?""+m+n:(h.insertRule(t,h.cssRules.length),f[e]=d,""+m+d++)},t.hideAll=o,t.default=function(e){var n=e.ssrFadeout;t.fadeOutEnabled=n};var i=t.namespace="react-reveal",a=(t.defaults={duration:1e3,delay:0,count:1},t.ssr=!0),s=t.observerMode=!1,l=t.raf=function(e){return window.setTimeout(e,66)},u=t.disableSsr=function(){return t.ssr=a=!1},c=(t.fadeOutEnabled=!1,t.ssrFadeout=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t.fadeOutEnabled=e},t.globalHide=!1),p=(t.ie10=!1,t.collapseend=void 0),d=1,f={},h=!1,m=i+"-"+Math.floor(1e15*Math.random())+"-";if("undefined"!=typeof window&&"nodejs"!==window.name&&window.document&&"undefined"!=typeof navigator){t.observerMode=s="IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype&&/\{\s*\[native code\]\s*\}/.test(""+IntersectionObserver),t.raf=l=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||l,t.ssr=a=window.document.querySelectorAll("div[data-reactroot]").length>0,-1!==navigator.appVersion.indexOf("MSIE 10")&&(t.ie10=!0),a&&"performance"in window&&"timing"in window.performance&&"domContentLoadedEventEnd"in window.performance.timing&&window.performance.timing.domLoading&&Date.now()-window.performance.timing.domLoading<300&&(t.ssr=a=!1),a&&window.setTimeout(u,1500),s||(t.collapseend=p=document.createEvent("Event"),p.initEvent("collapseend",!0,!0));var y=document.createElement("style");document.head.appendChild(y),y.sheet&&y.sheet.cssRules&&y.sheet.insertRule&&(h=y.sheet,window.addEventListener("scroll",o,!0),window.addEventListener("orientationchange",o,!0),window.document.addEventListener("visibilitychange",o))}},function(e,t,n){"use strict";n.r(t);var r="http://www.w3.org/1999/xhtml",o={svg:"http://www.w3.org/2000/svg",xhtml:r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},i=function(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),o.hasOwnProperty(t)?{space:o[t],local:e}:e};var a=function(e){var t=i(e);return(t.local?function(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}:function(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===r&&t.documentElement.namespaceURI===r?t.createElement(e):t.createElementNS(n,e)}})(t)};function s(){}var l=function(e){return null==e?s:function(){return this.querySelector(e)}};function u(){return[]}var c=function(e){return null==e?u:function(){return this.querySelectorAll(e)}},p=function(e){return function(){return this.matches(e)}},d=function(e){return new Array(e.length)};function f(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}f.prototype={constructor:f,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var h="$";function m(e,t,n,r,o,i){for(var a,s=0,l=t.length,u=i.length;s<u;++s)(a=t[s])?(a.__data__=i[s],r[s]=a):n[s]=new f(e,i[s]);for(;s<l;++s)(a=t[s])&&(o[s]=a)}function y(e,t,n,r,o,i,a){var s,l,u,c={},p=t.length,d=i.length,m=new Array(p);for(s=0;s<p;++s)(l=t[s])&&(m[s]=u=h+a.call(l,l.__data__,s,t),u in c?o[s]=l:c[u]=l);for(s=0;s<d;++s)(l=c[u=h+a.call(e,i[s],s,i)])?(r[s]=l,l.__data__=i[s],c[u]=null):n[s]=new f(e,i[s]);for(s=0;s<p;++s)(l=t[s])&&c[m[s]]===l&&(o[s]=l)}function g(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}var b=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView};function v(e,t){return e.style.getPropertyValue(t)||b(e).getComputedStyle(e,null).getPropertyValue(t)}function _(e){return e.trim().split(/^|\s+/)}function S(e){return e.classList||new E(e)}function E(e){this._node=e,this._names=_(e.getAttribute("class")||"")}function w(e,t){for(var n=S(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function O(e,t){for(var n=S(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}E.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function C(){this.textContent=""}function k(){this.innerHTML=""}function T(){this.nextSibling&&this.parentNode.appendChild(this)}function P(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function x(){return null}function A(){var e=this.parentNode;e&&e.removeChild(this)}function j(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function I(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}var N={},M=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(N={mouseenter:"mouseover",mouseleave:"mouseout"}));function D(e,t,n){return e=R(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function R(e,t,n){return function(r){var o=M;M=r;try{e.call(this,this.__data__,t,n)}finally{M=o}}}function L(e){return function(){var t=this.__on;if(t){for(var n,r=0,o=-1,i=t.length;r<i;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++o]=n:this.removeEventListener(n.type,n.listener,n.capture);++o?t.length=o:delete this.__on}}}function G(e,t,n){var r=N.hasOwnProperty(e.type)?D:R;return function(o,i,a){var s,l=this.__on,u=r(t,i,a);if(l)for(var c=0,p=l.length;c<p;++c)if((s=l[c]).type===e.type&&s.name===e.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=u,s.capture=n),void(s.value=t);this.addEventListener(e.type,u,n),s={type:e.type,name:e.name,value:t,listener:u,capture:n},l?l.push(s):this.__on=[s]}}function V(e,t,n,r){var o=M;e.sourceEvent=M,M=e;try{return t.apply(n,r)}finally{M=o}}function B(e,t,n){var r=b(e),o=r.CustomEvent;"function"==typeof o?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}var F=[null];function H(e,t){this._groups=e,this._parents=t}function U(){return new H([[document.documentElement]],F)}H.prototype=U.prototype={constructor:H,select:function(e){"function"!=typeof e&&(e=l(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i,a,s=t[o],u=s.length,c=r[o]=new Array(u),p=0;p<u;++p)(i=s[p])&&(a=e.call(i,i.__data__,p,s))&&("__data__"in i&&(a.__data__=i.__data__),c[p]=a);return new H(r,this._parents)},selectAll:function(e){"function"!=typeof e&&(e=c(e));for(var t=this._groups,n=t.length,r=[],o=[],i=0;i<n;++i)for(var a,s=t[i],l=s.length,u=0;u<l;++u)(a=s[u])&&(r.push(e.call(a,a.__data__,u,s)),o.push(a));return new H(r,o)},filter:function(e){"function"!=typeof e&&(e=p(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i,a=t[o],s=a.length,l=r[o]=[],u=0;u<s;++u)(i=a[u])&&e.call(i,i.__data__,u,a)&&l.push(i);return new H(r,this._parents)},data:function(e,t){if(!e)return h=new Array(this.size()),c=-1,this.each(function(e){h[++c]=e}),h;var n,r=t?y:m,o=this._parents,i=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var a=i.length,s=new Array(a),l=new Array(a),u=new Array(a),c=0;c<a;++c){var p=o[c],d=i[c],f=d.length,h=e.call(p,p&&p.__data__,c,o),g=h.length,b=l[c]=new Array(g),v=s[c]=new Array(g);r(p,d,b,v,u[c]=new Array(f),h,t);for(var _,S,E=0,w=0;E<g;++E)if(_=b[E]){for(E>=w&&(w=E+1);!(S=v[w])&&++w<g;);_._next=S||null}}return(s=new H(s,o))._enter=l,s._exit=u,s},enter:function(){return new H(this._enter||this._groups.map(d),this._parents)},exit:function(){return new H(this._exit||this._groups.map(d),this._parents)},join:function(e,t,n){var r=this.enter(),o=this,i=this.exit();return r="function"==typeof e?e(r):r.append(e+""),null!=t&&(o=t(o)),null==n?i.remove():n(i),r&&o?r.merge(o).order():o},merge:function(e){for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),a=new Array(r),s=0;s<i;++s)for(var l,u=t[s],c=n[s],p=u.length,d=a[s]=new Array(p),f=0;f<p;++f)(l=u[f]||c[f])&&(d[f]=l);for(;s<r;++s)a[s]=t[s];return new H(a,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,o=e[t],i=o.length-1,a=o[i];--i>=0;)(r=o[i])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=g);for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var a,s=n[i],l=s.length,u=o[i]=new Array(l),c=0;c<l;++c)(a=s[c])&&(u[c]=a);u.sort(t)}return new H(o,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length;o<i;++o){var a=r[o];if(a)return a}return null},size:function(){var e=0;return this.each(function(){++e}),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o,i=t[n],a=0,s=i.length;a<s;++a)(o=i[a])&&e.call(o,o.__data__,a,i);return this},attr:function(e,t){var n=i(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}}:"function"==typeof t?n.local?function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}:function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}:n.local?function(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}:function(e,t){return function(){this.setAttribute(e,t)}})(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?function(e){return function(){this.style.removeProperty(e)}}:"function"==typeof t?function(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}:function(e,t,n){return function(){this.style.setProperty(e,t,n)}})(e,t,null==n?"":n)):v(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?function(e){return function(){delete this[e]}}:"function"==typeof t?function(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}:function(e,t){return function(){this[e]=t}})(e,t)):this.node()[e]},classed:function(e,t){var n=_(e+"");if(arguments.length<2){for(var r=S(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each(("function"==typeof t?function(e,t){return function(){(t.apply(this,arguments)?w:O)(this,e)}}:t?function(e){return function(){w(this,e)}}:function(e){return function(){O(this,e)}})(n,t))},text:function(e){return arguments.length?this.each(null==e?C:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(e){return function(){this.textContent=e}})(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?k:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(e){return function(){this.innerHTML=e}})(e)):this.node().innerHTML},raise:function(){return this.each(T)},lower:function(){return this.each(P)},append:function(e){var t="function"==typeof e?e:a(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:a(e),r=null==t?x:"function"==typeof t?t:l(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(A)},clone:function(e){return this.select(e?I:j)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,o,i=function(e){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}(e+""),a=i.length;if(!(arguments.length<2)){for(s=t?G:L,null==n&&(n=!1),r=0;r<a;++r)this.each(s(i[r],t,n));return this}var s=this.node().__on;if(s)for(var l,u=0,c=s.length;u<c;++u)for(r=0,l=s[u];r<a;++r)if((o=i[r]).type===l.type&&o.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?function(e,t){return function(){return B(this,e,t.apply(this,arguments))}}:function(e,t){return function(){return B(this,e,t)}})(e,t))}};var W=U,q=function(e){return"string"==typeof e?new H([[document.querySelector(e)]],[document.documentElement]):new H([[e]],F)},z=function(e){return q(a(e).call(document.documentElement))},Q=0;function K(){return new Y}function Y(){this._="@"+(++Q).toString(36)}Y.prototype=K.prototype={constructor:Y,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};var X=function(){for(var e,t=M;e=t.sourceEvent;)t=e;return t},Z=function(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}var o=e.getBoundingClientRect();return[t.clientX-o.left-e.clientLeft,t.clientY-o.top-e.clientTop]},J=function(e){var t=X();return t.changedTouches&&(t=t.changedTouches[0]),Z(e,t)},$=function(e){return"string"==typeof e?new H([document.querySelectorAll(e)],[document.documentElement]):new H([null==e?[]:e],F)},ee=function(e,t,n){arguments.length<3&&(n=t,t=X().changedTouches);for(var r,o=0,i=t?t.length:0;o<i;++o)if((r=t[o]).identifier===n)return Z(e,r);return null},te=function(e,t){null==t&&(t=X().touches);for(var n=0,r=t?t.length:0,o=new Array(r);n<r;++n)o[n]=Z(e,t[n]);return o};n.d(t,"create",function(){return z}),n.d(t,"creator",function(){return a}),n.d(t,"local",function(){return K}),n.d(t,"matcher",function(){return p}),n.d(t,"mouse",function(){return J}),n.d(t,"namespace",function(){return i}),n.d(t,"namespaces",function(){return o}),n.d(t,"clientPoint",function(){return Z}),n.d(t,"select",function(){return q}),n.d(t,"selectAll",function(){return $}),n.d(t,"selection",function(){return W}),n.d(t,"selector",function(){return l}),n.d(t,"selectorAll",function(){return c}),n.d(t,"style",function(){return v}),n.d(t,"touch",function(){return ee}),n.d(t,"touches",function(){return te}),n.d(t,"window",function(){return b}),n.d(t,"event",function(){return M}),n.d(t,"customEvent",function(){return V})},function(e,t,n){"use strict";n.d(t,"a",function(){return E}),n.d(t,"b",function(){return w});var r=n(0),o=n(1),i=n(5),a=n.n(i),s=(n(828),n(6)),l=n(66),u=n(2),c=n(9),p=n(819);function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}function m(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var _=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":v(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},S=function(e){function t(){var e;return d(this,t),(e=m(this,y(t).apply(this,arguments))).renderedOnce=!1,e}return g(t,r["Component"]),h(t,[{key:"render",value:function(){var e=this;return this.renderedOnce||setTimeout(function(){return e.renderedOnce=!0}),r.createElement("div",{className:this.props.className},this.renderedOnce&&this.props.children,!this.renderedOnce&&(this.props.loadingState||null))}}]),t}();_([u.observable],S.prototype,"renderedOnce",void 0),S=_([c.observer],S);var E=function(e){function t(){return d(this,t),m(this,y(t).apply(this,arguments))}return g(t,r["Component"]),h(t,[{key:"componentDidMount",value:function(){this.props.onTabDidMount&&this.props.onTabDidMount(this.div)}},{key:"componentWillUnmount",value:function(){this.props.onTabUnmount&&this.props.onTabUnmount(this.div)}},{key:"assignRef",value:function(e){this.div=e}},{key:"render",value:function(){var e=this;return r.createElement("div",{ref:function(t){return e.div=t},className:a()({"msk-tab":!0,hiddenByPosition:!!this.props.inactive},this.props.className)},this.props.children)}}]),t}();_([s.default],E.prototype,"assignRef",null);var w=function(e){function t(e){var n;return d(this,t),(n=m(this,y(t).call(this,e))).shownTabs=[],n.tabRefs=[],n.tabIdToNavTabWidth={},n.needToRecomputeNavTabWidths=!0,n.tabClickHandlers=Object(p.a)(function(e,t){e.preventDefault(),n.setActiveTab(t.id,t.datum)}),n.state={currentPage:1,pageBreaks:[]},n}return g(t,r["Component"]),h(t,[{key:"cloneTab",value:function(e,t,n){return n?r.cloneElement(e,{inactive:t},this.props.loadingComponent):r.cloneElement(e,{inactive:t})}},{key:"setActiveTab",value:function(e,t){this.props.onTabClick&&this.props.onTabClick(e,t)}},{key:"navTabsRefHandler",value:function(e){this.navTabsRef=e}},{key:"tabRefHandler",value:function(e,t){e&&t&&this.tabRefs.push({id:e,element:t})}},{key:"nextPage",value:function(){this.setState({currentPage:this.state.currentPage+1})}},{key:"prevPage",value:function(){this.setState({currentPage:this.state.currentPage-1})}},{key:"render",value:function(){var e=this;if(this.props.children&&r.Children.count(this.props.children)){var t,n=this.props.children,i=r.Children.toArray(n),s=e.props.activeTabId&&o.some(i,function(t){return t.props.id===e.props.activeTabId})?e.props.activeTabId:i[0].props.id;return t=o.reduce(i,function(t,n){return n.props.hide||(n.props.id===s?(e.shownTabs.push(n.props.id),t.push(e.cloneTab(n,!1))):(!1===n.props.unmountOnHide||void 0===n.props.unmountOnHide&&!1===e.props.unmountOnHide)&&o.includes(e.shownTabs,n.props.id)&&t.push(e.cloneTab(n,!0))),t},[]),r.createElement("div",{id:this.props.id?this.props.id:"",className:a()("msk-tabs","posRelative",this.props.className)},this.navTabs(n,s),r.createElement(S,{className:"tab-content",loadingState:r.createElement(l.a,{isLoading:!0,center:!0,size:"big"})},t))}return null}},{key:"navTabs",value:function(e,t){this.tabRefs=[];var n=this.tabPages(e,t),o=this.state.pageBreaks.length+1,i=this.state.currentPage>1?r.createElement("li",{key:"prevPage",style:{cursor:"pointer"}},r.createElement("a",{onClick:this.prevPage.bind(this)},r.createElement("i",{className:"fa fa-chevron-left",style:this.props.arrowStyle}))):null,s=this.state.currentPage<o?r.createElement("li",{key:"nextPage",style:{cursor:"pointer"}},r.createElement("a",{onClick:this.nextPage.bind(this)},r.createElement("i",{className:"fa fa-chevron-right",style:this.props.arrowStyle}))):null,l=this.props.tabButtonStyle||"tabs";return r.createElement("ul",{ref:this.navTabsRefHandler.bind(this),className:a()("nav","nav-".concat(l))},i,n[this.state.currentPage-1],s)}},{key:"tabPages",value:function(e,t){var n=this,o=[[]],i=1;return r.Children.forEach(e,function(e){if(e&&!e.props.hide){var s=t===e.props.id?"active":"";n.props.getPaginationWidth&&n.state.pageBreaks.length>0&&n.state.pageBreaks[i-1]===e.props.id&&(o[++i-1]=[]);var l=null;if(e.props.onClickClose){var u=e.props.onClickClose;l=r.createElement("div",{className:"closeButton",onClick:function(t){t.stopPropagation(),u(e.props.id)}},r.createElement("i",{className:"fa fa-md fa-times-circle"}))}o[i-1].push(r.createElement("li",{key:e.props.id,style:{cursor:"pointer"},ref:n.tabRefHandler.bind(n,e.props.id),className:s},r.createElement("a",{className:a()("tabAnchor","tabAnchor_".concat(e.props.id),e.props.anchorClassName),onClick:n.tabClickHandlers(e.props),href:n.props.getTabHref&&n.props.getTabHref(e.props.id),style:e.props.anchorStyle},e.props.linkText,l)))}}),o}},{key:"componentWillReceiveProps",value:function(e){o.isEqual(t.getVisibleTabIds(e.children),t.getVisibleTabIds(this.props.children))||(this.needToRecomputeNavTabWidths=!0)}},{key:"componentDidMount",value:function(){var e=this;this.computeNavTabWidths(),this.needToRecomputeNavTabWidths=!1,this.widthReaction=Object(u.autorun)(function(){e.props.getPaginationWidth&&(e.props.getPaginationWidth(),e.initPaging())})}},{key:"componentWillUnmount",value:function(){this.widthReaction()}},{key:"componentDidUpdate",value:function(){this.needToRecomputeNavTabWidths&&(this.computeNavTabWidths(),this.needToRecomputeNavTabWidths=!1,this.initPaging())}},{key:"computeNavTabWidths",value:function(){var e=this;o.each(this.tabRefs,function(t){e.tabIdToNavTabWidth[t.id]=t.element.offsetWidth}),window.test=this.tabIdToNavTabWidth}},{key:"initPaging",value:function(){if(this.props.getPaginationWidth){var e=this.findPageBreaks(),t=this.findCurrentPage(e);this.setState({currentPage:t,pageBreaks:e})}}},{key:"findCurrentPage",value:function(e){var t=this,n=1,r=!1;return this.props.activeTabId&&e.length>0&&o.each(this.tabRefs,function(o){if(o.id===e[n-1]&&n++,o.id===t.props.activeTabId)return r=!0,!1}),r?n:1}},{key:"findPageBreaks",value:function(){var e=this,t=[];if(this.needToRecomputeNavTabWidths)return[];var n=this.props.getPaginationWidth&&this.props.getPaginationWidth()||0;if(n>0){var o=0;r.Children.forEach(this.props.children,function(r,i){if(r&&r.props.id in e.tabIdToNavTabWidth&&(o+=e.tabIdToNavTabWidth[r.props.id],0!==i)){o>n-50&&(t.push(r.props.id),o=e.tabIdToNavTabWidth[r.props.id])}})}return t}}],[{key:"getVisibleTabIds",value:function(e){return r.Children.map(e,function(e){return e&&!e.props.hide?e.props.id:null}).filter(function(e){return null!==e})}}]),t}();w.defaultProps={unmountOnHide:!0,loadingComponent:r.createElement(l.a,{isLoading:!0,center:!0,size:"big"})},_([s.default],w.prototype,"initPaging",null)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(e,t,n,r){return"in"in e&&(e.when=e.in),i.default.Children.count(r)<2?i.default.createElement(a.default,o({},e,{inEffect:t,outEffect:n,children:r})):(r=i.default.Children.map(r,function(r){return i.default.createElement(a.default,o({},e,{inEffect:t,outEffect:n,children:r}))}),"Fragment"in i.default?i.default.createElement(i.default.Fragment,null,r):i.default.createElement("span",null,r))};var i=r(n(0)),a=r(n(1048));e.exports=t.default},,,function(e,t,n){e.exports={portalWidth:"tables-module__portalWidth__2u2eA",framedImage:"tables-module__framedImage__2sdMG",studyViewTablesTable:"tables-module__studyViewTablesTable__29Y2_",tableSearchInput:"tables-module__tableSearchInput__2uOMk",labelContent:"tables-module__labelContent__2FLsJ",labelContentSVG:"tables-module__labelContentSVG__2v71D",controls:"tables-module__controls__2KTG_",controlsAtTop:"tables-module__controlsAtTop__czH5v",controlsBtn:"tables-module__controlsBtn__24B4k",geneSymbol:"tables-module__geneSymbol__1OUGZ",cancerGene:"tables-module__cancerGene__CqmRo",headerColumn:"tables-module__headerColumn__WCJTO",headerRow:"tables-module__headerRow__3Ckx0",row:"tables-module__row__20ZyT",oddRow:"tables-module__oddRow__3vz4c",evenRow:"tables-module__evenRow__KCskI",highlightedEvenRow:"tables-module__highlightedEvenRow__2EYSy",highlightedRow:"tables-module__highlightedRow__1wuhn",highlightedOddRow:"tables-module__highlightedOddRow__1RWUf",cancerGeneIcon:"tables-module__cancerGeneIcon__1Zp6i",gistic:"tables-module__gistic__1d6Gl",mutsig:"tables-module__mutsig__3Q3o0",cancerGenesRow:"tables-module__cancerGenesRow__1crxh",amp:"tables-module__amp__yRy0o",del:"tables-module__del__PLU6Y",displayFlex:"tables-module__displayFlex__7WOab",headerSortingIcon:"tables-module__headerSortingIcon__1aRye",autoMarginCheckbox:"tables-module__autoMarginCheckbox__3tMQV",union:"tables-module__union__3dOlj",intersection:"tables-module__intersection__2qPMu"}},function(e,t,n){"use strict";n.d(t,"b",function(){return v}),n.d(t,"a",function(){return _});var r=n(0),o=n(1016),i=n.n(o),a=n(5),s=n.n(a);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function d(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var g=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function b(e,t){var n=e.padded,o=e.overflow,a=e.flex,l=g(e,["padded","overflow","flex"]),u=Object.assign(Object.assign({flex:a,display:"flex",overflow:o?"visible":"auto"},e.style),{flexDirection:t}),c=s()(e.className,i.a[t],n&&i.a.padded);return r.createElement("div",y({},l,{style:u,className:c}))}var v=function(e){function t(){return u(this,t),d(this,f(t).apply(this,arguments))}return h(t,r["Component"]),p(t,[{key:"render",value:function(){return b(this.props,"row")}}]),t}(),_=function(e){function t(){return u(this,t),d(this,f(t).apply(this,arguments))}return h(t,r["Component"]),p(t,[{key:"render",value:function(){return b(this.props,"column")}}]),t}()},function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(1024),a=n.n(i),s=n(5),l=n.n(s),u=n(794),c=n.n(u),p=n(1025),d=n.n(p);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},_=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),y(this,g(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.error,n=e.children,o=e.className,i=v(e,["error","children","className"]);return r.createElement("div",h({className:l()(o,d.a.error)},i),r.createElement("span",{className:d.a.message},r.createElement(c.a,{className:d.a.icon,name:"exclamation-circle"}),t.message+""),n)}}])&&m(n.prototype,o),i&&m(n,i),t}(),S=n(66);function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var P=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":T(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},x=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},A=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),O(this,C(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.promises,n=e.children,o=e.className,i=e.secondaryComponent,s=x(e,["promises","children","className","secondaryComponent"]);return r.createElement("div",E({className:l()(o,a.a.SectionHeader)},s),r.createElement("h2",null,n,!(!t||!t.some(function(e){return e.isPending}))&&r.createElement(S.a,{isLoading:!0,size:"small"})),!!i&&i,t&&t.map(function(e){return!!e.error&&r.createElement(_,{className:a.a.error,error:e.error})}))}}])&&w(n.prototype,o),i&&w(n,i),t}();A=P([o.observer],A);t.a=A},function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__1kueS",framedImage:"styles-module__framedImage__1ndwn",SurvivalTable:"styles-module__SurvivalTable__2NKCT",Tooltip:"styles-module__Tooltip__1I-Ty",NotAvailable:"styles-module__NotAvailable__1Zx5R",XmaxNumberInput:"styles-module__XmaxNumberInput__SQsf6"}},function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(2),a=n(56),s=n.n(a),l=n(6),u=n(149),c=n(128);function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var y=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":m(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,f(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement(u.default,{name:this.props.name,value:this.props.value,onChange:this.props.onChange,options:Object(c.c)(this.props.molecularProfiles),searchable:!1,clearable:!1,className:this.props.className})}}])&&p(n.prototype,o),i&&p(n,i),t}(),b=g=y([o.observer],g),v=n(1),_=n.n(v);function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var k=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":C(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},T=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),E(this,w(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,r["Component"]),n=t,(o=[{key:"change",value:function(e,t){var n=this,r=_.a.mapValues(this.props.selectedProfileByStudyId,function(r,o){return e===o?n.molecularProfileMap[t.value]:n.molecularProfileMap[r.molecularProfileId]});_.a.isEqual(this.props.selectedProfileByStudyId,r)||this.props.onChange(r)}},{key:"render",value:function(){var e=this;if(this.showEnrichmentsDataSetDropdown||this.props.alwaysShow){var t=_.a.groupBy(this.props.dataSets,function(e){return e.studyId}),n=Object.keys(t).length>1;return _.a.map(t,function(t,o){return r.createElement("div",{className:s.a.DataSet},r.createElement("div",{style:{display:"flex",alignItems:"center"}},r.createElement("strong",null,n?e.studiesMap[o].name+" ":"","Data Set:"),r.createElement("div",{style:{display:"inline-block",marginLeft:5,width:400}},r.createElement(b,{value:e.props.selectedProfileByStudyId[o].molecularProfileId,molecularProfiles:t,onChange:function(t){return e.change(o,t)}}))))})}return null}},{key:"studiesMap",get:function(){return _.a.keyBy(this.props.studies,function(e){return e.studyId})}},{key:"molecularProfileMap",get:function(){return _.a.keyBy(this.props.dataSets,function(e){return e.molecularProfileId})}},{key:"showEnrichmentsDataSetDropdown",get:function(){var e=_.a.groupBy(this.props.dataSets,function(e){return e.studyId});return _.a.some(e,function(e){return e.length>1})}}])&&S(n.prototype,o),i&&S(n,i),t}();k([l.default],T.prototype,"change",null),k([i.computed],T.prototype,"studiesMap",null),k([i.computed],T.prototype,"molecularProfileMap",null),k([i.computed],T.prototype,"showEnrichmentsDataSetDropdown",null),T=k([o.observer],T);t.a=T},function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__2znIn",framedImage:"styles-module__framedImage__O2nI5",comparisonGroupManager:"styles-module__comparisonGroupManager__1QgCD",groupCheckboxes:"styles-module__groupCheckboxes__3LVqM",markedForDeletion:"styles-module__markedForDeletion__pyY8L",groupRow:"styles-module__groupRow__3thKt",groupItem:"styles-module__groupItem__20g60",groupButtons:"styles-module__groupButtons__YPSq0",buttonUnselected:"styles-module__buttonUnselected__bzlCr",buttonExcludedFromAnalysis:"styles-module__buttonExcludedFromAnalysis__3YbrM",groupLineItemActionButtons:"styles-module__groupLineItemActionButtons__17aPl",sharedGroup:"styles-module__sharedGroup__3pyAe",headerControls:"styles-module__headerControls__2C_RI",survivalPlotHeaderContainer:"styles-module__survivalPlotHeaderContainer__3I3YW",survivalPlotHeader:"styles-module__survivalPlotHeader__qqK6C",survivalTypeOptions:"styles-module__survivalTypeOptions__1iLz-"}},,function(e,t,n){"use strict";var r=n(0),o=n(1),i=n(9),a=n(5),s=n.n(a),l=n(822),u=n.n(l),c=n(787),p=n.n(c),d=n(2),f=n(788),h=n(46);function m(e){try{return{query:e?Object(h.g)(e.trim().toUpperCase()):[],error:void 0}}catch(i){if("SyntaxError"!==i.name)return{query:[],error:{start:0,end:0,message:"Unexpected ".concat(i)}};var t,n,r,o=i.location.start.offset;return o===e.length?(t="after",n=o-1,r=o):0===o?(t="before",n=o,r=o+1):(t="at",n=o,r=o+1),{query:[],error:{start:n,end:r,message:"OQL syntax error ".concat(t," selected character; please fix and submit again.")}}}}n(830);var y=n(3),g=n(13),b=n(152),v=n.n(b),_=n(794),S=n.n(_),E=n(15);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var P=function(e){if(0==e.genes.length){return r.createElement("div",{className:u.a.suggestionBubble,title:"Could not find gene symbol. Click to remove it from the gene list.",onClick:function(){return e.replaceGene(e.alias,"")}},r.createElement(S.a,{className:u.a.icon,name:"times-circle"}),r.createElement("span",{className:u.a.noChoiceLabel},e.alias))}if(1==e.genes.length){var t=e.genes[0].hugoGeneSymbol,n="'".concat(e.alias,"' is a synonym for '").concat(t,"'. Click here to replace it with the official symbol.");return r.createElement("div",{className:u.a.suggestionBubble,title:n,onClick:function(){return e.replaceGene(e.alias,t)}},r.createElement(S.a,{className:u.a.icon,name:"question"}),r.createElement("span",{className:u.a.singleChoiceLabel},e.alias),r.createElement("span",null,": ".concat(t)))}var o="Ambiguous gene symbol. Click on one of the alternatives to replace it.",i=e.genes.map(function(e){return{label:e.hugoGeneSymbol,value:e.hugoGeneSymbol}});return r.createElement("div",{className:u.a.suggestionBubble,title:o},r.createElement(S.a,{className:u.a.icon,name:"question"}),r.createElement("span",{className:u.a.multiChoiceLabel},e.alias),r.createElement("span",null,":"," "),r.createElement(E.DropdownButton,{bsStyle:o.toLowerCase(),bsSize:"xsmall",title:"Select symbol",id:"geneReplace_".concat(e.alias)},i.map(function(t,n){return r.createElement(E.MenuItem,{onClick:function(){e.replaceGene(e.alias,t.value)},eventKey:n+1},t.label)})))},x=function(e){if(e.oql instanceof Error)return r.createElement("div",{className:u.a.GeneSymbolValidator},r.createElement("span",{className:u.a.errorMessage},"Cannot validate gene symbols because of invalid OQL.","  ",r.createElement("a",{className:"underline",onMouseDown:function(t){t.preventDefault(),e.highlightError()}},"Click to highlight error")));if(0===e.oql.query.length)return null;if(!e.errorMessageOnly&&e.validatingGenes)return r.createElement("div",{className:u.a.GeneSymbolValidator},r.createElement("span",{className:u.a.pendingMessage},"Validating gene symbols..."));if(e.genes instanceof Error)return r.createElement("div",{className:u.a.GeneSymbolValidator},r.createElement("span",{className:u.a.pendingMessage},"Unable to validate gene symbols."));if(e.genes.suggestions.length>0)return r.createElement("div",{className:u.a.GeneSymbolValidator},r.createElement("div",{className:u.a.invalidBubble,title:"Please edit the gene symbols."},r.createElement(S.a,{className:u.a.icon,name:"exclamation-circle"}),r.createElement("span",null,"Invalid gene symbols.")),e.genes.suggestions.map(function(t,n){return r.createElement(P,{key:n,genes:t.genes,alias:t.alias,replaceGene:e.replaceGene})}));var t,n,i,a=o.groupBy(e.genes.found,function(e){return e.hugoGeneSymbol}),l=o.reduce(a,function(e,t,n){return t.length>1&&e.push(n),e},[]);return l.length>0?r.createElement("div",{className:u.a.GeneSymbolValidator},r.createElement("div",{className:u.a.invalidBubble,title:"Please edit the gene symbols."},r.createElement(S.a,{className:u.a.icon,name:"exclamation-circle"}),r.createElement("span",null,"The portal does not currently support the following gene(s):")),l.map(function(t,n){return r.createElement(P,{key:n,genes:[],alias:t,replaceGene:e.replaceGene})})):e.errorMessageOnly?null:r.createElement("div",{className:s()(u.a.GeneSymbolValidator,(t={},n=u.a.nowrap,i=!e.wrapTheContent,n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t))},r.createElement("div",{className:u.a.validBubble,title:"You can now submit the list."},r.createElement(S.a,{className:u.a.icon,name:"check-circle"}),r.createElement("span",null,"All gene symbols are valid.")))},A=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),C(this,k(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return this.props.children?r.createElement("div",{id:"wideGeneBoxValidationStatus"},this.props.children):r.createElement("div",{id:"geneBoxValidationStatus"},r.createElement(x,this.props))}}])&&O(n.prototype,o),i&&O(n,i),t}();function j(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var G=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},V=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};function B(e){return Number.isInteger(Number(e))}var F=function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=M(t).apply(this,arguments),(e=!r||"object"!==L(r)&&"function"!=typeof r?D(n):r).genes=Object(y.T)({invoke:function(){return V(D(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,i,a,s,l,u,c,p,d=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.geneIds.length){e.next=2;break}return e.abrupt("return",{found:[],suggestions:[]});case 2:return t=o.partition(o.uniq(this.geneIds),B),n=I(t,2),r=n[0],i=n[1],a=function(){return V(d,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,i,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.length){e.next=6;break}return e.next=3,g.a.fetchGenesUsingPOST({geneIdType:"ENTREZ_GENE_ID",geneIds:r});case 3:t=e.sent,e.next=7;break;case 6:t=[];case 7:return n=o.difference(r,t.map(function(e){return e.entrezGeneId+""})),i=n.map(function(e){return{alias:e,genes:[]}}),a=t.map(function(e){return{alias:e.entrezGeneId+"",genes:[e]}}),s=[].concat(j(i),j(a)),e.abrupt("return",{found:t,suggestions:s});case 12:case"end":return e.stop()}},e)}))},s=function(){return V(d,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.length){e.next=6;break}return e.next=3,g.a.fetchGenesUsingPOST({geneIdType:"HUGO_GENE_SYMBOL",geneIds:i});case 3:t=e.sent,e.next=7;break;case 6:t=[];case 7:return n=o.difference(i,t.map(function(e){return e.hugoGeneSymbol})),e.next=10,Promise.all(n.map(function(e){return a.getGeneSuggestions(e)}));case 10:return r=e.sent,e.abrupt("return",{found:t,suggestions:r});case 12:case"end":return e.stop()}},e)}))},e.next=7,Promise.all([a(),s()]);case 7:return l=e.sent,u=I(l,2),c=u[0],p=u[1],e.abrupt("return",{found:[].concat(j(c.found),j(p.found)),suggestions:[].concat(j(c.suggestions),j(p.suggestions))});case 12:case"end":return e.stop()}},e,this)}))},onResult:function(t){e.props.afterValidation&&e.props.afterValidation(0===t.suggestions.length,e.genes.result,e.oql)},default:{found:[],suggestions:[]}}),e}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(t,r["Component"]),n=t,(i=[{key:"getGeneSuggestions",value:function(e){return V(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,g.a.getAllGenesUsingGET({alias:e});case 3:return t.t1=t.sent,t.abrupt("return",{alias:t.t0,genes:t.t1});case 5:case"end":return t.stop()}},t)}))}},{key:"render",value:function(){var e=this;return this.props.skipGeneValidation&&this.props.afterValidation&&this.props.afterValidation(!0,{found:[],suggestions:[]},this.oql),r.createElement(A,{genes:this.props.skipGeneValidation?{found:[],suggestions:[]}:this.genes.isError?new Error("ERROR"):this.genes.result,highlightError:function(){e.props.highlightError&&e.props.highlightError(e.oql)},oql:this.oqlOrError,validatingGenes:!this.props.skipGeneValidation&&this.genes.isPending,errorMessageOnly:this.props.errorMessageOnly,wrapTheContent:this.props.wrap,replaceGene:this.props.replaceGene},this.props.children)}},{key:"oql",get:function(){return m(this.props.geneQuery)}},{key:"geneIds",get:function(){return this.oql.error?[]:this.oql.query.map(function(e){return e.gene})}},{key:"oqlOrError",get:function(){return this.oql.error?new Error("OQL error at character ".concat(this.oql.error.start)):this.oql}}])&&N(n.prototype,i),a&&N(n,a),t}();F.defaultProps={errorMessageOnly:!1},G([v.a],F.prototype,"getGeneSuggestions",null),G([d.computed],F.prototype,"oql",null),G([d.computed],F.prototype,"geneIds",null),G([d.computed],F.prototype,"oqlOrError",null);var H=F=G([i.observer],F),U=n(6),W=n(35),q=n.n(W);function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t){return!t||"object"!==X(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",function(){return Z});var Z,J=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":X(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.STUDY_VIEW_PAGE=1]="STUDY_VIEW_PAGE",e[e.ONCOPRINT_HEATMAP=2]="ONCOPRINT_HEATMAP"}(Z||(Z={}));var $=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Q(this,K(t).call(this,e))).currentTextAreaValue="",n._geneQuery="",n.geneQueryIsValid=!0,n.queryToBeValidated="",n.isFocused=!1,n.skipGenesValidation=!1,n.updateQueryToBeValidateDebounce=o.debounce(function(){n.queryToBeValidated=n.currentTextAreaValue,n.skipGenesValidation=!1,""===n.currentTextAreaValue&&(n.geneQuery="",n.props.callback&&n.props.callback(m(""),{found:[],suggestions:[]},n.geneQuery))},500),n.geneQuery=n.props.inputGeneQuery||"",n.queryToBeValidated=n.geneQuery,n.props.validateInputGeneQuery||(n.skipGenesValidation=!0),n.textAreaRef=r.createRef(),n}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(t,r["Component"]),n=t,(i=[{key:"componentDidMount",value:function(){var e=this;this.disposers=[Object(d.reaction)(function(){return e.props.inputGeneQuery},function(t){(t||"").toUpperCase()!==e.geneQuery.toUpperCase()&&(e.props.validateInputGeneQuery||(e.skipGenesValidation=!0),e.geneQuery=(t||"").trim(),e.queryToBeValidated=e.geneQuery),e.updateTextAreaRefValue()}),Object(d.reaction)(function(){return e.showFullText},function(){e.updateTextAreaRefValue()})]}},{key:"componentWillUnmount",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,o=this.disposers[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){(0,r.value)()}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}}},{key:"updateGeneQuery",value:function(e){this.geneQuery=e,this.queryToBeValidated=e,this.isFocused=!0,this.updateTextAreaRefValue()}},{key:"getTextAreaValue",value:function(){return this.showFullText?this.geneQuery:this.getFocusOutValue()}},{key:"updateTextAreaRefValue",value:function(){this.textAreaRef.current.value=this.getTextAreaValue()}},{key:"getFocusOutValue",value:function(){return function(e){var t="";if(e.length>0){t=e[0];for(var n=1;n<e.length;n++){if(t.length>13||t.length+e[n].length>13){t+=" and "+(e.length-n)+" more";break}t+=" "+e[n]}}return t}(m(this.geneQuery).query.map(function(e){return e.gene}))}},{key:"afterGeneSymbolValidation",value:function(e,t,n){this.geneQueryIsValid=e,this.props.callback&&this.props.callback(n,t,this.geneQuery)}},{key:"highlightError",value:function(e){this.textAreaRef.current.focus(),this.textAreaRef.current.setSelectionRange(e.error.start,e.error.end)}},{key:"onChange",value:function(e){this.currentTextAreaValue=e.currentTarget.value,this.geneQuery=this.currentTextAreaValue,this.updateQueryToBeValidateDebounce()}},{key:"onFocus",value:function(){this.isFocused=!0}},{key:"onBlur",value:function(){this.isFocused=!1}},{key:"replaceGene",value:function(e,t){var n=Object(f.e)(this.getTextAreaValue().toUpperCase().replace(new RegExp("\\b".concat(e.toUpperCase(),"\\b"),"g"),function(){return t.toUpperCase()}));this.updateGeneQuery(n)}},{key:"render",value:function(){return r.createElement("div",{className:u.a.genesSelection},r.createElement("div",{className:u.a.topRow},r.createElement("textarea",{ref:this.textAreaRef,onFocus:this.onFocus,onBlur:this.onBlur,className:s()(this.textAreaClasses),rows:5,cols:80,placeholder:this.promptText,title:this.promptText,defaultValue:this.getTextAreaValue(),onChange:this.onChange,"data-test":"geneSet",style:{height:this.props.textAreaHeight}}),this.props.submitButton),r.createElement("div",{className:"oqlValidationContainer"},r.createElement(H,{focus:this.props.focus,geneQuery:this.queryToBeValidated,skipGeneValidation:this.skipGenesValidation,updateGeneQuery:this.updateGeneQuery,afterValidation:this.afterGeneSymbolValidation,replaceGene:this.replaceGene,errorMessageOnly:this.props.location===Z.STUDY_VIEW_PAGE,highlightError:this.highlightError},this.props.children)),r.createElement("div",null,this.showErrorsAndMessages&&this.props.error&&r.createElement("span",{className:p.a.errorMessage,"data-test":"oqlErrorMessage"},this.props.error),this.showErrorsAndMessages&&this.props.messages&&this.props.messages.map(function(e){return r.createElement("span",{className:p.a.oqlMessage},r.createElement("i",{className:"fa fa-info-circle",style:{marginRight:5}}),e)})))}},{key:"geneQuery",get:function(){return this.queryStore?this.queryStore.geneQuery:this._geneQuery},set:function(e){this.queryStore?this.queryStore.geneQuery=e:this._geneQuery=e}},{key:"textAreaClasses",get:function(){var e=[];switch(this.props.location){case Z.STUDY_VIEW_PAGE:e.push(u.a.studyView),!this.isFocused&&this.geneQueryIsValid||e.push(u.a.studyViewFocus);break;case Z.ONCOPRINT_HEATMAP:e.push(u.a.oncoprintHeatmap);break;default:e.push(u.a.default)}return this.geneQuery||e.push(u.a.empty),e}},{key:"showFullText",get:function(){return!this.geneQueryIsValid||this.isFocused||this.props.location!==Z.STUDY_VIEW_PAGE}},{key:"promptText",get:function(){return this.props.textBoxPrompt?this.props.textBoxPrompt:"Click gene symbols below or enter here"}},{key:"showErrorsAndMessages",get:function(){return this.props.location!==Z.STUDY_VIEW_PAGE||this.isFocused}}])&&z(n.prototype,i),a&&z(n,a),t}();$.defaultProps={validateInputGeneQuery:!0},J([d.observable],$.prototype,"_geneQuery",void 0),J([d.computed],$.prototype,"geneQuery",null),J([d.observable],$.prototype,"geneQueryIsValid",void 0),J([d.observable],$.prototype,"queryToBeValidated",void 0),J([d.observable],$.prototype,"isFocused",void 0),J([d.observable],$.prototype,"skipGenesValidation",void 0),J([U.default,d.action],$.prototype,"updateGeneQuery",null),J([U.default,d.action],$.prototype,"updateTextAreaRefValue",null),J([d.computed],$.prototype,"textAreaClasses",null),J([d.computed],$.prototype,"showFullText",null),J([U.default,d.action],$.prototype,"afterGeneSymbolValidation",null),J([U.default],$.prototype,"highlightError",null),J([d.computed],$.prototype,"promptText",null),J([q.a],$.prototype,"onChange",null),J([q.a],$.prototype,"onFocus",null),J([q.a],$.prototype,"onBlur",null),J([q.a],$.prototype,"replaceGene",null),J([d.computed],$.prototype,"showErrorsAndMessages",null),$=J([i.observer],$);t.b=$},function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__1w8-Y",framedImage:"styles-module__framedImage__bM7JH","integer-data":"styles-module__integer-data__1Bn0H"}},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),o=n(19);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,l(t).apply(this,arguments))}var n,i,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["Component"]),n=t,(i=[{key:"render",value:function(){return r.createElement(o.b,{to:"/study?id=".concat(this.props.studyId),className:this.props.className},this.props.children)}}])&&a(n.prototype,i),c&&a(n,c),t}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterPropsFrom=function(e){e=e||{};var t={};for(var n in e)n in r||(t[n]=e[n]);return t};var r={hideTableHeader:!0,column:!0,columns:!0,sortable:!0,filterable:!0,filtering:!0,onFilter:!0,filterPlaceholder:!0,filterClassName:!0,currentFilter:!0,sort:!0,sortBy:!0,sortableColumns:!0,onSort:!0,defaultSort:!0,defaultSortDescending:!0,itemsPerPage:!0,filterBy:!0,hideFilterInput:!0,noDataText:!0,currentPage:!0,onPageChange:!0,previousPageLabel:!0,nextPageLabel:!0,pageButtonLimit:!0,childNode:!0,data:!0,children:!0}},function(e,t,n){"use strict";function r(e){return new Promise(function(t){return setTimeout(t,e)})}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3;return new Promise(function(r){var o=0,i=setInterval(function(){if(o+=t,e())clearInterval(i),r();else if(o>n)throw clearInterval(i),new Error("sleepUntil timeout")},t)})}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o})},,,function(e,t,n){"use strict";var r=n(0),o=n(20),i=(n(891),"https://oncokb.org");function a(){return r.createElement("a",{href:"".concat(i,"/cancerGenes"),target:"_blank"},"OncoKB Cancer Gene List")}var s,l,u=n(796),c=n.n(u),p=n(5),d=n.n(p),f=n(3),h=n(16),m=n(30),y=n(850);function g(e,t){return[e,Object(m.x)(t)].join(":")}function b(e){return e.split(":")[0]}function v(e,t,n,o,i){return r.createElement("div",{style:{marginLeft:e},className:c.a.displayFlex,"data-test":"gene-column-header"},n&&r.createElement(f.d,{mouseEnterDelay:0,placement:"top",overlay:S(o)},r.createElement("div",{onClick:i,className:c.a.displayFlex},function(e){return r.createElement("span",{"data-test":"cancer-gene-filter",className:d()(c.a.cancerGeneIcon,c.a.displayFlex),style:{color:e?h.o:h.n}},r.createElement("i",{className:"fa fa-filter"}))}(o))),t)}function _(e,t,n,s,l,u){return r.createElement("div",{style:{display:"flex",flexDirection:"column",maxWidth:300,fontSize:12}},r.createElement("span",null,function(e,t,n,s,l){if(t){var u="";if(s||l){u=" as a ";var c=[];s&&c.push("oncogene"),l&&c.push("tumor suppressor gene"),u="".concat(u," ").concat(c.join(" and "))}return r.createElement("span",null,r.createElement(o.If,{condition:n},r.createElement(o.Then,null,r.createElement("a",{href:"".concat(i,"/gene/").concat(e),target:"_blank"},e)),r.createElement(o.Else,null,r.createElement("span",null,e))),r.createElement("span",null," is included in the "),a(),(s||l)&&r.createElement("span",null,u),".")}}(e,n,s,l,u)))}function S(e){return e?r.createElement("span",null,"Filtered by ",a(),". Click to show all genes."):r.createElement("span",null,"Showing all genes. Click to filter by"," ",a(),".")}function E(e,t,n,o,i,a){var s="# of samples profiled";"data"!==e&&(s+=" for ".concat(e," in this gene: ").concat(t.toLocaleString()));return r.createElement(f.d,{placement:"right",overlay:function(){return r.createElement("span",{style:{display:"flex",flexDirection:"column"},"data-test":"freq-cell-tooltip"},r.createElement("span",null,s),r.createElement(y.a,{genePanelIds:o,toggleModal:i}))},destroyTooltipOnHide:!0},r.createElement("span",{"data-test":"freq-cell",style:a},Object(m.O)(n/t*100)))}function w(e,t){var n="".concat(t?"Percentage":"Number"," of samples");return"data"!==e&&(n+=" with one or more ".concat(e)),n}n.d(t,"d",function(){return g}),n.d(t,"g",function(){return b}),n.d(t,"f",function(){return v}),n.d(t,"e",function(){return _}),n.d(t,"a",function(){return s}),n.d(t,"b",function(){return l}),n.d(t,"c",function(){return E}),n.d(t,"h",function(){return w}),function(e){e.MUTATION="mutations",e.FUSION="fusions",e.CNA="copy number alterations",e.DATA="data"}(s||(s={})),function(e){e.INTERSECTION="Intersection",e.UNION="Union"}(l||(l={}))},function(e,t,n){e.exports={portalWidth:"annotation-module__portalWidth__1ONSd",framedImage:"annotation-module__framedImage__3aREl","annotation-item-text":"annotation-module__annotation-item-text__2FRXN","annotation-item-error":"annotation-module__annotation-item-error__1XUY_","annotation-item":"annotation-module__annotation-item__1YzCz"}},function(e,t,n){},function(e,t,n){"use strict";var r,o=n(0),i=n(96),a=n(1085),s=(n(1011),n(2)),l=n(796),u=n.n(l),c=n(1),p=n(9),d=n(5),f=n.n(d),h=n(20),m=n(6),y=n(303),g=n(3),b=n(151),v=n(810),_=n(15);function S(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t,n){return t&&w(e.prototype,t),n&&w(e,n),e}function C(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var j=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},I=(x(r={},"desc",a.b.DESC),x(r,"asc",a.b.ASC),r),N=function(e){function t(e,n){var r;return E(this,t),(r=C(this,k(t).call(this,e))).fixedTopRowsData=n,r}return T(t,b["a"]),O(t,[{key:"sortedData",get:function(){var e=this.sortMetric||function(){return 0},t=void 0===this.sortAscending||this.sortAscending;return[].concat(S(this.fixedTopRowsData),S(Object(i.c)(this.allData,e,t)))}}]),t}();j([s.computed],N.prototype,"sortedData",null);var M=function(e){function t(e){var n;E(this,t),(n=C(this,k(t).call(this,e)))._sortBy=e.sortBy;var r=c.find(n.props.columns,function(e){return e.name===n._sortBy});return n._sortDirection=void 0===e.sortDirection?c.isUndefined(r)?"desc":r.defaultSortDirection||"desc":e.sortDirection,n.initDataStore(),n}return T(t,o["Component"]),O(t,[{key:"componentWillReceiveProps",value:function(e){this.updateDataStore(e)}},{key:"updateDataStore",value:function(e){var t=this,n=new N(function(){return t.props.data},this.props.fixedTopRowsData||[]),r=Object(s.toJS)(this._store.filterString);this._store.setProps({columns:e.columns,dataStore:n,initialSortColumn:this._sortBy,initialSortDirection:this._sortDirection}),void 0!==r&&this._store.setFilterString(r)}},{key:"initDataStore",value:function(){var e=this,t=new N(function(){return e.props.data},this.props.fixedTopRowsData||[]);this._store=new i.a({columns:this.props.columns,dataStore:t,initialSortColumn:this._sortBy,initialSortDirection:this._sortDirection})}},{key:"rowClassName",value:function(e){var t=e.index;if(t>-1&&this.isSelectedRow(this._store.dataStore.sortedFilteredData[t])){var n=[u.a.row];if(this.props.highlightedRowClassName){var r=this.props.highlightedRowClassName(this._store.dataStore.sortedFilteredData[t]);n.push(r)}else n.push(u.a.highlightedRow);return f()(n)}return t<0?u.a.headerRow:f()(u.a.row,t%2==0?u.a.evenRow:u.a.oddRow)}},{key:"rowGetter",value:function(e){var t=e.index;return this._store.dataStore.sortedFilteredData[t]}},{key:"getColumn",value:function(e){return c.keyBy(this.props.columns,function(e){return e.name})[e]}},{key:"sort",value:function(e){var t=e.sortBy;this._store.defaultHeaderClick(this.getColumn(t)),this._sortBy=t,this._sortDirection=this._store.dataStore.sortAscending?"asc":"desc",this.props.afterSorting&&this.props.afterSorting(this._sortBy,this._sortDirection)}},{key:"onFilterTextChange",value:function(){var e=this;return Object(y.a)(function(t){e._store.setFilterString(t)},400)}},{key:"afterSelectingRows",value:function(){this.props.afterSelectingRows&&this.props.afterSelectingRows()}},{key:"changeSelectionType",value:function(e){this.props.toggleSelectionOperator&&this.props.defaultSelectionOperator!==e&&this.props.toggleSelectionOperator()}},{key:"isSelectedRow",value:function(e){return!!c.isFunction(this.props.isSelectedRow)&&this.props.isSelectedRow(e)}},{key:"onAddAll",value:function(){this.props.addAll&&this.props.addAll(this._store.dataStore.sortedFilteredData)}},{key:"onRemoveAll",value:function(){this.props.removeAll&&this.props.removeAll(this._store.dataStore.sortedFilteredData)}},{key:"setInputRef",value:function(e){this.inputElement=e}},{key:"componentDidMount",value:function(){!this.props.hideControls&&this.props.autoFocusSearchAfterRendering&&this.inputElement.focus()}},{key:"getSelectionOptions",value:function(){var e=this;return Object.keys(v.b).map(function(t){var n=v.b[t];return o.createElement(_.MenuItem,{onClick:function(){return e.changeSelectionType(n)},active:e.props.defaultSelectionOperator===t},o.createElement(g.d,{overlay:"".concat(n," of samples in the newly selected rows")},o.createElement("div",null,n," ",o.createElement("i",{className:u.a[n.toLowerCase()]}))))})}},{key:"getAddRemoveAllButton",value:function(){var e,t,n,r=!1;return this.props.numberOfSelectedRows===this.props.data.length&&this.props.removeAll?(e="fixed-header-table-remove-all",t=this.onRemoveAll,n="Deselect all",r=!0):this.props.addAll&&(e="fixed-header-table-add-all",t=this.onAddAll,n="Select all".concat(this.props.showSelectableNumber?" (".concat(this._store.dataStore.sortedFilteredData.length,")"):""),r=!0),r?o.createElement("button",{className:"btn btn-default btn-xs","data-test":e,onClick:t},n):null}},{key:"getControls",value:function(){return o.createElement("div",{className:f()(u.a.controls,x({},u.a.controlsAtTop,!!this.props.showControlsAtTop))},!this.props.showControlsAtTop&&o.createElement("input",{placeholder:"Search...",type:"text",onInput:this.onFilterTextChange(),className:f()("form-control",u.a.tableSearchInput)}),this.props.showAddRemoveAllButton&&this.getAddRemoveAllButton(),o.createElement(h.If,{condition:this.props.showSetOperationsButton&&this.props.numberOfSelectedRows>0},o.createElement("div",{className:"btn-group"},o.createElement("button",{className:"btn btn-default btn-xs",onClick:this.afterSelectingRows},"Select Samples"," ",o.createElement(h.If,{condition:this.props.numberOfSelectedRows>1},o.createElement("i",{style:{marginTop:"-2px"},className:this.props.defaultSelectionOperator===v.b.INTERSECTION?u.a.intersection:u.a.union}))),o.createElement(h.If,{condition:this.props.numberOfSelectedRows>1},o.createElement(_.DropdownButton,{bsSize:"xsmall",title:"",id:"selectButton",pullRight:!0},this.getSelectionOptions())))),this.props.extraButtons&&this.props.extraButtons.map(function(e){return o.createElement("button",{className:"btn btn-default btn-xs",onClick:e.onClick,disabled:e.isDisabled()},e.content)}),this.props.showControlsAtTop&&o.createElement("input",{placeholder:"Search...",type:"text",onInput:this.onFilterTextChange(),ref:this.setInputRef,"data-test":"fixed-header-table-search-input",className:f()("form-control",u.a.tableSearchInput)}))}},{key:"render",value:function(){var e=this;return o.createElement("div",{className:u.a.studyViewTablesTable},!this.props.hideControls&&this.props.showControlsAtTop&&this.getControls(),o.createElement(p.Observer,null,function(){return o.createElement(a.c,{width:e.props.width,height:e.props.height,headerHeight:e.props.headerHeight,rowHeight:e.props.rowHeight,rowCount:e._store.dataStore.sortedFilteredData.length,rowGetter:e.rowGetter,rowClassName:e.rowClassName,headerClassName:u.a.headerColumn,sort:e.sort,sortDirection:I[e._sortDirection],sortBy:e._sortBy},e.props.columns.map(function(t,n){return o.createElement(a.a,{key:t.name,label:t.name,dataKey:t.name,width:Number(t.width),headerRenderer:e.columnHeaders[n],cellRenderer:function(e){return t.render(e.rowData)}})}))}),!this.props.hideControls&&!this.props.showControlsAtTop&&this.getControls())}},{key:"columnHeaders",get:function(){var e=this;return this.props.columns.map(function(t){return function(n){var r=[];t.headerRender?r.push(t.headerRender(t.name)):r.push(o.createElement("span",{key:t.name},t.name)),t.name===e._sortBy&&r.push(o.createElement("i",{className:f()(u.a.headerSortingIcon,"fa","desc"===e._sortDirection?"fa-sort-desc":"fa-sort-asc")}));var i=o.createElement("div",{style:{display:"flex"}},r);return t.tooltip?o.createElement(g.d,{placement:"top",overlay:t.tooltip},i):i}})}}]),t}();M.defaultProps={showControlsAtTop:!1,showAddRemoveAllButton:!1,autoFocusSearchAfterRendering:!1,width:398,height:350,headerHeight:25,rowHeight:25,showSelectableNumber:!1,sortBy:"",numberOfSelectedRows:0,hideControls:!1},j([s.observable],M.prototype,"_sortBy",void 0),j([s.observable],M.prototype,"_sortDirection",void 0),j([m.default],M.prototype,"rowClassName",null),j([m.default],M.prototype,"rowGetter",null),j([m.default],M.prototype,"getColumn",null),j([m.default,s.action],M.prototype,"sort",null),j([m.default,s.action],M.prototype,"onFilterTextChange",null),j([m.default,s.action],M.prototype,"afterSelectingRows",null),j([m.default,s.action],M.prototype,"changeSelectionType",null),j([m.default],M.prototype,"isSelectedRow",null),j([m.default],M.prototype,"onAddAll",null),j([m.default],M.prototype,"onRemoveAll",null),j([s.computed],M.prototype,"columnHeaders",null),j([m.default],M.prototype,"setInputRef",null),M=j([p.observer],M),t.a=M},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(895);(r=i)&&r.__esModule;var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return o(e,[{key:"receiveProps",value:function(e,t){this.props=e,this.itemAdapter=t}},{key:"isEmpty",value:function(e){return!this.getLength(e)}},{key:"filter",value:function(e,t){return this.toArray(e).filter(t)}},{key:"find",value:function(e,t){return this.toArray(e).find(t)}},{key:"findMatching",value:function(e,t){var n=this,r=this.itemAdapter.foldValue(t);return this.find(e,function(e){return n.itemAdapter.itemMatchesInput(e,r)})}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.unsafe=function(e){return new o(e)},t.isUnsafe=function(e){return e instanceof o};var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.content=t}return r(e,[{key:"toString",value:function(){return this.content}}]),e}()},function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(2),a=n(6),s=n(15),l=n(5),u=n.n(l),c=n(799),p=n.n(c),d=n(3),f=n(418);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var _=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":v(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},S=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},E=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=y(this,g(t).apply(this,arguments))).mousePosition={x:0,y:0},e.tooltipOpen=!1,e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,r["Component"]),n=t,(o=[{key:"onMouseOver",value:function(){this.tooltipOpen=!0}},{key:"onMouseOut",value:function(){this.tooltipOpen=!1}},{key:"onMouseMove",value:function(e){this.mousePosition.x=e.pageX,this.mousePosition.y=e.pageY}},{key:"render",value:function(){var e=this.props,t=(e.text,e.maxWidth,e.datum,e.suffix,e.tooltip,e.prefixTspans,e.alwaysShowTooltip,e.renderTruncatedText,e.transform),n=e.tooltipPlacement,o=e.textRef,i=S(e,["text","maxWidth","datum","suffix","tooltip","prefixTspans","alwaysShowTooltip","renderTruncatedText","transform","tooltipPlacement","textRef"]),a=void 0;return t&&void 0!==this.props.x&&void 0!==this.props.y&&(a=t(this.props.x,this.props.y)),r.createElement(r.Fragment,null,r.createElement("text",h({onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,onMouseMove:this.onMouseMove,ref:o,transform:a},i),this.props.prefixTspans,this.truncatedText),(this.textReport.isTruncated||this.props.alwaysShowTooltip)&&this.tooltipOpen&&r.createElement(f.a,{isOpened:!0,node:document.body},r.createElement(s.Popover,{arrowOffsetTop:17,className:u()("cbioportal-frontend","cbioTooltip",p.a.Tooltip),positionLeft:this.mousePosition.x+("left"===n?-8:8),positionTop:this.mousePosition.y-17,style:{transform:"left"===n?"translate(-100%,0%)":void 0},placement:n},this.tooltipElt)))}},{key:"tooltipElt",get:function(){return this.props.tooltip?this.props.tooltip(this.props.datum):r.createElement("span",null,this.props.text)}},{key:"fontFamily",get:function(){var e="Arial";return this.props.style&&this.props.style.fontFamily&&(e=this.props.style.fontFamily.split(", ")[0]),e}},{key:"fontSize",get:function(){var e="13px";return this.props.style&&this.props.style.fontSize&&(e=this.props.style.fontSize+"px"),e}},{key:"textReport",get:function(){return Object(d.eb)(this.props.text||"",this.props.maxWidth,this.fontFamily,this.fontSize)}},{key:"truncatedText",get:function(){return this.props.renderTruncatedText?this.props.renderTruncatedText(this.textReport.text):r.createElement("tspan",null,this.textReport.text)}}])&&m(n.prototype,o),i&&m(n,i),t}();E.defaultProps={maxWidth:100,suffix:"..."},_([i.observable],E.prototype,"mousePosition",void 0),_([i.observable],E.prototype,"tooltipOpen",void 0),_([i.computed],E.prototype,"tooltipElt",null),_([a.default,i.action],E.prototype,"onMouseOver",null),_([a.default,i.action],E.prototype,"onMouseOut",null),_([a.default],E.prototype,"onMouseMove",null),_([i.computed],E.prototype,"fontFamily",null),_([i.computed],E.prototype,"fontSize",null),_([i.computed],E.prototype,"textReport",null),_([i.computed],E.prototype,"truncatedText",null),E=_([o.observer],E),t.a=E},function(e,t,n){!function(e,t,n,r){"use strict";function o(e,t){return e(t={exports:{}},t.exports),t.exports}n=n&&n.hasOwnProperty("default")?n.default:n;var i=o(function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t.apply(this,arguments)}e.exports=t}),a=function(e){if(Array.isArray(e))return e},s=function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n},l=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")},u=function(e,t){return a(e)||s(e,t)||l()},c=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},p=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){c(e,t,n[t])})}return e},d=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h=function(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e},m=o(function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(r){return"function"==typeof Symbol&&"symbol"===t(Symbol.iterator)?e.exports=n=function(e){return t(e)}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":t(e)},n(r)}e.exports=n}),y=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},g=function(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?y(e):t},b=o(function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(n)}e.exports=t}),v=o(function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(n,r)}e.exports=t}),_=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)},S=function(e,t,n,r,o,i,a,s){if(void 0===t)throw new Error("invariant requires an error message argument");if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,o,i,a,s],c=0;(l=new Error(t.replace(/%s/g,function(){return u[c++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}},E=function(){function e(){d(this,e),c(this,"refs",{})}return h(e,[{key:"add",value:function(e,t){this.refs[e]||(this.refs[e]=[]),this.refs[e].push(t)}},{key:"remove",value:function(e,t){var n=this.getIndex(e,t);-1!==n&&this.refs[e].splice(n,1)}},{key:"isActive",value:function(){return this.active}},{key:"getActive",value:function(){var e=this;return this.refs[this.active.collection].find(function(t){var n=t.node;return n.sortableInfo.index==e.active.index})}},{key:"getIndex",value:function(e,t){return this.refs[e].indexOf(t)}},{key:"getOrderedRefs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.active.collection;return this.refs[e].sort(w)}}]),e}();function w(e,t){var n=e.node.sortableInfo.index,r=t.node.sortableInfo.index;return n-r}var O=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}},C=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)},k=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")},T=function(e){return O(e)||C(e)||k()};function P(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Object.keys(e).reduce(function(t,r){return-1===n.indexOf(r)&&(t[r]=e[r]),t},{})}var x={end:["touchend","touchcancel","mouseup"],move:["touchmove","mousemove"],start:["touchstart","mousedown"]},A=function(){if("undefined"==typeof window||"undefined"==typeof document)return"";var e=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||""===e.OLink&&["","o"])[1];switch(t){case"ms":return"ms";default:return t&&t.length?t[0].toUpperCase()+t.substr(1):""}}();function j(e,t){Object.keys(t).forEach(function(n){e.style[n]=t[n]})}function I(e,t){e.style["".concat(A,"Transform")]=null==t?"":"translate3d(".concat(t.x,"px,").concat(t.y,"px,0)")}function N(e,t){e.style["".concat(A,"TransitionDuration")]=null==t?"":"".concat(t,"ms")}function M(e,t){for(;e;){if(t(e))return e;e=e.parentNode}return null}function D(e,t,n){return Math.max(e,Math.min(n,t))}function R(e){return"px"===e.substr(-2)?parseFloat(e):0}function L(e,t){var n=t.displayName||t.name;return n?"".concat(e,"(").concat(n,")"):e}function G(e,t){var n=e.getBoundingClientRect();return{top:n.top+t.top,left:n.left+t.left}}function V(e){return e.touches&&e.touches.length?{x:e.touches[0].pageX,y:e.touches[0].pageY}:e.changedTouches&&e.changedTouches.length?{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY}:{x:e.pageX,y:e.pageY}}function B(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{left:0,top:0};if(e){var r={left:n.left+e.offsetLeft,top:n.top+e.offsetTop};return e.parentNode===t?r:B(e.parentNode,t,r)}}function F(e){var t=e.lockOffset,n=e.width,r=e.height,o=t,i=t,a="px";if("string"==typeof t){var s=/^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(t);S(null!==s,'lockOffset value should be a number or a string of a number followed by "px" or "%". Given %s',t),o=parseFloat(t),i=parseFloat(t),a=s[1]}return S(isFinite(o)&&isFinite(i),"lockOffset value should be a finite. Given %s",t),"%"===a&&(o=o*n/100,i=i*r/100),{x:o,y:i}}function H(e){return e instanceof HTMLElement?function(e){var t=window.getComputedStyle(e),n=/(auto|scroll)/;return["overflow","overflowX","overflowY"].find(function(e){return n.test(t[e])})}(e)?e:H(e.parentNode):null}var U={TAB:9,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40},W={Anchor:"A",Button:"BUTTON",Canvas:"CANVAS",Input:"INPUT",Option:"OPTION",Textarea:"TEXTAREA",Select:"SELECT"};function q(e){var n,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return o=n=function(n){function o(){return d(this,o),g(this,b(o).apply(this,arguments))}return _(o,n),h(o,[{key:"componentDidMount",value:function(){var e=r.findDOMNode(this);e.sortableHandle=!0}},{key:"getWrappedInstance",value:function(){return S(a.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableHandle() call"),this.refs.wrappedInstance}},{key:"render",value:function(){var n=a.withRef?"wrappedInstance":null;return t.createElement(e,i({ref:n},this.props))}}]),o}(t.Component),c(n,"displayName",L("sortableHandle",e)),o}function z(e){return null!=e.sortableHandle}var Q=function(){function e(t,n){d(this,e),this.container=t,this.onScrollCallback=n}return h(e,[{key:"clear",value:function(){clearInterval(this.interval),this.interval=null}},{key:"update",value:function(e){var t=this,n=e.translate,r=e.minTranslate,o=e.maxTranslate,i=e.width,a=e.height,s={x:0,y:0},l={x:1,y:1},u={x:10,y:10},c=this.container,p=c.scrollTop,d=c.scrollLeft,f=c.scrollHeight,h=c.scrollWidth,m=c.clientHeight,y=c.clientWidth,g=0===p,b=f-p-m==0,v=0===d,_=h-d-y==0;n.y>=o.y-a/2&&!b?(s.y=1,l.y=u.y*Math.abs((o.y-a/2-n.y)/a)):n.x>=o.x-i/2&&!_?(s.x=1,l.x=u.x*Math.abs((o.x-i/2-n.x)/i)):n.y<=r.y+a/2&&!g?(s.y=-1,l.y=u.y*Math.abs((n.y-a/2-r.y)/a)):n.x<=r.x+i/2&&!v&&(s.x=-1,l.x=u.x*Math.abs((n.x-i/2-r.x)/i)),this.interval&&(this.clear(),this.isAutoScrolling=!1),0===s.x&&0===s.y||(this.interval=setInterval(function(){t.isAutoScrolling=!0;var e={left:l.x*s.x,top:l.y*s.y};t.container.scrollTop+=e.top,t.container.scrollLeft+=e.left,t.onScrollCallback(e)},5))}}]),e}(),K={axis:n.oneOf(["x","y","xy"]),contentWindow:n.any,disableAutoscroll:n.bool,distance:n.number,getContainer:n.func,getHelperDimensions:n.func,helperClass:n.string,helperContainer:n.oneOfType([n.func,"undefined"==typeof HTMLElement?n.any:n.instanceOf(HTMLElement)]),hideSortableGhost:n.bool,keyboardSortingTransitionDuration:n.number,lockAxis:n.string,lockOffset:n.oneOfType([n.number,n.string,n.arrayOf(n.oneOfType([n.number,n.string]))]),lockToContainerEdges:n.bool,onSortEnd:n.func,onSortMove:n.func,onSortOver:n.func,onSortStart:n.func,pressDelay:n.number,pressThreshold:n.number,shouldCancelStart:n.func,transitionDuration:n.number,updateBeforeSortStart:n.func,useDragHandle:n.bool,useWindowAsScrollContainer:n.bool},Y={axis:"y",disableAutoscroll:!1,distance:0,getHelperDimensions:function(e){var t=e.node;return{height:t.offsetHeight,width:t.offsetWidth}},hideSortableGhost:!0,lockOffset:"50%",lockToContainerEdges:!1,pressDelay:0,pressThreshold:5,shouldCancelStart:function(e){return-1!==[W.Input,W.Textarea,W.Select,W.Option,W.Button].indexOf(e.target.tagName)||!!M(e.target,function(e){return"true"===e.contentEditable})},transitionDuration:300,useWindowAsScrollContainer:!1},X=Object.keys(K);function Z(e){var o,a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return a=o=function(n){function o(e){var t;return d(this,o),t=g(this,b(o).call(this,e)),c(y(y(t)),"handleStart",function(e){var n=t.props,r=n.distance,o=n.shouldCancelStart;if(2!==e.button&&!o(e)){t.touched=!0,t.position=V(e);var i=M(e.target,function(e){return null!=e.sortableInfo});if(i&&i.sortableInfo&&t.nodeIsChild(i)&&!t.state.sorting){var a=t.props.useDragHandle,s=i.sortableInfo,l=s.index,u=s.collection,c=s.disabled;if(c)return;if(a&&!M(e.target,z))return;t.manager.active={collection:u,index:l},function(e){return e.touches&&e.touches.length||e.changedTouches&&e.changedTouches.length}(e)||e.target.tagName!==W.Anchor||e.preventDefault(),r||(0===t.props.pressDelay?t.handlePress(e):t.pressTimer=setTimeout(function(){return t.handlePress(e)},t.props.pressDelay))}}}),c(y(y(t)),"nodeIsChild",function(e){return e.sortableInfo.manager===t.manager}),c(y(y(t)),"handleMove",function(e){var n=t.props,r=n.distance,o=n.pressThreshold;if(!t.state.sorting&&t.touched&&!t._awaitingUpdateBeforeSortStart){var i=V(e),a={x:t.position.x-i.x,y:t.position.y-i.y},s=Math.abs(a.x)+Math.abs(a.y);t.delta=a,r||o&&!(s>=o)?r&&s>=r&&t.manager.isActive()&&t.handlePress(e):(clearTimeout(t.cancelTimer),t.cancelTimer=setTimeout(t.cancel,0))}}),c(y(y(t)),"handleEnd",function(){t.touched=!1,t.cancel()}),c(y(y(t)),"cancel",function(){var e=t.props.distance,n=t.state.sorting;n||(e||clearTimeout(t.pressTimer),t.manager.active=null)}),c(y(y(t)),"handlePress",function(e){try{var n=t.manager.getActive(),r=function(){if(n){var r=function(){var n,r,o,u,y,g,b=f.sortableInfo.index,v=(n=f,{bottom:R((r=window.getComputedStyle(n)).marginBottom),left:R(r.marginLeft),right:R(r.marginRight),top:R(r.marginTop)}),_=t.scrollContainer.getBoundingClientRect(),S=a({collection:h,index:b,node:f});if(t.node=f,t.margin=v,t.width=S.width,t.height=S.height,t.marginOffset={x:t.margin.left+t.margin.right,y:Math.max(t.margin.top,t.margin.bottom)},t.boundingClientRect=f.getBoundingClientRect(),t.containerBoundingRect=_,t.index=b,t.newIndex=b,t.axis={x:i.indexOf("x")>=0,y:i.indexOf("y")>=0},t.offsetEdge=B(f,t.container),t.initialOffset=V(m?p({},e,{pageX:t.boundingClientRect.left,pageY:t.boundingClientRect.top}):e),t.initialScroll={left:t.scrollContainer.scrollLeft,top:t.scrollContainer.scrollTop},t.initialWindowScroll={left:window.pageXOffset,top:window.pageYOffset},t.helper=t.helperContainer.appendChild((u="input, textarea, select, canvas, [contenteditable]",y=(o=f).querySelectorAll(u),g=o.cloneNode(!0),T(g.querySelectorAll(u)).forEach(function(e,t){"file"!==e.type&&(e.value=y[t].value),"radio"===e.type&&e.name&&(e.name="__sortableClone__".concat(e.name)),e.tagName===W.Canvas&&y[t].width>0&&y[t].height>0&&e.getContext("2d").drawImage(y[t],0,0)}),g)),j(t.helper,{boxSizing:"border-box",height:"".concat(t.height,"px"),left:"".concat(t.boundingClientRect.left-v.left,"px"),pointerEvents:"none",position:"fixed",top:"".concat(t.boundingClientRect.top-v.top,"px"),width:"".concat(t.width,"px")}),m&&t.helper.focus(),l&&(t.sortableGhost=f,j(f,{opacity:0,visibility:"hidden"})),t.minTranslate={},t.maxTranslate={},m){var E=d?{top:0,left:0,width:t.contentWindow.innerWidth,height:t.contentWindow.innerHeight}:t.containerBoundingRect,w=E.top,O=E.left,C=E.width,k=E.height,P=w+k,A=O+C;t.axis.x&&(t.minTranslate.x=O-t.boundingClientRect.left,t.maxTranslate.x=A-(t.boundingClientRect.left+t.width)),t.axis.y&&(t.minTranslate.y=w-t.boundingClientRect.top,t.maxTranslate.y=P-(t.boundingClientRect.top+t.height))}else t.axis.x&&(t.minTranslate.x=(d?0:_.left)-t.boundingClientRect.left-t.width/2,t.maxTranslate.x=(d?t.contentWindow.innerWidth:_.left+_.width)-t.boundingClientRect.left-t.width/2),t.axis.y&&(t.minTranslate.y=(d?0:_.top)-t.boundingClientRect.top-t.height/2,t.maxTranslate.y=(d?t.contentWindow.innerHeight:_.top+_.height)-t.boundingClientRect.top-t.height/2);s&&s.split(" ").forEach(function(e){return t.helper.classList.add(e)}),t.listenerNode=e.touches?f:t.contentWindow,m?(t.listenerNode.addEventListener("wheel",t.handleKeyEnd,!0),t.listenerNode.addEventListener("mousedown",t.handleKeyEnd,!0),t.listenerNode.addEventListener("keydown",t.handleKeyDown)):(x.move.forEach(function(e){return t.listenerNode.addEventListener(e,t.handleSortMove,!1)}),x.end.forEach(function(e){return t.listenerNode.addEventListener(e,t.handleSortEnd,!1)})),t.setState({sorting:!0,sortingIndex:b}),c&&c({node:f,index:b,collection:h,isKeySorting:m},e),m&&t.keyMove(0)},o=t.props,i=o.axis,a=o.getHelperDimensions,s=o.helperClass,l=o.hideSortableGhost,u=o.updateBeforeSortStart,c=o.onSortStart,d=o.useWindowAsScrollContainer,f=n.node,h=n.collection,m=t.manager.isKeySorting,y=function(){if("function"==typeof u){t._awaitingUpdateBeforeSortStart=!0;var n=function(e,t){try{var n=e()}catch(e){return t(!0,e)}return n&&n.then?n.then(t.bind(null,!1),t.bind(null,!0)):t(!1,value)}(function(){var t=f.sortableInfo.index;return Promise.resolve(u({collection:h,index:t,node:f,isKeySorting:m},e)).then(function(){})},function(e,n){if(t._awaitingUpdateBeforeSortStart=!1,e)throw n;return n});if(n&&n.then)return n.then(function(){})}}();return y&&y.then?y.then(r):r()}}();return Promise.resolve(r&&r.then?r.then(function(){}):void 0)}catch(e){return Promise.reject(e)}}),c(y(y(t)),"handleSortMove",function(e){var n=t.props.onSortMove;"function"==typeof e.preventDefault&&e.preventDefault(),t.updateHelperPosition(e),t.animateNodes(),t.autoscroll(),n&&n(e)}),c(y(y(t)),"handleSortEnd",function(e){var n=t.props,r=n.hideSortableGhost,o=n.onSortEnd,i=t.manager,a=i.active.collection,s=i.isKeySorting,l=t.manager.refs[a];t.listenerNode&&(s?(t.listenerNode.removeEventListener("wheel",t.handleKeyEnd,!0),t.listenerNode.removeEventListener("mousedown",t.handleKeyEnd,!0),t.listenerNode.removeEventListener("keydown",t.handleKeyDown)):(x.move.forEach(function(e){return t.listenerNode.removeEventListener(e,t.handleSortMove)}),x.end.forEach(function(e){return t.listenerNode.removeEventListener(e,t.handleSortEnd)}))),t.helper.parentNode.removeChild(t.helper),r&&t.sortableGhost&&j(t.sortableGhost,{opacity:"",visibility:""});for(var u=0,c=l.length;u<c;u++){var p=l[u],d=p.node;p.edgeOffset=null,p.boundingClientRect=null,I(d,null),N(d,null),p.translate=null}t.autoScroller.clear(),t.manager.active=null,t.manager.isKeySorting=!1,t.setState({sorting:!1,sortingIndex:null}),"function"==typeof o&&o({collection:a,newIndex:t.newIndex,oldIndex:t.index,isKeySorting:s},e),t.touched=!1}),c(y(y(t)),"autoscroll",function(){var e=t.props.disableAutoscroll,n=t.manager.isKeySorting;if(!e){if(n){var r=p({},t.translate),o=0,i=0;return t.axis.x&&(r.x=Math.min(t.maxTranslate.x,Math.max(t.minTranslate.x,t.translate.x)),o=t.translate.x-r.x),t.axis.y&&(r.y=Math.min(t.maxTranslate.y,Math.max(t.minTranslate.y,t.translate.y)),i=t.translate.y-r.y),t.translate=r,I(t.helper,t.translate),t.scrollContainer.scrollLeft+=o,void(t.scrollContainer.scrollTop+=i)}t.autoScroller.update({height:t.height,maxTranslate:t.maxTranslate,minTranslate:t.minTranslate,translate:t.translate,width:t.width})}}),c(y(y(t)),"onAutoScroll",function(e){t.translate.x+=e.left,t.translate.y+=e.top,t.animateNodes()}),c(y(y(t)),"handleKeyDown",function(e){var n=e.keyCode,r=t.props.shouldCancelStart;if((!t.manager.active||t.manager.isKeySorting)&&(t.manager.active||n===U.SPACE&&!r(e)&&t.isValidSortingTarget(e)))switch(e.stopPropagation(),e.preventDefault(),n){case U.SPACE:t.manager.active?t.keyDrop(e):t.keyLift(e);break;case U.DOWN:case U.RIGHT:t.keyMove(1);break;case U.UP:case U.LEFT:t.keyMove(-1);break;case U.ESC:t.newIndex=t.manager.active.index,t.keyDrop(e)}}),c(y(y(t)),"keyLift",function(e){var n=e.target,r=M(n,function(e){return null!=e.sortableInfo}),o=r.sortableInfo,i=o.index,a=o.collection;t.initialFocusedNode=n,t.manager.isKeySorting=!0,t.manager.active={index:i,collection:a},t.handlePress(e)}),c(y(y(t)),"keyMove",function(e){var n=t.manager.getOrderedRefs(),r=n[n.length-1].node.sortableInfo.index,o=t.newIndex+e,i=t.newIndex;if(!(o<0||o>r)){t.prevIndex=i,t.newIndex=o;var a=function(e,t,n){return e<n&&e>t?e-1:e>n&&e<t?e+1:e}(t.newIndex,t.prevIndex,t.index),s=n.find(function(e){var t=e.node;return t.sortableInfo.index===a}),l=s.node,u=t.containerScrollDelta,c=s.boundingClientRect||G(l,u),p=s.translate||{x:0,y:0},d={top:c.top+p.y-u.top,left:c.left+p.x-u.left},f=i<o,h={x:f&&t.axis.x?l.offsetWidth-t.width:0,y:f&&t.axis.y?l.offsetHeight-t.height:0};t.handleSortMove({pageX:d.left+h.x,pageY:d.top+h.y,ignoreTransition:0===e})}}),c(y(y(t)),"keyDrop",function(e){t.handleSortEnd(e),t.initialFocusedNode&&t.initialFocusedNode.focus()}),c(y(y(t)),"handleKeyEnd",function(e){t.manager.active&&t.keyDrop(e)}),c(y(y(t)),"isValidSortingTarget",function(e){var n=t.props.useDragHandle,r=e.target,o=M(r,function(e){return null!=e.sortableInfo});return o&&o.sortableInfo&&!o.sortableInfo.disabled&&(n?z(r):r.sortableInfo)}),function(e){S(!(e.distance&&e.pressDelay),"Attempted to set both `pressDelay` and `distance` on SortableContainer, you may only use one or the other, not both at the same time.")}(e),t.state={},t.manager=new E,t.events={end:t.handleEnd,move:t.handleMove,start:t.handleStart},t}return _(o,n),h(o,[{key:"getChildContext",value:function(){return{manager:this.manager}}},{key:"componentDidMount",value:function(){var e=this,t=this.props.useWindowAsScrollContainer,n=this.getContainer();Promise.resolve(n).then(function(n){e.container=n,e.document=e.container.ownerDocument||document;var r=e.props.contentWindow||e.document.defaultView||window;e.contentWindow="function"==typeof r?r():r,e.scrollContainer=t?e.document.scrollingElement||e.document.documentElement:H(e.container)||e.container,e.autoScroller=new Q(e.scrollContainer,e.onAutoScroll),Object.keys(e.events).forEach(function(t){return x[t].forEach(function(n){return e.container.addEventListener(n,e.events[t],!1)})}),e.container.addEventListener("keydown",e.handleKeyDown)})}},{key:"componentWillUnmount",value:function(){var e=this;this.helper&&this.helper.parentNode&&this.helper.parentNode.removeChild(this.helper),this.container&&(Object.keys(this.events).forEach(function(t){return x[t].forEach(function(n){return e.container.removeEventListener(n,e.events[t])})}),this.container.removeEventListener("keydown",this.handleKeyDown))}},{key:"updateHelperPosition",value:function(e){var t=this.props,n=t.lockAxis,r=t.lockOffset,o=t.lockToContainerEdges,i=t.transitionDuration,a=t.keyboardSortingTransitionDuration,s=void 0===a?i:a,l=this.manager.isKeySorting,c=e.ignoreTransition,p=V(e),d={x:p.x-this.initialOffset.x,y:p.y-this.initialOffset.y};if(d.y-=window.pageYOffset-this.initialWindowScroll.top,d.x-=window.pageXOffset-this.initialWindowScroll.left,this.translate=d,o){var f=function(e){var t=e.height,n=e.width,r=e.lockOffset,o=Array.isArray(r)?r:[r,r];S(2===o.length,"lockOffset prop of SortableContainer should be a single value or an array of exactly two values. Given %s",r);var i=u(o,2),a=i[0],s=i[1];return[F({height:t,lockOffset:a,width:n}),F({height:t,lockOffset:s,width:n})]}({height:this.height,lockOffset:r,width:this.width}),h=u(f,2),m=h[0],y=h[1],g={x:this.width/2-m.x,y:this.height/2-m.y},b={x:this.width/2-y.x,y:this.height/2-y.y};d.x=D(this.minTranslate.x+g.x,this.maxTranslate.x-b.x,d.x),d.y=D(this.minTranslate.y+g.y,this.maxTranslate.y-b.y,d.y)}"x"===n?d.y=0:"y"===n&&(d.x=0),l&&s&&!c&&N(this.helper,s),I(this.helper,d)}},{key:"animateNodes",value:function(){var e=this.props,t=e.transitionDuration,n=e.hideSortableGhost,r=e.onSortOver,o=this.containerScrollDelta,i=this.windowScrollDelta,a=this.manager.getOrderedRefs(),s={left:this.offsetEdge.left+this.translate.x+o.left,top:this.offsetEdge.top+this.translate.y+o.top},l=this.manager.isKeySorting,u=this.newIndex;this.newIndex=null;for(var c=0,p=a.length;c<p;c++){var d=a[c].node,f=d.sortableInfo.index,h=d.offsetWidth,m=d.offsetHeight,y={height:this.height>m?m/2:this.height/2,width:this.width>h?h/2:this.width/2},g=l&&f>this.index&&f<=u,b=l&&f<this.index&&f>=u,v={x:0,y:0},_=a[c].edgeOffset;_||(_=B(d,this.container),a[c].edgeOffset=_,l&&(a[c].boundingClientRect=G(d,o)));var S=c<a.length-1&&a[c+1],E=c>0&&a[c-1];S&&!S.edgeOffset&&(S.edgeOffset=B(S.node,this.container),l&&(S.boundingClientRect=G(S.node,o))),f!==this.index?(t&&N(d,t),this.axis.x?this.axis.y?b||f<this.index&&(s.left+i.left-y.width<=_.left&&s.top+i.top<=_.top+y.height||s.top+i.top+y.height<=_.top)?(v.x=this.width+this.marginOffset.x,_.left+v.x>this.containerBoundingRect.width-y.width&&S&&(v.x=S.edgeOffset.left-_.left,v.y=S.edgeOffset.top-_.top),null===this.newIndex&&(this.newIndex=f)):(g||f>this.index&&(s.left+i.left+y.width>=_.left&&s.top+i.top+y.height>=_.top||s.top+i.top+y.height>=_.top+m))&&(v.x=-(this.width+this.marginOffset.x),_.left+v.x<this.containerBoundingRect.left+y.width&&E&&(v.x=E.edgeOffset.left-_.left,v.y=E.edgeOffset.top-_.top),this.newIndex=f):g||f>this.index&&s.left+i.left+y.width>=_.left?(v.x=-(this.width+this.marginOffset.x),this.newIndex=f):(b||f<this.index&&s.left+i.left<=_.left+y.width)&&(v.x=this.width+this.marginOffset.x,null==this.newIndex&&(this.newIndex=f)):this.axis.y&&(g||f>this.index&&s.top+i.top+y.height>=_.top?(v.y=-(this.height+this.marginOffset.y),this.newIndex=f):(b||f<this.index&&s.top+i.top<=_.top+y.height)&&(v.y=this.height+this.marginOffset.y,null==this.newIndex&&(this.newIndex=f))),I(d,v),a[c].translate=v):n&&(this.sortableGhost=d,j(d,{opacity:0,visibility:"hidden"}))}null==this.newIndex&&(this.newIndex=this.index),l&&(this.newIndex=u);var w=l?this.prevIndex:u;r&&this.newIndex!==w&&r({collection:this.manager.active.collection,index:this.index,newIndex:this.newIndex,oldIndex:w,isKeySorting:l})}},{key:"getWrappedInstance",value:function(){return S(s.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableContainer() call"),this.refs.wrappedInstance}},{key:"getContainer",value:function(){var e=this.props.getContainer;return"function"!=typeof e?r.findDOMNode(this):e(s.withRef?this.getWrappedInstance():void 0)}},{key:"render",value:function(){var n=s.withRef?"wrappedInstance":null;return t.createElement(e,i({ref:n},P(this.props,X)))}},{key:"helperContainer",get:function(){var e=this.props.helperContainer;return"function"==typeof e?e():this.props.helperContainer||this.document.body}},{key:"containerScrollDelta",get:function(){var e=this.props.useWindowAsScrollContainer;return e?{left:0,top:0}:{left:this.scrollContainer.scrollLeft-this.initialScroll.left,top:this.scrollContainer.scrollTop-this.initialScroll.top}}},{key:"windowScrollDelta",get:function(){return{left:this.contentWindow.pageXOffset-this.initialWindowScroll.left,top:this.contentWindow.pageYOffset-this.initialWindowScroll.top}}}]),o}(t.Component),c(o,"displayName",L("sortableList",e)),c(o,"defaultProps",Y),c(o,"propTypes",K),c(o,"childContextTypes",{manager:n.object.isRequired}),a}var J={index:n.number.isRequired,collection:n.oneOfType([n.number,n.string]),disabled:n.bool},$=Object.keys(J);function ee(e){var o,a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return a=o=function(n){function o(){return d(this,o),g(this,b(o).apply(this,arguments))}return _(o,n),h(o,[{key:"componentDidMount",value:function(){this.register()}},{key:"componentDidUpdate",value:function(e){this.node&&(e.index!==this.props.index&&(this.node.sortableInfo.index=this.props.index),e.disabled!==this.props.disabled&&(this.node.sortableInfo.disabled=this.props.disabled)),e.collection!==this.props.collection&&(this.unregister(e.collection),this.register())}},{key:"componentWillUnmount",value:function(){this.unregister()}},{key:"register",value:function(){var e=this.props,t=e.collection,n=e.disabled,o=e.index,i=r.findDOMNode(this);i.sortableInfo={collection:t,disabled:n,index:o,manager:this.context.manager},this.node=i,this.ref={node:i},this.context.manager.add(t,this.ref)}},{key:"unregister",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.collection;this.context.manager.remove(e,this.ref)}},{key:"getWrappedInstance",value:function(){return S(s.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableElement() call"),this.refs.wrappedInstance}},{key:"render",value:function(){var n=s.withRef?"wrappedInstance":null;return t.createElement(e,i({ref:n},P(this.props,$)))}}]),o}(t.Component),c(o,"displayName",L("sortableElement",e)),c(o,"contextTypes",{manager:n.object.isRequired}),c(o,"propTypes",J),c(o,"defaultProps",{collection:0}),a}e.SortableContainer=Z,e.sortableContainer=Z,e.SortableElement=ee,e.sortableElement=ee,e.SortableHandle=q,e.sortableHandle=q,e.arrayMove=function(e,t,n){return"undefined"!=typeof console&&console.warn("Deprecation warning: arrayMove will no longer be exported by 'react-sortable-hoc' in the next major release. Please install the `array-move` package locally instead. https://www.npmjs.com/package/array-move"),(e=e.slice()).splice(n<0?e.length+n:n,0,e.splice(t,1)[0]),e},Object.defineProperty(e,"__esModule",{value:!0})}(t,n(0),n(4),n(23))},,function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.inputToKey=t,this.inputToOutput=n,this.memo={}}var t,n,o;return t=e,(n=[{key:"get",value:function(e){var t=this.inputToKey(e);return this.memo[t]=this.memo[t]||this.inputToOutput(e),this.memo[t]}},{key:"has",value:function(e){return this.inputToKey(e)in this.memo}}])&&r(t.prototype,n),o&&r(t,o),e}();function i(e){return JSON.stringify(e,Object.keys(e).sort())}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,n=new o(t,function(t){return function(n){return e(n,t)}});return function(e){return n.get(e)}}n.d(t,"a",function(){return a})},function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return s});var r=n(0),o=n(3);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e){return e<.01?e.toFixed(4):e.toFixed(2)}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,s;return t=e,s=[{key:"mainContent",value:function(e,t,n){var i=r.createElement("span",null,r.createElement("b",null,t)," variant reads out of"," ",r.createElement("b",null,t+n)," total");return r.createElement(o.d,{placement:"left",overlay:i,arrowContent:r.createElement("div",{className:"rc-tooltip-arrow-inner"}),destroyTooltipOnHide:!0},r.createElement("span",null,a(e)))}},{key:"renderFunction",value:function(t){var n=e.getSortValue(t);if(n){var i=t[0].tumorAltCount,a=t[0].tumorRefCount;return e.mainContent(n,i,a)}return r.createElement(o.p,{status:o.o.NA})}},{key:"getTextValue",value:function(t){var n=e.getSortValue(t);return n?a(n):""}},{key:"getSortValue",value:function(e){var t=e[0];if(!t)return null;var n=t.tumorAltCount,r=t.tumorRefCount;return n<0||r<0?null:n/(n+r)}},{key:"isVisible",value:function(e){if(e){var t=!0,n=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;if(this.getSortValue(a))return!0}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}return!1}}],(n=null)&&i(t.prototype,n),s&&i(t,s),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return l}),n.d(t,"c",function(){return u});var r,o=n(0),i=n(44),a=n(866);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e){var t=r.NA;return Object(i.m)(e,"clonal")&&(t=e.alleleSpecificCopyNumber.clonal in r?r[e.alleleSpecificCopyNumber.clonal]:r.NA),t}!function(e){e.CLONAL="CLONAL",e.SUBCLONAL="SUBCLONAL",e.INDETERMINATE="INDETERMINATE",e.NA="NA"}(r||(r={}));var u=function(e,t){return{name:"Clonality",render:function(n){return c.renderFunction(n,e||(n.length>0?[n[0].sampleId]:[]),t)},sortBy:function(e){return e.map(function(e){return e.alleleSpecificCopyNumber.ccfExpectedCopiesUpper})},download:function(e){return c.getClonalDownload(e)}}},c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,u;return t=e,u=[{key:"renderFunction",value:function(e,t,n){var s={},u={},c=!0,p=!1,d=void 0;try{for(var f,h=e[Symbol.iterator]();!(c=(f=h.next()).done);c=!0){var m=f.value;s[m.sampleId]=l(m)}}catch(e){p=!0,d=e}finally{try{c||null==h.return||h.return()}finally{if(p)throw d}}var y=!0,g=!1,b=void 0;try{for(var v,_=e[Symbol.iterator]();!(y=(v=_.next()).done);y=!0){var S=v.value;u[S.sampleId]=Object(i.m)(S,"ccfExpectedCopies")?S.alleleSpecificCopyNumber.ccfExpectedCopies.toString():Object(i.m)(S,"ascnMethod")?"INDETERMINATE":"NA"}}catch(e){g=!0,b=e}finally{try{y||null==_.return||_.return()}finally{if(g)throw b}}return o.createElement("span",{"data-test":"clonal-cell"},t.map(function(e,t){return o.createElement("span",{key:e,style:0===t?void 0:{marginLeft:5}},o.createElement(a.a,{sampleId:e,clonalValue:s[e]?s[e]:r.NA,ccfExpectedCopies:u[e]?u[e]:"NA",sampleManager:n}))}))}},{key:"getClonalDownload",value:function(e){return e.map(function(e){return l(e)})}}],(n=null)&&s(t.prototype,n),u&&s(t,u),e}()},function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__3xfuL",framedImage:"styles-module__framedImage__3MWaq",validationBubbleBase:"styles-module__validationBubbleBase__1bQNI",genesSelection:"styles-module__genesSelection__17BpH",GeneSymbolValidator:"styles-module__GeneSymbolValidator__1K2q1",validBubble:"styles-module__validBubble__2iAqd",invalidBubble:"styles-module__invalidBubble__3Hs4P",suggestionBubble:"styles-module__suggestionBubble__1TnzN",topRow:"styles-module__topRow__2F7H0",default:"styles-module__default__3ZAms",oncoprintHeatmap:"styles-module__oncoprintHeatmap__lvPrO",studyView:"styles-module__studyView__3TtjM",studyViewFocus:"styles-module__studyViewFocus__1CfEf",nowrap:"styles-module__nowrap__1GVDf",icon:"styles-module__icon__2RDD6",pendingMessage:"styles-module__pendingMessage__1gVAe",oqlNotice:"styles-module__oqlNotice__3naFJ",errorMessage:"styles-module__errorMessage__3pZ_v",noChoiceLabel:"styles-module__noChoiceLabel__2sdit",singleChoiceLabel:"styles-module__singleChoiceLabel__178JA",multiChoiceLabel:"styles-module__multiChoiceLabel__1PPmp"}},function(e,t,n){e.exports=n(25)(132)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),o=n(3);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,l(t).apply(this,arguments))}var n,i,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["Component"]),n=t,(i=[{key:"render",value:function(){return r.createElement(o.d,{overlay:this.props.tooltip},r.createElement("i",{className:"fa fa-md fa-exclamation-triangle",style:Object.assign({},{color:"#BB1700",cursor:"pointer"},this.props.style||{})}))}}])&&a(n.prototype,i),c&&a(n,c),t}()},function(e,t,n){"use strict";var r=n(1),o=n.n(r);function i(e,t){for(var n,r=0,o=e.length;r<o;)switch(t(e[n=Math.floor((r+o)/2)],n)){case 1:o=n;break;case-1:r=n+1;break;case 0:return n}}var a=n(105),s=n.n(a),l=n(1070),u=n.n(l);function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",function(){return S});var p=u()(),d=(p.Vector,p.Matrix),f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.events=t,this.deathEvents=o.a.sortBy(t.filter(function(e){return e.status}),function(e){return e.months}),this.deathsByMonth=o.a.groupBy(this.deathEvents,function(e){return e.months}),this.censorEvents=o.a.sortBy(t.filter(function(e){return!e.status}),function(e){return e.months}),this.censorsByMonth=o.a.groupBy(this.censorEvents,function(e){return e.months})}var t,n,r;return t=e,(n=[{key:"getTotalEventsAtStartOf",value:function(e,t){return 0===e.length||t<=e[0].months?0:i(e,function(n,r){return n.months<t?r===e.length-1||e[r+1].months>=t?0:-1:1})+1}},{key:"getTotalDeathsAtStartOf",value:function(e){return this.getTotalEventsAtStartOf(this.deathEvents,e)}},{key:"getTotalCensorsAtStartOf",value:function(e){return this.getTotalEventsAtStartOf(this.censorEvents,e)}},{key:"getDeathsExactlyAt",value:function(e){return(this.deathsByMonth[e]||[]).length}},{key:"getCensorsExactlyAt",value:function(e){return(this.censorsByMonth[e]||[]).length}},{key:"getTotalAtRiskAtStartOf",value:function(e){return this.events.length-this.getTotalDeathsAtStartOf(e)-this.getTotalCensorsAtStartOf(e)}}])&&c(t.prototype,n),r&&c(t,r),e}(),h=o.a.map,m=o.a.sortBy,y=o.a.groupBy,g=o.a.reduce,b=o.a.last,v=o.a.filter;function _(e,t,n){var r,i,a,l,u,c,p,f,_,S,E,w=null,O=[],C=[],k=[];for(o.a.each(t,function(t,r){var i,a,s,l,u,c,p,d={tte:t,ev:n[r]},f=(i=e,a=d.ev,s=m(h(d.tte,function(e,t){return{tte:e,ev:a[t]}}),"tte"),l=o.a.uniq(h(s,"tte")),u=y(s,function(e){return e.tte}),c=g(l,function(e,t){var n=u[t],r=b(e)||{n:s.length,e:0},o=v(n,function(e){return e.ev});return e.push({n:r.n-r.e,e:n.length,d:o.length,t:n[0].tte}),e},[]),p=[],i=i.filter(function(e){return!!e.d}),{expected:g(i,function(e,t){var n=o.a.find(c,function(e){return e.t===t.t||e.t>t.t});if(n){var r=n.n*t.rate;return p.push(n),e+r}return e},0),observed:v(a,function(e){return 1===e}).length,dataByTimeTable:p,timeNumber:p.length});f.expected&&(O.push(f),C.push(f.observed-f.expected))}),i=O.length-1,a=0;a<O.length;a++)for(k.push([]),l=0;l<O.length;l++)k[a].push(0);for(a=0;a<O.length;a++)for(l=a;l<O.length;l++)for(u=0;u<e.length;u++)f=e[u].n,E=e[u].d,u<O[a].timeNumber&&u<O[l].timeNumber&&(_=O[a].dataByTimeTable[u].n,S=O[l].dataByTimeTable[u].n,a!==l&&1!==f?(k[a][l]-=E*_*S*(f-E)/(f*f*(f-1)),k[l][a]=k[a][l]):1!==f&&(k[a][a]+=E*_*(f-_)*(f-E)/(f*f*(f-1))));for(c=C.slice(0,C.length-1),p=k.slice(0,k.length-1),a=0;a<p.length;a++)p[a]=p[a].slice(0,p[a].length-1);var T=p.slice(0,p.length);for(a=0;a<p.length;a++)T[a]=p[a].slice(0,p[a].length);if(i>0){var P=new d([c]),x=new d([c]).trans(),A=new d(s.a.inv(T));r=P.dot(A).dot(x).data[0][0],w=1-s.a.chisquare.cdf(r,i)}return{dof:i,KM_stats:r,pValue:w}}function S(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=o.a.sortBy(o.a.flatten(t),function(e){return e.months}),i=new f(r),a=t.map(function(e){return o.a.sortBy(e,function(e){return e.months})}),s=a.map(function(e){return e.map(function(e){return e.months})}),l=a.map(function(e){return e.map(function(e){return+e.status})});return _(o.a.uniqBy(r,function(e){return e.months}).map(function(e){return{t:e.months,d:i.getDeathsExactlyAt(e.months),n:i.getTotalAtRiskAtStartOf(e.months),rate:i.getDeathsExactlyAt(e.months)/i.getTotalAtRiskAtStartOf(e.months)}}).filter(function(e){return e.d>0}),s,l).pValue}},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),o=n(3);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,l(t).apply(this,arguments))}var n,i,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["Component"]),n=t,(i=[{key:"render",value:function(){var e=r.createElement("svg",{width:"12",height:"12"},r.createElement("circle",{r:"5",cx:"6",cy:"6",stroke:this.props.stroke,fill:this.props.circleFill}),r.createElement("text",{x:"3",y:"8.5",fontSize:this.props.fontSize,fill:this.props.textFill},this.props.text.slice(0,1)));return this.props.tooltip&&(e=r.createElement(o.d,{placement:"right",overlay:this.props.tooltip,arrowContent:r.createElement("div",{className:"rc-tooltip-arrow-inner"})},e)),e}}])&&a(n.prototype,i),c&&a(n,c),t}();c.defaultProps={stroke:"#55C",circleFill:"none",fontSize:7,textFill:"#66C"}},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFsAAABJCAIAAADdSs1eAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAdMSURBVHhe7VpdTFdlGA/jS5AARUTDkC/RIlfQ5mbkFisuaH2MNusit6Zrulbroq1uWhdetNVNX5vTNb2xC7rQlW2skcMiZrilFTKQDwEVFJAiFRAFpR97Dw8P53/+5z3nPe/5/4/bOTsXcM778by/9/k9v+d9zj9hbm7ugfBiCCwL0TAhECJidokQkRARWZgIfcSMUEIctab90uS+oxfJoj3PrX2qOCMzLTHaLp7pu3ni3PiZvgnRYOf2NS9WrrJsPHBt+oNv++jVhy+vryzKkDmH8T6ePsLhgDkHT1xt7rweze6xGzOf/nCZ4ECzI80j16dmLdu39tzgz4GjQzjQLJ6IRFqJRU7dvmtpfdfVqcjnM7MWyRRGOHZ6jDcGjvAah6AEApHnt2STuX0j1qZ/2TAk2tRtzbFfW+eQgV1l0QpqeWH41v2ESF5WMoKCsPj3pQ4vHtIOY5Hl+en2azvbbwSaqk2ZBB8o6RARr5F19L/pr453tg84Iur3H1dzs3Z83iH+BRyPP5JOsfCbPRtN8bX+1Kggwnu1D2cuT6QAtH93ac5DSXxMRJa3DnaLJ1+8WTwxffej+gHx72dvFG1YnSrFxStrDjR0OYTD3hRua+9SD+dxoWxtmv041BfetC47JX9lilvieEJkfOKOFjiE0VBf8YdJGiguINyYPCISHU4ZvE1LeZATJ1rY5uN4QqSlfeTO7D0MV74hG4yQ3vbbW5y3XDSANFwZv02NaZEVhYuR0nIo9Pq5zeBvYa5BEN5r8N/FYaMZ4wmRprZhMW71ljwpP6UNOHH6Rw3F4YssWYAs2lDUS1BGNOPEIXBtjFFHpH/4Jm4MnZy4bOum1dIFO2lAxCGt7Rw0pBTOb5POisFbzhsJHlSGpuPEQXiWEkcdEXIQwJGeGjX1dgIEtSHi4IlQXFJNJ5ShjBZ6hByX7vWrFuOrlDiKiCB8IIiIlTyrgzJiKBCH0qpzlya7WZ7Knd8SZaIM3kKe3z7UQzd5HF5JiaOIyJ+9/0BoMEH2iuSKEuvjlivvoMbk8Mjof+0wWICEBc5vPyBRxr4ZiBPtNCQ6KiLS0jEq+lc/YUim2voje5FG4BUJB/I3+/FBMaIMIg4QNN38oGDKd0wjqyAyOT17+vy1BcpoRgQawc8jxCZ7RPix5fVtuagSmO4XKlbSCPbEUUHkt4U0pCw/Mz9HkkQq+A5XCnQnAbIZigIwnY9MjTnQcD0b4qggcnIhDdEYU/kCOHHwfHO+BHR+0i9bZ6R5kfBxoG2I4xqRwbGprsH5gIc05Jly48Cq4AjoQuxIS15iBvaTaM9zLTFLclICTZeUOP/3xC2jpILGNpLEz0RXxudlwfJyffY90nThaMt8KRBwvF/3mBoWQe7l2kea/jIKDVWP5gZ5Ycq2uUPkLEtDntSahigvQHtHd4hQGlJVvgZxRLs1QRjQxap45q7lsBuE9Ufa4AIRqoYU5mXgDuZ6vFvlAhG91RDvpvs0glNEUGEWBUSEDwQRn6wJwrBOEWn62xBdSAzOu0Ew3ScbXCMSwJgK/31lXxPuHZ/8ImoUXi5HiIAvmBXTwDsCmIbkZqWi9A3zuBoqg+IIEV5ADGYaQgk0ZUw+IgLgWTVEQ81d2Vabjjhkia3CKRRnUS9TyH0EcKBEhDlQCkFBxMtk/vVF6Zu+B5xsc/qJ19IeOSKsGqK5XKYXICrW0FlUbXwJIgjdON2JobWXVNUsjtYLBXCRFnCbFaaQIEJ403wKc8SsC+0Z+bXC1BJEeOgW0eS+uEgKFKyVIELpKbjzzv5WLzMpGOe8CyQG5oniHq4sD1m1pKoIvzjU2MNjFejz7kubg5PIw8L65v4fWy8TfLBwb20Z0jbngPKWjuqscJDDjT2k85C6um0Fr1YVqE2psRcM+/p4J2XuMGx3TalHBXCECNaAPO275n5ySzxBbrK3dmO8CiVAAViQDgop3Fld7N15nSIiNhY/jzjQ0C2+TogLnvLa9sIYp/Y//TGETwIU6YECiKzr87M7RAQK8BT4i/h1ES7ksrtqSnUZZM8pMBeu4euWqCACoy2dFhzW9UOSSFwEbRFBaSdAWNBW+8FCERFhMT4AI+LqDWyWPoJyBH4USaEdJAVVfQrtnhCB9Zby7EX8TIhYjg+S+vEFXkztFRExik97GDMf5NugBxGMGCnPXnjun7jaR25tPkLTWGoB0jlXEdekZcg+QcPYaJl+REiej526qJAvQFYPN/b6Kq6x9hGaL9LtUfhDRIyWU1rmxLtqSrSLa9wQcSXPSMYhrqLcj8tXcY0zIpbyjG1H0i3kE66EfNx0ttYo3tL1RzbQpjX2cyM0IPvmKVbd0wVZ6cn8eKLl5KoAgalLjBAheeZpODcFJ1dfDwHOkYodIsKmSHmOsbhKoYk1IsIgeAoKX5DnuBQT7EGJDyKCRDOz91xlbtLt1dIgbohosd6PQeTf9PyYNchjhoiYdydEJERExtjQR0IfCX1EhkDoIzKE/gco765KHggW0QAAAABJRU5ErkJggg=="},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(0),o=n(20),i=n(66);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p={marginTop:0},d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,u(t).apply(this,arguments))}var n,a,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){return r.createElement(o.If,{condition:this.props.isHidden},r.createElement(o.Else,null,r.createElement("h2",{style:this.props.style||p,className:this.props.className||""},this.props.title,r.createElement(i.a,{isLoading:this.props.isLoading,small:!0}))))}}])&&s(n.prototype,a),d&&s(n,d),t}()},,function(e,t,n){"use strict";function r(e,t){var n=t.indexOf(e);if(-1===n)return t.concat([e]);var r=t.slice();return r.splice(n,1),r}function o(e,t){for(var n=[],r=0;r<t.length;r++)n.push(t[r]),r<t.length-1&&n.push(e);return n}n.d(t,"b",function(){return r}),n.d(t,"a",function(){return o})},function(e,t,n){"use strict";n.d(t,"b",function(){return d}),n.d(t,"a",function(){return f});var r=n(0),o=n(872),i=n.n(o);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return function(t,n,r){return n in t&&t[n]instanceof e?null:new Error("Expecting ".concat(r," to receive {").concat(JSON.stringify(n),": ").concat(e.name,"} from context"))}}function d(e){return i()({store:p(e)},function(e){return{store:e.store}})}function f(e){var t;return(t=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,u(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r["Component"]),n=t,(o=[{key:"store",get:function(){return this.context.store}}])&&s(n.prototype,o),i&&s(n,i),t}()).contextTypes={store:p(e)},t}},function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"c",function(){return s}),n.d(t,"g",function(){return l}),n.d(t,"f",function(){return u}),n.d(t,"e",function(){return c}),n.d(t,"d",function(){return p}),n.d(t,"b",function(){return d});var r=n(1),o=n(12);function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var a="all";function s(){return{name:"CNA",type:"seg",displayMode:"FILL",features:[]}}function l(e){return r.keyBy(e||[],"name")}function u(e,t){var n=l(e),o=l(t),a=t.filter(function(e){return!r.isEqual(o[e.name],n[e.name])}).map(function(e){return e.name}),s=r.difference(e.map(function(e){return e.name}),t.map(function(e){return e.name}));return[].concat(i(a),i(s))}function c(e){var t=e.map(function(e){return[e.sampleId,e.chromosome,e.start,e.end,e.numberOfProbes,e.segmentMean]});return[["ID","chrom","loc.start","loc.end","num.mark","seg.mean"]].concat(i(t)).map(function(e){return e.join("\t")}).join("\n")}function p(e){return e.map(function(e){return{chr:Object(o.S)(e.chromosome),start:e.start,end:e.end,value:e.segmentMean,sample:e.sampleId,patient:e.patientId,study:e.studyId,numberOfProbes:e.numberOfProbes,sampleKey:e.uniqueSampleKey}})}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:600,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return Math.max(Math.min(t,r.uniq(e.map(function(e){return e.sampleKey})).length*o),n)}},function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){e.exports=n(25)(486)},,function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty;function o(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}e.exports=function(e,t){if(o(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(var a=0;a<n.length;a++)if(!r.call(t,n[a])||!o(e[n[a]],t[n[a]]))return!1;return!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(0),i=(r=o)&&r.__esModule?r:{default:r},a=n(1037),s=n(900),l=n(901),u=n(839),c=n(902),p=n(899),d=n(1043),f=n(815);i.default.Children.children=function(e){return i.default.Children.map(e,function(e){return e})||[]},Array.prototype.find||Object.defineProperty(Array.prototype,"find",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),r=n.length>>>0,o=arguments[1],i=0;i<r;i++)if(i in n&&(t=n[i],e.call(o,t,i,n)))return t}});var h={Table:a.Table,Tr:s.Tr,Td:l.Td,Th:u.Th,Tfoot:c.Tfoot,Thead:p.Thead,Sort:d.Sort,unsafe:f.unsafe};t.default=h,"undefined"!=typeof window&&(window.Reactable=h),e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}};var a,s=n(0),l=(a=s)&&a.__esModule?a:{default:a},u=n(815),c=n(806),p=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l["default"].Component),o(t,[{key:"render",value:function(){return(0,u.isUnsafe)(this.props.children)?l.default.createElement("th",r({},(0,c.filterPropsFrom)(this.props),{dangerouslySetInnerHTML:{__html:this.props.children.toString()}})):l.default.createElement("th",(0,c.filterPropsFrom)(this.props),this.props.children)}}]),t}();t.Th=p},function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(14),a=n(2),s=n(15),l=n(49),u=n(54),c=n(6),p=n(910),d=n(911),f=n(3);function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var v=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},_=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=m(this,y(t).apply(this,arguments))).dragging=!1,e}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,r["Component"]),n=t,(a=[{key:"svgRef",value:function(e){this.svgContainer=e&&e.children?e.children[0]:null}},{key:"handleSelection",value:function(e,t,n){this.isGenericAssay?this.props.onSelection(e[0].data.map(function(e){return e.stableId})):this.props.onSelection(e[0].data.map(function(e){return e.hugoGeneSymbol}))}},{key:"handleSelectionCleared",value:function(){this.tooltipModel&&(this.isGenericAssay?this.props.onGenericAssayEntityClick(this.tooltipModel.stableId):this.props.onGeneNameClick&&this.props.onGeneNameClick(this.tooltipModel.hugoGeneSymbol,this.tooltipModel.entrezGeneId)),this.props.onSelectionCleared()}},{key:"onPointMouseOver",value:function(e,t,n){this.tooltipModel=e,this.tooltipModel.x=t,this.tooltipModel.y=n}},{key:"onPointMouseOut",value:function(){this.tooltipModel=null}},{key:"getTooltip",value:function(){return this.tooltipModel?r.createElement(s.Popover,{className:"cbioTooltip",positionLeft:this.tooltipModel.x+15,positionTop:this.tooltipModel.y-33},this.isGenericAssay?"Entity: ".concat(this.tooltipModel.entityName||this.tooltipModel.stableId):"Gene: ".concat(this.tooltipModel.hugoGeneSymbol),r.createElement("br",null),"Log Ratio: ",Object(l.a)(this.tooltipModel.logRatio),r.createElement("br",null),"p-Value:"," ",Object(u.b)(this.tooltipModel.pValue,3,.01),r.createElement("br",null),"q-Value:"," ",Object(u.b)(this.tooltipModel.qValue,3,.01)):r.createElement("span",null)}},{key:"onClick",value:function(){this.dragging||this.handleSelectionCleared(),this.dragging=!1}},{key:"onSelectionComponentRender",value:function(){this.dragging=!0}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:"posRelative"},r.createElement("div",{className:"borderedChart inlineBlock",style:{position:"relative"},onClick:this.onClick},r.createElement(i.VictoryChart,{containerComponent:r.createElement(i.VictorySelectionContainer,{containerRef:this.svgRef,activateSelectedData:!1,onSelection:function(t,n,r){return e.handleSelection(t,n,r)},responsive:!1,onSelectionCleared:this.handleSelectionCleared,selectionComponent:r.createElement(p.a,{onRender:this.onSelectionComponentRender})}),theme:f.a,domainPadding:{y:20},height:350,width:350,padding:{top:40,bottom:60,left:60,right:40},singleQuadrantDomainPadding:!1},r.createElement(i.VictoryAxis,{tickValues:this.props.xAxisTickValues,domain:[-this.props.xAxisDomain,this.props.xAxisDomain],label:"Log Ratio",tickFormat:function(e){return e>=1e3||e<=-1e3?"".concat(e/1e3,"k"):e},style:{tickLabels:{padding:20},axisLabel:{padding:40},ticks:{size:0},grid:{strokeOpacity:1}},crossAxis:!1,orientation:"bottom",offsetY:60}),r.createElement(i.VictoryAxis,{label:"-log10 p-Value",dependentAxis:!0,tickCount:4,style:{tickLabels:{padding:135},axisLabel:{padding:165},ticks:{size:0},grid:{strokeOpacity:1}}}),r.createElement(i.VictoryLabel,{style:f.u,text:"← "+this.xAxisLeftLabel,x:60,y:300}),r.createElement(i.VictoryLabel,{style:f.u,text:this.xAxisRightLabel+" →",textAnchor:"end",x:310,y:300}),r.createElement(i.VictoryLabel,{style:f.u,text:"Significance →",x:320,y:210,angle:-90}),r.createElement(i.VictoryScatter,{style:{data:{fillOpacity:.4}},data:this.props.data,dataComponent:r.createElement(d.a,{onMouseOver:this.onPointMouseOver,onMouseOut:this.onPointMouseOut,fill:function(t){return e.isGenericAssay&&t.stableId in e.props.selectedSet?"#FE9929":!e.isGenericAssay&&t.hugoGeneSymbol in e.props.selectedSet?"#FE9929":t.qValue<.05?"#58ACFA":"#D3D3D3"}})})),r.createElement(f.e,{getSvg:function(){return e.svgContainer},filename:"enrichments-volcano",dontFade:!0,type:"button",style:{position:"absolute",top:10,right:10,zIndex:0}})),r.createElement(o.Observer,null,this.getTooltip))}},{key:"isGenericAssay",get:function(){return!!this.props.onGenericAssayEntityClick}},{key:"totalLabelWidths",get:function(){return Object(f.K)(this.props.xAxisLeftLabel,"Arial","13px")+Object(f.K)(this.props.xAxisRightLabel,"Arial","13px")}},{key:"xAxisLeftLabel",get:function(){return this.totalLabelWidths>200?Object(f.db)(this.props.xAxisLeftLabel,90,"Arial","13px"):this.props.xAxisLeftLabel}},{key:"xAxisRightLabel",get:function(){return this.totalLabelWidths>180?Object(f.db)(this.props.xAxisRightLabel,90,"Arial","13px"):this.props.xAxisRightLabel}}])&&h(n.prototype,a),c&&h(n,c),t}();v([a.observable],_.prototype,"tooltipModel",void 0),v([a.observable],_.prototype,"svgContainer",void 0),v([c.default,a.action],_.prototype,"svgRef",null),v([a.computed],_.prototype,"isGenericAssay",null),v([c.default],_.prototype,"handleSelectionCleared",null),v([c.default,a.action],_.prototype,"onPointMouseOver",null),v([c.default,a.action],_.prototype,"onPointMouseOut",null),v([c.default],_.prototype,"getTooltip",null),v([c.default],_.prototype,"onClick",null),v([c.default],_.prototype,"onSelectionComponentRender",null),v([a.computed],_.prototype,"xAxisLeftLabel",null),v([a.computed],_.prototype,"xAxisRightLabel",null),_=v([o.observer],_),t.a=_},function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(2),a=n(148),s=n(56),l=n.n(s),u=n(111),c=n(912),p=n(840),d=n(1),f=n(6),h=n(913),m=n(3),y=n(914);function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var E=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":S(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},w=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=b(this,v(t).apply(this,arguments))).overExpressedFilter=!0,e.underExpressedFilter=!0,e.significanceFilter=!1,e.checkedGenes=[],e._expressedGroups=e.props.groups.map(function(e){return e.name}),e.dataStore=new h.a(function(){return e.filteredData},function(){return e.highlightedRow},function(t){e.highlightedRow=t}),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,r["Component"]),n=t,(o=[{key:"filterByGene",value:function(e){return!this.selectedGenes||this.selectedGenes.includes(e)}},{key:"toggleSignificanceFilter",value:function(){this.significanceFilter=!this.significanceFilter}},{key:"onCheckGene",value:function(e){var t=this.checkedGenes.indexOf(e);-1!==t?this.checkedGenes.splice(t,1):this.checkedGenes.push(e)}},{key:"onGeneNameClick",value:function(e,t){this.clickedGeneHugo=e,this.clickedGeneEntrez=t}},{key:"onSelection",value:function(e){this.selectedGenes=e}},{key:"onSelectionCleared",value:function(){this.selectedGenes=null}},{key:"onChange",value:function(e){this._expressedGroups=d.map(e,function(e){return e.value})}},{key:"render",value:function(){if(0===this.props.data.length)return r.createElement("div",{className:"alert alert-info"},"No data/result available");var e=Object(u.o)(this.data,this.props.queriedHugoGeneSymbols||[]),t=d.maxBy(e,function(e){return Math.ceil(Math.abs(e.x))});return r.createElement("div",{className:l.a.Container},r.createElement("div",{className:l.a.ChartsPanel},this.isTwoGroupAnalysis&&r.createElement(p.a,{data:e,selectedSet:this.selectedGenesSet,xAxisLeftLabel:this.group2.nameOfEnrichmentDirection||this.group2.name,xAxisRightLabel:this.group1.nameOfEnrichmentDirection||this.group1.name,xAxisDomain:Math.ceil(Math.abs(t.x)),xAxisTickValues:null,onGeneNameClick:this.onGeneNameClick,onSelection:this.onSelection,onSelectionCleared:this.onSelectionCleared}),r.createElement(y.a,{selectedProfile:this.props.selectedProfile,groups:this.props.groups,sampleKeyToSample:this.props.sampleKeyToSample,queriedHugoGeneSymbols:this.props.queriedHugoGeneSymbols,oqlFilteredCaseAggregatedData:this.props.oqlFilteredCaseAggregatedData,selectedRow:this.selectedRow,enrichmentType:this.props.enrichmentType})),r.createElement("div",{className:l.a.TableContainer},r.createElement("div",null,r.createElement("h3",null,this.props.selectedProfile.name),!!this.props.isGeneCheckBoxEnabled&&r.createElement(c.a,{checkedGenes:this.checkedGenes})),r.createElement("hr",{style:{marginTop:0,marginBottom:5,borderWidth:2}}),r.createElement("div",{className:l.a.Checkboxes},r.createElement("div",{style:{width:250,marginRight:7}},r.createElement(m.b,{name:"groupsSelector",placeholder:this.props.groupsSelectorPlaceholder,onChange:this.onChange,options:this.options,value:this.selectedValues})),r.createElement("div",{className:l.a.FlexCheckbox},r.createElement("label",null,r.createElement("input",{type:"checkbox",checked:this.significanceFilter,onClick:this.toggleSignificanceFilter}),"Significant only"))),r.createElement(a.b,{data:this.filteredData,onCheckGene:this.props.isGeneCheckBoxEnabled?this.onCheckGene:void 0,onGeneNameClick:this.onGeneNameClick,dataStore:this.dataStore,mutexTendency:this.props.alteredVsUnalteredMode,checkedGenes:this.props.isGeneCheckBoxEnabled?this.checkedGenes:void 0,visibleOrderedColumnNames:this.visibleOrderedColumnNames,customColumns:d.keyBy(this.customColumns,function(e){return e.uniqueName||e.name})})))}},{key:"data",get:function(){return Object(u.n)(this.props.data,this.props.queriedHugoGeneSymbols||[],this.props.groups)}},{key:"filteredData",get:function(){return Object(u.p)(this.data,this._expressedGroups,this.significanceFilter,this.filterByGene)}},{key:"group1",get:function(){return this.props.groups[0]}},{key:"group2",get:function(){return this.props.groups[1]}},{key:"group1CheckboxLabel",get:function(){return this.props.alteredVsUnalteredMode?"Over-expressed":r.createElement("span",{style:{display:"flex",alignItems:"center"}},"Enriched in ",r.createElement(m.g,{text:this.group1.name}))}},{key:"group2CheckboxLabel",get:function(){return this.props.alteredVsUnalteredMode?"Under-expressed":r.createElement("span",{style:{display:"flex",alignItems:"center"}},"Enriched in ",r.createElement(m.g,{text:this.group2.name}))}},{key:"selectedGenesSet",get:function(){return d.keyBy(this.selectedGenes||[])}},{key:"isTwoGroupAnalysis",get:function(){return 2==this.props.groups.length}},{key:"customColumns",get:function(){return Object(u.m)(this.props.groups,this.props.enrichmentType,this.props.alteredVsUnalteredMode)}},{key:"visibleOrderedColumnNames",get:function(){var e=[];return e.push(a.a.GENE,a.a.CYTOBAND),this.props.groups.forEach(function(t){e.push(t.name+" mean")}),this.props.groups.forEach(function(t){e.push(t.name+" standard deviation")}),this.isTwoGroupAnalysis&&e.push(a.a.LOG_RATIO),e.push(a.a.P_VALUE,a.a.Q_VALUE),this.isTwoGroupAnalysis&&this.props.alteredVsUnalteredMode?e.push(a.a.TENDENCY):this.props.enrichmentType===u.e.DNA_METHYLATION?e.push(a.a.METHYLATION):e.push(a.a.EXPRESSED),e}},{key:"selectedValues",get:function(){return this._expressedGroups.map(function(e){return{value:e}})}},{key:"options",get:function(){return d.map(this.props.groups,function(e){return{label:e.nameOfEnrichmentDirection?e.nameOfEnrichmentDirection:e.name,value:e.name}})}},{key:"selectedRow",get:function(){var e=this;if(this.clickedGeneHugo)return this.props.data.filter(function(t){return t.hugoGeneSymbol===e.clickedGeneHugo})[0]}}])&&g(n.prototype,o),i&&g(n,i),t}();w.defaultProps={alteredVsUnalteredMode:!0,isGeneCheckBoxEnabled:!1,groupsSelectorPlaceholder:"High expression in ..."},E([i.observable],w.prototype,"overExpressedFilter",void 0),E([i.observable],w.prototype,"underExpressedFilter",void 0),E([i.observable],w.prototype,"significanceFilter",void 0),E([i.observable.shallow],w.prototype,"checkedGenes",void 0),E([i.observable],w.prototype,"clickedGeneHugo",void 0),E([i.observable],w.prototype,"clickedGeneEntrez",void 0),E([i.observable.ref],w.prototype,"selectedGenes",void 0),E([i.observable.ref],w.prototype,"highlightedRow",void 0),E([i.observable.ref],w.prototype,"_expressedGroups",void 0),E([i.observable],w.prototype,"svgContainer",void 0),E([i.computed],w.prototype,"data",null),E([i.computed],w.prototype,"filteredData",null),E([f.default],w.prototype,"filterByGene",null),E([f.default],w.prototype,"toggleSignificanceFilter",null),E([f.default],w.prototype,"onCheckGene",null),E([f.default],w.prototype,"onGeneNameClick",null),E([f.default],w.prototype,"onSelection",null),E([f.default],w.prototype,"onSelectionCleared",null),E([i.computed],w.prototype,"group1",null),E([i.computed],w.prototype,"group2",null),E([i.computed],w.prototype,"group1CheckboxLabel",null),E([i.computed],w.prototype,"group2CheckboxLabel",null),E([i.computed],w.prototype,"selectedGenesSet",null),E([i.computed],w.prototype,"isTwoGroupAnalysis",null),E([i.computed],w.prototype,"customColumns",null),E([i.computed],w.prototype,"visibleOrderedColumnNames",null),E([f.default,i.action],w.prototype,"onChange",null),E([i.computed],w.prototype,"selectedValues",null),E([i.computed],w.prototype,"options",null),E([i.computed],w.prototype,"selectedRow",null),w=E([o.observer],w),t.a=w},function(e,t,n){"use strict";var r=n(1),o=n(2);function i(e,t){return t.toLowerCase().indexOf(e.toLowerCase())>-1}function a(e,t,n){n||(n=i);var r=!1,o=!1,a=!1,s=!0,l=!1,u=void 0;try{for(var c,p=e[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){if("not"!==c.value.type){o=!0;break}}}catch(e){l=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw u}}o||(r=!0);var d=!0,f=!1,h=void 0;try{for(var m,y=e[Symbol.iterator]();!(d=(m=y.next()).done);d=!0){var g=m.value;if("not"===g.type){if(n(g.data,t)){r=!1,a=!0;break}}else if("and"===g.type){o=!0;var b=!0,v=!0,_=!1,S=void 0;try{for(var E,w=g.data[Symbol.iterator]();!(v=(E=w.next()).done);v=!0){var O=E.value;b=b&&n(O,t)}}catch(e){_=!0,S=e}finally{try{v||null==w.return||w.return()}finally{if(_)throw S}}r=r||b}}}catch(e){f=!0,h=e}finally{try{d||null==y.return||y.return()}finally{if(f)throw h}}return{match:r,forced:a}}var s=n(38),l=n(8),u=n(152),c=n.n(u);function p(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",function(){return b}),n.d(t,"b",function(){return v});var g=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":y(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},b="pan_can_atlas",v=function(){function e(t){f(this,e),this.store=t}return m(e,[{key:"getMetadata",value:function(e){return this.store.treeData.map_node_meta.get(e)}},{key:"cancerTypeContainsSelectedStudies",value:function(e){var t=this.getMetadata(e).descendantStudies;return r.intersection(this.store.selectableSelectedStudies,t).length>0}},{key:"getDepth",value:function(e){return this.getMetadata(e).ancestors.length}},{key:"isHighlighted",value:function(e){return!!this.store.searchText&&!!this.map_node_filterBySearchText.get(e)}},{key:"map_node_filterByDepth",get:function(){var e=new Map,t=!0,n=!1,r=void 0;try{for(var o,i=this.store.treeData.map_node_meta.entries()[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=d(o.value,2),s=a[0],l=a[1],u=!0;l.isCancerType&&(!l.descendantStudies.length||l.ancestors.length>this.store.maxTreeDepth&&!s.alwaysVisible)&&(u=!1),e.set(s,u)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return e}},{key:"map_node_filterBySearchText",get:function(){var e=function(e){e=e.toLowerCase().trim().split(/\s+/g).join(" ");for(var t,n,r=[],o=0;o<e.length;)'"'===e[o]?-1===(n=e.indexOf('"',o+1))?(r.push(e.substring(o+1)),o=e.length):(r.push(e.substring(o+1,n)),o=n+1):" "===e[o]?o+=1:"-"===e[o]?(r.push("-"),o+=1):-1===(t=e.indexOf(" ",o))?(r.push(e.substring(o)),o=e.length):(r.push(e.substring(o,t)),o=t+1);var i,a,s=[];for(o=0;o<r.length;)"-"===r[o]?(o<r.length-1&&s.push({type:"not",data:r[o+1]}),o+=2):(i=r.indexOf("or",o),a=r.indexOf("-",o),-1===i&&-1===a?(s.push({type:"and",data:r.slice(o)}),o=r.length):-1===i&&a>0?(s.push({type:"and",data:r.slice(o,a)}),o=a):i>0&&-1===a?(s.push({type:"and",data:r.slice(o,i)}),o=i+1):i<a?(s.push({type:"and",data:r.slice(o,i)}),o=i+1):(s.push({type:"and",data:r.slice(o,a)}),o=a));return s}(this.store.searchText),t=new Map,n=!0,r=!1,o=void 0;try{for(var i,s=this.store.treeData.map_node_meta.entries()[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var l=d(i.value,2),u=l[0],c=(_=l[1]).searchTerms;u.hasOwnProperty("studyId")&&(c+=u.studyId?u.studyId:""),t.set(u,a(e,c))}}catch(e){r=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}var f=new Map,h=!0,m=!1,y=void 0;try{for(var g,b=this.store.treeData.map_node_meta.entries()[Symbol.iterator]();!(h=(g=b.next()).done);h=!0){var v=d(g.value,2),_=(u=v[0],v[1]);if(!f.has(u)){for(var S=!1,E=0,w=[u].concat(p(_.ancestors),p(_.priorityCategories));E<w.length;E++){var O=w[E],C=t.get(O);if(!C.match&&C.forced){S=!1;break}S=S||C.match}if(f.set(u,S),S&&!_.isCancerType)for(var k=0,T=[_.ancestors,_.priorityCategories];k<T.length;k++){var P=T[k],x=!0,A=!1,j=void 0;try{for(var I,N=P[Symbol.iterator]();!(x=(I=N.next()).done);x=!0){var M=I.value;f.set(M,!0)}}catch(e){A=!0,j=e}finally{try{x||null==N.return||N.return()}finally{if(A)throw j}}}}}}catch(e){m=!0,y=e}finally{try{h||null==b.return||b.return()}finally{if(m)throw y}}return f}},{key:"map_node_filterBySelectedCancerTypes",get:function(){var e=new Map;if(this.store.selectedCancerTypes.length){var t=!0,n=!1,r=void 0;try{for(var o,i=this.store.selectedCancerTypes[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value,s=this.getMetadata(a);e.set(a,!0);for(var l=0,u=[s.ancestors,s.descendantCancerTypes,s.descendantStudies];l<u.length;l++){var c=u[l],p=!0,d=!1,f=void 0;try{for(var h,m=c[Symbol.iterator]();!(p=(h=m.next()).done);p=!0){var y=h.value;e.set(y,!0)}}catch(e){d=!0,f=e}finally{try{p||null==m.return||m.return()}finally{if(d)throw f}}}}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}else{var g=!0,b=!1,v=void 0;try{for(var _,S=this.store.treeData.map_node_meta.keys()[Symbol.iterator]();!(g=(_=S.next()).done);g=!0){var E=_.value;e.set(E,!0)}}catch(e){b=!0,v=e}finally{try{g||null==S.return||S.return()}finally{if(b)throw v}}}return e}},{key:"map_node_filterBySelectedStudies",get:function(){var e=new Map;if(this.store.selectableSelectedStudies.length){var t=!0,n=!1,r=void 0;try{for(var o,i=this.store.selectableSelectedStudies[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value,s=this.store.treeData.map_node_meta.get(a);e.set(a,!0);for(var l=0,u=[s.descendantStudies,s.ancestors,s.priorityCategories];l<u.length;l++){var c=u[l],p=!0,d=!1,f=void 0;try{for(var h,m=c[Symbol.iterator]();!(p=(h=m.next()).done);p=!0){var y=h.value;e.set(y,!0)}}catch(e){d=!0,f=e}finally{try{p||null==m.return||m.return()}finally{if(d)throw f}}}}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}return e}},{key:"mainView",get:function(){return new _(this.store,[this.map_node_filterByDepth,this.map_node_filterBySearchText,this.map_node_filterBySelectedCancerTypes])}},{key:"cancerTypeListView",get:function(){return new _(this.store,[this.map_node_filterByDepth,this.map_node_filterBySearchText])}},{key:"selectedStudiesView",get:function(){var e=this;return new _(this.store,[this.map_node_filterByDepth,this.map_node_filterBySelectedStudies,{get:function(t){return!e.getMetadata(t).isPriorityCategory}}])}}]),e}();g([s.cached],v.prototype,"map_node_filterByDepth",null),g([s.cached],v.prototype,"map_node_filterBySearchText",null),g([s.cached],v.prototype,"map_node_filterBySelectedCancerTypes",null),g([s.cached],v.prototype,"map_node_filterBySelectedStudies",null),g([o.computed],v.prototype,"mainView",null),g([o.computed],v.prototype,"cancerTypeListView",null),g([o.computed],v.prototype,"selectedStudiesView",null);var _=function(){function e(t,n){var r=this;f(this,e),this.store=t,this.filters=n,this.nodeFilter=function(e){return r.filters.every(function(t){return!!t.get(e)})}}return m(e,[{key:"getMetadata",value:function(e){return this.store.treeData.map_node_meta.get(e)}},{key:"getChildCancerTypes",value:function(e,t){var n=this.getMetadata(e);return(n.ancestors.length<this.store.maxTreeDepth||!t&&e.alwaysVisible?n.childCancerTypes:[]).filter(this.nodeFilter)}},{key:"getChildCancerStudies",value:function(e){var t=this.getMetadata(e),n=[];if(t.ancestors.length<this.store.maxTreeDepth)n=t.childStudies;else if(n=t.descendantStudies,e.alwaysVisible){var o=r.chain(t.descendantCancerTypes).filter(function(e){return e.alwaysVisible}).map(function(e){return e.cancerTypeId}).value();n=r.filter(n,function(e){return!o.includes(e.cancerTypeId)})}return n.filter(this.nodeFilter)}},{key:"getDescendantCancerStudies",value:function(e){return this.getMetadata(e).descendantStudies.filter(this.nodeFilter)}},{key:"getCheckboxProps",value:function(e){var t=this;if(this.getMetadata(e).isCancerType){var n=(this.store.selectableSelectedStudyIds||[]).map(function(e){return t.store.treeData.map_studyId_cancerStudy.get(e)}),o=this.getDescendantCancerStudies(e),i=r.intersection(o,n),a=i.length>0;return{checked:a,indeterminate:a&&i.length!=o.length}}var s=e;return{checked:!!this.store.selectableSelectedStudyIds.find(function(e){return e==s.studyId}),disabled:this.store.isDeletedVirtualStudy(s.studyId)}}},{key:"isCheckBoxDisabled",value:function(e){if(this.getMetadata(e).isCancerType)return!1;var t=e;return!!this.store.isDeletedVirtualStudy(t.studyId)}},{key:"clearAllSelection",value:function(){this.store.selectableSelectedStudyIds=[]}},{key:"onCheck",value:function(e,t){var n;this.getMetadata(e).isCancerType?this.store.forDownloadTab||(n=this.getDescendantCancerStudies(e).map(function(e){return e.studyId})):n=[e.studyId],n&&this.handleCheckboxStudyIds(n,t)}},{key:"getSelectionReport",value:function(){var e=this,t=this.store.selectableSelectedStudyIds||[],n=t.map(function(t){return e.store.treeData.map_studyId_cancerStudy.get(t)}),o=this.getDescendantCancerStudies(this.store.treeData.rootCancerType);return{selectableSelectedStudyIds:t,selectableSelectedStudies:n,shownStudies:o,shownAndSelectedStudies:r.intersection(o,n)}}},{key:"quickSelectButtons",value:function(e){if(!e)return{};try{return l.a.parseConfigFormat(e)}catch(e){return{}}}},{key:"toggleAllFiltered",value:function(){var e=this,t=this.getSelectionReport(),n=(t.selectableSelectedStudyIds,t.selectableSelectedStudies,t.shownStudies),o=t.shownAndSelectedStudies,i=[];i=n.length===o.length?r.without.apply(r,[this.store.selectableSelectedStudyIds].concat(p(n.map(function(e){return e.studyId})))):r.union(this.store.selectableSelectedStudyIds,n.map(function(e){return e.studyId})),this.store.selectableSelectedStudyIds=i.filter(function(t){return!r.includes(e.store.deletedVirtualStudies,t)})}},{key:"selectAllMatchingStudies",value:function(e){var t=this.getSelectionReport(),n=(t.selectableSelectedStudyIds,t.selectableSelectedStudies,t.shownStudies);t.shownAndSelectedStudies;this.store.selectableSelectedStudyIds=n.map(function(e){return e.studyId}).filter(function(t){return r.isArray(e)?e.includes(t):t.includes(e)})}},{key:"handleCheckboxStudyIds",value:function(e,t){var n=this,o=this.store.selectableSelectedStudyIds;o=t?r.union(o,e):r.difference(o,e),this.store.selectableSelectedStudyIds=o.filter(function(e){return!r.includes(n.store.deletedVirtualStudies,e)})}},{key:"isFiltered",get:function(){return this.store.selectedCancerTypeIds.length>0||this.store.searchText.length>0}}]),e}();g([o.action],_.prototype,"clearAllSelection",null),g([o.action],_.prototype,"onCheck",null),g([o.computed],_.prototype,"isFiltered",null),g([c.a],_.prototype,"quickSelectButtons",null),g([o.action],_.prototype,"toggleAllFiltered",null),g([o.action],_.prototype,"selectAllMatchingStudies",null)},function(e,t,n){"use strict";n.d(t,"b",function(){return g}),n.d(t,"a",function(){return b});var r=n(0),o=n(118),i=n.n(o),a=n(9),s=n(2),l=n(959),u=n(1),c=n.n(u);n(869);function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var y=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":m(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},g=1,b=0,v=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=d(t).call(this,e))||"object"!==m(o)&&"function"!=typeof o?f(r):o).trackSpecKeyToTrackId={},n.divRefHandler=n.divRefHandler.bind(f(n)),n.refreshOncoprint=c.a.debounce(n.refreshOncoprint.bind(f(n)),0),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,r["Component"]),n=t,(o=[{key:"divRefHandler",value:function(e){this.div=e}},{key:"getTrackSpecKey",value:function(e){var t=null;return c.a.forEach(this.trackSpecKeyToTrackId,function(n,r){if(n===e)return t=r,!1}),t}},{key:"refreshOncoprint",value:function(e){var t=this;this.oncoprint||(this.oncoprint=new i.a("#".concat(e.divId),e.width,e.initParams),this.oncoprint.setTrackGroupLegendOrder([g,b]),window.frontendOnc=this.oncoprint,e.oncoprintRef&&e.oncoprintRef(this.oncoprint)),this.oncoprint.webgl_unavailable||(Object(l.a)(e,this.lastTransitionProps||{},this.oncoprint,function(){return t.trackSpecKeyToTrackId},function(){return t.props.molecularProfileIdToMolecularProfile}),this.lastTransitionProps=c.a.clone(e))}},{key:"componentWillReceiveProps",value:function(e){this.refreshOncoprint(e)}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"componentDidMount",value:function(){this.refreshOncoprint(this.props)}},{key:"componentWillUnmount",value:function(){this.oncoprint&&(this.oncoprint.destroy(),this.oncoprint=void 0)}},{key:"render",value:function(){return r.createElement("div",{id:this.props.divId,ref:this.divRefHandler})}},{key:"sortByMutationType",get:function(){return this.props.distinguishMutationType&&this.props.sortConfig&&this.props.sortConfig.sortByMutationType}},{key:"sortByDrivers",get:function(){return this.props.distinguishDrivers&&this.props.sortConfig&&this.props.sortConfig.sortByDrivers}}])&&p(n.prototype,o),a&&p(n,a),t}();y([s.computed],v.prototype,"sortByMutationType",null),y([s.computed],v.prototype,"sortByDrivers",null),v=y([a.observer],v),t.c=v},function(e,t,n){"use strict";var r=n(0),o=n(15),i=n(9),a=n(66),s=n(6);function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":d(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,c(t).apply(this,arguments))}var n,i,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,r["Component"]),n=t,(i=[{key:"handleClose",value:function(){this.props.onHide()}},{key:"render",value:function(){return r.createElement(o.Modal,{show:this.props.show,onHide:this.handleClose,keyboard:!0,className:this.props.className},r.createElement(o.Modal.Header,{closeButton:!0},r.createElement(o.Modal.Title,{"data-test":"gene-panel-modal-title"},this.props.panelName)),r.createElement(o.Modal.Body,{style:{maxHeight:"calc(100vh - 210px)",overflowY:"auto"}},this.props.show&&this.props.isLoading&&r.createElement(a.a,{isLoading:!0}),this.props.show&&!this.props.isLoading&&r.createElement("div",{"data-test":"gene-panel-modal-body"},this.props.children)),r.createElement(o.Modal.Footer,null,r.createElement(o.Button,{"data-test":"modal-button",onClick:this.handleClose},"Close")))}}])&&l(n.prototype,i),s&&l(n,s),t}();f([s.default],h.prototype,"handleClose",null),h=f([i.observer],h),t.a=h},,function(e,t,n){"use strict";function r(e){setTimeout(function(){window.requestAnimationFrame(e)},0)}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(973),a=n.n(i),s=n(5),l=n.n(s),u=n(2),c=n(1),p=n.n(c),d=n(289),f=n(272),h=n.n(f),m=n(12),y=n(6);function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var w=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":E(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};function O(e){return e.promises?0===e.promises.length?"complete":m.H.apply(void 0,S(e.promises)):"pending"}var C=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=b(this,v(t).apply(this,arguments))).timeShown=0,e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentWillMount",value:function(){var e=this;this.timeShownInterval=setInterval(function(){e.props.show?e.timeShown+=1:e.timeShown>0&&(e.timeShown=0)},1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timeShownInterval)}},{key:"makeItem",value:function(e,t){var n,o,i,s=null,u=this.props.sequential&&t>this.firstIncompleteIndex;if(!u&&!e.hideIcon)switch(O(e)){case"complete":s=r.createElement("i",{className:l()("fa fa-sm fa-check",a.a["fa-check"])});break;case"pending":s=r.createElement(h.a,{name:"double-bounce",fadeIn:!1,className:a.a["pulse-spinner"]});break;case"error":s=r.createElement("i",{className:l()("fa fa-sm fa-exclamation-triangle",a.a["fa-exclamation-triangle"])})}return r.createElement("span",{className:l()(a.a["item-row"],(n={},o=a.a["not-invoked-item"],i=u,o in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i,n)),style:e.style},e.label,r.createElement("span",{style:{marginLeft:7}},s))}},{key:"render",value:function(){return this.props.show?r.createElement("div",{className:a.a.container},r.createElement("div",{className:a.a["items-container"]},this.items.map(this.makeItem)),p.a.some(this.items,function(e){return"error"===O(e)})&&r.createElement(d.a,null)):null}},{key:"items",get:function(){return this.props.getItems(this.timeShown)}},{key:"firstIncompleteIndex",get:function(){return this.items.findIndex(function(e){return"complete"!==O(e)})}}])&&g(n.prototype,o),i&&g(n,i),t}();w([u.observable],C.prototype,"timeShown",void 0),w([u.computed],C.prototype,"items",null),w([u.computed],C.prototype,"firstIncompleteIndex",null),w([y.default],C.prototype,"makeItem",null),C=w([o.observer],C),t.a=C},function(e,t,n){e.exports=n(25)(166)},function(e,t,n){e.exports=n(25)(101)},function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"b",function(){return f});var r=n(0),o=n(9),i=n(844);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},d=function(e){var t=e.genePanelIds,n=e.toggleModal;return t.length>0?r.createElement("span",{style:{maxWidth:400}},"Gene panels:"," ",t.map(function(e,t){return[t>0&&", ",r.createElement("a",{key:e,"data-test":"gene-panel-linkout-".concat(e),href:"#",onClick:function(){n(e)}},e)]})):r.createElement("span",null)},f=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=s(this,l(t).apply(this,arguments))).getGenesList=function(e){return e&&e.genes?e.genes.map(function(e){return r.createElement("p",{key:e.entrezGeneId},e.hugoGeneSymbol)}):null},e}var n,o,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=this.props.genePanelCache.get({genePanelId:this.props.panelName});return r.createElement(i.a,{panelName:this.props.panelName,show:this.props.show,onHide:this.props.onHide,isLoading:e.isPending},e.isComplete&&this.getGenesList(e.result))}}])&&a(n.prototype,o),c&&a(n,c),t}();f=p([o.observer],f)},,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(0),o=n(3),i=n(49);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,u(t).call(this,e))}var n,a,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r["Component"]),n=t,(a=[{key:"mainContent",value:function(){var e=this,n=this.props,o=n.barWidth,a=n.barHeight,s=n.barColor,l=n.totalCount,u=n.counts,c=n.textMargin,p=n.textWidth,d=this.props.freqColors||t.defaultProps.freqColors,f=u[this.props.mainCountIndex&&this.props.mainCountIndex>=0&&this.props.mainCountIndex<u.length?this.props.mainCountIndex:0]/l,h=(o||0)+(c||0),m=h+(p||0),y=[];return u.forEach(function(t,n){var r=n%d.length,o=r>=0?d[r]:d[0];y.push(e.frequencyRectangle(t,l,o))}),r.createElement("svg",{width:m,height:"12"},r.createElement("text",{x:h,y:"9.5",textAnchor:"start",fontSize:"10"},Object(i.c)(f)),r.createElement("rect",{y:"2",width:o,height:a,fill:s}),y)}},{key:"frequencyRectangle",value:function(e,t,n){var o=e/t,i=this.props,a=i.barWidth,s=i.barHeight;return r.createElement("rect",{y:"2",width:o*(a||0),height:s,fill:n})}},{key:"render",value:function(){var e=this.mainContent();return this.props.tooltip&&(e=r.createElement(o.d,{placement:"left",overlay:this.props.tooltip,arrowContent:r.createElement("div",{className:"rc-tooltip-arrow-inner"})},e)),e}}])&&s(n.prototype,a),p&&s(n,p),t}();p.defaultProps={freqColors:["lightgreen","green"],barColor:"#ccc",textMargin:6,textWidth:35,barWidth:30,barHeight:8}},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),o=n(826);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,l(t).apply(this,arguments))}var n,i,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["Component"]),n=t,(i=[{key:"render",value:function(){var e=this;return r.createElement("span",{style:{cursor:"default"}},r.createElement(o.a,{text:"M",tooltip:function(){return e.getToolTip(e.props.qValue)}}))}},{key:"getToolTip",value:function(e){return r.createElement("div",null,"Candidate driver gene, as determined by the ",r.createElement("b",null,"MutSig"),r.createElement("br",null),"algorithm.",r.createElement("p",null),"MutSig identifies likely driver genes by evaluating the",r.createElement("br",null),"frequency of observed mutations within the entire study.",r.createElement("p",null),"Note that not all mutations in this gene are necessarily",r.createElement("br",null),"functional/driver events.",r.createElement("p",null),r.createElement("span",null," Q-value: ",(e||0).toExponential(3)))}}])&&a(n.prototype,i),c&&a(n,c),t}()},function(e,t,n){e.exports={portalWidth:"mutationAssessorColumn-module__portalWidth__3YkFm",framedImage:"mutationAssessorColumn-module__framedImage__1asWn","ma-high":"mutationAssessorColumn-module__ma-high__gHJA0","ma-medium":"mutationAssessorColumn-module__ma-medium__3fKlP","ma-low":"mutationAssessorColumn-module__ma-low__VwQXC","ma-neutral":"mutationAssessorColumn-module__ma-neutral__2oq-W"}},function(e,t,n){e.exports={portalWidth:"siftTooltip-module__portalWidth__24Oa2",framedImage:"siftTooltip-module__framedImage__1C_nb","sift-deleterious":"siftTooltip-module__sift-deleterious__1aA2Z","sift-deleterious_low_confidence":"siftTooltip-module__sift-deleterious_low_confidence__2fL6l","sift-tolerated_low_confidence":"siftTooltip-module__sift-tolerated_low_confidence__1u4Hk","sift-tolerated":"siftTooltip-module__sift-tolerated__xqt6g","sift-tooltip-table":"siftTooltip-module__sift-tooltip-table__2KTtP"}},function(e,t,n){e.exports={portalWidth:"polyPhen2Tooltip-module__portalWidth__CFsKD",framedImage:"polyPhen2Tooltip-module__framedImage__kQY7t","polyPhen2-probably_damaging":"polyPhen2Tooltip-module__polyPhen2-probably_damaging__EBbPS","polyPhen2-possibly_damaging":"polyPhen2Tooltip-module__polyPhen2-possibly_damaging__1fyF8","polyPhen2-benign":"polyPhen2Tooltip-module__polyPhen2-benign__36nqJ","polyPhen2-unknown":"polyPhen2Tooltip-module__polyPhen2-unknown__3KRAw","polyPhen2-tooltip-table":"polyPhen2Tooltip-module__polyPhen2-tooltip-table__2WGNf"}},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAT5QTFRF/Pz8/////P396urqzMzMxsbGxsbGxsbGxsbGxsbGycnJ19fX9vb2/v7+2NjYwsLC+Pr69Pf38PT18fT19ff4+fr79PT0p7GzZ4CGXnuCYX+GZIWNaYqSbo+XZYWNZIKJYXyDbYWLs7m7SHiEAERVcpag+vv7gqavFFhpIWJytsvQgKeyLW5/IWd4Qn2Mv9PYfLTDKoOZKoWbTJqt9/r79Pj5c7zOM5u2MZq0WrDE5/H00+zyodfkVrjPRbHMRbHLULXOm9TjyOfv1OzypNjlndXkz+rx+vz8rdzopNjl7Pb56vX45/T36/b45vT36/b45/T36vX45PP3AENUAEBQAD1MADtKADpIDVJjCU5fB0xdBktcCExdDlJjIWd4KH6TJ3yRJ3qPJ3uQKHyRKYCVMJixMJawMJavMJex////SLEDvgAAAFN0Uk5TAAAAEzVMYW51e0l7fn57Z4OHi4qHggdcu9zu+Pr8+OvXtFC1/YwDhfjrS47u/ddHmv391gcKq/z9yxozdeX9/e19Q0KUo0oGqr0kPEc6SjhGPk2mXRMZAAAAAWJLR0QB/wIt3gAAAAlwSFlzAAAASAAAAEgARslrPgAAALpJREFUGNNjYGBmYWVj5+Dk5GBnY2VhZmDg4ubhhQMePi4GfhBfQFBIWEQUJMLPICYuISklLSMrKyMnr6CoJMbAoKwSHBIaFh4eFhoSrKLKyMCopq4RERkVHR0TGaupxQAUYNTWiYMAXT19RpAAg4FhfEJiUnKKkbEJWIDR1Mw8NS09w8LSihEiwGhtY2tn7+DoxAQTYGRydnF1YwIzIQKM7h6eXozIAozePoyoAr5+aAL+AWgCgUFQBgBUGxvs9K2IRwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNy0wOS0xNFQwMDoxMTowNSswMzowMPy1TyEAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTctMDktMTRUMDA6MTE6MDQrMDM6MDArn/wpAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAklQTFRF+/z+////dJ7j///+9Pv/a5TdqL7k4+v6eKDjsMnvtM75X5Hkp77ou9H33+j4vtT4wdf7cp/p3u3/ja/oaaP2ytjsZ47V/f//0N71wc3jKnft0OH8GmbeO3fcQHTSMW7VkbbyuNX/FWDcc5TS///6////2+X4z9zs1NviPoLihbT4/f7+bJ/umLLWyNTnNHzt/P3+1OP7wM7o0dznVoPMob3sY4zVR4jukLb0/v7+SILhz9vr//z0pb7gM3rlzeD9E17aWY/q/f3+R4Lhztnq///2jrfxG2rozd35RYHlgaHX0Nzw///+4+39cZrgtMXjqsn1GGjnf6nwkbTvd53iwtDjXIbOq8Pt/v39obrkN3PXLXnvfaju/v//8/j+gajrk7Hl//72sMTiPnrdt9D5+/z+qcz7AE/dcZzn8ff+iari9vf0+vnxTIfjZprvSo71QHradZjT4en2YIrV+fn03+jxOH/qeqnzKG7eY4rNVH/PiLPzxd37mbHe///3x9ToMWfIpL3roLjiT33PNnzrjLX1ibX04er1+vj18/PvXorWU4be9fj+8/X5NnfiGmjn5/D9+fv+WJTv3OLo5eru7e/vhazoL3Pk2ub6s8/6K3buPnTSm7Tja5zpQnDH7fH1/Pz6///4ga/xM3np4Or6SIboYJPmvszjRnXLp8LvlLvzLmnRydjs///8+Pr6UIjkSYTmwNX3LnLhrcXtjKnZS33V2eb70+P8gaLW///5pMj4CmHqnr31Lm7dztvu9/fy4unwQHTSe6HnW+6dZAAAACF0Uk5T+/7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+EjK2AQAAAAFiS0dEAf8CLd4AAAAJcEhZcwAAAEgAAABIAEbJaz4AAAEOSURBVBjTDcyDQkRRFAXQc7Nta6fJtt3Ltm3brsl2k227vqzWBywiZmhkbAKYCpmZW1iCR8IiVqLWYgziEjaStlLMjmAv7eDo5AzIuLi6Ae4EWQ9PL28fX8j5+QMBIMgHBgWHhIZBITwiEhyPEBUdExsXzyEhMSk5BRylIi09IzML2Tm5efkFhaAiVlxSCqBMsbyisqoaxCnV1NbVg4NyQ2NTcwuIqbSqtqmpg2m0a3ZoaYM6dbq6e3r7wLH+gcGh/3RYd2R0bHyCDzY5NT2DWZrTm19YXFpeAVtdW98AaHNre0ewu7eP7IPDo+MT0OnZ+cXl1TUfN7d3gvuHR3rSf355fXsHDD4+v75/fv8AgKdToRrTqZIAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTctMDktMTRUMDA6MjI6NDErMDM6MDD+ZbjKAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE3LTA5LTE0VDAwOjIyOjI2KzAzOjAwjPA3fwAAAABJRU5ErkJggg=="},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(0),o=n(3);function i(e,t,n){return function(i){var a=e(i);return null===a?r.createElement(o.p,{status:o.o.LOADING}):"error"===a.status?r.createElement(o.p,{status:o.o.ERROR}):null===a.data?r.createElement(o.p,{status:o.o.NA,naAlt:n}):t(a.data,i)}}},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),o=n(1),i=n(3);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,s;return t=e,s=[{key:"getData",value:function(e,t){var n=null;return t&&(n=t[e[0].uniqueSampleKey]||null),n}},{key:"sortBy",value:function(t,n){var r=e.getData(t,n);return r||null}},{key:"filter",value:function(t,n,r){var o=e.getData(t,r);return null!==o&&o.toUpperCase().indexOf(n)>-1}},{key:"isVisible",value:function(t,n){if(!t||!n)return!1;var r={};return t.forEach(function(t){var o=e.getData(t,n);o&&(r[o]=t[0].sampleId)}),o.keys(r).length>1}},{key:"download",value:function(t,n){return e.getData(t,n)||""}},{key:"render",value:function(t,n){var o=e.getData(t,n);return o?r.createElement(i.q,{maxLength:30,text:o||"",tooltip:r.createElement("div",{style:{maxWidth:300}},o)}):r.createElement(i.p,{status:i.o.NA,naAlt:"Cancer type not available for this sample."})}}],(n=null)&&a(t.prototype,n),s&&a(t,s),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(0),o=n(293),i=(n(789),n(3)),a=n(956),s=n.n(a);function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"renderFunction",value:function(t,n,o){var i=e.getGenomeNexusDataFromCache(t,n);return r.createElement("div",{className:s.a["exon-table"]},r.createElement("span",null,e.getExonDataViz(i,o)))}},{key:"getGenomeNexusDataFromCache",value:function(e,t){return 0!==e.length&&t?t.get(e[0]):null}},{key:"getExonDataViz",value:function(t,n){var a=null;if(null===t)a=i.o.LOADING;else if("error"===t.status)a=i.o.ERROR;else{if(null!==t.data){var s=e.getData(t.data);return null==s?s:r.createElement("span",{style:{display:"inline-block",float:"right"}},r.createElement("span",{style:{float:"left",width:"24px",textAlign:"right"}}," ",s.split("/")[0]," "),n&&r.createElement("span",{style:{float:"left",width:"34px",textAlign:"left",marginLeft:"4px"}}," ","/ ".concat(s.split("/")[1])," "))}a=i.o.NA}if(null!==a)return a===i.o.LOADING?r.createElement(o.Circle,{size:18,scaleEnd:.5,scaleStart:.2,color:"#aaa",className:"pull-right"}):r.createElement(i.p,{status:a})}},{key:"getData",value:function(e){if(!e)return null;var t=e.annotation_summary.transcriptConsequenceSummary.exon;if(t)return t;var n=e.transcript_consequences.filter(function(t){return t.transcript_id===e.annotation_summary.transcriptConsequenceSummary.transcriptId&&t.exon})[0];return n?n.exon:null}},{key:"download",value:function(t,n){var r=e.getGenomeNexusDataFromCache(t,n),o=r&&e.getData(r.data);return o||""}},{key:"getSortValue",value:function(t,n){var r=e.getGenomeNexusDataFromCache(t,n);if(r){var o=e.getData(r.data);return null==o?null:parseInt(o.split("/")[0])}return null}}],(n=null)&&l(t.prototype,n),a&&l(t,a),e}()},function(e,t,n){"use strict";n.d(t,"b",function(){return l}),n.d(t,"c",function(){return u});var r,o=n(0),i=n(3),a=n(821),s=o.createElement("svg",null,o.createElement("defs",null,o.createElement("pattern",{id:"stripePattern",patternUnits:"userSpaceOnUse",width:"4",height:"4"},o.createElement("path",{d:"M-1,1 l2,-2 M-.5,2.5 l3,-3 M0,4 l4,-4 M1.5,4.5 l3,-3d M3,5 l2,-2",stroke:"black",strokeWidth:".5"}))));function l(e){switch(e){case a.a.CLONAL:return r.BLACK;case a.a.SUBCLONAL:return r.STRIPED;case a.a.INDETERMINATE:return r.LIGHTGREY;default:return r.DIMGREY}}function u(e){return e===a.a.SUBCLONAL?s:null}function c(e){switch(e){case a.a.CLONAL:case a.a.SUBCLONAL:return r.BLACK;case a.a.INDETERMINATE:return r.LIGHTGREY;default:return r.DIMGREY}}!function(e){e.LIMEGREEN="limegreen",e.DIMGREY="dimgrey",e.LIGHTGREY="lightgrey",e.STRIPED="url(#stripePattern)",e.WHITE="white",e.BLACK="black"}(r||(r={}));var p=function(e){var t={width:40,display:"inline-block"};return o.createElement("div",{"data-test":"clonal-tooltip"},e.sampleManager?o.createElement("div",null,e.sampleManager.getComponentForSample(e.sampleId,1,"")):null,o.createElement("div",null,o.createElement("span",{style:t},"Clonal"),o.createElement("strong",{style:{color:"".concat(c(e.clonalValue))}},e.clonalValue!==a.a.NA?e.clonalValue.toLowerCase():e.clonalValue)),o.createElement("div",null,o.createElement("span",{style:t},"CCF"),o.createElement("strong",null,e.ccfExpectedCopies)))},d=function(e){return o.createElement("svg",{height:"10",width:"10","data-test":"".concat(void 0!==e.clonalValue?e.clonalValue.toLowerCase():"na","-icon")},u(e.clonalValue),o.createElement("circle",{cx:5,cy:5,r:4,stroke:c(e.clonalValue),"stroke-width":1,fill:l(e.clonalValue),opacity:l(e.clonalValue)!==r.DIMGREY?100:0}))};t.a=function(e){return e.clonalValue===a.a.NA?o.createElement("span",null,o.createElement(d,{clonalValue:e.clonalValue})):o.createElement(i.d,{overlay:o.createElement(p,e),placement:"left"},o.createElement("span",null,o.createElement(d,{clonalValue:e.clonalValue})))}},function(e,t,n){e.exports=n.p+"reactapp/images/58335fa45d1c6a16c7d06eabd2ecee93.png"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZMAAAG2CAYAAAC6fWvkAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAABOvAAATrwFj5o7DAAAAB3RJTUUH4QgXDAozoFc2mAAAIABJREFUeNrt3Xl8VPW9//FvkpkhC4SQsAkuuKHiVisTCrZel1ttq17rQ6xttdd7r7a/3uq97eNhtFbbCiQh20Cxtra9Uu21rUKAAGEnFAKYEJiETXYhk5nJrJlMkklmYeacOb8/6u/XWlmSkGTOmXk9/8QwOef9PfLOJ3O+Z9IURREAzq/oT61Lq566+rm0tDTCAM4jnQiA81t/yD/3/br2Z//Y4P1P0gDOL43JBDg3RVHEnNf2f2x1BK+bUJDpNFcapxp0TCcAkwkwAH/Y7X3B6gheJ4QQHZ2RKW/WOV4nFYDJBOi3SEwWhS+3uHz+yOT/92ejR+u7zFXG/LHZOgICmEyAi3tzq6v474tECCH6+mLjKtbZf006AJMJcFHdISndWLSvMxiU8v7xvxn0GcEGk3HG1DyDjaQAJhPgvMpqbW+dq0iEECIak3OKV7ZVkRJAmQDnZeuMTFu2zfmdC33N+gb3Y8ccodtJC6BMgHMqrrGZYrF49oW+Jh4X+nkr2haTFkCZAJ9xpD10x8YG96P9+doPD/juazgVuJ/UAMoE+JR51a2LFUXo+v/1FhOpAZQJ8P/tOtnz5cZD/nsG8neOftzzuTUtnd8mPYAyAYQQQsxfNrgpo2yFpUSWub0eoEyQ8lY1+54+3hq4bTB/1+4KXf3ubs+PSBGpjk2LSGmSrIjZP2mxODyhaYN9jfw8g3dflXFStiGDQMFkAqSipfXuokspEiGE8HdHJ76xxVlGmmAyAVJQMCqLwiKzt6snOuFSXys7SxdoqjJeMX6MPkCyYDIBUsiSjY7KoSgSIYQIhaXc8rV2NjKCMgFSSUdvLP+dTe3/Zyhfs3qH89ttvsh1pAvKBEgRC9fYFoUjUu5QvqYkxbPmr7QuIl1QJkAKsHgj16/a4XpyOF57a5Pn4QO2YCEpgzIBkty8VW2LJDmeNRyvrSgifV51K++dgDIBktl+a+8Xtu31PjSc38P8Uddd2452P0TaoEyAJPX68rbFijL81/2C5a2VpA3KBEhCdUe6/6XlaNfskfhep619M5Y3dfwHqYMyAZLMguWtFSP5/SpWts2PSWwKBmUCJI0P9nQ8d8bWd+NIfk93R/jy3+1w/YT0kQp4nAqSXlRSxKwfN7d7fOGpI/29c8foO5tNxvGjM3UsBJhMAC377XbXa4koEiGECPTGCkwbHL9gFcBkAmhYICyJwpfMnYHeWH6ijmHUqIy+PVXGGyaPNThZETCZABpk2uB4I5FFIoQQZ8/Ko0tW27hVGJQJoEWunujU97a0P6uGY1mz0/nEKXd4BqsCygTQmNIaW2U0Kueo4VjicWGYt6KNx6yAMgG05KQ7fPOaXc65ajqm+uaOB5rO9N7N6oAyATRifnXb4nhcGFR2WGnzlluYTkCZAFqw53TgnvqWji+r8dgOn+y+c8Mh/+OsEigTQOXmLbeYhBBpaj2+kuWWcm7JB2UCqNj6Q/65H53quVPNx2h1BK/73w+9z7NaSCZsWkTSkGVF3PWz/adtjuC1aj/W8fmZ7n2Vd16Wqc9g4cBkAqjJew3eF7RQJEII4fNHJv9qq2sBqwYmE0BFwjFZFL7U4u7sikzSyjHn5Oi6zabCgrxsXZwVBJMJoAK/2uoq1lKRCCFEMCjlldfaf83qgckEUIGuoKQvfGmfNxiU8rR27Hp9emh3xcybryzIbGMlwWQCJFD5OtubWiwSIYSIxeLZxTU2E6sIygRIIFtnZNqyOud3tHwOGxvcjx5pD93BaoIyARKkuMZmiknxbC2fg6II3bwVbYtYTVAmQAJ8ZA9+fmOD+9FkOJfGg757d57oeZBVBWUCjLD5KyyLFEUkzYerz19mqWJVQZkAI6j+RM9XGg/570mmczphCdy6qtn3NKsLygQYIQuWWZLyY3DLq9uKJZnb9UGZAMNuVbPv6ROWwK3JeG4OT2ja0np3EasMrWHTIjRFkhXxhZ+0tDk9oauS9RzHjTV07DMZJ+YYeAgkmEyAYbG03l2UzEUihBBdPdEJSzY6KlltMJkAwyAYlUVhkdnb1ROdkOznmpWZ0dtkKpw2YYzez8qDyQQYQks2OipToUiEECIckceUreExK6BMgCHVEYgVvLPJ/v1UOueVO1zfbO0IT2f1QZkAQ6Rsra0qHJHHpNI5S3I8a/5KK9MJKBNgKLR2hKev3OH6Ziqe+7a93odaLL1zuApAmQCXaP5Kq0mS41mpeO6KItLnrWhjOgFlAlyKFkvvnG17vQ+ldAZHu2Zv/aj7Ua4GUCbAIM1b0WZSFK7T4urWCm7jB2UCDMLWj7ofbTnaNZskhDhj67thWZPvOZKAWrFpEaqkKIq4++cHTpyx9d1AGn81sSDTua/SONWgSyMMMJkA/bGsyfccRfJp3s7IlN9ud71GEmAyAfohKili1o+b2z2+8FTS+LQxo/VdZpMxPzdLRxhgMgEu5LfbXa9RJOfW2xcbZ9rgeIMkwGQCXEAgLAljkdnf2xcbRxrnZjBkBBurjDdNyTPYSQNMJsA5mDY43qBILiwalXNKV9sqSAKUCXAOzu7oFe9taX+WJC5u7S7n3OOO0G0kAcoE+AcLV9vKo1E5hyQuLh4X+gWreAgkKBPgU467Qres2eWcSxL9t7Ol48sNpwL3kQQoE+ATxSusi+JxYSCJgZlXbWE6AWUCCCFE4+nAvfUtHQ+QxMAd/bjnjnUH/N8gCVAm4Kfr5fx0fSlKq1vLZJlb/EGZIIWtP+Sfe+RUz+dJYvBsztA17zV4/oskkEhsWkTCyLIi7vrp/tM2Z/Ba0rg0+eMMHnOVcXKWPoMwwGSC1PJeg/cFimRo+Luik97c4iwhCTCZIKWEY7IwvmR2+7uik0hjaORk6XqaFhmnFuTog6QBJhOkhF9tdRVTJEMrGJbGVtTaF5MEmEyQErqCkr7wxX0dwbA0ljSGlk6XHt5dMfPWq8ZnniENMJkgqVWss/+SIhkekhTPKq6xVpEEKBMkNWtn5JoP6hz/ShLDZ1Oj55GDtqCRJECZIGmV1NgqY1I8mySGj6II3YIVbAQFZYIkddgenLmxwf0oSQy/psP+u7cf7fkaSYAyQdJZsMJSpSiCDy8fIfOrz/DeCSgTJJcdx3u+2njIfw9JjJyP2/pmrDD7niEJUCZInqlkuaWSFEZeebWlOCZx+z8oEySBVc2+p09aAreQxMhzecNXvF3vfpkkMNzYtIhhJcmKmPVKs9XlDV9JGokxNlff2VxVOD4nk4dAgskEGrW03l1EkSRWTyBWsHiTg1uFwWQCbQpGZGF82dzR3RMdTxqJlTkqo7fJVHj9xFy9hzTAZAJNWbLZUUmRqEPkrDymdI2NmyBAmUBbOgKxgnc22b9PEupRU+968mNP+CaSAGUCzShba6sKR+QxJKEeshwftWAVD4EEZQKNOO0J37hih+vbJKE+f9nr/dq+1t4vkgQoE6hecY21Upbjo0hCldIWVLcxnYAygbo1W3rvqmvyPkwS6rX/eNcXNhzyP04SoEygWvNXtFUJIdJIQt1Kqy1lbAsAZQJV2nzY/1jL0a7ZJKF+be3B6//U4OVuOwwZNi1iSCiKIr70swMnW+1900lDGybkZ7r2Vt45JVPPY1bAZAKVWNbke44i0ZYOf+Syt7a5fk4SYDKBKkQlRRS+bHZ4OyNTSENbcnJ03WZTYUFeti5OGmAyQUL9drvrNYpEm4JBKc+03v4GSYDJBAnVE5KE8SWzv68vNo40tEmvTw81VBbOuDzfYCUNMJkgIRZvciyhSLQtFotnl65pqyAJXAodEWCwfL2x+w+eCXzv9hvyCEPjbN7IE23eiHnaxMxFpIHB4NdcAIBLxq+5AACUCQCAMgEAUCYAAFAmAADKBABAmQAAKBMAACgTAABlAgCgTAAAlAkAAJQJAIAyAQBQJgAAygQAAMoEAECZAAAoEwAAZQIAAGUCAKBMAACUCQCAMgEAgDIBAFAmAADKBABAmQAAQJkAACgTAABlAgCgTAAAoEwAAJQJAEB9dESQWt7Z5a5d8aH3EZLAcLr/9vyGoocu/yJJpI40RVFIIUU4uqNX3lVkPhaNyTmkgWH9hyVNSJuK75x92xU5zaSRGvg1VwopW20ro0gwEhRF6IpXWitJgjJBkjnmCN2+ZpfzCZLASGk46Lt3x/Ger5IEZYIkUrLKWhmPCz1JYCQtWG5hOqFMkDQ/IZ4K3F/f0vEASWCknbQEblnd3PkUSVAmSAKvL7MsIgUkbCpe3rpQkrnRhzKBpq0/5J977EzP7SSBRHF5w1f+fpf7RZJIbtwanMRkWRFzXmtptbtCV5MGEilvrMFnrjROyMnMIAwmE2jNew3eFygSqEF3T3T8G1uc5STBZAKNCUVlUfiS2ePvjk4kDahB5qiM3r2mwqsn5Oo7SYPJBBrxVp1rAUUCNYmclceUr7NxqzBlAq3w9cZyf7vO9kOSgNpU/8X11GlP+EaSoEygAaYN7RWhsJRLElAbWY6PKqnhMSuUCVTP6otc+36d4xmSgFptbfI+3GzpvYskKBOoWMlqW4UkxbNIAiqWtmBFG9MJZQK1OmgLGjc2uB8jCahd89GuOZsP+7lWKROocipZaalUFNYU2lBcbSlnawJlApXZdrT7ocZD/ntIAlphsQenL9/re5YkKBOo6qe8Vn4HDc0pq7YsiEpMJ5QJVGFVs+/pj9v6ZpAEtKajMzLld9tdr5KE9vE4FY2LSYqY9Uqz3d0Rvpw0oEWjR+u7zFXG/LHZOsJgMkGi/H6nu4gigZb19cXGLd7kWEISTCZIkGBEFncW7fMFemMFpAEtM+gzgg0m44ypeQYbaTCZYIQt2eKooEiQDKIxOadsta2MJCgTjDBvIDZp6Qb7D0gCyWLNLucTxxwhPhWUMsFIKl9rKzt7Vh5NEkgW8bjQl6ziIZCUCUbMx57wTSt2uL5NEkg29S0dDzScCtxPEpQJRkBJjbVCluOjSALJ6PVllkWkQJlgmO090/uluibvwySBZHXsTM/t6w/555IEZYLhnEpWtVUIIdJIAsms+IPWSllm2wJlgmGx4ZD/8ZajXbNJAsnO7gpd/V6D9wWS0A42LWqEoijirp/uP9XWHryeNJAK8vMM3n1VxknZhgzCYDLBUFnW5HuOIkEq8XdHJ/66zlVMEkwmGCKRmCxmvdzi7PBHLiMNpJLsLF2gqcp4xfgx+gBpMJngEr29w/MqRYJUFApLuVUb7GxkZDLBpeoOSenGon2dwaCURxpIRTpdenhXxczbpo3PPE0aTCYYpF9sciymSJDKJCmeVVJjrSAJygSD1O6PXvWHTfbvkgRS3aZGz9cP2IKFJEGZYBDK19oWxmLxbJJAqlMUkV6y0sJ7J5QJBupoe+hza3Y5nyAJ4K/2HPL/U92Rbh4lRJlgIEprrBXxuNCTBPA3xdWtvHdCmaC/dp8M/HN9S8cDJAF82mlr34yVZt93SIIyQT/Mr27lEdzA+ab25ZaFMYktDZQJLmj9If/cY6cDt5EEcG6ejvDlS3e6XyIJdWHToorIsiJmv9ZiaXeFppEGcH65Y/SdzSbj+NGZOsJgMsE/eq/B+wJFAlxcoDdWsGSzs4okmEzwD0JRWRhfMnu6uqMTSQO4uFGjMvr2VBlvmDzW4CQNJhN84q061wKKBOi/s2fl0RW19lKSYDLBJ3y9sdxZRWZ7OCLlkgYwgJ+G00V0e5nxjumTs46RBpNJyjNtaK+gSICBi8eFoaTGWk4SlEnKa/NFrnu/zvEMSQCDs22v9+GmM713kwRlktJKV9vKJSmeRRLAoKWVrmxjOqFMUtcBW7BwY4P7MZIALk3Lsa7Z6w74v0ESlElqTiUrLRWKwhoAQ2HhCkspNxRRJimn7kj3w42H/PeQBDA0rI7gdX/e4/seSSQGtwYnyN0/33/stLXvJpIAhs74/Ez3vso7L8vUZxAGk0nyW9Xse5oiAYaezx+Z/Lu/eH5KEkwmSS8mKaLwlWa7pyN8OWkAQy8nR9dtNhUW5GXr4qTBZJK03tntfpEiAYZPMCjlLdroWEISTCZJqy8iiZlFZl+gN1ZAGsDw0evSQ7srZ958ZUFmG2kwmSSdN7Y4KygSYPjFpHh2+VpbGUlQJknH3ROdsnSD/QckAYyMtbvcc4+0h+4gCcokqVTW2kvOnpVHkwQwMhRF6EpWtVWSBGWSNE65wzOqtzueIglgZO3a7/vnnSd6HiQJyiQplK62lsfjwkASwMibv8zCx/tSJtq390zvl+qavA+TBJAYJyyBW2sPdD5JEpSJtqeSVW3lQog0kgASZ8EHlgpJZhsEZaJR6w/55zYf7ZpDEkBiOT2hq9770PPfJDF82LQ4TBRFEXNe2/+x1RG8jjSAxMsba/CZTcYJOQYeAslkoiHLmnzPUSSAenT3RMf/aquzlCSYTDQjEpNF4cstLp8/Mpk0APXIyszobTIVTpswRu8nDSYT1Xt7h+dVigRQn3BEHlO5zs7nxTOZaGCUDknpxqJ9ncGglEcagProMtLD9RV3fu6aCVmnSIPJRLV+scmxmCIB1EuS41mlNbYKkqBMVKvdH73qD5vs3yUJQN02NXoebbH0cts+ZaJO5WttC2OxeDZJAKqXVlJj5b0TykR9jraHPrd6p/MbJAFow97D/i9t+aj76yRBmahKaY21QlGEjiQA7Sipbi3nJiTKRDV2nez5cn1LxwMkAWjLGVvfDSv2df4bSVAmqjB/mcVECoA2LVzeWhqVmE4okwRbf8g/93hr4DaSALTJ2xmZsrTe/WOSuDRsWrwEsqyIL/ykxeLwhKaRBqBdY0bru8wmY35uFm97MpkkwB8bvc9TJID29fbFxi3Z5FxEEkwmIy4UlYWxyOzt6olOIA1A+wz6jGCjyXjTlDyDnTSYTEbMW3WuBRQJkDyiMTmnfK2NR9RTJiOnozeW/5ta2w9JAkguNfXObx53hLihhjIZGYs2tJeGI1IuSQDJJR4X+tLVPGaFMhkBFm/k+ve3Op4hCSA5bTd3fLXhVOA+kqBMhtXCtbYySY5nkQSQvMpq2haSAmUybPZbg7M2NrgfIwkgyf9fP949a21L57dIgjIZnqmkxlqmKGQGpMR0stJSIstsnaBMhljdke5/aTzou5ckgNRgc4au+fMe73+SRP+wabGfvvSz/cfP2PpuJAkgdeTnGbxmk3FSlj6DMJhMLt2qZt/TFAmQevzd0YlvbXO9ThJMJpcsJimi8JVmu6cjfDlpAKknO0sX2LvIOKUgRx8kDSaTQXtnt/tFigRIXaGwlLt4Q3sFSTCZDFpfRBIzi8ydgd5YPmkAqUunSw/vrph561XjM8+QBpPJgL2xxVlBkQCQpHhW2RobGxkpk4Fz90SnvL3e/jxJABBCiHUfuucetAWNJEGZDEhlrb0kGpVzSAKAEEIoikhfWMNDICmTATjpDt9cvd3xFEkA+HsfHvDdt/1oz9dI4rP4wONzWLW3491br88zkASAz/z7sM/z1n03j51GEp/G3VwAgEvGr7kAAJQJAIAyAQBQJgAAUCYAAMoEAECZAAAoEwAAKBMAAGUCAKBMAACUCQAAlAkAgDIBAFAmAADKBAAAygQAQJkAACgTAABlAgAAZQIAoEwAAJQJAIAyAQCAMgEAUCYAAMoEAECZAABAmQAAKBMAAGUCAKBMAACgTAAAlAkAQH10yXAS1s7Ij37w9qlF8TjlCEBbSr51ddmdV495VevnkaYoiuYX499+c6J2a5P3ES5LAFpz7ZWjT+wu/vxNWj8Pzf8kv+d04B6KBIBWnbH13biq2fc0ZZJgZTXWUi5HAFpW8oGlPCZp+7dEmi6T2gOdTzYf7ZrDpQhAyzy+8NTf73QXafkcNPueiaIoYvar+0/bnMFruRQBaN2Y0fous8mYn5ulzfuiNDuZLN/re5YiAZAsevti497c6qxgMhlB4ZgsjC+Z3f6u6CQuQQDJwmDICO4xGW+4bKzBwWQyApbu8LxKkQBINtGonFNVay9mMhkBXUFJX/jivo5gWBrLpQcg2aSni1jdwpmfv+my7CNMJsNoyWZHFUUCIFnF40Jfvsa2UHMlqKWDtXVGpv1ho/27XG4Aklldk/eRPacD91Amw6Sytr00JsWzudQAJLuFNVZNTSeaKZOP7MHPr97p/AaXGIBU0HK0a3btgc4nKZMhVrbGtlBRkuMpxwDQr+mkuq1UKzdJaaJM6k/0fKW+ueNBLi0AqcTmDF67rMn3nBaOVRO3Bt877+BHJy2BW7i0AKSa/HEGj7nKODlLn8Fkcik2HPI/TpEASFX+ruikt3d4XmMyuQSSrIhZrzRbXd7wlVxSAFJVTpauZ9+iwgnjcnQxJpNB+FOj93mKBECqC4alsb/Y5DAxmQwmvKgsjEXmju6e6HguJQCpTq9LD+2qnHnrVQWZrUwmA/CbOtcCigQA/iomxbMra9tL1Hp8qiyTjkCs4K211h9x+QDA36zZ6XzysD04kzLpp0Ub20siZ+UxXDoA8DeKItLLVqvzIZCqK5PWjvD0P291/DuXDQB81s6Wji/vON7zVcrkIsrX2EtlOT6KSwYAzm3+MksVZXIBLZbeOes/dD/OpQIA53eqLXDzugN+VT34VlVlUrbGXiKESONSAYALm/f+GZMkq2drh2rKZMtH3V9vPOi7l0sEAC7O5Q1f8ccGz3+p5XhUs2nxiz/df7LV3jedSwQA+mdsrr6zuapwfE5m4h8CqYrJZHVz51MUCQAMTE8gVvDrbU5VbGRM+GQSlRRR+LLZ4e2MTOHSAICByRyV0bvXVHj1hFx9Z0pPJu/udr9IkQDA4ETOymOqNtgTvpExoZNJICyJmUVmf19fbByXBAAMTkZG+tkdZXd+7rpJWSdScjJ5c6uzgiIBgEsjy/FR5WsT+5iVhJWJszt6xdvr7M9zGQDApdvY4Pl6s6X3rpQrE9M6+/xoTM7hEgCAIZG2sMaasOkkIWVy3BW6pXq742nWHgCGTtNh/92bD/sfS5kyqVhjWxiPCz1LDwBDq7jaUp6IG6tGvEwaTwfu3drkfYQlB4ChZ7EHp69s7nwm6cukvMZawnIDwPApeb+1LCqN7HQyomVSu7/zm81Hu+aw1AAwfDr8kcuW1rtfHsnvOWKbFhVFEbNfbTljc4auYakBYHjl5Oi6m02F48Zm65JrMlm+1/csRQIAIyMYlPJ+ucVpSqrJJByThfEls9vfFZ3EEgPAyNDr00ONpsKbpuYZbEkxmSzd4XmVIgGAkRWLxbMra+3FSTGZdAUlvfHFfb5QWMplaQFgZKWlCamudObMGVOzD2l6Mlmy2VFFkQBAYiiK0JWttZUO9/cZ1jKxdkaueXej/XssJwAkzl/2eh9qOBW4X7NlUrWufYEkxbNYSgBIrLJh3jA+bGVy2B6cubre+S2WEAASb//xri+sbu58SnNlUr7GVqIoif9YYADAJ9PJSkuJLA/PTVfD8o/9juM9X61v7niQpQMA9Wh3haa9v8f7/eF47WG5Nfie1w8eOdUWuJmlAwB1GZdn8JqrjJOyDRnqnkw2HPI/TpEAgDp1dUcn/s92z89UPZlIsiJmvdJsc3nDV7BkAKBOWZm6wF6T8YrxY/QBVU4mf2r0Pk+RAIC6hSNS7pJN7UO6kXHIJpNgVBYzX9zn6wnEClgqAFA3XUZ6eFflzNumjc88rarJ5Dd1rgUUCQBogyTHsypqbUO2kXFIyqQjECt4a631RywPAGhH7S73EwdswULVlMmije0lkbPyGJYGALRDUUR6+WrrQlWUyWlP+MY/b3X8O8sCANqze7/v/roj3Q8nvEwqa+3FshwfxZIAgDYVV7dWJrRMmi29d63/0P04SwEA2nXa2ndT7f7ObyasTMrX2IuFEGksBQBo2+vvt1bFpMFvFRl0mWw+7H+s8aDvXpYAALTP0xG+/L0Gzw8H+/cHvWnxrp+2nLTYg9NZAgBIDrlj9P5mk7FgdKZuZCaT1c2dT1EkAJBcAr2x/F/VuQZ1q/CAJ5OopAjjy2ZHR2dkCtEDQHIxGDKCTSbj9MljDc5hnUze3e1+kSIBgOQUjco5pg3t84d1MgmEJTGzyOzv64uNI3IASE7p6SK6vcx4x/TJWceGZTJ5c6uzgiIBgOQWjwtD+VrbgN476XeZOLujV/zPOtsLxAwAyW9zo+fRpjO9dw95mSzaYJ8Xi8WziRgAUkN5jbXfH6DVrzI57gjdtnyb4ztECwCpY98R/xfXHfB/Y8jKpKLWVhKPCz3RAkBqKV1hWdifG7UuWiYNpwL3bW3yPkKkAJB6bI7gtdX7Oi/6MSMXLZOKNdZi4gSA1FXyQWtZJCYPvkzWtnR+q/lo1xyiBIDU1dkVmfT7eu8rF/qa825alGVFzHmtpdXuCl1NlACQ2nKydD3mxYX5edm6+IAmkxVm37MUCQBACCGCYWnsG5sdpgFNJuGYLIxFZo+/OzqRCAEAQgih16WHdlfOvPnKgsy2fk0mS3d4XqVIAAB/LybFs6vWtxf3azLpDMZyZr1odobCUi7RAQA+VRppQtpSMrPwlsuzD1xwMvnlZmcpRQIAOBdFEbqFq62feQjkp8rE6otc++5G+/eICwBwPvXNHV/ZeaLnwfOWSdX69vmSFM8iKgDAhVSuti44Z5kctAWNq+ud3yIiAMDFHDjRXbjC7HvmM2VSudZWrCgD/xhfAEBqKq+2LJBk5W9lsv1oz9fqmzseJBoAQH+5vOEr/9zo/YEQn9wafPfP9x89be2bQTQAgIHIG2vwmU3GCRnGx/778f/d3P48kQAABipyVs42ZOvTdE0f9/7TnNvz64kEADAYx9uDt6b15xO0AAC4EO7eAgBQJgAAygQAQJkAAECZAAAoEwAAZQIAoEwAAKBMAACUCQCAMgEAUCYAAFAmAADKBABAmQAAKBMAACgTAABlAgCgTAAAlAkAAJQJAIAyAQBQJgAAygQAAMoEAECZAAAk0Gq+AAAAlUlEQVQoEwAAZQIAAGUCAKBMAACUCQCAMgEAgDIBAFAmAADKBABAmQAAQJkAACgTAABlAgCgTAAAoEwAAJQJAIAyAQBQJgAAUCYAAMoEAECZAAAoEwAAKBMAAGUCAKBMAACUCQAAlAkAgDIBAFAmAADKBAAAygQAQJkAACgTAABlAgAAZQIAoEwAAJQJAIAyAQDgYv4vMVxnuxH2/TUAAAAASUVORK5CYII="},function(e,t,n){},,function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__22mhB",framedImage:"styles-module__framedImage__-4l6t",Checkboxes:"styles-module__Checkboxes__2oyZv",Tendency:"styles-module__Tendency__2Y46X",Significant:"styles-module__Significant__34YnP"}},,,,,,,,function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=g(n(5)),i=g(n(975)),a=g(n(835)),s=g(n(977)),l=g(n(978)),u=g(n(880)),c=g(n(4)),p=g(n(0)),d=g(n(23)),f=g(n(881)),h=g(n(882)),m=g(n(883)),y=g(n(884));function g(e){return e&&e.__esModule?e:{default:e}}var b=function(e){function t(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));return o.onWindowScroll=function(){o.onUpdate()},o.onDocumentClick=function(){(0,u.default)(function(){return o.onUpdate()})},o.onUpdate=function(){if(o._isMounted){var e=o.props,t=e.offsetTop,n=e.viewportOffsetTop,r=(0,l.default)((0,y.default)(o))+(n||0);r<=t?o.updateState("top",null,null):r>o.getPositionTopMax()?"bottom"===o.state.affixed?o.updateStateAtBottom():o.setState({affixed:"bottom",position:"absolute",top:null},function(){o._isMounted&&o.updateStateAtBottom()}):o.updateState("affix","fixed",n)}},o.getPositionTopMax=function(){return(0,h.default)((0,m.default)(o))-(0,i.default)(d.default.findDOMNode(o))-o.props.offsetBottom},o.updateState=function(e,t,n){if(e!==o.state.affixed||t!==o.state.position||n!==o.state.top){var r="affix"===e?"":e.charAt(0).toUpperCase()+e.substr(1);o.props["onAffix"+r]&&o.props["onAffix"+r](),o.setState({affixed:e,position:t,top:n},function(){o.props["onAffixed"+r]&&o.props["onAffixed"+r]()})}},o.updateStateAtBottom=function(){var e=o.getPositionTopMax(),t=(0,s.default)(d.default.findDOMNode(o)),n=(0,a.default)(t).top;o.updateState("bottom","absolute",e-n)},o.state={affixed:"top",position:null,top:null},o._needPositionUpdate=!1,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){var e=this;this._isMounted=!0,this._windowScrollListener=(0,f.default)((0,y.default)(this),"scroll",function(){return e.onWindowScroll()}),this._documentClickListener=(0,f.default)((0,m.default)(this),"click",function(){return e.onDocumentClick()}),this.onUpdate()},t.prototype.componentWillReceiveProps=function(){this._needPositionUpdate=!0},t.prototype.componentDidUpdate=function(){this._needPositionUpdate&&(this._needPositionUpdate=!1,this.onUpdate())},t.prototype.componentWillUnmount=function(){this._isMounted=!1,this._windowScrollListener&&this._windowScrollListener.remove(),this._documentClickListener&&this._documentClickListener.remove()},t.prototype.render=function(){var e=p.default.Children.only(this.props.children),t=e.props,n=t.className,i=t.style,a=this.state,s=a.affixed,l={position:a.position,top:a.top},u=void 0,c=void 0;return"top"===s?(u=this.props.topClassName,c=this.props.topStyle):"bottom"===s?(u=this.props.bottomClassName,c=this.props.bottomStyle):(u=this.props.affixClassName,c=this.props.affixStyle),p.default.cloneElement(e,{className:(0,o.default)(u,n),style:r({},l,c,i)})},t}(p.default.Component);b.propTypes={offsetTop:c.default.number,viewportOffsetTop:c.default.number,offsetBottom:c.default.number,topClassName:c.default.string,topStyle:c.default.object,affixClassName:c.default.string,affixStyle:c.default.object,bottomClassName:c.default.string,bottomStyle:c.default.object,onAffix:c.default.func,onAffixed:c.default.func,onAffixTop:c.default.func,onAffixedTop:c.default.func,onAffixBottom:c.default.func,onAffixedBottom:c.default.func},b.defaultProps={offsetTop:0,viewportOffsetTop:null,offsetBottom:0},t.default=b,e.exports=t.default},function(e,t,n){"use strict";var r=n(834);t.__esModule=!0,t.default=void 0;var o,i=r(n(979)),a="clearTimeout",s=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-u)),r=setTimeout(e,n);return u=t,r},l=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};i.default&&["","webkit","moz","o","ms"].some(function(e){var t=l(e,"request");if(t in window)return a=l(e,"cancel"),s=function(e){return window[t](e)}});var u=(new Date).getTime();(o=function(e){return s(e)}).cancel=function(e){window[a]&&"function"==typeof window[a]&&window[a](e)};var c=o;t.default=c,e.exports=t.default},function(e,t,n){e.exports=n(25)(469)},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return Math.max(e.documentElement.offsetHeight||0,e.height||0,e.body.scrollHeight||0,e.body.offsetHeight||0)},e.exports=t.default},function(e,t,n){e.exports=n(25)(169)},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return(0,o.default)(r.default.findDOMNode(e))};var r=i(n(23)),o=i(n(980));function i(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},function(e,t,n){"use strict";var r=n(0),o=n(2),i=n(9),a=n(886),s=n.n(a),l=n(1),u=n(172),c=n(30),p=n(66),d=n(813),f=n(6),h=n(5),m=n.n(h),y=n(3),g=n(50);function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var C=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":O(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},k=function(e){function t(){return v(this,t),_(this,S(t).apply(this,arguments))}return E(t,d["a"]),t}(),T=function(e){function t(){var e;return v(this,t),(e=_(this,S(t).apply(this,arguments)))._columns=[{name:e.props.firstColumnHeaderName,render:function(t){return r.createElement(i.Observer,null,function(){return r.createElement("div",{className:m()(s.a.option,"add-chart-option"),"data-test":"add-chart-option-".concat(t.label.toLowerCase().replace(/\s/g,"-"))},r.createElement(u.a,{checked:t.selected,disabled:t.disabled,labelProps:{className:m()(s.a.label,t.disabled?s.a.labelDisabled:"")},inputProps:{className:s.a.input},onChange:function(){return e.onOptionChange(t)}},r.createElement(y.g,{text:t.label})))})},filter:function(e,t,n){return e.label.toUpperCase().includes(n)},sortBy:function(e){return e.label},width:320,defaultSortDirection:"asc"},{name:"Freq",tooltip:r.createElement("span",null,Object(g.a)(e.props.frequencyHeaderTooltip,"% samples with data")),render:function(t){return r.createElement("span",{style:{display:"flex",flexDirection:"row-reverse"},className:m()(t.disabled?s.a.labelDisabled:"")},e.props.freqPromise.isComplete?Object(c.O)(t.freq):"")},sortBy:function(e){return e.freq},headerRender:function(){return r.createElement("span",{style:{display:"flex",flexDirection:"row-reverse",flexGrow:1}},"Freq")},defaultSortDirection:"desc",width:60}],e}var n,o,a;return E(t,r["Component"]),n=t,(o=[{key:"getCurrentSelectedRows",value:function(){return this.options.filter(function(e){return e.selected})}},{key:"getCurrentSelectedRowKeys",value:function(){return this.getCurrentSelectedRows().map(function(e){return e.key})}},{key:"addAll",value:function(e){this.props.onAddAll(l.filter(e,function(e){return!e.disabled}).map(function(e){return e.key}))}},{key:"removeAll",value:function(e){this.props.onClearAll(e.map(function(e){return e.key}))}},{key:"onOptionChange",value:function(e){this.props.onToggleOption(e.key)}},{key:"render",value:function(){return r.createElement("div",{style:{display:"flex",flexDirection:"column"},"data-test":"add-by-type"},this.props.freqPromise.isComplete&&r.createElement(k,{width:380,height:this.tableHeight,columns:this._columns,data:this.options,showControlsAtTop:!0,addAll:this.addAll,removeAll:this.removeAll,showSelectableNumber:!0,showAddRemoveAllButton:!0,autoFocusSearchAfterRendering:!0,numberOfSelectedRows:this.getCurrentSelectedRows().length,hideControls:this.props.hideControls}),this.props.freqPromise.isPending&&r.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:100}},r.createElement(p.a,{isLoading:!0}),r.createElement("br",null),"Calculating data availability..."))}},{key:"options",get:function(){var e=this;if(this.props.freqPromise.isComplete){var t=l.reduce(this.props.options,function(t,n){var r=0===e.props.freqPromise.result[n.key];return t.push({label:n.label,key:n.key,disabled:r,selected:n.selected,freq:r?0:e.props.freqPromise.result[n.key]}),t},[]);return this.props.optionsGivenInSortedOrder?t:t.sort(function(e,t){return t.freq-e.freq||e.label.localeCompare(t.label)})}var n=this.props.options.map(function(e){return Object.assign({freq:100},e)});return this.props.optionsGivenInSortedOrder?n:n.sort(function(e,t){return e.label.localeCompare(t.label)})}},{key:"tableHeight",get:function(){return this.options.length>15?375:25*(this.options.length+1)}}])&&b(n.prototype,o),a&&b(n,a),t}();T.defaultProps={firstColumnHeaderName:"Name",hideControls:!1},C([o.computed],T.prototype,"options",null),C([o.computed],T.prototype,"tableHeight",null),C([f.default],T.prototype,"getCurrentSelectedRows",null),C([f.default],T.prototype,"getCurrentSelectedRowKeys",null),C([f.default,o.action],T.prototype,"addAll",null),C([f.default,o.action],T.prototype,"removeAll",null),C([f.default,o.action],T.prototype,"onOptionChange",null),T=C([i.observer],T),t.a=T},function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__1Knza",framedImage:"styles-module__framedImage__p1p-k",main:"styles-module__main__2V5AI",operations:"styles-module__operations__2tHBt",options:"styles-module__options__2V0tE",option:"styles-module__option__dhLVt",footer:"styles-module__footer__8u68Z",input:"styles-module__input__2Zk8R",label:"styles-module__label__YKqSs",labelDisabled:"styles-module__labelDisabled__3jDaR"}},function(e,t,n){e.exports=n(25)(452)},function(e,t,n){e.exports=n(25)(835)},function(e,t,n){e.exports=n(25)(358)},function(e,t,n){e.exports=n(25)(824)},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0ZWQgYnkgSWNvTW9vbi5pbyAtLT4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIxNCIgaGVpZ2h0PSIxNCI+CiAgPCEtLU5vIGxldmVsIGljb25zLS0+CiAgICAgIDxnICB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3LCA3KSI+CiAgICAgICAgPGNpcmNsZSByPSI2IiBmaWxsPSJub25lIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZT0iIzAwN0ZGRiI+PC9jaXJjbGU+CiAgICAgICAgPGNpcmNsZSByPSIzIiBmaWxsPSJub25lIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZT0iIzAwN0ZGRiI+PC9jaXJjbGU+CiAgICAgICAgPGNpcmNsZSByPSIxLjUiIGZpbGw9IiMwMDdGRkYiIHN0cm9rZT0ibm9uZSI+PC9jaXJjbGU+CiAgICAgIDwvZz4KPC9zdmc+"},function(e,t,n){"use strict";n.d(t,"c",function(){return f}),n.d(t,"a",function(){return p}),n.d(t,"b",function(){return d}),n.d(t,"f",function(){return g}),n.d(t,"g",function(){return b}),n.d(t,"d",function(){return E}),n.d(t,"e",function(){return w});var r,o,i=n(1),a=n.n(i),s=n(34),l=n(11),u=n(3);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p,d,f="N/A",h=/^((?:[^\(\)])+)(?:\(([^\(\)]+)\))?$/,m=/^(?:[^\/]+\/)+[^\/]+$/;!function(e){e.NUMBER="number",e.LOG_NUMBER="lognumber",e.STRING="string",e.COUNTS="counts"}(p||(p={})),function(e){e.HEATMAP_01="heatmap01",e.HEATMAP_ZSCORE="heatmapZscores",e.HEATMAP="heatmap"}(d||(d={}));c(r={},p.NUMBER,!0),c(r,p.LOG_NUMBER,!0),c(r,p.STRING,!0),c(r,p.COUNTS,!0),c(o={},d.HEATMAP_01,!0),c(o,d.HEATMAP_ZSCORE,!0),c(o,d.HEATMAP,!0);function y(e){switch(e){case d.HEATMAP_01:return l.a.METHYLATION;case d.HEATMAP_ZSCORE:return l.a.MRNA_EXPRESSION;case d.HEATMAP:return l.a.GENERIC_ASSAY}}function g(e){return v(e,"clinical")}function b(e){return v(e,"heatmap")}function v(e,t){var n=e.trim().split("\n").map(function(e){return e.trim().split(/\s+/)});if(0===n.length)return{parseSuccess:!0,result:{headers:[],data:[]},error:void 0};try{var r=n.shift(),o="clinical"===t?function(e){e.shift();var t="Clinical data input error in line 1 (header): ",n=[],r={},o=!0,i=!1,a=void 0;try{for(var s,l=e[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var u=s.value,c=u.match(h);if(!c)throw new Error("".concat(t,"misformatted clinical track name ").concat(u));var d=c[2]||p.STRING,f=void 0;switch(d){case p.NUMBER:case p.LOG_NUMBER:case p.STRING:break;default:if(!m.test(d))throw new Error("".concat(t,"invalid clinical track data type ").concat(d));f=d.split("/"),d=p.COUNTS}var y=c[1];if(y in r)throw new Error("".concat(t,"duplicate clinical track name ").concat(y));n.push({trackName:y,datatype:d,countsCategories:f}),r[y]=!0}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}return n}(r):function(e){e.shift();var t="Heatmap data input error in line 1 (header): ",n=[],r={},o=!0,i=!1,a=void 0;try{for(var s,l=e[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var u=s.value,c=u.match(h);if(!c)throw new Error("".concat(t,"misformatted heatmap track name ").concat(u));var p=c[2]||d.HEATMAP;switch(p){case d.HEATMAP_01:case d.HEATMAP_ZSCORE:case d.HEATMAP:break;default:throw new Error("".concat(t,"invalid heatmap track data type ").concat(p))}var f=c[1];if(f in r)throw new Error("".concat(t,"duplicate heatmap track name ").concat(f));n.push({trackName:f,datatype:p}),r[f]=!0}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}return n}(r),i=n.map(function(e,n){var r="".concat(Object(u.z)(t)," data input error on line ").concat(n+2,": \n").concat(e.join("\t"),"\n\n");if(e.length===o.length+1)return{sampleId:e[0],orderedValues:e.slice(1)};throw new Error("".concat(r,"data lines must have ").concat(o.length+1," columns, the same number as in the header."))});return{parseSuccess:!0,result:{headers:o,data:i.filter(function(e){return!!e})},error:void 0}}catch(e){return{parseSuccess:!1,result:void 0,error:e.message}}}function _(e,t,n,r){var o="Heatmap data input error on line ".concat(r+2,": \n\n"),i=null;if(e!==f&&(i=parseFloat(e)),null!==i&&isNaN(i))throw new Error("".concat(o," input ").concat(e," is not valid for heatmap track ").concat(n.trackName));return{sample:t.sampleId,profile_data:i,uid:t.sampleId,na:null===i}}function S(e,t,n,r){var o,i,a="Clinical data input error on line ".concat(r+2,": \n\n");if(e===f)return{sample:t.sampleId,attr_id:n.trackName,attr_val_counts:{},attr_val:"",uid:t.sampleId,na:!0};switch(n.datatype){case p.STRING:o=c({},e,1),i=e;break;case p.NUMBER:case p.LOG_NUMBER:var s=parseFloat(e);if(isNaN(s))throw new Error("".concat(a," input ").concat(e," is not valid for numerical track ").concat(n.trackName));o=c({},s,1),i=s;break;case p.COUNTS:var l=e.split("/").map(parseFloat);if(l.length!==n.countsCategories.length)throw new Error("".concat(a," input ").concat(e," is not valid - must have ").concat(n.countsCategories.length," values to match with header, but only has ").concat(l.length));i=o=n.countsCategories.reduce(function(e,t,n){return e[t]=l[n],e},{})}return{sample:t.sampleId,attr_id:n.trackName,attr_val_counts:o,attr_val:i,uid:t.sampleId,na:e===f}}function E(e,t,n){var r=function(e,t){var n=a.a.mapValues(a.a.keyBy(e,function(e){return e.trackName}),function(){return[]});return t.forEach(function(t,r){for(var o=0;o<e.length;o++){var i=t.orderedValues[o];n[e[o].trackName].push(S(i,t,e[o],r))}}),n}(e,t),o=a.a.keyBy(n||[]);r=a.a.mapValues(r,function(e){return e.filter(function(e){return!(e.sample in o)})});var i=[];return e.map(function(e){var t,n,o,a,l=r[e.trackName];switch(e.datatype){case p.STRING:t="string";break;case p.NUMBER:case p.LOG_NUMBER:t="number",n=function(e){var t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;isNaN(l.attr_val)||(t=Math.min(t,l.attr_val),n=Math.max(n,l.attr_val))}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return[t,n]}(l);break;case p.COUNTS:t="counts","mutation_spectrum"===e.trackName.toLowerCase()&&e.countsCategories.length===s.b.length&&(o=s.b)}i.push({key:(a=e.trackName,"clinicalTrack_".concat(a)),attributeId:e.trackName,label:e.trackName,data:l,datatype:t,description:"",numberRange:n,numberLogScale:e.datatype===p.LOG_NUMBER||void 0,countsCategoryLabels:e.countsCategories,countsCategoryFills:o})}),i}function w(e,t,n){var r=function(e,t){var n=a.a.mapValues(a.a.keyBy(e,function(e){return e.trackName}),function(){return[]});return t.forEach(function(t,r){for(var o=0;o<e.length;o++){var i=t.orderedValues[o];n[e[o].trackName].push(_(i,t,e[o],r))}}),n}(e,t),o=a.a.keyBy(n||[]);r=a.a.mapValues(r,function(e){return e.filter(function(e){return!(e.sample in o)})});var i=[];return e.map(function(e){var t,n=r[e.trackName];i.push({key:(t=e.trackName,"heatmapTrack_".concat(t)),label:e.trackName,legendLabel:O(e),tooltipValueLabel:"Value",molecularProfileId:"input",molecularAlterationType:y(e.datatype),datatype:"",data:n.map(function(e){return Object.assign(e,{study_id:"",patient:""})}),trackGroupIndex:2,hasColumnSpacing:!1})}),i}function O(e){switch(e.datatype){case d.HEATMAP_01:return"Heatmap (0-1)";case d.HEATMAP_ZSCORE:return"Heatmap (z-scores)";case d.HEATMAP:default:return"Heatmap"}}},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Array=0]="Array",e[e.ObjectWithNonNumericKeys=1]="ObjectWithNonNumericKeys",e[e.Object=2]="Object",e[e.Primitive=3]="Primitive"}(r=t.JSONObjectType||(t.JSONObjectType={}));var o=function(){function e(){}return e.getObjectType=function(e){return null!==e&&"object"==typeof e?Array.isArray(e)?r.Array:Object.keys(e).length?r.ObjectWithNonNumericKeys:r.Object:r.Primitive},e.checkLabelTypes=function(e){return"number"==typeof e.reduce(function(e,t){return e+(isNaN(Number(t))?t:Number(t))},0)?"number":"string"},e.getUniqueObjectKeys=function(e){var t=[],n=r.Object;return e.forEach(function(e){t=t.concat(Object.keys(e)).filter(function(e,t,n){return n.indexOf(e)===t})}),{labels:t,type:n}},e}();t.default=o},function(e,t,n){e.exports=n(25)(77)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function o(e){return"number"==typeof e?e:e.toString()}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"receiveProps",value:function(e){this.props=e}},{key:"getReactKey",value:function(e){var t=this.props.itemReactKeyPropName;if(t){var n=e[t];if(null!=n)return n}return o(this.getRawValue(e))}},{key:"getSortKey",value:function(e){var t=this.props.itemSortKeyPropName;if(t){var n=e[t];if(null!=n)return n}return o(this.getRawValue(e))}},{key:"getInputValue",value:function(e){return this.getRawValue(e).toString()}},{key:"getRawValue",value:function(e){var t=this.props.itemValuePropName;if(t){var n=e[t];if(null!=n)return n}return e}},{key:"getTextRepresentations",value:function(e){return[this.foldValue(this.getInputValue(e))]}},{key:"foldValue",value:function(e){return e.toLowerCase()}},{key:"newFromValue",value:function(e){return e}},{key:"itemIncludedByInput",value:function(e,t){var n=!0,r=!1,o=void 0;try{for(var i,a=this.getTextRepresentations(e)[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){if(i.value.indexOf(t)>=0)return!0}}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return!1}},{key:"itemMatchesInput",value:function(e,t){var n=!0,r=!1,o=void 0;try{for(var i,a=this.getTextRepresentations(e)[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){if(i.value===t)return!0}}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return!1}},{key:"sortItems",value:function(e,t){var n=this;return e.sort(function(e,r){return n.compareItemsWithValue(e,r,t)}),e}},{key:"compareItemsWithValue",value:function(e,t,n){var r=this.itemMatchesInput(e,n);if(r!=this.itemMatchesInput(t,n))return r?-1:1;var o=this.itemInclusionRankForInput(e,n),i=this.itemInclusionRankForInput(t,n);return o!=i?o-i:this.compareItems(e,t)}},{key:"itemInclusionRankForInput",value:function(e,t){var n=!1,r=!0,o=!1,i=void 0;try{for(var a,s=this.getTextRepresentations(e)[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value.indexOf(t);if(0===l)return 0;l>0&&(n=!0)}}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n?1:2}},{key:"compareItems",value:function(e,t){var n=this.getSortKey(e),r=this.getSortKey(t);return n<r?-1:n==r?0:1}},{key:"renderItem",value:function(e){return this.getInputValue(e)}},{key:"renderSuggested",value:function(e){return this.renderItem(e)}},{key:"renderSelected",value:function(e){return this.renderItem(e)}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(814),s=(r=a)&&r.__esModule?r:{default:r};function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"key";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.itemKeyPropName=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["default"]),i(t,[{key:"_getKeyValueItem",value:function(e,t){var n,r=this.itemKeyPropName,i=this.props.itemValuePropName,a=void 0===i?"value":i;return"object"==typeof t&&a in t?t[r]===e?t:o(l({},r,e),t):(l(n={},r,e),l(n,a,t),n)}}]),t}();t.default=u},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),o=n(9),i=n(2),a=n(66),s=Object(o.observer)(function(e){return e.store.cancerTypes.isPending||e.store.cancerStudies.isPending||e.store.profiledSamplesCount.isPending?r.createElement(a.a,{isLoading:!0,size:"small",center:!1}):r.createElement(o.Observer,null,function(){var t=Object(i.expr)(function(){return e.store.selectableSelectedStudyIds.length});return r.createElement(r.Fragment,null,r.createElement("a",{onClick:function(){t&&(e.store.showSelectedStudiesOnly=!e.store.showSelectedStudiesOnly)}},r.createElement("b",null,t)," ",1===t?"study":"studies"," ","selected (",r.createElement("b",null,e.store.profiledSamplesCount.result.all)," ","samples)"),e.store.selectableSelectedStudies.length>0&&r.createElement("a",{"data-test":"globalDeselectAllStudiesButton",style:{marginLeft:10},onClick:function(){return e.store.studyListLogic.mainView.clearAllSelection()}},"Deselect all"))})})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringable=function(e){return null!=e&&typeof("function"===e.toString)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}};var a,s=n(0),l=(a=s)&&a.__esModule?a:{default:a},u=n(839),c=n(1039),p=n(806),d=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l["default"].Component),o(t,[{key:"handleClickTh",value:function(e){this.props.onSort(e.key)}},{key:"handleKeyDownTh",value:function(e,t){13===t.keyCode&&this.props.onSort(e.key)}},{key:"render",value:function(){for(var e=[],t=0;t<this.props.columns.length;t++){var n=this.props.columns[t],o="reactable-th-"+n.key.replace(/\s+/g,"-").toLowerCase(),i="",a=null;this.props.sortableColumns[n.key]&&(i+="reactable-header-sortable ",a="button"),this.props.sort.column===n.key&&(i+="reactable-header-sort",1===this.props.sort.direction?i+="-asc":i+="-desc"),i.length>0&&(o+=" "+i),"object"==typeof n.props&&"string"==typeof n.props.className&&(o+=" "+n.props.className),e.push(l.default.createElement(u.Th,r({},n.props,{className:o,key:t,onClick:this.handleClickTh.bind(this,n),onKeyDown:this.handleKeyDownTh.bind(this,n),role:a,tabIndex:"0"}),n.label))}var s=(0,p.filterPropsFrom)(this.props);return l.default.createElement("thead",s,!0===this.props.filtering?l.default.createElement(c.Filterer,{colSpan:this.props.columns.length,onFilter:this.props.onFilter,placeholder:this.props.filterPlaceholder,value:this.props.currentFilter,className:this.props.filterClassName}):null,l.default.createElement("tr",{className:"reactable-column-header"},e))}}],[{key:"getColumns",value:function(e){var t=[];return l.default.Children.forEach(e.props.children,function(e){var n={};if(void 0!==e.props&&(n.props=(0,p.filterPropsFrom)(e.props),void 0!==e.props.children&&(n.label=e.props.children,n.key=n.label),"string"==typeof e.props.column&&(n.key=e.props.column,void 0===n.label&&(n.label=n.key))),void 0===n.key)throw new TypeError('<th> must have either a "column" property or a string child');t.push(n)}),t}}]),t}();t.Thead=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}};var a,s=n(0),l=(a=s)&&a.__esModule?a:{default:a},u=n(901),c=n(1041),p=n(806),d=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l["default"].Component),o(t,[{key:"render",value:function(){var e=(0,c.toArray)(l.default.Children.children(this.props.children));this.props.data&&this.props.columns&&"function"==typeof this.props.columns.map&&(void 0===e.concat&&console.log(e),e=e.concat(this.props.columns.map(function(e,t){var n=e.props,o=void 0===n?{}:n,i=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["props"]);if(this.props.data.hasOwnProperty(i.key)){var a=this.props.data[i.key];return null!=a&&!0===a.__reactableMeta&&(o=a.props,a=a.value),l.default.createElement(u.Td,r({column:i,key:i.key},o),a)}return l.default.createElement(u.Td,{column:i,key:i.key})}.bind(this))));var t=(0,p.filterPropsFrom)(this.props);return l.default.DOM.tr(t,e)}}]),t}();t.Tr=d,d.childNode=u.Td,d.dataType="object"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}};var a,s=n(0),l=(a=s)&&a.__esModule?a:{default:a},u=n(1040),c=n(898),p=n(815),d=n(806),f=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l["default"].Component),o(t,[{key:"stringifyIfNotReactComponent",value:function(e){return!(0,u.isReactComponent)(e)&&(0,c.stringable)(e)&&void 0!==e?e.toString():null}},{key:"render",value:function(){var e,t=(0,d.filterPropsFrom)(this.props);if("object"==typeof this.props.column)for(var n in this.props.column)"key"!==n&&"name"!==n&&(t[n]=this.props.column[n]);return t.onClick=this.props.handleClick,void 0===this.props.data&&(e=this.stringifyIfNotReactComponent(this.props.children)),(0,p.isUnsafe)(this.props.children)?l.default.createElement("td",r({},t,{dangerouslySetInnerHTML:{__html:this.props.children.toString()}})):l.default.createElement("td",t,e||this.props.children)}}]),t}();t.Td=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}};var i,a=n(0),s=(i=a)&&i.__esModule?i:{default:i},l=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["default"].Component),r(t,[{key:"render",value:function(){return s.default.createElement("tfoot",this.props)}}]),t}();t.Tfoot=l},function(e,t,n){"use strict";var r=n(0),o=n(9);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,s(t).apply(this,arguments))}var n,o,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement("span",null,"Queries are limited by gene and sample count. The product of the query's gene and sample count must be less than"," ",this.props.queryProductLimit.toLocaleString(),". You have selected ",this.props.sampleCount.toLocaleString()," samples, so you can have no more than"," ",Math.floor(this.props.queryProductLimit/this.props.sampleCount).toLocaleString()," ","genes in your query. Please"," ",r.createElement("a",{style:{color:"#ccc"},href:"mailto:".concat(this.props.email)},"let us know")," ","your use case(s) if you need to query more than that.")}}])&&i(n.prototype,o),u&&i(n,u),t}();p=c([o.observer],p),t.a=p},function(e,t,n){"use strict";function r(e,t){var n=t.distance,r=t.left,o=t.right,i=t.up,a=t.down,l=t.top,u=t.bottom,c=t.big,d=t.mirror,f=t.opposite,h=(n?n.toString():0)+((r?1:0)|(o?2:0)|(l||a?4:0)|(u||i?8:0)|(d?16:0)|(f?32:0)|(e?64:0)|(c?128:0));if(p.hasOwnProperty(h))return p[h];var m=r||o||i||a||l||u,y=void 0,g=void 0;if(m){if(!d!=!(e&&f)){var b=[o,r,u,l,a,i];r=b[0],o=b[1],l=b[2],u=b[3],i=b[4],a=b[5]}var v=n||(c?"2000px":"100%");y=r?"-"+v:o?v:"0",g=a||l?"-"+v:i||u?v:"0"}return p[h]=(0,s.animation)((e?"to":"from")+" {opacity: 0;"+(m?" transform: translate3d("+y+", "+g+", 0);":"")+"}\n     "+(e?"from":"to")+" {opacity: 1;transform: none;} "),p[h]}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.defaults,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.children,o=(e.out,e.forever),i=e.timeout,a=e.duration,l=void 0===a?s.defaults.duration:a,c=e.delay,p=void 0===c?s.defaults.delay:c,d=e.count,f=void 0===d?s.defaults.count:d,h=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children","out","forever","timeout","duration","delay","count"]),m={make:r,duration:void 0===i?l:i,delay:p,forever:o,count:f,style:{animationFillMode:"both"},reverse:h.left};return t?(0,u.default)(h,m,m,n):m}Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(4),s=n(790),l=n(793),u=(i=l)&&i.__esModule?i:{default:i},c={out:a.bool,left:a.bool,right:a.bool,top:a.bool,bottom:a.bool,big:a.bool,mirror:a.bool,opposite:a.bool,duration:a.number,timeout:a.number,distance:a.string,delay:a.number,count:a.number,forever:a.bool},p={};o.propTypes=c,t.default=o,e.exports=t.default},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(788),o=n(64),i=n(234),a=n(50);function s(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=window,l=new r.c(e);return l.singlePageAppSubmitRoutine=function(r){(r.cancer_study_list=r.cancer_study_list||r.cancer_study_id,delete r.cancer_study_id,e)&&((e.cancer_study_id!==r.cancer_study_id||e.cancer_study_list!==r.cancer_study_list||Object(a.a)(e.case_ids,"")!==Object(a.a)(r.case_ids,"")||e.case_set_id!==r.case_set_id)&&(r.comparison_createdGroupsSessionId=void 0,r.plots_horz_selection=void 0,r.plots_vert_selection=void 0,r.plots_coloring_selection=void 0));var u=l.physicalStudyIdsInSelection.length>1&&1===l.geneIds.length?o.b.CANCER_TYPES_SUMMARY:o.b.ONCOPRINT,c=t||new i.b(s.routingStore);c.updateURL(r,"results/".concat(u),n,!1),void 0===t&&c.destroy()},l}},function(e,t,n){e.exports=n(25)(346)},function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(3),a=n(6),s=n(2),l=n(47),u=n(110),c=n(66),p=n(130),d=n(176),f=n(908),h=n(97);function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var _=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":v(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};var S=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=y(this,g(t).apply(this,arguments))).inputGroupName="",e.saveGroupToUser=!0,e.enterNameInterface=Object(u.a)({await:function(){return[e.props.store.origin,e.props.store.sampleMap,e.props.store.existingGroupNames,e.props.store._originalGroups,e.props.store.patientToSamplesSet]},render:function(){return r.createElement("div",{style:{width:250}},e.props.store.isLoggedIn&&r.createElement(f.a,{checked:e.saveGroupToUser,onClick:e.toggleSaveGroupToUser,label:[r.createElement("span",{style:{marginRight:5}},"Save group to user account"),r.createElement(d.a,{divStyle:{display:"inline"},tooltip:r.createElement("span",null,"Selecting this will save the new group with the associated study in your user account.")})]}),r.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.createElement("input",{className:"form-control",style:{marginRight:5},type:"text",placeholder:"Enter a group name..",value:e.inputGroupName,onChange:e.onChangeInputGroupName,"data-test":e.props.caseType+"GroupNameInputField"}),r.createElement("button",{className:"btn btm-sm btn-primary",disabled:0===e.inputGroupName.length||e.isDuplicateName,onClick:e.submit,"data-test":e.props.caseType+"GroupNameSubmitButton"},"Submit")),e.isDuplicateName&&r.createElement("div",{style:{marginTop:4},"data-test":e.props.caseType+"DuplicateGroupNameMessage"},l.b))},renderPending:function(){return r.createElement(c.a,{isLoading:!0})}}),e.includedRegionsDescription=Object(u.a)({await:function(){return[e.props.store.uidToGroup]},render:function(){return r.createElement("div",null,e.props.includedRegions.map(function(t){return r.createElement("div",null,function(e,t,n,o){var i=e.map(function(e){return n[e]}),a=r.createElement("span",null,o[0].toUpperCase(),o.substring(1),"s only in"," ",Object(p.f)(i,"and"));return a=r.createElement("span",null,a,".")}(t,e.props.allGroupsInPlot,e.props.store.uidToGroup.result,e.props.caseType))}))}}),e}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,r["Component"]),n=t,(o=[{key:"toggleSaveGroupToUser",value:function(){this.saveGroupToUser=!this.saveGroupToUser}},{key:"onChangeInputGroupName",value:function(e){this.inputGroupName=e.target.value}},{key:"submit",value:function(){var e;e="sample"===this.props.caseType?Object(p.d)(this.props.store._originalGroups.result,this.props.includedRegions,this.props.allGroupsInPlot):Object(p.c)(this.props.store._originalGroups.result,this.props.includedRegions,this.props.allGroupsInPlot,this.props.store.patientToSamplesSet.result),this.props.submitGroup({name:this.inputGroupName,description:"",studies:e,origin:this.props.store.origin.result},this.saveGroupToUser)}},{key:"render",value:function(){return r.createElement("div",{style:Object.assign({width:this.props.width,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},this.props.style)},r.createElement(i.d,{trigger:["click"],overlay:this.enterNameInterface.component,placement:"top"},r.createElement("button",{className:"btn btn-md btn-primary",disabled:0===this.props.includedRegions.length,"data-event":Object(h.e)({action:"createGroupFromVenn",label:"",category:"groupComparison"}),"data-test":this.props.caseType+"GroupComparisonCreateGroupButton"},"Create Group From Selected Diagram Areas")),r.createElement("div",{style:{marginTop:20}},this.includedRegionsDescription.component))}},{key:"isDuplicateName",get:function(){var e=this.props.store.existingGroupNames.result,t=e.session;return this.saveGroupToUser&&(t=t.concat(e.user)),t.includes(this.inputGroupName.trim())}}])&&m(n.prototype,o),a&&m(n,a),t}();_([s.observable],S.prototype,"inputGroupName",void 0),_([s.observable],S.prototype,"saveGroupToUser",void 0),_([a.default,s.action],S.prototype,"toggleSaveGroupToUser",null),_([a.default,s.action],S.prototype,"onChangeInputGroupName",null),_([a.default,s.action],S.prototype,"submit",null),_([s.computed],S.prototype,"isDuplicateName",null),S=_([o.observer],S),t.a=S},function(e,t,n){"use strict";var r=n(0),o=n(9);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,s(t).apply(this,arguments))}var n,o,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement("div",{className:"checkbox",style:Object.assign({display:"flex",alignItems:"center"},this.props.style)},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:this.props.value,checked:this.props.checked,onClick:this.props.onClick,style:{marginTop:1}})),"function"==typeof this.props.label?this.props.label():this.props.label)}}])&&i(n.prototype,o),u&&i(n,u),t}();p=c([o.observer],p),t.a=p},function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return c});var r=n(0),o=n(816),i=n(130),a=n(831);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var l=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},u=function(e){var t=e.uidToGroup,n=e.dx,a=e.dy,u=(e.datum,e.text,l(e,["uidToGroup","dx","dy","datum","text"])),c=t[e.text];return r.createElement(o.a,s({text:c.name,prefixTspans:c.ordinal.length>0?[r.createElement("tspan",null,"("),r.createElement("tspan",{style:{fontWeight:"bold"}},c.ordinal),r.createElement("tspan",null,") ")]:void 0,tooltip:function(){return r.createElement("div",null,Object(i.h)(c))},maxWidth:e.maxLabelWidth,dy:a,dx:n},u))},c=function(e){var t=e.uidToGroup,n=e.dx,u=e.dy,c=(e.datum,e.text),p=l(e,["uidToGroup","dx","dy","datum","text"]),d=JSON.parse(c).map(function(e){return t[e]}),f=(d.map(function(e){return e.ordinal}),"Only ".concat(d.map(function(e){return e.ordinal?"(".concat(e.ordinal,")"):e.name}).join(", ")));return r.createElement(o.a,s({text:f,renderTruncatedText:function(e){for(var t=[],n=0;n<e.length;n++){n>0&&n<e.length-1&&"("===e[n-1]&&")"===e[n+1]?t.push(r.createElement("tspan",{style:{fontWeight:"bold"}},e[n])):t.push(r.createElement("tspan",null,e[n]))}return t},alwaysShowTooltip:!0,tooltip:function(){return r.createElement("div",null,"Only"," ",Object(a.a)(r.createElement("span",null,", "),d.map(function(e){return Object(i.h)(e)})))},maxWidth:e.maxLabelWidth,dy:u,dx:n},p))}},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,s(t).apply(this,arguments))}var n,o,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.onRender,n=u(e,["onRender"]);return(n.width>5||n.height>5)&&t(),r.createElement("rect",n)}}])&&i(n.prototype,o),c&&i(n,c),t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(0),o=n(6);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,s(t).apply(this,arguments))}var n,o,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,r["Component"]),n=t,(o=[{key:"onMouseOver",value:function(e){e.target.setAttribute("r",10),this.props.onMouseOver(this.props.datum,this.props.x,this.props.y)}},{key:"onMouseOut",value:function(e){e.target.setAttribute("r",3),this.props.onMouseOut()}},{key:"render",value:function(){return r.createElement("circle",{cx:this.props.x,cy:this.props.y,r:"3",onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,style:Object.assign({},this.props.style,{fill:this.props.fill(this.props.datum)})})}}])&&i(n.prototype,o),u&&i(n,u),t}();c([o.default],p.prototype,"onMouseOver",null),c([o.default],p.prototype,"onMouseOut",null)},function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(15),a=n(6),s=n(3),l=n(64);function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var h=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":f(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,p(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r["Component"]),n=t,(o=[{key:"onAddGenes",value:function(){Object(l.c)(window.urlWrapper,this.props.checkedGenes)}},{key:"render",value:function(){var e=this.props.checkedGenes.length>0?"(".concat(this.props.checkedGenes.join(", "),")"):"(none checked)";return r.createElement("div",{style:{marginBottom:15}},r.createElement(s.d,{overlay:"Check genes in table below"},r.createElement(i.Button,{style:{marginBottom:2},disabled:this.props.checkedGenes.length<1,onClick:this.onAddGenes,bsSize:"xsmall"},"Add checked genes to query ",e)))}}])&&u(n.prototype,o),a&&u(n,a),t}();h([a.default],m.prototype,"onAddGenes",null),m=h([o.observer],m),t.a=m},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(151);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=i(this,a(t).call(this,e))).setHighlighted=r,o.dataHighlighter=function(e){var t=n();return!(!t||e.entrezGeneId!==t.entrezGeneId)},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,r["a"]),t}()},function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(2),a=n(56),s=n.n(a),l=n(111),u=n(1),c=n(6),p=n(7),d=n(299),f=n(3),h=n(13),m=n(66),y=n(54),g=n(18),b=n(5),v=n.n(b),_=n(937);function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var x=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":P(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},A=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},j=function(e){function t(){return E(this,t),w(this,C(t).apply(this,arguments))}return k(t,d["a"]),t}(),I=function(e){function t(){var e;return E(this,t),(e=w(this,C(t).apply(this,arguments))).horzAxisData=Object(f.T)({await:function(){return[]},invoke:function(){return A(O(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.map(this.props.groups,function(e){return e.name}),n={data:[],datatype:"string",categoryOrder:t},r=u.reduce(this.props.groups,function(e,t){return t.samples.forEach(function(n){var r=n.uniqueSampleKey;void 0===e[r]&&(e[r]={uniqueSampleKey:r,value:[]}),e[r].value.push(t.name)}),e},{}),n.data=u.values(r),e.abrupt("return",Promise.resolve(n));case 5:case"end":return e.stop()}},e,this)}))}}),e.vertAxisData=Object(f.T)({invoke:function(){return A(O(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,o,i,a,s,l,c,p,d,f,m,y,g,b,v,_,S;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={data:[],datatype:"number"},void 0===this.props.selectedRow){e.next=62;break}if(!this.isGenericAssay){e.next=39;break}return e.next=5,h.a.fetchGenericAssayDataInMolecularProfileUsingPOST({molecularProfileId:this.props.selectedProfile.molecularProfileId,genericAssayDataFilter:{genericAssayStableIds:[this.props.selectedRow.stableId],sampleIds:u.map(this.props.sampleKeyToSample,function(e){return e.sampleId})}});case 5:n=e.sent,r=t.data,o=!0,i=!1,a=void 0,e.prev=10,s=n[Symbol.iterator]();case 12:if(o=(l=s.next()).done){e.next=23;break}if(c=l.value,!/[<>]+/.test(c.value)){e.next=18;break}return e.abrupt("continue",20);case 18:p=parseFloat(c.value),r.push({uniqueSampleKey:c.uniqueSampleKey,value:p});case 20:o=!0,e.next=12;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(10),i=!0,a=e.t0;case 29:e.prev=29,e.prev=30,o||null==s.return||s.return();case 32:if(e.prev=32,!i){e.next=35;break}throw a;case 35:return e.finish(32);case 36:return e.finish(29);case 37:e.next=62;break;case 39:return e.next=41,h.a.fetchAllMolecularDataInMolecularProfileUsingPOST({molecularProfileId:this.props.selectedProfile.molecularProfileId,molecularDataFilter:{entrezGeneIds:[this.props.selectedRow.entrezGeneId],sampleIds:u.map(this.props.sampleKeyToSample,function(e){return e.sampleId})}});case 41:for(d=e.sent,f=t.data,m=!0,y=!1,g=void 0,e.prev=46,b=d[Symbol.iterator]();!(m=(v=b.next()).done);m=!0)_=v.value,S=this.logScale?Math.log(_.value+1)/Math.log(2):_.value,f.push({uniqueSampleKey:_.uniqueSampleKey,value:S});e.next=54;break;case 50:e.prev=50,e.t1=e.catch(46),y=!0,g=e.t1;case 54:e.prev=54,e.prev=55,m||null==b.return||b.return();case 57:if(e.prev=57,!y){e.next=60;break}throw g;case 60:return e.finish(57);case 61:return e.finish(54);case 62:return e.abrupt("return",Promise.resolve(t));case 63:case"end":return e.stop()}},e,this,[[10,25,29,37],[30,,32,36],[46,50,54,62],[55,,57,61]])}))}}),e.boxPlotData=Object(f.T)({await:function(){return[e.vertAxisData,e.horzAxisData]},invoke:function(){var t=e.horzAxisData.result,n=e.vertAxisData.result;if(t&&n){var r=t,o=n;return Promise.resolve(Object(p.F)(r,o,e.props.sampleKeyToSample,{},void 0,void 0))}return new Promise(function(){return 0})}}),e}var n,o,i;return k(t,r["Component"]),n=t,(o=[{key:"getData",value:function(){return void 0!==this.props.selectedRow?Object(p.q)(this.boxPlotData.result,"Group",this.axisLabelY,{}):""}},{key:"render",value:function(){var e=this,t=null;if(void 0===this.props.selectedRow)t=r.createElement("div",{className:v()("text-center",s.a.BoxEmpty)},"Click on ",this.isGenericAssay?"an entity":"gene"," in the table to render this plot.");else if(this.boxPlotData.isPending)t=r.createElement("div",{className:v()("text-center",s.a.BoxEmpty)},r.createElement(m.a,{isLoading:!0,size:"small",className:s.a.ChartLoader}));else if(this.boxPlotData.isComplete&&this.boxPlotData.result.length>0){var n="Group";this.isGenericAssay||void 0===this.props.queriedHugoGeneSymbols||(n="Query: ".concat(Object(_.b)(this.props.queriedHugoGeneSymbols)));var o="";o=this.isGenericAssay?"".concat(this.props.selectedProfile.genericAssayType,"_enrichment"):"".concat(this.props.enrichmentType===l.e.DNA_METHYLATION?"methylation":"expression","_enrichment"),t=r.createElement("div",{className:s.a.BoxPlot,"data-test":"MiniBoxPlot"},r.createElement(f.e,{buttons:["SVG","PNG","Data"],getSvg:function(){return e.svgContainer},getData:this.getData,filename:o,dontFade:!0,style:{position:"absolute",right:10,top:10},type:"button"}),r.createElement(j,{domainPadding:10,startDataAxisAtZero:!0,boxWidth:this.boxPlotData.result.length>7?30:60,axisLabelY:this.axisLabelY,axisLabelX:n,data:this.boxPlotData.result,chartBase:320,scatterPlotTooltip:this.scatterPlotTooltip,horizontal:!1,fill:"#00AAF8",symbol:"circle",useLogSpaceTicks:!0,svgRef:function(t){return e.svgContainer=t},compressXAxis:!0,legendData:[{name:"p-Value: ".concat(Object(y.b)(this.props.selectedRow.pValue,3,.01)),symbol:{fill:"none",strokeWidth:0}},{name:"q-Value: ".concat(Object(y.b)(this.props.selectedRow.qValue,3,.01)),symbol:{fill:"none",strokeWidth:0}}]}))}return r.createElement("div",{style:{position:"relative",display:"inline-block"},className:"borderedChart"},t)}},{key:"logScale",get:function(){return this.props.selectedProfile.molecularProfileId.includes("rna_seq")}},{key:"isGenericAssay",get:function(){return!!this.props.genericAssayType}},{key:"axisLabelY",get:function(){return void 0!==this.props.selectedRow?this.isGenericAssay?"".concat(this.props.selectedRow.stableId,", ").concat(this.props.selectedProfile.name):"".concat(this.props.selectedRow.hugoGeneSymbol,", ").concat(this.props.selectedProfile.name).concat(this.logScale?" (log2)":""):""}},{key:"scatterPlotTooltip",get:function(){var e=this;return function(t){var n=void 0;if(e.props.oqlFilteredCaseAggregatedData){var o=e.props.oqlFilteredCaseAggregatedData?e.props.oqlFilteredCaseAggregatedData[t.uniqueSampleKey]:[];n="Alteration(s): "+Object(l.k)(o)}var i=r.createElement("span",null,"Loading... (this shouldnt appear because the box plot shouldnt be visible)");return e.boxPlotData.isComplete&&(i=e.isGenericAssay?r.createElement("div",null,r.createElement("a",{href:Object(g.y)(t.studyId,t.sampleId),target:"_blank"},r.createElement("b",null,t.sampleId)),r.createElement("br",null),Object(p.n)(e.props.genericAssayType),": ",t.value.toFixed(3)):r.createElement("div",null,r.createElement("a",{href:Object(g.y)(t.studyId,t.sampleId),target:"_blank"},r.createElement("b",null,t.sampleId)),r.createElement("br",null),e.props.enrichmentType,e.logScale?" (log2)":"",":"," ",t.value.toFixed(3),!!n&&r.createElement("br",null),n)),i}}}])&&S(n.prototype,o),i&&S(n,i),t}();I.defaultProps={},x([i.observable],I.prototype,"svgContainer",void 0),x([c.default],I.prototype,"getData",null),x([i.computed],I.prototype,"logScale",null),x([i.computed],I.prototype,"isGenericAssay",null),x([i.computed],I.prototype,"axisLabelY",null),x([i.computed],I.prototype,"scatterPlotTooltip",null),I=x([o.observer],I),t.a=I},function(e,t,n){"use strict";n.d(t,"a",function(){return I});var r=n(0),o=n(9),i=n(2),a=n(296),s=n.n(a),l=n(15),u=n(799),c=n.n(u),p=(n(916),n(807)),d=n(1),f=n(14),h=n(93),m=n(54),y=n(18),g=n(3),b=n(6),v=n(30),_=n(5),S=n.n(_),E=n(816),w=n(825),O=n(8);function C(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var I,N=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":j(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},M=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};!function(e){e.TOOLTIP="tooltip",e.CHART="chart"}(I||(I={}));var D=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=P(t).call(this,e),(n=!o||"object"!==j(o)&&"function"!=typeof o?x(r):o).highlightedCurve="",n.sliderValue=n.getInitialSliderValue(),n.isTooltipHovered=!1,n.tooltipCounter=0,n.styleOptsDefaultProps={width:900,height:500,padding:{top:20,bottom:50,left:60,right:20},tooltipXOffset:20,tooltipYOffset:-47,axis:{x:{axisLabel:{padding:35},grid:{opacity:0}},y:{axisLabel:{padding:45,fill:"black"},grid:{opacity:0}}},pValue:{x:610,y:30,textAnchor:"start"},legend:{x:600,y:50}},n.events=[{target:"data",eventHandlers:{onMouseOver:function(){return[{target:"data",mutation:function(e){return n.tooltipModel=e,n.tooltipCounter++,{active:!0}}}]},onMouseOut:function(){return[{target:"data",mutation:function(){return M(x(n),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.a)(100);case 2:return this.isTooltipHovered||1!==this.tooltipCounter||(this.tooltipModel=null),this.tooltipCounter--,e.abrupt("return",{active:!1});case 5:case"end":return e.stop()}},e,this)}))}}]}}}],n.tooltipMouseEnter=n.tooltipMouseEnter.bind(x(n)),n.tooltipMouseLeave=n.tooltipMouseLeave.bind(x(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,r["Component"]),n=t,(o=[{key:"getInitialSliderValue",value:function(){return O.b.serverConfig.survival_initial_x_axis_limit?Math.min(O.b.serverConfig.survival_initial_x_axis_limit,this.maximumDataMonthValue):this.maximumDataMonthValue}},{key:"toSVGDOMNode",value:function(){return Object(v.tb)(this.svgContainer.firstChild,{legendGroupSelector:".survivalChartDownloadLegend",selectorToHide:".survivalChartLegendHideForDownload"})}},{key:"tooltipMouseEnter",value:function(){this.isTooltipHovered=!0}},{key:"tooltipMouseLeave",value:function(){this.isTooltipHovered=!1,this.tooltipModel=null}},{key:"getSvg",value:function(){return this.toSVGDOMNode()}},{key:"getData",value:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var o,i=this.analysisGroupsWithData[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;e.push({scatterData:Object(h.i)(this.props.sortedGroupedSurvivals[a.value],this.estimates[a.value],a.value),title:void 0!==a.name?a.name:a.value})}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return Object(h.e)(e,this.props.title)}},{key:"hoverCircleFillOpacity",value:function(e,t){return t||this.isTooltipHovered&&this.tooltipModel&&this.tooltipModel.datum.studyId===e.studyId&&this.tooltipModel.datum.patientId===e.patientId?.3:0}},{key:"getAxisTickCount",value:function(e){return 5*Math.ceil(e/200)}},{key:"onSliderChange",value:function(e){this.sliderValue=e}},{key:"onSliderTextChange",value:function(e){this.sliderValue=Number.parseFloat(e)}},{key:"render",value:function(){return 0===d.flatten(d.values(this.props.sortedGroupedSurvivals)).length?r.createElement("div",{className:"alert alert-info"},"No data to plot."):r.createElement("div",{style:{position:"relative"}},this.props.legendLocation===I.TOOLTIP?r.createElement(g.d,{mouseLeaveDelay:.2,placement:"rightBottom",overlay:this.chartTooltip},this.chart):this.chart,this.tooltipModel&&r.createElement(l.Popover,k({arrowOffsetTop:56,className:S()("cbioportal-frontend","cbioTooltip",c.a.Tooltip),positionLeft:this.tooltipModel.x+this.styleOpts.tooltipXOffset},{container:this},{positionTop:this.tooltipModel.y+this.styleOpts.tooltipYOffset,onMouseEnter:this.tooltipMouseEnter,onMouseLeave:this.tooltipMouseLeave}),r.createElement("div",null,"Patient ID:"," ",r.createElement("a",{href:Object(y.w)(this.tooltipModel.datum.studyId,this.tooltipModel.datum.patientId),target:"_blank"},this.tooltipModel.datum.patientId),r.createElement("br",null),!!this.props.showCurveInTooltip&&["Curve: ".concat(this.tooltipModel.datum.group),r.createElement("br",null)],this.props.yLabelTooltip,":"," ",this.tooltipModel.datum.y.toFixed(2),"%",r.createElement("br",null),this.tooltipModel.datum.status?this.props.xLabelWithEventTooltip:this.props.xLabelWithoutEventTooltip,": ",this.tooltipModel.datum.x.toFixed(2)," months"," ",this.tooltipModel.datum.status?"":"(censored)",r.createElement("br",null),this.props.analysisClinicalAttribute&&r.createElement("span",null,this.props.analysisClinicalAttribute.displayName,":"," ",this.props.patientToAnalysisGroups[this.tooltipModel.datum.uniquePatientKey]))),this.props.showTable&&r.createElement("table",{className:"table table-striped",style:{marginTop:20,width:"100%"}},r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",null),r.createElement("td",null,this.props.totalCasesHeader),r.createElement("td",null,this.props.statusCasesHeader),r.createElement("td",null,this.props.medianMonthsHeader)),this.tableRows)))}},{key:"styleOpts",get:function(){var e=d.merge({},this.styleOptsDefaultProps,this.props.styleOpts);return e.padding.right=this.props.legendLocation===I.CHART?300:e.padding.right,this.props.styleOpts&&this.props.styleOpts.legend&&void 0!==this.props.styleOpts.legend.x||(e.legend.x=e.width-e.padding.right),e}},{key:"downSamplingDenominators",get:function(){return{x:this.styleOpts.width-this.styleOpts.padding.left-this.styleOpts.padding.right,y:this.styleOpts.height-this.styleOpts.padding.top-this.styleOpts.padding.bottom}}},{key:"estimates",get:function(){return d.mapValues(this.props.sortedGroupedSurvivals,function(e){return Object(h.f)(e)})}},{key:"unfilteredScatterData",get:function(){var e=this;return d.mapValues(this.props.sortedGroupedSurvivals,function(t,n){var r=e.estimates[n],o=e.analysisGroupsMap[n].name;return{numOfCases:t.length,line:Object(h.g)(t,r),scatterWithOpacity:Object(h.j)(t,r,o),scatter:Object(h.i)(t,r,o)}})}},{key:"scatterData",get:function(){return Object(h.b)(this.unfilteredScatterData,this.scatterFilter,{xDenominator:this.downSamplingDenominators.x,yDenominator:this.downSamplingDenominators.y,threshold:1e3})}},{key:"analysisGroupsMap",get:function(){return d.keyBy(this.props.analysisGroups,function(e){return e.value})}},{key:"logRankTestPVal",get:function(){var e=this;return this.analysisGroupsWithData.length>1?w.a.apply(void 0,C(this.analysisGroupsWithData.map(function(t){return e.props.sortedGroupedSurvivals[t.value]}))):null}},{key:"victoryLegendData",get:function(){var e=[];if(this.props.legendLocation===I.CHART){var t=!0,n=!1,r=void 0;try{for(var o,i=this.analysisGroupsWithData[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;e.push({name:a.legendText||a.name||a.value,symbol:{fill:a.color,strokeOpacity:0,type:"square",size:6}})}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}return e}},{key:"pValueText",get:function(){return null!==this.props.pValue&&void 0!==this.props.pValue?r.createElement(f.VictoryLabel,{x:this.styleOpts.pValue.x,y:this.styleOpts.pValue.y,style:g.w,textAnchor:this.styleOpts.pValue.textAnchor,text:"Logrank Test P-Value: ".concat(Object(m.b)(this.props.pValue,3,.01))}):null}},{key:"legendDataForDownload",get:function(){var e=this.analysisGroupsWithData.map(function(e){return{name:e.name?e.name:e.value,symbol:{fill:e.color,strokeOpacity:0,type:"square",size:6}}});return this.props.naPatientsHiddenInSurvival&&e.push({name:"* Patients with NA for any of the selected attributes are excluded",symbol:{opacity:0}}),e}},{key:"analysisGroupsWithData",get:function(){var e=this,t=this.props.analysisGroups;return t=t.filter(function(t){return t.value in e.scatterData&&e.scatterData[t.value].numOfCases>0})}},{key:"scattersAndLines",get:function(){var e=this,t=this.analysisGroupsWithData,n=(t=d.sortBy(t,function(t){return e.highlightedCurve===t.value?1:0})).map(function(t){return r.createElement(f.VictoryLine,{key:t.value,interpolation:"stepAfter",data:e.scatterData[t.value].line,style:{data:{stroke:t.color,strokeWidth:e.highlightedCurve===t.value?4:1,fill:"#000000",fillOpacity:0}}})}),o=t.map(function(t){return r.createElement(f.VictoryScatter,{key:t.value,data:e.scatterData[t.value].scatterWithOpacity,symbol:"plus",style:{data:{fill:t.color,opacity:function(e){return e.opacity}}},size:3})}),i=t.map(function(t){return r.createElement(f.VictoryScatter,{key:t.value,data:e.scatterData[t.value].scatter,symbol:"circle",style:{data:{fill:t.color,fillOpacity:e.hoverCircleFillOpacity}},size:10,events:e.events})});return n.concat(o).concat(i)}},{key:"legendForDownload",get:function(){var e=d.cloneDeep(g.a);return e.legend.style.data={type:"square",size:5,strokeWidth:0,stroke:"black"},r.createElement(f.VictoryLegend,{x:0,y:this.styleOpts.height+1,style:Object.assign(Object.assign({},e.legend.style),{title:{fontWeight:"bold"}}),title:this.props.title,rowGutter:-10,data:this.legendDataForDownload,groupComponent:r.createElement("g",{className:"survivalChartDownloadLegend"})})}},{key:"xAxisTickCount",get:function(){return this.props.xAxisTickCount||this.getAxisTickCount(this.showLegend?this.styleOpts.legend.x:this.styleOpts.width)}},{key:"showLegend",get:function(){return this.victoryLegendData.length>0}},{key:"maximumDataMonthValue",get:function(){return d.chain(this.props.sortedGroupedSurvivals).map(function(e){return e[e.length-1].months}).max().ceil().value()}},{key:"chart",get:function(){var e=this;return r.createElement("div",{className:this.props.className,"data-test":"SurvivalChart"},this.props.showDownloadButtons&&r.createElement(g.e,{dontFade:!0,filename:this.props.fileName,buttons:["SVG","PNG","PDF","Data"],getSvg:this.getSvg,getData:this.getData,style:{position:"absolute",zIndex:10,right:10},type:"button"}),this.props.showSlider&&r.createElement("div",{className:"small",style:{display:"flex",alignItems:"center",marginLeft:60}},r.createElement("span",null,"X-Axis Max:"),r.createElement("div",{className:"RangeSliderContainer",style:{width:300,marginLeft:10,marginRight:10}},r.createElement(s.a,{min:0,max:this.maximumDataMonthValue,value:this.sliderValue,onChange:this.onSliderChange,tooltip:!1,step:1})),r.createElement(g.f,{className:c.a.XmaxNumberInput,value:this.sliderValue.toString(),setValue:this.onSliderTextChange,numericOnly:!0}),r.createElement("span",null,Object(g.S)("Month",this.sliderValue)," Survival")),r.createElement(f.VictoryChart,{containerComponent:r.createElement(f.VictoryZoomContainer,{responsive:!1,disable:!0,zoomDomain:this.props.showSlider?{x:[0,this.sliderValue]}:void 0,onZoomDomainChange:d.debounce(function(t){e.scatterFilter=t},1e3),containerRef:function(t){return e.svgContainer=t}}),height:this.styleOpts.height,width:this.styleOpts.width,padding:this.styleOpts.padding,theme:g.a,domainPadding:{x:[10,50],y:[20,20]}},r.createElement(f.VictoryAxis,{style:this.styleOpts.axis.x,crossAxis:!1,tickCount:this.xAxisTickCount,label:this.props.xAxisLabel}),r.createElement(f.VictoryAxis,{label:this.props.yAxisLabel,dependentAxis:!0,tickFormat:function(e){return"".concat(e,"%")},tickCount:this.props.yAxisTickCount,style:this.styleOpts.axis.y,domain:[0,100],crossAxis:!1}),this.scattersAndLines,this.showLegend&&r.createElement(f.VictoryLegend,{x:this.styleOpts.legend.x,y:this.styleOpts.legend.y,data:this.victoryLegendData,labelComponent:this.props.legendLabelComponent||r.createElement(E.a,{dy:"0.3em",maxWidth:256}),groupComponent:r.createElement("g",{className:"survivalChartLegendHideForDownload"})}),this.legendForDownload,this.pValueText))}},{key:"chartTooltip",get:function(){var e=this;return r.createElement("div",{style:{maxWidth:250}},this.analysisGroupsWithData.map(function(t){return r.createElement("span",{key:t.value,style:{display:"inline-block",marginRight:12,fontWeight:e.highlightedCurve===t.value?"bold":"initial",cursor:"pointer"},onClick:function(){e.highlightedCurve=e.highlightedCurve===t.value?"":t.value}},r.createElement("div",{style:{width:10,height:10,display:"inline-block",backgroundColor:t.color,marginRight:5}}),t.name?t.name:t.value)}),this.props.showNaPatientsHiddenToggle&&r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",checked:this.props.naPatientsHiddenInSurvival,onClick:this.props.toggleSurvivalHideNAPatients})," ","Exclude patients with NA for any of the selected attributes.")))}},{key:"tableRows",get:function(){var e=this;return this.props.analysisGroups.map(function(t){return r.createElement("tr",null,r.createElement("td",null,t.name?t.name:t.value),Object(h.k)(e.props.sortedGroupedSurvivals[t.value],e.estimates[t.value]).map(function(e){return r.createElement("td",null,r.createElement("b",null,e))}))})}}])&&T(n.prototype,o),i&&T(n,i),t}();D.defaultProps={showTable:!0,showSlider:!0,legendLocation:I.CHART,showNaPatientsHiddenToggle:!1,showDownloadButtons:!0,yAxisTickCount:11},N([i.observable.ref],D.prototype,"tooltipModel",void 0),N([i.observable],D.prototype,"scatterFilter",void 0),N([i.observable],D.prototype,"highlightedCurve",void 0),N([i.observable],D.prototype,"sliderValue",void 0),N([i.computed],D.prototype,"styleOpts",null),N([i.computed],D.prototype,"downSamplingDenominators",null),N([i.computed],D.prototype,"estimates",null),N([i.computed],D.prototype,"unfilteredScatterData",null),N([i.computed],D.prototype,"scatterData",null),N([i.computed],D.prototype,"analysisGroupsMap",null),N([i.computed],D.prototype,"logRankTestPVal",null),N([i.computed],D.prototype,"victoryLegendData",null),N([i.computed],D.prototype,"legendDataForDownload",null),N([b.default],D.prototype,"getSvg",null),N([b.default],D.prototype,"getData",null),N([b.default],D.prototype,"hoverCircleFillOpacity",null),N([i.computed],D.prototype,"analysisGroupsWithData",null),N([i.computed],D.prototype,"scattersAndLines",null),N([i.computed],D.prototype,"legendForDownload",null),N([i.computed],D.prototype,"xAxisTickCount",null),N([i.computed],D.prototype,"showLegend",null),N([i.computed],D.prototype,"maximumDataMonthValue",null),N([b.default,i.action],D.prototype,"onSliderChange",null),N([b.default,i.action],D.prototype,"onSliderTextChange",null),N([i.computed],D.prototype,"chart",null),N([i.computed],D.prototype,"chartTooltip",null),N([i.computed],D.prototype,"tableRows",null),D=N([o.observer],D),t.b=D},function(e,t,n){},,function(e,t,n){"use strict";var r=n(0),o=n.n(r),i=n(787),a=n.n(i),s=n(9),l=n(1015),u=n(797),c=n(1),p=n(794),d=n.n(p),f=n(788),h=n(3),m=n(798),y=n(8);function g(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var w=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":E(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},O=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=v(this,_(t).apply(this,arguments))).ProfileToggle=function(t){var n=t.profile,o=t.type,i=t.label,s=t.checked,l=t.isGroupToggle;return r.createElement("label",null,r.createElement("input",{type:o,checked:s,onChange:function(t){return e.store.selectMolecularProfile(n,t.target.checked)},"data-test":n.molecularAlterationType}),r.createElement("span",{className:l?a.a.groupName:a.a.profileName},i),!l&&r.createElement(h.d,{mouseEnterDelay:0,placement:"right",overlay:r.createElement("div",{className:a.a.tooltip},n.description)},r.createElement(d.a,{className:a.a.infoIcon,name:"question-circle"})))},e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,f["d"]),n=t,(o=[{key:"render",value:function(){return 1!==this.store.selectableSelectedStudyIds.length?null:r.createElement(u.b,{padded:!0,className:a.a.MolecularProfileSelector},r.createElement(m.a,{className:"sectionLabel",promises:[this.store.molecularProfiles]},"Select Genomic Profiles:"),r.createElement("div",{className:a.a.group,"data-test":"molecularProfileSelector"},this.renderGroup("MUTATION_EXTENDED","Mutation"),this.renderGroup("COPY_NUMBER_ALTERATION","Copy Number"),this.showGSVA&&this.renderGroup("GENESET_SCORE","GSVA scores"),this.renderGroup("MRNA_EXPRESSION","mRNA Expression"),this.renderGroup("METHYLATION","DNA Methylation"),this.renderGroup("METHYLATION_BINARY","DNA Methylation"),this.renderGroup("PROTEIN_LEVEL","Protein/phosphoprotein level"),!(!this.store.molecularProfiles.isComplete||this.store.molecularProfiles.result.length)&&r.createElement("strong",null,"No Genomic Profiles available for this Cancer Study")))}},{key:"renderGroup",value:function(e,t){var n=this,o=this.store.getFilteredProfiles(e);if(!o.length)return null;var i=o.map(function(e){return e.molecularProfileId}),s=c.intersection(this.store.selectedProfileIds,i).length>0,l=[];o.length>1&&!this.store.forDownloadTab&&l.push(r.createElement(this.ProfileToggle,{key:"altTypeCheckbox:"+e,profile:o[0],type:"checkbox",label:"".concat(t,". Select one of the profiles below:"),checked:s,isGroupToggle:!0}));var u=o.map(function(e){return r.createElement(n.ProfileToggle,{key:"profile:"+e.molecularProfileId,profile:e,type:n.store.forDownloadTab||o.length>1?"radio":"checkbox",label:e.name,checked:c.includes(n.store.selectedProfileIds,e.molecularProfileId),isGroupToggle:!1})});return this.store.forDownloadTab||1==o.length?l.push.apply(l,g(u)):l.push(r.createElement("div",{key:"group:"+e,className:a.a.group},u)),this.store.forDownloadTab?l:(s&&"MRNA_EXPRESSION"==e&&l.push(r.createElement("div",{key:l.length,className:a.a.zScore},"Enter a z-score threshold"," ",r.createElement("span",{dangerouslySetInnerHTML:{__html:["&","plusmn;"].join("")}}),r.createElement("input",{type:"text",value:this.store.zScoreThreshold,onChange:function(e){n.store.zScoreThreshold=e.target.value}}))),s&&"PROTEIN_LEVEL"==e&&l.push(r.createElement("div",{key:l.length,className:a.a.zScore},"Enter a z-score threshold"," ",r.createElement("span",{dangerouslySetInnerHTML:{__html:["&","plusmn;"].join("")}}),r.createElement("input",{type:"text",value:this.store.rppaScoreThreshold,onChange:function(e){n.store.rppaScoreThreshold=e.target.value}}))),l)}},{key:"showGSVA",get:function(){return y.b.serverConfig.skin_show_gsva}}])&&b(n.prototype,o),i&&b(n,i),t}(),C=O=w([s.observer],O),k=n(66);function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var I=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":j(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},N=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),P(this,x(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,f["d"]),n=t,(o=[{key:"render",value:function(){if(!this.store.isVirtualStudyQuery)return null;var e=[];return e.push(r.createElement(k.a,{key:"loading",isLoading:this.store.profileAvailability.isPending})),this.store.profileAvailability.isError?e.push(r.createElement("span",{key:"error"},"Error loading profiles for selected studies.")):this.store.profileAvailability.isComplete&&(e=e.concat(function(e,t){var n=[];e.mutation&&n.push(r.createElement(D,{key:"M",label:"Mutation",state:"mutation",store:t,dataTest:"M"}));e.cna&&n.push(r.createElement(D,{key:"C",label:"Copy number alterations",state:"cna",store:t,dataTest:"C"}));return n}(this.store.profileAvailability.result,this.store))),r.createElement(u.b,{padded:!0,className:a.a.DataTypePrioritySelector,"data-test":"dataTypePrioritySelector"},r.createElement(m.a,{className:"sectionLabel"},"Select Molecular Profiles:"),r.createElement(u.b,null,e))}}])&&T(n.prototype,o),i&&T(n,i),t}(),M=N=I([s.observer],N),D=Object(s.observer)(function(e){return r.createElement("label",{className:a.a.DataTypePriorityLabel},r.createElement("input",{type:"checkbox",checked:e.store.dataTypePriority[e.state]||!1,onChange:function(t){e.store.dataTypePriority[e.state]=t.currentTarget.checked},"data-test":e.dataTest}),e.label)});var R=n(15),L=n(2),G=[{id:"Prostate Cancer: AR Signaling",genes:["SOX9","RAN","TNK2","EP300","PXN","NCOA2","AR","NRIP1","NCOR1","NCOR2"]},{id:"Prostate Cancer: AR and steroid synthesis enzymes",genes:["AKR1C3","AR","CYB5A","CYP11A1","CYP11B1","CYP11B2","CYP17A1","CYP19A1","CYP21A2","HSD17B1","HSD17B10","HSD17B11","HSD17B12","HSD17B13","HSD17B14","HSD17B2","HSD17B3","HSD17B4","HSD17B6","HSD17B7","HSD17B8","HSD3B1","HSD3B2","HSD3B7","RDH5","SHBG","SRD5A1","SRD5A2","SRD5A3","STAR"]},{id:"Prostate Cancer: Steroid inactivating genes",genes:["AKR1C1","AKR1C2","AKR1C4","CYP3A4","CYP3A43","CYP3A5","CYP3A7","UGT2B15","UGT2B17","UGT2B7"]},{id:"Prostate Cancer: Down-regulated by androgen",genes:["BCHE","CDK8","CTBP1","ACKR3","DDC","DPH1","FN1","HES6","MMP16","MYC","PEG3","PIK3R3","PRKD1","SCNN1A","SDC4","SERPINI1","SLC29A1","ST7","TULP4"]},{id:"Glioblastoma: TP53 Pathway",genes:["CDKN2A","MDM2","MDM4","TP53"]},{id:"Glioblastoma: RTK/Ras/PI3K/AKT Signaling",genes:["EGFR","ERBB2","PDGFRA","MET","KRAS","NRAS","HRAS","NF1","SPRY2","FOXO1","FOXO3","AKT1","AKT2","AKT3","PIK3R1","PIK3CA","PTEN"]},{id:"Glioblastoma: RB Pathway",genes:["CDKN2A","CDKN2B","CDKN2C","CDK4","CDK6","CCND2","RB1"]},{id:"Ovarian Cancer: Oncogenes associated with epithelial ovarian cancer",genes:["RAB25","MECOM","EIF5A2","PRKCI","PIK3CA","KIT","FGF1","MYC","EGFR","NOTCH3","KRAS","AKT1","ERBB2","PIK3R1","CCNE1","AKT2","AURKA"]},{id:"Ovarian Cancer: Putative tumor-suppressor genes in epithelial ovarian cancer",genes:["DIRAS3","RASSF1","DLEC1","SPARC","DAB2","PLAGL1","RPS6KA2","PTEN","OPCML","BRCA2","ARL11","WWOX","TP53","DPH1","BRCA1","PEG3"]},{id:"General: Cell Cycle Control",genes:["RB1","RBL1","RBL2","CCNA1","CCNB1","CDK1","CCNE1","CDK2","CDC25A","CCND1","CDK4","CDK6","CCND2","CDKN2A","CDKN2B","MYC","CDKN1A","CDKN1B","E2F1","E2F2","E2F3","E2F4","E2F5","E2F6","E2F7","E2F8","SRC","JAK1","JAK2","STAT1","STAT2","STAT3","STAT5A","STAT5B"]},{id:"General: p53 signaling",genes:["TP53","MDM2","MDM4","CDKN2A","CDKN2B","TP53BP1"]},{id:"General: Notch signaling",genes:["ADAM10","ADAM17","APH1A","APH1B","ARRDC1","CIR1","CTBP1","CTBP2","CUL1","DLL1","DLL3","DLL4","DTX1","DTX2","DTX3","DTX3L","DTX4","EP300","FBXW7","HDAC1","HDAC2","HES1","HES5","HEYL","ITCH","JAG1","JAG2","KDM5A","LFNG","MAML1","MAML2","MAML3","MFNG","NCOR2","NCSTN","NOTCH1","NOTCH2","NOTCH3","NOTCH4","NRARP","NUMB","NUMBL","PSEN1","PSEN2","PSENEN","RBPJ","RBPJL","RFNG","SNW1","SPEN","HES2","HES4","HES7","HEY1","HEY2"]},{id:"General: DNA Damage Response",genes:["CHEK1","CHEK2","RAD51","BRCA1","BRCA2","MLH1","MSH2","ATM","ATR","MDC1","PARP1","FANCF"]},{id:"General: Other growth / proliferation signaling",genes:["CSF1","CSF1R","IGF1","IGF1R","FGF1","FGFR1","AURKA","DLEC1","PLAGL1","OPCML","DPH1"]},{id:"General: Survival / cell death regulation signaling",genes:["NFKB1","NFKB2","CHUK","DIRAS3","FAS","HLA-G","BAD","BCL2","BCL2L1","APAF1","CASP9","CASP8","CASP10","CASP3","CASP6","CASP7","GSK3B","ARL11","WWOX","PEG3","TGFB1","TGFBR1","TGFBR2"]},{id:"General: Telomere maintenance",genes:["TERC","TERT"]},{id:"General: RTK signaling family",genes:["EGFR","ERBB2","ERBB3","ERBB4","PDGFA","PDGFB","PDGFRA","PDGFRB","KIT","FGF1","FGFR1","IGF1","IGF1R","VEGFA","VEGFB","KDR"]},{id:"General: PI3K-AKT-mTOR signaling",genes:["PIK3CA","PIK3R1","PIK3R2","PTEN","PDPK1","AKT1","AKT2","FOXO1","FOXO3","MTOR","RICTOR","TSC1","TSC2","RHEB","AKT1S1","RPTOR","MLST8"]},{id:"General: Ras-Raf-MEK-Erk/JNK signaling",genes:["KRAS","HRAS","BRAF","RAF1","MAP3K1","MAP3K2","MAP3K3","MAP3K4","MAP3K5","MAP2K1","MAP2K2","MAP2K3","MAP2K4","MAP2K5","MAPK1","MAPK3","MAPK4","MAPK6","MAPK7","MAPK8","MAPK9","MAPK12","MAPK14","DAB2","RASSF1","RAB25"]},{id:"General: Regulation of ribosomal protein synthesis and cell growth",genes:["RPS6KA1","RPS6KA2","RPS6KB1","RPS6KB2","EIF5A2","EIF4E","EIF4EBP1","RPS6","HIF1A"]},{id:"General: Angiogenesis",genes:["VEGFA","VEGFB","KDR","CXCL8","CXCR1","CXCR2"]},{id:"General: Folate transport",genes:["SLC19A1","FOLR1","FOLR2","FOLR3","IZUMO1R"]},{id:"General: Invasion and metastasis",genes:["MMP1","MMP2","MMP3","MMP7","MMP9","MMP10","MMP11","MMP12","MMP13","MMP14","MMP15","MMP16","MMP17","MMP19","MMP21","MMP23B","MMP24","MMP25","MMP26","MMP27","MMP28","ITGB3","ITGAV","PTK2","CDH1","SPARC","WFDC2"]},{id:"General: TGF-β Pathway",genes:["TGFB1","TGFB2","TGFB3","TGFBR1","TGFBR2","TGFBR3","BMP2","BMP3","BMP4","BMP5","BMP6","BMP7","GDF2","BMP10","BMP15","BMPR1A","BMPR1B","BMPR2","ACVR1","ACVR1B","ACVR1C","ACVR2A","ACVR2B","ACVRL1","Nodal","GDF1","GDF11","INHA","INHBA","INHBB","INHBC","INHBE","SMAD2","SMAD3","SMAD1","SMAD5","SMAD4","SMAD9","SMAD6","SMAD7","SPTBN1","TGFBRAP1","ZFYVE9"]}],V=n(5),B=n.n(V),F=n(17),H=n.n(F),U=n(21);n(1034),n(1035);function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e,t){return!t||"object"!==K(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Y=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":K(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},X=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},Z=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=q(this,z(t).call(this,e))).isLoading=!0,n.map_geneSets_selected=new L.ObservableMap,n.map_geneSets_selected.replace(e.initialSelection.map(function(e){return[e,!0]})),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(t,o.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){var e=this;this.promisedTree=this.initTree(this.tree),this.promisedTree.then(function(t){return e.isLoading=!1,t})}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.scoreThreshold===e.scoreThreshold&&this.props.pvalueThreshold===e.pvalueThreshold&&this.props.percentile===e.percentile||(this.promisedTree=this.promisedTree.then(function(e){return t.isLoading=!0,t.replaceTree(e)}).then(function(e){return t.isLoading=!1,e})),this.props.searchValue!==e.searchValue&&(this.promisedTree=this.promisedTree.then(function(e){return t.searchTree(e,t.props.searchValue)}))}},{key:"transformHierarchyData",value:function(e){var t=e,n=[],r=0,o=!0,i=!1,a=void 0;try{for(var s,l=t[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var u=s.value,p=u.nodeName,d=u.parentNodeName?u.parentNodeName:"#";if(n.push({id:p,parent:d,text:p,li_attr:{name:p},geneset:!1,state:{opened:!0,selected:!1}}),c.has(u,"genesets")){var f=!0,h=!1,m=void 0;try{for(var y,g=u.genesets[Symbol.iterator]();!(f=(y=g.next()).done);f=!0){var b=y.value,v=r++,_=b.genesetId,S=b.description,E=b.representativeScore,w=b.representativePvalue,O=b.refLink,C="",k=_+'<span style="font-weight:normal;font-style:italic;"> '+(C=(C=C+"score = "+E.toFixed(2))+", p-value = "+(w=w<.005?w.toExponential(0):w.toFixed(2)))+"</span>";n.push({id:v.toString(),parent:p,text:k,state:{selected:!1},li_attr:{name:_},description:S,representativeScore:E,representativePvalue:w,refLink:O,geneset:!0})}}catch(e){h=!0,m=e}finally{try{f||null==g.return||g.return()}finally{if(h)throw m}}}}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}return n}},{key:"initTree",value:function(e){return X(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(U.X)(this.props.gsvaProfile,this.props.percentile,this.props.scoreThreshold,this.props.pvalueThreshold,this.props.sampleListId);case 2:return n=t.sent,H()(e).jstree({search:{show_only_matches:!0,show_only_matches_children:!0},checkbox:{cascade_to_disabled:!1,cascade_to_hidden:!1},core:{themes:{icons:!1},check_callback:!0,data:this.transformHierarchyData(n)},plugins:["checkbox","search"]}),t.abrupt("return",e);case 5:case"end":return t.stop()}},t,this)}))}},{key:"destroyTree",value:function(e){H()(e).jstree(!0).destroy()}},{key:"replaceTree",value:function(e){return X(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.destroyTree(e),t.next=3,this.initTree(e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t,this)}))}},{key:"submitGeneSets",value:function(e){if(e){var t=H()(e).jstree("get_selected",!0),n=!0,r=!1,o=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;s.original.geneset&&this.map_geneSets_selected.set(s.original.description,!0)}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}}return this.map_geneSets_selected}},{key:"searchTree",value:function(e,t){return H()(e).jstree(!0).search(t),e}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(k.a,{isLoading:this.isLoading}),o.a.createElement("div",{ref:function(t){return e.tree=t},style:{maxHeight:"380px",overflowY:"scroll"},"data-test":"gsva-tree-container"}),o.a.createElement("div",{style:{padding:"30px 0px"}},o.a.createElement("button",{className:"btn btn-primary btn-sm pull-right",style:{margin:"2px"},disabled:this.isLoading,onClick:function(){var t=e.submitGeneSets(e.tree);e.props.onSelect(t)}},"Select")))}}])&&W(n.prototype,r),i&&W(n,i),t}();Y([L.observable],Z.prototype,"isLoading",void 0);var J=Z=Y([s.observer],Z),$=n(149);function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ie=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":oe(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ae=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=te(t).call(this,e))||"object"!==oe(o)&&"function"!=typeof o?ne(r):o).percentile=n.props.percentile,n.pvalueThreshold=String(n.props.pvalueThreshold),n.scoreThreshold=String(n.props.scoreThreshold),n.percentileOptions=[{label:"50%",value:50},{label:"75%",value:75},{label:"100%",value:100}],n.percentileChange=n.percentileChange.bind(ne(n)),n.applyFilter=n.applyFilter.bind(ne(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(t,r["Component"]),n=t,(o=[{key:"percentileChange",value:function(e){this.percentile=e?e.value:75}},{key:"applyFilter",value:function(){var e=this.pvalueThreshold?Number(this.pvalueThreshold):NaN,t=this.scoreThreshold?Number(this.scoreThreshold):NaN;Number.isNaN(e)||Number.isNaN(t)||this.props.onApply(this.percentile,e,t)}},{key:"render",value:function(){var e=this;return r.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center",width:"100%",background:"#eee",padding:"10px 10px"}},r.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.createElement("label",{htmlFor:"GSVAScore"},"GSVA score"),r.createElement("input",{id:"GSVAScore",type:"string",value:this.scoreThreshold,style:{width:160,height:36,padding:10},onChange:function(t){return e.scoreThreshold=t.target.value},step:"0.1"})),r.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.createElement("label",{htmlFor:"Pvalue"},"P-value"),r.createElement("input",{id:"Pvalue",type:"string",value:this.pvalueThreshold,style:{width:160,height:36,padding:10},onChange:function(t){return e.pvalueThreshold=t.target.value},step:"0.01",min:"0"})),r.createElement("div",null,r.createElement("label",{htmlFor:"PercentileScoreCalculation"},"Percentile for score calculation"),r.createElement($.default,{addLabelText:"Percentile for score calculation",style:{width:160,borderRadius:"2px"},clearable:!1,name:"PercentileScoreCalculation",value:this.percentile,options:this.percentileOptions,onChange:this.percentileChange})),r.createElement("div",null,r.createElement("button",{id:"filterButton",className:"btn btn-primary btn-sm",style:{padding:"20px 18px"},onClick:this.applyFilter},"Apply Filter")))}}])&&ee(n.prototype,o),i&&ee(n,i),t}();ie([L.observable],ae.prototype,"percentile",void 0),ie([L.observable],ae.prototype,"pvalueThreshold",void 0),ie([L.observable],ae.prototype,"scoreThreshold",void 0);var se=ae=ie([s.observer],ae);function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pe(e,t){return(pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var fe=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":de(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},he=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=ue(t).call(this,e))||"object"!==de(o)&&"function"!=typeof o?ce(r):o).percentile=75,n.pvalueThreshold=.05,n.scoreThreshold=.5,n.searchValue="",n.updateSelectionParameters=n.updateSelectionParameters.bind(ce(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pe(e,t)}(t,r["Component"]),n=t,(o=[{key:"updateSelectionParameters",value:function(e,t,n){this.percentile=e,this.pvalueThreshold=t,this.scoreThreshold=n}},{key:"render",value:function(){var e=this;return r.createElement("div",null,r.createElement("text",null,"Search hierarchy"),r.createElement("div",{className:"form-group has-feedback input-group-sm",style:{display:"inline-block"}},r.createElement("input",{type:"text",id:"geneset-hierarchy-search",className:"form-control tableSearchInput",style:{width:768},value:this.searchValue,onChange:function(t){return e.searchValue=t.target.value}}),r.createElement("span",{className:"fa fa-search form-control-feedback","aria-hidden":"true"})),r.createElement(se,{percentile:this.percentile,pvalueThreshold:this.pvalueThreshold,scoreThreshold:this.scoreThreshold,onApply:this.updateSelectionParameters}),r.createElement(J,{initialSelection:this.props.initialSelection,scoreThreshold:this.scoreThreshold,pvalueThreshold:this.pvalueThreshold,percentile:this.percentile,gsvaProfile:this.props.gsvaProfile,sampleListId:this.props.sampleListId,searchValue:this.searchValue,onSelect:this.props.onSelect}))}}])&&le(n.prototype,o),i&&le(n,i),t}();fe([L.observable],he.prototype,"percentile",void 0),fe([L.observable],he.prototype,"pvalueThreshold",void 0),fe([L.observable],he.prototype,"scoreThreshold",void 0),fe([L.observable],he.prototype,"searchValue",void 0);var me=he=fe([s.observer],he),ye=n(172),ge=n(96),be=n(49),ve=n(14);function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ee(e,t){return!t||"object"!==Te(t)&&"function"!=typeof t?we(e):t}function we(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oe(e){return(Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ce(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ke(e,t)}function ke(e,t){return(ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Te(e){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Pe=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Te(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},xe=function(e){function t(){return Se(this,t),Ee(this,Oe(t).apply(this,arguments))}return Ce(t,ge["b"]),t}(),Ae=function(e){function t(e){var n;return Se(this,t),(n=Ee(this,Oe(t).call(this,e))).percentileOptions=[{label:"50%",value:"50"},{label:"75%",value:"75"},{label:"100%",value:"100"}],n.percentileChange=n.percentileChange.bind(we(n)),n.updateSelectionFromPlot=n.updateSelectionFromPlot.bind(we(n)),n}var n,o,i;return Ce(t,f["d"]),n=t,(o=[{key:"percentileChange",value:function(e){this.store.volcanoPlotSelectedPercentile=e||{label:"75%",value:"75"}}},{key:"updateSelectionFromPlot",value:function(e,t){var n=this,r=e&&e[0].data?e[0].data:[];this.store.volcanoPlotTableData.result.map(function(e){var t=e.representativeScore,o=e.representativePvalue,i=e.name,a=t,s=-Math.log(o)/Math.log(10),l=!0,u=!1,c=void 0;try{for(var p,d=r[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var f=p.value;f.x===a&&f.y===s&&n.store.map_genesets_selected_volcano.set(i,!0)}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}})}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:a.a.GenesetsVolcanoSelectorWindow,style:{height:"400px"}},r.createElement("div",{style:{float:"left"},className:"form-inline"},r.createElement("label",{htmlFor:"PercentileScoreCalculation"},"Percentile for score calculation:"),r.createElement("span",{style:{display:"inline-block",verticalAlign:"middle",marginLeft:"1em"}},r.createElement($.default,{addLabelText:"Percentile for score calculation",style:{width:160,borderRadius:"2px"},clearable:!1,name:"PercentileScoreCalculation",value:this.store.volcanoPlotSelectedPercentile,options:this.percentileOptions,onChange:this.percentileChange})),r.createElement(k.a,{isLoading:!(this.props.plotData&&this.props.maxY&&this.store.volcanoPlotTableData.isComplete&&this.props.data)}),this.store.volcanoPlotGraphData&&this.store.minYVolcanoPlot&&this.props.plotData&&this.props.maxY&&this.store.volcanoPlotTableData.isComplete&&this.props.data&&r.createElement(ve.VictoryChart,{theme:h.a,width:510,height:350,containerComponent:r.createElement(ve.VictorySelectionContainer,{onSelection:this.updateSelectionFromPlot,selectionStyle:{fill:"tomato",fillOpacity:.5,stroke:"tomato",strokeWidth:2}})},r.createElement(ve.VictoryAxis,{crossAxis:!0,domain:[this.xAxisMinValue,this.xAxisMaxValue],tickValues:this.xAxisTickValues,style:{axisLabel:{padding:35}},label:"GSVA score",offsetY:50,standalone:!1}),r.createElement(ve.VictoryAxis,{dependentAxis:!0,crossAxis:!0,domain:[0,this.props.maxY],style:{axisLabel:{padding:35},stroke:"none"},label:"-log10 p-value",offsetX:50,standalone:!1}),r.createElement(ve.VictoryLabel,{text:"significance",datum:{x:this.xAxisTickValues[this.xAxisTickValues.length-1],y:1.3},textAnchor:"start"}),r.createElement(ve.VictoryLine,{style:{data:{stroke:"black",strokeDasharray:5},parent:{border:"dotted 1px #f00"}},data:[{x:this.xAxisMinValue,y:1.3},{x:this.xAxisTickValues[this.xAxisTickValues.length-1],y:1.3}]}),r.createElement(ve.VictoryLine,{style:{data:{stroke:"rgb(144, 164, 174)"},parent:{border:"1px dashed solid"}},data:[{x:0,y:0},{x:0,y:this.props.maxY}]}),r.createElement(ve.VictoryScatter,{style:{data:{fill:function(e){return e?e.fill:""},fillOpacity:.3}},size:3,data:this.props.plotData}))),r.createElement("div",{style:{float:"right",height:"356.5px",overflowY:"scroll",width:"650px"}},r.createElement(k.a,{isLoading:!(this.store.volcanoPlotTableData.isComplete&&this.props.data)}),this.store.volcanoPlotTableData.isComplete&&this.props.data&&r.createElement(xe,{data:this.props.data,columns:[{name:"Gene Sets",render:function(e){return r.createElement("span",null,e.name)},sortBy:function(e){return e.name},filter:function(e,t,n){return e.name.toUpperCase().indexOf(n)>-1}},{name:"GSVA Score",render:function(e){return r.createElement("span",null,e.representativeScore.toFixed(2))},sortBy:function(e){return e.representativeScore}},{name:"P Value",render:function(e){return r.createElement("span",null,Object(be.g)(e.representativePvalue,2,.1))},sortBy:function(e){return e.representativePvalue}},{name:"Selected",render:function(t){return r.createElement(ye.a,{checked:!!e.store.map_genesets_selected_volcano.get(t.name),onChange:function(n){return e.store.map_genesets_selected_volcano.set(t.name,n.target.checked)}})}}],initialSortColumn:"P Value",initialSortDirection:"asc",showPagination:!0,initialItemsPerPage:100,showColumnVisibility:!1,showFilter:!0,showCopyDownload:!1})),r.createElement("div",{style:{float:"right"}},this.store.volcanoPlotTableData.isComplete&&this.props.data&&r.createElement("button",{style:{marginTop:15,float:"right"},className:"btn btn-primary btn-sm pull-right",onClick:function(){return e.props.onSelect(e.store.map_genesets_selected_volcano)}},"Add selection to the query"),this.store.volcanoPlotTableData.isComplete&&this.props.data&&r.createElement("button",{style:{marginRight:15,marginTop:15,float:"right"},className:"btn btn-primary btn-sm pull-right",onClick:function(){return e.store.map_genesets_selected_volcano.replace(e.props.initialSelection.map(function(e){return[e,!0]}))}},"Clear selection")))}},{key:"xAxisTickSize",get:function(){if(this.props.plotData&&this.props.plotData.length>0){var e=c.maxBy(this.props.plotData,function(e){return e.x}).x,t=c.minBy(this.props.plotData,function(e){return e.x}).x,n=Math.max(e,Math.abs(t));return(n=Math.round(n))/2}return.5}},{key:"xAxisTickValues",get:function(){return[-2*this.xAxisTickSize,-this.xAxisTickSize,0,this.xAxisTickSize,2*this.xAxisTickSize]}},{key:"xAxisMaxValue",get:function(){return 2.5*this.xAxisTickSize}},{key:"xAxisMinValue",get:function(){return-2.5*this.xAxisTickSize}}])&&_e(n.prototype,o),i&&_e(n,i),t}();Pe([L.action],Ae.prototype,"updateSelectionFromPlot",null),Pe([L.computed],Ae.prototype,"xAxisTickSize",null),Pe([L.computed],Ae.prototype,"xAxisTickValues",null),Pe([L.computed],Ae.prototype,"xAxisMaxValue",null),Pe([L.computed],Ae.prototype,"xAxisMinValue",null);var je=Ae=Pe([s.observer],Ae);function Ie(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Me(e,t){return!t||"object"!==Le(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function De(e){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Re(e,t){return(Re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Le(e){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ge=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Le(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Ve=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Me(this,De(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Re(e,t)}(t,f["d"]),n=t,(o=[{key:"render",value:function(){var e=this;return r.createElement(u.b,{padded:!0,overflow:!0,className:a.a.GeneSetSelector},r.createElement(m.a,{className:"sectionLabel"},"Enter Gene Sets:"),r.createElement(u.a,{overflow:!0},r.createElement(u.b,{padded:!0,className:a.a.buttonRow},r.createElement("button",{className:"btn btn-default btn-sm","data-test":"GENESET_HIERARCHY_BUTTON",onClick:function(){return e.store.showGenesetsHierarchyPopup=!0}},"Select Gene Sets from Hierarchy"),r.createElement("button",{className:"btn btn-default btn-sm","data-test":"GENESET_VOLCANO_BUTTON",onClick:function(){return e.store.showGenesetsVolcanoPopup=!0}},"Select Gene Sets from Volcano Plot")),r.createElement("textarea",{ref:this.textAreaRef,className:B()(a.a.geneSet,this.store.genesetQuery?a.a.notEmpty:a.a.empty),rows:5,cols:80,placeholder:"Enter Gene Sets",title:"Enter Gene Sets",value:this.store.genesetQuery,onChange:function(t){return e.store.genesetQuery=t.currentTarget.value},"data-test":"GENESETS_TEXT_AREA"}),r.createElement(R.Modal,{className:B()("cbioportal-frontend",a.a.GenesetsSelectorWindow),show:this.store.showGenesetsHierarchyPopup,onHide:function(){return e.store.showGenesetsHierarchyPopup=!1}},r.createElement(R.Modal.Header,{closeButton:!0},r.createElement(R.Modal.Title,null,"Select Gene Sets From Hierarchy")),r.createElement(R.Modal.Body,null,r.createElement(me,{initialSelection:this.store.genesetIds,gsvaProfile:this.store.getFilteredProfiles("GENESET_SCORE")[0].molecularProfileId,sampleListId:this.store.defaultSelectedSampleListId,onSelect:function(t){e.store.applyGenesetSelection(t),e.store.showGenesetsHierarchyPopup=!1}}))),r.createElement(R.Modal,{className:B()("cbioportal-frontend",a.a.GenesetsVolcanoSelectorWindow),show:this.store.showGenesetsVolcanoPopup,onHide:function(){return e.store.showGenesetsVolcanoPopup=!1},onShow:function(){return e.store.map_genesets_selected_volcano.replace(e.store.genesetIds.map(function(e){return[e,!0]}))}},r.createElement(R.Modal.Header,{closeButton:!0},r.createElement(R.Modal.Title,null,"Select Gene Sets From Volcano Plot")),r.createElement(R.Modal.Body,null,r.createElement(je,{initialSelection:this.store.genesetIds,data:this.store.volcanoPlotTableData.result,plotData:this.store.volcanoPlotGraphData,maxY:this.store.minYVolcanoPlot?-Math.log(this.store.minYVolcanoPlot)/Math.log(10):void 0,onSelect:function(t){e.store.addToGenesetSelection(t),e.store.showGenesetsVolcanoPopup=!1}})))))}},{key:"selectedGeneListOption",get:function(){var e=this,t=this.geneListOptions.find(function(t){return t.value===e.store.geneQuery});return t?t.value:""}},{key:"geneListOptions",get:function(){var e=G;if(y.b.serverConfig.query_sets_of_genes){var t=y.a.parseQuerySetsOfGenes(y.b.serverConfig.query_sets_of_genes);t&&(e=t)}return[{label:"User-defined List",value:""}].concat(Ie(e.map(function(e){return{label:"".concat(e.id," (").concat(e.genes.length," genes)"),value:e.genes.join(" ")}})))}},{key:"textAreaRef",get:function(){var e=this;if(this.store.geneQueryErrorDisplayStatus===f.b.ShouldFocus)return function(t){var n=e.store.oql.error;t&&n&&(t.focus(),t.setSelectionRange(n.start,n.end),e.store.geneQueryErrorDisplayStatus=f.b.Focused)}}}])&&Ne(n.prototype,o),i&&Ne(n,i),t}();Ge([L.computed],Ve.prototype,"selectedGeneListOption",null),Ge([L.computed],Ve.prototype,"geneListOptions",null),Ge([L.computed],Ve.prototype,"textAreaRef",null);var Be=Ve=Ge([s.observer],Ve),Fe=n(18),He=n(1036),Ue=n(838),We=n(76),qe=n.n(We),ze=n(127),Qe=n(20),Ke=n(310);function Ye(e){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xe(){return(Xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Je(e){return(Je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function et(e,t){return(et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n(1044);var tt=n(194);function nt(e,t){var n=[];return t||(Object.keys(e[0]).forEach(function(e){return n.push(e,",")}),n.pop(),n.push("\r\n")),e.forEach(function(e){c.each(e,function(e){n.push(e,",")}),n.pop(),n.push("\r\n")}),n.join("")}var rt=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=Je(t).call(this,e),(n=!o||"object"!==Ye(o)&&"function"!=typeof o?$e(r):o).downloadData=function(){n.props.downloadDataGenerator?qe()(nt(n.props.downloadDataGenerator()||[],n.props.downloadDataContainsHeader),n.props.downloadFilename):qe()(nt(n.props.tableData||[],n.props.downloadDataContainsHeader),n.props.downloadFilename)},n.handleInput=n.handleInput.bind($e(n)),n.getText=n.getText.bind($e(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&et(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){this.props.showCopyAndDownload&&this._copyButton&&this.bindCopyButton()}},{key:"bindCopyButton",value:function(){new tt(this._copyButton,{text:function(){return this.getText()}.bind(this)})}},{key:"handleInput",value:function(e){var t=this;null!==this.searchTimeout&&(clearTimeout(this.searchTimeout),this.searchTimeout=null);var n=e.currentTarget.value;this.searchTimeout=setTimeout(function(){t.props.handleInput&&t.props.handleInput(n)},this.props.searchDelayMs)}},{key:"render",value:function(){var e=this,t=r.createElement("div",{className:"rc-tooltip-arrow-inner"});return r.createElement("div",{className:(this.props.className||"")+""},r.createElement(R.ButtonToolbar,null,r.createElement(Qe.If,{condition:this.props.showPagination},r.createElement(ze.a,Xe({className:"pull-left"},this.props.paginationProps))),r.createElement(Qe.If,{condition:this.props.showHideShowColumnButton},r.createElement(Ke.a,this.props.columnVisibilityProps)),r.createElement(Qe.If,{condition:this.props.showCopyAndDownload},r.createElement(R.ButtonGroup,{className:this.props.copyDownloadClassName,style:{marginLeft:10}},r.createElement(h.d,{overlay:r.createElement("span",null,"Copy"),placement:"top",mouseLeaveDelay:0,mouseEnterDelay:.5,arrowContent:t},r.createElement("button",{ref:function(t){e._copyButton=t},className:"btn btn-sm btn-default","option-text":this.getText},r.createElement("i",{className:"fa fa-clipboard"}))),r.createElement(h.d,{overlay:r.createElement("span",null,"Download CSV"),mouseLeaveDelay:0,mouseEnterDelay:.5,placement:"top",arrowContent:t},r.createElement(R.Button,{className:"btn-sm",onClick:this.downloadData},r.createElement("i",{className:"fa fa-cloud-download"}))))),r.createElement(Qe.If,{condition:this.props.showSearch},r.createElement("div",{className:"".concat(this.props.searchClassName," form-group has-feedback input-group-sm"),style:{display:"inline-block",marginLeft:10}},r.createElement("input",{type:"text",onInput:this.handleInput,className:"form-control tableSearchInput",style:{width:200}}),r.createElement("span",{className:"fa fa-search form-control-feedback","aria-hidden":"true"})))))}},{key:"getText",value:function(){return this.props.downloadDataGenerator?nt(this.props.downloadDataGenerator()||[],this.props.downloadDataContainsHeader):nt(this.props.tableData||[],this.props.downloadDataContainsHeader)}}])&&Ze(n.prototype,o),i&&Ze(n,i),t}();rt.defaultProps={showSearch:!1,showCopyAndDownload:!0,showPagination:!1,searchClassName:"",copyDownloadClassName:"",downloadFilename:"patient-clinical-attributes.tsv",downloadDataContainsHeader:!1,paginationProps:{},columnVisibilityProps:{},searchDelayMs:400};n(1045);function ot(e){return(ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function it(){return(it=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function at(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function st(e){return(st=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ut(e,t){return(ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ct=function(e){function t(e){var n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=st(t).call(this,e),(n=!o||"object"!==ot(o)&&"function"!=typeof o?lt(r):o).rawDataSelector=function(e,t){return t.rawData},n.columnsSelector=function(e,t){return t.columns},n.columnVisibilitySelector=function(e){return e.columnVisibility},n.visibleColsSelector=Object(He.createSelector)(n.columnsSelector,n.columnVisibilitySelector,function(e,t){return n.resolveVisible(e,t)}),n.sortedVisibleColsSelector=Object(He.createSelector)(n.visibleColsSelector,function(e){return n.resolveOrder(e)}),n.sortedColsSelector=Object(He.createSelector)(n.columnsSelector,function(e){return n.resolveOrder(e)}),n.columnVisibilityArraySelector=Object(He.createSelector)(n.sortedColsSelector,n.columnVisibilitySelector,function(e,t){return n.resolveColumnVisibility(n.colNameToId,e,t)}),n.downloadDataSelector=Object(He.createSelector)(n.sortedColsSelector,n.columnVisibilitySelector,n.rawDataSelector,function(e,t,r){return n.generateDownloadData(e,t,r)}),n.headersSelector=Object(He.createSelector)(n.sortedVisibleColsSelector,function(e){return n.generateHeaders(e)}),n.rowsSelector=Object(He.createSelector)(n.sortedColsSelector,n.rawDataSelector,function(e,t){return n.generateRows(e,t)}),n.colNameToId=n.mapColNameToId(e.columns),n.state={columnVisibility:t.resolveVisibility(e.columns,e.rawData),sortableColumns:n.resolveSortable(n.props.columns||{}),filterableColumns:n.resolveFilterable(n.props.columns||{}),filter:"",itemsPerPage:n.props.initItemsPerPage||25,currentPage:n.props.initPage||0},n.filteredDataLength=e.rawData.length,n.shouldSetState=!1;var i=Ue.Table.prototype.applyFilter;Ue.Table.prototype.applyFilter=function(){var e,t=i.apply(this,arguments);return(e=t.length)!==n.filteredDataLength&&(n.filteredDataLength=e,n.shouldSetState=!0),t};var a=Ue.Table.prototype.render;return Ue.Table.prototype.render=function(){var e,t=a.apply(this,arguments);return e=t.props.children.find(function(e){return"tbody"===e.type}).props.children||[],n.props.onVisibleRowsChange&&n.props.onVisibleRowsChange(e.map(function(e){return e.props.rowData})),t},n.handleDownload=n.handleDownload.bind(lt(n)),n.handleFilterInput=n.handleFilterInput.bind(lt(n)),n.handleVisibilityToggle=n.handleVisibilityToggle.bind(lt(n)),n.handleChangeItemsPerPage=n.handleChangeItemsPerPage.bind(lt(n)),n.handlePreviousPageClick=n.handlePreviousPageClick.bind(lt(n)),n.handleNextPageClick=n.handleNextPageClick.bind(lt(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ut(e,t)}(t,r["Component"]),n=t,i=[{key:"resolveVisibility",value:function(e,t){var n={};return e?(c.each(c.keys(e),function(r){var o=e[r],i="visible";o.visible&&(i=c.isFunction(o.visible)?o.visible(t,o.columnProps):o.visible),"excluded"!==i&&(n[r]=i)}),n):n}},{key:"columnSort",value:function(e,t){return e.priority&&t.priority?e.priority-t.priority:e.priority?-1:t.priority?1:e.name>t.name?1:-1}}],(o=[{key:"render",value:function(){var e=this.props,t=e.className,n=e.reactTableProps,o=e.headerControlsProps,i=(this.columnVisibilityArraySelector(this.state,this.props),this.headersSelector(this.state,this.props)),a=this.rowsSelector(this.state,this.props),s=this.rowIndexesOnPage(),l=s.firstIndex,u=s.numIndexes;return r.createElement("div",{className:t},r.createElement(rt,it({showCopyAndDownload:!0,showHideShowColumnButton:!0,handleInput:this.handleFilterInput,downloadDataGenerator:this.handleDownload,downloadDataContainsHeader:!0,downloadFilename:"mutations.csv",showSearch:!0,columnVisibilityProps:{className:"pull-right",onColumnToggled:this.handleVisibilityToggle},paginationProps:{className:"pull-right",itemsPerPage:this.state.itemsPerPage,currentPage:this.state.currentPage,onChangeItemsPerPage:this.handleChangeItemsPerPage,onPreviousPageClick:this.handlePreviousPageClick,onNextPageClick:this.handleNextPageClick,textBetweenButtons:"".concat(this.filteredDataLength?l+1:0,"-").concat(l+u," of ").concat(this.filteredDataLength),previousPageDisabled:0===this.state.currentPage,nextPageDisabled:this.state.currentPage>=this.numPages()-1}},o)),r.createElement(Ue.Table,it({sortable:this.state.sortableColumns,filterable:this.state.filterableColumns,filterBy:this.state.filter,itemsPerPage:-1===this.state.itemsPerPage?void 0:this.state.itemsPerPage,currentPage:this.state.currentPage},n),i,a))}},{key:"componentWillUpdate",value:function(e,t){0===t.filter.length&&(this.filteredDataLength=this.props.rawData.length)}},{key:"componentDidUpdate",value:function(){this.shouldSetState&&(this.shouldSetState=!1,this.setState({currentPage:Math.max(0,Math.min(this.state.currentPage,this.numPages()-1))}))}},{key:"rowIndexesOnPage",value:function(){var e,t;return-1===this.state.itemsPerPage?(e=0,t=this.filteredDataLength):(e=this.state.itemsPerPage*this.state.currentPage,t=Math.min(this.filteredDataLength-e,this.state.itemsPerPage)),{firstIndex:e,numIndexes:t}}},{key:"numPages",value:function(e){return-1===(e=e||this.state.itemsPerPage)?1:Math.ceil(this.filteredDataLength/e)}},{key:"mapColNameToId",value:function(e){var t={};return e&&c.each(e,function(e,n){e.name&&(t[e.name],t[e.name]=n)}),t}},{key:"resolveOrder",value:function(e){return e?c.values(e).sort(t.columnSort):[]}},{key:"resolveColumnVisibility",value:function(e,t,n){var r=[];return c.each(t,function(t){var o=e[t.name];n[o]&&r.push({id:o,name:t.name,visibility:n[o]})}),r}},{key:"generateHeaders",value:function(e){var t=[];return c.each(e,function(e){var n=e.header||r.createElement("span",null,e.name);if(e.description){var o=r.createElement("div",{className:"rc-tooltip-arrow-inner"});n=r.createElement(h.d,{overlay:r.createElement("span",null,e.description),placement:"top",arrowContent:o},n)}t.push(r.createElement(Ue.Th,{key:e.name,column:e.name},n))}),t}},{key:"generateDownloadData",value:function(e,t,n){var r=this,o=[];return o[0]=[],c.each(e,function(e){var n=r.colNameToId[e.name];n in t&&"excluded"!==t[n]&&o[0].push(e.name)}),c.each(n,function(i,a){var s=[];c.each(e,function(e){var o=r.colNameToId[e.name];if(o in t&&"excluded"!==t[o]){var a=r.getColumnData(e,n,i);e.downloader?s.push(e.downloader(a,e.columnProps)):s.push((a.columnData||"").toString())}}),o.push(s)}),o}},{key:"getColumnData",value:function(e,t,n){var r={name:e.name,tableData:t,rowData:n,columnData:null};if(e.columnDataFunction)r.columnData=e.columnDataFunction(r);else if(e.dataField){var o=null;(o=c.isArray(r.rowData)&&r.rowData.length>0?r.rowData[0]:r.rowData)&&(r.columnData=o[e.dataField])}return r}},{key:"generateRows",value:function(e,t){var n=this,o=[];return c.each(t,function(i,a){var s=n.generateColumns(e,t,i);o.push(r.createElement(Ue.Tr,{key:a,rowData:i},s))}),o}},{key:"generateColumns",value:function(e,t,n){var r=this,o=[];return c.each(e,function(e){var i=r.getColumnData(e,t,n);o.push(r.generateColumn(i,e))}),o}},{key:"generateColumn",value:function(e,t){return t.formatter?t.formatter(e,t.columnProps):r.createElement(Ue.Td,{key:t.name,column:t.name,value:e.columnData},e.columnData)}},{key:"resolveVisible",value:function(e,t){var n={};return c.each(c.keys(t),function(r){"visible"===t[r]&&(n[r]=e[r])}),n}},{key:"resolveSortable",value:function(e){var t=[];return c.each(e,function(e){c.isFunction(e.sortable)?t.push({column:e.name,sortFunction:e.sortable}):e.sortable&&t.push(e.name)}),t}},{key:"resolveFilterable",value:function(e){var t=[];return c.each(e,function(e){c.isFunction(e.filterable)?t.push({column:e.name,filterFunction:e.filterable}):e.filterable&&t.push(e.name)}),t}},{key:"handleFilterInput",value:function(e){this.setState({filter:e})}},{key:"handleDownload",value:function(){return this.downloadDataSelector(this.state,this.props)}},{key:"handleVisibilityToggle",value:function(e){var t=e,n=this.state.columnVisibility[t],r=Object.assign({},this.state.columnVisibility);"hidden"===n?n="visible":"visible"===n&&(n="hidden"),r[t]=n,this.setState({columnVisibility:r})}},{key:"handleChangeItemsPerPage",value:function(e){this.setState({itemsPerPage:e,currentPage:Math.min(this.state.currentPage,this.numPages(e)-1)})}},{key:"handlePreviousPageClick",value:function(){this.setState({currentPage:Math.max(0,this.state.currentPage-1)})}},{key:"handleNextPageClick",value:function(){this.setState({currentPage:Math.min(this.state.currentPage+1,this.numPages()-1)})}}])&&at(n.prototype,o),i&&at(n,i),t}();function pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ft(e,t){return!t||"object"!==gt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ht(e){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yt(e,t)}function yt(e,t){return(yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gt(e){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var bt=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":gt(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},vt=function(e){function t(){return dt(this,t),ft(this,ht(t).apply(this,arguments))}return mt(t,ct),t}(),_t=function(e){function t(e){var n;return dt(this,t),(n=ft(this,ht(t).call(this,e))).map_geneSymbol_selected=L.observable.map(),n.columns={hugoGeneSymbol:{priority:1,dataField:"hugoGeneSymbol",name:"Gene Symbol",sortable:!0,filterable:!0},numberOfMutations:{priority:2,dataField:"numberOfMutations",name:"Num Mutations",sortable:!0,filterable:!0},qValue:{priority:3,dataField:"qValue",name:"Q-Value",sortable:!0,filterable:!0,formatter:function(e){var t=e.name,n=e.columnData;return r.createElement(Ue.Td,{key:t,column:t,value:n},Object(be.g)(n,2,.1))}},selected:{name:"Selected",priority:4,sortable:!1,filterable:!1,header:r.createElement("div",{className:a.a.selectionColumnHeader},r.createElement("span",null,"All"),r.createElement(s.Observer,null,function(){return r.createElement(ye.a,{checked:n.selectedGenes.length>0,indeterminate:n.selectedGenes.length>0&&n.selectedGenes.length<n.allGenes.length,onChange:function(e){return n.selectAll(e.target.checked)}})})),formatter:function(e){var t=e.name,o=e.rowData;return r.createElement(Ue.Td,{key:t,column:t},!!o&&r.createElement("div",{className:a.a.selectionColumnCell},r.createElement(s.Observer,null,function(){return r.createElement(ye.a,{checked:!!n.map_geneSymbol_selected.get(o.hugoGeneSymbol),onChange:function(e){return n.map_geneSymbol_selected.set(o.hugoGeneSymbol,e.target.checked)}})})))}}},n.map_geneSymbol_selected.replace(e.initialSelection.map(function(e){return[e,!0]})),n}var n,o,i;return mt(t,r["Component"]),n=t,(o=[{key:"selectAll",value:function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=this.allGenes[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;this.map_geneSymbol_selected.set(a,e)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:a.a.MutSigGeneSelector},r.createElement(vt,{itemsName:"genes",initItemsPerPage:10,columns:this.columns,rawData:this.props.data,headerControlsProps:{showCopyAndDownload:!1,showHideShowColumnButton:!1,showPagination:!0},reactTableProps:{className:"table table-striped table-border-top",hideFilterInput:!0,defaultSort:this.columns.qValue.name}}),r.createElement("div",null,r.createElement("button",{style:{marginTop:20},className:"btn btn-primary btn-sm pull-right",onClick:function(){return e.props.onSelect(e.map_geneSymbol_selected)}},"Select")))}},{key:"allGenes",get:function(){return c.uniq(this.props.data.map(function(e){return e.hugoGeneSymbol}))}},{key:"selectedGenes",get:function(){var e=this;return this.allGenes.filter(function(t){return e.map_geneSymbol_selected.get(t)})}}])&&pt(n.prototype,o),i&&pt(n,i),t}();bt([L.computed],_t.prototype,"allGenes",null),bt([L.computed],_t.prototype,"selectedGenes",null),bt([L.action],_t.prototype,"selectAll",null);var St=_t=bt([s.observer],_t);function Et(e){return e?e.genes.map(function(e){return e.hugoGeneSymbol}):[]}var wt=new RegExp("^([0-9]{1,2})([pq])([0-9]{1,2})(?:.?)([0-9]{0,2})$");function Ot(e,t){var n=e.match(wt),r=t.match(wt);return n&&r?parseInt(n[1],10)-parseInt(r[1],10)!=0?parseInt(n[1],10)-parseInt(r[1],10):"p"===n[2]&&"q"===r[2]?-1:"q"===n[2]&&"p"===r[2]?1:n[2]===r[2]?parseInt(n[3],10)-parseInt(r[3],10):0:+!!n-+!!r}function Ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kt(e,t,n){return t&&Ct(e.prototype,t),n&&Ct(e,n),e}function Tt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pt(e,t){return!t||"object"!==It(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xt(e){return(xt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function At(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jt(e,t)}function jt(e,t){return(jt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function It(e){return(It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Nt=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":It(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Mt=function(e){function t(){return Tt(this,t),Pt(this,xt(t).apply(this,arguments))}return At(t,ct),t}(),Dt=function(e){function t(e){var n;return Tt(this,t),(n=Pt(this,xt(t).call(this,e))).map_geneSymbol_selected=L.observable.map(),n.columns={amp:{priority:1,columnDataFunction:function(e){var t=e.rowData;return t&&(t.amp?"Amp":"Del")},name:"Amp Del",sortable:!0,filterable:!0,header:r.createElement("div",{className:B()(a.a.header,a.a.amp,a.a.del)},r.createElement("span",{className:a.a.amp},"Amp"),r.createElement("span",{className:a.a.del},"Del")),formatter:function(e){var t=e.name,n=e.rowData,o=e.columnData;return r.createElement(Ue.Td,{key:t,column:t,value:o},!!n&&r.createElement("div",{className:n.amp?a.a.amp:a.a.del}))}},chromosome:{priority:2,dataField:"chromosome",name:"Chr",sortable:!0,filterable:!0},cytoband:{priority:3,dataField:"cytoband",name:"Cytoband",sortable:Ot,filterable:!0},"#":{priority:4,columnDataFunction:function(e){return Et(e.rowData).length},name:"#",sortable:!0,filterable:!0},genes:{priority:5,columnDataFunction:function(e){return Et(e.rowData).join(" ")},name:"Genes",sortable:function(e,t){return e.length-t.length||+(e>t)-+(e<t)},filterable:!0,formatter:function(e){var t=e.name,o=e.rowData,i=e.columnData;return r.createElement(Ue.Td,{key:t,column:t,value:i},r.createElement(Lt,{gistic:o,map_geneSymbol_selected:n.map_geneSymbol_selected}))}},qValue:{priority:6,dataField:"qValue",name:"Q-Value",sortable:!0,filterable:!0,formatter:function(e){var t=e.name,n=(e.rowData,e.columnData);return r.createElement(Ue.Td,{key:t,column:t,value:n},Object(be.g)(n,2,.1))}}},n.map_geneSymbol_selected.replace(e.initialSelection.map(function(e){return[e,!0]})),n}return At(t,r["Component"]),kt(t,[{key:"render",value:function(){var e=this;return r.createElement("div",{className:a.a.GisticGeneSelector},r.createElement("span",null,"Click on a gene to ",r.createElement("span",{className:B()(a.a.geneToggle,a.a.selected,a.a.simulateHovered)},"select")," it."),r.createElement(Mt,{className:a.a.gisticTable,itemsName:"genes",initItemsPerPage:10,columns:this.columns,rawData:this.props.data,headerControlsProps:{showCopyAndDownload:!1,showHideShowColumnButton:!1,showPagination:!0},reactTableProps:{className:"table table-striped table-border-top",hideFilterInput:!0,defaultSort:this.columns.qValue.name}}),r.createElement("div",null,r.createElement("button",{style:{marginTop:20},className:"btn btn-primary btn-sm pull-right",onClick:function(){return e.props.onSelect(e.map_geneSymbol_selected)}},"Select")))}}]),t}(),Rt=Dt=Nt([s.observer],Dt),Lt=function(e){function t(){var e;return Tt(this,t),(e=Pt(this,xt(t).apply(this,arguments))).showAll=!1,e}return At(t,r["Component"]),kt(t,[{key:"renderGeneToggles",value:function(e){var t=this;return e.map(function(e){return r.createElement(s.Observer,null,function(){var n=!!t.props.map_geneSymbol_selected.get(e);return r.createElement("span",{key:e,className:B()(a.a.geneToggle,n?a.a.selected:a.a.notSelected),onClick:function(r){return t.props.map_geneSymbol_selected.set(e,!n)}},e)})})}},{key:"render",value:function(){var e=this,t=Et(this.props.gistic),n=t.slice(0,5),o=t.slice(5);return r.createElement("div",{className:a.a.GisticGeneToggles},r.createElement("div",{className:a.a.someGenes},this.renderGeneToggles(n),!!o.length&&r.createElement("a",{className:a.a.showMoreLess,onClick:function(){return e.showAll=!e.showAll}},this.showAll?"less":"+".concat(o.length," more"))),r.createElement("div",{className:a.a.moreGenes},this.showAll&&this.renderGeneToggles(o)))}}]),t}();Nt([L.observable],Lt.prototype,"showAll",void 0),Lt=Nt([s.observer],Lt);var Gt=n(803),Vt=n(35);function Bt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ft(e,t){return!t||"object"!==Wt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ht(e){return(Ht=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ut(e,t){return(Ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wt(e){return(Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var qt=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Wt(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},zt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ft(this,Ht(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ut(e,t)}(t,f["d"]),n=t,(o=[{key:"render",value:function(){return this.store.genesetIdsQuery.error?r.createElement("div",{className:a.a.GeneSymbolValidator},r.createElement("span",{className:a.a.errorMessage},"Cannot validate gene sets because of invalid OQL. ".concat(this.store.genesetQueryErrorDisplayStatus===f.b.Focused?"Please click 'Submit' to see location of error.":this.store.genesetIdsQuery.error.message))):this.store.genesetIdsQuery.query.length?this.store.genesets.isError?r.createElement("div",{className:a.a.GeneSymbolValidator},r.createElement("span",{className:a.a.pendingMessage},"Unable to validate gene sets.")):this.store.genesets.isPending&&0===this.store.genesets.result.invalid.length?r.createElement("div",{className:a.a.GeneSymbolValidator},r.createElement("span",{className:a.a.pendingMessage},"Validating gene sets...")):this.store.genesets.result.invalid.length?r.createElement("div",{className:a.a.GeneSymbolValidator},r.createElement("div",{className:a.a.invalidBubble,title:"Please edit the gene sets."},r.createElement(d.a,{className:a.a.icon,name:"exclamation-circle"}),r.createElement("span",null,"Invalid gene sets.")),this.store.genesets.result.invalid.map(this.renderSuggestion,this)):r.createElement("div",{className:a.a.GeneSymbolValidator},r.createElement("div",{className:a.a.validBubble,title:"You can now submit the list."},r.createElement(d.a,{className:a.a.icon,name:"check-circle"}),r.createElement("span",null,"All gene sets are valid."))):null}},{key:"renderSuggestion",value:function(e,t){var n=this;return r.createElement("div",{key:t,className:a.a.suggestionBubble,title:"Could not find gene set. Click to remove it from the gene list.",onClick:function(){return n.store.replaceGeneset(e,"")}},r.createElement(d.a,{className:a.a.icon,name:"times-circle"}),r.createElement("span",{className:a.a.noChoiceLabel},e))}}])&&Bt(n.prototype,o),i&&Bt(n,i),t}(),Qt=zt=qt([s.observer],zt),Kt=n(903);function Yt(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Xt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zt(e,t){return!t||"object"!==en(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Jt(e){return(Jt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $t(e,t){return($t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function en(e){return(en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var tn=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":en(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},nn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Zt(this,Jt(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$t(e,t)}(t,f["d"]),n=t,(o=[{key:"handleOQLUpdate",value:function(e,t,n){n!==this.store.geneQuery&&(this.store.geneQuery=n,this.store.oql.error=e.error)}},{key:"render",value:function(){var e=this;return r.createElement(u.b,{overflow:!0,padded:!0,className:a.a.GeneSetSelector},r.createElement(m.a,{className:"sectionLabel",secondaryComponent:r.createElement("a",{target:"_blank",className:a.a.learnOql,href:Object(Fe.v)()},r.createElement("strong",null,"Hint:")," Learn Onco Query Language (OQL)",r.createElement("br",null),"to write more powerful queries"," ",r.createElement("i",{className:"fa fa-external-link"}))},"Enter Genes:"),r.createElement(u.a,{overflow:!0},r.createElement($.default,{value:this.selectedGeneListOption,options:this.geneListOptions,onChange:function(t){return e.store.geneQuery=t?t.value:""}}),r.createElement(Gt.b,{focus:this.store.geneQueryErrorDisplayStatus,inputGeneQuery:this.store.geneQuery,validateInputGeneQuery:!0,location:Gt.a.DEFAULT,textBoxPrompt:"Enter HUGO Gene Symbols, Gene Aliases, or OQL",callback:this.handleOQLUpdate,error:this.store.submitError,messages:this.store.oqlMessages},this.customError),r.createElement(Qt,null),r.createElement(R.Modal,{className:B()("cbioportal-frontend",a.a.MutSigGeneSelectorWindow),show:this.store.showMutSigPopup,onHide:function(){return e.store.showMutSigPopup=!1}},r.createElement(R.Modal.Header,{closeButton:!0},r.createElement(R.Modal.Title,null,"Recently Mutated Genes")),r.createElement(R.Modal.Body,null,r.createElement(St,{initialSelection:this.store.geneIds,data:this.store.mutSigForSingleStudy.result,onSelect:function(t){e.store.applyGeneSelection(t),e.store.showMutSigPopup=!1}}))),r.createElement(R.Modal,{className:B()("cbioportal-frontend",a.a.GisticGeneSelectorWindow),show:this.store.showGisticPopup,onHide:function(){return e.store.showGisticPopup=!1}},r.createElement(R.Modal.Header,{closeButton:!0},r.createElement(R.Modal.Title,null,"Recurrent Copy Number Alterations (Gistic)")),r.createElement(R.Modal.Body,null,r.createElement(Rt,{initialSelection:this.store.geneIds,data:this.store.gisticForSingleStudy.result,onSelect:function(t){e.store.applyGeneSelection(t),e.store.showGisticPopup=!1}})))))}},{key:"selectedGeneListOption",get:function(){var e=this,t=this.geneListOptions.find(function(t){return t.value==e.store.geneQuery});return t?t.value:""}},{key:"geneListOptions",get:function(){var e=G;if(y.b.serverConfig.query_sets_of_genes){var t=y.a.parseQuerySetsOfGenes(y.b.serverConfig.query_sets_of_genes);t&&(e=t)}return[{label:"User-defined List",value:""}].concat(Yt(e.map(function(e){return{label:"".concat(e.id," (").concat(e.genes.length," genes)"),value:e.genes.join(" ")}})))}},{key:"customError",get:function(){return this.store.isQueryLimitReached?r.createElement("div",{className:a.a.geneCount},r.createElement("div",{className:"",title:"Please limit your queries to ".concat(this.store.geneLimit," genes or fewer.")},r.createElement(d.a,{className:a.a.icon,name:"exclamation-circle"}),r.createElement(Kt.a,{sampleCount:this.store.approxSampleCount,queryProductLimit:y.b.serverConfig.query_product_limit,email:y.b.serverConfig.skin_email_contact}))):null}}])&&Xt(n.prototype,o),i&&Xt(n,i),t}();tn([L.computed],nn.prototype,"selectedGeneListOption",null),tn([L.computed],nn.prototype,"geneListOptions",null),tn([Vt.bind,L.action],nn.prototype,"handleOQLUpdate",null),tn([L.computed],nn.prototype,"customError",null);var rn,on=nn=tn([s.observer],nn),an=n(832);!function(e){e.custom="-1",e.mutation_cna="w_mut_cna",e.mutation="w_mut",e.cna="w_cna",e.all="all"}(rn||(rn={}));var sn=[{name:"All",description:"All cases in the selected cohorts",value:rn.all,isdefault:!1},{name:"Cases with mutations data",description:"All cases with mutations data",value:rn.mutation,isdefault:!1},{name:"Cases with copy number alterations data",description:"All cases with copy number alterations data",value:rn.cna,isdefault:!1},{name:"Cases with both mutations and copy number alterations data",description:"All cases with both mutations and copy number alterations data",value:rn.mutation_cna,isdefault:!1},{name:"User-defined Case List",description:"Specify your own case list",value:rn.custom,isdefault:!0}];function ln(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function un(e,t){return!t||"object"!==dn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cn(e){return(cn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pn(e,t){return(pn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dn(e){return(dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var fn=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":dn(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};function hn(e,t){return c.includes(e.textLabel.toLowerCase(),t.toLowerCase())}var mn=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=un(this,cn(t).apply(this,arguments))).isQueryModified=!1,e.CaseIdsModeRadio=Object(s.observer)(function(t){return r.createElement("label",null,r.createElement("input",{type:"radio",checked:e.store.caseIdsMode==t.state,onChange:function(n){n.currentTarget.checked&&(e.store.caseIdsMode=t.state)}}),t.label)}),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pn(e,t)}(t,f["d"]),n=t,(o=[{key:"render",value:function(){var e=this;return!this.isQueryModified&&this.props.modifyQueryParams&&this.modifyQuery(),this.store.selectableSelectedStudyIds.length?r.createElement(u.b,{padded:!0,overflow:!0,className:a.a.CaseSetSelector,"data-test":"CaseSetSelector"},r.createElement("div",null,r.createElement(m.a,{className:"sectionLabel",secondaryComponent:r.createElement("a",{href:Object(Fe.B)(this.store.selectableSelectedStudyIds),target:"_blank"},"To build your own case set,",r.createElement("br",null),"try out our enhanced Study View."),promises:[this.store.sampleLists,this.store.asyncCustomCaseSet,this.store.profiledSamplesCount]},"Select Patient/Case Set:")),r.createElement("div",null,r.createElement($.default,{value:this.store.selectedSampleListId,options:this.caseSetOptions,filterOption:hn,onChange:function(t){return e.store.selectedSampleListId=t?t.value:void 0},"data-test":"caseSetSelector"}),!(this.store.selectedSampleListId!==f.a)&&r.createElement(u.a,{padded:!0},r.createElement("div",{className:a.a.radioRow},r.createElement(u.b,{padded:!0},r.createElement(this.CaseIdsModeRadio,{label:"By sample ID",state:"sample"}),r.createElement(this.CaseIdsModeRadio,{label:"By patient ID",state:"patient"}))),r.createElement("span",null,"Enter case IDs below:"),r.createElement("textarea",{title:"Enter case IDs",rows:6,cols:80,value:this.store.caseIds,onChange:function(t){return e.store.caseIds=t.currentTarget.value},"data-test":"CustomCaseSetInput"})))):null}},{key:"modifyQuery",value:function(){this.store.selectedSampleListId=this.props.modifyQueryParams.selectedSampleListId,this.store.caseIds=this.props.modifyQueryParams.selectedSampleIds.join("\n"),this.store.caseIdsMode=this.props.modifyQueryParams.caseIdsMode,this.isQueryModified=!0}},{key:"caseSetOptions",get:function(){var e,t,n,o=this.store.sampleLists.result.map(function(e){return{label:r.createElement(h.d,{placement:"right",mouseEnterDelay:0,overlay:r.createElement("div",{className:a.a.tooltip},e.description)},r.createElement("span",null,"".concat(e.name," (").concat(e.sampleCount,")"))),value:e.sampleListId,textLabel:e.name}}),i=(e=this.store.isVirtualStudySelected,t=this.store.isMultipleNonVirtualStudiesSelected,n=this.store.profiledSamplesCount.result,c.reduce(sn,function(r,o){if(o.isdefault)r.push(o);else if(t&&!e){var i=n[o.value];i>0&&r.push(Object.assign({},o,{name:"".concat(o.name," (").concat(i,")")}))}else if(e&&o.value===rn.all){var a=n[o.value];a>0&&r.push(Object.assign({},o,{name:"".concat(o.name," (").concat(a,")")}))}return r},[])).map(function(e){return{value:e.value,label:r.createElement(h.d,{placement:"right",mouseEnterDelay:0,overlay:r.createElement("div",{className:a.a.tooltip},e.description)},r.createElement("span",null,e.name)),textLabel:e.name}});return o.concat(i)}}])&&ln(n.prototype,o),i&&ln(n,i),t}();fn([L.computed],mn.prototype,"caseSetOptions",null),fn([L.action],mn.prototype,"modifyQuery",null);var yn=mn=fn([s.observer],mn);function gn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bn(e,t){return!t||"object"!==Sn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vn(e){return(vn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _n(e,t){return(_n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Sn(e){return(Sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var En=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Sn(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},wn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),bn(this,vn(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_n(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return this.props.ids.length>0?r.createElement("div",{className:"alert alert-danger","data-test":"unkown-study-warning",style:{marginBottom:0}},r.createElement("i",{className:"fa fa-exclamation-triangle"})," The following studies do not exist or you do not have access to them:",r.createElement("ul",{style:{margin:"10px 0"}},this.props.ids.map(function(e){return r.createElement("li",null,e)})),"Please resubmit your query below."):null}}])&&gn(n.prototype,o),i&&gn(n,i),t}(),On=wn=En([s.observer],wn),Cn=n(6),kn=n(1046),Tn=n(897),Pn=n(97);function xn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function An(e){return(An=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function In(e,t){return(In=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Nn(e){return(Nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Mn=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Nn(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Dn=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=An(t).call(this,e))||"object"!==Nn(o)&&"function"!=typeof o?jn(r):o)._showQueryControls=!1,n.handleSubmit=n.handleSubmit.bind(jn(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&In(e,t)}(t,r["Component"]),n=t,(o=[{key:"handleSubmit",value:function(){this.store.submit(),this.props.onSubmit&&this.props.onSubmit()}},{key:"toggleQueryControls",value:function(){H()(document).scrollTop(0),this._showQueryControls=!this._showQueryControls}},{key:"render",value:function(){var e=this;return r.createElement(u.a,{padded:!0,overflow:!0,className:B()("small",a.a.QueryContainer,{forkedMode:this.props.forkedMode})},this.props.showAlerts&&this.store.genes.isComplete&&this.store.genes.result.suggestions.length>0&&r.createElement("div",{className:"alert alert-danger","data-test":"invalidQueryAlert",style:{marginBottom:0}},r.createElement("i",{className:"fa fa-exclamation-triangle"})," Your query has invalid or out-dated gene symbols. Please correct below."),this.store.unknownStudyIds.isComplete&&r.createElement(On,{ids:this.store.unknownStudyIds.result}),this.store.forDownloadTab&&r.createElement("div",{className:"alert alert-danger",role:"alert"},"The Download interface has been removed. Enhanced download functionality is now available through the Query interface. Run a query with your gene(s) of interest and use the Download tab to download all available data types."),!this.store.forDownloadTab&&r.createElement(Qe.If,{condition:0===this.store.defaultSelectedIds.size||this.studiesDataReady},r.createElement(Qe.Then,null,r.createElement(Qe.If,{condition:this.props.forkedMode&&this.showQueryControls},r.createElement(u.b,{className:a.a.StudySelection},r.createElement(m.a,{className:"sectionLabel"},"Selected Studies:"," ",r.createElement("button",{"data-test":"modifyStudySelectionButton",className:"btn btn-default btn-xs",onClick:this.toggleQueryControls},"Modify")),r.createElement("div",{style:{marginLeft:8}},this.selectedStudySummary))),this.getWrappedCancerStudySelector,r.createElement(Qe.If,{condition:this.showQueryControls},r.createElement(r.Fragment,null,this.store.physicalStudyIdsInSelection.length>1?r.createElement(M,null):r.createElement(C,null),this.store.selectableSelectedStudyIds.length>0&&r.createElement(yn,{modifyQueryParams:this.props.modifyQueryParams}),r.createElement(on,null),!!this.store.isGenesetProfileSelected&&r.createElement(Be,null),!!this.store.forDownloadTab&&r.createElement("span",{className:a.a.downloadSubmitExplanation},"Clicking submit will generate a tab-delimited file containing your requested data."),!!this.store.forDownloadTab&&r.createElement(ye.a,{labelProps:{className:a.a.transposeDataMatrix},checked:this.store.transposeDataMatrix,onChange:function(t){return e.store.transposeDataMatrix=t.currentTarget.checked}},"Transpose data matrix"),r.createElement(u.b,{overflow:!0,padded:!0,className:B()(a.a.submitRow,"posRelative")},r.createElement("button",{style:{paddingLeft:50,paddingRight:50,marginRight:50},disabled:!this.store.submitEnabled,className:"btn btn-primary btn-lg",onClick:function(){return e.handleSubmit()},"data-test":"queryButton"},this.store.forDownloadTab?"Download":"Submit Query")))),r.createElement(Qe.If,{condition:!this.showQueryControls},r.createElement(u.b,{className:a.a.forkedButtons},r.createElement("div",{style:{width:330,textAlign:"right",marginRight:20}},r.createElement(Tn.a,{store:this.store})),r.createElement(h.d,{placement:"top",trigger:["hover"],destroyTooltipOnHide:!0,mouseEnterDelay:0,mouseLeaveDelay:0,disabled:this.store.selectableSelectedStudies.length>0,overlay:this.queryByGeneTooltipMessage},r.createElement("a",{"data-test":"queryByGeneButton",onClick:function(){return e.store.hasSelectedStudies&&e.toggleQueryControls()},"data-event":Object(Pn.e)({action:"clickQueryByGeneButton",label:"",category:"homePage"}),className:B()("btn btn-primary btn-lg",{disabled:!this.store.hasSelectedStudies})},"Query By Gene")),"OR",r.createElement(h.d,{placement:"top",trigger:["hover"],destroyTooltipOnHide:!0,mouseEnterDelay:0,mouseLeaveDelay:0,disabled:!this.exploreCohortsButtonDisabled,overlay:this.exploreCohortsButtonTooltipMessage},r.createElement("a",{onClick:function(){return!e.exploreCohortsButtonDisabled&&e.store.openSummary()},"data-event":Object(Pn.e)({action:"clickExploreStudiesButton",label:"",category:"homePage"}),className:B()("btn btn-primary btn-lg",{disabled:this.exploreCohortsButtonDisabled})},r.createElement("i",{style:{marginTop:5},className:"ci ci-pie-chart"})," ","Explore Selected Studies"))))),r.createElement(Qe.Else,null,r.createElement(k.a,{isLoading:!0,center:!0,size:"big"}))))}},{key:"store",get:function(){return this.props.store}},{key:"studiesDataReady",get:function(){return this.store.studiesHaveChangedSinceInitialization||this.store.selectableStudiesSet.isComplete&&this.store.initiallySelected.profileIds&&this.store.cancerTypes.isComplete&&this.store.cancerStudies.isComplete&&this.store.profiledSamplesCount.isComplete}},{key:"showQueryControls",get:function(){return!1===this.props.forkedMode||this._showQueryControls}},{key:"selectedStudySummary",get:function(){var e=this,t=null;if(this.store.selectableSelectedStudies.length>4){t=r.createElement("span",{className:"inlineBlock"},r.createElement(h.d,{overlay:function(){return e.store.selectableSelectedStudies.slice(4).map(function(e){return r.createElement("div",null,e.name)})}},r.createElement("a",null,"and"," ",this.store.selectableSelectedStudies.length-4," ","more")))}return r.createElement("span",{className:"inlineBlock"},this.store.selectableSelectedStudies.slice(0,4).reduce(function(e,t,n,o){return e.push(r.createElement("span",{className:a.a.studyName},t.name)),e},[]),t,t&&r.createElement("span",null," "),"(",r.createElement("b",null,this.store.profiledSamplesCount.result.all)," ",1===this.store.profiledSamplesCount.result.all?"sample":"total samples",")")}},{key:"getWrappedCancerStudySelector",get:function(){var e=r.createElement(l.a,{queryStore:this.store,forkedMode:this.props.forkedMode});return this.props.forkedMode?r.createElement("div",{style:{marginTop:0}},r.createElement(kn.Fade,{duration:500,collapse:!1,className:"monkeys",unmountOnExit:!0,when:!this.showQueryControls},e)):e}},{key:"studyLimitedReached",get:function(){return this.store.selectableSelectedStudyIds.length>50}},{key:"exploreCohortsButtonDisabled",get:function(){return this.studyLimitedReached||!this.store.hasSelectedStudies}},{key:"exploreCohortsButtonTooltipMessage",get:function(){return 0===this.store.selectableSelectedStudyIds.length?"Please select at least one study above":this.studyLimitedReached?"Too many studies selected for study summary (limit: 50)":"Open summary of selected studies"}},{key:"queryByGeneTooltipMessage",get:function(){return 0===this.store.selectableSelectedStudies.length?"Please select at least one study above":"Continue to query configuration"}}])&&xn(n.prototype,o),i&&xn(n,i),t}();Mn([L.computed],Dn.prototype,"studiesDataReady",null),Mn([L.observable],Dn.prototype,"_showQueryControls",void 0),Mn([L.computed],Dn.prototype,"showQueryControls",null),Mn([L.computed],Dn.prototype,"selectedStudySummary",null),Mn([L.computed],Dn.prototype,"getWrappedCancerStudySelector",null),Mn([Cn.default],Dn.prototype,"toggleQueryControls",null),Mn([L.computed],Dn.prototype,"studyLimitedReached",null),Mn([L.computed],Dn.prototype,"exploreCohortsButtonDisabled",null),Mn([L.computed],Dn.prototype,"exploreCohortsButtonTooltipMessage",null),Mn([L.computed],Dn.prototype,"queryByGeneTooltipMessage",null);var Rn,Ln=Dn=Mn([Object(an.b)(f.c),s.observer],Dn),Gn=n(792),Vn=n(112),Bn=n(13);!function(e){e.STUDY="STUDY",e.STUDY_COUNT="studies",e.GENE="GENE",e.GENE_COUNT="genes",e.PATIENT="PATIENT",e.PATIENT_COUNT="patients",e.SAMPLE="SAMPLE",e.SAMPLE_COUNT="samples"}(Rn||(Rn={}));n(1056);var Fn=n(807),Hn=n(1057),Un=n(129),Wn=n.n(Un),qn=n(122),zn=n(175);function Qn(){return(Qn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Kn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yn(e){return(Yn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zn(e,t){return(Zn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Jn(e){return(Jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var $n,er=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Jn(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},tr=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},nr=20,rr=3;!function(e){e[e.SESSION=0]="SESSION",e[e.STUDY_LIST=1]="STUDY_LIST"}($n||($n={}));var or=function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=Yn(t).apply(this,arguments),(e=!r||"object"!==Jn(r)&&"function"!=typeof r?Xn(n):r).studyPageMultiplier=0,e.genePageMultiplier=0,e.patientPageMultiplier=0,e.samplePageMultiplier=0,e.inputValue="",e.isFocusing=!1,e.isLoading=!1,e.geneStudyQueryVirtualStudy=Object(h.T)(function(){return tr(Xn(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=y.b.serverConfig.default_cross_cancer_study_session_id,!y.a.sessionServiceIsEnabled()||!t){e.next=14;break}return e.prev=2,e.next=5,qn.a.getVirtualStudy(t);case 5:return n=e.sent,e.abrupt("return",n);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:e.next=15;break;case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}},e,null,[[2,9]])}))},null),e.geneStudyQuery=Object(h.T)({await:function(){return[e.geneStudyQueryVirtualStudy]},invoke:function(){return e.geneStudyQueryVirtualStudy.result?Promise.resolve({type:$n.SESSION,query:e.geneStudyQueryVirtualStudy.result.id,name:e.geneStudyQueryVirtualStudy.result.data.name}):Promise.resolve({type:$n.STUDY_LIST,query:y.b.serverConfig.default_cross_cancer_study_list,name:y.b.serverConfig.default_cross_cancer_study_list_name})}}),e.options=Object(h.T)({await:function(){return[e.geneStudyQuery]},invoke:function(){var t=e.inputValue,n=e.geneStudyQuery.result;return t.length>0?Promise.all([Bn.a.getAllStudiesUsingGETWithHttpInfo({keyword:t,pageSize:rr+nr*e.studyPageMultiplier}),Bn.a.getAllStudiesUsingGETWithHttpInfo({keyword:t,projection:"META"}),Bn.a.getAllGenesUsingGETWithHttpInfo({keyword:t,pageSize:rr+nr*e.genePageMultiplier}),Bn.a.getAllGenesUsingGETWithHttpInfo({keyword:t,projection:"META"}),Bn.a.getAllPatientsUsingGETWithHttpInfo({keyword:t,pageSize:rr+nr*e.patientPageMultiplier,projection:"DETAILED"}),Bn.a.getAllPatientsUsingGETWithHttpInfo({keyword:t,projection:"META"}),Bn.a.getSamplesByKeywordUsingGETWithHttpInfo({keyword:t,pageSize:rr+nr*e.samplePageMultiplier}),Bn.a.getSamplesByKeywordUsingGETWithHttpInfo({keyword:t,projection:"META"}),Object(Fn.a)(0)]).then(function(r){return tr(Xn(e),void 0,void 0,regeneratorRuntime.mark(function e(){var o,i,a,s,l,u,c,p,d,f,h,m=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=r[0].body.map(this.studyToOption),i={value:parseInt(r[1].headers["total-count"])-o.length,type:Rn.STUDY_COUNT},a=r[2].body.map(this.geneToOption),s={value:parseInt(r[3].headers["total-count"])-a.length,type:Rn.GENE_COUNT},l=r[4].body.map(this.patientToOption),u={value:parseInt(r[5].headers["total-count"])-l.length,type:Rn.PATIENT_COUNT},c=r[6].body.map(this.sampleToOption),p={value:parseInt(r[7].headers["total-count"])-c.length,type:Rn.SAMPLE_COUNT},!(a.length+l.length<2*rr&&i.value>0)){e.next=13;break}return d=2*rr-(a.length+l.length),e.next=12,Bn.a.getAllStudiesUsingGETWithHttpInfo({keyword:t,pageSize:d+rr+nr*this.studyPageMultiplier}).then(function(e){o=e.body.map(m.studyToOption)});case 12:i.value=i.value-d;case 13:return f=[],(h=[]).push({label:"Studies",options:o,groupData:i,instruction:"Click on a study to open its summary"}),i.value>0&&(o.push(i),f.push(i)),n&&(h.push({label:"Genes",options:a,groupData:s,instruction:"Click on a gene to query it across ".concat(n.name)}),s.value>0&&(a.push(s),f.push(s))),h.push({label:"Patients",options:l,groupData:u,instruction:"Click on a patient to see a summary"}),u.value>0&&(l.push(u),f.push(u)),h.push({label:"Samples",options:c,groupData:p,instruction:"Click on a sample to open its summary"}),p.value>0&&(c.push(p),f.push(p)),e.abrupt("return",h);case 23:case"end":return e.stop()}},e,this)}))}):Promise.resolve([])}}),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zn(e,t)}(t,r["Component"]),n=t,(o=[{key:"selectRef",value:function(e){this.select=e}},{key:"studyToOption",value:function(e,t){return{value:e.studyId,type:Rn.STUDY,studyId:e.studyId,name:e.name,allSampleCount:e.allSampleCount,index:t}}},{key:"geneToOption",value:function(e,t){return{value:e.entrezGeneId,type:Rn.GENE,hugoGeneSymbol:e.hugoGeneSymbol,cytoband:e.cytoband,index:t}}},{key:"patientToOption",value:function(e,t){return{value:e.uniquePatientKey,type:Rn.PATIENT,studyId:e.studyId,patientId:e.patientId,studyName:e.cancerStudy.name,index:t}}},{key:"sampleToOption",value:function(e,t){return{value:e.sampleId,type:Rn.SAMPLE,studyId:e.studyId,studyName:this.studies.get(e.studyId),patientId:e.patientId,sampleType:e.sampleType,index:t}}},{key:"handleChange",value:function(e){var t,n;if(e.type===Rn.STUDY)t={id:e.studyId},n=zn.a.Study,this.trackClick(zn.a.Study,this.inputValue);else if(e.type===Rn.GENE){var r=this.geneStudyQuery.isComplete&&this.geneStudyQuery.result.query;t={case_set_id:"all",gene_list:e.hugoGeneSymbol,cancer_study_list:r},n="results/cancerTypesSummary",this.trackClick("gene",this.inputValue)}else e.type===Rn.PATIENT?(t={studyId:e.studyId,caseId:e.patientId},n=zn.a.Patient,this.trackClick(zn.a.Patient,this.inputValue)):e.type===Rn.SAMPLE?(t={studyId:e.studyId,sampleId:e.value},n=zn.a.Patient,this.trackClick("sample",this.inputValue)):e.type===Rn.STUDY_COUNT?this.studyPageMultiplier++:e.type===Rn.GENE_COUNT?this.genePageMultiplier++:e.type===Rn.PATIENT_COUNT?this.patientPageMultiplier++:e.type===Rn.SAMPLE_COUNT&&this.samplePageMultiplier++;n&&Object(h.C)().routingStore.updateRoute(t,n)}},{key:"trackClick",value:function(e,t){Object(Pn.f)({category:"quickSearch",action:e,label:t})}},{key:"handleInputChange",value:function(e,t){var n=t.action;"set-value"!==n&&(e!=this.inputValue&&(this.studyPageMultiplier=0,this.genePageMultiplier=0,this.patientPageMultiplier=0,this.samplePageMultiplier=0),"input-change"===n&&(this.inputValue=e)),"input-blur"===n&&(this.isFocusing=!1)}},{key:"onFocus",value:function(){this.isFocusing=!0}},{key:"renderInput",value:function(e){return delete e.value,console.log(e),r.createElement("div",{className:"Select-input"},r.createElement("input",Qn({placeholder:"e.g. Lung, EGFR, TCGA-OR-A5J2"},e)))}},{key:"render",value:function(){return r.createElement("div",{onFocusCapture:this.onFocus},r.createElement(Vn.default,{options:this.options.result||[],autoFocus:!0,onInputChange:this.handleInputChange,onChange:this.handleChange,components:{Group:ar,GroupHeading:sr},formatOptionLabel:lr,controlShouldRenderValue:!1,filterOption:!1,inputValue:this.inputValue,isLoading:this.options.isPending,placeholder:"e.g. Lung, EGFR, TCGA-OR-A5J2",noOptionsMessage:function(){return"No results"},blurInputOnSelect:!1,closeMenuOnSelect:!1,onSelectResetsInput:!1,menuIsOpen:this.menuIsOpen,maxMenuHeight:550,styles:{dropdownIndicator:function(){return{display:"none"}},control:function(e){return Object.assign(Object.assign({},e),{cursor:"text"})},option:function(e,t){return t.isSelected?Object.assign(Object.assign({},e),{backgroundColor:"inherit",color:"inherit",":hover":{backgroundColor:"#DEEBFF"}}):Object.assign({},e)}}}),r.createElement("p",{style:{fontSize:"x-small",textAlign:"center",paddingTop:15}},"We would love to hear what you think: ",r.createElement("a",{href:"mailto:cbioportal@googlegroups.com"},"cbioportal@googlegroups.com")))}},{key:"menuIsOpen",get:function(){return this.isFocusing&&this.inputValue.length>0}},{key:"studies",get:function(){return this.props.studies.reduce(function(e,t){return e.set(t.studyId,t.name),e},new Map)}}])&&Kn(n.prototype,o),i&&Kn(n,i),t}();er([L.observable],or.prototype,"studyPageMultiplier",void 0),er([L.observable],or.prototype,"genePageMultiplier",void 0),er([L.observable],or.prototype,"patientPageMultiplier",void 0),er([L.observable],or.prototype,"samplePageMultiplier",void 0),er([L.observable],or.prototype,"inputValue",void 0),er([L.observable],or.prototype,"isFocusing",void 0),er([L.observable],or.prototype,"isLoading",void 0),er([L.computed],or.prototype,"menuIsOpen",null),er([L.computed],or.prototype,"studies",null),er([Cn.default],or.prototype,"selectRef",null),er([Cn.default],or.prototype,"sampleToOption",null),er([Cn.default,L.action],or.prototype,"handleChange",null),er([Cn.default,L.action],or.prototype,"handleInputChange",null),er([Cn.default,L.action],or.prototype,"onFocus",null),er([Cn.default],or.prototype,"renderInput",null);var ir=or=er([s.observer],or),ar=function(e){var t=e.data.groupData;t.value,Wn()(t.type,t.value),t.value<nr&&t.value;return r.createElement("div",{className:Hn.optionGroup},r.createElement("div",{className:Hn.groupHeader},e.data.instruction),r.createElement(Vn.components.Group,e))},sr=function(e){return null};function lr(e){var t,n,o;return e.type===Rn.STUDY?(t=e.name,n="primary",o=e.allSampleCount+" samples","Select a study to open its summary"):e.type===Rn.GENE?(t=e.hugoGeneSymbol,n="success",o=e.cytoband||"-","Select a gene to query it across all TCGA PanCancer Atlas studies"):e.type===Rn.PATIENT?(t=e.patientId,n="danger",o=e.studyName,"Select a patient to see a summary"):e.type===Rn.SAMPLE?(t=e.value,n="warning",o="".concat(e.studyName?e.studyName:e.studyId),"Select a sample to open its summary"):t=e.value+" more "+Wn()(e.type,e.value)+" (click to load "+(e.value<nr?e.value:nr)+" more)",r.createElement("div",{className:Hn.optionWrapper},n&&r.createElement("div",{className:Hn.optionLabelWrapper},r.createElement(R.Label,{bsStyle:n},e.type)),r.createElement("div",null,r.createElement("div",null,r.createElement("strong",null,t)),o&&r.createElement("small",null,o)))}function ur(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cr(e,t){return!t||"object"!==fr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pr(e){return(pr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dr(e,t){return(dr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fr(e){return(fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var hr=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":fr(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},mr="quickSearch",yr="defaultHomePageTab",gr=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=cr(this,pr(t).call(this,e)),e.showQuickSearchTab&&Object(h.C)().localStorage.getItem(yr)===mr&&(n.activeTabId=Object(h.C)().localStorage.getItem(yr)),n.store=e.getQueryStore(),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dr(e,t)}(t,r["Component"]),n=t,(o=[{key:"setDefaultTab",value:function(e){this.props.showQuickSearchTab&&(Object(h.C)().localStorage.defaultHomePageTab=e===mr?mr:void 0)}},{key:"trackQuickSearch",value:function(){Object(Pn.f)({category:"quickSearch",action:"quickSearchLoad"})}},{key:"onSelectTab",value:function(e){this.store.forDownloadTab="download"===e,this.activeTabId=e}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:a.a.QueryAndDownloadTabs},r.createElement(Qe.If,{condition:y.b.serverConfig.skin_citation_rule_text},r.createElement("div",{className:"citationRule",dangerouslySetInnerHTML:{__html:y.b.serverConfig.skin_citation_rule_text}})),r.createElement(Gn.b,{activeTabId:this.activeTabId,onTabClick:this.onSelectTab,className:"mainTabs"},r.createElement(Gn.a,{id:"advanced",linkText:"Query",onTabDidMount:function(){return e.setDefaultTab(void 0)}},r.createElement(Ln,{forkedMode:this.props.forkedMode,onSubmit:this.props.onSubmit,store:this.store,modifyQueryParams:this.props.modifyQueryParams,showAlerts:this.props.showAlerts})),r.createElement(Gn.a,{id:mr,linkText:r.createElement("span",null,"Quick Search"," ",r.createElement("strong",{className:"beta-text"},"Beta!")),hide:!this.props.showQuickSearchTab,onTabDidMount:function(){e.setDefaultTab(mr),e.trackQuickSearch()}},r.createElement("div",null,this.store.cancerStudies.isComplete&&r.createElement(ir,{studies:this.store.cancerStudies.result}))),r.createElement(Gn.a,{id:"download",linkText:"Download",hide:!this.props.showDownloadTab,onTabDidMount:function(){return e.setDefaultTab(void 0)}},r.createElement(Ln,{forkedMode:!1,onSubmit:this.props.onSubmit,store:this.store,showAlerts:this.props.showAlerts}))))}},{key:"quickSearchDefaulted",get:function(){return Object(h.C)().localStorage.getItem(yr)===mr}}])&&ur(n.prototype,o),i&&ur(n,i),t}();gr.defaultProps={forkedMode:!0},hr([L.observable.ref],gr.prototype,"store",void 0),hr([L.observable],gr.prototype,"activeTabId",void 0),hr([Cn.default],gr.prototype,"setDefaultTab",null),hr([Cn.default,L.action],gr.prototype,"onSelectTab",null),gr=hr([s.observer],gr);t.a=gr},function(e,t,n){"use strict";var r=n(0),o=n(1),i=n.n(o),a=n(9),s=n(83),l=n.n(s),u=n(2),c=n(190),p=n(56),d=n.n(p),f=n(111),h=n(840),m=n(912),y=n(6),g=n(913),b=n(14),v=n(15),_=n(49),S=n(54),E=n(910),w=n(911),O=n(3);function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var j=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},I=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=T(this,P(t).apply(this,arguments))).dragging=!1,e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(t,r["Component"]),n=t,(o=[{key:"svgRef",value:function(e){this.svgContainer=e&&e.children?e.children[0]:null}},{key:"handleSelection",value:function(e,t,n){this.props.onSelection(e[0].data.map(function(e){return e.hugoGeneSymbol}))}},{key:"handleSelectionCleared",value:function(){this.tooltipModel&&this.props.onGeneNameClick(this.tooltipModel.datum.hugoGeneSymbol,this.tooltipModel.datum.entrezGeneId),this.props.onSelectionCleared()}},{key:"onMouseOver",value:function(e,t,n){this.tooltipModel={datum:e,x:t,y:n}}},{key:"onMouseOut",value:function(){this.tooltipModel=null}},{key:"getTooltip",value:function(){return this.tooltipModel?r.createElement(v.Popover,{className:"cbioTooltip",positionLeft:this.tooltipModel.x+15,positionTop:this.tooltipModel.y-44},"Gene: ",this.tooltipModel.datum.hugoGeneSymbol,r.createElement("br",null),"Log Ratio:"," ",Object(_.a)(this.tooltipModel.datum.logRatio),r.createElement("br",null),"Alteration Frequency in ",this.props.xGroupName,":"," ",this.tooltipModel.datum.x.toFixed(),"%",r.createElement("br",null),"Alteration Frequency in ",this.props.yGroupName,":"," ",this.tooltipModel.datum.y.toFixed(),"%",r.createElement("br",null),"p-Value:"," ",Object(S.b)(this.tooltipModel.datum.pValue,3,.01),r.createElement("br",null),"q-Value:"," ",Object(S.b)(this.tooltipModel.datum.qValue,3,.01)):r.createElement("span",null)}},{key:"onClick",value:function(){this.dragging||this.handleSelectionCleared(),this.dragging=!1}},{key:"onSelectionComponentRender",value:function(){this.dragging=!0}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:"posRelative"},r.createElement("div",{className:"borderedChart inlineBlock",style:{position:"relative"},onClick:this.onClick},r.createElement(b.VictoryChart,{containerComponent:this.containerComponent,theme:O.a,domainPadding:{x:[0,20],y:[0,20]},height:350,width:350,padding:{top:40,bottom:60,left:60,right:40}},r.createElement(b.VictoryAxis,C({domain:[0,this.plotDomainMax],label:this.xLabel,style:{tickLabels:{padding:5},axisLabel:{padding:27},ticks:{size:3},grid:{strokeOpacity:1}},crossAxis:!1,orientation:"bottom",offsetY:45},this.tickProps)),r.createElement(b.VictoryAxis,C({domain:[0,this.plotDomainMax],dependentAxis:!0,label:this.yLabel,style:{tickLabels:{padding:5},axisLabel:{padding:32},ticks:{size:3},grid:{strokeOpacity:1}},crossAxis:!1,orientation:"left",offsetX:45},this.tickProps)),r.createElement(b.VictoryLine,{style:{data:{stroke:"#cccccc",strokeWidth:1,strokeDasharray:"10,5"}},data:[{x:0,y:0},{x:this.plotDomainMax,y:this.plotDomainMax}]}),r.createElement(b.VictoryScatter,{style:{data:{fillOpacity:.4}},data:this.splitData.insignificant,dataComponent:r.createElement(w.a,{onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,fill:function(t){return t.hugoGeneSymbol in e.props.selectedGenesSet?"#FE9929":"#D3D3D3"}}),symbol:"circle",size:3}),r.createElement(b.VictoryScatter,{style:{data:{fillOpacity:.6}},data:this.splitData.significant,dataComponent:r.createElement(w.a,{onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,fill:function(t){return t.hugoGeneSymbol in e.props.selectedGenesSet?"#FE9929":"#58ACFA"}})})),r.createElement(O.e,{getSvg:function(){return e.svgContainer},filename:"enrichments-frequency-scatter",dontFade:!0,type:"button",style:{position:"absolute",top:10,right:10,zIndex:0}})),r.createElement(a.Observer,null,this.getTooltip))}},{key:"maxLabelWidth",get:function(){return Object(O.K)(this.props.xGroupName,"Arial","13px")+Object(O.K)(this.props.yGroupName,"Arial","13px")>150?75:90}},{key:"xLabel",get:function(){return"Altered Frequency in ".concat(Object(O.db)(this.props.xGroupName,this.maxLabelWidth,"Arial","13px")," (%)")}},{key:"yLabel",get:function(){return"Altered Frequency in ".concat(Object(O.db)(this.props.yGroupName,this.maxLabelWidth,"Arial","13px")," (%)")}},{key:"splitData",get:function(){var e=[],t=[],n=!0,r=!1,o=void 0;try{for(var i,a=this.props.data[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;s.qValue<.05?e.push(s):t.push(s)}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return{significant:e,insignificant:t}}},{key:"plotDomainMax",get:function(){var e=0,t=0,n=!0,r=!1,o=void 0;try{for(var i,a=this.props.data[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;e=Math.max(e,s.x),t=Math.max(t,s.y)}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return Math.max(e,t)}},{key:"containerComponent",get:function(){var e=this;return r.createElement(b.VictorySelectionContainer,{containerRef:this.svgRef,onSelection:function(t,n,r){return e.handleSelection(t,n,r)},responsive:!1,onSelectionCleared:this.handleSelectionCleared,activateSelectedData:!1,selectionComponent:r.createElement(E.a,{onRender:this.onSelectionComponentRender})})}},{key:"tickProps",get:function(){return this.plotDomainMax>40?{tickValues:[0,25,50,75]}:this.plotDomainMax>20?{tickValues:[0,10,20,30,40]}:this.plotDomainMax>10?{tickValues:[0,5,10,15,20]}:{tickCount:4}}}])&&k(n.prototype,o),i&&k(n,i),t}();j([u.observable],I.prototype,"tooltipModel",void 0),j([u.observable],I.prototype,"svgContainer",void 0),j([y.default,u.action],I.prototype,"svgRef",null),j([u.computed],I.prototype,"maxLabelWidth",null),j([u.computed],I.prototype,"xLabel",null),j([u.computed],I.prototype,"yLabel",null),j([u.computed],I.prototype,"splitData",null),j([u.computed],I.prototype,"plotDomainMax",null),j([y.default,u.action],I.prototype,"onMouseOver",null),j([y.default,u.action],I.prototype,"onMouseOut",null),j([y.default],I.prototype,"getTooltip",null),j([y.default],I.prototype,"onClick",null),j([y.default],I.prototype,"onSelectionComponentRender",null),j([u.computed],I.prototype,"tickProps",null);var N=I=j([a.observer],I),M=n(1065),D=n.n(M),R=function(e){e.height;return r.createElement("div",{className:D.a.wrapper,style:{width:e.width}},r.createElement("div",{className:D.a.groupRow},r.createElement("div",{style:{width:"".concat(e.group1Width,"%"),background:e.group1Color}}),r.createElement("div",{style:{width:"".concat(e.group2Width,"%"),background:e.group2Color}})),r.createElement("div",{className:D.a.alterationRow},r.createElement("div",{style:{width:"".concat(e.group1Unprofiled,"%"),background:"white",position:"relative"}},r.createElement("div",{className:D.a.strike})),r.createElement("div",{style:{width:"".concat(e.group1Unaltered,"%"),background:"transparent"}}),r.createElement("div",{style:{width:"".concat(e.group1Altered,"%"),background:"#3786C2"}}),r.createElement("div",{style:{width:"".concat(e.group2Altered,"%"),background:"#3786C2"}}),r.createElement("div",{style:{width:"".concat(e.group2Unprofiled,"%"),background:"white",position:"absolute",right:0}},r.createElement("div",{className:D.a.strike}))))},L=n(300),G=n(112),V=n(803),B=n(1066),F=n.n(B);function H(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e,t,n){return t&&U(e.prototype,t),n&&U(e,n),e}function q(e,t){return!t||"object"!==X(t)&&"function"!=typeof t?z(e):t}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Z=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":X(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},J=["AMP","HOMDEL"],$=function(e){function t(){var e;return H(this,t),(e=q(this,Q(t).apply(this,arguments))).isGeneSelectionPopupVisible=!1,e}return K(t,r["Component"]),W(t,[{key:"getTooltip",value:function(e){var t=e.majorCategory;t=t.replace(/\*$/,"");var n=this.geneDataSet[t],o=i.a.map(this.props.groupOrder,function(t){var o=n.groupsSet[t],i={};return e.minorCategory===o.name&&(i={fontWeight:"bold"}),r.createElement("tr",{style:i},r.createElement("td",null,o.name),r.createElement("td",null,o.alteredPercentage.toFixed(2),"% (",o.alteredCount,"/",o.profiledCount,")"))});return r.createElement("div",null,r.createElement("strong",null,t," ",this.yAxislabel),r.createElement("br",null),r.createElement("table",{className:"table table-bordered"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{scope:"col"},"Group"),r.createElement("th",{scope:"col"},"Percentage Altered"))),r.createElement("tbody",null,o)),r.createElement("strong",null,"p-Value"),":"," ",n.pValue?Object(S.b)(n.pValue,3,.01):"-",r.createElement("br",null),r.createElement("strong",null,"q-Value"),":"," ",n.qValue?Object(S.b)(n.qValue,3,.01):"-")}},{key:"render",value:function(){var e=this;return r.createElement("div",{"data-test":"GeneBarPlotDiv",className:"borderedChart",style:{position:"relative",display:"inline-block"}},this.toolbar,r.createElement("div",{style:{overflow:"auto hidden",position:"relative"}},r.createElement(L.a,{barWidth:10,domainPadding:10,chartBase:300,legendLocationWidthThreshold:800,ticksCount:6,horizontalBars:!1,percentage:!1,stacked:!1,plotData:this.barPlotData,axisStyle:{tickLabels:{fontSize:10}},horzCategoryOrder:this.horzCategoryOrder,vertCategoryOrder:this.props.groupOrder,countAxisLabel:"".concat(this.yAxislabel," (%)"),tooltip:this.getTooltip,categoryToColor:this.props.categoryToColor,svgRef:function(t){return e.svgContainer=t}})))}},{key:"geneListOptions",get:function(){return Object(f.q)(this.props.data,this.props.showCNAInTable)}},{key:"defaultOption",get:function(){return this.geneListOptions.length>1?this.geneListOptions[1]:this.geneListOptions[0]}},{key:"geneDataSet",get:function(){var e=this;return i.a.keyBy(this.props.data,function(t){return e.props.showCNAInTable?t.hugoGeneSymbol+": ".concat(f.d[t.value]):t.hugoGeneSymbol})}},{key:"barPlotData",get:function(){return Object(f.l)(this.geneDataSet,this.barPlotOrderedGenes)}},{key:"barPlotOrderedGenes",get:function(){return this._label===f.f.SYNC_WITH_TABLE?this.tableSelectedGenes:this.selectedGenes?this.props.showCNAInTable?i.a.flatMap(this.selectedGenes,function(e){if(!1===e.alterations)return[e.gene+": AMP",e.gene+": HOMDEL"];var t=[];return i.a.each(e.alterations,function(n){"cna"===n.alteration_type&&"="===n.constr_rel&&J.includes(n.constr_val)&&t.push(e.gene+": "+n.constr_val)}),t}):this.selectedGenes.map(function(e){return e.gene}):this.defaultOption.genes.slice(0,10)}},{key:"horzCategoryOrder",get:function(){return i.a.flatMap(this.barPlotOrderedGenes,function(e){return[e+"*",e]})}},{key:"selectedOption",get:function(){return this._label&&void 0!==this._geneQuery?{label:this._label,value:this._geneQuery}:{label:this.defaultOption.label,value:this.defaultOption.genes.slice(0,10).join("\n")}}},{key:"toolbar",get:function(){var e=this;return r.createElement(r.Fragment,null,r.createElement("div",{style:{zIndex:10,position:"absolute",top:"10px",left:"15px"}},r.createElement("strong",null,this.selectedOption.label)),r.createElement("div",{style:{zIndex:10,position:"absolute",top:"10px",right:"10px"}},r.createElement("div",{className:F.a.ChartControls},r.createElement(O.d,{trigger:["click"],destroyTooltipOnHide:!1,visible:this.isGeneSelectionPopupVisible,onVisibleChange:function(t){e.isGeneSelectionPopupVisible=t},overlay:r.createElement(te,{options:this.geneListOptions,selectedOption:this.selectedOption,onSelectedGenesChange:function(t,n,r){e._geneQuery=t,e.selectedGenes=n,e._label=r,e.isGeneSelectionPopupVisible=!1},defaultNumberOfGenes:10,containerType:this.props.containerType}),placement:"bottomLeft"},r.createElement("div",null,r.createElement("button",{"data-test":"selectGenes",className:"btn btn-default btn-xs"},"Select genes"))),r.createElement(O.e,{getSvg:function(){return e.svgContainer},filename:"GroupComparisonGeneFrequencyPlot",dontFade:!0,type:"button"}))))}},{key:"tableSelectedGenes",get:function(){return null!==this.props.dataStore.visibleData?this.props.dataStore.visibleData.map(function(e){return e.hugoGeneSymbol}).slice(0,100):[]}},{key:"yAxislabel",get:function(){return this.props.containerType===f.a.MUTATION?"Mutation frequency":"Copy-number alteration frequency"}}]),t}();Z([u.observable],$.prototype,"tooltipModel",void 0),Z([u.observable],$.prototype,"_geneQuery",void 0),Z([u.observable],$.prototype,"selectedGenes",void 0),Z([u.observable],$.prototype,"_label",void 0),Z([u.observable],$.prototype,"isGeneSelectionPopupVisible",void 0),Z([u.observable],$.prototype,"svgContainer",void 0),Z([u.computed],$.prototype,"geneListOptions",null),Z([u.computed],$.prototype,"defaultOption",null),Z([u.computed],$.prototype,"geneDataSet",null),Z([u.computed],$.prototype,"barPlotData",null),Z([u.computed],$.prototype,"barPlotOrderedGenes",null),Z([u.computed],$.prototype,"horzCategoryOrder",null),Z([y.default],$.prototype,"getTooltip",null),Z([u.computed],$.prototype,"selectedOption",null),Z([u.computed],$.prototype,"toolbar",null),Z([u.computed],$.prototype,"tableSelectedGenes",null),Z([u.computed],$.prototype,"yAxislabel",null);var ee=$=Z([a.observer],$),te=function(e){function t(e){var n;return H(this,t),(n=q(this,Q(t).call(this,e))).selectedGenesHasError=!1,n.numberOfGenes=n.props.defaultNumberOfGenes,n.genesToPlot=[],window.genesSelection=z(n),n}return K(t,r["Component"]),W(t,[{key:"onChangeGeneInput",value:function(e,t,n){var r=i.a.keyBy(t.found,function(e){return e.hugoGeneSymbol.toUpperCase()}),o=i.a.map(e.query,function(e){return e.gene.toUpperCase()});i.a.isEmpty(r)&&i.a.isEmpty(t.suggestions)||(this.selectedGenesHasError=!i.a.every(o,function(e){return e in r})),this.selectedGenesHasError||(this.genesToPlot=e.query),this.geneQuery!==n&&(this._selectedGeneListOption={label:f.f.USER_DEFINED_OPTION,genes:[],value:""}),this._geneQuery=n}},{key:"onGeneListOptionChange",value:function(e){if(this._selectedGeneListOption=e,""!==e.value){var t=this.geneOptionSet[e.label].genes;this._geneQuery=t.slice(0,this.numberOfGenes).join("\n")}else this._geneQuery=""}},{key:"handleTotalInputChange",value:function(e){var t=e.target.value.replace(/[^0-9]/g,"");t<=this.props.maxNumberOfGenes&&(this.numberOfGenes=t)}},{key:"handleTotalInputKeyPress",value:function(e){if(13===e.charCode){if(isNaN(this.numberOfGenes))return void(this.numberOfGenes=0);this.updateGeneQuery()}}},{key:"onBlur",value:function(){isNaN(this.numberOfGenes)?this.numberOfGenes=0:this.updateGeneQuery()}},{key:"updateGeneQuery",value:function(){if(this.numberOfGenes=Number(this.numberOfGenes),this.selectedGeneListOption){var e=this.selectedGeneListOption.label,t=this.geneOptionSet[e].genes;t.length>0&&(this._geneQuery=t.slice(0,this.numberOfGenes).join("\n"))}}},{key:"render",value:function(){var e=this;return r.createElement("div",{style:{width:300}},this.props.options.length>0&&r.createElement("div",{"data-test":"genesSelector"},r.createElement(G.default,{value:this.selectedGeneListOption,options:this.geneListOptions,onChange:this.onGeneListOptionChange,isClearable:!1,isSearchable:!1})),!this.inSyncMode&&!this.isCustomGeneSelection&&r.createElement("div",null,r.createElement("br",null),r.createElement("div",{style:{display:"table-row"}},r.createElement("label",{style:{display:"table-cell",whiteSpace:"nowrap"}},"Number of Genes (max."," ",this.props.maxNumberOfGenes,"):  "),r.createElement(v.FormControl,{"data-test":"numberOfGenes",type:"text",value:this.numberOfGenes,onChange:this.handleTotalInputChange,onKeyPress:this.handleTotalInputKeyPress,onBlur:this.onBlur}))),r.createElement("div",null,r.createElement("br",null),!this.inSyncMode&&r.createElement("div",null,r.createElement(V.b,{inputGeneQuery:this.geneQuery,validateInputGeneQuery:!1,callback:this.onChangeGeneInput,location:V.a.ONCOPRINT_HEATMAP}),this.hasUnsupportedOQL&&r.createElement("strong",{style:{display:"block"}},r.createElement("span",{style:{color:"#a71111"}},"OQL ".concat(this.props.containerType===f.a.MUTATION?"":"except AMP and HOMDEL"," is not allowed"))),r.createElement("br",null)),r.createElement("button",{key:"addGenestoBarPlot","data-test":"addGenestoBarPlot",className:"btn btn-sm btn-default",onClick:function(){e.props.onSelectedGenesChange(e._geneQuery,e.genesToPlot,e.selectedGeneListOption.label)},disabled:this.addGenesButtonDisabled},"Submit")))}},{key:"geneListOptions",get:function(){return i.a.map(this.props.options,function(e){return{label:e.label,value:e.genes.join("\n")}})}},{key:"geneOptionSet",get:function(){return i.a.keyBy(this.props.options,function(e){return e.label})}},{key:"selectedGeneListOption",get:function(){if(void 0===this._selectedGeneListOption&&this.props.selectedOption){var e=this.props.selectedOption;return this.geneListOptions.find(function(t){return t.value.startsWith(e.value)})}return this._selectedGeneListOption}},{key:"isCustomGeneSelection",get:function(){return void 0===this.selectedGeneListOption||this.selectedGeneListOption.label===f.f.USER_DEFINED_OPTION}},{key:"geneQuery",get:function(){return void 0===this._geneQuery&&this.props.selectedOption?this.props.selectedOption.value:this._geneQuery||""}},{key:"hasUnsupportedOQL",get:function(){var e=this;return void 0!==i.a.find(this.genesToPlot,function(t){return!!(t.alterations&&t.alterations.length>0)&&(e.props.containerType!==f.a.COPY_NUMBER||void 0!==i.a.find(t.alterations,function(e){return"cna"!==e.alteration_type||"="!==e.constr_rel||!J.includes(e.constr_val)}))})}},{key:"addGenesButtonDisabled",get:function(){return this.inSyncMode?void 0!==this.props.selectedOption&&this.props.selectedOption.label===f.f.SYNC_WITH_TABLE:this.hasUnsupportedOQL||this.props.selectedOption&&this.props.selectedOption.value===this._geneQuery||this.selectedGenesHasError||i.a.isEmpty(this._geneQuery)}},{key:"inSyncMode",get:function(){return this._selectedGeneListOption&&this._selectedGeneListOption.label===f.f.SYNC_WITH_TABLE}}]),t}();te.defaultProps={maxNumberOfGenes:100},Z([u.observable],te.prototype,"_geneQuery",void 0),Z([u.observable],te.prototype,"selectedGenesHasError",void 0),Z([u.observable],te.prototype,"numberOfGenes",void 0),Z([u.observable],te.prototype,"_selectedGeneListOption",void 0),Z([u.observable.ref],te.prototype,"genesToPlot",void 0),Z([u.computed],te.prototype,"geneListOptions",null),Z([u.computed],te.prototype,"geneOptionSet",null),Z([u.computed],te.prototype,"selectedGeneListOption",null),Z([u.computed],te.prototype,"isCustomGeneSelection",null),Z([u.computed],te.prototype,"geneQuery",null),Z([y.default,u.action],te.prototype,"onChangeGeneInput",null),Z([u.computed],te.prototype,"hasUnsupportedOQL",null),Z([u.computed],te.prototype,"addGenesButtonDisabled",null),Z([y.default,u.action],te.prototype,"onGeneListOptionChange",null),Z([u.computed],te.prototype,"inSyncMode",null),Z([y.default,u.action],te.prototype,"handleTotalInputChange",null),Z([y.default,u.action],te.prototype,"handleTotalInputKeyPress",null),Z([y.default,u.action],te.prototype,"onBlur",null),Z([y.default,u.action],te.prototype,"updateGeneQuery",null),te=Z([a.observer],te);var ne=n(192);function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oe(e,t){return!t||"object"!==se(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ae(e,t){return(ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function se(e){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var le=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":se(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ue=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=oe(this,ie(t).apply(this,arguments))).significanceFilter=!1,e.checkedGenes=[],e._enrichedGroups=e.props.groups.map(function(e){return e.name}),e.dataStore=new g.a(function(){return e.filteredData},function(){return e.highlightedRow},function(t){e.highlightedRow=t}),e}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ae(e,t)}(t,r["Component"]),n=t,(i=[{key:"filterByGene",value:function(e){return!this.selectedGenes||this.selectedGenes.includes(e)}},{key:"toggleSignificanceFilter",value:function(){this.significanceFilter=!this.significanceFilter}},{key:"onCheckGene",value:function(e){var t=this.checkedGenes.indexOf(e);-1!==t?this.checkedGenes.splice(t,1):this.checkedGenes.push(e)}},{key:"onGeneNameClick",value:function(e){}},{key:"onSelection",value:function(e){this.selectedGenes=e}},{key:"onSelectionCleared",value:function(){this.selectedGenes=null}},{key:"onChange",value:function(e){this._enrichedGroups=o.map(e,function(e){return e.value})}},{key:"render",value:function(){var e=this;return 0===this.props.data.length?r.createElement("div",{className:"alert alert-info"},"No data/result available"):r.createElement("div",{className:d.a.Container},r.createElement("div",{className:d.a.ChartsPanel,style:{maxWidth:ne.a.size.width-60}},this.isTwoGroupAnalysis&&r.createElement(h.a,{data:Object(f.j)(this.data,this.props.store?this.props.store.hugoGeneSymbols:[]),xAxisLeftLabel:this.group2.nameOfEnrichmentDirection||this.group2.name,xAxisRightLabel:this.group1.nameOfEnrichmentDirection||this.group1.name,xAxisDomain:15,xAxisTickValues:[-10,0,10],selectedSet:this.selectedGenesSet,onGeneNameClick:this.onGeneNameClick,onSelection:this.onSelection,onSelectionCleared:this.onSelectionCleared}),this.isTwoGroupAnalysis&&r.createElement(N,{data:Object(f.h)(this.data,this.props.store?this.props.store.hugoGeneSymbols:[],this.group1.name,this.group2.name),xGroupName:this.group1.name,yGroupName:this.group2.name,onGeneNameClick:this.onGeneNameClick,selectedGenesSet:this.selectedGenesSet,onSelection:this.onSelection,onSelectionCleared:this.onSelectionCleared}),r.createElement("div",{style:{maxWidth:this.genePlotMaxWidth}},r.createElement(ee,{data:this.data,isTwoGroupAnalysis:this.isTwoGroupAnalysis,groupOrder:this.props.groups.map(function(e){return e.name}),showCNAInTable:this.props.showCNAInTable,containerType:this.props.containerType,categoryToColor:this.categoryToColor,dataStore:this.dataStore}))),r.createElement("div",null,r.createElement("div",null,r.createElement("h3",null,this.props.headerName),this.props.store&&r.createElement(m.a,{checkedGenes:this.checkedGenes})),r.createElement("div",{className:d.a.Checkboxes},r.createElement("div",{style:{width:250,marginRight:7}},r.createElement(G.default,{name:"select enrichments level: sample or patient",onChange:function(t){t&&e.props.onSetPatientLevelEnrichments(t.value)},options:[{label:"Patient-level enrichments",value:!0},{label:"Sample-level enrichments",value:!1}],clearable:!1,searchable:!1,value:{label:this.props.patientLevelEnrichments?"Patient-level enrichments":"Sample-level enrichments",value:this.props.patientLevelEnrichments},styles:{control:function(e){return Object.assign(Object.assign({},e),{height:36,minHeight:36,border:"1px solid rgb(204,204,204)"})},menu:function(e){return Object.assign(Object.assign({},e),{maxHeight:400})},menuList:function(e){return Object.assign(Object.assign({},e),{maxHeight:400})},placeholder:function(e){return Object.assign(Object.assign({},e),{color:"#000000"})},dropdownIndicator:function(e){return Object.assign(Object.assign({},e),{color:"#000000"})},option:function(e,t){return Object.assign(Object.assign({},e),{cursor:"pointer"})}},theme:function(e){return Object.assign(Object.assign({},e),{colors:Object.assign(Object.assign({},e.colors),{neutral80:"black"})})}})),r.createElement("div",{style:{width:250,marginRight:7}},r.createElement(O.b,{name:"groupsSelector",placeholder:"Enriched in ...",onChange:this.onChange,options:this.options,value:this.selectedValues,height:36})),r.createElement("label",{className:"checkbox-inline"},r.createElement("input",{type:"checkbox",checked:this.significanceFilter,onClick:this.toggleSignificanceFilter,"data-test":"SwapAxes"}),"Significant only")),r.createElement(c.b,{key:this.props.patientLevelEnrichments.toString(),data:this.filteredData,onCheckGene:this.props.store?this.onCheckGene:void 0,checkedGenes:this.props.store?this.checkedGenes:void 0,dataStore:this.dataStore,visibleOrderedColumnNames:this.visibleOrderedColumnNames,customColumns:o.keyBy(this.customColumns,function(e){return e.name})})))}},{key:"isTwoGroupAnalysis",get:function(){return 2==this.props.groups.length}},{key:"group1",get:function(){return this.props.groups[0]}},{key:"group2",get:function(){return this.props.groups[1]}},{key:"data",get:function(){return Object(f.i)(this.props.data,this.props.store?this.props.store.hugoGeneSymbols:[],this.props.groups)}},{key:"filteredData",get:function(){return Object(f.p)(this.data,this._enrichedGroups,this.significanceFilter,this.filterByGene)}},{key:"customColumns",get:function(){var e=this,t=Object(f.g)(this.props.groups,this.props.alteredVsUnalteredMode);return this.isTwoGroupAnalysis&&t.push({name:"Alteration Overlap",headerRender:function(){return r.createElement("span",null,"Co-occurrence Pattern")},render:function(t){if(void 0===t.pValue)return r.createElement("span",null,"-");var n=o.map(t.groupsSet),i=e.props.groups[0],a=e.props.groups[1],s=n.find(function(t){return t.name===e.props.groups[0].name}),u=n.find(function(t){return t.name===e.props.groups[1].name});if(!s||!u)throw"No matching groups in Alteration Overlap Cell";var c=i.count+a.count,p=i.count/c*100,d=100-p,f=(i.count-s.profiledCount)/c*100,h=(s.profiledCount-s.alteredCount)/c*100,m=(a.count-u.profiledCount)/c*100,y=s.alteredCount/c*100,g=u.alteredCount/c*100,b=e.props.showCNAInTable?"copy number alterations":"mutations";return r.createElement(O.d,{destroyTooltipOnHide:!0,trigger:["hover"],overlay:function(){return r.createElement("div",null,r.createElement("h3",null,t.hugoGeneSymbol," ",b," ","in:"),r.createElement("table",{className:"table table-striped"},r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",null,r.createElement("strong",null,s.name,": ")),r.createElement("td",null,s.alteredCount," of"," ",s.profiledCount," of profiled"," ",e.props.patientLevelEnrichments?"patients":"samples"," ","(",l()(s.alteredPercentage).format("0.0"),"%)")),r.createElement("tr",null,r.createElement("td",null,r.createElement("strong",null,u.name,": ")),r.createElement("td",null,u.alteredCount," of"," ",u.profiledCount," of profiled"," ",e.props.patientLevelEnrichments?"patients":"samples"," ","(",l()(u.alteredPercentage).format("0.0"),"%)")))))}},r.createElement("div",{className:"inlineBlock",style:{padding:"3px 0"}},r.createElement(R,{group1Width:p,group2Width:d,group1Unaltered:h,group1Altered:y,group2Altered:g,group1Unprofiled:f,group2Unprofiled:m,group1Color:e.props.groups[0].color,group2Color:e.props.groups[1].color,width:150})))},tooltip:r.createElement("table",null,r.createElement("tr",null,r.createElement("td",null,"Upper row"),r.createElement("td",null,":"," ",this.props.patientLevelEnrichments?"Patients":"Samples"," ","colored according to group.")),r.createElement("tr",null,r.createElement("td",null,"Lower row"),r.createElement("td",null,":"," ",this.props.patientLevelEnrichments?"Patients":"Samples"," ","with"," ",this.props.showCNAInTable?"the listed alteration":"a mutation"," ","in the listed gene are highlighted.")))}),t}},{key:"visibleOrderedColumnNames",get:function(){var e=[];return e.push(c.a.GENE,c.a.CYTOBAND),this.props.showCNAInTable&&e.push(c.a.ALTERATION),this.props.groups.forEach(function(t){e.push(t.name)}),this.isTwoGroupAnalysis&&(e.push("Alteration Overlap"),e.push(c.a.LOG_RATIO)),e.push(c.a.P_VALUE,c.a.Q_VALUE),this.isTwoGroupAnalysis?e.push(this.props.alteredVsUnalteredMode?c.a.TENDENCY:c.a.ENRICHED):e.push(c.a.MOST_ENRICHED),e}},{key:"selectedGenesSet",get:function(){return o.keyBy(this.selectedGenes||[])}},{key:"selectedValues",get:function(){return this._enrichedGroups.map(function(e){return{value:e}})}},{key:"options",get:function(){return o.map(this.props.groups,function(e){return{label:e.nameOfEnrichmentDirection?e.nameOfEnrichmentDirection:e.name,value:e.name}})}},{key:"genePlotMaxWidth",get:function(){return ne.a.size.width-(this.isTwoGroupAnalysis?820:40)}},{key:"categoryToColor",get:function(){return o.reduce(this.props.groups,function(e,t){return t.color&&(e[t.name]=t.color),e},{})}}])&&re(n.prototype,i),a&&re(n,a),t}();ue.defaultProps={showCNAInTable:!1,alteredVsUnalteredMode:!0},le([u.observable],ue.prototype,"significanceFilter",void 0),le([u.observable.shallow],ue.prototype,"checkedGenes",void 0),le([u.observable.shallow],ue.prototype,"selectedGenes",void 0),le([u.observable.ref],ue.prototype,"highlightedRow",void 0),le([u.observable.ref],ue.prototype,"_enrichedGroups",void 0),le([u.computed],ue.prototype,"isTwoGroupAnalysis",null),le([u.computed],ue.prototype,"group1",null),le([u.computed],ue.prototype,"group2",null),le([u.computed],ue.prototype,"data",null),le([u.computed],ue.prototype,"filteredData",null),le([y.default],ue.prototype,"filterByGene",null),le([y.default],ue.prototype,"toggleSignificanceFilter",null),le([y.default],ue.prototype,"onCheckGene",null),le([y.default],ue.prototype,"onGeneNameClick",null),le([y.default,u.action],ue.prototype,"onSelection",null),le([y.default,u.action],ue.prototype,"onSelectionCleared",null),le([u.computed],ue.prototype,"customColumns",null),le([u.computed],ue.prototype,"visibleOrderedColumnNames",null),le([u.computed],ue.prototype,"selectedGenesSet",null),le([y.default,u.action],ue.prototype,"onChange",null),le([u.computed],ue.prototype,"selectedValues",null),le([u.computed],ue.prototype,"options",null),le([u.computed],ue.prototype,"genePlotMaxWidth",null),le([u.computed],ue.prototype,"categoryToColor",null),ue=le([a.observer],ue);t.a=ue},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(0),o=n(3);n(789);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"getCircleX",value:function(e,t,n){var r=e/100;return t*(1-r)+n*r}},{key:"getCircleFill",value:function(e){return e<25?"blue":e>75?"red":"gray"}},{key:"getTooltipContents",value:function(e){return e&&"complete"===e.status&&null!==e.data?r.createElement("div",null,r.createElement("span",null,"mRNA level of the gene in this tumor"),r.createElement("br",null),r.createElement("span",null,r.createElement("b",null,"mRNA z-score: "),e.data.zScore),r.createElement("br",null),r.createElement("span",null,r.createElement("b",null,"Percentile: "),e.data.percentile),r.createElement("br",null)):e&&"complete"===e.status&&null===e.data?r.createElement("span",null,"mRNA data is not available for this gene."):e&&"error"===e.status?r.createElement("span",null,"Error retrieving data."):r.createElement("span",null,"Querying server for data.")}},{key:"getTdContents",value:function(t){var n=null;return t&&"complete"===t.status&&null!==t.data?r.createElement("svg",{width:63,height:12},r.createElement("text",{x:33,y:11,textAnchor:"start",fontSize:10},Math.round(t.data.percentile)+"%"),r.createElement("g",null,r.createElement("line",{x1:0,y1:8,x2:30,y2:8,style:{stroke:"gray",strokeWidth:2}}),r.createElement("circle",{cx:e.getCircleX(t.data.percentile,3,27),cy:8,r:3,fill:e.getCircleFill(t.data.percentile)}))):null!==(n=t&&"complete"===t.status&&null===t.data?o.o.NA:t&&"error"===t.status?o.o.ERROR:o.o.LOADING)?r.createElement(o.p,{status:n,naAlt:"mRNA data is not available for this gene."}):void 0}},{key:"getData",value:function(e,t){if(0===e.length)return null;var n=e[0].sampleId,r=e[0].entrezGeneId;return t.get({sampleId:n,entrezGeneId:r})}},{key:"getDataFromCNA",value:function(e,t){var n=e[0].sampleId,r=e[0].entrezGeneId;return t.get({sampleId:n,entrezGeneId:r})}},{key:"renderFromCacheDatum",value:function(t){return r.createElement(o.d,{placement:"left",overlay:e.getTooltipContents(t),arrowContent:r.createElement("div",{className:"rc-tooltip-arrow-inner"})},e.getTdContents(t))}},{key:"renderFunction",value:function(t,n){var r=e.getData(t,n);return e.renderFromCacheDatum(r)}},{key:"cnaRenderFunction",value:function(t,n){var r=e.getDataFromCNA(t,n);return e.renderFromCacheDatum(r)}}],(n=null)&&i(t.prototype,n),a&&i(t,a),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),o=n(804),i=n.n(o);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"getValues",value:function(e,t,n){var r={},o=!0,i=!1,a=void 0;try{for(var s,l=e[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var u=s.value;r[u.sampleId]=u[n]}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}var c=t.filter(function(e){return r[e]&&r[e]>0&&r[e].toString().length>0});return 1===c.length?[r[c[0]].toString()]:c.map(function(e){return"".concat(e,": ").concat(r[e])})}},{key:"getTextValue",value:function(t,n,r){return e.getValues(t,n,r).join(";")}},{key:"getDisplayValue",value:function(t,n,r){return e.getValues(t,n,r).join("\n")}},{key:"renderFunction",value:function(t,n,o){return r.createElement("div",{className:i.a["integer-data"]},e.getDisplayValue(t,n,o))}},{key:"getReads",value:function(e,t){var n=[];if(e){var r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;n.push(l[t])}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}}return 1==n.length?n[0]:n}}],(n=null)&&a(t.prototype,n),o&&a(t,o),e}()},function(e,t,n){e.exports={portalWidth:"proteinChange-module__portalWidth__1U76x",framedImage:"proteinChange-module__framedImage___DDUH",proteinChange:"proteinChange-module__proteinChange__2xJ_V",germline:"proteinChange-module__germline__1c0ww"}},,function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return s});var r=n(958),o=n.n(r),i=n(3),a=n(2);function s(t,n,r,s){var l=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n.dependencyPromise=n.dependencyPromise||function(t){if(t.pathsToCSS&&t.pathsToCSS.forEach(function(t){e("head").append('<link rel="stylesheet" href='.concat(t,' type="text/css" />'))}),t.pathsToJs){var n=[];return t.pathsToJs.forEach(function(e){var t=new Promise(function(t,n){o()(e,function(e){e?n(e):t()})});n.push(t)}),Promise.all(n)}}(n);n.dependencyPromise.then(function(){!function(e){Object(i.C)()[e.mountCallbackName]?Object(i.C)()[e.mountCallbackName](t,e,r,s,a.autorun,l):alert("Callback for tab ".concat(e.title," not found"))}(n)})}}).call(this,n(17))},function(e,t,n){},,,function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n(192),o=n(0),i=n(2),a=n(9);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":d(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,c(t).apply(this,arguments))}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,o["Component"]),n=t,(i=[{key:"render",value:function(){var e=this;return o.createElement("div",s({className:this.props.className||""},this.props,{ref:function(t){return e.wrapper=t},style:this.style}),this.props.children)}},{key:"offset",get:function(){return this.props.offset||0}},{key:"style",get:function(){return{width:r.a.size.width-this.offset,overflowX:"auto"}}}])&&l(n.prototype,i),a&&l(n,a),t}();f([i.computed],h.prototype,"offset",null),f([i.computed],h.prototype,"style",null),h=f([a.observer],h)},function(e,t,n){e.exports=n(25)(367)},function(e,t,n){e.exports=n(25)(329)},function(e,t,n){e.exports=n(25)(878)},function(e,t,n){e.exports=n(25)(167)},function(e,t,n){e.exports=n(25)(877)},function(e,t,n){e.exports=n(25)(360)},function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(824),a=n(6),s=n(3);n(789);function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f,h=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":d(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};!function(e){e.distinguishDrivers="0",e.annotateOncoKb="1",e.annotateHotspots="2",e.annotateCBioPortal="3",e.annotateCOSMIC="4",e.customDriverBinaryAnnotation="5"}(f||(f={}));var m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,c(t).apply(this,arguments))}var o,a,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,r["Component"]),o=t,(a=[{key:"onInputClick",value:function(e){switch(e.target.value){case f.distinguishDrivers:this.props.handlers.onSelectDistinguishDrivers(!this.props.state.distinguishDrivers);break;case f.annotateOncoKb:this.props.handlers.onSelectAnnotateOncoKb(!this.props.state.annotateDriversOncoKb);break;case f.annotateHotspots:this.props.handlers.onSelectAnnotateHotspots&&this.props.handlers.onSelectAnnotateHotspots(!this.props.state.annotateDriversHotspots);break;case f.annotateCBioPortal:this.props.handlers.onSelectAnnotateCBioPortal(!this.props.state.annotateDriversCBioPortal);break;case f.annotateCOSMIC:this.props.handlers.onSelectAnnotateCOSMIC&&this.props.handlers.onSelectAnnotateCOSMIC(!this.props.state.annotateDriversCOSMIC);break;case f.customDriverBinaryAnnotation:this.props.handlers.onSelectCustomDriverAnnotationBinary&&this.props.handlers.onSelectCustomDriverAnnotationBinary(!this.props.state.annotateCustomDriverBinary)}}},{key:"onCustomDriverTierCheckboxClick",value:function(e){this.props.handlers.onSelectCustomDriverAnnotationTier&&this.props.handlers.onSelectCustomDriverAnnotationTier(e.target.value,!(this.props.state.selectedCustomDriverAnnotationTiers&&this.props.state.selectedCustomDriverAnnotationTiers.get(e.target.value)))}},{key:"render",value:function(){var e=this;return r.createElement("div",null,r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{"data-test":"ColorByDriver",type:"checkbox",value:f.distinguishDrivers,checked:this.props.state.distinguishDrivers,onClick:this.onInputClick})," ","Putative drivers vs VUS:")),r.createElement("div",{style:{marginLeft:"20px"}},!this.props.state.annotateDriversOncoKbDisabled&&r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:f.annotateOncoKb,checked:this.props.state.annotateDriversOncoKb,onClick:this.onInputClick,"data-test":"annotateOncoKb",disabled:this.props.state.annotateDriversOncoKbError}),this.props.state.annotateDriversOncoKbError&&r.createElement(i.a,{style:{marginRight:4},tooltip:r.createElement("span",null,"Error loading OncoKb data. Please refresh the page or try again later.")}),r.createElement(s.d,{overlay:r.createElement("span",null,"Oncogenicity from OncoKB"),placement:"top"},r.createElement("img",{src:n(1012),style:{maxHeight:"12px",cursor:"pointer",marginRight:"5px"}})),"driver annotation")),this.props.handlers.onSelectAnnotateHotspots&&!this.props.state.annotateDriversHotspotsDisabled&&r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:f.annotateHotspots,checked:this.props.state.annotateDriversHotspots,onClick:this.onInputClick,"data-test":"annotateHotspots",disabled:this.props.state.annotateDriversHotspotsError}),this.props.state.annotateDriversHotspotsError&&r.createElement(i.a,{style:{marginRight:4},tooltip:r.createElement("span",null,"Error loading Hotspots data. Please refresh the page or try again later.")}),"Hotspots",r.createElement(s.d,{overlay:r.createElement("div",{style:{maxWidth:"400px"}},"Identified as a recurrent hotspot (statistically significant) in a population-scale cohort of tumor samples of various cancer types using methodology based in part on"," ",r.createElement("a",{href:Object(s.F)("/pubmed/26619011"),target:"_blank"},"Chang et al., Nat Biotechnol, 2016."),"Explore all mutations at"," ",r.createElement("a",{href:"https://www.cancerhotspots.org",target:"_blank"},"https://cancerhotspots.org")),placement:"top"},r.createElement("img",{src:n(422),style:{height:"15px",width:"15px",cursor:"pointer",marginLeft:"5px"}})))),this.props.handlers.onChangeAnnotateCBioPortalInputValue&&r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:f.annotateCBioPortal,checked:this.props.state.annotateDriversCBioPortal,onClick:this.onInputClick,"data-test":"annotateCBioPortalCount"}),"cBioPortal ",">="),r.createElement(s.f,{value:this.props.state.annotateCBioPortalInputValue||"",setValue:this.props.handlers.onChangeAnnotateCBioPortalInputValue,numericOnly:!0,textFieldAppearance:!0,maxChars:10})),this.props.handlers.onChangeAnnotateCOSMICInputValue&&r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:f.annotateCOSMIC,checked:this.props.state.annotateDriversCOSMIC,onClick:this.onInputClick,"data-test":"annotateCOSMICCount"}),"COSMIC ",">="),r.createElement(s.f,{value:this.props.state.annotateCOSMICInputValue||"",setValue:this.props.handlers.onChangeAnnotateCOSMICInputValue,numericOnly:!0,textFieldAppearance:!0,maxChars:10})),!!this.props.state.customDriverAnnotationBinaryMenuLabel&&r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",checked:this.props.state.annotateCustomDriverBinary,value:f.customDriverBinaryAnnotation,onClick:this.onInputClick,"data-test":"annotateCustomBinary"})," ",this.props.state.customDriverAnnotationBinaryMenuLabel,r.createElement("img",{src:n(867),alt:"driver filter",style:{height:"15px",width:"15px",cursor:"pointer",marginLeft:"5px"}}))),!!this.props.state.customDriverAnnotationTiersMenuLabel&&r.createElement("span",{"data-test":"annotateCustomTiers"},r.createElement("span",{className:"caret"}),"  ",r.createElement("span",null,this.props.state.customDriverAnnotationTiersMenuLabel)," ",r.createElement("img",{src:n(868),alt:"driver tiers filter",style:{height:"15px",width:"15px",cursor:"pointer",marginLeft:"5px"}}),r.createElement("div",{style:{marginLeft:"30px"}},(this.props.state.customDriverAnnotationTiers||[]).map(function(t){return r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:t,checked:!(!e.props.state.selectedCustomDriverAnnotationTiers||!e.props.state.selectedCustomDriverAnnotationTiers.get(t)),onClick:e.onCustomDriverTierCheckboxClick})," ",t))})))))}}])&&l(o.prototype,a),d&&l(o,d),t}();h([a.default],m.prototype,"onInputClick",null),h([a.default],m.prototype,"onCustomDriverTierCheckboxClick",null),m=h([o.observer],m),t.a=m},function(e,t,n){"use strict";n.d(t,"l",function(){return S}),n.d(t,"j",function(){return E}),n.d(t,"i",function(){return w}),n.d(t,"d",function(){return O}),n.d(t,"c",function(){return C}),n.d(t,"b",function(){return k}),n.d(t,"k",function(){return P}),n.d(t,"h",function(){return A}),n.d(t,"e",function(){return j}),n.d(t,"f",function(){return I}),n.d(t,"g",function(){return N}),n.d(t,"a",function(){return M}),n.d(t,"m",function(){return D});var r=n(2),o=n(8),i=n(1),a=n.n(i),s=n(297),l=n(11),u=n(68),c=n(58),p=n(12),d=n(21),f=n(81),h=n(29),m=n(221),y=n(217),g=n(44),b=n(46),v=n(92),_=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};function S(e){return e.hasOwnProperty("alteration")}function E(e){var t,n,i;return e.existCustomDrivers?(t=!1,n=!1,i=!0):(t=!0,n=!1,i=!1),Object(r.observable)({cbioportalCountThreshold:0,_oncoKb:t,_cbioportalCount:n,_customBinary:i,_excludeVUS:!1,hotspots:!1,get customBinary(){return this._customBinary},set customBinary(t){this._customBinary=t,e.customDriverWarningHidden=!0},get cbioportalCount(){return this._cbioportalCount},set cbioportalCount(t){this._cbioportalCount=t,e.customDriverWarningHidden=!0},set oncoKb(t){this._oncoKb=t,e.customDriverWarningHidden=!0},get oncoKb(){return!(!o.b.serverConfig.show_oncokb||!this._oncoKb||e.didOncoKbFail)},set excludeVUS(e){this._excludeVUS=e},get excludeVUS(){return this._excludeVUS&&this.driversAnnotated},get driversAnnotated(){return this.oncoKb||this.cbioportalCount||this.hotspots||e.existCustomDrivers&&this.customBinary}})}function w(e){return a.a.chain(e).map(function(e){return e.sampleId}).uniq().value()}function O(e){return a.a.chain(e).filter(function(e){return S(e)}).map(function(e){return e.hugoGeneSymbol}).uniq().value()}function C(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f.a;return _(this,void 0,void 0,regeneratorRuntime.mark(function r(){var o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(e instanceof Error)){r.next=2;break}return r.abrupt("return",new Error);case 2:if(0!==(o=a.a.chain(t).filter(function(t){return!!e[t.entrezGeneId]}).filter(function(e){return void 0!==e.proteinPosStart&&void 0!==e.proteinPosEnd}).value()).length){r.next=5;break}return r.abrupt("return",d.b);case 5:return r.abrupt("return",Object(d.ob)(o.map(function(e){return{entrezGeneId:e.entrezGeneId,alteration:e.proteinChange,proteinPosStart:e.proteinPosStart,proteinPosEnd:e.proteinPosEnd,mutationType:e.mutationType,tumorType:null}}),n,[p.d.ONCOGENIC]));case 6:case"end":return r.stop()}},r)}))}function k(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f.a;return _(this,void 0,void 0,regeneratorRuntime.mark(function r(){var o,i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(e instanceof Error)){r.next=2;break}return r.abrupt("return",new Error);case 2:if(0!==(o=a.a.chain(t).filter(function(t){return!!e[t.entrezGeneId]}).filter(function(e){return e.molecularProfileAlterationType===l.a.COPY_NUMBER_ALTERATION}).value()).length){r.next=5;break}return r.abrupt("return",d.b);case 5:return i=a.a.chain(o).map(function(e){return Object(p.s)(e.entrezGeneId,null,Object(y.a)(e.value),[p.d.ONCOGENIC])}).uniqBy("id").value(),r.abrupt("return",Object(d.nb)(i,n));case 7:case"end":return r.stop()}},r)}))}function T(e,t){var n={driverTiersFilter:"",driverTiersFilterAnnotation:"",oncoKbOncogenic:"",isHotspot:!1,putativeDriver:!1,hugoGeneSymbol:e.hugoGeneSymbol,proteinChange:e.proteinChange,mutationStatus:e.isGermline?v.c:"",driverFilter:e.isCustomDriver?v.d:"",driverFilterAnnotation:e.isCustomDriver?"You indicated that this mutation is a driver.":"",molecularProfileAlterationType:void 0,alterationSubType:"",value:void 0,mutationType:"",entrezGeneId:0,proteinPosStart:void 0,proteinPosEnd:void 0},r=t[e.hugoGeneSymbol];if(r&&(n.entrezGeneId=r.entrezGeneId),n.proteinChange){var o=Object(p.G)(n.proteinChange);o&&(n.proteinPosStart=o.start,n.proteinPosEnd=o.end)}switch(e.alteration){case"missense":n=Object.assign(n,{molecularProfileAlterationType:l.a.MUTATION_EXTENDED,alterationSubType:"missense",mutationType:"missense_mutation"});break;case"inframe":n=Object.assign(n,{molecularProfileAlterationType:l.a.MUTATION_EXTENDED,alterationSubType:"inframe",mutationType:"indel"});break;case"fusion":n=Object.assign(n,{molecularProfileAlterationType:l.a.MUTATION_EXTENDED,mutationType:"fusion"});break;case"promoter":n=Object.assign(n,{molecularProfileAlterationType:l.a.MUTATION_EXTENDED,proteinChange:"promoter"});break;case"trunc":n=Object.assign(n,{molecularProfileAlterationType:l.a.MUTATION_EXTENDED,alterationSubType:"nonsense",mutationType:"nonsense"});break;case"other":n=Object.assign(n,{molecularProfileAlterationType:l.a.MUTATION_EXTENDED,alterationSubType:"other"});break;case"amp":n=Object.assign(n,{molecularProfileAlterationType:l.a.COPY_NUMBER_ALTERATION,alterationSubType:u.a[2],value:2});break;case"homdel":n=Object.assign(n,{molecularProfileAlterationType:l.a.COPY_NUMBER_ALTERATION,alterationSubType:u.a[-2],value:-2});break;case"gain":n=Object.assign(n,{molecularProfileAlterationType:l.a.COPY_NUMBER_ALTERATION,alterationSubType:u.a[1],value:1});break;case"hetloss":n=Object.assign(n,{molecularProfileAlterationType:l.a.COPY_NUMBER_ALTERATION,alterationSubType:u.a[-1],value:-1});break;case"mrnaHigh":n=Object.assign(n,{molecularProfileAlterationType:l.a.MRNA_EXPRESSION,alterationSubType:"high"});break;case"mrnaLow":n=Object.assign(n,{molecularProfileAlterationType:l.a.MRNA_EXPRESSION,alterationSubType:"low"});break;case"protHigh":n=Object.assign(n,{molecularProfileAlterationType:l.a.PROTEIN_LEVEL,alterationSubType:"high"});break;case"protLow":n=Object.assign(n,{molecularProfileAlterationType:l.a.PROTEIN_LEVEL,alterationSubType:"low"})}return n}function P(e){return e.disp_mut||e.disp_cna||e.disp_mrna||e.disp_prot||e.disp_fusion}function x(e){var t=a.a.chain(e).filter(P).size().value();return Object(s.o)(t,e.length)}function A(e,t,n){var r={},o=e.filter(function(e){return S(e)}),i=!0,s=!1,l=void 0;try{for(var u,c=o[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var p=u.value,d=p.trackName||p.hugoGeneSymbol;d in r||(r[d]={});var f=r[d];p.sampleId in f||(f[p.sampleId]=[]);var h=T(p,t);n&&g.b.test(h.mutationStatus)||f[p.sampleId].push(h)}}catch(e){s=!0,l=e}finally{try{i||null==c.return||c.return()}finally{if(s)throw l}}var m=!0,y=!1,b=void 0;try{for(var v,_=function(){var e=v.value;a.a.forEach(r,function(t,n){e.sampleId in t||(t[e.sampleId]=[])})},E=e[Symbol.iterator]();!(m=(v=E.next()).done);m=!0)_()}catch(e){y=!0,b=e}finally{try{m||null==E.return||E.return()}finally{if(y)throw b}}return a.a.mapValues(r,function(e){return a.a.chain(e).map(function(e,t){return{sampleId:t,data:e}}).value()})}function j(e){return a.a.mapValues(e,function(e,t){return e.map(function(e){return Object(c.a)({sample:e.sampleId,patient:e.sampleId,study_id:"",uid:e.sampleId},t,e.data)})})}function I(e){return"geneticTrack_".concat(e)}function N(e,t,n){var r=a.a.keyBy(n||[]);e=a.a.mapValues(e,function(e){return e.filter(function(e){return!(e.sample in r)})});var o=a.a.mapValues(e,x);return(t?t.filter(function(t){return t in e}):Object.keys(e)).map(function(t){return{key:I(t),label:t,info:o[t],data:e[t]}})}function M(e,t,n,r){var o=function(e){return""};if(t.oncoKbCna.isComplete&&!(t.oncoKbCna.result instanceof Error)){var i=t.oncoKbCna.result.indicatorMap;o=function(e){var t=Object(p.v)(e.entrezGeneId,null,Object(y.a)(e.value)),n=i[t];return n?Object(h.n)(n):""}}var s=function(e){return""};if(t.oncoKb&&t.oncoKb.isComplete&&!(t.oncoKb.result instanceof Error)){var u=t.oncoKb.result.indicatorMap;s=function(e){var t=Object(p.v)(e.entrezGeneId,null,e.proteinChange,e.mutationType),n=u[t];return n?Object(h.n)(n):""}}var c=function(e){return!1};if(t.cbioportalCount&&t.cbioportalCount.isComplete){var d=t.cbioportalCount.result,f=n.cbioportalCountThreshold;c=function(e){if(e.molecularProfileAlterationType===l.a.MUTATION_EXTENDED){var t=Object(m.b)(e),n=d[t];return f<=n}return!1}}return a.a.mapValues(e,function(e,t){return e.map(function(e){var t=a.a.clone(e);return t.data=t.data.filter(function(e){switch(delete e.oncoKbOncogenic,delete e.putativeDriver,e.molecularProfileAlterationType){case l.a.COPY_NUMBER_ALTERATION:e.oncoKbOncogenic=o(e);break;case l.a.MUTATION_EXTENDED:e.oncoKbOncogenic=s(e)}return e.molecularProfileAlterationType!==l.a.MUTATION_EXTENDED||(e.putativeDriver=!!(e.oncoKbOncogenic||n.useHotspots&&e.isHotspot||c(e)||n.useCustomBinary&&e.driverFilter===v.d),!r||e.putativeDriver)}),t},[])})}function D(e){var t=e.trim().split("\n").map(function(e){return e.trim().split(/\s+/)});try{return{parseSuccess:!0,result:t.map(function(e,n){if(0===n&&a.a.isEqual(t[0].map(function(e){return e.toLowerCase()}).slice(0,4),["sample","gene","alteration","type"]))return null;var r="Genetic data input error on line ".concat(n+1,": \n").concat(e.join("\t"),"\n\n");if(1===e.length)return{sampleId:e[0]};if(4===e.length||5===e.length){var o=e[0],i=e[1],s=e[2],l=s.toLowerCase(),u=e[3],c=u.toLowerCase(),p={sampleId:o,hugoGeneSymbol:i,trackName:5===e.length?e[4]:void 0};switch(c){case"cna":if(-1===["amp","gain","hetloss","homdel"].indexOf(l))throw new Error("".concat(r,'Alteration "').concat(s,'" is not valid - it must be "AMP", "GAIN" ,"HETLOSS", or "HOMDEL" since Type is "CNA"'));p.alteration=l;break;case"exp":if("high"===l)p.alteration="mrnaHigh";else{if("low"!==l)throw new Error("".concat(r,'Alteration "').concat(s,'" is not valid - it must be "HIGH" or "LOW" if Type is "EXP"'));p.alteration="mrnaLow"}break;case"prot":if("high"===l)p.alteration="protHigh";else{if("low"!==l)throw new Error("".concat(r,'Alteration "').concat(s,'" is not valid - it must be "HIGH" or "LOW" if Type is "PROT"'));p.alteration="protLow"}break;case"fusion":if("fusion"!==c)throw new Error("".concat(r,'Type "').concat(u,'" is not valid - it must be "FUSION" if Alteration is "FUSION"'));p.alteration=c,p.proteinChange=s;break;default:var d;try{d=Object(b.g)("GENE: ".concat(c))[0].alterations[0]}catch(e){throw new Error("".concat(r,"Mutation type ").concat(u," is not valid."))}var f=!0,h=!1,m=void 0;try{for(var y,g=d.modifiers[Symbol.iterator]();!(f=(y=g.next()).done);f=!0){switch(y.value.type){case"GERMLINE":p.isGermline=!0;break;case"DRIVER":p.isCustomDriver=!0;break;default:throw new Error("".concat(r,"Only allowed mutation modifiers are GERMLINE and DRIVER"))}}}catch(e){h=!0,m=e}finally{try{f||null==g.return||g.return()}finally{if(h)throw m}}var v=d.constr_val.toLowerCase();if(-1===["missense","inframe","promoter","trunc","other"].indexOf(v))throw new Error("".concat(r,'Type "').concat(u,'" is not valid - it must be "MISSENSE", "INFRAME", "TRUNC", "PROMOTER", or "OTHER" for a mutation alteration.'));p.alteration=v,p.proteinChange=s}return p}throw new Error("".concat(r,"input lines must have either 1 or 4 columns."))}).filter(function(e){return!!e}),error:void 0}}catch(e){return{parseSuccess:!1,result:void 0,error:e.message}}}},function(e,t,n){"use strict";n.d(t,"c",function(){return l}),n.d(t,"b",function(){return u}),n.d(t,"a",function(){return c}),n.d(t,"d",function(){return p});var r=n(49),o=n(0),i=n(1),a=n.n(i),s=n(18);function l(e,t){return e.length!==t.length?o.createElement("span",null,o.createElement("strong",null,t.length)," patients /"," ",o.createElement("strong",null,e.length)," samples"):o.createElement("span",null,o.createElement("strong",null,e.length)," patients/samples")}function u(e){switch(e.length){case 0:return"";case 1:return e[0];case 2:return e.join(" & ");default:return"".concat(e[0],", ").concat(e[1]," & ").concat(3===e.length?e[2]:"".concat(e.length-2," other genes"))}}function c(e,t,n,i,a){var s="Queried gene".concat(1!==a?"s are":" is"," altered in"),l="".concat(n," (").concat(Object(r.c)(n/e,0),") of queried");return e!==t?o.createElement("strong",{style:{display:"flex"}},o.createElement("span",{style:{marginRight:13}},s),o.createElement("table",null,o.createElement("tr",null,o.createElement("td",null,"• ","".concat(i," (").concat(Object(r.c)(i/t,0),") of queried patients"))),o.createElement("tr",null,o.createElement("td",null,"• ","".concat(l," samples"))))):o.createElement("strong",null,o.createElement("span",null,"".concat(s," ").concat(l," patients/samples")))}function p(e,t,n,r,o){var i=a.a.some(o,function(e){return"all_cases_in_study"===e.category}),l=[],u=r||n||!i;t.length>0&&u&&t.forEach(function(e){return l.push({sampleId:e.sampleId,studyId:e.studyId})});var c=window.open(Object(s.b)("study",{id:e.map(function(e){return e.studyId}).join(",")}),"_blank");l.length>0&&(c.studyPageFilter="filterJson=".concat(JSON.stringify({sampleIdentifiers:l})))}},,,,,function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(2),a=n(1),s=n(96),l=n(3),u=n(18);function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"getTextValue",value:function(t){return e.getData(t)||""}},{key:"getData",value:function(e){return e.length>0?e[0].sampleId:null}},{key:"renderFunction",value:function(t,n){var o=e.getTextValue(t),i=r.createElement(l.q,{text:o,tooltip:r.createElement("div",{style:{maxWidth:300}},o),maxLength:16});if(n){var a=n[t[0].molecularProfileId],s=a&&a.studyId;s&&(i=r.createElement("a",{href:Object(u.y)(s,o),target:"_blank"},i))}return i}}],(n=null)&&c(t.prototype,n),o&&c(t,o),e}(),d=n(820);function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"renderFunction",value:function(t){var n=e.getSortValue(t);if(n){var o=t[0].normalAltCount,i=t[0].normalRefCount;return d.a.mainContent(n,o,i)}return r.createElement(l.p,{status:l.o.NA})}},{key:"getTextValue",value:function(t){var n=e.getSortValue(t);return n?Object(d.b)(n):""}},{key:"getSortValue",value:function(e){var t=e[0];if(!t)return null;var n=t.normalAltCount,r=t.normalRefCount;return n<0||r<0?null:n/(n+r)}}],(n=null)&&f(t.prototype,n),o&&f(t,o),e}(),m=n(920),y=(n(789),n(856)),g=n(49),b=n(20),v=n(857);function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var S=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"renderFunction",value:function(t,n,o){var i=e.getMutSigQValue(t,n),a=e.getVariantCountData(t,o),s=e.makeCohortFrequencyViz(a);return r.createElement("div",null,null!==s&&s,r.createElement(b.If,{condition:i>0},r.createElement(b.Then,null,r.createElement(v.a,{qValue:i}))))}},{key:"getSortValue",value:function(t,n){var r=e.getVariantCountData(t,n);return r&&r.data?r.data.numberOfSamplesWithMutationInGene:null}},{key:"getVariantCountData",value:function(e,t){if(0===e.length)return null;var n=e[0].entrezGeneId,r=e[0].keyword,o=t.get({entrezGeneId:n,keyword:r});return o?Object.assign({hugoGeneSymbol:e[0].gene.hugoGeneSymbol},o):null}},{key:"getMutSigQValue",value:function(e,t){if(!t||0===e.length)return-1;var n=t[e[0].entrezGeneId];return n?n.qValue:-1}},{key:"makeCohortFrequencyViz",value:function(t){var n=null;if(null===t)n=l.o.LOADING;else if("error"===t.status)n=l.o.ERROR;else{if(null!==t.data){var o=[t.data.numberOfSamplesWithMutationInGene];return t.data.keyword&&o.push(t.data.numberOfSamplesWithKeyword),r.createElement(y.a,{counts:o,totalCount:t.data.numberOfSamples,tooltip:e.getCohortFrequencyTooltip(t)})}n=l.o.NA}if(null!==n)return r.createElement(l.p,{status:n})}},{key:"getBoldPercentage",value:function(e){return r.createElement("b",null,Object(g.c)(e))}},{key:"getCohortFrequencyTooltip",value:function(t){return null===t?r.createElement("span",null,"Querying server for data."):"error"===t.status?r.createElement("span",null,"Error retrieving data."):null===t.data?r.createElement("span",null,"Count data is not available for this gene."):r.createElement("div",null,r.createElement("span",null,t.data.numberOfSamplesWithMutationInGene," ","samples (",e.getBoldPercentage(t.data.numberOfSamplesWithMutationInGene/t.data.numberOfSamples),") in this study have mutated"," ",t.hugoGeneSymbol,void 0!==t.data.keyword&&r.createElement("span",null,", out of which"," ",t.data.numberOfSamplesWithKeyword," (",e.getBoldPercentage(t.data.numberOfSamplesWithKeyword/t.data.numberOfSamples),") have ",t.data.keyword," mutations"),"."))}}],(n=null)&&_(t.prototype,n),o&&_(t,o),e}();function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var w=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"renderFunction",value:function(t,n,o){var i=e.getData(t,n,o);return r.createElement(l.d,{placement:"left",overlay:e.getTooltipContents(i),arrowContent:r.createElement("div",{className:"rc-tooltip-arrow-inner"})},e.getTdContents(i))}},{key:"getTextValue",value:function(t,n,r){var o=e.getTdValue(e.getData(t,n,r));return null!==o?e.altToFilterString[o]:""}},{key:"getSortValue",value:function(t,n,r){return e.getTdValue(e.getData(t,n,r))}},{key:"filter",value:function(t,n,r,o){var i=e.getData(t,n,r);return!(!i||!i.data)&&(!!e.altToFilterString[i.data.alteration]&&e.altToFilterString[i.data.alteration].indexOf(o.toLowerCase())>-1)}},{key:"getData",value:function(e,t,n){if(!e||0===e.length||!n.isActive)return null;var r=e[0].sampleId,o=e[0].entrezGeneId,i=t[e[0].molecularProfileId];return i?n.get({sampleId:r,entrezGeneId:o,studyId:i.studyId}):null}},{key:"getTdValue",value:function(e){return null!==e&&"complete"===e.status&&null!==e.data?e.data.alteration:null}},{key:"getTdContents",value:function(e){var t=null;if(null!==e&&"complete"===e.status&&null!==e.data){var n=e.data.alteration;return 2===n?r.createElement("span",{style:{color:"red",textAlign:"center",fontSize:"12px"}},r.createElement("b",null,"Amp")):1===n?r.createElement("span",{style:{color:"red",textAlign:"center",fontSize:"smaller"}},r.createElement("b",null,"Gain")):0===n?r.createElement("span",{style:{color:"black",textAlign:"center",fontSize:"xx-small"}},"Diploid"):-1===n?r.createElement("span",{style:{color:"blue",textAlign:"center",fontSize:"smaller"}},r.createElement("b",null,"ShallowDel")):r.createElement("span",{style:{color:"blue",textAlign:"center",fontSize:"12px"}},r.createElement("b",null,"DeepDel"))}if(null!==(t=e&&"complete"===e.status&&null===e.data?l.o.NA:e&&"error"===e.status?l.o.ERROR:l.o.NA))return r.createElement(l.p,{status:t,naAlt:"CNA data is not available for this gene."})}},{key:"getTooltipContents",value:function(e){return e&&"complete"===e.status&&null!==e.data?r.createElement("div",null,r.createElement("span",null,{"-2":"Deep deletion","-1":"Shallow deletion",0:"Diploid / normal",1:"Low-level gain",2:"High-level amplification"}[e.data.alteration])):e&&"complete"===e.status&&null===e.data?r.createElement("span",null,"CNA data is not available for this gene."):e&&"error"===e.status?r.createElement("span",null,"Error retrieving data."):r.createElement("span",null,"Querying server for data.")}},{key:"isVisible",value:function(e){return e&&e.isActive}}],(n=null)&&E(t.prototype,n),o&&E(t,o),e}();w.altToFilterString={2:"amp",1:"gain",0:"diploid","-1":"shallowdel","-2":"deepdel"};var O=n(921);function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var k=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"getTextValue",value:function(t){return e.getData(t)||""}},{key:"getDisplayValue",value:function(t){return e.getTextValue(t)}},{key:"getData",value:function(e){return e.length>0?e[0].gene.hugoGeneSymbol:null}},{key:"getSortValue",value:function(t){return e.getTextValue(t)}},{key:"renderFunction",value:function(t){var n=e.getDisplayValue(t);return r.createElement("span",{"data-test":"mutation-table-gene-column"},n)}}],(n=null)&&C(t.prototype,n),o&&C(t,o),e}();function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var P=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getSortValue",value:function(t){var n=e.getData(t);return n?e.extractSortValue(n):null}},{key:"extractSortValue",value:function(e){var t=e.match(/[0-9]+/g),n=-1;return t?n=parseInt(t[0]):e.toLowerCase().indexOf("x")>-1?n=23:e.toLowerCase().indexOf("y")>-1&&(n=24),n}},{key:"getData",value:function(e){return e.length>0?e[0].chr:null}}],(n=null)&&T(t.prototype,n),r&&T(t,r),e}(),x=n(12),A=n(950),j=n.n(A);function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var N=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"getData",value:function(e){var t=null;return e.length>0&&(t=e[0].mutationStatus),t}},{key:"sortValue",value:function(t){return e.getData(t)}},{key:"download",value:function(t){return e.getData(t)||""}},{key:"renderFunction",value:function(t){var n,o=e.getData(t),i=!1;return o?o.toLowerCase().indexOf("somatic")>-1?(n=r.createElement("span",{className:j.a.somatic},"S"),i=!0):o.toLowerCase().indexOf("germline")>-1?(n=r.createElement("span",{className:j.a.germline},"G"),i=!0):n=r.createElement("span",{className:j.a.unknown},o):n=r.createElement("span",null),i&&(n=r.createElement(l.d,{overlay:r.createElement("span",null,o),placement:"right"},n)),n}}],(n=null)&&I(t.prototype,n),o&&I(t,o),e}(),M=n(922),D=n.n(M);function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var L=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"getSortValue",value:function(t){return Object(x.h)(e.getTextValue(t))}},{key:"getTextValue",value:function(t){var n="",r=e.getData(t);return r&&(n=r.toString()),n}},{key:"getFilterValue",value:function(t,n,r){var o=e.getDisplayValue(t),i=N.getData(t);return i&&i.toLowerCase().includes("germline")&&(o="".concat(o).concat(i)),o.toUpperCase().indexOf(r)>-1}},{key:"getDisplayValue",value:function(t){return e.getTextValue(t)}},{key:"getData",value:function(e){return e.length>0?e[0].proteinChange:null}},{key:"renderWithMutationStatus",value:function(t){var n=e.getDisplayValue(t),o=N.getData(t),i=r.createElement(l.q,{text:n,tooltip:r.createElement("span",null,n),className:D.a.proteinChange,maxLength:40});return o&&o.toLowerCase().indexOf("germline")>-1&&(i=r.createElement("span",null,i,r.createElement("span",{className:D.a.germline},"Germline"))),i}}],(n=null)&&R(t.prototype,n),o&&R(t,o),e}();function G(e,t){return e=r.createElement(l.d,{overlay:r.createElement("span",null,t),placement:"left"},e)}var V=n(951),B=n.n(V);function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var H=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"getDisplayValue",value:function(t){var n=e.getMapEntry(t);return n&&n.displayValue?n.displayValue:e.getTextValue(t)}},{key:"getTextValue",value:function(t){var n="",r=e.getData(t);return r&&(n=r.toString()),n}},{key:"getClassName",value:function(t){var n=e.getMapEntry(t);return n&&n.className?n.className:B.a.otherMutation}},{key:"getMapEntry",value:function(t){var n=e.getData(t);return n?e.MAIN_MUTATION_TYPE_MAP[Object(l.D)(n)]:void 0}},{key:"getData",value:function(e){return e.length>0?e[0].mutationType:null}},{key:"renderFunction",value:function(t){var n=e.getDisplayValue(t),o=e.getClassName(t),i=e.getTextValue(t),a=r.createElement("span",{className:o},n);return i.toLowerCase()!==n.toLowerCase()&&(a=G(a,i)),a}},{key:"MAIN_MUTATION_TYPE_MAP",get:function(){return{missense:{displayValue:"Missense",className:B.a.missenseMutation},inframe:{displayValue:"IF",className:B.a.inframeMutation},truncating:{displayValue:"Truncating",className:B.a.truncMutation},nonsense:{displayValue:"Nonsense",className:B.a.truncMutation},nonstop:{displayValue:"Nonstop",className:B.a.truncMutation},nonstart:{displayValue:"Nonstart",className:B.a.truncMutation},frameshift:{displayValue:"FS",className:B.a.truncMutation},frame_shift_del:{displayValue:"FS del",className:B.a.truncMutation},frame_shift_ins:{displayValue:"FS ins",className:B.a.truncMutation},in_frame_ins:{displayValue:"IF ins",className:B.a.inframeMutation},in_frame_del:{displayValue:"IF del",className:B.a.inframeMutation},splice_site:{displayValue:"Splice",className:B.a.truncMutation},fusion:{displayValue:"Fusion",className:B.a.fusion},silent:{displayValue:"Silent",className:B.a.otherMutation}}}}],(n=null)&&F(t.prototype,n),o&&F(t,o),e}(),U=n(952),W=n.n(U);function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var z=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"getDisplayValue",value:function(t){return e.getTextValue(t)}},{key:"getTextValue",value:function(t){var n="",r=e.getData(t);return r&&(n=r.toString().toUpperCase()),n}},{key:"getData",value:function(e){return e.length>0?e[0].variantType:null}},{key:"getMapEntry",value:function(t){var n=e.getData(t);return n?e.MAIN_VARIANT_TYPE_MAP[n.toUpperCase()]:void 0}},{key:"getTooltip",value:function(t){var n=e.getMapEntry(t);return n&&n.toolTip?n.toolTip:void 0}},{key:"getClassName",value:function(t){var n=e.getMapEntry(t);return n&&n.className?n.className:e.MAIN_VARIANT_TYPE_MAP.OTHER.className}},{key:"renderFunction",value:function(t){var n=e.getDisplayValue(t),o=e.getClassName(t),i=e.getTooltip(t),a=r.createElement("span",{className:o},n);return i&&(a=G(a,i)),a}},{key:"MAIN_VARIANT_TYPE_MAP",get:function(){return{SNP:{toolTip:"Single Nucleotide Polymorphism",className:W.a.variantTypeSnp},DNP:{toolTip:"Di-Nucleotide Polymorphism",className:W.a.variantTypeSnp},TNP:{toolTip:"Tri-Nucleotide Polymorphism",className:W.a.variantTypeSnp},ONP:{toolTip:"Oligo-Nucleotide Polymorphism",className:W.a.variantTypeSnp},INS:{toolTip:"Insertion",className:W.a.variantTypeIns},DEL:{toolTip:"Deletion",className:W.a.variantTypeDel},CONSOLIDATED:{className:W.a.variantTypeOther},OTHER:{className:W.a.variantTypeOther}}}}],(n=null)&&q(t.prototype,n),o&&q(t,o),e}(),Q=n(293),K=n(5),Y=n.n(K),X=n(811),Z=n.n(X),J=n(953),$=n.n(J),ee=n(858),te=n.n(ee);function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ae(e,t){return(ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function se(e){e.querySelector(".rc-tooltip-arrow").style.display="none"}var le=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=oe(t).call(this,e))||"object"!==ne(o)&&"function"!=typeof o?ie(r):o).tooltipContent=n.tooltipContent.bind(ie(n)),n}var o,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ae(e,t)}(t,r["Component"]),o=t,a=[{key:"download",value:function(e){return e?"impact: ".concat(e.functionalImpact,", score: ").concat(e.functionalImpactScore):"NA"}},{key:"maLink",value:function(e){var t=null;return e&&0!==(t=e.replace("getma.org","mutationassessor.org/r3")).indexOf("http://")&&(t="http://".concat(t)),t}}],(i=[{key:"render",value:function(){var e=r.createElement("span",{className:"".concat(Z.a["annotation-item-text"])});if(this.props.mutationAssessor&&null!==this.props.mutationAssessor.functionalImpact){var t=this.props.mutationAssessor;e=r.createElement("span",{className:Y()(Z.a["annotation-item-text"],te.a["ma-".concat(t.functionalImpact)])},r.createElement("i",{className:"fa fa-circle","aria-hidden":"true"}));var n=r.createElement("div",{className:"rc-tooltip-arrow-inner"});e=r.createElement(l.d,{overlay:this.tooltipContent,placement:"right",trigger:["hover","focus"],arrowContent:n,onPopupAlign:se,destroyTooltipOnHide:!1},e)}return e}},{key:"tooltipContent",value:function(){if(this.props.mutationAssessor){var e=this.props.mutationAssessor,o=t.maLink("http://mutationassessor.org/r3/?cm=var&p=".concat(e.uniprotId,"&var=").concat(e.variant)),i=t.maLink(e.msaLink),a=t.maLink(e.pdbLink),s=e.functionalImpact?r.createElement("div",null,r.createElement("table",{className:$.a["ma-tooltip-table"]},r.createElement("tr",null,r.createElement("td",null,"Source"),r.createElement("td",null,r.createElement("a",{href:"http://mutationassessor.org/r3"},"MutationAssessor"))),r.createElement("tr",null,r.createElement("td",null,"Impact"),r.createElement("td",null,r.createElement("span",{className:te.a["ma-".concat(e.functionalImpact)]},e.functionalImpact))),(e.functionalImpactScore||0===e.functionalImpactScore)&&r.createElement("tr",null,r.createElement("td",null,"Score"),r.createElement("td",null,r.createElement("b",null,e.functionalImpactScore.toFixed(2)))))):null,l=o?r.createElement("div",{className:$.a["mutation-assessor-link"]},r.createElement("a",{href:o,target:"_blank"},r.createElement("img",{height:"15",width:"19",src:n(827),className:$.a["mutation-assessor-main-img"],alt:"Mutation Assessor"}),"Go to Mutation Assessor")):null,u=i?r.createElement("div",{className:$.a["mutation-assessor-link"]},r.createElement("a",{href:i,target:"_blank"},r.createElement("span",{className:"".concat($.a["ma-icon"]," ").concat($.a["ma-msa-icon"])},"msa"),"Multiple Sequence Alignment")):null,c=a?r.createElement("div",{className:$.a["mutation-assessor-link"]},r.createElement("a",{href:a,target:"_blank"},r.createElement("span",{className:"".concat($.a["ma-icon"]," ").concat($.a["ma-3d-icon"])},"3D"),"Mutation Assessor 3D View")):null;return r.createElement("span",null,s,u,c,l)}}}])&&re(o.prototype,i),a&&re(o,a),t}();le.MUTATION_ASSESSOR_URL="http://mutationassessor.org/r3/";var ue=n(859),ce=n.n(ue);function pe(e){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function de(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function he(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function me(e,t){return(me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ye(e){e.querySelector(".rc-tooltip-arrow").style.display="none"}var ge=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=fe(t).call(this,e))||"object"!==pe(o)&&"function"!=typeof o?he(r):o).tooltipContent=n.tooltipContent.bind(he(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&me(e,t)}(t,r["Component"]),n=t,i=[{key:"download",value:function(e,t){return e||t?"impact: ".concat(t,", score: ").concat(e):"NA"}}],(o=[{key:"render",value:function(){var e=r.createElement("span",{className:"".concat(Z.a["annotation-item-text"])});if(this.props.siftPrediction&&this.props.siftPrediction.length>0){e=r.createElement("span",{className:Y()(Z.a["annotation-item-text"],ce.a["sift-".concat(this.props.siftPrediction)])},r.createElement("i",{className:"fa fa-circle","aria-hidden":"true"}));var t=r.createElement("div",{className:"rc-tooltip-arrow-inner"});e=r.createElement(l.d,{overlay:this.tooltipContent,placement:"right",trigger:["hover","focus"],arrowContent:t,onPopupAlign:ye,destroyTooltipOnHide:!1},e)}return e}},{key:"tooltipContent",value:function(){var e=this.props.siftPrediction?r.createElement("div",null,r.createElement("table",{className:ce.a["sift-tooltip-table"]},r.createElement("tr",null,r.createElement("td",null,"Source"),r.createElement("td",null,r.createElement("a",{href:"http://sift.bii.a-star.edu.sg/"},"SIFT"))),r.createElement("tr",null,r.createElement("td",null,"Impact"),r.createElement("td",null,r.createElement("span",{className:ce.a["sift-".concat(this.props.siftPrediction)]},this.props.siftPrediction))),(this.props.siftScore||0===this.props.siftScore)&&r.createElement("tr",null,r.createElement("td",null,"Score"),r.createElement("td",null,r.createElement("b",null,this.props.siftScore.toFixed(2)))))):null;return r.createElement("span",null,e)}}])&&de(n.prototype,o),i&&de(n,i),t}();ge.SIFT_URL="http://sift.bii.a-star.edu.sg/";var be=n(860),ve=n.n(be);function _e(e){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ee(e){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function we(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oe(e,t){return(Oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ce(e){e.querySelector(".rc-tooltip-arrow").style.display="none"}var ke=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=Ee(t).call(this,e))||"object"!==_e(o)&&"function"!=typeof o?we(r):o).tooltipContent=n.tooltipContent.bind(we(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oe(e,t)}(t,r["Component"]),n=t,i=[{key:"download",value:function(e,t){return e||t?"impact: ".concat(t,", score: ").concat(e):"NA"}}],(o=[{key:"render",value:function(){var e=r.createElement("span",{className:"".concat(Z.a["annotation-item-text"])});if(this.props.polyPhenPrediction&&this.props.polyPhenPrediction.length>0){e=r.createElement("span",{className:Y()(Z.a["annotation-item-text"],ve.a["polyPhen2-".concat(this.props.polyPhenPrediction)])},r.createElement("i",{className:"fa fa-circle","aria-hidden":"true"}));var t=r.createElement("div",{className:"rc-tooltip-arrow-inner"});e=r.createElement(l.d,{overlay:this.tooltipContent,placement:"right",trigger:["hover","focus"],arrowContent:t,onPopupAlign:Ce,destroyTooltipOnHide:!1},e)}return e}},{key:"tooltipContent",value:function(){var e=this.props.polyPhenPrediction?r.createElement("div",null,r.createElement("table",{className:ve.a["polyPhen2-tooltip-table"]},r.createElement("tr",null,r.createElement("td",null,"Source"),r.createElement("td",null,r.createElement("a",{href:"http://genetics.bwh.harvard.edu/pph2/"},"PolyPhen-2"))),r.createElement("tr",null,r.createElement("td",null,"Impact"),r.createElement("td",null,r.createElement("span",{className:ve.a["polyPhen2-".concat(this.props.polyPhenPrediction)]},this.props.polyPhenPrediction))),(this.props.polyPhenScore||0===this.props.polyPhenScore)&&r.createElement("tr",null,r.createElement("td",null,"Score"),r.createElement("td",null,r.createElement("b",null,this.props.polyPhenScore.toFixed(2)))))):null;return r.createElement("span",null,e)}}])&&Se(n.prototype,o),i&&Se(n,i),t}();ke.POLYPHEN2_URL="http://genetics.bwh.harvard.edu/pph2/";var Te,Pe=n(8),xe=RegExp("mutation_assessor","gi").test(Pe.b.serverConfig.show_genomenexus_annotation_sources);function Ae(e){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ne(e,t,n){return t&&Ie(e.prototype,t),n&&Ie(e,n),e}function Me(e,t){return!t||"object"!==Ae(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function De(e){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Re(e,t){return(Re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}!function(e){e[e.MUTATION_ASSESSOR=0]="MUTATION_ASSESSOR",e[e.SIFT=1]="SIFT",e[e.POLYPHEN2=2]="POLYPHEN2"}(Te||(Te={}));var Le=function(e){function t(e){var n;return je(this,t),(n=Me(this,De(t).call(this,e))).state={active:n.props.active},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Re(e,t)}(t,r["Component"]),Ne(t,[{key:"legend",value:function(){var e=this;return r.createElement("div",null,r.createElement("table",{className:"table table-striped table-border-top"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"Legend"),xe&&r.createElement("th",null,r.createElement("span",{style:{display:"inline-block",width:22},title:"Mutation Asessor",onMouseOver:function(){return e.setState({active:"mutationAssessor"})}},r.createElement("img",{height:14,width:14,src:n(827),alt:"Mutation Assessor"}))),r.createElement("th",null,r.createElement("span",{style:{display:"inline-block",width:22},title:"SIFT",onMouseOver:function(){return e.setState({active:"sift"})}},r.createElement("img",{height:14,width:14,src:n(861),alt:"SIFT"}))),r.createElement("th",null,r.createElement("span",{style:{display:"inline-block",width:22},title:"PolyPhen-2",onMouseOver:function(){return e.setState({active:"polyPhen2"})}},r.createElement("img",{height:14,width:14,src:n(862),alt:"PolyPhen-2"}))))),r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",null,r.createElement("span",{className:Y()(Z.a["annotation-item-text"],te.a["ma-high"])},r.createElement("i",{className:"fa fa-circle","aria-hidden":"true"}))),xe&&r.createElement("td",{className:te.a["ma-high"]},"high"),r.createElement("td",{className:ce.a["sift-deleterious"]},"deleterious"),r.createElement("td",{className:ve.a["polyPhen2-probably_damaging"]},"probably_damaging")),xe&&r.createElement("tr",null,r.createElement("td",null,r.createElement("span",{className:Y()(Z.a["annotation-item-text"],te.a["ma-medium"])},r.createElement("i",{className:"fa fa-circle","aria-hidden":"true"}))),r.createElement("td",{className:te.a["ma-medium"]},"medium"),r.createElement("td",null,"-"),r.createElement("td",null,"-")),r.createElement("tr",null,r.createElement("td",null,r.createElement("span",{className:Y()(Z.a["annotation-item-text"],te.a["ma-low"])},r.createElement("i",{className:"fa fa-circle","aria-hidden":"true"}))),xe&&r.createElement("td",{className:te.a["ma-low"]},"low"),r.createElement("td",{className:ce.a["sift-deleterious_low_confidence"]},"deleterious_low_confidence"),r.createElement("td",{className:ve.a["polyPhen2-possibly_damaging"]},"possibly_damaging")),r.createElement("tr",null,r.createElement("td",null,r.createElement("span",{className:Y()(Z.a["annotation-item-text"],te.a["ma-neutral"])},r.createElement("i",{className:"fa fa-circle","aria-hidden":"true"}))),xe&&r.createElement("td",{className:te.a["ma-neutral"]},"neutral"),r.createElement("td",{className:ce.a["sift-tolerated_low_confidence"]},"tolerated_low_confidence"),r.createElement("td",{className:ve.a["polyPhen2-benign"]},"benign")),r.createElement("tr",null,r.createElement("td",null,r.createElement("span",{className:Y()(Z.a["annotation-item-text"],te.a["ma-neutral"])},r.createElement("i",{className:"fa fa-circle","aria-hidden":"true"}))),xe&&r.createElement("td",null,"-"),r.createElement("td",{className:ce.a["sift-tolerated"]},"tolerated"),r.createElement("td",null,"-")))))}},{key:"render",value:function(){return r.createElement("div",null,"mutationAssessor"===this.state.active&&t.mutationAssessorText(),"sift"===this.state.active&&t.siftText(),"polyPhen2"===this.state.active&&t.polyPhen2Text(),this.legend())}}],[{key:"mutationAssessorText",value:function(){return r.createElement("div",{style:{width:450,height:100}},r.createElement("a",{href:le.MUTATION_ASSESSOR_URL,target:"_blank"},"Mutation Assessor")," ","predicts the functional impact of amino-acid substitutions in proteins, such as mutations discovered in cancer or missense polymorphisms. The functional impact is assessed based on evolutionary conservation of the affected amino acid in protein homologs. The method has been validated on a large set (60k) of disease associated (OMIM) and polymorphic variants.")}},{key:"siftText",value:function(){return r.createElement("div",{style:{width:450,height:100}},r.createElement("a",{href:ge.SIFT_URL,target:"_blank"},"SIFT")," ","predicts whether an amino acid substitution affects protein function based on sequence homology and the physical properties of amino acids. SIFT can be applied to naturally occurring nonsynonymous polymorphisms and laboratory-induced missense mutations.")}},{key:"polyPhen2Text",value:function(){return r.createElement("div",{style:{width:450,height:100}},r.createElement("a",{href:ke.POLYPHEN2_URL,target:"_blank"},"PolyPhen-2")," ","(Polymorphism Phenotyping v2) is a tool which predicts possible impact of an amino acid substitution on the structure and function of a human protein using straightforward physical and comparative considerations.")}}]),t}();function Ge(e){e.querySelector(".rc-tooltip-arrow").style.left="10px"}var Ve=function(){function e(){je(this,e)}return Ne(e,null,[{key:"headerRender",value:function(e){var t=r.createElement("div",{className:"rc-tooltip-arrow-inner"});return r.createElement("div",null,e,r.createElement("br",null),r.createElement("div",{style:{height:14}},xe&&r.createElement(l.d,{overlay:r.createElement(Le,{active:"mutationAssessor"}),placement:"topLeft",trigger:["hover","focus"],arrowContent:t,destroyTooltipOnHide:!0,onPopupAlign:Ge},r.createElement("span",{style:{display:"inline-block",width:22}},r.createElement("img",{height:14,width:14,src:n(827),alt:"Sift"}))),r.createElement(l.d,{overlay:r.createElement(Le,{active:"sift"}),placement:"topLeft",trigger:["hover","focus"],arrowContent:t,destroyTooltipOnHide:!0,onPopupAlign:Ge},r.createElement("span",{style:{display:"inline-block",width:22}},r.createElement("img",{height:14,width:14,src:n(861),alt:"SIFT"}))),r.createElement(l.d,{overlay:r.createElement(Le,{active:"polyPhen2"}),placement:"topLeft",trigger:["hover","focus"],arrowContent:t,destroyTooltipOnHide:!0,onPopupAlign:Ge},r.createElement("span",{style:{display:"inline-block",width:22}},r.createElement("img",{height:14,width:14,src:n(862),alt:"PolyPhen-2"})))))}},{key:"getData",value:function(t,n,r){var o=e.getDataFromCache(t,n),i=e.getDataFromCache(t,r),a=o?this.getSiftData(o.data):void 0,s=o?this.getPolyphenData(o.data):void 0;return{mutationAssessor:i?this.getMutationAssessorData(i.data):void 0,siftScore:a&&a.siftScore,siftPrediction:a&&a.siftPrediction,polyPhenScore:s&&s.polyPhenScore,polyPhenPrediction:s&&s.polyPhenPrediction}}},{key:"getSiftData",value:function(e){var t=void 0,n=void 0;return e&&!a.isEmpty(e.transcript_consequences)&&(t=e.transcript_consequences[0].sift_score,n=e.transcript_consequences[0].sift_prediction),{siftScore:t,siftPrediction:n}}},{key:"getPolyphenData",value:function(e){var t=void 0,n=void 0;return e&&!a.isEmpty(e.transcript_consequences)&&(t=e.transcript_consequences[0].polyphen_score,n=e.transcript_consequences[0].polyphen_prediction),{polyPhenScore:t,polyPhenPrediction:n}}},{key:"getMutationAssessorData",value:function(e){return e&&e.mutation_assessor?e.mutation_assessor.annotation:void 0}},{key:"renderFunction",value:function(t,n,o){var i=e.getDataFromCache(t,n),a=e.getDataFromCache(t,o);return r.createElement("div",null,xe&&e.makeFunctionalImpactViz(a,Te.MUTATION_ASSESSOR),e.makeFunctionalImpactViz(i,Te.SIFT),e.makeFunctionalImpactViz(i,Te.POLYPHEN2))}},{key:"download",value:function(t,n,r){if(n||r){var o=e.getData(t,n,r);if(o)return["MutationAssessor: ".concat(le.download(o.mutationAssessor)),"SIFT: ".concat(ge.download(o.siftScore,o.siftPrediction)),"Polyphen-2: ".concat(ke.download(o.polyPhenScore,o.polyPhenPrediction))].join(";")}return""}},{key:"getDataFromCache",value:function(e,t){return 0!==e.length&&t?t.get(e[0]):null}},{key:"makeFunctionalImpactViz",value:function(t,n){var o=null;if(null===t)o=l.o.LOADING;else if("error"===t.status)o=l.o.ERROR;else if(null===t.data)o=l.o.NA;else{var i;switch(n){case Te.MUTATION_ASSESSOR:return i=e.getMutationAssessorData(t.data),r.createElement(le,{mutationAssessor:i});case Te.SIFT:return i=e.getSiftData(t.data),r.createElement(ge,{siftScore:i.siftScore,siftPrediction:i.siftPrediction});case Te.POLYPHEN2:return i=e.getPolyphenData(t.data),r.createElement(ke,{polyPhenScore:i.polyPhenScore,polyPhenPrediction:i.polyPhenPrediction})}}if(null!==o)return o===l.o.LOADING?r.createElement(Q.Circle,{size:22,scaleEnd:.5,scaleStart:.2,color:"#aaa",className:"pull-left"}):r.createElement(l.p,{status:o})}}]),e}();function Be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fe(e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function He(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ue(e,t){return!t||"object"!==Fe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function We(e){return(We=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ze(e,t)}function ze(e,t){return(ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Qe=function(e){function t(){return He(this,t),Ue(this,We(t).apply(this,arguments))}return qe(t,s["b"]),t}(),Ke=function(e){function t(e){var n;return He(this,t),(n=Ue(this,We(t).call(this,e))).state={},n}var n,o,i;return qe(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=this.props,n=e.data,o=e.columns,i=e.initialSortColumn,a=e.initialSortDirection,s=e.initialItemsPerPage,l=n.length>(this.props.initialItemsPerPage||t.defaultProps.initialItemsPerPage);return r.createElement("div",{className:"cbioportal-frontend"},r.createElement(Qe,{data:n,columns:o||t.defaultProps.columns,initialSortColumn:i,initialSortDirection:a,initialItemsPerPage:s,showCopyDownload:!1,showColumnVisibility:!1,showFilter:!1,showPagination:l,showPaginationAtTop:!0,paginationProps:{showMoreButton:!1}}))}}])&&Be(n.prototype,o),i&&Be(n,i),t}();Ke.defaultProps={data:[],columns:[{name:"COSMIC ID",order:1,render:function(e){return r.createElement("span",null,r.createElement("a",{href:"http://cancer.sanger.ac.uk/cosmic/mutation/overview?id=".concat(e.cosmicMutationId),target:"_blank"},e.cosmicMutationId))},sortBy:function(e){return e.cosmicMutationId}},{name:"Protein Change",order:2,render:function(e){return r.createElement("span",null,e.proteinChange)},sortBy:function(e){return Object(x.h)(e.proteinChange)}},{name:"Occurrence",order:3,render:function(e){return r.createElement("span",null,e.count)},sortBy:function(e){return e.count}}],initialSortColumn:"Occurrence",initialSortDirection:"desc",initialItemsPerPage:10};var Ye=n(954),Xe=n.n(Ye),Ze=n(804),Je=n.n(Ze);function $e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function et(e){e.querySelector(".rc-tooltip-arrow").style.left="10px"}var tt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"getData",value:function(t,n){var r=null;if(t&&n){var o=t[0],i=n[o.keyword];if(i){var a=e.extractPosition(o.proteinChange);r=i.filter(function(t){var n=e.extractPosition(t.proteinChange);return a&&n&&a===n})}}return r}},{key:"extractPosition",value:function(e){var t=Object(x.G)(e);return t?t.start:null}},{key:"getSortValue",value:function(t,n){var r=e.getData(t,n),o=null;return r&&(o=r.length>0?a.reduce(a.map(r,"count"),function(e,t){return e+t},0):0),0===o&&(o=null),o}},{key:"getDownloadValue",value:function(t,n){var r=e.getSortValue(t,n);return r?"".concat(r):""}},{key:"renderFunction",value:function(t,n){var o,i=e.getData(t,n),s=-1,u="",c=null;return i&&i.length>0&&(c=function(){return r.createElement("span",{className:Xe.a["cosmic-table"]},r.createElement("b",null,s)," occurrences of ",r.createElement("b",null,i[0].keyword)," ","mutations in COSMIC",r.createElement(Ke,{data:i}))},u=(s=a.reduce(a.map(i,"count"),function(e,t){return e+t},0)).toString()),o=r.createElement("div",{className:Je.a["integer-data"]},u),c&&(o=r.createElement(l.d,{overlay:c,placement:"topLeft",onPopupAlign:et,trigger:["hover","focus"],destroyTooltipOnHide:!0},o)),o}}],(n=null)&&$e(t.prototype,n),o&&$e(t,o),e}(),nt=n(863);function rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ot=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"makeRenderFunction",value:function(e){return Object(nt.a)(function(t){var n=e.props.mutationCountCache;return n?n.get({sampleId:t[0].sampleId,studyId:t[0].studyId}):{status:"error",data:null}},function(e){return r.createElement("div",{className:Je.a["integer-data"]},e.value)},"Mutation count not available for this sample.")}},{key:"sortBy",value:function(e,t){var n=null;if(t){var r=t.get({sampleId:e[0].sampleId,studyId:e[0].studyId});n=r&&r.data?parseInt(r.data.value):null}else n=null;return n}},{key:"download",value:function(t,n){var r=e.sortBy(t,n);return r?"".concat(r):""}}],(n=null)&&rt(t.prototype,n),o&&rt(t,o),e}(),it=n(864),at=n(955),st=n.n(at);function lt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ut=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"getData",value:function(e){var t=null;return e.length>0&&(t=e[0].validationStatus),t}},{key:"sortValue",value:function(t){return e.getData(t)}},{key:"download",value:function(t){return e.getData(t)||""}},{key:"renderFunction",value:function(t){var n,o=e.getData(t),i=!1;if(o){var a=e.VALIDATION_STATUS_FORMAT[o.toLowerCase()];a?(n=r.createElement("span",{className:st.a[a.className]},a.text),i=!0):n=r.createElement("span",{className:st.a.other},o)}else n=r.createElement("span",null);return i&&(n=r.createElement(l.d,{overlay:r.createElement("span",null,o),placement:"right"},n)),n}},{key:"VALIDATION_STATUS_FORMAT",get:function(){var e={text:"U",className:"unknown",tooltip:"Unknown"},t={text:"V",className:"valid",tooltip:"Valid"};return{valid:t,validated:t,wildtype:{text:"W",className:"wildtype",tooltip:"Wildtype"},unknown:e,not_tested:e,"not tested":e,none:e,na:e,"n/a":e}}}],(n=null)&&lt(t.prototype,n),o&&lt(t,o),e}();function ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var pt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"getStudy",value:function(e,t,n){if(!t||!n)return null;var r=t[e[0].molecularProfileId];return r&&n[r.studyId]||null}},{key:"renderFunction",value:function(t,n,o){var i=e.getStudy(t,n,o);return i?r.createElement("a",{href:Object(u.B)(i.studyId),target:"_blank"},r.createElement(l.q,{text:i.name,tooltip:r.createElement("div",{style:{maxWidth:300},dangerouslySetInnerHTML:{__html:"".concat(i.name,": ").concat(i.description)}}),maxLength:16})):r.createElement("span",null)}},{key:"getTextValue",value:function(t,n,r){var o=e.getStudy(t,n,r);return o?o.name:""}},{key:"filter",value:function(t,n,r,o){var i=e.getStudy(t,r,o);return!!i&&i.name.toUpperCase().indexOf(n)>-1}}],(n=null)&&ct(t.prototype,n),o&&ct(t,o),e}(),dt=n(36);function ft(){return(ft=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var mt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"sortValue",value:function(e,t,n,r,o,i,a,s,l){var u=Object(dt.I)(e?e[0]:void 0,t,n,r,o,i,a,s,l);return Object(dt.v)(u)}},{key:"download",value:function(e,t,n,r,o,i,a,s,l){var u=Object(dt.I)(e?e[0]:void 0,t,n,r,o,i,a,s,l);return["OncoKB: ".concat(Object(dt.T)(u.oncoKbIndicator)),"CIViC: ".concat(Object(dt.y)(u.civicEntry)),"MyCancerGenome: ".concat(Object(dt.R)(u.myCancerGenomeLinks)),"CancerHotspot: ".concat(u.isHotspot?"yes":"no"),"3DHotspot: ".concat(u.is3dHotspot?"yes":"no")].join(";")}},{key:"renderFunction",value:function(e,t){return r.createElement(dt.a,ft({mutation:e?e[0]:void 0},t))}}],(n=null)&&ht(t.prototype,n),o&&ht(t,o),e}(),yt=n(865);function gt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var bt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"renderFunction",value:function(t,n,o){var i=e.getGenomeNexusDataFromCache(t,n);return r.createElement("div",null,r.createElement("span",null,e.getHgvscDataViz(i,o)))}},{key:"getGenomeNexusDataFromCache",value:function(e,t){return 0!==e.length&&t?t.get(e[0]):null}},{key:"getHgvscDataViz",value:function(t,n){var o=null;if(null===t)o=l.o.LOADING;else if("error"===t.status)o=l.o.ERROR;else{if(null!==t.data){var i=e.getData(t.data,n);return null==i?i:r.createElement("span",{style:{display:"inline-block",float:"right"}},i)}o=l.o.NA}if(null!==o)return o===l.o.LOADING?r.createElement(Q.Circle,{size:18,scaleEnd:.5,scaleStart:.2,color:"#aaa",className:"pull-right"}):r.createElement(l.p,{status:o})}},{key:"getData",value:function(e,t){if(!e)return null;var n=e.annotation_summary.transcriptConsequenceSummary.hgvsc;if(t){var r=e.annotation_summary.transcriptConsequenceSummaries.find(function(e){return e.transcriptId===t});n=r?r.hgvsc:null}return n}},{key:"download",value:function(t,n,r){var o=e.getGenomeNexusDataFromCache(t,n),i=o&&e.getData(o.data,r);return i||""}},{key:"getSortValue",value:function(t,n,r){var o=e.getGenomeNexusDataFromCache(t,n);if(o){var i=e.getData(o.data,r);return null==i?null:parseInt(i.split("c.")[1])}return null}}],(n=null)&&gt(t.prototype,n),o&&gt(t,o),e}(),vt=n(44),_t=n(957),St=n.n(_t);function Et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var wt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"renderFunction",value:function(t,n){return e.getHgvsgDataViz(t[0],n)}},{key:"getHgvsgDataViz",value:function(t,n){var o=e.getData(t);if(o){var i=n(o);return r.createElement(l.d,{placement:"topLeft",overlay:r.createElement("div",null,o,r.createElement("br",null),"Click to see this variant on  ",r.createElement("a",{href:i,target:"_blank",rel:"noopener noreferrer"},"Genome Nexus",r.createElement("div",{className:St.a["genome-nexus-logo"]})))},r.createElement("span",{className:St.a["hgvsg-data"]},r.createElement("a",{href:i,target:"_blank",rel:"noopener noreferrer"},o," ",r.createElement("i",{className:"fa fa-external-link"}))))}return r.createElement("span",null)}},{key:"getData",value:function(e){return Object(vt.e)(e)}},{key:"download",value:function(t){var n=e.getData(t[0]);return n||""}},{key:"getSortValue",value:function(t){return e.getData(t[0])}}],(n=null)&&Et(t.prototype,n),o&&Et(t,o),e}();function Ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ct=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"renderFunction",value:function(e,t,n){return r.createElement("span",{"data-test":"gnomad-column","data-test2":e[0].sampleId},r.createElement(dt.l,{className:"",mutation:e[0],indexedVariantAnnotations:t,indexedMyVariantInfoAnnotations:n}))}},{key:"getData",value:function(e,t){return Object(x.E)(e[0],t?t.result:void 0)}},{key:"getSortValue",value:function(t,n){var r=e.getData(t,n);return Object(dt.L)(r)}},{key:"download",value:function(t,n){var r=e.getData(t,n);return Object(dt.K)(r)}}],(n=null)&&Ot(t.prototype,n),o&&Ot(t,o),e}();function kt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Tt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"renderFunction",value:function(e,t,n){return r.createElement("div",{"data-test":"clinvar-data"},r.createElement(dt.c,{className:Je.a["integer-data"],mutation:e[0],indexedVariantAnnotations:t,indexedMyVariantInfoAnnotations:n}))}},{key:"getData",value:function(e,t){return Object(x.E)(e[0],t?t.result:void 0)}},{key:"download",value:function(t,n){var r=e.getData(t,n);return Object(dt.A)(r)}},{key:"getSortValue",value:function(t,n){var r=e.getData(t,n);return Object(dt.B)(r)}}],(n=null)&&kt(t.prototype,n),o&&kt(t,o),e}(),Pt=n(6);function xt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var At=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"renderFunction",value:function(e,t,n){return r.createElement("div",{"data-test":"dbsnp-data"},r.createElement(dt.g,{className:"",mutation:e[0],indexedVariantAnnotations:t,indexedMyVariantInfoAnnotations:n}))}},{key:"getData",value:function(e,t){return Object(x.E)(e[0],t?t.result:void 0)}},{key:"download",value:function(t,n){var r=e.getData(t,n);return Object(dt.C)(r)}},{key:"getSortValue",value:function(t,n){var r=e.getData(t,n);return Object(dt.D)(r)}},{key:"filter",value:function(t,n,r){var o=e.getSortValue(t,r);return null!==o&&o.toUpperCase().includes(n)}}],(n=null)&&xt(t.prototype,n),o&&xt(t,o),e}(),jt=n(943);function It(e){return Object(vt.m)(e,"ascnMethod")?e.alleleSpecificCopyNumber.ascnMethod:""}var Nt=n(945),Mt=n(821),Dt=n(946);function Rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gt(e,t){return!t||"object"!==Ht(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vt(e){return(Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ft(e,t)}function Ft(e,t){return(Ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ht(e){return(Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",function(){return Ut});var Ut,Wt=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Ht(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};!function(e){e[e.STUDY=0]="STUDY",e[e.SAMPLE_ID=1]="SAMPLE_ID",e[e.SAMPLES=2]="SAMPLES",e[e.GENE=3]="GENE",e[e.PROTEIN_CHANGE=4]="PROTEIN_CHANGE",e[e.CHROMOSOME=5]="CHROMOSOME",e[e.START_POS=6]="START_POS",e[e.END_POS=7]="END_POS",e[e.REF_ALLELE=8]="REF_ALLELE",e[e.VAR_ALLELE=9]="VAR_ALLELE",e[e.MUTATION_STATUS=10]="MUTATION_STATUS",e[e.VALIDATION_STATUS=11]="VALIDATION_STATUS",e[e.MUTATION_TYPE=12]="MUTATION_TYPE",e[e.VARIANT_TYPE=13]="VARIANT_TYPE",e[e.CLONAL=14]="CLONAL",e[e.CANCER_CELL_FRACTION=15]="CANCER_CELL_FRACTION",e[e.EXPECTED_ALT_COPIES=16]="EXPECTED_ALT_COPIES",e[e.CENTER=17]="CENTER",e[e.TUMOR_ALLELE_FREQ=18]="TUMOR_ALLELE_FREQ",e[e.NORMAL_ALLELE_FREQ=19]="NORMAL_ALLELE_FREQ",e[e.FUNCTIONAL_IMPACT=20]="FUNCTIONAL_IMPACT",e[e.ANNOTATION=21]="ANNOTATION",e[e.HGVSG=22]="HGVSG",e[e.COSMIC=23]="COSMIC",e[e.COPY_NUM=24]="COPY_NUM",e[e.ASCN_COPY_NUM=25]="ASCN_COPY_NUM",e[e.ASCN_METHOD=26]="ASCN_METHOD",e[e.MRNA_EXPR=27]="MRNA_EXPR",e[e.COHORT=28]="COHORT",e[e.REF_READS_N=29]="REF_READS_N",e[e.VAR_READS_N=30]="VAR_READS_N",e[e.REF_READS=31]="REF_READS",e[e.VAR_READS=32]="VAR_READS",e[e.CANCER_TYPE=33]="CANCER_TYPE",e[e.NUM_MUTATIONS=34]="NUM_MUTATIONS",e[e.EXON=35]="EXON",e[e.HGVSC=36]="HGVSC",e[e.GNOMAD=37]="GNOMAD",e[e.CLINVAR=38]="CLINVAR",e[e.SELECTED=39]="SELECTED",e[e.DBSNP=40]="DBSNP",e[e.GENE_PANEL=41]="GENE_PANEL"}(Ut||(Ut={}));var qt=function(e){function t(){return Lt(this,t),Gt(this,Vt(t).apply(this,arguments))}return Bt(t,s["b"]),t}();function zt(e,t,n){var o=Qt(e,t);return r.createElement("div",{className:Y()(n?Je.a["integer-data"]:void 0)},o)}function Qt(e,t){var n="";return e.length>0&&e[0].hasOwnProperty(t)&&(n=e[0][t]),n}function Kt(e,t,n){return e.length>0&&e.reduce(function(e,r){var o=r[t];return o?e||o.toUpperCase().includes(n):e},!1)}var Yt=function(e){function t(e){var n;return Lt(this,t),(n=Gt(this,Vt(t).call(this,e))).table=null,n._columns={},n.generateColumns(),n}var n,o,i;return Bt(t,r["Component"]),n=t,(o=[{key:"tableRef",value:function(e){this.table=e}},{key:"resolveTumorType",value:function(e){if(this.props.uniqueSampleKeyToTumorType)return this.props.uniqueSampleKeyToTumorType[e.uniqueSampleKey];if(this.props.studyIdToStudy){var t=this.props.studyIdToStudy[e.studyId];if("mixed"!==t.cancerTypeId)return t.cancerType.name}return"Unknown"}},{key:"generateColumns",value:function(){var e=this;this._columns={},this._columns[Ut.STUDY]={name:"Study",render:function(t){return pt.renderFunction(t,e.props.molecularProfileIdToMolecularProfile,e.props.studyIdToStudy)},download:function(t){return pt.getTextValue(t,e.props.molecularProfileIdToMolecularProfile,e.props.studyIdToStudy)},sortBy:function(t){return pt.getTextValue(t,e.props.molecularProfileIdToMolecularProfile,e.props.studyIdToStudy)},filter:function(t,n,r){return pt.filter(t,r,e.props.molecularProfileIdToMolecularProfile,e.props.studyIdToStudy)},visible:!1},this._columns[Ut.SAMPLE_ID]={name:"Sample ID",render:function(t){return p.renderFunction(t,e.props.molecularProfileIdToMolecularProfile)},download:p.getTextValue,sortBy:p.getTextValue,filter:function(e,t,n){return Kt(e,"sampleId",n)},visible:!0},this._columns[Ut.TUMOR_ALLELE_FREQ]={name:"Allele Freq (T)",render:d.a.renderFunction,headerRender:function(e){return r.createElement("span",{style:{display:"inline-block",maxWidth:55}},e)},download:d.a.getTextValue,sortBy:d.a.getSortValue,tooltip:r.createElement("span",null,"Variant allele frequency in the tumor sample"),visible:!0},this._columns[Ut.NORMAL_ALLELE_FREQ]={name:"Allele Freq (N)",render:h.renderFunction,headerRender:function(e){return r.createElement("span",{style:{display:"inline-block",maxWidth:55}},e)},download:h.getTextValue,sortBy:h.getSortValue,tooltip:r.createElement("span",null,"Variant allele frequency in the normal sample"),visible:!1},this._columns[Ut.MRNA_EXPR]={name:"mRNA Expr.",render:function(t){return e.props.mrnaExprRankCache?m.a.renderFunction(t,e.props.mrnaExprRankCache):r.createElement("span",null)}},this._columns[Ut.COHORT]={name:"Cohort",render:function(t){return e.props.variantCountCache?S.renderFunction(t,e.props.mutSigData,e.props.variantCountCache):r.createElement("span",null)},sortBy:function(t){var n=e.props.variantCountCache;return n?S.getSortValue(t,n):0},tooltip:r.createElement("span",null,"Mutation frequency in cohort"),defaultSortDirection:"desc"},this._columns[Ut.COPY_NUM]={name:"Copy #",render:function(t){return e.props.discreteCNACache&&e.props.molecularProfileIdToMolecularProfile?w.renderFunction(t,e.props.molecularProfileIdToMolecularProfile,e.props.discreteCNACache):r.createElement("span",null)},sortBy:function(t){return e.props.discreteCNACache&&e.props.molecularProfileIdToMolecularProfile?w.getSortValue(t,e.props.molecularProfileIdToMolecularProfile,e.props.discreteCNACache):0},download:function(t){return e.props.discreteCNACache&&e.props.molecularProfileIdToMolecularProfile?w.getTextValue(t,e.props.molecularProfileIdToMolecularProfile,e.props.discreteCNACache):""},filter:function(t,n){return!(!e.props.discreteCNACache||!e.props.molecularProfileIdToMolecularProfile)&&w.filter(t,e.props.molecularProfileIdToMolecularProfile,e.props.discreteCNACache,n)},visible:w.isVisible(this.props.discreteCNACache)},this._columns[Ut.REF_READS_N]={name:"Ref Reads (Normal)",render:function(e){return O.a.renderFunction(e,[e[0].sampleId],"normalRefCount")},download:function(e){return O.a.getTextValue(e,[e[0].sampleId],"normalRefCount")},sortBy:function(e){return e.map(function(e){return e.normalRefCount})},visible:!1,align:"right"},this._columns[Ut.VAR_READS_N]={name:"Variant Reads (Normal)",render:function(e){return O.a.renderFunction(e,[e[0].sampleId],"normalAltCount")},download:function(e){return O.a.getTextValue(e,[e[0].sampleId],"normalAltCount")},sortBy:function(e){return e.map(function(e){return e.normalAltCount})},visible:!1,align:"right"},this._columns[Ut.REF_READS]={name:"Ref Reads",render:function(e){return O.a.renderFunction(e,[e[0].sampleId],"tumorRefCount")},download:function(e){return O.a.getTextValue(e,[e[0].sampleId],"tumorRefCount")},sortBy:function(e){return e.map(function(e){return e.tumorRefCount})},visible:!1,align:"right"},this._columns[Ut.VAR_READS]={name:"Variant Reads",render:function(e){return O.a.renderFunction(e,[e[0].sampleId],"tumorAltCount")},download:function(e){return O.a.getTextValue(e,[e[0].sampleId],"tumorAltCount")},sortBy:function(e){return e.map(function(e){return e.tumorAltCount})},visible:!1,align:"right"},this._columns[Ut.START_POS]={name:"Start Pos",render:function(e){return zt(e,"startPosition",!0)},download:function(e){return Qt(e,"startPosition")},sortBy:function(e){return e.map(function(e){return e.startPosition})},visible:!1,align:"right"},this._columns[Ut.END_POS]={name:"End Pos",render:function(e){return zt(e,"endPosition",!0)},download:function(e){return Qt(e,"endPosition")},sortBy:function(e){return e.map(function(e){return e.endPosition})},visible:!1,align:"right"},this._columns[Ut.REF_ALLELE]={name:"Ref",render:function(e){return zt(e,"referenceAllele")},download:function(e){return Qt(e,"referenceAllele")},sortBy:function(e){return e.map(function(e){return e.referenceAllele})},visible:!1},this._columns[Ut.VAR_ALLELE]={name:"Var",render:function(e){return zt(e,"variantAllele")},download:function(e){return Qt(e,"variantAllele")},sortBy:function(e){return e.map(function(e){return e.variantAllele})},visible:!1},this._columns[Ut.MUTATION_STATUS]={name:"MS",tooltip:r.createElement("span",null,"Mutation Status"),render:N.renderFunction,download:N.download,sortBy:N.sortValue,filter:function(e,t,n){return Kt(e,"mutationStatus",n)},visible:!1},this._columns[Ut.VALIDATION_STATUS]={name:"VS",tooltip:r.createElement("span",null,"Validation Status"),render:ut.renderFunction,download:ut.download,sortBy:ut.sortValue,filter:function(e,t,n){return Kt(e,"validationStatus",n)},visible:!1},this._columns[Ut.CENTER]={name:"Center",render:function(e){return zt(e,"center")},download:function(e){return Qt(e,"center")},sortBy:function(e){return e.map(function(e){return e.center})},filter:function(e,t,n){return Kt(e,"center",n)},visible:!1},this._columns[Ut.GENE]={name:"Gene",render:function(e){return k.renderFunction(e)},download:function(e){return k.getTextValue(e)},sortBy:function(e){return k.getSortValue(e)},filter:function(e,t,n){return k.getTextValue(e).toUpperCase().includes(n)}},this._columns[Ut.CHROMOSOME]={name:"Chromosome",render:function(e){return r.createElement("div",{className:Je.a["integer-data"]},P.getData(e))},download:function(e){return P.getData(e)||""},sortBy:function(e){return P.getSortValue(e)},filter:function(e,t,n){return(P.getData(e)+"").toUpperCase().includes(n)},visible:!1,align:"right"},this._columns[Ut.PROTEIN_CHANGE]={name:"Protein Change",render:L.renderWithMutationStatus,download:L.getTextValue,sortBy:function(e){return L.getSortValue(e)},filter:L.getFilterValue},this._columns[Ut.MUTATION_TYPE]={name:"Mutation Type",render:H.renderFunction,download:H.getTextValue,sortBy:function(e){return H.getDisplayValue(e)},filter:function(e,t,n){return H.getDisplayValue(e).toUpperCase().includes(n)}},this._columns[Ut.VARIANT_TYPE]={name:"Variant Type",render:z.renderFunction,download:z.getTextValue,sortBy:function(e){return z.getDisplayValue(e)},filter:function(e,t,n){return z.getDisplayValue(e).toUpperCase().includes(n)},visible:!1},this._columns[Ut.ASCN_METHOD]={name:"ASCN Method",tooltip:r.createElement("span",null,"Allele Specific Copy Number Method"),render:function(e){return r.createElement(r.Fragment,null,r.createElement("span",null,It(e[0])))},sortBy:function(e){return It(e[0])},download:function(e){return e.map(function(e){return It(e)})},visible:!1},this._columns[Ut.CANCER_CELL_FRACTION]=Object(Nt.a)(),this._columns[Ut.CLONAL]=Object(Mt.c)(),this._columns[Ut.ASCN_COPY_NUM]=Object(jt.a)(void 0,this.props.sampleIdToClinicalDataMap),this._columns[Ut.EXPECTED_ALT_COPIES]=Object(Dt.a)(),this._columns[Ut.FUNCTIONAL_IMPACT]={name:"Functional Impact",render:function(t){return e.props.genomeNexusCache||e.props.genomeNexusMutationAssessorCache?Ve.renderFunction(t,e.props.genomeNexusCache,e.props.genomeNexusMutationAssessorCache):r.createElement("span",null)},download:function(t){return Ve.download(t,e.props.genomeNexusCache,e.props.genomeNexusMutationAssessorCache)},headerRender:Ve.headerRender,visible:!1,shouldExclude:function(){return!e.props.enableFunctionalImpact}},this._columns[Ut.COSMIC]={name:"COSMIC",render:function(t){return tt.renderFunction(t,e.props.cosmicData)},sortBy:function(t){return tt.getSortValue(t,e.props.cosmicData)},download:function(t){return tt.getDownloadValue(t,e.props.cosmicData)},tooltip:r.createElement("span",null,"COSMIC occurrences"),defaultSortDirection:"desc",align:"right"},this._columns[Ut.ANNOTATION]={name:"Annotation",render:function(t){return mt.renderFunction(t,{hotspotData:e.props.hotspotData,myCancerGenomeData:e.props.myCancerGenomeData,oncoKbData:e.props.oncoKbData,oncoKbCancerGenes:e.props.oncoKbCancerGenes,usingPublicOncoKbInstance:e.props.usingPublicOncoKbInstance,pubMedCache:e.props.pubMedCache,civicGenes:e.props.civicGenes,civicVariants:e.props.civicVariants,enableCivic:e.props.enableCivic,enableOncoKb:e.props.enableOncoKb,enableMyCancerGenome:e.props.enableMyCancerGenome,enableHotspot:e.props.enableHotspot,userEmailAddress:e.props.userEmailAddress,resolveTumorType:e.resolveTumorType})},filter:function(t,n,r){var o=!1;switch(r){case"HOTSPOT":o=Object(dt.I)(t?t[0]:void 0,e.props.oncoKbCancerGenes,e.props.hotspotData,e.props.myCancerGenomeData,e.props.oncoKbData,e.props.usingPublicOncoKbInstance,e.props.civicGenes,e.props.civicVariants,e.resolveTumorType).isHotspot;break;case"ONCOGENIC":if(e.props.oncoKbData&&e.props.oncoKbData.result&&!(e.props.oncoKbData.result instanceof Error)&&e.props.oncoKbData.result.indicatorMap){var i=Object(x.v)(t[0].entrezGeneId,null,t[0].proteinChange,t[0].mutationType),a=e.props.oncoKbData.result.indicatorMap[i];a&&(o=a.oncogenic.toLowerCase().trim().includes("oncogenic"))}}return o},download:function(t){return mt.download(t,e.props.oncoKbCancerGenes,e.props.hotspotData,e.props.myCancerGenomeData,e.props.oncoKbData,e.props.usingPublicOncoKbInstance,e.props.civicGenes,e.props.civicVariants,e.resolveTumorType)},sortBy:function(t){return mt.sortValue(t,e.props.oncoKbCancerGenes,e.props.hotspotData,e.props.myCancerGenomeData,e.props.oncoKbData,e.props.usingPublicOncoKbInstance,e.props.civicGenes,e.props.civicVariants,e.resolveTumorType)}},this._columns[Ut.HGVSG]={name:"HGVSg",render:function(t){return wt.renderFunction(t,e.props.generateGenomeNexusHgvsgUrl)},download:function(e){return wt.download(e)},sortBy:function(e){return wt.getSortValue(e)},visible:!1,align:"left"},this._columns[Ut.CANCER_TYPE]={name:"Cancer Type",render:function(t){return it.a.render(t,e.props.uniqueSampleKeyToTumorType)},download:function(t){return it.a.download(t,e.props.uniqueSampleKeyToTumorType)},sortBy:function(t){return it.a.sortBy(t,e.props.uniqueSampleKeyToTumorType)},filter:function(t,n,r){return it.a.filter(t,r,e.props.uniqueSampleKeyToTumorType)},tooltip:r.createElement("span",null,"Cancer Type")},this._columns[Ut.NUM_MUTATIONS]={name:"# Mut in Sample",render:ot.makeRenderFunction(this),headerRender:function(e){return r.createElement("span",{style:{display:"inline-block",maxWidth:55}},e)},sortBy:function(t){return ot.sortBy(t,e.props.mutationCountCache)},download:function(t){return ot.download(t,e.props.mutationCountCache)},tooltip:r.createElement("span",null,"Total number of nonsynonymous mutations in the sample"),align:"right"},this._columns[Ut.EXON]={name:"Exon",render:function(t){return e.props.genomeNexusCache?yt.a.renderFunction(t,e.props.genomeNexusCache):r.createElement("span",null)},download:function(t){return yt.a.download(t,e.props.genomeNexusCache)},sortBy:function(t){return yt.a.getSortValue(t,e.props.genomeNexusCache)},visible:!1,align:"right"},this._columns[Ut.HGVSC]={name:"HGVSc",render:function(t){return e.props.genomeNexusCache?bt.renderFunction(t,e.props.genomeNexusCache,e.props.selectedTranscriptId):r.createElement("span",null)},download:function(t){return bt.download(t,e.props.genomeNexusCache,e.props.selectedTranscriptId)},sortBy:function(t){return bt.getSortValue(t,e.props.genomeNexusCache,e.props.selectedTranscriptId)},visible:!1,align:"right"},this._columns[Ut.GNOMAD]={name:"gnomAD",render:function(t){return Ct.renderFunction(t,e.props.indexedVariantAnnotations,e.props.indexedMyVariantInfoAnnotations)},sortBy:function(t){return Ct.getSortValue(t,e.props.indexedMyVariantInfoAnnotations)},download:function(t){return Ct.download(t,e.props.indexedMyVariantInfoAnnotations)},tooltip:r.createElement("span",null,r.createElement("a",{href:"https://gnomad.broadinstitute.org/"},"gnomAD")," ","population allele frequencies. Overall population allele frequency is shown. Hover over a frequency to see the frequency for each specific population."),defaultSortDirection:"desc",visible:!1,align:"left"},this._columns[Ut.CLINVAR]={name:"ClinVar ID",render:function(t){return Tt.renderFunction(t,e.props.indexedVariantAnnotations,e.props.indexedMyVariantInfoAnnotations)},sortBy:function(t){return Tt.getSortValue(t,e.props.indexedMyVariantInfoAnnotations)},download:function(t){return Tt.download(t,e.props.indexedMyVariantInfoAnnotations)},tooltip:r.createElement("span",null,r.createElement("a",{href:"https://www.ncbi.nlm.nih.gov/clinvar/",target:"_blank"},"ClinVar")," aggregates information about genomic variation and its relationship to human health."),defaultSortDirection:"desc",visible:!1,align:"right"},this._columns[Ut.DBSNP]={name:"dbSNP",render:function(t){return At.renderFunction(t,e.props.indexedVariantAnnotations,e.props.indexedMyVariantInfoAnnotations)},sortBy:function(t){return At.getSortValue(t,e.props.indexedMyVariantInfoAnnotations)},download:function(t){return At.download(t,e.props.indexedMyVariantInfoAnnotations)},filter:function(t,n,r){return At.filter(t,r,e.props.indexedMyVariantInfoAnnotations)},tooltip:r.createElement("span",{style:{maxWidth:370,display:"block",textAlign:"left"}},"The Single Nucleotide Polymorphism Database (",r.createElement("a",{href:"https://www.ncbi.nlm.nih.gov/snp/",target:"_blank"},"dbSNP"),") is a free public archive for genetic variation within and across different species.",r.createElement("br",null),"NOTE: Currently only SNPs, single base deletions and insertions are supported."),defaultSortDirection:"desc",visible:!1,align:"right"}}},{key:"render",value:function(){return r.createElement(qt,{ref:this.tableRef,columns:this.columns,data:this.props.data,dataStore:this.props.dataStore,downloadDataFetcher:this.props.downloadDataFetcher,initialItemsPerPage:this.props.initialItemsPerPage,initialSortColumn:this.props.initialSortColumn,initialSortDirection:this.props.initialSortDirection,itemsLabel:this.props.itemsLabel,itemsLabelPlural:this.props.itemsLabelPlural,paginationProps:this.props.paginationProps,showCountHeader:this.props.showCountHeader,columnVisibility:this.props.columnVisibility,columnVisibilityProps:this.props.columnVisibilityProps,onRowClick:this.props.onRowClick,onRowMouseEnter:this.props.onRowMouseEnter,onRowMouseLeave:this.props.onRowMouseLeave})}},{key:"orderedColumns",get:function(){var e=this,t=this.props.columns||[];return a.sortBy(t,function(t){var n=-1;return e._columns[t]&&e._columns[t].order&&(n=e._columns[t].order),n})}},{key:"columns",get:function(){var e=this;return this.orderedColumns.reduce(function(t,n){var r=e._columns[n];return!r||r.shouldExclude&&r.shouldExclude()||t.push(r),t},[])}}])&&Rt(n.prototype,o),i&&Rt(n,i),t}();Yt.defaultProps={initialItemsPerPage:25,showCountHeader:!0,paginationProps:{itemsPerPageOptions:[25,50,100]},initialSortColumn:"Annotation",initialSortDirection:"desc",itemsLabel:"Mutation",itemsLabelPlural:"Mutations",enableOncoKb:!0,enableMyCancerGenome:!0,enableHotspot:!0,enableCivic:!1},Wt([i.observable],Yt.prototype,"_columns",void 0),Wt([i.observable.ref],Yt.prototype,"table",void 0),Wt([Pt.default],Yt.prototype,"tableRef",null),Wt([Pt.default],Yt.prototype,"resolveTumorType",null),Wt([i.computed],Yt.prototype,"orderedColumns",null),Wt([i.computed],Yt.prototype,"columns",null),Yt=Wt([o.observer],Yt);t.b=Yt},function(e,t,n){"use strict";var r,o,i=n(0),a=n(1),s=n(44),l=n(3),u=n(16);function c(e){switch(e){case"2":return u.a;case"1":return u.c;case"0":return u.g;case"-1":return u.d;case"-2":return u.e;case"INDETERMINATE":return u.f;default:return u.b}}function p(e){switch(e){case"2":return u.a;case"1":return u.c;case"0":return u.f;case"-1":return u.d;case"-2":return u.e;case"INDETERMINATE":return"ASCN_LIGHTGREY";default:return u.b}}(o=r||(r={})).WGD="WGD",o.NA="NA",o.INDETERMINATE="INDETERMINATE",o.AMPBALANCED="Amp (Balanced)",o.AMPLOH="Amp (LOH)",o.AMP="Amp",o.CNLOHGAIN="CNLOH & Gain",o.CNLOHAFTER="CNLOH After",o.CNLOHBEFOREGAIN="CNLOH Before & Gain",o.CNLOHBEFORELOSS="CNLOH Before & Loss",o.CNLOHBEFORE="CNLOH Before",o.CNLOH="CNLOH",o.DIPLOID="Diploid",o.DOUBLELOSSAFTER="Double Loss After",o.GAIN="Gain",o.HETLOSS="Hetloss",o.HOMDEL="Homdel",o.LOSSGAIN="Loss & Gain",o.LOSSAFTER="Loss After",o.LOSSBEFOREAFTER="Loss Before & After",o.LOSSBEFORE="Loss Before",o.TETRAPLOID="Tetraploid";var d,f={"no WGD,0,0":r.HOMDEL,"no WGD,1,0":r.HETLOSS,"no WGD,2,0":r.CNLOH,"no WGD,3,0":r.CNLOHGAIN,"no WGD,4,0":r.CNLOHGAIN,"no WGD,5,0":r.AMPLOH,"no WGD,6,0":r.AMPLOH,"no WGD,1,1":r.DIPLOID,"no WGD,2,1":r.GAIN,"no WGD,3,1":r.GAIN,"no WGD,4,1":r.AMP,"no WGD,5,1":r.AMP,"no WGD,6,1":r.AMP,"no WGD,2,2":r.TETRAPLOID,"no WGD,3,2":r.AMP,"no WGD,4,2":r.AMP,"no WGD,5,2":r.AMP,"no WGD,6,2":r.AMP,"no WGD,3,3":r.AMPBALANCED,"no WGD,4,3":r.AMP,"no WGD,5,3":r.AMP,"no WGD,6,3":r.AMP,"WGD,0,0":r.HOMDEL,"WGD,1,0":r.LOSSBEFOREAFTER,"WGD,2,0":r.LOSSBEFORE,"WGD,3,0":r.CNLOHBEFORELOSS,"WGD,4,0":r.CNLOHBEFORE,"WGD,5,0":r.CNLOHBEFOREGAIN,"WGD,6,0":r.AMPLOH,"WGD,1,1":r.DOUBLELOSSAFTER,"WGD,2,1":r.LOSSAFTER,"WGD,3,1":r.CNLOHAFTER,"WGD,4,1":r.LOSSGAIN,"WGD,5,1":r.AMP,"WGD,6,1":r.AMP,"WGD,2,2":r.TETRAPLOID,"WGD,3,2":r.GAIN,"WGD,4,2":r.AMP,"WGD,5,2":r.AMP,"WGD,6,2":r.AMP,"WGD,3,3":r.AMPBALANCED,"WGD,4,3":r.AMP,"WGD,5,3":r.AMP,"WGD,6,3":r.AMP};function h(e){switch(e){case"2":case"1":case"0":case"-1":case"-2":case"INDETERMINATE":return d.OPAQUE;default:return d.TRANSPARENT}}!function(e){e[e.TRANSPARENT=0]="TRANSPARENT",e[e.OPAQUE=100]="OPAQUE"}(d||(d={}));var m=function(e){var t,n,o,a,s=(t=e.wgdValue,n=e.totalCopyNumberValue,o=e.minorCopyNumberValue,(a=[t,(Number(n)-Number(o)).toString(),o].join(","))in f?f[a].toLowerCase():r.NA);return i.createElement("span",{"data-test":"ascn-copy-number-tooltip"},e.sampleManager?i.createElement("span",null,e.sampleManager.getComponentForSample(e.sampleId,1,"")," "):null,i.createElement("span",null,s!==r.NA?i.createElement("span",null,i.createElement("b",null,s)," (".concat(e.wgdValue," with total copy number of ").concat(e.totalCopyNumberValue," and a minor copy number of ").concat(e.minorCopyNumberValue,")")):i.createElement("span",null,"Indeterminate sample")))},y=function(e){return i.createElement("svg",{width:"18",height:"20",className:"case-label-header"},e.wgdValue===r.WGD?i.createElement("svg",null,i.createElement("text",{x:"9",y:"5",dominantBaseline:"middle",fontWeight:"bold",textAnchor:"middle",fontSize:"7",fill:"black"},"WGD")):null,i.createElement("g",{transform:"translate(3,8)"},i.createElement("rect",{width:"11",height:"11",rx:"15%",ry:"15%",stroke:p(e.ascnCopyNumberValue),"stroke-width":"1",fill:c(e.ascnCopyNumberValue),opacity:h(e.ascnCopyNumberValue)}),i.createElement("svg",null,i.createElement("text",{x:"5.5",y:"6",dominantBaseline:"middle",textAnchor:"middle",fontSize:9,fill:(t=e.ascnCopyNumberValue,"0"===t?u.b:u.g)},"INDETERMINATE"===e.totalCopyNumberValue?"-":e.totalCopyNumberValue))));var t},g=function(e){return e.totalCopyNumberValue!==r.NA&&e.wgdValue!==r.NA?i.createElement(l.d,{overlay:i.createElement(m,e),placement:"left"},i.createElement("span",null,i.createElement(y,{wgdValue:e.wgdValue,totalCopyNumberValue:e.totalCopyNumberValue,ascnCopyNumberValue:e.ascnCopyNumberValue}))):i.createElement("span",null,i.createElement(y,{wgdValue:r.NA,totalCopyNumberValue:"",ascnCopyNumberValue:r.NA}))},b=n(36);function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return a.chain(e).keyBy("sampleId").mapValues(function(e){var n=function(e,t){return Object(s.m)(e,"ascnIntegerCopyNumber")?e.alleleSpecificCopyNumber.ascnIntegerCopyNumber:r.NA}(e);return n!==r.NA&&Object(s.m)(e,"totalCopyNumber")&&S(t,e.sampleId)!==r.NA&&c(n.toString())!==u.b?e.alleleSpecificCopyNumber.totalCopyNumber.toString():r.NA}).value()}function S(e,t){var n=e&&t in e?e[t].find(function(e){return"ASCN_WGD"===e.clinicalAttributeId}):void 0;return void 0!==n?n.value:r.NA}n.d(t,"a",function(){return E});var E=function(e,t,n){return{name:"Total Integer Copy #",render:function(r){return w.renderFunction(r,e||(r.length>0?[r[0].sampleId]:[]),t,n)},sortBy:function(n){return function(e,t,n){var r=_(e,void 0!==t?t.result:void 0);return n.filter(function(e){return r[e]}).map(function(e){return r[e]}).join(";")}(n,t,e||(n.length>0?[n[0].sampleId]:[]))},visible:!1}},w=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"renderFunction",value:function(e,t,n,o){var a={},l={},u={},c=!0,p=!1,d=void 0;try{for(var f,h=e[Symbol.iterator]();!(c=(f=h.next()).done);c=!0){var m=f.value;a[m.sampleId]=Object(s.m)(m,"totalCopyNumber")?m.alleleSpecificCopyNumber.totalCopyNumber.toString():Object(s.m)(m,"ascnMethod")?r.INDETERMINATE:r.NA,l[m.sampleId]=Object(s.m)(m,"minorCopyNumber")?m.alleleSpecificCopyNumber.minorCopyNumber.toString():Object(s.m)(m,"ascnMethod")?r.INDETERMINATE:r.NA,u[m.sampleId]=Object(s.m)(m,"ascnIntegerCopyNumber")?m.alleleSpecificCopyNumber.ascnIntegerCopyNumber.toString():Object(s.m)(m,"ascnMethod")?r.INDETERMINATE:r.NA}}catch(e){p=!0,d=e}finally{try{c||null==h.return||h.return()}finally{if(p)throw d}}return void 0===n||n.isError?Object(b.E)("Error fetching data"):n.isComplete?i.createElement("span",{"data-test":"ascn-copy-number-cell"},t.map(function(e,t){return i.createElement("span",{key:e,style:0===t?void 0:{marginLeft:5}},i.createElement(g,{sampleId:e,wgdValue:S(n.result,e),totalCopyNumberValue:a[e]?a[e]:r.NA,minorCopyNumberValue:l[e]?l[e]:r.NA,ascnCopyNumberValue:u[e]?u[e]:r.NA,sampleManager:o}))})):Object(b.Q)("pull-left")}}],(n=null)&&v(t.prototype,n),o&&v(t,o),e}()},function(e,t,n){"use strict";var r=n(0),o=n(1),i=n(96),a=n(9),s=n(2),l=n(144),u=n(871),c=n.n(u),p=n(5),d=n.n(p);function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var _,S=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":v(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};!function(e){e[e.TRACK_A=0]="TRACK_A",e[e.TRACK_B=1]="TRACK_B",e[e.NEITHER=2]="NEITHER",e[e.A_NOT_B=3]="A_NOT_B",e[e.B_NOT_A=4]="B_NOT_A",e[e.BOTH=5]="BOTH",e[e.LOG_ODDS_RATIO=6]="LOG_ODDS_RATIO",e[e.P_VALUE=7]="P_VALUE",e[e.Q_VALUE=8]="Q_VALUE",e[e.ASSOCIATION=9]="ASSOCIATION"}(_||(_={}));var E=function(e){function t(){return h(this,t),m(this,y(t).apply(this,arguments))}return g(t,i["b"]),t}(),w=function(e){function t(e){var n;return h(this,t),(n=m(this,y(t).call(this,e)))._columns={},n.generateColumns(),n}var n,i,a;return g(t,r["Component"]),n=t,(i=[{key:"generateColumns",value:function(){this._columns={},this._columns[_.TRACK_A]={name:"A",render:function(e){return r.createElement("span",null,r.createElement("b",null,e.trackA))},tooltip:r.createElement("span",null,"A"),filter:function(e,t,n){return e.trackA.toUpperCase().includes(n)},sortBy:function(e){return e.trackA},download:function(e){return e.trackA}},this._columns[_.TRACK_B]={name:"B",render:function(e){return r.createElement("span",null,r.createElement("b",null,e.trackB))},tooltip:r.createElement("span",null,"B"),filter:function(e,t,n){return e.trackB.toUpperCase().includes(n)},sortBy:function(e){return e.trackB},download:function(e){return e.trackB}},this._columns[_.NEITHER]={name:"Neither",render:function(e){return r.createElement("span",null,e.neitherCount)},tooltip:r.createElement("span",null,"Number of samples with alterations in neither A nor B"),sortBy:function(e){return e.neitherCount},download:function(e){return e.neitherCount.toString()}},this._columns[_.A_NOT_B]={name:"A Not B",render:function(e){return r.createElement("span",null,e.aNotBCount)},tooltip:r.createElement("span",null,"Number of samples with alterations in A but not in B"),sortBy:function(e){return e.aNotBCount},download:function(e){return e.aNotBCount.toString()}},this._columns[_.B_NOT_A]={name:"B Not A",render:function(e){return r.createElement("span",null,e.bNotACount)},tooltip:r.createElement("span",null,"Number of samples with alterations in B but not in A"),sortBy:function(e){return e.bNotACount},download:function(e){return e.bNotACount.toString()}},this._columns[_.BOTH]={name:"Both",render:function(e){return r.createElement("span",null,e.bothCount)},tooltip:r.createElement("span",null,"Number of samples with alterations in both A and B"),sortBy:function(e){return e.bothCount},download:function(e){return e.bothCount.toString()}},this._columns[_.LOG_ODDS_RATIO]={name:"Log2 Odds Ratio",render:function(e){return r.createElement("span",null,Object(l.b)(e.logOddsRatio))},tooltip:r.createElement("span",{style:{display:"inline-block",maxWidth:300}},"Quantifies how strongly the presence or absence of alterations in A are associated with the presence or absence of alterations in B in the selected samples. OR = (Neither * Both) / (A Not B * B Not A)"),sortBy:function(e){return e.logOddsRatio},download:function(e){return Object(l.b)(e.logOddsRatio)}},this._columns[_.P_VALUE]={name:"p-Value",render:function(e){return r.createElement("span",null,Object(l.c)(e.pValue))},tooltip:r.createElement("span",null,"Derived from one-sided Fisher Exact Test"),sortBy:function(e){return e.pValue},download:function(e){return Object(l.c)(e.pValue)}},this._columns[_.Q_VALUE]={name:"q-Value",render:function(e){return Object(l.d)(e.qValue)},tooltip:r.createElement("span",null,"Derived from Benjamini-Hochberg FDR correction procedure"),sortBy:function(e){return e.qValue},download:function(e){return Object(l.c)(e.qValue)}},this._columns[_.ASSOCIATION]={name:"Tendency",render:function(e){return r.createElement("div",{className:d()(c.a.Tendency,(t={},n=c.a.Significant,o=e.qValue<.05,n in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,t))},e.association);var t,n,o},tooltip:r.createElement("table",null,r.createElement("tr",null,r.createElement("td",null,"Log2 ratio ",">"," 0"),r.createElement("td",null,": Tendency towards co-occurrence")),r.createElement("tr",null,r.createElement("td",null,"Log2 ratio <= 0"),r.createElement("td",null,": Tendency towards mutual exclusivity")),r.createElement("tr",null,r.createElement("td",null,"q-Value < 0.05"),r.createElement("td",null,": Significant association"))),filter:function(e,t,n){return e.association.toUpperCase().includes(n)},sortBy:function(e){return e.association},download:function(e){return e.association}}}},{key:"render",value:function(){var e=o.sortBy(this._columns,function(e){return e.order});return r.createElement(E,{columns:e,data:this.props.data,initialItemsPerPage:50,initialSortColumn:this.props.initialSortColumn,paginationProps:{itemsPerPageOptions:[50]}})}}])&&f(n.prototype,i),a&&f(n,a),t}();w.defaultProps={columns:[_.TRACK_A,_.TRACK_B,_.NEITHER,_.A_NOT_B,_.B_NOT_A,_.BOTH,_.LOG_ODDS_RATIO,_.P_VALUE,_.Q_VALUE,_.ASSOCIATION],initialSortColumn:"q-Value"},S([s.observable],w.prototype,"_columns",void 0);var O=w=S([a.observer],w),C=n(15),k=n(66),T=n(294),P=n(295),x=n(292);function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var D=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":M(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},R=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=j(t).call(this,e))||"object"!==M(o)&&"function"!=typeof o?I(r):o).mutualExclusivityFilter=!0,n.coOccurenceFilter=!0,n.significantPairsFilter=!1,n.mutualExclusivityFilterChange=n.mutualExclusivityFilterChange.bind(I(n)),n.coOccurenceFilterChange=n.coOccurenceFilterChange.bind(I(n)),n.significantPairsFilterChange=n.significantPairsFilterChange.bind(I(n)),n}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,r["Component"]),n=t,(i=[{key:"mutualExclusivityFilterChange",value:function(){this.mutualExclusivityFilter=!this.mutualExclusivityFilter}},{key:"coOccurenceFilterChange",value:function(){this.coOccurenceFilter=!this.coOccurenceFilter}},{key:"significantPairsFilterChange",value:function(){this.significantPairsFilter=!this.significantPairsFilter}},{key:"render",value:function(){return this.props.isSampleAlteredMap.isPending?r.createElement(k.a,{isLoading:!0}):this.props.isSampleAlteredMap.isComplete?this.notEnoughDataError?r.createElement("div",{className:"tabMessageContainer"},r.createElement("div",{className:"alert alert-info"},this.notEnoughDataError),this.filteredTrackOqls.length>0&&r.createElement("div",{className:"alert alert-warning",role:"alert"},this.filteredTrackOqlsMessage),this.props.store&&[r.createElement(P.a,{store:this.props.store}),r.createElement(x.a,{store:this.props.store})]):r.createElement("div",{"data-test":"mutualExclusivityTabDiv"},this.props.store&&r.createElement("div",{className:"tabMessageContainer"},r.createElement(T.a,{className:"mutex-oql-status-banner",store:this.props.store,tabReflectsOql:!0}),this.filteredTrackOqls.length>0&&r.createElement("div",{className:"alert alert-warning",role:"alert"},this.filteredTrackOqlsMessage),r.createElement(P.a,{store:this.props.store}),r.createElement(x.a,{store:this.props.store})),Object(l.h)(this.data,o.size(this.isSampleAlteredFilteredMap)),r.createElement("div",{className:c.a.Checkboxes},r.createElement(C.Checkbox,{checked:this.mutualExclusivityFilter,onChange:this.mutualExclusivityFilterChange},"Mutual exclusivity"),r.createElement(C.Checkbox,{checked:this.coOccurenceFilter,onChange:this.coOccurenceFilterChange},"Co-occurrence"),r.createElement(C.Checkbox,{checked:this.significantPairsFilter,onChange:this.significantPairsFilterChange},"Significant only")),r.createElement(O,{data:this.filteredData})):null}},{key:"data",get:function(){return Object(l.e)(this.isSampleAlteredFilteredMap)}},{key:"filteredData",get:function(){return Object(l.f)(this.data,this.mutualExclusivityFilter,this.coOccurenceFilter,this.significantPairsFilter)}},{key:"isSampleAlteredFilteredMap",get:function(){return Object(l.g)(this.props.isSampleAlteredMap.result)}},{key:"filteredTrackOqls",get:function(){return o.difference(Object.keys(this.props.isSampleAlteredMap.result),Object.keys(this.isSampleAlteredFilteredMap))}},{key:"filteredTrackOqlsMessage",get:function(){return 1==this.filteredTrackOqls.length?"".concat(this.filteredTrackOqls[0]," is not profiled in any queried samples and therefore is excluded from this analysis."):this.filteredTrackOqls.length>1?"".concat(this.filteredTrackOqls.slice(0,-1).join(", ")," and ").concat(this.filteredTrackOqls.slice(-1)," are not profiled in any queried samples and therefore are excluded from this analysis."):""}},{key:"notEnoughDataError",get:function(){return o.size(this.props.isSampleAlteredMap.result)<2?"Mutual exclusivity analysis can only be performed when data from at least two genes is provided.":o.size(this.isSampleAlteredFilteredMap)<2?"Mutual exclusivity analysis can only be performed when at least two of the queried genes have been profiled in the queried samples.":null}}])&&A(n.prototype,i),a&&A(n,a),t}();D([s.observable],R.prototype,"mutualExclusivityFilter",void 0),D([s.observable],R.prototype,"coOccurenceFilter",void 0),D([s.observable],R.prototype,"significantPairsFilter",void 0),D([s.computed],R.prototype,"data",null),D([s.computed],R.prototype,"filteredData",null),D([s.computed],R.prototype,"isSampleAlteredFilteredMap",null),D([s.computed],R.prototype,"filteredTrackOqls",null),D([s.computed],R.prototype,"filteredTrackOqlsMessage",null),D([s.computed],R.prototype,"notEnoughDataError",null),R=D([a.observer],R);t.a=R},function(e,t,n){"use strict";var r=n(0),o=n(44),i=n(3),a=n(866),s=5,l=3;var u=function(e){var t=(e.sampleManager?e.sampleManager.getSampleIdsInOrder():[]).filter(function(t,n,r){return e.sampleToCCFValue[t]}).map(function(t,n,o){return r.createElement("span",{key:t},e.sampleManager?e.sampleManager.getComponentForSample(t,1,""):null," ",e.sampleToCCFValue[t],r.createElement("br",null))});return r.createElement("span",{"data-test":"ccf-tooltip"},t)},c=function(e){var t=12*(isNaN(+e.ccfValue)?0:+e.ccfValue),n=12-t;return r.createElement("svg",null,Object(a.c)(e.clonalValue),r.createElement("rect",{x:e.barX,y:n,stroke:"black",strokeWidth:1,width:s,height:t,fill:e.color}))},p=function(e){var t,n=e.sampleManager?e.sampleManager.getSampleIdsInOrder():[],o=n.reduce(function(e,t,n){return e[t]=n*(s+l),e},{});return r.createElement("svg",{width:(t=n.length,t*s+(t-1)*l),height:12},n.map(function(t){return r.createElement(c,{key:t,ccfValue:e.sampleToCCFValue[t],clonalValue:e.sampleToClonalValue[t],color:Object(a.b)(e.sampleToClonalValue[t]),barX:o[t]})}))},d=function(e){return e.sampleManager?r.createElement(i.d,{placement:"left",overlay:r.createElement(u,e)},r.createElement("span",null,r.createElement(p,e))):r.createElement("span",null,e.sampleToCCFValue[e.sampleIds[0]])},f=n(821);function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e){return Object(o.m)(e,"ccfExpectedCopies")?e.alleleSpecificCopyNumber.ccfExpectedCopies.toFixed(2):""}n.d(t,"a",function(){return y});var y=function(e,t){return{name:"CCF",tooltip:r.createElement("span",null,"Cancer Cell Fraction"),render:function(n){return g.renderFunction(n,e||(n.length>0?[n[0].sampleId]:[]),t)},sortBy:function(e){return e.map(function(e){return+m(e)})},download:function(e){return g.getCancerCellFractionDownload(e)},visible:!1}},g=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"renderFunction",value:function(e,t,n){var i={},a={},s=!0,l=!1,u=void 0;try{for(var c,p=e[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){var h=c.value;i[h.sampleId]=Object(o.m)(h,"ccfExpectedCopies")?h.alleleSpecificCopyNumber.ccfExpectedCopies.toFixed(2):"NA",a[h.sampleId]=Object(f.b)(h)}}catch(e){l=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw u}}return r.createElement("span",{"data-test":"ccf-cell"},r.createElement(d,{sampleIds:t,sampleToClonalValue:a,sampleToCCFValue:i,sampleManager:n}))}},{key:"getCancerCellFractionDownload",value:function(e){return e.map(function(e){return m(e)})}}],(n=null)&&h(t.prototype,n),i&&h(t,i),e}()},function(e,t,n){"use strict";var r,o=n(0),i=n(44),a=n(3);!function(e){e.WHITE="white",e.LIGHTGREY="lightgrey",e.BLACK="black",e.DARKGREY="darkgrey"}(r||(r={}));var s=function(e){return o.createElement("span",{"data-test":"eac-tooltip"},e.sampleManager?o.createElement("span",null,e.sampleManager.getComponentForSample(e.sampleId,1,"")," "):null,"INDETERMINATE"===e.expectedAltCopiesValue?o.createElement("span",null,"Indeterminate sample"):o.createElement("span",null," ".concat(e.expectedAltCopiesValue," out of ").concat(e.totalCopyNumberValue," copies of this gene are mutated.")))};function l(e){return"NA"!==e?100:0}function u(e){return e&&"INDETERMINATE"!==e?r.BLACK:r.WHITE}function c(e){return e&&"INDETERMINATE"!==e?r.WHITE:r.LIGHTGREY}function p(e){return e&&"INDETERMINATE"!==e?9:12}var d=function(e){return o.createElement("svg",{width:"18",height:"20",className:"case-label-header"},o.createElement("g",{transform:"translate(3,8)"},o.createElement("rect",{width:"11",height:"11",rx:"15%",ry:"15%",stroke:(t=e.expectedAltCopiesValue,t&&"INDETERMINATE"!==t?r.DARKGREY:r.LIGHTGREY),"stroke-width":"1",fill:c(e.expectedAltCopiesValue),opacity:l(e.expectedAltCopiesValue)}),o.createElement("svg",null,o.createElement("text",{x:"5.5",y:"6",dominantBaseline:"middle",textAnchor:"middle",fontSize:p(e.expectedAltCopiesValue),fill:u(e.expectedAltCopiesValue),opacity:l(e.expectedAltCopiesValue)},"INDETERMINATE"===e.expectedAltCopiesValue?"-":e.expectedAltCopiesValue))));var t},f=function(e){return"NA"===e.expectedAltCopiesValue?o.createElement("span",null,o.createElement(d,{expectedAltCopiesValue:e.expectedAltCopiesValue})):o.createElement(a.d,{overlay:o.createElement(s,e),placement:"left"},o.createElement("span",null,o.createElement(d,{expectedAltCopiesValue:e.expectedAltCopiesValue})))},h=n(92);function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){var n=function(e){var t={},n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value,l=g(s);l.length>0&&(t[s.sampleId]=l)}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return t}(e);return t.filter(function(e){return n[e]}).map(function(e){return n[e]}).join("; ")}function g(e){return Object(i.m)(e,"totalCopyNumber")&&Object(i.m)(e,"expectedAltCopies")?e.alleleSpecificCopyNumber.expectedAltCopies.toString()+"/"+e.alleleSpecificCopyNumber.totalCopyNumber.toString():""}n.d(t,"a",function(){return b});var b=function(e,t){return{name:"Mutant Integer Copy #",tooltip:o.createElement("span",null,"Best Guess for Mutant Integer Cop #"),render:function(n){return v.renderFunction(n,e||(n.length>0?[n[0].sampleId]:[]),t)},sortBy:function(t){return y(t,e||(t.length>0?[t[0].sampleId]:[]))},download:function(e){return v.getExpectedAltCopiesDownload(e)},visible:!1}},v=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"renderFunction",value:function(e,t,n){var r={},a={},s=!0,l=!1,u=void 0;try{for(var c,p=e[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){var d=c.value;r[d.sampleId]=Object(i.m)(d,"totalCopyNumber")?d.alleleSpecificCopyNumber.totalCopyNumber.toString():Object(i.m)(d,"ascnMethod")?"INDETERMINATE":h.e,a[d.sampleId]=Object(i.m)(d,"expectedAltCopies")?d.alleleSpecificCopyNumber.expectedAltCopies.toString():Object(i.m)(d,"ascnMethod")?"INDETERMINATE":h.e}}catch(e){l=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw u}}return o.createElement("span",{"data-test":"eac-cell"},t.map(function(e,t){return o.createElement("span",{key:e,style:0===t?void 0:{marginLeft:5}},o.createElement(f,{sampleId:e,totalCopyNumberValue:r[e]?r[e]:"NA",expectedAltCopiesValue:a[e]?a[e]:"NA",sampleManager:n}))}))}},{key:"getExpectedAltCopiesDownload",value:function(e){return e.map(function(e){return g(e)})}}],(n=null)&&m(t.prototype,n),r&&m(t,r),e}()},,,,function(e,t,n){e.exports={portalWidth:"mutationStatus-module__portalWidth__2s2Qx",framedImage:"mutationStatus-module__framedImage__mbMeM",germline:"mutationStatus-module__germline__3PooJ",somatic:"mutationStatus-module__somatic__1ieJL",unknown:"mutationStatus-module__unknown__mbYor"}},function(e,t,n){e.exports={portalWidth:"mutationType-module__portalWidth__2MF0M",framedImage:"mutationType-module__framedImage__2Mkp8",missenseMutation:"mutationType-module__missenseMutation__1TVMD",truncMutation:"mutationType-module__truncMutation__LbUPB",inframeMutation:"mutationType-module__inframeMutation__3O1fU",otherMutation:"mutationType-module__otherMutation__12WiG",defaultMutation:"mutationType-module__defaultMutation__K_gPQ",fusion:"mutationType-module__fusion__1Auq-"}},function(e,t,n){e.exports={portalWidth:"variantType-module__portalWidth__3507N",framedImage:"variantType-module__framedImage__1_Tun",variantTypeSnp:"variantType-module__variantTypeSnp__2Cxot",variantTypeIns:"variantType-module__variantTypeIns__3b3Bu",variantTypeDel:"variantType-module__variantTypeDel__29irc",variantTypeOther:"variantType-module__variantTypeOther__2ZJz2"}},function(e,t,n){e.exports={portalWidth:"mutationAssessorTooltip-module__portalWidth__15gd3",framedImage:"mutationAssessorTooltip-module__framedImage__1LzrF","ma-link":"mutationAssessorTooltip-module__ma-link__3QpML","mutation-assessor-link":"mutationAssessorTooltip-module__mutation-assessor-link__3XLsB","ma-icon":"mutationAssessorTooltip-module__ma-icon__GqjUA","ma-msa-icon":"mutationAssessorTooltip-module__ma-msa-icon__2yT6h","ma-3d-icon":"mutationAssessorTooltip-module__ma-3d-icon__166M3","mutation-assessor-main-img":"mutationAssessorTooltip-module__mutation-assessor-main-img__2QlLP","ma-tooltip-table":"mutationAssessorTooltip-module__ma-tooltip-table__3tyG8"}},function(e,t,n){e.exports={portalWidth:"cosmic-module__portalWidth__3eF_t",framedImage:"cosmic-module__framedImage__1OwYD","cosmic-table":"cosmic-module__cosmic-table__2ms15"}},function(e,t,n){e.exports={portalWidth:"validationStatus-module__portalWidth__yrVHU",framedImage:"validationStatus-module__framedImage___YpeK",unknown:"validationStatus-module__unknown__1XsWI",valid:"validationStatus-module__valid__Ziu-a",wildtype:"validationStatus-module__wildtype__14GJI",other:"validationStatus-module__other__3oLt_"}},function(e,t,n){e.exports={portalWidth:"exon-module__portalWidth__1GWC2",framedImage:"exon-module__framedImage__2Xs1J","exon-table":"exon-module__exon-table__6cnBD"}},function(e,t,n){e.exports={portalWidth:"hgvsg-module__portalWidth__70K9W",framedImage:"hgvsg-module__framedImage__2Yrs7","hgvsg-data":"hgvsg-module__hgvsg-data__mrt6T","genome-nexus-logo":"hgvsg-module__genome-nexus-logo__2zJ74"}},function(e,t,n){var r,o,i;r={},o=0,i=function(e){var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)},e.exports=function(e,t,n){var a;t&&"function"!=typeof t&&(n=t.context||n,a=t.setup,t=t.callback);var s,l,u=document.createElement("script"),c=!1,p=function(){c||(c=!0,l(),t&&t.call(n,s))},d=function(){s=new Error(e||"EMPTY"),p()};if(!u.readyState||"async"in u)l=function(){u.onload=u.onerror=null},u.onerror=d,u.onload=p,u.async=!0,u.charset="utf-8",a&&a.call(n,u),u.src=e,i(u);else{var f=o++,h={loaded:!0,complete:!0},m=!1;l=function(){u.onreadystatechange=u.onerror=null,r[f]=void 0},u.onreadystatechange=function(){var e=u.readyState;if(!s){if(!m&&h[e]&&(m=!0,i(u)),"loaded"===e&&(u.children,"loading"===u.readyState))return d();"complete"===u.readyState&&p()}},u.onerror=d,r[f]=u,a&&a.call(n,u),u.src=e}}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return p});var r=n(843),o=n(1),i=n.n(o),a=n(297),s=n(960),l=n(961),u=n(11),c=n(50);function p(e,t,n,o,a){var s=function(e,t){return function(e,t){if(m(e.geneticTracks||[],t.geneticTracks||[]))return!0;return S(e)!==S(t)||E(e)!==E(t)}(e,t)||function(e,t){if(m(e.clinicalTracks||[],t.clinicalTracks||[]))return!0}(e,t)||function(e,t){if(m(e.heatmapTracks,t.heatmapTracks||[])||m(e.genesetHeatmapTracks,t.genesetHeatmapTracks||[]))return!0}(e,t)}(e,t),l=function(e,t){return!e.suppressRendering&&(v(e,t)||h(y(e),y(t))>1)}(e,t);l&&d(e,n),s&&n.keepSorted(!1),function(e,t,n){e.suppressRendering&&!t.suppressRendering&&d(e,n)}(e,t,n),function(e,t,n){e.width!==t.width&&n.setWidth(e.width)}(e,t,n),function(e,t,n){i.a.isEqual(e.columnLabels,t.columnLabels)||n.setColumnLabels(e.columnLabels||{})}(e,t,n),function(e,t,n){e.showWhitespaceBetweenColumns!==t.showWhitespaceBetweenColumns&&n.setCellPaddingOn(!!e.showWhitespaceBetweenColumns)}(e,t,n),function(e,t,n){e.showMinimap!==t.showMinimap&&n.setMinimapVisible(!!e.showMinimap)}(e,t,n),function(e,t,n){e.onMinimapClose&&e.onMinimapClose!==t.onMinimapClose&&n.onMinimapClose(e.onMinimapClose)}(e,t,n),function(e,t,n){e.showTrackLabels!==t.showTrackLabels&&n.setShowTrackLabels(!!e.showTrackLabels)}(e,t,n),function(e,t,n){e.showSublabels!==t.showSublabels&&n.setShowTrackSublabels(!!e.showSublabels)}(e,t,n),function(e,t,n){if(!i.a.isEqual(e.heatmapTrackHeaders,t.heatmapTrackHeaders)){var r=e.heatmapTrackHeaders||{},o=t.heatmapTrackHeaders||{},a=Object.keys(r).map(function(e){return parseInt(e,10)}),s=Object.keys(o).map(function(e){return parseInt(e,10)}),l=!0,u=!1,c=void 0;try{for(var p,d=a[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var f=p.value;n.setTrackGroupHeader(f,r[f])}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}var h=!0,m=!1,y=void 0;try{for(var g,b=s[Symbol.iterator]();!(h=(g=b.next()).done);h=!0){var v=g.value;v in r||n.setTrackGroupHeader(v,void 0)}}catch(e){m=!0,y=e}finally{try{h||null==b.return||b.return()}finally{if(m)throw y}}}}(e,t,n),function(e,t,n,o,a){var s={genetic:void 0,genesetHeatmap:void 0,heatmap:void 0,heatmap01:void 0,genericAssay:{}},l=o();t.geneticTracks&&t.geneticTracks.length&&!v(e,t)&&(s.genetic=l[t.geneticTracks[0].key]);t.genesetHeatmapTracks&&t.genesetHeatmapTracks.length&&(s.genesetHeatmap=l[t.genesetHeatmapTracks[0].key]);if(t.heatmapTracks&&t.heatmapTracks.length){var c,p,d=!0,f=!1,h=void 0;try{for(var m,y=t.heatmapTracks[Symbol.iterator]();!(d=(m=y.next()).done);d=!0){var g=m.value;if(void 0===c&&g.molecularAlterationType===u.a.METHYLATION?c=l[g.key]:void 0===p&&g.molecularAlterationType!==u.a.METHYLATION&&g.molecularAlterationType!==u.a.GENERIC_ASSAY&&(p=l[g.key]),void 0!==c&&void 0!==p)break}}catch(e){f=!0,h=e}finally{try{d||null==y.return||y.return()}finally{if(f)throw h}}s.heatmap=p,s.heatmap01=c}else if(t.genesetHeatmapTracks){var b=!0,_=!1,S=void 0;try{for(var E,w=t.genesetHeatmapTracks[Symbol.iterator]();!(b=(E=w.next()).done);b=!0){var P=E.value;if(P.expansionTrackList&&P.expansionTrackList.length){s.heatmap=l[P.expansionTrackList[0].key];break}}}catch(e){_=!0,S=e}finally{try{b||null==w.return||w.return()}finally{if(_)throw S}}}s.genericAssay=i.a.chain(t.heatmapTracks).filter(function(e){return e.molecularAlterationType===u.a.GENERIC_ASSAY}).groupBy(function(e){return e.molecularProfileId}).mapValues(function(e){return i.a.last(e)}).mapValues(function(e){return l[e.key]}).value();var x=i.a.chain(e.heatmapTracks).filter(function(e){return e.molecularAlterationType===u.a.GENERIC_ASSAY}).groupBy(function(e){return e.molecularProfileId}).mapValues(function(e){return i()(e).flatMap(function(e){return e.data}).filter(function(e){return!e.category}).map(function(e){return e.profile_data}).value()}).value(),A=i.a.mapValues(x,function(e){return i.a.max(e)}),j=i.a.mapValues(x,function(e){return i.a.min(e)}),I=i.a.keyBy(t.geneticTracks||[],function(e){return e.key}),N=!0,M=!1,D=void 0;try{for(var R,L=e.geneticTracks[Symbol.iterator]();!(N=(R=L.next()).done);N=!0){var G=R.value;O(G,I[G.key],o,a,n,e,t,s),delete I[G.key]}}catch(e){M=!0,D=e}finally{try{N||null==L.return||L.return()}finally{if(M)throw D}}var V=!0,B=!1,F=void 0;try{for(var H,U=(t.geneticTracks||[])[Symbol.iterator]();!(V=(H=U.next()).done);V=!0){var W=H.value;I.hasOwnProperty(W.key)&&O(void 0,I[W.key],o,a,n,e,t,s)}}catch(e){B=!0,F=e}finally{try{V||null==U.return||U.return()}finally{if(B)throw F}}!function(e,t,n,o){var a=i.a.keyBy(e.geneticTracks,"key"),s=i.a.keyBy(t.geneticTracks||[],"key"),l=(e.geneticTracksOrder||e.geneticTracks.map(function(e){return e.key})).filter(function(e){return e in a}),u=(t.geneticTracksOrder||(t.geneticTracks||[]).map(function(e){return e.key})).filter(function(e){return e in s});if(!i.a.isEqual(l,u)){var c=o();n.setTrackGroupOrder(r.b,l.map(function(e){return c[e]}))}}(e,t,n,o);var q=i.a.keyBy(t.clinicalTracks||[],function(e){return e.key}),z=!0,Q=!1,K=void 0;try{for(var Y,X=e.clinicalTracks[Symbol.iterator]();!(z=(Y=X.next()).done);z=!0){var Z=Y.value;C(Z,q[Z.key],o,n,e),delete q[Z.key]}}catch(e){Q=!0,K=e}finally{try{z||null==X.return||X.return()}finally{if(Q)throw K}}var J=!0,$=!1,ee=void 0;try{for(var te,ne=(t.clinicalTracks||[])[Symbol.iterator]();!(J=(te=ne.next()).done);J=!0){var re=te.value;q.hasOwnProperty(re.key)&&C(void 0,q[re.key],o,n,e)}}catch(e){$=!0,ee=e}finally{try{J||null==ne.return||ne.return()}finally{if($)throw ee}}var oe=i.a.keyBy(t.genesetHeatmapTracks||[],function(e){return e.key}),ie=!0,ae=!1,se=void 0;try{for(var le,ue=e.genesetHeatmapTracks[Symbol.iterator]();!(ie=(le=ue.next()).done);ie=!0){var ce=le.value;k(ce,oe[ce.key],o,n,e,s),delete oe[ce.key]}}catch(e){ae=!0,se=e}finally{try{ie||null==ue.return||ue.return()}finally{if(ae)throw se}}var pe=!0,de=!1,fe=void 0;try{for(var he,me=(t.genesetHeatmapTracks||[])[Symbol.iterator]();!(pe=(he=me.next()).done);pe=!0){var ye=he.value;oe.hasOwnProperty(ye.key)&&k(void 0,oe[ye.key],o,n,e,s)}}catch(e){de=!0,fe=e}finally{try{pe||null==me.return||me.return()}finally{if(de)throw fe}}var ge=i.a.keyBy(t.heatmapTracks||[],function(e){return e.key}),be=!0,ve=!1,_e=void 0;try{for(var Se,Ee=e.heatmapTracks[Symbol.iterator]();!(be=(Se=Ee.next()).done);be=!0){var we=Se.value;we.maxProfileValue=A[we.molecularProfileId],we.minProfileValue=j[we.molecularProfileId],T(we,ge[we.key],o,function(){},n,e,{},s,void 0),delete ge[we.key]}}catch(e){ve=!0,_e=e}finally{try{be||null==Ee.return||Ee.return()}finally{if(ve)throw _e}}var Oe=!0,Ce=!1,ke=void 0;try{for(var Te,Pe=(t.heatmapTracks||[])[Symbol.iterator]();!(Oe=(Te=Pe.next()).done);Oe=!0){var xe=Te.value;ge.hasOwnProperty(xe.key)&&(xe.maxProfileValue=A[xe.molecularProfileId],xe.minProfileValue=j[xe.molecularProfileId],T(void 0,ge[xe.key],o,function(){},n,e,{},s,void 0))}}catch(e){Ce=!0,ke=e}finally{try{Oe||null==Pe.return||Pe.return()}finally{if(Ce)throw ke}}!function(e,t,n,r){var o=i.a.keyBy(e.heatmapTracks,"key"),a=i.a.keyBy(t.heatmapTracks||[],"key");i.a.forEach(e.heatmapTracksOrder||{},function(e,s){var l=e.filter(function(e){return e in o}),u=((t.heatmapTracksOrder||{})[s]||[]).filter(function(e){return e in a});if(!i.a.isEqual(l,u)){var c=r();n.setTrackGroupOrder(parseInt(s,10),l.map(function(e){return c[e]}))}})}(e,t,n,o)}(e,t,n,o,a),function(e,t,n){var r=b(t),o=b(e);("order"===r.type&&"order"===o.type&&r.order!==o.order||!i.a.isEqual(r,o))&&n.setSortConfig(o)}(e,t,n),function(e,t,n){var o=i.a.sortBy(i.a.uniq((t.heatmapTracks||[]).concat(t.genesetHeatmapTracks||[]).map(function(e){return e.trackGroupIndex}))),a=i.a.sortBy(i.a.uniq(e.heatmapTracks.concat(e.genesetHeatmapTracks).map(function(e){return e.trackGroupIndex})));i.a.xor(a,o).length&&n.setTrackGroupSortPriority([r.a].concat(a).concat(r.b))}(e,t,n),function(e,t,n){e.hiddenIds!==t.hiddenIds&&n.hideIds(e.hiddenIds||[],!0)}(e,t,n),function(e,t,n){i.a.isEqual(e.horzZoomToFitIds,t.horzZoomToFitIds)||n.updateHorzZoomToFitIds(e.horzZoomToFitIds||[])}(e,t,n),function(e,t,n,r){var o=r(),i=e.clinicalTracks.map(function(e){return o[e.key]});e.showClinicalTrackLegends&&!t.showClinicalTrackLegends?n.showTrackLegends(i):!e.showClinicalTrackLegends&&t.showClinicalTrackLegends&&n.hideTrackLegends(i)}(e,t,n,o),function(e,t,n){e.highlightedIds!==t.highlightedIds&&n.setHighlightedIds(e.highlightedIds||[])}(e,t,n),function(e,t,n,r){if(e.highlightedTracks!==t.highlightedTracks){var o=e.highlightedTracks||[],i=r();n.setHighlightedTracks(o.map(function(e){return i[e]}))}}(e,t,n,o),function(e,t,n){!e.suppressRendering&&t.suppressRendering&&f(e,n)}(e,t,n),s&&n.keepSorted(!0),l&&f(e,n)}function d(e,t){t.suppressRendering(),e.onSuppressRendering&&e.onSuppressRendering()}function f(e,t){t.releaseRendering(e.onReleaseRendering)}function h(e,t){var n=i.a.keyBy(t,function(e){return e.key}),r=0,o=0,a=0,s=!0,l=!1,u=void 0;try{for(var c,p=e[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){var d=c.value,f=n[d.key];f?(o+=1,f.data!==d.data&&(a+=1)):r+=1}}catch(e){l=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw u}}return r+(t.length-o)+a}function m(e,t){return e.length!==t.length||h(e,t)>0}function y(e){return(e.geneticTracks||[]).concat(e.genesetHeatmapTracks||[]).concat(e.clinicalTracks||[]).concat(e.heatmapTracks||[])}function g(e){return e.profile_data}function b(e){var t={},n=function(e){return e.sortConfig&&e.sortConfig.order}(e);return n?t={type:"order",order:n}:e.sortConfig&&void 0!==e.sortConfig.clusterHeatmapTrackGroupIndex&&(t={type:"cluster",track_group_index:e.sortConfig.clusterHeatmapTrackGroupIndex,clusterValueFn:g}),t}function v(e,t){return e.distinguishMutationType!==t.distinguishMutationType||e.distinguishDrivers!==t.distinguishDrivers||e.distinguishGermlineMutations!==t.distinguishGermlineMutations}function _(e,t,n,r){if(!e&&t){var o=n[t.key];return void 0!==o&&(r.getTracks().includes(o)&&r.removeTrack(o),delete n[t.key]),!0}return!1}function S(e){return e.distinguishMutationType&&e.sortConfig&&e.sortConfig.sortByMutationType}function E(e){return e.distinguishDrivers&&e.sortConfig&&e.sortConfig.sortByDrivers}function w(e,t,n,r,o,a,s,l,u){var c=t&&t.expansionTrackList?t.expansionTrackList:[],p=e&&e.expansionTrackList?e.expansionTrackList:[],d=i.a.keyBy(c,function(e){return e.key}),f=!0,h=!1,m=void 0;try{for(var y,g=p[Symbol.iterator]();!(f=(y=g.next()).done);f=!0){var b=y.value;u(b,d[b.key],n,r,o,a,s,l,e.key),delete d[b.key]}}catch(e){h=!0,m=e}finally{try{f||null==g.return||g.return()}finally{if(h)throw m}}var v=!0,_=!1,S=void 0;try{for(var E,w=c[Symbol.iterator]();!(v=(E=w.next()).done);v=!0){var O=E.value;d.hasOwnProperty(O.key)&&u(void 0,d[O.key],n,r,o,a,s,l)}}catch(e){_=!0,S=e}finally{try{v||null==w.return||w.return()}finally{if(_)throw S}}}function O(t,n,o,i,u,c,p,d,f){var h=o();if(!_(t,n,h,u))if(t&&!n){var m={rule_set_params:Object(a.f)(c.distinguishMutationType,c.distinguishDrivers,c.distinguishGermlineMutations),label:t.label,sublabel:t.sublabel,track_label_color:t.labelColor||void 0,target_group:r.b,sortCmpFn:Object(s.b)(S(c),E(c)),description:t.oql,data_id_key:"uid",data:t.data,tooltipFn:Object(l.c)(c.caseLinkOutInTooltips,i,c.alterationTypesInQuery),track_info:t.info,$track_info_tooltip_elt:t.infoTooltip?e("<div>"+t.infoTooltip+"</div>"):void 0,removeCallback:function(){delete o()[t.key],t.removeCallback&&t.removeCallback()},expandCallback:t.expansionCallback||void 0,expandButtonTextGetter:function(){return"Expand"},expansion_of:f?h[f]:void 0,custom_track_options:t.customOptions},y=u.addTracks([m])[0];h[t.key]=y,void 0!==d.genetic&&u.shareRuleSet(d.genetic,y),d.genetic=y}else if(t&&n){var g=h[t.key],b=S(c),C=E(c);b===S(p)&&C===E(p)||u.setTrackSortComparator(g,Object(s.b)(b,C)),t.data!==n.data&&u.setTrackData(g,t.data,"uid"),function(e,t){return e.caseLinkOutInTooltips!==t.caseLinkOutInTooltips||e.alterationTypesInQuery!==t.alterationTypesInQuery}(c,p)&&u.setTrackTooltipFn(g,Object(l.c)(c.caseLinkOutInTooltips,i,c.alterationTypesInQuery)),t.info!==n.info&&u.setTrackInfo(g,t.info),t.infoTooltip!==n.infoTooltip&&u.setTrackInfoTooltip(g,t.infoTooltip?e("<div>"+t.infoTooltip+"</div>"):void 0),v(c,p)&&(void 0!==d.genetic?u.shareRuleSet(d.genetic,g):u.setRuleSet(g,Object(a.f)(c.distinguishMutationType,c.distinguishDrivers,c.distinguishGermlineMutations))),d.genetic=g,t.expansionTrackList&&t.expansionTrackList.length>0?u.disableTrackExpansion(g):t.expansionCallback&&u.enableTrackExpansion(g),w(t,n,o,i,u,c,p,d,O)}}function C(e,t,n,o,i){var u=n();if(!_(e,t,u,o))if(e&&!t){var c=Object(a.d)(e);c.legend_label=e.label,c.exclude_from_legend=!i.showClinicalTrackLegends,c.na_legend_label=e.na_legend_label;var p={rule_set_params:c,data:e.data,data_id_key:"uid",label:e.label,description:(e.label||"").trim()===(e.description||"").trim()?void 0:e.description,removable:!0,removeCallback:function(){delete n()[e.key]},onClickRemoveInTrackMenu:function(){i.onDeleteClinicalTrack&&i.onDeleteClinicalTrack(e.key)},sort_direction_changeable:!0,tooltipFn:Object(l.b)(e,i.caseLinkOutInTooltips),important_ids:e.altered_uids,sortCmpFn:Object(s.a)(e),init_sort_direction:0,target_group:r.a,onSortDirectionChange:i.onTrackSortDirectionChange,custom_track_options:e.custom_options,track_can_show_gaps:"string"===e.datatype};u[e.key]=o.addTracks([p])[0]}else if(e&&t){var d=u[e.key];e.data!==t.data&&o.setTrackData(d,e.data,"uid"),e.altered_uids!==t.altered_uids&&o.setTrackImportantIds(d,e.altered_uids),o.setTrackTooltipFn(d,Object(l.b)(e,i.caseLinkOutInTooltips)),t.custom_options!==e.custom_options&&o.setTrackCustomOptions(d,e.custom_options)}}function k(e,t,n,r,o,i){var u=n();if(_(e,t,u,r))w(void 0,t,n,function(){},r,o,{},i,T);else if(e&&!t){var c={rule_set_params:Object(a.e)(),data:e.data,data_id_key:"uid",has_column_spacing:!1,track_padding:0,label:e.label,html_label:Object(l.a)(e.label),target_group:e.trackGroupIndex,sort_direction_changeable:!0,sortCmpFn:s.c,init_sort_direction:0,description:"Gene set scores from ".concat(e.molecularProfileId),link_url:e.trackLinkUrl,tooltipFn:Object(l.d)(e,o.caseLinkOutInTooltips),onSortDirectionChange:o.onTrackSortDirectionChange,expandCallback:e.expansionCallback,expandButtonTextGetter:function(e){return"".concat(e?"More":"Show","  genes")}},p=r.addTracks([c])[0];u[e.key]=p,void 0!==i.genesetHeatmap&&r.shareRuleSet(i.genesetHeatmap,p),i.genesetHeatmap=p,w(e,void 0,n,function(){},r,o,{},i,T)}else if(e&&t){var d=u[e.key];e.data!==t.data&&r.setTrackData(d,e.data,"uid"),r.setTrackTooltipFn(d,Object(l.d)(e,o.caseLinkOutInTooltips)),w(e,t,n,function(){},r,o,{},i,T)}}function T(e,t,n,r,o,i,p,d,f){var h=n();if(!_(e,t,h,o))if(e&&!t){var m={rule_set_params:Object(a.g)(e),data:e.data,data_id_key:"uid",has_column_spacing:Object(c.a)(e.hasColumnSpacing,!1),track_padding:0,label:e.label,track_label_color:e.labelColor,track_label_circle_color:e.labelCircleColor,track_label_font_weight:e.labelFontWeight,track_label_left_padding:e.labelLeftPadding,target_group:e.trackGroupIndex,removable:!!e.onRemove||!!e.onClickRemoveInTrackMenu,movable:e.movable,na_legend_label:e.naLegendLabel,removeCallback:function(){delete n()[e.key],e.onRemove&&e.onRemove()},onClickRemoveInTrackMenu:function(){e.onClickRemoveInTrackMenu&&e.onClickRemoveInTrackMenu()},sort_direction_changeable:Object(c.a)(e.sortDirectionChangeable,!0),sortCmpFn:s.c,init_sort_direction:Object(c.a)(e.initSortDirection,0),link_url:e.trackLinkUrl,description:Object(c.a)(e.description,"".concat(e.label," data from ").concat(e.molecularProfileId)),tooltipFn:e.tooltip||Object(l.d)(e,i.caseLinkOutInTooltips),track_info:e.info||"",onSortDirectionChange:i.onTrackSortDirectionChange,expansion_of:f?h[f]:void 0},y=o.addTracks([m])[0];if(h[e.key]=y,e.molecularAlterationType!==u.a.GENERIC_ASSAY){var g="heatmap";"METHYLATION"===e.molecularAlterationType&&(g="heatmap01"),void 0!==d[g]&&o.shareRuleSet(d[g],y),d[g]=y}else d.genericAssay[e.molecularProfileId]=y}else if(e&&t){var b=h[e.key];if(e.data!==t.data&&o.setTrackData(b,e.data,"uid"),e.info!==t.info&&void 0!==e.info&&o.setTrackInfo(b,e.info),e.movable!==t.movable&&void 0!==e.movable&&o.setTrackMovable(b,e.movable),e.molecularAlterationType===u.a.GENERIC_ASSAY&&void 0!==d.genericAssay[e.molecularProfileId]){var v=d.genericAssay[e.molecularProfileId];o.shareRuleSet(v,b)}o.setTrackTooltipFn(b,e.tooltip||Object(l.d)(e,i.caseLinkOutInTooltips))}}}).call(this,n(17))},function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return c}),n.d(t,"c",function(){return d});var r=n(185),o=n.n(r);function i(e){for(var t={},n=0;n<e.length;n++)for(var r=[].concat(e[n]),o=0;o<r.length;o++)t[r[o]]=n;return t}function a(e,t){var n,r=i(["amp","homdel","gain","hetloss","diploid",void 0]),o=e||t?(!e&&t?n=i([["inframe_rec","missense_rec","promoter_rec","trunc_rec","other_rec"],["inframe","missense","promoter","trunc","other"],void 0]):e&&!t?n=i([["trunc","trunc_rec"],["inframe","inframe_rec"],["promoter","promoter_rec"],["missense","missense_rec"],["other","other_rec"],void 0,!0,!1]):e&&t&&(n=i(["trunc_rec","inframe_rec","promoter_rec","missense_rec","other_rec","trunc","inframe","promoter","missense","other",void 0,!0,!1])),function(e){return n[e]}):function(e){return{true:1,false:2}[!!e+""]},a=i(["high","low",void 0]),s=i([!0,!1,void 0]);function l(e){var t=[];return e.disp_fusion?t.push(0):t.push(1),t.push(r[e.disp_cna+""]),t.push(o(e.disp_mut)),t.push(s[e.disp_germ+""]),t.push(a[e.disp_mrna+""]),t.push(a[e.disp_prot+""]),t}return{preferred:function(e){return[+!!e.na].concat(l(e)).concat([e.sample?e.sample:e.patient])},mandatory:function(e){return l(e)},isVector:!0}}function s(e){return function(t,n){return t.na&&n.na?0:t.na&&!n.na?2:!t.na&&n.na?-2:t[e]<n[e]?-1:t[e]===n[e]?0:1}}function l(e,t){return e.na&&t.na?0:e.na&&!t.na?2:!e.na&&t.na?-2:o()(e.attr_val,t.attr_val)}function u(e){return function(t,n){var r=e(t,n);return 0===r?t.sample?o()(t.sample,n.sample):o()(t.patient,n.patient):r}}function c(e){var t,n;switch(e.datatype){case"number":t=s("attr_val");break;case"counts":n=e.countsCategoryLabels,t=function(e,t){if(e.na&&t.na)return 0;if(e.na&&!t.na)return 2;if(!e.na&&t.na)return-2;for(var r=0,o=0,i=0;i<n.length;i++)r+=e.attr_val[n[i]]||0,o+=t.attr_val[n[i]]||0;if(0===r&&0===o)return 0;if(0===r)return 1;if(0===o)return-1;var a=0,s=0;for(i=0;i<n.length;i++)e.attr_val[n[i]]>e.attr_val[n[a]]&&(a=i),t.attr_val[n[i]]>t.attr_val[n[s]]&&(s=i);if(a<s)return-1;if(a>s)return 1;var l,u=n[a],c=e.attr_val[u]/r,p=t.attr_val[u]/o;return(l=c-p)>0?1:l<0?-1:0};break;case"string":default:t=l}return{preferred:u(t),mandatory:t}}var p,d={preferred:u(p=s("profile_data")),mandatory:p}},function(e,t,n){"use strict";n.d(t,"a",function(){return w}),n.d(t,"b",function(){return O}),n.d(t,"d",function(){return C}),n.d(t,"c",function(){return P});var r=n(18),o=n(17),i=n.n(o),a=n(13),s=n(11),l=n(1),u=n.n(l),c=n(222),p=n(44),d=n(314),f=(n(869),n(7));function h(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var y=n(422),g=n(305),b=n(867),v=n(868),_="oncoprint__tooltip",S="N/A";function E(e,t,n){var r=i()('<span class="nobreak"><a href="#" '.concat(t?"":'style="color:red;"',' oncontextmenu="return false;">').concat(e,"</a>").concat(n?" (".concat(n,")"):"","</span>"));return r.ready(function(){r.click(function(){a.a.getGenePanelUsingGET({genePanelId:e}).then(function(t){var n=t.genes.map(function(e){return e.hugoGeneSymbol}).sort(),r=open("","_blank","width=500,height=500");if(r){var o=r.document.createElement("div");r.document.body.appendChild(o),i()('<h3 style="text-align:center;">'.concat(e,"</h3><br>")).appendTo(o),i()("<span>".concat(n.join("<br>"),"</span>")).appendTo(o)}})})}),r}function w(e){return i()("<div>").text(e).html().replace(/_/g,"_&#8203;").replace(/\./g,".&#8203;")}function O(e,t){return function(n){var r="";if("counts"===e.datatype)for(var o=n[0],a=0;a<e.countsCategoryLabels.length;a++)r+='<span class="nobreak" style="color:'+e.countsCategoryFills[a]+';font-weight:bold;">'+e.countsCategoryLabels[a]+"</span>: "+o.attr_val_counts[e.countsCategoryLabels[a]]+"<br>";else{var s={},l=!0,u=!1,c=void 0;try{for(var p,d=n[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var f=p.value;if(f.attr_val_counts)for(var h=0,m=Object.keys(f.attr_val_counts);h<m.length;h++){var y=m[h];s[y]=s[y]||0,s[y]+=f.attr_val_counts[y]}}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}var g=Object.keys(s);if("number"===e.datatype){for(var b=0,v=0,S=0,E=g;S<E.length;S++){var w=E[S],O=s[w];b+=O*parseFloat(w),v+=O}var C=(b/v).toFixed(2);".00"===C.substring(C.length-3)&&(C=C.substring(0,C.length-3)),r+=e.label+': <span class="nobreak"><b>'+C+"".concat(v>1?" (average of ".concat(v," values)"):"","</b></span><br>")}else if(g.length>1){r+=e.label+":<br>";for(var k=0;k<g.length;k++){var P=g[k];r+='<span class="nobreak"><b>'+P+"</b>: "+s[P]+" sample".concat(1===s[P]?"":"s","</span><br>")}}else if(1===g.length){var x=g[0];r+=e.label+': <span class="nobreak"><b>'+x+"</b>".concat(n.length>1?" (".concat(s[g[0]]," samples)"):"","</span><br>")}}var A=0,j=!0,I=!1,N=void 0;try{for(var M,D=n[Symbol.iterator]();!(j=(M=D.next()).done);j=!0){M.value.na&&(A+=1)}}catch(e){I=!0,N=e}finally{try{j||null==D.return||D.return()}finally{if(I)throw N}}return A>0&&e.na_tooltip_value&&(r+="".concat(e.label,": <b>").concat(e.na_tooltip_value,"</b>").concat(n.length>1?" (".concat(A," samples)"):"","<br/>")),i()("<div>").addClass(_).append(T(n,!!t)).append("<br/>").append(r)}}function C(e,t){return function(n){var r="",o=S,a="";if(e.tooltipValueLabel)r="".concat(e.tooltipValueLabel,": ");else switch(e.molecularAlterationType){case s.a.MRNA_EXPRESSION:r="MRNA: ";break;case s.a.PROTEIN_LEVEL:r="PROT: ";break;case s.a.METHYLATION:r="METHYLATION: ";break;case s.a.GENERIC_ASSAY:r="".concat(Object(f.n)(e.genericAssayType),": ");break;default:r="Value: "}var l=0,c=[],p=0,d=0,h=!0,m=!1,y=void 0;try{for(var g,b=n[Symbol.iterator]();!(h=(g=b.next()).done);h=!0){var v=g.value;null!==v.profile_data&&void 0!==v.profile_data&&(e.molecularAlterationType===s.a.GENERIC_ASSAY&&v.category?(c.push(v.category),d+=1):(l+=v.profile_data,p+=1))}}catch(e){m=!0,y=e}finally{try{h||null==b.return||b.return()}finally{if(m)throw y}}if(p>0){var E=(l/p).toFixed(2);o=1===p?E:"".concat(E," (average of ").concat(p," values)")}d>0&&(a=0===p&&1===d?c[0]:p>0&&1===d?"".concat(c[0]):"".concat(u.a.uniq(c).join(", ")," (").concat(d," data points)"));var w=r;return o===S&&0!==d||(w+="<b>"+o+"</b>"),o!==S&&d>0&&(w+=" and "),d>0&&(w+="<b>"+a+"</b>"),w+="<br />",i()("<div>").addClass(_).append(T(n,!!t)).append("<br/>").append(w)}}function k(e,t,n,r){var o=[],i={},a=void 0,s={},l=void 0,p=[],d=void 0;if(e&&(o=u.a.uniq(e.map(function(e){return e.genePanelId}).filter(function(e){return!!e})),a=u.a.uniq(e.map(function(e){return e.molecularProfileId})),r&&(d=u.a.keyBy(a,function(e){return r[e].molecularAlterationType})),s=u.a.keyBy(a),i=u.a.keyBy(o)),t){if(l=u.a.uniq(t.map(function(e){return e.molecularProfileId})).filter(function(e){return!s[e]}),d&&n&&r){var f=u.a.keyBy(l,function(e){return r[e].molecularAlterationType});l=l.concat(n.filter(function(e){return!d[e]&&!f[e]}).map(function(e){return c.a[e]}))}p=u.a.uniq(t.map(function(e){return e.genePanelId})).filter(function(e){return!!e&&!i[e]})}return{dispProfiledGenePanelIds:o,dispNotProfiledGenePanelIds:p,dispProfiledIn:a,dispNotProfiledIn:l,dispAllProfiled:!(!(a&&a.length&&l)||l.length),dispNotProfiled:!(!(l&&l.length&&a)||a.length)}}function T(e,t){return e.length?e[0].sample?e.length>1?t?'<a class="nobreak" href='.concat(Object(r.y)(e[0].study_id,e[0].sample,e.map(function(e){return{studyId:e.study_id,patientId:e.patient}})),' target="_blank">View these ').concat(e.length," samples<a/>"):'<span class="nobreak">'.concat(e.length," samples</span>"):t?(n=e[0].study_id,o=e[0].sample,'<a class="nobreak" href="'.concat(Object(r.y)(n,o),'" target="_blank">').concat(o,"</a>")):'<span class="nobreak">'.concat(e[0].sample,"</span>"):e[0].patient?e.length>1?t?'<a class="nobreak" href='.concat(Object(r.w)(e[0].study_id,e[0].patient,e.map(function(e){return{studyId:e.study_id,patientId:e.patient}})),' target="_blank">View these ').concat(e.length," patients<a/>"):'<span class="nobreak">'.concat(e.length," patients</span>"):t?function(e,t){return'<a class="nobreak" href="'.concat(Object(r.w)(e,t),'" target="_blank">').concat(t,"</a>")}(e[0].study_id,e[0].patient):'<span class="nobreak">'.concat(e[0].patient,"</span>"):"":"";var n,o}function P(e,t,n){function r(e,t){var n=new d.a,r=!0,o=!1,a=void 0;try{for(var s,l=e[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;n.increment(u.hugo_gene_symbol,u.amino_acid_change,u.cancer_hotspots_hotspot,u.oncokb_oncogenic,u.driver_filter,u.driver_filter_annotation,u.driver_tiers_filter,u.driver_tiers_filter_annotation,u.germline)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n.entries().map(function(e){var n=m(e.key,9),r=n[0],o=n[1],a=n[2],s=n[3],l=n[4],u=n[5],c=n[6],p=n[7],d=n[8],f=e.value,h=i()("<span>").addClass("nobreak");return h.append('<b class="nobreak">'.concat(r," ").concat(o,"</b>")),a&&h.append('<img src="'.concat(y,'" title="Hotspot" style="height:11px; width:11px; margin-left:3px"/>')),s&&h.append('<img src="'.concat(g,'" title="').concat(s,'" style="height:11px; width:11px;margin-left:3px"/>')),l&&"Putative_Driver"===l&&h.append('<img src="'.concat(b,'" title="').concat(l,": ").concat(u,'" alt="driver filter" style="height:11px; width:11px;margin-left:3px"/>')),c&&h.append('<img src="'.concat(v,'" title="').concat(c,": ").concat(p,'" alt="driver tiers filter" style="height:11px; width:11px;margin-left:3px"/>')),d&&h.append(function(){var e=i()('<small style="color: #ff0000">');return e.append("&nbsp;Germline"),e}()),t&&h.append("&nbsp;(".concat(f,")")),h})}function o(e,t){var n=new d.a,r=!0,o=!1,a=void 0;try{for(var s,l=e[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;n.increment(u.hugo_gene_symbol,u.direction)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n.entries().map(function(e){var n=m(e.key,2),r=n[0],o=n[1],a=e.value,s=i()("<span>").addClass("nobreak");return s.append('<b class="nobreak">'.concat(r," ").concat(o,"</b>")),t&&s.append("&nbsp;(".concat(a,")")),s})}var a={"-2":"HOMODELETED","-1":"HETLOSS",1:"GAIN",2:"AMPLIFIED"};return function(s){var l=i()("<div>").addClass(_);l.append(T(s,e)).append("<br/>");var u=[],c=[],f=[],y=[],b=[],v=!0,S=!1,w=void 0;try{for(var O,C=s[Symbol.iterator]();!(v=(O=C.next()).done);v=!0)for(var P=O.value,x=0;x<P.data.length;x++){var A=P.data[x],j=A.molecularProfileAlterationType,I=A.hugoGeneSymbol;switch(j){case"MUTATION_EXTENDED":var N={};N.hugo_gene_symbol=I,N.amino_acid_change=A.proteinChange,N.driver_filter=A.driverFilter,N.driver_filter_annotation=A.driverFilterAnnotation,N.driver_tiers_filter=A.driverTiersFilter,N.driver_tiers_filter_annotation=A.driverTiersFilterAnnotation,A.isHotspot&&(N.cancer_hotspots_hotspot=!0),Object(p.o)(A)||(N.germline=!0);var M=A.oncoKbOncogenic;M&&(N.oncokb_oncogenic=M),("fusion"===A.alterationSubType?b:u).push(N);break;case"COPY_NUMBER_ALTERATION":if(a.hasOwnProperty(A.value)){var D={cna:a[A.value],hugo_gene_symbol:I},R=A.oncoKbOncogenic;R&&(D.oncokb_oncogenic=R),c.push(D)}break;case"MRNA_EXPRESSION":case"PROTEIN_LEVEL":var L=A.alterationSubType,G="MRNA_EXPRESSION"===j?f:y;"high"===L?G.push({hugo_gene_symbol:I,direction:"HIGH"}):"low"===L&&G.push({hugo_gene_symbol:I,direction:"LOW"})}}}catch(e){S=!0,w=e}finally{try{v||null==C.return||C.return()}finally{if(S)throw w}}if(b.length>0){l.append("Fusion: "),b=r(b,s.length>1);for(var V=0;V<b.length;V++)V>0&&l.append(","),l.append(b[V]);l.append("<br>")}if(u.length>0){l.append("Mutation: "),u=r(u,s.length>1);for(V=0;V<u.length;V++)V>0&&l.append(", "),l.append(u[V]);l.append("<br>")}if(c.length>0){l.append("Copy Number Alteration: "),c=function(e,t){var n=new d.a,r=!0,o=!1,a=void 0;try{for(var s,l=e[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;n.increment(u.hugo_gene_symbol,u.cna,u.oncokb_oncogenic)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n.entries().map(function(e){var n=m(e.key,3),r=n[0],o=n[1],a=n[2],s=e.value,l=i()("<span>").addClass("nobreak");return l.append('<b class="nobreak">'.concat(r," ").concat(o,"</b>")),a&&l.append("<img src=".concat(g,' title="').concat(a,'" style="height:11px; width:11px;margin-left:3px"/>')),t&&l.append("&nbsp;(".concat(s,")")),l})}(c,s.length>1);for(V=0;V<c.length;V++)V>0&&l.append(", "),l.append(c[V]);l.append("<br>")}if(f.length>0){l.append("MRNA: "),f=o(f,s.length>1);for(V=0;V<f.length;V++)V>0&&l.append(", "),l.append(f[V]);l.append("<br>")}if(y.length>0){l.append("PROT: "),y=o(y,s.length>1);for(V=0;V<y.length;V++)V>0&&l.append(", "),l.append(y[V]);l.append("<br>")}var B=t&&t(),F=new d.a,H=new d.a,U=new d.a,W=new d.a,q=0,z=0,Q=!0,K=!1,Y=void 0;try{for(var X,Z=s[Symbol.iterator]();!(Q=(X=Z.next()).done);Q=!0){var J=X.value,$=k(J.profiled_in,J.not_profiled_in,n,B),ee=!0,te=!1,ne=void 0;try{for(var re,oe=$.dispProfiledGenePanelIds[Symbol.iterator]();!(ee=(re=oe.next()).done);ee=!0){var ie=re.value;F.increment(ie)}}catch(e){te=!0,ne=e}finally{try{ee||null==oe.return||oe.return()}finally{if(te)throw ne}}var ae=!0,se=!1,le=void 0;try{for(var ue,ce=$.dispNotProfiledGenePanelIds[Symbol.iterator]();!(ae=(ue=ce.next()).done);ae=!0){var pe=ue.value;H.increment(pe)}}catch(e){se=!0,le=e}finally{try{ae||null==ce.return||ce.return()}finally{if(se)throw le}}if($.dispProfiledIn){var de=!0,fe=!1,he=void 0;try{for(var me,ye=$.dispProfiledIn[Symbol.iterator]();!(de=(me=ye.next()).done);de=!0){var ge=me.value;U.increment(ge)}}catch(e){fe=!0,he=e}finally{try{de||null==ye.return||ye.return()}finally{if(fe)throw he}}}if($.dispNotProfiledIn){var be=!0,ve=!1,_e=void 0;try{for(var Se,Ee=$.dispNotProfiledIn[Symbol.iterator]();!(be=(Se=Ee.next()).done);be=!0){var we=Se.value;W.increment(we)}}catch(e){ve=!0,_e=e}finally{try{be||null==Ee.return||Ee.return()}finally{if(ve)throw _e}}}$.dispAllProfiled?q+=1:$.dispNotProfiled&&(z+=1)}}catch(e){K=!0,Y=e}finally{try{Q||null==Z.return||Z.return()}finally{if(K)throw Y}}var Oe=F.entries(),Ce=H.entries();if(Oe.length||Ce.length){l.append("Gene Panels: ");var ke=!1,Te=!0,Pe=!1,xe=void 0;try{for(var Ae,je=Oe[Symbol.iterator]();!(Te=(Ae=je.next()).done);Te=!0){var Ie=Ae.value;ke&&l.append(",&nbsp;"),ke=!0,l.append(E(Ie.key[0],!0,s.length>1?Ie.value:void 0))}}catch(e){Pe=!0,xe=e}finally{try{Te||null==je.return||je.return()}finally{if(Pe)throw xe}}var Ne=!0,Me=!1,De=void 0;try{for(var Re,Le=Ce[Symbol.iterator]();!(Ne=(Re=Le.next()).done);Ne=!0){var Ge=Re.value;F.has.apply(F,h(Ge.key))||(ke&&l.append(",&nbsp;"),ke=!0,l.append(E(Ge.key[0],!1,s.length>1?Ge.value:void 0)))}}catch(e){Me=!0,De=e}finally{try{Ne||null==Le.return||Le.return()}finally{if(Me)throw De}}l.append("<br>")}var Ve=U.entries(),Be=W.entries();return q===s.length?(l.append("Profiled in all selected molecular profiles."+(s.length>1?" (".concat(q,")"):"")),l.append("<br>")):z===s.length?(l.append("Not profiled in selected molecular profiles."+(s.length>1?" (".concat(z,")"):"")),l.append("<br>")):(Ve.length&&(l.append("Profiled in: "+Ve.map(function(e){var t=e.key[0],n=t;return B&&t in B&&(n=B[t].name),'<span class="nobreak">'.concat(n).concat(s.length>1?" (".concat(e.value,")"):"","</span>")}).join(", ")),l.append("<br>")),Be.length&&(l.append("<span class=\"nobreak\" style='color:red; font-weight:bold'>Not profiled in: "+Be.map(function(e){var t=e.key[0],n=t;return B&&t in B&&(n=B[t].name),'<span class="nobreak">'.concat(n).concat(s.length>1?" (".concat(e.value,")"):"","</span>")}).join(", ")+"</span>"),l.append("<br>")),q>0&&(l.append("Profiled in all selected molecular profiles."+(s.length>1?" (".concat(q,")"):"")),l.append("<br>")),z>0&&(l.append("Not profiled in selected molecular profiles."+(s.length>1?" (".concat(z,")"):"")),l.append("<br>"))),l}}},,,,function(e,t,n){"use strict";n.d(t,"b",function(){return y}),n.d(t,"a",function(){return g});var r=n(0),o=n(2),i=n(15),a=n(5),s=n.n(a),l=n(30),u=n(9);function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var m=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":h(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},y=17,g=8,b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,d(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return this.props.model?r.createElement(i.Popover,{arrowOffsetTop:y,className:s()("cbioportal-frontent","cbioTooltip"),positionLeft:this.positionLeft,positionTop:this.props.mousePosition.y-y,style:{width:150},placement:this.placement},r.createElement("div",null,r.createElement("div",null,"Number of samples:"," ",r.createElement("strong",null,this.props.model.sampleCount)),r.createElement("div",null,"Range:"," ",r.createElement("strong",null,Object(l.s)(this.props.model.start,this.props.model.end,this.props.model.special))))):null}},{key:"placement",get:function(){return this.props.totalBars<2*this.props.currentBarIndex?"left":"right"}},{key:"positionLeft",get:function(){return"left"===this.placement?this.props.mousePosition.x-(g+150):this.props.mousePosition.x+g}},{key:"transform",get:function(){return"left"===this.placement?"translate(-100%,0%)":void 0}}])&&c(n.prototype,o),a&&c(n,a),t}();m([o.computed],b.prototype,"placement",null),m([o.computed],b.prototype,"positionLeft",null),m([o.computed],b.prototype,"transform",null),b=m([u.observer],b),t.c=b},function(e,t,n){e.exports={portalWidth:"structureViewer-module__portalWidth__250aJ",framedImage:"structureViewer-module__framedImage__3OjST","main-3d-panel":"structureViewer-module__main-3d-panel__2asbr",header:"structureViewer-module__header__243uA",body:"structureViewer-module__body__3BGGR","collapsed-panel":"structureViewer-module__collapsed-panel__3T7vs","increased-size-panel":"structureViewer-module__increased-size-panel__1nCD-","default-option-select":"structureViewer-module__default-option-select__3EsrF","alpha-helix":"structureViewer-module__alpha-helix__3U1NC","beta-sheet":"structureViewer-module__beta-sheet__2rza2",loop:"structureViewer-module__loop__25tQU",highlighted:"structureViewer-module__highlighted__9IwJz","uniform-mutation":"structureViewer-module__uniform-mutation__2nUW-","missense-mutation":"structureViewer-module__missense-mutation__3m1Or","trunc-mutation":"structureViewer-module__trunc-mutation__1VdGC","inframe-mutation":"structureViewer-module__inframe-mutation__bSE4n"}},function(e,t,n){e.exports={portalWidth:"mutationMapper-module__portalWidth__t9qnu",framedImage:"mutationMapper-module__framedImage__2WV_N",filterResetPanel:"mutationMapper-module__filterResetPanel__2aFDu"}},function(e,t,n){"use strict";function r(e){return{genomeNexusUrl:e.genomenexus_url||void 0,isoformOverrideSource:e.isoformOverrideSource,myGeneInfoUrlTemplate:e.mygene_info_url||void 0,uniprotIdUrlTemplate:e.uniprot_id_url||void 0,transcriptSummaryUrlTemplate:e.ensembl_transcript_url||void 0,enableOncoKb:e.show_oncokb,enableGenomeNexus:e.show_genomenexus,enableHotspot:e.show_hotspot,enableMyCancerGenome:e.mycancergenome_show,enableCivic:e.show_civic}}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(2),o=n(36);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.trackVisibility=Object(o.P)()};(function(e,t,n,r){var o,a=arguments.length,s=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(a<3?o(s):a>3?o(t,n,s):o(t,n))||s);a>3&&s&&Object.defineProperty(t,n,s)})([r.observable],a.prototype,"trackVisibility",void 0)},function(e,t,n){"use strict";n.d(t,"a",function(){return b});var r=n(1),o=n(0),i=n(17),a=n.n(i),s=n(971),l=n.n(s),u=n(6),c=n(846),p=n(833);function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var g=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":y(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},b=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,h(t).call(this,e))}var n,i,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,o["Component"]),n=t,(i=[{key:"render",value:function(){return o.createElement("div",null,o.createElement("div",{ref:this.igvDivRefHandler,className:"igvContainer"}))}},{key:"componentDidMount",value:function(){var e=this;this.props.onRenderingStart&&this.props.onRenderingStart();var t={genome:this.props.genome,locus:this.props.locus};l.a.createBrowser(this.igvDiv,t).then(function(t){e.igvBrowser=t,e.igvDiv&&e.updateSearch(e.igvDiv,e.props.disableSearch),e.loadTrackList(t,r.cloneDeep(e.props.tracks)),e.lastRenderedTracks=e.props.tracks,e.props.onRenderingComplete&&e.props.onRenderingComplete()})}},{key:"shouldComponentUpdate",value:function(e){var t=!1;if(!1!==e.isVisible){var n=Object(p.f)(this.lastRenderedTracks||[],e.tracks||[]),r=this.props.genome!==e.genome,o=this.props.locus!==e.locus,i=this.props.disableSearch!==e.disableSearch;(t=r||n.length>0||o||i)&&(this.modifiedTrackNames=n)}return t}},{key:"componentDidUpdate",value:function(){this.igvBrowser&&this.props.locus&&this.igvBrowser.search(this.props.locus),this.igvBrowser&&this.modifiedTrackNames&&this.modifiedTrackNames.length>0&&(this.updateTracks(this.igvBrowser,this.modifiedTrackNames,this.tracksByName),this.modifiedTrackNames=void 0,this.lastRenderedTracks=this.props.tracks),this.igvDiv&&this.updateSearch(this.igvDiv,this.props.disableSearch)}},{key:"loadTrackList",value:function(e,t){var n=this;e.loadTrackList(t).then(function(){n.props.onRenderingComplete&&n.props.onRenderingComplete()}).catch(function(){n.props.onRenderingComplete&&n.props.onRenderingComplete()})}},{key:"updateTracks",value:function(e,t,n){var o=this;t.forEach(function(t){return e.removeTrackByName(t)});var i=t.map(function(e){return r.cloneDeep(n[e])}).filter(function(e){return void 0!==e});i.length>0&&(this.props.onRenderingStart&&this.props.onRenderingStart(),Object(c.a)(function(){o.loadTrackList(e,i)}))}},{key:"updateSearch",value:function(e,t){var n=a()(e).find(".igv-chromosome-select-widget-container select"),r=a()(e).find(".igv-search-container input");t?(r.attr("disabled","true"),n.attr("disabled","true")):(r.attr("disabled",null),n.attr("disabled",null))}},{key:"igvDivRefHandler",value:function(e){this.igvDiv=e}},{key:"tracksByName",get:function(){return Object(p.g)(this.props.tracks)}}])&&d(n.prototype,i),s&&d(n,s),t}();b.defaultProps={genome:"hg19",locus:"all",disableSearch:!1},g([u.default],b.prototype,"igvDivRefHandler",null)},function(e,t,n){e.exports=n(25)(1038)},function(e,t,n){"use strict";var r=n(0),o=n(2),i=n(9),a=n(15),s=n(5),l=n.n(s),u=n(3),c=n(833),p=n(193),d=n(76),f=n.n(d),h=n(6);function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var _=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":v(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},S=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=y(this,g(t).apply(this,arguments))).downloading=!1,e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement(u.d,{overlay:r.createElement("span",null,"Download a copy number segment file for the selected samples"),placement:this.props.tooltipPlacement},r.createElement(a.Button,{className:this.props.buttonClassName,onClick:this.handleDownload,disabled:this.downloading},r.createElement("i",{className:l()({fa:!0,"fa-cloud-download":!this.downloading,"fa-spinner fa-pulse":this.downloading})})))}},{key:"handleDownload",value:function(){var e=this;this.downloading=!0,Object(p.a)(this.props.promise,function(t){f()(Object(c.e)(t),e.props.filename),e.downloading=!1})}}])&&m(n.prototype,o),i&&m(n,i),t}();S.defaultProps={filename:"segments.seg",buttonClassName:"btn btn-sm pull-right",tooltipPlacement:"left"},_([o.observable],S.prototype,"downloading",void 0),_([h.default],S.prototype,"handleDownload",null),S=_([i.observer],S),t.a=S},function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__voGSg",framedImage:"styles-module__framedImage__1XH6x",container:"styles-module__container__16NQq","items-container":"styles-module__items-container__2byHQ","fa-check":"styles-module__fa-check__l2mEf","fa-exclamation-triangle":"styles-module__fa-exclamation-triangle__1RHoj","not-invoked-item":"styles-module__not-invoked-item__2JY4J","item-row":"styles-module__item-row__2FhJM","pulse-spinner":"styles-module__pulse-spinner__16rgL"}},function(e,t,n){"use strict";t.__esModule=!0,t.RootCloseWrapper=t.Transition=t.Position=t.Portal=t.Overlay=t.Modal=t.AutoAffix=t.Affix=void 0;var r=p(n(879)),o=p(n(982)),i=p(n(985)),a=p(n(986)),s=p(n(313)),l=p(n(987)),u=p(n(988)),c=p(n(989));function p(e){return e&&e.__esModule?e:{default:e}}t.Affix=r.default,t.AutoAffix=o.default,t.Modal=i.default,t.Overlay=a.default,t.Portal=s.default,t.Position=l.default,t.Transition=u.default,t.RootCloseWrapper=c.default},function(e,t,n){"use strict";var r=n(834);t.__esModule=!0,t.default=function(e,t){var n=(0,i.default)(e);return n?n.innerHeight:t?e.clientHeight:(0,o.default)(e).height};var o=r(n(835)),i=r(n(976));e.exports=t.default},function(e,t,n){e.exports=n(25)(248)},function(e,t,n){e.exports=n(25)(896)},function(e,t,n){e.exports=n(25)(487)},function(e,t,n){e.exports=n(25)(116)},function(e,t,n){"use strict";var r=n(834);t.__esModule=!0,t.default=function(e){var t=(0,o.default)(e);return t&&t.defaultView||t.parentWindow};var o=r(n(981));e.exports=t.default},function(e,t,n){e.exports=n(25)(154)},function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=m(n(835)),i=m(n(880)),a=m(n(4)),s=m(n(983)),l=m(n(0)),u=m(n(879)),c=m(n(881)),p=m(n(984)),d=m(n(882)),f=m(n(883)),h=m(n(884));function m(e){return e&&e.__esModule?e:{default:e}}var y=r({},u.default.propTypes,{container:a.default.oneOfType([s.default,a.default.func]),autoWidth:a.default.bool}),g=function(e){function t(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));return a.onWindowScroll=function(){a.onUpdate()},a.onWindowResize=function(){a.props.autoWidth&&(0,i.default)(function(){return a.onUpdate()})},a.onDocumentClick=function(){(0,i.default)(function(){return a.onUpdate()})},a.onUpdate=function(){if(a._isMounted){var e=(0,o.default)(a.positioner),t=e.top,n=e.width,r=(0,p.default)(a.props.container),i=void 0;if(r){var s=(0,d.default)((0,f.default)(a)),l=(0,o.default)(r);i=s-l.top-l.height}else i=null;a.updateState(t,i,n)}},a.updateState=function(e,t,n){e===a.state.offsetTop&&t===a.state.offsetBottom&&n===a.state.width||a.setState({offsetTop:e,offsetBottom:t,width:n})},a.state={offsetTop:null,offsetBottom:null,width:null},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){var e=this;this._isMounted=!0,this._windowScrollListener=(0,c.default)((0,h.default)(this),"scroll",function(){return e.onWindowScroll()}),this._windowResizeListener=(0,c.default)((0,h.default)(this),"resize",function(){return e.onWindowResize()}),this._documentClickListener=(0,c.default)((0,f.default)(this),"click",function(){return e.onDocumentClick()}),this.onUpdate()},t.prototype.componentWillReceiveProps=function(){this._needPositionUpdate=!0},t.prototype.componentDidUpdate=function(){this._needPositionUpdate&&(this._needPositionUpdate=!1,this.onUpdate())},t.prototype.componentWillUnmount=function(){this._isMounted=!1,this._windowScrollListener&&this._windowScrollListener.remove(),this._documentClickListener&&this._documentClickListener.remove(),this._windowResizeListener&&this._windowResizeListener.remove()},t.prototype.render=function(){var e=this,t=this.props,n=t.autoWidth,o=t.viewportOffsetTop,i=t.children,a=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["autoWidth","viewportOffsetTop","children"]),s=this.state,c=s.offsetTop,p=s.offsetBottom,d=s.width;delete a.container;var f=Math.max(c,o||0),h=this.props,m=h.affixStyle,y=h.bottomStyle;return n&&(m=r({width:d},m),y=r({width:d},y)),l.default.createElement("div",null,l.default.createElement("div",{ref:function(t){e.positioner=t}}),l.default.createElement(u.default,r({},a,{offsetTop:f,viewportOffsetTop:o,offsetBottom:p,affixStyle:m,bottomStyle:y}),i))},t}(l.default.Component);g.displayName="AutoAffix",g.propTypes=y,g.defaultProps={viewportOffsetTop:0,autoWidth:!0},t.default=g,e.exports=t.default},function(e,t,n){e.exports=n(25)(247)},function(e,t,n){e.exports=n(25)(249)},function(e,t,n){e.exports=n(25)(197)},function(e,t,n){e.exports=n(25)(431)},function(e,t,n){e.exports=n(25)(892)},function(e,t,n){e.exports=n(25)(328)},function(e,t,n){e.exports=n(25)(422)},function(e,t,n){},function(e,t,n){e.exports=n(25)(834)},,function(e,t,n){e.exports=n(25)(200)},function(e,t,n){e.exports=n(25)(420)},,function(e,t,n){e.exports=n(25)(202)},function(e,t,n){e.exports=n(25)(846)},function(e,t,n){e.exports=n(25)(244)},function(e,t,n){e.exports=n(25)(874)},function(e,t,n){e.exports=n(25)(875)},function(e,t,n){e.exports=n(25)(451)},function(e,t,n){e.exports=n(25)(833)},function(e,t,n){e.exports=n(25)(448)},,function(e,t,n){e.exports=n(25)(165)},function(e,t,n){e.exports=n(25)(369)},function(e,t,n){e.exports=n(25)(879)},function(e,t,n){e.exports=n(25)(151)},function(e,t,n){e.exports=n(25)(456)},function(e,t,n){e.exports=n(25)(204)},,function(e,t,n){e.exports=n.p+"reactapp/images/ac30afc0653ff15c1ea9fd9cbae0414a.png"},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjQsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDIwIDIwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxsaW5lIGZpbGw9Im5vbmUiIHgxPSI2Ljc5MiIgeTE9IjUuNjY3IiB4Mj0iNi43OTIiIHkyPSIxMi4xMjUiLz4NCjxwb2x5Z29uIGZpbGw9IiMzMzMzMzMiIHBvaW50cz0iMCw1IDAsMCA1LDAgIi8+DQo8cG9seWdvbiBmaWxsPSIjMzMzMzMzIiBwb2ludHM9IjE0Ljk5OSwwIDIwLDAgMjAsNSAiLz4NCjxwb2x5Z29uIGZpbGw9IiMzMzMzMzMiIHBvaW50cz0iMjAsMTUgMjAsMjAgMTUsMjAgIi8+DQo8cG9seWdvbiBmaWxsPSIjMzMzMzMzIiBwb2ludHM9IjUsMjAgMCwyMCAwLDE1ICIvPg0KPHJlY3QgeD0iMy43NSIgeT0iNC43MDgiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzMzMzMyIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHdpZHRoPSIxMi41IiBoZWlnaHQ9IjEwLjU4MyIvPg0KPC9zdmc+DQo="},function(e,t,n){},function(e,t,n){"use strict";(function(e){var r=n(1),o=n(0),i=n(23),a=n.n(i),s=n(797),l=n(787),u=n.n(l),c=n(5),p=n.n(c),d=n(1096),f=n(9),h=n(2),m=n(152),y=n.n(m),g=n(20),b=n(798),v=n(15),_=n(1026),S=n.n(_),E=n(8),w=n(6),O=n(842),C=n(1033),k=n(897),T=n(192);function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var M=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":N(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},D=function(t){function n(e){var t,i=this;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=A(this,j(n).call(this,e))).handlers={onSummaryClick:function(){t.store.openSummary()},onCheckAllFiltered:function(){t.logic.mainView.toggleAllFiltered()},onClearFilter:function(){t.store.setSearchText("")}},t.CancerTypeList=Object(f.observer)(function(){var e=t.logic.cancerTypeListView.getChildCancerTypes(t.store.treeData.rootCancerType);return o.createElement("ul",{className:u.a.cancerTypeList},e.map(function(e,t){return o.createElement(i.CancerTypeListItem,{key:t,cancerType:e})}))}),t.CancerTypeListItem=Object(f.observer)(function(e){var n,i=e.cancerType,a=Object(h.expr)(function(){return t.logic.cancerTypeListView.getDescendantCancerStudies(i).length}),s=r.includes(t.store.selectedCancerTypeIds,i.cancerTypeId),l=t.logic.isHighlighted(i),c=p()((P(n={},u.a.selectable,!0),P(n,u.a.selected,s),P(n,u.a.matchingNodeText,!!t.store.searchText&&l),P(n,u.a.nonMatchingNodeText,!!t.store.searchText&&!l),P(n,u.a.containsSelectedStudies,Object(h.expr)(function(){return t.logic.cancerTypeContainsSelectedStudies(i)})),n));return o.createElement("li",{className:c,onMouseDown:t.getCancerTypeListClickHandler(i)},o.createElement("span",{className:u.a.cancerTypeListItemLabel},i.name),o.createElement("span",{className:u.a.cancerTypeListItemCount},a))}),t.store=t.props.queryStore,t}var i,l,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(n,o["Component"]),i=n,(l=[{key:"getCancerTypeListClickHandler",value:function(e){var t=this;return function(n){return t.store.selectCancerType(e,n.ctrlKey)}}},{key:"selectTCGAPanAtlas",value:function(){this.logic.mainView.selectAllMatchingStudies(O.a)}},{key:"selectMatchingStudies",value:function(e){e&&(1===e.length&&/^\*.*\*$/.test(e[0])?this.logic.mainView.selectAllMatchingStudies(e[0].replace(/\*/g,"")):this.logic.mainView.selectAllMatchingStudies(e))}},{key:"componentDidMount",value:function(){var e,t=this;this.windowSizeDisposer=Object(h.reaction)(function(){return T.a.size},function(){t.props.forkedMode&&(clearTimeout(e),e=setTimeout(function(){return t.setListHeight()},200))},{fireImmediately:!0})}},{key:"componentWillUnmount",value:function(){this.windowSizeDisposer()}},{key:"setListHeight",value:function(){var t=e(a.a.findDOMNode(this)),n=T.a.size.height-t.offset().top;n=n<200?200:n,t.css("height",n-75)}},{key:"render",value:function(){var e=this,t=this.logic.mainView.getSelectionReport(),n=t.shownStudies,i=t.shownAndSelectedStudies,a=this.logic.mainView.quickSelectButtons(E.b.serverConfig.skin_quick_select_buttons);return o.createElement(s.a,{overflow:!0,"data-test":"studyList",className:u.a.CancerStudySelector},o.createElement(s.b,{overflow:!0,className:u.a.CancerStudySelectorHeader},o.createElement(b.a,{promises:[this.store.cancerTypes,this.store.cancerStudies]},"Select Studies for Visualization & Analysis:"),this.store.selectableStudiesSet.isComplete&&o.createElement("div",null,o.createElement(k.a,{store:this.store})),o.createElement(f.Observer,null,function(){var t=E.a.skin_example_study_queries(E.b.serverConfig.skin_example_study_queries||"");e.store.searchText&&t.indexOf(e.store.searchText)<0&&(t=[e.store.searchText].concat(t));var n=null,r=t.map(function(e,t){return{value:e,sortKey:t}});return o.createElement("div",{style:{display:"flex",alignItems:"center"}},e.store.searchText&&o.createElement("span",{"data-test":"clearStudyFilter",onClick:function(t){e.autosuggest.setState({inputValue:""}),e.handlers.onClearFilter()},style:{fontSize:18,cursor:"pointer",color:"#999999",position:"relative",left:164,zIndex:10}},"x"),o.createElement(S.a,{datalist:r,ref:function(t){return e.autosuggest=t},placeholder:"Search...",bsSize:"small",onChange:function(t){null!==n&&(window.clearTimeout(n),n=null),n=window.setTimeout(function(){e.store.setSearchText(t)},400)},onFocus:function(t){0===t.length&&setTimeout(function(){e.autosuggest.setState({open:!0})},400)}}))})),o.createElement(g.If,{condition:this.studiesDataComplete},o.createElement(s.b,{className:u.a.cancerStudySelectorBody},o.createElement(g.If,{condition:this.store.maxTreeDepth>0},o.createElement(g.Then,null,o.createElement("div",{className:u.a.cancerTypeListContainer},o.createElement(this.CancerTypeList,null)))),o.createElement("div",{className:u.a.cancerStudyListContainer,"data-test":"cancerTypeListContainer"},o.createElement("div",{className:"checkbox",style:{marginLeft:19}},o.createElement(g.If,{condition:n.length>0},o.createElement(g.If,{condition:!this.logic.mainView.isFiltered&&!r.isEmpty(a)},o.createElement(g.Then,null,o.createElement("div",{className:u.a.quickSelect},o.createElement(C.a,{onSelect:this.selectMatchingStudies,buttonsConfig:a}))),o.createElement(g.Else,null,o.createElement("label",null,o.createElement("input",{type:"checkbox","data-test":"selectAllStudies",style:{top:-2},onClick:this.handlers.onCheckAllFiltered,checked:i.length===n.length}),o.createElement("strong",null,i.length===n.length?"Deselect all listed studies ".concat(n.length<this.store.cancerStudies.result.length?"matching filter":""," (").concat(n.length,")"):"Select all listed studies ".concat(n.length<this.store.cancerStudies.result.length?"matching filter":"","  (").concat(n.length,")")))))),o.createElement(g.If,{condition:this.store.cancerStudies.isComplete&&this.store.cancerTypes.isComplete&&0===n.length},o.createElement("p",null,"There are no studies matching your filter."))),o.createElement(d.a,null)))),o.createElement(v.Modal,{className:p()(u.a.SelectedStudiesWindow,"cbioportal-frontend"),show:this.store.showSelectedStudiesOnly,onHide:function(){return e.store.showSelectedStudiesOnly=!1}},o.createElement(v.Modal.Header,{closeButton:!0},o.createElement(v.Modal.Title,null,"Selected Studies")),o.createElement(v.Modal.Body,null,o.createElement(d.a,{showSelectedStudiesOnly:!0}))))}},{key:"studiesDataComplete",get:function(){return this.store.cancerTypes.isComplete&&this.store.cancerStudies.isComplete&&this.store.userVirtualStudies.isComplete}},{key:"logic",get:function(){return this.store.studyListLogic}}])&&x(i.prototype,l),c&&x(i,c),n}();M([h.computed],D.prototype,"studiesDataComplete",null),M([y.a],D.prototype,"getCancerTypeListClickHandler",null),M([w.default,h.action],D.prototype,"selectTCGAPanAtlas",null),M([w.default,h.action],D.prototype,"selectMatchingStudies",null),D=M([f.observer],D),t.a=D}).call(this,n(17))},function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__3uFIJ",framedImage:"styles-module__framedImage__3chnD",padded:"styles-module__padded__3vpqj",column:"styles-module__column__2pa-R",row:"styles-module__row__3l99O"}},function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__agNQJ",framedImage:"styles-module__framedImage__JjRC-",selectAllStudies:"styles-module__selectAllStudies__2gWhF",SelectedStudyList:"styles-module__SelectedStudyList__27Hpt",StudyList:"styles-module__StudyList__2mxsz",deselectAll:"styles-module__deselectAll__26p-l",Level0:"styles-module__Level0__1RUPZ",Level1:"styles-module__Level1__2R0IW",Level3:"styles-module__Level3__1vXaT",Level4:"styles-module__Level4__3ZJ1g",Level2:"styles-module__Level2__3AEJ-",CancerType:"styles-module__CancerType__Zm_qX",Study:"styles-module__Study__398QL",indentArrow:"styles-module__indentArrow__32udx",SelectAll:"styles-module__SelectAll__3SSsJ",StudyName:"styles-module__StudyName__3IA_4",DeletedStudy:"styles-module__DeletedStudy__2axOg",StudySamples:"styles-module__StudySamples__3_cjf",StudyMeta:"styles-module__StudyMeta__3UFnp",StudyLinks:"styles-module__StudyLinks__cMCHs",summaryIcon:"styles-module__summaryIcon__WR75I",iconWithTooltip:"styles-module__iconWithTooltip__2yBW3",icon:"styles-module__icon__1ZBlQ",trashIcon:"styles-module__trashIcon__1z-wJ",infoCircleIcon:"styles-module__infoCircleIcon__27xSR",tooltip:"styles-module__tooltip__b54B6",fadein:"styles-module__fadein__2G2-B"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(1019);var r=n(1020);t.JsonToTable=r.default},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1021);t.default=r.default},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);n(1022);var a=n(893),s=n(893),l=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.renderObject=function(e,t,n){var o,l=[];switch(t&&l.push(r.renderRowHeader(t)),s.default.getObjectType(e)){case a.JSONObjectType.ObjectWithNonNumericKeys:o=t?i.createElement("table",{key:"__j2t_tableObj"+n},i.createElement("tbody",{key:"__j2t_bObj"+n},r.renderRows(e))):r.renderRows(e);break;case a.JSONObjectType.Array:o=t?i.createElement("table",{key:"__j2t_tableArr"+n},i.createElement("tbody",{key:"__j2t_bArr"+n},r.parseArray(e))):r.parseArray(e)}l.push(o);var u=l.map(function(e){return e});return t?i.createElement("tr",{key:"__j2t_trObj"+n},r.renderCell({content:u,colspan:2})):u},r.renderCell=function(e){var t=e.content,n=e.colspan,r=e.isHeader?i.createElement("strong",null,t):t;return i.createElement("td",{colSpan:n||0,key:"__j2t_trObj"+r},r)},r.renderHeader=function(e){return i.createElement("tr",{key:"__j2t_trHeader"},e.map(function(e){return r.renderCell({content:e})}))},r.renderValues=function(e){return i.createElement("tr",{key:"__j2t_trArrString"},e.map(function(e){return r.renderCell({content:e})}))},r.renderRowValues=function(e,t){return e.map(function(e,n){return i.createElement("tr",{key:"__j2t_Arr"+n.toString()},t.map(function(t){return s.default.getObjectType(t)===a.JSONObjectType.Primitive?r.renderCell({content:e[t]}):r.renderObject(e[t],t,n)}))})},r.parseArray=function(e){var t=[],n=s.default.getUniqueObjectKeys(e);return"number"!==s.default.checkLabelTypes(n.labels)?(t.push(r.renderHeader(n.labels)),t.push(r.renderRowValues(e,n.labels))):t.push(r.renderValues(e)),t},r.renderRow=function(e,t,n){return i.createElement("tr",{key:"__j2t_tr"+n},i.createElement("td",{key:"__j2t_tdk"+n},i.createElement("strong",null,e)),i.createElement("td",{key:"__j2t_tdv"+n},t))},r.renderRowHeader=function(e){return i.createElement("div",{key:"__j2t_rw"+e},i.createElement("strong",null,e))},r.renderRows=function(e,t){return Object.keys(e).map(function(t,n){var o=e[t];return s.default.getObjectType(o)===a.JSONObjectType.Primitive?r.renderRow(t,o,n):r.renderObject(o,t,n)})},r}return o(t,e),t.prototype.render=function(){return i.createElement("div",{className:"json-to-table"},i.createElement("table",{key:"__j2t_root_table"},i.createElement("tbody",{key:"__j2t_root_tbody"},this.renderObject(this.props.json,void 0,0))))},t}(i.Component);t.default=l},function(e,t,n){},function(e,t,n){},function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__1fCuf",framedImage:"styles-module__framedImage__1w-Q4",SectionHeader:"styles-module__SectionHeader__3RwOA",error:"styles-module__error__1QyPg"}},function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__3FkcF",framedImage:"styles-module__framedImage__Jd87U",error:"styles-module__error__19z3B",icon:"styles-module__icon__1tBLC"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectListAdapter=t.MapListAdapter=t.ArrayListAdapter=t.EmptyListAdapter=t.ListAdapter=t.ItemAdapter=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=S(n(5)),a=S(n(837)),s=S(n(894)),l=S(n(4)),u=S(n(0)),c=n(15),p=S(n(23)),d=S(n(113)),f=S(n(1027)),h=S(n(1028)),m=S(n(895)),y=S(n(814)),g=S(n(1029)),b=S(n(1030)),v=S(n(1031)),_=S(n(1032));function S(e){return e&&e.__esModule?e:{default:e}}function E(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}t.ItemAdapter=m.default,t.ListAdapter=y.default,t.EmptyListAdapter=g.default,t.ArrayListAdapter=b.default,t.MapListAdapter=v.default,t.ObjectListAdapter=_.default;var w=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n=t.__proto__||Object.getPrototypeOf(t)).call.apply(n,[this,e].concat(E(o))));a._itemAdapter=e.itemAdapter||new m.default,a._itemAdapter.receiveProps(e),a._listAdapter=e.datalistAdapter||a._getListAdapter(e.datalist),a._listAdapter.receiveProps(e,a._itemAdapter);var s=a._getValueFromProps(e),l=s.inputValue,u=s.inputItem,c=s.inputItemEphemeral,p=s.selectedItems;a._setValueMeta(u,c,!0,!0),a._lastValidItem=u,a._lastValidValue=l,a._keyPressCount=0,a.state={open:!1,disableFilter:!1,inputValue:l,inputValueKeyPress:0,inputFocused:!1,selectedItems:p,searchValue:null},a._lastOnChangeValue=a._getCurrentValue(),a._lastOnSelectValue=u;var d=a;return d._renderSelected=a._renderSelected.bind(a),d._getItemKey=a._getItemKey.bind(a),d._isSelectedItem=a._isSelectedItem.bind(a),d._renderSuggested=a._renderSuggested.bind(a),d._handleToggleClick=a._handleToggleClick.bind(a),d._handleInputChange=a._handleInputChange.bind(a),d._handleItemSelect=a._handleItemSelect.bind(a),d._removeItem=a._removeItem.bind(a),d._handleShowAll=a._handleShowAll.bind(a),d._handleKeyDown=a._handleKeyDown.bind(a),d._handleKeyPress=a._handleKeyPress.bind(a),d._handleMenuClose=a._handleMenuClose.bind(a),d._handleInputFocus=a._handleInputFocus.bind(a),d._handleInputBlur=a._handleInputBlur.bind(a),d._handleFocus=a._handleFocus.bind(a),d._handleBlur=a._handleBlur.bind(a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u["default"].Component),o(t,null,[{key:"defaultInputSelect",value:function(e,t,n){switch(e.type){case"text":case"search":case"url":case"tel":case"password":if(e.setSelectionRange)e.setSelectionRange(t.length,n.length);else if(e.createTextRange){var r=e.createTextRange();r.moveEnd("character",n.length),r.moveStart("character",t.length),r.select()}}}}]),o(t,[{key:"_getListAdapter",value:function(e){if(null==e)return new g.default;if(Array.isArray(e))return new b.default;if(e instanceof Map)return new v.default;if("object"==typeof e)return new _.default;throw Error("Unexpected datalist type: datalistAdapter required")}},{key:"_getValueFromProps",value:function(e){var t="",n=null,r=!1,o=[],i=e.value||e.defaultValue;if(null!=i)if(e.multiple)Array.isArray(i)?o=this._filterItems(i,e):(0,d.default)(!i,"Array expected for value property");else if(e.valueIsItem){var a=this._itemAdapter.getInputValue(i);null!=e.datalist?null!=(n=this._listAdapter.findMatching(e.datalist,a))?t=n===i?a:this._itemAdapter.getInputValue(n):e.datalistOnly&&!e.datalistPartial?this._warnInvalidValue(i):(t=a,n=i):(t=a,n=i)}else i&&(null!=e.datalist?null!=(n=this._listAdapter.findMatching(e.datalist,i))?t=this._itemAdapter.getInputValue(n):e.datalistOnly&&!e.datalistPartial?this._warnInvalidValue(i):(t=i.toString(),n=this._itemAdapter.newFromValue(i),r=!0):(t=i.toString(),n=this._itemAdapter.newFromValue(i),r=!0));return{inputValue:t,inputItem:n,inputItemEphemeral:r,selectedItems:o}}},{key:"_filterItems",value:function(e,t){if(null!=t.datalist||!t.allowDuplicates){var n=[],r={},o=!1,i=!0,a=!1,s=void 0;try{for(var l,u=e[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value,p=this._itemAdapter.getInputValue(c);if(t.allowDuplicates||!r[p]){var d=this._listAdapter.findMatching(t.datalist,p);null!=d?(n.push(d),r[p]=!0,o=!0):t.datalistOnly&&!t.datalistPartial?(this._warnInvalidValue(p),o=!0):(n.push(c),r[p]=!0)}else o=!0}}catch(e){a=!0,s=e}finally{try{!i&&u.return&&u.return()}finally{if(a)throw s}}if(o)return n}return e}},{key:"_warnInvalidValue",value:function(e){(0,d.default)(!1,'Value "%s" does not match any datalist value',e)}},{key:"_setInputValue",value:function(e,t){this.setState({inputValue:e,inputValueKeyPress:this._keyPressCount},t)}},{key:"_setValueMeta",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null!=e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;this._inputItem=e,this._inputItemEphemeral=t,this._valueIsValid=n,this._valueWasValidated=r}},{key:"_clearInput",value:function(){this._setValueMeta(null,!1,!0,!0),this._setInputValue("")}},{key:"_getValueUsing",value:function(e,t,n,r){return e.multiple?r:e.valueIsItem?n:t}},{key:"_getCurrentValue",value:function(){return this._getValueUsing(this.props,this.state.inputValue,this._inputItem,this.state.selectedItems)}},{key:"componentDidMount",value:function(){this._autoCompleteAfterRender=!this.refs.input.setSelectionRange}},{key:"componentWillReceiveProps",value:function(e){if(e.itemAdapter!=this.props.itemAdapter&&(this._itemAdapter=e.itemAdapter||new m.default),this._itemAdapter.receiveProps(e),e.datalist!=this.props.datalist||e.datalistAdapter!=this.props.datalistAdapter)if(e.datalistAdapter)this._listAdapter=e.datalistAdapter;else{var t=this._getListAdapter(e.datalist);t.constructor!=this._listAdapter.constructor&&(this._listAdapter=t)}this._listAdapter.receiveProps(e,this._itemAdapter);var n=e.value,r=this.state.inputValue,o=n!==this.props.value&&n!==this._getValueUsing(e,r,this._inputItem,this.state.selectedItems),i=void 0,a=void 0,s=void 0,l=void 0;if(!o){if(e.datalistOnly){var u=!e.datalistPartial&&null!=e.datalist,c=!this.props.datalistOnly||!e.datalistPartial&&this.props.datalistPartial||e.datalist!=this.props.datalist;r?(null==(i=this._listAdapter.findMatching(e.datalist,r))&&(u||this._inputItemEphemeral?this._inputItemEphemeral&&n===r&&(s=!0):i=this._inputItem),(a=null==i&&c)&&this._focused&&(this._setValueMeta(null,!1,!1,!0),c&&u&&null!=this._lastValidItem&&(this._lastValidItem=this._listAdapter.findMatching(e.datalist,this._lastValidValue),null==this._lastValidItem&&(this._lastValidValue="")),a=!1)):(i=null,a=!1),l=e.multiple&&u&&c}e.multiple&&!e.allowDuplicates&&this.props.allowDuplicates&&(l=!0)}if(o||a){var p=void 0,d=void 0;if(s)r="",p=!1,d=[];else{var f=this._getValueFromProps(e);r=f.inputValue,i=f.inputItem,p=f.inputItemEphemeral,d=f.selectedItems}i===this._inputItem&&this._focused?o&&e.multiple&&this.setState({selectedItems:d}):(this._setValueMeta(i,p,!0,!0),this._setInputValue(r),this.setState({selectedItems:d}),l=!1,this._lastValidItem=i,this._lastValidValue=r,o&&(this._lastOnChangeValue=this._getValueUsing(e,r,i,d)))}else r&&e.datalist!=this.props.datalist&&this._focused&&this._checkAutoComplete(r,e);if(l){var h=this._filterItems(this.state.selectedItems,e);this.setState({selectedItems:h})}e.datalistMessage&&e.datalistMessage!=this.props.datalistMessage&&this._focused&&this._open("message",e)}},{key:"shouldComponentUpdate",value:function(e,t){return!(0,a.default)(this.props,e)||!(0,a.default)(this.state,t)}},{key:"componentWillUpdate",value:function(e,t){var n=this.refs.suggestions;this._menuFocusedBeforeUpdate=n&&n.isFocused();var r=t.inputValue;if(r!=this.state.inputValue){var o=void 0,i=void 0,a=void 0;if(this._valueWasValidated?(o=this._inputItem,a=this._valueIsValid):(r?null!=(o=this._listAdapter.findMatching(e.datalist,r))||e.datalistOnly?(i=!1,a=null!=o):(o=this._itemAdapter.newFromValue(r),i=!0,a=!0):(o=null,i=!1,a=!e.required),this._setValueMeta(o,i,a)),a&&(this._lastValidItem=o,this._lastValidValue=o&&!i?this._itemAdapter.getInputValue(o):r),a){var s=e.multiple,l=e.onChange;if(!s&&l){var u=this._getValueUsing(e,r,o,t.selectedItems);u!==this._lastOnChangeValue&&(this._lastOnChangeValue=u,l(u))}var c=e.onSelect;c&&o!==this._lastOnSelectValue&&(this._lastOnSelectValue=o,c(o))}}var p=e.onToggle;p&&t.open!=this.state.open&&p(t.open)}},{key:"componentDidUpdate",value:function(e,t){this.state.open&&!t.open&&"keydown"===this._lastOpenEventType||this.state.disableFilter&&!t.disableFilter&&this._menuFocusedBeforeUpdate?this.refs.suggestions.focusFirst():!this.state.open&&t.open&&this._menuFocusedBeforeUpdate&&(this._menuFocusedBeforeUpdate=!1,this._focusInput())}},{key:"componentWillUnmount",value:function(){clearTimeout(this._focusTimeoutId),this._focusTimeoutId=null,clearTimeout(this._searchTimeoutId),this._searchTimeoutId=null}},{key:"_focusInput",value:function(){var e=p.default.findDOMNode(this.refs.input);e instanceof HTMLElement&&e.focus()}},{key:"_open",value:function(e,t){this._lastOpenEventType=e;var n="autocomplete"!==e&&this._hasNoOrExactMatch(t);this.setState({open:!0,disableFilter:n});var r=t.onSearch,o=this.state,i=o.inputValue,a=o.searchValue;r&&a!==i&&(this.setState({searchValue:i}),r(i))}},{key:"_close",value:function(){this.setState({open:!1})}},{key:"_toggleOpen",value:function(e,t){this.state.open?this._close():this._open(e,t)}},{key:"_canOpen",value:function(){var e=this.props.datalist;return null==e&&this.props.onSearch||!this._listAdapter.isEmpty(e)||!!this.props.datalistMessage}},{key:"_hasNoOrExactMatch",value:function(e){var t=this;if(null!=this._inputItem&&!this._inputItemEphemeral)return!0;var n=this._itemAdapter.foldValue(this.state.inputValue);return null==this._listAdapter.find(e.datalist,function(e){return t._itemAdapter.itemIncludedByInput(e,n)})}},{key:"render",value:function(){var e=this.props.showToggle,t=this._canOpen(),n="auto"===e?t:e,r={autosuggest:!0,open:this.state.open,disabled:this.props.disabled,dropdown:n&&!this.props.dropup,dropup:n&&this.props.dropup};return u.default.createElement("div",{key:"dropdown",className:(0,i.default)(r),onFocus:this._handleFocus,onBlur:this._handleBlur},this._renderInputGroup(n,t),this._renderMenu())}},{key:"_renderInputGroup",value:function(e,t){var n=this.props.addonBefore?u.default.createElement("span",{className:"input-group-addon",key:"addonBefore"},this.props.addonBefore):null,r=this.props.addonAfter?u.default.createElement("span",{className:"input-group-addon",key:"addonAfter"},this.props.addonAfter):null,o=this.props.buttonBefore?u.default.createElement("span",{className:"input-group-btn"},this.props.buttonBefore):null,a=e&&this._renderToggle(t),s=a||this.props.buttonAfter?u.default.createElement("span",{className:"input-group-btn"},this.props.buttonAfter,a):null,l=(0,i.default)({"input-group":n||r||o||s,"input-group-sm":"small"===this.props.bsSize,"input-group-lg":"large"===this.props.bsSize,"input-group-toggle":!!a});return l?u.default.createElement("div",{className:l,key:"input-group"},n,o,this._renderChoices(),r,s):this._renderChoices()}},{key:"_renderToggle",value:function(e){return u.default.createElement(c.Dropdown.Toggle,{ref:"toggle",key:"toggle",id:this.props.toggleId,bsSize:this.props.bsSize,disabled:this.props.disabled||!e,open:this.state.open,onClick:this._handleToggleClick,onKeyDown:this._handleKeyDown})}},{key:"_renderChoices",value:function(){if(this.props.multiple){var e=this.props.choicesClass,t=void 0===e?f.default:e;return u.default.createElement(t,{ref:"choices",autoHeight:!(this.props.showToggle||this.props.addonAfter||this.props.addonBefore||this.props.buttonAfter||this.props.buttonBefore),disabled:this.props.disabled,focused:this.state.inputFocused,inputValue:this.state.inputValue,items:this.state.selectedItems,onKeyPress:this._handleKeyPress,onRemove:this._removeItem,renderItem:this._renderSelected},this._renderInput())}return this._renderInput()}},{key:"_renderSelected",value:function(e){return this._itemAdapter.renderSelected(e)}},{key:"_renderInput",value:function(){var e=this.context.$bs_formGroup,n=e&&e.controlId,o={},a=!0,s=!1,l=void 0;try{for(var c,p=Object.keys(this.props)[Symbol.iterator]();!(a=(c=p.next()).done);a=!0){var d=c.value;t.propTypes[d]||(o[d]=this.props[d])}}catch(e){s=!0,l=e}finally{try{!a&&p.return&&p.return()}finally{if(s)throw l}}var f=!this.props.multiple||!this.state.selectedItems.length;return u.default.createElement("input",r({autoComplete:"off"},o,{className:(0,i.default)(this.props.className,{"form-control":!this.props.multiple}),ref:"input",key:"input",id:n,disabled:this.props.disabled,required:this.props.required&&f,placeholder:f?this.props.placeholder:void 0,type:this.props.type,value:this.state.inputValue,onChange:this._handleInputChange,onKeyDown:this._handleKeyDown,onKeyPress:this._handleKeyPress,onFocus:this._handleInputFocus,onBlur:this._handleInputBlur}))}},{key:"_renderMenu",value:function(){var e=this;this._pseudofocusedItem=null;var t=this.state.open;if(!t)return null;var n=this.props.datalist,r=this._itemAdapter.foldValue(this.state.inputValue);this._foldedInputValue=r;var o=void 0;o=this.state.disableFilter?this._listAdapter.toArray(n):this._listAdapter.filter(n,function(t){return e._itemAdapter.itemIncludedByInput(t,r)&&e._allowItem(t)});var i=(o=this._itemAdapter.sortItems(o,r)).length<this._listAdapter.getLength(n),a=void 0;o.length>0&&this.state.inputFocused&&(!this.props.multiple||this.props.datalistOnly)&&(this._pseudofocusedItem=o[a=0]);var s=this.props,l=s.suggestionsClass,c=void 0===l?h.default:l,p=s.datalistMessage,d=s.onDatalistMessageSelect,f=s.toggleId;return u.default.createElement(c,{ref:"suggestions",datalistMessage:p,filtered:i,focusedIndex:a,getItemKey:this._getItemKey,isSelectedItem:this._isSelectedItem,items:o,labelledBy:f,onClose:this._handleMenuClose,onDatalistMessageSelect:d,onDisableFilter:this._handleShowAll,onSelect:this._handleItemSelect,open:t,renderItem:this._renderSuggested})}},{key:"_allowItem",value:function(e){var t=this;if(this.props.allowDuplicates)return!0;var n=this._itemAdapter.getInputValue(e);return!this.state.selectedItems.find(function(e){return t._itemAdapter.getInputValue(e)===n})}},{key:"_getItemKey",value:function(e){return this._itemAdapter.getReactKey(e)}},{key:"_isSelectedItem",value:function(e){return this._itemAdapter.itemMatchesInput(e,this._foldedInputValue)}},{key:"_renderSuggested",value:function(e){return this._itemAdapter.renderSuggested(e)}},{key:"_handleToggleClick",value:function(){this._toggleOpen("click",this.props)}},{key:"_handleInputChange",value:function(e){var t=this,n=e.target.value,r=this._keyPressCount>this.state.inputValueKeyPress;if(r&&n?this._autoCompleteAfterRender?(this._setValueMeta(),this._setInputValue(n,function(){t._checkAutoComplete(n,t.props)})):this._checkAutoComplete(n,this.props)||(this._setValueMeta(),this._setInputValue(n)):(this._setValueMeta(),this._setInputValue(n)),r||this.state.open){var o=this.props.onSearch;o&&(clearTimeout(this._searchTimeoutId),this._searchTimeoutId=setTimeout(function(){t._searchTimeoutId=null,n!=t.state.searchValue&&(t.setState({searchValue:n}),o(n))},this.props.searchDebounce))}}},{key:"_checkAutoComplete",value:function(e,t){var n=this,r=!1,o=t.datalist,i=this._itemAdapter.foldValue(e),a=this._listAdapter.filter(o,function(e){return n._itemAdapter.itemIncludedByInput(e,i)&&n._allowItem(e)});if(a.length>0){var s=t.datalistOnly,l=t.datalistPartial;if(1===a.length&&s&&!l){var u=a[0],c=this._itemAdapter.getInputValue(u),p=void 0,d=t.inputSelect;if(e!=c&&d&&this._itemAdapter.foldValue(c).startsWith(i)){var f=this.refs.input;p=function(){d(f,e,c)}}this._setValueMeta(u),this._setInputValue(c,p),r=!0,(this.state.open?t.closeOnCompletion:e!=c&&!t.closeOnCompletion)&&this._toggleOpen("autocomplete",t)}else{var h=a.find(function(e){return n._itemAdapter.itemMatchesInput(e,i)});h&&(this._setValueMeta(h),this._setInputValue(e),r=!0),this.state.open||h&&!(a.length>1)||this._open("autocomplete",t)}}return r}},{key:"_handleItemSelect",value:function(e){if(this.props.multiple)this._addItem(e);else{var t=this._itemAdapter.getInputValue(e);this._setValueMeta(e),this._setInputValue(t)}this._close()}},{key:"_addItem",value:function(e){if(this._allowItem(e)){var t=[].concat(E(this.state.selectedItems),[e]);this.setState({selectedItems:t});var n=this.props,r=n.onAdd,o=n.onChange;r&&r(e),o&&o(t)}this._clearInput(),this.state.open&&this._close()}},{key:"_removeItem",value:function(e){var t=this.state.selectedItems,n=t.slice(0,e).concat(t.slice(e+1));this.setState({selectedItems:n});var r=this.props,o=r.onRemove,i=r.onChange;o&&o(e),i&&i(n)}},{key:"_addInputValue",value:function(){return!!this._inputItem&&(this._addItem(this._inputItem),!0)}},{key:"_handleShowAll",value:function(){this.setState({disableFilter:!0})}},{key:"_handleKeyDown",value:function(e){if(!this.props.disabled)switch(e.keyCode||e.which){case s.default.codes.down:case s.default.codes["page down"]:this.state.open?this.refs.suggestions.focusFirst():this._canOpen()&&this._open("keydown",this.props),e.preventDefault();break;case s.default.codes.left:case s.default.codes.backspace:this.refs.choices&&this.refs.input&&0===this._getCursorPosition(this.refs.input)&&(this.refs.choices.focusLast(),e.preventDefault());break;case s.default.codes.right:this.refs.choices&&this.refs.input&&this._getCursorPosition(this.refs.input)===this.state.inputValue.length&&(this.refs.choices.focusFirst(),e.preventDefault());break;case s.default.codes.enter:if(this.props.multiple&&this.state.inputValue&&(e.preventDefault(),this._addInputValue()))break;this.state.open&&this.state.inputFocused&&(e.preventDefault(),this._pseudofocusedItem?this._handleItemSelect(this._pseudofocusedItem):this._close());break;case s.default.codes.esc:case s.default.codes.tab:this._handleMenuClose(e)}}},{key:"_getCursorPosition",value:function(e){var t=p.default.findDOMNode(e);if(t instanceof HTMLInputElement)return t.selectionStart}},{key:"_handleKeyPress",value:function(){++this._keyPressCount}},{key:"_handleMenuClose",value:function(){this.state.open&&this._close()}},{key:"_handleInputFocus",value:function(){this.setState({inputFocused:!0})}},{key:"_handleInputBlur",value:function(){this.setState({inputFocused:!1})}},{key:"_handleFocus",value:function(){if(this._focusTimeoutId)clearTimeout(this._focusTimeoutId),this._focusTimeoutId=null;else{this._focused=!0;var e=this.props.onFocus;if(e)e(this._getCurrentValue())}}},{key:"_handleBlur",value:function(){var e=this;this._focusTimeoutId=setTimeout(function(){e._focusTimeoutId=null,e._focused=!1;var t=e.state.inputValue,n=e.props.onBlur;if(e.props.multiple)t&&!e._addInputValue()&&e._clearInput();else if(t!=e._lastValidValue){var r=void 0;return n&&(r=function(){var t=e._getCurrentValue();n(t)}),e._setValueMeta(e._lastValidItem,!1,!0,!0),void e._setInputValue(e._lastValidValue,r)}if(n){var o=e._getCurrentValue();n(o)}},1)}}]),t}();w.propTypes={addonAfter:l.default.node,addonBefore:l.default.node,allowDuplicates:l.default.bool,bsSize:l.default.oneOf(["small","large"]),buttonAfter:l.default.node,buttonBefore:l.default.node,choicesClass:l.default.oneOfType([l.default.func,l.default.string]),closeOnCompletion:l.default.bool,datalist:l.default.any,datalistAdapter:l.default.object,datalistMessage:l.default.node,datalistOnly:l.default.bool,datalistPartial:l.default.bool,defaultValue:l.default.any,disabled:l.default.bool,dropup:l.default.bool,groupClassName:l.default.string,inputSelect:l.default.func,itemAdapter:l.default.object,itemReactKeyPropName:l.default.string,itemSortKeyPropName:l.default.string,itemValuePropName:l.default.string,multiple:l.default.bool,onAdd:l.default.func,onBlur:l.default.func,onChange:l.default.func,onDatalistMessageSelect:l.default.func,onFocus:l.default.func,onRemove:l.default.func,onSearch:l.default.func,onSelect:l.default.func,onToggle:l.default.func,placeholder:l.default.string,required:l.default.bool,searchDebounce:l.default.number,showToggle:l.default.oneOfType([l.default.bool,l.default.oneOf(["auto"])]),suggestionsClass:l.default.oneOfType([l.default.func,l.default.string]),toggleId:l.default.oneOfType([l.default.string,l.default.number]),type:l.default.string,value:l.default.any,valueIsItem:l.default.bool},w.contextTypes={$bs_formGroup:l.default.object},w.defaultProps={closeOnCompletion:!1,datalistOnly:!1,datalistPartial:!1,disabled:!1,dropup:!1,inputSelect:w.defaultInputSelect,multiple:!1,itemReactKeyPropName:"key",itemSortKeyPropName:"sortKey",itemValuePropName:"value",searchDebounce:250,showToggle:"auto",type:"text",valueIsItem:!1},t.default=w},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=c(n(5)),i=c(n(837)),a=c(n(894)),s=c(n(4)),l=c(n(0)),u=c(n(23));function c(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(r)))),a=i;return a._handleKeyDown=i._handleKeyDown.bind(i),a._handleKeyPress=i._handleKeyPress.bind(i),a._handleClose=i._handleClose.bind(i),a._handleClick=i._handleClick.bind(i),a._focusInput=i._focusInput.bind(i),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l["default"].Component),r(t,[{key:"shouldComponentUpdate",value:function(e){return!(0,i.default)(this.props,e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.autoHeight,r=t.disabled,i=t.focused,a=t.inputValue,s=t.items,u=t.renderItem,c=t.children,p=s.length>0,d=void 0;return p&&(d={width:.75*(a.length+1)+"em"}),l.default.createElement("ul",{className:(0,o.default)("form-control","autosuggest-choices",{focused:i,"has-items":p,"auto-height":n}),disabled:r,onClick:this._focusInput},s.map(function(t,n){return l.default.createElement("li",{key:n,"data-index":n,tabIndex:r?void 0:"-1",className:"autosuggest-choice",onKeyDown:e._handleKeyDown,onKeyPress:e._handleKeyPress},l.default.createElement("span",{className:"autosuggest-choice-close",onClick:e._handleClose}),l.default.createElement("span",{className:"autosuggest-choice-label",onClick:e._handleClick},u(t)))}),l.default.createElement("li",{className:"autosuggest-input-choice",style:d},c))}},{key:"_handleKeyDown",value:function(e){switch(e.keyCode){case a.default.codes.left:this._focusPrevious(),e.preventDefault();break;case a.default.codes.right:this._focusNext(),e.preventDefault();break;case a.default.codes.backspace:this._removeActive(-1),e.preventDefault();break;case a.default.codes.delete:this._removeActive(0),e.preventDefault()}}},{key:"_handleKeyPress",value:function(e){this._focusInput();var t=this.props.onKeyPress;t&&t(e)}},{key:"_handleClose",value:function(e){if(!this.props.disabled&&e.target instanceof HTMLElement){var t=e.target.parentNode;if(t instanceof Element){var n=Number(t.getAttribute("data-index"));this._remove(n)}}e.stopPropagation()}},{key:"_handleClick",value:function(e){e.stopPropagation()}},{key:"focusFirst",value:function(){var e=this._getFocusableMenuItems(!1);e.length>0&&e[0].focus()}},{key:"focusLast",value:function(){var e=this._getFocusableMenuItems(!1);e.length>0&&e[e.length-1].focus()}},{key:"_focusPrevious",value:function(){var e=this._getItemsAndActiveIndex(!0),t=e.items,n=e.activeIndex;n>0?t[n-1].focus():t.length>0&&t[t.length-1].focus()}},{key:"_focusNext",value:function(){var e=this._getItemsAndActiveIndex(!0),t=e.items,n=e.activeIndex;n<t.length-1?t[n+1].focus():t.length>0&&t[0].focus()}},{key:"_focusInput",value:function(){var e=u.default.findDOMNode(this);if(e instanceof Element){var t=e.querySelector("input");t&&t.focus()}}},{key:"_remove",value:function(e){var t=this.props.onRemove;t&&t(e)}},{key:"_removeActive",value:function(e){var t=this._getItemsAndActiveIndex(!1),n=t.items,r=t.activeIndex;if(r>=0){var o=r+e;o<0||o>=n.length-1?this._focusInput():0!=e&&n[o].focus(),this._remove(r)}}},{key:"_getItemsAndActiveIndex",value:function(e){var t=this._getFocusableMenuItems(e),n=document.activeElement,r=n?t.indexOf(n):-1;return{items:t,activeIndex:r}}},{key:"_getFocusableMenuItems",value:function(e){var t=u.default.findDOMNode(this);return t instanceof Element?Array.from(t.querySelectorAll(e?'[tabIndex="-1"],input':'[tabIndex="-1"]')):[]}}]),t}();p.propTypes={autoHeight:s.default.bool,disabled:s.default.bool,focused:s.default.bool,inputValue:s.default.string,items:s.default.arrayOf(s.default.any).isRequired,onKeyPress:s.default.func,onRemove:s.default.func,renderItem:s.default.func.isRequired},t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=u(n(837)),i=u(n(4)),a=u(n(0)),s=n(15),l=u(n(23));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["default"].Component),r(t,[{key:"shouldComponentUpdate",value:function(e){return!(0,o.default)(this.props,e)}},{key:"isFocused",value:function(){var e=l.default.findDOMNode(this.refs.menu);return null!=e&&document&&e.contains(document.activeElement)}},{key:"focusFirst",value:function(){this.refs.menu.focusNext()}},{key:"render",value:function(){var e=this.props,t=e.items,n=e.datalistMessage,r=e.onDatalistMessageSelect;return a.default.createElement(s.Dropdown.Menu,{labelledBy:this.props.labelledBy,onClose:this.props.onClose,open:this.props.open,ref:"menu"},t.map(this._renderItem,this),this.props.filtered&&a.default.createElement(s.MenuItem,{key:"show-all",onSelect:this.props.onDisableFilter},a.default.createElement("span",{className:"show-all"},0===t.length?a.default.createElement("span",{className:"no-matches"}):null)),n&&a.default.createElement(s.MenuItem,{key:"datalist-message",disabled:null==r,onSelect:r},n))}},{key:"_renderItem",value:function(e,t){var n=this.props.isSelectedItem(e);return a.default.createElement(s.MenuItem,{active:n,className:t!==this.props.focusedIndex||n?void 0:"pseudofocused",eventKey:e,key:this.props.getItemKey(e),onSelect:this.props.onSelect},this.props.renderItem(e))}}]),t}();c.propTypes={datalistMessage:i.default.node,filtered:i.default.bool,focusedIndex:i.default.number,getItemKey:i.default.func.isRequired,isSelectedItem:i.default.func.isRequired,items:i.default.arrayOf(i.default.any).isRequired,labelledBy:i.default.oneOfType([i.default.string,i.default.number]),onClose:i.default.func,onDatalistMessageSelect:i.default.func,onDisableFilter:i.default.func,onSelect:i.default.func.isRequired,open:i.default.bool,renderItem:i.default.func.isRequired},t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(814),a=(r=i)&&r.__esModule?r:{default:r};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["default"]),o(t,[{key:"getLength",value:function(){return 0}},{key:"filter",value:function(){return[]}},{key:"find",value:function(){}},{key:"toArray",value:function(){return[]}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(814),a=(r=i)&&r.__esModule?r:{default:r};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["default"]),o(t,[{key:"getLength",value:function(e){return e.length}},{key:"filter",value:function(e,t){return e.filter(t)}},{key:"find",value:function(e,t){return e.find(t)}},{key:"toArray",value:function(e){return e.slice()}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(896),a=(r=i)&&r.__esModule?r:{default:r};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["default"]),o(t,[{key:"getLength",value:function(e){return e.size}},{key:"filter",value:function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e.entries()[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value,u=this._getKeyValueItem(l[0],l[1]);t(u)&&n.push(u)}}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}},{key:"find",value:function(e,t){var n=!0,r=!1,o=void 0;try{for(var i,a=e.entries()[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value,l=this._getKeyValueItem(s[0],s[1]);if(t(l))return l}}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}}},{key:"toArray",value:function(e){var t=[],n=!0,r=!1,o=void 0;try{for(var i,a=e.entries()[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;t.push(this._getKeyValueItem(s[0],s[1]))}}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return t}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(896),a=(r=i)&&r.__esModule?r:{default:r};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["default"]),o(t,[{key:"getLength",value:function(e){return Object.keys(e).length}},{key:"filter",value:function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=Object.keys(e)[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value,u=this._getKeyValueItem(l,e[l]);t(u)&&n.push(u)}}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}},{key:"find",value:function(e,t){var n=!0,r=!1,o=void 0;try{for(var i,a=Object.keys(e)[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value,l=this._getKeyValueItem(s,e[s]);if(t(l))return l}}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}}},{key:"toArray",value:function(e){var t=[],n=!0,r=!1,o=void 0;try{for(var i,a=Object.keys(e)[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;t.push(this._getKeyValueItem(s,e[s]))}}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return t}}]),t}();t.default=s},function(e,t,n){"use strict";var r=n(0),o=n(1),i=n(9),a=n(3);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":d(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,c(t).apply(this,arguments))}var n,i,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,r["Component"]),n=t,(i=[{key:"render",value:function(){var e=this;return r.createElement("div",null,"Quick select: ",o.map(this.props.buttonsConfig,function(t,n){var o=s(n.split("|"),2),i=o[0],l=o[1],u=r.createElement("button",{"data-test":"selectPanCan",className:"btn btn-default btn-xs",onClick:function(){return e.props.onSelect(t)}},i),c=r.createElement("span",{style:{display:"inline-block",width:"300px"}},l||"");return l?r.createElement(a.d,{overlay:c},u):u}))}}])&&l(n.prototype,i),d&&l(n,d),t}();h=f([i.observer],h),t.a=h},function(e,t,n){(function(r){var o,i,a;/*! jsTree - v3.3.7 - 2018-11-06 - (MIT) */!function(s){"use strict";i=[n(17)],void 0===(a="function"==typeof(o=function(e,t){if(!e.jstree){var n=0,o=!1,i=!1,a=!1,s=[],l=e("script:last").attr("src"),u=window.document;e.jstree={version:"3.3.7",defaults:{plugins:[]},plugins:{},path:l&&-1!==l.indexOf("/")?l.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%?`]/g,root:"#"},e.jstree.create=function(t,r){var o=new e.jstree.core(++n),i=r;return r=e.extend(!0,{},e.jstree.defaults,r),i&&i.plugins&&(r.plugins=i.plugins),e.each(r.plugins,function(e,t){"core"!==e&&(o=o.plugin(t,r[t]))}),e(t).data("jstree",o),o.init(t,r),o},e.jstree.destroy=function(){e(".jstree:jstree").jstree("destroy"),e(u).off(".jstree")},e.jstree.core=function(e){this._id=e,this._cnt=0,this._wrk=null,this._data={core:{themes:{name:!1,dots:!1,icons:!1,ellipsis:!1},selected:[],last_error:{},working:!1,worker_queue:[],focused:null}}},e.jstree.reference=function(t){var n=null,r=null;if(!t||!t.id||t.tagName&&t.nodeType||(t=t.id),!r||!r.length)try{r=e(t)}catch(e){}if(!r||!r.length)try{r=e("#"+t.replace(e.jstree.idregex,"\\$&"))}catch(e){}return r&&r.length&&(r=r.closest(".jstree")).length&&(r=r.data("jstree"))?n=r:e(".jstree").each(function(){var r=e(this).data("jstree");return r&&r._model.data[t]?(n=r,!1):void 0}),n},e.fn.jstree=function(n){var r="string"==typeof n,o=Array.prototype.slice.call(arguments,1),i=null;return!(!0===n&&!this.length)&&(this.each(function(){var a=e.jstree.reference(this),s=r&&a?a[n]:null;return i=r&&s?s.apply(a,o):null,a||r||n!==t&&!e.isPlainObject(n)||e.jstree.create(this,n),(a&&!r||!0===n)&&(i=a||!1),(null===i||i===t)&&void 0}),null!==i&&i!==t?i:this)},e.expr.pseudos.jstree=e.expr.createPseudo(function(n){return function(n){return e(n).hasClass("jstree")&&e(n).data("jstree")!==t}}),e.jstree.defaults.core={data:!1,strings:!1,check_callback:!1,error:e.noop,animation:200,multiple:!0,themes:{name:!1,url:!1,dir:!1,dots:!0,icons:!0,ellipsis:!1,stripes:!1,variant:!1,responsive:!1},expand_selected_onload:!0,worker:!0,force_text:!1,dblclick_toggle:!0,loaded_state:!1,restore_focus:!0,keyboard:{"ctrl-space":function(t){t.type="click",e(t.currentTarget).trigger(t)},enter:function(t){t.type="click",e(t.currentTarget).trigger(t)},left:function(t){if(t.preventDefault(),this.is_open(t.currentTarget))this.close_node(t.currentTarget);else{var n=this.get_parent(t.currentTarget);n&&n.id!==e.jstree.root&&this.get_node(n,!0).children(".jstree-anchor").focus()}},up:function(e){e.preventDefault();var t=this.get_prev_dom(e.currentTarget);t&&t.length&&t.children(".jstree-anchor").focus()},right:function(t){if(t.preventDefault(),this.is_closed(t.currentTarget))this.open_node(t.currentTarget,function(e){this.get_node(e,!0).children(".jstree-anchor").focus()});else if(this.is_open(t.currentTarget)){var n=this.get_node(t.currentTarget,!0).children(".jstree-children")[0];n&&e(this._firstChild(n)).children(".jstree-anchor").focus()}},down:function(e){e.preventDefault();var t=this.get_next_dom(e.currentTarget);t&&t.length&&t.children(".jstree-anchor").focus()},"*":function(e){this.open_all()},home:function(t){t.preventDefault();var n=this._firstChild(this.get_container_ul()[0]);n&&e(n).children(".jstree-anchor").filter(":visible").focus()},end:function(e){e.preventDefault(),this.element.find(".jstree-anchor").filter(":visible").last().focus()},f2:function(e){e.preventDefault(),this.edit(e.currentTarget)}}},e.jstree.core.prototype={plugin:function(t,n){var r=e.jstree.plugins[t];return r?(this._data[t]={},r.prototype=this,new r(n,this)):this},init:function(t,n){this._model={data:{},changed:[],force_full_redraw:!1,redraw_timeout:!1,default_state:{loaded:!0,opened:!1,selected:!1,disabled:!1}},this._model.data[e.jstree.root]={id:e.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this.element=e(t).addClass("jstree jstree-"+this._id),this.settings=n,this._data.core.ready=!1,this._data.core.loaded=!1,this._data.core.rtl="rtl"===this.element.css("direction"),this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl"),this.element.attr("role","tree"),this.settings.core.multiple&&this.element.attr("aria-multiselectable",!0),this.element.attr("tabindex")||this.element.attr("tabindex","0"),this.bind(),this.trigger("init"),this._data.core.original_container_html=this.element.find(" > ul > li").clone(!0),this._data.core.original_container_html.find("li").addBack().contents().filter(function(){return 3===this.nodeType&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove(),this.element.html("<ul class='jstree-container-ul jstree-children' role='group'><li id='j"+this._id+"_loading' class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='tree-item'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading"),this._data.core.li_height=this.get_container_ul().children("li").first().outerHeight()||24,this._data.core.node=this._create_prototype_node(),this.trigger("loading"),this.load_node(e.jstree.root)},destroy:function(e){if(this.trigger("destroy"),this._wrk)try{window.URL.revokeObjectURL(this._wrk),this._wrk=null}catch(e){}e||this.element.empty(),this.teardown()},_create_prototype_node:function(){var e,t,n=u.createElement("LI");return n.setAttribute("role","treeitem"),(e=u.createElement("I")).className="jstree-icon jstree-ocl",e.setAttribute("role","presentation"),n.appendChild(e),(e=u.createElement("A")).className="jstree-anchor",e.setAttribute("href","#"),e.setAttribute("tabindex","-1"),(t=u.createElement("I")).className="jstree-icon jstree-themeicon",t.setAttribute("role","presentation"),e.appendChild(t),n.appendChild(e),e=t=null,n},_kbevent_to_func:function(e){var t=[];e.ctrlKey&&t.push("ctrl"),e.altKey&&t.push("alt"),e.shiftKey&&t.push("shift"),t.push({8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock",16:"Shift",17:"Ctrl",18:"Alt",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*",173:"-"}[e.which]||e.which),t=t.sort().join("-").toLowerCase();var n,r,o=this.settings.core.keyboard;for(n in o)if(o.hasOwnProperty(n)&&("-"!==(r=n)&&"+"!==r&&(r=(r=r.replace("--","-MINUS").replace("+-","-MINUS").replace("++","-PLUS").replace("-+","-PLUS")).split(/-|\+/).sort().join("-").replace("MINUS","-").replace("PLUS","+").toLowerCase()),r===t))return o[n];return null},teardown:function(){this.unbind(),this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")}),this.element=null},bind:function(){var t="",n=null,r=0;this.element.on("dblclick.jstree",function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;if(u.selection&&u.selection.empty)u.selection.empty();else if(window.getSelection){var t=window.getSelection();try{t.removeAllRanges(),t.collapse()}catch(e){}}}).on("mousedown.jstree",e.proxy(function(e){e.target===this.element[0]&&(e.preventDefault(),r=+new Date)},this)).on("mousedown.jstree",".jstree-ocl",function(e){e.preventDefault()}).on("click.jstree",".jstree-ocl",e.proxy(function(e){this.toggle_node(e.target)},this)).on("dblclick.jstree",".jstree-anchor",e.proxy(function(e){return!(!e.target.tagName||"input"!==e.target.tagName.toLowerCase())||void(this.settings.core.dblclick_toggle&&this.toggle_node(e.target))},this)).on("click.jstree",".jstree-anchor",e.proxy(function(t){t.preventDefault(),t.currentTarget!==u.activeElement&&e(t.currentTarget).focus(),this.activate_node(t.currentTarget,t)},this)).on("keydown.jstree",".jstree-anchor",e.proxy(function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;this._data.core.rtl&&(37===e.which?e.which=39:39===e.which&&(e.which=37));var t=this._kbevent_to_func(e);if(t){var n=t.call(this,e);if(!1===n||!0===n)return n}},this)).on("load_node.jstree",e.proxy(function(t,n){n.status&&(n.node.id!==e.jstree.root||this._data.core.loaded||(this._data.core.loaded=!0,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.trigger("loaded")),this._data.core.ready||setTimeout(e.proxy(function(){if(this.element&&!this.get_container_ul().find(".jstree-loading").length){if(this._data.core.ready=!0,this._data.core.selected.length){if(this.settings.core.expand_selected_onload){var t,n,r=[];for(t=0,n=this._data.core.selected.length;n>t;t++)r=r.concat(this._model.data[this._data.core.selected[t]].parents);for(r=e.vakata.array_unique(r),t=0,n=r.length;n>t;t++)this.open_node(r[t],!1,0)}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}this.trigger("ready")}},this),0))},this)).on("keypress.jstree",e.proxy(function(r){if(r.target.tagName&&"input"===r.target.tagName.toLowerCase())return!0;n&&clearTimeout(n),n=setTimeout(function(){t=""},500);var o=String.fromCharCode(r.which).toLowerCase(),i=this.element.find(".jstree-anchor").filter(":visible"),a=i.index(u.activeElement)||0,s=!1;if((t+=o).length>1){if(i.slice(a).each(e.proxy(function(n,r){return 0===e(r).text().toLowerCase().indexOf(t)?(e(r).focus(),s=!0,!1):void 0},this)),s)return;if(i.slice(0,a).each(e.proxy(function(n,r){return 0===e(r).text().toLowerCase().indexOf(t)?(e(r).focus(),s=!0,!1):void 0},this)),s)return}if(new RegExp("^"+o.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+"+$").test(t)){if(i.slice(a+1).each(e.proxy(function(t,n){return e(n).text().toLowerCase().charAt(0)===o?(e(n).focus(),s=!0,!1):void 0},this)),s)return;if(i.slice(0,a+1).each(e.proxy(function(t,n){return e(n).text().toLowerCase().charAt(0)===o?(e(n).focus(),s=!0,!1):void 0},this)),s)return}},this)).on("init.jstree",e.proxy(function(){var e=this.settings.core.themes;this._data.core.themes.dots=e.dots,this._data.core.themes.stripes=e.stripes,this._data.core.themes.icons=e.icons,this._data.core.themes.ellipsis=e.ellipsis,this.set_theme(e.name||"default",e.url),this.set_theme_variant(e.variant)},this)).on("loading.jstree",e.proxy(function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"](),this[this._data.core.themes.icons?"show_icons":"hide_icons"](),this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"](),this[this._data.core.themes.ellipsis?"show_ellipsis":"hide_ellipsis"]()},this)).on("blur.jstree",".jstree-anchor",e.proxy(function(t){this._data.core.focused=null,e(t.currentTarget).filter(".jstree-hovered").mouseleave(),this.element.attr("tabindex","0")},this)).on("focus.jstree",".jstree-anchor",e.proxy(function(t){var n=this.get_node(t.currentTarget);n&&n.id&&(this._data.core.focused=n.id),this.element.find(".jstree-hovered").not(t.currentTarget).mouseleave(),e(t.currentTarget).mouseenter(),this.element.attr("tabindex","-1")},this)).on("focus.jstree",e.proxy(function(){if(+new Date-r>500&&!this._data.core.focused&&this.settings.core.restore_focus){r=0;var e=this.get_node(this.element.attr("aria-activedescendant"),!0);e&&e.find("> .jstree-anchor").focus()}},this)).on("mouseenter.jstree",".jstree-anchor",e.proxy(function(e){this.hover_node(e.currentTarget)},this)).on("mouseleave.jstree",".jstree-anchor",e.proxy(function(e){this.dehover_node(e.currentTarget)},this))},unbind:function(){this.element.off(".jstree"),e(u).off(".jstree-"+this._id)},trigger:function(e,t){t||(t={}),t.instance=this,this.element.triggerHandler(e.replace(".jstree","")+".jstree",t)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children(".jstree-children").first()},get_string:function(t){var n=this.settings.core.strings;return e.isFunction(n)?n.call(this,t):n&&n[t]?n[t]:t},_firstChild:function(e){for(e=e?e.firstChild:null;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},_nextSibling:function(e){for(e=e?e.nextSibling:null;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},_previousSibling:function(e){for(e=e?e.previousSibling:null;null!==e&&1!==e.nodeType;)e=e.previousSibling;return e},get_node:function(t,n){var o;t&&t.id&&(t=t.id),t instanceof r&&t.length&&t[0].id&&(t=t[0].id);try{if(this._model.data[t])t=this._model.data[t];else if("string"==typeof t&&this._model.data[t.replace(/^#/,"")])t=this._model.data[t.replace(/^#/,"")];else if("string"==typeof t&&(o=e("#"+t.replace(e.jstree.idregex,"\\$&"),this.element)).length&&this._model.data[o.closest(".jstree-node").attr("id")])t=this._model.data[o.closest(".jstree-node").attr("id")];else if((o=this.element.find(t)).length&&this._model.data[o.closest(".jstree-node").attr("id")])t=this._model.data[o.closest(".jstree-node").attr("id")];else{if(!(o=this.element.find(t)).length||!o.hasClass("jstree"))return!1;t=this._model.data[e.jstree.root]}return n&&(t=t.id===e.jstree.root?this.element:e("#"+t.id.replace(e.jstree.idregex,"\\$&"),this.element)),t}catch(e){return!1}},get_path:function(t,n,r){if(!(t=t.parents?t:this.get_node(t))||t.id===e.jstree.root||!t.parents)return!1;var o,i,a=[];for(a.push(r?t.id:t.text),o=0,i=t.parents.length;i>o;o++)a.push(r?t.parents[o]:this.get_text(t.parents[o]));return a=a.reverse().slice(1),n?a.join(n):a},get_next_dom:function(t,n){var r;if((t=this.get_node(t,!0))[0]===this.element[0]){for(r=this._firstChild(this.get_container_ul()[0]);r&&0===r.offsetHeight;)r=this._nextSibling(r);return!!r&&e(r)}if(!t||!t.length)return!1;if(n){r=t[0];do{r=this._nextSibling(r)}while(r&&0===r.offsetHeight);return!!r&&e(r)}if(t.hasClass("jstree-open")){for(r=this._firstChild(t.children(".jstree-children")[0]);r&&0===r.offsetHeight;)r=this._nextSibling(r);if(null!==r)return e(r)}r=t[0];do{r=this._nextSibling(r)}while(r&&0===r.offsetHeight);return null!==r?e(r):t.parentsUntil(".jstree",".jstree-node").nextAll(".jstree-node:visible").first()},get_prev_dom:function(t,n){var r;if((t=this.get_node(t,!0))[0]===this.element[0]){for(r=this.get_container_ul()[0].lastChild;r&&0===r.offsetHeight;)r=this._previousSibling(r);return!!r&&e(r)}if(!t||!t.length)return!1;if(n){r=t[0];do{r=this._previousSibling(r)}while(r&&0===r.offsetHeight);return!!r&&e(r)}r=t[0];do{r=this._previousSibling(r)}while(r&&0===r.offsetHeight);if(null!==r){for(t=e(r);t.hasClass("jstree-open");)t=t.children(".jstree-children").first().children(".jstree-node:visible:last");return t}return!(!(r=t[0].parentNode.parentNode)||!r.className||-1===r.className.indexOf("jstree-node"))&&e(r)},get_parent:function(t){return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&t.parent},get_children_dom:function(e){return(e=this.get_node(e,!0))[0]===this.element[0]?this.get_container_ul().children(".jstree-node"):!(!e||!e.length)&&e.children(".jstree-children").children(".jstree-node")},is_parent:function(e){return(e=this.get_node(e))&&(!1===e.state.loaded||e.children.length>0)},is_loaded:function(e){return(e=this.get_node(e))&&e.state.loaded},is_loading:function(e){return(e=this.get_node(e))&&e.state&&e.state.loading},is_open:function(e){return(e=this.get_node(e))&&e.state.opened},is_closed:function(e){return(e=this.get_node(e))&&this.is_parent(e)&&!e.state.opened},is_leaf:function(e){return!this.is_parent(e)},load_node:function(t,n){var r,o,i,a,s;if(e.isArray(t))return this._load_nodes(t.slice(),n),!0;if(!(t=this.get_node(t)))return n&&n.call(this,t,!1),!1;if(t.state.loaded){for(t.state.loaded=!1,i=0,a=t.parents.length;a>i;i++)this._model.data[t.parents[i]].children_d=e.vakata.array_filter(this._model.data[t.parents[i]].children_d,function(n){return-1===e.inArray(n,t.children_d)});for(r=0,o=t.children_d.length;o>r;r++)this._model.data[t.children_d[r]].state.selected&&(s=!0),delete this._model.data[t.children_d[r]];s&&(this._data.core.selected=e.vakata.array_filter(this._data.core.selected,function(n){return-1===e.inArray(n,t.children_d)})),t.children=[],t.children_d=[],s&&this.trigger("changed",{action:"load_node",node:t,selected:this._data.core.selected})}return t.state.failed=!1,t.state.loading=!0,this.get_node(t,!0).addClass("jstree-loading").attr("aria-busy",!0),this._load_node(t,e.proxy(function(e){(t=this._model.data[t.id]).state.loading=!1,t.state.loaded=e,t.state.failed=!t.state.loaded;var r=this.get_node(t,!0),o=0,i=0,a=this._model.data,s=!1;for(o=0,i=t.children.length;i>o;o++)if(a[t.children[o]]&&!a[t.children[o]].state.hidden){s=!0;break}t.state.loaded&&r&&r.length&&(r.removeClass("jstree-closed jstree-open jstree-leaf"),s?"#"!==t.id&&r.addClass(t.state.opened?"jstree-open":"jstree-closed"):r.addClass("jstree-leaf")),r.removeClass("jstree-loading").attr("aria-busy",!1),this.trigger("load_node",{node:t,status:e}),n&&n.call(this,t,e)},this)),!0},_load_nodes:function(e,t,n,r){var o,i,a=!0,s=function(){this._load_nodes(e,t,!0)},l=this._model.data,u=[];for(o=0,i=e.length;i>o;o++)l[e[o]]&&(!l[e[o]].state.loaded&&!l[e[o]].state.failed||!n&&r)&&(this.is_loading(e[o])||this.load_node(e[o],s),a=!1);if(a){for(o=0,i=e.length;i>o;o++)l[e[o]]&&l[e[o]].state.loaded&&u.push(e[o]);t&&!t.done&&(t.call(this,u),t.done=!0)}},load_all:function(t,n){if(t||(t=e.jstree.root),!(t=this.get_node(t)))return!1;var r,o,i=[],a=this._model.data,s=a[t.id].children_d;for(t.state&&!t.state.loaded&&i.push(t.id),r=0,o=s.length;o>r;r++)a[s[r]]&&a[s[r]].state&&!a[s[r]].state.loaded&&i.push(s[r]);i.length?this._load_nodes(i,function(){this.load_all(t,n)}):(n&&n.call(this,t),this.trigger("load_all",{node:t}))},_load_node:function(t,n){var r,o=this.settings.core.data,i=function(){return 3!==this.nodeType&&8!==this.nodeType};return o?e.isFunction(o)?o.call(this,t,e.proxy(function(r){!1===r?n.call(this,!1):this["string"==typeof r?"_append_html_data":"_append_json_data"](t,"string"==typeof r?e(e.parseHTML(r)).filter(i):r,function(e){n.call(this,e)})},this)):"object"==typeof o?o.url?(o=e.extend(!0,{},o),e.isFunction(o.url)&&(o.url=o.url.call(this,t)),e.isFunction(o.data)&&(o.data=o.data.call(this,t)),e.ajax(o).done(e.proxy(function(r,o,a){var s=a.getResponseHeader("Content-Type");return s&&-1!==s.indexOf("json")||"object"==typeof r?this._append_json_data(t,r,function(e){n.call(this,e)}):s&&-1!==s.indexOf("html")||"string"==typeof r?this._append_html_data(t,e(e.parseHTML(r)).filter(i),function(e){n.call(this,e)}):(this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:t.id,xhr:a})},this.settings.core.error.call(this,this._data.core.last_error),n.call(this,!1))},this)).fail(e.proxy(function(e){this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:t.id,xhr:e})},n.call(this,!1),this.settings.core.error.call(this,this._data.core.last_error)},this))):(r=e.isArray(o)?e.extend(!0,[],o):e.isPlainObject(o)?e.extend(!0,{},o):o,t.id===e.jstree.root?this._append_json_data(t,r,function(e){n.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:t.id})},this.settings.core.error.call(this,this._data.core.last_error),n.call(this,!1))):"string"==typeof o?t.id===e.jstree.root?this._append_html_data(t,e(e.parseHTML(o)).filter(i),function(e){n.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:t.id})},this.settings.core.error.call(this,this._data.core.last_error),n.call(this,!1)):n.call(this,!1):t.id===e.jstree.root?this._append_html_data(t,this._data.core.original_container_html.clone(!0),function(e){n.call(this,e)}):n.call(this,!1)},_node_changed:function(t){(t=this.get_node(t))&&-1===e.inArray(t.id,this._model.changed)&&this._model.changed.push(t.id)},_append_html_data:function(t,n,r){(t=this.get_node(t)).children=[],t.children_d=[];var o,i,a,s=n.is("ul")?n.children():n,l=t.id,u=[],c=[],p=this._model.data,d=p[l],f=this._data.core.selected.length;for(s.each(e.proxy(function(t,n){(o=this._parse_model_from_html(e(n),l,d.parents.concat()))&&(u.push(o),c.push(o),p[o].children_d.length&&(c=c.concat(p[o].children_d)))},this)),d.children=u,d.children_d=c,i=0,a=d.parents.length;a>i;i++)p[d.parents[i]].children_d=p[d.parents[i]].children_d.concat(c);this.trigger("model",{nodes:c,parent:l}),l!==e.jstree.root?(this._node_changed(l),this.redraw()):(this.get_container_ul().children(".jstree-initial-node").remove(),this.redraw(!0)),this._data.core.selected.length!==f&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),r.call(this,!0)},_append_json_data:function(t,n,r,o){if(null!==this.element){(t=this.get_node(t)).children=[],t.children_d=[],n.d&&("string"==typeof(n=n.d)&&(n=JSON.parse(n))),e.isArray(n)||(n=[n]);var i=null,a={df:this._model.default_state,dat:n,par:t.id,m:this._model.data,t_id:this._id,t_cnt:this._cnt,sel:this._data.core.selected},s=function(e,t){e.data&&(e=e.data);var n,r,o,i,a=e.dat,s=e.par,l=[],u=[],c=[],p=e.df,d=e.t_id,f=e.t_cnt,h=e.m,m=h[s],y=e.sel,g=function(e,n,r){r=r?r.concat():[],n&&r.unshift(n);var o,i,a,s,l=e.id.toString(),u={id:l,text:e.text||"",icon:e.icon===t||e.icon,parent:n,parents:r,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(o in p)p.hasOwnProperty(o)&&(u.state[o]=p[o]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(u.icon=e.data.jstree.icon),(u.icon===t||null===u.icon||""===u.icon)&&(u.icon=!0),e&&e.data&&(u.data=e.data,e.data.jstree))for(o in e.data.jstree)e.data.jstree.hasOwnProperty(o)&&(u.state[o]=e.data.jstree[o]);if(e&&"object"==typeof e.state)for(o in e.state)e.state.hasOwnProperty(o)&&(u.state[o]=e.state[o]);if(e&&"object"==typeof e.li_attr)for(o in e.li_attr)e.li_attr.hasOwnProperty(o)&&(u.li_attr[o]=e.li_attr[o]);if(u.li_attr.id||(u.li_attr.id=l),e&&"object"==typeof e.a_attr)for(o in e.a_attr)e.a_attr.hasOwnProperty(o)&&(u.a_attr[o]=e.a_attr[o]);for(e&&e.children&&!0===e.children&&(u.state.loaded=!1,u.children=[],u.children_d=[]),h[u.id]=u,o=0,i=u.children.length;i>o;o++)a=g(h[u.children[o]],u.id,r),s=h[a],u.children_d.push(a),s.children_d.length&&(u.children_d=u.children_d.concat(s.children_d));return delete e.data,delete e.children,h[u.id].original=e,u.state.selected&&c.push(u.id),u.id},b=function(e,n,r){r=r?r.concat():[],n&&r.unshift(n);var o,i,a,s,l,u=!1;do{u="j"+d+"_"+ ++f}while(h[u]);for(o in l={id:!1,text:"string"==typeof e?e:"",icon:"object"!=typeof e||e.icon===t||e.icon,parent:n,parents:r,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1},p)p.hasOwnProperty(o)&&(l.state[o]=p[o]);if(e&&e.id&&(l.id=e.id.toString()),e&&e.text&&(l.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(l.icon=e.data.jstree.icon),(l.icon===t||null===l.icon||""===l.icon)&&(l.icon=!0),e&&e.data&&(l.data=e.data,e.data.jstree))for(o in e.data.jstree)e.data.jstree.hasOwnProperty(o)&&(l.state[o]=e.data.jstree[o]);if(e&&"object"==typeof e.state)for(o in e.state)e.state.hasOwnProperty(o)&&(l.state[o]=e.state[o]);if(e&&"object"==typeof e.li_attr)for(o in e.li_attr)e.li_attr.hasOwnProperty(o)&&(l.li_attr[o]=e.li_attr[o]);if(l.li_attr.id&&!l.id&&(l.id=l.li_attr.id.toString()),l.id||(l.id=u),l.li_attr.id||(l.li_attr.id=l.id),e&&"object"==typeof e.a_attr)for(o in e.a_attr)e.a_attr.hasOwnProperty(o)&&(l.a_attr[o]=e.a_attr[o]);if(e&&e.children&&e.children.length){for(o=0,i=e.children.length;i>o;o++)a=b(e.children[o],l.id,r),s=h[a],l.children.push(a),s.children_d.length&&(l.children_d=l.children_d.concat(s.children_d));l.children_d=l.children_d.concat(l.children)}return e&&e.children&&!0===e.children&&(l.state.loaded=!1,l.children=[],l.children_d=[]),delete e.data,delete e.children,l.original=e,h[l.id]=l,l.state.selected&&c.push(l.id),l.id};if(a.length&&a[0].id!==t&&a[0].parent!==t){for(r=0,o=a.length;o>r;r++)a[r].children||(a[r].children=[]),a[r].state||(a[r].state={}),h[a[r].id.toString()]=a[r];for(r=0,o=a.length;o>r;r++)h[a[r].parent.toString()]?(h[a[r].parent.toString()].children.push(a[r].id.toString()),m.children_d.push(a[r].id.toString())):(this._data.core.last_error={error:"parse",plugin:"core",id:"core_07",reason:"Node with invalid parent",data:JSON.stringify({id:a[r].id.toString(),parent:a[r].parent.toString()})},this.settings.core.error.call(this,this._data.core.last_error));for(r=0,o=m.children.length;o>r;r++)n=g(h[m.children[r]],s,m.parents.concat()),u.push(n),h[n].children_d.length&&(u=u.concat(h[n].children_d));for(r=0,o=m.parents.length;o>r;r++)h[m.parents[r]].children_d=h[m.parents[r]].children_d.concat(u);i={cnt:f,mod:h,sel:y,par:s,dpc:u,add:c}}else{for(r=0,o=a.length;o>r;r++)(n=b(a[r],s,m.parents.concat()))&&(l.push(n),u.push(n),h[n].children_d.length&&(u=u.concat(h[n].children_d)));for(m.children=l,m.children_d=u,r=0,o=m.parents.length;o>r;r++)h[m.parents[r]].children_d=h[m.parents[r]].children_d.concat(u);i={cnt:f,mod:h,sel:y,par:s,dpc:u,add:c}}return"undefined"!=typeof window&&void 0!==window.document?i:void postMessage(i)},l=function(t,n){if(null!==this.element){this._cnt=t.cnt;var o,i=this._model.data;for(o in i)i.hasOwnProperty(o)&&i[o].state&&i[o].state.loading&&t.mod[o]&&(t.mod[o].state.loading=!0);if(this._model.data=t.mod,n){var a,s=t.add,l=t.sel,u=this._data.core.selected.slice();if(i=this._model.data,l.length!==u.length||e.vakata.array_unique(l.concat(u)).length!==l.length){for(o=0,a=l.length;a>o;o++)-1===e.inArray(l[o],s)&&-1===e.inArray(l[o],u)&&(i[l[o]].state.selected=!1);for(o=0,a=u.length;a>o;o++)-1===e.inArray(u[o],l)&&(i[u[o]].state.selected=!0)}}t.add.length&&(this._data.core.selected=this._data.core.selected.concat(t.add)),this.trigger("model",{nodes:t.dpc,parent:t.par}),t.par!==e.jstree.root?(this._node_changed(t.par),this.redraw()):this.redraw(!0),t.add.length&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),r.call(this,!0)}};if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker)try{null===this._wrk&&(this._wrk=window.URL.createObjectURL(new window.Blob(["self.onmessage = "+s.toString()],{type:"text/javascript"}))),!this._data.core.working||o?(this._data.core.working=!0,(i=new window.Worker(this._wrk)).onmessage=e.proxy(function(e){l.call(this,e.data,!0);try{i.terminate(),i=null}catch(e){}this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1},this),a.par?i.postMessage(a):this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1):this._data.core.worker_queue.push([t,n,r,!0])}catch(e){l.call(this,s(a),!1),this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}else l.call(this,s(a),!1)}},_parse_model_from_html:function(n,r,o){o=o?[].concat(o):[],r&&o.unshift(r);var i,a,s,l,u,c=this._model.data,p={id:!1,text:!1,icon:!0,parent:r,parents:o,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(s in this._model.default_state)this._model.default_state.hasOwnProperty(s)&&(p.state[s]=this._model.default_state[s]);if(l=e.vakata.attributes(n,!0),e.each(l,function(t,n){return!(n=e.trim(n)).length||(p.li_attr[t]=n,void("id"===t&&(p.id=n.toString())))}),(l=n.children("a").first()).length&&(l=e.vakata.attributes(l,!0),e.each(l,function(t,n){(n=e.trim(n)).length&&(p.a_attr[t]=n)})),(l=n.children("a").first().length?n.children("a").first().clone():n.clone()).children("ins, i, ul").remove(),l=l.html(),l=e("<div />").html(l),p.text=this.settings.core.force_text?l.text():l.html(),l=n.data(),p.data=l?e.extend(!0,{},l):null,p.state.opened=n.hasClass("jstree-open"),p.state.selected=n.children("a").hasClass("jstree-clicked"),p.state.disabled=n.children("a").hasClass("jstree-disabled"),p.data&&p.data.jstree)for(s in p.data.jstree)p.data.jstree.hasOwnProperty(s)&&(p.state[s]=p.data.jstree[s]);(l=n.children("a").children(".jstree-themeicon")).length&&(p.icon=!l.hasClass("jstree-themeicon-hidden")&&l.attr("rel")),p.state.icon!==t&&(p.icon=p.state.icon),(p.icon===t||null===p.icon||""===p.icon)&&(p.icon=!0),l=n.children("ul").children("li");do{u="j"+this._id+"_"+ ++this._cnt}while(c[u]);return p.id=p.li_attr.id?p.li_attr.id.toString():u,l.length?(l.each(e.proxy(function(t,n){i=this._parse_model_from_html(e(n),p.id,o),a=this._model.data[i],p.children.push(i),a.children_d.length&&(p.children_d=p.children_d.concat(a.children_d))},this)),p.children_d=p.children_d.concat(p.children)):n.hasClass("jstree-closed")&&(p.state.loaded=!1),p.li_attr.class&&(p.li_attr.class=p.li_attr.class.replace("jstree-closed","").replace("jstree-open","")),p.a_attr.class&&(p.a_attr.class=p.a_attr.class.replace("jstree-clicked","").replace("jstree-disabled","")),c[p.id]=p,p.state.selected&&this._data.core.selected.push(p.id),p.id},_parse_model_from_flat_json:function(e,n,r){r=r?r.concat():[],n&&r.unshift(n);var o,i,a,s,l=e.id.toString(),u=this._model.data,c=this._model.default_state,p={id:l,text:e.text||"",icon:e.icon===t||e.icon,parent:n,parents:r,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(o in c)c.hasOwnProperty(o)&&(p.state[o]=c[o]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(p.icon=e.data.jstree.icon),(p.icon===t||null===p.icon||""===p.icon)&&(p.icon=!0),e&&e.data&&(p.data=e.data,e.data.jstree))for(o in e.data.jstree)e.data.jstree.hasOwnProperty(o)&&(p.state[o]=e.data.jstree[o]);if(e&&"object"==typeof e.state)for(o in e.state)e.state.hasOwnProperty(o)&&(p.state[o]=e.state[o]);if(e&&"object"==typeof e.li_attr)for(o in e.li_attr)e.li_attr.hasOwnProperty(o)&&(p.li_attr[o]=e.li_attr[o]);if(p.li_attr.id||(p.li_attr.id=l),e&&"object"==typeof e.a_attr)for(o in e.a_attr)e.a_attr.hasOwnProperty(o)&&(p.a_attr[o]=e.a_attr[o]);for(e&&e.children&&!0===e.children&&(p.state.loaded=!1,p.children=[],p.children_d=[]),u[p.id]=p,o=0,i=p.children.length;i>o;o++)a=this._parse_model_from_flat_json(u[p.children[o]],p.id,r),s=u[a],p.children_d.push(a),s.children_d.length&&(p.children_d=p.children_d.concat(s.children_d));return delete e.data,delete e.children,u[p.id].original=e,p.state.selected&&this._data.core.selected.push(p.id),p.id},_parse_model_from_json:function(e,n,r){r=r?r.concat():[],n&&r.unshift(n);var o,i,a,s,l,u=!1,c=this._model.data,p=this._model.default_state;do{u="j"+this._id+"_"+ ++this._cnt}while(c[u]);for(o in l={id:!1,text:"string"==typeof e?e:"",icon:"object"!=typeof e||e.icon===t||e.icon,parent:n,parents:r,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1},p)p.hasOwnProperty(o)&&(l.state[o]=p[o]);if(e&&e.id&&(l.id=e.id.toString()),e&&e.text&&(l.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(l.icon=e.data.jstree.icon),(l.icon===t||null===l.icon||""===l.icon)&&(l.icon=!0),e&&e.data&&(l.data=e.data,e.data.jstree))for(o in e.data.jstree)e.data.jstree.hasOwnProperty(o)&&(l.state[o]=e.data.jstree[o]);if(e&&"object"==typeof e.state)for(o in e.state)e.state.hasOwnProperty(o)&&(l.state[o]=e.state[o]);if(e&&"object"==typeof e.li_attr)for(o in e.li_attr)e.li_attr.hasOwnProperty(o)&&(l.li_attr[o]=e.li_attr[o]);if(l.li_attr.id&&!l.id&&(l.id=l.li_attr.id.toString()),l.id||(l.id=u),l.li_attr.id||(l.li_attr.id=l.id),e&&"object"==typeof e.a_attr)for(o in e.a_attr)e.a_attr.hasOwnProperty(o)&&(l.a_attr[o]=e.a_attr[o]);if(e&&e.children&&e.children.length){for(o=0,i=e.children.length;i>o;o++)a=this._parse_model_from_json(e.children[o],l.id,r),s=c[a],l.children.push(a),s.children_d.length&&(l.children_d=l.children_d.concat(s.children_d));l.children_d=l.children_d.concat(l.children)}return e&&e.children&&!0===e.children&&(l.state.loaded=!1,l.children=[],l.children_d=[]),delete e.data,delete e.children,l.original=e,c[l.id]=l,l.state.selected&&this._data.core.selected.push(l.id),l.id},_redraw:function(){var t,n,r,o=this._model.force_full_redraw?this._model.data[e.jstree.root].children.concat([]):this._model.changed.concat([]),i=u.createElement("UL"),a=this._data.core.focused;for(n=0,r=o.length;r>n;n++)(t=this.redraw_node(o[n],!0,this._model.force_full_redraw))&&this._model.force_full_redraw&&i.appendChild(t);this._model.force_full_redraw&&(i.className=this.get_container_ul()[0].className,i.setAttribute("role","group"),this.element.empty().append(i)),null!==a&&this.settings.core.restore_focus&&((t=this.get_node(a,!0))&&t.length&&t.children(".jstree-anchor")[0]!==u.activeElement?t.children(".jstree-anchor").focus():this._data.core.focused=null),this._model.force_full_redraw=!1,this._model.changed=[],this.trigger("redraw",{nodes:o})},redraw:function(e){e&&(this._model.force_full_redraw=!0),this._redraw()},draw_children:function(t){var n=this.get_node(t),r=!1,o=!1,i=!1,a=u;if(!n)return!1;if(n.id===e.jstree.root)return this.redraw(!0);if(!(t=this.get_node(t,!0))||!t.length)return!1;if(t.children(".jstree-children").remove(),t=t[0],n.children.length&&n.state.loaded){for((i=a.createElement("UL")).setAttribute("role","group"),i.className="jstree-children",r=0,o=n.children.length;o>r;r++)i.appendChild(this.redraw_node(n.children[r],!0,!0));t.appendChild(i)}},redraw_node:function(t,n,r,o){var i=this.get_node(t),a=!1,s=!1,l=!1,c=!1,p=!1,d=!1,f="",h=u,m=this._model.data,y=!1,g=null,b=0,v=0,_=!1,S=!1;if(!i)return!1;if(i.id===e.jstree.root)return this.redraw(!0);if(n=n||0===i.children.length,t=u.querySelector?this.element[0].querySelector("#"+(-1!=="0123456789".indexOf(i.id[0])?"\\3"+i.id[0]+" "+i.id.substr(1).replace(e.jstree.idregex,"\\$&"):i.id.replace(e.jstree.idregex,"\\$&"))):u.getElementById(i.id))t=e(t),r||((a=t.parent().parent()[0])===this.element[0]&&(a=null),s=t.index()),n||!i.children.length||t.children(".jstree-children").length||(n=!0),n||(l=t.children(".jstree-children")[0]),y=t.children(".jstree-anchor")[0]===u.activeElement,t.remove();else if(n=!0,!r){if(!(null===(a=i.parent!==e.jstree.root?e("#"+i.parent.replace(e.jstree.idregex,"\\$&"),this.element)[0]:null)||a&&m[i.parent].state.opened))return!1;s=e.inArray(i.id,null===a?m[e.jstree.root].children:m[i.parent].children)}for(c in t=this._data.core.node.cloneNode(!0),f="jstree-node ",i.li_attr)if(i.li_attr.hasOwnProperty(c)){if("id"===c)continue;"class"!==c?t.setAttribute(c,i.li_attr[c]):f+=i.li_attr[c]}for(i.a_attr.id||(i.a_attr.id=i.id+"_anchor"),t.setAttribute("aria-selected",!!i.state.selected),t.setAttribute("aria-level",i.parents.length),t.setAttribute("aria-labelledby",i.a_attr.id),i.state.disabled&&t.setAttribute("aria-disabled",!0),c=0,p=i.children.length;p>c;c++)if(!m[i.children[c]].state.hidden){_=!0;break}if(null!==i.parent&&m[i.parent]&&!i.state.hidden&&(c=e.inArray(i.id,m[i.parent].children),S=i.id,-1!==c))for(c++,p=m[i.parent].children.length;p>c&&(m[m[i.parent].children[c]].state.hidden||(S=m[i.parent].children[c]),S===i.id);c++);for(p in i.state.hidden&&(f+=" jstree-hidden"),i.state.loading&&(f+=" jstree-loading"),i.state.loaded&&!_?f+=" jstree-leaf":(f+=i.state.opened&&i.state.loaded?" jstree-open":" jstree-closed",t.setAttribute("aria-expanded",i.state.opened&&i.state.loaded)),S===i.id&&(f+=" jstree-last"),t.id=i.id,t.className=f,f=(i.state.selected?" jstree-clicked":"")+(i.state.disabled?" jstree-disabled":""),i.a_attr)if(i.a_attr.hasOwnProperty(p)){if("href"===p&&"#"===i.a_attr[p])continue;"class"!==p?t.childNodes[1].setAttribute(p,i.a_attr[p]):f+=" "+i.a_attr[p]}if(f.length&&(t.childNodes[1].className="jstree-anchor "+f),(i.icon&&!0!==i.icon||!1===i.icon)&&(!1===i.icon?t.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden":-1===i.icon.indexOf("/")&&-1===i.icon.indexOf(".")?t.childNodes[1].childNodes[0].className+=" "+i.icon+" jstree-themeicon-custom":(t.childNodes[1].childNodes[0].style.backgroundImage='url("'+i.icon+'")',t.childNodes[1].childNodes[0].style.backgroundPosition="center center",t.childNodes[1].childNodes[0].style.backgroundSize="auto",t.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom")),this.settings.core.force_text?t.childNodes[1].appendChild(h.createTextNode(i.text)):t.childNodes[1].innerHTML+=i.text,n&&i.children.length&&(i.state.opened||o)&&i.state.loaded){for((d=h.createElement("UL")).setAttribute("role","group"),d.className="jstree-children",c=0,p=i.children.length;p>c;c++)d.appendChild(this.redraw_node(i.children[c],n,!0));t.appendChild(d)}if(l&&t.appendChild(l),!r){for(a||(a=this.element[0]),c=0,p=a.childNodes.length;p>c;c++)if(a.childNodes[c]&&a.childNodes[c].className&&-1!==a.childNodes[c].className.indexOf("jstree-children")){g=a.childNodes[c];break}g||((g=h.createElement("UL")).setAttribute("role","group"),g.className="jstree-children",a.appendChild(g)),s<(a=g).childNodes.length?a.insertBefore(t,a.childNodes[s]):a.appendChild(t),y&&(b=this.element[0].scrollTop,v=this.element[0].scrollLeft,t.childNodes[1].focus(),this.element[0].scrollTop=b,this.element[0].scrollLeft=v)}return i.state.opened&&!i.state.loaded&&(i.state.opened=!1,setTimeout(e.proxy(function(){this.open_node(i.id,!1,0)},this),0)),t},open_node:function(n,r,o){var i,a,s,l;if(e.isArray(n)){for(n=n.slice(),i=0,a=n.length;a>i;i++)this.open_node(n[i],r,o);return!0}return!(!(n=this.get_node(n))||n.id===e.jstree.root)&&(o=o===t?this.settings.core.animation:o,this.is_closed(n)?this.is_loaded(n)?(s=this.get_node(n,!0),l=this,s.length&&(o&&s.children(".jstree-children").length&&s.children(".jstree-children").stop(!0,!0),n.children.length&&!this._firstChild(s.children(".jstree-children")[0])&&this.draw_children(n),o?(this.trigger("before_open",{node:n}),s.children(".jstree-children").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded",!0).children(".jstree-children").stop(!0,!0).slideDown(o,function(){this.style.display="",l.element&&l.trigger("after_open",{node:n})})):(this.trigger("before_open",{node:n}),s[0].className=s[0].className.replace("jstree-closed","jstree-open"),s[0].setAttribute("aria-expanded",!0))),n.state.opened=!0,r&&r.call(this,n,!0),s.length||this.trigger("before_open",{node:n}),this.trigger("open_node",{node:n}),o&&s.length||this.trigger("after_open",{node:n}),!0):this.is_loading(n)?setTimeout(e.proxy(function(){this.open_node(n,r,o)},this),500):void this.load_node(n,function(e,t){return t?this.open_node(e,r,o):!!r&&r.call(this,e,!1)}):(r&&r.call(this,n,!1),!1))},_open_to:function(t){if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;var n,r,o=t.parents;for(n=0,r=o.length;r>n;n+=1)n!==e.jstree.root&&this.open_node(o[n],!1,0);return e("#"+t.id.replace(e.jstree.idregex,"\\$&"),this.element)},close_node:function(n,r){var o,i,a,s;if(e.isArray(n)){for(n=n.slice(),o=0,i=n.length;i>o;o++)this.close_node(n[o],r);return!0}return!(!(n=this.get_node(n))||n.id===e.jstree.root)&&(!this.is_closed(n)&&(r=r===t?this.settings.core.animation:r,a=this,s=this.get_node(n,!0),n.state.opened=!1,this.trigger("close_node",{node:n}),void(s.length?r?s.children(".jstree-children").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded",!1).children(".jstree-children").stop(!0,!0).slideUp(r,function(){this.style.display="",s.children(".jstree-children").remove(),a.element&&a.trigger("after_close",{node:n})}):(s[0].className=s[0].className.replace("jstree-open","jstree-closed"),s.attr("aria-expanded",!1).children(".jstree-children").remove(),this.trigger("after_close",{node:n})):this.trigger("after_close",{node:n}))))},toggle_node:function(t){var n,r;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;r>n;n++)this.toggle_node(t[n]);return!0}return this.is_closed(t)?this.open_node(t):this.is_open(t)?this.close_node(t):void 0},open_all:function(t,n,r){if(t||(t=e.jstree.root),!(t=this.get_node(t)))return!1;var o,i,a,s=t.id===e.jstree.root?this.get_container_ul():this.get_node(t,!0);if(!s.length){for(o=0,i=t.children_d.length;i>o;o++)this.is_closed(this._model.data[t.children_d[o]])&&(this._model.data[t.children_d[o]].state.opened=!0);return this.trigger("open_all",{node:t})}r=r||s,a=this,(s=this.is_closed(t)?s.find(".jstree-closed").addBack():s.find(".jstree-closed")).each(function(){a.open_node(this,function(e,t){t&&this.is_parent(e)&&this.open_all(e,n,r)},n||0)}),0===r.find(".jstree-closed").length&&this.trigger("open_all",{node:this.get_node(r)})},close_all:function(t,n){if(t||(t=e.jstree.root),!(t=this.get_node(t)))return!1;var r,o,i=t.id===e.jstree.root?this.get_container_ul():this.get_node(t,!0),a=this;for(i.length&&(i=this.is_open(t)?i.find(".jstree-open").addBack():i.find(".jstree-open"),e(i.get().reverse()).each(function(){a.close_node(this,n||0)})),r=0,o=t.children_d.length;o>r;r++)this._model.data[t.children_d[r]].state.opened=!1;this.trigger("close_all",{node:t})},is_disabled:function(e){return(e=this.get_node(e))&&e.state&&e.state.disabled},enable_node:function(t){var n,r;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;r>n;n++)this.enable_node(t[n]);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(t.state.disabled=!1,this.get_node(t,!0).children(".jstree-anchor").removeClass("jstree-disabled").attr("aria-disabled",!1),void this.trigger("enable_node",{node:t}))},disable_node:function(t){var n,r;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;r>n;n++)this.disable_node(t[n]);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(t.state.disabled=!0,this.get_node(t,!0).children(".jstree-anchor").addClass("jstree-disabled").attr("aria-disabled",!0),void this.trigger("disable_node",{node:t}))},is_hidden:function(e){return!0===(e=this.get_node(e)).state.hidden},hide_node:function(t,n){var r,o;if(e.isArray(t)){for(t=t.slice(),r=0,o=t.length;o>r;r++)this.hide_node(t[r],!0);return n||this.redraw(),!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&void(t.state.hidden||(t.state.hidden=!0,this._node_changed(t.parent),n||this.redraw(),this.trigger("hide_node",{node:t})))},show_node:function(t,n){var r,o;if(e.isArray(t)){for(t=t.slice(),r=0,o=t.length;o>r;r++)this.show_node(t[r],!0);return n||this.redraw(),!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&void(t.state.hidden&&(t.state.hidden=!1,this._node_changed(t.parent),n||this.redraw(),this.trigger("show_node",{node:t})))},hide_all:function(t){var n,r=this._model.data,o=[];for(n in r)r.hasOwnProperty(n)&&n!==e.jstree.root&&!r[n].state.hidden&&(r[n].state.hidden=!0,o.push(n));return this._model.force_full_redraw=!0,t||this.redraw(),this.trigger("hide_all",{nodes:o}),o},show_all:function(t){var n,r=this._model.data,o=[];for(n in r)r.hasOwnProperty(n)&&n!==e.jstree.root&&r[n].state.hidden&&(r[n].state.hidden=!1,o.push(n));return this._model.force_full_redraw=!0,t||this.redraw(),this.trigger("show_all",{nodes:o}),o},activate_node:function(e,n){if(this.is_disabled(e))return!1;if(n&&"object"==typeof n||(n={}),this._data.core.last_clicked=this._data.core.last_clicked&&this._data.core.last_clicked.id!==t?this.get_node(this._data.core.last_clicked.id):null,this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected&&(this._data.core.last_clicked=null),!this._data.core.last_clicked&&this._data.core.selected.length&&(this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1])),this.settings.core.multiple&&(n.metaKey||n.ctrlKey||n.shiftKey)&&(!n.shiftKey||this._data.core.last_clicked&&this.get_parent(e)&&this.get_parent(e)===this._data.core.last_clicked.parent))if(n.shiftKey){var r,o,i=this.get_node(e).id,a=this._data.core.last_clicked.id,s=this.get_node(this._data.core.last_clicked.parent).children,l=!1;for(r=0,o=s.length;o>r;r+=1)s[r]===i&&(l=!l),s[r]===a&&(l=!l),this.is_disabled(s[r])||!l&&s[r]!==i&&s[r]!==a?this.deselect_node(s[r],!0,n):this.is_hidden(s[r])||this.select_node(s[r],!0,!1,n);this.trigger("changed",{action:"select_node",node:this.get_node(e),selected:this._data.core.selected,event:n})}else this.is_selected(e)?this.deselect_node(e,!1,n):this.select_node(e,!1,!1,n);else!this.settings.core.multiple&&(n.metaKey||n.ctrlKey||n.shiftKey)&&this.is_selected(e)?this.deselect_node(e,!1,n):(this.deselect_all(!0),this.select_node(e,!1,!1,n),this._data.core.last_clicked=this.get_node(e));this.trigger("activate_node",{node:this.get_node(e),event:n})},hover_node:function(e){if(!(e=this.get_node(e,!0))||!e.length||e.children(".jstree-hovered").length)return!1;var t=this.element.find(".jstree-hovered"),n=this.element;t&&t.length&&this.dehover_node(t),e.children(".jstree-anchor").addClass("jstree-hovered"),this.trigger("hover_node",{node:this.get_node(e)}),setTimeout(function(){n.attr("aria-activedescendant",e[0].id)},0)},dehover_node:function(e){return!!((e=this.get_node(e,!0))&&e.length&&e.children(".jstree-hovered").length)&&(e.children(".jstree-anchor").removeClass("jstree-hovered"),void this.trigger("dehover_node",{node:this.get_node(e)}))},select_node:function(t,n,r,o){var i,a,s;if(e.isArray(t)){for(t=t.slice(),a=0,s=t.length;s>a;a++)this.select_node(t[a],n,r,o);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(i=this.get_node(t,!0),void(t.state.selected||(t.state.selected=!0,this._data.core.selected.push(t.id),r||(i=this._open_to(t)),i&&i.length&&i.attr("aria-selected",!0).children(".jstree-anchor").addClass("jstree-clicked"),this.trigger("select_node",{node:t,selected:this._data.core.selected,event:o}),n||this.trigger("changed",{action:"select_node",node:t,selected:this._data.core.selected,event:o}))))},deselect_node:function(t,n,r){var o,i,a;if(e.isArray(t)){for(t=t.slice(),o=0,i=t.length;i>o;o++)this.deselect_node(t[o],n,r);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(a=this.get_node(t,!0),void(t.state.selected&&(t.state.selected=!1,this._data.core.selected=e.vakata.array_remove_item(this._data.core.selected,t.id),a.length&&a.attr("aria-selected",!1).children(".jstree-anchor").removeClass("jstree-clicked"),this.trigger("deselect_node",{node:t,selected:this._data.core.selected,event:r}),n||this.trigger("changed",{action:"deselect_node",node:t,selected:this._data.core.selected,event:r}))))},select_all:function(t){var n,r,o=this._data.core.selected.concat([]);for(this._data.core.selected=this._model.data[e.jstree.root].children_d.concat(),n=0,r=this._data.core.selected.length;r>n;n++)this._model.data[this._data.core.selected[n]]&&(this._model.data[this._data.core.selected[n]].state.selected=!0);this.redraw(!0),this.trigger("select_all",{selected:this._data.core.selected}),t||this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:o})},deselect_all:function(e){var t,n,r=this._data.core.selected.concat([]);for(t=0,n=this._data.core.selected.length;n>t;t++)this._model.data[this._data.core.selected[t]]&&(this._model.data[this._data.core.selected[t]].state.selected=!1);this._data.core.selected=[],this.element.find(".jstree-clicked").removeClass("jstree-clicked").parent().attr("aria-selected",!1),this.trigger("deselect_all",{selected:this._data.core.selected,node:r}),e||this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:r})},is_selected:function(t){return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&t.state.selected},get_selected:function(t){return t?e.map(this._data.core.selected,e.proxy(function(e){return this.get_node(e)},this)):this._data.core.selected.slice()},get_top_selected:function(t){var n,r,o,i,a=this.get_selected(!0),s={};for(n=0,r=a.length;r>n;n++)s[a[n].id]=a[n];for(n=0,r=a.length;r>n;n++)for(o=0,i=a[n].children_d.length;i>o;o++)s[a[n].children_d[o]]&&delete s[a[n].children_d[o]];for(n in a=[],s)s.hasOwnProperty(n)&&a.push(n);return t?e.map(a,e.proxy(function(e){return this.get_node(e)},this)):a},get_bottom_selected:function(t){var n,r,o=this.get_selected(!0),i=[];for(n=0,r=o.length;r>n;n++)o[n].children.length||i.push(o[n].id);return t?e.map(i,e.proxy(function(e){return this.get_node(e)},this)):i},get_state:function(){var t,n={core:{open:[],loaded:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},selected:[]}};for(t in this._model.data)this._model.data.hasOwnProperty(t)&&t!==e.jstree.root&&(this._model.data[t].state.loaded&&this.settings.core.loaded_state&&n.core.loaded.push(t),this._model.data[t].state.opened&&n.core.open.push(t),this._model.data[t].state.selected&&n.core.selected.push(t));return n},set_state:function(n,r){if(n){if(n.core&&n.core.selected&&n.core.initial_selection===t&&(n.core.initial_selection=this._data.core.selected.concat([]).sort().join(",")),n.core){var o,i;if(n.core.loaded)return this.settings.core.loaded_state&&e.isArray(n.core.loaded)&&n.core.loaded.length?this._load_nodes(n.core.loaded,function(e){delete n.core.loaded,this.set_state(n,r)}):(delete n.core.loaded,this.set_state(n,r)),!1;if(n.core.open)return e.isArray(n.core.open)&&n.core.open.length?this._load_nodes(n.core.open,function(e){this.open_node(e,!1,0),delete n.core.open,this.set_state(n,r)}):(delete n.core.open,this.set_state(n,r)),!1;if(n.core.scroll)return n.core.scroll&&n.core.scroll.left!==t&&this.element.scrollLeft(n.core.scroll.left),n.core.scroll&&n.core.scroll.top!==t&&this.element.scrollTop(n.core.scroll.top),delete n.core.scroll,this.set_state(n,r),!1;if(n.core.selected)return o=this,(n.core.initial_selection===t||n.core.initial_selection===this._data.core.selected.concat([]).sort().join(","))&&(this.deselect_all(),e.each(n.core.selected,function(e,t){o.select_node(t,!1,!0)})),delete n.core.initial_selection,delete n.core.selected,this.set_state(n,r),!1;for(i in n)n.hasOwnProperty(i)&&"core"!==i&&-1===e.inArray(i,this.settings.plugins)&&delete n[i];if(e.isEmptyObject(n.core))return delete n.core,this.set_state(n,r),!1}return!e.isEmptyObject(n)||(n=null,r&&r.call(this),this.trigger("set_state"),!1)}return!1},refresh:function(t,n){this._data.core.state=!0===n?{}:this.get_state(),n&&e.isFunction(n)&&(this._data.core.state=n.call(this,this._data.core.state)),this._cnt=0,this._model.data={},this._model.data[e.jstree.root]={id:e.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this._data.core.selected=[],this._data.core.last_clicked=null,this._data.core.focused=null;var r=this.get_container_ul()[0].className;t||(this.element.html("<ul class='"+r+"' role='group'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='treeitem' id='j"+this._id+"_loading'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading")),this.load_node(e.jstree.root,function(t,n){n&&(this.get_container_ul()[0].className=r,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.set_state(e.extend(!0,{},this._data.core.state),function(){this.trigger("refresh")})),this._data.core.state=null})},refresh_node:function(t){if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;var n=[],r=[],o=this._data.core.selected.concat([]);r.push(t.id),!0===t.state.opened&&n.push(t.id),this.get_node(t,!0).find(".jstree-open").each(function(){r.push(this.id),n.push(this.id)}),this._load_nodes(r,e.proxy(function(e){this.open_node(n,!1,0),this.select_node(o),this.trigger("refresh_node",{node:t,nodes:e})},this),!1,!0)},set_id:function(t,n){if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;var r,o,i=this._model.data,a=t.id;for(n=n.toString(),i[t.parent].children[e.inArray(t.id,i[t.parent].children)]=n,r=0,o=t.parents.length;o>r;r++)i[t.parents[r]].children_d[e.inArray(t.id,i[t.parents[r]].children_d)]=n;for(r=0,o=t.children.length;o>r;r++)i[t.children[r]].parent=n;for(r=0,o=t.children_d.length;o>r;r++)i[t.children_d[r]].parents[e.inArray(t.id,i[t.children_d[r]].parents)]=n;return-1!==(r=e.inArray(t.id,this._data.core.selected))&&(this._data.core.selected[r]=n),(r=this.get_node(t.id,!0))&&(r.attr("id",n),this.element.attr("aria-activedescendant")===t.id&&this.element.attr("aria-activedescendant",n)),delete i[t.id],t.id=n,t.li_attr.id=n,i[n]=t,this.trigger("set_id",{node:t,new:t.id,old:a}),!0},get_text:function(t){return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&t.text},set_text:function(t,n){var r,o;if(e.isArray(t)){for(t=t.slice(),r=0,o=t.length;o>r;r++)this.set_text(t[r],n);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(t.text=n,this.get_node(t,!0).length&&this.redraw_node(t.id),this.trigger("set_text",{obj:t,text:n}),!0)},get_json:function(t,n,r){if(!(t=this.get_node(t||e.jstree.root)))return!1;n&&n.flat&&!r&&(r=[]);var o,i,a={id:t.id,text:t.text,icon:this.get_icon(t),li_attr:e.extend(!0,{},t.li_attr),a_attr:e.extend(!0,{},t.a_attr),state:{},data:(!n||!n.no_data)&&e.extend(!0,e.isArray(t.data)?[]:{},t.data)};if(n&&n.flat?a.parent=t.parent:a.children=[],n&&n.no_state)delete a.state;else for(o in t.state)t.state.hasOwnProperty(o)&&(a.state[o]=t.state[o]);if(n&&n.no_li_attr&&delete a.li_attr,n&&n.no_a_attr&&delete a.a_attr,n&&n.no_id&&(delete a.id,a.li_attr&&a.li_attr.id&&delete a.li_attr.id,a.a_attr&&a.a_attr.id&&delete a.a_attr.id),n&&n.flat&&t.id!==e.jstree.root&&r.push(a),!n||!n.no_children)for(o=0,i=t.children.length;i>o;o++)n&&n.flat?this.get_json(t.children[o],n,r):a.children.push(this.get_json(t.children[o],n));return n&&n.flat?r:t.id===e.jstree.root?a.children:a},create_node:function(n,r,o,i,a){if(null===n&&(n=e.jstree.root),!(n=this.get_node(n)))return!1;if(!(o=o===t?"last":o).toString().match(/^(before|after)$/)&&!a&&!this.is_loaded(n))return this.load_node(n,function(){this.create_node(n,r,o,i,!0)});var s,l,u,c;switch(r||(r={text:this.get_string("New node")}),(r="string"==typeof r?{text:r}:e.extend(!0,{},r)).text===t&&(r.text=this.get_string("New node")),n.id===e.jstree.root&&("before"===o&&(o="first"),"after"===o&&(o="last")),o){case"before":s=this.get_node(n.parent),o=e.inArray(n.id,s.children),n=s;break;case"after":s=this.get_node(n.parent),o=e.inArray(n.id,s.children)+1,n=s;break;case"inside":case"first":o=0;break;case"last":o=n.children.length;break;default:o||(o=0)}if(o>n.children.length&&(o=n.children.length),r.id||(r.id=!0),!this.check("create_node",r,n,o))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(!0===r.id&&delete r.id,!(r=this._parse_model_from_json(r,n.id,n.parents.concat())))return!1;for(s=this.get_node(r),(l=[]).push(r),l=l.concat(s.children_d),this.trigger("model",{nodes:l,parent:n.id}),n.children_d=n.children_d.concat(l),u=0,c=n.parents.length;c>u;u++)this._model.data[n.parents[u]].children_d=this._model.data[n.parents[u]].children_d.concat(l);for(r=s,s=[],u=0,c=n.children.length;c>u;u++)s[u>=o?u+1:u]=n.children[u];return s[o]=r.id,n.children=s,this.redraw_node(n,!0),this.trigger("create_node",{node:this.get_node(r),parent:n.id,position:o}),i&&i.call(this,this.get_node(r)),r.id},rename_node:function(t,n){var r,o,i;if(e.isArray(t)){for(t=t.slice(),r=0,o=t.length;o>r;r++)this.rename_node(t[r],n);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(i=t.text,this.check("rename_node",t,this.get_parent(t),n)?(this.set_text(t,n),this.trigger("rename_node",{node:t,text:n,old:i}),!0):(this.settings.core.error.call(this,this._data.core.last_error),!1))},delete_node:function(t){var n,r,o,i,a,s,l,u,c,p,d,f;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;r>n;n++)this.delete_node(t[n]);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;if(o=this.get_node(t.parent),i=e.inArray(t.id,o.children),p=!1,!this.check("delete_node",t,o,i))return this.settings.core.error.call(this,this._data.core.last_error),!1;for(-1!==i&&(o.children=e.vakata.array_remove(o.children,i)),(a=t.children_d.concat([])).push(t.id),s=0,l=t.parents.length;l>s;s++)this._model.data[t.parents[s]].children_d=e.vakata.array_filter(this._model.data[t.parents[s]].children_d,function(t){return-1===e.inArray(t,a)});for(u=0,c=a.length;c>u;u++)if(this._model.data[a[u]].state.selected){p=!0;break}for(p&&(this._data.core.selected=e.vakata.array_filter(this._data.core.selected,function(t){return-1===e.inArray(t,a)})),this.trigger("delete_node",{node:t,parent:o.id}),p&&this.trigger("changed",{action:"delete_node",node:t,selected:this._data.core.selected,parent:o.id}),u=0,c=a.length;c>u;u++)delete this._model.data[a[u]];return-1!==e.inArray(this._data.core.focused,a)&&(this._data.core.focused=null,d=this.element[0].scrollTop,f=this.element[0].scrollLeft,o.id===e.jstree.root?this._model.data[e.jstree.root].children[0]&&this.get_node(this._model.data[e.jstree.root].children[0],!0).children(".jstree-anchor").focus():this.get_node(o,!0).children(".jstree-anchor").focus(),this.element[0].scrollTop=d,this.element[0].scrollLeft=f),this.redraw_node(o,!0),!0},check:function(t,n,r,o,i){n=n&&n.id?n:this.get_node(n),r=r&&r.id?r:this.get_node(r);var a=t.match(/^move_node|copy_node|create_node$/i)?r:n,s=this.settings.core.check_callback;return"move_node"!==t&&"copy_node"!==t||i&&i.is_multi||n.id!==r.id&&("move_node"!==t||e.inArray(n.id,r.children)!==o)&&-1===e.inArray(r.id,n.children_d)?(a&&a.data&&(a=a.data),a&&a.functions&&(!1===a.functions[t]||!0===a.functions[t])?(!1===a.functions[t]&&(this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+t,data:JSON.stringify({chk:t,pos:o,obj:!(!n||!n.id)&&n.id,par:!(!r||!r.id)&&r.id})}),a.functions[t]):!(!1===s||e.isFunction(s)&&!1===s.call(this,t,n,r,o,i)||s&&!1===s[t])||(this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+t,data:JSON.stringify({chk:t,pos:o,obj:!(!n||!n.id)&&n.id,par:!(!r||!r.id)&&r.id})},!1)):(this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:t,pos:o,obj:!(!n||!n.id)&&n.id,par:!(!r||!r.id)&&r.id})},!1)},last_error:function(){return this._data.core.last_error},move_node:function(n,r,o,i,a,s,l){var u,c,p,d,f,h,m,y,g,b,v,_,S,E;if(r=this.get_node(r),o=o===t?0:o,!r)return!1;if(!o.toString().match(/^(before|after)$/)&&!a&&!this.is_loaded(r))return this.load_node(r,function(){this.move_node(n,r,o,i,!0,!1,l)});if(e.isArray(n)){if(1!==n.length){for(u=0,c=n.length;c>u;u++)(g=this.move_node(n[u],r,o,i,a,!1,l))&&(r=g,o="after");return this.redraw(),!0}n=n[0]}if(!(n=n&&n.id?n:this.get_node(n))||n.id===e.jstree.root)return!1;if(p=(n.parent||e.jstree.root).toString(),f=o.toString().match(/^(before|after)$/)&&r.id!==e.jstree.root?this.get_node(r.parent):r,h=l||(this._model.data[n.id]?this:e.jstree.reference(n.id)),m=!h||!h._id||this._id!==h._id,d=h&&h._id&&p&&h._model.data[p]&&h._model.data[p].children?e.inArray(n.id,h._model.data[p].children):-1,h&&h._id&&(n=h._model.data[n.id]),m)return!!(g=this.copy_node(n,r,o,i,a,!1,l))&&(h&&h.delete_node(n),g);switch(r.id===e.jstree.root&&("before"===o&&(o="first"),"after"===o&&(o="last")),o){case"before":o=e.inArray(r.id,f.children);break;case"after":o=e.inArray(r.id,f.children)+1;break;case"inside":case"first":o=0;break;case"last":o=f.children.length;break;default:o||(o=0)}if(o>f.children.length&&(o=f.children.length),!this.check("move_node",n,f,o,{core:!0,origin:l,is_multi:h&&h._id&&h._id!==this._id,is_foreign:!h||!h._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(n.parent===f.id){for(y=f.children.concat(),-1!==(g=e.inArray(n.id,y))&&(y=e.vakata.array_remove(y,g),o>g&&o--),g=[],b=0,v=y.length;v>b;b++)g[b>=o?b+1:b]=y[b];g[o]=n.id,f.children=g,this._node_changed(f.id),this.redraw(f.id===e.jstree.root)}else{for((g=n.children_d.concat()).push(n.id),b=0,v=n.parents.length;v>b;b++){for(y=[],E=h._model.data[n.parents[b]].children_d,_=0,S=E.length;S>_;_++)-1===e.inArray(E[_],g)&&y.push(E[_]);h._model.data[n.parents[b]].children_d=y}for(h._model.data[p].children=e.vakata.array_remove_item(h._model.data[p].children,n.id),b=0,v=f.parents.length;v>b;b++)this._model.data[f.parents[b]].children_d=this._model.data[f.parents[b]].children_d.concat(g);for(y=[],b=0,v=f.children.length;v>b;b++)y[b>=o?b+1:b]=f.children[b];for(y[o]=n.id,f.children=y,f.children_d.push(n.id),f.children_d=f.children_d.concat(n.children_d),n.parent=f.id,(g=f.parents.concat()).unshift(f.id),E=n.parents.length,n.parents=g,g=g.concat(),b=0,v=n.children_d.length;v>b;b++)this._model.data[n.children_d[b]].parents=this._model.data[n.children_d[b]].parents.slice(0,-1*E),Array.prototype.push.apply(this._model.data[n.children_d[b]].parents,g);(p===e.jstree.root||f.id===e.jstree.root)&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||(this._node_changed(p),this._node_changed(f.id)),s||this.redraw()}return i&&i.call(this,n,f,o),this.trigger("move_node",{node:n,parent:f.id,position:o,old_parent:p,old_position:d,is_multi:h&&h._id&&h._id!==this._id,is_foreign:!h||!h._id,old_instance:h,new_instance:this}),n.id},copy_node:function(n,r,o,i,a,s,l){var u,c,p,d,f,h,m,y,g,b;if(r=this.get_node(r),o=o===t?0:o,!r)return!1;if(!o.toString().match(/^(before|after)$/)&&!a&&!this.is_loaded(r))return this.load_node(r,function(){this.copy_node(n,r,o,i,!0,!1,l)});if(e.isArray(n)){if(1!==n.length){for(u=0,c=n.length;c>u;u++)(d=this.copy_node(n[u],r,o,i,a,!0,l))&&(r=d,o="after");return this.redraw(),!0}n=n[0]}if(!(n=n&&n.id?n:this.get_node(n))||n.id===e.jstree.root)return!1;switch(y=(n.parent||e.jstree.root).toString(),g=o.toString().match(/^(before|after)$/)&&r.id!==e.jstree.root?this.get_node(r.parent):r,b=l||(this._model.data[n.id]?this:e.jstree.reference(n.id)),!b||!b._id||this._id!==b._id,b&&b._id&&(n=b._model.data[n.id]),r.id===e.jstree.root&&("before"===o&&(o="first"),"after"===o&&(o="last")),o){case"before":o=e.inArray(r.id,g.children);break;case"after":o=e.inArray(r.id,g.children)+1;break;case"inside":case"first":o=0;break;case"last":o=g.children.length;break;default:o||(o=0)}if(o>g.children.length&&(o=g.children.length),!this.check("copy_node",n,g,o,{core:!0,origin:l,is_multi:b&&b._id&&b._id!==this._id,is_foreign:!b||!b._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(!(m=b?b.get_json(n,{no_id:!0,no_data:!0,no_state:!0}):n))return!1;if(!0===m.id&&delete m.id,!(m=this._parse_model_from_json(m,g.id,g.parents.concat())))return!1;for(d=this.get_node(m),n&&n.state&&!1===n.state.loaded&&(d.state.loaded=!1),(p=[]).push(m),p=p.concat(d.children_d),this.trigger("model",{nodes:p,parent:g.id}),f=0,h=g.parents.length;h>f;f++)this._model.data[g.parents[f]].children_d=this._model.data[g.parents[f]].children_d.concat(p);for(p=[],f=0,h=g.children.length;h>f;f++)p[f>=o?f+1:f]=g.children[f];return p[o]=d.id,g.children=p,g.children_d.push(d.id),g.children_d=g.children_d.concat(d.children_d),g.id===e.jstree.root&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||this._node_changed(g.id),s||this.redraw(g.id===e.jstree.root),i&&i.call(this,d,g,o),this.trigger("copy_node",{node:d,original:n,parent:g.id,position:o,old_parent:y,old_position:b&&b._id&&y&&b._model.data[y]&&b._model.data[y].children?e.inArray(n.id,b._model.data[y].children):-1,is_multi:b&&b._id&&b._id!==this._id,is_foreign:!b||!b._id,old_instance:b,new_instance:this}),d.id},cut:function(t){if(t||(t=this._data.core.selected.concat()),e.isArray(t)||(t=[t]),!t.length)return!1;var n,r,s,l=[];for(r=0,s=t.length;s>r;r++)(n=this.get_node(t[r]))&&n.id&&n.id!==e.jstree.root&&l.push(n);return!!l.length&&(o=l,a=this,i="move_node",void this.trigger("cut",{node:t}))},copy:function(t){if(t||(t=this._data.core.selected.concat()),e.isArray(t)||(t=[t]),!t.length)return!1;var n,r,s,l=[];for(r=0,s=t.length;s>r;r++)(n=this.get_node(t[r]))&&n.id&&n.id!==e.jstree.root&&l.push(n);return!!l.length&&(o=l,a=this,i="copy_node",void this.trigger("copy",{node:t}))},get_buffer:function(){return{mode:i,node:o,inst:a}},can_paste:function(){return!1!==i&&!1!==o},paste:function(e,t){return!!((e=this.get_node(e))&&i&&i.match(/^(copy_node|move_node)$/)&&o)&&(this[i](o,e,t,!1,!1,!1,a)&&this.trigger("paste",{parent:e.id,node:o,mode:i}),o=!1,i=!1,void(a=!1))},clear_buffer:function(){o=!1,i=!1,a=!1,this.trigger("clear_buffer")},edit:function(t,n,r){var o,i,a,s,l,c,p,d,f,h=!1;return!!(t=this.get_node(t))&&(this.check("edit",t,this.get_parent(t))?(f=t,n="string"==typeof n?n:t.text,this.set_text(t,""),t=this._open_to(t),f.text=n,o=this._data.core.rtl,i=this.element.width(),this._data.core.focused=f.id,a=t.children(".jstree-anchor").focus(),s=e("<span>"),l=n,c=e("<div />",{css:{position:"absolute",top:"-200px",left:o?"0px":"-1000px",visibility:"hidden"}}).appendTo(u.body),p=e("<input />",{value:l,class:"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:this._data.core.li_height+"px",lineHeight:this._data.core.li_height+"px",width:"150px"},blur:e.proxy(function(n){n.stopImmediatePropagation(),n.preventDefault();var o,i=s.children(".jstree-rename-input"),u=i.val(),d=this.settings.core.force_text;""===u&&(u=l),c.remove(),s.replaceWith(a),s.remove(),l=d?l:e("<div></div>").append(e.parseHTML(l)).html(),t=this.get_node(t),this.set_text(t,l),(o=!!this.rename_node(t,d?e("<div></div>").text(u).text():e("<div></div>").append(e.parseHTML(u)).html()))||this.set_text(t,l),this._data.core.focused=f.id,setTimeout(e.proxy(function(){var e=this.get_node(f.id,!0);e.length&&(this._data.core.focused=f.id,e.children(".jstree-anchor").focus())},this),0),r&&r.call(this,f,o,h),p=null},this),keydown:function(e){var t=e.which;27===t&&(h=!0,this.value=l),(27===t||13===t||37===t||38===t||39===t||40===t||32===t)&&e.stopImmediatePropagation(),(27===t||13===t)&&(e.preventDefault(),this.blur())},click:function(e){e.stopImmediatePropagation()},mousedown:function(e){e.stopImmediatePropagation()},keyup:function(e){p.width(Math.min(c.text("pW"+this.value).width(),i))},keypress:function(e){return 13!==e.which&&void 0}}),d={fontFamily:a.css("fontFamily")||"",fontSize:a.css("fontSize")||"",fontWeight:a.css("fontWeight")||"",fontStyle:a.css("fontStyle")||"",fontStretch:a.css("fontStretch")||"",fontVariant:a.css("fontVariant")||"",letterSpacing:a.css("letterSpacing")||"",wordSpacing:a.css("wordSpacing")||""},s.attr("class",a.attr("class")).append(a.contents().clone()).append(p),a.replaceWith(s),c.css(d),p.css(d).width(Math.min(c.text("pW"+p[0].value).width(),i))[0].select(),void e(u).one("mousedown.jstree touchstart.jstree dnd_start.vakata",function(t){p&&t.target!==p&&e(p).blur()})):(this.settings.core.error.call(this,this._data.core.last_error),!1))},set_theme:function(t,n){if(!t)return!1;if(!0===n){var r=this.settings.core.themes.dir;r||(r=e.jstree.path+"/themes"),n=r+"/"+t+"/style.css"}n&&-1===e.inArray(n,s)&&(e("head").append('<link rel="stylesheet" href="'+n+'" type="text/css" />'),s.push(n)),this._data.core.themes.name&&this.element.removeClass("jstree-"+this._data.core.themes.name),this._data.core.themes.name=t,this.element.addClass("jstree-"+t),this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+t+"-responsive"),this.trigger("set_theme",{theme:t})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(e){this._data.core.themes.variant&&this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant),this._data.core.themes.variant=e,e&&this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=!0,this.get_container_ul().addClass("jstree-striped"),this.trigger("show_stripes")},hide_stripes:function(){this._data.core.themes.stripes=!1,this.get_container_ul().removeClass("jstree-striped"),this.trigger("hide_stripes")},toggle_stripes:function(){this._data.core.themes.stripes?this.hide_stripes():this.show_stripes()},show_dots:function(){this._data.core.themes.dots=!0,this.get_container_ul().removeClass("jstree-no-dots"),this.trigger("show_dots")},hide_dots:function(){this._data.core.themes.dots=!1,this.get_container_ul().addClass("jstree-no-dots"),this.trigger("hide_dots")},toggle_dots:function(){this._data.core.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this._data.core.themes.icons=!0,this.get_container_ul().removeClass("jstree-no-icons"),this.trigger("show_icons")},hide_icons:function(){this._data.core.themes.icons=!1,this.get_container_ul().addClass("jstree-no-icons"),this.trigger("hide_icons")},toggle_icons:function(){this._data.core.themes.icons?this.hide_icons():this.show_icons()},show_ellipsis:function(){this._data.core.themes.ellipsis=!0,this.get_container_ul().addClass("jstree-ellipsis"),this.trigger("show_ellipsis")},hide_ellipsis:function(){this._data.core.themes.ellipsis=!1,this.get_container_ul().removeClass("jstree-ellipsis"),this.trigger("hide_ellipsis")},toggle_ellipsis:function(){this._data.core.themes.ellipsis?this.hide_ellipsis():this.show_ellipsis()},set_icon:function(n,r){var o,i,a,s;if(e.isArray(n)){for(n=n.slice(),o=0,i=n.length;i>o;o++)this.set_icon(n[o],r);return!0}return!(!(n=this.get_node(n))||n.id===e.jstree.root)&&(s=n.icon,n.icon=!0===r||null===r||r===t||""===r||r,a=this.get_node(n,!0).children(".jstree-anchor").children(".jstree-themeicon"),!1===r?(a.removeClass("jstree-themeicon-custom "+s).css("background","").removeAttr("rel"),this.hide_icon(n)):!0===r||null===r||r===t||""===r?(a.removeClass("jstree-themeicon-custom "+s).css("background","").removeAttr("rel"),!1===s&&this.show_icon(n)):-1===r.indexOf("/")&&-1===r.indexOf(".")?(a.removeClass(s).css("background",""),a.addClass(r+" jstree-themeicon-custom").attr("rel",r),!1===s&&this.show_icon(n)):(a.removeClass(s).css("background",""),a.addClass("jstree-themeicon-custom").css("background","url('"+r+"') center center no-repeat").attr("rel",r),!1===s&&this.show_icon(n)),!0)},get_icon:function(t){return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&t.icon},hide_icon:function(t){var n,r;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;r>n;n++)this.hide_icon(t[n]);return!0}return!(!(t=this.get_node(t))||t===e.jstree.root)&&(t.icon=!1,this.get_node(t,!0).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden"),!0)},show_icon:function(t){var n,r,o;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;r>n;n++)this.show_icon(t[n]);return!0}return!(!(t=this.get_node(t))||t===e.jstree.root)&&(o=this.get_node(t,!0),t.icon=!o.length||o.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"),t.icon||(t.icon=!0),o.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden"),!0)}},e.vakata={},e.vakata.attributes=function(t,n){t=e(t)[0];var r=n?{}:[];return t&&t.attributes&&e.each(t.attributes,function(t,o){-1===e.inArray(o.name.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])&&null!==o.value&&""!==e.trim(o.value)&&(n?r[o.name]=o.value:r.push(o.name))}),r},e.vakata.array_unique=function(e){var n,r,o=[],i={};for(n=0,r=e.length;r>n;n++)i[e[n]]===t&&(o.push(e[n]),i[e[n]]=!0);return o},e.vakata.array_remove=function(e,t){return e.splice(t,1),e},e.vakata.array_remove_item=function(t,n){var r=e.inArray(n,t);return-1!==r?e.vakata.array_remove(t,r):t},e.vakata.array_filter=function(e,t,n,r,o){if(e.filter)return e.filter(t,n);for(o in r=[],e)~~o+""==o+""&&o>=0&&t.call(n,e[o],+o,e)&&r.push(e[o]);return r},e.jstree.plugins.changed=function(e,t){var n=[];this.trigger=function(e,r){var o,i;if(r||(r={}),"changed"===e.replace(".jstree","")){r.changed={selected:[],deselected:[]};var a={};for(o=0,i=n.length;i>o;o++)a[n[o]]=1;for(o=0,i=r.selected.length;i>o;o++)a[r.selected[o]]?a[r.selected[o]]=2:r.changed.selected.push(r.selected[o]);for(o=0,i=n.length;i>o;o++)1===a[n[o]]&&r.changed.deselected.push(n[o]);n=r.selected.slice()}t.trigger.call(this,e,r)},this.refresh=function(e,r){return n=[],t.refresh.apply(this,arguments)}};var c,p,d=u.createElement("I");d.className="jstree-icon jstree-checkbox",d.setAttribute("role","presentation"),e.jstree.defaults.checkbox={visible:!0,three_state:!0,whole_node:!0,keep_selected_style:!0,cascade:"",tie_selection:!0,cascade_to_disabled:!0,cascade_to_hidden:!0},e.jstree.plugins.checkbox=function(n,r){this.bind=function(){r.bind.call(this),this._data.checkbox.uto=!1,this._data.checkbox.selected=[],this.settings.checkbox.three_state&&(this.settings.checkbox.cascade="up+down+undetermined"),this.element.on("init.jstree",e.proxy(function(){this._data.checkbox.visible=this.settings.checkbox.visible,this.settings.checkbox.keep_selected_style||this.element.addClass("jstree-checkbox-no-clicked"),this.settings.checkbox.tie_selection&&this.element.addClass("jstree-checkbox-selection")},this)).on("loading.jstree",e.proxy(function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()},this)),-1!==this.settings.checkbox.cascade.indexOf("undetermined")&&this.element.on("changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",e.proxy(function(){this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(e.proxy(this._undetermined,this),50)},this)),this.settings.checkbox.tie_selection||this.element.on("model.jstree",e.proxy(function(e,t){var n,r,o=this._model.data,i=(o[t.parent],t.nodes);for(n=0,r=i.length;r>n;n++)o[i[n]].state.checked=o[i[n]].state.checked||o[i[n]].original&&o[i[n]].original.state&&o[i[n]].original.state.checked,o[i[n]].state.checked&&this._data.checkbox.selected.push(i[n])},this)),(-1!==this.settings.checkbox.cascade.indexOf("up")||-1!==this.settings.checkbox.cascade.indexOf("down"))&&this.element.on("model.jstree",e.proxy(function(t,n){var r,o,i,a,s,l,u=this._model.data,c=u[n.parent],p=n.nodes,d=[],f=this.settings.checkbox.cascade,h=this.settings.checkbox.tie_selection;if(-1!==f.indexOf("down"))if(c.state[h?"selected":"checked"]){for(o=0,i=p.length;i>o;o++)u[p[o]].state[h?"selected":"checked"]=!0;this._data[h?"core":"checkbox"].selected=this._data[h?"core":"checkbox"].selected.concat(p)}else for(o=0,i=p.length;i>o;o++)if(u[p[o]].state[h?"selected":"checked"]){for(a=0,s=u[p[o]].children_d.length;s>a;a++)u[u[p[o]].children_d[a]].state[h?"selected":"checked"]=!0;this._data[h?"core":"checkbox"].selected=this._data[h?"core":"checkbox"].selected.concat(u[p[o]].children_d)}if(-1!==f.indexOf("up")){for(o=0,i=c.children_d.length;i>o;o++)u[c.children_d[o]].children.length||d.push(u[c.children_d[o]].parent);for(d=e.vakata.array_unique(d),a=0,s=d.length;s>a;a++)for(c=u[d[a]];c&&c.id!==e.jstree.root;){for(r=0,o=0,i=c.children.length;i>o;o++)r+=u[c.children[o]].state[h?"selected":"checked"];if(r!==i)break;c.state[h?"selected":"checked"]=!0,this._data[h?"core":"checkbox"].selected.push(c.id),(l=this.get_node(c,!0))&&l.length&&l.attr("aria-selected",!0).children(".jstree-anchor").addClass(h?"jstree-clicked":"jstree-checked"),c=this.get_node(c.parent)}}this._data[h?"core":"checkbox"].selected=e.vakata.array_unique(this._data[h?"core":"checkbox"].selected)},this)).on(this.settings.checkbox.tie_selection?"select_node.jstree":"check_node.jstree",e.proxy(function(t,n){var r,o,i,a,s=n.node,l=this._model.data,u=this.get_node(s.parent),c=this.settings.checkbox.cascade,p=this.settings.checkbox.tie_selection,d={},f=this._data[p?"core":"checkbox"].selected;for(r=0,o=f.length;o>r;r++)d[f[r]]=!0;if(-1!==c.indexOf("down")){var h=this._cascade_new_checked_state(s.id,!0),m=s.children_d.concat(s.id);for(r=0,o=m.length;o>r;r++)h.indexOf(m[r])>-1?d[m[r]]=!0:delete d[m[r]]}if(-1!==c.indexOf("up"))for(;u&&u.id!==e.jstree.root;){for(i=0,r=0,o=u.children.length;o>r;r++)i+=l[u.children[r]].state[p?"selected":"checked"];if(i!==o)break;u.state[p?"selected":"checked"]=!0,d[u.id]=!0,(a=this.get_node(u,!0))&&a.length&&a.attr("aria-selected",!0).children(".jstree-anchor").addClass(p?"jstree-clicked":"jstree-checked"),u=this.get_node(u.parent)}for(r in f=[],d)d.hasOwnProperty(r)&&f.push(r);this._data[p?"core":"checkbox"].selected=f},this)).on(this.settings.checkbox.tie_selection?"deselect_all.jstree":"uncheck_all.jstree",e.proxy(function(t,n){var r,o,i,a=this.get_node(e.jstree.root),s=this._model.data;for(r=0,o=a.children_d.length;o>r;r++)(i=s[a.children_d[r]])&&i.original&&i.original.state&&i.original.state.undetermined&&(i.original.state.undetermined=!1)},this)).on(this.settings.checkbox.tie_selection?"deselect_node.jstree":"uncheck_node.jstree",e.proxy(function(e,t){var n,r,o,i=t.node,a=(this.get_node(i,!0),this.settings.checkbox.cascade),s=this.settings.checkbox.tie_selection,l=this._data[s?"core":"checkbox"].selected,u=i.children_d.concat(i.id);if(-1!==a.indexOf("down")){var c=this._cascade_new_checked_state(i.id,!1);l=l.filter(function(e){return-1===u.indexOf(e)||c.indexOf(e)>-1})}if(-1!==a.indexOf("up")&&-1===l.indexOf(i.id)){for(n=0,r=i.parents.length;r>n;n++)(o=this._model.data[i.parents[n]]).state[s?"selected":"checked"]=!1,o&&o.original&&o.original.state&&o.original.state.undetermined&&(o.original.state.undetermined=!1),(o=this.get_node(i.parents[n],!0))&&o.length&&o.attr("aria-selected",!1).children(".jstree-anchor").removeClass(s?"jstree-clicked":"jstree-checked");l=l.filter(function(e){return-1===i.parents.indexOf(e)})}this._data[s?"core":"checkbox"].selected=l},this)),-1!==this.settings.checkbox.cascade.indexOf("up")&&this.element.on("delete_node.jstree",e.proxy(function(t,n){for(var r,o,i,a,s=this.get_node(n.parent),l=this._model.data,u=this.settings.checkbox.tie_selection;s&&s.id!==e.jstree.root&&!s.state[u?"selected":"checked"];){for(i=0,r=0,o=s.children.length;o>r;r++)i+=l[s.children[r]].state[u?"selected":"checked"];if(!(o>0&&i===o))break;s.state[u?"selected":"checked"]=!0,this._data[u?"core":"checkbox"].selected.push(s.id),(a=this.get_node(s,!0))&&a.length&&a.attr("aria-selected",!0).children(".jstree-anchor").addClass(u?"jstree-clicked":"jstree-checked"),s=this.get_node(s.parent)}},this)).on("move_node.jstree",e.proxy(function(t,n){var r,o,i,a,s,l=n.is_multi,u=n.old_parent,c=this.get_node(n.parent),p=this._model.data,d=this.settings.checkbox.tie_selection;if(!l)for(r=this.get_node(u);r&&r.id!==e.jstree.root&&!r.state[d?"selected":"checked"];){for(o=0,i=0,a=r.children.length;a>i;i++)o+=p[r.children[i]].state[d?"selected":"checked"];if(!(a>0&&o===a))break;r.state[d?"selected":"checked"]=!0,this._data[d?"core":"checkbox"].selected.push(r.id),(s=this.get_node(r,!0))&&s.length&&s.attr("aria-selected",!0).children(".jstree-anchor").addClass(d?"jstree-clicked":"jstree-checked"),r=this.get_node(r.parent)}for(r=c;r&&r.id!==e.jstree.root;){for(o=0,i=0,a=r.children.length;a>i;i++)o+=p[r.children[i]].state[d?"selected":"checked"];if(o===a)r.state[d?"selected":"checked"]||(r.state[d?"selected":"checked"]=!0,this._data[d?"core":"checkbox"].selected.push(r.id),(s=this.get_node(r,!0))&&s.length&&s.attr("aria-selected",!0).children(".jstree-anchor").addClass(d?"jstree-clicked":"jstree-checked"));else{if(!r.state[d?"selected":"checked"])break;r.state[d?"selected":"checked"]=!1,this._data[d?"core":"checkbox"].selected=e.vakata.array_remove_item(this._data[d?"core":"checkbox"].selected,r.id),(s=this.get_node(r,!0))&&s.length&&s.attr("aria-selected",!1).children(".jstree-anchor").removeClass(d?"jstree-clicked":"jstree-checked")}r=this.get_node(r.parent)}},this))},this.get_undetermined=function(n){if(-1===this.settings.checkbox.cascade.indexOf("undetermined"))return[];var r,o,i,a,s={},l=this._model.data,u=this.settings.checkbox.tie_selection,c=this._data[u?"core":"checkbox"].selected,p=[],d=this,f=[];for(r=0,o=c.length;o>r;r++)if(l[c[r]]&&l[c[r]].parents)for(i=0,a=l[c[r]].parents.length;a>i&&s[l[c[r]].parents[i]]===t;i++)l[c[r]].parents[i]!==e.jstree.root&&(s[l[c[r]].parents[i]]=!0,p.push(l[c[r]].parents[i]));for(this.element.find(".jstree-closed").not(":has(.jstree-children)").each(function(){var n,u=d.get_node(this);if(u)if(u.state.loaded){for(r=0,o=u.children_d.length;o>r;r++)if(!(n=l[u.children_d[r]]).state.loaded&&n.original&&n.original.state&&n.original.state.undetermined&&!0===n.original.state.undetermined)for(s[n.id]===t&&n.id!==e.jstree.root&&(s[n.id]=!0,p.push(n.id)),i=0,a=n.parents.length;a>i;i++)s[n.parents[i]]===t&&n.parents[i]!==e.jstree.root&&(s[n.parents[i]]=!0,p.push(n.parents[i]))}else if(u.original&&u.original.state&&u.original.state.undetermined&&!0===u.original.state.undetermined)for(s[u.id]===t&&u.id!==e.jstree.root&&(s[u.id]=!0,p.push(u.id)),i=0,a=u.parents.length;a>i;i++)s[u.parents[i]]===t&&u.parents[i]!==e.jstree.root&&(s[u.parents[i]]=!0,p.push(u.parents[i]))}),r=0,o=p.length;o>r;r++)l[p[r]].state[u?"selected":"checked"]||f.push(n?l[p[r]]:p[r]);return f},this._undetermined=function(){if(null!==this.element){var e,t,n,r=this.get_undetermined(!1);for(this.element.find(".jstree-undetermined").removeClass("jstree-undetermined"),e=0,t=r.length;t>e;e++)(n=this.get_node(r[e],!0))&&n.length&&n.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined")}},this.redraw_node=function(t,n,o,i){if(t=r.redraw_node.apply(this,arguments)){var a,s,l=null,u=null;for(a=0,s=t.childNodes.length;s>a;a++)if(t.childNodes[a]&&t.childNodes[a].className&&-1!==t.childNodes[a].className.indexOf("jstree-anchor")){l=t.childNodes[a];break}l&&(!this.settings.checkbox.tie_selection&&this._model.data[t.id].state.checked&&(l.className+=" jstree-checked"),u=d.cloneNode(!1),this._model.data[t.id].state.checkbox_disabled&&(u.className+=" jstree-checkbox-disabled"),l.insertBefore(u,l.childNodes[0]))}return o||-1===this.settings.checkbox.cascade.indexOf("undetermined")||(this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(e.proxy(this._undetermined,this),50)),t},this.show_checkboxes=function(){this._data.core.themes.checkboxes=!0,this.get_container_ul().removeClass("jstree-no-checkboxes")},this.hide_checkboxes=function(){this._data.core.themes.checkboxes=!1,this.get_container_ul().addClass("jstree-no-checkboxes")},this.toggle_checkboxes=function(){this._data.core.themes.checkboxes?this.hide_checkboxes():this.show_checkboxes()},this.is_undetermined=function(t){t=this.get_node(t);var n,r,o=this.settings.checkbox.cascade,i=this.settings.checkbox.tie_selection,a=this._data[i?"core":"checkbox"].selected,s=this._model.data;if(!t||!0===t.state[i?"selected":"checked"]||-1===o.indexOf("undetermined")||-1===o.indexOf("down")&&-1===o.indexOf("up"))return!1;if(!t.state.loaded&&!0===t.original.state.undetermined)return!0;for(n=0,r=t.children_d.length;r>n;n++)if(-1!==e.inArray(t.children_d[n],a)||!s[t.children_d[n]].state.loaded&&s[t.children_d[n]].original.state.undetermined)return!0;return!1},this.disable_checkbox=function(t){var n,r,o;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;r>n;n++)this.disable_checkbox(t[n]);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(o=this.get_node(t,!0),void(t.state.checkbox_disabled||(t.state.checkbox_disabled=!0,o&&o.length&&o.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-checkbox-disabled"),this.trigger("disable_checkbox",{node:t}))))},this.enable_checkbox=function(t){var n,r,o;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;r>n;n++)this.enable_checkbox(t[n]);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(o=this.get_node(t,!0),void(t.state.checkbox_disabled&&(t.state.checkbox_disabled=!1,o&&o.length&&o.children(".jstree-anchor").children(".jstree-checkbox").removeClass("jstree-checkbox-disabled"),this.trigger("enable_checkbox",{node:t}))))},this.activate_node=function(t,n){return!e(n.target).hasClass("jstree-checkbox-disabled")&&(this.settings.checkbox.tie_selection&&(this.settings.checkbox.whole_node||e(n.target).hasClass("jstree-checkbox"))&&(n.ctrlKey=!0),this.settings.checkbox.tie_selection||!this.settings.checkbox.whole_node&&!e(n.target).hasClass("jstree-checkbox")?r.activate_node.call(this,t,n):!this.is_disabled(t)&&(this.is_checked(t)?this.uncheck_node(t,n):this.check_node(t,n),void this.trigger("activate_node",{node:this.get_node(t)})))},this._cascade_new_checked_state=function(e,t){var n,r,o,i=this.settings.checkbox.tie_selection,a=this._model.data[e],s=[],l=[];if(!this.settings.checkbox.cascade_to_disabled&&a.state.disabled||!this.settings.checkbox.cascade_to_hidden&&a.state.hidden)o=this.get_checked_descendants(e),a.state[i?"selected":"checked"]&&o.push(a.id),s=s.concat(o);else{if(a.children)for(n=0,r=a.children.length;r>n;n++){var u=a.children[n];o=this._cascade_new_checked_state(u,t),s=s.concat(o),o.indexOf(u)>-1&&l.push(u)}var c=this.get_node(a,!0),p=l.length>0&&l.length<a.children.length;a.original&&a.original.state&&a.original.state.undetermined&&(a.original.state.undetermined=p),p?(a.state[i?"selected":"checked"]=!1,c.attr("aria-selected",!1).children(".jstree-anchor").removeClass(i?"jstree-clicked":"jstree-checked")):t&&l.length===a.children.length?(a.state[i?"selected":"checked"]=t,s.push(a.id),c.attr("aria-selected",!0).children(".jstree-anchor").addClass(i?"jstree-clicked":"jstree-checked")):(a.state[i?"selected":"checked"]=!1,c.attr("aria-selected",!1).children(".jstree-anchor").removeClass(i?"jstree-clicked":"jstree-checked"))}return s},this.get_checked_descendants=function(e){var t=this,n=t.settings.checkbox.tie_selection,r=t._model.data[e];return r.children_d.filter(function(e){return t._model.data[e].state[n?"selected":"checked"]})},this.check_node=function(t,n){if(this.settings.checkbox.tie_selection)return this.select_node(t,!1,!0,n);var r,o,i;if(e.isArray(t)){for(t=t.slice(),o=0,i=t.length;i>o;o++)this.check_node(t[o],n);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(r=this.get_node(t,!0),void(t.state.checked||(t.state.checked=!0,this._data.checkbox.selected.push(t.id),r&&r.length&&r.children(".jstree-anchor").addClass("jstree-checked"),this.trigger("check_node",{node:t,selected:this._data.checkbox.selected,event:n}))))},this.uncheck_node=function(t,n){if(this.settings.checkbox.tie_selection)return this.deselect_node(t,!1,n);var r,o,i;if(e.isArray(t)){for(t=t.slice(),r=0,o=t.length;o>r;r++)this.uncheck_node(t[r],n);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(i=this.get_node(t,!0),void(t.state.checked&&(t.state.checked=!1,this._data.checkbox.selected=e.vakata.array_remove_item(this._data.checkbox.selected,t.id),i.length&&i.children(".jstree-anchor").removeClass("jstree-checked"),this.trigger("uncheck_node",{node:t,selected:this._data.checkbox.selected,event:n}))))},this.check_all=function(){if(this.settings.checkbox.tie_selection)return this.select_all();var t,n;this._data.checkbox.selected.concat([]);for(this._data.checkbox.selected=this._model.data[e.jstree.root].children_d.concat(),t=0,n=this._data.checkbox.selected.length;n>t;t++)this._model.data[this._data.checkbox.selected[t]]&&(this._model.data[this._data.checkbox.selected[t]].state.checked=!0);this.redraw(!0),this.trigger("check_all",{selected:this._data.checkbox.selected})},this.uncheck_all=function(){if(this.settings.checkbox.tie_selection)return this.deselect_all();var e,t,n=this._data.checkbox.selected.concat([]);for(e=0,t=this._data.checkbox.selected.length;t>e;e++)this._model.data[this._data.checkbox.selected[e]]&&(this._model.data[this._data.checkbox.selected[e]].state.checked=!1);this._data.checkbox.selected=[],this.element.find(".jstree-checked").removeClass("jstree-checked"),this.trigger("uncheck_all",{selected:this._data.checkbox.selected,node:n})},this.is_checked=function(t){return this.settings.checkbox.tie_selection?this.is_selected(t):!(!(t=this.get_node(t))||t.id===e.jstree.root)&&t.state.checked},this.get_checked=function(t){return this.settings.checkbox.tie_selection?this.get_selected(t):t?e.map(this._data.checkbox.selected,e.proxy(function(e){return this.get_node(e)},this)):this._data.checkbox.selected},this.get_top_checked=function(t){if(this.settings.checkbox.tie_selection)return this.get_top_selected(t);var n,r,o,i,a=this.get_checked(!0),s={};for(n=0,r=a.length;r>n;n++)s[a[n].id]=a[n];for(n=0,r=a.length;r>n;n++)for(o=0,i=a[n].children_d.length;i>o;o++)s[a[n].children_d[o]]&&delete s[a[n].children_d[o]];for(n in a=[],s)s.hasOwnProperty(n)&&a.push(n);return t?e.map(a,e.proxy(function(e){return this.get_node(e)},this)):a},this.get_bottom_checked=function(t){if(this.settings.checkbox.tie_selection)return this.get_bottom_selected(t);var n,r,o=this.get_checked(!0),i=[];for(n=0,r=o.length;r>n;n++)o[n].children.length||i.push(o[n].id);return t?e.map(i,e.proxy(function(e){return this.get_node(e)},this)):i},this.load_node=function(t,n){var o,i,a;if(!e.isArray(t)&&!this.settings.checkbox.tie_selection&&((a=this.get_node(t))&&a.state.loaded))for(o=0,i=a.children_d.length;i>o;o++)this._model.data[a.children_d[o]].state.checked&&(!0,this._data.checkbox.selected=e.vakata.array_remove_item(this._data.checkbox.selected,a.children_d[o]));return r.load_node.apply(this,arguments)},this.get_state=function(){var e=r.get_state.apply(this,arguments);return this.settings.checkbox.tie_selection?e:(e.checkbox=this._data.checkbox.selected.slice(),e)},this.set_state=function(t,n){var o=r.set_state.apply(this,arguments);if(o&&t.checkbox){if(!this.settings.checkbox.tie_selection){this.uncheck_all();var i=this;e.each(t.checkbox,function(e,t){i.check_node(t)})}return delete t.checkbox,this.set_state(t,n),!1}return o},this.refresh=function(e,t){return this.settings.checkbox.tie_selection&&(this._data.checkbox.selected=[]),r.refresh.apply(this,arguments)}},e.jstree.defaults.conditionalselect=function(){return!0},e.jstree.plugins.conditionalselect=function(e,t){this.activate_node=function(e,n){return this.settings.conditionalselect.call(this,this.get_node(e),n)?t.activate_node.call(this,e,n):void 0}},e.jstree.defaults.contextmenu={select_node:!0,show_at_node:!0,items:function(t,n){return{create:{separator_before:!1,separator_after:!0,_disabled:!1,label:"Create",action:function(t){var n=e.jstree.reference(t.reference),r=n.get_node(t.reference);n.create_node(r,{},"last",function(e){try{n.edit(e)}catch(t){setTimeout(function(){n.edit(e)},0)}})}},rename:{separator_before:!1,separator_after:!1,_disabled:!1,label:"Rename",action:function(t){var n=e.jstree.reference(t.reference),r=n.get_node(t.reference);n.edit(r)}},remove:{separator_before:!1,icon:!1,separator_after:!1,_disabled:!1,label:"Delete",action:function(t){var n=e.jstree.reference(t.reference),r=n.get_node(t.reference);n.is_selected(r)?n.delete_node(n.get_selected()):n.delete_node(r)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(t){var n=e.jstree.reference(t.reference),r=n.get_node(t.reference);n.is_selected(r)?n.cut(n.get_top_selected()):n.cut(r)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(t){var n=e.jstree.reference(t.reference),r=n.get_node(t.reference);n.is_selected(r)?n.copy(n.get_top_selected()):n.copy(r)}},paste:{separator_before:!1,icon:!1,_disabled:function(t){return!e.jstree.reference(t.reference).can_paste()},separator_after:!1,label:"Paste",action:function(t){var n=e.jstree.reference(t.reference),r=n.get_node(t.reference);n.paste(r)}}}}}}},e.jstree.plugins.contextmenu=function(n,r){this.bind=function(){r.bind.call(this);var t,n,o=0,i=null;this.element.on("init.jstree loading.jstree ready.jstree",e.proxy(function(){this.get_container_ul().addClass("jstree-contextmenu")},this)).on("contextmenu.jstree",".jstree-anchor",e.proxy(function(e,t){"input"!==e.target.tagName.toLowerCase()&&(e.preventDefault(),o=e.ctrlKey?+new Date:0,(t||i)&&(o=+new Date+1e4),i&&clearTimeout(i),this.is_loading(e.currentTarget)||this.show_contextmenu(e.currentTarget,e.pageX,e.pageY,e))},this)).on("click.jstree",".jstree-anchor",e.proxy(function(t){this._data.contextmenu.visible&&(!o||+new Date-o>250)&&e.vakata.context.hide(),o=0},this)).on("touchstart.jstree",".jstree-anchor",function(r){r.originalEvent&&r.originalEvent.changedTouches&&r.originalEvent.changedTouches[0]&&(t=r.originalEvent.changedTouches[0].clientX,n=r.originalEvent.changedTouches[0].clientY,i=setTimeout(function(){e(r.currentTarget).trigger("contextmenu",!0)},750))}).on("touchmove.vakata.jstree",function(r){i&&r.originalEvent&&r.originalEvent.changedTouches&&r.originalEvent.changedTouches[0]&&(Math.abs(t-r.originalEvent.changedTouches[0].clientX)>10||Math.abs(n-r.originalEvent.changedTouches[0].clientY)>10)&&(clearTimeout(i),e.vakata.context.hide())}).on("touchend.vakata.jstree",function(e){i&&clearTimeout(i)}),e(u).on("context_hide.vakata.jstree",e.proxy(function(t,n){this._data.contextmenu.visible=!1,e(n.reference).removeClass("jstree-context")},this))},this.teardown=function(){this._data.contextmenu.visible&&e.vakata.context.hide(),r.teardown.call(this)},this.show_contextmenu=function(n,r,o,i){if(!(n=this.get_node(n))||n.id===e.jstree.root)return!1;var a=this.settings.contextmenu,s=this.get_node(n,!0),l=s.children(".jstree-anchor"),u=!1,c=!1;(a.show_at_node||r===t||o===t)&&(u=l.offset(),r=u.left,o=u.top+this._data.core.li_height),this.settings.contextmenu.select_node&&!this.is_selected(n)&&this.activate_node(n,i),c=a.items,e.isFunction(c)&&(c=c.call(this,n,e.proxy(function(e){this._show_contextmenu(n,r,o,e)},this))),e.isPlainObject(c)&&this._show_contextmenu(n,r,o,c)},this._show_contextmenu=function(t,n,r,o){var i=this.get_node(t,!0),a=i.children(".jstree-anchor");e(u).one("context_show.vakata.jstree",e.proxy(function(t,n){var r="jstree-contextmenu jstree-"+this.get_theme()+"-contextmenu";e(n.element).addClass(r),a.addClass("jstree-context")},this)),this._data.contextmenu.visible=!0,e.vakata.context.show(a,{x:n,y:r},o),this.trigger("show_contextmenu",{node:t,x:n,y:r})}},function(e){var t=!1,n={element:!1,reference:!1,position_x:0,position_y:0,items:[],html:"",is_visible:!1};e.vakata.context={settings:{hide_onmouseleave:0,icons:!0},_trigger:function(t){e(u).triggerHandler("context_"+t+".vakata",{reference:n.reference,element:n.element,position:{x:n.position_x,y:n.position_y}})},_execute:function(t){return!(!(t=n.items[t])||t._disabled&&(!e.isFunction(t._disabled)||t._disabled({item:t,reference:n.reference,element:n.element}))||!t.action)&&t.action.call(null,{item:t,reference:n.reference,element:n.element,position:{x:n.position_x,y:n.position_y}})},_parse:function(t,r){if(!t)return!1;r||(n.html="",n.items=[]);var o,i="",a=!1;return r&&(i+="<ul>"),e.each(t,function(t,r){return!r||(n.items.push(r),!a&&r.separator_before&&(i+="<li class='vakata-context-separator'><a href='#' "+(e.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>"),a=!1,i+="<li class='"+(r._class||"")+(!0===r._disabled||e.isFunction(r._disabled)&&r._disabled({item:r,reference:n.reference,element:n.element})?" vakata-contextmenu-disabled ":"")+"' "+(r.shortcut?" data-shortcut='"+r.shortcut+"' ":"")+">",i+="<a href='#' rel='"+(n.items.length-1)+"' "+(r.title?"title='"+r.title+"'":"")+">",e.vakata.context.settings.icons&&(i+="<i ",r.icon&&(i+=-1!==r.icon.indexOf("/")||-1!==r.icon.indexOf(".")?" style='background:url(\""+r.icon+"\") center center no-repeat' ":" class='"+r.icon+"' "),i+="></i><span class='vakata-contextmenu-sep'>&#160;</span>"),i+=(e.isFunction(r.label)?r.label({item:t,reference:n.reference,element:n.element}):r.label)+(r.shortcut?' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-'+r.shortcut+'">'+(r.shortcut_label||"")+"</span>":"")+"</a>",r.submenu&&((o=e.vakata.context._parse(r.submenu,!0))&&(i+=o)),i+="</li>",void(r.separator_after&&(i+="<li class='vakata-context-separator'><a href='#' "+(e.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>",a=!0)))}),i=i.replace(/<li class\='vakata-context-separator'\><\/li\>$/,""),r&&(i+="</ul>"),r||(n.html=i,e.vakata.context._trigger("parse")),i.length>10&&i},_show_submenu:function(n){if((n=e(n)).length&&n.children("ul").length){var r=n.children("ul"),o=n.offset().left,i=o+n.outerWidth(),a=n.offset().top,s=r.width(),l=r.height(),u=e(window).width()+e(window).scrollLeft(),c=e(window).height()+e(window).scrollTop();t?n[i-(s+10+n.outerWidth())<0?"addClass":"removeClass"]("vakata-context-left"):n[i+s>u&&o>u-i?"addClass":"removeClass"]("vakata-context-right"),a+l+10>c&&r.css("bottom","-1px"),n.hasClass("vakata-context-right")?s>o&&r.css("margin-right",o-s):s>u-i&&r.css("margin-left",u-i-s),r.show()}},show:function(r,o,i){var a,s,l,c,p,d,f,h;switch(n.element&&n.element.length&&n.element.width(""),!0){case!o&&!r:return!1;case!!o&&!!r:n.reference=r,n.position_x=o.x,n.position_y=o.y;break;case!o&&!!r:n.reference=r,a=r.offset(),n.position_x=a.left+r.outerHeight(),n.position_y=a.top;break;case!!o&&!r:n.position_x=o.x,n.position_y=o.y}r&&!i&&e(r).data("vakata_contextmenu")&&(i=e(r).data("vakata_contextmenu")),e.vakata.context._parse(i)&&n.element.html(n.html),n.items.length&&(n.element.appendTo(u.body),s=n.element,l=n.position_x,c=n.position_y,p=s.width(),d=s.height(),f=e(window).width()+e(window).scrollLeft(),h=e(window).height()+e(window).scrollTop(),t&&((l-=s.outerWidth()-e(r).outerWidth())<e(window).scrollLeft()+20&&(l=e(window).scrollLeft()+20)),l+p+20>f&&(l=f-(p+20)),c+d+20>h&&(c=h-(d+20)),n.element.css({left:l,top:c}).show().find("a").first().focus().parent().addClass("vakata-context-hover"),n.is_visible=!0,e.vakata.context._trigger("show"))},hide:function(){n.is_visible&&(n.element.hide().find("ul").hide().end().find(":focus").blur().end().detach(),n.is_visible=!1,e.vakata.context._trigger("hide"))}},e(function(){t="rtl"===e(u.body).css("direction");var r=!1;n.element=e("<ul class='vakata-context'></ul>"),n.element.on("mouseenter","li",function(t){t.stopImmediatePropagation(),e.contains(this,t.relatedTarget)||(r&&clearTimeout(r),n.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end(),e(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context","li").addBack().addClass("vakata-context-hover"),e.vakata.context._show_submenu(this))}).on("mouseleave","li",function(t){e.contains(this,t.relatedTarget)||e(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover")}).on("mouseleave",function(t){e(this).find(".vakata-context-hover").removeClass("vakata-context-hover"),e.vakata.context.settings.hide_onmouseleave&&(r=setTimeout(function(){e.vakata.context.hide()},e.vakata.context.settings.hide_onmouseleave))}).on("click","a",function(t){t.preventDefault(),e(this).blur().parent().hasClass("vakata-context-disabled")||!1===e.vakata.context._execute(e(this).attr("rel"))||e.vakata.context.hide()}).on("keydown","a",function(t){var r=null;switch(t.which){case 13:case 32:t.type="click",t.preventDefault(),e(t.currentTarget).trigger(t);break;case 37:n.is_visible&&(n.element.find(".vakata-context-hover").last().closest("li").first().find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 38:n.is_visible&&((r=n.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first()).length||(r=n.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last()),r.addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 39:n.is_visible&&(n.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 40:n.is_visible&&((r=n.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first()).length||(r=n.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first()),r.addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 27:e.vakata.context.hide(),t.preventDefault()}}).on("keydown",function(e){e.preventDefault();var t=n.element.find(".vakata-contextmenu-shortcut-"+e.which).parent();t.parent().not(".vakata-context-disabled")&&t.click()}),e(u).on("mousedown.vakata.jstree",function(t){n.is_visible&&n.element[0]!==t.target&&!e.contains(n.element[0],t.target)&&e.vakata.context.hide()}).on("context_show.vakata.jstree",function(e,r){n.element.find("li:has(ul)").children("a").addClass("vakata-context-parent"),t&&n.element.addClass("vakata-context-rtl").css("direction","rtl"),n.element.find("ul").hide().end()})})}(e),e.jstree.defaults.dnd={copy:!0,open_timeout:500,is_draggable:!0,check_while_dragging:!0,always_copy:!1,inside_pos:0,drag_selection:!0,touch:!0,large_drop_target:!1,large_drag_target:!1,use_html5:!1},e.jstree.plugins.dnd=function(t,n){this.init=function(e,t){n.init.call(this,e,t),this.settings.dnd.use_html5=this.settings.dnd.use_html5&&"draggable"in u.createElement("span")},this.bind=function(){n.bind.call(this),this.element.on(this.settings.dnd.use_html5?"dragstart.jstree":"mousedown.jstree touchstart.jstree",this.settings.dnd.large_drag_target?".jstree-node":".jstree-anchor",e.proxy(function(t){if(this.settings.dnd.large_drag_target&&e(t.target).closest(".jstree-node")[0]!==t.currentTarget)return!0;if("touchstart"===t.type&&(!this.settings.dnd.touch||"selected"===this.settings.dnd.touch&&!e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").hasClass("jstree-clicked")))return!0;var n=this.get_node(t.target),r=this.is_selected(n)&&this.settings.dnd.drag_selection?this.get_top_selected().length:1,o=r>1?r+" "+this.get_string("nodes"):this.get_text(t.currentTarget);if(this.settings.core.force_text&&(o=e.vakata.html.escape(o)),n&&n.id&&n.id!==e.jstree.root&&(1===t.which||"touchstart"===t.type||"dragstart"===t.type)&&(!0===this.settings.dnd.is_draggable||e.isFunction(this.settings.dnd.is_draggable)&&this.settings.dnd.is_draggable.call(this,r>1?this.get_top_selected(!0):[n],t))){if(c={jstree:!0,origin:this,obj:this.get_node(n,!0),nodes:r>1?this.get_top_selected():[n.id]},p=t.currentTarget,!this.settings.dnd.use_html5)return this.element.trigger("mousedown.jstree"),e.vakata.dnd.start(t,c,'<div id="jstree-dnd" class="jstree-'+this.get_theme()+" jstree-"+this.get_theme()+"-"+this.get_theme_variant()+" "+(this.settings.core.themes.responsive?" jstree-dnd-responsive":"")+'"><i class="jstree-icon jstree-er"></i>'+o+'<ins class="jstree-copy" style="display:none;">+</ins></div>');e.vakata.dnd._trigger("start",t,{helper:e(),element:p,data:c})}},this)),this.settings.dnd.use_html5&&this.element.on("dragover.jstree",function(t){return t.preventDefault(),e.vakata.dnd._trigger("move",t,{helper:e(),element:p,data:c}),!1}).on("drop.jstree",e.proxy(function(t){return t.preventDefault(),e.vakata.dnd._trigger("stop",t,{helper:e(),element:p,data:c}),!1},this))},this.redraw_node=function(e,t,r,o){if((e=n.redraw_node.apply(this,arguments))&&this.settings.dnd.use_html5)if(this.settings.dnd.large_drag_target)e.setAttribute("draggable",!0);else{var i,a,s=null;for(i=0,a=e.childNodes.length;a>i;i++)if(e.childNodes[i]&&e.childNodes[i].className&&-1!==e.childNodes[i].className.indexOf("jstree-anchor")){s=e.childNodes[i];break}s&&s.setAttribute("draggable",!0)}return e}},e(function(){var n=!1,r=!1,o=!1,i=!1,a=e('<div id="jstree-marker">&#160;</div>').hide();e(u).on("dragover.vakata.jstree",function(t){p&&e.vakata.dnd._trigger("move",t,{helper:e(),element:p,data:c})}).on("drop.vakata.jstree",function(t){p&&(e.vakata.dnd._trigger("stop",t,{helper:e(),element:p,data:c}),p=null,c=null)}).on("dnd_start.vakata.jstree",function(e,t){n=!1,o=!1,t&&t.data&&t.data.jstree&&a.appendTo(u.body)}).on("dnd_move.vakata.jstree",function(s,l){var u=l.event.target!==o.target;if(i&&(!l.event||"dragover"!==l.event.type||u)&&clearTimeout(i),l&&l.data&&l.data.jstree&&(!l.event.target.id||"jstree-marker"!==l.event.target.id)){o=l.event;var c,p,d,f,h,m,y,g,b,v,_,S,E,w,O,C,k=e.jstree.reference(l.event.target),T=!1,P=!1,x=!1;if(k&&k._data&&k._data.dnd)if(a.attr("class","jstree-"+k.get_theme()+(k.settings.core.themes.responsive?" jstree-dnd-responsive":"")),O=l.data.origin&&(l.data.origin.settings.dnd.always_copy||l.data.origin.settings.dnd.copy&&(l.event.metaKey||l.event.ctrlKey)),l.helper.children().attr("class","jstree-"+k.get_theme()+" jstree-"+k.get_theme()+"-"+k.get_theme_variant()+" "+(k.settings.core.themes.responsive?" jstree-dnd-responsive":"")).find(".jstree-copy").first()[O?"show":"hide"](),l.event.target!==k.element[0]&&l.event.target!==k.get_container_ul()[0]||0!==k.get_container_ul().children().length){if((T=k.settings.dnd.large_drop_target?e(l.event.target).closest(".jstree-node").children(".jstree-anchor"):e(l.event.target).closest(".jstree-anchor"))&&T.length&&T.parent().is(".jstree-closed, .jstree-open, .jstree-leaf")&&(P=T.offset(),x=(l.event.pageY!==t?l.event.pageY:l.event.originalEvent.pageY)-P.top,d=T.outerHeight(),m=d/3>x?["b","i","a"]:x>d-d/3?["a","i","b"]:x>d/2?["i","a","b"]:["i","b","a"],e.each(m,function(t,o){switch(o){case"b":c=P.left-6,p=P.top,f=k.get_parent(T),h=T.parent().index();break;case"i":E=k.settings.dnd.inside_pos,w=k.get_node(T.parent()),c=P.left-2,p=P.top+d/2+1,f=w.id,h="first"===E?0:"last"===E?w.children.length:Math.min(E,w.children.length);break;case"a":c=P.left-6,p=P.top+d,f=k.get_parent(T),h=T.parent().index()+1}for(y=!0,g=0,b=l.data.nodes.length;b>g;g++)if(v=l.data.origin&&(l.data.origin.settings.dnd.always_copy||l.data.origin.settings.dnd.copy&&(l.event.metaKey||l.event.ctrlKey))?"copy_node":"move_node",_=h,"move_node"===v&&"a"===o&&l.data.origin&&l.data.origin===k&&f===k.get_parent(l.data.nodes[g])&&(S=k.get_node(f),_>e.inArray(l.data.nodes[g],S.children)&&(_-=1)),!(y=y&&(k&&k.settings&&k.settings.dnd&&!1===k.settings.dnd.check_while_dragging||k.check(v,l.data.origin&&l.data.origin!==k?l.data.origin.get_node(l.data.nodes[g]):l.data.nodes[g],f,_,{dnd:!0,ref:k.get_node(T.parent()),pos:o,origin:l.data.origin,is_multi:l.data.origin&&l.data.origin!==k,is_foreign:!l.data.origin})))){k&&k.last_error&&(r=k.last_error());break}return"i"===o&&T.parent().is(".jstree-closed")&&k.settings.dnd.open_timeout&&(!l.event||"dragover"!==l.event.type||u)&&(i&&clearTimeout(i),i=setTimeout(function(e,t){return function(){e.open_node(t)}}(k,T),k.settings.dnd.open_timeout)),y?((C=k.get_node(f,!0)).hasClass(".jstree-dnd-parent")||(e(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),C.addClass("jstree-dnd-parent")),n={ins:k,par:f,pos:"i"!==o||"last"!==E||0!==h||k.is_loaded(w)?h:"last"},a.css({left:c+"px",top:p+"px"}).show(),l.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),l.event.originalEvent&&l.event.originalEvent.dataTransfer&&(l.event.originalEvent.dataTransfer.dropEffect=O?"copy":"move"),r={},m=!0,!1):void 0}),!0===m))return}else{for(y=!0,g=0,b=l.data.nodes.length;b>g&&(y=y&&k.check(l.data.origin&&(l.data.origin.settings.dnd.always_copy||l.data.origin.settings.dnd.copy&&(l.event.metaKey||l.event.ctrlKey))?"copy_node":"move_node",l.data.origin&&l.data.origin!==k?l.data.origin.get_node(l.data.nodes[g]):l.data.nodes[g],e.jstree.root,"last",{dnd:!0,ref:k.get_node(e.jstree.root),pos:"i",origin:l.data.origin,is_multi:l.data.origin&&l.data.origin!==k,is_foreign:!l.data.origin}));g++);if(y)return n={ins:k,par:e.jstree.root,pos:"last"},a.hide(),l.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),void(l.event.originalEvent&&l.event.originalEvent.dataTransfer&&(l.event.originalEvent.dataTransfer.dropEffect=O?"copy":"move"))}e(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),n=!1,l.helper.find(".jstree-icon").removeClass("jstree-ok").addClass("jstree-er"),l.event.originalEvent&&l.event.originalEvent.dataTransfer,a.hide()}}).on("dnd_scroll.vakata.jstree",function(e,t){t&&t.data&&t.data.jstree&&(a.hide(),n=!1,o=!1,t.helper.find(".jstree-icon").first().removeClass("jstree-ok").addClass("jstree-er"))}).on("dnd_stop.vakata.jstree",function(t,s){if(e(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),i&&clearTimeout(i),s&&s.data&&s.data.jstree){a.hide().detach();var l,u,c=[];if(n){for(l=0,u=s.data.nodes.length;u>l;l++)c[l]=s.data.origin?s.data.origin.get_node(s.data.nodes[l]):s.data.nodes[l];n.ins[s.data.origin&&(s.data.origin.settings.dnd.always_copy||s.data.origin.settings.dnd.copy&&(s.event.metaKey||s.event.ctrlKey))?"copy_node":"move_node"](c,n.par,n.pos,!1,!1,!1,s.data.origin)}else(l=e(s.event.target).closest(".jstree")).length&&r&&r.error&&"check"===r.error&&((l=l.jstree(!0))&&l.settings.core.error.call(this,r));o=!1,n=!1}}).on("keyup.jstree keydown.jstree",function(t,s){(s=e.vakata.dnd._get())&&s.data&&s.data.jstree&&("keyup"===t.type&&27===t.which?(i&&clearTimeout(i),n=!1,r=!1,o=!1,i=!1,a.hide().detach(),e.vakata.dnd._clean()):(s.helper.find(".jstree-copy").first()[s.data.origin&&(s.data.origin.settings.dnd.always_copy||s.data.origin.settings.dnd.copy&&(t.metaKey||t.ctrlKey))?"show":"hide"](),o&&(o.metaKey=t.metaKey,o.ctrlKey=t.ctrlKey,e.vakata.dnd._trigger("move",o))))})}),function(e){e.vakata.html={div:e("<div />"),escape:function(t){return e.vakata.html.div.text(t).html()},strip:function(t){return e.vakata.html.div.empty().append(e.parseHTML(t)).text()}};var n={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1};e.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,helper_left:5,helper_top:10,threshold:5,threshold_touch:10},_trigger:function(n,r,o){o===t&&(o=e.vakata.dnd._get()),o.event=r,e(u).triggerHandler("dnd_"+n+".vakata",o)},_get:function(){return{data:n.data,element:n.element,helper:n.helper}},_clean:function(){n.helper&&n.helper.remove(),n.scroll_i&&(clearInterval(n.scroll_i),n.scroll_i=!1),n={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1},e(u).off("mousemove.vakata.jstree touchmove.vakata.jstree",e.vakata.dnd.drag),e(u).off("mouseup.vakata.jstree touchend.vakata.jstree",e.vakata.dnd.stop)},_scroll:function(t){if(!n.scroll_e||!n.scroll_l&&!n.scroll_t)return n.scroll_i&&(clearInterval(n.scroll_i),n.scroll_i=!1),!1;if(!n.scroll_i)return n.scroll_i=setInterval(e.vakata.dnd._scroll,100),!1;if(!0===t)return!1;var r=n.scroll_e.scrollTop(),o=n.scroll_e.scrollLeft();n.scroll_e.scrollTop(r+n.scroll_t*e.vakata.dnd.settings.scroll_speed),n.scroll_e.scrollLeft(o+n.scroll_l*e.vakata.dnd.settings.scroll_speed),(r!==n.scroll_e.scrollTop()||o!==n.scroll_e.scrollLeft())&&e.vakata.dnd._trigger("scroll",n.scroll_e)},start:function(t,r,o){"touchstart"===t.type&&t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0]&&(t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,t.target=u.elementFromPoint(t.originalEvent.changedTouches[0].pageX-window.pageXOffset,t.originalEvent.changedTouches[0].pageY-window.pageYOffset)),n.is_drag&&e.vakata.dnd.stop({});try{t.currentTarget.unselectable="on",t.currentTarget.onselectstart=function(){return!1},t.currentTarget.style&&(t.currentTarget.style.touchAction="none",t.currentTarget.style.msTouchAction="none",t.currentTarget.style.MozUserSelect="none")}catch(e){}return n.init_x=t.pageX,n.init_y=t.pageY,n.data=r,n.is_down=!0,n.element=t.currentTarget,n.target=t.target,n.is_touch="touchstart"===t.type,!1!==o&&(n.helper=e("<div id='vakata-dnd'></div>").html(o).css({display:"block",margin:"0",padding:"0",position:"absolute",top:"-2000px",lineHeight:"16px",zIndex:"10000"})),e(u).on("mousemove.vakata.jstree touchmove.vakata.jstree",e.vakata.dnd.drag),e(u).on("mouseup.vakata.jstree touchend.vakata.jstree",e.vakata.dnd.stop),!1},drag:function(t){if("touchmove"===t.type&&t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0]&&(t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,t.target=u.elementFromPoint(t.originalEvent.changedTouches[0].pageX-window.pageXOffset,t.originalEvent.changedTouches[0].pageY-window.pageYOffset)),n.is_down){if(!n.is_drag){if(!(Math.abs(t.pageX-n.init_x)>(n.is_touch?e.vakata.dnd.settings.threshold_touch:e.vakata.dnd.settings.threshold)||Math.abs(t.pageY-n.init_y)>(n.is_touch?e.vakata.dnd.settings.threshold_touch:e.vakata.dnd.settings.threshold)))return;n.helper&&(n.helper.appendTo(u.body),n.helper_w=n.helper.outerWidth()),n.is_drag=!0,e(n.target).one("click.vakata",!1),e.vakata.dnd._trigger("start",t)}var r=!1,o=!1,i=!1,a=!1,s=!1,l=!1,c=!1,p=!1,d=!1,f=!1;return n.scroll_t=0,n.scroll_l=0,n.scroll_e=!1,e(e(t.target).parentsUntil("body").addBack().get().reverse()).filter(function(){return/^auto|scroll$/.test(e(this).css("overflow"))&&(this.scrollHeight>this.offsetHeight||this.scrollWidth>this.offsetWidth)}).each(function(){var r=e(this),o=r.offset();return this.scrollHeight>this.offsetHeight&&(o.top+r.height()-t.pageY<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_t=1),t.pageY-o.top<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_t=-1)),this.scrollWidth>this.offsetWidth&&(o.left+r.width()-t.pageX<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_l=1),t.pageX-o.left<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_l=-1)),n.scroll_t||n.scroll_l?(n.scroll_e=e(this),!1):void 0}),n.scroll_e||(r=e(u),o=e(window),i=r.height(),a=o.height(),s=r.width(),l=o.width(),c=r.scrollTop(),p=r.scrollLeft(),i>a&&t.pageY-c<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_t=-1),i>a&&a-(t.pageY-c)<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_t=1),s>l&&t.pageX-p<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_l=-1),s>l&&l-(t.pageX-p)<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_l=1),(n.scroll_t||n.scroll_l)&&(n.scroll_e=r)),n.scroll_e&&e.vakata.dnd._scroll(!0),n.helper&&(d=parseInt(t.pageY+e.vakata.dnd.settings.helper_top,10),f=parseInt(t.pageX+e.vakata.dnd.settings.helper_left,10),i&&d+25>i&&(d=i-50),s&&f+n.helper_w>s&&(f=s-(n.helper_w+2)),n.helper.css({left:f+"px",top:d+"px"})),e.vakata.dnd._trigger("move",t),!1}},stop:function(t){if("touchend"===t.type&&t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0]&&(t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,t.target=u.elementFromPoint(t.originalEvent.changedTouches[0].pageX-window.pageXOffset,t.originalEvent.changedTouches[0].pageY-window.pageYOffset)),n.is_drag)t.target!==n.target&&e(n.target).off("click.vakata"),e.vakata.dnd._trigger("stop",t);else if("touchend"===t.type&&t.target===n.target){var r=setTimeout(function(){e(t.target).click()},100);e(t.target).one("click",function(){r&&clearTimeout(r)})}return e.vakata.dnd._clean(),!1}}}(e),e.jstree.defaults.massload=null,e.jstree.plugins.massload=function(t,n){this.init=function(e,t){this._data.massload={},n.init.call(this,e,t)},this._load_nodes=function(t,r,o,i){var a,s,l,u=this.settings.massload,c=(JSON.stringify(t),[]),p=this._model.data;if(!o){for(a=0,s=t.length;s>a;a++)(!p[t[a]]||!p[t[a]].state.loaded&&!p[t[a]].state.failed||i)&&(c.push(t[a]),(l=this.get_node(t[a],!0))&&l.length&&l.addClass("jstree-loading").attr("aria-busy",!0));if(this._data.massload={},c.length){if(e.isFunction(u))return u.call(this,c,e.proxy(function(e){var a,s;if(e)for(a in e)e.hasOwnProperty(a)&&(this._data.massload[a]=e[a]);for(a=0,s=t.length;s>a;a++)(l=this.get_node(t[a],!0))&&l.length&&l.removeClass("jstree-loading").attr("aria-busy",!1);n._load_nodes.call(this,t,r,o,i)},this));if("object"==typeof u&&u&&u.url)return u=e.extend(!0,{},u),e.isFunction(u.url)&&(u.url=u.url.call(this,c)),e.isFunction(u.data)&&(u.data=u.data.call(this,c)),e.ajax(u).done(e.proxy(function(e,a,s){var u,c;if(e)for(u in e)e.hasOwnProperty(u)&&(this._data.massload[u]=e[u]);for(u=0,c=t.length;c>u;u++)(l=this.get_node(t[u],!0))&&l.length&&l.removeClass("jstree-loading").attr("aria-busy",!1);n._load_nodes.call(this,t,r,o,i)},this)).fail(e.proxy(function(e){n._load_nodes.call(this,t,r,o,i)},this))}}return n._load_nodes.call(this,t,r,o,i)},this._load_node=function(t,r){var o,i=this._data.massload[t.id],a=null;return i?(a=this["string"==typeof i?"_append_html_data":"_append_json_data"](t,"string"==typeof i?e(e.parseHTML(i)).filter(function(){return 3!==this.nodeType}):i,function(e){r.call(this,e)}),(o=this.get_node(t.id,!0))&&o.length&&o.removeClass("jstree-loading").attr("aria-busy",!1),delete this._data.massload[t.id],a):n._load_node.call(this,t,r)}},e.jstree.defaults.search={ajax:!1,fuzzy:!1,case_sensitive:!1,show_only_matches:!1,show_only_matches_children:!1,close_opened_onclear:!0,search_leaves_only:!1,search_callback:!1},e.jstree.plugins.search=function(n,r){this.bind=function(){r.bind.call(this),this._data.search.str="",this._data.search.dom=e(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=!1,this._data.search.smc=!1,this._data.search.hdn=[],this.element.on("search.jstree",e.proxy(function(t,n){if(this._data.search.som&&n.res.length){var r,o,i,a,s=this._model.data,l=[];for(r=0,o=n.res.length;o>r;r++)if(s[n.res[r]]&&!s[n.res[r]].state.hidden&&(l.push(n.res[r]),l=l.concat(s[n.res[r]].parents),this._data.search.smc))for(i=0,a=s[n.res[r]].children_d.length;a>i;i++)s[s[n.res[r]].children_d[i]]&&!s[s[n.res[r]].children_d[i]].state.hidden&&l.push(s[n.res[r]].children_d[i]);l=e.vakata.array_remove_item(e.vakata.array_unique(l),e.jstree.root),this._data.search.hdn=this.hide_all(!0),this.show_node(l,!0),this.redraw(!0)}},this)).on("clear_search.jstree",e.proxy(function(e,t){this._data.search.som&&t.res.length&&(this.show_node(this._data.search.hdn,!0),this.redraw(!0))},this))},this.search=function(n,r,o,i,a,s){if(!1===n||""===e.trim(n.toString()))return this.clear_search();i=(i=this.get_node(i))&&i.id?i.id:null,n=n.toString();var l,u,c=this.settings.search,p=!!c.ajax&&c.ajax,d=this._model.data,f=null,h=[],m=[];if(this._data.search.res.length&&!a&&this.clear_search(),o===t&&(o=c.show_only_matches),s===t&&(s=c.show_only_matches_children),!r&&!1!==p)return e.isFunction(p)?p.call(this,n,e.proxy(function(t){t&&t.d&&(t=t.d),this._load_nodes(e.isArray(t)?e.vakata.array_unique(t):[],function(){this.search(n,!0,o,i,a,s)})},this),i):((p=e.extend({},p)).data||(p.data={}),p.data.str=n,i&&(p.data.inside=i),this._data.search.lastRequest&&this._data.search.lastRequest.abort(),this._data.search.lastRequest=e.ajax(p).fail(e.proxy(function(){this._data.core.last_error={error:"ajax",plugin:"search",id:"search_01",reason:"Could not load search parents",data:JSON.stringify(p)},this.settings.core.error.call(this,this._data.core.last_error)},this)).done(e.proxy(function(t){t&&t.d&&(t=t.d),this._load_nodes(e.isArray(t)?e.vakata.array_unique(t):[],function(){this.search(n,!0,o,i,a,s)})},this)),this._data.search.lastRequest);if(a||(this._data.search.str=n,this._data.search.dom=e(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=o,this._data.search.smc=s),f=new e.vakata.search(n,!0,{caseSensitive:c.case_sensitive,fuzzy:c.fuzzy}),e.each(d[i||e.jstree.root].children_d,function(e,t){var r=d[t];r.text&&!r.state.hidden&&(!c.search_leaves_only||r.state.loaded&&0===r.children.length)&&(c.search_callback&&c.search_callback.call(this,n,r)||!c.search_callback&&f.search(r.text).isMatch)&&(h.push(t),m=m.concat(r.parents))}),h.length){for(m=e.vakata.array_unique(m),l=0,u=m.length;u>l;l++)m[l]!==e.jstree.root&&d[m[l]]&&!0===this.open_node(m[l],null,0)&&this._data.search.opn.push(m[l]);a?(this._data.search.dom=this._data.search.dom.add(e(this.element[0].querySelectorAll("#"+e.map(h,function(t){return-1!=="0123456789".indexOf(t[0])?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")}).join(", #")))),this._data.search.res=e.vakata.array_unique(this._data.search.res.concat(h))):(this._data.search.dom=e(this.element[0].querySelectorAll("#"+e.map(h,function(t){return-1!=="0123456789".indexOf(t[0])?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.res=h),this._data.search.dom.children(".jstree-anchor").addClass("jstree-search")}this.trigger("search",{nodes:this._data.search.dom,str:n,res:this._data.search.res,show_only_matches:o})},this.clear_search=function(){this.settings.search.close_opened_onclear&&this.close_node(this._data.search.opn,0),this.trigger("clear_search",{nodes:this._data.search.dom,str:this._data.search.str,res:this._data.search.res}),this._data.search.res.length&&(this._data.search.dom=e(this.element[0].querySelectorAll("#"+e.map(this._data.search.res,function(t){return-1!=="0123456789".indexOf(t[0])?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search")),this._data.search.str="",this._data.search.res=[],this._data.search.opn=[],this._data.search.dom=e()},this.redraw_node=function(t,n,o,i){if((t=r.redraw_node.apply(this,arguments))&&-1!==e.inArray(t.id,this._data.search.res)){var a,s,l=null;for(a=0,s=t.childNodes.length;s>a;a++)if(t.childNodes[a]&&t.childNodes[a].className&&-1!==t.childNodes[a].className.indexOf("jstree-anchor")){l=t.childNodes[a];break}l&&(l.className+=" jstree-search")}return t}},function(e){e.vakata.search=function(t,n,r){r=r||{},!1!==(r=e.extend({},e.vakata.search.defaults,r)).fuzzy&&(r.fuzzy=!0),t=r.caseSensitive?t:t.toLowerCase();var o,i,a,s,l=r.location,u=r.distance,c=r.threshold,p=t.length;return p>32&&(r.fuzzy=!1),r.fuzzy&&(o=1<<p-1,i=function(){var e={},n=0;for(n=0;p>n;n++)e[t.charAt(n)]=0;for(n=0;p>n;n++)e[t.charAt(n)]|=1<<p-n-1;return e}(),a=function(e,t){var n=e/p,r=Math.abs(l-t);return u?n+r/u:r?1:n}),s=function(e){if(e=r.caseSensitive?e:e.toLowerCase(),t===e||-1!==e.indexOf(t))return{isMatch:!0,score:0};if(!r.fuzzy)return{isMatch:!1,score:1};var n,s,u,d,f,h,m,y,g,b=e.length,v=c,_=e.indexOf(t,l),S=p+b,E=1,w=[];for(-1!==_&&(v=Math.min(a(0,_),v),-1!==(_=e.lastIndexOf(t,l+p))&&(v=Math.min(a(0,_),v))),_=-1,n=0;p>n;n++){for(u=0,d=S;d>u;)a(n,l+d)<=v?u=d:S=d,d=Math.floor((S-u)/2+u);for(S=d,h=Math.max(1,l-d+1),m=Math.min(l+d,b)+p,(y=new Array(m+2))[m+1]=(1<<n)-1,s=m;s>=h;s--)if(g=i[e.charAt(s-1)],y[s]=0===n?(y[s+1]<<1|1)&g:(y[s+1]<<1|1)&g|(f[s+1]|f[s])<<1|1|f[s+1],y[s]&o&&(E=a(n,s-1),v>=E)){if(v=E,_=s-1,w.push(_),!(_>l))break;h=Math.max(1,2*l-_)}if(a(n+1,l)>v)break;f=y}return{isMatch:_>=0,score:E}},!0===n?{search:s}:s(n)},e.vakata.search.defaults={location:0,distance:100,threshold:.6,fuzzy:!1,caseSensitive:!1}}(e),e.jstree.defaults.sort=function(e,t){return this.get_text(e)>this.get_text(t)?1:-1},e.jstree.plugins.sort=function(t,n){this.bind=function(){n.bind.call(this),this.element.on("model.jstree",e.proxy(function(e,t){this.sort(t.parent,!0)},this)).on("rename_node.jstree create_node.jstree",e.proxy(function(e,t){this.sort(t.parent||t.node.parent,!1),this.redraw_node(t.parent||t.node.parent,!0)},this)).on("move_node.jstree copy_node.jstree",e.proxy(function(e,t){this.sort(t.parent,!1),this.redraw_node(t.parent,!0)},this))},this.sort=function(t,n){var r,o;if((t=this.get_node(t))&&t.children&&t.children.length&&(t.children.sort(e.proxy(this.settings.sort,this)),n))for(r=0,o=t.children_d.length;o>r;r++)this.sort(t.children_d[r],!1)}};var f=!1;e.jstree.defaults.state={key:"jstree",events:"changed.jstree open_node.jstree close_node.jstree check_node.jstree uncheck_node.jstree",ttl:!1,filter:!1,preserve_loaded:!1},e.jstree.plugins.state=function(t,n){this.bind=function(){n.bind.call(this);var t=e.proxy(function(){this.element.on(this.settings.state.events,e.proxy(function(){f&&clearTimeout(f),f=setTimeout(e.proxy(function(){this.save_state()},this),100)},this)),this.trigger("state_ready")},this);this.element.on("ready.jstree",e.proxy(function(e,n){this.element.one("restore_state.jstree",t),this.restore_state()||t()},this))},this.save_state=function(){var t=this.get_state();this.settings.state.preserve_loaded||delete t.core.loaded;var n={state:t,ttl:this.settings.state.ttl,sec:+new Date};e.vakata.storage.set(this.settings.state.key,JSON.stringify(n))},this.restore_state=function(){var t=e.vakata.storage.get(this.settings.state.key);if(t)try{t=JSON.parse(t)}catch(e){return!1}return!(t&&t.ttl&&t.sec&&+new Date-t.sec>t.ttl)&&(t&&t.state&&(t=t.state),t&&e.isFunction(this.settings.state.filter)&&(t=this.settings.state.filter.call(this,t)),!!t&&(this.settings.state.preserve_loaded||delete t.core.loaded,this.element.one("set_state.jstree",function(n,r){r.instance.trigger("restore_state",{state:e.extend(!0,{},t)})}),this.set_state(t),!0))},this.clear_state=function(){return e.vakata.storage.del(this.settings.state.key)}},function(e,t){e.vakata.storage={set:function(e,t){return window.localStorage.setItem(e,t)},get:function(e){return window.localStorage.getItem(e)},del:function(e){return window.localStorage.removeItem(e)}}}(e),e.jstree.defaults.types={default:{}},e.jstree.defaults.types[e.jstree.root]={},e.jstree.plugins.types=function(n,r){this.init=function(n,o){var i,a;if(o&&o.types&&o.types.default)for(i in o.types)if("default"!==i&&i!==e.jstree.root&&o.types.hasOwnProperty(i))for(a in o.types.default)o.types.default.hasOwnProperty(a)&&o.types[i][a]===t&&(o.types[i][a]=o.types.default[a]);r.init.call(this,n,o),this._model.data[e.jstree.root].type=e.jstree.root},this.refresh=function(t,n){r.refresh.call(this,t,n),this._model.data[e.jstree.root].type=e.jstree.root},this.bind=function(){this.element.on("model.jstree",e.proxy(function(n,r){var o,i,a,s=this._model.data,l=r.nodes,u=this.settings.types,c="default";for(o=0,i=l.length;i>o;o++){if(c="default",s[l[o]].original&&s[l[o]].original.type&&u[s[l[o]].original.type]&&(c=s[l[o]].original.type),s[l[o]].data&&s[l[o]].data.jstree&&s[l[o]].data.jstree.type&&u[s[l[o]].data.jstree.type]&&(c=s[l[o]].data.jstree.type),s[l[o]].type=c,!0===s[l[o]].icon&&u[c].icon!==t&&(s[l[o]].icon=u[c].icon),u[c].li_attr!==t&&"object"==typeof u[c].li_attr)for(a in u[c].li_attr)if(u[c].li_attr.hasOwnProperty(a)){if("id"===a)continue;s[l[o]].li_attr[a]===t?s[l[o]].li_attr[a]=u[c].li_attr[a]:"class"===a&&(s[l[o]].li_attr.class=u[c].li_attr.class+" "+s[l[o]].li_attr.class)}if(u[c].a_attr!==t&&"object"==typeof u[c].a_attr)for(a in u[c].a_attr)if(u[c].a_attr.hasOwnProperty(a)){if("id"===a)continue;s[l[o]].a_attr[a]===t?s[l[o]].a_attr[a]=u[c].a_attr[a]:"href"===a&&"#"===s[l[o]].a_attr[a]?s[l[o]].a_attr.href=u[c].a_attr.href:"class"===a&&(s[l[o]].a_attr.class=u[c].a_attr.class+" "+s[l[o]].a_attr.class)}}s[e.jstree.root].type=e.jstree.root},this)),r.bind.call(this)},this.get_json=function(t,n,o){var i,a,s=this._model.data,l=n?e.extend(!0,{},n,{no_id:!1}):{},u=r.get_json.call(this,t,l,o);if(!1===u)return!1;if(e.isArray(u))for(i=0,a=u.length;a>i;i++)u[i].type=u[i].id&&s[u[i].id]&&s[u[i].id].type?s[u[i].id].type:"default",n&&n.no_id&&(delete u[i].id,u[i].li_attr&&u[i].li_attr.id&&delete u[i].li_attr.id,u[i].a_attr&&u[i].a_attr.id&&delete u[i].a_attr.id);else u.type=u.id&&s[u.id]&&s[u.id].type?s[u.id].type:"default",n&&n.no_id&&(u=this._delete_ids(u));return u},this._delete_ids=function(t){if(e.isArray(t)){for(var n=0,r=t.length;r>n;n++)t[n]=this._delete_ids(t[n]);return t}return delete t.id,t.li_attr&&t.li_attr.id&&delete t.li_attr.id,t.a_attr&&t.a_attr.id&&delete t.a_attr.id,t.children&&e.isArray(t.children)&&(t.children=this._delete_ids(t.children)),t},this.check=function(n,o,i,a,s){if(!1===r.check.call(this,n,o,i,a,s))return!1;o=o&&o.id?o:this.get_node(o),i=i&&i.id?i:this.get_node(i);var l,u,c,p,d=o&&o.id?s&&s.origin?s.origin:e.jstree.reference(o.id):null;switch(d=d&&d._model&&d._model.data?d._model.data:null,n){case"create_node":case"move_node":case"copy_node":if("move_node"!==n||-1===e.inArray(o.id,i.children)){if((l=this.get_rules(i)).max_children!==t&&-1!==l.max_children&&l.max_children===i.children.length)return this._data.core.last_error={error:"check",plugin:"types",id:"types_01",reason:"max_children prevents function: "+n,data:JSON.stringify({chk:n,pos:a,obj:!(!o||!o.id)&&o.id,par:!(!i||!i.id)&&i.id})},!1;if(l.valid_children!==t&&-1!==l.valid_children&&-1===e.inArray(o.type||"default",l.valid_children))return this._data.core.last_error={error:"check",plugin:"types",id:"types_02",reason:"valid_children prevents function: "+n,data:JSON.stringify({chk:n,pos:a,obj:!(!o||!o.id)&&o.id,par:!(!i||!i.id)&&i.id})},!1;if(d&&o.children_d&&o.parents){for(u=0,c=0,p=o.children_d.length;p>c;c++)u=Math.max(u,d[o.children_d[c]].parents.length);u=u-o.parents.length+1}(0>=u||u===t)&&(u=1);do{if(l.max_depth!==t&&-1!==l.max_depth&&l.max_depth<u)return this._data.core.last_error={error:"check",plugin:"types",id:"types_03",reason:"max_depth prevents function: "+n,data:JSON.stringify({chk:n,pos:a,obj:!(!o||!o.id)&&o.id,par:!(!i||!i.id)&&i.id})},!1;i=this.get_node(i.parent),l=this.get_rules(i),u++}while(i)}}return!0},this.get_rules=function(e){if(!(e=this.get_node(e)))return!1;var n=this.get_type(e,!0);return n.max_depth===t&&(n.max_depth=-1),n.max_children===t&&(n.max_children=-1),n.valid_children===t&&(n.valid_children=-1),n},this.get_type=function(t,n){return!!(t=this.get_node(t))&&(n?e.extend({type:t.type},this.settings.types[t.type]):t.type)},this.set_type=function(n,r){var o,i,a,s,l,u,c,p,d=this._model.data;if(e.isArray(n)){for(n=n.slice(),i=0,a=n.length;a>i;i++)this.set_type(n[i],r);return!0}if(o=this.settings.types,n=this.get_node(n),!o[r]||!n)return!1;if((c=this.get_node(n,!0))&&c.length&&(p=c.children(".jstree-anchor")),s=n.type,l=this.get_icon(n),n.type=r,(!0===l||!o[s]||o[s].icon!==t&&l===o[s].icon)&&this.set_icon(n,o[r].icon===t||o[r].icon),o[s]&&o[s].li_attr!==t&&"object"==typeof o[s].li_attr)for(u in o[s].li_attr)if(o[s].li_attr.hasOwnProperty(u)){if("id"===u)continue;"class"===u?(d[n.id].li_attr.class=(d[n.id].li_attr.class||"").replace(o[s].li_attr[u],""),c&&c.removeClass(o[s].li_attr[u])):d[n.id].li_attr[u]===o[s].li_attr[u]&&(d[n.id].li_attr[u]=null,c&&c.removeAttr(u))}if(o[s]&&o[s].a_attr!==t&&"object"==typeof o[s].a_attr)for(u in o[s].a_attr)if(o[s].a_attr.hasOwnProperty(u)){if("id"===u)continue;"class"===u?(d[n.id].a_attr.class=(d[n.id].a_attr.class||"").replace(o[s].a_attr[u],""),p&&p.removeClass(o[s].a_attr[u])):d[n.id].a_attr[u]===o[s].a_attr[u]&&("href"===u?(d[n.id].a_attr[u]="#",p&&p.attr("href","#")):(delete d[n.id].a_attr[u],p&&p.removeAttr(u)))}if(o[r].li_attr!==t&&"object"==typeof o[r].li_attr)for(u in o[r].li_attr)if(o[r].li_attr.hasOwnProperty(u)){if("id"===u)continue;d[n.id].li_attr[u]===t?(d[n.id].li_attr[u]=o[r].li_attr[u],c&&("class"===u?c.addClass(o[r].li_attr[u]):c.attr(u,o[r].li_attr[u]))):"class"===u&&(d[n.id].li_attr.class=o[r].li_attr[u]+" "+d[n.id].li_attr.class,c&&c.addClass(o[r].li_attr[u]))}if(o[r].a_attr!==t&&"object"==typeof o[r].a_attr)for(u in o[r].a_attr)if(o[r].a_attr.hasOwnProperty(u)){if("id"===u)continue;d[n.id].a_attr[u]===t?(d[n.id].a_attr[u]=o[r].a_attr[u],p&&("class"===u?p.addClass(o[r].a_attr[u]):p.attr(u,o[r].a_attr[u]))):"href"===u&&"#"===d[n.id].a_attr[u]?(d[n.id].a_attr.href=o[r].a_attr.href,p&&p.attr("href",o[r].a_attr.href)):"class"===u&&(d[n.id].a_attr.class=o[r].a_attr.class+" "+d[n.id].a_attr.class,p&&p.addClass(o[r].a_attr[u]))}return!0}},e.jstree.defaults.unique={case_sensitive:!1,trim_whitespace:!1,duplicate:function(e,t){return e+" ("+t+")"}},e.jstree.plugins.unique=function(n,r){this.check=function(t,n,o,i,a){if(!1===r.check.call(this,t,n,o,i,a))return!1;if(n=n&&n.id?n:this.get_node(n),!(o=o&&o.id?o:this.get_node(o))||!o.children)return!0;var s,l,u,c="rename_node"===t?i:n.text,p=[],d=this.settings.unique.case_sensitive,f=this.settings.unique.trim_whitespace,h=this._model.data;for(s=0,l=o.children.length;l>s;s++)u=h[o.children[s]].text,d||(u=u.toLowerCase()),f&&(u=u.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),p.push(u);switch(d||(c=c.toLowerCase()),f&&(c=c.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),t){case"delete_node":return!0;case"rename_node":return u=n.text||"",d||(u=u.toLowerCase()),f&&(u=u.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),(s=-1===e.inArray(c,p)||n.text&&u===c)||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_01",reason:"Child with name "+c+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:i,obj:!(!n||!n.id)&&n.id,par:!(!o||!o.id)&&o.id})}),s;case"create_node":return(s=-1===e.inArray(c,p))||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_04",reason:"Child with name "+c+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:i,obj:!(!n||!n.id)&&n.id,par:!(!o||!o.id)&&o.id})}),s;case"copy_node":return(s=-1===e.inArray(c,p))||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_02",reason:"Child with name "+c+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:i,obj:!(!n||!n.id)&&n.id,par:!(!o||!o.id)&&o.id})}),s;case"move_node":return(s=n.parent===o.id&&(!a||!a.is_multi)||-1===e.inArray(c,p))||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_03",reason:"Child with name "+c+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:i,obj:!(!n||!n.id)&&n.id,par:!(!o||!o.id)&&o.id})}),s}return!0},this.create_node=function(n,o,i,a,s){if(!o||o.text===t){if(null===n&&(n=e.jstree.root),!(n=this.get_node(n)))return r.create_node.call(this,n,o,i,a,s);if(!(i=i===t?"last":i).toString().match(/^(before|after)$/)&&!s&&!this.is_loaded(n))return r.create_node.call(this,n,o,i,a,s);o||(o={});var l,u,c,p,d,f,h=this._model.data,m=this.settings.unique.case_sensitive,y=this.settings.unique.trim_whitespace,g=this.settings.unique.duplicate;for(u=l=this.get_string("New node"),c=[],p=0,d=n.children.length;d>p;p++)f=h[n.children[p]].text,m||(f=f.toLowerCase()),y&&(f=f.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),c.push(f);for(p=1,f=u,m||(f=f.toLowerCase()),y&&(f=f.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""));-1!==e.inArray(f,c);)u=g.call(this,l,++p).toString(),f=u,m||(f=f.toLowerCase()),y&&(f=f.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""));o.text=u}return r.create_node.call(this,n,o,i,a,s)}};var h=u.createElement("DIV");if(h.setAttribute("unselectable","on"),h.setAttribute("role","presentation"),h.className="jstree-wholerow",h.innerHTML="&#160;",e.jstree.plugins.wholerow=function(t,n){this.bind=function(){n.bind.call(this),this.element.on("ready.jstree set_state.jstree",e.proxy(function(){this.hide_dots()},this)).on("init.jstree loading.jstree ready.jstree",e.proxy(function(){this.get_container_ul().addClass("jstree-wholerow-ul")},this)).on("deselect_all.jstree",e.proxy(function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")},this)).on("changed.jstree",e.proxy(function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");var n,r,o=!1;for(n=0,r=t.selected.length;r>n;n++)(o=this.get_node(t.selected[n],!0))&&o.length&&o.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("open_node.jstree",e.proxy(function(e,t){this.get_node(t.node,!0).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("hover_node.jstree dehover_node.jstree",e.proxy(function(e,t){"hover_node"===e.type&&this.is_disabled(t.node)||this.get_node(t.node,!0).children(".jstree-wholerow")["hover_node"===e.type?"addClass":"removeClass"]("jstree-wholerow-hovered")},this)).on("contextmenu.jstree",".jstree-wholerow",e.proxy(function(t){if(this._data.contextmenu){t.preventDefault();var n=e.Event("contextmenu",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,pageX:t.pageX,pageY:t.pageY});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(n)}},this)).on("click.jstree",".jstree-wholerow",function(t){t.stopImmediatePropagation();var n=e.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(n).focus()}).on("dblclick.jstree",".jstree-wholerow",function(t){t.stopImmediatePropagation();var n=e.Event("dblclick",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(n).focus()}).on("click.jstree",".jstree-leaf > .jstree-ocl",e.proxy(function(t){t.stopImmediatePropagation();var n=e.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(n).focus()},this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",e.proxy(function(e){return e.stopImmediatePropagation(),this.is_disabled(e.currentTarget)||this.hover_node(e.currentTarget),!1},this)).on("mouseleave.jstree",".jstree-node",e.proxy(function(e){this.dehover_node(e.currentTarget)},this))},this.teardown=function(){this.settings.wholerow&&this.element.find(".jstree-wholerow").remove(),n.teardown.call(this)},this.redraw_node=function(t,r,o,i){if(t=n.redraw_node.apply(this,arguments)){var a=h.cloneNode(!0);-1!==e.inArray(t.id,this._data.core.selected)&&(a.className+=" jstree-wholerow-clicked"),this._data.core.focused&&this._data.core.focused===t.id&&(a.className+=" jstree-wholerow-hovered"),t.insertBefore(a,t.childNodes[0])}return t}},window.customElements&&Object&&Object.create){var m=Object.create(HTMLElement.prototype);m.createdCallback=function(){var t,n={core:{},plugins:[]};for(t in e.jstree.plugins)e.jstree.plugins.hasOwnProperty(t)&&this.attributes[t]&&(n.plugins.push(t),this.getAttribute(t)&&JSON.parse(this.getAttribute(t))&&(n[t]=JSON.parse(this.getAttribute(t))));for(t in e.jstree.defaults.core)e.jstree.defaults.core.hasOwnProperty(t)&&this.attributes[t]&&(n.core[t]=JSON.parse(this.getAttribute(t))||this.getAttribute(t));e(this).jstree(n)};try{window.customElements.define("vakata-jstree",function(){},{prototype:m})}catch(e){}}}})?o.apply(t,i):o)||(e.exports=a)}()}).call(this,n(17))},function(e,t,n){},function(e,t,n){"use strict";function r(e,t){return e===t}function o(e){var t=arguments.length<=1||void 0===arguments[1]?r:arguments[1],n=null,o=null;return function(){for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return null!==n&&n.length===i.length&&i.every(function(e,r){return t(e,n[r])})||(o=e.apply(void 0,i)),n=i,o}}function i(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];var i=0,a=r.pop(),s=function(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(e){return"function"==typeof e})){var n=t.map(function(e){return typeof e}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return t}(r),l=e.apply(void 0,[function(){return i++,a.apply(void 0,arguments)}].concat(n)),u=function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];var i=s.map(function(n){return n.apply(void 0,[e,t].concat(r))});return l.apply(void 0,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(i))};return u.resultFunc=a,u.recomputations=function(){return i},u.resetRecomputations=function(){return i=0},u}}t.__esModule=!0,t.defaultMemoize=o,t.createSelectorCreator=i,t.createStructuredSelector=function(e){var t=arguments.length<=1||void 0===arguments[1]?a:arguments[1];if("object"!=typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var n=Object.keys(e);return t(n.map(function(t){return e[t]}),function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(function(e,t,r){return e[n[r]]=t,e},{})})};var a=t.createSelector=i(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}};var a,s=n(0),l=(a=s)&&a.__esModule?a:{default:a},u=n(806),c=n(1038),p=n(815),d=n(899),f=(n(839),n(900)),h=n(902),m=n(1042),y=function(e){function t(e){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={currentPage:this.props.currentPage?this.props.currentPage:0,currentSort:{column:null,direction:this.props.defaultSortDescending?-1:1},filter:""},!1!==e.sortBy||!1!==e.defaultSort){var n=e.sortBy||e.defaultSort;this.state.currentSort=this.getCurrentSort(n)}}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l["default"].Component),o(t,[{key:"filterBy",value:function(e){this.setState({filter:e})}},{key:"translateColumnsArray",value:function(e){return e.map(function(e,t){if("string"==typeof e)return{key:e,label:e};if(void 0!==e.sortable){var n=!0===e.sortable?"default":e.sortable;this._sortable[e.key]=n}return e}.bind(this))}},{key:"parseChildData",value:function(e){var t=[],n=void 0;return void 0!==e.children&&l.default.Children.forEach(e.children,function(e){if(null!=e)switch(e.type){case d.Thead:break;case h.Tfoot:void 0!==n&&console.warn("You can only have one <Tfoot>, but more than one was specified.Ignoring all but the last one"),n=e;break;case f.Tr:var r=e.props.data||{};l.default.Children.forEach(e.props.children,function(e){if("object"==typeof e&&null!=e)if(void 0!==e.props.column){var t=void 0;if(void 0!==e.props.data)t=e.props.data;else{if(void 0===e.props.children)return void console.warn("exports.Td specified without a `data` property or children, ignoring");t=e.props.children}r[e.props.column]={value:t,props:(0,u.filterPropsFrom)(e.props),__reactableMeta:!0}}else console.warn("exports.Td specified without a `column` property, ignoring")}),t.push({data:r,props:(0,u.filterPropsFrom)(e.props),__reactableMeta:!0});break;default:console.warn("The only possible children of <Table> are <Thead>, <Tr>, or one <Tfoot>.")}}.bind(this)),{data:t,tfoot:n}}},{key:"initialize",value:function(e){this.data=e.data||[];var t=this.parseChildData(e),n=t.data,r=t.tfoot;this.data=this.data.concat(n),this.tfoot=r,this.initializeSorts(e),this.initializeFilters(e)}},{key:"initializeFilters",value:function(e){for(var t in this._filterable={},e.filterable){var n=e.filterable[t],r=void 0,o=void 0;if(n instanceof Object){if(void 0===n.column){console.warn("Filterable column specified without column name");continue}r=n.column,o="function"==typeof n.filterFunction?n.filterFunction:"default"}else r=n,o="default";this._filterable[r]=o}}},{key:"initializeSorts",value:function(e){for(var t in this._sortable={},e.sortable){var n=e.sortable[t],r=void 0,o=void 0;if(n instanceof Object){if(void 0===n.column)return void console.warn("Sortable column specified without column name");r=n.column,o="function"==typeof n.sortFunction?n.sortFunction:"default"}else r=n,o="default";this._sortable[r]=o}}},{key:"getCurrentSort",value:function(e){var t=void 0,n=void 0;if(e instanceof Object){if(void 0===e.column)return void console.warn("Default column specified without column name");if(t=e.column,void 0!==e.direction)if(1===e.direction||"asc"===e.direction)n=1;else if(-1===e.direction||"desc"===e.direction)n=-1;else{var r=this.props.defaultSortDescending?"descending":"ascending";console.warn("Invalid default sort specified. Defaulting to "+r),n=this.props.defaultSortDescending?-1:1}else n=this.props.defaultSortDescending?-1:1}else t=e,n=this.props.defaultSortDescending?-1:1;return{column:t,direction:n}}},{key:"updateCurrentSort",value:function(e){!1!==e&&e.column!==this.state.currentSort.column&&e.direction!==this.state.currentSort.direction&&this.setState({currentSort:this.getCurrentSort(e)})}},{key:"updateCurrentPage",value:function(e){void 0!==e&&e!==this.state.currentPage&&this.setState({currentPage:e})}},{key:"componentWillMount",value:function(){this.initialize(this.props),this.sortByCurrentSort(),this.filterBy(this.props.filterBy)}},{key:"componentWillReceiveProps",value:function(e){this.initialize(e),this.updateCurrentPage(e.currentPage),this.updateCurrentSort(e.sortBy),this.sortByCurrentSort(),this.filterBy(e.filterBy)}},{key:"applyFilter",value:function(e,t){e=e.toLowerCase();for(var n=[],r=0;r<t.length;r++){var o=t[r].props.data;for(var i in this._filterable)if(void 0!==o[i])if(void 0===this._filterable[i]||"default"===this._filterable[i]){if((0,c.extractDataFrom)(o,i).toString().toLowerCase().indexOf(e)>-1){n.push(t[r]);break}}else if(this._filterable[i]((0,c.extractDataFrom)(o,i).toString(),e)){n.push(t[r]);break}}return n}},{key:"sortByCurrentSort",value:function(){var e=this.state.currentSort;null!==e.column&&this.data.sort(function(t,n){var r=(0,c.extractDataFrom)(t,e.column);r=(0,p.isUnsafe)(r)?r.toString():r||"";var o=(0,c.extractDataFrom)(n,e.column);return o=(0,p.isUnsafe)(o)?o.toString():o||"",void 0===this._sortable[e.column]||"default"===this._sortable[e.column]?r<o?-1*e.direction:r>o?1*e.direction:0:1===e.direction?this._sortable[e.column](r,o):this._sortable[e.column](o,r)}.bind(this))}},{key:"onSort",value:function(e){if(void 0!==this._sortable[e]){var t=this.state.currentSort;t.column===e?t.direction*=-1:(t.column=e,t.direction=this.props.defaultSortDescending?-1:1),this.setState({currentSort:t}),this.sortByCurrentSort(),"function"==typeof this.props.onSort&&this.props.onSort(t)}}},{key:"render",value:function(){var e=this,t=[],n=void 0,o=!1,i=void 0===this.props.hideTableHeader,a=null;if(this.props.children&&(this.props.children.length>0&&this.props.children[0]&&this.props.children[0].type===d.Thead?a=this.props.children[0]:this.props.children.type===d.Thead&&(a=this.props.children)),(n=null!==a?d.Thead.getColumns(a):this.props.columns||[]).length>0&&(o=!0,n=this.translateColumnsArray(n)),this.data&&"function"==typeof this.data.map&&(t=t.concat(this.data.map(function(e,t){var i=e,a={};for(var s in!0===e.__reactableMeta&&(i=e.data,a=e.props),i)i.hasOwnProperty(s)&&!1===o&&function(){var e={key:s,label:s};void 0===n.find(function(t){return t.key===e.key})&&n.push(e)}();return l.default.createElement(f.Tr,r({columns:n,key:t,data:i},a))}.bind(this)))),!0===this.props.sortable)for(var s=0;s<n.length;s++)this._sortable[n[s].key]="default";var c=!1;this.props.filterable&&Array.isArray(this.props.filterable)&&this.props.filterable.length>0&&!this.props.hideFilterInput&&(c=!0);var p=t;""!==this.state.filter&&(p=this.applyFilter(this.state.filter,p));var h=0,y=!1,g=void 0,b=this.state.currentPage,v=this.props.pageButtonLimit||10,_=p;this.props.itemsPerPage>0&&(h=this.props.itemsPerPage,b>(g=Math.ceil(p.length/h))-1&&(b=g-1),y=!0,_=p.slice(b*h,(b+1)*h));var S=(0,u.filterPropsFrom)(this.props),E=this.props.noDataText?l.default.createElement("tr",{className:"reactable-no-data"},l.default.createElement("td",{colSpan:n.length},this.props.noDataText)):null,w=null;return n&&n.length>0&&i&&(w=l.default.createElement(d.Thead,{columns:n,filtering:c,onFilter:function(t){e.setState({filter:t}),e.props.onFilter&&e.props.onFilter(t)},filterPlaceholder:this.props.filterPlaceholder,filterClassName:this.props.filterClassName,currentFilter:this.state.filter,sort:this.state.currentSort,sortableColumns:this._sortable,onSort:this.onSort.bind(this),key:"thead"})),l.default.createElement("table",S,w,l.default.createElement("tbody",{className:"reactable-data",key:"tbody"},_.length>0?_:E),!0===y?l.default.createElement(m.Paginator,{colSpan:n.length,pageButtonLimit:v,numPages:g,currentPage:b,onPageChange:function(t){e.setState({currentPage:t}),e.props.onPageChange&&e.props.onPageChange(t)},previousPageLabel:this.props.previousPageLabel,nextPageLabel:this.props.nextPageLabel,key:"paginator"}):null,this.tfoot)}}]),t}();t.Table=y,y.defaultProps={sortBy:!1,defaultSort:!1,defaultSortDescending:!1,itemsPerPage:0,filterBy:"",hideFilterInput:!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractDataFrom=function(e,t){var n;n=null!=e&&!0===e.__reactableMeta?e.data[t]:e[t];null!=n&&!0===n.__reactableMeta&&(n=void 0!==n.props.value&&null!==n.props.value?n.props.value:n.value);return(0,r.stringable)(n)?n:""};var r=n(898)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=i(n(0)),u=i(n(23)),c=function(e){function t(){a(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return s(t,l["default"].Component),r(t,[{key:"onChange",value:function(){this.props.onFilter(u.default.findDOMNode(this).value)}},{key:"render",value:function(){return l.default.createElement("input",{type:"text",className:this.props.className,placeholder:this.props.placeholder,value:this.props.value,onKeyUp:this.onChange.bind(this),onChange:this.onChange.bind(this)})}}]),t}();t.FiltererInput=c;var p=function(e){function t(){a(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return s(t,l["default"].Component),r(t,[{key:"render",value:function(){if(void 0===this.props.colSpan)throw new TypeError("Must pass a colSpan argument to Filterer");return l.default.createElement("tr",{className:"reactable-filterer"},l.default.createElement("td",{colSpan:this.props.colSpan},l.default.createElement(c,{onFilter:this.props.onFilter,value:this.props.value,placeholder:this.props.placeholder,className:this.props.className?"reactable-filter-input "+this.props.className:"reactable-filter-input"})))}}]),t}();t.Filterer=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isReactComponent=function(e){return null!==e&&"object"==typeof e&&void 0!==e.props}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toArray=function(e){var t=[];for(var n in e)t[n]=e;return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}};var i,a=n(0),s=(i=a)&&i.__esModule?i:{default:i};function l(e){return"#page-"+(e+1)}var u=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["default"].Component),r(t,[{key:"handlePrevious",value:function(e){e.preventDefault(),this.props.onPageChange(this.props.currentPage-1)}},{key:"handleNext",value:function(e){e.preventDefault(),this.props.onPageChange(this.props.currentPage+1)}},{key:"handlePageButton",value:function(e,t){t.preventDefault(),this.props.onPageChange(e)}},{key:"renderPrevious",value:function(){if(this.props.currentPage>0)return s.default.createElement("a",{className:"reactable-previous-page",href:l(this.props.currentPage-1),onClick:this.handlePrevious.bind(this)},this.props.previousPageLabel||"Previous")}},{key:"renderNext",value:function(){if(this.props.currentPage<this.props.numPages-1)return s.default.createElement("a",{className:"reactable-next-page",href:l(this.props.currentPage+1),onClick:this.handleNext.bind(this)},this.props.nextPageLabel||"Next")}},{key:"renderPageButton",value:function(e,t){return s.default.createElement("a",{className:e,key:t,href:l(t),onClick:this.handlePageButton.bind(this,t)},t+1)}},{key:"render",value:function(){if(void 0===this.props.colSpan)throw new TypeError("Must pass a colSpan argument to Paginator");if(void 0===this.props.numPages)throw new TypeError("Must pass a non-zero numPages argument to Paginator");if(void 0===this.props.currentPage)throw new TypeError("Must pass a currentPage argument to Paginator");for(var e=[],t=this.props.pageButtonLimit,n=this.props.currentPage,r=this.props.numPages,o=Math.round(t/2),i=t-o,a=0;a<this.props.numPages;a++){var l=a,u="reactable-page-button";n===a&&(u+=" reactable-current-page"),e.push(this.renderPageButton(u,l))}return n-t+o>0&&(n>r-o?e.splice(0,r-t):e.splice(0,n-t+o)),r-n>i&&e.splice(t,e.length-t),s.default.createElement("tbody",{className:"reactable-pagination"},s.default.createElement("tr",null,s.default.createElement("td",{colSpan:this.props.colSpan},this.renderPrevious(),e,this.renderNext())))}}]),t}();t.Paginator=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={Numeric:function(e,t){var n=parseFloat(e.toString().replace(/,/g,"")),r=parseFloat(t.toString().replace(/,/g,""));if(isNaN(n)&&isNaN(r))n=e,r=t;else{if(isNaN(n))return 1;if(isNaN(r))return-1}return n<r?-1:n>r?1:0},NumericInteger:function(e,t){return isNaN(e)||isNaN(t)?e>t?1:-1:e-t},Currency:function(e,n){return e=e.replace(/[^0-9\.\-\,]+/g,""),n=n.replace(/[^0-9\.\-\,]+/g,""),t.Sort.Numeric(e,n)},Date:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,n){var r=Date.parse(e),o=Date.parse(n);return isNaN(r)||isNaN(o)?t.Sort.Numeric(e,n):r>o?1:o>r?-1:0}),CaseInsensitive:function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}};t.Sort=r},function(e,t,n){var r;"undefined"!=typeof self&&self,r=function(e,t,n){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=l(n(1)),s=l(n(2));function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),i(t,[{key:"propsWith",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={};return Object.keys(this.props).forEach(function(r){if(-1!==r.search(e)){var o=t?r.replace(e,""):r;n[o]=this.props[r]}},this),n}},{key:"componentWillUnmount",value:function(){this.clipboard&&this.clipboard.destroy()}},{key:"componentDidMount",value:function(){var e=this.props.options||this.propsWith(/^option-/,!0),t=a.default.version.match(/0\.13(.*)/)?this.refs.element.getDOMNode():this.element,r=n(3);this.clipboard=new r(t,e);var o=this.propsWith(/^on/,!0);Object.keys(o).forEach(function(e){this.clipboard.on(e.toLowerCase(),this.props["on"+e])},this)}},{key:"render",value:function(){var e=this,t=o({type:this.getType(),className:this.props.className||"",style:this.props.style||{},ref:function(t){e.element=t},onClick:this.props.onClick},this.propsWith(/^data-/),this.propsWith(/^button-/,!0));return a.default.createElement(this.getComponent(),t,this.props.children)}},{key:"getType",value:function(){return"button"===this.getComponent()||"input"===this.getComponent()?this.props.type||"button":void 0}},{key:"getComponent",value:function(){return this.props.component||"button"}}]),t}();u.propTypes={options:function(e,t,n){var o=e[t];if(o&&"object"!==(void 0===o?"undefined":r(o))||Array.isArray(o))return new Error("Invalid props '"+t+"' supplied to '"+n+"'. '"+t+"' is not an object.");if(void 0!==e["option-text"]&&"function"!=typeof e["option-text"])return new Error("Invalid props 'option-text' supplied to '"+n+"'. 'option-text' is not a function.")},type:s.default.string,className:s.default.string,style:s.default.object,component:s.default.string,children:s.default.oneOfType([s.default.element,s.default.string,s.default.number,s.default.object])},u.defaultProps={onClick:function(){}},t.default=u},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n}])},e.exports=r(n(0),n(4),n(194))},function(e,t,n){},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1047);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r(o).default}});var i=n(904);Object.defineProperty(t,"Fade",{enumerable:!0,get:function(){return r(i).default}});var a=n(1049);Object.defineProperty(t,"Bounce",{enumerable:!0,get:function(){return r(a).default}});var s=n(1050);Object.defineProperty(t,"Roll",{enumerable:!0,get:function(){return r(s).default}});var l=n(1051);Object.defineProperty(t,"Slide",{enumerable:!0,get:function(){return r(l).default}});var u=n(1052);Object.defineProperty(t,"Flip",{enumerable:!0,get:function(){return r(u).default}}),Object.defineProperty(t,"Reveal",{enumerable:!0,get:function(){return r(o).default}});var c=n(1053);Object.defineProperty(t,"Rotate",{enumerable:!0,get:function(){return r(c).default}});var p=n(1054);Object.defineProperty(t,"LightSpeed",{enumerable:!0,get:function(){return r(p).default}});var d=n(1055);Object.defineProperty(t,"Zoom",{enumerable:!0,get:function(){return r(d).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){function t(e){return e?h?{duration:u,delay:c,count:p,forever:d,className:h,style:{}}:y:f?{duration:void 0===r?o:r,delay:i,count:a,forever:s,className:f,style:{}}:m}var n=e.children,r=e.timeout,o=e.duration,i=e.delay,a=e.count,s=e.forever,u=e.durationOut,c=e.delayOut,p=e.countOut,d=e.foreverOut,f=e.effect,h=e.effectOut,m=e.inEffect,y=e.outEffect,g=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children","timeout","duration","delay","count","forever","durationOut","delayOut","countOut","foreverOut","effect","effectOut","inEffect","outEffect"]);return(0,l.default)(g,t(!1),t(!0),n)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(4),s=n(790),l=r(n(793)),u=r(n(904)),c={in:a.object,out:(0,a.oneOfType)([a.object,(0,a.oneOf)([!1])]),effect:a.string,effectOut:a.string,duration:a.number,timeout:a.number,delay:a.number,count:a.number,forever:a.bool,durationOut:a.number,delayOut:a.number,countOut:a.number,foreverOut:a.bool},p=i({},s.defaults,{durationOut:s.defaults.duration,delayOut:s.defaults.delay,countOut:s.defaults.count,foreverOut:s.defaults.forever,inEffect:(0,u.default)(s.defaults),outEffect:(0,u.default)(i({out:!0},s.defaults))});o.propTypes=c,o.defaultProps=p,t.default=o,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=(r=l)&&r.__esModule?r:{default:r},c=n(4),p=n(790),d=(0,c.shape)({make:c.func,duration:c.number.isRequired,delay:c.number.isRequired,forever:c.bool,count:c.number.isRequired,style:c.object.isRequired,reverse:c.bool}),f={collapse:c.bool,collapseEl:c.element,cascade:c.bool,wait:c.number,force:c.bool,disabled:c.bool,appear:c.bool,enter:c.bool,exit:c.bool,fraction:c.number,refProp:c.string,innerRef:c.func,onReveal:c.func,unmountOnExit:c.bool,mountOnEnter:c.bool,inEffect:d.isRequired,outEffect:(0,c.oneOfType)([d,(0,c.oneOf)([!1])]).isRequired,ssrReveal:c.bool,collapseOnly:c.bool,ssrFadeout:c.bool},h={transitionGroup:c.object},m=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.isOn=void 0===e.when||!!e.when,r.state={collapse:e.collapse?t.getInitialCollapseStyle(e):void 0,style:{opacity:r.isOn&&!e.ssrReveal||!e.outEffect?void 0:0}},r.savedChild=!1,r.isShown=!1,p.observerMode?r.handleObserve=r.handleObserve.bind(r):(r.revealHandler=r.makeHandler(r.reveal),r.resizeHandler=r.makeHandler(r.resize)),r.saveRef=r.saveRef.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),s(t,[{key:"saveRef",value:function(e){this.childRef&&this.childRef(e),this.props.innerRef&&this.props.innerRef(e),this.el!==e&&(this.el=e&&"offsetHeight"in e?e:void 0,this.observe(this.props,!0))}},{key:"invisible",value:function(){this&&this.el&&(this.savedChild=!1,this.isShown||(this.setState({hasExited:!0,collapse:this.props.collapse?a({},this.state.collapse,{visibility:"hidden"}):null,style:{opacity:0}}),!p.observerMode&&this.props.collapse&&window.document.dispatchEvent(p.collapseend)))}},{key:"animationEnd",value:function(e,t,n){var r=this,o=n.forever,i=n.count,a=n.delay,s=n.duration;if(!o){this.animationEndTimeout=window.setTimeout(function(){r&&r.el&&(r.animationEndTimeout=void 0,e.call(r))},a+(s+(t?s:0)*i))}}},{key:"getDimensionValue",value:function(){return this.el.offsetHeight+parseInt(window.getComputedStyle(this.el,null).getPropertyValue("margin-top"),10)+parseInt(window.getComputedStyle(this.el,null).getPropertyValue("margin-bottom"),10)}},{key:"collapse",value:function(e,t,n){var r=n.duration+(t.cascade?n.duration:0),o=this.isOn?this.getDimensionValue():0,i=void 0,a=void 0;if(t.collapseOnly)i=n.duration/3,a=n.delay;else{var s=r>>2,l=s>>1;i=s,a=n.delay+(this.isOn?0:r-s-l),e.style.animationDuration=r-s+(this.isOn?l:-l)+"ms",e.style.animationDelay=n.delay+(this.isOn?s-l:0)+"ms"}return e.collapse={height:o,transition:"height "+i+"ms ease "+a+"ms",overflow:t.collapseOnly?"hidden":void 0},e}},{key:"animate",value:function(e){if(this&&this.el&&(this.unlisten(),this.isShown!==this.isOn)){this.isShown=this.isOn;var t=!this.isOn&&e.outEffect,n=e[t?"outEffect":"inEffect"],r="style"in n&&n.style.animationName||void 0,o=void 0;e.collapseOnly?o={hasAppeared:!0,hasExited:!1,style:{opacity:1}}:((e.outEffect||this.isOn)&&n.make&&(r=n.make),o={hasAppeared:!0,hasExited:!1,collapse:void 0,style:a({},n.style,{animationDuration:n.duration+"ms",animationDelay:n.delay+"ms",animationIterationCount:n.forever?"infinite":n.count,opacity:1,animationName:r}),className:n.className}),this.setState(e.collapse?this.collapse(o,e,n):o),t?(this.savedChild=u.default.cloneElement(this.getChild()),this.animationEnd(this.invisible,e.cascade,n)):this.savedChild=!1,this.onReveal(e)}}},{key:"onReveal",value:function(e){e.onReveal&&this.isOn&&(this.onRevealTimeout&&(this.onRevealTimeout=window.clearTimeout(this.onRevealTimeout)),e.wait?this.onRevealTimeout=window.setTimeout(e.onReveal,e.wait):e.onReveal())}},{key:"componentWillUnmount",value:function(){this.unlisten(),p.ssr&&(0,p.disableSsr)()}},{key:"handleObserve",value:function(e,t){i(e,1)[0].intersectionRatio>0&&(t.disconnect(),this.observer=null,this.reveal(this.props,!0))}},{key:"observe",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.el&&p.observerMode){if(this.observer){if(!t)return;this.observer.disconnect()}else if(t)return;this.observer=new IntersectionObserver(this.handleObserve,{threshold:e.fraction}),this.observer.observe(this.el)}}},{key:"reveal",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];p.globalHide||(0,p.hideAll)(),this&&this.el&&(e||(e=this.props),p.ssr&&(0,p.disableSsr)(),this.isOn&&this.isShown&&void 0!==e.spy?(this.isShown=!1,this.setState({style:{}}),window.setTimeout(function(){return t.reveal(e)},200)):n||this.inViewport(e)||e.force?this.animate(e):p.observerMode?this.observe(e):this.listen())}},{key:"componentDidMount",value:function(){var e=this;if(this.el&&!this.props.disabled){this.props.collapseOnly||("make"in this.props.inEffect&&this.props.inEffect.make(!1,this.props),void 0!==this.props.when&&this.props.outEffect&&"make"in this.props.outEffect&&this.props.outEffect.make(!0,this.props));var n=this.context.transitionGroup,r=n&&!n.isMounting?!("enter"in this.props&&!1===this.props.enter):this.props.appear;return this.isOn&&((void 0!==this.props.when||void 0!==this.props.spy)&&!r||p.ssr&&!p.fadeOutEnabled&&!this.props.ssrFadeout&&this.props.outEffect&&!this.props.ssrReveal&&t.getTop(this.el)<window.pageYOffset+window.innerHeight)?(this.isShown=!0,this.setState({hasAppeared:!0,collapse:this.props.collapse?{height:this.getDimensionValue()}:this.state.collapse,style:{opacity:1}}),void this.onReveal(this.props)):p.ssr&&(p.fadeOutEnabled||this.props.ssrFadeout)&&this.props.outEffect&&t.getTop(this.el)<window.pageYOffset+window.innerHeight?(this.setState({style:{opacity:0,transition:"opacity 1000ms 1000ms"}}),void window.setTimeout(function(){return e.reveal(e.props,!0)},2e3)):void(this.isOn&&(this.props.force?this.animate(this.props):this.reveal(this.props)))}}},{key:"cascade",value:function(e){var t=this,n=void 0;n="string"==typeof e?e.split("").map(function(e,t){return u.default.createElement("span",{key:t,style:{display:"inline-block",whiteSpace:"pre"}},e)}):u.default.Children.toArray(e);var r=this.props[this.isOn||!this.props.outEffect?"inEffect":"outEffect"],i=r.duration,s=r.reverse,l=n.length,c=2*i;this.props.collapse&&(c=parseInt(this.state.style.animationDuration,10),i=c/2);var d=s?l:0;return n.map(function(e){return"object"===(void 0===e?"undefined":o(e))&&e?u.default.cloneElement(e,{style:a({},e.props.style,t.state.style,{animationDuration:Math.round((0,p.cascade)(s?d--:d++,0,l,i,c))+"ms"})}):e})}},{key:"componentWillReceiveProps",value:function(e){void 0!==e.when&&(this.isOn=!!e.when),e.fraction!==this.props.fraction&&this.observe(e,!0),!this.isOn&&e.onExited&&"exit"in e&&!1===e.exit?e.onExited():e.disabled||(e.collapse&&!this.props.collapse&&(this.setState({style:{},collapse:t.getInitialCollapseStyle(e)}),this.isShown=!1),e.when===this.props.when&&e.spy===this.props.spy||this.reveal(e),this.onRevealTimeout&&!this.isOn&&(this.onRevealTimeout=window.clearTimeout(this.onRevealTimeout)))}},{key:"getChild",value:function(){if(this.savedChild&&!this.props.disabled)return this.savedChild;if("object"===o(this.props.children)){var e=u.default.Children.only(this.props.children);return"type"in e&&"string"==typeof e.type||"ref"!==this.props.refProp?e:u.default.createElement("div",null,e)}return u.default.createElement("div",null,this.props.children)}},{key:"render",value:function(){var e;e=this.state.hasAppeared?!this.props.unmountOnExit||!this.state.hasExited||this.isOn:!this.props.mountOnEnter||this.isOn;var t=this.getChild();"function"==typeof t.ref&&(this.childRef=t.ref);var n=!1,r=t.props,o=r.style,i=r.className,s=r.children,l=this.props.disabled?i:(this.props.outEffect?p.namespace:"")+(this.state.className?" "+this.state.className:"")+(i?" "+i:"")||void 0,c=void 0;"function"==typeof this.state.style.animationName&&(this.state.style.animationName=this.state.style.animationName(!this.isOn,this.props)),this.props.cascade&&!this.props.disabled&&s&&this.state.style.animationName?(n=this.cascade(s),c=a({},o,{opacity:1})):c=this.props.disabled?o:a({},o,this.state.style);var d=a({},this.props.props,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({className:l,style:c},this.props.refProp,this.saveRef)),f=u.default.cloneElement(t,d,e?n||s:void 0);return void 0!==this.props.collapse?this.props.collapseEl?u.default.cloneElement(this.props.collapseEl,{style:a({},this.props.collapseEl.style,this.props.disabled?void 0:this.state.collapse),children:f}):u.default.createElement("div",{style:this.props.disabled?void 0:this.state.collapse,children:f}):f}},{key:"makeHandler",value:function(e){var t=this,n=function(){e.call(t,t.props),t.ticking=!1};return function(){t.ticking||((0,p.raf)(n),t.ticking=!0)}}},{key:"inViewport",value:function(e){if(!this.el||window.document.hidden)return!1;var n=this.el.offsetHeight,r=window.pageYOffset-t.getTop(this.el),o=Math.min(n,window.innerHeight)*(p.globalHide?e.fraction:0);return r>o-window.innerHeight&&r<n-o}},{key:"resize",value:function(e){this&&this.el&&this.isOn&&this.inViewport(e)&&(this.unlisten(),this.isShown=this.isOn,this.setState({hasExited:!this.isOn,hasAppeared:!0,collapse:void 0,style:{opacity:this.isOn||!e.outEffect?1:0}}),this.onReveal(e))}},{key:"listen",value:function(){p.observerMode||this.isListener||(this.isListener=!0,window.addEventListener("scroll",this.revealHandler,{passive:!0}),window.addEventListener("orientationchange",this.revealHandler,{passive:!0}),window.document.addEventListener("visibilitychange",this.revealHandler,{passive:!0}),window.document.addEventListener("collapseend",this.revealHandler,{passive:!0}),window.addEventListener("resize",this.resizeHandler,{passive:!0}))}},{key:"unlisten",value:function(){!p.observerMode&&this.isListener&&(window.removeEventListener("scroll",this.revealHandler,{passive:!0}),window.removeEventListener("orientationchange",this.revealHandler,{passive:!0}),window.document.removeEventListener("visibilitychange",this.revealHandler,{passive:!0}),window.document.removeEventListener("collapseend",this.revealHandler,{passive:!0}),window.removeEventListener("resize",this.resizeHandler,{passive:!0}),this.isListener=!1),this.onRevealTimeout&&(this.onRevealTimeout=window.clearTimeout(this.onRevealTimeout)),this.animationEndTimeout&&(this.animationEndTimeout=window.clearTimeout(this.animationEndTimeout))}}],[{key:"getInitialCollapseStyle",value:function(e){return{height:0,visibility:e.when?void 0:"hidden"}}},{key:"getTop",value:function(e){for(;void 0===e.offsetTop;)e=e.parentNode;for(var t=e.offsetTop;e.offsetParent;t+=e.offsetTop)e=e.offsetParent;return t}}]),t}();m.propTypes=f,m.defaultProps={fraction:.2,refProp:"ref"},m.contextTypes=h,m.displayName="RevealBase",t.default=m,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){var n=t.left,r=t.right,o=t.up,i=t.down,a=t.top,s=t.bottom,l=t.mirror,c=t.opposite,d=(n?1:0)|(r?2:0)|(a||i?4:0)|(s||o?8:0)|(l?16:0)|(c?32:0)|(e?64:0);if(p.hasOwnProperty(d))return p[d];if(!l!=!(e&&c)){var f=[r,n,s,a,i,o];n=f[0],r=f[1],a=f[2],s=f[3],o=f[4],i=f[5]}var h,m=n||r,y=a||s||o||i,g=void 0,b=void 0,v=void 0,_=void 0,S=void 0,E=void 0,w=void 0,O=void 0,C=void 0,k=void 0,T=void 0,P=void 0,x=void 0;return e?(v=m?(r?"-":"")+"20px":0,_=y?(o||s?"":"-")+"10px":"0",S=(i||a?"":"-")+"20px",P=m?(n?"-":"")+"2000px":"0",x=y?(i||a?"-":"")+"2000px":"0"):(g=m?(n?"-":"")+"3000px":"0",b=y?(i||a?"-":"")+"3000px":"0",E=m?(r?"-":"")+"25px":"0",w=y?(o||s?"-":"")+"25px":"0",O=m?(n?"-":"")+"10px":"0",C=y?(i||a?"-":"")+"10px":"0",k=m?(r?"-":"")+"5px":"0",T=y?(o||s?"-":"")+"5px":"0"),h=m||y?e?"\n        20% {\n          transform: translate3d("+v+", "+_+", 0);\n          }\n        "+(y?"40%, 45% {\n            opacity: 1;\n            transform: translate3d(0, "+S+", 0);\n          }":"")+"\n          to {\n            opacity: 0;\n            transform: translate3d("+P+", "+x+", 0);\n        }\n      ":"from, 60%, 75%, 90%, to {\n        animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);\n      }\n      from {\n        opacity: 0;\n        transform: translate3d("+g+", "+b+", 0);\n      }\n      60% {\n        opacity: 1;\n        transform: translate3d("+E+", "+w+", 0);\n      }\n      75% {\n        transform: translate3d("+O+", "+C+", 0);\n      }\n      90% {\n        transform: translate3d("+k+", "+T+", 0);\n      }\n      to {\n        transform: none;\n      }":e?"20% {\n          transform: scale3d(.9, .9, .9);\n        }\n        50%, 55% {\n          opacity: 1;\n          transform: scale3d(1.1, 1.1, 1.1);\n        }\n        to {\n          opacity: 0;\n          transform: scale3d(.3, .3, .3);\n      }":"from, 20%, 40%, 60%, 80%, to {\n        animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);\n      }\n      0% {\n        opacity: 0;\n        transform: scale3d(.3, .3, .3);\n      }\n      20% {\n        transform: scale3d(1.1, 1.1, 1.1);\n      }\n      40% {\n        transform: scale3d(.9, .9, .9);\n      }\n      60% {\n        opacity: 1;\n        transform: scale3d(1.03, 1.03, 1.03);\n      }\n      80% {\n        transform: scale3d(.97, .97, .97);\n      }\n      to {\n        opacity: 1;\n        transform: scale3d(1, 1, 1);\n      }",p[d]=(0,u.animation)(h),p[d]}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.defaults,t=e.children,n=(e.out,e.forever),o=e.timeout,i=e.duration,a=void 0===i?u.defaults.duration:i,s=e.delay,c=void 0===s?u.defaults.delay:s,p=e.count,d=void 0===p?u.defaults.count:p,f=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children","out","forever","timeout","duration","delay","count"]),h={make:r,duration:void 0===o?a:o,delay:c,forever:n,count:d,style:{animationFillMode:"both"},reverse:f.left};return(0,l.default)(f,h,h,t)}Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(4),s=n(793),l=(i=s)&&i.__esModule?i:{default:i},u=n(790),c={out:a.bool,left:a.bool,right:a.bool,top:a.bool,bottom:a.bool,mirror:a.bool,opposite:a.bool,duration:a.number,timeout:a.number,delay:a.number,count:a.number,forever:a.bool},p={};o.propTypes=c,t.default=o,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){var n=t.left,r=t.right,o=t.up,i=t.down,a=t.top,s=t.bottom,l=t.big,c=t.mirror,d=t.opposite,f=(n?1:0)|(r?2:0)|(a||i?4:0)|(s||o?8:0)|(c?16:0)|(d?32:0)|(e?64:0)|(l?128:0);if(p.hasOwnProperty(f))return p[f];if(!c!=!(e&&d)){var h=[r,n,s,a,i,o];n=h[0],r=h[1],a=h[2],s=h[3],o=h[4],i=h[5]}var m=l?"2000px":"100%",y=n?"-"+m:r?m:"0",g=i||a?"-"+m:o||s?m:"0";return p[f]=(0,u.animation)("\n    "+(e?"to":"from")+" {opacity: 0;transform: translate3d("+y+", "+g+", 0) rotate3d(0, 0, 1, -120deg);}\n\t  "+(e?"from":"to")+" {opacity: 1;transform: none}\n  "),p[f]}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.defaults,t=e.children,n=(e.out,e.forever),o=e.timeout,i=e.duration,a=void 0===i?u.defaults.duration:i,l=e.delay,c=void 0===l?u.defaults.delay:l,p=e.count,d=void 0===p?u.defaults.count:p,f=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children","out","forever","timeout","duration","delay","count"]),h={make:r,duration:void 0===o?a:o,delay:c,forever:n,count:d,style:{animationFillMode:"both"}};return(0,s.default)(f,h,h,t)}Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(793),s=(i=a)&&i.__esModule?i:{default:i},l=n(4),u=n(790),c={out:l.bool,left:l.bool,right:l.bool,top:l.bool,bottom:l.bool,big:l.bool,mirror:l.bool,opposite:l.bool,duration:l.number,timeout:l.number,delay:l.number,count:l.number,forever:l.bool},p={};o.propTypes=c,t.default=o,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){var n=t.left,r=t.right,o=t.up,i=t.down,a=t.top,s=t.bottom,l=t.big,c=t.mirror,d=t.opposite,f=(n?1:0)|(r?2:0)|(a||i?4:0)|(s||o?8:0)|(c?16:0)|(d?32:0)|(e?64:0)|(l?128:0);if(p.hasOwnProperty(f))return p[f];var h=n||r||o||i||a||s,m=void 0,y=void 0;if(h){if(!c!=!(e&&d)){var g=[r,n,s,a,i,o];n=g[0],r=g[1],a=g[2],s=g[3],o=g[4],i=g[5]}var b=l?"2000px":"100%";m=n?"-"+b:r?b:"0",y=i||a?"-"+b:o||s?b:"0"}return p[f]=(0,u.animation)((e?"to":"from")+" {"+(h?" transform: translate3d("+m+", "+y+", 0);":"")+"}\n     "+(e?"from":"to")+" {transform: none;} "),p[f]}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.defaults,t=e.children,n=(e.out,e.forever),o=e.timeout,i=e.duration,a=void 0===i?u.defaults.duration:i,s=e.delay,c=void 0===s?u.defaults.delay:s,p=e.count,d=void 0===p?u.defaults.count:p,f=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children","out","forever","timeout","duration","delay","count"]),h={make:r,duration:void 0===o?a:o,delay:c,forever:n,count:d,style:{animationFillMode:"both"},reverse:f.left};return(0,l.default)(f,h,h,t)}Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(4),s=n(793),l=(i=s)&&i.__esModule?i:{default:i},u=n(790),c={out:a.bool,left:a.bool,right:a.bool,top:a.bool,bottom:a.bool,big:a.bool,mirror:a.bool,opposite:a.bool,duration:a.number,timeout:a.number,delay:a.number,count:a.number,forever:a.bool},p={};o.propTypes=c,t.default=o,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){var n=t.left,r=t.right,o=t.top,i=t.bottom,a=t.x,s=t.y,l=t.mirror,c=t.opposite,d=(n?1:0)|(r||s?2:0)|(o||a?4:0)|(i?8:0)|(l?16:0)|(c?32:0)|(e?64:0);if(p.hasOwnProperty(d))return p[d];if(!l!=!(e&&c)){var f=[r,n,i,o,s,a];n=f[0],r=f[1],o=f[2],i=f[3],a=f[4],s=f[5]}var h=void 0;if(a||s||n||r||o||i){var m=a||o||i?(i?"-":"")+"1":"0",y=s||r||n?(n?"-":"")+"1":"0";h=e?"from {\n          transform: perspective(400px);\n        }\n        30% {\n          transform: perspective(400px) rotate3d("+m+", "+y+", 0, -15deg);\n          opacity: 1;\n        }\n        to {\n          transform: perspective(400px) rotate3d("+m+", "+y+", 0, 90deg);\n          opacity: 0;\n        }":"from {\n          transform: perspective(400px) rotate3d("+m+", "+y+", 0, 90deg);\n          animation-timing-function: ease-in;\n          opacity: 0;\n        }\n        40% {\n          transform: perspective(400px) rotate3d("+m+", "+y+", 0, -20deg);\n          animation-timing-function: ease-in;\n        }\n        60% {\n          transform: perspective(400px) rotate3d("+m+", "+y+", 0, 10deg);\n          opacity: 1;\n        }\n        80% {\n          transform: perspective(400px) rotate3d("+m+", "+y+", 0, -5deg);\n        }\n        to {\n          transform: perspective(400px);\n        }"}else h="from {\n          transform: perspective(400px) rotate3d(0, 1, 0, -360deg);\n          animation-timing-function: ease-out;\n          opacity: "+(e?"1":"0")+";\n        }\n        40% {\n          transform: perspective(400px) translate3d(0, 0, 150px) rotate3d(0, 1, 0, -190deg);\n          animation-timing-function: ease-out;\n        }\n        50% {\n          transform: perspective(400px) translate3d(0, 0, 150px) rotate3d(0, 1, 0, -170deg);\n          animation-timing-function: ease-in;\n        }\n        to {\n          transform: perspective(400px);\n          animation-timing-function: ease-in;\n          opacity: "+(e?"0":"1")+";\n        }";return p[d]=(0,u.animation)(h),p[d]}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.defaults,t=e.children,n=(e.out,e.forever),o=e.timeout,i=e.duration,a=void 0===i?u.defaults.duration:i,s=e.delay,c=void 0===s?u.defaults.delay:s,p=e.count,d=void 0===p?u.defaults.count:p,f=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children","out","forever","timeout","duration","delay","count"]),h={make:r,duration:void 0===o?a:o,delay:c,forever:n,count:d,style:{animationFillMode:"both",backfaceVisibility:"visible"}};return(0,l.default)(f,h,h,t)}Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(4),s=n(793),l=(i=s)&&i.__esModule?i:{default:i},u=n(790),c={out:a.bool,left:a.bool,right:a.bool,top:a.bool,bottom:a.bool,mirror:a.bool,opposite:a.bool,duration:a.number,timeout:a.number,delay:a.number,count:a.number,forever:a.bool},p={};o.propTypes=c,t.default=o,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){var n=t.left,r=t.right,o=t.up,i=t.down,a=t.top,s=t.bottom,l=t.mirror,c=t.opposite,d=(n?1:0)|(r?2:0)|(a||i?4:0)|(s||o?8:0)|(l?16:0)|(c?32:0)|(e?64:0);if(p.hasOwnProperty(d))return p[d];if(!l!=!(e&&c)){var f=[r,n,s,a,i,o];n=f[0],r=f[1],a=f[2],s=f[3],o=f[4],i=f[5]}var h="-200deg",m="center";return(i||a)&&n&&(h="-45deg"),((i||a)&&r||(o||s)&&n)&&(h="45deg"),(o||s)&&r&&(h="-90deg"),(n||r)&&(m=(n?"left":"right")+" bottom"),p[d]=(0,u.animation)("\n    "+(e?"to":"from")+" { opacity: 0; transform-origin: "+m+"; transform: rotate3d(0, 0, 1, "+h+");}\n    "+(e?"from":"to")+" { opacity: 1; transform-origin: "+m+"; transform: none;}\n  "),p[d]}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.defaults,t=e.children,n=(e.out,e.forever),o=e.timeout,i=e.duration,a=void 0===i?u.defaults.duration:i,s=e.delay,c=void 0===s?u.defaults.delay:s,p=e.count,d=void 0===p?u.defaults.count:p,f=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children","out","forever","timeout","duration","delay","count"]),h={make:r,duration:void 0===o?a:o,delay:c,forever:n,count:d,style:{animationFillMode:"both"}};return(0,l.default)(f,h,h,t)}Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(4),s=n(793),l=(i=s)&&i.__esModule?i:{default:i},u=n(790),c={out:a.bool,left:a.bool,right:a.bool,top:a.bool,bottom:a.bool,mirror:a.bool,opposite:a.bool,duration:a.number,timeout:a.number,delay:a.number,count:a.number,forever:a.bool},p={};o.propTypes=c,t.default=o,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){var n=t.left,r=t.right,o=t.mirror,i=t.opposite,a=(n?1:0)|(r?2:0)|(o?16:0)|(i?32:0)|(e?64:0);if(p.hasOwnProperty(a))return p[a];if(!o!=!(e&&i)){var s=[r,n];n=s[0],r=s[1]}var l=n?"-100%":r?"100%":"0",c=e?"from {\n        opacity: 1;\n      }\n      to {\n        transform: translate3d("+l+", 0, 0) skewX(30deg);\n        opacity: 0;\n      }\n    ":"from {\n        transform: translate3d("+l+", 0, 0) skewX(-30deg);\n        opacity: 0;\n      }\n      60% {\n        transform: skewX(20deg);\n        opacity: 1;\n      }\n      80% {\n        transform: skewX(-5deg);\n        opacity: 1;\n      }\n      to {\n        transform: none;\n        opacity: 1;\n      }";return p[a]=(0,u.animation)(c),p[a]}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.defaults,t=e.children,n=(e.out,e.forever),o=e.timeout,i=e.duration,a=void 0===i?u.defaults.duration:i,l=e.delay,c=void 0===l?u.defaults.delay:l,p=e.count,d=void 0===p?u.defaults.count:p,f=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children","out","forever","timeout","duration","delay","count"]),h={make:r,duration:void 0===o?a:o,delay:c,forever:n,count:d,style:{animationFillMode:"both"}};return f.left,f.right,f.mirror,f.opposite,(0,s.default)(f,h,h,t)}Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(793),s=(i=a)&&i.__esModule?i:{default:i},l=n(4),u=n(790),c={out:l.bool,left:l.bool,right:l.bool,mirror:l.bool,opposite:l.bool,duration:l.number,timeout:l.number,delay:l.number,count:l.number,forever:l.bool},p={};o.propTypes=c,t.default=o,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){var n=t.left,r=t.right,o=t.up,i=t.down,a=t.top,s=t.bottom,l=t.mirror,c=t.opposite,d=(n?1:0)|(r?2:0)|(a||i?4:0)|(s||o?8:0)|(l?16:0)|(c?32:0)|(e?64:0);if(p.hasOwnProperty(d))return p[d];if(!l!=!(e&&c)){var f=[r,n,s,a,i,o];n=f[0],r=f[1],a=f[2],s=f[3],o=f[4],i=f[5]}var h=n||r,m=a||s||o||i,y=void 0;return h||m?e?y="40% {\n          opacity: 1;\n          transform: scale3d(.475, .475, .475) translate3d("+(h?(n?"":"-")+"42px":"0")+", "+(m?(i||a?"-":"")+"60px":"0")+", 0);\n        }\n        to {\n          opacity: 0;\n          transform: scale(.1) translate3d("+(h?(r?"":"-")+"2000px":"0")+", "+(m?(o||s?"":"-")+"2000px":"0")+", 0);\n          transform-origin: "+(m?"center bottom":(n?"left":"right")+" center")+";\n        }":y="from {\n          opacity: 0;\n          transform: scale3d(.1, .1, .1) translate3d("+(h?(n?"-":"")+"1000px":"0")+", "+(m?(i||a?"-":"")+"1000px":"0")+", 0);\n          animation-timing-function: cubic-bezier(0.550, 0.055, 0.675, 0.190);\n        }\n        60% {\n          opacity: 1;\n          transform: scale3d(.475, .475, .475) translate3d("+(h?(r?"-":"")+"10px":"0")+", "+(m?(o||s?"-":"")+"60px":"0")+", 0);\n          animation-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1);\n        }":y=(e?"to":"from")+" {opacity: 0; transform: scale3d(.1, .1, .1);} "+(e?"from":"to")+" { opacity: 1; transform: none;}",p[d]=(0,u.animation)(y),p[d]}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.defaults,t=e.children,n=(e.out,e.forever),o=e.timeout,i=e.duration,a=void 0===i?u.defaults.duration:i,s=e.delay,c=void 0===s?u.defaults.delay:s,p=e.count,d=void 0===p?u.defaults.count:p,f=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children","out","forever","timeout","duration","delay","count"]),h={make:r,duration:void 0===o?a:o,delay:c,forever:n,count:d,style:{animationFillMode:"both"},reverse:f.left};return(0,l.default)(f,h,h,t)}Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(4),s=n(793),l=(i=s)&&i.__esModule?i:{default:i},u=n(790),c={out:a.bool,left:a.bool,right:a.bool,top:a.bool,bottom:a.bool,mirror:a.bool,opposite:a.bool,duration:a.number,timeout:a.number,delay:a.number,count:a.number,forever:a.bool},p={};o.propTypes=c,t.default=o,e.exports=t.default},function(e,t,n){},function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__3ybLz",framedImage:"styles-module__framedImage__1LRLJ",optionGroup:"styles-module__optionGroup__2f4nW",groupHeader:"styles-module__groupHeader__1pzK0",optionWrapper:"styles-module__optionWrapper__10YFL",optionLabelWrapper:"styles-module__optionLabelWrapper__Nj0Ws"}},function(e,t,n){"use strict";n.d(t,"a",function(){return b});var r=n(0),o=n(9),i=n(15),a=n(2),s=n(5),l=n.n(s),u=n(6),c=n(66);function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var y=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":m(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},g=n(194),b=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=d(this,f(t).apply(this,arguments))).clipboards=[],e}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){var e=this;this.props.urlPromise.then(function(t){e.urlData=t,setTimeout(function(){e.initializeClipboards()},0)},function(){})}},{key:"showThumb",value:function(e){e.target.className="fa fa-thumbs-up"}},{key:"initializeClipboards",value:function(){this.clipboards.push(new g(this.sessionButton,{text:function(){return this.urlData.fullUrl}.bind(this),container:this.container})),this.urlData&&this.urlData.bitlyUrl&&this.clipboards.push(new g(this.bitlyButton,{text:function(){return this.urlData.bitlyUrl}.bind(this),container:this.container}))}},{key:"componentWillUnmount",value:function(){this.clipboards.forEach(function(e){return e.destroy()})}},{key:"render",value:function(){var e=this;return r.createElement(i.Modal,{show:!0,onHide:this.props.onHide},r.createElement(i.Modal.Header,{closeButton:!0},r.createElement(i.Modal.Title,null,this.props.title)),r.createElement(i.Modal.Body,{style:{minHeight:70}},r.createElement(c.a,{size:"big",center:!0,style:{top:32},isLoading:!this.urlData}),r.createElement("div",{className:l()({hidden:!this.urlData}),ref:function(t){return e.container=t}},r.createElement("form",null,r.createElement("div",{className:"form-group"},r.createElement("p",null,this.props.description),r.createElement("div",{className:"input-group"},r.createElement("input",{type:"text",className:"form-control",value:this.urlData?this.urlData.fullUrl:""}),r.createElement("div",{className:"input-group-addon"},r.createElement("a",{ref:function(t){return e.sessionButton=t},onClick:this.showThumb},r.createElement("i",{className:"fa fa-clipboard"}))))),this.urlData&&this.urlData.bitlyUrl&&r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"exampleInputAmount"},"Shortened URL"),r.createElement("div",{className:"input-group"},r.createElement("input",{type:"text",className:"form-control",value:this.urlData?this.urlData.bitlyUrl:""}),r.createElement("div",{className:"input-group-addon"},r.createElement("a",{onClick:this.showThumb,ref:function(t){return e.bitlyButton=t}},r.createElement("i",{className:"fa fa-clipboard"})))))))))}}])&&p(n.prototype,o),a&&p(n,a),t}();y([a.observable],b.prototype,"urlData",void 0),y([u.default],b.prototype,"showThumb",null),y([u.default],b.prototype,"initializeClipboards",null),b=y([o.observer],b)},function(e,t,n){"use strict";(function(e){var r=n(0),o=n(66),i=n(9),a=n(2),s=n(1089),l=n(1),u=n.n(l),c=n(6),p=n(3),d=n(110),f=n(289),h=n(47),m=n(23),y=n(192),g=n(30),b=n(298),v=n(1088);function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var C,k=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":O(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},T="comparison-tab-overlap-svg";!function(e){e[e.Upset=0]="Upset",e[e.Venn=1]="Venn"}(C||(C={}));var P=function(t){function n(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(e=S(this,E(n).apply(this,arguments))).plotExists=!1,e.vennFailed=!1,e.tabUI=Object(d.a)({await:function(){return e.props.store._selectedGroups.isComplete&&e.props.store._selectedGroups.result.length<2?[e.props.store._selectedGroups]:[e.props.store._selectedGroups,e.overlapUI]},render:function(){var t=[];return e.props.store._selectedGroups.result.length<2?t.push(r.createElement("span",null,h.f)):(t.push(r.createElement(b.a,{overlapTabMode:!0,store:e.props.store})),e.vennFailed&&t.push(r.createElement("div",{className:"alert alert-info"},"We couldn't find a good Venn diagram layout, so showing UpSet diagram instead.")),t.push(e.overlapUI.component)),r.createElement("div",{"data-test":"ComparisonPageOverlapTabDiv"},t)},renderPending:function(){return r.createElement(o.a,{isLoading:!0,center:!0,size:"big"})},renderError:function(){return r.createElement(f.a,null)}}),e.plotType=Object(p.T)({await:function(){return[e.props.store._selectedGroups]},invoke:function(){return e.vennFailed||e.props.store._selectedGroups.result.length>3?Promise.resolve(C.Upset):Promise.resolve(C.Venn)}}),e.sampleGroupsWithCases=Object(p.T)({await:function(){return[e.props.store._selectedGroups,e.props.store.sampleMap]},invoke:function(){var t=e.props.store.sampleMap.result,n=u.a.map(e.props.store._selectedGroups.result,function(e){var n=Object(h.w)([e]).map(function(e){return t.get({studyId:e.studyId,sampleId:e.sampleId})});return{uid:e.uid,cases:u.a.map(n,function(e){return e.uniqueSampleKey})}});return Promise.resolve(n)}},[]),e.patientGroupsWithCases=Object(p.T)({await:function(){return[e.props.store._selectedGroups,e.props.store.sampleMap]},invoke:function(){var t=e.props.store.sampleMap.result,n=u.a.map(e.props.store._selectedGroups.result,function(e){var n=Object(h.w)([e]).map(function(e){return t.get({studyId:e.studyId,sampleId:e.sampleId})});return{uid:e.uid,cases:u.a.uniq(u.a.map(n,function(e){return e.uniquePatientKey}))}});return Promise.resolve(n)}},[]),e.activeSamples=Object(p.T)({await:function(){return[e.props.store._selectedGroups,e.props.store.sampleMap]},invoke:function(){var t=e.props.store.sampleMap.result,n=Object(h.w)(e.props.store._selectedGroups.result).map(function(e){return t.get(e)});return Promise.resolve(n)}}),e.samplesVennPartition=Object(p.T)({await:function(){return[e.props.store._selectedGroups,e.props.store.sampleMap,e.activeSamples]},invoke:function(){var t=e.props.store.sampleMap.result;return Promise.resolve(Object(h.C)(e.props.store._selectedGroups.result,function(e){return Object(h.w)([e])},function(e){return t.get({studyId:e.studyId,sampleId:e.sampleId}).uniqueSampleKey},e.activeSamples.result.map(function(e){return e.uniqueSampleKey})))}}),e.patientsVennPartition=Object(p.T)({await:function(){return[e.props.store._selectedGroups,e.props.store.patientToSamplesSet,e.activeSamples]},invoke:function(){var t=e.props.store.patientToSamplesSet.result;return Promise.resolve(Object(h.C)(e.props.store._selectedGroups.result,function(e){return Object(g.Y)([e])},function(e){return t.get({studyId:e.studyId,patientId:e.patientId})[0].uniquePatientKey},u.a.uniq(e.activeSamples.result.map(function(e){return e.uniquePatientKey}))))}}),e.uidToGroup=Object(p.T)({await:function(){return[e.props.store._selectedGroups]},invoke:function(){return Promise.resolve(u.a.keyBy(e.props.store._selectedGroups.result,function(e){return e.uid}))}}),e.plot=Object(d.a)({await:function(){return[e.plotType,e.samplesVennPartition,e.patientsVennPartition,e.sampleGroupsWithCases,e.patientGroupsWithCases,e.uidToGroup]},render:function(){var t=null;switch(e.plotType.result){case C.Upset:t=r.createElement(v.a,{store:e.props.store,sideBySide:e.areUpsetPlotsSidebySide,maxWidth:e.maxWidth,samplesVennPartition:e.samplesVennPartition.result,patientsVennPartition:e.patientsVennPartition.result,uidToGroup:e.uidToGroup.result});break;case C.Venn:t=r.createElement(s.a,{svgId:T,sampleGroups:e.sampleGroupsWithCases.result,patientGroups:e.patientGroupsWithCases.result,uidToGroup:e.uidToGroup.result,store:e.props.store,onLayoutFailure:e.onVennLayoutFailure});break;default:return r.createElement("span",null,"Not implemented yet")}return t},renderPending:function(){return r.createElement(o.a,{isLoading:!0,size:"big"})},renderError:function(){return r.createElement(f.a,null)}}),e.overlapUI=Object(d.a)({await:function(){return[e.plot]},render:function(){return r.createElement("div",{"data-test":"ComparisonPageOverlapTabContent",className:"borderedChart posRelative"},e.plotExists&&r.createElement(p.e,{getSvg:e.getSvg,getData:e.props.store.getGroupsDownloadDataPromise,buttons:["SVG","PNG","PDF","Data"],filename:"overlap",dontFade:!0,style:{position:"absolute",right:10,top:10},type:"button"}),r.createElement("div",{style:{position:"relative",display:"inline-block"}},e.plot.component))},renderPending:function(){return r.createElement(o.a,{isLoading:!0,centerRelativeToContainer:!0,size:"big"})},renderError:function(){return r.createElement(f.a,null)}}),e}var i,a,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(n,r["Component"]),i=n,(a=[{key:"componentDidUpdate",value:function(){this.plotExists=!!this.getSvg()}},{key:"onVennLayoutFailure",value:function(){this.vennFailed=!0}},{key:"getSvg",value:function(){if(this.plotType.result===C.Upset){var t=m.findDOMNode(this),n=document.createElementNS("http://www.w3.org/2000/svg","svg"),r=e(t).find("svg"),o=r[0].cloneNode(!0),i=r[1].cloneNode(!0);e(t).find("svg");var a=0,s=0;return n.appendChild(o),this.areUpsetPlotsSidebySide?(i.setAttribute("x","".concat(e(o).width())),a=Math.max(e(o).height(),e(i).height()),s=e(o).width()+e(i).width()):(i.setAttribute("y","".concat(e(o).height())),a=e(o).height()+e(i).height(),s=Math.max(e(o).width(),e(i).width())),e(n).attr("height",a),e(n).attr("width",s),e(n).css({height:a,width:s}),n.appendChild(i),n}return document.getElementById(T)}},{key:"render",value:function(){return r.createElement("div",{className:"inlineBlock"},this.tabUI.component)}},{key:"areUpsetPlotsSidebySide",get:function(){return!this.samplesVennPartition.isComplete||!this.patientsVennPartition.isComplete||this.samplesVennPartition.result.length+this.patientsVennPartition.result.length<=100}},{key:"maxWidth",get:function(){return y.a.size.width-80}}])&&_(i.prototype,a),l&&_(i,l),n}();k([a.observable],P.prototype,"plotExists",void 0),k([a.observable],P.prototype,"vennFailed",void 0),k([c.default,a.action],P.prototype,"onVennLayoutFailure",null),k([c.default],P.prototype,"getSvg",null),k([a.computed],P.prototype,"areUpsetPlotsSidebySide",null),k([a.computed],P.prototype,"maxWidth",null),P=k([i.observer],P),t.a=P}).call(this,n(17))},function(e,t,n){!function(e){"use strict";function t(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=0;return t}function n(e,t){for(var n=0,r=0;r<e.length;++r)n+=e[r]*t[r];return n}function r(e){return Math.sqrt(n(e,e))}function o(e,t,n){for(var r=0;r<t.length;++r)e[r]=t[r]*n}function i(e,t,n,r,o){for(var i=0;i<e.length;++i)e[i]=t*n[i]+r*o[i]}function a(e,t,r,o,a,s,l){var u=r.fx,c=n(r.fxprime,t),p=u,d=u,f=c,h=0;function m(d,h,m){for(var y=0;y<16;++y)if(a=(d+h)/2,i(o.x,1,r.x,a,t),p=o.fx=e(o.x,o.fxprime),f=n(o.fxprime,t),p>u+s*a*c||p>=m)h=a;else{if(Math.abs(f)<=-l*c)return a;f*(h-d)>=0&&(h=d),d=a,m=p}return 0}a=a||1,s=s||1e-6,l=l||.1;for(var y=0;y<10;++y){if(i(o.x,1,r.x,a,t),p=o.fx=e(o.x,o.fxprime),f=n(o.fxprime,t),p>u+s*a*c||y&&p>=d)return m(h,a,d);if(Math.abs(f)<=-l*c)return a;if(f>=0)return m(a,h,p);d=p,h=a,a*=2}return a}e.bisect=function(e,t,n,r){var o=(r=r||{}).maxIterations||100,i=r.tolerance||1e-10,a=e(t),s=e(n),l=n-t;if(a*s>0)throw"Initial bisect points must have opposite signs";if(0===a)return t;if(0===s)return n;for(var u=0;u<o;++u){var c=t+(l/=2),p=e(c);if(p*a>=0&&(t=c),Math.abs(l)<i||0===p)return c}return t+l},e.nelderMead=function(e,t,n){var r,o=(n=n||{}).maxIterations||200*t.length,a=n.nonZeroDelta||1.05,s=n.zeroDelta||.001,l=n.minErrorDelta||1e-6,u=n.minErrorDelta||1e-5,c=void 0!==n.rho?n.rho:1,p=void 0!==n.chi?n.chi:2,d=void 0!==n.psi?n.psi:-.5,f=void 0!==n.sigma?n.sigma:.5,h=t.length,m=new Array(h+1);m[0]=t,m[0].fx=e(t),m[0].id=0;for(var y=0;y<h;++y){var g=t.slice();g[y]=g[y]?g[y]*a:s,m[y+1]=g,m[y+1].fx=e(g),m[y+1].id=y+1}function b(e){for(var t=0;t<e.length;t++)m[h][t]=e[t];m[h].fx=e.fx}for(var v=function(e,t){return e.fx-t.fx},_=t.slice(),S=t.slice(),E=t.slice(),w=t.slice(),O=0;O<o;++O){if(m.sort(v),n.history){var C=m.map(function(e){var t=e.slice();return t.fx=e.fx,t.id=e.id,t});C.sort(function(e,t){return e.id-t.id}),n.history.push({x:m[0].slice(),fx:m[0].fx,simplex:C})}for(r=0,y=0;y<h;++y)r=Math.max(r,Math.abs(m[0][y]-m[1][y]));if(Math.abs(m[0].fx-m[h].fx)<l&&r<u)break;for(y=0;y<h;++y){_[y]=0;for(var k=0;k<h;++k)_[y]+=m[k][y];_[y]/=h}var T=m[h];if(i(S,1+c,_,-c,T),S.fx=e(S),S.fx<m[0].fx)i(w,1+p,_,-p,T),w.fx=e(w),w.fx<S.fx?b(w):b(S);else if(S.fx>=m[h-1].fx){var P=!1;if(S.fx>T.fx?(i(E,1+d,_,-d,T),E.fx=e(E),E.fx<T.fx?b(E):P=!0):(i(E,1-d*c,_,d*c,T),E.fx=e(E),E.fx<S.fx?b(E):P=!0),P){if(f>=1)break;for(y=1;y<m.length;++y)i(m[y],1-f,m[0],f,m[y]),m[y].fx=e(m[y])}}else b(S)}return m.sort(v),{fx:m[0].fx,x:m[0]}},e.conjugateGradient=function(e,t,s){var l,u,c,p={x:t.slice(),fx:0,fxprime:t.slice()},d={x:t.slice(),fx:0,fxprime:t.slice()},f=t.slice(),h=1;c=(s=s||{}).maxIterations||20*t.length,p.fx=e(p.x,p.fxprime),o(l=p.fxprime.slice(),p.fxprime,-1);for(var m=0;m<c;++m){if(h=a(e,l,p,d,h),s.history&&s.history.push({x:p.x.slice(),fx:p.fx,fxprime:p.fxprime.slice(),alpha:h}),h){i(f,1,d.fxprime,-1,p.fxprime);var y=n(p.fxprime,p.fxprime),g=Math.max(0,n(f,d.fxprime)/y);i(l,g,l,-1,d.fxprime),u=p,p=d,d=u}else o(l,p.fxprime,-1);if(r(p.fxprime)<=1e-5)break}return s.history&&s.history.push({x:p.x.slice(),fx:p.fx,fxprime:p.fxprime.slice(),alpha:h}),p},e.gradientDescent=function(e,t,n){for(var o=(n=n||{}).maxIterations||100*t.length,a=n.learnRate||.001,s={x:t.slice(),fx:0,fxprime:t.slice()},l=0;l<o&&(s.fx=e(s.x,s.fxprime),n.history&&n.history.push({x:s.x.slice(),fx:s.fx,fxprime:s.fxprime.slice()}),i(s.x,1,s.x,-a,s.fxprime),!(r(s.fxprime)<=1e-5));++l);return s},e.gradientDescentLineSearch=function(e,t,n){n=n||{};var i,s={x:t.slice(),fx:0,fxprime:t.slice()},l={x:t.slice(),fx:0,fxprime:t.slice()},u=n.maxIterations||100*t.length,c=n.learnRate||1,p=t.slice(),d=n.c1||.001,f=n.c2||.1,h=[];if(n.history){var m=e;e=function(e,t){return h.push(e.slice()),m(e,t)}}s.fx=e(s.x,s.fxprime);for(var y=0;y<u&&(o(p,s.fxprime,-1),c=a(e,p,s,l,c,d,f),n.history&&(n.history.push({x:s.x.slice(),fx:s.fx,fxprime:s.fxprime.slice(),functionCalls:h,learnRate:c,alpha:c}),h=[]),i=s,s=l,l=i,!(0===c||r(s.fxprime)<1e-5));++y);return s},e.zeros=t,e.zerosM=function(e,n){return t(e).map(function(){return t(n)})},e.norm2=r,e.weightedSum=i,e.scale=o}(t)},function(e,t,n){!function(e,t,n){"use strict";var r=1e-10;function o(e,t){var n,o=function(e){for(var t=[],n=0;n<e.length;++n)for(var r=n+1;r<e.length;++r)for(var o=l(e[n],e[r]),i=0;i<o.length;++i){var a=o[i];a.parentIndex=[n,r],t.push(a)}return t}(e),s=o.filter(function(t){return function(e,t){for(var n=0;n<t.length;++n)if(a(e,t[n])>t[n].radius+r)return!1;return!0}(t,e)}),c=0,p=0,d=[];if(s.length>1){var f=u(s);for(n=0;n<s.length;++n){var h=s[n];h.angle=Math.atan2(h.x-f.x,h.y-f.y)}s.sort(function(e,t){return t.angle-e.angle});var m=s[s.length-1];for(n=0;n<s.length;++n){var y=s[n];p+=(m.x+y.x)*(y.y-m.y);for(var g={x:(y.x+m.x)/2,y:(y.y+m.y)/2},b=null,v=0;v<y.parentIndex.length;++v)if(m.parentIndex.indexOf(y.parentIndex[v])>-1){var _=e[y.parentIndex[v]],S=Math.atan2(y.x-_.x,y.y-_.y),E=Math.atan2(m.x-_.x,m.y-_.y),w=E-S;w<0&&(w+=2*Math.PI);var O=E-w/2,C=a(g,{x:_.x+_.radius*Math.sin(O),y:_.y+_.radius*Math.cos(O)});C>2*_.radius&&(C=2*_.radius),(null===b||b.width>C)&&(b={circle:_,width:C,p1:y,p2:m})}null!==b&&(d.push(b),c+=i(b.circle.radius,b.width),m=y)}}else{var k=e[0];for(n=1;n<e.length;++n)e[n].radius<k.radius&&(k=e[n]);var T=!1;for(n=0;n<e.length;++n)if(a(e[n],k)>Math.abs(k.radius-e[n].radius)){T=!0;break}T?c=p=0:(c=k.radius*k.radius*Math.PI,d.push({circle:k,p1:{x:k.x,y:k.y+k.radius},p2:{x:k.x-r,y:k.y+k.radius},width:2*k.radius}))}return p/=2,t&&(t.area=c+p,t.arcArea=c,t.polygonArea=p,t.arcs=d,t.innerPoints=s,t.intersectionPoints=o),c+p}function i(e,t){return e*e*Math.acos(1-t/e)-(e-t)*Math.sqrt(t*(2*e-t))}function a(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}function s(e,t,n){if(n>=e+t)return 0;if(n<=Math.abs(e-t))return Math.PI*Math.min(e,t)*Math.min(e,t);var r=e-(n*n-t*t+e*e)/(2*n),o=t-(n*n-e*e+t*t)/(2*n);return i(e,r)+i(t,o)}function l(e,t){var n=a(e,t),r=e.radius,o=t.radius;if(n>=r+o||n<=Math.abs(r-o))return[];var i=(r*r-o*o+n*n)/(2*n),s=Math.sqrt(r*r-i*i),l=e.x+i*(t.x-e.x)/n,u=e.y+i*(t.y-e.y)/n,c=-(t.y-e.y)*(s/n),p=-(t.x-e.x)*(s/n);return[{x:l+c,y:u-p},{x:l-c,y:u+p}]}function u(e){for(var t={x:0,y:0},n=0;n<e.length;++n)t.x+=e[n].x,t.y+=e[n].y;return t.x/=e.length,t.y/=e.length,t}function c(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=0;return t}function p(e,t){return c(e).map(function(){return c(t)})}function d(e,t){for(var n=0,r=0;r<e.length;++r)n+=e[r]*t[r];return n}function f(e){return Math.sqrt(d(e,e))}function h(e,t,n){for(var r=0;r<t.length;++r)e[r]=t[r]*n}function m(e,t,n,r,o){for(var i=0;i<e.length;++i)e[i]=t*n[i]+r*o[i]}function y(e,t,n){var r,o=(n=n||{}).maxIterations||200*t.length,i=n.nonZeroDelta||1.05,a=n.zeroDelta||.001,s=n.minErrorDelta||1e-6,l=n.minErrorDelta||1e-5,u=void 0!==n.rho?n.rho:1,c=void 0!==n.chi?n.chi:2,p=void 0!==n.psi?n.psi:-.5,d=void 0!==n.sigma?n.sigma:.5,f=t.length,h=new Array(f+1);h[0]=t,h[0].fx=e(t),h[0].id=0;for(var y=0;y<f;++y){var g=t.slice();g[y]=g[y]?g[y]*i:a,h[y+1]=g,h[y+1].fx=e(g),h[y+1].id=y+1}function b(e){for(var t=0;t<e.length;t++)h[f][t]=e[t];h[f].fx=e.fx}for(var v=function(e,t){return e.fx-t.fx},_=t.slice(),S=t.slice(),E=t.slice(),w=t.slice(),O=0;O<o;++O){if(h.sort(v),n.history){var C=h.map(function(e){var t=e.slice();return t.fx=e.fx,t.id=e.id,t});C.sort(function(e,t){return e.id-t.id}),n.history.push({x:h[0].slice(),fx:h[0].fx,simplex:C})}for(r=0,y=0;y<f;++y)r=Math.max(r,Math.abs(h[0][y]-h[1][y]));if(Math.abs(h[0].fx-h[f].fx)<s&&r<l)break;for(y=0;y<f;++y){_[y]=0;for(var k=0;k<f;++k)_[y]+=h[k][y];_[y]/=f}var T=h[f];if(m(S,1+u,_,-u,T),S.fx=e(S),S.fx<h[0].fx)m(w,1+c,_,-c,T),w.fx=e(w),w.fx<S.fx?b(w):b(S);else if(S.fx>=h[f-1].fx){var P=!1;if(S.fx>T.fx?(m(E,1+p,_,-p,T),E.fx=e(E),E.fx<T.fx?b(E):P=!0):(m(E,1-p*u,_,p*u,T),E.fx=e(E),E.fx<S.fx?b(E):P=!0),P){if(d>=1)break;for(y=1;y<h.length;++y)m(h[y],1-d,h[0],d,h[y]),h[y].fx=e(h[y])}}else b(S)}return h.sort(v),{fx:h[0].fx,x:h[0]}}function g(e,t,n,r,o,i,a){var s=n.fx,l=d(n.fxprime,t),u=s,c=s,p=l,f=0;function h(c,f,h){for(var y=0;y<16;++y)if(o=(c+f)/2,m(r.x,1,n.x,o,t),u=r.fx=e(r.x,r.fxprime),p=d(r.fxprime,t),u>s+i*o*l||u>=h)f=o;else{if(Math.abs(p)<=-a*l)return o;p*(f-c)>=0&&(f=c),c=o,h=u}return 0}o=o||1,i=i||1e-6,a=a||.1;for(var y=0;y<10;++y){if(m(r.x,1,n.x,o,t),u=r.fx=e(r.x,r.fxprime),p=d(r.fxprime,t),u>s+i*o*l||y&&u>=c)return h(f,o,c);if(Math.abs(p)<=-a*l)return o;if(p>=0)return h(o,f,u);c=u,f=o,o*=2}return o}function b(e,t,n){var r,o,i,a={x:t.slice(),fx:0,fxprime:t.slice()},s={x:t.slice(),fx:0,fxprime:t.slice()},l=t.slice(),u=1;i=(n=n||{}).maxIterations||20*t.length,a.fx=e(a.x,a.fxprime),h(r=a.fxprime.slice(),a.fxprime,-1);for(var c=0;c<i;++c){if(u=g(e,r,a,s,u),n.history&&n.history.push({x:a.x.slice(),fx:a.fx,fxprime:a.fxprime.slice(),alpha:u}),u){m(l,1,s.fxprime,-1,a.fxprime);var p=d(a.fxprime,a.fxprime),y=Math.max(0,d(l,s.fxprime)/p);m(r,y,r,-1,s.fxprime),o=a,a=s,s=o}else h(r,a.fxprime,-1);if(f(a.fxprime)<=1e-5)break}return n.history&&n.history.push({x:a.x.slice(),fx:a.fx,fxprime:a.fxprime.slice(),alpha:u}),a}function v(e,t){(t=t||{}).maxIterations=t.maxIterations||500;var n=t.initialLayout||E,r=t.lossFunction||O;e=function(e){e=e.slice();var t,n,r,o,i=[],a={};for(t=0;t<e.length;++t){var s=e[t];1==s.sets.length?i.push(s.sets[0]):2==s.sets.length&&(r=s.sets[0],o=s.sets[1],a[[r,o]]=!0,a[[o,r]]=!0)}for(i.sort(function(e,t){return e>t}),t=0;t<i.length;++t)for(r=i[t],n=t+1;n<i.length;++n)o=i[n],[r,o]in a||e.push({sets:[r,o],size:0});return e}(e);var o,i=n(e,t),a=[],s=[];for(o in i)i.hasOwnProperty(o)&&(a.push(i[o].x),a.push(i[o].y),s.push(o));for(var l=y(function(t){for(var n={},o=0;o<s.length;++o){var a=s[o];n[a]={x:t[2*o],y:t[2*o+1],radius:i[a].radius}}return r(n,e)},a,t),u=l.x,c=0;c<s.length;++c)o=s[c],i[o].x=u[2*c],i[o].y=u[2*c+1];return i}var _=1e-10;function S(e,t,n){return Math.min(e,t)*Math.min(e,t)*Math.PI<=n+_?Math.abs(e-t):function(e,t,n,r){var o=(r=r||{}).maxIterations||100,i=r.tolerance||1e-10,a=e(t),s=e(n),l=n-t;if(a*s>0)throw"Initial bisect points must have opposite signs";if(0===a)return t;if(0===s)return n;for(var u=0;u<o;++u){var c=t+(l/=2),p=e(c);if(p*a>=0&&(t=c),Math.abs(l)<i||0===p)return c}return t+l}(function(r){return s(e,t,r)-n},0,e+t)}function E(e,t){var n=w(e,t),r=t.lossFunction||O;if(e.length>=8){var o=function(e,t){var n,r=(t=t||{}).restarts||10,o=[],i={};for(n=0;n<e.length;++n){var a=e[n];1==a.sets.length&&(i[a.sets[0]]=o.length,o.push(a))}var s=function(e,t,n){var r=p(t.length,t.length),o=p(t.length,t.length);return e.filter(function(e){return 2==e.sets.length}).map(function(e){var i=n[e.sets[0]],a=n[e.sets[1]],s=S(Math.sqrt(t[i].size/Math.PI),Math.sqrt(t[a].size/Math.PI),e.size);r[i][a]=r[a][i]=s;var l=0;e.size+1e-10>=Math.min(t[i].size,t[a].size)?l=1:e.size<=1e-10&&(l=-1),o[i][a]=o[a][i]=l}),{distances:r,constraints:o}}(e,o,i),l=s.distances,u=s.constraints,d=f(l.map(f))/l.length;l=l.map(function(e){return e.map(function(e){return e/d})});var m,y,g=function(e,t){return function(e,t,n,r){var o,i=0;for(o=0;o<t.length;++o)t[o]=0;for(o=0;o<n.length;++o)for(var a=e[2*o],s=e[2*o+1],l=o+1;l<n.length;++l){var u=e[2*l],c=e[2*l+1],p=n[o][l],d=r[o][l],f=(u-a)*(u-a)+(c-s)*(c-s),h=Math.sqrt(f),m=f-p*p;d>0&&h<=p||d<0&&h>=p||(i+=2*m*m,t[2*o]+=4*m*(a-u),t[2*o+1]+=4*m*(s-c),t[2*l]+=4*m*(u-a),t[2*l+1]+=4*m*(c-s))}return i}(e,t,l,u)};for(n=0;n<r;++n){var v=c(2*l.length).map(Math.random);y=b(g,v,t),(!m||y.fx<m.fx)&&(m=y)}var _=m.x,E={};for(n=0;n<o.length;++n){var w=o[n];E[w.sets[0]]={x:_[2*n]*d,y:_[2*n+1]*d,radius:Math.sqrt(w.size/Math.PI)}}if(t.history)for(n=0;n<t.history.length;++n)h(t.history[n].x,d);return E}(e,t),i=r(o,e),a=r(n,e);i+1e-8<a&&(n=o)}return n}function w(e,t){for(var n,r=t&&t.lossFunction?t.lossFunction:O,o={},i={},a=0;a<e.length;++a){var s=e[a];1==s.sets.length&&(n=s.sets[0],o[n]={x:1e10,y:1e10,rowid:o.length,size:s.size,radius:Math.sqrt(s.size/Math.PI)},i[n]=[])}for(e=e.filter(function(e){return 2==e.sets.length}),a=0;a<e.length;++a){var u=e[a],c=u.hasOwnProperty("weight")?u.weight:1,p=u.sets[0],d=u.sets[1];u.size+_>=Math.min(o[p].size,o[d].size)&&(c=0),i[p].push({set:d,size:u.size,weight:c}),i[d].push({set:p,size:u.size,weight:c})}var f=[];for(n in i)if(i.hasOwnProperty(n)){var h=0;for(a=0;a<i[n].length;++a)h+=i[n][a].size*i[n][a].weight;f.push({set:n,size:h})}function m(e,t){return t.size-e.size}f.sort(m);var y={};function g(e){return e.set in y}function b(e,t){o[t].x=e.x,o[t].y=e.y,y[t]=!0}for(b({x:0,y:0},f[0].set),a=1;a<f.length;++a){var v=f[a].set,E=i[v].filter(g);if(n=o[v],E.sort(m),0===E.length)throw"ERROR: missing pairwise overlap information";for(var w=[],C=0;C<E.length;++C){var k=o[E[C].set],T=S(n.radius,k.radius,E[C].size);w.push({x:k.x+T,y:k.y}),w.push({x:k.x-T,y:k.y}),w.push({y:k.y+T,x:k.x}),w.push({y:k.y-T,x:k.x});for(var P=C+1;P<E.length;++P)for(var x=o[E[P].set],A=S(n.radius,x.radius,E[P].size),j=l({x:k.x,y:k.y,radius:T},{x:x.x,y:x.y,radius:A}),I=0;I<j.length;++I)w.push(j[I])}var N=1e50,M=w[0];for(C=0;C<w.length;++C){o[v].x=w[C].x,o[v].y=w[C].y;var D=r(o,e);D<N&&(N=D,M=w[C])}b(M,v)}return o}function O(e,t){for(var n=0,r=0;r<t.length;++r){var i,l=t[r];if(1!=l.sets.length){if(2==l.sets.length){var u=e[l.sets[0]],c=e[l.sets[1]];i=s(u.radius,c.radius,a(u,c))}else i=o(l.sets.map(function(t){return e[t]}));var p=l.hasOwnProperty("weight")?l.weight:1;n+=p*(i-l.size)*(i-l.size)}}return n}function C(e,t,n){var r;if(null===n?e.sort(function(e,t){return t.radius-e.radius}):e.sort(n),e.length>0){var o=e[0].x,i=e[0].y;for(r=0;r<e.length;++r)e[r].x-=o,e[r].y-=i}if(2==e.length){var s=a(e[0],e[1]);s<Math.abs(e[1].radius-e[0].radius)&&(e[1].x=e[0].x+e[0].radius-e[1].radius-1e-10,e[1].y=e[0].y)}if(e.length>1){var l,u,c=Math.atan2(e[1].x,e[1].y)-t,p=Math.cos(c),d=Math.sin(c);for(r=0;r<e.length;++r)l=e[r].x,u=e[r].y,e[r].x=p*l-d*u,e[r].y=d*l+p*u}if(e.length>2){for(var f=Math.atan2(e[2].x,e[2].y)-t;f<0;)f+=2*Math.PI;for(;f>2*Math.PI;)f-=2*Math.PI;if(f>Math.PI){var h=e[1].y/(1e-10+e[1].x);for(r=0;r<e.length;++r){var m=(e[r].x+h*e[r].y)/(1+h*h);e[r].x=2*m-e[r].x,e[r].y=2*m*h-e[r].y}}}}function k(e){function t(e){return e.parent!==e&&(e.parent=t(e.parent)),e.parent}e.map(function(e){e.parent=e});for(var n=0;n<e.length;++n)for(var r=n+1;r<e.length;++r){var o=e[n].radius+e[r].radius;a(e[n],e[r])+1e-10<o&&(i=e[r],s=e[n],l=void 0,u=void 0,l=t(i),u=t(s),l.parent=u)}var i,s,l,u,c,p={};for(n=0;n<e.length;++n)(c=t(e[n]).parent.setid)in p||(p[c]=[]),p[c].push(e[n]);e.map(function(e){delete e.parent});var d=[];for(c in p)p.hasOwnProperty(c)&&d.push(p[c]);return d}function T(e){var t=function(t){var n=Math.max.apply(null,e.map(function(e){return e[t]+e.radius})),r=Math.min.apply(null,e.map(function(e){return e[t]-e.radius}));return{max:n,min:r}};return{xRange:t("x"),yRange:t("y")}}function P(e,t,n){null===t&&(t=Math.PI/2);var r,o,i=[];for(o in e)if(e.hasOwnProperty(o)){var a=e[o];i.push({x:a.x,y:a.y,radius:a.radius,setid:o})}var s=k(i);for(r=0;r<s.length;++r){C(s[r],t,n);var l=T(s[r]);s[r].size=(l.xRange.max-l.xRange.min)*(l.yRange.max-l.yRange.min),s[r].bounds=l}s.sort(function(e,t){return t.size-e.size});var u=(i=s[0]).bounds,c=(u.xRange.max-u.xRange.min)/50;function p(e,t,n){if(e){var r,o,a,s=e.bounds;t?r=u.xRange.max-s.xRange.min+c:(r=u.xRange.max-s.xRange.max,(a=(s.xRange.max-s.xRange.min)/2-(u.xRange.max-u.xRange.min)/2)<0&&(r+=a)),n?o=u.yRange.max-s.yRange.min+c:(o=u.yRange.max-s.yRange.max,(a=(s.yRange.max-s.yRange.min)/2-(u.yRange.max-u.yRange.min)/2)<0&&(o+=a));for(var l=0;l<e.length;++l)e[l].x+=r,e[l].y+=o,i.push(e[l])}}for(var d=1;d<s.length;)p(s[d],!0,!1),p(s[d+1],!1,!0),p(s[d+2],!0,!0),d+=3,u=T(i);var f={};for(r=0;r<i.length;++r)f[i[r].setid]=i[r];return f}function x(e,t,n,r){var o=[],i=[];for(var a in e)e.hasOwnProperty(a)&&(i.push(a),o.push(e[a]));t-=2*r,n-=2*r;var s=T(o),l=s.xRange,u=s.yRange;if(l.max==l.min||u.max==u.min)return console.log("not scaling solution: zero size detected"),e;for(var c=t/(l.max-l.min),p=n/(u.max-u.min),d=Math.min(p,c),f=(t-(l.max-l.min)*d)/2,h=(n-(u.max-u.min)*d)/2,m={},y=0;y<o.length;++y){var g=o[y];m[i[y]]={radius:d*g.radius,x:r+f+(g.x-l.min)*d,y:r+h+(g.y-u.min)*d}}return m}function A(e,n){return function(){for(var r,o=t.select(this),i=o.datum(),a=e[i.sets[0]].radius||50,s=n(i)||"",l=s.split(/\s+/).reverse(),u=(s.length+l.length)/3,c=l.pop(),p=[c],d=0,f=o.text(null).append("tspan").text(c);c=l.pop();)p.push(c),r=p.join(" "),f.text(r),r.length>u&&f.node().getComputedTextLength()>a&&(p.pop(),f.text(p.join(" ")),p=[c],f=o.append("tspan").text(c),d++);var h=.35-1.1*d/2,m=o.attr("x"),y=o.attr("y");o.selectAll("tspan").attr("x",m).attr("y",y).attr("dy",function(e,t){return h+1.1*t+"em"})}}function j(e,t,n){var r,o,i=t[0].radius-a(t[0],e);for(r=1;r<t.length;++r)(o=t[r].radius-a(t[r],e))<=i&&(i=o);for(r=0;r<n.length;++r)(o=a(n[r],e)-n[r].radius)<=i&&(i=o);return i}function I(e,t){var n,r=[];for(n=0;n<e.length;++n){var i=e[n];r.push({x:i.x,y:i.y}),r.push({x:i.x+i.radius/2,y:i.y}),r.push({x:i.x-i.radius/2,y:i.y}),r.push({x:i.x,y:i.y+i.radius/2}),r.push({x:i.x,y:i.y-i.radius/2})}var s=r[0],l=j(r[0],e,t);for(n=1;n<r.length;++n){var c=j(r[n],e,t);c>=l&&(s=r[n],l=c)}var p=y(function(n){return-1*j({x:n[0],y:n[1]},e,t)},[s.x,s.y],{maxIterations:500,minErrorDelta:1e-10}).x,d={x:p[0],y:p[1]},f=!0;for(n=0;n<e.length;++n)if(a(d,e[n])>e[n].radius){f=!1;break}for(n=0;n<t.length;++n)if(a(d,t[n])<t[n].radius){f=!1;break}if(!f)if(1==e.length)d={x:e[0].x,y:e[0].y};else{var h={};o(e,h),d=0===h.arcs.length?{x:0,y:-1e3,disjoint:!0}:1==h.arcs.length?{x:h.arcs[0].circle.x,y:h.arcs[0].circle.y}:t.length?I(e,[]):u(h.arcs.map(function(e){return e.p1}))}return d}function N(e){var t={},n=[];for(var r in e)n.push(r),t[r]=[];for(var o=0;o<n.length;o++)for(var i=e[n[o]],s=o+1;s<n.length;++s){var l=e[n[s]],u=a(i,l);u+l.radius<=i.radius+1e-10?t[n[s]].push(n[o]):u+i.radius<=l.radius+1e-10&&t[n[o]].push(n[s])}return t}function M(e,t){for(var n={},r=N(e),o=0;o<t.length;++o){for(var i=t[o].sets,a={},s={},l=0;l<i.length;++l){a[i[l]]=!0;for(var u=r[i[l]],c=0;c<u.length;++c)s[u[c]]=!0}var p=[],d=[];for(var f in e)f in a?p.push(e[f]):f in s||d.push(e[f]);var h=I(p,d);n[i]=h,h.disjoint&&t[o].size>0&&console.log("WARNING: area "+i+" not represented on screen")}return n}function D(e,t,n){var r=[];return r.push("\nM",e,t),r.push("\nm",-n,0),r.push("\na",n,n,0,1,0,2*n,0),r.push("\na",n,n,0,1,0,2*-n,0),r.join(" ")}function R(e){var t=e.split(" ");return{x:parseFloat(t[1]),y:parseFloat(t[2]),radius:-parseFloat(t[4])}}function L(e){var t={};o(e,t);var n=t.arcs;if(0===n.length)return"M 0 0";if(1==n.length){var r=n[0].circle;return D(r.x,r.y,r.radius)}for(var i=["\nM",n[0].p2.x,n[0].p2.y],a=0;a<n.length;++a){var s=n[a],l=s.circle.radius,u=s.width>l;i.push("\nA",l,l,0,u?1:0,1,s.p1.x,s.p1.y)}return i.join(" ")}e.intersectionArea=o,e.circleCircleIntersection=l,e.circleOverlap=s,e.circleArea=i,e.distance=a,e.venn=v,e.greedyLayout=w,e.scaleSolution=x,e.normalizeSolution=P,e.bestInitialLayout=E,e.lossFunction=O,e.disjointCluster=k,e.distanceFromIntersectArea=S,e.VennDiagram=function(){var e=600,n=350,r=15,o=1e3,i=Math.PI/2,a=!0,s=!0,l=!0,u=null,c=null,p={},d=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],f=0,h=function(e){if(e in p)return p[e];var t=p[e]=d[f];return(f+=1)>=d.length&&(f=0),t},m=v,y=O;function g(p){var d=p.datum(),f={};d.forEach(function(e){0==e.size&&1==e.sets.length&&(f[e.sets[0]]=1)}),d=d.filter(function(e){return!e.sets.some(function(e){return e in f})});var g={},b={};if(d.length>0){var v=m(d,{lossFunction:y});a&&(v=P(v,i,c)),g=x(v,e,n,r),b=M(g,d)}var _={};function S(e){return e.sets in _?_[e.sets]:1==e.sets.length?""+e.sets[0]:void 0}d.forEach(function(e){e.label&&(_[e.sets]=e.label)}),p.selectAll("svg").data([g]).enter().append("svg");var E=p.select("svg").attr("width",e).attr("height",n),w={},O=!1;E.selectAll(".venn-area path").each(function(e){var n=t.select(this).attr("d");1==e.sets.length&&n&&(O=!0,w[e.sets[0]]=R(n))});var C=function(t){return function(r){var o=t.sets.map(function(t){var o=w[t],i=g[t];return o||(o={x:e/2,y:n/2,radius:1}),i||(i={x:e/2,y:n/2,radius:1}),{x:o.x*(1-r)+i.x*r,y:o.y*(1-r)+i.y*r,radius:o.radius*(1-r)+i.radius*r}});return L(o)}},k=E.selectAll(".venn-area").data(d,function(e){return e.sets}),T=k.enter().append("g").attr("class",function(e){return"venn-area venn-"+(1==e.sets.length?"circle":"intersection")}).attr("data-venn-sets",function(e){return e.sets.join("_")}),j=T.append("path"),I=T.append("text").attr("class","label").text(function(e){return S(e)}).attr("text-anchor","middle").attr("dy",".35em").attr("x",e/2).attr("y",n/2);l&&(j.style("fill-opacity","0").filter(function(e){return 1==e.sets.length}).style("fill",function(e){return h(e.sets)}).style("fill-opacity",".25"),I.style("fill",function(e){return 1==e.sets.length?h(e.sets):"#444"}));var N=p;O?(N=p.transition("venn").duration(o)).selectAll("path").attrTween("d",C):N.selectAll("path").attr("d",function(e){return L(e.sets.map(function(e){return g[e]}))});var D=N.selectAll("text").filter(function(e){return e.sets in b}).text(function(e){return S(e)}).attr("x",function(e){return Math.floor(b[e.sets].x)}).attr("y",function(e){return Math.floor(b[e.sets].y)});s&&(O?"on"in D?D.on("end",A(g,S)):D.each("end",A(g,S)):D.each(A(g,S)));var G=k.exit().transition("venn").duration(o).remove();G.selectAll("path").attrTween("d",C);var V=G.selectAll("text").attr("x",e/2).attr("y",n/2);return null!==u&&(I.style("font-size","0px"),D.style("font-size",u),V.style("font-size","0px")),{circles:g,textCentres:b,nodes:k,enter:T,update:N,exit:G}}return g.wrap=function(e){return arguments.length?(s=e,g):s},g.width=function(t){return arguments.length?(e=t,g):e},g.height=function(e){return arguments.length?(n=e,g):n},g.padding=function(e){return arguments.length?(r=e,g):r},g.colours=function(e){return arguments.length?(h=e,g):h},g.fontSize=function(e){return arguments.length?(u=e,g):u},g.duration=function(e){return arguments.length?(o=e,g):o},g.layoutFunction=function(e){return arguments.length?(m=e,g):m},g.normalize=function(e){return arguments.length?(a=e,g):a},g.styled=function(e){return arguments.length?(l=e,g):l},g.orientation=function(e){return arguments.length?(i=e,g):i},g.orientationOrder=function(e){return arguments.length?(c=e,g):c},g.lossFunction=function(e){return arguments.length?(y=e,g):y},g},e.wrapText=A,e.computeTextCentres=M,e.computeTextCentre=I,e.sortAreas=function(e,t){for(var n=N(e.selectAll("svg").datum()),r={},o=0;o<t.sets.length;++o){var i=t.sets[o];for(var a in n)for(var s=n[a],l=0;l<s.length;++l)if(s[l]==i){r[a]=!0;break}}function u(e){for(var t=0;t<e.length;++t)if(!(e[t]in r))return!1;return!0}e.selectAll("g").sort(function(e,n){return e.sets.length!=n.sets.length?e.sets.length-n.sets.length:e==t?u(n.sets)?-1:1:n==t?u(e.sets)?1:-1:n.size-e.size})},e.circlePath=D,e.circleFromPath=R,e.intersectionAreaPath=L,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(791),n(1086))},function(e,t,n){e.exports=n(25)(792)},function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__quCC8",framedImage:"styles-module__framedImage__2pTmh",scrollbar:"styles-module__scrollbar__-BNTg",handle:"styles-module__handle__2PODi"}},function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(66),a=n(289),s=n(800),l=n(919),u=n(6),c=n(110),p=n(47),d=n(111);function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var b=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":g(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},v=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=h(this,m(t).apply(this,arguments))).tabUI=Object(p.d)(function(){return e.props.store},function(){return e.enrichmentsUI},"mutation",!0,!0,!0),e.enrichmentsUI=Object(c.a)({await:function(){return[e.props.store.mutationEnrichmentData,e.props.store.selectedStudyMutationEnrichmentProfileMap,e.props.store.mutationEnrichmentAnalysisGroups,e.props.store.studies,e.props.store.mutationEnrichmentProfiles]},render:function(){var t="Mutation",n=Object.keys(e.props.store.selectedStudyMutationEnrichmentProfileMap.result);return 1===n.length&&(t=e.props.store.selectedStudyMutationEnrichmentProfileMap.result[n[0]].name),r.createElement("div",{"data-test":"GroupComparisonMutationEnrichments"},r.createElement(s.a,{dataSets:e.props.store.mutationEnrichmentProfiles.result,onChange:e.onChangeProfile,selectedProfileByStudyId:e.props.store.selectedStudyMutationEnrichmentProfileMap.result,studies:e.props.store.studies.result}),r.createElement(l.a,{data:e.props.store.mutationEnrichmentData.result,groups:e.props.store.mutationEnrichmentAnalysisGroups.result,alteredVsUnalteredMode:!1,headerName:t,containerType:d.a.MUTATION,patientLevelEnrichments:e.props.store.usePatientLevelEnrichments,onSetPatientLevelEnrichments:e.props.store.setUsePatientLevelEnrichments,store:e.props.resultsViewStore}))},renderPending:function(){return r.createElement(i.a,{center:!0,isLoading:!0,size:"big"})},renderError:function(){return r.createElement(a.a,null)}}),e}var n,o,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,r["Component"]),n=t,(o=[{key:"onChangeProfile",value:function(e){this.props.store.setMutationEnrichmentProfileMap(e)}},{key:"render",value:function(){return this.tabUI.component}}])&&f(n.prototype,o),u&&f(n,u),t}();b([u.default],v.prototype,"onChangeProfile",null),v=b([o.observer],v),t.a=v},function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__1mlqI",framedImage:"styles-module__framedImage__AkabG",wrapper:"styles-module__wrapper__29CoN",groupRow:"styles-module__groupRow__3Q2Y8",alterationRow:"styles-module__alterationRow__1G5NG",strike:"styles-module__strike__1ycDg"}},function(e,t,n){e.exports={portalWidth:"frequencyPlotStyles-module__portalWidth__bPwxT",framedImage:"frequencyPlotStyles-module__framedImage__R6mzB",ChartControls:"frequencyPlotStyles-module__ChartControls__2YKR9"}},function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(800),a=n(919),s=n(6),l=n(110),u=n(66),c=n(289),p=n(47),d=n(111);function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var b=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":g(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},v=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=h(this,m(t).apply(this,arguments))).tabUI=Object(p.d)(function(){return e.props.store},function(){return e.enrichmentsUI},"copy-number",!0,!0,!0),e.enrichmentsUI=Object(l.a)({await:function(){return[e.props.store.copyNumberEnrichmentData,e.props.store.copyNumberEnrichmentAnalysisGroups,e.props.store.selectedStudyCopyNumberEnrichmentProfileMap,e.props.store.studies,e.props.store.copyNumberEnrichmentProfiles]},render:function(){var t="Copy number",n=Object.keys(e.props.store.selectedStudyCopyNumberEnrichmentProfileMap.result);return 1===n.length&&(t=e.props.store.selectedStudyCopyNumberEnrichmentProfileMap.result[n[0]].name),r.createElement("div",{"data-test":"GroupComparisonCopyNumberEnrichments"},r.createElement(i.a,{dataSets:e.props.store.copyNumberEnrichmentProfiles.result,onChange:e.onChangeProfile,selectedProfileByStudyId:e.props.store.selectedStudyCopyNumberEnrichmentProfileMap.result,studies:e.props.store.studies.result}),r.createElement(a.a,{data:e.props.store.copyNumberEnrichmentData.result,groups:e.props.store.copyNumberEnrichmentAnalysisGroups.result,alteredVsUnalteredMode:!1,headerName:t,showCNAInTable:!0,containerType:d.a.COPY_NUMBER,patientLevelEnrichments:e.props.store.usePatientLevelEnrichments,onSetPatientLevelEnrichments:e.props.store.setUsePatientLevelEnrichments,store:e.props.resultsViewStore}))},renderPending:function(){return r.createElement(u.a,{center:!0,isLoading:!0,size:"big"})},renderError:function(){return r.createElement(c.a,null)}}),e}var n,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,r["Component"]),n=t,(o=[{key:"onChangeProfile",value:function(e){this.props.store.setCopyNumberEnrichmentProfileMap(e)}},{key:"render",value:function(){return this.tabUI.component}}])&&f(n.prototype,o),s&&f(n,s),t}();b([s.default],v.prototype,"onChangeProfile",null),v=b([o.observer],v),t.a=v},function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(6),a=n(110),s=n(800),l=n(66),u=n(289),c=n(841),p=n(47),d=n(111);function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var b=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":g(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},v=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=h(this,m(t).apply(this,arguments))).tabUI=Object(p.d)(function(){return e.props.store},function(){return e.enrichmentsUI},"mRNA",!0,!0,!1),e.enrichmentsUI=Object(a.a)({await:function(){return[e.props.store.mRNAEnrichmentData,e.props.store.selectedmRNAEnrichmentProfileMap,e.props.store.mrnaEnrichmentAnalysisGroups,e.props.store.studies,e.props.store.sampleKeyToSample,e.props.store.mRNAEnrichmentProfiles]},render:function(){var t=Object.keys(e.props.store.selectedmRNAEnrichmentProfileMap.result),n=e.props.store.selectedmRNAEnrichmentProfileMap.result[t[0]];return r.createElement("div",{"data-test":"GroupComparisonMRNAEnrichments"},r.createElement(s.a,{dataSets:e.props.store.mRNAEnrichmentProfiles.result,onChange:e.onChangeProfile,selectedProfileByStudyId:e.props.store.selectedmRNAEnrichmentProfileMap.result,alwaysShow:!0,studies:e.props.store.studies.result}),r.createElement(c.a,{data:e.props.store.mRNAEnrichmentData.result,groups:e.props.store.mrnaEnrichmentAnalysisGroups.result,selectedProfile:n,alteredVsUnalteredMode:!1,sampleKeyToSample:e.props.store.sampleKeyToSample.result,isGeneCheckBoxEnabled:e.props.resultsViewMode,enrichmentType:d.e.MRNA_EXPRESSION}))},renderPending:function(){return r.createElement(l.a,{center:!0,isLoading:!0,size:"big"})},renderError:function(){return r.createElement(u.a,null)}}),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,r["Component"]),n=t,(o=[{key:"onChangeProfile",value:function(e){this.props.store.setMRNAEnrichmentProfileMap(e)}},{key:"render",value:function(){return this.tabUI.component}}])&&f(n.prototype,o),i&&f(n,i),t}();b([i.default],v.prototype,"onChangeProfile",null),v=b([o.observer],v),t.a=v},function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(6),a=n(110),s=n(800),l=n(841),u=n(66),c=n(289),p=n(47),d=n(111);function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var b=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":g(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},v=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=h(this,m(t).apply(this,arguments))).tabUI=Object(p.d)(function(){return e.props.store},function(){return e.enrichmentsUI},"protein",!0,!0,!1),e.enrichmentsUI=Object(a.a)({await:function(){return[e.props.store.proteinEnrichmentData,e.props.store.selectedProteinEnrichmentProfileMap,e.props.store.proteinEnrichmentAnalysisGroups,e.props.store.studies,e.props.store.proteinEnrichmentProfiles]},render:function(){var t=Object.keys(e.props.store.selectedProteinEnrichmentProfileMap.result),n=e.props.store.selectedProteinEnrichmentProfileMap.result[t[0]];return r.createElement("div",{"data-test":"GroupComparisonProteinEnrichments"},r.createElement(s.a,{dataSets:e.props.store.proteinEnrichmentProfiles.result,onChange:e.onChangeProfile,selectedProfileByStudyId:e.props.store.selectedProteinEnrichmentProfileMap.result,alwaysShow:!0,studies:e.props.store.studies.result}),r.createElement(l.a,{data:e.props.store.proteinEnrichmentData.result,groups:e.props.store.proteinEnrichmentAnalysisGroups.result,selectedProfile:n,alteredVsUnalteredMode:!1,sampleKeyToSample:e.props.store.sampleKeyToSample.result,isGeneCheckBoxEnabled:e.props.resultsViewMode,enrichmentType:d.e.PROTEIN_EXPRESSION}))},renderPending:function(){return r.createElement(u.a,{center:!0,isLoading:!0,size:"big"})},renderError:function(){return r.createElement(c.a,null)}}),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,r["Component"]),n=t,(o=[{key:"onChangeProfile",value:function(e){this.props.store.setProteinEnrichmentProfileMap(e)}},{key:"render",value:function(){return this.tabUI.component}}])&&f(n.prototype,o),i&&f(n,i),t}();b([i.default],v.prototype,"onChangeProfile",null),v=b([o.observer],v),t.a=v},,function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(6),a=n(110),s=n(800),l=n(841),u=n(66),c=n(289),p=n(47),d=n(111);function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var b=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":g(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},v=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=h(this,m(t).apply(this,arguments))).tabUI=Object(p.d)(function(){return e.props.store},function(){return e.enrichmentsUI},"methylation",!0,!0,!1),e.enrichmentsUI=Object(a.a)({await:function(){return[e.props.store.methylationEnrichmentData,e.props.store.selectedMethylationEnrichmentProfileMap,e.props.store.methylationEnrichmentAnalysisGroups,e.props.store.studies,e.props.store.methylationEnrichmentProfiles]},render:function(){var t=Object.keys(e.props.store.selectedMethylationEnrichmentProfileMap.result),n=e.props.store.selectedMethylationEnrichmentProfileMap.result[t[0]];return r.createElement("div",{"data-test":"GroupComparisonMethylationEnrichments"},r.createElement(s.a,{dataSets:e.props.store.methylationEnrichmentProfiles.result,onChange:e.onChangeProfile,selectedProfileByStudyId:e.props.store.selectedMethylationEnrichmentProfileMap.result,alwaysShow:!0,studies:e.props.store.studies.result}),r.createElement(l.a,{data:e.props.store.methylationEnrichmentData.result,groups:e.props.store.methylationEnrichmentAnalysisGroups.result,selectedProfile:n,alteredVsUnalteredMode:!1,sampleKeyToSample:e.props.store.sampleKeyToSample.result,isGeneCheckBoxEnabled:e.props.resultsViewMode,enrichmentType:d.e.DNA_METHYLATION,groupsSelectorPlaceholder:"High methylation in ..."}))},renderPending:function(){return r.createElement(u.a,{center:!0,isLoading:!0,size:"big"})},renderError:function(){return r.createElement(c.a,null)}}),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,r["Component"]),n=t,(o=[{key:"onChangeProfile",value:function(e){this.props.store.setMethylationEnrichmentProfileMap(e)}},{key:"render",value:function(){return this.tabUI.component}}])&&f(n.prototype,o),i&&f(n,i),t}();b([i.default],v.prototype,"onChangeProfile",null),v=b([o.observer],v),t.a=v},,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(791),o={value:function(){}};function i(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r)throw new Error("illegal type: "+e);r[e]=[]}return new a(r)}function a(e){this._=e}function s(e,t){for(var n,r=0,o=e.length;r<o;++r)if((n=e[r]).name===t)return n.value}function l(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=o,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}a.prototype=i.prototype={constructor:a,on:function(e,t){var n,r,o=this._,i=(r=o,(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}})),a=-1,u=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<u;)if(n=(e=i[a]).type)o[n]=l(o[n],e.name,t);else if(null==t)for(n in o)o[n]=l(o[n],e.name,null);return this}for(;++a<u;)if((n=(e=i[a]).type)&&(n=s(o[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new a(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,o=new Array(n),i=0;i<n;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,n=(r=this._[e]).length;i<n;++i)r[i].value.apply(t,o)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}};var u=i,c=n(906),p=u("start","end","cancel","interrupt"),d=[],f=0,h=1,m=2,y=3,g=4,b=5,v=6,_=function(e,t,n,r,o,i){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var r,o=e.__transition;function i(l){var u,p,d,f;if(n.state!==h)return s();for(u in o)if((f=o[u]).name===n.name){if(f.state===y)return Object(c.timeout)(i);f.state===g?(f.state=v,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete o[u]):+u<t&&(f.state=v,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete o[u])}if(Object(c.timeout)(function(){n.state===y&&(n.state=g,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=m,n.on.call("start",e,e.__data__,n.index,n.group),n.state===m){for(n.state=y,r=new Array(d=n.tween.length),u=0,p=-1;u<d;++u)(f=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(r[++p]=f);r.length=p+1}}function a(t){for(var o=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(s),n.state=b,1),i=-1,a=r.length;++i<a;)r[i].call(e,o);n.state===b&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){for(var r in n.state=v,n.timer.stop(),delete o[t],o)return;delete e.__transition}o[t]=n,n.timer=Object(c.timer)(function(e){n.state=h,n.timer.restart(i,n.delay,n.time),n.delay<=e&&i(e-n.delay)},0,n.time)}(e,n,{name:t,index:r,group:o,on:p,tween:d,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:f})};function S(e,t){var n=w(e,t);if(n.state>f)throw new Error("too late; already scheduled");return n}function E(e,t){var n=w(e,t);if(n.state>y)throw new Error("too late; already running");return n}function w(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}var O=function(e,t){var n,r,o,i=e.__transition,a=!0;if(i){for(o in t=null==t?null:t+"",i)(n=i[o]).name===t?(r=n.state>m&&n.state<b,n.state=v,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[o]):a=!1;a&&delete e.__transition}},C=n(91);function k(e,t,n){var r=e._id;return e.each(function(){var e=E(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return w(e,r).value[t]}}var T=n(94),P=function(e,t){var n;return("number"==typeof t?C.interpolateNumber:t instanceof T.color?C.interpolateRgb:(n=Object(T.color)(t))?(t=n,C.interpolateRgb):C.interpolateString)(e,t)};var x=r.selection.prototype.constructor;function A(e){return function(){this.style.removeProperty(e)}}var j=0;function I(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function N(e){return Object(r.selection)().transition(e)}function M(){return++j}var D=r.selection.prototype;I.prototype=N.prototype={constructor:I,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=Object(r.selector)(e));for(var o=this._groups,i=o.length,a=new Array(i),s=0;s<i;++s)for(var l,u,c=o[s],p=c.length,d=a[s]=new Array(p),f=0;f<p;++f)(l=c[f])&&(u=e.call(l,l.__data__,f,c))&&("__data__"in l&&(u.__data__=l.__data__),d[f]=u,_(d[f],t,n,f,d,w(l,n)));return new I(a,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=Object(r.selectorAll)(e));for(var o=this._groups,i=o.length,a=[],s=[],l=0;l<i;++l)for(var u,c=o[l],p=c.length,d=0;d<p;++d)if(u=c[d]){for(var f,h=e.call(u,u.__data__,d,c),m=w(u,n),y=0,g=h.length;y<g;++y)(f=h[y])&&_(f,t,n,y,h,m);a.push(h),s.push(u)}return new I(a,s,t,n)},filter:function(e){"function"!=typeof e&&(e=Object(r.matcher)(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a,s=t[i],l=s.length,u=o[i]=[],c=0;c<l;++c)(a=s[c])&&e.call(a,a.__data__,c,s)&&u.push(a);return new I(o,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),a=new Array(r),s=0;s<i;++s)for(var l,u=t[s],c=n[s],p=u.length,d=a[s]=new Array(p),f=0;f<p;++f)(l=u[f]||c[f])&&(d[f]=l);for(;s<r;++s)a[s]=t[s];return new I(a,this._parents,this._name,this._id)},selection:function(){return new x(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=M(),r=this._groups,o=r.length,i=0;i<o;++i)for(var a,s=r[i],l=s.length,u=0;u<l;++u)if(a=s[u]){var c=w(a,t);_(a,e,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new I(r,this._parents,e,n)},call:D.call,nodes:D.nodes,node:D.node,size:D.size,empty:D.empty,each:D.each,on:function(e,t){var n=this._id;return arguments.length<2?w(this.node(),n).on.on(e):this.each(function(e,t,n){var r,o,i=function(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}(t)?S:E;return function(){var a=i(this,e),s=a.on;s!==r&&(o=(r=s).copy()).on(t,n),a.on=o}}(n,e,t))},attr:function(e,t){var n=Object(r.namespace)(e),o="transform"===n?C.interpolateTransformSvg:P;return this.attrTween(e,"function"==typeof t?(n.local?function(e,t,n){var r,o,i;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:a===r&&s===o?i:(o=s,i=t(r=a,l));this.removeAttributeNS(e.space,e.local)}}:function(e,t,n){var r,o,i;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttribute(e))===(s=l+"")?null:a===r&&s===o?i:(o=s,i=t(r=a,l));this.removeAttribute(e)}})(n,o,k(this,"attr."+e,t)):null==t?(n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}})(n):(n.local?function(e,t,n){var r,o,i=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?o:o=t(r=a,n)}}:function(e,t,n){var r,o,i=n+"";return function(){var a=this.getAttribute(e);return a===i?null:a===r?o:o=t(r=a,n)}})(n,o,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var o=Object(r.namespace)(e);return this.tween(n,(o.local?function(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t(n))}}(e,o)),n}return o._value=t,o}:function(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(e,t){return function(n){this.setAttribute(e,t(n))}}(e,o)),n}return o._value=t,o})(o,t))},style:function(e,t,n){var o="transform"==(e+="")?C.interpolateTransformCss:P;return null==t?this.styleTween(e,function(e,t){var n,o,i;return function(){var a=Object(r.style)(this,e),s=(this.style.removeProperty(e),Object(r.style)(this,e));return a===s?null:a===n&&s===o?i:i=t(n=a,o=s)}}(e,o)).on("end.style."+e,A(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var o,i,a;return function(){var s=Object(r.style)(this,e),l=n(this),u=l+"";return null==l&&(this.style.removeProperty(e),u=l=Object(r.style)(this,e)),s===u?null:s===o&&u===i?a:(i=u,a=t(o=s,l))}}(e,o,k(this,"style."+e,t))).each(function(e,t){var n,r,o,i,a="style."+t,s="end."+a;return function(){var l=E(this,e),u=l.on,c=null==l.value[a]?i||(i=A(t)):void 0;u===n&&o===c||(r=(n=u).copy()).on(s,o=c),l.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var o,i,a=n+"";return function(){var s=Object(r.style)(this,e);return s===a?null:s===o?i:i=t(o=s,n)}}(e,o,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,function(e,t,n){var r,o;function i(){var i=t.apply(this,arguments);return i!==o&&(r=(o=i)&&function(e,t,n){return function(r){this.style.setProperty(e,t(r),n)}}(e,i,n)),r}return i._value=t,i}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(k(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},remove:function(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,o=w(this.node(),n).tween,i=0,a=o.length;i<a;++i)if((r=o[i]).name===e)return r.value;return null}return this.each((null==t?function(e,t){var n,r;return function(){var o=E(this,e),i=o.tween;if(i!==n)for(var a=0,s=(r=n=i).length;a<s;++a)if(r[a].name===t){(r=r.slice()).splice(a,1);break}o.tween=r}}:function(e,t,n){var r,o;if("function"!=typeof n)throw new Error;return function(){var i=E(this,e),a=i.tween;if(a!==r){o=(r=a).slice();for(var s={name:t,value:n},l=0,u=o.length;l<u;++l)if(o[l].name===t){o[l]=s;break}l===u&&o.push(s)}i.tween=o}})(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){S(this,e).delay=+t.apply(this,arguments)}}:function(e,t){return t=+t,function(){S(this,e).delay=t}})(t,e)):w(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){E(this,e).duration=+t.apply(this,arguments)}}:function(e,t){return t=+t,function(){E(this,e).duration=t}})(t,e)):w(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){E(this,e).ease=t}}(t,e)):w(this.node(),t).ease},end:function(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(i,a){var s={value:a},l={value:function(){0==--o&&i()}};n.each(function(){var n=E(this,r),o=n.on;o!==e&&((t=(e=o).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),n.on=t})})}};var R={time:null,delay:0,duration:250,ease:n(1062).easeCubicInOut};function L(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))return R.time=Object(c.now)(),R;return n}r.selection.prototype.interrupt=function(e){return this.each(function(){O(this,e)})},r.selection.prototype.transition=function(e){var t,n;e instanceof I?(t=e._id,e=e._name):(t=M(),(n=R).time=Object(c.now)(),e=null==e?null:e+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var a,s=r[i],l=s.length,u=0;u<l;++u)(a=s[u])&&_(a,e,t,u,s,n||L(a,t));return new I(r,this._parents,e,t)};var G=[null],V=function(e,t){var n,r,o=e.__transition;if(o)for(r in t=null==t?null:t+"",o)if((n=o[r]).state>h&&n.name===t)return new I([[e]],G,t,+r);return null};n.d(t,"transition",function(){return N}),n.d(t,"active",function(){return V}),n.d(t,"interrupt",function(){return O})},function(e,t,n){"use strict";var r,o,i,a,s=n(0),l=n(1),u=n.n(l),c=n(6),p=n(9),d=n(2),f=n(5),h=n.n(f),m=n(36),y=(n(925),n(926),n(66)),g=n(15),b=n(20),v=n(293),_=n(845),S=n.n(_),E=n(76),w=n.n(E),O=n(3),C=n(44),k=n(17),T=n.n(k);function P(e){var t={};return e.forEach(function(e){var n=function(e){for(var t=[],n=e.start.position,r=e.end.position,o=n;o<=r;o++)t.push({resi:o});return e.start.insertionCode&&(t[0].icode=e.start.insertionCode),t.length>1&&e.end.insertionCode&&(t[t.length-1].icode=e.end.insertionCode),t}(e.positionRange),r=l.groupBy(n,"resi");l.each(l.keys(r),function(n){t[n]||(t[n]=[]),l.each(r[n],function(r){t[n].push({selector:r,residue:e})})})}),t}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}!function(e){e[e.CARTOON=0]="CARTOON",e[e.SPACE_FILLING=1]="SPACE_FILLING",e[e.TRACE=2]="TRACE",e[e.BALL_AND_STICK=3]="BALL_AND_STICK",e[e.RIBBON=4]="RIBBON"}(r||(r={})),function(e){e[e.UNIFORM=0]="UNIFORM",e[e.SECONDARY_STRUCTURE=1]="SECONDARY_STRUCTURE",e[e.NC_RAINBOW=2]="NC_RAINBOW",e[e.ATOM_TYPE=3]="ATOM_TYPE"}(o||(o={})),function(e){e[e.ALL=0]="ALL",e[e.SELECTED=1]="SELECTED",e[e.NONE=2]="NONE"}(i||(i={})),function(e){e[e.UNIFORM=0]="UNIFORM",e[e.MUTATION_TYPE=1]="MUTATION_TYPE",e[e.NONE=2]="NONE"}(a||(a={}));var A=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"updateVisualStyle",value:function(e,t,n){var r=this.updateScheme(n);this.updateBaseVisualStyle(r,n),this.updateChainVisualStyle(t,r,n),this.updateResidueStyle(e,t,n,r),this.updateBoundMolecules(n)}},{key:"updateScheme",value:function(e){var t=this.selectAll();return this.setScheme(e.proteinScheme,t)}},{key:"updateBaseVisualStyle",value:function(t,n){var r=e.defaultProps,o=this.selectAll();this.setColor(n.baseColor||r.baseColor,o,t),this.setTransparency(n.baseTranslucency||r.baseTranslucency,o,t)}},{key:"updateChainVisualStyle",value:function(t,n,r){var i=e.defaultProps,a=this.selectChain(t);this.setColor(r.chainColor||i.chainColor,a,n),this.setTransparency(r.chainTranslucency||i.chainTranslucency,a,n),r.proteinColor===o.ATOM_TYPE?(a=this.selectChain(t),this.cpkColor(a,n)):r.proteinColor===o.SECONDARY_STRUCTURE?(a=this.selectAlphaHelix(t),this.setColor((r.structureColors||i.structureColors).alphaHelix,a,n),a=this.selectBetaSheet(t),this.setColor((r.structureColors||i.structureColors).betaSheet,a,n)):r.proteinColor===o.NC_RAINBOW&&(a=this.selectChain(t),this.rainbowColor(a,n))}},{key:"updateBoundMolecules",value:function(e){e.displayBoundMolecules||this.hideBoundMolecules()}},{key:"convertPositionsToResCode",value:function(e){var t=[];return e.forEach(function(e){t=t.concat(function(e){for(var t=[],n=e.start.position,r=e.end.position,o=n;o<=r;o++)t.push("".concat(o));return e.start.insertionCode&&(t[0]+="^"+e.start.insertionCode),t.length>1&&e.end.insertionCode&&(t[t.length-1]+="^"+e.end.insertionCode),t}(e))}),t}}])&&x(t.prototype,n),r&&x(t,r),e}();A.defaultProps={pdbUri:"https://files.rcsb.org/view/",proteinScheme:r.CARTOON,displayBoundMolecules:!0,backgroundColor:"#FFFFFF",baseColor:"#DDDDDD",structureColors:{alphaHelix:"#FFA500",betaSheet:"#0000FF",loop:"#DDDDDD"},baseTranslucency:5,chainColor:"#888888",chainTranslucency:0,proteinColor:o.UNIFORM,mutationColor:a.MUTATION_TYPE,uniformMutationColor:"#8A2BE2",highlightColor:"#FFDD00",sideChain:i.SELECTED};var j=A,I=n(1102),N=n.n(I);function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e,t,n){return(R="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=L(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var B=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":V(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},F=function(e){function t(e,n,r){var o,i,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,a=L(t).call(this),(o=!a||"object"!==V(a)&&"function"!=typeof a?D(i):a)._loadingPdb=!1,o.stateChangeReaction=Object(d.reaction)(function(){return o.state},function(e){o.onStateChange(e)}),o._3dMol=r||N.a,o._3dMolDiv=e,o.props=Object.assign(Object.assign({},j.defaultProps),n),o.state={pdbId:"",chainId:"",residues:[]},o._prevState={pdbId:"",chainId:"",residues:[]},o.updateViewer=o.updateViewer.bind(D(o)),o}var n,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(t,j),n=t,s=[{key:"PROTEIN_SCHEME_PRESETS",get:function(){var e={};return e[r.CARTOON]={cartoon:{}},e[r.TRACE]={cartoon:{style:"trace"}},e[r.SPACE_FILLING]={sphere:{scale:.6}},e[r.BALL_AND_STICK]={stick:{},sphere:{scale:.25}},e[r.RIBBON]={cartoon:{style:"ribbon"}},e}},{key:"ALL_PROTEINS",get:function(){var e=["asp","glu","arg","lys","his","asn","thr","cys","gln","tyr","ser","gly","ala","leu","val","ile","met","trp","phe","pro"],t=e.map(function(e){return e.toUpperCase()});return e.concat(t)}}],(o=[{key:"setState",value:function(e){this._prevState=Object.assign({},this.state),this.state=Object.assign(Object.assign({},this.state),e)}},{key:"onStateChange",value:function(e){this._prevState&&!this._loadingPdb&&(this.updateVisualStyle(e.residues,e.chainId,this.props),this._3dMolViewer.render())}},{key:"setProps",value:function(e){this._prevProps=this.props,this.props=e}},{key:"init",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.residues,r=arguments.length>3?arguments[3]:void 0;if(r?this._3dMolViewer=r:this._3dMolDiv&&(this._3dMolViewer=this._3dMol.createViewer(T()(this._3dMolDiv),{defaultcolors:this._3dMol.elementColors.rasmol})),this._3dMolViewer){var o=this.formatColor(this.props.backgroundColor||j.defaultProps.backgroundColor);this._3dMolViewer.setBackgroundColor(o),this.loadPdb(e,t,n)}}},{key:"loadPdb",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.residues,o={doAssembly:!0,pdbUri:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.props).pdbUri};this._loadingPdb=!0,this.setState({pdbId:e,chainId:t,residues:r}),this._3dMolViewer?(this._3dMolViewer.clear(),this._3dMol.download("pdb:".concat(e.toUpperCase()),this._3dMolViewer,o,function(){n._loadingPdb=!1,n.onStateChange(n.state)})):this._loadingPdb=!1}},{key:"updateViewer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.residues,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props;this.setProps(n),this.setState({chainId:e,residues:t})}},{key:"resize",value:function(){this._3dMolViewer&&this._3dMolViewer.resize()}},{key:"selectAll",value:function(){return{}}},{key:"selectChain",value:function(e){return{chain:e}}},{key:"setScheme",value:function(e,n){var r=t.PROTEIN_SCHEME_PRESETS[e];return this.applyStyleForSelector(n,r),r}},{key:"setColor",value:function(e,t,n){var r=this.formatColor(e);n&&(l.each(n,function(e){e.color=r}),this.applyStyleForSelector(t,n))}},{key:"formatColor",value:function(e){return e.replace("#","0x")}},{key:"setTransparency",value:function(e,t,n){n&&(this.addTransparencyToStyle(e,n),this.applyStyleForSelector(t,n))}},{key:"addTransparencyToStyle",value:function(e,t){l.each(t,function(t,n){"sphere"!==n&&(t.opacity=(10-e)/10)})}},{key:"rainbowColor",value:function(e,t){this.setColor("spectrum",e,t)}},{key:"cpkColor",value:function(e,t){var n=this;t&&(l.each(t,function(e){delete e.color,e.colors=n._3dMol.elementColors.defaultColors}),this.applyStyleForSelector(e,t))}},{key:"selectAlphaHelix",value:function(e){return{chain:e,ss:"h"}}},{key:"selectBetaSheet",value:function(e){return{chain:e,ss:"s"}}},{key:"hideBoundMolecules",value:function(){var e={resn:t.ALL_PROTEINS,invert:!0};this._3dMolViewer.setStyle(e,{sphere:{hidden:!0}})}},{key:"enableBallAndStick",value:function(e,n,o){var i=Object.assign(Object.assign({},o),t.PROTEIN_SCHEME_PRESETS[r.BALL_AND_STICK]);if(e){var a=this.formatColor(e);i.sphere||(i.sphere={}),i.sphere.color=a,i.stick||(i.stick={}),i.stick.color=a}this._3dMolViewer.setStyle(n,i)}},{key:"updateResidueStyle",value:function(e,n){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props,s=arguments.length>3?arguments[3]:void 0,l=j.defaultProps;s||(s=t.PROTEIN_SCHEME_PRESETS[o.proteinScheme],this.addTransparencyToStyle(o.chainTranslucency||l.chainTranslucency,s)),this.residuesToUpdate.forEach(function(e){var t,u=e.residue,c=r.selectResidue(e.selector,n);t=u.highlighted?r.props.highlightColor||l.highlightColor:o.mutationColor===a.MUTATION_TYPE?u.color:o.mutationColor===a.UNIFORM?o.uniformMutationColor||l.uniformMutationColor:o.chainColor||l.chainColor,r.setColor(t,c,s),(o.sideChain===i.ALL||!0===u.highlighted&&o.sideChain===i.SELECTED)&&r.updateSideChain(n,e.selector,o.proteinScheme,t,s)})}},{key:"updateScheme",value:function(e){return this.needToUpdateResiduesOnly?void 0:R(L(t.prototype),"updateScheme",this).call(this,e)}},{key:"updateBaseVisualStyle",value:function(e,n){this.needToUpdateResiduesOnly||R(L(t.prototype),"updateBaseVisualStyle",this).call(this,e,n)}},{key:"updateChainVisualStyle",value:function(e,n,r){this.needToUpdateResiduesOnly||R(L(t.prototype),"updateChainVisualStyle",this).call(this,e,n,r)}},{key:"updateVisualStyle",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props;R(L(t.prototype),"updateVisualStyle",this).call(this,e,n,r)}},{key:"selectResidues",value:function(e,t){return{rescode:e,chain:t}}},{key:"selectResidue",value:function(e,t){return Object.assign({chain:t},e)}},{key:"selectSideChains",value:function(e,t){return this.selectResidue(e,t)}},{key:"updateSideChain",value:function(e,t,n,o,i){if(n!==r.SPACE_FILLING){var a=this.selectSideChains(t,e);this.enableBallAndStick(o,a,i)}}},{key:"applyStyleForSelector",value:function(e,t){this._3dMolViewer.setStyle(e,t)}},{key:"residuesToUpdate",get:function(){return this.needToUpdateResiduesOnly?(e=this.currentResidueToPositionMap,t=this.prevResidueToPositionMap,n=[],l.each(l.keys(e),function(r){l.isEqual(e[r],t[r])||(n=n.concat(e[r]))}),n):l.flatten(l.values(this.currentResidueToPositionMap));var e,t,n}},{key:"needToUpdateResiduesOnly",get:function(){return this._prevState.pdbId===this.state.pdbId&&this._prevState.chainId===this.state.chainId&&this.visualPropsUnchanged&&this.residuePositionsUnchanged}},{key:"residuePositionsUnchanged",get:function(){return l.isEqual(l.keys(this.currentResidueToPositionMap).sort(),l.keys(this.prevResidueToPositionMap).sort())}},{key:"currentResidueToPositionMap",get:function(){return P(this.state.residues)}},{key:"prevResidueToPositionMap",get:function(){return P(this._prevState.residues)}},{key:"visualPropsUnchanged",get:function(){return l.isEqual(l.omit(this.props,["pdbId","chainId","residues"]),l.omit(this._prevProps,["pdbId","chainId","residues"]))}}])&&M(n.prototype,o),s&&M(n,s),t}();function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}B([d.observable],F.prototype,"props",void 0),B([d.observable],F.prototype,"_prevProps",void 0),B([d.observable],F.prototype,"state",void 0),B([d.observable],F.prototype,"_prevState",void 0),B([d.action],F.prototype,"setState",null),B([d.computed],F.prototype,"residuesToUpdate",null),B([d.computed],F.prototype,"needToUpdateResiduesOnly",null),B([d.computed],F.prototype,"residuePositionsUnchanged",null),B([d.computed],F.prototype,"currentResidueToPositionMap",null),B([d.computed],F.prototype,"prevResidueToPositionMap",null),B([d.computed],F.prototype,"visualPropsUnchanged",null);var Q=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":z(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},K=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=U(t).call(this,e))||"object"!==z(o)&&"function"!=typeof o?W(r):o).divHandler=n.divHandler.bind(W(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(t,s["Component"]),n=t,(r=[{key:"render",value:function(){return s.createElement("div",{ref:this.divHandler,style:{height:this.props.bounds.height,width:this.props.bounds.width,padding:0},className:"borderedChart"})}},{key:"componentDidMount",value:function(){this._3dMolDiv&&(this.wrapper=new F(this._3dMolDiv,this.props),this.wrapper.init(this.props.pdbId,this.props.chainId,this.props.residues),this._pdbId=this.props.pdbId)}},{key:"componentDidUpdate",value:function(e){this.wrapper&&(this.props.pdbId!==this._pdbId?(this._pdbId=this.props.pdbId,this.wrapper.loadPdb(this._pdbId,this.props.chainId,this.props.residues,this.props)):this.wrapper.updateViewer(this.props.chainId,this.props.residues,this.props),l.isEqual(this.props.bounds,e.bounds)||this.wrapper.resize())}},{key:"divHandler",value:function(e){this._3dMolDiv=e,this.props.containerRef&&this.props.containerRef(e)}}])&&H(n.prototype,r),o&&H(n,o),t}(),Y=K=Q([p.observer],K),X=n(157),Z=n(1103),J=n.n(Z);function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ee(e){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var oe=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":re(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ie=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=ee(t).call(this,e))||"object"!==re(o)&&"function"!=typeof o?te(r):o).isTextTruncated=!0,n.toggleText=n.toggleText.bind(te(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(t,s["Component"]),n=t,(r=[{key:"render",value:function(){var e=this.props.text;return"string"==typeof this.props.text&&(e=s.createElement(J.a,{text:this.props.text,line:this.props.line,truncateText:this.props.truncateText,textTruncateChild:s.createElement("a",{onClick:this.toggleText,style:{cursor:"pointer"}},this.props.expandIndicator)})),s.createElement(b.If,{condition:this.isTextTruncated},s.createElement(b.Then,null,e),s.createElement(b.Else,null,s.createElement("span",null,s.createElement("span",null,this.props.text," "),s.createElement("span",null,s.createElement("a",{onClick:this.toggleText,style:{cursor:"pointer"}},this.props.collapseIndicator)))))}},{key:"toggleText",value:function(){this.isTextTruncated=!this.isTextTruncated}}])&&$(n.prototype,r),o&&$(n,o),t}();ie.defaultProps={line:1,expandIndicator:"[...]",collapseIndicator:"[^]",truncateText:" "},oe([d.observable],ie.prototype,"isTextTruncated",void 0);var ae=ie=oe([p.observer],ie);function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function le(e,t){return!t||"object"!==pe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pe(e){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var de=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":pe(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},fe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),le(this,ue(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}(t,s["Component"]),n=t,(r=[{key:"render",value:function(){var e=null,t=null;if(this.props.cache){var n=this.props.cache.get(this.props.pdbId);if(null===n)e=s.createElement(O.p,{status:O.o.LOADING}),t=s.createElement(O.p,{status:O.o.LOADING});else if("error"===n.status)e=s.createElement(O.p,{status:O.o.ERROR}),t=s.createElement(O.p,{status:O.o.ERROR});else if(null===n.data)e=s.createElement(O.p,{status:O.o.NA}),t=s.createElement(O.p,{status:O.o.NA});else{var r=Object(X.c)(n.data,this.props.chainId);e=r.pdbInfo,t=r.moleculeInfo}}return s.createElement("div",{className:this.props.truncateText?"col col-sm-12":""},s.createElement("div",{className:this.props.truncateText?"row":""},s.createElement("div",{className:"pull-left",style:{paddingRight:5}},s.createElement("span",{style:{fontWeight:this.props.summaryFormat?"bold":"normal"}},s.createElement("span",null,this.props.summaryFormat?"pdb":"PDB"),!this.props.summaryFormat&&s.createElement("span",{style:{paddingLeft:5}},s.createElement("a",{href:"http://www.rcsb.org/pdb/explore/explore.do?structureId=".concat(this.props.pdbId),target:"_blank"},s.createElement("b",null,this.props.pdbId))),s.createElement("span",null,":"))),s.createElement("div",{"data-test":"pdbChainInfoText"},this.props.truncateText?s.createElement(ae,{text:e}):s.createElement("span",null,e))),s.createElement("div",{className:this.props.truncateText?"row":""},s.createElement("div",{className:"pull-left",style:{paddingRight:5}},s.createElement("span",{style:{fontWeight:this.props.summaryFormat?"bold":"normal"}},s.createElement("span",null,this.props.summaryFormat?"chain":"Chain"),!this.props.summaryFormat&&s.createElement("span",{style:{paddingLeft:3}},s.createElement("b",null,this.props.chainId)),s.createElement("span",null,":"))),s.createElement("div",null,this.props.truncateText?s.createElement(ae,{text:t}):s.createElement("span",null,t))))}}])&&se(n.prototype,r),o&&se(n,o),t}(),he=fe=de([p.observer],fe);function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ge(e,t){return!t||"object"!==me(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ve(e,t){return(ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _e=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=ge(this,be(t).apply(this,arguments)))._script=[],e}var n,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ve(e,t)}(t,j),n=t,s=[{key:"PROTEIN_SCHEME_PRESETS",get:function(){var e={};return e[r.CARTOON]="hide everything; show cartoon;",e[r.SPACE_FILLING]="hide everything; show spheres;",e[r.BALL_AND_STICK]="hide everything; show spheres; show sticks; alter all, vdw=0.50",e[r.RIBBON]="hide everything; show ribbon;",e[r.TRACE]=e[r.RIBBON],e}}],(o=[{key:"generateScript",value:function(e,t,n,r){return this._script=[],this.reinitialize(),this.bgColor(r.backgroundColor||j.defaultProps.backgroundColor),this.loadPdb(e),this.updateVisualStyle(n,t,r),this.selectNone(),this._script.join("\n")}},{key:"reinitialize",value:function(){this._script.push("reinitialize;")}},{key:"bgColor",value:function(e){this._script.push("bg_color ".concat(this.formatColor(e),";"))}},{key:"loadPdb",value:function(e){this._script.push("fetch ".concat(e,", async=0;"))}},{key:"setScheme",value:function(e){this._script.push(t.PROTEIN_SCHEME_PRESETS[e])}},{key:"setColor",value:function(e){this._script.push("color ".concat(this.formatColor(e),", sele;"))}},{key:"selectChain",value:function(e){this._script.push("select chain ".concat(e,";"))}},{key:"selectAlphaHelix",value:function(e){this._script.push("select (chain ".concat(e,") and (ss h);"))}},{key:"selectBetaSheet",value:function(e){this._script.push("select (chain ".concat(e,") and (ss s);"))}},{key:"selectResidues",value:function(e,t){this._script.push("select (resi ".concat(e.join(","),") and (chain ").concat(t,");"))}},{key:"selectSideChains",value:function(e,t){this._script.push("select ((resi ".concat(e.join(","),") and (chain ").concat(t,") and (not name c+n+o));"))}},{key:"setTransparency",value:function(e){this._script.push("set transparency, ".concat(e/10,", sele;")),this._script.push("set cartoon_transparency, ".concat(e/10,", sele;")),this._script.push("set sphere_transparency, ".concat(e/10,", sele;")),this._script.push("set stick_transparency, ".concat(e/10,", sele;"))}},{key:"enableBallAndStick",value:function(){this._script.push("show spheres, sele; show sticks, sele; alter sele, vdw=0.50;")}},{key:"disableBallAndStick",value:function(){this._script.push("hide spheres, sele; hide sticks, sele;")}},{key:"rainbowColor",value:function(){return this._script.push("spectrum count, rainbow_rev, sele;")}},{key:"cpkColor",value:function(){this._script.push("util.cbaw sele;")}},{key:"hideBoundMolecules",value:function(){this._script.push("hide everything, not resn ".concat("asp+glu+arg+lys+his+asn+thr+cys+gln+tyr+ser+gly+ala+leu+val+ile+met+trp+phe+pro",";"))}},{key:"formatColor",value:function(e){return e.replace("#","0x")}},{key:"selectAll",value:function(){this._script.push("select all;")}},{key:"selectNone",value:function(){this._script.push("select none;")}},{key:"updateResidueStyle",value:function(e,t,n){var r=this,o=j.defaultProps,s=n.highlightColor||o.highlightColor,u=l.groupBy(e,function(e){return e.highlighted?s:e.color});l.each(l.keys(u),function(e){var s=u[e].map(function(e){return e.positionRange}),l=r.convertPositionsToResCode(s);u[e][0].highlighted?(r.selectResidues(l,t),r.setColor(n.highlightColor||o.highlightColor)):n.mutationColor===a.MUTATION_TYPE?(r.selectResidues(l,t),r.setColor(e)):n.mutationColor===a.UNIFORM&&(r.selectResidues(l,t),r.setColor(n.uniformMutationColor||o.uniformMutationColor));var c=n.sideChain===i.ALL||!0===u[e][0].highlighted&&n.sideChain===i.SELECTED;r.updateSideChains(t,l,c,n)})}},{key:"updateSideChains",value:function(e,t,n,o){n&&o.proteinScheme!==r.SPACE_FILLING&&(this.selectSideChains(t,e),this.enableBallAndStick())}}])&&ye(n.prototype,o),s&&ye(n,s),t}(),Se=n(966),Ee=n.n(Se);function we(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ce(e){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ke(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Te(e,t){return(Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pe(e){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var xe=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Pe(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Ae=function(e){function t(e){var n,s,l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s=this,(n=!(l=Ce(t).call(this,e))||"object"!==Pe(l)&&"function"!=typeof l?ke(s):l).isCollapsed=!1,n.isIncreasedSize=!1,n.proteinScheme=r.CARTOON,n.proteinColor=o.UNIFORM,n.sideChain=i.SELECTED,n.mutationColor=a.MUTATION_TYPE,n.displayBoundMolecules=!0,n.containerRefHandler=n.containerRefHandler.bind(ke(n)),n.toggleCollapse=n.toggleCollapse.bind(ke(n)),n.toggleDoubleSize=n.toggleDoubleSize.bind(ke(n)),n.handleProteinSchemeChange=n.handleProteinSchemeChange.bind(ke(n)),n.handleProteinColorChange=n.handleProteinColorChange.bind(ke(n)),n.handleSideChainChange=n.handleSideChainChange.bind(ke(n)),n.handleMutationColorChange=n.handleMutationColorChange.bind(ke(n)),n.handleBoundMoleculeChange=n.handleBoundMoleculeChange.bind(ke(n)),n.handlePyMolDownload=n.handlePyMolDownload.bind(ke(n)),n}var n,u,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Te(e,t)}(t,s["Component"]),n=t,(u=[{key:"selectionTitle",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"top",r=null;return t&&(r=this.defaultInfoTooltip(t,n)),s.createElement("span",null,e," ",r,":")}},{key:"defaultInfoTooltip",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top";return s.createElement(O.d,{placement:t,overlay:function(){return e},arrowContent:s.createElement("div",{className:"rc-tooltip-arrow-inner"}),destroyTooltipOnHide:!0},s.createElement("i",{className:"fa fa-info-circle"}))}},{key:"proteinColorTooltipContent",value:function(){return s.createElement("div",{style:{maxWidth:400,maxHeight:200,overflowY:"auto"}},"Color options for the protein structure. ",s.createElement("br",null),s.createElement("br",null),s.createElement("b",null,"Uniform:")," Colors the entire protein structure with a",s.createElement("span",{className:Ee.a.loop}," single color"),". ",s.createElement("br",null),s.createElement("b",null,"Secondary structure:")," Colors the protein by secondary structure. Assigns different colors for"," ",s.createElement("span",{className:Ee.a["alpha-helix"]},"alpha helices"),",",s.createElement("span",{className:Ee.a["beta-sheet"]}," beta sheets"),", and",s.createElement("span",{className:Ee.a.loop}," loops"),". This color option is not available for the space-filling protein scheme."," ",s.createElement("br",null),s.createElement("b",null,"N-C rainbow:")," Colors the protein with a rainbow gradient from red (N-terminus) to blue (C-terminus). ",s.createElement("br",null),s.createElement("b",null,"Atom Type:")," Colors the structure with respect to the atom type (CPK color scheme). This color option is only available for the space-filling protein scheme. ",s.createElement("br",null),s.createElement("br",null),"The selected chain is always displayed with full opacity while the rest of the structure has some transparency to help better focusing on the selected chain.")}},{key:"sideChainTooltipContent",value:function(){return s.createElement("div",{style:{maxWidth:400,maxHeight:200,overflowY:"auto"}},"Display options for the side chain atoms. ",s.createElement("br",null),s.createElement("br",null),s.createElement("b",null,"All:")," Displays the side chain atoms for every mapped residue. ",s.createElement("br",null),s.createElement("b",null,"Selected:")," Displays the side chain atoms only for the selected mutations. ",s.createElement("br",null),s.createElement("b",null,"None:")," Hides the side chain atoms. ",s.createElement("br",null),s.createElement("br",null),"This option has no effect for the space-filling protein scheme.")}},{key:"mutationColorTooltipContent",value:function(){return s.createElement("div",{style:{maxWidth:400,maxHeight:200,overflowY:"auto"}},"Color options for the mapped mutations. ",s.createElement("br",null),s.createElement("br",null),s.createElement("b",null,"Uniform:")," Colors all mutated residues with a",s.createElement("span",{className:Ee.a["uniform-mutation"]}," ","single color"),". ",s.createElement("br",null),s.createElement("b",null,"Mutation type:")," Enables residue coloring by mutation type. Mutation types and corresponding color codes are as follows:",s.createElement("ul",null,s.createElement("li",null,s.createElement("span",{className:Ee.a["missense-mutation"]},"Missense Mutations")),s.createElement("li",null,s.createElement("span",{className:Ee.a["trunc-mutation"]},"Truncating Mutations"),s.createElement("span",null," (Nonsense, Nonstop, FS del, FS ins)")),s.createElement("li",null,s.createElement("span",{className:Ee.a["inframe-mutation"]},"Inframe Mutations"),s.createElement("span",null," (IF del, IF ins)"))),s.createElement("b",null,"None:")," Disables coloring of the mutated residues except for manually selected (highlighted) residues. ",s.createElement("br",null),s.createElement("br",null),"Highlighted residues are colored with"," ",s.createElement("span",{className:Ee.a.highlighted},"yellow"),".")}},{key:"boundMoleculesTooltipContent",value:function(){return s.createElement("div",{style:{maxWidth:400,maxHeight:200,overflowY:"auto"}},"Displays co-crystalized molecules. This option has no effect if the current structure does not contain any co-crystalized bound molecules.")}},{key:"helpTooltipContent",value:function(){return s.createElement("div",{style:{maxWidth:400,maxHeight:200,overflowY:"auto"}},s.createElement("b",null,"Zoom in/out:")," Press and hold the SHIFT key and the left mouse button, and then move the mouse backward/forward.",s.createElement("br",null),s.createElement("b",null,"Pan:")," Press and hold the CTRL key, click and hold the left mouse button, and then move the mouse in the desired direction.",s.createElement("br",null),s.createElement("b",null,"Rotate:")," Press and hold the left mouse button, and then move the mouse in the desired direction to rotate along the x and y axes.",s.createElement("br",null))}},{key:"proteinStyleMenu",value:function(){return s.createElement("span",null,s.createElement("div",{className:"row text-center"},s.createElement("span",null,"Protein Style")),s.createElement("div",{className:"row"},s.createElement("div",{className:"col col-sm-10 col-sm-offset-1"},s.createElement("hr",null))),s.createElement("div",{className:"row"},s.createElement(g.Checkbox,{checked:this.displayBoundMolecules,onChange:this.handleBoundMoleculeChange},"Display bound molecules"," ",this.defaultInfoTooltip(this.boundMoleculesTooltipContent()))),s.createElement("div",{className:"row"},s.createElement("div",{className:"col col-sm-6"},s.createElement("div",{className:"row"},this.selectionTitle("Scheme")),s.createElement("div",{className:"row"},s.createElement(g.FormControl,{className:Ee.a["default-option-select"],componentClass:"select",value:"".concat(this.proteinScheme),onChange:this.handleProteinSchemeChange},s.createElement("option",{value:r.CARTOON},"cartoon"),s.createElement("option",{value:r.SPACE_FILLING},"space-filling"),s.createElement("option",{value:r.TRACE},"trace")))),s.createElement("div",{className:"col col-sm-6"},s.createElement("div",{className:"row"},this.selectionTitle("Color",this.proteinColorTooltipContent())),s.createElement("div",{className:"row"},s.createElement(g.FormControl,{className:Ee.a["default-option-select"],componentClass:"select",value:"".concat(this.proteinColor),onChange:this.handleProteinColorChange},s.createElement("option",{value:o.UNIFORM},"uniform"),s.createElement("option",{value:o.SECONDARY_STRUCTURE,disabled:this.colorBySecondaryStructureDisabled},"secondary structure"),s.createElement("option",{value:o.NC_RAINBOW,disabled:this.colorByNCRainbowDisabled},"N-C rainbow"),s.createElement("option",{value:o.ATOM_TYPE,disabled:this.colorByAtomTypeDisabled},"atom type"))))))}},{key:"mutationStyleMenu",value:function(){return s.createElement("span",null,s.createElement("div",{className:"row text-center"},s.createElement("span",null,"Mutation Style")),s.createElement("div",{className:"row"},s.createElement("div",{className:"col col-sm-10 col-sm-offset-1"},s.createElement("hr",null))),s.createElement("div",{className:"row"},s.createElement("div",{className:"col col-sm-6"},s.createElement("div",{className:"row"},this.selectionTitle("Side Chain",this.sideChainTooltipContent())),s.createElement("div",{className:"row"},s.createElement(g.FormControl,{className:Ee.a["default-option-select"],componentClass:"select",value:"".concat(this.sideChain),onChange:this.handleSideChainChange},s.createElement("option",{value:i.ALL},"all"),s.createElement("option",{value:i.SELECTED},"selected"),s.createElement("option",{value:i.NONE},"none")))),s.createElement("div",{className:"col col-sm-6"},s.createElement("div",{className:"row"},this.selectionTitle("Color",this.mutationColorTooltipContent(),"left")),s.createElement("div",{className:"row"},s.createElement(g.FormControl,{className:Ee.a["default-option-select"],componentClass:"select",value:"".concat(this.mutationColor),onChange:this.handleMutationColorChange},s.createElement("option",{value:a.UNIFORM},"uniform"),s.createElement("option",{value:a.MUTATION_TYPE},"mutation type"),s.createElement("option",{value:a.NONE},"none"))))))}},{key:"topToolbar",value:function(){return s.createElement("div",{className:"row"},s.createElement("div",{className:"col col-sm-6"},s.createElement(g.ButtonGroup,null,s.createElement(O.d,{overlay:s.createElement("span",null,"Download PyMol script"),placement:"top"},s.createElement(g.Button,{className:"btn-sm",onClick:this.handlePyMolDownload},s.createElement("i",{className:"fa fa-cloud-download"})," PyMol")))),s.createElement("div",{className:"col col-sm-6"},s.createElement("span",{className:"pull-right"},"how to pan/zoom/rotate?"," ",this.defaultInfoTooltip(this.helpTooltipContent(),"left"))))}},{key:"header",value:function(){return s.createElement("div",{className:h()("row",Ee.a.header)},s.createElement("div",{className:"col col-sm-10"},s.createElement("span",null,"3D Structure")),s.createElement("div",{className:"col col-sm-2"},s.createElement("span",{className:"pull-right"},s.createElement("i",{className:h()("fa",{"fa-compress":this.isIncreasedSize,"fa-expand":!this.isIncreasedSize}),onClick:this.toggleDoubleSize,style:{marginRight:5,cursor:"pointer"}}),s.createElement("i",{className:"fa fa-minus-circle",onClick:this.toggleCollapse,style:{marginRight:5,cursor:"pointer"}}),s.createElement("i",{className:"fa fa-times-circle",onClick:this.props.onClose,style:{cursor:"pointer"}}))))}},{key:"mainContent",value:function(){return this.pdbId&&this.chainId&&this.residues?s.createElement("span",null,s.createElement("div",{className:"row"},s.createElement(he,{pdbId:this.pdbId,chainId:this.chainId,cache:this.props.pdbHeaderCache,truncateText:!0})),s.createElement(b.If,{condition:this.residueWarning.length>0},s.createElement("div",{className:"row"},s.createElement("div",{className:"col col-sm-12 text-center"},s.createElement("span",{className:"text-danger"},this.residueWarning)))),s.createElement("div",{className:"row",style:{paddingTop:5,paddingBottom:5}},s.createElement(Y,{displayBoundMolecules:this.displayBoundMolecules,proteinScheme:this.proteinScheme,proteinColor:this.proteinColor,sideChain:this.sideChain,mutationColor:this.mutationColor,pdbId:this.pdbId,chainId:this.chainId,residues:this.residues,bounds:this.structureViewerBounds,containerRef:this.containerRefHandler}))):s.createElement("div",{style:{textAlign:"center"}},s.createElement(v.ThreeBounce,{size:25,style:{display:"inline-block",padding:25}}))}},{key:"render",value:function(){return s.createElement(S.a,{handle:".structure-viewer-header"},s.createElement("div",{className:h()(Ee.a["main-3d-panel"],we({},Ee.a["increased-size-panel"],this.isIncreasedSize))},s.createElement("div",{className:"structure-viewer-header row"},this.header(),s.createElement("hr",{style:{borderTopColor:"#BBBBBB"}})),s.createElement("div",{className:h()(Ee.a.body,we({},Ee.a["collapsed-panel"],this.isCollapsed))},this.mainContent(),s.createElement("div",{className:"row"},this.topToolbar(),s.createElement("hr",null)),s.createElement("div",{className:"row"},s.createElement("div",{className:"col col-sm-6"},this.proteinStyleMenu()),s.createElement("div",{className:"col col-sm-6"},this.mutationStyleMenu())))))}},{key:"containerRefHandler",value:function(e){this._3dMolDiv=e}},{key:"toggleCollapse",value:function(){this.isCollapsed=!this.isCollapsed}},{key:"toggleDoubleSize",value:function(){this.isIncreasedSize=!this.isIncreasedSize}},{key:"handleProteinSchemeChange",value:function(e){this.proteinScheme=parseInt(e.target.value,10),(this.proteinScheme!==r.SPACE_FILLING||this.proteinColor!==o.NC_RAINBOW&&this.proteinColor!==o.SECONDARY_STRUCTURE)&&(this.proteinScheme!==r.TRACE&&this.proteinScheme!==r.CARTOON||this.proteinColor!==o.ATOM_TYPE)||(this.proteinColor=o.UNIFORM)}},{key:"handleProteinColorChange",value:function(e){this.proteinColor=parseInt(e.target.value,10)}},{key:"handleSideChainChange",value:function(e){this.sideChain=parseInt(e.target.value,10)}},{key:"handleMutationColorChange",value:function(e){this.mutationColor=parseInt(e.target.value,10)}},{key:"handleBoundMoleculeChange",value:function(){this.displayBoundMolecules=!this.displayBoundMolecules}},{key:"handlePyMolDownload",value:function(){if(this.pdbId&&this.chainId){var e="".concat(this.pdbId,"_").concat(this.chainId,".pml");w()(this.pyMolScript,e)}}},{key:"structureViewerBounds",get:function(){var e,t;return this.isIncreasedSize?(e=this._3dMolDiv?Math.floor(this._3dMolDiv.offsetWidth*(5/3)):698,t=this._3dMolDiv?2*this._3dMolDiv.offsetHeight:350):(e=this._3dMolDiv?Math.floor(this._3dMolDiv.offsetWidth/(5/3)):450,t=this._3dMolDiv?this._3dMolDiv.offsetHeight/2:350),{width:e,height:t}}},{key:"pdbId",get:function(){return this.pdbChain?this.pdbChain.pdbId:void 0}},{key:"chainId",get:function(){return this.pdbChain?this.pdbChain.chain:void 0}},{key:"pdbChain",get:function(){var e=this.props.pdbChainDataStore.sortedFilteredSelectedData;return 0===e.length&&(e=this.props.pdbChainDataStore.allData),0===e.length?void 0:e[0]}},{key:"residueWarning",get:function(){var e="";if(0===this.proteinPositions.length||this.residueMappingData&&0===this.residueMappingData.filter(function(e){return null===e||null!==e.data}).length)e="None of the mutations can be mapped onto this structure";else{var t=l.keys(this.selectedMutationsByPosition).length,n=t-this.mappedSelectedPositions.length;1===t&&1===n?e="Selected mutation cannot be mapped onto this structure":n>0&&(e="".concat(n," of the selections cannot be mapped onto this structure"))}return e}},{key:"residues",get:function(){var e=this;if(this.residueMappingData){var t=[];return this.residueMappingData.forEach(function(n){if(n&&n.data){var r=e.mutationsByPosition[n.data.queryPosition],o=e.props.mutationDataStore&&(e.props.mutationDataStore.isPositionSelected(n.data.queryPosition)||e.props.mutationDataStore.isPositionHighlighted(n.data.queryPosition))||!1;r&&r.length>0&&t.push({positionRange:{start:{position:n.data.pdbPosition},end:{position:n.data.pdbPosition}},color:Object(C.h)(r,e.props),highlighted:o})}}),l.uniq(t)}}},{key:"residueMappingData",get:function(){if(0!==this.alignmentIds.length){var e=[];if(this.props.residueMappingCache&&this.props.uniprotId&&this.pdbId&&this.chainId&&this.proteinPositions.length>0){var t=this.props.residueMappingCache.get({uniprotId:this.props.uniprotId,pdbId:this.pdbId,chainId:this.chainId,uniprotPositions:this.proteinPositions});t.result&&(e=t.result)}return e}}},{key:"mappedSelectedPositions",get:function(){var e=this;if(!this.residueMappingData)return[];var t=[];return this.residueMappingData.forEach(function(n){n&&n.data&&e.props.mutationDataStore&&e.props.mutationDataStore.isPositionSelected(n.data.queryPosition)&&t.push(n.data.queryPosition)}),l.uniq(t)}},{key:"alignmentIds",get:function(){var e=[];this.pdbChain&&this.props.pdbAlignmentIndex&&(e=void 0===this.props.pdbAlignmentIndex[this.pdbChain.pdbId][this.pdbChain.chain]?[]:this.props.pdbAlignmentIndex[this.pdbChain.pdbId][this.pdbChain.chain].map(function(e){return e.alignmentId}));return l.uniq(e)}},{key:"mutationsByPosition",get:function(){return this.props.mutationDataStore?Object(C.l)(this.props.mutationDataStore.sortedFilteredData):{}}},{key:"selectedMutationsByPosition",get:function(){return this.props.mutationDataStore?Object(C.l)(this.props.mutationDataStore.sortedFilteredSelectedData):{}}},{key:"proteinPositions",get:function(){var e=[];return this.props.mutationDataStore&&this.pdbChain&&(e=Object(C.i)(this.props.mutationDataStore.sortedFilteredData,this.pdbChain.uniprotStart,this.pdbChain.uniprotEnd)),e}},{key:"pyMolScript",get:function(){var e=new _e,t={displayBoundMolecules:this.displayBoundMolecules,proteinScheme:this.proteinScheme,proteinColor:this.proteinColor,sideChain:this.sideChain,mutationColor:this.mutationColor};return this.pdbId&&this.chainId?e.generateScript(this.pdbId,this.chainId,this.residues||[],t):""}},{key:"colorBySecondaryStructureDisabled",get:function(){return this.proteinScheme===r.SPACE_FILLING}},{key:"colorByNCRainbowDisabled",get:function(){return this.proteinScheme===r.SPACE_FILLING}},{key:"colorByAtomTypeDisabled",get:function(){return this.proteinScheme!==r.SPACE_FILLING}}])&&Oe(n.prototype,u),c&&Oe(n,c),t}();xe([d.observable],Ae.prototype,"isCollapsed",void 0),xe([d.observable],Ae.prototype,"isIncreasedSize",void 0),xe([d.observable],Ae.prototype,"proteinScheme",void 0),xe([d.observable],Ae.prototype,"proteinColor",void 0),xe([d.observable],Ae.prototype,"sideChain",void 0),xe([d.observable],Ae.prototype,"mutationColor",void 0),xe([d.observable],Ae.prototype,"displayBoundMolecules",void 0),xe([d.computed],Ae.prototype,"structureViewerBounds",null),xe([d.computed],Ae.prototype,"pdbId",null),xe([d.computed],Ae.prototype,"chainId",null),xe([d.computed],Ae.prototype,"pdbChain",null),xe([d.computed],Ae.prototype,"residueWarning",null),xe([d.computed],Ae.prototype,"residues",null),xe([d.computed],Ae.prototype,"residueMappingData",null),xe([d.computed],Ae.prototype,"mappedSelectedPositions",null),xe([d.computed],Ae.prototype,"alignmentIds",null),xe([d.computed],Ae.prototype,"mutationsByPosition",null),xe([d.computed],Ae.prototype,"selectedMutationsByPosition",null),xe([d.computed],Ae.prototype,"proteinPositions",null),xe([d.computed],Ae.prototype,"pyMolScript",null),xe([d.computed],Ae.prototype,"colorBySecondaryStructureDisabled",null),xe([d.computed],Ae.prototype,"colorByNCRainbowDisabled",null),xe([d.computed],Ae.prototype,"colorByAtomTypeDisabled",null);var je=Ae=xe([p.observer],Ae);function Ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ne=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.regions=t?Me(t):[]}var t,n,r;return t=e,(n=[{key:"check",value:function(e,t){void 0===t&&(t=e);for(var n,r,o=this.regions,i=0,a=o.length,s=!1;i<a;)if((r=o[n=Math.floor((i+a)/2)])[0]>t)a=n;else{if(!(r[1]<e)){s=!0;break}i=n+1}return s}},{key:"add",value:function(e,t){this.regions.push([e,t]),this.regions=Me(this.regions)}},{key:"_getHotspotRegions",value:function(){return this.regions}}])&&Ie(t.prototype,n),r&&Ie(t,r),e}();function Me(e){if(0===e.length)return[];e.sort(function(e,t){return e[0]<t[0]?-1:1});for(var t,n=[],r=[e[0][0],e[0][1]],o=1;o<=e.length;)o===e.length?n.push(r):(t=e[o])[0]>r[1]?(n.push(r),r=[e[o][0],e[o][1]]):r[1]=Math.max(r[1],t[1]),o++;return n}function De(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Re(e,t){return!t||"object"!==Ve(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Le(e){return(Le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ge(e,t){return(Ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ve(e){return(Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Be=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Ve(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Fe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Re(this,Le(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ge(e,t)}(t,s["Component"]),n=t,(r=[{key:"render",value:function(){var e=this;return s.createElement("g",{key:this.props.uniqueHitZoneClassName},this.segmentsAndGaps.map(function(t){return t.gap?s.createElement("line",{stroke:"#666666",strokeWidth:"0.5",x1:e.props.positionToX(t.start),x2:e.props.positionToX(t.end),y1:e.props.y+e.props.height/2,y2:e.props.y+e.props.height/2}):s.createElement("rect",{fill:"#3366cc",fillOpacity:e.props.opacity,stroke:"#666666",strokeWidth:"0.5",x:e.props.positionToX(t.start),y:e.props.y,width:e.props.positionToX(t.end)-e.props.positionToX(t.start),height:e.props.height})}),s.createElement("rect",{stroke:"#FF9900",strokeWidth:"2",fillOpacity:"0",strokeOpacity:+!!this.props.highlighted,height:this.props.height,width:this.props.positionToX(this.props.end)-this.props.positionToX(this.props.start),x:this.props.positionToX(this.props.start),y:this.props.y,className:this.props.uniqueHitZoneClassName}))}},{key:"segmentsAndGaps",get:function(){var e=[],t=l.sortBy(this.props.gaps,function(e){return e.start});if(0===t.length)e.push({gap:!1,start:this.props.start,end:this.props.end});else{t[0].start>this.props.start&&e.push({gap:!1,start:this.props.start,end:t[0].start}),e.push({gap:!0,start:t[0].start,end:t[0].end});for(var n=1;n<t.length;n++)e.push({gap:!1,start:t[n-1].end,end:t[n].start}),e.push({gap:!0,start:t[n].start,end:t[n].end});var r=t[t.length-1];r.end<this.props.end&&e.push({gap:!1,start:r.end,end:this.props.end})}return e}}])&&De(n.prototype,r),o&&De(n,o),t}();Be([d.computed],Fe.prototype,"segmentsAndGaps",null);var He=Fe=Be([p.observer],Fe);function Ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function We(e){return(We=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ze(e,t){return(ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qe(e){return(Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ke=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Qe(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Ye=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=We(t).call(this,e))||"object"!==Qe(o)&&"function"!=typeof o?qe(r):o).rowHeight=6,n.rowPadding=3,n.chainComponents={},n.onMouseOver=n.onMouseOver.bind(qe(n)),n.positionToX=n.positionToX.bind(qe(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ze(e,t)}(t,s["Component"]),n=t,(r=[{key:"positionToX",value:function(e){return e*this.props.width/this.props.proteinLength}},{key:"makeChainIdClass",value:function(e){return"".concat("chain-").concat(e)}},{key:"getChainId",value:function(e){var t=e.split(/[\s]+/g).map(function(e){return e.match(new RegExp("^(".concat("chain-",".*)$")))}).find(function(e){return null!==e});return t&&t[1]||null}},{key:"chainY",value:function(e){return e*(this.rowHeight+this.rowPadding)}},{key:"onMouseOver",value:function(e){var t=e.target,n=t.getAttribute("class")||"",r=this.getChainId(n);if(null!==r){var o=this.chainComponents[r];o&&this.props.setHitZone&&this.props.setHitZone({x:parseInt(t.getAttribute("x")||"0",10),y:parseInt(t.getAttribute("y")||"0",10),width:parseInt(t.getAttribute("width")||"0",10),height:parseInt(t.getAttribute("height")||"0",10)},o.props.uid)}}},{key:"render",value:function(){return s.createElement("div",null,s.createElement("div",{onMouseOver:this.onMouseOver},s.createElement("svg",{width:this.props.width,height:this.svgHeight},this.rows)))}},{key:"rowSpecs",get:function(){var e=[[]],t=[new Ne],n=!0,r=!1,o=void 0;try{for(var i,a=function(){var n=i.value,r=l.findIndex(t,function(e){return!e.check(n.start,n.end)});-1===r&&(r=e.length,e.push([]),t.push(new Ne)),e[r].push(n),t[r].add(n.start,n.end)},s=this.props.chains[Symbol.iterator]();!(n=(i=s.next()).done);n=!0)a()}catch(e){r=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return e}},{key:"rows",get:function(){var e=this,t=0;this.chainComponents={};var n={},r=this.rowSpecs.map(function(r,o){return s.createElement("g",{key:o},r.map(function(r){var i=e.makeChainIdClass(t++),a=r.uid,l=e.chainY(o);return n[a]=l,s.createElement(He,{ref:function(t){null!==t&&(e.chainComponents[i]=t)},positionToX:e.positionToX,y:l,height:e.rowHeight,uniqueHitZoneClassName:i,start:r.start,end:r.end,gaps:r.gaps,opacity:r.opacity,uid:a,highlighted:e.props.selectedChainUid===r.uid})}))});return this.props.setChainUidToY&&this.props.setChainUidToY(n),r}},{key:"svgHeight",get:function(){return this.rows.length*this.rowHeight+(this.rows.length-1)*this.rowPadding}}])&&Ue(n.prototype,r),o&&Ue(n,o),t}();Ke([d.observable],Ye.prototype,"rowHeight",void 0),Ke([d.observable],Ye.prototype,"rowPadding",void 0),Ke([d.computed],Ye.prototype,"rowSpecs",null),Ke([d.computed],Ye.prototype,"rows",null),Ke([d.computed],Ye.prototype,"svgHeight",null);var Xe=Ye=Ke([p.observer],Ye),Ze=n(96);function Je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var $e=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getOrganism",value:function(e,t){var n="NA";return l.find(e.compound,function(r){if(-1!=l.indexOf(r.chain,t.toLowerCase())&&null!=e.source[r.mol_id])return n=e.source[r.mol_id].organism_scientific||n,r}),n}},{key:"getOrganismFromCache",value:function(t,n){if(!t)return"";var r=t.get(n.pdbId);return r&&r.data?e.getOrganism(r.data,n.chain):""}}],(n=null)&&Je(t.prototype,n),r&&Je(t,r),e}(),et=n(863);function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rt(e,t){return!t||"object"!==st(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ot(e){return(ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function it(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&at(e,t)}function at(e,t){return(at=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function st(e){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var lt=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":st(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ut=function(e){function t(){return nt(this,t),rt(this,ot(t).apply(this,arguments))}return it(t,Ze["b"]),t}(),ct=function(e){function t(){return nt(this,t),rt(this,ot(t).apply(this,arguments))}var n,r,o;return it(t,s["Component"]),n=t,(r=[{key:"render",value:function(){return s.createElement(ut,{showColumnVisibility:!1,showCopyDownload:!1,itemsLabel:"PDB chain",itemsLabelPlural:"PDB chains",paginationProps:{showItemsPerPageSelector:!1,showMoreButton:!1},initialItemsPerPage:6,columns:this.columns,dataStore:this.props.dataStore,pageToHighlight:!0})}},{key:"columns",get:function(){var e=this,t=[];return t.push({name:"PDB Id",render:function(e){return s.createElement("a",{href:"http://www.rcsb.org/pdb/explore/explore.do?structureId=".concat(e.pdbId),target:"_blank"},e.pdbId)},sortBy:function(e){return e.pdbId},filter:function(e,t,n){return e.pdbId.toUpperCase().indexOf(n)>-1}}),t.push({name:"Chain",render:function(t){return s.createElement("span",null,s.createElement("span",{style:{float:"left",fontWeight:"bold",fontStyle:"italic"}},t.chain),s.createElement("a",{style:{float:"right",fontWeight:"bold",cursor:"pointer"},onClick:function(){e.props.dataStore.selectUid(e.props.dataStore.getChainUid(t))}},"3D"))},sortBy:function(e){return e.chain},filter:function(e,t,n){return e.chain.toUpperCase().indexOf(n)>-1}}),t.push({name:"Uniprot Positions",render:function(e){return s.createElement("span",null,"".concat(e.uniprotStart,"-").concat(e.uniprotEnd))},sortBy:function(e){return[e.uniprotStart,e.uniprotEnd]},filter:function(e,t){return(e.uniprotStart+"").indexOf(t)>-1||(e.uniprotEnd+"").indexOf(t)>-1}}),t.push({name:"Organism",render:Object(et.a)(function(t){return e.props.cache?e.props.cache.get(t.pdbId):null},function(e,t){return s.createElement("span",null,$e.getOrganism(e,t.chain))}),sortBy:function(t){return $e.getOrganismFromCache(e.props.cache,t)},filter:function(t,n,r){return($e.getOrganismFromCache(e.props.cache,t)||"").toUpperCase().indexOf(r)>-1},visible:!!this.props.cache}),t.push({name:"Summary",render:function(t){return s.createElement(he,{pdbId:t.pdbId,chainId:t.chain,cache:e.props.cache,truncateText:!1,summaryFormat:!0})},filter:function(t,n,r){if(!e.props.cache)return!1;var o=e.props.cache.get(t.pdbId);if(o&&o.data){var i=Object(X.c)(o.data,t.chain);return i.pdbInfo.toUpperCase().indexOf(r)>-1||(i.moleculeInfo||"").toUpperCase().indexOf(r)>-1}return!1},visible:!!this.props.cache}),t}}])&&tt(n.prototype,r),o&&tt(n,o),t}();lt([d.computed],ct.prototype,"columns",null);var pt=ct=lt([p.observer],ct),dt=n(196),ft=n(164),ht=n(846);function mt(){return(mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gt(e,t){return!t||"object"!==_t(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bt(e){return(bt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vt(e,t){return(vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _t(e){return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var St=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":_t(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Et=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=gt(this,bt(t).call(this,e))).isExpanded=!1,n.pdbChainTableShown=!1,n.hitZoneConfig={x:0,y:0,width:0,height:0,onClick:function(){}},n._chainScrollY=0,n.collapseTimeout=null,n.expandTimeout=null,n.chainUidToY={},n.expandDelayMs=750,n.collapseDelayMs=3e3,n.handlers={onMouseEnter:Object(d.action)(function(){n.expandTimeout=window.setTimeout(function(){n.isExpanded=!0},n.expandDelayMs),n.collapseTimeout&&window.clearTimeout(n.collapseTimeout)}),onMouseLeave:Object(d.action)(function(){n.collapseTimeout=window.setTimeout(function(){n.isExpanded=!1},n.collapseDelayMs),n.expandTimeout&&window.clearTimeout(n.expandTimeout)}),chainDivRef:function(e){n.chainDiv=e},onChainScroll:function(){n.chainDiv&&n.isExpanded&&(n._chainScrollY=n.chainDiv.scrollTop)},togglePDBTable:Object(d.action)(function(){n.pdbChainTableShown=!n.pdbChainTableShown}),getTooltipContent:function(){return n.hoveredChain?s.createElement(he,{pdbId:n.hoveredChain.pdbId,chainId:n.hoveredChain.chain,cache:n.props.pdbHeaderCache}):null},setHitZone:function(e,t){n.hitZoneConfig.x=e.x,n.hitZoneConfig.y=e.y,n.hitZoneConfig.width=e.width,n.hitZoneConfig.height=e.height,n.hitZoneConfig.onClick=function(){n.selectChain(t)},n.hoveredChain=n.props.store.pdbChainDataStore.getPdbChain(t)},setChainUidToY:function(e){n.chainUidToY=e}},n.onChainSelectReaction=Object(d.reaction)(function(){return n.props.store.pdbChainDataStore.selectedUid},function(e){var t=n.chainUidToY[e];if(void 0!==t&&(t<n.chainDiv.scrollTop||t>n.chainDiv.scrollTop+n.props.maxChainsHeight)){var r=n.props.maxChainsHeight/2;n.chainDiv.scrollTop=t-r}}),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vt(e,t)}(t,s["Component"]),n=t,(r=[{key:"componentWillUnmount",value:function(){this.onChainSelectReaction()}},{key:"selectChain",value:function(e){this.props.store.pdbChainDataStore.selectUid(e)}},{key:"componentDidMount",value:function(){var e=this;Object(ht.a)(function(){return e.props.store.pdbChainDataStore.selectFirstChain()})}},{key:"componentDidUpdate",value:function(){var e=this;Object(ht.a)(function(){e.chainDiv&&(e.chainDiv.scrollTop=e.chainScrollY)})}},{key:"helpTooltipContent",value:function(){return s.createElement("div",{style:{maxWidth:400}},"This panel displays a list of PDB chains for the corresponding uniprot ID. PDB chains are ranked with respect to their sequence similarity ratio, and aligned to the y-axis of the mutation diagram. Highly ranked chains have darker color than the lowly ranked ones.",s.createElement("br",null),s.createElement("br",null),"Each chain is represented by a single rectangle. Gaps within the chains are represented by a thin line connecting the segments of the chain.",s.createElement("br",null),s.createElement("br",null),"By default, only a first few rows are displayed. To see more chains, use the scroll bar next to the panel. To see the detailed list of all available PDB chains in a table click on the link below the panel.",s.createElement("br",null),s.createElement("br",null),"To select a chain, simply click on it. Selected chain is highlighted with a different frame color. You can also select a chain by clicking on a row in the table. Selecting a chain reloads the PDB data for the 3D structure visualizer.")}},{key:"render",value:function(){var e={};return this.tooltipVisible||(e.visible=!1),s.createElement("div",{onMouseEnter:this.handlers.onMouseEnter,onMouseLeave:this.handlers.onMouseLeave},s.createElement(dt.Collapse,{isOpened:this.isOpen},s.createElement("div",{style:{position:"relative"}},s.createElement("div",{className:"small",style:{position:"absolute"}},s.createElement("span",{style:{marginLeft:16}},"PDB Chains"),s.createElement(O.d,{placement:"left",overlay:this.helpTooltipContent,destroyTooltipOnHide:!0},s.createElement("i",{className:"fa fa-info-circle",style:{paddingLeft:3}}))),s.createElement("div",{ref:this.handlers.chainDivRef,style:{overflowY:"scroll",maxHeight:this.props.maxChainsHeight,marginLeft:this.props.geneXOffset,position:"relative"},onScroll:this.handlers.onChainScroll},s.createElement(Xe,{width:this.props.geneWidth,chains:this.chains,proteinLength:this.proteinLength,setHitZone:this.handlers.setHitZone,selectedChainUid:this.props.store.pdbChainDataStore.selectedUid,setChainUidToY:this.handlers.setChainUidToY}),s.createElement(O.d,mt({placement:"top",overlay:this.handlers.getTooltipContent},e),this.hitZone)),s.createElement("br",null),s.createElement("div",{style:{display:this.isExpanded?"inherit":"none"}},s.createElement("button",{onClick:this.handlers.togglePDBTable,className:"btn btn-default"},this.pdbChainTableShown?"Hide PDB Chain Table":"Show PDB Chain Table"),s.createElement("div",{style:{display:this.pdbChainTableShown?"inherit":"none",maxWidth:this.props.geneWidth}},s.createElement(pt,{dataStore:this.props.store.pdbChainDataStore,cache:this.props.pdbHeaderCache}))),s.createElement("br",null))))}},{key:"chainScrollY",get:function(){return this.isExpanded?this._chainScrollY:0}},{key:"isOpen",get:function(){return!!this.props.store.pdbChainDataStore.selectedChain}},{key:"displayChains",get:function(){return this.props.store.pdbChainDataStore.selectedChain?this.isExpanded?this.props.store.pdbChainDataStore.allData:[this.props.store.pdbChainDataStore.selectedChain]:[]}},{key:"chains",get:function(){var e=this;return this.displayChains.map(function(t){for(var n=[],r=-1,o=t.alignment,i=0;i<o.length;i++)o[i]===ft.a?-1===r&&(r=i):-1!==r&&(n.push({start:t.uniprotStart+r,end:t.uniprotStart+i}),r=-1);return{start:t.uniprotStart,end:t.uniprotEnd+1,gaps:n,opacity:t.identityPerc,uid:e.props.store.pdbChainDataStore.getChainUid(t)}})}},{key:"proteinLength",get:function(){var e=this.props.store.canonicalTranscript.result&&this.props.store.canonicalTranscript.result.proteinLength||0;return Math.max(e,1)}},{key:"tooltipVisible",get:function(){return null!==this.handlers.getTooltipContent()}},{key:"hitZone",get:function(){return s.createElement(O.i,{x:this.hitZoneConfig.x,y:this.hitZoneConfig.y,width:this.hitZoneConfig.width,height:this.hitZoneConfig.height,onClick:this.hitZoneConfig.onClick,cursor:"pointer"})}}])&&yt(n.prototype,r),o&&yt(n,o),t}();St([d.observable],Et.prototype,"isExpanded",void 0),St([d.observable],Et.prototype,"pdbChainTableShown",void 0),St([d.observable],Et.prototype,"hoveredChain",void 0),St([d.observable],Et.prototype,"hitZoneConfig",void 0),St([d.computed],Et.prototype,"chainScrollY",null),St([d.action],Et.prototype,"selectChain",null),St([d.computed],Et.prototype,"isOpen",null),St([d.computed],Et.prototype,"displayChains",null),St([d.computed],Et.prototype,"chains",null),St([d.computed],Et.prototype,"proteinLength",null),St([d.computed],Et.prototype,"tooltipVisible",null),St([d.computed],Et.prototype,"hitZone",null);var wt=Et=St([p.observer],Et),Ot=n(304),Ct=n(192),kt=n(967),Tt=n.n(kt);function Pt(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function xt(){return(xt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function At(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function It(e,t){return!t||"object"!==Dt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Nt(e){return(Nt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mt(e,t){return(Mt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Dt(e){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Rt=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Dt(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Lt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),It(this,Nt(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mt(e,t)}(t,m["o"]),n=t,(r=[{key:"render",value:function(){return s.createElement("div",null,this.structureViewerPanel,s.createElement(y.a,{center:!0,size:"big",isLoading:this.isLoading}),!this.isLoading&&s.createElement("div",null,s.createElement("div",{style:{display:"flex"}},s.createElement("div",{className:"borderedChart",style:{marginRight:10}},this.mutationPlot,this.proteinChainPanel),s.createElement("div",{className:"mutationMapperMetaColumn"},this.geneSummary,this.mutationRateSummary,this.mutationFilterPanel,this.view3dButton)),s.createElement("hr",{style:{marginTop:20}}),this.mutationTable))}},{key:"open3dPanel",value:function(){this.trackVisibility[m.s.PDB]="visible"}},{key:"close3dPanel",value:function(){this.trackVisibility[m.s.PDB]="hidden"}},{key:"toggle3dPanel",value:function(){this.is3dPanelOpen?this.close3dPanel():this.open3dPanel()}},{key:"onTrackVisibilityChange",value:function(e){var t=this;"hidden"===this.trackVisibility[m.s.PDB]&&e.includes(m.s.PDB)?this.open3dPanel():"visible"!==this.trackVisibility[m.s.PDB]||e.includes(m.s.PDB)||this.close3dPanel(),Object.keys(this.trackVisibility).forEach(function(e){return t.trackVisibility[e]="hidden"}),e.forEach(function(e){return t.trackVisibility[e]="visible"})}},{key:"onProteinImpactTypeSelect",value:function(e,t){Object(m.S)(e.map(function(e){return e.toLowerCase()}),t,this.store.dataStore,m.f.PROTEIN_IMPACT_TYPE,Ot.b)}},{key:"trackDataStatus",get:function(){var e,t=this.props.store.oncoKbData.status;"complete"===t&&u.a.isEmpty(this.props.store.oncoKbDataByProteinPosStart)&&(t="empty");var n=this.props.store.indexedHotspotData.status;"complete"===n&&u.a.isEmpty(this.props.store.hotspotsByPosition)&&(n="empty");var r=this.props.store.alignmentData.status;"complete"===r&&0===this.props.store.pdbChainDataStore.allData.length&&(r="empty");var o=this.props.store.ptmData.status;return"complete"!==o||this.props.store.ptmData.result&&0!==this.props.store.ptmData.result.length||(o="empty"),At(e={},m.s.OncoKB,t),At(e,m.s.CancerHotspots,n),At(e,m.s.PTM,o),At(e,m.s.PDB,r),e}},{key:"windowWrapper",get:function(){return Ct.a}},{key:"is3dPanelOpen",get:function(){return"visible"===this.trackVisibility[m.s.PDB]}},{key:"mutationRateSummary",get:function(){return null}},{key:"multipleMutationInfo",get:function(){var e=this.props.store.dataStore.duplicateMutationCountInMultipleSamples,t=1===e?"mutation":"mutations";return e>0?": includes ".concat(e," duplicate ").concat(t," in patients with multiple samples"):""}},{key:"itemsLabelPlural",get:function(){return"Mutations".concat(this.multipleMutationInfo)}},{key:"proteinImpactTypeFilter",get:function(){return Object(Ot.d)(this.store.dataStore.dataFilters)}},{key:"mutationFilterPanel",get:function(){return s.createElement("div",null,s.createElement("div",{style:{paddingBottom:15,paddingTop:15}},s.createElement(m.r,{filter:this.proteinImpactTypeFilter,counts:this.store.mutationCountsByProteinImpactType,onSelect:this.onProteinImpactTypeSelect})))}},{key:"structureViewerPanel",get:function(){return this.is3dPanelOpen?s.createElement(je,xt({mutationDataStore:this.props.store.dataStore,pdbChainDataStore:this.props.store.pdbChainDataStore,pdbAlignmentIndex:this.props.store.indexedAlignmentData,pdbHeaderCache:this.props.pdbHeaderCache,residueMappingCache:this.props.store.residueMappingCache,uniprotId:this.props.store.uniprotId.result,onClose:this.close3dPanel},C.a)):null}},{key:"mutationPlot",get:function(){return s.createElement(m.m,{store:this.props.store,pubMedCache:this.props.pubMedCache,mutationAlignerCache:this.mutationAlignerCache,onXAxisOffset:this.onXAxisOffset,geneWidth:this.geneWidth,tracks:this.tracks,trackVisibility:this.trackVisibility,trackDataStatus:this.trackDataStatus,onTrackVisibilityChange:this.onTrackVisibilityChange,getLollipopColor:C.h,filterResetPanel:this.props.store.dataStore.showingAllData||null===this.filterResetPanel?void 0:this.filterResetPanel})}},{key:"tracks",get:function(){var e=m.t.defaultProps.tracks,t=[{name:m.s.OncoKB,enabled:this.props.enableOncoKb},{name:m.s.CancerHotspots,enabled:this.props.enableHotspot}];return u.a.without.apply(u.a,[e].concat(Pt(t.filter(function(e){return!e.enabled}).map(function(e){return e.name}))))}},{key:"proteinChainPanel",get:function(){return this.is3dPanelOpen?s.createElement(wt,{store:this.props.store,pdbHeaderCache:this.props.pdbHeaderCache,geneWidth:this.geneWidth,geneXOffset:this.lollipopPlotGeneX,maxChainsHeight:200}):null}},{key:"view3dButton",get:function(){return s.createElement("button",{className:"btn btn-default btn-sm",disabled:0===this.props.store.pdbChainDataStore.allData.length,onClick:this.toggle3dPanel,"data-test":"view3DStructure"},"View 3D Structure")}},{key:"filterResetPanel",get:function(){var e=this.props.store.dataStore;return s.createElement(m.j,{resetFilters:function(){return e.resetFilters()},filterInfo:"Showing ".concat(e.tableData.length," of ").concat(e.allData.length," mutations."),className:h()("alert","alert-success",Tt.a.filterResetPanel),buttonClass:"btn btn-default btn-xs"})}},{key:"isMutationTableDataLoading",get:function(){return!1}},{key:"mutationTableComponent",get:function(){return null}}])&&jt(n.prototype,r),o&&jt(n,o),t}();Rt([d.computed],Lt.prototype,"trackDataStatus",null),Rt([d.computed],Lt.prototype,"windowWrapper",null),Rt([d.computed],Lt.prototype,"is3dPanelOpen",null),Rt([d.computed],Lt.prototype,"multipleMutationInfo",null),Rt([d.computed],Lt.prototype,"itemsLabelPlural",null),Rt([d.computed],Lt.prototype,"proteinImpactTypeFilter",null),Rt([d.computed],Lt.prototype,"tracks",null),Rt([d.action],Lt.prototype,"open3dPanel",null),Rt([c.default,d.action],Lt.prototype,"close3dPanel",null),Rt([c.default,d.action],Lt.prototype,"toggle3dPanel",null),Rt([c.default,d.action],Lt.prototype,"onTrackVisibilityChange",null),Rt([c.default,d.action],Lt.prototype,"onProteinImpactTypeSelect",null),Lt=Rt([p.observer],Lt);t.a=Lt},function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(14),a=n(2),s=n(1),l=n(3),u=n(6),c=n(103),p=n(130);function d(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return{x:e>0?[n(0),r?n(Math.max(1,e-1)):e]:[0,0],y:t>0?[n(0),o?n(Math.max(1,t-1)):t]:[0,0]}}var f=n(23),h=n(15),m=n(5),y=n.n(m),g=n(799),b=n.n(g),v=n(192);function _(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20,o=(n=n||function(e,t){for(var n=0,r=1;e(n)>t;){if(n<Number.MIN_SAFE_INTEGER)throw new Error("Couldnt find lower bound");n-=r,r*=2}r=1;for(var o=0;e(o)<t;){if(o>Number.MAX_SAFE_INTEGER)throw new Error("Couldnt find upper bound");o+=r,r*=2}return[n,o]}(e,t))[0],i=n[1],a=(o+i)/2,s=r;s>0&&e(a)!==t;)e(a)>t?i=a:o=a,a=(o+i)/2,s-=1;return a}var S=n(816);function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var P=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":T(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},x=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},A=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=O(this,C(t).apply(this,arguments))).textElt=null,e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,r["Component"]),n=t,(o=[{key:"ref",value:function(e){this.textElt=e}},{key:"render",value:function(){var e=this.props,t=(e.categoryCoordToGroup,e.dx),n=e.dy,o=e.maxLabelWidth,i=(e.datum,e.text,x(e,["categoryCoordToGroup","dx","dy","maxLabelWidth","datum","text"]));return r.createElement(r.Fragment,null,this.colorRectangle,r.createElement(S.a,E({text:this.group.name,textRef:this.ref,prefixTspans:this.group.ordinal.length>0?[r.createElement("tspan",null,"("),r.createElement("tspan",{fontWeight:"bold"},this.group.ordinal),r.createElement("tspan",null,") ")]:void 0,datum:this.group,tooltip:function(e){return r.createElement("div",null,Object(p.h)(e))},maxWidth:o,dy:n,dx:t},i)))}},{key:"group",get:function(){return this.props.categoryCoordToGroup(this.props.text)}},{key:"colorRectangle",get:function(){if(this.textElt){var e=this.textElt.getBBox();return r.createElement("rect",{x:e.x-10-5,y:e.y+(e.height-10)/2,fill:this.group.color,width:10,height:10})}return null}}])&&w(n.prototype,o),i&&w(n,i),t}();P([a.observable.ref],A.prototype,"textElt",void 0),P([a.computed],A.prototype,"group",null),P([u.default,a.action],A.prototype,"ref",null),P([a.computed],A.prototype,"colorRectangle",null);var j=A=P([o.observer],A);function I(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(){return(L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var V=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":G(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},B=function(e){return r.createElement(i.Bar,L({className:"".concat(e.caseType,"_").concat(s.sortBy(e.datum.groups).map(function(e){return e.replace(/ /g,"_")}).join("_"),"_bar")},e))},F=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=M(this,D(t).apply(this,arguments))).tooltipModel=null,e.mouseEvents=e.makeMouseEvents(),e.mousePosition={x:0,y:0},e}var n,a,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(t,r["Component"]),n=t,(a=[{key:"containerRef",value:function(e){this.container=e}},{key:"makeMouseEvents",value:function(){var e=this;return[{target:"data",eventHandlers:{onMouseOver:function(){return[{target:"data",mutation:function(t){return t.datum&&t.datum.dontShowTooltip||(e.tooltipModel=t),null}}]},onMouseOut:function(){return[{target:"data",mutation:function(){return e.tooltipModel=null,null}}]},onClick:function(){return[{target:"data",mutation:function(t){var n;return n=t.datum?t.datum.groups:t.data[0].groups,t.datum&&t.datum.notClickable||e.props.onChangeSelectedCombinations(Object(p.i)(n,e.props.selectedCombinations)),null}}]}}}]}},{key:"resetSelection",value:function(){this.props.onChangeSelectedCombinations([])}},{key:"barSeparation",value:function(){return.2*this.barWidth()}},{key:"barWidth",value:function(){return 10}},{key:"barChartHeight",value:function(){return 250}},{key:"domainPadding",value:function(){return 20}},{key:"categoryAxisDomainPadding",value:function(){return this.domainPadding()}},{key:"countAxisDomainPadding",value:function(){return this.domainPadding()}},{key:"chartDomainPadding",value:function(){return{y:this.countAxisDomainPadding(),x:this.categoryAxisDomainPadding()}}},{key:"categoryCoord",value:function(e){return e*(this.barWidth()+this.barSeparation())}},{key:"categoryCoordToGroup",value:function(e){var t=Math.round(_(this.categoryCoord,e,[0,this.usedGroups.length]));return this.usedGroups[t]}},{key:"formatNumericalTick",value:function(e,t,n){return Object(c.a)(e,n)}},{key:"groupTick",value:function(e,t){return this.groupLabels[t]}},{key:"tooltipFunction",value:function(e){var t=this,n=s.map(e.groups,function(e){return t.props.uidToGroup[e]}),o=e.cases.length;return r.createElement("div",{style:{width:300,whiteSpace:"normal"}},r.createElement("strong",null,o," ",Object(l.S)(this.props.caseType,o)),r.createElement("br",null),"in only ",Object(p.f)(n,"and"),".")}},{key:"onMouseMove",value:function(e){this.mousePosition.x=e.pageX,this.mousePosition.y=e.pageY}},{key:"lineStroke",value:function(e){return 0===e.length?"black":Object(p.g)(e[0].groups,this.props.selectedCombinations)?"yellow":"black"}},{key:"fill",value:function(e){return Object(p.g)(e.groups,this.props.selectedCombinations)&&!e.notClickable?"yellow":e.fill||"black"}},{key:"getChart",value:function(){return this.groupCombinationSets.length>0?r.createElement("div",{ref:this.containerRef,style:{width:this.svgWidth,height:this.svgHeight}},r.createElement("svg",{id:this.props.svgId||"",style:{width:this.svgWidth,height:this.svgHeight,pointerEvents:"all"},height:this.svgHeight,width:this.svgWidth,role:"img",viewBox:"0 0 ".concat(this.svgWidth," ").concat(this.svgHeight),onMouseMove:this.onMouseMove},r.createElement("g",null,this.title),r.createElement("g",{transform:"translate(".concat(this.leftPadding,", ").concat(this.topPadding,")")},r.createElement(i.VictoryChart,{theme:l.a,width:this.chartWidth,height:this.barChartHeight(),standalone:!1,domainPadding:this.chartDomainPadding(),domain:this.barPlotDomain,singleQuadrantDomainPadding:{y:!0,x:!1}},r.createElement(i.VictoryAxis,{orientation:"bottom",offsetY:50,crossAxis:!1,tickValues:this.categoryTickValues,style:{ticks:{size:0},tickLabels:{fontSize:0},grid:{stroke:0}}}),r.createElement(i.VictoryAxis,{orientation:"left",offsetX:50,dependentAxis:!0,label:"Overlap count",tickFormat:this.formatNumericalTick,style:{grid:{stroke:0}},axisLabelComponent:r.createElement(i.VictoryLabel,{dy:-40})}),r.createElement(i.VictoryBar,{style:{data:{fill:this.fill,width:this.barWidth()}},data:this.barPlotData}),r.createElement(i.VictoryBar,{style:{data:{fillOpacity:0,width:this.barWidth(),cursor:"pointer"}},data:this.barPlotHitzoneData,events:this.mouseEvents,dataComponent:r.createElement(B,{caseType:this.props.caseType})}))),r.createElement("g",{transform:"translate(".concat(this.leftPadding,", ").concat(this.scatterPlotTopPadding,")")},r.createElement(i.VictoryChart,{theme:l.a,width:this.chartWidth,height:this.scatterChartHeight,standalone:!1,domainPadding:this.chartDomainPadding(),domain:this.scatterPlotDomain,singleQuadrantDomainPadding:{y:!0,x:!1}},r.createElement(i.VictoryAxis,{orientation:"bottom",offsetY:50,crossAxis:!1,tickValues:this.categoryTickValues,style:{axis:{strokeWidth:0},ticks:{size:0,strokeWidth:0},tickLabels:{fill:"none"},grid:{stroke:0}}}),r.createElement(i.VictoryAxis,{orientation:"left",offsetX:50,dependentAxis:!0,crossAxis:!1,tickLabelComponent:r.createElement(j,{categoryCoordToGroup:this.categoryCoordToGroup,maxLabelWidth:200,dy:"0.4em"}),tickValues:this.groupTickValues,style:{axis:{strokeWidth:0},ticks:{size:0,strokeWidth:0},grid:{stroke:0}}}),r.createElement(i.VictoryScatter,{size:this.barWidth()/2,style:{data:{fill:this.fill,cursor:function(e){return e.cursor}}},data:this.scatterData,events:this.mouseEvents}),this.getGroupIntersectionLines)))):r.createElement("span",null,"No data to plot.")}},{key:"render",value:function(){return r.createElement("div",null,r.createElement(o.Observer,null,this.getChart),this.tooltipComponent)}},{key:"usedGroups",get:function(){var e=s.chain(this.groupCombinationSets).flatMap(function(e){return e.groups}).keyBy().value();return s.chain(this.props.uidToGroup).reduce(function(t,n,r){return r in e&&t.push(n),t},[]).orderBy(function(e){return e.nameWithOrdinal},"desc").value()}},{key:"groupLabels",get:function(){return s.map(this.usedGroups,function(e){return Object(l.db)(e.nameWithOrdinal,100,"Arial","13px")})}},{key:"chartWidth",get:function(){return this.barChartExtent}},{key:"scatterChartHeight",get:function(){return this.scatterChartExtent}},{key:"title",get:function(){return this.props.title?r.createElement(i.VictoryLabel,{style:{fontWeight:"bold",fontFamily:"Verdana,Arial,sans-serif",textAnchor:"middle"},x:this.svgWidth/2,y:"1.2em",text:this.props.title}):null}},{key:"scatterChartExtent",get:function(){return this.usedGroups.length>0?this.categoryCoord(this.usedGroups.length-1)+2*this.categoryAxisDomainPadding()+100:100}},{key:"barChartExtent",get:function(){return this.groupCombinationSets.length>0?this.categoryCoord(this.groupCombinationSets.length-1)+2*this.categoryAxisDomainPadding()+100:100}},{key:"biggestCategoryLabelSize",get:function(){var e=Math.max.apply(Math,I(s.map(this.usedGroups,function(e){return Object(l.K)(e.nameWithOrdinal,l.v.fontFamily,l.v.fontSize+"px")})));return Math.min(e,200)}},{key:"svgWidth",get:function(){return Math.max(this.leftPadding+this.chartWidth+this.rightPadding,320)}},{key:"svgHeight",get:function(){return this.topPadding+this.barChartHeight()+this.scatterChartHeight+this.bottomPadding-100}},{key:"leftPadding",get:function(){return this.biggestCategoryLabelSize}},{key:"rightPadding",get:function(){return 50}},{key:"topPadding",get:function(){return 0}},{key:"bottomPadding",get:function(){return 10}},{key:"groupCombinationSets",get:function(){return s.orderBy(this.props.groups.map(function(e){return{groups:Object.keys(e.key).filter(function(t){return e.key[t]}),cases:e.value}}),function(e){return e.cases.length},"desc")}},{key:"scatterData",get:function(){var e=this;return s.flatMap(this.groupCombinationSets,function(t,n){return s.map(e.usedGroups,function(r,o){var i=s.includes(t.groups,r.uid);return Object.assign({x:e.categoryCoord(n),y:e.categoryCoord(o),fill:i?"#000000":"#efefef",dontShowTooltip:!i,cursor:i?"pointer":"default",notClickable:!i},t)})})}},{key:"barPlotData",get:function(){var e=this;return s.map(this.groupCombinationSets,function(t,n){return Object.assign({x:e.categoryCoord(n),y:t.cases.length},t)})}},{key:"barPlotHitzoneData",get:function(){var e=this.barPlotDomain.y[1]/15;return this.barPlotData.map(function(t){return Object.assign({},t,{y:Math.max(t.y,e)})})}},{key:"getGroupIntersectionLines",get:function(){var e=this,t=s.map(this.usedGroups,function(e){return e.uid});return s.flatMap(this.groupCombinationSets,function(n,o){var a=s.map(n.groups,function(r){var i=s.indexOf(t,r);return Object.assign({x:e.categoryCoord(o),y:e.categoryCoord(i)},n)});return[r.createElement(i.VictoryLine,{style:{data:{stroke:e.lineStroke,strokeWidth:2,strokeLinecap:"round"}},data:a}),r.createElement(i.VictoryLine,{style:{data:{strokeOpacity:0,strokeWidth:e.barWidth(),strokeLinecap:"round",cursor:"pointer"}},data:a,events:e.mouseEvents})]})}},{key:"barPlotDomain",get:function(){var e=s.max(s.map(this.groupCombinationSets,function(e){return e.cases.length}))||0;return d(this.groupCombinationSets.length,e,this.categoryCoord,!0,!1)}},{key:"scatterPlotDomain",get:function(){return d(this.groupCombinationSets.length,s.keys(this.groupLabels).length,this.categoryCoord)}},{key:"categoryTickValues",get:function(){var e=this;return this.groupCombinationSets.map(function(t,n){return e.categoryCoord(n)})}},{key:"groupTickValues",get:function(){var e=this;return s.map(this.groupLabels,function(t,n){return e.categoryCoord(n)})}},{key:"scatterPlotTopPadding",get:function(){return this.barChartHeight()-100}},{key:"tooltipComponent",get:function(){if(this.tooltipModel){var e=this.mousePosition.x>v.a.size.width-400?"left":"right";return f.createPortal(r.createElement(h.Popover,{arrowOffsetTop:17,className:y()("cbioportal-frontend","cbioTooltip",b.a.Tooltip),positionLeft:this.mousePosition.x+("left"===e?-8:8),positionTop:this.mousePosition.y-17,style:{transform:"left"===e?"translate(-100%,0%)":void 0,maxWidth:400},placement:e},this.tooltipFunction(this.tooltipModel.datum||this.tooltipModel.data[0])),document.body)}return null}}])&&N(n.prototype,a),u&&N(n,u),t}();V([a.observable.ref],F.prototype,"tooltipModel",void 0),V([a.observable],F.prototype,"mousePosition",void 0),V([u.default],F.prototype,"containerRef",null),V([u.default],F.prototype,"resetSelection",null),V([a.computed],F.prototype,"usedGroups",null),V([a.computed],F.prototype,"groupLabels",null),V([a.computed],F.prototype,"chartWidth",null),V([a.computed],F.prototype,"scatterChartHeight",null),V([a.computed],F.prototype,"scatterChartExtent",null),V([a.computed],F.prototype,"barChartExtent",null),V([a.computed],F.prototype,"biggestCategoryLabelSize",null),V([a.computed],F.prototype,"svgWidth",null),V([a.computed],F.prototype,"svgHeight",null),V([a.computed],F.prototype,"leftPadding",null),V([a.computed],F.prototype,"rightPadding",null),V([a.computed],F.prototype,"topPadding",null),V([a.computed],F.prototype,"bottomPadding",null),V([u.default],F.prototype,"categoryCoord",null),V([u.default],F.prototype,"categoryCoordToGroup",null),V([a.computed],F.prototype,"groupCombinationSets",null),V([a.computed],F.prototype,"scatterData",null),V([a.computed],F.prototype,"barPlotData",null),V([a.computed],F.prototype,"barPlotHitzoneData",null),V([a.computed],F.prototype,"getGroupIntersectionLines",null),V([a.computed],F.prototype,"barPlotDomain",null),V([a.computed],F.prototype,"scatterPlotDomain",null),V([a.computed],F.prototype,"categoryTickValues",null),V([a.computed],F.prototype,"groupTickValues",null),V([u.default],F.prototype,"formatNumericalTick",null),V([u.default],F.prototype,"groupTick",null),V([a.computed],F.prototype,"scatterPlotTopPadding",null),V([a.computed],F.prototype,"tooltipComponent",null),V([u.default],F.prototype,"onMouseMove",null),V([u.default],F.prototype,"lineStroke",null),V([u.default],F.prototype,"fill",null),V([u.default],F.prototype,"getChart",null);var H=F=V([o.observer],F),U=n(907);function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e,t){return!t||"object"!==K(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Y=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":K(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},X=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=q(this,z(t).apply(this,arguments))).sampleSelection=[],e.patientSelection=[],e.sampleUpset=null,e.patientUpset=null,e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(t,r["Component"]),n=t,(o=[{key:"changeSelectedSampleRegions",value:function(e){this.sampleSelection=e}},{key:"changeSelectedPatientRegions",value:function(e){this.patientSelection=e}},{key:"sampleUpsetRef",value:function(e){this.sampleUpset=e}},{key:"patientUpsetRef",value:function(e){this.patientUpset=e}},{key:"submitSampleOverlapGroup",value:function(e,t){this.props.store.addGroup(e,t),this.sampleSelection=[]}},{key:"submitPatientOverlapGroup",value:function(e,t){this.props.store.addGroup(e,t),this.patientSelection=[]}},{key:"render",value:function(){return r.createElement("div",{style:{position:"relative",display:"".concat(this.props.sideBySide?"flex":"block"),maxWidth:this.props.maxWidth,overflow:"auto hidden"}},r.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",paddingBottom:20,marginRight:this.props.sideBySide?10:void 0}},r.createElement(H,{ref:this.sampleUpsetRef,groups:this.props.samplesVennPartition,uidToGroup:this.props.uidToGroup,caseType:"sample",title:"Samples overlap",onChangeSelectedCombinations:this.changeSelectedSampleRegions,selectedCombinations:this.sampleSelection}),this.sampleUpset&&this.props.samplesVennPartition.length>0&&r.createElement(U.a,{store:this.props.store,includedRegions:this.sampleSelection,submitGroup:this.submitSampleOverlapGroup,allGroupsInPlot:Object.keys(this.props.samplesVennPartition[0].key),caseType:"sample",width:this.sampleUpset.svgWidth})),r.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},r.createElement(H,{ref:this.patientUpsetRef,groups:this.props.patientsVennPartition,uidToGroup:this.props.uidToGroup,caseType:"patient",title:"Patients overlap",onChangeSelectedCombinations:this.changeSelectedPatientRegions,selectedCombinations:this.patientSelection}),this.patientUpset&&this.props.patientsVennPartition.length>0&&r.createElement(U.a,{store:this.props.store,includedRegions:this.patientSelection,submitGroup:this.submitPatientOverlapGroup,allGroupsInPlot:Object.keys(this.props.patientsVennPartition[0].key),caseType:"patient",width:this.patientUpset.svgWidth})))}}])&&W(n.prototype,o),i&&W(n,i),t}();Y([a.observable.shallow],X.prototype,"sampleSelection",void 0),Y([a.observable.shallow],X.prototype,"patientSelection",void 0),Y([a.observable.ref],X.prototype,"sampleUpset",void 0),Y([a.observable.ref],X.prototype,"patientUpset",void 0),Y([u.default,a.action],X.prototype,"changeSelectedSampleRegions",null),Y([u.default,a.action],X.prototype,"changeSelectedPatientRegions",null),Y([u.default],X.prototype,"sampleUpsetRef",null),Y([u.default],X.prototype,"patientUpsetRef",null),Y([u.default,a.action],X.prototype,"submitSampleOverlapGroup",null),Y([u.default,a.action],X.prototype,"submitPatientOverlapGroup",null),X=Y([o.observer],X);t.a=X},function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(14),a=n(3),s=n(2),l=n(6),u=n(197),c=n(1),p=n.n(c),d=n(819),f=n(186),h=n.n(f),m=n(23),y=n(15),g=n(5),b=n.n(g),v=n(799),_=n.n(v),S=n(130),E=n(1060);function w(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function O(e){return e.xLength*e.yLength}function C(){for(var e=arguments.length<=0?void 0:arguments[0],t=1;t<arguments.length;t++){var n=t<0||arguments.length<=t?void 0:arguments[t],r=Math.max(e.x,n.x),o=Math.min(e.x+e.xLength,n.x+n.xLength),i=Math.max(e.y,n.y),a=Math.min(e.y+e.yLength,n.y+n.yLength);if(r>=o||i>=a)return{x:0,y:0,xLength:0,yLength:0};e={x:r,y:i,xLength:o-r,yLength:a-i}}return e}function k(e,t){var n=[e],r=!0,o=!1,i=void 0;try{for(var a,s=function(){var e=a.value;n=p.a.flatMap(n,function(t){return function(e,t){if(0===O(C(e,t)))return[e];var n=x([e,t]),r=[{x:n.xRange.min,y:t.y+t.yLength,xLength:n.xLength,yLength:n.yRange.max-(t.y+t.yLength)},{x:n.xRange.min,y:t.y,xLength:t.x-n.xRange.min,yLength:t.yLength},{x:n.xRange.min,y:n.yRange.min,xLength:n.xLength,yLength:t.y-n.yRange.min},{x:t.x+t.xLength,y:t.y,xLength:n.xRange.max-(t.x+t.xLength),yLength:t.yLength}].map(function(t){return C(t,e)});return r=r.filter(function(e){return O(e)>0})}(t,e)})},l=t[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)s()}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}function T(e){return p.a.sumBy(e,O)}function P(e,t){return k(C.apply(void 0,w(e.map(function(e){return t[e]}))),p.a.difference(Object.keys(t),e).map(function(e){return t[e]}))}function x(e){var t={xRange:{min:Math.min.apply(Math,w(e.map(function(e){return e.x}))),max:Math.max.apply(Math,w(e.map(function(e){return e.x+e.xLength})))},yRange:{min:Math.min.apply(Math,w(e.map(function(e){return e.y}))),max:Math.max.apply(Math,w(e.map(function(e){return e.y+e.yLength})))},xLength:0,yLength:0};return t.xLength=t.xRange.max-t.xRange.min,t.yLength=t.yRange.max-t.yRange.min,t}function A(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function j(e){var t=function(e){var t=[],n=p.a.values(e),r=!0,o=!1,i=void 0;try{for(var a,s=function(){for(var e=a.value,n=!1,r=0,o=t;r<o.length;r++){var i=o[r];p.a.some(i.rectangles,function(t){return O(C(e,t))>0})&&(i.rectangles.push(e),n=!0)}n||t.push({rectangles:[e]})},l=n[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)s()}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return t}(e);if(t.length>1){var n=(t=p.a.sortBy(t,function(e){return-O(x(e.rectangles))})).map(function(e){return x(e.rectangles)}),r=Math.max.apply(Math,A(n.map(function(e){return e.xRange.max-e.xRange.min})))/10,o=Math.max.apply(Math,A(n.map(function(e){return e.yRange.max-e.yRange.min})))/10,i=[];switch(n.length){case 2:i=[{x:0,y:0},{x:n[0].xLength+r,y:0}];break;case 3:i=[{x:0,y:0},{x:Math.max(n[0].xLength,n[2].xLength)+r,y:0},{x:0,y:Math.max(n[0].yLength,n[1].yLength)+o}]}for(var a=0;a<i.length;a++){var s=i[a].x-n[a].xRange.min,l=i[a].y-n[a].yRange.min,u=!0,c=!1,d=void 0;try{for(var f,h=t[a].rectangles[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var m=f.value;m.x+=s,m.y+=l}}catch(e){c=!0,d=e}finally{try{u||null==h.return||h.return()}finally{if(c)throw d}}}}}function I(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var N=n(1061);function M(e,t){var n=P(e,t);if(0===n.length)return null;var r=p.a.sortBy(n,function(e){return-O(e)})[0];return{x:r.x+r.xLength/2,y:r.y+r.yLength/2}}function D(e,t,n){var r,o,i,a,s=0,l=0,u=!0,c=!1,p=void 0;try{for(var d,f=t[Symbol.iterator]();!(u=(d=f.next()).done);u=!0){var h=d.value,m=T(P(h.sets,e)),y=m-h.size;s+=y*y,2===h.sets.length&&0===m&&h.size>0&&(l+=(r=e[h.sets[0]],o=e[h.sets[1]],i=void 0,a=void 0,i=r.x-o.x,a=r.y-o.y,Math.sqrt(i*i+a*a)))}}catch(e){c=!0,p=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw p}}var g=!0,b=!1,v=void 0;try{for(var _,S=n[Symbol.iterator]();!(g=(_=S.next()).done);g=!0){var E=_.value,w=O(e[E.uid])-E.size;s+=w*w}}catch(e){b=!0,v=e}finally{try{g||null==S.return||S.return()}finally{if(b)throw v}}return{areaError:s,otherPenalties:l}}function R(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(e,t){return!t||"object"!==F(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var H=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":F(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};function U(e){e.target.setAttribute("fill",e.target.getAttribute("data-hover-fill"))}function W(e){e.target.setAttribute("fill",e.target.getAttribute("data-default-fill"))}var q=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=G(this,V(t).apply(this,arguments))).svg=null,e.tooltipModel=null,e.mousePosition={x:0,y:0},e.regionClickHandlers=Object(d.a)(function(t,n){e.props.onChangeSelectedRegions(Object(S.i)(n.combination,e.props.selection.regions))}),e.regionHoverHandlers=Object(d.a)(function(t,n){n.sizeOfRegion>0&&(e.tooltipModel=n,e.mousePosition.x=t.pageX,e.mousePosition.y=t.pageY)}),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(t,r["Component"]),n=t,(o=[{key:"svgRef",value:function(e){this.svg=e}},{key:"resetSelection",value:function(){this.props.onChangeSelectedRegions([])}},{key:"resetTooltip",value:function(){this.tooltipModel=null}},{key:"render",value:function(){return r.createElement("g",{transform:"translate(".concat(this.props.x,",").concat(this.props.y,")"),onMouseOut:this.resetTooltip},r.createElement("rect",{x:"0",y:"0",fill:"white",fillOpacity:0,width:this.props.width,height:this.props.height,onMouseMove:this.resetTooltip,onClick:this.resetSelection}),this.svgElements,!!this.tooltipModel&&m.createPortal(r.createElement(y.Popover,{arrowOffsetTop:17,className:b()("cbioportal-frontend","cbioTooltip",_.a.Tooltip),positionLeft:this.mousePosition.x+15,positionTop:this.mousePosition.y-17},this.tooltipContent),document.body))}},{key:"layoutParams",get:function(){var e,t=this;switch(this.props.groups.length){case 2:e=[[0],[1],[0,1]];break;case 3:default:e=[[0],[1],[2],[0,1],[0,2],[1,2],[0,1,2]]}var n=e.map(function(e){var n=p.a.intersection.apply(p.a,R(e.map(function(e){return t.props.groups[e].cases}))),r=n.length,o=!0,i=!1,a=void 0;try{for(var s,l=Object(S.b)(e,t.props.groups.length)[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var u=s.value;p.a.pullAll(n,t.props.groups[u].cases)}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}return{combination:e,sizeOfIntersectionOfSets:r,sizeOfRegion:n.length,color:Object(S.a)(e.map(function(e){return t.props.uidToGroup[t.props.groups[e].uid].color})),labelPosition:null}}),r=n.map(function(e){return{sets:e.combination.map(function(e){return t.props.groups[e].uid}),size:e.sizeOfRegion,sizeOfIntersectionOfSets:e.sizeOfIntersectionOfSets}}),o=this.props.groups.map(function(e){return{size:e.cases.length,uid:e.uid,color:t.props.uidToGroup[e.uid].color,disjoint:(n=r.find(function(t){return 1===t.sets.length&&t.sets[0]===e.uid}),n.size===n.sizeOfIntersectionOfSets)};var n}),i=function(e,t){var n=Math.max.apply(Math,A(t.map(function(e){return e.size})))/30;t=p.a.cloneDeep(t),e=p.a.cloneDeep(e);var r=p.a.keyBy(t,function(e){return e.uid}),o=!0,i=!1,a=void 0;try{for(var s,l=e[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var u=s.value;if(u.size>0&&u.size<n){var c=n-u.size;u.size+=c,u.sizeOfIntersectionOfSets+=c;var d=!0,f=!1,h=void 0;try{for(var m,y=u.sets[Symbol.iterator]();!(d=(m=y.next()).done);d=!0)r[m.value].size+=c}catch(e){f=!0,h=e}finally{try{d||null==y.return||y.return()}finally{if(f)throw h}}}}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}return{regions:e,sets:t}}(r,o),a=function(e,t,n){n=n||{};var r,o=N.bestInitialLayout(e.map(function(e){return{sets:e.sets,size:e.sizeOfIntersectionOfSets}}),n),i=p.a.mapValues(o,function(e){return{x:e.x-e.radius,y:e.y-e.radius,xLength:2*e.radius,yLength:2*e.radius}}),a=function(e,t,n){var r,o,i=t[6*e],a=t[6*e+1],s=Math.abs(t[6*e+2]),l=s+Math.abs(t[6*e+3]);return n?(r=s,o=l):o=(r=Math.abs(t[6*e+4]))+Math.abs(t[6*e+5]),{x:i-s,y:a-r,xLength:l,yLength:o}},s=[],l=!0,u=!1,c=void 0;try{for(var d,f=t[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var h=d.value;s.push.apply(s,I([(r=i[h.uid]).x+r.xLength/2,r.y+r.yLength/2,r.xLength/2,r.xLength/2,r.yLength/2,r.yLength/2]))}}catch(e){u=!0,c=e}finally{try{l||null==f.return||f.return()}finally{if(u)throw c}}for(var m={},y=Object(E.nelderMead)(function(n){for(var r={},o=0;o<t.length;o++)r[t[o].uid]=a(o,n,t[o].disjoint);var i=D(r,e,t);return i.areaError+i.otherPenalties},s,n).x,g=0;g<t.length;g++)m[t[g].uid]=a(g,y,t[g].disjoint);return j(m),{rectangles:m,finalErrorValue:D(m,e,t).areaError}}(i.regions,i.sets,{maxIterations:1e4}),s=function(e,t,n,r){var o=p.a.values(e),i=Object.keys(e);t-=2*r,n-=2*r;var a=x(o),s=a.xRange,l=a.yRange;if(s.max==s.min||l.max==l.min)return console.log("not scaling layout: zero size detected"),e;for(var u=t/(s.max-s.min),c=n/(l.max-l.min),d=Math.min(c,u),f=(t-(s.max-s.min)*d)/2,h=(n-(l.max-l.min)*d)/2,m={},y=0;y<o.length;++y){var g=o[y];m[i[y]]={xLength:d*g.xLength,yLength:d*g.yLength,x:r+f+(g.x-s.min)*d,y:r+h+(g.y-l.min)*d}}return m}(a.rectangles,this.props.width,this.props.height,20),l=!0,u=!1,c=void 0;try{for(var d,f=n[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var h=d.value;h.sizeOfRegion>0&&(h.labelPosition=M(h.combination.map(function(e){return t.props.groups[e].uid}),s))}}catch(e){u=!0,c=e}finally{try{l||null==f.return||f.return()}finally{if(u)throw c}}return a.finalErrorValue>=1&&setTimeout(this.props.onLayoutFailure,0),{rectangles:s,regions:n,sets:o}}},{key:"svgElements",get:function(){var e=this,t=this.layoutParams.rectangles,n=this.props.groups.map(function(n,o){return r.createElement("clipPath",{id:"".concat(e.props.uid,"_circle_").concat(o)},r.createElement("rect",{x:t[n.uid].x,y:t[n.uid].y,width:t[n.uid].xLength,height:t[n.uid].yLength,rx:8}))}),o=p.a.flattenDeep(this.layoutParams.regions.map(function(t){var n=t.combination,o=r.createElement("g",null,r.createElement("rect",{x:"0",y:"0",height:e.props.height,width:e.props.width,fill:t.color,style:{cursor:t.sizeOfRegion>0?"pointer":"default"},"data-default-fill":t.color,"data-hover-fill":u.hsl(t.color).brighter(1).rgb(),onMouseOver:t.sizeOfRegion>0?U:void 0,onMouseOut:t.sizeOfRegion>0?W:void 0,onMouseMove:e.regionHoverHandlers({combination:n,sizeOfRegion:t.sizeOfRegion}),onClick:t.sizeOfRegion>0?e.regionClickHandlers({combination:n}):void 0,"data-test":"".concat(e.props.caseType).concat(t.combination.join(","),"VennRegion")})),i=!0,a=!1,s=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var p=l.value;o=r.createElement("g",{clipPath:"url(#".concat(e.props.uid,"_circle_").concat(p,")")},o)}}catch(e){a=!0,s=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw s}}return[o]})),i=p.a.sortBy(this.layoutParams.sets,function(e){return-e.size}).map(function(e){var n=e.uid;return r.createElement("rect",{x:t[n].x,y:t[n].y,width:t[n].xLength,height:t[n].yLength,fill:"none",stroke:e.color,strokeWidth:2,rx:8})}),a=p.a.flattenDeep(this.layoutParams.regions.map(function(t){if(0===t.sizeOfRegion||!t.labelPosition)return[];var n=Object(S.g)(t.combination,e.props.selection.regions),o="".concat(t.sizeOfRegion.toString()).concat(n?" "+String.fromCharCode(10004):""),i=h()({text:o,fontFamily:"Arial",fontSize:"13px",lineHeight:1}),a=t.labelPosition,s=null;return n&&(s=r.createElement("rect",{x:a.x-i.width.value/2-4,y:a.y-i.height.value+3,width:i.width.value+8,height:i.height.value+4,fill:"yellow",rx:3,ry:3,pointerEvents:"none"})),[s,r.createElement("text",{x:a.x,y:a.y,style:{userSelect:"none",color:n?"black":Object(S.e)(t.color)},fontWeight:t.sizeOfRegion>0?"bold":"normal",pointerEvents:"none",textAnchor:"middle",alignmentBaseline:"middle","data-test":"".concat(e.props.caseType).concat(t.combination.join(","),"VennLabel")},o)]}));return r.createElement(r.Fragment,null,n,o,i,a)}},{key:"tooltipContent",get:function(){var e=this;if(!this.tooltipModel)return null;var t=this.tooltipModel.combination.map(function(t){return e.props.groups[t].uid}).map(function(t){return e.props.uidToGroup[t]});return r.createElement("div",{style:{width:300,whiteSpace:"normal"}},r.createElement("strong",null,this.tooltipModel.sizeOfRegion," ",Object(a.S)(this.props.caseType,this.tooltipModel.sizeOfRegion)),r.createElement("br",null),"in only ",Object(S.f)(t,"and"),".")}}])&&L(n.prototype,o),i&&L(n,i),t}();H([s.observable.ref],q.prototype,"svg",void 0),H([s.observable.ref],q.prototype,"tooltipModel",void 0),H([s.observable],q.prototype,"mousePosition",void 0),H([l.default],q.prototype,"svgRef",null),H([s.computed],q.prototype,"layoutParams",null),H([s.computed],q.prototype,"svgElements",null),H([l.default],q.prototype,"resetSelection",null),H([l.default],q.prototype,"resetTooltip",null),H([s.computed],q.prototype,"tooltipContent",null);var z=q=H([o.observer],q),Q=n(907),K=n(909);function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function X(e,t){return!t||"object"!==$(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ee=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":$(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},te=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=X(this,Z(t).apply(this,arguments))).sampleSelection={regions:[]},e.patientSelection={regions:[]},e}var n,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(t,r["Component"]),n=t,(o=[{key:"submitSampleOverlapGroup",value:function(e,t){this.props.store.addGroup(e,t),this.sampleSelection.regions=[]}},{key:"submitPatientOverlapGroup",value:function(e,t){this.props.store.addGroup(e,t),this.patientSelection.regions=[]}},{key:"changeSelectedSampleRegions",value:function(e){this.sampleSelection.regions=e}},{key:"changeSelectedPatientRegions",value:function(e){this.patientSelection.regions=e}},{key:"render",value:function(){return r.createElement("div",{style:{position:"relative",paddingBottom:"".concat(Math.max(this.sampleSelection.regions.length,this.patientSelection.regions.length)+1,"em")}},r.createElement("svg",{id:this.props.svgId||"",xmlns:"http://www.w3.org/2000/svg",width:this.chartWidth,height:this.chartHeight,role:"img",viewBox:"0 0 ".concat(this.chartWidth," ").concat(this.chartHeight)},r.createElement(i.VictoryLabel,{style:{fontWeight:"bold",fontFamily:"Verdana,Arial,sans-serif",textAnchor:"middle",userSelect:"none"},x:200,y:"1.2em",text:"Samples overlap"}),r.createElement(z,{uid:"samples",x:0,y:15,groups:this.props.sampleGroups,uidToGroup:this.props.uidToGroup,width:400,height:400,selection:this.sampleSelection,onChangeSelectedRegions:this.changeSelectedSampleRegions,caseType:"sample",onLayoutFailure:this.props.onLayoutFailure}),r.createElement(i.VictoryLabel,{style:{fontWeight:"bold",fontFamily:"Verdana,Arial,sans-serif",textAnchor:"middle",userSelect:"none"},x:200,dx:410,y:"1.2em",text:"Patients overlap"}),r.createElement(z,{uid:"patients",x:410,y:15,groups:this.props.patientGroups,uidToGroup:this.props.uidToGroup,width:400,height:400,selection:this.patientSelection,onChangeSelectedRegions:this.changeSelectedPatientRegions,caseType:"patient",onLayoutFailure:this.props.onLayoutFailure}),this.legendData.length>0&&r.createElement(i.VictoryLegend,{x:this.vennPlotAreaWidth+20,y:100,theme:a.a,labelComponent:r.createElement(K.a,{maxLabelWidth:100,uidToGroup:this.props.uidToGroup,dy:"0.4em"}),standalone:!1,data:this.legendData})),[r.createElement(Q.a,{store:this.props.store,includedRegions:this.sampleSelectedRegionsUids,style:{position:"absolute",left:0,top:420},submitGroup:this.submitSampleOverlapGroup,allGroupsInPlot:this.sampleGroupUids,caseType:"sample",width:400}),r.createElement(Q.a,{store:this.props.store,includedRegions:this.patientSelectedRegionsUids,style:{position:"absolute",left:410,top:420},submitGroup:this.submitPatientOverlapGroup,allGroupsInPlot:this.patientGroupUids,caseType:"patient",width:400})])}},{key:"chartWidth",get:function(){return this.vennPlotAreaWidth+20+180}},{key:"chartHeight",get:function(){return 500}},{key:"sampleGroupUids",get:function(){return this.props.sampleGroups.map(function(e){return e.uid})}},{key:"patientGroupUids",get:function(){return this.props.patientGroups.map(function(e){return e.uid})}},{key:"legendData",get:function(){var e=this;return this.props.sampleGroups.map(function(t){return{name:t.uid,symbol:{fill:e.props.uidToGroup[t.uid].color,strokeOpacity:0,type:"square",size:6}}})}},{key:"vennPlotAreaWidth",get:function(){return 810}},{key:"sampleSelectedRegionsUids",get:function(){var e=this;return this.sampleSelection.regions.map(function(t){return t.map(function(t){return e.props.sampleGroups[t].uid})})}},{key:"patientSelectedRegionsUids",get:function(){var e=this;return this.patientSelection.regions.map(function(t){return t.map(function(t){return e.props.patientGroups[t].uid})})}}])&&Y(n.prototype,o),s&&Y(n,s),t}();ee([s.observable.shallow],te.prototype,"sampleSelection",void 0),ee([s.observable.shallow],te.prototype,"patientSelection",void 0),ee([s.computed],te.prototype,"chartWidth",null),ee([s.computed],te.prototype,"chartHeight",null),ee([l.default,s.action],te.prototype,"submitSampleOverlapGroup",null),ee([l.default,s.action],te.prototype,"submitPatientOverlapGroup",null),ee([l.default,s.action],te.prototype,"changeSelectedSampleRegions",null),ee([l.default,s.action],te.prototype,"changeSelectedPatientRegions",null),ee([s.computed],te.prototype,"sampleGroupUids",null),ee([s.computed],te.prototype,"patientGroupUids",null),ee([s.computed],te.prototype,"legendData",null),ee([s.computed],te.prototype,"vennPlotAreaWidth",null),ee([s.computed],te.prototype,"sampleSelectedRegionsUids",null),ee([s.computed],te.prototype,"patientSelectedRegionsUids",null),te=ee([o.observer],te);t.a=te},function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(15),a=n(974),s=n(5),l=n.n(s),u=n(2);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}function h(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var v=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},_=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},S=function(e){function t(){return p(this,t),h(this,m(t).apply(this,arguments))}return y(t,r["Component"]),f(t,[{key:"render",value:function(){var e=this.props,t=(e.bsRole,e.title),n=_(e,["bsRole","title"]);return r.createElement(i.Button,c({className:"btn btn-default"},n),t," ",this.props.titleElement," ",r.createElement("span",{className:"caret"}))}}]),t}(),E=function(e){function t(){return p(this,t),h(this,m(t).apply(this,arguments))}return y(t,r["Component"]),f(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.children;return r.createElement("div",{className:l()("dropdown-menu",t),style:{padding:"6px"}},n)}}]),t}(),w=function(e){function t(e){var n;return p(this,t),(n=h(this,m(t).call(this,e))).open=!1,n.toggle=function(){n.open=!n.open},n.hide=function(){n.open=!1},n}return y(t,r["Component"]),f(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.id,o=e.className,s=(e.ref,_(e,["children","id","className","ref"]));return r.createElement(a.RootCloseWrapper,{onRootClose:this.hide},r.createElement(i.Dropdown,{id:n+"",open:this.open},r.createElement(S,c({bsStyle:"default",bsRole:"toggle",title:"Custom Toggle",onClick:this.toggle},s)),r.createElement(E,{bsRole:"menu",className:l()(o)},t)))}}]),t}();v([u.observable],w.prototype,"open",void 0);var O=w=v([o.observer],w);function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var A=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":x(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},j=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),k(this,T(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=this;return r.createElement(i.Modal,{show:this.props.show,onHide:this.props.onHide,animation:!1},r.createElement(i.Modal.Header,{closeButton:!0},r.createElement(i.Modal.Title,null,"Open new tab to MD Anderson NG-CHM?")),r.createElement(i.Modal.Body,null,r.createElement("div",{className:"oncoprint__controls__heatmap_menu mdacc-modal"},r.createElement("p",null,"Continue will open a tab or window to a different site (not cBioPortal)."),r.createElement("p",null,"You will be able to view this study as Next Generation Clustered Heatmaps (NG-CHM) developed by The University of Texas MD Anderson Cancer Center."),r.createElement("em",null,"Note: NG-CHM will not be limited to your selected samples and genes."))),r.createElement(i.Modal.Footer,null,r.createElement(i.Button,{onClick:function(){e.props.openNgchmWindow(),e.props.onHide()}},"Continue"),r.createElement(i.Button,{onClick:this.props.onHide},"Cancel")))}}])&&C(n.prototype,o),a&&C(n,a),t}(),I=j=A([o.observer],j),N=n(149),M=n(1),D=n.n(M),R=n(66),L=n(3),G=n(296),V=n.n(G),B=(n(812),n(990),n(11)),F=n(29),H=n(803),U=n(6),W=n(792),q=n(885),z=n(97),Q=n(34),K=n(110),Y=n(831);function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e,t){return!t||"object"!==ee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $(e,t){return($=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var te=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ee(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ne=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Z(this,J(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return void 0===this.props.count?null:r.createElement("span",{className:"oncoprintDropdownCount"},this.props.count)}}])&&X(n.prototype,o),i&&X(n,i),t}(),re=ne=te([o.observer],ne);function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ie(e,t){return!t||"object"!==le(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ue,ce=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":le(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};!function(e){e.CLINICAL="Clinical",e.GROUPS="Groups",e.CUSTOM_CHARTS="Custom Charts"}(ue||(ue={}));var pe=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=ie(this,ae(t).apply(this,arguments))).open=!1,e.tabId=ue.CLINICAL,e.options=Object(L.T)({await:function(){return[e.props.store.clinicalAttributes,e.clinicalAttributeIdToAvailableFrequency,e.props.store.clinicalAttributes_customCharts]},invoke:function(){var t=M.uniqBy(e.props.store.clinicalAttributes.result,function(e){return e.clinicalAttributeId}),n=e.clinicalAttributeIdToAvailableFrequency.result,r={clinical:[],groups:[],customCharts:[]},o=M.keyBy(e.props.store.clinicalAttributes_customCharts.result,function(e){return e.clinicalAttributeId}),i=!0,a=!1,s=void 0;try{for(var l,u=t[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value;Object(Q.d)(c)?r.groups.push(c):c.clinicalAttributeId in o?r.customCharts.push(c):r.clinical.push(c)}}catch(e){a=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw s}}return r.clinical=M.sortBy(r.clinical,[function(e){return e.clinicalAttributeId===Q.c.StudyOfOrigin?0:e.clinicalAttributeId===Q.c.MutationSpectrum?1:Object(Q.f)(e)?2:3},function(e){var t=n[e.clinicalAttributeId];return void 0===t&&(t=0),-t},function(e){return-e.priority},function(e){return e.displayName.toLowerCase()}]),r.groups=M.sortBy(r.groups,function(e){return e.displayName.toLowerCase()}),r.customCharts=M.sortBy(r.customCharts,function(e){return e.displayName.toLowerCase()}),Promise.resolve(M.mapValues(r,function(t){return t.map(function(t){return{label:t.displayName,key:t.clinicalAttributeId,selected:t.clinicalAttributeId in e.selectedClinicalAttributeIds}})}))}}),e.clinicalAttributeIdToAvailableFrequency=Object(L.T)({await:function(){return[e.props.store.clinicalAttributeIdToAvailableSampleCount,e.props.store.samples]},invoke:function(){var t=e.props.store.samples.result.length;return Promise.resolve(M.mapValues(e.props.store.clinicalAttributeIdToAvailableSampleCount.result,function(e){return 100*e/t}))}}),e.addClinicalTracksMenu=Object(K.a)({await:function(){return[e.options]},render:function(){return r.createElement(q.a,{options:e.options.result.clinical,freqPromise:e.clinicalAttributeIdToAvailableFrequency,onAddAll:e.addAll,onClearAll:e.clear,onToggleOption:e.toggleClinicalTrack,optionsGivenInSortedOrder:!0})},renderPending:function(){return r.createElement(R.a,{isLoading:!0,small:!0})},showLastRenderWhenPending:!0}),e.addGroupTracksMenu=Object(K.a)({await:function(){return[e.options]},render:function(){return r.createElement(q.a,{options:e.options.result.groups,freqPromise:e.clinicalAttributeIdToAvailableFrequency,onAddAll:e.addAll,onClearAll:e.clear,onToggleOption:e.toggleClinicalTrack,optionsGivenInSortedOrder:!0,frequencyHeaderTooltip:"% samples in group"})},renderPending:function(){return r.createElement(R.a,{isLoading:!0,small:!0})},showLastRenderWhenPending:!0}),e.addChartTracksMenu=Object(K.a)({await:function(){return[e.options]},render:function(){return r.createElement(q.a,{options:e.options.result.customCharts,freqPromise:e.clinicalAttributeIdToAvailableFrequency,onAddAll:e.addAll,onClearAll:e.clear,onToggleOption:e.toggleClinicalTrack,optionsGivenInSortedOrder:!0,frequencyHeaderTooltip:"% samples in group"})},renderPending:function(){return r.createElement(R.a,{isLoading:!0,small:!0})},showLastRenderWhenPending:!0}),e}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&se(e,t)}(t,r["Component"]),n=t,(i=[{key:"updateTabId",value:function(e){this.tabId=e}},{key:"addAll",value:function(e){this.props.onChangeSelectedClinicalTracks(M.union(this.props.getSelectedClinicalAttributeIds(),e))}},{key:"clear",value:function(e){this.props.onChangeSelectedClinicalTracks(M.difference(this.props.getSelectedClinicalAttributeIds(),e))}},{key:"toggleClinicalTrack",value:function(e){this.props.onChangeSelectedClinicalTracks(Object(Y.b)(e,this.props.getSelectedClinicalAttributeIds()))}},{key:"getDropdown",value:function(){return(this.options.isComplete?M.sum(M.map(this.options.result,function(e){return+(e.length>0)})):0)>1?r.createElement(W.b,{activeTabId:this.tabId,onTabClick:this.updateTabId,className:"mainTabs oncoprintAddClinicalTracks"},r.createElement(W.a,{key:0,id:ue.CLINICAL,linkText:ue.CLINICAL,hide:!this.options.isComplete||0===this.options.result.clinical.length},this.addClinicalTracksMenu.component),r.createElement(W.a,{key:1,id:ue.GROUPS,linkText:ue.GROUPS,hide:!this.options.isComplete||0===this.options.result.groups.length},this.addGroupTracksMenu.component),r.createElement(W.a,{key:2,id:ue.CUSTOM_CHARTS,linkText:ue.CUSTOM_CHARTS,hide:!this.options.isComplete||0===this.options.result.customCharts.length},this.addChartTracksMenu.component)):r.createElement("div",{className:"tab-content"},r.createElement("div",{className:"msk-tab"},this.addClinicalTracksMenu.component))}},{key:"onDropdownChange",value:function(e){this.open=e}},{key:"render",value:function(){return r.createElement(L.d,{visible:this.open,trigger:["click"],onVisibleChange:this.onDropdownChange,placement:"bottomRight",destroyTooltipOnHide:!0,overlay:r.createElement(o.Observer,null,this.getDropdown),align:{overflow:{adjustX:!0,adjustY:!1}},arrowContent:r.createElement("span",null),overlayClassName:"oncoprintAddClinicalTracksDropdown"},r.createElement("button",{className:l()("btn btn-default btn-md",{active:this.open}),"data-event":Object(z.e)({category:"resultsView",action:"addClinicalTrackMenuOpen",label:this.props.store.studyIds.result.join(",")}),"data-test":"add-clinical-track-button"},"Add Clinical Tracks"," ",r.createElement(re,{count:this.options.isComplete?this.options.result.clinical.length:void 0})," ",r.createElement("span",{className:"caret"})," "))}},{key:"selectedClinicalAttributeIds",get:function(){return M.keyBy(this.props.getSelectedClinicalAttributeIds())}}])&&oe(n.prototype,i),a&&oe(n,a),t}();ce([u.observable],pe.prototype,"open",void 0),ce([u.observable],pe.prototype,"tabId",void 0),ce([U.default,u.action],pe.prototype,"updateTabId",null),ce([U.default,u.action],pe.prototype,"addAll",null),ce([U.default,u.action],pe.prototype,"clear",null),ce([U.default,u.action],pe.prototype,"toggleClinicalTrack",null),ce([u.computed],pe.prototype,"selectedClinicalAttributeIds",null),ce([U.default],pe.prototype,"getDropdown",null),ce([U.default,u.action],pe.prototype,"onDropdownChange",null);var de=pe=ce([o.observer],pe),fe=n(935),he=n(7),me=n(112);function ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ge(e){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function be(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ve(e,t){return(ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _e(e){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Se=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":_e(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Ee="0",we="1",Oe="2",Ce="3",ke="4",Te="4.1",Pe="4.2",xe="5",Ae="5.1",je="6",Ie="7",Ne="8",Me="9",De="10",Re="13",Le="15",Ge="16",Ve="17",Be="18",Fe="19",He="20",Ue="21",We="22",qe="22.1",ze="23",Qe="25",Ke="26",Ye="27",Xe="28",Ze="29",Je="29.1",$e="31",et="32",tt=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=ge(t).call(this,e),(n=!o||"object"!==_e(o)&&"function"!=typeof o?be(r):o).heatmapGenesReady=!1,n._genericAssaySearchText="",n.showConfirmNgchmModal=!1,n.getHeatmapMenu=n.getHeatmapMenu.bind(be(n)),n.getClinicalTracksMenu=n.getClinicalTracksMenu.bind(be(n)),n.getSortMenu=n.getSortMenu.bind(be(n)),n.getViewMenu=n.getViewMenu.bind(be(n)),n.getDownloadMenu=n.getDownloadMenu.bind(be(n)),n.onInputClick=n.onInputClick.bind(be(n)),n.getMutationColorMenu=n.getMutationColorMenu.bind(be(n)),n.getHorzZoomControls=n.getHorzZoomControls.bind(be(n)),n.onSelect=n.onSelect.bind(be(n)),n.toggleShowMinimap=n.toggleShowMinimap.bind(be(n)),n.onType=n.onType.bind(be(n)),n.onHeatmapProfileSelect=n.onHeatmapProfileSelect.bind(be(n)),n.onButtonClick=n.onButtonClick.bind(be(n)),n.onZoomInClick=n.onZoomInClick.bind(be(n)),n.onZoomOutClick=n.onZoomOutClick.bind(be(n)),n.onCustomDriverTierCheckboxClick=n.onCustomDriverTierCheckboxClick.bind(be(n)),n.onHorzZoomSliderChange=n.onHorzZoomSliderChange.bind(be(n)),n.onHorzZoomSliderSet=n.onHorzZoomSliderSet.bind(be(n)),n.onSetHorzZoomTextInput=n.onSetHorzZoomTextInput.bind(be(n)),n.horzZoomSliderState=e.state.horzZoom,Object(u.reaction)(function(){return n.isGenericAssayDataComplete},function(e){return e&&n.initializeSelectedGenericAssayEntityIds()}),Object(u.reaction)(function(){return n.props.state.horzZoom},function(e){return n.horzZoomSliderState=e}),n}var a,s,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ve(e,t)}(t,r["Component"]),a=t,(s=[{key:"initializeSelectedGenericAssayEntityIds",value:function(){this._selectedGenericAssayEntityIds=this.props.selectedGenericAssayEntitiesGroupByGenericAssayTypeFromUrl&&this.props.state.selectedHeatmapProfileGenericAssayType&&this.props.selectedGenericAssayEntitiesGroupByGenericAssayTypeFromUrl[this.props.state.selectedHeatmapProfileGenericAssayType]&&!D.a.isEmpty(this.genericAssayEntitiesSelectOptionsInSelectedHeatmapProfile)?D.a.intersectionBy(this.props.selectedGenericAssayEntitiesGroupByGenericAssayTypeFromUrl[this.props.state.selectedHeatmapProfileGenericAssayType],D.a.map(this.genericAssayEntitiesSelectOptionsInSelectedHeatmapProfile,function(e){return e.value})):[]}},{key:"onZoomInClick",value:function(){this.props.handlers.onClickZoomIn()}},{key:"onZoomOutClick",value:function(){this.props.handlers.onClickZoomOut()}},{key:"onSetHorzZoomTextInput",value:function(e){var t=parseFloat(e)/100;this.props.handlers.onSetHorzZoom(t)}},{key:"onSelect",value:function(e){e===xe&&this.props.handlers.onSelectDistinguishMutationType&&this.props.handlers.onSelectDistinguishMutationType(!this.props.state.distinguishMutationType)}},{key:"onHeatmapProfileSelect",value:function(e){this.props.handlers.onSelectHeatmapProfile&&this.props.handlers.onSelectHeatmapProfile(e.value);var t=this.props.molecularProfileIdToMolecularProfile&&this.props.molecularProfileIdToMolecularProfile[e.value]?this.props.molecularProfileIdToMolecularProfile[e.value].genericAssayType:void 0;this.props.selectedGenericAssayEntitiesGroupByGenericAssayTypeFromUrl&&t&&this.props.selectedGenericAssayEntitiesGroupByGenericAssayTypeFromUrl[t]&&!D.a.isEmpty(this.genericAssayEntitiesSelectOptionsInSelectedHeatmapProfile)?this._selectedGenericAssayEntityIds=D.a.intersectionBy(this.props.selectedGenericAssayEntitiesGroupByGenericAssayTypeFromUrl[t],D.a.map(this.genericAssayEntitiesSelectOptionsInSelectedHeatmapProfile,function(e){return e.value})):this._selectedGenericAssayEntityIds=[]}},{key:"toggleShowMinimap",value:function(){this.props.handlers.onSelectShowMinimap&&this.props.handlers.onSelectShowMinimap(!this.props.state.showMinimap)}},{key:"onInputClick",value:function(e){switch(e.target.value){case Oe:this.props.handlers.onSelectShowUnalteredColumns&&this.props.handlers.onSelectShowUnalteredColumns(!this.props.state.showUnalteredColumns);break;case Ce:this.props.handlers.onSelectShowWhitespaceBetweenColumns&&this.props.handlers.onSelectShowWhitespaceBetweenColumns(!this.props.state.showWhitespaceBetweenColumns);break;case ke:this.props.handlers.onSelectShowClinicalTrackLegends&&this.props.handlers.onSelectShowClinicalTrackLegends(!this.props.state.showClinicalTrackLegends);break;case Te:this.props.handlers.onSelectOnlyShowClinicalLegendForAlteredCases&&this.props.handlers.onSelectOnlyShowClinicalLegendForAlteredCases(!this.props.state.onlyShowClinicalLegendForAlteredCases);break;case Pe:this.props.handlers.onSelectShowOqlInLabels&&this.props.handlers.onSelectShowOqlInLabels(!this.props.state.showOqlInLabels);break;case Ee:this.props.handlers.onSelectColumnType&&this.props.handlers.onSelectColumnType("sample");break;case we:this.props.handlers.onSelectColumnType&&this.props.handlers.onSelectColumnType("patient");break;case Me:this.props.handlers.onClickSortByData&&this.props.handlers.onClickSortByData();break;case Ie:this.props.handlers.onClickSortAlphabetical&&this.props.handlers.onClickSortAlphabetical();break;case Ne:this.props.handlers.onClickSortCaseListOrder&&this.props.handlers.onClickSortCaseListOrder();break;case je:this.props.handlers.onSelectSortByMutationType&&this.props.handlers.onSelectSortByMutationType(!this.props.state.sortByMutationType);break;case De:this.props.handlers.onSelectSortByDrivers&&this.props.handlers.onSelectSortByDrivers(!this.props.state.sortByDrivers);break;case Le:this.props.handlers.onSelectDistinguishDrivers&&this.props.handlers.onSelectDistinguishDrivers(!this.props.state.distinguishDrivers);break;case xe:this.props.handlers.onSelectDistinguishMutationType&&this.props.handlers.onSelectDistinguishMutationType(!this.props.state.distinguishMutationType);break;case Ae:this.props.handlers.onSelectDistinguishGermlineMutations(!this.props.state.distinguishGermlineMutations);break;case Ge:this.props.handlers.onSelectAnnotateOncoKb&&this.props.handlers.onSelectAnnotateOncoKb(!this.props.state.annotateDriversOncoKb);break;case Ve:this.props.handlers.onSelectAnnotateHotspots&&this.props.handlers.onSelectAnnotateHotspots(!this.props.state.annotateDriversHotspots);break;case Be:this.props.handlers.onSelectAnnotateCBioPortal&&this.props.handlers.onSelectAnnotateCBioPortal(!this.props.state.annotateDriversCBioPortal);break;case Fe:this.props.handlers.onSelectAnnotateCOSMIC&&this.props.handlers.onSelectAnnotateCOSMIC(!this.props.state.annotateDriversCOSMIC);break;case We:this.props.handlers.onSelectHidePutativePassengers&&this.props.handlers.onSelectHidePutativePassengers(!this.props.state.hidePutativePassengers);break;case qe:this.props.handlers.onSelectHideGermlineMutations(!this.props.state.hideGermlineMutations);break;case ze:this.props.handlers.onSelectCustomDriverAnnotationBinary&&this.props.handlers.onSelectCustomDriverAnnotationBinary(!this.props.state.annotateCustomDriverBinary)}}},{key:"onHorzZoomSliderChange",value:function(e){this.horzZoomSliderState=e}},{key:"onHorzZoomSliderSet",value:function(){this.props.handlers.onSetHorzZoom(this.horzZoomSliderState),this.horzZoomSliderState=this.props.state.horzZoom}},{key:"onCustomDriverTierCheckboxClick",value:function(e){this.props.handlers.onSelectCustomDriverAnnotationTier&&this.props.handlers.onSelectCustomDriverAnnotationTier(e.target.value,!(this.props.state.selectedCustomDriverAnnotationTiers&&this.props.state.selectedCustomDriverAnnotationTiers.get(e.target.value)))}},{key:"onButtonClick",value:function(e){switch(e.target.name){case Re:this.props.handlers.onClickAddGenesToHeatmap&&this.props.handlers.onClickAddGenesToHeatmap();break;case et:this.props.handlers.onClickAddGenericAssaysToHeatmap&&this.props.handlers.onClickAddGenericAssaysToHeatmap(this._selectedGenericAssayEntityIds);break;case Ye:this.props.handlers.onClickDownload&&this.props.handlers.onClickDownload("svg");break;case Ke:this.props.handlers.onClickDownload&&this.props.handlers.onClickDownload("png");break;case Qe:this.props.handlers.onClickDownload&&this.props.handlers.onClickDownload("pdf");break;case Xe:this.props.handlers.onClickDownload&&this.props.handlers.onClickDownload("order");break;case Ze:this.props.handlers.onClickDownload&&this.props.handlers.onClickDownload("tabular");break;case Je:this.props.handlers.onClickDownload&&this.props.handlers.onClickDownload("oncoprinter");break;case $e:this.props.state.ngchmButtonActive&&this.props.handlers.onClickNGCHM&&(this.showConfirmNgchmModal=!0)}}},{key:"onChangeHeatmapGeneInput",value:function(e,t,n){this.props.handlers.onChangeHeatmapGeneInputValue&&this.props.handlers.onChangeHeatmapGeneInputValue(n);var r=D.a.keyBy(t.found,function(e){return e.hugoGeneSymbol.toUpperCase()});this.heatmapGenesReady=D.a.every(e.query,function(e){return e.gene.toUpperCase()in r})}},{key:"onType",value:function(e){switch(e.target.name){case He:this.props.handlers.onChangeAnnotateCBioPortalInputValue&&this.props.handlers.onChangeAnnotateCBioPortalInputValue(e.target.value);break;case Ue:this.props.handlers.onChangeAnnotateCOSMICInputValue&&this.props.handlers.onChangeAnnotateCOSMICInputValue(e.target.value)}}},{key:"onSelectGenericAssayEntities",value:function(e,t){var n=e||[];"select-option"===t.action&&"select_all_filtered_options"===t.option.value&&(n=D.a.union(this.filteredGenericAssayOptions,n));var r=n.map(function(e){return e.value});r=r.filter(function(e){return"select_all_filtered_options"!==e}),this._selectedGenericAssayEntityIds=r,this._genericAssaySearchText=""}},{key:"isOptionIncludingText",value:function(e,t){var n=!1;return(!e||new RegExp(e,"i").test(t.label)||new RegExp(e,"i").test(t.value))&&(n=!0),n}},{key:"filterGenericAssayOption",value:function(e,t){return"select_all_filtered_options"===e.value||this.isOptionIncludingText(t,e)&&!this._selectedGenericAssayEntityIds.includes(e.value)}},{key:"onGenericAssayInputChange",value:function(e,t){"input-change"===t.action?this._genericAssaySearchText=e:"set-value"!==t.action&&(this._genericAssaySearchText="")}},{key:"getSelectedClinicalAttributeIds",value:function(){return this.props.state.selectedClinicalAttributeIds}},{key:"getClinicalTracksMenu",value:function(){return this.props.store&&this.props.state.selectedClinicalAttributeIds&&this.props.handlers.onChangeSelectedClinicalTracks?r.createElement(de,{store:this.props.store,getSelectedClinicalAttributeIds:this.getSelectedClinicalAttributeIds,onChangeSelectedClinicalTracks:this.props.handlers.onChangeSelectedClinicalTracks}):null}},{key:"getHeatmapMenu",value:function(){var e=this.props.state.heatmapIsDynamicallyQueried,t=e&&this.props.state.selectedHeatmapProfileAlterationType!==B.a.GENERIC_ASSAY,n=e&&this.props.state.selectedHeatmapProfileAlterationType===B.a.GENERIC_ASSAY;if(this.props.oncoprinterMode||this.props.state.hideHeatmapMenu||!this.props.state.heatmapProfilesPromise)return null;var o=r.createElement(R.a,{isLoading:!0});if(this.props.state.heatmapProfilesPromise.isComplete){if(!this.props.state.heatmapProfilesPromise.result.length)return null;o=r.createElement("div",{className:"oncoprint__controls__heatmap_menu"},r.createElement(N.default,{clearable:!1,searchable:!1,isLoading:this.props.state.heatmapProfilesPromise.isPending,onChange:this.onHeatmapProfileSelect,value:this.props.state.selectedHeatmapProfileId,options:this.heatmapProfileOptions}),t&&[r.createElement(H.b,{inputGeneQuery:this.props.state.heatmapGeneInputValue||"",callback:this.onChangeHeatmapGeneInput,location:H.a.ONCOPRINT_HEATMAP}),r.createElement("button",{key:"addGenesToHeatmapButton",className:"btn btn-sm btn-default",name:Re,onClick:this.onButtonClick,disabled:(this.props.state.heatmapGeneInputValue||"").trim().length>0&&!this.heatmapGenesReady},"Add Genes to Heatmap")],n&&[this.isGenericAssayDataComplete?r.createElement("div",{className:l()("generic-assay-selector")},this.isSelectedGenericAssayOptionsOverLimit&&r.createElement("div",{className:"alert alert-warning"},r.createElement("i",{className:"fa fa-warning",style:{marginRight:3}}),"Warning: we don't support adding more than 100 options, please make sure your selection has less than 100 options."),r.createElement(me.default,{name:"generic-assay-select",placeholder:"Search for ".concat(Object(he.n)(this.props.state.selectedHeatmapProfileGenericAssayType,!0),"..."),closeMenuOnSelect:!1,value:this.selectedGenericAssaysJS,isMulti:!0,options:this.genericAssayOptions,filterOption:this.filterGenericAssayOption,onInputChange:this.onGenericAssayInputChange,onChange:this.onSelectGenericAssayEntities,styles:{multiValueLabel:function(e){return Object.assign(Object.assign({},e),{whiteSpace:"normal"})}}})):r.createElement(R.a,{isLoading:!0}),r.createElement("button",{key:"addGenericAssaysToHeatmapButton",className:"btn btn-sm btn-default",name:et,onClick:this.onButtonClick,disabled:!this.isGenericAssayDataComplete||this.isSelectedGenericAssayOptionsOverLimit},"Add ".concat(Object(he.n)(this.props.state.selectedHeatmapProfileGenericAssayType,!0)," to Heatmap"))],this.props.state.ngchmButtonActive&&[r.createElement("hr",null),r.createElement(L.d,{overlay:r.createElement("span",null,"Open a new tab to visualize this study as Next Generation Clustered Heatmaps from MD Anderson Cancer Center.")},r.createElement("button",{className:l()("btn","btn-sm","btn-default"),name:$e,onClick:this.onButtonClick},"Whole Study Heatmap (NG-CHM)"," ",r.createElement("i",{className:"fa fa-external-link","aria-hidden":"true"})))])}else this.props.state.heatmapProfilesPromise.isError&&(o=r.createElement("span",null,"Error loading heatmap profiles."));return r.createElement(O,{bsStyle:"default",title:"Add Heatmap Tracks",id:"heatmapDropdown",className:"heatmap",titleElement:r.createElement(re,{count:this.props.state.heatmapProfilesPromise.isComplete&&this.props.state.heatmapProfilesPromise.result?this.props.state.heatmapProfilesPromise.result.length:void 0})},o)}},{key:"getSortMenuOncoprinter",value:function(){return r.createElement(O,{bsStyle:"default",title:"Sort",id:"sortDropdown"},r.createElement("div",{className:"oncoprint__controls__sort_menu","data-test":"oncoprintSortDropdownMenu"},r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:je,checked:this.props.state.sortByMutationType,onClick:this.onInputClick,disabled:!this.props.state.distinguishMutationType})," ","Mutation Type")),r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:De,checked:this.props.state.sortByDrivers,onClick:this.onInputClick,disabled:!this.props.state.distinguishDrivers})," ","Driver/Passenger"))))}},{key:"getSortMenuOncoprint",value:function(){return r.createElement(O,{bsStyle:"default",title:"Sort",id:"sortDropdown"},r.createElement("div",{className:"oncoprint__controls__sort_menu","data-test":"oncoprintSortDropdownMenu"},r.createElement("div",{className:"radio"},r.createElement("label",null,r.createElement("input",{"data-test":"sortByData",type:"radio",name:"sortBy",value:Me,checked:"data"===this.props.state.sortMode.type,onClick:this.onInputClick})," ","Sort by data")),r.createElement("div",{style:{marginLeft:"10px"}},r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:je,checked:this.props.state.sortByMutationType,onClick:this.onInputClick,disabled:"data"!==this.props.state.sortMode.type||!this.props.state.distinguishMutationType})," ","Mutation Type")),r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:De,checked:this.props.state.sortByDrivers,onClick:this.onInputClick,disabled:"data"!==this.props.state.sortMode.type||!this.props.state.distinguishDrivers})," ","Driver/Passenger"))),r.createElement("div",{className:"radio"},r.createElement("label",null,r.createElement("input",{type:"radio",name:"sortBy",value:Ie,checked:"alphabetical"===this.props.state.sortMode.type,onClick:this.onInputClick})," ","Sort by case id (alphabetical)")),r.createElement("div",{className:"radio"},r.createElement("label",null,r.createElement("input",{type:"radio",name:"sortBy",value:Ne,checked:"caseList"===this.props.state.sortMode.type,onClick:this.onInputClick,"data-test":"caseList",disabled:!!this.props.state.sortByCaseListDisabled})," ","Sort by case list order")),this.props.state.heatmapProfilesPromise&&!(this.props.state.heatmapProfilesPromise.isComplete&&!this.props.state.heatmapProfilesPromise.result.length)&&r.createElement("div",{className:"radio"},r.createElement("label",null,r.createElement("input",{"data-test":"sortByHeatmapClustering",type:"radio",name:"sortBy",checked:"heatmap"===this.props.state.sortMode.type,disabled:!0})," ","Sorted by heatmap clustering order"))))}},{key:"getMutationColorMenu",value:function(){return r.createElement(O,{bsStyle:"default",title:"Mutations",id:"mutationColorDropdown"},r.createElement("div",{className:"oncoprint__controls__mutation_color_menu"},r.createElement("h5",null,"Color by"),r.createElement("div",{style:{marginLeft:"10px"}},r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{"data-test":"ColorByType",type:"checkbox",value:xe,checked:this.props.state.distinguishMutationType,onClick:this.onInputClick})," ","Type")),r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{"data-test":"ColorByGermline",type:"checkbox",value:Ae,checked:this.props.state.distinguishGermlineMutations,onClick:this.onInputClick})," ","Somatic vs Germline"))),this.driverAnnotationSection))}},{key:"getViewMenu",value:function(){return this.props.oncoprinterMode?this.getViewMenuOncoprinter():this.getViewMenuOncoprint()}},{key:"getViewMenuOncoprinter",value:function(){return r.createElement(O,{bsStyle:"default",title:"View",id:"viewDropdownButton"},r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:Oe,checked:this.props.state.showUnalteredColumns,onClick:this.onInputClick})," ","Show unaltered columns")),r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:Ce,checked:this.props.state.showWhitespaceBetweenColumns,onClick:this.onInputClick})," ","Show whitespace between columns")),r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:ke,checked:this.props.state.showClinicalTrackLegends,onClick:this.onInputClick})," ","Show legends for clinical tracks")))}},{key:"getViewMenuOncoprint",value:function(){return r.createElement(O,{bsStyle:"default",title:"View",id:"viewDropdownButton"},r.createElement("strong",null,"Data type:"),r.createElement("div",{className:"radio"},r.createElement("label",null,r.createElement("input",{type:"radio",name:"columnType",value:Ee,checked:this.props.state.columnMode===F.b.SAMPLE,onClick:this.onInputClick})," ","Events per sample")),r.createElement("div",{className:"radio"},r.createElement("label",null,r.createElement("input",{type:"radio",name:"columnType",value:we,checked:this.props.state.columnMode===F.b.PATIENT,onClick:this.onInputClick})," ","Events per patient")),r.createElement("hr",null),r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:Oe,checked:this.props.state.showUnalteredColumns,onClick:this.onInputClick})," ","Show unaltered columns")),r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:Ce,checked:this.props.state.showWhitespaceBetweenColumns,onClick:this.onInputClick})," ","Show whitespace between columns")),r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:ke,checked:this.props.state.showClinicalTrackLegends,onClick:this.onInputClick})," ","Show legends for clinical tracks")),r.createElement("div",{className:"checkbox",style:{marginLeft:20,maxWidth:220}},r.createElement("label",null,r.createElement("input",{"data-test":"onlyShowClinicalLegendsForAltered",type:"checkbox",value:Te,checked:this.props.state.onlyShowClinicalLegendForAlteredCases,onClick:this.onInputClick,disabled:!this.props.state.showClinicalTrackLegends})," ","Only show clinical track legends for altered"," ",this.props.state.columnMode===F.b.PATIENT?"patients":"samples",".")),r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:Pe,checked:this.props.state.showOqlInLabels,onClick:this.onInputClick})," ","Show OQL filters")))}},{key:"getDownloadMenu",value:function(){return r.createElement(O,{bsStyle:"default",title:"Download",id:"downloadDropdownButton"},r.createElement("button",{className:"btn btn-sm btn-default",name:Qe,onClick:this.onButtonClick},"PDF"),r.createElement("button",{className:"btn btn-sm btn-default",name:Ke,onClick:this.onButtonClick},"PNG"),r.createElement("button",{className:"btn btn-sm btn-default",name:Ye,onClick:this.onButtonClick},"SVG"),r.createElement("button",{className:"btn btn-sm btn-default",name:Xe,onClick:this.onButtonClick},this.props.state.columnMode&&this.props.state.columnMode[0].toUpperCase()+this.props.state.columnMode.slice(1)||"Sample"," ","order"),!this.props.oncoprinterMode&&r.createElement("button",{className:"btn btn-sm btn-default",name:Ze,onClick:this.onButtonClick},"Tabular"),!this.props.oncoprinterMode&&r.createElement("button",{className:"btn btn-sm btn-default",name:Je,onClick:this.onButtonClick},"Open in Oncoprinter"))}},{key:"getHorzZoomControls",value:function(){return r.createElement("div",{className:"btn btn-default oncoprint__zoom-controls"},r.createElement(L.d,{overlay:r.createElement("span",null,"Zoom out of oncoprint."),placement:"top"},r.createElement("div",{onClick:this.onZoomOutClick},r.createElement("i",{className:"fa fa-search-minus"}))),r.createElement(L.d,{overlay:r.createElement("span",null,"Zoom in/out of oncoprint."),placement:"top"},r.createElement("div",{style:{width:"90px"}},r.createElement(V.a,{value:this.horzZoomSliderState,onChange:this.onHorzZoomSliderChange,onChangeComplete:this.onHorzZoomSliderSet,step:.01,max:1,min:0,tooltip:!1}))),r.createElement(L.f,{value:(100*this.horzZoomSliderState).toFixed(),setValue:this.onSetHorzZoomTextInput,maxChars:3,numericOnly:!0,textFieldAppearance:!0,style:{background:"white",minWidth:"30px",fontSize:"14px",fontFamily:"arial",border:"none",padding:0,marginTop:0,marginBottom:0,marginRight:2}}),r.createElement("div",null,"%"),r.createElement(L.d,{overlay:r.createElement("span",null,"Zoom in to oncoprint."),placement:"top"},r.createElement("div",{onClick:this.onZoomInClick},r.createElement("i",{className:"fa fa-search-plus"}))))}},{key:"getSortMenu",value:function(){return this.props.oncoprinterMode?this.getSortMenuOncoprinter():this.getSortMenuOncoprint()}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:"oncoprint__controls"},r.createElement(i.ButtonGroup,null,r.createElement(o.Observer,null,this.getClinicalTracksMenu),r.createElement(o.Observer,null,this.getHeatmapMenu),r.createElement(o.Observer,null,this.getSortMenu),r.createElement(o.Observer,null,this.getMutationColorMenu),r.createElement(o.Observer,null,this.getViewMenu),r.createElement(o.Observer,null,this.getDownloadMenu),r.createElement(o.Observer,null,this.getHorzZoomControls),this.minimapButton,r.createElement(I,{show:this.showConfirmNgchmModal,onHide:function(){return e.showConfirmNgchmModal=!1},openNgchmWindow:this.props.handlers.onClickNGCHM})))}},{key:"genericAssayEntitiesSelectOptionsInSelectedHeatmapProfile",get:function(){return this.props.state.selectedHeatmapProfileId&&this.isGenericAssayDataComplete&&this.props.genericAssayEntitiesSelectOptionsGroupByMolecularProfileIdPromise.result&&this.props.genericAssayEntitiesSelectOptionsGroupByMolecularProfileIdPromise.result[this.props.state.selectedHeatmapProfileId]?this.props.genericAssayEntitiesSelectOptionsGroupByMolecularProfileIdPromise.result[this.props.state.selectedHeatmapProfileId]:[]}},{key:"isGenericAssayDataComplete",get:function(){return D.a.every([this.props.genericAssayEntitiesSelectOptionsGroupByMolecularProfileIdPromise,this.props.genericAssayEntitiesSelectOptionsGroupByGenericAssayTypePromise,this.props.state.genericAssayEntitiesGroupByGenericAssayTypePromise],function(e){return e&&e.isComplete})}},{key:"heatmapProfileOptions",get:function(){return this.props.state.heatmapProfilesPromise&&this.props.state.heatmapProfilesPromise.result?D.a.map(this.props.state.heatmapProfilesPromise.result,function(e){return{label:e.name,value:e.molecularProfileId,type:e.molecularAlterationType}}):[]}},{key:"genericAssayEntitiesOptionsByValueMap",get:function(){return this.props.state.selectedHeatmapProfileGenericAssayType&&this.isGenericAssayDataComplete&&this.props.genericAssayEntitiesSelectOptionsGroupByGenericAssayTypePromise.result&&this.props.genericAssayEntitiesSelectOptionsGroupByGenericAssayTypePromise.result[this.props.state.selectedHeatmapProfileGenericAssayType]?D.a.keyBy(this.props.genericAssayEntitiesSelectOptionsGroupByGenericAssayTypePromise.result[this.props.state.selectedHeatmapProfileGenericAssayType],function(e){return e.value}):{}}},{key:"selectedGenericAssayEntities",get:function(){var e=this;return D.a.intersection(this._selectedGenericAssayEntityIds,D.a.keys(this.genericAssayEntitiesOptionsByValueMap)).map(function(t){return e.genericAssayEntitiesOptionsByValueMap[t]})}},{key:"selectedGenericAssaysJS",get:function(){return Object(u.toJS)(this.selectedGenericAssayEntities)}},{key:"genericAssayOptions",get:function(){var e=this,t=this.props.state.selectedHeatmapProfileId&&this.isGenericAssayDataComplete&&this.props.genericAssayEntitiesSelectOptionsGroupByMolecularProfileIdPromise.result?this.props.genericAssayEntitiesSelectOptionsGroupByMolecularProfileIdPromise.result[this.props.state.selectedHeatmapProfileId]:[],n=t.filter(function(t){return e.isOptionIncludingText(e._genericAssaySearchText,t)&&!e._selectedGenericAssayEntityIds.includes(t.value)}).length;return this._genericAssaySearchText.length>0&&n>0&&(t=D.a.concat({id:"select_all_filtered_options",value:"select_all_filtered_options",label:"Select all filtered options (".concat(n,")")},t)),t}},{key:"filteredGenericAssayOptions",get:function(){var e=this;return D.a.filter(this.genericAssayOptions,function(t){return"select_all_filtered_options"!==t.value&&e.isOptionIncludingText(e._genericAssaySearchText,t)})}},{key:"isSelectedGenericAssayOptionsOverLimit",get:function(){return this._selectedGenericAssayEntityIds.length>100}},{key:"driverAnnotationSection",get:function(){if(this.props.oncoprinterMode||!this.props.store)return r.createElement(r.Fragment,null,r.createElement("h5",null,"Annotate"),r.createElement("div",{style:{marginLeft:10}},r.createElement(fe.a,{state:this.props.state,handlers:Object.assign({onCustomDriverTierCheckboxClick:this.onCustomDriverTierCheckboxClick},this.props.handlers)})),r.createElement("h5",null,"Filter"),r.createElement("div",{style:{marginLeft:10}},r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{"data-test":"HideVUS",type:"checkbox",value:We,checked:this.props.state.hidePutativePassengers,onClick:this.onInputClick,disabled:!this.props.state.distinguishDrivers})," ","Hide mutations and copy number alterations of unknown significance")),r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{"data-test":"HideGermline",type:"checkbox",value:qe,checked:this.props.state.hideGermlineMutations,onClick:this.onInputClick,disabled:!this.props.state.distinguishGermlineMutations})," ","Hide germline mutations"))));var e=this.props.store;return r.createElement(r.Fragment,null,r.createElement("h5",null,"Annotate and Filter"),r.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",marginLeft:10}},"Please see the",r.createElement("button",{style:{marginLeft:5,marginRight:5,marginBottom:0,width:"auto",padding:"1px 5px 1px 5px"},className:"btn btn-primary",onClick:function(){e.resultsPageSettingsVisible=!e.resultsPageSettingsVisible}},r.createElement("i",{className:"fa fa-sliders"})),"menu."))}},{key:"showMinimap",get:function(){return this.props.state.showMinimap}},{key:"minimapButton",get:function(){return r.createElement("div",{className:"btn-group"},r.createElement(L.d,{overlay:r.createElement("span",null,"Toggle minimap panel.")},r.createElement(i.Button,{active:this.showMinimap,onClick:this.toggleShowMinimap},r.createElement("img",{"data-test":"ShowMinimapButton",src:n(1013),alt:"icon",style:{width:15,height:15}}))))}}])&&ye(a.prototype,s),c&&ye(a,c),t}();Se([u.observable],tt.prototype,"horzZoomSliderState",void 0),Se([u.observable],tt.prototype,"heatmapGenesReady",void 0),Se([u.observable.ref],tt.prototype,"_selectedGenericAssayEntityIds",void 0),Se([u.observable],tt.prototype,"_genericAssaySearchText",void 0),Se([u.observable],tt.prototype,"showConfirmNgchmModal",void 0),Se([u.computed],tt.prototype,"genericAssayEntitiesSelectOptionsInSelectedHeatmapProfile",null),Se([u.computed],tt.prototype,"isGenericAssayDataComplete",null),Se([U.default,u.action],tt.prototype,"onChangeHeatmapGeneInput",null),Se([u.computed],tt.prototype,"heatmapProfileOptions",null),Se([u.computed],tt.prototype,"genericAssayEntitiesOptionsByValueMap",null),Se([U.default,u.action],tt.prototype,"onSelectGenericAssayEntities",null),Se([u.computed],tt.prototype,"selectedGenericAssayEntities",null),Se([u.computed],tt.prototype,"selectedGenericAssaysJS",null),Se([u.computed],tt.prototype,"genericAssayOptions",null),Se([u.computed],tt.prototype,"filteredGenericAssayOptions",null),Se([U.default],tt.prototype,"filterGenericAssayOption",null),Se([U.default],tt.prototype,"onGenericAssayInputChange",null),Se([u.computed],tt.prototype,"isSelectedGenericAssayOptionsOverLimit",null),Se([U.default],tt.prototype,"getSelectedClinicalAttributeIds",null),Se([u.computed],tt.prototype,"driverAnnotationSection",null),Se([u.computed],tt.prototype,"showMinimap",null),tt=Se([o.observer],tt);t.a=tt},function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(110),a=n(66),s=n(289),l=n(6),u=n(5),c=n.n(u),p=n(801),d=n.n(p),f=n(47),h=n(824),m=n(817),y=n(130),g=n(3),b=n(23),v=n(15),_=n(2);function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var T=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":k(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},P=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=w(this,O(t).apply(this,arguments))).hovered=!1,e.hoverTimeout=null,e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(t,r["Component"]),n=t,(o=[{key:"buttonRef",value:function(e){this.button=e}},{key:"onMouseClick",value:function(){this.hovered=!1}},{key:"onMouseEnter",value:function(){var e=this;this.hoverTimeout=setTimeout(function(){e.hovered=!0},g.n)}},{key:"onMouseLeave",value:function(){this.hovered=!1,clearTimeout(this.hoverTimeout),this.hoverTimeout=null}},{key:"onMouseDown",value:function(){this.hovered=!1}},{key:"render",value:function(){var e,t=this,n=this.props.group,o=this.props.isSelected(n.name),i=Object(f.w)([n]),a=Object(f.v)(i,this.props.sampleSet);return r.createElement("button",{ref:this.buttonRef,className:c()("btn btn-xs",(e={},S(e,d.a.buttonUnselected,!o),S(e,d.a.buttonExcludedFromAnalysis,this.props.excludedFromAnalysis),e)),onClick:this.onMouseClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseDown:this.onMouseDown,style:{backgroundColor:n.color},"data-test":"groupSelectorButton".concat(n.name)},r.createElement("span",{style:{display:"flex",alignItems:"center"}},r.createElement("div",{style:{display:"flex",alignItems:"center"},onClick:function(){return t.props.onClick(n.name)}},r.createElement("div",{className:"text-with-ellipsis",style:{display:"inline-block",color:Object(y.e)(n.color),maxWidth:200}},Object(y.h)(n))," ",r.createElement("span",{style:{color:Object(y.e)(n.color)}},"(",i.length===a.length?i.length:"".concat(i.length,"/").concat(a.length),")")),n.nonExistentSamples.length>0&&r.createElement(h.a,{style:{marginLeft:7},tooltip:r.createElement(f.e,{samples:n.nonExistentSamples})}),this.props.deletable&&r.createElement("div",{style:{paddingLeft:2,marginLeft:5,marginRight:-3,borderLeft:"1px dashed white",cursor:"pointer"},"data-test":"deleteButton",onClick:function(){return t.props.onClickDelete(n.name)}},r.createElement("i",{className:"fa fa-times-circle"}))),this.button&&b.createPortal(r.createElement(v.Overlay,{rootClose:!0,placement:"top",show:this.hovered,target:this.button},r.createElement(v.Popover,{arrowOffsetTop:17,className:c()("cbioportal-frontend","cbioTooltip")},r.createElement("div",null,Object(y.h)(n)," ",Object(f.j)(i,a),n.description&&" - ".concat(n.description)),this.props.excludedFromAnalysis&&r.createElement("div",{style:{maxWidth:300,whiteSpace:"initial",marginTop:5}},"This group is a subset of the other selected groups, so it's excluded from analysis, and not considered in overlap calculations."))),document.body))}}])&&E(n.prototype,o),i&&E(n,i),t}();T([_.observable],P.prototype,"hovered",void 0),T([_.observable.ref],P.prototype,"button",void 0),T([l.default,_.action],P.prototype,"buttonRef",null),T([l.default,_.action],P.prototype,"onMouseClick",null),T([l.default,_.action],P.prototype,"onMouseEnter",null),T([l.default,_.action],P.prototype,"onMouseLeave",null),T([l.default,_.action],P.prototype,"onMouseDown",null),P=T([o.observer],P);var x=Object(m.SortableElement)(P);function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return!t||"object"!==M(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var D=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":M(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},R=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),j(this,I(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement("div",{className:d.a.groupButtons},r.createElement("div",null,this.props.buttons))}}])&&A(n.prototype,o),i&&A(n,i),t}();R=D([o.observer],R);var L=Object(m.SortableContainer)(R);function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var U=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":H(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},W=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),V(this,B(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement("div",{style:{display:"inline-flex",whiteSpace:"nowrap",paddingLeft:7,paddingRight:7}},r.createElement("a",{onClick:this.props.store.selectAllGroups},"Select all")," | ",r.createElement("a",{onClick:this.props.store.deselectAllGroups},"Deselect all"))}}])&&G(n.prototype,o),i&&G(n,i),t}();W=U([o.observer],W);var q=Object(m.SortableElement)(W),z=n(174);function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e,t){return!t||"object"!==Z(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var J=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Z(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},$=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),K(this,Y(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement("button",{className:c()("btn btn-xs btn-default"),onClick:this.props.toggleCollapsedGroups,"data-test":"groupSelectorCollapseButton"},this.props.collapsed?"".concat(this.props.numCollapsedGroups," more groups ").concat(String.fromCharCode(9660)):"Show less ".concat(String.fromCharCode(9650)))}}])&&Q(n.prototype,o),i&&Q(n,i),t}();$=J([o.observer],$);var ee=Object(m.SortableElement)($);function te(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e,t){return!t||"object"!==ae(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ae(e){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var se=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ae(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},le=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=re(this,oe(t).apply(this,arguments))).collapsedGroupsShown=!1,e.dragging=!1,e.tabUI=Object(i.a)({await:function(){return[e.props.store._originalGroups,e.props.store.sampleMap,e.props.store.overlapComputations]},render:function(){var t=e.props.store._originalGroups.result.length;if(0===t)return null;var n,o=[];if(void 0===e.props.groupCollapseThreshold||t<=e.props.groupCollapseThreshold||e.collapsedGroupsShown?o=e.props.store._originalGroups.result.map(e.makeGroupButton):(n=o).push.apply(n,te(e.props.store._originalGroups.result.slice(0,e.props.groupCollapseThreshold-1).map(e.makeGroupButton))),void 0!==e.props.groupCollapseThreshold&&t>e.props.groupCollapseThreshold){var i=t-e.props.groupCollapseThreshold+1;o.push(r.createElement(ee,{numCollapsedGroups:i,toggleCollapsedGroups:e.toggleCollapsedGroups,collapsed:!e.collapsedGroupsShown,disabled:!0,index:o.length}))}return o.push(r.createElement(q,{store:e.props.store,disabled:!0,index:o.length})),r.createElement("div",{style:{display:"flex",alignItems:"center",position:"relative"}},r.createElement("strong",{style:{marginRight:5}},"Groups: "),r.createElement("span",{style:{fontSize:12,marginRight:3}},"(drag to reorder)"),r.createElement(L,{buttons:o,axis:"xy",onSortStart:e.onSortStart,onSortEnd:e.onSortEnd,distance:6}))},renderPending:function(){return r.createElement(a.a,{isLoading:!0,size:"big",center:!0})},renderError:function(){return r.createElement(s.a,null)}}),e}var n,o,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}(t,r["Component"]),n=t,(o=[{key:"toggleCollapsedGroups",value:function(){this.collapsedGroupsShown=!this.collapsedGroupsShown}},{key:"isSelected",value:function(e){return!!this.props.store.isGroupSelected(e)}},{key:"onClick",value:function(e){this.dragging||this.props.store.toggleGroupSelected(e)}},{key:"onClickDelete",value:function(e){this.dragging||this.props.store.deleteGroup(e)}},{key:"onSortEnd",value:function(e){e.oldIndex!==e.newIndex&&this.props.store.updateGroupOrder(e.oldIndex,e.newIndex),this.dragging=!1}},{key:"onSortStart",value:function(){this.dragging=!0}},{key:"makeGroupButton",value:function(e,t){var n=this.props.store.overlapStrategy===z.a.EXCLUDE&&e.uid in this.props.store.overlapComputations.result.excludedFromAnalysis;return r.createElement(x,{isSelected:this.isSelected,deletable:this.props.isGroupDeletable(e),onClick:this.onClick,onClickDelete:this.onClickDelete,sampleSet:this.props.store.sampleMap.result,group:e,index:t,excludedFromAnalysis:n})}},{key:"render",value:function(){return this.tabUI.component}}])&&ne(n.prototype,o),l&&ne(n,l),t}();se([_.observable],le.prototype,"collapsedGroupsShown",void 0),se([l.default,_.action],le.prototype,"toggleCollapsedGroups",null),se([l.default],le.prototype,"isSelected",null),se([l.default],le.prototype,"onClick",null),se([l.default],le.prototype,"onClickDelete",null),se([l.default],le.prototype,"onSortEnd",null),se([l.default],le.prototype,"onSortStart",null),se([l.default],le.prototype,"makeGroupButton",null),le=se([o.observer],le);t.a=le},function(e,t,n){"use strict";var r=n(0),o=n(915),i=(n(812),n(66)),a=n(9),s=n(3),l=n(110),u=n(47),c=n(289),p=n(130),d=n(298),f=n(30),h=n(1),m=n.n(h),y=n(96);function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var O=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":w(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},C=function(e){function t(){return b(this,t),v(this,_(t).apply(this,arguments))}return S(t,y["b"]),t}(),k=function(e){function t(){return b(this,t),v(this,_(t).apply(this,arguments))}var n,o,i;return S(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement(C,{data:this.props.survivalDescriptionData,columns:[{name:"Study",render:function(e){return r.createElement("span",null,e.studyName)},sortBy:function(e){return e.studyName}},{name:"Description",render:function(e){return r.createElement("span",null,e.description)},sortBy:function(e){return e.description}}],initialSortColumn:"Description",initialSortDirection:"desc",showPagination:!0,initialItemsPerPage:10,showColumnVisibility:!1,showFilter:!1,showCopyDownload:!1})}}])&&g(n.prototype,o),i&&g(n,i),t}(),T=k=O([a.observer],k),P=n(909),x=n(174),A=n(93),j=n(2),I=n(801),N=n.n(I),M=n(6),D=n(151),R=n(49),L=n(54),G=n(312),V=n(8);function B(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){return!t||"object"!==Q(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var K,Y=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Q(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},X=function(e){function t(e,n){var r;return H(this,t),(r=U(this,W(t).call(this,e))).dataHighlighter=function(e){return e.prefix===n()},r}return q(t,D["a"]),t}();function Z(e){var t="# in ".concat(e);return{name:t,render:function(t){return r.createElement("span",null,t.numPatientsPerGroup[e])},sortBy:function(t){return t.numPatientsPerGroup[e]},filter:Object(G.a)(function(t){return t.numPatientsPerGroup[e]},t),download:function(t){return t.numPatientsPerGroup[e].toString()},visible:!1}}function J(e){var t="Median survival in ".concat(e);return{name:t,render:function(t){return r.createElement("span",null,t.medianPerGroup[e])},sortBy:function(t){var n=parseFloat(t.medianPerGroup[e]);return isNaN(n)?Number.POSITIVE_INFINITY:n},filter:Object(G.a)(function(t){var n=parseFloat(t.medianPerGroup[e]);return isNaN(n)?Number.POSITIVE_INFINITY:n},t),download:function(t){return t.medianPerGroup[e]},visible:!1}}!function(e){e.P_VALUE="p-Value"}(K||(K={}));var $=[{name:"Survival Type",render:function(e){return r.createElement("span",null,e.displayText)},filter:function(e,t,n){return e.displayText.toUpperCase().indexOf(n)>-1},sortBy:function(e){return e.displayText},download:function(e){return e.displayText},visible:!0},{name:"# Patients With Data",render:function(e){return r.createElement("span",null,e.numPatients)},sortBy:function(e){return e.numPatients},filter:Object(G.a)(function(e){return e.numPatients},"# Patients With Data"),download:function(e){return e.numPatients.toString()},visible:!0}],ee=[{name:K.P_VALUE,render:function(e){return r.createElement("span",null,null!==e.pValue?Object(R.e)(e.pValue,3,.01,-10):"N/A")},sortBy:function(e){return e.pValue},filter:Object(G.a)(function(e){return e.pValue},K.P_VALUE),download:function(e){return null!==e.pValue?Object(L.b)(e.pValue,3,.01):"N/A"},tooltip:r.createElement("span",null,"Derived from Log Rank test."),visible:!0},{name:"q-Value",render:function(e){return r.createElement("span",null,null!==e.qValue?Object(R.e)(e.qValue,3,.01,-10):"N/A")},sortBy:function(e){return e.qValue},filter:Object(G.a)(function(e){return e.qValue},"q-Value"),download:function(e){return null!==e.qValue?Object(L.b)(e.qValue,3,.01):"N/A"},tooltip:r.createElement("span",null,"Derived from Benjamini-Hochberg FDR correction procedure."),visible:!0}],te=function(e){function t(e){var n;return H(this,t),(n=U(this,W(t).call(this,e))).dataStore=new X(function(){return n.props.survivalPrefixes},n.props.getSelectedPrefix),n.columnVisibility=n.initColumnVisibility(),n}var n,o,i;return q(t,r["Component"]),n=t,(o=[{key:"initColumnVisibility",value:function(){return m.a.mapValues(m.a.keyBy(this.columns,function(e){return e.name}),function(e){return e.visible})}},{key:"onRowClick",value:function(e){this.props.setSelectedPrefix(e.prefix)}},{key:"onColumnToggled",value:function(e,t){this.columnVisibility=Object(s.bb)(this.columnVisibility,e,t)}},{key:"render",value:function(){return r.createElement(y.b,{columns:this.columns,showColumnVisibility:!0,columnVisibility:this.columnVisibility,columnVisibilityProps:{onColumnToggled:this.onColumnToggled},initialFilterString:"patients>10",initialSortColumn:K.P_VALUE,initialSortDirection:"asc",dataStore:this.dataStore,onRowClick:this.onRowClick,paginationProps:{itemsPerPageOptions:[15]},initialItemsPerPage:15,copyDownloadProps:{showCopy:!1}})}},{key:"columns",get:function(){var e=[].concat($,B(this.props.groupNames.map(Z)),B(this.props.groupNames.map(J)));return V.b.serverConfig.survival_show_p_q_values_in_survival_type_table&&e.push.apply(e,ee),e}}])&&F(n.prototype,o),i&&F(n,i),t}();Y([j.observable],te.prototype,"columnVisibility",void 0),Y([M.default],te.prototype,"onRowClick",null),Y([M.default],te.prototype,"onColumnToggled",null),Y([j.computed],te.prototype,"columns",null);var ne=te=Y([a.observer],te),re=n(158),oe=n(825);function ie(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function se(e,t){return!t||"object"!==ce(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function le(e){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ce(e){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var pe=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ce(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},de=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=se(this,le(t).apply(this,arguments))).multipleDescriptionWarningMessageWithoutTooltip="The survival data on patients from different cohorts may have been defined by ",e.multipleDescriptionWarningMessageWithTooltip="different criteria.",e.differentDescriptionExistMessage="Different descriptions of survival data were used for different studies.",e.selectedSurvivalPlotPrefix=void 0,e.analysisGroupsComputations=Object(s.T)({await:function(){return[e.props.store.activeGroups,e.props.store.patientsVennPartition,e.props.store.uidToGroup,e.props.store.patientToSamplesSet]},invoke:function(){var t=m.a.reduce(e.props.store._activeGroupsNotOverlapRemoved.result,function(e,t,n){return e[t.uid]=n,e},{}),n=e.props.store.patientsVennPartition.result;n.sort(function(e,n){var r=Object.keys(e.key).filter(function(t){return e.key[t]}),o=Object.keys(n.key).filter(function(e){return n.key[e]});return r.length!==o.length?r.length-o.length:m.a.sumBy(r,function(e){return t[e]})-m.a.sumBy(o,function(e){return t[e]})});var r=e.props.store.uidToGroup.result,o=[],i={};if(e.props.store.overlapStrategy===x.a.INCLUDE){var a=!0,s=!1,l=void 0;try{for(var u,c=function(){var e=u.value,n=Object.keys(e.key).filter(function(t){return e.key[t]});if(n.sort(function(e,n){return t[e]-t[n]}),n.length>0){var a="Only ".concat(n.map(function(e){return r[e].nameWithOrdinal}).join(", ")),s=n.join(","),l=!0,c=!1,d=void 0;try{for(var f,h=e.value[Symbol.iterator]();!(l=(f=h.next()).done);l=!0){var m=f.value;i[m]=[s]}}catch(e){c=!0,d=e}finally{try{l||null==h.return||h.return()}finally{if(c)throw d}}o.push({name:a,color:Object(p.a)(n.map(function(e){return r[e].color})),value:s,legendText:JSON.stringify(n)})}},d=n[Symbol.iterator]();!(a=(u=d.next()).done);a=!0)c()}catch(e){s=!0,l=e}finally{try{a||null==d.return||d.return()}finally{if(s)throw l}}}else{var h=e.props.store.patientToSamplesSet.result,y=!0,g=!1,b=void 0;try{for(var v,_=e.props.store.activeGroups.result[Symbol.iterator]();!(y=(v=_.next()).done);y=!0){var S=v.value,E=S.nameWithOrdinal;o.push({name:E,color:S.color,value:S.uid,legendText:S.uid});var w=Object(f.Y)([S]),O=!0,C=!1,k=void 0;try{for(var T,P=w[Symbol.iterator]();!(O=(T=P.next()).done);O=!0){var A=T.value,j=h.get({studyId:A.studyId,patientId:A.patientId});j&&j.length&&(i[j[0].uniquePatientKey]=[S.uid])}}catch(e){C=!0,k=e}finally{try{O||null==P.return||P.return()}finally{if(C)throw k}}}}catch(e){g=!0,b=e}finally{try{y||null==_.return||_.return()}finally{if(g)throw b}}}return Promise.resolve({analysisGroups:o,patientToAnalysisGroups:i})}}),e.sortedGroupedSurvivals=Object(s.T)({await:function(){return[e.analysisGroupsComputations,e.props.store.patientSurvivals]},invoke:function(){var t=e.analysisGroupsComputations.result.patientToAnalysisGroups,n=m.a.mapValues(e.props.store.patientSurvivals.result,function(e){return m.a.reduce(e,function(e,n){n.uniquePatientKey in t&&t[n.uniquePatientKey].forEach(function(t){e[t]=e[t]||[],e[t].push(n)});return e},{})});return Promise.resolve(m.a.mapValues(n,function(e){return m.a.mapValues(e,function(e){return e.sort(function(e,t){return e.months-t.months})})}))}}),e.pValuesByPrefix=Object(s.T)({await:function(){return[e.sortedGroupedSurvivals,e.analysisGroupsComputations]},invoke:function(){var t=e.analysisGroupsComputations.result.analysisGroups;return Promise.resolve(m.a.mapValues(e.sortedGroupedSurvivals.result,function(e){var n=null;return t.length>1&&(n=oe.a.apply(void 0,ie(t.map(function(t){return e[t.value]||[]})))),n}))}}),e.qValuesByPrefix=Object(s.T)({await:function(){return[e.pValuesByPrefix]},invoke:function(){var t=m.a.map(e.pValuesByPrefix.result,function(e,t){return{pVal:e,prefix:t}}),n=m.a.sortBy(t.filter(function(e){return null!==e.pVal}),function(e){return e.pVal}),r=Object(re.a)(n.map(function(e){return e.pVal})),o=m.a.clone(e.pValuesByPrefix.result);return n.forEach(function(e,t){o[e.prefix]=r[t]}),Promise.resolve(o)}}),e.tabUI=Object(l.a)({await:function(){return e.props.store._activeGroupsNotOverlapRemoved.isComplete&&e.props.store._activeGroupsNotOverlapRemoved.result.length>10?[e.props.store._activeGroupsNotOverlapRemoved]:[e.props.store._activeGroupsNotOverlapRemoved,e.survivalUI,e.props.store.overlapComputations,e.survivalPrefixTable]},render:function(){var t=e.props.store._activeGroupsNotOverlapRemoved.result.length,n=[];return n=t>10?r.createElement("span",null,u.h):0===t?r.createElement("span",null,u.g):r.createElement(r.Fragment,null,r.createElement("div",{className:"tabMessageContainer",style:{paddingBottom:0}},r.createElement("div",{className:"alert alert-info"},r.createElement("i",{className:"fa fa-md fa-info-circle",style:{verticalAlign:"middle !important",marginRight:6,marginBottom:1}}),"Interpret all outcome results with caution, as they can be confounded by many different variables that are not controlled for in these analyses. Consider consulting a statistician."),r.createElement(d.a,{store:e.props.store,only:"patient",survivalTabMode:!0})),r.createElement("div",{style:{display:"flex"}},e.survivalPrefixTable.component&&r.createElement("div",{style:{marginRight:15,marginTop:15,minWidth:475,maxWidth:475,height:"fit-content",overflowX:"scroll"}},e.survivalPrefixTable.component),e.survivalUI.component)),r.createElement("div",{"data-test":"ComparisonPageSurvivalTabDiv"},n)},renderPending:function(){return r.createElement(i.a,{center:!0,isLoading:!0,size:"big"})},renderError:function(){return r.createElement(c.a,null)},showLastRenderWhenPending:!0}),e.survivalPrefixTable=Object(l.a)({await:function(){return[e.survivalTitleText,e.props.store.patientSurvivals,e.pValuesByPrefix,e.qValuesByPrefix,e.analysisGroupsComputations]},render:function(){var t=e.props.store.patientSurvivals.result,n=e.analysisGroupsComputations.result.analysisGroups,o=m.a.keyBy(n,function(e){return e.value}),i=e.analysisGroupsComputations.result.patientToAnalysisGroups,a=e.pValuesByPrefix.result,s=e.qValuesByPrefix.result,l=e.survivalTitleText.result;return Object.keys(l).length>1?r.createElement(ne,{groupNames:n.map(function(e){return e.name}),survivalPrefixes:m.a.map(e.survivalTitleText.result,function(e,r){var l=m.a.mapValues(m.a.keyBy(n,function(e){return e.name}),function(){return[]}),u=!0,c=!1,p=void 0;try{for(var d,f=t[r][Symbol.iterator]();!(u=(d=f.next()).done);u=!0){var h=d.value,y=i[h.uniquePatientKey]||[],g=!0,b=!1,v=void 0;try{for(var _,S=y[Symbol.iterator]();!(g=(_=S.next()).done);g=!0){var E=_.value;l[o[E].name].push(h)}}catch(e){b=!0,v=e}finally{try{g||null==S.return||S.return()}finally{if(b)throw v}}}}catch(e){c=!0,p=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw p}}return{prefix:r,displayText:e,numPatients:m.a.sumBy(t[r],function(e){return e.uniquePatientKey in i?1:0}),numPatientsPerGroup:m.a.mapValues(l,function(e){return e.length}),medianPerGroup:m.a.mapValues(l,function(e){var t=m.a.sortBy(e,function(e){return e.months});return Object(A.h)(t,Object(A.f)(t))}),pValue:a[r],qValue:s[r]}}),getSelectedPrefix:function(){return e.selectedSurvivalPlotPrefix},setSelectedPrefix:e.setSurvivalPlotPrefix}):null}}),e.survivalTitleText=Object(s.T)({await:function(){return[e.props.store.survivalClinicalAttributesPrefix,e.props.store.survivalDescriptions]},invoke:function(){return Promise.resolve(e.props.store.survivalClinicalAttributesPrefix.result.reduce(function(t,n){return t[n]=Object(A.d)(e.props.store.survivalDescriptions.result[n][0].displayName),t},{}))}}),e.survivalUI=Object(l.a)({await:function(){return[e.props.store.survivalDescriptions,e.props.store.survivalXAxisLabelGroupByPrefix,e.props.store.survivalClinicalAttributesPrefix,e.props.store.patientSurvivals,e.props.store.activeStudiesClinicalAttributes,e.analysisGroupsComputations,e.props.store.overlapComputations,e.props.store.uidToGroup,e.props.store.patientSurvivalUniqueStatusText,e.survivalTitleText,e.sortedGroupedSurvivals,e.pValuesByPrefix]},render:function(){var t=null,n=null,i=e.analysisGroupsComputations.result.analysisGroups,a=e.analysisGroupsComputations.result.patientToAnalysisGroups,l={},u=e.survivalTitleText.result;if(e.props.store.survivalClinicalAttributesPrefix.result.forEach(function(t){l[t]=1===e.props.store.survivalDescriptions.result[t].length?e.props.store.survivalDescriptions.result[t][0].description:""}),void 0!==e.selectedSurvivalPlotPrefix||m.a.isEmpty(e.props.store.patientSurvivals.result)||e.setSurvivalPlotPrefix(m.a.keys(e.props.store.patientSurvivals.result)[0]),e.selectedSurvivalPlotPrefix){var c=e.props.store.patientSurvivals.result[e.selectedSurvivalPlotPrefix],p=e.selectedSurvivalPlotPrefix;if(c.length>0){if(e.props.store.survivalDescriptions&&e.props.store.survivalDescriptions.result[p].length>1){var d=e.multipleDescriptionWarningMessageWithoutTooltip;m.a.uniq(m.a.map(e.props.store.survivalDescriptions.result[p],function(e){return e.description})).length>1&&(d="".concat(e.differentDescriptionExistMessage," ").concat(d)),n=r.createElement("div",{className:"tabMessageContainer"},r.createElement("div",{className:"alert alert-warning",role:"alert"},d,r.createElement(s.d,{placement:"bottom",overlay:r.createElement(T,{survivalDescriptionData:e.props.store.survivalDescriptions.result[p]})},r.createElement("a",{href:"javascript:void(0)"},e.multipleDescriptionWarningMessageWithTooltip))))}t=r.createElement("div",{style:{marginBottom:40}},r.createElement("h4",{className:"forceHeaderStyle h4"},u[p]),r.createElement("p",null,l[p]),r.createElement("div",{className:"borderedChart",style:{width:"920px"}},r.createElement(o.b,{key:p,sortedGroupedSurvivals:e.sortedGroupedSurvivals.result[e.selectedSurvivalPlotPrefix],analysisGroups:i,patientToAnalysisGroups:a,title:u[p],xAxisLabel:e.props.store.survivalXAxisLabelGroupByPrefix.result[p],yAxisLabel:u[p],totalCasesHeader:"Number of Cases, Total",statusCasesHeader:"Number of Cases, ".concat(Object(A.l)(p,e.props.store.patientSurvivalUniqueStatusText.result[p])),medianMonthsHeader:"Median Months ".concat(u[p]),yLabelTooltip:"".concat(m.a.startCase(m.a.toLower(u[p]))," estimate"),xLabelWithEventTooltip:A.p[p]||"Time of Death",xLabelWithoutEventTooltip:"Time of last observation",fileName:u[p].replace(" ","_"),showCurveInTooltip:!0,legendLabelComponent:e.props.store.overlapStrategy===x.a.INCLUDE?r.createElement(P.b,{maxLabelWidth:256,uidToGroup:e.props.store.uidToGroup.result,dy:"0.3em"}):r.createElement(P.a,{maxLabelWidth:256,uidToGroup:e.props.store.uidToGroup.result,dy:"0.3em"}),styleOpts:{tooltipYOffset:-28},pValue:e.pValuesByPrefix.result[e.selectedSurvivalPlotPrefix]})))}else t=r.createElement("div",{className:"alert alert-info"},u[p]," not available")}return r.createElement("div",null,r.createElement("div",{className:N.a.survivalPlotHeaderContainer},r.createElement("div",{className:N.a.survivalPlotHeader},r.createElement("ul",{className:"nav nav-pills"},n))),t)},renderPending:function(){return r.createElement(i.a,{center:!0,isLoading:!0,size:"big"})},renderError:function(){return r.createElement(c.a,null)}}),e}var n,a,h;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(t,r["Component"]),n=t,(a=[{key:"setSurvivalPlotPrefix",value:function(e){this.selectedSurvivalPlotPrefix=e}},{key:"render",value:function(){return this.tabUI.component}}])&&ae(n.prototype,a),h&&ae(n,h),t}();pe([j.observable],de.prototype,"selectedSurvivalPlotPrefix",void 0),pe([M.default,j.action],de.prototype,"setSurvivalPlotPrefix",null),de=pe([a.observer],de);t.a=de},function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(6),a=n(66),s=n(2),l=n(151),u=n(96),c=n(54),p=n(49);function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var g,b=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":y(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};!function(e){e.CLINICAL_ATTRIBUTE_NAME="Clinical Attribute",e.CLINICAL_ATTRIBUTE_TYPE="Attribute Type",e.STATISTICAL_TEST_NAME="Statistical Test",e.SCORE="Score",e.P_VALUE="p-Value",e.Q_VALUE="q-Value"}(g||(g={}));var v=[{name:g.CLINICAL_ATTRIBUTE_NAME,render:function(e){return r.createElement("span",{"data-test":e.clinicalAttribute.displayName,style:{fontWeight:e.qValue<.05?"bold":"normal"}},e.clinicalAttribute.displayName)},filter:function(e,t,n){return e.clinicalAttribute.displayName.toUpperCase().indexOf(n)>-1},sortBy:function(e){return e.clinicalAttribute.displayName},download:function(e){return e.clinicalAttribute.displayName},width:160},{name:g.CLINICAL_ATTRIBUTE_TYPE,render:function(e){return r.createElement("span",null,e.clinicalAttribute.patientAttribute?"Patient":"Sample")},filter:function(e,t,n){return(e.clinicalAttribute.patientAttribute?"Patient":"Sample").toUpperCase().indexOf(n)>-1},sortBy:function(e){return e.clinicalAttribute.patientAttribute?"Patient":"Sample"},download:function(e){return e.clinicalAttribute.patientAttribute?"Patient":"Sample"},width:100},{name:g.STATISTICAL_TEST_NAME,render:function(e){return r.createElement("span",{style:{whiteSpace:"nowrap"}},e.method)},filter:function(e,t,n){return e.method.toUpperCase().indexOf(n)>-1},sortBy:function(e){return e.method},download:function(e){return e.method},width:130},{name:g.P_VALUE,render:function(e){return r.createElement("span",{style:{whiteSpace:"nowrap",fontWeight:e.qValue<.05?"bold":"normal"}},Object(p.e)(e.pValue,3,.01,-10))},sortBy:function(e){return e.pValue},download:function(e){return Object(c.b)(e.pValue,3,.01)},width:100,tooltip:r.createElement("span",null,"p-value of null Hypothesis, derived from Chi-Squared test or Kruskal-Wallis test")},{name:g.Q_VALUE,render:function(e){return r.createElement("span",{style:{whiteSpace:"nowrap",fontWeight:e.qValue<.05?"bold":"normal"}},Object(p.e)(e.qValue,3,.01,-10))},sortBy:function(e){return e.qValue},download:function(e){return Object(c.b)(e.qValue,3,.01)},width:100,tooltip:r.createElement("span",null,"Derived from Benjamini-Hochberg FDR correction procedure.")}],_=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,h(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,r["Component"]),n=t,(o=[{key:"onRowClick",value:function(e){this.props.dataStore.setHighlighted(e)}},{key:"render",value:function(){return r.createElement(u.b,{columns:v,initialSortColumn:g.Q_VALUE,initialSortDirection:"asc",showColumnVisibility:!1,dataStore:this.props.dataStore,onRowClick:this.onRowClick,paginationProps:{itemsPerPageOptions:[20]},initialItemsPerPage:20,copyDownloadProps:{showCopy:!1}})}}])&&d(n.prototype,o),i&&d(n,i),t}();b([i.default],_.prototype,"onRowClick",null);var S=_=b([o.observer],_),E=n(1),w=n.n(E),O=n(3),C=n(12),k=n(13),T=n(7),P=n(845),x=n.n(P),A=n(1063),j=n.n(A);function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var L=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":R(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},G=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=N(this,M(t).apply(this,arguments))).visible=!1,e.handleWidth="10%",e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,r["Component"]),n=t,(o=[{key:"doScroll",value:function(e){this.overflow>0&&(this.scrollEl.style.left=e*this.overflow*-1+"px")}},{key:"componentDidMount",value:function(){this.updateScrollbar()}},{key:"componentDidUpdate",value:function(){this.updateScrollbar()}},{key:"updateScrollbar",value:function(){var e=this;setTimeout(function(){e.overflow>0&&Object(s.runInAction)(function(){e.visible=!0;var t=e.scrollEl.parentNode.offsetWidth/e.scrollEl.offsetWidth;e.handleWidth=75*t+"%"})},1)}},{key:"handleDragEvent",value:function(e,t){var n=t.node,r=t.x/(n.parentNode.offsetWidth-n.offsetWidth);r=(r=r>1?1:r)<0?0:r,this.props.onScroll&&this.props.onScroll({percentage:r}),this.doScroll(r)}},{key:"render",value:function(){var e=this,t=Object.assign({},{visibility:this.visible?"visible":"hidden"},this.props.style);return r.createElement("div",{className:j.a.scrollbar,style:t,ref:function(t){return e.scrollbarEl=t}},r.createElement(x.a,{bounds:"parent",onDrag:this.handleDragEvent},r.createElement("div",{className:j.a.handle,style:{width:this.handleWidth}})))}},{key:"scrollEl",get:function(){return this.props.getScrollEl()}},{key:"overflow",get:function(){return this.scrollEl.offsetWidth-this.scrollEl.parentNode.offsetWidth}}])&&I(n.prototype,o),i&&I(n,i),t}();L([s.observable],G.prototype,"visible",void 0),L([s.observable],G.prototype,"handleWidth",void 0),L([i.default],G.prototype,"handleDragEvent",null);var V=G=L([o.observer],G),B=n(299),F=n(26),H=n(47),U=n(300),W=n(149),q=n(110),z=n(298),Q=n(16),K=n(289),Y=n(74);function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e,t,n){return t&&X(e.prototype,t),n&&X(e,n),e}function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $(e,t){return!t||"object"!==oe(t)&&"function"!=typeof t?ee(e):t}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ne(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ie,ae=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":oe(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},se=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},le="clinical-plot-svg",ue=function(e){function t(){return J(this,t),$(this,te(t).apply(this,arguments))}return ne(t,B["a"]),t}(),ce=function(e){function t(e,n,r){var o;return J(this,t),(o=$(this,te(t).call(this,e))).setHighlighted=r,o.dataHighlighter=function(e){var t=n();return!(!t||e.clinicalAttribute.clinicalAttributeId!==t.clinicalAttribute.clinicalAttributeId)},o.reactionDisposer=Object(s.autorun)(function(){o.sortMetric&&o.sortedFilteredData.length>0&&!n()&&o.setHighlighted(o.sortedFilteredData[0])}),o}return ne(t,l["a"]),Z(t,[{key:"destroy",value:function(){this.reactionDisposer()}}]),t}();!function(e){e.Bar="Bar",e.StackedBar="StackedBar",e.PercentageStackedBar="PercentageStackedBar"}(ie||(ie={}));var pe=[{value:ie.Bar,label:"Bar chart"},{value:ie.StackedBar,label:"Stacked bar chart"},{value:ie.PercentageStackedBar,label:"100% stacked bar chart"}],de=function(e){function t(){var e;return J(this,t),(e=$(this,te(t).apply(this,arguments))).tabUI=Object(q.a)({await:function(){var t=[e.props.store.activeGroups];return e.props.store.activeGroups.isComplete&&e.props.store.activeGroups.result.length<2||t.push(e.overlapUI),t},render:function(){var t=[];return e.props.store.activeGroups.result.length<2?t.push(r.createElement("span",null,Object(H.a)(e.props.store._activeGroupsNotOverlapRemoved.result.length))):(t.push(r.createElement(z.a,{store:e.props.store})),t.push(e.overlapUI.component)),r.createElement("div",{"data-test":"ComparisonPageClinicalTabDiv"},t)},renderPending:function(){return r.createElement(a.a,{isLoading:!0,center:!0,size:"big"})},renderError:function(){return r.createElement(K.a,null)}}),e.overlapUI=Object(q.a)({await:function(){return[e.props.store.clinicalDataEnrichmentsWithQValues]},render:function(){return r.createElement("div",{className:"clearfix",style:{display:"flex"}},r.createElement("div",{style:{width:"600px"}},r.createElement(S,{dataStore:e.tableDataStore})),r.createElement("div",{style:{marginLeft:"10px"}},e.getUtilitiesMenu,e.plot))},renderPending:function(){return r.createElement(a.a,{isLoading:!0,centerRelativeToContainer:!0,size:"big"})},renderError:function(){return r.createElement(K.a,null)}}),e.tableDataStore=new ce(function(){return e.props.store.clinicalDataEnrichmentsWithQValues.result},function(){return e.highlightedRow},function(t){e.highlightedRow=t,e.swapAxes=!1,e.logScale=!1}),e.logScale=!1,e.swapAxes=!1,e.horizontalBars=!1,e.clinicalDataPromise=Object(O.T)({await:function(){return[e.props.store.patientKeyToSamples,e.props.store.activeGroups]},invoke:function(){return se(ee(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,o,i,a,s,l,u,c,p,d,f,h,m,y,g,b,v,_,S,E,O,C,T,P,x,A,j,I,N,M,D,R,L,G,V,B,F,H;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={data:[],datatype:"string"},!this.highlightedRow){e.next=117;break}return n=this.highlightedRow.clinicalAttribute,r=this.props.store.patientKeyToSamples.result,o=w.a.flatMap(this.props.store.activeGroups.result,function(e){return w.a.flatMap(e.studies,function(e){return e.samples.map(function(t){return{studyId:e.id,entityId:t}})})}),i=w.a.flatMap(this.props.store.activeGroups.result,function(e){return w.a.flatMap(e.studies,function(e){return e.patients.map(function(t){return{studyId:e.id,entityId:t}})})}),e.next=8,k.a.fetchClinicalDataUsingPOST({clinicalDataType:n.patientAttribute?"PATIENT":"SAMPLE",clinicalDataMultiStudyFilter:{attributeIds:[n.clinicalAttributeId],identifiers:n.patientAttribute?i:o}});case 8:for(a=e.sent,s={},l=!0,u=!1,c=void 0,e.prev=13,p=a[Symbol.iterator]();!(l=(d=p.next()).done);l=!0)f=d.value,h=f.value.toLowerCase(),void 0===s[h]&&(s[h]=f.value);e.next=21;break;case 17:e.prev=17,e.t0=e.catch(13),u=!0,c=e.t0;case 21:e.prev=21,e.prev=22,l||null==p.return||p.return();case 24:if(e.prev=24,!u){e.next=27;break}throw c;case 27:return e.finish(24);case 28:return e.finish(21);case 29:if(t.datatype=n.datatype.toLowerCase(),m=t.data,!n.patientAttribute){e.next=78;break}y=!0,g=!1,b=void 0,e.prev=35,v=a[Symbol.iterator]();case 37:if(y=(_=v.next()).done){e.next=62;break}for(S=_.value,E=r[S.uniquePatientKey],O=!0,C=!1,T=void 0,e.prev=43,P=E[Symbol.iterator]();!(O=(x=P.next()).done);O=!0)A=x.value,m.push({uniqueSampleKey:A.uniqueSampleKey,value:s[S.value.toLowerCase()]});e.next=51;break;case 47:e.prev=47,e.t1=e.catch(43),C=!0,T=e.t1;case 51:e.prev=51,e.prev=52,O||null==P.return||P.return();case 54:if(e.prev=54,!C){e.next=57;break}throw T;case 57:return e.finish(54);case 58:return e.finish(51);case 59:y=!0,e.next=37;break;case 62:e.next=68;break;case 64:e.prev=64,e.t2=e.catch(35),g=!0,b=e.t2;case 68:e.prev=68,e.prev=69,y||null==v.return||v.return();case 71:if(e.prev=71,!g){e.next=74;break}throw b;case 74:return e.finish(71);case 75:return e.finish(68);case 76:e.next=97;break;case 78:for(j=!0,I=!1,N=void 0,e.prev=81,M=a[Symbol.iterator]();!(j=(D=M.next()).done);j=!0)R=D.value,m.push({uniqueSampleKey:R.uniqueSampleKey,value:s[R.value.toLowerCase()]});e.next=89;break;case 85:e.prev=85,e.t3=e.catch(81),I=!0,N=e.t3;case 89:e.prev=89,e.prev=90,j||null==M.return||M.return();case 92:if(e.prev=92,!I){e.next=95;break}throw N;case 95:return e.finish(92);case 96:return e.finish(89);case 97:if("number"!==n.datatype.toLowerCase()){e.next=117;break}for(L=!0,G=!1,V=void 0,e.prev=101,B=m[Symbol.iterator]();!(L=(F=B.next()).done);L=!0)(H=F.value).value=parseFloat(H.value);e.next=109;break;case 105:e.prev=105,e.t4=e.catch(101),G=!0,V=e.t4;case 109:e.prev=109,e.prev=110,L||null==B.return||B.return();case 112:if(e.prev=112,!G){e.next=115;break}throw V;case 115:return e.finish(112);case 116:return e.finish(109);case 117:return e.abrupt("return",Promise.resolve(t));case 118:case"end":return e.stop()}},e,this,[[13,17,21,29],[22,,24,28],[35,64,68,76],[43,47,51,59],[52,,54,58],[69,,71,75],[81,85,89,97],[90,,92,96],[101,105,109,117],[110,,112,116]])}))}}),e.groupMembershipAxisData=Object(O.T)({await:function(){return[e.props.store.sampleMap,e.props.store.activeGroups]},invoke:function(){return se(ee(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.a.map(this.props.store.activeGroups.result,function(e){return e.nameWithOrdinal}),n={data:[],datatype:"string",categoryOrder:t},r=this.props.store.sampleMap.result||new Y.a,o=w.a.reduce(this.props.store.activeGroups.result,function(e,t){return t.studies.forEach(function(n){n.samples.forEach(function(o){if(r.has({studyId:n.id,sampleId:o})){var i=r.get({studyId:n.id,sampleId:o}).uniqueSampleKey;void 0===e[i]&&(e[i]={uniqueSampleKey:i,value:[]}),e[i].value.push(t.nameWithOrdinal)}})}),e},{}),n.data=w.a.values(o),e.abrupt("return",Promise.resolve(n));case 6:case"end":return e.stop()}},e,this)}))}}),e.boxPlotData=Object(O.T)({await:function(){return[e.horzAxisDataPromise,e.vertAxisDataPromise,e.props.store.sampleKeyToSample]},invoke:function(){var t=e.horzAxisDataPromise.result,n=e.vertAxisDataPromise.result;if(t&&n){var r,o,i;if(Object(T.y)(t)&&Object(T.z)(n))r=n,o=t,i=!0;else{if(!Object(T.z)(t)||!Object(T.y)(n))return Promise.resolve({horizontal:!1,data:[]});r=t,o=n,i=!1}return Promise.resolve({horizontal:i,data:Object(T.F)(r,o,e.props.store.sampleKeyToSample.result,{},void 0,void 0)})}return new Promise(function(){return 0})}}),e.plotType=ie.PercentageStackedBar,e}return ne(t,r["Component"]),Z(t,[{key:"getScrollPane",value:function(){return this.scrollPane}},{key:"onClickLogScale",value:function(){if(this.logScale=!this.logScale,this.logScale){this.logScaleFunction={label:"log2",fLogScale:function(e,t){return Math.log2(Math.max(e,.01))},fInvLogScale:function(e){return Math.pow(2,e)}}}else this.logScaleFunction=void 0}},{key:"onClickSwapAxes",value:function(){this.swapAxes=!this.swapAxes}},{key:"onClickhorizontalBars",value:function(){this.horizontalBars=!this.horizontalBars}},{key:"getSvg",value:function(){return document.getElementById(le)}},{key:"assignScrollPaneRef",value:function(e){this.scrollPane=e}},{key:"onPlotTypeSelect",value:function(e){this.plotType=e.value}},{key:"toolbar",value:function(){return r.createElement("div",{style:{textAlign:"center",position:"relative"}},r.createElement(O.e,{getSvg:this.getSvg,filename:le,dontFade:!0,type:"button",style:{position:"absolute",right:0,top:0}}))}},{key:"componentWillUnmount",value:function(){this.tableDataStore.destroy()}},{key:"render",value:function(){return this.tabUI.component}},{key:"showLogScaleControls",get:function(){return"number"===this.highlightedRow.clinicalAttribute.datatype.toLowerCase()}},{key:"vertAxisDataPromise",get:function(){return this.swapAxes?this.groupMembershipAxisData:this.clinicalDataPromise}},{key:"horzAxisDataPromise",get:function(){return this.swapAxes?this.clinicalDataPromise:this.groupMembershipAxisData}},{key:"horzLabel",get:function(){return this.swapAxes?"".concat(this.highlightedRow.clinicalAttribute.displayName).concat(this.logScale?" (log2)":""):"Group"}},{key:"vertLabel",get:function(){return this.swapAxes?"Group":"".concat(this.highlightedRow.clinicalAttribute.displayName).concat(this.logScale?" (log2)":"")}},{key:"scatterPlotTooltip",get:function(){var e=this;return function(t){var n=r.createElement("span",null);return e.boxPlotData.isComplete&&(n=Object(T.k)(t,e.props.store.activeStudyIdToStudy.result,e.boxPlotData.result.horizontal)),n}}},{key:"boxPlotTooltip",get:function(){var e=this;return function(t){return r.createElement("table",{className:"table table-striped"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{colSpan:2},e.boxPlotData.result.data[t.eventKey].label))),r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",null,"Maximum"),r.createElement("td",null,t.max)),r.createElement("tr",null,r.createElement("td",null,"75% (q3)"),r.createElement("td",null,t.q3)),r.createElement("tr",null,r.createElement("td",null,"Median"),r.createElement("td",null,t.median)),r.createElement("tr",null,r.createElement("td",null,"25% (q1)"),r.createElement("td",null,t.q1)),r.createElement("tr",null,r.createElement("td",null,"Minimum"),r.createElement("td",null,t.min))))}}},{key:"categoryToColor",get:function(){return w.a.reduce(this.props.store.uidToGroup.result,function(e,t){return e[t.nameWithOrdinal]=t.color,e},Q.E)}},{key:"getUtilitiesMenu",get:function(){return this.highlightedRow?r.createElement("div",{style:{marginBottom:"10px"}},!this.showLogScaleControls&&r.createElement("div",{className:"form-group",style:{display:"flex",alignItems:"center"}},r.createElement("label",null,"Plot Type"),r.createElement("div",{style:{width:240,marginLeft:5},"data-test":"plotTypeSelector"},r.createElement(W.default,{name:"discrete-vs-discrete-plot-type",value:this.plotType,onChange:this.onPlotTypeSelect,options:pe,clearable:!1,searchable:!0}))),r.createElement("div",null,r.createElement("label",{className:"checkbox-inline"},r.createElement("input",{type:"checkbox",checked:this.swapAxes,onClick:this.onClickSwapAxes,"data-test":"SwapAxes"}),"Swap Axes"),!this.showLogScaleControls&&r.createElement("label",{className:"checkbox-inline"},r.createElement("input",{type:"checkbox",name:"horizontalBars",checked:this.horizontalBars,onClick:this.onClickhorizontalBars,"data-test":"HorizontalBars"}),"Horizontal Bars"),this.showLogScaleControls&&r.createElement("label",{className:"checkbox-inline"},r.createElement("input",{type:"checkbox",checked:this.logScale,onClick:this.onClickLogScale,"data-test":"logScale"}),"Log Scale"))):r.createElement("span",null)}},{key:"plot",get:function(){if(0===this.tableDataStore.allData.length||!this.highlightedRow)return r.createElement("span",null);var e=[this.horzAxisDataPromise,this.vertAxisDataPromise],t=C.H.apply(void 0,e),n=this.plotType===ie.PercentageStackedBar,i=n||this.plotType===ie.StackedBar;switch(t){case"pending":return r.createElement(a.a,{center:!0,isLoading:!0,size:"big"});case"error":return r.createElement("span",null,"Error loading plot data.");default:if(!this.horzAxisDataPromise.result||!this.vertAxisDataPromise.result)return r.createElement("span",null,"Error loading plot data.");var s=null;if("number"===this.highlightedRow.clinicalAttribute.datatype.toLowerCase()){if(!this.boxPlotData.isComplete)return this.boxPlotData.isError?r.createElement("span",null,"Error loading plot data."):r.createElement(a.a,{center:!0,isLoading:!0,size:"big"});s=r.createElement(ue,{svgId:le,domainPadding:75,boxWidth:this.boxPlotData.result.data.length>7?30:60,axisLabelX:this.horzLabel,axisLabelY:this.vertLabel,data:this.boxPlotData.result.data,chartBase:500,scatterPlotTooltip:this.scatterPlotTooltip,boxPlotTooltip:this.boxPlotTooltip,horizontal:this.boxPlotData.result.horizontal,logScale:this.logScaleFunction,size:F.j,fill:T.i.fill,stroke:T.i.stroke,strokeOpacity:T.i.strokeOpacity,symbol:"circle",useLogSpaceTicks:!0,legendLocationWidthThreshold:550})}else s=r.createElement(U.a,{svgId:le,horzData:this.horzAxisDataPromise.result.data,vertData:this.vertAxisDataPromise.result.data,horzCategoryOrder:this.horzAxisDataPromise.result.categoryOrder,vertCategoryOrder:this.vertAxisDataPromise.result.categoryOrder,categoryToColor:this.categoryToColor,barWidth:20,domainPadding:20,chartBase:500,axisLabelX:this.horzLabel,axisLabelY:this.vertLabel,legendLocationWidthThreshold:450,ticksCount:6,horizontalBars:this.horizontalBars,percentage:n,stacked:i});return r.createElement("div",{"data-test":"ClinicalTabPlotDiv",className:"borderedChart posRelative",style:{marginBottom:10}},r.createElement(V,{style:{position:"relative",top:-5},getScrollEl:this.getScrollPane}),r.createElement(o.Observer,null,this.toolbar),r.createElement("div",{ref:this.assignScrollPaneRef,style:{position:"relative",display:"inline-block"}},s))}}}]),t}();ae([s.observable.ref],de.prototype,"highlightedRow",void 0),ae([i.default],de.prototype,"getScrollPane",null),ae([s.computed],de.prototype,"showLogScaleControls",null),ae([s.observable],de.prototype,"logScale",void 0),ae([s.observable],de.prototype,"logScaleFunction",void 0),ae([s.observable],de.prototype,"swapAxes",void 0),ae([s.observable],de.prototype,"horizontalBars",void 0),ae([i.default,s.action],de.prototype,"onClickLogScale",null),ae([i.default,s.action],de.prototype,"onClickSwapAxes",null),ae([i.default,s.action],de.prototype,"onClickhorizontalBars",null),ae([s.computed],de.prototype,"vertAxisDataPromise",null),ae([s.computed],de.prototype,"horzAxisDataPromise",null),ae([s.computed],de.prototype,"horzLabel",null),ae([s.computed],de.prototype,"vertLabel",null),ae([i.default],de.prototype,"getSvg",null),ae([i.default],de.prototype,"assignScrollPaneRef",null),ae([s.computed],de.prototype,"scatterPlotTooltip",null),ae([s.computed],de.prototype,"boxPlotTooltip",null),ae([s.computed],de.prototype,"categoryToColor",null),ae([s.observable],de.prototype,"plotType",void 0),ae([i.default,s.action],de.prototype,"onPlotTypeSelect",null),ae([s.computed],de.prototype,"getUtilitiesMenu",null),ae([s.computed],de.prototype,"plot",null),ae([i.default],de.prototype,"toolbar",null),de=ae([o.observer],de);t.a=de},function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(6),a=n(110),s=n(66),l=n(289),u=n(47),c=n(2),p=n(56),d=n.n(p),f=n(111),h=n(1),m=n(3),y=n(166),g=n(151);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var E=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=v(this,_(t).call(this,e))).setHighlighted=r,o.dataHighlighter=function(e){var t=n();return!(!t||e.stableId!==t.stableId)},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,g["a"]),t}(),w=n(914),O=n(840);function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var A=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":x(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},j=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=k(this,T(t).apply(this,arguments))).significanceFilter=!1,e._enrichedGroups=e.props.groups.map(function(e){return e.name}),e.dataStore=new E(function(){return e.filteredData},function(){return e.highlightedRow},function(t){e.highlightedRow=t}),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,r["Component"]),n=t,(o=[{key:"filterByStableId",value:function(e){return!this.selectedStableIds||this.selectedStableIds.includes(e)}},{key:"toggleSignificanceFilter",value:function(){this.significanceFilter=!this.significanceFilter}},{key:"onEntityClick",value:function(e){this.clickedEntityStableId=e}},{key:"onSelection",value:function(e){this.selectedStableIds=e}},{key:"onSelectionCleared",value:function(){this.selectedStableIds=null}},{key:"onChange",value:function(e){this._enrichedGroups=h.map(e,function(e){return e.value})}},{key:"render",value:function(){if(0===this.props.data.length)return r.createElement("div",{className:"alert alert-info"},"No data/result available");var e=Object(f.t)(this.data),t=h.maxBy(e,function(e){return Math.ceil(Math.abs(e.x))});return r.createElement("div",{className:d.a.Container},r.createElement("div",{className:d.a.ChartsPanel},this.isTwoGroupAnalysis&&r.createElement(O.a,{data:e,selectedSet:this.selectedEntitiesSet,xAxisLeftLabel:this.group2.nameOfEnrichmentDirection||this.group2.name,xAxisRightLabel:this.group1.nameOfEnrichmentDirection||this.group1.name,xAxisDomain:Math.ceil(Math.abs(t.x)),xAxisTickValues:null,onGenericAssayEntityClick:this.onEntityClick,onSelection:this.onSelection,onSelectionCleared:this.onSelectionCleared}),r.createElement(w.a,{selectedProfile:this.props.selectedProfile,groups:this.props.groups,sampleKeyToSample:this.props.sampleKeyToSample,selectedRow:this.selectedRow,genericAssayType:this.props.genericAssayType})),r.createElement("div",{className:d.a.TableContainer},r.createElement("hr",{style:{marginTop:0,marginBottom:5,borderWidth:2}}),r.createElement("div",{className:d.a.Checkboxes},r.createElement("div",{style:{width:250,marginRight:7}},r.createElement(m.b,{name:"groupsSelector",placeholder:"High in ...",onChange:this.onChange,options:this.options,value:this.selectedValues})),r.createElement("div",{className:d.a.FlexCheckbox},r.createElement("label",null,r.createElement("input",{type:"checkbox",checked:this.significanceFilter,onClick:this.toggleSignificanceFilter}),"Significant only"))),r.createElement(y.b,{data:this.filteredData,onEntityClick:this.onEntityClick,dataStore:this.dataStore,mutexTendency:this.props.alteredVsUnalteredMode,visibleOrderedColumnNames:this.visibleOrderedColumnNames,customColumns:h.keyBy(this.customColumns,function(e){return e.uniqueName||e.name})})))}},{key:"data",get:function(){return Object(f.s)(this.props.data,this.props.groups)}},{key:"filteredData",get:function(){return Object(f.p)(this.data,this._enrichedGroups,this.significanceFilter,this.filterByStableId,!0)}},{key:"group1",get:function(){return this.props.groups[0]}},{key:"group2",get:function(){return this.props.groups[1]}},{key:"selectedEntitiesSet",get:function(){return h.keyBy(this.selectedStableIds||[])}},{key:"isTwoGroupAnalysis",get:function(){return 2==this.props.groups.length}},{key:"customColumns",get:function(){return Object(f.r)(this.props.groups,this.props.alteredVsUnalteredMode)}},{key:"visibleOrderedColumnNames",get:function(){var e=[];return e.push(y.a.ENTITY_ID),this.props.groups.forEach(function(t){e.push(t.name+" mean")}),this.props.groups.forEach(function(t){e.push(t.name+" standard deviation")}),this.isTwoGroupAnalysis&&e.push(y.a.LOG_RATIO),e.push(y.a.P_VALUE,y.a.Q_VALUE),this.isTwoGroupAnalysis&&this.props.alteredVsUnalteredMode?e.push(y.a.TENDENCY):e.push(y.a.EXPRESSED),e}},{key:"selectedValues",get:function(){return this._enrichedGroups.map(function(e){return{value:e}})}},{key:"options",get:function(){return h.map(this.props.groups,function(e){return{label:e.nameOfEnrichmentDirection?e.nameOfEnrichmentDirection:e.name,value:e.name}})}},{key:"selectedRow",get:function(){var e=this;if(this.clickedEntityStableId)return this.props.data.filter(function(t){return t.stableId===e.clickedEntityStableId})[0]}}])&&C(n.prototype,o),i&&C(n,i),t}();j.defaultProps={alteredVsUnalteredMode:!0},A([c.observable],j.prototype,"significanceFilter",void 0),A([c.observable],j.prototype,"clickedEntityStableId",void 0),A([c.observable.ref],j.prototype,"selectedStableIds",void 0),A([c.observable.ref],j.prototype,"highlightedRow",void 0),A([c.observable.ref],j.prototype,"_enrichedGroups",void 0),A([c.computed],j.prototype,"data",null),A([c.computed],j.prototype,"filteredData",null),A([i.default],j.prototype,"filterByStableId",null),A([i.default],j.prototype,"toggleSignificanceFilter",null),A([i.default],j.prototype,"onEntityClick",null),A([i.default],j.prototype,"onSelection",null),A([i.default],j.prototype,"onSelectionCleared",null),A([c.computed],j.prototype,"group1",null),A([c.computed],j.prototype,"group2",null),A([c.computed],j.prototype,"selectedEntitiesSet",null),A([c.computed],j.prototype,"isTwoGroupAnalysis",null),A([c.computed],j.prototype,"customColumns",null),A([c.computed],j.prototype,"visibleOrderedColumnNames",null),A([i.default,c.action],j.prototype,"onChange",null),A([c.computed],j.prototype,"selectedValues",null),A([c.computed],j.prototype,"options",null),A([c.computed],j.prototype,"selectedRow",null);var I=j=A([o.observer],j),N=n(800);function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var V=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":G(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},B=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=D(this,R(t).apply(this,arguments))).tabUI=Object(u.d)(function(){return e.props.store},function(){return e.enrichmentsUI},e.props.genericAssayType,!0,!0,!1),e.enrichmentsUI=Object(a.a)({await:function(){var t=[e.props.store.gaEnrichmentDataByAssayType,e.props.store.selectedGenericAssayEnrichmentProfileMapGroupByGenericAssayType,e.props.store.gaEnrichmentGroupsByAssayType,e.props.store.studies];return e.props.store.gaEnrichmentDataByAssayType.isComplete&&e.props.store.gaEnrichmentDataByAssayType.result[e.props.genericAssayType]&&t.push(e.props.store.gaEnrichmentDataByAssayType.result[e.props.genericAssayType]),t},render:function(){var t=Object.keys(e.props.store.selectedGenericAssayEnrichmentProfileMapGroupByGenericAssayType.result[e.props.genericAssayType])[0],n=e.props.store.selectedGenericAssayEnrichmentProfileMapGroupByGenericAssayType.result[e.props.genericAssayType][t];return r.createElement("div",{"data-test":"GroupComparisonGenericAssayEnrichments"},r.createElement(N.a,{dataSets:e.props.store.genericAssayEnrichmentProfilesGroupByGenericAssayType.result[e.props.genericAssayType],onChange:e.onChangeProfile,selectedProfileByStudyId:e.props.store.selectedGenericAssayEnrichmentProfileMapGroupByGenericAssayType.result[e.props.genericAssayType],alwaysShow:!0,studies:e.props.store.studies.result}),r.createElement(I,{data:e.props.store.gaEnrichmentDataByAssayType.result[e.props.genericAssayType].result,groups:e.props.store.gaEnrichmentGroupsByAssayType.result[e.props.genericAssayType],selectedProfile:n,alteredVsUnalteredMode:!1,sampleKeyToSample:e.props.store.sampleKeyToSample.result,genericAssayType:e.props.genericAssayType}))},renderPending:function(){return r.createElement(s.a,{center:!0,isLoading:!0,size:"big"})},renderError:function(){return r.createElement(l.a,null)}}),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(t,r["Component"]),n=t,(o=[{key:"onChangeProfile",value:function(e){this.props.store.setGenericAssayEnrichmentProfileMap(e,this.props.genericAssayType)}},{key:"render",value:function(){return this.tabUI.component}}])&&M(n.prototype,o),i&&M(n,i),t}();V([i.default],B.prototype,"onChangeProfile",null),B=V([o.observer],B);t.a=B},function(e,t,n){"use strict";var r=n(0),o=n(1),i=n(2),a=n(9),s=n(792),l=n(1165),u=n(66),c=(n(1166),n(11)),p=n(117);function d(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function f(e,t,n,r,i){return o.mapValues(e,function(e,a){var s={mutated:0,amp:0,homdel:0,hetloss:0,gain:0,fusion:0,mrnaExpressionHigh:0,mrnaExpressionLow:0,protExpressionHigh:0,protExpressionLow:0,multiple:0},l={mutation:0,cna:0,expression:0,protein:0},u={mutation:0,cna:0,expression:0,protein:0},d={profiledSampleTotal:0,alterationTotal:0,alterationTypeCounts:s,alteredSampleCount:0,parentCancerType:e[0].cancerType,profiledSamplesCounts:l,notProfiledSamplesCounts:u};return o.forEach(e,function(e){var a=!1;if(o.forEach(n,function(t,n){var s=o.some(Object(p.b)(e.uniqueSampleKey,o.map(t,function(e){return e.molecularProfileId}),r,i));switch(a=a||s,n){case c.a.COPY_NUMBER_ALTERATION:s?l.cna++:u.cna++;break;case c.a.MRNA_EXPRESSION:s?l.expression++:u.expression++;break;case c.a.PROTEIN_LEVEL:s?l.protein++:u.protein++;break;case c.a.MUTATION_EXTENDED:s?l.mutation++:u.mutation++}}),a&&(d.profiledSampleTotal+=1),e.uniqueSampleKey in t){var f=t[e.uniqueSampleKey],h=o.uniqBy(f,function(e){return e.alterationType});d.alterationTotal+=h.length,h.length>0&&(d.alteredSampleCount+=1),h.length>1?s.multiple++:o.forEach(h,function(e){switch(e.alterationType){case c.a.COPY_NUMBER_ALTERATION:s[e.alterationSubType]++;break;case c.a.MRNA_EXPRESSION:"high"===e.alterationSubType&&s.mrnaExpressionHigh++,"low"===e.alterationSubType&&s.mrnaExpressionLow++;break;case c.a.PROTEIN_LEVEL:"high"===e.alterationSubType&&s.protExpressionHigh++,"low"===e.alterationSubType&&s.protExpressionLow++;break;case c.a.MUTATION_EXTENDED:s.mutated++;break;case c.a.FUSION:s.fusion++}})}}),d})}var h=n(294),m=n(12),y=n(295),g=n(234),b=n(18),v=n(6),_=n(292);function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",function(){return x});var P=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":T(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},x="all",A=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=O(t).call(this,e))||"object"!==T(o)&&"function"!=typeof o?C(r):o).activeTab=x,n.resultsViewPageWidth=1150,n.handleTabClick=n.handleTabClick.bind(C(n)),n.pivotData=n.pivotData.bind(C(n)),n.mapStudyIdToShortName=n.mapStudyIdToShortName.bind(C(n)),n}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,r["Component"]),n=t,(i=[{key:"handleTabClick",value:function(e){this.activeTab=e}},{key:"pivotData",value:function(e){this.groupAlterationsBy_userSelection=e}},{key:"mapStudyIdToShortName",value:function(e){return e in this.props.store.physicalStudySet?this.props.store.physicalStudySet[e].shortName:e}},{key:"handleStudyLinkout",value:function(e,t){var n,r=Object.assign({},this.props.store.urlWrapper.query,(E(n={},g.a.cancer_study_list,e),E(n,g.a.gene_list,t||this.props.store.urlWrapper.query.gene_list),n));window.open(Object(b.b)("/results")).clientPostedData=r}},{key:"render",value:function(){var e=this;switch(Object(m.H)(this.props.store.filteredSamplesExtendedWithClinicalData,this.props.store.oqlFilteredAlterationsByGeneBySampleKey,this.props.store.studies,this.props.store.filteredSequencedSampleKeysByGene,this.props.store.selectedMolecularProfileIdsByAlterationType,this.props.store.coverageInformation)){case"pending":return r.createElement(u.a,{isLoading:!0,center:!0,size:"big"});case"error":return null;case"complete":return r.createElement("div",{ref:function(t){return e.resultsViewPageContent=t},"data-test":"cancerTypeSummaryWrapper"},r.createElement("div",{className:"tabMessageContainer"},r.createElement(h.a,{className:"cancer-types-summary-oql-status-banner",store:this.props.store,tabReflectsOql:!0}),r.createElement(y.a,{store:this.props.store}),r.createElement(_.a,{store:this.props.store})),r.createElement(s.b,{onTabClick:this.handleTabClick,unmountOnHide:!0,arrowStyle:{"line-height":.8},tabButtonStyle:"pills",activeTabId:this.activeTab,className:"pillTabs"},this.tabs))}}},{key:"defaultTabId",get:function(){return x}},{key:"groupAlterationsBy",get:function(){return void 0===this.groupAlterationsBy_userSelection?this.props.store.studies.result.length>1?"studyId":1===o.chain(this.props.store.filteredSamplesExtendedWithClinicalData.result).map(function(e){return e.cancerType}).uniq().value().length?"cancerTypeDetailed":"cancerType":this.groupAlterationsBy_userSelection}},{key:"tabs",get:function(){var e,t,n,i,a,u=this,c="studyId"===this.groupAlterationsBy?this.mapStudyIdToShortName:void 0,p=(e=this.props.store.oqlFilteredAlterationsByGeneBySampleKey.result,t=this.props.store.filteredSamplesExtendedWithClinicalData.result,n=this.groupAlterationsBy,i=this.props.store.selectedMolecularProfileIdsByAlterationType.result,a=this.props.store.coverageInformation.result,o.mapValues(e,function(e,r){return f(o.groupBy(t,function(e){return e[n]}),e,i,a,r)})),h=o.map(this.props.store.genes.result,function(e){var t=p[e.hugoGeneSymbol],n=0===o.reduce(t,function(e,t){return e+t.alterationTotal},0)?{color:"#bbb"}:void 0;return r.createElement(s.a,S({key:e.hugoGeneSymbol,id:"summaryTab"+e.hugoGeneSymbol,linkText:e.hugoGeneSymbol},{anchorStyle:n}),r.createElement(l.a,{groupedAlterationData:p[e.hugoGeneSymbol],handleStudyLinkout:u.handleStudyLinkout,groupAlterationsBy:u.groupAlterationsBy,gene:e.hugoGeneSymbol,labelTransformer:c,handlePivotChange:u.pivotData,width:u.resultsViewPageWidth}))});if(h.length>1){var m=function(e,t,n,r,i){var a=o.groupBy(t,function(e){return e[n]}),s=o.flatMap(e,function(e){return e});return f(a,o.mergeWith.apply(o,[{}].concat(d(s),[function(e,t){if(o.isArray(e))return e.concat(t)}])),r,i)}(this.props.store.oqlFilteredAlterationsByGeneBySampleKey.result,this.props.store.filteredSamplesExtendedWithClinicalData.result,this.groupAlterationsBy,this.props.store.selectedMolecularProfileIdsByAlterationType.result,this.props.store.coverageInformation.result);h.unshift(r.createElement(s.a,{key:x,id:"allGenes",linkText:"All Queried Genes"},r.createElement(l.a,{gene:x,width:this.resultsViewPageWidth,groupedAlterationData:m,handlePivotChange:this.pivotData,labelTransformer:c,groupAlterationsBy:this.groupAlterationsBy,handleStudyLinkout:this.handleStudyLinkout})))}return h}}])&&w(n.prototype,i),a&&w(n,a),t}();P([i.observable],A.prototype,"activeTab",void 0),P([i.observable],A.prototype,"resultsViewPageWidth",void 0),P([i.observable],A.prototype,"groupAlterationsBy_userSelection",void 0),P([i.computed],A.prototype,"tabs",null),P([v.default],A.prototype,"handleStudyLinkout",null),A=P([a.observer],A);t.b=A},function(e,t,n){"use strict";var r=n(0),o=n(1017),i=n(5),a=n.n(i),s=n(794),l=n.n(s),u=n(172),c=n(9),p=n(2),d=n(1),f=n.n(d),h=n(18),m=n(788),y=n(3),g=n(805),b=n(1018),v=(n(1023),n(13)),_=n(66);function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t,n){return t&&E(e.prototype,t),n&&E(e,n),e}function O(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?k(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var A=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":x(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},j=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},I=function(e){function t(){var e;return S(this,t),(e=O(this,C(t).apply(this,arguments))).studyMetadata=Object(y.T)({invoke:function(){return j(k(e),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.a.getTagsUsingGET({studyId:this.props.studyId}));case 1:case"end":return e.stop()}},e,this)}))},onError:function(e){console.error("Error on getting study tags.",e)}}),e}return T(t,r["Component"]),w(t,[{key:"addHTMLDescription",value:function(e){return{__html:e}}},{key:"render",value:function(){var e="";if(this.props.isVirtualStudy)e=r.createElement("div",{dangerouslySetInnerHTML:this.addHTMLDescription(this.props.studyDescription)});else if(this.studyMetadata.isPending)e=r.createElement(_.a,{isLoading:!0});else if(this.studyMetadata.isComplete){var t=Object.keys(this.studyMetadata.result).length,n=r.createElement("div",{dangerouslySetInnerHTML:this.addHTMLDescription(this.props.studyDescription)});e=t>0?[n,r.createElement("br",null),r.createElement("div",{className:"studyTagsTooltip"}," ",r.createElement(b.JsonToTable,{json:this.studyMetadata.result}))]:n}else this.studyMetadata.isError&&(e="error");return e}}]),t}();A([p.observable],I.prototype,"studyMetadata",void 0),I=A([c.observer],I);var N=function(e){function t(){return S(this,t),O(this,C(t).apply(this,arguments))}return T(t,r["Component"]),w(t,[{key:"renderTooltip",value:function(){return r.createElement(y.d,{key:this.props.key,mouseEnterDelay:this.props.mouseEnterDelay,placement:this.props.placement,overlay:r.createElement(I,{studyDescription:this.props.studyDescription,studyId:this.props.studyId,isVirtualStudy:this.props.isVirtualStudy}),children:this.props.children})}},{key:"render",value:function(){return this.renderTooltip()}}]),t}(),M=N=A([c.observer],N),D=n(173);function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(e,t,n){return t&&V(e.prototype,t),n&&V(e,n),e}function F(e,t){return!t||"object"!==q(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var z=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":q(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Q=Object.assign(Object.assign({},o),{Level:function(e){return o["Level".concat(e)]}}),K=function(e){function t(){var e;return G(this,t),(e=F(this,H(t).apply(this,arguments))).renderCancerType=function(t){var n,o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=e.logic.getDepth(t),u=e.view.getChildCancerTypes(t),c=e.view.getChildCancerStudies(t),p=e.logic.cancerTypeListView.getDescendantCancerStudies(t).map(function(e){return e.studyId});if(t!=e.rootCancerType){var d=a()(Q.CancerType,Q.Level(s));3===s&&(o=r.createElement(l.a,{className:Q.indentArrow,name:"long-arrow-right"})),n=r.createElement("li",{className:d},r.createElement(Y,{view:e.view,node:t},o,r.createElement("span",null,t.name),!e.store.forDownloadTab&&r.createElement("span",{className:Q.SelectAll},f.a.intersection(p,e.store.selectableSelectedStudyIds).length?"Deselect All":"Select All")))}var h=a()(Q.StudyList,Q.Level(s));return r.createElement("ul",{key:i,className:h},n,c.map(e.renderCancerStudy),u.map(e.renderCancerType))},e.renderCancerStudy=function(t,n){var o=a()(Q.Study),i=t.studyId in e.store.getOverlappingStudiesMap,s=i?r.createElement(y.d,{mouseEnterDelay:0,placement:"top",overlay:r.createElement("div",null,"This study has overlapping data with another selected study.")},r.createElement("i",{className:"fa fa-exclamation-triangle"})):null,l=f.a.includes(e.store.selectableSelectedStudyIds,t.studyId)&&e.store.isMixedReferenceGenome,u=l?r.createElement(y.d,{mouseEnterDelay:0,placement:"top",overlay:r.createElement("div",null,"You are combining studies with molecular data based on both GRCh37/hg19 and GRCh38/hg38. This is not fully supported yet. Please double check your findings")},r.createElement("span",null,r.createElement("i",{className:"fa fa-exclamation-triangle"})," ",Object(D.b)(t.referenceGenome))):null;return r.createElement("li",{key:n,className:o,"data-test":e.store.isVirtualStudy(t.studyId)?"VirtualStudySelect":"StudySelect"},r.createElement(c.Observer,null,function(){var n,o=a()((L(n={},Q.StudyName,!0),L(n,"overlappingStudy",i||l),L(n,Q.DeletedStudy,e.store.isDeletedVirtualStudy(t.studyId)),L(n,"studyItem_".concat(t.studyId),!0),n));return r.createElement(Y,{view:e.view,node:t},r.createElement("span",{className:o},t.name,s,u))}),r.createElement(c.Observer,null,function(){return r.createElement("div",{className:Q.StudyMeta},!e.store.isDeletedVirtualStudy(t.studyId)&&e.renderSamples(t),e.renderStudyLinks(t))}))},e.renderSamples=function(e){return r.createElement("span",{className:Q.StudySamples},"".concat(e.allSampleCount," samples"))},e.renderStudyLinks=function(t){if(e.store.isDeletedVirtualStudy(t.studyId))return r.createElement(y.d,{mouseEnterDelay:0,placement:"top",overlay:r.createElement("div",{className:Q.tooltip},"Restore study"),children:r.createElement("button",{className:"btn btn-default btn-xs",onClick:function(){return e.store.restoreVirtualStudy(t.studyId)},style:{lineHeight:"80%"},"data-test":"virtualStudyRestore"},"Restore")});var n=[{icon:"info-circle",tooltip:""}];return e.store.isVirtualStudy(t.studyId)?n.push({icon:"trash",tooltip:"Delete this virtual study.",onClick:function(){return e.store.deleteVirtualStudy(t.studyId)}}):n.push({icon:"book",onClick:t.pmid&&Object(h.x)(t.pmid),tooltip:t.pmid&&"PubMed"}),r.createElement("span",{className:Q.StudyLinks},n.map(function(n,o){var i,s=r.createElement(l.a,{key:o,name:n.icon,className:a()((i={},L(i,Q.icon,!0),L(i,Q.iconWithTooltip,!!n.tooltip),L(i,Q.trashIcon,"trash"===n.icon),L(i,Q.infoCircleIcon,"info-circle"===n.icon),i))});if(n.onClick){var u={key:o};"string"==typeof n.onClick?(u.href=n.onClick,u.target="_blank"):u.onClick=n.onClick,s=r.createElement("a",u,s)}if(n.tooltip){var c=r.createElement("div",{className:Q.tooltip,dangerouslySetInnerHTML:{__html:n.tooltip}});s=r.createElement(y.d,{key:o,mouseEnterDelay:0,placement:"top",overlay:c,children:s})}return"info-circle"===n.icon&&(s=r.createElement(M,{key:o,studyDescription:e.store.isVirtualStudy(t.studyId)?t.description.replace(/\r?\n/g,"<br />"):t.description,studyId:t.studyId,isVirtualStudy:e.store.isVirtualStudy(t.studyId),mouseEnterDelay:0,placement:"top"},r.createElement("a",null,s))),s}),t.studyId&&r.createElement(y.d,{mouseEnterDelay:0,placement:"top",overlay:r.createElement("div",{className:Q.tooltip},"View clinical and genomic data of this study")},r.createElement("span",null,r.createElement(g.a,{studyId:t.studyId,className:a()(Q.summaryIcon,"ci ci-pie-chart")}))))},e}return U(t,m["d"]),B(t,[{key:"componentDidMount",value:function(){this.props.showSelectedStudiesOnly&&(this._view=this.view)}},{key:"render",value:function(){var e=this,t=this.renderCancerType(this.rootCancerType);return this.props.showSelectedStudiesOnly?r.createElement("div",{className:Q.SelectedStudyList},r.createElement("span",{className:Q.deselectAll,onClick:function(){e.view.onCheck(e.store.treeData.rootCancerType,!1),e.store.showSelectedStudiesOnly=!1}},"Deselect all"),t):t}},{key:"view",get:function(){return this._view||(this.props.showSelectedStudiesOnly?this.logic.selectedStudiesView:this.logic.mainView)}},{key:"logic",get:function(){return this.store.studyListLogic}},{key:"rootCancerType",get:function(){return this.store.treeData.rootCancerType}}]),t}();K=z([c.observer],K);t.a=K;var Y=function(e){function t(){return G(this,t),F(this,H(t).apply(this,arguments))}return U(t,m["d"]),B(t,[{key:"render",value:function(){var e=this;return r.createElement(u.a,R({},this.checkboxProps,{onChange:function(t){e.props.view.onCheck(e.props.node,t.target.checked)}}),this.props.children)}},{key:"checkboxProps",get:function(){return this.props.view.getCheckboxProps(this.props.node)}}]),t}();z([p.computed.struct],Y.prototype,"checkboxProps",null),Y=z([c.observer],Y)},,,,,,,,function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__1Fjw6",framedImage:"styles-module__framedImage__3hqyk","tables-container":"styles-module__tables-container__1wDsF",downloadCopyTable:"styles-module__downloadCopyTable__1jMBv",noAlterationSpan:"styles-module__noAlterationSpan__1jy3D",notProfiledSpan:"styles-module__notProfiledSpan__2eZFJ",alterationSpan:"styles-module__alterationSpan__1oylB",tooltip:"styles-module__tooltip__2f1I5",infoIcon:"styles-module__infoIcon__2ZQ2T"}},function(e,t,n){},function(e,t,n){},,,,,,function(e,t,n){"use strict";(function(e){var r=n(0),o=n(9),i=n(5),a=n.n(i),s=(n(1195),n(3)),l=n(66),u=n(2),c=n(918),p=n(6),d=n(1196),f=n(8),h=n(805),m=n(937),y=n(110),g=n(97),b=n(18),v=n(1422),_=n(905),S=n(1),E=n.n(S),w=n(173);function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var x=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":P(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},A=function(t){function n(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(e=C(this,k(n).apply(this,arguments))).singleStudyUI=Object(y.a)({await:function(){return[e.props.store.queriedStudies,e.props.store.sampleLists,e.props.store.filteredSamples,e.props.store.filteredPatients]},render:function(){var t=e.props.store.sampleLists.result.length>0?r.createElement("span",null,e.props.store.sampleLists.result[0].name):r.createElement("span",null,"User-defined Patient List");return r.createElement("div",null,r.createElement("h3",null,r.createElement("a",{href:Object(b.b)("study",{id:e.props.store.queriedStudies.result.map(function(e){return e.studyId}).join(",")}),target:"_blank"},e.props.store.queriedStudies.result[0].name)),t," (",e.studyPageFilteredCasesLink,")  - ",Object(m.b)(e.props.store.hugoGeneSymbols)," ",r.createElement(s.d,{overlay:"Edit genes or OQL"},r.createElement("a",{"data-test":"oqlQuickEditButton",onClick:e.props.onToggleOQLEditUIVisibility},r.createElement("i",{className:"fa fa-pencil"}))))}}),e.multipleStudyUI=Object(y.a)({await:function(){return[e.props.store.filteredSamples,e.props.store.filteredPatients,e.props.store.queriedStudies,e.props.store.sampleLists]},render:function(){return r.createElement("div",null,r.createElement("h3",null,r.createElement("a",{href:Object(b.b)("study",{id:e.props.store.queriedStudies.result.map(function(e){return e.studyId}).join(",")}),target:"_blank"},"Combined Study (",E.a.sumBy(e.props.store.queriedStudies.result,function(e){return e.allSampleCount})," ","samples)"),e.props.store.isMixedReferenceGenome&&Object(w.d)()),r.createElement("span",null,"Querying ",e.studyPageFilteredCasesLink," in"," ",e.props.store.queriedStudies.result.length," studies  - ",Object(m.b)(e.props.store.hugoGeneSymbols)," ",r.createElement(s.d,{placement:"bottom",overlay:e.studyList,destroyTooltipOnHide:!0},r.createElement("i",{className:"fa fa-info-circle"}))))}}),e.cohortAndGeneSummary=Object(y.a)({await:function(){return[e.singleStudyUI,e.multipleStudyUI,e.props.store.queriedStudies]},render:function(){return 1===e.props.store.queriedStudies.result.length?e.singleStudyUI.component:e.multipleStudyUI.component}}),e.alterationSummary=Object(y.a)({await:function(){return[e.props.store.filteredSamples,e.props.store.filteredPatients,e.props.store.filteredAlteredSampleKeys,e.props.store.filteredAlteredPatientKeys]},render:function(){return Object(m.a)(e.props.store.filteredSamples.result.length,e.props.store.filteredPatients.result.length,e.props.store.filteredAlteredSampleKeys.result.length,e.props.store.filteredAlteredPatientKeys.result.length,e.props.store.hugoGeneSymbols.length)}}),e}var o,i,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(n,r["Component"]),o=n,(i=[{key:"toggleQueryFormVisibility",value:function(){this.props.onToggleQueryFormVisibility(this.props.store.queryFormVisible),this.props.store.modifyQueryParams&&!0===this.props.store.queryFormVisible&&(this.props.store.modifyQueryParams=void 0),this.props.store.queryFormVisible=!this.props.store.queryFormVisible}},{key:"closeQueryForm",value:function(){!0===this.props.store.queryFormVisible&&(this.toggleQueryFormVisibility(),e(document).scrollTop(0))}},{key:"onSubmit",value:function(){this.closeQueryForm(),Object(g.b)()("send","event","resultsView","query modified")}},{key:"render",value:function(){var e=this;if(this.cohortAndGeneSummary.isError||this.alterationSummary.isError)return this.isQueryOrGeneInvalid?this.queryForm:null;var t=this.cohortAndGeneSummary.isComplete&&this.alterationSummary.isComplete;return r.createElement("div",null,r.createElement("div",{className:"query-summary"},r.createElement("div",{className:"query-summary__leftItems"},!this.isQueryOrGeneInvalid&&r.createElement("div",null,r.createElement("button",{id:"modifyQueryBtn",onClick:this.toggleQueryFormVisibility,className:a()("btn btn-primary",{disabled:!t})},this.queryFormVisible?"Cancel Modify Query":"Modify Query"),r.createElement(s.d,{trigger:["click"],placement:"bottomRight",overlay:r.createElement(v.a,{store:this.props.store}),visible:this.props.store.resultsPageSettingsVisible,onVisibleChange:function(t){e.props.store.resultsPageSettingsVisible=!!t},onPopupAlign:function(e){return Object(s.W)(e,"22px")}},r.createElement("button",{"data-test":"GlobalSettingsButton",style:{marginLeft:5},className:"btn btn-primary"},r.createElement("i",{className:"fa fa-sliders fa-lg"})))),r.createElement(l.a,{isLoading:!t,small:!0}),t&&this.cohortAndGeneSummary.component),r.createElement("div",{className:"query-summary__rightItems"},r.createElement("div",{className:"query-summary__alterationData"},t&&r.createElement("strong",null,this.alterationSummary.component)),r.createElement(d.a,{sessionEnabled:f.a.sessionServiceIsEnabled(),bitlyAccessToken:f.b.serverConfig.bitly_access_token,urlWrapper:this.props.store.urlWrapper}))),this.queryFormVisible&&this.queryForm)}},{key:"queryFormVisible",get:function(){return this.props.store.queryFormVisible||this.isQueryOrGeneInvalid}},{key:"studyPageFilteredCasesLink",get:function(){var e=this;return r.createElement("a",{onClick:function(){Object(m.d)(e.props.store.queriedStudies.result,e.props.store.filteredSamples.result,e.props.store.queriedVirtualStudies.result.length>0,e.props.store.filteredSamples.result.length<e.props.store.samples.result.length,e.props.store.sampleLists.result)}},Object(m.c)(this.props.store.filteredSamples.result,this.props.store.filteredPatients.result))}},{key:"studyList",get:function(){return r.createElement("div",{className:"cbioportal-frontend"},r.createElement("ul",{className:"list-unstyled",style:{marginBottom:0}},this.props.store.queriedStudies.result.map(function(e){return r.createElement("li",null,r.createElement(h.a,{studyId:e.studyId},e.name))})))}},{key:"queryForm",get:function(){var e=this;return r.createElement("div",{style:{margin:"10px -20px 0 -20px"}},r.createElement(c.a,{onSubmit:this.onSubmit,forkedMode:!1,showQuickSearchTab:!1,showDownloadTab:!1,showAlerts:!0,modifyQueryParams:this.props.store.modifyQueryParams,getQueryStore:function(){return Object(_.a)(e.props.store.urlWrapper.query,e.props.store.urlWrapper,!1)}}))}},{key:"isQueryOrGeneInvalid",get:function(){return this.props.store.genesInvalid||this.props.store.isQueryInvalid}}])&&O(o.prototype,i),u&&O(o,u),n}();x([p.default,u.action],A.prototype,"toggleQueryFormVisibility",null),x([u.computed],A.prototype,"queryFormVisible",null),x([u.computed],A.prototype,"studyPageFilteredCasesLink",null),x([p.default,u.action],A.prototype,"closeQueryForm",null),x([p.default],A.prototype,"onSubmit",null),x([u.computed],A.prototype,"queryForm",null),x([u.computed],A.prototype,"isQueryOrGeneInvalid",null),A=x([o.observer],A),t.a=A}).call(this,n(17))},function(e,t,n){"use strict";t.__esModule=!0,t.default=t.EXITING=t.ENTERED=t.ENTERING=t.EXITED=t.UNMOUNTED=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(4)),o=s(n(0)),i=s(n(23)),a=n(836);n(1114);function s(e){return e&&e.__esModule?e:{default:e}}var l="unmounted";t.UNMOUNTED=l;var u="exited";t.EXITED=u;var c="entering";t.ENTERING=c;var p="entered";t.ENTERED=p;t.EXITING="exiting";var d=function(e){var t,n;function r(t,n){var r;r=e.call(this,t,n)||this;var o,i=n.transitionGroup,a=i&&!i.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?a?(o=u,r.appearStatus=c):o=p:o=t.unmountOnExit||t.mountOnEnter?l:u,r.state={status:o},r.nextCallback=null,r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.getChildContext=function(){return{transitionGroup:null}},r.getDerivedStateFromProps=function(e,t){return e.in&&t.status===l?{status:u}:null},a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==c&&n!==p&&(t=c):n!==c&&n!==p||(t="exiting")}this.updateStatus(!1,t)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},a.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t){this.cancelNextCallback();var n=i.default.findDOMNode(this);t===c?this.performEnter(n,e):this.performExit(n)}else this.props.unmountOnExit&&this.state.status===u&&this.setState({status:l})},a.performEnter=function(e,t){var n=this,r=this.props.enter,o=this.context.transitionGroup?this.context.transitionGroup.isMounting:t,i=this.getTimeouts(),a=o?i.appear:i.enter;t||r?(this.props.onEnter(e,o),this.safeSetState({status:c},function(){n.props.onEntering(e,o),n.onTransitionEnd(e,a,function(){n.safeSetState({status:p},function(){n.props.onEntered(e,o)})})})):this.safeSetState({status:p},function(){n.props.onEntered(e)})},a.performExit=function(e){var t=this,n=this.props.exit,r=this.getTimeouts();n?(this.props.onExit(e),this.safeSetState({status:"exiting"},function(){t.props.onExiting(e),t.onTransitionEnd(e,r.exit,function(){t.safeSetState({status:u},function(){t.props.onExited(e)})})})):this.safeSetState({status:u},function(){t.props.onExited(e)})},a.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},a.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},a.onTransitionEnd=function(e,t,n){this.setNextCallback(n);var r=null==t&&!this.props.addEndListener;e&&!r?(this.props.addEndListener&&this.props.addEndListener(e,this.nextCallback),null!=t&&setTimeout(this.nextCallback,t)):setTimeout(this.nextCallback,0)},a.render=function(){var e=this.state.status;if(e===l)return null;var t=this.props,n=t.children,r=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(t,["children"]);if(delete r.in,delete r.mountOnEnter,delete r.unmountOnExit,delete r.appear,delete r.enter,delete r.exit,delete r.timeout,delete r.addEndListener,delete r.onEnter,delete r.onEntering,delete r.onEntered,delete r.onExit,delete r.onExiting,delete r.onExited,"function"==typeof n)return n(e,r);var i=o.default.Children.only(n);return o.default.cloneElement(i,r)},r}(o.default.Component);function f(){}d.contextTypes={transitionGroup:r.object},d.childContextTypes={transitionGroup:function(){}},d.propTypes={},d.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:f,onEntering:f,onEntered:f,onExit:f,onExiting:f,onExited:f},d.UNMOUNTED=0,d.EXITED=1,d.ENTERING=2,d.ENTERED=3,d.EXITING=4;var h=(0,a.polyfill)(d);t.default=h},function(e,t,n){"use strict";t.__esModule=!0,t.classNamesShape=t.timeoutsShape=void 0;var r;(r=n(4))&&r.__esModule;t.timeoutsShape=null;t.classNamesShape=null},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=s(n(4)),o=s(n(0)),i=n(836),a=n(1210);function s(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var c=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},p=function(e){var t,n;function r(t,n){var r,o=(r=e.call(this,t,n)||this).handleExited.bind(u(u(r)));return r.state={handleExited:o,firstRender:!0},r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.getChildContext=function(){return{transitionGroup:{isMounting:!this.appeared}}},i.componentDidMount=function(){this.appeared=!0,this.mounted=!0},i.componentWillUnmount=function(){this.mounted=!1},r.getDerivedStateFromProps=function(e,t){var n=t.children,r=t.handleExited;return{children:t.firstRender?(0,a.getInitialChildMapping)(e,r):(0,a.getNextChildMapping)(e,n,r),firstRender:!1}},i.handleExited=function(e,t){var n=(0,a.getChildMapping)(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState(function(t){var n=l({},t.children);return delete n[e.key],{children:n}}))},i.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,["component","childFactory"]),i=c(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?i:o.default.createElement(t,r,i)},r}(o.default.Component);p.childContextTypes={transitionGroup:r.default.object.isRequired},p.propTypes={},p.defaultProps={component:"div",childFactory:function(e){return e}};var d=(0,i.polyfill)(p);t.default=d,e.exports=t.default},,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}n.r(t);var a=n(0),s=n.n(a),l=n(4),u=n.n(l),c=n(5),p=n.n(c),d=n(1205),f=n(23);n.d(t,"Bounce",function(){return j}),n.d(t,"Flip",function(){return M}),n.d(t,"Slide",function(){return I}),n.d(t,"ToastContainer",function(){return D}),n.d(t,"ToastPosition",function(){return h}),n.d(t,"ToastType",function(){return m}),n.d(t,"Zoom",function(){return N}),n.d(t,"cssTransition",function(){return C}),n.d(t,"toast",function(){return K});var h={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},m={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},y={SHOW:0,CLEAR:1,DID_MOUNT:2,WILL_UNMOUNT:3,ON_CHANGE:4},g=function(){},b="Toastify";function v(e){return"number"==typeof e&&!isNaN(e)&&e>0}function _(e){return Object.keys(e).map(function(t){return e[t]})}var S=!("undefined"==typeof window||!window.document||!window.document.createElement);var E,w=((E=function(e,t,n){var r=e[t];return!1===r||v(r)?null:new Error(n+" expect "+t+" \n      to be a valid Number > 0 or equal to false. "+r+" given.")}).isRequired=function(e,t,n){if(void 0===e[t])return new Error("The prop "+t+" is marked as required in \n      "+n+", but its value is undefined.");E(e,t,n)},E),O={list:new Map,emitQueue:new Map,on:function(e,t){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(t),this},off:function(e){return this.list.delete(e),this},cancelEmit:function(e){var t=this.emitQueue.get(e);return t&&(t.forEach(function(e){return clearTimeout(e)}),this.emitQueue.delete(e)),this},emit:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];this.list.has(e)&&this.list.get(e).forEach(function(n){var o=setTimeout(function(){n.apply(void 0,r)},0);t.emitQueue.has(e)||t.emitQueue.set(e,[]),t.emitQueue.get(e).push(o)})}};function C(e){var t=e.enter,n=e.exit,i=e.duration,a=void 0===i?750:i,l=e.appendPosition,u=void 0!==l&&l;return function(e){var i,l,c=e.children,p=e.position,f=e.preventExitTransition,h=o(e,["children","position","preventExitTransition"]),m=u?t+"--"+p:t,y=u?n+"--"+p:n;Array.isArray(a)&&2===a.length?(i=a[0],l=a[1]):i=l=a;return s.a.createElement(d.Transition,r({},h,{timeout:f?0:{enter:i,exit:l},onEnter:function(e){e.classList.add(m),e.style.animationFillMode="forwards",e.style.animationDuration=.001*i+"s"},onEntered:function(e){e.classList.remove(m),e.style.cssText=""},onExit:f?g:function(e){e.classList.add(y),e.style.animationFillMode="forwards",e.style.animationDuration=.001*l+"s"}}),c)}}function k(e){var t,n,o=e.delay,i=e.isRunning,a=e.closeToast,l=e.type,u=e.hide,c=e.className,d=e.style,f=e.controlledProgress,h=e.progress,m=e.rtl,y=r({},d,{animationDuration:o+"ms",animationPlayState:i?"running":"paused",opacity:u?0:1,transform:f?"scaleX("+h+")":null}),g=p()(b+"__progress-bar",f?b+"__progress-bar--controlled":b+"__progress-bar--animated",b+"__progress-bar--"+l,((t={})[b+"__progress-bar--rtl"]=m,t),c),v=((n={})[f&&h>=1?"onTransitionEnd":"onAnimationEnd"]=f&&h<1?null:a,n);return s.a.createElement("div",r({className:g,style:y},v))}function T(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}k.propTypes={delay:w.isRequired,isRunning:u.a.bool.isRequired,closeToast:u.a.func.isRequired,rtl:u.a.bool.isRequired,type:u.a.string,hide:u.a.bool,className:u.a.oneOfType([u.a.string,u.a.object]),progress:u.a.number,controlledProgress:u.a.bool},k.defaultProps={type:m.DEFAULT,hide:!1};var P=S&&/(msie|trident)/i.test(navigator.userAgent),x=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).state={isRunning:!0,preventExitTransition:!1},t.flag={canCloseOnClick:!0,canDrag:!1},t.drag={start:0,x:0,y:0,deltaX:0,removalDistance:0},t.boundingRect=null,t.ref=null,t.pauseToast=function(){t.props.autoClose&&t.setState({isRunning:!1})},t.playToast=function(){t.props.autoClose&&t.setState({isRunning:!0})},t.onDragStart=function(e){t.flag.canCloseOnClick=!0,t.flag.canDrag=!0,t.boundingRect=t.ref.getBoundingClientRect(),t.ref.style.transition="",t.drag.start=t.drag.x=T(e.nativeEvent),t.drag.removalDistance=t.ref.offsetWidth*(t.props.draggablePercent/100)},t.onDragMove=function(e){t.flag.canDrag&&(t.state.isRunning&&t.pauseToast(),t.drag.x=T(e),t.drag.deltaX=t.drag.x-t.drag.start,t.drag.y=function(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}(e),t.drag.start!==t.drag.x&&(t.flag.canCloseOnClick=!1),t.ref.style.transform="translateX("+t.drag.deltaX+"px)",t.ref.style.opacity=1-Math.abs(t.drag.deltaX/t.drag.removalDistance))},t.onDragEnd=function(e){if(t.flag.canDrag){if(t.flag.canDrag=!1,Math.abs(t.drag.deltaX)>t.drag.removalDistance)return void t.setState({preventExitTransition:!0},t.props.closeToast);t.ref.style.transition="transform 0.2s, opacity 0.2s",t.ref.style.transform="translateX(0)",t.ref.style.opacity=1}},t.onDragTransitionEnd=function(){if(t.boundingRect){var e=t.boundingRect,n=e.top,r=e.bottom,o=e.left,i=e.right;t.props.pauseOnHover&&t.drag.x>=o&&t.drag.x<=i&&t.drag.y>=n&&t.drag.y<=r?t.pauseToast():t.playToast()}},t.onExitTransitionEnd=function(){if(P)t.props.onExited();else{var e=t.ref.scrollHeight,n=t.ref.style;requestAnimationFrame(function(){n.minHeight="initial",n.height=e+"px",n.transition="all 0.4s ",requestAnimationFrame(function(){n.height=0,n.padding=0,n.margin=0}),setTimeout(function(){return t.props.onExited()},400)})}},t}i(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.onOpen(this.props.children.props),this.props.draggable&&this.bindDragEvents(),this.props.pauseOnFocusLoss&&this.bindFocusEvents()},n.componentDidUpdate=function(e){e.draggable!==this.props.draggable&&(this.props.draggable?this.bindDragEvents():this.unbindDragEvents()),e.pauseOnFocusLoss!==this.props.pauseOnFocusLoss&&(this.props.pauseOnFocusLoss?this.bindFocusEvents():this.unbindFocusEvents())},n.componentWillUnmount=function(){this.props.onClose(this.props.children.props),this.props.draggable&&this.unbindDragEvents(),this.props.pauseOnFocusLoss&&this.unbindFocusEvents()},n.bindFocusEvents=function(){window.addEventListener("focus",this.playToast),window.addEventListener("blur",this.pauseToast)},n.unbindFocusEvents=function(){window.removeEventListener("focus",this.playToast),window.removeEventListener("blur",this.pauseToast)},n.bindDragEvents=function(){document.addEventListener("mousemove",this.onDragMove),document.addEventListener("mouseup",this.onDragEnd),document.addEventListener("touchmove",this.onDragMove),document.addEventListener("touchend",this.onDragEnd)},n.unbindDragEvents=function(){document.removeEventListener("mousemove",this.onDragMove),document.removeEventListener("mouseup",this.onDragEnd),document.removeEventListener("touchmove",this.onDragMove),document.removeEventListener("touchend",this.onDragEnd)},n.render=function(){var e,t=this,n=this.props,o=n.closeButton,i=n.children,a=n.autoClose,l=n.pauseOnHover,u=n.onClick,c=n.closeOnClick,d=n.type,f=n.hideProgressBar,h=n.closeToast,m=n.transition,y=n.position,g=n.className,v=n.bodyClassName,_=n.progressClassName,S=n.progressStyle,E=n.updateId,w=n.role,O=n.progress,C=n.rtl,T={className:p()(b+"__toast",b+"__toast--"+d,(e={},e[b+"__toast--rtl"]=C,e),g)};a&&l&&(T.onMouseEnter=this.pauseToast,T.onMouseLeave=this.playToast),c&&(T.onClick=function(e){u&&u(e),t.flag.canCloseOnClick&&h()});var P=parseFloat(O)===O;return s.a.createElement(m,{in:this.props.in,appear:!0,onExited:this.onExitTransitionEnd,position:y,preventExitTransition:this.state.preventExitTransition},s.a.createElement("div",r({onClick:u},T,{ref:function(e){return t.ref=e},onMouseDown:this.onDragStart,onTouchStart:this.onDragStart,onMouseUp:this.onDragTransitionEnd,onTouchEnd:this.onDragTransitionEnd}),s.a.createElement("div",r({},this.props.in&&{role:w},{className:p()(b+"__toast-body",v)}),i),o&&o,(a||P)&&s.a.createElement(k,r({},E&&!P?{key:"pb-"+E}:{},{rtl:C,delay:a,isRunning:this.state.isRunning,closeToast:h,hide:f,type:d,style:S,className:_,controlledProgress:P,progress:O}))))},t}(a.Component);function A(e){var t=e.closeToast,n=e.type,r=e.ariaLabel;return s.a.createElement("button",{className:b+"__close-button "+b+"__close-button--"+n,type:"button",onClick:function(e){e.stopPropagation(),t(e)},"aria-label":r},"✖︎")}x.propTypes={closeButton:u.a.oneOfType([u.a.node,u.a.bool]).isRequired,autoClose:w.isRequired,children:u.a.node.isRequired,closeToast:u.a.func.isRequired,position:u.a.oneOf(_(h)).isRequired,pauseOnHover:u.a.bool.isRequired,pauseOnFocusLoss:u.a.bool.isRequired,closeOnClick:u.a.bool.isRequired,transition:u.a.func.isRequired,rtl:u.a.bool.isRequired,hideProgressBar:u.a.bool.isRequired,draggable:u.a.bool.isRequired,draggablePercent:u.a.number.isRequired,in:u.a.bool,onExited:u.a.func,onOpen:u.a.func,onClose:u.a.func,type:u.a.oneOf(_(m)),className:u.a.oneOfType([u.a.string,u.a.object]),bodyClassName:u.a.oneOfType([u.a.string,u.a.object]),progressClassName:u.a.oneOfType([u.a.string,u.a.object]),progressStyle:u.a.object,progress:u.a.number,updateId:u.a.oneOfType([u.a.string,u.a.number]),ariaLabel:u.a.string,containerId:u.a.oneOfType([u.a.string,u.a.number]),role:u.a.string},x.defaultProps={type:m.DEFAULT,in:!0,onOpen:g,onClose:g,className:null,bodyClassName:null,progressClassName:null,updateId:null},A.propTypes={closeToast:u.a.func,arialLabel:u.a.string},A.defaultProps={ariaLabel:"close"};var j=C({enter:b+"__bounce-enter",exit:b+"__bounce-exit",appendPosition:!0}),I=C({enter:b+"__slide-enter",exit:b+"__slide-exit",duration:[450,750],appendPosition:!0}),N=C({enter:b+"__zoom-enter",exit:b+"__zoom-exit"}),M=C({enter:b+"__flip-enter",exit:b+"__flip-exit"}),D=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).state={toast:[]},t.toastKey=1,t.collection={},t.isToastActive=function(e){return-1!==t.state.toast.indexOf(e)},t}i(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;O.cancelEmit(y.WILL_UNMOUNT).on(y.SHOW,function(t,n){return e.ref?e.buildToast(t,n):null}).on(y.CLEAR,function(t){return e.ref?null==t?e.clear():e.removeToast(t):null}).emit(y.DID_MOUNT,this)},n.componentWillUnmount=function(){O.emit(y.WILL_UNMOUNT,this)},n.removeToast=function(e){this.setState({toast:this.state.toast.filter(function(t){return t!==e})},this.dispatchChange)},n.dispatchChange=function(){O.emit(y.ON_CHANGE,this.state.toast.length,this.props.containerId)},n.makeCloseButton=function(e,t,n){var r=this,o=this.props.closeButton;return Object(a.isValidElement)(e)||!1===e?o=e:!0===e&&(o=this.props.closeButton&&"boolean"!=typeof this.props.closeButton?this.props.closeButton:s.a.createElement(A,null)),!1!==o&&Object(a.cloneElement)(o,{closeToast:function(){return r.removeToast(t)},type:n})},n.getAutoCloseDelay=function(e){return!1===e||v(e)?e:this.props.autoClose},n.canBeRendered=function(e){return Object(a.isValidElement)(e)||"string"==typeof e||"number"==typeof e||"function"==typeof e},n.parseClassName=function(e){return"string"==typeof e?e:null!==e&&"object"==typeof e&&"toString"in e?e.toString():null},n.belongToContainer=function(e){return e.containerId===this.props.containerId},n.buildToast=function(e,t){var n=this,r=t.delay,i=o(t,["delay"]);if(!this.canBeRendered(e))throw new Error("The element you provided cannot be rendered. You provided an element of type "+typeof e);var s=i.toastId,l=i.updateId;if(!(this.props.enableMultiContainer&&!this.belongToContainer(i)||this.isToastActive(s)&&null==l)){var u=function(){return n.removeToast(s)},c={id:s,key:i.key||this.toastKey++,type:i.type,closeToast:u,updateId:i.updateId,rtl:this.props.rtl,position:i.position||this.props.position,transition:i.transition||this.props.transition,className:this.parseClassName(i.className||this.props.toastClassName),bodyClassName:this.parseClassName(i.bodyClassName||this.props.bodyClassName),onClick:i.onClick||this.props.onClick,closeButton:this.makeCloseButton(i.closeButton,s,i.type),pauseOnHover:"boolean"==typeof i.pauseOnHover?i.pauseOnHover:this.props.pauseOnHover,pauseOnFocusLoss:"boolean"==typeof i.pauseOnFocusLoss?i.pauseOnFocusLoss:this.props.pauseOnFocusLoss,draggable:"boolean"==typeof i.draggable?i.draggable:this.props.draggable,draggablePercent:"number"!=typeof i.draggablePercent||isNaN(i.draggablePercent)?this.props.draggablePercent:i.draggablePercent,closeOnClick:"boolean"==typeof i.closeOnClick?i.closeOnClick:this.props.closeOnClick,progressClassName:this.parseClassName(i.progressClassName||this.props.progressClassName),progressStyle:this.props.progressStyle,autoClose:this.getAutoCloseDelay(i.autoClose),hideProgressBar:"boolean"==typeof i.hideProgressBar?i.hideProgressBar:this.props.hideProgressBar,progress:parseFloat(i.progress),role:"string"==typeof i.role?i.role:this.props.role};"function"==typeof i.onOpen&&(c.onOpen=i.onOpen),"function"==typeof i.onClose&&(c.onClose=i.onClose),Object(a.isValidElement)(e)&&"string"!=typeof e.type&&"number"!=typeof e.type?e=Object(a.cloneElement)(e,{closeToast:u}):"function"==typeof e&&(e=e({closeToast:u})),v(r)?setTimeout(function(){n.appendToast(c,e,i.staleToastId)},r):this.appendToast(c,e,i.staleToastId)}},n.appendToast=function(e,t,n){var o,i=e.id,a=e.updateId;this.collection=r({},this.collection,((o={})[i]={options:e,content:t,position:e.position},o)),this.setState({toast:(a?[].concat(this.state.toast):[].concat(this.state.toast,[i])).filter(function(e){return e!==n})},this.dispatchChange)},n.clear=function(){this.setState({toast:[]})},n.renderToast=function(){var e=this,t={},n=this.props,o=n.className,i=n.style;return(n.newestOnTop?Object.keys(this.collection).reverse():Object.keys(this.collection)).forEach(function(n){var o=e.collection[n],i=o.position,a=o.options,l=o.content;t[i]||(t[i]=[]),-1!==e.state.toast.indexOf(a.id)?t[i].push(s.a.createElement(x,r({},a,{isDocumentHidden:e.state.isDocumentHidden,key:"toast-"+a.key}),l)):(t[i].push(null),delete e.collection[n])}),Object.keys(t).map(function(n){var a,l=1===t[n].length&&null===t[n][0],u={className:p()(b+"__toast-container",b+"__toast-container--"+n,(a={},a[b+"__toast-container--rtl"]=e.props.rtl,a),e.parseClassName(o)),style:l?r({},i,{pointerEvents:"none"}):r({},i)};return s.a.createElement(d.TransitionGroup,r({},u,{key:"container-"+n}),t[n])})},n.render=function(){var e=this;return s.a.createElement("div",{ref:function(t){return e.ref=t},className:""+b},this.renderToast())},t}(a.Component);D.propTypes={position:u.a.oneOf(_(h)),autoClose:w,closeButton:u.a.oneOfType([u.a.node,u.a.bool]),hideProgressBar:u.a.bool,pauseOnHover:u.a.bool,closeOnClick:u.a.bool,newestOnTop:u.a.bool,className:u.a.oneOfType([u.a.string,u.a.object]),style:u.a.object,toastClassName:u.a.oneOfType([u.a.string,u.a.object]),bodyClassName:u.a.oneOfType([u.a.string,u.a.object]),progressClassName:u.a.oneOfType([u.a.string,u.a.object]),progressStyle:u.a.object,transition:u.a.func,rtl:u.a.bool,draggable:u.a.bool,draggablePercent:u.a.number,pauseOnFocusLoss:u.a.bool,enableMultiContainer:u.a.bool,containerId:u.a.oneOfType([u.a.string,u.a.number]),role:u.a.string,onClick:u.a.func},D.defaultProps={position:h.TOP_RIGHT,transition:j,rtl:!1,autoClose:5e3,hideProgressBar:!1,closeButton:s.a.createElement(A,null),pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,newestOnTop:!1,draggable:!0,draggablePercent:80,className:null,style:null,toastClassName:null,bodyClassName:null,progressClassName:null,progressStyle:null,role:"alert"};var R=new Map,L=null,G=null,V={},B=[],F=!1;function H(){return R.size>0}function U(e,t){var n=function(e){return H()?e?R.get(e):R.get(L):null}(t.containerId);if(!n)return null;var r=n.collection[e];return void 0===r?null:r}function W(e,t){return r({},e,{type:t,toastId:z(e)})}function q(){return(Math.random().toString(36)+Date.now().toString(36)).substr(2,10)}function z(e){return e&&("string"==typeof e.toastId||"number"==typeof e.toastId&&!isNaN(e.toastId))?e.toastId:q()}function Q(e,t){return H()?O.emit(y.SHOW,e,t):(B.push({action:y.SHOW,content:e,options:t}),F&&S&&(F=!1,G=document.createElement("div"),document.body.appendChild(G),Object(f.render)(s.a.createElement(D,V),G))),t.toastId}var K=function(e,t){return Q(e,W(t,t&&t.type||m.DEFAULT))},Y=function(e){m[e]!==m.DEFAULT&&(K[m[e].toLowerCase()]=function(t,n){return Q(t,W(n,n&&n.type||m[e]))})};for(var X in m)Y(X);K.warn=K.warning,K.dismiss=function(e){return void 0===e&&(e=null),H()&&O.emit(y.CLEAR,e)},K.isActive=function(e){var t=!1;return R.size>0&&R.forEach(function(n){n.isToastActive(e)&&(t=!0)}),t},K.update=function(e,t){void 0===t&&(t={}),setTimeout(function(){var n=U(e,t);if(n){var o=n.options,i=n.content,a=r({},o,{},t,{toastId:t.toastId||e});t.toastId&&t.toastId!==e?a.staleToastId=e:a.updateId=q();var s=void 0!==a.render?a.render:i;delete a.render,Q(s,a)}},0)},K.done=function(e){K.update(e,{progress:1})},K.onChange=function(e){"function"==typeof e&&O.on(y.ON_CHANGE,e)},K.configure=function(e){F=!0,V=e},K.POSITION=h,K.TYPE=m,O.on(y.DID_MOUNT,function(e){L=e.props.containerId||e,R.set(L,e),B.forEach(function(e){O.emit(e.action,e.content,e.options)}),B=[]}).on(y.WILL_UNMOUNT,function(e){e?R.delete(e.props.containerId||e):R.clear(),0===R.size&&O.off(y.SHOW).off(y.CLEAR),S&&G&&document.body.removeChild(G)})},,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return T});var r=n(0),o=n(1),i=n(15),a=n(2),s=n(9),l=n(296),u=n.n(l),c=n(20),p=n(5),d=n.n(p),f=(n(830),n(812),n(1423)),h=n(928);function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var S=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":_(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},E={multiple:"Multiple Alterations",protExpressionLow:"Protein Low",protExpressionHigh:"Protein High",mrnaExpressionLow:"mRNA Low",mrnaExpressionHigh:"mRNA High",hetloss:"Shallow Deletion",homdel:"Deep Deletion",gain:"Gain",amp:"Amplification",fusion:"Fusion",mutated:"Mutation"},w={protein:"Protein data",expression:"mRNA data",cna:"CNA data",mutation:"Mutation data"},O={mutated:"#008000",amp:"#ff0000",homdel:"#0000ff",hetloss:"#8fd8d8",gain:"rgb(255,182,193)",fusion:"#8B00C9",mrnaExpressionHigh:"#FF989A",mrnaExpressionLow:"#529AC8",protExpressionHigh:"#FF989A",protExpressionLow:"#E0FFFF",multiple:"#666"},C=[{value:"studyId",label:"Cancer Study"},{value:"cancerType",label:"Cancer Type"},{value:"cancerTypeDetailed",label:"Cancer Type Detailed"}];function k(e,t){return e/t*100}var T=function(t){function n(e){var t,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),r=this,(t=!(o=g(n).call(this,e))||"object"!==_(o)&&"function"!=typeof o?b(r):o).totalCasesMinDefaultValue=10,t.tempAltCasesInputValue=0,t.tempTotalCasesInputValue=t.totalCasesMin,t.pngAnchor="",t.pdf={anchor:"",width:0,height:0},t.showControls=!0,t.hideGenomicAlterations=!1,t.yAxis="alt-freq",t.xAxis="y-axis",t.altCasesValue=0,t.totalCasesValue=t.totalCasesMin,t.tempTotalCasesValue=t.totalCasesMin,t.tempAltCasesValue=0,t.viewCountsByCancerSubType=!1,t.handleYAxisChange=t.handleYAxisChange.bind(b(t)),t.handleXAxisChange=t.handleXAxisChange.bind(b(t)),t.handleGenomicCheckboxChange=t.handleGenomicCheckboxChange.bind(b(t)),t.handleCancerTypeCheckboxChange=t.handleCancerTypeCheckboxChange.bind(b(t)),t.handleAltSliderChange=t.handleAltSliderChange.bind(b(t)),t.handleTotalSliderChange=t.handleTotalSliderChange.bind(b(t)),t.handleAltSliderChangeComplete=t.handleAltSliderChangeComplete.bind(b(t)),t.handleTotalSliderChangeComplete=t.handleTotalSliderChangeComplete.bind(b(t)),t.handleAltInputChange=t.handleAltInputChange.bind(b(t)),t.handleAltInputKeyPress=t.handleAltInputKeyPress.bind(b(t)),t.handleTotalInputChange=t.handleTotalInputChange.bind(b(t)),t.handleTotalInputKeyPress=t.handleTotalInputKeyPress.bind(b(t)),t.setPngAnchor=t.setPngAnchor.bind(b(t)),t}var a,s,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(n,r["Component"]),a=n,(s=[{key:"componentDidMount",value:function(){this.initializeSliderValue()}},{key:"getYValue",value:function(e,t){return"abs-count"===this.yAxis?e:e/t*100}},{key:"determineSorterAndDirection",value:function(){var e,t,n=this;return"x-axis"===this.xAxis?(e=function(e){return e},t="asc"):(e="abs-count"===this.yAxis?function(e){return n.countsData[e].alteredSampleCount}:function(e){var t=n.countsData[e];return t.alteredSampleCount/t.profiledSampleTotal},t="desc"),{sorter:e,dir:t}}},{key:"transformLabel",value:function(e){return this.props.labelTransformer?this.props.labelTransformer(e):e}},{key:"handleYAxisChange",value:function(e){this.yAxis=e.target.value,this.altCasesValue=0,this.handleAltSliderChange(0)}},{key:"handleXAxisChange",value:function(e){this.xAxis=e.target.value}},{key:"handleCancerTypeCheckboxChange",value:function(){this.viewCountsByCancerSubType=!1===this.viewCountsByCancerSubType}},{key:"handleGenomicCheckboxChange",value:function(){this.hideGenomicAlterations=!this.hideGenomicAlterations}},{key:"handleAltSliderChange",value:function(e){this.tempAltCasesValue=e,this.tempAltCasesInputValue=e}},{key:"handleTotalSliderChange",value:function(e){this.tempTotalCasesValue=e,this.tempTotalCasesInputValue=e}},{key:"handleAltInputKeyPress",value:function(e){if(13===e.charCode){if(isNaN(this.tempAltCasesInputValue))return void(this.tempAltCasesInputValue=0);this.tempAltCasesInputValue=Number(this.tempAltCasesInputValue),this.tempAltCasesValue=this.tempAltCasesInputValue,this.handleAltSliderChangeComplete()}}},{key:"handleTotalInputKeyPress",value:function(e){13===e.charCode&&(isNaN(this.tempTotalCasesInputValue)?this.tempTotalCasesInputValue=this.totalCasesMin:this.tempTotalCasesInputValue>this.totalCasesMax?(this.tempTotalCasesInputValue=this.totalCasesMax,this.tempTotalCasesValue=this.totalCasesMax):(this.tempTotalCasesInputValue=Number(this.tempTotalCasesInputValue),this.tempTotalCasesValue=this.tempTotalCasesInputValue),this.handleTotalSliderChangeComplete())}},{key:"handleAltInputChange",value:function(e){this.tempAltCasesInputValue=e.target.value.replace(/[^0-9\.]/g,"")}},{key:"handleTotalInputChange",value:function(e){this.tempTotalCasesInputValue=e.target.value.replace(/[^0-9\.]/g,"")}},{key:"handleAltSliderChangeComplete",value:function(){this.altCasesValue=this.tempAltCasesValue}},{key:"handleTotalSliderChangeComplete",value:function(){this.totalCasesValue=this.tempTotalCasesValue}},{key:"initializeSliderValue",value:function(){this.tempAltCasesValue=0,this.tempAltCasesInputValue=0,this.altCasesValue=0,this.tempTotalCasesValue=this.totalCasesMin,this.tempTotalCasesInputValue=this.totalCasesMin,this.totalCasesValue=this.totalCasesMin}},{key:"setPngAnchor",value:function(e){this.pngAnchor=e}},{key:"render",value:function(){var t=this;return r.createElement(h.a,{offset:60},r.createElement(c.If,{condition:this.hasAlterations},r.createElement(c.Then,null,r.createElement("div",{"data-test":"cancerTypesSummaryDiv"},r.createElement("div",{className:"cancer-summary--main-options"},r.createElement(i.ButtonGroup,null,C.map(function(n,o){return r.createElement(i.Radio,{checked:n.value===t.props.groupAlterationsBy,onChange:function(n){t.initializeSliderValue(),t.props.handlePivotChange(e(n.target).attr("data-value"))},inline:!0,"data-value":n.value},n.label)}))),r.createElement("div",{className:d()("inlineBlock",{hidden:!this.showControls},"cancer-summary-secondary-options")},this.controls),r.createElement("div",{className:d()("alert","alert-success",{hidden:!this.totalCaseChanged&&!this.altCaseChanged})},r.createElement("span",{style:{verticalAlign:"middle"}},"".concat(this.chartData.labels.length," of ").concat(this.groupKeysSorted.length," categories (").concat(o.keyBy(C,"value")[this.props.groupAlterationsBy].label,") are shown based on filtering."))),r.createElement(f.a,{gene:this.props.gene,key:Date.now(),data:this.chartData.data,alterationTypeDataCounts:this.chartData.alterationTypeDataCounts,ref:function(e){return t.chartComponent=e},countsByGroup:this.countsData,representedAlterations:this.chartData.representedAlterations,alterationTypes:E,isPercentage:"alt-freq"===this.yAxis,showLinks:this.showStudyTooltipLinks,colors:O,hideGenomicAlterations:this.hideGenomicAlterations,xLabels:this.chartData.labels,xAxisString:(C.find(function(e){return e.value==t.props.groupAlterationsBy})||{}).label||"Cancer",handleStudyLinkout:this.props.handleStudyLinkout}))),r.createElement(c.Else,null,r.createElement("div",{className:"alert alert-info"},"There are no alterations in this gene."))))}},{key:"countsData",get:function(){return this.props.groupedAlterationData}},{key:"groupKeysSorted",get:function(){var e=this.determineSorterAndDirection(),t=e.dir,n=e.sorter;return o.chain(this.countsData).keys().orderBy(n,[t]).value()}},{key:"alterationTypeDataCounts",get:function(){var e=this,t=[];return o.forEach(this.groupKeysSorted,function(n){var r,i=e.countsData[n],a=o.chain(i.profiledSamplesCounts).values().sum().value(),s=k(i.alteredSampleCount,i.profiledSampleTotal);r="abs-count"===e.yAxis?i.alteredSampleCount>=e.tempAltCasesValue:s>=e.tempAltCasesValue;var l=i.profiledSampleTotal>=e.totalCasesValue;a>0&&r&&l&&o.forEach(o.keys(w),function(r){var o=i.profiledSamplesCounts[r],a=i.notProfiledSamplesCounts[r];o+a>0&&t.push({x:e.props.labelTransformer?e.props.labelTransformer(n):n,y:w[r],profiledCount:o,notProfiledCount:a})})}),t}},{key:"chartData",get:function(){var e=this,t={},n=0,r=0,i=0,a=[],s=o.map(E,function(s,l){return o.reduce(e.groupKeysSorted,function(s,u){var c,p=e.countsData[u],d=o.chain(p.profiledSamplesCounts).values().sum().value(),f=k(p.alteredSampleCount,p.profiledSampleTotal);c="abs-count"===e.yAxis?p.alteredSampleCount>=e.tempAltCasesValue:f>=e.tempAltCasesValue;var h=p.profiledSampleTotal>=e.totalCasesValue;if(d>0&&c&&h){var m=e.props.labelTransformer?e.props.labelTransformer(u):u;a.push(m),n=f>n?f:n,r=p.alteredSampleCount>r?p.alteredSampleCount:r,i=p.profiledSampleTotal>i?p.profiledSampleTotal:i;var y=p.alterationTypeCounts[l];y>0&&(t[l]=!0),s.push({alterationType:l,x:m,xKey:u,y:e.getYValue(y,p.profiledSampleTotal)})}return s},[])});return{labels:o.uniq(a),data:s,alterationTypeDataCounts:this.alterationTypeDataCounts,representedAlterations:t,maxPercentage:n,maxAbsoluteCount:r,maxSampleCount:i}}},{key:"altCasesMax",get:function(){return"abs-count"===this.yAxis?this.chartData.maxAbsoluteCount:this.chartData.maxPercentage}},{key:"totalCasesMax",get:function(){return this.chartData.maxSampleCount}},{key:"totalCasesMin",get:function(){return this.totalCasesMax>10?this.totalCasesMinDefaultValue:0}},{key:"hasAlterations",get:function(){return o.reduce(this.countsData,function(e,t){return e+t.alterationTotal},0)>0}},{key:"totalCaseChanged",get:function(){return this.totalCasesValue>0}},{key:"altCaseChanged",get:function(){return this.altCasesValue>0}},{key:"showStudyTooltipLinks",get:function(){return"studyId"===this.props.groupAlterationsBy&&this.chartData.labels.length>1}},{key:"controls",get:function(){var e=this,t="alt-freq"===this.yAxis?"%":"";return r.createElement("div",{className:"cancer-summary--form-controls"},r.createElement("table",null,r.createElement("tr",null,r.createElement("td",null,r.createElement(i.ControlLabel,null,"Y-Axis Value:")),r.createElement("td",{className:"dashed-border-right"},r.createElement(i.FormControl,{componentClass:"select","data-test":"cancerSummaryYAxisSelect",onChange:this.handleYAxisChange,ref:function(t){return e.inputYAxisEl=t}},r.createElement("option",{value:"alt-freq"},"Alteration Frequency"),r.createElement("option",{value:"abs-count"},"Absolute Counts"))),r.createElement("td",null,r.createElement(i.ControlLabel,null,"Min. # Total Cases:")),r.createElement("td",null,r.createElement("div",{className:"slider-holder"},r.createElement("div",{className:"slider custom-labels"},r.createElement(u.a,{min:0,max:this.totalCasesMax,value:this.tempTotalCasesValue,labels:m({0:0},this.totalCasesMax,this.totalCasesMax),onChange:this.handleTotalSliderChange,onChangeComplete:this.handleTotalSliderChangeComplete})))),r.createElement("td",{className:d()(this.totalCaseChanged?"highlightInput":"","dashed-border-right","slider-input")},r.createElement(i.FormControl,{type:"text",value:this.tempTotalCasesInputValue,"data-test":"sampleTotalThresholdInput",onChange:this.handleTotalInputChange,onKeyPress:this.handleTotalInputKeyPress})),r.createElement("td",null,r.createElement(i.Checkbox,{checked:!this.hideGenomicAlterations,onChange:this.handleGenomicCheckboxChange},"Show Genomic Alteration Types"))),r.createElement("tr",null,r.createElement("td",null,r.createElement(i.ControlLabel,null,"Sort X-Axis By:")),r.createElement("td",{className:"dashed-border-right"},r.createElement(i.FormControl,{componentClass:"select","data-test":"cancerSummaryXAxisSelect",onChange:this.handleXAxisChange,ref:function(t){return e.inputXAxisEl=t}},r.createElement("option",{value:"y-axis"},"Y-Axis Values"),r.createElement("option",{value:"x-axis"},"Alphabetically"))),r.createElement("td",null,r.createElement(i.ControlLabel,null,"Min. ".concat("alt-freq"===this.yAxis?"%":"#"," Altered Cases:"))),r.createElement("td",null,r.createElement("div",{className:"slider-holder"},r.createElement("div",{className:"slider custom-labels"},r.createElement(u.a,{min:0,max:this.altCasesMax,value:this.tempAltCasesValue,labels:m({0:0+t},this.altCasesMax,Math.ceil(this.altCasesMax)+t),format:function(e){return e+t},onChange:this.handleAltSliderChange,onChangeComplete:this.handleAltSliderChangeComplete})))),r.createElement("td",{className:d()(this.altCaseChanged?"highlightInput":"","dashed-border-right","slider-input")},r.createElement(i.FormControl,{type:"text",value:this.tempAltCasesInputValue+t,onChange:this.handleAltInputChange,"data-test":"alterationThresholdInput",onKeyPress:this.handleAltInputKeyPress})))))}}])&&y(a.prototype,s),l&&y(a,l),n}();S([a.observable],T.prototype,"tempAltCasesInputValue",void 0),S([a.observable],T.prototype,"tempTotalCasesInputValue",void 0),S([a.observable],T.prototype,"pngAnchor",void 0),S([a.observable],T.prototype,"pdf",void 0),S([a.observable],T.prototype,"showControls",void 0),S([a.observable],T.prototype,"hideGenomicAlterations",void 0),S([a.observable],T.prototype,"yAxis",void 0),S([a.observable],T.prototype,"xAxis",void 0),S([a.observable],T.prototype,"altCasesValue",void 0),S([a.observable],T.prototype,"totalCasesValue",void 0),S([a.observable],T.prototype,"tempTotalCasesValue",void 0),S([a.observable],T.prototype,"tempAltCasesValue",void 0),S([a.observable],T.prototype,"viewCountsByCancerSubType",void 0),S([a.computed],T.prototype,"alterationTypeDataCounts",null),S([a.computed],T.prototype,"chartData",null),S([a.computed],T.prototype,"altCasesMax",null),S([a.computed],T.prototype,"totalCasesMax",null),S([a.computed],T.prototype,"totalCasesMin",null),S([a.computed],T.prototype,"hasAlterations",null),S([a.computed],T.prototype,"totalCaseChanged",null),S([a.computed],T.prototype,"altCaseChanged",null),S([a.computed],T.prototype,"showStudyTooltipLinks",null),S([a.action],T.prototype,"handleTotalInputKeyPress",null),S([a.action],T.prototype,"initializeSliderValue",null),S([a.computed],T.prototype,"controls",null),T=S([s.observer],T)}).call(this,n(17))},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",function(){return _});var r=n(3),o=n(9),i=n(0),a=n(1197),s=n.n(a),l=n(6),u=n(1058),c=n(2),p=n(215);function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var g=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":y(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},b=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},v=Object(r.C)(),_=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=f(this,h(t).apply(this,arguments))).showBookmarkDialog=!1,e}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,i["Component"]),n=t,(o=[{key:"getUrls",value:function(){return b(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.location.href,e.next=3,Object(p.b)(t,this.props.bitlyAccessToken);case 3:return n=e.sent,e.abrupt("return",{bitlyUrl:n,fullUrl:t,sessionUrl:t});case 5:case"end":return e.stop()}},e,this)}))}},{key:"toggleBookmarkDialog",value:function(){this.showBookmarkDialog=!this.showBookmarkDialog}},{key:"render",value:function(){return i.createElement("div",{className:s.a.shareModule},i.createElement(r.d,{placement:"topLeft",overlay:i.createElement("div",null,"Get bookmark link")},i.createElement("a",{onClick:this.toggleBookmarkDialog},i.createElement("span",{className:"fa-stack fa-4x"},i.createElement("i",{className:"fa fa-circle fa-stack-2x"}),i.createElement("i",{className:"fa fa-link fa-stack-1x"})))),this.showBookmarkDialog&&i.createElement(u.a,{onHide:this.toggleBookmarkDialog,urlPromise:this.getUrls(),title:"Bookmark Query"}))}}])&&d(n.prototype,o),a&&d(n,a),t}();g([c.observable],_.prototype,"showBookmarkDialog",void 0),g([l.default,c.action],_.prototype,"toggleBookmarkDialog",null),_=g([o.observer],_)},function(e,t,n){e.exports={portalWidth:"shareUI-module__portalWidth__23kqI",framedImage:"shareUI-module__framedImage__2dQ1S",shareModule:"shareUI-module__shareModule__3FK_r"}},function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__16HAO",framedImage:"styles-module__framedImage__3CXfU",globalSettingsDropdown:"styles-module__globalSettingsDropdown__1vmly","fa-info-circle":"styles-module__fa-info-circle__-hvWa"}},function(e,t,n){},,,function(e,t,n){},function(e,t,n){},function(e,t,n){e.exports={portalWidth:"pathwayMapper-module__portalWidth__S9aQK",framedImage:"pathwayMapper-module__framedImage__1wfha",toast:"pathwayMapper-module__toast__AJKP1"}},function(e,t,n){"use strict";var r=s(n(1206)),o=s(n(1209)),i=s(n(1115)),a=s(n(1113));function s(e){return e&&e.__esModule?e:{default:e}}e.exports={Transition:a.default,TransitionGroup:i.default,ReplaceTransition:o.default,CSSTransition:r.default}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(4));var r=s(n(1207)),o=s(n(1208)),i=s(n(0)),a=s(n(1113));n(1114);function s(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u=function(e,t){return e&&t&&t.split(" ").forEach(function(t){return(0,r.default)(e,t)})},c=function(e,t){return e&&t&&t.split(" ").forEach(function(t){return(0,o.default)(e,t)})},p=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).onEnter=function(e,n){var r=t.getClassNames(n?"appear":"enter").className;t.removeClasses(e,"exit"),u(e,r),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var r=t.getClassNames(n?"appear":"enter").activeClassName;t.reflowAndAddClass(e,r),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var r=t.getClassNames("enter").doneClassName;t.removeClasses(e,n?"appear":"enter"),u(e,r),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.getClassNames("exit").className;t.removeClasses(e,"appear"),t.removeClasses(e,"enter"),u(e,n),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.getClassNames("exit").activeClassName;t.reflowAndAddClass(e,n),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.getClassNames("exit").doneClassName;t.removeClasses(e,"exit"),u(e,n),t.props.onExited&&t.props.onExited(e)},t.getClassNames=function(e){var n=t.props.classNames,r="string"!=typeof n?n[e]:n+"-"+e;return{className:r,activeClassName:"string"!=typeof n?n[e+"Active"]:r+"-active",doneClassName:"string"!=typeof n?n[e+"Done"]:r+"-done"}},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.removeClasses=function(e,t){var n=this.getClassNames(t),r=n.className,o=n.activeClassName,i=n.doneClassName;r&&c(e,r),o&&c(e,o),i&&c(e,i)},o.reflowAndAddClass=function(e,t){t&&(e&&e.scrollTop,u(e,t))},o.render=function(){var e=l({},this.props);return delete e.classNames,i.default.createElement(a.default,l({},e,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},r}(i.default.Component);p.propTypes={};var d=p;t.default=d,e.exports=t.default},function(e,t,n){e.exports=n(25)(886)},function(e,t,n){e.exports=n(25)(887)},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;a(n(4));var r=a(n(0)),o=n(23),i=a(n(1115));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){var t,n;function a(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).handleEnter=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onEnter",0,n)},t.handleEntering=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onEntering",0,n)},t.handleEntered=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onEntered",0,n)},t.handleExit=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onExit",1,n)},t.handleExiting=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onExiting",1,n)},t.handleExited=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onExited",1,n)},t}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var s=a.prototype;return s.handleLifecycle=function(e,t,n){var i,a=this.props.children,s=r.default.Children.toArray(a)[t];s.props[e]&&(i=s.props)[e].apply(i,n),this.props[e]&&this.props[e]((0,o.findDOMNode)(this))},s.render=function(){var e=this.props,t=e.children,n=e.in,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,["children","in"]),a=r.default.Children.toArray(t),s=a[0],l=a[1];return delete o.onEnter,delete o.onEntering,delete o.onEntered,delete o.onExit,delete o.onExiting,delete o.onExited,r.default.createElement(i.default,o,n?r.default.cloneElement(s,{key:"first",onEnter:this.handleEnter,onEntering:this.handleEntering,onEntered:this.handleEntered}):r.default.cloneElement(l,{key:"second",onEnter:this.handleExit,onEntering:this.handleExiting,onEntered:this.handleExited}))},a}(r.default.Component);s.propTypes={};var l=s;t.default=l,e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.getChildMapping=o,t.mergeChildMappings=i,t.getInitialChildMapping=function(e,t){return o(e.children,function(n){return(0,r.cloneElement)(n,{onExited:t.bind(null,n),in:!0,appear:a(n,"appear",e),enter:a(n,"enter",e),exit:a(n,"exit",e)})})},t.getNextChildMapping=function(e,t,n){var s=o(e.children),l=i(t,s);return Object.keys(l).forEach(function(o){var i=l[o];if((0,r.isValidElement)(i)){var u=o in t,c=o in s,p=t[o],d=(0,r.isValidElement)(p)&&!p.props.in;!c||u&&!d?c||!u||d?c&&u&&(0,r.isValidElement)(p)&&(l[o]=(0,r.cloneElement)(i,{onExited:n.bind(null,i),in:p.props.in,exit:a(i,"exit",e),enter:a(i,"enter",e)})):l[o]=(0,r.cloneElement)(i,{in:!1}):l[o]=(0,r.cloneElement)(i,{onExited:n.bind(null,i),in:!0,exit:a(i,"exit",e),enter:a(i,"enter",e)})}}),l};var r=n(0);function o(e,t){var n=Object.create(null);return e&&r.Children.map(e,function(e){return e}).forEach(function(e){n[e.key]=function(e){return t&&(0,r.isValidElement)(e)?t(e):e}(e)}),n}function i(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,o=Object.create(null),i=[];for(var a in e)a in t?i.length&&(o[a]=i,i=[]):i.push(a);var s={};for(var l in t){if(o[l])for(r=0;r<o[l].length;r++){var u=o[l][r];s[o[l][r]]=n(u)}s[l]=n(l)}for(r=0;r<i.length;r++)s[i[r]]=n(i[r]);return s}function a(e,t,n){return null!=n[t]?n[t]:e.props[t]}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(6),a=n(935),s=n(2),l=n(8);var u=n(176),c=n(1198),p=n.n(c),d=n(5),f=n.n(d),h=n(29);function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var _,S=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":v(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};!function(e){e.hidePutativePassengers="0",e.showGermlineMutations="1",e.hideUnprofiledSamples="1.1",e.dataTypeSample="2",e.dataTypePatient="3"}(_||(_={}));var E=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=y(t).call(this,e))||"object"!==v(o)&&"function"!=typeof o?g(r):o).driverSettingsState=function(e){return Object(s.observable)({get distinguishDrivers(){return e.props.store.driverAnnotationSettings.driversAnnotated},get annotateDriversOncoKb(){return e.props.store.driverAnnotationSettings.oncoKb},get annotateDriversOncoKbDisabled(){return!l.b.serverConfig.show_oncokb},get annotateDriversOncoKbError(){return e.props.store.didOncoKbFailInOncoprint},get annotateDriversHotspots(){return e.props.store.driverAnnotationSettings.hotspots},get annotateDriversHotspotsDisabled(){return!l.b.serverConfig.show_hotspot},get annotateDriversHotspotsError(){return e.props.store.didHotspotFailInOncoprint},get annotateDriversCBioPortal(){return e.props.store.driverAnnotationSettings.cbioportalCount},get annotateDriversCOSMIC(){return e.props.store.driverAnnotationSettings.cosmicCount},get hidePutativePassengers(){return e.props.store.driverAnnotationSettings.excludeVUS},get annotateCBioPortalInputValue(){return e.props.store.driverAnnotationSettings.cbioportalCountThreshold+""},get annotateCOSMICInputValue(){return e.props.store.driverAnnotationSettings.cosmicCountThreshold+""},get customDriverAnnotationBinaryMenuLabel(){var t=l.b.serverConfig.oncoprint_custom_driver_annotation_binary_menu_label,n=e.props.store.customDriverAnnotationReport.result;return t&&n&&n.hasBinary?t:void 0},get customDriverAnnotationTiersMenuLabel(){var t=l.b.serverConfig.oncoprint_custom_driver_annotation_tiers_menu_label,n=e.props.store.customDriverAnnotationReport.result;return t&&n&&n.tiers.length?t:void 0},get customDriverAnnotationTiers(){var t=e.props.store.customDriverAnnotationReport.result;return t&&t.tiers.length?t.tiers:void 0},get annotateCustomDriverBinary(){return e.props.store.driverAnnotationSettings.customBinary},get selectedCustomDriverAnnotationTiers(){return e.props.store.driverAnnotationSettings.driverTiers}})}(g(n)),n.driverSettingsHandlers=function(e,t){var n={onSelectDistinguishDrivers:Object(s.action)(function(n){n?(t.annotateDriversOncoKbDisabled||t.annotateDriversOncoKbError||(e.props.store.driverAnnotationSettings.oncoKb=!0),t.annotateDriversHotspotsDisabled||t.annotateDriversHotspotsError||(e.props.store.driverAnnotationSettings.hotspots=!0),e.props.store.driverAnnotationSettings.cbioportalCount=!0,e.props.store.driverAnnotationSettings.cosmicCount=!0,e.props.store.driverAnnotationSettings.customBinary=!0,e.props.store.driverAnnotationSettings.driverTiers.forEach(function(t,n){e.props.store.driverAnnotationSettings.driverTiers.set(n,!0)})):(e.props.store.driverAnnotationSettings.oncoKb=!1,e.props.store.driverAnnotationSettings.hotspots=!1,e.props.store.driverAnnotationSettings.cbioportalCount=!1,e.props.store.driverAnnotationSettings.cosmicCount=!1,e.props.store.driverAnnotationSettings.customBinary=!1,e.props.store.driverAnnotationSettings.driverTiers.forEach(function(t,n){e.props.store.driverAnnotationSettings.driverTiers.set(n,!1)}),e.props.store.driverAnnotationSettings.excludeVUS=!1)}),onSelectAnnotateOncoKb:Object(s.action)(function(t){e.props.store.driverAnnotationSettings.oncoKb=t}),onSelectAnnotateHotspots:Object(s.action)(function(t){e.props.store.driverAnnotationSettings.hotspots=t}),onSelectAnnotateCBioPortal:Object(s.action)(function(t){e.props.store.driverAnnotationSettings.cbioportalCount=t}),onSelectAnnotateCOSMIC:Object(s.action)(function(t){e.props.store.driverAnnotationSettings.cosmicCount=t}),onChangeAnnotateCBioPortalInputValue:Object(s.action)(function(t){e.props.store.driverAnnotationSettings.cbioportalCountThreshold=parseInt(t,10),n.onSelectAnnotateCBioPortal&&n.onSelectAnnotateCBioPortal(!0)}),onChangeAnnotateCOSMICInputValue:Object(s.action)(function(t){e.props.store.driverAnnotationSettings.cosmicCountThreshold=parseInt(t,10),n.onSelectAnnotateCOSMIC&&n.onSelectAnnotateCOSMIC(!0)}),onSelectCustomDriverAnnotationBinary:Object(s.action)(function(t){e.props.store.driverAnnotationSettings.customBinary=t}),onSelectCustomDriverAnnotationTier:Object(s.action)(function(t,n){e.props.store.driverAnnotationSettings.driverTiers.set(t,n)}),onSelectHidePutativePassengers:function(t){e.props.store.driverAnnotationSettings.excludeVUS=t}};return n}(g(n),n.driverSettingsState),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,r["Component"]),n=t,(o=[{key:"onInputClick",value:function(e){switch(e.target.value){case _.hidePutativePassengers:this.props.store.driverAnnotationSettings.excludeVUS=!this.props.store.driverAnnotationSettings.excludeVUS;break;case _.hideUnprofiledSamples:this.props.store.setHideUnprofiledSamples(!this.props.store.hideUnprofiledSamples);break;case _.showGermlineMutations:this.props.store.setExcludeGermlineMutations(!this.props.store.excludeGermlineMutations);break;case _.dataTypeSample:this.props.store.setOncoprintAnalysisCaseType(h.b.SAMPLE);break;case _.dataTypePatient:this.props.store.setOncoprintAnalysisCaseType(h.b.PATIENT)}}},{key:"render",value:function(){return r.createElement("div",{"data-test":"GlobalSettingsDropdown",className:f()("cbioportal-frontend",p.a.globalSettingsDropdown),style:{padding:5}},r.createElement("h5",{style:{marginTop:"auto",marginBottom:"auto"}},"Annotate Data"),r.createElement(u.a,{divStyle:{display:"inline-block",marginLeft:6},style:{color:"rgb(54, 134, 194)"},tooltip:r.createElement("span",null,"Putative driver vs VUS setings apply to every tab except"," ",(e=["Co-expression","CN Segments"],r.createElement("span",null,e.map(function(t,n){return r.createElement("span",null,r.createElement("strong",null,t),n<e.length-1?", ":"")}))))}),r.createElement("div",{style:{marginLeft:10}},r.createElement(a.a,{state:this.driverSettingsState,handlers:this.driverSettingsHandlers})),r.createElement("hr",null),r.createElement("h5",{style:{marginTop:"auto",marginBottom:"auto"}},"Filter Data"),r.createElement("div",{style:{marginLeft:10}},r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{"data-test":"HideVUS",type:"checkbox",value:_.hidePutativePassengers,checked:this.props.store.driverAnnotationSettings.excludeVUS,onClick:this.onInputClick,disabled:!this.driverSettingsState.distinguishDrivers})," ","Exclude mutations and copy number alterations of unknown significance")),r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{"data-test":"HideGermline",type:"checkbox",value:_.showGermlineMutations,checked:this.props.store.excludeGermlineMutations,onClick:this.onInputClick})," ","Exclude germline mutations")),r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{"data-test":"HideUnprofiled",type:"checkbox",value:_.hideUnprofiledSamples,checked:this.props.store.hideUnprofiledSamples,onClick:this.onInputClick})," ","Exclude samples that are not profiled for all queried genes in all queried profiles"))));var e}}])&&m(n.prototype,o),i&&m(n,i),t}();S([i.default],E.prototype,"onInputClick",null),E=S([o.observer],E);t.a=E},function(e,t,n){"use strict";var r=n(0),o=n(1),i=n(14),a=n(377),s=n(2),l=n(9),u=n(6);var c=n(5),p=n.n(c),d=n(23),f=n(192),h=n(15),m=n(3),y=n(965),g=n(20),b=n(175),v=n(102),_=n.n(v),S=n(1095);function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",function(){return j});var T=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":k(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},P=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};function x(e){return o.round(100*e,2)}function A(e){var t=e[0].map(function(e){return e.x}),n=e.reduce(function(e,t){return t.forEach(function(t){e[t.x]=e[t.x]||0,e[t.x]+=t.y}),e},{});return t.map(function(e){return{x:e,y:n[e],alterationType:"whatever"}})}var j=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=w(this,O(t).call(this,e))).barToolTipCounter=0,n.isBarPlotTooltipHovered=!1,n.shouldUpdatePosition=!1,n.mousePosition={x:0,y:0},n}var n,s,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(t,r["Component"]),n=t,(s=[{key:"tooltipMouseEnter",value:function(){this.isBarPlotTooltipHovered=!0}},{key:"tooltipMouseLeave",value:function(){this.isBarPlotTooltipHovered=!1,this.barPlotTooltipModel=null}},{key:"queryStudy",value:function(e){return P(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.props.gene!=S.a&&(n=this.props.gene),this.props.handleStudyLinkout&&this.props.handleStudyLinkout(e,n);case 2:case"end":return t.stop()}},t,this)}))}},{key:"formatStudyLink",value:function(e){return _.a.format({pathname:"/"+b.a.Study,query:{id:e}})}},{key:"onMouseMove",value:function(e){this.shouldUpdatePosition&&(this.mousePosition.x=e.pageX,this.mousePosition.y=e.pageY)}},{key:"barWidth",value:function(){return 20}},{key:"barSeparation",value:function(){return 8}},{key:"tickFormat",value:function(){return this.props.isPercentage?function(e){return"".concat(e,"%")}:function(e){return e}}},{key:"domainPadding",value:function(){return 20}},{key:"categoryAxisDomainPadding",value:function(){return this.domainPadding()}},{key:"countAxisDomainPadding",value:function(){return this.domainPadding()}},{key:"chartDomainPadding",value:function(){return{y:this.countAxisDomainPadding(),x:this.categoryAxisDomainPadding()}}},{key:"barChartHeight",value:function(){return 400}},{key:"getData",value:function(e){var t=this.convertDataToDownloadData(this.props.data);return Object(a.b)([[this.props.xAxisString,this.yAxisLabel,"Alteration Type"]].concat(t))}},{key:"convertDataToDownloadData",value:function(e){for(var t=[],n=e.length,r=e[0].length,o=0;o<r;o++)for(var i=0;i<n;i++)0!=e[i][o].y&&t.push([e[i][o].x,e[i][o].y.toString(),e[i][o].alterationType]);return t}},{key:"getChart",value:function(){var e=this;return r.createElement("div",{style:this.overflowStyle,className:"borderedChart"},r.createElement("div",{style:{overflowX:"auto",overflowY:"hidden"}},r.createElement("svg",{style:{width:this.svgWidth,height:this.svgHeight,pointerEvents:"all"},height:this.svgHeight,width:this.svgWidth,role:"img",viewBox:"0 0 ".concat(this.svgWidth," ").concat(this.svgHeight),ref:function(t){return e.svg=t},onMouseMove:this.onMouseMove},r.createElement("g",{transform:"translate(".concat(this.leftPadding,", 0)")},r.createElement(i.VictoryChart,{theme:m.a,width:this.chartWidth,height:this.barChartHeight(),standalone:!1,domainPadding:this.chartDomainPadding(),singleQuadrantDomainPadding:{y:!0,x:!1}},r.createElement(i.VictoryAxis,{dependentAxis:!0,axisLabelComponent:r.createElement(i.VictoryLabel,{dy:-50}),label:this.yAxisLabel,tickFormat:this.tickFormat,offsetX:50,orientation:"left"}),r.createElement(i.VictoryAxis,{tickValues:this.props.xLabels,style:{ticks:{size:0,strokeWidth:0},tickLabels:{fontSize:0},grid:{stroke:0}}}),r.createElement(i.VictoryStack,{colorScale:this.colorArray},this.barPlots),!this.props.hideGenomicAlterations&&r.createElement(i.VictoryLegend,{x:10,y:this.svgHeight-30,orientation:"horizontal",data:this.legendData}))),r.createElement("g",{transform:"translate(".concat(this.leftPadding,", ").concat(this.scatterPlotTopPadding,")")},r.createElement(i.VictoryChart,{theme:m.a,width:this.chartWidth,height:this.scatterChartHeight,standalone:!1,domainPadding:this.chartDomainPadding(),singleQuadrantDomainPadding:{y:!0,x:!1}},r.createElement(i.VictoryAxis,{orientation:"bottom",crossAxis:!1,tickValues:this.props.xLabels,style:{axis:{strokeWidth:0},ticks:{size:0,strokeWidth:0},grid:{stroke:0}},tickLabelComponent:r.createElement(i.VictoryLabel,{angle:50,verticalAnchor:"start",textAnchor:"start"})}),r.createElement(i.VictoryAxis,{orientation:"left",dependentAxis:!0,crossAxis:!1,style:{axis:{strokeWidth:0},ticks:{size:0,strokeWidth:0},grid:{stroke:0}}}),r.createElement(i.VictoryScatter,{size:this.barWidth()/5,style:{data:{fill:"black",cursor:function(e){return e.cursor}}},data:this.scatterData,events:this.scatterPlotMouseEvents}))))),r.createElement(m.e,{getSvg:function(){return e.svg},getData:this.getData,filename:"cancer_types_summary",dontFade:!0,type:"button",buttons:["SVG","PNG","PDF","Data"],style:{position:"absolute",top:10,right:10}}))}},{key:"render",value:function(){return r.createElement("div",{"data-test":"cancerTypeSummaryChart"},r.createElement(l.Observer,null,this.getChart),this.scatterPlotTooltipComponent,this.barPlotTooltipComponent)}},{key:"scatterPlotTooltipComponent",get:function(){if(this.scatterPlotTooltipModel){var e=this.scatterPlotTooltipModel.datum.profiledCount,t="Not profiled";e>0&&(t="".concat(e," ").concat(Object(m.S)("sample",e),"  profiled"));var n=this.mousePosition.x>f.a.size.width-400?"left":"right";return d.createPortal(r.createElement(h.Popover,{arrowOffsetTop:y.b,className:p()("cbioportal-frontend","cbioTooltip"),positionLeft:this.mousePosition.x+("left"===n?-y.a:y.a),positionTop:this.mousePosition.y-y.b,style:{transform:"left"===n?"translate(-100%,0%)":void 0,maxWidth:400},placement:n},r.createElement("div",{style:{whiteSpace:"normal"}},t)),document.body)}return null}},{key:"barPlotTooltipComponent",get:function(){var e=this;if(this.barPlotTooltipModel){var t=this.barPlotTooltipModel,n=this.mousePosition.x>f.a.size.width-400?"left":"right";return d.createPortal(r.createElement(h.Popover,{onMouseLeave:this.tooltipMouseLeave,onMouseEnter:this.tooltipMouseEnter,arrowOffsetTop:y.b,className:p()("cbioportal-frontend","cbioTooltip"),positionLeft:this.mousePosition.x+("left"===n?-y.a:y.a),positionTop:this.mousePosition.y-y.b,style:{transform:"left"===n?"translate(-100%,0%)":void 0,maxWidth:400},placement:n},r.createElement("div",null,r.createElement(g.If,{condition:this.props.showLinks},r.createElement(g.Then,null,r.createElement("strong",null,r.createElement("a",{href:this.formatStudyLink(t.studyId),target:"_blank"},t.groupName," ",r.createElement("i",{className:"fa fa-external-link",style:{fontWeight:"bold"}})))),r.createElement(g.Else,null,r.createElement("strong",null,"Summary for ",t.groupName))),r.createElement("p",null,"Gene altered in"," ",x(t.alterationData.alteredSampleCount/t.alterationData.profiledSampleTotal),"% of"," ",t.alterationData.profiledSampleTotal," ","cases"),r.createElement("table",{className:"table table-striped"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"Alteration"),r.createElement("th",null,"Frequency"))),r.createElement("tbody",null,o.reduce(this.props.alterationTypes,function(e,n,o){if(o in t.alterationData.alterationTypeCounts&&t.alterationData.alterationTypeCounts[o]>0){var i=t.alterationData.alterationTypeCounts[o];e.push(r.createElement("tr",null,r.createElement("td",null,n),r.createElement("td",null,x(t.alterationData.alterationTypeCounts[o]/t.alterationData.profiledSampleTotal),"% (",i," ",Object(m.S)("case",i),")")))}return e},[]).reverse())),r.createElement(g.If,{condition:this.props.showLinks},r.createElement("div",{className:"btn btn-primary btn-xs",onClick:function(){e.queryStudy(t.studyId)}},"Query this study",this.props.gene==S.a?"":" for ".concat(this.props.gene))))),document.body)}return null}},{key:"svgWidth",get:function(){return this.chartWidth+this.rightPadding+this.leftPadding}},{key:"chartWidth",get:function(){return this.props.xLabels.length*(this.barWidth()+this.barSeparation())+100}},{key:"svgHeight",get:function(){return this.barChartHeight()+this.scatterChartHeight+this.bottomPadding-100}},{key:"rightPadding",get:function(){return Math.max(200,this.legendWidth-this.chartWidth+20)}},{key:"legendWidth",get:function(){var e=this.legendData.map(function(e){return e.name});return 6*e.join("").length+40*e.length}},{key:"leftPadding",get:function(){return 50}},{key:"bottomPadding",get:function(){return 5*(e=this.props.xLabels,t=e.map(function(e){var t=e.match(/[A-Z]/g)||[],n=e.match(/[a-z]/g)||[],r=e.match(/\s/g)||[],o=e.length-t.length-n.length-r.length;return 2*t.length+1*n.length+2*r.length+1*o}),o.max(t)||0)+40;var e,t}},{key:"colorArray",get:function(){var e=this;return o.map(this.props.alterationTypes,function(t,n){return e.props.colors[n]})}},{key:"legendData",get:function(){var e=this;return o.reduce(this.props.alterationTypes,function(t,n,r){return r in e.props.representedAlterations&&t.push({name:n,symbol:{fill:e.props.colors[r]}}),t},[]).reverse()}},{key:"yAxisLabel",get:function(){return this.props.isPercentage?"Alteration Frequency":"Absolute Counts"}},{key:"barPlotEvents",get:function(){var e=this;return[{target:"data",eventHandlers:{onMouseEnter:function(){return[{target:"data",mutation:function(t){e.shouldUpdatePosition=!0,t.datum.xKey in e.props.countsByGroup?(e.barPlotTooltipModel=Object.assign(Object.assign({},t),{groupName:t.datum.x,alterationData:e.props.countsByGroup[t.datum.xKey],studyId:t.datum.xKey}),e.barToolTipCounter++):e.barPlotTooltipModel=null}}]},onMouseLeave:function(){return[{target:"data",mutation:function(){e.shouldUpdatePosition=!1,setTimeout(function(){e.isBarPlotTooltipHovered||1!==e.barToolTipCounter||(e.barPlotTooltipModel=null),e.barToolTipCounter--},100)}}]}}}]}},{key:"scatterPlotMouseEvents",get:function(){var e=this;return[{target:"data",eventHandlers:{onMouseOver:function(){return[{target:"data",mutation:function(t){t.datum&&(e.scatterPlotTooltipModel=t)}}]},onMouseOut:function(){return[{target:"data",mutation:function(){e.scatterPlotTooltipModel=null}}]},onMouseEnter:function(){return[{target:"data",mutation:function(){e.shouldUpdatePosition=!0}}]},onMouseLeave:function(){return[{target:"data",mutation:function(){e.shouldUpdatePosition=!1}}]}}}]}},{key:"overflowStyle",get:function(){return{position:"relative",display:"inline-block",width:this.props.xLabels.length>37?"100%":"auto"}}},{key:"scatterChartHeight",get:function(){var e=o.uniqBy(this.scatterData,function(e){return e.y}).length;return e>0?e*(this.barWidth()+this.barSeparation())+100:100}},{key:"scatterPlotTopPadding",get:function(){return this.barChartHeight()-100}},{key:"scatterData",get:function(){return o.map(this.props.alterationTypeDataCounts,function(e){return Object.assign(Object.assign({},e),{symbol:e.profiledCount>0?"plus":"minus"})})}},{key:"barPlots",get:function(){var e=this;return(this.props.hideGenomicAlterations?[A(this.props.data)]:this.props.data).map(function(t,n){return r.createElement(i.VictoryBar,{style:{data:{width:e.barWidth}},events:e.barPlotEvents,data:t,key:n})})}}])&&E(n.prototype,s),u&&E(n,u),t}();T([s.observable.ref],j.prototype,"barPlotTooltipModel",void 0),T([s.observable.ref],j.prototype,"scatterPlotTooltipModel",void 0),T([s.observable],j.prototype,"barToolTipCounter",void 0),T([s.observable],j.prototype,"isBarPlotTooltipHovered",void 0),T([s.observable],j.prototype,"shouldUpdatePosition",void 0),T([s.observable],j.prototype,"mousePosition",void 0),T([u.default,s.action],j.prototype,"tooltipMouseEnter",null),T([u.default,s.action],j.prototype,"tooltipMouseLeave",null),T([s.computed],j.prototype,"scatterPlotTooltipComponent",null),T([s.computed],j.prototype,"barPlotTooltipComponent",null),T([u.default,s.action],j.prototype,"onMouseMove",null),T([u.default],j.prototype,"tickFormat",null),T([s.computed],j.prototype,"scatterChartHeight",null),T([s.computed],j.prototype,"scatterPlotTopPadding",null),T([s.computed],j.prototype,"scatterData",null),T([s.computed],j.prototype,"barPlots",null),T([u.default],j.prototype,"getData",null),T([u.default],j.prototype,"convertDataToDownloadData",null),T([u.default],j.prototype,"getChart",null),j=T([l.observer],j)}])]);