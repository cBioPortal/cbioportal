(self.webpackChunkcbioportal_frontend=self.webpackChunkcbioportal_frontend||[]).push([[28],{94916:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(88034),o=n(27808);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},f=function(e){function t(){return a(this,t),i(this,s(t).apply(this,arguments))}var n,o,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){return r.createElement("span",null,"Queries are limited by gene and sample count. The product of the query's gene and sample count must be less than"," ",this.props.queryProductLimit.toLocaleString(),". You have selected ",this.props.sampleCount.toLocaleString()," samples, so you can have no more than"," ",Math.floor(this.props.queryProductLimit/this.props.sampleCount).toLocaleString()," ","genes in your query. Please"," ",r.createElement("a",{style:{color:"#ccc"},href:"mailto:".concat(this.props.email)},"let us know")," ","your use case(s) if you need to query more than that.")}}])&&l(n.prototype,o),u&&l(n,u),t}(r.Component);const d=f=p([o.observer],f)},39013:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_a});var r=n(88034),o=n(14759),a=n.n(o),l=n(27808),i=n(57930),s=n.n(i),c=n(56066),u=n.n(c),p=n(4831),f=n.n(p),d=n(76127),y=n.n(d);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}function v(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var _=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function O(e,t){var n=e.padded,o=e.overflow,a=e.flex,l=_(e,["padded","overflow","flex"]),i=Object.assign(Object.assign({flex:a,display:"flex",overflow:o?"visible":"auto"},e.style),{flexDirection:t}),s=y()(e.className,f()[t],n&&f().padded);return r.createElement("div",w({},l,{style:i,className:s}))}var C=function(e){function t(){return h(this,t),v(this,S(t).apply(this,arguments))}return P(t,e),g(t,[{key:"render",value:function(){return O(this.props,"row")}}]),t}(r.Component),T=function(e){function t(){return h(this,t),v(this,S(t).apply(this,arguments))}return P(t,e),g(t,[{key:"render",value:function(){return O(this.props,"column")}}]),t}(r.Component),k=n(69858),D=n(8506),j=n.n(D),N=n(99666),A=n(78566),I=n(62524),R=n(13654),x=n(65587),M=n(23280),L=n(19298),G=n(67145),B=n(36903),F=n(35286),V=n.n(F),H=n(82616),K=n(26942);function Q(e){return null!==e.match(/[{][$][^}]*[}]/g)}function U(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e,t,n){return t&&Z(e.prototype,t),n&&Z(e,n),e}function W(e,t){return!t||"object"!==$(t)&&"function"!=typeof t?z(e):t}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ee,te=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":$(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},ne=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function l(e){try{s(r.next(e))}catch(e){a(e)}}function i(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}s((r=r.apply(e,t||[])).next())}))};!function(e){e[e.INFO_ICON=0]="INFO_ICON",e[e.LOCK_ICON=1]="LOCK_ICON"}(ee||(ee={}));var re=function(e){function t(e){var n;return U(this,t),n=W(this,Y(t).call(this,e)),Object.defineProperty(z(n),"studyMetadata",{enumerable:!0,configurable:!0,writable:!0,value:(0,x.$w)({invoke:function(){return ne(z(n),void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G.Z.getTagsUsingGET({studyId:this.props.studyId}));case 1:case"end":return e.stop()}}),e,this)})))},onError:function(e){console.error("Error on getting study tags.",e)}})}),(0,A.makeObservable)(z(n)),n}return X(t,e),q(t,[{key:"addHTMLDescription",value:function(e){return{__html:e}}},{key:"render",value:function(){var e="";if(this.props.isVirtualStudy)e=r.createElement("div",{dangerouslySetInnerHTML:this.addHTMLDescription(this.props.studyDescription)});else if(this.studyMetadata.isPending)e=r.createElement(B.Z,{isLoading:!0});else if(this.studyMetadata.isComplete){var t=Object.keys(this.studyMetadata.result).length,o=r.createElement("div",{dangerouslySetInnerHTML:this.addHTMLDescription(this.props.studyDescription)});if(this.props.iconType===ee.INFO_ICON)e=t>0?[o,r.createElement("br",null),r.createElement("div",{className:"studyTagsTooltip"}," ",r.createElement(L._,{json:this.studyMetadata.result}))]:o;else{var a=function(e,t){var r=e.match(/[{][$][^}]*[}]/g);if(null!==r){var o=n(94545);r.forEach((function(n){var r=o.query(t,n.replace(/["'{}]/g,""));0!==r.length&&(e=e.replace(n,r))}))}return e}((0,K.Ib)().skin_home_page_unauthorized_studies_global_message,this.studyMetadata.result);e=Q(a)?H.Z.skin_home_page_unauthorized_studies_global_message:r.createElement("div",{style:{maxWidth:300},dangerouslySetInnerHTML:this.addHTMLDescription(a.toString())})}}else this.studyMetadata.isError&&(e="error");return e}}]),t}(r.Component);te([A.observable],re.prototype,"studyMetadata",void 0),re=te([l.observer],re);var oe=function(e){function t(){return U(this,t),W(this,Y(t).apply(this,arguments))}return X(t,e),q(t,[{key:"renderTooltip",value:function(){return r.createElement(x.ZD,{mouseEnterDelay:this.props.mouseEnterDelay,placement:this.props.placement,overlay:this.props.iconType===ee.LOCK_ICON&&!1===Q((0,K.Ib)().skin_home_page_unauthorized_studies_global_message)?r.createElement("div",{className:V().tooltip},(0,K.Ib)().skin_home_page_unauthorized_studies_global_message):r.createElement(re,{studyDescription:this.props.studyDescription,studyId:this.props.studyId,isVirtualStudy:this.props.isVirtualStudy,iconType:this.props.iconType}),children:this.props.children})}},{key:"render",value:function(){return this.renderTooltip()}}]),t}(r.Component);const ae=oe=te([l.observer],oe);var le=n(85537);function ie(){return(ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pe(e,t,n){return t&&ue(e.prototype,t),n&&ue(e,n),e}function fe(e,t){return!t||"object"!==be(t)&&"function"!=typeof t?ye(e):t}function de(e){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ye(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function me(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&he(e,t)}function he(e,t){return(he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function be(e){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ge=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":be(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},ve=Object.assign(Object.assign({},k),{Level:function(e){return k["Level".concat(e)]}}),Se=function(e){function t(){var e;return ce(this,t),e=fe(this,de(t).apply(this,arguments)),Object.defineProperty(ye(e),"_view",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(ye(e),"renderCancerType",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=e.logic.getDepth(t),i=e.view.getChildCancerTypes(t),c=e.view.getChildCancerStudies(t),u=e.logic.cancerTypeListView.getDescendantCancerStudies(t).map((function(e){return e.studyId}));if(t!=e.rootCancerType){var p=y()(ve.CancerType,ve.Level(l));3===l&&(o=r.createElement(j(),{className:ve.indentArrow,name:"long-arrow-right"})),n=r.createElement("li",{className:p},r.createElement(Ee,{view:e.view,node:t},o,r.createElement("span",null,t.name),!e.store.forDownloadTab&&r.createElement("span",{className:ve.SelectAll},s().intersection(u,e.store.selectableSelectedStudyIds).length?"Deselect All":"Select All")))}var f=y()(ve.StudyList,ve.Level(l));return r.createElement("ul",{key:a,className:f},n,c.map(e.renderCancerStudy),i.map(e.renderCancerType))}}),Object.defineProperty(ye(e),"renderCancerStudy",{enumerable:!0,configurable:!0,writable:!0,value:function(t,n){var o=y()(ve.Study),a=t.studyId in e.store.getOverlappingStudiesMap,i=a?r.createElement(x.ZD,{mouseEnterDelay:0,placement:"top",overlay:r.createElement("div",null,"This study has overlapping data with another selected study.")},r.createElement("i",{className:"fa fa-exclamation-triangle"})):null,c=s().includes(e.store.selectableSelectedStudyIds,t.studyId)&&e.store.isMixedReferenceGenome,u=c?r.createElement(x.ZD,{mouseEnterDelay:0,placement:"top",overlay:r.createElement("div",null,"You are combining studies with molecular data based on both GRCh37/hg19 and GRCh38/hg38. This is not fully supported yet. Please double check your findings")},r.createElement("span",null,r.createElement("i",{className:"fa fa-exclamation-triangle"})," ",(0,le.K7)(t.referenceGenome))):null;return r.createElement("li",{key:n,className:o,"data-test":e.store.isVirtualStudy(t.studyId)?"VirtualStudySelect":"StudySelect"},r.createElement(l.Observer,null,(function(){var n,o=y()((se(n={},ve.StudyName,!0),se(n,"overlappingStudy",a||c),se(n,ve.DeletedStudy,e.store.isDeletedVirtualStudy(t.studyId)),se(n,"studyItem_".concat(t.studyId),!0),se(n,ve.UnauthorizedStudy,(0,K.Ib)().skin_home_page_show_unauthorized_studies&&!1===t.readPermission),n));return r.createElement(Ee,{view:e.view,node:t},r.createElement("span",{className:o},t.name,i,u))})),r.createElement(l.Observer,null,(function(){return r.createElement("div",{className:ve.StudyMeta},!e.store.isDeletedVirtualStudy(t.studyId)&&e.renderSamples(t),e.renderStudyLinks(t))})))}}),Object.defineProperty(ye(e),"renderSamples",{enumerable:!0,configurable:!0,writable:!0,value:function(e){return r.createElement("span",{className:ve.StudySamples},"".concat(e.allSampleCount," samples"))}}),Object.defineProperty(ye(e),"renderStudyLinks",{enumerable:!0,configurable:!0,writable:!0,value:function(t){if(e.store.isDeletedVirtualStudy(t.studyId))return r.createElement(x.ZD,{mouseEnterDelay:0,placement:"top",overlay:r.createElement("div",{className:ve.tooltip},"Restore study"),children:r.createElement("button",{className:"btn btn-default btn-xs",onClick:function(){return e.store.restoreVirtualStudy(t.studyId)},style:{lineHeight:"80%"},"data-test":"virtualStudyRestore"},"Restore")});var n=[{icon:"info-circle",tooltip:""}];return e.store.isVirtualStudy(t.studyId)?n.push({icon:"trash",tooltip:"Delete this virtual study.",onClick:function(){return e.store.deleteVirtualStudy(t.studyId)}}):n.push({icon:"book",onClick:t.pmid&&(0,I.QY)(t.pmid),tooltip:t.pmid&&"PubMed"}),r.createElement("span",{className:ve.StudyLinks},n.map((function(n,o){var a,l=r.createElement(j(),{key:o,name:n.icon,className:y()((a={},se(a,ve.icon,!0),se(a,ve.iconWithTooltip,!!n.tooltip),se(a,ve.trashIcon,"trash"===n.icon),se(a,ve.infoCircleIcon,"info-circle"===n.icon),a))});if(n.onClick){var i={key:o};"string"==typeof n.onClick?(i.href=n.onClick,i.target="_blank"):i.onClick=n.onClick,l=r.createElement("a",i,l)}if(n.tooltip){var s=r.createElement("div",{className:ve.tooltip,dangerouslySetInnerHTML:{__html:n.tooltip}});l=r.createElement(x.ZD,{key:o,mouseEnterDelay:0,placement:"top",overlay:s,children:l})}return"info-circle"===n.icon&&(l=r.createElement(ae,{key:o,studyDescription:e.store.isVirtualStudy(t.studyId)?t.description.replace(/\r?\n/g,"<br />"):t.description,studyId:t.studyId,isVirtualStudy:e.store.isVirtualStudy(t.studyId),mouseEnterDelay:0,placement:"top",iconType:ee.INFO_ICON},r.createElement("a",null,l))),l})),t.studyId&&r.createElement(x.ZD,{mouseEnterDelay:0,placement:"top",overlay:r.createElement("div",{className:ve.tooltip},"View clinical and genomic data of this study")},r.createElement("span",null,r.createElement(M._,{studyId:t.studyId,className:y()(ve.summaryIcon,"ci ci-pie-chart")}))),(0,K.Ib)().skin_home_page_show_unauthorized_studies&&t.studyId&&!1===t.readPermission&&r.createElement(ae,{key:0,studyDescription:e.store.isVirtualStudy(t.studyId)?t.description.replace(/\r?\n/g,"<br />"):t.description,studyId:t.studyId,isVirtualStudy:e.store.isVirtualStudy(t.studyId),mouseEnterDelay:0,placement:"top",iconType:ee.LOCK_ICON},r.createElement("span",null,r.createElement("i",{className:"fa fa-lock"}))))}}),e}return me(t,e),pe(t,[{key:"componentDidMount",value:function(){this.props.showSelectedStudiesOnly&&(this._view=this.view)}},{key:"render",value:function(){var e=this,t=this.renderCancerType(this.rootCancerType);return this.props.showSelectedStudiesOnly?r.createElement("div",{className:ve.SelectedStudyList},r.createElement("span",{className:ve.deselectAll,onClick:function(){e.view.onCheck(e.store.treeData.rootCancerType,!1),e.store.showSelectedStudiesOnly=!1}},"Deselect all"),t):t}},{key:"view",get:function(){return this._view||(this.props.showSelectedStudiesOnly?this.logic.selectedStudiesView:this.logic.mainView)}},{key:"logic",get:function(){return this.store.studyListLogic}},{key:"rootCancerType",get:function(){return this.store.treeData.rootCancerType}}]),t}(R.cx);const Pe=Se=ge([l.observer],Se);var Ee=function(e){function t(e){var n;return ce(this,t),n=fe(this,de(t).call(this,e)),(0,A.makeObservable)(ye(n)),n}return me(t,e),pe(t,[{key:"render",value:function(){var e=this;return r.createElement(N.Z,ie({},this.checkboxProps,{onChange:function(t){e.props.view.onCheck(e.props.node,t.target.checked)}}),this.props.children)}},{key:"checkboxProps",get:function(){return this.props.view.getCheckboxProps(this.props.node)}}]),t}(R.cx);ge([A.computed.struct],Ee.prototype,"checkboxProps",null),Ee=ge([l.observer],Ee);var we=n(31824),_e=n(84479),Oe=n.n(_e),Ce=n(59280),Te=n(85062),ke=n.n(Te),De=n(68084),je=n.n(De);function Ne(e){return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(){return(Ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xe(e,t){return!t||"object"!==Ne(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Me(e){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Le(e,t){return(Le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ge=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},Be=function(e){function t(){return Ie(this,t),xe(this,Me(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Le(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.error,n=e.children,o=e.className,a=Ge(e,["error","children","className"]);return r.createElement("div",Ae({className:y()(o,je().error)},a),r.createElement("span",{className:je().message},r.createElement(j(),{className:je().icon,name:"exclamation-circle"}),t.message+""),n)}}])&&Re(n.prototype,o),a&&Re(n,a),t}(r.Component);function Fe(){return(Fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function He(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ke(e,t){return!t||"object"!==Ze(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qe(e){return(Qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ue(e,t){return(Ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ze(e){return(Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var qe=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Ze(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},We=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},Ye=function(e){function t(){return Ve(this,t),Ke(this,Qe(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ue(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.promises,n=e.children,o=e.className,a=e.secondaryComponent,l=We(e,["promises","children","className","secondaryComponent"]);return r.createElement("div",Fe({className:y()(o,ke().SectionHeader)},l),r.createElement("h2",null,n,!(!t||!t.some((function(e){return e.isPending})))&&r.createElement(B.Z,{isLoading:!0,size:"small"})),!!a&&a,t&&t.map((function(e){return!!e.error&&r.createElement(Be,{className:ke().error,error:e.error})})))}}])&&He(n.prototype,o),a&&He(n,a),t}(r.Component);const ze=Ye=qe([l.observer],Ye);var Xe=n(79280),Je=n(36839),$e=n(7714);function et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var l,i=e[Symbol.iterator]();!(r=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function tt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rt(e,t){return!t||"object"!==lt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ot(e){return(ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function at(e,t){return(at=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lt(e){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var it=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":lt(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},st=function(e){function t(){return tt(this,t),rt(this,ot(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&at(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){var e=this;return r.createElement("div",null,"Quick select: ",s().map(this.props.buttonsConfig,(function(t,n){var o=et(n.split("|"),2),a=o[0],l=o[1],i=r.createElement("button",{"data-test":"selectPanCan",className:"btn btn-default btn-xs",onClick:function(){return e.props.onSelect(t)}},a),s=r.createElement("span",{style:{display:"inline-block",width:"300px"}},l||"");return l?r.createElement(x.ZD,{overlay:s},i):i})))}}])&&nt(n.prototype,o),a&&nt(n,a),t}(r.Component);const ct=st=it([l.observer],st);var ut=(0,l.observer)((function(e){return e.store.cancerTypes.isPending||e.store.cancerStudies.isPending||e.store.profiledSamplesCount.isPending?r.createElement(B.Z,{isLoading:!0,size:"small",center:!1}):r.createElement(l.Observer,null,(function(){var t=(0,we.expr)((function(){return e.store.selectableSelectedStudyIds.length}));return r.createElement(r.Fragment,null,r.createElement("a",{onClick:function(){t&&(e.store.showSelectedStudiesOnly=!e.store.showSelectedStudiesOnly)}},r.createElement("b",null,t)," ",1===t?"study":"studies"," ","selected (",r.createElement("b",null,e.store.sampleCountForSelectedStudies)," ","samples)"),e.store.selectableSelectedStudies.length>0&&r.createElement("a",{"data-test":"globalDeselectAllStudiesButton",style:{marginLeft:10},onClick:function(){return e.store.studyListLogic.mainView.clearAllSelection()}},"Deselect all"))}))})),pt=n(64577),ft=n(77906);function dt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mt(e){return(mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ht(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bt(e,t){return(bt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gt(e){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var vt=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":gt(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},St=function(e){function t(e){var n,o=this;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==gt(t)&&"function"!=typeof t?ht(e):t}(this,mt(t).call(this,e)),Object.defineProperty(ht(n),"handlers",{enumerable:!0,configurable:!0,writable:!0,value:{onSummaryClick:function(){n.store.openSummary()},onCheckAllFiltered:function(){n.logic.mainView.toggleAllFiltered()},onClearFilter:function(){n.store.setSearchText("")}}}),Object.defineProperty(ht(n),"store",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(ht(n),"CancerTypeList",{enumerable:!0,configurable:!0,writable:!0,value:(0,l.observer)((function(){var e=n.logic.cancerTypeListView.getChildCancerTypes(n.store.treeData.rootCancerType);return r.createElement("ul",{className:a().cancerTypeList},e.map((function(e,t){return r.createElement(o.CancerTypeListItem,{key:t,cancerType:e})})))}))}),Object.defineProperty(ht(n),"CancerTypeListItem",{enumerable:!0,configurable:!0,writable:!0,value:(0,l.observer)((function(e){var t,o=e.cancerType,l=(0,we.expr)((function(){return n.logic.cancerTypeListView.getDescendantCancerStudies(o).length})),i=s().includes(n.store.selectedCancerTypeIds,o.cancerTypeId),c=n.logic.isHighlighted(o),u=y()((dt(t={},a().selectable,!0),dt(t,a().selected,i),dt(t,a().matchingNodeText,!!n.store.searchText&&c),dt(t,a().nonMatchingNodeText,!!n.store.searchText&&!c),dt(t,a().containsSelectedStudies,(0,we.expr)((function(){return n.logic.cancerTypeContainsSelectedStudies(o)}))),t));return r.createElement("li",{className:u,onMouseDown:n.getCancerTypeListClickHandler(o)},r.createElement("span",{className:a().cancerTypeListItemLabel},o.name),r.createElement("span",{className:a().cancerTypeListItemCount},l))}))}),Object.defineProperty(ht(n),"autosuggest",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(ht(n),"windowSizeDisposer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),(0,A.makeObservable)(ht(n)),n.store=n.props.queryStore,n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bt(e,t)}(t,e),n=t,(o=[{key:"getCancerTypeListClickHandler",value:function(e){var t=this;return function(n){return t.store.selectCancerType(e,n.ctrlKey)}}},{key:"selectTCGAPanAtlas",value:function(){this.logic.mainView.selectAllMatchingStudies($e._w)}},{key:"selectMatchingStudies",value:function(e){e&&(1===e.length&&/^\*.*\*$/.test(e[0])?this.logic.mainView.selectAllMatchingStudies(e[0].replace(/\*/g,"")):this.logic.mainView.selectAllMatchingStudies(e))}},{key:"componentDidMount",value:function(){var e,t=this;this.windowSizeDisposer=(0,A.reaction)((function(){return pt.Z.size}),(function(){t.props.forkedMode&&(clearTimeout(e),e=setTimeout((function(){return t.setListHeight()}),200))}),{fireImmediately:!0})}},{key:"componentWillUnmount",value:function(){this.windowSizeDisposer()}},{key:"setListHeight",value:function(){var e=ft(u().findDOMNode(this)),t=pt.Z.size.height-e.offset().top;t=t<200?200:t,e.css("height",t-75)}},{key:"render",value:function(){var e=this,t=this.logic.mainView.getSelectionReport(),n=t.shownStudies,o=t.shownAndSelectedStudies,i=this.logic.mainView.quickSelectButtons((0,K.Ib)().skin_quick_select_buttons);return r.createElement(T,{overflow:!0,"data-test":"studyList",className:a().CancerStudySelector},r.createElement(C,{overflow:!0,className:a().CancerStudySelectorHeader},r.createElement(ze,{promises:[this.store.cancerTypes,this.store.cancerStudies]},"Select Studies for Visualization & Analysis:"),this.store.selectableStudiesSet.isComplete&&r.createElement("div",null,r.createElement(ut,{store:this.store})),r.createElement(l.Observer,null,(function(){var t=K.v4.skin_example_study_queries((0,K.Ib)().skin_example_study_queries||"");e.store.searchText&&t.indexOf(e.store.searchText)<0&&(t=[e.store.searchText].concat(t));var n=null,o=t.map((function(e,t){return{value:e,sortKey:t}}));return r.createElement("div",{style:{display:"flex",alignItems:"center"}},e.store.searchText&&r.createElement("span",{"data-test":"clearStudyFilter",onClick:function(t){e.autosuggest.setState({inputValue:""}),e.handlers.onClearFilter()},style:{fontSize:18,cursor:"pointer",color:"#999999",position:"relative",left:164,zIndex:10}},"x"),r.createElement(Je.ZP,{datalist:o,ref:function(t){return e.autosuggest=t},placeholder:"Search...",bsSize:"small",onChange:function(t){null!==n&&(window.clearTimeout(n),n=null),n=window.setTimeout((function(){e.store.setSearchText(t)}),400)},onFocus:function(t){0===t.length&&setTimeout((function(){e.autosuggest.setState({open:!0})}),400)}}))}))),r.createElement(Ce.If,{condition:this.studiesDataComplete},r.createElement(C,{className:a().cancerStudySelectorBody},r.createElement(Ce.If,{condition:this.store.maxTreeDepth>0},r.createElement(Ce.Then,null,r.createElement("div",{className:a().cancerTypeListContainer},r.createElement(this.CancerTypeList,null)))),r.createElement("div",{className:a().cancerStudyListContainer,"data-test":"cancerTypeListContainer"},r.createElement("div",{className:"checkbox",style:{marginLeft:19}},r.createElement(Ce.If,{condition:n.length>0},r.createElement(Ce.If,{condition:!this.logic.mainView.isFiltered&&!s().isEmpty(i)},r.createElement(Ce.Then,null,r.createElement("div",{className:a().quickSelect},r.createElement(ct,{onSelect:this.selectMatchingStudies,buttonsConfig:i}))),r.createElement(Ce.Else,null,r.createElement("label",null,r.createElement("input",{type:"checkbox","data-test":"selectAllStudies",style:{top:-2},onClick:this.handlers.onCheckAllFiltered,checked:o.length===n.length}),r.createElement("strong",null,o.length===n.length?"Deselect all listed studies ".concat(n.length<this.store.cancerStudies.result.length?"matching filter":""," (").concat(n.length,")"):"Select all listed studies ".concat(n.length<this.store.cancerStudies.result.length?"matching filter":"","  (").concat(n.length,")")))))),r.createElement(Ce.If,{condition:this.store.cancerStudies.isComplete&&this.store.cancerTypes.isComplete&&0===n.length},r.createElement("p",null,"There are no studies matching your filter."))),r.createElement(Pe,null)))),r.createElement(Xe.Modal,{className:y()(a().SelectedStudiesWindow,"cbioportal-frontend"),show:this.store.showSelectedStudiesOnly,onHide:function(){return e.store.showSelectedStudiesOnly=!1}},r.createElement(Xe.Modal.Header,{closeButton:!0},r.createElement(Xe.Modal.Title,null,"Selected Studies")),r.createElement(Xe.Modal.Body,null,r.createElement(Pe,{showSelectedStudiesOnly:!0}))))}},{key:"studiesDataComplete",get:function(){return this.store.cancerTypes.isComplete&&this.store.cancerStudies.isComplete&&this.store.userVirtualStudies.isComplete}},{key:"logic",get:function(){return this.store.studyListLogic}}])&&yt(n.prototype,o),i&&yt(n,i),t}(r.Component);vt([A.computed],St.prototype,"studiesDataComplete",null),vt([Oe()],St.prototype,"getCancerTypeListClickHandler",null),vt([A.action.bound],St.prototype,"selectTCGAPanAtlas",null),vt([A.action.bound],St.prototype,"selectMatchingStudies",null);const Pt=St=vt([l.observer],St);var Et=n(20232);function wt(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ct(e,t){return!t||"object"!==jt(t)&&"function"!=typeof t?kt(e):t}function Tt(e){return(Tt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dt(e,t){return(Dt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jt(e){return(jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Nt=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":jt(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},At=function(e){function t(){var e;return _t(this,t),e=Ct(this,Tt(t).apply(this,arguments)),Object.defineProperty(kt(e),"ProfileToggle",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n=t.profile,o=t.type,l=t.label,i=t.checked,s=t.isGroupToggle;return r.createElement("label",null,r.createElement("input",{type:o,checked:i,onChange:function(t){return e.store.selectMolecularProfile(n,t.target.checked)},"data-test":n.molecularAlterationType}),r.createElement("span",{className:s?a().groupName:a().profileName},l),!s&&r.createElement(x.ZD,{mouseEnterDelay:0,placement:"right",overlay:r.createElement("div",{className:a().tooltip},n.description)},r.createElement(j(),{className:a().infoIcon,name:"question-circle"})))}}),e}var n,o,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dt(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){return 1!==this.store.selectableSelectedStudyIds.length?null:r.createElement(C,{padded:!0,className:a().MolecularProfileSelector},r.createElement(ze,{className:"sectionLabel",promises:[this.store.molecularProfilesInSelectedStudies]},"Select Genomic Profiles:"),r.createElement("div",{className:a().group,"data-test":"molecularProfileSelector"},this.renderGroup("MUTATION_EXTENDED","Mutation"),this.renderGroup("STRUCTURAL_VARIANT","Structural Variant"),this.renderGroup("COPY_NUMBER_ALTERATION","Copy Number"),this.showGSVA&&this.renderGroup("GENESET_SCORE","GSVA scores"),this.renderGroup("MRNA_EXPRESSION","mRNA Expression"),this.renderGroup("METHYLATION","DNA Methylation"),this.renderGroup("METHYLATION_BINARY","DNA Methylation"),this.renderGroup("PROTEIN_LEVEL","Protein/phosphoprotein level"),!(!this.store.molecularProfilesInSelectedStudies.isComplete||this.store.molecularProfilesInSelectedStudies.result.length)&&r.createElement("strong",null,"No Genomic Profiles available for this Cancer Study")))}},{key:"renderGroup",value:function(e,t){var n=this,o=this.store.getFilteredProfiles(e);if(!o.length)return null;var l=s().some(o,(function(e){return n.store.isProfileTypeSelected((0,Et.o)(e))})),i=[];o.length>1&&!this.store.forDownloadTab&&i.push(r.createElement(this.ProfileToggle,{key:"altTypeCheckbox:"+e,profile:o[0],type:"checkbox",label:"".concat(t,". Select one of the profiles below:"),checked:l,isGroupToggle:!0}));var c=o.map((function(e){return r.createElement(n.ProfileToggle,{key:"profile:"+e.molecularProfileId,profile:e,type:n.store.forDownloadTab||o.length>1?"radio":"checkbox",label:"STRUCTURAL_VARIANT"===e.molecularAlterationType?t:e.name,checked:n.store.isProfileTypeSelected((0,Et.o)(e)),isGroupToggle:!1})}));return this.store.forDownloadTab||1==o.length?i.push.apply(i,wt(c)):i.push(r.createElement("div",{key:"group:"+e,className:a().group},c)),this.store.forDownloadTab||(l&&"MRNA_EXPRESSION"==e&&i.push(r.createElement("div",{key:i.length,className:a().zScore},"Enter a z-score threshold"," ",r.createElement("span",{dangerouslySetInnerHTML:{__html:["&","plusmn;"].join("")}}),r.createElement("input",{type:"text",value:this.store.zScoreThreshold,onChange:function(e){n.store.zScoreThreshold=e.target.value}}))),l&&"PROTEIN_LEVEL"==e&&i.push(r.createElement("div",{key:i.length,className:a().zScore},"Enter a z-score threshold"," ",r.createElement("span",{dangerouslySetInnerHTML:{__html:["&","plusmn;"].join("")}}),r.createElement("input",{type:"text",value:this.store.rppaScoreThreshold,onChange:function(e){n.store.rppaScoreThreshold=e.target.value}})))),i}},{key:"showGSVA",get:function(){return(0,K.Ib)().skin_show_gsva}}])&&Ot(n.prototype,o),l&&Ot(n,l),t}(R.cx);const It=At=Nt([l.observer],At);var Rt=n(35770),xt=n(90387);function Mt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gt(e,t){return!t||"object"!==Ht(t)&&"function"!=typeof t?Ft(e):t}function Bt(e){return(Bt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ft(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vt(e,t){return(Vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ht(e){return(Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Kt=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Ht(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},Qt=function(e){function t(){var e;return Mt(this,t),e=Gt(this,Bt(t).apply(this,arguments)),Object.defineProperty(Ft(e),"molecularProfileCategorySet",{enumerable:!0,configurable:!0,writable:!0,value:(0,x.$w)({await:function(){return[e.store.validProfileIdSetForSelectedStudies]},invoke:function(){return Promise.resolve((0,xt.lL)(e.store.validProfileIdSetForSelectedStudies.result))},default:[]})}),Object.defineProperty(Ft(e),"flexRowContent",{enumerable:!0,configurable:!0,writable:!0,value:(0,Rt.F)({await:function(){return[e.molecularProfileCategorySet]},render:function(){return r.createElement("div",{style:{display:"flex"}},e.molecularProfileCategorySet.result.map((function(t){return r.createElement(Zt,{label:t.label,id:t.id,profileTypes:t.profileTypes,store:e.store})})))},renderPending:function(){return r.createElement(B.Z,{isLoading:!0})},renderError:function(){return r.createElement("span",{key:"error"},"Error loading profiles for selected studies.")}})}),e}var n,o,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vt(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){return this.store.isVirtualStudyQuery?r.createElement(C,{padded:!0,className:a().DataTypePrioritySelector,"data-test":"dataTypePrioritySelector"},r.createElement(ze,{className:"sectionLabel"},"Select Molecular Profiles:"),r.createElement(C,null,this.flexRowContent.component)):null}}])&&Lt(n.prototype,o),l&&Lt(n,l),t}(R.cx);const Ut=Qt=Kt([l.observer],Qt);var Zt=(0,l.observer)((function(e){var t=e.profileTypes.some((function(t){return e.store.isProfileTypeSelected(t)}));return r.createElement("label",{className:a().DataTypePriorityLabel},r.createElement("input",{type:"checkbox",checked:t,onChange:function(t){e.store.setProfileTypes(e.profileTypes,t.currentTarget.checked)},"data-test":e.id}),e.label)}));const qt=[{id:"Prostate Cancer: AR Signaling",genes:["SOX9","RAN","TNK2","EP300","PXN","NCOA2","AR","NRIP1","NCOR1","NCOR2"]},{id:"Prostate Cancer: AR and steroid synthesis enzymes",genes:["AKR1C3","AR","CYB5A","CYP11A1","CYP11B1","CYP11B2","CYP17A1","CYP19A1","CYP21A2","HSD17B1","HSD17B10","HSD17B11","HSD17B12","HSD17B13","HSD17B14","HSD17B2","HSD17B3","HSD17B4","HSD17B6","HSD17B7","HSD17B8","HSD3B1","HSD3B2","HSD3B7","RDH5","SHBG","SRD5A1","SRD5A2","SRD5A3","STAR"]},{id:"Prostate Cancer: Steroid inactivating genes",genes:["AKR1C1","AKR1C2","AKR1C4","CYP3A4","CYP3A43","CYP3A5","CYP3A7","UGT2B15","UGT2B17","UGT2B7"]},{id:"Prostate Cancer: Down-regulated by androgen",genes:["BCHE","CDK8","CTBP1","ACKR3","DDC","DPH1","FN1","HES6","MMP16","MYC","PEG3","PIK3R3","PRKD1","SCNN1A","SDC4","SERPINI1","SLC29A1","ST7","TULP4"]},{id:"Glioblastoma: TP53 Pathway",genes:["CDKN2A","MDM2","MDM4","TP53"]},{id:"Glioblastoma: RTK/Ras/PI3K/AKT Signaling",genes:["EGFR","ERBB2","PDGFRA","MET","KRAS","NRAS","HRAS","NF1","SPRY2","FOXO1","FOXO3","AKT1","AKT2","AKT3","PIK3R1","PIK3CA","PTEN"]},{id:"Glioblastoma: RB Pathway",genes:["CDKN2A","CDKN2B","CDKN2C","CDK4","CDK6","CCND2","RB1"]},{id:"Ovarian Cancer: Oncogenes associated with epithelial ovarian cancer",genes:["RAB25","MECOM","EIF5A2","PRKCI","PIK3CA","KIT","FGF1","MYC","EGFR","NOTCH3","KRAS","AKT1","ERBB2","PIK3R1","CCNE1","AKT2","AURKA"]},{id:"Ovarian Cancer: Putative tumor-suppressor genes in epithelial ovarian cancer",genes:["DIRAS3","RASSF1","DLEC1","SPARC","DAB2","PLAGL1","RPS6KA2","PTEN","OPCML","BRCA2","ARL11","WWOX","TP53","DPH1","BRCA1","PEG3"]},{id:"General: Cell Cycle Control",genes:["RB1","RBL1","RBL2","CCNA1","CCNB1","CDK1","CCNE1","CDK2","CDC25A","CCND1","CDK4","CDK6","CCND2","CDKN2A","CDKN2B","MYC","CDKN1A","CDKN1B","E2F1","E2F2","E2F3","E2F4","E2F5","E2F6","E2F7","E2F8","SRC","JAK1","JAK2","STAT1","STAT2","STAT3","STAT5A","STAT5B"]},{id:"General: p53 signaling",genes:["TP53","MDM2","MDM4","CDKN2A","CDKN2B","TP53BP1"]},{id:"General: Notch signaling",genes:["ADAM10","ADAM17","APH1A","APH1B","ARRDC1","CIR1","CTBP1","CTBP2","CUL1","DLL1","DLL3","DLL4","DTX1","DTX2","DTX3","DTX3L","DTX4","EP300","FBXW7","HDAC1","HDAC2","HES1","HES5","HEYL","ITCH","JAG1","JAG2","KDM5A","LFNG","MAML1","MAML2","MAML3","MFNG","NCOR2","NCSTN","NOTCH1","NOTCH2","NOTCH3","NOTCH4","NRARP","NUMB","NUMBL","PSEN1","PSEN2","PSENEN","RBPJ","RBPJL","RFNG","SNW1","SPEN","HES2","HES4","HES7","HEY1","HEY2"]},{id:"General: DNA Damage Response",genes:["CHEK1","CHEK2","RAD51","BRCA1","BRCA2","MLH1","MSH2","ATM","ATR","MDC1","PARP1","FANCF"]},{id:"General: Other growth / proliferation signaling",genes:["CSF1","CSF1R","IGF1","IGF1R","FGF1","FGFR1","AURKA","DLEC1","PLAGL1","OPCML","DPH1"]},{id:"General: Survival / cell death regulation signaling",genes:["NFKB1","NFKB2","CHUK","DIRAS3","FAS","HLA-G","BAD","BCL2","BCL2L1","APAF1","CASP9","CASP8","CASP10","CASP3","CASP6","CASP7","GSK3B","ARL11","WWOX","PEG3","TGFB1","TGFBR1","TGFBR2"]},{id:"General: Telomere maintenance",genes:["TERC","TERT"]},{id:"General: RTK signaling family",genes:["EGFR","ERBB2","ERBB3","ERBB4","PDGFA","PDGFB","PDGFRA","PDGFRB","KIT","FGF1","FGFR1","IGF1","IGF1R","VEGFA","VEGFB","KDR"]},{id:"General: PI3K-AKT-mTOR signaling",genes:["PIK3CA","PIK3R1","PIK3R2","PTEN","PDPK1","AKT1","AKT2","FOXO1","FOXO3","MTOR","RICTOR","TSC1","TSC2","RHEB","AKT1S1","RPTOR","MLST8"]},{id:"General: Ras-Raf-MEK-Erk/JNK signaling",genes:["KRAS","HRAS","BRAF","RAF1","MAP3K1","MAP3K2","MAP3K3","MAP3K4","MAP3K5","MAP2K1","MAP2K2","MAP2K3","MAP2K4","MAP2K5","MAPK1","MAPK3","MAPK4","MAPK6","MAPK7","MAPK8","MAPK9","MAPK12","MAPK14","DAB2","RASSF1","RAB25"]},{id:"General: Regulation of ribosomal protein synthesis and cell growth",genes:["RPS6KA1","RPS6KA2","RPS6KB1","RPS6KB2","EIF5A2","EIF4E","EIF4EBP1","RPS6","HIF1A"]},{id:"General: Angiogenesis",genes:["VEGFA","VEGFB","KDR","CXCL8","CXCR1","CXCR2"]},{id:"General: Folate transport",genes:["SLC19A1","FOLR1","FOLR2","FOLR3","IZUMO1R"]},{id:"General: Invasion and metastasis",genes:["MMP1","MMP2","MMP3","MMP7","MMP9","MMP10","MMP11","MMP12","MMP13","MMP14","MMP15","MMP16","MMP17","MMP19","MMP21","MMP23B","MMP24","MMP25","MMP26","MMP27","MMP28","ITGB3","ITGAV","PTK2","CDH1","SPARC","WFDC2"]},{id:"General: TGF-β Pathway",genes:["TGFB1","TGFB2","TGFB3","TGFBR1","TGFBR2","TGFBR3","BMP2","BMP3","BMP4","BMP5","BMP6","BMP7","GDF2","BMP10","BMP15","BMPR1A","BMPR1B","BMPR2","ACVR1","ACVR1B","ACVR1C","ACVR2A","ACVR2B","ACVRL1","Nodal","GDF1","GDF11","INHA","INHBA","INHBB","INHBC","INHBE","SMAD2","SMAD3","SMAD1","SMAD5","SMAD4","SMAD9","SMAD6","SMAD7","SPTBN1","TGFBRAP1","ZFYVE9"]}];var Wt=n(77906),Yt=n.n(Wt),zt=n(4098);n(89871);function Xt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jt(e){return(Jt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $t(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function en(e,t){return(en=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tn(e){return(tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var nn=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":tn(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},rn=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function l(e){try{s(r.next(e))}catch(e){a(e)}}function i(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}s((r=r.apply(e,t||[])).next())}))},on=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==tn(t)&&"function"!=typeof t?$t(e):t}(this,Jt(t).call(this,e)),Object.defineProperty($t(n),"tree",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty($t(n),"isLoading",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty($t(n),"promisedTree",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty($t(n),"map_geneSets_selected",{enumerable:!0,configurable:!0,writable:!0,value:new A.ObservableMap}),(0,A.makeObservable)($t(n)),n.map_geneSets_selected.replace(e.initialSelection.map((function(e){return[e,!0]}))),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&en(e,t)}(t,e),n=t,(o=[{key:"componentDidMount",value:function(){var e=this;this.promisedTree=this.initTree(this.tree),this.promisedTree.then((function(t){return e.isLoading=!1,t}))}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.scoreThreshold===e.scoreThreshold&&this.props.pvalueThreshold===e.pvalueThreshold&&this.props.percentile===e.percentile||(this.promisedTree=this.promisedTree.then((function(e){return t.isLoading=!0,t.replaceTree(e)})).then((function(e){return t.isLoading=!1,e}))),this.props.searchValue!==e.searchValue&&(this.promisedTree=this.promisedTree.then((function(e){return t.searchTree(e,t.props.searchValue)})))}},{key:"transformHierarchyData",value:function(e){var t=e,n=[],r=0,o=!0,a=!1,l=void 0;try{for(var i,c=t[Symbol.iterator]();!(o=(i=c.next()).done);o=!0){var u=i.value,p=u.nodeName,f=u.parentNodeName?u.parentNodeName:"#";if(n.push({id:p,parent:f,text:p,li_attr:{name:p},geneset:!1,state:{opened:!0,selected:!1}}),s().has(u,"genesets")){var d=!0,y=!1,m=void 0;try{for(var h,b=u.genesets[Symbol.iterator]();!(d=(h=b.next()).done);d=!0){var g=h.value,v=r++,S=g.genesetId,P=g.description,E=g.representativeScore,w=g.representativePvalue,_=g.refLink,O="",C=S+'<span style="font-weight:normal;font-style:italic;"> '+(O=(O=O+"score = "+E.toFixed(2))+", p-value = "+(w=w<.005?w.toExponential(0):w.toFixed(2)))+"</span>";n.push({id:v.toString(),parent:p,text:C,state:{selected:!1},li_attr:{name:S},description:P,representativeScore:E,representativePvalue:w,refLink:_,geneset:!0})}}catch(e){y=!0,m=e}finally{try{d||null==b.return||b.return()}finally{if(y)throw m}}}}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return n}},{key:"initTree",value:function(e){return rn(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,zt.wv)(this.props.gsvaProfile,this.props.percentile,this.props.scoreThreshold,this.props.pvalueThreshold,this.props.sampleListId);case 2:return n=t.sent,Yt()(e).jstree({search:{show_only_matches:!0,show_only_matches_children:!0},checkbox:{cascade_to_disabled:!1,cascade_to_hidden:!1},core:{themes:{icons:!1},check_callback:!0,data:this.transformHierarchyData(n)},plugins:["checkbox","search"]}),t.abrupt("return",e);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"destroyTree",value:function(e){Yt()(e).jstree(!0).destroy()}},{key:"replaceTree",value:function(e){return rn(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.destroyTree(e),t.next=3,this.initTree(e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"submitGeneSets",value:function(e){if(e){var t=Yt()(e).jstree("get_selected",!0),n=!0,r=!1,o=void 0;try{for(var a,l=t[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var i=a.value;i.original.geneset&&this.map_geneSets_selected.set(i.original.li_attr.name,!0)}}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}}return this.map_geneSets_selected}},{key:"searchTree",value:function(e,t){return Yt()(e).jstree(!0).search(t),e}},{key:"render",value:function(){var e=this;return r.createElement("div",null,r.createElement(B.Z,{isLoading:this.isLoading}),r.createElement("div",{ref:function(t){return e.tree=t},style:{maxHeight:"380px",overflowY:"scroll"},"data-test":"gsva-tree-container"}),r.createElement("div",{style:{padding:"30px 0px"}},r.createElement("button",{className:"btn btn-primary btn-sm pull-right",style:{margin:"2px"},disabled:this.isLoading,onClick:function(){var t=e.submitGeneSets(e.tree);e.props.onSelect(t)}},"Select")))}}])&&Xt(n.prototype,o),a&&Xt(n,a),t}(r.Component);nn([A.observable],on.prototype,"isLoading",void 0);const an=on=nn([l.observer],on);var ln=n(92977);function sn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cn(e){return(cn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function un(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pn(e,t){return(pn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fn(e){return(fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var dn=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":fn(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},yn=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==fn(t)&&"function"!=typeof t?un(e):t}(this,cn(t).call(this,e)),Object.defineProperty(un(n),"percentile",{enumerable:!0,configurable:!0,writable:!0,value:n.props.percentile}),Object.defineProperty(un(n),"pvalueThreshold",{enumerable:!0,configurable:!0,writable:!0,value:String(n.props.pvalueThreshold)}),Object.defineProperty(un(n),"scoreThreshold",{enumerable:!0,configurable:!0,writable:!0,value:String(n.props.scoreThreshold)}),Object.defineProperty(un(n),"percentileOptions",{enumerable:!0,configurable:!0,writable:!0,value:[{label:"50%",value:50},{label:"75%",value:75},{label:"100%",value:100}]}),(0,A.makeObservable)(un(n)),n.percentileChange=n.percentileChange.bind(un(n)),n.applyFilter=n.applyFilter.bind(un(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pn(e,t)}(t,e),n=t,(o=[{key:"percentileChange",value:function(e){this.percentile=e?e.value:75}},{key:"applyFilter",value:function(){var e=this.pvalueThreshold?Number(this.pvalueThreshold):NaN,t=this.scoreThreshold?Number(this.scoreThreshold):NaN;Number.isNaN(e)||Number.isNaN(t)||this.props.onApply(this.percentile,e,t)}},{key:"render",value:function(){var e=this;return r.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center",width:"100%",background:"#eee",padding:"10px 10px"}},r.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.createElement("label",{htmlFor:"GSVAScore"},"GSVA score"),r.createElement("input",{id:"GSVAScore",type:"string",value:this.scoreThreshold,style:{width:160,height:36,padding:10},onChange:function(t){return e.scoreThreshold=t.target.value},step:"0.1"})),r.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.createElement("label",{htmlFor:"Pvalue"},"P-value"),r.createElement("input",{id:"Pvalue",type:"string",value:this.pvalueThreshold,style:{width:160,height:36,padding:10},onChange:function(t){return e.pvalueThreshold=t.target.value},step:"0.01",min:"0"})),r.createElement("div",null,r.createElement("label",{htmlFor:"PercentileScoreCalculation"},"Percentile for score calculation"),r.createElement(ln.default,{addLabelText:"Percentile for score calculation",style:{width:160,borderRadius:"2px"},clearable:!1,name:"PercentileScoreCalculation",value:this.percentile,options:this.percentileOptions,onChange:this.percentileChange})),r.createElement("div",null,r.createElement("button",{id:"filterButton",className:"btn btn-primary btn-sm",style:{padding:"20px 18px"},onClick:this.applyFilter},"Apply Filter")))}}])&&sn(n.prototype,o),a&&sn(n,a),t}(r.Component);dn([A.observable],yn.prototype,"percentile",void 0),dn([A.observable],yn.prototype,"pvalueThreshold",void 0),dn([A.observable],yn.prototype,"scoreThreshold",void 0);const mn=yn=dn([l.observer],yn);function hn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bn(e){return(bn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vn(e,t){return(vn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Sn(e){return(Sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Pn=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Sn(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},En=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==Sn(t)&&"function"!=typeof t?gn(e):t}(this,bn(t).call(this,e)),Object.defineProperty(gn(n),"percentile",{enumerable:!0,configurable:!0,writable:!0,value:75}),Object.defineProperty(gn(n),"pvalueThreshold",{enumerable:!0,configurable:!0,writable:!0,value:(0,K.Ib)().skin_geneset_hierarchy_default_p_value}),Object.defineProperty(gn(n),"scoreThreshold",{enumerable:!0,configurable:!0,writable:!0,value:(0,K.Ib)().skin_geneset_hierarchy_default_gsva_score}),Object.defineProperty(gn(n),"searchValue",{enumerable:!0,configurable:!0,writable:!0,value:""}),(0,A.makeObservable)(gn(n)),n.updateSelectionParameters=n.updateSelectionParameters.bind(gn(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vn(e,t)}(t,e),n=t,(o=[{key:"updateSelectionParameters",value:function(e,t,n){this.percentile=e,this.pvalueThreshold=t,this.scoreThreshold=n}},{key:"render",value:function(){var e=this;return r.createElement("div",null,r.createElement("text",null,"Search hierarchy"),r.createElement("div",{className:"form-group has-feedback input-group-sm",style:{display:"inline-block"}},r.createElement("input",{type:"text",id:"geneset-hierarchy-search",className:"form-control tableSearchInput",style:{width:768},value:this.searchValue,onChange:function(t){return e.searchValue=t.target.value}}),r.createElement("span",{className:"fa fa-search form-control-feedback","aria-hidden":"true"})),r.createElement(mn,{percentile:this.percentile,pvalueThreshold:this.pvalueThreshold,scoreThreshold:this.scoreThreshold,onApply:this.updateSelectionParameters}),r.createElement(an,{initialSelection:this.props.initialSelection,scoreThreshold:this.scoreThreshold,pvalueThreshold:this.pvalueThreshold,percentile:this.percentile,gsvaProfile:this.props.gsvaProfile,sampleListId:this.props.sampleListId,searchValue:this.searchValue,onSelect:this.props.onSelect}))}}])&&hn(n.prototype,o),a&&hn(n,a),t}(r.Component);Pn([A.observable],En.prototype,"percentile",void 0),Pn([A.observable],En.prototype,"pvalueThreshold",void 0),Pn([A.observable],En.prototype,"scoreThreshold",void 0),Pn([A.observable],En.prototype,"searchValue",void 0);const wn=En=Pn([l.observer],En);var _n=n(6240),On=n(71780),Cn=n(49572);function Tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dn(e,t){return!t||"object"!==Rn(t)&&"function"!=typeof t?jn(e):t}function jn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nn(e){return(Nn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function An(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&In(e,t)}function In(e,t){return(In=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Rn(e){return(Rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var xn=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Rn(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},Mn=function(e){function t(){return kn(this,t),Dn(this,Nn(t).apply(this,arguments))}return An(t,e),t}(_n.ZP),Ln=function(e){function t(e){var n;return kn(this,t),n=Dn(this,Nn(t).call(this,e)),Object.defineProperty(jn(n),"percentileOptions",{enumerable:!0,configurable:!0,writable:!0,value:[{label:"50%",value:"50"},{label:"75%",value:"75"},{label:"100%",value:"100"}]}),(0,A.makeObservable)(jn(n)),n.percentileChange=n.percentileChange.bind(jn(n)),n.updateSelectionFromPlot=n.updateSelectionFromPlot.bind(jn(n)),n}var n,o,l;return An(t,e),n=t,(o=[{key:"percentileChange",value:function(e){this.store.volcanoPlotSelectedPercentile=e||{label:"75%",value:"75"}}},{key:"updateSelectionFromPlot",value:function(e,t){var n=this,r=e&&e[0].data?e[0].data:[];this.store.volcanoPlotTableData.result.map((function(e){var t=e.representativeScore,o=e.representativePvalue,a=e.name,l=t,i=-Math.log(o)/Math.log(10),s=!0,c=!1,u=void 0;try{for(var p,f=r[Symbol.iterator]();!(s=(p=f.next()).done);s=!0){var d=p.value;d.x===l&&d.y===i&&n.store.map_genesets_selected_volcano.set(a,!0)}}catch(e){c=!0,u=e}finally{try{s||null==f.return||f.return()}finally{if(c)throw u}}}))}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:a().GenesetsVolcanoSelectorWindow,style:{height:"400px"}},r.createElement("div",{style:{float:"left"},className:"form-inline"},r.createElement("label",{htmlFor:"PercentileScoreCalculation"},"Percentile for score calculation:"),r.createElement("span",{style:{display:"inline-block",verticalAlign:"middle",marginLeft:"1em"}},r.createElement(ln.default,{addLabelText:"Percentile for score calculation",style:{width:160,borderRadius:"2px"},clearable:!1,name:"PercentileScoreCalculation",value:this.store.volcanoPlotSelectedPercentile,options:this.percentileOptions,onChange:this.percentileChange})),r.createElement(B.Z,{isLoading:!(this.props.plotData&&this.props.maxY&&this.store.volcanoPlotTableData.isComplete&&this.props.data)}),this.store.volcanoPlotGraphData&&this.store.minYVolcanoPlot&&this.props.plotData&&this.props.maxY&&this.store.volcanoPlotTableData.isComplete&&this.props.data&&r.createElement(Cn.VictoryChart,{theme:x.Nv,width:510,height:350,containerComponent:r.createElement(Cn.VictorySelectionContainer,{onSelection:this.updateSelectionFromPlot,selectionStyle:{fill:"tomato",fillOpacity:.5,stroke:"tomato",strokeWidth:2}})},r.createElement(Cn.VictoryAxis,{crossAxis:!0,domain:[this.xAxisMinValue,this.xAxisMaxValue],tickValues:this.xAxisTickValues,style:{axisLabel:{padding:35}},label:"GSVA score",offsetY:50,standalone:!1}),r.createElement(Cn.VictoryAxis,{dependentAxis:!0,crossAxis:!0,domain:[0,this.props.maxY],style:{axisLabel:{padding:35},stroke:"none"},label:"-log10 p-value",offsetX:50,standalone:!1}),r.createElement(Cn.VictoryLabel,{text:"significance",datum:{x:this.xAxisTickValues[this.xAxisTickValues.length-1],y:1.3},textAnchor:"start"}),r.createElement(Cn.VictoryLine,{style:{data:{stroke:"black",strokeDasharray:5},parent:{border:"dotted 1px #f00"}},data:[{x:this.xAxisMinValue,y:1.3},{x:this.xAxisTickValues[this.xAxisTickValues.length-1],y:1.3}]}),r.createElement(Cn.VictoryLine,{style:{data:{stroke:"rgb(144, 164, 174)"},parent:{border:"1px dashed solid"}},data:[{x:0,y:0},{x:0,y:this.props.maxY}]}),r.createElement(Cn.VictoryScatter,{style:{data:{fill:function(e){return e?e.fill:""},fillOpacity:.3}},size:3,data:this.props.plotData}))),r.createElement("div",{style:{float:"right",height:"356.5px",overflowY:"scroll",width:"650px"}},r.createElement(B.Z,{isLoading:!(this.store.volcanoPlotTableData.isComplete&&this.props.data)}),this.store.volcanoPlotTableData.isComplete&&this.props.data&&r.createElement(Mn,{data:this.props.data,columns:[{name:"Gene Sets",render:function(e){return r.createElement("span",null,e.name)},sortBy:function(e){return e.name},filter:function(e,t,n){return e.name.toUpperCase().indexOf(n)>-1}},{name:"GSVA Score",render:function(e){return r.createElement("span",null,e.representativeScore.toFixed(2))},sortBy:function(e){return e.representativeScore}},{name:"P Value",render:function(e){return r.createElement("span",null,(0,On.Zd)(e.representativePvalue,2,.1))},sortBy:function(e){return e.representativePvalue}},{name:"Selected",render:function(t){return r.createElement(N.Z,{checked:!!e.store.map_genesets_selected_volcano.get(t.name),onChange:function(n){return e.store.map_genesets_selected_volcano.set(t.name,n.target.checked)}})}}],initialSortColumn:"P Value",initialSortDirection:"asc",showPagination:!0,initialItemsPerPage:100,showColumnVisibility:!1,showFilter:!0,showCopyDownload:!1})),r.createElement("div",{style:{float:"right"}},this.store.volcanoPlotTableData.isComplete&&this.props.data&&r.createElement("button",{style:{marginTop:15,float:"right"},className:"btn btn-primary btn-sm pull-right",onClick:function(){return e.props.onSelect(e.store.map_genesets_selected_volcano)}},"Add selection to the query"),this.store.volcanoPlotTableData.isComplete&&this.props.data&&r.createElement("button",{style:{marginRight:15,marginTop:15,float:"right"},className:"btn btn-primary btn-sm pull-right",onClick:function(){return e.store.map_genesets_selected_volcano.replace(e.props.initialSelection.map((function(e){return[e,!0]})))}},"Clear selection")))}},{key:"xAxisTickSize",get:function(){if(this.props.plotData&&this.props.plotData.length>0){var e=s().maxBy(this.props.plotData,(function(e){return e.x})).x,t=s().minBy(this.props.plotData,(function(e){return e.x})).x,n=Math.max(e,Math.abs(t));return(n=Math.round(n))/2}return.5}},{key:"xAxisTickValues",get:function(){return[-2*this.xAxisTickSize,-this.xAxisTickSize,0,this.xAxisTickSize,2*this.xAxisTickSize]}},{key:"xAxisMaxValue",get:function(){return 2.5*this.xAxisTickSize}},{key:"xAxisMinValue",get:function(){return-2.5*this.xAxisTickSize}}])&&Tn(n.prototype,o),l&&Tn(n,l),t}(R.cx);xn([A.action],Ln.prototype,"updateSelectionFromPlot",null),xn([A.computed],Ln.prototype,"xAxisTickSize",null),xn([A.computed],Ln.prototype,"xAxisTickValues",null),xn([A.computed],Ln.prototype,"xAxisMaxValue",null),xn([A.computed],Ln.prototype,"xAxisMinValue",null);const Gn=Ln=xn([l.observer],Ln);function Bn(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Fn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vn(e){return(Vn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kn(e,t){return(Kn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qn(e){return(Qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Un=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Qn(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},Zn=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==Qn(t)&&"function"!=typeof t?Hn(e):t}(this,Vn(t).call(this,e)),(0,A.makeObservable)(Hn(n)),n}var n,o,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kn(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){var e=this;return r.createElement(C,{padded:!0,overflow:!0,className:a().GeneSetSelector},r.createElement(ze,{className:"sectionLabel"},"Enter Gene Sets:"),r.createElement(T,{overflow:!0},r.createElement(C,{padded:!0,className:a().buttonRow},r.createElement("button",{className:"btn btn-default btn-sm","data-test":"GENESET_HIERARCHY_BUTTON",onClick:function(){return e.store.showGenesetsHierarchyPopup=!0}},"Select Gene Sets from Hierarchy"),r.createElement("button",{className:"btn btn-default btn-sm","data-test":"GENESET_VOLCANO_BUTTON",onClick:function(){return e.store.showGenesetsVolcanoPopup=!0}},"Select Gene Sets from Volcano Plot")),r.createElement("textarea",{ref:this.textAreaRef,className:y()(a().geneSet,this.store.genesetQuery?a().notEmpty:a().empty),rows:5,cols:80,placeholder:"Enter Gene Sets",title:"Enter Gene Sets",value:this.store.genesetQuery,onChange:function(t){return e.store.genesetQuery=t.currentTarget.value},"data-test":"GENESETS_TEXT_AREA"}),r.createElement(Xe.Modal,{className:y()("cbioportal-frontend",a().GenesetsSelectorWindow),show:this.store.showGenesetsHierarchyPopup,onHide:function(){return e.store.showGenesetsHierarchyPopup=!1}},r.createElement(Xe.Modal.Header,{closeButton:!0},r.createElement(Xe.Modal.Title,null,"Select Gene Sets From Hierarchy")),r.createElement(Xe.Modal.Body,null,r.createElement(wn,{initialSelection:this.store.genesetIds,gsvaProfile:this.store.getFilteredProfiles("GENESET_SCORE")[0].molecularProfileId,sampleListId:this.store.defaultSelectedSampleListId,onSelect:function(t){e.store.applyGenesetSelection(t),e.store.showGenesetsHierarchyPopup=!1}}))),r.createElement(Xe.Modal,{className:y()("cbioportal-frontend",a().GenesetsVolcanoSelectorWindow),show:this.store.showGenesetsVolcanoPopup,onHide:function(){return e.store.showGenesetsVolcanoPopup=!1},onShow:function(){return e.store.map_genesets_selected_volcano.replace(e.store.genesetIds.map((function(e){return[e,!0]})))}},r.createElement(Xe.Modal.Header,{closeButton:!0},r.createElement(Xe.Modal.Title,null,"Select Gene Sets From Volcano Plot")),r.createElement(Xe.Modal.Body,null,r.createElement(Gn,{initialSelection:this.store.genesetIds,data:this.store.volcanoPlotTableData.result,plotData:this.store.volcanoPlotGraphData,maxY:this.store.minYVolcanoPlot?-Math.log(this.store.minYVolcanoPlot)/Math.log(10):void 0,onSelect:function(t){e.store.addToGenesetSelection(t),e.store.showGenesetsVolcanoPopup=!1}})))))}},{key:"selectedGeneListOption",get:function(){var e=this,t=this.geneListOptions.find((function(t){return t.value===e.store.geneQuery}));return t?t.value:""}},{key:"geneListOptions",get:function(){var e=qt;if((0,K.Ib)().query_sets_of_genes){var t=K.v4.parseQuerySetsOfGenes((0,K.Ib)().query_sets_of_genes);t&&(e=t)}return[{label:"User-defined List",value:""}].concat(Bn(e.map((function(e){return{label:"".concat(e.id," (").concat(e.genes.length," genes)"),value:e.genes.join(" ")}}))))}},{key:"textAreaRef",get:function(){var e=this;if(this.store.geneQueryErrorDisplayStatus===R.TO.ShouldFocus)return function(t){var n=e.store.oql.error;t&&n&&(t.focus(),t.setSelectionRange(n.start,n.end),e.store.geneQueryErrorDisplayStatus=R.TO.Focused)}}}])&&Fn(n.prototype,o),l&&Fn(n,l),t}(R.cx);Un([A.computed],Zn.prototype,"selectedGeneListOption",null),Un([A.computed],Zn.prototype,"geneListOptions",null),Un([A.computed],Zn.prototype,"textAreaRef",null);const qn=Zn=Un([l.observer],Zn);var Wn=n(72057),Yn=n(75997),zn=n(65497),Xn=n.n(zn),Jn=n(42221),$n=n(7893);function er(e){return(er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tr(){return(tr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function nr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rr(e){return(rr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function or(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ar(e,t){return(ar=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n(91710);var lr=n(68995);function ir(e,t){var n=[];return t||(Object.keys(e[0]).forEach((function(e){return n.push(e,",")})),n.pop(),n.push("\r\n")),e.forEach((function(e){s().each(e,(function(e){n.push(e,",")})),n.pop(),n.push("\r\n")})),n.join("")}var sr=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==er(t)&&"function"!=typeof t?or(e):t}(this,rr(t).call(this,e)),Object.defineProperty(or(n),"searchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(or(n),"_copyButton",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(or(n),"downloadData",{enumerable:!0,configurable:!0,writable:!0,value:function(){n.props.downloadDataGenerator?Xn()(ir(n.props.downloadDataGenerator()||[],n.props.downloadDataContainsHeader),n.props.downloadFilename):Xn()(ir(n.props.tableData||[],n.props.downloadDataContainsHeader),n.props.downloadFilename)}}),n.handleInput=n.handleInput.bind(or(n)),n.getText=n.getText.bind(or(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ar(e,t)}(t,e),n=t,(o=[{key:"componentDidMount",value:function(){this.props.showCopyAndDownload&&this._copyButton&&this.bindCopyButton()}},{key:"bindCopyButton",value:function(){new lr(this._copyButton,{text:function(){return this.getText()}.bind(this)})}},{key:"handleInput",value:function(e){var t=this;null!==this.searchTimeout&&(clearTimeout(this.searchTimeout),this.searchTimeout=null);var n=e.currentTarget.value;this.searchTimeout=setTimeout((function(){t.props.handleInput&&t.props.handleInput(n)}),this.props.searchDelayMs)}},{key:"render",value:function(){var e=this,t=r.createElement("div",{className:"rc-tooltip-arrow-inner"});return r.createElement("div",{className:(this.props.className||"")+""},r.createElement(Xe.ButtonToolbar,null,r.createElement(Ce.If,{condition:this.props.showPagination},r.createElement(Jn.jn,tr({className:"pull-left"},this.props.paginationProps))),r.createElement(Ce.If,{condition:this.props.showHideShowColumnButton},r.createElement($n.L,this.props.columnVisibilityProps)),r.createElement(Ce.If,{condition:this.props.showCopyAndDownload},r.createElement(Xe.ButtonGroup,{className:this.props.copyDownloadClassName,style:{marginLeft:10}},r.createElement(x.ZD,{overlay:r.createElement("span",null,"Copy"),placement:"top",mouseLeaveDelay:0,mouseEnterDelay:.5,arrowContent:t},r.createElement("button",{ref:function(t){e._copyButton=t},className:"btn btn-sm btn-default","option-text":this.getText},r.createElement("i",{className:"fa fa-clipboard"}))),r.createElement(x.ZD,{overlay:r.createElement("span",null,"Download CSV"),mouseLeaveDelay:0,mouseEnterDelay:.5,placement:"top",arrowContent:t},r.createElement(Xe.Button,{className:"btn-sm",onClick:this.downloadData},r.createElement("i",{className:"fa fa-cloud-download"}))))),r.createElement(Ce.If,{condition:this.props.showSearch},r.createElement("div",{className:"".concat(this.props.searchClassName," form-group has-feedback input-group-sm"),style:{display:"inline-block",marginLeft:10}},r.createElement("input",{type:"text",onInput:this.handleInput,className:"form-control tableSearchInput",style:{width:200}}),r.createElement("span",{className:"fa fa-search form-control-feedback","aria-hidden":"true"})))))}},{key:"getText",value:function(){return this.props.downloadDataGenerator?ir(this.props.downloadDataGenerator()||[],this.props.downloadDataContainsHeader):ir(this.props.tableData||[],this.props.downloadDataContainsHeader)}}])&&nr(n.prototype,o),a&&nr(n,a),t}(r.Component);function cr(e){return(cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ur(){return(ur=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function pr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fr(e){return(fr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yr(e,t){return(yr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(sr,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{showSearch:!1,showCopyAndDownload:!0,showPagination:!1,searchClassName:"",copyDownloadClassName:"",downloadFilename:"patient-clinical-attributes.tsv",downloadDataContainsHeader:!1,paginationProps:{},columnVisibilityProps:{},searchDelayMs:400}});var mr=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==cr(t)&&"function"!=typeof t?dr(e):t}(this,fr(t).call(this,e)),Object.defineProperty(dr(n),"colNameToId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(dr(n),"filteredDataLength",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(dr(n),"shouldSetState",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(dr(n),"rawDataSelector",{enumerable:!0,configurable:!0,writable:!0,value:function(e,t){return t.rawData}}),Object.defineProperty(dr(n),"columnsSelector",{enumerable:!0,configurable:!0,writable:!0,value:function(e,t){return t.columns}}),Object.defineProperty(dr(n),"columnVisibilitySelector",{enumerable:!0,configurable:!0,writable:!0,value:function(e){return e.columnVisibility}}),Object.defineProperty(dr(n),"visibleColsSelector",{enumerable:!0,configurable:!0,writable:!0,value:(0,Wn.P1)(n.columnsSelector,n.columnVisibilitySelector,(function(e,t){return n.resolveVisible(e,t)}))}),Object.defineProperty(dr(n),"sortedVisibleColsSelector",{enumerable:!0,configurable:!0,writable:!0,value:(0,Wn.P1)(n.visibleColsSelector,(function(e){return n.resolveOrder(e)}))}),Object.defineProperty(dr(n),"sortedColsSelector",{enumerable:!0,configurable:!0,writable:!0,value:(0,Wn.P1)(n.columnsSelector,(function(e){return n.resolveOrder(e)}))}),Object.defineProperty(dr(n),"columnVisibilityArraySelector",{enumerable:!0,configurable:!0,writable:!0,value:(0,Wn.P1)(n.sortedColsSelector,n.columnVisibilitySelector,(function(e,t){return n.resolveColumnVisibility(n.colNameToId,e,t)}))}),Object.defineProperty(dr(n),"downloadDataSelector",{enumerable:!0,configurable:!0,writable:!0,value:(0,Wn.P1)(n.sortedColsSelector,n.columnVisibilitySelector,n.rawDataSelector,(function(e,t,r){return n.generateDownloadData(e,t,r)}))}),Object.defineProperty(dr(n),"headersSelector",{enumerable:!0,configurable:!0,writable:!0,value:(0,Wn.P1)(n.sortedVisibleColsSelector,(function(e){return n.generateHeaders(e)}))}),Object.defineProperty(dr(n),"rowsSelector",{enumerable:!0,configurable:!0,writable:!0,value:(0,Wn.P1)(n.sortedColsSelector,n.rawDataSelector,(function(e,t){return n.generateRows(e,t)}))}),n.colNameToId=n.mapColNameToId(e.columns),n.state={columnVisibility:t.resolveVisibility(e.columns,e.rawData),sortableColumns:n.resolveSortable(n.props.columns||{}),filterableColumns:n.resolveFilterable(n.props.columns||{}),filter:"",itemsPerPage:n.props.initItemsPerPage||25,currentPage:n.props.initPage||0},n.filteredDataLength=e.rawData.length,n.shouldSetState=!1;var r=function(e){e!==n.filteredDataLength&&(n.filteredDataLength=e,n.shouldSetState=!0)},o=function(e){var t=e.props.children.find((function(e){return"tbody"===e.type})).props.children||[];n.props.onVisibleRowsChange&&n.props.onVisibleRowsChange(t.map((function(e){return e.props.rowData})))},a=Yn.Table.prototype.applyFilter;Yn.Table.prototype.applyFilter=function(){var e=a.apply(this,arguments);return r(e.length),e};var l=Yn.Table.prototype.render;return Yn.Table.prototype.render=function(){var e=l.apply(this,arguments);return o(e),e},n.handleDownload=n.handleDownload.bind(dr(n)),n.handleFilterInput=n.handleFilterInput.bind(dr(n)),n.handleVisibilityToggle=n.handleVisibilityToggle.bind(dr(n)),n.handleChangeItemsPerPage=n.handleChangeItemsPerPage.bind(dr(n)),n.handlePreviousPageClick=n.handlePreviousPageClick.bind(dr(n)),n.handleNextPageClick=n.handleNextPageClick.bind(dr(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yr(e,t)}(t,e),n=t,a=[{key:"resolveVisibility",value:function(e,t){var n={};return e?(s().each(s().keys(e),(function(r){var o=e[r],a="visible";o.visible&&(a=s().isFunction(o.visible)?o.visible(t,o.columnProps):o.visible),"excluded"!==a&&(n[r]=a)})),n):n}},{key:"columnSort",value:function(e,t){return e.priority&&t.priority?e.priority-t.priority:e.priority?-1:t.priority||e.name>t.name?1:-1}}],(o=[{key:"render",value:function(){var e=this.props,t=e.className,n=e.reactTableProps,o=e.headerControlsProps,a=(this.columnVisibilityArraySelector(this.state,this.props),this.headersSelector(this.state,this.props)),l=this.rowsSelector(this.state,this.props),i=this.rowIndexesOnPage(),s=i.firstIndex,c=i.numIndexes;return r.createElement("div",{className:t},r.createElement(sr,ur({showCopyAndDownload:!0,showHideShowColumnButton:!0,handleInput:this.handleFilterInput,downloadDataGenerator:this.handleDownload,downloadDataContainsHeader:!0,downloadFilename:"mutations.csv",showSearch:!0,columnVisibilityProps:{className:"pull-right",onColumnToggled:this.handleVisibilityToggle},paginationProps:{className:"pull-right",itemsPerPage:this.state.itemsPerPage,currentPage:this.state.currentPage,onChangeItemsPerPage:this.handleChangeItemsPerPage,onPreviousPageClick:this.handlePreviousPageClick,onNextPageClick:this.handleNextPageClick,textBetweenButtons:"".concat(this.filteredDataLength?s+1:0,"-").concat(s+c," of ").concat(this.filteredDataLength),previousPageDisabled:0===this.state.currentPage,nextPageDisabled:this.state.currentPage>=this.numPages()-1}},o)),r.createElement(Yn.Table,ur({sortable:this.state.sortableColumns,filterable:this.state.filterableColumns,filterBy:this.state.filter,itemsPerPage:-1===this.state.itemsPerPage?void 0:this.state.itemsPerPage,currentPage:this.state.currentPage},n),a,l))}},{key:"componentWillUpdate",value:function(e,t){0===t.filter.length&&(this.filteredDataLength=this.props.rawData.length)}},{key:"componentDidUpdate",value:function(){this.shouldSetState&&(this.shouldSetState=!1,this.setState({currentPage:Math.max(0,Math.min(this.state.currentPage,this.numPages()-1))}))}},{key:"rowIndexesOnPage",value:function(){var e,t;return-1===this.state.itemsPerPage?(e=0,t=this.filteredDataLength):(e=this.state.itemsPerPage*this.state.currentPage,t=Math.min(this.filteredDataLength-e,this.state.itemsPerPage)),{firstIndex:e,numIndexes:t}}},{key:"numPages",value:function(e){return-1===(e=e||this.state.itemsPerPage)?1:Math.ceil(this.filteredDataLength/e)}},{key:"mapColNameToId",value:function(e){var t={};return e&&s().each(e,(function(e,n){e.name&&(t[e.name],t[e.name]=n)})),t}},{key:"resolveOrder",value:function(e){return e?s().values(e).sort(t.columnSort):[]}},{key:"resolveColumnVisibility",value:function(e,t,n){var r=[];return s().each(t,(function(t){var o=e[t.name];n[o]&&r.push({id:o,name:t.name,visibility:n[o]})})),r}},{key:"generateHeaders",value:function(e){var t=[];return s().each(e,(function(e){var n=e.header||r.createElement("span",null,e.name);if(e.description){var o=r.createElement("div",{className:"rc-tooltip-arrow-inner"});n=r.createElement(x.ZD,{overlay:r.createElement("span",null,e.description),placement:"top",arrowContent:o},n)}t.push(r.createElement(Yn.Th,{key:e.name,column:e.name},n))})),t}},{key:"generateDownloadData",value:function(e,t,n){var r=this,o=[];return o[0]=[],s().each(e,(function(e){var n=r.colNameToId[e.name];n in t&&"excluded"!==t[n]&&o[0].push(e.name)})),s().each(n,(function(a,l){var i=[];s().each(e,(function(e){var o=r.colNameToId[e.name];if(o in t&&"excluded"!==t[o]){var l=r.getColumnData(e,n,a);e.downloader?i.push(e.downloader(l,e.columnProps)):i.push((l.columnData||"").toString())}})),o.push(i)})),o}},{key:"getColumnData",value:function(e,t,n){var r={name:e.name,tableData:t,rowData:n,columnData:null};if(e.columnDataFunction)r.columnData=e.columnDataFunction(r);else if(e.dataField){var o=null;(o=s().isArray(r.rowData)&&r.rowData.length>0?r.rowData[0]:r.rowData)&&(r.columnData=o[e.dataField])}return r}},{key:"generateRows",value:function(e,t){var n=this,o=[];return s().each(t,(function(a,l){var i=n.generateColumns(e,t,a);o.push(r.createElement(Yn.Tr,{key:l,rowData:a},i))})),o}},{key:"generateColumns",value:function(e,t,n){var r=this,o=[];return s().each(e,(function(e){var a=r.getColumnData(e,t,n);o.push(r.generateColumn(a,e))})),o}},{key:"generateColumn",value:function(e,t){return t.formatter?t.formatter(e,t.columnProps):r.createElement(Yn.Td,{key:t.name,column:t.name,value:e.columnData},e.columnData)}},{key:"resolveVisible",value:function(e,t){var n={};return s().each(s().keys(t),(function(r){"visible"===t[r]&&(n[r]=e[r])})),n}},{key:"resolveSortable",value:function(e){var t=[];return s().each(e,(function(e){s().isFunction(e.sortable)?t.push({column:e.name,sortFunction:e.sortable}):e.sortable&&t.push(e.name)})),t}},{key:"resolveFilterable",value:function(e){var t=[];return s().each(e,(function(e){s().isFunction(e.filterable)?t.push({column:e.name,filterFunction:e.filterable}):e.filterable&&t.push(e.name)})),t}},{key:"handleFilterInput",value:function(e){this.setState({filter:e})}},{key:"handleDownload",value:function(){return this.downloadDataSelector(this.state,this.props)}},{key:"handleVisibilityToggle",value:function(e){var t=e,n=this.state.columnVisibility[t],r=Object.assign({},this.state.columnVisibility);"hidden"===n?n="visible":"visible"===n&&(n="hidden"),r[t]=n,this.setState({columnVisibility:r})}},{key:"handleChangeItemsPerPage",value:function(e){this.setState({itemsPerPage:e,currentPage:Math.min(this.state.currentPage,this.numPages(e)-1)})}},{key:"handlePreviousPageClick",value:function(){this.setState({currentPage:Math.max(0,this.state.currentPage-1)})}},{key:"handleNextPageClick",value:function(){this.setState({currentPage:Math.min(this.state.currentPage+1,this.numPages()-1)})}}])&&pr(n.prototype,o),a&&pr(n,a),t}(r.Component);function hr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function br(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gr(e,t){return!t||"object"!==wr(t)&&"function"!=typeof t?vr(e):t}function vr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sr(e){return(Sr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Er(e,t)}function Er(e,t){return(Er=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wr(e){return(wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var _r=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":wr(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},Or=function(e){function t(){return br(this,t),gr(this,Sr(t).apply(this,arguments))}return Pr(t,e),t}(mr),Cr=function(e){function t(e){var n;return br(this,t),n=gr(this,Sr(t).call(this,e)),Object.defineProperty(vr(n),"map_geneSymbol_selected",{enumerable:!0,configurable:!0,writable:!0,value:A.observable.map()}),Object.defineProperty(vr(n),"columns",{enumerable:!0,configurable:!0,writable:!0,value:{hugoGeneSymbol:{priority:1,dataField:"hugoGeneSymbol",name:"Gene Symbol",sortable:!0,filterable:!0},numberOfMutations:{priority:2,dataField:"numberOfMutations",name:"Num Mutations",sortable:!0,filterable:!0},qValue:{priority:3,dataField:"qValue",name:"Q-Value",sortable:!0,filterable:!0,formatter:function(e){var t=e.name,n=e.columnData;return r.createElement(Yn.Td,{key:t,column:t,value:n},(0,On.Zd)(n,2,.1))}},selected:{name:"Selected",priority:4,sortable:!1,filterable:!1,header:r.createElement("div",{className:a().selectionColumnHeader},r.createElement("span",null,"All"),r.createElement(l.Observer,null,(function(){return r.createElement(N.Z,{checked:n.selectedGenes.length>0,indeterminate:n.selectedGenes.length>0&&n.selectedGenes.length<n.allGenes.length,onChange:function(e){return n.selectAll(e.target.checked)}})}))),formatter:function(e){var t=e.name,o=e.rowData;return r.createElement(Yn.Td,{key:t,column:t},!!o&&r.createElement("div",{className:a().selectionColumnCell},r.createElement(l.Observer,null,(function(){return r.createElement(N.Z,{checked:!!n.map_geneSymbol_selected.get(o.hugoGeneSymbol),onChange:function(e){return n.map_geneSymbol_selected.set(o.hugoGeneSymbol,e.target.checked)}})}))))}}}}),(0,A.makeObservable)(vr(n)),n.map_geneSymbol_selected.replace(e.initialSelection.map((function(e){return[e,!0]}))),n}var n,o,i;return Pr(t,e),n=t,(o=[{key:"selectAll",value:function(e){var t=!0,n=!1,r=void 0;try{for(var o,a=this.allGenes[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;this.map_geneSymbol_selected.set(l,e)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:a().MutSigGeneSelector},r.createElement(Or,{itemsName:"genes",initItemsPerPage:10,columns:this.columns,rawData:this.props.data,headerControlsProps:{showCopyAndDownload:!1,showHideShowColumnButton:!1,showPagination:!0},reactTableProps:{className:"table table-striped table-border-top",hideFilterInput:!0,defaultSort:this.columns.qValue.name}}),r.createElement("div",null,r.createElement("button",{style:{marginTop:20},className:"btn btn-primary btn-sm pull-right",onClick:function(){return e.props.onSelect(e.map_geneSymbol_selected)}},"Select")))}},{key:"allGenes",get:function(){return s().uniq(this.props.data.map((function(e){return e.hugoGeneSymbol})))}},{key:"selectedGenes",get:function(){var e=this;return this.allGenes.filter((function(t){return e.map_geneSymbol_selected.get(t)}))}}])&&hr(n.prototype,o),i&&hr(n,i),t}(r.Component);_r([A.computed],Cr.prototype,"allGenes",null),_r([A.computed],Cr.prototype,"selectedGenes",null),_r([A.action],Cr.prototype,"selectAll",null);const Tr=Cr=_r([l.observer],Cr);function kr(e){return e?e.genes.map((function(e){return e.hugoGeneSymbol})):[]}var Dr=new RegExp("^([0-9]{1,2})([pq])([0-9]{1,2})(?:.?)([0-9]{0,2})$");function jr(e,t){var n=e.match(Dr),r=t.match(Dr);return n&&r?parseInt(n[1],10)-parseInt(r[1],10)!=0?parseInt(n[1],10)-parseInt(r[1],10):"p"===n[2]&&"q"===r[2]?-1:"q"===n[2]&&"p"===r[2]?1:n[2]===r[2]?parseInt(n[3],10)-parseInt(r[3],10):0:+!!n-+!!r}function Nr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ar(e,t,n){return t&&Nr(e.prototype,t),n&&Nr(e,n),e}function Ir(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rr(e,t){return!t||"object"!==Br(t)&&"function"!=typeof t?xr(e):t}function xr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mr(e){return(Mr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gr(e,t)}function Gr(e,t){return(Gr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Br(e){return(Br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Fr=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Br(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},Vr=function(e){function t(){return Ir(this,t),Rr(this,Mr(t).apply(this,arguments))}return Lr(t,e),t}(mr),Hr=function(e){function t(e){var n;return Ir(this,t),n=Rr(this,Mr(t).call(this,e)),Object.defineProperty(xr(n),"map_geneSymbol_selected",{enumerable:!0,configurable:!0,writable:!0,value:A.observable.map()}),Object.defineProperty(xr(n),"columns",{enumerable:!0,configurable:!0,writable:!0,value:{amp:{priority:1,columnDataFunction:function(e){var t=e.rowData;return t&&(t.amp?"Amp":"Del")},name:"Amp Del",sortable:!0,filterable:!0,header:r.createElement("div",{className:y()(a().header,a().amp,a().del)},r.createElement("span",{className:a().amp},"Amp"),r.createElement("span",{className:a().del},"Del")),formatter:function(e){var t=e.name,n=e.rowData,o=e.columnData;return r.createElement(Yn.Td,{key:t,column:t,value:o},!!n&&r.createElement("div",{className:n.amp?a().amp:a().del}))}},chromosome:{priority:2,dataField:"chromosome",name:"Chr",sortable:!0,filterable:!0},cytoband:{priority:3,dataField:"cytoband",name:"Cytoband",sortable:jr,filterable:!0},"#":{priority:4,columnDataFunction:function(e){return kr(e.rowData).length},name:"#",sortable:!0,filterable:!0},genes:{priority:5,columnDataFunction:function(e){return kr(e.rowData).join(" ")},name:"Genes",sortable:function(e,t){return e.length-t.length||+(e>t)-+(e<t)},filterable:!0,formatter:function(e){var t=e.name,o=e.rowData,a=e.columnData;return r.createElement(Yn.Td,{key:t,column:t,value:a},r.createElement(Qr,{gistic:o,map_geneSymbol_selected:n.map_geneSymbol_selected}))}},qValue:{priority:6,dataField:"qValue",name:"Q-Value",sortable:!0,filterable:!0,formatter:function(e){var t=e.name,n=(e.rowData,e.columnData);return r.createElement(Yn.Td,{key:t,column:t,value:n},(0,On.Zd)(n,2,.1))}}}}),n.map_geneSymbol_selected.replace(e.initialSelection.map((function(e){return[e,!0]}))),n}return Lr(t,e),Ar(t,[{key:"render",value:function(){var e=this;return r.createElement("div",{className:a().GisticGeneSelector},r.createElement("span",null,"Click on a gene to ",r.createElement("span",{className:y()(a().geneToggle,a().selected,a().simulateHovered)},"select")," it."),r.createElement(Vr,{className:a().gisticTable,itemsName:"genes",initItemsPerPage:10,columns:this.columns,rawData:this.props.data,headerControlsProps:{showCopyAndDownload:!1,showHideShowColumnButton:!1,showPagination:!0},reactTableProps:{className:"table table-striped table-border-top",hideFilterInput:!0,defaultSort:this.columns.qValue.name}}),r.createElement("div",null,r.createElement("button",{style:{marginTop:20},className:"btn btn-primary btn-sm pull-right",onClick:function(){return e.props.onSelect(e.map_geneSymbol_selected)}},"Select")))}}]),t}(r.Component);const Kr=Hr=Fr([l.observer],Hr);var Qr=function(e){function t(e){var n;return Ir(this,t),n=Rr(this,Mr(t).call(this,e)),Object.defineProperty(xr(n),"showAll",{enumerable:!0,configurable:!0,writable:!0,value:!1}),(0,A.makeObservable)(xr(n)),n}return Lr(t,e),Ar(t,[{key:"renderGeneToggles",value:function(e){var t=this;return e.map((function(e){return r.createElement(l.Observer,null,(function(){var n=!!t.props.map_geneSymbol_selected.get(e);return r.createElement("span",{key:e,className:y()(a().geneToggle,n?a().selected:a().notSelected),onClick:function(r){return t.props.map_geneSymbol_selected.set(e,!n)}},e)}))}))}},{key:"render",value:function(){var e=this,t=kr(this.props.gistic),n=t.slice(0,5),o=t.slice(5);return r.createElement("div",{className:a().GisticGeneToggles},r.createElement("div",{className:a().someGenes},this.renderGeneToggles(n),!!o.length&&r.createElement("a",{className:a().showMoreLess,onClick:function(){return e.showAll=!e.showAll}},this.showAll?"less":"+".concat(o.length," more"))),r.createElement("div",{className:a().moreGenes},this.showAll&&this.renderGeneToggles(o)))}}]),t}(r.Component);Fr([A.observable],Qr.prototype,"showAll",void 0),Qr=Fr([l.observer],Qr);var Ur=n(17790);function Zr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wr(e,t){return!t||"object"!==Xr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Yr(e){return(Yr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zr(e,t){return(zr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xr(e){return(Xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Jr=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Xr(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},$r=function(e){function t(){return Zr(this,t),Wr(this,Yr(t).apply(this,arguments))}var n,o,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zr(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){return this.store.genesetIdsQuery.error?r.createElement("div",{className:a().GeneSymbolValidator},r.createElement("span",{className:a().errorMessage},"Cannot validate gene sets because of invalid OQL. ".concat(this.store.genesetQueryErrorDisplayStatus===R.TO.Focused?"Please click 'Submit' to see location of error.":this.store.genesetIdsQuery.error.message))):this.store.genesetIdsQuery.query.length?this.store.genesets.isError?r.createElement("div",{className:a().GeneSymbolValidator},r.createElement("span",{className:a().pendingMessage},"Unable to validate gene sets.")):this.store.genesets.isPending&&0===this.store.genesets.result.invalid.length?r.createElement("div",{className:a().GeneSymbolValidator},r.createElement("span",{className:a().pendingMessage},"Validating gene sets...")):this.store.genesets.result.invalid.length?r.createElement("div",{className:a().GeneSymbolValidator},r.createElement("div",{className:a().invalidBubble,title:"Please edit the gene sets."},r.createElement(j(),{className:a().icon,name:"exclamation-circle"}),r.createElement("span",null,"Invalid gene sets.")),this.store.genesets.result.invalid.map(this.renderSuggestion,this)):r.createElement("div",{className:a().GeneSymbolValidator},r.createElement("div",{className:a().validBubble,title:"You can now submit the list."},r.createElement(j(),{className:a().icon,name:"check-circle"}),r.createElement("span",null,"All gene sets are valid."))):null}},{key:"renderSuggestion",value:function(e,t){var n=this;return r.createElement("div",{key:t,className:a().suggestionBubble,title:"Could not find gene set. Click to remove it from the gene list.",onClick:function(){return n.store.replaceGeneset(e,"")}},r.createElement(j(),{className:a().icon,name:"times-circle"}),r.createElement("span",{className:a().noChoiceLabel},e))}}])&&qr(n.prototype,o),l&&qr(n,l),t}(R.cx);const eo=$r=Jr([l.observer],$r);var to=n(94916);function no(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ro(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oo(e){return(oo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ao(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lo(e,t){return(lo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function io(e){return(io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var so=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":io(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},co=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==io(t)&&"function"!=typeof t?ao(e):t}(this,oo(t).call(this,e)),(0,A.makeObservable)(ao(n)),n}var n,o,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lo(e,t)}(t,e),n=t,(o=[{key:"handleOQLUpdate",value:function(e,t,n){n!==this.store.geneQuery&&(this.store.geneQuery=n,this.store.oql.error=e.error)}},{key:"render",value:function(){var e=this;return r.createElement(C,{overflow:!0,padded:!0,className:a().GeneSetSelector},r.createElement(ze,{className:"sectionLabel",secondaryComponent:r.createElement("a",{target:"_blank",className:a().learnOql,href:(0,I.EC)()},r.createElement("strong",null,"Hint:")," Learn Onco Query Language (OQL)",r.createElement("br",null),"to write more powerful queries"," ",r.createElement("i",{className:"fa fa-external-link"}))},"Enter Genes:"),r.createElement(T,{overflow:!0},r.createElement(ln.default,{value:this.selectedGeneListOption,options:this.geneListOptions,onChange:function(t){return e.store.geneQuery=t?t.value:""}}),r.createElement(Ur.Z,{focus:this.store.geneQueryErrorDisplayStatus,inputGeneQuery:this.store.geneQuery,validateInputGeneQuery:!0,location:Ur.e.DEFAULT,textBoxPrompt:"Enter HUGO Gene Symbols, Gene Aliases, or OQL",callback:this.handleOQLUpdate,error:this.store.submitError,messages:this.store.oqlMessages},this.customError),r.createElement(eo,null),r.createElement(Xe.Modal,{className:y()("cbioportal-frontend",a().MutSigGeneSelectorWindow),show:this.store.showMutSigPopup,onHide:function(){return e.store.showMutSigPopup=!1}},r.createElement(Xe.Modal.Header,{closeButton:!0},r.createElement(Xe.Modal.Title,null,"Recently Mutated Genes")),r.createElement(Xe.Modal.Body,null,r.createElement(Tr,{initialSelection:this.store.geneIds,data:this.store.mutSigForSingleStudy.result,onSelect:function(t){e.store.applyGeneSelection(t),e.store.showMutSigPopup=!1}}))),r.createElement(Xe.Modal,{className:y()("cbioportal-frontend",a().GisticGeneSelectorWindow),show:this.store.showGisticPopup,onHide:function(){return e.store.showGisticPopup=!1}},r.createElement(Xe.Modal.Header,{closeButton:!0},r.createElement(Xe.Modal.Title,null,"Recurrent Copy Number Alterations (Gistic)")),r.createElement(Xe.Modal.Body,null,r.createElement(Kr,{initialSelection:this.store.geneIds,data:this.store.gisticForSingleStudy.result,onSelect:function(t){e.store.applyGeneSelection(t),e.store.showGisticPopup=!1}})))))}},{key:"selectedGeneListOption",get:function(){var e=this,t=this.geneListOptions.find((function(t){return t.value==e.store.geneQuery}));return t?t.value:""}},{key:"geneListOptions",get:function(){var e=qt;if((0,K.Ib)().query_sets_of_genes){var t=K.v4.parseQuerySetsOfGenes((0,K.Ib)().query_sets_of_genes);t&&(e=t)}return[{label:"User-defined List",value:""}].concat(no(e.map((function(e){return{label:"".concat(e.id," (").concat(e.genes.length," genes)"),value:e.genes.join(" ")}}))))}},{key:"customError",get:function(){return this.store.isQueryLimitReached?r.createElement("div",{className:a().geneCount},r.createElement("div",{className:"",title:"Please limit your queries to ".concat(this.store.geneLimit," genes or fewer.")},r.createElement(j(),{className:a().icon,name:"exclamation-circle"}),r.createElement(to.Z,{sampleCount:this.store.approxSampleCount,queryProductLimit:(0,K.Ib)().query_product_limit,email:(0,K.Ib)().skin_email_contact}))):null}}])&&ro(n.prototype,o),l&&ro(n,l),t}(R.cx);so([A.computed],co.prototype,"selectedGeneListOption",null),so([A.computed],co.prototype,"geneListOptions",null),so([A.action.bound],co.prototype,"handleOQLUpdate",null),so([A.computed],co.prototype,"customError",null);const uo=co=so([l.observer],co);var po,fo=n(67416);!function(e){e.custom="-1",e.mutation_cna="w_mut_cna",e.mutation="w_mut",e.cna="w_cna",e.all="all"}(po||(po={}));var yo=[{name:"All",description:"All cases in the selected cohorts",value:po.all,isdefault:!1},{name:"Cases with mutations data",description:"All cases with mutations data",value:po.mutation,isdefault:!1},{name:"Cases with copy number alterations data",description:"All cases with copy number alterations data",value:po.cna,isdefault:!1},{name:"Cases with both mutations and copy number alterations data",description:"All cases with both mutations and copy number alterations data",value:po.mutation_cna,isdefault:!1},{name:"User-defined Case List",description:"Specify your own case list",value:po.custom,isdefault:!0}];function mo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ho(e){return(ho=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function go(e,t){return(go=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vo(e){return(vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var So=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":vo(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l};function Po(e,t){return s().includes(e.textLabel.toLowerCase(),t.toLowerCase())}var Eo=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==vo(t)&&"function"!=typeof t?bo(e):t}(this,ho(t).call(this,e)),Object.defineProperty(bo(n),"isQueryModified",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(bo(n),"CaseIdsModeRadio",{enumerable:!0,configurable:!0,writable:!0,value:(0,l.observer)((function(e){return r.createElement("label",null,r.createElement("input",{type:"radio",checked:n.store.caseIdsMode==e.state,onChange:function(t){t.currentTarget.checked&&(n.store.caseIdsMode=e.state)}}),e.label)}))}),(0,A.makeObservable)(bo(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&go(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){var e=this;return!this.isQueryModified&&this.props.modifyQueryParams&&this.modifyQuery(),this.store.selectableSelectedStudyIds.length?r.createElement(C,{padded:!0,overflow:!0,className:a().CaseSetSelector,"data-test":"CaseSetSelector"},r.createElement("div",null,r.createElement(ze,{className:"sectionLabel",secondaryComponent:r.createElement("a",{href:(0,I.yY)(this.store.selectableSelectedStudyIds),target:"_blank"},"To build your own case set,",r.createElement("br",null),"try out our enhanced Study View."),promises:[this.store.sampleLists,this.store.asyncCustomCaseSet,this.store.profiledSamplesCount]},"Select Patient/Case Set:")),r.createElement("div",null,r.createElement(ln.default,{value:this.store.selectedSampleListId,options:this.caseSetOptions,filterOption:Po,onChange:function(t){return e.store.selectedSampleListId=t?t.value:void 0},"data-test":"caseSetSelector"}),!(this.store.selectedSampleListId!==R.K1)&&r.createElement(T,{padded:!0},r.createElement("div",{className:a().radioRow},r.createElement(C,{padded:!0},r.createElement(this.CaseIdsModeRadio,{label:"By sample ID",state:"sample"}),r.createElement(this.CaseIdsModeRadio,{label:"By patient ID",state:"patient"}))),r.createElement("span",null,"Enter case IDs below:"),r.createElement("textarea",{title:"Enter case IDs",rows:6,cols:80,value:this.store.caseIds,onChange:function(t){return e.store.caseIds=t.currentTarget.value},"data-test":"CustomCaseSetInput"})))):null}},{key:"modifyQuery",value:function(){this.store.selectedSampleListId=this.props.modifyQueryParams.selectedSampleListId,this.store.caseIds=this.props.modifyQueryParams.selectedSampleIds.join("\n"),this.store.caseIdsMode=this.props.modifyQueryParams.caseIdsMode,this.isQueryModified=!0}},{key:"caseSetOptions",get:function(){var e,t,n,o=this.store.sampleLists.result.map((function(e){return{label:r.createElement(x.ZD,{placement:"right",mouseEnterDelay:0,overlay:r.createElement("div",{className:a().tooltip},e.description)},r.createElement("span",null,"".concat(e.name," (").concat(e.sampleCount,")"))),value:e.sampleListId,textLabel:e.name}})),l=(e=this.store.isVirtualStudySelected,t=this.store.isMultipleNonVirtualStudiesSelected,n=this.store.profiledSamplesCount.result,s().reduce(yo,(function(r,o){if(o.isdefault)r.push(o);else if(t&&!e){var a=n[o.value];a>0&&r.push(Object.assign({},o,{name:"".concat(o.name," (").concat(a,")")}))}else if(e&&o.value===po.all){var l=n[o.value];l>0&&r.push(Object.assign({},o,{name:"".concat(o.name," (").concat(l,")")}))}return r}),[])).map((function(e){return{value:e.value,label:r.createElement(x.ZD,{placement:"right",mouseEnterDelay:0,overlay:r.createElement("div",{className:a().tooltip},e.description)},r.createElement("span",null,e.name)),textLabel:e.name}}));return o.concat(l)}}])&&mo(n.prototype,o),i&&mo(n,i),t}(R.cx);So([A.computed],Eo.prototype,"caseSetOptions",null),So([A.action],Eo.prototype,"modifyQuery",null);const wo=Eo=So([l.observer],Eo);function _o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Co(e,t){return!t||"object"!==Do(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function To(e){return(To=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ko(e,t){return(ko=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Do(e){return(Do="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var jo=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Do(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},No=function(e){function t(){return _o(this,t),Co(this,To(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ko(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){return this.props.ids.length>0?r.createElement("div",{className:"alert alert-danger","data-test":"unkown-study-warning",style:{marginBottom:0}},r.createElement("i",{className:"fa fa-exclamation-triangle"})," The following studies do not exist or you do not have access to them:",r.createElement("ul",{style:{margin:"10px 0"}},this.props.ids.map((function(e){return r.createElement("li",null,e)}))),"Please resubmit your query below."):null}}])&&Oo(n.prototype,o),a&&Oo(n,a),t}(r.Component);const Ao=No=jo([l.observer],No);var Io=n(5933),Ro=n(10643),xo=n(58997);function Mo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lo(e){return(Lo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Go(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bo(e,t){return(Bo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fo(e){return(Fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Vo=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Fo(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},Ho=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==Fo(t)&&"function"!=typeof t?Go(e):t}(this,Lo(t).call(this,e)),Object.defineProperty(Go(n),"_showQueryControls",{enumerable:!0,configurable:!0,writable:!0,value:!1}),(0,A.makeObservable)(Go(n)),n.handleSubmit=n.handleSubmit.bind(Go(n)),n}var n,o,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bo(e,t)}(t,e),n=t,(o=[{key:"handleSubmit",value:function(){this.store.submit(),this.props.onSubmit&&this.props.onSubmit()}},{key:"toggleQueryControls",value:function(){Yt()(document).scrollTop(0),this._showQueryControls=!this._showQueryControls}},{key:"render",value:function(){var e=this;return r.createElement(T,{padded:!0,overflow:!0,className:y()("small",a().QueryContainer,{forkedMode:this.props.forkedMode})},this.props.showAlerts&&this.store.genes.isComplete&&this.store.genes.result.suggestions.length>0&&r.createElement("div",{className:"alert alert-danger","data-test":"invalidQueryAlert",style:{marginBottom:0}},r.createElement("i",{className:"fa fa-exclamation-triangle"})," Your query has invalid or out-dated gene symbols. Please correct below."),this.store.unknownStudyIds.isComplete&&r.createElement(Ao,{ids:this.store.unknownStudyIds.result}),this.store.forDownloadTab&&r.createElement("div",{className:"alert alert-danger",role:"alert"},"The Download interface has been removed. Enhanced download functionality is now available through the Query interface. Run a query with your gene(s) of interest and use the Download tab to download all available data types."),!this.store.forDownloadTab&&r.createElement(Ce.If,{condition:0===this.store.defaultSelectedIds.size||this.studiesDataReady},r.createElement(Ce.Then,null,r.createElement(Ce.If,{condition:this.props.forkedMode&&this.showQueryControls},r.createElement(C,{className:a().StudySelection},r.createElement(ze,{className:"sectionLabel"},"Selected Studies:"," ",r.createElement("button",{"data-test":"modifyStudySelectionButton",className:"btn btn-default btn-xs",onClick:this.toggleQueryControls},"Modify")),r.createElement("div",{style:{marginLeft:8}},this.selectedStudySummary))),this.getWrappedCancerStudySelector,r.createElement(Ce.If,{condition:this.showQueryControls},r.createElement(r.Fragment,null,this.store.physicalStudyIdsInSelection.length>1?r.createElement(Ut,null):r.createElement(It,null),this.store.selectableSelectedStudyIds.length>0&&r.createElement(wo,{modifyQueryParams:this.props.modifyQueryParams}),r.createElement(uo,null),!!this.store.isGenesetProfileSelected&&r.createElement(qn,null),!!this.store.forDownloadTab&&r.createElement("span",{className:a().downloadSubmitExplanation},"Clicking submit will generate a tab-delimited file containing your requested data."),!!this.store.forDownloadTab&&r.createElement(N.Z,{labelProps:{className:a().transposeDataMatrix},checked:this.store.transposeDataMatrix,onChange:function(t){return e.store.transposeDataMatrix=t.currentTarget.checked}},"Transpose data matrix"),r.createElement(C,{overflow:!0,padded:!0,className:y()(a().submitRow,"posRelative")},r.createElement("button",{style:{paddingLeft:50,paddingRight:50,marginRight:50},disabled:!this.store.submitEnabled,className:"btn btn-primary btn-lg",onClick:function(){return e.handleSubmit()},"data-test":"queryButton"},this.store.forDownloadTab?"Download":"Submit Query")))),r.createElement(Ce.If,{condition:!this.showQueryControls},r.createElement(C,{className:a().forkedButtons},r.createElement("div",{style:{width:330,textAlign:"right",marginRight:20}},r.createElement(ut,{store:this.store})),r.createElement(x.ZD,{placement:"top",trigger:["hover"],destroyTooltipOnHide:!0,mouseEnterDelay:0,mouseLeaveDelay:0,disabled:this.store.selectableSelectedStudies.length>0,overlay:this.queryByGeneTooltipMessage},r.createElement("a",{"data-test":"queryByGeneButton",onClick:function(){return e.store.hasSelectedStudies&&e.toggleQueryControls()},"data-event":(0,xo.XO)({action:"clickQueryByGeneButton",label:"",category:"homePage"}),className:y()("btn btn-primary btn-lg",{disabled:!this.store.hasSelectedStudies})},"Query By Gene")),"OR",r.createElement(x.ZD,{placement:"top",trigger:["hover"],destroyTooltipOnHide:!0,mouseEnterDelay:0,mouseLeaveDelay:0,disabled:!this.exploreCohortsButtonDisabled,overlay:this.exploreCohortsButtonTooltipMessage},r.createElement("a",{onClick:function(){return!e.exploreCohortsButtonDisabled&&e.store.openSummary()},"data-event":(0,xo.XO)({action:"clickExploreStudiesButton",label:"",category:"homePage"}),className:y()("btn btn-primary btn-lg",{disabled:this.exploreCohortsButtonDisabled})},r.createElement("i",{style:{marginTop:5},className:"ci ci-pie-chart"})," ","Explore Selected Studies"))))),r.createElement(Ce.Else,null,r.createElement(B.Z,{isLoading:!0,center:!0,size:"big"}))))}},{key:"store",get:function(){return this.props.store}},{key:"studiesDataReady",get:function(){return this.store.studiesHaveChangedSinceInitialization||this.store.selectableStudiesSet.isComplete&&this.store.initiallySelected.profileIds&&this.store.cancerTypes.isComplete&&this.store.cancerStudies.isComplete&&this.store.profiledSamplesCount.isComplete}},{key:"showQueryControls",get:function(){return!1===this.props.forkedMode||this._showQueryControls}},{key:"selectedStudySummary",get:function(){var e=this,t=null;return this.store.selectableSelectedStudies.length>4&&(t=r.createElement("span",{className:"inlineBlock"},r.createElement(x.ZD,{overlay:function(){return e.store.selectableSelectedStudies.slice(4).map((function(e){return r.createElement("div",null,e.name)}))}},r.createElement("a",null,"and"," ",this.store.selectableSelectedStudies.length-4," ","more")))),r.createElement("span",{className:"inlineBlock"},this.store.selectableSelectedStudies.slice(0,4).reduce((function(e,t,n,o){return e.push(r.createElement("span",{className:a().studyName},t.name)),e}),[]),t,t&&r.createElement("span",null," "),"(",r.createElement("b",null,this.store.profiledSamplesCount.result.all)," ",1===this.store.profiledSamplesCount.result.all?"sample":"total samples",")")}},{key:"getWrappedCancerStudySelector",get:function(){var e=r.createElement(Pt,{queryStore:this.store,forkedMode:this.props.forkedMode});return this.props.forkedMode?r.createElement("div",{style:{marginTop:0}},r.createElement(Ro.pT,{duration:500,collapse:!1,className:"monkeys",unmountOnExit:!0,when:!this.showQueryControls},e)):e}},{key:"studyLimitedReached",get:function(){return this.store.selectableSelectedStudyIds.length>50}},{key:"exploreCohortsButtonDisabled",get:function(){return this.studyLimitedReached||!this.store.hasSelectedStudies}},{key:"exploreCohortsButtonTooltipMessage",get:function(){return 0===this.store.selectableSelectedStudyIds.length?"Please select at least one study above":this.studyLimitedReached?"Too many studies selected for study summary (limit: 50)":"Open summary of selected studies"}},{key:"queryByGeneTooltipMessage",get:function(){return 0===this.store.selectableSelectedStudies.length?"Please select at least one study above":"Continue to query configuration"}}])&&Mo(n.prototype,o),l&&Mo(n,l),t}(r.Component);Vo([A.computed],Ho.prototype,"studiesDataReady",null),Vo([A.observable],Ho.prototype,"_showQueryControls",void 0),Vo([A.computed],Ho.prototype,"showQueryControls",null),Vo([A.computed],Ho.prototype,"selectedStudySummary",null),Vo([A.computed],Ho.prototype,"getWrappedCancerStudySelector",null),Vo([Io.default],Ho.prototype,"toggleQueryControls",null),Vo([A.computed],Ho.prototype,"studyLimitedReached",null),Vo([A.computed],Ho.prototype,"exploreCohortsButtonDisabled",null),Vo([A.computed],Ho.prototype,"exploreCohortsButtonTooltipMessage",null),Vo([A.computed],Ho.prototype,"queryByGeneTooltipMessage",null);const Ko=Ho=Vo([(0,fo.Z)(R.yL),l.observer],Ho);var Qo,Uo=n(21015),Zo=n(38659);!function(e){e.STUDY="STUDY",e.STUDY_COUNT="studies",e.GENE="GENE",e.GENE_COUNT="genes",e.PATIENT="PATIENT",e.PATIENT_COUNT="patients",e.SAMPLE="SAMPLE",e.SAMPLE_COUNT="samples"}(Qo||(Qo={}));var qo=n(89551),Wo=n(95356),Yo=n(2958),zo=n.n(Yo),Xo=n(28676),Jo=n(95497);function $o(){return($o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ea(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ta(e){return(ta=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function na(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ra(e,t){return(ra=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oa(e){return(oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var aa,la=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":oa(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},ia=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function l(e){try{s(r.next(e))}catch(e){a(e)}}function i(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}s((r=r.apply(e,t||[])).next())}))},sa=20;!function(e){e[e.SESSION=0]="SESSION",e[e.STUDY_LIST=1]="STUDY_LIST"}(aa||(aa={}));var ca=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==oa(t)&&"function"!=typeof t?na(e):t}(this,ta(t).call(this,e)),Object.defineProperty(na(n),"select",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(na(n),"studyPageMultiplier",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(na(n),"genePageMultiplier",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(na(n),"patientPageMultiplier",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(na(n),"samplePageMultiplier",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(na(n),"inputValue",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(na(n),"isFocusing",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(na(n),"isLoading",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(na(n),"geneStudyQueryVirtualStudy",{enumerable:!0,configurable:!0,writable:!0,value:(0,x.$w)((function(){return ia(na(n),void 0,void 0,regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,K.Ib)().default_cross_cancer_study_session_id,!K.v4.sessionServiceIsEnabled()||!t){e.next=14;break}return e.prev=2,e.next=5,Xo.Z.getVirtualStudy(t);case 5:return n=e.sent,e.abrupt("return",n);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:e.next=15;break;case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))}),null)}),Object.defineProperty(na(n),"geneStudyQuery",{enumerable:!0,configurable:!0,writable:!0,value:(0,x.$w)({await:function(){return[n.geneStudyQueryVirtualStudy]},invoke:function(){return n.geneStudyQueryVirtualStudy.result?Promise.resolve({type:aa.SESSION,query:n.geneStudyQueryVirtualStudy.result.id,name:n.geneStudyQueryVirtualStudy.result.data.name}):Promise.resolve({type:aa.STUDY_LIST,query:(0,K.Ib)().default_cross_cancer_study_list,name:(0,K.Ib)().default_cross_cancer_study_list_name})}})}),Object.defineProperty(na(n),"options",{enumerable:!0,configurable:!0,writable:!0,value:(0,x.$w)({await:function(){return[n.geneStudyQuery]},invoke:function(){var e=n.inputValue,t=n.geneStudyQuery.result;return e.length>0?Promise.all([G.Z.getAllStudiesUsingGETWithHttpInfo({keyword:e,pageSize:3+sa*n.studyPageMultiplier}),G.Z.getAllStudiesUsingGETWithHttpInfo({keyword:e,projection:"META"}),G.Z.getAllGenesUsingGETWithHttpInfo({keyword:e,pageSize:3+sa*n.genePageMultiplier}),G.Z.getAllGenesUsingGETWithHttpInfo({keyword:e,projection:"META"}),G.Z.getAllPatientsUsingGETWithHttpInfo({keyword:e,pageSize:3+sa*n.patientPageMultiplier,projection:"DETAILED"}),G.Z.getAllPatientsUsingGETWithHttpInfo({keyword:e,projection:"META"}),G.Z.getSamplesByKeywordUsingGETWithHttpInfo({keyword:e,pageSize:3+sa*n.samplePageMultiplier}),G.Z.getSamplesByKeywordUsingGETWithHttpInfo({keyword:e,projection:"META"}),(0,qo._)(0)]).then((function(r){return ia(na(n),void 0,void 0,regeneratorRuntime.mark((function n(){var o,a,l,i,s,c,u,p,f,d,y,m=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=r[0].body.map(this.studyToOption),a={value:parseInt(r[1].headers["total-count"])-o.length,type:Qo.STUDY_COUNT},l=r[2].body.map(this.geneToOption),i={value:parseInt(r[3].headers["total-count"])-l.length,type:Qo.GENE_COUNT},s=r[4].body.map(this.patientToOption),c={value:parseInt(r[5].headers["total-count"])-s.length,type:Qo.PATIENT_COUNT},u=r[6].body.map(this.sampleToOption),p={value:parseInt(r[7].headers["total-count"])-u.length,type:Qo.SAMPLE_COUNT},!(l.length+s.length<6&&a.value>0)){n.next=13;break}return f=6-(l.length+s.length),n.next=12,G.Z.getAllStudiesUsingGETWithHttpInfo({keyword:e,pageSize:f+3+sa*this.studyPageMultiplier}).then((function(e){o=e.body.map(m.studyToOption)}));case 12:a.value=a.value-f;case 13:return d=[],(y=[]).push({label:"Studies",options:o,groupData:a,instruction:"Click on a study to open its summary"}),a.value>0&&(o.push(a),d.push(a)),t&&(y.push({label:"Genes",options:l,groupData:i,instruction:"Click on a gene to query it across ".concat(t.name)}),i.value>0&&(l.push(i),d.push(i))),y.push({label:"Patients",options:s,groupData:c,instruction:"Click on a patient to see a summary"}),c.value>0&&(s.push(c),d.push(c)),y.push({label:"Samples",options:u,groupData:p,instruction:"Click on a sample to open its summary"}),p.value>0&&(u.push(p),d.push(p)),n.abrupt("return",y);case 23:case"end":return n.stop()}}),n,this)})))})):Promise.resolve([])}})}),(0,A.makeObservable)(na(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ra(e,t)}(t,e),n=t,(o=[{key:"selectRef",value:function(e){this.select=e}},{key:"studyToOption",value:function(e,t){return{value:e.studyId,type:Qo.STUDY,studyId:e.studyId,name:e.name,allSampleCount:e.allSampleCount,index:t}}},{key:"geneToOption",value:function(e,t){return{value:e.entrezGeneId,type:Qo.GENE,hugoGeneSymbol:e.hugoGeneSymbol,cytoband:e.cytoband,index:t}}},{key:"patientToOption",value:function(e,t){return{value:e.uniquePatientKey,type:Qo.PATIENT,studyId:e.studyId,patientId:e.patientId,studyName:e.cancerStudy.name,index:t}}},{key:"sampleToOption",value:function(e,t){return{value:e.sampleId,type:Qo.SAMPLE,studyId:e.studyId,studyName:this.studies.get(e.studyId),patientId:e.patientId,sampleType:e.sampleType,index:t}}},{key:"handleChange",value:function(e){var t,n;if(e.type===Qo.STUDY)t={id:e.studyId},n=Jo._.Study,this.trackClick(Jo._.Study,this.inputValue);else if(e.type===Qo.GENE){var r=this.geneStudyQuery.isComplete&&this.geneStudyQuery.result.query;t={case_set_id:"all",gene_list:e.hugoGeneSymbol,cancer_study_list:r},n="results/cancerTypesSummary",this.trackClick("gene",this.inputValue)}else e.type===Qo.PATIENT?(t={studyId:e.studyId,caseId:e.patientId},n=Jo._.Patient,this.trackClick(Jo._.Patient,this.inputValue)):e.type===Qo.SAMPLE?(t={studyId:e.studyId,sampleId:e.value},n=Jo._.Patient,this.trackClick("sample",this.inputValue)):e.type===Qo.STUDY_COUNT?this.studyPageMultiplier++:e.type===Qo.GENE_COUNT?this.genePageMultiplier++:e.type===Qo.PATIENT_COUNT?this.patientPageMultiplier++:e.type===Qo.SAMPLE_COUNT&&this.samplePageMultiplier++;n&&(0,x.hZ)().routingStore.updateRoute(t,n)}},{key:"trackClick",value:function(e,t){(0,xo.L9)({category:"quickSearch",action:e,label:t})}},{key:"handleInputChange",value:function(e,t){var n=t.action;"set-value"!==n&&(e!=this.inputValue&&(this.studyPageMultiplier=0,this.genePageMultiplier=0,this.patientPageMultiplier=0,this.samplePageMultiplier=0),"input-change"===n&&(this.inputValue=e)),"input-blur"===n&&(this.isFocusing=!1)}},{key:"onFocus",value:function(){this.isFocusing=!0}},{key:"renderInput",value:function(e){return delete e.value,console.log(e),r.createElement("div",{className:"Select-input"},r.createElement("input",$o({placeholder:"e.g. Lung, EGFR, TCGA-OR-A5J2"},e)))}},{key:"render",value:function(){return r.createElement("div",{onFocusCapture:this.onFocus},r.createElement(Zo.default,{options:this.options.result||[],autoFocus:!0,onInputChange:this.handleInputChange,onChange:this.handleChange,components:{Group:pa,GroupHeading:fa},formatOptionLabel:da,controlShouldRenderValue:!1,filterOption:!1,inputValue:this.inputValue,isLoading:this.options.isPending,placeholder:"e.g. Lung, EGFR, TCGA-OR-A5J2",noOptionsMessage:function(){return"No results"},blurInputOnSelect:!1,closeMenuOnSelect:!1,onSelectResetsInput:!1,menuIsOpen:this.menuIsOpen,maxMenuHeight:550,styles:{dropdownIndicator:function(){return{display:"none"}},control:function(e){return Object.assign(Object.assign({},e),{cursor:"text"})},option:function(e,t){return t.isSelected?Object.assign(Object.assign({},e),{backgroundColor:"inherit",color:"inherit",":hover":{backgroundColor:"#DEEBFF"}}):Object.assign({},e)}}}),r.createElement("p",{style:{fontSize:"x-small",textAlign:"center",paddingTop:15}},"We would love to hear what you think: ",r.createElement("a",{href:"mailto:cbioportal@googlegroups.com"},"cbioportal@googlegroups.com")))}},{key:"menuIsOpen",get:function(){return this.isFocusing&&this.inputValue.length>0}},{key:"studies",get:function(){return this.props.studies.reduce((function(e,t){return e.set(t.studyId,t.name),e}),new Map)}}])&&ea(n.prototype,o),a&&ea(n,a),t}(r.Component);la([A.observable],ca.prototype,"studyPageMultiplier",void 0),la([A.observable],ca.prototype,"genePageMultiplier",void 0),la([A.observable],ca.prototype,"patientPageMultiplier",void 0),la([A.observable],ca.prototype,"samplePageMultiplier",void 0),la([A.observable],ca.prototype,"inputValue",void 0),la([A.observable],ca.prototype,"isFocusing",void 0),la([A.observable],ca.prototype,"isLoading",void 0),la([A.computed],ca.prototype,"menuIsOpen",null),la([A.computed],ca.prototype,"studies",null),la([Io.default],ca.prototype,"selectRef",null),la([Io.default],ca.prototype,"sampleToOption",null),la([A.action.bound],ca.prototype,"handleChange",null),la([A.action.bound],ca.prototype,"handleInputChange",null),la([A.action.bound],ca.prototype,"onFocus",null),la([Io.default],ca.prototype,"renderInput",null);const ua=ca=la([l.observer],ca);var pa=function(e){var t=e.data.groupData;t.value,zo()(t.type,t.value),t.value<sa&&t.value;return r.createElement("div",{className:Wo.optionGroup},r.createElement("div",{className:Wo.groupHeader},e.data.instruction),r.createElement(Zo.components.Group,e))},fa=function(e){return null};function da(e){var t,n,o;return e.type===Qo.STUDY?(t=e.name,n="primary",o=e.allSampleCount+" samples","Select a study to open its summary"):e.type===Qo.GENE?(t=e.hugoGeneSymbol,n="success",o=e.cytoband||"-","Select a gene to query it across all TCGA PanCancer Atlas studies"):e.type===Qo.PATIENT?(t=e.patientId,n="danger",o=e.studyName,"Select a patient to see a summary"):e.type===Qo.SAMPLE?(t=e.value,n="warning",o="".concat(e.studyName?e.studyName:e.studyId),"Select a sample to open its summary"):t=e.value+" more "+zo()(e.type,e.value)+" (click to load "+(e.value<sa?e.value:sa)+" more)",r.createElement("div",{className:Wo.optionWrapper},n&&r.createElement("div",{className:Wo.optionLabelWrapper},r.createElement(Xe.Label,{bsStyle:n},e.type)),r.createElement("div",null,r.createElement("div",null,r.createElement("strong",null,t)),o&&r.createElement("small",null,o)))}function ya(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ma(e){return(ma=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ha(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ba(e,t){return(ba=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ga(e){return(ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var va=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ga(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},Sa="download",Pa="quickSearch",Ea="defaultHomePageTab",wa=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==ga(t)&&"function"!=typeof t?ha(e):t}(this,ma(t).call(this,e)),Object.defineProperty(ha(n),"store",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(ha(n),"activeTabId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),(0,A.makeObservable)(ha(n)),e.showQuickSearchTab&&(0,x.hZ)().localStorage.getItem(Ea)===Pa&&(n.activeTabId=(0,x.hZ)().localStorage.getItem(Ea)),n.store=e.getQueryStore(),n}var n,o,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ba(e,t)}(t,e),n=t,(o=[{key:"setDefaultTab",value:function(e){this.props.showQuickSearchTab&&((0,x.hZ)().localStorage.defaultHomePageTab=e===Pa?Pa:void 0)}},{key:"trackQuickSearch",value:function(){(0,xo.L9)({category:"quickSearch",action:"quickSearchLoad"})}},{key:"onSelectTab",value:function(e){this.store.forDownloadTab=e===Sa,this.activeTabId=e}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:a().QueryAndDownloadTabs},r.createElement(Ce.If,{condition:(0,K.Ib)().skin_citation_rule_text},r.createElement("div",{className:"citationRule",dangerouslySetInnerHTML:{__html:(0,K.Ib)().skin_citation_rule_text}})),r.createElement(Uo.Kh,{activeTabId:this.activeTabId,onTabClick:this.onSelectTab,className:"mainTabs"},r.createElement(Uo.l6,{id:"advanced",linkText:"Query",onTabDidMount:function(){return e.setDefaultTab(void 0)}},r.createElement(Ko,{forkedMode:this.props.forkedMode,onSubmit:this.props.onSubmit,store:this.store,modifyQueryParams:this.props.modifyQueryParams,showAlerts:this.props.showAlerts})),r.createElement(Uo.l6,{id:Pa,linkText:r.createElement("span",null,"Quick Search"," ",r.createElement("strong",{className:"beta-text"},"Beta!")),hide:!this.props.showQuickSearchTab,onTabDidMount:function(){e.setDefaultTab(Pa),e.trackQuickSearch()}},r.createElement("div",null,this.store.cancerStudies.isComplete&&r.createElement(ua,{studies:this.store.cancerStudies.result}))),r.createElement(Uo.l6,{id:Sa,linkText:"Download",hide:!this.props.showDownloadTab,onTabDidMount:function(){return e.setDefaultTab(void 0)}},r.createElement(Ko,{forkedMode:!1,onSubmit:this.props.onSubmit,store:this.store,showAlerts:this.props.showAlerts}))))}},{key:"quickSearchDefaulted",get:function(){return(0,x.hZ)().localStorage.getItem(Ea)===Pa}}])&&ya(n.prototype,o),l&&ya(n,l),t}(r.Component);Object.defineProperty(wa,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{forkedMode:!0}}),va([A.observable.ref],wa.prototype,"store",void 0),va([A.observable.ref],wa.prototype,"activeTabId",void 0),va([Io.default],wa.prototype,"setDefaultTab",null),va([A.action.bound],wa.prototype,"onSelectTab",null);const _a=wa=va([l.observer],wa)},39887:(e,t,n)=>{"use strict";n.d(t,{S:()=>i});var r=n(13654),o=n(49199),a=n(41359),l=n(60138);function i(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=window,s=new r.yL(e);return s.singlePageAppSubmitRoutine=function(r){(r.cancer_study_list=r.cancer_study_list||r.cancer_study_id,delete r.cancer_study_id,e)&&((e.cancer_study_id!==r.cancer_study_id||e.cancer_study_list!==r.cancer_study_list||(0,l.Z)(e.case_ids,"")!==(0,l.Z)(r.case_ids,"")||e.case_set_id!==r.case_set_id)&&(r.comparison_createdGroupsSessionId=void 0,r.plots_horz_selection=void 0,r.plots_vert_selection=void 0,r.plots_coloring_selection=void 0));var c=s.physicalStudyIdsInSelection.length>1&&1===s.geneIds.length?o.PC.CANCER_TYPES_SUMMARY:o.PC.ONCOPRINT,u=t||new a.Z(i.routingStore);u.updateURL(r,"results/".concat(c),n,!1),void 0===t&&u.destroy()},s}},68084:e=>{e.exports={portalWidth:"styles-module__portalWidth__3FkcF",framedImage:"styles-module__framedImage__Jd87U",error:"styles-module__error__19z3B",icon:"styles-module__icon__1tBLC"}},4831:e=>{e.exports={portalWidth:"styles-module__portalWidth__3uFIJ",framedImage:"styles-module__framedImage__3chnD",padded:"styles-module__padded__3vpqj",column:"styles-module__column__2pa-R",row:"styles-module__row__3l99O"}},95356:e=>{e.exports={portalWidth:"styles-module__portalWidth__3ybLz",framedImage:"styles-module__framedImage__1LRLJ",optionGroup:"styles-module__optionGroup__2f4nW",groupHeader:"styles-module__groupHeader__1pzK0",optionWrapper:"styles-module__optionWrapper__10YFL",optionLabelWrapper:"styles-module__optionLabelWrapper__Nj0Ws"}},69858:e=>{e.exports={portalWidth:"styles-module__portalWidth__agNQJ",framedImage:"styles-module__framedImage__JjRC-",selectAllStudies:"styles-module__selectAllStudies__2gWhF",SelectedStudyList:"styles-module__SelectedStudyList__27Hpt",StudyList:"styles-module__StudyList__2mxsz",deselectAll:"styles-module__deselectAll__26p-l",Level0:"styles-module__Level0__1RUPZ",Level1:"styles-module__Level1__2R0IW",Level3:"styles-module__Level3__1vXaT",Level4:"styles-module__Level4__3ZJ1g",Level2:"styles-module__Level2__3AEJ-",CancerType:"styles-module__CancerType__Zm_qX",Study:"styles-module__Study__398QL",indentArrow:"styles-module__indentArrow__32udx",SelectAll:"styles-module__SelectAll__3SSsJ",StudyName:"styles-module__StudyName__3IA_4",DeletedStudy:"styles-module__DeletedStudy__2axOg",UnauthorizedStudy:"styles-module__UnauthorizedStudy__3bdRb",StudySamples:"styles-module__StudySamples__3_cjf",StudyMeta:"styles-module__StudyMeta__3UFnp",StudyLinks:"styles-module__StudyLinks__cMCHs",summaryIcon:"styles-module__summaryIcon__WR75I",lockIcon:"styles-module__lockIcon__3Whcs",iconWithTooltip:"styles-module__iconWithTooltip__2yBW3",icon:"styles-module__icon__1ZBlQ",trashIcon:"styles-module__trashIcon__1z-wJ",infoCircleIcon:"styles-module__infoCircleIcon__27xSR",tooltip:"styles-module__tooltip__b54B6",fadein:"styles-module__fadein__2G2-B"}},85062:e=>{e.exports={portalWidth:"styles-module__portalWidth__1fCuf",framedImage:"styles-module__framedImage__1w-Q4",SectionHeader:"styles-module__SectionHeader__3RwOA",error:"styles-module__error__1QyPg"}},31824:(e,t,n)=>{e.exports=n(46179)(7661)}}]);