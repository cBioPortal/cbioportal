<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <style>
        @import url(css/oncoprint.css);
        @import url(css/jquery.qtip.min.css);
    </style>

  <title>Jasmine Spec Runner</title>

  <link rel="shortcut icon" type="image/png" href="lib/jasmine-1.2.0/jasmine_favicon.png">
  <link rel="stylesheet" type="text/css" href="lib/jasmine-1.2.0/jasmine.css">
  <script type="text/javascript" src="lib/jasmine-1.2.0/jasmine.js"></script>
  <script type="text/javascript" src="lib/jasmine-1.2.0/jasmine-html.js"></script>
  <script type="text/javascript" src="src/jquery.min.js"></script>
  <script type="text/javascript" src="src/d3.v2.min.js"></script>
  <script type="text/javascript" src="src/jquery.qtip.min.js"></script>

  <!-- include source files here... -->
  <!-- <script type="text/javascript" src="spec/SpecHelper.js"></script>
  <script type="text/javascript" src="spec/PlayerSpec.js"></script> -->
  <script type="text/javascript" src="src/DataManagerFactory.js"></script>
  <script type="text/javascript" src="src/QueryGeneData.js"></script>
  <script type="text/javascript" src="src/MemoSort.js"></script>
  <script type="text/javascript" src="src/oncoprint.js"></script>

  <!-- include spec files here... -->
  <script type="text/javascript" src="spec/DataManagerFactorySpec.js"></script>
  <script type="text/javascript" src="spec/QueryGeneDataSpec.js"></script>
  <script type="text/javascript" src="spec/MemoSortSpec.js"></script>

  <script type="text/javascript">
    (function() {
      var jasmineEnv = jasmine.getEnv();
      jasmineEnv.updateInterval = 1000;

      var htmlReporter = new jasmine.HtmlReporter();

      jasmineEnv.addReporter(htmlReporter);

      jasmineEnv.specFilter = function(spec) {
        return htmlReporter.specFilter(spec);
      };

      var currentWindowOnload = window.onload;

      window.onload = function() {
        if (currentWindowOnload) {
          currentWindowOnload();
        }
        execJasmine();
      };

      function execJasmine() {
        jasmineEnv.execute();
      }

    })();
  </script>

</head>

<body>
    <h2>
        oncoprint
    <button type='button' onclick='oncoprint.memoSort()'>memo sort</button>
    <button type='button' onclick='oncoprint.defaultSort()'>default sort</button>
    <button type='button' onclick='oncoprint.toggleWhiteSpace()'>toggle white space</button>
    <button type='button' onclick='oncoprint.scaleWidth(3)'>scale width 3</button>
    <button type='button' onclick='oncoprint.scaleWidth(1.5)'>scale width 1.5</button>
    <button type='button' onclick='oncoprint.scaleWidth(1)'>scale width 1</button>
    <button type='button' onclick='oncoprint.scaleWidth(.5)'>scale width .5</button>
    <button type='button' onclick='oncoprint.toggleUnaltered()'>toggle unaltered</button>
    </h2>
<div id='oncoprint'>
<script type="text/javascript">
// {{{ test data

var AMPLIFIED = "AMPLIFIED",
DELETED = "HOMODELETED";

var UPREGULATED = "UPREGULATED",
DOWNREGULATED = "DOWNREGULATED";

var cna1        = [AMPLIFIED, DELETED, null, null, null, null];
var mutations1  = [null, ['a'], null, ['1'], null, ['b']];

var GENE1 = { hugo: "GENE1",
    cna: cna1,
    mutations: mutations1,
    mrna: [null, null, null, null, null, null],
    rppa: [UPREGULATED, null, DOWNREGULATED, null, null, null],
    percent_altered: "10%"
};

var cna2        = [null, null, DELETED, AMPLIFIED, null, null];
var mutations2  = [null, null, null, ['a'], null, null];

var GENE2 = { hugo: "MARCH8",
    cna: cna2,
    mutations: mutations2,
    mrna: [UPREGULATED, null, DOWNREGULATED, null, null, null],
    rppa: [null, DOWNREGULATED, null, UPREGULATED, null, null],
    percent_altered: "10%"
};


var hugo_to_gene_index = {
    "GENE1": 0,
    "MARCH8": 1
};

var samples = { "CASE1": 0,
    "CASE2": 1,
    "CASE3": 2,
    "CASE4": 3,
    "CASE5": 4,
    "CASE6": 5
};

var data = {
    gene_data: [GENE1, GENE2],
    hugo_to_gene_index: hugo_to_gene_index,
    samples: samples
};

var params = {
    data: data,
    cancer_study_id: "tcga-test",
    case_set_str: "case set description",
    num_cases_affected: "-1",
    percent_cases_affected: "-1%"
};
// }}}
var oncoprint = Oncoprint($('#oncoprint')[0], params);
oncoprint.draw();
</script>
</div>

<div style='width: 200px; overflow-x:auto; overflow-y:hidden;'>
    <svg width=1050 height=100>
        <g transform="translate(100, 20)">
            <rect class="cna AMPLIFIED" width="5.5" height="23"></rect>
            <rect y="7.66" class="mutation mut " width="5.5" height="7.66"></rect>
            <path d = "M 0 7 l 2.75 -7 l 2.75 7 l 0 0"
            fill = "black"/>
            <path d = "M 0 16 l 2.75 7 l 2.75 -7 l 0 0"
            fill = "black"/>
        </g>
        <g transform="translate(100, 60)">
            <rect class="cna AMPLIFIED" width="5.5" height="23"></rect>
            <rect y="7.66" class="mutation mut " width="5.5" height="7.66"></rect>
            <path d = "M 0 7 l 2.75 -7 l 2.75 7 l 0 0"
            fill = "black"/>
            <path d = "M 0 16 l 2.75 7 l 2.75 -7 l 0 0"
            fill = "black"/>
        </g>
    </svg>

          <!--<rect x="50" y="20" width="5.5" height="23" style="fill:none; stroke:red;stroke-width:3;stroke-opacity:0.5" />

          <rect x="50" y="20" class="cna AMPLIFIED" width="5.5" height="23"></rect>

          <rect x="60" y="20" class="mrna AMPLIFIED" width="5.5" height="23"></rect>
          <rect x="70" y="20" class="mrna DELETED" width="5.5" height="23"></rect>-->
</div>

<div id='play'>
    <script type='text/javascript'>
        var data = d3.range(10);

        var wrapper = d3.select('#play');

        var svg = wrapper.append('svg')
        .attr('width', 200)
        .attr('height', 200);

        var circles = svg.selectAll('circle')
        .data(data);

        var circles_enter = circles.enter()
        .append('circle')
        .attr('fill', 'orange')
        .attr('r', function(d) { return d; })
        .attr('cx', function(d, i) { return i * 20; })
        .attr('cy', 50);

        var circles_exit = circles.exit()
        .remove('circle');
    </script>
</div>

</body>
</html>
