(self.webpackChunkcbioportal_frontend=self.webpackChunkcbioportal_frontend||[]).push([[468],{94916:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(88034),o=n(27808);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},f=function(e){function t(){return a(this,t),i(this,s(t).apply(this,arguments))}var n,o,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){return r.createElement("span",null,"Queries are limited by gene and sample count. The product of the query's gene and sample count must be less than"," ",this.props.queryProductLimit.toLocaleString(),". You have selected ",this.props.sampleCount.toLocaleString()," samples, so you can have no more than"," ",Math.floor(this.props.queryProductLimit/this.props.sampleCount).toLocaleString()," ","genes in your query. Please"," ",r.createElement("a",{style:{color:"#ccc"},href:"mailto:".concat(this.props.email)},"let us know")," ","your use case(s) if you need to query more than that.")}}])&&l(n.prototype,o),u&&l(n,u),t}(r.Component);const d=f=p([o.observer],f)},39013:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Ta});var r=n(88034),o=n(14759),a=n.n(o),l=n(27808),i=n(57930),s=n.n(i),c=n(56066),u=n(4831),p=n.n(u),f=n(76127),d=n.n(f);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}function g(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var w=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function _(e,t){var n=e.padded,o=e.overflow,a=e.flex,l=w(e,["padded","overflow","flex"]),i=Object.assign(Object.assign({flex:a,display:"flex",overflow:o?"visible":"auto"},e.style),{flexDirection:t}),s=d()(e.className,p()[t],n&&p().padded);return r.createElement("div",E({},l,{style:i,className:s}))}var O=function(e){function t(){return m(this,t),g(this,v(t).apply(this,arguments))}return S(t,e),b(t,[{key:"render",value:function(){return _(this.props,"row")}}]),t}(r.Component),C=function(e){function t(){return m(this,t),g(this,v(t).apply(this,arguments))}return S(t,e),b(t,[{key:"render",value:function(){return _(this.props,"column")}}]),t}(r.Component),T=n(69858),k=n(8506),D=n.n(k),j=n(99666),N=n(78566),I=n(62524),A=n(13654),R=n(65587),x=n(23280),M=n(19298),L=n(67145),G=n(36903),B=n(35286),F=n.n(B),V=n(82616),H=n(26942),K=n(94545),Q=/[{][$][^}]*[}]/g;function U(e){return null!==e.match(Q)}function Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e,t,n){return t&&q(e.prototype,t),n&&q(e,n),e}function Y(e,t){return!t||"object"!==ee(t)&&"function"!=typeof t?X(e):t}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}function $(e,t){return($=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var te,ne=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ee(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},re=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function l(e){try{s(r.next(e))}catch(e){a(e)}}function i(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}s((r=r.apply(e,t||[])).next())}))};function oe(e){return{__html:e}}!function(e){e[e.INFO_ICON=0]="INFO_ICON",e[e.LOCK_ICON=1]="LOCK_ICON"}(te||(te={}));var ae=function(e){function t(e){var n;return Z(this,t),n=Y(this,z(t).call(this,e)),Object.defineProperty(X(n),"studyMetadata",{enumerable:!0,configurable:!0,writable:!0,value:(0,R.$w)({invoke:function(){return re(X(n),void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",L.Z.getTagsUsingGET({studyId:this.props.studyId}));case 1:case"end":return e.stop()}}),e,this)})))},onError:function(e){console.error("Error on getting study tags.",e)}})}),(0,N.makeObservable)(X(n)),n}return J(t,e),W(t,[{key:"render",value:function(){var e="";if(this.props.isVirtualStudy)e=r.createElement("div",{dangerouslySetInnerHTML:oe(this.props.studyDescription)});else if(this.studyMetadata.isPending)e=r.createElement(G.Z,{isLoading:!0});else if(this.studyMetadata.isComplete){var t=Object.keys(this.studyMetadata.result).length,n=r.createElement("div",{dangerouslySetInnerHTML:oe(this.props.studyDescription)});if(this.props.iconType===te.INFO_ICON)e=t>0?[n,r.createElement("br",null),r.createElement("div",{className:"studyTagsTooltip"}," ",r.createElement(M._,{json:this.studyMetadata.result}))]:n;else{var o=function(e,t,n){var r=e.match(Q);return null!==r&&r.forEach((function(r){var o;(o="{$.studyId}"===r?n:K.query(t,r.replace(/["'{}]/g,""))).length>0&&(e=e.replace(r,o))})),e}((0,H.Ib)().skin_home_page_unauthorized_studies_global_message,this.studyMetadata.result,this.props.studyId);e=U(o)?V.Z.skin_home_page_unauthorized_studies_global_message:r.createElement("div",{style:{maxWidth:300},dangerouslySetInnerHTML:oe(o.toString())})}}else this.studyMetadata.isError&&(e="error");return e}}]),t}(r.Component);ne([N.observable],ae.prototype,"studyMetadata",void 0),ae=ne([l.observer],ae);var le=function(e){function t(){return Z(this,t),Y(this,z(t).apply(this,arguments))}return J(t,e),W(t,[{key:"renderTooltip",value:function(){return r.createElement(R.ZD,{mouseEnterDelay:this.props.mouseEnterDelay,placement:this.props.placement,overlay:this.props.iconType!==te.LOCK_ICON||U((0,H.Ib)().skin_home_page_unauthorized_studies_global_message)?r.createElement(ae,{studyDescription:this.props.studyDescription,studyId:this.props.studyId,isVirtualStudy:this.props.isVirtualStudy,iconType:this.props.iconType}):r.createElement("div",{className:F().tooltip,dangerouslySetInnerHTML:oe((0,H.Ib)().skin_home_page_unauthorized_studies_global_message)}),children:this.props.children})}},{key:"render",value:function(){return this.renderTooltip()}}]),t}(r.Component);const ie=le=ne([l.observer],le);var se=n(85537);function ce(){return(ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function de(e,t,n){return t&&fe(e.prototype,t),n&&fe(e,n),e}function ye(e,t){return!t||"object"!==ve(t)&&"function"!=typeof t?he(e):t}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function he(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function be(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}function ge(e,t){return(ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Se=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ve(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},Pe=Object.assign(Object.assign({},T),{Level:function(e){return T["Level".concat(e)]}}),Ee=function(e){function t(){var e;return pe(this,t),e=ye(this,me(t).apply(this,arguments)),Object.defineProperty(he(e),"_view",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(he(e),"renderCancerType",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=e.logic.getDepth(t),i=e.view.getChildCancerTypes(t),c=e.view.getChildCancerStudies(t),u=e.logic.cancerTypeListView.getDescendantCancerStudies(t).map((function(e){return e.studyId}));if(t!=e.rootCancerType){var p=d()(Pe.CancerType,Pe.Level(l));3===l&&(o=r.createElement(D(),{className:Pe.indentArrow,name:"long-arrow-right"})),n=r.createElement("li",{className:p},r.createElement(_e,{view:e.view,node:t},o,r.createElement("span",null,t.name),!e.store.forDownloadTab&&r.createElement("span",{className:Pe.SelectAll},s().intersection(u,e.store.selectableSelectedStudyIds).length?"Deselect All":"Select All")))}var f=d()(Pe.StudyList,Pe.Level(l));return r.createElement("ul",{key:a,className:f},n,c.map(e.renderCancerStudy),i.map(e.renderCancerType))}}),Object.defineProperty(he(e),"renderCancerStudy",{enumerable:!0,configurable:!0,writable:!0,value:function(t,n){var o=d()(Pe.Study),a=t.studyId in e.store.getOverlappingStudiesMap,i=a?r.createElement(R.ZD,{mouseEnterDelay:0,placement:"top",overlay:r.createElement("div",null,"This study has overlapping data with another selected study.")},r.createElement("i",{className:"fa fa-exclamation-triangle"})):null,c=s().includes(e.store.selectableSelectedStudyIds,t.studyId)&&e.store.isMixedReferenceGenome,u=c?r.createElement(R.ZD,{mouseEnterDelay:0,placement:"top",overlay:r.createElement("div",null,"You are combining studies with molecular data based on both GRCh37/hg19 and GRCh38/hg38. This is not fully supported yet. Please double check your findings")},r.createElement("span",null,r.createElement("i",{className:"fa fa-exclamation-triangle"})," ",(0,se.K7)(t.referenceGenome))):null;return r.createElement("li",{key:n,className:o,"data-test":e.store.isVirtualStudy(t.studyId)?"VirtualStudySelect":"StudySelect"},r.createElement(l.Observer,null,(function(){var n,o=d()((ue(n={},Pe.StudyName,!0),ue(n,"overlappingStudy",a||c),ue(n,Pe.DeletedStudy,e.store.isDeletedVirtualStudy(t.studyId)),ue(n,"studyItem_".concat(t.studyId),!0),ue(n,Pe.UnauthorizedStudy,(0,H.Ib)().skin_home_page_show_unauthorized_studies&&!1===t.readPermission),n));return r.createElement(_e,{view:e.view,node:t},r.createElement("span",{className:o},t.name,i,u))})),r.createElement(l.Observer,null,(function(){return r.createElement("div",{className:Pe.StudyMeta},!e.store.isDeletedVirtualStudy(t.studyId)&&e.renderSamples(t),e.renderStudyLinks(t))})))}}),Object.defineProperty(he(e),"renderSamples",{enumerable:!0,configurable:!0,writable:!0,value:function(e){return r.createElement("span",{className:Pe.StudySamples},"".concat(e.allSampleCount," samples"))}}),Object.defineProperty(he(e),"renderStudyLinks",{enumerable:!0,configurable:!0,writable:!0,value:function(t){if(e.store.isDeletedVirtualStudy(t.studyId))return r.createElement(R.ZD,{mouseEnterDelay:0,placement:"top",overlay:r.createElement("div",{className:Pe.tooltip},"Restore study"),children:r.createElement("button",{className:"btn btn-default btn-xs",onClick:function(){return e.store.restoreVirtualStudy(t.studyId)},style:{lineHeight:"80%"},"data-test":"virtualStudyRestore"},"Restore")});var n=[{icon:"info-circle",tooltip:""}];return e.store.isVirtualStudy(t.studyId)?n.push({icon:"trash",tooltip:"Delete this virtual study.",onClick:function(){return e.store.deleteVirtualStudy(t.studyId)}}):n.push({icon:"book",onClick:t.pmid&&(0,I.QY)(t.pmid),tooltip:t.pmid&&"PubMed"}),r.createElement("span",{className:Pe.StudyLinks},n.map((function(n,o){var a,l=r.createElement(D(),{key:o,name:n.icon,className:d()((a={},ue(a,Pe.icon,!0),ue(a,Pe.iconWithTooltip,!!n.tooltip),ue(a,Pe.trashIcon,"trash"===n.icon),ue(a,Pe.infoCircleIcon,"info-circle"===n.icon),a))});if(n.onClick){var i={key:o};"string"==typeof n.onClick?(i.href=n.onClick,i.target="_blank"):i.onClick=n.onClick,l=r.createElement("a",i,l)}if(n.tooltip){var s=r.createElement("div",{className:Pe.tooltip,dangerouslySetInnerHTML:{__html:n.tooltip}});l=r.createElement(R.ZD,{key:o,mouseEnterDelay:0,placement:"top",overlay:s,children:l})}return"info-circle"===n.icon&&(l=r.createElement(ie,{key:o,studyDescription:e.store.isVirtualStudy(t.studyId)?t.description.replace(/\r?\n/g,"<br />"):t.description,studyId:t.studyId,isVirtualStudy:e.store.isVirtualStudy(t.studyId),mouseEnterDelay:0,placement:"top",iconType:te.INFO_ICON},r.createElement("a",null,l))),l})),t.studyId&&r.createElement(R.ZD,{mouseEnterDelay:0,placement:"top",overlay:r.createElement("div",{className:Pe.tooltip},"View clinical and genomic data of this study")},r.createElement("span",null,r.createElement(x._,{studyId:t.studyId,className:d()(Pe.summaryIcon,"ci ci-pie-chart")}))),(0,H.Ib)().skin_home_page_show_unauthorized_studies&&t.studyId&&!1===t.readPermission&&r.createElement(ie,{key:0,studyDescription:e.store.isVirtualStudy(t.studyId)?t.description.replace(/\r?\n/g,"<br />"):t.description,studyId:t.studyId,isVirtualStudy:e.store.isVirtualStudy(t.studyId),mouseEnterDelay:0,placement:"top",iconType:te.LOCK_ICON},r.createElement("span",null,r.createElement("i",{className:"fa fa-lock"}))))}}),e}return be(t,e),de(t,[{key:"componentDidMount",value:function(){this.props.showSelectedStudiesOnly&&(this._view=this.view)}},{key:"render",value:function(){var e=this,t=this.renderCancerType(this.rootCancerType);return this.props.showSelectedStudiesOnly?r.createElement("div",{className:Pe.SelectedStudyList},r.createElement("span",{className:Pe.deselectAll,onClick:function(){e.view.onCheck(e.store.treeData.rootCancerType,!1),e.store.showSelectedStudiesOnly=!1}},"Deselect all"),t):t}},{key:"view",get:function(){return this._view||(this.props.showSelectedStudiesOnly?this.logic.selectedStudiesView:this.logic.mainView)}},{key:"logic",get:function(){return this.store.studyListLogic}},{key:"rootCancerType",get:function(){return this.store.treeData.rootCancerType}}]),t}(A.cx);const we=Ee=Se([l.observer],Ee);var _e=function(e){function t(e){var n;return pe(this,t),n=ye(this,me(t).call(this,e)),(0,N.makeObservable)(he(n)),n}return be(t,e),de(t,[{key:"render",value:function(){var e=this;return r.createElement(j.Z,ce({},this.checkboxProps,{onChange:function(t){e.props.view.onCheck(e.props.node,t.target.checked)}}),this.props.children)}},{key:"checkboxProps",get:function(){return this.props.view.getCheckboxProps(this.props.node)}}]),t}(A.cx);Se([N.computed.struct],_e.prototype,"checkboxProps",null),_e=Se([l.observer],_e);var Oe=n(31824),Ce=n(84479),Te=n.n(Ce),ke=n(59280),De=n(85062),je=n.n(De),Ne=n(68084),Ie=n.n(Ne);function Ae(e){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Re(){return(Re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function xe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Le(e,t){return!t||"object"!==Ae(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ge(e){return(Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Be(e,t){return(Be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Fe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},Ve=function(e){function t(){return xe(this,t),Le(this,Ge(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Be(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.error,n=e.children,o=e.className,a=Fe(e,["error","children","className"]);return r.createElement("div",Re({className:d()(o,Ie().error)},a),r.createElement("span",{className:Ie().message},r.createElement(D(),{className:Ie().icon,name:"exclamation-circle"}),t.message+""),n)}}])&&Me(n.prototype,o),a&&Me(n,a),t}(r.Component);function He(){return(He=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ue(e,t){return!t||"object"!==We(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ze(e){return(Ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qe(e,t){return(qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function We(e){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ye=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":We(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},ze=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},Xe=function(e){function t(){return Ke(this,t),Ue(this,Ze(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qe(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.promises,n=e.children,o=e.className,a=e.secondaryComponent,l=ze(e,["promises","children","className","secondaryComponent"]);return r.createElement("div",He({className:d()(o,je().SectionHeader)},l),r.createElement("h2",null,n,!(!t||!t.some((function(e){return e.isPending})))&&r.createElement(G.Z,{isLoading:!0,size:"small"})),!!a&&a,t&&t.map((function(e){return!!e.error&&r.createElement(Ve,{className:je().error,error:e.error})})))}}])&&Qe(n.prototype,o),a&&Qe(n,a),t}(r.Component);const Je=Xe=Ye([l.observer],Xe);var $e=n(79280),et=n(36839),tt=n(7714);function nt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var l,i=e[Symbol.iterator]();!(r=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function rt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function at(e,t){return!t||"object"!==st(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lt(e){return(lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function it(e,t){return(it=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function st(e){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ct=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":st(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},ut=function(e){function t(){return rt(this,t),at(this,lt(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&it(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){var e=this;return r.createElement("div",null,"Quick select: ",s().map(this.props.buttonsConfig,(function(t,n){var o=nt(n.split("|"),2),a=o[0],l=o[1],i=r.createElement("button",{className:"btn btn-default btn-xs",onClick:function(){return e.props.onSelect(t)}},a),s=r.createElement("span",{style:{display:"inline-block",width:"300px"}},l||"");return l?r.createElement(R.ZD,{overlay:s},i):i})))}}])&&ot(n.prototype,o),a&&ot(n,a),t}(r.Component);const pt=ut=ct([l.observer],ut);var ft=(0,l.observer)((function(e){return e.store.cancerTypes.isPending||e.store.cancerStudies.isPending||e.store.profiledSamplesCount.isPending?r.createElement(G.Z,{isLoading:!0,size:"small",center:!1}):r.createElement(l.Observer,null,(function(){var t=(0,Oe.expr)((function(){return e.store.selectableSelectedStudyIds.length}));return r.createElement(r.Fragment,null,r.createElement("a",{onClick:function(){t&&(e.store.showSelectedStudiesOnly=!e.store.showSelectedStudiesOnly)}},r.createElement("b",null,t)," ",1===t?"study":"studies"," ","selected (",r.createElement("b",null,e.store.sampleCountForSelectedStudies)," ","samples)"),e.store.selectableSelectedStudies.length>0&&r.createElement("a",{"data-test":"globalDeselectAllStudiesButton",style:{marginLeft:10},onClick:function(){return e.store.studyListLogic.mainView.clearAllSelection()}},"Deselect all"))}))})),dt=n(64577),yt=n(77906);function mt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bt(e){return(bt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vt(e,t){return(vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function St(e){return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Pt=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":St(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},Et=function(e){function t(e){var n,o=this;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==St(t)&&"function"!=typeof t?gt(e):t}(this,bt(t).call(this,e)),Object.defineProperty(gt(n),"handlers",{enumerable:!0,configurable:!0,writable:!0,value:{onSummaryClick:function(){n.store.openSummary()},onCheckAllFiltered:function(){n.logic.mainView.toggleAllFiltered()},onClearFilter:function(){n.store.setSearchText("")}}}),Object.defineProperty(gt(n),"store",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(gt(n),"CancerTypeList",{enumerable:!0,configurable:!0,writable:!0,value:(0,l.observer)((function(){var e=n.logic.cancerTypeListView.getChildCancerTypes(n.store.treeData.rootCancerType);return r.createElement("ul",{className:a().cancerTypeList},e.map((function(e,t){return r.createElement(o.CancerTypeListItem,{key:t,cancerType:e})})))}))}),Object.defineProperty(gt(n),"CancerTypeListItem",{enumerable:!0,configurable:!0,writable:!0,value:(0,l.observer)((function(e){var t,o=e.cancerType,l=(0,Oe.expr)((function(){return n.logic.cancerTypeListView.getDescendantCancerStudies(o).length})),i=s().includes(n.store.selectedCancerTypeIds,o.cancerTypeId),c=n.logic.isHighlighted(o),u=d()((mt(t={},a().selectable,!0),mt(t,a().selected,i),mt(t,a().matchingNodeText,!!n.store.searchText&&c),mt(t,a().nonMatchingNodeText,!!n.store.searchText&&!c),mt(t,a().containsSelectedStudies,(0,Oe.expr)((function(){return n.logic.cancerTypeContainsSelectedStudies(o)}))),t));return r.createElement("li",{className:u,onMouseDown:n.getCancerTypeListClickHandler(o)},r.createElement("span",{className:a().cancerTypeListItemLabel},o.name),r.createElement("span",{className:a().cancerTypeListItemCount},l))}))}),Object.defineProperty(gt(n),"autosuggest",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(gt(n),"windowSizeDisposer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),(0,N.makeObservable)(gt(n)),n.store=n.props.queryStore,n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vt(e,t)}(t,e),n=t,(o=[{key:"getCancerTypeListClickHandler",value:function(e){var t=this;return function(n){return t.store.selectCancerType(e,n.ctrlKey)}}},{key:"selectTCGAPanAtlas",value:function(){this.logic.mainView.selectAllMatchingStudies(tt._w)}},{key:"selectMatchingStudies",value:function(e){e&&(1===e.length&&/^\*.*\*$/.test(e[0])?this.logic.mainView.selectAllMatchingStudies(e[0].replace(/\*/g,"")):this.logic.mainView.selectAllMatchingStudies(e))}},{key:"componentDidMount",value:function(){var e,t=this;this.windowSizeDisposer=(0,N.reaction)((function(){return dt.Z.size}),(function(){t.props.forkedMode&&(clearTimeout(e),e=setTimeout((function(){return t.setListHeight()}),200))}),{fireImmediately:!0})}},{key:"componentWillUnmount",value:function(){this.windowSizeDisposer()}},{key:"setListHeight",value:function(){var e=yt(c.findDOMNode(this)),t=dt.Z.size.height-e.offset().top;t=t<200?200:t,e.css("height",t-75)}},{key:"render",value:function(){var e=this,t=this.logic.mainView.getSelectionReport(),n=t.shownStudies,o=t.shownAndSelectedStudies,i=this.logic.mainView.quickSelectButtons((0,H.Ib)().skin_quick_select_buttons);return r.createElement(C,{overflow:!0,"data-test":"studyList",className:a().CancerStudySelector},r.createElement(O,{overflow:!0,className:a().CancerStudySelectorHeader},r.createElement(Je,{promises:[this.store.cancerTypes,this.store.cancerStudies]},"Select Studies for Visualization & Analysis:"),this.store.selectableStudiesSet.isComplete&&r.createElement("div",null,r.createElement(ft,{store:this.store})),r.createElement(l.Observer,null,(function(){var t=H.v4.skin_example_study_queries((0,H.Ib)().skin_example_study_queries||"");e.store.searchText&&t.indexOf(e.store.searchText)<0&&(t=[e.store.searchText].concat(t));var n=null,o=t.map((function(e,t){return{value:e,sortKey:t}}));return r.createElement("div",{style:{display:"flex",alignItems:"center"}},e.store.searchText&&r.createElement("span",{"data-test":"clearStudyFilter",onClick:function(t){e.autosuggest.setState({inputValue:""}),e.handlers.onClearFilter()},style:{fontSize:18,cursor:"pointer",color:"#999999",position:"relative",left:164,zIndex:10}},"x"),r.createElement(et.ZP,{datalist:o,ref:function(t){return e.autosuggest=t},placeholder:"Search...",bsSize:"small",onChange:function(t){null!==n&&(window.clearTimeout(n),n=null),n=window.setTimeout((function(){e.store.setSearchText(t)}),400)},onFocus:function(t){0===t.length&&setTimeout((function(){e.autosuggest.setState({open:!0})}),400)}}))}))),r.createElement(ke.If,{condition:this.studiesDataComplete},r.createElement(O,{className:a().cancerStudySelectorBody},r.createElement(ke.If,{condition:this.store.maxTreeDepth>0},r.createElement(ke.Then,null,r.createElement("div",{className:a().cancerTypeListContainer},r.createElement(this.CancerTypeList,null)))),r.createElement("div",{className:a().cancerStudyListContainer,"data-test":"cancerTypeListContainer"},r.createElement("div",{className:a().queryHelp},r.createElement("a",{href:"https://docs.cbioportal.org/user-guide/by-page/#homepage",target:"_blank"},"Help ",r.createElement("i",{className:"fa fa-book"}))),r.createElement("div",{className:"checkbox",style:{marginLeft:19}},r.createElement(ke.If,{condition:n.length>0},r.createElement(ke.If,{condition:!this.logic.mainView.isFiltered&&!s().isEmpty(i)},r.createElement(ke.Then,null,r.createElement("div",{className:a().quickSelect},r.createElement(pt,{onSelect:this.selectMatchingStudies,buttonsConfig:i}))),r.createElement(ke.Else,null,r.createElement("label",null,r.createElement("input",{type:"checkbox","data-test":"selectAllStudies",style:{top:-2},onClick:this.handlers.onCheckAllFiltered,checked:o.length===n.length}),r.createElement("strong",null,o.length===n.length?"Deselect all listed studies ".concat(n.length<this.store.cancerStudies.result.length?"matching filter":""," (").concat(n.length,")"):"Select all listed studies ".concat(n.length<this.store.cancerStudies.result.length?"matching filter":"","  (").concat(n.length,")")))))),r.createElement(ke.If,{condition:this.store.cancerStudies.isComplete&&this.store.cancerTypes.isComplete&&0===n.length},r.createElement("p",null,"There are no studies matching your filter."))),r.createElement(we,null)))),r.createElement($e.Modal,{className:d()(a().SelectedStudiesWindow,"cbioportal-frontend"),show:this.store.showSelectedStudiesOnly,onHide:function(){return e.store.showSelectedStudiesOnly=!1}},r.createElement($e.Modal.Header,{closeButton:!0},r.createElement($e.Modal.Title,null,"Selected Studies")),r.createElement($e.Modal.Body,null,r.createElement(we,{showSelectedStudiesOnly:!0}))))}},{key:"studiesDataComplete",get:function(){return this.store.cancerTypes.isComplete&&this.store.cancerStudies.isComplete&&this.store.userVirtualStudies.isComplete}},{key:"logic",get:function(){return this.store.studyListLogic}}])&&ht(n.prototype,o),i&&ht(n,i),t}(r.Component);Pt([N.computed],Et.prototype,"studiesDataComplete",null),Pt([Te()],Et.prototype,"getCancerTypeListClickHandler",null),Pt([N.action.bound],Et.prototype,"selectTCGAPanAtlas",null),Pt([N.action.bound],Et.prototype,"selectMatchingStudies",null);const wt=Et=Pt([l.observer],Et);var _t=n(20232);function Ot(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ct(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kt(e,t){return!t||"object"!==It(t)&&"function"!=typeof t?jt(e):t}function Dt(e){return(Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nt(e,t){return(Nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function It(e){return(It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var At=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":It(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},Rt=function(e){function t(){var e;return Ct(this,t),e=kt(this,Dt(t).apply(this,arguments)),Object.defineProperty(jt(e),"ProfileToggle",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n=t.profile,o=t.type,l=t.label,i=t.checked,s=t.isGroupToggle;return r.createElement("label",null,r.createElement("input",{type:o,checked:i,onChange:function(t){return e.store.selectMolecularProfile(n,t.target.checked)},"data-test":n.molecularAlterationType}),r.createElement("span",{className:s?a().groupName:a().profileName},l),!s&&r.createElement(R.ZD,{mouseEnterDelay:0,placement:"right",overlay:r.createElement("div",{className:a().tooltip},n.description)},r.createElement(D(),{className:a().infoIcon,name:"question-circle"})))}}),e}var n,o,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nt(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){return 1!==this.store.selectableSelectedStudyIds.length?null:r.createElement(O,{padded:!0,className:a().MolecularProfileSelector},r.createElement(Je,{className:"sectionLabel",promises:[this.store.molecularProfilesInSelectedStudies]},"Select Genomic Profiles:"),r.createElement("div",{className:a().group,"data-test":"molecularProfileSelector"},this.renderGroup("MUTATION_EXTENDED","Mutation"),this.renderGroup("STRUCTURAL_VARIANT","Structural Variant"),this.renderGroup("COPY_NUMBER_ALTERATION","Copy Number"),this.showGSVA&&this.renderGroup("GENESET_SCORE","GSVA scores"),this.renderGroup("MRNA_EXPRESSION","mRNA Expression"),this.renderGroup("METHYLATION","DNA Methylation"),this.renderGroup("METHYLATION_BINARY","DNA Methylation"),this.renderGroup("PROTEIN_LEVEL","Protein/phosphoprotein level"),!(!this.store.molecularProfilesInSelectedStudies.isComplete||this.store.molecularProfilesInSelectedStudies.result.length)&&r.createElement("strong",null,"No Genomic Profiles available for this Cancer Study")))}},{key:"renderGroup",value:function(e,t){var n=this,o=this.store.getFilteredProfiles(e);if(!o.length)return null;var l=s().some(o,(function(e){return n.store.isProfileTypeSelected((0,_t.o)(e))})),i=[];o.length>1&&!this.store.forDownloadTab&&i.push(r.createElement(this.ProfileToggle,{key:"altTypeCheckbox:"+e,profile:o[0],type:"checkbox",label:"".concat(t,". Select one of the profiles below:"),checked:l,isGroupToggle:!0}));var c=o.map((function(e){return r.createElement(n.ProfileToggle,{key:"profile:"+e.molecularProfileId,profile:e,type:n.store.forDownloadTab||o.length>1?"radio":"checkbox",label:"STRUCTURAL_VARIANT"===e.molecularAlterationType?t:e.name,checked:n.store.isProfileTypeSelected((0,_t.o)(e)),isGroupToggle:!1})}));return this.store.forDownloadTab||1==o.length?i.push.apply(i,Ot(c)):i.push(r.createElement("div",{key:"group:"+e,className:a().group},c)),this.store.forDownloadTab||(l&&"MRNA_EXPRESSION"==e&&i.push(r.createElement("div",{key:i.length,className:a().zScore},"Enter a z-score threshold"," ",r.createElement("span",{dangerouslySetInnerHTML:{__html:["&","plusmn;"].join("")}}),r.createElement("input",{type:"text",value:this.store.zScoreThreshold,onChange:function(e){n.store.zScoreThreshold=e.target.value}}))),l&&"PROTEIN_LEVEL"==e&&i.push(r.createElement("div",{key:i.length,className:a().zScore},"Enter a z-score threshold"," ",r.createElement("span",{dangerouslySetInnerHTML:{__html:["&","plusmn;"].join("")}}),r.createElement("input",{type:"text",value:this.store.rppaScoreThreshold,onChange:function(e){n.store.rppaScoreThreshold=e.target.value}})))),i}},{key:"showGSVA",get:function(){return(0,H.Ib)().skin_show_gsva}}])&&Tt(n.prototype,o),l&&Tt(n,l),t}(A.cx);const xt=Rt=At([l.observer],Rt);var Mt=n(35770),Lt=n(90387);function Gt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ft(e,t){return!t||"object"!==Qt(t)&&"function"!=typeof t?Ht(e):t}function Vt(e){return(Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ht(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kt(e,t){return(Kt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qt(e){return(Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ut=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Qt(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},Zt=function(e){function t(){var e;return Gt(this,t),e=Ft(this,Vt(t).apply(this,arguments)),Object.defineProperty(Ht(e),"molecularProfileCategorySet",{enumerable:!0,configurable:!0,writable:!0,value:(0,R.$w)({await:function(){return[e.store.validProfileIdSetForSelectedStudies]},invoke:function(){return Promise.resolve((0,Lt.lL)(e.store.validProfileIdSetForSelectedStudies.result))},default:[]})}),Object.defineProperty(Ht(e),"flexRowContent",{enumerable:!0,configurable:!0,writable:!0,value:(0,Mt.F)({await:function(){return[e.molecularProfileCategorySet]},render:function(){return r.createElement("div",{style:{display:"flex"}},e.molecularProfileCategorySet.result.map((function(t){return r.createElement(Wt,{label:t.label,id:t.id,profileTypes:t.profileTypes,store:e.store})})))},renderPending:function(){return r.createElement(G.Z,{isLoading:!0})},renderError:function(){return r.createElement("span",{key:"error"},"Error loading profiles for selected studies.")}})}),e}var n,o,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kt(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){return this.store.isVirtualStudyQuery?r.createElement(O,{padded:!0,className:a().DataTypePrioritySelector,"data-test":"dataTypePrioritySelector"},r.createElement(Je,{className:"sectionLabel"},"Select Molecular Profiles:"),r.createElement(O,null,this.flexRowContent.component)):null}}])&&Bt(n.prototype,o),l&&Bt(n,l),t}(A.cx);const qt=Zt=Ut([l.observer],Zt);var Wt=(0,l.observer)((function(e){var t=e.profileTypes.some((function(t){return e.store.isProfileTypeSelected(t)}));return r.createElement("label",{className:a().DataTypePriorityLabel},r.createElement("input",{type:"checkbox",checked:t,onChange:function(t){e.store.setProfileTypes(e.profileTypes,t.currentTarget.checked)},"data-test":e.id}),e.label)}));const Yt=[{id:"Prostate Cancer: AR Signaling",genes:["SOX9","RAN","TNK2","EP300","PXN","NCOA2","AR","NRIP1","NCOR1","NCOR2"]},{id:"Prostate Cancer: AR and steroid synthesis enzymes",genes:["AKR1C3","AR","CYB5A","CYP11A1","CYP11B1","CYP11B2","CYP17A1","CYP19A1","CYP21A2","HSD17B1","HSD17B10","HSD17B11","HSD17B12","HSD17B13","HSD17B14","HSD17B2","HSD17B3","HSD17B4","HSD17B6","HSD17B7","HSD17B8","HSD3B1","HSD3B2","HSD3B7","RDH5","SHBG","SRD5A1","SRD5A2","SRD5A3","STAR"]},{id:"Prostate Cancer: Steroid inactivating genes",genes:["AKR1C1","AKR1C2","AKR1C4","CYP3A4","CYP3A43","CYP3A5","CYP3A7","UGT2B15","UGT2B17","UGT2B7"]},{id:"Prostate Cancer: Down-regulated by androgen",genes:["BCHE","CDK8","CTBP1","ACKR3","DDC","DPH1","FN1","HES6","MMP16","MYC","PEG3","PIK3R3","PRKD1","SCNN1A","SDC4","SERPINI1","SLC29A1","ST7","TULP4"]},{id:"Glioblastoma: TP53 Pathway",genes:["CDKN2A","MDM2","MDM4","TP53"]},{id:"Glioblastoma: RTK/Ras/PI3K/AKT Signaling",genes:["EGFR","ERBB2","PDGFRA","MET","KRAS","NRAS","HRAS","NF1","SPRY2","FOXO1","FOXO3","AKT1","AKT2","AKT3","PIK3R1","PIK3CA","PTEN"]},{id:"Glioblastoma: RB Pathway",genes:["CDKN2A","CDKN2B","CDKN2C","CDK4","CDK6","CCND2","RB1"]},{id:"Ovarian Cancer: Oncogenes associated with epithelial ovarian cancer",genes:["RAB25","MECOM","EIF5A2","PRKCI","PIK3CA","KIT","FGF1","MYC","EGFR","NOTCH3","KRAS","AKT1","ERBB2","PIK3R1","CCNE1","AKT2","AURKA"]},{id:"Ovarian Cancer: Putative tumor-suppressor genes in epithelial ovarian cancer",genes:["DIRAS3","RASSF1","DLEC1","SPARC","DAB2","PLAGL1","RPS6KA2","PTEN","OPCML","BRCA2","ARL11","WWOX","TP53","DPH1","BRCA1","PEG3"]},{id:"General: Cell Cycle Control",genes:["RB1","RBL1","RBL2","CCNA1","CCNB1","CDK1","CCNE1","CDK2","CDC25A","CCND1","CDK4","CDK6","CCND2","CDKN2A","CDKN2B","MYC","CDKN1A","CDKN1B","E2F1","E2F2","E2F3","E2F4","E2F5","E2F6","E2F7","E2F8","SRC","JAK1","JAK2","STAT1","STAT2","STAT3","STAT5A","STAT5B"]},{id:"General: p53 signaling",genes:["TP53","MDM2","MDM4","CDKN2A","CDKN2B","TP53BP1"]},{id:"General: Notch signaling",genes:["ADAM10","ADAM17","APH1A","APH1B","ARRDC1","CIR1","CTBP1","CTBP2","CUL1","DLL1","DLL3","DLL4","DTX1","DTX2","DTX3","DTX3L","DTX4","EP300","FBXW7","HDAC1","HDAC2","HES1","HES5","HEYL","ITCH","JAG1","JAG2","KDM5A","LFNG","MAML1","MAML2","MAML3","MFNG","NCOR2","NCSTN","NOTCH1","NOTCH2","NOTCH3","NOTCH4","NRARP","NUMB","NUMBL","PSEN1","PSEN2","PSENEN","RBPJ","RBPJL","RFNG","SNW1","SPEN","HES2","HES4","HES7","HEY1","HEY2"]},{id:"General: DNA Damage Response",genes:["CHEK1","CHEK2","RAD51","BRCA1","BRCA2","MLH1","MSH2","ATM","ATR","MDC1","PARP1","FANCF"]},{id:"General: Other growth / proliferation signaling",genes:["CSF1","CSF1R","IGF1","IGF1R","FGF1","FGFR1","AURKA","DLEC1","PLAGL1","OPCML","DPH1"]},{id:"General: Survival / cell death regulation signaling",genes:["NFKB1","NFKB2","CHUK","DIRAS3","FAS","HLA-G","BAD","BCL2","BCL2L1","APAF1","CASP9","CASP8","CASP10","CASP3","CASP6","CASP7","GSK3B","ARL11","WWOX","PEG3","TGFB1","TGFBR1","TGFBR2"]},{id:"General: Telomere maintenance",genes:["TERC","TERT"]},{id:"General: RTK signaling family",genes:["EGFR","ERBB2","ERBB3","ERBB4","PDGFA","PDGFB","PDGFRA","PDGFRB","KIT","FGF1","FGFR1","IGF1","IGF1R","VEGFA","VEGFB","KDR"]},{id:"General: PI3K-AKT-mTOR signaling",genes:["PIK3CA","PIK3R1","PIK3R2","PTEN","PDPK1","AKT1","AKT2","FOXO1","FOXO3","MTOR","RICTOR","TSC1","TSC2","RHEB","AKT1S1","RPTOR","MLST8"]},{id:"General: Ras-Raf-MEK-Erk/JNK signaling",genes:["KRAS","HRAS","BRAF","RAF1","MAP3K1","MAP3K2","MAP3K3","MAP3K4","MAP3K5","MAP2K1","MAP2K2","MAP2K3","MAP2K4","MAP2K5","MAPK1","MAPK3","MAPK4","MAPK6","MAPK7","MAPK8","MAPK9","MAPK12","MAPK14","DAB2","RASSF1","RAB25"]},{id:"General: Regulation of ribosomal protein synthesis and cell growth",genes:["RPS6KA1","RPS6KA2","RPS6KB1","RPS6KB2","EIF5A2","EIF4E","EIF4EBP1","RPS6","HIF1A"]},{id:"General: Angiogenesis",genes:["VEGFA","VEGFB","KDR","CXCL8","CXCR1","CXCR2"]},{id:"General: Folate transport",genes:["SLC19A1","FOLR1","FOLR2","FOLR3","IZUMO1R"]},{id:"General: Invasion and metastasis",genes:["MMP1","MMP2","MMP3","MMP7","MMP9","MMP10","MMP11","MMP12","MMP13","MMP14","MMP15","MMP16","MMP17","MMP19","MMP21","MMP23B","MMP24","MMP25","MMP26","MMP27","MMP28","ITGB3","ITGAV","PTK2","CDH1","SPARC","WFDC2"]},{id:"General: TGF-β Pathway",genes:["TGFB1","TGFB2","TGFB3","TGFBR1","TGFBR2","TGFBR3","BMP2","BMP3","BMP4","BMP5","BMP6","BMP7","GDF2","BMP10","BMP15","BMPR1A","BMPR1B","BMPR2","ACVR1","ACVR1B","ACVR1C","ACVR2A","ACVR2B","ACVRL1","Nodal","GDF1","GDF11","INHA","INHBA","INHBB","INHBC","INHBE","SMAD2","SMAD3","SMAD1","SMAD5","SMAD4","SMAD9","SMAD6","SMAD7","SPTBN1","TGFBRAP1","ZFYVE9"]}];var zt=n(77906),Xt=n.n(zt),Jt=n(4098);n(89871);function $t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function en(e){return(en=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nn(e,t){return(nn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rn(e){return(rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var on=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":rn(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},an=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function l(e){try{s(r.next(e))}catch(e){a(e)}}function i(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}s((r=r.apply(e,t||[])).next())}))},ln=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==rn(t)&&"function"!=typeof t?tn(e):t}(this,en(t).call(this,e)),Object.defineProperty(tn(n),"tree",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(tn(n),"isLoading",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(tn(n),"promisedTree",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(tn(n),"map_geneSets_selected",{enumerable:!0,configurable:!0,writable:!0,value:new N.ObservableMap}),(0,N.makeObservable)(tn(n)),n.map_geneSets_selected.replace(e.initialSelection.map((function(e){return[e,!0]}))),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nn(e,t)}(t,e),n=t,(o=[{key:"componentDidMount",value:function(){var e=this;this.promisedTree=this.initTree(this.tree),this.promisedTree.then((function(t){return e.isLoading=!1,t}))}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.scoreThreshold===e.scoreThreshold&&this.props.pvalueThreshold===e.pvalueThreshold&&this.props.percentile===e.percentile||(this.promisedTree=this.promisedTree.then((function(e){return t.isLoading=!0,t.replaceTree(e)})).then((function(e){return t.isLoading=!1,e}))),this.props.searchValue!==e.searchValue&&(this.promisedTree=this.promisedTree.then((function(e){return t.searchTree(e,t.props.searchValue)})))}},{key:"transformHierarchyData",value:function(e){var t=e,n=[],r=0,o=!0,a=!1,l=void 0;try{for(var i,c=t[Symbol.iterator]();!(o=(i=c.next()).done);o=!0){var u=i.value,p=u.nodeName,f=u.parentNodeName?u.parentNodeName:"#";if(n.push({id:p,parent:f,text:p,li_attr:{name:p},geneset:!1,state:{opened:!(0,H.Ib)().skin_geneset_hierarchy_collapse_by_default,selected:!1}}),s().has(u,"genesets")){var d=!0,y=!1,m=void 0;try{for(var h,b=u.genesets[Symbol.iterator]();!(d=(h=b.next()).done);d=!0){var g=h.value,v=r++,S=g.genesetId,P=g.description,E=g.representativeScore,w=g.representativePvalue,_=g.refLink,O="",C=S+'<span style="font-weight:normal;font-style:italic;"> '+(O=(O=O+"score = "+E.toFixed(2))+", p-value = "+(w=w<.005?w.toExponential(0):w.toFixed(2)))+"</span>";n.push({id:v.toString(),parent:p,text:C,state:{selected:!1},li_attr:{name:S},description:P,representativeScore:E,representativePvalue:w,refLink:_,geneset:!0})}}catch(e){y=!0,m=e}finally{try{d||null==b.return||b.return()}finally{if(y)throw m}}}}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return n}},{key:"initTree",value:function(e){return an(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Jt.wv)(this.props.gsvaProfile,this.props.percentile,this.props.scoreThreshold,this.props.pvalueThreshold,this.props.sampleListId);case 2:return n=t.sent,Xt()(e).jstree({search:{show_only_matches:!0,show_only_matches_children:!0},checkbox:{cascade_to_disabled:!1,cascade_to_hidden:!1},core:{themes:{icons:!1},check_callback:!0,data:this.transformHierarchyData(n)},plugins:["checkbox","search"]}),t.abrupt("return",e);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"destroyTree",value:function(e){Xt()(e).jstree(!0).destroy()}},{key:"replaceTree",value:function(e){return an(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.destroyTree(e),t.next=3,this.initTree(e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"submitGeneSets",value:function(e){if(e){var t=Xt()(e).jstree("get_selected",!0),n=!0,r=!1,o=void 0;try{for(var a,l=t[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var i=a.value;i.original.geneset&&this.map_geneSets_selected.set(i.original.li_attr.name,!0)}}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}}return this.map_geneSets_selected}},{key:"searchTree",value:function(e,t){return Xt()(e).jstree(!0).search(t),e}},{key:"render",value:function(){var e=this;return r.createElement("div",null,r.createElement(G.Z,{isLoading:this.isLoading}),r.createElement("div",{ref:function(t){return e.tree=t},style:{maxHeight:"380px",overflowY:"scroll"},"data-test":"gsva-tree-container"}),r.createElement("div",{style:{padding:"30px 0px"}},r.createElement("button",{className:"btn btn-primary btn-sm pull-right",style:{margin:"2px"},disabled:this.isLoading,onClick:function(){var t=e.submitGeneSets(e.tree);e.props.onSelect(t)}},"Select")))}}])&&$t(n.prototype,o),a&&$t(n,a),t}(r.Component);on([N.observable],ln.prototype,"isLoading",void 0);const sn=ln=on([l.observer],ln);var cn=n(92977);function un(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pn(e){return(pn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dn(e,t){return(dn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yn(e){return(yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var mn=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":yn(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},hn=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==yn(t)&&"function"!=typeof t?fn(e):t}(this,pn(t).call(this,e)),Object.defineProperty(fn(n),"percentile",{enumerable:!0,configurable:!0,writable:!0,value:n.props.percentile}),Object.defineProperty(fn(n),"pvalueThreshold",{enumerable:!0,configurable:!0,writable:!0,value:String(n.props.pvalueThreshold)}),Object.defineProperty(fn(n),"scoreThreshold",{enumerable:!0,configurable:!0,writable:!0,value:String(n.props.scoreThreshold)}),Object.defineProperty(fn(n),"percentileOptions",{enumerable:!0,configurable:!0,writable:!0,value:[{label:"50%",value:50},{label:"75%",value:75},{label:"100%",value:100}]}),(0,N.makeObservable)(fn(n)),n.percentileChange=n.percentileChange.bind(fn(n)),n.applyFilter=n.applyFilter.bind(fn(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dn(e,t)}(t,e),n=t,(o=[{key:"percentileChange",value:function(e){this.percentile=e?e.value:75}},{key:"applyFilter",value:function(){var e=this.pvalueThreshold?Number(this.pvalueThreshold):NaN,t=this.scoreThreshold?Number(this.scoreThreshold):NaN;Number.isNaN(e)||Number.isNaN(t)||this.props.onApply(this.percentile,e,t)}},{key:"render",value:function(){var e=this;return r.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center",width:"100%",background:"#eee",padding:"10px 10px"}},r.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.createElement("label",{htmlFor:"GSVAScore"},"GSVA score"),r.createElement("input",{id:"GSVAScore",type:"string",value:this.scoreThreshold,style:{width:160,height:36,padding:10},onChange:function(t){return e.scoreThreshold=t.target.value},step:"0.1"})),r.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.createElement("label",{htmlFor:"Pvalue"},"P-value"),r.createElement("input",{id:"Pvalue",type:"string",value:this.pvalueThreshold,style:{width:160,height:36,padding:10},onChange:function(t){return e.pvalueThreshold=t.target.value},step:"0.01",min:"0"})),r.createElement("div",null,r.createElement("label",{htmlFor:"PercentileScoreCalculation"},"Percentile for score calculation"),r.createElement(cn.default,{addLabelText:"Percentile for score calculation",style:{width:160,borderRadius:"2px"},clearable:!1,name:"PercentileScoreCalculation",value:this.percentile,options:this.percentileOptions,onChange:this.percentileChange})),r.createElement("div",null,r.createElement("button",{id:"filterButton",className:"btn btn-primary btn-sm",style:{padding:"20px 18px"},onClick:this.applyFilter},"Apply Filter")))}}])&&un(n.prototype,o),a&&un(n,a),t}(r.Component);mn([N.observable],hn.prototype,"percentile",void 0),mn([N.observable],hn.prototype,"pvalueThreshold",void 0),mn([N.observable],hn.prototype,"scoreThreshold",void 0);const bn=hn=mn([l.observer],hn);function gn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vn(e){return(vn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pn(e,t){return(Pn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function En(e){return(En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var wn=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":En(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},_n=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==En(t)&&"function"!=typeof t?Sn(e):t}(this,vn(t).call(this,e)),Object.defineProperty(Sn(n),"percentile",{enumerable:!0,configurable:!0,writable:!0,value:75}),Object.defineProperty(Sn(n),"pvalueThreshold",{enumerable:!0,configurable:!0,writable:!0,value:(0,H.Ib)().skin_geneset_hierarchy_default_p_value}),Object.defineProperty(Sn(n),"scoreThreshold",{enumerable:!0,configurable:!0,writable:!0,value:(0,H.Ib)().skin_geneset_hierarchy_default_gsva_score}),Object.defineProperty(Sn(n),"searchValue",{enumerable:!0,configurable:!0,writable:!0,value:""}),(0,N.makeObservable)(Sn(n)),n.updateSelectionParameters=n.updateSelectionParameters.bind(Sn(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pn(e,t)}(t,e),n=t,(o=[{key:"updateSelectionParameters",value:function(e,t,n){this.percentile=e,this.pvalueThreshold=t,this.scoreThreshold=n}},{key:"render",value:function(){var e,t,n,o=this;return r.createElement("div",null,r.createElement("div",{style:{marginBottom:15}},r.createElement("text",null,"Selected sample set:"," ",r.createElement("i",null,null===(e=this.props.sampleList)||void 0===e?void 0:e.name," (",null===(t=this.props.sampleList)||void 0===t?void 0:t.sampleCount,")")),r.createElement("br",null),r.createElement("text",null,"The outcome of score-based selection depends on the geneset scores of samples included in the analysis.")),r.createElement("text",null,"Search hierarchy"),r.createElement("div",{className:"form-group has-feedback input-group-sm",style:{display:"inline-block"}},r.createElement("input",{type:"text",id:"geneset-hierarchy-search",className:"form-control tableSearchInput",style:{width:768},value:this.searchValue,onChange:function(e){return o.searchValue=e.target.value}}),r.createElement("span",{className:"fa fa-search form-control-feedback","aria-hidden":"true"})),r.createElement(bn,{percentile:this.percentile,pvalueThreshold:this.pvalueThreshold,scoreThreshold:this.scoreThreshold,onApply:this.updateSelectionParameters}),r.createElement(sn,{initialSelection:this.props.initialSelection,scoreThreshold:this.scoreThreshold,pvalueThreshold:this.pvalueThreshold,percentile:this.percentile,gsvaProfile:this.props.gsvaProfile,sampleListId:null===(n=this.props.sampleList)||void 0===n?void 0:n.sampleListId,searchValue:this.searchValue,onSelect:this.props.onSelect}))}}])&&gn(n.prototype,o),a&&gn(n,a),t}(r.Component);wn([N.observable],_n.prototype,"percentile",void 0),wn([N.observable],_n.prototype,"pvalueThreshold",void 0),wn([N.observable],_n.prototype,"scoreThreshold",void 0),wn([N.observable],_n.prototype,"searchValue",void 0);const On=_n=wn([l.observer],_n);var Cn=n(6240),Tn=n(71780),kn=n(49572);function Dn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nn(e,t){return!t||"object"!==Mn(t)&&"function"!=typeof t?In(e):t}function In(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function An(e){return(An=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xn(e,t)}function xn(e,t){return(xn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mn(e){return(Mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ln=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Mn(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},Gn=function(e){function t(){return jn(this,t),Nn(this,An(t).apply(this,arguments))}return Rn(t,e),t}(Cn.ZP),Bn=function(e){function t(e){var n;return jn(this,t),n=Nn(this,An(t).call(this,e)),Object.defineProperty(In(n),"percentileOptions",{enumerable:!0,configurable:!0,writable:!0,value:[{label:"50%",value:"50"},{label:"75%",value:"75"},{label:"100%",value:"100"}]}),(0,N.makeObservable)(In(n)),n.percentileChange=n.percentileChange.bind(In(n)),n.updateSelectionFromPlot=n.updateSelectionFromPlot.bind(In(n)),n}var n,o,l;return Rn(t,e),n=t,(o=[{key:"percentileChange",value:function(e){this.store.volcanoPlotSelectedPercentile=e||{label:"75%",value:"75"}}},{key:"updateSelectionFromPlot",value:function(e,t){var n=this,r=e&&e[0].data?e[0].data:[];this.store.volcanoPlotTableData.result.map((function(e){var t=e.representativeScore,o=e.representativePvalue,a=e.name,l=t,i=-Math.log(o)/Math.log(10),s=!0,c=!1,u=void 0;try{for(var p,f=r[Symbol.iterator]();!(s=(p=f.next()).done);s=!0){var d=p.value;d.x===l&&d.y===i&&n.store.map_genesets_selected_volcano.set(a,!0)}}catch(e){c=!0,u=e}finally{try{s||null==f.return||f.return()}finally{if(c)throw u}}}))}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:a().GenesetsVolcanoSelectorWindow,style:{height:"400px"}},r.createElement("div",{style:{float:"left"},className:"form-inline"},r.createElement("label",{htmlFor:"PercentileScoreCalculation"},"Percentile for score calculation:"),r.createElement("span",{style:{display:"inline-block",verticalAlign:"middle",marginLeft:"1em"}},r.createElement(cn.default,{addLabelText:"Percentile for score calculation",style:{width:160,borderRadius:"2px"},clearable:!1,name:"PercentileScoreCalculation",value:this.store.volcanoPlotSelectedPercentile,options:this.percentileOptions,onChange:this.percentileChange})),r.createElement(G.Z,{isLoading:!(this.props.plotData&&this.props.maxY&&this.store.volcanoPlotTableData.isComplete&&this.props.data)}),this.store.volcanoPlotGraphData&&this.store.minYVolcanoPlot&&this.props.plotData&&this.props.maxY&&this.store.volcanoPlotTableData.isComplete&&this.props.data&&r.createElement(kn.VictoryChart,{theme:R.Nv,width:510,height:350,containerComponent:r.createElement(kn.VictorySelectionContainer,{onSelection:this.updateSelectionFromPlot,selectionStyle:{fill:"tomato",fillOpacity:.5,stroke:"tomato",strokeWidth:2}})},r.createElement(kn.VictoryAxis,{crossAxis:!0,domain:[this.xAxisMinValue,this.xAxisMaxValue],tickValues:this.xAxisTickValues,style:{axisLabel:{padding:35}},label:"GSVA score",offsetY:50,standalone:!1}),r.createElement(kn.VictoryAxis,{dependentAxis:!0,crossAxis:!0,domain:[0,this.props.maxY],style:{axisLabel:{padding:35},stroke:"none"},label:"-log10 p-value",offsetX:50,standalone:!1}),r.createElement(kn.VictoryLabel,{text:"significance",datum:{x:this.xAxisTickValues[this.xAxisTickValues.length-1],y:1.3},textAnchor:"start"}),r.createElement(kn.VictoryLine,{style:{data:{stroke:"black",strokeDasharray:5},parent:{border:"dotted 1px #f00"}},data:[{x:this.xAxisMinValue,y:1.3},{x:this.xAxisTickValues[this.xAxisTickValues.length-1],y:1.3}]}),r.createElement(kn.VictoryLine,{style:{data:{stroke:"rgb(144, 164, 174)"},parent:{border:"1px dashed solid"}},data:[{x:0,y:0},{x:0,y:this.props.maxY}]}),r.createElement(kn.VictoryScatter,{style:{data:{fill:function(e){return e?e.fill:""},fillOpacity:.3}},size:3,data:this.props.plotData}))),r.createElement("div",{style:{float:"right",height:"356.5px",overflowY:"scroll",width:"650px"}},r.createElement(G.Z,{isLoading:!(this.store.volcanoPlotTableData.isComplete&&this.props.data)}),this.store.volcanoPlotTableData.isComplete&&this.props.data&&r.createElement(Gn,{data:this.props.data,columns:[{name:"Gene Sets",render:function(e){return r.createElement("span",null,e.name)},sortBy:function(e){return e.name},filter:function(e,t,n){return e.name.toUpperCase().indexOf(n)>-1}},{name:"GSVA Score",render:function(e){return r.createElement("span",null,e.representativeScore.toFixed(2))},sortBy:function(e){return e.representativeScore}},{name:"P Value",render:function(e){return r.createElement("span",null,(0,Tn.Zd)(e.representativePvalue,2,.1))},sortBy:function(e){return e.representativePvalue}},{name:"Selected",render:function(t){return r.createElement(j.Z,{checked:!!e.store.map_genesets_selected_volcano.get(t.name),onChange:function(n){return e.store.map_genesets_selected_volcano.set(t.name,n.target.checked)}})}}],initialSortColumn:"P Value",initialSortDirection:"asc",showPagination:!0,initialItemsPerPage:100,showColumnVisibility:!1,showFilter:!0,showCopyDownload:!1})),r.createElement("div",{style:{float:"right"}},this.store.volcanoPlotTableData.isComplete&&this.props.data&&r.createElement("button",{style:{marginTop:15,float:"right"},className:"btn btn-primary btn-sm pull-right",onClick:function(){return e.props.onSelect(e.store.map_genesets_selected_volcano)}},"Add selection to the query"),this.store.volcanoPlotTableData.isComplete&&this.props.data&&r.createElement("button",{style:{marginRight:15,marginTop:15,float:"right"},className:"btn btn-primary btn-sm pull-right",onClick:function(){return e.store.map_genesets_selected_volcano.replace(e.props.initialSelection.map((function(e){return[e,!0]})))}},"Clear selection")))}},{key:"xAxisTickSize",get:function(){if(this.props.plotData&&this.props.plotData.length>0){var e=s().maxBy(this.props.plotData,(function(e){return e.x})).x,t=s().minBy(this.props.plotData,(function(e){return e.x})).x,n=Math.max(e,Math.abs(t));return(n=Math.round(n))/2}return.5}},{key:"xAxisTickValues",get:function(){return[-2*this.xAxisTickSize,-this.xAxisTickSize,0,this.xAxisTickSize,2*this.xAxisTickSize]}},{key:"xAxisMaxValue",get:function(){return 2.5*this.xAxisTickSize}},{key:"xAxisMinValue",get:function(){return-2.5*this.xAxisTickSize}}])&&Dn(n.prototype,o),l&&Dn(n,l),t}(A.cx);Ln([N.action],Bn.prototype,"updateSelectionFromPlot",null),Ln([N.computed],Bn.prototype,"xAxisTickSize",null),Ln([N.computed],Bn.prototype,"xAxisTickValues",null),Ln([N.computed],Bn.prototype,"xAxisMaxValue",null),Ln([N.computed],Bn.prototype,"xAxisMinValue",null);const Fn=Bn=Ln([l.observer],Bn);function Vn(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Hn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kn(e){return(Kn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Un(e,t){return(Un=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zn(e){return(Zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var qn=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Zn(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},Wn=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==Zn(t)&&"function"!=typeof t?Qn(e):t}(this,Kn(t).call(this,e)),(0,N.makeObservable)(Qn(n)),n}var n,o,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Un(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){var e=this;return r.createElement(O,{padded:!0,overflow:!0,className:a().GeneSetSelector},r.createElement(Je,{className:"sectionLabel"},"Enter Gene Sets:"),r.createElement(C,{overflow:!0},r.createElement(O,{padded:!0,className:a().buttonRow},r.createElement("button",{className:"btn btn-default btn-sm","data-test":"GENESET_HIERARCHY_BUTTON",onClick:function(){return e.store.showGenesetsHierarchyPopup=!0}},"Select Gene Sets from Hierarchy"),r.createElement("button",{className:"btn btn-default btn-sm","data-test":"GENESET_VOLCANO_BUTTON",onClick:function(){return e.store.showGenesetsVolcanoPopup=!0}},"Select Gene Sets from Volcano Plot")),r.createElement("textarea",{ref:this.textAreaRef,className:d()(a().geneSet,this.store.genesetQuery?a().notEmpty:a().empty),rows:5,cols:80,placeholder:"Enter Gene Sets",title:"Enter Gene Sets",value:this.store.genesetQuery,onChange:function(t){return e.store.genesetQuery=t.currentTarget.value},"data-test":"GENESETS_TEXT_AREA"}),r.createElement($e.Modal,{className:d()("cbioportal-frontend",a().GenesetsSelectorWindow),show:this.store.showGenesetsHierarchyPopup,onHide:function(){return e.store.showGenesetsHierarchyPopup=!1}},r.createElement($e.Modal.Header,{closeButton:!0},r.createElement($e.Modal.Title,null,"Select Gene Sets From Hierarchy")),r.createElement($e.Modal.Body,null,r.createElement(On,{initialSelection:this.store.genesetIds,gsvaProfile:this.store.getFilteredProfiles("GENESET_SCORE")[0].molecularProfileId,sampleList:this.store.selectedSampleList,onSelect:function(t){e.store.applyGenesetSelection(t),e.store.showGenesetsHierarchyPopup=!1}}))),r.createElement($e.Modal,{className:d()("cbioportal-frontend",a().GenesetsVolcanoSelectorWindow),show:this.store.showGenesetsVolcanoPopup,onHide:function(){return e.store.showGenesetsVolcanoPopup=!1},onShow:function(){return e.store.map_genesets_selected_volcano.replace(e.store.genesetIds.map((function(e){return[e,!0]})))}},r.createElement($e.Modal.Header,{closeButton:!0},r.createElement($e.Modal.Title,null,"Select Gene Sets From Volcano Plot")),r.createElement($e.Modal.Body,null,r.createElement(Fn,{initialSelection:this.store.genesetIds,data:this.store.volcanoPlotTableData.result,plotData:this.store.volcanoPlotGraphData,maxY:this.store.minYVolcanoPlot?-Math.log(this.store.minYVolcanoPlot)/Math.log(10):void 0,onSelect:function(t){e.store.addToGenesetSelection(t),e.store.showGenesetsVolcanoPopup=!1}})))))}},{key:"selectedGeneListOption",get:function(){var e=this,t=this.geneListOptions.find((function(t){return t.value===e.store.geneQuery}));return t?t.value:""}},{key:"geneListOptions",get:function(){var e=Yt;if((0,H.Ib)().query_sets_of_genes){var t=H.v4.parseQuerySetsOfGenes((0,H.Ib)().query_sets_of_genes);t&&(e=t)}return[{label:"User-defined List",value:""}].concat(Vn(e.map((function(e){return{label:"".concat(e.id," (").concat(e.genes.length," genes)"),value:e.genes.join(" ")}}))))}},{key:"textAreaRef",get:function(){var e=this;if(this.store.geneQueryErrorDisplayStatus===A.TO.ShouldFocus)return function(t){var n=e.store.oql.error;t&&n&&(t.focus(),t.setSelectionRange(n.start,n.end),e.store.geneQueryErrorDisplayStatus=A.TO.Focused)}}}])&&Hn(n.prototype,o),l&&Hn(n,l),t}(A.cx);qn([N.computed],Wn.prototype,"selectedGeneListOption",null),qn([N.computed],Wn.prototype,"geneListOptions",null),qn([N.computed],Wn.prototype,"textAreaRef",null);const Yn=Wn=qn([l.observer],Wn);var zn=n(72057),Xn=n(75997),Jn=n(65497),$n=n.n(Jn),er=n(42221),tr=n(7893);function nr(){return(nr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function rr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function or(e){return(or=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ar(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lr(e,t){return(lr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ir(e){return(ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var sr=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ir(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},cr=(n(91710),n(68995));function ur(e,t){var n=[];return t||(Object.keys(e[0]).forEach((function(e){return n.push(e,",")})),n.pop(),n.push("\r\n")),e.forEach((function(e){s().each(e,(function(e){n.push(e,",")})),n.pop(),n.push("\r\n")})),n.join("")}var pr=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==ir(t)&&"function"!=typeof t?ar(e):t}(this,or(t).call(this,e)),Object.defineProperty(ar(n),"searchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(ar(n),"_copyButton",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(ar(n),"downloadData",{enumerable:!0,configurable:!0,writable:!0,value:function(){n.props.downloadDataGenerator?$n()(ur(n.props.downloadDataGenerator()||[],n.props.downloadDataContainsHeader),n.props.downloadFilename):$n()(ur(n.props.tableData||[],n.props.downloadDataContainsHeader),n.props.downloadFilename)}}),n.handleInput=n.handleInput.bind(ar(n)),n.getText=n.getText.bind(ar(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lr(e,t)}(t,e),n=t,(o=[{key:"componentDidMount",value:function(){this.showCopyAndDownload&&this._copyButton&&this.bindCopyButton()}},{key:"bindCopyButton",value:function(){new cr(this._copyButton,{text:function(){return this.getText()}.bind(this)})}},{key:"handleInput",value:function(e){var t=this;null!==this.searchTimeout&&(clearTimeout(this.searchTimeout),this.searchTimeout=null);var n=e.currentTarget.value;this.searchTimeout=setTimeout((function(){t.props.handleInput&&t.props.handleInput(n)}),this.props.searchDelayMs)}},{key:"render",value:function(){var e=this,t=r.createElement("div",{className:"rc-tooltip-arrow-inner"});return r.createElement("div",{className:(this.props.className||"")+""},r.createElement($e.ButtonToolbar,null,r.createElement(ke.If,{condition:this.props.showPagination},r.createElement(er.jn,nr({className:"pull-left"},this.props.paginationProps))),r.createElement(ke.If,{condition:this.props.showHideShowColumnButton},r.createElement(tr.L,this.props.columnVisibilityProps)),r.createElement(ke.If,{condition:this.showCopyAndDownload},r.createElement($e.ButtonGroup,{className:this.props.copyDownloadClassName,style:{marginLeft:10}},r.createElement(R.ZD,{overlay:r.createElement("span",null,"Copy"),placement:"top",mouseLeaveDelay:0,mouseEnterDelay:.5,arrowContent:t},r.createElement("button",{ref:function(t){e._copyButton=t},className:"btn btn-sm btn-default","option-text":this.getText},r.createElement("i",{className:"fa fa-clipboard"}))),r.createElement(R.ZD,{overlay:r.createElement("span",null,"Download CSV"),mouseLeaveDelay:0,mouseEnterDelay:.5,placement:"top",arrowContent:t},r.createElement($e.Button,{className:"btn-sm",onClick:this.downloadData},r.createElement("i",{className:"fa fa-cloud-download"}))))),r.createElement(ke.If,{condition:this.props.showSearch},r.createElement("div",{className:"".concat(this.props.searchClassName," form-group has-feedback input-group-sm"),style:{display:"inline-block",marginLeft:10}},r.createElement("input",{type:"text",onInput:this.handleInput,className:"form-control tableSearchInput",style:{width:200}}),r.createElement("span",{className:"fa fa-search form-control-feedback","aria-hidden":"true"})))))}},{key:"getText",value:function(){return this.props.downloadDataGenerator?ur(this.props.downloadDataGenerator()||[],this.props.downloadDataContainsHeader):ur(this.props.tableData||[],this.props.downloadDataContainsHeader)}},{key:"showCopyAndDownload",get:function(){return this.props.showCopyAndDownload&&!0===this.context.showDownloadControls}}])&&rr(n.prototype,o),a&&rr(n,a),t}(r.Component);function fr(e){return(fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dr(){return(dr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function yr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mr(e){return(mr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function br(e,t){return(br=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(pr,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{showSearch:!1,showCopyAndDownload:!0,showPagination:!1,searchClassName:"",copyDownloadClassName:"",downloadFilename:"patient-clinical-attributes.tsv",downloadDataContainsHeader:!1,paginationProps:{},columnVisibilityProps:{},searchDelayMs:400}}),sr([N.computed],pr.prototype,"showCopyAndDownload",null),pr.contextType=R.Il;var gr=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==fr(t)&&"function"!=typeof t?hr(e):t}(this,mr(t).call(this,e)),Object.defineProperty(hr(n),"colNameToId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(hr(n),"filteredDataLength",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(hr(n),"shouldSetState",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(hr(n),"rawDataSelector",{enumerable:!0,configurable:!0,writable:!0,value:function(e,t){return t.rawData}}),Object.defineProperty(hr(n),"columnsSelector",{enumerable:!0,configurable:!0,writable:!0,value:function(e,t){return t.columns}}),Object.defineProperty(hr(n),"columnVisibilitySelector",{enumerable:!0,configurable:!0,writable:!0,value:function(e){return e.columnVisibility}}),Object.defineProperty(hr(n),"visibleColsSelector",{enumerable:!0,configurable:!0,writable:!0,value:(0,zn.P1)(n.columnsSelector,n.columnVisibilitySelector,(function(e,t){return n.resolveVisible(e,t)}))}),Object.defineProperty(hr(n),"sortedVisibleColsSelector",{enumerable:!0,configurable:!0,writable:!0,value:(0,zn.P1)(n.visibleColsSelector,(function(e){return n.resolveOrder(e)}))}),Object.defineProperty(hr(n),"sortedColsSelector",{enumerable:!0,configurable:!0,writable:!0,value:(0,zn.P1)(n.columnsSelector,(function(e){return n.resolveOrder(e)}))}),Object.defineProperty(hr(n),"columnVisibilityArraySelector",{enumerable:!0,configurable:!0,writable:!0,value:(0,zn.P1)(n.sortedColsSelector,n.columnVisibilitySelector,(function(e,t){return n.resolveColumnVisibility(n.colNameToId,e,t)}))}),Object.defineProperty(hr(n),"downloadDataSelector",{enumerable:!0,configurable:!0,writable:!0,value:(0,zn.P1)(n.sortedColsSelector,n.columnVisibilitySelector,n.rawDataSelector,(function(e,t,r){return n.generateDownloadData(e,t,r)}))}),Object.defineProperty(hr(n),"headersSelector",{enumerable:!0,configurable:!0,writable:!0,value:(0,zn.P1)(n.sortedVisibleColsSelector,(function(e){return n.generateHeaders(e)}))}),Object.defineProperty(hr(n),"rowsSelector",{enumerable:!0,configurable:!0,writable:!0,value:(0,zn.P1)(n.sortedColsSelector,n.rawDataSelector,(function(e,t){return n.generateRows(e,t)}))}),n.colNameToId=n.mapColNameToId(e.columns),n.state={columnVisibility:t.resolveVisibility(e.columns,e.rawData),sortableColumns:n.resolveSortable(n.props.columns||{}),filterableColumns:n.resolveFilterable(n.props.columns||{}),filter:"",itemsPerPage:n.props.initItemsPerPage||25,currentPage:n.props.initPage||0},n.filteredDataLength=e.rawData.length,n.shouldSetState=!1;var r=function(e){e!==n.filteredDataLength&&(n.filteredDataLength=e,n.shouldSetState=!0)},o=function(e){var t=e.props.children.find((function(e){return"tbody"===e.type})).props.children||[];n.props.onVisibleRowsChange&&n.props.onVisibleRowsChange(t.map((function(e){return e.props.rowData})))},a=Xn.Table.prototype.applyFilter;Xn.Table.prototype.applyFilter=function(){var e=a.apply(this,arguments);return r(e.length),e};var l=Xn.Table.prototype.render;return Xn.Table.prototype.render=function(){var e=l.apply(this,arguments);return o(e),e},n.handleDownload=n.handleDownload.bind(hr(n)),n.handleFilterInput=n.handleFilterInput.bind(hr(n)),n.handleVisibilityToggle=n.handleVisibilityToggle.bind(hr(n)),n.handleChangeItemsPerPage=n.handleChangeItemsPerPage.bind(hr(n)),n.handlePreviousPageClick=n.handlePreviousPageClick.bind(hr(n)),n.handleNextPageClick=n.handleNextPageClick.bind(hr(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&br(e,t)}(t,e),n=t,a=[{key:"resolveVisibility",value:function(e,t){var n={};return e?(s().each(s().keys(e),(function(r){var o=e[r],a="visible";o.visible&&(a=s().isFunction(o.visible)?o.visible(t,o.columnProps):o.visible),"excluded"!==a&&(n[r]=a)})),n):n}},{key:"columnSort",value:function(e,t){return e.priority&&t.priority?e.priority-t.priority:e.priority?-1:t.priority||e.name>t.name?1:-1}}],(o=[{key:"render",value:function(){var e=this.props,t=e.className,n=e.reactTableProps,o=e.headerControlsProps,a=(this.columnVisibilityArraySelector(this.state,this.props),this.headersSelector(this.state,this.props)),l=this.rowsSelector(this.state,this.props),i=this.rowIndexesOnPage(),s=i.firstIndex,c=i.numIndexes;return r.createElement("div",{className:t},r.createElement(pr,dr({showCopyAndDownload:!0,showHideShowColumnButton:!0,handleInput:this.handleFilterInput,downloadDataGenerator:this.handleDownload,downloadDataContainsHeader:!0,downloadFilename:"mutations.csv",showSearch:!0,columnVisibilityProps:{className:"pull-right",onColumnToggled:this.handleVisibilityToggle},paginationProps:{className:"pull-right",itemsPerPage:this.state.itemsPerPage,currentPage:this.state.currentPage,onChangeItemsPerPage:this.handleChangeItemsPerPage,onPreviousPageClick:this.handlePreviousPageClick,onNextPageClick:this.handleNextPageClick,textBetweenButtons:"".concat(this.filteredDataLength?s+1:0,"-").concat(s+c," of ").concat(this.filteredDataLength),previousPageDisabled:0===this.state.currentPage,nextPageDisabled:this.state.currentPage>=this.numPages()-1}},o)),r.createElement(Xn.Table,dr({sortable:this.state.sortableColumns,filterable:this.state.filterableColumns,filterBy:this.state.filter,itemsPerPage:-1===this.state.itemsPerPage?void 0:this.state.itemsPerPage,currentPage:this.state.currentPage},n),a,l))}},{key:"componentWillUpdate",value:function(e,t){0===t.filter.length&&(this.filteredDataLength=this.props.rawData.length)}},{key:"componentDidUpdate",value:function(){this.shouldSetState&&(this.shouldSetState=!1,this.setState({currentPage:Math.max(0,Math.min(this.state.currentPage,this.numPages()-1))}))}},{key:"rowIndexesOnPage",value:function(){var e,t;return-1===this.state.itemsPerPage?(e=0,t=this.filteredDataLength):(e=this.state.itemsPerPage*this.state.currentPage,t=Math.min(this.filteredDataLength-e,this.state.itemsPerPage)),{firstIndex:e,numIndexes:t}}},{key:"numPages",value:function(e){return-1===(e=e||this.state.itemsPerPage)?1:Math.ceil(this.filteredDataLength/e)}},{key:"mapColNameToId",value:function(e){var t={};return e&&s().each(e,(function(e,n){e.name&&(t[e.name],t[e.name]=n)})),t}},{key:"resolveOrder",value:function(e){return e?s().values(e).sort(t.columnSort):[]}},{key:"resolveColumnVisibility",value:function(e,t,n){var r=[];return s().each(t,(function(t){var o=e[t.name];n[o]&&r.push({id:o,name:t.name,visibility:n[o]})})),r}},{key:"generateHeaders",value:function(e){var t=[];return s().each(e,(function(e){var n=e.header||r.createElement("span",null,e.name);if(e.description){var o=r.createElement("div",{className:"rc-tooltip-arrow-inner"});n=r.createElement(R.ZD,{overlay:r.createElement("span",null,e.description),placement:"top",arrowContent:o},n)}t.push(r.createElement(Xn.Th,{key:e.name,column:e.name},n))})),t}},{key:"generateDownloadData",value:function(e,t,n){var r=this,o=[];return o[0]=[],s().each(e,(function(e){var n=r.colNameToId[e.name];n in t&&"excluded"!==t[n]&&o[0].push(e.name)})),s().each(n,(function(a,l){var i=[];s().each(e,(function(e){var o=r.colNameToId[e.name];if(o in t&&"excluded"!==t[o]){var l=r.getColumnData(e,n,a);e.downloader?i.push(e.downloader(l,e.columnProps)):i.push((l.columnData||"").toString())}})),o.push(i)})),o}},{key:"getColumnData",value:function(e,t,n){var r={name:e.name,tableData:t,rowData:n,columnData:null};if(e.columnDataFunction)r.columnData=e.columnDataFunction(r);else if(e.dataField){var o=null;(o=s().isArray(r.rowData)&&r.rowData.length>0?r.rowData[0]:r.rowData)&&(r.columnData=o[e.dataField])}return r}},{key:"generateRows",value:function(e,t){var n=this,o=[];return s().each(t,(function(a,l){var i=n.generateColumns(e,t,a);o.push(r.createElement(Xn.Tr,{key:l,rowData:a},i))})),o}},{key:"generateColumns",value:function(e,t,n){var r=this,o=[];return s().each(e,(function(e){var a=r.getColumnData(e,t,n);o.push(r.generateColumn(a,e))})),o}},{key:"generateColumn",value:function(e,t){return t.formatter?t.formatter(e,t.columnProps):r.createElement(Xn.Td,{key:t.name,column:t.name,value:e.columnData},e.columnData)}},{key:"resolveVisible",value:function(e,t){var n={};return s().each(s().keys(t),(function(r){"visible"===t[r]&&(n[r]=e[r])})),n}},{key:"resolveSortable",value:function(e){var t=[];return s().each(e,(function(e){s().isFunction(e.sortable)?t.push({column:e.name,sortFunction:e.sortable}):e.sortable&&t.push(e.name)})),t}},{key:"resolveFilterable",value:function(e){var t=[];return s().each(e,(function(e){s().isFunction(e.filterable)?t.push({column:e.name,filterFunction:e.filterable}):e.filterable&&t.push(e.name)})),t}},{key:"handleFilterInput",value:function(e){this.setState({filter:e})}},{key:"handleDownload",value:function(){return this.downloadDataSelector(this.state,this.props)}},{key:"handleVisibilityToggle",value:function(e){var t=e,n=this.state.columnVisibility[t],r=Object.assign({},this.state.columnVisibility);"hidden"===n?n="visible":"visible"===n&&(n="hidden"),r[t]=n,this.setState({columnVisibility:r})}},{key:"handleChangeItemsPerPage",value:function(e){this.setState({itemsPerPage:e,currentPage:Math.min(this.state.currentPage,this.numPages(e)-1)})}},{key:"handlePreviousPageClick",value:function(){this.setState({currentPage:Math.max(0,this.state.currentPage-1)})}},{key:"handleNextPageClick",value:function(){this.setState({currentPage:Math.min(this.state.currentPage+1,this.numPages()-1)})}}])&&yr(n.prototype,o),a&&yr(n,a),t}(r.Component);function vr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pr(e,t){return!t||"object"!==Cr(t)&&"function"!=typeof t?Er(e):t}function Er(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wr(e){return(wr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Or(e,t)}function Or(e,t){return(Or=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Cr(e){return(Cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Tr=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Cr(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},kr=function(e){function t(){return Sr(this,t),Pr(this,wr(t).apply(this,arguments))}return _r(t,e),t}(gr),Dr=function(e){function t(e){var n;return Sr(this,t),n=Pr(this,wr(t).call(this,e)),Object.defineProperty(Er(n),"map_geneSymbol_selected",{enumerable:!0,configurable:!0,writable:!0,value:N.observable.map()}),Object.defineProperty(Er(n),"columns",{enumerable:!0,configurable:!0,writable:!0,value:{hugoGeneSymbol:{priority:1,dataField:"hugoGeneSymbol",name:"Gene Symbol",sortable:!0,filterable:!0},numberOfMutations:{priority:2,dataField:"numberOfMutations",name:"Num Mutations",sortable:!0,filterable:!0},qValue:{priority:3,dataField:"qValue",name:"Q-Value",sortable:!0,filterable:!0,formatter:function(e){var t=e.name,n=e.columnData;return r.createElement(Xn.Td,{key:t,column:t,value:n},(0,Tn.Zd)(n,2,.1))}},selected:{name:"Selected",priority:4,sortable:!1,filterable:!1,header:r.createElement("div",{className:a().selectionColumnHeader},r.createElement("span",null,"All"),r.createElement(l.Observer,null,(function(){return r.createElement(j.Z,{checked:n.selectedGenes.length>0,indeterminate:n.selectedGenes.length>0&&n.selectedGenes.length<n.allGenes.length,onChange:function(e){return n.selectAll(e.target.checked)}})}))),formatter:function(e){var t=e.name,o=e.rowData;return r.createElement(Xn.Td,{key:t,column:t},!!o&&r.createElement("div",{className:a().selectionColumnCell},r.createElement(l.Observer,null,(function(){return r.createElement(j.Z,{checked:!!n.map_geneSymbol_selected.get(o.hugoGeneSymbol),onChange:function(e){return n.map_geneSymbol_selected.set(o.hugoGeneSymbol,e.target.checked)}})}))))}}}}),(0,N.makeObservable)(Er(n)),n.map_geneSymbol_selected.replace(e.initialSelection.map((function(e){return[e,!0]}))),n}var n,o,i;return _r(t,e),n=t,(o=[{key:"selectAll",value:function(e){var t=!0,n=!1,r=void 0;try{for(var o,a=this.allGenes[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;this.map_geneSymbol_selected.set(l,e)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:a().MutSigGeneSelector},r.createElement(kr,{itemsName:"genes",initItemsPerPage:10,columns:this.columns,rawData:this.props.data,headerControlsProps:{showCopyAndDownload:!1,showHideShowColumnButton:!1,showPagination:!0},reactTableProps:{className:"table table-striped table-border-top",hideFilterInput:!0,defaultSort:this.columns.qValue.name}}),r.createElement("div",null,r.createElement("button",{style:{marginTop:20},className:"btn btn-primary btn-sm pull-right",onClick:function(){return e.props.onSelect(e.map_geneSymbol_selected)}},"Select")))}},{key:"allGenes",get:function(){return s().uniq(this.props.data.map((function(e){return e.hugoGeneSymbol})))}},{key:"selectedGenes",get:function(){var e=this;return this.allGenes.filter((function(t){return e.map_geneSymbol_selected.get(t)}))}}])&&vr(n.prototype,o),i&&vr(n,i),t}(r.Component);Tr([N.computed],Dr.prototype,"allGenes",null),Tr([N.computed],Dr.prototype,"selectedGenes",null),Tr([N.action],Dr.prototype,"selectAll",null);const jr=Dr=Tr([l.observer],Dr);function Nr(e){return e?e.genes.map((function(e){return e.hugoGeneSymbol})):[]}var Ir=new RegExp("^([0-9]{1,2})([pq])([0-9]{1,2})(?:.?)([0-9]{0,2})$");function Ar(e,t){var n=e.match(Ir),r=t.match(Ir);return n&&r?parseInt(n[1],10)-parseInt(r[1],10)!=0?parseInt(n[1],10)-parseInt(r[1],10):"p"===n[2]&&"q"===r[2]?-1:"q"===n[2]&&"p"===r[2]?1:n[2]===r[2]?parseInt(n[3],10)-parseInt(r[3],10):0:+!!n-+!!r}function Rr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xr(e,t,n){return t&&Rr(e.prototype,t),n&&Rr(e,n),e}function Mr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lr(e,t){return!t||"object"!==Hr(t)&&"function"!=typeof t?Gr(e):t}function Gr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Br(e){return(Br=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vr(e,t)}function Vr(e,t){return(Vr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Hr(e){return(Hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Kr=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Hr(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},Qr=function(e){function t(){return Mr(this,t),Lr(this,Br(t).apply(this,arguments))}return Fr(t,e),t}(gr),Ur=function(e){function t(e){var n;return Mr(this,t),n=Lr(this,Br(t).call(this,e)),Object.defineProperty(Gr(n),"map_geneSymbol_selected",{enumerable:!0,configurable:!0,writable:!0,value:N.observable.map()}),Object.defineProperty(Gr(n),"columns",{enumerable:!0,configurable:!0,writable:!0,value:{amp:{priority:1,columnDataFunction:function(e){var t=e.rowData;return t&&(t.amp?"Amp":"Del")},name:"Amp Del",sortable:!0,filterable:!0,header:r.createElement("div",{className:d()(a().header,a().amp,a().del)},r.createElement("span",{className:a().amp},"Amp"),r.createElement("span",{className:a().del},"Del")),formatter:function(e){var t=e.name,n=e.rowData,o=e.columnData;return r.createElement(Xn.Td,{key:t,column:t,value:o},!!n&&r.createElement("div",{className:n.amp?a().amp:a().del}))}},chromosome:{priority:2,dataField:"chromosome",name:"Chr",sortable:!0,filterable:!0},cytoband:{priority:3,dataField:"cytoband",name:"Cytoband",sortable:Ar,filterable:!0},"#":{priority:4,columnDataFunction:function(e){return Nr(e.rowData).length},name:"#",sortable:!0,filterable:!0},genes:{priority:5,columnDataFunction:function(e){return Nr(e.rowData).join(" ")},name:"Genes",sortable:function(e,t){return e.length-t.length||+(e>t)-+(e<t)},filterable:!0,formatter:function(e){var t=e.name,o=e.rowData,a=e.columnData;return r.createElement(Xn.Td,{key:t,column:t,value:a},r.createElement(qr,{gistic:o,map_geneSymbol_selected:n.map_geneSymbol_selected}))}},qValue:{priority:6,dataField:"qValue",name:"Q-Value",sortable:!0,filterable:!0,formatter:function(e){var t=e.name,n=(e.rowData,e.columnData);return r.createElement(Xn.Td,{key:t,column:t,value:n},(0,Tn.Zd)(n,2,.1))}}}}),n.map_geneSymbol_selected.replace(e.initialSelection.map((function(e){return[e,!0]}))),n}return Fr(t,e),xr(t,[{key:"render",value:function(){var e=this;return r.createElement("div",{className:a().GisticGeneSelector},r.createElement("span",null,"Click on a gene to ",r.createElement("span",{className:d()(a().geneToggle,a().selected,a().simulateHovered)},"select")," it."),r.createElement(Qr,{className:a().gisticTable,itemsName:"genes",initItemsPerPage:10,columns:this.columns,rawData:this.props.data,headerControlsProps:{showCopyAndDownload:!1,showHideShowColumnButton:!1,showPagination:!0},reactTableProps:{className:"table table-striped table-border-top",hideFilterInput:!0,defaultSort:this.columns.qValue.name}}),r.createElement("div",null,r.createElement("button",{style:{marginTop:20},className:"btn btn-primary btn-sm pull-right",onClick:function(){return e.props.onSelect(e.map_geneSymbol_selected)}},"Select")))}}]),t}(r.Component);const Zr=Ur=Kr([l.observer],Ur);var qr=function(e){function t(e){var n;return Mr(this,t),n=Lr(this,Br(t).call(this,e)),Object.defineProperty(Gr(n),"showAll",{enumerable:!0,configurable:!0,writable:!0,value:!1}),(0,N.makeObservable)(Gr(n)),n}return Fr(t,e),xr(t,[{key:"renderGeneToggles",value:function(e){var t=this;return e.map((function(e){return r.createElement(l.Observer,null,(function(){var n=!!t.props.map_geneSymbol_selected.get(e);return r.createElement("span",{key:e,className:d()(a().geneToggle,n?a().selected:a().notSelected),onClick:function(r){return t.props.map_geneSymbol_selected.set(e,!n)}},e)}))}))}},{key:"render",value:function(){var e=this,t=Nr(this.props.gistic),n=t.slice(0,5),o=t.slice(5);return r.createElement("div",{className:a().GisticGeneToggles},r.createElement("div",{className:a().someGenes},this.renderGeneToggles(n),!!o.length&&r.createElement("a",{className:a().showMoreLess,onClick:function(){return e.showAll=!e.showAll}},this.showAll?"less":"+".concat(o.length," more"))),r.createElement("div",{className:a().moreGenes},this.showAll&&this.renderGeneToggles(o)))}}]),t}(r.Component);Kr([N.observable],qr.prototype,"showAll",void 0),qr=Kr([l.observer],qr);var Wr=n(17790);function Yr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xr(e,t){return!t||"object"!==eo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Jr(e){return(Jr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $r(e,t){return($r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function eo(e){return(eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var to=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":eo(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},no=function(e){function t(){return Yr(this,t),Xr(this,Jr(t).apply(this,arguments))}var n,o,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$r(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){return this.store.genesetIdsQuery.error?r.createElement("div",{className:a().GeneSymbolValidator},r.createElement("span",{className:a().errorMessage},"Cannot validate gene sets because of invalid OQL. ".concat(this.store.genesetQueryErrorDisplayStatus===A.TO.Focused?"Please click 'Submit' to see location of error.":this.store.genesetIdsQuery.error.message))):this.store.genesetIdsQuery.query.length?this.store.genesets.isError?r.createElement("div",{className:a().GeneSymbolValidator},r.createElement("span",{className:a().pendingMessage},"Unable to validate gene sets.")):this.store.genesets.isPending&&0===this.store.genesets.result.invalid.length?r.createElement("div",{className:a().GeneSymbolValidator},r.createElement("span",{className:a().pendingMessage},"Validating gene sets...")):this.store.genesets.result.invalid.length?r.createElement("div",{className:a().GeneSymbolValidator},r.createElement("div",{className:a().invalidBubble,title:"Please edit the gene sets."},r.createElement(D(),{className:a().icon,name:"exclamation-circle"}),r.createElement("span",null,"Invalid gene sets.")),this.store.genesets.result.invalid.map(this.renderSuggestion,this)):r.createElement("div",{className:a().GeneSymbolValidator},r.createElement("div",{className:a().validBubble,title:"You can now submit the list."},r.createElement(D(),{className:a().icon,name:"check-circle"}),r.createElement("span",null,"All gene sets are valid."))):null}},{key:"renderSuggestion",value:function(e,t){var n=this;return r.createElement("div",{key:t,className:a().suggestionBubble,title:"Could not find gene set. Click to remove it from the gene list.",onClick:function(){return n.store.replaceGeneset(e,"")}},r.createElement(D(),{className:a().icon,name:"times-circle"}),r.createElement("span",{className:a().noChoiceLabel},e))}}])&&zr(n.prototype,o),l&&zr(n,l),t}(A.cx);const ro=no=to([l.observer],no);var oo=n(94916);function ao(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function lo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function io(e){return(io=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function so(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function co(e,t){return(co=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function uo(e){return(uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var po=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":uo(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},fo=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==uo(t)&&"function"!=typeof t?so(e):t}(this,io(t).call(this,e)),(0,N.makeObservable)(so(n)),n}var n,o,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&co(e,t)}(t,e),n=t,(o=[{key:"handleOQLUpdate",value:function(e,t,n){n!==this.store.geneQuery&&(this.store.geneQuery=n,this.store.oql.error=e.error)}},{key:"render",value:function(){var e=this;return r.createElement(O,{overflow:!0,padded:!0,className:a().GeneSetSelector},r.createElement(Je,{className:"sectionLabel",secondaryComponent:r.createElement("a",{target:"_blank",className:a().learnOql,href:(0,I.EC)()},r.createElement("strong",null,"Hint:")," Learn Onco Query Language (OQL)",r.createElement("br",null),"to write more powerful queries"," ",r.createElement("i",{className:"fa fa-external-link"}))},"Enter Genes:"),r.createElement(C,{overflow:!0},r.createElement(cn.default,{value:this.selectedGeneListOption,options:this.geneListOptions,onChange:function(t){return e.store.geneQuery=t?t.value:""}}),r.createElement(Wr.Z,{focus:this.store.geneQueryErrorDisplayStatus,inputGeneQuery:this.store.geneQuery,validateInputGeneQuery:!0,location:Wr.e.DEFAULT,textBoxPrompt:"Enter HUGO Gene Symbols, Gene Aliases, or OQL",callback:this.handleOQLUpdate,error:this.store.submitError,messages:this.store.oqlMessages},this.customError),r.createElement(ro,null),r.createElement($e.Modal,{className:d()("cbioportal-frontend",a().MutSigGeneSelectorWindow),show:this.store.showMutSigPopup,onHide:function(){return e.store.showMutSigPopup=!1}},r.createElement($e.Modal.Header,{closeButton:!0},r.createElement($e.Modal.Title,null,"Recently Mutated Genes")),r.createElement($e.Modal.Body,null,r.createElement(jr,{initialSelection:this.store.geneIds,data:this.store.mutSigForSingleStudy.result,onSelect:function(t){e.store.applyGeneSelection(t),e.store.showMutSigPopup=!1}}))),r.createElement($e.Modal,{className:d()("cbioportal-frontend",a().GisticGeneSelectorWindow),show:this.store.showGisticPopup,onHide:function(){return e.store.showGisticPopup=!1}},r.createElement($e.Modal.Header,{closeButton:!0},r.createElement($e.Modal.Title,null,"Recurrent Copy Number Alterations (Gistic)")),r.createElement($e.Modal.Body,null,r.createElement(Zr,{initialSelection:this.store.geneIds,data:this.store.gisticForSingleStudy.result,onSelect:function(t){e.store.applyGeneSelection(t),e.store.showGisticPopup=!1}})))))}},{key:"selectedGeneListOption",get:function(){var e=this,t=this.geneListOptions.find((function(t){return t.value==e.store.geneQuery}));return t?t.value:""}},{key:"geneListOptions",get:function(){var e=Yt;if((0,H.Ib)().query_sets_of_genes){var t=H.v4.parseQuerySetsOfGenes((0,H.Ib)().query_sets_of_genes);t&&(e=t)}return[{label:"User-defined List",value:""}].concat(ao(e.map((function(e){return{label:"".concat(e.id," (").concat(e.genes.length," genes)"),value:e.genes.join(" ")}}))))}},{key:"customError",get:function(){return this.store.isQueryLimitReached?r.createElement("div",{className:a().geneCount},r.createElement("div",{className:"",title:"Please limit your queries to ".concat(this.store.geneLimit," genes or fewer.")},r.createElement(D(),{className:a().icon,name:"exclamation-circle"}),r.createElement(oo.Z,{sampleCount:this.store.approxSampleCount,queryProductLimit:(0,H.Ib)().query_product_limit,email:(0,H.Ib)().skin_email_contact}))):null}}])&&lo(n.prototype,o),l&&lo(n,l),t}(A.cx);po([N.computed],fo.prototype,"selectedGeneListOption",null),po([N.computed],fo.prototype,"geneListOptions",null),po([N.action.bound],fo.prototype,"handleOQLUpdate",null),po([N.computed],fo.prototype,"customError",null);const yo=fo=po([l.observer],fo);var mo,ho=n(67416);!function(e){e.custom="-1",e.mutation_cna="w_mut_cna",e.mutation="w_mut",e.cna="w_cna",e.all="all"}(mo||(mo={}));var bo=[{name:"All",description:"All cases in the selected cohorts",value:mo.all,isdefault:!1},{name:"Cases with mutations data",description:"All cases with mutations data",value:mo.mutation,isdefault:!1},{name:"Cases with copy number alterations data",description:"All cases with copy number alterations data",value:mo.cna,isdefault:!1},{name:"Cases with both mutations and copy number alterations data",description:"All cases with both mutations and copy number alterations data",value:mo.mutation_cna,isdefault:!1},{name:"User-defined Case List",description:"Specify your own case list",value:mo.custom,isdefault:!0}];function go(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vo(e){return(vo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function So(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Po(e,t){return(Po=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Eo(e){return(Eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var wo=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Eo(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l};function _o(e,t){return s().includes(e.textLabel.toLowerCase(),t.toLowerCase())}var Oo=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==Eo(t)&&"function"!=typeof t?So(e):t}(this,vo(t).call(this,e)),Object.defineProperty(So(n),"isQueryModified",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(So(n),"CaseIdsModeRadio",{enumerable:!0,configurable:!0,writable:!0,value:(0,l.observer)((function(e){return r.createElement("label",null,r.createElement("input",{type:"radio",checked:n.store.caseIdsMode==e.state,onChange:function(t){t.currentTarget.checked&&(n.store.caseIdsMode=e.state)}}),e.label)}))}),(0,N.makeObservable)(So(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Po(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){var e=this;return!this.isQueryModified&&this.props.modifyQueryParams&&this.modifyQuery(),this.store.selectableSelectedStudyIds.length?r.createElement(O,{padded:!0,overflow:!0,className:a().CaseSetSelector,"data-test":"CaseSetSelector"},r.createElement("div",null,r.createElement(Je,{className:"sectionLabel",secondaryComponent:r.createElement("a",{href:(0,I.yY)(this.store.selectableSelectedStudyIds),target:"_blank"},"To build your own case set,",r.createElement("br",null),"try out our enhanced Study View."),promises:[this.store.sampleLists,this.store.asyncCustomCaseSet,this.store.profiledSamplesCount]},"Select Patient/Case Set:")),r.createElement("div",null,r.createElement(cn.default,{value:this.store.selectedSampleListId,options:this.caseSetOptions,filterOption:_o,onChange:function(t){return e.store.selectedSampleListId=t?t.value:void 0},"data-test":"caseSetSelector"}),!(this.store.selectedSampleListId!==A.K1)&&r.createElement(C,{padded:!0},r.createElement("div",{className:a().radioRow},r.createElement(O,{padded:!0},r.createElement(this.CaseIdsModeRadio,{label:"By sample ID",state:"sample"}),r.createElement(this.CaseIdsModeRadio,{label:"By patient ID",state:"patient"}))),r.createElement("span",null,"Enter case IDs below:"),r.createElement("textarea",{title:"Enter case IDs",rows:6,cols:80,value:this.store.caseIds,onChange:function(t){return e.store.caseIds=t.currentTarget.value},"data-test":"CustomCaseSetInput"})))):null}},{key:"modifyQuery",value:function(){this.store.selectedSampleListId=this.props.modifyQueryParams.selectedSampleListId,this.store.caseIds=this.props.modifyQueryParams.selectedSampleIds.join("\n"),this.store.caseIdsMode=this.props.modifyQueryParams.caseIdsMode,this.isQueryModified=!0}},{key:"caseSetOptions",get:function(){var e,t,n,o=this.store.sampleLists.result.map((function(e){return{label:r.createElement(R.ZD,{placement:"right",mouseEnterDelay:0,overlay:r.createElement("div",{className:a().tooltip},e.description)},r.createElement("span",null,"".concat(e.name," (").concat(e.sampleCount,")"))),value:e.sampleListId,textLabel:e.name}})),l=(e=this.store.isVirtualStudySelected,t=this.store.isMultipleNonVirtualStudiesSelected,n=this.store.profiledSamplesCount.result,s().reduce(bo,(function(r,o){if(o.isdefault)r.push(o);else if(t&&!e){var a=n[o.value];a>0&&r.push(Object.assign({},o,{name:"".concat(o.name," (").concat(a,")")}))}else if(e&&o.value===mo.all){var l=n[o.value];l>0&&r.push(Object.assign({},o,{name:"".concat(o.name," (").concat(l,")")}))}return r}),[])).map((function(e){return{value:e.value,label:r.createElement(R.ZD,{placement:"right",mouseEnterDelay:0,overlay:r.createElement("div",{className:a().tooltip},e.description)},r.createElement("span",null,e.name)),textLabel:e.name}}));return o.concat(l)}}])&&go(n.prototype,o),i&&go(n,i),t}(A.cx);wo([N.computed],Oo.prototype,"caseSetOptions",null),wo([N.action],Oo.prototype,"modifyQuery",null);const Co=Oo=wo([l.observer],Oo);function To(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ko(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Do(e,t){return!t||"object"!==Io(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jo(e){return(jo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function No(e,t){return(No=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Io(e){return(Io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ao=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Io(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},Ro=function(e){function t(){return To(this,t),Do(this,jo(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&No(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){return this.props.ids.length>0?r.createElement("div",{className:"alert alert-danger","data-test":"unkown-study-warning",style:{marginBottom:0}},r.createElement("i",{className:"fa fa-exclamation-triangle"})," The following studies do not exist or you do not have access to them:",r.createElement("ul",{style:{margin:"10px 0"}},this.props.ids.map((function(e){return r.createElement("li",null,e)}))),"Please resubmit your query below."):null}}])&&ko(n.prototype,o),a&&ko(n,a),t}(r.Component);const xo=Ro=Ao([l.observer],Ro);var Mo=n(5933),Lo=n(10643),Go=n(58997);function Bo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fo(e){return(Fo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ho(e,t){return(Ho=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ko(e){return(Ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Qo=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Ko(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},Uo=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==Ko(t)&&"function"!=typeof t?Vo(e):t}(this,Fo(t).call(this,e)),Object.defineProperty(Vo(n),"_showQueryControls",{enumerable:!0,configurable:!0,writable:!0,value:!1}),(0,N.makeObservable)(Vo(n)),n.handleSubmit=n.handleSubmit.bind(Vo(n)),n}var n,o,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ho(e,t)}(t,e),n=t,(o=[{key:"handleSubmit",value:function(){this.store.submit(),this.props.onSubmit&&this.props.onSubmit()}},{key:"toggleQueryControls",value:function(){Xt()(document).scrollTop(0),this._showQueryControls=!this._showQueryControls}},{key:"render",value:function(){var e=this;return r.createElement(C,{padded:!0,overflow:!0,className:d()("small",a().QueryContainer,{forkedMode:this.props.forkedMode})},this.props.showAlerts&&this.store.genes.isComplete&&this.store.genes.result.suggestions.length>0&&r.createElement("div",{className:"alert alert-danger","data-test":"invalidQueryAlert",style:{marginBottom:0}},r.createElement("i",{className:"fa fa-exclamation-triangle"})," Your query has invalid or out-dated gene symbols. Please correct below."),this.store.unknownStudyIds.isComplete&&r.createElement(xo,{ids:this.store.unknownStudyIds.result}),this.store.forDownloadTab&&r.createElement("div",{className:"alert alert-danger",role:"alert"},"The Download interface has been removed. Enhanced download functionality is now available through the Query interface. Run a query with your gene(s) of interest and use the Download tab to download all available data types."),!this.store.forDownloadTab&&r.createElement(ke.If,{condition:0===this.store.defaultSelectedIds.size||this.studiesDataReady},r.createElement(ke.Then,null,r.createElement(ke.If,{condition:this.props.forkedMode&&this.showQueryControls},r.createElement(O,{className:a().StudySelection},r.createElement(Je,{className:"sectionLabel"},"Selected Studies:"," ",r.createElement("button",{"data-test":"modifyStudySelectionButton",className:"btn btn-default btn-xs",onClick:this.toggleQueryControls},"Modify")),r.createElement("div",{style:{marginLeft:8}},this.selectedStudySummary))),this.getWrappedCancerStudySelector,r.createElement(ke.If,{condition:this.showQueryControls},r.createElement(r.Fragment,null,this.store.physicalStudyIdsInSelection.length>1?r.createElement(qt,null):r.createElement(xt,null),this.store.selectableSelectedStudyIds.length>0&&r.createElement(Co,{modifyQueryParams:this.props.modifyQueryParams}),r.createElement(yo,null),!!this.store.isGenesetProfileSelected&&r.createElement(Yn,null),!!this.store.forDownloadTab&&r.createElement("span",{className:a().downloadSubmitExplanation},"Clicking submit will generate a tab-delimited file containing your requested data."),!!this.store.forDownloadTab&&r.createElement(j.Z,{labelProps:{className:a().transposeDataMatrix},checked:this.store.transposeDataMatrix,onChange:function(t){return e.store.transposeDataMatrix=t.currentTarget.checked}},"Transpose data matrix"),r.createElement(O,{overflow:!0,padded:!0,className:d()(a().submitRow,"posRelative")},r.createElement("button",{style:{paddingLeft:50,paddingRight:50,marginRight:50},disabled:!this.store.submitEnabled,className:"btn btn-primary btn-lg",onClick:function(){return e.handleSubmit()},"data-test":"queryButton"},this.store.forDownloadTab?"Download":"Submit Query")))),r.createElement(ke.If,{condition:!this.showQueryControls},r.createElement(O,{className:a().forkedButtons},r.createElement("div",{style:{width:330,textAlign:"right",marginRight:20}},r.createElement(ft,{store:this.store})),r.createElement(R.ZD,{placement:"top",trigger:["hover"],destroyTooltipOnHide:!0,mouseEnterDelay:0,mouseLeaveDelay:0,disabled:this.store.selectableSelectedStudies.length>0,overlay:this.queryByGeneTooltipMessage},r.createElement("a",{"data-test":"queryByGeneButton",onClick:function(){return e.store.hasSelectedStudies&&e.toggleQueryControls()},"data-event":(0,Go.XO)({action:"clickQueryByGeneButton",label:"",category:"homePage"}),className:d()("btn btn-primary btn-lg",{disabled:!this.store.hasSelectedStudies})},"Query By Gene")),"OR",r.createElement(R.ZD,{placement:"top",trigger:["hover"],destroyTooltipOnHide:!0,mouseEnterDelay:0,mouseLeaveDelay:0,disabled:!this.exploreCohortsButtonDisabled,overlay:this.exploreCohortsButtonTooltipMessage},r.createElement("a",{onClick:function(){return!e.exploreCohortsButtonDisabled&&e.store.openSummary()},"data-event":(0,Go.XO)({action:"clickExploreStudiesButton",label:"",category:"homePage"}),className:d()("btn btn-primary btn-lg",{disabled:this.exploreCohortsButtonDisabled})},r.createElement("i",{style:{marginTop:5},className:"ci ci-pie-chart"})," ","Explore Selected Studies"))))),r.createElement(ke.Else,null,r.createElement(G.Z,{isLoading:!0,center:!0,size:"big"}))))}},{key:"store",get:function(){return this.props.store}},{key:"studiesDataReady",get:function(){return this.store.studiesHaveChangedSinceInitialization||this.store.selectableStudiesSet.isComplete&&this.store.initiallySelected.profileIds&&this.store.cancerTypes.isComplete&&this.store.cancerStudies.isComplete&&this.store.profiledSamplesCount.isComplete}},{key:"showQueryControls",get:function(){return!1===this.props.forkedMode||this._showQueryControls}},{key:"selectedStudySummary",get:function(){var e=this,t=null;return this.store.selectableSelectedStudies.length>4&&(t=r.createElement("span",{className:"inlineBlock"},r.createElement(R.ZD,{overlay:function(){return e.store.selectableSelectedStudies.slice(4).map((function(e){return r.createElement("div",null,e.name)}))}},r.createElement("a",null,"and"," ",this.store.selectableSelectedStudies.length-4," ","more")))),r.createElement("span",{className:"inlineBlock"},this.store.selectableSelectedStudies.slice(0,4).reduce((function(e,t,n,o){return e.push(r.createElement("span",{className:a().studyName},t.name)),e}),[]),t,t&&r.createElement("span",null," "),"(",r.createElement("b",null,this.store.profiledSamplesCount.result.all)," ",1===this.store.profiledSamplesCount.result.all?"sample":"total samples",")")}},{key:"getWrappedCancerStudySelector",get:function(){var e=r.createElement(wt,{queryStore:this.store,forkedMode:this.props.forkedMode});return this.props.forkedMode?r.createElement("div",{style:{marginTop:0}},r.createElement(Lo.pT,{duration:500,collapse:!1,className:"monkeys",unmountOnExit:!0,when:!this.showQueryControls},e)):e}},{key:"studyLimitedReached",get:function(){return this.store.selectableSelectedStudyIds.length>50}},{key:"exploreCohortsButtonDisabled",get:function(){return this.studyLimitedReached||!this.store.hasSelectedStudies}},{key:"exploreCohortsButtonTooltipMessage",get:function(){return 0===this.store.selectableSelectedStudyIds.length?"Please select at least one study above":this.studyLimitedReached?"Too many studies selected for study summary (limit: 50)":"Open summary of selected studies"}},{key:"queryByGeneTooltipMessage",get:function(){return 0===this.store.selectableSelectedStudies.length?"Please select at least one study above":"Continue to query configuration"}}])&&Bo(n.prototype,o),l&&Bo(n,l),t}(r.Component);Qo([N.computed],Uo.prototype,"studiesDataReady",null),Qo([N.observable],Uo.prototype,"_showQueryControls",void 0),Qo([N.computed],Uo.prototype,"showQueryControls",null),Qo([N.computed],Uo.prototype,"selectedStudySummary",null),Qo([N.computed],Uo.prototype,"getWrappedCancerStudySelector",null),Qo([Mo.default],Uo.prototype,"toggleQueryControls",null),Qo([N.computed],Uo.prototype,"studyLimitedReached",null),Qo([N.computed],Uo.prototype,"exploreCohortsButtonDisabled",null),Qo([N.computed],Uo.prototype,"exploreCohortsButtonTooltipMessage",null),Qo([N.computed],Uo.prototype,"queryByGeneTooltipMessage",null);const Zo=Uo=Qo([(0,ho.Z)(A.yL),l.observer],Uo);var qo,Wo=n(21015),Yo=n(38659);!function(e){e.STUDY="STUDY",e.STUDY_COUNT="studies",e.GENE="GENE",e.GENE_COUNT="genes",e.PATIENT="PATIENT",e.PATIENT_COUNT="patients",e.SAMPLE="SAMPLE",e.SAMPLE_COUNT="samples"}(qo||(qo={}));var zo=n(89551),Xo=n(95356),Jo=n(2958),$o=n.n(Jo),ea=n(28676),ta=n(95497);function na(){return(na=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ra(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oa(e){return(oa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function aa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function la(e,t){return(la=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ia(e){return(ia="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var sa,ca=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ia(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},ua=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function l(e){try{s(r.next(e))}catch(e){a(e)}}function i(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}s((r=r.apply(e,t||[])).next())}))},pa=20;!function(e){e[e.SESSION=0]="SESSION",e[e.STUDY_LIST=1]="STUDY_LIST"}(sa||(sa={}));var fa=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==ia(t)&&"function"!=typeof t?aa(e):t}(this,oa(t).call(this,e)),Object.defineProperty(aa(n),"select",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(aa(n),"studyPageMultiplier",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(aa(n),"genePageMultiplier",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(aa(n),"patientPageMultiplier",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(aa(n),"samplePageMultiplier",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(aa(n),"inputValue",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(aa(n),"isFocusing",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(aa(n),"isLoading",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(aa(n),"geneStudyQueryVirtualStudy",{enumerable:!0,configurable:!0,writable:!0,value:(0,R.$w)((function(){return ua(aa(n),void 0,void 0,regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,H.Ib)().default_cross_cancer_study_session_id,!H.v4.sessionServiceIsEnabled()||!t){e.next=14;break}return e.prev=2,e.next=5,ea.Z.getVirtualStudy(t);case 5:return n=e.sent,e.abrupt("return",n);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:e.next=15;break;case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))}),null)}),Object.defineProperty(aa(n),"geneStudyQuery",{enumerable:!0,configurable:!0,writable:!0,value:(0,R.$w)({await:function(){return[n.geneStudyQueryVirtualStudy]},invoke:function(){return n.geneStudyQueryVirtualStudy.result?Promise.resolve({type:sa.SESSION,query:n.geneStudyQueryVirtualStudy.result.id,name:n.geneStudyQueryVirtualStudy.result.data.name}):Promise.resolve({type:sa.STUDY_LIST,query:(0,H.Ib)().default_cross_cancer_study_list,name:(0,H.Ib)().default_cross_cancer_study_list_name})}})}),Object.defineProperty(aa(n),"options",{enumerable:!0,configurable:!0,writable:!0,value:(0,R.$w)({await:function(){return[n.geneStudyQuery]},invoke:function(){var e=n.inputValue,t=n.geneStudyQuery.result;return e.length>0?Promise.all([L.Z.getAllStudiesUsingGETWithHttpInfo({keyword:e,pageSize:3+pa*n.studyPageMultiplier}),L.Z.getAllStudiesUsingGETWithHttpInfo({keyword:e,projection:"META"}),L.Z.getAllGenesUsingGETWithHttpInfo({keyword:e,pageSize:3+pa*n.genePageMultiplier}),L.Z.getAllGenesUsingGETWithHttpInfo({keyword:e,projection:"META"}),L.Z.getAllPatientsUsingGETWithHttpInfo({keyword:e,pageSize:3+pa*n.patientPageMultiplier,projection:"DETAILED"}),L.Z.getAllPatientsUsingGETWithHttpInfo({keyword:e,projection:"META"}),L.Z.getSamplesByKeywordUsingGETWithHttpInfo({keyword:e,pageSize:3+pa*n.samplePageMultiplier}),L.Z.getSamplesByKeywordUsingGETWithHttpInfo({keyword:e,projection:"META"}),(0,zo._)(0)]).then((function(r){return ua(aa(n),void 0,void 0,regeneratorRuntime.mark((function n(){var o,a,l,i,s,c,u,p,f,d,y,m=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=r[0].body.map(this.studyToOption),a={value:parseInt(r[1].headers["total-count"])-o.length,type:qo.STUDY_COUNT},l=r[2].body.map(this.geneToOption),i={value:parseInt(r[3].headers["total-count"])-l.length,type:qo.GENE_COUNT},s=r[4].body.map(this.patientToOption),c={value:parseInt(r[5].headers["total-count"])-s.length,type:qo.PATIENT_COUNT},u=r[6].body.map(this.sampleToOption),p={value:parseInt(r[7].headers["total-count"])-u.length,type:qo.SAMPLE_COUNT},!(l.length+s.length<6&&a.value>0)){n.next=13;break}return f=6-(l.length+s.length),n.next=12,L.Z.getAllStudiesUsingGETWithHttpInfo({keyword:e,pageSize:f+3+pa*this.studyPageMultiplier}).then((function(e){o=e.body.map(m.studyToOption)}));case 12:a.value=a.value-f;case 13:return d=[],(y=[]).push({label:"Studies",options:o,groupData:a,instruction:"Click on a study to open its summary"}),a.value>0&&(o.push(a),d.push(a)),t&&(y.push({label:"Genes",options:l,groupData:i,instruction:"Click on a gene to query it across ".concat(t.name)}),i.value>0&&(l.push(i),d.push(i))),y.push({label:"Patients",options:s,groupData:c,instruction:"Click on a patient to see a summary"}),c.value>0&&(s.push(c),d.push(c)),y.push({label:"Samples",options:u,groupData:p,instruction:"Click on a sample to open its summary"}),p.value>0&&(u.push(p),d.push(p)),n.abrupt("return",y);case 23:case"end":return n.stop()}}),n,this)})))})):Promise.resolve([])}})}),(0,N.makeObservable)(aa(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&la(e,t)}(t,e),n=t,(o=[{key:"selectRef",value:function(e){this.select=e}},{key:"studyToOption",value:function(e,t){return{value:e.studyId,type:qo.STUDY,studyId:e.studyId,name:e.name,allSampleCount:e.allSampleCount,index:t}}},{key:"geneToOption",value:function(e,t){return{value:e.entrezGeneId,type:qo.GENE,hugoGeneSymbol:e.hugoGeneSymbol,cytoband:e.cytoband,index:t}}},{key:"patientToOption",value:function(e,t){return{value:e.uniquePatientKey,type:qo.PATIENT,studyId:e.studyId,patientId:e.patientId,studyName:e.cancerStudy.name,index:t}}},{key:"sampleToOption",value:function(e,t){return{value:e.sampleId,type:qo.SAMPLE,studyId:e.studyId,studyName:this.studies.get(e.studyId),patientId:e.patientId,sampleType:e.sampleType,index:t}}},{key:"handleChange",value:function(e){var t,n;if(e.type===qo.STUDY)t={id:e.studyId},n=ta._.Study,this.trackClick(ta._.Study,this.inputValue);else if(e.type===qo.GENE){var r=this.geneStudyQuery.isComplete&&this.geneStudyQuery.result.query;t={case_set_id:"all",gene_list:e.hugoGeneSymbol,cancer_study_list:r},n="results/cancerTypesSummary",this.trackClick("gene",this.inputValue)}else e.type===qo.PATIENT?(t={studyId:e.studyId,caseId:e.patientId},n=ta._.Patient,this.trackClick(ta._.Patient,this.inputValue)):e.type===qo.SAMPLE?(t={studyId:e.studyId,sampleId:e.value},n=ta._.Patient,this.trackClick("sample",this.inputValue)):e.type===qo.STUDY_COUNT?this.studyPageMultiplier++:e.type===qo.GENE_COUNT?this.genePageMultiplier++:e.type===qo.PATIENT_COUNT?this.patientPageMultiplier++:e.type===qo.SAMPLE_COUNT&&this.samplePageMultiplier++;n&&(0,R.hZ)().routingStore.updateRoute(t,n)}},{key:"trackClick",value:function(e,t){(0,Go.L9)({category:"quickSearch",action:e,label:t})}},{key:"handleInputChange",value:function(e,t){var n=t.action;"set-value"!==n&&(e!=this.inputValue&&(this.studyPageMultiplier=0,this.genePageMultiplier=0,this.patientPageMultiplier=0,this.samplePageMultiplier=0),"input-change"===n&&(this.inputValue=e)),"input-blur"===n&&(this.isFocusing=!1)}},{key:"onFocus",value:function(){this.isFocusing=!0}},{key:"renderInput",value:function(e){return delete e.value,console.log(e),r.createElement("div",{className:"Select-input"},r.createElement("input",na({placeholder:"e.g. Lung, EGFR, TCGA-OR-A5J2"},e)))}},{key:"render",value:function(){return r.createElement("div",{onFocusCapture:this.onFocus},r.createElement(Yo.default,{options:this.options.result||[],autoFocus:!0,onInputChange:this.handleInputChange,onChange:this.handleChange,components:{Group:ya,GroupHeading:ma},formatOptionLabel:ha,controlShouldRenderValue:!1,filterOption:!1,inputValue:this.inputValue,isLoading:this.options.isPending,placeholder:"e.g. Lung, EGFR, TCGA-OR-A5J2",noOptionsMessage:function(){return"No results"},blurInputOnSelect:!1,closeMenuOnSelect:!1,onSelectResetsInput:!1,menuIsOpen:this.menuIsOpen,maxMenuHeight:550,styles:{dropdownIndicator:function(){return{display:"none"}},control:function(e){return Object.assign(Object.assign({},e),{cursor:"text"})},option:function(e,t){return t.isSelected?Object.assign(Object.assign({},e),{backgroundColor:"inherit",color:"inherit",":hover":{backgroundColor:"#DEEBFF"}}):Object.assign({},e)}}}),r.createElement("p",{style:{fontSize:"x-small",textAlign:"center",paddingTop:15}},"We would love to hear what you think: ",r.createElement("a",{href:"mailto:cbioportal@googlegroups.com"},"cbioportal@googlegroups.com")))}},{key:"menuIsOpen",get:function(){return this.isFocusing&&this.inputValue.length>0}},{key:"studies",get:function(){return this.props.studies.reduce((function(e,t){return e.set(t.studyId,t.name),e}),new Map)}}])&&ra(n.prototype,o),a&&ra(n,a),t}(r.Component);ca([N.observable],fa.prototype,"studyPageMultiplier",void 0),ca([N.observable],fa.prototype,"genePageMultiplier",void 0),ca([N.observable],fa.prototype,"patientPageMultiplier",void 0),ca([N.observable],fa.prototype,"samplePageMultiplier",void 0),ca([N.observable],fa.prototype,"inputValue",void 0),ca([N.observable],fa.prototype,"isFocusing",void 0),ca([N.observable],fa.prototype,"isLoading",void 0),ca([N.computed],fa.prototype,"menuIsOpen",null),ca([N.computed],fa.prototype,"studies",null),ca([Mo.default],fa.prototype,"selectRef",null),ca([Mo.default],fa.prototype,"sampleToOption",null),ca([N.action.bound],fa.prototype,"handleChange",null),ca([N.action.bound],fa.prototype,"handleInputChange",null),ca([N.action.bound],fa.prototype,"onFocus",null),ca([Mo.default],fa.prototype,"renderInput",null);const da=fa=ca([l.observer],fa);var ya=function(e){var t=e.data.groupData;t.value,$o()(t.type,t.value),t.value<pa&&t.value;return r.createElement("div",{className:Xo.optionGroup},r.createElement("div",{className:Xo.groupHeader},e.data.instruction),r.createElement(Yo.components.Group,e))},ma=function(e){return null};function ha(e){var t,n,o;return e.type===qo.STUDY?(t=e.name,n="primary",o=e.allSampleCount+" samples","Select a study to open its summary"):e.type===qo.GENE?(t=e.hugoGeneSymbol,n="success",o=e.cytoband||"-","Select a gene to query it across all TCGA PanCancer Atlas studies"):e.type===qo.PATIENT?(t=e.patientId,n="danger",o=e.studyName,"Select a patient to see a summary"):e.type===qo.SAMPLE?(t=e.value,n="warning",o="".concat(e.studyName?e.studyName:e.studyId),"Select a sample to open its summary"):t=e.value+" more "+$o()(e.type,e.value)+" (click to load "+(e.value<pa?e.value:pa)+" more)",r.createElement("div",{className:Xo.optionWrapper},n&&r.createElement("div",{className:Xo.optionLabelWrapper},r.createElement($e.Label,{bsStyle:n},e.type)),r.createElement("div",null,r.createElement("div",null,r.createElement("strong",null,t)),o&&r.createElement("small",null,o)))}function ba(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ga(e){return(ga=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function va(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sa(e,t){return(Sa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pa(e){return(Pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ea=function(e,t,n,r){var o,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Pa(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},wa="download",_a="quickSearch",Oa="defaultHomePageTab",Ca=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==Pa(t)&&"function"!=typeof t?va(e):t}(this,ga(t).call(this,e)),Object.defineProperty(va(n),"store",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(va(n),"activeTabId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),(0,N.makeObservable)(va(n)),e.showQuickSearchTab&&(0,R.hZ)().localStorage.getItem(Oa)===_a&&(n.activeTabId=(0,R.hZ)().localStorage.getItem(Oa)),n.store=e.getQueryStore(),n}var n,o,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sa(e,t)}(t,e),n=t,(o=[{key:"setDefaultTab",value:function(e){this.props.showQuickSearchTab&&((0,R.hZ)().localStorage.defaultHomePageTab=e===_a?_a:void 0)}},{key:"trackQuickSearch",value:function(){(0,Go.L9)({category:"quickSearch",action:"quickSearchLoad"})}},{key:"onSelectTab",value:function(e){this.store.forDownloadTab=e===wa,this.activeTabId=e}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:a().QueryAndDownloadTabs},r.createElement(ke.If,{condition:(0,H.Ib)().skin_citation_rule_text},r.createElement("div",{className:"citationRule",dangerouslySetInnerHTML:{__html:(0,H.Ib)().skin_citation_rule_text}})),r.createElement(Wo.Kh,{activeTabId:this.activeTabId,onTabClick:this.onSelectTab,className:"mainTabs"},r.createElement(Wo.l6,{id:"advanced",linkText:"Query",onTabDidMount:function(){return e.setDefaultTab(void 0)}},r.createElement(Zo,{forkedMode:this.props.forkedMode,onSubmit:this.props.onSubmit,store:this.store,modifyQueryParams:this.props.modifyQueryParams,showAlerts:this.props.showAlerts})),r.createElement(Wo.l6,{id:_a,linkText:r.createElement("span",null,"Quick Search"," ",r.createElement("strong",{className:"beta-text"},"Beta!")),hide:!this.props.showQuickSearchTab,onTabDidMount:function(){e.setDefaultTab(_a),e.trackQuickSearch()}},r.createElement("div",null,this.store.cancerStudies.isComplete&&r.createElement(da,{studies:this.store.cancerStudies.result}))),r.createElement(Wo.l6,{id:wa,linkText:"Download",hide:this.hideDownloadTab,onTabDidMount:function(){return e.setDefaultTab(void 0)}},r.createElement(Zo,{forkedMode:!1,onSubmit:this.props.onSubmit,store:this.store,showAlerts:this.props.showAlerts}))))}},{key:"quickSearchDefaulted",get:function(){return(0,R.hZ)().localStorage.getItem(Oa)===_a}},{key:"hideDownloadTab",get:function(){return!this.props.showDownloadTab||!1===this.context.showDownloadControls}}])&&ba(n.prototype,o),l&&ba(n,l),t}(r.Component);Object.defineProperty(Ca,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{forkedMode:!0}}),Ea([N.observable.ref],Ca.prototype,"store",void 0),Ea([N.observable.ref],Ca.prototype,"activeTabId",void 0),Ea([Mo.default],Ca.prototype,"setDefaultTab",null),Ea([N.action.bound],Ca.prototype,"onSelectTab",null),Ea([N.computed],Ca.prototype,"hideDownloadTab",null);const Ta=Ca=Ea([l.observer],Ca);Ca.contextType=R.Il},39887:(e,t,n)=>{"use strict";n.d(t,{S:()=>i});var r=n(13654),o=n(49199),a=n(41359),l=n(60138);function i(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=window,s=new r.yL(e);return s.singlePageAppSubmitRoutine=function(r){(r.cancer_study_list=r.cancer_study_list||r.cancer_study_id,delete r.cancer_study_id,e)&&((e.cancer_study_id!==r.cancer_study_id||e.cancer_study_list!==r.cancer_study_list||(0,l.Z)(e.case_ids,"")!==(0,l.Z)(r.case_ids,"")||e.case_set_id!==r.case_set_id)&&(r.comparison_createdGroupsSessionId=void 0,r.plots_horz_selection=void 0,r.plots_vert_selection=void 0,r.plots_coloring_selection=void 0));var c=s.physicalStudyIdsInSelection.length>1&&1===s.geneIds.length?o.PC.CANCER_TYPES_SUMMARY:o.PC.ONCOPRINT,u=t||new a.Z(i.routingStore);u.updateURL(r,"results/".concat(c),n,!1),void 0===t&&u.destroy()},s}},68084:e=>{e.exports={portalWidth:"styles-module__portalWidth__3FkcF",framedImage:"styles-module__framedImage__Jd87U",error:"styles-module__error__19z3B",icon:"styles-module__icon__1tBLC"}},4831:e=>{e.exports={portalWidth:"styles-module__portalWidth__3uFIJ",framedImage:"styles-module__framedImage__3chnD",padded:"styles-module__padded__3vpqj",column:"styles-module__column__2pa-R",row:"styles-module__row__3l99O"}},95356:e=>{e.exports={portalWidth:"styles-module__portalWidth__3ybLz",framedImage:"styles-module__framedImage__1LRLJ",optionGroup:"styles-module__optionGroup__2f4nW",groupHeader:"styles-module__groupHeader__1pzK0",optionWrapper:"styles-module__optionWrapper__10YFL",optionLabelWrapper:"styles-module__optionLabelWrapper__Nj0Ws"}},69858:e=>{e.exports={portalWidth:"styles-module__portalWidth__agNQJ",framedImage:"styles-module__framedImage__JjRC-",selectAllStudies:"styles-module__selectAllStudies__2gWhF",SelectedStudyList:"styles-module__SelectedStudyList__27Hpt",StudyList:"styles-module__StudyList__2mxsz",deselectAll:"styles-module__deselectAll__26p-l",Level0:"styles-module__Level0__1RUPZ",Level1:"styles-module__Level1__2R0IW",Level3:"styles-module__Level3__1vXaT",Level4:"styles-module__Level4__3ZJ1g",Level2:"styles-module__Level2__3AEJ-",CancerType:"styles-module__CancerType__Zm_qX",Study:"styles-module__Study__398QL",indentArrow:"styles-module__indentArrow__32udx",SelectAll:"styles-module__SelectAll__3SSsJ",StudyName:"styles-module__StudyName__3IA_4",DeletedStudy:"styles-module__DeletedStudy__2axOg",UnauthorizedStudy:"styles-module__UnauthorizedStudy__3bdRb",StudySamples:"styles-module__StudySamples__3_cjf",StudyMeta:"styles-module__StudyMeta__3UFnp",StudyLinks:"styles-module__StudyLinks__cMCHs",summaryIcon:"styles-module__summaryIcon__WR75I",lockIcon:"styles-module__lockIcon__3Whcs",iconWithTooltip:"styles-module__iconWithTooltip__2yBW3",icon:"styles-module__icon__1ZBlQ",trashIcon:"styles-module__trashIcon__1z-wJ",infoCircleIcon:"styles-module__infoCircleIcon__27xSR",tooltip:"styles-module__tooltip__b54B6",fadein:"styles-module__fadein__2G2-B"}},85062:e=>{e.exports={portalWidth:"styles-module__portalWidth__1fCuf",framedImage:"styles-module__framedImage__1w-Q4",SectionHeader:"styles-module__SectionHeader__3RwOA",error:"styles-module__error__1QyPg"}},31824:(e,t,n)=>{e.exports=n(46179)(7661)}}]);