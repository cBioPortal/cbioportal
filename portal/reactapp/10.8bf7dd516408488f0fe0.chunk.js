(window.webpackJsonp=window.webpackJsonp||[]).push([[10,1,5,6],{1000:function(e,t,n){"use strict";var r=n(852);t.__esModule=!0,t.default=function(e,t){var n=(0,i.default)(e);return n?n.innerHeight:t?e.clientHeight:(0,o.default)(e).height};var o=r(n(853)),i=r(n(1001));e.exports=t.default},1001:function(e,t,n){e.exports=n(35)(247)},1002:function(e,t,n){e.exports=n(35)(767)},1003:function(e,t,n){e.exports=n(35)(486)},1004:function(e,t,n){e.exports=n(35)(115)},1005:function(e,t,n){"use strict";var r=n(852);t.__esModule=!0,t.default=function(e){var t=(0,o.default)(e);return t&&t.defaultView||t.parentWindow};var o=r(n(1006));e.exports=t.default},1006:function(e,t,n){e.exports=n(35)(154)},1007:function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=m(n(853)),i=m(n(892)),a=m(n(4)),l=m(n(1008)),s=m(n(0)),c=m(n(891)),u=m(n(893)),p=m(n(1009)),d=m(n(894)),f=m(n(895)),h=m(n(896));function m(e){return e&&e.__esModule?e:{default:e}}var y=r({},c.default.propTypes,{container:a.default.oneOfType([l.default,a.default.func]),autoWidth:a.default.bool}),b=function(e){function t(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));return a.onWindowScroll=function(){a.onUpdate()},a.onWindowResize=function(){a.props.autoWidth&&(0,i.default)(function(){return a.onUpdate()})},a.onDocumentClick=function(){(0,i.default)(function(){return a.onUpdate()})},a.onUpdate=function(){if(a._isMounted){var e=(0,o.default)(a.positioner),t=e.top,n=e.width,r=(0,p.default)(a.props.container),i=void 0;if(r){var l=(0,d.default)((0,f.default)(a)),s=(0,o.default)(r);i=l-s.top-s.height}else i=null;a.updateState(t,i,n)}},a.updateState=function(e,t,n){e===a.state.offsetTop&&t===a.state.offsetBottom&&n===a.state.width||a.setState({offsetTop:e,offsetBottom:t,width:n})},a.state={offsetTop:null,offsetBottom:null,width:null},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){var e=this;this._isMounted=!0,this._windowScrollListener=(0,u.default)((0,h.default)(this),"scroll",function(){return e.onWindowScroll()}),this._windowResizeListener=(0,u.default)((0,h.default)(this),"resize",function(){return e.onWindowResize()}),this._documentClickListener=(0,u.default)((0,f.default)(this),"click",function(){return e.onDocumentClick()}),this.onUpdate()},t.prototype.componentWillReceiveProps=function(){this._needPositionUpdate=!0},t.prototype.componentDidUpdate=function(){this._needPositionUpdate&&(this._needPositionUpdate=!1,this.onUpdate())},t.prototype.componentWillUnmount=function(){this._isMounted=!1,this._windowScrollListener&&this._windowScrollListener.remove(),this._documentClickListener&&this._documentClickListener.remove(),this._windowResizeListener&&this._windowResizeListener.remove()},t.prototype.render=function(){var e=this,t=this.props,n=t.autoWidth,o=t.viewportOffsetTop,i=t.children,a=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["autoWidth","viewportOffsetTop","children"]),l=this.state,u=l.offsetTop,p=l.offsetBottom,d=l.width;delete a.container;var f=Math.max(u,o||0),h=this.props,m=h.affixStyle,y=h.bottomStyle;return n&&(m=r({width:d},m),y=r({width:d},y)),s.default.createElement("div",null,s.default.createElement("div",{ref:function(t){e.positioner=t}}),s.default.createElement(c.default,r({},a,{offsetTop:f,viewportOffsetTop:o,offsetBottom:p,affixStyle:m,bottomStyle:y}),i))},t}(s.default.Component);b.displayName="AutoAffix",b.propTypes=y,b.defaultProps={viewportOffsetTop:0,autoWidth:!0},t.default=b,e.exports=t.default},1008:function(e,t,n){e.exports=n(35)(246)},1009:function(e,t,n){e.exports=n(35)(248)},1010:function(e,t,n){e.exports=n(35)(197)},1011:function(e,t,n){e.exports=n(35)(430)},1012:function(e,t,n){e.exports=n(35)(763)},1013:function(e,t,n){e.exports=n(35)(326)},1014:function(e,t,n){e.exports=n(35)(421)},1015:function(e,t,n){e.exports={portalWidth:"structureViewer-module__portalWidth__250aJ",framedImage:"structureViewer-module__framedImage__3OjST","main-3d-panel":"structureViewer-module__main-3d-panel__2asbr",header:"structureViewer-module__header__243uA",body:"structureViewer-module__body__3BGGR","collapsed-panel":"structureViewer-module__collapsed-panel__3T7vs","increased-size-panel":"structureViewer-module__increased-size-panel__1nCD-","default-option-select":"structureViewer-module__default-option-select__3EsrF","alpha-helix":"structureViewer-module__alpha-helix__3U1NC","beta-sheet":"structureViewer-module__beta-sheet__2rza2",loop:"structureViewer-module__loop__25tQU",highlighted:"structureViewer-module__highlighted__9IwJz","uniform-mutation":"structureViewer-module__uniform-mutation__2nUW-","missense-mutation":"structureViewer-module__missense-mutation__3m1Or","trunc-mutation":"structureViewer-module__trunc-mutation__1VdGC","inframe-mutation":"structureViewer-module__inframe-mutation__bSE4n"}},1016:function(e,t,n){e.exports={portalWidth:"mutationMapper-module__portalWidth__t9qnu",framedImage:"mutationMapper-module__framedImage__2WV_N",filterResetPanel:"mutationMapper-module__filterResetPanel__2aFDu"}},1017:function(e,t,n){e.exports={portalWidth:"badgeSelector-module__portalWidth__K0PY9",framedImage:"badgeSelector-module__framedImage__2U7ev","driver-annotation-setting":"badgeSelector-module__driver-annotation-setting__2XBQz","legend-panel":"badgeSelector-module__legend-panel__9F7Oe"}},1018:function(e,t,n){e.exports=n(35)(705)},1020:function(e,t,n){e.exports=n(35)(200)},1021:function(e,t,n){e.exports=n(35)(419)},1023:function(e,t,n){e.exports=n(35)(202)},1024:function(e,t,n){e.exports=n(35)(717)},1025:function(e,t,n){e.exports=n(35)(243)},1026:function(e,t,n){e.exports=n(35)(745)},1027:function(e,t,n){e.exports=n(35)(746)},1028:function(e,t,n){e.exports=n(35)(450)},1029:function(e,t,n){e.exports=n(35)(704)},1030:function(e,t,n){e.exports=n(35)(447)},1032:function(e,t,n){e.exports=n(35)(165)},1033:function(e,t,n){e.exports=n(35)(367)},1034:function(e,t,n){e.exports=n(35)(750)},1035:function(e,t,n){e.exports=n(35)(151)},1036:function(e,t,n){e.exports=n(35)(455)},1037:function(e,t,n){e.exports=n(35)(204)},1039:function(e,t,n){"use strict";function r(e){return{genomeNexusUrl:e.genomenexus_url||void 0,isoformOverrideSource:e.isoformOverrideSource,myGeneInfoUrlTemplate:e.mygene_info_url||void 0,uniprotIdUrlTemplate:e.uniprot_id_url||void 0,transcriptSummaryUrlTemplate:e.ensembl_transcript_url||void 0,enableOncoKb:e.show_oncokb,enableGenomeNexus:e.show_genomenexus,enableHotspot:e.show_hotspot,enableMyCancerGenome:e.mycancergenome_show,enableCivic:e.show_civic}}n.d(t,"a",function(){return r})},1040:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(2),o=n(15);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l=function(e,t,n,r){var o,i=arguments.length,l=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(l=(i<3?o(l):i>3?o(t,n,l):o(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,"trackVisibility",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"columnVisibility",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object(r.makeObservable)(this),this.trackVisibility=Object(o.ib)()}var t,n,a;return t=e,(n=[{key:"storeColumnVisibility",value:function(e){JSON.stringify(this.columnVisibility)!==JSON.stringify(e)&&(this.columnVisibility=e)}}])&&i(t.prototype,n),a&&i(t,a),e}();l([r.observable],s.prototype,"trackVisibility",void 0),l([r.observable],s.prototype,"columnVisibility",void 0),l([r.action.bound],s.prototype,"storeColumnVisibility",null)},1041:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var r=n(1),o=n(0),i=n(26),a=n.n(i),l=n(1042),s=n.n(l),c=n(12),u=n(870),p=n(856);function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var b=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":y(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},g=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=f(t).call(this,e))||"object"!==y(o)&&"function"!=typeof o?h(r):o,Object.defineProperty(h(n),"igvDiv",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(h(n),"igvBrowser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(h(n),"modifiedTrackNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(h(n),"lastRenderedTracks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n}var n,i,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,o["Component"]),n=t,(i=[{key:"render",value:function(){return o.createElement("div",null,o.createElement("div",{ref:this.igvDivRefHandler,className:"igvContainer"}))}},{key:"componentDidMount",value:function(){var e=this;this.props.onRenderingStart&&this.props.onRenderingStart();var t={genome:this.props.genome,locus:this.props.locus,onLocusChange:this.props.onLocusChange};s.a.createBrowser(this.igvDiv,t).then(function(t){e.igvBrowser=t,e.igvDiv&&e.updateSearch(e.igvDiv,e.props.disableSearch),e.loadTrackList(t,r.cloneDeep(e.props.tracks)),e.lastRenderedTracks=e.props.tracks,e.props.onRenderingComplete&&e.props.onRenderingComplete()})}},{key:"shouldComponentUpdate",value:function(e){var t=!1;if(!1!==e.isVisible){var n=Object(p.f)(this.lastRenderedTracks||[],e.tracks||[]),r=this.props.genome!==e.genome,o=this.props.locus!==e.locus,i=this.props.disableSearch!==e.disableSearch;(t=r||n.length>0||o||i)&&(this.modifiedTrackNames=n)}return t}},{key:"componentDidUpdate",value:function(){this.igvBrowser&&this.props.locus&&this.igvBrowser.search(this.props.locus),this.igvBrowser&&this.modifiedTrackNames&&this.modifiedTrackNames.length>0&&(this.updateTracks(this.igvBrowser,this.modifiedTrackNames,this.tracksByName),this.modifiedTrackNames=void 0,this.lastRenderedTracks=this.props.tracks),this.igvDiv&&this.updateSearch(this.igvDiv,this.props.disableSearch)}},{key:"loadTrackList",value:function(e,t){var n=this;e.loadTrackList(t).then(function(){n.props.onRenderingComplete&&n.props.onRenderingComplete()}).catch(function(){n.props.onRenderingComplete&&n.props.onRenderingComplete()})}},{key:"updateTracks",value:function(e,t,n){var o=this;t.forEach(function(t){return e.removeTrackByName(t)});var i=t.map(function(e){return r.cloneDeep(n[e])}).filter(function(e){return void 0!==e});i.length>0&&(this.props.onRenderingStart&&this.props.onRenderingStart(),Object(u.a)(function(){o.loadTrackList(e,i)}))}},{key:"updateSearch",value:function(e,t){var n=a()(e).find(".igv-chromosome-select-widget-container select"),r=a()(e).find(".igv-search-container input");t?(r.attr("disabled","true"),n.attr("disabled","true")):(r.attr("disabled",null),n.attr("disabled",null))}},{key:"igvDivRefHandler",value:function(e){this.igvDiv=e}},{key:"tracksByName",get:function(){return Object(p.g)(this.props.tracks)}}])&&d(n.prototype,i),l&&d(n,l),t}();Object.defineProperty(g,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{genome:"hg19",locus:"all",disableSearch:!1}}),b([c.default],g.prototype,"igvDivRefHandler",null)},1042:function(e,t,n){e.exports=n(35)(898)},1043:function(e,t,n){"use strict";var r=n(0),o=n(2),i=n(9),a=n(17),l=n(5),s=n.n(l),c=n(3),u=n(856),p=n(222),d=n(74),f=n.n(d),h=n(12);function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var _=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":v(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},w=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(i=y(t).call(this,e))||"object"!==v(i)&&"function"!=typeof i?b(r):i,Object.defineProperty(b(n),"downloading",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object(o.makeObservable)(b(n)),n}var n,i,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,r["Component"]),n=t,(i=[{key:"render",value:function(){return r.createElement(c.i,{overlay:r.createElement("span",null,"Download a copy number segment file for the selected samples"),placement:this.props.tooltipPlacement},r.createElement(a.Button,{className:this.props.buttonClassName,onClick:this.handleDownload,disabled:this.downloading},r.createElement("i",{className:s()({fa:!0,"fa-cloud-download":!this.downloading,"fa-spinner fa-pulse":this.downloading})})))}},{key:"handleDownload",value:function(){var e=this;this.downloading=!0,Object(p.a)(this.props.promise,function(t){f()(Object(u.e)(t),e.props.filename),e.downloading=!1})}}])&&m(n.prototype,i),l&&m(n,l),t}();Object.defineProperty(w,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{filename:"segments.seg",buttonClassName:"btn btn-sm pull-right",tooltipPlacement:"left"}}),_([o.observable],w.prototype,"downloading",void 0),_([h.default],w.prototype,"handleDownload",null),w=_([i.observer],w),t.a=w},1044:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__voGSg",framedImage:"styles-module__framedImage__1XH6x",container:"styles-module__container__16NQq","items-container":"styles-module__items-container__2byHQ","fa-check":"styles-module__fa-check__l2mEf","fa-exclamation-triangle":"styles-module__fa-exclamation-triangle__1RHoj","not-invoked-item":"styles-module__not-invoked-item__2JY4J","item-row":"styles-module__item-row__2FhJM","pulse-spinner":"styles-module__pulse-spinner__16rgL"}},1045:function(e,t,n){},1046:function(e,t,n){e.exports=n.p+"reactapp/images/ac30afc0653ff15c1ea9fd9cbae0414a.png"},1047:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjQsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDIwIDIwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxsaW5lIGZpbGw9Im5vbmUiIHgxPSI2Ljc5MiIgeTE9IjUuNjY3IiB4Mj0iNi43OTIiIHkyPSIxMi4xMjUiLz4NCjxwb2x5Z29uIGZpbGw9IiMzMzMzMzMiIHBvaW50cz0iMCw1IDAsMCA1LDAgIi8+DQo8cG9seWdvbiBmaWxsPSIjMzMzMzMzIiBwb2ludHM9IjE0Ljk5OSwwIDIwLDAgMjAsNSAiLz4NCjxwb2x5Z29uIGZpbGw9IiMzMzMzMzMiIHBvaW50cz0iMjAsMTUgMjAsMjAgMTUsMjAgIi8+DQo8cG9seWdvbiBmaWxsPSIjMzMzMzMzIiBwb2ludHM9IjUsMjAgMCwyMCAwLDE1ICIvPg0KPHJlY3QgeD0iMy43NSIgeT0iNC43MDgiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzMzMzMyIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHdpZHRoPSIxMi41IiBoZWlnaHQ9IjEwLjU4MyIvPg0KPC9zdmc+DQo="},1048:function(e,t,n){},1049:function(e,t,n){"use strict";(function(e){var r=n(1),o=n(0),i=n(29),a=n.n(i),l=n(817),s=n(801),c=n.n(s),u=n(5),p=n.n(u),d=n(1171),f=n(9),h=n(2),m=n(910),y=n(61),b=n.n(y),g=n(23),v=n(819),_=n(17),w=n(1062),O=n.n(w),S=n(7),E=n(360),k=n(1070),C=n(914),P=n(220);function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var D=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":M(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},N=function(t){function n(e){var t,i,a,l=this;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),i=this,a=j(n).call(this,e),t=!a||"object"!==M(a)&&"function"!=typeof a?A(i):a,Object.defineProperty(A(t),"handlers",{enumerable:!0,configurable:!0,writable:!0,value:{onSummaryClick:function(){t.store.openSummary()},onCheckAllFiltered:function(){t.logic.mainView.toggleAllFiltered()},onClearFilter:function(){t.store.setSearchText("")}}}),Object.defineProperty(A(t),"store",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(A(t),"CancerTypeList",{enumerable:!0,configurable:!0,writable:!0,value:Object(f.observer)(function(){var e=t.logic.cancerTypeListView.getChildCancerTypes(t.store.treeData.rootCancerType);return o.createElement("ul",{className:c.a.cancerTypeList},e.map(function(e,t){return o.createElement(l.CancerTypeListItem,{key:t,cancerType:e})}))})}),Object.defineProperty(A(t),"CancerTypeListItem",{enumerable:!0,configurable:!0,writable:!0,value:Object(f.observer)(function(e){var n,i=e.cancerType,a=Object(m.expr)(function(){return t.logic.cancerTypeListView.getDescendantCancerStudies(i).length}),l=r.includes(t.store.selectedCancerTypeIds,i.cancerTypeId),s=t.logic.isHighlighted(i),u=p()((T(n={},c.a.selectable,!0),T(n,c.a.selected,l),T(n,c.a.matchingNodeText,!!t.store.searchText&&s),T(n,c.a.nonMatchingNodeText,!!t.store.searchText&&!s),T(n,c.a.containsSelectedStudies,Object(m.expr)(function(){return t.logic.cancerTypeContainsSelectedStudies(i)})),n));return o.createElement("li",{className:u,onMouseDown:t.getCancerTypeListClickHandler(i)},o.createElement("span",{className:c.a.cancerTypeListItemLabel},i.name),o.createElement("span",{className:c.a.cancerTypeListItemCount},a))})}),Object.defineProperty(A(t),"autosuggest",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(A(t),"windowSizeDisposer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object(h.makeObservable)(A(t)),t.store=t.props.queryStore,t}var i,s,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(n,o["Component"]),i=n,(s=[{key:"getCancerTypeListClickHandler",value:function(e){var t=this;return function(n){return t.store.selectCancerType(e,n.ctrlKey)}}},{key:"selectTCGAPanAtlas",value:function(){this.logic.mainView.selectAllMatchingStudies(E.a)}},{key:"selectMatchingStudies",value:function(e){e&&(1===e.length&&/^\*.*\*$/.test(e[0])?this.logic.mainView.selectAllMatchingStudies(e[0].replace(/\*/g,"")):this.logic.mainView.selectAllMatchingStudies(e))}},{key:"componentDidMount",value:function(){var e,t=this;this.windowSizeDisposer=Object(h.reaction)(function(){return P.a.size},function(){t.props.forkedMode&&(clearTimeout(e),e=setTimeout(function(){return t.setListHeight()},200))},{fireImmediately:!0})}},{key:"componentWillUnmount",value:function(){this.windowSizeDisposer()}},{key:"setListHeight",value:function(){var t=e(a.a.findDOMNode(this)),n=P.a.size.height-t.offset().top;n=n<200?200:n,t.css("height",n-75)}},{key:"render",value:function(){var e=this,t=this.logic.mainView.getSelectionReport(),n=t.shownStudies,i=t.shownAndSelectedStudies,a=this.logic.mainView.quickSelectButtons(S.b.serverConfig.skin_quick_select_buttons);return o.createElement(l.a,{overflow:!0,"data-test":"studyList",className:c.a.CancerStudySelector},o.createElement(l.b,{overflow:!0,className:c.a.CancerStudySelectorHeader},o.createElement(v.a,{promises:[this.store.cancerTypes,this.store.cancerStudies]},"Select Studies for Visualization & Analysis:"),this.store.selectableStudiesSet.isComplete&&o.createElement("div",null,o.createElement(C.a,{store:this.store})),o.createElement(f.Observer,null,function(){var t=S.a.skin_example_study_queries(S.b.serverConfig.skin_example_study_queries||"");e.store.searchText&&t.indexOf(e.store.searchText)<0&&(t=[e.store.searchText].concat(t));var n=null,r=t.map(function(e,t){return{value:e,sortKey:t}});return o.createElement("div",{style:{display:"flex",alignItems:"center"}},e.store.searchText&&o.createElement("span",{"data-test":"clearStudyFilter",onClick:function(t){e.autosuggest.setState({inputValue:""}),e.handlers.onClearFilter()},style:{fontSize:18,cursor:"pointer",color:"#999999",position:"relative",left:164,zIndex:10}},"x"),o.createElement(O.a,{datalist:r,ref:function(t){return e.autosuggest=t},placeholder:"Search...",bsSize:"small",onChange:function(t){null!==n&&(window.clearTimeout(n),n=null),n=window.setTimeout(function(){e.store.setSearchText(t)},400)},onFocus:function(t){0===t.length&&setTimeout(function(){e.autosuggest.setState({open:!0})},400)}}))})),o.createElement(g.If,{condition:this.studiesDataComplete},o.createElement(l.b,{className:c.a.cancerStudySelectorBody},o.createElement(g.If,{condition:this.store.maxTreeDepth>0},o.createElement(g.Then,null,o.createElement("div",{className:c.a.cancerTypeListContainer},o.createElement(this.CancerTypeList,null)))),o.createElement("div",{className:c.a.cancerStudyListContainer,"data-test":"cancerTypeListContainer"},o.createElement("div",{className:"checkbox",style:{marginLeft:19}},o.createElement(g.If,{condition:n.length>0},o.createElement(g.If,{condition:!this.logic.mainView.isFiltered&&!r.isEmpty(a)},o.createElement(g.Then,null,o.createElement("div",{className:c.a.quickSelect},o.createElement(k.a,{onSelect:this.selectMatchingStudies,buttonsConfig:a}))),o.createElement(g.Else,null,o.createElement("label",null,o.createElement("input",{type:"checkbox","data-test":"selectAllStudies",style:{top:-2},onClick:this.handlers.onCheckAllFiltered,checked:i.length===n.length}),o.createElement("strong",null,i.length===n.length?"Deselect all listed studies ".concat(n.length<this.store.cancerStudies.result.length?"matching filter":""," (").concat(n.length,")"):"Select all listed studies ".concat(n.length<this.store.cancerStudies.result.length?"matching filter":"","  (").concat(n.length,")")))))),o.createElement(g.If,{condition:this.store.cancerStudies.isComplete&&this.store.cancerTypes.isComplete&&0===n.length},o.createElement("p",null,"There are no studies matching your filter."))),o.createElement(d.a,null)))),o.createElement(_.Modal,{className:p()(c.a.SelectedStudiesWindow,"cbioportal-frontend"),show:this.store.showSelectedStudiesOnly,onHide:function(){return e.store.showSelectedStudiesOnly=!1}},o.createElement(_.Modal.Header,{closeButton:!0},o.createElement(_.Modal.Title,null,"Selected Studies")),o.createElement(_.Modal.Body,null,o.createElement(d.a,{showSelectedStudiesOnly:!0}))))}},{key:"studiesDataComplete",get:function(){return this.store.cancerTypes.isComplete&&this.store.cancerStudies.isComplete&&this.store.userVirtualStudies.isComplete}},{key:"logic",get:function(){return this.store.studyListLogic}}])&&x(i.prototype,s),u&&x(i,u),n}();D([h.computed],N.prototype,"studiesDataComplete",null),D([b.a],N.prototype,"getCancerTypeListClickHandler",null),D([h.action.bound],N.prototype,"selectTCGAPanAtlas",null),D([h.action.bound],N.prototype,"selectMatchingStudies",null),N=D([f.observer],N),t.a=N}).call(this,n(26))},1050:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__3uFIJ",framedImage:"styles-module__framedImage__3chnD",padded:"styles-module__padded__3vpqj",column:"styles-module__column__2pa-R",row:"styles-module__row__3l99O"}},1051:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__agNQJ",framedImage:"styles-module__framedImage__JjRC-",selectAllStudies:"styles-module__selectAllStudies__2gWhF",SelectedStudyList:"styles-module__SelectedStudyList__27Hpt",StudyList:"styles-module__StudyList__2mxsz",deselectAll:"styles-module__deselectAll__26p-l",Level0:"styles-module__Level0__1RUPZ",Level1:"styles-module__Level1__2R0IW",Level3:"styles-module__Level3__1vXaT",Level4:"styles-module__Level4__3ZJ1g",Level2:"styles-module__Level2__3AEJ-",CancerType:"styles-module__CancerType__Zm_qX",Study:"styles-module__Study__398QL",indentArrow:"styles-module__indentArrow__32udx",SelectAll:"styles-module__SelectAll__3SSsJ",StudyName:"styles-module__StudyName__3IA_4",DeletedStudy:"styles-module__DeletedStudy__2axOg",StudySamples:"styles-module__StudySamples__3_cjf",StudyMeta:"styles-module__StudyMeta__3UFnp",StudyLinks:"styles-module__StudyLinks__cMCHs",summaryIcon:"styles-module__summaryIcon__WR75I",iconWithTooltip:"styles-module__iconWithTooltip__2yBW3",icon:"styles-module__icon__1ZBlQ",trashIcon:"styles-module__trashIcon__1z-wJ",infoCircleIcon:"styles-module__infoCircleIcon__27xSR",tooltip:"styles-module__tooltip__b54B6",fadein:"styles-module__fadein__2G2-B"}},1052:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(1053);var r=n(1054);t.JsonToTable=r.default},1053:function(e,t,n){},1054:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1055);t.default=r.default},1055:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(1056);n(1058);var a=n(909),l=n(909),s=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.renderObject=function(e,t,n){var o,s=[];switch(t&&s.push(r.renderRowHeader(t)),l.default.getObjectType(e)){case a.JSONObjectType.ObjectWithNonNumericKeys:o=t?i.createElement("table",{key:"__j2t_tableObj"+n},i.createElement("tbody",{key:"__j2t_bObj"+n},r.renderRows(e))):r.renderRows(e);break;case a.JSONObjectType.Array:o=t?i.createElement("table",{key:"__j2t_tableArr"+n},i.createElement("tbody",{key:"__j2t_bArr"+n},r.parseArray(e))):r.parseArray(e)}s.push(o);var c=s.map(function(e){return e});return t?i.createElement("tr",{key:"__j2t_trObj"+n},r.renderCell({content:c,colspan:2})):c},r.renderCell=function(e){var t=e.content,n=e.colspan,r=e.isHeader?i.createElement("strong",null,t):t;return i.createElement("td",{colSpan:n||0,key:"__j2t_trObj"+r},r)},r.renderHeader=function(e){return i.createElement("tr",{key:"__j2t_trHeader"},e.map(function(e){return r.renderCell({content:e})}))},r.renderValues=function(e){return i.createElement("tr",{key:"__j2t_trArrString"},e.map(function(e){return r.renderCell({content:e})}))},r.renderRowValues=function(e,t){return e.map(function(e,n){return i.createElement("tr",{key:"__j2t_Arr"+n.toString()},t.map(function(t){return l.default.getObjectType(t)===a.JSONObjectType.Primitive?r.renderCell({content:e[t]}):r.renderObject(e[t],t,n)}))})},r.parseArray=function(e){var t=[],n=l.default.getUniqueObjectKeys(e);return"number"!==l.default.checkLabelTypes(n.labels)?(t.push(r.renderHeader(n.labels)),t.push(r.renderRowValues(e,n.labels))):t.push(r.renderValues(e)),t},r.renderRow=function(e,t,n){return i.createElement("tr",{key:"__j2t_tr"+n},i.createElement("td",{key:"__j2t_tdk"+n},i.createElement("strong",null,e)),i.createElement("td",{key:"__j2t_tdv"+n},t))},r.renderRowHeader=function(e){return i.createElement("div",{key:"__j2t_rw"+e},i.createElement("strong",null,e))},r.renderRows=function(e,t){return Object.keys(e).map(function(t,n){var o=e[t];return l.default.getObjectType(o)===a.JSONObjectType.Primitive?r.renderRow(t,o,n):r.renderObject(o,t,n)})},r}return o(t,e),t.prototype.render=function(){return i.createElement("div",{className:"json-to-table"},i.createElement("table",{key:"__j2t_root_table"},i.createElement("tbody",{key:"__j2t_root_tbody"},this.renderObject(this.props.json,void 0,0))))},t}(i.Component);t.default=s},1056:function(e,t,n){"use strict";e.exports=n(1057)},1057:function(e,t,n){"use strict";
/** @license React v16.8.4
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(225),o="function"==typeof Symbol&&Symbol.for,i=o?Symbol.for("react.element"):60103,a=o?Symbol.for("react.portal"):60106,l=o?Symbol.for("react.fragment"):60107,s=o?Symbol.for("react.strict_mode"):60108,c=o?Symbol.for("react.profiler"):60114,u=o?Symbol.for("react.provider"):60109,p=o?Symbol.for("react.context"):60110,d=o?Symbol.for("react.concurrent_mode"):60111,f=o?Symbol.for("react.forward_ref"):60112,h=o?Symbol.for("react.suspense"):60113,m=o?Symbol.for("react.memo"):60115,y=o?Symbol.for("react.lazy"):60116,b="function"==typeof Symbol&&Symbol.iterator;function g(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(e,t,n,r,o,i,a,l){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=[n,r,o,i,a,l],c=0;(e=Error(t.replace(/%s/g,function(){return s[c++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_={};function w(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||v}function O(){}function S(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||v}w.prototype.isReactComponent={},w.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&g("85"),this.updater.enqueueSetState(this,e,t,"setState")},w.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},O.prototype=w.prototype;var E=S.prototype=new O;E.constructor=S,r(E,w.prototype),E.isPureReactComponent=!0;var k={current:null},C={current:null},P=Object.prototype.hasOwnProperty,T={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,n){var r=void 0,o={},a=null,l=null;if(null!=t)for(r in void 0!==t.ref&&(l=t.ref),void 0!==t.key&&(a=""+t.key),t)P.call(t,r)&&!T.hasOwnProperty(r)&&(o[r]=t[r]);var s=arguments.length-2;if(1===s)o.children=n;else if(1<s){for(var c=Array(s),u=0;u<s;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===o[r]&&(o[r]=s[r]);return{$$typeof:i,type:e,key:a,ref:l,props:o,_owner:C.current}}function j(e){return"object"==typeof e&&null!==e&&e.$$typeof===i}var A=/\/+/g,I=[];function M(e,t,n,r){if(I.length){var o=I.pop();return o.result=e,o.keyPrefix=t,o.func=n,o.context=r,o.count=0,o}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function D(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>I.length&&I.push(e)}function N(e,t,n){return null==e?0:function e(t,n,r,o){var l=typeof t;"undefined"!==l&&"boolean"!==l||(t=null);var s=!1;if(null===t)s=!0;else switch(l){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case i:case a:s=!0}}if(s)return r(o,t,""===n?"."+R(t,0):n),1;if(s=0,n=""===n?".":n+":",Array.isArray(t))for(var c=0;c<t.length;c++){var u=n+R(l=t[c],c);s+=e(l,u,r,o)}else if(u=null===t||"object"!=typeof t?null:"function"==typeof(u=b&&t[b]||t["@@iterator"])?u:null,"function"==typeof u)for(t=u.call(t),c=0;!(l=t.next()).done;)s+=e(l=l.value,u=n+R(l,c++),r,o);else"object"===l&&g("31","[object Object]"==(r=""+t)?"object with keys {"+Object.keys(t).join(", ")+"}":r,"");return s}(e,"",t,n)}function R(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}(e.key):t.toString(36)}function L(e,t){e.func.call(e.context,t,e.count++)}function G(e,t,n){var r=e.result,o=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?V(e,r,n,function(e){return e}):null!=e&&(j(e)&&(e=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,o+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(A,"$&/")+"/")+n)),r.push(e))}function V(e,t,n,r,o){var i="";null!=n&&(i=(""+n).replace(A,"$&/")+"/"),N(e,G,t=M(t,i,r,o)),D(t)}function B(){var e=k.current;return null===e&&g("307"),e}var F={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return V(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;N(e,L,t=M(null,null,t,n)),D(t)},count:function(e){return N(e,function(){return null},null)},toArray:function(e){var t=[];return V(e,t,null,function(e){return e}),t},only:function(e){return j(e)||g("143"),e}},createRef:function(){return{current:null}},Component:w,PureComponent:S,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:p,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:f,render:e}},lazy:function(e){return{$$typeof:y,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:m,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return B().useCallback(e,t)},useContext:function(e,t){return B().useContext(e,t)},useEffect:function(e,t){return B().useEffect(e,t)},useImperativeHandle:function(e,t,n){return B().useImperativeHandle(e,t,n)},useDebugValue:function(){},useLayoutEffect:function(e,t){return B().useLayoutEffect(e,t)},useMemo:function(e,t){return B().useMemo(e,t)},useReducer:function(e,t,n){return B().useReducer(e,t,n)},useRef:function(e){return B().useRef(e)},useState:function(e){return B().useState(e)},Fragment:l,StrictMode:s,Suspense:h,createElement:x,cloneElement:function(e,t,n){null==e&&g("267",e);var o=void 0,a=r({},e.props),l=e.key,s=e.ref,c=e._owner;if(null!=t){void 0!==t.ref&&(s=t.ref,c=C.current),void 0!==t.key&&(l=""+t.key);var u=void 0;for(o in e.type&&e.type.defaultProps&&(u=e.type.defaultProps),t)P.call(t,o)&&!T.hasOwnProperty(o)&&(a[o]=void 0===t[o]&&void 0!==u?u[o]:t[o])}if(1===(o=arguments.length-2))a.children=n;else if(1<o){u=Array(o);for(var p=0;p<o;p++)u[p]=arguments[p+2];a.children=u}return{$$typeof:i,type:e.type,key:l,ref:s,props:a,_owner:c}},createFactory:function(e){var t=x.bind(null,e);return t.type=e,t},isValidElement:j,version:"16.8.4",unstable_ConcurrentMode:d,unstable_Profiler:c,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:k,ReactCurrentOwner:C,assign:r}},H={default:F},U=H&&F||H;e.exports=U.default||U},1058:function(e,t,n){},1059:function(e,t,n){},1060:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__1fCuf",framedImage:"styles-module__framedImage__1w-Q4",SectionHeader:"styles-module__SectionHeader__3RwOA",error:"styles-module__error__1QyPg"}},1061:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__3FkcF",framedImage:"styles-module__framedImage__Jd87U",error:"styles-module__error__19z3B",icon:"styles-module__icon__1tBLC"}},1062:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectListAdapter=t.MapListAdapter=t.ArrayListAdapter=t.EmptyListAdapter=t.ListAdapter=t.ItemAdapter=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=w(n(5)),a=w(n(857)),l=w(n(911)),s=w(n(4)),c=w(n(0)),u=n(17),p=w(n(29)),d=w(n(1063)),f=w(n(1064)),h=w(n(1065)),m=w(n(912)),y=w(n(838)),b=w(n(1066)),g=w(n(1067)),v=w(n(1068)),_=w(n(1069));function w(e){return e&&e.__esModule?e:{default:e}}function O(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}t.ItemAdapter=m.default,t.ListAdapter=y.default,t.EmptyListAdapter=b.default,t.ArrayListAdapter=g.default,t.MapListAdapter=v.default,t.ObjectListAdapter=_.default;var S=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n=t.__proto__||Object.getPrototypeOf(t)).call.apply(n,[this,e].concat(O(o))));a._itemAdapter=e.itemAdapter||new m.default,a._itemAdapter.receiveProps(e),a._listAdapter=e.datalistAdapter||a._getListAdapter(e.datalist),a._listAdapter.receiveProps(e,a._itemAdapter);var l=a._getValueFromProps(e),s=l.inputValue,c=l.inputItem,u=l.inputItemEphemeral,p=l.selectedItems;a._setValueMeta(c,u,!0,!0),a._lastValidItem=c,a._lastValidValue=s,a._keyPressCount=0,a.state={open:!1,disableFilter:!1,inputValue:s,inputValueKeyPress:0,inputFocused:!1,selectedItems:p,searchValue:null},a._lastOnChangeValue=a._getCurrentValue(),a._lastOnSelectValue=c;var d=a;return d._renderSelected=a._renderSelected.bind(a),d._getItemKey=a._getItemKey.bind(a),d._isSelectedItem=a._isSelectedItem.bind(a),d._renderSuggested=a._renderSuggested.bind(a),d._handleToggleClick=a._handleToggleClick.bind(a),d._handleInputChange=a._handleInputChange.bind(a),d._handleItemSelect=a._handleItemSelect.bind(a),d._removeItem=a._removeItem.bind(a),d._handleShowAll=a._handleShowAll.bind(a),d._handleKeyDown=a._handleKeyDown.bind(a),d._handleKeyPress=a._handleKeyPress.bind(a),d._handleMenuClose=a._handleMenuClose.bind(a),d._handleInputFocus=a._handleInputFocus.bind(a),d._handleInputBlur=a._handleInputBlur.bind(a),d._handleFocus=a._handleFocus.bind(a),d._handleBlur=a._handleBlur.bind(a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c["default"].Component),o(t,null,[{key:"defaultInputSelect",value:function(e,t,n){switch(e.type){case"text":case"search":case"url":case"tel":case"password":if(e.setSelectionRange)e.setSelectionRange(t.length,n.length);else if(e.createTextRange){var r=e.createTextRange();r.moveEnd("character",n.length),r.moveStart("character",t.length),r.select()}}}}]),o(t,[{key:"_getListAdapter",value:function(e){if(null==e)return new b.default;if(Array.isArray(e))return new g.default;if(e instanceof Map)return new v.default;if("object"==typeof e)return new _.default;throw Error("Unexpected datalist type: datalistAdapter required")}},{key:"_getValueFromProps",value:function(e){var t="",n=null,r=!1,o=[],i=e.value||e.defaultValue;if(null!=i)if(e.multiple)Array.isArray(i)?o=this._filterItems(i,e):(0,d.default)(!i,"Array expected for value property");else if(e.valueIsItem){var a=this._itemAdapter.getInputValue(i);null!=e.datalist?null!=(n=this._listAdapter.findMatching(e.datalist,a))?t=n===i?a:this._itemAdapter.getInputValue(n):e.datalistOnly&&!e.datalistPartial?this._warnInvalidValue(i):(t=a,n=i):(t=a,n=i)}else i&&(null!=e.datalist?null!=(n=this._listAdapter.findMatching(e.datalist,i))?t=this._itemAdapter.getInputValue(n):e.datalistOnly&&!e.datalistPartial?this._warnInvalidValue(i):(t=i.toString(),n=this._itemAdapter.newFromValue(i),r=!0):(t=i.toString(),n=this._itemAdapter.newFromValue(i),r=!0));return{inputValue:t,inputItem:n,inputItemEphemeral:r,selectedItems:o}}},{key:"_filterItems",value:function(e,t){if(null!=t.datalist||!t.allowDuplicates){var n=[],r={},o=!1,i=!0,a=!1,l=void 0;try{for(var s,c=e[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=s.value,p=this._itemAdapter.getInputValue(u);if(t.allowDuplicates||!r[p]){var d=this._listAdapter.findMatching(t.datalist,p);null!=d?(n.push(d),r[p]=!0,o=!0):t.datalistOnly&&!t.datalistPartial?(this._warnInvalidValue(p),o=!0):(n.push(u),r[p]=!0)}else o=!0}}catch(e){a=!0,l=e}finally{try{!i&&c.return&&c.return()}finally{if(a)throw l}}if(o)return n}return e}},{key:"_warnInvalidValue",value:function(e){(0,d.default)(!1,'Value "%s" does not match any datalist value',e)}},{key:"_setInputValue",value:function(e,t){this.setState({inputValue:e,inputValueKeyPress:this._keyPressCount},t)}},{key:"_setValueMeta",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null!=e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;this._inputItem=e,this._inputItemEphemeral=t,this._valueIsValid=n,this._valueWasValidated=r}},{key:"_clearInput",value:function(){this._setValueMeta(null,!1,!0,!0),this._setInputValue("")}},{key:"_getValueUsing",value:function(e,t,n,r){return e.multiple?r:e.valueIsItem?n:t}},{key:"_getCurrentValue",value:function(){return this._getValueUsing(this.props,this.state.inputValue,this._inputItem,this.state.selectedItems)}},{key:"componentDidMount",value:function(){this._autoCompleteAfterRender=!this.refs.input.setSelectionRange}},{key:"componentWillReceiveProps",value:function(e){if(e.itemAdapter!=this.props.itemAdapter&&(this._itemAdapter=e.itemAdapter||new m.default),this._itemAdapter.receiveProps(e),e.datalist!=this.props.datalist||e.datalistAdapter!=this.props.datalistAdapter)if(e.datalistAdapter)this._listAdapter=e.datalistAdapter;else{var t=this._getListAdapter(e.datalist);t.constructor!=this._listAdapter.constructor&&(this._listAdapter=t)}this._listAdapter.receiveProps(e,this._itemAdapter);var n=e.value,r=this.state.inputValue,o=n!==this.props.value&&n!==this._getValueUsing(e,r,this._inputItem,this.state.selectedItems),i=void 0,a=void 0,l=void 0,s=void 0;if(!o){if(e.datalistOnly){var c=!e.datalistPartial&&null!=e.datalist,u=!this.props.datalistOnly||!e.datalistPartial&&this.props.datalistPartial||e.datalist!=this.props.datalist;r?(null==(i=this._listAdapter.findMatching(e.datalist,r))&&(c||this._inputItemEphemeral?this._inputItemEphemeral&&n===r&&(l=!0):i=this._inputItem),(a=null==i&&u)&&this._focused&&(this._setValueMeta(null,!1,!1,!0),u&&c&&null!=this._lastValidItem&&(this._lastValidItem=this._listAdapter.findMatching(e.datalist,this._lastValidValue),null==this._lastValidItem&&(this._lastValidValue="")),a=!1)):(i=null,a=!1),s=e.multiple&&c&&u}e.multiple&&!e.allowDuplicates&&this.props.allowDuplicates&&(s=!0)}if(o||a){var p=void 0,d=void 0;if(l)r="",p=!1,d=[];else{var f=this._getValueFromProps(e);r=f.inputValue,i=f.inputItem,p=f.inputItemEphemeral,d=f.selectedItems}i===this._inputItem&&this._focused?o&&e.multiple&&this.setState({selectedItems:d}):(this._setValueMeta(i,p,!0,!0),this._setInputValue(r),this.setState({selectedItems:d}),s=!1,this._lastValidItem=i,this._lastValidValue=r,o&&(this._lastOnChangeValue=this._getValueUsing(e,r,i,d)))}else r&&e.datalist!=this.props.datalist&&this._focused&&this._checkAutoComplete(r,e);if(s){var h=this._filterItems(this.state.selectedItems,e);this.setState({selectedItems:h})}e.datalistMessage&&e.datalistMessage!=this.props.datalistMessage&&this._focused&&this._open("message",e)}},{key:"shouldComponentUpdate",value:function(e,t){return!(0,a.default)(this.props,e)||!(0,a.default)(this.state,t)}},{key:"componentWillUpdate",value:function(e,t){var n=this.refs.suggestions;this._menuFocusedBeforeUpdate=n&&n.isFocused();var r=t.inputValue;if(r!=this.state.inputValue){var o=void 0,i=void 0,a=void 0;if(this._valueWasValidated?(o=this._inputItem,a=this._valueIsValid):(r?null!=(o=this._listAdapter.findMatching(e.datalist,r))||e.datalistOnly?(i=!1,a=null!=o):(o=this._itemAdapter.newFromValue(r),i=!0,a=!0):(o=null,i=!1,a=!e.required),this._setValueMeta(o,i,a)),a&&(this._lastValidItem=o,this._lastValidValue=o&&!i?this._itemAdapter.getInputValue(o):r),a){var l=e.multiple,s=e.onChange;if(!l&&s){var c=this._getValueUsing(e,r,o,t.selectedItems);c!==this._lastOnChangeValue&&(this._lastOnChangeValue=c,s(c))}var u=e.onSelect;u&&o!==this._lastOnSelectValue&&(this._lastOnSelectValue=o,u(o))}}var p=e.onToggle;p&&t.open!=this.state.open&&p(t.open)}},{key:"componentDidUpdate",value:function(e,t){this.state.open&&!t.open&&"keydown"===this._lastOpenEventType||this.state.disableFilter&&!t.disableFilter&&this._menuFocusedBeforeUpdate?this.refs.suggestions.focusFirst():!this.state.open&&t.open&&this._menuFocusedBeforeUpdate&&(this._menuFocusedBeforeUpdate=!1,this._focusInput())}},{key:"componentWillUnmount",value:function(){clearTimeout(this._focusTimeoutId),this._focusTimeoutId=null,clearTimeout(this._searchTimeoutId),this._searchTimeoutId=null}},{key:"_focusInput",value:function(){var e=p.default.findDOMNode(this.refs.input);e instanceof HTMLElement&&e.focus()}},{key:"_open",value:function(e,t){this._lastOpenEventType=e;var n="autocomplete"!==e&&this._hasNoOrExactMatch(t);this.setState({open:!0,disableFilter:n});var r=t.onSearch,o=this.state,i=o.inputValue,a=o.searchValue;r&&a!==i&&(this.setState({searchValue:i}),r(i))}},{key:"_close",value:function(){this.setState({open:!1})}},{key:"_toggleOpen",value:function(e,t){this.state.open?this._close():this._open(e,t)}},{key:"_canOpen",value:function(){var e=this.props.datalist;return null==e&&this.props.onSearch||!this._listAdapter.isEmpty(e)||!!this.props.datalistMessage}},{key:"_hasNoOrExactMatch",value:function(e){var t=this;if(null!=this._inputItem&&!this._inputItemEphemeral)return!0;var n=this._itemAdapter.foldValue(this.state.inputValue);return null==this._listAdapter.find(e.datalist,function(e){return t._itemAdapter.itemIncludedByInput(e,n)})}},{key:"render",value:function(){var e=this.props.showToggle,t=this._canOpen(),n="auto"===e?t:e,r={autosuggest:!0,open:this.state.open,disabled:this.props.disabled,dropdown:n&&!this.props.dropup,dropup:n&&this.props.dropup};return c.default.createElement("div",{key:"dropdown",className:(0,i.default)(r),onFocus:this._handleFocus,onBlur:this._handleBlur},this._renderInputGroup(n,t),this._renderMenu())}},{key:"_renderInputGroup",value:function(e,t){var n=this.props.addonBefore?c.default.createElement("span",{className:"input-group-addon",key:"addonBefore"},this.props.addonBefore):null,r=this.props.addonAfter?c.default.createElement("span",{className:"input-group-addon",key:"addonAfter"},this.props.addonAfter):null,o=this.props.buttonBefore?c.default.createElement("span",{className:"input-group-btn"},this.props.buttonBefore):null,a=e&&this._renderToggle(t),l=a||this.props.buttonAfter?c.default.createElement("span",{className:"input-group-btn"},this.props.buttonAfter,a):null,s=(0,i.default)({"input-group":n||r||o||l,"input-group-sm":"small"===this.props.bsSize,"input-group-lg":"large"===this.props.bsSize,"input-group-toggle":!!a});return s?c.default.createElement("div",{className:s,key:"input-group"},n,o,this._renderChoices(),r,l):this._renderChoices()}},{key:"_renderToggle",value:function(e){return c.default.createElement(u.Dropdown.Toggle,{ref:"toggle",key:"toggle",id:this.props.toggleId,bsSize:this.props.bsSize,disabled:this.props.disabled||!e,open:this.state.open,onClick:this._handleToggleClick,onKeyDown:this._handleKeyDown})}},{key:"_renderChoices",value:function(){if(this.props.multiple){var e=this.props.choicesClass,t=void 0===e?f.default:e;return c.default.createElement(t,{ref:"choices",autoHeight:!(this.props.showToggle||this.props.addonAfter||this.props.addonBefore||this.props.buttonAfter||this.props.buttonBefore),disabled:this.props.disabled,focused:this.state.inputFocused,inputValue:this.state.inputValue,items:this.state.selectedItems,onKeyPress:this._handleKeyPress,onRemove:this._removeItem,renderItem:this._renderSelected},this._renderInput())}return this._renderInput()}},{key:"_renderSelected",value:function(e){return this._itemAdapter.renderSelected(e)}},{key:"_renderInput",value:function(){var e=this.context.$bs_formGroup,n=e&&e.controlId,o={},a=!0,l=!1,s=void 0;try{for(var u,p=Object.keys(this.props)[Symbol.iterator]();!(a=(u=p.next()).done);a=!0){var d=u.value;t.propTypes[d]||(o[d]=this.props[d])}}catch(e){l=!0,s=e}finally{try{!a&&p.return&&p.return()}finally{if(l)throw s}}var f=!this.props.multiple||!this.state.selectedItems.length;return c.default.createElement("input",r({autoComplete:"off"},o,{className:(0,i.default)(this.props.className,{"form-control":!this.props.multiple}),ref:"input",key:"input",id:n,disabled:this.props.disabled,required:this.props.required&&f,placeholder:f?this.props.placeholder:void 0,type:this.props.type,value:this.state.inputValue,onChange:this._handleInputChange,onKeyDown:this._handleKeyDown,onKeyPress:this._handleKeyPress,onFocus:this._handleInputFocus,onBlur:this._handleInputBlur}))}},{key:"_renderMenu",value:function(){var e=this;this._pseudofocusedItem=null;var t=this.state.open;if(!t)return null;var n=this.props.datalist,r=this._itemAdapter.foldValue(this.state.inputValue);this._foldedInputValue=r;var o=void 0;o=this.state.disableFilter?this._listAdapter.toArray(n):this._listAdapter.filter(n,function(t){return e._itemAdapter.itemIncludedByInput(t,r)&&e._allowItem(t)});var i=(o=this._itemAdapter.sortItems(o,r)).length<this._listAdapter.getLength(n),a=void 0;o.length>0&&this.state.inputFocused&&(!this.props.multiple||this.props.datalistOnly)&&(this._pseudofocusedItem=o[a=0]);var l=this.props,s=l.suggestionsClass,u=void 0===s?h.default:s,p=l.datalistMessage,d=l.onDatalistMessageSelect,f=l.toggleId;return c.default.createElement(u,{ref:"suggestions",datalistMessage:p,filtered:i,focusedIndex:a,getItemKey:this._getItemKey,isSelectedItem:this._isSelectedItem,items:o,labelledBy:f,onClose:this._handleMenuClose,onDatalistMessageSelect:d,onDisableFilter:this._handleShowAll,onSelect:this._handleItemSelect,open:t,renderItem:this._renderSuggested})}},{key:"_allowItem",value:function(e){var t=this;if(this.props.allowDuplicates)return!0;var n=this._itemAdapter.getInputValue(e);return!this.state.selectedItems.find(function(e){return t._itemAdapter.getInputValue(e)===n})}},{key:"_getItemKey",value:function(e){return this._itemAdapter.getReactKey(e)}},{key:"_isSelectedItem",value:function(e){return this._itemAdapter.itemMatchesInput(e,this._foldedInputValue)}},{key:"_renderSuggested",value:function(e){return this._itemAdapter.renderSuggested(e)}},{key:"_handleToggleClick",value:function(){this._toggleOpen("click",this.props)}},{key:"_handleInputChange",value:function(e){var t=this,n=e.target.value,r=this._keyPressCount>this.state.inputValueKeyPress;if(r&&n?this._autoCompleteAfterRender?(this._setValueMeta(),this._setInputValue(n,function(){t._checkAutoComplete(n,t.props)})):this._checkAutoComplete(n,this.props)||(this._setValueMeta(),this._setInputValue(n)):(this._setValueMeta(),this._setInputValue(n)),r||this.state.open){var o=this.props.onSearch;o&&(clearTimeout(this._searchTimeoutId),this._searchTimeoutId=setTimeout(function(){t._searchTimeoutId=null,n!=t.state.searchValue&&(t.setState({searchValue:n}),o(n))},this.props.searchDebounce))}}},{key:"_checkAutoComplete",value:function(e,t){var n=this,r=!1,o=t.datalist,i=this._itemAdapter.foldValue(e),a=this._listAdapter.filter(o,function(e){return n._itemAdapter.itemIncludedByInput(e,i)&&n._allowItem(e)});if(a.length>0){var l=t.datalistOnly,s=t.datalistPartial;if(1===a.length&&l&&!s){var c=a[0],u=this._itemAdapter.getInputValue(c),p=void 0,d=t.inputSelect;if(e!=u&&d&&this._itemAdapter.foldValue(u).startsWith(i)){var f=this.refs.input;p=function(){d(f,e,u)}}this._setValueMeta(c),this._setInputValue(u,p),r=!0,(this.state.open?t.closeOnCompletion:e!=u&&!t.closeOnCompletion)&&this._toggleOpen("autocomplete",t)}else{var h=a.find(function(e){return n._itemAdapter.itemMatchesInput(e,i)});h&&(this._setValueMeta(h),this._setInputValue(e),r=!0),this.state.open||h&&!(a.length>1)||this._open("autocomplete",t)}}return r}},{key:"_handleItemSelect",value:function(e){if(this.props.multiple)this._addItem(e);else{var t=this._itemAdapter.getInputValue(e);this._setValueMeta(e),this._setInputValue(t)}this._close()}},{key:"_addItem",value:function(e){if(this._allowItem(e)){var t=[].concat(O(this.state.selectedItems),[e]);this.setState({selectedItems:t});var n=this.props,r=n.onAdd,o=n.onChange;r&&r(e),o&&o(t)}this._clearInput(),this.state.open&&this._close()}},{key:"_removeItem",value:function(e){var t=this.state.selectedItems,n=t.slice(0,e).concat(t.slice(e+1));this.setState({selectedItems:n});var r=this.props,o=r.onRemove,i=r.onChange;o&&o(e),i&&i(n)}},{key:"_addInputValue",value:function(){return!!this._inputItem&&(this._addItem(this._inputItem),!0)}},{key:"_handleShowAll",value:function(){this.setState({disableFilter:!0})}},{key:"_handleKeyDown",value:function(e){if(!this.props.disabled)switch(e.keyCode||e.which){case l.default.codes.down:case l.default.codes["page down"]:this.state.open?this.refs.suggestions.focusFirst():this._canOpen()&&this._open("keydown",this.props),e.preventDefault();break;case l.default.codes.left:case l.default.codes.backspace:this.refs.choices&&this.refs.input&&0===this._getCursorPosition(this.refs.input)&&(this.refs.choices.focusLast(),e.preventDefault());break;case l.default.codes.right:this.refs.choices&&this.refs.input&&this._getCursorPosition(this.refs.input)===this.state.inputValue.length&&(this.refs.choices.focusFirst(),e.preventDefault());break;case l.default.codes.enter:if(this.props.multiple&&this.state.inputValue&&(e.preventDefault(),this._addInputValue()))break;this.state.open&&this.state.inputFocused&&(e.preventDefault(),this._pseudofocusedItem?this._handleItemSelect(this._pseudofocusedItem):this._close());break;case l.default.codes.esc:case l.default.codes.tab:this._handleMenuClose(e)}}},{key:"_getCursorPosition",value:function(e){var t=p.default.findDOMNode(e);if(t instanceof HTMLInputElement)return t.selectionStart}},{key:"_handleKeyPress",value:function(){++this._keyPressCount}},{key:"_handleMenuClose",value:function(){this.state.open&&this._close()}},{key:"_handleInputFocus",value:function(){this.setState({inputFocused:!0})}},{key:"_handleInputBlur",value:function(){this.setState({inputFocused:!1})}},{key:"_handleFocus",value:function(){if(this._focusTimeoutId)clearTimeout(this._focusTimeoutId),this._focusTimeoutId=null;else{this._focused=!0;var e=this.props.onFocus;if(e)e(this._getCurrentValue())}}},{key:"_handleBlur",value:function(){var e=this;this._focusTimeoutId=setTimeout(function(){e._focusTimeoutId=null,e._focused=!1;var t=e.state.inputValue,n=e.props.onBlur;if(e.props.multiple)t&&!e._addInputValue()&&e._clearInput();else if(t!=e._lastValidValue){var r=void 0;return n&&(r=function(){var t=e._getCurrentValue();n(t)}),e._setValueMeta(e._lastValidItem,!1,!0,!0),void e._setInputValue(e._lastValidValue,r)}if(n){var o=e._getCurrentValue();n(o)}},1)}}]),t}();S.propTypes={addonAfter:s.default.node,addonBefore:s.default.node,allowDuplicates:s.default.bool,bsSize:s.default.oneOf(["small","large"]),buttonAfter:s.default.node,buttonBefore:s.default.node,choicesClass:s.default.oneOfType([s.default.func,s.default.string]),closeOnCompletion:s.default.bool,datalist:s.default.any,datalistAdapter:s.default.object,datalistMessage:s.default.node,datalistOnly:s.default.bool,datalistPartial:s.default.bool,defaultValue:s.default.any,disabled:s.default.bool,dropup:s.default.bool,groupClassName:s.default.string,inputSelect:s.default.func,itemAdapter:s.default.object,itemReactKeyPropName:s.default.string,itemSortKeyPropName:s.default.string,itemValuePropName:s.default.string,multiple:s.default.bool,onAdd:s.default.func,onBlur:s.default.func,onChange:s.default.func,onDatalistMessageSelect:s.default.func,onFocus:s.default.func,onRemove:s.default.func,onSearch:s.default.func,onSelect:s.default.func,onToggle:s.default.func,placeholder:s.default.string,required:s.default.bool,searchDebounce:s.default.number,showToggle:s.default.oneOfType([s.default.bool,s.default.oneOf(["auto"])]),suggestionsClass:s.default.oneOfType([s.default.func,s.default.string]),toggleId:s.default.oneOfType([s.default.string,s.default.number]),type:s.default.string,value:s.default.any,valueIsItem:s.default.bool},S.contextTypes={$bs_formGroup:s.default.object},S.defaultProps={closeOnCompletion:!1,datalistOnly:!1,datalistPartial:!1,disabled:!1,dropup:!1,inputSelect:S.defaultInputSelect,multiple:!1,itemReactKeyPropName:"key",itemSortKeyPropName:"sortKey",itemValuePropName:"value",searchDebounce:250,showToggle:"auto",type:"text",valueIsItem:!1},t.default=S},1063:function(e,t,n){e.exports=n(35)(82)},1064:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=u(n(5)),i=u(n(857)),a=u(n(911)),l=u(n(4)),s=u(n(0)),c=u(n(29));function u(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(r)))),a=i;return a._handleKeyDown=i._handleKeyDown.bind(i),a._handleKeyPress=i._handleKeyPress.bind(i),a._handleClose=i._handleClose.bind(i),a._handleClick=i._handleClick.bind(i),a._focusInput=i._focusInput.bind(i),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["default"].Component),r(t,[{key:"shouldComponentUpdate",value:function(e){return!(0,i.default)(this.props,e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.autoHeight,r=t.disabled,i=t.focused,a=t.inputValue,l=t.items,c=t.renderItem,u=t.children,p=l.length>0,d=void 0;return p&&(d={width:.75*(a.length+1)+"em"}),s.default.createElement("ul",{className:(0,o.default)("form-control","autosuggest-choices",{focused:i,"has-items":p,"auto-height":n}),disabled:r,onClick:this._focusInput},l.map(function(t,n){return s.default.createElement("li",{key:n,"data-index":n,tabIndex:r?void 0:"-1",className:"autosuggest-choice",onKeyDown:e._handleKeyDown,onKeyPress:e._handleKeyPress},s.default.createElement("span",{className:"autosuggest-choice-close",onClick:e._handleClose}),s.default.createElement("span",{className:"autosuggest-choice-label",onClick:e._handleClick},c(t)))}),s.default.createElement("li",{className:"autosuggest-input-choice",style:d},u))}},{key:"_handleKeyDown",value:function(e){switch(e.keyCode){case a.default.codes.left:this._focusPrevious(),e.preventDefault();break;case a.default.codes.right:this._focusNext(),e.preventDefault();break;case a.default.codes.backspace:this._removeActive(-1),e.preventDefault();break;case a.default.codes.delete:this._removeActive(0),e.preventDefault()}}},{key:"_handleKeyPress",value:function(e){this._focusInput();var t=this.props.onKeyPress;t&&t(e)}},{key:"_handleClose",value:function(e){if(!this.props.disabled&&e.target instanceof HTMLElement){var t=e.target.parentNode;if(t instanceof Element){var n=Number(t.getAttribute("data-index"));this._remove(n)}}e.stopPropagation()}},{key:"_handleClick",value:function(e){e.stopPropagation()}},{key:"focusFirst",value:function(){var e=this._getFocusableMenuItems(!1);e.length>0&&e[0].focus()}},{key:"focusLast",value:function(){var e=this._getFocusableMenuItems(!1);e.length>0&&e[e.length-1].focus()}},{key:"_focusPrevious",value:function(){var e=this._getItemsAndActiveIndex(!0),t=e.items,n=e.activeIndex;n>0?t[n-1].focus():t.length>0&&t[t.length-1].focus()}},{key:"_focusNext",value:function(){var e=this._getItemsAndActiveIndex(!0),t=e.items,n=e.activeIndex;n<t.length-1?t[n+1].focus():t.length>0&&t[0].focus()}},{key:"_focusInput",value:function(){var e=c.default.findDOMNode(this);if(e instanceof Element){var t=e.querySelector("input");t&&t.focus()}}},{key:"_remove",value:function(e){var t=this.props.onRemove;t&&t(e)}},{key:"_removeActive",value:function(e){var t=this._getItemsAndActiveIndex(!1),n=t.items,r=t.activeIndex;if(r>=0){var o=r+e;o<0||o>=n.length-1?this._focusInput():0!=e&&n[o].focus(),this._remove(r)}}},{key:"_getItemsAndActiveIndex",value:function(e){var t=this._getFocusableMenuItems(e),n=document.activeElement,r=n?t.indexOf(n):-1;return{items:t,activeIndex:r}}},{key:"_getFocusableMenuItems",value:function(e){var t=c.default.findDOMNode(this);return t instanceof Element?Array.from(t.querySelectorAll(e?'[tabIndex="-1"],input':'[tabIndex="-1"]')):[]}}]),t}();p.propTypes={autoHeight:l.default.bool,disabled:l.default.bool,focused:l.default.bool,inputValue:l.default.string,items:l.default.arrayOf(l.default.any).isRequired,onKeyPress:l.default.func,onRemove:l.default.func,renderItem:l.default.func.isRequired},t.default=p},1065:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=c(n(857)),i=c(n(4)),a=c(n(0)),l=n(17),s=c(n(29));function c(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["default"].Component),r(t,[{key:"shouldComponentUpdate",value:function(e){return!(0,o.default)(this.props,e)}},{key:"isFocused",value:function(){var e=s.default.findDOMNode(this.refs.menu);return null!=e&&document&&e.contains(document.activeElement)}},{key:"focusFirst",value:function(){this.refs.menu.focusNext()}},{key:"render",value:function(){var e=this.props,t=e.items,n=e.datalistMessage,r=e.onDatalistMessageSelect;return a.default.createElement(l.Dropdown.Menu,{labelledBy:this.props.labelledBy,onClose:this.props.onClose,open:this.props.open,ref:"menu"},t.map(this._renderItem,this),this.props.filtered&&a.default.createElement(l.MenuItem,{key:"show-all",onSelect:this.props.onDisableFilter},a.default.createElement("span",{className:"show-all"},0===t.length?a.default.createElement("span",{className:"no-matches"}):null)),n&&a.default.createElement(l.MenuItem,{key:"datalist-message",disabled:null==r,onSelect:r},n))}},{key:"_renderItem",value:function(e,t){var n=this.props.isSelectedItem(e);return a.default.createElement(l.MenuItem,{active:n,className:t!==this.props.focusedIndex||n?void 0:"pseudofocused",eventKey:e,key:this.props.getItemKey(e),onSelect:this.props.onSelect},this.props.renderItem(e))}}]),t}();u.propTypes={datalistMessage:i.default.node,filtered:i.default.bool,focusedIndex:i.default.number,getItemKey:i.default.func.isRequired,isSelectedItem:i.default.func.isRequired,items:i.default.arrayOf(i.default.any).isRequired,labelledBy:i.default.oneOfType([i.default.string,i.default.number]),onClose:i.default.func,onDatalistMessageSelect:i.default.func,onDisableFilter:i.default.func,onSelect:i.default.func.isRequired,open:i.default.bool,renderItem:i.default.func.isRequired},t.default=u},1066:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(838),a=(r=i)&&r.__esModule?r:{default:r};var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["default"]),o(t,[{key:"getLength",value:function(){return 0}},{key:"filter",value:function(){return[]}},{key:"find",value:function(){}},{key:"toArray",value:function(){return[]}}]),t}();t.default=l},1067:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(838),a=(r=i)&&r.__esModule?r:{default:r};var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["default"]),o(t,[{key:"getLength",value:function(e){return e.length}},{key:"filter",value:function(e,t){return e.filter(t)}},{key:"find",value:function(e,t){return e.find(t)}},{key:"toArray",value:function(e){return e.slice()}}]),t}();t.default=l},1068:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(913),a=(r=i)&&r.__esModule?r:{default:r};var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["default"]),o(t,[{key:"getLength",value:function(e){return e.size}},{key:"filter",value:function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e.entries()[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value,c=this._getKeyValueItem(s[0],s[1]);t(c)&&n.push(c)}}catch(e){o=!0,i=e}finally{try{!r&&l.return&&l.return()}finally{if(o)throw i}}return n}},{key:"find",value:function(e,t){var n=!0,r=!1,o=void 0;try{for(var i,a=e.entries()[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var l=i.value,s=this._getKeyValueItem(l[0],l[1]);if(t(s))return s}}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}}},{key:"toArray",value:function(e){var t=[],n=!0,r=!1,o=void 0;try{for(var i,a=e.entries()[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var l=i.value;t.push(this._getKeyValueItem(l[0],l[1]))}}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return t}}]),t}();t.default=l},1069:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(913),a=(r=i)&&r.__esModule?r:{default:r};var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["default"]),o(t,[{key:"getLength",value:function(e){return Object.keys(e).length}},{key:"filter",value:function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=Object.keys(e)[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value,c=this._getKeyValueItem(s,e[s]);t(c)&&n.push(c)}}catch(e){o=!0,i=e}finally{try{!r&&l.return&&l.return()}finally{if(o)throw i}}return n}},{key:"find",value:function(e,t){var n=!0,r=!1,o=void 0;try{for(var i,a=Object.keys(e)[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var l=i.value,s=this._getKeyValueItem(l,e[l]);if(t(s))return s}}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}}},{key:"toArray",value:function(e){var t=[],n=!0,r=!1,o=void 0;try{for(var i,a=Object.keys(e)[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var l=i.value;t.push(this._getKeyValueItem(l,e[l]))}}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return t}}]),t}();t.default=l},1070:function(e,t,n){"use strict";var r=n(0),o=n(1),i=n(9),a=n(3);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":d(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,u(t).apply(this,arguments))}var n,i,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,r["Component"]),n=t,(i=[{key:"render",value:function(){var e=this;return r.createElement("div",null,"Quick select: ",o.map(this.props.buttonsConfig,function(t,n){var o=l(n.split("|"),2),i=o[0],s=o[1],c=r.createElement("button",{"data-test":"selectPanCan",className:"btn btn-default btn-xs",onClick:function(){return e.props.onSelect(t)}},i),u=r.createElement("span",{style:{display:"inline-block",width:"300px"}},s||"");return s?r.createElement(a.i,{overlay:u},c):c}))}}])&&s(n.prototype,i),d&&s(n,d),t}();h=f([i.observer],h),t.a=h},1071:function(e,t,n){(function(r){var o,i,a;/*! jsTree - v3.3.7 - 2018-11-06 - (MIT) */!function(l){"use strict";i=[n(26)],void 0===(a="function"==typeof(o=function(e,t){if(!e.jstree){var n=0,o=!1,i=!1,a=!1,l=[],s=e("script:last").attr("src"),c=window.document;e.jstree={version:"3.3.7",defaults:{plugins:[]},plugins:{},path:s&&-1!==s.indexOf("/")?s.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%?`]/g,root:"#"},e.jstree.create=function(t,r){var o=new e.jstree.core(++n),i=r;return r=e.extend(!0,{},e.jstree.defaults,r),i&&i.plugins&&(r.plugins=i.plugins),e.each(r.plugins,function(e,t){"core"!==e&&(o=o.plugin(t,r[t]))}),e(t).data("jstree",o),o.init(t,r),o},e.jstree.destroy=function(){e(".jstree:jstree").jstree("destroy"),e(c).off(".jstree")},e.jstree.core=function(e){this._id=e,this._cnt=0,this._wrk=null,this._data={core:{themes:{name:!1,dots:!1,icons:!1,ellipsis:!1},selected:[],last_error:{},working:!1,worker_queue:[],focused:null}}},e.jstree.reference=function(t){var n=null,r=null;if(!t||!t.id||t.tagName&&t.nodeType||(t=t.id),!r||!r.length)try{r=e(t)}catch(e){}if(!r||!r.length)try{r=e("#"+t.replace(e.jstree.idregex,"\\$&"))}catch(e){}return r&&r.length&&(r=r.closest(".jstree")).length&&(r=r.data("jstree"))?n=r:e(".jstree").each(function(){var r=e(this).data("jstree");return r&&r._model.data[t]?(n=r,!1):void 0}),n},e.fn.jstree=function(n){var r="string"==typeof n,o=Array.prototype.slice.call(arguments,1),i=null;return!(!0===n&&!this.length)&&(this.each(function(){var a=e.jstree.reference(this),l=r&&a?a[n]:null;return i=r&&l?l.apply(a,o):null,a||r||n!==t&&!e.isPlainObject(n)||e.jstree.create(this,n),(a&&!r||!0===n)&&(i=a||!1),(null===i||i===t)&&void 0}),null!==i&&i!==t?i:this)},e.expr.pseudos.jstree=e.expr.createPseudo(function(n){return function(n){return e(n).hasClass("jstree")&&e(n).data("jstree")!==t}}),e.jstree.defaults.core={data:!1,strings:!1,check_callback:!1,error:e.noop,animation:200,multiple:!0,themes:{name:!1,url:!1,dir:!1,dots:!0,icons:!0,ellipsis:!1,stripes:!1,variant:!1,responsive:!1},expand_selected_onload:!0,worker:!0,force_text:!1,dblclick_toggle:!0,loaded_state:!1,restore_focus:!0,keyboard:{"ctrl-space":function(t){t.type="click",e(t.currentTarget).trigger(t)},enter:function(t){t.type="click",e(t.currentTarget).trigger(t)},left:function(t){if(t.preventDefault(),this.is_open(t.currentTarget))this.close_node(t.currentTarget);else{var n=this.get_parent(t.currentTarget);n&&n.id!==e.jstree.root&&this.get_node(n,!0).children(".jstree-anchor").focus()}},up:function(e){e.preventDefault();var t=this.get_prev_dom(e.currentTarget);t&&t.length&&t.children(".jstree-anchor").focus()},right:function(t){if(t.preventDefault(),this.is_closed(t.currentTarget))this.open_node(t.currentTarget,function(e){this.get_node(e,!0).children(".jstree-anchor").focus()});else if(this.is_open(t.currentTarget)){var n=this.get_node(t.currentTarget,!0).children(".jstree-children")[0];n&&e(this._firstChild(n)).children(".jstree-anchor").focus()}},down:function(e){e.preventDefault();var t=this.get_next_dom(e.currentTarget);t&&t.length&&t.children(".jstree-anchor").focus()},"*":function(e){this.open_all()},home:function(t){t.preventDefault();var n=this._firstChild(this.get_container_ul()[0]);n&&e(n).children(".jstree-anchor").filter(":visible").focus()},end:function(e){e.preventDefault(),this.element.find(".jstree-anchor").filter(":visible").last().focus()},f2:function(e){e.preventDefault(),this.edit(e.currentTarget)}}},e.jstree.core.prototype={plugin:function(t,n){var r=e.jstree.plugins[t];return r?(this._data[t]={},r.prototype=this,new r(n,this)):this},init:function(t,n){this._model={data:{},changed:[],force_full_redraw:!1,redraw_timeout:!1,default_state:{loaded:!0,opened:!1,selected:!1,disabled:!1}},this._model.data[e.jstree.root]={id:e.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this.element=e(t).addClass("jstree jstree-"+this._id),this.settings=n,this._data.core.ready=!1,this._data.core.loaded=!1,this._data.core.rtl="rtl"===this.element.css("direction"),this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl"),this.element.attr("role","tree"),this.settings.core.multiple&&this.element.attr("aria-multiselectable",!0),this.element.attr("tabindex")||this.element.attr("tabindex","0"),this.bind(),this.trigger("init"),this._data.core.original_container_html=this.element.find(" > ul > li").clone(!0),this._data.core.original_container_html.find("li").addBack().contents().filter(function(){return 3===this.nodeType&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove(),this.element.html("<ul class='jstree-container-ul jstree-children' role='group'><li id='j"+this._id+"_loading' class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='tree-item'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading"),this._data.core.li_height=this.get_container_ul().children("li").first().outerHeight()||24,this._data.core.node=this._create_prototype_node(),this.trigger("loading"),this.load_node(e.jstree.root)},destroy:function(e){if(this.trigger("destroy"),this._wrk)try{window.URL.revokeObjectURL(this._wrk),this._wrk=null}catch(e){}e||this.element.empty(),this.teardown()},_create_prototype_node:function(){var e,t,n=c.createElement("LI");return n.setAttribute("role","treeitem"),(e=c.createElement("I")).className="jstree-icon jstree-ocl",e.setAttribute("role","presentation"),n.appendChild(e),(e=c.createElement("A")).className="jstree-anchor",e.setAttribute("href","#"),e.setAttribute("tabindex","-1"),(t=c.createElement("I")).className="jstree-icon jstree-themeicon",t.setAttribute("role","presentation"),e.appendChild(t),n.appendChild(e),e=t=null,n},_kbevent_to_func:function(e){var t=[];e.ctrlKey&&t.push("ctrl"),e.altKey&&t.push("alt"),e.shiftKey&&t.push("shift"),t.push({8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock",16:"Shift",17:"Ctrl",18:"Alt",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*",173:"-"}[e.which]||e.which),t=t.sort().join("-").toLowerCase();var n,r,o=this.settings.core.keyboard;for(n in o)if(o.hasOwnProperty(n)&&("-"!==(r=n)&&"+"!==r&&(r=(r=r.replace("--","-MINUS").replace("+-","-MINUS").replace("++","-PLUS").replace("-+","-PLUS")).split(/-|\+/).sort().join("-").replace("MINUS","-").replace("PLUS","+").toLowerCase()),r===t))return o[n];return null},teardown:function(){this.unbind(),this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")}),this.element=null},bind:function(){var t="",n=null,r=0;this.element.on("dblclick.jstree",function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;if(c.selection&&c.selection.empty)c.selection.empty();else if(window.getSelection){var t=window.getSelection();try{t.removeAllRanges(),t.collapse()}catch(e){}}}).on("mousedown.jstree",e.proxy(function(e){e.target===this.element[0]&&(e.preventDefault(),r=+new Date)},this)).on("mousedown.jstree",".jstree-ocl",function(e){e.preventDefault()}).on("click.jstree",".jstree-ocl",e.proxy(function(e){this.toggle_node(e.target)},this)).on("dblclick.jstree",".jstree-anchor",e.proxy(function(e){return!(!e.target.tagName||"input"!==e.target.tagName.toLowerCase())||void(this.settings.core.dblclick_toggle&&this.toggle_node(e.target))},this)).on("click.jstree",".jstree-anchor",e.proxy(function(t){t.preventDefault(),t.currentTarget!==c.activeElement&&e(t.currentTarget).focus(),this.activate_node(t.currentTarget,t)},this)).on("keydown.jstree",".jstree-anchor",e.proxy(function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;this._data.core.rtl&&(37===e.which?e.which=39:39===e.which&&(e.which=37));var t=this._kbevent_to_func(e);if(t){var n=t.call(this,e);if(!1===n||!0===n)return n}},this)).on("load_node.jstree",e.proxy(function(t,n){n.status&&(n.node.id!==e.jstree.root||this._data.core.loaded||(this._data.core.loaded=!0,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.trigger("loaded")),this._data.core.ready||setTimeout(e.proxy(function(){if(this.element&&!this.get_container_ul().find(".jstree-loading").length){if(this._data.core.ready=!0,this._data.core.selected.length){if(this.settings.core.expand_selected_onload){var t,n,r=[];for(t=0,n=this._data.core.selected.length;n>t;t++)r=r.concat(this._model.data[this._data.core.selected[t]].parents);for(r=e.vakata.array_unique(r),t=0,n=r.length;n>t;t++)this.open_node(r[t],!1,0)}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}this.trigger("ready")}},this),0))},this)).on("keypress.jstree",e.proxy(function(r){if(r.target.tagName&&"input"===r.target.tagName.toLowerCase())return!0;n&&clearTimeout(n),n=setTimeout(function(){t=""},500);var o=String.fromCharCode(r.which).toLowerCase(),i=this.element.find(".jstree-anchor").filter(":visible"),a=i.index(c.activeElement)||0,l=!1;if((t+=o).length>1){if(i.slice(a).each(e.proxy(function(n,r){return 0===e(r).text().toLowerCase().indexOf(t)?(e(r).focus(),l=!0,!1):void 0},this)),l)return;if(i.slice(0,a).each(e.proxy(function(n,r){return 0===e(r).text().toLowerCase().indexOf(t)?(e(r).focus(),l=!0,!1):void 0},this)),l)return}if(new RegExp("^"+o.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+"+$").test(t)){if(i.slice(a+1).each(e.proxy(function(t,n){return e(n).text().toLowerCase().charAt(0)===o?(e(n).focus(),l=!0,!1):void 0},this)),l)return;if(i.slice(0,a+1).each(e.proxy(function(t,n){return e(n).text().toLowerCase().charAt(0)===o?(e(n).focus(),l=!0,!1):void 0},this)),l)return}},this)).on("init.jstree",e.proxy(function(){var e=this.settings.core.themes;this._data.core.themes.dots=e.dots,this._data.core.themes.stripes=e.stripes,this._data.core.themes.icons=e.icons,this._data.core.themes.ellipsis=e.ellipsis,this.set_theme(e.name||"default",e.url),this.set_theme_variant(e.variant)},this)).on("loading.jstree",e.proxy(function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"](),this[this._data.core.themes.icons?"show_icons":"hide_icons"](),this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"](),this[this._data.core.themes.ellipsis?"show_ellipsis":"hide_ellipsis"]()},this)).on("blur.jstree",".jstree-anchor",e.proxy(function(t){this._data.core.focused=null,e(t.currentTarget).filter(".jstree-hovered").mouseleave(),this.element.attr("tabindex","0")},this)).on("focus.jstree",".jstree-anchor",e.proxy(function(t){var n=this.get_node(t.currentTarget);n&&n.id&&(this._data.core.focused=n.id),this.element.find(".jstree-hovered").not(t.currentTarget).mouseleave(),e(t.currentTarget).mouseenter(),this.element.attr("tabindex","-1")},this)).on("focus.jstree",e.proxy(function(){if(+new Date-r>500&&!this._data.core.focused&&this.settings.core.restore_focus){r=0;var e=this.get_node(this.element.attr("aria-activedescendant"),!0);e&&e.find("> .jstree-anchor").focus()}},this)).on("mouseenter.jstree",".jstree-anchor",e.proxy(function(e){this.hover_node(e.currentTarget)},this)).on("mouseleave.jstree",".jstree-anchor",e.proxy(function(e){this.dehover_node(e.currentTarget)},this))},unbind:function(){this.element.off(".jstree"),e(c).off(".jstree-"+this._id)},trigger:function(e,t){t||(t={}),t.instance=this,this.element.triggerHandler(e.replace(".jstree","")+".jstree",t)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children(".jstree-children").first()},get_string:function(t){var n=this.settings.core.strings;return e.isFunction(n)?n.call(this,t):n&&n[t]?n[t]:t},_firstChild:function(e){for(e=e?e.firstChild:null;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},_nextSibling:function(e){for(e=e?e.nextSibling:null;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},_previousSibling:function(e){for(e=e?e.previousSibling:null;null!==e&&1!==e.nodeType;)e=e.previousSibling;return e},get_node:function(t,n){var o;t&&t.id&&(t=t.id),t instanceof r&&t.length&&t[0].id&&(t=t[0].id);try{if(this._model.data[t])t=this._model.data[t];else if("string"==typeof t&&this._model.data[t.replace(/^#/,"")])t=this._model.data[t.replace(/^#/,"")];else if("string"==typeof t&&(o=e("#"+t.replace(e.jstree.idregex,"\\$&"),this.element)).length&&this._model.data[o.closest(".jstree-node").attr("id")])t=this._model.data[o.closest(".jstree-node").attr("id")];else if((o=this.element.find(t)).length&&this._model.data[o.closest(".jstree-node").attr("id")])t=this._model.data[o.closest(".jstree-node").attr("id")];else{if(!(o=this.element.find(t)).length||!o.hasClass("jstree"))return!1;t=this._model.data[e.jstree.root]}return n&&(t=t.id===e.jstree.root?this.element:e("#"+t.id.replace(e.jstree.idregex,"\\$&"),this.element)),t}catch(e){return!1}},get_path:function(t,n,r){if(!(t=t.parents?t:this.get_node(t))||t.id===e.jstree.root||!t.parents)return!1;var o,i,a=[];for(a.push(r?t.id:t.text),o=0,i=t.parents.length;i>o;o++)a.push(r?t.parents[o]:this.get_text(t.parents[o]));return a=a.reverse().slice(1),n?a.join(n):a},get_next_dom:function(t,n){var r;if((t=this.get_node(t,!0))[0]===this.element[0]){for(r=this._firstChild(this.get_container_ul()[0]);r&&0===r.offsetHeight;)r=this._nextSibling(r);return!!r&&e(r)}if(!t||!t.length)return!1;if(n){r=t[0];do{r=this._nextSibling(r)}while(r&&0===r.offsetHeight);return!!r&&e(r)}if(t.hasClass("jstree-open")){for(r=this._firstChild(t.children(".jstree-children")[0]);r&&0===r.offsetHeight;)r=this._nextSibling(r);if(null!==r)return e(r)}r=t[0];do{r=this._nextSibling(r)}while(r&&0===r.offsetHeight);return null!==r?e(r):t.parentsUntil(".jstree",".jstree-node").nextAll(".jstree-node:visible").first()},get_prev_dom:function(t,n){var r;if((t=this.get_node(t,!0))[0]===this.element[0]){for(r=this.get_container_ul()[0].lastChild;r&&0===r.offsetHeight;)r=this._previousSibling(r);return!!r&&e(r)}if(!t||!t.length)return!1;if(n){r=t[0];do{r=this._previousSibling(r)}while(r&&0===r.offsetHeight);return!!r&&e(r)}r=t[0];do{r=this._previousSibling(r)}while(r&&0===r.offsetHeight);if(null!==r){for(t=e(r);t.hasClass("jstree-open");)t=t.children(".jstree-children").first().children(".jstree-node:visible:last");return t}return!(!(r=t[0].parentNode.parentNode)||!r.className||-1===r.className.indexOf("jstree-node"))&&e(r)},get_parent:function(t){return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&t.parent},get_children_dom:function(e){return(e=this.get_node(e,!0))[0]===this.element[0]?this.get_container_ul().children(".jstree-node"):!(!e||!e.length)&&e.children(".jstree-children").children(".jstree-node")},is_parent:function(e){return(e=this.get_node(e))&&(!1===e.state.loaded||e.children.length>0)},is_loaded:function(e){return(e=this.get_node(e))&&e.state.loaded},is_loading:function(e){return(e=this.get_node(e))&&e.state&&e.state.loading},is_open:function(e){return(e=this.get_node(e))&&e.state.opened},is_closed:function(e){return(e=this.get_node(e))&&this.is_parent(e)&&!e.state.opened},is_leaf:function(e){return!this.is_parent(e)},load_node:function(t,n){var r,o,i,a,l;if(e.isArray(t))return this._load_nodes(t.slice(),n),!0;if(!(t=this.get_node(t)))return n&&n.call(this,t,!1),!1;if(t.state.loaded){for(t.state.loaded=!1,i=0,a=t.parents.length;a>i;i++)this._model.data[t.parents[i]].children_d=e.vakata.array_filter(this._model.data[t.parents[i]].children_d,function(n){return-1===e.inArray(n,t.children_d)});for(r=0,o=t.children_d.length;o>r;r++)this._model.data[t.children_d[r]].state.selected&&(l=!0),delete this._model.data[t.children_d[r]];l&&(this._data.core.selected=e.vakata.array_filter(this._data.core.selected,function(n){return-1===e.inArray(n,t.children_d)})),t.children=[],t.children_d=[],l&&this.trigger("changed",{action:"load_node",node:t,selected:this._data.core.selected})}return t.state.failed=!1,t.state.loading=!0,this.get_node(t,!0).addClass("jstree-loading").attr("aria-busy",!0),this._load_node(t,e.proxy(function(e){(t=this._model.data[t.id]).state.loading=!1,t.state.loaded=e,t.state.failed=!t.state.loaded;var r=this.get_node(t,!0),o=0,i=0,a=this._model.data,l=!1;for(o=0,i=t.children.length;i>o;o++)if(a[t.children[o]]&&!a[t.children[o]].state.hidden){l=!0;break}t.state.loaded&&r&&r.length&&(r.removeClass("jstree-closed jstree-open jstree-leaf"),l?"#"!==t.id&&r.addClass(t.state.opened?"jstree-open":"jstree-closed"):r.addClass("jstree-leaf")),r.removeClass("jstree-loading").attr("aria-busy",!1),this.trigger("load_node",{node:t,status:e}),n&&n.call(this,t,e)},this)),!0},_load_nodes:function(e,t,n,r){var o,i,a=!0,l=function(){this._load_nodes(e,t,!0)},s=this._model.data,c=[];for(o=0,i=e.length;i>o;o++)s[e[o]]&&(!s[e[o]].state.loaded&&!s[e[o]].state.failed||!n&&r)&&(this.is_loading(e[o])||this.load_node(e[o],l),a=!1);if(a){for(o=0,i=e.length;i>o;o++)s[e[o]]&&s[e[o]].state.loaded&&c.push(e[o]);t&&!t.done&&(t.call(this,c),t.done=!0)}},load_all:function(t,n){if(t||(t=e.jstree.root),!(t=this.get_node(t)))return!1;var r,o,i=[],a=this._model.data,l=a[t.id].children_d;for(t.state&&!t.state.loaded&&i.push(t.id),r=0,o=l.length;o>r;r++)a[l[r]]&&a[l[r]].state&&!a[l[r]].state.loaded&&i.push(l[r]);i.length?this._load_nodes(i,function(){this.load_all(t,n)}):(n&&n.call(this,t),this.trigger("load_all",{node:t}))},_load_node:function(t,n){var r,o=this.settings.core.data,i=function(){return 3!==this.nodeType&&8!==this.nodeType};return o?e.isFunction(o)?o.call(this,t,e.proxy(function(r){!1===r?n.call(this,!1):this["string"==typeof r?"_append_html_data":"_append_json_data"](t,"string"==typeof r?e(e.parseHTML(r)).filter(i):r,function(e){n.call(this,e)})},this)):"object"==typeof o?o.url?(o=e.extend(!0,{},o),e.isFunction(o.url)&&(o.url=o.url.call(this,t)),e.isFunction(o.data)&&(o.data=o.data.call(this,t)),e.ajax(o).done(e.proxy(function(r,o,a){var l=a.getResponseHeader("Content-Type");return l&&-1!==l.indexOf("json")||"object"==typeof r?this._append_json_data(t,r,function(e){n.call(this,e)}):l&&-1!==l.indexOf("html")||"string"==typeof r?this._append_html_data(t,e(e.parseHTML(r)).filter(i),function(e){n.call(this,e)}):(this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:t.id,xhr:a})},this.settings.core.error.call(this,this._data.core.last_error),n.call(this,!1))},this)).fail(e.proxy(function(e){this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:t.id,xhr:e})},n.call(this,!1),this.settings.core.error.call(this,this._data.core.last_error)},this))):(r=e.isArray(o)?e.extend(!0,[],o):e.isPlainObject(o)?e.extend(!0,{},o):o,t.id===e.jstree.root?this._append_json_data(t,r,function(e){n.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:t.id})},this.settings.core.error.call(this,this._data.core.last_error),n.call(this,!1))):"string"==typeof o?t.id===e.jstree.root?this._append_html_data(t,e(e.parseHTML(o)).filter(i),function(e){n.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:t.id})},this.settings.core.error.call(this,this._data.core.last_error),n.call(this,!1)):n.call(this,!1):t.id===e.jstree.root?this._append_html_data(t,this._data.core.original_container_html.clone(!0),function(e){n.call(this,e)}):n.call(this,!1)},_node_changed:function(t){(t=this.get_node(t))&&-1===e.inArray(t.id,this._model.changed)&&this._model.changed.push(t.id)},_append_html_data:function(t,n,r){(t=this.get_node(t)).children=[],t.children_d=[];var o,i,a,l=n.is("ul")?n.children():n,s=t.id,c=[],u=[],p=this._model.data,d=p[s],f=this._data.core.selected.length;for(l.each(e.proxy(function(t,n){(o=this._parse_model_from_html(e(n),s,d.parents.concat()))&&(c.push(o),u.push(o),p[o].children_d.length&&(u=u.concat(p[o].children_d)))},this)),d.children=c,d.children_d=u,i=0,a=d.parents.length;a>i;i++)p[d.parents[i]].children_d=p[d.parents[i]].children_d.concat(u);this.trigger("model",{nodes:u,parent:s}),s!==e.jstree.root?(this._node_changed(s),this.redraw()):(this.get_container_ul().children(".jstree-initial-node").remove(),this.redraw(!0)),this._data.core.selected.length!==f&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),r.call(this,!0)},_append_json_data:function(t,n,r,o){if(null!==this.element){(t=this.get_node(t)).children=[],t.children_d=[],n.d&&("string"==typeof(n=n.d)&&(n=JSON.parse(n))),e.isArray(n)||(n=[n]);var i=null,a={df:this._model.default_state,dat:n,par:t.id,m:this._model.data,t_id:this._id,t_cnt:this._cnt,sel:this._data.core.selected},l=function(e,t){e.data&&(e=e.data);var n,r,o,i,a=e.dat,l=e.par,s=[],c=[],u=[],p=e.df,d=e.t_id,f=e.t_cnt,h=e.m,m=h[l],y=e.sel,b=function(e,n,r){r=r?r.concat():[],n&&r.unshift(n);var o,i,a,l,s=e.id.toString(),c={id:s,text:e.text||"",icon:e.icon===t||e.icon,parent:n,parents:r,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(o in p)p.hasOwnProperty(o)&&(c.state[o]=p[o]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(c.icon=e.data.jstree.icon),(c.icon===t||null===c.icon||""===c.icon)&&(c.icon=!0),e&&e.data&&(c.data=e.data,e.data.jstree))for(o in e.data.jstree)e.data.jstree.hasOwnProperty(o)&&(c.state[o]=e.data.jstree[o]);if(e&&"object"==typeof e.state)for(o in e.state)e.state.hasOwnProperty(o)&&(c.state[o]=e.state[o]);if(e&&"object"==typeof e.li_attr)for(o in e.li_attr)e.li_attr.hasOwnProperty(o)&&(c.li_attr[o]=e.li_attr[o]);if(c.li_attr.id||(c.li_attr.id=s),e&&"object"==typeof e.a_attr)for(o in e.a_attr)e.a_attr.hasOwnProperty(o)&&(c.a_attr[o]=e.a_attr[o]);for(e&&e.children&&!0===e.children&&(c.state.loaded=!1,c.children=[],c.children_d=[]),h[c.id]=c,o=0,i=c.children.length;i>o;o++)a=b(h[c.children[o]],c.id,r),l=h[a],c.children_d.push(a),l.children_d.length&&(c.children_d=c.children_d.concat(l.children_d));return delete e.data,delete e.children,h[c.id].original=e,c.state.selected&&u.push(c.id),c.id},g=function(e,n,r){r=r?r.concat():[],n&&r.unshift(n);var o,i,a,l,s,c=!1;do{c="j"+d+"_"+ ++f}while(h[c]);for(o in s={id:!1,text:"string"==typeof e?e:"",icon:"object"!=typeof e||e.icon===t||e.icon,parent:n,parents:r,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1},p)p.hasOwnProperty(o)&&(s.state[o]=p[o]);if(e&&e.id&&(s.id=e.id.toString()),e&&e.text&&(s.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(s.icon=e.data.jstree.icon),(s.icon===t||null===s.icon||""===s.icon)&&(s.icon=!0),e&&e.data&&(s.data=e.data,e.data.jstree))for(o in e.data.jstree)e.data.jstree.hasOwnProperty(o)&&(s.state[o]=e.data.jstree[o]);if(e&&"object"==typeof e.state)for(o in e.state)e.state.hasOwnProperty(o)&&(s.state[o]=e.state[o]);if(e&&"object"==typeof e.li_attr)for(o in e.li_attr)e.li_attr.hasOwnProperty(o)&&(s.li_attr[o]=e.li_attr[o]);if(s.li_attr.id&&!s.id&&(s.id=s.li_attr.id.toString()),s.id||(s.id=c),s.li_attr.id||(s.li_attr.id=s.id),e&&"object"==typeof e.a_attr)for(o in e.a_attr)e.a_attr.hasOwnProperty(o)&&(s.a_attr[o]=e.a_attr[o]);if(e&&e.children&&e.children.length){for(o=0,i=e.children.length;i>o;o++)a=g(e.children[o],s.id,r),l=h[a],s.children.push(a),l.children_d.length&&(s.children_d=s.children_d.concat(l.children_d));s.children_d=s.children_d.concat(s.children)}return e&&e.children&&!0===e.children&&(s.state.loaded=!1,s.children=[],s.children_d=[]),delete e.data,delete e.children,s.original=e,h[s.id]=s,s.state.selected&&u.push(s.id),s.id};if(a.length&&a[0].id!==t&&a[0].parent!==t){for(r=0,o=a.length;o>r;r++)a[r].children||(a[r].children=[]),a[r].state||(a[r].state={}),h[a[r].id.toString()]=a[r];for(r=0,o=a.length;o>r;r++)h[a[r].parent.toString()]?(h[a[r].parent.toString()].children.push(a[r].id.toString()),m.children_d.push(a[r].id.toString())):(this._data.core.last_error={error:"parse",plugin:"core",id:"core_07",reason:"Node with invalid parent",data:JSON.stringify({id:a[r].id.toString(),parent:a[r].parent.toString()})},this.settings.core.error.call(this,this._data.core.last_error));for(r=0,o=m.children.length;o>r;r++)n=b(h[m.children[r]],l,m.parents.concat()),c.push(n),h[n].children_d.length&&(c=c.concat(h[n].children_d));for(r=0,o=m.parents.length;o>r;r++)h[m.parents[r]].children_d=h[m.parents[r]].children_d.concat(c);i={cnt:f,mod:h,sel:y,par:l,dpc:c,add:u}}else{for(r=0,o=a.length;o>r;r++)(n=g(a[r],l,m.parents.concat()))&&(s.push(n),c.push(n),h[n].children_d.length&&(c=c.concat(h[n].children_d)));for(m.children=s,m.children_d=c,r=0,o=m.parents.length;o>r;r++)h[m.parents[r]].children_d=h[m.parents[r]].children_d.concat(c);i={cnt:f,mod:h,sel:y,par:l,dpc:c,add:u}}return"undefined"!=typeof window&&void 0!==window.document?i:void postMessage(i)},s=function(t,n){if(null!==this.element){this._cnt=t.cnt;var o,i=this._model.data;for(o in i)i.hasOwnProperty(o)&&i[o].state&&i[o].state.loading&&t.mod[o]&&(t.mod[o].state.loading=!0);if(this._model.data=t.mod,n){var a,l=t.add,s=t.sel,c=this._data.core.selected.slice();if(i=this._model.data,s.length!==c.length||e.vakata.array_unique(s.concat(c)).length!==s.length){for(o=0,a=s.length;a>o;o++)-1===e.inArray(s[o],l)&&-1===e.inArray(s[o],c)&&(i[s[o]].state.selected=!1);for(o=0,a=c.length;a>o;o++)-1===e.inArray(c[o],s)&&(i[c[o]].state.selected=!0)}}t.add.length&&(this._data.core.selected=this._data.core.selected.concat(t.add)),this.trigger("model",{nodes:t.dpc,parent:t.par}),t.par!==e.jstree.root?(this._node_changed(t.par),this.redraw()):this.redraw(!0),t.add.length&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),r.call(this,!0)}};if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker)try{null===this._wrk&&(this._wrk=window.URL.createObjectURL(new window.Blob(["self.onmessage = "+l.toString()],{type:"text/javascript"}))),!this._data.core.working||o?(this._data.core.working=!0,(i=new window.Worker(this._wrk)).onmessage=e.proxy(function(e){s.call(this,e.data,!0);try{i.terminate(),i=null}catch(e){}this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1},this),a.par?i.postMessage(a):this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1):this._data.core.worker_queue.push([t,n,r,!0])}catch(e){s.call(this,l(a),!1),this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}else s.call(this,l(a),!1)}},_parse_model_from_html:function(n,r,o){o=o?[].concat(o):[],r&&o.unshift(r);var i,a,l,s,c,u=this._model.data,p={id:!1,text:!1,icon:!0,parent:r,parents:o,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(l in this._model.default_state)this._model.default_state.hasOwnProperty(l)&&(p.state[l]=this._model.default_state[l]);if(s=e.vakata.attributes(n,!0),e.each(s,function(t,n){return!(n=e.trim(n)).length||(p.li_attr[t]=n,void("id"===t&&(p.id=n.toString())))}),(s=n.children("a").first()).length&&(s=e.vakata.attributes(s,!0),e.each(s,function(t,n){(n=e.trim(n)).length&&(p.a_attr[t]=n)})),(s=n.children("a").first().length?n.children("a").first().clone():n.clone()).children("ins, i, ul").remove(),s=s.html(),s=e("<div />").html(s),p.text=this.settings.core.force_text?s.text():s.html(),s=n.data(),p.data=s?e.extend(!0,{},s):null,p.state.opened=n.hasClass("jstree-open"),p.state.selected=n.children("a").hasClass("jstree-clicked"),p.state.disabled=n.children("a").hasClass("jstree-disabled"),p.data&&p.data.jstree)for(l in p.data.jstree)p.data.jstree.hasOwnProperty(l)&&(p.state[l]=p.data.jstree[l]);(s=n.children("a").children(".jstree-themeicon")).length&&(p.icon=!s.hasClass("jstree-themeicon-hidden")&&s.attr("rel")),p.state.icon!==t&&(p.icon=p.state.icon),(p.icon===t||null===p.icon||""===p.icon)&&(p.icon=!0),s=n.children("ul").children("li");do{c="j"+this._id+"_"+ ++this._cnt}while(u[c]);return p.id=p.li_attr.id?p.li_attr.id.toString():c,s.length?(s.each(e.proxy(function(t,n){i=this._parse_model_from_html(e(n),p.id,o),a=this._model.data[i],p.children.push(i),a.children_d.length&&(p.children_d=p.children_d.concat(a.children_d))},this)),p.children_d=p.children_d.concat(p.children)):n.hasClass("jstree-closed")&&(p.state.loaded=!1),p.li_attr.class&&(p.li_attr.class=p.li_attr.class.replace("jstree-closed","").replace("jstree-open","")),p.a_attr.class&&(p.a_attr.class=p.a_attr.class.replace("jstree-clicked","").replace("jstree-disabled","")),u[p.id]=p,p.state.selected&&this._data.core.selected.push(p.id),p.id},_parse_model_from_flat_json:function(e,n,r){r=r?r.concat():[],n&&r.unshift(n);var o,i,a,l,s=e.id.toString(),c=this._model.data,u=this._model.default_state,p={id:s,text:e.text||"",icon:e.icon===t||e.icon,parent:n,parents:r,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(o in u)u.hasOwnProperty(o)&&(p.state[o]=u[o]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(p.icon=e.data.jstree.icon),(p.icon===t||null===p.icon||""===p.icon)&&(p.icon=!0),e&&e.data&&(p.data=e.data,e.data.jstree))for(o in e.data.jstree)e.data.jstree.hasOwnProperty(o)&&(p.state[o]=e.data.jstree[o]);if(e&&"object"==typeof e.state)for(o in e.state)e.state.hasOwnProperty(o)&&(p.state[o]=e.state[o]);if(e&&"object"==typeof e.li_attr)for(o in e.li_attr)e.li_attr.hasOwnProperty(o)&&(p.li_attr[o]=e.li_attr[o]);if(p.li_attr.id||(p.li_attr.id=s),e&&"object"==typeof e.a_attr)for(o in e.a_attr)e.a_attr.hasOwnProperty(o)&&(p.a_attr[o]=e.a_attr[o]);for(e&&e.children&&!0===e.children&&(p.state.loaded=!1,p.children=[],p.children_d=[]),c[p.id]=p,o=0,i=p.children.length;i>o;o++)a=this._parse_model_from_flat_json(c[p.children[o]],p.id,r),l=c[a],p.children_d.push(a),l.children_d.length&&(p.children_d=p.children_d.concat(l.children_d));return delete e.data,delete e.children,c[p.id].original=e,p.state.selected&&this._data.core.selected.push(p.id),p.id},_parse_model_from_json:function(e,n,r){r=r?r.concat():[],n&&r.unshift(n);var o,i,a,l,s,c=!1,u=this._model.data,p=this._model.default_state;do{c="j"+this._id+"_"+ ++this._cnt}while(u[c]);for(o in s={id:!1,text:"string"==typeof e?e:"",icon:"object"!=typeof e||e.icon===t||e.icon,parent:n,parents:r,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1},p)p.hasOwnProperty(o)&&(s.state[o]=p[o]);if(e&&e.id&&(s.id=e.id.toString()),e&&e.text&&(s.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(s.icon=e.data.jstree.icon),(s.icon===t||null===s.icon||""===s.icon)&&(s.icon=!0),e&&e.data&&(s.data=e.data,e.data.jstree))for(o in e.data.jstree)e.data.jstree.hasOwnProperty(o)&&(s.state[o]=e.data.jstree[o]);if(e&&"object"==typeof e.state)for(o in e.state)e.state.hasOwnProperty(o)&&(s.state[o]=e.state[o]);if(e&&"object"==typeof e.li_attr)for(o in e.li_attr)e.li_attr.hasOwnProperty(o)&&(s.li_attr[o]=e.li_attr[o]);if(s.li_attr.id&&!s.id&&(s.id=s.li_attr.id.toString()),s.id||(s.id=c),s.li_attr.id||(s.li_attr.id=s.id),e&&"object"==typeof e.a_attr)for(o in e.a_attr)e.a_attr.hasOwnProperty(o)&&(s.a_attr[o]=e.a_attr[o]);if(e&&e.children&&e.children.length){for(o=0,i=e.children.length;i>o;o++)a=this._parse_model_from_json(e.children[o],s.id,r),l=u[a],s.children.push(a),l.children_d.length&&(s.children_d=s.children_d.concat(l.children_d));s.children_d=s.children_d.concat(s.children)}return e&&e.children&&!0===e.children&&(s.state.loaded=!1,s.children=[],s.children_d=[]),delete e.data,delete e.children,s.original=e,u[s.id]=s,s.state.selected&&this._data.core.selected.push(s.id),s.id},_redraw:function(){var t,n,r,o=this._model.force_full_redraw?this._model.data[e.jstree.root].children.concat([]):this._model.changed.concat([]),i=c.createElement("UL"),a=this._data.core.focused;for(n=0,r=o.length;r>n;n++)(t=this.redraw_node(o[n],!0,this._model.force_full_redraw))&&this._model.force_full_redraw&&i.appendChild(t);this._model.force_full_redraw&&(i.className=this.get_container_ul()[0].className,i.setAttribute("role","group"),this.element.empty().append(i)),null!==a&&this.settings.core.restore_focus&&((t=this.get_node(a,!0))&&t.length&&t.children(".jstree-anchor")[0]!==c.activeElement?t.children(".jstree-anchor").focus():this._data.core.focused=null),this._model.force_full_redraw=!1,this._model.changed=[],this.trigger("redraw",{nodes:o})},redraw:function(e){e&&(this._model.force_full_redraw=!0),this._redraw()},draw_children:function(t){var n=this.get_node(t),r=!1,o=!1,i=!1,a=c;if(!n)return!1;if(n.id===e.jstree.root)return this.redraw(!0);if(!(t=this.get_node(t,!0))||!t.length)return!1;if(t.children(".jstree-children").remove(),t=t[0],n.children.length&&n.state.loaded){for((i=a.createElement("UL")).setAttribute("role","group"),i.className="jstree-children",r=0,o=n.children.length;o>r;r++)i.appendChild(this.redraw_node(n.children[r],!0,!0));t.appendChild(i)}},redraw_node:function(t,n,r,o){var i=this.get_node(t),a=!1,l=!1,s=!1,u=!1,p=!1,d=!1,f="",h=c,m=this._model.data,y=!1,b=null,g=0,v=0,_=!1,w=!1;if(!i)return!1;if(i.id===e.jstree.root)return this.redraw(!0);if(n=n||0===i.children.length,t=c.querySelector?this.element[0].querySelector("#"+(-1!=="0123456789".indexOf(i.id[0])?"\\3"+i.id[0]+" "+i.id.substr(1).replace(e.jstree.idregex,"\\$&"):i.id.replace(e.jstree.idregex,"\\$&"))):c.getElementById(i.id))t=e(t),r||((a=t.parent().parent()[0])===this.element[0]&&(a=null),l=t.index()),n||!i.children.length||t.children(".jstree-children").length||(n=!0),n||(s=t.children(".jstree-children")[0]),y=t.children(".jstree-anchor")[0]===c.activeElement,t.remove();else if(n=!0,!r){if(!(null===(a=i.parent!==e.jstree.root?e("#"+i.parent.replace(e.jstree.idregex,"\\$&"),this.element)[0]:null)||a&&m[i.parent].state.opened))return!1;l=e.inArray(i.id,null===a?m[e.jstree.root].children:m[i.parent].children)}for(u in t=this._data.core.node.cloneNode(!0),f="jstree-node ",i.li_attr)if(i.li_attr.hasOwnProperty(u)){if("id"===u)continue;"class"!==u?t.setAttribute(u,i.li_attr[u]):f+=i.li_attr[u]}for(i.a_attr.id||(i.a_attr.id=i.id+"_anchor"),t.setAttribute("aria-selected",!!i.state.selected),t.setAttribute("aria-level",i.parents.length),t.setAttribute("aria-labelledby",i.a_attr.id),i.state.disabled&&t.setAttribute("aria-disabled",!0),u=0,p=i.children.length;p>u;u++)if(!m[i.children[u]].state.hidden){_=!0;break}if(null!==i.parent&&m[i.parent]&&!i.state.hidden&&(u=e.inArray(i.id,m[i.parent].children),w=i.id,-1!==u))for(u++,p=m[i.parent].children.length;p>u&&(m[m[i.parent].children[u]].state.hidden||(w=m[i.parent].children[u]),w===i.id);u++);for(p in i.state.hidden&&(f+=" jstree-hidden"),i.state.loading&&(f+=" jstree-loading"),i.state.loaded&&!_?f+=" jstree-leaf":(f+=i.state.opened&&i.state.loaded?" jstree-open":" jstree-closed",t.setAttribute("aria-expanded",i.state.opened&&i.state.loaded)),w===i.id&&(f+=" jstree-last"),t.id=i.id,t.className=f,f=(i.state.selected?" jstree-clicked":"")+(i.state.disabled?" jstree-disabled":""),i.a_attr)if(i.a_attr.hasOwnProperty(p)){if("href"===p&&"#"===i.a_attr[p])continue;"class"!==p?t.childNodes[1].setAttribute(p,i.a_attr[p]):f+=" "+i.a_attr[p]}if(f.length&&(t.childNodes[1].className="jstree-anchor "+f),(i.icon&&!0!==i.icon||!1===i.icon)&&(!1===i.icon?t.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden":-1===i.icon.indexOf("/")&&-1===i.icon.indexOf(".")?t.childNodes[1].childNodes[0].className+=" "+i.icon+" jstree-themeicon-custom":(t.childNodes[1].childNodes[0].style.backgroundImage='url("'+i.icon+'")',t.childNodes[1].childNodes[0].style.backgroundPosition="center center",t.childNodes[1].childNodes[0].style.backgroundSize="auto",t.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom")),this.settings.core.force_text?t.childNodes[1].appendChild(h.createTextNode(i.text)):t.childNodes[1].innerHTML+=i.text,n&&i.children.length&&(i.state.opened||o)&&i.state.loaded){for((d=h.createElement("UL")).setAttribute("role","group"),d.className="jstree-children",u=0,p=i.children.length;p>u;u++)d.appendChild(this.redraw_node(i.children[u],n,!0));t.appendChild(d)}if(s&&t.appendChild(s),!r){for(a||(a=this.element[0]),u=0,p=a.childNodes.length;p>u;u++)if(a.childNodes[u]&&a.childNodes[u].className&&-1!==a.childNodes[u].className.indexOf("jstree-children")){b=a.childNodes[u];break}b||((b=h.createElement("UL")).setAttribute("role","group"),b.className="jstree-children",a.appendChild(b)),l<(a=b).childNodes.length?a.insertBefore(t,a.childNodes[l]):a.appendChild(t),y&&(g=this.element[0].scrollTop,v=this.element[0].scrollLeft,t.childNodes[1].focus(),this.element[0].scrollTop=g,this.element[0].scrollLeft=v)}return i.state.opened&&!i.state.loaded&&(i.state.opened=!1,setTimeout(e.proxy(function(){this.open_node(i.id,!1,0)},this),0)),t},open_node:function(n,r,o){var i,a,l,s;if(e.isArray(n)){for(n=n.slice(),i=0,a=n.length;a>i;i++)this.open_node(n[i],r,o);return!0}return!(!(n=this.get_node(n))||n.id===e.jstree.root)&&(o=o===t?this.settings.core.animation:o,this.is_closed(n)?this.is_loaded(n)?(l=this.get_node(n,!0),s=this,l.length&&(o&&l.children(".jstree-children").length&&l.children(".jstree-children").stop(!0,!0),n.children.length&&!this._firstChild(l.children(".jstree-children")[0])&&this.draw_children(n),o?(this.trigger("before_open",{node:n}),l.children(".jstree-children").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded",!0).children(".jstree-children").stop(!0,!0).slideDown(o,function(){this.style.display="",s.element&&s.trigger("after_open",{node:n})})):(this.trigger("before_open",{node:n}),l[0].className=l[0].className.replace("jstree-closed","jstree-open"),l[0].setAttribute("aria-expanded",!0))),n.state.opened=!0,r&&r.call(this,n,!0),l.length||this.trigger("before_open",{node:n}),this.trigger("open_node",{node:n}),o&&l.length||this.trigger("after_open",{node:n}),!0):this.is_loading(n)?setTimeout(e.proxy(function(){this.open_node(n,r,o)},this),500):void this.load_node(n,function(e,t){return t?this.open_node(e,r,o):!!r&&r.call(this,e,!1)}):(r&&r.call(this,n,!1),!1))},_open_to:function(t){if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;var n,r,o=t.parents;for(n=0,r=o.length;r>n;n+=1)n!==e.jstree.root&&this.open_node(o[n],!1,0);return e("#"+t.id.replace(e.jstree.idregex,"\\$&"),this.element)},close_node:function(n,r){var o,i,a,l;if(e.isArray(n)){for(n=n.slice(),o=0,i=n.length;i>o;o++)this.close_node(n[o],r);return!0}return!(!(n=this.get_node(n))||n.id===e.jstree.root)&&(!this.is_closed(n)&&(r=r===t?this.settings.core.animation:r,a=this,l=this.get_node(n,!0),n.state.opened=!1,this.trigger("close_node",{node:n}),void(l.length?r?l.children(".jstree-children").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded",!1).children(".jstree-children").stop(!0,!0).slideUp(r,function(){this.style.display="",l.children(".jstree-children").remove(),a.element&&a.trigger("after_close",{node:n})}):(l[0].className=l[0].className.replace("jstree-open","jstree-closed"),l.attr("aria-expanded",!1).children(".jstree-children").remove(),this.trigger("after_close",{node:n})):this.trigger("after_close",{node:n}))))},toggle_node:function(t){var n,r;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;r>n;n++)this.toggle_node(t[n]);return!0}return this.is_closed(t)?this.open_node(t):this.is_open(t)?this.close_node(t):void 0},open_all:function(t,n,r){if(t||(t=e.jstree.root),!(t=this.get_node(t)))return!1;var o,i,a,l=t.id===e.jstree.root?this.get_container_ul():this.get_node(t,!0);if(!l.length){for(o=0,i=t.children_d.length;i>o;o++)this.is_closed(this._model.data[t.children_d[o]])&&(this._model.data[t.children_d[o]].state.opened=!0);return this.trigger("open_all",{node:t})}r=r||l,a=this,(l=this.is_closed(t)?l.find(".jstree-closed").addBack():l.find(".jstree-closed")).each(function(){a.open_node(this,function(e,t){t&&this.is_parent(e)&&this.open_all(e,n,r)},n||0)}),0===r.find(".jstree-closed").length&&this.trigger("open_all",{node:this.get_node(r)})},close_all:function(t,n){if(t||(t=e.jstree.root),!(t=this.get_node(t)))return!1;var r,o,i=t.id===e.jstree.root?this.get_container_ul():this.get_node(t,!0),a=this;for(i.length&&(i=this.is_open(t)?i.find(".jstree-open").addBack():i.find(".jstree-open"),e(i.get().reverse()).each(function(){a.close_node(this,n||0)})),r=0,o=t.children_d.length;o>r;r++)this._model.data[t.children_d[r]].state.opened=!1;this.trigger("close_all",{node:t})},is_disabled:function(e){return(e=this.get_node(e))&&e.state&&e.state.disabled},enable_node:function(t){var n,r;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;r>n;n++)this.enable_node(t[n]);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(t.state.disabled=!1,this.get_node(t,!0).children(".jstree-anchor").removeClass("jstree-disabled").attr("aria-disabled",!1),void this.trigger("enable_node",{node:t}))},disable_node:function(t){var n,r;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;r>n;n++)this.disable_node(t[n]);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(t.state.disabled=!0,this.get_node(t,!0).children(".jstree-anchor").addClass("jstree-disabled").attr("aria-disabled",!0),void this.trigger("disable_node",{node:t}))},is_hidden:function(e){return!0===(e=this.get_node(e)).state.hidden},hide_node:function(t,n){var r,o;if(e.isArray(t)){for(t=t.slice(),r=0,o=t.length;o>r;r++)this.hide_node(t[r],!0);return n||this.redraw(),!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&void(t.state.hidden||(t.state.hidden=!0,this._node_changed(t.parent),n||this.redraw(),this.trigger("hide_node",{node:t})))},show_node:function(t,n){var r,o;if(e.isArray(t)){for(t=t.slice(),r=0,o=t.length;o>r;r++)this.show_node(t[r],!0);return n||this.redraw(),!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&void(t.state.hidden&&(t.state.hidden=!1,this._node_changed(t.parent),n||this.redraw(),this.trigger("show_node",{node:t})))},hide_all:function(t){var n,r=this._model.data,o=[];for(n in r)r.hasOwnProperty(n)&&n!==e.jstree.root&&!r[n].state.hidden&&(r[n].state.hidden=!0,o.push(n));return this._model.force_full_redraw=!0,t||this.redraw(),this.trigger("hide_all",{nodes:o}),o},show_all:function(t){var n,r=this._model.data,o=[];for(n in r)r.hasOwnProperty(n)&&n!==e.jstree.root&&r[n].state.hidden&&(r[n].state.hidden=!1,o.push(n));return this._model.force_full_redraw=!0,t||this.redraw(),this.trigger("show_all",{nodes:o}),o},activate_node:function(e,n){if(this.is_disabled(e))return!1;if(n&&"object"==typeof n||(n={}),this._data.core.last_clicked=this._data.core.last_clicked&&this._data.core.last_clicked.id!==t?this.get_node(this._data.core.last_clicked.id):null,this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected&&(this._data.core.last_clicked=null),!this._data.core.last_clicked&&this._data.core.selected.length&&(this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1])),this.settings.core.multiple&&(n.metaKey||n.ctrlKey||n.shiftKey)&&(!n.shiftKey||this._data.core.last_clicked&&this.get_parent(e)&&this.get_parent(e)===this._data.core.last_clicked.parent))if(n.shiftKey){var r,o,i=this.get_node(e).id,a=this._data.core.last_clicked.id,l=this.get_node(this._data.core.last_clicked.parent).children,s=!1;for(r=0,o=l.length;o>r;r+=1)l[r]===i&&(s=!s),l[r]===a&&(s=!s),this.is_disabled(l[r])||!s&&l[r]!==i&&l[r]!==a?this.deselect_node(l[r],!0,n):this.is_hidden(l[r])||this.select_node(l[r],!0,!1,n);this.trigger("changed",{action:"select_node",node:this.get_node(e),selected:this._data.core.selected,event:n})}else this.is_selected(e)?this.deselect_node(e,!1,n):this.select_node(e,!1,!1,n);else!this.settings.core.multiple&&(n.metaKey||n.ctrlKey||n.shiftKey)&&this.is_selected(e)?this.deselect_node(e,!1,n):(this.deselect_all(!0),this.select_node(e,!1,!1,n),this._data.core.last_clicked=this.get_node(e));this.trigger("activate_node",{node:this.get_node(e),event:n})},hover_node:function(e){if(!(e=this.get_node(e,!0))||!e.length||e.children(".jstree-hovered").length)return!1;var t=this.element.find(".jstree-hovered"),n=this.element;t&&t.length&&this.dehover_node(t),e.children(".jstree-anchor").addClass("jstree-hovered"),this.trigger("hover_node",{node:this.get_node(e)}),setTimeout(function(){n.attr("aria-activedescendant",e[0].id)},0)},dehover_node:function(e){return!!((e=this.get_node(e,!0))&&e.length&&e.children(".jstree-hovered").length)&&(e.children(".jstree-anchor").removeClass("jstree-hovered"),void this.trigger("dehover_node",{node:this.get_node(e)}))},select_node:function(t,n,r,o){var i,a,l;if(e.isArray(t)){for(t=t.slice(),a=0,l=t.length;l>a;a++)this.select_node(t[a],n,r,o);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(i=this.get_node(t,!0),void(t.state.selected||(t.state.selected=!0,this._data.core.selected.push(t.id),r||(i=this._open_to(t)),i&&i.length&&i.attr("aria-selected",!0).children(".jstree-anchor").addClass("jstree-clicked"),this.trigger("select_node",{node:t,selected:this._data.core.selected,event:o}),n||this.trigger("changed",{action:"select_node",node:t,selected:this._data.core.selected,event:o}))))},deselect_node:function(t,n,r){var o,i,a;if(e.isArray(t)){for(t=t.slice(),o=0,i=t.length;i>o;o++)this.deselect_node(t[o],n,r);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(a=this.get_node(t,!0),void(t.state.selected&&(t.state.selected=!1,this._data.core.selected=e.vakata.array_remove_item(this._data.core.selected,t.id),a.length&&a.attr("aria-selected",!1).children(".jstree-anchor").removeClass("jstree-clicked"),this.trigger("deselect_node",{node:t,selected:this._data.core.selected,event:r}),n||this.trigger("changed",{action:"deselect_node",node:t,selected:this._data.core.selected,event:r}))))},select_all:function(t){var n,r,o=this._data.core.selected.concat([]);for(this._data.core.selected=this._model.data[e.jstree.root].children_d.concat(),n=0,r=this._data.core.selected.length;r>n;n++)this._model.data[this._data.core.selected[n]]&&(this._model.data[this._data.core.selected[n]].state.selected=!0);this.redraw(!0),this.trigger("select_all",{selected:this._data.core.selected}),t||this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:o})},deselect_all:function(e){var t,n,r=this._data.core.selected.concat([]);for(t=0,n=this._data.core.selected.length;n>t;t++)this._model.data[this._data.core.selected[t]]&&(this._model.data[this._data.core.selected[t]].state.selected=!1);this._data.core.selected=[],this.element.find(".jstree-clicked").removeClass("jstree-clicked").parent().attr("aria-selected",!1),this.trigger("deselect_all",{selected:this._data.core.selected,node:r}),e||this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:r})},is_selected:function(t){return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&t.state.selected},get_selected:function(t){return t?e.map(this._data.core.selected,e.proxy(function(e){return this.get_node(e)},this)):this._data.core.selected.slice()},get_top_selected:function(t){var n,r,o,i,a=this.get_selected(!0),l={};for(n=0,r=a.length;r>n;n++)l[a[n].id]=a[n];for(n=0,r=a.length;r>n;n++)for(o=0,i=a[n].children_d.length;i>o;o++)l[a[n].children_d[o]]&&delete l[a[n].children_d[o]];for(n in a=[],l)l.hasOwnProperty(n)&&a.push(n);return t?e.map(a,e.proxy(function(e){return this.get_node(e)},this)):a},get_bottom_selected:function(t){var n,r,o=this.get_selected(!0),i=[];for(n=0,r=o.length;r>n;n++)o[n].children.length||i.push(o[n].id);return t?e.map(i,e.proxy(function(e){return this.get_node(e)},this)):i},get_state:function(){var t,n={core:{open:[],loaded:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},selected:[]}};for(t in this._model.data)this._model.data.hasOwnProperty(t)&&t!==e.jstree.root&&(this._model.data[t].state.loaded&&this.settings.core.loaded_state&&n.core.loaded.push(t),this._model.data[t].state.opened&&n.core.open.push(t),this._model.data[t].state.selected&&n.core.selected.push(t));return n},set_state:function(n,r){if(n){if(n.core&&n.core.selected&&n.core.initial_selection===t&&(n.core.initial_selection=this._data.core.selected.concat([]).sort().join(",")),n.core){var o,i;if(n.core.loaded)return this.settings.core.loaded_state&&e.isArray(n.core.loaded)&&n.core.loaded.length?this._load_nodes(n.core.loaded,function(e){delete n.core.loaded,this.set_state(n,r)}):(delete n.core.loaded,this.set_state(n,r)),!1;if(n.core.open)return e.isArray(n.core.open)&&n.core.open.length?this._load_nodes(n.core.open,function(e){this.open_node(e,!1,0),delete n.core.open,this.set_state(n,r)}):(delete n.core.open,this.set_state(n,r)),!1;if(n.core.scroll)return n.core.scroll&&n.core.scroll.left!==t&&this.element.scrollLeft(n.core.scroll.left),n.core.scroll&&n.core.scroll.top!==t&&this.element.scrollTop(n.core.scroll.top),delete n.core.scroll,this.set_state(n,r),!1;if(n.core.selected)return o=this,(n.core.initial_selection===t||n.core.initial_selection===this._data.core.selected.concat([]).sort().join(","))&&(this.deselect_all(),e.each(n.core.selected,function(e,t){o.select_node(t,!1,!0)})),delete n.core.initial_selection,delete n.core.selected,this.set_state(n,r),!1;for(i in n)n.hasOwnProperty(i)&&"core"!==i&&-1===e.inArray(i,this.settings.plugins)&&delete n[i];if(e.isEmptyObject(n.core))return delete n.core,this.set_state(n,r),!1}return!e.isEmptyObject(n)||(n=null,r&&r.call(this),this.trigger("set_state"),!1)}return!1},refresh:function(t,n){this._data.core.state=!0===n?{}:this.get_state(),n&&e.isFunction(n)&&(this._data.core.state=n.call(this,this._data.core.state)),this._cnt=0,this._model.data={},this._model.data[e.jstree.root]={id:e.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this._data.core.selected=[],this._data.core.last_clicked=null,this._data.core.focused=null;var r=this.get_container_ul()[0].className;t||(this.element.html("<ul class='"+r+"' role='group'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='treeitem' id='j"+this._id+"_loading'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading")),this.load_node(e.jstree.root,function(t,n){n&&(this.get_container_ul()[0].className=r,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.set_state(e.extend(!0,{},this._data.core.state),function(){this.trigger("refresh")})),this._data.core.state=null})},refresh_node:function(t){if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;var n=[],r=[],o=this._data.core.selected.concat([]);r.push(t.id),!0===t.state.opened&&n.push(t.id),this.get_node(t,!0).find(".jstree-open").each(function(){r.push(this.id),n.push(this.id)}),this._load_nodes(r,e.proxy(function(e){this.open_node(n,!1,0),this.select_node(o),this.trigger("refresh_node",{node:t,nodes:e})},this),!1,!0)},set_id:function(t,n){if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;var r,o,i=this._model.data,a=t.id;for(n=n.toString(),i[t.parent].children[e.inArray(t.id,i[t.parent].children)]=n,r=0,o=t.parents.length;o>r;r++)i[t.parents[r]].children_d[e.inArray(t.id,i[t.parents[r]].children_d)]=n;for(r=0,o=t.children.length;o>r;r++)i[t.children[r]].parent=n;for(r=0,o=t.children_d.length;o>r;r++)i[t.children_d[r]].parents[e.inArray(t.id,i[t.children_d[r]].parents)]=n;return-1!==(r=e.inArray(t.id,this._data.core.selected))&&(this._data.core.selected[r]=n),(r=this.get_node(t.id,!0))&&(r.attr("id",n),this.element.attr("aria-activedescendant")===t.id&&this.element.attr("aria-activedescendant",n)),delete i[t.id],t.id=n,t.li_attr.id=n,i[n]=t,this.trigger("set_id",{node:t,new:t.id,old:a}),!0},get_text:function(t){return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&t.text},set_text:function(t,n){var r,o;if(e.isArray(t)){for(t=t.slice(),r=0,o=t.length;o>r;r++)this.set_text(t[r],n);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(t.text=n,this.get_node(t,!0).length&&this.redraw_node(t.id),this.trigger("set_text",{obj:t,text:n}),!0)},get_json:function(t,n,r){if(!(t=this.get_node(t||e.jstree.root)))return!1;n&&n.flat&&!r&&(r=[]);var o,i,a={id:t.id,text:t.text,icon:this.get_icon(t),li_attr:e.extend(!0,{},t.li_attr),a_attr:e.extend(!0,{},t.a_attr),state:{},data:(!n||!n.no_data)&&e.extend(!0,e.isArray(t.data)?[]:{},t.data)};if(n&&n.flat?a.parent=t.parent:a.children=[],n&&n.no_state)delete a.state;else for(o in t.state)t.state.hasOwnProperty(o)&&(a.state[o]=t.state[o]);if(n&&n.no_li_attr&&delete a.li_attr,n&&n.no_a_attr&&delete a.a_attr,n&&n.no_id&&(delete a.id,a.li_attr&&a.li_attr.id&&delete a.li_attr.id,a.a_attr&&a.a_attr.id&&delete a.a_attr.id),n&&n.flat&&t.id!==e.jstree.root&&r.push(a),!n||!n.no_children)for(o=0,i=t.children.length;i>o;o++)n&&n.flat?this.get_json(t.children[o],n,r):a.children.push(this.get_json(t.children[o],n));return n&&n.flat?r:t.id===e.jstree.root?a.children:a},create_node:function(n,r,o,i,a){if(null===n&&(n=e.jstree.root),!(n=this.get_node(n)))return!1;if(!(o=o===t?"last":o).toString().match(/^(before|after)$/)&&!a&&!this.is_loaded(n))return this.load_node(n,function(){this.create_node(n,r,o,i,!0)});var l,s,c,u;switch(r||(r={text:this.get_string("New node")}),(r="string"==typeof r?{text:r}:e.extend(!0,{},r)).text===t&&(r.text=this.get_string("New node")),n.id===e.jstree.root&&("before"===o&&(o="first"),"after"===o&&(o="last")),o){case"before":l=this.get_node(n.parent),o=e.inArray(n.id,l.children),n=l;break;case"after":l=this.get_node(n.parent),o=e.inArray(n.id,l.children)+1,n=l;break;case"inside":case"first":o=0;break;case"last":o=n.children.length;break;default:o||(o=0)}if(o>n.children.length&&(o=n.children.length),r.id||(r.id=!0),!this.check("create_node",r,n,o))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(!0===r.id&&delete r.id,!(r=this._parse_model_from_json(r,n.id,n.parents.concat())))return!1;for(l=this.get_node(r),(s=[]).push(r),s=s.concat(l.children_d),this.trigger("model",{nodes:s,parent:n.id}),n.children_d=n.children_d.concat(s),c=0,u=n.parents.length;u>c;c++)this._model.data[n.parents[c]].children_d=this._model.data[n.parents[c]].children_d.concat(s);for(r=l,l=[],c=0,u=n.children.length;u>c;c++)l[c>=o?c+1:c]=n.children[c];return l[o]=r.id,n.children=l,this.redraw_node(n,!0),this.trigger("create_node",{node:this.get_node(r),parent:n.id,position:o}),i&&i.call(this,this.get_node(r)),r.id},rename_node:function(t,n){var r,o,i;if(e.isArray(t)){for(t=t.slice(),r=0,o=t.length;o>r;r++)this.rename_node(t[r],n);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(i=t.text,this.check("rename_node",t,this.get_parent(t),n)?(this.set_text(t,n),this.trigger("rename_node",{node:t,text:n,old:i}),!0):(this.settings.core.error.call(this,this._data.core.last_error),!1))},delete_node:function(t){var n,r,o,i,a,l,s,c,u,p,d,f;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;r>n;n++)this.delete_node(t[n]);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;if(o=this.get_node(t.parent),i=e.inArray(t.id,o.children),p=!1,!this.check("delete_node",t,o,i))return this.settings.core.error.call(this,this._data.core.last_error),!1;for(-1!==i&&(o.children=e.vakata.array_remove(o.children,i)),(a=t.children_d.concat([])).push(t.id),l=0,s=t.parents.length;s>l;l++)this._model.data[t.parents[l]].children_d=e.vakata.array_filter(this._model.data[t.parents[l]].children_d,function(t){return-1===e.inArray(t,a)});for(c=0,u=a.length;u>c;c++)if(this._model.data[a[c]].state.selected){p=!0;break}for(p&&(this._data.core.selected=e.vakata.array_filter(this._data.core.selected,function(t){return-1===e.inArray(t,a)})),this.trigger("delete_node",{node:t,parent:o.id}),p&&this.trigger("changed",{action:"delete_node",node:t,selected:this._data.core.selected,parent:o.id}),c=0,u=a.length;u>c;c++)delete this._model.data[a[c]];return-1!==e.inArray(this._data.core.focused,a)&&(this._data.core.focused=null,d=this.element[0].scrollTop,f=this.element[0].scrollLeft,o.id===e.jstree.root?this._model.data[e.jstree.root].children[0]&&this.get_node(this._model.data[e.jstree.root].children[0],!0).children(".jstree-anchor").focus():this.get_node(o,!0).children(".jstree-anchor").focus(),this.element[0].scrollTop=d,this.element[0].scrollLeft=f),this.redraw_node(o,!0),!0},check:function(t,n,r,o,i){n=n&&n.id?n:this.get_node(n),r=r&&r.id?r:this.get_node(r);var a=t.match(/^move_node|copy_node|create_node$/i)?r:n,l=this.settings.core.check_callback;return"move_node"!==t&&"copy_node"!==t||i&&i.is_multi||n.id!==r.id&&("move_node"!==t||e.inArray(n.id,r.children)!==o)&&-1===e.inArray(r.id,n.children_d)?(a&&a.data&&(a=a.data),a&&a.functions&&(!1===a.functions[t]||!0===a.functions[t])?(!1===a.functions[t]&&(this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+t,data:JSON.stringify({chk:t,pos:o,obj:!(!n||!n.id)&&n.id,par:!(!r||!r.id)&&r.id})}),a.functions[t]):!(!1===l||e.isFunction(l)&&!1===l.call(this,t,n,r,o,i)||l&&!1===l[t])||(this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+t,data:JSON.stringify({chk:t,pos:o,obj:!(!n||!n.id)&&n.id,par:!(!r||!r.id)&&r.id})},!1)):(this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:t,pos:o,obj:!(!n||!n.id)&&n.id,par:!(!r||!r.id)&&r.id})},!1)},last_error:function(){return this._data.core.last_error},move_node:function(n,r,o,i,a,l,s){var c,u,p,d,f,h,m,y,b,g,v,_,w,O;if(r=this.get_node(r),o=o===t?0:o,!r)return!1;if(!o.toString().match(/^(before|after)$/)&&!a&&!this.is_loaded(r))return this.load_node(r,function(){this.move_node(n,r,o,i,!0,!1,s)});if(e.isArray(n)){if(1!==n.length){for(c=0,u=n.length;u>c;c++)(b=this.move_node(n[c],r,o,i,a,!1,s))&&(r=b,o="after");return this.redraw(),!0}n=n[0]}if(!(n=n&&n.id?n:this.get_node(n))||n.id===e.jstree.root)return!1;if(p=(n.parent||e.jstree.root).toString(),f=o.toString().match(/^(before|after)$/)&&r.id!==e.jstree.root?this.get_node(r.parent):r,h=s||(this._model.data[n.id]?this:e.jstree.reference(n.id)),m=!h||!h._id||this._id!==h._id,d=h&&h._id&&p&&h._model.data[p]&&h._model.data[p].children?e.inArray(n.id,h._model.data[p].children):-1,h&&h._id&&(n=h._model.data[n.id]),m)return!!(b=this.copy_node(n,r,o,i,a,!1,s))&&(h&&h.delete_node(n),b);switch(r.id===e.jstree.root&&("before"===o&&(o="first"),"after"===o&&(o="last")),o){case"before":o=e.inArray(r.id,f.children);break;case"after":o=e.inArray(r.id,f.children)+1;break;case"inside":case"first":o=0;break;case"last":o=f.children.length;break;default:o||(o=0)}if(o>f.children.length&&(o=f.children.length),!this.check("move_node",n,f,o,{core:!0,origin:s,is_multi:h&&h._id&&h._id!==this._id,is_foreign:!h||!h._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(n.parent===f.id){for(y=f.children.concat(),-1!==(b=e.inArray(n.id,y))&&(y=e.vakata.array_remove(y,b),o>b&&o--),b=[],g=0,v=y.length;v>g;g++)b[g>=o?g+1:g]=y[g];b[o]=n.id,f.children=b,this._node_changed(f.id),this.redraw(f.id===e.jstree.root)}else{for((b=n.children_d.concat()).push(n.id),g=0,v=n.parents.length;v>g;g++){for(y=[],O=h._model.data[n.parents[g]].children_d,_=0,w=O.length;w>_;_++)-1===e.inArray(O[_],b)&&y.push(O[_]);h._model.data[n.parents[g]].children_d=y}for(h._model.data[p].children=e.vakata.array_remove_item(h._model.data[p].children,n.id),g=0,v=f.parents.length;v>g;g++)this._model.data[f.parents[g]].children_d=this._model.data[f.parents[g]].children_d.concat(b);for(y=[],g=0,v=f.children.length;v>g;g++)y[g>=o?g+1:g]=f.children[g];for(y[o]=n.id,f.children=y,f.children_d.push(n.id),f.children_d=f.children_d.concat(n.children_d),n.parent=f.id,(b=f.parents.concat()).unshift(f.id),O=n.parents.length,n.parents=b,b=b.concat(),g=0,v=n.children_d.length;v>g;g++)this._model.data[n.children_d[g]].parents=this._model.data[n.children_d[g]].parents.slice(0,-1*O),Array.prototype.push.apply(this._model.data[n.children_d[g]].parents,b);(p===e.jstree.root||f.id===e.jstree.root)&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||(this._node_changed(p),this._node_changed(f.id)),l||this.redraw()}return i&&i.call(this,n,f,o),this.trigger("move_node",{node:n,parent:f.id,position:o,old_parent:p,old_position:d,is_multi:h&&h._id&&h._id!==this._id,is_foreign:!h||!h._id,old_instance:h,new_instance:this}),n.id},copy_node:function(n,r,o,i,a,l,s){var c,u,p,d,f,h,m,y,b,g;if(r=this.get_node(r),o=o===t?0:o,!r)return!1;if(!o.toString().match(/^(before|after)$/)&&!a&&!this.is_loaded(r))return this.load_node(r,function(){this.copy_node(n,r,o,i,!0,!1,s)});if(e.isArray(n)){if(1!==n.length){for(c=0,u=n.length;u>c;c++)(d=this.copy_node(n[c],r,o,i,a,!0,s))&&(r=d,o="after");return this.redraw(),!0}n=n[0]}if(!(n=n&&n.id?n:this.get_node(n))||n.id===e.jstree.root)return!1;switch(y=(n.parent||e.jstree.root).toString(),b=o.toString().match(/^(before|after)$/)&&r.id!==e.jstree.root?this.get_node(r.parent):r,g=s||(this._model.data[n.id]?this:e.jstree.reference(n.id)),!g||!g._id||this._id!==g._id,g&&g._id&&(n=g._model.data[n.id]),r.id===e.jstree.root&&("before"===o&&(o="first"),"after"===o&&(o="last")),o){case"before":o=e.inArray(r.id,b.children);break;case"after":o=e.inArray(r.id,b.children)+1;break;case"inside":case"first":o=0;break;case"last":o=b.children.length;break;default:o||(o=0)}if(o>b.children.length&&(o=b.children.length),!this.check("copy_node",n,b,o,{core:!0,origin:s,is_multi:g&&g._id&&g._id!==this._id,is_foreign:!g||!g._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(!(m=g?g.get_json(n,{no_id:!0,no_data:!0,no_state:!0}):n))return!1;if(!0===m.id&&delete m.id,!(m=this._parse_model_from_json(m,b.id,b.parents.concat())))return!1;for(d=this.get_node(m),n&&n.state&&!1===n.state.loaded&&(d.state.loaded=!1),(p=[]).push(m),p=p.concat(d.children_d),this.trigger("model",{nodes:p,parent:b.id}),f=0,h=b.parents.length;h>f;f++)this._model.data[b.parents[f]].children_d=this._model.data[b.parents[f]].children_d.concat(p);for(p=[],f=0,h=b.children.length;h>f;f++)p[f>=o?f+1:f]=b.children[f];return p[o]=d.id,b.children=p,b.children_d.push(d.id),b.children_d=b.children_d.concat(d.children_d),b.id===e.jstree.root&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||this._node_changed(b.id),l||this.redraw(b.id===e.jstree.root),i&&i.call(this,d,b,o),this.trigger("copy_node",{node:d,original:n,parent:b.id,position:o,old_parent:y,old_position:g&&g._id&&y&&g._model.data[y]&&g._model.data[y].children?e.inArray(n.id,g._model.data[y].children):-1,is_multi:g&&g._id&&g._id!==this._id,is_foreign:!g||!g._id,old_instance:g,new_instance:this}),d.id},cut:function(t){if(t||(t=this._data.core.selected.concat()),e.isArray(t)||(t=[t]),!t.length)return!1;var n,r,l,s=[];for(r=0,l=t.length;l>r;r++)(n=this.get_node(t[r]))&&n.id&&n.id!==e.jstree.root&&s.push(n);return!!s.length&&(o=s,a=this,i="move_node",void this.trigger("cut",{node:t}))},copy:function(t){if(t||(t=this._data.core.selected.concat()),e.isArray(t)||(t=[t]),!t.length)return!1;var n,r,l,s=[];for(r=0,l=t.length;l>r;r++)(n=this.get_node(t[r]))&&n.id&&n.id!==e.jstree.root&&s.push(n);return!!s.length&&(o=s,a=this,i="copy_node",void this.trigger("copy",{node:t}))},get_buffer:function(){return{mode:i,node:o,inst:a}},can_paste:function(){return!1!==i&&!1!==o},paste:function(e,t){return!!((e=this.get_node(e))&&i&&i.match(/^(copy_node|move_node)$/)&&o)&&(this[i](o,e,t,!1,!1,!1,a)&&this.trigger("paste",{parent:e.id,node:o,mode:i}),o=!1,i=!1,void(a=!1))},clear_buffer:function(){o=!1,i=!1,a=!1,this.trigger("clear_buffer")},edit:function(t,n,r){var o,i,a,l,s,u,p,d,f,h=!1;return!!(t=this.get_node(t))&&(this.check("edit",t,this.get_parent(t))?(f=t,n="string"==typeof n?n:t.text,this.set_text(t,""),t=this._open_to(t),f.text=n,o=this._data.core.rtl,i=this.element.width(),this._data.core.focused=f.id,a=t.children(".jstree-anchor").focus(),l=e("<span>"),s=n,u=e("<div />",{css:{position:"absolute",top:"-200px",left:o?"0px":"-1000px",visibility:"hidden"}}).appendTo(c.body),p=e("<input />",{value:s,class:"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:this._data.core.li_height+"px",lineHeight:this._data.core.li_height+"px",width:"150px"},blur:e.proxy(function(n){n.stopImmediatePropagation(),n.preventDefault();var o,i=l.children(".jstree-rename-input"),c=i.val(),d=this.settings.core.force_text;""===c&&(c=s),u.remove(),l.replaceWith(a),l.remove(),s=d?s:e("<div></div>").append(e.parseHTML(s)).html(),t=this.get_node(t),this.set_text(t,s),(o=!!this.rename_node(t,d?e("<div></div>").text(c).text():e("<div></div>").append(e.parseHTML(c)).html()))||this.set_text(t,s),this._data.core.focused=f.id,setTimeout(e.proxy(function(){var e=this.get_node(f.id,!0);e.length&&(this._data.core.focused=f.id,e.children(".jstree-anchor").focus())},this),0),r&&r.call(this,f,o,h),p=null},this),keydown:function(e){var t=e.which;27===t&&(h=!0,this.value=s),(27===t||13===t||37===t||38===t||39===t||40===t||32===t)&&e.stopImmediatePropagation(),(27===t||13===t)&&(e.preventDefault(),this.blur())},click:function(e){e.stopImmediatePropagation()},mousedown:function(e){e.stopImmediatePropagation()},keyup:function(e){p.width(Math.min(u.text("pW"+this.value).width(),i))},keypress:function(e){return 13!==e.which&&void 0}}),d={fontFamily:a.css("fontFamily")||"",fontSize:a.css("fontSize")||"",fontWeight:a.css("fontWeight")||"",fontStyle:a.css("fontStyle")||"",fontStretch:a.css("fontStretch")||"",fontVariant:a.css("fontVariant")||"",letterSpacing:a.css("letterSpacing")||"",wordSpacing:a.css("wordSpacing")||""},l.attr("class",a.attr("class")).append(a.contents().clone()).append(p),a.replaceWith(l),u.css(d),p.css(d).width(Math.min(u.text("pW"+p[0].value).width(),i))[0].select(),void e(c).one("mousedown.jstree touchstart.jstree dnd_start.vakata",function(t){p&&t.target!==p&&e(p).blur()})):(this.settings.core.error.call(this,this._data.core.last_error),!1))},set_theme:function(t,n){if(!t)return!1;if(!0===n){var r=this.settings.core.themes.dir;r||(r=e.jstree.path+"/themes"),n=r+"/"+t+"/style.css"}n&&-1===e.inArray(n,l)&&(e("head").append('<link rel="stylesheet" href="'+n+'" type="text/css" />'),l.push(n)),this._data.core.themes.name&&this.element.removeClass("jstree-"+this._data.core.themes.name),this._data.core.themes.name=t,this.element.addClass("jstree-"+t),this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+t+"-responsive"),this.trigger("set_theme",{theme:t})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(e){this._data.core.themes.variant&&this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant),this._data.core.themes.variant=e,e&&this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=!0,this.get_container_ul().addClass("jstree-striped"),this.trigger("show_stripes")},hide_stripes:function(){this._data.core.themes.stripes=!1,this.get_container_ul().removeClass("jstree-striped"),this.trigger("hide_stripes")},toggle_stripes:function(){this._data.core.themes.stripes?this.hide_stripes():this.show_stripes()},show_dots:function(){this._data.core.themes.dots=!0,this.get_container_ul().removeClass("jstree-no-dots"),this.trigger("show_dots")},hide_dots:function(){this._data.core.themes.dots=!1,this.get_container_ul().addClass("jstree-no-dots"),this.trigger("hide_dots")},toggle_dots:function(){this._data.core.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this._data.core.themes.icons=!0,this.get_container_ul().removeClass("jstree-no-icons"),this.trigger("show_icons")},hide_icons:function(){this._data.core.themes.icons=!1,this.get_container_ul().addClass("jstree-no-icons"),this.trigger("hide_icons")},toggle_icons:function(){this._data.core.themes.icons?this.hide_icons():this.show_icons()},show_ellipsis:function(){this._data.core.themes.ellipsis=!0,this.get_container_ul().addClass("jstree-ellipsis"),this.trigger("show_ellipsis")},hide_ellipsis:function(){this._data.core.themes.ellipsis=!1,this.get_container_ul().removeClass("jstree-ellipsis"),this.trigger("hide_ellipsis")},toggle_ellipsis:function(){this._data.core.themes.ellipsis?this.hide_ellipsis():this.show_ellipsis()},set_icon:function(n,r){var o,i,a,l;if(e.isArray(n)){for(n=n.slice(),o=0,i=n.length;i>o;o++)this.set_icon(n[o],r);return!0}return!(!(n=this.get_node(n))||n.id===e.jstree.root)&&(l=n.icon,n.icon=!0===r||null===r||r===t||""===r||r,a=this.get_node(n,!0).children(".jstree-anchor").children(".jstree-themeicon"),!1===r?(a.removeClass("jstree-themeicon-custom "+l).css("background","").removeAttr("rel"),this.hide_icon(n)):!0===r||null===r||r===t||""===r?(a.removeClass("jstree-themeicon-custom "+l).css("background","").removeAttr("rel"),!1===l&&this.show_icon(n)):-1===r.indexOf("/")&&-1===r.indexOf(".")?(a.removeClass(l).css("background",""),a.addClass(r+" jstree-themeicon-custom").attr("rel",r),!1===l&&this.show_icon(n)):(a.removeClass(l).css("background",""),a.addClass("jstree-themeicon-custom").css("background","url('"+r+"') center center no-repeat").attr("rel",r),!1===l&&this.show_icon(n)),!0)},get_icon:function(t){return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&t.icon},hide_icon:function(t){var n,r;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;r>n;n++)this.hide_icon(t[n]);return!0}return!(!(t=this.get_node(t))||t===e.jstree.root)&&(t.icon=!1,this.get_node(t,!0).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden"),!0)},show_icon:function(t){var n,r,o;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;r>n;n++)this.show_icon(t[n]);return!0}return!(!(t=this.get_node(t))||t===e.jstree.root)&&(o=this.get_node(t,!0),t.icon=!o.length||o.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"),t.icon||(t.icon=!0),o.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden"),!0)}},e.vakata={},e.vakata.attributes=function(t,n){t=e(t)[0];var r=n?{}:[];return t&&t.attributes&&e.each(t.attributes,function(t,o){-1===e.inArray(o.name.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])&&null!==o.value&&""!==e.trim(o.value)&&(n?r[o.name]=o.value:r.push(o.name))}),r},e.vakata.array_unique=function(e){var n,r,o=[],i={};for(n=0,r=e.length;r>n;n++)i[e[n]]===t&&(o.push(e[n]),i[e[n]]=!0);return o},e.vakata.array_remove=function(e,t){return e.splice(t,1),e},e.vakata.array_remove_item=function(t,n){var r=e.inArray(n,t);return-1!==r?e.vakata.array_remove(t,r):t},e.vakata.array_filter=function(e,t,n,r,o){if(e.filter)return e.filter(t,n);for(o in r=[],e)~~o+""==o+""&&o>=0&&t.call(n,e[o],+o,e)&&r.push(e[o]);return r},e.jstree.plugins.changed=function(e,t){var n=[];this.trigger=function(e,r){var o,i;if(r||(r={}),"changed"===e.replace(".jstree","")){r.changed={selected:[],deselected:[]};var a={};for(o=0,i=n.length;i>o;o++)a[n[o]]=1;for(o=0,i=r.selected.length;i>o;o++)a[r.selected[o]]?a[r.selected[o]]=2:r.changed.selected.push(r.selected[o]);for(o=0,i=n.length;i>o;o++)1===a[n[o]]&&r.changed.deselected.push(n[o]);n=r.selected.slice()}t.trigger.call(this,e,r)},this.refresh=function(e,r){return n=[],t.refresh.apply(this,arguments)}};var u,p,d=c.createElement("I");d.className="jstree-icon jstree-checkbox",d.setAttribute("role","presentation"),e.jstree.defaults.checkbox={visible:!0,three_state:!0,whole_node:!0,keep_selected_style:!0,cascade:"",tie_selection:!0,cascade_to_disabled:!0,cascade_to_hidden:!0},e.jstree.plugins.checkbox=function(n,r){this.bind=function(){r.bind.call(this),this._data.checkbox.uto=!1,this._data.checkbox.selected=[],this.settings.checkbox.three_state&&(this.settings.checkbox.cascade="up+down+undetermined"),this.element.on("init.jstree",e.proxy(function(){this._data.checkbox.visible=this.settings.checkbox.visible,this.settings.checkbox.keep_selected_style||this.element.addClass("jstree-checkbox-no-clicked"),this.settings.checkbox.tie_selection&&this.element.addClass("jstree-checkbox-selection")},this)).on("loading.jstree",e.proxy(function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()},this)),-1!==this.settings.checkbox.cascade.indexOf("undetermined")&&this.element.on("changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",e.proxy(function(){this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(e.proxy(this._undetermined,this),50)},this)),this.settings.checkbox.tie_selection||this.element.on("model.jstree",e.proxy(function(e,t){var n,r,o=this._model.data,i=(o[t.parent],t.nodes);for(n=0,r=i.length;r>n;n++)o[i[n]].state.checked=o[i[n]].state.checked||o[i[n]].original&&o[i[n]].original.state&&o[i[n]].original.state.checked,o[i[n]].state.checked&&this._data.checkbox.selected.push(i[n])},this)),(-1!==this.settings.checkbox.cascade.indexOf("up")||-1!==this.settings.checkbox.cascade.indexOf("down"))&&this.element.on("model.jstree",e.proxy(function(t,n){var r,o,i,a,l,s,c=this._model.data,u=c[n.parent],p=n.nodes,d=[],f=this.settings.checkbox.cascade,h=this.settings.checkbox.tie_selection;if(-1!==f.indexOf("down"))if(u.state[h?"selected":"checked"]){for(o=0,i=p.length;i>o;o++)c[p[o]].state[h?"selected":"checked"]=!0;this._data[h?"core":"checkbox"].selected=this._data[h?"core":"checkbox"].selected.concat(p)}else for(o=0,i=p.length;i>o;o++)if(c[p[o]].state[h?"selected":"checked"]){for(a=0,l=c[p[o]].children_d.length;l>a;a++)c[c[p[o]].children_d[a]].state[h?"selected":"checked"]=!0;this._data[h?"core":"checkbox"].selected=this._data[h?"core":"checkbox"].selected.concat(c[p[o]].children_d)}if(-1!==f.indexOf("up")){for(o=0,i=u.children_d.length;i>o;o++)c[u.children_d[o]].children.length||d.push(c[u.children_d[o]].parent);for(d=e.vakata.array_unique(d),a=0,l=d.length;l>a;a++)for(u=c[d[a]];u&&u.id!==e.jstree.root;){for(r=0,o=0,i=u.children.length;i>o;o++)r+=c[u.children[o]].state[h?"selected":"checked"];if(r!==i)break;u.state[h?"selected":"checked"]=!0,this._data[h?"core":"checkbox"].selected.push(u.id),(s=this.get_node(u,!0))&&s.length&&s.attr("aria-selected",!0).children(".jstree-anchor").addClass(h?"jstree-clicked":"jstree-checked"),u=this.get_node(u.parent)}}this._data[h?"core":"checkbox"].selected=e.vakata.array_unique(this._data[h?"core":"checkbox"].selected)},this)).on(this.settings.checkbox.tie_selection?"select_node.jstree":"check_node.jstree",e.proxy(function(t,n){var r,o,i,a,l=n.node,s=this._model.data,c=this.get_node(l.parent),u=this.settings.checkbox.cascade,p=this.settings.checkbox.tie_selection,d={},f=this._data[p?"core":"checkbox"].selected;for(r=0,o=f.length;o>r;r++)d[f[r]]=!0;if(-1!==u.indexOf("down")){var h=this._cascade_new_checked_state(l.id,!0),m=l.children_d.concat(l.id);for(r=0,o=m.length;o>r;r++)h.indexOf(m[r])>-1?d[m[r]]=!0:delete d[m[r]]}if(-1!==u.indexOf("up"))for(;c&&c.id!==e.jstree.root;){for(i=0,r=0,o=c.children.length;o>r;r++)i+=s[c.children[r]].state[p?"selected":"checked"];if(i!==o)break;c.state[p?"selected":"checked"]=!0,d[c.id]=!0,(a=this.get_node(c,!0))&&a.length&&a.attr("aria-selected",!0).children(".jstree-anchor").addClass(p?"jstree-clicked":"jstree-checked"),c=this.get_node(c.parent)}for(r in f=[],d)d.hasOwnProperty(r)&&f.push(r);this._data[p?"core":"checkbox"].selected=f},this)).on(this.settings.checkbox.tie_selection?"deselect_all.jstree":"uncheck_all.jstree",e.proxy(function(t,n){var r,o,i,a=this.get_node(e.jstree.root),l=this._model.data;for(r=0,o=a.children_d.length;o>r;r++)(i=l[a.children_d[r]])&&i.original&&i.original.state&&i.original.state.undetermined&&(i.original.state.undetermined=!1)},this)).on(this.settings.checkbox.tie_selection?"deselect_node.jstree":"uncheck_node.jstree",e.proxy(function(e,t){var n,r,o,i=t.node,a=(this.get_node(i,!0),this.settings.checkbox.cascade),l=this.settings.checkbox.tie_selection,s=this._data[l?"core":"checkbox"].selected,c=i.children_d.concat(i.id);if(-1!==a.indexOf("down")){var u=this._cascade_new_checked_state(i.id,!1);s=s.filter(function(e){return-1===c.indexOf(e)||u.indexOf(e)>-1})}if(-1!==a.indexOf("up")&&-1===s.indexOf(i.id)){for(n=0,r=i.parents.length;r>n;n++)(o=this._model.data[i.parents[n]]).state[l?"selected":"checked"]=!1,o&&o.original&&o.original.state&&o.original.state.undetermined&&(o.original.state.undetermined=!1),(o=this.get_node(i.parents[n],!0))&&o.length&&o.attr("aria-selected",!1).children(".jstree-anchor").removeClass(l?"jstree-clicked":"jstree-checked");s=s.filter(function(e){return-1===i.parents.indexOf(e)})}this._data[l?"core":"checkbox"].selected=s},this)),-1!==this.settings.checkbox.cascade.indexOf("up")&&this.element.on("delete_node.jstree",e.proxy(function(t,n){for(var r,o,i,a,l=this.get_node(n.parent),s=this._model.data,c=this.settings.checkbox.tie_selection;l&&l.id!==e.jstree.root&&!l.state[c?"selected":"checked"];){for(i=0,r=0,o=l.children.length;o>r;r++)i+=s[l.children[r]].state[c?"selected":"checked"];if(!(o>0&&i===o))break;l.state[c?"selected":"checked"]=!0,this._data[c?"core":"checkbox"].selected.push(l.id),(a=this.get_node(l,!0))&&a.length&&a.attr("aria-selected",!0).children(".jstree-anchor").addClass(c?"jstree-clicked":"jstree-checked"),l=this.get_node(l.parent)}},this)).on("move_node.jstree",e.proxy(function(t,n){var r,o,i,a,l,s=n.is_multi,c=n.old_parent,u=this.get_node(n.parent),p=this._model.data,d=this.settings.checkbox.tie_selection;if(!s)for(r=this.get_node(c);r&&r.id!==e.jstree.root&&!r.state[d?"selected":"checked"];){for(o=0,i=0,a=r.children.length;a>i;i++)o+=p[r.children[i]].state[d?"selected":"checked"];if(!(a>0&&o===a))break;r.state[d?"selected":"checked"]=!0,this._data[d?"core":"checkbox"].selected.push(r.id),(l=this.get_node(r,!0))&&l.length&&l.attr("aria-selected",!0).children(".jstree-anchor").addClass(d?"jstree-clicked":"jstree-checked"),r=this.get_node(r.parent)}for(r=u;r&&r.id!==e.jstree.root;){for(o=0,i=0,a=r.children.length;a>i;i++)o+=p[r.children[i]].state[d?"selected":"checked"];if(o===a)r.state[d?"selected":"checked"]||(r.state[d?"selected":"checked"]=!0,this._data[d?"core":"checkbox"].selected.push(r.id),(l=this.get_node(r,!0))&&l.length&&l.attr("aria-selected",!0).children(".jstree-anchor").addClass(d?"jstree-clicked":"jstree-checked"));else{if(!r.state[d?"selected":"checked"])break;r.state[d?"selected":"checked"]=!1,this._data[d?"core":"checkbox"].selected=e.vakata.array_remove_item(this._data[d?"core":"checkbox"].selected,r.id),(l=this.get_node(r,!0))&&l.length&&l.attr("aria-selected",!1).children(".jstree-anchor").removeClass(d?"jstree-clicked":"jstree-checked")}r=this.get_node(r.parent)}},this))},this.get_undetermined=function(n){if(-1===this.settings.checkbox.cascade.indexOf("undetermined"))return[];var r,o,i,a,l={},s=this._model.data,c=this.settings.checkbox.tie_selection,u=this._data[c?"core":"checkbox"].selected,p=[],d=this,f=[];for(r=0,o=u.length;o>r;r++)if(s[u[r]]&&s[u[r]].parents)for(i=0,a=s[u[r]].parents.length;a>i&&l[s[u[r]].parents[i]]===t;i++)s[u[r]].parents[i]!==e.jstree.root&&(l[s[u[r]].parents[i]]=!0,p.push(s[u[r]].parents[i]));for(this.element.find(".jstree-closed").not(":has(.jstree-children)").each(function(){var n,c=d.get_node(this);if(c)if(c.state.loaded){for(r=0,o=c.children_d.length;o>r;r++)if(!(n=s[c.children_d[r]]).state.loaded&&n.original&&n.original.state&&n.original.state.undetermined&&!0===n.original.state.undetermined)for(l[n.id]===t&&n.id!==e.jstree.root&&(l[n.id]=!0,p.push(n.id)),i=0,a=n.parents.length;a>i;i++)l[n.parents[i]]===t&&n.parents[i]!==e.jstree.root&&(l[n.parents[i]]=!0,p.push(n.parents[i]))}else if(c.original&&c.original.state&&c.original.state.undetermined&&!0===c.original.state.undetermined)for(l[c.id]===t&&c.id!==e.jstree.root&&(l[c.id]=!0,p.push(c.id)),i=0,a=c.parents.length;a>i;i++)l[c.parents[i]]===t&&c.parents[i]!==e.jstree.root&&(l[c.parents[i]]=!0,p.push(c.parents[i]))}),r=0,o=p.length;o>r;r++)s[p[r]].state[c?"selected":"checked"]||f.push(n?s[p[r]]:p[r]);return f},this._undetermined=function(){if(null!==this.element){var e,t,n,r=this.get_undetermined(!1);for(this.element.find(".jstree-undetermined").removeClass("jstree-undetermined"),e=0,t=r.length;t>e;e++)(n=this.get_node(r[e],!0))&&n.length&&n.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined")}},this.redraw_node=function(t,n,o,i){if(t=r.redraw_node.apply(this,arguments)){var a,l,s=null,c=null;for(a=0,l=t.childNodes.length;l>a;a++)if(t.childNodes[a]&&t.childNodes[a].className&&-1!==t.childNodes[a].className.indexOf("jstree-anchor")){s=t.childNodes[a];break}s&&(!this.settings.checkbox.tie_selection&&this._model.data[t.id].state.checked&&(s.className+=" jstree-checked"),c=d.cloneNode(!1),this._model.data[t.id].state.checkbox_disabled&&(c.className+=" jstree-checkbox-disabled"),s.insertBefore(c,s.childNodes[0]))}return o||-1===this.settings.checkbox.cascade.indexOf("undetermined")||(this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(e.proxy(this._undetermined,this),50)),t},this.show_checkboxes=function(){this._data.core.themes.checkboxes=!0,this.get_container_ul().removeClass("jstree-no-checkboxes")},this.hide_checkboxes=function(){this._data.core.themes.checkboxes=!1,this.get_container_ul().addClass("jstree-no-checkboxes")},this.toggle_checkboxes=function(){this._data.core.themes.checkboxes?this.hide_checkboxes():this.show_checkboxes()},this.is_undetermined=function(t){t=this.get_node(t);var n,r,o=this.settings.checkbox.cascade,i=this.settings.checkbox.tie_selection,a=this._data[i?"core":"checkbox"].selected,l=this._model.data;if(!t||!0===t.state[i?"selected":"checked"]||-1===o.indexOf("undetermined")||-1===o.indexOf("down")&&-1===o.indexOf("up"))return!1;if(!t.state.loaded&&!0===t.original.state.undetermined)return!0;for(n=0,r=t.children_d.length;r>n;n++)if(-1!==e.inArray(t.children_d[n],a)||!l[t.children_d[n]].state.loaded&&l[t.children_d[n]].original.state.undetermined)return!0;return!1},this.disable_checkbox=function(t){var n,r,o;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;r>n;n++)this.disable_checkbox(t[n]);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(o=this.get_node(t,!0),void(t.state.checkbox_disabled||(t.state.checkbox_disabled=!0,o&&o.length&&o.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-checkbox-disabled"),this.trigger("disable_checkbox",{node:t}))))},this.enable_checkbox=function(t){var n,r,o;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;r>n;n++)this.enable_checkbox(t[n]);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(o=this.get_node(t,!0),void(t.state.checkbox_disabled&&(t.state.checkbox_disabled=!1,o&&o.length&&o.children(".jstree-anchor").children(".jstree-checkbox").removeClass("jstree-checkbox-disabled"),this.trigger("enable_checkbox",{node:t}))))},this.activate_node=function(t,n){return!e(n.target).hasClass("jstree-checkbox-disabled")&&(this.settings.checkbox.tie_selection&&(this.settings.checkbox.whole_node||e(n.target).hasClass("jstree-checkbox"))&&(n.ctrlKey=!0),this.settings.checkbox.tie_selection||!this.settings.checkbox.whole_node&&!e(n.target).hasClass("jstree-checkbox")?r.activate_node.call(this,t,n):!this.is_disabled(t)&&(this.is_checked(t)?this.uncheck_node(t,n):this.check_node(t,n),void this.trigger("activate_node",{node:this.get_node(t)})))},this._cascade_new_checked_state=function(e,t){var n,r,o,i=this.settings.checkbox.tie_selection,a=this._model.data[e],l=[],s=[];if(!this.settings.checkbox.cascade_to_disabled&&a.state.disabled||!this.settings.checkbox.cascade_to_hidden&&a.state.hidden)o=this.get_checked_descendants(e),a.state[i?"selected":"checked"]&&o.push(a.id),l=l.concat(o);else{if(a.children)for(n=0,r=a.children.length;r>n;n++){var c=a.children[n];o=this._cascade_new_checked_state(c,t),l=l.concat(o),o.indexOf(c)>-1&&s.push(c)}var u=this.get_node(a,!0),p=s.length>0&&s.length<a.children.length;a.original&&a.original.state&&a.original.state.undetermined&&(a.original.state.undetermined=p),p?(a.state[i?"selected":"checked"]=!1,u.attr("aria-selected",!1).children(".jstree-anchor").removeClass(i?"jstree-clicked":"jstree-checked")):t&&s.length===a.children.length?(a.state[i?"selected":"checked"]=t,l.push(a.id),u.attr("aria-selected",!0).children(".jstree-anchor").addClass(i?"jstree-clicked":"jstree-checked")):(a.state[i?"selected":"checked"]=!1,u.attr("aria-selected",!1).children(".jstree-anchor").removeClass(i?"jstree-clicked":"jstree-checked"))}return l},this.get_checked_descendants=function(e){var t=this,n=t.settings.checkbox.tie_selection,r=t._model.data[e];return r.children_d.filter(function(e){return t._model.data[e].state[n?"selected":"checked"]})},this.check_node=function(t,n){if(this.settings.checkbox.tie_selection)return this.select_node(t,!1,!0,n);var r,o,i;if(e.isArray(t)){for(t=t.slice(),o=0,i=t.length;i>o;o++)this.check_node(t[o],n);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(r=this.get_node(t,!0),void(t.state.checked||(t.state.checked=!0,this._data.checkbox.selected.push(t.id),r&&r.length&&r.children(".jstree-anchor").addClass("jstree-checked"),this.trigger("check_node",{node:t,selected:this._data.checkbox.selected,event:n}))))},this.uncheck_node=function(t,n){if(this.settings.checkbox.tie_selection)return this.deselect_node(t,!1,n);var r,o,i;if(e.isArray(t)){for(t=t.slice(),r=0,o=t.length;o>r;r++)this.uncheck_node(t[r],n);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(i=this.get_node(t,!0),void(t.state.checked&&(t.state.checked=!1,this._data.checkbox.selected=e.vakata.array_remove_item(this._data.checkbox.selected,t.id),i.length&&i.children(".jstree-anchor").removeClass("jstree-checked"),this.trigger("uncheck_node",{node:t,selected:this._data.checkbox.selected,event:n}))))},this.check_all=function(){if(this.settings.checkbox.tie_selection)return this.select_all();var t,n;this._data.checkbox.selected.concat([]);for(this._data.checkbox.selected=this._model.data[e.jstree.root].children_d.concat(),t=0,n=this._data.checkbox.selected.length;n>t;t++)this._model.data[this._data.checkbox.selected[t]]&&(this._model.data[this._data.checkbox.selected[t]].state.checked=!0);this.redraw(!0),this.trigger("check_all",{selected:this._data.checkbox.selected})},this.uncheck_all=function(){if(this.settings.checkbox.tie_selection)return this.deselect_all();var e,t,n=this._data.checkbox.selected.concat([]);for(e=0,t=this._data.checkbox.selected.length;t>e;e++)this._model.data[this._data.checkbox.selected[e]]&&(this._model.data[this._data.checkbox.selected[e]].state.checked=!1);this._data.checkbox.selected=[],this.element.find(".jstree-checked").removeClass("jstree-checked"),this.trigger("uncheck_all",{selected:this._data.checkbox.selected,node:n})},this.is_checked=function(t){return this.settings.checkbox.tie_selection?this.is_selected(t):!(!(t=this.get_node(t))||t.id===e.jstree.root)&&t.state.checked},this.get_checked=function(t){return this.settings.checkbox.tie_selection?this.get_selected(t):t?e.map(this._data.checkbox.selected,e.proxy(function(e){return this.get_node(e)},this)):this._data.checkbox.selected},this.get_top_checked=function(t){if(this.settings.checkbox.tie_selection)return this.get_top_selected(t);var n,r,o,i,a=this.get_checked(!0),l={};for(n=0,r=a.length;r>n;n++)l[a[n].id]=a[n];for(n=0,r=a.length;r>n;n++)for(o=0,i=a[n].children_d.length;i>o;o++)l[a[n].children_d[o]]&&delete l[a[n].children_d[o]];for(n in a=[],l)l.hasOwnProperty(n)&&a.push(n);return t?e.map(a,e.proxy(function(e){return this.get_node(e)},this)):a},this.get_bottom_checked=function(t){if(this.settings.checkbox.tie_selection)return this.get_bottom_selected(t);var n,r,o=this.get_checked(!0),i=[];for(n=0,r=o.length;r>n;n++)o[n].children.length||i.push(o[n].id);return t?e.map(i,e.proxy(function(e){return this.get_node(e)},this)):i},this.load_node=function(t,n){var o,i,a;if(!e.isArray(t)&&!this.settings.checkbox.tie_selection&&((a=this.get_node(t))&&a.state.loaded))for(o=0,i=a.children_d.length;i>o;o++)this._model.data[a.children_d[o]].state.checked&&(!0,this._data.checkbox.selected=e.vakata.array_remove_item(this._data.checkbox.selected,a.children_d[o]));return r.load_node.apply(this,arguments)},this.get_state=function(){var e=r.get_state.apply(this,arguments);return this.settings.checkbox.tie_selection?e:(e.checkbox=this._data.checkbox.selected.slice(),e)},this.set_state=function(t,n){var o=r.set_state.apply(this,arguments);if(o&&t.checkbox){if(!this.settings.checkbox.tie_selection){this.uncheck_all();var i=this;e.each(t.checkbox,function(e,t){i.check_node(t)})}return delete t.checkbox,this.set_state(t,n),!1}return o},this.refresh=function(e,t){return this.settings.checkbox.tie_selection&&(this._data.checkbox.selected=[]),r.refresh.apply(this,arguments)}},e.jstree.defaults.conditionalselect=function(){return!0},e.jstree.plugins.conditionalselect=function(e,t){this.activate_node=function(e,n){return this.settings.conditionalselect.call(this,this.get_node(e),n)?t.activate_node.call(this,e,n):void 0}},e.jstree.defaults.contextmenu={select_node:!0,show_at_node:!0,items:function(t,n){return{create:{separator_before:!1,separator_after:!0,_disabled:!1,label:"Create",action:function(t){var n=e.jstree.reference(t.reference),r=n.get_node(t.reference);n.create_node(r,{},"last",function(e){try{n.edit(e)}catch(t){setTimeout(function(){n.edit(e)},0)}})}},rename:{separator_before:!1,separator_after:!1,_disabled:!1,label:"Rename",action:function(t){var n=e.jstree.reference(t.reference),r=n.get_node(t.reference);n.edit(r)}},remove:{separator_before:!1,icon:!1,separator_after:!1,_disabled:!1,label:"Delete",action:function(t){var n=e.jstree.reference(t.reference),r=n.get_node(t.reference);n.is_selected(r)?n.delete_node(n.get_selected()):n.delete_node(r)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(t){var n=e.jstree.reference(t.reference),r=n.get_node(t.reference);n.is_selected(r)?n.cut(n.get_top_selected()):n.cut(r)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(t){var n=e.jstree.reference(t.reference),r=n.get_node(t.reference);n.is_selected(r)?n.copy(n.get_top_selected()):n.copy(r)}},paste:{separator_before:!1,icon:!1,_disabled:function(t){return!e.jstree.reference(t.reference).can_paste()},separator_after:!1,label:"Paste",action:function(t){var n=e.jstree.reference(t.reference),r=n.get_node(t.reference);n.paste(r)}}}}}}},e.jstree.plugins.contextmenu=function(n,r){this.bind=function(){r.bind.call(this);var t,n,o=0,i=null;this.element.on("init.jstree loading.jstree ready.jstree",e.proxy(function(){this.get_container_ul().addClass("jstree-contextmenu")},this)).on("contextmenu.jstree",".jstree-anchor",e.proxy(function(e,t){"input"!==e.target.tagName.toLowerCase()&&(e.preventDefault(),o=e.ctrlKey?+new Date:0,(t||i)&&(o=+new Date+1e4),i&&clearTimeout(i),this.is_loading(e.currentTarget)||this.show_contextmenu(e.currentTarget,e.pageX,e.pageY,e))},this)).on("click.jstree",".jstree-anchor",e.proxy(function(t){this._data.contextmenu.visible&&(!o||+new Date-o>250)&&e.vakata.context.hide(),o=0},this)).on("touchstart.jstree",".jstree-anchor",function(r){r.originalEvent&&r.originalEvent.changedTouches&&r.originalEvent.changedTouches[0]&&(t=r.originalEvent.changedTouches[0].clientX,n=r.originalEvent.changedTouches[0].clientY,i=setTimeout(function(){e(r.currentTarget).trigger("contextmenu",!0)},750))}).on("touchmove.vakata.jstree",function(r){i&&r.originalEvent&&r.originalEvent.changedTouches&&r.originalEvent.changedTouches[0]&&(Math.abs(t-r.originalEvent.changedTouches[0].clientX)>10||Math.abs(n-r.originalEvent.changedTouches[0].clientY)>10)&&(clearTimeout(i),e.vakata.context.hide())}).on("touchend.vakata.jstree",function(e){i&&clearTimeout(i)}),e(c).on("context_hide.vakata.jstree",e.proxy(function(t,n){this._data.contextmenu.visible=!1,e(n.reference).removeClass("jstree-context")},this))},this.teardown=function(){this._data.contextmenu.visible&&e.vakata.context.hide(),r.teardown.call(this)},this.show_contextmenu=function(n,r,o,i){if(!(n=this.get_node(n))||n.id===e.jstree.root)return!1;var a=this.settings.contextmenu,l=this.get_node(n,!0),s=l.children(".jstree-anchor"),c=!1,u=!1;(a.show_at_node||r===t||o===t)&&(c=s.offset(),r=c.left,o=c.top+this._data.core.li_height),this.settings.contextmenu.select_node&&!this.is_selected(n)&&this.activate_node(n,i),u=a.items,e.isFunction(u)&&(u=u.call(this,n,e.proxy(function(e){this._show_contextmenu(n,r,o,e)},this))),e.isPlainObject(u)&&this._show_contextmenu(n,r,o,u)},this._show_contextmenu=function(t,n,r,o){var i=this.get_node(t,!0),a=i.children(".jstree-anchor");e(c).one("context_show.vakata.jstree",e.proxy(function(t,n){var r="jstree-contextmenu jstree-"+this.get_theme()+"-contextmenu";e(n.element).addClass(r),a.addClass("jstree-context")},this)),this._data.contextmenu.visible=!0,e.vakata.context.show(a,{x:n,y:r},o),this.trigger("show_contextmenu",{node:t,x:n,y:r})}},function(e){var t=!1,n={element:!1,reference:!1,position_x:0,position_y:0,items:[],html:"",is_visible:!1};e.vakata.context={settings:{hide_onmouseleave:0,icons:!0},_trigger:function(t){e(c).triggerHandler("context_"+t+".vakata",{reference:n.reference,element:n.element,position:{x:n.position_x,y:n.position_y}})},_execute:function(t){return!(!(t=n.items[t])||t._disabled&&(!e.isFunction(t._disabled)||t._disabled({item:t,reference:n.reference,element:n.element}))||!t.action)&&t.action.call(null,{item:t,reference:n.reference,element:n.element,position:{x:n.position_x,y:n.position_y}})},_parse:function(t,r){if(!t)return!1;r||(n.html="",n.items=[]);var o,i="",a=!1;return r&&(i+="<ul>"),e.each(t,function(t,r){return!r||(n.items.push(r),!a&&r.separator_before&&(i+="<li class='vakata-context-separator'><a href='#' "+(e.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>"),a=!1,i+="<li class='"+(r._class||"")+(!0===r._disabled||e.isFunction(r._disabled)&&r._disabled({item:r,reference:n.reference,element:n.element})?" vakata-contextmenu-disabled ":"")+"' "+(r.shortcut?" data-shortcut='"+r.shortcut+"' ":"")+">",i+="<a href='#' rel='"+(n.items.length-1)+"' "+(r.title?"title='"+r.title+"'":"")+">",e.vakata.context.settings.icons&&(i+="<i ",r.icon&&(i+=-1!==r.icon.indexOf("/")||-1!==r.icon.indexOf(".")?" style='background:url(\""+r.icon+"\") center center no-repeat' ":" class='"+r.icon+"' "),i+="></i><span class='vakata-contextmenu-sep'>&#160;</span>"),i+=(e.isFunction(r.label)?r.label({item:t,reference:n.reference,element:n.element}):r.label)+(r.shortcut?' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-'+r.shortcut+'">'+(r.shortcut_label||"")+"</span>":"")+"</a>",r.submenu&&((o=e.vakata.context._parse(r.submenu,!0))&&(i+=o)),i+="</li>",void(r.separator_after&&(i+="<li class='vakata-context-separator'><a href='#' "+(e.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>",a=!0)))}),i=i.replace(/<li class\='vakata-context-separator'\><\/li\>$/,""),r&&(i+="</ul>"),r||(n.html=i,e.vakata.context._trigger("parse")),i.length>10&&i},_show_submenu:function(n){if((n=e(n)).length&&n.children("ul").length){var r=n.children("ul"),o=n.offset().left,i=o+n.outerWidth(),a=n.offset().top,l=r.width(),s=r.height(),c=e(window).width()+e(window).scrollLeft(),u=e(window).height()+e(window).scrollTop();t?n[i-(l+10+n.outerWidth())<0?"addClass":"removeClass"]("vakata-context-left"):n[i+l>c&&o>c-i?"addClass":"removeClass"]("vakata-context-right"),a+s+10>u&&r.css("bottom","-1px"),n.hasClass("vakata-context-right")?l>o&&r.css("margin-right",o-l):l>c-i&&r.css("margin-left",c-i-l),r.show()}},show:function(r,o,i){var a,l,s,u,p,d,f,h;switch(n.element&&n.element.length&&n.element.width(""),!0){case!o&&!r:return!1;case!!o&&!!r:n.reference=r,n.position_x=o.x,n.position_y=o.y;break;case!o&&!!r:n.reference=r,a=r.offset(),n.position_x=a.left+r.outerHeight(),n.position_y=a.top;break;case!!o&&!r:n.position_x=o.x,n.position_y=o.y}r&&!i&&e(r).data("vakata_contextmenu")&&(i=e(r).data("vakata_contextmenu")),e.vakata.context._parse(i)&&n.element.html(n.html),n.items.length&&(n.element.appendTo(c.body),l=n.element,s=n.position_x,u=n.position_y,p=l.width(),d=l.height(),f=e(window).width()+e(window).scrollLeft(),h=e(window).height()+e(window).scrollTop(),t&&((s-=l.outerWidth()-e(r).outerWidth())<e(window).scrollLeft()+20&&(s=e(window).scrollLeft()+20)),s+p+20>f&&(s=f-(p+20)),u+d+20>h&&(u=h-(d+20)),n.element.css({left:s,top:u}).show().find("a").first().focus().parent().addClass("vakata-context-hover"),n.is_visible=!0,e.vakata.context._trigger("show"))},hide:function(){n.is_visible&&(n.element.hide().find("ul").hide().end().find(":focus").blur().end().detach(),n.is_visible=!1,e.vakata.context._trigger("hide"))}},e(function(){t="rtl"===e(c.body).css("direction");var r=!1;n.element=e("<ul class='vakata-context'></ul>"),n.element.on("mouseenter","li",function(t){t.stopImmediatePropagation(),e.contains(this,t.relatedTarget)||(r&&clearTimeout(r),n.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end(),e(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context","li").addBack().addClass("vakata-context-hover"),e.vakata.context._show_submenu(this))}).on("mouseleave","li",function(t){e.contains(this,t.relatedTarget)||e(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover")}).on("mouseleave",function(t){e(this).find(".vakata-context-hover").removeClass("vakata-context-hover"),e.vakata.context.settings.hide_onmouseleave&&(r=setTimeout(function(){e.vakata.context.hide()},e.vakata.context.settings.hide_onmouseleave))}).on("click","a",function(t){t.preventDefault(),e(this).blur().parent().hasClass("vakata-context-disabled")||!1===e.vakata.context._execute(e(this).attr("rel"))||e.vakata.context.hide()}).on("keydown","a",function(t){var r=null;switch(t.which){case 13:case 32:t.type="click",t.preventDefault(),e(t.currentTarget).trigger(t);break;case 37:n.is_visible&&(n.element.find(".vakata-context-hover").last().closest("li").first().find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 38:n.is_visible&&((r=n.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first()).length||(r=n.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last()),r.addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 39:n.is_visible&&(n.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 40:n.is_visible&&((r=n.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first()).length||(r=n.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first()),r.addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 27:e.vakata.context.hide(),t.preventDefault()}}).on("keydown",function(e){e.preventDefault();var t=n.element.find(".vakata-contextmenu-shortcut-"+e.which).parent();t.parent().not(".vakata-context-disabled")&&t.click()}),e(c).on("mousedown.vakata.jstree",function(t){n.is_visible&&n.element[0]!==t.target&&!e.contains(n.element[0],t.target)&&e.vakata.context.hide()}).on("context_show.vakata.jstree",function(e,r){n.element.find("li:has(ul)").children("a").addClass("vakata-context-parent"),t&&n.element.addClass("vakata-context-rtl").css("direction","rtl"),n.element.find("ul").hide().end()})})}(e),e.jstree.defaults.dnd={copy:!0,open_timeout:500,is_draggable:!0,check_while_dragging:!0,always_copy:!1,inside_pos:0,drag_selection:!0,touch:!0,large_drop_target:!1,large_drag_target:!1,use_html5:!1},e.jstree.plugins.dnd=function(t,n){this.init=function(e,t){n.init.call(this,e,t),this.settings.dnd.use_html5=this.settings.dnd.use_html5&&"draggable"in c.createElement("span")},this.bind=function(){n.bind.call(this),this.element.on(this.settings.dnd.use_html5?"dragstart.jstree":"mousedown.jstree touchstart.jstree",this.settings.dnd.large_drag_target?".jstree-node":".jstree-anchor",e.proxy(function(t){if(this.settings.dnd.large_drag_target&&e(t.target).closest(".jstree-node")[0]!==t.currentTarget)return!0;if("touchstart"===t.type&&(!this.settings.dnd.touch||"selected"===this.settings.dnd.touch&&!e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").hasClass("jstree-clicked")))return!0;var n=this.get_node(t.target),r=this.is_selected(n)&&this.settings.dnd.drag_selection?this.get_top_selected().length:1,o=r>1?r+" "+this.get_string("nodes"):this.get_text(t.currentTarget);if(this.settings.core.force_text&&(o=e.vakata.html.escape(o)),n&&n.id&&n.id!==e.jstree.root&&(1===t.which||"touchstart"===t.type||"dragstart"===t.type)&&(!0===this.settings.dnd.is_draggable||e.isFunction(this.settings.dnd.is_draggable)&&this.settings.dnd.is_draggable.call(this,r>1?this.get_top_selected(!0):[n],t))){if(u={jstree:!0,origin:this,obj:this.get_node(n,!0),nodes:r>1?this.get_top_selected():[n.id]},p=t.currentTarget,!this.settings.dnd.use_html5)return this.element.trigger("mousedown.jstree"),e.vakata.dnd.start(t,u,'<div id="jstree-dnd" class="jstree-'+this.get_theme()+" jstree-"+this.get_theme()+"-"+this.get_theme_variant()+" "+(this.settings.core.themes.responsive?" jstree-dnd-responsive":"")+'"><i class="jstree-icon jstree-er"></i>'+o+'<ins class="jstree-copy" style="display:none;">+</ins></div>');e.vakata.dnd._trigger("start",t,{helper:e(),element:p,data:u})}},this)),this.settings.dnd.use_html5&&this.element.on("dragover.jstree",function(t){return t.preventDefault(),e.vakata.dnd._trigger("move",t,{helper:e(),element:p,data:u}),!1}).on("drop.jstree",e.proxy(function(t){return t.preventDefault(),e.vakata.dnd._trigger("stop",t,{helper:e(),element:p,data:u}),!1},this))},this.redraw_node=function(e,t,r,o){if((e=n.redraw_node.apply(this,arguments))&&this.settings.dnd.use_html5)if(this.settings.dnd.large_drag_target)e.setAttribute("draggable",!0);else{var i,a,l=null;for(i=0,a=e.childNodes.length;a>i;i++)if(e.childNodes[i]&&e.childNodes[i].className&&-1!==e.childNodes[i].className.indexOf("jstree-anchor")){l=e.childNodes[i];break}l&&l.setAttribute("draggable",!0)}return e}},e(function(){var n=!1,r=!1,o=!1,i=!1,a=e('<div id="jstree-marker">&#160;</div>').hide();e(c).on("dragover.vakata.jstree",function(t){p&&e.vakata.dnd._trigger("move",t,{helper:e(),element:p,data:u})}).on("drop.vakata.jstree",function(t){p&&(e.vakata.dnd._trigger("stop",t,{helper:e(),element:p,data:u}),p=null,u=null)}).on("dnd_start.vakata.jstree",function(e,t){n=!1,o=!1,t&&t.data&&t.data.jstree&&a.appendTo(c.body)}).on("dnd_move.vakata.jstree",function(l,s){var c=s.event.target!==o.target;if(i&&(!s.event||"dragover"!==s.event.type||c)&&clearTimeout(i),s&&s.data&&s.data.jstree&&(!s.event.target.id||"jstree-marker"!==s.event.target.id)){o=s.event;var u,p,d,f,h,m,y,b,g,v,_,w,O,S,E,k,C=e.jstree.reference(s.event.target),P=!1,T=!1,x=!1;if(C&&C._data&&C._data.dnd)if(a.attr("class","jstree-"+C.get_theme()+(C.settings.core.themes.responsive?" jstree-dnd-responsive":"")),E=s.data.origin&&(s.data.origin.settings.dnd.always_copy||s.data.origin.settings.dnd.copy&&(s.event.metaKey||s.event.ctrlKey)),s.helper.children().attr("class","jstree-"+C.get_theme()+" jstree-"+C.get_theme()+"-"+C.get_theme_variant()+" "+(C.settings.core.themes.responsive?" jstree-dnd-responsive":"")).find(".jstree-copy").first()[E?"show":"hide"](),s.event.target!==C.element[0]&&s.event.target!==C.get_container_ul()[0]||0!==C.get_container_ul().children().length){if((P=C.settings.dnd.large_drop_target?e(s.event.target).closest(".jstree-node").children(".jstree-anchor"):e(s.event.target).closest(".jstree-anchor"))&&P.length&&P.parent().is(".jstree-closed, .jstree-open, .jstree-leaf")&&(T=P.offset(),x=(s.event.pageY!==t?s.event.pageY:s.event.originalEvent.pageY)-T.top,d=P.outerHeight(),m=d/3>x?["b","i","a"]:x>d-d/3?["a","i","b"]:x>d/2?["i","a","b"]:["i","b","a"],e.each(m,function(t,o){switch(o){case"b":u=T.left-6,p=T.top,f=C.get_parent(P),h=P.parent().index();break;case"i":O=C.settings.dnd.inside_pos,S=C.get_node(P.parent()),u=T.left-2,p=T.top+d/2+1,f=S.id,h="first"===O?0:"last"===O?S.children.length:Math.min(O,S.children.length);break;case"a":u=T.left-6,p=T.top+d,f=C.get_parent(P),h=P.parent().index()+1}for(y=!0,b=0,g=s.data.nodes.length;g>b;b++)if(v=s.data.origin&&(s.data.origin.settings.dnd.always_copy||s.data.origin.settings.dnd.copy&&(s.event.metaKey||s.event.ctrlKey))?"copy_node":"move_node",_=h,"move_node"===v&&"a"===o&&s.data.origin&&s.data.origin===C&&f===C.get_parent(s.data.nodes[b])&&(w=C.get_node(f),_>e.inArray(s.data.nodes[b],w.children)&&(_-=1)),!(y=y&&(C&&C.settings&&C.settings.dnd&&!1===C.settings.dnd.check_while_dragging||C.check(v,s.data.origin&&s.data.origin!==C?s.data.origin.get_node(s.data.nodes[b]):s.data.nodes[b],f,_,{dnd:!0,ref:C.get_node(P.parent()),pos:o,origin:s.data.origin,is_multi:s.data.origin&&s.data.origin!==C,is_foreign:!s.data.origin})))){C&&C.last_error&&(r=C.last_error());break}return"i"===o&&P.parent().is(".jstree-closed")&&C.settings.dnd.open_timeout&&(!s.event||"dragover"!==s.event.type||c)&&(i&&clearTimeout(i),i=setTimeout(function(e,t){return function(){e.open_node(t)}}(C,P),C.settings.dnd.open_timeout)),y?((k=C.get_node(f,!0)).hasClass(".jstree-dnd-parent")||(e(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),k.addClass("jstree-dnd-parent")),n={ins:C,par:f,pos:"i"!==o||"last"!==O||0!==h||C.is_loaded(S)?h:"last"},a.css({left:u+"px",top:p+"px"}).show(),s.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),s.event.originalEvent&&s.event.originalEvent.dataTransfer&&(s.event.originalEvent.dataTransfer.dropEffect=E?"copy":"move"),r={},m=!0,!1):void 0}),!0===m))return}else{for(y=!0,b=0,g=s.data.nodes.length;g>b&&(y=y&&C.check(s.data.origin&&(s.data.origin.settings.dnd.always_copy||s.data.origin.settings.dnd.copy&&(s.event.metaKey||s.event.ctrlKey))?"copy_node":"move_node",s.data.origin&&s.data.origin!==C?s.data.origin.get_node(s.data.nodes[b]):s.data.nodes[b],e.jstree.root,"last",{dnd:!0,ref:C.get_node(e.jstree.root),pos:"i",origin:s.data.origin,is_multi:s.data.origin&&s.data.origin!==C,is_foreign:!s.data.origin}));b++);if(y)return n={ins:C,par:e.jstree.root,pos:"last"},a.hide(),s.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),void(s.event.originalEvent&&s.event.originalEvent.dataTransfer&&(s.event.originalEvent.dataTransfer.dropEffect=E?"copy":"move"))}e(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),n=!1,s.helper.find(".jstree-icon").removeClass("jstree-ok").addClass("jstree-er"),s.event.originalEvent&&s.event.originalEvent.dataTransfer,a.hide()}}).on("dnd_scroll.vakata.jstree",function(e,t){t&&t.data&&t.data.jstree&&(a.hide(),n=!1,o=!1,t.helper.find(".jstree-icon").first().removeClass("jstree-ok").addClass("jstree-er"))}).on("dnd_stop.vakata.jstree",function(t,l){if(e(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),i&&clearTimeout(i),l&&l.data&&l.data.jstree){a.hide().detach();var s,c,u=[];if(n){for(s=0,c=l.data.nodes.length;c>s;s++)u[s]=l.data.origin?l.data.origin.get_node(l.data.nodes[s]):l.data.nodes[s];n.ins[l.data.origin&&(l.data.origin.settings.dnd.always_copy||l.data.origin.settings.dnd.copy&&(l.event.metaKey||l.event.ctrlKey))?"copy_node":"move_node"](u,n.par,n.pos,!1,!1,!1,l.data.origin)}else(s=e(l.event.target).closest(".jstree")).length&&r&&r.error&&"check"===r.error&&((s=s.jstree(!0))&&s.settings.core.error.call(this,r));o=!1,n=!1}}).on("keyup.jstree keydown.jstree",function(t,l){(l=e.vakata.dnd._get())&&l.data&&l.data.jstree&&("keyup"===t.type&&27===t.which?(i&&clearTimeout(i),n=!1,r=!1,o=!1,i=!1,a.hide().detach(),e.vakata.dnd._clean()):(l.helper.find(".jstree-copy").first()[l.data.origin&&(l.data.origin.settings.dnd.always_copy||l.data.origin.settings.dnd.copy&&(t.metaKey||t.ctrlKey))?"show":"hide"](),o&&(o.metaKey=t.metaKey,o.ctrlKey=t.ctrlKey,e.vakata.dnd._trigger("move",o))))})}),function(e){e.vakata.html={div:e("<div />"),escape:function(t){return e.vakata.html.div.text(t).html()},strip:function(t){return e.vakata.html.div.empty().append(e.parseHTML(t)).text()}};var n={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1};e.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,helper_left:5,helper_top:10,threshold:5,threshold_touch:10},_trigger:function(n,r,o){o===t&&(o=e.vakata.dnd._get()),o.event=r,e(c).triggerHandler("dnd_"+n+".vakata",o)},_get:function(){return{data:n.data,element:n.element,helper:n.helper}},_clean:function(){n.helper&&n.helper.remove(),n.scroll_i&&(clearInterval(n.scroll_i),n.scroll_i=!1),n={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1},e(c).off("mousemove.vakata.jstree touchmove.vakata.jstree",e.vakata.dnd.drag),e(c).off("mouseup.vakata.jstree touchend.vakata.jstree",e.vakata.dnd.stop)},_scroll:function(t){if(!n.scroll_e||!n.scroll_l&&!n.scroll_t)return n.scroll_i&&(clearInterval(n.scroll_i),n.scroll_i=!1),!1;if(!n.scroll_i)return n.scroll_i=setInterval(e.vakata.dnd._scroll,100),!1;if(!0===t)return!1;var r=n.scroll_e.scrollTop(),o=n.scroll_e.scrollLeft();n.scroll_e.scrollTop(r+n.scroll_t*e.vakata.dnd.settings.scroll_speed),n.scroll_e.scrollLeft(o+n.scroll_l*e.vakata.dnd.settings.scroll_speed),(r!==n.scroll_e.scrollTop()||o!==n.scroll_e.scrollLeft())&&e.vakata.dnd._trigger("scroll",n.scroll_e)},start:function(t,r,o){"touchstart"===t.type&&t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0]&&(t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,t.target=c.elementFromPoint(t.originalEvent.changedTouches[0].pageX-window.pageXOffset,t.originalEvent.changedTouches[0].pageY-window.pageYOffset)),n.is_drag&&e.vakata.dnd.stop({});try{t.currentTarget.unselectable="on",t.currentTarget.onselectstart=function(){return!1},t.currentTarget.style&&(t.currentTarget.style.touchAction="none",t.currentTarget.style.msTouchAction="none",t.currentTarget.style.MozUserSelect="none")}catch(e){}return n.init_x=t.pageX,n.init_y=t.pageY,n.data=r,n.is_down=!0,n.element=t.currentTarget,n.target=t.target,n.is_touch="touchstart"===t.type,!1!==o&&(n.helper=e("<div id='vakata-dnd'></div>").html(o).css({display:"block",margin:"0",padding:"0",position:"absolute",top:"-2000px",lineHeight:"16px",zIndex:"10000"})),e(c).on("mousemove.vakata.jstree touchmove.vakata.jstree",e.vakata.dnd.drag),e(c).on("mouseup.vakata.jstree touchend.vakata.jstree",e.vakata.dnd.stop),!1},drag:function(t){if("touchmove"===t.type&&t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0]&&(t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,t.target=c.elementFromPoint(t.originalEvent.changedTouches[0].pageX-window.pageXOffset,t.originalEvent.changedTouches[0].pageY-window.pageYOffset)),n.is_down){if(!n.is_drag){if(!(Math.abs(t.pageX-n.init_x)>(n.is_touch?e.vakata.dnd.settings.threshold_touch:e.vakata.dnd.settings.threshold)||Math.abs(t.pageY-n.init_y)>(n.is_touch?e.vakata.dnd.settings.threshold_touch:e.vakata.dnd.settings.threshold)))return;n.helper&&(n.helper.appendTo(c.body),n.helper_w=n.helper.outerWidth()),n.is_drag=!0,e(n.target).one("click.vakata",!1),e.vakata.dnd._trigger("start",t)}var r=!1,o=!1,i=!1,a=!1,l=!1,s=!1,u=!1,p=!1,d=!1,f=!1;return n.scroll_t=0,n.scroll_l=0,n.scroll_e=!1,e(e(t.target).parentsUntil("body").addBack().get().reverse()).filter(function(){return/^auto|scroll$/.test(e(this).css("overflow"))&&(this.scrollHeight>this.offsetHeight||this.scrollWidth>this.offsetWidth)}).each(function(){var r=e(this),o=r.offset();return this.scrollHeight>this.offsetHeight&&(o.top+r.height()-t.pageY<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_t=1),t.pageY-o.top<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_t=-1)),this.scrollWidth>this.offsetWidth&&(o.left+r.width()-t.pageX<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_l=1),t.pageX-o.left<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_l=-1)),n.scroll_t||n.scroll_l?(n.scroll_e=e(this),!1):void 0}),n.scroll_e||(r=e(c),o=e(window),i=r.height(),a=o.height(),l=r.width(),s=o.width(),u=r.scrollTop(),p=r.scrollLeft(),i>a&&t.pageY-u<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_t=-1),i>a&&a-(t.pageY-u)<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_t=1),l>s&&t.pageX-p<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_l=-1),l>s&&s-(t.pageX-p)<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_l=1),(n.scroll_t||n.scroll_l)&&(n.scroll_e=r)),n.scroll_e&&e.vakata.dnd._scroll(!0),n.helper&&(d=parseInt(t.pageY+e.vakata.dnd.settings.helper_top,10),f=parseInt(t.pageX+e.vakata.dnd.settings.helper_left,10),i&&d+25>i&&(d=i-50),l&&f+n.helper_w>l&&(f=l-(n.helper_w+2)),n.helper.css({left:f+"px",top:d+"px"})),e.vakata.dnd._trigger("move",t),!1}},stop:function(t){if("touchend"===t.type&&t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0]&&(t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,t.target=c.elementFromPoint(t.originalEvent.changedTouches[0].pageX-window.pageXOffset,t.originalEvent.changedTouches[0].pageY-window.pageYOffset)),n.is_drag)t.target!==n.target&&e(n.target).off("click.vakata"),e.vakata.dnd._trigger("stop",t);else if("touchend"===t.type&&t.target===n.target){var r=setTimeout(function(){e(t.target).click()},100);e(t.target).one("click",function(){r&&clearTimeout(r)})}return e.vakata.dnd._clean(),!1}}}(e),e.jstree.defaults.massload=null,e.jstree.plugins.massload=function(t,n){this.init=function(e,t){this._data.massload={},n.init.call(this,e,t)},this._load_nodes=function(t,r,o,i){var a,l,s,c=this.settings.massload,u=(JSON.stringify(t),[]),p=this._model.data;if(!o){for(a=0,l=t.length;l>a;a++)(!p[t[a]]||!p[t[a]].state.loaded&&!p[t[a]].state.failed||i)&&(u.push(t[a]),(s=this.get_node(t[a],!0))&&s.length&&s.addClass("jstree-loading").attr("aria-busy",!0));if(this._data.massload={},u.length){if(e.isFunction(c))return c.call(this,u,e.proxy(function(e){var a,l;if(e)for(a in e)e.hasOwnProperty(a)&&(this._data.massload[a]=e[a]);for(a=0,l=t.length;l>a;a++)(s=this.get_node(t[a],!0))&&s.length&&s.removeClass("jstree-loading").attr("aria-busy",!1);n._load_nodes.call(this,t,r,o,i)},this));if("object"==typeof c&&c&&c.url)return c=e.extend(!0,{},c),e.isFunction(c.url)&&(c.url=c.url.call(this,u)),e.isFunction(c.data)&&(c.data=c.data.call(this,u)),e.ajax(c).done(e.proxy(function(e,a,l){var c,u;if(e)for(c in e)e.hasOwnProperty(c)&&(this._data.massload[c]=e[c]);for(c=0,u=t.length;u>c;c++)(s=this.get_node(t[c],!0))&&s.length&&s.removeClass("jstree-loading").attr("aria-busy",!1);n._load_nodes.call(this,t,r,o,i)},this)).fail(e.proxy(function(e){n._load_nodes.call(this,t,r,o,i)},this))}}return n._load_nodes.call(this,t,r,o,i)},this._load_node=function(t,r){var o,i=this._data.massload[t.id],a=null;return i?(a=this["string"==typeof i?"_append_html_data":"_append_json_data"](t,"string"==typeof i?e(e.parseHTML(i)).filter(function(){return 3!==this.nodeType}):i,function(e){r.call(this,e)}),(o=this.get_node(t.id,!0))&&o.length&&o.removeClass("jstree-loading").attr("aria-busy",!1),delete this._data.massload[t.id],a):n._load_node.call(this,t,r)}},e.jstree.defaults.search={ajax:!1,fuzzy:!1,case_sensitive:!1,show_only_matches:!1,show_only_matches_children:!1,close_opened_onclear:!0,search_leaves_only:!1,search_callback:!1},e.jstree.plugins.search=function(n,r){this.bind=function(){r.bind.call(this),this._data.search.str="",this._data.search.dom=e(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=!1,this._data.search.smc=!1,this._data.search.hdn=[],this.element.on("search.jstree",e.proxy(function(t,n){if(this._data.search.som&&n.res.length){var r,o,i,a,l=this._model.data,s=[];for(r=0,o=n.res.length;o>r;r++)if(l[n.res[r]]&&!l[n.res[r]].state.hidden&&(s.push(n.res[r]),s=s.concat(l[n.res[r]].parents),this._data.search.smc))for(i=0,a=l[n.res[r]].children_d.length;a>i;i++)l[l[n.res[r]].children_d[i]]&&!l[l[n.res[r]].children_d[i]].state.hidden&&s.push(l[n.res[r]].children_d[i]);s=e.vakata.array_remove_item(e.vakata.array_unique(s),e.jstree.root),this._data.search.hdn=this.hide_all(!0),this.show_node(s,!0),this.redraw(!0)}},this)).on("clear_search.jstree",e.proxy(function(e,t){this._data.search.som&&t.res.length&&(this.show_node(this._data.search.hdn,!0),this.redraw(!0))},this))},this.search=function(n,r,o,i,a,l){if(!1===n||""===e.trim(n.toString()))return this.clear_search();i=(i=this.get_node(i))&&i.id?i.id:null,n=n.toString();var s,c,u=this.settings.search,p=!!u.ajax&&u.ajax,d=this._model.data,f=null,h=[],m=[];if(this._data.search.res.length&&!a&&this.clear_search(),o===t&&(o=u.show_only_matches),l===t&&(l=u.show_only_matches_children),!r&&!1!==p)return e.isFunction(p)?p.call(this,n,e.proxy(function(t){t&&t.d&&(t=t.d),this._load_nodes(e.isArray(t)?e.vakata.array_unique(t):[],function(){this.search(n,!0,o,i,a,l)})},this),i):((p=e.extend({},p)).data||(p.data={}),p.data.str=n,i&&(p.data.inside=i),this._data.search.lastRequest&&this._data.search.lastRequest.abort(),this._data.search.lastRequest=e.ajax(p).fail(e.proxy(function(){this._data.core.last_error={error:"ajax",plugin:"search",id:"search_01",reason:"Could not load search parents",data:JSON.stringify(p)},this.settings.core.error.call(this,this._data.core.last_error)},this)).done(e.proxy(function(t){t&&t.d&&(t=t.d),this._load_nodes(e.isArray(t)?e.vakata.array_unique(t):[],function(){this.search(n,!0,o,i,a,l)})},this)),this._data.search.lastRequest);if(a||(this._data.search.str=n,this._data.search.dom=e(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=o,this._data.search.smc=l),f=new e.vakata.search(n,!0,{caseSensitive:u.case_sensitive,fuzzy:u.fuzzy}),e.each(d[i||e.jstree.root].children_d,function(e,t){var r=d[t];r.text&&!r.state.hidden&&(!u.search_leaves_only||r.state.loaded&&0===r.children.length)&&(u.search_callback&&u.search_callback.call(this,n,r)||!u.search_callback&&f.search(r.text).isMatch)&&(h.push(t),m=m.concat(r.parents))}),h.length){for(m=e.vakata.array_unique(m),s=0,c=m.length;c>s;s++)m[s]!==e.jstree.root&&d[m[s]]&&!0===this.open_node(m[s],null,0)&&this._data.search.opn.push(m[s]);a?(this._data.search.dom=this._data.search.dom.add(e(this.element[0].querySelectorAll("#"+e.map(h,function(t){return-1!=="0123456789".indexOf(t[0])?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")}).join(", #")))),this._data.search.res=e.vakata.array_unique(this._data.search.res.concat(h))):(this._data.search.dom=e(this.element[0].querySelectorAll("#"+e.map(h,function(t){return-1!=="0123456789".indexOf(t[0])?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.res=h),this._data.search.dom.children(".jstree-anchor").addClass("jstree-search")}this.trigger("search",{nodes:this._data.search.dom,str:n,res:this._data.search.res,show_only_matches:o})},this.clear_search=function(){this.settings.search.close_opened_onclear&&this.close_node(this._data.search.opn,0),this.trigger("clear_search",{nodes:this._data.search.dom,str:this._data.search.str,res:this._data.search.res}),this._data.search.res.length&&(this._data.search.dom=e(this.element[0].querySelectorAll("#"+e.map(this._data.search.res,function(t){return-1!=="0123456789".indexOf(t[0])?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search")),this._data.search.str="",this._data.search.res=[],this._data.search.opn=[],this._data.search.dom=e()},this.redraw_node=function(t,n,o,i){if((t=r.redraw_node.apply(this,arguments))&&-1!==e.inArray(t.id,this._data.search.res)){var a,l,s=null;for(a=0,l=t.childNodes.length;l>a;a++)if(t.childNodes[a]&&t.childNodes[a].className&&-1!==t.childNodes[a].className.indexOf("jstree-anchor")){s=t.childNodes[a];break}s&&(s.className+=" jstree-search")}return t}},function(e){e.vakata.search=function(t,n,r){r=r||{},!1!==(r=e.extend({},e.vakata.search.defaults,r)).fuzzy&&(r.fuzzy=!0),t=r.caseSensitive?t:t.toLowerCase();var o,i,a,l,s=r.location,c=r.distance,u=r.threshold,p=t.length;return p>32&&(r.fuzzy=!1),r.fuzzy&&(o=1<<p-1,i=function(){var e={},n=0;for(n=0;p>n;n++)e[t.charAt(n)]=0;for(n=0;p>n;n++)e[t.charAt(n)]|=1<<p-n-1;return e}(),a=function(e,t){var n=e/p,r=Math.abs(s-t);return c?n+r/c:r?1:n}),l=function(e){if(e=r.caseSensitive?e:e.toLowerCase(),t===e||-1!==e.indexOf(t))return{isMatch:!0,score:0};if(!r.fuzzy)return{isMatch:!1,score:1};var n,l,c,d,f,h,m,y,b,g=e.length,v=u,_=e.indexOf(t,s),w=p+g,O=1,S=[];for(-1!==_&&(v=Math.min(a(0,_),v),-1!==(_=e.lastIndexOf(t,s+p))&&(v=Math.min(a(0,_),v))),_=-1,n=0;p>n;n++){for(c=0,d=w;d>c;)a(n,s+d)<=v?c=d:w=d,d=Math.floor((w-c)/2+c);for(w=d,h=Math.max(1,s-d+1),m=Math.min(s+d,g)+p,(y=new Array(m+2))[m+1]=(1<<n)-1,l=m;l>=h;l--)if(b=i[e.charAt(l-1)],y[l]=0===n?(y[l+1]<<1|1)&b:(y[l+1]<<1|1)&b|(f[l+1]|f[l])<<1|1|f[l+1],y[l]&o&&(O=a(n,l-1),v>=O)){if(v=O,_=l-1,S.push(_),!(_>s))break;h=Math.max(1,2*s-_)}if(a(n+1,s)>v)break;f=y}return{isMatch:_>=0,score:O}},!0===n?{search:l}:l(n)},e.vakata.search.defaults={location:0,distance:100,threshold:.6,fuzzy:!1,caseSensitive:!1}}(e),e.jstree.defaults.sort=function(e,t){return this.get_text(e)>this.get_text(t)?1:-1},e.jstree.plugins.sort=function(t,n){this.bind=function(){n.bind.call(this),this.element.on("model.jstree",e.proxy(function(e,t){this.sort(t.parent,!0)},this)).on("rename_node.jstree create_node.jstree",e.proxy(function(e,t){this.sort(t.parent||t.node.parent,!1),this.redraw_node(t.parent||t.node.parent,!0)},this)).on("move_node.jstree copy_node.jstree",e.proxy(function(e,t){this.sort(t.parent,!1),this.redraw_node(t.parent,!0)},this))},this.sort=function(t,n){var r,o;if((t=this.get_node(t))&&t.children&&t.children.length&&(t.children.sort(e.proxy(this.settings.sort,this)),n))for(r=0,o=t.children_d.length;o>r;r++)this.sort(t.children_d[r],!1)}};var f=!1;e.jstree.defaults.state={key:"jstree",events:"changed.jstree open_node.jstree close_node.jstree check_node.jstree uncheck_node.jstree",ttl:!1,filter:!1,preserve_loaded:!1},e.jstree.plugins.state=function(t,n){this.bind=function(){n.bind.call(this);var t=e.proxy(function(){this.element.on(this.settings.state.events,e.proxy(function(){f&&clearTimeout(f),f=setTimeout(e.proxy(function(){this.save_state()},this),100)},this)),this.trigger("state_ready")},this);this.element.on("ready.jstree",e.proxy(function(e,n){this.element.one("restore_state.jstree",t),this.restore_state()||t()},this))},this.save_state=function(){var t=this.get_state();this.settings.state.preserve_loaded||delete t.core.loaded;var n={state:t,ttl:this.settings.state.ttl,sec:+new Date};e.vakata.storage.set(this.settings.state.key,JSON.stringify(n))},this.restore_state=function(){var t=e.vakata.storage.get(this.settings.state.key);if(t)try{t=JSON.parse(t)}catch(e){return!1}return!(t&&t.ttl&&t.sec&&+new Date-t.sec>t.ttl)&&(t&&t.state&&(t=t.state),t&&e.isFunction(this.settings.state.filter)&&(t=this.settings.state.filter.call(this,t)),!!t&&(this.settings.state.preserve_loaded||delete t.core.loaded,this.element.one("set_state.jstree",function(n,r){r.instance.trigger("restore_state",{state:e.extend(!0,{},t)})}),this.set_state(t),!0))},this.clear_state=function(){return e.vakata.storage.del(this.settings.state.key)}},function(e,t){e.vakata.storage={set:function(e,t){return window.localStorage.setItem(e,t)},get:function(e){return window.localStorage.getItem(e)},del:function(e){return window.localStorage.removeItem(e)}}}(e),e.jstree.defaults.types={default:{}},e.jstree.defaults.types[e.jstree.root]={},e.jstree.plugins.types=function(n,r){this.init=function(n,o){var i,a;if(o&&o.types&&o.types.default)for(i in o.types)if("default"!==i&&i!==e.jstree.root&&o.types.hasOwnProperty(i))for(a in o.types.default)o.types.default.hasOwnProperty(a)&&o.types[i][a]===t&&(o.types[i][a]=o.types.default[a]);r.init.call(this,n,o),this._model.data[e.jstree.root].type=e.jstree.root},this.refresh=function(t,n){r.refresh.call(this,t,n),this._model.data[e.jstree.root].type=e.jstree.root},this.bind=function(){this.element.on("model.jstree",e.proxy(function(n,r){var o,i,a,l=this._model.data,s=r.nodes,c=this.settings.types,u="default";for(o=0,i=s.length;i>o;o++){if(u="default",l[s[o]].original&&l[s[o]].original.type&&c[l[s[o]].original.type]&&(u=l[s[o]].original.type),l[s[o]].data&&l[s[o]].data.jstree&&l[s[o]].data.jstree.type&&c[l[s[o]].data.jstree.type]&&(u=l[s[o]].data.jstree.type),l[s[o]].type=u,!0===l[s[o]].icon&&c[u].icon!==t&&(l[s[o]].icon=c[u].icon),c[u].li_attr!==t&&"object"==typeof c[u].li_attr)for(a in c[u].li_attr)if(c[u].li_attr.hasOwnProperty(a)){if("id"===a)continue;l[s[o]].li_attr[a]===t?l[s[o]].li_attr[a]=c[u].li_attr[a]:"class"===a&&(l[s[o]].li_attr.class=c[u].li_attr.class+" "+l[s[o]].li_attr.class)}if(c[u].a_attr!==t&&"object"==typeof c[u].a_attr)for(a in c[u].a_attr)if(c[u].a_attr.hasOwnProperty(a)){if("id"===a)continue;l[s[o]].a_attr[a]===t?l[s[o]].a_attr[a]=c[u].a_attr[a]:"href"===a&&"#"===l[s[o]].a_attr[a]?l[s[o]].a_attr.href=c[u].a_attr.href:"class"===a&&(l[s[o]].a_attr.class=c[u].a_attr.class+" "+l[s[o]].a_attr.class)}}l[e.jstree.root].type=e.jstree.root},this)),r.bind.call(this)},this.get_json=function(t,n,o){var i,a,l=this._model.data,s=n?e.extend(!0,{},n,{no_id:!1}):{},c=r.get_json.call(this,t,s,o);if(!1===c)return!1;if(e.isArray(c))for(i=0,a=c.length;a>i;i++)c[i].type=c[i].id&&l[c[i].id]&&l[c[i].id].type?l[c[i].id].type:"default",n&&n.no_id&&(delete c[i].id,c[i].li_attr&&c[i].li_attr.id&&delete c[i].li_attr.id,c[i].a_attr&&c[i].a_attr.id&&delete c[i].a_attr.id);else c.type=c.id&&l[c.id]&&l[c.id].type?l[c.id].type:"default",n&&n.no_id&&(c=this._delete_ids(c));return c},this._delete_ids=function(t){if(e.isArray(t)){for(var n=0,r=t.length;r>n;n++)t[n]=this._delete_ids(t[n]);return t}return delete t.id,t.li_attr&&t.li_attr.id&&delete t.li_attr.id,t.a_attr&&t.a_attr.id&&delete t.a_attr.id,t.children&&e.isArray(t.children)&&(t.children=this._delete_ids(t.children)),t},this.check=function(n,o,i,a,l){if(!1===r.check.call(this,n,o,i,a,l))return!1;o=o&&o.id?o:this.get_node(o),i=i&&i.id?i:this.get_node(i);var s,c,u,p,d=o&&o.id?l&&l.origin?l.origin:e.jstree.reference(o.id):null;switch(d=d&&d._model&&d._model.data?d._model.data:null,n){case"create_node":case"move_node":case"copy_node":if("move_node"!==n||-1===e.inArray(o.id,i.children)){if((s=this.get_rules(i)).max_children!==t&&-1!==s.max_children&&s.max_children===i.children.length)return this._data.core.last_error={error:"check",plugin:"types",id:"types_01",reason:"max_children prevents function: "+n,data:JSON.stringify({chk:n,pos:a,obj:!(!o||!o.id)&&o.id,par:!(!i||!i.id)&&i.id})},!1;if(s.valid_children!==t&&-1!==s.valid_children&&-1===e.inArray(o.type||"default",s.valid_children))return this._data.core.last_error={error:"check",plugin:"types",id:"types_02",reason:"valid_children prevents function: "+n,data:JSON.stringify({chk:n,pos:a,obj:!(!o||!o.id)&&o.id,par:!(!i||!i.id)&&i.id})},!1;if(d&&o.children_d&&o.parents){for(c=0,u=0,p=o.children_d.length;p>u;u++)c=Math.max(c,d[o.children_d[u]].parents.length);c=c-o.parents.length+1}(0>=c||c===t)&&(c=1);do{if(s.max_depth!==t&&-1!==s.max_depth&&s.max_depth<c)return this._data.core.last_error={error:"check",plugin:"types",id:"types_03",reason:"max_depth prevents function: "+n,data:JSON.stringify({chk:n,pos:a,obj:!(!o||!o.id)&&o.id,par:!(!i||!i.id)&&i.id})},!1;i=this.get_node(i.parent),s=this.get_rules(i),c++}while(i)}}return!0},this.get_rules=function(e){if(!(e=this.get_node(e)))return!1;var n=this.get_type(e,!0);return n.max_depth===t&&(n.max_depth=-1),n.max_children===t&&(n.max_children=-1),n.valid_children===t&&(n.valid_children=-1),n},this.get_type=function(t,n){return!!(t=this.get_node(t))&&(n?e.extend({type:t.type},this.settings.types[t.type]):t.type)},this.set_type=function(n,r){var o,i,a,l,s,c,u,p,d=this._model.data;if(e.isArray(n)){for(n=n.slice(),i=0,a=n.length;a>i;i++)this.set_type(n[i],r);return!0}if(o=this.settings.types,n=this.get_node(n),!o[r]||!n)return!1;if((u=this.get_node(n,!0))&&u.length&&(p=u.children(".jstree-anchor")),l=n.type,s=this.get_icon(n),n.type=r,(!0===s||!o[l]||o[l].icon!==t&&s===o[l].icon)&&this.set_icon(n,o[r].icon===t||o[r].icon),o[l]&&o[l].li_attr!==t&&"object"==typeof o[l].li_attr)for(c in o[l].li_attr)if(o[l].li_attr.hasOwnProperty(c)){if("id"===c)continue;"class"===c?(d[n.id].li_attr.class=(d[n.id].li_attr.class||"").replace(o[l].li_attr[c],""),u&&u.removeClass(o[l].li_attr[c])):d[n.id].li_attr[c]===o[l].li_attr[c]&&(d[n.id].li_attr[c]=null,u&&u.removeAttr(c))}if(o[l]&&o[l].a_attr!==t&&"object"==typeof o[l].a_attr)for(c in o[l].a_attr)if(o[l].a_attr.hasOwnProperty(c)){if("id"===c)continue;"class"===c?(d[n.id].a_attr.class=(d[n.id].a_attr.class||"").replace(o[l].a_attr[c],""),p&&p.removeClass(o[l].a_attr[c])):d[n.id].a_attr[c]===o[l].a_attr[c]&&("href"===c?(d[n.id].a_attr[c]="#",p&&p.attr("href","#")):(delete d[n.id].a_attr[c],p&&p.removeAttr(c)))}if(o[r].li_attr!==t&&"object"==typeof o[r].li_attr)for(c in o[r].li_attr)if(o[r].li_attr.hasOwnProperty(c)){if("id"===c)continue;d[n.id].li_attr[c]===t?(d[n.id].li_attr[c]=o[r].li_attr[c],u&&("class"===c?u.addClass(o[r].li_attr[c]):u.attr(c,o[r].li_attr[c]))):"class"===c&&(d[n.id].li_attr.class=o[r].li_attr[c]+" "+d[n.id].li_attr.class,u&&u.addClass(o[r].li_attr[c]))}if(o[r].a_attr!==t&&"object"==typeof o[r].a_attr)for(c in o[r].a_attr)if(o[r].a_attr.hasOwnProperty(c)){if("id"===c)continue;d[n.id].a_attr[c]===t?(d[n.id].a_attr[c]=o[r].a_attr[c],p&&("class"===c?p.addClass(o[r].a_attr[c]):p.attr(c,o[r].a_attr[c]))):"href"===c&&"#"===d[n.id].a_attr[c]?(d[n.id].a_attr.href=o[r].a_attr.href,p&&p.attr("href",o[r].a_attr.href)):"class"===c&&(d[n.id].a_attr.class=o[r].a_attr.class+" "+d[n.id].a_attr.class,p&&p.addClass(o[r].a_attr[c]))}return!0}},e.jstree.defaults.unique={case_sensitive:!1,trim_whitespace:!1,duplicate:function(e,t){return e+" ("+t+")"}},e.jstree.plugins.unique=function(n,r){this.check=function(t,n,o,i,a){if(!1===r.check.call(this,t,n,o,i,a))return!1;if(n=n&&n.id?n:this.get_node(n),!(o=o&&o.id?o:this.get_node(o))||!o.children)return!0;var l,s,c,u="rename_node"===t?i:n.text,p=[],d=this.settings.unique.case_sensitive,f=this.settings.unique.trim_whitespace,h=this._model.data;for(l=0,s=o.children.length;s>l;l++)c=h[o.children[l]].text,d||(c=c.toLowerCase()),f&&(c=c.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),p.push(c);switch(d||(u=u.toLowerCase()),f&&(u=u.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),t){case"delete_node":return!0;case"rename_node":return c=n.text||"",d||(c=c.toLowerCase()),f&&(c=c.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),(l=-1===e.inArray(u,p)||n.text&&c===u)||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_01",reason:"Child with name "+u+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:i,obj:!(!n||!n.id)&&n.id,par:!(!o||!o.id)&&o.id})}),l;case"create_node":return(l=-1===e.inArray(u,p))||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_04",reason:"Child with name "+u+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:i,obj:!(!n||!n.id)&&n.id,par:!(!o||!o.id)&&o.id})}),l;case"copy_node":return(l=-1===e.inArray(u,p))||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_02",reason:"Child with name "+u+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:i,obj:!(!n||!n.id)&&n.id,par:!(!o||!o.id)&&o.id})}),l;case"move_node":return(l=n.parent===o.id&&(!a||!a.is_multi)||-1===e.inArray(u,p))||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_03",reason:"Child with name "+u+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:i,obj:!(!n||!n.id)&&n.id,par:!(!o||!o.id)&&o.id})}),l}return!0},this.create_node=function(n,o,i,a,l){if(!o||o.text===t){if(null===n&&(n=e.jstree.root),!(n=this.get_node(n)))return r.create_node.call(this,n,o,i,a,l);if(!(i=i===t?"last":i).toString().match(/^(before|after)$/)&&!l&&!this.is_loaded(n))return r.create_node.call(this,n,o,i,a,l);o||(o={});var s,c,u,p,d,f,h=this._model.data,m=this.settings.unique.case_sensitive,y=this.settings.unique.trim_whitespace,b=this.settings.unique.duplicate;for(c=s=this.get_string("New node"),u=[],p=0,d=n.children.length;d>p;p++)f=h[n.children[p]].text,m||(f=f.toLowerCase()),y&&(f=f.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),u.push(f);for(p=1,f=c,m||(f=f.toLowerCase()),y&&(f=f.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""));-1!==e.inArray(f,u);)c=b.call(this,s,++p).toString(),f=c,m||(f=f.toLowerCase()),y&&(f=f.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""));o.text=c}return r.create_node.call(this,n,o,i,a,l)}};var h=c.createElement("DIV");if(h.setAttribute("unselectable","on"),h.setAttribute("role","presentation"),h.className="jstree-wholerow",h.innerHTML="&#160;",e.jstree.plugins.wholerow=function(t,n){this.bind=function(){n.bind.call(this),this.element.on("ready.jstree set_state.jstree",e.proxy(function(){this.hide_dots()},this)).on("init.jstree loading.jstree ready.jstree",e.proxy(function(){this.get_container_ul().addClass("jstree-wholerow-ul")},this)).on("deselect_all.jstree",e.proxy(function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")},this)).on("changed.jstree",e.proxy(function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");var n,r,o=!1;for(n=0,r=t.selected.length;r>n;n++)(o=this.get_node(t.selected[n],!0))&&o.length&&o.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("open_node.jstree",e.proxy(function(e,t){this.get_node(t.node,!0).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("hover_node.jstree dehover_node.jstree",e.proxy(function(e,t){"hover_node"===e.type&&this.is_disabled(t.node)||this.get_node(t.node,!0).children(".jstree-wholerow")["hover_node"===e.type?"addClass":"removeClass"]("jstree-wholerow-hovered")},this)).on("contextmenu.jstree",".jstree-wholerow",e.proxy(function(t){if(this._data.contextmenu){t.preventDefault();var n=e.Event("contextmenu",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,pageX:t.pageX,pageY:t.pageY});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(n)}},this)).on("click.jstree",".jstree-wholerow",function(t){t.stopImmediatePropagation();var n=e.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(n).focus()}).on("dblclick.jstree",".jstree-wholerow",function(t){t.stopImmediatePropagation();var n=e.Event("dblclick",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(n).focus()}).on("click.jstree",".jstree-leaf > .jstree-ocl",e.proxy(function(t){t.stopImmediatePropagation();var n=e.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(n).focus()},this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",e.proxy(function(e){return e.stopImmediatePropagation(),this.is_disabled(e.currentTarget)||this.hover_node(e.currentTarget),!1},this)).on("mouseleave.jstree",".jstree-node",e.proxy(function(e){this.dehover_node(e.currentTarget)},this))},this.teardown=function(){this.settings.wholerow&&this.element.find(".jstree-wholerow").remove(),n.teardown.call(this)},this.redraw_node=function(t,r,o,i){if(t=n.redraw_node.apply(this,arguments)){var a=h.cloneNode(!0);-1!==e.inArray(t.id,this._data.core.selected)&&(a.className+=" jstree-wholerow-clicked"),this._data.core.focused&&this._data.core.focused===t.id&&(a.className+=" jstree-wholerow-hovered"),t.insertBefore(a,t.childNodes[0])}return t}},window.customElements&&Object&&Object.create){var m=Object.create(HTMLElement.prototype);m.createdCallback=function(){var t,n={core:{},plugins:[]};for(t in e.jstree.plugins)e.jstree.plugins.hasOwnProperty(t)&&this.attributes[t]&&(n.plugins.push(t),this.getAttribute(t)&&JSON.parse(this.getAttribute(t))&&(n[t]=JSON.parse(this.getAttribute(t))));for(t in e.jstree.defaults.core)e.jstree.defaults.core.hasOwnProperty(t)&&this.attributes[t]&&(n.core[t]=JSON.parse(this.getAttribute(t))||this.getAttribute(t));e(this).jstree(n)};try{window.customElements.define("vakata-jstree",function(){},{prototype:m})}catch(e){}}}})?o.apply(t,i):o)||(e.exports=a)}()}).call(this,n(26))},1072:function(e,t,n){},1073:function(e,t,n){"use strict";function r(e,t){return e===t}function o(e){var t=arguments.length<=1||void 0===arguments[1]?r:arguments[1],n=null,o=null;return function(){for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return null!==n&&n.length===i.length&&i.every(function(e,r){return t(e,n[r])})||(o=e.apply(void 0,i)),n=i,o}}function i(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];var i=0,a=r.pop(),l=function(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(e){return"function"==typeof e})){var n=t.map(function(e){return typeof e}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return t}(r),s=e.apply(void 0,[function(){return i++,a.apply(void 0,arguments)}].concat(n)),c=function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];var i=l.map(function(n){return n.apply(void 0,[e,t].concat(r))});return s.apply(void 0,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(i))};return c.resultFunc=a,c.recomputations=function(){return i},c.resetRecomputations=function(){return i=0},c}}t.__esModule=!0,t.defaultMemoize=o,t.createSelectorCreator=i,t.createStructuredSelector=function(e){var t=arguments.length<=1||void 0===arguments[1]?a:arguments[1];if("object"!=typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var n=Object.keys(e);return t(n.map(function(t){return e[t]}),function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(function(e,t,r){return e[n[r]]=t,e},{})})};var a=t.createSelector=i(o)},1074:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,i);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(a)}var c=Object.getPrototypeOf(o);if(null===c)return;e=c,t=i,n=a,r=!0,l=c=void 0}};var a,l=n(0),s=(a=l)&&a.__esModule?a:{default:a},c=n(826),u=n(1075),p=n(839),d=n(916),f=(n(859),n(917)),h=n(919),m=n(1079),y=function(e){function t(e){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={currentPage:this.props.currentPage?this.props.currentPage:0,currentSort:{column:null,direction:this.props.defaultSortDescending?-1:1},filter:""},!1!==e.sortBy||!1!==e.defaultSort){var n=e.sortBy||e.defaultSort;this.state.currentSort=this.getCurrentSort(n)}}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["default"].Component),o(t,[{key:"filterBy",value:function(e){this.setState({filter:e})}},{key:"translateColumnsArray",value:function(e){return e.map(function(e,t){if("string"==typeof e)return{key:e,label:e};if(void 0!==e.sortable){var n=!0===e.sortable?"default":e.sortable;this._sortable[e.key]=n}return e}.bind(this))}},{key:"parseChildData",value:function(e){var t=[],n=void 0;return void 0!==e.children&&s.default.Children.forEach(e.children,function(e){if(null!=e)switch(e.type){case d.Thead:break;case h.Tfoot:void 0!==n&&console.warn("You can only have one <Tfoot>, but more than one was specified.Ignoring all but the last one"),n=e;break;case f.Tr:var r=e.props.data||{};s.default.Children.forEach(e.props.children,function(e){if("object"==typeof e&&null!=e)if(void 0!==e.props.column){var t=void 0;if(void 0!==e.props.data)t=e.props.data;else{if(void 0===e.props.children)return void console.warn("exports.Td specified without a `data` property or children, ignoring");t=e.props.children}r[e.props.column]={value:t,props:(0,c.filterPropsFrom)(e.props),__reactableMeta:!0}}else console.warn("exports.Td specified without a `column` property, ignoring")}),t.push({data:r,props:(0,c.filterPropsFrom)(e.props),__reactableMeta:!0});break;default:console.warn("The only possible children of <Table> are <Thead>, <Tr>, or one <Tfoot>.")}}.bind(this)),{data:t,tfoot:n}}},{key:"initialize",value:function(e){this.data=e.data||[];var t=this.parseChildData(e),n=t.data,r=t.tfoot;this.data=this.data.concat(n),this.tfoot=r,this.initializeSorts(e),this.initializeFilters(e)}},{key:"initializeFilters",value:function(e){for(var t in this._filterable={},e.filterable){var n=e.filterable[t],r=void 0,o=void 0;if(n instanceof Object){if(void 0===n.column){console.warn("Filterable column specified without column name");continue}r=n.column,o="function"==typeof n.filterFunction?n.filterFunction:"default"}else r=n,o="default";this._filterable[r]=o}}},{key:"initializeSorts",value:function(e){for(var t in this._sortable={},e.sortable){var n=e.sortable[t],r=void 0,o=void 0;if(n instanceof Object){if(void 0===n.column)return void console.warn("Sortable column specified without column name");r=n.column,o="function"==typeof n.sortFunction?n.sortFunction:"default"}else r=n,o="default";this._sortable[r]=o}}},{key:"getCurrentSort",value:function(e){var t=void 0,n=void 0;if(e instanceof Object){if(void 0===e.column)return void console.warn("Default column specified without column name");if(t=e.column,void 0!==e.direction)if(1===e.direction||"asc"===e.direction)n=1;else if(-1===e.direction||"desc"===e.direction)n=-1;else{var r=this.props.defaultSortDescending?"descending":"ascending";console.warn("Invalid default sort specified. Defaulting to "+r),n=this.props.defaultSortDescending?-1:1}else n=this.props.defaultSortDescending?-1:1}else t=e,n=this.props.defaultSortDescending?-1:1;return{column:t,direction:n}}},{key:"updateCurrentSort",value:function(e){!1!==e&&e.column!==this.state.currentSort.column&&e.direction!==this.state.currentSort.direction&&this.setState({currentSort:this.getCurrentSort(e)})}},{key:"updateCurrentPage",value:function(e){void 0!==e&&e!==this.state.currentPage&&this.setState({currentPage:e})}},{key:"componentWillMount",value:function(){this.initialize(this.props),this.sortByCurrentSort(),this.filterBy(this.props.filterBy)}},{key:"componentWillReceiveProps",value:function(e){this.initialize(e),this.updateCurrentPage(e.currentPage),this.updateCurrentSort(e.sortBy),this.sortByCurrentSort(),this.filterBy(e.filterBy)}},{key:"applyFilter",value:function(e,t){e=e.toLowerCase();for(var n=[],r=0;r<t.length;r++){var o=t[r].props.data;for(var i in this._filterable)if(void 0!==o[i])if(void 0===this._filterable[i]||"default"===this._filterable[i]){if((0,u.extractDataFrom)(o,i).toString().toLowerCase().indexOf(e)>-1){n.push(t[r]);break}}else if(this._filterable[i]((0,u.extractDataFrom)(o,i).toString(),e)){n.push(t[r]);break}}return n}},{key:"sortByCurrentSort",value:function(){var e=this.state.currentSort;null!==e.column&&this.data.sort(function(t,n){var r=(0,u.extractDataFrom)(t,e.column);r=(0,p.isUnsafe)(r)?r.toString():r||"";var o=(0,u.extractDataFrom)(n,e.column);return o=(0,p.isUnsafe)(o)?o.toString():o||"",void 0===this._sortable[e.column]||"default"===this._sortable[e.column]?r<o?-1*e.direction:r>o?1*e.direction:0:1===e.direction?this._sortable[e.column](r,o):this._sortable[e.column](o,r)}.bind(this))}},{key:"onSort",value:function(e){if(void 0!==this._sortable[e]){var t=this.state.currentSort;t.column===e?t.direction*=-1:(t.column=e,t.direction=this.props.defaultSortDescending?-1:1),this.setState({currentSort:t}),this.sortByCurrentSort(),"function"==typeof this.props.onSort&&this.props.onSort(t)}}},{key:"render",value:function(){var e=this,t=[],n=void 0,o=!1,i=void 0===this.props.hideTableHeader,a=null;if(this.props.children&&(this.props.children.length>0&&this.props.children[0]&&this.props.children[0].type===d.Thead?a=this.props.children[0]:this.props.children.type===d.Thead&&(a=this.props.children)),(n=null!==a?d.Thead.getColumns(a):this.props.columns||[]).length>0&&(o=!0,n=this.translateColumnsArray(n)),this.data&&"function"==typeof this.data.map&&(t=t.concat(this.data.map(function(e,t){var i=e,a={};for(var l in!0===e.__reactableMeta&&(i=e.data,a=e.props),i)i.hasOwnProperty(l)&&!1===o&&function(){var e={key:l,label:l};void 0===n.find(function(t){return t.key===e.key})&&n.push(e)}();return s.default.createElement(f.Tr,r({columns:n,key:t,data:i},a))}.bind(this)))),!0===this.props.sortable)for(var l=0;l<n.length;l++)this._sortable[n[l].key]="default";var u=!1;this.props.filterable&&Array.isArray(this.props.filterable)&&this.props.filterable.length>0&&!this.props.hideFilterInput&&(u=!0);var p=t;""!==this.state.filter&&(p=this.applyFilter(this.state.filter,p));var h=0,y=!1,b=void 0,g=this.state.currentPage,v=this.props.pageButtonLimit||10,_=p;this.props.itemsPerPage>0&&(h=this.props.itemsPerPage,g>(b=Math.ceil(p.length/h))-1&&(g=b-1),y=!0,_=p.slice(g*h,(g+1)*h));var w=(0,c.filterPropsFrom)(this.props),O=this.props.noDataText?s.default.createElement("tr",{className:"reactable-no-data"},s.default.createElement("td",{colSpan:n.length},this.props.noDataText)):null,S=null;return n&&n.length>0&&i&&(S=s.default.createElement(d.Thead,{columns:n,filtering:u,onFilter:function(t){e.setState({filter:t}),e.props.onFilter&&e.props.onFilter(t)},filterPlaceholder:this.props.filterPlaceholder,filterClassName:this.props.filterClassName,currentFilter:this.state.filter,sort:this.state.currentSort,sortableColumns:this._sortable,onSort:this.onSort.bind(this),key:"thead"})),s.default.createElement("table",w,S,s.default.createElement("tbody",{className:"reactable-data",key:"tbody"},_.length>0?_:O),!0===y?s.default.createElement(m.Paginator,{colSpan:n.length,pageButtonLimit:v,numPages:b,currentPage:g,onPageChange:function(t){e.setState({currentPage:t}),e.props.onPageChange&&e.props.onPageChange(t)},previousPageLabel:this.props.previousPageLabel,nextPageLabel:this.props.nextPageLabel,key:"paginator"}):null,this.tfoot)}}]),t}();t.Table=y,y.defaultProps={sortBy:!1,defaultSort:!1,defaultSortDescending:!1,itemsPerPage:0,filterBy:"",hideFilterInput:!1}},1075:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractDataFrom=function(e,t){var n;n=null!=e&&!0===e.__reactableMeta?e.data[t]:e[t];null!=n&&!0===n.__reactableMeta&&(n=void 0!==n.props.value&&null!==n.props.value?n.props.value:n.value);return(0,r.stringable)(n)?n:""};var r=n(915)},1076:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,i);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(a)}var c=Object.getPrototypeOf(o);if(null===c)return;e=c,t=i,n=a,r=!0,l=c=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=i(n(0)),c=i(n(29)),u=function(e){function t(){a(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return l(t,s["default"].Component),r(t,[{key:"onChange",value:function(){this.props.onFilter(c.default.findDOMNode(this).value)}},{key:"render",value:function(){return s.default.createElement("input",{type:"text",className:this.props.className,placeholder:this.props.placeholder,value:this.props.value,onKeyUp:this.onChange.bind(this),onChange:this.onChange.bind(this)})}}]),t}();t.FiltererInput=u;var p=function(e){function t(){a(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return l(t,s["default"].Component),r(t,[{key:"render",value:function(){if(void 0===this.props.colSpan)throw new TypeError("Must pass a colSpan argument to Filterer");return s.default.createElement("tr",{className:"reactable-filterer"},s.default.createElement("td",{colSpan:this.props.colSpan},s.default.createElement(u,{onFilter:this.props.onFilter,value:this.props.value,placeholder:this.props.placeholder,className:this.props.className?"reactable-filter-input "+this.props.className:"reactable-filter-input"})))}}]),t}();t.Filterer=p},1077:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isReactComponent=function(e){return null!==e&&"object"==typeof e&&void 0!==e.props}},1078:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toArray=function(e){var t=[];for(var n in e)t[n]=e;return t}},1079:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,i);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(a)}var c=Object.getPrototypeOf(o);if(null===c)return;e=c,t=i,n=a,r=!0,l=c=void 0}};var i,a=n(0),l=(i=a)&&i.__esModule?i:{default:i};function s(e){return"#page-"+(e+1)}var c=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l["default"].Component),r(t,[{key:"handlePrevious",value:function(e){e.preventDefault(),this.props.onPageChange(this.props.currentPage-1)}},{key:"handleNext",value:function(e){e.preventDefault(),this.props.onPageChange(this.props.currentPage+1)}},{key:"handlePageButton",value:function(e,t){t.preventDefault(),this.props.onPageChange(e)}},{key:"renderPrevious",value:function(){if(this.props.currentPage>0)return l.default.createElement("a",{className:"reactable-previous-page",href:s(this.props.currentPage-1),onClick:this.handlePrevious.bind(this)},this.props.previousPageLabel||"Previous")}},{key:"renderNext",value:function(){if(this.props.currentPage<this.props.numPages-1)return l.default.createElement("a",{className:"reactable-next-page",href:s(this.props.currentPage+1),onClick:this.handleNext.bind(this)},this.props.nextPageLabel||"Next")}},{key:"renderPageButton",value:function(e,t){return l.default.createElement("a",{className:e,key:t,href:s(t),onClick:this.handlePageButton.bind(this,t)},t+1)}},{key:"render",value:function(){if(void 0===this.props.colSpan)throw new TypeError("Must pass a colSpan argument to Paginator");if(void 0===this.props.numPages)throw new TypeError("Must pass a non-zero numPages argument to Paginator");if(void 0===this.props.currentPage)throw new TypeError("Must pass a currentPage argument to Paginator");for(var e=[],t=this.props.pageButtonLimit,n=this.props.currentPage,r=this.props.numPages,o=Math.round(t/2),i=t-o,a=0;a<this.props.numPages;a++){var s=a,c="reactable-page-button";n===a&&(c+=" reactable-current-page"),e.push(this.renderPageButton(c,s))}return n-t+o>0&&(n>r-o?e.splice(0,r-t):e.splice(0,n-t+o)),r-n>i&&e.splice(t,e.length-t),l.default.createElement("tbody",{className:"reactable-pagination"},l.default.createElement("tr",null,l.default.createElement("td",{colSpan:this.props.colSpan},this.renderPrevious(),e,this.renderNext())))}}]),t}();t.Paginator=c},1080:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={Numeric:function(e,t){var n=parseFloat(e.toString().replace(/,/g,"")),r=parseFloat(t.toString().replace(/,/g,""));if(isNaN(n)&&isNaN(r))n=e,r=t;else{if(isNaN(n))return 1;if(isNaN(r))return-1}return n<r?-1:n>r?1:0},NumericInteger:function(e,t){return isNaN(e)||isNaN(t)?e>t?1:-1:e-t},Currency:function(e,n){return e=e.replace(/[^0-9\.\-\,]+/g,""),n=n.replace(/[^0-9\.\-\,]+/g,""),t.Sort.Numeric(e,n)},Date:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,n){var r=Date.parse(e),o=Date.parse(n);return isNaN(r)||isNaN(o)?t.Sort.Numeric(e,n):r>o?1:o>r?-1:0}),CaseInsensitive:function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}};t.Sort=r},1081:function(e,t,n){var r;"undefined"!=typeof self&&self,r=function(e,t,n){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=s(n(1)),l=s(n(2));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),i(t,[{key:"propsWith",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={};return Object.keys(this.props).forEach(function(r){if(-1!==r.search(e)){var o=t?r.replace(e,""):r;n[o]=this.props[r]}},this),n}},{key:"componentWillUnmount",value:function(){this.clipboard&&this.clipboard.destroy()}},{key:"componentDidMount",value:function(){var e=this.props.options||this.propsWith(/^option-/,!0),t=a.default.version.match(/0\.13(.*)/)?this.refs.element.getDOMNode():this.element,r=n(3);this.clipboard=new r(t,e);var o=this.propsWith(/^on/,!0);Object.keys(o).forEach(function(e){this.clipboard.on(e.toLowerCase(),this.props["on"+e])},this)}},{key:"render",value:function(){var e=this,t=o({type:this.getType(),className:this.props.className||"",style:this.props.style||{},ref:function(t){e.element=t},onClick:this.props.onClick},this.propsWith(/^data-/),this.propsWith(/^button-/,!0));return a.default.createElement(this.getComponent(),t,this.props.children)}},{key:"getType",value:function(){return"button"===this.getComponent()||"input"===this.getComponent()?this.props.type||"button":void 0}},{key:"getComponent",value:function(){return this.props.component||"button"}}]),t}();c.propTypes={options:function(e,t,n){var o=e[t];if(o&&"object"!==(void 0===o?"undefined":r(o))||Array.isArray(o))return new Error("Invalid props '"+t+"' supplied to '"+n+"'. '"+t+"' is not an object.");if(void 0!==e["option-text"]&&"function"!=typeof e["option-text"])return new Error("Invalid props 'option-text' supplied to '"+n+"'. 'option-text' is not a function.")},type:l.default.string,className:l.default.string,style:l.default.object,component:l.default.string,children:l.default.oneOfType([l.default.element,l.default.string,l.default.number,l.default.object])},c.defaultProps={onClick:function(){}},t.default=c},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n}])},e.exports=r(n(0),n(4),n(221))},1082:function(e,t,n){},1083:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1084);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r(o).default}});var i=n(920);Object.defineProperty(t,"Fade",{enumerable:!0,get:function(){return r(i).default}});var a=n(1086);Object.defineProperty(t,"Bounce",{enumerable:!0,get:function(){return r(a).default}});var l=n(1087);Object.defineProperty(t,"Roll",{enumerable:!0,get:function(){return r(l).default}});var s=n(1088);Object.defineProperty(t,"Slide",{enumerable:!0,get:function(){return r(s).default}});var c=n(1089);Object.defineProperty(t,"Flip",{enumerable:!0,get:function(){return r(c).default}}),Object.defineProperty(t,"Reveal",{enumerable:!0,get:function(){return r(o).default}});var u=n(1090);Object.defineProperty(t,"Rotate",{enumerable:!0,get:function(){return r(u).default}});var p=n(1091);Object.defineProperty(t,"LightSpeed",{enumerable:!0,get:function(){return r(p).default}});var d=n(1092);Object.defineProperty(t,"Zoom",{enumerable:!0,get:function(){return r(d).default}})},1084:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){function t(e){return e?h?{duration:c,delay:u,count:p,forever:d,className:h,style:{}}:y:f?{duration:void 0===r?o:r,delay:i,count:a,forever:l,className:f,style:{}}:m}var n=e.children,r=e.timeout,o=e.duration,i=e.delay,a=e.count,l=e.forever,c=e.durationOut,u=e.delayOut,p=e.countOut,d=e.foreverOut,f=e.effect,h=e.effectOut,m=e.inEffect,y=e.outEffect,b=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children","timeout","duration","delay","count","forever","durationOut","delayOut","countOut","foreverOut","effect","effectOut","inEffect","outEffect"]);return(0,s.default)(b,t(!1),t(!0),n)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(4),l=n(806),s=r(n(809)),c=r(n(920)),u={in:a.object,out:(0,a.oneOfType)([a.object,(0,a.oneOf)([!1])]),effect:a.string,effectOut:a.string,duration:a.number,timeout:a.number,delay:a.number,count:a.number,forever:a.bool,durationOut:a.number,delayOut:a.number,countOut:a.number,foreverOut:a.bool},p=i({},l.defaults,{durationOut:l.defaults.duration,delayOut:l.defaults.delay,countOut:l.defaults.count,foreverOut:l.defaults.forever,inEffect:(0,c.default)(l.defaults),outEffect:(0,c.default)(i({out:!0},l.defaults))});o.propTypes=u,o.defaultProps=p,t.default=o,e.exports=t.default},1085:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&l.return&&l.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),c=(r=s)&&r.__esModule?r:{default:r},u=n(4),p=n(806),d=(0,u.shape)({make:u.func,duration:u.number.isRequired,delay:u.number.isRequired,forever:u.bool,count:u.number.isRequired,style:u.object.isRequired,reverse:u.bool}),f={collapse:u.bool,collapseEl:u.element,cascade:u.bool,wait:u.number,force:u.bool,disabled:u.bool,appear:u.bool,enter:u.bool,exit:u.bool,fraction:u.number,refProp:u.string,innerRef:u.func,onReveal:u.func,unmountOnExit:u.bool,mountOnEnter:u.bool,inEffect:d.isRequired,outEffect:(0,u.oneOfType)([d,(0,u.oneOf)([!1])]).isRequired,ssrReveal:u.bool,collapseOnly:u.bool,ssrFadeout:u.bool},h={transitionGroup:u.object},m=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.isOn=void 0===e.when||!!e.when,r.state={collapse:e.collapse?t.getInitialCollapseStyle(e):void 0,style:{opacity:r.isOn&&!e.ssrReveal||!e.outEffect?void 0:0}},r.savedChild=!1,r.isShown=!1,p.observerMode?r.handleObserve=r.handleObserve.bind(r):(r.revealHandler=r.makeHandler(r.reveal),r.resizeHandler=r.makeHandler(r.resize)),r.saveRef=r.saveRef.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),l(t,[{key:"saveRef",value:function(e){this.childRef&&this.childRef(e),this.props.innerRef&&this.props.innerRef(e),this.el!==e&&(this.el=e&&"offsetHeight"in e?e:void 0,this.observe(this.props,!0))}},{key:"invisible",value:function(){this&&this.el&&(this.savedChild=!1,this.isShown||(this.setState({hasExited:!0,collapse:this.props.collapse?a({},this.state.collapse,{visibility:"hidden"}):null,style:{opacity:0}}),!p.observerMode&&this.props.collapse&&window.document.dispatchEvent(p.collapseend)))}},{key:"animationEnd",value:function(e,t,n){var r=this,o=n.forever,i=n.count,a=n.delay,l=n.duration;if(!o){this.animationEndTimeout=window.setTimeout(function(){r&&r.el&&(r.animationEndTimeout=void 0,e.call(r))},a+(l+(t?l:0)*i))}}},{key:"getDimensionValue",value:function(){return this.el.offsetHeight+parseInt(window.getComputedStyle(this.el,null).getPropertyValue("margin-top"),10)+parseInt(window.getComputedStyle(this.el,null).getPropertyValue("margin-bottom"),10)}},{key:"collapse",value:function(e,t,n){var r=n.duration+(t.cascade?n.duration:0),o=this.isOn?this.getDimensionValue():0,i=void 0,a=void 0;if(t.collapseOnly)i=n.duration/3,a=n.delay;else{var l=r>>2,s=l>>1;i=l,a=n.delay+(this.isOn?0:r-l-s),e.style.animationDuration=r-l+(this.isOn?s:-s)+"ms",e.style.animationDelay=n.delay+(this.isOn?l-s:0)+"ms"}return e.collapse={height:o,transition:"height "+i+"ms ease "+a+"ms",overflow:t.collapseOnly?"hidden":void 0},e}},{key:"animate",value:function(e){if(this&&this.el&&(this.unlisten(),this.isShown!==this.isOn)){this.isShown=this.isOn;var t=!this.isOn&&e.outEffect,n=e[t?"outEffect":"inEffect"],r="style"in n&&n.style.animationName||void 0,o=void 0;e.collapseOnly?o={hasAppeared:!0,hasExited:!1,style:{opacity:1}}:((e.outEffect||this.isOn)&&n.make&&(r=n.make),o={hasAppeared:!0,hasExited:!1,collapse:void 0,style:a({},n.style,{animationDuration:n.duration+"ms",animationDelay:n.delay+"ms",animationIterationCount:n.forever?"infinite":n.count,opacity:1,animationName:r}),className:n.className}),this.setState(e.collapse?this.collapse(o,e,n):o),t?(this.savedChild=c.default.cloneElement(this.getChild()),this.animationEnd(this.invisible,e.cascade,n)):this.savedChild=!1,this.onReveal(e)}}},{key:"onReveal",value:function(e){e.onReveal&&this.isOn&&(this.onRevealTimeout&&(this.onRevealTimeout=window.clearTimeout(this.onRevealTimeout)),e.wait?this.onRevealTimeout=window.setTimeout(e.onReveal,e.wait):e.onReveal())}},{key:"componentWillUnmount",value:function(){this.unlisten(),p.ssr&&(0,p.disableSsr)()}},{key:"handleObserve",value:function(e,t){i(e,1)[0].intersectionRatio>0&&(t.disconnect(),this.observer=null,this.reveal(this.props,!0))}},{key:"observe",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.el&&p.observerMode){if(this.observer){if(!t)return;this.observer.disconnect()}else if(t)return;this.observer=new IntersectionObserver(this.handleObserve,{threshold:e.fraction}),this.observer.observe(this.el)}}},{key:"reveal",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];p.globalHide||(0,p.hideAll)(),this&&this.el&&(e||(e=this.props),p.ssr&&(0,p.disableSsr)(),this.isOn&&this.isShown&&void 0!==e.spy?(this.isShown=!1,this.setState({style:{}}),window.setTimeout(function(){return t.reveal(e)},200)):n||this.inViewport(e)||e.force?this.animate(e):p.observerMode?this.observe(e):this.listen())}},{key:"componentDidMount",value:function(){var e=this;if(this.el&&!this.props.disabled){this.props.collapseOnly||("make"in this.props.inEffect&&this.props.inEffect.make(!1,this.props),void 0!==this.props.when&&this.props.outEffect&&"make"in this.props.outEffect&&this.props.outEffect.make(!0,this.props));var n=this.context.transitionGroup,r=n&&!n.isMounting?!("enter"in this.props&&!1===this.props.enter):this.props.appear;return this.isOn&&((void 0!==this.props.when||void 0!==this.props.spy)&&!r||p.ssr&&!p.fadeOutEnabled&&!this.props.ssrFadeout&&this.props.outEffect&&!this.props.ssrReveal&&t.getTop(this.el)<window.pageYOffset+window.innerHeight)?(this.isShown=!0,this.setState({hasAppeared:!0,collapse:this.props.collapse?{height:this.getDimensionValue()}:this.state.collapse,style:{opacity:1}}),void this.onReveal(this.props)):p.ssr&&(p.fadeOutEnabled||this.props.ssrFadeout)&&this.props.outEffect&&t.getTop(this.el)<window.pageYOffset+window.innerHeight?(this.setState({style:{opacity:0,transition:"opacity 1000ms 1000ms"}}),void window.setTimeout(function(){return e.reveal(e.props,!0)},2e3)):void(this.isOn&&(this.props.force?this.animate(this.props):this.reveal(this.props)))}}},{key:"cascade",value:function(e){var t=this,n=void 0;n="string"==typeof e?e.split("").map(function(e,t){return c.default.createElement("span",{key:t,style:{display:"inline-block",whiteSpace:"pre"}},e)}):c.default.Children.toArray(e);var r=this.props[this.isOn||!this.props.outEffect?"inEffect":"outEffect"],i=r.duration,l=r.reverse,s=n.length,u=2*i;this.props.collapse&&(u=parseInt(this.state.style.animationDuration,10),i=u/2);var d=l?s:0;return n.map(function(e){return"object"===(void 0===e?"undefined":o(e))&&e?c.default.cloneElement(e,{style:a({},e.props.style,t.state.style,{animationDuration:Math.round((0,p.cascade)(l?d--:d++,0,s,i,u))+"ms"})}):e})}},{key:"componentWillReceiveProps",value:function(e){void 0!==e.when&&(this.isOn=!!e.when),e.fraction!==this.props.fraction&&this.observe(e,!0),!this.isOn&&e.onExited&&"exit"in e&&!1===e.exit?e.onExited():e.disabled||(e.collapse&&!this.props.collapse&&(this.setState({style:{},collapse:t.getInitialCollapseStyle(e)}),this.isShown=!1),e.when===this.props.when&&e.spy===this.props.spy||this.reveal(e),this.onRevealTimeout&&!this.isOn&&(this.onRevealTimeout=window.clearTimeout(this.onRevealTimeout)))}},{key:"getChild",value:function(){if(this.savedChild&&!this.props.disabled)return this.savedChild;if("object"===o(this.props.children)){var e=c.default.Children.only(this.props.children);return"type"in e&&"string"==typeof e.type||"ref"!==this.props.refProp?e:c.default.createElement("div",null,e)}return c.default.createElement("div",null,this.props.children)}},{key:"render",value:function(){var e;e=this.state.hasAppeared?!this.props.unmountOnExit||!this.state.hasExited||this.isOn:!this.props.mountOnEnter||this.isOn;var t=this.getChild();"function"==typeof t.ref&&(this.childRef=t.ref);var n=!1,r=t.props,o=r.style,i=r.className,l=r.children,s=this.props.disabled?i:(this.props.outEffect?p.namespace:"")+(this.state.className?" "+this.state.className:"")+(i?" "+i:"")||void 0,u=void 0;"function"==typeof this.state.style.animationName&&(this.state.style.animationName=this.state.style.animationName(!this.isOn,this.props)),this.props.cascade&&!this.props.disabled&&l&&this.state.style.animationName?(n=this.cascade(l),u=a({},o,{opacity:1})):u=this.props.disabled?o:a({},o,this.state.style);var d=a({},this.props.props,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({className:s,style:u},this.props.refProp,this.saveRef)),f=c.default.cloneElement(t,d,e?n||l:void 0);return void 0!==this.props.collapse?this.props.collapseEl?c.default.cloneElement(this.props.collapseEl,{style:a({},this.props.collapseEl.style,this.props.disabled?void 0:this.state.collapse),children:f}):c.default.createElement("div",{style:this.props.disabled?void 0:this.state.collapse,children:f}):f}},{key:"makeHandler",value:function(e){var t=this,n=function(){e.call(t,t.props),t.ticking=!1};return function(){t.ticking||((0,p.raf)(n),t.ticking=!0)}}},{key:"inViewport",value:function(e){if(!this.el||window.document.hidden)return!1;var n=this.el.offsetHeight,r=window.pageYOffset-t.getTop(this.el),o=Math.min(n,window.innerHeight)*(p.globalHide?e.fraction:0);return r>o-window.innerHeight&&r<n-o}},{key:"resize",value:function(e){this&&this.el&&this.isOn&&this.inViewport(e)&&(this.unlisten(),this.isShown=this.isOn,this.setState({hasExited:!this.isOn,hasAppeared:!0,collapse:void 0,style:{opacity:this.isOn||!e.outEffect?1:0}}),this.onReveal(e))}},{key:"listen",value:function(){p.observerMode||this.isListener||(this.isListener=!0,window.addEventListener("scroll",this.revealHandler,{passive:!0}),window.addEventListener("orientationchange",this.revealHandler,{passive:!0}),window.document.addEventListener("visibilitychange",this.revealHandler,{passive:!0}),window.document.addEventListener("collapseend",this.revealHandler,{passive:!0}),window.addEventListener("resize",this.resizeHandler,{passive:!0}))}},{key:"unlisten",value:function(){!p.observerMode&&this.isListener&&(window.removeEventListener("scroll",this.revealHandler,{passive:!0}),window.removeEventListener("orientationchange",this.revealHandler,{passive:!0}),window.document.removeEventListener("visibilitychange",this.revealHandler,{passive:!0}),window.document.removeEventListener("collapseend",this.revealHandler,{passive:!0}),window.removeEventListener("resize",this.resizeHandler,{passive:!0}),this.isListener=!1),this.onRevealTimeout&&(this.onRevealTimeout=window.clearTimeout(this.onRevealTimeout)),this.animationEndTimeout&&(this.animationEndTimeout=window.clearTimeout(this.animationEndTimeout))}}],[{key:"getInitialCollapseStyle",value:function(e){return{height:0,visibility:e.when?void 0:"hidden"}}},{key:"getTop",value:function(e){for(;void 0===e.offsetTop;)e=e.parentNode;for(var t=e.offsetTop;e.offsetParent;t+=e.offsetTop)e=e.offsetParent;return t}}]),t}();m.propTypes=f,m.defaultProps={fraction:.2,refProp:"ref"},m.contextTypes=h,m.displayName="RevealBase",t.default=m,e.exports=t.default},1086:function(e,t,n){"use strict";function r(e,t){var n=t.left,r=t.right,o=t.up,i=t.down,a=t.top,l=t.bottom,s=t.mirror,u=t.opposite,d=(n?1:0)|(r?2:0)|(a||i?4:0)|(l||o?8:0)|(s?16:0)|(u?32:0)|(e?64:0);if(p.hasOwnProperty(d))return p[d];if(!s!=!(e&&u)){var f=[r,n,l,a,i,o];n=f[0],r=f[1],a=f[2],l=f[3],o=f[4],i=f[5]}var h,m=n||r,y=a||l||o||i,b=void 0,g=void 0,v=void 0,_=void 0,w=void 0,O=void 0,S=void 0,E=void 0,k=void 0,C=void 0,P=void 0,T=void 0,x=void 0;return e?(v=m?(r?"-":"")+"20px":0,_=y?(o||l?"":"-")+"10px":"0",w=(i||a?"":"-")+"20px",T=m?(n?"-":"")+"2000px":"0",x=y?(i||a?"-":"")+"2000px":"0"):(b=m?(n?"-":"")+"3000px":"0",g=y?(i||a?"-":"")+"3000px":"0",O=m?(r?"-":"")+"25px":"0",S=y?(o||l?"-":"")+"25px":"0",E=m?(n?"-":"")+"10px":"0",k=y?(i||a?"-":"")+"10px":"0",C=m?(r?"-":"")+"5px":"0",P=y?(o||l?"-":"")+"5px":"0"),h=m||y?e?"\n        20% {\n          transform: translate3d("+v+", "+_+", 0);\n          }\n        "+(y?"40%, 45% {\n            opacity: 1;\n            transform: translate3d(0, "+w+", 0);\n          }":"")+"\n          to {\n            opacity: 0;\n            transform: translate3d("+T+", "+x+", 0);\n        }\n      ":"from, 60%, 75%, 90%, to {\n        animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);\n      }\n      from {\n        opacity: 0;\n        transform: translate3d("+b+", "+g+", 0);\n      }\n      60% {\n        opacity: 1;\n        transform: translate3d("+O+", "+S+", 0);\n      }\n      75% {\n        transform: translate3d("+E+", "+k+", 0);\n      }\n      90% {\n        transform: translate3d("+C+", "+P+", 0);\n      }\n      to {\n        transform: none;\n      }":e?"20% {\n          transform: scale3d(.9, .9, .9);\n        }\n        50%, 55% {\n          opacity: 1;\n          transform: scale3d(1.1, 1.1, 1.1);\n        }\n        to {\n          opacity: 0;\n          transform: scale3d(.3, .3, .3);\n      }":"from, 20%, 40%, 60%, 80%, to {\n        animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);\n      }\n      0% {\n        opacity: 0;\n        transform: scale3d(.3, .3, .3);\n      }\n      20% {\n        transform: scale3d(1.1, 1.1, 1.1);\n      }\n      40% {\n        transform: scale3d(.9, .9, .9);\n      }\n      60% {\n        opacity: 1;\n        transform: scale3d(1.03, 1.03, 1.03);\n      }\n      80% {\n        transform: scale3d(.97, .97, .97);\n      }\n      to {\n        opacity: 1;\n        transform: scale3d(1, 1, 1);\n      }",p[d]=(0,c.animation)(h),p[d]}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.defaults,t=e.children,n=(e.out,e.forever),o=e.timeout,i=e.duration,a=void 0===i?c.defaults.duration:i,l=e.delay,u=void 0===l?c.defaults.delay:l,p=e.count,d=void 0===p?c.defaults.count:p,f=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children","out","forever","timeout","duration","delay","count"]),h={make:r,duration:void 0===o?a:o,delay:u,forever:n,count:d,style:{animationFillMode:"both"},reverse:f.left};return(0,s.default)(f,h,h,t)}Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(4),l=n(809),s=(i=l)&&i.__esModule?i:{default:i},c=n(806),u={out:a.bool,left:a.bool,right:a.bool,top:a.bool,bottom:a.bool,mirror:a.bool,opposite:a.bool,duration:a.number,timeout:a.number,delay:a.number,count:a.number,forever:a.bool},p={};o.propTypes=u,t.default=o,e.exports=t.default},1087:function(e,t,n){"use strict";function r(e,t){var n=t.left,r=t.right,o=t.up,i=t.down,a=t.top,l=t.bottom,s=t.big,u=t.mirror,d=t.opposite,f=(n?1:0)|(r?2:0)|(a||i?4:0)|(l||o?8:0)|(u?16:0)|(d?32:0)|(e?64:0)|(s?128:0);if(p.hasOwnProperty(f))return p[f];if(!u!=!(e&&d)){var h=[r,n,l,a,i,o];n=h[0],r=h[1],a=h[2],l=h[3],o=h[4],i=h[5]}var m=s?"2000px":"100%",y=n?"-"+m:r?m:"0",b=i||a?"-"+m:o||l?m:"0";return p[f]=(0,c.animation)("\n    "+(e?"to":"from")+" {opacity: 0;transform: translate3d("+y+", "+b+", 0) rotate3d(0, 0, 1, -120deg);}\n\t  "+(e?"from":"to")+" {opacity: 1;transform: none}\n  "),p[f]}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.defaults,t=e.children,n=(e.out,e.forever),o=e.timeout,i=e.duration,a=void 0===i?c.defaults.duration:i,s=e.delay,u=void 0===s?c.defaults.delay:s,p=e.count,d=void 0===p?c.defaults.count:p,f=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children","out","forever","timeout","duration","delay","count"]),h={make:r,duration:void 0===o?a:o,delay:u,forever:n,count:d,style:{animationFillMode:"both"}};return(0,l.default)(f,h,h,t)}Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(809),l=(i=a)&&i.__esModule?i:{default:i},s=n(4),c=n(806),u={out:s.bool,left:s.bool,right:s.bool,top:s.bool,bottom:s.bool,big:s.bool,mirror:s.bool,opposite:s.bool,duration:s.number,timeout:s.number,delay:s.number,count:s.number,forever:s.bool},p={};o.propTypes=u,t.default=o,e.exports=t.default},1088:function(e,t,n){"use strict";function r(e,t){var n=t.left,r=t.right,o=t.up,i=t.down,a=t.top,l=t.bottom,s=t.big,u=t.mirror,d=t.opposite,f=(n?1:0)|(r?2:0)|(a||i?4:0)|(l||o?8:0)|(u?16:0)|(d?32:0)|(e?64:0)|(s?128:0);if(p.hasOwnProperty(f))return p[f];var h=n||r||o||i||a||l,m=void 0,y=void 0;if(h){if(!u!=!(e&&d)){var b=[r,n,l,a,i,o];n=b[0],r=b[1],a=b[2],l=b[3],o=b[4],i=b[5]}var g=s?"2000px":"100%";m=n?"-"+g:r?g:"0",y=i||a?"-"+g:o||l?g:"0"}return p[f]=(0,c.animation)((e?"to":"from")+" {"+(h?" transform: translate3d("+m+", "+y+", 0);":"")+"}\n     "+(e?"from":"to")+" {transform: none;} "),p[f]}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.defaults,t=e.children,n=(e.out,e.forever),o=e.timeout,i=e.duration,a=void 0===i?c.defaults.duration:i,l=e.delay,u=void 0===l?c.defaults.delay:l,p=e.count,d=void 0===p?c.defaults.count:p,f=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children","out","forever","timeout","duration","delay","count"]),h={make:r,duration:void 0===o?a:o,delay:u,forever:n,count:d,style:{animationFillMode:"both"},reverse:f.left};return(0,s.default)(f,h,h,t)}Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(4),l=n(809),s=(i=l)&&i.__esModule?i:{default:i},c=n(806),u={out:a.bool,left:a.bool,right:a.bool,top:a.bool,bottom:a.bool,big:a.bool,mirror:a.bool,opposite:a.bool,duration:a.number,timeout:a.number,delay:a.number,count:a.number,forever:a.bool},p={};o.propTypes=u,t.default=o,e.exports=t.default},1089:function(e,t,n){"use strict";function r(e,t){var n=t.left,r=t.right,o=t.top,i=t.bottom,a=t.x,l=t.y,s=t.mirror,u=t.opposite,d=(n?1:0)|(r||l?2:0)|(o||a?4:0)|(i?8:0)|(s?16:0)|(u?32:0)|(e?64:0);if(p.hasOwnProperty(d))return p[d];if(!s!=!(e&&u)){var f=[r,n,i,o,l,a];n=f[0],r=f[1],o=f[2],i=f[3],a=f[4],l=f[5]}var h=void 0;if(a||l||n||r||o||i){var m=a||o||i?(i?"-":"")+"1":"0",y=l||r||n?(n?"-":"")+"1":"0";h=e?"from {\n          transform: perspective(400px);\n        }\n        30% {\n          transform: perspective(400px) rotate3d("+m+", "+y+", 0, -15deg);\n          opacity: 1;\n        }\n        to {\n          transform: perspective(400px) rotate3d("+m+", "+y+", 0, 90deg);\n          opacity: 0;\n        }":"from {\n          transform: perspective(400px) rotate3d("+m+", "+y+", 0, 90deg);\n          animation-timing-function: ease-in;\n          opacity: 0;\n        }\n        40% {\n          transform: perspective(400px) rotate3d("+m+", "+y+", 0, -20deg);\n          animation-timing-function: ease-in;\n        }\n        60% {\n          transform: perspective(400px) rotate3d("+m+", "+y+", 0, 10deg);\n          opacity: 1;\n        }\n        80% {\n          transform: perspective(400px) rotate3d("+m+", "+y+", 0, -5deg);\n        }\n        to {\n          transform: perspective(400px);\n        }"}else h="from {\n          transform: perspective(400px) rotate3d(0, 1, 0, -360deg);\n          animation-timing-function: ease-out;\n          opacity: "+(e?"1":"0")+";\n        }\n        40% {\n          transform: perspective(400px) translate3d(0, 0, 150px) rotate3d(0, 1, 0, -190deg);\n          animation-timing-function: ease-out;\n        }\n        50% {\n          transform: perspective(400px) translate3d(0, 0, 150px) rotate3d(0, 1, 0, -170deg);\n          animation-timing-function: ease-in;\n        }\n        to {\n          transform: perspective(400px);\n          animation-timing-function: ease-in;\n          opacity: "+(e?"0":"1")+";\n        }";return p[d]=(0,c.animation)(h),p[d]}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.defaults,t=e.children,n=(e.out,e.forever),o=e.timeout,i=e.duration,a=void 0===i?c.defaults.duration:i,l=e.delay,u=void 0===l?c.defaults.delay:l,p=e.count,d=void 0===p?c.defaults.count:p,f=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children","out","forever","timeout","duration","delay","count"]),h={make:r,duration:void 0===o?a:o,delay:u,forever:n,count:d,style:{animationFillMode:"both",backfaceVisibility:"visible"}};return(0,s.default)(f,h,h,t)}Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(4),l=n(809),s=(i=l)&&i.__esModule?i:{default:i},c=n(806),u={out:a.bool,left:a.bool,right:a.bool,top:a.bool,bottom:a.bool,mirror:a.bool,opposite:a.bool,duration:a.number,timeout:a.number,delay:a.number,count:a.number,forever:a.bool},p={};o.propTypes=u,t.default=o,e.exports=t.default},1090:function(e,t,n){"use strict";function r(e,t){var n=t.left,r=t.right,o=t.up,i=t.down,a=t.top,l=t.bottom,s=t.mirror,u=t.opposite,d=(n?1:0)|(r?2:0)|(a||i?4:0)|(l||o?8:0)|(s?16:0)|(u?32:0)|(e?64:0);if(p.hasOwnProperty(d))return p[d];if(!s!=!(e&&u)){var f=[r,n,l,a,i,o];n=f[0],r=f[1],a=f[2],l=f[3],o=f[4],i=f[5]}var h="-200deg",m="center";return(i||a)&&n&&(h="-45deg"),((i||a)&&r||(o||l)&&n)&&(h="45deg"),(o||l)&&r&&(h="-90deg"),(n||r)&&(m=(n?"left":"right")+" bottom"),p[d]=(0,c.animation)("\n    "+(e?"to":"from")+" { opacity: 0; transform-origin: "+m+"; transform: rotate3d(0, 0, 1, "+h+");}\n    "+(e?"from":"to")+" { opacity: 1; transform-origin: "+m+"; transform: none;}\n  "),p[d]}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.defaults,t=e.children,n=(e.out,e.forever),o=e.timeout,i=e.duration,a=void 0===i?c.defaults.duration:i,l=e.delay,u=void 0===l?c.defaults.delay:l,p=e.count,d=void 0===p?c.defaults.count:p,f=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children","out","forever","timeout","duration","delay","count"]),h={make:r,duration:void 0===o?a:o,delay:u,forever:n,count:d,style:{animationFillMode:"both"}};return(0,s.default)(f,h,h,t)}Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(4),l=n(809),s=(i=l)&&i.__esModule?i:{default:i},c=n(806),u={out:a.bool,left:a.bool,right:a.bool,top:a.bool,bottom:a.bool,mirror:a.bool,opposite:a.bool,duration:a.number,timeout:a.number,delay:a.number,count:a.number,forever:a.bool},p={};o.propTypes=u,t.default=o,e.exports=t.default},1091:function(e,t,n){"use strict";function r(e,t){var n=t.left,r=t.right,o=t.mirror,i=t.opposite,a=(n?1:0)|(r?2:0)|(o?16:0)|(i?32:0)|(e?64:0);if(p.hasOwnProperty(a))return p[a];if(!o!=!(e&&i)){var l=[r,n];n=l[0],r=l[1]}var s=n?"-100%":r?"100%":"0",u=e?"from {\n        opacity: 1;\n      }\n      to {\n        transform: translate3d("+s+", 0, 0) skewX(30deg);\n        opacity: 0;\n      }\n    ":"from {\n        transform: translate3d("+s+", 0, 0) skewX(-30deg);\n        opacity: 0;\n      }\n      60% {\n        transform: skewX(20deg);\n        opacity: 1;\n      }\n      80% {\n        transform: skewX(-5deg);\n        opacity: 1;\n      }\n      to {\n        transform: none;\n        opacity: 1;\n      }";return p[a]=(0,c.animation)(u),p[a]}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.defaults,t=e.children,n=(e.out,e.forever),o=e.timeout,i=e.duration,a=void 0===i?c.defaults.duration:i,s=e.delay,u=void 0===s?c.defaults.delay:s,p=e.count,d=void 0===p?c.defaults.count:p,f=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children","out","forever","timeout","duration","delay","count"]),h={make:r,duration:void 0===o?a:o,delay:u,forever:n,count:d,style:{animationFillMode:"both"}};return f.left,f.right,f.mirror,f.opposite,(0,l.default)(f,h,h,t)}Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(809),l=(i=a)&&i.__esModule?i:{default:i},s=n(4),c=n(806),u={out:s.bool,left:s.bool,right:s.bool,mirror:s.bool,opposite:s.bool,duration:s.number,timeout:s.number,delay:s.number,count:s.number,forever:s.bool},p={};o.propTypes=u,t.default=o,e.exports=t.default},1092:function(e,t,n){"use strict";function r(e,t){var n=t.left,r=t.right,o=t.up,i=t.down,a=t.top,l=t.bottom,s=t.mirror,u=t.opposite,d=(n?1:0)|(r?2:0)|(a||i?4:0)|(l||o?8:0)|(s?16:0)|(u?32:0)|(e?64:0);if(p.hasOwnProperty(d))return p[d];if(!s!=!(e&&u)){var f=[r,n,l,a,i,o];n=f[0],r=f[1],a=f[2],l=f[3],o=f[4],i=f[5]}var h=n||r,m=a||l||o||i,y=void 0;return h||m?e?y="40% {\n          opacity: 1;\n          transform: scale3d(.475, .475, .475) translate3d("+(h?(n?"":"-")+"42px":"0")+", "+(m?(i||a?"-":"")+"60px":"0")+", 0);\n        }\n        to {\n          opacity: 0;\n          transform: scale(.1) translate3d("+(h?(r?"":"-")+"2000px":"0")+", "+(m?(o||l?"":"-")+"2000px":"0")+", 0);\n          transform-origin: "+(m?"center bottom":(n?"left":"right")+" center")+";\n        }":y="from {\n          opacity: 0;\n          transform: scale3d(.1, .1, .1) translate3d("+(h?(n?"-":"")+"1000px":"0")+", "+(m?(i||a?"-":"")+"1000px":"0")+", 0);\n          animation-timing-function: cubic-bezier(0.550, 0.055, 0.675, 0.190);\n        }\n        60% {\n          opacity: 1;\n          transform: scale3d(.475, .475, .475) translate3d("+(h?(r?"-":"")+"10px":"0")+", "+(m?(o||l?"-":"")+"60px":"0")+", 0);\n          animation-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1);\n        }":y=(e?"to":"from")+" {opacity: 0; transform: scale3d(.1, .1, .1);} "+(e?"from":"to")+" { opacity: 1; transform: none;}",p[d]=(0,c.animation)(y),p[d]}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.defaults,t=e.children,n=(e.out,e.forever),o=e.timeout,i=e.duration,a=void 0===i?c.defaults.duration:i,l=e.delay,u=void 0===l?c.defaults.delay:l,p=e.count,d=void 0===p?c.defaults.count:p,f=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children","out","forever","timeout","duration","delay","count"]),h={make:r,duration:void 0===o?a:o,delay:u,forever:n,count:d,style:{animationFillMode:"both"},reverse:f.left};return(0,s.default)(f,h,h,t)}Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(4),l=n(809),s=(i=l)&&i.__esModule?i:{default:i},c=n(806),u={out:a.bool,left:a.bool,right:a.bool,top:a.bool,bottom:a.bool,mirror:a.bool,opposite:a.bool,duration:a.number,timeout:a.number,delay:a.number,count:a.number,forever:a.bool},p={};o.propTypes=u,t.default=o,e.exports=t.default},1093:function(e,t,n){},1094:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__3ybLz",framedImage:"styles-module__framedImage__1LRLJ",optionGroup:"styles-module__optionGroup__2f4nW",groupHeader:"styles-module__groupHeader__1pzK0",optionWrapper:"styles-module__optionWrapper__10YFL",optionLabelWrapper:"styles-module__optionLabelWrapper__Nj0Ws"}},1095:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var r=n(0),o=n(9),i=n(17),a=n(2),l=n(5),s=n.n(l),c=n(12),u=n(72);function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var y=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":m(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},b=n(221),g=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=d(t).call(this,e))||"object"!==m(o)&&"function"!=typeof o?f(r):o,Object.defineProperty(f(n),"urlData",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(f(n),"clipboards",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(f(n),"sessionButton",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(f(n),"bitlyButton",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(f(n),"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object(a.makeObservable)(f(n)),n}var n,o,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){var e=this;this.props.urlPromise.then(function(t){e.urlData=t,setTimeout(function(){e.initializeClipboards()},0)},function(){})}},{key:"showThumb",value:function(e){e.target.className="fa fa-thumbs-up"}},{key:"initializeClipboards",value:function(){this.clipboards.push(new b(this.sessionButton,{text:function(){return this.urlData.fullUrl}.bind(this),container:this.container})),this.urlData&&this.urlData.bitlyUrl&&this.clipboards.push(new b(this.bitlyButton,{text:function(){return this.urlData.bitlyUrl}.bind(this),container:this.container}))}},{key:"componentWillUnmount",value:function(){this.clipboards.forEach(function(e){return e.destroy()})}},{key:"render",value:function(){var e=this;return r.createElement(i.Modal,{show:!0,onHide:this.props.onHide},r.createElement(i.Modal.Header,{closeButton:!0},r.createElement(i.Modal.Title,null,this.props.title)),r.createElement(i.Modal.Body,{style:{minHeight:70}},r.createElement(u.a,{size:"big",center:!0,style:{top:32},isLoading:!this.urlData}),r.createElement("div",{className:s()({hidden:!this.urlData}),ref:function(t){return e.container=t}},r.createElement("form",null,r.createElement("div",{className:"form-group"},r.createElement("p",null,this.props.description),r.createElement("div",{className:"input-group"},r.createElement("input",{type:"text",className:"form-control",value:this.urlData?this.urlData.fullUrl:""}),r.createElement("div",{className:"input-group-addon"},r.createElement("a",{ref:function(t){return e.sessionButton=t},onClick:this.showThumb},r.createElement("i",{className:"fa fa-clipboard"}))))),this.urlData&&this.urlData.bitlyUrl&&r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"exampleInputAmount"},"Shortened URL"),r.createElement("div",{className:"input-group"},r.createElement("input",{type:"text",className:"form-control",value:this.urlData?this.urlData.bitlyUrl:""}),r.createElement("div",{className:"input-group-addon"},r.createElement("a",{onClick:this.showThumb,ref:function(t){return e.bitlyButton=t}},r.createElement("i",{className:"fa fa-clipboard"})))))))))}}])&&p(n.prototype,o),l&&p(n,l),t}();y([a.observable],g.prototype,"urlData",void 0),y([c.default],g.prototype,"showThumb",null),y([c.default],g.prototype,"initializeClipboards",null),g=y([o.observer],g)},1096:function(e,t,n){"use strict";(function(e){var r=n(0),o=n(72),i=n(9),a=n(2),l=n(1164),s=n(1),c=n.n(s),u=n(12),p=n(3),d=n(118),f=n(328),h=n(49),m=n(29),y=n(220),b=n(31),g=n(337),v=n(1165);function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var k,C=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":E(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},P="comparison-tab-overlap-svg";!function(e){e[e.Upset=0]="Upset",e[e.Venn=1]="Venn"}(k||(k={}));var T=function(t){function n(e){var t,i,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),i=this,s=w(n).call(this,e),t=!s||"object"!==E(s)&&"function"!=typeof s?O(i):s,Object.defineProperty(O(t),"vennFailed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(O(t),"tabUI",{enumerable:!0,configurable:!0,writable:!0,value:Object(d.a)({await:function(){return t.props.store._selectedGroups.isComplete&&t.props.store._selectedGroups.result.length<2?[t.props.store._selectedGroups]:[t.props.store._selectedGroups,t.overlapUI]},render:function(){var e=[];return t.props.store._selectedGroups.result.length<2?e.push(r.createElement("span",null,h.g)):(e.push(r.createElement(g.a,{overlapTabMode:!0,store:t.props.store})),t.vennFailed&&e.push(r.createElement("div",{className:"alert alert-info"},"We couldn't find a good Venn diagram layout, so showing UpSet diagram instead.")),e.push(t.overlapUI.component)),r.createElement("div",{"data-test":"ComparisonPageOverlapTabDiv"},e)},renderPending:function(){return r.createElement(o.a,{isLoading:!0,center:!0,size:"big"})},renderError:function(){return r.createElement(f.a,null)}})}),Object.defineProperty(O(t),"plotType",{enumerable:!0,configurable:!0,writable:!0,value:Object(p.vb)({await:function(){return[t.props.store._selectedGroups]},invoke:function(){return t.vennFailed||t.props.store._selectedGroups.result.length>3?Promise.resolve(k.Upset):Promise.resolve(k.Venn)}})}),Object.defineProperty(O(t),"sampleGroupsWithCases",{enumerable:!0,configurable:!0,writable:!0,value:Object(p.vb)({await:function(){return[t.props.store._selectedGroups,t.props.store.sampleMap]},invoke:function(){var e=t.props.store.sampleMap.result,n=c.a.map(t.props.store._selectedGroups.result,function(t){var n=Object(h.x)([t]).map(function(t){return e.get({studyId:t.studyId,sampleId:t.sampleId})});return{uid:t.uid,cases:c.a.map(n,function(e){return e.uniqueSampleKey})}});return Promise.resolve(n)}},[])}),Object.defineProperty(O(t),"patientGroupsWithCases",{enumerable:!0,configurable:!0,writable:!0,value:Object(p.vb)({await:function(){return[t.props.store._selectedGroups,t.props.store.sampleMap]},invoke:function(){var e=t.props.store.sampleMap.result,n=c.a.map(t.props.store._selectedGroups.result,function(t){var n=Object(h.x)([t]).map(function(t){return e.get({studyId:t.studyId,sampleId:t.sampleId})});return{uid:t.uid,cases:c.a.uniq(c.a.map(n,function(e){return e.uniquePatientKey}))}});return Promise.resolve(n)}},[])}),Object.defineProperty(O(t),"activeSamples",{enumerable:!0,configurable:!0,writable:!0,value:Object(p.vb)({await:function(){return[t.props.store._selectedGroups,t.props.store.sampleMap]},invoke:function(){var e=t.props.store.sampleMap.result,n=Object(h.x)(t.props.store._selectedGroups.result).map(function(t){return e.get(t)});return Promise.resolve(n)}})}),Object.defineProperty(O(t),"samplesVennPartition",{enumerable:!0,configurable:!0,writable:!0,value:Object(p.vb)({await:function(){return[t.props.store._selectedGroups,t.props.store.sampleMap,t.activeSamples]},invoke:function(){var e=t.props.store.sampleMap.result;return Promise.resolve(Object(h.E)(t.props.store._selectedGroups.result,function(e){return Object(h.x)([e])},function(t){return e.get({studyId:t.studyId,sampleId:t.sampleId}).uniqueSampleKey},t.activeSamples.result.map(function(e){return e.uniqueSampleKey})))}})}),Object.defineProperty(O(t),"patientsVennPartition",{enumerable:!0,configurable:!0,writable:!0,value:Object(p.vb)({await:function(){return[t.props.store._selectedGroups,t.props.store.patientToSamplesSet,t.activeSamples]},invoke:function(){var e=t.props.store.patientToSamplesSet.result;return Promise.resolve(Object(h.E)(t.props.store._selectedGroups.result,function(e){return Object(b.lb)([e])},function(t){return e.get({studyId:t.studyId,patientId:t.patientId})[0].uniquePatientKey},c.a.uniq(t.activeSamples.result.map(function(e){return e.uniquePatientKey}))))}})}),Object.defineProperty(O(t),"uidToGroup",{enumerable:!0,configurable:!0,writable:!0,value:Object(p.vb)({await:function(){return[t.props.store._selectedGroups]},invoke:function(){return Promise.resolve(c.a.keyBy(t.props.store._selectedGroups.result,function(e){return e.uid}))}})}),Object.defineProperty(O(t),"plot",{enumerable:!0,configurable:!0,writable:!0,value:Object(d.a)({await:function(){return[t.plotType,t.samplesVennPartition,t.patientsVennPartition,t.sampleGroupsWithCases,t.patientGroupsWithCases,t.uidToGroup]},render:function(){var e=null;switch(t.plotType.result){case k.Upset:e=r.createElement(v.a,{store:t.props.store,sideBySide:t.areUpsetPlotsSidebySide,maxWidth:t.maxWidth,samplesVennPartition:t.samplesVennPartition.result,patientsVennPartition:t.patientsVennPartition.result,uidToGroup:t.uidToGroup.result});break;case k.Venn:e=r.createElement(l.a,{svgId:P,sampleGroups:t.sampleGroupsWithCases.result,patientGroups:t.patientGroupsWithCases.result,uidToGroup:t.uidToGroup.result,store:t.props.store,onLayoutFailure:t.onVennLayoutFailure});break;default:return r.createElement("span",null,"Not implemented yet")}return e},renderPending:function(){return r.createElement(o.a,{isLoading:!0,size:"big"})},renderError:function(){return r.createElement(f.a,null)}})}),Object.defineProperty(O(t),"overlapUI",{enumerable:!0,configurable:!0,writable:!0,value:Object(d.a)({await:function(){return[t.plot]},render:function(){return r.createElement("div",{"data-test":"ComparisonPageOverlapTabContent",className:"borderedChart posRelative"},t.plotExists&&r.createElement(p.j,{getSvg:t.getSvg,getData:t.props.store.getGroupsDownloadDataPromise,buttons:["SVG","PNG","PDF","Data"],filename:"overlap",dontFade:!0,style:{position:"absolute",right:10,top:10},type:"button"}),r.createElement("div",{style:{position:"relative",display:"inline-block"}},t.plot.component))},renderPending:function(){return r.createElement(o.a,{isLoading:!0,centerRelativeToContainer:!0,size:"big"})},renderError:function(){return r.createElement(f.a,null)}})}),Object(a.makeObservable)(O(t)),window.blah=O(t),t}var i,s,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(n,r["Component"]),i=n,(s=[{key:"onVennLayoutFailure",value:function(){this.vennFailed=!0}},{key:"getSvg",value:function(){if(this.plotType.result===k.Upset){var t=m.findDOMNode(this),n=document.createElementNS("http://www.w3.org/2000/svg","svg"),r=e(t).find("svg"),o=r[0].cloneNode(!0),i=r[1].cloneNode(!0);e(t).find("svg");var a=0,l=0;return n.appendChild(o),this.areUpsetPlotsSidebySide?(i.setAttribute("x","".concat(e(o).width())),a=Math.max(e(o).height(),e(i).height()),l=e(o).width()+e(i).width()):(i.setAttribute("y","".concat(e(o).height())),a=e(o).height()+e(i).height(),l=Math.max(e(o).width(),e(i).width())),e(n).attr("height",a),e(n).attr("width",l),e(n).css({height:a,width:l}),n.appendChild(i),n}return document.getElementById(P)}},{key:"render",value:function(){return r.createElement("div",{className:"inlineBlock"},this.tabUI.component)}},{key:"plotExists",get:function(){return this.plotType.isComplete&&!this.vennFailed}},{key:"areUpsetPlotsSidebySide",get:function(){return!this.samplesVennPartition.isComplete||!this.patientsVennPartition.isComplete||this.samplesVennPartition.result.length+this.patientsVennPartition.result.length<=100}},{key:"maxWidth",get:function(){return y.a.size.width-80}}])&&_(i.prototype,s),u&&_(i,u),n}();C([a.observable],T.prototype,"vennFailed",void 0),C([a.computed],T.prototype,"plotExists",null),C([a.action.bound],T.prototype,"onVennLayoutFailure",null),C([u.default],T.prototype,"getSvg",null),C([a.computed],T.prototype,"areUpsetPlotsSidebySide",null),C([a.computed],T.prototype,"maxWidth",null),T=C([i.observer],T),t.a=T}).call(this,n(26))},1097:function(e,t,n){!function(e){"use strict";function t(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=0;return t}function n(e,t){for(var n=0,r=0;r<e.length;++r)n+=e[r]*t[r];return n}function r(e){return Math.sqrt(n(e,e))}function o(e,t,n){for(var r=0;r<t.length;++r)e[r]=t[r]*n}function i(e,t,n,r,o){for(var i=0;i<e.length;++i)e[i]=t*n[i]+r*o[i]}function a(e,t,r,o,a,l,s){var c=r.fx,u=n(r.fxprime,t),p=c,d=c,f=u,h=0;function m(d,h,m){for(var y=0;y<16;++y)if(a=(d+h)/2,i(o.x,1,r.x,a,t),p=o.fx=e(o.x,o.fxprime),f=n(o.fxprime,t),p>c+l*a*u||p>=m)h=a;else{if(Math.abs(f)<=-s*u)return a;f*(h-d)>=0&&(h=d),d=a,m=p}return 0}a=a||1,l=l||1e-6,s=s||.1;for(var y=0;y<10;++y){if(i(o.x,1,r.x,a,t),p=o.fx=e(o.x,o.fxprime),f=n(o.fxprime,t),p>c+l*a*u||y&&p>=d)return m(h,a,d);if(Math.abs(f)<=-s*u)return a;if(f>=0)return m(a,h,p);d=p,h=a,a*=2}return a}e.bisect=function(e,t,n,r){var o=(r=r||{}).maxIterations||100,i=r.tolerance||1e-10,a=e(t),l=e(n),s=n-t;if(a*l>0)throw"Initial bisect points must have opposite signs";if(0===a)return t;if(0===l)return n;for(var c=0;c<o;++c){var u=t+(s/=2),p=e(u);if(p*a>=0&&(t=u),Math.abs(s)<i||0===p)return u}return t+s},e.nelderMead=function(e,t,n){var r,o=(n=n||{}).maxIterations||200*t.length,a=n.nonZeroDelta||1.05,l=n.zeroDelta||.001,s=n.minErrorDelta||1e-6,c=n.minErrorDelta||1e-5,u=void 0!==n.rho?n.rho:1,p=void 0!==n.chi?n.chi:2,d=void 0!==n.psi?n.psi:-.5,f=void 0!==n.sigma?n.sigma:.5,h=t.length,m=new Array(h+1);m[0]=t,m[0].fx=e(t),m[0].id=0;for(var y=0;y<h;++y){var b=t.slice();b[y]=b[y]?b[y]*a:l,m[y+1]=b,m[y+1].fx=e(b),m[y+1].id=y+1}function g(e){for(var t=0;t<e.length;t++)m[h][t]=e[t];m[h].fx=e.fx}for(var v=function(e,t){return e.fx-t.fx},_=t.slice(),w=t.slice(),O=t.slice(),S=t.slice(),E=0;E<o;++E){if(m.sort(v),n.history){var k=m.map(function(e){var t=e.slice();return t.fx=e.fx,t.id=e.id,t});k.sort(function(e,t){return e.id-t.id}),n.history.push({x:m[0].slice(),fx:m[0].fx,simplex:k})}for(r=0,y=0;y<h;++y)r=Math.max(r,Math.abs(m[0][y]-m[1][y]));if(Math.abs(m[0].fx-m[h].fx)<s&&r<c)break;for(y=0;y<h;++y){_[y]=0;for(var C=0;C<h;++C)_[y]+=m[C][y];_[y]/=h}var P=m[h];if(i(w,1+u,_,-u,P),w.fx=e(w),w.fx<m[0].fx)i(S,1+p,_,-p,P),S.fx=e(S),S.fx<w.fx?g(S):g(w);else if(w.fx>=m[h-1].fx){var T=!1;if(w.fx>P.fx?(i(O,1+d,_,-d,P),O.fx=e(O),O.fx<P.fx?g(O):T=!0):(i(O,1-d*u,_,d*u,P),O.fx=e(O),O.fx<w.fx?g(O):T=!0),T){if(f>=1)break;for(y=1;y<m.length;++y)i(m[y],1-f,m[0],f,m[y]),m[y].fx=e(m[y])}}else g(w)}return m.sort(v),{fx:m[0].fx,x:m[0]}},e.conjugateGradient=function(e,t,l){var s,c,u,p={x:t.slice(),fx:0,fxprime:t.slice()},d={x:t.slice(),fx:0,fxprime:t.slice()},f=t.slice(),h=1;u=(l=l||{}).maxIterations||20*t.length,p.fx=e(p.x,p.fxprime),o(s=p.fxprime.slice(),p.fxprime,-1);for(var m=0;m<u;++m){if(h=a(e,s,p,d,h),l.history&&l.history.push({x:p.x.slice(),fx:p.fx,fxprime:p.fxprime.slice(),alpha:h}),h){i(f,1,d.fxprime,-1,p.fxprime);var y=n(p.fxprime,p.fxprime),b=Math.max(0,n(f,d.fxprime)/y);i(s,b,s,-1,d.fxprime),c=p,p=d,d=c}else o(s,p.fxprime,-1);if(r(p.fxprime)<=1e-5)break}return l.history&&l.history.push({x:p.x.slice(),fx:p.fx,fxprime:p.fxprime.slice(),alpha:h}),p},e.gradientDescent=function(e,t,n){for(var o=(n=n||{}).maxIterations||100*t.length,a=n.learnRate||.001,l={x:t.slice(),fx:0,fxprime:t.slice()},s=0;s<o&&(l.fx=e(l.x,l.fxprime),n.history&&n.history.push({x:l.x.slice(),fx:l.fx,fxprime:l.fxprime.slice()}),i(l.x,1,l.x,-a,l.fxprime),!(r(l.fxprime)<=1e-5));++s);return l},e.gradientDescentLineSearch=function(e,t,n){n=n||{};var i,l={x:t.slice(),fx:0,fxprime:t.slice()},s={x:t.slice(),fx:0,fxprime:t.slice()},c=n.maxIterations||100*t.length,u=n.learnRate||1,p=t.slice(),d=n.c1||.001,f=n.c2||.1,h=[];if(n.history){var m=e;e=function(e,t){return h.push(e.slice()),m(e,t)}}l.fx=e(l.x,l.fxprime);for(var y=0;y<c&&(o(p,l.fxprime,-1),u=a(e,p,l,s,u,d,f),n.history&&(n.history.push({x:l.x.slice(),fx:l.fx,fxprime:l.fxprime.slice(),functionCalls:h,learnRate:u,alpha:u}),h=[]),i=l,l=s,s=i,!(0===u||r(l.fxprime)<1e-5));++y);return l},e.zeros=t,e.zerosM=function(e,n){return t(e).map(function(){return t(n)})},e.norm2=r,e.weightedSum=i,e.scale=o}(t)},1098:function(e,t,n){!function(e,t,n){"use strict";var r=1e-10;function o(e,t){var n,o=function(e){for(var t=[],n=0;n<e.length;++n)for(var r=n+1;r<e.length;++r)for(var o=s(e[n],e[r]),i=0;i<o.length;++i){var a=o[i];a.parentIndex=[n,r],t.push(a)}return t}(e),l=o.filter(function(t){return function(e,t){for(var n=0;n<t.length;++n)if(a(e,t[n])>t[n].radius+r)return!1;return!0}(t,e)}),u=0,p=0,d=[];if(l.length>1){var f=c(l);for(n=0;n<l.length;++n){var h=l[n];h.angle=Math.atan2(h.x-f.x,h.y-f.y)}l.sort(function(e,t){return t.angle-e.angle});var m=l[l.length-1];for(n=0;n<l.length;++n){var y=l[n];p+=(m.x+y.x)*(y.y-m.y);for(var b={x:(y.x+m.x)/2,y:(y.y+m.y)/2},g=null,v=0;v<y.parentIndex.length;++v)if(m.parentIndex.indexOf(y.parentIndex[v])>-1){var _=e[y.parentIndex[v]],w=Math.atan2(y.x-_.x,y.y-_.y),O=Math.atan2(m.x-_.x,m.y-_.y),S=O-w;S<0&&(S+=2*Math.PI);var E=O-S/2,k=a(b,{x:_.x+_.radius*Math.sin(E),y:_.y+_.radius*Math.cos(E)});k>2*_.radius&&(k=2*_.radius),(null===g||g.width>k)&&(g={circle:_,width:k,p1:y,p2:m})}null!==g&&(d.push(g),u+=i(g.circle.radius,g.width),m=y)}}else{var C=e[0];for(n=1;n<e.length;++n)e[n].radius<C.radius&&(C=e[n]);var P=!1;for(n=0;n<e.length;++n)if(a(e[n],C)>Math.abs(C.radius-e[n].radius)){P=!0;break}P?u=p=0:(u=C.radius*C.radius*Math.PI,d.push({circle:C,p1:{x:C.x,y:C.y+C.radius},p2:{x:C.x-r,y:C.y+C.radius},width:2*C.radius}))}return p/=2,t&&(t.area=u+p,t.arcArea=u,t.polygonArea=p,t.arcs=d,t.innerPoints=l,t.intersectionPoints=o),u+p}function i(e,t){return e*e*Math.acos(1-t/e)-(e-t)*Math.sqrt(t*(2*e-t))}function a(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}function l(e,t,n){if(n>=e+t)return 0;if(n<=Math.abs(e-t))return Math.PI*Math.min(e,t)*Math.min(e,t);var r=e-(n*n-t*t+e*e)/(2*n),o=t-(n*n-e*e+t*t)/(2*n);return i(e,r)+i(t,o)}function s(e,t){var n=a(e,t),r=e.radius,o=t.radius;if(n>=r+o||n<=Math.abs(r-o))return[];var i=(r*r-o*o+n*n)/(2*n),l=Math.sqrt(r*r-i*i),s=e.x+i*(t.x-e.x)/n,c=e.y+i*(t.y-e.y)/n,u=-(t.y-e.y)*(l/n),p=-(t.x-e.x)*(l/n);return[{x:s+u,y:c-p},{x:s-u,y:c+p}]}function c(e){for(var t={x:0,y:0},n=0;n<e.length;++n)t.x+=e[n].x,t.y+=e[n].y;return t.x/=e.length,t.y/=e.length,t}function u(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=0;return t}function p(e,t){return u(e).map(function(){return u(t)})}function d(e,t){for(var n=0,r=0;r<e.length;++r)n+=e[r]*t[r];return n}function f(e){return Math.sqrt(d(e,e))}function h(e,t,n){for(var r=0;r<t.length;++r)e[r]=t[r]*n}function m(e,t,n,r,o){for(var i=0;i<e.length;++i)e[i]=t*n[i]+r*o[i]}function y(e,t,n){var r,o=(n=n||{}).maxIterations||200*t.length,i=n.nonZeroDelta||1.05,a=n.zeroDelta||.001,l=n.minErrorDelta||1e-6,s=n.minErrorDelta||1e-5,c=void 0!==n.rho?n.rho:1,u=void 0!==n.chi?n.chi:2,p=void 0!==n.psi?n.psi:-.5,d=void 0!==n.sigma?n.sigma:.5,f=t.length,h=new Array(f+1);h[0]=t,h[0].fx=e(t),h[0].id=0;for(var y=0;y<f;++y){var b=t.slice();b[y]=b[y]?b[y]*i:a,h[y+1]=b,h[y+1].fx=e(b),h[y+1].id=y+1}function g(e){for(var t=0;t<e.length;t++)h[f][t]=e[t];h[f].fx=e.fx}for(var v=function(e,t){return e.fx-t.fx},_=t.slice(),w=t.slice(),O=t.slice(),S=t.slice(),E=0;E<o;++E){if(h.sort(v),n.history){var k=h.map(function(e){var t=e.slice();return t.fx=e.fx,t.id=e.id,t});k.sort(function(e,t){return e.id-t.id}),n.history.push({x:h[0].slice(),fx:h[0].fx,simplex:k})}for(r=0,y=0;y<f;++y)r=Math.max(r,Math.abs(h[0][y]-h[1][y]));if(Math.abs(h[0].fx-h[f].fx)<l&&r<s)break;for(y=0;y<f;++y){_[y]=0;for(var C=0;C<f;++C)_[y]+=h[C][y];_[y]/=f}var P=h[f];if(m(w,1+c,_,-c,P),w.fx=e(w),w.fx<h[0].fx)m(S,1+u,_,-u,P),S.fx=e(S),S.fx<w.fx?g(S):g(w);else if(w.fx>=h[f-1].fx){var T=!1;if(w.fx>P.fx?(m(O,1+p,_,-p,P),O.fx=e(O),O.fx<P.fx?g(O):T=!0):(m(O,1-p*c,_,p*c,P),O.fx=e(O),O.fx<w.fx?g(O):T=!0),T){if(d>=1)break;for(y=1;y<h.length;++y)m(h[y],1-d,h[0],d,h[y]),h[y].fx=e(h[y])}}else g(w)}return h.sort(v),{fx:h[0].fx,x:h[0]}}function b(e,t,n,r,o,i,a){var l=n.fx,s=d(n.fxprime,t),c=l,u=l,p=s,f=0;function h(u,f,h){for(var y=0;y<16;++y)if(o=(u+f)/2,m(r.x,1,n.x,o,t),c=r.fx=e(r.x,r.fxprime),p=d(r.fxprime,t),c>l+i*o*s||c>=h)f=o;else{if(Math.abs(p)<=-a*s)return o;p*(f-u)>=0&&(f=u),u=o,h=c}return 0}o=o||1,i=i||1e-6,a=a||.1;for(var y=0;y<10;++y){if(m(r.x,1,n.x,o,t),c=r.fx=e(r.x,r.fxprime),p=d(r.fxprime,t),c>l+i*o*s||y&&c>=u)return h(f,o,u);if(Math.abs(p)<=-a*s)return o;if(p>=0)return h(o,f,c);u=c,f=o,o*=2}return o}function g(e,t,n){var r,o,i,a={x:t.slice(),fx:0,fxprime:t.slice()},l={x:t.slice(),fx:0,fxprime:t.slice()},s=t.slice(),c=1;i=(n=n||{}).maxIterations||20*t.length,a.fx=e(a.x,a.fxprime),h(r=a.fxprime.slice(),a.fxprime,-1);for(var u=0;u<i;++u){if(c=b(e,r,a,l,c),n.history&&n.history.push({x:a.x.slice(),fx:a.fx,fxprime:a.fxprime.slice(),alpha:c}),c){m(s,1,l.fxprime,-1,a.fxprime);var p=d(a.fxprime,a.fxprime),y=Math.max(0,d(s,l.fxprime)/p);m(r,y,r,-1,l.fxprime),o=a,a=l,l=o}else h(r,a.fxprime,-1);if(f(a.fxprime)<=1e-5)break}return n.history&&n.history.push({x:a.x.slice(),fx:a.fx,fxprime:a.fxprime.slice(),alpha:c}),a}function v(e,t){(t=t||{}).maxIterations=t.maxIterations||500;var n=t.initialLayout||O,r=t.lossFunction||E;e=function(e){e=e.slice();var t,n,r,o,i=[],a={};for(t=0;t<e.length;++t){var l=e[t];1==l.sets.length?i.push(l.sets[0]):2==l.sets.length&&(r=l.sets[0],o=l.sets[1],a[[r,o]]=!0,a[[o,r]]=!0)}for(i.sort(function(e,t){return e>t}),t=0;t<i.length;++t)for(r=i[t],n=t+1;n<i.length;++n)o=i[n],[r,o]in a||e.push({sets:[r,o],size:0});return e}(e);var o,i=n(e,t),a=[],l=[];for(o in i)i.hasOwnProperty(o)&&(a.push(i[o].x),a.push(i[o].y),l.push(o));for(var s=y(function(t){for(var n={},o=0;o<l.length;++o){var a=l[o];n[a]={x:t[2*o],y:t[2*o+1],radius:i[a].radius}}return r(n,e)},a,t),c=s.x,u=0;u<l.length;++u)o=l[u],i[o].x=c[2*u],i[o].y=c[2*u+1];return i}var _=1e-10;function w(e,t,n){return Math.min(e,t)*Math.min(e,t)*Math.PI<=n+_?Math.abs(e-t):function(e,t,n,r){var o=(r=r||{}).maxIterations||100,i=r.tolerance||1e-10,a=e(t),l=e(n),s=n-t;if(a*l>0)throw"Initial bisect points must have opposite signs";if(0===a)return t;if(0===l)return n;for(var c=0;c<o;++c){var u=t+(s/=2),p=e(u);if(p*a>=0&&(t=u),Math.abs(s)<i||0===p)return u}return t+s}(function(r){return l(e,t,r)-n},0,e+t)}function O(e,t){var n=S(e,t),r=t.lossFunction||E;if(e.length>=8){var o=function(e,t){var n,r=(t=t||{}).restarts||10,o=[],i={};for(n=0;n<e.length;++n){var a=e[n];1==a.sets.length&&(i[a.sets[0]]=o.length,o.push(a))}var l=function(e,t,n){var r=p(t.length,t.length),o=p(t.length,t.length);return e.filter(function(e){return 2==e.sets.length}).map(function(e){var i=n[e.sets[0]],a=n[e.sets[1]],l=w(Math.sqrt(t[i].size/Math.PI),Math.sqrt(t[a].size/Math.PI),e.size);r[i][a]=r[a][i]=l;var s=0;e.size+1e-10>=Math.min(t[i].size,t[a].size)?s=1:e.size<=1e-10&&(s=-1),o[i][a]=o[a][i]=s}),{distances:r,constraints:o}}(e,o,i),s=l.distances,c=l.constraints,d=f(s.map(f))/s.length;s=s.map(function(e){return e.map(function(e){return e/d})});var m,y,b=function(e,t){return function(e,t,n,r){var o,i=0;for(o=0;o<t.length;++o)t[o]=0;for(o=0;o<n.length;++o)for(var a=e[2*o],l=e[2*o+1],s=o+1;s<n.length;++s){var c=e[2*s],u=e[2*s+1],p=n[o][s],d=r[o][s],f=(c-a)*(c-a)+(u-l)*(u-l),h=Math.sqrt(f),m=f-p*p;d>0&&h<=p||d<0&&h>=p||(i+=2*m*m,t[2*o]+=4*m*(a-c),t[2*o+1]+=4*m*(l-u),t[2*s]+=4*m*(c-a),t[2*s+1]+=4*m*(u-l))}return i}(e,t,s,c)};for(n=0;n<r;++n){var v=u(2*s.length).map(Math.random);y=g(b,v,t),(!m||y.fx<m.fx)&&(m=y)}var _=m.x,O={};for(n=0;n<o.length;++n){var S=o[n];O[S.sets[0]]={x:_[2*n]*d,y:_[2*n+1]*d,radius:Math.sqrt(S.size/Math.PI)}}if(t.history)for(n=0;n<t.history.length;++n)h(t.history[n].x,d);return O}(e,t),i=r(o,e),a=r(n,e);i+1e-8<a&&(n=o)}return n}function S(e,t){for(var n,r=t&&t.lossFunction?t.lossFunction:E,o={},i={},a=0;a<e.length;++a){var l=e[a];1==l.sets.length&&(n=l.sets[0],o[n]={x:1e10,y:1e10,rowid:o.length,size:l.size,radius:Math.sqrt(l.size/Math.PI)},i[n]=[])}for(e=e.filter(function(e){return 2==e.sets.length}),a=0;a<e.length;++a){var c=e[a],u=c.hasOwnProperty("weight")?c.weight:1,p=c.sets[0],d=c.sets[1];c.size+_>=Math.min(o[p].size,o[d].size)&&(u=0),i[p].push({set:d,size:c.size,weight:u}),i[d].push({set:p,size:c.size,weight:u})}var f=[];for(n in i)if(i.hasOwnProperty(n)){var h=0;for(a=0;a<i[n].length;++a)h+=i[n][a].size*i[n][a].weight;f.push({set:n,size:h})}function m(e,t){return t.size-e.size}f.sort(m);var y={};function b(e){return e.set in y}function g(e,t){o[t].x=e.x,o[t].y=e.y,y[t]=!0}for(g({x:0,y:0},f[0].set),a=1;a<f.length;++a){var v=f[a].set,O=i[v].filter(b);if(n=o[v],O.sort(m),0===O.length)throw"ERROR: missing pairwise overlap information";for(var S=[],k=0;k<O.length;++k){var C=o[O[k].set],P=w(n.radius,C.radius,O[k].size);S.push({x:C.x+P,y:C.y}),S.push({x:C.x-P,y:C.y}),S.push({y:C.y+P,x:C.x}),S.push({y:C.y-P,x:C.x});for(var T=k+1;T<O.length;++T)for(var x=o[O[T].set],j=w(n.radius,x.radius,O[T].size),A=s({x:C.x,y:C.y,radius:P},{x:x.x,y:x.y,radius:j}),I=0;I<A.length;++I)S.push(A[I])}var M=1e50,D=S[0];for(k=0;k<S.length;++k){o[v].x=S[k].x,o[v].y=S[k].y;var N=r(o,e);N<M&&(M=N,D=S[k])}g(D,v)}return o}function E(e,t){for(var n=0,r=0;r<t.length;++r){var i,s=t[r];if(1!=s.sets.length){if(2==s.sets.length){var c=e[s.sets[0]],u=e[s.sets[1]];i=l(c.radius,u.radius,a(c,u))}else i=o(s.sets.map(function(t){return e[t]}));var p=s.hasOwnProperty("weight")?s.weight:1;n+=p*(i-s.size)*(i-s.size)}}return n}function k(e,t,n){var r;if(null===n?e.sort(function(e,t){return t.radius-e.radius}):e.sort(n),e.length>0){var o=e[0].x,i=e[0].y;for(r=0;r<e.length;++r)e[r].x-=o,e[r].y-=i}if(2==e.length){var l=a(e[0],e[1]);l<Math.abs(e[1].radius-e[0].radius)&&(e[1].x=e[0].x+e[0].radius-e[1].radius-1e-10,e[1].y=e[0].y)}if(e.length>1){var s,c,u=Math.atan2(e[1].x,e[1].y)-t,p=Math.cos(u),d=Math.sin(u);for(r=0;r<e.length;++r)s=e[r].x,c=e[r].y,e[r].x=p*s-d*c,e[r].y=d*s+p*c}if(e.length>2){for(var f=Math.atan2(e[2].x,e[2].y)-t;f<0;)f+=2*Math.PI;for(;f>2*Math.PI;)f-=2*Math.PI;if(f>Math.PI){var h=e[1].y/(1e-10+e[1].x);for(r=0;r<e.length;++r){var m=(e[r].x+h*e[r].y)/(1+h*h);e[r].x=2*m-e[r].x,e[r].y=2*m*h-e[r].y}}}}function C(e){function t(e){return e.parent!==e&&(e.parent=t(e.parent)),e.parent}e.map(function(e){e.parent=e});for(var n=0;n<e.length;++n)for(var r=n+1;r<e.length;++r){var o=e[n].radius+e[r].radius;a(e[n],e[r])+1e-10<o&&(i=e[r],l=e[n],s=void 0,c=void 0,s=t(i),c=t(l),s.parent=c)}var i,l,s,c,u,p={};for(n=0;n<e.length;++n)(u=t(e[n]).parent.setid)in p||(p[u]=[]),p[u].push(e[n]);e.map(function(e){delete e.parent});var d=[];for(u in p)p.hasOwnProperty(u)&&d.push(p[u]);return d}function P(e){var t=function(t){var n=Math.max.apply(null,e.map(function(e){return e[t]+e.radius})),r=Math.min.apply(null,e.map(function(e){return e[t]-e.radius}));return{max:n,min:r}};return{xRange:t("x"),yRange:t("y")}}function T(e,t,n){null===t&&(t=Math.PI/2);var r,o,i=[];for(o in e)if(e.hasOwnProperty(o)){var a=e[o];i.push({x:a.x,y:a.y,radius:a.radius,setid:o})}var l=C(i);for(r=0;r<l.length;++r){k(l[r],t,n);var s=P(l[r]);l[r].size=(s.xRange.max-s.xRange.min)*(s.yRange.max-s.yRange.min),l[r].bounds=s}l.sort(function(e,t){return t.size-e.size});var c=(i=l[0]).bounds,u=(c.xRange.max-c.xRange.min)/50;function p(e,t,n){if(e){var r,o,a,l=e.bounds;t?r=c.xRange.max-l.xRange.min+u:(r=c.xRange.max-l.xRange.max,(a=(l.xRange.max-l.xRange.min)/2-(c.xRange.max-c.xRange.min)/2)<0&&(r+=a)),n?o=c.yRange.max-l.yRange.min+u:(o=c.yRange.max-l.yRange.max,(a=(l.yRange.max-l.yRange.min)/2-(c.yRange.max-c.yRange.min)/2)<0&&(o+=a));for(var s=0;s<e.length;++s)e[s].x+=r,e[s].y+=o,i.push(e[s])}}for(var d=1;d<l.length;)p(l[d],!0,!1),p(l[d+1],!1,!0),p(l[d+2],!0,!0),d+=3,c=P(i);var f={};for(r=0;r<i.length;++r)f[i[r].setid]=i[r];return f}function x(e,t,n,r){var o=[],i=[];for(var a in e)e.hasOwnProperty(a)&&(i.push(a),o.push(e[a]));t-=2*r,n-=2*r;var l=P(o),s=l.xRange,c=l.yRange;if(s.max==s.min||c.max==c.min)return console.log("not scaling solution: zero size detected"),e;for(var u=t/(s.max-s.min),p=n/(c.max-c.min),d=Math.min(p,u),f=(t-(s.max-s.min)*d)/2,h=(n-(c.max-c.min)*d)/2,m={},y=0;y<o.length;++y){var b=o[y];m[i[y]]={radius:d*b.radius,x:r+f+(b.x-s.min)*d,y:r+h+(b.y-c.min)*d}}return m}function j(e,n){return function(){for(var r,o=t.select(this),i=o.datum(),a=e[i.sets[0]].radius||50,l=n(i)||"",s=l.split(/\s+/).reverse(),c=(l.length+s.length)/3,u=s.pop(),p=[u],d=0,f=o.text(null).append("tspan").text(u);u=s.pop();)p.push(u),r=p.join(" "),f.text(r),r.length>c&&f.node().getComputedTextLength()>a&&(p.pop(),f.text(p.join(" ")),p=[u],f=o.append("tspan").text(u),d++);var h=.35-1.1*d/2,m=o.attr("x"),y=o.attr("y");o.selectAll("tspan").attr("x",m).attr("y",y).attr("dy",function(e,t){return h+1.1*t+"em"})}}function A(e,t,n){var r,o,i=t[0].radius-a(t[0],e);for(r=1;r<t.length;++r)(o=t[r].radius-a(t[r],e))<=i&&(i=o);for(r=0;r<n.length;++r)(o=a(n[r],e)-n[r].radius)<=i&&(i=o);return i}function I(e,t){var n,r=[];for(n=0;n<e.length;++n){var i=e[n];r.push({x:i.x,y:i.y}),r.push({x:i.x+i.radius/2,y:i.y}),r.push({x:i.x-i.radius/2,y:i.y}),r.push({x:i.x,y:i.y+i.radius/2}),r.push({x:i.x,y:i.y-i.radius/2})}var l=r[0],s=A(r[0],e,t);for(n=1;n<r.length;++n){var u=A(r[n],e,t);u>=s&&(l=r[n],s=u)}var p=y(function(n){return-1*A({x:n[0],y:n[1]},e,t)},[l.x,l.y],{maxIterations:500,minErrorDelta:1e-10}).x,d={x:p[0],y:p[1]},f=!0;for(n=0;n<e.length;++n)if(a(d,e[n])>e[n].radius){f=!1;break}for(n=0;n<t.length;++n)if(a(d,t[n])<t[n].radius){f=!1;break}if(!f)if(1==e.length)d={x:e[0].x,y:e[0].y};else{var h={};o(e,h),d=0===h.arcs.length?{x:0,y:-1e3,disjoint:!0}:1==h.arcs.length?{x:h.arcs[0].circle.x,y:h.arcs[0].circle.y}:t.length?I(e,[]):c(h.arcs.map(function(e){return e.p1}))}return d}function M(e){var t={},n=[];for(var r in e)n.push(r),t[r]=[];for(var o=0;o<n.length;o++)for(var i=e[n[o]],l=o+1;l<n.length;++l){var s=e[n[l]],c=a(i,s);c+s.radius<=i.radius+1e-10?t[n[l]].push(n[o]):c+i.radius<=s.radius+1e-10&&t[n[o]].push(n[l])}return t}function D(e,t){for(var n={},r=M(e),o=0;o<t.length;++o){for(var i=t[o].sets,a={},l={},s=0;s<i.length;++s){a[i[s]]=!0;for(var c=r[i[s]],u=0;u<c.length;++u)l[c[u]]=!0}var p=[],d=[];for(var f in e)f in a?p.push(e[f]):f in l||d.push(e[f]);var h=I(p,d);n[i]=h,h.disjoint&&t[o].size>0&&console.log("WARNING: area "+i+" not represented on screen")}return n}function N(e,t,n){var r=[];return r.push("\nM",e,t),r.push("\nm",-n,0),r.push("\na",n,n,0,1,0,2*n,0),r.push("\na",n,n,0,1,0,2*-n,0),r.join(" ")}function R(e){var t=e.split(" ");return{x:parseFloat(t[1]),y:parseFloat(t[2]),radius:-parseFloat(t[4])}}function L(e){var t={};o(e,t);var n=t.arcs;if(0===n.length)return"M 0 0";if(1==n.length){var r=n[0].circle;return N(r.x,r.y,r.radius)}for(var i=["\nM",n[0].p2.x,n[0].p2.y],a=0;a<n.length;++a){var l=n[a],s=l.circle.radius,c=l.width>s;i.push("\nA",s,s,0,c?1:0,1,l.p1.x,l.p1.y)}return i.join(" ")}e.intersectionArea=o,e.circleCircleIntersection=s,e.circleOverlap=l,e.circleArea=i,e.distance=a,e.venn=v,e.greedyLayout=S,e.scaleSolution=x,e.normalizeSolution=T,e.bestInitialLayout=O,e.lossFunction=E,e.disjointCluster=C,e.distanceFromIntersectArea=w,e.VennDiagram=function(){var e=600,n=350,r=15,o=1e3,i=Math.PI/2,a=!0,l=!0,s=!0,c=null,u=null,p={},d=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],f=0,h=function(e){if(e in p)return p[e];var t=p[e]=d[f];return(f+=1)>=d.length&&(f=0),t},m=v,y=E;function b(p){var d=p.datum(),f={};d.forEach(function(e){0==e.size&&1==e.sets.length&&(f[e.sets[0]]=1)}),d=d.filter(function(e){return!e.sets.some(function(e){return e in f})});var b={},g={};if(d.length>0){var v=m(d,{lossFunction:y});a&&(v=T(v,i,u)),b=x(v,e,n,r),g=D(b,d)}var _={};function w(e){return e.sets in _?_[e.sets]:1==e.sets.length?""+e.sets[0]:void 0}d.forEach(function(e){e.label&&(_[e.sets]=e.label)}),p.selectAll("svg").data([b]).enter().append("svg");var O=p.select("svg").attr("width",e).attr("height",n),S={},E=!1;O.selectAll(".venn-area path").each(function(e){var n=t.select(this).attr("d");1==e.sets.length&&n&&(E=!0,S[e.sets[0]]=R(n))});var k=function(t){return function(r){var o=t.sets.map(function(t){var o=S[t],i=b[t];return o||(o={x:e/2,y:n/2,radius:1}),i||(i={x:e/2,y:n/2,radius:1}),{x:o.x*(1-r)+i.x*r,y:o.y*(1-r)+i.y*r,radius:o.radius*(1-r)+i.radius*r}});return L(o)}},C=O.selectAll(".venn-area").data(d,function(e){return e.sets}),P=C.enter().append("g").attr("class",function(e){return"venn-area venn-"+(1==e.sets.length?"circle":"intersection")}).attr("data-venn-sets",function(e){return e.sets.join("_")}),A=P.append("path"),I=P.append("text").attr("class","label").text(function(e){return w(e)}).attr("text-anchor","middle").attr("dy",".35em").attr("x",e/2).attr("y",n/2);s&&(A.style("fill-opacity","0").filter(function(e){return 1==e.sets.length}).style("fill",function(e){return h(e.sets)}).style("fill-opacity",".25"),I.style("fill",function(e){return 1==e.sets.length?h(e.sets):"#444"}));var M=p;E?(M=p.transition("venn").duration(o)).selectAll("path").attrTween("d",k):M.selectAll("path").attr("d",function(e){return L(e.sets.map(function(e){return b[e]}))});var N=M.selectAll("text").filter(function(e){return e.sets in g}).text(function(e){return w(e)}).attr("x",function(e){return Math.floor(g[e.sets].x)}).attr("y",function(e){return Math.floor(g[e.sets].y)});l&&(E?"on"in N?N.on("end",j(b,w)):N.each("end",j(b,w)):N.each(j(b,w)));var G=C.exit().transition("venn").duration(o).remove();G.selectAll("path").attrTween("d",k);var V=G.selectAll("text").attr("x",e/2).attr("y",n/2);return null!==c&&(I.style("font-size","0px"),N.style("font-size",c),V.style("font-size","0px")),{circles:b,textCentres:g,nodes:C,enter:P,update:M,exit:G}}return b.wrap=function(e){return arguments.length?(l=e,b):l},b.width=function(t){return arguments.length?(e=t,b):e},b.height=function(e){return arguments.length?(n=e,b):n},b.padding=function(e){return arguments.length?(r=e,b):r},b.colours=function(e){return arguments.length?(h=e,b):h},b.fontSize=function(e){return arguments.length?(c=e,b):c},b.duration=function(e){return arguments.length?(o=e,b):o},b.layoutFunction=function(e){return arguments.length?(m=e,b):m},b.normalize=function(e){return arguments.length?(a=e,b):a},b.styled=function(e){return arguments.length?(s=e,b):s},b.orientation=function(e){return arguments.length?(i=e,b):i},b.orientationOrder=function(e){return arguments.length?(u=e,b):u},b.lossFunction=function(e){return arguments.length?(y=e,b):y},b},e.wrapText=j,e.computeTextCentres=D,e.computeTextCentre=I,e.sortAreas=function(e,t){for(var n=M(e.selectAll("svg").datum()),r={},o=0;o<t.sets.length;++o){var i=t.sets[o];for(var a in n)for(var l=n[a],s=0;s<l.length;++s)if(l[s]==i){r[a]=!0;break}}function c(e){for(var t=0;t<e.length;++t)if(!(e[t]in r))return!1;return!0}e.selectAll("g").sort(function(e,n){return e.sets.length!=n.sets.length?e.sets.length-n.sets.length:e==t?c(n.sets)?-1:1:n==t?c(e.sets)?1:-1:n.size-e.size})},e.circlePath=N,e.circleFromPath=R,e.intersectionAreaPath=L,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(808),n(1159))},1099:function(e,t,n){e.exports=n(35)(663)},1100:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__quCC8",framedImage:"styles-module__framedImage__2pTmh",scrollbar:"styles-module__scrollbar__-BNTg",handle:"styles-module__handle__2PODi"}},1101:function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(12),a=n(118),l=n(845),s=n(72),c=n(328),u=n(860),p=n(49),d=n(98);function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var g=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},v=function(e){function t(){var e,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=h(t).apply(this,arguments),e=!o||"object"!==b(o)&&"function"!=typeof o?m(n):o,Object.defineProperty(m(e),"tabUI",{enumerable:!0,configurable:!0,writable:!0,value:Object(p.e)(function(){return e.props.store},function(){return e.enrichmentsUI},"mRNA",!0,!0,!1)}),Object.defineProperty(m(e),"enrichmentsUI",{enumerable:!0,configurable:!0,writable:!0,value:Object(a.a)({await:function(){return[e.props.store.mRNAEnrichmentData,e.props.store.selectedmRNAEnrichmentProfileMap,e.props.store.mrnaEnrichmentAnalysisGroups,e.props.store.studies,e.props.store.sampleKeyToSample,e.props.store.mRNAEnrichmentProfiles]},render:function(){var t=Object.keys(e.props.store.selectedmRNAEnrichmentProfileMap.result),n=e.props.store.selectedmRNAEnrichmentProfileMap.result[t[0]];return r.createElement("div",{"data-test":"GroupComparisonMRNAEnrichments"},r.createElement(l.a,{dataSets:e.props.store.mRNAEnrichmentProfiles.result,onChange:e.onChangeProfile,selectedProfileByStudyId:e.props.store.selectedmRNAEnrichmentProfileMap.result,alwaysShow:!0,studies:e.props.store.studies.result,showDescription:!0}),r.createElement(u.a,{data:e.props.store.mRNAEnrichmentData.result,groups:e.props.store.mrnaEnrichmentAnalysisGroups.result,selectedProfile:n,alteredVsUnalteredMode:!1,sampleKeyToSample:e.props.store.sampleKeyToSample.result,isGeneCheckBoxEnabled:e.props.resultsViewMode,enrichmentType:d.e.MRNA_EXPRESSION}))},renderPending:function(){return r.createElement(s.a,{center:!0,isLoading:!0,size:"big"})},renderError:function(){return r.createElement(c.a,null)}})}),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,r["Component"]),n=t,(o=[{key:"onChangeProfile",value:function(e){this.props.store.setMRNAEnrichmentProfileMap(e)}},{key:"render",value:function(){return this.tabUI.component}}])&&f(n.prototype,o),i&&f(n,i),t}();g([i.default],v.prototype,"onChangeProfile",null),v=g([o.observer],v),t.a=v},1102:function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(12),a=n(118),l=n(845),s=n(860),c=n(72),u=n(328),p=n(49),d=n(98);function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var g=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},v=function(e){function t(){var e,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=h(t).apply(this,arguments),e=!o||"object"!==b(o)&&"function"!=typeof o?m(n):o,Object.defineProperty(m(e),"tabUI",{enumerable:!0,configurable:!0,writable:!0,value:Object(p.e)(function(){return e.props.store},function(){return e.enrichmentsUI},"protein",!0,!0,!1)}),Object.defineProperty(m(e),"enrichmentsUI",{enumerable:!0,configurable:!0,writable:!0,value:Object(a.a)({await:function(){return[e.props.store.proteinEnrichmentData,e.props.store.selectedProteinEnrichmentProfileMap,e.props.store.proteinEnrichmentAnalysisGroups,e.props.store.studies,e.props.store.proteinEnrichmentProfiles]},render:function(){var t=Object.keys(e.props.store.selectedProteinEnrichmentProfileMap.result),n=e.props.store.selectedProteinEnrichmentProfileMap.result[t[0]];return r.createElement("div",{"data-test":"GroupComparisonProteinEnrichments"},r.createElement(l.a,{dataSets:e.props.store.proteinEnrichmentProfiles.result,onChange:e.onChangeProfile,selectedProfileByStudyId:e.props.store.selectedProteinEnrichmentProfileMap.result,alwaysShow:!0,studies:e.props.store.studies.result,showDescription:!0}),r.createElement(s.a,{data:e.props.store.proteinEnrichmentData.result,groups:e.props.store.proteinEnrichmentAnalysisGroups.result,selectedProfile:n,alteredVsUnalteredMode:!1,sampleKeyToSample:e.props.store.sampleKeyToSample.result,isGeneCheckBoxEnabled:e.props.resultsViewMode,enrichmentType:d.e.PROTEIN_EXPRESSION}))},renderPending:function(){return r.createElement(c.a,{center:!0,isLoading:!0,size:"big"})},renderError:function(){return r.createElement(u.a,null)}})}),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,r["Component"]),n=t,(o=[{key:"onChangeProfile",value:function(e){this.props.store.setProteinEnrichmentProfileMap(e)}},{key:"render",value:function(){return this.tabUI.component}}])&&f(n.prototype,o),i&&f(n,i),t}();g([i.default],v.prototype,"onChangeProfile",null),v=g([o.observer],v),t.a=v},1104:function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(12),a=n(118),l=n(845),s=n(860),c=n(72),u=n(328),p=n(49),d=n(98);function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var g=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},v=function(e){function t(){var e,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=h(t).apply(this,arguments),e=!o||"object"!==b(o)&&"function"!=typeof o?m(n):o,Object.defineProperty(m(e),"tabUI",{enumerable:!0,configurable:!0,writable:!0,value:Object(p.e)(function(){return e.props.store},function(){return e.enrichmentsUI},"methylation",!0,!0,!1)}),Object.defineProperty(m(e),"enrichmentsUI",{enumerable:!0,configurable:!0,writable:!0,value:Object(a.a)({await:function(){return[e.props.store.methylationEnrichmentData,e.props.store.selectedMethylationEnrichmentProfileMap,e.props.store.methylationEnrichmentAnalysisGroups,e.props.store.studies,e.props.store.methylationEnrichmentProfiles]},render:function(){var t=Object.keys(e.props.store.selectedMethylationEnrichmentProfileMap.result),n=e.props.store.selectedMethylationEnrichmentProfileMap.result[t[0]];return r.createElement("div",{"data-test":"GroupComparisonMethylationEnrichments"},r.createElement(l.a,{dataSets:e.props.store.methylationEnrichmentProfiles.result,onChange:e.onChangeProfile,selectedProfileByStudyId:e.props.store.selectedMethylationEnrichmentProfileMap.result,alwaysShow:!0,studies:e.props.store.studies.result,showDescription:!0}),r.createElement(s.a,{data:e.props.store.methylationEnrichmentData.result,groups:e.props.store.methylationEnrichmentAnalysisGroups.result,selectedProfile:n,alteredVsUnalteredMode:!1,sampleKeyToSample:e.props.store.sampleKeyToSample.result,isGeneCheckBoxEnabled:e.props.resultsViewMode,enrichmentType:d.e.DNA_METHYLATION,groupsSelectorPlaceholder:"High methylation in ..."}))},renderPending:function(){return r.createElement(c.a,{center:!0,isLoading:!0,size:"big"})},renderError:function(){return r.createElement(u.a,null)}})}),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,r["Component"]),n=t,(o=[{key:"onChangeProfile",value:function(e){this.props.store.setMethylationEnrichmentProfileMap(e)}},{key:"render",value:function(){return this.tabUI.component}}])&&f(n.prototype,o),i&&f(n,i),t}();g([i.default],v.prototype,"onChangeProfile",null),v=g([o.observer],v),t.a=v},1105:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__1mlqI",framedImage:"styles-module__framedImage__AkabG",wrapper:"styles-module__wrapper__29CoN",groupRow:"styles-module__groupRow__3Q2Y8",alterationRow:"styles-module__alterationRow__1G5NG",strike:"styles-module__strike__1ycDg"}},1106:function(e,t,n){e.exports={portalWidth:"frequencyPlotStyles-module__portalWidth__bPwxT",framedImage:"frequencyPlotStyles-module__framedImage__R6mzB",ChartControls:"frequencyPlotStyles-module__ChartControls__2YKR9"}},1159:function(e,t,n){"use strict";n.r(t);var r=n(808),o={value:function(){}};function i(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r)throw new Error("illegal type: "+e);r[e]=[]}return new a(r)}function a(e){this._=e}function l(e,t){for(var n,r=0,o=e.length;r<o;++r)if((n=e[r]).name===t)return n.value}function s(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=o,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}a.prototype=i.prototype={constructor:a,on:function(e,t){var n,r,o=this._,i=(r=o,(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}})),a=-1,c=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<c;)if(n=(e=i[a]).type)o[n]=s(o[n],e.name,t);else if(null==t)for(n in o)o[n]=s(o[n],e.name,null);return this}for(;++a<c;)if((n=(e=i[a]).type)&&(n=l(o[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new a(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,o=new Array(n),i=0;i<n;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,n=(r=this._[e]).length;i<n;++i)r[i].value.apply(t,o)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}};var c=i,u=n(921),p=c("start","end","cancel","interrupt"),d=[],f=0,h=1,m=2,y=3,b=4,g=5,v=6,_=function(e,t,n,r,o,i){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var r,o=e.__transition;function i(s){var c,p,d,f;if(n.state!==h)return l();for(c in o)if((f=o[c]).name===n.name){if(f.state===y)return Object(u.timeout)(i);f.state===b?(f.state=v,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete o[c]):+c<t&&(f.state=v,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete o[c])}if(Object(u.timeout)(function(){n.state===y&&(n.state=b,n.timer.restart(a,n.delay,n.time),a(s))}),n.state=m,n.on.call("start",e,e.__data__,n.index,n.group),n.state===m){for(n.state=y,r=new Array(d=n.tween.length),c=0,p=-1;c<d;++c)(f=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++p]=f);r.length=p+1}}function a(t){for(var o=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(l),n.state=g,1),i=-1,a=r.length;++i<a;)r[i].call(e,o);n.state===g&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){for(var r in n.state=v,n.timer.stop(),delete o[t],o)return;delete e.__transition}o[t]=n,n.timer=Object(u.timer)(function(e){n.state=h,n.timer.restart(i,n.delay,n.time),n.delay<=e&&i(e-n.delay)},0,n.time)}(e,n,{name:t,index:r,group:o,on:p,tween:d,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:f})};function w(e,t){var n=S(e,t);if(n.state>f)throw new Error("too late; already scheduled");return n}function O(e,t){var n=S(e,t);if(n.state>y)throw new Error("too late; already running");return n}function S(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}var E=function(e,t){var n,r,o,i=e.__transition,a=!0;if(i){for(o in t=null==t?null:t+"",i)(n=i[o]).name===t?(r=n.state>m&&n.state<g,n.state=v,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[o]):a=!1;a&&delete e.__transition}},k=n(106);function C(e,t,n){var r=e._id;return e.each(function(){var e=O(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return S(e,r).value[t]}}var P=n(107),T=function(e,t){var n;return("number"==typeof t?k.interpolateNumber:t instanceof P.color?k.interpolateRgb:(n=Object(P.color)(t))?(t=n,k.interpolateRgb):k.interpolateString)(e,t)};var x=r.selection.prototype.constructor;function j(e){return function(){this.style.removeProperty(e)}}var A=0;function I(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function M(e){return Object(r.selection)().transition(e)}function D(){return++A}var N=r.selection.prototype;I.prototype=M.prototype={constructor:I,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=Object(r.selector)(e));for(var o=this._groups,i=o.length,a=new Array(i),l=0;l<i;++l)for(var s,c,u=o[l],p=u.length,d=a[l]=new Array(p),f=0;f<p;++f)(s=u[f])&&(c=e.call(s,s.__data__,f,u))&&("__data__"in s&&(c.__data__=s.__data__),d[f]=c,_(d[f],t,n,f,d,S(s,n)));return new I(a,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=Object(r.selectorAll)(e));for(var o=this._groups,i=o.length,a=[],l=[],s=0;s<i;++s)for(var c,u=o[s],p=u.length,d=0;d<p;++d)if(c=u[d]){for(var f,h=e.call(c,c.__data__,d,u),m=S(c,n),y=0,b=h.length;y<b;++y)(f=h[y])&&_(f,t,n,y,h,m);a.push(h),l.push(c)}return new I(a,l,t,n)},filter:function(e){"function"!=typeof e&&(e=Object(r.matcher)(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a,l=t[i],s=l.length,c=o[i]=[],u=0;u<s;++u)(a=l[u])&&e.call(a,a.__data__,u,l)&&c.push(a);return new I(o,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),a=new Array(r),l=0;l<i;++l)for(var s,c=t[l],u=n[l],p=c.length,d=a[l]=new Array(p),f=0;f<p;++f)(s=c[f]||u[f])&&(d[f]=s);for(;l<r;++l)a[l]=t[l];return new I(a,this._parents,this._name,this._id)},selection:function(){return new x(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=D(),r=this._groups,o=r.length,i=0;i<o;++i)for(var a,l=r[i],s=l.length,c=0;c<s;++c)if(a=l[c]){var u=S(a,t);_(a,e,n,c,l,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new I(r,this._parents,e,n)},call:N.call,nodes:N.nodes,node:N.node,size:N.size,empty:N.empty,each:N.each,on:function(e,t){var n=this._id;return arguments.length<2?S(this.node(),n).on.on(e):this.each(function(e,t,n){var r,o,i=function(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}(t)?w:O;return function(){var a=i(this,e),l=a.on;l!==r&&(o=(r=l).copy()).on(t,n),a.on=o}}(n,e,t))},attr:function(e,t){var n=Object(r.namespace)(e),o="transform"===n?k.interpolateTransformSvg:T;return this.attrTween(e,"function"==typeof t?(n.local?function(e,t,n){var r,o,i;return function(){var a,l,s=n(this);if(null!=s)return(a=this.getAttributeNS(e.space,e.local))===(l=s+"")?null:a===r&&l===o?i:(o=l,i=t(r=a,s));this.removeAttributeNS(e.space,e.local)}}:function(e,t,n){var r,o,i;return function(){var a,l,s=n(this);if(null!=s)return(a=this.getAttribute(e))===(l=s+"")?null:a===r&&l===o?i:(o=l,i=t(r=a,s));this.removeAttribute(e)}})(n,o,C(this,"attr."+e,t)):null==t?(n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}})(n):(n.local?function(e,t,n){var r,o,i=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?o:o=t(r=a,n)}}:function(e,t,n){var r,o,i=n+"";return function(){var a=this.getAttribute(e);return a===i?null:a===r?o:o=t(r=a,n)}})(n,o,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var o=Object(r.namespace)(e);return this.tween(n,(o.local?function(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t(n))}}(e,o)),n}return o._value=t,o}:function(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(e,t){return function(n){this.setAttribute(e,t(n))}}(e,o)),n}return o._value=t,o})(o,t))},style:function(e,t,n){var o="transform"==(e+="")?k.interpolateTransformCss:T;return null==t?this.styleTween(e,function(e,t){var n,o,i;return function(){var a=Object(r.style)(this,e),l=(this.style.removeProperty(e),Object(r.style)(this,e));return a===l?null:a===n&&l===o?i:i=t(n=a,o=l)}}(e,o)).on("end.style."+e,j(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var o,i,a;return function(){var l=Object(r.style)(this,e),s=n(this),c=s+"";return null==s&&(this.style.removeProperty(e),c=s=Object(r.style)(this,e)),l===c?null:l===o&&c===i?a:(i=c,a=t(o=l,s))}}(e,o,C(this,"style."+e,t))).each(function(e,t){var n,r,o,i,a="style."+t,l="end."+a;return function(){var s=O(this,e),c=s.on,u=null==s.value[a]?i||(i=j(t)):void 0;c===n&&o===u||(r=(n=c).copy()).on(l,o=u),s.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var o,i,a=n+"";return function(){var l=Object(r.style)(this,e);return l===a?null:l===o?i:i=t(o=l,n)}}(e,o,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,function(e,t,n){var r,o;function i(){var i=t.apply(this,arguments);return i!==o&&(r=(o=i)&&function(e,t,n){return function(r){this.style.setProperty(e,t(r),n)}}(e,i,n)),r}return i._value=t,i}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(C(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},remove:function(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,o=S(this.node(),n).tween,i=0,a=o.length;i<a;++i)if((r=o[i]).name===e)return r.value;return null}return this.each((null==t?function(e,t){var n,r;return function(){var o=O(this,e),i=o.tween;if(i!==n)for(var a=0,l=(r=n=i).length;a<l;++a)if(r[a].name===t){(r=r.slice()).splice(a,1);break}o.tween=r}}:function(e,t,n){var r,o;if("function"!=typeof n)throw new Error;return function(){var i=O(this,e),a=i.tween;if(a!==r){o=(r=a).slice();for(var l={name:t,value:n},s=0,c=o.length;s<c;++s)if(o[s].name===t){o[s]=l;break}s===c&&o.push(l)}i.tween=o}})(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){w(this,e).delay=+t.apply(this,arguments)}}:function(e,t){return t=+t,function(){w(this,e).delay=t}})(t,e)):S(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){O(this,e).duration=+t.apply(this,arguments)}}:function(e,t){return t=+t,function(){O(this,e).duration=t}})(t,e)):S(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){O(this,e).ease=t}}(t,e)):S(this.node(),t).ease},end:function(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(i,a){var l={value:a},s={value:function(){0==--o&&i()}};n.each(function(){var n=O(this,r),o=n.on;o!==e&&((t=(e=o).copy())._.cancel.push(l),t._.interrupt.push(l),t._.end.push(s)),n.on=t})})}};var R={time:null,delay:0,duration:250,ease:n(1099).easeCubicInOut};function L(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))return R.time=Object(u.now)(),R;return n}r.selection.prototype.interrupt=function(e){return this.each(function(){E(this,e)})},r.selection.prototype.transition=function(e){var t,n;e instanceof I?(t=e._id,e=e._name):(t=D(),(n=R).time=Object(u.now)(),e=null==e?null:e+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var a,l=r[i],s=l.length,c=0;c<s;++c)(a=l[c])&&_(a,e,t,c,l,n||L(a,t));return new I(r,this._parents,e,t)};var G=[null],V=function(e,t){var n,r,o=e.__transition;if(o)for(r in t=null==t?null:t+"",o)if((n=o[r]).state>h&&n.name===t)return new I([[e]],G,t,+r);return null};n.d(t,"transition",function(){return M}),n.d(t,"active",function(){return V}),n.d(t,"interrupt",function(){return E})},1160:function(e,t,n){"use strict";var r,o,i,a,l=n(0),s=n(1),c=n.n(s),u=n(2),p=n(5),d=n.n(p),f=n(15),h=(n(941),n(942),n(72)),m=n(17),y=n(23),b=n(185),g=n(9),v=n(947),_=n.n(v),w=n(74),O=n.n(w),S=n(3),E=n(14),k=n(26),C=n.n(k);function P(e){var t={};return e.forEach(function(e){var n=function(e){for(var t=[],n=e.start.position,r=e.end.position,o=n;o<=r;o++)t.push({resi:o});return e.start.insertionCode&&(t[0].icode=e.start.insertionCode),t.length>1&&e.end.insertionCode&&(t[t.length-1].icode=e.end.insertionCode),t}(e.positionRange),r=s.groupBy(n,"resi");s.each(s.keys(r),function(n){t[n]||(t[n]=[]),s.each(r[n],function(r){t[n].push({selector:r,residue:e})})})}),t}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}!function(e){e[e.CARTOON=0]="CARTOON",e[e.SPACE_FILLING=1]="SPACE_FILLING",e[e.TRACE=2]="TRACE",e[e.BALL_AND_STICK=3]="BALL_AND_STICK",e[e.RIBBON=4]="RIBBON"}(r||(r={})),function(e){e[e.UNIFORM=0]="UNIFORM",e[e.SECONDARY_STRUCTURE=1]="SECONDARY_STRUCTURE",e[e.NC_RAINBOW=2]="NC_RAINBOW",e[e.ATOM_TYPE=3]="ATOM_TYPE"}(o||(o={})),function(e){e[e.ALL=0]="ALL",e[e.SELECTED=1]="SELECTED",e[e.NONE=2]="NONE"}(i||(i={})),function(e){e[e.UNIFORM=0]="UNIFORM",e[e.MUTATION_TYPE=1]="MUTATION_TYPE",e[e.NONE=2]="NONE"}(a||(a={}));var x=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"updateVisualStyle",value:function(e,t,n){var r=this.updateScheme(n);this.updateBaseVisualStyle(r,n),this.updateChainVisualStyle(t,r,n),this.updateResidueStyle(e,t,n,r),this.updateBoundMolecules(n)}},{key:"updateScheme",value:function(e){var t=this.selectAll();return this.setScheme(e.proteinScheme,t)}},{key:"updateBaseVisualStyle",value:function(t,n){var r=e.defaultProps,o=this.selectAll();this.setColor(n.baseColor||r.baseColor,o,t),this.setTransparency(n.baseTranslucency||r.baseTranslucency,o,t)}},{key:"updateChainVisualStyle",value:function(t,n,r){var i=e.defaultProps,a=this.selectChain(t);this.setColor(r.chainColor||i.chainColor,a,n),this.setTransparency(r.chainTranslucency||i.chainTranslucency,a,n),r.proteinColor===o.ATOM_TYPE?(a=this.selectChain(t),this.cpkColor(a,n)):r.proteinColor===o.SECONDARY_STRUCTURE?(a=this.selectAlphaHelix(t),this.setColor((r.structureColors||i.structureColors).alphaHelix,a,n),a=this.selectBetaSheet(t),this.setColor((r.structureColors||i.structureColors).betaSheet,a,n)):r.proteinColor===o.NC_RAINBOW&&(a=this.selectChain(t),this.rainbowColor(a,n))}},{key:"updateBoundMolecules",value:function(e){e.displayBoundMolecules||this.hideBoundMolecules()}},{key:"convertPositionsToResCode",value:function(e){var t=[];return e.forEach(function(e){t=t.concat(function(e){for(var t=[],n=e.start.position,r=e.end.position,o=n;o<=r;o++)t.push("".concat(o));return e.start.insertionCode&&(t[0]+="^"+e.start.insertionCode),t.length>1&&e.end.insertionCode&&(t[t.length-1]+="^"+e.end.insertionCode),t}(e))}),t}}])&&T(t.prototype,n),r&&T(t,r),e}();Object.defineProperty(x,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{pdbUri:"https://files.rcsb.org/view/",proteinScheme:r.CARTOON,displayBoundMolecules:!0,backgroundColor:"#FFFFFF",baseColor:"#DDDDDD",structureColors:{alphaHelix:"#FFA500",betaSheet:"#0000FF",loop:"#DDDDDD"},baseTranslucency:5,chainColor:"#888888",chainTranslucency:0,proteinColor:o.UNIFORM,mutationColor:a.MUTATION_TYPE,uniformMutationColor:"#8A2BE2",highlightColor:"#FFDD00",sideChain:i.SELECTED}});var j=x,A=n(1179),I=n.n(A);function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e,t,n){return(N="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=R(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var V=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":G(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},B=function(e){function t(e,n,r){var o,i,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,a=R(t).call(this),o=!a||"object"!==G(a)&&"function"!=typeof a?D(i):a,Object.defineProperty(D(o),"_3dMolDiv",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(D(o),"_3dMolViewer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(D(o),"_3dMol",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(D(o),"props",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(D(o),"_prevProps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(D(o),"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(D(o),"_prevState",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(D(o),"_loadingPdb",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(D(o),"stateChangeReaction",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),o._3dMol=r||I.a,o._3dMolDiv=e,o.props=Object.assign(Object.assign({},j.defaultProps),n),o.state={pdbId:"",chainId:"",residues:[]},o._prevState={pdbId:"",chainId:"",residues:[]},o.updateViewer=o.updateViewer.bind(D(o)),Object(u.makeObservable)(D(o)),o.stateChangeReaction=Object(u.reaction)(function(){return o.state},function(e){o.onStateChange(e)}),o}var n,o,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(t,j),n=t,l=[{key:"PROTEIN_SCHEME_PRESETS",get:function(){var e={};return e[r.CARTOON]={cartoon:{}},e[r.TRACE]={cartoon:{style:"trace"}},e[r.SPACE_FILLING]={sphere:{scale:.6}},e[r.BALL_AND_STICK]={stick:{},sphere:{scale:.25}},e[r.RIBBON]={cartoon:{style:"ribbon"}},e}},{key:"ALL_PROTEINS",get:function(){var e=["asp","glu","arg","lys","his","asn","thr","cys","gln","tyr","ser","gly","ala","leu","val","ile","met","trp","phe","pro"],t=e.map(function(e){return e.toUpperCase()});return e.concat(t)}}],(o=[{key:"setState",value:function(e){this._prevState=Object.assign({},this.state),this.state=Object.assign(Object.assign({},this.state),e)}},{key:"onStateChange",value:function(e){this._prevState&&!this._loadingPdb&&(this.updateVisualStyle(e.residues,e.chainId,this.props),this._3dMolViewer.render())}},{key:"setProps",value:function(e){this._prevProps=this.props,this.props=e}},{key:"init",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.residues,r=arguments.length>3?arguments[3]:void 0;if(r?this._3dMolViewer=r:this._3dMolDiv&&(this._3dMolViewer=this._3dMol.createViewer(C()(this._3dMolDiv),{defaultcolors:this._3dMol.elementColors.rasmol})),this._3dMolViewer){var o=this.formatColor(this.props.backgroundColor||j.defaultProps.backgroundColor);this._3dMolViewer.setBackgroundColor(o),this.loadPdb(e,t,n)}}},{key:"loadPdb",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.residues,o={doAssembly:!0,pdbUri:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.props).pdbUri};this._loadingPdb=!0,this.setState({pdbId:e,chainId:t,residues:r}),this._3dMolViewer?(this._3dMolViewer.clear(),this._3dMol.download("pdb:".concat(e.toUpperCase()),this._3dMolViewer,o,function(){n._loadingPdb=!1,n.onStateChange(n.state)})):this._loadingPdb=!1}},{key:"updateViewer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.residues,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props;this.setProps(n),this.setState({chainId:e,residues:t})}},{key:"resize",value:function(){this._3dMolViewer&&this._3dMolViewer.resize()}},{key:"selectAll",value:function(){return{}}},{key:"selectChain",value:function(e){return{chain:e}}},{key:"setScheme",value:function(e,n){var r=t.PROTEIN_SCHEME_PRESETS[e];return this.applyStyleForSelector(n,r),r}},{key:"setColor",value:function(e,t,n){var r=this.formatColor(e);n&&(s.each(n,function(e){e.color=r}),this.applyStyleForSelector(t,n))}},{key:"formatColor",value:function(e){return e.replace("#","0x")}},{key:"setTransparency",value:function(e,t,n){n&&(this.addTransparencyToStyle(e,n),this.applyStyleForSelector(t,n))}},{key:"addTransparencyToStyle",value:function(e,t){s.each(t,function(t,n){"sphere"!==n&&(t.opacity=(10-e)/10)})}},{key:"rainbowColor",value:function(e,t){this.setColor("spectrum",e,t)}},{key:"cpkColor",value:function(e,t){var n=this;t&&(s.each(t,function(e){delete e.color,e.colors=n._3dMol.elementColors.defaultColors}),this.applyStyleForSelector(e,t))}},{key:"selectAlphaHelix",value:function(e){return{chain:e,ss:"h"}}},{key:"selectBetaSheet",value:function(e){return{chain:e,ss:"s"}}},{key:"hideBoundMolecules",value:function(){var e={resn:t.ALL_PROTEINS,invert:!0};this._3dMolViewer.setStyle(e,{sphere:{hidden:!0}})}},{key:"enableBallAndStick",value:function(e,n,o){var i=Object.assign(Object.assign({},o),t.PROTEIN_SCHEME_PRESETS[r.BALL_AND_STICK]);if(e){var a=this.formatColor(e);i.sphere||(i.sphere={}),i.sphere.color=a,i.stick||(i.stick={}),i.stick.color=a}this._3dMolViewer.setStyle(n,i)}},{key:"updateResidueStyle",value:function(e,n){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props,l=arguments.length>3?arguments[3]:void 0,s=j.defaultProps;l||(l=t.PROTEIN_SCHEME_PRESETS[o.proteinScheme],this.addTransparencyToStyle(o.chainTranslucency||s.chainTranslucency,l)),this.residuesToUpdate.forEach(function(e){var t,c=e.residue,u=r.selectResidue(e.selector,n);t=c.highlighted?r.props.highlightColor||s.highlightColor:o.mutationColor===a.MUTATION_TYPE?c.color:o.mutationColor===a.UNIFORM?o.uniformMutationColor||s.uniformMutationColor:o.chainColor||s.chainColor,r.setColor(t,u,l),(o.sideChain===i.ALL||!0===c.highlighted&&o.sideChain===i.SELECTED)&&r.updateSideChain(n,e.selector,o.proteinScheme,t,l)})}},{key:"updateScheme",value:function(e){return this.needToUpdateResiduesOnly?void 0:N(R(t.prototype),"updateScheme",this).call(this,e)}},{key:"updateBaseVisualStyle",value:function(e,n){this.needToUpdateResiduesOnly||N(R(t.prototype),"updateBaseVisualStyle",this).call(this,e,n)}},{key:"updateChainVisualStyle",value:function(e,n,r){this.needToUpdateResiduesOnly||N(R(t.prototype),"updateChainVisualStyle",this).call(this,e,n,r)}},{key:"updateVisualStyle",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props;N(R(t.prototype),"updateVisualStyle",this).call(this,e,n,r)}},{key:"selectResidues",value:function(e,t){return{rescode:e,chain:t}}},{key:"selectResidue",value:function(e,t){return Object.assign({chain:t},e)}},{key:"selectSideChains",value:function(e,t){return this.selectResidue(e,t)}},{key:"updateSideChain",value:function(e,t,n,o,i){if(n!==r.SPACE_FILLING){var a=this.selectSideChains(t,e);this.enableBallAndStick(o,a,i)}}},{key:"applyStyleForSelector",value:function(e,t){this._3dMolViewer.setStyle(e,t)}},{key:"residuesToUpdate",get:function(){return this.needToUpdateResiduesOnly?(e=this.currentResidueToPositionMap,t=this.prevResidueToPositionMap,n=[],s.each(s.keys(e),function(r){s.isEqual(e[r],t[r])||(n=n.concat(e[r]))}),n):s.flatten(s.values(this.currentResidueToPositionMap));var e,t,n}},{key:"needToUpdateResiduesOnly",get:function(){return this._prevState.pdbId===this.state.pdbId&&this._prevState.chainId===this.state.chainId&&this.visualPropsUnchanged&&this.residuePositionsUnchanged}},{key:"residuePositionsUnchanged",get:function(){return s.isEqual(s.keys(this.currentResidueToPositionMap).sort(),s.keys(this.prevResidueToPositionMap).sort())}},{key:"currentResidueToPositionMap",get:function(){return P(this.state.residues)}},{key:"prevResidueToPositionMap",get:function(){return P(this._prevState.residues)}},{key:"visualPropsUnchanged",get:function(){return s.isEqual(s.omit(this.props,["pdbId","chainId","residues"]),s.omit(this._prevProps,["pdbId","chainId","residues"]))}}])&&M(n.prototype,o),l&&M(n,l),t}();function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}V([u.observable],B.prototype,"props",void 0),V([u.observable],B.prototype,"_prevProps",void 0),V([u.observable],B.prototype,"state",void 0),V([u.observable],B.prototype,"_prevState",void 0),V([u.action],B.prototype,"setState",null),V([u.action],B.prototype,"setProps",null),V([u.computed],B.prototype,"residuesToUpdate",null),V([u.computed],B.prototype,"needToUpdateResiduesOnly",null),V([u.computed],B.prototype,"residuePositionsUnchanged",null),V([u.computed],B.prototype,"currentResidueToPositionMap",null),V([u.computed],B.prototype,"prevResidueToPositionMap",null),V([u.computed],B.prototype,"visualPropsUnchanged",null),V([u.action],B.prototype,"updateVisualStyle",null);var z=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":q(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},K=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=H(t).call(this,e))||"object"!==q(o)&&"function"!=typeof o?U(r):o,Object.defineProperty(U(n),"_3dMolDiv",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(U(n),"_pdbId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(U(n),"wrapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n.divHandler=n.divHandler.bind(U(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(t,l["Component"]),n=t,(r=[{key:"render",value:function(){return l.createElement("div",{ref:this.divHandler,style:{height:this.props.bounds.height,width:this.props.bounds.width,padding:0},className:"borderedChart"})}},{key:"componentDidMount",value:function(){this._3dMolDiv&&(this.wrapper=new B(this._3dMolDiv,this.props),this.wrapper.init(this.props.pdbId,this.props.chainId,this.props.residues),this._pdbId=this.props.pdbId)}},{key:"componentDidUpdate",value:function(e){this.wrapper&&(this.props.pdbId!==this._pdbId?(this._pdbId=this.props.pdbId,this.wrapper.loadPdb(this._pdbId,this.props.chainId,this.props.residues,this.props)):this.wrapper.updateViewer(this.props.chainId,this.props.residues,this.props),s.isEqual(this.props.bounds,e.bounds)||this.wrapper.resize())}},{key:"divHandler",value:function(e){this._3dMolDiv=e,this.props.containerRef&&this.props.containerRef(e)}}])&&F(n.prototype,r),o&&F(n,o),t}(),Q=K=z([g.observer],K),Y=n(183),X=n(1180),Z=n.n(X);function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e,t){return(te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var re=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ne(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},oe=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=$(t).call(this,e))||"object"!==ne(o)&&"function"!=typeof o?ee(r):o,Object.defineProperty(ee(n),"isTextTruncated",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object(u.makeObservable)(ee(n)),n.toggleText=n.toggleText.bind(ee(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&te(e,t)}(t,l["Component"]),n=t,(r=[{key:"render",value:function(){var e=this.props.text;return"string"==typeof this.props.text&&(e=l.createElement(Z.a,{text:this.props.text,line:this.props.line,truncateText:this.props.truncateText,textTruncateChild:l.createElement("a",{onClick:this.toggleText,style:{cursor:"pointer"}},this.props.expandIndicator)})),l.createElement(y.If,{condition:this.isTextTruncated},l.createElement(y.Then,null,e),l.createElement(y.Else,null,l.createElement("span",null,l.createElement("span",null,this.props.text," "),l.createElement("span",null,l.createElement("a",{onClick:this.toggleText,style:{cursor:"pointer"}},this.props.collapseIndicator)))))}},{key:"toggleText",value:function(){this.isTextTruncated=!this.isTextTruncated}}])&&J(n.prototype,r),o&&J(n,o),t}();Object.defineProperty(oe,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{line:1,expandIndicator:"[...]",collapseIndicator:"[^]",truncateText:" "}}),re([u.observable],oe.prototype,"isTextTruncated",void 0);var ie=oe=re([g.observer],oe);function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function le(e,t){return!t||"object"!==ue(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var pe=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ue(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},de=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),le(this,se(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}(t,l["Component"]),n=t,(r=[{key:"render",value:function(){var e=null,t=null;if(this.props.cache){var n=this.props.cache.get(this.props.pdbId);if(null===n)e=l.createElement(S.R,{status:S.Q.LOADING}),t=l.createElement(S.R,{status:S.Q.LOADING});else if("error"===n.status)e=l.createElement(S.R,{status:S.Q.ERROR}),t=l.createElement(S.R,{status:S.Q.ERROR});else if(null===n.data)e=l.createElement(S.R,{status:S.Q.NA}),t=l.createElement(S.R,{status:S.Q.NA});else{var r=Object(Y.c)(n.data,this.props.chainId);e=r.pdbInfo,t=r.moleculeInfo}}return l.createElement("div",{className:this.props.truncateText?"col col-sm-12":""},l.createElement("div",{className:this.props.truncateText?"row":""},l.createElement("div",{className:"pull-left",style:{paddingRight:5}},l.createElement("span",{style:{fontWeight:this.props.summaryFormat?"bold":"normal"}},l.createElement("span",null,this.props.summaryFormat?"pdb":"PDB"),!this.props.summaryFormat&&l.createElement("span",{style:{paddingLeft:5}},l.createElement("a",{href:"http://www.rcsb.org/pdb/explore/explore.do?structureId=".concat(this.props.pdbId),target:"_blank"},l.createElement("b",null,this.props.pdbId))),l.createElement("span",null,":"))),l.createElement("div",{"data-test":"pdbChainInfoText"},this.props.truncateText?l.createElement(ie,{text:e}):l.createElement("span",null,e))),l.createElement("div",{className:this.props.truncateText?"row":""},l.createElement("div",{className:"pull-left",style:{paddingRight:5}},l.createElement("span",{style:{fontWeight:this.props.summaryFormat?"bold":"normal"}},l.createElement("span",null,this.props.summaryFormat?"chain":"Chain"),!this.props.summaryFormat&&l.createElement("span",{style:{paddingLeft:3}},l.createElement("b",null,this.props.chainId)),l.createElement("span",null,":"))),l.createElement("div",null,this.props.truncateText?l.createElement(ie,{text:t}):l.createElement("span",null,t))))}}])&&ae(n.prototype,r),o&&ae(n,o),t}(),fe=de=pe([g.observer],de);function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function be(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ge(e,t){return(ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ve=function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,e=!(r=ye(t).apply(this,arguments))||"object"!==he(r)&&"function"!=typeof r?be(n):r,Object.defineProperty(be(e),"_script",{enumerable:!0,configurable:!0,writable:!0,value:[]}),e}var n,o,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}(t,j),n=t,l=[{key:"PROTEIN_SCHEME_PRESETS",get:function(){var e={};return e[r.CARTOON]="hide everything; show cartoon;",e[r.SPACE_FILLING]="hide everything; show spheres;",e[r.BALL_AND_STICK]="hide everything; show spheres; show sticks; alter all, vdw=0.50",e[r.RIBBON]="hide everything; show ribbon;",e[r.TRACE]=e[r.RIBBON],e}}],(o=[{key:"generateScript",value:function(e,t,n,r){return this._script=[],this.reinitialize(),this.bgColor(r.backgroundColor||j.defaultProps.backgroundColor),this.loadPdb(e),this.updateVisualStyle(n,t,r),this.selectNone(),this._script.join("\n")}},{key:"reinitialize",value:function(){this._script.push("reinitialize;")}},{key:"bgColor",value:function(e){this._script.push("bg_color ".concat(this.formatColor(e),";"))}},{key:"loadPdb",value:function(e){this._script.push("fetch ".concat(e,", async=0;"))}},{key:"setScheme",value:function(e){this._script.push(t.PROTEIN_SCHEME_PRESETS[e])}},{key:"setColor",value:function(e){this._script.push("color ".concat(this.formatColor(e),", sele;"))}},{key:"selectChain",value:function(e){this._script.push("select chain ".concat(e,";"))}},{key:"selectAlphaHelix",value:function(e){this._script.push("select (chain ".concat(e,") and (ss h);"))}},{key:"selectBetaSheet",value:function(e){this._script.push("select (chain ".concat(e,") and (ss s);"))}},{key:"selectResidues",value:function(e,t){this._script.push("select (resi ".concat(e.join(","),") and (chain ").concat(t,");"))}},{key:"selectSideChains",value:function(e,t){this._script.push("select ((resi ".concat(e.join(","),") and (chain ").concat(t,") and (not name c+n+o));"))}},{key:"setTransparency",value:function(e){this._script.push("set transparency, ".concat(e/10,", sele;")),this._script.push("set cartoon_transparency, ".concat(e/10,", sele;")),this._script.push("set sphere_transparency, ".concat(e/10,", sele;")),this._script.push("set stick_transparency, ".concat(e/10,", sele;"))}},{key:"enableBallAndStick",value:function(){this._script.push("show spheres, sele; show sticks, sele; alter sele, vdw=0.50;")}},{key:"disableBallAndStick",value:function(){this._script.push("hide spheres, sele; hide sticks, sele;")}},{key:"rainbowColor",value:function(){return this._script.push("spectrum count, rainbow_rev, sele;")}},{key:"cpkColor",value:function(){this._script.push("util.cbaw sele;")}},{key:"hideBoundMolecules",value:function(){this._script.push("hide everything, not resn ".concat("asp+glu+arg+lys+his+asn+thr+cys+gln+tyr+ser+gly+ala+leu+val+ile+met+trp+phe+pro",";"))}},{key:"formatColor",value:function(e){return e.replace("#","0x")}},{key:"selectAll",value:function(){this._script.push("select all;")}},{key:"selectNone",value:function(){this._script.push("select none;")}},{key:"updateResidueStyle",value:function(e,t,n){var r=this,o=j.defaultProps,l=n.highlightColor||o.highlightColor,c=s.groupBy(e,function(e){return e.highlighted?l:e.color});s.each(s.keys(c),function(e){var l=c[e].map(function(e){return e.positionRange}),s=r.convertPositionsToResCode(l);c[e][0].highlighted?(r.selectResidues(s,t),r.setColor(n.highlightColor||o.highlightColor)):n.mutationColor===a.MUTATION_TYPE?(r.selectResidues(s,t),r.setColor(e)):n.mutationColor===a.UNIFORM&&(r.selectResidues(s,t),r.setColor(n.uniformMutationColor||o.uniformMutationColor));var u=n.sideChain===i.ALL||!0===c[e][0].highlighted&&n.sideChain===i.SELECTED;r.updateSideChains(t,s,u,n)})}},{key:"updateSideChains",value:function(e,t,n,o){n&&o.proteinScheme!==r.SPACE_FILLING&&(this.selectSideChains(t,e),this.enableBallAndStick())}}])&&me(n.prototype,o),l&&me(n,l),t}(),_e=n(1015),we=n.n(_e);function Oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ee(e){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ke(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ce(e,t){return(Ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pe(e){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Te=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Pe(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},xe=function(e){function t(e){var n,l,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l=this,n=!(s=Ee(t).call(this,e))||"object"!==Pe(s)&&"function"!=typeof s?ke(l):s,Object.defineProperty(ke(n),"isCollapsed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(ke(n),"isIncreasedSize",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(ke(n),"proteinScheme",{enumerable:!0,configurable:!0,writable:!0,value:r.CARTOON}),Object.defineProperty(ke(n),"proteinColor",{enumerable:!0,configurable:!0,writable:!0,value:o.UNIFORM}),Object.defineProperty(ke(n),"sideChain",{enumerable:!0,configurable:!0,writable:!0,value:i.SELECTED}),Object.defineProperty(ke(n),"mutationColor",{enumerable:!0,configurable:!0,writable:!0,value:a.MUTATION_TYPE}),Object.defineProperty(ke(n),"displayBoundMolecules",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(ke(n),"_3dMolDiv",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object(u.makeObservable)(ke(n)),n.containerRefHandler=n.containerRefHandler.bind(ke(n)),n.toggleCollapse=n.toggleCollapse.bind(ke(n)),n.toggleDoubleSize=n.toggleDoubleSize.bind(ke(n)),n.handleProteinSchemeChange=n.handleProteinSchemeChange.bind(ke(n)),n.handleProteinColorChange=n.handleProteinColorChange.bind(ke(n)),n.handleSideChainChange=n.handleSideChainChange.bind(ke(n)),n.handleMutationColorChange=n.handleMutationColorChange.bind(ke(n)),n.handleBoundMoleculeChange=n.handleBoundMoleculeChange.bind(ke(n)),n.handlePyMolDownload=n.handlePyMolDownload.bind(ke(n)),n}var n,c,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ce(e,t)}(t,l["Component"]),n=t,(c=[{key:"selectionTitle",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"top",r=null;return t&&(r=this.defaultInfoTooltip(t,n)),l.createElement("span",null,e," ",r,":")}},{key:"defaultInfoTooltip",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top";return l.createElement(S.i,{placement:t,overlay:function(){return e},arrowContent:l.createElement("div",{className:"rc-tooltip-arrow-inner"}),destroyTooltipOnHide:!0},l.createElement("i",{className:"fa fa-info-circle"}))}},{key:"proteinColorTooltipContent",value:function(){return l.createElement("div",{style:{maxWidth:400,maxHeight:200,overflowY:"auto"}},"Color options for the protein structure. ",l.createElement("br",null),l.createElement("br",null),l.createElement("b",null,"Uniform:")," Colors the entire protein structure with a",l.createElement("span",{className:we.a.loop}," single color"),". ",l.createElement("br",null),l.createElement("b",null,"Secondary structure:")," Colors the protein by secondary structure. Assigns different colors for"," ",l.createElement("span",{className:we.a["alpha-helix"]},"alpha helices"),",",l.createElement("span",{className:we.a["beta-sheet"]}," beta sheets"),", and",l.createElement("span",{className:we.a.loop}," loops"),". This color option is not available for the space-filling protein scheme."," ",l.createElement("br",null),l.createElement("b",null,"N-C rainbow:")," Colors the protein with a rainbow gradient from red (N-terminus) to blue (C-terminus). ",l.createElement("br",null),l.createElement("b",null,"Atom Type:")," Colors the structure with respect to the atom type (CPK color scheme). This color option is only available for the space-filling protein scheme. ",l.createElement("br",null),l.createElement("br",null),"The selected chain is always displayed with full opacity while the rest of the structure has some transparency to help better focusing on the selected chain.")}},{key:"sideChainTooltipContent",value:function(){return l.createElement("div",{style:{maxWidth:400,maxHeight:200,overflowY:"auto"}},"Display options for the side chain atoms. ",l.createElement("br",null),l.createElement("br",null),l.createElement("b",null,"All:")," Displays the side chain atoms for every mapped residue. ",l.createElement("br",null),l.createElement("b",null,"Selected:")," Displays the side chain atoms only for the selected mutations. ",l.createElement("br",null),l.createElement("b",null,"None:")," Hides the side chain atoms. ",l.createElement("br",null),l.createElement("br",null),"This option has no effect for the space-filling protein scheme.")}},{key:"mutationColorTooltipContent",value:function(){return l.createElement("div",{style:{maxWidth:400,maxHeight:200,overflowY:"auto"}},"Color options for the mapped mutations. ",l.createElement("br",null),l.createElement("br",null),l.createElement("b",null,"Uniform:")," Colors all mutated residues with a",l.createElement("span",{className:we.a["uniform-mutation"]}," ","single color"),". ",l.createElement("br",null),l.createElement("b",null,"Mutation type:")," Enables residue coloring by mutation type. Mutation types and corresponding color codes are as follows:",l.createElement("ul",null,l.createElement("li",null,l.createElement("span",{className:we.a["missense-mutation"]},"Missense Mutations")),l.createElement("li",null,l.createElement("span",{className:we.a["trunc-mutation"]},"Truncating Mutations"),l.createElement("span",null," (Nonsense, Nonstop, FS del, FS ins)")),l.createElement("li",null,l.createElement("span",{className:we.a["inframe-mutation"]},"Inframe Mutations"),l.createElement("span",null," (IF del, IF ins)"))),l.createElement("b",null,"None:")," Disables coloring of the mutated residues except for manually selected (highlighted) residues. ",l.createElement("br",null),l.createElement("br",null),"Highlighted residues are colored with"," ",l.createElement("span",{className:we.a.highlighted},"yellow"),".")}},{key:"boundMoleculesTooltipContent",value:function(){return l.createElement("div",{style:{maxWidth:400,maxHeight:200,overflowY:"auto"}},"Displays co-crystalized molecules. This option has no effect if the current structure does not contain any co-crystalized bound molecules.")}},{key:"helpTooltipContent",value:function(){return l.createElement("div",{style:{maxWidth:400,maxHeight:200,overflowY:"auto"}},l.createElement("b",null,"Zoom in/out:")," Press and hold the SHIFT key and the left mouse button, and then move the mouse backward/forward.",l.createElement("br",null),l.createElement("b",null,"Pan:")," Press and hold the CTRL key, click and hold the left mouse button, and then move the mouse in the desired direction.",l.createElement("br",null),l.createElement("b",null,"Rotate:")," Press and hold the left mouse button, and then move the mouse in the desired direction to rotate along the x and y axes.",l.createElement("br",null))}},{key:"proteinStyleMenu",value:function(){return l.createElement("span",null,l.createElement("div",{className:"row text-center"},l.createElement("span",null,"Protein Style")),l.createElement("div",{className:"row"},l.createElement("div",{className:"col col-sm-10 col-sm-offset-1"},l.createElement("hr",null))),l.createElement("div",{className:"row"},l.createElement(m.Checkbox,{checked:this.displayBoundMolecules,onChange:this.handleBoundMoleculeChange},"Display bound molecules"," ",this.defaultInfoTooltip(this.boundMoleculesTooltipContent()))),l.createElement("div",{className:"row"},l.createElement("div",{className:"col col-sm-6"},l.createElement("div",{className:"row"},this.selectionTitle("Scheme")),l.createElement("div",{className:"row"},l.createElement(m.FormControl,{className:we.a["default-option-select"],componentClass:"select",value:"".concat(this.proteinScheme),onChange:this.handleProteinSchemeChange},l.createElement("option",{value:r.CARTOON},"cartoon"),l.createElement("option",{value:r.SPACE_FILLING},"space-filling"),l.createElement("option",{value:r.TRACE},"trace")))),l.createElement("div",{className:"col col-sm-6"},l.createElement("div",{className:"row"},this.selectionTitle("Color",this.proteinColorTooltipContent())),l.createElement("div",{className:"row"},l.createElement(m.FormControl,{className:we.a["default-option-select"],componentClass:"select",value:"".concat(this.proteinColor),onChange:this.handleProteinColorChange},l.createElement("option",{value:o.UNIFORM},"uniform"),l.createElement("option",{value:o.SECONDARY_STRUCTURE,disabled:this.colorBySecondaryStructureDisabled},"secondary structure"),l.createElement("option",{value:o.NC_RAINBOW,disabled:this.colorByNCRainbowDisabled},"N-C rainbow"),l.createElement("option",{value:o.ATOM_TYPE,disabled:this.colorByAtomTypeDisabled},"atom type"))))))}},{key:"mutationStyleMenu",value:function(){return l.createElement("span",null,l.createElement("div",{className:"row text-center"},l.createElement("span",null,"Mutation Style")),l.createElement("div",{className:"row"},l.createElement("div",{className:"col col-sm-10 col-sm-offset-1"},l.createElement("hr",null))),l.createElement("div",{className:"row"},l.createElement("div",{className:"col col-sm-6"},l.createElement("div",{className:"row"},this.selectionTitle("Side Chain",this.sideChainTooltipContent())),l.createElement("div",{className:"row"},l.createElement(m.FormControl,{className:we.a["default-option-select"],componentClass:"select",value:"".concat(this.sideChain),onChange:this.handleSideChainChange},l.createElement("option",{value:i.ALL},"all"),l.createElement("option",{value:i.SELECTED},"selected"),l.createElement("option",{value:i.NONE},"none")))),l.createElement("div",{className:"col col-sm-6"},l.createElement("div",{className:"row"},this.selectionTitle("Color",this.mutationColorTooltipContent(),"left")),l.createElement("div",{className:"row"},l.createElement(m.FormControl,{className:we.a["default-option-select"],componentClass:"select",value:"".concat(this.mutationColor),onChange:this.handleMutationColorChange},l.createElement("option",{value:a.UNIFORM},"uniform"),l.createElement("option",{value:a.MUTATION_TYPE},"mutation type"),l.createElement("option",{value:a.NONE},"none"))))))}},{key:"topToolbar",value:function(){return l.createElement("div",{className:"row"},l.createElement("div",{className:"col col-sm-6"},l.createElement(m.ButtonGroup,null,l.createElement(S.i,{overlay:l.createElement("span",null,"Download PyMol script"),placement:"top"},l.createElement(m.Button,{className:"btn-sm",onClick:this.handlePyMolDownload},l.createElement("i",{className:"fa fa-cloud-download"})," PyMol")))),l.createElement("div",{className:"col col-sm-6"},l.createElement("span",{className:"pull-right"},"how to pan/zoom/rotate?"," ",this.defaultInfoTooltip(this.helpTooltipContent(),"left"))))}},{key:"header",value:function(){return l.createElement("div",{className:d()("row",we.a.header)},l.createElement("div",{className:"col col-sm-10"},l.createElement("span",null,"3D Structure")),l.createElement("div",{className:"col col-sm-2"},l.createElement("span",{className:"pull-right"},l.createElement("i",{className:d()("fa",{"fa-compress":this.isIncreasedSize,"fa-expand":!this.isIncreasedSize}),onClick:this.toggleDoubleSize,style:{marginRight:5,cursor:"pointer"}}),l.createElement("i",{className:"fa fa-minus-circle",onClick:this.toggleCollapse,style:{marginRight:5,cursor:"pointer"}}),l.createElement("i",{className:"fa fa-times-circle",onClick:this.props.onClose,style:{cursor:"pointer"}}))))}},{key:"mainContent",value:function(){return this.pdbId&&this.chainId&&this.residues?l.createElement("span",null,l.createElement("div",{className:"row"},l.createElement(fe,{pdbId:this.pdbId,chainId:this.chainId,cache:this.props.pdbHeaderCache,truncateText:!0})),l.createElement(y.If,{condition:this.residueWarning.length>0},l.createElement("div",{className:"row"},l.createElement("div",{className:"col col-sm-12 text-center"},l.createElement("span",{className:"text-danger"},this.residueWarning)))),l.createElement("div",{className:"row",style:{paddingTop:5,paddingBottom:5}},l.createElement(Q,{displayBoundMolecules:this.displayBoundMolecules,proteinScheme:this.proteinScheme,proteinColor:this.proteinColor,sideChain:this.sideChain,mutationColor:this.mutationColor,pdbId:this.pdbId,chainId:this.chainId,residues:this.residues,bounds:this.structureViewerBounds,containerRef:this.containerRefHandler}))):l.createElement("div",{style:{textAlign:"center"}},l.createElement(b.ThreeBounce,{size:25,style:{display:"inline-block",padding:25}}))}},{key:"render",value:function(){return l.createElement(_.a,{handle:".structure-viewer-header"},l.createElement("div",{className:d()(we.a["main-3d-panel"],Oe({},we.a["increased-size-panel"],this.isIncreasedSize))},l.createElement("div",{className:"structure-viewer-header row"},this.header(),l.createElement("hr",{style:{borderTopColor:"#BBBBBB"}})),l.createElement("div",{className:d()(we.a.body,Oe({},we.a["collapsed-panel"],this.isCollapsed))},this.mainContent(),l.createElement("div",{className:"row"},this.topToolbar(),l.createElement("hr",null)),l.createElement("div",{className:"row"},l.createElement("div",{className:"col col-sm-6"},this.proteinStyleMenu()),l.createElement("div",{className:"col col-sm-6"},this.mutationStyleMenu())))))}},{key:"containerRefHandler",value:function(e){this._3dMolDiv=e}},{key:"toggleCollapse",value:function(){this.isCollapsed=!this.isCollapsed}},{key:"toggleDoubleSize",value:function(){this.isIncreasedSize=!this.isIncreasedSize}},{key:"handleProteinSchemeChange",value:function(e){this.proteinScheme=parseInt(e.target.value,10),(this.proteinScheme!==r.SPACE_FILLING||this.proteinColor!==o.NC_RAINBOW&&this.proteinColor!==o.SECONDARY_STRUCTURE)&&(this.proteinScheme!==r.TRACE&&this.proteinScheme!==r.CARTOON||this.proteinColor!==o.ATOM_TYPE)||(this.proteinColor=o.UNIFORM)}},{key:"handleProteinColorChange",value:function(e){this.proteinColor=parseInt(e.target.value,10)}},{key:"handleSideChainChange",value:function(e){this.sideChain=parseInt(e.target.value,10)}},{key:"handleMutationColorChange",value:function(e){this.mutationColor=parseInt(e.target.value,10)}},{key:"handleBoundMoleculeChange",value:function(){this.displayBoundMolecules=!this.displayBoundMolecules}},{key:"handlePyMolDownload",value:function(){if(this.pdbId&&this.chainId){var e="".concat(this.pdbId,"_").concat(this.chainId,".pml");O()(this.pyMolScript,e)}}},{key:"structureViewerBounds",get:function(){var e,t;return this.isIncreasedSize?(e=this._3dMolDiv?Math.floor(this._3dMolDiv.offsetWidth*(5/3)):698,t=this._3dMolDiv?2*this._3dMolDiv.offsetHeight:350):(e=this._3dMolDiv?Math.floor(this._3dMolDiv.offsetWidth/(5/3)):450,t=this._3dMolDiv?this._3dMolDiv.offsetHeight/2:350),{width:e,height:t}}},{key:"pdbId",get:function(){return this.pdbChain?this.pdbChain.pdbId:void 0}},{key:"chainId",get:function(){return this.pdbChain?this.pdbChain.chain:void 0}},{key:"pdbChain",get:function(){var e=this.props.pdbChainDataStore.sortedFilteredSelectedData;return 0===e.length&&(e=this.props.pdbChainDataStore.allData),0===e.length?void 0:e[0]}},{key:"residueWarning",get:function(){var e="";if(0===this.proteinPositions.length||this.residueMappingData&&0===this.residueMappingData.filter(function(e){return null===e||null!==e.data}).length)e="None of the mutations can be mapped onto this structure";else{var t=s.keys(this.selectedMutationsByPosition).length,n=t-this.mappedSelectedPositions.length;1===t&&1===n?e="Selected mutation cannot be mapped onto this structure":n>0&&(e="".concat(n," of the selections cannot be mapped onto this structure"))}return e}},{key:"residues",get:function(){var e=this;if(this.residueMappingData){var t=[];return this.residueMappingData.forEach(function(n){if(n&&n.data){var r=e.mutationsByPosition[n.data.queryPosition],o=e.props.mutationDataStore&&(e.props.mutationDataStore.isPositionSelected(n.data.queryPosition)||e.props.mutationDataStore.isPositionHighlighted(n.data.queryPosition))||!1;r&&r.length>0&&t.push({positionRange:{start:{position:n.data.pdbPosition},end:{position:n.data.pdbPosition}},color:Object(E.m)(r,e.props),highlighted:o})}}),s.uniq(t)}}},{key:"residueMappingData",get:function(){if(0!==this.alignmentIds.length){var e=[];if(this.props.residueMappingCache&&this.props.uniprotId&&this.pdbId&&this.chainId&&this.proteinPositions.length>0){var t=this.props.residueMappingCache.get({uniprotId:this.props.uniprotId,pdbId:this.pdbId,chainId:this.chainId,uniprotPositions:this.proteinPositions});t.result&&(e=t.result)}return e}}},{key:"mappedSelectedPositions",get:function(){var e=this;if(!this.residueMappingData)return[];var t=[];return this.residueMappingData.forEach(function(n){n&&n.data&&e.props.mutationDataStore&&e.props.mutationDataStore.isPositionSelected(n.data.queryPosition)&&t.push(n.data.queryPosition)}),s.uniq(t)}},{key:"alignmentIds",get:function(){var e=[];this.pdbChain&&this.props.pdbAlignmentIndex&&(e=void 0===this.props.pdbAlignmentIndex[this.pdbChain.pdbId][this.pdbChain.chain]?[]:this.props.pdbAlignmentIndex[this.pdbChain.pdbId][this.pdbChain.chain].map(function(e){return e.alignmentId}));return s.uniq(e)}},{key:"mutationsByPosition",get:function(){return this.props.mutationDataStore?Object(E.s)(this.props.mutationDataStore.sortedFilteredData):{}}},{key:"selectedMutationsByPosition",get:function(){return this.props.mutationDataStore?Object(E.s)(this.props.mutationDataStore.sortedFilteredSelectedData):{}}},{key:"proteinPositions",get:function(){var e=[];return this.props.mutationDataStore&&this.pdbChain&&(e=Object(E.p)(this.props.mutationDataStore.sortedFilteredData,this.pdbChain.uniprotStart,this.pdbChain.uniprotEnd)),e}},{key:"pyMolScript",get:function(){var e=new ve,t={displayBoundMolecules:this.displayBoundMolecules,proteinScheme:this.proteinScheme,proteinColor:this.proteinColor,sideChain:this.sideChain,mutationColor:this.mutationColor};return this.pdbId&&this.chainId?e.generateScript(this.pdbId,this.chainId,this.residues||[],t):""}},{key:"colorBySecondaryStructureDisabled",get:function(){return this.proteinScheme===r.SPACE_FILLING}},{key:"colorByNCRainbowDisabled",get:function(){return this.proteinScheme===r.SPACE_FILLING}},{key:"colorByAtomTypeDisabled",get:function(){return this.proteinScheme!==r.SPACE_FILLING}}])&&Se(n.prototype,c),p&&Se(n,p),t}();Te([u.observable],xe.prototype,"isCollapsed",void 0),Te([u.observable],xe.prototype,"isIncreasedSize",void 0),Te([u.observable],xe.prototype,"proteinScheme",void 0),Te([u.observable],xe.prototype,"proteinColor",void 0),Te([u.observable],xe.prototype,"sideChain",void 0),Te([u.observable],xe.prototype,"mutationColor",void 0),Te([u.observable],xe.prototype,"displayBoundMolecules",void 0),Te([u.computed],xe.prototype,"structureViewerBounds",null),Te([u.computed],xe.prototype,"pdbId",null),Te([u.computed],xe.prototype,"chainId",null),Te([u.computed],xe.prototype,"pdbChain",null),Te([u.computed],xe.prototype,"residueWarning",null),Te([u.computed],xe.prototype,"residues",null),Te([u.computed],xe.prototype,"residueMappingData",null),Te([u.computed],xe.prototype,"mappedSelectedPositions",null),Te([u.computed],xe.prototype,"alignmentIds",null),Te([u.computed],xe.prototype,"mutationsByPosition",null),Te([u.computed],xe.prototype,"selectedMutationsByPosition",null),Te([u.computed],xe.prototype,"proteinPositions",null),Te([u.computed],xe.prototype,"pyMolScript",null),Te([u.computed],xe.prototype,"colorBySecondaryStructureDisabled",null),Te([u.computed],xe.prototype,"colorByNCRainbowDisabled",null),Te([u.computed],xe.prototype,"colorByAtomTypeDisabled",null);var je=xe=Te([g.observer],xe);function Ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ie=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,"regions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.regions=t?Me(t):[]}var t,n,r;return t=e,(n=[{key:"check",value:function(e,t){void 0===t&&(t=e);for(var n,r,o=this.regions,i=0,a=o.length,l=!1;i<a;)if((r=o[n=Math.floor((i+a)/2)])[0]>t)a=n;else{if(!(r[1]<e)){l=!0;break}i=n+1}return l}},{key:"add",value:function(e,t){this.regions.push([e,t]),this.regions=Me(this.regions)}},{key:"_getHotspotRegions",value:function(){return this.regions}}])&&Ae(t.prototype,n),r&&Ae(t,r),e}();function Me(e){if(0===e.length)return[];e.sort(function(e,t){return e[0]<t[0]?-1:1});for(var t,n=[],r=[e[0][0],e[0][1]],o=1;o<=e.length;)o===e.length?n.push(r):(t=e[o])[0]>r[1]?(n.push(r),r=[e[o][0],e[o][1]]):r[1]=Math.max(r[1],t[1]),o++;return n}function De(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ne(e){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Le(e,t){return(Le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ge(e){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ve=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Ge(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Be=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=Ne(t).call(this,e))||"object"!==Ge(o)&&"function"!=typeof o?Re(r):o,Object(u.makeObservable)(Re(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Le(e,t)}(t,l["Component"]),n=t,(r=[{key:"render",value:function(){var e=this;return l.createElement("g",{key:this.props.uniqueHitZoneClassName},this.segmentsAndGaps.map(function(t){return t.gap?l.createElement("line",{stroke:"#666666",strokeWidth:"0.5",x1:e.props.positionToX(t.start),x2:e.props.positionToX(t.end),y1:e.props.y+e.props.height/2,y2:e.props.y+e.props.height/2}):l.createElement("rect",{fill:"#3366cc",fillOpacity:e.props.opacity,stroke:"#666666",strokeWidth:"0.5",x:e.props.positionToX(t.start),y:e.props.y,width:e.props.positionToX(t.end)-e.props.positionToX(t.start),height:e.props.height})}),l.createElement("rect",{stroke:"#FF9900",strokeWidth:"2",fillOpacity:"0",strokeOpacity:+!!this.props.highlighted,height:this.props.height,width:this.props.positionToX(this.props.end)-this.props.positionToX(this.props.start),x:this.props.positionToX(this.props.start),y:this.props.y,className:this.props.uniqueHitZoneClassName}))}},{key:"segmentsAndGaps",get:function(){var e=[],t=s.sortBy(this.props.gaps,function(e){return e.start});if(0===t.length)e.push({gap:!1,start:this.props.start,end:this.props.end});else{t[0].start>this.props.start&&e.push({gap:!1,start:this.props.start,end:t[0].start}),e.push({gap:!0,start:t[0].start,end:t[0].end});for(var n=1;n<t.length;n++)e.push({gap:!1,start:t[n-1].end,end:t[n].start}),e.push({gap:!0,start:t[n].start,end:t[n].end});var r=t[t.length-1];r.end<this.props.end&&e.push({gap:!1,start:r.end,end:this.props.end})}return e}}])&&De(n.prototype,r),o&&De(n,o),t}();Ve([u.computed],Be.prototype,"segmentsAndGaps",null);var Fe=Be=Ve([g.observer],Be);function He(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ue(e){return(Ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function We(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qe(e,t){return(qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ze(e){return(ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ke=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ze(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Qe=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=Ue(t).call(this,e))||"object"!==ze(o)&&"function"!=typeof o?We(r):o,Object.defineProperty(We(n),"rowHeight",{enumerable:!0,configurable:!0,writable:!0,value:6}),Object.defineProperty(We(n),"rowPadding",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(We(n),"chainComponents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object(u.makeObservable)(We(n)),n.onMouseOver=n.onMouseOver.bind(We(n)),n.positionToX=n.positionToX.bind(We(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qe(e,t)}(t,l["Component"]),n=t,(r=[{key:"positionToX",value:function(e){return e*this.props.width/this.props.proteinLength}},{key:"makeChainIdClass",value:function(e){return"".concat("chain-").concat(e)}},{key:"getChainId",value:function(e){var t=e.split(/[\s]+/g).map(function(e){return e.match(new RegExp("^(".concat("chain-",".*)$")))}).find(function(e){return null!==e});return t&&t[1]||null}},{key:"chainY",value:function(e){return e*(this.rowHeight+this.rowPadding)}},{key:"onMouseOver",value:function(e){var t=e.target,n=t.getAttribute("class")||"",r=this.getChainId(n);if(null!==r){var o=this.chainComponents[r];o&&this.props.setHitZone&&this.props.setHitZone({x:parseInt(t.getAttribute("x")||"0",10),y:parseInt(t.getAttribute("y")||"0",10),width:parseInt(t.getAttribute("width")||"0",10),height:parseInt(t.getAttribute("height")||"0",10)},o.props.uid)}}},{key:"render",value:function(){return l.createElement("div",null,l.createElement("div",{onMouseOver:this.onMouseOver},l.createElement("svg",{width:this.props.width,height:this.svgHeight},this.rows)))}},{key:"rowSpecs",get:function(){var e=[[]],t=[new Ie],n=!0,r=!1,o=void 0;try{for(var i,a=function(){var n=i.value,r=s.findIndex(t,function(e){return!e.check(n.start,n.end)});-1===r&&(r=e.length,e.push([]),t.push(new Ie)),e[r].push(n),t[r].add(n.start,n.end)},l=this.props.chains[Symbol.iterator]();!(n=(i=l.next()).done);n=!0)a()}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return e}},{key:"rows",get:function(){var e=this,t=0;this.chainComponents={};var n={},r=this.rowSpecs.map(function(r,o){return l.createElement("g",{key:o},r.map(function(r){var i=e.makeChainIdClass(t++),a=r.uid,s=e.chainY(o);return n[a]=s,l.createElement(Fe,{ref:function(t){null!==t&&(e.chainComponents[i]=t)},positionToX:e.positionToX,y:s,height:e.rowHeight,uniqueHitZoneClassName:i,start:r.start,end:r.end,gaps:r.gaps,opacity:r.opacity,uid:a,highlighted:e.props.selectedChainUid===r.uid})}))});return this.props.setChainUidToY&&this.props.setChainUidToY(n),r}},{key:"svgHeight",get:function(){return this.rows.length*this.rowHeight+(this.rows.length-1)*this.rowPadding}}])&&He(n.prototype,r),o&&He(n,o),t}();Ke([u.observable],Qe.prototype,"rowHeight",void 0),Ke([u.observable],Qe.prototype,"rowPadding",void 0),Ke([u.computed],Qe.prototype,"rowSpecs",null),Ke([u.computed],Qe.prototype,"rows",null),Ke([u.computed],Qe.prototype,"svgHeight",null);var Ye=Qe=Ke([g.observer],Qe),Xe=n(73);function Ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Je=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getOrganism",value:function(e,t){var n="NA";return s.find(e.compound,function(r){if(-1!=s.indexOf(r.chain,t.toLowerCase())&&null!=e.source[r.mol_id])return n=e.source[r.mol_id].organism_scientific||n,r}),n}},{key:"getOrganismFromCache",value:function(t,n){if(!t)return"";var r=t.get(n.pdbId);return r&&r.data?e.getOrganism(r.data,n.chain):""}}],(n=null)&&Ze(t.prototype,n),r&&Ze(t,r),e}(),$e=n(248);function et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nt(e,t){return!t||"object"!==lt(t)&&"function"!=typeof t?rt(e):t}function rt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ot(e){return(ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function it(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&at(e,t)}function at(e,t){return(at=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lt(e){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var st=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":lt(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ct=function(e){function t(){return tt(this,t),nt(this,ot(t).apply(this,arguments))}return it(t,Xe["b"]),t}(),ut=function(e){function t(e){var n;return tt(this,t),n=nt(this,ot(t).call(this,e)),Object(u.makeObservable)(rt(n)),n}var n,r,o;return it(t,l["Component"]),n=t,(r=[{key:"render",value:function(){return l.createElement(ct,{showColumnVisibility:!1,showCopyDownload:!1,itemsLabel:"PDB chain",itemsLabelPlural:"PDB chains",paginationProps:{showItemsPerPageSelector:!1,showMoreButton:!1},initialItemsPerPage:6,columns:this.columns,dataStore:this.props.dataStore,pageToHighlight:!0})}},{key:"columns",get:function(){var e=this,t=[];return t.push({name:"PDB Id",render:function(e){return l.createElement("a",{href:"http://www.rcsb.org/pdb/explore/explore.do?structureId=".concat(e.pdbId),target:"_blank"},e.pdbId)},sortBy:function(e){return e.pdbId},filter:function(e,t,n){return e.pdbId.toUpperCase().indexOf(n)>-1}}),t.push({name:"Chain",render:function(t){return l.createElement("span",null,l.createElement("span",{style:{float:"left",fontWeight:"bold",fontStyle:"italic"}},t.chain),l.createElement("a",{style:{float:"right",fontWeight:"bold",cursor:"pointer"},onClick:function(){e.props.dataStore.selectUid(e.props.dataStore.getChainUid(t))}},"3D"))},sortBy:function(e){return e.chain},filter:function(e,t,n){return e.chain.toUpperCase().indexOf(n)>-1}}),t.push({name:"Uniprot Positions",render:function(e){return l.createElement("span",null,"".concat(e.uniprotStart,"-").concat(e.uniprotEnd))},sortBy:function(e){return[e.uniprotStart,e.uniprotEnd]},filter:function(e,t){return(e.uniprotStart+"").indexOf(t)>-1||(e.uniprotEnd+"").indexOf(t)>-1}}),t.push({name:"Organism",render:Object($e.a)(function(t){return e.props.cache?e.props.cache.get(t.pdbId):null},function(e,t){return l.createElement("span",null,Je.getOrganism(e,t.chain))}),sortBy:function(t){return Je.getOrganismFromCache(e.props.cache,t)},filter:function(t,n,r){return(Je.getOrganismFromCache(e.props.cache,t)||"").toUpperCase().indexOf(r)>-1},visible:!!this.props.cache}),t.push({name:"Summary",render:function(t){return l.createElement(fe,{pdbId:t.pdbId,chainId:t.chain,cache:e.props.cache,truncateText:!1,summaryFormat:!0})},filter:function(t,n,r){if(!e.props.cache)return!1;var o=e.props.cache.get(t.pdbId);if(o&&o.data){var i=Object(Y.c)(o.data,t.chain);return i.pdbInfo.toUpperCase().indexOf(r)>-1||(i.moleculeInfo||"").toUpperCase().indexOf(r)>-1}return!1},visible:!!this.props.cache}),t}}])&&et(n.prototype,r),o&&et(n,o),t}();st([u.computed],ut.prototype,"columns",null);var pt=ut=st([g.observer],ut),dt=n(224),ft=n(190),ht=n(870);function mt(){return(mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bt(e){return(bt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vt(e,t){return(vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _t(e){return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var wt=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":_t(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Ot=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=bt(t).call(this,e),n=!o||"object"!==_t(o)&&"function"!=typeof o?gt(r):o,Object.defineProperty(gt(n),"isExpanded",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(gt(n),"pdbChainTableShown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(gt(n),"hoveredChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(gt(n),"hitZoneConfig",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,width:0,height:0,onClick:function(){}}}),Object.defineProperty(gt(n),"chainDiv",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(gt(n),"_chainScrollY",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(gt(n),"collapseTimeout",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(gt(n),"expandTimeout",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(gt(n),"chainUidToY",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(gt(n),"onChainSelectReaction",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(gt(n),"expandDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:750}),Object.defineProperty(gt(n),"collapseDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:3e3}),Object.defineProperty(gt(n),"handlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object(u.makeObservable)(gt(n)),n.handlers={onMouseEnter:Object(u.action)(function(){n.expandTimeout=window.setTimeout(function(){n.isExpanded=!0},n.expandDelayMs),n.collapseTimeout&&window.clearTimeout(n.collapseTimeout)}),onMouseLeave:Object(u.action)(function(){n.collapseTimeout=window.setTimeout(function(){n.isExpanded=!1},n.collapseDelayMs),n.expandTimeout&&window.clearTimeout(n.expandTimeout)}),chainDivRef:function(e){n.chainDiv=e},onChainScroll:function(){n.chainDiv&&n.isExpanded&&(n._chainScrollY=n.chainDiv.scrollTop)},togglePDBTable:Object(u.action)(function(){n.pdbChainTableShown=!n.pdbChainTableShown}),getTooltipContent:function(){return n.hoveredChain?l.createElement(fe,{pdbId:n.hoveredChain.pdbId,chainId:n.hoveredChain.chain,cache:n.props.pdbHeaderCache}):null},setHitZone:function(e,t){n.hitZoneConfig.x=e.x,n.hitZoneConfig.y=e.y,n.hitZoneConfig.width=e.width,n.hitZoneConfig.height=e.height,n.hitZoneConfig.onClick=function(){n.selectChain(t)},n.hoveredChain=n.props.store.pdbChainDataStore.getPdbChain(t)},setChainUidToY:function(e){n.chainUidToY=e}},n.onChainSelectReaction=Object(u.reaction)(function(){return n.props.store.pdbChainDataStore.selectedUid},function(e){var t=n.chainUidToY[e];if(void 0!==t&&(t<n.chainDiv.scrollTop||t>n.chainDiv.scrollTop+n.props.maxChainsHeight)){var r=n.props.maxChainsHeight/2;n.chainDiv.scrollTop=t-r}}),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vt(e,t)}(t,l["Component"]),n=t,(r=[{key:"componentWillUnmount",value:function(){this.onChainSelectReaction()}},{key:"selectChain",value:function(e){this.props.store.pdbChainDataStore.selectUid(e)}},{key:"componentDidMount",value:function(){var e=this;Object(ht.a)(function(){return e.props.store.pdbChainDataStore.selectFirstChain()})}},{key:"componentDidUpdate",value:function(){var e=this;Object(ht.a)(function(){e.chainDiv&&(e.chainDiv.scrollTop=e.chainScrollY)})}},{key:"helpTooltipContent",value:function(){return l.createElement("div",{style:{maxWidth:400}},"This panel displays a list of PDB chains for the corresponding uniprot ID. PDB chains are ranked with respect to their sequence similarity ratio, and aligned to the y-axis of the mutation diagram. Highly ranked chains have darker color than the lowly ranked ones.",l.createElement("br",null),l.createElement("br",null),"Each chain is represented by a single rectangle. Gaps within the chains are represented by a thin line connecting the segments of the chain.",l.createElement("br",null),l.createElement("br",null),"By default, only a first few rows are displayed. To see more chains, use the scroll bar next to the panel. To see the detailed list of all available PDB chains in a table click on the link below the panel.",l.createElement("br",null),l.createElement("br",null),"To select a chain, simply click on it. Selected chain is highlighted with a different frame color. You can also select a chain by clicking on a row in the table. Selecting a chain reloads the PDB data for the 3D structure visualizer.")}},{key:"render",value:function(){var e={};return this.tooltipVisible||(e.visible=!1),l.createElement("div",{onMouseEnter:this.handlers.onMouseEnter,onMouseLeave:this.handlers.onMouseLeave},l.createElement(dt.Collapse,{isOpened:this.isOpen},l.createElement("div",{style:{position:"relative"}},l.createElement("div",{className:"small",style:{position:"absolute"}},l.createElement("span",{style:{marginLeft:16}},"PDB Chains"),l.createElement(S.i,{placement:"left",overlay:this.helpTooltipContent,destroyTooltipOnHide:!0},l.createElement("i",{className:"fa fa-info-circle",style:{paddingLeft:3}}))),l.createElement("div",{ref:this.handlers.chainDivRef,style:{overflowY:"scroll",maxHeight:this.props.maxChainsHeight,marginLeft:this.props.geneXOffset,position:"relative"},onScroll:this.handlers.onChainScroll},l.createElement(Ye,{width:this.props.geneWidth,chains:this.chains,proteinLength:this.proteinLength,setHitZone:this.handlers.setHitZone,selectedChainUid:this.props.store.pdbChainDataStore.selectedUid,setChainUidToY:this.handlers.setChainUidToY}),l.createElement(S.i,mt({placement:"top",overlay:this.handlers.getTooltipContent},e),this.hitZone)),l.createElement("br",null),l.createElement("div",{style:{display:this.isExpanded?"inherit":"none"}},l.createElement("button",{onClick:this.handlers.togglePDBTable,className:"btn btn-default"},this.pdbChainTableShown?"Hide PDB Chain Table":"Show PDB Chain Table"),l.createElement("div",{style:{display:this.pdbChainTableShown?"inherit":"none",maxWidth:this.props.geneWidth}},l.createElement(pt,{dataStore:this.props.store.pdbChainDataStore,cache:this.props.pdbHeaderCache}))),l.createElement("br",null))))}},{key:"chainScrollY",get:function(){return this.isExpanded?this._chainScrollY:0}},{key:"isOpen",get:function(){return!!this.props.store.pdbChainDataStore.selectedChain}},{key:"displayChains",get:function(){return this.props.store.pdbChainDataStore.selectedChain?this.isExpanded?this.props.store.pdbChainDataStore.allData:[this.props.store.pdbChainDataStore.selectedChain]:[]}},{key:"chains",get:function(){var e=this;return this.displayChains.map(function(t){for(var n=[],r=-1,o=t.alignment,i=0;i<o.length;i++)o[i]===ft.a?-1===r&&(r=i):-1!==r&&(n.push({start:t.uniprotStart+r,end:t.uniprotStart+i}),r=-1);return{start:t.uniprotStart,end:t.uniprotEnd+1,gaps:n,opacity:t.identityPerc,uid:e.props.store.pdbChainDataStore.getChainUid(t)}})}},{key:"proteinLength",get:function(){var e=this.props.store.canonicalTranscript.result&&this.props.store.canonicalTranscript.result.proteinLength||0;return Math.max(e,1)}},{key:"tooltipVisible",get:function(){return null!==this.handlers.getTooltipContent()}},{key:"hitZone",get:function(){return l.createElement(S.q,{x:this.hitZoneConfig.x,y:this.hitZoneConfig.y,width:this.hitZoneConfig.width,height:this.hitZoneConfig.height,onClick:this.hitZoneConfig.onClick,cursor:"pointer"})}}])&&yt(n.prototype,r),o&&yt(n,o),t}();wt([u.observable],Ot.prototype,"isExpanded",void 0),wt([u.observable],Ot.prototype,"pdbChainTableShown",void 0),wt([u.observable],Ot.prototype,"hoveredChain",void 0),wt([u.observable],Ot.prototype,"hitZoneConfig",void 0),wt([u.computed],Ot.prototype,"chainScrollY",null),wt([u.action],Ot.prototype,"selectChain",null),wt([u.computed],Ot.prototype,"isOpen",null),wt([u.computed],Ot.prototype,"displayChains",null),wt([u.computed],Ot.prototype,"chains",null),wt([u.computed],Ot.prototype,"proteinLength",null),wt([u.computed],Ot.prototype,"tooltipVisible",null),wt([u.computed],Ot.prototype,"hitZone",null);var St=Ot=wt([g.observer],Ot),Et=n(342),kt=n(220),Ct=n(1016),Pt=n.n(Ct),Tt=(n(948),n(1017)),xt=n.n(Tt);function jt(){return(jt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function At(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function It(e){return(It=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dt(e,t){return(Dt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Nt(e){return(Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Rt=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Nt(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Lt=[S.J.MISSENSE_PUTATIVE_DRIVER,S.J.TRUNCATING_PUTATIVE_DRIVER,S.J.INFRAME_PUTATIVE_DRIVER,S.J.SPLICE_PUTATIVE_DRIVER,S.J.FUSION_PUTATIVE_DRIVER],Gt=[S.J.MISSENSE_UNKNOWN_SIGNIFICANCE,S.J.TRUNCATING_UNKNOWN_SIGNIFICANCE,S.J.INFRAME_UNKNOWN_SIGNIFICANCE,S.J.SPLICE_UNKNOWN_SIGNIFICANCE,S.J.FUSION_UNKNOWN_SIGNIFICANCE];function Vt(e,t,n,r){var o=[];return t.includes(e)?o=r:n.length!==r.length&&(o=n.map(function(e){return e.value})),o}var Bt=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=It(t).call(this,e))||"object"!==Nt(o)&&"function"!=typeof o?Mt(r):o,Object.defineProperty(Mt(n),"settingMenuVisible",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object(u.makeObservable)(Mt(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dt(e,t)}(t,f["A"]),n=t,(r=[{key:"getDriverVsVusOptionLabel",value:function(e){var t=l.createElement("button",{style:{marginLeft:5,marginRight:5,padding:"0px 4px 0px 4px",height:18},className:"btn btn-primary",onClick:this.onSettingMenuClick},l.createElement("i",{className:"fa fa-sliders",style:{fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"}}));return e.value===S.k.DRIVER?l.createElement("span",null,e.label||e.value,l.createElement("span",{className:xt.a["driver-annotation-setting"]},l.createElement(S.i,{placement:"top",overlay:l.createElement("span",null,"Change driver filtering in"," ",t)},t))):l.createElement("span",null,e.label||e.value)}},{key:"onDriverVsVusSelect",value:function(e,t){var n=Vt(S.k.DRIVER,e,this.selectedDriverMutationTypeValues,Lt),r=Vt(S.k.VUS,e,this.selectedVUSMutationTypeValues,Gt);this.props.onSelect&&this.props.onSelect(n.concat(r),t)}},{key:"onSettingMenuClick",value:function(e){e.stopPropagation(),this.settingMenuVisible=!this.settingMenuVisible,this.props.onClickSettingMenu&&this.props.onClickSettingMenu(this.settingMenuVisible)}},{key:"render",value:function(){return l.createElement("div",{className:xt.a["legend-panel"]},l.createElement(f.c,jt({options:this.driverVsVusOptions,getOptionLabel:this.getDriverVsVusOptionLabel,getBadgeLabel:f.X,selectedValues:this.selectedDriverVsVusValues.map(function(e){return{value:e}})},this.props,{onSelect:this.onDriverVsVusSelect})),l.createElement("hr",{style:{marginBottom:5}}),l.createElement(f.c,jt({options:this.options,getOptionLabel:f.Y,getBadgeLabel:f.X},this.props,{onSelect:this.props.onSelect})))}},{key:"selectedMutationTypeValues",get:function(){return Object(f.Z)(Object(f.R)(this.options),this.props.filter)}},{key:"selectedDriverMutationTypeValues",get:function(){return this.selectedMutationTypeValues.filter(function(e){return Lt.includes(e.value)})}},{key:"selectedVUSMutationTypeValues",get:function(){return this.selectedMutationTypeValues.filter(function(e){return Gt.includes(e.value)})}},{key:"selectedDriverVsVusValues",get:function(){if(this.props.annotatedProteinImpactTypeFilter){var e=[];return c.a.intersection(this.props.annotatedProteinImpactTypeFilter.values,Lt).length===Lt.length&&e.push(S.k.DRIVER),c.a.intersection(this.props.annotatedProteinImpactTypeFilter.values,Gt).length===Gt.length&&e.push(S.k.VUS),e}return[S.k.DRIVER,S.k.VUS]}},{key:"optionDisplayValueMap",get:function(){return Object(E.o)(this.proteinImpactTypeColors)}},{key:"proteinImpactTypeColors",get:function(){return Object(E.n)(this.props.colors)}},{key:"options",get:function(){var e=this;return E.d.map(function(t){return{value:t,label:e.optionDisplayValueMap[t],badgeContent:e.props.counts?e.props.counts[t]:void 0,badgeStyleOverride:{backgroundColor:e.proteinImpactTypeColors[t]}}}).filter(function(e){return!(e.value===S.J.OTHER&&0===e.badgeContent)})}},{key:"driverVsVusOptions",get:function(){var e=this;return[{value:S.k.DRIVER,label:this.optionDisplayValueMap[S.k.DRIVER],badgeContent:this.props.counts?c.a.reduce(Lt,function(t,n){return t+e.props.counts[n]},0):void 0,badgeStyleOverride:{backgroundColor:this.proteinImpactTypeColors[S.k.DRIVER]}},{value:S.k.VUS,label:this.optionDisplayValueMap[S.k.VUS],badgeContent:this.props.counts?c.a.reduce(Gt,function(t,n){return t+e.props.counts[n]},0):void 0,badgeStyleOverride:{backgroundColor:this.proteinImpactTypeColors[S.k.VUS]}}]}}])&&At(n.prototype,r),o&&At(n,o),t}();Object.defineProperty(Bt,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{colors:f.g,alignColumns:!0,unselectOthersWhenAllSelected:!1,numberOfColumnsPerRow:2}}),Rt([u.observable],Bt.prototype,"settingMenuVisible",void 0),Rt([u.computed],Bt.prototype,"selectedMutationTypeValues",null),Rt([u.computed],Bt.prototype,"selectedDriverMutationTypeValues",null),Rt([u.computed],Bt.prototype,"selectedVUSMutationTypeValues",null),Rt([u.computed],Bt.prototype,"selectedDriverVsVusValues",null),Rt([u.action.bound],Bt.prototype,"getDriverVsVusOptionLabel",null),Rt([u.action.bound],Bt.prototype,"onDriverVsVusSelect",null),Rt([u.action.bound],Bt.prototype,"onSettingMenuClick",null);var Ft=Bt=Rt([g.observer],Bt),Ht=n(6);function Ut(){return(Ut=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Wt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zt(e){return(zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qt(e,t){return(Qt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yt(e){return(Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",function(){return Zt});var Xt=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Yt(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Zt=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=zt(t).call(this,e))||"object"!==Yt(o)&&"function"!=typeof o?Kt(r):o,Object.defineProperty(Kt(n),"legendColorCodes",{enumerable:!0,configurable:!0,writable:!0,value:l.createElement("div",{style:{maxWidth:700,marginTop:5}},l.createElement("strong",{style:{color:"#2153AA"}},"Color Codes"),l.createElement("p",null,"Mutation diagram circles are colored with respect to the corresponding mutation types. In case of different mutation types at a single position, color of the circle is determined with respect to the most frequent mutation type."),l.createElement("br",null),l.createElement("div",null,"Mutation types and corresponding color codes are as follows:",l.createElement("ul",null,l.createElement("li",null,l.createElement("strong",{style:{color:f.g.missenseColor}},"Missense Mutations"),void 0!==n.props.isPutativeDriver&&l.createElement("span",null,"(putative driver)")),void 0!==n.props.isPutativeDriver&&l.createElement("li",null,l.createElement("strong",{style:{color:f.g.missenseVusColor}},"Missense Mutations"),void 0!==n.props.isPutativeDriver&&l.createElement("span",null,"(unknown significance)")),l.createElement("li",null,l.createElement("strong",{style:{color:f.g.truncatingColor}},"Truncating Mutations"),void 0!==n.props.isPutativeDriver&&l.createElement("span",null,"(putative driver)"),": Nonsense, Nonstop, Frameshift deletion, Frameshift insertion, Splice site"),void 0!==n.props.isPutativeDriver&&l.createElement("li",null,l.createElement("strong",{style:{color:f.g.truncatingVusColor}},"Truncating Mutations"),void 0!==n.props.isPutativeDriver&&l.createElement("span",null,"(unknown significance)"),": Nonsense, Nonstop, Frameshift deletion, Frameshift insertion, Splice site"),l.createElement("li",null,l.createElement("strong",{style:{color:f.g.inframeColor}},"Inframe Mutations"),void 0!==n.props.isPutativeDriver&&l.createElement("span",null,"(putative driver)"),": Inframe deletion, Inframe insertion"),void 0!==n.props.isPutativeDriver&&l.createElement("li",null,l.createElement("strong",{style:{color:f.g.inframeVusColor}},"Inframe Mutations"),void 0!==n.props.isPutativeDriver&&l.createElement("span",null,"(unknown significance)"),": Inframe deletion, Inframe insertion"),l.createElement("li",null,l.createElement("strong",{style:{color:f.g.spliceColor}},"Splice Mutations"),void 0!==n.props.isPutativeDriver&&l.createElement("span",null,"(putative driver)")),void 0!==n.props.isPutativeDriver&&l.createElement("li",null,l.createElement("strong",{style:{color:f.g.spliceVusColor}},"Splice Mutations"),void 0!==n.props.isPutativeDriver&&l.createElement("span",null,"(unknown significance)")),l.createElement("li",null,l.createElement("strong",{style:{color:f.g.fusionColor}},"Fusion Mutations")),l.createElement("li",null,l.createElement("strong",{style:{color:f.g.otherColor}},"Other Mutations"),": All other types of mutations"))))}),Object(u.makeObservable)(Kt(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qt(e,t)}(t,f["s"]),n=t,(r=[{key:"getTrackDataStatus",value:function(){var e,t=this.props.store.oncoKbData.status;"complete"===t&&c.a.isEmpty(this.props.store.oncoKbDataByProteinPosStart)&&(t="empty");var n=this.props.store.indexedHotspotData.status;"complete"===n&&c.a.isEmpty(this.props.store.hotspotsByPosition)&&(n="empty");var r=this.props.store.alignmentData.status;"complete"===r&&0===this.props.store.pdbChainDataStore.allData.length&&(r="empty");var o=this.props.store.ptmData.status,i=o,a=o;return"complete"===o&&(this.props.store.ptmData.result?(0===this.props.store.ptmData.result.filter(function(e){return e.source===Ht.h.dbPTM}).length&&(i="empty"),0===this.props.store.ptmData.result.filter(function(e){return e.source===Ht.h.Uniprot}).length&&(a="empty")):(i="empty",a="empty")),Wt(e={},f.C.OncoKB,t),Wt(e,f.C.CancerHotspots,n),Wt(e,f.C.dbPTM,i),Wt(e,f.C.UniprotPTM,a),Wt(e,f.C.PDB,r),e}},{key:"getWindowWrapper",value:function(){return kt.a}},{key:"getMutationRateSummary",value:function(){return null}},{key:"groupDataByProteinImpactType",value:function(e){var t=Object.values(S.J).map(function(e){return{group:e,filter:{type:f.h.PROTEIN_IMPACT_TYPE,values:[e]}}}),n=Object(f.db)(t,e,Object(E.h)(this.props.isPutativeDriver));return c.a.keyBy(n,function(e){return e.group})}},{key:"render",value:function(){return l.createElement("div",null,this.structureViewerPanel,l.createElement(h.a,{center:!0,size:"big",isLoading:this.isLoading}),!this.isLoading&&l.createElement("div",null,l.createElement("div",{style:{display:"flex"}},l.createElement("div",{className:"borderedChart",style:{marginRight:10}},this.mutationPlot,this.proteinChainPanel),l.createElement("div",{className:"mutationMapperMetaColumn"},this.geneSummary,this.mutationRateSummary,this.mutationFilterPanel,this.view3dButton)),l.createElement("hr",{style:{marginTop:20}}),this.mutationTable))}},{key:"open3dPanel",value:function(){this.trackVisibility[f.C.PDB]="visible"}},{key:"close3dPanel",value:function(){this.trackVisibility[f.C.PDB]="hidden"}},{key:"toggle3dPanel",value:function(){this.is3dPanelOpen?this.close3dPanel():this.open3dPanel()}},{key:"onTrackVisibilityChange",value:function(e){var t=this;"hidden"===this.trackVisibility[f.C.PDB]&&e.includes(f.C.PDB)?this.open3dPanel():"visible"!==this.trackVisibility[f.C.PDB]||e.includes(f.C.PDB)||this.close3dPanel(),Object.keys(this.trackVisibility).forEach(function(e){return t.trackVisibility[e]="hidden"}),e.forEach(function(e){return t.trackVisibility[e]="visible"})}},{key:"onProteinImpactTypeSelect",value:function(e,t){Object(f.nb)(e.map(function(e){return e.toLowerCase()}),t,this.store.dataStore,void 0===this.props.isPutativeDriver?f.h.PROTEIN_IMPACT_TYPE:E.a,void 0===this.props.isPutativeDriver?Et.b:E.b)}},{key:"is3dPanelOpen",get:function(){return"visible"===this.trackVisibility[f.C.PDB]}},{key:"multipleMutationInfo",get:function(){var e=this.props.store.dataStore.duplicateMutationCountInMultipleSamples,t=1===e?"mutation":"mutations";return e>0?": includes ".concat(e," duplicate ").concat(t," in patients with multiple samples"):""}},{key:"itemsLabelPlural",get:function(){return"Mutations".concat(this.multipleMutationInfo)}},{key:"proteinImpactTypeFilter",get:function(){return Object(Et.d)(this.store.dataStore.dataFilters)}},{key:"annotatedProteinImpactTypeFilter",get:function(){return this.store.dataStore.dataFilters.find(function(e){return e.type===E.a})}},{key:"mutationFilterPanel",get:function(){return l.createElement("div",null,this.props.isPutativeDriver?l.createElement("div",{style:{paddingBottom:this.props.compactStyle?5:15}},l.createElement(Ft,{filter:this.proteinImpactTypeFilter,counts:this.mutationCountsByProteinImpactType,onSelect:this.onProteinImpactTypeSelect,onClickSettingMenu:this.props.onClickSettingMenu,annotatedProteinImpactTypeFilter:this.annotatedProteinImpactTypeFilter})):l.createElement("div",{style:{paddingBottom:15,paddingTop:15}},l.createElement(f.A,{filter:this.proteinImpactTypeFilter,counts:this.mutationCountsByProteinImpactType,onSelect:this.onProteinImpactTypeSelect})))}},{key:"mutationsGroupedByProteinImpactType",get:function(){var e=this,t=this.store.dataStore.dataFilters.filter(function(e){return e.type!==f.h.PROTEIN_IMPACT_TYPE&&e.type!==E.a}),n=Object(f.F)(this.store.dataStore.allData,t,this.store.dataStore.applyFilter);return n=n.filter(function(t){return e.store.dataStore.applyLazyMobXTableFilter(t)}),this.groupDataByProteinImpactType(n)}},{key:"mutationCountsByProteinImpactType",get:function(){var e=this,t={};return Object.keys(this.mutationsGroupedByProteinImpactType).forEach(function(n){var r=e.mutationsGroupedByProteinImpactType[n];t[r.group]=r.data.length}),t}},{key:"structureViewerPanel",get:function(){return this.is3dPanelOpen?l.createElement(je,Ut({mutationDataStore:this.props.store.dataStore,pdbChainDataStore:this.props.store.pdbChainDataStore,pdbAlignmentIndex:this.props.store.indexedAlignmentData,pdbHeaderCache:this.props.pdbHeaderCache,residueMappingCache:this.props.store.residueMappingCache,uniprotId:this.props.store.uniprotId.result,onClose:this.close3dPanel},f.g)):null}},{key:"mutationPlot",get:function(){var e=this;return l.createElement(f.q,{store:this.props.store,pubMedCache:this.props.pubMedCache,mutationAlignerCache:this.mutationAlignerCache,onXAxisOffset:this.onXAxisOffset,geneWidth:this.geneWidth,tracks:this.tracks,trackVisibility:this.trackVisibility,trackDataStatus:this.trackDataStatus,onTrackVisibilityChange:this.onTrackVisibilityChange,getLollipopColor:function(t){return Object(f.U)(t,void 0,void 0,e.props.isPutativeDriver)},isPutativeDriver:this.props.isPutativeDriver,filterResetPanel:this.props.store.dataStore.showingAllData||null===this.filterResetPanel?void 0:this.filterResetPanel,legend:this.legendColorCodes})}},{key:"tracks",get:function(){var e=[];return this.props.enableHotspot&&e.push(f.C.CancerHotspots),this.props.enableOncoKb&&e.push(f.C.OncoKB),this.props.ptmSources?(this.props.ptmSources.includes(Ht.h.dbPTM)&&e.push(f.C.dbPTM),this.props.ptmSources.includes(Ht.h.Uniprot)&&e.push(f.C.UniprotPTM)):e.push(f.C.dbPTM),e.push(f.C.PDB),e}},{key:"proteinChainPanel",get:function(){return this.is3dPanelOpen?l.createElement(St,{store:this.props.store,pdbHeaderCache:this.props.pdbHeaderCache,geneWidth:this.geneWidth,geneXOffset:this.lollipopPlotGeneX,maxChainsHeight:200}):null}},{key:"view3dButton",get:function(){return l.createElement("button",{className:"btn btn-default btn-sm",disabled:0===this.props.store.pdbChainDataStore.allData.length,onClick:this.toggle3dPanel,"data-test":"view3DStructure"},"View 3D Structure")}},{key:"filterResetPanel",get:function(){var e=this.props.store.dataStore;return l.createElement(f.l,{resetFilters:function(){return e.resetFilters()},filterInfo:"Showing ".concat(e.tableData.length," of ").concat(e.allData.length," mutations."),className:d()("alert","alert-success",Pt.a.filterResetPanel),buttonClass:"btn btn-default btn-xs"})}},{key:"isMutationTableDataLoading",get:function(){return!1}},{key:"mutationTableComponent",get:function(){return null}}])&&qt(n.prototype,r),o&&qt(n,o),t}();Xt([u.computed],Zt.prototype,"is3dPanelOpen",null),Xt([u.computed],Zt.prototype,"multipleMutationInfo",null),Xt([u.computed],Zt.prototype,"itemsLabelPlural",null),Xt([u.computed],Zt.prototype,"proteinImpactTypeFilter",null),Xt([u.computed],Zt.prototype,"annotatedProteinImpactTypeFilter",null),Xt([u.computed],Zt.prototype,"mutationsGroupedByProteinImpactType",null),Xt([u.computed],Zt.prototype,"mutationCountsByProteinImpactType",null),Xt([u.computed],Zt.prototype,"tracks",null),Xt([u.action],Zt.prototype,"open3dPanel",null),Xt([u.action.bound],Zt.prototype,"close3dPanel",null),Xt([u.action.bound],Zt.prototype,"toggle3dPanel",null),Xt([u.action.bound],Zt.prototype,"onTrackVisibilityChange",null),Xt([u.action.bound],Zt.prototype,"onProteinImpactTypeSelect",null)},1161:function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(118),a=n(72),l=n(328),s=n(12),c=n(5),u=n.n(c),p=n(331),d=n.n(p),f=n(49),h=n(848),m=n(841),y=n(147),b=n(3),g=n(29),v=n(17),_=n(2);function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var P=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":C(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},T=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=S(t).call(this,e))||"object"!==C(o)&&"function"!=typeof o?E(r):o,Object.defineProperty(E(n),"hovered",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(E(n),"button",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(E(n),"hoverTimeout",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object(_.makeObservable)(E(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,r["Component"]),n=t,(o=[{key:"buttonRef",value:function(e){this.button=e}},{key:"onMouseClick",value:function(){this.hovered=!1}},{key:"onMouseEnter",value:function(){var e=this;this.hoverTimeout=setTimeout(function(){e.hovered=!0},b.P)}},{key:"onMouseLeave",value:function(){this.hovered=!1,clearTimeout(this.hoverTimeout),this.hoverTimeout=null}},{key:"onMouseDown",value:function(){this.hovered=!1}},{key:"render",value:function(){var e,t=this,n=this.props.group,o=this.props.isSelected(n.name),i=Object(f.x)([n]),a=Object(f.w)(i,this.props.sampleSet);return r.createElement("button",{ref:this.buttonRef,className:u()("btn btn-xs",(e={},w(e,d.a.buttonUnselected,!o),w(e,d.a.buttonExcludedFromAnalysis,this.props.excludedFromAnalysis),e)),onClick:this.onMouseClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseDown:this.onMouseDown,style:{backgroundColor:n.color},"data-test":"groupSelectorButton".concat(n.name)},r.createElement("span",{style:{display:"flex",alignItems:"center"}},r.createElement("div",{style:{display:"flex",alignItems:"center"},onClick:function(){return t.props.onClick(n.name)}},r.createElement("div",{className:"text-with-ellipsis",style:{display:"inline-block",color:Object(y.e)(n.color),maxWidth:200}},Object(y.h)(n))," ",r.createElement("span",{style:{color:Object(y.e)(n.color)}},"(",i.length===a.length?i.length:"".concat(i.length,"/").concat(a.length),")")),n.nonExistentSamples.length>0&&r.createElement(h.a,{style:{marginLeft:7},tooltip:r.createElement(f.f,{samples:n.nonExistentSamples})}),this.props.deletable&&r.createElement("div",{style:{paddingLeft:2,marginLeft:5,marginRight:-3,borderLeft:"1px dashed white",cursor:"pointer"},"data-test":"deleteButton",onClick:function(){return t.props.onClickDelete(n.name)}},r.createElement("i",{className:"fa fa-times-circle"}))),this.button&&g.createPortal(r.createElement(v.Overlay,{rootClose:!0,placement:"top",show:this.hovered,target:this.button},r.createElement(v.Popover,{arrowOffsetTop:17,className:u()("cbioportal-frontend","cbioTooltip")},r.createElement("div",null,Object(y.h)(n)," ",Object(f.k)(i,a),n.description&&" - ".concat(n.description)),this.props.excludedFromAnalysis&&r.createElement("div",{style:{maxWidth:300,whiteSpace:"initial",marginTop:5}},"This group is a subset of the other selected groups, so it's excluded from analysis, and not considered in overlap calculations."))),document.body))}}])&&O(n.prototype,o),i&&O(n,i),t}();P([_.observable],T.prototype,"hovered",void 0),P([_.observable.ref],T.prototype,"button",void 0),P([_.action.bound],T.prototype,"buttonRef",null),P([_.action.bound],T.prototype,"onMouseClick",null),P([_.action.bound],T.prototype,"onMouseEnter",null),P([_.action.bound],T.prototype,"onMouseLeave",null),P([_.action.bound],T.prototype,"onMouseDown",null),T=P([o.observer],T);var x=Object(m.SortableElement)(T);function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var N=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":D(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},R=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),A(this,I(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement("div",{className:d.a.groupButtons},r.createElement("div",null,this.props.buttons))}}])&&j(n.prototype,o),i&&j(n,i),t}();R=N([o.observer],R);var L=Object(m.SortableContainer)(R);function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var U=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":H(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},W=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),V(this,B(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement("div",{style:{display:"inline-flex",whiteSpace:"nowrap",paddingLeft:7,paddingRight:7}},r.createElement("a",{onClick:this.props.store.selectAllGroups},"Select all")," | ",r.createElement("a",{onClick:this.props.store.deselectAllGroups},"Deselect all"))}}])&&G(n.prototype,o),i&&G(n,i),t}();W=U([o.observer],W);var q=Object(m.SortableElement)(W),z=n(177);function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t){return!t||"object"!==Z(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var J=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Z(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},$=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Q(this,Y(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement("button",{className:u()("btn btn-xs btn-default"),onClick:this.props.toggleCollapsedGroups,"data-test":"groupSelectorCollapseButton"},this.props.collapsed?"".concat(this.props.numCollapsedGroups," more groups ").concat(String.fromCharCode(9660)):"Show less ".concat(String.fromCharCode(9650)))}}])&&K(n.prototype,o),i&&K(n,i),t}();$=J([o.observer],$);var ee=Object(m.SortableElement)($);function te(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ae(e){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var le=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ae(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},se=function(e){function t(e){var n,o,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,s=re(t).call(this,e),n=!s||"object"!==ae(s)&&"function"!=typeof s?oe(o):s,Object.defineProperty(oe(n),"collapsedGroupsShown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(oe(n),"dragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(oe(n),"tabUI",{enumerable:!0,configurable:!0,writable:!0,value:Object(i.a)({await:function(){return[n.props.store._originalGroups,n.props.store.sampleMap,n.props.store.overlapComputations]},render:function(){var e=n.props.store._originalGroups.result.length;if(0===e)return null;var t,o=[];if(void 0===n.props.groupCollapseThreshold||e<=n.props.groupCollapseThreshold||n.collapsedGroupsShown?o=n.props.store._originalGroups.result.map(n.makeGroupButton):(t=o).push.apply(t,te(n.props.store._originalGroups.result.slice(0,n.props.groupCollapseThreshold-1).map(n.makeGroupButton))),void 0!==n.props.groupCollapseThreshold&&e>n.props.groupCollapseThreshold){var i=e-n.props.groupCollapseThreshold+1;o.push(r.createElement(ee,{numCollapsedGroups:i,toggleCollapsedGroups:n.toggleCollapsedGroups,collapsed:!n.collapsedGroupsShown,disabled:!0,index:o.length}))}return o.push(r.createElement(q,{store:n.props.store,disabled:!0,index:o.length})),r.createElement("div",{style:{display:"flex",alignItems:"center",position:"relative"}},r.createElement("strong",{style:{marginRight:5}},"Groups: "),r.createElement("span",{style:{fontSize:12,marginRight:3}},"(drag to reorder)"),r.createElement(L,{buttons:o,axis:"xy",onSortStart:n.onSortStart,onSortEnd:n.onSortEnd,distance:6}))},renderPending:function(){return r.createElement(a.a,{isLoading:!0,size:"big",center:!0})},renderError:function(){return r.createElement(l.a,null)}})}),Object(_.makeObservable)(oe(n)),n}var n,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}(t,r["Component"]),n=t,(o=[{key:"toggleCollapsedGroups",value:function(){this.collapsedGroupsShown=!this.collapsedGroupsShown}},{key:"isSelected",value:function(e){return!!this.props.store.isGroupSelected(e)}},{key:"onClick",value:function(e){this.dragging||this.props.store.toggleGroupSelected(e)}},{key:"onClickDelete",value:function(e){this.dragging||this.props.store.deleteGroup(e)}},{key:"onSortEnd",value:function(e){e.oldIndex!==e.newIndex&&this.props.store.updateGroupOrder(e.oldIndex,e.newIndex),this.dragging=!1}},{key:"onSortStart",value:function(){this.dragging=!0}},{key:"makeGroupButton",value:function(e,t){var n=this.props.store.overlapStrategy===z.a.EXCLUDE&&e.uid in this.props.store.overlapComputations.result.excludedFromAnalysis;return r.createElement(x,{isSelected:this.isSelected,deletable:this.props.isGroupDeletable(e),onClick:this.onClick,onClickDelete:this.onClickDelete,sampleSet:this.props.store.sampleMap.result,group:e,index:t,excludedFromAnalysis:n})}},{key:"render",value:function(){return this.tabUI.component}}])&&ne(n.prototype,o),s&&ne(n,s),t}();le([_.observable],se.prototype,"collapsedGroupsShown",void 0),le([_.action.bound],se.prototype,"toggleCollapsedGroups",null),le([s.default],se.prototype,"isSelected",null),le([s.default],se.prototype,"onClick",null),le([s.default],se.prototype,"onClickDelete",null),le([s.default],se.prototype,"onSortEnd",null),le([s.default],se.prototype,"onSortStart",null),le([s.default],se.prototype,"makeGroupButton",null),se=le([o.observer],se);t.a=se},1162:function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(1),a=n.n(i),l=n(142),s=n.n(l),c=n(2),u=n(218),p=n(60),d=n.n(p),f=n(98),h=n(861),m=n(925),y=n(12),b=n(928),g=n(18),v=n(17),_=n(45),w=n(56),O=n(926),S=n(927),E=n(3);function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var A=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":j(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},I=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=P(t).call(this,e))||"object"!==j(o)&&"function"!=typeof o?T(r):o,Object.defineProperty(T(n),"tooltipModel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(T(n),"svgContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(T(n),"dragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object(c.makeObservable)(T(n)),n}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(t,r["Component"]),n=t,(i=[{key:"svgRef",value:function(e){this.svgContainer=e&&e.children?e.children[0]:null}},{key:"handleSelection",value:function(e,t,n){this.props.onSelection(e[0].data.map(function(e){return e.hugoGeneSymbol}))}},{key:"handleSelectionCleared",value:function(){this.tooltipModel&&this.props.onGeneNameClick(this.tooltipModel.datum.hugoGeneSymbol,this.tooltipModel.datum.entrezGeneId),this.props.onSelectionCleared()}},{key:"onMouseOver",value:function(e,t,n){this.tooltipModel={datum:e,x:t,y:n}}},{key:"onMouseOut",value:function(){this.tooltipModel=null}},{key:"getTooltip",value:function(){return this.tooltipModel?r.createElement(v.Popover,{className:"cbioTooltip",positionLeft:this.tooltipModel.x+15,positionTop:this.tooltipModel.y-44},"Gene: ",this.tooltipModel.datum.hugoGeneSymbol,r.createElement("br",null),"Log Ratio:"," ",Object(_.a)(this.tooltipModel.datum.logRatio),r.createElement("br",null),"Alteration Frequency in ",this.props.xGroupName,":"," ",this.tooltipModel.datum.x.toFixed(),"%",r.createElement("br",null),"Alteration Frequency in ",this.props.yGroupName,":"," ",this.tooltipModel.datum.y.toFixed(),"%",r.createElement("br",null),"p-Value:"," ",Object(w.b)(this.tooltipModel.datum.pValue,3,.01),r.createElement("br",null),"q-Value:"," ",Object(w.b)(this.tooltipModel.datum.qValue,3,.01)):r.createElement("span",null)}},{key:"onClick",value:function(){this.dragging||this.handleSelectionCleared(),this.dragging=!1}},{key:"onSelectionComponentRender",value:function(){this.dragging=!0}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:"posRelative"},r.createElement("div",{className:"borderedChart inlineBlock",style:{position:"relative"},onClick:this.onClick},r.createElement(g.VictoryChart,{containerComponent:this.containerComponent,theme:E.a,domainPadding:{x:[0,20],y:[0,20]},height:350,width:350,padding:{top:40,bottom:60,left:60,right:40}},r.createElement(g.VictoryAxis,k({domain:[0,this.plotDomainMax],label:this.xLabel,style:{tickLabels:{padding:5},axisLabel:{padding:27},ticks:{size:3},grid:{strokeOpacity:1}},crossAxis:!1,orientation:"bottom",offsetY:45},this.tickProps)),r.createElement(g.VictoryAxis,k({domain:[0,this.plotDomainMax],dependentAxis:!0,label:this.yLabel,style:{tickLabels:{padding:5},axisLabel:{padding:32},ticks:{size:3},grid:{strokeOpacity:1}},crossAxis:!1,orientation:"left",offsetX:45},this.tickProps)),r.createElement(g.VictoryLine,{style:{data:{stroke:"#cccccc",strokeWidth:1,strokeDasharray:"10,5"}},data:[{x:0,y:0},{x:this.plotDomainMax,y:this.plotDomainMax}]}),r.createElement(g.VictoryScatter,{style:{data:{fillOpacity:.4}},data:this.splitData.insignificant,dataComponent:r.createElement(S.a,{onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,fill:function(t){return t.hugoGeneSymbol in e.props.selectedGenesSet?"#FE9929":"#D3D3D3"}}),symbol:"circle",size:3}),r.createElement(g.VictoryScatter,{style:{data:{fillOpacity:.6}},data:this.splitData.significant,dataComponent:r.createElement(S.a,{onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,fill:function(t){return t.hugoGeneSymbol in e.props.selectedGenesSet?"#FE9929":"#58ACFA"}})})),r.createElement(E.j,{getSvg:function(){return e.svgContainer},filename:"enrichments-frequency-scatter",dontFade:!0,type:"button",style:{position:"absolute",top:10,right:10,zIndex:0}})),r.createElement(o.Observer,null,this.getTooltip))}},{key:"maxLabelWidth",get:function(){return Object(E.mb)(this.props.xGroupName,"Arial","13px")+Object(E.mb)(this.props.yGroupName,"Arial","13px")>150?75:90}},{key:"xLabel",get:function(){return"Altered Frequency in ".concat(Object(E.Gb)(this.props.xGroupName,this.maxLabelWidth,"Arial","13px")," (%)")}},{key:"yLabel",get:function(){return"Altered Frequency in ".concat(Object(E.Gb)(this.props.yGroupName,this.maxLabelWidth,"Arial","13px")," (%)")}},{key:"splitData",get:function(){var e=[],t=[],n=!0,r=!1,o=void 0;try{for(var i,a=this.props.data[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var l=i.value;l.qValue<.05?e.push(l):t.push(l)}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return{significant:e,insignificant:t}}},{key:"plotDomainMax",get:function(){var e=0,t=0,n=!0,r=!1,o=void 0;try{for(var i,a=this.props.data[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var l=i.value;e=Math.max(e,l.x),t=Math.max(t,l.y)}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return Math.max(e,t)}},{key:"containerComponent",get:function(){var e=this;return r.createElement(g.VictorySelectionContainer,{containerRef:this.svgRef,onSelection:function(t,n,r){return e.handleSelection(t,n,r)},responsive:!1,onSelectionCleared:this.handleSelectionCleared,activateSelectedData:!1,selectionComponent:r.createElement(O.a,{onRender:this.onSelectionComponentRender})})}},{key:"tickProps",get:function(){return this.plotDomainMax>40?{tickValues:[0,25,50,75]}:this.plotDomainMax>20?{tickValues:[0,10,20,30,40]}:this.plotDomainMax>10?{tickValues:[0,5,10,15,20]}:{tickCount:4}}}])&&C(n.prototype,i),a&&C(n,a),t}();A([c.observable],I.prototype,"tooltipModel",void 0),A([c.observable],I.prototype,"svgContainer",void 0),A([c.action.bound],I.prototype,"svgRef",null),A([c.computed],I.prototype,"maxLabelWidth",null),A([c.computed],I.prototype,"xLabel",null),A([c.computed],I.prototype,"yLabel",null),A([c.computed],I.prototype,"splitData",null),A([c.computed],I.prototype,"plotDomainMax",null),A([c.action.bound],I.prototype,"onMouseOver",null),A([c.action.bound],I.prototype,"onMouseOut",null),A([y.default],I.prototype,"getTooltip",null),A([y.default],I.prototype,"onClick",null),A([y.default],I.prototype,"onSelectionComponentRender",null),A([c.computed],I.prototype,"tickProps",null);var M=I=A([o.observer],I),D=n(1105),N=n.n(D),R=function(e){e.height;return r.createElement("div",{className:N.a.wrapper,style:{width:e.width}},r.createElement("div",{className:N.a.groupRow},r.createElement("div",{style:{width:"".concat(e.group1Width,"%"),background:e.group1Color}}),r.createElement("div",{style:{width:"".concat(e.group2Width,"%"),background:e.group2Color}})),r.createElement("div",{className:N.a.alterationRow},r.createElement("div",{style:{width:"".concat(e.group1Unprofiled,"%"),background:"white",position:"relative"}},r.createElement("div",{className:N.a.strike})),r.createElement("div",{style:{width:"".concat(e.group1Unaltered,"%"),background:"transparent"}}),r.createElement("div",{style:{width:"".concat(e.group1Altered,"%"),background:"#3786C2"}}),r.createElement("div",{style:{width:"".concat(e.group2Altered,"%"),background:"#3786C2"}}),r.createElement("div",{style:{width:"".concat(e.group2Unprofiled,"%"),background:"white",position:"absolute",right:0}},r.createElement("div",{className:N.a.strike}))))},L=n(340),G=n(120),V=n(835),B=n(1106),F=n.n(B);function H(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e,t,n){return t&&U(e.prototype,t),n&&U(e,n),e}function q(e,t){return!t||"object"!==X(t)&&"function"!=typeof t?K(e):t}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Z=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":X(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},J=["AMP","HOMDEL"],$=function(e){function t(e){var n;return H(this,t),n=q(this,z(t).call(this,e)),Object.defineProperty(K(n),"tooltipModel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(K(n),"_geneQuery",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(K(n),"selectedGenes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(K(n),"_label",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(K(n),"isGeneSelectionPopupVisible",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(K(n),"svgContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object(c.makeObservable)(K(n)),n}return Q(t,r["Component"]),W(t,[{key:"getTooltip",value:function(e){var t=e.majorCategory;t=t.replace(/\*$/,"");var n=this.geneDataSet[t],o=a.a.map(this.props.groupOrder,function(t){var o=n.groupsSet[t],i={};return e.minorCategory===o.name&&(i={fontWeight:"bold"}),r.createElement("tr",{style:i},r.createElement("td",null,o.name),r.createElement("td",null,o.alteredPercentage.toFixed(2),"% (",o.alteredCount,"/",o.profiledCount,")"))});return r.createElement("div",null,r.createElement("strong",null,t," ",this.props.yAxisLabel),r.createElement("br",null),r.createElement("table",{className:"table table-bordered"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{scope:"col"},"Group"),r.createElement("th",{scope:"col"},"Percentage Altered"))),r.createElement("tbody",null,o)),r.createElement("strong",null,"p-Value"),":"," ",n.pValue?Object(w.b)(n.pValue,3,.01):"-",r.createElement("br",null),r.createElement("strong",null,"q-Value"),":"," ",n.qValue?Object(w.b)(n.qValue,3,.01):"-")}},{key:"render",value:function(){var e=this;return r.createElement("div",{"data-test":"GeneBarPlotDiv",className:"borderedChart",style:{position:"relative",display:"inline-block"}},this.toolbar,r.createElement("div",{style:{overflow:"auto hidden",position:"relative"}},r.createElement(L.a,{barWidth:10,domainPadding:10,chartBase:300,legendLocationWidthThreshold:800,ticksCount:6,horizontalBars:!1,percentage:!1,stacked:!1,plotData:this.barPlotData,axisStyle:{tickLabels:{fontSize:10}},horzCategoryOrder:this.horzCategoryOrder,vertCategoryOrder:this.props.groupOrder,countAxisLabel:"".concat(this.props.yAxisLabel," (%)"),tooltip:this.getTooltip,categoryToColor:this.props.categoryToColor,svgRef:function(t){return e.svgContainer=t}})))}},{key:"geneListOptions",get:function(){return Object(f.q)(this.props.data,this.props.showCNAInTable)}},{key:"defaultOption",get:function(){return this.geneListOptions.length>1?this.geneListOptions[1]:this.geneListOptions[0]}},{key:"geneDataSet",get:function(){var e=this;return a.a.keyBy(this.props.data,function(t){return e.props.showCNAInTable?t.hugoGeneSymbol+": ".concat(f.d[t.value]):t.hugoGeneSymbol})}},{key:"barPlotData",get:function(){return Object(f.l)(this.geneDataSet,this.barPlotOrderedGenes)}},{key:"barPlotOrderedGenes",get:function(){return this._label===f.f.SYNC_WITH_TABLE?this.tableSelectedGenes:this.selectedGenes?this.props.showCNAInTable?a.a.flatMap(this.selectedGenes,function(e){if(!1===e.alterations)return[e.gene+": AMP",e.gene+": HOMDEL"];var t=[];return a.a.each(e.alterations,function(n){"cna"===n.alteration_type&&"="===n.constr_rel&&J.includes(n.constr_val)&&t.push(e.gene+": "+n.constr_val)}),t}):this.selectedGenes.map(function(e){return e.gene}):this.defaultOption.genes.slice(0,10)}},{key:"horzCategoryOrder",get:function(){return a.a.flatMap(this.barPlotOrderedGenes,function(e){return[e+"*",e]})}},{key:"selectedOption",get:function(){return this._label&&void 0!==this._geneQuery?{label:this._label,value:this._geneQuery}:{label:this.defaultOption.label,value:this.defaultOption.genes.slice(0,10).join("\n")}}},{key:"toolbar",get:function(){var e=this;return r.createElement(r.Fragment,null,r.createElement("div",{style:{zIndex:10,position:"absolute",top:"10px",left:"15px"}},r.createElement("strong",null,this.selectedOption.label)),r.createElement("div",{style:{zIndex:10,position:"absolute",top:"10px",right:"10px"}},r.createElement("div",{className:F.a.ChartControls},r.createElement(E.i,{trigger:["click"],destroyTooltipOnHide:!1,visible:this.isGeneSelectionPopupVisible,onVisibleChange:function(t){e.isGeneSelectionPopupVisible=t},overlay:r.createElement(te,{options:this.geneListOptions,selectedOption:this.selectedOption,onSelectedGenesChange:function(t,n,r){e._geneQuery=t,e.selectedGenes=n,e._label=r,e.isGeneSelectionPopupVisible=!1},defaultNumberOfGenes:10}),placement:"bottomLeft"},r.createElement("div",null,r.createElement("button",{"data-test":"selectGenes",className:"btn btn-default btn-xs"},"Select genes"))),r.createElement(E.j,{getSvg:function(){return e.svgContainer},filename:"GroupComparisonGeneFrequencyPlot",dontFade:!0,type:"button"}))))}},{key:"tableSelectedGenes",get:function(){return null!==this.props.dataStore.visibleData?this.props.dataStore.visibleData.map(function(e){return e.hugoGeneSymbol}).slice(0,100):[]}}]),t}();Z([c.observable],$.prototype,"tooltipModel",void 0),Z([c.observable.ref],$.prototype,"_geneQuery",void 0),Z([c.observable],$.prototype,"selectedGenes",void 0),Z([c.observable],$.prototype,"_label",void 0),Z([c.observable],$.prototype,"isGeneSelectionPopupVisible",void 0),Z([c.observable],$.prototype,"svgContainer",void 0),Z([c.computed],$.prototype,"geneListOptions",null),Z([c.computed],$.prototype,"defaultOption",null),Z([c.computed],$.prototype,"geneDataSet",null),Z([c.computed],$.prototype,"barPlotData",null),Z([c.computed],$.prototype,"barPlotOrderedGenes",null),Z([c.computed],$.prototype,"horzCategoryOrder",null),Z([y.default],$.prototype,"getTooltip",null),Z([c.computed],$.prototype,"selectedOption",null),Z([c.computed],$.prototype,"toolbar",null),Z([c.computed],$.prototype,"tableSelectedGenes",null);var ee=$=Z([o.observer],$),te=function(e){function t(e){var n;return H(this,t),n=q(this,z(t).call(this,e)),Object.defineProperty(K(n),"_geneQuery",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(K(n),"selectedGenesHasError",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(K(n),"numberOfGenes",{enumerable:!0,configurable:!0,writable:!0,value:n.props.defaultNumberOfGenes}),Object.defineProperty(K(n),"_selectedGeneListOption",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(K(n),"genesToPlot",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object(c.makeObservable)(K(n)),window.genesSelection=K(n),n}return Q(t,r["Component"]),W(t,[{key:"onChangeGeneInput",value:function(e,t,n){var r=a.a.keyBy(t.found,function(e){return e.hugoGeneSymbol.toUpperCase()}),o=a.a.map(e.query,function(e){return e.gene.toUpperCase()});a.a.isEmpty(r)&&a.a.isEmpty(t.suggestions)||(this.selectedGenesHasError=!a.a.every(o,function(e){return e in r})),this.selectedGenesHasError||(this.genesToPlot=e.query),this.geneQuery!==n&&(this._selectedGeneListOption={label:f.f.USER_DEFINED_OPTION,genes:[],value:""}),this._geneQuery=n}},{key:"onGeneListOptionChange",value:function(e){if(this._selectedGeneListOption=e,""!==e.value){var t=this.geneOptionSet[e.label].genes;this._geneQuery=t.slice(0,this.numberOfGenes).join("\n")}else this._geneQuery=""}},{key:"handleTotalInputChange",value:function(e){var t=e.target.value.replace(/[^0-9]/g,"");t<=this.props.maxNumberOfGenes&&(this.numberOfGenes=t)}},{key:"handleTotalInputKeyPress",value:function(e){if(13===e.charCode){if(isNaN(this.numberOfGenes))return void(this.numberOfGenes=0);this.updateGeneQuery()}}},{key:"onBlur",value:function(){isNaN(this.numberOfGenes)?this.numberOfGenes=0:this.updateGeneQuery()}},{key:"updateGeneQuery",value:function(){if(this.numberOfGenes=Number(this.numberOfGenes),this.selectedGeneListOption){var e=this.selectedGeneListOption.label,t=this.geneOptionSet[e].genes;t.length>0&&(this._geneQuery=t.slice(0,this.numberOfGenes).join("\n"))}}},{key:"render",value:function(){var e=this;return r.createElement("div",{style:{width:300}},this.props.options.length>0&&r.createElement("div",{"data-test":"genesSelector"},r.createElement(G.default,{value:this.selectedGeneListOption,options:this.geneListOptions,onChange:this.onGeneListOptionChange,isClearable:!1,isSearchable:!1})),!this.inSyncMode&&!this.isCustomGeneSelection&&r.createElement("div",null,r.createElement("br",null),r.createElement("div",{style:{display:"table-row"}},r.createElement("label",{style:{display:"table-cell",whiteSpace:"nowrap"}},"Number of Genes (max."," ",this.props.maxNumberOfGenes,"):  "),r.createElement(v.FormControl,{"data-test":"numberOfGenes",type:"text",value:this.numberOfGenes,onChange:this.handleTotalInputChange,onKeyPress:this.handleTotalInputKeyPress,onBlur:this.onBlur}))),r.createElement("div",null,r.createElement("br",null),!this.inSyncMode&&r.createElement("div",null,r.createElement(V.b,{inputGeneQuery:this.geneQuery,validateInputGeneQuery:!1,callback:this.onChangeGeneInput,location:V.a.ONCOPRINT_HEATMAP}),this.hasUnsupportedOQL&&r.createElement("strong",{style:{display:"block"}},r.createElement("span",{style:{color:"#a71111"}},"OQL is not allowed")),r.createElement("br",null)),r.createElement("button",{key:"addGenestoBarPlot","data-test":"addGenestoBarPlot",className:"btn btn-sm btn-primary",onClick:function(){e.props.onSelectedGenesChange(e._geneQuery,e.genesToPlot,e.selectedGeneListOption.label)},disabled:this.addGenesButtonDisabled},"Submit")))}},{key:"geneListOptions",get:function(){return a.a.map(this.props.options,function(e){return{label:e.label,value:e.genes.join("\n")}})}},{key:"geneOptionSet",get:function(){return a.a.keyBy(this.props.options,function(e){return e.label})}},{key:"selectedGeneListOption",get:function(){if(void 0===this._selectedGeneListOption&&this.props.selectedOption){var e=this.props.selectedOption;return this.geneListOptions.find(function(t){return t.value.startsWith(e.value)})}return this._selectedGeneListOption}},{key:"isCustomGeneSelection",get:function(){return void 0===this.selectedGeneListOption||this.selectedGeneListOption.label===f.f.USER_DEFINED_OPTION}},{key:"geneQuery",get:function(){return void 0===this._geneQuery&&this.props.selectedOption?this.props.selectedOption.value:this._geneQuery||""}},{key:"hasUnsupportedOQL",get:function(){return void 0!==a.a.find(this.genesToPlot,function(e){return!!(e.alterations&&e.alterations.length>0)&&void 0!==a.a.find(e.alterations,function(e){return"cna"===e.alteration_type&&("="!==e.constr_rel||!J.includes(e.constr_val))})})}},{key:"addGenesButtonDisabled",get:function(){return this.inSyncMode?void 0!==this.props.selectedOption&&this.props.selectedOption.label===f.f.SYNC_WITH_TABLE:this.hasUnsupportedOQL||this.props.selectedOption&&this.props.selectedOption.value===this._geneQuery||this.selectedGenesHasError||a.a.isEmpty(this._geneQuery)}},{key:"inSyncMode",get:function(){return this._selectedGeneListOption&&this._selectedGeneListOption.label===f.f.SYNC_WITH_TABLE}}]),t}();Object.defineProperty(te,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{maxNumberOfGenes:100}}),Z([c.observable.ref],te.prototype,"_geneQuery",void 0),Z([c.observable],te.prototype,"selectedGenesHasError",void 0),Z([c.observable],te.prototype,"numberOfGenes",void 0),Z([c.observable],te.prototype,"_selectedGeneListOption",void 0),Z([c.observable.ref],te.prototype,"genesToPlot",void 0),Z([c.computed],te.prototype,"geneListOptions",null),Z([c.computed],te.prototype,"geneOptionSet",null),Z([c.computed],te.prototype,"selectedGeneListOption",null),Z([c.computed],te.prototype,"isCustomGeneSelection",null),Z([c.computed],te.prototype,"geneQuery",null),Z([c.action.bound],te.prototype,"onChangeGeneInput",null),Z([c.computed],te.prototype,"hasUnsupportedOQL",null),Z([c.computed],te.prototype,"addGenesButtonDisabled",null),Z([c.action.bound],te.prototype,"onGeneListOptionChange",null),Z([c.computed],te.prototype,"inSyncMode",null),Z([c.action.bound],te.prototype,"handleTotalInputChange",null),Z([c.action.bound],te.prototype,"handleTotalInputKeyPress",null),Z([c.action.bound],te.prototype,"onBlur",null),Z([c.action.bound],te.prototype,"updateGeneQuery",null),te=Z([o.observer],te);var ne=n(220),re=n(7);function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function le(e,t){return(le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function se(e){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ce=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":se(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ue=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=ie(t).call(this,e),n=!o||"object"!==se(o)&&"function"!=typeof o?ae(r):o,Object.defineProperty(ae(n),"significanceFilter",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(ae(n),"checkedGenes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(ae(n),"selectedGenes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(ae(n),"highlightedRow",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(ae(n),"_enrichedGroups",{enumerable:!0,configurable:!0,writable:!0,value:n.props.groups.map(function(e){return e.name})}),Object.defineProperty(ae(n),"dataStore",{enumerable:!0,configurable:!0,writable:!0,value:new b.a(function(){return n.filteredData},function(){return n.highlightedRow},function(e){n.highlightedRow=e})}),Object(c.makeObservable)(ae(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}(t,r["Component"]),n=t,(o=[{key:"filterByGene",value:function(e){return!this.selectedGenes||this.selectedGenes.includes(e)}},{key:"toggleSignificanceFilter",value:function(){this.significanceFilter=!this.significanceFilter}},{key:"onCheckGene",value:function(e){var t=this.checkedGenes.indexOf(e);-1!==t?this.checkedGenes.splice(t,1):this.checkedGenes.push(e)}},{key:"onGeneNameClick",value:function(e){}},{key:"onSelection",value:function(e){this.selectedGenes=e}},{key:"onSelectionCleared",value:function(){this.selectedGenes=null}},{key:"onChange",value:function(e){this._enrichedGroups=i.map(e,function(e){return e.value})}},{key:"render",value:function(){var e=this;if(0===this.props.data.length)return r.createElement("div",{className:"alert alert-info",style:{marginLeft:this.props.containerType===f.a.ALTERATIONS&&this.props.dashToRight?244:0}},"No data/result available");var t=!re.b.serverConfig.skin_show_settings_menu;return r.createElement("div",{className:d.a.Container,"data-test":"GroupComparisonAlterationEnrichments"},r.createElement("div",{className:d.a.ChartsPanel,style:{maxWidth:ne.a.size.width-60,position:this.props.containerType===f.a.ALTERATIONS?"relative":"static",zIndex:this.props.containerType===f.a.ALTERATIONS?1:"auto"}},t&&r.createElement("div",{className:d.a.inlineAlterationTypeSelectorMenuDash}),this.isTwoGroupAnalysis&&r.createElement(h.a,{data:Object(f.j)(this.data,this.props.store?this.props.store.hugoGeneSymbols:[]),xAxisLeftLabel:this.group2.nameOfEnrichmentDirection||this.group2.name,xAxisRightLabel:this.group1.nameOfEnrichmentDirection||this.group1.name,xAxisDomain:15,xAxisTickValues:[-10,0,10],selectedSet:this.selectedGenesSet,onGeneNameClick:this.onGeneNameClick,onSelection:this.onSelection,onSelectionCleared:this.onSelectionCleared}),this.isTwoGroupAnalysis&&r.createElement(M,{data:Object(f.h)(this.data,this.props.store?this.props.store.hugoGeneSymbols:[],this.group1.name,this.group2.name),xGroupName:this.group1.name,yGroupName:this.group2.name,onGeneNameClick:this.onGeneNameClick,selectedGenesSet:this.selectedGenesSet,onSelection:this.onSelection,onSelectionCleared:this.onSelectionCleared}),r.createElement("div",{style:{maxWidth:this.genePlotMaxWidth}},r.createElement(ee,{data:this.data,isTwoGroupAnalysis:this.isTwoGroupAnalysis,groupOrder:this.props.groups.map(function(e){return e.name}),yAxisLabel:this.geneBarplotYAxislabel,showCNAInTable:this.props.showCNAInTable,categoryToColor:this.categoryToColor,dataStore:this.dataStore}))),r.createElement("div",null,r.createElement("div",null,r.createElement("h3",null,this.props.headerName),this.props.store&&r.createElement(m.a,{checkedGenes:this.checkedGenes})),r.createElement("div",{className:d.a.Checkboxes},r.createElement("div",{style:{width:250,marginRight:7}},r.createElement(G.default,{name:"select enrichments level: sample or patient",onChange:function(t){t&&e.props.onSetPatientLevelEnrichments(t.value)},options:[{label:"Patient-level enrichments",value:!0},{label:"Sample-level enrichments",value:!1}],clearable:!1,searchable:!1,value:{label:this.props.patientLevelEnrichments?"Patient-level enrichments":"Sample-level enrichments",value:this.props.patientLevelEnrichments},styles:{control:function(e){return Object.assign(Object.assign({},e),{height:36,minHeight:36,border:"1px solid rgb(204,204,204)"})},menu:function(e){return Object.assign(Object.assign({},e),{maxHeight:400})},menuList:function(e){return Object.assign(Object.assign({},e),{maxHeight:400})},placeholder:function(e){return Object.assign(Object.assign({},e),{color:"#000000"})},dropdownIndicator:function(e){return Object.assign(Object.assign({},e),{color:"#000000"})},option:function(e,t){return Object.assign(Object.assign({},e),{cursor:"pointer"})}},theme:function(e){return Object.assign(Object.assign({},e),{colors:Object.assign(Object.assign({},e.colors),{neutral80:"black"})})}})),r.createElement("div",{style:{width:250,marginRight:7}},r.createElement(E.g,{name:"groupsSelector",placeholder:"Enriched in ...",onChange:this.onChange,options:this.options,value:this.selectedValues,height:36})),r.createElement("label",{className:"checkbox-inline"},r.createElement("input",{type:"checkbox",checked:this.significanceFilter,onClick:this.toggleSignificanceFilter,"data-test":"SwapAxes"}),"Significant only")),r.createElement(u.b,{key:this.props.patientLevelEnrichments.toString(),data:this.filteredData,onCheckGene:this.props.store?this.onCheckGene:void 0,checkedGenes:this.props.store?this.checkedGenes:void 0,dataStore:this.dataStore,visibleOrderedColumnNames:this.visibleOrderedColumnNames,customColumns:i.keyBy(this.customColumns,function(e){return e.name})})))}},{key:"isTwoGroupAnalysis",get:function(){return 2==this.props.groups.length}},{key:"group1",get:function(){return this.props.groups[0]}},{key:"group2",get:function(){return this.props.groups[1]}},{key:"group1QueriedCasesCount",get:function(){var e=this;return new Set(this.group1.samples.map(function(t){return e.props.patientLevelEnrichments?t.uniquePatientKey:t.uniqueSampleKey})).size}},{key:"group2QueriedCasesCount",get:function(){var e=this;return new Set(this.group2.samples.map(function(t){return e.props.patientLevelEnrichments?t.uniquePatientKey:t.uniqueSampleKey})).size}},{key:"data",get:function(){return Object(f.i)(this.props.data,this.props.store?this.props.store.hugoGeneSymbols:[],this.props.groups)}},{key:"filteredData",get:function(){return Object(f.p)(this.data,this._enrichedGroups,this.significanceFilter,this.filterByGene)}},{key:"customColumns",get:function(){var e=this,t=Object(f.g)(this.props.groups,this.props.alteredVsUnalteredMode);return this.isTwoGroupAnalysis&&t.push({name:"Alteration Overlap",headerRender:function(){return r.createElement("span",null,"Co-occurrence Pattern")},render:function(t){if(void 0===t.pValue)return r.createElement("span",null,"-");var n=i.map(t.groupsSet),o=n.find(function(t){return t.name===e.props.groups[0].name}),a=n.find(function(t){return t.name===e.props.groups[1].name});if(!o||!a)throw"No matching groups in Alteration Overlap Cell";var l=e.group1QueriedCasesCount+e.group2QueriedCasesCount,c=e.group1QueriedCasesCount/l*100,u=100-c,p=(e.group1QueriedCasesCount-o.profiledCount)/l*100,d=(o.profiledCount-o.alteredCount)/l*100,f=(e.group2QueriedCasesCount-a.profiledCount)/l*100,h=o.alteredCount/l*100,m=a.alteredCount/l*100;return r.createElement(E.i,{destroyTooltipOnHide:!0,trigger:["hover"],overlay:function(){return r.createElement("div",null,r.createElement("h3",null,t.hugoGeneSymbol," ","alterations"," ","in:"),r.createElement("table",{className:"table table-striped"},r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",null,r.createElement("strong",null,o.name,": ")),r.createElement("td",null,o.alteredCount," of"," ",o.profiledCount," of profiled"," ",e.props.patientLevelEnrichments?"patients":"samples"," ","(",s()(o.alteredPercentage).format("0.0"),"%)")),r.createElement("tr",null,r.createElement("td",null,r.createElement("strong",null,a.name,": ")),r.createElement("td",null,a.alteredCount," of"," ",a.profiledCount," of profiled"," ",e.props.patientLevelEnrichments?"patients":"samples"," ","(",s()(a.alteredPercentage).format("0.0"),"%)")))))}},r.createElement("div",{className:"inlineBlock",style:{padding:"3px 0"}},r.createElement(R,{group1Width:c,group2Width:u,group1Unaltered:d,group1Altered:h,group2Altered:m,group1Unprofiled:p,group2Unprofiled:f,group1Color:e.props.groups[0].color,group2Color:e.props.groups[1].color,width:150})))},tooltip:r.createElement("table",null,r.createElement("tr",null,r.createElement("td",null,"Upper row"),r.createElement("td",null,":"," ",this.props.patientLevelEnrichments?"Patients":"Samples"," ","colored according to group.")),r.createElement("tr",null,r.createElement("td",null,"Lower row"),r.createElement("td",null,":"," ",this.props.patientLevelEnrichments?"Patients":"Samples"," ","with an alteration in the listed gene are highlighted.")))}),t}},{key:"visibleOrderedColumnNames",get:function(){var e=[];return e.push(u.a.GENE,u.a.CYTOBAND),this.props.showCNAInTable&&e.push(u.a.ALTERATION),this.props.groups.forEach(function(t){e.push(t.name)}),this.isTwoGroupAnalysis&&(e.push("Alteration Overlap"),e.push(u.a.LOG_RATIO)),e.push(u.a.P_VALUE,u.a.Q_VALUE),this.isTwoGroupAnalysis?e.push(this.props.alteredVsUnalteredMode?u.a.TENDENCY:u.a.ENRICHED):e.push(u.a.MOST_ENRICHED),e}},{key:"selectedGenesSet",get:function(){return i.keyBy(this.selectedGenes||[])}},{key:"selectedValues",get:function(){return this._enrichedGroups.map(function(e){return{value:e}})}},{key:"options",get:function(){return i.map(this.props.groups,function(e){return{label:e.nameOfEnrichmentDirection?e.nameOfEnrichmentDirection:e.name,value:e.name}})}},{key:"genePlotMaxWidth",get:function(){return ne.a.size.width-(this.isTwoGroupAnalysis?820:40)}},{key:"categoryToColor",get:function(){return i.reduce(this.props.groups,function(e,t){return t.color&&(e[t.name]=t.color),e},{})}},{key:"geneBarplotYAxislabel",get:function(){return!this.isAnyMutationTypeSelected||this.isAnyFusionTypeSelected||this.isAnyCnaTypeSelected?!this.isAnyMutationTypeSelected&&this.isAnyFusionTypeSelected&&this.isAnyCnaTypeSelected?"Fusion event frequency":this.isAnyMutationTypeSelected||this.isAnyFusionTypeSelected||this.isAnyCnaTypeSelected?"Alteration event frequency":"Copy-number alteration frequency":"Mutation frequency"}},{key:"isAnyMutationTypeSelected",get:function(){if(!this.props.comparisonStore||!this.props.comparisonStore.selectedMutationEnrichmentEventTypes)return!1;var e=this.props.comparisonStore.selectedMutationEnrichmentEventTypes;return i.some(i.keys(e),function(t){return e[t]})}},{key:"isAnyFusionTypeSelected",get:function(){return this.props.comparisonStore&&this.props.comparisonStore.isStructuralVariantEnrichmentSelected}},{key:"isAnyCnaTypeSelected",get:function(){if(!this.props.comparisonStore||!this.props.comparisonStore.selectedCopyNumberEnrichmentEventTypes)return!1;var e=this.props.comparisonStore.selectedCopyNumberEnrichmentEventTypes;return i.some(i.keys(e),function(t){return e[t]})}}])&&oe(n.prototype,o),a&&oe(n,a),t}();Object.defineProperty(ue,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{showCNAInTable:!1,alteredVsUnalteredMode:!0}}),ce([c.observable],ue.prototype,"significanceFilter",void 0),ce([c.observable.shallow],ue.prototype,"checkedGenes",void 0),ce([c.observable.shallow],ue.prototype,"selectedGenes",void 0),ce([c.observable.ref],ue.prototype,"highlightedRow",void 0),ce([c.observable.ref],ue.prototype,"_enrichedGroups",void 0),ce([c.computed],ue.prototype,"isTwoGroupAnalysis",null),ce([c.computed],ue.prototype,"group1",null),ce([c.computed],ue.prototype,"group2",null),ce([c.computed],ue.prototype,"group1QueriedCasesCount",null),ce([c.computed],ue.prototype,"group2QueriedCasesCount",null),ce([c.computed],ue.prototype,"data",null),ce([c.computed],ue.prototype,"filteredData",null),ce([y.default],ue.prototype,"filterByGene",null),ce([y.default],ue.prototype,"toggleSignificanceFilter",null),ce([y.default],ue.prototype,"onCheckGene",null),ce([y.default],ue.prototype,"onGeneNameClick",null),ce([c.action.bound],ue.prototype,"onSelection",null),ce([c.action.bound],ue.prototype,"onSelectionCleared",null),ce([c.computed],ue.prototype,"customColumns",null),ce([c.computed],ue.prototype,"visibleOrderedColumnNames",null),ce([c.computed],ue.prototype,"selectedGenesSet",null),ce([c.action.bound],ue.prototype,"onChange",null),ce([c.computed],ue.prototype,"selectedValues",null),ce([c.computed],ue.prototype,"options",null),ce([c.computed],ue.prototype,"genePlotMaxWidth",null),ce([c.computed],ue.prototype,"categoryToColor",null),ce([c.computed],ue.prototype,"geneBarplotYAxislabel",null),ce([c.computed],ue.prototype,"isAnyMutationTypeSelected",null),ce([c.computed],ue.prototype,"isAnyFusionTypeSelected",null),ce([c.computed],ue.prototype,"isAnyCnaTypeSelected",null);var pe=ue=ce([o.observer],ue),de=n(118),fe=n(72),he=n(328),me=n(49),ye=n(44);function be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ge(e){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _e(e,t){return(_e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Oe=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":we(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Se=function(e){function t(e){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,i=ge(t).call(this,e),n=!i||"object"!==we(i)&&"function"!=typeof i?ve(o):i,Object.defineProperty(ve(n),"tabUI",{enumerable:!0,configurable:!0,writable:!0,value:Object(me.e)(function(){return n.props.store},function(){return n.enrichmentsUI},"alterations",!0,!0,!0)}),Object.defineProperty(ve(n),"useInlineTypeSelectorMenu",{enumerable:!0,configurable:!0,writable:!0,value:!re.b.serverConfig.skin_show_settings_menu}),Object.defineProperty(ve(n),"enrichmentsUI",{enumerable:!0,configurable:!0,writable:!0,value:Object(de.a)({await:function(){return[n.props.store.alterationsEnrichmentData,n.props.store.alterationsEnrichmentAnalysisGroups,n.props.store.selectedStudyMutationEnrichmentProfileMap,n.props.store.selectedStudyCopyNumberEnrichmentProfileMap,n.props.store.selectedStudyStructuralVariantEnrichmentProfileMap,n.props.store.studies]},render:function(){var e=ye.a;return r.createElement("div",{"data-test":"GroupComparisonAlterationEnrichments"},r.createElement(pe,{data:n.props.store.alterationsEnrichmentData.result,groups:n.props.store.alterationsEnrichmentAnalysisGroups.result,alteredVsUnalteredMode:!1,headerName:e,patientLevelEnrichments:n.props.store.usePatientLevelEnrichments,onSetPatientLevelEnrichments:n.props.store.setUsePatientLevelEnrichments,store:n.props.resultsViewStore,comparisonStore:n.props.store,dashToRight:n.useInlineTypeSelectorMenu}))},renderPending:function(){return r.createElement(fe.a,{center:!0,isLoading:!0,size:"big"})},renderError:function(){return r.createElement(he.a,null)}})}),Object(c.makeObservable)(ve(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_e(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return this.tabUI.component}}])&&be(n.prototype,o),i&&be(n,i),t}();Se=Oe([o.observer],Se);t.a=Se},1163:function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(17),a=n(871);function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":p(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,c(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=this;return r.createElement(i.Modal,{show:this.props.show,onHide:this.props.onHide,animation:!1},r.createElement(i.Modal.Header,{closeButton:!0},r.createElement(i.Modal.Title,null,"Open new tab to MD Anderson NG-CHM?")),r.createElement(i.Modal.Body,null,r.createElement("div",{className:"oncoprint__controls__heatmap_menu mdacc-modal"},r.createElement("p",null,"Continue will open a tab or window to a different site (not cBioPortal)."),r.createElement("p",null,"You will be able to view this study as Next Generation Clustered Heatmaps (NG-CHM) developed by The University of Texas MD Anderson Cancer Center."),r.createElement("em",null,"Note: NG-CHM will not be limited to your selected samples and genes."))),r.createElement(i.Modal.Footer,null,r.createElement(i.Button,{onClick:function(){e.props.openNgchmWindow(),e.props.onHide()}},"Continue"),r.createElement(i.Button,{onClick:this.props.onHide},"Cancel")))}}])&&l(n.prototype,o),a&&l(n,a),t}(),h=f=d([o.observer],f),m=n(175),y=n(2),b=n(1),g=n.n(b),v=n(72),_=n(3),w=n(332),O=n.n(w),S=(n(836),n(1045),n(5)),E=n.n(S),k=n(32),C=n(835),P=n(12),T=n(804);function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return!t||"object"!==M(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var D=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":M(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},N=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),j(this,A(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return void 0===this.props.count?null:r.createElement("span",{className:"oncoprintDropdownCount"},this.props.count)}}])&&x(n.prototype,o),i&&x(n,i),t}(),R=N=D([o.observer],N),L=n(46),G=n(8),V=n(907),B=n(872),F=n(118),H=n(855);function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Q,Y=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":K(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};!function(e){e.CLINICAL="Clinical",e.GROUPS="Groups",e.CUSTOM_CHARTS="Custom Charts"}(Q||(Q={}));var X=function(e){function t(e){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,i=W(t).call(this,e),n=!i||"object"!==K(i)&&"function"!=typeof i?q(o):i,Object.defineProperty(q(n),"open",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(q(n),"tabId",{enumerable:!0,configurable:!0,writable:!0,value:Q.CLINICAL}),Object.defineProperty(q(n),"options",{enumerable:!0,configurable:!0,writable:!0,value:Object(_.vb)({await:function(){return[n.props.clinicalTrackOptionsPromise]},invoke:function(){return Promise.resolve(b.mapValues(n.props.clinicalTrackOptionsPromise.result,function(e){return e.map(function(e){return Object.assign(Object.assign({},e),{selected:e.key in n.selectedClinicalAttributeIds})})}))}})}),Object.defineProperty(q(n),"addClinicalTracksMenu",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.a)({await:function(){return[n.options]},render:function(){return r.createElement(B.a,{options:n.options.result.clinical,freqPromise:n.props.clinicalAttributeIdToAvailableFrequencyPromise,onAddAll:n.addAll,onClearAll:n.clear,onToggleOption:n.toggleClinicalTrack,optionsGivenInSortedOrder:!0,width:n.props.width})},renderPending:function(){return r.createElement(v.a,{isLoading:!0,small:!0})},showLastRenderWhenPending:!0})}),Object.defineProperty(q(n),"addGroupTracksMenu",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.a)({await:function(){return[n.options]},render:function(){return r.createElement(B.a,{options:n.options.result.groups,freqPromise:n.props.clinicalAttributeIdToAvailableFrequencyPromise,onAddAll:n.addAll,onClearAll:n.clear,onToggleOption:n.toggleClinicalTrack,optionsGivenInSortedOrder:!0,frequencyHeaderTooltip:"% samples in group",width:n.props.width})},renderPending:function(){return r.createElement(v.a,{isLoading:!0,small:!0})},showLastRenderWhenPending:!0})}),Object.defineProperty(q(n),"addChartTracksMenu",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.a)({await:function(){return[n.options]},render:function(){return r.createElement(B.a,{options:n.options.result.customCharts,freqPromise:n.props.clinicalAttributeIdToAvailableFrequencyPromise,onAddAll:n.addAll,onClearAll:n.clear,onToggleOption:n.toggleClinicalTrack,optionsGivenInSortedOrder:!0,frequencyHeaderTooltip:"% samples in group",width:n.props.width})},renderPending:function(){return r.createElement(v.a,{isLoading:!0,small:!0})},showLastRenderWhenPending:!0})}),Object(y.makeObservable)(q(n)),n}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(t,r["Component"]),n=t,(i=[{key:"updateTabId",value:function(e){this.tabId=e}},{key:"addAll",value:function(e){this.props.onChangeSelectedClinicalTracks(b.union(this.props.getSelectedClinicalAttributeIds(),e))}},{key:"clear",value:function(e){this.props.onChangeSelectedClinicalTracks(b.difference(this.props.getSelectedClinicalAttributeIds(),e))}},{key:"toggleClinicalTrack",value:function(e){this.props.onChangeSelectedClinicalTracks(Object(H.b)(e,this.props.getSelectedClinicalAttributeIds()))}},{key:"getMenu",value:function(){return(this.options.isComplete?b.sum(b.map(this.options.result,function(e){return+(e.length>0)})):0)>1?r.createElement(T.b,{activeTabId:this.tabId,onTabClick:this.updateTabId,className:"secondaryNavigation oncoprintAddClinicalTracks"},r.createElement(T.a,{key:0,id:Q.CLINICAL,linkText:Q.CLINICAL,hide:!this.options.isComplete||0===this.options.result.clinical.length},this.addClinicalTracksMenu.component),r.createElement(T.a,{key:1,id:Q.GROUPS,linkText:Q.GROUPS,hide:!this.options.isComplete||0===this.options.result.groups.length},this.addGroupTracksMenu.component),r.createElement(T.a,{key:2,id:Q.CUSTOM_CHARTS,linkText:Q.CUSTOM_CHARTS,hide:!this.options.isComplete||0===this.options.result.customCharts.length},this.addChartTracksMenu.component)):r.createElement("div",{className:"oncoprintAddClinicalTracks"},this.addClinicalTracksMenu.component)}},{key:"render",value:function(){return r.createElement("div",null,r.createElement(o.Observer,null,this.getMenu))}},{key:"selectedClinicalAttributeIds",get:function(){return b.keyBy(this.props.getSelectedClinicalAttributeIds())}}])&&U(n.prototype,i),a&&U(n,a),t}();Y([y.observable],X.prototype,"open",void 0),Y([y.observable],X.prototype,"tabId",void 0),Y([y.action.bound],X.prototype,"updateTabId",null),Y([y.action.bound],X.prototype,"addAll",null),Y([y.action.bound],X.prototype,"clear",null),Y([y.action.bound],X.prototype,"toggleClinicalTrack",null),Y([y.computed],X.prototype,"selectedClinicalAttributeIds",null),Y([P.default],X.prototype,"getMenu",null);var Z=X=Y([o.observer],X),J=n(39);function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ee(e){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var oe,ie=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":re(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};!function(e){e.CLINICAL="Clinical",e.HEATMAP="Heatmap"}(oe||(oe={}));var ae=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=ee(t).call(this,e),n=!o||"object"!==re(o)&&"function"!=typeof o?te(r):o,Object.defineProperty(te(n),"tabId",{enumerable:!0,configurable:!0,writable:!0,value:oe.CLINICAL}),Object.defineProperty(te(n),"clinicalTrackOptions",{enumerable:!0,configurable:!0,writable:!0,value:Object(_.vb)({await:function(){return[n.props.store.clinicalAttributes,n.clinicalAttributeIdToAvailableFrequency,n.props.store.clinicalAttributes_customCharts]},invoke:function(){var e=b.uniqBy(n.props.store.clinicalAttributes.result,function(e){return e.clinicalAttributeId}),t=n.clinicalAttributeIdToAvailableFrequency.result,r={clinical:[],groups:[],customCharts:[]},o=b.keyBy(n.props.store.clinicalAttributes_customCharts.result,function(e){return e.clinicalAttributeId}),i=!0,a=!1,l=void 0;try{for(var s,c=e[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=s.value;Object(J.d)(u)?r.groups.push(u):u.clinicalAttributeId in o?r.customCharts.push(u):r.clinical.push(u)}}catch(e){a=!0,l=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw l}}return r.clinical=b.sortBy(r.clinical,[function(e){return e.clinicalAttributeId===J.c.StudyOfOrigin?0:e.clinicalAttributeId===J.c.MutationSpectrum?1:Object(J.f)(e)?2:3},function(e){var n=t[e.clinicalAttributeId];return void 0===n&&(n=0),-n},function(e){return-e.priority},function(e){return e.displayName.toLowerCase()}]),r.groups=b.sortBy(r.groups,function(e){return e.displayName.toLowerCase()}),r.customCharts=b.sortBy(r.customCharts,function(e){return e.displayName.toLowerCase()}),Promise.resolve(b.mapValues(r,function(e){return e.map(function(e){return{label:e.displayName,key:e.clinicalAttributeId,selected:!1}})}))}})}),Object.defineProperty(te(n),"clinicalAttributeIdToAvailableFrequency",{enumerable:!0,configurable:!0,writable:!0,value:Object(_.vb)({await:function(){return[n.props.store.clinicalAttributeIdToAvailableSampleCount,n.props.store.samples]},invoke:function(){var e=n.props.store.samples.result.length;return Promise.resolve(b.mapValues(n.props.store.clinicalAttributeIdToAvailableSampleCount.result,function(t){return 100*t/e}))}})}),Object(y.makeObservable)(te(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(t,r["Component"]),n=t,(o=[{key:"updateTabId",value:function(e){this.tabId=e,Object.values(oe).includes(e)||this.isGenericAssayDataComplete&&this.profilesByGenericAssayType&&!b.isEmpty(this.profilesByGenericAssayType[e])&&this.props.handlers.onSelectGenericAssayProfile&&this.props.handlers.onSelectGenericAssayProfile(this.profilesByGenericAssayType[e][0].molecularProfileId)}},{key:"getSelectedClinicalAttributeIds",value:function(){return this.props.state.selectedClinicalAttributeIds}},{key:"onGenericAssaySubmit",value:function(e){this.props.handlers.onClickAddGenericAssays&&this.props.handlers.onClickAddGenericAssays(e)}},{key:"getTextPixel",value:function(e,t){return Math.floor(Object(_.mb)(e,"Helvetica Neue",t))}},{key:"render",value:function(){return r.createElement(a.a,{bsStyle:"default",title:"Add Tracks",id:"addTracksDropdown",className:"oncoprintAddTracksDropdown",styles:{minWidth:400,width:"auto"}},r.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.createElement(T.b,{activeTabId:this.tabId,onTabClick:this.updateTabId,unmountOnHide:!1,className:"mainTabs oncoprintAddTracks"},r.createElement(T.a,{key:0,id:oe.CLINICAL,linkText:this.clinicalTabText,hide:!this.clinicalTracksMenu},this.clinicalTracksMenu),r.createElement(T.a,{key:1,id:oe.HEATMAP,linkText:this.heatmapTabText,hide:!this.props.heatmapMenu},this.props.heatmapMenu),this.genericAssayTabs)))}},{key:"isGenericAssayDataComplete",get:function(){return this.props.store&&this.props.store.genericAssayProfiles.isComplete}},{key:"showGenericAssayTabs",get:function(){return!!this.isGenericAssayDataComplete&&1==b.chain(this.props.store.genericAssayProfiles.result).map(function(e){return e.studyId}).uniq().size().value()}},{key:"profilesByGenericAssayType",get:function(){return this.isGenericAssayDataComplete?b.groupBy(this.props.store.genericAssayProfiles.result,function(e){return e.genericAssayType}):{}}},{key:"clinicalTracksMenu",get:function(){return this.props.store&&this.props.state.selectedClinicalAttributeIds&&this.props.handlers.onChangeSelectedClinicalTracks?r.createElement(Z,{store:this.props.store,getSelectedClinicalAttributeIds:this.getSelectedClinicalAttributeIds,onChangeSelectedClinicalTracks:this.props.handlers.onChangeSelectedClinicalTracks,clinicalTrackOptionsPromise:this.clinicalTrackOptions,clinicalAttributeIdToAvailableFrequencyPromise:this.clinicalAttributeIdToAvailableFrequency,width:this.dropdownWidth}):null}},{key:"genericAssayTabs",get:function(){var e=this;if(this.isGenericAssayDataComplete&&this.showGenericAssayTabs){var t=this.props.store.genericAssayEntitiesGroupedByGenericAssayType.result;return b.map(this.profilesByGenericAssayType,function(n,o){var i=b.map(n,function(e){return{value:e.molecularProfileId,label:e.name}}),a=b.map(t[o],function(e){return Object(L.g)(e,!1)}),l=r.createElement("div",null,Object(G.n)(o),r.createElement("span",{style:{paddingLeft:5}},r.createElement(R,{count:n.length})));return r.createElement(T.a,{key:o,id:o,className:"oncoprintGenericAssayTab",linkText:l},r.createElement(V.a,{molecularProfileOptions:i,submitButtonText:"Add Track",genericAssayType:o,genericAssayEntityOptions:a,initialGenericAssayEntityIds:e.props.selectedGenericAssayEntitiesGroupedByGenericAssayTypeFromUrl&&e.props.selectedGenericAssayEntitiesGroupedByGenericAssayTypeFromUrl[o]?e.props.selectedGenericAssayEntitiesGroupedByGenericAssayTypeFromUrl[o]:[],onSelectGenericAssayProfile:e.props.handlers.onSelectGenericAssayProfile,onTrackSubmit:e.onGenericAssaySubmit,allowEmptySubmission:!0}))})}return null}},{key:"clinicalTabText",get:function(){return this.clinicalTrackOptions.result&&!b.isEmpty(this.clinicalTrackOptions.result.clinical)?r.createElement("div",null,oe.CLINICAL,r.createElement("span",{style:{paddingLeft:5}},r.createElement(R,{count:this.clinicalTrackOptions.result.clinical.length}))):oe.CLINICAL}},{key:"heatmapTabText",get:function(){return b.isEmpty(this.props.store.heatmapMolecularProfiles.result)?oe.HEATMAP:r.createElement("div",null,oe.HEATMAP,r.createElement("span",{style:{paddingLeft:5}},r.createElement(R,{count:this.props.store.heatmapMolecularProfiles.result.length})))}},{key:"dropdownWidth",get:function(){var e=this,t=40;this.clinicalTrackOptions.result&&!b.isEmpty(this.clinicalTrackOptions.result.clinical)&&(t+=this.getTextPixel(oe.CLINICAL,"14px")+14+(this.getTextPixel(this.clinicalTrackOptions.result.clinical.length.toString(),"11px")+17));this.props.heatmapMenu&&!b.isEmpty(this.props.store.heatmapMolecularProfiles.result)&&(t+=this.getTextPixel(oe.HEATMAP,"14px")+14+(this.getTextPixel(this.props.store.heatmapMolecularProfiles.result.length.toString(),"11px")+17));if(this.showGenericAssayTabs){var n=this.genericAssayTabs.map(function(e){return Object(G.n)(e.key)}).join(),r=this.genericAssayTabs.length,o=b.reduce(this.profilesByGenericAssayType,function(t,n){return t+(e.getTextPixel(n.length.toString(),"11px")+17)},0);t+=this.getTextPixel(n,"14px")+14*r+o}return Math.max(t,400)}}])&&$(n.prototype,o),i&&$(n,i),t}();ie([y.observable],ae.prototype,"tabId",void 0),ie([y.action.bound],ae.prototype,"updateTabId",null),ie([y.computed],ae.prototype,"isGenericAssayDataComplete",null),ie([y.computed],ae.prototype,"showGenericAssayTabs",null),ie([y.computed],ae.prototype,"profilesByGenericAssayType",null),ie([P.default],ae.prototype,"getSelectedClinicalAttributeIds",null),ie([y.action.bound],ae.prototype,"onGenericAssaySubmit",null),ie([y.computed],ae.prototype,"clinicalTracksMenu",null),ie([y.computed],ae.prototype,"genericAssayTabs",null),ie([y.computed],ae.prototype,"clinicalTabText",null),ie([y.computed],ae.prototype,"heatmapTabText",null),ie([y.computed],ae.prototype,"dropdownWidth",null);var le=ae=ie([o.observer],ae),se=n(957);function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function de(e,t){return(de=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var he=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":fe(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},me={columnTypeSample:"0",columnTypePatient:"1",showUnalteredColumns:"2",showWhitespaceBetweenColumns:"3",showClinicalTrackLegends:"4",onlyShowClinicalLegendForAlteredCases:"4.1",showOqlInLabels:"4.2",distinguishMutationType:"5",distinguishGermlineMutations:"5.1",sortByMutationType:"6",sortAlphabetical:"7",sortCaseListOrder:"8",sortByData:"9",sortByDrivers:"10",addGenesToHeatmap:"13",distinguishDrivers:"15",annotateOncoKb:"16",annotateHotspots:"17",annotateCBioPortal:"18",annotateCOSMIC:"19",annotateCBioPortalInput:"20",annotateCOSMICInput:"21",hidePutativePassengers:"22",hideGermlineMutations:"22.1",customDriverBinaryAnnotation:"23",customDriverTierAnnotation:"24",downloadPDF:"25",downloadPNG:"26",downloadSVG:"27",downloadOrder:"28",downloadTabular:"29",downloadOncoprinter:"29.1",horzZoomSlider:"30",viewNGCHM:"31"},ye=function(e){function t(e){var n,i,l,s=this;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,l=ue(t).call(this,e),n=!l||"object"!==fe(l)&&"function"!=typeof l?pe(i):l,Object.defineProperty(pe(n),"horzZoomSliderState",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(pe(n),"heatmapGenesReady",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(pe(n),"showConfirmNgchmModal",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(pe(n),"tabId",{enumerable:!0,configurable:!0,writable:!0,value:"CLINICAL"}),Object.defineProperty(pe(n),"AddTracksMenu",{enumerable:!0,configurable:!0,writable:!0,value:Object(o.observer)(function(){return n.props.store?r.createElement(le,{store:n.props.store,heatmapMenu:n.heatmapMenu,handlers:n.props.handlers,state:n.props.state,selectedGenericAssayEntitiesGroupedByGenericAssayTypeFromUrl:n.props.selectedGenericAssayEntitiesGroupedByGenericAssayTypeFromUrl}):null})}),Object.defineProperty(pe(n),"SortMenuOncoprinter",{enumerable:!0,configurable:!0,writable:!0,value:Object(o.observer)(function(){return r.createElement(a.a,{bsStyle:"default",title:"Sort",id:"sortDropdown"},r.createElement("div",{className:"oncoprint__controls__sort_menu","data-test":"oncoprintSortDropdownMenu"},r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:me.sortByMutationType,checked:n.props.state.sortByMutationType,onClick:n.onInputClick,disabled:!n.props.state.distinguishMutationType})," ","Mutation Type")),r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:me.sortByDrivers,checked:n.props.state.sortByDrivers,onClick:n.onInputClick,disabled:!n.props.state.distinguishDrivers})," ","Driver/Passenger"))))})}),Object.defineProperty(pe(n),"SortMenuOncoprint",{enumerable:!0,configurable:!0,writable:!0,value:Object(o.observer)(function(){return r.createElement(a.a,{bsStyle:"default",title:"Sort",id:"sortDropdown"},r.createElement("div",{className:"oncoprint__controls__sort_menu","data-test":"oncoprintSortDropdownMenu"},r.createElement("div",{className:"radio"},r.createElement("label",null,r.createElement("input",{"data-test":"sortByData",type:"radio",name:"sortBy",value:me.sortByData,checked:"data"===n.props.state.sortMode.type,onClick:n.onInputClick})," ","Sort by data")),r.createElement("div",{style:{marginLeft:"10px"}},r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:me.sortByMutationType,checked:n.props.state.sortByMutationType,onClick:n.onInputClick,disabled:"data"!==n.props.state.sortMode.type||!n.props.state.distinguishMutationType})," ","Mutation Type")),r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:me.sortByDrivers,checked:n.props.state.sortByDrivers,onClick:n.onInputClick,disabled:"data"!==n.props.state.sortMode.type||!n.props.state.distinguishDrivers})," ","Driver/Passenger"))),r.createElement("div",{className:"radio"},r.createElement("label",null,r.createElement("input",{type:"radio",name:"sortBy",value:me.sortAlphabetical,checked:"alphabetical"===n.props.state.sortMode.type,onClick:n.onInputClick})," ","Sort by case id (alphabetical)")),r.createElement("div",{className:"radio"},r.createElement("label",null,r.createElement("input",{type:"radio",name:"sortBy",value:me.sortCaseListOrder,checked:"caseList"===n.props.state.sortMode.type,onClick:n.onInputClick,"data-test":"caseList",disabled:!!n.props.state.sortByCaseListDisabled})," ","Sort by case list order")),n.props.state.heatmapProfilesPromise&&!(n.props.state.heatmapProfilesPromise.isComplete&&!n.props.state.heatmapProfilesPromise.result.length)&&r.createElement("div",{className:"radio"},r.createElement("label",null,r.createElement("input",{"data-test":"sortByHeatmapClustering",type:"radio",name:"sortBy",checked:"heatmap"===n.props.state.sortMode.type,disabled:!0})," ","Sorted by heatmap clustering order"))))})}),Object.defineProperty(pe(n),"MutationColorMenu",{enumerable:!0,configurable:!0,writable:!0,value:Object(o.observer)(function(){return r.createElement(a.a,{bsStyle:"default",title:"Mutations",id:"mutationColorDropdown"},r.createElement("div",{className:"oncoprint__controls__mutation_color_menu"},r.createElement("h5",null,"Color by"),r.createElement("div",{style:{marginLeft:"10px"}},r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{"data-test":"ColorByType",type:"checkbox",value:me.distinguishMutationType,checked:n.props.state.distinguishMutationType,onClick:n.onInputClick})," ","Type")),r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{"data-test":"ColorByGermline",type:"checkbox",value:me.distinguishGermlineMutations,checked:n.props.state.distinguishGermlineMutations,onClick:n.onInputClick})," ","Somatic vs Germline"))),n.driverAnnotationSection))})}),Object.defineProperty(pe(n),"ViewMenu",{enumerable:!0,configurable:!0,writable:!0,value:Object(o.observer)(function(){return n.props.oncoprinterMode?r.createElement(s.ViewMenuOncoprinter,null):r.createElement(s.ViewMenuOncoprint,null)})}),Object.defineProperty(pe(n),"ViewMenuOncoprinter",{enumerable:!0,configurable:!0,writable:!0,value:Object(o.observer)(function(){return r.createElement(a.a,{bsStyle:"default",title:"View",id:"viewDropdownButton"},r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:me.showUnalteredColumns,checked:n.props.state.showUnalteredColumns,onClick:n.onInputClick})," ","Show unaltered columns")),r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:me.showWhitespaceBetweenColumns,checked:n.props.state.showWhitespaceBetweenColumns,onClick:n.onInputClick})," ","Show whitespace between columns")),r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:me.showClinicalTrackLegends,checked:n.props.state.showClinicalTrackLegends,onClick:n.onInputClick})," ","Show legends for clinical tracks")))})}),Object.defineProperty(pe(n),"ViewMenuOncoprint",{enumerable:!0,configurable:!0,writable:!0,value:Object(o.observer)(function(){return r.createElement(a.a,{bsStyle:"default",title:"View",id:"viewDropdownButton"},r.createElement("strong",null,"Data type:"),r.createElement("div",{className:"radio"},r.createElement("label",null,r.createElement("input",{type:"radio",name:"columnType",value:me.columnTypeSample,checked:n.props.state.columnMode===k.c.SAMPLE,onClick:n.onInputClick})," ","Events per sample")),r.createElement("div",{className:"radio"},r.createElement("label",null,r.createElement("input",{type:"radio",name:"columnType",value:me.columnTypePatient,checked:n.props.state.columnMode===k.c.PATIENT,onClick:n.onInputClick})," ","Events per patient")),r.createElement("hr",null),r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:me.showUnalteredColumns,checked:n.props.state.showUnalteredColumns,onClick:n.onInputClick})," ","Show unaltered columns")),r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:me.showWhitespaceBetweenColumns,checked:n.props.state.showWhitespaceBetweenColumns,onClick:n.onInputClick})," ","Show whitespace between columns")),r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:me.showClinicalTrackLegends,checked:n.props.state.showClinicalTrackLegends,onClick:n.onInputClick})," ","Show legends for clinical tracks")),r.createElement("div",{className:"checkbox",style:{marginLeft:20,maxWidth:220}},r.createElement("label",null,r.createElement("input",{"data-test":"onlyShowClinicalLegendsForAltered",type:"checkbox",value:me.onlyShowClinicalLegendForAlteredCases,checked:n.props.state.onlyShowClinicalLegendForAlteredCases,onClick:n.onInputClick,disabled:!n.props.state.showClinicalTrackLegends})," ","Only show clinical track legends for altered"," ",n.props.state.columnMode===k.c.PATIENT?"patients":"samples",".")),r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:me.showOqlInLabels,checked:n.props.state.showOqlInLabels,onClick:n.onInputClick})," ","Show OQL filters")))})}),Object.defineProperty(pe(n),"DownloadMenu",{enumerable:!0,configurable:!0,writable:!0,value:Object(o.observer)(function(){return r.createElement(a.a,{bsStyle:"default",title:"Download",id:"downloadDropdownButton"},r.createElement("button",{className:"btn btn-sm btn-default",name:me.downloadPDF,onClick:n.onButtonClick},"PDF"),r.createElement("button",{className:"btn btn-sm btn-default",name:me.downloadPNG,onClick:n.onButtonClick},"PNG"),r.createElement("button",{className:"btn btn-sm btn-default",name:me.downloadSVG,onClick:n.onButtonClick},"SVG"),r.createElement("button",{className:"btn btn-sm btn-default",name:me.downloadOrder,onClick:n.onButtonClick},n.props.state.columnMode&&n.props.state.columnMode[0].toUpperCase()+n.props.state.columnMode.slice(1)||"Sample"," ","order"),!n.props.oncoprinterMode&&r.createElement("button",{className:"btn btn-sm btn-default",name:me.downloadTabular,onClick:n.onButtonClick},"Tabular"),!n.props.oncoprinterMode&&r.createElement("button",{className:"btn btn-sm btn-default",name:me.downloadOncoprinter,onClick:n.onButtonClick},"Open in Oncoprinter"))})}),Object.defineProperty(pe(n),"HorzZoomControls",{enumerable:!0,configurable:!0,writable:!0,value:Object(o.observer)(function(){return r.createElement("div",{className:"btn btn-default oncoprint__zoom-controls"},r.createElement(_.i,{overlay:r.createElement("span",null,"Zoom out of oncoprint."),placement:"top"},r.createElement("div",{onClick:n.onZoomOutClick},r.createElement("i",{className:"fa fa-search-minus"}))),r.createElement(_.i,{overlay:r.createElement("span",null,"Zoom in/out of oncoprint."),placement:"top"},r.createElement("div",{style:{width:"90px"}},r.createElement(O.a,{value:n.horzZoomSliderState,onChange:n.onHorzZoomSliderChange,onChangeComplete:n.onHorzZoomSliderSet,step:.01,max:1,min:0,tooltip:!1}))),r.createElement(_.l,{value:(100*n.horzZoomSliderState).toFixed(),setValue:n.onSetHorzZoomTextInput,maxChars:3,numericOnly:!0,textFieldAppearance:!0,style:{background:"white",minWidth:"30px",fontSize:"14px",fontFamily:"arial",border:"none",padding:0,marginTop:0,marginBottom:0,marginRight:2}}),r.createElement("div",null,"%"),r.createElement(_.i,{overlay:r.createElement("span",null,"Zoom in to oncoprint."),placement:"top"},r.createElement("div",{onClick:n.onZoomInClick},r.createElement("i",{className:"fa fa-search-plus"}))))})}),Object.defineProperty(pe(n),"SortMenu",{enumerable:!0,configurable:!0,writable:!0,value:Object(o.observer)(function(){return n.props.oncoprinterMode?r.createElement(s.SortMenuOncoprinter,null):r.createElement(s.SortMenuOncoprint,null)})}),Object(y.makeObservable)(pe(n)),n.horzZoomSliderState=e.state.horzZoom,Object(y.reaction)(function(){return n.props.state.horzZoom},function(e){return n.horzZoomSliderState=e}),n}var l,s,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&de(e,t)}(t,r["Component"]),l=t,(s=[{key:"onZoomInClick",value:function(){this.props.handlers.onClickZoomIn()}},{key:"onZoomOutClick",value:function(){this.props.handlers.onClickZoomOut()}},{key:"onSetHorzZoomTextInput",value:function(e){var t=parseFloat(e)/100;this.props.handlers.onSetHorzZoom(t)}},{key:"onSelect",value:function(e){e===me.distinguishMutationType&&this.props.handlers.onSelectDistinguishMutationType&&this.props.handlers.onSelectDistinguishMutationType(!this.props.state.distinguishMutationType)}},{key:"onHeatmapProfileSelect",value:function(e){this.props.handlers.onSelectHeatmapProfile&&this.props.handlers.onSelectHeatmapProfile(e.value)}},{key:"toggleShowMinimap",value:function(){this.props.handlers.onSelectShowMinimap&&this.props.handlers.onSelectShowMinimap(!this.props.state.showMinimap)}},{key:"onInputClick",value:function(e){switch(e.target.value){case me.showUnalteredColumns:this.props.handlers.onSelectShowUnalteredColumns&&this.props.handlers.onSelectShowUnalteredColumns(!this.props.state.showUnalteredColumns);break;case me.showWhitespaceBetweenColumns:this.props.handlers.onSelectShowWhitespaceBetweenColumns&&this.props.handlers.onSelectShowWhitespaceBetweenColumns(!this.props.state.showWhitespaceBetweenColumns);break;case me.showClinicalTrackLegends:this.props.handlers.onSelectShowClinicalTrackLegends&&this.props.handlers.onSelectShowClinicalTrackLegends(!this.props.state.showClinicalTrackLegends);break;case me.onlyShowClinicalLegendForAlteredCases:this.props.handlers.onSelectOnlyShowClinicalLegendForAlteredCases&&this.props.handlers.onSelectOnlyShowClinicalLegendForAlteredCases(!this.props.state.onlyShowClinicalLegendForAlteredCases);break;case me.showOqlInLabels:this.props.handlers.onSelectShowOqlInLabels&&this.props.handlers.onSelectShowOqlInLabels(!this.props.state.showOqlInLabels);break;case me.columnTypeSample:this.props.handlers.onSelectColumnType&&this.props.handlers.onSelectColumnType("sample");break;case me.columnTypePatient:this.props.handlers.onSelectColumnType&&this.props.handlers.onSelectColumnType("patient");break;case me.sortByData:this.props.handlers.onClickSortByData&&this.props.handlers.onClickSortByData();break;case me.sortAlphabetical:this.props.handlers.onClickSortAlphabetical&&this.props.handlers.onClickSortAlphabetical();break;case me.sortCaseListOrder:this.props.handlers.onClickSortCaseListOrder&&this.props.handlers.onClickSortCaseListOrder();break;case me.sortByMutationType:this.props.handlers.onSelectSortByMutationType&&this.props.handlers.onSelectSortByMutationType(!this.props.state.sortByMutationType);break;case me.sortByDrivers:this.props.handlers.onSelectSortByDrivers&&this.props.handlers.onSelectSortByDrivers(!this.props.state.sortByDrivers);break;case me.distinguishDrivers:this.props.handlers.onSelectDistinguishDrivers&&this.props.handlers.onSelectDistinguishDrivers(!this.props.state.distinguishDrivers);break;case me.distinguishMutationType:this.props.handlers.onSelectDistinguishMutationType&&this.props.handlers.onSelectDistinguishMutationType(!this.props.state.distinguishMutationType);break;case me.distinguishGermlineMutations:this.props.handlers.onSelectDistinguishGermlineMutations(!this.props.state.distinguishGermlineMutations);break;case me.annotateOncoKb:this.props.handlers.onSelectAnnotateOncoKb&&this.props.handlers.onSelectAnnotateOncoKb(!this.props.state.annotateDriversOncoKb);break;case me.annotateHotspots:this.props.handlers.onSelectAnnotateHotspots&&this.props.handlers.onSelectAnnotateHotspots(!this.props.state.annotateDriversHotspots);break;case me.annotateCBioPortal:this.props.handlers.onSelectAnnotateCBioPortal&&this.props.handlers.onSelectAnnotateCBioPortal(!this.props.state.annotateDriversCBioPortal);break;case me.annotateCOSMIC:this.props.handlers.onSelectAnnotateCOSMIC&&this.props.handlers.onSelectAnnotateCOSMIC(!this.props.state.annotateDriversCOSMIC);break;case me.hidePutativePassengers:this.props.handlers.onSelectHideVUS&&this.props.handlers.onSelectHideVUS(!this.props.state.hidePutativePassengers);break;case me.hideGermlineMutations:this.props.handlers.onSelectHideGermlineMutations(!this.props.state.hideGermlineMutations);break;case me.customDriverBinaryAnnotation:this.props.handlers.onSelectCustomDriverAnnotationBinary&&this.props.handlers.onSelectCustomDriverAnnotationBinary(!this.props.state.annotateCustomDriverBinary)}}},{key:"onHorzZoomSliderChange",value:function(e){this.horzZoomSliderState=e}},{key:"onHorzZoomSliderSet",value:function(){this.props.handlers.onSetHorzZoom(this.horzZoomSliderState),this.horzZoomSliderState=this.props.state.horzZoom}},{key:"onCustomDriverTierCheckboxClick",value:function(e){var t=e.target.value;this.props.handlers.onSelectCustomDriverAnnotationTier&&this.props.handlers.onSelectCustomDriverAnnotationTier(t,!(this.props.state.selectedCustomDriverAnnotationTiers&&this.props.state.selectedCustomDriverAnnotationTiers.get(t)))}},{key:"onButtonClick",value:function(e){switch(e.target.name){case me.addGenesToHeatmap:this.props.handlers.onClickAddGenesToHeatmap&&this.props.handlers.onClickAddGenesToHeatmap();break;case me.downloadSVG:this.props.handlers.onClickDownload&&this.props.handlers.onClickDownload("svg");break;case me.downloadPNG:this.props.handlers.onClickDownload&&this.props.handlers.onClickDownload("png");break;case me.downloadPDF:this.props.handlers.onClickDownload&&this.props.handlers.onClickDownload("pdf");break;case me.downloadOrder:this.props.handlers.onClickDownload&&this.props.handlers.onClickDownload("order");break;case me.downloadTabular:this.props.handlers.onClickDownload&&this.props.handlers.onClickDownload("tabular");break;case me.downloadOncoprinter:this.props.handlers.onClickDownload&&this.props.handlers.onClickDownload("oncoprinter");break;case me.viewNGCHM:this.props.state.ngchmButtonActive&&this.props.handlers.onClickNGCHM&&(this.showConfirmNgchmModal=!0)}}},{key:"onChangeHeatmapGeneInput",value:function(e,t,n){this.props.handlers.onChangeHeatmapGeneInputValue&&this.props.handlers.onChangeHeatmapGeneInputValue(n);var r=g.a.keyBy(t.found,function(e){return e.hugoGeneSymbol.toUpperCase()});this.heatmapGenesReady=g.a.every(e.query,function(e){return e.gene.toUpperCase()in r})}},{key:"onType",value:function(e){switch(e.target.name){case me.annotateCBioPortalInput:this.props.handlers.onChangeAnnotateCBioPortalInputValue&&this.props.handlers.onChangeAnnotateCBioPortalInputValue(e.target.value);break;case me.annotateCOSMICInput:this.props.handlers.onChangeAnnotateCOSMICInputValue&&this.props.handlers.onChangeAnnotateCOSMICInputValue(e.target.value)}}},{key:"updateTabId",value:function(e){this.tabId=e}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:"oncoprint__controls"},r.createElement(i.ButtonGroup,null,r.createElement(this.AddTracksMenu,null),r.createElement(this.SortMenu,null),r.createElement(this.MutationColorMenu,null),r.createElement(this.ViewMenu,null),r.createElement(this.DownloadMenu,null),r.createElement(this.HorzZoomControls,null),this.minimapButton,r.createElement(h,{show:this.showConfirmNgchmModal,onHide:function(){return e.showConfirmNgchmModal=!1},openNgchmWindow:this.props.handlers.onClickNGCHM})))}},{key:"heatmapProfileOptions",get:function(){return this.props.state.heatmapProfilesPromise&&this.props.state.heatmapProfilesPromise.result?g.a.map(this.props.state.heatmapProfilesPromise.result,function(e){return{label:e.name,value:e.molecularProfileId,type:e.molecularAlterationType}}):[]}},{key:"heatmapMenu",get:function(){var e=this.props.state.heatmapIsDynamicallyQueried;if(this.props.oncoprinterMode||this.props.state.hideHeatmapMenu||!this.props.state.heatmapProfilesPromise)return null;var t=r.createElement(v.a,{isLoading:!0});if(this.props.state.heatmapProfilesPromise.isComplete){if(!this.props.state.heatmapProfilesPromise.result.length)return null;t=r.createElement("div",{className:"oncoprint__controls__heatmap_menu"},r.createElement(m.default,{clearable:!1,searchable:!1,isLoading:this.props.state.heatmapProfilesPromise.isPending,onChange:this.onHeatmapProfileSelect,value:this.props.state.selectedHeatmapProfileId,options:this.heatmapProfileOptions}),e&&[r.createElement(C.b,{inputGeneQuery:this.props.state.heatmapGeneInputValue||"",callback:this.onChangeHeatmapGeneInput,location:C.a.ONCOPRINT_HEATMAP}),r.createElement("button",{key:"addGenesToHeatmapButton",className:"btn btn-sm btn-default",name:me.addGenesToHeatmap,onClick:this.onButtonClick,disabled:(this.props.state.heatmapGeneInputValue||"").trim().length>0&&!this.heatmapGenesReady},"Add Genes to Heatmap")],this.props.state.ngchmButtonActive&&[r.createElement("hr",null),r.createElement(_.i,{overlay:r.createElement("span",null,"Open a new tab to visualize this study as Next Generation Clustered Heatmaps from MD Anderson Cancer Center.")},r.createElement("button",{className:E()("btn","btn-sm","btn-default"),name:me.viewNGCHM,onClick:this.onButtonClick},"Whole Study Heatmap (NG-CHM)"," ",r.createElement("i",{className:"fa fa-external-link","aria-hidden":"true"})))])}else this.props.state.heatmapProfilesPromise.isError&&(t=r.createElement("span",null,"Error loading heatmap profiles."));return t}},{key:"driverAnnotationSection",get:function(){if(this.props.oncoprinterMode||!this.props.store)return r.createElement(r.Fragment,null,r.createElement("h5",null,"Annotate"),r.createElement("div",{style:{marginLeft:10}},r.createElement(se.a,{state:this.props.state,handlers:Object.assign({onCustomDriverTierCheckboxClick:this.onCustomDriverTierCheckboxClick},this.props.handlers),resultsView:!0})),r.createElement("h5",null,"Filter"),r.createElement("div",{style:{marginLeft:10}},r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{"data-test":"HideVUS",type:"checkbox",value:me.hidePutativePassengers,checked:this.props.state.hidePutativePassengers,onClick:this.onInputClick,disabled:!this.props.state.distinguishDrivers})," ","Hide mutations and copy number alterations of unknown significance")),r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{"data-test":"HideGermline",type:"checkbox",value:me.hideGermlineMutations,checked:this.props.state.hideGermlineMutations,onClick:this.onInputClick,disabled:!this.props.state.distinguishGermlineMutations})," ","Hide germline mutations"))));var e=this.props.store;return r.createElement(r.Fragment,null,r.createElement("h5",null,"Annotate and Filter"),r.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",marginLeft:10}},"Please see the",r.createElement("button",{style:{marginLeft:5,marginRight:5,marginBottom:0,width:"auto",padding:"1px 5px 1px 5px"},className:"btn btn-primary",onClick:function(){e.isSettingsMenuVisible=!e.isSettingsMenuVisible}},r.createElement("i",{className:"fa fa-sliders"})),"menu."))}},{key:"showMinimap",get:function(){return this.props.state.showMinimap}},{key:"minimapButton",get:function(){return r.createElement("div",{className:"btn-group"},r.createElement(_.i,{overlay:r.createElement("span",null,"Toggle minimap panel.")},r.createElement(i.Button,{active:this.showMinimap,onClick:this.toggleShowMinimap},r.createElement("img",{"data-test":"ShowMinimapButton",src:n(1047),alt:"icon",style:{width:15,height:15}}))))}}])&&ce(l.prototype,s),c&&ce(l,c),t}();he([y.observable],ye.prototype,"horzZoomSliderState",void 0),he([y.observable],ye.prototype,"heatmapGenesReady",void 0),he([y.observable],ye.prototype,"showConfirmNgchmModal",void 0),he([P.default],ye.prototype,"onZoomInClick",null),he([P.default],ye.prototype,"onZoomOutClick",null),he([P.default],ye.prototype,"onSetHorzZoomTextInput",null),he([P.default],ye.prototype,"onSelect",null),he([P.default],ye.prototype,"onHeatmapProfileSelect",null),he([P.default],ye.prototype,"toggleShowMinimap",null),he([P.default],ye.prototype,"onInputClick",null),he([P.default],ye.prototype,"onHorzZoomSliderChange",null),he([P.default],ye.prototype,"onHorzZoomSliderSet",null),he([P.default],ye.prototype,"onCustomDriverTierCheckboxClick",null),he([P.default],ye.prototype,"onButtonClick",null),he([y.action.bound],ye.prototype,"onChangeHeatmapGeneInput",null),he([P.default],ye.prototype,"onType",null),he([y.computed],ye.prototype,"heatmapProfileOptions",null),he([y.observable],ye.prototype,"tabId",void 0),he([y.action.bound],ye.prototype,"updateTabId",null),he([y.computed],ye.prototype,"heatmapMenu",null),he([y.computed],ye.prototype,"driverAnnotationSection",null),he([y.computed],ye.prototype,"showMinimap",null),ye=he([o.observer],ye);t.a=ye},1164:function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(18),a=n(3),l=n(2),s=n(12),c=n(226),u=n(1),p=n.n(u),d=n(866),f=n(216),h=n.n(f),m=n(29),y=n(17),b=n(5),g=n.n(b),v=n(814),_=n.n(v),w=n(147),O=n(1097);function S(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function E(e){return e.xLength*e.yLength}function k(){for(var e=arguments.length<=0?void 0:arguments[0],t=1;t<arguments.length;t++){var n=t<0||arguments.length<=t?void 0:arguments[t],r=Math.max(e.x,n.x),o=Math.min(e.x+e.xLength,n.x+n.xLength),i=Math.max(e.y,n.y),a=Math.min(e.y+e.yLength,n.y+n.yLength);if(r>=o||i>=a)return{x:0,y:0,xLength:0,yLength:0};e={x:r,y:i,xLength:o-r,yLength:a-i}}return e}function C(e,t){var n=[e],r=!0,o=!1,i=void 0;try{for(var a,l=function(){var e=a.value;n=p.a.flatMap(n,function(t){return function(e,t){if(0===E(k(e,t)))return[e];var n=x([e,t]),r=[{x:n.xRange.min,y:t.y+t.yLength,xLength:n.xLength,yLength:n.yRange.max-(t.y+t.yLength)},{x:n.xRange.min,y:t.y,xLength:t.x-n.xRange.min,yLength:t.yLength},{x:n.xRange.min,y:n.yRange.min,xLength:n.xLength,yLength:t.y-n.yRange.min},{x:t.x+t.xLength,y:t.y,xLength:n.xRange.max-(t.x+t.xLength),yLength:t.yLength}].map(function(t){return k(t,e)});return r=r.filter(function(e){return E(e)>0})}(t,e)})},s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0)l()}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}function P(e){return p.a.sumBy(e,E)}function T(e,t){return C(k.apply(void 0,S(e.map(function(e){return t[e]}))),p.a.difference(Object.keys(t),e).map(function(e){return t[e]}))}function x(e){var t={xRange:{min:Math.min.apply(Math,S(e.map(function(e){return e.x}))),max:Math.max.apply(Math,S(e.map(function(e){return e.x+e.xLength})))},yRange:{min:Math.min.apply(Math,S(e.map(function(e){return e.y}))),max:Math.max.apply(Math,S(e.map(function(e){return e.y+e.yLength})))},xLength:0,yLength:0};return t.xLength=t.xRange.max-t.xRange.min,t.yLength=t.yRange.max-t.yRange.min,t}function j(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function A(e){var t=function(e){var t=[],n=p.a.values(e),r=!0,o=!1,i=void 0;try{for(var a,l=function(){for(var e=a.value,n=!1,r=0,o=t;r<o.length;r++){var i=o[r];p.a.some(i.rectangles,function(t){return E(k(e,t))>0})&&(i.rectangles.push(e),n=!0)}n||t.push({rectangles:[e]})},s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0)l()}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return t}(e);if(t.length>1){var n=(t=p.a.sortBy(t,function(e){return-E(x(e.rectangles))})).map(function(e){return x(e.rectangles)}),r=Math.max.apply(Math,j(n.map(function(e){return e.xRange.max-e.xRange.min})))/10,o=Math.max.apply(Math,j(n.map(function(e){return e.yRange.max-e.yRange.min})))/10,i=[];switch(n.length){case 2:i=[{x:0,y:0},{x:n[0].xLength+r,y:0}];break;case 3:i=[{x:0,y:0},{x:Math.max(n[0].xLength,n[2].xLength)+r,y:0},{x:0,y:Math.max(n[0].yLength,n[1].yLength)+o}]}for(var a=0;a<i.length;a++){var l=i[a].x-n[a].xRange.min,s=i[a].y-n[a].yRange.min,c=!0,u=!1,d=void 0;try{for(var f,h=t[a].rectangles[Symbol.iterator]();!(c=(f=h.next()).done);c=!0){var m=f.value;m.x+=l,m.y+=s}}catch(e){u=!0,d=e}finally{try{c||null==h.return||h.return()}finally{if(u)throw d}}}}}function I(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var M=n(1098);function D(e,t){var n=T(e,t);if(0===n.length)return null;var r=p.a.sortBy(n,function(e){return-E(e)})[0];return{x:r.x+r.xLength/2,y:r.y+r.yLength/2}}function N(e,t,n){var r,o,i,a,l=0,s=0,c=!0,u=!1,p=void 0;try{for(var d,f=t[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var h=d.value,m=P(T(h.sets,e)),y=m-h.size;l+=y*y,2===h.sets.length&&0===m&&h.size>0&&(s+=(r=e[h.sets[0]],o=e[h.sets[1]],i=void 0,a=void 0,i=r.x-o.x,a=r.y-o.y,Math.sqrt(i*i+a*a)))}}catch(e){u=!0,p=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw p}}var b=!0,g=!1,v=void 0;try{for(var _,w=n[Symbol.iterator]();!(b=(_=w.next()).done);b=!0){var O=_.value,S=E(e[O.uid])-O.size;l+=S*S}}catch(e){g=!0,v=e}finally{try{b||null==w.return||w.return()}finally{if(g)throw v}}return{areaError:l,otherPenalties:s}}function R(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var H=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":F(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};function U(e){e.target.setAttribute("fill",e.target.getAttribute("data-hover-fill"))}function W(e){e.target.setAttribute("fill",e.target.getAttribute("data-default-fill"))}var q=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=G(t).call(this,e),n=!o||"object"!==F(o)&&"function"!=typeof o?V(r):o,Object.defineProperty(V(n),"svg",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(V(n),"tooltipModel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(V(n),"mousePosition",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0}}),Object.defineProperty(V(n),"regionClickHandlers",{enumerable:!0,configurable:!0,writable:!0,value:Object(d.a)(function(e,t){n.props.onChangeSelectedRegions(Object(w.i)(t.combination,n.props.selection.regions))})}),Object.defineProperty(V(n),"regionHoverHandlers",{enumerable:!0,configurable:!0,writable:!0,value:Object(d.a)(function(e,t){t.sizeOfRegion>0&&(n.tooltipModel=t,n.mousePosition.x=e.pageX,n.mousePosition.y=e.pageY)})}),Object(l.makeObservable)(V(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(t,r["Component"]),n=t,(o=[{key:"svgRef",value:function(e){this.svg=e}},{key:"resetSelection",value:function(){this.props.onChangeSelectedRegions([])}},{key:"resetTooltip",value:function(){this.tooltipModel=null}},{key:"render",value:function(){return r.createElement("g",{transform:"translate(".concat(this.props.x,",").concat(this.props.y,")"),onMouseOut:this.resetTooltip},r.createElement("rect",{x:"0",y:"0",fill:"white",fillOpacity:0,width:this.props.width,height:this.props.height,onMouseMove:this.resetTooltip,onClick:this.resetSelection}),this.svgElements,!!this.tooltipModel&&m.createPortal(r.createElement(y.Popover,{arrowOffsetTop:17,className:g()("cbioportal-frontend","cbioTooltip",_.a.Tooltip),positionLeft:this.mousePosition.x+15,positionTop:this.mousePosition.y-17},this.tooltipContent),document.body))}},{key:"layoutParams",get:function(){var e,t=this;switch(this.props.groups.length){case 2:e=[[0],[1],[0,1]];break;case 3:default:e=[[0],[1],[2],[0,1],[0,2],[1,2],[0,1,2]]}var n=e.map(function(e){var n=p.a.intersection.apply(p.a,R(e.map(function(e){return t.props.groups[e].cases}))),r=n.length,o=!0,i=!1,a=void 0;try{for(var l,s=Object(w.b)(e,t.props.groups.length)[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var c=l.value;p.a.pullAll(n,t.props.groups[c].cases)}}catch(e){i=!0,a=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw a}}return{combination:e,sizeOfIntersectionOfSets:r,sizeOfRegion:n.length,color:Object(w.a)(e.map(function(e){return t.props.uidToGroup[t.props.groups[e].uid].color})),labelPosition:null}}),r=n.map(function(e){return{sets:e.combination.map(function(e){return t.props.groups[e].uid}),size:e.sizeOfRegion,sizeOfIntersectionOfSets:e.sizeOfIntersectionOfSets}}),o=this.props.groups.map(function(e){return{size:e.cases.length,uid:e.uid,color:t.props.uidToGroup[e.uid].color,disjoint:(n=r.find(function(t){return 1===t.sets.length&&t.sets[0]===e.uid}),n.size===n.sizeOfIntersectionOfSets)};var n}),i=function(e,t){var n=Math.max.apply(Math,j(t.map(function(e){return e.size})))/30;t=p.a.cloneDeep(t),e=p.a.cloneDeep(e);var r=p.a.keyBy(t,function(e){return e.uid}),o=!0,i=!1,a=void 0;try{for(var l,s=e[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var c=l.value;if(c.size>0&&c.size<n){var u=n-c.size;c.size+=u,c.sizeOfIntersectionOfSets+=u;var d=!0,f=!1,h=void 0;try{for(var m,y=c.sets[Symbol.iterator]();!(d=(m=y.next()).done);d=!0)r[m.value].size+=u}catch(e){f=!0,h=e}finally{try{d||null==y.return||y.return()}finally{if(f)throw h}}}}}catch(e){i=!0,a=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw a}}return{regions:e,sets:t}}(r,o),a=function(e,t,n){n=n||{};var r,o=M.bestInitialLayout(e.map(function(e){return{sets:e.sets,size:e.sizeOfIntersectionOfSets}}),n),i=p.a.mapValues(o,function(e){return{x:e.x-e.radius,y:e.y-e.radius,xLength:2*e.radius,yLength:2*e.radius}}),a=function(e,t,n){var r,o,i=t[6*e],a=t[6*e+1],l=Math.abs(t[6*e+2]),s=l+Math.abs(t[6*e+3]);return n?(r=l,o=s):o=(r=Math.abs(t[6*e+4]))+Math.abs(t[6*e+5]),{x:i-l,y:a-r,xLength:s,yLength:o}},l=[],s=!0,c=!1,u=void 0;try{for(var d,f=t[Symbol.iterator]();!(s=(d=f.next()).done);s=!0){var h=d.value;l.push.apply(l,I([(r=i[h.uid]).x+r.xLength/2,r.y+r.yLength/2,r.xLength/2,r.xLength/2,r.yLength/2,r.yLength/2]))}}catch(e){c=!0,u=e}finally{try{s||null==f.return||f.return()}finally{if(c)throw u}}for(var m={},y=Object(O.nelderMead)(function(n){for(var r={},o=0;o<t.length;o++)r[t[o].uid]=a(o,n,t[o].disjoint);var i=N(r,e,t);return i.areaError+i.otherPenalties},l,n).x,b=0;b<t.length;b++)m[t[b].uid]=a(b,y,t[b].disjoint);return A(m),{rectangles:m,finalErrorValue:N(m,e,t).areaError}}(i.regions,i.sets,{maxIterations:1e4}),l=function(e,t,n,r){var o=p.a.values(e),i=Object.keys(e);t-=2*r,n-=2*r;var a=x(o),l=a.xRange,s=a.yRange;if(l.max==l.min||s.max==s.min)return console.log("not scaling layout: zero size detected"),e;for(var c=t/(l.max-l.min),u=n/(s.max-s.min),d=Math.min(u,c),f=(t-(l.max-l.min)*d)/2,h=(n-(s.max-s.min)*d)/2,m={},y=0;y<o.length;++y){var b=o[y];m[i[y]]={xLength:d*b.xLength,yLength:d*b.yLength,x:r+f+(b.x-l.min)*d,y:r+h+(b.y-s.min)*d}}return m}(a.rectangles,this.props.width,this.props.height,20),s=!0,c=!1,u=void 0;try{for(var d,f=n[Symbol.iterator]();!(s=(d=f.next()).done);s=!0){var h=d.value;h.sizeOfRegion>0&&(h.labelPosition=D(h.combination.map(function(e){return t.props.groups[e].uid}),l))}}catch(e){c=!0,u=e}finally{try{s||null==f.return||f.return()}finally{if(c)throw u}}return a.finalErrorValue>=1&&setTimeout(this.props.onLayoutFailure,0),{rectangles:l,regions:n,sets:o}}},{key:"svgElements",get:function(){var e=this,t=this.layoutParams.rectangles,n=this.props.groups.map(function(n,o){return r.createElement("clipPath",{id:"".concat(e.props.uid,"_circle_").concat(o)},r.createElement("rect",{x:t[n.uid].x,y:t[n.uid].y,width:t[n.uid].xLength,height:t[n.uid].yLength,rx:8}))}),o=p.a.flattenDeep(this.layoutParams.regions.map(function(t){var n=t.combination,o=r.createElement("g",null,r.createElement("rect",{x:"0",y:"0",height:e.props.height,width:e.props.width,fill:t.color,style:{cursor:t.sizeOfRegion>0?"pointer":"default"},"data-default-fill":t.color,"data-hover-fill":c.hsl(t.color).brighter(1).rgb(),onMouseOver:t.sizeOfRegion>0?U:void 0,onMouseOut:t.sizeOfRegion>0?W:void 0,onMouseMove:e.regionHoverHandlers({combination:n,sizeOfRegion:t.sizeOfRegion}),onClick:t.sizeOfRegion>0?e.regionClickHandlers({combination:n}):void 0,"data-test":"".concat(e.props.caseType).concat(t.combination.join(","),"VennRegion")})),i=!0,a=!1,l=void 0;try{for(var s,u=n[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var p=s.value;o=r.createElement("g",{clipPath:"url(#".concat(e.props.uid,"_circle_").concat(p,")")},o)}}catch(e){a=!0,l=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw l}}return[o]})),i=p.a.sortBy(this.layoutParams.sets,function(e){return-e.size}).map(function(e){var n=e.uid;return r.createElement("rect",{x:t[n].x,y:t[n].y,width:t[n].xLength,height:t[n].yLength,fill:"none",stroke:e.color,strokeWidth:2,rx:8})}),a=p.a.flattenDeep(this.layoutParams.regions.map(function(t){if(0===t.sizeOfRegion||!t.labelPosition)return[];var n=Object(w.g)(t.combination,e.props.selection.regions),o="".concat(t.sizeOfRegion.toString()).concat(n?" "+String.fromCharCode(10004):""),i=h()({text:o,fontFamily:"Arial",fontSize:"13px",lineHeight:1}),a=t.labelPosition,l=null;return n&&(l=r.createElement("rect",{x:a.x-i.width.value/2-4,y:a.y-i.height.value+3,width:i.width.value+8,height:i.height.value+4,fill:"yellow",rx:3,ry:3,pointerEvents:"none"})),[l,r.createElement("text",{x:a.x,y:a.y,style:{userSelect:"none",color:n?"black":Object(w.e)(t.color)},fontWeight:t.sizeOfRegion>0?"bold":"normal",pointerEvents:"none",textAnchor:"middle",alignmentBaseline:"middle","data-test":"".concat(e.props.caseType).concat(t.combination.join(","),"VennLabel")},o)]}));return r.createElement(r.Fragment,null,n,o,i,a)}},{key:"tooltipContent",get:function(){var e=this;if(!this.tooltipModel)return null;var t=this.tooltipModel.combination.map(function(t){return e.props.groups[t].uid}).map(function(t){return e.props.uidToGroup[t]});return r.createElement("div",{style:{width:300,whiteSpace:"normal"}},r.createElement("strong",null,this.tooltipModel.sizeOfRegion," ",Object(a.ub)(this.props.caseType,this.tooltipModel.sizeOfRegion)),r.createElement("br",null),"in only ",Object(w.f)(t,"and"),".")}}])&&L(n.prototype,o),i&&L(n,i),t}();H([l.observable.ref],q.prototype,"svg",void 0),H([l.observable.ref],q.prototype,"tooltipModel",void 0),H([l.observable],q.prototype,"mousePosition",void 0),H([s.default],q.prototype,"svgRef",null),H([l.computed],q.prototype,"layoutParams",null),H([l.computed],q.prototype,"svgElements",null),H([s.default],q.prototype,"resetSelection",null),H([s.default],q.prototype,"resetTooltip",null),H([l.computed],q.prototype,"tooltipContent",null);var z=q=H([o.observer],q),K=n(922),Q=n(924);function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ee=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":$(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},te=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=X(t).call(this,e))||"object"!==$(o)&&"function"!=typeof o?Z(r):o,Object.defineProperty(Z(n),"sampleSelection",{enumerable:!0,configurable:!0,writable:!0,value:{regions:[]}}),Object.defineProperty(Z(n),"patientSelection",{enumerable:!0,configurable:!0,writable:!0,value:{regions:[]}}),Object(l.makeObservable)(Z(n)),n}var n,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(t,r["Component"]),n=t,(o=[{key:"submitSampleOverlapGroup",value:function(e,t){this.props.store.addGroup(e,t),this.sampleSelection.regions=[]}},{key:"submitPatientOverlapGroup",value:function(e,t){this.props.store.addGroup(e,t),this.patientSelection.regions=[]}},{key:"changeSelectedSampleRegions",value:function(e){this.sampleSelection.regions=e}},{key:"changeSelectedPatientRegions",value:function(e){this.patientSelection.regions=e}},{key:"render",value:function(){return r.createElement("div",{style:{position:"relative",paddingBottom:"".concat(Math.max(this.sampleSelection.regions.length,this.patientSelection.regions.length)+1,"em")}},r.createElement("svg",{id:this.props.svgId||"",xmlns:"http://www.w3.org/2000/svg",width:this.chartWidth,height:this.chartHeight,role:"img",viewBox:"0 0 ".concat(this.chartWidth," ").concat(this.chartHeight)},r.createElement(i.VictoryLabel,{style:{fontWeight:"bold",fontFamily:"Verdana,Arial,sans-serif",textAnchor:"middle",userSelect:"none"},x:200,y:"1.2em",text:"Samples overlap"}),r.createElement(z,{uid:"samples",x:0,y:15,groups:this.props.sampleGroups,uidToGroup:this.props.uidToGroup,width:400,height:400,selection:this.sampleSelection,onChangeSelectedRegions:this.changeSelectedSampleRegions,caseType:"sample",onLayoutFailure:this.props.onLayoutFailure}),r.createElement(i.VictoryLabel,{style:{fontWeight:"bold",fontFamily:"Verdana,Arial,sans-serif",textAnchor:"middle",userSelect:"none"},x:200,dx:410,y:"1.2em",text:"Patients overlap"}),r.createElement(z,{uid:"patients",x:410,y:15,groups:this.props.patientGroups,uidToGroup:this.props.uidToGroup,width:400,height:400,selection:this.patientSelection,onChangeSelectedRegions:this.changeSelectedPatientRegions,caseType:"patient",onLayoutFailure:this.props.onLayoutFailure}),this.legendData.length>0&&r.createElement(i.VictoryLegend,{x:this.vennPlotAreaWidth+20,y:100,theme:a.a,labelComponent:r.createElement(Q.a,{maxLabelWidth:100,uidToGroup:this.props.uidToGroup,dy:"0.4em"}),standalone:!1,data:this.legendData})),[r.createElement(K.a,{store:this.props.store,includedRegions:this.sampleSelectedRegionsUids,style:{position:"absolute",left:0,top:420},submitGroup:this.submitSampleOverlapGroup,allGroupsInPlot:this.sampleGroupUids,caseType:"sample",width:400}),r.createElement(K.a,{store:this.props.store,includedRegions:this.patientSelectedRegionsUids,style:{position:"absolute",left:410,top:420},submitGroup:this.submitPatientOverlapGroup,allGroupsInPlot:this.patientGroupUids,caseType:"patient",width:400})])}},{key:"chartWidth",get:function(){return this.vennPlotAreaWidth+20+180}},{key:"chartHeight",get:function(){return 500}},{key:"sampleGroupUids",get:function(){return this.props.sampleGroups.map(function(e){return e.uid})}},{key:"patientGroupUids",get:function(){return this.props.patientGroups.map(function(e){return e.uid})}},{key:"legendData",get:function(){var e=this;return this.props.sampleGroups.map(function(t){return{name:t.uid,symbol:{fill:e.props.uidToGroup[t.uid].color,strokeOpacity:0,type:"square",size:6}}})}},{key:"vennPlotAreaWidth",get:function(){return 810}},{key:"sampleSelectedRegionsUids",get:function(){var e=this;return this.sampleSelection.regions.map(function(t){return t.map(function(t){return e.props.sampleGroups[t].uid})})}},{key:"patientSelectedRegionsUids",get:function(){var e=this;return this.patientSelection.regions.map(function(t){return t.map(function(t){return e.props.patientGroups[t].uid})})}}])&&Y(n.prototype,o),s&&Y(n,s),t}();ee([l.observable.shallow],te.prototype,"sampleSelection",void 0),ee([l.observable.shallow],te.prototype,"patientSelection",void 0),ee([l.computed],te.prototype,"chartWidth",null),ee([l.computed],te.prototype,"chartHeight",null),ee([l.action.bound],te.prototype,"submitSampleOverlapGroup",null),ee([l.action.bound],te.prototype,"submitPatientOverlapGroup",null),ee([l.action.bound],te.prototype,"changeSelectedSampleRegions",null),ee([l.action.bound],te.prototype,"changeSelectedPatientRegions",null),ee([l.computed],te.prototype,"sampleGroupUids",null),ee([l.computed],te.prototype,"patientGroupUids",null),ee([l.computed],te.prototype,"legendData",null),ee([l.computed],te.prototype,"vennPlotAreaWidth",null),ee([l.computed],te.prototype,"sampleSelectedRegionsUids",null),ee([l.computed],te.prototype,"patientSelectedRegionsUids",null),te=ee([o.observer],te);t.a=te},1165:function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(18),a=n(2),l=n(1),s=n(3),c=n(12),u=n(147);function p(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return{x:e>0?[n(0),r?n(Math.max(1,e-1)):e]:[0,0],y:t>0?[n(0),o?n(Math.max(1,t-1)):t]:[0,0]}}var d=n(29),f=n(17),h=n(5),m=n.n(h),y=n(814),b=n.n(y),g=n(220);function v(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20,o=(n=n||function(e,t){for(var n=0,r=1;e(n)>t;){if(n<Number.MIN_SAFE_INTEGER)throw new Error("Couldnt find lower bound");n-=r,r*=2}r=1;for(var o=0;e(o)<t;){if(o>Number.MAX_SAFE_INTEGER)throw new Error("Couldnt find upper bound");o+=r,r*=2}return[n,o]}(e,t))[0],i=n[1],a=(o+i)/2,l=r;l>0&&e(a)!==t;)e(a)>t?i=a:o=a,a=(o+i)/2,l-=1;return a}var _=n(840);function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var P=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":C(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},T=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},x=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=S(t).call(this,e))||"object"!==C(o)&&"function"!=typeof o?E(r):o,Object.defineProperty(E(n),"textElt",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object(a.makeObservable)(E(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,r["Component"]),n=t,(o=[{key:"ref",value:function(e){this.textElt=e}},{key:"render",value:function(){var e=this.props,t=(e.categoryCoordToGroup,e.dx),n=e.dy,o=e.maxLabelWidth,i=(e.datum,e.text,T(e,["categoryCoordToGroup","dx","dy","maxLabelWidth","datum","text"]));return r.createElement(r.Fragment,null,this.colorRectangle,r.createElement(_.a,w({text:this.group.name,textRef:this.ref,prefixTspans:this.group.ordinal.length>0?[r.createElement("tspan",null,"("),r.createElement("tspan",{fontWeight:"bold"},this.group.ordinal),r.createElement("tspan",null,") ")]:void 0,datum:this.group,tooltip:function(e){return r.createElement("div",null,Object(u.h)(e))},maxWidth:o,dy:n,dx:t},i)))}},{key:"group",get:function(){return this.props.categoryCoordToGroup(this.props.text)}},{key:"colorRectangle",get:function(){if(this.textElt){var e=this.textElt.getBBox();return r.createElement("rect",{x:e.x-10-5,y:e.y+(e.height-10)/2,fill:this.group.color,width:10,height:10})}return null}}])&&O(n.prototype,o),i&&O(n,i),t}();P([a.observable.ref],x.prototype,"textElt",void 0),P([a.computed],x.prototype,"group",null),P([a.action.bound],x.prototype,"ref",null),P([a.computed],x.prototype,"colorRectangle",null);var j=x=P([o.observer],x);function A(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var G=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},V=function(e){return r.createElement(i.Bar,R({className:"".concat(e.caseType,"_").concat(l.sortBy(e.datum.groups).map(function(e){return encodeURI(e.replace(/ /g,"_"))}).join("_"),"_bar")},e))},B=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=M(t).call(this,e))||"object"!==L(o)&&"function"!=typeof o?D(r):o,Object.defineProperty(D(n),"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(D(n),"tooltipModel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(D(n),"mouseEvents",{enumerable:!0,configurable:!0,writable:!0,value:n.makeMouseEvents()}),Object.defineProperty(D(n),"mousePosition",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0}}),Object(a.makeObservable)(D(n)),n}var n,c,h;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,r["Component"]),n=t,(c=[{key:"containerRef",value:function(e){this.container=e}},{key:"makeMouseEvents",value:function(){var e=this;return[{target:"data",eventHandlers:{onMouseOver:function(){return[{target:"data",mutation:function(t){return t.datum&&t.datum.dontShowTooltip||(e.tooltipModel=t),null}}]},onMouseOut:function(){return[{target:"data",mutation:function(){return e.tooltipModel=null,null}}]},onClick:function(){return[{target:"data",mutation:function(t){var n;return n=t.datum?t.datum.groups:t.data[0].groups,t.datum&&t.datum.notClickable||e.props.onChangeSelectedCombinations(Object(u.i)(n,e.props.selectedCombinations)),null}}]}}}]}},{key:"resetSelection",value:function(){this.props.onChangeSelectedCombinations([])}},{key:"barSeparation",value:function(){return.2*this.barWidth()}},{key:"barWidth",value:function(){return 10}},{key:"barChartHeight",value:function(){return 250}},{key:"domainPadding",value:function(){return 20}},{key:"categoryAxisDomainPadding",value:function(){return this.domainPadding()}},{key:"countAxisDomainPadding",value:function(){return this.domainPadding()}},{key:"chartDomainPadding",value:function(){return{y:this.countAxisDomainPadding(),x:this.categoryAxisDomainPadding()}}},{key:"categoryCoord",value:function(e){return e*(this.barWidth()+this.barSeparation())}},{key:"categoryCoordToGroup",value:function(e){var t=Math.round(v(this.categoryCoord,e,[0,this.usedGroups.length]));return this.usedGroups[t]}},{key:"formatNumericalTick",value:function(e,t,n){return Object(s.Db)(e,n)}},{key:"groupTick",value:function(e,t){return this.groupLabels[t]}},{key:"tooltipFunction",value:function(e){var t=this,n=l.map(e.groups,function(e){return t.props.uidToGroup[e]}),o=e.cases.length;return r.createElement("div",{style:{width:300,whiteSpace:"normal"}},r.createElement("strong",null,o," ",Object(s.ub)(this.props.caseType,o)),r.createElement("br",null),"in only ",Object(u.f)(n,"and"),".")}},{key:"onMouseMove",value:function(e){this.mousePosition.x=e.pageX,this.mousePosition.y=e.pageY}},{key:"lineStroke",value:function(e){return 0===e.length?"black":Object(u.g)(e[0].groups,this.props.selectedCombinations)?"yellow":"black"}},{key:"fill",value:function(e){return Object(u.g)(e.groups,this.props.selectedCombinations)&&!e.notClickable?"yellow":e.fill||"black"}},{key:"getChart",value:function(){return this.groupCombinationSets.length>0?r.createElement("div",{ref:this.containerRef,style:{width:this.svgWidth,height:this.svgHeight}},r.createElement("svg",{id:this.props.svgId||"",style:{width:this.svgWidth,height:this.svgHeight,pointerEvents:"all"},height:this.svgHeight,width:this.svgWidth,role:"img",viewBox:"0 0 ".concat(this.svgWidth," ").concat(this.svgHeight),onMouseMove:this.onMouseMove},r.createElement("g",null,this.title),r.createElement("g",{transform:"translate(".concat(this.leftPadding,", ").concat(this.topPadding,")")},r.createElement(i.VictoryChart,{theme:s.a,width:this.chartWidth,height:this.barChartHeight(),standalone:!1,domainPadding:this.chartDomainPadding(),domain:this.barPlotDomain,singleQuadrantDomainPadding:{y:!0,x:!1}},r.createElement(i.VictoryAxis,{orientation:"bottom",offsetY:50,crossAxis:!1,tickValues:this.categoryTickValues,style:{ticks:{size:0},tickLabels:{fontSize:0},grid:{stroke:0}}}),r.createElement(i.VictoryAxis,{orientation:"left",offsetX:50,dependentAxis:!0,label:"Overlap count",tickFormat:this.formatNumericalTick,style:{grid:{stroke:0}},axisLabelComponent:r.createElement(i.VictoryLabel,{dy:-40})}),r.createElement(i.VictoryBar,{style:{data:{fill:this.fill,width:this.barWidth()}},data:this.barPlotData}),r.createElement(i.VictoryBar,{style:{data:{fillOpacity:0,width:this.barWidth(),cursor:"pointer"}},data:this.barPlotHitzoneData,events:this.mouseEvents,dataComponent:r.createElement(V,{caseType:this.props.caseType})}))),r.createElement("g",{transform:"translate(".concat(this.leftPadding,", ").concat(this.scatterPlotTopPadding,")")},r.createElement(i.VictoryChart,{theme:s.a,width:this.chartWidth,height:this.scatterChartHeight,standalone:!1,domainPadding:this.chartDomainPadding(),domain:this.scatterPlotDomain,singleQuadrantDomainPadding:{y:!0,x:!1}},r.createElement(i.VictoryAxis,{orientation:"bottom",offsetY:50,crossAxis:!1,tickValues:this.categoryTickValues,style:{axis:{strokeWidth:0},ticks:{size:0,strokeWidth:0},tickLabels:{fill:"none"},grid:{stroke:0}}}),r.createElement(i.VictoryAxis,{orientation:"left",offsetX:50,dependentAxis:!0,crossAxis:!1,tickLabelComponent:r.createElement(j,{categoryCoordToGroup:this.categoryCoordToGroup,maxLabelWidth:200,dy:"0.4em"}),tickValues:this.groupTickValues,style:{axis:{strokeWidth:0},ticks:{size:0,strokeWidth:0},grid:{stroke:0}}}),r.createElement(i.VictoryScatter,{size:this.barWidth()/2,style:{data:{fill:this.fill,cursor:function(e){return e.cursor}}},data:this.scatterData,events:this.mouseEvents}),this.getGroupIntersectionLines)))):r.createElement("span",null,"No data to plot.")}},{key:"render",value:function(){return r.createElement("div",null,r.createElement(o.Observer,null,this.getChart),this.tooltipComponent)}},{key:"usedGroups",get:function(){var e=l.chain(this.groupCombinationSets).flatMap(function(e){return e.groups}).keyBy().value();return l.chain(this.props.uidToGroup).reduce(function(t,n,r){return r in e&&t.push(n),t},[]).orderBy(function(e){return e.nameWithOrdinal},"desc").value()}},{key:"groupLabels",get:function(){return l.map(this.usedGroups,function(e){return Object(s.Gb)(e.nameWithOrdinal,100,"Arial","13px")})}},{key:"chartWidth",get:function(){return this.barChartExtent}},{key:"scatterChartHeight",get:function(){return this.scatterChartExtent}},{key:"title",get:function(){return this.props.title?r.createElement(i.VictoryLabel,{style:{fontWeight:"bold",fontFamily:"Verdana,Arial,sans-serif",textAnchor:"middle"},x:this.svgWidth/2,y:"1.2em",text:this.props.title}):null}},{key:"scatterChartExtent",get:function(){return this.usedGroups.length>0?this.categoryCoord(this.usedGroups.length-1)+2*this.categoryAxisDomainPadding()+100:100}},{key:"barChartExtent",get:function(){return this.groupCombinationSets.length>0?this.categoryCoord(this.groupCombinationSets.length-1)+2*this.categoryAxisDomainPadding()+100:100}},{key:"biggestCategoryLabelSize",get:function(){var e=Math.max.apply(Math,A(l.map(this.usedGroups,function(e){return Object(s.mb)(e.nameWithOrdinal,s.X.fontFamily,s.X.fontSize+"px")})));return Math.min(e,200)}},{key:"svgWidth",get:function(){return Math.max(this.leftPadding+this.chartWidth+this.rightPadding,320)}},{key:"svgHeight",get:function(){return this.topPadding+this.barChartHeight()+this.scatterChartHeight+this.bottomPadding-100}},{key:"leftPadding",get:function(){return this.biggestCategoryLabelSize}},{key:"rightPadding",get:function(){return 50}},{key:"topPadding",get:function(){return 0}},{key:"bottomPadding",get:function(){return 10}},{key:"groupCombinationSets",get:function(){return l.orderBy(this.props.groups.map(function(e){return{groups:Object.keys(e.key).filter(function(t){return e.key[t]}),cases:e.value}}),function(e){return e.cases.length},"desc")}},{key:"scatterData",get:function(){var e=this;return l.flatMap(this.groupCombinationSets,function(t,n){return l.map(e.usedGroups,function(r,o){var i=l.includes(t.groups,r.uid);return Object.assign({x:e.categoryCoord(n),y:e.categoryCoord(o),fill:i?"#000000":"#efefef",dontShowTooltip:!i,cursor:i?"pointer":"default",notClickable:!i},t)})})}},{key:"barPlotData",get:function(){var e=this;return l.map(this.groupCombinationSets,function(t,n){return Object.assign({x:e.categoryCoord(n),y:t.cases.length},t)})}},{key:"barPlotHitzoneData",get:function(){var e=this.barPlotDomain.y[1]/15;return this.barPlotData.map(function(t){return Object.assign({},t,{y:Math.max(t.y,e)})})}},{key:"getGroupIntersectionLines",get:function(){var e=this,t=l.map(this.usedGroups,function(e){return e.uid});return l.flatMap(this.groupCombinationSets,function(n,o){var a=l.map(n.groups,function(r){var i=l.indexOf(t,r);return Object.assign({x:e.categoryCoord(o),y:e.categoryCoord(i)},n)});return[r.createElement(i.VictoryLine,{style:{data:{stroke:e.lineStroke,strokeWidth:2,strokeLinecap:"round"}},data:a}),r.createElement(i.VictoryLine,{style:{data:{strokeOpacity:0,strokeWidth:e.barWidth(),strokeLinecap:"round",cursor:"pointer"}},data:a,events:e.mouseEvents})]})}},{key:"barPlotDomain",get:function(){var e=l.max(l.map(this.groupCombinationSets,function(e){return e.cases.length}))||0;return p(this.groupCombinationSets.length,e,this.categoryCoord,!0,!1)}},{key:"scatterPlotDomain",get:function(){return p(this.groupCombinationSets.length,l.keys(this.groupLabels).length,this.categoryCoord)}},{key:"categoryTickValues",get:function(){var e=this;return this.groupCombinationSets.map(function(t,n){return e.categoryCoord(n)})}},{key:"groupTickValues",get:function(){var e=this;return l.map(this.groupLabels,function(t,n){return e.categoryCoord(n)})}},{key:"scatterPlotTopPadding",get:function(){return this.barChartHeight()-100}},{key:"tooltipComponent",get:function(){if(this.tooltipModel){var e=this.mousePosition.x>g.a.size.width-400?"left":"right";return d.createPortal(r.createElement(f.Popover,{arrowOffsetTop:17,className:m()("cbioportal-frontend","cbioTooltip",b.a.Tooltip),positionLeft:this.mousePosition.x+("left"===e?-8:8),positionTop:this.mousePosition.y-17,style:{transform:"left"===e?"translate(-100%,0%)":void 0,maxWidth:400},placement:e},this.tooltipFunction(this.tooltipModel.datum||this.tooltipModel.data[0])),document.body)}return null}}])&&I(n.prototype,c),h&&I(n,h),t}();G([a.observable.ref],B.prototype,"tooltipModel",void 0),G([a.observable],B.prototype,"mousePosition",void 0),G([c.default],B.prototype,"containerRef",null),G([c.default],B.prototype,"resetSelection",null),G([a.computed],B.prototype,"usedGroups",null),G([a.computed],B.prototype,"groupLabels",null),G([a.computed],B.prototype,"chartWidth",null),G([a.computed],B.prototype,"scatterChartHeight",null),G([a.computed],B.prototype,"scatterChartExtent",null),G([a.computed],B.prototype,"barChartExtent",null),G([a.computed],B.prototype,"biggestCategoryLabelSize",null),G([a.computed],B.prototype,"svgWidth",null),G([a.computed],B.prototype,"svgHeight",null),G([a.computed],B.prototype,"leftPadding",null),G([a.computed],B.prototype,"rightPadding",null),G([a.computed],B.prototype,"topPadding",null),G([a.computed],B.prototype,"bottomPadding",null),G([c.default],B.prototype,"categoryCoord",null),G([c.default],B.prototype,"categoryCoordToGroup",null),G([a.computed],B.prototype,"groupCombinationSets",null),G([a.computed],B.prototype,"scatterData",null),G([a.computed],B.prototype,"barPlotData",null),G([a.computed],B.prototype,"barPlotHitzoneData",null),G([a.computed],B.prototype,"getGroupIntersectionLines",null),G([a.computed],B.prototype,"barPlotDomain",null),G([a.computed],B.prototype,"scatterPlotDomain",null),G([a.computed],B.prototype,"categoryTickValues",null),G([a.computed],B.prototype,"groupTickValues",null),G([c.default],B.prototype,"formatNumericalTick",null),G([c.default],B.prototype,"groupTick",null),G([a.computed],B.prototype,"scatterPlotTopPadding",null),G([a.computed],B.prototype,"tooltipComponent",null),G([c.default],B.prototype,"onMouseMove",null),G([c.default],B.prototype,"lineStroke",null),G([c.default],B.prototype,"fill",null),G([c.default],B.prototype,"getChart",null);var F=B=G([o.observer],B),H=n(922);function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Q=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":K(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Y=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=W(t).call(this,e))||"object"!==K(o)&&"function"!=typeof o?q(r):o,Object.defineProperty(q(n),"sampleSelection",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(q(n),"patientSelection",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(q(n),"sampleUpset",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(q(n),"patientUpset",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object(a.makeObservable)(q(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(t,r["Component"]),n=t,(o=[{key:"changeSelectedSampleRegions",value:function(e){this.sampleSelection=e}},{key:"changeSelectedPatientRegions",value:function(e){this.patientSelection=e}},{key:"sampleUpsetRef",value:function(e){this.sampleUpset=e}},{key:"patientUpsetRef",value:function(e){this.patientUpset=e}},{key:"submitSampleOverlapGroup",value:function(e,t){this.props.store.addGroup(e,t),this.sampleSelection=[]}},{key:"submitPatientOverlapGroup",value:function(e,t){this.props.store.addGroup(e,t),this.patientSelection=[]}},{key:"render",value:function(){return r.createElement("div",{style:{position:"relative",display:"".concat(this.props.sideBySide?"flex":"block"),maxWidth:this.props.maxWidth,overflow:"auto hidden"}},r.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",paddingBottom:20,marginRight:this.props.sideBySide?10:void 0}},r.createElement(F,{ref:this.sampleUpsetRef,groups:this.props.samplesVennPartition,uidToGroup:this.props.uidToGroup,caseType:"sample",title:"Samples overlap",onChangeSelectedCombinations:this.changeSelectedSampleRegions,selectedCombinations:this.sampleSelection}),this.sampleUpset&&this.props.samplesVennPartition.length>0&&r.createElement(H.a,{store:this.props.store,includedRegions:this.sampleSelection,submitGroup:this.submitSampleOverlapGroup,allGroupsInPlot:Object.keys(this.props.samplesVennPartition[0].key),caseType:"sample",width:this.sampleUpset.svgWidth})),r.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},r.createElement(F,{ref:this.patientUpsetRef,groups:this.props.patientsVennPartition,uidToGroup:this.props.uidToGroup,caseType:"patient",title:"Patients overlap",onChangeSelectedCombinations:this.changeSelectedPatientRegions,selectedCombinations:this.patientSelection}),this.patientUpset&&this.props.patientsVennPartition.length>0&&r.createElement(H.a,{store:this.props.store,includedRegions:this.patientSelection,submitGroup:this.submitPatientOverlapGroup,allGroupsInPlot:Object.keys(this.props.patientsVennPartition[0].key),caseType:"patient",width:this.patientUpset.svgWidth})))}}])&&U(n.prototype,o),i&&U(n,i),t}();Q([a.observable.shallow],Y.prototype,"sampleSelection",void 0),Q([a.observable.shallow],Y.prototype,"patientSelection",void 0),Q([a.observable.ref],Y.prototype,"sampleUpset",void 0),Q([a.observable.ref],Y.prototype,"patientUpset",void 0),Q([a.action.bound],Y.prototype,"changeSelectedSampleRegions",null),Q([a.action.bound],Y.prototype,"changeSelectedPatientRegions",null),Q([c.default],Y.prototype,"sampleUpsetRef",null),Q([c.default],Y.prototype,"patientUpsetRef",null),Q([a.action.bound],Y.prototype,"submitSampleOverlapGroup",null),Q([a.action.bound],Y.prototype,"submitPatientOverlapGroup",null),Y=Q([o.observer],Y);t.a=Y},1167:function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(12),a=n(72),l=n(2),s=n(174),c=n(1),u=n.n(c),p=n(73),d=n(56),f=n(45),h=n(3),m=n(7);function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var w,O=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":_(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};!function(e){e.CLINICAL_ATTRIBUTE_NAME="Clinical Attribute",e.CLINICAL_ATTRIBUTE_TYPE="Attribute Type",e.STATISTICAL_TEST_NAME="Statistical Test",e.SCORE="Score",e.P_VALUE="p-Value",e.Q_VALUE="q-Value"}(w||(w={}));var S=[{name:w.CLINICAL_ATTRIBUTE_NAME,render:function(e){return r.createElement("span",{"data-test":e.clinicalAttribute.displayName,style:{fontWeight:e.qValue<.05?"bold":"normal"}},e.clinicalAttribute.displayName)},filter:function(e,t,n){return e.clinicalAttribute.displayName.toUpperCase().indexOf(n)>-1},sortBy:function(e){return e.clinicalAttribute.displayName},download:function(e){return e.clinicalAttribute.displayName},width:160,visible:!0},{name:w.CLINICAL_ATTRIBUTE_TYPE,render:function(e){return r.createElement("span",null,e.clinicalAttribute.patientAttribute?"Patient":"Sample")},filter:function(e,t,n){return(e.clinicalAttribute.patientAttribute?"Patient":"Sample").toUpperCase().indexOf(n)>-1},sortBy:function(e){return e.clinicalAttribute.patientAttribute?"Patient":"Sample"},download:function(e){return e.clinicalAttribute.patientAttribute?"Patient":"Sample"},width:100,visible:!0},{name:w.STATISTICAL_TEST_NAME,render:function(e){return r.createElement("span",{style:{whiteSpace:"nowrap"}},e.method)},filter:function(e,t,n){return e.method.toUpperCase().indexOf(n)>-1},sortBy:function(e){return e.method},download:function(e){return e.method},width:130,visible:!0},{name:w.P_VALUE,render:function(e){return r.createElement("span",{style:{whiteSpace:"nowrap",fontWeight:e.qValue<.05?"bold":"normal"}},Object(f.g)(e.pValue,3,.01,-10))},sortBy:function(e){return e.pValue},download:function(e){return Object(d.b)(e.pValue,3,.01)},width:100,tooltip:r.createElement("span",null,"p-value of null Hypothesis, derived from Chi-Squared test or Kruskal-Wallis test"),visible:!0},{name:w.Q_VALUE,render:function(e){return r.createElement("span",{style:{whiteSpace:"nowrap",fontWeight:e.qValue<.05?"bold":"normal"}},Object(f.g)(e.qValue,3,.01,-10))},sortBy:function(e){return e.qValue},download:function(e){return Object(d.b)(e.qValue,3,.01)},width:100,tooltip:r.createElement("span",null,"Derived from Benjamini-Hochberg FDR correction procedure."),visible:!0}],E=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=b(t).call(this,e))||"object"!==_(o)&&"function"!=typeof o?g(r):o,Object.defineProperty(g(n),"columnVisibility",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object(l.makeObservable)(g(n)),n.columnVisibility=n.initColumnVisibility(),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,r["Component"]),n=t,(o=[{key:"onRowClick",value:function(e){this.props.dataStore.setHighlighted(e)}},{key:"initColumnVisibility",value:function(){var e=c.keyBy([w.STATISTICAL_TEST_NAME,w.P_VALUE,w.Q_VALUE],function(e){return e});return c.mapValues(c.keyBy(S,function(e){return e.name}),function(t){return m.b.serverConfig.survival_show_p_q_values_in_survival_type_table?t.visible:!(t.name in e)})}},{key:"onColumnToggled",value:function(e,t){this.columnVisibility=Object(h.Eb)(this.columnVisibility,e,t)}},{key:"render",value:function(){return r.createElement(p.b,{columns:S,initialSortColumn:w.Q_VALUE,initialSortDirection:"asc",showColumnVisibility:!0,columnVisibility:this.columnVisibility,columnVisibilityProps:{onColumnToggled:this.onColumnToggled},dataStore:this.props.dataStore,onRowClick:this.onRowClick,paginationProps:{itemsPerPageOptions:[20]},initialItemsPerPage:20,copyDownloadProps:{showCopy:!1}})}}])&&y(n.prototype,o),i&&y(n,i),t}();O([i.default],E.prototype,"onRowClick",null),O([l.observable],E.prototype,"columnVisibility",void 0),O([i.default],E.prototype,"onColumnToggled",null);var k=E=O([o.observer],E),C=n(6),P=n(13),T=n(8),x=n(947),j=n.n(x),A=n(1100),I=n.n(A);function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var G=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},V=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=D(t).call(this,e))||"object"!==L(o)&&"function"!=typeof o?N(r):o,Object.defineProperty(N(n),"scrollbarEl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(N(n),"visible",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(N(n),"handleWidth",{enumerable:!0,configurable:!0,writable:!0,value:"10%"}),Object(l.makeObservable)(N(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(t,r["Component"]),n=t,(o=[{key:"doScroll",value:function(e){this.overflow>0&&(this.scrollEl.style.left=e*this.overflow*-1+"px")}},{key:"componentDidMount",value:function(){this.updateScrollbar()}},{key:"componentDidUpdate",value:function(){this.updateScrollbar()}},{key:"updateScrollbar",value:function(){var e=this;setTimeout(function(){e.overflow>0&&Object(l.runInAction)(function(){e.visible=!0;var t=e.scrollEl.parentNode.offsetWidth/e.scrollEl.offsetWidth;e.handleWidth=75*t+"%"})},1)}},{key:"handleDragEvent",value:function(e,t){var n=t.node,r=t.x/(n.parentNode.offsetWidth-n.offsetWidth);r=(r=r>1?1:r)<0?0:r,this.props.onScroll&&this.props.onScroll({percentage:r}),this.doScroll(r)}},{key:"render",value:function(){var e=this,t=Object.assign({},{visibility:this.visible?"visible":"hidden"},this.props.style);return r.createElement("div",{className:I.a.scrollbar,style:t,ref:function(t){return e.scrollbarEl=t}},r.createElement(j.a,{bounds:"parent",onDrag:this.handleDragEvent},r.createElement("div",{className:I.a.handle,style:{width:this.handleWidth}})))}},{key:"scrollEl",get:function(){return this.props.getScrollEl()}},{key:"overflow",get:function(){return this.scrollEl.offsetWidth-this.scrollEl.parentNode.offsetWidth}}])&&M(n.prototype,o),i&&M(n,i),t}();G([l.observable],V.prototype,"visible",void 0),G([l.observable],V.prototype,"handleWidth",void 0),G([i.default],V.prototype,"handleDragEvent",null);var B=V=G([o.observer],V),F=n(339),H=n(28),U=n(49),W=n(340),q=n(175),z=n(118),K=n(337),Q=n(20),Y=n(328),X=n(75),Z=n(99);function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $(e,t,n){return t&&J(e.prototype,t),n&&J(e,n),e}function ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function te(e,t){return!t||"object"!==ae(t)&&"function"!=typeof t?ne(e):t}function ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ae(e){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var le,se=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ae(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ce=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function l(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,l)}s((r=r.apply(e,t||[])).next())})},ue="clinical-plot-svg",pe=function(e){function t(){return ee(this,t),te(this,re(t).apply(this,arguments))}return oe(t,F["a"]),t}(),de=function(e){function t(e,n,r){var o;return ee(this,t),o=te(this,re(t).call(this,e)),Object.defineProperty(ne(o),"setHighlighted",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(ne(o),"reactionDisposer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),o.dataHighlighter=function(e){var t=n();return!(!t||e.clinicalAttribute.clinicalAttributeId!==t.clinicalAttribute.clinicalAttributeId)},o.reactionDisposer=Object(l.autorun)(function(){o.sortMetric&&o.sortedFilteredData.length>0&&!n()&&o.setHighlighted(o.sortedFilteredData[0])}),o}return oe(t,s["a"]),$(t,[{key:"destroy",value:function(){this.reactionDisposer()}}]),t}();!function(e){e.Bar="Bar",e.StackedBar="StackedBar",e.PercentageStackedBar="PercentageStackedBar"}(le||(le={}));var fe=[{value:le.Bar,label:"Bar chart"},{value:le.StackedBar,label:"Stacked bar chart"},{value:le.PercentageStackedBar,label:"100% stacked bar chart"}],he=function(e){function t(e){var n;return ee(this,t),n=te(this,re(t).call(this,e)),Object.defineProperty(ne(n),"highlightedRow",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(ne(n),"scrollPane",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(ne(n),"tabUI",{enumerable:!0,configurable:!0,writable:!0,value:Object(z.a)({await:function(){var e=[n.props.store.activeGroups];return n.props.store.activeGroups.isComplete&&n.props.store.activeGroups.result.length<2||e.push(n.overlapUI),e},render:function(){var e=[];return n.props.store.activeGroups.result.length<2?e.push(r.createElement("span",null,Object(U.b)(n.props.store._activeGroupsNotOverlapRemoved.result.length))):(e.push(r.createElement("div",{className:"tabMessageContainer"},Object(U.y)(),r.createElement(K.a,{store:n.props.store}))),e.push(n.overlapUI.component)),r.createElement("div",{"data-test":"ComparisonPageClinicalTabDiv"},e)},renderPending:function(){return r.createElement(a.a,{isLoading:!0,center:!0,size:"big"})},renderError:function(){return r.createElement(Y.a,null)}})}),Object.defineProperty(ne(n),"overlapUI",{enumerable:!0,configurable:!0,writable:!0,value:Object(z.a)({await:function(){return[n.props.store.clinicalDataEnrichmentsWithQValues]},render:function(){return r.createElement("div",{className:"clearfix",style:{display:"flex"}},r.createElement("div",{style:{width:"600px"}},r.createElement(k,{dataStore:n.tableDataStore})),r.createElement("div",{style:{marginLeft:"10px"}},n.getUtilitiesMenu,n.plot))},renderPending:function(){return r.createElement(a.a,{isLoading:!0,centerRelativeToContainer:!0,size:"big"})},renderError:function(){return r.createElement(Y.a,null)}})}),Object.defineProperty(ne(n),"tableDataStore",{enumerable:!0,configurable:!0,writable:!0,value:new de(function(){var e=Object(Z.e)(n.props.store.survivalClinicalAttributesPrefix.result||[]),t={AGE_LAST_FU_YEARS:"AGE_LAST_FU_YEARS",BIRTH_YEAR:"BIRTH_YEAR"};return n.props.store.clinicalDataEnrichmentsWithQValues.result.filter(function(n){return!(n.clinicalAttribute.clinicalAttributeId in e||n.clinicalAttribute.clinicalAttributeId in t)})},function(){return n.highlightedRow},function(e){n.highlightedRow=e,n.swapAxes=!1,n.logScale=!1})}),Object.defineProperty(ne(n),"logScale",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(ne(n),"logScaleFunction",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(ne(n),"swapAxes",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(ne(n),"horizontalBars",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(ne(n),"clinicalDataPromise",{enumerable:!0,configurable:!0,writable:!0,value:Object(h.vb)({await:function(){return[n.props.store.patientKeyToSamples,n.props.store.activeGroups]},invoke:function(){return ce(ne(n),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,o,i,a,l,s,c,p,d,f,h,m,y,b,g,v,_,w,O,S,E,k,C,T,x,j,A,I,M,D,N,R,L,G,V,B,F,H;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={data:[],datatype:"string"},!this.highlightedRow){e.next=117;break}return n=this.highlightedRow.clinicalAttribute,r=this.props.store.patientKeyToSamples.result,o=u.a.flatMap(this.props.store.activeGroups.result,function(e){return u.a.flatMap(e.studies,function(e){return e.samples.map(function(t){return{studyId:e.id,entityId:t}})})}),i=u.a.flatMap(this.props.store.activeGroups.result,function(e){return u.a.flatMap(e.studies,function(e){return e.patients.map(function(t){return{studyId:e.id,entityId:t}})})}),e.next=8,P.a.fetchClinicalDataUsingPOST({clinicalDataType:n.patientAttribute?"PATIENT":"SAMPLE",clinicalDataMultiStudyFilter:{attributeIds:[n.clinicalAttributeId],identifiers:n.patientAttribute?i:o}});case 8:for(a=e.sent,l={},s=!0,c=!1,p=void 0,e.prev=13,d=a[Symbol.iterator]();!(s=(f=d.next()).done);s=!0)h=f.value,m=h.value.toLowerCase(),void 0===l[m]&&(l[m]=h.value);e.next=21;break;case 17:e.prev=17,e.t0=e.catch(13),c=!0,p=e.t0;case 21:e.prev=21,e.prev=22,s||null==d.return||d.return();case 24:if(e.prev=24,!c){e.next=27;break}throw p;case 27:return e.finish(24);case 28:return e.finish(21);case 29:if(t.datatype=n.datatype.toLowerCase(),y=t.data,!n.patientAttribute){e.next=78;break}b=!0,g=!1,v=void 0,e.prev=35,_=a[Symbol.iterator]();case 37:if(b=(w=_.next()).done){e.next=62;break}for(O=w.value,S=r[O.uniquePatientKey],E=!0,k=!1,C=void 0,e.prev=43,T=S[Symbol.iterator]();!(E=(x=T.next()).done);E=!0)j=x.value,y.push({uniqueSampleKey:j.uniqueSampleKey,value:l[O.value.toLowerCase()]});e.next=51;break;case 47:e.prev=47,e.t1=e.catch(43),k=!0,C=e.t1;case 51:e.prev=51,e.prev=52,E||null==T.return||T.return();case 54:if(e.prev=54,!k){e.next=57;break}throw C;case 57:return e.finish(54);case 58:return e.finish(51);case 59:b=!0,e.next=37;break;case 62:e.next=68;break;case 64:e.prev=64,e.t2=e.catch(35),g=!0,v=e.t2;case 68:e.prev=68,e.prev=69,b||null==_.return||_.return();case 71:if(e.prev=71,!g){e.next=74;break}throw v;case 74:return e.finish(71);case 75:return e.finish(68);case 76:e.next=97;break;case 78:for(A=!0,I=!1,M=void 0,e.prev=81,D=a[Symbol.iterator]();!(A=(N=D.next()).done);A=!0)R=N.value,y.push({uniqueSampleKey:R.uniqueSampleKey,value:l[R.value.toLowerCase()]});e.next=89;break;case 85:e.prev=85,e.t3=e.catch(81),I=!0,M=e.t3;case 89:e.prev=89,e.prev=90,A||null==D.return||D.return();case 92:if(e.prev=92,!I){e.next=95;break}throw M;case 95:return e.finish(92);case 96:return e.finish(89);case 97:if("number"!==n.datatype.toLowerCase()){e.next=117;break}for(L=!0,G=!1,V=void 0,e.prev=101,B=y[Symbol.iterator]();!(L=(F=B.next()).done);L=!0)(H=F.value).value=parseFloat(H.value);e.next=109;break;case 105:e.prev=105,e.t4=e.catch(101),G=!0,V=e.t4;case 109:e.prev=109,e.prev=110,L||null==B.return||B.return();case 112:if(e.prev=112,!G){e.next=115;break}throw V;case 115:return e.finish(112);case 116:return e.finish(109);case 117:return e.abrupt("return",Promise.resolve(t));case 118:case"end":return e.stop()}},e,this,[[13,17,21,29],[22,,24,28],[35,64,68,76],[43,47,51,59],[52,,54,58],[69,,71,75],[81,85,89,97],[90,,92,96],[101,105,109,117],[110,,112,116]])}))}})}),Object.defineProperty(ne(n),"groupMembershipAxisData",{enumerable:!0,configurable:!0,writable:!0,value:Object(h.vb)({await:function(){return[n.props.store.sampleMap,n.props.store.activeGroups]},invoke:function(){return ce(ne(n),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.a.map(this.props.store.activeGroups.result,function(e){return e.nameWithOrdinal}),n={data:[],datatype:"string",categoryOrder:t},r=this.props.store.sampleMap.result||new X.a,o=u.a.reduce(this.props.store.activeGroups.result,function(e,t){return t.studies.forEach(function(n){n.samples.forEach(function(o){if(r.has({studyId:n.id,sampleId:o})){var i=r.get({studyId:n.id,sampleId:o}).uniqueSampleKey;void 0===e[i]&&(e[i]={uniqueSampleKey:i,value:[]}),e[i].value.push(t.nameWithOrdinal)}})}),e},{}),n.data=u.a.values(o),e.abrupt("return",Promise.resolve(n));case 6:case"end":return e.stop()}},e,this)}))}})}),Object.defineProperty(ne(n),"boxPlotData",{enumerable:!0,configurable:!0,writable:!0,value:Object(h.vb)({await:function(){return[n.horzAxisDataPromise,n.vertAxisDataPromise,n.props.store.sampleKeyToSample]},invoke:function(){var e=n.horzAxisDataPromise.result,t=n.vertAxisDataPromise.result;if(e&&t){var r,o,i;if(Object(T.y)(e)&&Object(T.z)(t))r=t,o=e,i=!0;else{if(!Object(T.z)(e)||!Object(T.y)(t))return Promise.resolve({horizontal:!1,data:[]});r=e,o=t,i=!1}return Promise.resolve({horizontal:i,data:Object(T.F)(r,o,n.props.store.sampleKeyToSample.result,{},void 0,void 0)})}return new Promise(function(){return 0})}})}),Object.defineProperty(ne(n),"plotType",{enumerable:!0,configurable:!0,writable:!0,value:le.PercentageStackedBar}),Object(l.makeObservable)(ne(n)),n}return oe(t,r["Component"]),$(t,[{key:"getScrollPane",value:function(){return this.scrollPane}},{key:"onClickLogScale",value:function(){if(this.logScale=!this.logScale,this.logScale){this.logScaleFunction={label:"log2",fLogScale:function(e,t){return Math.log2(Math.max(e,.01))},fInvLogScale:function(e){return Math.pow(2,e)}}}else this.logScaleFunction=void 0}},{key:"onClickSwapAxes",value:function(){this.swapAxes=!this.swapAxes}},{key:"onClickhorizontalBars",value:function(){this.horizontalBars=!this.horizontalBars}},{key:"getSvg",value:function(){return document.getElementById(ue)}},{key:"assignScrollPaneRef",value:function(e){this.scrollPane=e}},{key:"onPlotTypeSelect",value:function(e){this.plotType=e.value}},{key:"toolbar",value:function(){return r.createElement("div",{style:{textAlign:"center",position:"relative"}},r.createElement(h.j,{getSvg:this.getSvg,filename:ue,dontFade:!0,type:"button",style:{position:"absolute",right:0,top:0}}))}},{key:"componentWillUnmount",value:function(){this.tableDataStore.destroy()}},{key:"render",value:function(){return this.tabUI.component}},{key:"showLogScaleControls",get:function(){return"number"===this.highlightedRow.clinicalAttribute.datatype.toLowerCase()}},{key:"vertAxisDataPromise",get:function(){return this.swapAxes?this.groupMembershipAxisData:this.clinicalDataPromise}},{key:"horzAxisDataPromise",get:function(){return this.swapAxes?this.clinicalDataPromise:this.groupMembershipAxisData}},{key:"horzLabel",get:function(){return this.swapAxes?"".concat(this.highlightedRow.clinicalAttribute.displayName).concat(this.logScale?" (log2)":""):"Group"}},{key:"vertLabel",get:function(){return this.swapAxes?"Group":"".concat(this.highlightedRow.clinicalAttribute.displayName).concat(this.logScale?" (log2)":"")}},{key:"scatterPlotTooltip",get:function(){var e=this;return function(t){var n=r.createElement("span",null);return e.boxPlotData.isComplete&&(n=Object(T.k)(t,e.props.store.activeStudyIdToStudy.result,e.boxPlotData.result.horizontal)),n}}},{key:"boxPlotTooltip",get:function(){var e=this;return function(t){return r.createElement("table",{className:"table table-striped"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{colSpan:2},e.boxPlotData.result.data[t.eventKey].label))),r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",null,"Maximum"),r.createElement("td",null,t.max)),r.createElement("tr",null,r.createElement("td",null,"75% (q3)"),r.createElement("td",null,t.q3)),r.createElement("tr",null,r.createElement("td",null,"Median"),r.createElement("td",null,t.median)),r.createElement("tr",null,r.createElement("td",null,"25% (q1)"),r.createElement("td",null,t.q1)),r.createElement("tr",null,r.createElement("td",null,"Minimum"),r.createElement("td",null,t.min))))}}},{key:"categoryToColor",get:function(){return u.a.reduce(this.props.store.uidToGroup.result,function(e,t){return e[t.nameWithOrdinal]=t.color,e},Q.r)}},{key:"getUtilitiesMenu",get:function(){return this.highlightedRow?r.createElement("div",{style:{marginBottom:"10px"}},!this.showLogScaleControls&&r.createElement("div",{className:"form-group",style:{display:"flex",alignItems:"center"}},r.createElement("label",null,"Plot Type"),r.createElement("div",{style:{width:240,marginLeft:5},"data-test":"plotTypeSelector"},r.createElement(q.default,{name:"discrete-vs-discrete-plot-type",value:this.plotType,onChange:this.onPlotTypeSelect,options:fe,clearable:!1,searchable:!0}))),r.createElement("div",null,r.createElement("label",{className:"checkbox-inline"},r.createElement("input",{type:"checkbox",checked:this.swapAxes,onClick:this.onClickSwapAxes,"data-test":"SwapAxes"}),"Swap Axes"),!this.showLogScaleControls&&r.createElement("label",{className:"checkbox-inline"},r.createElement("input",{type:"checkbox",name:"horizontalBars",checked:this.horizontalBars,onClick:this.onClickhorizontalBars,"data-test":"HorizontalBars"}),"Horizontal Bars"),this.showLogScaleControls&&r.createElement("label",{className:"checkbox-inline"},r.createElement("input",{type:"checkbox",checked:this.logScale,onClick:this.onClickLogScale,"data-test":"logScale"}),"Log Scale"))):r.createElement("span",null)}},{key:"plot",get:function(){if(0===this.tableDataStore.allData.length||!this.highlightedRow)return r.createElement("span",null);var e=[this.horzAxisDataPromise,this.vertAxisDataPromise],t=C.Z.apply(void 0,e),n=this.plotType===le.PercentageStackedBar,i=n||this.plotType===le.StackedBar;switch(t){case"pending":return r.createElement(a.a,{center:!0,isLoading:!0,size:"big"});case"error":return r.createElement("span",null,"Error loading plot data.");default:if(!this.horzAxisDataPromise.result||!this.vertAxisDataPromise.result)return r.createElement("span",null,"Error loading plot data.");var l=null;if("number"===this.highlightedRow.clinicalAttribute.datatype.toLowerCase()){if(!this.boxPlotData.isComplete)return this.boxPlotData.isError?r.createElement("span",null,"Error loading plot data."):r.createElement(a.a,{center:!0,isLoading:!0,size:"big"});l=r.createElement(pe,{svgId:ue,domainPadding:75,boxWidth:this.boxPlotData.result.data.length>7?30:60,axisLabelX:this.horzLabel,axisLabelY:this.vertLabel,data:this.boxPlotData.result.data,chartBase:500,scatterPlotTooltip:this.scatterPlotTooltip,boxPlotTooltip:this.boxPlotTooltip,horizontal:this.boxPlotData.result.horizontal,logScale:this.logScaleFunction,size:H.j,fill:T.i.fill,stroke:T.i.stroke,strokeOpacity:T.i.strokeOpacity,symbol:"circle",useLogSpaceTicks:!0,legendLocationWidthThreshold:550})}else l=r.createElement(W.a,{svgId:ue,horzData:this.horzAxisDataPromise.result.data,vertData:this.vertAxisDataPromise.result.data,horzCategoryOrder:this.horzAxisDataPromise.result.categoryOrder,vertCategoryOrder:this.vertAxisDataPromise.result.categoryOrder,categoryToColor:this.categoryToColor,barWidth:20,domainPadding:20,chartBase:500,axisLabelX:this.horzLabel,axisLabelY:this.vertLabel,legendLocationWidthThreshold:450,ticksCount:6,horizontalBars:this.horizontalBars,percentage:n,stacked:i});return r.createElement("div",{"data-test":"ClinicalTabPlotDiv",className:"borderedChart posRelative",style:{marginBottom:10}},r.createElement(B,{style:{position:"relative",top:-5},getScrollEl:this.getScrollPane}),r.createElement(o.Observer,null,this.toolbar),r.createElement("div",{ref:this.assignScrollPaneRef,style:{position:"relative",display:"inline-block"}},l))}}}]),t}();se([l.observable.ref],he.prototype,"highlightedRow",void 0),se([i.default],he.prototype,"getScrollPane",null),se([l.computed],he.prototype,"showLogScaleControls",null),se([l.observable],he.prototype,"logScale",void 0),se([l.observable],he.prototype,"logScaleFunction",void 0),se([l.observable],he.prototype,"swapAxes",void 0),se([l.observable],he.prototype,"horizontalBars",void 0),se([l.action.bound],he.prototype,"onClickLogScale",null),se([l.action.bound],he.prototype,"onClickSwapAxes",null),se([l.action.bound],he.prototype,"onClickhorizontalBars",null),se([l.computed],he.prototype,"vertAxisDataPromise",null),se([l.computed],he.prototype,"horzAxisDataPromise",null),se([l.computed],he.prototype,"horzLabel",null),se([l.computed],he.prototype,"vertLabel",null),se([i.default],he.prototype,"getSvg",null),se([i.default],he.prototype,"assignScrollPaneRef",null),se([l.computed],he.prototype,"scatterPlotTooltip",null),se([l.computed],he.prototype,"boxPlotTooltip",null),se([l.computed],he.prototype,"categoryToColor",null),se([l.observable],he.prototype,"plotType",void 0),se([l.action.bound],he.prototype,"onPlotTypeSelect",null),se([l.computed],he.prototype,"getUtilitiesMenu",null),se([l.computed],he.prototype,"plot",null),se([i.default],he.prototype,"toolbar",null),he=se([o.observer],he);t.a=he},1168:function(e,t,n){"use strict";var r=n(0),o=n(930),i=(n(836),n(72)),a=n(9),l=n(3),s=n(118),c=n(49),u=n(328),p=n(147),d=n(337),f=n(31),h=n(1),m=n.n(h),y=n(73);function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var E=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":S(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},k=function(e){function t(){return g(this,t),v(this,_(t).apply(this,arguments))}return w(t,y["b"]),t}(),C=function(e){function t(){return g(this,t),v(this,_(t).apply(this,arguments))}var n,o,i;return w(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement(k,{data:this.props.survivalDescriptionData,columns:[{name:"Study",render:function(e){return r.createElement("span",null,e.studyName)},sortBy:function(e){return e.studyName}},{name:"Description",render:function(e){return r.createElement("span",null,e.description)},sortBy:function(e){return e.description}}],initialSortColumn:"Description",initialSortDirection:"desc",showPagination:!0,initialItemsPerPage:10,showColumnVisibility:!1,showFilter:!1,showCopyDownload:!1})}}])&&b(n.prototype,o),i&&b(n,i),t}(),P=C=E([a.observer],C),T=n(924),x=n(177),j=n(99),A=n(2),I=n(331),M=n.n(I),D=n(12),N=n(174),R=n(45),L=n(56),G=n(354),V=n(7),B=n(332),F=n.n(B),H=n(814),U=n.n(H);function W(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e,t,n){return t&&z(e.prototype,t),n&&z(e,n),e}function Q(e,t){return!t||"object"!==$(t)&&"function"!=typeof t?X(e):t}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ee=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":$(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},te=function(e){function t(e){var n;return q(this,t),n=Q(this,Y(t).call(this,e)),Object(A.makeObservable)(X(n)),n}return Z(t,r["Component"]),K(t,[{key:"onSliderTextChange",value:function(e){var t=Number.parseFloat(e);isNaN(t)||this.props.onPatientMinThresholdChange(t)}},{key:"render",value:function(){return r.createElement("div",{className:"small",style:{float:"left",display:"inline-flex",alignItems:"center",marginTop:5}},r.createElement("span",null,"Min. # Patients:"),r.createElement("div",{className:"RangeSliderContainer",style:{width:75,marginLeft:10,marginRight:10}},r.createElement(F.a,{min:this.props.minNumPatients,max:this.props.maxNumPatients,value:this.props.patientMinThreshold,onChange:this.props.onPatientMinThresholdChange,tooltip:!1,step:1})),r.createElement(l.l,{className:U.a.XmaxNumberInput,value:this.props.patientMinThreshold.toString(),setValue:this.onSliderTextChange,numericOnly:!0}))}}]),t}();ee([A.action.bound],te.prototype,"onSliderTextChange",null),te=ee([a.observer],te);var ne,re=function(e){function t(e,n,r){var o;return q(this,t),o=Q(this,Y(t).call(this,e)),Object.defineProperty(X(o),"getPatientMinThreshold",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(X(o),"getSortedFilteredData",{enumerable:!0,configurable:!0,writable:!0,value:function(){return Object(N.d)(o.sortedData,o.filterString,function(e,t,n,r){return e.numPatients>=o.getPatientMinThreshold()&&o.dataFilter(e,t,n,r)})}}),o.dataHighlighter=function(e){return e.prefix===n()},o}return Z(t,N["a"]),t}();function oe(e){var t="# in ".concat(e);return{name:t,render:function(t){return r.createElement("span",null,t.numPatientsPerGroup[e])},sortBy:function(t){return t.numPatientsPerGroup[e]},filter:Object(G.a)(function(t){return t.numPatientsPerGroup[e]},t),download:function(t){return t.numPatientsPerGroup[e].toString()},visible:!1}}function ie(e){var t="Median months survival in ".concat(e," (95% CI)");return{name:t,render:function(t){return r.createElement("span",null,t.medianPerGroup[e])},sortBy:function(t){var n=parseFloat(t.medianPerGroup[e]);return isNaN(n)?Number.POSITIVE_INFINITY:n},filter:Object(G.a)(function(t){var n=parseFloat(t.medianPerGroup[e]);return isNaN(n)?Number.POSITIVE_INFINITY:n},t),download:function(t){return t.medianPerGroup[e]},visible:!1}}!function(e){e.P_VALUE="p-Value"}(ne||(ne={}));var ae=[{name:"Survival Type",render:function(e){return r.createElement("span",null,e.displayText)},filter:function(e,t,n){return e.displayText.toUpperCase().indexOf(n)>-1},sortBy:function(e){return e.displayText},download:function(e){return e.displayText},visible:!0,togglable:!1},{name:"Number of Patients",render:function(e){return r.createElement("span",null,e.numPatients)},sortBy:function(e){return e.numPatients},download:function(e){return e.numPatients.toString()},visible:!0}],le=[{name:ne.P_VALUE,render:function(e){return r.createElement("span",null,null!==e.pValue?Object(R.g)(e.pValue,3,.01,-10):"N/A")},sortBy:function(e){return e.pValue},filter:Object(G.a)(function(e){return e.pValue},ne.P_VALUE),download:function(e){return null!==e.pValue?Object(L.b)(e.pValue,3,.01):"N/A"},tooltip:r.createElement("span",null,"Derived from Log Rank test."),visible:!0},{name:"q-Value",render:function(e){return r.createElement("span",null,null!==e.qValue?Object(R.g)(e.qValue,3,.01,-10):"N/A")},sortBy:function(e){return e.qValue},filter:Object(G.a)(function(e){return e.qValue},"q-Value"),download:function(e){return null!==e.qValue?Object(L.b)(e.qValue,3,.01):"N/A"},tooltip:r.createElement("span",null,"Derived from Benjamini-Hochberg FDR correction procedure."),visible:!0}],se=function(e){function t(e){var n;return q(this,t),n=Q(this,Y(t).call(this,e)),Object.defineProperty(X(n),"dataStore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(X(n),"columnVisibility",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(X(n),"patientMinThreshold",{enumerable:!0,configurable:!0,writable:!0,value:10}),Object(A.makeObservable)(X(n)),n.dataStore=new re(function(){return n.props.survivalPrefixes},n.props.getSelectedPrefix,n.getPatientMinThreshold),n.columnVisibility=n.initColumnVisibility(),n}return Z(t,r["Component"]),K(t,[{key:"getPatientMinThreshold",value:function(){return this.patientMinThreshold}},{key:"initColumnVisibility",value:function(){return m.a.mapValues(m.a.keyBy(this.columns,function(e){return e.name}),function(e){return e.visible})}},{key:"onRowClick",value:function(e){this.props.setSelectedPrefix(e.prefix)}},{key:"onColumnToggled",value:function(e,t){this.columnVisibility=Object(l.Eb)(this.columnVisibility,e,t)}},{key:"onPatientMinThresholdChange",value:function(e){this.patientMinThreshold=e}},{key:"render",value:function(){return r.createElement(y.b,{columns:this.columns,showColumnVisibility:!0,columnVisibility:this.columnVisibility,columnVisibilityProps:{onColumnToggled:this.onColumnToggled,className:"pull-right SurvivalPrefixTableVisibilityColumn"},headerComponent:r.createElement(te,{maxNumPatients:this.maxNumPatients,minNumPatients:this.minNumPatients,patientMinThreshold:this.patientMinThreshold,onPatientMinThresholdChange:this.onPatientMinThresholdChange}),initialSortColumn:ne.P_VALUE,initialSortDirection:"asc",dataStore:this.dataStore,onRowClick:this.onRowClick,paginationProps:{itemsPerPageOptions:[15]},initialItemsPerPage:15,copyDownloadProps:{showCopy:!1},filterBoxWidth:120})}},{key:"columns",get:function(){var e=[].concat(ae,W(this.props.groupNames.map(oe)),W(this.props.groupNames.map(ie)));return V.b.serverConfig.survival_show_p_q_values_in_survival_type_table&&e.push.apply(e,le),e}},{key:"minNumPatients",get:function(){return Math.min.apply(Math,W(this.dataStore.allData.map(function(e){return e.numPatients})))}},{key:"maxNumPatients",get:function(){return Math.max.apply(Math,W(this.dataStore.allData.map(function(e){return e.numPatients})))}}]),t}();ee([A.observable],se.prototype,"columnVisibility",void 0),ee([A.observable],se.prototype,"patientMinThreshold",void 0),ee([D.default],se.prototype,"getPatientMinThreshold",null),ee([D.default],se.prototype,"onRowClick",null),ee([D.default],se.prototype,"onColumnToggled",null),ee([A.computed],se.prototype,"columns",null),ee([A.computed],se.prototype,"minNumPatients",null),ee([A.computed],se.prototype,"maxNumPatients",null),ee([A.action.bound],se.prototype,"onPatientMinThresholdChange",null);var ce=se=ee([a.observer],se),ue=n(184),pe=n(851);function de(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function he(e){return(he=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function me(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ye(e,t){return(ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function be(e){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ge=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":be(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ve=function(e){function t(e){var n,a,h;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,h=he(t).call(this,e),n=!h||"object"!==be(h)&&"function"!=typeof h?me(a):h,Object.defineProperty(me(n),"multipleDescriptionWarningMessageWithoutTooltip",{enumerable:!0,configurable:!0,writable:!0,value:"The survival data on patients from different cohorts may have been defined by "}),Object.defineProperty(me(n),"multipleDescriptionWarningMessageWithTooltip",{enumerable:!0,configurable:!0,writable:!0,value:"different criteria."}),Object.defineProperty(me(n),"differentDescriptionExistMessage",{enumerable:!0,configurable:!0,writable:!0,value:"Different descriptions of survival data were used for different studies."}),Object.defineProperty(me(n),"selectedSurvivalPlotPrefix",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(me(n),"analysisGroupsComputations",{enumerable:!0,configurable:!0,writable:!0,value:Object(l.vb)({await:function(){return[n.props.store.activeGroups,n.props.store.patientsVennPartition,n.props.store.uidToGroup,n.props.store.patientToSamplesSet]},invoke:function(){var e=m.a.reduce(n.props.store._activeGroupsNotOverlapRemoved.result,function(e,t,n){return e[t.uid]=n,e},{}),t=n.props.store.patientsVennPartition.result;t.sort(function(t,n){var r=Object.keys(t.key).filter(function(e){return t.key[e]}),o=Object.keys(n.key).filter(function(e){return n.key[e]});return r.length!==o.length?r.length-o.length:m.a.sumBy(r,function(t){return e[t]})-m.a.sumBy(o,function(t){return e[t]})});var r=n.props.store.uidToGroup.result,o=[],i={};if(n.props.store.overlapStrategy===x.a.INCLUDE){var a=!0,l=!1,s=void 0;try{for(var c,u=function(){var t=c.value,n=Object.keys(t.key).filter(function(e){return t.key[e]});if(n.sort(function(t,n){return e[t]-e[n]}),n.length>0){var a="Only ".concat(n.map(function(e){return r[e].nameWithOrdinal}).join(", ")),l=n.join(","),s=!0,u=!1,d=void 0;try{for(var f,h=t.value[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var m=f.value;i[m]=[l]}}catch(e){u=!0,d=e}finally{try{s||null==h.return||h.return()}finally{if(u)throw d}}o.push({name:a,color:Object(p.a)(n.map(function(e){return r[e].color})),value:l,legendText:JSON.stringify(n)})}},d=t[Symbol.iterator]();!(a=(c=d.next()).done);a=!0)u()}catch(e){l=!0,s=e}finally{try{a||null==d.return||d.return()}finally{if(l)throw s}}}else{var h=n.props.store.patientToSamplesSet.result,y=!0,b=!1,g=void 0;try{for(var v,_=n.props.store.activeGroups.result[Symbol.iterator]();!(y=(v=_.next()).done);y=!0){var w=v.value,O=w.nameWithOrdinal;o.push({name:O,color:w.color,value:w.uid,legendText:w.uid});var S=Object(f.lb)([w]),E=!0,k=!1,C=void 0;try{for(var P,T=S[Symbol.iterator]();!(E=(P=T.next()).done);E=!0){var j=P.value,A=h.get({studyId:j.studyId,patientId:j.patientId});A&&A.length&&(i[A[0].uniquePatientKey]=[w.uid])}}catch(e){k=!0,C=e}finally{try{E||null==T.return||T.return()}finally{if(k)throw C}}}}catch(e){b=!0,g=e}finally{try{y||null==_.return||_.return()}finally{if(b)throw g}}}return Promise.resolve({analysisGroups:o,patientToAnalysisGroups:i})}})}),Object.defineProperty(me(n),"sortedGroupedSurvivals",{enumerable:!0,configurable:!0,writable:!0,value:Object(l.vb)({await:function(){return[n.analysisGroupsComputations,n.props.store.patientSurvivals]},invoke:function(){var e=n.analysisGroupsComputations.result.patientToAnalysisGroups,t=m.a.mapValues(n.props.store.patientSurvivals.result,function(t){return m.a.reduce(t,function(t,n){n.uniquePatientKey in e&&e[n.uniquePatientKey].forEach(function(e){t[e]=t[e]||[],t[e].push(n)});return t},{})});return Promise.resolve(m.a.mapValues(t,function(e){return m.a.mapValues(e,function(e){return e.sort(function(e,t){return e.months-t.months})})}))}})}),Object.defineProperty(me(n),"pValuesByPrefix",{enumerable:!0,configurable:!0,writable:!0,value:Object(l.vb)({await:function(){return[n.sortedGroupedSurvivals,n.analysisGroupsComputations]},invoke:function(){var e=n.analysisGroupsComputations.result.analysisGroups;return Promise.resolve(m.a.mapValues(n.sortedGroupedSurvivals.result,function(t){var n=null;return e.length>1&&(n=pe.a.apply(void 0,de(e.map(function(e){return t[e.value]||[]})))),n}))}})}),Object.defineProperty(me(n),"qValuesByPrefix",{enumerable:!0,configurable:!0,writable:!0,value:Object(l.vb)({await:function(){return[n.pValuesByPrefix]},invoke:function(){var e=m.a.map(n.pValuesByPrefix.result,function(e,t){return{pVal:e,prefix:t}}),t=m.a.sortBy(e.filter(function(e){return null!==e.pVal}),function(e){return e.pVal}),r=Object(ue.a)(t.map(function(e){return e.pVal})),o=m.a.clone(n.pValuesByPrefix.result);return t.forEach(function(e,t){o[e.prefix]=r[t]}),Promise.resolve(o)}})}),Object.defineProperty(me(n),"tabUI",{enumerable:!0,configurable:!0,writable:!0,value:Object(s.a)({await:function(){return n.props.store._activeGroupsNotOverlapRemoved.isComplete&&n.props.store._activeGroupsNotOverlapRemoved.result.length>10?[n.props.store._activeGroupsNotOverlapRemoved]:[n.props.store._activeGroupsNotOverlapRemoved,n.survivalUI,n.props.store.overlapComputations,n.survivalPrefixTable]},render:function(){var e=n.props.store._activeGroupsNotOverlapRemoved.result.length,t=[];if(e>10)t=r.createElement("span",null,c.i);else if(0===e)t=r.createElement("span",null,c.h);else{var o=n.props.store.studies.result.find(function(e){return e.studyId.includes("genie_bpc")});t=r.createElement(r.Fragment,null,r.createElement("div",{className:"tabMessageContainer",style:{paddingBottom:0}},Object(c.y)(),o&&r.createElement("div",{className:"alert alert-info"},r.createElement("i",{className:"fa fa-md fa-info-circle",style:{verticalAlign:"middle !important",marginRight:6,marginBottom:1}}),"Kaplan-Meier estimates do not account for the lead time bias introduced by the inclusion criteria for the GENIE BPC Project."),r.createElement(d.a,{store:n.props.store,only:"patient",survivalTabMode:!0})),r.createElement("div",{style:{display:"flex"}},n.survivalPrefixTable.component&&r.createElement("div",{style:{marginRight:15,marginTop:15,minWidth:475,maxWidth:475,height:"fit-content",overflowX:"scroll"}},n.survivalPrefixTable.component),n.survivalUI.component))}return r.createElement("div",{"data-test":"ComparisonPageSurvivalTabDiv"},t)},renderPending:function(){return r.createElement(i.a,{center:!0,isLoading:!0,size:"big"})},renderError:function(){return r.createElement(u.a,null)},showLastRenderWhenPending:!0})}),Object.defineProperty(me(n),"survivalPrefixTable",{enumerable:!0,configurable:!0,writable:!0,value:Object(s.a)({await:function(){return[n.survivalTitleText,n.props.store.patientSurvivals,n.pValuesByPrefix,n.qValuesByPrefix,n.analysisGroupsComputations]},render:function(){var e=n.props.store.patientSurvivals.result,t=n.analysisGroupsComputations.result.analysisGroups,o=m.a.keyBy(t,function(e){return e.value}),i=n.analysisGroupsComputations.result.patientToAnalysisGroups,a=n.pValuesByPrefix.result,l=n.qValuesByPrefix.result,s=n.survivalTitleText.result;return Object.keys(s).length>1?r.createElement(ce,{groupNames:t.map(function(e){return e.name}),survivalPrefixes:m.a.map(n.survivalTitleText.result,function(n,r){var s=m.a.mapValues(m.a.keyBy(t,function(e){return e.name}),function(){return[]}),c=!0,u=!1,p=void 0;try{for(var d,f=e[r][Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var h=d.value,y=i[h.uniquePatientKey]||[],b=!0,g=!1,v=void 0;try{for(var _,w=y[Symbol.iterator]();!(b=(_=w.next()).done);b=!0){var O=_.value;s[o[O].name].push(h)}}catch(e){g=!0,v=e}finally{try{b||null==w.return||w.return()}finally{if(g)throw v}}}}catch(e){u=!0,p=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw p}}return{prefix:r,displayText:n,numPatients:m.a.sumBy(e[r],function(e){return e.uniquePatientKey in i?1:0}),numPatientsPerGroup:m.a.mapValues(s,function(e){return e.length}),medianPerGroup:m.a.mapValues(s,function(e){var t=m.a.sortBy(e,function(e){return e.months});return Object(j.k)(t,Object(j.q)(t))}),pValue:a[r],qValue:l[r]}}),getSelectedPrefix:function(){return n.selectedSurvivalPlotPrefix},setSelectedPrefix:n.setSurvivalPlotPrefix}):null}})}),Object.defineProperty(me(n),"survivalTitleText",{enumerable:!0,configurable:!0,writable:!0,value:Object(l.vb)({await:function(){return[n.props.store.survivalClinicalAttributesPrefix,n.props.store.survivalDescriptions]},invoke:function(){return Promise.resolve(n.props.store.survivalClinicalAttributesPrefix.result.reduce(function(e,t){return e[t]=Object(j.h)(n.props.store.survivalDescriptions.result[t][0].displayName),e},{}))}})}),Object.defineProperty(me(n),"survivalUI",{enumerable:!0,configurable:!0,writable:!0,value:Object(s.a)({await:function(){return[n.props.store.survivalDescriptions,n.props.store.survivalXAxisLabelGroupByPrefix,n.props.store.survivalClinicalAttributesPrefix,n.props.store.patientSurvivals,n.props.store.activeStudiesClinicalAttributes,n.analysisGroupsComputations,n.props.store.overlapComputations,n.props.store.uidToGroup,n.survivalTitleText,n.sortedGroupedSurvivals,n.pValuesByPrefix]},render:function(){var e=null,t=null,i=n.analysisGroupsComputations.result.analysisGroups,a=n.analysisGroupsComputations.result.patientToAnalysisGroups,s={},c=n.survivalTitleText.result;if(n.props.store.survivalClinicalAttributesPrefix.result.forEach(function(e){s[e]=1===n.props.store.survivalDescriptions.result[e].length?n.props.store.survivalDescriptions.result[e][0].description:""}),void 0!==n.selectedSurvivalPlotPrefix||m.a.isEmpty(n.props.store.patientSurvivals.result)||n.setSurvivalPlotPrefix(m.a.keys(n.props.store.patientSurvivals.result)[0]),n.selectedSurvivalPlotPrefix){var u=n.props.store.patientSurvivals.result[n.selectedSurvivalPlotPrefix],p=n.selectedSurvivalPlotPrefix;if(u.length>0){if(n.props.store.survivalDescriptions&&n.props.store.survivalDescriptions.result[p].length>1){var d=n.multipleDescriptionWarningMessageWithoutTooltip;m.a.uniq(m.a.map(n.props.store.survivalDescriptions.result[p],function(e){return e.description})).length>1&&(d="".concat(n.differentDescriptionExistMessage," ").concat(d)),t=r.createElement("div",{className:"tabMessageContainer"},r.createElement("div",{className:"alert alert-warning",role:"alert"},d,r.createElement(l.i,{placement:"bottom",overlay:r.createElement(P,{survivalDescriptionData:n.props.store.survivalDescriptions.result[p]})},r.createElement("a",{href:"javascript:void(0)"},n.multipleDescriptionWarningMessageWithTooltip))))}e=r.createElement("div",{style:{marginBottom:40}},r.createElement("h4",{className:"forceHeaderStyle h4"},c[p]),r.createElement("p",null,s[p]),r.createElement("div",{className:"borderedChart",style:{width:"920px"}},r.createElement(o.b,{key:p,sortedGroupedSurvivals:n.sortedGroupedSurvivals.result[n.selectedSurvivalPlotPrefix],analysisGroups:i,patientToAnalysisGroups:a,title:c[p],xAxisLabel:n.props.store.survivalXAxisLabelGroupByPrefix.result[p],yAxisLabel:c[p],totalCasesHeader:"Number of Cases, Total",statusCasesHeader:"Number of Events",medianMonthsHeader:"Median Months ".concat(c[p]," (95% CI)"),yLabelTooltip:j.d,xLabelWithEventTooltip:j.c,xLabelWithoutEventTooltip:j.b,fileName:c[p].replace(" ","_"),showCurveInTooltip:!0,legendLabelComponent:n.props.store.overlapStrategy===x.a.INCLUDE?r.createElement(T.b,{maxLabelWidth:256,uidToGroup:n.props.store.uidToGroup.result,dy:"0.3em"}):r.createElement(T.a,{maxLabelWidth:256,uidToGroup:n.props.store.uidToGroup.result,dy:"0.3em"}),styleOpts:{tooltipYOffset:-28},pValue:n.pValuesByPrefix.result[n.selectedSurvivalPlotPrefix]})))}else e=r.createElement("div",{className:"alert alert-info"},c[p]," not available")}return r.createElement("div",null,r.createElement("div",{className:M.a.survivalPlotHeaderContainer},r.createElement("div",{className:M.a.survivalPlotHeader},r.createElement("ul",{className:"nav nav-pills"},t))),e)},renderPending:function(){return r.createElement(i.a,{center:!0,isLoading:!0,size:"big"})},renderError:function(){return r.createElement(u.a,null)}})}),Object(A.makeObservable)(me(n)),n}var n,a,h;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}(t,r["Component"]),n=t,(a=[{key:"setSurvivalPlotPrefix",value:function(e){this.selectedSurvivalPlotPrefix=e}},{key:"render",value:function(){return this.tabUI.component}}])&&fe(n.prototype,a),h&&fe(n,h),t}();ge([A.observable],ve.prototype,"selectedSurvivalPlotPrefix",void 0),ge([A.action.bound],ve.prototype,"setSurvivalPlotPrefix",null),ve=ge([a.observer],ve);t.a=ve},1169:function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(12),a=n(118),l=n(72),s=n(328),c=n(49),u=n(2),p=n(60),d=n.n(p),f=n(98),h=n(1),m=n(3),y=n(192),b=n(174);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var O=function(e){function t(e,n,r){var o,i,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,o=!(a=v(t).call(this,e))||"object"!==g(a)&&"function"!=typeof a?_(i):a,Object.defineProperty(_(o),"setHighlighted",{enumerable:!0,configurable:!0,writable:!0,value:r}),o.dataHighlighter=function(e){var t=n();return!(!t||e.stableId!==t.stableId)},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,b["a"]),t}(),S=n(929),E=n(861);function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var j=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":x(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},A=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=C(t).call(this,e),n=!o||"object"!==x(o)&&"function"!=typeof o?P(r):o,Object.defineProperty(P(n),"significanceFilter",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(P(n),"clickedEntityStableId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(P(n),"selectedStableIds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(P(n),"highlightedRow",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(P(n),"_enrichedGroups",{enumerable:!0,configurable:!0,writable:!0,value:n.props.groups.map(function(e){return e.name})}),Object.defineProperty(P(n),"dataStore",{enumerable:!0,configurable:!0,writable:!0,value:new O(function(){return n.filteredData},function(){return n.highlightedRow},function(e){n.highlightedRow=e})}),Object(u.makeObservable)(P(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,r["Component"]),n=t,(o=[{key:"filterByStableId",value:function(e){return!this.selectedStableIds||this.selectedStableIds.includes(e)}},{key:"toggleSignificanceFilter",value:function(){this.significanceFilter=!this.significanceFilter}},{key:"onEntityClick",value:function(e){this.clickedEntityStableId=e}},{key:"onSelection",value:function(e){this.selectedStableIds=e}},{key:"onSelectionCleared",value:function(){this.selectedStableIds=null}},{key:"onChange",value:function(e){this._enrichedGroups=h.map(e,function(e){return e.value})}},{key:"render",value:function(){if(0===this.props.data.length)return r.createElement("div",{className:"alert alert-info"},"No data/result available");var e=Object(f.t)(this.data),t=h.maxBy(e,function(e){return Math.ceil(Math.abs(e.x))});return r.createElement("div",{className:d.a.Container},r.createElement("div",{className:d.a.ChartsPanel},this.isTwoGroupAnalysis&&r.createElement(E.a,{data:e,selectedSet:this.selectedEntitiesSet,xAxisLeftLabel:this.group2.nameOfEnrichmentDirection||this.group2.name,xAxisRightLabel:this.group1.nameOfEnrichmentDirection||this.group1.name,xAxisDomain:Math.ceil(Math.abs(t.x)),xAxisTickValues:null,onGenericAssayEntityClick:this.onEntityClick,onSelection:this.onSelection,onSelectionCleared:this.onSelectionCleared}),r.createElement(S.a,{selectedProfile:this.props.selectedProfile,groups:this.props.groups,sampleKeyToSample:this.props.sampleKeyToSample,selectedRow:this.selectedRow,genericAssayType:this.props.genericAssayType})),r.createElement("div",{className:d.a.TableContainer},r.createElement("hr",{style:{marginTop:0,marginBottom:5,borderWidth:2}}),r.createElement("div",{className:d.a.Checkboxes},r.createElement("div",{style:{width:250,marginRight:7}},r.createElement(m.g,{name:"groupsSelector",placeholder:"High in ...",onChange:this.onChange,options:this.options,value:this.selectedValues})),r.createElement("div",{className:d.a.FlexCheckbox},r.createElement("label",null,r.createElement("input",{type:"checkbox",checked:this.significanceFilter,onClick:this.toggleSignificanceFilter}),"Significant only"))),r.createElement(y.b,{data:this.filteredData,onEntityClick:this.onEntityClick,dataStore:this.dataStore,mutexTendency:this.props.alteredVsUnalteredMode,visibleOrderedColumnNames:this.visibleOrderedColumnNames,customColumns:h.keyBy(this.customColumns,function(e){return e.uniqueName||e.name})})))}},{key:"data",get:function(){return Object(f.s)(this.props.data,this.props.groups)}},{key:"filteredData",get:function(){return Object(f.p)(this.data,this._enrichedGroups,this.significanceFilter,this.filterByStableId,!0)}},{key:"group1",get:function(){return this.props.groups[0]}},{key:"group2",get:function(){return this.props.groups[1]}},{key:"selectedEntitiesSet",get:function(){return h.keyBy(this.selectedStableIds||[])}},{key:"isTwoGroupAnalysis",get:function(){return 2==this.props.groups.length}},{key:"customColumns",get:function(){return Object(f.r)(this.props.groups,this.props.alteredVsUnalteredMode)}},{key:"visibleOrderedColumnNames",get:function(){var e=[];return e.push(y.a.ENTITY_ID),this.props.groups.forEach(function(t){e.push(t.name+" mean")}),this.props.groups.forEach(function(t){e.push(t.name+" standard deviation")}),this.isTwoGroupAnalysis&&e.push(y.a.LOG_RATIO),e.push(y.a.P_VALUE,y.a.Q_VALUE),this.isTwoGroupAnalysis&&this.props.alteredVsUnalteredMode?e.push(y.a.TENDENCY):e.push(y.a.EXPRESSED),e}},{key:"selectedValues",get:function(){return this._enrichedGroups.map(function(e){return{value:e}})}},{key:"options",get:function(){return h.map(this.props.groups,function(e){return{label:e.nameOfEnrichmentDirection?e.nameOfEnrichmentDirection:e.name,value:e.name}})}},{key:"selectedRow",get:function(){var e=this;if(this.clickedEntityStableId)return this.props.data.filter(function(t){return t.stableId===e.clickedEntityStableId})[0]}}])&&k(n.prototype,o),i&&k(n,i),t}();Object.defineProperty(A,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{alteredVsUnalteredMode:!0}}),j([u.observable],A.prototype,"significanceFilter",void 0),j([u.observable.ref],A.prototype,"clickedEntityStableId",void 0),j([u.observable.ref],A.prototype,"selectedStableIds",void 0),j([u.observable.ref],A.prototype,"highlightedRow",void 0),j([u.observable.ref],A.prototype,"_enrichedGroups",void 0),j([u.computed],A.prototype,"data",null),j([u.computed],A.prototype,"filteredData",null),j([i.default],A.prototype,"filterByStableId",null),j([i.default],A.prototype,"toggleSignificanceFilter",null),j([i.default],A.prototype,"onEntityClick",null),j([i.default],A.prototype,"onSelection",null),j([i.default],A.prototype,"onSelectionCleared",null),j([u.computed],A.prototype,"group1",null),j([u.computed],A.prototype,"group2",null),j([u.computed],A.prototype,"selectedEntitiesSet",null),j([u.computed],A.prototype,"isTwoGroupAnalysis",null),j([u.computed],A.prototype,"customColumns",null),j([u.computed],A.prototype,"visibleOrderedColumnNames",null),j([u.action.bound],A.prototype,"onChange",null),j([u.computed],A.prototype,"selectedValues",null),j([u.computed],A.prototype,"options",null),j([u.computed],A.prototype,"selectedRow",null);var I=A=j([o.observer],A),M=n(845);function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var V=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":G(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},B=function(e){function t(){var e,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=N(t).apply(this,arguments),e=!o||"object"!==G(o)&&"function"!=typeof o?R(n):o,Object.defineProperty(R(e),"tabUI",{enumerable:!0,configurable:!0,writable:!0,value:Object(c.e)(function(){return e.props.store},function(){return e.enrichmentsUI},e.props.genericAssayType,!0,!0,!1)}),Object.defineProperty(R(e),"enrichmentsUI",{enumerable:!0,configurable:!0,writable:!0,value:Object(a.a)({await:function(){var t=[e.props.store.gaEnrichmentDataByAssayType,e.props.store.selectedGenericAssayEnrichmentProfileMapGroupedByGenericAssayType,e.props.store.gaEnrichmentGroupsByAssayType,e.props.store.studies];return e.props.store.gaEnrichmentDataByAssayType.isComplete&&e.props.store.gaEnrichmentDataByAssayType.result[e.props.genericAssayType]&&t.push(e.props.store.gaEnrichmentDataByAssayType.result[e.props.genericAssayType]),t},render:function(){var t=Object.keys(e.props.store.selectedGenericAssayEnrichmentProfileMapGroupedByGenericAssayType.result[e.props.genericAssayType])[0],n=e.props.store.selectedGenericAssayEnrichmentProfileMapGroupedByGenericAssayType.result[e.props.genericAssayType][t];return r.createElement("div",{"data-test":"GroupComparisonGenericAssayEnrichments"},r.createElement(M.a,{dataSets:e.props.store.genericAssayEnrichmentProfilesGroupedByGenericAssayType.result[e.props.genericAssayType],onChange:e.onChangeProfile,selectedProfileByStudyId:e.props.store.selectedGenericAssayEnrichmentProfileMapGroupedByGenericAssayType.result[e.props.genericAssayType],alwaysShow:!0,studies:e.props.store.studies.result,showDescription:!0}),r.createElement(I,{data:e.props.store.gaEnrichmentDataByAssayType.result[e.props.genericAssayType].result,groups:e.props.store.gaEnrichmentGroupsByAssayType.result[e.props.genericAssayType],selectedProfile:n,alteredVsUnalteredMode:!1,sampleKeyToSample:e.props.store.sampleKeyToSample.result,genericAssayType:e.props.genericAssayType}))},renderPending:function(){return r.createElement(l.a,{center:!0,isLoading:!0,size:"big"})},renderError:function(){return r.createElement(s.a,null)}})}),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(t,r["Component"]),n=t,(o=[{key:"onChangeProfile",value:function(e){this.props.store.setGenericAssayEnrichmentProfileMap(e,this.props.genericAssayType)}},{key:"render",value:function(){return this.tabUI.component}}])&&D(n.prototype,o),i&&D(n,i),t}();V([i.default],B.prototype,"onChangeProfile",null),B=V([o.observer],B);t.a=B},1170:function(e,t,n){"use strict";var r=n(0),o=n(1),i=n(73),a=n(9),l=n(2),s=n(161),c=n(904),u=n.n(c),p=n(5),d=n.n(p);function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var w,O=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":_(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};!function(e){e[e.TRACK_A=0]="TRACK_A",e[e.TRACK_B=1]="TRACK_B",e[e.NEITHER=2]="NEITHER",e[e.A_NOT_B=3]="A_NOT_B",e[e.B_NOT_A=4]="B_NOT_A",e[e.BOTH=5]="BOTH",e[e.LOG_ODDS_RATIO=6]="LOG_ODDS_RATIO",e[e.P_VALUE=7]="P_VALUE",e[e.Q_VALUE=8]="Q_VALUE",e[e.ASSOCIATION=9]="ASSOCIATION"}(w||(w={}));var S=function(e){function t(){return h(this,t),m(this,b(t).apply(this,arguments))}return g(t,i["b"]),t}(),E=function(e){function t(e){var n;return h(this,t),n=m(this,b(t).call(this,e)),Object.defineProperty(y(n),"_columns",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object(l.makeObservable)(y(n)),n._columns={},n.generateColumns(),n}var n,i,a;return g(t,r["Component"]),n=t,(i=[{key:"generateColumns",value:function(){this._columns={},this._columns[w.TRACK_A]={name:"A",render:function(e){return r.createElement("span",null,r.createElement("b",null,e.trackA))},tooltip:r.createElement("span",null,"A"),filter:function(e,t,n){return e.trackA.toUpperCase().includes(n)},sortBy:function(e){return e.trackA},download:function(e){return e.trackA}},this._columns[w.TRACK_B]={name:"B",render:function(e){return r.createElement("span",null,r.createElement("b",null,e.trackB))},tooltip:r.createElement("span",null,"B"),filter:function(e,t,n){return e.trackB.toUpperCase().includes(n)},sortBy:function(e){return e.trackB},download:function(e){return e.trackB}},this._columns[w.NEITHER]={name:"Neither",render:function(e){return r.createElement("span",null,e.neitherCount)},tooltip:r.createElement("span",null,"Number of samples with alterations in neither A nor B"),sortBy:function(e){return e.neitherCount},download:function(e){return e.neitherCount.toString()}},this._columns[w.A_NOT_B]={name:"A Not B",render:function(e){return r.createElement("span",null,e.aNotBCount)},tooltip:r.createElement("span",null,"Number of samples with alterations in A but not in B"),sortBy:function(e){return e.aNotBCount},download:function(e){return e.aNotBCount.toString()}},this._columns[w.B_NOT_A]={name:"B Not A",render:function(e){return r.createElement("span",null,e.bNotACount)},tooltip:r.createElement("span",null,"Number of samples with alterations in B but not in A"),sortBy:function(e){return e.bNotACount},download:function(e){return e.bNotACount.toString()}},this._columns[w.BOTH]={name:"Both",render:function(e){return r.createElement("span",null,e.bothCount)},tooltip:r.createElement("span",null,"Number of samples with alterations in both A and B"),sortBy:function(e){return e.bothCount},download:function(e){return e.bothCount.toString()}},this._columns[w.LOG_ODDS_RATIO]={name:"Log2 Odds Ratio",render:function(e){return r.createElement("span",null,Object(s.b)(e.logOddsRatio))},tooltip:r.createElement("span",{style:{display:"inline-block",maxWidth:300}},"Quantifies how strongly the presence or absence of alterations in A are associated with the presence or absence of alterations in B in the selected samples. OR = (Neither * Both) / (A Not B * B Not A)"),sortBy:function(e){return e.logOddsRatio},download:function(e){return Object(s.b)(e.logOddsRatio)}},this._columns[w.P_VALUE]={name:"p-Value",render:function(e){return r.createElement("span",null,Object(s.c)(e.pValue))},tooltip:r.createElement("span",null,"Derived from one-sided Fisher Exact Test"),sortBy:function(e){return e.pValue},download:function(e){return Object(s.c)(e.pValue)}},this._columns[w.Q_VALUE]={name:"q-Value",render:function(e){return Object(s.d)(e.qValue)},tooltip:r.createElement("span",null,"Derived from Benjamini-Hochberg FDR correction procedure"),sortBy:function(e){return e.qValue},download:function(e){return Object(s.c)(e.qValue)}},this._columns[w.ASSOCIATION]={name:"Tendency",render:function(e){return r.createElement("div",{className:d()(u.a.Tendency,(t={},n=u.a.Significant,o=e.qValue<.05,n in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,t))},e.association);var t,n,o},tooltip:r.createElement("table",null,r.createElement("tr",null,r.createElement("td",null,"Log2 ratio ",">"," 0"),r.createElement("td",null,": Tendency towards co-occurrence")),r.createElement("tr",null,r.createElement("td",null,"Log2 ratio <= 0"),r.createElement("td",null,": Tendency towards mutual exclusivity")),r.createElement("tr",null,r.createElement("td",null,"q-Value < 0.05"),r.createElement("td",null,": Significant association"))),filter:function(e,t,n){return e.association.toUpperCase().includes(n)},sortBy:function(e){return e.association},download:function(e){return e.association}}}},{key:"render",value:function(){var e=o.sortBy(this._columns,function(e){return e.order});return r.createElement(S,{columns:e,data:this.props.data,initialItemsPerPage:50,initialSortColumn:this.props.initialSortColumn,paginationProps:{itemsPerPageOptions:[50]}})}}])&&f(n.prototype,i),a&&f(n,a),t}();Object.defineProperty(E,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{columns:[w.TRACK_A,w.TRACK_B,w.NEITHER,w.A_NOT_B,w.B_NOT_A,w.BOTH,w.LOG_ODDS_RATIO,w.P_VALUE,w.Q_VALUE,w.ASSOCIATION],initialSortColumn:"q-Value"}}),O([l.observable],E.prototype,"_columns",void 0);var k=E=O([a.observer],E),C=n(17),P=n(72),T=n(333),x=n(335),j=n(334);function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var R=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":N(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},L=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=I(t).call(this,e))||"object"!==N(o)&&"function"!=typeof o?M(r):o,Object.defineProperty(M(n),"mutualExclusivityFilter",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(M(n),"coOccurenceFilter",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(M(n),"significantPairsFilter",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object(l.makeObservable)(M(n)),n.mutualExclusivityFilterChange=n.mutualExclusivityFilterChange.bind(M(n)),n.coOccurenceFilterChange=n.coOccurenceFilterChange.bind(M(n)),n.significantPairsFilterChange=n.significantPairsFilterChange.bind(M(n)),n}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,r["Component"]),n=t,(i=[{key:"mutualExclusivityFilterChange",value:function(){this.mutualExclusivityFilter=!this.mutualExclusivityFilter}},{key:"coOccurenceFilterChange",value:function(){this.coOccurenceFilter=!this.coOccurenceFilter}},{key:"significantPairsFilterChange",value:function(){this.significantPairsFilter=!this.significantPairsFilter}},{key:"render",value:function(){return this.props.isSampleAlteredMap.isPending?r.createElement(P.a,{isLoading:!0}):this.props.isSampleAlteredMap.isComplete?this.notEnoughDataError?r.createElement("div",{className:"tabMessageContainer"},r.createElement("div",{className:"alert alert-info"},this.notEnoughDataError),this.filteredTrackOqls.length>0&&r.createElement("div",{className:"alert alert-warning",role:"alert"},this.filteredTrackOqlsMessage),this.props.store&&[r.createElement(x.a,{store:this.props.store}),r.createElement(j.a,{store:this.props.store})]):r.createElement("div",{"data-test":"mutualExclusivityTabDiv"},this.props.store&&r.createElement("div",{className:"tabMessageContainer"},r.createElement(T.a,{className:"mutex-oql-status-banner",store:this.props.store,tabReflectsOql:!0}),this.filteredTrackOqls.length>0&&r.createElement("div",{className:"alert alert-warning",role:"alert"},this.filteredTrackOqlsMessage),r.createElement(x.a,{store:this.props.store}),r.createElement(j.a,{store:this.props.store})),Object(s.h)(this.data,o.size(this.isSampleAlteredFilteredMap)),r.createElement("div",{className:u.a.Checkboxes},r.createElement(C.Checkbox,{checked:this.mutualExclusivityFilter,onChange:this.mutualExclusivityFilterChange},"Mutual exclusivity"),r.createElement(C.Checkbox,{checked:this.coOccurenceFilter,onChange:this.coOccurenceFilterChange},"Co-occurrence"),r.createElement(C.Checkbox,{checked:this.significantPairsFilter,onChange:this.significantPairsFilterChange},"Significant only")),r.createElement(k,{data:this.filteredData})):null}},{key:"data",get:function(){return Object(s.e)(this.isSampleAlteredFilteredMap)}},{key:"filteredData",get:function(){return Object(s.f)(this.data,this.mutualExclusivityFilter,this.coOccurenceFilter,this.significantPairsFilter)}},{key:"isSampleAlteredFilteredMap",get:function(){return Object(s.g)(this.props.isSampleAlteredMap.result)}},{key:"filteredTrackOqls",get:function(){return o.difference(Object.keys(this.props.isSampleAlteredMap.result),Object.keys(this.isSampleAlteredFilteredMap))}},{key:"filteredTrackOqlsMessage",get:function(){return 1==this.filteredTrackOqls.length?"".concat(this.filteredTrackOqls[0]," is not profiled in any queried samples and therefore is excluded from this analysis."):this.filteredTrackOqls.length>1?"".concat(this.filteredTrackOqls.slice(0,-1).join(", ")," and ").concat(this.filteredTrackOqls.slice(-1)," are not profiled in any queried samples and therefore are excluded from this analysis."):""}},{key:"notEnoughDataError",get:function(){return o.size(this.props.isSampleAlteredMap.result)<2?"Mutual exclusivity analysis can only be performed when data from at least two genes is provided.":o.size(this.isSampleAlteredFilteredMap)<2?"Mutual exclusivity analysis can only be performed when at least two of the queried genes have been profiled in the queried samples.":null}}])&&A(n.prototype,i),a&&A(n,a),t}();R([l.observable],L.prototype,"mutualExclusivityFilter",void 0),R([l.observable],L.prototype,"coOccurenceFilter",void 0),R([l.observable],L.prototype,"significantPairsFilter",void 0),R([l.computed],L.prototype,"data",null),R([l.computed],L.prototype,"filteredData",null),R([l.computed],L.prototype,"isSampleAlteredFilteredMap",null),R([l.computed],L.prototype,"filteredTrackOqls",null),R([l.computed],L.prototype,"filteredTrackOqlsMessage",null),R([l.computed],L.prototype,"notEnoughDataError",null),L=R([a.observer],L);t.a=L},1171:function(e,t,n){"use strict";var r=n(0),o=n(1051),i=n(5),a=n.n(i),l=n(810),s=n.n(l),c=n(176),u=n(9),p=n(2),d=n(1),f=n.n(d),h=n(19),m=n(270),y=n(3),b=n(825),g=n(1052),v=(n(1059),n(13)),_=n(72);function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t,n){return t&&O(e.prototype,t),n&&O(e,n),e}function E(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?C(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var j=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":x(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},A=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function l(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,l)}s((r=r.apply(e,t||[])).next())})},I=function(e){function t(e){var n;return w(this,t),n=E(this,k(t).call(this,e)),Object.defineProperty(C(n),"studyMetadata",{enumerable:!0,configurable:!0,writable:!0,value:Object(y.vb)({invoke:function(){return A(C(n),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.a.getTagsUsingGET({studyId:this.props.studyId}));case 1:case"end":return e.stop()}},e,this)}))},onError:function(e){console.error("Error on getting study tags.",e)}})}),Object(p.makeObservable)(C(n)),n}return P(t,r["Component"]),S(t,[{key:"addHTMLDescription",value:function(e){return{__html:e}}},{key:"render",value:function(){var e="";if(this.props.isVirtualStudy)e=r.createElement("div",{dangerouslySetInnerHTML:this.addHTMLDescription(this.props.studyDescription)});else if(this.studyMetadata.isPending)e=r.createElement(_.a,{isLoading:!0});else if(this.studyMetadata.isComplete){var t=Object.keys(this.studyMetadata.result).length,n=r.createElement("div",{dangerouslySetInnerHTML:this.addHTMLDescription(this.props.studyDescription)});e=t>0?[n,r.createElement("br",null),r.createElement("div",{className:"studyTagsTooltip"}," ",r.createElement(g.JsonToTable,{json:this.studyMetadata.result}))]:n}else this.studyMetadata.isError&&(e="error");return e}}]),t}();j([p.observable],I.prototype,"studyMetadata",void 0),I=j([u.observer],I);var M=function(e){function t(){return w(this,t),E(this,k(t).apply(this,arguments))}return P(t,r["Component"]),S(t,[{key:"renderTooltip",value:function(){return r.createElement(y.i,{key:this.props.key,mouseEnterDelay:this.props.mouseEnterDelay,placement:this.props.placement,overlay:r.createElement(I,{studyDescription:this.props.studyDescription,studyId:this.props.studyId,isVirtualStudy:this.props.isVirtualStudy}),children:this.props.children})}},{key:"render",value:function(){return this.renderTooltip()}}]),t}(),D=M=j([u.observer],M),N=n(148);function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(e,t,n){return t&&V(e.prototype,t),n&&V(e,n),e}function F(e,t){return!t||"object"!==z(t)&&"function"!=typeof t?U(e):t}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var K=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":z(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Q=Object.assign(Object.assign({},o),{Level:function(e){return o["Level".concat(e)]}}),Y=function(e){function t(){var e;return G(this,t),e=F(this,H(t).apply(this,arguments)),Object.defineProperty(U(e),"_view",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(U(e),"renderCancerType",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n,o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=e.logic.getDepth(t),c=e.view.getChildCancerTypes(t),u=e.view.getChildCancerStudies(t),p=e.logic.cancerTypeListView.getDescendantCancerStudies(t).map(function(e){return e.studyId});if(t!=e.rootCancerType){var d=a()(Q.CancerType,Q.Level(l));3===l&&(o=r.createElement(s.a,{className:Q.indentArrow,name:"long-arrow-right"})),n=r.createElement("li",{className:d},r.createElement(X,{view:e.view,node:t},o,r.createElement("span",null,t.name),!e.store.forDownloadTab&&r.createElement("span",{className:Q.SelectAll},f.a.intersection(p,e.store.selectableSelectedStudyIds).length?"Deselect All":"Select All")))}var h=a()(Q.StudyList,Q.Level(l));return r.createElement("ul",{key:i,className:h},n,u.map(e.renderCancerStudy),c.map(e.renderCancerType))}}),Object.defineProperty(U(e),"renderCancerStudy",{enumerable:!0,configurable:!0,writable:!0,value:function(t,n){var o=a()(Q.Study),i=t.studyId in e.store.getOverlappingStudiesMap,l=i?r.createElement(y.i,{mouseEnterDelay:0,placement:"top",overlay:r.createElement("div",null,"This study has overlapping data with another selected study.")},r.createElement("i",{className:"fa fa-exclamation-triangle"})):null,s=f.a.includes(e.store.selectableSelectedStudyIds,t.studyId)&&e.store.isMixedReferenceGenome,c=s?r.createElement(y.i,{mouseEnterDelay:0,placement:"top",overlay:r.createElement("div",null,"You are combining studies with molecular data based on both GRCh37/hg19 and GRCh38/hg38. This is not fully supported yet. Please double check your findings")},r.createElement("span",null,r.createElement("i",{className:"fa fa-exclamation-triangle"})," ",Object(N.b)(t.referenceGenome))):null;return r.createElement("li",{key:n,className:o,"data-test":e.store.isVirtualStudy(t.studyId)?"VirtualStudySelect":"StudySelect"},r.createElement(u.Observer,null,function(){var n,o=a()((L(n={},Q.StudyName,!0),L(n,"overlappingStudy",i||s),L(n,Q.DeletedStudy,e.store.isDeletedVirtualStudy(t.studyId)),L(n,"studyItem_".concat(t.studyId),!0),n));return r.createElement(X,{view:e.view,node:t},r.createElement("span",{className:o},t.name,l,c))}),r.createElement(u.Observer,null,function(){return r.createElement("div",{className:Q.StudyMeta},!e.store.isDeletedVirtualStudy(t.studyId)&&e.renderSamples(t),e.renderStudyLinks(t))}))}}),Object.defineProperty(U(e),"renderSamples",{enumerable:!0,configurable:!0,writable:!0,value:function(e){return r.createElement("span",{className:Q.StudySamples},"".concat(e.allSampleCount," samples"))}}),Object.defineProperty(U(e),"renderStudyLinks",{enumerable:!0,configurable:!0,writable:!0,value:function(t){if(e.store.isDeletedVirtualStudy(t.studyId))return r.createElement(y.i,{mouseEnterDelay:0,placement:"top",overlay:r.createElement("div",{className:Q.tooltip},"Restore study"),children:r.createElement("button",{className:"btn btn-default btn-xs",onClick:function(){return e.store.restoreVirtualStudy(t.studyId)},style:{lineHeight:"80%"},"data-test":"virtualStudyRestore"},"Restore")});var n=[{icon:"info-circle",tooltip:""}];return e.store.isVirtualStudy(t.studyId)?n.push({icon:"trash",tooltip:"Delete this virtual study.",onClick:function(){return e.store.deleteVirtualStudy(t.studyId)}}):n.push({icon:"book",onClick:t.pmid&&Object(h.w)(t.pmid),tooltip:t.pmid&&"PubMed"}),r.createElement("span",{className:Q.StudyLinks},n.map(function(n,o){var i,l=r.createElement(s.a,{key:o,name:n.icon,className:a()((i={},L(i,Q.icon,!0),L(i,Q.iconWithTooltip,!!n.tooltip),L(i,Q.trashIcon,"trash"===n.icon),L(i,Q.infoCircleIcon,"info-circle"===n.icon),i))});if(n.onClick){var c={key:o};"string"==typeof n.onClick?(c.href=n.onClick,c.target="_blank"):c.onClick=n.onClick,l=r.createElement("a",c,l)}if(n.tooltip){var u=r.createElement("div",{className:Q.tooltip,dangerouslySetInnerHTML:{__html:n.tooltip}});l=r.createElement(y.i,{key:o,mouseEnterDelay:0,placement:"top",overlay:u,children:l})}return"info-circle"===n.icon&&(l=r.createElement(D,{key:o,studyDescription:e.store.isVirtualStudy(t.studyId)?t.description.replace(/\r?\n/g,"<br />"):t.description,studyId:t.studyId,isVirtualStudy:e.store.isVirtualStudy(t.studyId),mouseEnterDelay:0,placement:"top"},r.createElement("a",null,l))),l}),t.studyId&&r.createElement(y.i,{mouseEnterDelay:0,placement:"top",overlay:r.createElement("div",{className:Q.tooltip},"View clinical and genomic data of this study")},r.createElement("span",null,r.createElement(b.a,{studyId:t.studyId,className:a()(Q.summaryIcon,"ci ci-pie-chart")}))))}}),e}return W(t,m["d"]),B(t,[{key:"componentDidMount",value:function(){this.props.showSelectedStudiesOnly&&(this._view=this.view)}},{key:"render",value:function(){var e=this,t=this.renderCancerType(this.rootCancerType);return this.props.showSelectedStudiesOnly?r.createElement("div",{className:Q.SelectedStudyList},r.createElement("span",{className:Q.deselectAll,onClick:function(){e.view.onCheck(e.store.treeData.rootCancerType,!1),e.store.showSelectedStudiesOnly=!1}},"Deselect all"),t):t}},{key:"view",get:function(){return this._view||(this.props.showSelectedStudiesOnly?this.logic.selectedStudiesView:this.logic.mainView)}},{key:"logic",get:function(){return this.store.studyListLogic}},{key:"rootCancerType",get:function(){return this.store.treeData.rootCancerType}}]),t}();Y=K([u.observer],Y);t.a=Y;var X=function(e){function t(e){var n;return G(this,t),n=F(this,H(t).call(this,e)),Object(p.makeObservable)(U(n)),n}return W(t,m["d"]),B(t,[{key:"render",value:function(){var e=this;return r.createElement(c.a,R({},this.checkboxProps,{onChange:function(t){e.props.view.onCheck(e.props.node,t.target.checked)}}),this.props.children)}},{key:"checkboxProps",get:function(){return this.props.view.getCheckboxProps(this.props.node)}}]),t}();K([p.computed.struct],X.prototype,"checkboxProps",null),X=K([u.observer],X)},1187:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__1Fjw6",framedImage:"styles-module__framedImage__3hqyk","tables-container":"styles-module__tables-container__1wDsF",downloadCopyTable:"styles-module__downloadCopyTable__1jMBv",noAlterationSpan:"styles-module__noAlterationSpan__1jy3D",notProfiledSpan:"styles-module__notProfiledSpan__2eZFJ",alterationSpan:"styles-module__alterationSpan__1oylB",tooltip:"styles-module__tooltip__2f1I5",infoIcon:"styles-module__infoIcon__2ZQ2T"}},1260:function(e,t,n){"use strict";var r=n(0),o=n(1),i=n(2),a=n(9),l=n(804),s=n(1286),c=n(72),u=(n(1289),n(10)),p=n(94);function d(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function f(e,t,n,r,i){return o.mapValues(e,function(e,a){var l={mutated:0,amp:0,homdel:0,hetloss:0,gain:0,structuralVariant:0,mrnaExpressionHigh:0,mrnaExpressionLow:0,protExpressionHigh:0,protExpressionLow:0,multiple:0},s={mutation:0,cna:0,expression:0,protein:0,structuralVariant:0},c={mutation:0,cna:0,expression:0,protein:0,structuralVariant:0},d={profiledSampleTotal:0,alterationTotal:0,alterationTypeCounts:l,alteredSampleCount:0,parentCancerType:e[0].cancerType,profiledSamplesCounts:s,notProfiledSamplesCounts:c};return o.forEach(e,function(e){var a=!1;if(o.forEach(n,function(t,n){var l=o.some(Object(p.b)(e.uniqueSampleKey,o.map(t,function(e){return e.molecularProfileId}),r,i));switch(a=a||l,n){case u.a.COPY_NUMBER_ALTERATION:l?s.cna++:c.cna++;break;case u.a.MRNA_EXPRESSION:l?s.expression++:c.expression++;break;case u.a.PROTEIN_LEVEL:l?s.protein++:c.protein++;break;case u.a.MUTATION_EXTENDED:l?s.mutation++:c.mutation++;break;case u.a.STRUCTURAL_VARIANT:l?s.structuralVariant++:c.structuralVariant++}}),a&&(d.profiledSampleTotal+=1),e.uniqueSampleKey in t){var f=t[e.uniqueSampleKey],h=o.uniqBy(f,function(e){return e.alterationType});d.alterationTotal+=h.length,h.length>0&&(d.alteredSampleCount+=1),h.length>1?l.multiple++:o.forEach(h,function(e){switch(e.alterationType){case u.a.COPY_NUMBER_ALTERATION:l[e.alterationSubType]++;break;case u.a.MRNA_EXPRESSION:"high"===e.alterationSubType&&l.mrnaExpressionHigh++,"low"===e.alterationSubType&&l.mrnaExpressionLow++;break;case u.a.PROTEIN_LEVEL:"high"===e.alterationSubType&&l.protExpressionHigh++,"low"===e.alterationSubType&&l.protExpressionLow++;break;case u.a.MUTATION_EXTENDED:l.mutated++;break;case u.a.STRUCTURAL_VARIANT:l.structuralVariant++}})}}),d})}var h=n(333),m=n(6),y=n(335),b=n(178),g=n(19),v=n(12),_=n(334),w=n(45);function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",function(){return j});var x=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":T(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},j="all",A=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=k(t).call(this,e))||"object"!==T(o)&&"function"!=typeof o?C(r):o,Object.defineProperty(C(n),"activeTab",{enumerable:!0,configurable:!0,writable:!0,value:j}),Object.defineProperty(C(n),"resultsViewPageWidth",{enumerable:!0,configurable:!0,writable:!0,value:1150}),Object.defineProperty(C(n),"groupAlterationsBy_userSelection",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(C(n),"resultsViewPageContent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object(i.makeObservable)(C(n)),n.handleTabClick=n.handleTabClick.bind(C(n)),n.pivotData=n.pivotData.bind(C(n)),n.mapStudyIdToName=n.mapStudyIdToName.bind(C(n)),n}var n,a,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,r["Component"]),n=t,(a=[{key:"handleTabClick",value:function(e){this.activeTab=e}},{key:"pivotData",value:function(e){this.groupAlterationsBy_userSelection=e}},{key:"mapStudyIdToName",value:function(e){return e in this.props.store.physicalStudySet?Object(w.f)(this.props.store.physicalStudySet[e].name):e}},{key:"handleStudyLinkout",value:function(e,t){var n,r=Object.assign({},this.props.store.urlWrapper.query,(S(n={},b.a.cancer_study_list,e),S(n,b.a.gene_list,t||this.props.store.urlWrapper.query.gene_list),n));window.open(Object(g.b)("/results")).clientPostedData=r}},{key:"render",value:function(){var e=this;switch(Object(m.Z)(this.props.store.filteredSamplesExtendedWithClinicalData,this.props.store.oqlFilteredAlterationsByGeneBySampleKey,this.props.store.studies,this.props.store.filteredSequencedSampleKeysByGene,this.props.store.selectedMolecularProfileIdsByAlterationType,this.props.store.coverageInformation)){case"pending":return r.createElement(c.a,{isLoading:!0,center:!0,size:"big"});case"error":return null;case"complete":return r.createElement("div",{ref:function(t){return e.resultsViewPageContent=t},"data-test":"cancerTypeSummaryWrapper"},r.createElement("div",{className:"tabMessageContainer"},r.createElement(h.a,{className:"cancer-types-summary-oql-status-banner",store:this.props.store,tabReflectsOql:!0}),r.createElement(y.a,{store:this.props.store}),r.createElement(_.a,{store:this.props.store})),r.createElement(l.b,{onTabClick:this.handleTabClick,unmountOnHide:!0,arrowStyle:{"line-height":.8},tabButtonStyle:"pills",activeTabId:this.activeTab,className:"pillTabs"},this.tabs))}}},{key:"defaultTabId",get:function(){return j}},{key:"groupAlterationsBy",get:function(){return void 0===this.groupAlterationsBy_userSelection?this.props.store.studies.result.length>1?"studyId":1===o.chain(this.props.store.filteredSamplesExtendedWithClinicalData.result).map(function(e){return e.cancerType}).uniq().value().length?"cancerTypeDetailed":"cancerType":this.groupAlterationsBy_userSelection}},{key:"tabs",get:function(){var e,t,n,i,a,c=this,u="studyId"===this.groupAlterationsBy?this.mapStudyIdToName:void 0,p=(e=this.props.store.oqlFilteredAlterationsByGeneBySampleKey.result,t=this.props.store.filteredSamplesExtendedWithClinicalData.result,n=this.groupAlterationsBy,i=this.props.store.selectedMolecularProfileIdsByAlterationType.result,a=this.props.store.coverageInformation.result,o.mapValues(e,function(e,r){return f(o.groupBy(t,function(e){return e[n]}),e,i,a,r)})),h=o.map(this.props.store.genes.result,function(e){var t=p[e.hugoGeneSymbol],n=0===o.reduce(t,function(e,t){return e+t.alterationTotal},0)?{color:"#bbb"}:void 0;return r.createElement(l.a,O({key:e.hugoGeneSymbol,id:"summaryTab"+e.hugoGeneSymbol,linkText:e.hugoGeneSymbol},{anchorStyle:n}),r.createElement(s.a,{groupedAlterationData:p[e.hugoGeneSymbol],handleStudyLinkout:c.handleStudyLinkout,groupAlterationsBy:c.groupAlterationsBy,gene:e.hugoGeneSymbol,labelTransformer:u,handlePivotChange:c.pivotData,width:c.resultsViewPageWidth}))});if(h.length>1){var m=function(e,t,n,r,i){var a=o.groupBy(t,function(e){return e[n]}),l=o.flatMap(e,function(e){return e});return f(a,o.mergeWith.apply(o,[{}].concat(d(l),[function(e,t){if(o.isArray(e))return e.concat(t)}])),r,i)}(this.props.store.oqlFilteredAlterationsByGeneBySampleKey.result,this.props.store.filteredSamplesExtendedWithClinicalData.result,this.groupAlterationsBy,this.props.store.selectedMolecularProfileIdsByAlterationType.result,this.props.store.coverageInformation.result);h.unshift(r.createElement(l.a,{key:j,id:"allGenes",linkText:"All Queried Genes"},r.createElement(s.a,{gene:j,width:this.resultsViewPageWidth,groupedAlterationData:m,handlePivotChange:this.pivotData,labelTransformer:u,groupAlterationsBy:this.groupAlterationsBy,handleStudyLinkout:this.handleStudyLinkout})))}return h}}])&&E(n.prototype,a),u&&E(n,u),t}();x([i.observable],A.prototype,"activeTab",void 0),x([i.observable],A.prototype,"resultsViewPageWidth",void 0),x([i.observable],A.prototype,"groupAlterationsBy_userSelection",void 0),x([i.computed],A.prototype,"tabs",null),x([v.default],A.prototype,"handleStudyLinkout",null),A=x([a.observer],A);t.b=A},1286:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return P});var r=n(0),o=n(1),i=n(17),a=n(2),l=n(9),s=n(332),c=n.n(s),u=n(23),p=n(5),d=n.n(p),f=(n(869),n(836),n(1287)),h=n(945);function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var w=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":_(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},O={multiple:"Multiple Alterations",protExpressionLow:"Protein Low",protExpressionHigh:"Protein High",mrnaExpressionLow:"mRNA Low",mrnaExpressionHigh:"mRNA High",hetloss:"Shallow Deletion",homdel:"Deep Deletion",gain:"Gain",amp:"Amplification",structuralVariant:"Structural Variant",mutated:"Mutation"},S={protein:"Protein data",expression:"mRNA data",cna:"CNA data",mutation:"Mutation data",structuralVariant:"Structural variant data"},E={mutated:"#008000",amp:"#ff0000",homdel:"#0000ff",hetloss:"#8fd8d8",gain:"rgb(255,182,193)",structuralVariant:"#8B00C9",mrnaExpressionHigh:"#FF989A",mrnaExpressionLow:"#529AC8",protExpressionHigh:"#FF989A",protExpressionLow:"#E0FFFF",multiple:"#666"},k=[{value:"studyId",label:"Cancer Study"},{value:"cancerType",label:"Cancer Type"},{value:"cancerTypeDetailed",label:"Cancer Type Detailed"}];function C(e,t){return e/t*100}var P=function(t){function n(e){var t,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),r=this,t=!(o=b(n).call(this,e))||"object"!==_(o)&&"function"!=typeof o?g(r):o,Object.defineProperty(g(t),"inputYAxisEl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(g(t),"inputXAxisEl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(g(t),"totalCasesMinDefaultValue",{enumerable:!0,configurable:!0,writable:!0,value:10}),Object.defineProperty(g(t),"tempAltCasesInputValue",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(g(t),"tempTotalCasesInputValue",{enumerable:!0,configurable:!0,writable:!0,value:t.totalCasesMin}),Object.defineProperty(g(t),"pngAnchor",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(g(t),"pdf",{enumerable:!0,configurable:!0,writable:!0,value:{anchor:"",width:0,height:0}}),Object.defineProperty(g(t),"showControls",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(g(t),"hideGenomicAlterations",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(g(t),"yAxis",{enumerable:!0,configurable:!0,writable:!0,value:"alt-freq"}),Object.defineProperty(g(t),"xAxis",{enumerable:!0,configurable:!0,writable:!0,value:"y-axis"}),Object.defineProperty(g(t),"altCasesValue",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(g(t),"totalCasesValue",{enumerable:!0,configurable:!0,writable:!0,value:t.totalCasesMin}),Object.defineProperty(g(t),"tempTotalCasesValue",{enumerable:!0,configurable:!0,writable:!0,value:t.totalCasesMin}),Object.defineProperty(g(t),"tempAltCasesValue",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(g(t),"viewCountsByCancerSubType",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(g(t),"chartComponent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object(a.makeObservable)(g(t)),t.handleYAxisChange=t.handleYAxisChange.bind(g(t)),t.handleXAxisChange=t.handleXAxisChange.bind(g(t)),t.handleGenomicCheckboxChange=t.handleGenomicCheckboxChange.bind(g(t)),t.handleCancerTypeCheckboxChange=t.handleCancerTypeCheckboxChange.bind(g(t)),t.handleAltSliderChange=t.handleAltSliderChange.bind(g(t)),t.handleTotalSliderChange=t.handleTotalSliderChange.bind(g(t)),t.handleAltSliderChangeComplete=t.handleAltSliderChangeComplete.bind(g(t)),t.handleTotalSliderChangeComplete=t.handleTotalSliderChangeComplete.bind(g(t)),t.handleAltInputChange=t.handleAltInputChange.bind(g(t)),t.handleAltInputKeyPress=t.handleAltInputKeyPress.bind(g(t)),t.handleTotalInputChange=t.handleTotalInputChange.bind(g(t)),t.handleTotalInputKeyPress=t.handleTotalInputKeyPress.bind(g(t)),t.setPngAnchor=t.setPngAnchor.bind(g(t)),t}var l,s,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(n,r["Component"]),l=n,(s=[{key:"componentDidMount",value:function(){this.initializeSliderValue()}},{key:"getYValue",value:function(e,t){return"abs-count"===this.yAxis?e:e/t*100}},{key:"determineSorterAndDirection",value:function(){var e,t,n=this;return"x-axis"===this.xAxis?(e=function(e){return e},t="asc"):(e="abs-count"===this.yAxis?function(e){return n.countsData[e].alteredSampleCount}:function(e){var t=n.countsData[e];return t.alteredSampleCount/t.profiledSampleTotal},t="desc"),{sorter:e,dir:t}}},{key:"transformLabel",value:function(e){return this.props.labelTransformer?this.props.labelTransformer(e):e}},{key:"handleYAxisChange",value:function(e){this.yAxis=e.target.value,this.altCasesValue=0,this.handleAltSliderChange(0)}},{key:"handleXAxisChange",value:function(e){this.xAxis=e.target.value}},{key:"handleCancerTypeCheckboxChange",value:function(){this.viewCountsByCancerSubType=!1===this.viewCountsByCancerSubType}},{key:"handleGenomicCheckboxChange",value:function(){this.hideGenomicAlterations=!this.hideGenomicAlterations}},{key:"handleAltSliderChange",value:function(e){this.tempAltCasesValue=e,this.tempAltCasesInputValue=e}},{key:"handleTotalSliderChange",value:function(e){this.tempTotalCasesValue=e,this.tempTotalCasesInputValue=e}},{key:"handleAltInputKeyPress",value:function(e){if(13===e.charCode){if(isNaN(this.tempAltCasesInputValue))return void(this.tempAltCasesInputValue=0);this.tempAltCasesInputValue=Number(this.tempAltCasesInputValue),this.tempAltCasesValue=this.tempAltCasesInputValue,this.handleAltSliderChangeComplete()}}},{key:"handleTotalInputKeyPress",value:function(e){13===e.charCode&&(isNaN(this.tempTotalCasesInputValue)?this.tempTotalCasesInputValue=this.totalCasesMin:this.tempTotalCasesInputValue>this.totalCasesMax?(this.tempTotalCasesInputValue=this.totalCasesMax,this.tempTotalCasesValue=this.totalCasesMax):(this.tempTotalCasesInputValue=Number(this.tempTotalCasesInputValue),this.tempTotalCasesValue=this.tempTotalCasesInputValue),this.handleTotalSliderChangeComplete())}},{key:"handleAltInputChange",value:function(e){this.tempAltCasesInputValue=e.target.value.replace(/[^0-9\.]/g,"")}},{key:"handleTotalInputChange",value:function(e){this.tempTotalCasesInputValue=e.target.value.replace(/[^0-9\.]/g,"")}},{key:"handleAltSliderChangeComplete",value:function(){this.altCasesValue=this.tempAltCasesValue}},{key:"handleTotalSliderChangeComplete",value:function(){this.totalCasesValue=this.tempTotalCasesValue}},{key:"initializeSliderValue",value:function(){this.tempAltCasesValue=0,this.tempAltCasesInputValue=0,this.altCasesValue=0,this.tempTotalCasesValue=this.totalCasesMin,this.tempTotalCasesInputValue=this.totalCasesMin,this.totalCasesValue=this.totalCasesMin}},{key:"setPngAnchor",value:function(e){this.pngAnchor=e}},{key:"render",value:function(){var t=this;return this.alterationTypeDataCounts.length?r.createElement(h.a,{offset:60},r.createElement(u.If,{condition:this.hasAlterations},r.createElement(u.Then,null,r.createElement("div",{"data-test":"cancerTypesSummaryDiv"},r.createElement("div",{className:"cancer-summary--main-options"},r.createElement(i.ButtonGroup,null,k.map(function(n,o){return r.createElement(i.Radio,{checked:n.value===t.props.groupAlterationsBy,onChange:function(n){t.initializeSliderValue(),t.props.handlePivotChange(e(n.target).attr("data-value"))},inline:!0,"data-value":n.value},n.label)}))),r.createElement("div",{className:d()("inlineBlock",{hidden:!this.showControls},"cancer-summary-secondary-options")},this.controls),r.createElement("div",{className:d()("alert","alert-success",{hidden:!this.totalCaseChanged&&!this.altCaseChanged})},r.createElement("span",{style:{verticalAlign:"middle"}},"".concat(this.chartData.labels.length," of ").concat(this.groupKeysSorted.length," categories (").concat(o.keyBy(k,"value")[this.props.groupAlterationsBy].label,") are shown based on filtering."))),r.createElement(f.a,{gene:this.props.gene,key:Date.now(),data:this.chartData.data,alterationTypeDataCounts:this.chartData.alterationTypeDataCounts,ref:function(e){return t.chartComponent=e},countsByGroup:this.countsData,representedAlterations:this.chartData.representedAlterations,alterationTypes:O,isPercentage:"alt-freq"===this.yAxis,showLinks:this.showStudyTooltipLinks,colors:E,hideGenomicAlterations:this.hideGenomicAlterations,xLabels:this.chartData.labels,xAxisString:(k.find(function(e){return e.value==t.props.groupAlterationsBy})||{}).label||"Cancer",handleStudyLinkout:this.props.handleStudyLinkout}))),r.createElement(u.Else,null,r.createElement("div",{className:"alert alert-info"},"There are no alterations in this gene.")))):r.createElement("div",{className:"alert alert-info"},"No data to plot.")}},{key:"countsData",get:function(){return this.props.groupedAlterationData}},{key:"groupKeysSorted",get:function(){var e=this.determineSorterAndDirection(),t=e.dir,n=e.sorter;return o.chain(this.countsData).keys().orderBy(n,[t]).value()}},{key:"alterationTypeDataCounts",get:function(){var e=this,t=[];return o.forEach(this.groupKeysSorted,function(n){var r,i=e.countsData[n],a=o.chain(i.profiledSamplesCounts).values().sum().value(),l=C(i.alteredSampleCount,i.profiledSampleTotal);r="abs-count"===e.yAxis?i.alteredSampleCount>=e.tempAltCasesValue:l>=e.tempAltCasesValue;var s=i.profiledSampleTotal>=e.totalCasesValue;a>0&&r&&s&&o.forEach(o.keys(S),function(r){var o=i.profiledSamplesCounts[r],a=i.notProfiledSamplesCounts[r];o+a>0&&t.push({x:e.props.labelTransformer?e.props.labelTransformer(n):n,y:S[r],profiledCount:o,notProfiledCount:a})})}),t}},{key:"chartData",get:function(){var e=this,t={},n=0,r=0,i=0,a=[],l=o.map(O,function(l,s){return o.reduce(e.groupKeysSorted,function(l,c){var u,p=e.countsData[c],d=o.chain(p.profiledSamplesCounts).values().sum().value(),f=C(p.alteredSampleCount,p.profiledSampleTotal);u="abs-count"===e.yAxis?p.alteredSampleCount>=e.tempAltCasesValue:f>=e.tempAltCasesValue;var h=p.profiledSampleTotal>=e.totalCasesValue;if(d>0&&u&&h){var m=e.props.labelTransformer?e.props.labelTransformer(c):c;a.push(m),n=f>n?f:n,r=p.alteredSampleCount>r?p.alteredSampleCount:r,i=p.profiledSampleTotal>i?p.profiledSampleTotal:i;var y=p.alterationTypeCounts[s];y>0&&(t[s]=!0),l.push({alterationType:s,x:m,xKey:c,y:e.getYValue(y,p.profiledSampleTotal)})}return l},[])});return{labels:o.uniq(a),data:l,alterationTypeDataCounts:this.alterationTypeDataCounts,representedAlterations:t,maxPercentage:n,maxAbsoluteCount:r,maxSampleCount:i}}},{key:"altCasesMax",get:function(){return"abs-count"===this.yAxis?this.chartData.maxAbsoluteCount:this.chartData.maxPercentage}},{key:"totalCasesMax",get:function(){return this.chartData.maxSampleCount}},{key:"totalCasesMin",get:function(){return this.totalCasesMax>10?this.totalCasesMinDefaultValue:0}},{key:"hasAlterations",get:function(){return o.reduce(this.countsData,function(e,t){return e+t.alterationTotal},0)>0}},{key:"totalCaseChanged",get:function(){return this.totalCasesValue>0}},{key:"altCaseChanged",get:function(){return this.altCasesValue>0}},{key:"showStudyTooltipLinks",get:function(){return"studyId"===this.props.groupAlterationsBy&&this.chartData.labels.length>1}},{key:"controls",get:function(){var e=this,t="alt-freq"===this.yAxis?"%":"";return r.createElement("div",{className:"cancer-summary--form-controls"},r.createElement("table",null,r.createElement("tr",null,r.createElement("td",null,r.createElement(i.ControlLabel,null,"Y-Axis Value:")),r.createElement("td",{className:"dashed-border-right"},r.createElement(i.FormControl,{componentClass:"select","data-test":"cancerSummaryYAxisSelect",onChange:this.handleYAxisChange,ref:function(t){return e.inputYAxisEl=t}},r.createElement("option",{value:"alt-freq"},"Alteration Frequency"),r.createElement("option",{value:"abs-count"},"Absolute Counts"))),r.createElement("td",null,r.createElement(i.ControlLabel,null,"Min. # Total Cases:")),r.createElement("td",null,r.createElement("div",{className:"slider-holder"},r.createElement("div",{className:"slider custom-labels"},r.createElement(c.a,{min:0,max:this.totalCasesMax,value:this.tempTotalCasesValue,labels:m({0:0},this.totalCasesMax,this.totalCasesMax),onChange:this.handleTotalSliderChange,onChangeComplete:this.handleTotalSliderChangeComplete})))),r.createElement("td",{className:d()(this.totalCaseChanged?"highlightInput":"","dashed-border-right","slider-input")},r.createElement(i.FormControl,{type:"text",value:this.tempTotalCasesInputValue,"data-test":"sampleTotalThresholdInput",onChange:this.handleTotalInputChange,onKeyPress:this.handleTotalInputKeyPress})),r.createElement("td",null,r.createElement(i.Checkbox,{checked:!this.hideGenomicAlterations,onChange:this.handleGenomicCheckboxChange},"Show Genomic Alteration Types"))),r.createElement("tr",null,r.createElement("td",null,r.createElement(i.ControlLabel,null,"Sort X-Axis By:")),r.createElement("td",{className:"dashed-border-right"},r.createElement(i.FormControl,{componentClass:"select","data-test":"cancerSummaryXAxisSelect",onChange:this.handleXAxisChange,ref:function(t){return e.inputXAxisEl=t}},r.createElement("option",{value:"y-axis"},"Y-Axis Values"),r.createElement("option",{value:"x-axis"},"Alphabetically"))),r.createElement("td",null,r.createElement(i.ControlLabel,null,"Min. ".concat("alt-freq"===this.yAxis?"%":"#"," Altered Cases:"))),r.createElement("td",null,r.createElement("div",{className:"slider-holder"},r.createElement("div",{className:"slider custom-labels"},r.createElement(c.a,{min:0,max:this.altCasesMax,value:this.tempAltCasesValue,labels:m({0:0+t},this.altCasesMax,Math.ceil(this.altCasesMax)+t),format:function(e){return e+t},onChange:this.handleAltSliderChange,onChangeComplete:this.handleAltSliderChangeComplete})))),r.createElement("td",{className:d()(this.altCaseChanged?"highlightInput":"","dashed-border-right","slider-input")},r.createElement(i.FormControl,{type:"text",value:this.tempAltCasesInputValue+t,onChange:this.handleAltInputChange,"data-test":"alterationThresholdInput",onKeyPress:this.handleAltInputKeyPress})))))}}])&&y(l.prototype,s),p&&y(l,p),n}();w([a.observable],P.prototype,"tempAltCasesInputValue",void 0),w([a.observable],P.prototype,"tempTotalCasesInputValue",void 0),w([a.observable],P.prototype,"pngAnchor",void 0),w([a.observable],P.prototype,"pdf",void 0),w([a.observable],P.prototype,"showControls",void 0),w([a.observable],P.prototype,"hideGenomicAlterations",void 0),w([a.observable],P.prototype,"yAxis",void 0),w([a.observable],P.prototype,"xAxis",void 0),w([a.observable],P.prototype,"altCasesValue",void 0),w([a.observable],P.prototype,"totalCasesValue",void 0),w([a.observable],P.prototype,"tempTotalCasesValue",void 0),w([a.observable],P.prototype,"tempAltCasesValue",void 0),w([a.observable],P.prototype,"viewCountsByCancerSubType",void 0),w([a.computed],P.prototype,"alterationTypeDataCounts",null),w([a.computed],P.prototype,"chartData",null),w([a.computed],P.prototype,"altCasesMax",null),w([a.computed],P.prototype,"totalCasesMax",null),w([a.computed],P.prototype,"totalCasesMin",null),w([a.computed],P.prototype,"hasAlterations",null),w([a.computed],P.prototype,"totalCaseChanged",null),w([a.computed],P.prototype,"altCaseChanged",null),w([a.computed],P.prototype,"showStudyTooltipLinks",null),w([a.action],P.prototype,"handleTotalInputKeyPress",null),w([a.action],P.prototype,"initializeSliderValue",null),w([a.computed],P.prototype,"controls",null),P=w([l.observer],P)}).call(this,n(26))},1287:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return D});var r=n(0),o=n(1),i=n(18),a=n(425),l=n(2),s=n(9),c=n(12),u=n(1288),p=n(5),d=n.n(p),f=n(29),h=n(220),m=n(17),y=n(3),b=n(999),g=n(23),v=n(208),_=n(95),w=n.n(_),O=n(1260),S=n(424);function E(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var j=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":x(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},A=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function l(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,l)}s((r=r.apply(e,t||[])).next())})};function I(e){return o.round(100*e,2)}function M(e){var t=e[0].map(function(e){return e.x}),n=e.reduce(function(e,t){return t.forEach(function(t){e[t.x]=e[t.x]||0,e[t.x]+=t.y}),e},{});return t.map(function(e){return{x:e,y:n[e],alterationType:"whatever"}})}var D=function(t){function n(e){var t,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),r=this,t=!(o=C(n).call(this,e))||"object"!==x(o)&&"function"!=typeof o?P(r):o,Object.defineProperty(P(t),"barPlotTooltipModel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(P(t),"scatterPlotTooltipModel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(P(t),"barToolTipCounter",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(P(t),"isBarPlotTooltipHovered",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(P(t),"shouldUpdatePosition",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(P(t),"mousePosition",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0}}),Object.defineProperty(P(t),"plotSvg",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(P(t),"dummyScrollPane",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(P(t),"scrollPane",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(P(t),"scrollingDummyPane",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(P(t),"plotElementWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object(l.makeObservable)(P(t)),t}var c,p,_;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(n,r["Component"]),c=n,(p=[{key:"getSvg",value:function(){return this.plotSvg}},{key:"assignScrollPaneRef",value:function(t){this.scrollPane=t,t&&(this.synchronizeScrollPanes(),e(t).scroll(this.synchronizeScrollPanes))}},{key:"assignDummyScrollPaneRef",value:function(t){var n=this;this.dummyScrollPane=t,t&&(this.synchronizeScrollPanes(),e(t).scroll(this.synchronizeScrollPanes),e(t).on("mousedown",function(){n.scrollingDummyPane=!0}),e(t).on("mouseup",function(){n.scrollingDummyPane=!1}))}},{key:"assignPlotSvgRef",value:function(e){this.plotSvg=e,this.plotElementWidth=e?e.scrollWidth:0}},{key:"synchronizeScrollPanes",value:function(){this.scrollPane&&this.dummyScrollPane&&(this.scrollingDummyPane?this.scrollPane.scrollLeft=this.dummyScrollPane.scrollLeft:this.dummyScrollPane.scrollLeft=this.scrollPane.scrollLeft)}},{key:"tooltipMouseEnter",value:function(){this.isBarPlotTooltipHovered=!0}},{key:"tooltipMouseLeave",value:function(){this.isBarPlotTooltipHovered=!1,this.barPlotTooltipModel=null}},{key:"queryStudy",value:function(e){return A(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.props.gene!=O.a&&(n=this.props.gene),this.props.handleStudyLinkout&&this.props.handleStudyLinkout(e,n);case 2:case"end":return t.stop()}},t,this)}))}},{key:"formatStudyLink",value:function(e){return w.a.format({pathname:"/"+v.a.Study,query:{id:e}})}},{key:"onMouseMove",value:function(e){this.shouldUpdatePosition&&(this.mousePosition.x=e.pageX,this.mousePosition.y=e.pageY)}},{key:"barWidth",value:function(){return 20}},{key:"barSeparation",value:function(){return 8}},{key:"tickFormat",value:function(){return this.props.isPercentage?function(e){return"".concat(e,"%")}:function(e){return e}}},{key:"domainPadding",value:function(){return 20}},{key:"categoryAxisDomainPadding",value:function(){return this.domainPadding()}},{key:"countAxisDomainPadding",value:function(){return this.domainPadding()}},{key:"chartDomainPadding",value:function(){return{y:this.countAxisDomainPadding(),x:this.categoryAxisDomainPadding()}}},{key:"barChartHeight",value:function(){return 400}},{key:"getData",value:function(e){var t=this.convertDataToDownloadData(this.props.data);return Object(a.b)([[this.props.xAxisString,this.yAxisLabel,"Alteration Type"]].concat(t))}},{key:"convertDataToDownloadData",value:function(e){for(var t=[],n=e.length,r=e[0].length,o=0;o<r;o++)for(var i=0;i<n;i++)0!=e[i][o].y&&t.push([e[i][o].x,e[i][o].y.toString(),e[i][o].alterationType]);return t}},{key:"getChart",value:function(){return r.createElement("div",{style:this.overflowStyle,className:"borderedChart"},r.createElement(S.a,{plotElementWidth:this.plotElementWidth,assignDummyScrollPaneRef:this.assignDummyScrollPaneRef,scrollPane:this.scrollPane},r.createElement("div",{style:{overflowX:"auto",overflowY:"hidden"},className:"hideScrollbar",ref:this.assignScrollPaneRef},r.createElement("svg",{style:{width:this.svgWidth,height:this.svgHeight,pointerEvents:"all"},height:this.svgHeight,width:this.svgWidth,role:"img",viewBox:"0 0 ".concat(this.svgWidth," ").concat(this.svgHeight),ref:this.assignPlotSvgRef,onMouseMove:this.onMouseMove},r.createElement("g",{transform:"translate(".concat(this.leftPadding,", 0)")},r.createElement(i.VictoryChart,{theme:y.a,width:this.chartWidth,height:this.barChartHeight(),standalone:!1,domainPadding:this.chartDomainPadding(),singleQuadrantDomainPadding:{y:!0,x:!1}},r.createElement(i.VictoryAxis,{dependentAxis:!0,axisLabelComponent:r.createElement(i.VictoryLabel,{dy:-50}),label:this.yAxisLabel,tickFormat:this.tickFormat,offsetX:50,orientation:"left"}),r.createElement(i.VictoryAxis,{tickValues:this.props.xLabels,style:{ticks:{size:0,strokeWidth:0},tickLabels:{fontSize:0},grid:{stroke:0}}}),r.createElement(i.VictoryStack,{colorScale:this.colorArray},this.barPlots),!this.props.hideGenomicAlterations&&r.createElement(i.VictoryLegend,{x:10,y:this.svgHeight-30,orientation:"horizontal",data:this.legendData}))),r.createElement("g",{transform:"translate(".concat(this.leftPadding,", ").concat(this.scatterPlotTopPadding,")")},r.createElement(i.VictoryChart,{theme:y.a,width:this.chartWidth,height:this.scatterChartHeight,standalone:!1,domainPadding:this.chartDomainPadding(),singleQuadrantDomainPadding:{y:!0,x:!1}},r.createElement(i.VictoryAxis,{orientation:"bottom",crossAxis:!1,tickValues:this.props.xLabels,style:{axis:{strokeWidth:0},ticks:{size:0,strokeWidth:0},grid:{stroke:0}},tickLabelComponent:r.createElement(i.VictoryLabel,{angle:50,verticalAnchor:"start",textAnchor:"start"})}),r.createElement(i.VictoryAxis,{orientation:"left",dependentAxis:!0,crossAxis:!1,style:{axis:{strokeWidth:0},ticks:{size:0,strokeWidth:0},grid:{stroke:0}}}),r.createElement(i.VictoryScatter,{size:this.barWidth()/5,style:{data:{fill:"black",cursor:function(e){return e.cursor}}},data:this.scatterData,events:this.scatterPlotMouseEvents})))))),r.createElement(y.j,{getSvg:this.getSvg,getData:this.getData,filename:"cancer_types_summary",dontFade:!0,type:"button",buttons:["SVG","PNG","PDF","Data"],style:{position:"absolute",top:10,right:10}}))}},{key:"render",value:function(){return r.createElement("div",{"data-test":"cancerTypeSummaryChart"},r.createElement(s.Observer,null,this.getChart),this.scatterPlotTooltipComponent,this.barPlotTooltipComponent)}},{key:"scatterPlotTooltipComponent",get:function(){if(this.scatterPlotTooltipModel){var e=this.scatterPlotTooltipModel.datum.profiledCount,t="Not profiled";e>0&&(t="".concat(e," ").concat(Object(y.ub)("sample",e),"  profiled"));var n=this.mousePosition.x>h.a.size.width-400?"left":"right";return f.createPortal(r.createElement(m.Popover,{arrowOffsetTop:b.b,className:d()("cbioportal-frontend","cbioTooltip"),positionLeft:this.mousePosition.x+("left"===n?-b.a:b.a),positionTop:this.mousePosition.y-b.b,style:{transform:"left"===n?"translate(-100%,0%)":void 0,maxWidth:400},placement:n},r.createElement("div",{style:{whiteSpace:"normal"}},t)),document.body)}return null}},{key:"barPlotTooltipComponent",get:function(){var e=this;if(this.barPlotTooltipModel){var t=this.barPlotTooltipModel,n=this.mousePosition.x>h.a.size.width-400?"left":"right";return f.createPortal(r.createElement(m.Popover,{onMouseLeave:this.tooltipMouseLeave,onMouseEnter:this.tooltipMouseEnter,arrowOffsetTop:b.b,className:d()("cbioportal-frontend","cbioTooltip"),positionLeft:this.mousePosition.x+("left"===n?-b.a:b.a),positionTop:this.mousePosition.y-b.b,style:{transform:"left"===n?"translate(-100%,0%)":void 0,maxWidth:400},placement:n},r.createElement("div",null,r.createElement(g.If,{condition:this.props.showLinks},r.createElement(g.Then,null,r.createElement("strong",null,r.createElement("a",{href:this.formatStudyLink(t.studyId),target:"_blank"},t.groupName," ",r.createElement("i",{className:"fa fa-external-link",style:{fontWeight:"bold"}})))),r.createElement(g.Else,null,r.createElement("strong",null,"Summary for ",t.groupName))),r.createElement("p",null,"Gene altered in"," ",I(t.alterationData.alteredSampleCount/t.alterationData.profiledSampleTotal),"% of"," ",t.alterationData.profiledSampleTotal," ","cases"),r.createElement("table",{className:"table table-striped"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"Alteration"),r.createElement("th",null,"Frequency"))),r.createElement("tbody",null,o.reduce(this.props.alterationTypes,function(e,n,o){if(o in t.alterationData.alterationTypeCounts&&t.alterationData.alterationTypeCounts[o]>0){var i=t.alterationData.alterationTypeCounts[o];e.push(r.createElement("tr",null,r.createElement("td",null,n),r.createElement("td",null,I(t.alterationData.alterationTypeCounts[o]/t.alterationData.profiledSampleTotal),"% (",i," ",Object(y.ub)("case",i),")")))}return e},[]).reverse())),r.createElement(g.If,{condition:this.props.showLinks},r.createElement("div",{className:"btn btn-primary btn-xs",onClick:function(){e.queryStudy(t.studyId)}},"Query this study",this.props.gene==O.a?"":" for ".concat(this.props.gene))))),document.body)}return null}},{key:"svgWidth",get:function(){return this.chartWidth+this.rightPadding+this.leftPadding}},{key:"chartWidth",get:function(){return this.props.xLabels.length*(this.barWidth()+this.barSeparation())+100}},{key:"svgHeight",get:function(){return this.barChartHeight()+this.scatterChartHeight+this.bottomPadding-100}},{key:"rightPadding",get:function(){return Math.max(200,this.legendWidth-this.chartWidth+20)}},{key:"legendWidth",get:function(){var e=this.legendData.map(function(e){return e.name});return 6*e.join("").length+40*e.length}},{key:"leftPadding",get:function(){return Math.max(50,4*Math.max.apply(Math,E(this.scatterData.map(function(e){return e.y.length}))))}},{key:"bottomPadding",get:function(){return 5*Object(u.a)(this.props.xLabels)+40}},{key:"colorArray",get:function(){var e=this;return o.map(this.props.alterationTypes,function(t,n){return e.props.colors[n]})}},{key:"legendData",get:function(){var e=this;return o.reduce(this.props.alterationTypes,function(t,n,r){return r in e.props.representedAlterations&&t.push({name:n,symbol:{fill:e.props.colors[r]}}),t},[]).reverse()}},{key:"yAxisLabel",get:function(){return this.props.isPercentage?"Alteration Frequency":"Absolute Counts"}},{key:"barPlotEvents",get:function(){var e=this;return[{target:"data",eventHandlers:{onMouseEnter:function(){return[{target:"data",mutation:function(t){e.shouldUpdatePosition=!0,t.datum.xKey in e.props.countsByGroup?(e.barPlotTooltipModel=Object.assign(Object.assign({},t),{groupName:t.datum.x,alterationData:e.props.countsByGroup[t.datum.xKey],studyId:t.datum.xKey}),e.barToolTipCounter++):e.barPlotTooltipModel=null}}]},onMouseLeave:function(){return[{target:"data",mutation:function(){e.shouldUpdatePosition=!1,setTimeout(function(){e.isBarPlotTooltipHovered||1!==e.barToolTipCounter||(e.barPlotTooltipModel=null),e.barToolTipCounter--},100)}}]}}}]}},{key:"scatterPlotMouseEvents",get:function(){var e=this;return[{target:"data",eventHandlers:{onMouseOver:function(){return[{target:"data",mutation:function(t){t.datum&&(e.scatterPlotTooltipModel=t)}}]},onMouseOut:function(){return[{target:"data",mutation:function(){e.scatterPlotTooltipModel=null}}]},onMouseEnter:function(){return[{target:"data",mutation:function(){e.shouldUpdatePosition=!0}}]},onMouseLeave:function(){return[{target:"data",mutation:function(){e.shouldUpdatePosition=!1}}]}}}]}},{key:"overflowStyle",get:function(){return{position:"relative",display:"inline-block",width:this.props.xLabels.length>37?"100%":"auto"}}},{key:"scatterChartHeight",get:function(){var e=o.uniqBy(this.scatterData,function(e){return e.y}).length;return e>0?e*(this.barWidth()+this.barSeparation())+100:100}},{key:"scatterPlotTopPadding",get:function(){return this.barChartHeight()-100}},{key:"scatterData",get:function(){return o.map(this.props.alterationTypeDataCounts,function(e){return Object.assign(Object.assign({},e),{symbol:e.profiledCount>0?"plus":"minus"})})}},{key:"barPlots",get:function(){var e=this;return(this.props.hideGenomicAlterations?[M(this.props.data)]:this.props.data).map(function(t,n){return r.createElement(i.VictoryBar,{style:{data:{width:e.barWidth}},events:e.barPlotEvents,data:t,key:n})})}}])&&k(c.prototype,p),_&&k(c,_),n}();j([l.observable.ref],D.prototype,"barPlotTooltipModel",void 0),j([l.observable.ref],D.prototype,"scatterPlotTooltipModel",void 0),j([l.observable],D.prototype,"barToolTipCounter",void 0),j([l.observable],D.prototype,"isBarPlotTooltipHovered",void 0),j([l.observable],D.prototype,"shouldUpdatePosition",void 0),j([l.observable],D.prototype,"mousePosition",void 0),j([l.observable],D.prototype,"plotElementWidth",void 0),j([c.default],D.prototype,"getSvg",null),j([c.default],D.prototype,"assignScrollPaneRef",null),j([c.default],D.prototype,"assignDummyScrollPaneRef",null),j([c.default],D.prototype,"assignPlotSvgRef",null),j([c.default],D.prototype,"synchronizeScrollPanes",null),j([l.action.bound],D.prototype,"tooltipMouseEnter",null),j([l.action.bound],D.prototype,"tooltipMouseLeave",null),j([l.computed],D.prototype,"scatterPlotTooltipComponent",null),j([l.computed],D.prototype,"barPlotTooltipComponent",null),j([l.action.bound],D.prototype,"onMouseMove",null),j([c.default],D.prototype,"tickFormat",null),j([l.computed],D.prototype,"scatterChartHeight",null),j([l.computed],D.prototype,"scatterPlotTopPadding",null),j([l.computed],D.prototype,"scatterData",null),j([l.computed],D.prototype,"barPlots",null),j([c.default],D.prototype,"getData",null),j([c.default],D.prototype,"convertDataToDownloadData",null),j([c.default],D.prototype,"getChart",null),D=j([s.observer],D)}).call(this,n(26))},1288:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(1);function o(e){var t=e.map(function(e){var t=e.match(/[A-Z]/g)||[],n=e.match(/[a-z]/g)||[],r=e.match(/\s/g)||[],o=e.length-t.length-n.length-r.length;return 2*t.length+1*n.length+2*r.length+1*o});return r.max(t)||0}},1289:function(e,t,n){},1290:function(e,t,n){},1320:function(e,t,n){},1321:function(e,t,n){"use strict";(function(e){var r=n(0),o=n(9),i=n(5),a=n.n(i),l=(n(1322),n(3)),s=n(72),c=n(2),u=n(985),p=n(12),d=n(1323),f=n(7),h=n(825),m=n(960),y=n(118),b=n(109),g=n(19),v=n(961),_=n(1),w=n.n(_),O=n(148),S=n(1749);function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var x=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":T(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},j=function(t){function n(e){var t,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),o=this,i=k(n).call(this,e),t=!i||"object"!==T(i)&&"function"!=typeof i?C(o):i,Object.defineProperty(C(t),"singleStudyUI",{enumerable:!0,configurable:!0,writable:!0,value:Object(y.a)({await:function(){return[t.props.store.queriedStudies,t.props.store.sampleLists,t.props.store.filteredSamples,t.props.store.filteredPatients]},render:function(){var e=t.props.store.sampleLists.result.length>0?r.createElement("span",null,t.props.store.sampleLists.result[0].name):r.createElement("span",null,"User-defined Patient List");return r.createElement("div",null,r.createElement("h3",null,r.createElement("a",{href:Object(g.b)("study",{id:t.props.store.queriedStudies.result.map(function(e){return e.studyId}).join(",")}),target:"_blank"},t.props.store.queriedStudies.result[0].name)),e," (",t.studyPageFilteredCasesLink,")  - ",Object(m.b)(t.props.store.hugoGeneSymbols)," ",r.createElement(l.i,{overlay:"Edit genes or OQL"},r.createElement("a",{"data-test":"oqlQuickEditButton",onClick:t.props.onToggleOQLEditUIVisibility},r.createElement("i",{className:"fa fa-pencil"}))))}})}),Object.defineProperty(C(t),"multipleStudyUI",{enumerable:!0,configurable:!0,writable:!0,value:Object(y.a)({await:function(){return[t.props.store.filteredSamples,t.props.store.filteredPatients,t.props.store.queriedStudies,t.props.store.sampleLists]},render:function(){return r.createElement("div",null,r.createElement("h3",null,r.createElement("a",{href:Object(g.b)("study",{id:t.props.store.queriedStudies.result.map(function(e){return e.studyId}).join(",")}),target:"_blank"},"Combined Study (",w.a.sumBy(t.props.store.queriedStudies.result,function(e){return e.allSampleCount})," ","samples)"),t.props.store.isMixedReferenceGenome&&Object(O.d)()),r.createElement("span",null,"Querying ",t.studyPageFilteredCasesLink," in"," ",t.props.store.queriedStudies.result.length," studies  - ",Object(m.b)(t.props.store.hugoGeneSymbols)," ",r.createElement(l.i,{placement:"bottom",overlay:t.studyList,destroyTooltipOnHide:!0},r.createElement("i",{className:"fa fa-info-circle"}))))}})}),Object.defineProperty(C(t),"cohortAndGeneSummary",{enumerable:!0,configurable:!0,writable:!0,value:Object(y.a)({await:function(){return[t.singleStudyUI,t.multipleStudyUI,t.props.store.queriedStudies]},render:function(){return 1===t.props.store.queriedStudies.result.length?t.singleStudyUI.component:t.multipleStudyUI.component}})}),Object.defineProperty(C(t),"alterationSummary",{enumerable:!0,configurable:!0,writable:!0,value:Object(y.a)({await:function(){return[t.props.store.filteredSamples,t.props.store.filteredPatients,t.props.store.filteredAlteredSampleKeys,t.props.store.filteredAlteredPatientKeys]},render:function(){return Object(m.a)(t.props.store.filteredSamples.result.length,t.props.store.filteredPatients.result.length,t.props.store.filteredAlteredSampleKeys.result.length,t.props.store.filteredAlteredPatientKeys.result.length,t.props.store.hugoGeneSymbols.length)}})}),Object(c.makeObservable)(C(t)),t}var o,i,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(n,r["Component"]),o=n,(i=[{key:"toggleQueryFormVisibility",value:function(){this.props.onToggleQueryFormVisibility(this.props.store.queryFormVisible),this.props.store.modifyQueryParams&&!0===this.props.store.queryFormVisible&&(this.props.store.modifyQueryParams=void 0),this.props.store.queryFormVisible=!this.props.store.queryFormVisible}},{key:"closeQueryForm",value:function(){!0===this.props.store.queryFormVisible&&(this.toggleQueryFormVisibility(),e(document).scrollTop(0))}},{key:"onSubmit",value:function(){this.closeQueryForm(),Object(b.b)()("send","event","resultsView","query modified")}},{key:"render",value:function(){if(this.cohortAndGeneSummary.isError||this.alterationSummary.isError)return this.isQueryOrGeneInvalid?this.queryForm:null;var e=this.cohortAndGeneSummary.isComplete&&this.alterationSummary.isComplete;return r.createElement("div",null,r.createElement("div",{className:"query-summary"},r.createElement("div",{className:"query-summary__leftItems"},!this.isQueryOrGeneInvalid&&r.createElement("div",{style:{display:"flex"}},r.createElement("button",{id:"modifyQueryBtn",onClick:this.toggleQueryFormVisibility,className:a()("btn btn-primary",{disabled:!e})},this.queryFormVisible?"Cancel Modify Query":"Modify Query"),r.createElement(S.a,{store:this.props.store,resultsView:!0})),r.createElement(s.a,{isLoading:!e,small:!0}),e&&this.cohortAndGeneSummary.component),r.createElement("div",{className:"query-summary__rightItems"},r.createElement("div",{className:"query-summary__alterationData"},e&&r.createElement("strong",null,this.alterationSummary.component)),r.createElement(d.a,{sessionEnabled:f.a.sessionServiceIsEnabled(),bitlyAccessToken:f.b.serverConfig.bitly_access_token,urlWrapper:this.props.store.urlWrapper}))),this.queryFormVisible&&this.queryForm)}},{key:"queryFormVisible",get:function(){return this.props.store.queryFormVisible||this.isQueryOrGeneInvalid}},{key:"studyPageFilteredCasesLink",get:function(){var e=this;return r.createElement("a",{onClick:function(){Object(m.d)(e.props.store.queriedStudies.result,e.props.store.filteredSamples.result,e.props.store.queriedVirtualStudies.result.length>0,e.props.store.filteredSamples.result.length<e.props.store.samples.result.length,e.props.store.sampleLists.result)}},Object(m.c)(this.props.store.filteredSamples.result,this.props.store.filteredPatients.result))}},{key:"studyList",get:function(){return r.createElement("div",{className:"cbioportal-frontend"},r.createElement("ul",{className:"list-unstyled",style:{marginBottom:0}},this.props.store.queriedStudies.result.map(function(e){return r.createElement("li",null,r.createElement(h.a,{studyId:e.studyId},e.name))})))}},{key:"queryForm",get:function(){var e=this;return r.createElement("div",{style:{margin:"10px -20px 0 -20px"}},r.createElement(u.a,{onSubmit:this.onSubmit,forkedMode:!1,showQuickSearchTab:!1,showDownloadTab:!1,showAlerts:!0,modifyQueryParams:this.props.store.modifyQueryParams,getQueryStore:function(){return Object(v.a)(e.props.store.urlWrapper.query,e.props.store.urlWrapper,!1)}}))}},{key:"isQueryOrGeneInvalid",get:function(){return this.props.store.genesInvalid||this.props.store.isQueryInvalid}}])&&E(o.prototype,i),p&&E(o,p),n}();x([c.action.bound],j.prototype,"toggleQueryFormVisibility",null),x([c.computed],j.prototype,"queryFormVisible",null),x([c.computed],j.prototype,"studyPageFilteredCasesLink",null),x([c.action.bound],j.prototype,"closeQueryForm",null),x([p.default],j.prototype,"onSubmit",null),x([c.computed],j.prototype,"queryForm",null),x([c.computed],j.prototype,"isQueryOrGeneInvalid",null),j=x([o.observer],j),t.a=j}).call(this,n(26))},1322:function(e,t,n){},1323:function(e,t,n){"use strict";n.d(t,"a",function(){return v});var r=n(3),o=n(9),i=n(0),a=n(1324),l=n.n(a),s=n(1095),c=n(2),u=n(242);function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var y=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":m(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},b=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function l(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,l)}s((r=r.apply(e,t||[])).next())})},g=Object(r.eb)(),v=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=d(t).call(this,e))||"object"!==m(o)&&"function"!=typeof o?f(r):o,Object.defineProperty(f(n),"showBookmarkDialog",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object(c.makeObservable)(f(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,i["Component"]),n=t,(o=[{key:"getUrls",value:function(){return b(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.location.href,e.next=3,Object(u.b)(t,this.props.bitlyAccessToken);case 3:return n=e.sent,e.abrupt("return",{bitlyUrl:n,fullUrl:t,sessionUrl:t});case 5:case"end":return e.stop()}},e,this)}))}},{key:"toggleBookmarkDialog",value:function(){this.showBookmarkDialog=!this.showBookmarkDialog}},{key:"render",value:function(){return i.createElement("div",{className:l.a.shareModule},i.createElement(r.i,{placement:"topLeft",overlay:i.createElement("div",null,"Get bookmark link")},i.createElement("a",{onClick:this.toggleBookmarkDialog},i.createElement("span",{className:"fa-stack fa-4x"},i.createElement("i",{className:"fa fa-circle fa-stack-2x"}),i.createElement("i",{className:"fa fa-link fa-stack-1x"})))),this.showBookmarkDialog&&i.createElement(s.a,{onHide:this.toggleBookmarkDialog,urlPromise:this.getUrls(),title:"Bookmark Query"}))}}])&&p(n.prototype,o),a&&p(n,a),t}();y([c.observable],v.prototype,"showBookmarkDialog",void 0),y([c.action.bound],v.prototype,"toggleBookmarkDialog",null),v=y([o.observer],v)},1324:function(e,t,n){e.exports={portalWidth:"shareUI-module__portalWidth__23kqI",framedImage:"shareUI-module__framedImage__2dQ1S",shareModule:"shareUI-module__shareModule__3FK_r"}},1325:function(e,t,n){},1328:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__3C3M_",framedImage:"styles-module__framedImage__7sZho",inlineAlterationTypeSelectorMenu:"styles-module__inlineAlterationTypeSelectorMenu__2qY8I",buttonAlterationTypeSelectorMenu:"styles-module__buttonAlterationTypeSelectorMenu__1ECLU"}},1749:function(e,t,n){"use strict";var r=n(3),o=n(0),i=n(9),a=n(2),l=n(12),s=n(126),c=n(957),u=n(124),p=n(144),d=n.n(p),f=n(5),h=n.n(f),m=n(51);function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var w,O=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":_(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};!function(e){e.hidePutativePassengers="0",e.showGermlineMutations="1",e.hideUnprofiledSamples="1.1",e.dataTypeSample="2",e.dataTypePatient="3"}(w||(w={}));var S=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=b(t).call(this,e))||"object"!==_(o)&&"function"!=typeof o?g(r):o,Object.defineProperty(g(n),"driverSettingsState",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(g(n),"driverSettingsHandlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object(a.makeObservable)(g(n),{driverSettingsState:a.observable,driverSettingsHandlers:a.observable}),n.driverSettingsState=Object(s.b)(e.store.driverAnnotationSettings,e.store.customDriverAnnotationReport.result,e.store.didOncoKbFailInOncoprint,e.store.didHotspotFailInOncoprint),n.driverSettingsHandlers=Object(s.a)(e.store.driverAnnotationSettings,n.driverSettingsState),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,o["Component"]),n=t,(r=[{key:"onInputClick",value:function(e){switch(e.target.value){case w.hidePutativePassengers:this.props.store.driverAnnotationSettings.includeVUS=!this.props.store.driverAnnotationSettings.includeVUS;break;case w.hideUnprofiledSamples:this.props.store.hideUnprofiledSamples=!this.props.store.hideUnprofiledSamples;break;case w.showGermlineMutations:this.props.store.includeGermlineMutations=!this.props.store.includeGermlineMutations}}},{key:"render",value:function(){return this.props.disabled?o.createElement("div",{"data-test":"GlobalSettingsButtonHint"},o.createElement("div",null,"Filtering based on annotations is not available for this study."),o.createElement("div",null,"Load custom driver annotations for the selected study to enable filtering.")):o.createElement("div",{"data-test":"GlobalSettingsDropdown",className:h()("cbioportal-frontend",d.a.globalSettingsDropdown),style:{padding:5}},o.createElement("h5",{style:{marginTop:"auto",marginBottom:"auto"}},"Annotate Data"),o.createElement(u.a,{divStyle:{display:"inline-block",marginLeft:6},style:{color:"rgb(54, 134, 194)"},tooltip:o.createElement("span",null,"Putative driver vs VUS setings apply to every tab except"," ",o.createElement(m.a,{words:["Co-expression","CN Segments"]}))}),o.createElement("div",{style:{marginLeft:10}},o.createElement(c.a,{state:this.driverSettingsState,handlers:this.driverSettingsHandlers,resultsView:this.props.resultsView})),o.createElement("hr",null),o.createElement("h5",{style:{marginTop:"auto",marginBottom:"auto"}},"Filter Data"),o.createElement("div",{style:{marginLeft:10}},o.createElement("div",{className:"checkbox"},o.createElement("label",null,o.createElement("input",{"data-test":"HideVUS",type:"checkbox",value:w.hidePutativePassengers,checked:!this.props.store.driverAnnotationSettings.includeVUS,onClick:this.onInputClick,disabled:!this.driverSettingsState.distinguishDrivers})," ","Exclude alterations (mutations, structural variants and copy number) of unknown significance")),o.createElement("div",{className:"checkbox"},o.createElement("label",null,o.createElement("input",{"data-test":"HideGermline",type:"checkbox",value:w.showGermlineMutations,checked:!this.props.store.includeGermlineMutations,onClick:this.onInputClick})," ","Exclude germline mutations")),this.props.resultsView&&o.createElement("div",{className:"checkbox"},o.createElement("label",null,o.createElement("input",{"data-test":"HideUnprofiled",type:"checkbox",value:w.hideUnprofiledSamples,checked:this.props.store.hideUnprofiledSamples,onClick:this.onInputClick})," ","Exclude samples that are not profiled for all queried genes in all queried profiles"))))}}])&&y(n.prototype,r),i&&y(n,i),t}();O([l.default],S.prototype,"onInputClick",null);var E=S=O([i.observer],S);function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var j=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":x(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},A=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=C(t).call(this,e))||"object"!==x(o)&&"function"!=typeof o?P(r):o,Object.defineProperty(P(n),"visible",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object(a.makeObservable)(P(n)),n}var n,i,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,o["Component"]),n=t,(i=[{key:"setVisibilityState",value:function(e){void 0!==e&&(void 0!==this.props.store.isSettingsMenuVisible?this.props.store.isSettingsMenuVisible=!!e:this.visible=!!e)}},{key:"render",value:function(){var e=this;return o.createElement(r.i,{trigger:[this.trigger],placement:"bottomRight",overlay:this.overlay,visible:this.visibilityState,onVisibleChange:function(t){e.setVisibilityState(t)},onPopupAlign:function(e){return Object(r.yb)(e,"22px")}},o.createElement("button",{"data-test":"GlobalSettingsButton",style:{marginRight:0,marginLeft:5},className:"btn btn-primary"},o.createElement("i",{className:"fa fa-sliders fa-lg"})))}},{key:"visibilityState",get:function(){return void 0!==this.props.store.isSettingsMenuVisible?this.props.store.isSettingsMenuVisible:this.visible}},{key:"overlay",get:function(){return o.createElement(E,{store:this.props.store,resultsView:this.props.resultsView,disabled:this.props.disabled})}},{key:"trigger",get:function(){return this.props.disabled?"hover":"click"}}])&&k(n.prototype,i),l&&k(n,l),t}();j([a.observable],A.prototype,"visible",void 0),j([a.computed],A.prototype,"visibilityState",null),j([a.action],A.prototype,"setVisibilityState",null),j([a.computed],A.prototype,"overlay",null),j([a.computed],A.prototype,"trigger",null),A=j([i.observer],A);t.a=A},1768:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1),i=n.n(o),a=n(26),l=n.n(a),s=n(95),c=n.n(s),u=n(9),p=n(2),d=n(10),f=n(1260),h=n(804),m=n(15),y=n(6),b=n(14),g=n(5),v=n.n(g),_=n(946),w=n(17),O=n(20);function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t,n){return t&&E(e.prototype,t),n&&E(e,n),e}function C(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?P(e):t}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var I=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},M=function(e){function t(){return S(this,t),C(this,T(t).apply(this,arguments))}return x(t,r["Component"]),k(t,[{key:"render",value:function(){return r.createElement("span",{onClick:this.props.onClickFilter,style:{color:this.props.isActive?"#0000ff":O.o,position:"absolute",top:"-1.37px",fontSize:"14px",cursor:"pointer",visibility:"hidden"}},r.createElement("i",{className:"fa fa-filter"}))}}]),t}(),D=function(e){function t(){var e;return S(this,t),e=C(this,T(t).apply(this,arguments)),Object.defineProperty(P(e),"pullRight",{enumerable:!0,configurable:!0,writable:!0,value:!1}),e}return x(t,r["Component"]),k(t,[{key:"componentDidUpdate",value:function(){var e=document.getElementById(this.props.id).getBoundingClientRect();e.right>window.innerWidth&&(this.pullRight=!0);var t=0,n=window.innerHeight;e.bottom>n&&(t=e.bottom-n+15),window.scroll(window.scrollX,window.scrollY+t)}},{key:"render",value:function(){return r.createElement("div",{id:this.props.id,className:v()("dropdown-menu",this.pullRight?"pull-right":"pull-left"),style:{transform:this.pullRight?"translateX(10px)":"translateX(-5px)",visibility:this.props.isOpen?"visible":"hidden"}},r.createElement("div",{style:{margin:"6px",marginBottom:"0px"}},this.props.id,r.createElement("div",{style:{marginTop:"10px"}},this.props.menuComponent),r.createElement("button",{className:"btn btn-default btn-xs",onClick:this.props.onClickRemove,disabled:!this.props.isActive,style:{marginTop:"10px",float:"right"}},"Remove filter")))}}]),t}();I([p.observable],D.prototype,"pullRight",void 0);var N=function(e){function t(e){var n;return S(this,t),n=C(this,T(t).call(this,e)),Object.defineProperty(P(n),"isOpen",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object(p.makeObservable)(P(n)),n}return x(t,r["Component"]),k(t,[{key:"hide",value:function(){this.isOpen=!1}},{key:"onClickRemove",value:function(){this.isOpen=!1,this.props.deactivateFilter()}},{key:"onClickFilter",value:function(){this.isOpen=!this.isOpen,this.props.filterIsActive||this.props.setupFilter()}},{key:"render",value:function(){return r.createElement(_.RootCloseWrapper,{onRootClose:this.hide},r.createElement(w.Dropdown,{id:this.props.id+" filterIconModal",open:this.isOpen},r.createElement(M,{bsRole:"toggle",isActive:this.props.filterIsActive,onClickFilter:this.onClickFilter}),r.createElement(D,{bsRole:"menu",id:this.props.id,isOpen:this.isOpen,isActive:this.props.filterIsActive,onClickRemove:this.onClickRemove,menuComponent:this.props.menuComponent})))}}]),t}();I([p.observable],N.prototype,"isOpen",void 0),I([p.action.bound],N.prototype,"hide",null),I([p.action.bound],N.prototype,"onClickRemove",null),I([p.action.bound],N.prototype,"onClickFilter",null);var R=N=I([u.observer],N),L=(n(1290),n(338));function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var U=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":H(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},W=Math.pow(10,10),q=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=V(t).call(this,e))||"object"!==H(o)&&"function"!=typeof o?B(r):o,Object.defineProperty(B(n),"justReleasedHandle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object(p.makeObservable)(B(n)),n.justReleasedHandle=!1,n.state={lowerValue:n.props.lowerValue||n.min,upperValue:n.props.upperValue||n.max},n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){this.syncValues(!0),this.syncValues(!1)}},{key:"componentDidUpdate",value:function(e){e!==this.props?this.setState({lowerValue:this.props.lowerValue||this.min,upperValue:this.props.upperValue||this.max}):(this.syncValues(!0),this.syncValues(!1))}},{key:"syncValues",value:function(e,t){if(e){this.LH.value=""+this.state.lowerValue,this.LB.value=""+this.state.lowerValue;var n=(this.state.lowerValue-this.min)/(this.max-this.min);this.MID.style.left=100*n+"%",t&&this.props.callbackLowerValue(this.state.lowerValue)}else{this.UH.value=""+this.state.upperValue,this.UB.value=""+this.state.upperValue;var r=(this.max-this.state.upperValue)/(this.max-this.min);this.MID.style.right=100*r+"%",t&&this.props.callbackUpperValue(this.state.upperValue)}this.updateInputBoxWidth(e)}},{key:"updateInputBoxWidth",value:function(e){e?this.LB.style.width=7*(this.LB.value.length+3)+"px":this.UB.style.width=7*(this.UB.value.length+3)+"px"}},{key:"onChangeInputBox",value:function(e,t,n,r,o,i){return Object(L.a)(function(a){!a||n(+a)?o(e):r(+a)?o(t):isNaN(+a)?i():o(+a)},300)}},{key:"onChangeSlider",value:function(e,t,n){var r=this;return function(o){if(r.justReleasedHandle)r.justReleasedHandle=!1,r.syncValues(e);else{var i=e?r.state.upperValue:r.state.lowerValue,a=t(+o.target.value)?i:+o.target.value;n(a)}}}},{key:"render",value:function(){var e=this;return r.createElement("div",{style:{width:"135px",margin:"auto",display:"flex",flexDirection:"column"}},r.createElement("div",{className:"slider"},r.createElement("div",{className:"mainTrack"}),r.createElement("div",{id:this.MIDId,className:"middleTrack"}),r.createElement("input",{type:"range",id:this.LHId,className:"handle",min:this.min,max:this.max,step:this.defaultStepSize,defaultValue:""+this.state.lowerValue,onMouseUp:function(t){e.justReleasedHandle=!0,e.setState({lowerValue:+t.target.value},function(){return e.syncValues(!0,!0)})},onChange:this.onChangeSlider(!0,function(t){return t>e.state.upperValue},function(t){return e.setState({lowerValue:t},function(){return e.syncValues(!0)})})}),r.createElement("input",{type:"range",id:this.UHId,className:"handle",min:this.min,max:this.max,step:this.defaultStepSize,defaultValue:""+this.state.upperValue,onMouseUp:function(t){e.justReleasedHandle=!0,e.setState({upperValue:+t.target.value},function(){return e.syncValues(!1,!0)})},onChange:this.onChangeSlider(!1,function(t){return t<e.state.lowerValue},function(t){return e.setState({upperValue:t},function(){return e.syncValues(!1)})})})),r.createElement("div",{style:{marginTop:"13px"}},r.createElement("input",{id:this.LBId,className:"form-control input-sm",style:{float:"left",maxWidth:"135px"},defaultValue:""+this.state.lowerValue,onChange:this.onChangeInputBox(this.min,this.state.upperValue,function(t){return t<e.min},function(t){return t>e.state.upperValue},function(t){return e.setState({lowerValue:t},function(){return e.syncValues(!0,!0)})},function(){return e.syncValues(!0)}),onInput:function(){return e.updateInputBoxWidth(!0)}}),r.createElement("input",{id:this.UBId,className:"form-control input-sm",style:{float:"right",maxWidth:"135px"},defaultValue:""+this.state.upperValue,onChange:this.onChangeInputBox(this.max,this.state.lowerValue,function(t){return t>e.max},function(t){return t<e.state.lowerValue},function(t){return e.setState({upperValue:t},function(){return e.syncValues(!1,!0)})},function(){return e.syncValues(!1)}),onInput:function(){return e.updateInputBoxWidth(!1)}})))}},{key:"min",get:function(){var e=+(+this.props.min).toFixed(11);return Math.floor(W*e)/W}},{key:"max",get:function(){var e=+(+this.props.max).toFixed(11);return Math.ceil(W*e)/W}},{key:"LHId",get:function(){return this.props.id+" lowerValue-handle"}},{key:"UHId",get:function(){return this.props.id+" upperValue-handle"}},{key:"LBId",get:function(){return this.props.id+" lowerValue-box"}},{key:"UBId",get:function(){return this.props.id+" upperValue-box"}},{key:"MIDId",get:function(){return this.props.id+" middleTrack"}},{key:"LH",get:function(){return document.getElementById(this.LHId)}},{key:"UH",get:function(){return document.getElementById(this.UHId)}},{key:"LB",get:function(){return document.getElementById(this.LBId)}},{key:"UB",get:function(){return document.getElementById(this.UBId)}},{key:"MID",get:function(){for(var e=document.getElementsByClassName("middleTrack"),t=0;t<e.length;t++)if(e[t].id===this.MIDId)return e[t];return e[0]}},{key:"defaultStepSize",get:function(){var e=this.props.min,t=this.props.max;return"string"==typeof e&&e.includes(".")||"string"==typeof t&&t.includes(".")?(this.max-this.min)/100:1}}])&&G(n.prototype,o),i&&G(n,i),t}();U([p.computed],q.prototype,"min",null),U([p.computed],q.prototype,"max",null),U([p.computed],q.prototype,"defaultStepSize",null),U([p.action],q.prototype,"onChangeInputBox",null),U([p.action],q.prototype,"onChangeSlider",null);var z=n(3);function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var J=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Z(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},$=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=Q(t).call(this,e))||"object"!==Z(o)&&"function"!=typeof o?Y(r):o,Object.defineProperty(Y(n),"filterString",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object(p.makeObservable)(Y(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentDidUpdate",value:function(){this.props.emptyFilterString&&(this.filterString="")}},{key:"onChangeFilterCondition",value:function(e){var t=e.target.value;this.props.updateFilterCondition(t)}},{key:"onChangeFilterString",value:function(e){var t=this,n=e.target.value;this.filterString=n,window.setTimeout(function(){t.props.updateFilterString(n)},400)}},{key:"selectAll",value:function(){var e=this,t=new Set;this.props.allSelections.forEach(function(n){e.props.currSelections.has(n)||t.add(n)}),this.props.toggleSelections(t),this.forceUpdate()}},{key:"deselectAll",value:function(){var e=this,t=new Set;this.props.allSelections.forEach(function(n){e.props.currSelections.has(n)&&t.add(n)}),this.props.toggleSelections(t),this.forceUpdate()}},{key:"onChangeSelection",value:function(e){var t=e.currentTarget.getAttribute("data-id");void 0!==t&&(this.props.toggleSelections(new Set([t])),this.forceUpdate())}},{key:"render",value:function(){return r.createElement("div",{style:{margin:"auto",display:"flex",flexDirection:"column"}},r.createElement("div",{style:{display:"flex"}},this.filterConditionDropdown,this.filterStringInputBox),r.createElement("div",{style:{marginTop:10}},this.selectDeselectAllButtons),r.createElement("div",{style:{marginTop:10,paddingLeft:10,maxHeight:250,maxWidth:320,overflow:"auto",whiteSpace:"nowrap"}},this.selectionCheckboxes))}},{key:"filterConditionDropdown",get:function(){return r.createElement("select",{className:"form-control input-sm",onChange:this.onChangeFilterCondition,style:{width:"160px"}},r.createElement("option",{value:"contains"},"Contains"),r.createElement("option",{value:"doesNotContain"},"Does Not Contain"),r.createElement("option",{value:"equals"},"Equals"),r.createElement("option",{value:"doesNotEqual"},"Does Not Equal"),r.createElement("option",{value:"beginsWith"},"Begins With"),r.createElement("option",{value:"doesNotBeginWith"},"Does Not Begin With"),r.createElement("option",{value:"endsWith"},"Ends With"),r.createElement("option",{value:"doesNotEndWith"},"Does Not End With"),r.createElement("option",{value:"regex"},"Regular Expression"))}},{key:"filterStringInputBox",get:function(){return r.createElement("input",{className:"form-control input-sm",value:this.filterString,onChange:this.onChangeFilterString,style:{width:"160px"}})}},{key:"selectDeselectAllButtons",get:function(){var e=this.props.currSelections.size!==this.props.allSelections.size,t=0!==this.props.currSelections.size;return r.createElement("div",{style:{display:"flex",alignItems:"baseline"}},e&&r.createElement("button",{className:"btn btn-default btn-xs",onClick:this.selectAll},"Select all (".concat(this.props.allSelections.size,")")),t&&r.createElement("button",{className:"btn btn-default btn-xs",onClick:this.deselectAll},"Deselect all"))}},{key:"sortedSelections",get:function(){return Array.from(this.props.allSelections).sort()}},{key:"selectionCheckboxes",get:function(){var e=this;return this.sortedSelections.map(function(t){return r.createElement(w.Checkbox,{"data-id":t,onChange:e.onChangeSelection,checked:e.props.currSelections.has(t)},r.createElement(z.S,{maxLength:37,text:t,tooltip:r.createElement("div",{style:{maxWidth:300}},t)}))})}}])&&K(n.prototype,o),i&&K(n,i),t}();J([p.observable],$.prototype,"filterString",void 0),J([p.action.bound],$.prototype,"onChangeFilterCondition",null),J([p.computed],$.prototype,"filterConditionDropdown",null),J([p.action.bound],$.prototype,"onChangeFilterString",null),J([p.computed],$.prototype,"filterStringInputBox",null),J([p.action.bound],$.prototype,"selectAll",null),J([p.action.bound],$.prototype,"deselectAll",null),J([p.computed],$.prototype,"selectDeselectAllButtons",null),J([p.action.bound],$.prototype,"onChangeSelection",null),J([p.computed],$.prototype,"sortedSelections",null),J([p.computed],$.prototype,"selectionCheckboxes",null);var ee=$=J([u.observer],$),te=n(1160),ne=n(342);function re(){return(re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function le(e,t){return(le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function se(e){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ce=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":se(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};function ue(e){return e.description?r.createElement("span",null,e.title,r.createElement(z.i,{placement:"right",overlay:r.createElement("span",null,e.description)},r.createElement("i",{className:"fa fa-info-circle",style:{marginLeft:"0.2rem"}}))):e.title}var pe=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=ie(t).call(this,e))||"object"!==se(o)&&"function"!=typeof o?ae(r):o,Object(p.makeObservable)(ae(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return void 0===this.props.germlineContent?r.createElement(r.Fragment,null,this.somaticInfo,this.germlinePlaceholder):r.createElement(m.t,re({badgeSelectorOptions:this.mutationStatusFilterOptions},this.props))}},{key:"mutationStatusFilterOptions",get:function(){var e=[{value:"Somatic",label:ue(this.props.somaticContent),badgeStyleOverride:m.r,badgeStyleSelectedOverride:m.r}];return this.props.germlineContent&&e.push({value:"Germline",label:ue(this.props.germlineContent),badgeStyleOverride:m.r,badgeStyleSelectedOverride:m.r}),e}},{key:"somaticInfo",get:function(){return this.props.rates?r.createElement(m.b,{label:ue(this.props.somaticContent),badgeContent:"".concat(Object(y.F)(this.props.rates.Somatic),"%"),badgeStyleOverride:this.mutationStatusFilterOptions[0].badgeStyleOverride}):null}},{key:"germlinePlaceholder",get:function(){return r.createElement("div",{"data-test":"germlineMutationRate",className:"invisible",style:{display:"none"}},"%")}}])&&oe(n.prototype,o),i&&oe(n,i),t}();ce([p.computed],pe.prototype,"mutationStatusFilterOptions",null);var de=pe=ce([u.observer],pe);function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function he(e){return(he=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function me(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ye(e,t){return(ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function be(e){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ge=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":be(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ve=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=he(t).call(this,e))||"object"!==be(o)&&"function"!=typeof o?me(r):o,Object(p.makeObservable)(me(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement("span",{"data-test":"mutation-rate-summary"},r.createElement(de,{filter:this.props.mutationStatusFilter,onSelect:this.props.onMutationStatusSelect,rates:{Germline:this.germlineMutationRate,Somatic:this.somaticMutationRate},somaticContent:{title:"Somatic Mutation Frequency",description:"Percentage of samples with a somatic mutation in ".concat(this.props.hugoGeneSymbol)},germlineContent:this.germlineMutationRate>0?{title:"Germline Mutation Frequency",description:"Percentage of samples with a germline mutation in ".concat(this.props.hugoGeneSymbol)}:void 0}))}},{key:"germlineMutationRate",get:function(){var e;return"pending"!==this.props.germlineConsentedSamples.status&&(e=this.props.germlineConsentedSamples&&this.props.germlineConsentedSamples.result&&this.props.germlineConsentedSamples.result.length>0?this.props.germlineConsentedSamples.result:this.props.samples),e?Object(b.l)(this.props.hugoGeneSymbol,this.props.mutations,this.props.molecularProfileIdToMolecularProfile.result,e):0}},{key:"somaticMutationRate",get:function(){return this.props.samples.length>0?Object(b.y)(this.props.hugoGeneSymbol,this.props.mutations,this.props.molecularProfileIdToMolecularProfile.result,this.props.samples):0}}])&&fe(n.prototype,o),i&&fe(n,i),t}();ge([p.computed],ve.prototype,"germlineMutationRate",null),ge([p.computed],ve.prototype,"somaticMutationRate",null);var _e=ve=ge([u.observer],ve),we=n(16),Oe=n(163),Se=n(125),Ee=n(187),ke=n(315),Ce=n(348),Pe=n(871),Te=n(872);function xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function je(e){return(je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ie(e,t){return(Ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Me(e){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var De,Ne=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Me(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};!function(e){e.MUTATIONS="Mutations",e.CLINICAL="Clinical"}(De||(De={}));var Re=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=je(t).call(this,e))||"object"!==Me(o)&&"function"!=typeof o?Ae(r):o,Object.defineProperty(Ae(n),"tabId",{enumerable:!0,configurable:!0,writable:!0,value:De.MUTATIONS}),Object(p.makeObservable)(Ae(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ie(e,t)}(t,r["Component"]),n=t,(o=[{key:"updateTabId",value:function(e){this.tabId=e}},{key:"addAll",value:function(e,t){if(this.props.onColumnToggled&&t.length>0){var n=!0,r=!1,o=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var l=i.value;!l.selected&&e.includes(l.key)&&this.props.onColumnToggled(l.key)}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}}}},{key:"clearAll",value:function(e,t){if(this.props.onColumnToggled&&t.length>0){var n=!0,r=!1,o=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var l=i.value;l.selected&&e.includes(l.key)&&this.props.onColumnToggled(l.key)}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}}}},{key:"toggle",value:function(e){this.props.onColumnToggled&&this.props.onColumnToggled(e)}},{key:"getTextPixel",value:function(e,t){return Math.floor(Object(z.mb)(e,"Helvetica Neue",t))}},{key:"render",value:function(){var e=this.mutationsOptions.length>0,t=this.clinicalOptions.length>0,n=e||t;return r.createElement("div",{style:{float:"right"}},r.createElement(Pe.a,{bsStyle:"default",title:this.dropdownButtonText,id:"addColumnsDropdown",className:this.props.className,styles:{minWidth:400,width:"auto"},buttonClassName:"btn btn-default btn-sm"},r.createElement("div",{style:{display:"flex",flexDirection:"column"}},n&&r.createElement(h.b,{activeTabId:this.tabId,onTabClick:this.updateTabId,unmountOnHide:!1,className:"mainTabs mutationsTabAddColumnsDropdown"},e&&r.createElement(h.a,{key:0,id:De.MUTATIONS,linkText:this.mutationsTabText},this.mutationsTabContent),t&&r.createElement(h.a,{key:1,id:De.CLINICAL,linkText:this.clinicalTabText},this.clinicalTabContent)),n&&this.props.showResetColumnsButton&&r.createElement("button",{style:{position:"absolute",top:11,right:12,zIndex:2},className:"btn btn-primary btn-xs",onClick:this.props.resetColumnVisibility},"Reset columns"))))}},{key:"clinicalAttributeIds",get:function(){var e=new Set;return this.props.clinicalAttributes.forEach(function(t){return e.add(t.clinicalAttributeId)}),e.add("CANCER_STUDY").add("CANCER_TYPE_DETAILED").add("MUTATION_COUNT")}},{key:"mutationsOptions",get:function(){var e=this;return this.props.columnVisibility?this.props.columnVisibility.filter(function(t){return!e.clinicalAttributeIds.has(t.id)}).map(function(e){return{key:e.id,label:e.name,selected:e.visible}}):[]}},{key:"numSelectedMutationsOptions",get:function(){return this.mutationsOptions.filter(function(e){return e.selected}).length}},{key:"mutationsTabContent",get:function(){var e=this;return r.createElement(Te.a,{options:this.mutationsOptions,onAddAll:function(t){return e.addAll(t,e.mutationsOptions)},onClearAll:function(t){return e.clearAll(t,e.mutationsOptions)},onToggleOption:this.toggle,optionsGivenInSortedOrder:!0,width:this.dropdownWidth})}},{key:"clinicalOptions",get:function(){var e=this;return this.props.columnVisibility?this.props.columnVisibility.filter(function(t){return e.clinicalAttributeIds.has(t.id)}).map(function(e){return{key:e.id,label:e.name,selected:e.visible}}):[]}},{key:"numSelectedClinicalOptions",get:function(){return this.clinicalOptions.filter(function(e){return e.selected}).length}},{key:"clinicalTabContent",get:function(){var e=this;return r.createElement(Te.a,{options:this.clinicalOptions,freqPromise:this.props.clinicalAttributeIdToAvailableFrequency,onAddAll:function(t){return e.addAll(t,e.clinicalOptions)},onClearAll:function(t){return e.clearAll(t,e.clinicalOptions)},onToggleOption:this.toggle,optionsGivenInSortedOrder:!1,width:this.dropdownWidth})}},{key:"mutationsTabText",get:function(){return r.createElement("span",{style:{marginTop:"3px",marginBottom:"3px"}},De.MUTATIONS,r.createElement("span",{style:{paddingLeft:5}},r.createElement("span",{className:"oncoprintDropdownCount"},this.numSelectedMutationsOptions," /"," ",this.mutationsOptions.length)))}},{key:"clinicalTabText",get:function(){return r.createElement("span",{style:{marginTop:"3px",marginBottom:"3px"}},De.CLINICAL,r.createElement("span",{style:{paddingLeft:5}},r.createElement("span",{className:"oncoprintDropdownCount"},this.numSelectedClinicalOptions," /"," ",this.clinicalOptions.length)))}},{key:"dropdownButtonText",get:function(){var e=this.numSelectedMutationsOptions+this.numSelectedClinicalOptions,t=this.mutationsOptions.length+this.clinicalOptions.length;return"Columns (".concat(e," / ").concat(t,")")}},{key:"dropdownWidth",get:function(){var e=40;return e+=this.getTextPixel(De.CLINICAL,"14px")+14+(this.getTextPixel(this.clinicalOptions.length.toString(),"11px")+17),Math.max(e,400)}}])&&xe(n.prototype,o),i&&xe(n,i),t}();Ne([p.observable],Re.prototype,"tabId",void 0),Ne([p.action.bound],Re.prototype,"updateTabId",null),Ne([p.action.bound],Re.prototype,"addAll",null),Ne([p.action.bound],Re.prototype,"clearAll",null),Ne([p.action.bound],Re.prototype,"toggle",null),Ne([p.computed],Re.prototype,"clinicalAttributeIds",null),Ne([p.computed],Re.prototype,"mutationsOptions",null),Ne([p.computed],Re.prototype,"numSelectedMutationsOptions",null),Ne([p.computed],Re.prototype,"mutationsTabContent",null),Ne([p.computed],Re.prototype,"clinicalOptions",null),Ne([p.computed],Re.prototype,"numSelectedClinicalOptions",null),Ne([p.computed],Re.prototype,"clinicalTabContent",null),Ne([p.computed],Re.prototype,"mutationsTabText",null),Ne([p.computed],Re.prototype,"clinicalTabText",null),Ne([p.computed],Re.prototype,"dropdownButtonText",null),Ne([p.computed],Re.prototype,"dropdownWidth",null);var Le=Re=Ne([u.observer],Re);function Ge(e){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Be(e,t){return!t||"object"!==Ge(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fe(e,t,n){return(Fe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=He(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function He(e){return(He=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ue(e,t){return(Ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var We=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Be(this,He(t).call(this,e))).props.columnVisibilityProps.customDropdown=function(e){return r.createElement(Le,{className:e.className,columnVisibility:e.columnVisibility,onColumnToggled:e.onColumnToggled,resetColumnVisibility:e.resetColumnVisibility,showResetColumnsButton:e.showResetColumnsButton,clinicalAttributes:n.props.mutationsTabClinicalAttributes.result,clinicalAttributeIdToAvailableFrequency:n.props.clinicalAttributeIdToAvailableFrequency})},n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ue(e,t)}(t,we["b"]),n=t,(o=[{key:"componentWillUpdate",value:function(e){this._columns[we.a.STUDY].visible=!!(e.studyIdToStudy&&Object.keys(e.studyIdToStudy).length>1)}},{key:"generateColumns",value:function(){var e=this;Fe(He(t.prototype),"generateColumns",this).call(this);for(var n=this.props.mutationsTabClinicalAttributes.result,o=function(t){var o=n[t].clinicalAttributeId;e.props.columns&&!e.props.columns.includes(o)&&e.props.columns.push(o),e._columns[o]={id:o,name:n[t].displayName,render:ke.a.makeRenderFunction(n[t],e.props.clinicalAttributeCache),download:function(r){return ke.a.getTextValue(r,n[t],e.props.clinicalAttributeCache)},sortBy:function(r){return ke.a.sortBy(r,n[t],e.props.clinicalAttributeCache)},filter:function(r,o,i){return ke.a.filter(r,i,n[t],e.props.clinicalAttributeCache)},tooltip:r.createElement("span",null,n[t].description),visible:!1,order:300}},i=0;i<n.length;i++)o(i);this._columns[we.a.CANCER_TYPE_DETAILED].visible=Oe.a.isVisible(this.props.dataStore?this.props.dataStore.allData:this.props.data,this.props.uniqueSampleKeyToTumorType),this._columns[we.a.TUMOR_ALLELE_FREQ].visible=Se.a.isVisible(this.props.dataStore?this.props.dataStore.allData:this.props.data),this._columns[we.a.ANNOTATION].shouldExclude=function(){return!1===e.props.isCanonicalTranscript},this._columns[we.a.STUDY].order=0,this._columns[we.a.SAMPLE_ID].order=10,"CANCER_TYPE"in this._columns&&(this._columns.CANCER_TYPE.order=14,this._columns.CANCER_TYPE.resizable=!0,this._columns.CANCER_TYPE.truncateOnResize=!0),this._columns[we.a.CANCER_TYPE_DETAILED].order=15,this._columns[we.a.PROTEIN_CHANGE].order=20,this._columns[we.a.ANNOTATION].order=30,this._columns[we.a.FUNCTIONAL_IMPACT].order=38,this._columns[we.a.MUTATION_TYPE].order=40,this._columns[we.a.VARIANT_TYPE].order=45,this._columns[we.a.ASCN_METHOD].order=46,this._columns[we.a.CLONAL].order=47,this._columns[we.a.CANCER_CELL_FRACTION].order=48,this._columns[we.a.EXPECTED_ALT_COPIES].order=49,this._columns[we.a.ASCN_COPY_NUM].order=50,this._columns[we.a.COPY_NUM].order=51,this._columns[we.a.COSMIC].order=60,this._columns[we.a.MUTATION_STATUS].order=70,this._columns[we.a.VALIDATION_STATUS].order=80,this._columns[we.a.CENTER].order=100,this._columns[we.a.CHROMOSOME].order=110,this._columns[we.a.START_POS].order=120,this._columns[we.a.END_POS].order=130,this._columns[we.a.REF_ALLELE].order=140,this._columns[we.a.VAR_ALLELE].order=150,this._columns[we.a.HGVSG].order=151,this._columns[we.a.HGVSC].order=152,this._columns[we.a.TUMOR_ALLELE_FREQ].order=160,this._columns[we.a.NORMAL_ALLELE_FREQ].order=170,this._columns[we.a.VAR_READS].order=180,this._columns[we.a.REF_READS].order=190,this._columns[we.a.VAR_READS_N].order=200,this._columns[we.a.REF_READS_N].order=210,this._columns[we.a.NUM_MUTATIONS].order=220,this._columns[we.a.EXON].order=230,this._columns[we.a.GNOMAD].order=260,this._columns[we.a.CLINVAR].order=270,this._columns[we.a.DBSNP].order=280,this._columns[we.a.SIGNAL].order=290,this._columns[we.a.CANCER_TYPE_DETAILED].shouldExclude=function(){return!e.props.uniqueSampleKeyToTumorType},this._columns[we.a.CLONAL].shouldExclude=function(){return!e.props.existsSomeMutationWithAscnProperty[Ce.a.CCF_EXPECTED_COPIES_STRING]},this._columns[we.a.ASCN_METHOD].shouldExclude=function(){return!e.props.existsSomeMutationWithAscnProperty[Ce.a.ASCN_METHOD_STRING]},this._columns[we.a.CANCER_CELL_FRACTION].shouldExclude=function(){return!e.props.existsSomeMutationWithAscnProperty[Ce.a.CCF_EXPECTED_COPIES_STRING]},this._columns[we.a.EXPECTED_ALT_COPIES].shouldExclude=function(){return!e.props.existsSomeMutationWithAscnProperty[Ce.a.EXPECTED_ALT_COPIES_STRING]},this._columns[we.a.ASCN_COPY_NUM].shouldExclude=function(){return!e.props.existsSomeMutationWithAscnProperty[Ce.a.ASCN_INTEGER_COPY_NUMBER_STRING]||!e.props.existsSomeMutationWithAscnProperty[Ce.a.TOTAL_COPY_NUMBER_STRING]||!e.props.existsSomeMutationWithAscnProperty[Ce.a.MINOR_COPY_NUMBER_STRING]},this._columns[we.a.NUM_MUTATIONS].shouldExclude=function(){return!e.props.mutationCountCache},this._columns[we.a.EXON].render=function(t){return Ee.a.renderFunction(t,e.props.genomeNexusCache,!1)},this._columns[we.a.EXON].headerRender=function(){return r.createElement("span",{style:{display:"inline-block"}},"Exon",r.createElement("br",null),"(",e.props.totalNumberOfExons," in total)")}}}])&&Ve(n.prototype,o),i&&Ve(n,i),t}();function qe(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ke(e){return(Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ye(e,t){return(Ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xe(e){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(We,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign(Object.assign({},we.b.defaultProps),{columns:[we.a.STUDY,we.a.SAMPLE_ID,we.a.COPY_NUM,we.a.ASCN_METHOD,we.a.ASCN_COPY_NUM,we.a.ANNOTATION,we.a.HGVSG,we.a.FUNCTIONAL_IMPACT,we.a.REF_READS_N,we.a.VAR_READS_N,we.a.REF_READS,we.a.VAR_READS,we.a.START_POS,we.a.END_POS,we.a.REF_ALLELE,we.a.VAR_ALLELE,we.a.MUTATION_STATUS,we.a.VALIDATION_STATUS,we.a.CENTER,we.a.CHROMOSOME,we.a.PROTEIN_CHANGE,we.a.MUTATION_TYPE,we.a.VARIANT_TYPE,we.a.CLONAL,we.a.CANCER_CELL_FRACTION,we.a.EXPECTED_ALT_COPIES,we.a.COSMIC,we.a.TUMOR_ALLELE_FREQ,we.a.NORMAL_ALLELE_FREQ,we.a.CANCER_TYPE_DETAILED,we.a.NUM_MUTATIONS,we.a.EXON,we.a.HGVSC,we.a.GNOMAD,we.a.CLINVAR,we.a.DBSNP,we.a.SIGNAL],columnVisibilityProps:{}})});var Ze=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Xe(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Je=function(e){function t(e){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,i=Ke(t).call(this,e),n=!i||"object"!==Xe(i)&&"function"!=typeof i?Qe(o):i,Object.defineProperty(Qe(n),"minMaxColumns",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(Qe(n),"allUniqDataColumns",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(Qe(n),"deactivateColumnFilter",{enumerable:!0,configurable:!0,writable:!0,value:function(e){Object(m.nb)([],!0,n.store.dataStore,e,Object(b.e)(e))}}),Object.defineProperty(Qe(n),"setupColumnFilter",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t=e.name;n.props.store.numericalFilterColumns.has(t)?n.minMaxColumns.add(e):n.props.store.categoricalFilterColumns.has(t)&&n.allUniqDataColumns.add(e)}}),Object.defineProperty(Qe(n),"columnToHeaderFilterIconModal",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t,o=e.name,i=n.props.store.numericalFilterColumns.has(o),a=n.props.store.categoricalFilterColumns.has(o);if(i||a)return i&&n.minMaxColumns.has(e)?t=n.numericalFilterComponents[o]:a&&n.allUniqDataColumns.has(e)&&(t=n.categoricalFilterComponents[o]),r.createElement(R,{id:o,filterIsActive:n.columnFilterIsActive(o),deactivateFilter:function(){return n.deactivateColumnFilter(o)},setupFilter:function(){return n.setupColumnFilter(e)},menuComponent:t})}}),Object(p.makeObservable)(Qe(n)),n.minMaxColumns=new Set,n.allUniqDataColumns=new Set,n}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ye(e,t)}(t,te["a"]),n=t,(i=[{key:"getMutationRateSummary",value:function(){return this.props.store.germlineConsentedSamples&&this.props.store.germlineConsentedSamples.result&&this.props.store.mutationData.isComplete&&this.props.store.mutationData.result.length>0&&this.props.store.samples.isComplete&&this.props.store.samples.result&&this.props.store.samples.result.length>0?r.createElement(_e,{hugoGeneSymbol:this.props.store.gene.hugoGeneSymbol,molecularProfileIdToMolecularProfile:this.props.store.molecularProfileIdToMolecularProfile,mutations:this.props.store.mutationData.result,samples:this.props.store.samples.result,germlineConsentedSamples:this.props.store.germlineConsentedSamples,onMutationStatusSelect:this.onMutationStatusSelect,mutationStatusFilter:this.mutationStatusFilter}):null}},{key:"onMutationStatusSelect",value:function(e,t){Object(m.nb)(e,t,this.store.dataStore,m.h.MUTATION_STATUS,ne.a)}},{key:"columnFilterIsActive",value:function(e){return e in this.getFilters}},{key:"resolveMutationToColumnValue",value:function(e,t){return("Mutation Type"===t.name&&t.sortBy?""+(o.flatten([t.sortBy(e)])[0]||""):o.flatten([t.download(e)])[0])||"(Blanks)"}},{key:"isDefaultNumericalFilter",value:function(e){var t=this.getFilters[e],n=this.columnMinMax[e];return+t.values[0].lowerBound==+n.min&&+t.values[0].upperBound==+n.max&&!1===t.values[0].hideEmptyValues}},{key:"isDefaultCategoricalFilter",value:function(e){var t=this.getFilters[e];return"contains"===t.values[0].filterCondition&&""===t.values[0].filterString&&o.isEqual(t.values[0].selections,this.allUniqColumnData[e])}},{key:"activateNumericalFilter",value:function(e,t,n,r){var o=+this.columnMinMax[e].min,i=+this.columnMinMax[e].max;Object(m.nb)([{lowerBound:void 0===t?o:t,upperBound:void 0===n?i:n,hideEmptyValues:void 0!==r&&r}],!1,this.store.dataStore,e,Object(b.e)(e))}},{key:"activateCategoricalFilter",value:function(e,t,n,r){Object(m.nb)([{filterCondition:t||"contains",filterString:n||"",selections:r||this.allUniqColumnData[e]}],!1,this.store.dataStore,e,Object(b.e)(e))}},{key:"mutationStatusFilter",get:function(){return this.store.dataStore.dataFilters.find(function(e){return e.id===ne.a})}},{key:"isMutationTableDataLoading",get:function(){return"pending"===Object(y.Z)(this.props.store.clinicalDataForSamples,this.props.store.studiesForSamplesWithoutCancerTypeClinicalData,this.props.store.canonicalTranscript,this.props.store.mutationData,this.props.store.indexedVariantAnnotations,this.props.store.activeTranscript,this.props.store.clinicalDataGroupedBySampleMap,this.props.store.mutationsTabClinicalAttributes)}},{key:"totalExonNumber",get:function(){var e=this.props.store.canonicalTranscript.result&&this.props.store.canonicalTranscript.result.transcriptId,t=this.props.store.activeTranscript.result&&this.props.store.activeTranscript.result===e?this.props.store.canonicalTranscript.result:this.props.store.transcriptsByTranscriptId[this.props.store.activeTranscript.result];return t&&t.exons&&t.exons.length>0?t.exons.length.toString():"None"}},{key:"mutationTableComponent",get:function(){return r.createElement(We,{uniqueSampleKeyToTumorType:this.props.store.uniqueSampleKeyToTumorType,oncoKbCancerGenes:this.props.store.oncoKbCancerGenes,discreteCNACache:this.props.discreteCNACache,studyIdToStudy:this.props.store.studyIdToStudy.result,molecularProfileIdToMolecularProfile:this.props.store.molecularProfileIdToMolecularProfile.result,pubMedCache:this.props.pubMedCache,mutationCountCache:this.props.mutationCountCache,clinicalAttributeCache:this.props.clinicalAttributeCache,genomeNexusCache:this.props.genomeNexusCache,genomeNexusMutationAssessorCache:this.props.genomeNexusMutationAssessorCache,dataStore:this.props.store.dataStore,itemsLabelPlural:this.itemsLabelPlural,downloadDataFetcher:this.props.store.downloadDataFetcher,myCancerGenomeData:this.props.store.myCancerGenomeData,hotspotData:this.props.store.indexedHotspotData,indexedVariantAnnotations:this.props.store.indexedVariantAnnotations,indexedMyVariantInfoAnnotations:this.props.store.indexedMyVariantInfoAnnotations,cosmicData:this.props.store.cosmicData.result,oncoKbData:this.props.store.oncoKbData,usingPublicOncoKbInstance:this.props.store.usingPublicOncoKbInstance,civicGenes:this.props.store.civicGenes,civicVariants:this.props.store.civicVariants,userEmailAddress:this.props.userEmailAddress,enableOncoKb:this.props.enableOncoKb,enableFunctionalImpact:this.props.enableGenomeNexus,enableHotspot:this.props.enableHotspot,enableMyCancerGenome:this.props.enableMyCancerGenome,enableCivic:this.props.enableCivic,totalNumberOfExons:this.totalExonNumber,generateGenomeNexusHgvsgUrl:this.props.store.generateGenomeNexusHgvsgUrl,isCanonicalTranscript:this.props.store.isCanonicalTranscript,selectedTranscriptId:this.props.store.activeTranscript.result,columnVisibility:this.props.columnVisibility,storeColumnVisibility:this.props.storeColumnVisibility,sampleIdToClinicalDataMap:this.props.store.clinicalDataGroupedBySampleMap,existsSomeMutationWithAscnProperty:this.props.existsSomeMutationWithAscnProperty,mutationsTabClinicalAttributes:this.props.store.mutationsTabClinicalAttributes,clinicalAttributeIdToAvailableFrequency:this.props.store.clinicalAttributeIdToAvailableFrequency,columnToHeaderFilterIconModal:this.columnToHeaderFilterIconModal,deactivateColumnFilter:this.deactivateColumnFilter})}},{key:"mutationTable",get:function(){return r.createElement("span",null,!this.isMutationTableDataLoading&&this.mutationTableComponent)}},{key:"dataFilterColumns",get:function(){return[].concat(qe(this.props.store.numericalFilterColumns),qe(this.props.store.categoricalFilterColumns))}},{key:"getFilters",get:function(){var e=this,t={},n=!0,r=!1,o=void 0;try{for(var i,a=function(){var n=i.value,r=e.store.dataStore.dataFilters.find(function(e){return e.type===n});r&&(t[n]=r)},l=this.dataFilterColumns[Symbol.iterator]();!(n=(i=l.next()).done);n=!0)a()}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return t}},{key:"columnMinMax",get:function(){var e={},t=!0,n=!1,r=void 0;try{for(var i,a=this.minMaxColumns[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var l=i.value,s=l.name,c="0",u="100",p=!1;if(l.sortBy){var d=1/0,f=-1/0,h=void 0,m=void 0,y=!0,b=!1,g=void 0;try{for(var v,_=this.store.dataStore.allData[Symbol.iterator]();!(y=(v=_.next()).done);y=!0){var w=v.value,O=l.sortBy(w);null!==O?(+O<d&&(d=+O,h=w),+O>f&&(f=+O,m=w)):p=!0}}catch(e){b=!0,g=e}finally{try{y||null==_.return||_.return()}finally{if(b)throw g}}h&&m&&(l.download&&(c=o.flatten([l.download(h)])[0],u=o.flatten([l.download(m)])[0]),(!l.download||isNaN(+c)||isNaN(+u))&&(c=""+d,u=""+f))}e[s]={min:c,max:u,hasEmptyValues:p}}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return e}},{key:"allUniqColumnData",get:function(){var e={},t=!0,n=!1,r=void 0;try{for(var o,i=this.allUniqDataColumns[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value,l=a.name;if(a.download){e[l]=new Set;var s=!0,c=!1,u=void 0;try{for(var p,d=this.store.dataStore.allData[Symbol.iterator]();!(s=(p=d.next()).done);s=!0){var f=p.value,h=this.resolveMutationToColumnValue(f,a);e[l].add(h)}}catch(e){c=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(c)throw u}}}else e[l]=new Set}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return e}},{key:"allUniqColumnDataFiltered",get:function(){var e={},t=!0,n=!1,r=void 0;try{for(var o,i=this.allUniqDataColumns[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value,l=a.name;if(a.download){e[l]=new Set;var s=!0,c=!1,u=void 0;try{for(var p,d=this.store.dataStore.sortedFilteredData[Symbol.iterator]();!(s=(p=d.next()).done);s=!0){var f=p.value,h=this.resolveMutationToColumnValue(f,a);e[l].add(h)}}catch(e){c=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(c)throw u}}if(this.columnFilterIsActive(l)){var m=this.getFilters[l],y=!0,g=!1,v=void 0;try{for(var _,w=this.store.dataStore.allData[Symbol.iterator]();!(y=(_=w.next()).done);y=!0){var O=_.value,S=this.resolveMutationToColumnValue(O,a);Object(b.x)(S,m.values[0])&&!m.values[0].selections.has(S)&&e[l].add(S)}}catch(e){g=!0,v=e}finally{try{y||null==w.return||w.return()}finally{if(g)throw v}}}}else e[l]=new Set}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return e}},{key:"numericalFilterComponents",get:function(){var e=this,t={},n=!0,o=!1,i=void 0;try{for(var a,l=function(){var n=a.value.name,o=e.columnFilterIsActive(n)?e.getFilters[n]:void 0;t[n]=r.createElement("div",null,r.createElement(q,{id:n,min:e.columnMinMax[n].min,max:e.columnMinMax[n].max,lowerValue:null==o?void 0:o.values[0].lowerBound,upperValue:null==o?void 0:o.values[0].upperBound,callbackLowerValue:function(t){o?(o.values[0].lowerBound=t,e.isDefaultNumericalFilter(n)&&e.deactivateColumnFilter(n)):e.activateNumericalFilter(n,t)},callbackUpperValue:function(t){o?(o.values[0].upperBound=t,e.isDefaultNumericalFilter(n)&&e.deactivateColumnFilter(n)):e.activateNumericalFilter(n,void 0,t)}}),e.columnMinMax[n].hasEmptyValues&&r.createElement("label",{style:{fontWeight:100}},r.createElement("input",{type:"checkbox",style:{marginTop:"10px",marginLeft:"5px",marginRight:"4px"},checked:!!o&&o.values[0].hideEmptyValues,onChange:function(t){o?(o.values[0].hideEmptyValues=!o.values[0].hideEmptyValues,e.isDefaultNumericalFilter(n)&&e.deactivateColumnFilter(n)):e.activateNumericalFilter(n,void 0,void 0,!0)}}),"Hide empty values"))},s=this.minMaxColumns[Symbol.iterator]();!(n=(a=s.next()).done);n=!0)l()}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return t}},{key:"categoricalFilterComponents",get:function(){var e=this,t={},n=!0,o=!1,i=void 0;try{for(var a,l=function(){var n=a.value.name,o=e.columnFilterIsActive(n)?e.getFilters[n]:void 0;t[n]=r.createElement(ee,{id:n,emptyFilterString:!o,currSelections:o?o.values[0].selections:e.allUniqColumnDataFiltered[n],allSelections:e.allUniqColumnDataFiltered[n],updateFilterCondition:function(t){o?(o.values[0].filterCondition=t,e.isDefaultCategoricalFilter(n)&&e.deactivateColumnFilter(n)):e.activateCategoricalFilter(n,t)},updateFilterString:function(t){o?(o.values[0].filterString=t,e.isDefaultCategoricalFilter(n)&&e.deactivateColumnFilter(n)):e.activateCategoricalFilter(n,void 0,t)},toggleSelections:function(t){if(o){var r=o.values[0].selections;t.forEach(function(e){r.has(e)?r.delete(e):r.add(e)}),e.isDefaultCategoricalFilter(n)&&e.deactivateColumnFilter(n)}else{var i=e.allUniqColumnData[n];t.forEach(function(e){i.delete(e)}),e.activateCategoricalFilter(n,void 0,void 0,i)}}})},s=this.allUniqDataColumns[Symbol.iterator]();!(n=(a=s.next()).done);n=!0)l()}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return t}}])&&ze(n.prototype,i),a&&ze(n,a),t}();Ze([p.observable],Je.prototype,"minMaxColumns",void 0),Ze([p.observable],Je.prototype,"allUniqDataColumns",void 0),Ze([p.computed],Je.prototype,"mutationStatusFilter",null),Ze([p.action.bound],Je.prototype,"onMutationStatusSelect",null),Ze([p.computed],Je.prototype,"dataFilterColumns",null),Ze([p.computed],Je.prototype,"getFilters",null),Ze([p.computed],Je.prototype,"columnMinMax",null),Ze([p.computed],Je.prototype,"allUniqColumnData",null),Ze([p.computed],Je.prototype,"allUniqColumnDataFiltered",null),Ze([p.computed],Je.prototype,"numericalFilterComponents",null),Ze([p.computed],Je.prototype,"categoricalFilterComponents",null);var $e=Je=Ze([u.observer],Je),et=n(1039),tt=n(1040),nt=n(7),rt=n(333),ot=n(12),it=(n(948),n(335)),at=n(19),lt=n(334),st=n(72);function ct(){return(ct=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pt(e){return(pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ft(e,t){return(ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ht(e){return(ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var mt=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ht(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},yt=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=pt(t).call(this,e))||"object"!==ht(o)&&"function"!=typeof o?dt(r):o,Object.defineProperty(dt(n),"userSelectionStore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object(p.makeObservable)(dt(n)),n.userSelectionStore=new tt.a,n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ft(e,t)}(t,r["Component"]),n=t,(o=[{key:"onToggleOql",value:function(){this.props.store.mutationsTabFilteringSettings.useOql=!this.props.store.mutationsTabFilteringSettings.useOql}},{key:"onToggleVUS",value:function(){this.props.store.mutationsTabFilteringSettings.excludeVus=!this.props.store.mutationsTabFilteringSettings.excludeVus}},{key:"onToggleGermline",value:function(){this.props.store.mutationsTabFilteringSettings.excludeGermline=!this.props.store.mutationsTabFilteringSettings.excludeGermline}},{key:"setSelectedGeneSymbol",value:function(e){this.props.urlWrapper.updateURL({mutations_gene:e})}},{key:"render",value:function(){var e=this,t=this.selectedGeneSymbol;return r.createElement("div",{"data-test":"mutationsTabDiv"},this.props.store.mutationsByGene.isComplete&&r.createElement(h.b,{id:"mutationsPageTabs",activeTabId:t,onTabClick:function(t){return e.handleTabChange(t)},className:"pillTabs resultsPageMutationsGeneTabs",arrowStyle:{"line-height":.8},tabButtonStyle:"pills",unmountOnHide:!0},this.generateTabs(this.props.store.hugoGeneSymbols,this.props.store.mutationsByGene.result)),this.props.store.mutationsByGene.isPending&&r.createElement(st.a,{center:!0,size:"big",isLoading:!0}))}},{key:"generateTabs",value:function(e,t){var n=this,o=[];return e.forEach(function(e){if(t[e]){var i=t[e].length>0?void 0:{color:"#bbb"};o.push(r.createElement(h.a,{key:e,id:e,linkText:e,anchorStyle:i},n.selectedGeneSymbol===e&&n.geneTabContent))}}),o}},{key:"handleTabChange",value:function(e){this.setSelectedGeneSymbol(e)}},{key:"onTranscriptChange",value:function(e){this.props.urlWrapper.updateURL({mutations_transcript_id:e})}},{key:"onClickSettingMenu",value:function(e){this.props.store.isSettingsMenuVisible=e}},{key:"selectedGeneSymbol",get:function(){return this.props.urlWrapper.query.mutations_gene&&this.props.store.hugoGeneSymbols.includes(this.props.urlWrapper.query.mutations_gene)?this.props.urlWrapper.query.mutations_gene:this.props.store.hugoGeneSymbols[0]}},{key:"selectedGene",get:function(){var e=this;return i.a.find(this.props.store.genes.result,function(t){return t.hugoGeneSymbol===e.selectedGeneSymbol})}},{key:"geneTabContent",get:function(){if(this.selectedGene&&this.props.store.getMutationMapperStore(this.selectedGene)){var e=this.props.store.getMutationMapperStore(this.selectedGene);return r.createElement("div",null,r.createElement("div",{className:"tabMessageContainer"},r.createElement(rt.a,{className:"mutations-oql-status-banner",store:this.props.store,tabReflectsOql:this.props.store.mutationsTabFilteringSettings.useOql,isUnaffected:!this.props.store.queryContainsMutationOql,onToggle:this.onToggleOql}),r.createElement(it.a,{store:this.props.store,mutationsTabModeSettings:{excludeVUS:this.props.store.mutationsTabFilteringSettings.excludeVus,excludeGermline:this.props.store.mutationsTabFilteringSettings.excludeGermline,toggleExcludeVUS:this.onToggleVUS,toggleExcludeGermline:this.onToggleGermline,hugoGeneSymbol:this.selectedGene.hugoGeneSymbol}}),r.createElement(lt.a,{store:this.props.store})),r.createElement($e,ct({},Object(et.a)(Object.assign(Object.assign({},nt.b.serverConfig),{ensembl_transcript_url:this.props.store.ensemblLink,show_oncokb:!!e.isCanonicalTranscript&&nt.b.serverConfig.show_oncokb,show_hotspot:!!e.isCanonicalTranscript&&nt.b.serverConfig.show_hotspot})),{oncoKbPublicApiUrl:Object(at.t)(),store:e,isPutativeDriver:this.props.store.driverAnnotationSettings.driversAnnotated?function(e){return e.putativeDriver}:void 0,trackVisibility:this.userSelectionStore.trackVisibility,columnVisibility:this.userSelectionStore.columnVisibility,storeColumnVisibility:this.userSelectionStore.storeColumnVisibility,discreteCNACache:this.props.store.discreteCNACache,pubMedCache:this.props.store.pubMedCache,cancerTypeCache:this.props.store.cancerTypeCache,mutationCountCache:this.props.store.mutationCountCache,clinicalAttributeCache:this.props.store.clinicalAttributeCache,genomeNexusCache:this.props.store.genomeNexusCache,genomeNexusMutationAssessorCache:this.props.store.genomeNexusMutationAssessorCache,pdbHeaderCache:this.props.store.pdbHeaderCache,userEmailAddress:this.props.appStore.userName,generateGenomeNexusHgvsgUrl:this.props.store.generateGenomeNexusHgvsgUrl,existsSomeMutationWithAscnProperty:this.props.store.existsSomeMutationWithAscnProperty,mutationAlignerUrlTemplate:Object(at.s)(),showTranscriptDropDown:nt.b.serverConfig.show_transcript_dropdown,onTranscriptChange:this.onTranscriptChange,onClickSettingMenu:this.onClickSettingMenu,compactStyle:!0,ptmSources:nt.b.serverConfig.ptmSources})))}return null}}])&&ut(n.prototype,o),a&&ut(n,a),t}();mt([p.computed],yt.prototype,"selectedGeneSymbol",null),mt([p.computed],yt.prototype,"selectedGene",null),mt([ot.default],yt.prototype,"onToggleOql",null),mt([ot.default],yt.prototype,"onToggleVUS",null),mt([ot.default],yt.prototype,"onToggleGermline",null),mt([p.action],yt.prototype,"setSelectedGeneSymbol",null),mt([ot.default],yt.prototype,"handleTabChange",null),mt([p.computed],yt.prototype,"geneTabContent",null),mt([p.action.bound],yt.prototype,"onTranscriptChange",null),mt([p.action.bound],yt.prototype,"onClickSettingMenu",null);var bt=yt=mt([u.observer],yt),gt=n(1170),vt=n(74),_t=n.n(vt),wt=n(32),Ot=n(846),St=n(359),Et=n(73),kt=n(355);function Ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tt(e,t){return!t||"object"!==It(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xt(e){return(xt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&At(e,t)}function At(e,t){return(At=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function It(e){return(It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Mt=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":It(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Dt=function(e){function t(){return Pt(this,t),Tt(this,xt(t).apply(this,arguments))}return jt(t,Et["b"]),t}(),Nt=function(e){function t(){return Pt(this,t),Tt(this,xt(t).apply(this,arguments))}var n,o,i;return jt(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement(Dt,{data:this.props.geneAlterationData,columns:[{name:"Gene Symbol",render:function(e){return r.createElement("span",null,e.gene)},download:function(e){return e.gene},sortBy:function(e){return e.gene},filter:function(e,t,n){return e.gene.toUpperCase().indexOf(n)>-1}},{name:"OQL Line",visible:!1,render:function(e){return r.createElement("span",null,e.oqlLine)},download:function(e){return e.oqlLine},sortBy:function(e){return e.oqlLine},filter:function(e,t,n){return e.oqlLine.toUpperCase().indexOf(n)>-1}},{name:"Num Samples Altered",render:function(e){return r.createElement("span",null,e.sequenced?e.altered:"Not Profiled")},download:function(e){return e.sequenced?"".concat(e.altered):"N/P"},sortBy:function(e){return e.altered}},{name:"Percent Samples Altered",render:function(e){return e.sequenced?r.createElement(kt.a,{barWidth:200,textWidth:45,counts:[e.altered],totalCount:e.sequenced}):r.createElement("span",null,"Not Profiled")},download:function(e){return e.percentAltered},sortBy:function(e){return e.altered/e.sequenced}}],initialSortColumn:"Percent Samples Altered",initialSortDirection:"desc",showPagination:!0,initialItemsPerPage:10,showColumnVisibility:!0,showFilter:!0,showCopyDownload:!0,copyDownloadProps:{downloadFilename:"gene_alteration_frequency.tsv"}})}}])&&Ct(n.prototype,o),i&&Ct(n,i),t}(),Rt=Nt=Mt([u.observer],Nt),Lt=n(825),Gt=n(1187),Vt=n.n(Gt),Bt=n(314),Ft=n.n(Bt),Ht=n(161),Ut=n(42),Wt=n(855);function qt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kt(e,t){return!t||"object"!==Zt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qt(e){return(Qt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xt(e,t)}function Xt(e,t){return(Xt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zt(e){return(Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Jt=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Zt(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};function $t(e){var t=function(t){return e?"".concat(t.proteinChange).concat(t.isGermline?" [germline]":"").concat(t.putativeDriver?" (driver)":""):r.createElement("span",null,r.createElement("span",null,t.proteinChange),t.isGermline&&r.createElement("span",{className:Ft.a.germline},"Germline"),t.putativeDriver&&r.createElement("span",{className:Ft.a.driver},"(Driver)"))};return function(e){return e.map(t)}}function en(e){var t=function(t){return e?"".concat(t.type).concat(t.putativeDriver?" (driver)":""):r.createElement("span",null,r.createElement("span",null,t.type),t.putativeDriver&&r.createElement("span",{className:Ft.a.driver},"(Driver)"))};return function(e){return e.map(t)}}function tn(e,t,n,r){if(!o.isEmpty(e)&&e[t])return function(e,t,n){var r,o=function(e){return e.map(function(e){return e.type})},i=void 0;switch(0!==e.alterationTypes.length&&e.alterationTypes.includes(t)||(i={summaryContent:"no alteration",summaryClass:Vt.a.noAlterationSpan,summaryAlteredStatus:Ht.a.UNALTERED}),t){case"MUT":r={label:"MUT",getAlterationData:function(e){return e.mutation},isNotProfiled:function(e){return e.isMutationNotProfiled},getValues:$t(n)};break;case"FUSION":r={label:"FUSION",getAlterationData:function(e){return e.structuralVariant},isNotProfiled:function(e){return e.isStructuralVariantNotProfiled},getValues:function(e){return e}};break;case"CNA":r={label:"CNA",getAlterationData:function(e){return e.cna},isNotProfiled:function(e){return e.isCnaNotProfiled},getValues:en(n)};break;case"EXP":r={label:"EXP",getAlterationData:function(e){return e.mrnaExp},isNotProfiled:function(e){return e.isMrnaExpNotProfiled},getValues:o};break;case"PROT":r={label:"PROT",getAlterationData:function(e){return e.proteinLevel},isNotProfiled:function(e){return e.isProteinLevelNotProfiled},getValues:o}}if(r){var a=r.getAlterationData(e);if(a.length>0){var l=Object(Wt.a)(", ",r.getValues(a));i={summaryContent:n?l.join(""):l,summaryClass:Vt.a.alterationSpan,summaryAlteredStatus:Ht.a.ALTERED}}r.isNotProfiled(e)&&(i={summaryContent:"not profiled",summaryClass:Vt.a.notProfiledSpan,summaryAlteredStatus:Ht.a.UNPROFILED})}return i||void 0}(e[t],n,r)}function nn(e,t,n,r){var i=o.map(n,function(n){return tn(e,t,n,r)}),a=o.filter(i,function(e){return!!e&&e.summaryAlteredStatus===Ht.a.UNPROFILED});if(a&&a.length===n.length)return{summaryContent:"not profiled",summaryClass:Vt.a.notProfiledSpan,summaryAlteredStatus:Ht.a.UNPROFILED};var l=o.filter(i,function(e){return!!e&&e.summaryAlteredStatus===Ht.a.ALTERED}),s=Object(Wt.a)(", ",o.map(l,function(e){return e.summaryContent}));return l.length>0?{summaryContent:r?s.join(""):s,summaryClass:Vt.a.alterationSpan,summaryAlteredStatus:Ht.a.ALTERED}:{summaryContent:"no alteration",summaryClass:Vt.a.noAlterationSpan,summaryAlteredStatus:Ht.a.UNALTERED}}var rn=function(e){function t(){return zt(this,t),Kt(this,Qt(t).apply(this,arguments))}return Yt(t,Et["b"]),t}(),on=function(e){function t(){return zt(this,t),Kt(this,Qt(t).apply(this,arguments))}var n,i,a;return Yt(t,r["Component"]),n=t,(i=[{key:"render",value:function(){var e=this,t=[{name:"Study ID",render:function(e){return r.createElement("span",{style:{whiteSpace:"nowrap"}},r.createElement(Lt.a,{studyId:e.studyId},e.studyId))},download:function(e){return e.studyId},sortBy:function(e){return e.studyId},filter:function(e,t){return new RegExp(t,"i").test(e.studyId)}},{name:"Sample ID",render:function(e){return r.createElement("span",{style:{whiteSpace:"nowrap"}},r.createElement("a",{href:Object(at.x)(e.studyId,e.sampleId),target:"_blank"},e.sampleId))},download:function(e){return"".concat(e.sampleId)},sortBy:function(e){return e.sampleId},filter:function(e,t){return new RegExp(t,"i").test(e.sampleId)}},{name:"Patient ID",render:function(e){return r.createElement("span",{style:{whiteSpace:"nowrap"}},r.createElement("a",{href:Object(at.v)(e.studyId,e.patientId),target:"_blank"},e.patientId))},download:function(e){return"".concat(e.patientId)},sortBy:function(e){return e.patientId},filter:function(e,t){return new RegExp(t,"i").test(e.patientId)}},{name:"Altered",tooltip:r.createElement("span",null,"1 = Sample harbors alteration in one of the input genes"),render:function(e){return r.createElement("span",null,e.altered?"1":"0")},download:function(e){return e.altered?"1":"0"},sortBy:function(e){return e.altered?1:0}}];o.forEach(this.props.trackLabels,function(n){t.push({name:"".concat(n),headerDownload:function(e){return"".concat(n)},render:function(t){var o=nn(t.oqlData,n,e.props.trackAlterationTypesMap[n]);return r.createElement("span",{className:o.summaryClass},o.summaryContent)},download:function(t){return nn(t.oqlData,n,e.props.trackAlterationTypesMap[n],!0).summaryContent},sortBy:function(t){return nn(t.oqlData,n,e.props.trackAlterationTypesMap[n]).summaryContent},filter:function(t,r){return new RegExp(r,"i").test(nn(t.oqlData,n,e.props.trackAlterationTypesMap[n]).summaryContent)},visible:!0})});var n=o.uniq(o.map(this.props.oqls,function(e){return e.gene}));return o.forEach(n,function(n){e.props.geneAlterationTypesMap[n].forEach(function(e){var i=Object(Ut.h)(e),a=e.alteration_type.toUpperCase(),l="".concat(n,": ").concat(i);o.isEmpty(t.find(function(e){return e.name===l}))&&t.push({name:"".concat(n,": ").concat(i),headerDownload:function(e){return"".concat(n,": ").concat(i)},render:function(e){var t=tn(e.oqlDataByGene,n,a);return r.createElement("span",{className:t.summaryClass},t.summaryContent)},download:function(e){return tn(e.oqlDataByGene,n,a,!0).summaryContent},sortBy:function(e){return tn(e.oqlDataByGene,n,a).summaryContent},filter:function(e,t){return new RegExp(t,"i").test(tn(e.oqlDataByGene,n,a).summaryContent)},visible:!1})})}),r.createElement(rn,{data:this.props.caseAlterationData,columns:t,initialSortColumn:"Altered",initialSortDirection:"desc",initialItemsPerPage:20,showPagination:!0,showColumnVisibility:!0,showFilter:!0,showCopyDownload:!0,enableHorizontalScroll:!0,copyDownloadProps:{downloadFilename:"alterations_across_samples.tsv"}})}}])&&qt(n.prototype,i),a&&qt(n,a),t}(),an=on=Jt([u.observer],on),ln=n(423),sn=n(945),cn=n(222),un=n(328),pn=n(270),dn=n(810),fn=n.n(dn),hn=n(23),mn=n(51);function yn(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function bn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gn(e){return(gn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _n(e,t){return(_n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wn(e){return(wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var On=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":wn(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Sn=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,i=gn(t).call(this,e),n=!i||"object"!==wn(i)&&"function"!=typeof i?vn(r):i,Object.defineProperty(vn(n),"geneAlterationData",{enumerable:!0,configurable:!0,writable:!0,value:Object(z.vb)({await:function(){return[n.props.store.oqlFilteredCaseAggregatedDataByOQLLine,n.props.store.filteredSequencedSampleKeysByGene]},invoke:function(){return Promise.resolve(Object(ln.h)(n.props.store.oqlFilteredCaseAggregatedDataByOQLLine.result,n.props.store.filteredSequencedSampleKeysByGene.result))}})}),Object.defineProperty(vn(n),"geneAlterationDataByGene",{enumerable:!0,configurable:!0,writable:!0,value:Object(z.vb)({await:function(){return[n.geneAlterationData]},invoke:function(){return Promise.resolve(o.keyBy(n.geneAlterationData.result,"gene"))}})}),Object.defineProperty(vn(n),"caseAlterationData",{enumerable:!0,configurable:!0,writable:!0,value:Object(z.vb)({await:function(){return[n.props.store.selectedMolecularProfiles,n.props.store.oqlFilteredCaseAggregatedDataByOQLLine,n.props.store.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine,n.props.store.coverageInformation,n.props.store.filteredSamples,n.geneAlterationDataByGene,n.props.store.molecularProfileIdToMolecularProfile,n.props.store.defaultOQLQueryAlterations]},invoke:function(){return Promise.resolve(Object(ln.e)(n.props.store.oqlText,n.props.store.defaultOQLQueryAlterations.result,n.props.store.selectedMolecularProfiles.result,n.props.store.oqlFilteredCaseAggregatedDataByOQLLine.result,n.props.store.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine.result,n.props.store.coverageInformation.result,n.props.store.filteredSamples.result,n.geneAlterationDataByGene.result,n.props.store.molecularProfileIdToMolecularProfile.result))}})}),Object.defineProperty(vn(n),"mutationData",{enumerable:!0,configurable:!0,writable:!0,value:Object(z.vb)({await:function(){return[n.props.store.nonOqlFilteredCaseAggregatedData]},invoke:function(){return Promise.resolve(Object(ln.l)(n.props.store.nonOqlFilteredCaseAggregatedData.result))}})}),Object.defineProperty(vn(n),"mutationDownloadData",{enumerable:!0,configurable:!0,writable:!0,value:Object(z.vb)({await:function(){return[n.mutationData,n.props.store.samples,n.props.store.genes,n.props.store.coverageInformation,n.props.store.studyToSelectedMolecularProfilesMap]},invoke:function(){return Promise.resolve(Object(ln.m)(n.mutationData.result,n.props.store.samples.result,n.props.store.genes.result,Object(ln.t)(d.a.MUTATION_EXTENDED,n.props.store.studyToSelectedMolecularProfilesMap.result,n.props.store.coverageInformation.result)))}})}),Object.defineProperty(vn(n),"genericAssayProfileDownloadDataGroupByProfileIdSuffix",{enumerable:!0,configurable:!0,writable:!0,value:Object(z.vb)({await:function(){return[n.props.store.samples,n.props.store.genericAssayEntityStableIdsGroupByProfileIdSuffix,n.props.store.genericAssayDataGroupByProfileIdSuffix,n.props.store.genericAssayProfilesGroupByProfileIdSuffix,n.props.store.genericAssayStableIdToMeta]},invoke:function(){var e=o.mapValues(n.props.store.genericAssayDataGroupByProfileIdSuffix.result,function(e,t){var r={samples:o.groupBy(e,function(e){return e.uniqueSampleKey})};return Object(ln.i)(n.props.store.genericAssayProfilesGroupByProfileIdSuffix.result[t].map(function(e){return e.molecularProfileId}),r)});return Promise.resolve(o.mapValues(e,function(e,t){return Object(ln.j)(e,n.props.store.samples.result,n.props.store.genericAssayEntityStableIdsGroupByProfileIdSuffix.result[t],n.props.store.genericAssayStableIdToMeta.result)}))}})}),Object.defineProperty(vn(n),"mrnaData",{enumerable:!0,configurable:!0,writable:!0,value:Object(z.vb)({await:function(){return[n.props.store.nonOqlFilteredCaseAggregatedData]},invoke:function(){return Promise.resolve(Object(ln.k)(n.props.store.nonOqlFilteredCaseAggregatedData.result))}})}),Object.defineProperty(vn(n),"mrnaDownloadData",{enumerable:!0,configurable:!0,writable:!0,value:Object(z.vb)({await:function(){return[n.mrnaData,n.props.store.samples,n.props.store.genes,n.props.store.coverageInformation,n.props.store.studyToSelectedMolecularProfilesMap]},invoke:function(){return Promise.resolve(Object(ln.g)(n.mrnaData.result,n.props.store.samples.result,n.props.store.genes.result,Object(ln.t)(d.a.MRNA_EXPRESSION,n.props.store.studyToSelectedMolecularProfilesMap.result,n.props.store.coverageInformation.result)))}})}),Object.defineProperty(vn(n),"proteinData",{enumerable:!0,configurable:!0,writable:!0,value:Object(z.vb)({await:function(){return[n.props.store.nonOqlFilteredCaseAggregatedData]},invoke:function(){return Promise.resolve(Object(ln.n)(n.props.store.nonOqlFilteredCaseAggregatedData.result))}})}),Object.defineProperty(vn(n),"proteinDownloadData",{enumerable:!0,configurable:!0,writable:!0,value:Object(z.vb)({await:function(){return[n.proteinData,n.props.store.samples,n.props.store.genes,n.props.store.coverageInformation,n.props.store.studyToSelectedMolecularProfilesMap]},invoke:function(){return Promise.resolve(Object(ln.g)(n.proteinData.result,n.props.store.samples.result,n.props.store.genes.result,Object(ln.t)(d.a.PROTEIN_LEVEL,n.props.store.studyToSelectedMolecularProfilesMap.result,n.props.store.coverageInformation.result)))}})}),Object.defineProperty(vn(n),"cnaData",{enumerable:!0,configurable:!0,writable:!0,value:Object(z.vb)({await:function(){return[n.props.store.nonOqlFilteredCaseAggregatedData]},invoke:function(){return Promise.resolve(Object(ln.f)(n.props.store.nonOqlFilteredCaseAggregatedData.result))}})}),Object.defineProperty(vn(n),"cnaDownloadData",{enumerable:!0,configurable:!0,writable:!0,value:Object(z.vb)({await:function(){return[n.cnaData,n.props.store.samples,n.props.store.genes,n.props.store.coverageInformation,n.props.store.studyToSelectedMolecularProfilesMap]},invoke:function(){return Promise.resolve(Object(ln.g)(n.cnaData.result,n.props.store.samples.result,n.props.store.genes.result,Object(ln.t)(d.a.COPY_NUMBER_ALTERATION,n.props.store.studyToSelectedMolecularProfilesMap.result,n.props.store.coverageInformation.result)))}})}),Object.defineProperty(vn(n),"structuralVariantData",{enumerable:!0,configurable:!0,writable:!0,value:Object(z.vb)({await:function(){return[n.props.store.nonOqlFilteredCaseAggregatedData]},invoke:function(){return Promise.resolve(Object(ln.p)(n.props.store.nonOqlFilteredCaseAggregatedData.result))}})}),Object.defineProperty(vn(n),"structuralVariantDownloadData",{enumerable:!0,configurable:!0,writable:!0,value:Object(z.vb)({await:function(){return[n.structuralVariantData,n.props.store.samples,n.props.store.genes,n.props.store.coverageInformation,n.props.store.studyToSelectedMolecularProfilesMap]},invoke:function(){return Promise.resolve(Object(ln.o)(n.structuralVariantData.result,n.props.store.samples.result,n.props.store.genes.result,Object(ln.t)(d.a.STRUCTURAL_VARIANT,n.props.store.studyToSelectedMolecularProfilesMap.result,n.props.store.coverageInformation.result)))}})}),Object.defineProperty(vn(n),"alteredCaseAlterationData",{enumerable:!0,configurable:!0,writable:!0,value:Object(z.vb)({await:function(){return[n.caseAlterationData]},invoke:function(){return Promise.resolve(n.caseAlterationData.result.filter(function(e){return e.altered}))}})}),Object.defineProperty(vn(n),"unalteredCaseAlterationData",{enumerable:!0,configurable:!0,writable:!0,value:Object(z.vb)({await:function(){return[n.caseAlterationData]},invoke:function(){return Promise.resolve(n.caseAlterationData.result.filter(function(e){return!e.altered}))}})}),Object.defineProperty(vn(n),"sampleMatrix",{enumerable:!0,configurable:!0,writable:!0,value:Object(z.vb)({await:function(){return[n.caseAlterationData]},invoke:function(){var e=[];return o.map(n.caseAlterationData.result,function(t){if(o.isEmpty(e)){var n=o.keys(t.oqlDataByGene);e.push(["studyID:sampleId","Altered"].concat(yn(n)))}var r=o.map(t.oqlDataByGene,function(e){return o.isEmpty(e.alterationTypes)?"0":"1"});e.push(["".concat(t.studyId,":").concat(t.sampleId),t.altered?"1":"0"].concat(yn(r)))}),Promise.resolve(e)}})}),Object.defineProperty(vn(n),"sampleMatrixText",{enumerable:!0,configurable:!0,writable:!0,value:Object(z.vb)({await:function(){return[n.sampleMatrix]},invoke:function(){return Promise.resolve(Object(ln.u)(n.sampleMatrix.result))}})}),Object.defineProperty(vn(n),"oqls",{enumerable:!0,configurable:!0,writable:!0,value:Object(z.vb)({await:function(){return[n.props.store.oqlFilteredCaseAggregatedDataByOQLLine]},invoke:function(){return Promise.resolve(n.props.store.oqlFilteredCaseAggregatedDataByOQLLine.result.map(function(e){return e.oql}))}})}),Object.defineProperty(vn(n),"trackLabels",{enumerable:!0,configurable:!0,writable:!0,value:Object(z.vb)({await:function(){return[n.props.store.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine,n.props.store.defaultOQLQueryAlterations]},invoke:function(){var e=[];return n.props.store.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine.result.forEach(function(t,r){void 0===t.mergedTrackOqlList?e.push(Object(wt.u)(r,n.props.store.oqlText,t.oql,n.props.store.defaultOQLQueryAlterations.result)):e.push(Object(wt.s)(t.oql))}),Promise.resolve(e)}})}),Object.defineProperty(vn(n),"trackAlterationTypesMap",{enumerable:!0,configurable:!0,writable:!0,value:Object(z.vb)({await:function(){return[n.props.store.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine,n.props.store.defaultOQLQueryAlterations]},invoke:function(){var e={};return n.props.store.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine.result.forEach(function(t,r){if(void 0===t.mergedTrackOqlList){var i=t.oql,a=Object(wt.u)(r,n.props.store.oqlText,t.oql,n.props.store.defaultOQLQueryAlterations.result);i.parsed_oql_line.alterations&&(e[a]=o.uniq(o.map(i.parsed_oql_line.alterations,function(e){return e.alteration_type.toUpperCase()})))}else{var l=t.oql,s=Object(wt.s)(t.oql),c=[];o.forEach(l.list,function(e){if(e.parsed_oql_line.alterations){var t=o.map(e.parsed_oql_line.alterations,function(e){return e.alteration_type.toUpperCase()});c.push.apply(c,yn(t))}}),e[s]=o.uniq(c)}}),Promise.resolve(e)}})}),Object.defineProperty(vn(n),"geneAlterationMap",{enumerable:!0,configurable:!0,writable:!0,value:Object(z.vb)({await:function(){return[n.props.store.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine]},invoke:function(){var e={};return n.props.store.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine.result.forEach(function(t,n){if(void 0===t.mergedTrackOqlList){var r=t.oql;r.parsed_oql_line.alterations&&(e[r.gene]=o.chain(r.parsed_oql_line.alterations).union(e[r.gene]).uniq().value())}else{var i=t.oql;o.forEach(i.list,function(t){if(t.parsed_oql_line.alterations){o.map(t.parsed_oql_line.alterations,function(e){return e.alteration_type});e[t.gene]=o.chain(t.parsed_oql_line.alterations).union(e[t.gene]).uniq().value()}})}}),Promise.resolve(e)}})}),Object(p.makeObservable)(vn(n)),n.handleMutationDownload=n.handleMutationDownload.bind(vn(n)),n.handleTransposedMutationDownload=n.handleTransposedMutationDownload.bind(vn(n)),n.handleCnaDownload=n.handleCnaDownload.bind(vn(n)),n.handleTransposedCnaDownload=n.handleTransposedCnaDownload.bind(vn(n)),n.handleMrnaDownload=n.handleMrnaDownload.bind(vn(n)),n.handleTransposedMrnaDownload=n.handleTransposedMrnaDownload.bind(vn(n)),n.handleProteinDownload=n.handleProteinDownload.bind(vn(n)),n.handleTransposedProteinDownload=n.handleTransposedProteinDownload.bind(vn(n)),n}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_n(e,t)}(t,r["Component"]),n=t,(i=[{key:"render",value:function(){switch(Object(y.Z)(this.geneAlterationData,this.caseAlterationData,this.oqls,this.trackLabels,this.trackAlterationTypesMap,this.geneAlterationMap,this.cnaData,this.mutationData,this.structuralVariantData,this.mrnaData,this.proteinData,this.unalteredCaseAlterationData,this.alteredCaseAlterationData,this.props.store.virtualStudyParams,this.sampleMatrixText,this.props.store.nonSelectedDownloadableMolecularProfilesGroupByName,this.props.store.studies,this.props.store.selectedMolecularProfiles,this.props.store.genericAssayDataGroupByProfileIdSuffix)){case"pending":return r.createElement(st.a,{isLoading:!0,center:!0,size:"big"});case"error":return r.createElement(un.a,null);case"complete":return r.createElement(sn.a,{"data-test":"downloadTabDiv",offset:60},r.createElement("div",{className:"tabMessageContainer"},r.createElement(rt.a,{className:"download-oql-status-banner",store:this.props.store,tabReflectsOql:!0}),r.createElement(it.a,{store:this.props.store}),r.createElement(lt.a,{store:this.props.store})),r.createElement("div",null,r.createElement(Ot.a,{title:"Downloadable Data Files",className:"forceHeaderStyle h4",isLoading:!1,style:{marginBottom:15}}),r.createElement("table",{className:v()("table","table-striped",Vt.a.downloadCopyTable)},r.createElement("tbody",null,Object(ln.q)(this.cnaData.result)&&this.cnaDownloadControls(),Object(ln.r)(this.mutationData.result)&&this.mutationDownloadControls(),Object(ln.s)(this.structuralVariantData.result)&&this.structuralVariantDownloadControls(),Object(ln.q)(this.mrnaData.result)&&this.mrnaExprDownloadControls(this.props.store.selectedMolecularProfiles.result.find(function(e){return e.molecularAlterationType===d.a.MRNA_EXPRESSION}).name),Object(ln.q)(this.proteinData.result)&&this.proteinExprDownloadControls(this.props.store.selectedMolecularProfiles.result.find(function(e){return e.molecularAlterationType===d.a.PROTEIN_LEVEL}).name),this.alteredSamplesDownloadControls(this.alteredCaseAlterationData.result,this.props.store.virtualStudyParams.result),this.unalteredSamplesDownloadControls(this.unalteredCaseAlterationData.result,this.props.store.virtualStudyParams.result),this.sampleMatrixDownloadControls(this.sampleMatrixText.result),this.props.store.doNonSelectedDownloadableMolecularProfilesExist&&this.nonSelectedProfileDownloadRow(this.props.store.nonSelectedDownloadableMolecularProfilesGroupByName.result),1===this.props.store.studies.result.length&&!o.isEmpty(this.props.store.genericAssayProfilesGroupByProfileIdSuffix.result)&&this.genericAssayProfileDownloadRows(this.props.store.genericAssayProfilesGroupByProfileIdSuffix.result,o.keys(this.props.store.genericAssayDataGroupByProfileIdSuffix.result))))),r.createElement("hr",null),r.createElement("div",{className:Vt.a["tables-container"],"data-test":"dataDownloadGeneAlterationTable"},r.createElement(Ot.a,{title:"Gene Alteration Frequency",isLoading:!1,className:"pull-left forceHeaderStyle h4"}),r.createElement(Rt,{geneAlterationData:this.geneAlterationData.result})),r.createElement("hr",null),r.createElement("div",{className:Vt.a["tables-container"]},r.createElement(Ot.a,{title:"Type of Genetic Alterations Across All Samples",isLoading:!1,className:"pull-left forceHeaderStyle h4"}),r.createElement(an,{caseAlterationData:this.caseAlterationData.result,oqls:this.oqls.result,trackLabels:this.trackLabels.result,trackAlterationTypesMap:this.trackAlterationTypesMap.result,geneAlterationTypesMap:this.geneAlterationMap.result})));default:return r.createElement(un.a,null)}}},{key:"cnaDownloadControls",value:function(){return this.downloadControlsRow("Copy-number Alterations (OQL is not in effect)",this.handleCnaDownload,this.handleTransposedCnaDownload)}},{key:"mutationDownloadControls",value:function(){return this.downloadControlsRow("Mutations (OQL is not in effect)",this.handleMutationDownload,this.handleTransposedMutationDownload)}},{key:"structuralVariantDownloadControls",value:function(){return this.downloadControlsRow("Structural Variants (OQL is not in effect)",this.handleStructuralVariantDownload,this.handleTransposedStructuralVariantDownload)}},{key:"mrnaExprDownloadControls",value:function(e){return this.downloadControlsRow(e,this.handleMrnaDownload,this.handleTransposedMrnaDownload)}},{key:"proteinExprDownloadControls",value:function(e){return this.downloadControlsRow(e,this.handleProteinDownload,this.handleTransposedProteinDownload)}},{key:"downloadControlsRow",value:function(e,t,n){return r.createElement("tr",null,r.createElement("td",{style:{width:500}},e),r.createElement("td",null,r.createElement("a",{onClick:function(n){return t(e)}},r.createElement("i",{className:"fa fa-cloud-download",style:{marginRight:5}}),"Tab Delimited Format"),r.createElement("span",{style:{margin:"0px 10px"}},"|"),r.createElement("a",{onClick:function(t){return n(e)}},r.createElement("i",{className:"fa fa-cloud-download",style:{marginRight:5}}),"Transposed Matrix")))}},{key:"nonSelectedProfileDownloadRow",value:function(e){var t=this,n=o.map(e,function(e,n){return 1===t.props.store.studies.result.length?{name:n,description:e[0].description}:{name:n}});return o.map(n,function(e){return r.createElement("tr",null,r.createElement("td",{style:{width:500}},r.createElement("div",{style:{display:"flex",alignItems:"center"}},e.name,e.description&&r.createElement(z.i,{mouseEnterDelay:0,placement:"right",overlay:r.createElement("div",{className:Vt.a.tooltip},e.description)},r.createElement(fn.a,{className:Vt.a.infoIcon,name:"info-circle"})))),r.createElement("td",null,r.createElement("div",null,r.createElement("a",{onClick:function(){return t.handleNonSelectedMolecularProfileDownload(e.name)}},r.createElement("i",{className:"fa fa-cloud-download",style:{marginRight:5}}),"Tab Delimited Format"),r.createElement("span",{style:{margin:"0px 10px"}},"|"),r.createElement("a",{onClick:function(){return t.handleTransposedNonSelectedMolecularProfileDownload(e.name)}},r.createElement("i",{className:"fa fa-cloud-download",style:{marginRight:5}}),"Transposed Matrix"))))})}},{key:"genericAssayProfileDownloadRows",value:function(e,t){var n=this,i=o.map(e,function(e,t){var n=e[0];return{name:n.name,description:n.description,profileIdSuffix:t}});return o.map(i,function(e){return r.createElement("tr",null,r.createElement("td",{style:{width:500}},r.createElement("div",{style:{display:"flex",alignItems:"center"}},e.name,e.description&&r.createElement(z.i,{mouseEnterDelay:0,placement:"right",overlay:r.createElement("div",{className:Vt.a.tooltip},e.description)},r.createElement(fn.a,{className:Vt.a.infoIcon,name:"info-circle"})))),r.createElement("td",null,r.createElement("div",null,r.createElement(hn.If,{condition:t.includes(e.profileIdSuffix)},r.createElement(hn.Then,null,r.createElement("a",{onClick:function(){return n.handleGenericAssayProfileDownload(e.name,e.profileIdSuffix)}},r.createElement("i",{className:"fa fa-cloud-download",style:{marginRight:5}}),"Tab Delimited Format"),r.createElement("span",{style:{margin:"0px 10px"}},"|"),r.createElement("a",{onClick:function(){return n.handleTransposedGenericAssayProfileDownload(e.name,e.profileIdSuffix)}},r.createElement("i",{className:"fa fa-cloud-download",style:{marginRight:5}}),"Transposed Matrix")),r.createElement(hn.Else,null,"Tracks added in the ",r.createElement("a",{onClick:function(){return n.props.store.handleTabChange(mn.d.ONCOPRINT)}},"OncoPrint tab")," can be downloaded here.")))))})}},{key:"copyDownloadControlsRow",value:function(e,t,n){return r.createElement("tr",null,r.createElement("td",null,e),r.createElement("td",null,r.createElement(St.a,{controlsStyle:"LINK",downloadData:t,downloadFilename:n})))}},{key:"copyDownloadQueryControlsRow",value:function(e,t,n,o,i){return r.createElement("tr",null,r.createElement("td",null,e),r.createElement("td",null,r.createElement(St.a,{controlsStyle:"QUERY",downloadData:t,downloadFilename:n,handleQuery:o,virtualStudyParams:i})))}},{key:"alteredSamplesDownloadControls",value:function(e,t){var n=this,r=o.map(e,function(e){return"".concat(e.studyId,":").concat(e.sampleId)}),i={user:t.user,name:t.name,description:t.description,studyWithSamples:t.studyWithSamples,selectedSamples:o.filter(t.selectedSamples,function(e){return r.includes("".concat(e.studyId,":").concat(e.sampleId))}),filter:t.filter,attributesMetaSet:t.attributesMetaSet};return this.copyDownloadQueryControlsRow("Altered samples: List of samples with alterations",function(){return r.join("\n")},"altered_samples.txt",function(){return n.handleQueryButtonClick(r)},i)}},{key:"unalteredSamplesDownloadControls",value:function(e,t){var n=this,r=o.map(e,function(e){return"".concat(e.studyId,":").concat(e.sampleId)}),i={user:t.user,name:t.name,description:t.description,studyWithSamples:t.studyWithSamples,selectedSamples:o.filter(t.selectedSamples,function(e){return r.includes("".concat(e.studyId,":").concat(e.sampleId))}),filter:t.filter,attributesMetaSet:t.attributesMetaSet};return this.copyDownloadQueryControlsRow("Unaltered samples: List of samples without any alteration",function(){return r.join("\n")},"unaltered_samples.txt",function(){return n.handleQueryButtonClick(r)},i)}},{key:"sampleMatrixDownloadControls",value:function(e){return this.copyDownloadControlsRow("Sample matrix: List of all samples where 1=altered and 0=unaltered",function(){return e},"sample_matrix.txt")}},{key:"handleMutationDownload",value:function(){Object(cn.a)(this.mutationDownloadData,function(e){var t=Object(ln.b)(e);_t()(t,"mutations.txt")})}},{key:"handleTransposedMutationDownload",value:function(){Object(cn.a)(this.mutationDownloadData,function(e){var t=Object(ln.b)(Object(ln.v)(e));_t()(t,"mutations_transposed.txt")})}},{key:"handleStructuralVariantDownload",value:function(){Object(cn.a)(this.structuralVariantDownloadData,function(e){var t=Object(ln.b)(e);_t()(t,"structural_variants.txt")})}},{key:"handleTransposedStructuralVariantDownload",value:function(){Object(cn.a)(this.structuralVariantDownloadData,function(e){var t=Object(ln.b)(Object(ln.v)(e));_t()(t,"structural_variants_transposed.txt")})}},{key:"handleMrnaDownload",value:function(e){Object(cn.a)(this.mrnaDownloadData,function(t){var n=Object(ln.b)(t);_t()(n,"".concat(e,".txt"))})}},{key:"handleTransposedMrnaDownload",value:function(e){Object(cn.a)(this.mrnaDownloadData,function(t){var n=Object(ln.b)(Object(ln.v)(t));_t()(n,"".concat(e,".txt"))})}},{key:"handleProteinDownload",value:function(e){Object(cn.a)(this.proteinDownloadData,function(t){var n=Object(ln.b)(t);_t()(n,"".concat(e,".txt"))})}},{key:"handleTransposedProteinDownload",value:function(e){Object(cn.a)(this.proteinDownloadData,function(t){var n=Object(ln.b)(Object(ln.v)(t));_t()(n,"".concat(e,".txt"))})}},{key:"handleCnaDownload",value:function(){Object(cn.a)(this.cnaDownloadData,function(e){var t=Object(ln.b)(e);_t()(t,"cna.txt")})}},{key:"handleTransposedCnaDownload",value:function(){Object(cn.a)(this.cnaDownloadData,function(e){var t=Object(ln.b)(Object(ln.v)(e));_t()(t,"cna_transposed.txt")})}},{key:"handleNonSelectedMolecularProfileDownload",value:function(e){Object(cn.a)([this.props.store.nonSelectedDownloadableMolecularProfiles,this.props.store.samples,this.props.store.genes],function(t,n,r){var o=t.filter(function(t){return t.name===e});Object(ln.d)(e,o,n,r)})}},{key:"handleTransposedNonSelectedMolecularProfileDownload",value:function(e){Object(cn.a)([this.props.store.nonSelectedDownloadableMolecularProfiles,this.props.store.samples,this.props.store.genes],function(t,n,r){var o=t.filter(function(t){return t.name===e});Object(ln.d)(e,o,n,r,!0)})}},{key:"handleGenericAssayProfileDownload",value:function(e,t){Object(cn.a)(this.genericAssayProfileDownloadDataGroupByProfileIdSuffix,function(n){var r=Object(ln.c)(n);_t()(r[t],"".concat(e,".txt"))})}},{key:"handleTransposedGenericAssayProfileDownload",value:function(e,t){Object(cn.a)(this.genericAssayProfileDownloadDataGroupByProfileIdSuffix,function(n){var r=Object(ln.c)(Object(ln.w)(n));_t()(r[t],"".concat(e,".txt"))})}},{key:"handleQueryButtonClick",value:function(e){var t={selectedSampleListId:pn.a,selectedSampleIds:e,caseIdsMode:"sample"};this.props.store.modifyQueryParams=t,this.props.store.queryFormVisible=!0}}])&&bn(n.prototype,i),a&&bn(n,a),t}();On([ot.default],Sn.prototype,"handleStructuralVariantDownload",null),On([ot.default],Sn.prototype,"handleTransposedStructuralVariantDownload",null),On([ot.default],Sn.prototype,"handleNonSelectedMolecularProfileDownload",null),On([ot.default],Sn.prototype,"handleTransposedNonSelectedMolecularProfileDownload",null),On([ot.default],Sn.prototype,"handleGenericAssayProfileDownload",null),On([ot.default],Sn.prototype,"handleTransposedGenericAssayProfileDownload",null),On([p.action],Sn.prototype,"handleQueryButtonClick",null);var En=Sn=On([u.observer],Sn),kn=n(1041),Cn=n(1043),Pn=n(220),Tn=n(856),xn=n(876);function jn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function An(e){return(An=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function In(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mn(e,t){return(Mn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Dn(e){return(Dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Nn=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Dn(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Rn=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=An(t).call(this,e),n=!o||"object"!==Dn(o)&&"function"!=typeof o?In(r):o,Object.defineProperty(In(n),"renderingComplete",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(In(n),"selectedLocus",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(In(n),"segmentTrackMaxHeight",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(In(n),"chromosome",{enumerable:!0,configurable:!0,writable:!0,value:Object(z.vb)({await:function(){return[n.props.store.hugoGeneSymbolToReferenceGene]},invoke:function(){return Promise.resolve(n.props.store.hugoGeneSymbolToReferenceGene.result[n.activeLocus].chromosome)}})}),Object(p.makeObservable)(In(n)),n.segmentTrackMaxHeight=.7*Pn.a.size.height,n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mn(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=this;return r.createElement("div",{className:"pillTabs"},r.createElement(st.a,{isLoading:this.isHidden,size:"big",center:!0},r.createElement(xn.a,{getItems:function(){return e.progressItems},show:this.isHidden,sequential:!0})),r.createElement(Cn.a,{promise:this.props.store.cnSegments,filename:this.filename}),r.createElement("div",{className:"tabMessageContainer"},r.createElement(lt.a,{store:this.props.store})),r.createElement(w.Nav,{bsStyle:"pills",activeKey:this.activeLocus,onSelect:this.onTabSelect},r.createElement(w.NavItem,{eventKey:Tn.a},"Whole Genome"),this.props.store.genes.result&&this.props.store.genes.result.map(function(e){return r.createElement(w.NavItem,{eventKey:e.hugoGeneSymbol},e.hugoGeneSymbol)})),this.tooManySamplesForWholeGenome&&r.createElement("span",null,"Too many samples (",">".concat(this.props.sampleThreshold),") for the whole genome view. Try to select a different sample list."),r.createElement("div",{style:this.isHidden||this.tooManySamplesForWholeGenome?{opacity:0}:void 0},r.createElement(kn.a,{tracks:[Object.assign(Object.assign({},Object(Tn.c)()),{height:this.segmentTrackHeight,features:this.features})],genome:this.props.store.referenceGenome,locus:this.activeLocus,onRenderingStart:this.onIgvRenderingStart,onRenderingComplete:this.onIgvRenderingComplete,disableSearch:this.activeLocus!==Tn.a,isVisible:this.props.store.tabId===mn.d.CN_SEGMENTS&&!this.isHidden&&!this.tooManySamplesForWholeGenome})))}},{key:"onTabSelect",value:function(e){this.selectedLocus=e}},{key:"onIgvRenderingStart",value:function(){this.renderingComplete=!1}},{key:"onIgvRenderingComplete",value:function(){this.renderingComplete=!0}},{key:"segmentTrackHeight",get:function(){return Object(Tn.b)(this.features,this.segmentTrackMaxHeight)}},{key:"activeLocus",get:function(){var e=this.selectedLocus;return e||(e=this.props.store.genes.result?this.props.store.genes.result[0].hugoGeneSymbol:Tn.a),e}},{key:"features",get:function(){var e=this.activePromise&&this.activePromise.result||[];return Object(Tn.d)(e)}},{key:"filename",get:function(){return"".concat(this.props.store.downloadFilenamePrefix,"segments.seg")}},{key:"isHidden",get:function(){return this.isLoading||!this.renderingComplete}},{key:"isSampleCountWithinThreshold",get:function(){return!this.props.store.filteredSamples.result||!this.props.sampleThreshold||this.props.store.filteredSamples.result.length<=this.props.sampleThreshold}},{key:"tooManySamplesForWholeGenome",get:function(){return this.activeLocus===Tn.a&&!this.isSampleCountWithinThreshold}},{key:"isLoading",get:function(){return!this.tooManySamplesForWholeGenome&&(!this.activePromise||this.activePromise.isPending)}},{key:"activePromise",get:function(){return this.activeLocus===Tn.a?this.props.store.filteredSamples.result&&this.isSampleCountWithinThreshold?this.props.store.cnSegments:void 0:this.props.store.cnSegmentsByChromosome.result&&this.chromosome?this.props.store.cnSegmentsByChromosome.result[this.chromosome.result]:void 0}},{key:"indicatorPromises",get:function(){var e=[this.props.store.studies,this.props.store.genes];return this.activeLocus!==Tn.a&&e.push(this.props.store.cnSegmentsByChromosome),this.activePromise&&e.push(this.activePromise),e}},{key:"progressItems",get:function(){return[{label:"Loading copy number segments data...",promises:this.indicatorPromises},{label:"Rendering"}]}}])&&jn(n.prototype,o),i&&jn(n,i),t}();Object.defineProperty(Rn,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{sampleThreshold:2e4}}),Nn([p.observable],Rn.prototype,"renderingComplete",void 0),Nn([p.observable.ref],Rn.prototype,"selectedLocus",void 0),Nn([p.observable],Rn.prototype,"segmentTrackMaxHeight",void 0),Nn([p.computed],Rn.prototype,"segmentTrackHeight",null),Nn([p.computed],Rn.prototype,"activeLocus",null),Nn([p.computed],Rn.prototype,"features",null),Nn([p.computed],Rn.prototype,"filename",null),Nn([p.computed],Rn.prototype,"isHidden",null),Nn([p.computed],Rn.prototype,"isSampleCountWithinThreshold",null),Nn([p.computed],Rn.prototype,"tooManySamplesForWholeGenome",null),Nn([p.computed],Rn.prototype,"isLoading",null),Nn([p.computed],Rn.prototype,"activePromise",null),Nn([p.computed],Rn.prototype,"indicatorPromises",null),Nn([p.computed],Rn.prototype,"progressItems",null),Nn([p.action.bound],Rn.prototype,"onTabSelect",null),Nn([p.action.bound],Rn.prototype,"onIgvRenderingStart",null),Nn([p.action.bound],Rn.prototype,"onIgvRenderingComplete",null);var Ln=Rn=Nn([u.observer],Rn),Gn=(n(1320),n(993)),Vn=function(e){var t=e.message,n=t!==e.loadingMessage;return r.createElement("div",{"data-test":"pathwayMapperMessageBox",className:"alert "+(n?"alert-warning":"alert-success"),style:{marginLeft:"1%",marginBottom:"0px",marginTop:"5px",color:"black",maxHeight:"32px",overflowY:"auto",display:0==t.length?"none":"block"}},r.createElement("button",{type:"button",className:"close",onClick:e.onClearMessage},r.createElement(fn.a,{name:"times"})),n&&r.createElement("i",{className:"fa fa-md fa-exclamation-triangle",style:{marginRight:"6px",marginBottom:"1px"}}),t)},Bn=n(21),Fn=n(336);n(994),n(995),n(996);function Hn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Un(e){return(Un=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qn(e,t){return(qn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zn(e){return(zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Kn=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":zn(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Qn=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function l(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,l)}s((r=r.apply(e,t||[])).next())})},Yn=function(e){function t(e){var r,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,i=Un(t).call(this,e),r=!i||"object"!==zn(i)&&"function"!=typeof i?Wn(o):i,Object.defineProperty(Wn(r),"accumulatedAlterationFrequencyDataForNonQueryGenes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(Wn(r),"accumulatedValidGenes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(Wn(r),"selectedPathway",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(Wn(r),"newGenesFromPathway",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(Wn(r),"warningMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(Wn(r),"validNonQueryGenes",{enumerable:!0,configurable:!0,writable:!0,value:Object(z.vb)({invoke:function(){return Qn(Wn(r),void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Bn.u)(this.newGenesFromPathway);case 2:return t=e.sent,e.abrupt("return",t.map(function(e){return e.hugoGeneSymbol}));case 4:case"end":return e.stop()}},e,this)}))}})}),Object.defineProperty(Wn(r),"addGenomicData",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(Wn(r),"PathwayMapperComponent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object(p.makeObservable)(Wn(r)),r.accumulatedValidGenes={},r.accumulatedAlterationFrequencyDataForNonQueryGenes=[],n.e(9).then(n.t.bind(null,1765,7)).then(function(e){r.PathwayMapperComponent=e.default}),r}var o,a,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qn(e,t)}(t,r["Component"]),o=t,(a=[{key:"render",value:function(){return this.isNewStoreReady&&this.addGenomicData(this.alterationFrequencyData),this.PathwayMapperComponent?r.createElement("div",{className:"pathwayMapper"},r.createElement("div",{"data-test":"pathwayMapperTabDiv",className:"cBioMode",style:{width:"99%"}},r.createElement(w.Row,null,r.createElement(r.Fragment,null,r.createElement(rt.a,{className:"coexp-oql-status-banner",store:this.props.store,tabReflectsOql:!0}),r.createElement(this.PathwayMapperComponent,{isCBioPortal:!0,isCollaborative:!1,genes:this.props.store.genes.result,cBioAlterationData:this.alterationFrequencyData,onAddGenes:this.handleAddGenes,changePathwayHandler:this.handlePathwayChange,addGenomicDataHandler:this.addGenomicDataHandler,messageBanner:this.renderBanner,tableComponent:this.renderTable,validGenes:this.validGenes,showMessage:this.updateMessage}))))):null}},{key:"addGenomicDataHandler",value:function(e){this.addGenomicData=e}},{key:"handlePathwayChange",value:function(e){this.newGenesFromPathway=e}},{key:"handleAddGenes",value:function(e){Object(mn.e)(this.props.urlWrapper,e)}},{key:"updateMessage",value:function(e){this.warningMessage=e}},{key:"clearMessage",value:function(){this.warningMessage=null}},{key:"renderBanner",value:function(){return r.createElement(Vn,{message:this.message,loadingMessage:"Loading alteration data...",onClearMessage:this.clearMessage})}},{key:"renderTable",value:function(e,t,n){return r.createElement(Gn.b,{data:e,selectedPathway:t,changePathway:n,onSelectedPathwayChange:this.clearMessage})}},{key:"alterationFrequencyData",get:function(){return this.alterationFrequencyDataForQueryGenes.concat(this.alterationFrequencyDataForNonQueryGenes)}},{key:"message",get:function(){return this.isNewStoreReady&&"Loading alteration data..."===this.warningMessage?"":!this.isNewStoreReady&&this.validNonQueryGenes.isComplete&&this.validNonQueryGenes.result.length>0?"Loading alteration data...":this.warningMessage?this.warningMessage:""}},{key:"alterationFrequencyDataForQueryGenes",get:function(){var e=this,t=[];return this.props.store.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine.result.forEach(function(n){var r=Object(Fn.b)(e.props.store.samples.result,e.props.store.patients.result,e.props.store.coverageInformation.result,e.props.store.filteredSequencedSampleKeysByGene.result,e.props.store.filteredSequencedPatientKeysByGene.result,e.props.store.selectedMolecularProfiles.result,n,!0,e.props.store.genes.result);r&&t.push(r)}),t}},{key:"alterationFrequencyDataForNonQueryGenes",get:function(){var e=this,t=[];return this.isNewStoreReady&&this.storeForAllData.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine.result.forEach(function(n){var r=Object(Fn.b)(e.storeForAllData.samples.result,e.storeForAllData.patients.result,e.storeForAllData.coverageInformation.result,e.storeForAllData.filteredSequencedSampleKeysByGene.result,e.storeForAllData.filteredSequencedPatientKeysByGene.result,e.storeForAllData.selectedMolecularProfiles.result,n,!1,e.props.store.genes.result);r&&t.push(r)}),this.accumulatedAlterationFrequencyDataForNonQueryGenes=this.accumulatedAlterationFrequencyDataForNonQueryGenes.concat(t),this.accumulatedAlterationFrequencyDataForNonQueryGenes}},{key:"isNewStoreReady",get:function(){return this.storeForAllData&&this.storeForAllData.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine.isComplete&&this.storeForAllData.samples.isComplete&&this.storeForAllData.patients.isComplete&&this.storeForAllData.coverageInformation.isComplete&&this.storeForAllData.filteredSequencedSampleKeysByGene.isComplete&&this.storeForAllData.filteredSequencedPatientKeysByGene.isComplete&&this.storeForAllData.selectedMolecularProfiles.isComplete}},{key:"storeForAllData",get:function(){return!this.urlWrapperForAllGenes||this.urlWrapperForAllGenes.hasSessionId&&this.urlWrapperForAllGenes.remoteSessionData.isPending?void 0:sa(this.props.appStore,this.urlWrapperForAllGenes)}},{key:"urlWrapperForAllGenes",get:function(){var e;if(this.validNonQueryGenes.isComplete&&this.validNonQueryGenes.result.length>0){var t=i.a.cloneDeep(this.props.urlWrapper.query);t.gene_list=this.validNonQueryGenes.result.join(" "),e={query:t}}return e}},{key:"validGenes",get:function(){var e=this;return this.validNonQueryGenes.isComplete&&this.validNonQueryGenes.result.forEach(function(t){e.accumulatedValidGenes[t]=!0}),this.accumulatedValidGenes}}])&&Hn(o.prototype,a),l&&Hn(o,l),t}();Kn([p.observable],Yn.prototype,"selectedPathway",void 0),Kn([p.observable],Yn.prototype,"newGenesFromPathway",void 0),Kn([p.observable],Yn.prototype,"warningMessage",void 0),Kn([p.observable],Yn.prototype,"addGenomicData",void 0),Kn([p.observable.ref],Yn.prototype,"PathwayMapperComponent",void 0),Kn([p.computed],Yn.prototype,"alterationFrequencyData",null),Kn([p.computed],Yn.prototype,"message",null),Kn([p.computed],Yn.prototype,"alterationFrequencyDataForQueryGenes",null),Kn([p.computed],Yn.prototype,"alterationFrequencyDataForNonQueryGenes",null),Kn([p.computed],Yn.prototype,"isNewStoreReady",null),Kn([p.computed],Yn.prototype,"storeForAllData",null),Kn([p.computed],Yn.prototype,"urlWrapperForAllGenes",null),Kn([p.computed],Yn.prototype,"validGenes",null),Kn([p.action.bound],Yn.prototype,"addGenomicDataHandler",null),Kn([p.action.bound],Yn.prototype,"handlePathwayChange",null),Kn([p.action.bound],Yn.prototype,"handleAddGenes",null),Kn([p.action.bound],Yn.prototype,"updateMessage",null),Kn([p.action.bound],Yn.prototype,"clearMessage",null),Kn([ot.default],Yn.prototype,"renderBanner",null),Kn([ot.default],Yn.prototype,"renderTable",null);var Xn=Yn=Kn([u.observer],Yn),Zn=n(867),Jn=n(1163),$n=n(50);function er(e,t,n,r,o,i,a,l,s){var c="sample"===l?"SAMPLE_DATA_":"PATIENT_DATA_";_t()(function(e,t,n,r,o,i,a,l,s){function c(e,t){return"".concat(e," (").concat(t,")")}var u=i.map(a),p={CLINICAL:{},CNA:{},MUTATIONS:{},MRNA:{},PROTEIN:{},STRUCTURAL_VARIANT:{}},d={amp:"Amplification",gain:"Gain",hetloss:"Shallow Deletion",homdel:"Deep Deletion"},f={};f=s?{inframe:"Inframe Mutation (putative passenger)",inframe_rec:"Inframe Mutation (putative driver)",missense:"Missense Mutation (putative passenger)",missense_rec:"Missense Mutation (putative driver)",promoter:"Promoter Mutation",promoter_rec:"Promoter Mutation",trunc:"Truncating mutation (putative passenger)",trunc_rec:"Truncating mutation (putative driver)"}:{inframe:"Inframe Mutation",inframe_rec:"Inframe Mutation",missense:"Missense Mutation",missense_rec:"Missense Mutation",promoter:"Promoter Mutation",promoter_rec:"Promoter Mutation",trunc:"Truncating mutation",trunc_rec:"Truncating mutation"};var h={high:"mRNA High",low:"mRNA Low"},m={low:"Protein Low",high:"Protein High"},y={true:"Structural Variant"},b=!0,g=!1,v=void 0;try{for(var _,w=e[Symbol.iterator]();!(b=(_=w.next()).done);b=!0){var O=_.value.data,S=O[0].trackLabel;void 0===p.CNA[S]&&(p.CNA[S]={}),void 0===p.MUTATIONS[S]&&(p.MUTATIONS[S]={}),void 0===p.MRNA[S]&&(p.MRNA[S]={}),void 0===p.PROTEIN[S]&&(p.PROTEIN[S]={}),void 0===p.STRUCTURAL_VARIANT[S]&&(p.STRUCTURAL_VARIANT[S]={});var E=!0,k=!1,C=void 0;try{for(var P,T=O[Symbol.iterator]();!(E=(P=T.next()).done);E=!0){var x=P.value,j="sample"===l?x.sample:x.patient;p.CNA[S][j]="",p.MUTATIONS[S][j]="",p.MRNA[S][j]="",p.PROTEIN[S][j]="",p.STRUCTURAL_VARIANT[S][j]="",void 0!==x.disp_cna&&(p.CNA[S][j]=d[x.disp_cna]?d[x.disp_cna]:x.disp_cna),void 0!==x.disp_structuralVariant&&(p.STRUCTURAL_VARIANT[S][j]=y[x.disp_structuralVariant+""]?y[x.disp_structuralVariant+""]:x.disp_structuralVariant),void 0!==x.disp_mrna&&(p.MRNA[S][j]=h[x.disp_mrna]?h[x.disp_mrna]:x.disp_mrna),void 0!==x.disp_prot&&(p.PROTEIN[S][j]=m[x.disp_prot]?m[x.disp_prot]:x.disp_prot),void 0!==x.disp_mut&&(p.MUTATIONS[S][j]=f[x.disp_mut]?f[x.disp_mut]:x.disp_mut)}}catch(e){k=!0,C=e}finally{try{E||null==T.return||T.return()}finally{if(k)throw C}}}}catch(e){g=!0,v=e}finally{try{b||null==w.return||w.return()}finally{if(g)throw v}}var A=!0,I=!1,M=void 0;try{for(var D,N=t[Symbol.iterator]();!(A=(D=N.next()).done);A=!0){var R=D.value,L=R.data,G=R.label;if("counts"===R.datatype){var V=!0,B=!1,F=void 0;try{for(var H,U=R.countsCategoryLabels[Symbol.iterator]();!(V=(H=U.next()).done);V=!0){var W=c(G,H.value);p.CLINICAL[W]=p.CLINICAL[W]||{}}}catch(e){B=!0,F=e}finally{try{V||null==U.return||U.return()}finally{if(B)throw F}}}else void 0===p.CLINICAL[G]&&(p.CLINICAL[G]={});var q=!0,z=!1,K=void 0;try{for(var Q,Y=L[Symbol.iterator]();!(q=(Q=Y.next()).done);q=!0){var X=Q.value,Z="sample"===l?X.sample:X.patient;if("counts"===R.datatype){var J=!0,$=!1,ee=void 0;try{for(var te,ne=R.countsCategoryLabels[Symbol.iterator]();!(J=(te=ne.next()).done);J=!0){var re=te.value;p.CLINICAL[c(G,re)][Z]=X.attr_val?X.attr_val[re]:""}}catch(e){$=!0,ee=e}finally{try{J||null==ne.return||ne.return()}finally{if($)throw ee}}}else p.CLINICAL[G][Z]="",p.CLINICAL[G][Z]=Object($n.a)(X.attr_val,"")}}catch(e){z=!0,K=e}finally{try{q||null==Y.return||Y.return()}finally{if(z)throw K}}}}catch(e){I=!0,M=e}finally{try{A||null==N.return||N.return()}finally{if(I)throw M}}var oe=n.concat(r).concat(o),ie=!0,ae=!1,le=void 0;try{for(var se,ce=oe[Symbol.iterator]();!(ie=(se=ce.next()).done);ie=!0){var ue=se.value,pe=ue.label,de="HEATMAP "+ue.molecularAlterationType+" "+ue.datatype,fe=ue.data,he=!0,me=!1,ye=void 0;try{for(var be,ge=fe[Symbol.iterator]();!(he=(be=ge.next()).done);he=!0){var ve=be.value;void 0===p[de]&&(p[de]={}),void 0===p[de][pe]&&(p[de][pe]={});var _e="sample"===l?ve.sample:ve.patient;p[de][pe][_e]=null===ve.profile_data?"":ve.profile_data}}catch(e){me=!0,ye=e}finally{try{he||null==ge.return||ge.return()}finally{if(me)throw ye}}}}catch(e){ae=!0,le=e}finally{try{ie||null==ce.return||ce.return()}finally{if(ae)throw le}}for(var we="track_name\ttrack_type",Oe=0;Oe<u.length;Oe++)we+="\t"+u[Oe];return we+="\n",Object.keys(p).forEach(function(e){Object.keys(p[e]).forEach(function(t){we+=t+"\t"+e;for(var n=0;n<u.length;n++)we+="\t"+p[e][t][u[n]];we+="\n"})}),we}(e,t,n,r,o,i,a,l,s),c+"oncoprint.tsv")}var tr=n(39),nr=n(250),rr=n(958),or=n(58),ir=n(64),ar=n(908),lr={missense:d.a.MUTATION_EXTENDED,inframe:d.a.MUTATION_EXTENDED,structuralVariant:d.a.STRUCTURAL_VARIANT,promoter:d.a.MUTATION_EXTENDED,trunc:d.a.MUTATION_EXTENDED,splice:d.a.MUTATION_EXTENDED,other:d.a.MUTATION_EXTENDED,amp:d.a.COPY_NUMBER_ALTERATION,homdel:d.a.COPY_NUMBER_ALTERATION,gain:d.a.COPY_NUMBER_ALTERATION,hetloss:d.a.COPY_NUMBER_ALTERATION,mrnaHigh:d.a.MRNA_EXPRESSION,mrnaLow:d.a.MRNA_EXPRESSION,protHigh:d.a.PROTEIN_LEVEL,protLow:d.a.PROTEIN_LEVEL};function sr(e,t,n){var r=function(e){var t=null;switch(e.molecularProfileAlterationType){case d.a.MUTATION_EXTENDED:t=Object(or.c)(e);break;case d.a.STRUCTURAL_VARIANT:t="structuralVariant";break;case d.a.COPY_NUMBER_ALTERATION:t=ir.a[e.value];break;case d.a.MRNA_EXPRESSION:"high"===e.alterationSubType?t="mrnaHigh":"low"===e.alterationSubType&&(t="mrnaLow");break;case d.a.PROTEIN_LEVEL:"high"===e.alterationSubType?t="protHigh":"low"===e.alterationSubType&&(t="protLow")}return t}(e);if(r){var o={};return o.sampleId=n,o.hugoGeneSymbol=e.hugoGeneSymbol,o.trackName=t,o.alteration=r,o.proteinChange=e.proteinChange,o.isGermline=!Object(b.v)(e),o.isCustomDriver=e.driverFilter===Bn.e,o}return{sampleId:n}}function cr(e){var t=[e.sampleId];if(Object(rr.l)(e)){switch(t.push(e.hugoGeneSymbol),lr[e.alteration]){case d.a.MUTATION_EXTENDED:t.push(e.proteinChange||"mutation"),t.push(e.alteration.toUpperCase()+(e.isGermline?"_GERMLINE":"")+(e.isCustomDriver?"_DRIVER":""));break;case d.a.COPY_NUMBER_ALTERATION:t.push(e.alteration.toUpperCase()),t.push("CNA");break;case d.a.MRNA_EXPRESSION:t.push("mrnaHigh"===e.alteration?"HIGH":"LOW"),t.push("EXP");break;case d.a.PROTEIN_LEVEL:t.push("protHigh"===e.alteration?"HIGH":"LOW"),t.push("PROT");break;case d.a.STRUCTURAL_VARIANT:t.push("STRUCTURAL VARIANT")}e.trackName&&t.push(e.trackName)}return t.map(ur).join("  ")}function ur(e){return e.replace(/\s+/g,"_")}function pr(e){return e.replace(/[()]/g,"").replace(/\s+/g,"_")}function dr(e,t,n){var r=i.a.mapValues(i.a.keyBy(e,function(e){return e.key}),function(e){return i.a.keyBy(e.data,function(e){return e[n]})}),o=[];o.push(["Sample"].concat(e.map(function(e){return"".concat(pr("".concat(e.label,"_").concat(e.molecularProfileName)),"(").concat(function(e,t){if(/zscores/i.test(e))return ar.b.HEATMAP_ZSCORE;switch(t){case d.a.METHYLATION:return ar.b.HEATMAP_01;default:return ar.b.HEATMAP}}(e.molecularProfileId,e.molecularAlterationType),")")})));var a=!0,l=!1,s=void 0;try{for(var c,u=function(){var t=c.value;o.push([t].concat(e.map(function(e){var n=r[e.key][t];return!n||n.na||null===n.profile_data||isNaN(n.profile_data)?ar.c:n.profile_data})))},p=t[Symbol.iterator]();!(a=(c=p.next()).done);a=!0)u()}catch(e){l=!0,s=e}finally{try{a||null==p.return||p.return()}finally{if(l)throw s}}return o.map(function(e){return e.join("  ")}).join("\n")}n(1048);function fr(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function hr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mr(e){return(mr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function br(e,t){return(br=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gr(e){return(gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var vr,_r=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":gr(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},wr=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function l(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,l)}s((r=r.apply(e,t||[])).next())})};!function(e){e.CASE_ID="case_id",e.CASE_LIST="case_list",e.NONE=""}(vr||(vr={}));var Or=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==gr(t)&&"function"!=typeof t?yr(e):t}(this,mr(t).call(this,e)),Object.defineProperty(yr(n),"distinguishGermlineMutations",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(yr(n),"distinguishMutationType",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(yr(n),"showUnalteredColumns",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(yr(n),"showWhitespaceBetweenColumns",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(yr(n),"showClinicalTrackLegends",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(yr(n),"_onlyShowClinicalLegendForAlteredCases",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(yr(n),"showOqlInLabels",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(yr(n),"showMinimap",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(yr(n),"selectedHeatmapProfileId",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(yr(n),"heatmapGeneInputValue",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(yr(n),"selectedGenericAssayProfileId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(yr(n),"horzZoom",{enumerable:!0,configurable:!0,writable:!0,value:.5}),Object.defineProperty(yr(n),"mouseInsideBounds",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(yr(n),"renderingComplete",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(yr(n),"heatmapGeneInputValueUpdater",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(yr(n),"molecularProfileIdToHeatmapTrackGroupIndex",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(yr(n),"expansionsByGeneticTrackKey",{enumerable:!0,configurable:!0,writable:!0,value:p.observable.map()}),Object.defineProperty(yr(n),"expansionsByGenesetHeatmapTrackKey",{enumerable:!0,configurable:!0,writable:!0,value:p.observable.map()}),Object.defineProperty(yr(n),"controlsHandlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(yr(n),"controlsState",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(yr(n),"oncoprint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(yr(n),"urlParamsReaction",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(yr(n),"unalteredKeys",{enumerable:!0,configurable:!0,writable:!0,value:Object(z.vb)({await:function(){return[n.geneticTracks]},invoke:function(){return wr(yr(n),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(Fn.h)(this.geneticTracks.result));case 1:case"end":return e.stop()}},e,this)}))}})}),Object.defineProperty(yr(n),"alteredKeys",{enumerable:!0,configurable:!0,writable:!0,value:Object(z.vb)({await:function(){return[n.geneticTracks]},invoke:function(){return wr(yr(n),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(Fn.c)(this.geneticTracks.result));case 1:case"end":return e.stop()}},e,this)}))},default:[]})}),Object.defineProperty(yr(n),"sampleGeneticTracks",{enumerable:!0,configurable:!0,writable:!0,value:Object(Fn.m)(yr(n),!0)}),Object.defineProperty(yr(n),"patientGeneticTracks",{enumerable:!0,configurable:!0,writable:!0,value:Object(Fn.m)(yr(n),!1)}),Object.defineProperty(yr(n),"sampleClinicalTracks",{enumerable:!0,configurable:!0,writable:!0,value:Object(Fn.i)(yr(n),!0)}),Object.defineProperty(yr(n),"patientClinicalTracks",{enumerable:!0,configurable:!0,writable:!0,value:Object(Fn.i)(yr(n),!1)}),Object.defineProperty(yr(n),"sampleHeatmapTracks",{enumerable:!0,configurable:!0,writable:!0,value:Object(Fn.n)(yr(n),!0)}),Object.defineProperty(yr(n),"patientHeatmapTracks",{enumerable:!0,configurable:!0,writable:!0,value:Object(Fn.n)(yr(n),!1)}),Object.defineProperty(yr(n),"samplegGenericAssayHeatmapTracks",{enumerable:!0,configurable:!0,writable:!0,value:Object(Fn.j)(yr(n),!0)}),Object.defineProperty(yr(n),"patientGenericAssayHeatmapTracks",{enumerable:!0,configurable:!0,writable:!0,value:Object(Fn.j)(yr(n),!1)}),Object.defineProperty(yr(n),"sampleGenesetHeatmapTracks",{enumerable:!0,configurable:!0,writable:!0,value:Object(Fn.l)(yr(n),!0,Object(Fn.k)(yr(n),!0))}),Object.defineProperty(yr(n),"patientGenesetHeatmapTracks",{enumerable:!0,configurable:!0,writable:!0,value:Object(Fn.l)(yr(n),!1,Object(Fn.k)(yr(n),!1))}),Object.defineProperty(yr(n),"heatmapTrackHeaders",{enumerable:!0,configurable:!0,writable:!0,value:Object(z.vb)({await:function(){return[n.props.store.molecularProfileIdToMolecularProfile]},invoke:function(){return Promise.resolve(Object(nr.f)(n.props.store.molecularProfileIdToMolecularProfile.result,n.molecularProfileIdToHeatmapTracks,n.genesetHeatmapTrackGroupIndex,function(){return n.clusteredHeatmapTrackGroupIndex},n.clusterHeatmapByIndex,function(){return n.sortByData()},n.removeHeatmapByIndex))},default:{}})}),Object.defineProperty(yr(n),"alterationTypesInQuery",{enumerable:!0,configurable:!0,writable:!0,value:Object(z.vb)({await:function(){return[n.props.store.selectedMolecularProfiles]},invoke:function(){return Promise.resolve(i.a.uniq(n.props.store.selectedMolecularProfiles.result.map(function(e){return e.molecularAlterationType})))}})}),Object.defineProperty(yr(n),"loadingGeneticDataDuringCurrentLoad",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(yr(n),"loadingClinicalDataDuringCurrentLoad",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object(p.makeObservable)(yr(n)),n.showOqlInLabels=e.store.queryContainsOql,window.resultsViewOncoprint=yr(n);var r=yr(n);return n.onChangeSelectedClinicalTracks=n.onChangeSelectedClinicalTracks.bind(yr(n)),n.onDeleteClinicalTrack=n.onDeleteClinicalTrack.bind(yr(n)),n.onMinimapClose=n.onMinimapClose.bind(yr(n)),n.oncoprintRef=n.oncoprintRef.bind(yr(n)),n.toggleColumnMode=n.toggleColumnMode.bind(yr(n)),n.onTrackSortDirectionChange=n.onTrackSortDirectionChange.bind(yr(n)),n.onSuppressRendering=n.onSuppressRendering.bind(yr(n)),n.onReleaseRendering=n.onReleaseRendering.bind(yr(n)),Object(cn.a)(n.props.store.heatmapMolecularProfiles,function(e){e.length&&(n.selectedHeatmapProfileId=e[0].molecularProfileId)}),n.heatmapGeneInputValueUpdater=Object(cn.a)(n.props.store.genes,function(e){n.heatmapGeneInputValue=e.map(function(e){return e.hugoGeneSymbol}).join(" ")},Number.POSITIVE_INFINITY),n.onMouseEnter=n.onMouseEnter.bind(yr(n)),n.onMouseLeave=n.onMouseLeave.bind(yr(n)),n.controlsHandlers=n.buildControlsHandlers(),n.controlsState=Object(p.observable)({get selectedClinicalAttributeIds(){return Array.from(r.selectedClinicalAttributeIds.keys())},get selectedColumnType(){return r.oncoprintAnalysisCaseType},get showUnalteredColumns(){return r.showUnalteredColumns},get showWhitespaceBetweenColumns(){return r.showWhitespaceBetweenColumns},get showClinicalTrackLegends(){return r.showClinicalTrackLegends},get onlyShowClinicalLegendForAlteredCases(){return r.onlyShowClinicalLegendForAlteredCases},get showOqlInLabels(){return r.showOqlInLabels},get showMinimap(){return r.showMinimap},get hideHeatmapMenu(){return r.props.store.studies.result.length>1},get sortByMutationType(){return r.sortByMutationType},get sortByCaseListDisabled(){return!r.caseListSortPossible},get distinguishMutationType(){return r.distinguishMutationType},get distinguishDrivers(){return r.distinguishDrivers},get distinguishGermlineMutations(){return r.distinguishGermlineMutations},get annotateDriversOncoKb(){return r.props.store.driverAnnotationSettings.oncoKb},get annotateDriversOncoKbDisabled(){return!nt.b.serverConfig.show_oncokb},get annotateDriversOncoKbError(){return r.props.store.didOncoKbFailInOncoprint},get annotateDriversHotspots(){return r.props.store.driverAnnotationSettings.hotspots},get annotateDriversHotspotsDisabled(){return!nt.b.serverConfig.show_hotspot},get annotateDriversHotspotsError(){return r.props.store.didHotspotFailInOncoprint},get annotateDriversCBioPortal(){return r.props.store.driverAnnotationSettings.cbioportalCount},get annotateDriversCOSMIC(){return r.props.store.driverAnnotationSettings.cosmicCount},get hidePutativePassengers(){return!r.props.store.driverAnnotationSettings.includeVUS},get hideGermlineMutations(){return!r.props.store.includeGermlineMutations},get annotateCBioPortalInputValue(){return r.props.store.driverAnnotationSettings.cbioportalCountThreshold+""},get annotateCOSMICInputValue(){return r.props.store.driverAnnotationSettings.cosmicCountThreshold+""},get sortMode(){return r.sortMode},get sortByDrivers(){return r.sortByDrivers},get heatmapProfilesPromise(){return r.props.store.heatmapMolecularProfiles},get genericAssayEntitiesGroupedByGenericAssayTypePromise(){return r.props.store.genericAssayEntitiesGroupedByGenericAssayType},get selectedHeatmapProfileId(){return r.selectedHeatmapProfileId},get heatmapIsDynamicallyQueried(){return r.heatmapIsDynamicallyQueried},get ngchmButtonActive(){return!(!nt.b.serverConfig.show_mdacc_heatmap||!r.props.store.remoteNgchmUrl.result||""==r.props.store.remoteNgchmUrl.result)},get heatmapGeneInputValue(){return r.heatmapGeneInputValue},get customDriverAnnotationBinaryMenuLabel(){var e=nt.b.serverConfig.oncoprint_custom_driver_annotation_binary_menu_label,t=r.props.store.customDriverAnnotationReport.result;return e&&t&&t.hasBinary?e:void 0},get customDriverAnnotationTiersMenuLabel(){var e=nt.b.serverConfig.oncoprint_custom_driver_annotation_tiers_menu_label,t=r.props.store.customDriverAnnotationReport.result;return e&&t&&t.tiers.length?e:void 0},get customDriverAnnotationTiers(){var e=r.props.store.customDriverAnnotationReport.result;return e&&e.tiers.length?e.tiers:void 0},get annotateCustomDriverBinary(){return r.props.store.driverAnnotationSettings.customBinary},get selectedCustomDriverAnnotationTiers(){return r.props.store.driverAnnotationSettings.driverTiers},get columnMode(){return r.oncoprintAnalysisCaseType},get horzZoom(){return isNaN(r.horzZoom)?1:r.horzZoom}}),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&br(e,t)}(t,r["Component"]),n=t,(o=[{key:"onMouseEnter",value:function(){this.mouseInsideBounds=!0}},{key:"onMouseLeave",value:function(){this.mouseInsideBounds=!1}},{key:"setAnnotateCBioPortalInputValue",value:function(e){this.controlsHandlers.onChangeAnnotateCBioPortalInputValue&&this.controlsHandlers.onChangeAnnotateCBioPortalInputValue(e)}},{key:"setAnnotateCOSMICInputValue",value:function(e){this.controlsHandlers.onChangeAnnotateCOSMICInputValue&&this.controlsHandlers.onChangeAnnotateCOSMICInputValue(e)}},{key:"buildControlsHandlers",value:function(){var e=this;return{onSelectColumnType:function(t){e.props.store.setOncoprintAnalysisCaseType(t)},onSelectShowUnalteredColumns:function(t){e.showUnalteredColumns=t},onSelectShowWhitespaceBetweenColumns:function(t){e.showWhitespaceBetweenColumns=t},onSelectShowClinicalTrackLegends:function(t){e.showClinicalTrackLegends=t},onSelectOnlyShowClinicalLegendForAlteredCases:function(t){e._onlyShowClinicalLegendForAlteredCases=t},onSelectShowOqlInLabels:function(t){e.showOqlInLabels=t},onSelectShowMinimap:function(t){e.showMinimap=t},onSelectDistinguishMutationType:function(t){e.distinguishMutationType=t},onSelectDistinguishDrivers:Object(p.action)(function(t){t?(e.controlsState.annotateDriversOncoKbDisabled||e.controlsState.annotateDriversOncoKbError||(e.props.store.driverAnnotationSettings.oncoKb=!0),e.controlsState.annotateDriversHotspotsDisabled||e.controlsState.annotateDriversHotspotsError||(e.props.store.driverAnnotationSettings.hotspots=!0),e.props.store.driverAnnotationSettings.cbioportalCount=!0,e.props.store.driverAnnotationSettings.cosmicCount=!0,e.props.store.driverAnnotationSettings.customBinary=!0,e.props.store.driverAnnotationSettings.driverTiers.forEach(function(t,n){e.props.store.driverAnnotationSettings.driverTiers.set(n,!0)})):(e.props.store.driverAnnotationSettings.oncoKb=!1,e.props.store.driverAnnotationSettings.hotspots=!1,e.props.store.driverAnnotationSettings.cbioportalCount=!1,e.props.store.driverAnnotationSettings.cosmicCount=!1,e.props.store.driverAnnotationSettings.customBinary=!1,e.props.store.driverAnnotationSettings.driverTiers.forEach(function(t,n){e.props.store.driverAnnotationSettings.driverTiers.set(n,!1)}),e.props.store.driverAnnotationSettings.includeVUS=!0)}),onSelectDistinguishGermlineMutations:function(t){e.distinguishGermlineMutations=t},onSelectAnnotateOncoKb:Object(p.action)(function(t){e.props.store.driverAnnotationSettings.oncoKb=t}),onSelectAnnotateHotspots:Object(p.action)(function(t){e.props.store.driverAnnotationSettings.hotspots=t}),onSelectAnnotateCBioPortal:Object(p.action)(function(t){e.props.store.driverAnnotationSettings.cbioportalCount=t}),onSelectAnnotateCOSMIC:Object(p.action)(function(t){e.props.store.driverAnnotationSettings.cosmicCount=t}),onChangeAnnotateCBioPortalInputValue:Object(p.action)(function(t){e.props.store.driverAnnotationSettings.cbioportalCountThreshold=parseInt(t,10),e.controlsHandlers.onSelectAnnotateCBioPortal&&e.controlsHandlers.onSelectAnnotateCBioPortal(!0)}),onChangeAnnotateCOSMICInputValue:Object(p.action)(function(t){e.props.store.driverAnnotationSettings.cosmicCountThreshold=parseInt(t,10),e.controlsHandlers.onSelectAnnotateCOSMIC&&e.controlsHandlers.onSelectAnnotateCOSMIC(!0)}),onSelectCustomDriverAnnotationBinary:Object(p.action)(function(t){e.props.store.driverAnnotationSettings.customBinary=t}),onSelectCustomDriverAnnotationTier:Object(p.action)(function(t,n){e.props.store.driverAnnotationSettings.driverTiers.set(t,n)}),onSelectHideVUS:function(t){e.props.store.driverAnnotationSettings.includeVUS=!t},onSelectHideGermlineMutations:function(t){e.props.store.setExcludeGermlineMutations(t)},onSelectSortByMutationType:function(t){e.urlWrapper.updateURL({oncoprint_sort_by_mutation_type:t.toString()})},onClickSortAlphabetical:function(){e.urlWrapper.updateURL({oncoprint_sortby:"case_id",oncoprint_cluster_profile:""})},onClickSortCaseListOrder:function(){e.urlWrapper.updateURL({oncoprint_sortby:"case_list",oncoprint_cluster_profile:""})},onSelectSortByDrivers:function(t){e.urlWrapper.updateURL({oncoprint_sort_by_drivers:t.toString()})},onClickSortByData:function(){e.urlWrapper.updateURL({oncoprint_sortby:"",oncoprint_cluster_profile:""})},onChangeSelectedClinicalTracks:this.onChangeSelectedClinicalTracks,onChangeHeatmapGeneInputValue:Object(p.action)(function(t){e.heatmapGeneInputValue=t,e.heatmapGeneInputValueUpdater()}),onSelectHeatmapProfile:function(t){e.selectedHeatmapProfileId=t},onClickAddGenesToHeatmap:function(){var t=Object(Ut.g)(e.heatmapGeneInputValue.toUpperCase().trim()).map(function(e){return e.gene});e.addHeatmapTracks(e.selectedHeatmapProfileId,t)},onSelectGenericAssayProfile:function(t){e.selectedGenericAssayProfileId=t},onClickAddGenericAssays:function(t){e.addHeatmapTracks(e.selectedGenericAssayProfileId,t.map(function(e){return e.genericAssayEntityId}))},onClickNGCHM:function(){window.open(e.props.store.remoteNgchmUrl.result,"_blank")},onClickDownload:function(t){switch(t){case"pdf":Object(z.Cb)("oncoprint.pdf",e.oncoprint.toSVG(!1));break;case"png":e.oncoprint.toCanvas(function(e,t){e.toBlob(function(n){t&&alert("Oncoprint too large - PNG truncated to ".concat(e.getAttribute("width"),"x").concat(e.getAttribute("height"))),_t()(n,"oncoprint.png")})},2);break;case"svg":_t()((new XMLSerializer).serializeToString(e.oncoprint.toSVG(!1)),"oncoprint.svg");break;case"order":var n=Object(z.bb)(e.oncoprintAnalysisCaseType);Object(cn.a)([e.props.store.sampleKeyToSample,e.props.store.patientKeyToPatient],function(t,r){var o="".concat(n," order in the Oncoprint is:\n"),i=(e.oncoprintAnalysisCaseType,wt.c.SAMPLE,e.oncoprint.getIdOrder().map(e.oncoprintAnalysisCaseType===wt.c.SAMPLE?function(e){return t[e].sampleId}:function(e){return r[e].patientId})),a=!0,l=!1,s=void 0;try{for(var c,u=i[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var p=c.value;o+="".concat(p,"\n")}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}_t()(o,"OncoPrint".concat(n,"s.txt"))});break;case"tabular":Object(cn.a)([e.props.store.sampleKeyToSample,e.props.store.patientKeyToPatient],function(t,n){er(e.geneticTracks.result,e.clinicalTracks.result,e.heatmapTracks.result,e.genericAssayHeatmapTracks.result,e.genesetHeatmapTracks.result,e.oncoprint.getIdOrder(),e.oncoprintAnalysisCaseType===wt.c.SAMPLE?function(e){return t[e].sampleId}:function(e){return n[e].patientId},e.oncoprintAnalysisCaseType,e.distinguishDrivers)});break;case"oncoprinter":Object(cn.a)([e.props.store.samples,e.props.store.patients,e.geneticTracks,e.clinicalTracks,e.heatmapTracks,e.genesetHeatmapTracks,e.props.store.clinicalAttributeIdToClinicalAttribute],function(t,n,r,o,a,l,s){var c=e.oncoprintAnalysisCaseType===wt.c.SAMPLE?t.map(function(e){return e.sampleId}):n.map(function(e){return e.patientId}),u="";r.length>0&&(u=function(e,t,n){var r={};return i.a.flatMapDeep(e,function(e){var t=function(e,t){var n=e;for(t[n]=t[n]||0,t[n]+=1;t[n]>1;)t[n="".concat(n,"_").concat(t[n])]=t[n]||0,t[n]+=1;return n}(e.label,r);return e.data.map(function(e){return e.data.map(function(r){return sr(r,t,e[n])})})}).map(cr).concat(t).join("\n")}(r,c,e.oncoprintAnalysisCaseType));var p="";o.length>0&&(p=function(e,t,n,r,o){var a=i.a.groupBy(e,function(e){return e[o]}),l=[];l.push(["Sample"].concat(n.map(function(e){var t=r[e],n=pr(t.displayName),o=t.datatype.toLowerCase();return"MUTATION_COUNT"===t.clinicalAttributeId&&(o=ar.a.LOG_NUMBER),t.clinicalAttributeId===tr.c.MutationSpectrum&&(o=tr.a.join("/")),"".concat(n,"(").concat(o,")")})));var s=!0,c=!1,u=void 0;try{for(var p,d=function(){var e=p.value;l.push([e].concat(n.map(function(t){var n=a[e]&&a[e].find(function(e){return e.attr_id===t});return n&&!n.na&&n.attr_val?t===tr.c.MutationSpectrum?tr.a.map(function(e){return n.attr_val[e]}).join("/"):ur(n.attr_val.toString()):ar.c})))},f=t[Symbol.iterator]();!(s=(p=f.next()).done);s=!0)d()}catch(e){c=!0,u=e}finally{try{s||null==f.return||f.return()}finally{if(c)throw u}}return l.map(function(e){return e.join("  ")}).join("\n")}(i.a.flatMap(o,function(e){return e.data}),c,o.map(function(e){return e.attributeId}),s,e.oncoprintAnalysisCaseType));var d="";a.length>0&&(d=dr(a,c,e.oncoprintAnalysisCaseType)),l.length>0&&alert("Oncoprinter does not support geneset heatmaps - all other tracks will still be exported."),window.open(Object(at.b)("/oncoprinter")).clientPostedData={genetic:u,clinical:p,heatmap:d}})}},onSetHorzZoom:function(t){e.oncoprint.setHorzZoomCentered(t)},onClickZoomIn:function(){e.oncoprint.setHorzZoomCentered(e.oncoprint.getHorzZoom()/.7)},onClickZoomOut:function(){e.oncoprint.setHorzZoomCentered(.7*e.oncoprint.getHorzZoom())}}}},{key:"sortByData",value:function(){this.urlWrapper.updateURL({oncoprint_sortby:"",oncoprint_cluster_profile:""})}},{key:"addHeatmapTracks",value:function(e,t){var n=i.a.cloneDeep(this.molecularProfileIdToHeatmapTracks),r=i.a.chain(t).keyBy(function(e){return e}).mapValues(function(){return!0}).value();delete n[e];var o=this.props.store.molecularProfileIdToMolecularProfile.result[e].molecularAlterationType;t&&t.length?n[e]={entities:r,molecularAlterationType:o,molecularProfileId:e}:delete n[e];var a=i.a.map(n,function(e,t){return"".concat(t,",").concat(i.a.keys(e.entities).join(","))}).join(";"),l=i.a.filter(n,function(e){return e.molecularAlterationType===d.a.GENERIC_ASSAY}).map(function(e){return"".concat(e.molecularProfileId,",").concat(i.a.keys(e.entities).join(","))}).join(";");this.urlWrapper.updateURL({heatmap_track_groups:a,generic_assay_groups:l})}},{key:"toggleColumnMode",value:function(){switch(this.oncoprintAnalysisCaseType){case wt.c.SAMPLE:this.controlsHandlers.onSelectColumnType&&this.controlsHandlers.onSelectColumnType(wt.c.PATIENT);break;case wt.c.PATIENT:this.controlsHandlers.onSelectColumnType&&this.controlsHandlers.onSelectColumnType(wt.c.SAMPLE)}}},{key:"oncoprintRef",value:function(e){var t=this;this.oncoprint=e,this.props.addOnBecomeVisibleListener&&this.props.addOnBecomeVisibleListener(function(){return t.oncoprint.triggerPendingResizeAndOrganize(t.onReleaseRendering)}),this.oncoprint.onHorzZoom(function(e){return t.horzZoom=e}),this.horzZoom=this.oncoprint.getHorzZoom(),Object(cn.a)(this.alteredKeys,function(e){t.oncoprint.setHorzZoomToFit(e)})}},{key:"setColumnMode",value:function(e){this.urlWrapper.updateURL({show_samples:e===wt.c.SAMPLE?"true":"false"})}},{key:"onMinimapClose",value:function(){this.showMinimap=!1}},{key:"onSuppressRendering",value:function(){this.renderingComplete=!1}},{key:"onReleaseRendering",value:function(){this.renderingComplete=!0}},{key:"clinicalTrackKeyToAttributeId",value:function(e){return e.substr("CLINICALTRACK_".length)}},{key:"clinicalAttributeIdToTrackKey",value:function(e){return"".concat("CLINICALTRACK_").concat(e)}},{key:"onChangeSelectedClinicalTracks",value:function(e){this.urlWrapper.updateURL({clinicallist:e.join(",")})}},{key:"onDeleteClinicalTrack",value:function(e){var t=this;if(!this.isHidden){var n=fr(this.selectedClinicalAttributeIds.keys()),r=i.a.filter(n,function(n){return n!==t.clinicalTrackKeyToAttributeId(e)});this.urlWrapper.updateURL({clinicallist:r.join(",")})}}},{key:"onTrackSortDirectionChange",value:function(e,t){1!==t&&-1!==t||this.sortByData()}},{key:"clearSortDirectionsAndSortByData",value:function(){this.oncoprint&&(this.oncoprint.resetSortableTracksSortDirection(),this.sortByData())}},{key:"clusterHeatmapByIndex",value:function(e){var t;if(this.oncoprint&&this.oncoprint.resetSortableTracksSortDirection(),e===this.genesetHeatmapTrackGroupIndex)t=this.props.store.genesetMolecularProfile.result&&this.props.store.genesetMolecularProfile.result.value&&this.props.store.genesetMolecularProfile.result.value.molecularProfileId;else{var n=i.a.values(this.molecularProfileIdToHeatmapTracks).find(function(t){return t.trackGroupIndex===e});t=n?n.molecularProfileId:void 0}t&&this.urlWrapper.updateURL({oncoprint_sortby:"cluster",oncoprint_cluster_profile:t})}},{key:"removeHeatmapByIndex",value:function(e){var t=i.a.values(this.molecularProfileIdToHeatmapTracks).find(function(t){return t.trackGroupIndex===e});t&&this.removeHeatmapByMolecularProfileId(t.molecularProfileId)}},{key:"removeHeatmapByMolecularProfileId",value:function(e){delete this.molecularProfileIdToHeatmapTrackGroupIndex[e],this.addHeatmapTracks(e,[])}},{key:"getControls",value:function(){return this.oncoprint&&!this.oncoprint.webgl_unavailable&&this.props.store.molecularProfileIdToMolecularProfile.result?r.createElement(z.o,{showByDefault:!0,show:!0},r.createElement(Jn.a,{handlers:this.controlsHandlers,state:this.controlsState,store:this.props.store,molecularProfileIdToMolecularProfile:this.props.store.molecularProfileIdToMolecularProfile.result,selectedGenericAssayEntitiesGroupedByGenericAssayTypeFromUrl:this.selectedGenericAssayEntitiesGroupedByGenericAssayTypeFromUrl})):r.createElement("span",null)}},{key:"getProgressItems",value:function(e){0===e&&(this.loadingGeneticDataDuringCurrentLoad=!1,this.loadingClinicalDataDuringCurrentLoad=!1);var t=i.a.some(fr(this.selectedClinicalAttributeIds.keys()),function(e){return!Object(tr.e)({clinicalAttributeId:e})});this.geneticTracks.isPending&&(this.loadingGeneticDataDuringCurrentLoad=!0),t&&this.clinicalTracks.isPending&&(this.loadingClinicalDataDuringCurrentLoad=!0);var n,r=[];if(this.props.store.genes.isComplete&&this.props.store.filteredSamples.isComplete){var o=this.props.store.genes.result.length,a=this.props.store.filteredSamples.result.length;n="Querying ".concat(o," genes in ").concat(a," samples")}else n="Querying ... genes in ... samples";var l="";e>2&&(l=" - this can take several seconds"),r.push({label:"".concat(n).concat(l),promises:[],hideIcon:!0,style:{fontWeight:"bold"}});var s=[];this.loadingGeneticDataDuringCurrentLoad&&s.push("genetic"),this.loadingClinicalDataDuringCurrentLoad&&s.push("clinical"),r.push({label:"Loading ".concat(s.join(" and ")," data"),promises:[this.props.store.molecularData,this.props.store.mutations].concat(fr(t?[this.clinicalTracks]:[]))});var c=this.props.store.driverAnnotationSettings.oncoKb,u=this.props.store.driverAnnotationSettings.hotspots;return r.push({label:Object(nr.c)(c,u),promises:[this.props.store.filteredAndAnnotatedMolecularData,this.props.store.filteredAndAnnotatedMutations,this.props.store.filteredAndAnnotatedStructuralVariants]}),r.push({label:"Rendering"}),r}},{key:"render",value:function(){return r.createElement("div",{style:{position:"relative"}},r.createElement(st.a,{isLoading:this.isHidden,size:"big",centerRelativeToContainer:!1,center:!0,className:"oncoprintLoadingIndicator",noFade:!0},r.createElement("div",null,r.createElement(xn.a,{getItems:this.getProgressItems,show:this.isHidden,sequential:!0}))),r.createElement("div",{className:"tabMessageContainer"},r.createElement(rt.a,{className:"oncoprint-oql-status-banner",store:this.props.store,tabReflectsOql:!0}),r.createElement(it.a,{store:this.props.store}),r.createElement(lt.a,{store:this.props.store,isPatientMode:this.oncoprintAnalysisCaseType===wt.c.PATIENT})),r.createElement("div",{className:v()("oncoprintContainer",{fadeIn:!this.isHidden}),onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},r.createElement(u.Observer,null,this.getControls),r.createElement("div",{style:{position:"relative",marginTop:15}},r.createElement("div",null,r.createElement(Zn.c,{oncoprintRef:this.oncoprintRef,clinicalTracks:this.clinicalTracks.result,geneticTracks:this.geneticTracks.result,genesetHeatmapTracks:this.genesetHeatmapTracks.result,heatmapTracks:[].concat(this.genericAssayHeatmapTracks.result).concat(this.heatmapTracks.result),divId:this.props.divId,width:this.width,caseLinkOutInTooltips:!0,suppressRendering:this.isLoading,keepSorted:!this.isLoading,onSuppressRendering:this.onSuppressRendering,onReleaseRendering:this.onReleaseRendering,hiddenIds:this.showUnalteredColumns?void 0:this.unalteredKeys.result,molecularProfileIdToMolecularProfile:this.props.store.molecularProfileIdToMolecularProfile.result,alterationTypesInQuery:this.alterationTypesInQuery.result,showSublabels:this.showOqlInLabels,heatmapTrackHeaders:this.heatmapTrackHeaders.result,horzZoomToFitIds:this.alteredKeys.result,distinguishMutationType:this.distinguishMutationType,distinguishDrivers:this.distinguishDrivers,distinguishGermlineMutations:this.distinguishGermlineMutations,sortConfig:this.oncoprintLibrarySortConfig,showClinicalTrackLegends:this.showClinicalTrackLegends,showWhitespaceBetweenColumns:this.showWhitespaceBetweenColumns,showMinimap:this.showMinimap,onMinimapClose:this.onMinimapClose,onDeleteClinicalTrack:this.onDeleteClinicalTrack,onTrackSortDirectionChange:this.onTrackSortDirectionChange,initParams:{max_height:Number.POSITIVE_INFINITY}})))))}},{key:"columnMode",get:function(){return"true"===this.urlWrapper.query.show_samples?"sample":"patient"}},{key:"sortMode",get:function(){var e;switch(this.urlWrapper.query.oncoprint_sortby){case"case_id":e={type:"alphabetical"};break;case"case_list":e={type:"caseList"};break;case"cluster":e={type:"heatmap",clusteredHeatmapProfile:this.urlWrapper.query.oncoprint_cluster_profile};break;case"":default:e={type:"data"}}return e}},{key:"sortByMutationType",get:function(){return!this.urlWrapper.query.oncoprint_sort_by_mutation_type||"true"===this.urlWrapper.query.oncoprint_sort_by_mutation_type}},{key:"sortByDrivers",get:function(){return!this.urlWrapper.query.oncoprint_sort_by_drivers||"true"===this.urlWrapper.query.oncoprint_sort_by_drivers}},{key:"selectedGenericAssayEntitiesGroupedByGenericAssayTypeFromUrl",get:function(){var e=this;return i.a.reduce(this.props.store.selectedGenericAssayEntitiesGroupByMolecularProfileId,function(t,n,r){if(e.props.store.molecularProfileIdToMolecularProfile.result[r]){var o=e.props.store.molecularProfileIdToMolecularProfile.result[r].genericAssayType;t[o]=t[o]?i.a.union(n,t[o]):n}return t},{})}},{key:"onlyShowClinicalLegendForAlteredCases",get:function(){return this.showClinicalTrackLegends&&this._onlyShowClinicalLegendForAlteredCases}},{key:"selectedClinicalAttributeIds",get:function(){var e=this.urlWrapper.query.clinicallist?this.urlWrapper.query.clinicallist.split(","):[];return void 0===this.urlWrapper.query.clinicallist&&(this.props.store.studyIds.result&&this.props.store.studyIds.result.length>1&&e.push(tr.c.StudyOfOrigin),this.props.store.filteredSamples.result&&this.props.store.filteredPatients.result&&this.props.store.filteredSamples.result.length>this.props.store.filteredPatients.result.length&&e.push(tr.c.NumSamplesPerPatient),i.a.forEach(this.props.store.clinicalAttributes_profiledIn.result,function(t){e.push(t.clinicalAttributeId)})),e.reduce(function(e,t){return e.set(t,!0),e},p.observable.map({},{deep:!1}))}},{key:"molecularProfileIdToHeatmapTracks",get:function(){var e,t=this,n=(this.urlWrapper.query.heatmap_track_groups?this.urlWrapper.query.heatmap_track_groups.split(";").map(function(e){return e.split(",")}):[]).reduce(function(e,t){return e[t[0]]=t.slice(1),e},{}),r={};return e=i.a.isEmpty(this.molecularProfileIdToHeatmapTrackGroupIndex)?2:Math.max.apply(Math,fr(i.a.values(this.molecularProfileIdToHeatmapTrackGroupIndex)))+1,i.a.forEach(n,function(n,o){var i=t.props.store.molecularProfileIdToMolecularProfile.result[o];if(i&&n&&n.length){i.molecularProfileId in t.molecularProfileIdToHeatmapTrackGroupIndex||(t.molecularProfileIdToHeatmapTrackGroupIndex[i.molecularProfileId]=e,e+=1);var a={trackGroupIndex:t.molecularProfileIdToHeatmapTrackGroupIndex[i.molecularProfileId],molecularProfileId:i.molecularProfileId,molecularAlterationType:i.molecularAlterationType,entities:{}};n.forEach(function(e){return a.entities[e]=!0}),r[o]=a}}),r}},{key:"urlWrapper",get:function(){return this.props.urlWrapper}},{key:"caseListSortPossible",get:function(){return!(!this.props.store.givenSampleOrder.isComplete||!this.props.store.givenSampleOrder.result.length)}},{key:"distinguishDrivers",get:function(){return this.props.store.driverAnnotationSettings.driversAnnotated}},{key:"heatmapIsDynamicallyQueried",get:function(){var e=this.props.store.molecularProfileIdToMolecularProfile.result;return e.hasOwnProperty(this.selectedHeatmapProfileId)&&e[this.selectedHeatmapProfileId].molecularAlterationType!==d.a.GENESET_SCORE}},{key:"clinicalTracksUrlParam",get:function(){return fr(this.selectedClinicalAttributeIds.keys()).join(",")}},{key:"oncoprintAnalysisCaseType",get:function(){return"true"===this.urlWrapper.query.show_samples?wt.c.SAMPLE:wt.c.PATIENT}},{key:"sortOrder",get:function(){return"alphabetical"===this.sortMode.type?this.oncoprintAnalysisCaseType===wt.c.SAMPLE?this.alphabeticalSampleOrder:this.alphabeticalPatientOrder:"caseList"===this.sortMode.type?this.oncoprintAnalysisCaseType===wt.c.SAMPLE&&this.props.store.givenSampleOrder.isComplete?this.props.store.givenSampleOrder.result.map(function(e){return e.uniqueSampleKey}):this.oncoprintAnalysisCaseType===wt.c.PATIENT&&this.props.store.givenSampleOrder.isComplete?i.a.uniq(this.props.store.givenSampleOrder.result.map(function(e){return e.uniquePatientKey})):void 0:void 0}},{key:"alphabeticalSampleOrder",get:function(){return this.props.store.filteredSamples.isComplete?i.a.sortBy(this.props.store.filteredSamples.result,function(e){return e.sampleId}).map(function(e){return e.uniqueSampleKey}):void 0}},{key:"alphabeticalPatientOrder",get:function(){return this.props.store.filteredPatients.isComplete?i.a.sortBy(this.props.store.filteredPatients.result,function(e){return e.patientId}).map(function(e){return e.uniquePatientKey}):void 0}},{key:"geneticTracks",get:function(){return this.oncoprintAnalysisCaseType===wt.c.SAMPLE?this.sampleGeneticTracks:this.patientGeneticTracks}},{key:"clinicalTracks",get:function(){return this.oncoprintAnalysisCaseType===wt.c.SAMPLE?this.sampleClinicalTracks:this.patientClinicalTracks}},{key:"heatmapTracks",get:function(){return this.oncoprintAnalysisCaseType===wt.c.SAMPLE?this.sampleHeatmapTracks:this.patientHeatmapTracks}},{key:"genericAssayHeatmapTracks",get:function(){return this.oncoprintAnalysisCaseType===wt.c.SAMPLE?this.samplegGenericAssayHeatmapTracks:this.patientGenericAssayHeatmapTracks}},{key:"genesetHeatmapTrackGroupIndex",get:function(){return this.props.store.genesetIds.length>0?1+Math.max.apply(Math,[Zn.b].concat(fr(this.heatmapTracks.result.map(function(e){return e.trackGroupIndex})),fr(this.genericAssayHeatmapTracks.result.map(function(e){return e.trackGroupIndex})))):void 0}},{key:"genesetHeatmapTracks",get:function(){return this.oncoprintAnalysisCaseType===wt.c.SAMPLE?this.sampleGenesetHeatmapTracks:this.patientGenesetHeatmapTracks}},{key:"clusteredHeatmapTrackGroupIndex",get:function(){if("heatmap"===this.sortMode.type){var e=this.sortMode.clusteredHeatmapProfile;if(e===(this.props.store.genesetMolecularProfile.result&&this.props.store.genesetMolecularProfile.result.value&&this.props.store.genesetMolecularProfile.result.value.molecularProfileId))return this.genesetHeatmapTrackGroupIndex;var t=this.molecularProfileIdToHeatmapTracks[e];return t&&t.trackGroupIndex}}},{key:"oncoprintLibrarySortConfig",get:function(){return{sortByMutationType:this.sortByMutationType,sortByDrivers:this.sortByDrivers,order:this.sortOrder,clusterHeatmapTrackGroupIndex:this.clusteredHeatmapTrackGroupIndex}}},{key:"isLoading",get:function(){return"pending"===Object(y.Z)(this.clinicalTracks,this.geneticTracks,this.genesetHeatmapTracks,this.genericAssayHeatmapTracks,this.heatmapTracks,this.props.store.molecularProfileIdToMolecularProfile,this.alterationTypesInQuery,this.alteredKeys,this.heatmapTrackHeaders)}},{key:"isHidden",get:function(){return this.isLoading||!this.renderingComplete}},{key:"loadingIndicatorHeight",get:function(){return 300}},{key:"loadingIndicatorMessage",get:function(){return this.isLoading?"Downloading Oncoprint data...":this.renderingComplete?"":"Data downloaded. Rendering Oncoprint.."}},{key:"width",get:function(){return Pn.a.size.width-75}}])&&hr(n.prototype,o),a&&hr(n,a),t}();_r([p.computed],Or.prototype,"columnMode",null),_r([p.computed],Or.prototype,"sortMode",null),_r([p.computed],Or.prototype,"sortByMutationType",null),_r([p.computed],Or.prototype,"sortByDrivers",null),_r([p.computed],Or.prototype,"selectedGenericAssayEntitiesGroupedByGenericAssayTypeFromUrl",null),_r([p.observable],Or.prototype,"distinguishGermlineMutations",void 0),_r([p.observable],Or.prototype,"distinguishMutationType",void 0),_r([p.observable],Or.prototype,"showUnalteredColumns",void 0),_r([p.observable],Or.prototype,"showWhitespaceBetweenColumns",void 0),_r([p.observable],Or.prototype,"showClinicalTrackLegends",void 0),_r([p.observable],Or.prototype,"_onlyShowClinicalLegendForAlteredCases",void 0),_r([p.observable],Or.prototype,"showOqlInLabels",void 0),_r([p.computed],Or.prototype,"onlyShowClinicalLegendForAlteredCases",null),_r([p.observable],Or.prototype,"showMinimap",void 0),_r([p.observable],Or.prototype,"selectedHeatmapProfileId",void 0),_r([p.observable],Or.prototype,"heatmapGeneInputValue",void 0),_r([p.observable],Or.prototype,"selectedGenericAssayProfileId",void 0),_r([p.observable],Or.prototype,"horzZoom",void 0),_r([p.observable],Or.prototype,"mouseInsideBounds",void 0),_r([p.observable],Or.prototype,"renderingComplete",void 0),_r([p.computed],Or.prototype,"selectedClinicalAttributeIds",null),_r([p.computed],Or.prototype,"molecularProfileIdToHeatmapTracks",null),_r([p.observable.ref],Or.prototype,"oncoprint",void 0),_r([p.computed],Or.prototype,"caseListSortPossible",null),_r([p.computed],Or.prototype,"distinguishDrivers",null),_r([p.action],Or.prototype,"setAnnotateCBioPortalInputValue",null),_r([p.action],Or.prototype,"setAnnotateCOSMICInputValue",null),_r([p.computed],Or.prototype,"heatmapIsDynamicallyQueried",null),_r([p.action],Or.prototype,"sortByData",null),_r([p.computed],Or.prototype,"clinicalTracksUrlParam",null),_r([p.action],Or.prototype,"onMinimapClose",null),_r([p.action],Or.prototype,"onSuppressRendering",null),_r([p.action],Or.prototype,"onReleaseRendering",null),_r([p.action],Or.prototype,"onChangeSelectedClinicalTracks",null),_r([p.action.bound],Or.prototype,"clearSortDirectionsAndSortByData",null),_r([p.computed],Or.prototype,"sortOrder",null),_r([p.computed],Or.prototype,"alphabeticalSampleOrder",null),_r([p.computed],Or.prototype,"alphabeticalPatientOrder",null),_r([p.computed],Or.prototype,"geneticTracks",null),_r([p.computed],Or.prototype,"clinicalTracks",null),_r([p.computed],Or.prototype,"heatmapTracks",null),_r([p.computed],Or.prototype,"genericAssayHeatmapTracks",null),_r([p.computed],Or.prototype,"genesetHeatmapTrackGroupIndex",null),_r([p.computed],Or.prototype,"genesetHeatmapTracks",null),_r([p.computed],Or.prototype,"clusteredHeatmapTrackGroupIndex",null),_r([p.computed],Or.prototype,"oncoprintLibrarySortConfig",null),_r([p.action.bound],Or.prototype,"clusterHeatmapByIndex",null),_r([p.action.bound],Or.prototype,"removeHeatmapByIndex",null),_r([p.action.bound],Or.prototype,"removeHeatmapByMolecularProfileId",null),_r([p.computed],Or.prototype,"isLoading",null),_r([p.computed],Or.prototype,"isHidden",null),_r([p.computed],Or.prototype,"loadingIndicatorMessage",null),_r([ot.default],Or.prototype,"getControls",null),_r([ot.default],Or.prototype,"getProgressItems",null),_r([p.computed],Or.prototype,"width",null);var Sr=Or=_r([u.observer],Or),Er=n(1321),kr=n(22),Cr=n(329),Pr=n(175),Tr=n(27),xr="rgb(41, 87, 41)",jr="rgb(180, 4, 4)";function Ar(e){return e>0?xr:jr}function Ir(e){return[Math.abs(e),e>0?1:0]}var Mr=n(140),Dr=n(124),Nr=n(41),Rr=n(254),Lr=n(56),Gr=n(45);function Vr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Br(e){return(Br=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hr(e,t){return(Hr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ur(e){return(Ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Wr=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Ur(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},qr=[{name:"Correlated Gene",render:function(e){return r.createElement("span",{style:{fontWeight:"bold"}},e.geneticEntityName)},filter:function(e,t,n){return e.geneticEntityName.indexOf(n)>-1},download:function(e){return e.geneticEntityName},sortBy:function(e){return e.geneticEntityName},width:"30%"},{name:"Cytoband",render:function(e){return r.createElement("span",null,e.cytoband)},filter:Rr.a,download:function(e){return e.cytoband},sortBy:function(e){return e.cytoband},width:"30%"},zr("Spearman's Correlation","spearmansCorrelation",!0,!1),Object.assign(zr("p-Value","pValue",!1,!1),{tooltip:r.createElement("span",null,"Derived from 2-sided t-test.")}),Object.assign(zr("q-Value","qValue",!1,!0),{sortBy:function(e){return[e.qValue,e.pValue]},tooltip:r.createElement("span",null,"Derived from Benjamini-Hochberg FDR correction procedure.")})];function zr(e,t,n,o){return{name:e,render:function(e){return r.createElement("span",{style:{color:n?Ar(e[t]):"#000000",textAlign:"right",float:"right",whiteSpace:"nowrap"}},o?Object(Gr.b)(e[t]):Object(Lr.b)(e[t],3,.01))},download:function(e){return e[t].toString()+""},sortBy:function(e){return Ir(e[t])},align:"right"}}var Kr=function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,e=!(r=Br(t).apply(this,arguments))||"object"!==Ur(r)&&"function"!=typeof r?Fr(n):r,Object.defineProperty(Fr(e),"tableModeOptions",{enumerable:!0,configurable:!0,writable:!0,value:[{label:"Show Any Correlation",value:Fo.SHOW_ALL},{label:"Show Only Positively Correlated",value:Fo.SHOW_POSITIVE},{label:"Show Only Negatively Correlated",value:Fo.SHOW_NEGATIVE}]}),Object.defineProperty(Fr(e),"paginationProps",{enumerable:!0,configurable:!0,writable:!0,value:{itemsPerPageOptions:[25]}}),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hr(e,t)}(t,r["Component"]),n=t,(o=[{key:"onRowClick",value:function(e){this.props.dataStore.setHighlighted(e)}},{key:"onSelectTableMode",value:function(e){this.props.onSelectTableMode(e.value)}},{key:"render",value:function(){return r.createElement("div",null,r.createElement("div",{style:{float:"left",display:"flex",flexDirection:"row"}},r.createElement("div",{style:{width:180}},r.createElement(Pr.default,{value:this.props.tableMode,onChange:this.onSelectTableMode,options:this.tableModeOptions,searchable:!1,clearable:!1,className:"coexpression-select-table-mode"})),r.createElement(Dr.a,{style:{marginLeft:21,marginTop:"0.7em"},tooltip:r.createElement("div",{style:{maxWidth:200}},Mr.e),tooltipPlacement:"left"})),r.createElement(Et.b,{initialSortColumn:"q-Value",initialSortDirection:"asc",columns:qr,showColumnVisibility:!1,dataStore:this.props.dataStore,onRowClick:this.onRowClick,filterPlaceholder:"Enter gene or cytoband..",paginationProps:this.paginationProps,initialItemsPerPage:25,copyDownloadProps:{showCopy:!1}}))}}])&&Vr(n.prototype,o),i&&Vr(n,i),t}();Wr([Nr.bind],Kr.prototype,"onRowClick",null),Wr([Nr.bind],Kr.prototype,"onSelectTableMode",null);var Qr=Kr=Wr([u.observer],Kr);function Yr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xr(e){return(Xr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jr(e,t){return(Jr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $r(e){return($r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var eo=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":$r(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},to=[{name:"Correlated Gene Set",render:function(e){return r.createElement("span",{style:{fontWeight:"bold"}},e.geneticEntityName.length>28?e.geneticEntityName.substring(0,25)+"...":e.geneticEntityName)},filter:function(e,t,n){return e.geneticEntityName.indexOf(n)>-1},download:function(e){return e.geneticEntityName},sortBy:function(e){return e.geneticEntityName},width:"60%"},no("Spearman's Correlation","spearmansCorrelation",!0,!1),no("p-Value","pValue",!1,!1),Object.assign(no("q-Value","qValue",!1,!0),{sortBy:function(e){return[e.qValue,e.pValue]}})];function no(e,t,n,o){return{name:e,render:function(e){return r.createElement("span",{style:{color:n?Ar(e[t]):"#000000",textAlign:"right",float:"right",whiteSpace:"nowrap"}},o?Object(Gr.b)(e[t]):Object(Lr.b)(e[t],3,.01))},download:function(e){return e[t].toString()+""},sortBy:function(e){return Ir(e[t])},align:"right"}}var ro=function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,e=!(r=Xr(t).apply(this,arguments))||"object"!==$r(r)&&"function"!=typeof r?Zr(n):r,Object.defineProperty(Zr(e),"tableModeOptions",{enumerable:!0,configurable:!0,writable:!0,value:[{label:"Show Any Correlation",value:Fo.SHOW_ALL},{label:"Show Only Positively Correlated",value:Fo.SHOW_POSITIVE},{label:"Show Only Negatively Correlated",value:Fo.SHOW_NEGATIVE}]}),Object.defineProperty(Zr(e),"paginationProps",{enumerable:!0,configurable:!0,writable:!0,value:{itemsPerPageOptions:[25]}}),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jr(e,t)}(t,r["Component"]),n=t,(o=[{key:"onRowClick",value:function(e){this.props.dataStore.setHighlighted(e)}},{key:"onSelectTableMode",value:function(e){this.props.onSelectTableMode(e.value)}},{key:"render",value:function(){return r.createElement("div",null,r.createElement("div",{style:{float:"left",display:"flex",flexDirection:"row"}},r.createElement("div",{style:{width:180}},r.createElement(Pr.default,{value:this.props.tableMode,onChange:this.onSelectTableMode,options:this.tableModeOptions,searchable:!1,clearable:!1,className:"coexpression-select-table-mode"})),r.createElement(Dr.a,{style:{marginLeft:21,marginTop:"0.7em"},tooltip:r.createElement("div",{style:{maxWidth:200}},Mr.e),tooltipPlacement:"left"})),r.createElement(Et.b,{initialSortColumn:"q-Value",initialSortDirection:"asc",columns:to,showColumnVisibility:!1,dataStore:this.props.dataStore,onRowClick:this.onRowClick,filterPlaceholder:"Enter gene set..",paginationProps:this.paginationProps,initialItemsPerPage:25,copyDownloadProps:{showCopy:!1}}))}}])&&Yr(n.prototype,o),i&&Yr(n,i),t}();eo([Nr.bind],ro.prototype,"onRowClick",null),eo([Nr.bind],ro.prototype,"onSelectTableMode",null);var oo=ro=eo([u.observer],ro),io=n(174),ao=n(8),lo=(n(1325),n(431));function so(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function co(e,t,n){return"".concat(n,": ").concat(e.geneticEntityName," ").concat(e.cytoband?"(".concat(e.cytoband,") "):"").concat(t?"(".concat(t.label,") "):"")}function uo(e){return!e.profiledX&&!e.profiledY}var po=n(28);function fo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ho(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mo(e,t){return!t||"object"!==_o(t)&&"function"!=typeof t?yo(e):t}function yo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bo(e){return(bo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function go(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vo(e,t)}function vo(e,t){return(vo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _o(e){return(_o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var wo=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":_o(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Oo=function(e){function t(){return ho(this,t),mo(this,bo(t).apply(this,arguments))}return go(t,lo["a"]),t}();function So(){}var Eo="coexpression-plot-svg",ko=function(e){function t(e){var n;return ho(this,t),n=mo(this,bo(t).call(this,e)),Object(p.makeObservable)(yo(n)),n}var n,o,a;return go(t,r["Component"]),n=t,(o=[{key:"getSvg",value:function(){return document.getElementById(Eo)}},{key:"plot",value:function(){return this.data.length?r.createElement(Oo,{svgId:Eo,title:this.title,data:this.data,size:po.j,chartWidth:this.props.width,chartHeight:this.props.height,stroke:this.stroke,fill:this.fill,strokeWidth:1.2,legendData:this.mutationLegendElements,showRegressionLine:this.props.showRegressionLine,logX:this.axisLogScaleFunction,logY:this.axisLogScaleFunction,useLogSpaceTicks:!0,axisLabelX:this.axisLabelX,axisLabelY:this.axisLabelY,tooltip:this.tooltip,fontFamily:"Arial,Helvetica"}):r.createElement("div",{className:"alert alert-info"},"No data to plot.")}},{key:"toolbar",value:function(){return r.createElement("div",{style:{textAlign:"center",position:"relative"}},r.createElement("div",{style:{display:"inline-block"}},this.props.showMutationControls&&r.createElement("div",{className:"checkbox coexpression-plot-toolbar-elt"},r.createElement("label",null,r.createElement("input",{type:"checkbox",checked:this.props.showMutations,onClick:this.props.handlers.onClickShowMutations||So,"data-test":"ShowMutations"}),"Show Mutations")),this.props.showLogScaleControls&&r.createElement("div",{className:"coexpression-plot-toolbar-elt"},r.createElement("div",{className:"checkbox coexpression-plot-toolbar-elt"},r.createElement("label",null,r.createElement("input",{type:"checkbox",checked:this.props.logScale,onClick:this.props.handlers.onClickLogScale||So,"data-test":"logScale"}),"Log Scale"))),r.createElement("div",{className:"checkbox coexpression-plot-toolbar-elt"},r.createElement("label",null,r.createElement("input",{type:"checkbox",checked:this.props.showRegressionLine,onClick:this.props.handlers.onClickShowRegressionLine,"data-test":"ShowRegressionLine"}),"Show Regression Line"))),r.createElement(z.j,{getSvg:this.getSvg,getData:this.getDownloadData,buttons:["SVG","PNG","PDF","Data"],filename:"coexpression",dontFade:!0,type:"button",style:{position:"absolute",top:0,right:0}}))}},{key:"getDownloadData",value:function(){return e=this.props.data,t=this.props.xAxisGeneticEntity,n=this.props.yAxisGeneticEntity,r=this.props.molecularProfileX,o=this.props.molecularProfileY,i=!!this.props.showMutations,a=["Sample ID","".concat(t.geneticEntityName," (").concat(r.name,")"),"".concat(n.geneticEntityName," (").concat(o.name,")")],i&&a.push("".concat(t.geneticEntityName," Mutations"),"".concat(n.geneticEntityName," Mutations")),[a].concat(so(e.map(function(e){var t=[e.sampleId,e.x,e.y];return i&&t.push(e.profiledX?e.mutationsX||"WT":"NS",e.profiledY?e.mutationsY||"WT":"NS"),t}))).map(function(e){return e.join("\t")}).join("\n");var e,t,n,r,o,i,a}},{key:"tooltip",value:function(e){return r.createElement("div",null,r.createElement("div",null,r.createElement("span",null,"Sample ID: "),r.createElement("a",{href:Object(at.x)(e.studyId,e.sampleId)},e.sampleId)),r.createElement("div",null,r.createElement("span",null,this.props.xAxisGeneticEntity.geneticEntityName,": ",r.createElement("b",null,e.x.toFixed(2)))),r.createElement("div",null,r.createElement("span",null,this.props.yAxisGeneticEntity.geneticEntityName,": ",r.createElement("b",null,e.y.toFixed(2)))),e.mutationsX&&r.createElement("div",null,r.createElement("span",null,this.props.xAxisGeneticEntity.geneticEntityName," ","Mutation: ",r.createElement("b",null,e.mutationsX))),e.mutationsY&&r.createElement("div",null,r.createElement("span",null,this.props.yAxisGeneticEntity.geneticEntityName," ","Mutation: ",r.createElement("b",null,e.mutationsY))))}},{key:"render",value:function(){return r.createElement("div",{className:"borderedChart inlineBlock","data-test":"CoExpressionPlot"},r.createElement(u.Observer,null,this.toolbar),r.createElement(u.Observer,null,this.plot))}},{key:"stroke",get:function(){return this.props.showMutations?function(e){return uo(e)?"#d3d3d3":e.mutationsX&&e.mutationsY?"#B40404":e.mutationsX||e.mutationsY?e.mutationsX?"#886A08":"#F7819F":"#0174df"}:"#0174df"}},{key:"fill",get:function(){return this.props.showMutations?function(e){return uo(e)?"#ffffff":e.mutationsX&&e.mutationsY?"#FF0000":e.mutationsX||e.mutationsY?e.mutationsX?"#DBA901":"#F5A9F2":"#58acfa"}:"#58acfa"}},{key:"mutationLegendElements",get:function(){if(!this.props.showMutations)return[];var e=!1,t=!1,n=!1,r=!1,o=!1,i=!0,a=!1,l=void 0;try{for(var s,c=this.data[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=s.value;uo(u)&&(o=!0),u.mutationsX&&u.mutationsY?e=!0:u.mutationsX||u.mutationsY?u.mutationsX?t=!0:n=!0:r=!0}}catch(e){a=!0,l=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw l}}var p=[];return t&&p.push({name:[this.props.xAxisGeneticEntity.geneticEntityName,"mutated"],symbol:{fill:"#DBA901",stroke:"#886A08"}}),n&&p.push({name:[this.props.yAxisGeneticEntity.geneticEntityName,"mutated"],symbol:{fill:"#F5A9F2",stroke:"#F7819F"}}),e&&p.push({name:"Both mutated",symbol:{fill:"#FF0000",stroke:"#B40404"}}),r&&p.push({name:"Neither mutated",symbol:{fill:"#58acfa",stroke:"#0174df"}}),o&&p.push({name:"Not profiled for mutations",symbol:{fill:"#ffffff",stroke:"#d3d3d3"}}),p}},{key:"data",get:function(){return i.a.sortBy(this.props.data,function(e){return e.mutationsX&&e.mutationsY?3:e.mutationsX||e.mutationsY?2:uo(e)?0:1})}},{key:"title",get:function(){return"".concat(this.props.xAxisGeneticEntity.geneticEntityName," vs. ").concat(this.props.yAxisGeneticEntity.geneticEntityName)}},{key:"axisLabelX",get:function(){return co({geneticEntityName:this.props.xAxisGeneticEntity.geneticEntityName,cytoband:this.props.xAxisGeneticEntity.cytoband},this.axisLogScaleFunction,this.props.molecularProfileX.name)}},{key:"axisLabelY",get:function(){return co({geneticEntityName:this.props.yAxisGeneticEntity.geneticEntityName},this.axisLogScaleFunction,this.props.molecularProfileY.name)}},{key:"axisLogScaleFunction",get:function(){if(this.props.logScale)return{label:"log2",fLogScale:function(e,t){return Math.log2(Math.max(e,.01))},fInvLogScale:function(e){return Math.pow(2,e)}}}}])&&fo(n.prototype,o),a&&fo(n,a),t}();wo([Nr.bind],ko.prototype,"getSvg",null),wo([p.computed],ko.prototype,"stroke",null),wo([p.computed],ko.prototype,"fill",null),wo([p.computed],ko.prototype,"mutationLegendElements",null),wo([p.computed],ko.prototype,"data",null),wo([p.computed],ko.prototype,"axisLabelX",null),wo([p.computed],ko.prototype,"axisLabelY",null),wo([p.computed],ko.prototype,"axisLogScaleFunction",null),wo([Nr.bind],ko.prototype,"plot",null),wo([Nr.bind],ko.prototype,"toolbar",null),wo([ot.default],ko.prototype,"getDownloadData",null),wo([Nr.bind],ko.prototype,"tooltip",null);var Co=ko=wo([u.observer],ko),Po=n(94),To=" ";function xo(e){return e.map(function(e){return"".concat(e.proteinChange).concat(Object(b.v)(e)?"":" [germline]")}).filter(function(e){return!!e}).join(", ")}function jo(e,t,n,r,o){var i=o[t];return!!i&&Object(Po.a)(e,i.molecularProfileId,n,r)}var Ao=n(184);function Io(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Do(e,t,n){return t&&Mo(e.prototype,t),n&&Mo(e,n),e}function No(e,t){return!t||"object"!==Bo(t)&&"function"!=typeof t?Lo(e):t}function Ro(e){return(Ro=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Go(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vo(e,t)}function Vo(e,t){return(Vo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Bo(e){return(Bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Fo,Ho=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Bo(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};!function(e){e[e.SHOW_ALL=0]="SHOW_ALL",e[e.SHOW_POSITIVE=1]="SHOW_POSITIVE",e[e.SHOW_NEGATIVE=2]="SHOW_NEGATIVE"}(Fo||(Fo={}));var Uo=function(e){function t(e,n,r){var o;return Io(this,t),o=No(this,Ro(t).call(this,e)),Object.defineProperty(Lo(o),"setHighlighted",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(Lo(o),"tableMode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(Lo(o),"reactionDisposer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object(p.makeObservable)(Lo(o)),o.tableMode=Fo.SHOW_ALL,o.dataHighlighter=function(e){var t=n();return!(!t||e.geneticEntityId!==t.geneticEntityId)},o.dataSelector=function(e){var t;switch(o.tableMode){case Fo.SHOW_POSITIVE:t=e.spearmansCorrelation>=0;break;case Fo.SHOW_NEGATIVE:t=e.spearmansCorrelation<=0;break;default:t=!0}return t},o.reactionDisposer=Object(p.autorun)(function(){o.sortMetric&&o.sortedFilteredData.length>0&&!n()&&o.setHighlighted(o.sortedFilteredData[0])}),o}return Go(t,io["a"]),Do(t,[{key:"destroy",value:function(){this.reactionDisposer()}}]),t}();Ho([p.observable],Uo.prototype,"tableMode",void 0);var Wo=function(e){function t(e){var n;return Io(this,t),n=No(this,Ro(t).call(this,e)),Object.defineProperty(Lo(n),"highlightedCoExpression",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(Lo(n),"allDataRequested",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(Lo(n),"lastCoExpressionData",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(Lo(n),"coExpressionsWithQValues",{enumerable:!0,configurable:!0,writable:!0,value:Object(z.vb)({await:function(){return[n.coExpressionDataPromise]},invoke:function(){var e=n.coExpressionDataPromise.result,t=i.a.sortBy(e,function(e){return e.pValue});return Object(Ao.a)(t.map(function(e){return e.pValue})).forEach(function(e,n){t[n].qValue=e}),Promise.resolve(t)}})}),Object.defineProperty(Lo(n),"dataStore",{enumerable:!0,configurable:!0,writable:!0,value:new Uo(function(){return n.props.hidden?n.lastCoExpressionData||[]:n.coExpressionsWithQValues.isComplete?(n.lastCoExpressionData=n.coExpressionsWithQValues.result,n.coExpressionsWithQValues.result):[]},function(){return n.highlightedCoExpression},function(e){n.highlightedCoExpression=e})}),Object.defineProperty(Lo(n),"plotData",{enumerable:!0,configurable:!0,writable:!0,value:Object(z.vb)({await:function(){if(n.props.hidden)return[];var e=n.getPlotDataPromises(n.highlightedCoExpression),t=[n.props.coverageInformation,n.props.studyToMutationMolecularProfile,e.molecularX];return e.mutationX&&t.push(e.mutationX),e.molecularY&&t.push(e.molecularY),e.mutationY&&t.push(e.mutationY),t},invoke:function(){if(n.props.hidden)return Promise.resolve([]);if(!n.highlightedCoExpression)return Promise.resolve([]);var e=n.getPlotDataPromises(n.highlightedCoExpression),t=[];e.molecularX&&e.molecularX.isComplete&&(t=t.concat(e.molecularX.result)),e.molecularY&&e.molecularY.isComplete&&(t=t.concat(e.molecularY.result));var r=[];return e.mutationX&&e.mutationX.isComplete&&(r=r.concat(e.mutationX.result)),e.mutationY&&e.mutationY.isComplete&&(r=r.concat(e.mutationY.result)),Promise.resolve(function(e,t,n,r,o,i,a,l){var s={},c={},u={},p={},d={},f=function(e){d[e.uniqueSampleKey]||(d[e.uniqueSampleKey]=e)};if("number"==typeof n){var h=!0,m=!1,y=void 0;try{for(var b,g=t[Symbol.iterator]();!(h=(b=g.next()).done);h=!0){var v=b.value;if(v.proteinChange){var _=v.entrezGeneId===n?u:p;_[v.uniqueSampleKey]=_[v.uniqueSampleKey]||[],_[v.uniqueSampleKey].push(v),f(v)}}}catch(e){m=!0,y=e}finally{try{h||null==g.return||g.return()}finally{if(m)throw y}}}if(e[0]&&void 0!==e[0].entrezGeneId){var w=!0,O=!1,S=void 0;try{for(var E,k=e[Symbol.iterator]();!(w=(E=k.next()).done);w=!0){var C=E.value;(C.entrezGeneId===n?s:c)[C.uniqueSampleKey]=C,f(C)}}catch(e){O=!0,S=e}finally{try{w||null==k.return||k.return()}finally{if(O)throw S}}}else{var P=!0,T=!1,x=void 0;try{for(var j,A=e[Symbol.iterator]();!(P=(j=A.next()).done);P=!0){var I=j.value;(I.genesetId===n.toString()?s:c)[I.uniqueSampleKey]=I,f(I)}}catch(e){T=!0,x=e}finally{try{P||null==A.return||A.return()}finally{if(T)throw x}}}for(var M=[],D=0,N=Object.keys(s);D<N.length;D++){var R=N[D],L=d[R].studyId,G=s[R],V=c[R];if(G&&V){var B=Number(G.value),F=Number(V.value);isNaN(B)||isNaN(F)||M.push({x:B,y:F,mutationsX:xo(u[R]||[]),mutationsY:xo(p[R]||[]),profiledX:"number"==typeof n&&jo(R,L,o,a,l),profiledY:"number"==typeof r&&jo(R,L,i,a,l),studyId:L,sampleId:d[R].sampleId})}}return M}(t,r,n.props.geneticEntity.geneticEntityId,isNaN(Number(n.highlightedCoExpression.geneticEntityId))?n.highlightedCoExpression.geneticEntityId:Number(n.highlightedCoExpression.geneticEntityId),n.props.geneticEntity.geneticEntityName,n.highlightedCoExpression.geneticEntityName,n.props.coverageInformation.result,n.props.studyToMutationMolecularProfile.result))}})}),Object(p.makeObservable)(Lo(n)),n}return Go(t,r["Component"]),Do(t,[{key:"onSelectTableMode",value:function(e){this.dataStore.tableMode=e}},{key:"requestAllData",value:function(){this.allDataRequested=!0}},{key:"getPlotDataPromises",value:function(e){var t={molecularX:this.props.profileX.molecularAlterationType===d.a.GENESET_SCORE?this.props.numericGenesetMolecularDataCache.get({genesetId:this.props.geneticEntity.geneticEntityId.toString(),molecularProfileId:this.props.profileX.molecularProfileId}):this.props.numericGeneMolecularDataCache.get({entrezGeneId:parseInt(String(this.props.geneticEntity.geneticEntityId),10),molecularProfileId:this.props.profileX.molecularProfileId}),mutationX:void 0,molecularY:void 0,mutationY:void 0};return e&&(t.molecularY=this.props.profileY.molecularAlterationType===d.a.GENESET_SCORE?this.props.numericGenesetMolecularDataCache.get({genesetId:e.geneticEntityId,molecularProfileId:this.props.profileY.molecularProfileId}):this.props.numericGeneMolecularDataCache.get({entrezGeneId:parseInt(e.geneticEntityId,10),molecularProfileId:this.props.profileY.molecularProfileId})),this.props.mutationCache&&(t.mutationX=this.props.mutationCache.get({entrezGeneId:parseInt(String(this.props.geneticEntity.geneticEntityId),10)}),e&&(t.mutationY=this.props.mutationCache.get({entrezGeneId:parseInt(e.geneticEntityId,10)}))),t}},{key:"table",value:function(){return this.props.profileY.molecularAlterationType!==d.a.GENESET_SCORE?r.createElement("div",null,r.createElement(Qr,{referenceGeneticEntity:this.props.geneticEntity.geneticEntityData,dataStore:this.dataStore,tableMode:this.dataStore.tableMode,onSelectTableMode:this.onSelectTableMode}),this.requestAllDataButton):r.createElement("div",null,r.createElement(oo,{referenceGeneticEntity:this.props.geneticEntity.geneticEntityData,dataStore:this.dataStore,tableMode:this.dataStore.tableMode,onSelectTableMode:this.onSelectTableMode}),this.requestAllDataButton)}},{key:"plot",value:function(){if(this.props.hidden)return r.createElement("span",null);if(this.plotData.isError)return r.createElement("span",null,"Error fetching data. Please refresh the page and try again.");var e;if(this.highlightedCoExpression){e={geneticEntityName:this.highlightedCoExpression.geneticEntityName,geneticEntityType:this.highlightedCoExpression.geneticEntityType,geneticEntityId:this.highlightedCoExpression.geneticEntityId,cytoband:this.highlightedCoExpression.cytoband,geneticEntityData:{geneticEntityId:0,entrezGeneId:0,hugoGeneSymbol:"",type:""}}}return r.createElement("div",{style:{position:"relative"}},r.createElement(st.a,{isLoading:this.dataStore.allData.length>0&&(this.plotData.isPending||!this.highlightedCoExpression),center:!0,size:"big"}),this.plotData.isComplete&&this.highlightedCoExpression&&r.createElement("div",{style:{marginLeft:10}},r.createElement(Co,{xAxisGeneticEntity:this.props.geneticEntity,yAxisGeneticEntity:e,data:this.plotData.result,showLogScaleControls:this.showLogScaleControls,showMutationControls:this.showMutationControls,showMutations:this.plotShowMutations,showRegressionLine:this.props.plotState.plotShowRegressionLine,logScale:this.plotLogScale,handlers:this.props.plotHandlers,molecularProfileY:this.props.profileY,molecularProfileX:this.props.profileX,height:530,width:530})))}},{key:"componentWillUnmount",value:function(){this.dataStore.destroy()}},{key:"render",value:function(){var e=r.createElement("div",{style:{display:!this.props.hidden&&this.coExpressionsWithQValues.isComplete?"inherit":"none"},"data-test":"CoExpressionGeneTabContent"},r.createElement("div",{className:"clearfix"},this.dataStore.allData.length>0?[r.createElement("div",{style:{width:"40%",float:"left",marginTop:6}},r.createElement(u.Observer,null,this.table)),r.createElement("div",{style:{width:"60%",float:"right",marginTop:6}},r.createElement(u.Observer,null,this.plot))]:r.createElement("div",{style:{position:"absolute",top:200,left:"50%",transform:"translate(-50%, 0)"}},"There is no expression data for"," ",r.createElement("strong",null,this.props.geneticEntity.geneticEntityName)," ","with the selected samples in"," ",r.createElement("strong",null,this.props.profileX.name),".")));return r.createElement("div",{style:{display:this.props.hidden?"none":"inherit",minHeight:826,position:"relative"}},e,r.createElement(st.a,{isLoading:!this.props.hidden&&this.coExpressionsWithQValues.isPending,center:!0,size:"big"}))}},{key:"coExpressionDataPromise",get:function(){return this.props.coExpressionCache.get({geneticEntityId:this.props.geneticEntity.geneticEntityId.toString(),geneticEntityType:this.props.geneticEntity.geneticEntityType,profileX:this.props.profileX,profileY:this.props.profileY,allData:this.allDataRequested})}},{key:"plotShowMutations",get:function(){return this.props.plotState.plotShowMutations&&this.showMutationControls}},{key:"plotLogScale",get:function(){return this.props.plotState.plotLogScale&&this.showLogScaleControls}},{key:"showMutationControls",get:function(){return!!this.props.mutationCache}},{key:"showLogScaleControls",get:function(){var e=this.props.profileX.molecularProfileId.toLowerCase(),t=this.props.profileY.molecularProfileId.toLowerCase();return Object(ao.C)(e)||Object(ao.C)(t)}},{key:"requestAllDataButton",get:function(){return!this.plotData.isComplete||this.dataStore.allData.length||this.allDataRequested?null:r.createElement("div",null,r.createElement("span",{style:{marginRight:5}},(e=this.props.geneticEntity.geneticEntityName,"There are no genes with a Pearson or Spearman correlation with ".concat(e," of").concat(To,">").concat(To,"0.3").concat(To,"or").concat(To,"<").concat(To,"-0.3."))),r.createElement(w.Button,{onClick:this.requestAllData},"Load data for all genes."));var e}}]),t}();Ho([p.observable.ref],Wo.prototype,"highlightedCoExpression",void 0),Ho([p.observable],Wo.prototype,"allDataRequested",void 0),Ho([p.action.bound],Wo.prototype,"onSelectTableMode",null),Ho([p.action.bound],Wo.prototype,"requestAllData",null),Ho([p.computed],Wo.prototype,"plotShowMutations",null),Ho([p.computed],Wo.prototype,"plotLogScale",null),Ho([p.computed],Wo.prototype,"showMutationControls",null),Ho([p.computed],Wo.prototype,"showLogScaleControls",null),Ho([Nr.bind],Wo.prototype,"table",null),Ho([Nr.bind],Wo.prototype,"plot",null);var qo=Wo=Ho([u.observer],Wo),zo=n(84);function Ko(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yo(e,t){return!t||"object"!==ei(t)&&"function"!=typeof t?Xo(e):t}function Xo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zo(e){return(Zo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jo(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$o(e,t)}function $o(e,t){return($o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ei(e){return(ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ti=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ei(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ni=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function l(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,l)}s((r=r.apply(e,t||[])).next())})},ri=function(e){function t(){return Qo(this,t),Yo(this,Zo(t).apply(this,arguments))}return Jo(t,zo["a"]),t}(),oi=function(e){function t(e){var n;return Qo(this,t),n=Yo(this,Zo(t).call(this,e)),Object.defineProperty(Xo(n),"_selectedProfileX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(Xo(n),"_selectedProfileY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(Xo(n),"_selectedGeneticEntity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(Xo(n),"selectedProfileX",{enumerable:!0,configurable:!0,writable:!0,value:Object(z.vb)({await:function(){return[n.xProfileOptions]},invoke:function(){return!n._selectedProfileX&&n.xProfileOptions.result.length>0?Promise.resolve(n.xProfileOptions.result[0].value):Promise.resolve(n._selectedProfileX)}})}),Object.defineProperty(Xo(n),"selectedProfileY",{enumerable:!0,configurable:!0,writable:!0,value:Object(z.vb)({await:function(){return[n.yProfileOptions]},invoke:function(){return!n._selectedProfileY&&n.yProfileOptions.result.length>0?Promise.resolve(n.yProfileOptions.result[0].value):Promise.resolve(n._selectedProfileY)}})}),Object.defineProperty(Xo(n),"selectedGeneticEntity",{enumerable:!0,configurable:!0,writable:!0,value:Object(z.vb)({await:function(){return[n.props.store.geneticEntities]},invoke:function(){return n._selectedGeneticEntity?Promise.resolve(n._selectedGeneticEntity):Promise.resolve(n.props.store.geneticEntities.result[0])}})}),Object.defineProperty(Xo(n),"isSelectedGeneticEntityAGeneSet",{enumerable:!0,configurable:!0,writable:!0,value:Object(z.vb)({await:function(){return[n.props.store.geneticEntities]},invoke:function(){if(n._selectedGeneticEntity){var e=!0,t=!1,r=void 0;try{for(var o,i=n.props.store.geneticEntities.result[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var a=o.value;if(a.geneticEntityType===d.c.GENESET&&a.geneticEntityId===n._selectedGeneticEntity.geneticEntityId)return Promise.resolve(!0)}}catch(e){t=!0,r=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}}return Promise.resolve(!1)}})}),Object.defineProperty(Xo(n),"plotState",{enumerable:!0,configurable:!0,writable:!0,value:{plotLogScale:!1,plotShowMutations:!0,plotShowRegressionLine:!1}}),Object.defineProperty(Xo(n),"plotHandlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(Xo(n),"xProfileOptions",{enumerable:!0,configurable:!0,writable:!0,value:Object(z.vb)({await:function(){return[n.props.store.coexpressionTabMolecularProfiles,n.isSelectedGeneticEntityAGeneSet,n.props.store.molecularProfileIdToProfiledFilteredSamples]},invoke:function(){var e=[];return e=n.isSelectedGeneticEntityAGeneSet.result?Object(Mr.b)(n.props.store.coexpressionTabMolecularProfiles.result):Object(Mr.a)(n.props.store.coexpressionTabMolecularProfiles.result),Promise.resolve(Object(Mr.c)(e,n.props.store.molecularProfileIdToProfiledFilteredSamples.result))}})}),Object.defineProperty(Xo(n),"yProfileOptions",{enumerable:!0,configurable:!0,writable:!0,value:Object(z.vb)({await:function(){return[n.props.store.coexpressionTabMolecularProfiles,n.props.store.molecularProfileIdToProfiledFilteredSamples]},invoke:function(){return Promise.resolve(Object(Mr.c)(n.props.store.coexpressionTabMolecularProfiles.result,n.props.store.molecularProfileIdToProfiledFilteredSamples.result))}})}),Object.defineProperty(Xo(n),"coExpressionCache",{enumerable:!0,configurable:!0,writable:!0,value:new ri(function(e){return{await:function(){return[n.props.store.entrezGeneIdToReferenceGene,n.props.store.molecularProfileIdToProfiledFilteredSamples]},invoke:function(){return ni(Xo(n),void 0,void 0,regeneratorRuntime.mark(function t(){var n,r,o,a,l,s,c,u,p,f,h;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=.3,e.allData&&(n=0),r=this.props.store.molecularProfileIdToProfiledFilteredSamples.result[e.profileX.molecularProfileId],o=this.props.store.molecularProfileIdToProfiledFilteredSamples.result[e.profileY.molecularProfileId],a={},e.profileX.molecularProfileId===e.profileY.molecularProfileId?a=this.props.store.studyToDataQueryFilter.result[e.profileX.studyId]:(l=i.a.intersectionWith(r,o,function(e,t){return e.uniqueSampleKey===t.uniqueSampleKey}),a.sampleIds=l.map(function(e){return e.sampleId})),!i.a.isEmpty(a.sampleIds)||!i.a.isEmpty(a.sampleListId)){t.next=8;break}return t.abrupt("return",Promise.resolve([]));case 8:if(null==(s=this.createDataQueryFilterForCoExpression(a,e.geneticEntityId,e.geneticEntityType))){t.next=25;break}return void 0,t.next=13,Tr.a.fetchCoExpressionsUsingPOST({molecularProfileIdA:e.profileX.molecularProfileId,molecularProfileIdB:e.profileY.molecularProfileId,coExpressionFilter:s,threshold:n,$domain:void 0});case 13:if(c=t.sent,u={},e.profileY.molecularAlterationType!==d.a.GENESET_SCORE){t.next=21;break}return p=i.a.chain(c).map(function(e){return e.geneticEntityId}).uniq().value(),t.next=19,Tr.a.fetchGenesetsUsingPOST({genesetIds:p});case 19:f=t.sent,u=i.a.keyBy(f,function(e){return e.genesetId});case 21:return h=this.props.store.entrezGeneIdToReferenceGene.result||{},t.abrupt("return",Promise.resolve(i.a.reduce(c,function(t,n){var r=void 0,o="-";return e.profileY.molecularAlterationType===d.a.GENESET_SCORE?r=u[n.geneticEntityId].name:void 0!==h[n.geneticEntityId]&&(r=h[n.geneticEntityId].hugoGeneSymbol,o=h[n.geneticEntityId].cytoband),void 0!==r&&t.push(Object.assign(Object.assign({},n),{geneticEntityName:r,cytoband:o})),t},[])));case 25:return t.abrupt("return",Promise.resolve([]));case 26:case"end":return t.stop()}},t,this)}))}}},function(e){return"".concat(e.geneticEntityId,",").concat(e.profileX.molecularProfileId,",").concat(e.profileY.molecularProfileId)})}),Object(p.makeObservable)(Xo(n)),window.resultsViewCoExpressionTab=Xo(n),n.plotHandlers={onClickLogScale:Object(p.action)(function(){n.plotState.plotLogScale=!n.plotState.plotLogScale}),onClickShowMutations:Object(p.action)(function(){n.plotState.plotShowMutations=!n.plotState.plotShowMutations}),onClickShowRegressionLine:Object(p.action)(function(){n.plotState.plotShowRegressionLine=!n.plotState.plotShowRegressionLine})},n}var n,o,a;return Jo(t,r["Component"]),n=t,(o=[{key:"onSelectProfileX",value:function(e){this._selectedProfileX=e.value}},{key:"onSelectProfileY",value:function(e){this._selectedProfileY=e.value}},{key:"onSelectGeneticEntity",value:function(e){if(!this.props.store.geneticEntities.isComplete)throw new Error("Invalid Genetic Entity");var t=!0,n=!1,r=void 0;try{for(var o,i=this.props.store.geneticEntities.result[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;a.geneticEntityId.toString()===e&&(this._selectedGeneticEntity=a)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}},{key:"createDataQueryFilterForCoExpression",value:function(e,t,n){var r=void 0;return n===d.c.GENE?r=Object.assign(Object.assign({},e),{entrezGeneId:parseFloat(t)}):n===d.c.GENESET&&(r=Object.assign(Object.assign({},e),{genesetId:t})),r}},{key:"header",value:function(){return r.createElement("div",{style:{marginBottom:20}},this.profilesSelector)}},{key:"geneTabs",value:function(){if(this.selectedGeneticEntity.isComplete&&this.selectedProfileX.isComplete&&this.selectedProfileY.isComplete&&this.props.store.geneticEntities.isComplete&&this.props.store.coexpressionTabMolecularProfiles.isComplete){var e=[],t=!0,n=!1,o=void 0;try{for(var i,a=this.props.store.geneticEntities.result[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var l=i.value,s=!0,c=!1,p=void 0;try{for(var f,m=(l.geneticEntityType===d.c.GENE?Object(Mr.a)(this.props.store.coexpressionTabMolecularProfiles.result):Object(Mr.b)(this.props.store.coexpressionTabMolecularProfiles.result))[Symbol.iterator]();!(s=(f=m.next()).done);s=!0){var y=f.value,b=!0,g=!1,v=void 0;try{for(var _,w=this.props.store.coexpressionTabMolecularProfiles.result[Symbol.iterator]();!(b=(_=w.next()).done);b=!0){var O=_.value;e.push(r.createElement(qo,{key:"".concat(l.geneticEntityId,",").concat(y.molecularProfileId,",").concat(O.molecularProfileId),coExpressionCache:this.coExpressionCache,geneticEntity:l,profileX:y,profileY:O,numericGeneMolecularDataCache:this.props.store.numericGeneMolecularDataCache,numericGenesetMolecularDataCache:this.props.store.numericGenesetMolecularDataCache,mutationCache:this.hasMutationData?this.props.store.mutationCache:void 0,hidden:y.molecularProfileId!==this.selectedProfileX.result||O.molecularProfileId!==this.selectedProfileY.result||l.geneticEntityId!==this.selectedGeneticEntity.result.geneticEntityId,plotState:this.plotState,plotHandlers:this.plotHandlers,coverageInformation:this.props.store.coverageInformation,studyToMutationMolecularProfile:this.props.store.studyToMutationMolecularProfile}))}}catch(e){g=!0,v=e}finally{try{b||null==w.return||w.return()}finally{if(g)throw v}}}}catch(e){c=!0,p=e}finally{try{s||null==m.return||m.return()}finally{if(c)throw p}}}}catch(e){n=!0,o=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw o}}return r.createElement("div",null,r.createElement(h.b,{id:"coexpressionTabGeneTabs",activeTabId:this.selectedGeneticEntity.result.geneticEntityId.toString(),onTabClick:this.onSelectGeneticEntity,className:"coexpressionTabGeneTabs pillTabs",unmountOnHide:!0,tabButtonStyle:"pills",arrowStyle:{"line-height":.8}},this.props.store.geneticEntities.result.map(function(e,t){return r.createElement(h.a,{key:t,id:e.geneticEntityId.toString(),linkText:e.geneticEntityName})})),r.createElement(u.Observer,null,this.header),e)}return r.createElement(st.a,{isLoading:!0,center:!0,size:"big"})}},{key:"render",value:function(){var e=null;e=this.props.store.coexpressionTabMolecularProfiles.isComplete&&this.props.store.coexpressionTabMolecularProfiles.result.length>0?r.createElement("div",null,r.createElement(u.Observer,null,this.geneTabs)):r.createElement("div",{className:"alert alert-info"},"There are no available profiles in the queried studies.");var t=Object(y.Z)(this.props.store.genes,this.props.store.molecularProfileIdToProfiledFilteredSamples,this.props.store.coexpressionTabMolecularProfiles);return r.createElement("div",{"data-test":"coExpressionTabDiv"},r.createElement("div",{className:"tabMessageContainer"},r.createElement(rt.a,{className:"coexp-oql-status-banner",store:this.props.store,tabReflectsOql:!1}),r.createElement(it.a,{store:this.props.store,isUnaffected:!0}),r.createElement(lt.a,{store:this.props.store})),"complete"===t&&e,r.createElement(st.a,{center:!0,size:"big",isLoading:"pending"===t}))}},{key:"hasMutationData",get:function(){return i.a.some(this.props.store.molecularProfilesWithData.result,function(e){return e.molecularAlterationType===d.a.MUTATION_EXTENDED})}},{key:"profilesSelector",get:function(){return this.selectedGeneticEntity.isComplete&&this.selectedProfileX.isComplete&&this.selectedProfileY.isComplete&&this.xProfileOptions.isComplete&&this.yProfileOptions.isComplete&&this.props.store.coexpressionTabMolecularProfiles.isComplete&&this.isSelectedGeneticEntityAGeneSet.isComplete?r.createElement("div",null,r.createElement("div",{style:{float:"left",width:"100%",display:"flex",alignItems:"center"}},r.createElement("span",null,"Find"," ",Object(Mr.b)(this.props.store.coexpressionTabMolecularProfiles.result).length>0?"genes/genesets":"genes"," ","in"," "),r.createElement("div",{style:{display:"inline-block",width:376,marginLeft:4,marginRight:4,zIndex:10}},r.createElement(Pr.default,{name:"query-profile-select",value:this.selectedProfileY.result,onChange:this.onSelectProfileY,options:this.yProfileOptions.result,searchable:!1,clearable:!1,className:"coexpression-select-query-profile"})),r.createElement("span",null," ","that are correlated with"," ",this.selectedGeneticEntity.result.geneticEntityName," ","in"," "),r.createElement("div",{style:{display:"inline-block",width:376,marginLeft:4,marginRight:4,zIndex:15}},r.createElement(Pr.default,{name:"subject-profile-select",value:this.selectedProfileX.result,onChange:this.onSelectProfileX,options:this.xProfileOptions.result,searchable:!1,clearable:!1,disabled:this.isSelectedGeneticEntityAGeneSet.result,className:"coexpression-select-subject-profile"})))):r.createElement(st.a,{isLoading:!0,center:!0,size:"big"})}}])&&Ko(n.prototype,o),a&&Ko(n,a),t}();ti([p.observable.ref],oi.prototype,"_selectedProfileX",void 0),ti([p.observable.ref],oi.prototype,"_selectedProfileY",void 0),ti([p.observable],oi.prototype,"_selectedGeneticEntity",void 0),ti([p.observable],oi.prototype,"plotState",void 0),ti([Nr.bind],oi.prototype,"onSelectProfileX",null),ti([Nr.bind],oi.prototype,"onSelectProfileY",null),ti([Nr.bind],oi.prototype,"onSelectGeneticEntity",null),ti([p.computed],oi.prototype,"hasMutationData",null),ti([Nr.bind],oi.prototype,"header",null),ti([Nr.bind],oi.prototype,"geneTabs",null);var ii=oi=ti([u.observer],oi),ai=n(330),li=n(987),si=n(109),ci=n(985),ui=n(959),pi=n(178);function di(e,t){window&&(window[e]=t)}var fi=n(961),hi=n(71),mi=n(118),yi=n(1096),bi=n(1167),gi=n(1101),vi=n(1102),_i=n(120),wi=n(177),Oi=n(206),Si=n(160);function Ei(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ki(e){return(ki=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ci(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pi(e,t){return(Pi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ti(e){return(Ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var xi=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Ti(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ji=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function l(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,l)}s((r=r.apply(e,t||[])).next())})},Ai=function(e){function t(e,n,r){var o,a,l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,l=ki(t).call(this,e,n,r),o=!l||"object"!==Ti(l)&&"function"!=typeof l?Ci(a):l,Object.defineProperty(Ci(o),"urlWrapper",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(Ci(o),"resultsViewStore",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(Ci(o),"_originalGroups",{enumerable:!0,configurable:!0,writable:!0,value:Object(z.vb)({await:function(){return[o.resultsViewStore.comparisonTabGroups]},invoke:function(){var e=o.resultsViewStore.comparisonTabGroups.result;if(o.groupOrder){var t=Object(z.zb)(o.groupOrder);return Promise.resolve(i.a.sortBy(e,function(e){return Object($n.a)(t[e.name],Number.POSITIVE_INFINITY)}))}return Promise.resolve(e)}})}),Object.defineProperty(Ci(o),"nameToUserCreatedGroup",{enumerable:!0,configurable:!0,writable:!0,value:Object(z.vb)({await:function(){return[o._session]},invoke:function(){return Promise.resolve(i.a.keyBy(o._session.result.groups,function(e){return e.name}))}})}),Object(p.makeObservable)(Ci(o)),o}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pi(e,t)}(t,wi["b"]),n=t,(r=[{key:"updateOverlapStrategy",value:function(e){this.urlWrapper.updateURL({comparison_overlapStrategy:e})}},{key:"setUsePatientLevelEnrichments",value:function(e){this.resultsViewStore.setUsePatientLevelEnrichments(e)}},{key:"isGroupDeletable",value:function(e){return!!this.nameToUserCreatedGroup.isComplete&&e.name in this.nameToUserCreatedGroup.result}},{key:"updateSelectedGroups",value:function(e){this.urlWrapper.updateURL({comparison_selectedGroups:JSON.stringify(e)})}},{key:"isGroupSelected",value:function(e){return this.selectedGroups.includes(e)}},{key:"toggleGroupSelected",value:function(e){var t=this.selectedGroups.slice();t.includes(e)?t.splice(t.indexOf(e),1):t.push(e),this.updateSelectedGroups(t)}},{key:"selectAllGroups",value:function(){var e=this._originalGroups.result;this.updateSelectedGroups(e.map(function(e){return e.name}))}},{key:"deselectAllGroups",value:function(){this.updateSelectedGroups([])}},{key:"updateGroupOrder",value:function(e,t){var n=this.groupOrder;n||(n=this._originalGroups.result.map(function(e){return e.name}));var r=(n=n.slice()).splice(e,1)[0];n.splice(t,0,r),this.urlWrapper.updateURL({comparison_groupOrder:JSON.stringify(n)})}},{key:"saveAndGoToSession",value:function(e){return ji(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Si.a.addComparisonSession(e);case 2:n=t.sent,r=n.id,this.urlWrapper.updateURL({comparison_createdGroupsSessionId:r});case 5:case"end":return t.stop()}},t,this)}))}},{key:"overlapStrategy",get:function(){return this.urlWrapper.query.comparison_overlapStrategy||wi.a.EXCLUDE}},{key:"usePatientLevelEnrichments",get:function(){return this.resultsViewStore.usePatientLevelEnrichments}},{key:"_session",get:function(){return this.resultsViewStore.comparisonTabComparisonSession}},{key:"selectedGroups",get:function(){var e=this.urlWrapper.query.comparison_selectedGroups;return e?JSON.parse(e):[Oi.b,Oi.d]}},{key:"groupOrder",get:function(){var e=this.urlWrapper.query.comparison_groupOrder;return e?JSON.parse(e):void 0}},{key:"samples",get:function(){return this.resultsViewStore.samples}},{key:"studies",get:function(){return this.resultsViewStore.studies}}])&&Ei(n.prototype,r),o&&Ei(n,o),t}();xi([p.action],Ai.prototype,"updateOverlapStrategy",null),xi([p.computed],Ai.prototype,"overlapStrategy",null),xi([p.computed],Ai.prototype,"usePatientLevelEnrichments",null),xi([p.action.bound],Ai.prototype,"setUsePatientLevelEnrichments",null),xi([p.computed],Ai.prototype,"_session",null),xi([ot.default],Ai.prototype,"isGroupDeletable",null),xi([p.computed],Ai.prototype,"selectedGroups",null),xi([p.action],Ai.prototype,"updateSelectedGroups",null),xi([ot.default],Ai.prototype,"isGroupSelected",null),xi([p.action.bound],Ai.prototype,"toggleGroupSelected",null),xi([p.action.bound],Ai.prototype,"selectAllGroups",null),xi([p.action.bound],Ai.prototype,"deselectAllGroups",null),xi([p.computed],Ai.prototype,"groupOrder",null),xi([p.action],Ai.prototype,"updateGroupOrder",null),xi([p.action],Ai.prototype,"saveAndGoToSession",null);var Ii=n(44),Mi=n(1168),Di=n(331),Ni=n.n(Di),Ri=n(1161),Li=n(1104),Gi=n(1162),Vi=n(352),Bi=n(1169),Fi=n(1328),Hi=n.n(Fi),Ui=n(49);function Wi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qi(e){return(qi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ki(e,t){return(Ki=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qi(e){return(Qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Yi=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Qi(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Xi=function(e){function t(e){var n,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,a=qi(t).call(this,e),n=!a||"object"!==Qi(a)&&"function"!=typeof a?zi(o):a,Object.defineProperty(zi(n),"store",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(zi(n),"overlapStrategySelector",{enumerable:!0,configurable:!0,writable:!0,value:Object(mi.a)({await:function(){return[n.store.overlapComputations]},render:function(){if(n.store.overlapComputations.result.totalSampleOverlap||n.store.overlapComputations.result.totalPatientOverlap){var e="Include overlapping samples and patients",t="Exclude overlapping samples and patients";return r.createElement("div",{style:{minWidth:355,width:355,zIndex:20}},r.createElement(_i.default,{name:"select overlap strategy",onChange:function(e){e&&n.onOverlapStrategySelect(e)},options:[{label:e,value:wi.a.INCLUDE},{label:t,value:wi.a.EXCLUDE}],clearable:!1,searchable:!1,value:{label:n.store.overlapStrategy===wi.a.EXCLUDE?t:e,value:n.store.overlapStrategy}}))}return null}})}),Object.defineProperty(zi(n),"tabs",{enumerable:!0,configurable:!0,writable:!0,value:Object(mi.a)({await:function(){return[n.store._activeGroupsNotOverlapRemoved,n.store.activeGroups,n.store.mutationEnrichmentProfiles,n.store.structuralVariantEnrichmentProfiles,n.store.copyNumberEnrichmentProfiles,n.store.mRNAEnrichmentProfiles,n.store.proteinEnrichmentProfiles,n.store.methylationEnrichmentProfiles,n.store.survivalClinicalDataExists,n.store.genericAssayEnrichmentProfilesGroupedByGenericAssayType]},render:function(){return r.createElement(h.b,{unmountOnHide:!1,activeTabId:n.props.urlWrapper.comparisonSubTabId,onTabClick:n.props.urlWrapper.setComparisonSubTabId,className:"secondaryNavigation comparisonTabSubTabs"},r.createElement(h.a,{id:Ii.b.OVERLAP,linkText:"Overlap"},r.createElement(yi.a,{store:n.store})),n.store.showSurvivalTab&&r.createElement(h.a,{id:Ii.b.SURVIVAL,linkText:"Survival",anchorClassName:n.store.survivalTabUnavailable?"greyedOut":""},r.createElement(Mi.a,{store:n.store})),r.createElement(h.a,{id:Ii.b.CLINICAL,linkText:"Clinical",anchorClassName:n.store.clinicalTabUnavailable?"greyedOut":""},r.createElement(bi.a,{store:n.store})),n.store.showAlterationsTab&&r.createElement(h.a,{id:mn.c.ALTERATIONS,linkText:n.alterationEnrichmentTabName,anchorClassName:n.store.alterationsTabUnavailable?"greyedOut":""},n.store.activeGroups.isComplete&&n.store.activeGroups.result.length>1&&nt.b.serverConfig.skin_show_settings_menu&&r.createElement(Ui.a,{store:n.store,updateSelectedEnrichmentEventTypes:n.store.updateSelectedEnrichmentEventTypes})||r.createElement(Vi.a,{classNames:Hi.a.inlineAlterationTypeSelectorMenu,store:n.store,updateSelectedEnrichmentEventTypes:n.store.updateSelectedEnrichmentEventTypes,showMutations:n.store.hasMutationEnrichmentData,showCnas:n.store.hasCnaEnrichmentData,showStructuralVariants:n.store.hasStructuralVariantData}),r.createElement(Gi.a,{store:n.store,resultsViewStore:n.props.store})),n.store.showMRNATab&&r.createElement(h.a,{id:Ii.b.MRNA,linkText:"mRNA",anchorClassName:n.store.mRNATabUnavailable?"greyedOut":""},r.createElement(gi.a,{store:n.store,resultsViewMode:!0})),n.store.showProteinTab&&r.createElement(h.a,{id:Ii.b.PROTEIN,linkText:"Protein",anchorClassName:n.store.proteinTabUnavailable?"greyedOut":""},r.createElement(vi.a,{store:n.store,resultsViewMode:!0})),n.store.showMethylationTab&&r.createElement(h.a,{id:Ii.b.DNAMETHYLATION,linkText:"DNA Methylation",anchorClassName:n.store.methylationTabUnavailable?"greyedOut":""},r.createElement(Li.a,{store:n.store,resultsViewMode:!0})),n.store.showGenericAssayTab&&i.a.keys(n.store.genericAssayEnrichmentProfilesGroupedByGenericAssayType.result).map(function(e){return r.createElement(h.a,{id:"".concat(mn.c.GENERIC_ASSAY_PREFIX,"_").concat(e.toLowerCase()),linkText:Object(ao.n)(e),anchorClassName:n.store.genericAssayTabUnavailable?"greyedOut":""},r.createElement(Bi.a,{store:n.store,genericAssayType:e,resultsViewMode:!0}))}))},renderPending:function(){return r.createElement(st.a,{center:!0,isLoading:!0,size:"big"})},renderError:function(){return r.createElement(un.a,null)}})}),Object(p.makeObservable)(zi(n)),window.comparisonTab=zi(n),n.store=new Ai(n.props.appStore,n.props.urlWrapper,n.props.store),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ki(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentWillUnmount",value:function(){this.store&&this.store.destroy()}},{key:"onOverlapStrategySelect",value:function(e){Object(si.f)({category:"resultsView",action:"setComparisonTabOverlapStrategy",label:e.value}),this.store.updateOverlapStrategy(e.value)}},{key:"render",value:function(){return this.store?r.createElement("div",{"data-test":"ComparisonTabDiv"},r.createElement(st.a,{center:!0,isLoading:this.store.newSessionPending,size:"big"}),r.createElement("div",{className:"tabMessageContainer",style:{marginBottom:10}},r.createElement(rt.a,{className:"comparison-oql-status-banner",store:this.props.store,tabReflectsOql:!0}),r.createElement(it.a,{store:this.props.store}),r.createElement(lt.a,{store:this.props.store})),r.createElement("div",{style:{display:"flex",justifyContent:"space-between",paddingBottom:25}},r.createElement("div",{className:Ni.a.headerControls},r.createElement(Ri.a,{store:this.store,groupCollapseThreshold:40,isGroupDeletable:this.store.isGroupDeletable})),r.createElement("div",null,this.overlapStrategySelector.component)),this.tabs.component):null}},{key:"alterationEnrichmentTabName",get:function(){return Ii.a}}])&&Wi(n.prototype,o),a&&Wi(n,a),t}();Yi([p.observable.ref],Xi.prototype,"store",void 0),Yi([p.computed],Xi.prototype,"alterationEnrichmentTabName",null),Yi([p.action.bound],Xi.prototype,"onOverlapStrategySelect",null);var Zi=Xi=Yi([u.observer],Xi),Ji=n(835),$i=n(251),ea=n.n($i),ta=n(346);function na(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ra(e){return(ra=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ia(e,t){return(ia=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function aa(e){return(aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"initStore",function(){return sa});var la=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":aa(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};function sa(e,t){var n=new d.d(e,t);return di("resultsViewPageStore",n),Object(p.reaction)(function(){return[n.studyIds,n.oqlText]},function(){n.studyIds.isComplete&&n.oqlText&&Object(si.h)(n.studyIds.result,n.oqlText,n.hugoGeneSymbols,n.queriedVirtualStudies.result.length>0)}),n}function ca(e){l()("#oncoprint-result-tab").click(e)}var ua=function(e){function t(e){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,i=ra(t).call(this,e),n=!i||"object"!==aa(i)&&"function"!=typeof i?oa(o):i,Object.defineProperty(oa(n),"resultsViewPageStore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(oa(n),"urlWrapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(oa(n),"quickOQLQueryStore",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(oa(n),"showTabs",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(oa(n),"userMessages",{enumerable:!0,configurable:!0,writable:!0,value:Object(z.vb)({await:function(){return[n.resultsViewPageStore.expressionProfiles,n.resultsViewPageStore.studies]},invoke:function(){return n.resultsViewPageStore.expressionProfiles.result.length>0&&n.resultsViewPageStore.studies.result.length>1?Promise.resolve([{dateEnd:1e19,content:r.createElement("span",null,"Looking for the ",r.createElement("strong",null,"Expression")," tab?"," ","That functionality is now available"," ",r.createElement("a",{style:{color:"white",textDecoration:"underline"},onClick:function(){return n.urlWrapper.updateURL({},"results/".concat(mn.d.EXPRESSION_REDIRECT))}},"in the ",r.createElement("strong",null,"Plots")," tab.")),id:"2020_merge_expression_to_plots"}]):Promise.resolve([])}})}),Object(p.makeObservable)(oa(n)),n.urlWrapper=new pi.b(e.routing),Object(hi.d)(n.urlWrapper),Object(hi.f)(n.urlWrapper),di("urlWrapper",n.urlWrapper),n.urlWrapper.hasSessionId?Object(cn.a)(n.urlWrapper.remoteSessionData,function(){n.resultsViewPageStore=sa(e.appStore,n.urlWrapper)}):n.resultsViewPageStore=sa(e.appStore,n.urlWrapper),n}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ia(e,t)}(t,r["Component"]),n=t,(i=[{key:"customTabCallback",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(li.a)(e,t,Object(z.eb)().location.href,this.resultsViewPageStore,n)}},{key:"componentWillUnmount",value:function(){this.resultsViewPageStore.destroy(),this.urlWrapper.destroy()}},{key:"evaluateTabInclusion",value:function(e){var t=nt.b.serverConfig.disabled_tabs||"",n=Object(mn.g)(t).includes(e.id),r=this.resultsViewPageStore.tabId===e.id,o=!!e.hide&&e.hide();return r||!n&&!o}},{key:"handleQuickOQLSubmission",value:function(){this.quickOQLQueryStore.submit(),this.showOQLEditor=!1}},{key:"toggleOQLEditor",value:function(){this.showOQLEditor=!this.showOQLEditor}},{key:"getTabHref",value:function(e){return c.a.format({pathname:e,query:this.props.routing.query,hash:this.props.routing.location.hash})}},{key:"render",value:function(){var e=this;return this.urlWrapper.isTemporarySessionPendingSave||this.urlWrapper.isLoadingSession||!this.resultsViewPageStore.studies.isComplete?r.createElement(st.a,{isLoading:!0,center:!0,noFade:!0,size:"big"}):this.resultsViewPageStore.studies.isComplete&&!this.resultsViewPageStore.tabId?(setTimeout(function(){e.resultsViewPageStore.handleTabChange(e.resultsViewPageStore.tabId,!0)}),null):r.createElement(Cr.a,{noMargin:!0,hideFooter:!0,className:"subhead-dark"},this.pageContent)}},{key:"tabs",get:function(){var e=this,t=this.resultsViewPageStore,n=[{id:mn.d.ONCOPRINT,getTab:function(){return r.createElement(h.a,{key:0,id:mn.d.ONCOPRINT,linkText:"OncoPrint"},r.createElement(Sr,{divId:"oncoprintDiv",store:t,urlWrapper:t.urlWrapper,key:t.hugoGeneSymbols.join(","),addOnBecomeVisibleListener:ca}))}},{id:mn.d.CANCER_TYPES_SUMMARY,getTab:function(){return r.createElement(h.a,{key:1,id:mn.d.CANCER_TYPES_SUMMARY,linkText:"Cancer Types Summary"},r.createElement(f.b,{store:t}))}},{id:mn.d.MUTUAL_EXCLUSIVITY,getTab:function(){return r.createElement(h.a,{key:5,id:mn.d.MUTUAL_EXCLUSIVITY,linkText:"Mutual Exclusivity"},r.createElement(gt.a,{store:t,isSampleAlteredMap:t.isSampleAlteredMap}))},hide:function(){return!e.resultsViewPageStore.isSampleAlteredMap.isComplete||o.size(e.resultsViewPageStore.isSampleAlteredMap.result)<2}},{id:mn.d.PLOTS,getTab:function(){return r.createElement(h.a,{key:12,id:mn.d.PLOTS,linkText:"Plots"},r.createElement(kr.h,{store:t,urlWrapper:e.urlWrapper}))}},{id:mn.d.MUTATIONS,getTab:function(){return r.createElement(h.a,{key:3,id:mn.d.MUTATIONS,linkText:"Mutations"},r.createElement(bt,{store:t,appStore:e.props.appStore,urlWrapper:e.urlWrapper}))}},{id:mn.d.COEXPRESSION,hide:function(){if(e.resultsViewPageStore.isThereDataForCoExpressionTab.isComplete&&e.resultsViewPageStore.studies.isComplete){var t=e.resultsViewPageStore.studies.result.length>1,n=!e.resultsViewPageStore.isThereDataForCoExpressionTab.result;return t||n}return!0},getTab:function(){return r.createElement(h.a,{key:7,id:mn.d.COEXPRESSION,linkText:"Co-expression"},r.createElement(ii,{store:t}))}},{id:mn.d.COMPARISON,hide:function(){return e.resultsViewPageStore.survivalClinicalDataExists.isPending},getTab:function(){var t=e.resultsViewPageStore.survivalClinicalDataExists.result?"Comparison/Survival":"Comparison";return r.createElement(h.a,{key:10,id:mn.d.COMPARISON,linkText:t},r.createElement(Zi,{urlWrapper:e.urlWrapper,appStore:e.props.appStore,store:e.resultsViewPageStore}))}},{id:mn.d.CN_SEGMENTS,hide:function(){return!(e.resultsViewPageStore.studies.isComplete&&e.resultsViewPageStore.genes.isComplete&&e.resultsViewPageStore.referenceGenes.isComplete&&Object(wt.k)(e.resultsViewPageStore.samples.result))},getTab:function(){return r.createElement(h.a,{key:6,id:mn.d.CN_SEGMENTS,linkText:"CN Segments",className:"cnSegmentsMSKTab"},r.createElement(Ln,{store:t}))}},{id:mn.d.NETWORK,hide:function(){return!0},getTab:function(){return r.createElement(h.a,{key:9,id:mn.d.NETWORK,linkText:"Network"},r.createElement("div",{className:"alert alert-info"},"The Network tab has been retired. For similar functionality, please visit"," ",r.createElement("a",{href:"http://www.pathwaycommons.org/pcviz/",target:"_blank"},"http://www.pathwaycommons.org/pcviz/")))}},{id:mn.d.PATHWAY_MAPPER,hide:function(){return"Internet Explorer"===ea.a.name||!nt.b.serverConfig.show_pathway_mapper||!e.resultsViewPageStore.studies.isComplete},getTab:function(){var n=t.filteredSequencedSampleKeysByGene.isComplete&&t.oqlFilteredCaseAggregatedDataByOQLLine.isComplete&&t.genes.isComplete&&t.samples.isComplete&&t.patients.isComplete&&t.coverageInformation.isComplete&&t.filteredSequencedSampleKeysByGene.isComplete&&t.filteredSequencedPatientKeysByGene.isComplete&&t.selectedMolecularProfiles.isComplete&&t.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine.isComplete;return r.createElement(h.a,{key:13,id:mn.d.PATHWAY_MAPPER,linkText:"Pathways"},n?r.createElement(Xn,{store:t,appStore:e.props.appStore,urlWrapper:e.urlWrapper}):r.createElement(st.a,{isLoading:!0,size:"big",center:!0}))}},{id:mn.d.DOWNLOAD,getTab:function(){return r.createElement(h.a,{key:11,id:mn.d.DOWNLOAD,linkText:"Download"},r.createElement(En,{store:t}))}}].filter(this.evaluateTabInclusion).map(function(e){return e.getTab()});if(nt.b.serverConfig.custom_tabs){var i=nt.b.serverConfig.custom_tabs.filter(function(e){return"RESULTS_PAGE"===e.location}).map(function(t,n){return r.createElement(h.a,{key:100+n,id:"customTab"+n,unmountOnHide:!0===t.unmountOnHide,onTabDidMount:function(n){e.customTabCallback(n,t)},onTabUnmount:function(n){e.customTabCallback(n,t,!0)},linkText:t.title})});n=n.concat(i)}return n}},{key:"quickOQLSubmitButton",get:function(){if(this.quickOQLQueryStore)return r.createElement(r.Fragment,null,r.createElement("button",{className:"btn btn-primary btn-sm","data-test":"oqlQuickEditSubmitButton",style:{marginLeft:10},onClick:this.handleQuickOQLSubmission,disabled:!this.quickOQLQueryStore.submitEnabled},"Submit Query")," ",r.createElement("button",{className:"btn btn-link btn-sm",onClick:this.toggleOQLEditor},"Cancel"))}},{key:"showOQLEditor",get:function(){return!!this.quickOQLQueryStore},set:function(e){this.quickOQLQueryStore=e?Object(fi.a)(this.urlWrapper.query,this.urlWrapper,!1):null}},{key:"pageContent",get:function(){var e=this;if(this.resultsViewPageStore.invalidStudyIds.result.length>0)return r.createElement("div",null,r.createElement("div",{className:"headBlock"}),r.createElement(ci.a,{forkedMode:!1,showQuickSearchTab:!1,showDownloadTab:!1,showAlerts:!0,getQueryStore:function(){return Object(fi.a)(e.urlWrapper.query,e.urlWrapper)}}));var t=this.showTabs&&!this.resultsViewPageStore.genesInvalid&&!this.resultsViewPageStore.isQueryInvalid&&this.resultsViewPageStore.customDriverAnnotationReport.isComplete;return r.createElement(r.Fragment,null,this.resultsViewPageStore.isQueryInvalid&&r.createElement("div",{className:"alert alert-danger queryInvalid",style:{marginBottom:"40px"},role:"alert"},r.createElement(ui.a,{sampleCount:this.resultsViewPageStore.samples.result.length,queryProductLimit:nt.b.serverConfig.query_product_limit,email:nt.b.serverConfig.skin_email_contact})),this.userMessages.isComplete&&this.userMessages.result.length>0&&r.createElement(ta.a,{messages:this.userMessages.result}),(this.resultsViewPageStore.studies.isPending||!t&&!this.resultsViewPageStore.queryFormVisible)&&r.createElement(st.a,{isLoading:!0,center:!0,noFade:!0,size:"big"}),this.resultsViewPageStore.studies.isComplete&&r.createElement(r.Fragment,null,r.createElement(ai.b,null,r.createElement("title",null,Object(wt.f)(this.resultsViewPageStore.hugoGeneSymbols,this.resultsViewPageStore.studies.result))),r.createElement("div",null,r.createElement("div",{className:"headBlock"},r.createElement(Er.a,{routingStore:this.props.routing,store:this.resultsViewPageStore,onToggleQueryFormVisibility:function(t){Object(p.runInAction)(function(){e.showTabs=t,e.showOQLEditor=!1})},onToggleOQLEditUIVisibility:this.toggleOQLEditor}),this.showOQLEditor&&r.createElement("div",{className:"quick_oql_edit"},r.createElement(Ji.b,{validateInputGeneQuery:!0,inputGeneQuery:this.quickOQLQueryStore.geneQuery,callback:function(){e.quickOQLQueryStore.geneQuery=arguments.length<=2?void 0:arguments[2]},location:Ji.a.DEFAULT,submitButton:this.quickOQLSubmitButton,error:this.quickOQLQueryStore.submitError,messages:this.quickOQLQueryStore.oqlMessages}))),t&&r.createElement(h.b,{key:this.urlWrapper.hash,activeTabId:this.resultsViewPageStore.tabId,unmountOnHide:!1,onTabClick:function(t){return e.resultsViewPageStore.handleTabChange(t)},className:"mainTabs",getTabHref:this.getTabHref},this.tabs))))}}])&&na(n.prototype,i),a&&na(n,a),t}();la([p.observable.ref],ua.prototype,"quickOQLQueryStore",void 0),la([p.observable],ua.prototype,"showTabs",void 0),la([ot.default],ua.prototype,"customTabCallback",null),la([p.computed],ua.prototype,"tabs",null),la([ot.default],ua.prototype,"evaluateTabInclusion",null),la([p.computed],ua.prototype,"quickOQLSubmitButton",null),la([p.computed],ua.prototype,"showOQLEditor",null),la([p.action.bound],ua.prototype,"handleQuickOQLSubmission",null),la([p.action.bound],ua.prototype,"toggleOQLEditor",null),la([ot.default],ua.prototype,"getTabHref",null),la([p.computed],ua.prototype,"pageContent",null),ua=la([Object(u.inject)("appStore","routing"),u.observer],ua);t.default=ua},801:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__1P_Zv",framedImage:"styles-module__framedImage__1iqVk",QueryAndDownloadTabs:"styles-module__QueryAndDownloadTabs__ivykJ",QueryContainer:"styles-module__QueryContainer__2cy7B",forkedButtons:"styles-module__forkedButtons__2ctM7",errorMessage:"styles-module__errorMessage__32yZg",oqlMessage:"styles-module__oqlMessage__3xhe8",CancerStudySelector:"styles-module__CancerStudySelector__1FU50",MolecularProfileSelector:"styles-module__MolecularProfileSelector__rlomm",DataTypePrioritySelector:"styles-module__DataTypePrioritySelector__1_VUf",CaseSetSelector:"styles-module__CaseSetSelector__YteFo",StudySelection:"styles-module__StudySelection__3booh",GeneSetSelector:"styles-module__GeneSetSelector__2DY1b",icon:"styles-module__icon__1E8Oh",geneCount:"styles-module__geneCount__3cB9u",SelectedStudiesWindow:"styles-module__SelectedStudiesWindow__NAG6X",CancerStudySelectorHeader:"styles-module__CancerStudySelectorHeader__D2N40",selectAll:"styles-module__selectAll__sQO_b",noData:"styles-module__noData__3J5xx",selectedCount:"styles-module__selectedCount__TRoaE",selectionsExist:"styles-module__selectionsExist__1icpM",cancerStudySelectorBody:"styles-module__cancerStudySelectorBody__2BfDm",cancerTypeListContainer:"styles-module__cancerTypeListContainer__rnSbV",cancerStudyListContainer:"styles-module__cancerStudyListContainer__356jB",cancerTypeList:"styles-module__cancerTypeList__ouFgb",cancerTypeListItemLabel:"styles-module__cancerTypeListItemLabel__31N8Y",cancerTypeListItemCount:"styles-module__cancerTypeListItemCount__1HB2c",selectable:"styles-module__selectable__3NCiW",selected:"styles-module__selected__Zy9_9",matchingNodeText:"styles-module__matchingNodeText__3lV9e",nonMatchingNodeText:"styles-module__nonMatchingNodeText__1l5PU",containsSelectedStudies:"styles-module__containsSelectedStudies__20v-B",searchTextInput:"styles-module__searchTextInput__1VIxV",group:"styles-module__group__Cs8DR",zScore:"styles-module__zScore__23rtN",infoIcon:"styles-module__infoIcon__zMiog",profileName:"styles-module__profileName__1fbIy",DataTypePriorityLabel:"styles-module__DataTypePriorityLabel__21k9z",radioRow:"styles-module__radioRow__1G_fF",buttonRow:"styles-module__buttonRow__51RtG",geneSet:"styles-module__geneSet__Ra6KD",notEmpty:"styles-module__notEmpty__23mDp",GeneSymbolValidator:"styles-module__GeneSymbolValidator__ZK8rf",pendingMessage:"styles-module__pendingMessage__2jgIM",oqlNotice:"styles-module__oqlNotice__1tycm",validBubble:"styles-module__validBubble__QCGq3",invalidBubble:"styles-module__invalidBubble__1gB6Z",suggestionBubble:"styles-module__suggestionBubble__aRL1R",noChoiceLabel:"styles-module__noChoiceLabel__2GF5_",singleChoiceLabel:"styles-module__singleChoiceLabel__2wdqL",multiChoiceLabel:"styles-module__multiChoiceLabel__19sFa",MutSigGeneSelectorWindow:"styles-module__MutSigGeneSelectorWindow__1Uiku",MutSigGeneSelector:"styles-module__MutSigGeneSelector__25hKH",selectionColumnHeader:"styles-module__selectionColumnHeader__2MSUO",selectionColumnCell:"styles-module__selectionColumnCell__3RJ8f",selectButton:"styles-module__selectButton__2dXHK",GisticGeneSelectorWindow:"styles-module__GisticGeneSelectorWindow__1J2UG",GisticGeneSelector:"styles-module__GisticGeneSelector__U5Lb9",header:"styles-module__header__3cqyY",amp:"styles-module__amp__1zeIe",del:"styles-module__del__1_otl",gisticTable:"styles-module__gisticTable__2fquv",GisticGeneToggles:"styles-module__GisticGeneToggles__1aR6k",someGenes:"styles-module__someGenes__J-RhD",moreGenes:"styles-module__moreGenes__2gVF_",geneToggle:"styles-module__geneToggle__EGiaB",simulateHovered:"styles-module__simulateHovered__3IL_G",notSelected:"styles-module__notSelected__3-Rmx",showMoreLess:"styles-module__showMoreLess__3Ef4J",GenesetsSelectorWindow:"styles-module__GenesetsSelectorWindow__NTbph",GenesetsFormGroup:"styles-module__GenesetsFormGroup__1uJYh",GenesetsVolcanoSelectorWindow:"styles-module__GenesetsVolcanoSelectorWindow__w4nHP",GenesetsSelectionArea:"styles-module__GenesetsSelectionArea__3ebp-",transposeDataMatrix:"styles-module__transposeDataMatrix__YP_NR",submitRow:"styles-module__submitRow__k2sC8",genomeSpace:"styles-module__genomeSpace__2augo",tooltip:"styles-module__tooltip__ux3KI",learnOql:"styles-module__learnOql__1Aj5I",quickSelect:"styles-module__quickSelect__3ZhaC",studyName:"styles-module__studyName__2iQkr"}},802:function(e,t,n){e.exports=n(35)(6)},804:function(e,t,n){"use strict";n.d(t,"a",function(){return E}),n.d(t,"b",function(){return k});var r=n(0),o=n(1),i=n(5),a=n.n(i),l=(n(886),n(12)),s=n(72),c=n(2),u=n(9),p=n(866);function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}function m(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?b(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var w,O=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":_(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},S=function(e){function t(e){var n;return d(this,t),n=m(this,y(t).call(this,e)),Object.defineProperty(b(n),"renderedOnce",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object(c.makeObservable)(b(n)),n}return g(t,r["Component"]),h(t,[{key:"render",value:function(){var e=this;return this.renderedOnce||setTimeout(function(){return e.renderedOnce=!0}),r.createElement("div",{className:this.props.className},this.renderedOnce&&this.props.children,!this.renderedOnce&&(this.props.loadingState||null))}}]),t}();O([c.observable],S.prototype,"renderedOnce",void 0),S=O([u.observer],S);var E=function(e){function t(){var e;return d(this,t),e=m(this,y(t).apply(this,arguments)),Object.defineProperty(b(e),"div",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return g(t,r["Component"]),h(t,[{key:"componentDidMount",value:function(){this.props.onTabDidMount&&this.props.onTabDidMount(this.div)}},{key:"componentWillUnmount",value:function(){this.props.onTabUnmount&&this.props.onTabUnmount(this.div)}},{key:"assignRef",value:function(e){this.div=e}},{key:"render",value:function(){var e=this;return r.createElement("div",{ref:function(t){return e.div=t},className:a()({"msk-tab":!0,hiddenByPosition:!!this.props.inactive},this.props.className)},this.props.children)}}]),t}();O([l.default],E.prototype,"assignRef",null);var k=w=function(e){function t(e){var n;return d(this,t),n=m(this,y(t).call(this,e)),Object.defineProperty(b(n),"currentPage",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(b(n),"pageBreaks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(b(n),"shownTabs",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(b(n),"navTabsRef",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(b(n),"tabRefs",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(b(n),"tabIdToNavTabWidth",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(b(n),"needToRecomputeNavTabWidths",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(b(n),"widthReaction",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(b(n),"tabClickHandlers",{enumerable:!0,configurable:!0,writable:!0,value:Object(p.a)(function(e,t){e.preventDefault(),n.setActiveTab(t.id,t.datum)})}),Object(c.makeObservable)(b(n)),n}return g(t,r["Component"]),h(t,[{key:"cloneTab",value:function(e,t,n){return n?r.cloneElement(e,{inactive:t},this.props.loadingComponent):r.cloneElement(e,{inactive:t})}},{key:"setActiveTab",value:function(e,t){this.props.onTabClick&&this.props.onTabClick(e,t)}},{key:"navTabsRefHandler",value:function(e){this.navTabsRef=e}},{key:"tabRefHandler",value:function(e,t){e&&t&&this.tabRefs.push({id:e,element:t})}},{key:"nextPage",value:function(){this.currentPage+=1}},{key:"prevPage",value:function(){this.currentPage-=1}},{key:"render",value:function(){var e=this;if(this.props.children&&r.Children.count(this.props.children)){var t,n=this.props.children,i=r.Children.toArray(n),l=e.props.activeTabId&&o.some(i,function(t){return t.props.id===e.props.activeTabId})?e.props.activeTabId:i[0].props.id;return t=o.reduce(i,function(t,n){return n.props.hide||(n.props.id===l?(e.shownTabs.push(n.props.id),t.push(e.cloneTab(n,!1))):(!1===n.props.unmountOnHide||void 0===n.props.unmountOnHide&&!1===e.props.unmountOnHide)&&o.includes(e.shownTabs,n.props.id)&&t.push(e.cloneTab(n,!0))),t},[]),r.createElement("div",{id:this.props.id?this.props.id:"",className:a()("msk-tabs","posRelative",this.props.className)},this.navTabs(n,l),r.createElement(S,{className:"tab-content",loadingState:r.createElement(s.a,{isLoading:!0,center:!0,size:"big"})},t))}return null}},{key:"navTabs",value:function(e,t){this.tabRefs=[];var n=this.tabPages(e,t),o=this.pageBreaks.length+1,i=this.currentPage>1?r.createElement("li",{key:"prevPage",style:{cursor:"pointer"}},r.createElement("a",{onClick:this.prevPage.bind(this)},r.createElement("i",{className:"fa fa-chevron-left",style:this.props.arrowStyle}))):null,l=this.currentPage<o?r.createElement("li",{key:"nextPage",style:{cursor:"pointer"}},r.createElement("a",{onClick:this.nextPage.bind(this)},r.createElement("i",{className:"fa fa-chevron-right",style:this.props.arrowStyle}))):null,s=this.props.tabButtonStyle||"tabs";return r.createElement("ul",{ref:this.navTabsRefHandler.bind(this),className:a()("nav","nav-".concat(s))},i,n[this.currentPage-1],l)}},{key:"tabPages",value:function(e,t){var n=this,o=[[]],i=1;return r.Children.forEach(e,function(e){if(e&&!e.props.hide){var l=t===e.props.id?"active":"";n.props.getPaginationWidth&&n.pageBreaks.length>0&&n.pageBreaks[i-1]===e.props.id&&(o[++i-1]=[]);var s=null;if(e.props.onClickClose){var c=e.props.onClickClose;s=r.createElement("div",{className:"closeButton",onClick:function(t){t.stopPropagation(),c(e.props.id)}},r.createElement("i",{className:"fa fa-md fa-times-circle"}))}o[i-1].push(r.createElement("li",{key:e.props.id,style:{cursor:"pointer"},ref:n.tabRefHandler.bind(n,e.props.id),className:l},r.createElement("a",{className:a()("tabAnchor","tabAnchor_".concat(e.props.id),e.props.anchorClassName),onClick:n.tabClickHandlers(e.props),href:n.props.getTabHref&&n.props.getTabHref(e.props.id),style:e.props.anchorStyle},e.props.linkText,s)))}}),o}},{key:"componentWillReceiveProps",value:function(e){o.isEqual(w.getVisibleTabIds(e.children),w.getVisibleTabIds(this.props.children))||(this.needToRecomputeNavTabWidths=!0)}},{key:"componentDidMount",value:function(){var e=this;this.computeNavTabWidths(),this.needToRecomputeNavTabWidths=!1,this.widthReaction=Object(c.autorun)(function(){e.props.getPaginationWidth&&(e.props.getPaginationWidth(),e.initPaging())})}},{key:"componentWillUnmount",value:function(){this.widthReaction()}},{key:"componentDidUpdate",value:function(){this.needToRecomputeNavTabWidths&&(this.computeNavTabWidths(),this.needToRecomputeNavTabWidths=!1,this.initPaging())}},{key:"computeNavTabWidths",value:function(){var e=this;o.each(this.tabRefs,function(t){e.tabIdToNavTabWidth[t.id]=t.element.offsetWidth}),window.test=this.tabIdToNavTabWidth}},{key:"initPaging",value:function(){this.props.getPaginationWidth&&(this.pageBreaks=this.findPageBreaks(),this.currentPage=this.findCurrentPage(this.pageBreaks))}},{key:"findCurrentPage",value:function(e){var t=this,n=1,r=!1;return this.props.activeTabId&&e.length>0&&o.each(this.tabRefs,function(o){if(o.id===e[n-1]&&n++,o.id===t.props.activeTabId)return r=!0,!1}),r?n:1}},{key:"findPageBreaks",value:function(){var e=this,t=[];if(this.needToRecomputeNavTabWidths)return[];var n=this.props.getPaginationWidth&&this.props.getPaginationWidth()||0;if(n>0){var o=0;r.Children.forEach(this.props.children,function(r,i){if(r&&r.props.id in e.tabIdToNavTabWidth&&(o+=e.tabIdToNavTabWidth[r.props.id],0!==i)){o>n-50&&(t.push(r.props.id),o=e.tabIdToNavTabWidth[r.props.id])}})}return t}}],[{key:"getVisibleTabIds",value:function(e){return r.Children.map(e,function(e){return e&&!e.props.hide?e.props.id:null}).filter(function(e){return null!==e})}}]),t}();Object.defineProperty(k,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{unmountOnHide:!0,loadingComponent:r.createElement(s.a,{isLoading:!0,center:!0,size:"big"})}}),O([c.observable],k.prototype,"currentPage",void 0),O([c.observable],k.prototype,"pageBreaks",void 0),O([c.action],k.prototype,"nextPage",null),O([c.action],k.prototype,"prevPage",null),O([c.action.bound],k.prototype,"initPaging",null),k=w=O([u.observer],k)},806:function(e,t,n){"use strict";function r(e){try{return h.insertRule(e,h.cssRules.length)}catch(e){console.warn("react-reveal - animation failed")}}function o(){u||(t.globalHide=u=!0,window.removeEventListener("scroll",o,!0),r("."+i+" { opacity: 0; }"),window.removeEventListener("orientationchange",o,!0),window.document.removeEventListener("visibilitychange",o))}Object.defineProperty(t,"__esModule",{value:!0}),t.insertRule=r,t.cascade=function(e,t,n,r,o){var i=Math.log(r),a=(Math.log(o)-i)/(n-t);return Math.exp(i+a*(e-t))},t.animation=function(e){if(!h)return"";var t="@keyframes "+(m+d)+"{"+e+"}",n=f[e];return n?""+m+n:(h.insertRule(t,h.cssRules.length),f[e]=d,""+m+d++)},t.hideAll=o,t.default=function(e){var n=e.ssrFadeout;t.fadeOutEnabled=n};var i=t.namespace="react-reveal",a=(t.defaults={duration:1e3,delay:0,count:1},t.ssr=!0),l=t.observerMode=!1,s=t.raf=function(e){return window.setTimeout(e,66)},c=t.disableSsr=function(){return t.ssr=a=!1},u=(t.fadeOutEnabled=!1,t.ssrFadeout=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t.fadeOutEnabled=e},t.globalHide=!1),p=(t.ie10=!1,t.collapseend=void 0),d=1,f={},h=!1,m=i+"-"+Math.floor(1e15*Math.random())+"-";if("undefined"!=typeof window&&"nodejs"!==window.name&&window.document&&"undefined"!=typeof navigator){t.observerMode=l="IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype&&/\{\s*\[native code\]\s*\}/.test(""+IntersectionObserver),t.raf=s=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||s,t.ssr=a=window.document.querySelectorAll("div[data-reactroot]").length>0,-1!==navigator.appVersion.indexOf("MSIE 10")&&(t.ie10=!0),a&&"performance"in window&&"timing"in window.performance&&"domContentLoadedEventEnd"in window.performance.timing&&window.performance.timing.domLoading&&Date.now()-window.performance.timing.domLoading<300&&(t.ssr=a=!1),a&&window.setTimeout(c,1500),l||(t.collapseend=p=document.createEvent("Event"),p.initEvent("collapseend",!0,!0));var y=document.createElement("style");document.head.appendChild(y),y.sheet&&y.sheet.cssRules&&y.sheet.insertRule&&(h=y.sheet,window.addEventListener("scroll",o,!0),window.addEventListener("orientationchange",o,!0),window.document.addEventListener("visibilitychange",o))}},808:function(e,t,n){"use strict";n.r(t);var r="http://www.w3.org/1999/xhtml",o={svg:"http://www.w3.org/2000/svg",xhtml:r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},i=function(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),o.hasOwnProperty(t)?{space:o[t],local:e}:e};var a=function(e){var t=i(e);return(t.local?function(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}:function(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===r&&t.documentElement.namespaceURI===r?t.createElement(e):t.createElementNS(n,e)}})(t)};function l(){}var s=function(e){return null==e?l:function(){return this.querySelector(e)}};function c(){return[]}var u=function(e){return null==e?c:function(){return this.querySelectorAll(e)}},p=function(e){return function(){return this.matches(e)}},d=function(e){return new Array(e.length)};function f(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}f.prototype={constructor:f,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var h="$";function m(e,t,n,r,o,i){for(var a,l=0,s=t.length,c=i.length;l<c;++l)(a=t[l])?(a.__data__=i[l],r[l]=a):n[l]=new f(e,i[l]);for(;l<s;++l)(a=t[l])&&(o[l]=a)}function y(e,t,n,r,o,i,a){var l,s,c,u={},p=t.length,d=i.length,m=new Array(p);for(l=0;l<p;++l)(s=t[l])&&(m[l]=c=h+a.call(s,s.__data__,l,t),c in u?o[l]=s:u[c]=s);for(l=0;l<d;++l)(s=u[c=h+a.call(e,i[l],l,i)])?(r[l]=s,s.__data__=i[l],u[c]=null):n[l]=new f(e,i[l]);for(l=0;l<p;++l)(s=t[l])&&u[m[l]]===s&&(o[l]=s)}function b(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}var g=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView};function v(e,t){return e.style.getPropertyValue(t)||g(e).getComputedStyle(e,null).getPropertyValue(t)}function _(e){return e.trim().split(/^|\s+/)}function w(e){return e.classList||new O(e)}function O(e){this._node=e,this._names=_(e.getAttribute("class")||"")}function S(e,t){for(var n=w(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function E(e,t){for(var n=w(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}O.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function k(){this.textContent=""}function C(){this.innerHTML=""}function P(){this.nextSibling&&this.parentNode.appendChild(this)}function T(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function x(){return null}function j(){var e=this.parentNode;e&&e.removeChild(this)}function A(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function I(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}var M={},D=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(M={mouseenter:"mouseover",mouseleave:"mouseout"}));function N(e,t,n){return e=R(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function R(e,t,n){return function(r){var o=D;D=r;try{e.call(this,this.__data__,t,n)}finally{D=o}}}function L(e){return function(){var t=this.__on;if(t){for(var n,r=0,o=-1,i=t.length;r<i;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++o]=n:this.removeEventListener(n.type,n.listener,n.capture);++o?t.length=o:delete this.__on}}}function G(e,t,n){var r=M.hasOwnProperty(e.type)?N:R;return function(o,i,a){var l,s=this.__on,c=r(t,i,a);if(s)for(var u=0,p=s.length;u<p;++u)if((l=s[u]).type===e.type&&l.name===e.name)return this.removeEventListener(l.type,l.listener,l.capture),this.addEventListener(l.type,l.listener=c,l.capture=n),void(l.value=t);this.addEventListener(e.type,c,n),l={type:e.type,name:e.name,value:t,listener:c,capture:n},s?s.push(l):this.__on=[l]}}function V(e,t,n,r){var o=D;e.sourceEvent=D,D=e;try{return t.apply(n,r)}finally{D=o}}function B(e,t,n){var r=g(e),o=r.CustomEvent;"function"==typeof o?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}var F=[null];function H(e,t){this._groups=e,this._parents=t}function U(){return new H([[document.documentElement]],F)}H.prototype=U.prototype={constructor:H,select:function(e){"function"!=typeof e&&(e=s(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i,a,l=t[o],c=l.length,u=r[o]=new Array(c),p=0;p<c;++p)(i=l[p])&&(a=e.call(i,i.__data__,p,l))&&("__data__"in i&&(a.__data__=i.__data__),u[p]=a);return new H(r,this._parents)},selectAll:function(e){"function"!=typeof e&&(e=u(e));for(var t=this._groups,n=t.length,r=[],o=[],i=0;i<n;++i)for(var a,l=t[i],s=l.length,c=0;c<s;++c)(a=l[c])&&(r.push(e.call(a,a.__data__,c,l)),o.push(a));return new H(r,o)},filter:function(e){"function"!=typeof e&&(e=p(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i,a=t[o],l=a.length,s=r[o]=[],c=0;c<l;++c)(i=a[c])&&e.call(i,i.__data__,c,a)&&s.push(i);return new H(r,this._parents)},data:function(e,t){if(!e)return h=new Array(this.size()),u=-1,this.each(function(e){h[++u]=e}),h;var n,r=t?y:m,o=this._parents,i=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var a=i.length,l=new Array(a),s=new Array(a),c=new Array(a),u=0;u<a;++u){var p=o[u],d=i[u],f=d.length,h=e.call(p,p&&p.__data__,u,o),b=h.length,g=s[u]=new Array(b),v=l[u]=new Array(b);r(p,d,g,v,c[u]=new Array(f),h,t);for(var _,w,O=0,S=0;O<b;++O)if(_=g[O]){for(O>=S&&(S=O+1);!(w=v[S])&&++S<b;);_._next=w||null}}return(l=new H(l,o))._enter=s,l._exit=c,l},enter:function(){return new H(this._enter||this._groups.map(d),this._parents)},exit:function(){return new H(this._exit||this._groups.map(d),this._parents)},join:function(e,t,n){var r=this.enter(),o=this,i=this.exit();return r="function"==typeof e?e(r):r.append(e+""),null!=t&&(o=t(o)),null==n?i.remove():n(i),r&&o?r.merge(o).order():o},merge:function(e){for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),a=new Array(r),l=0;l<i;++l)for(var s,c=t[l],u=n[l],p=c.length,d=a[l]=new Array(p),f=0;f<p;++f)(s=c[f]||u[f])&&(d[f]=s);for(;l<r;++l)a[l]=t[l];return new H(a,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,o=e[t],i=o.length-1,a=o[i];--i>=0;)(r=o[i])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=b);for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var a,l=n[i],s=l.length,c=o[i]=new Array(s),u=0;u<s;++u)(a=l[u])&&(c[u]=a);c.sort(t)}return new H(o,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length;o<i;++o){var a=r[o];if(a)return a}return null},size:function(){var e=0;return this.each(function(){++e}),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o,i=t[n],a=0,l=i.length;a<l;++a)(o=i[a])&&e.call(o,o.__data__,a,i);return this},attr:function(e,t){var n=i(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}}:"function"==typeof t?n.local?function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}:function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}:n.local?function(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}:function(e,t){return function(){this.setAttribute(e,t)}})(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?function(e){return function(){this.style.removeProperty(e)}}:"function"==typeof t?function(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}:function(e,t,n){return function(){this.style.setProperty(e,t,n)}})(e,t,null==n?"":n)):v(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?function(e){return function(){delete this[e]}}:"function"==typeof t?function(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}:function(e,t){return function(){this[e]=t}})(e,t)):this.node()[e]},classed:function(e,t){var n=_(e+"");if(arguments.length<2){for(var r=w(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each(("function"==typeof t?function(e,t){return function(){(t.apply(this,arguments)?S:E)(this,e)}}:t?function(e){return function(){S(this,e)}}:function(e){return function(){E(this,e)}})(n,t))},text:function(e){return arguments.length?this.each(null==e?k:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(e){return function(){this.textContent=e}})(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?C:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(e){return function(){this.innerHTML=e}})(e)):this.node().innerHTML},raise:function(){return this.each(P)},lower:function(){return this.each(T)},append:function(e){var t="function"==typeof e?e:a(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:a(e),r=null==t?x:"function"==typeof t?t:s(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(j)},clone:function(e){return this.select(e?I:A)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,o,i=function(e){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}(e+""),a=i.length;if(!(arguments.length<2)){for(l=t?G:L,null==n&&(n=!1),r=0;r<a;++r)this.each(l(i[r],t,n));return this}var l=this.node().__on;if(l)for(var s,c=0,u=l.length;c<u;++c)for(r=0,s=l[c];r<a;++r)if((o=i[r]).type===s.type&&o.name===s.name)return s.value},dispatch:function(e,t){return this.each(("function"==typeof t?function(e,t){return function(){return B(this,e,t.apply(this,arguments))}}:function(e,t){return function(){return B(this,e,t)}})(e,t))}};var W=U,q=function(e){return"string"==typeof e?new H([[document.querySelector(e)]],[document.documentElement]):new H([[e]],F)},z=function(e){return q(a(e).call(document.documentElement))},K=0;function Q(){return new Y}function Y(){this._="@"+(++K).toString(36)}Y.prototype=Q.prototype={constructor:Y,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};var X=function(){for(var e,t=D;e=t.sourceEvent;)t=e;return t},Z=function(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}var o=e.getBoundingClientRect();return[t.clientX-o.left-e.clientLeft,t.clientY-o.top-e.clientTop]},J=function(e){var t=X();return t.changedTouches&&(t=t.changedTouches[0]),Z(e,t)},$=function(e){return"string"==typeof e?new H([document.querySelectorAll(e)],[document.documentElement]):new H([null==e?[]:e],F)},ee=function(e,t,n){arguments.length<3&&(n=t,t=X().changedTouches);for(var r,o=0,i=t?t.length:0;o<i;++o)if((r=t[o]).identifier===n)return Z(e,r);return null},te=function(e,t){null==t&&(t=X().touches);for(var n=0,r=t?t.length:0,o=new Array(r);n<r;++n)o[n]=Z(e,t[n]);return o};n.d(t,"create",function(){return z}),n.d(t,"creator",function(){return a}),n.d(t,"local",function(){return Q}),n.d(t,"matcher",function(){return p}),n.d(t,"mouse",function(){return J}),n.d(t,"namespace",function(){return i}),n.d(t,"namespaces",function(){return o}),n.d(t,"clientPoint",function(){return Z}),n.d(t,"select",function(){return q}),n.d(t,"selectAll",function(){return $}),n.d(t,"selection",function(){return W}),n.d(t,"selector",function(){return s}),n.d(t,"selectorAll",function(){return u}),n.d(t,"style",function(){return v}),n.d(t,"touch",function(){return ee}),n.d(t,"touches",function(){return te}),n.d(t,"window",function(){return g}),n.d(t,"event",function(){return D}),n.d(t,"customEvent",function(){return V})},809:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(e,t,n,r){return"in"in e&&(e.when=e.in),i.default.Children.count(r)<2?i.default.createElement(a.default,o({},e,{inEffect:t,outEffect:n,children:r})):(r=i.default.Children.map(r,function(r){return i.default.createElement(a.default,o({},e,{inEffect:t,outEffect:n,children:r}))}),"Fragment"in i.default?i.default.createElement(i.default.Fragment,null,r):i.default.createElement("span",null,r))};var i=r(n(0)),a=r(n(1085));e.exports=t.default},812:function(e,t,n){e.exports=n(35)(7)},813:function(e,t,n){e.exports=n(35)(8)},814:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__1kueS",framedImage:"styles-module__framedImage__1ndwn",SurvivalTable:"styles-module__SurvivalTable__2NKCT",Tooltip:"styles-module__Tooltip__1I-Ty",NotAvailable:"styles-module__NotAvailable__1Zx5R",XmaxNumberInput:"styles-module__XmaxNumberInput__SQsf6"}},815:function(e,t,n){e.exports={portalWidth:"tables-module__portalWidth__2u2eA",framedImage:"tables-module__framedImage__2sdMG",studyViewTablesTable:"tables-module__studyViewTablesTable__29Y2_",tableSearchInput:"tables-module__tableSearchInput__2uOMk",labelContent:"tables-module__labelContent__2FLsJ",labelContentSVG:"tables-module__labelContentSVG__2v71D",controls:"tables-module__controls__2KTG_",controlsAtTop:"tables-module__controlsAtTop__czH5v",controlsBtn:"tables-module__controlsBtn__24B4k",geneSymbol:"tables-module__geneSymbol__1OUGZ",cancerGene:"tables-module__cancerGene__CqmRo",headerColumn:"tables-module__headerColumn__WCJTO",headerRow:"tables-module__headerRow__3Ckx0",row:"tables-module__row__20ZyT",oddRow:"tables-module__oddRow__3vz4c",evenRow:"tables-module__evenRow__KCskI",highlightedEvenRow:"tables-module__highlightedEvenRow__2EYSy",highlightedRow:"tables-module__highlightedRow__1wuhn",highlightedOddRow:"tables-module__highlightedOddRow__1RWUf",cancerGeneIcon:"tables-module__cancerGeneIcon__1Zp6i",gistic:"tables-module__gistic__1d6Gl",mutsig:"tables-module__mutsig__3Q3o0",cancerGenesRow:"tables-module__cancerGenesRow__1crxh",amp:"tables-module__amp__yRy0o",del:"tables-module__del__PLU6Y",displayFlex:"tables-module__displayFlex__7WOab",headerSortingIcon:"tables-module__headerSortingIcon__1aRye",autoMarginCheckbox:"tables-module__autoMarginCheckbox__3tMQV",union:"tables-module__union__3dOlj",intersection:"tables-module__intersection__2qPMu"}},817:function(e,t,n){"use strict";n.d(t,"b",function(){return v}),n.d(t,"a",function(){return _});var r=n(0),o=n(1050),i=n.n(o),a=n(5),l=n.n(a);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function d(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var b=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function g(e,t){var n=e.padded,o=e.overflow,a=e.flex,s=b(e,["padded","overflow","flex"]),c=Object.assign(Object.assign({flex:a,display:"flex",overflow:o?"visible":"auto"},e.style),{flexDirection:t}),u=l()(e.className,i.a[t],n&&i.a.padded);return r.createElement("div",y({},s,{style:c,className:u}))}var v=function(e){function t(){return c(this,t),d(this,f(t).apply(this,arguments))}return h(t,r["Component"]),p(t,[{key:"render",value:function(){return g(this.props,"row")}}]),t}(),_=function(e){function t(){return c(this,t),d(this,f(t).apply(this,arguments))}return h(t,r["Component"]),p(t,[{key:"render",value:function(){return g(this.props,"column")}}]),t}()},819:function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(1060),a=n.n(i),l=n(5),s=n.n(l),c=n(810),u=n.n(c),p=n(1061),d=n.n(p);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},_=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),y(this,b(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.error,n=e.children,o=e.className,i=v(e,["error","children","className"]);return r.createElement("div",h({className:s()(o,d.a.error)},i),r.createElement("span",{className:d.a.message},r.createElement(u.a,{className:d.a.icon,name:"exclamation-circle"}),t.message+""),n)}}])&&m(n.prototype,o),i&&m(n,i),t}(),w=n(72);function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var T=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":P(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},x=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},j=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),E(this,k(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.promises,n=e.children,o=e.className,i=e.secondaryComponent,l=x(e,["promises","children","className","secondaryComponent"]);return r.createElement("div",O({className:s()(o,a.a.SectionHeader)},l),r.createElement("h2",null,n,!(!t||!t.some(function(e){return e.isPending}))&&r.createElement(w.a,{isLoading:!0,size:"small"})),!!i&&i,t&&t.map(function(e){return!!e.error&&r.createElement(_,{className:a.a.error,error:e.error})}))}}])&&S(n.prototype,o),i&&S(n,i),t}();j=T([o.observer],j);t.a=j},820:function(e,t,n){e.exports=n(35)(88)},822:function(e,t,n){e.exports=n(35)(3)},825:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(0),o=n(68);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,s(t).apply(this,arguments))}var n,i,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r["Component"]),n=t,(i=[{key:"render",value:function(){return r.createElement(o.a,{to:"/study?id=".concat(this.props.studyId),className:this.props.className},this.props.children)}}])&&a(n.prototype,i),u&&a(n,u),t}()},826:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterPropsFrom=function(e){e=e||{};var t={};for(var n in e)n in r||(t[n]=e[n]);return t};var r={hideTableHeader:!0,column:!0,columns:!0,sortable:!0,filterable:!0,filtering:!0,onFilter:!0,filterPlaceholder:!0,filterClassName:!0,currentFilter:!0,sort:!0,sortBy:!0,sortableColumns:!0,onSort:!0,defaultSort:!0,defaultSortDescending:!0,itemsPerPage:!0,filterBy:!0,hideFilterInput:!0,noDataText:!0,currentPage:!0,onPageChange:!0,previousPageLabel:!0,nextPageLabel:!0,pageButtonLimit:!0,childNode:!0,data:!0,children:!0}},827:function(e,t,n){"use strict";function r(e){return new Promise(function(t){return setTimeout(t,e)})}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3;return new Promise(function(r){var o=0,i=setInterval(function(){if(o+=t,e())clearInterval(i),r();else if(o>n)throw clearInterval(i),new Error("sleepUntil timeout")},t)})}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o})},831:function(e,t,n){"use strict";var r=n(0),o=n(23),i=(n(903),"https://oncokb.org");function a(){return r.createElement("a",{href:"".concat(i,"/cancerGenes"),target:"_blank"},"OncoKB Cancer Gene List")}n(815),n(5);var l,s,c=n(3),u=(n(20),n(31)),p=n(875);function d(e,t){return[e,Object(u.I)(t)].join(":")}function f(e){return e.split(":")[0]}function h(e,t,n,l,s,c){return r.createElement("div",{style:{display:"flex",flexDirection:"column",maxWidth:300,fontSize:12}},r.createElement("span",null,function(e,t,n,l,s){if(t){var c="";if(l||s){c=" as a ";var u=[];l&&u.push("oncogene"),s&&u.push("tumor suppressor gene"),c="".concat(c," ").concat(u.join(" and "))}return r.createElement("span",null,r.createElement(o.If,{condition:n},r.createElement(o.Then,null,r.createElement("a",{href:"".concat(i,"/gene/").concat(e),target:"_blank"},e)),r.createElement(o.Else,null,r.createElement("span",null,e))),r.createElement("span",null," is included in the "),a(),(l||s)&&r.createElement("span",null,c),".")}}(e,n,l,s,c)))}function m(e,t,n,o,i,a){var l="# of samples profiled";"data"!==e&&(l+=" for ".concat(e," in this gene: ").concat(t.toLocaleString()));return r.createElement(c.i,{placement:"right",overlay:function(){return r.createElement("span",{style:{display:"flex",flexDirection:"column"},"data-test":"freq-cell-tooltip"},r.createElement("span",null,l),r.createElement(p.a,{genePanelIds:o,toggleModal:i}))},destroyTooltipOnHide:!0},r.createElement("span",{"data-test":"freq-cell",style:a},Object(u.ab)(n/t*100)))}function y(e,t){var n="".concat(t?"Percentage":"Number"," of samples");return"data"!==e&&(n+=" with one or more ".concat(e)),n}n.d(t,"d",function(){return d}),n.d(t,"f",function(){return f}),n.d(t,"e",function(){return h}),n.d(t,"a",function(){return l}),n.d(t,"b",function(){return s}),n.d(t,"c",function(){return m}),n.d(t,"g",function(){return y}),function(e){e.MUTATION="mutations",e.STRUCTURAL_VARIANT="structural variants",e.CNA="copy number alterations",e.DATA="data"}(l||(l={})),function(e){e.INTERSECTION="Intersection",e.UNION="Union"}(s||(s={}))},835:function(e,t,n){"use strict";var r=n(0),o=n(1),i=n(9),a=n(5),l=n.n(a),s=n(906),c=n.n(s),u=n(801),p=n.n(u),d=n(2),f=n(270),h=n(42);function m(e){try{return{query:e?Object(h.g)(e.trim().toUpperCase()):[],error:void 0}}catch(i){if("SyntaxError"!==i.name)return{query:[],error:{start:0,end:0,message:"Unexpected ".concat(i)}};var t,n,r,o=i.location.start.offset;return o===e.length?(t="after",n=o-1,r=o):0===o?(t="before",n=o,r=o+1):(t="at",n=o,r=o+1),{query:[],error:{start:n,end:r,message:"OQL syntax error ".concat(t," selected character; please fix and submit again.")}}}}n(869);var y=n(3),b=n(13),g=n(61),v=n.n(g),_=n(810),w=n.n(_),O=n(17);function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var T=function(e){if(0==e.genes.length){return r.createElement("div",{className:c.a.suggestionBubble,title:"Could not find gene symbol. Click to remove it from the gene list.",onClick:function(){return e.replaceGene(e.alias,"")}},r.createElement(w.a,{className:c.a.icon,name:"times-circle"}),r.createElement("span",{className:c.a.noChoiceLabel},e.alias))}if(1==e.genes.length){var t=e.genes[0].hugoGeneSymbol,n="'".concat(e.alias,"' is a synonym for '").concat(t,"'. Click here to replace it with the official symbol.");return r.createElement("div",{className:c.a.suggestionBubble,title:n,onClick:function(){return e.replaceGene(e.alias,t)}},r.createElement(w.a,{className:c.a.icon,name:"question"}),r.createElement("span",{className:c.a.singleChoiceLabel},e.alias),r.createElement("span",null,": ".concat(t)))}var o="Ambiguous gene symbol. Click on one of the alternatives to replace it.",i=e.genes.map(function(e){return{label:e.hugoGeneSymbol,value:e.hugoGeneSymbol}});return r.createElement("div",{className:c.a.suggestionBubble,title:o},r.createElement(w.a,{className:c.a.icon,name:"question"}),r.createElement("span",{className:c.a.multiChoiceLabel},e.alias),r.createElement("span",null,":"," "),r.createElement(O.DropdownButton,{bsStyle:o.toLowerCase(),bsSize:"xsmall",title:"Select symbol",id:"geneReplace_".concat(e.alias)},i.map(function(t,n){return r.createElement(O.MenuItem,{onClick:function(){e.replaceGene(e.alias,t.value)},eventKey:n+1},t.label)})))},x=function(e){if(e.oql instanceof Error)return r.createElement("div",{className:c.a.GeneSymbolValidator},r.createElement("span",{className:c.a.errorMessage},"Cannot validate gene symbols because of invalid OQL.","  ",r.createElement("a",{className:"underline",onMouseDown:function(t){t.preventDefault(),e.highlightError()}},"Click to highlight error")));if(0===e.oql.query.length)return null;if(!e.errorMessageOnly&&e.validatingGenes)return r.createElement("div",{className:c.a.GeneSymbolValidator},r.createElement("span",{className:c.a.pendingMessage},"Validating gene symbols..."));if(e.genes instanceof Error)return r.createElement("div",{className:c.a.GeneSymbolValidator},r.createElement("span",{className:c.a.pendingMessage},"Unable to validate gene symbols."));if(e.genes.suggestions.length>0)return r.createElement("div",{className:c.a.GeneSymbolValidator},r.createElement("div",{className:c.a.invalidBubble,title:"Please edit the gene symbols."},r.createElement(w.a,{className:c.a.icon,name:"exclamation-circle"}),r.createElement("span",null,"Invalid gene symbols.")),e.genes.suggestions.map(function(t,n){return r.createElement(T,{key:n,genes:t.genes,alias:t.alias,replaceGene:e.replaceGene})}));var t,n,i,a=o.groupBy(e.genes.found,function(e){return e.hugoGeneSymbol}),s=o.reduce(a,function(e,t,n){return t.length>1&&e.push(n),e},[]);return s.length>0?r.createElement("div",{className:c.a.GeneSymbolValidator},r.createElement("div",{className:c.a.invalidBubble,title:"Please edit the gene symbols."},r.createElement(w.a,{className:c.a.icon,name:"exclamation-circle"}),r.createElement("span",null,"The portal does not currently support the following gene(s):")),s.map(function(t,n){return r.createElement(T,{key:n,genes:[],alias:t,replaceGene:e.replaceGene})})):e.errorMessageOnly?null:r.createElement("div",{className:l()(c.a.GeneSymbolValidator,(t={},n=c.a.nowrap,i=!e.wrapTheContent,n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t))},r.createElement("div",{className:c.a.validBubble,title:"You can now submit the list."},r.createElement(w.a,{className:c.a.icon,name:"check-circle"}),r.createElement("span",null,"All gene symbols are valid.")))},j=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),k(this,C(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return this.props.children?r.createElement("div",{id:"wideGeneBoxValidationStatus"},this.props.children):r.createElement("div",{id:"geneBoxValidationStatus"},r.createElement(x,this.props))}}])&&E(n.prototype,o),i&&E(n,i),t}();function A(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var G=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},V=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function l(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,l)}s((r=r.apply(e,t||[])).next())})};function B(e){return Number.isInteger(Number(e))}var F=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,i=D(t).call(this,e),n=!i||"object"!==L(i)&&"function"!=typeof i?N(r):i,Object.defineProperty(N(n),"genes",{enumerable:!0,configurable:!0,writable:!0,value:Object(y.vb)({invoke:function(){return V(N(n),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,i,a,l,s,c,u,p,d=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.geneIds.length){e.next=2;break}return e.abrupt("return",{found:[],suggestions:[]});case 2:return t=o.partition(o.uniq(this.geneIds),B),n=I(t,2),r=n[0],i=n[1],a=function(){return V(d,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,i,a,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.length){e.next=6;break}return e.next=3,b.a.fetchGenesUsingPOST({geneIdType:"ENTREZ_GENE_ID",geneIds:r});case 3:t=e.sent,e.next=7;break;case 6:t=[];case 7:return n=o.difference(r,t.map(function(e){return e.entrezGeneId+""})),i=n.map(function(e){return{alias:e,genes:[]}}),a=t.map(function(e){return{alias:e.entrezGeneId+"",genes:[e]}}),l=[].concat(A(i),A(a)),e.abrupt("return",{found:t,suggestions:l});case 12:case"end":return e.stop()}},e)}))},l=function(){return V(d,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.length){e.next=6;break}return e.next=3,b.a.fetchGenesUsingPOST({geneIdType:"HUGO_GENE_SYMBOL",geneIds:i});case 3:t=e.sent,e.next=7;break;case 6:t=[];case 7:return n=o.difference(i,t.map(function(e){return e.hugoGeneSymbol})),e.next=10,Promise.all(n.map(function(e){return a.getGeneSuggestions(e)}));case 10:return r=e.sent,e.abrupt("return",{found:t,suggestions:r});case 12:case"end":return e.stop()}},e)}))},e.next=7,Promise.all([a(),l()]);case 7:return s=e.sent,c=I(s,2),u=c[0],p=c[1],e.abrupt("return",{found:[].concat(A(u.found),A(p.found)),suggestions:[].concat(A(u.suggestions),A(p.suggestions))});case 12:case"end":return e.stop()}},e,this)}))},onResult:function(e){n.props.afterValidation&&n.props.afterValidation(0===e.suggestions.length,n.genes.result,n.oql)},default:{found:[],suggestions:[]}})}),Object(d.makeObservable)(N(n)),n}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(t,r["Component"]),n=t,(i=[{key:"getGeneSuggestions",value:function(e){return V(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,b.a.getAllGenesUsingGET({alias:e});case 3:return t.t1=t.sent,t.abrupt("return",{alias:t.t0,genes:t.t1});case 5:case"end":return t.stop()}},t)}))}},{key:"render",value:function(){var e=this;return this.props.skipGeneValidation&&this.props.afterValidation&&this.props.afterValidation(!0,{found:[],suggestions:[]},this.oql),r.createElement(j,{genes:this.props.skipGeneValidation?{found:[],suggestions:[]}:this.genes.isError?new Error("ERROR"):this.genes.result,highlightError:function(){e.props.highlightError&&e.props.highlightError(e.oql)},oql:this.oqlOrError,validatingGenes:!this.props.skipGeneValidation&&this.genes.isPending,errorMessageOnly:this.props.errorMessageOnly,wrapTheContent:this.props.wrap,replaceGene:this.props.replaceGene},this.props.children)}},{key:"oql",get:function(){return m(this.props.geneQuery)}},{key:"geneIds",get:function(){return this.oql.error?[]:this.oql.query.map(function(e){return e.gene})}},{key:"oqlOrError",get:function(){return this.oql.error?new Error("OQL error at character ".concat(this.oql.error.start)):this.oql}}])&&M(n.prototype,i),a&&M(n,a),t}();Object.defineProperty(F,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{errorMessageOnly:!1}}),G([v.a],F.prototype,"getGeneSuggestions",null),G([d.computed],F.prototype,"oql",null),G([d.computed],F.prototype,"geneIds",null),G([d.computed],F.prototype,"oqlOrError",null);var H=F=G([i.observer],F),U=n(12),W=n(41),q=n.n(W);function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",function(){return Z});var Z,J=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":X(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.STUDY_VIEW_PAGE=1]="STUDY_VIEW_PAGE",e[e.ONCOPRINT_HEATMAP=2]="ONCOPRINT_HEATMAP"}(Z||(Z={}));var $=function(e){function t(e){var n,i,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,a=K(t).call(this,e),n=!a||"object"!==X(a)&&"function"!=typeof a?Q(i):a,Object.defineProperty(Q(n),"disposers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(Q(n),"currentTextAreaValue",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(Q(n),"_geneQuery",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(Q(n),"geneQueryIsValid",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(Q(n),"queryToBeValidated",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(Q(n),"isFocused",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(Q(n),"skipGenesValidation",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(Q(n),"queryStore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(Q(n),"textAreaRef",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(Q(n),"updateQueryToBeValidateDebounce",{enumerable:!0,configurable:!0,writable:!0,value:o.debounce(function(){n.queryToBeValidated=n.currentTextAreaValue,n.skipGenesValidation=!1,""===n.currentTextAreaValue&&(n.geneQuery="",n.props.callback&&n.props.callback(m(""),{found:[],suggestions:[]},n.geneQuery))},500)}),Object(d.makeObservable)(Q(n)),n.geneQuery=n.props.inputGeneQuery||"",n.queryToBeValidated=n.geneQuery,n.props.validateInputGeneQuery||(n.skipGenesValidation=!0),n.textAreaRef=r.createRef(),n}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(t,r["Component"]),n=t,(i=[{key:"componentDidMount",value:function(){var e=this;this.disposers=[Object(d.reaction)(function(){return e.props.inputGeneQuery},function(t){(t||"").toUpperCase()!==e.geneQuery.toUpperCase()&&(e.props.validateInputGeneQuery||(e.skipGenesValidation=!0),e.geneQuery=(t||"").trim(),e.queryToBeValidated=e.geneQuery),e.updateTextAreaRefValue()}),Object(d.reaction)(function(){return e.showFullText},function(){e.updateTextAreaRefValue()})]}},{key:"componentWillUnmount",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,o=this.disposers[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){(0,r.value)()}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}}},{key:"updateGeneQuery",value:function(e){this.geneQuery=e,this.queryToBeValidated=e,this.isFocused=!0,this.updateTextAreaRefValue()}},{key:"getTextAreaValue",value:function(){return this.showFullText?this.geneQuery:this.getFocusOutValue()}},{key:"updateTextAreaRefValue",value:function(){this.textAreaRef.current.value=this.getTextAreaValue()}},{key:"getFocusOutValue",value:function(){return function(e){var t="";if(e.length>0){t=e[0];for(var n=1;n<e.length;n++){if(t.length>13||t.length+e[n].length>13){t+=" and "+(e.length-n)+" more";break}t+=" "+e[n]}}return t}(m(this.geneQuery).query.map(function(e){return e.gene}))}},{key:"afterGeneSymbolValidation",value:function(e,t,n){this.geneQueryIsValid=e,this.props.callback&&this.props.callback(n,t,this.geneQuery)}},{key:"highlightError",value:function(e){this.textAreaRef.current.focus(),this.textAreaRef.current.setSelectionRange(e.error.start,e.error.end)}},{key:"onChange",value:function(e){this.currentTextAreaValue=e.currentTarget.value,this.geneQuery=this.currentTextAreaValue,this.updateQueryToBeValidateDebounce()}},{key:"onFocus",value:function(){this.isFocused=!0}},{key:"onBlur",value:function(){this.isFocused=!1}},{key:"replaceGene",value:function(e,t){var n=Object(f.e)(this.getTextAreaValue().toUpperCase().replace(new RegExp("\\b".concat(e.toUpperCase(),"\\b"),"g"),function(){return t.toUpperCase()}));this.updateGeneQuery(n)}},{key:"render",value:function(){return r.createElement("div",{className:c.a.genesSelection},r.createElement("div",{className:c.a.topRow},r.createElement("textarea",{ref:this.textAreaRef,onFocus:this.onFocus,onBlur:this.onBlur,className:l()(this.textAreaClasses),rows:5,cols:80,placeholder:this.promptText,title:this.promptText,defaultValue:this.getTextAreaValue(),onChange:this.onChange,"data-test":"geneSet",style:{height:this.props.textAreaHeight}}),this.props.submitButton),r.createElement("div",{className:"oqlValidationContainer"},r.createElement(H,{focus:this.props.focus,geneQuery:this.queryToBeValidated,skipGeneValidation:this.skipGenesValidation,updateGeneQuery:this.updateGeneQuery,afterValidation:this.afterGeneSymbolValidation,replaceGene:this.replaceGene,errorMessageOnly:this.props.location===Z.STUDY_VIEW_PAGE,highlightError:this.highlightError},this.props.children)),r.createElement("div",null,this.showErrorsAndMessages&&this.props.error&&r.createElement("span",{className:p.a.errorMessage,"data-test":"oqlErrorMessage"},this.props.error),this.showErrorsAndMessages&&this.props.messages&&this.props.messages.map(function(e){return r.createElement("span",{className:p.a.oqlMessage},r.createElement("i",{className:"fa fa-info-circle",style:{marginRight:5}}),e)})))}},{key:"geneQuery",get:function(){return this.queryStore?this.queryStore.geneQuery:this._geneQuery},set:function(e){this.queryStore?this.queryStore.geneQuery=e:this._geneQuery=e}},{key:"textAreaClasses",get:function(){var e=[];switch(this.props.location){case Z.STUDY_VIEW_PAGE:e.push(c.a.studyView),!this.isFocused&&this.geneQueryIsValid||e.push(c.a.studyViewFocus);break;case Z.ONCOPRINT_HEATMAP:e.push(c.a.oncoprintHeatmap);break;default:e.push(c.a.default)}return this.geneQuery||e.push(c.a.empty),e}},{key:"showFullText",get:function(){return!this.geneQueryIsValid||this.isFocused||this.props.location!==Z.STUDY_VIEW_PAGE}},{key:"promptText",get:function(){return this.props.textBoxPrompt?this.props.textBoxPrompt:"Click gene symbols below or enter here"}},{key:"showErrorsAndMessages",get:function(){return this.props.location!==Z.STUDY_VIEW_PAGE||this.isFocused}}])&&z(n.prototype,i),a&&z(n,a),t}();Object.defineProperty($,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{validateInputGeneQuery:!0}}),J([d.observable],$.prototype,"_geneQuery",void 0),J([d.computed],$.prototype,"geneQuery",null),J([d.observable],$.prototype,"geneQueryIsValid",void 0),J([d.observable],$.prototype,"queryToBeValidated",void 0),J([d.observable],$.prototype,"isFocused",void 0),J([d.observable],$.prototype,"skipGenesValidation",void 0),J([d.action.bound],$.prototype,"updateGeneQuery",null),J([d.action.bound],$.prototype,"updateTextAreaRefValue",null),J([d.computed],$.prototype,"textAreaClasses",null),J([d.computed],$.prototype,"showFullText",null),J([d.action.bound],$.prototype,"afterGeneSymbolValidation",null),J([U.default],$.prototype,"highlightError",null),J([d.computed],$.prototype,"promptText",null),J([q.a],$.prototype,"onChange",null),J([q.a],$.prototype,"onFocus",null),J([q.a],$.prototype,"onBlur",null),J([q.a],$.prototype,"replaceGene",null),J([d.computed],$.prototype,"showErrorsAndMessages",null),$=J([i.observer],$);t.b=$},836:function(e,t,n){},837:function(e,t,n){"use strict";var r,o=n(0),i=n(73),a=n(1158),l=(n(1038),n(2)),s=n(815),c=n.n(s),u=n(1),p=n(9),d=n(5),f=n.n(d),h=n(23),m=n(12),y=n(338),b=n(3),g=n(174),v=n(831),_=n(17);function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?C(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var A=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":j(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},I=(x(r={},"desc",a.b.DESC),x(r,"asc",a.b.ASC),r),M=function(e){function t(e,n){var r;return S(this,t),r=E(this,k(t).call(this,e)),Object.defineProperty(C(r),"fixedTopRowsData",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(C(r),"getSortedData",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e=r.sortMetric||function(){return 0},t=void 0===r.sortAscending||r.sortAscending;return[].concat(O(r.fixedTopRowsData),O(Object(i.c)(r.allData,e,t)))}}),Object(l.makeObservable)(C(r)),r.fixedTopRowsData=n,r}return P(t,g["a"]),t}(),D=function(e){function t(e){var n;S(this,t),n=E(this,k(t).call(this,e)),Object.defineProperty(C(n),"_store",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(C(n),"inputElement",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(C(n),"_sortBy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(C(n),"_sortDirection",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object(l.makeObservable)(C(n)),n._sortBy=e.sortBy;var r=u.find(n.props.columns,function(e){return e.name===n._sortBy});return n._sortDirection=void 0===e.sortDirection?u.isUndefined(r)?"desc":r.defaultSortDirection||"desc":e.sortDirection,n.initDataStore(),n}var n,r,s;return P(t,o["Component"]),n=t,(r=[{key:"componentWillReceiveProps",value:function(e){this.updateDataStore(e)}},{key:"updateDataStore",value:function(e){var t=this,n=new M(function(){return t.props.data},this.props.fixedTopRowsData||[]),r=Object(l.toJS)(this._store.filterString);this._store.setProps({columns:e.columns,dataStore:n,initialSortColumn:this._sortBy,initialSortDirection:this._sortDirection}),void 0!==r&&this._store.setFilterString(r)}},{key:"initDataStore",value:function(){var e=this,t=new M(function(){return e.props.data},this.props.fixedTopRowsData||[]);this._store=new i.a({columns:this.props.columns,dataStore:t,initialSortColumn:this._sortBy,initialSortDirection:this._sortDirection})}},{key:"rowClassName",value:function(e){var t=e.index;if(t>-1&&this.isSelectedRow(this._store.dataStore.sortedFilteredData[t])){var n=[c.a.row];if(this.props.highlightedRowClassName){var r=this.props.highlightedRowClassName(this._store.dataStore.sortedFilteredData[t]);n.push(r)}else n.push(c.a.highlightedRow);return f()(n)}return t<0?c.a.headerRow:f()(c.a.row,t%2==0?c.a.evenRow:c.a.oddRow)}},{key:"rowGetter",value:function(e){var t=e.index;return this._store.dataStore.sortedFilteredData[t]}},{key:"getColumn",value:function(e){return u.keyBy(this.props.columns,function(e){return e.name})[e]}},{key:"sort",value:function(e){var t=e.sortBy;this._store.defaultHeaderClick(this.getColumn(t)),this._sortBy=t,this._sortDirection=this._store.dataStore.sortAscending?"asc":"desc",this.props.afterSorting&&this.props.afterSorting(this._sortBy,this._sortDirection)}},{key:"onFilterTextChange",value:function(){var e=this;return Object(y.a)(function(t){e._store.setFilterString(t)},400)}},{key:"afterSelectingRows",value:function(){this.props.afterSelectingRows&&this.props.afterSelectingRows()}},{key:"changeSelectionType",value:function(e){this.props.toggleSelectionOperator&&this.props.defaultSelectionOperator!==e&&this.props.toggleSelectionOperator()}},{key:"isSelectedRow",value:function(e){return!!u.isFunction(this.props.isSelectedRow)&&this.props.isSelectedRow(e)}},{key:"onAddAll",value:function(){this.props.addAll&&this.props.addAll(this._store.dataStore.sortedFilteredData)}},{key:"onRemoveAll",value:function(){this.props.removeAll&&this.props.removeAll(this._store.dataStore.sortedFilteredData)}},{key:"setInputRef",value:function(e){this.inputElement=e}},{key:"componentDidMount",value:function(){!this.props.hideControls&&this.props.autoFocusSearchAfterRendering&&this.inputElement.focus()}},{key:"getSelectionOptions",value:function(){var e=this;return Object.keys(v.b).map(function(t){var n=v.b[t];return o.createElement(_.MenuItem,{onClick:function(){return e.changeSelectionType(n)},active:e.props.defaultSelectionOperator===t},o.createElement(b.i,{overlay:"".concat(n," of samples in the newly selected rows")},o.createElement("div",null,n," ",o.createElement("i",{className:c.a[n.toLowerCase()]}))))})}},{key:"getAddRemoveAllButton",value:function(){var e=0===this.props.numberOfSelectedRows,t=this.props.numberOfSelectedRows===this.props.data.length,n="Select all".concat(this.props.showSelectableNumber?" (".concat(this._store.dataStore.sortedFilteredData.length,")"):""),r=!t&&this.props.addAll,i=!e&&this.props.removeAll;return o.createElement("div",{style:{display:"flex",alignItems:"baseline"}},r&&o.createElement("button",{className:"btn btn-default btn-xs","data-test":"fixed-header-table-add-all",onClick:this.onAddAll},n),i&&o.createElement("button",{className:"btn btn-default btn-xs","data-test":"fixed-header-table-remove-all",onClick:this.onRemoveAll},"Deselect all"))}},{key:"getControls",value:function(){return o.createElement("div",{className:f()(c.a.controls,x({},c.a.controlsAtTop,!!this.props.showControlsAtTop))},!this.props.showControlsAtTop&&o.createElement("input",{placeholder:"Search...",type:"text",onInput:this.onFilterTextChange(),className:f()("form-control",c.a.tableSearchInput)}),this.props.showAddRemoveAllButton&&this.getAddRemoveAllButton(),o.createElement(h.If,{condition:this.props.showSetOperationsButton&&this.props.numberOfSelectedRows>0},o.createElement("div",{className:"btn-group"},o.createElement("button",{className:"btn btn-default btn-xs",onClick:this.afterSelectingRows},"Select Samples"," ",o.createElement(h.If,{condition:this.props.numberOfSelectedRows>1},o.createElement("i",{style:{marginTop:"-2px"},className:this.props.defaultSelectionOperator===v.b.INTERSECTION?c.a.intersection:c.a.union}))),o.createElement(h.If,{condition:this.props.numberOfSelectedRows>1},o.createElement(_.DropdownButton,{bsSize:"xsmall",title:"",id:"selectButton",pullRight:!0},this.getSelectionOptions())))),this.props.extraButtons&&this.props.extraButtons.map(function(e){return o.createElement("button",{className:"btn btn-default btn-xs",onClick:e.onClick,disabled:e.isDisabled()},e.content)}),this.props.showControlsAtTop&&o.createElement("input",{placeholder:"Search...",type:"text",onInput:this.onFilterTextChange(),ref:this.setInputRef,"data-test":"fixed-header-table-search-input",className:f()("form-control",c.a.tableSearchInput)}))}},{key:"render",value:function(){var e=this;return o.createElement("div",{className:c.a.studyViewTablesTable},!this.props.hideControls&&this.props.showControlsAtTop&&this.getControls(),o.createElement(p.Observer,null,function(){return o.createElement(a.c,{width:e.props.width,height:e.props.height,headerHeight:e.props.headerHeight,rowHeight:e.props.rowHeight,rowCount:e._store.dataStore.sortedFilteredData.length,rowGetter:e.rowGetter,rowClassName:e.rowClassName,headerClassName:c.a.headerColumn,sort:e.sort,sortDirection:I[e._sortDirection],sortBy:e._sortBy},e.props.columns.map(function(t,n){return o.createElement(a.a,{key:t.name,label:t.name,dataKey:t.name,width:Number(t.width),headerRenderer:e.columnHeaders[n],cellRenderer:function(e){return t.render(e.rowData)}})}))}),!this.props.hideControls&&!this.props.showControlsAtTop&&this.getControls())}},{key:"columnHeaders",get:function(){var e=this;return this.props.columns.map(function(t){return function(n){var r=[];t.headerRender?r.push(t.headerRender(t.name)):r.push(o.createElement("span",{key:t.name},t.name)),t.name===e._sortBy&&r.push(o.createElement("i",{className:f()(c.a.headerSortingIcon,"fa","desc"===e._sortDirection?"fa-sort-desc":"fa-sort-asc")}));var i=o.createElement("div",{style:{display:"flex"}},r);return t.tooltip?o.createElement(b.i,{placement:"top",overlay:t.tooltip},i):i}})}}])&&w(n.prototype,r),s&&w(n,s),t}();Object.defineProperty(D,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{showControlsAtTop:!1,showAddRemoveAllButton:!1,autoFocusSearchAfterRendering:!1,width:398,height:350,headerHeight:25,rowHeight:25,showSelectableNumber:!1,sortBy:"",numberOfSelectedRows:0,hideControls:!1}}),A([l.observable.ref],D.prototype,"_sortBy",void 0),A([l.observable],D.prototype,"_sortDirection",void 0),A([m.default],D.prototype,"rowClassName",null),A([m.default],D.prototype,"rowGetter",null),A([m.default],D.prototype,"getColumn",null),A([l.action.bound],D.prototype,"sort",null),A([l.action.bound],D.prototype,"onFilterTextChange",null),A([l.action.bound],D.prototype,"afterSelectingRows",null),A([l.action.bound],D.prototype,"changeSelectionType",null),A([m.default],D.prototype,"isSelectedRow",null),A([m.default],D.prototype,"onAddAll",null),A([m.default],D.prototype,"onRemoveAll",null),A([l.computed],D.prototype,"columnHeaders",null),A([m.default],D.prototype,"setInputRef",null),D=A([p.observer],D),t.a=D},838:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(912);(r=i)&&r.__esModule;var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return o(e,[{key:"receiveProps",value:function(e,t){this.props=e,this.itemAdapter=t}},{key:"isEmpty",value:function(e){return!this.getLength(e)}},{key:"filter",value:function(e,t){return this.toArray(e).filter(t)}},{key:"find",value:function(e,t){return this.toArray(e).find(t)}},{key:"findMatching",value:function(e,t){var n=this,r=this.itemAdapter.foldValue(t);return this.find(e,function(e){return n.itemAdapter.itemMatchesInput(e,r)})}}]),e}();t.default=a},839:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.unsafe=function(e){return new o(e)},t.isUnsafe=function(e){return e instanceof o};var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.content=t}return r(e,[{key:"toString",value:function(){return this.content}}]),e}()},840:function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(2),a=n(12),l=n(17),s=n(5),c=n.n(s),u=n(814),p=n.n(u),d=n(3),f=n(454);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var _=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":v(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},w=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},O=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=y(t).call(this,e))||"object"!==v(o)&&"function"!=typeof o?b(r):o,Object.defineProperty(b(n),"mousePosition",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0}}),Object.defineProperty(b(n),"tooltipOpen",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object(i.makeObservable)(b(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,r["Component"]),n=t,(o=[{key:"onMouseOver",value:function(){this.tooltipOpen=!0}},{key:"onMouseOut",value:function(){this.tooltipOpen=!1}},{key:"onMouseMove",value:function(e){this.mousePosition.x=e.pageX,this.mousePosition.y=e.pageY}},{key:"render",value:function(){var e=this.props,t=(e.text,e.maxWidth,e.datum,e.suffix,e.tooltip,e.prefixTspans,e.alwaysShowTooltip,e.renderTruncatedText,e.transform),n=e.tooltipPlacement,o=e.textRef,i=w(e,["text","maxWidth","datum","suffix","tooltip","prefixTspans","alwaysShowTooltip","renderTruncatedText","transform","tooltipPlacement","textRef"]),a=void 0;return t&&void 0!==this.props.x&&void 0!==this.props.y&&(a=t(this.props.x,this.props.y)),r.createElement(r.Fragment,null,r.createElement("text",h({onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,onMouseMove:this.onMouseMove,ref:o,transform:a},i),this.props.prefixTspans,this.truncatedText),(this.textReport.isTruncated||this.props.alwaysShowTooltip)&&this.tooltipOpen&&r.createElement(f.a,{isOpened:!0,node:document.body},r.createElement(l.Popover,{arrowOffsetTop:17,className:c()("cbioportal-frontend","cbioTooltip",p.a.Tooltip),positionLeft:this.mousePosition.x+("left"===n?-8:8),positionTop:this.mousePosition.y-17,style:{transform:"left"===n?"translate(-100%,0%)":void 0},placement:n},this.tooltipElt)))}},{key:"tooltipElt",get:function(){return this.props.tooltip?this.props.tooltip(this.props.datum):r.createElement("span",null,this.props.text)}},{key:"fontFamily",get:function(){var e="Arial";return this.props.style&&this.props.style.fontFamily&&(e=this.props.style.fontFamily.split(", ")[0]),e}},{key:"fontSize",get:function(){var e="13px";return this.props.style&&this.props.style.fontSize&&(e=this.props.style.fontSize+"px"),e}},{key:"textReport",get:function(){return Object(d.Hb)(this.props.text||"",this.props.maxWidth,this.fontFamily,this.fontSize)}},{key:"truncatedText",get:function(){return this.props.renderTruncatedText?this.props.renderTruncatedText(this.textReport.text):r.createElement("tspan",null,this.textReport.text)}}])&&m(n.prototype,o),a&&m(n,a),t}();Object.defineProperty(O,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{maxWidth:100,suffix:"..."}}),_([i.observable],O.prototype,"mousePosition",void 0),_([i.observable],O.prototype,"tooltipOpen",void 0),_([i.computed],O.prototype,"tooltipElt",null),_([i.action.bound],O.prototype,"onMouseOver",null),_([i.action.bound],O.prototype,"onMouseOut",null),_([a.default],O.prototype,"onMouseMove",null),_([i.computed],O.prototype,"fontFamily",null),_([i.computed],O.prototype,"fontSize",null),_([i.computed],O.prototype,"textReport",null),_([i.computed],O.prototype,"truncatedText",null),O=_([o.observer],O),t.a=O},841:function(e,t,n){!function(e,t,n,r){"use strict";function o(e,t){return e(t={exports:{}},t.exports),t.exports}n=n&&n.hasOwnProperty("default")?n.default:n;var i=o(function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t.apply(this,arguments)}e.exports=t}),a=function(e){if(Array.isArray(e))return e},l=function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n},s=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")},c=function(e,t){return a(e)||l(e,t)||s()},u=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},p=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){u(e,t,n[t])})}return e},d=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h=function(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e},m=o(function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(r){return"function"==typeof Symbol&&"symbol"===t(Symbol.iterator)?e.exports=n=function(e){return t(e)}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":t(e)},n(r)}e.exports=n}),y=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},b=function(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?y(e):t},g=o(function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(n)}e.exports=t}),v=o(function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(n,r)}e.exports=t}),_=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)},w=function(e,t,n,r,o,i,a,l){if(void 0===t)throw new Error("invariant requires an error message argument");if(!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,o,i,a,l],u=0;(s=new Error(t.replace(/%s/g,function(){return c[u++]}))).name="Invariant Violation"}throw s.framesToPop=1,s}},O=function(){function e(){d(this,e),u(this,"refs",{})}return h(e,[{key:"add",value:function(e,t){this.refs[e]||(this.refs[e]=[]),this.refs[e].push(t)}},{key:"remove",value:function(e,t){var n=this.getIndex(e,t);-1!==n&&this.refs[e].splice(n,1)}},{key:"isActive",value:function(){return this.active}},{key:"getActive",value:function(){var e=this;return this.refs[this.active.collection].find(function(t){var n=t.node;return n.sortableInfo.index==e.active.index})}},{key:"getIndex",value:function(e,t){return this.refs[e].indexOf(t)}},{key:"getOrderedRefs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.active.collection;return this.refs[e].sort(S)}}]),e}();function S(e,t){var n=e.node.sortableInfo.index,r=t.node.sortableInfo.index;return n-r}var E=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}},k=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)},C=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")},P=function(e){return E(e)||k(e)||C()};function T(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Object.keys(e).reduce(function(t,r){return-1===n.indexOf(r)&&(t[r]=e[r]),t},{})}var x={end:["touchend","touchcancel","mouseup"],move:["touchmove","mousemove"],start:["touchstart","mousedown"]},j=function(){if("undefined"==typeof window||"undefined"==typeof document)return"";var e=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||""===e.OLink&&["","o"])[1];switch(t){case"ms":return"ms";default:return t&&t.length?t[0].toUpperCase()+t.substr(1):""}}();function A(e,t){Object.keys(t).forEach(function(n){e.style[n]=t[n]})}function I(e,t){e.style["".concat(j,"Transform")]=null==t?"":"translate3d(".concat(t.x,"px,").concat(t.y,"px,0)")}function M(e,t){e.style["".concat(j,"TransitionDuration")]=null==t?"":"".concat(t,"ms")}function D(e,t){for(;e;){if(t(e))return e;e=e.parentNode}return null}function N(e,t,n){return Math.max(e,Math.min(n,t))}function R(e){return"px"===e.substr(-2)?parseFloat(e):0}function L(e,t){var n=t.displayName||t.name;return n?"".concat(e,"(").concat(n,")"):e}function G(e,t){var n=e.getBoundingClientRect();return{top:n.top+t.top,left:n.left+t.left}}function V(e){return e.touches&&e.touches.length?{x:e.touches[0].pageX,y:e.touches[0].pageY}:e.changedTouches&&e.changedTouches.length?{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY}:{x:e.pageX,y:e.pageY}}function B(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{left:0,top:0};if(e){var r={left:n.left+e.offsetLeft,top:n.top+e.offsetTop};return e.parentNode===t?r:B(e.parentNode,t,r)}}function F(e){var t=e.lockOffset,n=e.width,r=e.height,o=t,i=t,a="px";if("string"==typeof t){var l=/^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(t);w(null!==l,'lockOffset value should be a number or a string of a number followed by "px" or "%". Given %s',t),o=parseFloat(t),i=parseFloat(t),a=l[1]}return w(isFinite(o)&&isFinite(i),"lockOffset value should be a finite. Given %s",t),"%"===a&&(o=o*n/100,i=i*r/100),{x:o,y:i}}function H(e){return e instanceof HTMLElement?function(e){var t=window.getComputedStyle(e),n=/(auto|scroll)/;return["overflow","overflowX","overflowY"].find(function(e){return n.test(t[e])})}(e)?e:H(e.parentNode):null}var U={TAB:9,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40},W={Anchor:"A",Button:"BUTTON",Canvas:"CANVAS",Input:"INPUT",Option:"OPTION",Textarea:"TEXTAREA",Select:"SELECT"};function q(e){var n,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return o=n=function(n){function o(){return d(this,o),b(this,g(o).apply(this,arguments))}return _(o,n),h(o,[{key:"componentDidMount",value:function(){var e=r.findDOMNode(this);e.sortableHandle=!0}},{key:"getWrappedInstance",value:function(){return w(a.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableHandle() call"),this.refs.wrappedInstance}},{key:"render",value:function(){var n=a.withRef?"wrappedInstance":null;return t.createElement(e,i({ref:n},this.props))}}]),o}(t.Component),u(n,"displayName",L("sortableHandle",e)),o}function z(e){return null!=e.sortableHandle}var K=function(){function e(t,n){d(this,e),this.container=t,this.onScrollCallback=n}return h(e,[{key:"clear",value:function(){clearInterval(this.interval),this.interval=null}},{key:"update",value:function(e){var t=this,n=e.translate,r=e.minTranslate,o=e.maxTranslate,i=e.width,a=e.height,l={x:0,y:0},s={x:1,y:1},c={x:10,y:10},u=this.container,p=u.scrollTop,d=u.scrollLeft,f=u.scrollHeight,h=u.scrollWidth,m=u.clientHeight,y=u.clientWidth,b=0===p,g=f-p-m==0,v=0===d,_=h-d-y==0;n.y>=o.y-a/2&&!g?(l.y=1,s.y=c.y*Math.abs((o.y-a/2-n.y)/a)):n.x>=o.x-i/2&&!_?(l.x=1,s.x=c.x*Math.abs((o.x-i/2-n.x)/i)):n.y<=r.y+a/2&&!b?(l.y=-1,s.y=c.y*Math.abs((n.y-a/2-r.y)/a)):n.x<=r.x+i/2&&!v&&(l.x=-1,s.x=c.x*Math.abs((n.x-i/2-r.x)/i)),this.interval&&(this.clear(),this.isAutoScrolling=!1),0===l.x&&0===l.y||(this.interval=setInterval(function(){t.isAutoScrolling=!0;var e={left:s.x*l.x,top:s.y*l.y};t.container.scrollTop+=e.top,t.container.scrollLeft+=e.left,t.onScrollCallback(e)},5))}}]),e}(),Q={axis:n.oneOf(["x","y","xy"]),contentWindow:n.any,disableAutoscroll:n.bool,distance:n.number,getContainer:n.func,getHelperDimensions:n.func,helperClass:n.string,helperContainer:n.oneOfType([n.func,"undefined"==typeof HTMLElement?n.any:n.instanceOf(HTMLElement)]),hideSortableGhost:n.bool,keyboardSortingTransitionDuration:n.number,lockAxis:n.string,lockOffset:n.oneOfType([n.number,n.string,n.arrayOf(n.oneOfType([n.number,n.string]))]),lockToContainerEdges:n.bool,onSortEnd:n.func,onSortMove:n.func,onSortOver:n.func,onSortStart:n.func,pressDelay:n.number,pressThreshold:n.number,shouldCancelStart:n.func,transitionDuration:n.number,updateBeforeSortStart:n.func,useDragHandle:n.bool,useWindowAsScrollContainer:n.bool},Y={axis:"y",disableAutoscroll:!1,distance:0,getHelperDimensions:function(e){var t=e.node;return{height:t.offsetHeight,width:t.offsetWidth}},hideSortableGhost:!0,lockOffset:"50%",lockToContainerEdges:!1,pressDelay:0,pressThreshold:5,shouldCancelStart:function(e){return-1!==[W.Input,W.Textarea,W.Select,W.Option,W.Button].indexOf(e.target.tagName)||!!D(e.target,function(e){return"true"===e.contentEditable})},transitionDuration:300,useWindowAsScrollContainer:!1},X=Object.keys(Q);function Z(e){var o,a,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return a=o=function(n){function o(e){var t;return d(this,o),t=b(this,g(o).call(this,e)),u(y(y(t)),"handleStart",function(e){var n=t.props,r=n.distance,o=n.shouldCancelStart;if(2!==e.button&&!o(e)){t.touched=!0,t.position=V(e);var i=D(e.target,function(e){return null!=e.sortableInfo});if(i&&i.sortableInfo&&t.nodeIsChild(i)&&!t.state.sorting){var a=t.props.useDragHandle,l=i.sortableInfo,s=l.index,c=l.collection,u=l.disabled;if(u)return;if(a&&!D(e.target,z))return;t.manager.active={collection:c,index:s},function(e){return e.touches&&e.touches.length||e.changedTouches&&e.changedTouches.length}(e)||e.target.tagName!==W.Anchor||e.preventDefault(),r||(0===t.props.pressDelay?t.handlePress(e):t.pressTimer=setTimeout(function(){return t.handlePress(e)},t.props.pressDelay))}}}),u(y(y(t)),"nodeIsChild",function(e){return e.sortableInfo.manager===t.manager}),u(y(y(t)),"handleMove",function(e){var n=t.props,r=n.distance,o=n.pressThreshold;if(!t.state.sorting&&t.touched&&!t._awaitingUpdateBeforeSortStart){var i=V(e),a={x:t.position.x-i.x,y:t.position.y-i.y},l=Math.abs(a.x)+Math.abs(a.y);t.delta=a,r||o&&!(l>=o)?r&&l>=r&&t.manager.isActive()&&t.handlePress(e):(clearTimeout(t.cancelTimer),t.cancelTimer=setTimeout(t.cancel,0))}}),u(y(y(t)),"handleEnd",function(){t.touched=!1,t.cancel()}),u(y(y(t)),"cancel",function(){var e=t.props.distance,n=t.state.sorting;n||(e||clearTimeout(t.pressTimer),t.manager.active=null)}),u(y(y(t)),"handlePress",function(e){try{var n=t.manager.getActive(),r=function(){if(n){var r=function(){var n,r,o,c,y,b,g=f.sortableInfo.index,v=(n=f,{bottom:R((r=window.getComputedStyle(n)).marginBottom),left:R(r.marginLeft),right:R(r.marginRight),top:R(r.marginTop)}),_=t.scrollContainer.getBoundingClientRect(),w=a({collection:h,index:g,node:f});if(t.node=f,t.margin=v,t.width=w.width,t.height=w.height,t.marginOffset={x:t.margin.left+t.margin.right,y:Math.max(t.margin.top,t.margin.bottom)},t.boundingClientRect=f.getBoundingClientRect(),t.containerBoundingRect=_,t.index=g,t.newIndex=g,t.axis={x:i.indexOf("x")>=0,y:i.indexOf("y")>=0},t.offsetEdge=B(f,t.container),t.initialOffset=V(m?p({},e,{pageX:t.boundingClientRect.left,pageY:t.boundingClientRect.top}):e),t.initialScroll={left:t.scrollContainer.scrollLeft,top:t.scrollContainer.scrollTop},t.initialWindowScroll={left:window.pageXOffset,top:window.pageYOffset},t.helper=t.helperContainer.appendChild((c="input, textarea, select, canvas, [contenteditable]",y=(o=f).querySelectorAll(c),b=o.cloneNode(!0),P(b.querySelectorAll(c)).forEach(function(e,t){"file"!==e.type&&(e.value=y[t].value),"radio"===e.type&&e.name&&(e.name="__sortableClone__".concat(e.name)),e.tagName===W.Canvas&&y[t].width>0&&y[t].height>0&&e.getContext("2d").drawImage(y[t],0,0)}),b)),A(t.helper,{boxSizing:"border-box",height:"".concat(t.height,"px"),left:"".concat(t.boundingClientRect.left-v.left,"px"),pointerEvents:"none",position:"fixed",top:"".concat(t.boundingClientRect.top-v.top,"px"),width:"".concat(t.width,"px")}),m&&t.helper.focus(),s&&(t.sortableGhost=f,A(f,{opacity:0,visibility:"hidden"})),t.minTranslate={},t.maxTranslate={},m){var O=d?{top:0,left:0,width:t.contentWindow.innerWidth,height:t.contentWindow.innerHeight}:t.containerBoundingRect,S=O.top,E=O.left,k=O.width,C=O.height,T=S+C,j=E+k;t.axis.x&&(t.minTranslate.x=E-t.boundingClientRect.left,t.maxTranslate.x=j-(t.boundingClientRect.left+t.width)),t.axis.y&&(t.minTranslate.y=S-t.boundingClientRect.top,t.maxTranslate.y=T-(t.boundingClientRect.top+t.height))}else t.axis.x&&(t.minTranslate.x=(d?0:_.left)-t.boundingClientRect.left-t.width/2,t.maxTranslate.x=(d?t.contentWindow.innerWidth:_.left+_.width)-t.boundingClientRect.left-t.width/2),t.axis.y&&(t.minTranslate.y=(d?0:_.top)-t.boundingClientRect.top-t.height/2,t.maxTranslate.y=(d?t.contentWindow.innerHeight:_.top+_.height)-t.boundingClientRect.top-t.height/2);l&&l.split(" ").forEach(function(e){return t.helper.classList.add(e)}),t.listenerNode=e.touches?f:t.contentWindow,m?(t.listenerNode.addEventListener("wheel",t.handleKeyEnd,!0),t.listenerNode.addEventListener("mousedown",t.handleKeyEnd,!0),t.listenerNode.addEventListener("keydown",t.handleKeyDown)):(x.move.forEach(function(e){return t.listenerNode.addEventListener(e,t.handleSortMove,!1)}),x.end.forEach(function(e){return t.listenerNode.addEventListener(e,t.handleSortEnd,!1)})),t.setState({sorting:!0,sortingIndex:g}),u&&u({node:f,index:g,collection:h,isKeySorting:m},e),m&&t.keyMove(0)},o=t.props,i=o.axis,a=o.getHelperDimensions,l=o.helperClass,s=o.hideSortableGhost,c=o.updateBeforeSortStart,u=o.onSortStart,d=o.useWindowAsScrollContainer,f=n.node,h=n.collection,m=t.manager.isKeySorting,y=function(){if("function"==typeof c){t._awaitingUpdateBeforeSortStart=!0;var n=function(e,t){try{var n=e()}catch(e){return t(!0,e)}return n&&n.then?n.then(t.bind(null,!1),t.bind(null,!0)):t(!1,value)}(function(){var t=f.sortableInfo.index;return Promise.resolve(c({collection:h,index:t,node:f,isKeySorting:m},e)).then(function(){})},function(e,n){if(t._awaitingUpdateBeforeSortStart=!1,e)throw n;return n});if(n&&n.then)return n.then(function(){})}}();return y&&y.then?y.then(r):r()}}();return Promise.resolve(r&&r.then?r.then(function(){}):void 0)}catch(e){return Promise.reject(e)}}),u(y(y(t)),"handleSortMove",function(e){var n=t.props.onSortMove;"function"==typeof e.preventDefault&&e.preventDefault(),t.updateHelperPosition(e),t.animateNodes(),t.autoscroll(),n&&n(e)}),u(y(y(t)),"handleSortEnd",function(e){var n=t.props,r=n.hideSortableGhost,o=n.onSortEnd,i=t.manager,a=i.active.collection,l=i.isKeySorting,s=t.manager.refs[a];t.listenerNode&&(l?(t.listenerNode.removeEventListener("wheel",t.handleKeyEnd,!0),t.listenerNode.removeEventListener("mousedown",t.handleKeyEnd,!0),t.listenerNode.removeEventListener("keydown",t.handleKeyDown)):(x.move.forEach(function(e){return t.listenerNode.removeEventListener(e,t.handleSortMove)}),x.end.forEach(function(e){return t.listenerNode.removeEventListener(e,t.handleSortEnd)}))),t.helper.parentNode.removeChild(t.helper),r&&t.sortableGhost&&A(t.sortableGhost,{opacity:"",visibility:""});for(var c=0,u=s.length;c<u;c++){var p=s[c],d=p.node;p.edgeOffset=null,p.boundingClientRect=null,I(d,null),M(d,null),p.translate=null}t.autoScroller.clear(),t.manager.active=null,t.manager.isKeySorting=!1,t.setState({sorting:!1,sortingIndex:null}),"function"==typeof o&&o({collection:a,newIndex:t.newIndex,oldIndex:t.index,isKeySorting:l},e),t.touched=!1}),u(y(y(t)),"autoscroll",function(){var e=t.props.disableAutoscroll,n=t.manager.isKeySorting;if(!e){if(n){var r=p({},t.translate),o=0,i=0;return t.axis.x&&(r.x=Math.min(t.maxTranslate.x,Math.max(t.minTranslate.x,t.translate.x)),o=t.translate.x-r.x),t.axis.y&&(r.y=Math.min(t.maxTranslate.y,Math.max(t.minTranslate.y,t.translate.y)),i=t.translate.y-r.y),t.translate=r,I(t.helper,t.translate),t.scrollContainer.scrollLeft+=o,void(t.scrollContainer.scrollTop+=i)}t.autoScroller.update({height:t.height,maxTranslate:t.maxTranslate,minTranslate:t.minTranslate,translate:t.translate,width:t.width})}}),u(y(y(t)),"onAutoScroll",function(e){t.translate.x+=e.left,t.translate.y+=e.top,t.animateNodes()}),u(y(y(t)),"handleKeyDown",function(e){var n=e.keyCode,r=t.props.shouldCancelStart;if((!t.manager.active||t.manager.isKeySorting)&&(t.manager.active||n===U.SPACE&&!r(e)&&t.isValidSortingTarget(e)))switch(e.stopPropagation(),e.preventDefault(),n){case U.SPACE:t.manager.active?t.keyDrop(e):t.keyLift(e);break;case U.DOWN:case U.RIGHT:t.keyMove(1);break;case U.UP:case U.LEFT:t.keyMove(-1);break;case U.ESC:t.newIndex=t.manager.active.index,t.keyDrop(e)}}),u(y(y(t)),"keyLift",function(e){var n=e.target,r=D(n,function(e){return null!=e.sortableInfo}),o=r.sortableInfo,i=o.index,a=o.collection;t.initialFocusedNode=n,t.manager.isKeySorting=!0,t.manager.active={index:i,collection:a},t.handlePress(e)}),u(y(y(t)),"keyMove",function(e){var n=t.manager.getOrderedRefs(),r=n[n.length-1].node.sortableInfo.index,o=t.newIndex+e,i=t.newIndex;if(!(o<0||o>r)){t.prevIndex=i,t.newIndex=o;var a=function(e,t,n){return e<n&&e>t?e-1:e>n&&e<t?e+1:e}(t.newIndex,t.prevIndex,t.index),l=n.find(function(e){var t=e.node;return t.sortableInfo.index===a}),s=l.node,c=t.containerScrollDelta,u=l.boundingClientRect||G(s,c),p=l.translate||{x:0,y:0},d={top:u.top+p.y-c.top,left:u.left+p.x-c.left},f=i<o,h={x:f&&t.axis.x?s.offsetWidth-t.width:0,y:f&&t.axis.y?s.offsetHeight-t.height:0};t.handleSortMove({pageX:d.left+h.x,pageY:d.top+h.y,ignoreTransition:0===e})}}),u(y(y(t)),"keyDrop",function(e){t.handleSortEnd(e),t.initialFocusedNode&&t.initialFocusedNode.focus()}),u(y(y(t)),"handleKeyEnd",function(e){t.manager.active&&t.keyDrop(e)}),u(y(y(t)),"isValidSortingTarget",function(e){var n=t.props.useDragHandle,r=e.target,o=D(r,function(e){return null!=e.sortableInfo});return o&&o.sortableInfo&&!o.sortableInfo.disabled&&(n?z(r):r.sortableInfo)}),function(e){w(!(e.distance&&e.pressDelay),"Attempted to set both `pressDelay` and `distance` on SortableContainer, you may only use one or the other, not both at the same time.")}(e),t.state={},t.manager=new O,t.events={end:t.handleEnd,move:t.handleMove,start:t.handleStart},t}return _(o,n),h(o,[{key:"getChildContext",value:function(){return{manager:this.manager}}},{key:"componentDidMount",value:function(){var e=this,t=this.props.useWindowAsScrollContainer,n=this.getContainer();Promise.resolve(n).then(function(n){e.container=n,e.document=e.container.ownerDocument||document;var r=e.props.contentWindow||e.document.defaultView||window;e.contentWindow="function"==typeof r?r():r,e.scrollContainer=t?e.document.scrollingElement||e.document.documentElement:H(e.container)||e.container,e.autoScroller=new K(e.scrollContainer,e.onAutoScroll),Object.keys(e.events).forEach(function(t){return x[t].forEach(function(n){return e.container.addEventListener(n,e.events[t],!1)})}),e.container.addEventListener("keydown",e.handleKeyDown)})}},{key:"componentWillUnmount",value:function(){var e=this;this.helper&&this.helper.parentNode&&this.helper.parentNode.removeChild(this.helper),this.container&&(Object.keys(this.events).forEach(function(t){return x[t].forEach(function(n){return e.container.removeEventListener(n,e.events[t])})}),this.container.removeEventListener("keydown",this.handleKeyDown))}},{key:"updateHelperPosition",value:function(e){var t=this.props,n=t.lockAxis,r=t.lockOffset,o=t.lockToContainerEdges,i=t.transitionDuration,a=t.keyboardSortingTransitionDuration,l=void 0===a?i:a,s=this.manager.isKeySorting,u=e.ignoreTransition,p=V(e),d={x:p.x-this.initialOffset.x,y:p.y-this.initialOffset.y};if(d.y-=window.pageYOffset-this.initialWindowScroll.top,d.x-=window.pageXOffset-this.initialWindowScroll.left,this.translate=d,o){var f=function(e){var t=e.height,n=e.width,r=e.lockOffset,o=Array.isArray(r)?r:[r,r];w(2===o.length,"lockOffset prop of SortableContainer should be a single value or an array of exactly two values. Given %s",r);var i=c(o,2),a=i[0],l=i[1];return[F({height:t,lockOffset:a,width:n}),F({height:t,lockOffset:l,width:n})]}({height:this.height,lockOffset:r,width:this.width}),h=c(f,2),m=h[0],y=h[1],b={x:this.width/2-m.x,y:this.height/2-m.y},g={x:this.width/2-y.x,y:this.height/2-y.y};d.x=N(this.minTranslate.x+b.x,this.maxTranslate.x-g.x,d.x),d.y=N(this.minTranslate.y+b.y,this.maxTranslate.y-g.y,d.y)}"x"===n?d.y=0:"y"===n&&(d.x=0),s&&l&&!u&&M(this.helper,l),I(this.helper,d)}},{key:"animateNodes",value:function(){var e=this.props,t=e.transitionDuration,n=e.hideSortableGhost,r=e.onSortOver,o=this.containerScrollDelta,i=this.windowScrollDelta,a=this.manager.getOrderedRefs(),l={left:this.offsetEdge.left+this.translate.x+o.left,top:this.offsetEdge.top+this.translate.y+o.top},s=this.manager.isKeySorting,c=this.newIndex;this.newIndex=null;for(var u=0,p=a.length;u<p;u++){var d=a[u].node,f=d.sortableInfo.index,h=d.offsetWidth,m=d.offsetHeight,y={height:this.height>m?m/2:this.height/2,width:this.width>h?h/2:this.width/2},b=s&&f>this.index&&f<=c,g=s&&f<this.index&&f>=c,v={x:0,y:0},_=a[u].edgeOffset;_||(_=B(d,this.container),a[u].edgeOffset=_,s&&(a[u].boundingClientRect=G(d,o)));var w=u<a.length-1&&a[u+1],O=u>0&&a[u-1];w&&!w.edgeOffset&&(w.edgeOffset=B(w.node,this.container),s&&(w.boundingClientRect=G(w.node,o))),f!==this.index?(t&&M(d,t),this.axis.x?this.axis.y?g||f<this.index&&(l.left+i.left-y.width<=_.left&&l.top+i.top<=_.top+y.height||l.top+i.top+y.height<=_.top)?(v.x=this.width+this.marginOffset.x,_.left+v.x>this.containerBoundingRect.width-y.width&&w&&(v.x=w.edgeOffset.left-_.left,v.y=w.edgeOffset.top-_.top),null===this.newIndex&&(this.newIndex=f)):(b||f>this.index&&(l.left+i.left+y.width>=_.left&&l.top+i.top+y.height>=_.top||l.top+i.top+y.height>=_.top+m))&&(v.x=-(this.width+this.marginOffset.x),_.left+v.x<this.containerBoundingRect.left+y.width&&O&&(v.x=O.edgeOffset.left-_.left,v.y=O.edgeOffset.top-_.top),this.newIndex=f):b||f>this.index&&l.left+i.left+y.width>=_.left?(v.x=-(this.width+this.marginOffset.x),this.newIndex=f):(g||f<this.index&&l.left+i.left<=_.left+y.width)&&(v.x=this.width+this.marginOffset.x,null==this.newIndex&&(this.newIndex=f)):this.axis.y&&(b||f>this.index&&l.top+i.top+y.height>=_.top?(v.y=-(this.height+this.marginOffset.y),this.newIndex=f):(g||f<this.index&&l.top+i.top<=_.top+y.height)&&(v.y=this.height+this.marginOffset.y,null==this.newIndex&&(this.newIndex=f))),I(d,v),a[u].translate=v):n&&(this.sortableGhost=d,A(d,{opacity:0,visibility:"hidden"}))}null==this.newIndex&&(this.newIndex=this.index),s&&(this.newIndex=c);var S=s?this.prevIndex:c;r&&this.newIndex!==S&&r({collection:this.manager.active.collection,index:this.index,newIndex:this.newIndex,oldIndex:S,isKeySorting:s})}},{key:"getWrappedInstance",value:function(){return w(l.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableContainer() call"),this.refs.wrappedInstance}},{key:"getContainer",value:function(){var e=this.props.getContainer;return"function"!=typeof e?r.findDOMNode(this):e(l.withRef?this.getWrappedInstance():void 0)}},{key:"render",value:function(){var n=l.withRef?"wrappedInstance":null;return t.createElement(e,i({ref:n},T(this.props,X)))}},{key:"helperContainer",get:function(){var e=this.props.helperContainer;return"function"==typeof e?e():this.props.helperContainer||this.document.body}},{key:"containerScrollDelta",get:function(){var e=this.props.useWindowAsScrollContainer;return e?{left:0,top:0}:{left:this.scrollContainer.scrollLeft-this.initialScroll.left,top:this.scrollContainer.scrollTop-this.initialScroll.top}}},{key:"windowScrollDelta",get:function(){return{left:this.contentWindow.pageXOffset-this.initialWindowScroll.left,top:this.contentWindow.pageYOffset-this.initialWindowScroll.top}}}]),o}(t.Component),u(o,"displayName",L("sortableList",e)),u(o,"defaultProps",Y),u(o,"propTypes",Q),u(o,"childContextTypes",{manager:n.object.isRequired}),a}var J={index:n.number.isRequired,collection:n.oneOfType([n.number,n.string]),disabled:n.bool},$=Object.keys(J);function ee(e){var o,a,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return a=o=function(n){function o(){return d(this,o),b(this,g(o).apply(this,arguments))}return _(o,n),h(o,[{key:"componentDidMount",value:function(){this.register()}},{key:"componentDidUpdate",value:function(e){this.node&&(e.index!==this.props.index&&(this.node.sortableInfo.index=this.props.index),e.disabled!==this.props.disabled&&(this.node.sortableInfo.disabled=this.props.disabled)),e.collection!==this.props.collection&&(this.unregister(e.collection),this.register())}},{key:"componentWillUnmount",value:function(){this.unregister()}},{key:"register",value:function(){var e=this.props,t=e.collection,n=e.disabled,o=e.index,i=r.findDOMNode(this);i.sortableInfo={collection:t,disabled:n,index:o,manager:this.context.manager},this.node=i,this.ref={node:i},this.context.manager.add(t,this.ref)}},{key:"unregister",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.collection;this.context.manager.remove(e,this.ref)}},{key:"getWrappedInstance",value:function(){return w(l.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableElement() call"),this.refs.wrappedInstance}},{key:"render",value:function(){var n=l.withRef?"wrappedInstance":null;return t.createElement(e,i({ref:n},T(this.props,$)))}}]),o}(t.Component),u(o,"displayName",L("sortableElement",e)),u(o,"contextTypes",{manager:n.object.isRequired}),u(o,"propTypes",J),u(o,"defaultProps",{collection:0}),a}e.SortableContainer=Z,e.sortableContainer=Z,e.SortableElement=ee,e.sortableElement=ee,e.SortableHandle=q,e.sortableHandle=q,e.arrayMove=function(e,t,n){return"undefined"!=typeof console&&console.warn("Deprecation warning: arrayMove will no longer be exported by 'react-sortable-hoc' in the next major release. Please install the `array-move` package locally instead. https://www.npmjs.com/package/array-move"),(e=e.slice()).splice(n<0?e.length+n:n,0,e.splice(t,1)[0]),e},Object.defineProperty(e,"__esModule",{value:!0})}(t,n(0),n(4),n(29))},845:function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(2),a=n(60),l=n.n(a),s=n(12),c=n(175),u=n(140);function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var y=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":m(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,f(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement(c.default,{name:this.props.name,value:this.props.value,onChange:this.props.onChange,options:Object(u.c)(this.props.molecularProfiles),searchable:!1,clearable:!1,className:this.props.className})}}])&&p(n.prototype,o),i&&p(n,i),t}(),g=b=y([o.observer],b),v=n(1),_=n.n(v),w=n(3),O=n(810),S=n.n(O);function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var x=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":T(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},j=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=k(t).call(this,e))||"object"!==T(o)&&"function"!=typeof o?C(r):o,Object(i.makeObservable)(C(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,r["Component"]),n=t,(o=[{key:"change",value:function(e,t){var n=this,r=_.a.mapValues(this.props.selectedProfileByStudyId,function(r,o){return e===o?n.molecularProfileMap[t.value]:n.molecularProfileMap[r.molecularProfileId]});_.a.isEqual(this.props.selectedProfileByStudyId,r)||this.props.onChange(r)}},{key:"render",value:function(){var e=this;if(this.showEnrichmentsDataSetDropdown||this.props.alwaysShow){var t=_.a.groupBy(this.props.dataSets,function(e){return e.studyId}),n=Object.keys(t).length>1;return _.a.map(t,function(t,o){var i=_.a.find(t,function(t){return t.molecularProfileId===e.props.selectedProfileByStudyId[o].molecularProfileId});return r.createElement("div",{className:l.a.DataSet},r.createElement("div",{style:{display:"flex",alignItems:"center"}},r.createElement("strong",null,n?e.studiesMap[o].name+" ":"","Data Set:"),r.createElement("div",{style:{display:"inline-block",marginLeft:5,width:400}},r.createElement(g,{value:e.props.selectedProfileByStudyId[o].molecularProfileId,molecularProfiles:t,onChange:function(t){return e.change(o,t)}})),e.props.showDescription&&i.description&&r.createElement(w.i,{mouseEnterDelay:0,placement:"right",overlay:r.createElement("div",{className:l.a.ProfileTooltip},i.description)},r.createElement(S.a,{className:l.a.ProfileInfoIcon,name:"info-circle"}))))})}return null}},{key:"studiesMap",get:function(){return _.a.keyBy(this.props.studies,function(e){return e.studyId})}},{key:"molecularProfileMap",get:function(){return _.a.keyBy(this.props.dataSets,function(e){return e.molecularProfileId})}},{key:"showEnrichmentsDataSetDropdown",get:function(){var e=_.a.groupBy(this.props.dataSets,function(e){return e.studyId});return _.a.some(e,function(e){return e.length>1})}}])&&E(n.prototype,o),a&&E(n,a),t}();x([s.default],j.prototype,"change",null),x([i.computed],j.prototype,"studiesMap",null),x([i.computed],j.prototype,"molecularProfileMap",null),x([i.computed],j.prototype,"showEnrichmentsDataSetDropdown",null),j=x([o.observer],j);t.a=j},846:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(0),o=n(23),i=n(72);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p={marginTop:0},d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,c(t).apply(this,arguments))}var n,a,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){return r.createElement(o.If,{condition:this.props.isHidden},r.createElement(o.Else,null,r.createElement("h2",{style:this.props.style||p,className:this.props.className||""},this.props.title,r.createElement(i.a,{isLoading:this.props.isLoading,small:!0}))))}}])&&l(n.prototype,a),d&&l(n,d),t}()},847:function(e,t,n){e.exports=n(35)(132)},848:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(0),o=n(3);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,s(t).apply(this,arguments))}var n,i,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r["Component"]),n=t,(i=[{key:"render",value:function(){return r.createElement(o.i,{overlay:this.props.tooltip},r.createElement("i",{className:"fa fa-md fa-exclamation-triangle",style:Object.assign({},{color:"#BB1700",cursor:"pointer"},this.props.style||{})}))}}])&&a(n.prototype,i),u&&a(n,u),t}()},851:function(e,t,n){"use strict";var r=n(1),o=n.n(r);function i(e,t){for(var n,r=0,o=e.length;r<o;)switch(t(e[n=Math.floor((r+o)/2)],n)){case 1:o=n;break;case-1:r=n+1;break;case 0:return n}}var a=n(93),l=n.n(a),s=n(1103),c=n.n(s);function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",function(){return w});var p=c()(),d=(p.Vector,p.Matrix),f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"deathEvents",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"deathsByMonth",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"censorEvents",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"censorsByMonth",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.deathEvents=o.a.sortBy(t.filter(function(e){return e.status}),function(e){return e.months}),this.deathsByMonth=o.a.groupBy(this.deathEvents,function(e){return e.months}),this.censorEvents=o.a.sortBy(t.filter(function(e){return!e.status}),function(e){return e.months}),this.censorsByMonth=o.a.groupBy(this.censorEvents,function(e){return e.months})}var t,n,r;return t=e,(n=[{key:"getTotalEventsAtStartOf",value:function(e,t){return 0===e.length||t<=e[0].months?0:i(e,function(n,r){return n.months<t?r===e.length-1||e[r+1].months>=t?0:-1:1})+1}},{key:"getTotalDeathsAtStartOf",value:function(e){return this.getTotalEventsAtStartOf(this.deathEvents,e)}},{key:"getTotalCensorsAtStartOf",value:function(e){return this.getTotalEventsAtStartOf(this.censorEvents,e)}},{key:"getDeathsExactlyAt",value:function(e){return(this.deathsByMonth[e]||[]).length}},{key:"getCensorsExactlyAt",value:function(e){return(this.censorsByMonth[e]||[]).length}},{key:"getTotalAtRiskAtStartOf",value:function(e){return this.events.length-this.getTotalDeathsAtStartOf(e)-this.getTotalCensorsAtStartOf(e)}}])&&u(t.prototype,n),r&&u(t,r),e}(),h=o.a.map,m=o.a.sortBy,y=o.a.groupBy,b=o.a.reduce,g=o.a.last,v=o.a.filter;function _(e,t,n){var r,i,a,s,c,u,p,f,_,w,O,S=null,E=[],k=[],C=[];for(o.a.each(t,function(t,r){var i,a,l,s,c,u,p,d={tte:t,ev:n[r]},f=(i=e,a=d.ev,l=m(h(d.tte,function(e,t){return{tte:e,ev:a[t]}}),"tte"),s=o.a.uniq(h(l,"tte")),c=y(l,function(e){return e.tte}),u=b(s,function(e,t){var n=c[t],r=g(e)||{n:l.length,e:0},o=v(n,function(e){return e.ev});return e.push({n:r.n-r.e,e:n.length,d:o.length,t:n[0].tte}),e},[]),p=[],i=i.filter(function(e){return!!e.d}),{expected:b(i,function(e,t){var n=o.a.find(u,function(e){return e.t===t.t||e.t>t.t});if(n){var r=n.n*t.rate;return p.push(n),e+r}return e},0),observed:v(a,function(e){return 1===e}).length,dataByTimeTable:p,timeNumber:p.length});f.expected&&(E.push(f),k.push(f.observed-f.expected))}),i=E.length-1,a=0;a<E.length;a++)for(C.push([]),s=0;s<E.length;s++)C[a].push(0);for(a=0;a<E.length;a++)for(s=a;s<E.length;s++)for(c=0;c<e.length;c++)f=e[c].n,O=e[c].d,c<E[a].timeNumber&&c<E[s].timeNumber&&(_=E[a].dataByTimeTable[c].n,w=E[s].dataByTimeTable[c].n,a!==s&&1!==f?(C[a][s]-=O*_*w*(f-O)/(f*f*(f-1)),C[s][a]=C[a][s]):1!==f&&(C[a][a]+=O*_*(f-_)*(f-O)/(f*f*(f-1))));for(u=k.slice(0,k.length-1),p=C.slice(0,C.length-1),a=0;a<p.length;a++)p[a]=p[a].slice(0,p[a].length-1);var P=p.slice(0,p.length);for(a=0;a<p.length;a++)P[a]=p[a].slice(0,p[a].length);if(i>0){var T=new d([u]),x=new d([u]).trans(),j=new d(l.a.inv(P));r=T.dot(j).dot(x).data[0][0],S=1-l.a.chisquare.cdf(r,i)}return{dof:i,KM_stats:r,pValue:S}}function w(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=o.a.sortBy(o.a.flatten(t),function(e){return e.months}),i=new f(r),a=t.map(function(e){return o.a.sortBy(e,function(e){return e.months})}),l=a.map(function(e){return e.map(function(e){return e.months})}),s=a.map(function(e){return e.map(function(e){return+e.status})});return _(o.a.uniqBy(r,function(e){return e.months}).map(function(e){return{t:e.months,d:i.getDeathsExactlyAt(e.months),n:i.getTotalAtRiskAtStartOf(e.months),rate:i.getDeathsExactlyAt(e.months)/i.getTotalAtRiskAtStartOf(e.months)}}).filter(function(e){return e.d>0}),l,s).pValue}},852:function(e,t,n){e.exports=n(35)(50)},853:function(e,t,n){e.exports=n(35)(485)},854:function(e,t,n){e.exports=n(35)(131)},855:function(e,t,n){"use strict";function r(e,t){var n=t.indexOf(e);if(-1===n)return t.concat([e]);var r=t.slice();return r.splice(n,1),r}function o(e,t){for(var n=[],r=0;r<t.length;r++)n.push(t[r]),r<t.length-1&&n.push(e);return n}n.d(t,"b",function(){return r}),n.d(t,"a",function(){return o})},856:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"c",function(){return l}),n.d(t,"g",function(){return s}),n.d(t,"f",function(){return c}),n.d(t,"e",function(){return u}),n.d(t,"d",function(){return p}),n.d(t,"b",function(){return d});var r=n(1),o=n(6);function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var a="all";function l(){return{name:"CNA",type:"seg",displayMode:"FILL",features:[]}}function s(e){return r.keyBy(e||[],"name")}function c(e,t){var n=s(e),o=s(t),a=t.filter(function(e){return!r.isEqual(o[e.name],n[e.name])}).map(function(e){return e.name}),l=r.difference(e.map(function(e){return e.name}),t.map(function(e){return e.name}));return[].concat(i(a),i(l))}function u(e){var t=e.map(function(e){return[e.sampleId,e.chromosome,e.start,e.end,e.numberOfProbes,e.segmentMean]});return[["ID","chrom","loc.start","loc.end","num.mark","seg.mean"]].concat(i(t)).map(function(e){return e.join("\t")}).join("\n")}function p(e){return e.map(function(e){return{chr:Object(o.mb)(e.chromosome),start:e.start,end:e.end,value:e.segmentMean,sample:e.sampleId,patient:e.patientId,study:e.studyId,numberOfProbes:e.numberOfProbes,sampleKey:e.uniqueSampleKey}})}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:600,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return Math.max(Math.min(t,r.uniq(e.map(function(e){return e.sampleKey})).length*o),n)}},857:function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty;function o(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}e.exports=function(e,t){if(o(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(var a=0;a<n.length;a++)if(!r.call(t,n[a])||!o(e[n[a]],t[n[a]]))return!1;return!0}},858:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(0),i=(r=o)&&r.__esModule?r:{default:r},a=n(1074),l=n(917),s=n(918),c=n(859),u=n(919),p=n(916),d=n(1080),f=n(839);i.default.Children.children=function(e){return i.default.Children.map(e,function(e){return e})||[]},Array.prototype.find||Object.defineProperty(Array.prototype,"find",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),r=n.length>>>0,o=arguments[1],i=0;i<r;i++)if(i in n&&(t=n[i],e.call(o,t,i,n)))return t}});var h={Table:a.Table,Tr:l.Tr,Td:s.Td,Th:c.Th,Tfoot:u.Tfoot,Thead:p.Thead,Sort:d.Sort,unsafe:f.unsafe};t.default=h,"undefined"!=typeof window&&(window.Reactable=h),e.exports=t.default},859:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,i);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(a)}var c=Object.getPrototypeOf(o);if(null===c)return;e=c,t=i,n=a,r=!0,l=c=void 0}};var a,l=n(0),s=(a=l)&&a.__esModule?a:{default:a},c=n(839),u=n(826),p=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["default"].Component),o(t,[{key:"render",value:function(){return(0,c.isUnsafe)(this.props.children)?s.default.createElement("th",r({},(0,u.filterPropsFrom)(this.props),{dangerouslySetInnerHTML:{__html:this.props.children.toString()}})):s.default.createElement("th",(0,u.filterPropsFrom)(this.props),this.props.children)}}]),t}();t.Th=p},860:function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(2),a=n(165),l=n(60),s=n.n(l),c=n(98),u=n(925),p=n(861),d=n(1),f=n(12),h=n(928),m=n(3),y=n(929);function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var O=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":w(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},S=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=g(t).call(this,e),n=!o||"object"!==w(o)&&"function"!=typeof o?v(r):o,Object.defineProperty(v(n),"overExpressedFilter",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(v(n),"underExpressedFilter",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(v(n),"significanceFilter",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(v(n),"checkedGenes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(v(n),"clickedGeneHugo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(v(n),"clickedGeneEntrez",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(v(n),"selectedGenes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(v(n),"highlightedRow",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(v(n),"_expressedGroups",{enumerable:!0,configurable:!0,writable:!0,value:n.props.groups.map(function(e){return e.name})}),Object.defineProperty(v(n),"svgContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(v(n),"dataStore",{enumerable:!0,configurable:!0,writable:!0,value:new h.a(function(){return n.filteredData},function(){return n.highlightedRow},function(e){n.highlightedRow=e})}),Object(i.makeObservable)(v(n)),n}var n,o,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,r["Component"]),n=t,(o=[{key:"filterByGene",value:function(e){return!this.selectedGenes||this.selectedGenes.includes(e)}},{key:"toggleSignificanceFilter",value:function(){this.significanceFilter=!this.significanceFilter}},{key:"onCheckGene",value:function(e){var t=this.checkedGenes.indexOf(e);-1!==t?this.checkedGenes.splice(t,1):this.checkedGenes.push(e)}},{key:"onGeneNameClick",value:function(e,t){this.clickedGeneHugo=e,this.clickedGeneEntrez=t}},{key:"onSelection",value:function(e){this.selectedGenes=e}},{key:"onSelectionCleared",value:function(){this.selectedGenes=null}},{key:"onChange",value:function(e){this._expressedGroups=d.map(e,function(e){return e.value})}},{key:"render",value:function(){if(0===this.props.data.length)return r.createElement("div",{className:"alert alert-info"},"No data/result available");var e=Object(c.o)(this.data,this.props.queriedHugoGeneSymbols||[]),t=d.maxBy(e,function(e){return Math.ceil(Math.abs(e.x))});return r.createElement("div",{className:s.a.Container},r.createElement("div",{className:s.a.ChartsPanel},this.isTwoGroupAnalysis&&r.createElement(p.a,{data:e,selectedSet:this.selectedGenesSet,xAxisLeftLabel:this.group2.nameOfEnrichmentDirection||this.group2.name,xAxisRightLabel:this.group1.nameOfEnrichmentDirection||this.group1.name,xAxisDomain:Math.ceil(Math.abs(t.x)),xAxisTickValues:null,onGeneNameClick:this.onGeneNameClick,onSelection:this.onSelection,onSelectionCleared:this.onSelectionCleared}),r.createElement(y.a,{selectedProfile:this.props.selectedProfile,groups:this.props.groups,sampleKeyToSample:this.props.sampleKeyToSample,queriedHugoGeneSymbols:this.props.queriedHugoGeneSymbols,oqlFilteredCaseAggregatedData:this.props.oqlFilteredCaseAggregatedData,selectedRow:this.selectedRow,enrichmentType:this.props.enrichmentType})),r.createElement("div",{className:s.a.TableContainer},r.createElement("div",null,r.createElement("h3",null,this.props.selectedProfile.name),!!this.props.isGeneCheckBoxEnabled&&r.createElement(u.a,{checkedGenes:this.checkedGenes})),r.createElement("hr",{style:{marginTop:0,marginBottom:5,borderWidth:2}}),r.createElement("div",{className:s.a.Checkboxes},r.createElement("div",{style:{width:250,marginRight:7}},r.createElement(m.g,{name:"groupsSelector",placeholder:this.props.groupsSelectorPlaceholder,onChange:this.onChange,options:this.options,value:this.selectedValues})),r.createElement("div",{className:s.a.FlexCheckbox},r.createElement("label",null,r.createElement("input",{type:"checkbox",checked:this.significanceFilter,onClick:this.toggleSignificanceFilter}),"Significant only"))),r.createElement(a.b,{data:this.filteredData,onCheckGene:this.props.isGeneCheckBoxEnabled?this.onCheckGene:void 0,onGeneNameClick:this.onGeneNameClick,dataStore:this.dataStore,mutexTendency:this.props.alteredVsUnalteredMode,checkedGenes:this.props.isGeneCheckBoxEnabled?this.checkedGenes:void 0,visibleOrderedColumnNames:this.visibleOrderedColumnNames,customColumns:d.keyBy(this.customColumns,function(e){return e.uniqueName||e.name})})))}},{key:"data",get:function(){return Object(c.n)(this.props.data,this.props.queriedHugoGeneSymbols||[],this.props.groups)}},{key:"filteredData",get:function(){return Object(c.p)(this.data,this._expressedGroups,this.significanceFilter,this.filterByGene)}},{key:"group1",get:function(){return this.props.groups[0]}},{key:"group2",get:function(){return this.props.groups[1]}},{key:"group1CheckboxLabel",get:function(){return this.props.alteredVsUnalteredMode?"Over-expressed":r.createElement("span",{style:{display:"flex",alignItems:"center"}},"Enriched in ",r.createElement(m.m,{text:this.group1.name}))}},{key:"group2CheckboxLabel",get:function(){return this.props.alteredVsUnalteredMode?"Under-expressed":r.createElement("span",{style:{display:"flex",alignItems:"center"}},"Enriched in ",r.createElement(m.m,{text:this.group2.name}))}},{key:"selectedGenesSet",get:function(){return d.keyBy(this.selectedGenes||[])}},{key:"isTwoGroupAnalysis",get:function(){return 2==this.props.groups.length}},{key:"customColumns",get:function(){return Object(c.m)(this.props.groups,this.props.enrichmentType,this.props.alteredVsUnalteredMode)}},{key:"visibleOrderedColumnNames",get:function(){var e=[];return e.push(a.a.GENE,a.a.CYTOBAND),this.props.groups.forEach(function(t){e.push(t.name+" mean")}),this.props.groups.forEach(function(t){e.push(t.name+" standard deviation")}),this.isTwoGroupAnalysis&&e.push(a.a.LOG_RATIO),e.push(a.a.P_VALUE,a.a.Q_VALUE),this.isTwoGroupAnalysis&&this.props.alteredVsUnalteredMode?e.push(a.a.TENDENCY):this.props.enrichmentType===c.e.DNA_METHYLATION?e.push(a.a.METHYLATION):e.push(a.a.EXPRESSED),e}},{key:"selectedValues",get:function(){return this._expressedGroups.map(function(e){return{value:e}})}},{key:"options",get:function(){return d.map(this.props.groups,function(e){return{label:e.nameOfEnrichmentDirection?e.nameOfEnrichmentDirection:e.name,value:e.name}})}},{key:"selectedRow",get:function(){var e=this;if(this.clickedGeneHugo)return this.props.data.filter(function(t){return t.hugoGeneSymbol===e.clickedGeneHugo})[0]}}])&&b(n.prototype,o),l&&b(n,l),t}();Object.defineProperty(S,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{alteredVsUnalteredMode:!0,isGeneCheckBoxEnabled:!1,groupsSelectorPlaceholder:"High expression in ..."}}),O([i.observable],S.prototype,"overExpressedFilter",void 0),O([i.observable],S.prototype,"underExpressedFilter",void 0),O([i.observable],S.prototype,"significanceFilter",void 0),O([i.observable.shallow],S.prototype,"checkedGenes",void 0),O([i.observable.ref],S.prototype,"clickedGeneHugo",void 0),O([i.observable],S.prototype,"clickedGeneEntrez",void 0),O([i.observable.ref],S.prototype,"selectedGenes",void 0),O([i.observable.ref],S.prototype,"highlightedRow",void 0),O([i.observable.ref],S.prototype,"_expressedGroups",void 0),O([i.observable],S.prototype,"svgContainer",void 0),O([i.computed],S.prototype,"data",null),O([i.computed],S.prototype,"filteredData",null),O([f.default],S.prototype,"filterByGene",null),O([f.default],S.prototype,"toggleSignificanceFilter",null),O([f.default],S.prototype,"onCheckGene",null),O([f.default],S.prototype,"onGeneNameClick",null),O([f.default],S.prototype,"onSelection",null),O([f.default],S.prototype,"onSelectionCleared",null),O([i.computed],S.prototype,"group1",null),O([i.computed],S.prototype,"group2",null),O([i.computed],S.prototype,"group1CheckboxLabel",null),O([i.computed],S.prototype,"group2CheckboxLabel",null),O([i.computed],S.prototype,"selectedGenesSet",null),O([i.computed],S.prototype,"isTwoGroupAnalysis",null),O([i.computed],S.prototype,"customColumns",null),O([i.computed],S.prototype,"visibleOrderedColumnNames",null),O([i.action.bound],S.prototype,"onChange",null),O([i.computed],S.prototype,"selectedValues",null),O([i.computed],S.prototype,"options",null),O([i.computed],S.prototype,"selectedRow",null),S=O([o.observer],S),t.a=S},861:function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(18),a=n(2),l=n(17),s=n(45),c=n(56),u=n(12),p=n(926),d=n(927),f=n(3);function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var v=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":g(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},_=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=m(t).call(this,e))||"object"!==g(o)&&"function"!=typeof o?y(r):o,Object.defineProperty(y(n),"tooltipModel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(y(n),"svgContainer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(y(n),"dragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object(a.makeObservable)(y(n)),n}var n,u,v;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,r["Component"]),n=t,(u=[{key:"svgRef",value:function(e){this.svgContainer=e&&e.children?e.children[0]:null}},{key:"handleSelection",value:function(e,t,n){this.isGenericAssay?this.props.onSelection(e[0].data.map(function(e){return e.stableId})):this.props.onSelection(e[0].data.map(function(e){return e.hugoGeneSymbol}))}},{key:"handleSelectionCleared",value:function(){this.tooltipModel&&(this.isGenericAssay?this.props.onGenericAssayEntityClick(this.tooltipModel.stableId):this.props.onGeneNameClick&&this.props.onGeneNameClick(this.tooltipModel.hugoGeneSymbol,this.tooltipModel.entrezGeneId)),this.props.onSelectionCleared()}},{key:"onPointMouseOver",value:function(e,t,n){this.tooltipModel=e,this.tooltipModel.x=t,this.tooltipModel.y=n}},{key:"onPointMouseOut",value:function(){this.tooltipModel=null}},{key:"getTooltip",value:function(){return this.tooltipModel?r.createElement(l.Popover,{className:"cbioTooltip",positionLeft:this.tooltipModel.x+15,positionTop:this.tooltipModel.y-33},this.isGenericAssay?"Entity: ".concat(this.tooltipModel.entityName||this.tooltipModel.stableId):"Gene: ".concat(this.tooltipModel.hugoGeneSymbol),r.createElement("br",null),"Log Ratio: ",Object(s.a)(this.tooltipModel.logRatio),r.createElement("br",null),"p-Value:"," ",Object(c.b)(this.tooltipModel.pValue,3,.01),r.createElement("br",null),"q-Value:"," ",Object(c.b)(this.tooltipModel.qValue,3,.01)):r.createElement("span",null)}},{key:"onClick",value:function(){this.dragging||this.handleSelectionCleared(),this.dragging=!1}},{key:"onSelectionComponentRender",value:function(){this.dragging=!0}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:"posRelative"},r.createElement("div",{className:"borderedChart inlineBlock",style:{position:"relative"},onClick:this.onClick},r.createElement(i.VictoryChart,{containerComponent:r.createElement(i.VictorySelectionContainer,{containerRef:this.svgRef,activateSelectedData:!1,onSelection:function(t,n,r){return e.handleSelection(t,n,r)},responsive:!1,onSelectionCleared:this.handleSelectionCleared,selectionComponent:r.createElement(p.a,{onRender:this.onSelectionComponentRender})}),theme:f.a,domainPadding:{y:20},height:350,width:350,padding:{top:40,bottom:60,left:60,right:40},singleQuadrantDomainPadding:!1},r.createElement(i.VictoryAxis,{tickValues:this.props.xAxisTickValues,domain:[-this.props.xAxisDomain,this.props.xAxisDomain],label:"Log Ratio",tickFormat:function(e){return e>=1e3||e<=-1e3?"".concat(e/1e3,"k"):e},style:{tickLabels:{padding:20},axisLabel:{padding:40},ticks:{size:0},grid:{strokeOpacity:1}},crossAxis:!1,orientation:"bottom",offsetY:60}),r.createElement(i.VictoryAxis,{label:"-log10 p-Value",dependentAxis:!0,tickCount:4,style:{tickLabels:{padding:135},axisLabel:{padding:165},ticks:{size:0},grid:{strokeOpacity:1}}}),r.createElement(i.VictoryLabel,{style:f.W,text:"← "+this.xAxisLeftLabel,x:60,y:300}),r.createElement(i.VictoryLabel,{style:f.W,text:this.xAxisRightLabel+" →",textAnchor:"end",x:310,y:300}),r.createElement(i.VictoryLabel,{style:f.W,text:"Significance →",x:320,y:210,angle:-90}),r.createElement(i.VictoryScatter,{style:{data:{fillOpacity:.4}},data:this.props.data,dataComponent:r.createElement(d.a,{onMouseOver:this.onPointMouseOver,onMouseOut:this.onPointMouseOut,fill:function(t){return e.isGenericAssay&&t.stableId in e.props.selectedSet?"#FE9929":!e.isGenericAssay&&t.hugoGeneSymbol in e.props.selectedSet?"#FE9929":t.qValue<.05?"#58ACFA":"#D3D3D3"}})})),r.createElement(f.j,{getSvg:function(){return e.svgContainer},filename:"enrichments-volcano",dontFade:!0,type:"button",style:{position:"absolute",top:10,right:10,zIndex:0}})),r.createElement(o.Observer,null,this.getTooltip))}},{key:"isGenericAssay",get:function(){return!!this.props.onGenericAssayEntityClick}},{key:"totalLabelWidths",get:function(){return Object(f.mb)(this.props.xAxisLeftLabel,"Arial","13px")+Object(f.mb)(this.props.xAxisRightLabel,"Arial","13px")}},{key:"xAxisLeftLabel",get:function(){return this.totalLabelWidths>200?Object(f.Gb)(this.props.xAxisLeftLabel,90,"Arial","13px"):this.props.xAxisLeftLabel}},{key:"xAxisRightLabel",get:function(){return this.totalLabelWidths>180?Object(f.Gb)(this.props.xAxisRightLabel,90,"Arial","13px"):this.props.xAxisRightLabel}}])&&h(n.prototype,u),v&&h(n,v),t}();v([a.observable],_.prototype,"tooltipModel",void 0),v([a.observable],_.prototype,"svgContainer",void 0),v([a.action.bound],_.prototype,"svgRef",null),v([a.computed],_.prototype,"isGenericAssay",null),v([u.default],_.prototype,"handleSelectionCleared",null),v([a.action.bound],_.prototype,"onPointMouseOver",null),v([a.action.bound],_.prototype,"onPointMouseOut",null),v([u.default],_.prototype,"getTooltip",null),v([u.default],_.prototype,"onClick",null),v([u.default],_.prototype,"onSelectionComponentRender",null),v([a.computed],_.prototype,"xAxisLeftLabel",null),v([a.computed],_.prototype,"xAxisRightLabel",null),_=v([o.observer],_),t.a=_},866:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,"inputToKey",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"inputToOutput",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"memo",{enumerable:!0,configurable:!0,writable:!0,value:{}})}var t,n,o;return t=e,(n=[{key:"get",value:function(e){var t=this.inputToKey(e);return this.memo[t]=this.memo[t]||this.inputToOutput(e),this.memo[t]}},{key:"has",value:function(e){return this.inputToKey(e)in this.memo}}])&&r(t.prototype,n),o&&r(t,o),e}();function i(e){return JSON.stringify(e,Object.keys(e).sort())}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,n=new o(t,function(t){return function(n){return e(n,t)}});return function(e){return n.get(e)}}n.d(t,"a",function(){return a})},867:function(e,t,n){"use strict";n.d(t,"b",function(){return b}),n.d(t,"a",function(){return g});var r=n(0),o=n(127),i=n.n(o),a=n(9),l=n(2),s=n(989),c=n(1),u=n.n(c);n(889);function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var y=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":m(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},b=1,g=0,v=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=d(t).call(this,e))||"object"!==m(o)&&"function"!=typeof o?f(r):o,Object.defineProperty(f(n),"div",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(f(n),"oncoprint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(f(n),"trackSpecKeyToTrackId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(f(n),"lastTransitionProps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object(l.makeObservable)(f(n)),n.trackSpecKeyToTrackId={},n.divRefHandler=n.divRefHandler.bind(f(n)),n.refreshOncoprint=u.a.debounce(n.refreshOncoprint.bind(f(n)),0),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,r["Component"]),n=t,(o=[{key:"divRefHandler",value:function(e){this.div=e}},{key:"getTrackSpecKey",value:function(e){var t=null;return u.a.forEach(this.trackSpecKeyToTrackId,function(n,r){if(n===e)return t=r,!1}),t}},{key:"refreshOncoprint",value:function(e){var t=this,n=performance.now();this.oncoprint||(this.oncoprint=new i.a("#".concat(e.divId),e.width,e.initParams),this.oncoprint.setTrackGroupLegendOrder([b,g]),window.frontendOnc=this.oncoprint,e.oncoprintRef&&e.oncoprintRef(this.oncoprint)),this.oncoprint.webgl_unavailable||(Object(s.a)(e,this.lastTransitionProps||{},this.oncoprint,function(){return t.trackSpecKeyToTrackId},function(){return t.props.molecularProfileIdToMolecularProfile}),this.lastTransitionProps=u.a.clone(e)),console.log("oncoprint render time: ",performance.now()-n)}},{key:"componentWillReceiveProps",value:function(e){this.refreshOncoprint(e)}},{key:"componentDidMount",value:function(){this.refreshOncoprint(this.props)}},{key:"componentWillUnmount",value:function(){this.oncoprint&&(this.oncoprint.destroy(),this.oncoprint=void 0)}},{key:"render",value:function(){return r.createElement("div",{id:this.props.divId,ref:this.divRefHandler})}},{key:"sortByMutationType",get:function(){return this.props.distinguishMutationType&&this.props.sortConfig&&this.props.sortConfig.sortByMutationType}},{key:"sortByDrivers",get:function(){return this.props.distinguishDrivers&&this.props.sortConfig&&this.props.sortConfig.sortByDrivers}}])&&p(n.prototype,o),a&&p(n,a),t}();y([l.computed],v.prototype,"sortByMutationType",null),y([l.computed],v.prototype,"sortByDrivers",null),v=y([a.observer],v),t.c=v},868:function(e,t,n){"use strict";var r=n(0),o=n(17),i=n(9),a=n(72),l=n(12);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":d(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,u(t).apply(this,arguments))}var n,i,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,r["Component"]),n=t,(i=[{key:"handleClose",value:function(){this.props.onHide()}},{key:"render",value:function(){return r.createElement(o.Modal,{show:this.props.show,onHide:this.handleClose,keyboard:!0,className:this.props.className},r.createElement(o.Modal.Header,{closeButton:!0},r.createElement(o.Modal.Title,{"data-test":"gene-panel-modal-title"},this.props.panelName)),r.createElement(o.Modal.Body,{style:{maxHeight:"calc(100vh - 210px)",overflowY:"auto"}},this.props.show&&this.props.isLoading&&r.createElement(a.a,{isLoading:!0}),this.props.show&&!this.props.isLoading&&r.createElement("div",{"data-test":"gene-panel-modal-body"},this.props.children)),r.createElement(o.Modal.Footer,null,r.createElement(o.Button,{"data-test":"modal-button",onClick:this.handleClose},"Close")))}}])&&s(n.prototype,i),l&&s(n,l),t}();f([l.default],h.prototype,"handleClose",null),h=f([i.observer],h),t.a=h},870:function(e,t,n){"use strict";function r(e){setTimeout(function(){window.requestAnimationFrame(e)},0)}n.d(t,"a",function(){return r})},871:function(e,t,n){"use strict";var r=n(0),o=n(17),i=n(946),a=n(5),l=n.n(a),s=n(9),c=n(2);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}function h(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var _=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":v(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},w=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},O=function(e){function t(){return p(this,t),h(this,y(t).apply(this,arguments))}return b(t,r["Component"]),f(t,[{key:"render",value:function(){var e=this.props,t=(e.bsRole,e.title),n=w(e,["bsRole","title"]),i=this.props.buttonClassName?this.props.buttonClassName:"btn btn-default";return r.createElement(o.Button,u({className:i},n),t," ",this.props.titleElement," ",r.createElement("span",{className:"caret"}))}}]),t}(),S=function(e){function t(){return p(this,t),h(this,y(t).apply(this,arguments))}return b(t,r["Component"]),f(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.styles,o=e.children;return r.createElement("div",{className:l()("dropdown-menu",t),style:Object.assign(Object.assign({},n),{padding:"6px"})},o)}}]),t}(),E=function(e){function t(e){var n;return p(this,t),n=h(this,y(t).call(this,e)),Object.defineProperty(m(n),"open",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(m(n),"toggle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(m(n),"hide",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object(c.makeObservable)(m(n)),n.toggle=function(){n.open=!n.open},n.hide=function(){n.open=!1},n}return b(t,r["Component"]),f(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.id,a=e.className,l=e.styles,s=(e.ref,w(e,["children","id","className","styles","ref"]));return r.createElement(i.RootCloseWrapper,{onRootClose:this.hide},r.createElement(o.Dropdown,{id:n+"",open:this.open},r.createElement(O,u({bsStyle:"default",bsRole:"toggle",title:"Custom Toggle",onClick:this.toggle},s)),r.createElement(S,{bsRole:"menu",className:a,styles:l},t)))}}]),t}();_([c.observable],E.prototype,"open",void 0),E=_([s.observer],E),t.a=E},872:function(e,t,n){"use strict";var r=n(0),o=n(2),i=n(9),a=n(897),l=n.n(a),s=n(1),c=n(176),u=n(31),p=n(72),d=n(837),f=n(12),h=n(5),m=n.n(h),y=n(3),b=n(50);function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var P=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":C(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},T=function(e){function t(){return _(this,t),w(this,S(t).apply(this,arguments))}return E(t,d["a"]),t}(),x=function(e){function t(e){var n;return _(this,t),n=w(this,S(t).call(this,e)),Object(o.makeObservable)(O(n)),n}var n,a,d;return E(t,r["Component"]),n=t,(a=[{key:"onDeleteClick",value:function(e){this.props.deleteChart(e.key)}},{key:"shareChart",value:function(e){this.props.shareCharts([e.key])}},{key:"onRestoreClick",value:function(e){this.props.restoreChart(e.key)}},{key:"getCurrentSelectedRows",value:function(){return this.options.filter(function(e){return e.selected})}},{key:"getCurrentSelectedRowKeys",value:function(){return this.getCurrentSelectedRows().map(function(e){return e.key})}},{key:"addAll",value:function(e){this.props.onAddAll(s.filter(e,function(e){return!e.disabled}).map(function(e){return e.key}))}},{key:"removeAll",value:function(e){this.props.onClearAll(e.map(function(e){return e.key}))}},{key:"onOptionChange",value:function(e){this.props.onToggleOption(e.key)}},{key:"shareSelected",value:function(){this.props.shareCharts(this.props.options.filter(function(e){return e.selected}).map(function(e){return e.key}))}},{key:"render",value:function(){var e;return r.createElement("div",{style:{display:"flex",flexDirection:"column"},"data-test":"add-by-type"},(!this.props.freqPromise||this.props.freqPromise.isComplete)&&r.createElement(T,{width:this.props.width-20,height:this.tableHeight,columns:this.columns,data:this.options,showControlsAtTop:!0,addAll:this.addAll,removeAll:this.removeAll,showSelectableNumber:!0,showAddRemoveAllButton:!0,autoFocusSearchAfterRendering:!0,numberOfSelectedRows:this.getCurrentSelectedRows().length,hideControls:this.props.hideControls,isSelectedRow:function(e){return!!e.isSharedChart},highlightedRowClassName:function(e){return e.isSharedChart?l.a.sharedChart:""},extraButtons:this.extraButtons}),(null===(e=this.props.freqPromise)||void 0===e?void 0:e.isPending)&&r.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:100}},r.createElement(p.a,{isLoading:!0}),r.createElement("br",null),"Calculating data availability..."))}},{key:"options",get:function(){var e,t=this;if(null===(e=this.props.freqPromise)||void 0===e?void 0:e.isComplete){var n=s.reduce(this.props.options,function(e,n){var r=0===t.props.freqPromise.result[n.key];return e.push({label:n.label,key:n.key,disabled:r,selected:n.selected,isSharedChart:n.isSharedChart,freq:r?0:t.props.freqPromise.result[n.key]}),e},[]);return this.props.optionsGivenInSortedOrder?n:n.sort(function(e,t){return t.freq-e.freq||e.label.localeCompare(t.label)})}var r=this.props.options.map(function(e){return Object.assign({freq:100},e)});return this.props.optionsGivenInSortedOrder?r:r.sort(function(e,t){return e.label.localeCompare(t.label)})}},{key:"columns",get:function(){var e=this,t=[{name:this.props.firstColumnHeaderName,render:function(t){return r.createElement(i.Observer,null,function(){return r.createElement("div",{className:m()(l.a.option,"add-chart-option",g({},l.a.markedForDeletion,e.props.markedForDeletion&&e.props.markedForDeletion.includes(t.key))),"data-test":"add-chart-option-".concat(t.label.toLowerCase().replace(/\s/g,"-"))},r.createElement(c.a,{checked:t.selected,disabled:t.disabled||e.props.markedForDeletion&&e.props.markedForDeletion.includes(t.key),labelProps:{className:m()(l.a.label,t.disabled?l.a.labelDisabled:"")},inputProps:{className:l.a.input},onChange:function(){return e.onOptionChange(t)}},r.createElement(y.m,{text:t.label})))})},filter:function(e,t,n){return e.label.toUpperCase().includes(n)},sortBy:function(e){return e.label},width:this.props.width-80-(this.props.shareCharts||this.props.deleteChart?70:0),defaultSortDirection:"asc"}];return this.props.freqPromise&&t.push({name:"Freq",tooltip:r.createElement("span",null,Object(b.a)(this.props.frequencyHeaderTooltip,"% samples with data")),render:function(t){var n;return r.createElement("span",{className:m()(t.disabled?l.a.labelDisabled:"",g({},l.a.markedForDeletion,e.props.markedForDeletion&&e.props.markedForDeletion.includes(t.key)))},(null===(n=e.props.freqPromise)||void 0===n?void 0:n.isComplete)?Object(u.ab)(t.freq):"")},sortBy:function(e){return e.freq},defaultSortDirection:"desc",width:60}),(this.props.shareCharts||this.props.deleteChart)&&t.push({name:" ",render:function(t){var n=r.createElement(r.Fragment,null);return n=e.props.markedForDeletion&&e.props.markedForDeletion.includes(t.key)?r.createElement("button",{className:"btn btn-xs btn-default",onClick:function(){return e.onRestoreClick(t)}},"Restore"):r.createElement(r.Fragment,null,e.props.deleteChart&&r.createElement(y.i,{overlay:"Delete Chart",placement:"top"},r.createElement("span",{onClick:function(){return e.onDeleteClick(t)},style:{marginRight:"5px"}},r.createElement("i",{className:"fa fa-md fa-trash",style:{cursor:"pointer"}}))),e.props.shareCharts&&r.createElement("span",{onClick:function(){return e.shareChart(t)}},r.createElement("i",{className:"fa fa-share-alt",style:{cursor:"pointer"}}))),r.createElement("div",{style:{display:"flex",justifyContent:"flex-end"},className:m()(g({},l.a.labelDisabled,t.disabled))},n)},width:70}),t}},{key:"tableHeight",get:function(){return this.options.length>15?375:25*(this.options.length+1)}},{key:"extraButtons",get:function(){var e=this;return this.props.shareCharts?[{content:r.createElement(r.Fragment,null,"Share selected"),onClick:this.shareSelected,isDisabled:function(){return 0===e.props.options.filter(function(e){return e.selected}).length}}]:[]}}])&&v(n.prototype,a),d&&v(n,d),t}();Object.defineProperty(x,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{firstColumnHeaderName:"Name",hideControls:!1,width:400}}),P([o.computed],x.prototype,"options",null),P([f.default],x.prototype,"onDeleteClick",null),P([f.default],x.prototype,"shareChart",null),P([f.default],x.prototype,"onRestoreClick",null),P([o.computed],x.prototype,"columns",null),P([o.computed],x.prototype,"tableHeight",null),P([f.default],x.prototype,"getCurrentSelectedRows",null),P([f.default],x.prototype,"getCurrentSelectedRowKeys",null),P([o.action.bound],x.prototype,"addAll",null),P([o.action.bound],x.prototype,"removeAll",null),P([o.action.bound],x.prototype,"onOptionChange",null),P([o.action.bound],x.prototype,"shareSelected",null),P([o.computed],x.prototype,"extraButtons",null),x=P([i.observer],x),t.a=x},873:function(e,t,n){e.exports=n(35)(166)},874:function(e,t,n){e.exports=n(35)(100)},875:function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"b",function(){return f});var r=n(0),o=n(9),i=n(868);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},d=function(e){var t=e.genePanelIds,n=e.toggleModal;return t.length>0?r.createElement("span",{style:{maxWidth:400}},"Gene panels:"," ",t.map(function(e,t){return[t>0&&", ",r.createElement("a",{key:e,"data-test":"gene-panel-linkout-".concat(e),href:"#",onClick:function(){n(e)}},e)]})):r.createElement("span",null)},f=function(e){function t(){var e,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,e=!(o=l(t).apply(this,arguments))||"object"!==u(o)&&"function"!=typeof o?s(n):o,Object.defineProperty(s(e),"getGenesList",{enumerable:!0,configurable:!0,writable:!0,value:function(e){return e&&e.genes?e.genes.map(function(e){return r.createElement("p",{key:e.entrezGeneId},e.hugoGeneSymbol)}):null}}),e}var n,o,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=this.props.genePanelCache.get({genePanelId:this.props.panelName});return r.createElement(i.a,{panelName:this.props.panelName,show:this.props.show,onHide:this.props.onHide,isLoading:e.isPending},e.isComplete&&this.getGenesList(e.result))}}])&&a(n.prototype,o),p&&a(n,p),t}();f=p([o.observer],f)},876:function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(1044),a=n.n(i),l=n(5),s=n.n(l),c=n(2),u=n(1),p=n.n(u),d=n(328),f=n(308),h=n.n(f),m=n(6),y=n(12);function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var S=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":O(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};function E(e){return e.promises?0===e.promises.length?"complete":m.Z.apply(void 0,w(e.promises)):"pending"}var k=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=g(t).call(this,e))||"object"!==O(o)&&"function"!=typeof o?v(r):o,Object.defineProperty(v(n),"timeShown",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(v(n),"timeShownInterval",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object(c.makeObservable)(v(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentWillMount",value:function(){var e=this;this.timeShownInterval=setInterval(function(){e.props.show?e.timeShown+=1:e.timeShown>0&&(e.timeShown=0)},1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timeShownInterval)}},{key:"makeItem",value:function(e,t){var n,o,i,l=null,c=this.props.sequential&&t>this.firstIncompleteIndex;if(!c&&!e.hideIcon)switch(E(e)){case"complete":l=r.createElement("i",{className:s()("fa fa-sm fa-check",a.a["fa-check"])});break;case"pending":l=r.createElement(h.a,{name:"double-bounce",fadeIn:!1,className:a.a["pulse-spinner"]});break;case"error":l=r.createElement("i",{className:s()("fa fa-sm fa-exclamation-triangle",a.a["fa-exclamation-triangle"])})}return r.createElement("span",{className:s()(a.a["item-row"],(n={},o=a.a["not-invoked-item"],i=c,o in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i,n)),style:e.style},e.label,r.createElement("span",{style:{marginLeft:7}},l))}},{key:"render",value:function(){return this.props.show?r.createElement("div",{className:a.a.container},r.createElement("div",{className:a.a["items-container"]},this.items.map(this.makeItem)),p.a.some(this.items,function(e){return"error"===E(e)})&&r.createElement(d.a,null)):null}},{key:"items",get:function(){return this.props.getItems(this.timeShown)}},{key:"firstIncompleteIndex",get:function(){return this.items.findIndex(function(e){return"complete"!==E(e)})}}])&&b(n.prototype,o),i&&b(n,i),t}();S([c.observable],k.prototype,"timeShown",void 0),S([c.computed],k.prototype,"items",null),S([c.computed],k.prototype,"firstIncompleteIndex",null),S([y.default],k.prototype,"makeItem",null),k=S([o.observer],k),t.a=k},886:function(e,t,n){},887:function(e,t,n){e.exports=n.p+"reactapp/images/58335fa45d1c6a16c7d06eabd2ecee93.png"},888:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZMAAAG2CAYAAAC6fWvkAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAABOvAAATrwFj5o7DAAAAB3RJTUUH4QgXDAozoFc2mAAAIABJREFUeNrt3Xl8VPW9//FvkpkhC4SQsAkuuKHiVisTCrZel1ttq17rQ6xttdd7r7a/3uq97eNhtFbbCiQh20Cxtra9Uu21rUKAAGEnFAKYEJiETXYhk5nJrJlMkklmYeacOb8/6u/XWlmSkGTOmXk9/8QwOef9PfLOJ3O+Z9IURREAzq/oT61Lq566+rm0tDTCAM4jnQiA81t/yD/3/br2Z//Y4P1P0gDOL43JBDg3RVHEnNf2f2x1BK+bUJDpNFcapxp0TCcAkwkwAH/Y7X3B6gheJ4QQHZ2RKW/WOV4nFYDJBOi3SEwWhS+3uHz+yOT/92ejR+u7zFXG/LHZOgICmEyAi3tzq6v474tECCH6+mLjKtbZf006AJMJcFHdISndWLSvMxiU8v7xvxn0GcEGk3HG1DyDjaQAJhPgvMpqbW+dq0iEECIak3OKV7ZVkRJAmQDnZeuMTFu2zfmdC33N+gb3Y8ccodtJC6BMgHMqrrGZYrF49oW+Jh4X+nkr2haTFkCZAJ9xpD10x8YG96P9+doPD/juazgVuJ/UAMoE+JR51a2LFUXo+v/1FhOpAZQJ8P/tOtnz5cZD/nsG8neOftzzuTUtnd8mPYAyAYQQQsxfNrgpo2yFpUSWub0eoEyQ8lY1+54+3hq4bTB/1+4KXf3ubs+PSBGpjk2LSGmSrIjZP2mxODyhaYN9jfw8g3dflXFStiGDQMFkAqSipfXuokspEiGE8HdHJ76xxVlGmmAyAVJQMCqLwiKzt6snOuFSXys7SxdoqjJeMX6MPkCyYDIBUsiSjY7KoSgSIYQIhaXc8rV2NjKCMgFSSUdvLP+dTe3/Zyhfs3qH89ttvsh1pAvKBEgRC9fYFoUjUu5QvqYkxbPmr7QuIl1QJkAKsHgj16/a4XpyOF57a5Pn4QO2YCEpgzIBkty8VW2LJDmeNRyvrSgifV51K++dgDIBktl+a+8Xtu31PjSc38P8Uddd2452P0TaoEyAJPX68rbFijL81/2C5a2VpA3KBEhCdUe6/6XlaNfskfhep619M5Y3dfwHqYMyAZLMguWtFSP5/SpWts2PSWwKBmUCJI0P9nQ8d8bWd+NIfk93R/jy3+1w/YT0kQp4nAqSXlRSxKwfN7d7fOGpI/29c8foO5tNxvGjM3UsBJhMAC377XbXa4koEiGECPTGCkwbHL9gFcBkAmhYICyJwpfMnYHeWH6ijmHUqIy+PVXGGyaPNThZETCZABpk2uB4I5FFIoQQZ8/Ko0tW27hVGJQJoEWunujU97a0P6uGY1mz0/nEKXd4BqsCygTQmNIaW2U0Kueo4VjicWGYt6KNx6yAMgG05KQ7fPOaXc65ajqm+uaOB5rO9N7N6oAyATRifnXb4nhcGFR2WGnzlluYTkCZAFqw53TgnvqWji+r8dgOn+y+c8Mh/+OsEigTQOXmLbeYhBBpaj2+kuWWcm7JB2UCqNj6Q/65H53quVPNx2h1BK/73w+9z7NaSCZsWkTSkGVF3PWz/adtjuC1aj/W8fmZ7n2Vd16Wqc9g4cBkAqjJew3eF7RQJEII4fNHJv9qq2sBqwYmE0BFwjFZFL7U4u7sikzSyjHn5Oi6zabCgrxsXZwVBJMJoAK/2uoq1lKRCCFEMCjlldfaf83qgckEUIGuoKQvfGmfNxiU8rR27Hp9emh3xcybryzIbGMlwWQCJFD5OtubWiwSIYSIxeLZxTU2E6sIygRIIFtnZNqyOud3tHwOGxvcjx5pD93BaoIyARKkuMZmiknxbC2fg6II3bwVbYtYTVAmQAJ8ZA9+fmOD+9FkOJfGg757d57oeZBVBWUCjLD5KyyLFEUkzYerz19mqWJVQZkAI6j+RM9XGg/570mmczphCdy6qtn3NKsLygQYIQuWWZLyY3DLq9uKJZnb9UGZAMNuVbPv6ROWwK3JeG4OT2ja0np3EasMrWHTIjRFkhXxhZ+0tDk9oauS9RzHjTV07DMZJ+YYeAgkmEyAYbG03l2UzEUihBBdPdEJSzY6KlltMJkAwyAYlUVhkdnb1ROdkOznmpWZ0dtkKpw2YYzez8qDyQQYQks2OipToUiEECIckceUreExK6BMgCHVEYgVvLPJ/v1UOueVO1zfbO0IT2f1QZkAQ6Rsra0qHJHHpNI5S3I8a/5KK9MJKBNgKLR2hKev3OH6Ziqe+7a93odaLL1zuApAmQCXaP5Kq0mS41mpeO6KItLnrWhjOgFlAlyKFkvvnG17vQ+ldAZHu2Zv/aj7Ua4GUCbAIM1b0WZSFK7T4urWCm7jB2UCDMLWj7ofbTnaNZskhDhj67thWZPvOZKAWrFpEaqkKIq4++cHTpyx9d1AGn81sSDTua/SONWgSyMMMJkA/bGsyfccRfJp3s7IlN9ud71GEmAyAfohKili1o+b2z2+8FTS+LQxo/VdZpMxPzdLRxhgMgEu5LfbXa9RJOfW2xcbZ9rgeIMkwGQCXEAgLAljkdnf2xcbRxrnZjBkBBurjDdNyTPYSQNMJsA5mDY43qBILiwalXNKV9sqSAKUCXAOzu7oFe9taX+WJC5u7S7n3OOO0G0kAcoE+AcLV9vKo1E5hyQuLh4X+gWreAgkKBPgU467Qres2eWcSxL9t7Ol48sNpwL3kQQoE+ATxSusi+JxYSCJgZlXbWE6AWUCCCFE4+nAvfUtHQ+QxMAd/bjnjnUH/N8gCVAm4Kfr5fx0fSlKq1vLZJlb/EGZIIWtP+Sfe+RUz+dJYvBsztA17zV4/oskkEhsWkTCyLIi7vrp/tM2Z/Ba0rg0+eMMHnOVcXKWPoMwwGSC1PJeg/cFimRo+Luik97c4iwhCTCZIKWEY7IwvmR2+7uik0hjaORk6XqaFhmnFuTog6QBJhOkhF9tdRVTJEMrGJbGVtTaF5MEmEyQErqCkr7wxX0dwbA0ljSGlk6XHt5dMfPWq8ZnniENMJkgqVWss/+SIhkekhTPKq6xVpEEKBMkNWtn5JoP6hz/ShLDZ1Oj55GDtqCRJECZIGmV1NgqY1I8mySGj6II3YIVbAQFZYIkddgenLmxwf0oSQy/psP+u7cf7fkaSYAyQdJZsMJSpSiCDy8fIfOrz/DeCSgTJJcdx3u+2njIfw9JjJyP2/pmrDD7niEJUCZInqlkuaWSFEZeebWlOCZx+z8oEySBVc2+p09aAreQxMhzecNXvF3vfpkkMNzYtIhhJcmKmPVKs9XlDV9JGokxNlff2VxVOD4nk4dAgskEGrW03l1EkSRWTyBWsHiTg1uFwWQCbQpGZGF82dzR3RMdTxqJlTkqo7fJVHj9xFy9hzTAZAJNWbLZUUmRqEPkrDymdI2NmyBAmUBbOgKxgnc22b9PEupRU+968mNP+CaSAGUCzShba6sKR+QxJKEeshwftWAVD4EEZQKNOO0J37hih+vbJKE+f9nr/dq+1t4vkgQoE6hecY21Upbjo0hCldIWVLcxnYAygbo1W3rvqmvyPkwS6rX/eNcXNhzyP04SoEygWvNXtFUJIdJIQt1Kqy1lbAsAZQJV2nzY/1jL0a7ZJKF+be3B6//U4OVuOwwZNi1iSCiKIr70swMnW+1900lDGybkZ7r2Vt45JVPPY1bAZAKVWNbke44i0ZYOf+Syt7a5fk4SYDKBKkQlRRS+bHZ4OyNTSENbcnJ03WZTYUFeti5OGmAyQUL9drvrNYpEm4JBKc+03v4GSYDJBAnVE5KE8SWzv68vNo40tEmvTw81VBbOuDzfYCUNMJkgIRZvciyhSLQtFotnl65pqyAJXAodEWCwfL2x+w+eCXzv9hvyCEPjbN7IE23eiHnaxMxFpIHB4NdcAIBLxq+5AACUCQCAMgEAUCYAAFAmAADKBABAmQAAKBMAACgTAABlAgCgTAAAlAkAAJQJAIAyAQBQJgAAygQAAMoEAECZAAAoEwAAZQIAAGUCAKBMAACUCQCAMgEAgDIBAFAmAADKBABAmQAAQJkAACgTAABlAgCgTAAAoEwAAJQJAEB9dESQWt7Z5a5d8aH3EZLAcLr/9vyGoocu/yJJpI40RVFIIUU4uqNX3lVkPhaNyTmkgWH9hyVNSJuK75x92xU5zaSRGvg1VwopW20ro0gwEhRF6IpXWitJgjJBkjnmCN2+ZpfzCZLASGk46Lt3x/Ger5IEZYIkUrLKWhmPCz1JYCQtWG5hOqFMkDQ/IZ4K3F/f0vEASWCknbQEblnd3PkUSVAmSAKvL7MsIgUkbCpe3rpQkrnRhzKBpq0/5J977EzP7SSBRHF5w1f+fpf7RZJIbtwanMRkWRFzXmtptbtCV5MGEilvrMFnrjROyMnMIAwmE2jNew3eFygSqEF3T3T8G1uc5STBZAKNCUVlUfiS2ePvjk4kDahB5qiM3r2mwqsn5Oo7SYPJBBrxVp1rAUUCNYmclceUr7NxqzBlAq3w9cZyf7vO9kOSgNpU/8X11GlP+EaSoEygAaYN7RWhsJRLElAbWY6PKqnhMSuUCVTP6otc+36d4xmSgFptbfI+3GzpvYskKBOoWMlqW4UkxbNIAiqWtmBFG9MJZQK1OmgLGjc2uB8jCahd89GuOZsP+7lWKROocipZaalUFNYU2lBcbSlnawJlApXZdrT7ocZD/ntIAlphsQenL9/re5YkKBOo6qe8Vn4HDc0pq7YsiEpMJ5QJVGFVs+/pj9v6ZpAEtKajMzLld9tdr5KE9vE4FY2LSYqY9Uqz3d0Rvpw0oEWjR+u7zFXG/LHZOsJgMkGi/H6nu4gigZb19cXGLd7kWEISTCZIkGBEFncW7fMFemMFpAEtM+gzgg0m44ypeQYbaTCZYIQt2eKooEiQDKIxOadsta2MJCgTjDBvIDZp6Qb7D0gCyWLNLucTxxwhPhWUMsFIKl9rKzt7Vh5NEkgW8bjQl6ziIZCUCUbMx57wTSt2uL5NEkg29S0dDzScCtxPEpQJRkBJjbVCluOjSALJ6PVllkWkQJlgmO090/uluibvwySBZHXsTM/t6w/555IEZYLhnEpWtVUIIdJIAsms+IPWSllm2wJlgmGx4ZD/8ZajXbNJAsnO7gpd/V6D9wWS0A42LWqEoijirp/uP9XWHryeNJAK8vMM3n1VxknZhgzCYDLBUFnW5HuOIkEq8XdHJ/66zlVMEkwmGCKRmCxmvdzi7PBHLiMNpJLsLF2gqcp4xfgx+gBpMJngEr29w/MqRYJUFApLuVUb7GxkZDLBpeoOSenGon2dwaCURxpIRTpdenhXxczbpo3PPE0aTCYYpF9sciymSJDKJCmeVVJjrSAJygSD1O6PXvWHTfbvkgRS3aZGz9cP2IKFJEGZYBDK19oWxmLxbJJAqlMUkV6y0sJ7J5QJBupoe+hza3Y5nyAJ4K/2HPL/U92Rbh4lRJlgIEprrBXxuNCTBPA3xdWtvHdCmaC/dp8M/HN9S8cDJAF82mlr34yVZt93SIIyQT/Mr27lEdzA+ab25ZaFMYktDZQJLmj9If/cY6cDt5EEcG6ejvDlS3e6XyIJdWHToorIsiJmv9ZiaXeFppEGcH65Y/SdzSbj+NGZOsJgMsE/eq/B+wJFAlxcoDdWsGSzs4okmEzwD0JRWRhfMnu6uqMTSQO4uFGjMvr2VBlvmDzW4CQNJhN84q061wKKBOi/s2fl0RW19lKSYDLBJ3y9sdxZRWZ7OCLlkgYwgJ+G00V0e5nxjumTs46RBpNJyjNtaK+gSICBi8eFoaTGWk4SlEnKa/NFrnu/zvEMSQCDs22v9+GmM713kwRlktJKV9vKJSmeRRLAoKWVrmxjOqFMUtcBW7BwY4P7MZIALk3Lsa7Z6w74v0ESlElqTiUrLRWKwhoAQ2HhCkspNxRRJimn7kj3w42H/PeQBDA0rI7gdX/e4/seSSQGtwYnyN0/33/stLXvJpIAhs74/Ez3vso7L8vUZxAGk0nyW9Xse5oiAYaezx+Z/Lu/eH5KEkwmSS8mKaLwlWa7pyN8OWkAQy8nR9dtNhUW5GXr4qTBZJK03tntfpEiAYZPMCjlLdroWEISTCZJqy8iiZlFZl+gN1ZAGsDw0evSQ7srZ958ZUFmG2kwmSSdN7Y4KygSYPjFpHh2+VpbGUlQJknH3ROdsnSD/QckAYyMtbvcc4+0h+4gCcokqVTW2kvOnpVHkwQwMhRF6EpWtVWSBGWSNE65wzOqtzueIglgZO3a7/vnnSd6HiQJyiQplK62lsfjwkASwMibv8zCx/tSJtq390zvl+qavA+TBJAYJyyBW2sPdD5JEpSJtqeSVW3lQog0kgASZ8EHlgpJZhsEZaJR6w/55zYf7ZpDEkBiOT2hq9770PPfJDF82LQ4TBRFEXNe2/+x1RG8jjSAxMsba/CZTcYJOQYeAslkoiHLmnzPUSSAenT3RMf/aquzlCSYTDQjEpNF4cstLp8/Mpk0APXIyszobTIVTpswRu8nDSYT1Xt7h+dVigRQn3BEHlO5zs7nxTOZaGCUDknpxqJ9ncGglEcagProMtLD9RV3fu6aCVmnSIPJRLV+scmxmCIB1EuS41mlNbYKkqBMVKvdH73qD5vs3yUJQN02NXoebbH0cts+ZaJO5WttC2OxeDZJAKqXVlJj5b0TykR9jraHPrd6p/MbJAFow97D/i9t+aj76yRBmahKaY21QlGEjiQA7Sipbi3nJiTKRDV2nez5cn1LxwMkAWjLGVvfDSv2df4bSVAmqjB/mcVECoA2LVzeWhqVmE4okwRbf8g/93hr4DaSALTJ2xmZsrTe/WOSuDRsWrwEsqyIL/ykxeLwhKaRBqBdY0bru8wmY35uFm97MpkkwB8bvc9TJID29fbFxi3Z5FxEEkwmIy4UlYWxyOzt6olOIA1A+wz6jGCjyXjTlDyDnTSYTEbMW3WuBRQJkDyiMTmnfK2NR9RTJiOnozeW/5ta2w9JAkguNfXObx53hLihhjIZGYs2tJeGI1IuSQDJJR4X+tLVPGaFMhkBFm/k+ve3Op4hCSA5bTd3fLXhVOA+kqBMhtXCtbYySY5nkQSQvMpq2haSAmUybPZbg7M2NrgfIwkgyf9fP949a21L57dIgjIZnqmkxlqmKGQGpMR0stJSIstsnaBMhljdke5/aTzou5ckgNRgc4au+fMe73+SRP+wabGfvvSz/cfP2PpuJAkgdeTnGbxmk3FSlj6DMJhMLt2qZt/TFAmQevzd0YlvbXO9ThJMJpcsJimi8JVmu6cjfDlpAKknO0sX2LvIOKUgRx8kDSaTQXtnt/tFigRIXaGwlLt4Q3sFSTCZDFpfRBIzi8ydgd5YPmkAqUunSw/vrph561XjM8+QBpPJgL2xxVlBkQCQpHhW2RobGxkpk4Fz90SnvL3e/jxJABBCiHUfuucetAWNJEGZDEhlrb0kGpVzSAKAEEIoikhfWMNDICmTATjpDt9cvd3xFEkA+HsfHvDdt/1oz9dI4rP4wONzWLW3491br88zkASAz/z7sM/z1n03j51GEp/G3VwAgEvGr7kAAJQJAIAyAQBQJgAAUCYAAMoEAECZAAAoEwAAKBMAAGUCAKBMAACUCQAAlAkAgDIBAFAmAADKBAAAygQAQJkAACgTAABlAgAAZQIAoEwAAJQJAIAyAQCAMgEAUCYAAMoEAECZAABAmQAAKBMAAGUCAKBMAACgTAAAlAkAQH10yXAS1s7Ij37w9qlF8TjlCEBbSr51ddmdV495VevnkaYoiuYX499+c6J2a5P3ES5LAFpz7ZWjT+wu/vxNWj8Pzf8kv+d04B6KBIBWnbH13biq2fc0ZZJgZTXWUi5HAFpW8oGlPCZp+7dEmi6T2gOdTzYf7ZrDpQhAyzy+8NTf73QXafkcNPueiaIoYvar+0/bnMFruRQBaN2Y0fous8mYn5ulzfuiNDuZLN/re5YiAZAsevti497c6qxgMhlB4ZgsjC+Z3f6u6CQuQQDJwmDICO4xGW+4bKzBwWQyApbu8LxKkQBINtGonFNVay9mMhkBXUFJX/jivo5gWBrLpQcg2aSni1jdwpmfv+my7CNMJsNoyWZHFUUCIFnF40Jfvsa2UHMlqKWDtXVGpv1ho/27XG4Aklldk/eRPacD91Amw6Sytr00JsWzudQAJLuFNVZNTSeaKZOP7MHPr97p/AaXGIBU0HK0a3btgc4nKZMhVrbGtlBRkuMpxwDQr+mkuq1UKzdJaaJM6k/0fKW+ueNBLi0AqcTmDF67rMn3nBaOVRO3Bt877+BHJy2BW7i0AKSa/HEGj7nKODlLn8Fkcik2HPI/TpEASFX+ruikt3d4XmMyuQSSrIhZrzRbXd7wlVxSAFJVTpauZ9+iwgnjcnQxJpNB+FOj93mKBECqC4alsb/Y5DAxmQwmvKgsjEXmju6e6HguJQCpTq9LD+2qnHnrVQWZrUwmA/CbOtcCigQA/iomxbMra9tL1Hp8qiyTjkCs4K211h9x+QDA36zZ6XzysD04kzLpp0Ub20siZ+UxXDoA8DeKItLLVqvzIZCqK5PWjvD0P291/DuXDQB81s6Wji/vON7zVcrkIsrX2EtlOT6KSwYAzm3+MksVZXIBLZbeOes/dD/OpQIA53eqLXDzugN+VT34VlVlUrbGXiKESONSAYALm/f+GZMkq2drh2rKZMtH3V9vPOi7l0sEAC7O5Q1f8ccGz3+p5XhUs2nxiz/df7LV3jedSwQA+mdsrr6zuapwfE5m4h8CqYrJZHVz51MUCQAMTE8gVvDrbU5VbGRM+GQSlRRR+LLZ4e2MTOHSAICByRyV0bvXVHj1hFx9Z0pPJu/udr9IkQDA4ETOymOqNtgTvpExoZNJICyJmUVmf19fbByXBAAMTkZG+tkdZXd+7rpJWSdScjJ5c6uzgiIBgEsjy/FR5WsT+5iVhJWJszt6xdvr7M9zGQDApdvY4Pl6s6X3rpQrE9M6+/xoTM7hEgCAIZG2sMaasOkkIWVy3BW6pXq742nWHgCGTtNh/92bD/sfS5kyqVhjWxiPCz1LDwBDq7jaUp6IG6tGvEwaTwfu3drkfYQlB4ChZ7EHp69s7nwm6cukvMZawnIDwPApeb+1LCqN7HQyomVSu7/zm81Hu+aw1AAwfDr8kcuW1rtfHsnvOWKbFhVFEbNfbTljc4auYakBYHjl5Oi6m02F48Zm65JrMlm+1/csRQIAIyMYlPJ+ucVpSqrJJByThfEls9vfFZ3EEgPAyNDr00ONpsKbpuYZbEkxmSzd4XmVIgGAkRWLxbMra+3FSTGZdAUlvfHFfb5QWMplaQFgZKWlCamudObMGVOzD2l6Mlmy2VFFkQBAYiiK0JWttZUO9/cZ1jKxdkaueXej/XssJwAkzl/2eh9qOBW4X7NlUrWufYEkxbNYSgBIrLJh3jA+bGVy2B6cubre+S2WEAASb//xri+sbu58SnNlUr7GVqIoif9YYADAJ9PJSkuJLA/PTVfD8o/9juM9X61v7niQpQMA9Wh3haa9v8f7/eF47WG5Nfie1w8eOdUWuJmlAwB1GZdn8JqrjJOyDRnqnkw2HPI/TpEAgDp1dUcn/s92z89UPZlIsiJmvdJsc3nDV7BkAKBOWZm6wF6T8YrxY/QBVU4mf2r0Pk+RAIC6hSNS7pJN7UO6kXHIJpNgVBYzX9zn6wnEClgqAFA3XUZ6eFflzNumjc88rarJ5Dd1rgUUCQBogyTHsypqbUO2kXFIyqQjECt4a631RywPAGhH7S73EwdswULVlMmije0lkbPyGJYGALRDUUR6+WrrQlWUyWlP+MY/b3X8O8sCANqze7/v/roj3Q8nvEwqa+3FshwfxZIAgDYVV7dWJrRMmi29d63/0P04SwEA2nXa2ndT7f7ObyasTMrX2IuFEGksBQBo2+vvt1bFpMFvFRl0mWw+7H+s8aDvXpYAALTP0xG+/L0Gzw8H+/cHvWnxrp+2nLTYg9NZAgBIDrlj9P5mk7FgdKZuZCaT1c2dT1EkAJBcAr2x/F/VuQZ1q/CAJ5OopAjjy2ZHR2dkCtEDQHIxGDKCTSbj9MljDc5hnUze3e1+kSIBgOQUjco5pg3t84d1MgmEJTGzyOzv64uNI3IASE7p6SK6vcx4x/TJWceGZTJ5c6uzgiIBgOQWjwtD+VrbgN476XeZOLujV/zPOtsLxAwAyW9zo+fRpjO9dw95mSzaYJ8Xi8WziRgAUkN5jbXfH6DVrzI57gjdtnyb4ztECwCpY98R/xfXHfB/Y8jKpKLWVhKPCz3RAkBqKV1hWdifG7UuWiYNpwL3bW3yPkKkAJB6bI7gtdX7Oi/6MSMXLZOKNdZi4gSA1FXyQWtZJCYPvkzWtnR+q/lo1xyiBIDU1dkVmfT7eu8rF/qa825alGVFzHmtpdXuCl1NlACQ2nKydD3mxYX5edm6+IAmkxVm37MUCQBACCGCYWnsG5sdpgFNJuGYLIxFZo+/OzqRCAEAQgih16WHdlfOvPnKgsy2fk0mS3d4XqVIAAB/LybFs6vWtxf3azLpDMZyZr1odobCUi7RAQA+VRppQtpSMrPwlsuzD1xwMvnlZmcpRQIAOBdFEbqFq62feQjkp8rE6otc++5G+/eICwBwPvXNHV/ZeaLnwfOWSdX69vmSFM8iKgDAhVSuti44Z5kctAWNq+ud3yIiAMDFHDjRXbjC7HvmM2VSudZWrCgD/xhfAEBqKq+2LJBk5W9lsv1oz9fqmzseJBoAQH+5vOEr/9zo/YEQn9wafPfP9x89be2bQTQAgIHIG2vwmU3GCRnGx/778f/d3P48kQAABipyVs42ZOvTdE0f9/7TnNvz64kEADAYx9uDt6b15xO0AAC4EO7eAgBQJgAAygQAQJkAAECZAAAoEwAAZQIAoEwAAKBMAACUCQCAMgEAUCYAAFAmAADKBABAmQAAKBMAACgTAABlAgCgTAAAlAkAAJQJAIAyAQBQJgAAygQAAMoEAECZAAAk0Gq+AAAAlUlEQVQoEwAAZQIAAGUCAKBMAACUCQCAMgEAgDIBAFAmAADKBABAmQAAQJkAACgTAABlAgCgTAAAoEwAAJQJAIAyAQBQJgAAUCYAAMoEAECZAAAoEwAAKBMAAGUCAKBMAACUCQAAlAkAgDIBAFAmAADKBAAAygQAQJkAACgTAABlAgAAZQIAoEwAAJQJAIAyAQDgYv4vMVxnuxH2/TUAAAAASUVORK5CYII="},889:function(e,t,n){},891:function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=b(n(5)),i=b(n(1e3)),a=b(n(853)),l=b(n(1002)),s=b(n(1003)),c=b(n(892)),u=b(n(4)),p=b(n(0)),d=b(n(29)),f=b(n(893)),h=b(n(894)),m=b(n(895)),y=b(n(896));function b(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));return o.onWindowScroll=function(){o.onUpdate()},o.onDocumentClick=function(){(0,c.default)(function(){return o.onUpdate()})},o.onUpdate=function(){if(o._isMounted){var e=o.props,t=e.offsetTop,n=e.viewportOffsetTop,r=(0,s.default)((0,y.default)(o))+(n||0);r<=t?o.updateState("top",null,null):r>o.getPositionTopMax()?"bottom"===o.state.affixed?o.updateStateAtBottom():o.setState({affixed:"bottom",position:"absolute",top:null},function(){o._isMounted&&o.updateStateAtBottom()}):o.updateState("affix","fixed",n)}},o.getPositionTopMax=function(){return(0,h.default)((0,m.default)(o))-(0,i.default)(d.default.findDOMNode(o))-o.props.offsetBottom},o.updateState=function(e,t,n){if(e!==o.state.affixed||t!==o.state.position||n!==o.state.top){var r="affix"===e?"":e.charAt(0).toUpperCase()+e.substr(1);o.props["onAffix"+r]&&o.props["onAffix"+r](),o.setState({affixed:e,position:t,top:n},function(){o.props["onAffixed"+r]&&o.props["onAffixed"+r]()})}},o.updateStateAtBottom=function(){var e=o.getPositionTopMax(),t=(0,l.default)(d.default.findDOMNode(o)),n=(0,a.default)(t).top;o.updateState("bottom","absolute",e-n)},o.state={affixed:"top",position:null,top:null},o._needPositionUpdate=!1,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){var e=this;this._isMounted=!0,this._windowScrollListener=(0,f.default)((0,y.default)(this),"scroll",function(){return e.onWindowScroll()}),this._documentClickListener=(0,f.default)((0,m.default)(this),"click",function(){return e.onDocumentClick()}),this.onUpdate()},t.prototype.componentWillReceiveProps=function(){this._needPositionUpdate=!0},t.prototype.componentDidUpdate=function(){this._needPositionUpdate&&(this._needPositionUpdate=!1,this.onUpdate())},t.prototype.componentWillUnmount=function(){this._isMounted=!1,this._windowScrollListener&&this._windowScrollListener.remove(),this._documentClickListener&&this._documentClickListener.remove()},t.prototype.render=function(){var e=p.default.Children.only(this.props.children),t=e.props,n=t.className,i=t.style,a=this.state,l=a.affixed,s={position:a.position,top:a.top},c=void 0,u=void 0;return"top"===l?(c=this.props.topClassName,u=this.props.topStyle):"bottom"===l?(c=this.props.bottomClassName,u=this.props.bottomStyle):(c=this.props.affixClassName,u=this.props.affixStyle),p.default.cloneElement(e,{className:(0,o.default)(c,n),style:r({},s,u,i)})},t}(p.default.Component);g.propTypes={offsetTop:u.default.number,viewportOffsetTop:u.default.number,offsetBottom:u.default.number,topClassName:u.default.string,topStyle:u.default.object,affixClassName:u.default.string,affixStyle:u.default.object,bottomClassName:u.default.string,bottomStyle:u.default.object,onAffix:u.default.func,onAffixed:u.default.func,onAffixTop:u.default.func,onAffixedTop:u.default.func,onAffixBottom:u.default.func,onAffixedBottom:u.default.func},g.defaultProps={offsetTop:0,viewportOffsetTop:null,offsetBottom:0},t.default=g,e.exports=t.default},892:function(e,t,n){"use strict";var r=n(852);t.__esModule=!0,t.default=void 0;var o,i=r(n(1004)),a="clearTimeout",l=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-c)),r=setTimeout(e,n);return c=t,r},s=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};i.default&&["","webkit","moz","o","ms"].some(function(e){var t=s(e,"request");if(t in window)return a=s(e,"cancel"),l=function(e){return window[t](e)}});var c=(new Date).getTime();(o=function(e){return l(e)}).cancel=function(e){window[a]&&"function"==typeof window[a]&&window[a](e)};var u=o;t.default=u,e.exports=t.default},893:function(e,t,n){e.exports=n(35)(468)},894:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return Math.max(e.documentElement.offsetHeight||0,e.height||0,e.body.scrollHeight||0,e.body.offsetHeight||0)},e.exports=t.default},895:function(e,t,n){e.exports=n(35)(169)},896:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return(0,o.default)(r.default.findDOMNode(e))};var r=i(n(29)),o=i(n(1005));function i(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},897:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__1Knza",framedImage:"styles-module__framedImage__p1p-k",main:"styles-module__main__2V5AI",operations:"styles-module__operations__2tHBt",options:"styles-module__options__2V0tE",option:"styles-module__option__dhLVt",markedForDeletion:"styles-module__markedForDeletion__2l0on",footer:"styles-module__footer__8u68Z",input:"styles-module__input__2Zk8R",label:"styles-module__label__YKqSs",labelDisabled:"styles-module__labelDisabled__3jDaR",sharedChart:"styles-module__sharedChart__23Z4O"}},898:function(e,t,n){e.exports=n(35)(12)},899:function(e,t,n){e.exports=n(35)(451)},900:function(e,t,n){e.exports=n(35)(706)},901:function(e,t,n){e.exports=n(35)(356)},902:function(e,t,n){e.exports=n(35)(695)},903:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0ZWQgYnkgSWNvTW9vbi5pbyAtLT4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIxNCIgaGVpZ2h0PSIxNCI+CiAgPCEtLU5vIGxldmVsIGljb25zLS0+CiAgICAgIDxnICB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3LCA3KSI+CiAgICAgICAgPGNpcmNsZSByPSI2IiBmaWxsPSJub25lIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZT0iIzAwN0ZGRiI+PC9jaXJjbGU+CiAgICAgICAgPGNpcmNsZSByPSIzIiBmaWxsPSJub25lIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZT0iIzAwN0ZGRiI+PC9jaXJjbGU+CiAgICAgICAgPGNpcmNsZSByPSIxLjUiIGZpbGw9IiMwMDdGRkYiIHN0cm9rZT0ibm9uZSI+PC9jaXJjbGU+CiAgICAgIDwvZz4KPC9zdmc+"},904:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__22mhB",framedImage:"styles-module__framedImage__-4l6t",Checkboxes:"styles-module__Checkboxes__2oyZv",Tendency:"styles-module__Tendency__2Y46X",Significant:"styles-module__Significant__34YnP"}},906:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__3xfuL",framedImage:"styles-module__framedImage__3MWaq",validationBubbleBase:"styles-module__validationBubbleBase__1bQNI",genesSelection:"styles-module__genesSelection__17BpH",GeneSymbolValidator:"styles-module__GeneSymbolValidator__1K2q1",suggestionBubble:"styles-module__suggestionBubble__1TnzN",validBubble:"styles-module__validBubble__2iAqd",invalidBubble:"styles-module__invalidBubble__3Hs4P",topRow:"styles-module__topRow__2F7H0",default:"styles-module__default__3ZAms",oncoprintHeatmap:"styles-module__oncoprintHeatmap__lvPrO",studyView:"styles-module__studyView__3TtjM",studyViewFocus:"styles-module__studyViewFocus__1CfEf",nowrap:"styles-module__nowrap__1GVDf",icon:"styles-module__icon__2RDD6",pendingMessage:"styles-module__pendingMessage__1gVAe",oqlNotice:"styles-module__oqlNotice__3naFJ",errorMessage:"styles-module__errorMessage__3pZ_v",noChoiceLabel:"styles-module__noChoiceLabel__2sdit",singleChoiceLabel:"styles-module__singleChoiceLabel__178JA",multiChoiceLabel:"styles-module__multiChoiceLabel__1PPmp"}},907:function(e,t,n){"use strict";var r=n(0),o=n(1),i=n.n(o),a=n(9),l=n(2),s=n(120),c=n(8);function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var m=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":h(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},y=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=p(t).call(this,e))||"object"!==h(o)&&"function"!=typeof o?d(r):o,Object.defineProperty(d(n),"_selectedProfileOption",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(d(n),"_selectedGenericAssayEntityIds",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(d(n),"_genericAssaySearchText",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object(l.makeObservable)(d(n)),n.props.initialGenericAssayEntityIds&&(n._selectedGenericAssayEntityIds=n.props.initialGenericAssayEntityIds),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,r["Component"]),n=t,(o=[{key:"onSubmit",value:function(){var e=this;if(void 0!==this.selectedProfileOption){if(this.props.onChartSubmit){var t=this.selectedProfileOption,n=this._selectedGenericAssayEntityIds.map(function(n){return{name:n+": "+t.profileName,description:t.description,profileType:t.value,genericAssayType:e.props.genericAssayType,dataType:t.dataType,genericAssayEntityId:n,patientLevel:t.patientLevel}});this.props.onChartSubmit(n),this.clearSelectedEntities()}if(this.props.onTrackSubmit){var r=this.selectedProfileOption;this.props.onSelectGenericAssayProfile&&this.props.onSelectGenericAssayProfile(r.value);var o=this._selectedGenericAssayEntityIds.map(function(t){return{profileId:r.value,genericAssayType:e.props.genericAssayType,genericAssayEntityId:t}});this.props.onTrackSubmit(o)}}}},{key:"clearSelectedEntities",value:function(){this._selectedGenericAssayEntityIds=[]}},{key:"handleProfileSelect",value:function(e){e&&e.value&&(this._selectedProfileOption=e)}},{key:"onSelectGenericAssayEntities",value:function(e,t){var n=e||[];"select-option"===t.action&&"select_all_filtered_options"===t.option.value&&(n=i.a.union(this.filteredGenericAssayOptions,n));var r=n.map(function(e){return e.value});r=r.filter(function(e){return"select_all_filtered_options"!==e}),this._selectedGenericAssayEntityIds=r,this._genericAssaySearchText=""}},{key:"doesOptionMatchSearchText",value:function(e,t){var n=!1;return(!e||new RegExp(e,"i").test(t.label)||new RegExp(e,"i").test(t.value))&&(n=!0),n}},{key:"filterGenericAssayOption",value:function(e,t){return"select_all_filtered_options"===e.value||this.doesOptionMatchSearchText(t,e)&&!this._selectedGenericAssayEntityIds.includes(e.value)}},{key:"onGenericAssayInputChange",value:function(e,t){"input-change"===t.action?this._genericAssaySearchText=e:"set-value"!==t.action&&(this._genericAssaySearchText="")}},{key:"render",value:function(){return r.createElement("div",{"data-test":"GenericAssaySelection",style:{width:this.props.containerWidth?this.props.containerWidth-20:"auto"}},r.createElement("div",{"data-test":"GenericAssayEntitySelection"},r.createElement(s.default,{name:"generic-assay-select",placeholder:"Search for ".concat(Object(c.n)(this.props.genericAssayType,!0),"..."),closeMenuOnSelect:!1,value:this.selectedGenericAssaysJS,isMulti:!0,isClearable:!1,options:this.genericAssayOptions,filterOption:this.filterGenericAssayOption,onInputChange:this.onGenericAssayInputChange,onChange:this.onSelectGenericAssayEntities,styles:{multiValueLabel:function(e){return Object.assign(Object.assign({},e),{whiteSpace:"normal"})}}})),r.createElement("div",{style:{display:"flex",marginTop:10}},r.createElement("div",{"data-test":"GenericAssayProfileSelection",style:{flex:1,marginRight:15}},r.createElement(s.default,{value:this.selectedProfileOption,onChange:this.handleProfileSelect,options:this.props.molecularProfileOptions,isClearable:!1,isSearchable:!1})),r.createElement("button",{disabled:this.buttonDisabled,className:"btn btn-primary btn-sm","data-test":"GenericAssaySelectionSubmitButton",onClick:this.onSubmit},this.props.submitButtonText)))}},{key:"selectedProfileOption",get:function(){return void 0!==this._selectedProfileOption?this._selectedProfileOption:this.props.molecularProfileOptions?this.props.molecularProfileOptions[0]:void 0}},{key:"buttonDisabled",get:function(){return!this.props.allowEmptySubmission&&i.a.isEmpty(this._selectedGenericAssayEntityIds)}},{key:"genericAssayEntitiesOptionsByValueMap",get:function(){return i.a.keyBy(this.props.genericAssayEntityOptions,function(e){return e.value})}},{key:"selectedGenericAssayEntities",get:function(){var e=this;return i.a.intersection(this._selectedGenericAssayEntityIds,i.a.keys(this.genericAssayEntitiesOptionsByValueMap)).map(function(t){return e.genericAssayEntitiesOptionsByValueMap[t]})}},{key:"selectedGenericAssaysJS",get:function(){return Object(l.toJS)(this.selectedGenericAssayEntities)}},{key:"genericAssayOptions",get:function(){var e=this,t=this.props.genericAssayEntityOptions,n=this.props.genericAssayEntityOptions.filter(function(t){return e.doesOptionMatchSearchText(e._genericAssaySearchText,t)&&!e._selectedGenericAssayEntityIds.includes(t.value)}).length;return this._genericAssaySearchText.length>0&&n>0&&(t=i.a.concat({id:"select_all_filtered_options",value:"select_all_filtered_options",label:"Select all filtered options (".concat(n,")")},t)),t}},{key:"filteredGenericAssayOptions",get:function(){var e=this;return i.a.filter(this.genericAssayOptions,function(t){return"select_all_filtered_options"!==t.value&&e.doesOptionMatchSearchText(e._genericAssaySearchText,t)})}},{key:"isSelectedGenericAssayOptionsOverLimit",get:function(){return this._selectedGenericAssayEntityIds.length>100}}])&&u(n.prototype,o),a&&u(n,a),t}();Object.defineProperty(y,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{allowEmptySubmission:!1}}),m([l.observable],y.prototype,"_selectedProfileOption",void 0),m([l.observable.ref],y.prototype,"_selectedGenericAssayEntityIds",void 0),m([l.observable],y.prototype,"_genericAssaySearchText",void 0),m([l.action.bound],y.prototype,"onSubmit",null),m([l.action.bound],y.prototype,"clearSelectedEntities",null),m([l.action.bound],y.prototype,"handleProfileSelect",null),m([l.computed],y.prototype,"selectedProfileOption",null),m([l.computed],y.prototype,"buttonDisabled",null),m([l.computed],y.prototype,"genericAssayEntitiesOptionsByValueMap",null),m([l.action.bound],y.prototype,"onSelectGenericAssayEntities",null),m([l.computed],y.prototype,"selectedGenericAssayEntities",null),m([l.computed],y.prototype,"selectedGenericAssaysJS",null),m([l.computed],y.prototype,"genericAssayOptions",null),m([l.computed],y.prototype,"filteredGenericAssayOptions",null),m([l.action.bound],y.prototype,"filterGenericAssayOption",null),m([l.action.bound],y.prototype,"onGenericAssayInputChange",null),m([l.computed],y.prototype,"isSelectedGenericAssayOptionsOverLimit",null),y=m([a.observer],y),t.a=y},908:function(e,t,n){"use strict";n.d(t,"c",function(){return f}),n.d(t,"a",function(){return p}),n.d(t,"b",function(){return d}),n.d(t,"f",function(){return b}),n.d(t,"g",function(){return g}),n.d(t,"d",function(){return O}),n.d(t,"e",function(){return S});var r,o,i=n(1),a=n.n(i),l=n(39),s=n(10),c=n(3);function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p,d,f="N/A",h=/^((?:[^\(\)])+)(?:\(([^\(\)]+)\))?$/,m=/^(?:[^\/]+\/)+[^\/]+$/;!function(e){e.NUMBER="number",e.LOG_NUMBER="lognumber",e.STRING="string",e.COUNTS="counts"}(p||(p={})),function(e){e.HEATMAP_01="heatmap01",e.HEATMAP_ZSCORE="heatmapZscores",e.HEATMAP="heatmap"}(d||(d={}));u(r={},p.NUMBER,!0),u(r,p.LOG_NUMBER,!0),u(r,p.STRING,!0),u(r,p.COUNTS,!0),u(o={},d.HEATMAP_01,!0),u(o,d.HEATMAP_ZSCORE,!0),u(o,d.HEATMAP,!0);function y(e){switch(e){case d.HEATMAP_01:return s.a.METHYLATION;case d.HEATMAP_ZSCORE:return s.a.MRNA_EXPRESSION;case d.HEATMAP:return s.a.GENERIC_ASSAY}}function b(e){return v(e,"clinical")}function g(e){return v(e,"heatmap")}function v(e,t){var n=e.trim().split("\n").map(function(e){return e.trim().split(/\s+/)});if(0===n.length)return{parseSuccess:!0,result:{headers:[],data:[]},error:void 0};try{var r=n.shift(),o="clinical"===t?function(e){e.shift();var t="Clinical data input error in line 1 (header): ",n=[],r={},o=!0,i=!1,a=void 0;try{for(var l,s=e[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var c=l.value,u=c.match(h);if(!u)throw new Error("".concat(t,"misformatted clinical track name ").concat(c));var d=u[2]||p.STRING,f=void 0;switch(d){case p.NUMBER:case p.LOG_NUMBER:case p.STRING:break;default:if(!m.test(d))throw new Error("".concat(t,"invalid clinical track data type ").concat(d));f=d.split("/"),d=p.COUNTS}var y=u[1];if(y in r)throw new Error("".concat(t,"duplicate clinical track name ").concat(y));n.push({trackName:y,datatype:d,countsCategories:f}),r[y]=!0}}catch(e){i=!0,a=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw a}}return n}(r):function(e){e.shift();var t="Heatmap data input error in line 1 (header): ",n=[],r={},o=!0,i=!1,a=void 0;try{for(var l,s=e[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var c=l.value,u=c.match(h);if(!u)throw new Error("".concat(t,"misformatted heatmap track name ").concat(c));var p=u[2]||d.HEATMAP;switch(p){case d.HEATMAP_01:case d.HEATMAP_ZSCORE:case d.HEATMAP:break;default:throw new Error("".concat(t,"invalid heatmap track data type ").concat(p))}var f=u[1];if(f in r)throw new Error("".concat(t,"duplicate heatmap track name ").concat(f));n.push({trackName:f,datatype:p}),r[f]=!0}}catch(e){i=!0,a=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw a}}return n}(r),i=n.map(function(e,n){var r="".concat(Object(c.bb)(t)," data input error on line ").concat(n+2,": \n").concat(e.join("\t"),"\n\n");if(e.length===o.length+1)return{sampleId:e[0],orderedValues:e.slice(1)};throw new Error("".concat(r,"data lines must have ").concat(o.length+1," columns, the same number as in the header."))});return{parseSuccess:!0,result:{headers:o,data:i.filter(function(e){return!!e})},error:void 0}}catch(e){return{parseSuccess:!1,result:void 0,error:e.message}}}function _(e,t,n,r){var o="Heatmap data input error on line ".concat(r+2,": \n\n"),i=null;if(e!==f&&(i=parseFloat(e)),null!==i&&isNaN(i))throw new Error("".concat(o," input ").concat(e," is not valid for heatmap track ").concat(n.trackName));return{sample:t.sampleId,profile_data:i,uid:t.sampleId,na:null===i}}function w(e,t,n,r){var o,i,a="Clinical data input error on line ".concat(r+2,": \n\n");if(e===f)return{sample:t.sampleId,attr_id:n.trackName,attr_val_counts:{},attr_val:"",uid:t.sampleId,na:!0};switch(n.datatype){case p.STRING:o=u({},e,1),i=e;break;case p.NUMBER:case p.LOG_NUMBER:var l=parseFloat(e);if(isNaN(l))throw new Error("".concat(a," input ").concat(e," is not valid for numerical track ").concat(n.trackName));o=u({},l,1),i=l;break;case p.COUNTS:var s=e.split("/").map(parseFloat);if(s.length!==n.countsCategories.length)throw new Error("".concat(a," input ").concat(e," is not valid - must have ").concat(n.countsCategories.length," values to match with header, but only has ").concat(s.length));i=o=n.countsCategories.reduce(function(e,t,n){return e[t]=s[n],e},{})}return{sample:t.sampleId,attr_id:n.trackName,attr_val_counts:o,attr_val:i,uid:t.sampleId,na:e===f}}function O(e,t,n){var r=function(e,t){var n=a.a.mapValues(a.a.keyBy(e,function(e){return e.trackName}),function(){return[]});return t.forEach(function(t,r){for(var o=0;o<e.length;o++){var i=t.orderedValues[o];n[e[o].trackName].push(w(i,t,e[o],r))}}),n}(e,t),o=a.a.keyBy(n||[]);r=a.a.mapValues(r,function(e){return e.filter(function(e){return!(e.sample in o)})});var i=[];return e.map(function(e){var t,n,o,a,s=r[e.trackName];switch(e.datatype){case p.STRING:t="string";break;case p.NUMBER:case p.LOG_NUMBER:t="number",n=function(e){var t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value;isNaN(s.attr_val)||(t=Math.min(t,s.attr_val),n=Math.max(n,s.attr_val))}}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return[t,n]}(s);break;case p.COUNTS:t="counts","mutation_spectrum"===e.trackName.toLowerCase()&&e.countsCategories.length===l.b.length&&(o=l.b)}i.push({key:(a=e.trackName,"clinicalTrack_".concat(a)),attributeId:e.trackName,label:e.trackName,data:s,datatype:t,description:"",numberRange:n,numberLogScale:e.datatype===p.LOG_NUMBER||void 0,countsCategoryLabels:e.countsCategories,countsCategoryFills:o})}),i}function S(e,t,n){var r=function(e,t){var n=a.a.mapValues(a.a.keyBy(e,function(e){return e.trackName}),function(){return[]});return t.forEach(function(t,r){for(var o=0;o<e.length;o++){var i=t.orderedValues[o];n[e[o].trackName].push(_(i,t,e[o],r))}}),n}(e,t),o=a.a.keyBy(n||[]);r=a.a.mapValues(r,function(e){return e.filter(function(e){return!(e.sample in o)})});var i=[];return e.map(function(e){var t,n=r[e.trackName];i.push({key:(t=e.trackName,"heatmapTrack_".concat(t)),label:e.trackName,legendLabel:E(e),tooltipValueLabel:"Value",molecularProfileId:"input",molecularAlterationType:y(e.datatype),datatype:"",data:n.map(function(e){return Object.assign(e,{study_id:"",patient:""})}),trackGroupIndex:2,hasColumnSpacing:!1})}),i}function E(e){switch(e.datatype){case d.HEATMAP_01:return"Heatmap (0-1)";case d.HEATMAP_ZSCORE:return"Heatmap (z-scores)";case d.HEATMAP:default:return"Heatmap"}}},909:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Array=0]="Array",e[e.ObjectWithNonNumericKeys=1]="ObjectWithNonNumericKeys",e[e.Object=2]="Object",e[e.Primitive=3]="Primitive"}(r=t.JSONObjectType||(t.JSONObjectType={}));var o=function(){function e(){}return e.getObjectType=function(e){return null!==e&&"object"==typeof e?Array.isArray(e)?r.Array:Object.keys(e).length?r.ObjectWithNonNumericKeys:r.Object:r.Primitive},e.checkLabelTypes=function(e){return"number"==typeof e.reduce(function(e,t){return e+(isNaN(Number(t))?t:Number(t))},0)?"number":"string"},e.getUniqueObjectKeys=function(e){var t=[],n=r.Object;return e.forEach(function(e){t=t.concat(Object.keys(e)).filter(function(e,t,n){return n.indexOf(e)===t})}),{labels:t,type:n}},e}();t.default=o},910:function(e,t,n){e.exports=n(35)(890)},911:function(e,t,n){e.exports=n(35)(76)},912:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function o(e){return"number"==typeof e?e:e.toString()}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"receiveProps",value:function(e){this.props=e}},{key:"getReactKey",value:function(e){var t=this.props.itemReactKeyPropName;if(t){var n=e[t];if(null!=n)return n}return o(this.getRawValue(e))}},{key:"getSortKey",value:function(e){var t=this.props.itemSortKeyPropName;if(t){var n=e[t];if(null!=n)return n}return o(this.getRawValue(e))}},{key:"getInputValue",value:function(e){return this.getRawValue(e).toString()}},{key:"getRawValue",value:function(e){var t=this.props.itemValuePropName;if(t){var n=e[t];if(null!=n)return n}return e}},{key:"getTextRepresentations",value:function(e){return[this.foldValue(this.getInputValue(e))]}},{key:"foldValue",value:function(e){return e.toLowerCase()}},{key:"newFromValue",value:function(e){return e}},{key:"itemIncludedByInput",value:function(e,t){var n=!0,r=!1,o=void 0;try{for(var i,a=this.getTextRepresentations(e)[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){if(i.value.indexOf(t)>=0)return!0}}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return!1}},{key:"itemMatchesInput",value:function(e,t){var n=!0,r=!1,o=void 0;try{for(var i,a=this.getTextRepresentations(e)[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){if(i.value===t)return!0}}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return!1}},{key:"sortItems",value:function(e,t){var n=this;return e.sort(function(e,r){return n.compareItemsWithValue(e,r,t)}),e}},{key:"compareItemsWithValue",value:function(e,t,n){var r=this.itemMatchesInput(e,n);if(r!=this.itemMatchesInput(t,n))return r?-1:1;var o=this.itemInclusionRankForInput(e,n),i=this.itemInclusionRankForInput(t,n);return o!=i?o-i:this.compareItems(e,t)}},{key:"itemInclusionRankForInput",value:function(e,t){var n=!1,r=!0,o=!1,i=void 0;try{for(var a,l=this.getTextRepresentations(e)[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value.indexOf(t);if(0===s)return 0;s>0&&(n=!0)}}catch(e){o=!0,i=e}finally{try{!r&&l.return&&l.return()}finally{if(o)throw i}}return n?1:2}},{key:"compareItems",value:function(e,t){var n=this.getSortKey(e),r=this.getSortKey(t);return n<r?-1:n==r?0:1}},{key:"renderItem",value:function(e){return this.getInputValue(e)}},{key:"renderSuggested",value:function(e){return this.renderItem(e)}},{key:"renderSelected",value:function(e){return this.renderItem(e)}}]),e}();t.default=i},913:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(838),l=(r=a)&&r.__esModule?r:{default:r};function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"key";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.itemKeyPropName=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l["default"]),i(t,[{key:"_getKeyValueItem",value:function(e,t){var n,r=this.itemKeyPropName,i=this.props.itemValuePropName,a=void 0===i?"value":i;return"object"==typeof t&&a in t?t[r]===e?t:o(s({},r,e),t):(s(n={},r,e),s(n,a,t),n)}}]),t}();t.default=c},914:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(0),o=n(9),i=n(910),a=n(72),l=Object(o.observer)(function(e){return e.store.cancerTypes.isPending||e.store.cancerStudies.isPending||e.store.profiledSamplesCount.isPending?r.createElement(a.a,{isLoading:!0,size:"small",center:!1}):r.createElement(o.Observer,null,function(){var t=Object(i.expr)(function(){return e.store.selectableSelectedStudyIds.length});return r.createElement(r.Fragment,null,r.createElement("a",{onClick:function(){t&&(e.store.showSelectedStudiesOnly=!e.store.showSelectedStudiesOnly)}},r.createElement("b",null,t)," ",1===t?"study":"studies"," ","selected (",r.createElement("b",null,e.store.sampleCountForSelectedStudies)," ","samples)"),e.store.selectableSelectedStudies.length>0&&r.createElement("a",{"data-test":"globalDeselectAllStudiesButton",style:{marginLeft:10},onClick:function(){return e.store.studyListLogic.mainView.clearAllSelection()}},"Deselect all"))})})},915:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringable=function(e){return null!=e&&typeof("function"===e.toString)}},916:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,i);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(a)}var c=Object.getPrototypeOf(o);if(null===c)return;e=c,t=i,n=a,r=!0,l=c=void 0}};var a,l=n(0),s=(a=l)&&a.__esModule?a:{default:a},c=n(859),u=n(1076),p=n(826),d=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["default"].Component),o(t,[{key:"handleClickTh",value:function(e){this.props.onSort(e.key)}},{key:"handleKeyDownTh",value:function(e,t){13===t.keyCode&&this.props.onSort(e.key)}},{key:"render",value:function(){for(var e=[],t=0;t<this.props.columns.length;t++){var n=this.props.columns[t],o="reactable-th-"+n.key.replace(/\s+/g,"-").toLowerCase(),i="",a=null;this.props.sortableColumns[n.key]&&(i+="reactable-header-sortable ",a="button"),this.props.sort.column===n.key&&(i+="reactable-header-sort",1===this.props.sort.direction?i+="-asc":i+="-desc"),i.length>0&&(o+=" "+i),"object"==typeof n.props&&"string"==typeof n.props.className&&(o+=" "+n.props.className),e.push(s.default.createElement(c.Th,r({},n.props,{className:o,key:t,onClick:this.handleClickTh.bind(this,n),onKeyDown:this.handleKeyDownTh.bind(this,n),role:a,tabIndex:"0"}),n.label))}var l=(0,p.filterPropsFrom)(this.props);return s.default.createElement("thead",l,!0===this.props.filtering?s.default.createElement(u.Filterer,{colSpan:this.props.columns.length,onFilter:this.props.onFilter,placeholder:this.props.filterPlaceholder,value:this.props.currentFilter,className:this.props.filterClassName}):null,s.default.createElement("tr",{className:"reactable-column-header"},e))}}],[{key:"getColumns",value:function(e){var t=[];return s.default.Children.forEach(e.props.children,function(e){var n={};if(void 0!==e.props&&(n.props=(0,p.filterPropsFrom)(e.props),void 0!==e.props.children&&(n.label=e.props.children,n.key=n.label),"string"==typeof e.props.column&&(n.key=e.props.column,void 0===n.label&&(n.label=n.key))),void 0===n.key)throw new TypeError('<th> must have either a "column" property or a string child');t.push(n)}),t}}]),t}();t.Thead=d},917:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,i);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(a)}var c=Object.getPrototypeOf(o);if(null===c)return;e=c,t=i,n=a,r=!0,l=c=void 0}};var a,l=n(0),s=(a=l)&&a.__esModule?a:{default:a},c=n(918),u=n(1078),p=n(826),d=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["default"].Component),o(t,[{key:"render",value:function(){var e=(0,u.toArray)(s.default.Children.children(this.props.children));this.props.data&&this.props.columns&&"function"==typeof this.props.columns.map&&(void 0===e.concat&&console.log(e),e=e.concat(this.props.columns.map(function(e,t){var n=e.props,o=void 0===n?{}:n,i=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["props"]);if(this.props.data.hasOwnProperty(i.key)){var a=this.props.data[i.key];return null!=a&&!0===a.__reactableMeta&&(o=a.props,a=a.value),s.default.createElement(c.Td,r({column:i,key:i.key},o),a)}return s.default.createElement(c.Td,{column:i,key:i.key})}.bind(this))));var t=(0,p.filterPropsFrom)(this.props);return s.default.DOM.tr(t,e)}}]),t}();t.Tr=d,d.childNode=c.Td,d.dataType="object"},918:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,i);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(a)}var c=Object.getPrototypeOf(o);if(null===c)return;e=c,t=i,n=a,r=!0,l=c=void 0}};var a,l=n(0),s=(a=l)&&a.__esModule?a:{default:a},c=n(1077),u=n(915),p=n(839),d=n(826),f=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["default"].Component),o(t,[{key:"stringifyIfNotReactComponent",value:function(e){return!(0,c.isReactComponent)(e)&&(0,u.stringable)(e)&&void 0!==e?e.toString():null}},{key:"render",value:function(){var e,t=(0,d.filterPropsFrom)(this.props);if("object"==typeof this.props.column)for(var n in this.props.column)"key"!==n&&"name"!==n&&(t[n]=this.props.column[n]);return t.onClick=this.props.handleClick,void 0===this.props.data&&(e=this.stringifyIfNotReactComponent(this.props.children)),(0,p.isUnsafe)(this.props.children)?s.default.createElement("td",r({},t,{dangerouslySetInnerHTML:{__html:this.props.children.toString()}})):s.default.createElement("td",t,e||this.props.children)}}]),t}();t.Td=f},919:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,i);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(a)}var c=Object.getPrototypeOf(o);if(null===c)return;e=c,t=i,n=a,r=!0,l=c=void 0}};var i,a=n(0),l=(i=a)&&i.__esModule?i:{default:i},s=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l["default"].Component),r(t,[{key:"render",value:function(){return l.default.createElement("tfoot",this.props)}}]),t}();t.Tfoot=s},920:function(e,t,n){"use strict";function r(e,t){var n=t.distance,r=t.left,o=t.right,i=t.up,a=t.down,s=t.top,c=t.bottom,u=t.big,d=t.mirror,f=t.opposite,h=(n?n.toString():0)+((r?1:0)|(o?2:0)|(s||a?4:0)|(c||i?8:0)|(d?16:0)|(f?32:0)|(e?64:0)|(u?128:0));if(p.hasOwnProperty(h))return p[h];var m=r||o||i||a||s||c,y=void 0,b=void 0;if(m){if(!d!=!(e&&f)){var g=[o,r,c,s,a,i];r=g[0],o=g[1],s=g[2],c=g[3],i=g[4],a=g[5]}var v=n||(u?"2000px":"100%");y=r?"-"+v:o?v:"0",b=a||s?"-"+v:i||c?v:"0"}return p[h]=(0,l.animation)((e?"to":"from")+" {opacity: 0;"+(m?" transform: translate3d("+y+", "+b+", 0);":"")+"}\n     "+(e?"from":"to")+" {opacity: 1;transform: none;} "),p[h]}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.defaults,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.children,o=(e.out,e.forever),i=e.timeout,a=e.duration,s=void 0===a?l.defaults.duration:a,u=e.delay,p=void 0===u?l.defaults.delay:u,d=e.count,f=void 0===d?l.defaults.count:d,h=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children","out","forever","timeout","duration","delay","count"]),m={make:r,duration:void 0===i?s:i,delay:p,forever:o,count:f,style:{animationFillMode:"both"},reverse:h.left};return t?(0,c.default)(h,m,m,n):m}Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(4),l=n(806),s=n(809),c=(i=s)&&i.__esModule?i:{default:i},u={out:a.bool,left:a.bool,right:a.bool,top:a.bool,bottom:a.bool,big:a.bool,mirror:a.bool,opposite:a.bool,duration:a.number,timeout:a.number,distance:a.string,delay:a.number,count:a.number,forever:a.bool},p={};o.propTypes=u,t.default=o,e.exports=t.default},921:function(e,t,n){e.exports=n(35)(344)},922:function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(3),a=n(2),l=n(49),s=n(118),c=n(72),u=n(147),p=n(124),d=n(923),f=n(109);function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var v=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":g(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};var _=function(e){function t(e){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,i=m(t).call(this,e),n=!i||"object"!==g(i)&&"function"!=typeof i?y(o):i,Object.defineProperty(y(n),"inputGroupName",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(y(n),"saveGroupToUser",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(y(n),"enterNameInterface",{enumerable:!0,configurable:!0,writable:!0,value:Object(s.a)({await:function(){return[n.props.store.origin,n.props.store.sampleMap,n.props.store.existingGroupNames,n.props.store._originalGroups,n.props.store.patientToSamplesSet]},render:function(){return r.createElement("div",{style:{width:250}},n.props.store.isLoggedIn&&r.createElement(d.a,{checked:n.saveGroupToUser,onClick:n.toggleSaveGroupToUser,label:[r.createElement("span",{style:{marginRight:5}},"Save group to user account"),r.createElement(p.a,{divStyle:{display:"inline"},tooltip:r.createElement("span",null,"Selecting this will save the new group with the associated study in your user account.")})]}),r.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.createElement("input",{className:"form-control",style:{marginRight:5},type:"text",placeholder:"Enter a group name..",value:n.inputGroupName,onChange:n.onChangeInputGroupName,"data-test":n.props.caseType+"GroupNameInputField"}),r.createElement("button",{className:"btn btm-sm btn-primary",disabled:0===n.inputGroupName.length||n.isDuplicateName,onClick:n.submit,"data-test":n.props.caseType+"GroupNameSubmitButton"},"Submit")),n.isDuplicateName&&r.createElement("div",{style:{marginTop:4},"data-test":n.props.caseType+"DuplicateGroupNameMessage"},l.c))},renderPending:function(){return r.createElement(c.a,{isLoading:!0})}})}),Object.defineProperty(y(n),"includedRegionsDescription",{enumerable:!0,configurable:!0,writable:!0,value:Object(s.a)({await:function(){return[n.props.store.uidToGroup]},render:function(){return r.createElement("div",null,n.props.includedRegions.map(function(e){return r.createElement("div",null,function(e,t,n,o){var i=e.map(function(e){return n[e]}),a=r.createElement("span",null,o[0].toUpperCase(),o.substring(1),"s only in"," ",Object(u.f)(i,"and"));return a=r.createElement("span",null,a,".")}(e,n.props.allGroupsInPlot,n.props.store.uidToGroup.result,n.props.caseType))}))}})}),Object(a.makeObservable)(y(n)),n}var n,o,v;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,r["Component"]),n=t,(o=[{key:"toggleSaveGroupToUser",value:function(){this.saveGroupToUser=!this.saveGroupToUser}},{key:"onChangeInputGroupName",value:function(e){this.inputGroupName=e.target.value}},{key:"submit",value:function(){var e;e="sample"===this.props.caseType?Object(u.d)(this.props.store._originalGroups.result,this.props.includedRegions,this.props.allGroupsInPlot):Object(u.c)(this.props.store._originalGroups.result,this.props.includedRegions,this.props.allGroupsInPlot,this.props.store.patientToSamplesSet.result),this.props.submitGroup({name:this.inputGroupName,description:"",studies:e,origin:this.props.store.origin.result,color:void 0},this.saveGroupToUser)}},{key:"render",value:function(){return r.createElement("div",{style:Object.assign({width:this.props.width,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},this.props.style)},r.createElement(i.i,{trigger:["click"],overlay:this.enterNameInterface.component,placement:"top"},r.createElement("button",{className:"btn btn-md btn-primary",disabled:0===this.props.includedRegions.length,"data-event":Object(f.e)({action:"createGroupFromVenn",label:"",category:"groupComparison"}),"data-test":this.props.caseType+"GroupComparisonCreateGroupButton"},"Create Group From Selected Diagram Areas")),r.createElement("div",{style:{marginTop:20}},this.includedRegionsDescription.component))}},{key:"isDuplicateName",get:function(){var e=this.props.store.existingGroupNames.result,t=e.session;return this.saveGroupToUser&&(t=t.concat(e.user)),t.includes(this.inputGroupName.trim())}}])&&h(n.prototype,o),v&&h(n,v),t}();v([a.observable],_.prototype,"inputGroupName",void 0),v([a.observable],_.prototype,"saveGroupToUser",void 0),v([a.action.bound],_.prototype,"toggleSaveGroupToUser",null),v([a.action.bound],_.prototype,"onChangeInputGroupName",null),v([a.action.bound],_.prototype,"submit",null),v([a.computed],_.prototype,"isDuplicateName",null),_=v([o.observer],_),t.a=_},923:function(e,t,n){"use strict";var r=n(0),o=n(9);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,l(t).apply(this,arguments))}var n,o,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement("div",{className:"checkbox",style:Object.assign({display:"flex",alignItems:"center"},this.props.style)},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:this.props.value,checked:this.props.checked,onClick:this.props.onClick,style:{marginTop:1}})),"function"==typeof this.props.label?this.props.label():this.props.label)}}])&&i(n.prototype,o),c&&i(n,c),t}();p=u([o.observer],p),t.a=p},924:function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return u});var r=n(0),o=n(840),i=n(147),a=n(855);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},c=function(e){var t=e.uidToGroup,n=e.dx,a=e.dy,c=(e.datum,e.text,s(e,["uidToGroup","dx","dy","datum","text"])),u=t[e.text];return r.createElement(o.a,l({text:u.name,prefixTspans:u.ordinal.length>0?[r.createElement("tspan",null,"("),r.createElement("tspan",{style:{fontWeight:"bold"}},u.ordinal),r.createElement("tspan",null,") ")]:void 0,tooltip:function(){return r.createElement("div",null,Object(i.h)(u))},maxWidth:e.maxLabelWidth,dy:a,dx:n},c))},u=function(e){var t=e.uidToGroup,n=e.dx,c=e.dy,u=(e.datum,e.text),p=s(e,["uidToGroup","dx","dy","datum","text"]),d=JSON.parse(u).map(function(e){return t[e]}),f=(d.map(function(e){return e.ordinal}),"Only ".concat(d.map(function(e){return e.ordinal?"(".concat(e.ordinal,")"):e.name}).join(", ")));return r.createElement(o.a,l({text:f,renderTruncatedText:function(e){for(var t=[],n=0;n<e.length;n++){n>0&&n<e.length-1&&"("===e[n-1]&&")"===e[n+1]?t.push(r.createElement("tspan",{style:{fontWeight:"bold"}},e[n])):t.push(r.createElement("tspan",null,e[n]))}return t},alwaysShowTooltip:!0,tooltip:function(){return r.createElement("div",null,"Only"," ",Object(a.a)(r.createElement("span",null,", "),d.map(function(e){return Object(i.h)(e)})))},maxWidth:e.maxLabelWidth,dy:c,dx:n},p))}},925:function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(17),a=n(12),l=n(3),s=n(51);function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var h=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":f(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,p(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r["Component"]),n=t,(o=[{key:"onAddGenes",value:function(){Object(s.e)(window.urlWrapper,this.props.checkedGenes)}},{key:"render",value:function(){var e=this.props.checkedGenes.length>0?"(".concat(this.props.checkedGenes.join(", "),")"):"(none checked)";return r.createElement("div",{style:{marginBottom:15}},r.createElement(l.i,{overlay:"Check genes in table below"},r.createElement(i.Button,{style:{marginBottom:2},disabled:this.props.checkedGenes.length<1,onClick:this.onAddGenes,bsSize:"xsmall"},"Add checked genes to query ",e)))}}])&&c(n.prototype,o),a&&c(n,a),t}();h([a.default],m.prototype,"onAddGenes",null),m=h([o.observer],m),t.a=m},926:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(0);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,l(t).apply(this,arguments))}var n,o,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.onRender,n=c(e,["onRender"]);return(n.width>5||n.height>5)&&t(),r.createElement("rect",n)}}])&&i(n.prototype,o),u&&i(n,u),t}()},927:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(0),o=n(12);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,l(t).apply(this,arguments))}var n,o,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,r["Component"]),n=t,(o=[{key:"onMouseOver",value:function(e){e.target.setAttribute("r",10),this.props.onMouseOver(this.props.datum,this.props.x,this.props.y)}},{key:"onMouseOut",value:function(e){e.target.setAttribute("r",3),this.props.onMouseOut()}},{key:"render",value:function(){return r.createElement("circle",{cx:this.props.x,cy:this.props.y,r:"3",onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,style:Object.assign({},this.props.style,{fill:this.props.fill(this.props.datum)})})}}])&&i(n.prototype,o),c&&i(n,c),t}();u([o.default],p.prototype,"onMouseOver",null),u([o.default],p.prototype,"onMouseOut",null)},928:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(174);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){function t(e,n,r){var l,s,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s=this,l=!(c=i(t).call(this,e))||"object"!==o(c)&&"function"!=typeof c?a(s):c,Object.defineProperty(a(l),"setHighlighted",{enumerable:!0,configurable:!0,writable:!0,value:r}),l.dataHighlighter=function(e){var t=n();return!(!t||e.entrezGeneId!==t.entrezGeneId)},l}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,r["a"]),t}()},929:function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(2),a=n(60),l=n.n(a),s=n(98),c=n(1),u=n(12),p=n(8),d=n(339),f=n(3),h=n(13),m=n(72),y=n(56),b=n(19),g=n(5),v=n.n(g),_=n(960);function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?E(e):t}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var x=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":T(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},j=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function l(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,l)}s((r=r.apply(e,t||[])).next())})},A=function(e){function t(){return O(this,t),S(this,k(t).apply(this,arguments))}return C(t,d["a"]),t}(),I=function(e){function t(e){var n;return O(this,t),n=S(this,k(t).call(this,e)),Object.defineProperty(E(n),"svgContainer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(E(n),"horzAxisData",{enumerable:!0,configurable:!0,writable:!0,value:Object(f.vb)({await:function(){return[]},invoke:function(){return j(E(n),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.map(this.props.groups,function(e){return e.name}),n={data:[],datatype:"string",categoryOrder:t},r=c.reduce(this.props.groups,function(e,t){return t.samples.forEach(function(n){var r=n.uniqueSampleKey;void 0===e[r]&&(e[r]={uniqueSampleKey:r,value:[]}),e[r].value.push(t.name)}),e},{}),n.data=c.values(r),e.abrupt("return",Promise.resolve(n));case 5:case"end":return e.stop()}},e,this)}))}})}),Object.defineProperty(E(n),"vertAxisData",{enumerable:!0,configurable:!0,writable:!0,value:Object(f.vb)({invoke:function(){return j(E(n),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,o,i,a,l,s,u,p,d,f,m,y,b,g,v,_,w;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={data:[],datatype:"number"},void 0===this.props.selectedRow){e.next=62;break}if(!this.isGenericAssay){e.next=39;break}return e.next=5,h.a.fetchGenericAssayDataInMolecularProfileUsingPOST({molecularProfileId:this.props.selectedProfile.molecularProfileId,genericAssayDataFilter:{genericAssayStableIds:[this.props.selectedRow.stableId],sampleIds:c.map(this.props.sampleKeyToSample,function(e){return e.sampleId})}});case 5:n=e.sent,r=t.data,o=!0,i=!1,a=void 0,e.prev=10,l=n[Symbol.iterator]();case 12:if(o=(s=l.next()).done){e.next=23;break}if(u=s.value,!/[<>]+/.test(u.value)){e.next=18;break}return e.abrupt("continue",20);case 18:p=parseFloat(u.value),r.push({uniqueSampleKey:u.uniqueSampleKey,value:p});case 20:o=!0,e.next=12;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(10),i=!0,a=e.t0;case 29:e.prev=29,e.prev=30,o||null==l.return||l.return();case 32:if(e.prev=32,!i){e.next=35;break}throw a;case 35:return e.finish(32);case 36:return e.finish(29);case 37:e.next=62;break;case 39:return e.next=41,h.a.fetchAllMolecularDataInMolecularProfileUsingPOST({molecularProfileId:this.props.selectedProfile.molecularProfileId,molecularDataFilter:{entrezGeneIds:[this.props.selectedRow.entrezGeneId],sampleIds:c.map(this.props.sampleKeyToSample,function(e){return e.sampleId})}});case 41:for(d=e.sent,f=t.data,m=!0,y=!1,b=void 0,e.prev=46,g=d[Symbol.iterator]();!(m=(v=g.next()).done);m=!0)_=v.value,w=this.logScale?Math.log(_.value+1)/Math.log(2):_.value,f.push({uniqueSampleKey:_.uniqueSampleKey,value:w});e.next=54;break;case 50:e.prev=50,e.t1=e.catch(46),y=!0,b=e.t1;case 54:e.prev=54,e.prev=55,m||null==g.return||g.return();case 57:if(e.prev=57,!y){e.next=60;break}throw b;case 60:return e.finish(57);case 61:return e.finish(54);case 62:return e.abrupt("return",Promise.resolve(t));case 63:case"end":return e.stop()}},e,this,[[10,25,29,37],[30,,32,36],[46,50,54,62],[55,,57,61]])}))}})}),Object.defineProperty(E(n),"boxPlotData",{enumerable:!0,configurable:!0,writable:!0,value:Object(f.vb)({await:function(){return[n.vertAxisData,n.horzAxisData]},invoke:function(){var e=n.horzAxisData.result,t=n.vertAxisData.result;if(e&&t){var r=e,o=t;return Promise.resolve(Object(p.F)(r,o,n.props.sampleKeyToSample,{},void 0,void 0))}return new Promise(function(){return 0})}})}),Object(i.makeObservable)(E(n)),n}var n,o,a;return C(t,r["Component"]),n=t,(o=[{key:"getData",value:function(){return void 0!==this.props.selectedRow?Object(p.q)(this.boxPlotData.result,"Group",this.axisLabelY,{}):""}},{key:"render",value:function(){var e=this,t=null;if(void 0===this.props.selectedRow)t=r.createElement("div",{className:v()("text-center",l.a.BoxEmpty)},"Click on ",this.isGenericAssay?"an entity":"gene"," in the table to render this plot.");else if(this.boxPlotData.isPending)t=r.createElement("div",{className:v()("text-center",l.a.BoxEmpty)},r.createElement(m.a,{isLoading:!0,size:"small",className:l.a.ChartLoader}));else if(this.boxPlotData.isComplete&&this.boxPlotData.result.length>0){var n="Group";this.isGenericAssay||void 0===this.props.queriedHugoGeneSymbols||(n="Query: ".concat(Object(_.b)(this.props.queriedHugoGeneSymbols)));var o="";o=this.isGenericAssay?"".concat(this.props.selectedProfile.genericAssayType,"_enrichment"):"".concat(this.props.enrichmentType===s.e.DNA_METHYLATION?"methylation":"expression","_enrichment"),t=r.createElement("div",{className:l.a.BoxPlot,"data-test":"MiniBoxPlot"},r.createElement(f.j,{buttons:["SVG","PNG","Data"],getSvg:function(){return e.svgContainer},getData:this.getData,filename:o,dontFade:!0,style:{position:"absolute",right:10,top:10},type:"button"}),r.createElement(A,{domainPadding:10,startDataAxisAtZero:!0,boxWidth:this.boxPlotData.result.length>7?30:60,axisLabelY:this.axisLabelY,axisLabelX:n,data:this.boxPlotData.result,chartBase:320,scatterPlotTooltip:this.scatterPlotTooltip,horizontal:!1,fill:"#00AAF8",symbol:"circle",useLogSpaceTicks:!0,svgRef:function(t){return e.svgContainer=t},compressXAxis:!0,legendData:[{name:"p-Value: ".concat(Object(y.b)(this.props.selectedRow.pValue,3,.01)),symbol:{fill:"none",strokeWidth:0}},{name:"q-Value: ".concat(Object(y.b)(this.props.selectedRow.qValue,3,.01)),symbol:{fill:"none",strokeWidth:0}}]}))}return r.createElement("div",{style:{position:"relative",display:"inline-block"},className:"borderedChart"},t)}},{key:"logScale",get:function(){return this.props.selectedProfile.molecularProfileId.includes("rna_seq")}},{key:"isGenericAssay",get:function(){return!!this.props.genericAssayType}},{key:"axisLabelY",get:function(){return void 0!==this.props.selectedRow?this.isGenericAssay?"".concat(this.props.selectedRow.stableId,", ").concat(this.props.selectedProfile.name):"".concat(this.props.selectedRow.hugoGeneSymbol,", ").concat(this.props.selectedProfile.name).concat(this.logScale?" (log2)":""):""}},{key:"scatterPlotTooltip",get:function(){var e=this;return function(t){var n=void 0;if(e.props.oqlFilteredCaseAggregatedData){var o=e.props.oqlFilteredCaseAggregatedData?e.props.oqlFilteredCaseAggregatedData[t.uniqueSampleKey]:[];n="Alteration(s): "+Object(s.k)(o)}var i=r.createElement("span",null,"Loading... (this shouldnt appear because the box plot shouldnt be visible)");return e.boxPlotData.isComplete&&(i=e.isGenericAssay?r.createElement("div",null,r.createElement("a",{href:Object(b.x)(t.studyId,t.sampleId),target:"_blank"},r.createElement("b",null,t.sampleId)),r.createElement("br",null),Object(p.n)(e.props.genericAssayType),": ",t.value.toFixed(3)):r.createElement("div",null,r.createElement("a",{href:Object(b.x)(t.studyId,t.sampleId),target:"_blank"},r.createElement("b",null,t.sampleId)),r.createElement("br",null),e.props.enrichmentType,e.logScale?" (log2)":"",":"," ",t.value.toFixed(3),!!n&&r.createElement("br",null),n)),i}}}])&&w(n.prototype,o),a&&w(n,a),t}();Object.defineProperty(I,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{}}),x([i.observable],I.prototype,"svgContainer",void 0),x([u.default],I.prototype,"getData",null),x([i.computed],I.prototype,"logScale",null),x([i.computed],I.prototype,"isGenericAssay",null),x([i.computed],I.prototype,"axisLabelY",null),x([i.computed],I.prototype,"scatterPlotTooltip",null),I=x([o.observer],I),t.a=I},930:function(e,t,n){"use strict";n.d(t,"a",function(){return I});var r=n(0),o=n(9),i=n(2),a=n(332),l=n.n(a),s=n(17),c=n(814),u=n.n(c),p=(n(931),n(827)),d=n(1),f=n(18),h=n(99),m=n(56),y=n(19),b=n(3),g=n(12),v=n(31),_=n(5),w=n.n(_),O=n(840),S=n(851),E=n(7);function k(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var I,M=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},D=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function l(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,l)}s((r=r.apply(e,t||[])).next())})};!function(e){e.TOOLTIP="tooltip",e.CHART="chart"}(I||(I={}));var N=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=T(t).call(this,e),n=!o||"object"!==A(o)&&"function"!=typeof o?x(r):o,Object.defineProperty(x(n),"tooltipModel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(x(n),"scatterFilter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(x(n),"highlightedCurve",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(x(n),"sliderValue",{enumerable:!0,configurable:!0,writable:!0,value:n.getInitialSliderValue()}),Object.defineProperty(x(n),"isTooltipHovered",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(x(n),"tooltipCounter",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(x(n),"svgContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(x(n),"styleOptsDefaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{width:900,height:500,padding:{top:20,bottom:50,left:60,right:20},tooltipXOffset:20,tooltipYOffset:-47,axis:{x:{axisLabel:{padding:35},grid:{opacity:0}},y:{axisLabel:{padding:45,fill:"black"},grid:{opacity:0}}},pValue:{x:610,y:30,textAnchor:"start"},legend:{x:600,y:50}}}),Object.defineProperty(x(n),"events",{enumerable:!0,configurable:!0,writable:!0,value:[{target:"data",eventHandlers:{onMouseOver:function(){return[{target:"data",mutation:function(e){return n.tooltipModel=e,n.tooltipCounter++,{active:!0}}}]},onMouseOut:function(){return[{target:"data",mutation:function(){return D(x(n),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.a)(100);case 2:return this.isTooltipHovered||1!==this.tooltipCounter||(this.tooltipModel=null),this.tooltipCounter--,e.abrupt("return",{active:!1});case 5:case"end":return e.stop()}},e,this)}))}}]}}}]}),Object(i.makeObservable)(x(n)),n.tooltipMouseEnter=n.tooltipMouseEnter.bind(x(n)),n.tooltipMouseLeave=n.tooltipMouseLeave.bind(x(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,r["Component"]),n=t,(o=[{key:"getInitialSliderValue",value:function(){return E.b.serverConfig.survival_initial_x_axis_limit?Math.min(E.b.serverConfig.survival_initial_x_axis_limit,this.maximumDataMonthValue):this.maximumDataMonthValue}},{key:"toSVGDOMNode",value:function(){return Object(v.Jb)(this.svgContainer.firstChild,{legendGroupSelector:".survivalChartDownloadLegend",selectorToHide:".survivalChartLegendHideForDownload"})}},{key:"tooltipMouseEnter",value:function(){this.isTooltipHovered=!0}},{key:"tooltipMouseLeave",value:function(){this.isTooltipHovered=!1,this.tooltipModel=null}},{key:"getSvg",value:function(){return this.toSVGDOMNode()}},{key:"getData",value:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var o,i=this.analysisGroupsWithData[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;e.push({scatterData:Object(h.l)(this.props.sortedGroupedSurvivals[a.value],this.survivalSummaries[a.value].map(function(e){return e.survivalFunctionEstimate}),a.value),title:void 0!==a.name?a.name:a.value})}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return Object(h.i)(e,this.props.title)}},{key:"hoverCircleFillOpacity",value:function(e,t){return t||this.isTooltipHovered&&this.tooltipModel&&this.tooltipModel.datum.studyId===e.studyId&&this.tooltipModel.datum.patientId===e.patientId?.3:0}},{key:"getAxisTickCount",value:function(e){return 5*Math.ceil(e/200)}},{key:"onSliderChange",value:function(e){this.sliderValue=e}},{key:"onSliderTextChange",value:function(e){this.sliderValue=Number.parseFloat(e)}},{key:"render",value:function(){return 0===d.flatten(d.values(this.props.sortedGroupedSurvivals)).length?r.createElement("div",{className:"alert alert-info"},"No data to plot."):r.createElement("div",{style:{position:"relative"}},this.props.legendLocation===I.TOOLTIP?r.createElement(b.i,{mouseLeaveDelay:.2,placement:"rightBottom",overlay:this.chartTooltip},this.chart):this.chart,this.tooltipModel&&r.createElement(s.Popover,C({arrowOffsetTop:56,className:w()("cbioportal-frontend","cbioTooltip",u.a.Tooltip),positionLeft:this.tooltipModel.x+this.styleOpts.tooltipXOffset},{container:this},{positionTop:this.tooltipModel.y+this.styleOpts.tooltipYOffset,onMouseEnter:this.tooltipMouseEnter,onMouseLeave:this.tooltipMouseLeave}),r.createElement("div",null,"Patient ID:"," ",r.createElement("a",{href:Object(y.v)(this.tooltipModel.datum.studyId,this.tooltipModel.datum.patientId),target:"_blank"},this.tooltipModel.datum.patientId),r.createElement("br",null),!!this.props.showCurveInTooltip&&["Curve: ".concat(this.tooltipModel.datum.group),r.createElement("br",null)],this.props.yLabelTooltip,":"," ",this.tooltipModel.datum.y.toFixed(2),"%",r.createElement("br",null),this.tooltipModel.datum.status?this.props.xLabelWithEventTooltip:this.props.xLabelWithoutEventTooltip,": ",this.tooltipModel.datum.x.toFixed(2)," months"," ",this.tooltipModel.datum.status?"":"(censored)",r.createElement("br",null),this.props.analysisClinicalAttribute&&r.createElement("span",null,this.props.analysisClinicalAttribute.displayName,":"," ",this.props.patientToAnalysisGroups[this.tooltipModel.datum.uniquePatientKey]))),this.props.showTable&&r.createElement("table",{className:"table table-striped",style:{marginTop:20,width:"100%"}},r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",null),r.createElement("td",null,this.props.totalCasesHeader),r.createElement("td",null,this.props.statusCasesHeader),r.createElement("td",null,this.props.medianMonthsHeader)),this.tableRows)))}},{key:"styleOpts",get:function(){var e=d.merge({},this.styleOptsDefaultProps,this.props.styleOpts);return e.padding.right=this.props.legendLocation===I.CHART?300:e.padding.right,this.props.styleOpts&&this.props.styleOpts.legend&&void 0!==this.props.styleOpts.legend.x||(e.legend.x=e.width-e.padding.right),e}},{key:"downSamplingDenominators",get:function(){return{x:this.styleOpts.width-this.styleOpts.padding.left-this.styleOpts.padding.right,y:this.styleOpts.height-this.styleOpts.padding.top-this.styleOpts.padding.bottom}}},{key:"survivalSummaries",get:function(){return d.mapValues(this.props.sortedGroupedSurvivals,function(e){return Object(h.q)(e)})}},{key:"unfilteredScatterData",get:function(){var e=this;return d.mapValues(this.props.sortedGroupedSurvivals,function(t,n){var r=e.survivalSummaries[n],o=e.analysisGroupsMap[n].name;return{numOfCases:t.length,line:Object(h.j)(t,r.map(function(e){return e.survivalFunctionEstimate})),scatterWithOpacity:Object(h.m)(t,r.map(function(e){return e.survivalFunctionEstimate}),o),scatter:Object(h.l)(t,r.map(function(e){return e.survivalFunctionEstimate}),o)}})}},{key:"scatterData",get:function(){return Object(h.f)(this.unfilteredScatterData,this.scatterFilter,{xDenominator:this.downSamplingDenominators.x,yDenominator:this.downSamplingDenominators.y,threshold:1e3})}},{key:"analysisGroupsMap",get:function(){return d.keyBy(this.props.analysisGroups,function(e){return e.value})}},{key:"logRankTestPVal",get:function(){var e=this;return this.analysisGroupsWithData.length>1&&d.every(this.analysisGroupsWithData,function(t){return e.props.sortedGroupedSurvivals[t.value].length>10})?S.a.apply(void 0,k(this.analysisGroupsWithData.map(function(t){return e.props.sortedGroupedSurvivals[t.value]}))):null}},{key:"victoryLegendData",get:function(){var e=[];if(this.props.legendLocation===I.CHART){var t=!0,n=!1,r=void 0;try{for(var o,i=this.analysisGroupsWithData[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;e.push({name:a.legendText||a.name||a.value,symbol:{fill:a.color,strokeOpacity:0,type:"square",size:6}})}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}return e}},{key:"pValueText",get:function(){return null!==this.props.pValue&&void 0!==this.props.pValue?r.createElement(f.VictoryLabel,{x:this.styleOpts.pValue.x,y:this.styleOpts.pValue.y,style:b.Y,textAnchor:this.styleOpts.pValue.textAnchor,text:"Logrank Test P-Value: ".concat(Object(m.b)(this.props.pValue,3,.01))}):null}},{key:"legendDataForDownload",get:function(){var e=this.analysisGroupsWithData.map(function(e){return{name:e.name?e.name:e.value,symbol:{fill:e.color,strokeOpacity:0,type:"square",size:6}}});return this.props.naPatientsHiddenInSurvival&&e.push({name:"* Patients with NA for any of the selected attributes are excluded",symbol:{opacity:0}}),e}},{key:"analysisGroupsWithData",get:function(){var e=this,t=this.props.analysisGroups;return t=t.filter(function(t){return t.value in e.scatterData&&e.scatterData[t.value].numOfCases>0})}},{key:"scattersAndLines",get:function(){var e=this,t=this.analysisGroupsWithData,n=(t=d.sortBy(t,function(t){return e.highlightedCurve===t.value?1:0})).map(function(t){return r.createElement(f.VictoryLine,{key:t.value,interpolation:"stepAfter",data:e.scatterData[t.value].line,style:{data:{stroke:t.color,strokeWidth:e.highlightedCurve===t.value?4:1,fill:"#000000",fillOpacity:0}}})}),o=t.map(function(t){return r.createElement(f.VictoryScatter,{key:t.value,data:e.scatterData[t.value].scatterWithOpacity,symbol:"plus",style:{data:{fill:t.color,opacity:function(e){return e.opacity}}},size:3})}),i=t.map(function(t){return r.createElement(f.VictoryScatter,{key:t.value,data:e.scatterData[t.value].scatter,symbol:"circle",style:{data:{fill:t.color,fillOpacity:e.hoverCircleFillOpacity}},size:10,events:e.events})});return n.concat(o).concat(i)}},{key:"legendForDownload",get:function(){var e=d.cloneDeep(b.a);return e.legend.style.data={type:"square",size:5,strokeWidth:0,stroke:"black"},r.createElement(f.VictoryLegend,{x:0,y:this.styleOpts.height+1,style:Object.assign(Object.assign({},e.legend.style),{title:{fontWeight:"bold"}}),title:this.props.title,rowGutter:-10,data:this.legendDataForDownload,groupComponent:r.createElement("g",{className:"survivalChartDownloadLegend"})})}},{key:"xAxisTickCount",get:function(){return this.props.xAxisTickCount||this.getAxisTickCount(this.showLegend?this.styleOpts.legend.x:this.styleOpts.width)}},{key:"showLegend",get:function(){return this.victoryLegendData.length>0}},{key:"maximumDataMonthValue",get:function(){return d.chain(this.props.sortedGroupedSurvivals).map(function(e){return e[e.length-1].months}).max().ceil().value()}},{key:"chart",get:function(){var e=this;return r.createElement("div",{className:this.props.className,"data-test":"SurvivalChart"},this.props.showDownloadButtons&&r.createElement(b.j,{dontFade:!0,filename:this.props.fileName,buttons:["SVG","PNG","PDF","Data"],getSvg:this.getSvg,getData:this.getData,style:{position:"absolute",zIndex:10,right:10},type:"button"}),this.props.showSlider&&r.createElement("div",{className:"small",style:{display:"flex",alignItems:"center",marginLeft:60}},r.createElement("span",null,"X-Axis Max:"),r.createElement("div",{className:"RangeSliderContainer",style:{width:300,marginLeft:10,marginRight:10}},r.createElement(l.a,{min:0,max:this.maximumDataMonthValue,value:this.sliderValue,onChange:this.onSliderChange,tooltip:!1,step:1})),r.createElement(b.l,{className:u.a.XmaxNumberInput,value:this.sliderValue.toString(),setValue:this.onSliderTextChange,numericOnly:!0}),r.createElement("span",null,Object(b.ub)("Month",this.sliderValue)," Survival")),r.createElement(f.VictoryChart,{containerComponent:r.createElement(f.VictoryZoomContainer,{responsive:!1,disable:!0,zoomDomain:this.props.showSlider?{x:[0,this.sliderValue]}:void 0,onZoomDomainChange:d.debounce(function(t){e.scatterFilter=t},1e3),containerRef:function(t){return e.svgContainer=t}}),height:this.styleOpts.height,width:this.styleOpts.width,padding:this.styleOpts.padding,theme:b.a,domainPadding:{x:[10,50],y:[20,20]}},r.createElement(f.VictoryAxis,{style:this.styleOpts.axis.x,crossAxis:!1,tickCount:this.xAxisTickCount,label:this.props.xAxisLabel}),r.createElement(f.VictoryAxis,{label:this.props.yAxisLabel,dependentAxis:!0,tickFormat:function(e){return"".concat(e,"%")},tickCount:this.props.yAxisTickCount,style:this.styleOpts.axis.y,domain:[0,100],crossAxis:!1}),this.scattersAndLines,this.showLegend&&r.createElement(f.VictoryLegend,{x:this.styleOpts.legend.x,y:this.styleOpts.legend.y,data:this.victoryLegendData,labelComponent:this.props.legendLabelComponent||r.createElement(O.a,{dy:"0.3em",maxWidth:256}),groupComponent:r.createElement("g",{className:"survivalChartLegendHideForDownload"})}),this.legendForDownload,this.pValueText))}},{key:"chartTooltip",get:function(){var e=this;return r.createElement("div",{style:{maxWidth:250}},this.analysisGroupsWithData.map(function(t){return r.createElement("span",{key:t.value,style:{display:"inline-block",marginRight:12,fontWeight:e.highlightedCurve===t.value?"bold":"initial",cursor:"pointer"},onClick:function(){e.highlightedCurve=e.highlightedCurve===t.value?"":t.value}},r.createElement("div",{style:{width:10,height:10,display:"inline-block",backgroundColor:t.color,marginRight:5}}),t.name?t.name:t.value)}),this.props.showNaPatientsHiddenToggle&&r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",checked:this.props.naPatientsHiddenInSurvival,onClick:this.props.toggleSurvivalHideNAPatients})," ","Exclude patients with NA for any of the selected attributes.")))}},{key:"tableRows",get:function(){var e=this;return this.props.analysisGroups.map(function(t){return r.createElement("tr",null,r.createElement("td",null,t.name?t.name:t.value),Object(h.n)(e.props.sortedGroupedSurvivals[t.value],e.survivalSummaries[t.value]).map(function(e){return r.createElement("td",null,r.createElement("b",null,e))}))})}}])&&P(n.prototype,o),a&&P(n,a),t}();Object.defineProperty(N,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{showTable:!0,showSlider:!0,legendLocation:I.CHART,showNaPatientsHiddenToggle:!1,showDownloadButtons:!0,yAxisTickCount:11}}),M([i.observable.ref],N.prototype,"tooltipModel",void 0),M([i.observable],N.prototype,"scatterFilter",void 0),M([i.observable],N.prototype,"highlightedCurve",void 0),M([i.observable],N.prototype,"sliderValue",void 0),M([i.computed],N.prototype,"styleOpts",null),M([i.computed],N.prototype,"downSamplingDenominators",null),M([i.computed],N.prototype,"survivalSummaries",null),M([i.computed],N.prototype,"unfilteredScatterData",null),M([i.computed],N.prototype,"scatterData",null),M([i.computed],N.prototype,"analysisGroupsMap",null),M([i.computed],N.prototype,"logRankTestPVal",null),M([i.computed],N.prototype,"victoryLegendData",null),M([i.computed],N.prototype,"legendDataForDownload",null),M([g.default],N.prototype,"getSvg",null),M([g.default],N.prototype,"getData",null),M([g.default],N.prototype,"hoverCircleFillOpacity",null),M([i.computed],N.prototype,"analysisGroupsWithData",null),M([i.computed],N.prototype,"scattersAndLines",null),M([i.computed],N.prototype,"legendForDownload",null),M([i.computed],N.prototype,"xAxisTickCount",null),M([i.computed],N.prototype,"showLegend",null),M([i.computed],N.prototype,"maximumDataMonthValue",null),M([i.action.bound],N.prototype,"onSliderChange",null),M([i.action.bound],N.prototype,"onSliderTextChange",null),M([i.computed],N.prototype,"chart",null),M([i.computed],N.prototype,"chartTooltip",null),M([i.computed],N.prototype,"tableRows",null),N=M([o.observer],N),t.b=N},931:function(e,t,n){},941:function(e,t,n){},943:function(e,t,n){"use strict";n.d(t,"d",function(){return i}),n.d(t,"c",function(){return a}),n.d(t,"a",function(){return l}),n.d(t,"b",function(){return s});var r=n(1),o=n.n(r);function i(e,t){var n=0,r="",o=!0,i=!1,a=void 0;try{for(var l,s=e[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var c=l.value;if(!((n+=c.length)<t))return r+"...";r+=c+" ",n++}}catch(e){i=!0,a=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw a}}return r.trim()}function a(e){return o.a.uniq(e.map(function(e){return e.gene})).map(function(e){return{hugoGeneSymbol:e}})}function l(e){switch(e){case-2:return"DeepDel";case-1:return"SHALLOWDEL";case 0:return"DIPLOID";case 1:return"GAIN";default:return"AMP"}}function s(e,t,n){var r=e?e[t]:void 0;return r&&n&&r.sort(function(e,t){return n[e.sample||""]-n[t.sample||""]||0}),r}},945:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n(220),o=n(0),i=n(2),a=n(9);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":d(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},h=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=c(t).call(this,e))||"object"!==d(o)&&"function"!=typeof o?u(r):o,Object.defineProperty(u(n),"wrapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object(i.makeObservable)(u(n)),n}var n,a,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,o["Component"]),n=t,(a=[{key:"render",value:function(){var e=this;return o.createElement("div",l({className:this.props.className||""},this.props,{ref:function(t){return e.wrapper=t},style:this.style}),this.props.children)}},{key:"offset",get:function(){return this.props.offset||0}},{key:"style",get:function(){return{width:r.a.size.width-this.offset,overflowX:"auto"}}}])&&s(n.prototype,a),f&&s(n,f),t}();f([i.computed],h.prototype,"offset",null),f([i.computed],h.prototype,"style",null),h=f([a.observer],h)},946:function(e,t,n){"use strict";t.__esModule=!0,t.RootCloseWrapper=t.Transition=t.Position=t.Portal=t.Overlay=t.Modal=t.AutoAffix=t.Affix=void 0;var r=p(n(891)),o=p(n(1007)),i=p(n(1010)),a=p(n(1011)),l=p(n(357)),s=p(n(1012)),c=p(n(1013)),u=p(n(1014));function p(e){return e&&e.__esModule?e:{default:e}}t.Affix=r.default,t.AutoAffix=o.default,t.Modal=i.default,t.Overlay=a.default,t.Portal=l.default,t.Position=s.default,t.Transition=c.default,t.RootCloseWrapper=u.default},948:function(e,t,n){},949:function(e,t,n){e.exports=n(35)(365)},950:function(e,t,n){e.exports=n(35)(168)},951:function(e,t,n){e.exports=n(35)(149)},952:function(e,t,n){e.exports=n(35)(327)},953:function(e,t,n){e.exports=n(35)(749)},954:function(e,t,n){e.exports=n(35)(167)},955:function(e,t,n){e.exports=n(35)(748)},956:function(e,t,n){e.exports=n(35)(358)},957:function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(848),a=n(12),l=n(3);n(88);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f,h=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":d(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};!function(e){e.distinguishDrivers="0",e.annotateOncoKb="1",e.annotateHotspots="2",e.annotateCBioPortal="3",e.annotateCOSMIC="4",e.customDriverBinaryAnnotation="5"}(f||(f={}));var m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,u(t).apply(this,arguments))}var o,a,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,r["Component"]),o=t,(a=[{key:"onInputClick",value:function(e){switch(e.target.value){case f.distinguishDrivers:this.props.handlers.onSelectDistinguishDrivers(!this.props.state.distinguishDrivers);break;case f.annotateOncoKb:this.props.handlers.onSelectAnnotateOncoKb(!this.props.state.annotateDriversOncoKb);break;case f.annotateHotspots:this.props.handlers.onSelectAnnotateHotspots&&this.props.handlers.onSelectAnnotateHotspots(!this.props.state.annotateDriversHotspots);break;case f.annotateCBioPortal:this.props.handlers.onSelectAnnotateCBioPortal(!this.props.state.annotateDriversCBioPortal);break;case f.annotateCOSMIC:this.props.handlers.onSelectAnnotateCOSMIC&&this.props.handlers.onSelectAnnotateCOSMIC(!this.props.state.annotateDriversCOSMIC);break;case f.customDriverBinaryAnnotation:this.props.handlers.onSelectCustomDriverAnnotationBinary&&this.props.handlers.onSelectCustomDriverAnnotationBinary(!this.props.state.annotateCustomDriverBinary)}}},{key:"onCustomDriverTierCheckboxClick",value:function(e){this.props.handlers.onSelectCustomDriverAnnotationTier&&this.props.handlers.onSelectCustomDriverAnnotationTier(e.target.value,!(this.props.state.selectedCustomDriverAnnotationTiers&&this.props.state.selectedCustomDriverAnnotationTiers.get(e.target.value)))}},{key:"render",value:function(){var e=this;return r.createElement("div",null,r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{"data-test":"ColorByDriver",type:"checkbox",value:f.distinguishDrivers,checked:this.props.state.distinguishDrivers,onClick:this.onInputClick}),"Putative drivers vs VUS:")),r.createElement("div",{style:{marginLeft:"20px"}},this.props.resultsView&&r.createElement("span",null,!this.props.state.annotateDriversOncoKbDisabled&&r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:f.annotateOncoKb,checked:this.props.state.annotateDriversOncoKb,onClick:this.onInputClick,"data-test":"annotateOncoKb",disabled:this.props.state.annotateDriversOncoKbError}),this.props.state.annotateDriversOncoKbError&&r.createElement(i.a,{style:{marginRight:4},tooltip:r.createElement("span",null,"Error loading OncoKb data. Please refresh the page or try again later.")}),r.createElement(l.i,{overlay:r.createElement("span",null,"Oncogenicity from OncoKB"),placement:"top"},r.createElement("img",{src:n(1046),style:{maxHeight:"12px",cursor:"pointer",marginRight:"5px"}})),"driver annotation")),this.props.handlers.onSelectAnnotateHotspots&&!this.props.state.annotateDriversHotspotsDisabled&&r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:f.annotateHotspots,checked:this.props.state.annotateDriversHotspots,onClick:this.onInputClick,"data-test":"annotateHotspots",disabled:this.props.state.annotateDriversHotspotsError}),this.props.state.annotateDriversHotspotsError&&r.createElement(i.a,{style:{marginRight:4},tooltip:r.createElement("span",null,"Error loading Hotspots data. Please refresh the page or try again later.")}),"Hotspots",r.createElement(l.i,{overlay:r.createElement("div",{style:{maxWidth:"400px"}},"Identified as a recurrent hotspot (statistically significant) in a population-scale cohort of tumor samples of various cancer types using methodology based in part on"," ",r.createElement("a",{href:Object(l.hb)("/pubmed/26619011"),target:"_blank"},"Chang et al., Nat Biotechnol, 2016."),"Explore all mutations at"," ",r.createElement("a",{href:"https://www.cancerhotspots.org",target:"_blank"},"https://cancerhotspots.org")),placement:"top"},r.createElement("img",{src:n(271),style:{height:"15px",width:"15px",cursor:"pointer",marginLeft:"5px"}})))),this.props.handlers.onChangeAnnotateCBioPortalInputValue&&r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:f.annotateCBioPortal,checked:this.props.state.annotateDriversCBioPortal,onClick:this.onInputClick,"data-test":"annotateCBioPortalCount"}),"cBioPortal ",">","="),r.createElement(l.l,{value:this.props.state.annotateCBioPortalInputValue||"",setValue:this.props.handlers.onChangeAnnotateCBioPortalInputValue,numericOnly:!0,textFieldAppearance:!0,maxChars:10})),this.props.handlers.onChangeAnnotateCOSMICInputValue&&r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:f.annotateCOSMIC,checked:this.props.state.annotateDriversCOSMIC,onClick:this.onInputClick,"data-test":"annotateCOSMICCount"}),"COSMIC ",">","="),r.createElement(l.l,{value:this.props.state.annotateCOSMICInputValue||"",setValue:this.props.handlers.onChangeAnnotateCOSMICInputValue,numericOnly:!0,textFieldAppearance:!0,maxChars:10}))),!!this.props.state.customDriverAnnotationBinaryMenuLabel&&r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",checked:this.props.state.annotateCustomDriverBinary,value:f.customDriverBinaryAnnotation,onClick:this.onInputClick,"data-test":"annotateCustomBinary"})," ",this.props.state.customDriverAnnotationBinaryMenuLabel,r.createElement("img",{src:n(887),alt:"driver filter",style:{height:"15px",width:"15px",cursor:"pointer",marginLeft:"5px"}}))),!!this.props.state.customDriverAnnotationTiersMenuLabel&&r.createElement("span",{"data-test":"annotateCustomTiers"},r.createElement("span",{className:"caret"}),"  ",r.createElement("span",null,this.props.state.customDriverAnnotationTiersMenuLabel)," ",r.createElement("img",{src:n(888),alt:"driver tiers filter",style:{height:"15px",width:"15px",cursor:"pointer",marginLeft:"5px"}}),r.createElement("div",{style:{marginLeft:"30px"}},(this.props.state.customDriverAnnotationTiers||[]).map(function(t){return r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:t,checked:!(!e.props.state.selectedCustomDriverAnnotationTiers||!e.props.state.selectedCustomDriverAnnotationTiers.get(t)),onClick:e.onCustomDriverTierCheckboxClick})," ",t))})))))}}])&&s(o.prototype,a),d&&s(o,d),t}();h([a.default],m.prototype,"onInputClick",null),h([a.default],m.prototype,"onCustomDriverTierCheckboxClick",null),m=h([o.observer],m),t.a=m},958:function(e,t,n){"use strict";n.d(t,"l",function(){return _}),n.d(t,"j",function(){return w}),n.d(t,"i",function(){return O}),n.d(t,"d",function(){return S}),n.d(t,"c",function(){return E}),n.d(t,"b",function(){return k}),n.d(t,"k",function(){return P}),n.d(t,"h",function(){return x}),n.d(t,"e",function(){return j}),n.d(t,"f",function(){return A}),n.d(t,"g",function(){return I}),n.d(t,"a",function(){return M}),n.d(t,"m",function(){return D});var r=n(2),o=n(7),i=n(1),a=n.n(i),l=n(336),s=n(10),c=n(64),u=n(58),p=n(6),d=n(21),f=n(77),h=n(249),m=n(244),y=n(14),b=n(42),g=n(83),v=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function l(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,l)}s((r=r.apply(e,t||[])).next())})};function _(e){return e.hasOwnProperty("alteration")}function w(e){var t,n,i;return e.existCustomDrivers?(t=!1,n=!1,i=!0):(t=!0,n=!1,i=!1),Object(r.observable)({cbioportalCountThreshold:0,_oncoKb:t,_cbioportalCount:n,_customBinary:i,_includeVUS:!0,hotspots:!1,get customBinary(){return this._customBinary},set customBinary(t){this._customBinary=t,e.customDriverWarningHidden=!0},get cbioportalCount(){return this._cbioportalCount},set cbioportalCount(t){this._cbioportalCount=t,e.customDriverWarningHidden=!0},set oncoKb(t){this._oncoKb=t,e.customDriverWarningHidden=!0},get oncoKb(){return!(!o.b.serverConfig.show_oncokb||!this._oncoKb||e.didOncoKbFail)},set includeVUS(e){this._includeVUS=e},get includeVUS(){return this._includeVUS||!this.driversAnnotated},get driversAnnotated(){return this.oncoKb||this.cbioportalCount||this.hotspots||e.existCustomDrivers&&this.customBinary}})}function O(e){return a.a.chain(e).map(function(e){return e.sampleId}).uniq().value()}function S(e){return a.a.chain(e).filter(function(e){return _(e)}).map(function(e){return e.hugoGeneSymbol}).uniq().value()}function E(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f.a;return v(this,void 0,void 0,regeneratorRuntime.mark(function r(){var o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(e instanceof Error)){r.next=2;break}return r.abrupt("return",new Error);case 2:if(0!==(o=a.a.chain(t).filter(function(t){return!!e[t.entrezGeneId]}).filter(function(e){return void 0!==e.proteinPosStart&&void 0!==e.proteinPosEnd}).value()).length){r.next=5;break}return r.abrupt("return",d.c);case 5:return r.abrupt("return",Object(d.yb)(o.map(function(e){return{entrezGeneId:e.entrezGeneId,alteration:e.proteinChange,proteinPosStart:e.proteinPosStart,proteinPosEnd:e.proteinPosEnd,mutationType:e.mutationType,tumorType:null}}),n,[p.d.ONCOGENIC]));case 6:case"end":return r.stop()}},r)}))}function k(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f.a;return v(this,void 0,void 0,regeneratorRuntime.mark(function r(){var o,i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(e instanceof Error)){r.next=2;break}return r.abrupt("return",new Error);case 2:if(0!==(o=a.a.chain(t).filter(function(t){return!!e[t.entrezGeneId]}).filter(function(e){return e.molecularProfileAlterationType===s.a.COPY_NUMBER_ALTERATION}).value()).length){r.next=5;break}return r.abrupt("return",d.c);case 5:return i=a.a.chain(o).map(function(e){return Object(p.I)(e.entrezGeneId,null,Object(m.a)(e.value),[p.d.ONCOGENIC])}).uniqBy("id").value(),r.abrupt("return",Object(d.xb)(i,n));case 7:case"end":return r.stop()}},r)}))}function C(e,t){var n={driverTiersFilter:"",driverTiersFilterAnnotation:"",oncoKbOncogenic:"",isHotspot:!1,putativeDriver:!1,hugoGeneSymbol:e.hugoGeneSymbol,proteinChange:e.proteinChange,mutationStatus:e.isGermline?g.c:"",driverFilter:e.isCustomDriver?d.e:"",driverFilterAnnotation:e.isCustomDriver?"You indicated that this mutation is a driver.":"",molecularProfileAlterationType:void 0,alterationSubType:"",value:void 0,mutationType:"",entrezGeneId:0,proteinPosStart:void 0,proteinPosEnd:void 0},r=t[e.hugoGeneSymbol];if(r&&(n.entrezGeneId=r.entrezGeneId),n.proteinChange){var o=Object(p.Y)(n.proteinChange);o&&(n.proteinPosStart=o.start,n.proteinPosEnd=o.end)}switch(e.alteration){case u.a.MISSENSE:n=Object.assign(n,{molecularProfileAlterationType:s.a.MUTATION_EXTENDED,alterationSubType:"missense",mutationType:"missense_mutation"});break;case u.a.INFRAME:n=Object.assign(n,{molecularProfileAlterationType:s.a.MUTATION_EXTENDED,alterationSubType:"inframe",mutationType:"indel"});break;case u.a.STRUCTURAL_VARIANT:n=Object.assign(n,{molecularProfileAlterationType:s.a.STRUCTURAL_VARIANT,mutationType:"structuralVariant"});break;case u.a.PROMOTER:n=Object.assign(n,{molecularProfileAlterationType:s.a.MUTATION_EXTENDED,proteinChange:"promoter"});break;case u.a.SPLICE:n=Object.assign(n,{molecularProfileAlterationType:s.a.MUTATION_EXTENDED,alterationSubType:"splice",mutationType:"splice"});break;case u.a.TRUNC:n=Object.assign(n,{molecularProfileAlterationType:s.a.MUTATION_EXTENDED,alterationSubType:"nonsense",mutationType:"nonsense"});break;case u.a.OTHER:n=Object.assign(n,{molecularProfileAlterationType:s.a.MUTATION_EXTENDED,alterationSubType:"other"});break;case"amp":n=Object.assign(n,{molecularProfileAlterationType:s.a.COPY_NUMBER_ALTERATION,alterationSubType:c.a[2],value:2});break;case"homdel":n=Object.assign(n,{molecularProfileAlterationType:s.a.COPY_NUMBER_ALTERATION,alterationSubType:c.a[-2],value:-2});break;case"gain":n=Object.assign(n,{molecularProfileAlterationType:s.a.COPY_NUMBER_ALTERATION,alterationSubType:c.a[1],value:1});break;case"hetloss":n=Object.assign(n,{molecularProfileAlterationType:s.a.COPY_NUMBER_ALTERATION,alterationSubType:c.a[-1],value:-1});break;case"mrnaHigh":n=Object.assign(n,{molecularProfileAlterationType:s.a.MRNA_EXPRESSION,alterationSubType:"high"});break;case"mrnaLow":n=Object.assign(n,{molecularProfileAlterationType:s.a.MRNA_EXPRESSION,alterationSubType:"low"});break;case"protHigh":n=Object.assign(n,{molecularProfileAlterationType:s.a.PROTEIN_LEVEL,alterationSubType:"high"});break;case"protLow":n=Object.assign(n,{molecularProfileAlterationType:s.a.PROTEIN_LEVEL,alterationSubType:"low"})}return n}function P(e){return e.disp_mut||e.disp_cna||e.disp_mrna||e.disp_prot||e.disp_structuralVariant}function T(e){var t=a.a.chain(e).filter(P).size().value();return Object(l.o)(t,e.length)}function x(e,t,n){var r={},o=e.filter(function(e){return _(e)}),i=!0,l=!1,s=void 0;try{for(var c,u=o[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var p=c.value,d=p.trackName||p.hugoGeneSymbol;d in r||(r[d]={});var f=r[d];p.sampleId in f||(f[p.sampleId]=[]);var h=C(p,t);n&&y.c.test(h.mutationStatus)||f[p.sampleId].push(h)}}catch(e){l=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(l)throw s}}var m=!0,b=!1,g=void 0;try{for(var v,w=function(){var e=v.value;a.a.forEach(r,function(t,n){e.sampleId in t||(t[e.sampleId]=[])})},O=e[Symbol.iterator]();!(m=(v=O.next()).done);m=!0)w()}catch(e){b=!0,g=e}finally{try{m||null==O.return||O.return()}finally{if(b)throw g}}return a.a.mapValues(r,function(e){return a.a.chain(e).map(function(e,t){return{sampleId:t,data:e}}).value()})}function j(e){return a.a.mapValues(e,function(e,t){return e.map(function(e){return Object(u.b)({sample:e.sampleId,patient:e.sampleId,study_id:"",uid:e.sampleId},t,e.data)})})}function A(e){return"geneticTrack_".concat(e)}function I(e,t,n){var r=a.a.keyBy(n||[]);e=a.a.mapValues(e,function(e){return e.filter(function(e){return!(e.sample in r)})});var o=a.a.mapValues(e,T);return(t?t.filter(function(t){return t in e}):Object.keys(e)).map(function(t){return{key:A(t),label:t,info:o[t],data:e[t]}})}function M(e,t,n,r){var o=function(e){return""};if(t.oncoKbCna.isComplete&&!(t.oncoKbCna.result instanceof Error)){var i=t.oncoKbCna.result.indicatorMap;o=function(e){var t=Object(p.N)(e.entrezGeneId,null,Object(m.a)(e.value)),n=i[t];return n?Object(d.cb)(n):""}}var l=function(e){return""};if(t.oncoKb&&t.oncoKb.isComplete&&!(t.oncoKb.result instanceof Error)){var c=t.oncoKb.result.indicatorMap;l=function(e){var t=Object(p.N)(e.entrezGeneId,null,e.proteinChange,e.mutationType),n=c[t];return n?Object(d.cb)(n):""}}var u=function(e){return!1};if(t.cbioportalCount&&t.cbioportalCount.isComplete){var f=t.cbioportalCount.result,y=n.cbioportalCountThreshold;u=function(e){if(e.molecularProfileAlterationType===s.a.MUTATION_EXTENDED){var t=Object(h.b)(e),n=f[t];return y<=n}return!1}}return a.a.mapValues(e,function(e,t){return e.map(function(e){var t=a.a.clone(e);return t.data=t.data.filter(function(e){switch(delete e.oncoKbOncogenic,delete e.putativeDriver,e.molecularProfileAlterationType){case s.a.COPY_NUMBER_ALTERATION:e.oncoKbOncogenic=o(e);break;case s.a.MUTATION_EXTENDED:e.oncoKbOncogenic=l(e)}return e.molecularProfileAlterationType===s.a.MUTATION_EXTENDED?(e.putativeDriver=!!(e.oncoKbOncogenic||n.useHotspots&&e.isHotspot||u(e)||n.useCustomBinary&&e.driverFilter===d.e),!r||e.putativeDriver):e.molecularProfileAlterationType!==s.a.STRUCTURAL_VARIANT||!r}),t},[])})}function D(e){var t=e.trim().split("\n").map(function(e){return e.trim().split(/\s+/)});try{return{parseSuccess:!0,result:t.map(function(e,n){if(0===n&&a.a.isEqual(t[0].map(function(e){return e.toLowerCase()}).slice(0,4),["sample","gene","alteration","type"]))return null;var r="Genetic data input error on line ".concat(n+1,": \n").concat(e.join("\t"),"\n\n");if(1===e.length)return{sampleId:e[0]};if(4===e.length||5===e.length){var o=e[0],i=e[1],l=e[2],s=l.toLowerCase(),c=e[3],u=c.toLowerCase(),p={sampleId:o,hugoGeneSymbol:i,trackName:5===e.length?e[4]:void 0};switch(u){case"cna":if(-1===["amp","gain","hetloss","homdel"].indexOf(s))throw new Error("".concat(r,'Alteration "').concat(l,'" is not valid - it must be "AMP", "GAIN" ,"HETLOSS", or "HOMDEL" since Type is "CNA"'));p.alteration=s;break;case"exp":if("high"===s)p.alteration="mrnaHigh";else{if("low"!==s)throw new Error("".concat(r,'Alteration "').concat(l,'" is not valid - it must be "HIGH" or "LOW" if Type is "EXP"'));p.alteration="mrnaLow"}break;case"prot":if("high"===s)p.alteration="protHigh";else{if("low"!==s)throw new Error("".concat(r,'Alteration "').concat(l,'" is not valid - it must be "HIGH" or "LOW" if Type is "PROT"'));p.alteration="protLow"}break;case"fusion":if("fusion"!==u)throw new Error("".concat(r,'Type "').concat(c,'" is not valid - it must be "FUSION" if Alteration is "FUSION"'));p.alteration="structuralVariant",p.proteinChange=l;break;default:var d;try{d=Object(b.g)("GENE: ".concat(u))[0].alterations[0]}catch(e){throw new Error("".concat(r,"Mutation type ").concat(c," is not valid."))}var f=!0,h=!1,m=void 0;try{for(var y,g=d.modifiers[Symbol.iterator]();!(f=(y=g.next()).done);f=!0){switch(y.value.type){case"GERMLINE":p.isGermline=!0;break;case"DRIVER":p.isCustomDriver=!0;break;default:throw new Error("".concat(r,"Only allowed mutation modifiers are GERMLINE and DRIVER"))}}}catch(e){h=!0,m=e}finally{try{f||null==g.return||g.return()}finally{if(h)throw m}}var v=d.constr_val.toLowerCase();if(-1===["missense","inframe","promoter","trunc","splice","other"].indexOf(v))throw new Error("".concat(r,'Type "').concat(c,'" is not valid - it must be "MISSENSE", "INFRAME", "TRUNC", "SPLICE", "PROMOTER", or "OTHER" for a mutation alteration.'));p.alteration=v,p.proteinChange=l}return p}throw new Error("".concat(r,"input lines must have either 1 or 4 columns."))}).filter(function(e){return!!e}),error:void 0}}catch(e){return{parseSuccess:!1,result:void 0,error:e.message}}}},959:function(e,t,n){"use strict";var r=n(0),o=n(9);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,l(t).apply(this,arguments))}var n,o,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement("span",null,"Queries are limited by gene and sample count. The product of the query's gene and sample count must be less than"," ",this.props.queryProductLimit.toLocaleString(),". You have selected ",this.props.sampleCount.toLocaleString()," samples, so you can have no more than"," ",Math.floor(this.props.queryProductLimit/this.props.sampleCount).toLocaleString()," ","genes in your query. Please"," ",r.createElement("a",{style:{color:"#ccc"},href:"mailto:".concat(this.props.email)},"let us know")," ","your use case(s) if you need to query more than that.")}}])&&i(n.prototype,o),c&&i(n,c),t}();p=u([o.observer],p),t.a=p},960:function(e,t,n){"use strict";n.d(t,"c",function(){return s}),n.d(t,"b",function(){return c}),n.d(t,"a",function(){return u}),n.d(t,"d",function(){return p});var r=n(45),o=n(0),i=n(1),a=n.n(i),l=n(19);function s(e,t){return e.length!==t.length?o.createElement("span",null,o.createElement("strong",null,t.length)," patients /"," ",o.createElement("strong",null,e.length)," samples"):o.createElement("span",null,o.createElement("strong",null,e.length)," patients/samples")}function c(e){switch(e.length){case 0:return"";case 1:return e[0];case 2:return e.join(" & ");default:return"".concat(e[0],", ").concat(e[1]," & ").concat(3===e.length?e[2]:"".concat(e.length-2," other genes"))}}function u(e,t,n,i,a){var l="Queried gene".concat(1!==a?"s are":" is"," altered in"),s="".concat(n," (").concat(Object(r.d)(n/e),") of queried");return e!==t?o.createElement("strong",{style:{display:"flex"}},o.createElement("span",{style:{marginRight:13}},l),o.createElement("table",null,o.createElement("tr",null,o.createElement("td",null,"• ","".concat(i," (").concat(Object(r.d)(i/t),") of queried patients"))),o.createElement("tr",null,o.createElement("td",null,"• ","".concat(s," samples"))))):o.createElement("strong",null,o.createElement("span",null,"".concat(l," ").concat(s," patients/samples")))}function p(e,t,n,r,o){var i=a.a.some(o,function(e){return"all_cases_in_study"===e.category}),s=[],c=r||n||!i;t.length>0&&c&&t.forEach(function(e){return s.push({sampleId:e.sampleId,studyId:e.studyId})});var u=window.open(Object(l.b)("study",{id:e.map(function(e){return e.studyId}).join(",")}),"_blank");s.length>0&&(u.studyPageFilter="filterJson=".concat(JSON.stringify({sampleIdentifiers:s})))}},961:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(270),o=n(51),i=n(178),a=n(50);function l(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],l=window,s=new r.c(e);return s.singlePageAppSubmitRoutine=function(r){(r.cancer_study_list=r.cancer_study_list||r.cancer_study_id,delete r.cancer_study_id,e)&&((e.cancer_study_id!==r.cancer_study_id||e.cancer_study_list!==r.cancer_study_list||Object(a.a)(e.case_ids,"")!==Object(a.a)(r.case_ids,"")||e.case_set_id!==r.case_set_id)&&(r.comparison_createdGroupsSessionId=void 0,r.plots_horz_selection=void 0,r.plots_vert_selection=void 0,r.plots_coloring_selection=void 0));var c=s.physicalStudyIdsInSelection.length>1&&1===s.geneIds.length?o.d.CANCER_TYPES_SUMMARY:o.d.ONCOPRINT,u=t||new i.b(l.routingStore);u.updateURL(r,"results/".concat(c),n,!1),void 0===t&&u.destroy()},s}},985:function(e,t,n){"use strict";var r=n(0),o=n.n(r),i=n(801),a=n.n(i),l=n(9),s=n(1049),c=n(817),u=n(1),p=n(810),d=n.n(p),f=n(270),h=n(3),m=n(819),y=n(7),b=n(55);function g(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var E=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":S(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},k=function(e){function t(){var e,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=_(t).apply(this,arguments),e=!o||"object"!==S(o)&&"function"!=typeof o?w(n):o,Object.defineProperty(w(e),"ProfileToggle",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n=t.profile,o=t.type,i=t.label,l=t.checked,s=t.isGroupToggle;return r.createElement("label",null,r.createElement("input",{type:o,checked:l,onChange:function(t){return e.store.selectMolecularProfile(n,t.target.checked)},"data-test":n.molecularAlterationType}),r.createElement("span",{className:s?a.a.groupName:a.a.profileName},i),!s&&r.createElement(h.i,{mouseEnterDelay:0,placement:"right",overlay:r.createElement("div",{className:a.a.tooltip},n.description)},r.createElement(d.a,{className:a.a.infoIcon,name:"question-circle"})))}}),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,f["d"]),n=t,(o=[{key:"render",value:function(){return 1!==this.store.selectableSelectedStudyIds.length?null:r.createElement(c.b,{padded:!0,className:a.a.MolecularProfileSelector},r.createElement(m.a,{className:"sectionLabel",promises:[this.store.molecularProfilesInSelectedStudies]},"Select Genomic Profiles:"),r.createElement("div",{className:a.a.group,"data-test":"molecularProfileSelector"},this.renderGroup("MUTATION_EXTENDED","Mutation"),this.renderGroup("STRUCTURAL_VARIANT","Structural Variant"),this.renderGroup("COPY_NUMBER_ALTERATION","Copy Number"),this.showGSVA&&this.renderGroup("GENESET_SCORE","GSVA scores"),this.renderGroup("MRNA_EXPRESSION","mRNA Expression"),this.renderGroup("METHYLATION","DNA Methylation"),this.renderGroup("METHYLATION_BINARY","DNA Methylation"),this.renderGroup("PROTEIN_LEVEL","Protein/phosphoprotein level"),!(!this.store.molecularProfilesInSelectedStudies.isComplete||this.store.molecularProfilesInSelectedStudies.result.length)&&r.createElement("strong",null,"No Genomic Profiles available for this Cancer Study")))}},{key:"renderGroup",value:function(e,t){var n=this,o=this.store.getFilteredProfiles(e);if(!o.length)return null;var i=u.some(o,function(e){return n.store.isProfileTypeSelected(Object(b.a)(e))}),l=[];o.length>1&&!this.store.forDownloadTab&&l.push(r.createElement(this.ProfileToggle,{key:"altTypeCheckbox:"+e,profile:o[0],type:"checkbox",label:"".concat(t,". Select one of the profiles below:"),checked:i,isGroupToggle:!0}));var s=o.map(function(e){return r.createElement(n.ProfileToggle,{key:"profile:"+e.molecularProfileId,profile:e,type:n.store.forDownloadTab||o.length>1?"radio":"checkbox",label:"STRUCTURAL_VARIANT"===e.molecularAlterationType?t:e.name,checked:n.store.isProfileTypeSelected(Object(b.a)(e)),isGroupToggle:!1})});return this.store.forDownloadTab||1==o.length?l.push.apply(l,g(s)):l.push(r.createElement("div",{key:"group:"+e,className:a.a.group},s)),this.store.forDownloadTab?l:(i&&"MRNA_EXPRESSION"==e&&l.push(r.createElement("div",{key:l.length,className:a.a.zScore},"Enter a z-score threshold"," ",r.createElement("span",{dangerouslySetInnerHTML:{__html:["&","plusmn;"].join("")}}),r.createElement("input",{type:"text",value:this.store.zScoreThreshold,onChange:function(e){n.store.zScoreThreshold=e.target.value}}))),i&&"PROTEIN_LEVEL"==e&&l.push(r.createElement("div",{key:l.length,className:a.a.zScore},"Enter a z-score threshold"," ",r.createElement("span",{dangerouslySetInnerHTML:{__html:["&","plusmn;"].join("")}}),r.createElement("input",{type:"text",value:this.store.rppaScoreThreshold,onChange:function(e){n.store.rppaScoreThreshold=e.target.value}}))),l)}},{key:"showGSVA",get:function(){return y.b.serverConfig.skin_show_gsva}}])&&v(n.prototype,o),i&&v(n,i),t}(),C=k=E([l.observer],k),P=n(72),T=n(118),x=n(97);function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var N=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":D(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},R=function(e){function t(){var e,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=A(t).apply(this,arguments),e=!o||"object"!==D(o)&&"function"!=typeof o?I(n):o,Object.defineProperty(I(e),"molecularProfileCategorySet",{enumerable:!0,configurable:!0,writable:!0,value:Object(h.vb)({await:function(){return[e.store.validProfileIdSetForSelectedStudies]},invoke:function(){return Promise.resolve(Object(x.f)(e.store.validProfileIdSetForSelectedStudies.result))},default:[]})}),Object.defineProperty(I(e),"flexRowContent",{enumerable:!0,configurable:!0,writable:!0,value:Object(T.a)({await:function(){return[e.molecularProfileCategorySet]},render:function(){return r.createElement("div",{style:{display:"flex"}},e.molecularProfileCategorySet.result.map(function(t){return r.createElement(G,{label:t.label,id:t.id,profileTypes:t.profileTypes,store:e.store})}))},renderPending:function(){return r.createElement(P.a,{isLoading:!0})},renderError:function(){return r.createElement("span",{key:"error"},"Error loading profiles for selected studies.")}})}),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(t,f["d"]),n=t,(o=[{key:"render",value:function(){return this.store.isVirtualStudyQuery?r.createElement(c.b,{padded:!0,className:a.a.DataTypePrioritySelector,"data-test":"dataTypePrioritySelector"},r.createElement(m.a,{className:"sectionLabel"},"Select Molecular Profiles:"),r.createElement(c.b,null,this.flexRowContent.component)):null}}])&&j(n.prototype,o),i&&j(n,i),t}(),L=R=N([l.observer],R),G=Object(l.observer)(function(e){var t=!0;return e.profileTypes.forEach(function(n){t=t&&e.store.isProfileTypeSelected(n)}),r.createElement("label",{className:a.a.DataTypePriorityLabel},r.createElement("input",{type:"checkbox",checked:t,onChange:function(t){e.store.setProfileTypes(e.profileTypes,t.currentTarget.checked)},"data-test":e.id}),e.label)}),V=n(17),B=n(2),F=[{id:"Prostate Cancer: AR Signaling",genes:["SOX9","RAN","TNK2","EP300","PXN","NCOA2","AR","NRIP1","NCOR1","NCOR2"]},{id:"Prostate Cancer: AR and steroid synthesis enzymes",genes:["AKR1C3","AR","CYB5A","CYP11A1","CYP11B1","CYP11B2","CYP17A1","CYP19A1","CYP21A2","HSD17B1","HSD17B10","HSD17B11","HSD17B12","HSD17B13","HSD17B14","HSD17B2","HSD17B3","HSD17B4","HSD17B6","HSD17B7","HSD17B8","HSD3B1","HSD3B2","HSD3B7","RDH5","SHBG","SRD5A1","SRD5A2","SRD5A3","STAR"]},{id:"Prostate Cancer: Steroid inactivating genes",genes:["AKR1C1","AKR1C2","AKR1C4","CYP3A4","CYP3A43","CYP3A5","CYP3A7","UGT2B15","UGT2B17","UGT2B7"]},{id:"Prostate Cancer: Down-regulated by androgen",genes:["BCHE","CDK8","CTBP1","ACKR3","DDC","DPH1","FN1","HES6","MMP16","MYC","PEG3","PIK3R3","PRKD1","SCNN1A","SDC4","SERPINI1","SLC29A1","ST7","TULP4"]},{id:"Glioblastoma: TP53 Pathway",genes:["CDKN2A","MDM2","MDM4","TP53"]},{id:"Glioblastoma: RTK/Ras/PI3K/AKT Signaling",genes:["EGFR","ERBB2","PDGFRA","MET","KRAS","NRAS","HRAS","NF1","SPRY2","FOXO1","FOXO3","AKT1","AKT2","AKT3","PIK3R1","PIK3CA","PTEN"]},{id:"Glioblastoma: RB Pathway",genes:["CDKN2A","CDKN2B","CDKN2C","CDK4","CDK6","CCND2","RB1"]},{id:"Ovarian Cancer: Oncogenes associated with epithelial ovarian cancer",genes:["RAB25","MECOM","EIF5A2","PRKCI","PIK3CA","KIT","FGF1","MYC","EGFR","NOTCH3","KRAS","AKT1","ERBB2","PIK3R1","CCNE1","AKT2","AURKA"]},{id:"Ovarian Cancer: Putative tumor-suppressor genes in epithelial ovarian cancer",genes:["DIRAS3","RASSF1","DLEC1","SPARC","DAB2","PLAGL1","RPS6KA2","PTEN","OPCML","BRCA2","ARL11","WWOX","TP53","DPH1","BRCA1","PEG3"]},{id:"General: Cell Cycle Control",genes:["RB1","RBL1","RBL2","CCNA1","CCNB1","CDK1","CCNE1","CDK2","CDC25A","CCND1","CDK4","CDK6","CCND2","CDKN2A","CDKN2B","MYC","CDKN1A","CDKN1B","E2F1","E2F2","E2F3","E2F4","E2F5","E2F6","E2F7","E2F8","SRC","JAK1","JAK2","STAT1","STAT2","STAT3","STAT5A","STAT5B"]},{id:"General: p53 signaling",genes:["TP53","MDM2","MDM4","CDKN2A","CDKN2B","TP53BP1"]},{id:"General: Notch signaling",genes:["ADAM10","ADAM17","APH1A","APH1B","ARRDC1","CIR1","CTBP1","CTBP2","CUL1","DLL1","DLL3","DLL4","DTX1","DTX2","DTX3","DTX3L","DTX4","EP300","FBXW7","HDAC1","HDAC2","HES1","HES5","HEYL","ITCH","JAG1","JAG2","KDM5A","LFNG","MAML1","MAML2","MAML3","MFNG","NCOR2","NCSTN","NOTCH1","NOTCH2","NOTCH3","NOTCH4","NRARP","NUMB","NUMBL","PSEN1","PSEN2","PSENEN","RBPJ","RBPJL","RFNG","SNW1","SPEN","HES2","HES4","HES7","HEY1","HEY2"]},{id:"General: DNA Damage Response",genes:["CHEK1","CHEK2","RAD51","BRCA1","BRCA2","MLH1","MSH2","ATM","ATR","MDC1","PARP1","FANCF"]},{id:"General: Other growth / proliferation signaling",genes:["CSF1","CSF1R","IGF1","IGF1R","FGF1","FGFR1","AURKA","DLEC1","PLAGL1","OPCML","DPH1"]},{id:"General: Survival / cell death regulation signaling",genes:["NFKB1","NFKB2","CHUK","DIRAS3","FAS","HLA-G","BAD","BCL2","BCL2L1","APAF1","CASP9","CASP8","CASP10","CASP3","CASP6","CASP7","GSK3B","ARL11","WWOX","PEG3","TGFB1","TGFBR1","TGFBR2"]},{id:"General: Telomere maintenance",genes:["TERC","TERT"]},{id:"General: RTK signaling family",genes:["EGFR","ERBB2","ERBB3","ERBB4","PDGFA","PDGFB","PDGFRA","PDGFRB","KIT","FGF1","FGFR1","IGF1","IGF1R","VEGFA","VEGFB","KDR"]},{id:"General: PI3K-AKT-mTOR signaling",genes:["PIK3CA","PIK3R1","PIK3R2","PTEN","PDPK1","AKT1","AKT2","FOXO1","FOXO3","MTOR","RICTOR","TSC1","TSC2","RHEB","AKT1S1","RPTOR","MLST8"]},{id:"General: Ras-Raf-MEK-Erk/JNK signaling",genes:["KRAS","HRAS","BRAF","RAF1","MAP3K1","MAP3K2","MAP3K3","MAP3K4","MAP3K5","MAP2K1","MAP2K2","MAP2K3","MAP2K4","MAP2K5","MAPK1","MAPK3","MAPK4","MAPK6","MAPK7","MAPK8","MAPK9","MAPK12","MAPK14","DAB2","RASSF1","RAB25"]},{id:"General: Regulation of ribosomal protein synthesis and cell growth",genes:["RPS6KA1","RPS6KA2","RPS6KB1","RPS6KB2","EIF5A2","EIF4E","EIF4EBP1","RPS6","HIF1A"]},{id:"General: Angiogenesis",genes:["VEGFA","VEGFB","KDR","CXCL8","CXCR1","CXCR2"]},{id:"General: Folate transport",genes:["SLC19A1","FOLR1","FOLR2","FOLR3","IZUMO1R"]},{id:"General: Invasion and metastasis",genes:["MMP1","MMP2","MMP3","MMP7","MMP9","MMP10","MMP11","MMP12","MMP13","MMP14","MMP15","MMP16","MMP17","MMP19","MMP21","MMP23B","MMP24","MMP25","MMP26","MMP27","MMP28","ITGB3","ITGAV","PTK2","CDH1","SPARC","WFDC2"]},{id:"General: TGF-β Pathway",genes:["TGFB1","TGFB2","TGFB3","TGFBR1","TGFBR2","TGFBR3","BMP2","BMP3","BMP4","BMP5","BMP6","BMP7","GDF2","BMP10","BMP15","BMPR1A","BMPR1B","BMPR2","ACVR1","ACVR1B","ACVR1C","ACVR2A","ACVR2B","ACVRL1","Nodal","GDF1","GDF11","INHA","INHBA","INHBB","INHBC","INHBE","SMAD2","SMAD3","SMAD1","SMAD5","SMAD4","SMAD9","SMAD6","SMAD7","SPTBN1","TGFBRAP1","ZFYVE9"]}],H=n(5),U=n.n(H),W=n(26),q=n.n(W),z=n(21);n(1071),n(1072);function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var J=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Z(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},$=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function l(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,l)}s((r=r.apply(e,t||[])).next())})},ee=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=Q(t).call(this,e))||"object"!==Z(o)&&"function"!=typeof o?Y(r):o,Object.defineProperty(Y(n),"tree",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(Y(n),"isLoading",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(Y(n),"promisedTree",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(Y(n),"map_geneSets_selected",{enumerable:!0,configurable:!0,writable:!0,value:new B.ObservableMap}),Object(B.makeObservable)(Y(n)),n.map_geneSets_selected.replace(e.initialSelection.map(function(e){return[e,!0]})),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(t,o.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){var e=this;this.promisedTree=this.initTree(this.tree),this.promisedTree.then(function(t){return e.isLoading=!1,t})}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.scoreThreshold===e.scoreThreshold&&this.props.pvalueThreshold===e.pvalueThreshold&&this.props.percentile===e.percentile||(this.promisedTree=this.promisedTree.then(function(e){return t.isLoading=!0,t.replaceTree(e)}).then(function(e){return t.isLoading=!1,e})),this.props.searchValue!==e.searchValue&&(this.promisedTree=this.promisedTree.then(function(e){return t.searchTree(e,t.props.searchValue)}))}},{key:"transformHierarchyData",value:function(e){var t=e,n=[],r=0,o=!0,i=!1,a=void 0;try{for(var l,s=t[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var c=l.value,p=c.nodeName,d=c.parentNodeName?c.parentNodeName:"#";if(n.push({id:p,parent:d,text:p,li_attr:{name:p},geneset:!1,state:{opened:!0,selected:!1}}),u.has(c,"genesets")){var f=!0,h=!1,m=void 0;try{for(var y,b=c.genesets[Symbol.iterator]();!(f=(y=b.next()).done);f=!0){var g=y.value,v=r++,_=g.genesetId,w=g.description,O=g.representativeScore,S=g.representativePvalue,E=g.refLink,k="",C=_+'<span style="font-weight:normal;font-style:italic;"> '+(k=(k=k+"score = "+O.toFixed(2))+", p-value = "+(S=S<.005?S.toExponential(0):S.toFixed(2)))+"</span>";n.push({id:v.toString(),parent:p,text:C,state:{selected:!1},li_attr:{name:_},description:w,representativeScore:O,representativePvalue:S,refLink:E,geneset:!0})}}catch(e){h=!0,m=e}finally{try{f||null==b.return||b.return()}finally{if(h)throw m}}}}}catch(e){i=!0,a=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw a}}return n}},{key:"initTree",value:function(e){return $(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(z.bb)(this.props.gsvaProfile,this.props.percentile,this.props.scoreThreshold,this.props.pvalueThreshold,this.props.sampleListId);case 2:return n=t.sent,q()(e).jstree({search:{show_only_matches:!0,show_only_matches_children:!0},checkbox:{cascade_to_disabled:!1,cascade_to_hidden:!1},core:{themes:{icons:!1},check_callback:!0,data:this.transformHierarchyData(n)},plugins:["checkbox","search"]}),t.abrupt("return",e);case 5:case"end":return t.stop()}},t,this)}))}},{key:"destroyTree",value:function(e){q()(e).jstree(!0).destroy()}},{key:"replaceTree",value:function(e){return $(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.destroyTree(e),t.next=3,this.initTree(e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t,this)}))}},{key:"submitGeneSets",value:function(e){if(e){var t=q()(e).jstree("get_selected",!0),n=!0,r=!1,o=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var l=i.value;l.original.geneset&&this.map_geneSets_selected.set(l.original.li_attr.name,!0)}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}}return this.map_geneSets_selected}},{key:"searchTree",value:function(e,t){return q()(e).jstree(!0).search(t),e}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(P.a,{isLoading:this.isLoading}),o.a.createElement("div",{ref:function(t){return e.tree=t},style:{maxHeight:"380px",overflowY:"scroll"},"data-test":"gsva-tree-container"}),o.a.createElement("div",{style:{padding:"30px 0px"}},o.a.createElement("button",{className:"btn btn-primary btn-sm pull-right",style:{margin:"2px"},disabled:this.isLoading,onClick:function(){var t=e.submitGeneSets(e.tree);e.props.onSelect(t)}},"Select")))}}])&&K(n.prototype,r),i&&K(n,i),t}();J([B.observable],ee.prototype,"isLoading",void 0);var te=ee=J([l.observer],ee),ne=n(175);function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ae(e,t){return(ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var se=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":le(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ce=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=oe(t).call(this,e))||"object"!==le(o)&&"function"!=typeof o?ie(r):o,Object.defineProperty(ie(n),"percentile",{enumerable:!0,configurable:!0,writable:!0,value:n.props.percentile}),Object.defineProperty(ie(n),"pvalueThreshold",{enumerable:!0,configurable:!0,writable:!0,value:String(n.props.pvalueThreshold)}),Object.defineProperty(ie(n),"scoreThreshold",{enumerable:!0,configurable:!0,writable:!0,value:String(n.props.scoreThreshold)}),Object.defineProperty(ie(n),"percentileOptions",{enumerable:!0,configurable:!0,writable:!0,value:[{label:"50%",value:50},{label:"75%",value:75},{label:"100%",value:100}]}),Object(B.makeObservable)(ie(n)),n.percentileChange=n.percentileChange.bind(ie(n)),n.applyFilter=n.applyFilter.bind(ie(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ae(e,t)}(t,r["Component"]),n=t,(o=[{key:"percentileChange",value:function(e){this.percentile=e?e.value:75}},{key:"applyFilter",value:function(){var e=this.pvalueThreshold?Number(this.pvalueThreshold):NaN,t=this.scoreThreshold?Number(this.scoreThreshold):NaN;Number.isNaN(e)||Number.isNaN(t)||this.props.onApply(this.percentile,e,t)}},{key:"render",value:function(){var e=this;return r.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center",width:"100%",background:"#eee",padding:"10px 10px"}},r.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.createElement("label",{htmlFor:"GSVAScore"},"GSVA score"),r.createElement("input",{id:"GSVAScore",type:"string",value:this.scoreThreshold,style:{width:160,height:36,padding:10},onChange:function(t){return e.scoreThreshold=t.target.value},step:"0.1"})),r.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.createElement("label",{htmlFor:"Pvalue"},"P-value"),r.createElement("input",{id:"Pvalue",type:"string",value:this.pvalueThreshold,style:{width:160,height:36,padding:10},onChange:function(t){return e.pvalueThreshold=t.target.value},step:"0.01",min:"0"})),r.createElement("div",null,r.createElement("label",{htmlFor:"PercentileScoreCalculation"},"Percentile for score calculation"),r.createElement(ne.default,{addLabelText:"Percentile for score calculation",style:{width:160,borderRadius:"2px"},clearable:!1,name:"PercentileScoreCalculation",value:this.percentile,options:this.percentileOptions,onChange:this.percentileChange})),r.createElement("div",null,r.createElement("button",{id:"filterButton",className:"btn btn-primary btn-sm",style:{padding:"20px 18px"},onClick:this.applyFilter},"Apply Filter")))}}])&&re(n.prototype,o),i&&re(n,i),t}();se([B.observable],ce.prototype,"percentile",void 0),se([B.observable],ce.prototype,"pvalueThreshold",void 0),se([B.observable],ce.prototype,"scoreThreshold",void 0);var ue=ce=se([l.observer],ce);function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function de(e){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function he(e,t){return(he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ye=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":me(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},be=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=de(t).call(this,e))||"object"!==me(o)&&"function"!=typeof o?fe(r):o,Object.defineProperty(fe(n),"percentile",{enumerable:!0,configurable:!0,writable:!0,value:75}),Object.defineProperty(fe(n),"pvalueThreshold",{enumerable:!0,configurable:!0,writable:!0,value:.05}),Object.defineProperty(fe(n),"scoreThreshold",{enumerable:!0,configurable:!0,writable:!0,value:.5}),Object.defineProperty(fe(n),"searchValue",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object(B.makeObservable)(fe(n)),n.updateSelectionParameters=n.updateSelectionParameters.bind(fe(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&he(e,t)}(t,r["Component"]),n=t,(o=[{key:"updateSelectionParameters",value:function(e,t,n){this.percentile=e,this.pvalueThreshold=t,this.scoreThreshold=n}},{key:"render",value:function(){var e=this;return r.createElement("div",null,r.createElement("text",null,"Search hierarchy"),r.createElement("div",{className:"form-group has-feedback input-group-sm",style:{display:"inline-block"}},r.createElement("input",{type:"text",id:"geneset-hierarchy-search",className:"form-control tableSearchInput",style:{width:768},value:this.searchValue,onChange:function(t){return e.searchValue=t.target.value}}),r.createElement("span",{className:"fa fa-search form-control-feedback","aria-hidden":"true"})),r.createElement(ue,{percentile:this.percentile,pvalueThreshold:this.pvalueThreshold,scoreThreshold:this.scoreThreshold,onApply:this.updateSelectionParameters}),r.createElement(te,{initialSelection:this.props.initialSelection,scoreThreshold:this.scoreThreshold,pvalueThreshold:this.pvalueThreshold,percentile:this.percentile,gsvaProfile:this.props.gsvaProfile,sampleListId:this.props.sampleListId,searchValue:this.searchValue,onSelect:this.props.onSelect}))}}])&&pe(n.prototype,o),i&&pe(n,i),t}();ye([B.observable],be.prototype,"percentile",void 0),ye([B.observable],be.prototype,"pvalueThreshold",void 0),ye([B.observable],be.prototype,"scoreThreshold",void 0),ye([B.observable],be.prototype,"searchValue",void 0);var ge=be=ye([l.observer],be),ve=n(176),_e=n(73),we=n(45),Oe=n(18);function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ke(e,t){return!t||"object"!==je(t)&&"function"!=typeof t?Ce(e):t}function Ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pe(e){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Te(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xe(e,t)}function xe(e,t){return(xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function je(e){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ae=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":je(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Ie=function(e){function t(){return Ee(this,t),ke(this,Pe(t).apply(this,arguments))}return Te(t,_e["b"]),t}(),Me=function(e){function t(e){var n;return Ee(this,t),n=ke(this,Pe(t).call(this,e)),Object.defineProperty(Ce(n),"percentileOptions",{enumerable:!0,configurable:!0,writable:!0,value:[{label:"50%",value:"50"},{label:"75%",value:"75"},{label:"100%",value:"100"}]}),Object(B.makeObservable)(Ce(n)),n.percentileChange=n.percentileChange.bind(Ce(n)),n.updateSelectionFromPlot=n.updateSelectionFromPlot.bind(Ce(n)),n}var n,o,i;return Te(t,f["d"]),n=t,(o=[{key:"percentileChange",value:function(e){this.store.volcanoPlotSelectedPercentile=e||{label:"75%",value:"75"}}},{key:"updateSelectionFromPlot",value:function(e,t){var n=this,r=e&&e[0].data?e[0].data:[];this.store.volcanoPlotTableData.result.map(function(e){var t=e.representativeScore,o=e.representativePvalue,i=e.name,a=t,l=-Math.log(o)/Math.log(10),s=!0,c=!1,u=void 0;try{for(var p,d=r[Symbol.iterator]();!(s=(p=d.next()).done);s=!0){var f=p.value;f.x===a&&f.y===l&&n.store.map_genesets_selected_volcano.set(i,!0)}}catch(e){c=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(c)throw u}}})}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:a.a.GenesetsVolcanoSelectorWindow,style:{height:"400px"}},r.createElement("div",{style:{float:"left"},className:"form-inline"},r.createElement("label",{htmlFor:"PercentileScoreCalculation"},"Percentile for score calculation:"),r.createElement("span",{style:{display:"inline-block",verticalAlign:"middle",marginLeft:"1em"}},r.createElement(ne.default,{addLabelText:"Percentile for score calculation",style:{width:160,borderRadius:"2px"},clearable:!1,name:"PercentileScoreCalculation",value:this.store.volcanoPlotSelectedPercentile,options:this.percentileOptions,onChange:this.percentileChange})),r.createElement(P.a,{isLoading:!(this.props.plotData&&this.props.maxY&&this.store.volcanoPlotTableData.isComplete&&this.props.data)}),this.store.volcanoPlotGraphData&&this.store.minYVolcanoPlot&&this.props.plotData&&this.props.maxY&&this.store.volcanoPlotTableData.isComplete&&this.props.data&&r.createElement(Oe.VictoryChart,{theme:h.a,width:510,height:350,containerComponent:r.createElement(Oe.VictorySelectionContainer,{onSelection:this.updateSelectionFromPlot,selectionStyle:{fill:"tomato",fillOpacity:.5,stroke:"tomato",strokeWidth:2}})},r.createElement(Oe.VictoryAxis,{crossAxis:!0,domain:[this.xAxisMinValue,this.xAxisMaxValue],tickValues:this.xAxisTickValues,style:{axisLabel:{padding:35}},label:"GSVA score",offsetY:50,standalone:!1}),r.createElement(Oe.VictoryAxis,{dependentAxis:!0,crossAxis:!0,domain:[0,this.props.maxY],style:{axisLabel:{padding:35},stroke:"none"},label:"-log10 p-value",offsetX:50,standalone:!1}),r.createElement(Oe.VictoryLabel,{text:"significance",datum:{x:this.xAxisTickValues[this.xAxisTickValues.length-1],y:1.3},textAnchor:"start"}),r.createElement(Oe.VictoryLine,{style:{data:{stroke:"black",strokeDasharray:5},parent:{border:"dotted 1px #f00"}},data:[{x:this.xAxisMinValue,y:1.3},{x:this.xAxisTickValues[this.xAxisTickValues.length-1],y:1.3}]}),r.createElement(Oe.VictoryLine,{style:{data:{stroke:"rgb(144, 164, 174)"},parent:{border:"1px dashed solid"}},data:[{x:0,y:0},{x:0,y:this.props.maxY}]}),r.createElement(Oe.VictoryScatter,{style:{data:{fill:function(e){return e?e.fill:""},fillOpacity:.3}},size:3,data:this.props.plotData}))),r.createElement("div",{style:{float:"right",height:"356.5px",overflowY:"scroll",width:"650px"}},r.createElement(P.a,{isLoading:!(this.store.volcanoPlotTableData.isComplete&&this.props.data)}),this.store.volcanoPlotTableData.isComplete&&this.props.data&&r.createElement(Ie,{data:this.props.data,columns:[{name:"Gene Sets",render:function(e){return r.createElement("span",null,e.name)},sortBy:function(e){return e.name},filter:function(e,t,n){return e.name.toUpperCase().indexOf(n)>-1}},{name:"GSVA Score",render:function(e){return r.createElement("span",null,e.representativeScore.toFixed(2))},sortBy:function(e){return e.representativeScore}},{name:"P Value",render:function(e){return r.createElement("span",null,Object(we.i)(e.representativePvalue,2,.1))},sortBy:function(e){return e.representativePvalue}},{name:"Selected",render:function(t){return r.createElement(ve.a,{checked:!!e.store.map_genesets_selected_volcano.get(t.name),onChange:function(n){return e.store.map_genesets_selected_volcano.set(t.name,n.target.checked)}})}}],initialSortColumn:"P Value",initialSortDirection:"asc",showPagination:!0,initialItemsPerPage:100,showColumnVisibility:!1,showFilter:!0,showCopyDownload:!1})),r.createElement("div",{style:{float:"right"}},this.store.volcanoPlotTableData.isComplete&&this.props.data&&r.createElement("button",{style:{marginTop:15,float:"right"},className:"btn btn-primary btn-sm pull-right",onClick:function(){return e.props.onSelect(e.store.map_genesets_selected_volcano)}},"Add selection to the query"),this.store.volcanoPlotTableData.isComplete&&this.props.data&&r.createElement("button",{style:{marginRight:15,marginTop:15,float:"right"},className:"btn btn-primary btn-sm pull-right",onClick:function(){return e.store.map_genesets_selected_volcano.replace(e.props.initialSelection.map(function(e){return[e,!0]}))}},"Clear selection")))}},{key:"xAxisTickSize",get:function(){if(this.props.plotData&&this.props.plotData.length>0){var e=u.maxBy(this.props.plotData,function(e){return e.x}).x,t=u.minBy(this.props.plotData,function(e){return e.x}).x,n=Math.max(e,Math.abs(t));return(n=Math.round(n))/2}return.5}},{key:"xAxisTickValues",get:function(){return[-2*this.xAxisTickSize,-this.xAxisTickSize,0,this.xAxisTickSize,2*this.xAxisTickSize]}},{key:"xAxisMaxValue",get:function(){return 2.5*this.xAxisTickSize}},{key:"xAxisMinValue",get:function(){return-2.5*this.xAxisTickSize}}])&&Se(n.prototype,o),i&&Se(n,i),t}();Ae([B.action],Me.prototype,"updateSelectionFromPlot",null),Ae([B.computed],Me.prototype,"xAxisTickSize",null),Ae([B.computed],Me.prototype,"xAxisTickValues",null),Ae([B.computed],Me.prototype,"xAxisMaxValue",null),Ae([B.computed],Me.prototype,"xAxisMinValue",null);var De=Me=Ae([l.observer],Me);function Ne(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Le(e){return(Le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ge(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ve(e,t){return(Ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Be(e){return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Fe=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Be(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},He=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=Le(t).call(this,e))||"object"!==Be(o)&&"function"!=typeof o?Ge(r):o,Object(B.makeObservable)(Ge(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ve(e,t)}(t,f["d"]),n=t,(o=[{key:"render",value:function(){var e=this;return r.createElement(c.b,{padded:!0,overflow:!0,className:a.a.GeneSetSelector},r.createElement(m.a,{className:"sectionLabel"},"Enter Gene Sets:"),r.createElement(c.a,{overflow:!0},r.createElement(c.b,{padded:!0,className:a.a.buttonRow},r.createElement("button",{className:"btn btn-default btn-sm","data-test":"GENESET_HIERARCHY_BUTTON",onClick:function(){return e.store.showGenesetsHierarchyPopup=!0}},"Select Gene Sets from Hierarchy"),r.createElement("button",{className:"btn btn-default btn-sm","data-test":"GENESET_VOLCANO_BUTTON",onClick:function(){return e.store.showGenesetsVolcanoPopup=!0}},"Select Gene Sets from Volcano Plot")),r.createElement("textarea",{ref:this.textAreaRef,className:U()(a.a.geneSet,this.store.genesetQuery?a.a.notEmpty:a.a.empty),rows:5,cols:80,placeholder:"Enter Gene Sets",title:"Enter Gene Sets",value:this.store.genesetQuery,onChange:function(t){return e.store.genesetQuery=t.currentTarget.value},"data-test":"GENESETS_TEXT_AREA"}),r.createElement(V.Modal,{className:U()("cbioportal-frontend",a.a.GenesetsSelectorWindow),show:this.store.showGenesetsHierarchyPopup,onHide:function(){return e.store.showGenesetsHierarchyPopup=!1}},r.createElement(V.Modal.Header,{closeButton:!0},r.createElement(V.Modal.Title,null,"Select Gene Sets From Hierarchy")),r.createElement(V.Modal.Body,null,r.createElement(ge,{initialSelection:this.store.genesetIds,gsvaProfile:this.store.getFilteredProfiles("GENESET_SCORE")[0].molecularProfileId,sampleListId:this.store.defaultSelectedSampleListId,onSelect:function(t){e.store.applyGenesetSelection(t),e.store.showGenesetsHierarchyPopup=!1}}))),r.createElement(V.Modal,{className:U()("cbioportal-frontend",a.a.GenesetsVolcanoSelectorWindow),show:this.store.showGenesetsVolcanoPopup,onHide:function(){return e.store.showGenesetsVolcanoPopup=!1},onShow:function(){return e.store.map_genesets_selected_volcano.replace(e.store.genesetIds.map(function(e){return[e,!0]}))}},r.createElement(V.Modal.Header,{closeButton:!0},r.createElement(V.Modal.Title,null,"Select Gene Sets From Volcano Plot")),r.createElement(V.Modal.Body,null,r.createElement(De,{initialSelection:this.store.genesetIds,data:this.store.volcanoPlotTableData.result,plotData:this.store.volcanoPlotGraphData,maxY:this.store.minYVolcanoPlot?-Math.log(this.store.minYVolcanoPlot)/Math.log(10):void 0,onSelect:function(t){e.store.addToGenesetSelection(t),e.store.showGenesetsVolcanoPopup=!1}})))))}},{key:"selectedGeneListOption",get:function(){var e=this,t=this.geneListOptions.find(function(t){return t.value===e.store.geneQuery});return t?t.value:""}},{key:"geneListOptions",get:function(){var e=F;if(y.b.serverConfig.query_sets_of_genes){var t=y.a.parseQuerySetsOfGenes(y.b.serverConfig.query_sets_of_genes);t&&(e=t)}return[{label:"User-defined List",value:""}].concat(Ne(e.map(function(e){return{label:"".concat(e.id," (").concat(e.genes.length," genes)"),value:e.genes.join(" ")}})))}},{key:"textAreaRef",get:function(){var e=this;if(this.store.geneQueryErrorDisplayStatus===f.b.ShouldFocus)return function(t){var n=e.store.oql.error;t&&n&&(t.focus(),t.setSelectionRange(n.start,n.end),e.store.geneQueryErrorDisplayStatus=f.b.Focused)}}}])&&Re(n.prototype,o),i&&Re(n,i),t}();Fe([B.computed],He.prototype,"selectedGeneListOption",null),Fe([B.computed],He.prototype,"geneListOptions",null),Fe([B.computed],He.prototype,"textAreaRef",null);var Ue=He=Fe([l.observer],He),We=n(19),qe=n(1073),ze=n(858),Ke=n(74),Qe=n.n(Ke),Ye=n(136),Xe=n(23),Ze=n(350);function Je(e){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $e(){return($e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tt(e){return(tt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rt(e,t){return(rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n(1081);var ot=n(221);function it(e,t){var n=[];return t||(Object.keys(e[0]).forEach(function(e){return n.push(e,",")}),n.pop(),n.push("\r\n")),e.forEach(function(e){u.each(e,function(e){n.push(e,",")}),n.pop(),n.push("\r\n")}),n.join("")}var at=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=tt(t).call(this,e),n=!o||"object"!==Je(o)&&"function"!=typeof o?nt(r):o,Object.defineProperty(nt(n),"searchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(nt(n),"_copyButton",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(nt(n),"downloadData",{enumerable:!0,configurable:!0,writable:!0,value:function(){n.props.downloadDataGenerator?Qe()(it(n.props.downloadDataGenerator()||[],n.props.downloadDataContainsHeader),n.props.downloadFilename):Qe()(it(n.props.tableData||[],n.props.downloadDataContainsHeader),n.props.downloadFilename)}}),n.handleInput=n.handleInput.bind(nt(n)),n.getText=n.getText.bind(nt(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rt(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){this.props.showCopyAndDownload&&this._copyButton&&this.bindCopyButton()}},{key:"bindCopyButton",value:function(){new ot(this._copyButton,{text:function(){return this.getText()}.bind(this)})}},{key:"handleInput",value:function(e){var t=this;null!==this.searchTimeout&&(clearTimeout(this.searchTimeout),this.searchTimeout=null);var n=e.currentTarget.value;this.searchTimeout=setTimeout(function(){t.props.handleInput&&t.props.handleInput(n)},this.props.searchDelayMs)}},{key:"render",value:function(){var e=this,t=r.createElement("div",{className:"rc-tooltip-arrow-inner"});return r.createElement("div",{className:(this.props.className||"")+""},r.createElement(V.ButtonToolbar,null,r.createElement(Xe.If,{condition:this.props.showPagination},r.createElement(Ye.a,$e({className:"pull-left"},this.props.paginationProps))),r.createElement(Xe.If,{condition:this.props.showHideShowColumnButton},r.createElement(Ze.a,this.props.columnVisibilityProps)),r.createElement(Xe.If,{condition:this.props.showCopyAndDownload},r.createElement(V.ButtonGroup,{className:this.props.copyDownloadClassName,style:{marginLeft:10}},r.createElement(h.i,{overlay:r.createElement("span",null,"Copy"),placement:"top",mouseLeaveDelay:0,mouseEnterDelay:.5,arrowContent:t},r.createElement("button",{ref:function(t){e._copyButton=t},className:"btn btn-sm btn-default","option-text":this.getText},r.createElement("i",{className:"fa fa-clipboard"}))),r.createElement(h.i,{overlay:r.createElement("span",null,"Download CSV"),mouseLeaveDelay:0,mouseEnterDelay:.5,placement:"top",arrowContent:t},r.createElement(V.Button,{className:"btn-sm",onClick:this.downloadData},r.createElement("i",{className:"fa fa-cloud-download"}))))),r.createElement(Xe.If,{condition:this.props.showSearch},r.createElement("div",{className:"".concat(this.props.searchClassName," form-group has-feedback input-group-sm"),style:{display:"inline-block",marginLeft:10}},r.createElement("input",{type:"text",onInput:this.handleInput,className:"form-control tableSearchInput",style:{width:200}}),r.createElement("span",{className:"fa fa-search form-control-feedback","aria-hidden":"true"})))))}},{key:"getText",value:function(){return this.props.downloadDataGenerator?it(this.props.downloadDataGenerator()||[],this.props.downloadDataContainsHeader):it(this.props.tableData||[],this.props.downloadDataContainsHeader)}}])&&et(n.prototype,o),i&&et(n,i),t}();Object.defineProperty(at,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{showSearch:!1,showCopyAndDownload:!0,showPagination:!1,searchClassName:"",copyDownloadClassName:"",downloadFilename:"patient-clinical-attributes.tsv",downloadDataContainsHeader:!1,paginationProps:{},columnVisibilityProps:{},searchDelayMs:400}});n(1082);function lt(e){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function st(){return(st=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ut(e){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dt(e,t){return(dt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ft=function(e){function t(e){var n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=ut(t).call(this,e),n=!o||"object"!==lt(o)&&"function"!=typeof o?pt(r):o,Object.defineProperty(pt(n),"colNameToId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(pt(n),"filteredDataLength",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(pt(n),"shouldSetState",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(pt(n),"rawDataSelector",{enumerable:!0,configurable:!0,writable:!0,value:function(e,t){return t.rawData}}),Object.defineProperty(pt(n),"columnsSelector",{enumerable:!0,configurable:!0,writable:!0,value:function(e,t){return t.columns}}),Object.defineProperty(pt(n),"columnVisibilitySelector",{enumerable:!0,configurable:!0,writable:!0,value:function(e){return e.columnVisibility}}),Object.defineProperty(pt(n),"visibleColsSelector",{enumerable:!0,configurable:!0,writable:!0,value:Object(qe.createSelector)(n.columnsSelector,n.columnVisibilitySelector,function(e,t){return n.resolveVisible(e,t)})}),Object.defineProperty(pt(n),"sortedVisibleColsSelector",{enumerable:!0,configurable:!0,writable:!0,value:Object(qe.createSelector)(n.visibleColsSelector,function(e){return n.resolveOrder(e)})}),Object.defineProperty(pt(n),"sortedColsSelector",{enumerable:!0,configurable:!0,writable:!0,value:Object(qe.createSelector)(n.columnsSelector,function(e){return n.resolveOrder(e)})}),Object.defineProperty(pt(n),"columnVisibilityArraySelector",{enumerable:!0,configurable:!0,writable:!0,value:Object(qe.createSelector)(n.sortedColsSelector,n.columnVisibilitySelector,function(e,t){return n.resolveColumnVisibility(n.colNameToId,e,t)})}),Object.defineProperty(pt(n),"downloadDataSelector",{enumerable:!0,configurable:!0,writable:!0,value:Object(qe.createSelector)(n.sortedColsSelector,n.columnVisibilitySelector,n.rawDataSelector,function(e,t,r){return n.generateDownloadData(e,t,r)})}),Object.defineProperty(pt(n),"headersSelector",{enumerable:!0,configurable:!0,writable:!0,value:Object(qe.createSelector)(n.sortedVisibleColsSelector,function(e){return n.generateHeaders(e)})}),Object.defineProperty(pt(n),"rowsSelector",{enumerable:!0,configurable:!0,writable:!0,value:Object(qe.createSelector)(n.sortedColsSelector,n.rawDataSelector,function(e,t){return n.generateRows(e,t)})}),n.colNameToId=n.mapColNameToId(e.columns),n.state={columnVisibility:t.resolveVisibility(e.columns,e.rawData),sortableColumns:n.resolveSortable(n.props.columns||{}),filterableColumns:n.resolveFilterable(n.props.columns||{}),filter:"",itemsPerPage:n.props.initItemsPerPage||25,currentPage:n.props.initPage||0},n.filteredDataLength=e.rawData.length,n.shouldSetState=!1;var i=ze.Table.prototype.applyFilter;ze.Table.prototype.applyFilter=function(){var e,t=i.apply(this,arguments);return(e=t.length)!==n.filteredDataLength&&(n.filteredDataLength=e,n.shouldSetState=!0),t};var a=ze.Table.prototype.render;return ze.Table.prototype.render=function(){var e,t=a.apply(this,arguments);return e=t.props.children.find(function(e){return"tbody"===e.type}).props.children||[],n.props.onVisibleRowsChange&&n.props.onVisibleRowsChange(e.map(function(e){return e.props.rowData})),t},n.handleDownload=n.handleDownload.bind(pt(n)),n.handleFilterInput=n.handleFilterInput.bind(pt(n)),n.handleVisibilityToggle=n.handleVisibilityToggle.bind(pt(n)),n.handleChangeItemsPerPage=n.handleChangeItemsPerPage.bind(pt(n)),n.handlePreviousPageClick=n.handlePreviousPageClick.bind(pt(n)),n.handleNextPageClick=n.handleNextPageClick.bind(pt(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dt(e,t)}(t,r["Component"]),n=t,i=[{key:"resolveVisibility",value:function(e,t){var n={};return e?(u.each(u.keys(e),function(r){var o=e[r],i="visible";o.visible&&(i=u.isFunction(o.visible)?o.visible(t,o.columnProps):o.visible),"excluded"!==i&&(n[r]=i)}),n):n}},{key:"columnSort",value:function(e,t){return e.priority&&t.priority?e.priority-t.priority:e.priority?-1:t.priority?1:e.name>t.name?1:-1}}],(o=[{key:"render",value:function(){var e=this.props,t=e.className,n=e.reactTableProps,o=e.headerControlsProps,i=(this.columnVisibilityArraySelector(this.state,this.props),this.headersSelector(this.state,this.props)),a=this.rowsSelector(this.state,this.props),l=this.rowIndexesOnPage(),s=l.firstIndex,c=l.numIndexes;return r.createElement("div",{className:t},r.createElement(at,st({showCopyAndDownload:!0,showHideShowColumnButton:!0,handleInput:this.handleFilterInput,downloadDataGenerator:this.handleDownload,downloadDataContainsHeader:!0,downloadFilename:"mutations.csv",showSearch:!0,columnVisibilityProps:{className:"pull-right",onColumnToggled:this.handleVisibilityToggle},paginationProps:{className:"pull-right",itemsPerPage:this.state.itemsPerPage,currentPage:this.state.currentPage,onChangeItemsPerPage:this.handleChangeItemsPerPage,onPreviousPageClick:this.handlePreviousPageClick,onNextPageClick:this.handleNextPageClick,textBetweenButtons:"".concat(this.filteredDataLength?s+1:0,"-").concat(s+c," of ").concat(this.filteredDataLength),previousPageDisabled:0===this.state.currentPage,nextPageDisabled:this.state.currentPage>=this.numPages()-1}},o)),r.createElement(ze.Table,st({sortable:this.state.sortableColumns,filterable:this.state.filterableColumns,filterBy:this.state.filter,itemsPerPage:-1===this.state.itemsPerPage?void 0:this.state.itemsPerPage,currentPage:this.state.currentPage},n),i,a))}},{key:"componentWillUpdate",value:function(e,t){0===t.filter.length&&(this.filteredDataLength=this.props.rawData.length)}},{key:"componentDidUpdate",value:function(){this.shouldSetState&&(this.shouldSetState=!1,this.setState({currentPage:Math.max(0,Math.min(this.state.currentPage,this.numPages()-1))}))}},{key:"rowIndexesOnPage",value:function(){var e,t;return-1===this.state.itemsPerPage?(e=0,t=this.filteredDataLength):(e=this.state.itemsPerPage*this.state.currentPage,t=Math.min(this.filteredDataLength-e,this.state.itemsPerPage)),{firstIndex:e,numIndexes:t}}},{key:"numPages",value:function(e){return-1===(e=e||this.state.itemsPerPage)?1:Math.ceil(this.filteredDataLength/e)}},{key:"mapColNameToId",value:function(e){var t={};return e&&u.each(e,function(e,n){e.name&&(t[e.name],t[e.name]=n)}),t}},{key:"resolveOrder",value:function(e){return e?u.values(e).sort(t.columnSort):[]}},{key:"resolveColumnVisibility",value:function(e,t,n){var r=[];return u.each(t,function(t){var o=e[t.name];n[o]&&r.push({id:o,name:t.name,visibility:n[o]})}),r}},{key:"generateHeaders",value:function(e){var t=[];return u.each(e,function(e){var n=e.header||r.createElement("span",null,e.name);if(e.description){var o=r.createElement("div",{className:"rc-tooltip-arrow-inner"});n=r.createElement(h.i,{overlay:r.createElement("span",null,e.description),placement:"top",arrowContent:o},n)}t.push(r.createElement(ze.Th,{key:e.name,column:e.name},n))}),t}},{key:"generateDownloadData",value:function(e,t,n){var r=this,o=[];return o[0]=[],u.each(e,function(e){var n=r.colNameToId[e.name];n in t&&"excluded"!==t[n]&&o[0].push(e.name)}),u.each(n,function(i,a){var l=[];u.each(e,function(e){var o=r.colNameToId[e.name];if(o in t&&"excluded"!==t[o]){var a=r.getColumnData(e,n,i);e.downloader?l.push(e.downloader(a,e.columnProps)):l.push((a.columnData||"").toString())}}),o.push(l)}),o}},{key:"getColumnData",value:function(e,t,n){var r={name:e.name,tableData:t,rowData:n,columnData:null};if(e.columnDataFunction)r.columnData=e.columnDataFunction(r);else if(e.dataField){var o=null;(o=u.isArray(r.rowData)&&r.rowData.length>0?r.rowData[0]:r.rowData)&&(r.columnData=o[e.dataField])}return r}},{key:"generateRows",value:function(e,t){var n=this,o=[];return u.each(t,function(i,a){var l=n.generateColumns(e,t,i);o.push(r.createElement(ze.Tr,{key:a,rowData:i},l))}),o}},{key:"generateColumns",value:function(e,t,n){var r=this,o=[];return u.each(e,function(e){var i=r.getColumnData(e,t,n);o.push(r.generateColumn(i,e))}),o}},{key:"generateColumn",value:function(e,t){return t.formatter?t.formatter(e,t.columnProps):r.createElement(ze.Td,{key:t.name,column:t.name,value:e.columnData},e.columnData)}},{key:"resolveVisible",value:function(e,t){var n={};return u.each(u.keys(t),function(r){"visible"===t[r]&&(n[r]=e[r])}),n}},{key:"resolveSortable",value:function(e){var t=[];return u.each(e,function(e){u.isFunction(e.sortable)?t.push({column:e.name,sortFunction:e.sortable}):e.sortable&&t.push(e.name)}),t}},{key:"resolveFilterable",value:function(e){var t=[];return u.each(e,function(e){u.isFunction(e.filterable)?t.push({column:e.name,filterFunction:e.filterable}):e.filterable&&t.push(e.name)}),t}},{key:"handleFilterInput",value:function(e){this.setState({filter:e})}},{key:"handleDownload",value:function(){return this.downloadDataSelector(this.state,this.props)}},{key:"handleVisibilityToggle",value:function(e){var t=e,n=this.state.columnVisibility[t],r=Object.assign({},this.state.columnVisibility);"hidden"===n?n="visible":"visible"===n&&(n="hidden"),r[t]=n,this.setState({columnVisibility:r})}},{key:"handleChangeItemsPerPage",value:function(e){this.setState({itemsPerPage:e,currentPage:Math.min(this.state.currentPage,this.numPages(e)-1)})}},{key:"handlePreviousPageClick",value:function(){this.setState({currentPage:Math.max(0,this.state.currentPage-1)})}},{key:"handleNextPageClick",value:function(){this.setState({currentPage:Math.min(this.state.currentPage+1,this.numPages()-1)})}}])&&ct(n.prototype,o),i&&ct(n,i),t}();function ht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yt(e,t){return!t||"object"!==wt(t)&&"function"!=typeof t?bt(e):t}function bt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gt(e){return(gt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_t(e,t)}function _t(e,t){return(_t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wt(e){return(wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ot=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":wt(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},St=function(e){function t(){return mt(this,t),yt(this,gt(t).apply(this,arguments))}return vt(t,ft),t}(),Et=function(e){function t(e){var n;return mt(this,t),n=yt(this,gt(t).call(this,e)),Object.defineProperty(bt(n),"map_geneSymbol_selected",{enumerable:!0,configurable:!0,writable:!0,value:B.observable.map()}),Object.defineProperty(bt(n),"columns",{enumerable:!0,configurable:!0,writable:!0,value:{hugoGeneSymbol:{priority:1,dataField:"hugoGeneSymbol",name:"Gene Symbol",sortable:!0,filterable:!0},numberOfMutations:{priority:2,dataField:"numberOfMutations",name:"Num Mutations",sortable:!0,filterable:!0},qValue:{priority:3,dataField:"qValue",name:"Q-Value",sortable:!0,filterable:!0,formatter:function(e){var t=e.name,n=e.columnData;return r.createElement(ze.Td,{key:t,column:t,value:n},Object(we.i)(n,2,.1))}},selected:{name:"Selected",priority:4,sortable:!1,filterable:!1,header:r.createElement("div",{className:a.a.selectionColumnHeader},r.createElement("span",null,"All"),r.createElement(l.Observer,null,function(){return r.createElement(ve.a,{checked:n.selectedGenes.length>0,indeterminate:n.selectedGenes.length>0&&n.selectedGenes.length<n.allGenes.length,onChange:function(e){return n.selectAll(e.target.checked)}})})),formatter:function(e){var t=e.name,o=e.rowData;return r.createElement(ze.Td,{key:t,column:t},!!o&&r.createElement("div",{className:a.a.selectionColumnCell},r.createElement(l.Observer,null,function(){return r.createElement(ve.a,{checked:!!n.map_geneSymbol_selected.get(o.hugoGeneSymbol),onChange:function(e){return n.map_geneSymbol_selected.set(o.hugoGeneSymbol,e.target.checked)}})})))}}}}),Object(B.makeObservable)(bt(n)),n.map_geneSymbol_selected.replace(e.initialSelection.map(function(e){return[e,!0]})),n}var n,o,i;return vt(t,r["Component"]),n=t,(o=[{key:"selectAll",value:function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=this.allGenes[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;this.map_geneSymbol_selected.set(a,e)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:a.a.MutSigGeneSelector},r.createElement(St,{itemsName:"genes",initItemsPerPage:10,columns:this.columns,rawData:this.props.data,headerControlsProps:{showCopyAndDownload:!1,showHideShowColumnButton:!1,showPagination:!0},reactTableProps:{className:"table table-striped table-border-top",hideFilterInput:!0,defaultSort:this.columns.qValue.name}}),r.createElement("div",null,r.createElement("button",{style:{marginTop:20},className:"btn btn-primary btn-sm pull-right",onClick:function(){return e.props.onSelect(e.map_geneSymbol_selected)}},"Select")))}},{key:"allGenes",get:function(){return u.uniq(this.props.data.map(function(e){return e.hugoGeneSymbol}))}},{key:"selectedGenes",get:function(){var e=this;return this.allGenes.filter(function(t){return e.map_geneSymbol_selected.get(t)})}}])&&ht(n.prototype,o),i&&ht(n,i),t}();Ot([B.computed],Et.prototype,"allGenes",null),Ot([B.computed],Et.prototype,"selectedGenes",null),Ot([B.action],Et.prototype,"selectAll",null);var kt=Et=Ot([l.observer],Et);function Ct(e){return e?e.genes.map(function(e){return e.hugoGeneSymbol}):[]}var Pt=new RegExp("^([0-9]{1,2})([pq])([0-9]{1,2})(?:.?)([0-9]{0,2})$");function Tt(e,t){var n=e.match(Pt),r=t.match(Pt);return n&&r?parseInt(n[1],10)-parseInt(r[1],10)!=0?parseInt(n[1],10)-parseInt(r[1],10):"p"===n[2]&&"q"===r[2]?-1:"q"===n[2]&&"p"===r[2]?1:n[2]===r[2]?parseInt(n[3],10)-parseInt(r[3],10):0:+!!n-+!!r}function xt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jt(e,t,n){return t&&xt(e.prototype,t),n&&xt(e,n),e}function At(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function It(e,t){return!t||"object"!==Lt(t)&&"function"!=typeof t?Mt(e):t}function Mt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dt(e){return(Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rt(e,t)}function Rt(e,t){return(Rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Lt(e){return(Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Gt=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Lt(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Vt=function(e){function t(){return At(this,t),It(this,Dt(t).apply(this,arguments))}return Nt(t,ft),t}(),Bt=function(e){function t(e){var n;return At(this,t),n=It(this,Dt(t).call(this,e)),Object.defineProperty(Mt(n),"map_geneSymbol_selected",{enumerable:!0,configurable:!0,writable:!0,value:B.observable.map()}),Object.defineProperty(Mt(n),"columns",{enumerable:!0,configurable:!0,writable:!0,value:{amp:{priority:1,columnDataFunction:function(e){var t=e.rowData;return t&&(t.amp?"Amp":"Del")},name:"Amp Del",sortable:!0,filterable:!0,header:r.createElement("div",{className:U()(a.a.header,a.a.amp,a.a.del)},r.createElement("span",{className:a.a.amp},"Amp"),r.createElement("span",{className:a.a.del},"Del")),formatter:function(e){var t=e.name,n=e.rowData,o=e.columnData;return r.createElement(ze.Td,{key:t,column:t,value:o},!!n&&r.createElement("div",{className:n.amp?a.a.amp:a.a.del}))}},chromosome:{priority:2,dataField:"chromosome",name:"Chr",sortable:!0,filterable:!0},cytoband:{priority:3,dataField:"cytoband",name:"Cytoband",sortable:Tt,filterable:!0},"#":{priority:4,columnDataFunction:function(e){return Ct(e.rowData).length},name:"#",sortable:!0,filterable:!0},genes:{priority:5,columnDataFunction:function(e){return Ct(e.rowData).join(" ")},name:"Genes",sortable:function(e,t){return e.length-t.length||+(e>t)-+(e<t)},filterable:!0,formatter:function(e){var t=e.name,o=e.rowData,i=e.columnData;return r.createElement(ze.Td,{key:t,column:t,value:i},r.createElement(Ht,{gistic:o,map_geneSymbol_selected:n.map_geneSymbol_selected}))}},qValue:{priority:6,dataField:"qValue",name:"Q-Value",sortable:!0,filterable:!0,formatter:function(e){var t=e.name,n=(e.rowData,e.columnData);return r.createElement(ze.Td,{key:t,column:t,value:n},Object(we.i)(n,2,.1))}}}}),n.map_geneSymbol_selected.replace(e.initialSelection.map(function(e){return[e,!0]})),n}return Nt(t,r["Component"]),jt(t,[{key:"render",value:function(){var e=this;return r.createElement("div",{className:a.a.GisticGeneSelector},r.createElement("span",null,"Click on a gene to ",r.createElement("span",{className:U()(a.a.geneToggle,a.a.selected,a.a.simulateHovered)},"select")," it."),r.createElement(Vt,{className:a.a.gisticTable,itemsName:"genes",initItemsPerPage:10,columns:this.columns,rawData:this.props.data,headerControlsProps:{showCopyAndDownload:!1,showHideShowColumnButton:!1,showPagination:!0},reactTableProps:{className:"table table-striped table-border-top",hideFilterInput:!0,defaultSort:this.columns.qValue.name}}),r.createElement("div",null,r.createElement("button",{style:{marginTop:20},className:"btn btn-primary btn-sm pull-right",onClick:function(){return e.props.onSelect(e.map_geneSymbol_selected)}},"Select")))}}]),t}(),Ft=Bt=Gt([l.observer],Bt),Ht=function(e){function t(e){var n;return At(this,t),n=It(this,Dt(t).call(this,e)),Object.defineProperty(Mt(n),"showAll",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object(B.makeObservable)(Mt(n)),n}return Nt(t,r["Component"]),jt(t,[{key:"renderGeneToggles",value:function(e){var t=this;return e.map(function(e){return r.createElement(l.Observer,null,function(){var n=!!t.props.map_geneSymbol_selected.get(e);return r.createElement("span",{key:e,className:U()(a.a.geneToggle,n?a.a.selected:a.a.notSelected),onClick:function(r){return t.props.map_geneSymbol_selected.set(e,!n)}},e)})})}},{key:"render",value:function(){var e=this,t=Ct(this.props.gistic),n=t.slice(0,5),o=t.slice(5);return r.createElement("div",{className:a.a.GisticGeneToggles},r.createElement("div",{className:a.a.someGenes},this.renderGeneToggles(n),!!o.length&&r.createElement("a",{className:a.a.showMoreLess,onClick:function(){return e.showAll=!e.showAll}},this.showAll?"less":"+".concat(o.length," more"))),r.createElement("div",{className:a.a.moreGenes},this.showAll&&this.renderGeneToggles(o)))}}]),t}();Gt([B.observable],Ht.prototype,"showAll",void 0),Ht=Gt([l.observer],Ht);var Ut=n(835);function Wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qt(e,t){return!t||"object"!==Qt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zt(e){return(zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kt(e,t){return(Kt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qt(e){return(Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Yt=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Qt(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Xt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),qt(this,zt(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kt(e,t)}(t,f["d"]),n=t,(o=[{key:"render",value:function(){return this.store.genesetIdsQuery.error?r.createElement("div",{className:a.a.GeneSymbolValidator},r.createElement("span",{className:a.a.errorMessage},"Cannot validate gene sets because of invalid OQL. ".concat(this.store.genesetQueryErrorDisplayStatus===f.b.Focused?"Please click 'Submit' to see location of error.":this.store.genesetIdsQuery.error.message))):this.store.genesetIdsQuery.query.length?this.store.genesets.isError?r.createElement("div",{className:a.a.GeneSymbolValidator},r.createElement("span",{className:a.a.pendingMessage},"Unable to validate gene sets.")):this.store.genesets.isPending&&0===this.store.genesets.result.invalid.length?r.createElement("div",{className:a.a.GeneSymbolValidator},r.createElement("span",{className:a.a.pendingMessage},"Validating gene sets...")):this.store.genesets.result.invalid.length?r.createElement("div",{className:a.a.GeneSymbolValidator},r.createElement("div",{className:a.a.invalidBubble,title:"Please edit the gene sets."},r.createElement(d.a,{className:a.a.icon,name:"exclamation-circle"}),r.createElement("span",null,"Invalid gene sets.")),this.store.genesets.result.invalid.map(this.renderSuggestion,this)):r.createElement("div",{className:a.a.GeneSymbolValidator},r.createElement("div",{className:a.a.validBubble,title:"You can now submit the list."},r.createElement(d.a,{className:a.a.icon,name:"check-circle"}),r.createElement("span",null,"All gene sets are valid."))):null}},{key:"renderSuggestion",value:function(e,t){var n=this;return r.createElement("div",{key:t,className:a.a.suggestionBubble,title:"Could not find gene set. Click to remove it from the gene list.",onClick:function(){return n.store.replaceGeneset(e,"")}},r.createElement(d.a,{className:a.a.icon,name:"times-circle"}),r.createElement("span",{className:a.a.noChoiceLabel},e))}}])&&Wt(n.prototype,o),i&&Wt(n,i),t}(),Zt=Xt=Yt([l.observer],Xt),Jt=n(959);function $t(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function en(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tn(e){return(tn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rn(e,t){return(rn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function on(e){return(on="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var an=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":on(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ln=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=tn(t).call(this,e))||"object"!==on(o)&&"function"!=typeof o?nn(r):o,Object(B.makeObservable)(nn(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rn(e,t)}(t,f["d"]),n=t,(o=[{key:"handleOQLUpdate",value:function(e,t,n){n!==this.store.geneQuery&&(this.store.geneQuery=n,this.store.oql.error=e.error)}},{key:"render",value:function(){var e=this;return r.createElement(c.b,{overflow:!0,padded:!0,className:a.a.GeneSetSelector},r.createElement(m.a,{className:"sectionLabel",secondaryComponent:r.createElement("a",{target:"_blank",className:a.a.learnOql,href:Object(We.u)()},r.createElement("strong",null,"Hint:")," Learn Onco Query Language (OQL)",r.createElement("br",null),"to write more powerful queries"," ",r.createElement("i",{className:"fa fa-external-link"}))},"Enter Genes:"),r.createElement(c.a,{overflow:!0},r.createElement(ne.default,{value:this.selectedGeneListOption,options:this.geneListOptions,onChange:function(t){return e.store.geneQuery=t?t.value:""}}),r.createElement(Ut.b,{focus:this.store.geneQueryErrorDisplayStatus,inputGeneQuery:this.store.geneQuery,validateInputGeneQuery:!0,location:Ut.a.DEFAULT,textBoxPrompt:"Enter HUGO Gene Symbols, Gene Aliases, or OQL",callback:this.handleOQLUpdate,error:this.store.submitError,messages:this.store.oqlMessages},this.customError),r.createElement(Zt,null),r.createElement(V.Modal,{className:U()("cbioportal-frontend",a.a.MutSigGeneSelectorWindow),show:this.store.showMutSigPopup,onHide:function(){return e.store.showMutSigPopup=!1}},r.createElement(V.Modal.Header,{closeButton:!0},r.createElement(V.Modal.Title,null,"Recently Mutated Genes")),r.createElement(V.Modal.Body,null,r.createElement(kt,{initialSelection:this.store.geneIds,data:this.store.mutSigForSingleStudy.result,onSelect:function(t){e.store.applyGeneSelection(t),e.store.showMutSigPopup=!1}}))),r.createElement(V.Modal,{className:U()("cbioportal-frontend",a.a.GisticGeneSelectorWindow),show:this.store.showGisticPopup,onHide:function(){return e.store.showGisticPopup=!1}},r.createElement(V.Modal.Header,{closeButton:!0},r.createElement(V.Modal.Title,null,"Recurrent Copy Number Alterations (Gistic)")),r.createElement(V.Modal.Body,null,r.createElement(Ft,{initialSelection:this.store.geneIds,data:this.store.gisticForSingleStudy.result,onSelect:function(t){e.store.applyGeneSelection(t),e.store.showGisticPopup=!1}})))))}},{key:"selectedGeneListOption",get:function(){var e=this,t=this.geneListOptions.find(function(t){return t.value==e.store.geneQuery});return t?t.value:""}},{key:"geneListOptions",get:function(){var e=F;if(y.b.serverConfig.query_sets_of_genes){var t=y.a.parseQuerySetsOfGenes(y.b.serverConfig.query_sets_of_genes);t&&(e=t)}return[{label:"User-defined List",value:""}].concat($t(e.map(function(e){return{label:"".concat(e.id," (").concat(e.genes.length," genes)"),value:e.genes.join(" ")}})))}},{key:"customError",get:function(){return this.store.isQueryLimitReached?r.createElement("div",{className:a.a.geneCount},r.createElement("div",{className:"",title:"Please limit your queries to ".concat(this.store.geneLimit," genes or fewer.")},r.createElement(d.a,{className:a.a.icon,name:"exclamation-circle"}),r.createElement(Jt.a,{sampleCount:this.store.approxSampleCount,queryProductLimit:y.b.serverConfig.query_product_limit,email:y.b.serverConfig.skin_email_contact}))):null}}])&&en(n.prototype,o),i&&en(n,i),t}();an([B.computed],ln.prototype,"selectedGeneListOption",null),an([B.computed],ln.prototype,"geneListOptions",null),an([B.action.bound],ln.prototype,"handleOQLUpdate",null),an([B.computed],ln.prototype,"customError",null);var sn,cn=ln=an([l.observer],ln),un=n(353);!function(e){e.custom="-1",e.mutation_cna="w_mut_cna",e.mutation="w_mut",e.cna="w_cna",e.all="all"}(sn||(sn={}));var pn=[{name:"All",description:"All cases in the selected cohorts",value:sn.all,isdefault:!1},{name:"Cases with mutations data",description:"All cases with mutations data",value:sn.mutation,isdefault:!1},{name:"Cases with copy number alterations data",description:"All cases with copy number alterations data",value:sn.cna,isdefault:!1},{name:"Cases with both mutations and copy number alterations data",description:"All cases with both mutations and copy number alterations data",value:sn.mutation_cna,isdefault:!1},{name:"User-defined Case List",description:"Specify your own case list",value:sn.custom,isdefault:!0}];function dn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fn(e){return(fn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mn(e,t){return(mn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yn(e){return(yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var bn=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":yn(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};function gn(e,t){return u.includes(e.textLabel.toLowerCase(),t.toLowerCase())}var vn=function(e){function t(e){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,i=fn(t).call(this,e),n=!i||"object"!==yn(i)&&"function"!=typeof i?hn(o):i,Object.defineProperty(hn(n),"isQueryModified",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(hn(n),"CaseIdsModeRadio",{enumerable:!0,configurable:!0,writable:!0,value:Object(l.observer)(function(e){return r.createElement("label",null,r.createElement("input",{type:"radio",checked:n.store.caseIdsMode==e.state,onChange:function(t){t.currentTarget.checked&&(n.store.caseIdsMode=e.state)}}),e.label)})}),Object(B.makeObservable)(hn(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mn(e,t)}(t,f["d"]),n=t,(o=[{key:"render",value:function(){var e=this;return!this.isQueryModified&&this.props.modifyQueryParams&&this.modifyQuery(),this.store.selectableSelectedStudyIds.length?r.createElement(c.b,{padded:!0,overflow:!0,className:a.a.CaseSetSelector,"data-test":"CaseSetSelector"},r.createElement("div",null,r.createElement(m.a,{className:"sectionLabel",secondaryComponent:r.createElement("a",{href:Object(We.A)(this.store.selectableSelectedStudyIds),target:"_blank"},"To build your own case set,",r.createElement("br",null),"try out our enhanced Study View."),promises:[this.store.sampleLists,this.store.asyncCustomCaseSet,this.store.profiledSamplesCount]},"Select Patient/Case Set:")),r.createElement("div",null,r.createElement(ne.default,{value:this.store.selectedSampleListId,options:this.caseSetOptions,filterOption:gn,onChange:function(t){return e.store.selectedSampleListId=t?t.value:void 0},"data-test":"caseSetSelector"}),!(this.store.selectedSampleListId!==f.a)&&r.createElement(c.a,{padded:!0},r.createElement("div",{className:a.a.radioRow},r.createElement(c.b,{padded:!0},r.createElement(this.CaseIdsModeRadio,{label:"By sample ID",state:"sample"}),r.createElement(this.CaseIdsModeRadio,{label:"By patient ID",state:"patient"}))),r.createElement("span",null,"Enter case IDs below:"),r.createElement("textarea",{title:"Enter case IDs",rows:6,cols:80,value:this.store.caseIds,onChange:function(t){return e.store.caseIds=t.currentTarget.value},"data-test":"CustomCaseSetInput"})))):null}},{key:"modifyQuery",value:function(){this.store.selectedSampleListId=this.props.modifyQueryParams.selectedSampleListId,this.store.caseIds=this.props.modifyQueryParams.selectedSampleIds.join("\n"),this.store.caseIdsMode=this.props.modifyQueryParams.caseIdsMode,this.isQueryModified=!0}},{key:"caseSetOptions",get:function(){var e,t,n,o=this.store.sampleLists.result.map(function(e){return{label:r.createElement(h.i,{placement:"right",mouseEnterDelay:0,overlay:r.createElement("div",{className:a.a.tooltip},e.description)},r.createElement("span",null,"".concat(e.name," (").concat(e.sampleCount,")"))),value:e.sampleListId,textLabel:e.name}}),i=(e=this.store.isVirtualStudySelected,t=this.store.isMultipleNonVirtualStudiesSelected,n=this.store.profiledSamplesCount.result,u.reduce(pn,function(r,o){if(o.isdefault)r.push(o);else if(t&&!e){var i=n[o.value];i>0&&r.push(Object.assign({},o,{name:"".concat(o.name," (").concat(i,")")}))}else if(e&&o.value===sn.all){var a=n[o.value];a>0&&r.push(Object.assign({},o,{name:"".concat(o.name," (").concat(a,")")}))}return r},[])).map(function(e){return{value:e.value,label:r.createElement(h.i,{placement:"right",mouseEnterDelay:0,overlay:r.createElement("div",{className:a.a.tooltip},e.description)},r.createElement("span",null,e.name)),textLabel:e.name}});return o.concat(i)}}])&&dn(n.prototype,o),i&&dn(n,i),t}();bn([B.computed],vn.prototype,"caseSetOptions",null),bn([B.action],vn.prototype,"modifyQuery",null);var _n=vn=bn([l.observer],vn);function wn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function On(e,t){return!t||"object"!==kn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Sn(e){return(Sn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function En(e,t){return(En=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kn(e){return(kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Cn=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":kn(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Pn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),On(this,Sn(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&En(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return this.props.ids.length>0?r.createElement("div",{className:"alert alert-danger","data-test":"unkown-study-warning",style:{marginBottom:0}},r.createElement("i",{className:"fa fa-exclamation-triangle"})," The following studies do not exist or you do not have access to them:",r.createElement("ul",{style:{margin:"10px 0"}},this.props.ids.map(function(e){return r.createElement("li",null,e)})),"Please resubmit your query below."):null}}])&&wn(n.prototype,o),i&&wn(n,i),t}(),Tn=Pn=Cn([l.observer],Pn),xn=n(12),jn=n(1083),An=n(914),In=n(109);function Mn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dn(e){return(Dn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rn(e,t){return(Rn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ln(e){return(Ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Gn=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Ln(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Vn=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=Dn(t).call(this,e))||"object"!==Ln(o)&&"function"!=typeof o?Nn(r):o,Object.defineProperty(Nn(n),"_showQueryControls",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object(B.makeObservable)(Nn(n)),n.handleSubmit=n.handleSubmit.bind(Nn(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rn(e,t)}(t,r["Component"]),n=t,(o=[{key:"handleSubmit",value:function(){this.store.submit(),this.props.onSubmit&&this.props.onSubmit()}},{key:"toggleQueryControls",value:function(){q()(document).scrollTop(0),this._showQueryControls=!this._showQueryControls}},{key:"render",value:function(){var e=this;return r.createElement(c.a,{padded:!0,overflow:!0,className:U()("small",a.a.QueryContainer,{forkedMode:this.props.forkedMode})},this.props.showAlerts&&this.store.genes.isComplete&&this.store.genes.result.suggestions.length>0&&r.createElement("div",{className:"alert alert-danger","data-test":"invalidQueryAlert",style:{marginBottom:0}},r.createElement("i",{className:"fa fa-exclamation-triangle"})," Your query has invalid or out-dated gene symbols. Please correct below."),this.store.unknownStudyIds.isComplete&&r.createElement(Tn,{ids:this.store.unknownStudyIds.result}),this.store.forDownloadTab&&r.createElement("div",{className:"alert alert-danger",role:"alert"},"The Download interface has been removed. Enhanced download functionality is now available through the Query interface. Run a query with your gene(s) of interest and use the Download tab to download all available data types."),!this.store.forDownloadTab&&r.createElement(Xe.If,{condition:0===this.store.defaultSelectedIds.size||this.studiesDataReady},r.createElement(Xe.Then,null,r.createElement(Xe.If,{condition:this.props.forkedMode&&this.showQueryControls},r.createElement(c.b,{className:a.a.StudySelection},r.createElement(m.a,{className:"sectionLabel"},"Selected Studies:"," ",r.createElement("button",{"data-test":"modifyStudySelectionButton",className:"btn btn-default btn-xs",onClick:this.toggleQueryControls},"Modify")),r.createElement("div",{style:{marginLeft:8}},this.selectedStudySummary))),this.getWrappedCancerStudySelector,r.createElement(Xe.If,{condition:this.showQueryControls},r.createElement(r.Fragment,null,this.store.physicalStudyIdsInSelection.length>1?r.createElement(L,null):r.createElement(C,null),this.store.selectableSelectedStudyIds.length>0&&r.createElement(_n,{modifyQueryParams:this.props.modifyQueryParams}),r.createElement(cn,null),!!this.store.isGenesetProfileSelected&&r.createElement(Ue,null),!!this.store.forDownloadTab&&r.createElement("span",{className:a.a.downloadSubmitExplanation},"Clicking submit will generate a tab-delimited file containing your requested data."),!!this.store.forDownloadTab&&r.createElement(ve.a,{labelProps:{className:a.a.transposeDataMatrix},checked:this.store.transposeDataMatrix,onChange:function(t){return e.store.transposeDataMatrix=t.currentTarget.checked}},"Transpose data matrix"),r.createElement(c.b,{overflow:!0,padded:!0,className:U()(a.a.submitRow,"posRelative")},r.createElement("button",{style:{paddingLeft:50,paddingRight:50,marginRight:50},disabled:!this.store.submitEnabled,className:"btn btn-primary btn-lg",onClick:function(){return e.handleSubmit()},"data-test":"queryButton"},this.store.forDownloadTab?"Download":"Submit Query")))),r.createElement(Xe.If,{condition:!this.showQueryControls},r.createElement(c.b,{className:a.a.forkedButtons},r.createElement("div",{style:{width:330,textAlign:"right",marginRight:20}},r.createElement(An.a,{store:this.store})),r.createElement(h.i,{placement:"top",trigger:["hover"],destroyTooltipOnHide:!0,mouseEnterDelay:0,mouseLeaveDelay:0,disabled:this.store.selectableSelectedStudies.length>0,overlay:this.queryByGeneTooltipMessage},r.createElement("a",{"data-test":"queryByGeneButton",onClick:function(){return e.store.hasSelectedStudies&&e.toggleQueryControls()},"data-event":Object(In.e)({action:"clickQueryByGeneButton",label:"",category:"homePage"}),className:U()("btn btn-primary btn-lg",{disabled:!this.store.hasSelectedStudies})},"Query By Gene")),"OR",r.createElement(h.i,{placement:"top",trigger:["hover"],destroyTooltipOnHide:!0,mouseEnterDelay:0,mouseLeaveDelay:0,disabled:!this.exploreCohortsButtonDisabled,overlay:this.exploreCohortsButtonTooltipMessage},r.createElement("a",{onClick:function(){return!e.exploreCohortsButtonDisabled&&e.store.openSummary()},"data-event":Object(In.e)({action:"clickExploreStudiesButton",label:"",category:"homePage"}),className:U()("btn btn-primary btn-lg",{disabled:this.exploreCohortsButtonDisabled})},r.createElement("i",{style:{marginTop:5},className:"ci ci-pie-chart"})," ","Explore Selected Studies"))))),r.createElement(Xe.Else,null,r.createElement(P.a,{isLoading:!0,center:!0,size:"big"}))))}},{key:"store",get:function(){return this.props.store}},{key:"studiesDataReady",get:function(){return this.store.studiesHaveChangedSinceInitialization||this.store.selectableStudiesSet.isComplete&&this.store.initiallySelected.profileIds&&this.store.cancerTypes.isComplete&&this.store.cancerStudies.isComplete&&this.store.profiledSamplesCount.isComplete}},{key:"showQueryControls",get:function(){return!1===this.props.forkedMode||this._showQueryControls}},{key:"selectedStudySummary",get:function(){var e=this,t=null;if(this.store.selectableSelectedStudies.length>4){t=r.createElement("span",{className:"inlineBlock"},r.createElement(h.i,{overlay:function(){return e.store.selectableSelectedStudies.slice(4).map(function(e){return r.createElement("div",null,e.name)})}},r.createElement("a",null,"and"," ",this.store.selectableSelectedStudies.length-4," ","more")))}return r.createElement("span",{className:"inlineBlock"},this.store.selectableSelectedStudies.slice(0,4).reduce(function(e,t,n,o){return e.push(r.createElement("span",{className:a.a.studyName},t.name)),e},[]),t,t&&r.createElement("span",null," "),"(",r.createElement("b",null,this.store.profiledSamplesCount.result.all)," ",1===this.store.profiledSamplesCount.result.all?"sample":"total samples",")")}},{key:"getWrappedCancerStudySelector",get:function(){var e=r.createElement(s.a,{queryStore:this.store,forkedMode:this.props.forkedMode});return this.props.forkedMode?r.createElement("div",{style:{marginTop:0}},r.createElement(jn.Fade,{duration:500,collapse:!1,className:"monkeys",unmountOnExit:!0,when:!this.showQueryControls},e)):e}},{key:"studyLimitedReached",get:function(){return this.store.selectableSelectedStudyIds.length>50}},{key:"exploreCohortsButtonDisabled",get:function(){return this.studyLimitedReached||!this.store.hasSelectedStudies}},{key:"exploreCohortsButtonTooltipMessage",get:function(){return 0===this.store.selectableSelectedStudyIds.length?"Please select at least one study above":this.studyLimitedReached?"Too many studies selected for study summary (limit: 50)":"Open summary of selected studies"}},{key:"queryByGeneTooltipMessage",get:function(){return 0===this.store.selectableSelectedStudies.length?"Please select at least one study above":"Continue to query configuration"}}])&&Mn(n.prototype,o),i&&Mn(n,i),t}();Gn([B.computed],Vn.prototype,"studiesDataReady",null),Gn([B.observable],Vn.prototype,"_showQueryControls",void 0),Gn([B.computed],Vn.prototype,"showQueryControls",null),Gn([B.computed],Vn.prototype,"selectedStudySummary",null),Gn([B.computed],Vn.prototype,"getWrappedCancerStudySelector",null),Gn([xn.default],Vn.prototype,"toggleQueryControls",null),Gn([B.computed],Vn.prototype,"studyLimitedReached",null),Gn([B.computed],Vn.prototype,"exploreCohortsButtonDisabled",null),Gn([B.computed],Vn.prototype,"exploreCohortsButtonTooltipMessage",null),Gn([B.computed],Vn.prototype,"queryByGeneTooltipMessage",null);var Bn,Fn=Vn=Gn([Object(un.b)(f.c),l.observer],Vn),Hn=n(804),Un=n(120),Wn=n(13);!function(e){e.STUDY="STUDY",e.STUDY_COUNT="studies",e.GENE="GENE",e.GENE_COUNT="genes",e.PATIENT="PATIENT",e.PATIENT_COUNT="patients",e.SAMPLE="SAMPLE",e.SAMPLE_COUNT="samples"}(Bn||(Bn={}));n(1093);var qn=n(827),zn=n(1094),Kn=n(141),Qn=n.n(Kn),Yn=n(76),Xn=n(208);function Zn(){return(Zn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Jn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $n(e){return($n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function er(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tr(e,t){return(tr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nr(e){return(nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var rr,or=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":nr(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ir=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function l(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,l)}s((r=r.apply(e,t||[])).next())})},ar=20,lr=3;!function(e){e[e.SESSION=0]="SESSION",e[e.STUDY_LIST=1]="STUDY_LIST"}(rr||(rr={}));var sr=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=$n(t).call(this,e),n=!o||"object"!==nr(o)&&"function"!=typeof o?er(r):o,Object.defineProperty(er(n),"select",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(er(n),"studyPageMultiplier",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(er(n),"genePageMultiplier",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(er(n),"patientPageMultiplier",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(er(n),"samplePageMultiplier",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(er(n),"inputValue",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(er(n),"isFocusing",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(er(n),"isLoading",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(er(n),"geneStudyQueryVirtualStudy",{enumerable:!0,configurable:!0,writable:!0,value:Object(h.vb)(function(){return ir(er(n),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=y.b.serverConfig.default_cross_cancer_study_session_id,!y.a.sessionServiceIsEnabled()||!t){e.next=14;break}return e.prev=2,e.next=5,Yn.a.getVirtualStudy(t);case 5:return n=e.sent,e.abrupt("return",n);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:e.next=15;break;case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}},e,null,[[2,9]])}))},null)}),Object.defineProperty(er(n),"geneStudyQuery",{enumerable:!0,configurable:!0,writable:!0,value:Object(h.vb)({await:function(){return[n.geneStudyQueryVirtualStudy]},invoke:function(){return n.geneStudyQueryVirtualStudy.result?Promise.resolve({type:rr.SESSION,query:n.geneStudyQueryVirtualStudy.result.id,name:n.geneStudyQueryVirtualStudy.result.data.name}):Promise.resolve({type:rr.STUDY_LIST,query:y.b.serverConfig.default_cross_cancer_study_list,name:y.b.serverConfig.default_cross_cancer_study_list_name})}})}),Object.defineProperty(er(n),"options",{enumerable:!0,configurable:!0,writable:!0,value:Object(h.vb)({await:function(){return[n.geneStudyQuery]},invoke:function(){var e=n.inputValue,t=n.geneStudyQuery.result;return e.length>0?Promise.all([Wn.a.getAllStudiesUsingGETWithHttpInfo({keyword:e,pageSize:lr+ar*n.studyPageMultiplier}),Wn.a.getAllStudiesUsingGETWithHttpInfo({keyword:e,projection:"META"}),Wn.a.getAllGenesUsingGETWithHttpInfo({keyword:e,pageSize:lr+ar*n.genePageMultiplier}),Wn.a.getAllGenesUsingGETWithHttpInfo({keyword:e,projection:"META"}),Wn.a.getAllPatientsUsingGETWithHttpInfo({keyword:e,pageSize:lr+ar*n.patientPageMultiplier,projection:"DETAILED"}),Wn.a.getAllPatientsUsingGETWithHttpInfo({keyword:e,projection:"META"}),Wn.a.getSamplesByKeywordUsingGETWithHttpInfo({keyword:e,pageSize:lr+ar*n.samplePageMultiplier}),Wn.a.getSamplesByKeywordUsingGETWithHttpInfo({keyword:e,projection:"META"}),Object(qn.a)(0)]).then(function(r){return ir(er(n),void 0,void 0,regeneratorRuntime.mark(function n(){var o,i,a,l,s,c,u,p,d,f,h,m=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(o=r[0].body.map(this.studyToOption),i={value:parseInt(r[1].headers["total-count"])-o.length,type:Bn.STUDY_COUNT},a=r[2].body.map(this.geneToOption),l={value:parseInt(r[3].headers["total-count"])-a.length,type:Bn.GENE_COUNT},s=r[4].body.map(this.patientToOption),c={value:parseInt(r[5].headers["total-count"])-s.length,type:Bn.PATIENT_COUNT},u=r[6].body.map(this.sampleToOption),p={value:parseInt(r[7].headers["total-count"])-u.length,type:Bn.SAMPLE_COUNT},!(a.length+s.length<2*lr&&i.value>0)){n.next=13;break}return d=2*lr-(a.length+s.length),n.next=12,Wn.a.getAllStudiesUsingGETWithHttpInfo({keyword:e,pageSize:d+lr+ar*this.studyPageMultiplier}).then(function(e){o=e.body.map(m.studyToOption)});case 12:i.value=i.value-d;case 13:return f=[],(h=[]).push({label:"Studies",options:o,groupData:i,instruction:"Click on a study to open its summary"}),i.value>0&&(o.push(i),f.push(i)),t&&(h.push({label:"Genes",options:a,groupData:l,instruction:"Click on a gene to query it across ".concat(t.name)}),l.value>0&&(a.push(l),f.push(l))),h.push({label:"Patients",options:s,groupData:c,instruction:"Click on a patient to see a summary"}),c.value>0&&(s.push(c),f.push(c)),h.push({label:"Samples",options:u,groupData:p,instruction:"Click on a sample to open its summary"}),p.value>0&&(u.push(p),f.push(p)),n.abrupt("return",h);case 23:case"end":return n.stop()}},n,this)}))}):Promise.resolve([])}})}),Object(B.makeObservable)(er(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tr(e,t)}(t,r["Component"]),n=t,(o=[{key:"selectRef",value:function(e){this.select=e}},{key:"studyToOption",value:function(e,t){return{value:e.studyId,type:Bn.STUDY,studyId:e.studyId,name:e.name,allSampleCount:e.allSampleCount,index:t}}},{key:"geneToOption",value:function(e,t){return{value:e.entrezGeneId,type:Bn.GENE,hugoGeneSymbol:e.hugoGeneSymbol,cytoband:e.cytoband,index:t}}},{key:"patientToOption",value:function(e,t){return{value:e.uniquePatientKey,type:Bn.PATIENT,studyId:e.studyId,patientId:e.patientId,studyName:e.cancerStudy.name,index:t}}},{key:"sampleToOption",value:function(e,t){return{value:e.sampleId,type:Bn.SAMPLE,studyId:e.studyId,studyName:this.studies.get(e.studyId),patientId:e.patientId,sampleType:e.sampleType,index:t}}},{key:"handleChange",value:function(e){var t,n;if(e.type===Bn.STUDY)t={id:e.studyId},n=Xn.a.Study,this.trackClick(Xn.a.Study,this.inputValue);else if(e.type===Bn.GENE){var r=this.geneStudyQuery.isComplete&&this.geneStudyQuery.result.query;t={case_set_id:"all",gene_list:e.hugoGeneSymbol,cancer_study_list:r},n="results/cancerTypesSummary",this.trackClick("gene",this.inputValue)}else e.type===Bn.PATIENT?(t={studyId:e.studyId,caseId:e.patientId},n=Xn.a.Patient,this.trackClick(Xn.a.Patient,this.inputValue)):e.type===Bn.SAMPLE?(t={studyId:e.studyId,sampleId:e.value},n=Xn.a.Patient,this.trackClick("sample",this.inputValue)):e.type===Bn.STUDY_COUNT?this.studyPageMultiplier++:e.type===Bn.GENE_COUNT?this.genePageMultiplier++:e.type===Bn.PATIENT_COUNT?this.patientPageMultiplier++:e.type===Bn.SAMPLE_COUNT&&this.samplePageMultiplier++;n&&Object(h.eb)().routingStore.updateRoute(t,n)}},{key:"trackClick",value:function(e,t){Object(In.f)({category:"quickSearch",action:e,label:t})}},{key:"handleInputChange",value:function(e,t){var n=t.action;"set-value"!==n&&(e!=this.inputValue&&(this.studyPageMultiplier=0,this.genePageMultiplier=0,this.patientPageMultiplier=0,this.samplePageMultiplier=0),"input-change"===n&&(this.inputValue=e)),"input-blur"===n&&(this.isFocusing=!1)}},{key:"onFocus",value:function(){this.isFocusing=!0}},{key:"renderInput",value:function(e){return delete e.value,console.log(e),r.createElement("div",{className:"Select-input"},r.createElement("input",Zn({placeholder:"e.g. Lung, EGFR, TCGA-OR-A5J2"},e)))}},{key:"render",value:function(){return r.createElement("div",{onFocusCapture:this.onFocus},r.createElement(Un.default,{options:this.options.result||[],autoFocus:!0,onInputChange:this.handleInputChange,onChange:this.handleChange,components:{Group:ur,GroupHeading:pr},formatOptionLabel:dr,controlShouldRenderValue:!1,filterOption:!1,inputValue:this.inputValue,isLoading:this.options.isPending,placeholder:"e.g. Lung, EGFR, TCGA-OR-A5J2",noOptionsMessage:function(){return"No results"},blurInputOnSelect:!1,closeMenuOnSelect:!1,onSelectResetsInput:!1,menuIsOpen:this.menuIsOpen,maxMenuHeight:550,styles:{dropdownIndicator:function(){return{display:"none"}},control:function(e){return Object.assign(Object.assign({},e),{cursor:"text"})},option:function(e,t){return t.isSelected?Object.assign(Object.assign({},e),{backgroundColor:"inherit",color:"inherit",":hover":{backgroundColor:"#DEEBFF"}}):Object.assign({},e)}}}),r.createElement("p",{style:{fontSize:"x-small",textAlign:"center",paddingTop:15}},"We would love to hear what you think: ",r.createElement("a",{href:"mailto:cbioportal@googlegroups.com"},"cbioportal@googlegroups.com")))}},{key:"menuIsOpen",get:function(){return this.isFocusing&&this.inputValue.length>0}},{key:"studies",get:function(){return this.props.studies.reduce(function(e,t){return e.set(t.studyId,t.name),e},new Map)}}])&&Jn(n.prototype,o),i&&Jn(n,i),t}();or([B.observable],sr.prototype,"studyPageMultiplier",void 0),or([B.observable],sr.prototype,"genePageMultiplier",void 0),or([B.observable],sr.prototype,"patientPageMultiplier",void 0),or([B.observable],sr.prototype,"samplePageMultiplier",void 0),or([B.observable],sr.prototype,"inputValue",void 0),or([B.observable],sr.prototype,"isFocusing",void 0),or([B.observable],sr.prototype,"isLoading",void 0),or([B.computed],sr.prototype,"menuIsOpen",null),or([B.computed],sr.prototype,"studies",null),or([xn.default],sr.prototype,"selectRef",null),or([xn.default],sr.prototype,"sampleToOption",null),or([B.action.bound],sr.prototype,"handleChange",null),or([B.action.bound],sr.prototype,"handleInputChange",null),or([B.action.bound],sr.prototype,"onFocus",null),or([xn.default],sr.prototype,"renderInput",null);var cr=sr=or([l.observer],sr),ur=function(e){var t=e.data.groupData;t.value,Qn()(t.type,t.value),t.value<ar&&t.value;return r.createElement("div",{className:zn.optionGroup},r.createElement("div",{className:zn.groupHeader},e.data.instruction),r.createElement(Un.components.Group,e))},pr=function(e){return null};function dr(e){var t,n,o;return e.type===Bn.STUDY?(t=e.name,n="primary",o=e.allSampleCount+" samples","Select a study to open its summary"):e.type===Bn.GENE?(t=e.hugoGeneSymbol,n="success",o=e.cytoband||"-","Select a gene to query it across all TCGA PanCancer Atlas studies"):e.type===Bn.PATIENT?(t=e.patientId,n="danger",o=e.studyName,"Select a patient to see a summary"):e.type===Bn.SAMPLE?(t=e.value,n="warning",o="".concat(e.studyName?e.studyName:e.studyId),"Select a sample to open its summary"):t=e.value+" more "+Qn()(e.type,e.value)+" (click to load "+(e.value<ar?e.value:ar)+" more)",r.createElement("div",{className:zn.optionWrapper},n&&r.createElement("div",{className:zn.optionLabelWrapper},r.createElement(V.Label,{bsStyle:n},e.type)),r.createElement("div",null,r.createElement("div",null,r.createElement("strong",null,t)),o&&r.createElement("small",null,o)))}function fr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hr(e){return(hr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yr(e,t){return(yr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function br(e){return(br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var gr=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":br(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},vr="quickSearch",_r="defaultHomePageTab",wr=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=hr(t).call(this,e))||"object"!==br(o)&&"function"!=typeof o?mr(r):o,Object.defineProperty(mr(n),"store",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(mr(n),"activeTabId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object(B.makeObservable)(mr(n)),e.showQuickSearchTab&&Object(h.eb)().localStorage.getItem(_r)===vr&&(n.activeTabId=Object(h.eb)().localStorage.getItem(_r)),n.store=e.getQueryStore(),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yr(e,t)}(t,r["Component"]),n=t,(o=[{key:"setDefaultTab",value:function(e){this.props.showQuickSearchTab&&(Object(h.eb)().localStorage.defaultHomePageTab=e===vr?vr:void 0)}},{key:"trackQuickSearch",value:function(){Object(In.f)({category:"quickSearch",action:"quickSearchLoad"})}},{key:"onSelectTab",value:function(e){this.store.forDownloadTab="download"===e,this.activeTabId=e}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:a.a.QueryAndDownloadTabs},r.createElement(Xe.If,{condition:y.b.serverConfig.skin_citation_rule_text},r.createElement("div",{className:"citationRule",dangerouslySetInnerHTML:{__html:y.b.serverConfig.skin_citation_rule_text}})),r.createElement(Hn.b,{activeTabId:this.activeTabId,onTabClick:this.onSelectTab,className:"mainTabs"},r.createElement(Hn.a,{id:"advanced",linkText:"Query",onTabDidMount:function(){return e.setDefaultTab(void 0)}},r.createElement(Fn,{forkedMode:this.props.forkedMode,onSubmit:this.props.onSubmit,store:this.store,modifyQueryParams:this.props.modifyQueryParams,showAlerts:this.props.showAlerts})),r.createElement(Hn.a,{id:vr,linkText:r.createElement("span",null,"Quick Search"," ",r.createElement("strong",{className:"beta-text"},"Beta!")),hide:!this.props.showQuickSearchTab,onTabDidMount:function(){e.setDefaultTab(vr),e.trackQuickSearch()}},r.createElement("div",null,this.store.cancerStudies.isComplete&&r.createElement(cr,{studies:this.store.cancerStudies.result}))),r.createElement(Hn.a,{id:"download",linkText:"Download",hide:!this.props.showDownloadTab,onTabDidMount:function(){return e.setDefaultTab(void 0)}},r.createElement(Fn,{forkedMode:!1,onSubmit:this.props.onSubmit,store:this.store,showAlerts:this.props.showAlerts}))))}},{key:"quickSearchDefaulted",get:function(){return Object(h.eb)().localStorage.getItem(_r)===vr}}])&&fr(n.prototype,o),i&&fr(n,i),t}();Object.defineProperty(wr,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{forkedMode:!0}}),gr([B.observable.ref],wr.prototype,"store",void 0),gr([B.observable.ref],wr.prototype,"activeTabId",void 0),gr([xn.default],wr.prototype,"setDefaultTab",null),gr([B.action.bound],wr.prototype,"onSelectTab",null),wr=gr([l.observer],wr);t.a=wr},987:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return l});var r=n(988),o=n.n(r),i=n(3),a=n(2);function l(t,n,r,l){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n.dependencyPromise=n.dependencyPromise||function(t){if(t.pathsToCSS&&t.pathsToCSS.forEach(function(t){e("head").append('<link rel="stylesheet" href='.concat(t,' type="text/css" />'))}),t.pathsToJs){var n=[];return t.pathsToJs.forEach(function(e){var t=new Promise(function(t,n){o()(e,function(e){e?n(e):t()})});n.push(t)}),Promise.all(n)}}(n);n.dependencyPromise.then(function(){!function(e){Object(i.eb)()[e.mountCallbackName]?Object(i.eb)()[e.mountCallbackName](t,e,r,l,a.autorun,s):alert("Callback for tab ".concat(e.title," not found"))}(n)})}}).call(this,n(26))},988:function(e,t,n){var r,o,i;r={},o=0,i=function(e){var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)},e.exports=function(e,t,n){var a;t&&"function"!=typeof t&&(n=t.context||n,a=t.setup,t=t.callback);var l,s,c=document.createElement("script"),u=!1,p=function(){u||(u=!0,s(),t&&t.call(n,l))},d=function(){l=new Error(e||"EMPTY"),p()};if(!c.readyState||"async"in c)s=function(){c.onload=c.onerror=null},c.onerror=d,c.onload=p,c.async=!0,c.charset="utf-8",a&&a.call(n,c),c.src=e,i(c);else{var f=o++,h={loaded:!0,complete:!0},m=!1;s=function(){c.onreadystatechange=c.onerror=null,r[f]=void 0},c.onreadystatechange=function(){var e=c.readyState;if(!l){if(!m&&h[e]&&(m=!0,i(c)),"loaded"===e&&(c.children,"loading"===c.readyState))return d();"complete"===c.readyState&&p()}},c.onerror=d,r[f]=c,a&&a.call(n,c),c.src=e}}},989:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return p});var r=n(867),o=n(1),i=n.n(o),a=n(336),l=n(990),s=n(991),c=n(10),u=n(50);function p(e,t,n,o,a){var l=function(e,t){return function(e,t){if(m(e.geneticTracks||[],t.geneticTracks||[]))return!0;return w(e)!==w(t)||O(e)!==O(t)}(e,t)||function(e,t){if(m(e.clinicalTracks||[],t.clinicalTracks||[]))return!0}(e,t)||function(e,t){if(m(e.heatmapTracks,t.heatmapTracks||[])||m(e.genesetHeatmapTracks,t.genesetHeatmapTracks||[]))return!0}(e,t)}(e,t),s=function(e,t){return!e.suppressRendering&&(v(e,t)||h(y(e),y(t))>1)}(e,t);s&&d(e,n),l&&n.keepSorted(!1),function(e,t,n){e.suppressRendering&&!t.suppressRendering&&d(e,n)}(e,t,n),function(e,t,n){e.width!==t.width&&n.setWidth(e.width)}(e,t,n),function(e,t,n){i.a.isEqual(e.columnLabels,t.columnLabels)||n.setColumnLabels(e.columnLabels||{})}(e,t,n),function(e,t,n){e.showWhitespaceBetweenColumns!==t.showWhitespaceBetweenColumns&&n.setCellPaddingOn(!!e.showWhitespaceBetweenColumns)}(e,t,n),function(e,t,n){e.showMinimap!==t.showMinimap&&n.setMinimapVisible(!!e.showMinimap)}(e,t,n),function(e,t,n){e.onMinimapClose&&e.onMinimapClose!==t.onMinimapClose&&n.onMinimapClose(e.onMinimapClose)}(e,t,n),function(e,t,n){e.showTrackLabels!==t.showTrackLabels&&n.setShowTrackLabels(!!e.showTrackLabels)}(e,t,n),function(e,t,n){e.showSublabels!==t.showSublabels&&n.setShowTrackSublabels(!!e.showSublabels)}(e,t,n),function(e,t,n){if(!i.a.isEqual(e.heatmapTrackHeaders,t.heatmapTrackHeaders)){var r=e.heatmapTrackHeaders||{},o=t.heatmapTrackHeaders||{},a=Object.keys(r).map(function(e){return parseInt(e,10)}),l=Object.keys(o).map(function(e){return parseInt(e,10)}),s=!0,c=!1,u=void 0;try{for(var p,d=a[Symbol.iterator]();!(s=(p=d.next()).done);s=!0){var f=p.value;n.setTrackGroupHeader(f,r[f])}}catch(e){c=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(c)throw u}}var h=!0,m=!1,y=void 0;try{for(var b,g=l[Symbol.iterator]();!(h=(b=g.next()).done);h=!0){var v=b.value;v in r||n.setTrackGroupHeader(v,void 0)}}catch(e){m=!0,y=e}finally{try{h||null==g.return||g.return()}finally{if(m)throw y}}}}(e,t,n),function(e,t,n,o,a){var l={genetic:void 0,genesetHeatmap:void 0,heatmap:void 0,heatmap01:void 0,genericAssay:{}},s=o();t.geneticTracks&&t.geneticTracks.length&&!v(e,t)&&(l.genetic=s[t.geneticTracks[0].key]);t.genesetHeatmapTracks&&t.genesetHeatmapTracks.length&&(l.genesetHeatmap=s[t.genesetHeatmapTracks[0].key]);if(t.heatmapTracks&&t.heatmapTracks.length){var u,p,d=!0,f=!1,h=void 0;try{for(var m,y=t.heatmapTracks[Symbol.iterator]();!(d=(m=y.next()).done);d=!0){var b=m.value;if(void 0===u&&b.molecularAlterationType===c.a.METHYLATION?u=s[b.key]:void 0===p&&b.molecularAlterationType!==c.a.METHYLATION&&b.molecularAlterationType!==c.a.GENERIC_ASSAY&&(p=s[b.key]),void 0!==u&&void 0!==p)break}}catch(e){f=!0,h=e}finally{try{d||null==y.return||y.return()}finally{if(f)throw h}}l.heatmap=p,l.heatmap01=u}else if(t.genesetHeatmapTracks){var g=!0,_=!1,w=void 0;try{for(var O,S=t.genesetHeatmapTracks[Symbol.iterator]();!(g=(O=S.next()).done);g=!0){var T=O.value;if(T.expansionTrackList&&T.expansionTrackList.length){l.heatmap=s[T.expansionTrackList[0].key];break}}}catch(e){_=!0,w=e}finally{try{g||null==S.return||S.return()}finally{if(_)throw w}}}l.genericAssay=i.a.chain(t.heatmapTracks).filter(function(e){return e.molecularAlterationType===c.a.GENERIC_ASSAY}).groupBy(function(e){return e.molecularProfileId}).mapValues(function(e){return i.a.last(e)}).mapValues(function(e){return s[e.key]}).value();var x=i.a.chain(e.heatmapTracks).filter(function(e){return e.molecularAlterationType===c.a.GENERIC_ASSAY}).groupBy(function(e){return e.molecularProfileId}).mapValues(function(e){return i()(e).flatMap(function(e){return e.data}).filter(function(e){return!e.category}).map(function(e){return e.profile_data}).value()}).value(),j=i.a.mapValues(x,function(e){return i.a.max(e)}),A=i.a.mapValues(x,function(e){return i.a.min(e)}),I=i.a.keyBy(t.geneticTracks||[],function(e){return e.key}),M=!0,D=!1,N=void 0;try{for(var R,L=e.geneticTracks[Symbol.iterator]();!(M=(R=L.next()).done);M=!0){var G=R.value;E(G,I[G.key],o,a,n,e,t,l),delete I[G.key]}}catch(e){D=!0,N=e}finally{try{M||null==L.return||L.return()}finally{if(D)throw N}}var V=!0,B=!1,F=void 0;try{for(var H,U=(t.geneticTracks||[])[Symbol.iterator]();!(V=(H=U.next()).done);V=!0){var W=H.value;I.hasOwnProperty(W.key)&&E(void 0,I[W.key],o,a,n,e,t,l)}}catch(e){B=!0,F=e}finally{try{V||null==U.return||U.return()}finally{if(B)throw F}}!function(e,t,n,o){var a=i.a.keyBy(e.geneticTracks,"key"),l=i.a.keyBy(t.geneticTracks||[],"key"),s=(e.geneticTracksOrder||e.geneticTracks.map(function(e){return e.key})).filter(function(e){return e in a}),c=(t.geneticTracksOrder||(t.geneticTracks||[]).map(function(e){return e.key})).filter(function(e){return e in l});if(!i.a.isEqual(s,c)){var u=o();n.setTrackGroupOrder(r.b,s.map(function(e){return u[e]}))}}(e,t,n,o);var q=i.a.keyBy(t.clinicalTracks||[],function(e){return e.key}),z=!0,K=!1,Q=void 0;try{for(var Y,X=e.clinicalTracks[Symbol.iterator]();!(z=(Y=X.next()).done);z=!0){var Z=Y.value;k(Z,q[Z.key],o,n,e),delete q[Z.key]}}catch(e){K=!0,Q=e}finally{try{z||null==X.return||X.return()}finally{if(K)throw Q}}var J=!0,$=!1,ee=void 0;try{for(var te,ne=(t.clinicalTracks||[])[Symbol.iterator]();!(J=(te=ne.next()).done);J=!0){var re=te.value;q.hasOwnProperty(re.key)&&k(void 0,q[re.key],o,n,e)}}catch(e){$=!0,ee=e}finally{try{J||null==ne.return||ne.return()}finally{if($)throw ee}}var oe=i.a.keyBy(t.genesetHeatmapTracks||[],function(e){return e.key}),ie=!0,ae=!1,le=void 0;try{for(var se,ce=e.genesetHeatmapTracks[Symbol.iterator]();!(ie=(se=ce.next()).done);ie=!0){var ue=se.value;C(ue,oe[ue.key],o,n,e,l),delete oe[ue.key]}}catch(e){ae=!0,le=e}finally{try{ie||null==ce.return||ce.return()}finally{if(ae)throw le}}var pe=!0,de=!1,fe=void 0;try{for(var he,me=(t.genesetHeatmapTracks||[])[Symbol.iterator]();!(pe=(he=me.next()).done);pe=!0){var ye=he.value;oe.hasOwnProperty(ye.key)&&C(void 0,oe[ye.key],o,n,e,l)}}catch(e){de=!0,fe=e}finally{try{pe||null==me.return||me.return()}finally{if(de)throw fe}}var be=i.a.keyBy(t.heatmapTracks||[],function(e){return e.key}),ge=!0,ve=!1,_e=void 0;try{for(var we,Oe=e.heatmapTracks[Symbol.iterator]();!(ge=(we=Oe.next()).done);ge=!0){var Se=we.value;Se.maxProfileValue=j[Se.molecularProfileId],Se.minProfileValue=A[Se.molecularProfileId],P(Se,be[Se.key],o,function(){},n,e,{},l,void 0),delete be[Se.key]}}catch(e){ve=!0,_e=e}finally{try{ge||null==Oe.return||Oe.return()}finally{if(ve)throw _e}}var Ee=!0,ke=!1,Ce=void 0;try{for(var Pe,Te=(t.heatmapTracks||[])[Symbol.iterator]();!(Ee=(Pe=Te.next()).done);Ee=!0){var xe=Pe.value;be.hasOwnProperty(xe.key)&&(xe.maxProfileValue=j[xe.molecularProfileId],xe.minProfileValue=A[xe.molecularProfileId],P(void 0,be[xe.key],o,function(){},n,e,{},l,void 0))}}catch(e){ke=!0,Ce=e}finally{try{Ee||null==Te.return||Te.return()}finally{if(ke)throw Ce}}!function(e,t,n,r){var o=i.a.keyBy(e.heatmapTracks,"key"),a=i.a.keyBy(t.heatmapTracks||[],"key");i.a.forEach(e.heatmapTracksOrder||{},function(e,l){var s=e.filter(function(e){return e in o}),c=((t.heatmapTracksOrder||{})[l]||[]).filter(function(e){return e in a});if(!i.a.isEqual(s,c)){var u=r();n.setTrackGroupOrder(parseInt(l,10),s.map(function(e){return u[e]}))}})}(e,t,n,o)}(e,t,n,o,a),function(e,t,n){var r=g(t),o=g(e);("order"===r.type&&"order"===o.type&&r.order!==o.order||!i.a.isEqual(r,o))&&n.setSortConfig(o)}(e,t,n),function(e,t,n){var o=i.a.sortBy(i.a.uniq((t.heatmapTracks||[]).concat(t.genesetHeatmapTracks||[]).map(function(e){return e.trackGroupIndex}))),a=i.a.sortBy(i.a.uniq(e.heatmapTracks.concat(e.genesetHeatmapTracks).map(function(e){return e.trackGroupIndex})));i.a.xor(a,o).length&&n.setTrackGroupSortPriority([r.a].concat(a).concat(r.b))}(e,t,n),function(e,t,n){e.hiddenIds!==t.hiddenIds&&n.hideIds(e.hiddenIds||[],!0)}(e,t,n),function(e,t,n){i.a.isEqual(e.horzZoomToFitIds,t.horzZoomToFitIds)||n.updateHorzZoomToFitIds(e.horzZoomToFitIds||[])}(e,t,n),function(e,t,n,r){var o=r(),i=e.clinicalTracks.map(function(e){return o[e.key]});e.showClinicalTrackLegends&&!t.showClinicalTrackLegends?n.showTrackLegends(i):!e.showClinicalTrackLegends&&t.showClinicalTrackLegends&&n.hideTrackLegends(i)}(e,t,n,o),function(e,t,n){e.highlightedIds!==t.highlightedIds&&n.setHighlightedIds(e.highlightedIds||[])}(e,t,n),function(e,t,n,r){if(e.highlightedTracks!==t.highlightedTracks){var o=e.highlightedTracks||[],i=r();n.setHighlightedTracks(o.map(function(e){return i[e]}))}}(e,t,n,o),function(e,t,n){!e.suppressRendering&&t.suppressRendering&&f(e,n)}(e,t,n),function(e,t,n){e.keepSorted&&!t.keepSorted?n.keepSorted(!0):!e.keepSorted&&t.keepSorted&&n.keepSorted(!1)}(e,t,n),l&&n.keepSorted(!!e.keepSorted),s&&f(e,n)}function d(e,t){t.suppressRendering(),e.onSuppressRendering&&e.onSuppressRendering()}function f(e,t){t.releaseRendering(e.onReleaseRendering)}function h(e,t){var n=i.a.keyBy(t,function(e){return e.key}),r=0,o=0,a=0,l=!0,s=!1,c=void 0;try{for(var u,p=e[Symbol.iterator]();!(l=(u=p.next()).done);l=!0){var d=u.value,f=n[d.key];f?(o+=1,f.data!==d.data&&(a+=1)):r+=1}}catch(e){s=!0,c=e}finally{try{l||null==p.return||p.return()}finally{if(s)throw c}}return r+(t.length-o)+a}function m(e,t){return e.length!==t.length||h(e,t)>0}function y(e){return(e.geneticTracks||[]).concat(e.genesetHeatmapTracks||[]).concat(e.clinicalTracks||[]).concat(e.heatmapTracks||[])}function b(e){return e.profile_data}function g(e){var t={},n=function(e){return e.sortConfig&&e.sortConfig.order}(e);return n?t={type:"order",order:n}:e.sortConfig&&void 0!==e.sortConfig.clusterHeatmapTrackGroupIndex&&(t={type:"cluster",track_group_index:e.sortConfig.clusterHeatmapTrackGroupIndex,clusterValueFn:b}),t}function v(e,t){return e.distinguishMutationType!==t.distinguishMutationType||e.distinguishDrivers!==t.distinguishDrivers||e.distinguishGermlineMutations!==t.distinguishGermlineMutations}function _(e,t,n,r){if(!e&&t){var o=n[t.key];return void 0!==o&&(r.getTracks().includes(o)&&r.removeTrack(o),delete n[t.key]),!0}return!1}function w(e){return e.distinguishMutationType&&e.sortConfig&&e.sortConfig.sortByMutationType}function O(e){return e.distinguishDrivers&&e.sortConfig&&e.sortConfig.sortByDrivers}function S(e,t,n,r,o,a,l,s,c){var u=t&&t.expansionTrackList?t.expansionTrackList:[],p=e&&e.expansionTrackList?e.expansionTrackList:[],d=i.a.keyBy(u,function(e){return e.key}),f=!0,h=!1,m=void 0;try{for(var y,b=p[Symbol.iterator]();!(f=(y=b.next()).done);f=!0){var g=y.value;c(g,d[g.key],n,r,o,a,l,s,e.key),delete d[g.key]}}catch(e){h=!0,m=e}finally{try{f||null==b.return||b.return()}finally{if(h)throw m}}var v=!0,_=!1,w=void 0;try{for(var O,S=u[Symbol.iterator]();!(v=(O=S.next()).done);v=!0){var E=O.value;d.hasOwnProperty(E.key)&&c(void 0,d[E.key],n,r,o,a,l,s)}}catch(e){_=!0,w=e}finally{try{v||null==S.return||S.return()}finally{if(_)throw w}}}function E(t,n,o,i,c,u,p,d,f){var h=o();if(!_(t,n,h,c))if(t&&!n){var m={rule_set_params:Object(a.f)(u.distinguishMutationType,u.distinguishDrivers,u.distinguishGermlineMutations),label:t.label,sublabel:t.sublabel,track_label_color:t.labelColor||void 0,target_group:r.b,sortCmpFn:Object(l.b)(w(u),O(u)),description:t.oql,data_id_key:"uid",data:t.data,tooltipFn:Object(s.c)(u.caseLinkOutInTooltips,i,u.alterationTypesInQuery),track_info:t.info,$track_info_tooltip_elt:t.infoTooltip?e("<div>"+t.infoTooltip+"</div>"):void 0,removeCallback:function(){delete o()[t.key],t.removeCallback&&t.removeCallback()},expandCallback:t.expansionCallback||void 0,expandButtonTextGetter:function(){return"Expand"},expansion_of:f?h[f]:void 0,custom_track_options:t.customOptions},y=c.addTracks([m])[0];h[t.key]=y,void 0!==d.genetic&&c.shareRuleSet(d.genetic,y),d.genetic=y}else if(t&&n){var b=h[t.key],g=w(u),k=O(u);g===w(p)&&k===O(p)||c.setTrackSortComparator(b,Object(l.b)(g,k)),t.data!==n.data&&c.setTrackData(b,t.data,"uid"),function(e,t){return e.caseLinkOutInTooltips!==t.caseLinkOutInTooltips||e.alterationTypesInQuery!==t.alterationTypesInQuery}(u,p)&&c.setTrackTooltipFn(b,Object(s.c)(u.caseLinkOutInTooltips,i,u.alterationTypesInQuery)),t.info!==n.info&&c.setTrackInfo(b,t.info),t.infoTooltip!==n.infoTooltip&&c.setTrackInfoTooltip(b,t.infoTooltip?e("<div>"+t.infoTooltip+"</div>"):void 0),v(u,p)&&(void 0!==d.genetic?c.shareRuleSet(d.genetic,b):c.setRuleSet(b,Object(a.f)(u.distinguishMutationType,u.distinguishDrivers,u.distinguishGermlineMutations))),d.genetic=b,t.expansionTrackList&&t.expansionTrackList.length>0?c.disableTrackExpansion(b):t.expansionCallback&&c.enableTrackExpansion(b),S(t,n,o,i,c,u,p,d,E)}}function k(e,t,n,o,i){var c=n();if(!_(e,t,c,o))if(e&&!t){var u=Object(a.d)(e);u.legend_label=e.label,u.exclude_from_legend=!i.showClinicalTrackLegends,u.na_legend_label=e.na_legend_label;var p={rule_set_params:u,data:e.data,data_id_key:"uid",label:e.label,description:(e.label||"").trim()===(e.description||"").trim()?void 0:e.description,removable:!0,removeCallback:function(){delete n()[e.key]},onClickRemoveInTrackMenu:function(){i.onDeleteClinicalTrack&&i.onDeleteClinicalTrack(e.key)},sort_direction_changeable:!0,tooltipFn:Object(s.b)(e,i.caseLinkOutInTooltips),important_ids:e.altered_uids,sortCmpFn:Object(l.a)(e),init_sort_direction:0,target_group:r.a,onSortDirectionChange:i.onTrackSortDirectionChange,custom_track_options:e.custom_options,track_can_show_gaps:"string"===e.datatype};c[e.key]=o.addTracks([p])[0]}else if(e&&t){var d=c[e.key];e.data!==t.data&&o.setTrackData(d,e.data,"uid"),e.altered_uids!==t.altered_uids&&o.setTrackImportantIds(d,e.altered_uids),o.setTrackTooltipFn(d,Object(s.b)(e,i.caseLinkOutInTooltips)),t.custom_options!==e.custom_options&&o.setTrackCustomOptions(d,e.custom_options)}}function C(e,t,n,r,o,i){var c=n();if(_(e,t,c,r))S(void 0,t,n,function(){},r,o,{},i,P);else if(e&&!t){var u={rule_set_params:Object(a.e)(),data:e.data,data_id_key:"uid",has_column_spacing:!1,track_padding:0,label:e.label,html_label:Object(s.a)(e.label),target_group:e.trackGroupIndex,sort_direction_changeable:!0,sortCmpFn:l.c,init_sort_direction:0,description:"Gene set scores from ".concat(e.molecularProfileId),link_url:e.trackLinkUrl,tooltipFn:Object(s.d)(e,o.caseLinkOutInTooltips),onSortDirectionChange:o.onTrackSortDirectionChange,expandCallback:e.expansionCallback,expandButtonTextGetter:function(e){return"".concat(e?"More":"Show","  genes")}},p=r.addTracks([u])[0];c[e.key]=p,void 0!==i.genesetHeatmap&&r.shareRuleSet(i.genesetHeatmap,p),i.genesetHeatmap=p,S(e,void 0,n,function(){},r,o,{},i,P)}else if(e&&t){var d=c[e.key];e.data!==t.data&&r.setTrackData(d,e.data,"uid"),r.setTrackTooltipFn(d,Object(s.d)(e,o.caseLinkOutInTooltips)),S(e,t,n,function(){},r,o,{},i,P)}}function P(e,t,n,r,o,i,p,d,f){var h=n();if(!_(e,t,h,o))if(e&&!t){var m={rule_set_params:Object(a.g)(e),data:e.data,data_id_key:"uid",has_column_spacing:Object(u.a)(e.hasColumnSpacing,!1),track_padding:0,label:e.label,track_label_color:e.labelColor,track_label_circle_color:e.labelCircleColor,track_label_font_weight:e.labelFontWeight,track_label_left_padding:e.labelLeftPadding,target_group:e.trackGroupIndex,removable:!!e.onRemove||!!e.onClickRemoveInTrackMenu,movable:e.movable,na_legend_label:e.naLegendLabel,removeCallback:function(){delete n()[e.key],e.onRemove&&e.onRemove()},onClickRemoveInTrackMenu:function(){e.onClickRemoveInTrackMenu&&e.onClickRemoveInTrackMenu()},sort_direction_changeable:Object(u.a)(e.sortDirectionChangeable,!0),sortCmpFn:l.c,init_sort_direction:Object(u.a)(e.initSortDirection,0),link_url:e.trackLinkUrl,description:Object(u.a)(e.description,"".concat(e.label," data from ").concat(e.molecularProfileId)),tooltipFn:e.tooltip||Object(s.d)(e,i.caseLinkOutInTooltips),track_info:e.info||"",onSortDirectionChange:i.onTrackSortDirectionChange,expansion_of:f?h[f]:void 0},y=o.addTracks([m])[0];if(h[e.key]=y,e.molecularAlterationType!==c.a.GENERIC_ASSAY){var b="heatmap";"METHYLATION"===e.molecularAlterationType&&(b="heatmap01"),void 0!==d[b]&&o.shareRuleSet(d[b],y),d[b]=y}else d.genericAssay[e.molecularProfileId]=y}else if(e&&t){var g=h[e.key];if(e.data!==t.data&&o.setTrackData(g,e.data,"uid"),e.info!==t.info&&void 0!==e.info&&o.setTrackInfo(g,e.info),e.movable!==t.movable&&void 0!==e.movable&&o.setTrackMovable(g,e.movable),e.molecularAlterationType===c.a.GENERIC_ASSAY&&void 0!==d.genericAssay[e.molecularProfileId]){var v=d.genericAssay[e.molecularProfileId];o.shareRuleSet(v,g)}o.setTrackTooltipFn(g,e.tooltip||Object(s.d)(e,i.caseLinkOutInTooltips))}}}).call(this,n(26))},990:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return u}),n.d(t,"c",function(){return d});var r=n(215),o=n.n(r);function i(e){for(var t={},n=0;n<e.length;n++)for(var r=[].concat(e[n]),o=0;o<r.length;o++)t[r[o]]=n;return t}function a(e,t){var n,r=(n=i(t?["amp_rec","homdel_rec","gain_rec","hetloss_rec","diploid_rec","amp","homdel","gain","hetloss","diploid",void 0]:["amp","homdel","gain","hetloss","diploid",void 0]),function(e){return n[e]}),o=function(){var n;return e||t?(!e&&t?n=i([["trunc_rec","splice_rec","inframe_rec","promoter_rec","missense_rec","other_rec"],["trunc","splice","inframe","promoter","missense","other"],void 0]):e&&!t?n=i([["trunc","trunc_rec"],["splice","splice_rec"],["inframe","inframe_rec"],["promoter","promoter_rec"],["missense","missense_rec"],["other","other_rec"],void 0,!0,!1]):e&&t&&(n=i(["trunc_rec","splice_rec","inframe_rec","promoter_rec","missense_rec","other_rec","trunc","splice","inframe","promoter","missense","other",void 0,!0,!1])),function(e){return n[e]}):function(e){return{true:1,false:2}[!!e+""]}}(),a=function(){var e;return e=i(t?["sv_rec","sv",void 0]:[["sv_rec","sv"],void 0]),function(t){return e[t]}}(),l=i(["high","low",void 0]),s=i([!0,!1,void 0]);function c(e){var t=[];return t.push(a(e.disp_structuralVariant)),t.push(r(e.disp_cna)),t.push(o(e.disp_mut)),t.push(s[e.disp_germ+""]),t.push(l[e.disp_mrna+""]),t.push(l[e.disp_prot+""]),t}return{preferred:function(e){return[+!!e.na].concat(c(e)).concat([e.sample?e.sample:e.patient])},mandatory:function(e){return c(e)},isVector:!0}}function l(e){return function(t,n){return t.na&&n.na?0:t.na&&!n.na?2:!t.na&&n.na?-2:t[e]<n[e]?-1:t[e]===n[e]?0:1}}function s(e,t){return e.na&&t.na?0:e.na&&!t.na?2:!e.na&&t.na?-2:o()(e.attr_val,t.attr_val)}function c(e){return function(t,n){var r=e(t,n);return 0===r?t.sample?o()(t.sample,n.sample):o()(t.patient,n.patient):r}}function u(e){var t,n;switch(e.datatype){case"number":t=l("attr_val");break;case"counts":n=e.countsCategoryLabels,t=function(e,t){if(e.na&&t.na)return 0;if(e.na&&!t.na)return 2;if(!e.na&&t.na)return-2;for(var r=0,o=0,i=0;i<n.length;i++)r+=e.attr_val[n[i]]||0,o+=t.attr_val[n[i]]||0;if(0===r&&0===o)return 0;if(0===r)return 1;if(0===o)return-1;var a=0,l=0;for(i=0;i<n.length;i++)e.attr_val[n[i]]>e.attr_val[n[a]]&&(a=i),t.attr_val[n[i]]>t.attr_val[n[l]]&&(l=i);if(a<l)return-1;if(a>l)return 1;var s,c=n[a],u=e.attr_val[c]/r,p=t.attr_val[c]/o;return(s=u-p)>0?1:s<0?-1:0};break;case"string":default:t=s}return{preferred:c(t),mandatory:t}}var p,d={preferred:c(p=l("profile_data")),mandatory:p}},991:function(e,t,n){"use strict";n.d(t,"a",function(){return E}),n.d(t,"b",function(){return k}),n.d(t,"d",function(){return C}),n.d(t,"c",function(){return x});var r=n(19),o=n(26),i=n.n(o),a=n(13),l=n(10),s=n(1),c=n.n(s),u=n(250),p=n(14),d=n(358),f=(n(889),n(8)),h=n(21);function m(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var b=n(271),g=n(273),v=n(887),_=n(888),w="oncoprint__tooltip",O="N/A";function S(e,t,n){var r=i()('<span class="nobreak"><a href="#" '.concat(t?"":'style="color:red;"',' oncontextmenu="return false;">').concat(e,"</a>").concat(n?" (".concat(n,")"):"","</span>"));return r.ready(function(){r.click(function(){a.a.getGenePanelUsingGET({genePanelId:e}).then(function(t){var n=t.genes.map(function(e){return e.hugoGeneSymbol}).sort(),r=open("","_blank","width=500,height=500");if(r){var o=r.document.createElement("div");r.document.body.appendChild(o),i()('<h3 style="text-align:center;">'.concat(e,"</h3><br>")).appendTo(o),i()("<span>".concat(n.join("<br>"),"</span>")).appendTo(o)}})})}),r}function E(e){return i()("<div>").text(e).html().replace(/_/g,"_&#8203;").replace(/\./g,".&#8203;")}function k(e,t){return function(n){var r="";if("counts"===e.datatype)for(var o=n[0],a=0;a<e.countsCategoryLabels.length;a++)r+='<span class="nobreak" style="color:'+e.countsCategoryFills[a]+';font-weight:bold;">'+e.countsCategoryLabels[a]+"</span>: "+o.attr_val_counts[e.countsCategoryLabels[a]]+"<br>";else{var l={},s=!0,c=!1,u=void 0;try{for(var p,d=n[Symbol.iterator]();!(s=(p=d.next()).done);s=!0){var f=p.value;if(f.attr_val_counts)for(var h=0,m=Object.keys(f.attr_val_counts);h<m.length;h++){var y=m[h];l[y]=l[y]||0,l[y]+=f.attr_val_counts[y]}}}catch(e){c=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(c)throw u}}var b=Object.keys(l);if("number"===e.datatype){for(var g=0,v=0,_=0,O=b;_<O.length;_++){var S=O[_],E=l[S];g+=E*parseFloat(S),v+=E}var k=(g/v).toFixed(2);".00"===k.substring(k.length-3)&&(k=k.substring(0,k.length-3)),r+=e.label+': <span class="nobreak"><b>'+k+"".concat(v>1?" (average of ".concat(v," values)"):"","</b></span><br>")}else if(b.length>1){r+=e.label+":<br>";for(var C=0;C<b.length;C++){var P=b[C];r+='<span class="nobreak"><b>'+P+"</b>: "+l[P]+" sample".concat(1===l[P]?"":"s","</span><br>")}}else if(1===b.length){var x=b[0];r+=e.label+': <span class="nobreak"><b>'+x+"</b>".concat(n.length>1?" (".concat(l[b[0]]," samples)"):"","</span><br>")}}var j=0,A=!0,I=!1,M=void 0;try{for(var D,N=n[Symbol.iterator]();!(A=(D=N.next()).done);A=!0){D.value.na&&(j+=1)}}catch(e){I=!0,M=e}finally{try{A||null==N.return||N.return()}finally{if(I)throw M}}return j>0&&e.na_tooltip_value&&(r+="".concat(e.label,": <b>").concat(e.na_tooltip_value,"</b>").concat(n.length>1?" (".concat(j," samples)"):"","<br/>")),i()("<div>").addClass(w).append(T(n,!!t)).append("<br/>").append(r)}}function C(e,t){return function(n){var r="",o=O,a="";if(e.tooltipValueLabel)r="".concat(e.tooltipValueLabel,": ");else switch(e.molecularAlterationType){case l.a.MRNA_EXPRESSION:r="MRNA: ";break;case l.a.PROTEIN_LEVEL:r="PROT: ";break;case l.a.METHYLATION:r="METHYLATION: ";break;case l.a.GENERIC_ASSAY:r="".concat(Object(f.n)(e.genericAssayType),": ");break;default:r="Value: "}var s=0,u=[],p=0,d=0,h=!0,m=!1,y=void 0;try{for(var b,g=n[Symbol.iterator]();!(h=(b=g.next()).done);h=!0){var v=b.value;null!==v.profile_data&&void 0!==v.profile_data&&(e.molecularAlterationType===l.a.GENERIC_ASSAY&&v.category?(u.push(v.category),d+=1):(s+=v.profile_data,p+=1))}}catch(e){m=!0,y=e}finally{try{h||null==g.return||g.return()}finally{if(m)throw y}}if(p>0){var _=(s/p).toFixed(2);o=1===p?_:"".concat(_," (average of ").concat(p," values)")}d>0&&(a=0===p&&1===d?u[0]:p>0&&1===d?"".concat(u[0]):"".concat(c.a.uniq(u).join(", ")," (").concat(d," data points)"));var S=r;return o===O&&0!==d||(S+="<b>"+o+"</b>"),o!==O&&d>0&&(S+=" and "),d>0&&(S+="<b>"+a+"</b>"),S+="<br />",i()("<div>").addClass(w).append(T(n,!!t)).append("<br/>").append(S)}}function P(e,t,n,r){var o=[],i={},a=void 0,l={},s=void 0,p=[],d=void 0;if(e&&(o=c.a.uniq(e.map(function(e){return e.genePanelId}).filter(function(e){return!!e})),a=c.a.uniq(e.map(function(e){return e.molecularProfileId})),r&&(d=c.a.keyBy(a,function(e){return r[e].molecularAlterationType})),l=c.a.keyBy(a),i=c.a.keyBy(o)),t){if(s=c.a.uniq(t.map(function(e){return e.molecularProfileId})).filter(function(e){return!l[e]}),d&&n&&r){var f=c.a.keyBy(s,function(e){return r[e].molecularAlterationType});s=s.concat(n.filter(function(e){return!d[e]&&!f[e]}).map(function(e){return u.a[e]}))}p=c.a.uniq(t.map(function(e){return e.genePanelId})).filter(function(e){return!!e&&!i[e]})}return{dispProfiledGenePanelIds:o,dispNotProfiledGenePanelIds:p,dispProfiledIn:a,dispNotProfiledIn:s,dispAllProfiled:!(!(a&&a.length&&s)||s.length),dispNotProfiled:!(!(s&&s.length&&a)||a.length)}}function T(e,t){return e.length?e[0].sample?e.length>1?t?'<a class="nobreak" href='.concat(Object(r.x)(e[0].study_id,e[0].sample,e.map(function(e){return{studyId:e.study_id,patientId:e.patient}})),' target="_blank">View these ').concat(e.length," samples<a/>"):'<span class="nobreak">'.concat(e.length," samples</span>"):t?(n=e[0].study_id,o=e[0].sample,'<a class="nobreak" href="'.concat(Object(r.x)(n,o),'" target="_blank">').concat(o,"</a>")):'<span class="nobreak">'.concat(e[0].sample,"</span>"):e[0].patient?e.length>1?t?'<a class="nobreak" href='.concat(Object(r.v)(e[0].study_id,e[0].patient,e.map(function(e){return{studyId:e.study_id,patientId:e.patient}})),' target="_blank">View these ').concat(e.length," patients<a/>"):'<span class="nobreak">'.concat(e.length," patients</span>"):t?function(e,t){return'<a class="nobreak" href="'.concat(Object(r.v)(e,t),'" target="_blank">').concat(t,"</a>")}(e[0].study_id,e[0].patient):'<span class="nobreak">'.concat(e[0].patient,"</span>"):"":"";var n,o}function x(e,t,n){function r(e,t){var n=new d.a,r=!0,o=!1,a=void 0;try{for(var l,s=e[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var c=l.value;n.increment(c.hugo_gene_symbol,c.amino_acid_change,c.cancer_hotspots_hotspot,c.oncokb_oncogenic,c.driver_filter,c.driver_filter_annotation,c.driver_tiers_filter,c.driver_tiers_filter_annotation,c.germline)}}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n.entries().map(function(e){var n=y(e.key,9),r=n[0],o=n[1],a=n[2],l=n[3],s=n[4],c=n[5],u=n[6],p=n[7],d=n[8],f=e.value,m=i()("<span>").addClass("nobreak");return m.append('<b class="nobreak">'.concat(r," ").concat(o,"</b>")),a&&m.append('<img src="'.concat(b,'" title="Hotspot" style="height:11px; width:11px; margin-left:3px"/>')),l&&m.append('<img src="'.concat(g,'" title="').concat(l,'" style="height:11px; width:11px;margin-left:3px"/>')),s&&s===h.e&&m.append('<img src="'.concat(v,'" title="').concat(s,": ").concat(c,'" alt="driver filter" style="height:11px; width:11px;margin-left:3px"/>')),u&&m.append('<img src="'.concat(_,'" title="').concat(u,": ").concat(p,'" alt="driver tiers filter" style="height:11px; width:11px;margin-left:3px"/>')),d&&m.append(function(){var e=i()('<small style="color: #ff0000">');return e.append("&nbsp;Germline"),e}()),t&&m.append("&nbsp;(".concat(f,")")),m})}function o(e,t){var n=new d.a,r=!0,o=!1,a=void 0;try{for(var l,s=e[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var c=l.value;n.increment(c.hugo_gene_symbol,c.direction)}}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n.entries().map(function(e){var n=y(e.key,2),r=n[0],o=n[1],a=e.value,l=i()("<span>").addClass("nobreak");return l.append('<b class="nobreak">'.concat(r," ").concat(o,"</b>")),t&&l.append("&nbsp;(".concat(a,")")),l})}var a={"-2":"HOMODELETED","-1":"HETLOSS",1:"GAIN",2:"AMPLIFIED"};return function(s){var c=i()("<div>").addClass(w);c.append(T(s,e)).append("<br/>");var u=[],f=[],b=[],O=[],E=[],k=!0,C=!1,x=void 0;try{for(var j,A=s[Symbol.iterator]();!(k=(j=A.next()).done);k=!0)for(var I=j.value,M=0;M<I.data.length;M++){var D=I.data[M],N=D.molecularProfileAlterationType,R=D.hugoGeneSymbol;switch(N){case l.a.MUTATION_EXTENDED:var L={};L.hugo_gene_symbol=R,L.amino_acid_change=D.proteinChange,L.driver_filter=D.driverFilter,L.driver_filter_annotation=D.driverFilterAnnotation,L.driver_tiers_filter=D.driverTiersFilter,L.driver_tiers_filter_annotation=D.driverTiersFilterAnnotation,D.isHotspot&&(L.cancer_hotspots_hotspot=!0),Object(p.v)(D)||(L.germline=!0);var G=D.oncoKbOncogenic;G&&(L.oncokb_oncogenic=G),u.push(L);break;case l.a.STRUCTURAL_VARIANT:var V={},B=D;V.site1HugoSymbol=B.site1HugoSymbol,V.site2HugoSymbol=B.site2HugoSymbol,V.eventInfo=B.eventInfo,V.variantClass=B.variantClass;var F=D.oncoKbOncogenic;F&&(V.oncokb_oncogenic=F),E.push(V);break;case l.a.COPY_NUMBER_ALTERATION:if(a.hasOwnProperty(D.value)){var H={cna:a[D.value],hugo_gene_symbol:R};H.driver_filter=D.driverFilter,H.driver_filter_annotation=D.driverFilterAnnotation,H.driver_tiers_filter=D.driverTiersFilter,H.driver_tiers_filter_annotation=D.driverTiersFilterAnnotation;var U=D.oncoKbOncogenic;U&&(H.oncokb_oncogenic=U),f.push(H)}break;case l.a.MRNA_EXPRESSION:case l.a.PROTEIN_LEVEL:var W=D.alterationSubType,q=N===l.a.MRNA_EXPRESSION?b:O;"high"===W?q.push({hugo_gene_symbol:R,direction:"HIGH"}):"low"===W&&q.push({hugo_gene_symbol:R,direction:"LOW"})}}}catch(e){C=!0,x=e}finally{try{k||null==A.return||A.return()}finally{if(C)throw x}}if(E.length>0){c.append("Structural Variant: "),E=function(e,t){var n=new d.a,r=!0,o=!1,a=void 0;try{for(var l,s=e[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var c=l.value;n.increment(c.site1HugoSymbol,c.site2HugoSymbol,c.eventInfo,c.variantClass,c.oncokb_oncogenic)}}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n.entries().map(function(e){var n=y(e.key,5),r=n[0],o=n[1],a=n[2],l=n[3],s=n[4],c=e.value,u=i()("<span>").addClass("nobreak");return u.append('<b class="nobreak">'.concat(r).concat(o?"-"+o:"",", ").concat(l,", Event Info: ").concat(a,"</b>")),s&&u.append('<img src="'.concat(g,'" title="').concat(s,'" style="height:11px; width:11px;margin-left:3px"/>')),t&&u.append("&nbsp;(".concat(c,")")),u})}(E,s.length>1);for(var z=0;z<E.length;z++)z>0&&c.append(","),c.append(E[z]);c.append("<br>")}if(u.length>0){c.append("Mutation: "),u=r(u,s.length>1);for(z=0;z<u.length;z++)z>0&&c.append(", "),c.append(u[z]);c.append("<br>")}if(f.length>0){c.append("Copy Number Alteration: "),f=function(e,t){var n=new d.a,r=!0,o=!1,a=void 0;try{for(var l,s=e[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var c=l.value;n.increment(c.hugo_gene_symbol,c.cna,c.oncokb_oncogenic,c.driver_filter,c.driver_filter_annotation,c.driver_tiers_filter,c.driver_tiers_filter_annotation)}}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n.entries().map(function(e){var n=y(e.key,7),r=n[0],o=n[1],a=n[2],l=n[3],s=n[4],c=n[5],u=n[6],p=e.value,d=i()("<span>").addClass("nobreak");return d.append('<b class="nobreak">'.concat(r," ").concat(o,"</b>")),a&&d.append("<img src=".concat(g,' title="').concat(a,'" style="height:11px; width:11px;margin-left:3px"/>')),l&&l===h.e&&d.append('<img src="'.concat(v,'" title="').concat(l,": ").concat(s,'" alt="driver filter" style="height:11px; width:11px;margin-left:3px"/>')),c&&d.append('<img src="'.concat(_,'" title="').concat(c,": ").concat(u,'" alt="driver tiers filter" style="height:11px; width:11px;margin-left:3px"/>')),t&&d.append("&nbsp;(".concat(p,")")),d})}(f,s.length>1);for(z=0;z<f.length;z++)z>0&&c.append(", "),c.append(f[z]);c.append("<br>")}if(b.length>0){c.append("MRNA: "),b=o(b,s.length>1);for(z=0;z<b.length;z++)z>0&&c.append(", "),c.append(b[z]);c.append("<br>")}if(O.length>0){c.append("PROT: "),O=o(O,s.length>1);for(z=0;z<O.length;z++)z>0&&c.append(", "),c.append(O[z]);c.append("<br>")}var K=t&&t(),Q=new d.a,Y=new d.a,X=new d.a,Z=new d.a,J=0,$=0,ee=!0,te=!1,ne=void 0;try{for(var re,oe=s[Symbol.iterator]();!(ee=(re=oe.next()).done);ee=!0){var ie=re.value,ae=P(ie.profiled_in,ie.not_profiled_in,n,K),le=!0,se=!1,ce=void 0;try{for(var ue,pe=ae.dispProfiledGenePanelIds[Symbol.iterator]();!(le=(ue=pe.next()).done);le=!0){var de=ue.value;Q.increment(de)}}catch(e){se=!0,ce=e}finally{try{le||null==pe.return||pe.return()}finally{if(se)throw ce}}var fe=!0,he=!1,me=void 0;try{for(var ye,be=ae.dispNotProfiledGenePanelIds[Symbol.iterator]();!(fe=(ye=be.next()).done);fe=!0){var ge=ye.value;Y.increment(ge)}}catch(e){he=!0,me=e}finally{try{fe||null==be.return||be.return()}finally{if(he)throw me}}if(ae.dispProfiledIn){var ve=!0,_e=!1,we=void 0;try{for(var Oe,Se=ae.dispProfiledIn[Symbol.iterator]();!(ve=(Oe=Se.next()).done);ve=!0){var Ee=Oe.value;X.increment(Ee)}}catch(e){_e=!0,we=e}finally{try{ve||null==Se.return||Se.return()}finally{if(_e)throw we}}}if(ae.dispNotProfiledIn){var ke=!0,Ce=!1,Pe=void 0;try{for(var Te,xe=ae.dispNotProfiledIn[Symbol.iterator]();!(ke=(Te=xe.next()).done);ke=!0){var je=Te.value;Z.increment(je)}}catch(e){Ce=!0,Pe=e}finally{try{ke||null==xe.return||xe.return()}finally{if(Ce)throw Pe}}}ae.dispAllProfiled?J+=1:ae.dispNotProfiled&&($+=1)}}catch(e){te=!0,ne=e}finally{try{ee||null==oe.return||oe.return()}finally{if(te)throw ne}}var Ae=Q.entries(),Ie=Y.entries();if(Ae.length||Ie.length){c.append("Gene Panels: ");var Me=!1,De=!0,Ne=!1,Re=void 0;try{for(var Le,Ge=Ae[Symbol.iterator]();!(De=(Le=Ge.next()).done);De=!0){var Ve=Le.value;Me&&c.append(",&nbsp;"),Me=!0,c.append(S(Ve.key[0],!0,s.length>1?Ve.value:void 0))}}catch(e){Ne=!0,Re=e}finally{try{De||null==Ge.return||Ge.return()}finally{if(Ne)throw Re}}var Be=!0,Fe=!1,He=void 0;try{for(var Ue,We=Ie[Symbol.iterator]();!(Be=(Ue=We.next()).done);Be=!0){var qe=Ue.value;Q.has.apply(Q,m(qe.key))||(Me&&c.append(",&nbsp;"),Me=!0,c.append(S(qe.key[0],!1,s.length>1?qe.value:void 0)))}}catch(e){Fe=!0,He=e}finally{try{Be||null==We.return||We.return()}finally{if(Fe)throw He}}c.append("<br>")}var ze=X.entries(),Ke=Z.entries();return J===s.length?(c.append("Profiled in all selected molecular profiles."+(s.length>1?" (".concat(J,")"):"")),c.append("<br>")):$===s.length?(Ae.length||Ie.length?c.append("".concat(s[0].trackLabel," is not in the gene panels of the selected molecular profiles, but detected as a fusion partner")):c.append("Not profiled in selected molecular profiles."+(s.length>1?" (".concat($,")"):"")),c.append("<br>")):(ze.length&&(c.append("Profiled in: "+ze.map(function(e){var t=e.key[0],n=t;return K&&t in K&&(n=K[t].name),'<span class="nobreak">'.concat(n).concat(s.length>1?" (".concat(e.value,")"):"","</span>")}).join(", ")),c.append("<br>")),Ke.length&&(c.append("<span class=\"nobreak\" style='color:red; font-weight:bold'>Not profiled in: "+Ke.map(function(e){var t=e.key[0],n=t;return K&&t in K&&(n=K[t].name),'<span class="nobreak">'.concat(n).concat(s.length>1?" (".concat(e.value,")"):"","</span>")}).join(", ")+"</span>"),c.append("<br>")),J>0&&(c.append("Profiled in all selected molecular profiles."+(s.length>1?" (".concat(J,")"):"")),c.append("<br>")),$>0&&(c.append("Not profiled in selected molecular profiles."+(s.length>1?" (".concat($,")"):"")),c.append("<br>"))),c}}},993:function(e,t,n){"use strict";n.d(t,"a",function(){return _});var r=n(0),o=n(1),i=n(9),a=n(73),l=n(2),s=n(17),c=n(3),u=n(174),p=n(943);function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var _,w=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":v(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};!function(e){e[e.NAME=0]="NAME",e[e.SCORE=1]="SCORE",e[e.GENES=2]="GENES"}(_||(_={}));var O=function(e){function t(){return f(this,t),h(this,y(t).apply(this,arguments))}return b(t,a["b"]),t}();var S=function(e){function t(e){var n;return f(this,t),n=h(this,y(t).call(this,e)),Object.defineProperty(m(n),"_columns",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(m(n),"selectedPathway",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(m(n),"dataStore",{enumerable:!0,configurable:!0,writable:!0,value:new u.a(function(){return n.props.data})}),Object(l.makeObservable)(m(n)),n._columns={},n.generateColumns(),Object(l.makeObservable)(m(n)),n}var n,i,a;return b(t,r["Component"]),n=t,(i=[{key:"generateColumns",value:function(){var e=this;this._columns={},this._columns[_.NAME]=Object.assign({name:"Pathway name",render:function(t){var n=t.name,o=n.length<20;return r.createElement(s.Radio,{style:{marginTop:0,marginBottom:0},checked:e.props.selectedPathway===t.name,onChange:function(n){e.props.onSelectedPathwayChange&&e.props.onSelectedPathwayChange(),e.props.changePathway(t.name)}},r.createElement(c.i,{overlay:n,disabled:o},r.createElement("b",null,o?n:n.substring(0,20)+"...")))},tooltip:r.createElement("span",null,"Pathway name"),filter:function(e,t,n){return e.name.toUpperCase().includes(n)},sortBy:function(e){return e.name},download:function(e){return e.name}},this.props.columnsOverride[_.NAME]),this._columns[_.SCORE]=Object.assign({name:"Score",render:function(e){return r.createElement("span",null,r.createElement("b",null,e.score.toFixed(2)))},tooltip:r.createElement("span",null,"Score"),filter:function(e,t,n){return(e.score+"").includes(n)},sortBy:function(e){return e.score},download:function(e){return e.score+""}},this.props.columnsOverride[_.SCORE]),this._columns[_.GENES]=Object.assign({name:"Genes matched",render:function(e){var t=e.genes.join(" ").length;return r.createElement(c.i,{overlay:e.genes.join(" "),disabled:t<20},r.createElement("span",null,Object(p.d)(e.genes,20)))},tooltip:r.createElement("span",null,"Genes matched"),filter:function(e,t,n){return e.genes.join(" ").toUpperCase().includes(n)},sortBy:function(e){return e.genes.length},download:function(e){return e.genes.toString()}},this.props.columnsOverride[_.GENES])}},{key:"componentWillUpdate",value:function(e){var t,n,r,i,a,l;this.dataStore.page=(t=e.data,n=this.dataStore,r=e.selectedPathway,i=Object(u.c)(t,n.sortMetric,n.sortAscending),a=Object(u.d)(i,n.filterString,n.getFilter()),(l=o.findIndex(a,function(e){return e.name===r}))>=0?Math.floor(l/(n.itemsPerPage||10)):0)}},{key:"render",value:function(){var e=o.sortBy(this._columns);return r.createElement(O,{columns:e,dataStore:this.dataStore,initialItemsPerPage:10,initialSortColumn:this.props.initialSortColumn,initialSortDirection:"desc",paginationProps:{itemsPerPageOptions:[10]},showColumnVisibility:!1})}}])&&d(n.prototype,i),a&&d(n,a),t}();Object.defineProperty(S,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{columns:[_.NAME,_.SCORE,_.GENES],columnsOverride:{},initialSortColumn:"Score"}}),w([l.observable],S.prototype,"_columns",void 0),w([l.observable.ref],S.prototype,"selectedPathway",void 0),S=w([i.observer],S),t.b=S},994:function(e,t,n){},995:function(e,t,n){},996:function(e,t,n){},999:function(e,t,n){"use strict";n.d(t,"b",function(){return y}),n.d(t,"a",function(){return b});var r=n(0),o=n(2),i=n(17),a=n(5),l=n.n(a),s=n(31),c=n(9);function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var m=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":h(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},y=17,b=8,g=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(i=p(t).call(this,e))||"object"!==h(i)&&"function"!=typeof i?d(r):i,Object(o.makeObservable)(d(n)),n}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){return this.props.model?r.createElement(i.Popover,{arrowOffsetTop:y,className:l()("cbioportal-frontent","cbioTooltip"),positionLeft:this.positionLeft,positionTop:this.props.mousePosition.y-y,style:{width:150},placement:this.placement},r.createElement("div",null,r.createElement("div",null,"Number of samples:"," ",r.createElement("strong",null,this.props.model.sampleCount)),r.createElement("div",null,"Range:"," ",r.createElement("strong",null,Object(s.B)(this.props.model.start,this.props.model.end,this.props.model.special))))):null}},{key:"placement",get:function(){return this.props.totalBars<2*this.props.currentBarIndex?"left":"right"}},{key:"positionLeft",get:function(){return"left"===this.placement?this.props.mousePosition.x-(b+150):this.props.mousePosition.x+b}},{key:"transform",get:function(){return"left"===this.placement?"translate(-100%,0%)":void 0}}])&&u(n.prototype,a),c&&u(n,c),t}();m([o.computed],g.prototype,"placement",null),m([o.computed],g.prototype,"positionLeft",null),m([o.computed],g.prototype,"transform",null),g=m([c.observer],g),t.c=g}}]);