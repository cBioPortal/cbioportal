(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{1097:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return y});var r=n(0),o=n(23),a=n(1),i=n(1143),l=n(2),u=n(6),s=n(9);function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var h=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":m(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},y="GRCh37",g=function(t){function n(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(e=p(this,f(n).apply(this,arguments))).genePanelInTooltip="",e}var l,u,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(n,r["Component"]),l=n,(u=[{key:"componentDidMount",value:function(){this.drawTracks()}},{key:"setGenePanelInTooltip",value:function(e){this.genePanelInTooltip=e}},{key:"drawTracks",value:function(){var t=this,n=a.keyBy(this.props.samples.filter(function(e){return e.copyNumberSegmentPresent}),function(e){return e.sampleId}),r=a.keyBy(this.props.samples.filter(function(e){return e.sequenced}),function(e){return e.sampleId}),l=!!(this.props.mutationGenePanelIconData&&a.keys(this.props.mutationGenePanelIconData).length>0||this.props.copyNumberGenePanelIconData&&a.keys(this.props.copyNumberGenePanelIconData).length>0),u=i.a(Object.keys(n).length+Object.keys(r).length,this.props.width,l),s=0,c=i.b(document.getElementsByClassName("genomicOverviewTracksContainer")[0],u),p=y;this.props.mutations&&this.props.mutations.length>0&&(p=this.props.mutations[0].ncbiBuild);var f=i.c(p);i.d(c,u,f,p),a.each(this.props.sampleManager.samples,function(r){var l={};if(t.props.mutationGenePanelIconData&&(l=t.props.mutationGenePanelIconData[r.id]),n[r.id]){var p=[],d=a.filter(t.props.cnaSegments,function(e){return e.sampleId===r.id});if(a.each(d,function(e){var t=[];t.push(e.sampleId),t.push(e.chromosome),t.push(e.end),t.push(e.start),t.push(e.numberOfProbes),t.push(e.segmentMean),p.push(t)}),i.e(c,u,f,s,p,1,3,2,5,r.id,l,t.setGenePanelInTooltip),s+=1,t.props.sampleManager.samples.length>1){var m=e('[id="cnaTrack'.concat(r.id,'"]')),h={x:parseInt(m.attr("x"))-10,y:parseInt(m.attr("y"))-5},y=e('<svg height="12" width="12" />').attr(h);m.replaceWith(y);var g=t.props.sampleManager.getComponentForSample(r.id,1,"",null,t.props.onSelectGenePanel);o.render(g,y[0])}}}),a.each(this.props.sampleManager.samples,function(n){var l={};if(t.props.mutationGenePanelIconData&&(l=t.props.mutationGenePanelIconData[n.id]),r[n.id]){var p=a.filter(t.props.mutations,function(e){return e.sampleId===n.id});if(i.f(c,u,f,s,p,n.id,l,t.setGenePanelInTooltip),s+=1,t.props.sampleManager.samples.length>1){var d="mutTrack".concat(n.id),m=e('[id="'.concat(d,'"]')),h={x:parseInt(m.attr("x"))-10,y:parseInt(m.attr("y"))-5},y=e('<svg id="'.concat(d,'" height="12" width="12" />'));y.attr(h),m.replaceWith(y);var g=t.props.sampleManager.getComponentForSample(n.id,1,"",null,t.props.onSelectGenePanel);o.render(g,y[0])}}})}},{key:"render",value:function(){var e=this;return r.createElement(r.Fragment,null,r.createElement("div",{className:"genomicOverviewTracksContainer"}),r.createElement("div",{className:"tooltip-content",style:{display:"none"}},r.createElement("span",null,this.genePanelInTooltip?r.createElement(r.Fragment,null,"Gene panel:"," ",r.createElement("a",{onClick:function(){return e.props.onSelectGenePanel(e.genePanelInTooltip)}},this.genePanelInTooltip)):"Gene panel information not found. Sample is presumed to be whole exome/genome sequenced.")))}}])&&c(l.prototype,u),s&&c(l,s),n}();h([l.observable],g.prototype,"genePanelInTooltip",void 0),h([u.default,l.action],g.prototype,"setGenePanelInTooltip",null),g=h([s.observer],g),t.b=g}).call(this,n(17))},1099:function(e,t,n){},1101:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__31Bse",framedImage:"styles-module__framedImage__1BiD7",genesList:"styles-module__genesList__2enmP",searchInput:"styles-module__searchInput__385Z_",panelName:"styles-module__panelName__czMY2",copyDownloadControls:"styles-module__copyDownloadControls__2Edes",patientViewModal:"styles-module__patientViewModal__17gba"}},1143:function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return p}),n.d(t,"c",function(){return m}),n.d(t,"d",function(){return h}),n.d(t,"e",function(){return v}),n.d(t,"f",function(){return b});var r=n(1144),o=n.n(r),a=n(17),i=n.n(a),l=n(1),u=(n(947),n(1098),n(1097)),s=n(1145);function c(e,t,n){var r={};return r.nRows=e,r.canvasWidth=t,r.wideLeftText=25,r.wideRightText=50,r.wideGenePanelIcon=20,r.heigthGenePanelIcon=18,r.GenomeWidth=r.canvasWidth-r.wideLeftText-r.wideRightText-(n?r.wideGenePanelIcon:0),r.pixelsPerBinMut=3,r.rowHeight=20,r.rowMargin=5,r.ticHeight=10,r.cnTh=[.2,1.5],r.cnLengthTh=5e4,r.getCnColor=function(e){if(e>=r.cnTh[1])return"#f00";if(e<=-r.cnTh[1])return"#00f";var t=Math.round(255*(r.cnTh[1]-Math.abs(e))/(r.cnTh[1]-r.cnTh[0]));return e<0?"rgb("+t+","+t+",255)":"rgb(255,"+t+","+t+")"},r.canvasHeight=function(){return 2*r.rowMargin+r.ticHeight+r.nRows*(r.rowHeight+r.rowMargin)},r.yRow=function(e){return 2*r.rowMargin+r.ticHeight+e*(r.rowHeight+r.rowMargin)},r.xRightText=function(){return r.wideLeftText+r.GenomeWidth+5},r.xGenePanelIcon=function(){return r.xRightText()+40},r.xGenePanelIconText=function(){return r.xGenePanelIcon()+r.wideGenePanelIcon/2},r}function p(e,t){return o()(e,t.canvasWidth,t.canvasHeight())}var f=new Map([["hg19","GRCh37"],["37","GRCh37"],["hg38","GRCh38"],["38","GRCh38"],["mm10","GRCm38"]]),d=s.reduce(function(e,t){return e[t.genomeBuild]=t.chromosomeSize||[],e},{});function m(e){var t={genomeRef:{},total:0},n=f.get(e);n&&""!==n||(n=u.a);var r=d[n];return r&&(t.genomeRef=r,t.total=l.sum(r)),t.perc=function(e,t){for(var n=[0],r=1;r<e.length;r++)n.push(n[r-1]+e[r]/t);return n}(t.genomeRef,t.total),t.loc2perc=function(e,n){return t.perc[e-1]+n/t.total},t.loc2xpixil=function(e,n,r){return t.loc2perc(e,n)*r.GenomeWidth+r.wideLeftText},t.perc2loc=function(e,n){var r;if(n){for(o=n;o<t.genomeRef.length&&!(e<=t.perc[o]);o++);r=o}else{for(var o,a=1,i=t.genomeRef.length-1;a<=i;)o=Math.floor((a+i)/2),t.perc[o]>=e?i=o-1:a=o+1;r=a}return[r,Math.round(t.total*(e-t.perc[r-1]))]},t.xpixil2loc=function(e,n,r){var o=(n-e.wideLeftText)/e.GenomeWidth;return t.perc2loc(o,r)},t.middle=function(e,n){var r=t.genomeRef[e]/2;return t.loc2xpixil(e,r,n)},t.chmName=function(e){return 23===e?"X":24===e?"Y":e},t}function h(e,t,n,r){var o=t.rowMargin+t.ticHeight;y(t.wideLeftText,o,t.wideLeftText+t.GenomeWidth,o,e,"#000",1);for(var a=1;a<n.genomeRef.length;a++)if(0===n.genomeRef[a]&&"GRCm38"===r);else{var i=n.loc2xpixil(a,0,t);y(i,o,i,t.rowMargin,e,"#000",1);var l=n.middle(a,t);e.text(l,o-t.rowMargin,n.chmName(a))}y(t.wideLeftText+t.GenomeWidth,o,t.wideLeftText+t.GenomeWidth,t.rowMargin,e,"#000",1)}function y(e,t,n,r,o,a,i){var l="M"+e+" "+t+" L"+n+" "+r,u=o.path(l);return u.attr("stroke",a),u.attr("stroke-width",i),u.attr("opacity",.5),u.translate(.5,.5),u}function g(e,t){return"chr"+t.chmName(e[0])+":"+function(e){var t=e.toString(),n=/(\d+)(\d{3})/;for(;n.test(t);)t=t.replace(n,"$1,$2");return t}(e[1])}function v(e,t,n,r,o,a,u,s,c,p,f,d){var m=t.yRow(r),h=0,y=0;if(l.each(o,function(r){var o=T(r[a]);if(!(null==o||o[0]>=n.genomeRef.length)){var i=r[u],l=r[s],p=r[c];if(h+=l-i,!(Math.abs(p)<t.cnTh[0]||l-i<t.cnLengthTh)){y+=l-i;var f=n.loc2xpixil(o,i,t),d=n.loc2xpixil(o,l,t),v=e.rect(f,m,d-f,t.rowHeight),b=t.getCnColor(p);v.attr("fill",b),v.attr("stroke",b),v.attr("stroke-width",1),v.attr("opacity",.5),v.translate(.5,.5);var S="Mean copy number log2 value: "+p+"<br/>from "+g([o,i],n)+"<br/>to "+g([o,l],n);w(v.node,S,"","")}}}),null!=p){var v="CNA";(E=e.text(12,m+t.rowHeight/2,v).attr({"text-anchor":"center",fill:"black"})).node.setAttribute("id","cnaTrack"+p)}else e.text(0,m+t.rowHeight/2,"CNA").attr({"text-anchor":"start"});v=0===h?"N/A":(100*y/h).toFixed(1)+"%";var b=0===h?"Copy number segment data not available":"Percentage of copy number altered chromosome regions (mean copy number log value >0.2 or <-0.2) out of measured regions.";S(E=e.text(t.xRightText(),m+t.rowHeight/2,v).attr({"text-anchor":"start","font-weight":"bold"}),e),w(E.node,b,null,{my:"top right",at:"bottom left",viewport:i()(window)});if(f&&f.label){var E,O=e.rect(t.xGenePanelIcon(),m+1,t.wideGenePanelIcon,t.heigthGenePanelIcon,4);O.attr("fill",f.color||"#FFFFFF"),O.attr("fill-opacity",.2),O.attr("stroke-width",0),(E=e.text(t.xGenePanelIconText(),m+t.heigthGenePanelIcon/2+1,f.label).attr({"text-anchor":"center",fill:"black"})).node.setAttribute("data-test","cna-track-genepanel-icon-"+r);var P=f.genePanelId?"Gene panel: "+f.genePanelId:"Gene panel information not found. Sample is presumed to be whole exome/genome sequenced.";w(E.node,P,null,{my:"top right",at:"bottom left"},f.genePanelId,i()(".tooltip-content").find("span"),d)}}function b(e,t,n,r,o,a,u,s){for(var c=l.filter(o,function(e){return e.sampleId===a}),p=[],f=0;f<c.length;f++){var d=c[f];if(void 0!==d.chr){var m=T(d.chr);if(null!=m&&m<=n.genomeRef.length){var h=Math.round(n.loc2xpixil(m,(d.startPosition+d.endPosition)/2,t)),y=h-h%t.pixelsPerBinMut;null==p[y]&&(p[y]=[]),p[y].push(d.gene.hugoGeneSymbol+": "+d.proteinChange),0}}}var g=t.yRow(r)+t.rowHeight;if(i.a.each(p,function(n,r){var o=n;if(r){var a=r.length>5?t.rowHeight:t.rowHeight*r.length/5,i=e.rect(o,g-a,t.pixelsPerBinMut,a);i.attr("fill","#0f0"),i.attr("stroke","#0f0"),i.attr("stroke-width",1),i.attr("opacity",.5),i.translate(.5,.5),w(i.node,r.join("</br>"),100,"")}}),null!==a){(v=e.text(12,g-t.rowHeight/2,"MUT").attr({"text-anchor":"center",fill:"black"})).node.setAttribute("id","mutTrack"+a)}else e.text(0,g-t.rowHeight/2,"MUT").attr({"text-anchor":"start"});S(v=e.text(t.xRightText(),g-t.rowHeight/2,o.length).attr({"text-anchor":"start","font-weight":"bold"}),e);if(w(v.node,"Number of mutation events.",null,{my:"top right",at:"bottom left"}),u&&u.label){var v,b=e.rect(t.xGenePanelIcon(),g-t.heigthGenePanelIcon-1,t.wideGenePanelIcon,t.heigthGenePanelIcon,4);b.attr("fill",u.color||"#FFFFFF"),b.attr("fill-opacity",.2),b.attr("stroke-width",0),(v=e.text(t.xGenePanelIconText(),g-t.heigthGenePanelIcon/2-1,u.label).attr({"text-anchor":"center",fill:"black"})).node.setAttribute("data-test","mut-track-genepanel-icon-"+r),w(v.node,"",null,{my:"top right",at:"bottom left"},u.genePanelId,i()(".tooltip-content").find("span"),s)}}function w(e,t,n,r,o,a,l){var u={content:{text:function(){return a||t}},show:{event:"mouseover"},hide:{fixed:!0,delay:100,event:"mouseout"},style:{classes:"qtip-light qtip-rounded"},position:{my:"bottom right",at:"top left",viewport:i()("body")},events:{show:function(){l&&o&&l(o)},hide:function(){l&&l("")}}};i()(e).qtip(u)}function S(e,t){var n=e.getBBox();return t.path("M"+n.x+" "+(n.y+n.height)+"L"+(n.x+n.width)+" "+(n.y+n.height))}function T(e){return 0===e.toLowerCase().indexOf("chr")&&(e=e.substring(3)),"X"!==e&&"x"!==e||(e=23),"Y"!==e&&"y"!==e||(e=24),isNaN(e)||e<1||e>24?null:parseInt(e)}},1144:function(e,t,n){e.exports=n(25)(1034)},1145:function(e){e.exports=[{genomeBuild:"GRCh37",chromosomeSize:[0,249250621,243199373,198022430,191154276,180915260,171115067,159138663,146364022,141213431,135534747,135006516,133851895,115169878,107349540,102531392,90354753,81195210,78077248,59128983,63025520,48129895,51304566,155270560,59373566]},{genomeBuild:"GRCh38",chromosomeSize:[0,248956422,242193529,198295559,190214555,181538259,170805979,159345973,145138636,138394717,133797422,135086622,133275309,114364328,107043718,101991189,90338345,83257441,80373285,58617616,64444167,46709983,50818468,156040895,57227415]},{genomeBuild:"GRCm38",chromosomeSize:[0,195471971,182113224,160039680,156508116,151834684,149736546,145441459,129401213,124595110,130694993,122082543,120129022,120421639,124902244,104043685,98207768,94987271,90702639,61431566,0,0,0,171031299,91744698]}]},1146:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return i});var r,o=n(197),a={process_data:r=function(e,t,n){if(_.find(e,function(e){return void 0!==e[n]}))return o.zip(e,t).map(function(e){return void 0===e[0][n]===e[1][n]?0:e[0][n]/(e[0][n]+e[1][n])})},extract_and_process:function(e,t){var n=e.mutations.data["alt-count"],o=e.mutations.data["ref-count"];return r(n,o,t)},kernelDensityEstimator:function(e,t){return function(n){return t.map(function(t){return[t,o.mean(n,function(n){return e(t-n)})]})}},gaussianKernel:function(e){return function(t){return 1/(e*Math.sqrt(2*Math.PI))*Math.exp(-1*Math.pow(t-0,2)/(2*Math.pow(e,2)))}},calculate_bandwidth:function(e){var t=o.mean(e),n=o.mean(e.map(function(e){return Math.pow(e-t,2)}));return 1.06*Math.pow(n,.5)*Math.pow(e.length,-.2)}},i=function(t,n,r,i,l,u,s){var c=t.div,p={};if(i||(i={}),0===Object.keys(i).length){var f=0;for(var d in n)n.hasOwnProperty(d)&&(i[d]=f,f+=1)}for(var d in l=e.extend(!0,{},l),n)if(n.hasOwnProperty(d)){for(var m=o.rgb(l[d]||"rgb(0,0,0)");m.toString()in p&&(0!==m.r||0!==m.g||0!==m.b);)m=m.darker(.4);var h=m.toString();p[h]=!0,l[d]={stroke:h,fill:h}}var y=0===(r=r||{label_font_size:"11.5px",xticks:3,yticks:8,nolegend:!1}).xticks?13:30;r.margin=r.margin||{};var g=e.extend({top:20,right:30,bottom:30+y/2,left:50},r.margin),v=r.width||200,b=r.height||(500+y)/2-g.top-g.bottom,w=o.scale.linear().domain([-.1,1]).range([0,v]),S=o.svg.axis().scale(w).orient("bottom").ticks(r.xticks),T=a,E={},O={},P={};for(var d in n)n.hasOwnProperty(d)&&(E[d]=Math.max(T.calculate_bandwidth(n[d]),.01),O[d]=T.kernelDensityEstimator(T.gaussianKernel(E[d]),w.ticks(100)),P[d]=O[d](n[d]));var _=o.layout.histogram().frequency(!1).bins(w.ticks(30)),C={};for(var d in n)n.hasOwnProperty(d)&&(C[d]=_(n[d]));var x=[];for(var d in P)P.hasOwnProperty(d)&&(x=x.concat(P[d]));var I=x.map(function(e){return e[1]}),k=[o.min(I),o.max(I)],M=o.scale.linear().domain(k).range([b,0]),A=o.svg.line().x(function(e){return w(e[0])}).y(function(e){return M(e[1])}),D=o.select(c).append("svg").attr("width",v+g.left+(0===r.yticks?0:g.right)+(r.nolegend?0:100)).attr("height",b+g.top+g.bottom).attr("data-test","vaf-plot").append("g").attr("transform","translate("+(0===r.yticks?g.left/2:g.left)+","+g.top+")"),j=D.append("g").attr("transform","translate(0,"+b+")").call(S),R=function(e){return e.attr("fill","none").attr("stroke","#000").attr("shape-rendering","crispEdges")};R(j.selectAll("path")),R(j.selectAll("line")),j.append("text").attr("x",v/2).attr("y",y).attr("font-size",r.label_font_size).style("text-anchor","middle").style("font-style","italic").text("variant allele frequency");var N=[];for(var d in C)C.hasOwnProperty(d)&&(N=N.concat(C[d]));var L,G=N.map(function(e){return e.length}),V=[0,o.max(G)],F=o.svg.axis().scale(M.copy().domain(V)).orient("left").ticks(r.yticks),U=D.append("g").call(F),B=y;B+=0===r.yticks?0:((L=(""+V[1]).split("").length)>=4&&(L+=1.5),7*L/3),U.append("text").attr("transform","rotate(-90)").attr("x",-b/2).attr("y",-B).attr("font-size",r.label_font_size).style("text-anchor","middle").style("font-style","italic").text("mutation count"),R(U.selectAll("path")).attr("display",0===r.yticks?"":"none"),R(U.selectAll("line"));var H=N.map(function(e){return e.y}),W=[o.min(H),o.max(H)],q=M.copy();for(var d in q.domain(W),C)C.hasOwnProperty(d)&&D.selectAll(".bar").data(C[d]).enter().insert("rect").attr("x",function(e){return w(e.x)+1}).attr("y",function(e){return q(e.y)}).attr("class",i[d]+"_viz_hist viz_hist").attr("width",w(C[d][0].dx+C[d][0].x)-w(C[d][0].x)-1).attr("height",function(e){return b-q(e.y)}).attr("fill",l[d].fill).attr("opacity",Object.keys(n).length>1?"0.1":"0.3");for(var d in P)P.hasOwnProperty(d)&&D.append("path").datum(P[d]).attr("d",A).attr("class","curve "+i[d]+"_viz_curve viz_curve").attr("fill","none").attr("stroke",l[d].stroke).attr("stroke-width","1.5px").attr("opacity","0.9").attr("data-legend",function(){return d}).attr("data-legend-pos",function(){return i[d]});if(!r.nolegend&&Object.keys(n).length>1){var z=D.append("g").attr("class","legend").attr("transform","translate("+(v+25)+",0)").style("font-size","13px");o.legend(t,z,13,u,i,s)}return c};o.legend=function(t,n,r,a,i,l){return n.each(function(){var n=o.select(this),u={},s=o.select(n.property("nearestViewportElement")),c=n.attr("data-style-padding")||5,p=n.selectAll(".legend-box").data([!0]),f=n.selectAll(".legend-items").data([!0]);f.enter().append("g").classed("legend-items",!0),s.selectAll("[data-legend]").each(function(){var e=o.select(this);u[e.attr("data-legend")]={pos:e.attr("data-legend-pos")||this.getBBox().y,color:null!=e.attr("data-legend-color")?e.attr("data-legend-color"):"none"!=e.style("fill")?e.style("fill"):e.style("stroke")}}),u=o.entries(u).sort(function(e,t){return e.value.pos-t.value.pos});f.selectAll("text").data(u,function(e){return e.key}).call(function(e){e.enter().append("text")}).call(function(e){e.exit().remove()}).attr("y",function(e,t){return t-.2+.4*t+"em"}).attr("x","2em").text(function(e){var t=e.key;return t.length>10?t.substring(0,4)+"..."+t.slice(-3):t}),f.selectAll("circle").data(u,function(e){return e.key}).call(function(e){e.enter().append("circle")}).call(function(e){e.exit().remove()}).attr("cy",function(e,t){return t-.5+.4*t+"em"}).attr("cx","1.25em").attr("r","0.5em").style("fill",function(e){return e.value.color});for(var d=0,m=Object.keys(u);d<m.length;d++)f.append("text").attr("x","1.65em").attr("y",(d-.5+.4*d)*r).attr("fill","white").attr("font-size","10").attr("dy","0.34em").attr("text-anchor","middle").text(a[u[m[d]].key]).attr("class","sample-icon-text");for(d=0,m=Object.keys(u);d<m.length;d++){var h=u[d].key;if(Object.keys(l).includes(h)){var y=l[h].label,g=l[h].color;f.append("rect").attr("x","-0.75em").attr("y",d-1.06+.4*d+"em").attr("width",function(e){return"1.25em"}).attr("height",function(e){return"1.1em"}).attr("rx",4).attr("ry",4).attr("fill",function(e){return g}).attr("class","genepanel-icon"),f.append("text").attr("x","-0.15em").attr("y",(d-.5+.4*d)*r).attr("fill","white").attr("font-size","10").attr("dy","0.34em").attr("text-anchor","middle").text(y).attr("class","genepanel-icon-text")}}f.selectAll("rect:not(.genepanel-icon)").data(u,function(e){return e.key}).call(function(e){e.enter().append("rect")}).call(function(e){e.exit().remove()}).attr("id",function(e){return e.key+"legend_hover_rect"}).attr("y",function(e,t){return t-1+.4*t-.2+"em"}).attr("x","-1em").attr("width",function(e){return"117px"}).attr("height","1.4em").style("fill",function(e){return e.value.color}).attr("opacity","0").on("mouseover",Object.keys(u).length>1?function(n){e(this).attr("opacity","0.2"),function(t,n,r,o,a){e(t).find(".viz_hist").hide(),e(t).find(".viz_curve").hide(),o&&(e(t).find("."+r[n]+"_viz_hist").show(),e(t).find("."+r[n]+"_viz_hist").attr("opacity","0.5")),a&&e(t).find("."+r[n]+"_viz_curve").show()}(t.div,n.key,i,t.state.show_histogram,t.state.show_curve)}:function(e){}).on("mouseout",function(t){e(this).attr("opacity","0")});for(d=0;d<u.length;d++){var v=u[d].key;v.length>10&&(e("#"+v+"legend_hover_rect").attr("title",v),e("#"+v+"legend_hover_rect").qtip({content:{attr:"title"},style:{classes:"qtip-light qtip-rounded"},position:{my:"center left",at:"center right",viewport:e(window)}}))}f.on("mouseout",Object.keys(u).length>1?function(){var n,r,o;n=t.div,r=t.state.show_histogram,o=t.state.show_curve,r&&(e(n).find(".viz_hist").show(),e(n).find(".viz_hist").attr("opacity","0.1")),o&&e(n).find(".viz_curve").show()}:function(){});var b=f[0][0].getBBox();p.attr("x",b.x-c).attr("y",b.y-c).attr("height",b.height+2*c).attr("width",b.width+2*c)}),n}}).call(this,n(17))},1147:function(e,t,n){e.exports={portalWidth:"patientTable-module__portalWidth__10-JD",framedImage:"patientTable-module__framedImage__95IdD",patientTable:"patientTable-module__patientTable__2vI5g"}},1148:function(e,t,n){},1149:function(e,t,n){e.exports={sampleColorPrimary:"black",sampleColorRecurrence:"orange",sampleColorMetastasis:"red",sampleColorCfdna:"blue",sampleColorXenograft:"pink"}},1150:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEoAAABCCAYAAADwg0AcAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAABgJJREFUeJztnGtsFFUUx1sqQhAD2Igi+E4xRlHRSDTVmKgYNX4iMeonY3xFpRRKAQsq1SKUVqEKviUEWoxAqmAqpWWlFBBLpbZUAYu47+223d3u+707x3Pubqft7uyjwdDp9t7k30d2zsw9v3vuuWfv7E5WllR7Q5WDWoiqR5lQAgoyWFbUMdQLqEmSTCQg3YOqQ4Vk4MBoqAX1WCpIs1FtMujsaEuLmp8IEk23Whl0Ui5qR02VArUoK/Nz0UhVKgVKkcowd7kKWlVe+F3tG9MiH2auUMLExSlBqaVAWZIZfdZkhjaNFwQBxnwjHzp0XvjhDxvMXatLBkqQApVw2l1ZqIRT6ggkAX9kgqjprQHI/8gA2W8miSoJUAkPpnCNjIQw2jnjf9MAMGWfD65dpeWgkoGKRFUQZr3NQaUEZbBxUBwUB8VByU8cFAfFQXFQchYHxUFxUByUnMVBcVAc1NgERUYEphtPkPeejm2TJgP1/Ld9oDQFxf3oUBjA5gmDtj8Ip/V+UPzthWV7LXBFoRomDNlynYL/F+y2sGMHWjAsgMUVBqU5CB06P9Sf8cBStL0O+5Qdc90Xd5ggtpHvLr8A53sDUNPqhAXlBpi4WJ0S1OwSLfOVfHZ4QzCvTJ8aFHXqlMbPTqLvD4jg0gWVqLWj4w9UdMNlbyUGJdX8IQGaurxw0zu6YaClQMU2lSXIBim3WJMU1H0bDMxXak5fGEEZRgbKEN0mTRcUOb16vxUK9ligrN4KR857od89COLEv74ILBzlWFAYTPDaLjMUomMVh+xw/IIXeh0hFqEEq+GsB255dxDWUFBWvAY5+yCe++VqExz4y8NsiEUQfz9aZUwJiny9ZKC67aFhzkxdqoGKRhsEQpFOObxh2HDQxjbzY0HRtBt63unLNVB2wApGPKcQHQQ6nqZwLCiTMyTaTSpQw1Nbe8HsGhwgOlbWoEjkmMoced0fFEBxzgu3lepTgiLdjOeiaUdR4UPbPW0uuCo6jaRAZUev93QMqNe/M8sfFC0G359yidPrrDEAd39oSAtUbrEWvj7uBDtGYhAPa1H5YOZKbRwoiyvE+n3jGh08uaUHdrW6GFi6nicgwMJPeuQPilR12B6xh0iCnb8+PVDTizSwsdHOooOc/tMQgGtWxYOi17ptISaTM8zgECg6fvMvdpizOv5usOxA0d/7TrvZ65SYqWSYty49UBQ92084WW6j6Xf0Hy9cvSIxKANKg2UJRe1BLC1e2mmCOSU6XGnjSwRZgcrBUuCOD/RslKl5sMapPuliS30qUFRGPPSxEdq0fgaY6qNNCjtMK4rPUU6fwFbMV2vM8Ow3fWwgLi+Qrp9kAYqWc1r+r8dQp0ScX2nEgtMjOkSF5KKvehmkWFAEg65NEXAr2j6yyQg/drgZBIqYLiwiF2zsFqMj0aqXrkYVFDlVddgB5Q02VhlbXMOLyd24alHEkZ1UHVVaZ4XKQzaobXezBB6KmrsxmrYecYjRJDtQ9DZkpJU5XZ/qJnLOgoUg5Q7KGZTQqSzISVKZEywqIQg4QaacQxV9eYOd5avsBJX5xYK6F0GRryMCNQtXlWasqDsNftiLEUDlfzJQT3zaA/sxWRNc0m9KH3uPVt3ihPX1NpY75q7Vx9lNXqKG5xAyVe8DtlS5/9Tphm2/OmEd2r5SbYbb35fON8983ivaKc55LgrUnQiGfCWfaWApr6YENQMr4pW1FnGKkMbL7gH5vFlhYzk2JSgpjRdQkuKgOCgOioPioOQrDoqD4qA4KDmLg+KgOCgOSs7ioDgoDipzQG1psrHNfmq0BZsJokY3Ses63eJt+nRBhRMdPGWJCto0kajKpEafh8qvHPlXZXuTRVXJPgvsbLGLITuWG/lQc9IOlY1WuGFN0i9fh6VA/ZxqXk9bpoQvmu3w5THHmBb5MKNIKX6oLYm6pEA9njV+n8eSSMVSoLJR22TQObnoKGpyPKgIrFxUsww6Odo6g8qThjQIKw+1A+WTQYcvtSj10DOz7k8OaTiwu6LAiC49iMqZobKjLmRFnnT0MGqCFI7/AKBNHdZf2IG3AAAAAElFTkSuQmCC"},1151:function(e,t,n){e.exports={portalWidth:"sampleTable-module__portalWidth__2sn4E",framedImage:"sampleTable-module__framedImage__2E0br",sampleTable:"sampleTable-module__sampleTable__37lEE"}},1152:function(e,t,n){},1154:function(e,t,n){e.exports=n(25)(1033)},1156:function(e,t,n){},1158:function(e,t,n){},1159:function(e,t,n){e.exports={portalWidth:"trialMatch-module__portalWidth__3OMBJ",framedImage:"trialMatch-module__framedImage__llM-4",armDiv:"trialMatch-module__armDiv__8Ikbp",criteriaHr:"trialMatch-module__criteriaHr__33xV1",alterationUl:"trialMatch-module__alterationUl__15PAE",genomicSpan:"trialMatch-module__genomicSpan__1MdPT",tooltip:"trialMatch-module__tooltip__3TLty",statusBackground:"trialMatch-module__statusBackground__1izwh",icon:"trialMatch-module__icon__1kFBu",marginLeft:"trialMatch-module__marginLeft__3bEGE",marginRight:"trialMatch-module__marginRight__2Ei8B",matchInfoContainer:"trialMatch-module__matchInfoContainer__2Mbjv",sampleIdsContainer:"trialMatch-module__sampleIdsContainer__nJeC2",genomicInfoContainer:"trialMatch-module__genomicInfoContainer__2rTwv",criteriaContainer:"trialMatch-module__criteriaContainer__10CIJ",firstLeft:"trialMatch-module__firstLeft__3xi9Y",firstRight:"trialMatch-module__firstRight__x9eHB",secondLeft:"trialMatch-module__secondLeft__3fgcR",secondRight:"trialMatch-module__secondRight__Yz5Ho",powered:"trialMatch-module__powered__1pOTQ",statusContainer:"trialMatch-module__statusContainer__1xnON",feedback:"trialMatch-module__feedback__1u4I4",feedbackButton:"trialMatch-module__feedbackButton__2-8zQ"}},1160:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAydJREFUeNrs2F9MUlEYAPBPBFH+iTYs/EfLRJ2rMZuvic2H8sHZew/40LPaSy9t9eBLtdR6qDlXsdbmY7q52VYZulk60GhrOZ8ElykIchVFLlzu7TvGdVkRF7jEC9/27dxxOR+/HeCcew5APvKRj3xkNQqyWbzJ1GrCphfTFE8K04k5gWlddtqpnAERN4RNX+uFFmhvuwjG+jpgYyzYF5dgcuo1bGx6CK4fkdb/+pUgTIv5qaOzi1uwOziGYTiaprlQKMQFg0GOoijO7/dzj0dGOXwfScu/6hWKjcPmfWOD0TT24hkYamsgFov9kSzLQqOxHip0Ovgwv9CtO1U149v87vpbTYnIAzhUVak3WUefgFKhSIjjrzva26Djkpn0u52ooETE0XuuVqstjwbvC8Lx2dV5mXQ3Y//TWQPyODJyxrN1gnEka2uq+TLZAWaC47O5qTE7QDFwJF3uNVJO3D8JwakqDZaBB8MZ4TxeL+yHQhCfxMUBEpy0RGE5d+0GTAWKYY0KpYUjaZudOxw9nLCdogB5nOn6LSjSlMN+OAJDH93HkEJxqy43TL15R8r2izJR/4pTVtTg0sXgBzFARxlwrFNgLC8GlUwiGDdwbxBwhSFr8t2MgYlwLBkxbCOIXPwWOEQqpQWp4HoyXuqS4X5HVspZ0CrkGeMEARF3B3F9yXBHyAgD86se0BRyoNeUZIRLCowvP6/O99wEddWZpDiW+dly+BT3xRMErVwCJ5VFaeNISJPc71XpDVBqaBCMix29zsDYkhsizXpo0Mpg5Kk1ZZwQoOlEU0taOP7eS9siMM634PP5U8YJAeLvrjptHL3tBe/MOLBROi2coIk6crCXM5wg4N6GO2c4IcCJwMrnlHBM+EA0nBCgld7xU5v2aeG42UOcTQxc0nkQNzJh3NB4dl0r3TJVKcjLKhLiokEKtuYmIUr5yFPJFdI368A40olI9+7q1+7IbgBkZTooKJQe4ZjwPuwsO2DbMQ2xUHAcu1wVsiEX/WQBVxVzfPdlluJoypQaiNFhiFBb/NPwQ4QN5/zoI778HTvKQJgtf4qUj3zkKH4IMADm03zZs4fvPwAAAABJRU5ErkJggg=="},1161:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__3hRmD",framedImage:"styles-module__framedImage__WKn6v",zoomControls:"styles-module__zoomControls__uXkD3",zoomButton:"styles-module__zoomButton__17cGd"}},1162:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__2aeY-",framedImage:"styles-module__framedImage__NILoq",Tooltip:"styles-module__Tooltip__1Qxp7"}},1163:function(e,t,n){},779:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(1),i=n.n(a),l=n(20),u=n(1097),s=(n(789),n(17)),c=n.n(s),p=n(1146);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=function(e){function t(e){var n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=m(t).call(this,e),(n=!o||"object"!==f(o)&&"function"!=typeof o?h(r):o).refHandlers={histogramCheckbox:function(e){n.histogramCheckbox=e},curveCheckbox:function(e){n.curveCheckbox=e},div:function(e){n.div=e}};var a=0===n.props.xticks?13:30,i={label_font_size:n.props.label_font_size,xticks:n.props.xticks,yticks:n.props.yticks,nolegend:n.props.nolegend,margin:{top:n.props.margin_top,left:n.props.margin_left,right:n.props.margin_right,bottom:n.props.margin_bottom},width:n.props.width,height:n.props.height};return void 0===i.margin.bottom&&(i.margin.bottom=30+a/2),void 0===i.height&&void 0!==i.margin.top&&(i.height=(500+a)/2-i.margin.top-i.margin.bottom),n.state={show_histogram:!!n.props.init_show_histogram,show_curve:!!n.props.init_show_curve,options:i},n.toggleShowHistogram=n.toggleShowHistogram.bind(h(n)),n.toggleShowCurve=n.toggleShowCurve.bind(h(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){Object(p.a)(this,this.props.data,this.state.options,this.props.order,this.props.colors,this.props.labels,this.props.genepanel_icon_data)}},{key:"componentDidUpdate",value:function(){c()(this.div).find("svg").remove(),Object(p.a)(this,this.props.data,this.state.options,this.props.order,this.props.colors,this.props.labels,this.props.genepanel_icon_data)}},{key:"shouldComponentUpdate",value:function(e,t){return this.histogramCheckbox&&(t.show_histogram?c()(this.div).find(".viz_hist").show():c()(this.div).find(".viz_hist").hide()),this.curveCheckbox&&(t.show_curve?c()(this.div).find(".viz_curve").show():c()(this.div).find(".viz_curve").hide()),t.show_histogram!==this.state.show_histogram||t.show_curve!==this.state.show_curve||!i.a.isEqual(this.props.data,e.data)}},{key:"toggleShowHistogram",value:function(){var e=!this.state.show_histogram;this.setState({show_histogram:e})}},{key:"toggleShowCurve",value:function(){var e=!this.state.show_curve;this.setState({show_curve:e})}},{key:"render",value:function(){var e=[r.createElement("label",{key:"histogram-toggle",style:{marginRight:10}},r.createElement("input",{ref:this.refHandlers.histogramCheckbox,type:"checkbox",checked:this.state.show_histogram,onChange:this.toggleShowHistogram,style:{marginRight:3}}),"histogram"),r.createElement("label",{key:"curve-toggle"},r.createElement("input",{ref:this.refHandlers.curveCheckbox,type:"checkbox",checked:this.state.show_curve,onChange:this.toggleShowCurve,style:{marginRight:3}}),"density estimation")];return r.createElement("div",{style:{display:"inline"},ref:this.refHandlers.div},this.props.show_controls?e:[],this.props.show_controls?r.createElement("br",null):[])}}])&&d(n.prototype,o),a&&d(n,a),t}();g.defaultProps={data:{},order:{},colors:{},labels:{},width:200,height:void 0,margin_left:50,margin_top:20,margin_right:30,margin_bottom:void 0,xticks:3,yticks:8,label_font_size:"11.5px",nolegend:!1,init_show_histogram:!0,init_show_curve:!0,show_controls:!1};var v=n(3);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var O=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),S(this,T(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e={data:this.props.data,colors:this.props.colors,order:this.props.order,show_controls:!1,nolegend:!0,width:64,height:64,label_font_size:"6.5px",xticks:0,yticks:0,margin_bottom:15},t={data:this.props.data,colors:this.props.colors,labels:this.props.labels,order:this.props.order,show_controls:!0,nolegend:!1,init_show_histogram:!0,init_show_curve:!0,genepanel_icon_data:this.props.genePanelIconData};return r.createElement(v.d,{placement:this.props.overlayPlacement,trigger:["hover","focus"],overlay:r.createElement(g,t),arrowContent:r.createElement("div",{className:"rc-tooltip-arrow-inner"}),destroyTooltipOnHide:!1,mouseLeaveDelay:Object(v.N)()?2:.05},r.createElement("div",{className:this.props.cssClass||""},r.createElement(g,e)))}}])&&w(n.prototype,o),a&&w(n,a),t}();O.defaultProps={order:{},colors:{},labels:{},overlayPlacement:"left"};var P=n(2),_=n(21),C="blue",x="P",I={label:"W",color:"#007fff",genePanelId:void 0};function k(e,t){var n=i.a.values(e),r=i.a.values(_.a);if(!e||0===i.a.difference(n,r).length)return{};var o=i()(e).omitBy(function(e){return e in t}).mapValues(function(){return I}).value();return i()(e).pickBy(function(e){return e in t}).forIn(function(e,n){return o[n]=t[e]}),o}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var N=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":R(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},L=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),A(this,D(t).call(this,e))}var n,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=a.reduce(this.props.sampleManager.samples,function(e,t,n){return e[t.id]=n+1,e},{});return r.createElement("div",{style:{display:"flex"}},r.createElement(u.b,{mutations:a.flatten(this.props.mergedMutations),key:Math.random(),sampleManager:this.props.sampleManager,width:this.getTracksWidth(),cnaSegments:this.props.cnaSegments,samples:this.props.samples,mutationGenePanelIconData:this.sampleIdToMutationGenePanelIconData,copyNumberGenePanelIconData:this.sampleIdToCopyNumberGenePanelIconData,onSelectGenePanel:this.props.onSelectGenePanel}),r.createElement(l.If,{condition:this.shouldShowVAFPlot()},r.createElement(O,{data:this.frequencies,order:this.props.sampleManager.sampleIndex,colors:this.props.sampleColors,labels:e,overlayPlacement:"right",cssClass:"vafPlot",genePanelIconData:this.sampleIdToMutationGenePanelIconData})))}},{key:"shouldShowVAFPlot",value:function(){return this.props.mergedMutations.length>0&&this.isFrequencyExist()}},{key:"isFrequencyExist",value:function(){for(var e=0,t=Object.keys(this.frequencies);e<t.length;e++){var n=t[e];if(this.frequencies.hasOwnProperty(n)){var r=!0,o=!1,a=void 0;try{for(var i,l=this.frequencies[n][Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var u=i.value;return!isNaN(u)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}}}return!1}},{key:"getTracksWidth",value:function(){return this.props.containerWidth-(this.shouldShowVAFPlot()?140:40)}},{key:"computeMutationFrequencyBySample",value:function(e){var t,n,r={},o=!0,a=!1,i=void 0;try{for(var l,u=e[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var s=l.value,c=!0,p=!1,f=void 0;try{for(var d,m=s[Symbol.iterator]();!(c=(d=m.next()).done);c=!0){var h=d.value;h.tumorAltCount>=0&&h.tumorRefCount>=0&&(t=h.sampleId,n=h.tumorAltCount/(h.tumorRefCount+h.tumorAltCount),r[t]=r[t]||[],r[t].push(n))}}catch(e){p=!0,f=e}finally{try{c||null==m.return||m.return()}finally{if(p)throw f}}}}catch(e){a=!0,i=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw i}}for(var y=0,g=Object.keys(this.props.sampleOrder);y<g.length;y++){var v=g[y];r[v]=r[v]||[];for(var b=e.length-r[v].length,w=0;w<b;w++)r[v].push(NaN)}return r}},{key:"frequencies",get:function(){return this.computeMutationFrequencyBySample(this.props.mergedMutations)}},{key:"genePanelIds",get:function(){return a.uniq(a.concat(a.values(this.props.sampleIdToMutationGenePanelId),a.values(this.props.sampleIdToCopyNumberGenePanelId)))}},{key:"genePanelIdToIconData",get:function(){return e=this.genePanelIds,t=i.a.uniq(i.a.filter(e,function(e){return void 0!==e})).sort(),n={},i()(t).filter(function(e){return i.a.values(_.a).includes(e)}).each(function(e){var t=Object.assign({},I);t.genePanelId=e,n[e]=t}),i()(t).reject(function(e){return i.a.values(_.a).includes(e)}).each(function(e,t){n[e]={genePanelId:e,label:x+(t+1),color:C}}),n;var e,t,n}},{key:"sampleIdToMutationGenePanelIconData",get:function(){return k(this.props.sampleIdToMutationGenePanelId,this.genePanelIdToIconData)}},{key:"sampleIdToCopyNumberGenePanelIconData",get:function(){return k(this.props.sampleIdToCopyNumberGenePanelId,this.genePanelIdToIconData)}}])&&M(n.prototype,o),s&&M(n,s),t}();N([P.computed],L.prototype,"frequencies",null),N([P.computed],L.prototype,"genePanelIds",null),N([P.computed],L.prototype,"genePanelIdToIconData",null),N([P.computed],L.prototype,"sampleIdToMutationGenePanelIconData",null),N([P.computed],L.prototype,"sampleIdToCopyNumberGenePanelIconData",null);var G=n(96),V=n(1147),F=n.n(V),U=n(127);function B(e,t){var n=Number(e.priority)||0,r=(Number(t.priority)||0)-n;return 0===r?(void 0===e.displayName?"":e.displayName).localeCompare(t.displayName):r}var H=n(6);function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){return!t||"object"!==Z(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Q=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Z(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},$=function(e){function t(){return q(this,t),z(this,K(t).apply(this,arguments))}return Y(t,G["b"]),t}(),J=function(e){function t(){var e;return q(this,t),(e=z(this,K(t).apply(this,arguments))).renderGenePanelLinks=function(t){var n=[],o=t.split(",");return o.forEach(function(t,a){if((t=t.trim()).includes("N/A")||"WXS"===t)n.push(t);else{var i=t.split(" ");n.push(r.createElement("a",{onClick:function(){return e.handleClick(i[0])}},t))}a<o.length-1&&n.push(", ")}),r.createElement("span",null,n)},e}var n,o,a;return Y(t,r["Component"]),n=t,(o=[{key:"getDisplayValue",value:function(e){var t;switch(e.attribute){case"Overall Survival (Months)":t=parseInt(e.value,10).toFixed(0);break;default:t=e.value}return t}},{key:"handleClick",value:function(e){this.props.onSelectGenePanel&&this.props.onSelectGenePanel(e)}},{key:"render",value:function(){var e=this,t=this.props.data&&this.props.data.sort(function(e,t){return B(e.clinicalAttribute,t.clinicalAttribute)}).map(function(e){return{attribute:e.clinicalAttribute.displayName||"",value:e.value}});return r.createElement($,{data:t,columns:[{name:"Attribute",render:function(e){return r.createElement("span",null,e.attribute)},download:function(e){return e.attribute},filter:function(e,t,n){return e.attribute.toString().toUpperCase().indexOf(n)>-1},sortBy:function(e){return e.attribute}},{name:"Value",render:function(t){return Object(v.M)(t.value)?r.createElement("a",{href:t.value,target:"_blank"},t.value):"Gene Panel"===t.attribute?e.renderGenePanelLinks(t.value):r.createElement("span",null,e.getDisplayValue(t))},download:function(t){return e.getDisplayValue(t)},filter:function(e,t,n){return e.value.toString().toUpperCase().indexOf(n)>-1}}],showPagination:!1,showColumnVisibility:!1,className:F.a.patientTable,initialItemsPerPage:U.b,showFilter:!1!==this.props.showFilter,showCopyDownload:!1!==this.props.showCopyDownload})}}])&&W(n.prototype,o),a&&W(n,a),t}();Q([H.default],J.prototype,"handleClick",null);n(1148);function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e,t){return!t||"object"!==ee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oe(e,t){return(oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ae=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ne(this,re(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oe(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement(l.If,{condition:!0===this.props.tooltipEnabled},r.createElement(l.Then,null,this.contentWithTooltip()),r.createElement(l.Else,null,this.mainContent()))}},{key:"tooltipContent",value:function(){var e=this.props,t=e.sample,n=e.extraTooltipText;return r.createElement("div",{style:{maxHeight:400,maxWidth:600,overflow:"auto"}},r.createElement("h5",{style:{marginBottom:1}},r.createElement("span",{className:"sample-inline-tooltip-children"},this.props.children),t.id),n&&r.createElement("h5",null,n),!this.props.hideClinicalTable&&r.createElement(J,{showFilter:!1,showCopyDownload:!1,showTitleBar:!1,data:t.clinicalData,onSelectGenePanel:this.props.onSelectGenePanel}))}},{key:"mainContent",value:function(){var e=this.props.additionalContent,t=r.createElement("svg",{height:"12",width:"12"},this.props.children);return e&&(t=r.createElement("span",null,t,e)),t}},{key:"contentWithTooltip",value:function(){return r.createElement(v.d,{placement:"bottomLeft",trigger:["hover","focus"],overlay:this.tooltipContent(),arrowContent:r.createElement("div",{className:"rc-tooltip-arrow-inner"}),destroyTooltipOnHide:!1,onPopupAlign:v.R,disabled:this.props.disableTooltip},this.mainContent())}}])&&te(n.prototype,o),a&&te(n,a),t}();ae.defaultProps={tooltipEnabled:!0,hideClinicalInfoTable:!1,disableTooltip:!1};n(948);var ie="orange",le={AGE:{primary:!0,formatter:function(e){return"".concat(e," years old")},order:2},BREAST_CANCER_RECEPTOR_STATUS:{primary:!0,order:6},CANCER_TYPE:{primary:!0,order:3},CANCER_TYPE_DETAILED:{primary:!1,order:4},DERIVED_NORMALIZED_CASE_TYPE:{primary:!0,values:{Primary:"black",Progressed:ie,Recurrence:ie,Metastasis:"red"},order:1},DERIVED_SAMPLE_LOCATION:{primary:!1,order:2},DFS_STATUS:{primary:!0,values:{_:"#f00",DiseaseFree:"rgb(0, 128, 0)",Yes:"rgb(0, 128, 0)"},order:9},DFS_MONTHS:{primary:!1,formatter:function(e){return"".concat(e," months")},order:10},DRIVER_MUTATIONS:{primary:!0,order:6},ERG_FUSION_ACGH:{primary:!0,formatter:function(e){return"ERG-fusion aCGH: ".concat(e)},order:6},ETS_RAF_SPINK1_STATUS:{primary:!0,order:6},GLEASON:{primary:!0,formatter:function(e){return"Gleason: ".concat(e)}},GLEASON_SCORE:{primary:!0,order:6},GENDER:{primary:!0,order:1},HISTOLOGY:{primary:!0,order:6},KNOWN_MOLECULAR_CLASSIFIER:{primary:!0,order:5},MOUSE_STRAIN:{primary:!0,order:6},PATIENT_DISPLAY_NAME:{primary:!1,order:0},OS_MONTHS:{primary:!1,formatter:function(e){return"".concat(e," months")},order:8},OS_STATUS:{primary:!0,values:{DECEASED:"#f00",DEAD:"#f00",LIVING:"rgb(0, 128, 0)",ALIVE:"rgb(0, 128, 0)"},order:7},SAMPLE_DISPLAY_NAME:{primary:!1,order:0},SERUM_PSA:{primary:!0,formatter:function(e){return"Serum PSA: ".concat(e)},order:6},SEX:{primary:!0,order:1},TMPRSS2_ERG_FUSION_STATUS:{primary:!0,formatter:function(e){return"TMPRSS2-ERG Fusion: ".concat(e)},order:6},TUMOR_GRADE:{primary:!0,order:6},TUMOR_STAGE_2009:{primary:!0,order:6}};function ue(e,t){return e in t&&pe("order",t[e])?t[e].order:Number.MAX_VALUE}function se(e,t,n,r){var o=void 0!==n&&pe(t,n),a=o&&pe("primary",n[t]),i=o&&pe("formatter",n[t])?n[t].formatter:function(e){return"".concat(e)},l=!!a&&n[t].primary,u=r.indexOf(t),s=0===u?", ":"",c=function(e,t){return e===t.length-1?"":!0===t[e]?", ":" "}(u,r.map(function(e){return function(e,t,n){var r=t.indexOf(e)+1,o=t[r];return void 0!==o&&void 0!==n&&pe("primary",n[o])&&n[o].primary}(e,r,n)})),p=[];return l?p.push(""):p.push("("),p.push(i(e)),l?p.push(""):p.push(")"),[s,p.join(""),c]}function ce(e,t,n){var r=void 0!==n&&pe(t,n)&&pe("values",n[t]),o=r?n[t].values:void 0;return r&&e in o?o[e]:r&&"_"in o?o._:"#333333"}function pe(e,t){return e in t&&void 0!==t[e]}function fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function de(e,t){if(!e)return null;for(var n=0;n<t.length;n+=1){var r=e[t[n]];if(null!=r)return r}return null}function me(e){return function(e){var t,n=s.extend({},e),r=function(e,t){var n,r,o,a=null;for(o=0;o<t.length&&(null==(n=e[t[o]])||((r=n.toLowerCase()).indexOf("metasta")>=0?a="Metastasis":r.indexOf("recurr")>=0?a="Recurrence":r.indexOf("progr")>=0?a="Progressed":r.indexOf("xeno")>=0||r.indexOf("pdx")>=0?a="Xenograft":r.indexOf("cfdna")>=0?a="cfDNA":r.indexOf("prim")>=0&&(a="Primary"),null==a));o+=1);return a}(e,["SAMPLE_CLASS","SAMPLE_TYPE","TUMOR_TISSUE_SITE","TUMOR_TYPE"]);return null!==r&&(n.DERIVED_NORMALIZED_CASE_TYPE=r,null!==(t="Metastasis"===n.DERIVED_NORMALIZED_CASE_TYPE?de(e,["METASTATIC_SITE","TUMOR_SITE"]):"Primary"===n.DERIVED_NORMALIZED_CASE_TYPE?de(e,["PRIMARY_SITE","TUMOR_SITE"]):de(e,["TUMOR_SITE"]))&&(n.DERIVED_SAMPLE_LOCATION=t)),n}(function(e){for(var t=s.extend({},e),n=["not applicable","not available","pending","discrepancy","completed","","null","unknown","na","n/a","[unkown]","[not submitted]","[not evaluated]","[not applicable]","[not available]","[undefined]"],r=Object.keys(e),o=0;o<r.length;o+=1){var a=void 0,i=r[o];if(a=e[i],n.indexOf(a.toLowerCase())>-1)delete t[i];else switch(i){case"OS_MONTHS":case"DFS_MONTHS":case"AGE":s.isNumeric(a)&&(a=Math.floor(a)),t[i]=a;break;case"OS_STATUS":case"DFS_STATUS":a.match(/^(1|0):/)&&(a=a.replace(/^(1|0):/,""),t[i]=a)}}return t}(e))}function he(e){var t=le,n=Object.keys(e).sort(function(e,n){return function(e,t,n){return ue(e,n)-ue(t,n)}(e,n,t)}).filter(function(e){return function(e,t){return void 0!==t&&e in t}(e,t)});return n.map(function(o){var a=e[o],i=fe(se(a,o,t,n),3),l=i[0],u=i[1],s=i[2];return r.createElement("span",{is:!0,style:{color:ce(a,o,t)}},r.createElement("span",{class:"dark-comma"},l),u,r.createElement("span",{class:"dark-comma"},s))})}var ye=n(1149),ge=n.n(ye),ve=n(185),be=n.n(ve);function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ee(e,t,n){return t&&Te(e.prototype,t),n&&Te(e,n),e}function Oe(e,t){return!t||"object"!==we(t)&&"function"!=typeof t?_e(e):t}function Pe(e){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ce(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xe(e,t)}function xe(e,t){return(xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(function(e){function t(e){var n;return Se(this,t),(n=Oe(this,Pe(t).call(this,e))).render=n.render.bind(_e(n)),n}return Ce(t,r["Component"]),Ee(t,[{key:"render",value:function(){var e=this.props,t=e.label,n=e.color,o=e.x,a=e.y;return r.createElement("g",null,r.createElement("circle",{cx:o,cy:a,fill:n,r:this.props.r}),r.createElement("text",{x:o,y:a+5,dy:this.props.textDy,fill:"white",fontSize:10,textAnchor:"middle"},t))}}]),t}()).defaultProps={r:10};var Ie=function(e){function t(e){var n;return Se(this,t),(n=Oe(this,Pe(t).call(this,e))).render=n.render.bind(_e(n)),n}return Ce(t,r["Component"]),Ee(t,[{key:"render",value:function(){var e=this.props,t=e.label,n=e.color,o=e.fillOpacity;return r.createElement("svg",{width:"12",height:"12",className:"case-label-header","data-test":"sample-icon"},r.createElement("g",{transform:"translate(6,6)"},r.createElement("circle",{r:"6",fill:n,fillOpacity:o})),r.createElement("g",{transform:"translate(6,5.5)"},r.createElement("text",{y:"4",textAnchor:"middle",fontSize:"10",fill:"white",style:{cursor:"default"}},t)))}}]),t}();function ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Me(e){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ae=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Me(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};function De(e,t){var n=new Map;return void 0===t?[]:(e.forEach(function(e,r){e.clinicalData.forEach(function(r,o){if(r.clinicalAttributeId===t){var a=n.get(r.value);void 0===a&&(a=[]),a.push(e.id),n.set(r.value,a)}})}),n)}var je=function(){function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.samples=t,this.sampleIdsInHeader=r,this.sampleIndex={},this.sampleLabels={},this.clinicalDataLegacyCleanAndDerived={},this.sampleColors={},this.commonClinicalDataLegacyCleanAndDerived={},t.forEach(function(e,t){o.clinicalDataLegacyCleanAndDerived[e.id]=me(a.fromPairs(e.clinicalData.map(function(e){return[e.clinicalAttributeId,e.value]})));var n="black";"Primary"===o.clinicalDataLegacyCleanAndDerived[e.id].DERIVED_NORMALIZED_CASE_TYPE?n=ge.a.sampleColorPrimary:"Recurrence"===o.clinicalDataLegacyCleanAndDerived[e.id].DERIVED_NORMALIZED_CASE_TYPE||"Progressed"===o.clinicalDataLegacyCleanAndDerived[e.id].DERIVED_NORMALIZED_CASE_TYPE?n=ge.a.sampleColorRecurrence:"Metastasis"===o.clinicalDataLegacyCleanAndDerived[e.id].DERIVED_NORMALIZED_CASE_TYPE?n=ge.a.sampleColorMetastasis:"cfDNA"===o.clinicalDataLegacyCleanAndDerived[e.id].DERIVED_NORMALIZED_CASE_TYPE?n=ge.a.sampleColorCfdna:"Xenograft"===o.clinicalDataLegacyCleanAndDerived[e.id].DERIVED_NORMALIZED_CASE_TYPE&&(n=ge.a.sampleColorXenograft),o.sampleColors[e.id]=n}),["CANCER_TYPE","CANCER_TYPE_DETAILED"].forEach(function(n){e.isSameClinicalAttributeInAllSamples(t,n)&&(o.commonClinicalDataLegacyCleanAndDerived[n]=o.clinicalDataLegacyCleanAndDerived[t[0].id][n],t.forEach(function(e){delete o.clinicalDataLegacyCleanAndDerived[e.id][n]}))}),this.samples=function(e,t,n){var r=[];r=r.concat(e.map(function(e){return e.id})).sort(be.a);var o={};n&&(o=n.filter(function(e){return"SPECIMEN"===e.eventType||"SAMPLE_ACQUISITION"}).reduce(function(e,t){var n=a.find(t.attributes,function(e){return("SAMPLE_ID"===e.key||"SpecimenReferenceNumber"===e.key||"SPECIMEN_REFERENCE_NUMBER"===e.key)&&-1!==r.indexOf(e.value)});return n&&(e[n.value]=t.startNumberOfDaysSinceDiagnosis),e},{}));for(var i=["primary","metastasis","cfdna"],l=[],u=0;u<e.length;u++){var s=e[u].id,c=o[s],p=t[s].DERIVED_NORMALIZED_CASE_TYPE,f=p?i.indexOf(p.toLowerCase()):-1;-1===f&&(f=i.length);var d=r.indexOf(s);l=l.concat({id:s,sampleTypeIndex:f,naturalSortIndex:d,eventOrdering:c})}l=a.orderBy(l,["eventOrdering","sampleTypeIndex","naturalSortIndex"],["asc","asc","asc"]);var m=a.fromPairs(l.map(function(e,t){return[e.id,t]}));return a.sortBy(e,function(e){return m[e.id]})}(t,this.clinicalDataLegacyCleanAndDerived,n),this.samples.forEach(function(e,t){o.sampleIndex[e.id]=t,o.sampleLabels[e.id]=String(t+1)}),this.sampleOrder=a.sortBy(Object.keys(this.sampleIndex),function(e){return o.sampleIndex[e]})}var t,n,o;return t=e,o=[{key:"isSameClinicalAttributeInAllSamples",value:function(e,t){var n=a.uniq(e.map(function(e){var n=e.clinicalData.find(function(e){return e.clinicalAttributeId===t});return n?n.value:n}));return 1===n.length&&n[0]}},{key:"getClinicalAttributeInSample",value:function(e,t){return a.find(e.clinicalData,function(e){return e.clinicalAttributeId===t})}}],(n=[{key:"isSampleVisibleInHeader",value:function(e){return!this.sampleIdsInHeader||this.sampleIdsInHeader.includes(e)}},{key:"getComponentForSample",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4?arguments[4]:void 0,l=arguments.length>5?arguments[5]:void 0,u=a.find(this.samples,function(t){return t.id===e});return u&&r.createElement(ae,{sample:u,extraTooltipText:n,additionalContent:o,onSelectGenePanel:i,disableTooltip:l},r.createElement(Ie,{label:(this.sampleIndex[u.id]+1).toString(),fillOpacity:t,color:this.sampleColors[u.id]}))}},{key:"getColorForSample",value:function(e){return this.sampleColors[e]}},{key:"getSampleIdsInOrder",value:function(){return this.samples.map(function(e){return e.id})}},{key:"getComponentsForSamples",value:function(){var e=this;this.samples.map(function(t){return e.getComponentForSample(t.id)})}},{key:"getSampleLabel",value:function(e){return e in this.sampleLabels?this.sampleLabels[e]:""}},{key:"sampleIdToIndexMap",get:function(){var e={};return this.samples.forEach(function(t,n){e[t.id]=n}),e}}])&&ke(t.prototype,n),o&&ke(t,o),e}();Ae([P.computed],je.prototype,"sampleIdToIndexMap",null);var Re=je;function Ne(e){return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ge(e,t){return!t||"object"!==Ne(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ve(e){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fe(e,t){return(Fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ue=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ge(this,Ve(t).apply(this,arguments))}var o,i,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fe(e,t)}(t,r["Component"]),o=t,(i=[{key:"render",value:function(){return r.createElement("div",null,this.props.patient&&this.getOverlayTriggerPatient(this.props.patient,this.props.studyId,this.props.sampleManager),this.getDarwinUrl(this.props.darwinUrl))}},{key:"getDarwinUrl",value:function(e){if(null!=e&&""!==e){var t=n(1150);return r.createElement("a",{target:"_blank",href:e},r.createElement("img",{style:{paddingLeft:"5px",height:"21px",width:"29px"},src:t}))}return null}},{key:"getPopoverPatient",value:function(e){return e&&r.createElement("div",{key:e.id,style:{maxHeight:400,maxWidth:600,overflow:"auto"}},r.createElement("h5",null,e.id),r.createElement(J,{showFilter:!1,showCopyDownload:!1,showTitleBar:!1,data:e.clinicalData}))}},{key:"getOverlayTriggerPatient",value:function(e,t,n){var o=this,i=Object(a.fromPairs)(e.clinicalData.map(function(e){return[e.clinicalAttributeId,e.value]}));return n&&Object.keys(n.commonClinicalDataLegacyCleanAndDerived).forEach(function(e){i[e]=n.commonClinicalDataLegacyCleanAndDerived[e]}),e&&r.createElement(v.d,{placement:"bottomLeft",trigger:["hover","focus"],overlay:this.getPopoverPatient(e),arrowContent:r.createElement("div",{className:"rc-tooltip-arrow-inner"}),destroyTooltipOnHide:!0,onPopupAlign:v.R},r.createElement("span",{className:"clinical-spans",id:"patient-attributes"},r.createElement("a",{href:"javascript:void(0)",onClick:function(){return o.props.handlePatientClick(e.id)}},e.id),he(me(i))))}}])&&Le(o.prototype,i),l&&Le(o,l),t}(),Be=(n(430),5),He="There are not enough mutations to call mutational signatures for this case.",We=15,qe="This case has a low number of mutations, signatures are highly uncertain.";function ze(e){return(ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ye(e,t){return!t||"object"!==ze(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xe(e){return(Xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ze(e,t){return(Ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Qe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ye(this,Xe(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ze(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement(v.d,{placement:"bottomLeft",trigger:["hover","focus"],overlay:this.tooltipContent(this.props.data,this.props.metadata,this.props.uniqueSampleKey),destroyTooltipOnHide:!1,onPopupAlign:v.R},r.createElement("span",{style:{paddingLeft:2}},r.createElement("a",null,"(Significant Mutational Signatures)")))}},{key:"tooltipContent",value:function(e,t,n){var o=function(e,t,n){var r=i()(e).filter(["uniqueSampleKey",n]).value(),o={numberOfMutationsForSample:0,confidenceStatement:"",significantSignatures:{}},a=!0,l=!1,u=void 0;try{for(var s,c=r[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var p=s.value;if(o.numberOfMutationsForSample=p.numberOfMutationsForSample,p.confidence>.85){o.significantSignatures[p.mutationalSignatureId]=p.value,o.numberOfMutationsForSample<=Be?o.confidenceStatement+=He:o.numberOfMutationsForSample<=We&&(o.confidenceStatement+=qe);var f=!0,d=!1,m=void 0;try{for(var h,y=t[Symbol.iterator]();!(f=(h=y.next()).done);f=!0){var g=h.value;p.mutationalSignatureId===g.mutationalSignatureId&&(o.confidenceStatement+=" "+g.confidenceStatement)}}catch(e){d=!0,m=e}finally{try{f||null==y.return||y.return()}finally{if(d)throw m}}}}}catch(e){l=!0,u=e}finally{try{a||null==c.return||c.return()}finally{if(l)throw u}}return i.a.isEmpty(o.significantSignatures)&&(o.confidenceStatement+="No signatures confidently detected."),o.confidenceStatement=o.confidenceStatement.trim(),o}(e,t,n),a=!0;return i.a.isEmpty(o.significantSignatures)&&(a=!1),r.createElement("div",{style:{maxWidth:250}},r.createElement("span",{className:"small"},o.confidenceStatement),r.createElement("hr",{style:{marginTop:10,marginBottom:10}}),a&&r.createElement("table",null,r.createElement("th",null,"Significant Mutational Signatures"),r.createElement("th",null,"Exposure"),Object.keys(o.significantSignatures).map(function(e){return r.createElement("tr",null,r.createElement("td",{style:{paddingTop:3}},e),r.createElement("td",{style:{paddingTop:3}},(t=o.significantSignatures[e].toString(),n=Math.round(100*parseFloat(t)),r.createElement("div",{className:"progress",style:{position:"relative",width:100,marginBottom:0}},r.createElement("div",{"data-test":"progress-bar",className:"progress-bar ".concat("progress-bar-info"),role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,style:Object.assign({backgroundColor:"darkgray"},{width:"".concat(n,"%")})}),r.createElement("div",{style:{position:"absolute",textShadow:"-1px 0 white, 0 1px white, 1px 0 white, 0 -1px white",width:100,marginTop:2,textAlign:"center"}},n,"%")))));var t,n})))}}])&&Ke(n.prototype,o),a&&Ke(n,a),t}(),$e=n(13),Je=n(31),et=n(38),tt=n(41);function nt(e){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rt(e,t){return!t||"object"!==nt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ot(e){return(ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function at(e,t){return(at=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var it=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return rt(this,(n=ot(t)).call.apply(n,[this,function(e){return e.sampleId+","+e.entrezGeneId},function(e){return e.sampleId+","+e.entrezGeneId},e].concat(o)))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&at(e,t)}(t,tt["a"]),t}();function lt(e){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ut(e,t){return!t||"object"!==lt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function st(e){return(st=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ct(e,t){return(ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pt=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function l(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,l)}u((r=r.apply(e,t||[])).next())})};function ft(e,t){return pt(this,void 0,void 0,regeneratorRuntime.mark(function n(){var r,o,i,l,u,s,c,p;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:for(n.prev=0,r={},o=!0,i=!1,l=void 0,n.prev=5,u=e[Symbol.iterator]();!(o=(s=u.next()).done);o=!0)c=s.value,r[c.sampleId]=r[c.sampleId]||[],r[c.sampleId].push(c.entrezGeneId);n.next=13;break;case 9:n.prev=9,n.t0=n.catch(5),i=!0,l=n.t0;case 13:n.prev=13,n.prev=14,o||null==u.return||u.return();case 16:if(n.prev=16,!i){n.next=19;break}throw l;case 19:return n.finish(16);case 20:return n.finish(13);case 21:return n.next=23,Promise.all(Object.keys(r).map(function(e){return null===t?Promise.reject("No molecular profile id given."):Je.a.fetchMrnaPercentileUsingPOST({molecularProfileId:t,sampleId:e,entrezGeneIds:r[e]})}));case 23:return p=n.sent,n.abrupt("return",a.flatten(p));case 27:throw n.prev=27,n.t1=n.catch(0),n.t1;case 30:case"end":return n.stop()}},n,null,[[0,27],[5,9,13,21],[14,,16,20]])}))}var dt=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ut(this,st(t).call(this,ft,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ct(e,t)}(t,it),t}(),mt=n(24),ht=n.n(mt),yt=n(224),gt=n(18),vt=n(307),bt=n(216),wt=n(218),St=n(57),Tt=n(36);function Et(e){return(Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ot(e,t){return!t||"object"!==Et(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pt(e){return(Pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _t(e,t){return(_t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ct(e){return e.keyword?e.entrezGeneId+"~"+e.keyword:e.entrezGeneId+""}function xt(e,t){return t?e.length>0?Je.a.fetchVariantCountsUsingPOST({molecularProfileId:t,variantCountIdentifiers:e}):Promise.resolve([]):Promise.reject("No mutation molecular profile id given")}var It=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ot(this,Pt(t).call(this,Ct,Ct,xt,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_t(e,t)}(t,tt["a"]),t}();function kt(e){return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mt(e,t){return!t||"object"!==kt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function At(e){return(At=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Dt(e,t){return(Dt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jt(e){return e.entrezGeneId+"~"+e.alteration}function Rt(e,t){return t?e.length?$e.a.fetchCopyNumberCountsUsingPOST({molecularProfileId:t,copyNumberCountIdentifiers:e}):Promise.resolve([]):Promise.reject("No discrete CNA molecular profile id given")}var Nt=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Mt(this,At(t).call(this,jt,jt,Rt,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dt(e,t)}(t,tt["a"]),t}(),Lt=n(381),Gt=n(223),Vt=n(8),Ft=n(364),Ut=n(12);function Bt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ht(e,t,n){var r={};if(2===e[0].alteration)for(var o in n[t])o===Ut.c.AMPLIFICATION&&(r=Bt({},t,n[t][o]));else if(-2===e[0].alteration)for(var a in n[t])a===Ut.c.DELETION&&(r=Bt({},t,n[t][a]));return r}function Wt(e,t,n){var r=Object(_.d)(t,n);return Object(Ut.n)(e,r)}function qt(e){if(e.result&&e.result.length>0){var t=new Set([]);e.result.forEach(function(e){t.add(e.gene.entrezGeneId)});var n=Array.from(t);return Object(Ut.y)(n)}return Promise.resolve({})}var zt=n(309),Kt=n(219),Yt=n(375),Xt=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function l(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,l)}u((r=r.apply(e,t||[])).next())})};function Zt(e){return Xt(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(gt.a)("api/matchminer/api"),t.abrupt("return",mt.post(n+"/trials").set("Content-Type","application/json").send(e).then(function(e){return JSON.parse(e.text).map(function(e){return{id:e.nct_id+"+"+e.protocol_no,nctId:e.nct_id,protocolNo:e.protocol_no,principalInvestigator:e.principal_investigator,phase:e.phase,shortTitle:e.short_title,status:e.status,treatmentList:e.treatment_list}})}));case 2:case"end":return t.stop()}},t)}))}function Qt(e,t){t=function(e){var t=["Control Arm","Placebo Arm"],n=[];return a.forEach(e,function(e){e.armType&&t.includes(e.armType)||n.push(e)}),n}(t);var n=a.groupBy(t,function(e){return e.id}),r=a.map(n,function(t,n){var r,o,i=a.find(e,function(e){return e.id===n}),l={id:i.id,nctId:i.nctId,principalInvestigator:i.principalInvestigator,protocolNo:i.protocolNo,phase:i.phase,shortTitle:i.shortTitle,status:i.status,matches:[],priority:0};return l.matches=function(e,t){var n=a.groupBy(e,function(e){return e.armDescription});return a.map(n,function(e,n){var r={armDescription:n,drugs:[],matches:[],sampleIds:a.uniq(e.map(function(e){return e.sampleId})).sort()};return a.isUndefined(t.treatmentList.step[0].arm)||(r.drugs=function(e,t){var n=[];if(""!==e){var r=a.find(t,function(t){return t.arm_description===e});a.isUndefined(r.drugs)||(n=r.drugs.map(function(e){return e.map(function(e){return e.name})}))}return n}(n,t.treatmentList.step[0].arm)),r.matches=function(e){var t=a.groupBy(e,function(e){return e.trialAgeNumerical}),n=a.map(t,function(e,n){var r=a.uniq(a.map(e,function(e){return e.trialOncotreePrimaryDiagnosis})),o=[],i=[];a.map(r,function(e){a.isUndefined(e)||(e.includes("!")?i.push(e.replace("!","")):o.push(e))});var l,u,s,c={trialAgeNumerical:[n],trialOncotreePrimaryDiagnosis:{positive:o,negative:i}},p=a.filter(t[n],function(e){if(!a.isUndefined(e.genomicAlteration)&&""!==e.genomicAlteration)return!e.genomicAlteration.includes("!")}),f=a.filter(t[n],function(e){if(!a.isUndefined(e.genomicAlteration)&&""!==e.genomicAlteration)return e.genomicAlteration.includes("!")});return p.length>0&&(c.matches=(l=p,u=a.groupBy(l,function(e){return e.matchType}),s={MUTATION:[],CNA:[],MSI:[],WILDTYPE:[]},a.forEach(u,function(e,t){if("MUTATION"===t){var n=a.groupBy(e,function(e){return e.trueHugoSymbol});a.forEach(n,function(e){var t={genomicAlteration:a.uniq(e.map(function(e){return e.genomicAlteration})),patientGenomic:{trueHugoSymbol:e[0].trueHugoSymbol,trueProteinChange:a.uniq(e.map(function(e){return e.trueProteinChange})).sort()}};s.MUTATION.push(t)})}else{var r={genomicAlteration:a.uniq(e.map(function(e){return e.genomicAlteration}))};s[t].push(r)}}),s)),f.length>0&&(c.notMatches=function(e){var t=a.groupBy(e,function(e){return e.matchType}),n={MUTATION:[],CNA:[],MSI:[],WILDTYPE:[]};return a.forEach(t,function(e,t){var r={genomicAlteration:a.uniq(e.map(function(e){return e.genomicAlteration}))};n[t].push(r)}),n}(f)),c});if(n.length>1)return r=n,o=[],i=a.groupBy(r,function(e){return e.trialOncotreePrimaryDiagnosis}),a.forEach(i,function(e){a.forEach(e,function(t,n){0!==n&&(e[0].trialAgeNumerical=e[0].trialAgeNumerical.concat(t.trialAgeNumerical))}),o.push(e[0])}),o;var r,o,i;return n}(e),r})}(t,i),l.priority=(r=l.matches,o=0,a.forEach(r,function(e){a.forEach(e.matches,function(e){o+=function(e){var t=0,n=0;return a.isUndefined(e.matches)||(t=$t(e.matches)),a.isUndefined(e.notMatches)||(n=$t(e.notMatches)),n>0?0===t?2:1:0}(e)})}),o),l});return a.sortBy(r,function(e){return e.priority})}function $t(e){return a.sum([e.MUTATION.length,e.CNA.length,e.MSI.length,e.WILDTYPE.length])}var Jt=n(15),en=n(9);function tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nn(e,t){return!t||"object"!==an(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rn(e){return(rn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function on(e,t){return(on=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function an(e){return(an="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ln,un=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":an(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};!function(e){e.ANY_SAMPLE="anySample",e.ALL_SAMPLES="allSamples"}(ln||(ln={}));var sn=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),nn(this,rn(t).call(this,e))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&on(e,t)}(t,o.a.Component),n=t,(r=[{key:"handleOptionChange",value:function(e){if(this.props.onOptionChanged){var t=e.target;this.props.onOptionChanged(t.value)}}},{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,"Different gene panels were used for the samples."),o.a.createElement("div",null,"Filter mutations for:"),o.a.createElement(Jt.Radio,{value:ln.ANY_SAMPLE,checked:this.props.currentSelection===ln.ANY_SAMPLE,onChange:function(t){return e.handleOptionChange(t)}},"Genes profiled in any sample"),o.a.createElement(Jt.Radio,{value:ln.ALL_SAMPLES,checked:this.props.currentSelection===ln.ALL_SAMPLES,onChange:function(t){return e.handleOptionChange(t)}},"Genes profiled in all samples"))}}])&&tn(n.prototype,r),a&&tn(n,a),t}(),cn=sn=un([en.observer],sn),pn=n(44);function fn(e){return(fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mn(e,t){return!t||"object"!==fn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hn(e){return(hn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yn(e,t){return(yn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var gn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),mn(this,hn(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yn(e,t)}(t,o.a.Component),n=t,(r=[{key:"render",value:function(){return o.a.createElement(ae,{sample:this.props.sample,extraTooltipText:"This gene was not profiled for this sample (absent from gene panel). It is unknown whether it is mutated.",onSelectGenePanel:this.props.onSelectGenePanel,disableTooltip:this.props.disableTooltip},o.a.createElement("svg",{width:"12",height:"12","data-test":"not-profiled-icon"},o.a.createElement("g",{transform:"translate(0,5)"},o.a.createElement("rect",{width:"12",height:"2.5",rx:"1.25",ry:"1.25",fill:"#cccccc",fillOpacity:1}))))}}])&&dn(n.prototype,r),a&&dn(n,a),t}();function vn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var bn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"renderFunction",value:function(t,n,o,a,l,u){if(!n)return r.createElement("span",null);var s=n.samples,c=i.a.map(s,function(e){return e.id}),p=t[0].entrezGeneId,f=e.getPresentSamples(t),d=e.getProfiledSamplesForGene(p,c,o,a),m="This gene was not profiled for this sample (absent from gene panel)",h=s.map(function(e){var t=e.id in f,o=e.id in d&&d[e.id],a="";return t?(f[e.id]||(a="Mutation has supporting reads, but wasn't called. "),o||(a="".concat(a).concat(m))):o||(a="".concat(m,". It is unknown whether it is mutated.")),r.createElement("li",{className:o&&!t?"invisible":""},t?n.getComponentForSample(e.id,f[e.id]?1:.1,a,null,l,u):r.createElement(ae,{sample:e,extraTooltipText:a,onSelectGenePanel:l,disableTooltip:u},r.createElement(gn,{sample:e,onSelectGenePanel:l,disableTooltip:u})))});return r.createElement("div",{style:{position:"relative"},"data-test":"samples-cell"},r.createElement("ul",{style:{marginBottom:0},className:"list-inline list-unstyled"},h))}},{key:"getSortValue",value:function(t,n){if(n){var r=e.getPresentSamples(t),o=[];o.push(Object.keys(r).filter(function(e){return r[e]}).length);var a=!0,i=!1,l=void 0;try{for(var u,s=n.getSampleIdsInOrder()[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var c=u.value;o.push(+!!r[c])}}catch(e){i=!0,l=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw l}}return o}return[]}},{key:"getPresentSamples",value:function(e){return e.reduce(function(e,t,n){return t.molecularProfileId&&Object(pn.p)(t.molecularProfileId)?t.tumorAltCount&&t.tumorAltCount>0&&(e[t.sampleId]=!1):e[t.sampleId]=!0,e},{})}},{key:"getProfiledSamplesForGene",value:function(e,t,n,r){return t.reduce(function(t,o,a){var i=n[o],l=Object(_.mb)(i),u=!l&&!!i&&i in r&&r[i].includes(e);return t[o]=l||u,t},{})}},{key:"getSample",value:function(e){var t=[];return e&&e.forEach(function(e){t.push(e.sampleId)}),1==t.length?t[0]:t}}],(n=null)&&vn(t.prototype,n),o&&vn(t,o),e}(),wn=n(29);function Sn(e){if(e&&"serverConfig"in e){var t=e.serverConfig,n="skin_patientview_filter_genes_profiled_all_samples";if(t&&n in t&&t[n])return ln.ALL_SAMPLES}return ln.ANY_SAMPLE}function Tn(e,t,n,r){return i.a.some(t,function(t){var o=bn.getProfiledSamplesForGene(t,e,n,r);return i.a.values(o).includes(!1)})}var En=n(106),On=n(58),Pn=n(11),_n=n(68);function Cn(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function xn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function In(e){return(In="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var kn=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":In(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},Mn=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function l(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,l)}u((r=r.apply(e,t||[])).next())})};function An(e){return Mn(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!1!==/TCGA/.test(e)){t.next=4;break}return t.abrupt("return",!1);case 4:return t.next=6,ht.a.get(Object(gt.k)(e));case 6:return n=t.sent,t.abrupt("return",n.body&&n.body.total_count&&n.body.total_count>0);case 8:case"end":return t.stop()}},t)}))}function Dn(e,t,n,r){return a.filter(e,function(e){var o=e[0].gene.entrezGeneId,i=bn.getProfiledSamplesForGene(o,t,n,r);return a(i).values().filter(function(e){return e}).value().length===t.length})}function jn(e,t,n,r,o){return{patient:{id:e,clinicalData:r},samples:Object(_.bb)(n,o)}}var Rn=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.appStore=t,this.activeTabId="",this._patientId="",this.urlValidationError=null,this.ajaxErrors=[],this.studyId="",this._sampleId="",this.openResourceTabMap=P.observable.map(),this.mutationTableGeneFilterOption=Sn(Object(v.C)().frontendConfig),this.copyNumberTableGeneFilterOption=Sn(Object(v.C)().frontendConfig),this.mutationMolecularProfile=Object(v.T)({await:function(){return[n.molecularProfilesInStudy]},invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(_.N)(this.molecularProfilesInStudy,this.studyId));case 1:case"end":return e.stop()}},e,this)}))}}),this.discreteMolecularProfile=Object(v.T)({await:function(){return[n.molecularProfilesInStudy]},invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(_.K)(this.molecularProfilesInStudy));case 1:case"end":return e.stop()}},e,this)}))}}),this.mutationMolecularProfileId=Object(v.T)({await:function(){return[n.molecularProfilesInStudy]},invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=Object(_.N)(this.molecularProfilesInStudy,this.studyId))){e.next=5;break}return e.abrupt("return",t.molecularProfileId);case 5:return e.abrupt("return",void 0);case 6:case"end":return e.stop()}},e,this)}))}}),this.uncalledMutationMolecularProfileId=Object(v.T)({await:function(){return[n.molecularProfilesInStudy]},invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(_.P)(this.molecularProfilesInStudy,this.studyId));case 1:case"end":return e.stop()}},e,this)}))}}),this._patientIdsInCohort=[],this.myCancerGenomeData=Object(Ut.C)(),this.mutationalSignatureData=Object(v.T)({invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(_.w)());case 1:case"end":return e.stop()}},e)}))}}),this.mutationalSignatureMetaData=Object(v.T)({invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(_.x)());case 1:case"end":return e.stop()}},e)}))}}),this.hasMutationalSignatureData=Object(v.T)({invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}},e)}))},default:!1}),this.derivedPatientId=Object(v.T)({await:function(){return[n.samples]},invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,o,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,n=!1,r=void 0,e.prev=3,o=this.samples.result[Symbol.iterator]();case 5:if(t=(a=o.next()).done){e.next=11;break}return i=a.value,e.abrupt("return",i.patientId);case 8:t=!0,e.next=5;break;case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),n=!0,r=e.t0;case 17:e.prev=17,e.prev=18,t||null==o.return||o.return();case 20:if(e.prev=20,!n){e.next=23;break}throw r;case 23:return e.finish(20);case 24:return e.finish(17);case 25:return e.abrupt("return","");case 26:case"end":return e.stop()}},e,this,[[3,13,17,25],[18,,20,24]])}))},default:""}),this.clinicalDataPatient=Object(v.T)({await:function(){return"patient"===n.pageMode?[]:[n.derivedPatientId]},invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(_.h)(this.studyId,this.patientId));case 1:case"end":return e.stop()}},e,this)}))},default:[]}),this.samples=Object(v.T)({invoke:function(){return Object(_.E)(n.studyId,n._patientId,n.sampleId)},onError:function(e){n.appStore.siteErrors.push({errorObj:e,dismissed:!1,title:"Samples / Patients not valid"})}},[]),this.allSamplesForPatient=Object(v.T)({await:function(){return[n.derivedPatientId]},invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$e.a.getAllSamplesOfPatientInStudyUsingGET({studyId:this.studyId,patientId:this.derivedPatientId.result,projection:"DETAILED"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}))},default:[]}),this.samplesWithUniqueKeys=Object(v.T)({await:function(){return[n.samples,n.allSamplesForPatient]},invoke:function(){return Promise.resolve(n.samples.result.map(function(e){return n.allSamplesForPatient.result.find(function(t){return t.sampleId===e.sampleId})||e}))}},[]),this.samplesWithoutCancerTypeClinicalData=Object(v.T)({await:function(){return[n.samples,n.clinicalDataForSamples]},invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(_.O)(this.samples,this.clinicalDataForSamples));case 1:case"end":return e.stop()}},e,this)}))}},[]),this.studiesForSamplesWithoutCancerTypeClinicalData=Object(v.T)({await:function(){return[n.samplesWithoutCancerTypeClinicalData]},invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(_.F)(this.samplesWithoutCancerTypeClinicalData));case 1:case"end":return e.stop()}},e,this)}))}},[]),this.studies=Object(v.T)({invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$e.a.getStudyUsingGET({studyId:this.studyId});case 2:return e.t0=e.sent,e.abrupt("return",[e.t0]);case 4:case"end":return e.stop()}},e,this)}))}},[]),this.studyIdToStudy=Object(v.T)({await:function(){return[n.studies]},invoke:function(){return Promise.resolve(a.keyBy(n.studies.result,function(e){return e.studyId}))}},{}),this.cnaSegments=Object(v.T)({await:function(){return[n.samples]},invoke:function(){return Object(_.l)(n.studyId,n.sampleIds)}},[]),this.resourceDefinitions=Object(v.T)({invoke:function(){return $e.a.getAllResourceDefinitionsInStudyUsingGET({studyId:n.studyId})},onResult:function(e){if(e){var t=!0,r=!1,o=void 0;try{for(var a,i=e[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var l=a.value;l.openByDefault&&n.setResourceTabOpen(l.resourceId,!0)}}catch(e){r=!0,o=e}finally{try{t||null==i.return||i.return()}finally{if(r)throw o}}}}}),this.studyResourceData=Object(v.T)({await:function(){return[n.resourceDefinitions]},invoke:function(){var e=[],t=n.resourceDefinitions.result.filter(function(e){return"STUDY"===e.resourceType}),r=[],o=!0,a=!1,i=void 0;try{for(var l,u=t[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var s=l.value;r.push($e.a.getAllStudyResourceDataInStudyUsingGET({studyId:n.studyId,resourceId:s.resourceId,projection:"DETAILED"}).then(function(t){return e.push.apply(e,Cn(t))}))}}catch(e){a=!0,i=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw i}}return Promise.all(r).then(function(){return e})}}),this.sampleResourceData=Object(v.T)({await:function(){return[n.resourceDefinitions,n.samples]},invoke:function(){var e=n.resourceDefinitions.result.filter(function(e){return"SAMPLE"===e.resourceType});if(!e.length)return Promise.resolve({});var t=n.samples.result,r={},o=[],a=!0,i=!1,l=void 0;try{for(var u,s=function(){var t=u.value,a=!0,i=!1,l=void 0;try{for(var s,c=e[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var p=s.value;o.push($e.a.getAllResourceDataOfSampleInStudyUsingGET({sampleId:t.sampleId,studyId:n.studyId,resourceId:p.resourceId,projection:"DETAILED"}).then(function(e){var n;r[t.sampleId]=r[t.sampleId]||[],(n=r[t.sampleId]).push.apply(n,Cn(e))}))}}catch(e){i=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(i)throw l}}},c=t[Symbol.iterator]();!(a=(u=c.next()).done);a=!0)s()}catch(e){i=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(i)throw l}}return Promise.all(o).then(function(){return r})}}),this.patientResourceData=Object(v.T)({await:function(){return[n.resourceDefinitions]},invoke:function(){var e=[],t=n.resourceDefinitions.result.filter(function(e){return"PATIENT"===e.resourceType}),r=[],o=!0,a=!1,i=void 0;try{for(var l,u=t[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var s=l.value;r.push($e.a.getAllResourceDataOfPatientInStudyUsingGET({studyId:n.studyId,patientId:n.patientId,resourceId:s.resourceId,projection:"DETAILED"}).then(function(t){return e.push.apply(e,Cn(t))}))}}catch(e){a=!0,i=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw i}}return Promise.all(r).then(function(){return e})}}),this.resourceIdToResourceData=Object(v.T)({await:function(){return[n.sampleResourceData,n.patientResourceData,n.studyResourceData]},invoke:function(){var e=a.flatMap(n.sampleResourceData.result,function(e){return e}).concat(n.patientResourceData.result).concat(n.studyResourceData.result);return Promise.resolve(a.groupBy(e,function(e){return e.resourceId}))}}),this.pathologyReport=Object(v.T)({await:function(){return[n.derivedPatientId]},invoke:function(){if(n.studyId.toLowerCase().indexOf("tcga")>-1){var e="https://raw.githubusercontent.com/inodb/datahub/a0d36d77b242e32cda3175127de73805b028f595/tcga/pathology_reports/symlink_by_patient",t="https://github.com/inodb/datahub/raw/a0d36d77b242e32cda3175127de73805b028f595/tcga/pathology_reports",r=[];return function n(o,a){return ht.a.get("".concat(e,"/").concat(o,".").concat(a)).then(function(e){var i=e.text.split("/")[1];return r.push({name:"".concat(i),url:"".concat(t,"/").concat(i)}),n(o,a+1)},function(){return r})}(n.patientId,0)}return Promise.resolve([])},onError:function(e){}},[]),this.cosmicData=Object(v.T)({await:function(){return[n.mutationData,n.uncalledMutationData]},invoke:function(){return Object(_.n)(n.mutationData,n.uncalledMutationData)}}),this.mutSigData=Object(v.T)({invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(_.u)(this.studyId));case 1:case"end":return e.stop()}},e,this)}))}}),this.indexedVariantAnnotations=Object(v.T)({await:function(){return[n.mutationData,n.uncalledMutationData]},invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.I)(Object(_.d)(this.mutationData,this.uncalledMutationData),["annotation_summary","hotspots"],Vt.b.serverConfig.isoformOverrideSource,this.genomeNexusClient);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}))},onError:function(e){}},void 0),this.indexedMyVariantInfoAnnotations=Object(v.T)({await:function(){return[n.mutationData,n.uncalledMutationData]},invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.I)(Object(_.d)(this.mutationData,this.uncalledMutationData),["my_variant_info"],Vt.b.serverConfig.isoformOverrideSource,this.genomeNexusClient);case 2:return t=e.sent,e.abrupt("return",Object(Ut.F)(t));case 4:case"end":return e.stop()}},e,this)}))},onError:function(){}}),this.hotspotData=Object(v.T)({await:function(){return[n.mutationData,n.uncalledMutationData]},invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(zt.a)(this.mutationData,this.uncalledMutationData,this.genomeNexusInternalClient));case 1:case"end":return e.stop()}},e,this)}))},onError:function(){}}),this.clinicalDataForAllSamplesForPatient=Object(v.T)({await:function(){return[n.allSamplesForPatient]},invoke:function(){var e={identifiers:n.allSamplesForPatient.result.map(function(e){return{entityId:e.sampleId,studyId:n.studyId}})};return Object(_.g)(e)}}),this.clinicalDataForSamples=Object(v.T)({await:function(){return[n.samples]},invoke:function(){var e={identifiers:n.sampleIds.map(function(e){return{entityId:e,studyId:n.studyId}})};return Object(_.g)(e)}},[]),this.clinicalDataGroupedBySample=Object(v.T)({await:function(){return[n.clinicalDataForSamples]},invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(_.bb)(this.sampleIds,this.clinicalDataForSamples.result));case 1:case"end":return e.stop()}},e,this)}))}},[]),this.clinicalDataGroupedBySampleMap=Object(v.T)({await:function(){return[n.clinicalDataGroupedBySample]},invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(_.ib)(this.clinicalDataGroupedBySample.result));case 1:case"end":return e.stop()}},e,this)}))}},{}),this.getWholeSlideViewerIds=Object(v.T)({await:function(){return[n.clinicalDataGroupedBySample]},invoke:function(){var e=n.clinicalDataGroupedBySample.result;if(e){var t=a.chain(e).map(function(e){return e.clinicalData}).flatten().filter(function(e){return"MSK_SLIDE_ID"===e.clinicalAttributeId}).map(function(e){return e.value}).value();return Promise.resolve(t)}return Promise.resolve([])}}),this.studyMetaData=Object(v.T)({invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$e.a.getStudyUsingGET({studyId:this.studyId}));case 1:case"end":return e.stop()}},e,this)}))}}),this.patientViewData=Object(v.T)({await:function(){return[n.clinicalDataPatient,n.clinicalDataForSamples]},invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jn(this.patientId,this.studyId,this.sampleIds,this.clinicalDataPatient.result,this.clinicalDataForSamples.result));case 1:case"end":return e.stop()}},e,this)}))}},{}),this.patientViewDataForAllSamplesForPatient=Object(v.T)({await:function(){return[n.clinicalDataPatient,n.allSamplesForPatient,n.clinicalDataForAllSamplesForPatient]},invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jn(this.patientId,this.studyId,this.allSamplesForPatient.result.map(function(e){return e.sampleId}),this.clinicalDataPatient.result,this.clinicalDataForAllSamplesForPatient.result));case 1:case"end":return e.stop()}},e,this)}))}}),this.sequencedSampleIdsInStudy=Object(v.T)({invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v.Z,e.next=3,$e.a.getAllSampleIdsInSampleListUsingGET({sampleListId:"".concat(this.studyId,"_sequenced")});case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}},e,this)}))},onError:function(e){}},{}),this.molecularProfilesInStudy=Object(v.T)(function(){return $e.a.getAllMolecularProfilesInStudyUsingGET({studyId:n.studyId})},[]),this.molecularProfileIdToMolecularProfile=Object(v.T)({await:function(){return[n.molecularProfilesInStudy]},invoke:function(){return Promise.resolve(n.molecularProfilesInStudy.result.reduce(function(e,t){return e[t.molecularProfileId]=t,e},{}))}},{}),this.referenceGenes=Object(v.T)({await:function(){return[n.studies,n.discreteCNAData]},invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(_.D)(this.studies.result[0].referenceGenome,this.discreteCNAData.result.map(function(e){return e.gene.hugoGeneSymbol.toUpperCase()})));case 1:case"end":return e.stop()}},e,this)}))},onError:function(e){throw e}}),this.mrnaRankMolecularProfileId=Object(v.T)({await:function(){return[n.molecularProfilesInStudy]},invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(_.M)(this.molecularProfilesInStudy));case 1:case"end":return e.stop()}},e,this)}))}},null),this.discreteCNAData=Object(v.T)({await:function(){return[n.molecularProfileIdDiscrete,n.samples]},invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={sampleIds:this.sampleIds},e.abrupt("return",Object(_.o)(t,this.molecularProfileIdDiscrete));case 2:case"end":return e.stop()}},e,this)}))},onResult:function(e){n.discreteCNACache.addData(e)}},[]),this.molecularData=Object(v.T)({await:function(){return[n.discreteCNAData]},invoke:function(){return Promise.resolve(n.discreteCNAData.result.map(function(e){return Object.assign(Object.assign({},e),{value:e.alteration})}))}},[]),this.gisticData=Object(v.T)({invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(_.t)(this.studyId));case 1:case"end":return e.stop()}},e,this)}))}},{}),this.clinicalEvents=Object(v.T)({await:function(){return[n.patientViewData]},invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$e.a.getAllClinicalEventsOfPatientInStudyUsingGET({studyId:this.studyId,patientId:this.patientId,projection:"DETAILED"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}))}},[]),this.molecularProfileIdDiscrete=Object(v.T)({await:function(){return[n.molecularProfilesInStudy]},invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(_.L)(this.molecularProfilesInStudy));case 1:case"end":return e.stop()}},e,this)}))}}),this.studyToMolecularProfileDiscrete=Object(v.T)({await:function(){return[n.molecularProfileIdDiscrete]},invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={},!this.molecularProfileIdDiscrete.result){e.next=5;break}return e.next=4,$e.a.getMolecularProfileUsingGET({molecularProfileId:this.molecularProfileIdDiscrete.result});case 4:t[this.studyId]=e.sent;case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}},e,this)}))}},{}),this.darwinUrl=Object(v.T)({await:function(){return[n.derivedPatientId]},invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==Vt.b.serverConfig.enable_darwin){e.next=7;break}return e.next=3,ht.a.get(Object(gt.i)(this.sampleIds,this.patientId));case 3:return t=e.sent,e.abrupt("return",t.text);case 7:return e.abrupt("return","");case 8:case"end":return e.stop()}},e,this)}))},onError:function(){}}),this.hasTissueImageIFrameUrl=Object(v.T)({await:function(){return[n.derivedPatientId]},invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",An(this.patientId));case 1:case"end":return e.stop()}},e,this)}))},onError:function(){}},!1),this.uncalledMutationData=Object(v.T)({await:function(){return[n.samples,n.uncalledMutationMolecularProfileId]},invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={sampleIds:this.samples.result.map(function(e){return e.sampleId})},e.abrupt("return",Object(_.v)(t,this.uncalledMutationMolecularProfileId.result));case 2:case"end":return e.stop()}},e,this)}))}},[]),this.coverageInformation=Object(v.T)({await:function(){return[n.mutatedGenes,n.samplesWithUniqueKeys,n.molecularProfilesInStudy]},invoke:function(){return Object(Ft.a)(n.samplesWithUniqueKeys,n.mutatedGenes,function(){return n.molecularProfilesInStudy.result},function(){return[{uniquePatientKey:n.samplesWithUniqueKeys.result[0].uniquePatientKey}]})}},{samples:{},patients:{}}),this.mutationData=Object(v.T)({await:function(){return[n.samples,n.mutationMolecularProfileId]},invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={sampleIds:this.sampleIds},e.abrupt("return",Object(_.v)(t,this.mutationMolecularProfileId.result));case 2:case"end":return e.stop()}},e,this)}))}},[]),this.mutatedGenes=Object(v.T)({await:function(){return[n.mutationData]},invoke:function(){return Promise.resolve(a.uniqBy(n.mutationData.result,function(e){return e.entrezGeneId}).map(function(e){return{hugoGeneSymbol:e.gene.hugoGeneSymbol,entrezGeneId:e.entrezGeneId}}))}}),this.oncoKbCancerGenes=Object(v.T)({invoke:function(){return Vt.b.serverConfig.show_oncokb?Object(_.y)():Promise.resolve([])}},[]),this.oncoKbInfo=Object(v.T)({invoke:function(){return Vt.b.serverConfig.show_oncokb?Object(_.B)():Promise.resolve(Tt.q)}},Tt.q),this.oncoKbAnnotatedGenes=Object(v.T)({await:function(){return[n.oncoKbCancerGenes]},invoke:function(){return Vt.b.serverConfig.show_oncokb?Promise.resolve(a.reduce(n.oncoKbCancerGenes.result,function(e,t){return t.oncokbAnnotated&&(e[t.entrezGeneId]=!0),e},{})):Promise.resolve({})}},{}),this.oncoKbData=Object(v.T)({await:function(){return[n.oncoKbAnnotatedGenes,n.mutationData,n.uncalledMutationData,n.clinicalDataForSamples,n.studiesForSamplesWithoutCancerTypeClinicalData,n.studies]},invoke:function(){return Vt.b.serverConfig.show_oncokb?Object(_.z)(n.uniqueSampleKeyToTumorType,n.oncoKbAnnotatedGenes.result||{},n.mutationData,void 0,n.uncalledMutationData):Promise.resolve({indicatorMap:null,uniqueSampleKeyToTumorType:null})},onError:function(e){}},_.b),this.civicGenes=Object(v.T)({await:function(){return[n.mutationData,n.uncalledMutationData,n.clinicalDataForSamples]},invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vt.b.serverConfig.show_civic?(t=this.mutationData,n=this.uncalledMutationData,r=void 0,r=Object(_.d)(t,n),Object(Ut.m)(r,function(e){return e.gene.entrezGeneId})):{});case 1:case"end":return e.stop()}var t,n,r},e,this)}))},onError:function(e){}},void 0),this.civicVariants=Object(v.T)({await:function(){return[n.civicGenes,n.mutationData,n.uncalledMutationData]},invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Vt.b.serverConfig.show_civic||!this.civicGenes.result){e.next=4;break}return e.abrupt("return",Wt(this.civicGenes.result,this.mutationData,this.uncalledMutationData));case 4:return e.abrupt("return",{});case 5:case"end":return e.stop()}},e,this)}))},onError:function(e){}},void 0),this.cnaOncoKbData=Object(v.T)({await:function(){return[n.oncoKbAnnotatedGenes,n.discreteCNAData,n.clinicalDataForSamples,n.studies]},invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Vt.b.serverConfig.show_oncokb){e.next=4;break}return e.abrupt("return",Object(_.i)(this.uniqueSampleKeyToTumorType,this.oncoKbAnnotatedGenes.result||{},this.discreteCNAData));case 4:return e.abrupt("return",_.b);case 5:case"end":return e.stop()}},e,this)}))},onError:function(e){}},_.b),this.cnaCivicGenes=Object(v.T)({await:function(){return[n.discreteCNAData,n.clinicalDataForSamples]},invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vt.b.serverConfig.show_civic?qt(this.discreteCNAData):{});case 1:case"end":return e.stop()}},e,this)}))},onError:function(e){}},void 0),this.cnaCivicVariants=Object(v.T)({await:function(){return[n.civicGenes,n.mutationData]},invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("complete"!=this.cnaCivicGenes.status){e.next=2;break}return e.abrupt("return",Wt(this.cnaCivicGenes.result));case 2:case"end":return e.stop()}},e,this)}))},onError:function(e){}},void 0),this.copyNumberCountData=Object(v.T)({await:function(){return[n.discreteCNAData]},invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(_.k)(this.discreteCNAData,this.molecularProfileIdDiscrete));case 1:case"end":return e.stop()}},e,this)}))}},[]),this.indexedHotspotData=Object(v.T)({await:function(){return[n.hotspotData]},invoke:function(){return Promise.resolve(Object(Ut.N)(n.hotspotData))}}),this.sampleToMutationGenePanelData=Object(v.T)({await:function(){return[n.mutationMolecularProfileId,n.samples]},invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.mutationMolecularProfileId.result){e.next=2;break}return e.abrupt("return",Object(_.q)(this.mutationMolecularProfileId.result,this.sampleIds));case 2:return e.abrupt("return",{});case 3:case"end":return e.stop()}},e,this)}))}},{}),this.sampleToMutationGenePanelId=Object(v.T)({await:function(){return[n.sampleToMutationGenePanelData]},invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.mapValues(this.sampleToMutationGenePanelData.result,function(e){return e.genePanelId}));case 1:case"end":return e.stop()}},e,this)}))}},{}),this.sampleToDiscreteGenePanelData=Object(v.T)({await:function(){return[n.molecularProfileIdDiscrete,n.samples]},invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.molecularProfileIdDiscrete.result){e.next=2;break}return e.abrupt("return",Object(_.q)(this.molecularProfileIdDiscrete.result,this.sampleIds));case 2:return e.abrupt("return",{});case 3:case"end":return e.stop()}},e,this)}))}},{}),this.sampleToDiscreteGenePanelId=Object(v.T)({await:function(){return[n.sampleToDiscreteGenePanelData]},invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.mapValues(this.sampleToDiscreteGenePanelData.result,function(e){return e.genePanelId}));case 1:case"end":return e.stop()}},e,this)}))}},{}),this.genePanelIdToPanel=Object(v.T)({await:function(){return[n.sampleToMutationGenePanelData,n.sampleToDiscreteGenePanelData]},invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.concat(a.values(this.sampleToMutationGenePanelData.result),a.values(this.sampleToDiscreteGenePanelData.result)),n=a(t).map(function(e){return e.genePanelId}).filter(function(e){return!Object(_.mb)(e)}).value(),e.abrupt("return",Object(_.p)(n));case 3:case"end":return e.stop()}},e,this)}))}},{}),this.genePanelIdToEntrezGeneIds=Object(v.T)({await:function(){return[n.genePanelIdToPanel]},invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a(this.genePanelIdToPanel.result).mapValues(function(e){return a.map(e.genes,function(e){return e.entrezGeneId})}).value());case 1:case"end":return e.stop()}},e,this)}))}},{}),this.mutationTableShowGeneFilterMenu=Object(v.T)({await:function(){return[n.samples,n.sampleToMutationGenePanelId,n.genePanelIdToEntrezGeneIds]},invoke:function(){var e=a.uniq(a.map(n.mergedMutationDataIncludingUncalled,function(e){return e[0].entrezGeneId})),t=n.samples.result.map(function(e){return e.sampleId});return Promise.resolve(t.length>1&&Tn(t,e,n.sampleToMutationGenePanelId.result,n.genePanelIdToEntrezGeneIds.result))}}),this.cnaTableShowGeneFilterMenu=Object(v.T)({await:function(){return[n.samples,n.sampleToMutationGenePanelId,n.genePanelIdToEntrezGeneIds]},invoke:function(){var e=a.uniq(a.map(n.mergedDiscreteCNAData,function(e){return e[0].entrezGeneId})),t=n.samples.result.map(function(e){return e.sampleId});return Promise.resolve(t.length>1&&Tn(t,e,n.sampleToMutationGenePanelId.result,n.genePanelIdToEntrezGeneIds.result))}}),this.trialMatches=Object(v.T)({invoke:function(){return function(e){return Xt(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(gt.a)("api/matchminer/api"),t.abrupt("return",mt.post(n+"/post_trial_match").set("Content-Type","application/json").send(e).then(function(e){return JSON.parse(e.text).map(function(e){return{id:e.nct_id+"+"+e.protocol_no,nctId:e.nct_id,protocolNo:e.protocol_no,gender:e.gender?e.gender:"",matchType:e.match_type?e.match_type:"",armDescription:e.arm_description?e.arm_description:"",armType:e.arm_type?e.arm_type:"",sampleId:e.sample_id,mrn:e.mrn,vitalStatus:e.vital_status?e.vital_status:"",genomicAlteration:e.genomic_alteration?e.genomic_alteration:"",trueHugoSymbol:e.true_hugo_symbol?e.true_hugo_symbol:"",trueProteinChange:e.true_protein_change?e.true_protein_change:"",oncotreePrimaryDiagnosisName:e.oncotreePrimaryDiagnosisName?e.oncotreePrimaryDiagnosisName:"",trialAgeNumerical:e.trial_age_numerical?e.trial_age_numerical:"",trialOncotreePrimaryDiagnosis:e.trial_oncotree_primary_diagnosis?e.trial_oncotree_primary_diagnosis:""}})}));case 2:case"end":return t.stop()}},t)}))}({mrn:n.patientId})}},[]),this.trialIds=Object(v.T)({await:function(){return[n.trialMatches]},invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Set,n=new Set,a.forEach(this.trialMatches.result,function(e){a.isEmpty(e.protocolNo)?t.add(e.nctId):n.add(e.protocolNo)}),e.abrupt("return",{nct_id:Cn(t),protocol_no:Cn(n)});case 4:case"end":return e.stop()}},e,this)}))}},{nct_id:[],protocol_no:[]}),this.trials=Object(v.T)({await:function(){return[n.trialIds]},invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.trialIds.result.protocol_no.length>0||this.trialIds.result.nct_id.length>0)){e.next=2;break}return e.abrupt("return",Zt(this.trialIds.result));case 2:return e.abrupt("return",[]);case 3:case"end":return e.stop()}},e,this)}))}},[]),this.detailedTrialMatches=Object(v.T)({await:function(){return[n.trials,n.trialMatches]},invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.trials.result||!this.trialMatches.result){e.next=2;break}return e.abrupt("return",Qt(this.trials.result,this.trialMatches.result));case 2:return e.abrupt("return",[]);case 3:case"end":return e.stop()}},e,this)}))}},[]),this.oncoKbDataForOncoprint=Object(v.T)({await:function(){return[n.mutationData,n.oncoKbAnnotatedGenes]},invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(_.A)(this.oncoKbAnnotatedGenes,this.mutationData));case 1:case"end":return e.stop()}},e,this)}))}},_.b),this.cnaOncoKbDataForOncoprint=Object(v.T)({await:function(){return[n.oncoKbAnnotatedGenes,n.molecularData,n.molecularProfileIdToMolecularProfile]},invoke:function(){return Mn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(_.j)(this.oncoKbAnnotatedGenes,this.molecularData,this.molecularProfileIdToMolecularProfile));case 1:case"end":return e.stop()}},e,this)}))}},_.b),this.getPutativeDriverInfo=Object(v.T)({await:function(){return[n.getOncoKbMutationAnnotationForOncoprint,n.isHotspotForOncoprint]},invoke:function(){return Promise.resolve(function(e){var t=n.getOncoKbMutationAnnotationForOncoprint.result,r=t&&!(t instanceof Error)&&t(e),o="";return r&&(o=Object(wn.n)(r)),{oncoKb:o,hotspots:!(n.isHotspotForOncoprint.result instanceof Error)&&n.isHotspotForOncoprint.result(e),cbioportalCount:!1,cosmicCount:!1,customDriverBinary:!1}})}}),this.getOncoKbMutationAnnotationForOncoprint=Object(v.T)({await:function(){return[n.oncoKbDataForOncoprint]},invoke:function(){return Object(_.fb)(n.oncoKbDataForOncoprint)}}),this.getOncoKbCnaAnnotationForOncoprint=Object(v.T)({await:function(){return[n.cnaOncoKbDataForOncoprint]},invoke:function(){return Object(_.eb)(n.cnaOncoKbDataForOncoprint,!0)}}),this.isHotspotForOncoprint=Object(v.T)({await:function(){return[n.indexedHotspotData]},invoke:function(){return Object(_.gb)(n.indexedHotspotData)}}),this.entrezGeneIdToGene=Object(v.T)({await:function(){return[n.mutatedGenes,n.referenceGenes]},invoke:function(){return Promise.resolve(a.keyBy([].concat(Cn(n.mutatedGenes.result),Cn(n.referenceGenes.result)),function(e){return e.entrezGeneId}))}}),this.geneticTrackData=Object(v.T)({await:function(){return[n.mutationData,n.discreteCNAData,n.samplesWithUniqueKeys,n.molecularProfileIdDiscrete,n.mutationMolecularProfile,n.discreteMolecularProfile,n.coverageInformation,n.getPutativeDriverInfo,n.entrezGeneIdToGene,n.getOncoKbCnaAnnotationForOncoprint]},invoke:function(){return Promise.resolve(a.mapValues(n.caseAggregatedAlterationDataGroupedByGene,function(e){return Object(On.d)(e.samples,a.values(e.samples)[0][0].hugoGeneSymbol,n.samplesWithUniqueKeys.result,n.coverageInformation.result,a.compact([n.mutationMolecularProfile.result,n.discreteMolecularProfile.result]))}))}}),Object(et.labelMobxPromises)(this),this.internalClient=Je.a}var t,n,r;return t=e,(n=[{key:"isResourceTabOpen",value:function(e){return!!this.openResourceTabMap.get(e)}},{key:"setResourceTabOpen",value:function(e,t){this.openResourceTabMap.set(e,t)}},{key:"setSampleId",value:function(e){e&&(this._patientId=""),this._sampleId=e}},{key:"setPatientId",value:function(e){e&&(this._sampleId=""),this._patientId=e}},{key:"setActiveTabId",value:function(e){this.activeTabId=e}},{key:"clearErrors",value:function(){this.ajaxErrors=[]}},{key:"generateGenomeNexusHgvsgUrl",value:function(e){return Object(gt.q)(e,this.referenceGenomeBuild)}},{key:"patientId",get:function(){return this._patientId?this._patientId:this.derivedPatientId.result}},{key:"sampleId",get:function(){return this._sampleId}},{key:"pageTitle",get:function(){return"patient"===this.pageMode?"Patient: ".concat(this.patientId):"Sample: ".concat(this.sampleId)}},{key:"metaDescription",get:function(){var e="patient"===this.pageMode?this.patientId:this.sampleId;return"".concat(e," from ").concat(this.studyMetaData.result.name)}},{key:"pageMode",get:function(){return this._sampleId?"sample":"patient"}},{key:"caseId",get:function(){return"sample"===this.pageMode?this.sampleId:this.patientId}},{key:"patientIdsInCohort",set:function(e){var t=this;Object(P.runInAction)(function(){return t._patientIdsInCohort=e})},get:function(){var e=Object(Yt.a)();return e||this._patientIdsInCohort}},{key:"studyToCancerType",get:function(){return Object(_.hb)(this.studies.result)}},{key:"mergedDiscreteCNAData",get:function(){return Object(_.jb)(this.discreteCNAData)}},{key:"usingPublicOncoKbInstance",get:function(){return this.oncoKbInfo.result?this.oncoKbInfo.result.publicInstance:Tt.u}},{key:"sampleIds",get:function(){return this.samples.result?this.samples.result.map(function(e){return e.sampleId}):[]}},{key:"mergedMutationData",get:function(){return Object(_.kb)(this.mutationData)}},{key:"mergedMutationDataIncludingUncalled",get:function(){return Object(_.lb)(this.mutationData,this.uncalledMutationData)}},{key:"annotatedExtendedAlterationData",get:function(){var e=this,t=Object(wn.j)(a.flatten(this.mergedMutationDataIncludingUncalledFilteredByGene),this.getPutativeDriverInfo.result,this.entrezGeneIdToGene.result),n=[].concat(Cn(t.data),Cn(t.vusAndGermline),Cn(t.vus),Cn(t.germline)),r=Object(_.J)(a.flatten(this.mergedDiscreteCNADataFilteredByGene).map(function(e){return Object.assign(Object.assign({},e),{value:e.alteration})}),this.entrezGeneIdToGene,this.getOncoKbCnaAnnotationForOncoprint,this.molecularProfileIdToMolecularProfile),o=[].concat(Cn(r.data),Cn(r.vus)).map(function(t){return Object.assign(Object.assign({},t),{molecularProfileAlterationType:e.discreteMolecularProfile.result.molecularAlterationType,alterationType:Pn.a.COPY_NUMBER_ALTERATION,alterationSubType:_n.a[t.value]})}),i=n.map(function(t){var n="fusion"===Object(_n.d)(t.mutationType)?Pn.a.FUSION:Pn.a.MUTATION_EXTENDED;return Object.assign(Object.assign({},t),{molecularProfileAlterationType:e.mutationMolecularProfile.result.molecularAlterationType,alterationType:n,alterationSubType:Object(_n.c)(t)||"",value:0})});return[].concat(Cn(i),Cn(o))}},{key:"caseAggregatedAlterationDataGroupedByGene",get:function(){var e=a.groupBy(this.annotatedExtendedAlterationData,function(e){return e.hugoGeneSymbol});return a.mapValues(e,function(e){return{samples:a.groupBy(e,function(e){return e.uniqueSampleKey})}})}},{key:"mergedMutationDataFilteredByGene",get:function(){return this.mutationTableGeneFilterOption===ln.ALL_SAMPLES?Dn(this.mergedMutationData,this.sampleIds,this.sampleToMutationGenePanelId.result,this.genePanelIdToEntrezGeneIds.result):this.mergedMutationData}},{key:"mergedMutationDataIncludingUncalledFilteredByGene",get:function(){return this.mutationTableGeneFilterOption===ln.ALL_SAMPLES?Dn(this.mergedMutationDataIncludingUncalled,this.sampleIds,this.sampleToMutationGenePanelId.result,this.genePanelIdToEntrezGeneIds.result):this.mergedMutationDataIncludingUncalled}},{key:"mergedDiscreteCNADataFilteredByGene",get:function(){var e=this;return this.copyNumberTableGeneFilterOption===ln.ALL_SAMPLES?a.filter(this.mergedDiscreteCNAData,function(t){var n=t[0].gene.entrezGeneId,r=bn.getProfiledSamplesForGene(n,e.sampleIds,e.sampleToMutationGenePanelId.result,e.genePanelIdToEntrezGeneIds.result);return a(r).values().filter(function(e){return e}).value().length===e.sampleIds.length}):this.mergedDiscreteCNAData}},{key:"existsSomeMutationWithVAFData",get:function(){return a.some(this.mergedMutationDataIncludingUncalled,function(e){return a.some(e,function(e){var t=Object(pn.j)(e);return null!=t&&t>0})})}},{key:"existsSomeMutationWithAscnProperty",get:function(){return Object(_.e)(this.mergedMutationDataIncludingUncalled)}},{key:"uniqueSampleKeyToTumorType",get:function(){return Object(_.S)(this.clinicalDataForSamples,this.studiesForSamplesWithoutCancerTypeClinicalData,this.samplesWithoutCancerTypeClinicalData)}},{key:"mrnaExprRankCache",get:function(){return new dt(this.mrnaRankMolecularProfileId.result)}},{key:"variantCountCache",get:function(){return new It(this.mutationMolecularProfileId.result)}},{key:"discreteCNACache",get:function(){return new yt.a(this.studyToMolecularProfileDiscrete.result)}},{key:"genomeNexusCache",get:function(){return new bt.a(Object(En.a)(["annotation_summary"],this.genomeNexusClient))}},{key:"genomeNexusMutationAssessorCache",get:function(){return new wt.a(Object(En.a)(["annotation_summary","mutation_assessor"],this.genomeNexusClient))}},{key:"pubMedCache",get:function(){return new vt.a}},{key:"copyNumberCountCache",get:function(){return new Nt(this.molecularProfileIdDiscrete.result)}},{key:"cancerTypeCache",get:function(){return new Lt.a}},{key:"mutationCountCache",get:function(){return new Gt.a}},{key:"downloadDataFetcher",get:function(){return new Kt.a(this.mutationData)}},{key:"referenceGenomeBuild",get:function(){if(!this.studies.isComplete)throw new Error("Failed to get studies");return Object(_.W)(this.studies.result)}},{key:"genomeNexusClient",get:function(){return new St.b(this.referenceGenomeBuild)}},{key:"genomeNexusInternalClient",get:function(){return new St.c(this.referenceGenomeBuild)}}])&&xn(t.prototype,n),r&&xn(t,r),e}();kn([P.observable],Rn.prototype,"activeTabId",void 0),kn([P.observable],Rn.prototype,"_patientId",void 0),kn([P.computed],Rn.prototype,"patientId",null),kn([P.observable],Rn.prototype,"urlValidationError",void 0),kn([P.observable],Rn.prototype,"ajaxErrors",void 0),kn([P.observable],Rn.prototype,"studyId",void 0),kn([P.observable],Rn.prototype,"_sampleId",void 0),kn([H.default],Rn.prototype,"isResourceTabOpen",null),kn([H.default,P.action],Rn.prototype,"setResourceTabOpen",null),kn([P.observable],Rn.prototype,"mutationTableGeneFilterOption",void 0),kn([P.observable],Rn.prototype,"copyNumberTableGeneFilterOption",void 0),kn([P.computed],Rn.prototype,"sampleId",null),kn([P.computed],Rn.prototype,"pageTitle",null),kn([P.computed],Rn.prototype,"metaDescription",null),kn([P.computed],Rn.prototype,"pageMode",null),kn([P.computed],Rn.prototype,"caseId",null),kn([P.observable],Rn.prototype,"_patientIdsInCohort",void 0),kn([P.computed],Rn.prototype,"patientIdsInCohort",null),kn([P.computed],Rn.prototype,"studyToCancerType",null),kn([P.computed],Rn.prototype,"mergedDiscreteCNAData",null),kn([P.computed],Rn.prototype,"usingPublicOncoKbInstance",null),kn([P.computed],Rn.prototype,"sampleIds",null),kn([P.computed],Rn.prototype,"mergedMutationData",null),kn([P.computed],Rn.prototype,"mergedMutationDataIncludingUncalled",null),kn([P.computed],Rn.prototype,"annotatedExtendedAlterationData",null),kn([P.computed],Rn.prototype,"caseAggregatedAlterationDataGroupedByGene",null),kn([P.computed],Rn.prototype,"mergedMutationDataFilteredByGene",null),kn([P.computed],Rn.prototype,"mergedMutationDataIncludingUncalledFilteredByGene",null),kn([P.computed],Rn.prototype,"mergedDiscreteCNADataFilteredByGene",null),kn([P.computed],Rn.prototype,"existsSomeMutationWithVAFData",null),kn([P.computed],Rn.prototype,"existsSomeMutationWithAscnProperty",null),kn([P.computed],Rn.prototype,"uniqueSampleKeyToTumorType",null),kn([Object(P.action)("SetSampleId")],Rn.prototype,"setSampleId",null),kn([Object(P.action)("SetPatientId")],Rn.prototype,"setPatientId",null),kn([et.cached],Rn.prototype,"mrnaExprRankCache",null),kn([et.cached],Rn.prototype,"variantCountCache",null),kn([et.cached],Rn.prototype,"discreteCNACache",null),kn([et.cached],Rn.prototype,"genomeNexusCache",null),kn([et.cached],Rn.prototype,"genomeNexusMutationAssessorCache",null),kn([et.cached],Rn.prototype,"pubMedCache",null),kn([et.cached],Rn.prototype,"copyNumberCountCache",null),kn([et.cached],Rn.prototype,"cancerTypeCache",null),kn([et.cached],Rn.prototype,"mutationCountCache",null),kn([et.cached],Rn.prototype,"downloadDataFetcher",null),kn([P.action],Rn.prototype,"setActiveTabId",null),kn([P.action],Rn.prototype,"clearErrors",null),kn([P.computed],Rn.prototype,"referenceGenomeBuild",null),kn([H.default],Rn.prototype,"generateGenomeNexusHgvsgUrl",null),kn([P.computed],Rn.prototype,"genomeNexusClient",null),kn([P.computed],Rn.prototype,"genomeNexusInternalClient",null);var Nn=n(1151),Ln=n.n(Nn);function Gn(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Vn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fn(e){return(Fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Un(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bn(e,t){return!t||"object"!==Fn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Hn(e){return(Hn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qn(e,t)}function qn(e,t){return(qn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var zn=function(e){function t(){return Un(this,t),Bn(this,Hn(t).apply(this,arguments))}return Wn(t,G["b"]),t}(),Kn=function(e){function t(){return Un(this,t),Bn(this,Hn(t).apply(this,arguments))}var n,o,i;return Wn(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e,t,n=(e=this.props.samples,t={columns:[],items:{}},e&&e.forEach(function(e){var n=e.id;t.columns.push({id:n}),e.clinicalData.forEach(function(e){t.items[e.clinicalAttributeId]=t.items[e.clinicalAttributeId]||{},t.items[e.clinicalAttributeId][n]=e.value.toString(),t.items[e.clinicalAttributeId].clinicalAttribute=e.clinicalAttribute,t.items[e.clinicalAttributeId].id=e.clinicalAttributeId})}),t),o=this.prepareData(n),a=[{id:"attribute"}].concat(Gn(n.columns)).map(function(e){return{name:e.id,render:function(t){return Object(v.M)(t[e.id])?r.createElement("a",{href:t[e.id],target:"_blank"},t[e.id]):r.createElement("span",null,t[e.id])},download:function(t){return"".concat(t[e.id])},filter:function(t,n,r){return t[e.id].toString().toUpperCase().indexOf(r)>-1}}});return a[0].sortBy=function(e){return e.attribute},r.createElement(zn,{columns:a,data:o,className:Ln.a.sampleTable,showPagination:!1,initialItemsPerPage:U.b,showColumnVisibility:!1})}},{key:"prepareData",value:function(e){var t=[];return a.each(a.values(e.items).sort(function(e,t){return B(e.clinicalAttribute,t.clinicalAttribute)}),function(n){var r={attribute:n.clinicalAttribute.displayName};e.columns.map(function(e){e.id in n?r[e.id]=n[e.id]:r[e.id]="n/a"}),t.push(r)}),t}}])&&Vn(n.prototype,o),i&&Vn(n,i),t}(),Yn=n(920),Xn=n(856),Zn=n(49),Qn=n(949);function $n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Jn,er=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"renderFunction",value:function(t,n,o){var a=e.getCopyNumberCount(t,n),i=e.makeCohortFrequencyViz(t,a),u=e.getGisticValue(t,o),s=0,c=0;return null!==u&&(s=u.qValue,c=u.peakGeneCount),r.createElement("div",null,null!==i&&i,r.createElement(l.If,{condition:null!==u},r.createElement(l.Then,null,r.createElement(Qn.a,{qValue:s,peakGeneCount:c}))))}},{key:"makeCohortFrequencyViz",value:function(t,n){if(null!==n){var o=n.data;if("complete"===n.status&&o){var a=[o.numberOfSamplesWithAlterationInGene],i=t[0].alteration>0?["red"]:["blue"];return r.createElement(Xn.a,{counts:a,freqColors:i,totalCount:o.numberOfSamples,tooltip:e.tooltipContent(t,o)})}return"complete"===n.status?r.createElement(v.d,{placement:"left",overlay:r.createElement("span",null,"Data not available for this gene and alteration.")},r.createElement("span",{style:{color:"gray",fontSize:"xx-small",textAlign:"center"}},"NA")):r.createElement(v.d,{placement:"left",overlay:r.createElement("span",null,"Error retrieving data.")},r.createElement("span",{style:{color:"gray",fontSize:"xx-small",textAlign:"center"}},"ERROR"))}return r.createElement(v.d,{placement:"left",overlay:r.createElement("span",null,"Querying server for data.")},r.createElement("span",{style:{color:"gray",fontSize:"xx-small",textAlign:"center"}},"LOADING"))}},{key:"tooltipContent",value:function(e,t){var n=t.numberOfSamplesWithAlterationInGene,o=t.numberOfSamplesWithAlterationInGene/t.numberOfSamples,a=r.createElement("b",null,Object(Zn.c)(o)),i=e[0].gene.hugoGeneSymbol,l=-2===e[0].alteration?"deleted":"amplified",u=1===n?"sample":"samples",s=1===n?"has":"have";return r.createElement("span",null,n," ",u," (",a,") in this study ",s," ",l," ",i)}},{key:"getSortValue",value:function(t,n){var r=e.getCopyNumberCount(t,n);return r&&r.data?r.data.numberOfSamplesWithAlterationInGene:null}},{key:"getCopyNumberCount",value:function(e,t){return t.get({entrezGeneId:e[0].entrezGeneId,alteration:e[0].alteration})}},{key:"getGisticValue",value:function(e,t){var n,r=t[e[0].entrezGeneId];if(r){var o=2===e[0].alteration;n=r.find(function(e){return e.amp===o})}return void 0===n?null:n}}],(n=null)&&$n(t.prototype,n),o&&$n(t,o),e}();function tr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}!function(e){e[e.DeepDel=-2]="DeepDel",e[e.AMP=2]="AMP"}(Jn||(Jn={}));var nr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"displayText",value:function(e){return Jn[e[0].alteration]}},{key:"renderFunction",value:function(t){var n=null;switch(t[0].alteration){case-2:n="#0000FF";break;case 2:n="#FF0000"}return n?r.createElement("span",{style:{color:n}},e.displayText(t)):r.createElement("span",null)}},{key:"download",value:function(e){return Jn[e[0].alteration]}},{key:"sortValue",value:function(e){return e[0].alteration}}],(n=null)&&tr(t.prototype,n),o&&tr(t,o),e}(),rr=n(217);function or(){return(or=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ar(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ir=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"getData",value:function(t,n,r,o,i,l,u,s){var c;if(t){var p=void 0,f="complete",d=t[0].gene.hugoGeneSymbol,m=!1,h=!1;!n||n instanceof Error||(m=void 0!==a.find(n.result,function(e){return e.oncokbAnnotated&&e.entrezGeneId===t[0].entrezGeneId}),h=void 0!==a.find(n.result,function(e){return e.entrezGeneId===t[0].entrezGeneId})),r&&r.result instanceof Error?f="error":m&&(!r||!r.result||r.result instanceof Error||"complete"!==r.status||(p=e.getIndicatorData(t,r.result,i,s)),f=r?r.status:"pending"),c={hugoGeneSymbol:d,oncoKbStatus:f,oncoKbIndicator:p,oncoKbGeneExist:m,isOncoKbCancerGene:h,usingPublicOncoKbInstance:void 0===o?Tt.u:o,civicEntry:l&&l.result&&u&&u.result?e.getCivicEntry(t,l.result,u.result):void 0,civicStatus:l&&l.status&&u&&u.status?e.getCivicStatus(l.status,u.status):"pending",hasCivicVariants:!(l&&l.result&&u&&u.result)||e.hasCivicVariants(t,l.result,u.result),myCancerGenomeLinks:[],hotspotStatus:"complete",isHotspot:!1,is3dHotspot:!1}}else c=Tt.d;return c}},{key:"getCivicEntry",value:function(e,t,n){var r=null,o=e[0].gene.hugoGeneSymbol,i=Ht(e,o,n),l=t[o];return!l||a.isEmpty(i)&&""===l.description||(r=Object(Ut.g)(l,i)),r}},{key:"getCivicStatus",value:function(e,t){return"error"===e||"error"===t?"error":"complete"===e&&"complete"===t?"complete":"pending"}},{key:"hasCivicVariants",value:function(e,t,n){var r=e[0].gene.hugoGeneSymbol,o=Ht(e,r,n);return!t[r]||!a.isEmpty(o)}},{key:"getIndicatorData",value:function(e,t,n,r){if(null!==n&&null!==t.indicatorMap){var o=Object(Ut.v)(e[0].gene.entrezGeneId,n[e[0].uniqueSampleKey],Object(rr.a)(e[0].alteration));if(t.indicatorMap[o]){var a=t.indicatorMap[o];if(null===a.query.tumorType&&r){var i=r[e[0].studyId];"mixed"!==i.cancerTypeId&&(a.query.tumorType=i.cancerType.name)}return a}}}},{key:"sortValue",value:function(t,n,r,o,i,l,u){var s=e.getData(t,n,o,r,i,l,u);return a.flatten([Object(Tt.U)(s.oncoKbIndicator),Object(Tt.z)(s.civicEntry),s.isOncoKbCancerGene?1:0])}},{key:"renderFunction",value:function(t,n){var o=e.getData(t,n.oncoKbCancerGenes,n.oncoKbData,n.usingPublicOncoKbInstance,n.uniqueSampleKeyToTumorType,n.civicGenes,n.civicVariants,n.studyIdToStudy);return r.createElement(Tt.k,or({},n,{annotation:o}))}}],(n=null)&&ar(t.prototype,n),o&&ar(t,o),e}(),lr=n(376);n(1152);function ur(e){return(ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cr(e,t){return!t||"object"!==ur(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pr(e){return(pr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fr(e,t){return(fr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var dr=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=cr(this,pr(t).call(this,e))).iconClicked=function(e){n.props.suppressClickBubble&&e.stopPropagation()},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fr(e,t)}(t,o.a.Component),n=t,(r=[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{style:{marginRight:"5px"}},this.props.name),this.props.showIcon&&o.a.createElement(lr.a,{trigger:["click"],overlay:this.props.children},o.a.createElement("i",{className:"fa fa-filter",onClick:this.iconClicked,"data-test":"gene-filter-icon"})))}}])&&sr(n.prototype,r),a&&sr(n,a),t}();function mr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yr(e,t,n){return t&&hr(e.prototype,t),n&&hr(e,n),e}function gr(e,t){return!t||"object"!==Sr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vr(e){return(vr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function br(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wr(e,t)}function wr(e,t){return(wr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Sr(e){return(Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}dr.defaultProps={suppressClickBubble:!0,showIcon:!0};var Tr=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Sr(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},Er=function(e){function t(){return mr(this,t),gr(this,vr(t).apply(this,arguments))}return br(t,r["Component"]),yr(t,[{key:"handleClick",value:function(e){this.props.onSelectGenePanel&&e&&this.props.onSelectGenePanel(e)}},{key:"render",value:function(){return r.createElement(r.Fragment,null,this.renderGenePanelLinks)}},{key:"renderGenePanelLinks",get:function(){var e=this,t=Pr(this.props),n=[];return t.forEach(function(o,a){o&&"N/A"!==o?n.push(r.createElement("a",{onClick:function(){return e.handleClick(o)}},o)):n.push(o),a<t.length-1&&n.push(", ")}),n}}]),t}();Tr([H.default],Er.prototype,"handleClick",null),Tr([P.computed],Er.prototype,"renderGenePanelLinks",null);var Or=function(e){function t(e){return mr(this,t),gr(this,vr(t).call(this,e))}return br(t,r["Component"]),yr(t,[{key:"render",value:function(){var e=this.props,t=e.sampleToGenePanelId,n=e.sampleManager;if(t&&n)return t&&!Object.keys(t).length?r.createElement("i",{className:"fa fa-spinner fa-pulse"}):r.createElement("div",{style:{position:"relative"}},r.createElement("ul",{style:{marginBottom:0},className:"list-inline list-unstyled"},r.createElement(Er,this.props)))}}]),t}(),Pr=function(e){var t=e.data,n=e.sampleToGenePanelId,r=e.sampleManager,o=e.genePanelIdToGene;if(n&&r){var i=r.samples,l=Object(a.map)(i,function(e){return e.id}),u=t[0].entrezGeneId,s=bn.getPresentSamples(t),c=bn.getProfiledSamplesForGene(u,l,n,o);return i.map(function(e){var t=e.id in s;return e.id in c&&c[e.id]&&!t?"":n[e.id]||"N/A"}).filter(function(e){return e})}return[]},_r={renderFunction:function(e){return r.createElement(Or,{data:e.data,sampleToGenePanelId:e.sampleToGenePanelId,sampleManager:e.sampleManager,genePanelIdToGene:e.genePanelIdToGene,onSelectGenePanel:e.onSelectGenePanel})},download:function(e){return Pr(e)},getGenePanelIds:Pr};function Cr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ir(e,t){return!t||"object"!==Dr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kr(e){return(kr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ar(e,t)}function Ar(e,t){return(Ar=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Dr(e){return(Dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var jr=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Dr(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},Rr=function(e){function t(){return xr(this,t),Ir(this,kr(t).apply(this,arguments))}return Mr(t,G["b"]),t}(),Nr=function(e){function t(){return xr(this,t),Ir(this,kr(t).apply(this,arguments))}var n,o,i;return Mr(t,r["Component"]),n=t,(o=[{key:"getCytobandForGene",value:function(e){return this.hugoGeneSymbolToCytoband[e]}},{key:"render",value:function(){var e=this,t=[],n=this.props.sampleIds.length;n>=2&&t.push({name:"Samples",render:function(t){return bn.renderFunction(t,e.props.sampleManager,e.props.sampleToGenePanelId,e.props.genePanelIdToEntrezGeneIds,e.props.onSelectGenePanel,e.props.disableTooltip)},sortBy:function(t){return bn.getSortValue(t,e.props.sampleManager)},download:function(e){return bn.getSample(e)},order:20,resizable:!0}),t.push({name:"Gene",render:function(e){return r.createElement("span",{"data-test":"cna-table-gene-column"},e[0].gene.hugoGeneSymbol)},filter:function(e,t,n){return e[0].gene.hugoGeneSymbol.indexOf(n)>-1},download:function(e){return e[0].gene.hugoGeneSymbol},sortBy:function(e){return e[0].gene.hugoGeneSymbol},headerRender:function(t){return r.createElement(dr,{name:t,showIcon:e.props.showGeneFilterMenu},r.createElement(cn,{onOptionChanged:e.props.onFilterGenes,currentSelection:e.props.currentGeneFilter}))},visible:!0,order:30});var o=function(t){return{data:t,sampleToGenePanelId:e.props.sampleToGenePanelId,sampleManager:e.props.sampleManager,genePanelIdToGene:e.props.genePanelIdToEntrezGeneIds,onSelectGenePanel:e.props.onSelectGenePanel}};t.push({name:"Gene panel",render:function(e){return _r.renderFunction(o(e))},download:function(e){return _r.download(o(e))},sortBy:function(e){return _r.getGenePanelIds(o(e))},visible:!1,order:35}),t.push({name:"CNA",render:nr.renderFunction,filter:function(e,t,n){return nr.displayText(e).toUpperCase().indexOf(n)>-1},download:nr.download,sortBy:nr.sortValue,visible:!0,order:40}),t.push({name:"Annotation",render:function(t){return ir.renderFunction(t,{uniqueSampleKeyToTumorType:e.props.uniqueSampleKeyToTumorType,oncoKbData:e.props.cnaOncoKbData,oncoKbCancerGenes:e.props.oncoKbCancerGenes,usingPublicOncoKbInstance:e.props.usingPublicOncoKbInstance,enableOncoKb:e.props.enableOncoKb,pubMedCache:e.props.pubMedCache,civicGenes:e.props.cnaCivicGenes,civicVariants:e.props.cnaCivicVariants,enableCivic:e.props.enableCivic,enableMyCancerGenome:!1,enableHotspot:!1,userEmailAddress:e.props.userEmailAddress,studyIdToStudy:e.props.studyIdToStudy})},sortBy:function(t){return ir.sortValue(t,e.props.oncoKbCancerGenes,e.props.usingPublicOncoKbInstance,e.props.cnaOncoKbData,e.props.uniqueSampleKeyToTumorType,e.props.cnaCivicGenes,e.props.cnaCivicVariants)},order:50}),t.push({name:"Cytoband",render:function(t){return r.createElement("span",null,e.getCytobandForGene(t[0].gene.hugoGeneSymbol))},sortBy:function(t){return e.getCytobandForGene(t[0].gene.hugoGeneSymbol)},visible:!0,order:60}),t.push({name:"Cohort",render:function(t){return e.props.copyNumberCountCache?er.renderFunction(t,e.props.copyNumberCountCache,e.props.gisticData):r.createElement("span",null)},sortBy:function(t){return e.props.copyNumberCountCache?er.getSortValue(t,e.props.copyNumberCountCache):0},tooltip:r.createElement("span",null,"Alteration frequency in cohort"),defaultSortDirection:"desc",order:80}),1===n&&this.props.mrnaExprRankMolecularProfileId&&t.push({name:"mRNA Expr.",render:function(t){return e.props.mrnaExprRankCache?Yn.a.cnaRenderFunction(t,e.props.mrnaExprRankCache):r.createElement("span",null)},order:70});var i=a.sortBy(t,function(e){return e.order});return r.createElement("div",null,"unavailable"===this.props.status&&r.createElement("div",{className:"alert alert-info",role:"alert"},"Copy Number Alterations are not available."),"available"===this.props.status&&r.createElement(Rr,{columns:i,data:this.props.data,initialSortColumn:"Annotation",initialSortDirection:"desc",initialItemsPerPage:10,itemsLabel:"Copy Number Alteration",itemsLabelPlural:"Copy Number Alterations",showCountHeader:!0,columnVisibility:this.props.columnVisibility,columnVisibilityProps:this.props.columnVisibilityProps}))}},{key:"hugoGeneSymbolToCytoband",get:function(){return this.props.referenceGenes.reduce(function(e,t){return e[t.hugoGeneSymbol]=t.cytoband||"",e},{})}}])&&Cr(n.prototype,o),i&&Cr(n,i),t}();Nr.defaultProps={enableOncoKb:!0,enableCivic:!1,showGeneFilterMenu:!0},jr([P.computed],Nr.prototype,"hugoGeneSymbolToCytoband",null);var Lr=Nr=jr([en.observer],Nr),Gr=(n(1153),n(197)),Vr=n(1155),Fr=["SAMPLE_ID","SPECIMEN_REFERENCE_NUMBER","SpecimenReferenceNumber"];function Ur(e,t,n,r,o,i,l){if(0!==i.length){var u=Vr.clinicalTimelineParser(i);if(0!==u.length){var s=window.location.href.includes("genie_bpc");if(s){var p=a.find(u,function(e){return"Status"===e.label||"Med Onc Assessment"==e.label});p&&(p.label="Med Onc Assessment",p.times.forEach(function(e){var t=a.find(e.tooltip_tables[0],function(e){return"STATUS"===e[0]})[1].toLowerCase();t.includes("indeter")?e.color="white":t.includes("stable")?e.color="gainsboro":t.includes("mixed")?e.color="goldenrod":t.includes("improving")?e.color="rgb(44, 160, 44)":t.includes("worsening")&&(e.color="rgb(214, 39, 40)")}));var f=a.find(u,function(e){return"Imaging"===e.label});f&&f.times.forEach(function(e){var t=a.find(e.tooltip_tables[0],function(e){return"IMAGE_OVERALL"===e[0]});(t=t?t[1].toLowerCase():"indeterminate").includes("indeter")||t.includes("does not mention")?e.color="white":t.includes("stable")?e.color="gainsboro":t.includes("mixed")?e.color="goldenrod":t.includes("improving")?e.color="rgb(44, 160, 44)":t.includes("worsening")&&(e.color="rgb(214, 39, 40)")})}var d,m,h=a.find(u,function(e){return"Specimen"===e.label});if(h&&(h.times=a.sortBy(h.times,function(e){var n=1/0,r=a.filter(e.tooltip_tables[0],function(e){return Fr.includes(e[0])});return r&&(r.length>1?console.warn("More than 1 specimen reference number found in tooltip table"):1===r.length&&-1===(n=t.indexOf(r[0][1]))&&(n=1/0)),n})),!window.location.href.includes("mskimpact_test_june"))for(m=Object.keys(n).filter(function(e){return/OS_STATUS$/.test(e)}).map(function(e){return e.substr(0,e.length-"OS_STATUS".length)}),d=0;d<m.length;d++){var y=m[d];if("1:DECEASED"===n[y+"OS_STATUS"]&&y+"OS_MONTHS"in n){var g=Math.round(30.4*parseFloat(n[y+"OS_MONTHS"])),v={starting_time:g,ending_time:g,display:"circle",color:"#000",tooltip_tables:[[["START_DATE",g],["STATUS","DECEASED"]]]},b=u.filter(function(e){return"Status"===e.label})[0];b?b.times=b.times.concat(v):u=u.concat({label:"Status",times:[v]});break}}window.pvTimeline=Vr.clinicalTimeline().width(l).data(u).divId("#timeline").setTimepointsDisplay("Imaging","square").orderTracks(["Specimen","Surgery","Med Onc Assessment","Status","Diagnostics","Diagnostic","Imaging","Lab_test","Treatment"]).splitByClinicalAttributes("Lab_test","TEST"),window.pvTimeline.data().filter(function(e){return"Lab_test"===e.parent_track&&a.every(e.times.map(function(e){return 1===e.tooltip_tables.length&&e.tooltip_tables[0].filter(function(e){return"RESULT"===e[0]}).length>0}))}).map(function(e){return e.label}).forEach(function(e){window.pvTimeline=window.pvTimeline.sizeByClinicalAttribute(e,"RESULT")}),window.pvTimeline=s?window.pvTimeline.orderTracks(["Sample acquisition","Sequencing","Surgery","Med Onc Assessment","Status","Diagnostics","Diagnostic","Imaging","Lab_test","Treatment"]).setTimepointsDisplay("Imaging","circle").splitByClinicalAttributes("Treatment",["TREATMENT_TYPE","AGENT"]).enableTrackTooltips(!1).plugins([{obj:new Vr.trimClinicalTimeline("Trim Timeline"),enabled:!0}]).addPostTimelineHook(function(){c()("circle[id^='timelineItem_2']").attr("stroke","gray"),c()("circle[id^='timelineItem_2']").attr("stroke-width","0.5px"),c()("circle[id^='timelineItem_2']").attr("r","4.5"),c()("circle[id^='timelineItem_3']").attr("stroke","gray"),c()("circle[id^='timelineItem_3']").attr("stroke-width","0.5px"),c()("circle[id^='timelineItem_3']").attr("r","4.5"),c()("circle[id^='timelineItem_4']").attr("stroke","gray"),c()("circle[id^='timelineItem_4']").attr("stroke-width","0.5px"),c()("circle[id^='timelineItem_4']").attr("r","4.5")}.bind(this)):window.pvTimeline.splitByClinicalAttributes("Treatment",["TREATMENT_TYPE","SUBTYPE","AGENT"]).splitByClinicalAttributes("Diagnosis",["SUBTYPE"]).collapseAll().enableTrackTooltips(!1).plugins([{obj:new Vr.trimClinicalTimeline("Trim Timeline"),enabled:!0}]);var w=window.pvTimeline.data().reduce(function(e,t,n){return t.times.length>0&&a.every(t.times.map(function(e){return e.tooltip_tables.length>0&&a.every(e.tooltip_tables.map(function(e){return e.filter(function(e){return Fr.includes(e[0])}).length>0}))}))?a.concat(e,[{label:t.label,index:n,className:".timelineSeries_".concat(n)}]):e},[]);w&&w.length>0&&(w.forEach(function(e){window.pvTimeline.toggleTrackCollapse(e.label)}),window.pvTimeline.addPostTimelineHook(function(e,t,n,r){for(var o=function(e,t){var n=r.label[t],o=r.color[t];e.select("circle").attr("fill",o),e.append("text").attr("y",4).attr("r",6).attr("text-anchor","middle").attr("font-size",10).attr("fill","white").text(n)},a=0;a<t.length;a++){var i=t[a],l=n[i],u=[i],s=l.OTHER_SAMPLE_ID;s&&(u=u.concat(s)),e.forEach(function(e){var t=Gr.selectAll(e).filter(function(e){if(1===e.tooltip_tables.length){var t=e.tooltip_tables[0].filter(function(e){return Fr.includes(e[0])})[0];if(t)return-1!==u.indexOf(t[1])}});if(t[0][0]){var n=document.createElementNS("http://www.w3.org/2000/svg","g");null!==t.attr("cx")&&null!==t.attr("cy")&&c()(n).attr("transform","translate("+t.attr("cx")+","+t.attr("cy")+")"),c()(t[0]).removeAttr("cx"),c()(t[0]).removeAttr("cy"),c()(t[0]).removeAttr("style"),c()(t[0]).qtip("destroy"),c()(t[0]).unbind("mouseover mouseout"),c()(t[0]).wrap(n),(n=c()(t[0]).parent()).prop("__data__",c()(t[0]).prop("__data__")),o(Gr.select(n.get(0)),i),window.pvTimeline.addDataPointTooltip(n)}})}}.bind(this,w.map(function(e){return e.className}),t,r,o))),window.pvTimeline(),c()("#timeline-container").show()}}}n(947),n(1098),n(1156);function Br(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hr(e,t){return!t||"object"!==zr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Wr(e){return(Wr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qr(e,t){return(qr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zr(e){return(zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Kr=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":zr(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};n(1154);var Yr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Hr(this,Wr(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qr(e,t)}(t,r["Component"]),n=t,(o=[{key:"shouldComponentUpdate",value:function(e){return e.width!==this.currentWidth&&this.drawTimeline(e.width),!1}},{key:"componentDidMount",value:function(){this.drawTimeline(this.props.width)}},{key:"drawTimeline",value:function(e){var t=this.props.store.patientViewData.result.samples.reduce(function(e,t){return e[t.id]=t.clinicalData.reduce(function(e,t){return e[t.clinicalAttributeId]=t.value,e},{}),e},{}),n=this.props.sampleManager.getSampleIdsInOrder();this.props.store.studyId,this.props.store.patientId;Ur(0,n,this.props.store.patientViewData.result.patient.clinicalData.reduce(function(e,t){return e[t.clinicalAttributeId]=t.value,e},{}),t,{color:this.props.sampleManager.sampleColors,label:this.props.sampleManager.sampleLabels,index:this.props.sampleManager.sampleIndex},this.props.store.clinicalEvents.result.map(function(e){return{eventType:e.eventType,patientId:e.patientId,startDate:a.isUndefined(e.startNumberOfDaysSinceDiagnosis)?null:e.startNumberOfDaysSinceDiagnosis,stopDate:a.isUndefined(e.endNumberOfDaysSinceDiagnosis)?null:e.endNumberOfDaysSinceDiagnosis,eventData:e.attributes.reduce(function(e,t){return e[t.key]=t.value,e},{})}}),e),this.currentWidth=e}},{key:"getSvg",value:function(){return this.svgContainer.firstChild}},{key:"render",value:function(){var e=this;return r.createElement("div",{id:"timeline-container",className:"timelineContainer"},r.createElement("div",{id:"timeline",ref:function(t){e.svgContainer=t}}),r.createElement(v.e,{buttons:["PDF","PNG","SVG"],dataExtension:"tsv",getSvg:this.getSvg,filename:"timeline",dontFade:!0,type:"button",style:{position:"absolute",top:0,right:5}}))}}])&&Br(n.prototype,o),i&&Br(n,i),t}();Kr([H.default],Yr.prototype,"getSvg",null);var Xr=n(942),Zr=n(921),Qr=n(820);function $r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Jr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"getComponentForSampleArgs",value:function(e){var t=e.tumorAltCount,n=1,r="";return Object(pn.p)(e.molecularProfileId)&&(t>0?(n=.1,r="Mutation has supporting reads, but wasn't called"):(n=0,r="Mutation has 0 supporting reads and wasn't called")),{opacity:n,extraTooltipText:r}}},{key:"convertMutationToSampleElement",value:function(t,n,o,a){var i=t.tumorAltCount,l=t.tumorRefCount;if(i<0||l<0)return null;var u=i/(i+l),s=(isNaN(u)?0:u)*e.maxBarHeight,c=e.maxBarHeight-s,p=r.createElement("rect",{x:o,y:c,width:e.barWidth,height:s,fill:n}),f="".concat(Object(pn.p)(t.molecularProfileId)?"(uncalled) ":"","(").concat(i," variant reads out of ").concat(i+l," total)"),d=r.createElement("span",null,r.createElement("strong",null,Object(Qr.b)(u))," ",f);return{sampleId:t.sampleId,bar:p,component:a,text:d,freq:u}}},{key:"renderFunction",value:function(t,n){if(!n)return r.createElement("span",null);var o=n.getSampleIdsInOrder(),a=o.reduce(function(t,n,r){return t[n]=e.indexToBarLeft(r),t},{}),i=t.map(function(t){var r=e.getComponentForSampleArgs(t);return e.convertMutationToSampleElement(t,n.getColorForSample(t.sampleId),a[t.sampleId],n.getComponentForSample(t.sampleId,r.opacity,r.extraTooltipText))}).reduce(function(e,t){return t&&(e[t.sampleId]=t),e},{}),l=o.map(function(e){return i[e]}).filter(function(e){return!!e}),u=l.map(function(e){return r.createElement("span",{key:e.sampleId},e.component," ",e.text,r.createElement("br",null))}),s=o.map(function(e){return i[e]&&i[e].freq||void 0}),c=l.map(function(e){return e.bar}),p=r.createElement("span",null);if(1===n.samples.length?p=r.createElement("span",null,isNaN(s[0])?"":Object(Qr.b)(s[0])):u.length>0&&(p=r.createElement("svg",{width:e.getSVGWidth(o.length),height:e.maxBarHeight},c)),u.length>0&&s.filter(function(e){return void 0!==e}).length>0){p=r.createElement(v.d,{placement:"left",overlay:function(){return r.createElement("span",null,u)},arrowContent:r.createElement("div",{className:"rc-tooltip-arrow-inner"}),destroyTooltipOnHide:!0},p)}return p}},{key:"getSVGWidth",value:function(t){return t*e.barWidth+(t-1)*e.barSpacing}},{key:"getSortValue",value:function(t,n){if(!n)return[null];var r=t.reduce(function(e,t){return e[t.sampleId]=t,e},{});return n.getSampleIdsInOrder().map(function(e){return r[e]}).map(function(t){return e.calcFrequency(t)||null})}},{key:"isVisible",value:function(e,t){if(t){var n=!0,r=!1,o=void 0;try{for(var i,l=t[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var u=i.value,s=this.getSortValue(u,e);if(a.compact(s).length>0)return!0}}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}}return!1}},{key:"getFrequency",value:function(t){var n=[];if(t){var r=!0,o=!1,a=void 0;try{for(var i,l=t[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var u=i.value,s=e.calcFrequency(u),c=null===s?"":String(s);n.push(c)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}}return 1===n.length?n[0]:n}},{key:"calcFrequency",value:function(e){if(!e)return null;var t=e.tumorAltCount,n=e.tumorRefCount;return t<0||n<0?null:t/(t+n)}}],(n=null)&&$r(t.prototype,n),o&&$r(t,o),e}();Jr.barWidth=6,Jr.barSpacing=3,Jr.maxBarHeight=12,Jr.indexToBarLeft=function(e){return e*(Jr.barWidth+Jr.barSpacing)};var eo=n(865),to=n(943),no=n(945),ro=n(821),oo=n(946),ao=n(308);function io(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lo(e,t){return!t||"object"!==po(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function uo(e,t,n){return(uo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=so(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function so(e){return(so=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function co(e,t){return(co=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function po(e){return(po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var fo=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":po(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},mo=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),lo(this,so(t).call(this,e))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&co(e,t)}(t,Xr["b"]),n=t,(o=[{key:"getSamples",value:function(){return this.props.sampleIds?this.props.sampleIds:[]}},{key:"generateColumns",value:function(){var e=this;uo(so(t.prototype),"generateColumns",this).call(this),this._columns[Xr.a.TUMOR_ALLELE_FREQ]={name:"Allele Freq",render:function(t){return Jr.renderFunction(t,e.props.sampleManager)},sortBy:function(t){return Jr.getSortValue(t,e.props.sampleManager)},download:function(e){return Jr.getFrequency(e)},tooltip:r.createElement("span",null,"Variant allele frequency in the tumor sample"),visible:Jr.isVisible(this.props.sampleManager,this.props.dataStore?this.props.dataStore.allData:this.props.data)},this._columns[Xr.a.SAMPLES]={name:"Samples",render:function(t){return bn.renderFunction(t,e.props.sampleManager,e.props.sampleToGenePanelId,e.props.genePanelIdToEntrezGeneIds,e.props.onSelectGenePanel,e.props.disableTooltip)},sortBy:function(t){return bn.getSortValue(t,e.props.sampleManager)},download:function(e){return bn.getSample(e)},resizable:!0};var n=function(t){return{data:t,sampleToGenePanelId:e.props.sampleToGenePanelId,sampleManager:e.props.sampleManager,genePanelIdToGene:e.props.genePanelIdToEntrezGeneIds,onSelectGenePanel:e.props.onSelectGenePanel}};this._columns[Xr.a.GENE_PANEL]={name:"Gene panel",render:function(e){return _r.renderFunction(n(e))},download:function(e){return _r.download(n(e))},visible:!1,sortBy:function(e){return _r.getGenePanelIds(n(e))}},this._columns[Xr.a.CANCER_CELL_FRACTION]=Object(no.a)(this.getSamples(),this.props.sampleManager),this._columns[Xr.a.CLONAL]=Object(ro.c)(this.getSamples(),this.props.sampleManager),this._columns[Xr.a.EXPECTED_ALT_COPIES]=Object(oo.a)(this.getSamples(),this.props.sampleManager),this._columns[Xr.a.ASCN_COPY_NUM]=Object(to.a)(this.getSamples(),this.props.sampleIdToClinicalDataMap,this.props.sampleManager),this._columns[Xr.a.REF_READS_N].render=function(t){return Zr.a.renderFunction(t,e.getSamples(),"normalRefCount")},this._columns[Xr.a.REF_READS_N].download=function(e){return Zr.a.getReads(e,"normalRefCount")},this._columns[Xr.a.VAR_READS_N].render=function(t){return Zr.a.renderFunction(t,e.getSamples(),"normalAltCount")},this._columns[Xr.a.VAR_READS_N].download=function(e){return Zr.a.getReads(e,"normalAltCount")},this._columns[Xr.a.REF_READS].render=function(t){return Zr.a.renderFunction(t,e.getSamples(),"tumorRefCount")},this._columns[Xr.a.REF_READS].download=function(e){return Zr.a.getReads(e,"tumorRefCount")},this._columns[Xr.a.VAR_READS].render=function(t){return Zr.a.renderFunction(t,e.getSamples(),"tumorAltCount")},this._columns[Xr.a.VAR_READS].download=function(e){return Zr.a.getReads(e,"tumorAltCount")},this._columns[Xr.a.EXON].sortBy=void 0,this._columns[Xr.a.EXON].render=function(t){return eo.a.renderFunction(t,e.props.genomeNexusCache,!0)},this._columns[Xr.a.GENE].headerRender=function(t){return r.createElement(dr,{name:t,showIcon:e.props.showGeneFilterMenu},r.createElement(cn,{onOptionChanged:e.props.onFilterGenes,currentSelection:e.props.currentGeneFilter}))},this._columns[Xr.a.SAMPLES].order=5,this._columns[Xr.a.GENE].order=20,this._columns[Xr.a.GENE_PANEL].order=25,this._columns[Xr.a.PROTEIN_CHANGE].order=30,this._columns[Xr.a.ANNOTATION].order=35,this._columns[Xr.a.FUNCTIONAL_IMPACT].order=38,this._columns[Xr.a.CHROMOSOME].order=40,this._columns[Xr.a.START_POS].order=50,this._columns[Xr.a.END_POS].order=60,this._columns[Xr.a.REF_ALLELE].order=70,this._columns[Xr.a.VAR_ALLELE].order=80,this._columns[Xr.a.HGVSG].order=81,this._columns[Xr.a.HGVSC].order=82,this._columns[Xr.a.MUTATION_STATUS].order=90,this._columns[Xr.a.VALIDATION_STATUS].order=100,this._columns[Xr.a.MUTATION_TYPE].order=110,this._columns[Xr.a.VARIANT_TYPE].order=114,this._columns[Xr.a.ASCN_METHOD].order=115,this._columns[Xr.a.CLONAL].order=116,this._columns[Xr.a.CANCER_CELL_FRACTION].order=117,this._columns[Xr.a.EXPECTED_ALT_COPIES].order=118,this._columns[Xr.a.ASCN_COPY_NUM].order=119,this._columns[Xr.a.CENTER].order=120,this._columns[Xr.a.TUMOR_ALLELE_FREQ].order=130,this._columns[Xr.a.VAR_READS].order=140,this._columns[Xr.a.REF_READS].order=150,this._columns[Xr.a.VAR_READS_N].order=170,this._columns[Xr.a.REF_READS_N].order=175,this._columns[Xr.a.COPY_NUM].order=177,this._columns[Xr.a.MRNA_EXPR].order=182,this._columns[Xr.a.COHORT].order=183,this._columns[Xr.a.COSMIC].order=184,this._columns[Xr.a.EXON].order=185,this._columns[Xr.a.GNOMAD].order=187,this._columns[Xr.a.CLINVAR].order=188,this._columns[Xr.a.DBSNP].order=189,this._columns[Xr.a.MRNA_EXPR].shouldExclude=function(){return!e.props.mrnaExprRankMolecularProfileId||e.getSamples().length>1},this._columns[Xr.a.CLONAL].shouldExclude=function(){return!e.props.existsSomeMutationWithAscnProperty[ao.a.CCF_EXPECTED_COPIES_STRING]},this._columns[Xr.a.ASCN_METHOD].shouldExclude=function(){return!e.props.existsSomeMutationWithAscnProperty[ao.a.ASCN_METHOD_STRING]},this._columns[Xr.a.CANCER_CELL_FRACTION].shouldExclude=function(){return!e.props.existsSomeMutationWithAscnProperty[ao.a.CCF_EXPECTED_COPIES_STRING]},this._columns[Xr.a.EXPECTED_ALT_COPIES].shouldExclude=function(){return!e.props.existsSomeMutationWithAscnProperty[ao.a.EXPECTED_ALT_COPIES_STRING]},this._columns[Xr.a.ASCN_COPY_NUM].shouldExclude=function(){return!e.props.existsSomeMutationWithAscnProperty[ao.a.ASCN_INTEGER_COPY_NUMBER_STRING]||!e.props.existsSomeMutationWithAscnProperty[ao.a.TOTAL_COPY_NUMBER_STRING]||!e.props.existsSomeMutationWithAscnProperty[ao.a.MINOR_COPY_NUMBER_STRING]},this._columns[Xr.a.SAMPLES].shouldExclude=function(){return e.getSamples().length<2&&!e.hasUncalledMutations},this._columns[Xr.a.COPY_NUM].shouldExclude=function(){return!e.props.discreteCNAMolecularProfileId||e.getSamples().length>1}}},{key:"hasUncalledMutations",get:function(){var e=[];return this.props.data?e=this.props.data:this.props.dataStore&&(e=this.props.dataStore.allData),e.some(function(e){return e.some(function(e){return Object(pn.p)(e.molecularProfileId)})})}}])&&io(n.prototype,o),a&&io(n,a),t}();mo.defaultProps=Object.assign(Object.assign({},Xr.b.defaultProps),{initialItemsPerPage:10,paginationProps:{itemsPerPageOptions:[10,25,50,100]},showGeneFilterMenu:!0,columns:[Xr.a.COHORT,Xr.a.MRNA_EXPR,Xr.a.COPY_NUM,Xr.a.ASCN_METHOD,Xr.a.ASCN_COPY_NUM,Xr.a.ANNOTATION,Xr.a.HGVSG,Xr.a.REF_READS_N,Xr.a.VAR_READS_N,Xr.a.REF_READS,Xr.a.VAR_READS,Xr.a.START_POS,Xr.a.END_POS,Xr.a.REF_ALLELE,Xr.a.VAR_ALLELE,Xr.a.MUTATION_STATUS,Xr.a.VALIDATION_STATUS,Xr.a.CENTER,Xr.a.GENE,Xr.a.CHROMOSOME,Xr.a.PROTEIN_CHANGE,Xr.a.MUTATION_TYPE,Xr.a.VARIANT_TYPE,Xr.a.CLONAL,Xr.a.CANCER_CELL_FRACTION,Xr.a.EXPECTED_ALT_COPIES,Xr.a.FUNCTIONAL_IMPACT,Xr.a.COSMIC,Xr.a.TUMOR_ALLELE_FREQ,Xr.a.SAMPLES,Xr.a.EXON,Xr.a.HGVSC,Xr.a.GNOMAD,Xr.a.CLINVAR,Xr.a.DBSNP,Xr.a.GENE_PANEL]}),fo([P.computed],mo.prototype,"hasUncalledMutations",null);var ho=mo=fo([en.observer],mo),yo=n(923);function go(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vo(e){return(vo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wo(e,t){return(wo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function So(e){return(So="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var To=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":So(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},Eo=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=vo(t).call(this,e))||"object"!==So(o)&&"function"!=typeof o?bo(r):o).state={pdfUrl:n.buildPDFUrl(e.pdfs[0].url)},n.handleSelection=n.handleSelection.bind(bo(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wo(e,t)}(t,r["Component"]),n=t,(o=[{key:"buildPDFUrl",value:function(e){return"https://docs.google.com/viewerng/viewer?url=".concat(e,"?pid=explorer&efh=false&a=v&chrome=false&embedded=true")}},{key:"handleSelection",value:function(){this.setState({pdfUrl:this.buildPDFUrl(this.pdfSelectList.options[this.pdfSelectList.selectedIndex].value)})}},{key:"render",value:function(){var e=this;return r.createElement("div",null,r.createElement(l.If,{condition:this.props.pdfs.length>1},r.createElement("select",{ref:function(t){return e.pdfSelectList=t},style:{marginBottom:15},onChange:this.handleSelection},a.map(this.props.pdfs,function(e){return r.createElement("option",{value:e.url},e.name)}))),r.createElement(yo.a,{height:this.props.iframeHeight,url:this.state.pdfUrl}))}}])&&go(n.prototype,o),i&&go(n,i),t}(),Oo=Eo=To([en.observer],Eo),Po=n(792),_o=n(1157);function Co(e){return function(e,t){var n=a.reduce(e,function(e,t,n){return t&&t.length>0&&(e[n]=t),e},{});try{return Object(_o.validate)(n,t),{isValid:!0,message:null}}catch(e){return{isValid:!1,message:e.message}}}(e,["studyId",["sampleId","caseId"]])}var xo=n(66);function Io(e){return(Io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ko(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mo(e,t){return!t||"object"!==Io(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ao(e){return(Ao=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Do(e,t){return(Do=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var jo=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Mo(this,Ao(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Do(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement("div",{className:"alert alert-danger urlError",role:"alert"},r.createElement("i",{className:"fa fa-warning","aria-hidden":"true"}),r.createElement("h3",null,"The URL is invalid"),r.createElement("ul",null,this.props.urlValidationError.split(".").map(function(e){return e.length>0?r.createElement("li",null,e):null})))}}])&&ko(n.prototype,o),a&&ko(n,a),t}(),Ro=n(151);function No(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Lo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Go(e,t){return!t||"object"!==Uo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vo(e){return(Vo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fo(e,t){return(Fo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Uo(e){return(Uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Bo=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Uo(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};function Ho(e,t){return e[0].proteinChange===t.proteinChange&&e[0].gene.hugoGeneSymbol===t.gene.hugoGeneSymbol}function Wo(e){return'{ "proteinChange": "'.concat(e.proteinChange,'", "hugoGeneSymbol": "').concat(e.gene.hugoGeneSymbol,'" }')}var qo=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Go(this,Vo(t).call(this,e))).urlWrapper=n,r.mouseOverMutation=null,r.selectedMutationsMap=P.observable.map(),r.dataHighlighter=function(e){var t=[];return r.onlyShowSelectedInTable||t.push.apply(t,No(r.selectedMutations)),r.mouseOverMutation&&t.push(r.mouseOverMutation),i.a.some(t,function(t){return Ho(e,t)})},r}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fo(e,t)}(t,Ro["a"]),n=t,(r=[{key:"setMouseOverMutation",value:function(e){this.mouseOverMutation=e}},{key:"setOnlyShowSelectedInTable",value:function(e){this.urlWrapper.updateURL(function(t){return t.genomicEvolutionSettings.showOnlySelectedMutationsInTable=e.toString(),t})}},{key:"setOnlyShowSelectedInVAFChart",value:function(e){this.urlWrapper.updateURL(function(t){return t.genomicEvolutionSettings.showOnlySelectedMutationsInChart=e.toString(),t})}},{key:"toggleSelectedMutation",value:function(e){var t=Wo(e);this.selectedMutationsMap.has(t)?this.selectedMutationsMap.delete(t):this.selectedMutationsMap.set(t,e)}},{key:"setSelectedMutations",value:function(e){this.selectedMutationsMap.clear();var t=!0,n=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value;this.toggleSelectedMutation(i),1}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"isMutationSelected",value:function(e){return this.selectedMutationsMap.has(Wo(e))}},{key:"onlyShowSelectedInTable",get:function(){return"true"===this.urlWrapper.query.genomicEvolutionSettings.showOnlySelectedMutationsInTable}},{key:"onlyShowSelectedInVAFChart",get:function(){return"true"===this.urlWrapper.query.genomicEvolutionSettings.showOnlySelectedMutationsInChart}},{key:"selectedMutations",get:function(){return this.selectedMutationsMap.entries().map(function(e){return e[1]})}},{key:"sortedFilteredData",get:function(){var e=this,t=this.filterString.toUpperCase(),n=this.filterString.toLowerCase();return this.sortedData.filter(function(r){var o=e.dataFilter(r,e.filterString,t,n),a=!e.onlyShowSelectedInTable||0===e.selectedMutations.length||i.a.some(e.selectedMutations,function(e){return Ho(r,e)});return o&&a})}}])&&Lo(n.prototype,r),o&&Lo(n,o),t}();Bo([P.observable],qo.prototype,"mouseOverMutation",void 0),Bo([P.action],qo.prototype,"setMouseOverMutation",null),Bo([P.action],qo.prototype,"setOnlyShowSelectedInTable",null),Bo([P.action],qo.prototype,"setOnlyShowSelectedInVAFChart",null),Bo([P.action],qo.prototype,"toggleSelectedMutation",null),Bo([P.action],qo.prototype,"setSelectedMutations",null),Bo([P.computed],qo.prototype,"selectedMutations",null),Bo([P.computed],qo.prototype,"sortedFilteredData",null);n(1158);var zo=n(290),Ko=n(291),Yo=n.n(Ko),Xo=n(924),Zo=n(805),Qo=n(192),$o=n(1159),Jo=n.n($o);function ea(e){return(ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ta(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function na(e,t){return!t||"object"!==ea(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ra(e){return(ra=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oa(e,t){return(oa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var aa=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),na(this,ra(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oa(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e="";if(this.props.show)if(!a.isUndefined(this.props.isTrialFeedback)&&this.props.isTrialFeedback){var t="https://docs.google.com/forms/d/e/1FAIpQLSfcoLRG0iWO_qUb4hfzWFQ1toP575EKCTwqPcXE9DmMzuS34w/viewform",n="entry.1655318994=".concat(this.props.userEmailAddress||""),o="entry.1782078941=".concat(encodeURIComponent(window.location.href));if(e="".concat(t,"?").concat(n,"&").concat(o,"&embedded=true"),!a.isUndefined(this.props.data)){var i="entry.1070287537=".concat(this.props.data.nctId||""),l="entry.699867040=".concat(this.props.data.protocolNo||"");e="".concat(t,"?").concat(n,"&").concat(o,"&").concat(i,"&").concat(l,"&embedded=true")}}else{var u="entry.251841421=".concat(this.props.userEmailAddress||""),s="entry.1295500928=".concat(encodeURIComponent(window.location.href));e="".concat("https://docs.google.com/forms/d/e/1FAIpQLSes1WuMattmo_aT8-34LaPRTC47vVzvdWMgYZ5tSuw8EHoLZw/viewform","?").concat(u,"&").concat(s,"&embedded=true")}return r.createElement(Jt.Modal,{show:this.props.show,onHide:this.props.onHide},r.createElement(Jt.Modal.Header,{closeButton:!0},r.createElement(Jt.Modal.Title,null,this.props.title)),r.createElement(Jt.Modal.Body,null,r.createElement("iframe",{src:e,style:{width:550,height:700,border:"none",marginLeft:"10px"},marginHeight:0,marginWidth:0},r.createElement("i",{className:"fa fa-spinner fa-pulse fa-2x"}))))}}])&&ta(n.prototype,o),i&&ta(n,i),t}();function ia(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function la(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ua(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ca(e,t){return!t||"object"!==ma(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pa(e){return(pa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fa(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&da(e,t)}function da(e,t){return(da=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ma(e){return(ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ha,ya,ga,va=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ma(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};!function(e){e.TITLE="Title",e.MATCHING_CRITERIA="Matching Criteria",e.STATUS="Status"}(ha||(ha={})),function(e){e[e.STATUS=140]="STATUS"}(ya||(ya={})),function(e){e.MUTATION="Mutation",e.CNA="Copy Number Alteration",e.MSI="Microsatellite Instability",e.WILDTYPE="Wildtype"}(ga||(ga={}));var ba=function(e){function t(){return sa(this,t),ca(this,pa(t).apply(this,arguments))}return fa(t,G["b"]),t}(),wa=function(e){function t(){var e;return sa(this,t),(e=ca(this,pa(t).apply(this,arguments))).showGeneralFeedback=!1,e._columns=[{name:ha.TITLE,render:function(e){return r.createElement("div",null,r.createElement(l.If,{condition:e.protocolNo.length>0},r.createElement("div",null,r.createElement("a",{target:"_blank",href:"https://www.mskcc.org/cancer-care/clinical-trials/"+e.protocolNo},e.protocolNo))),r.createElement(l.If,{condition:e.nctId.length>0},r.createElement("div",null,r.createElement("a",{target:"_blank",href:"https://clinicaltrials.gov/ct2/show/"+e.nctId},e.nctId))),r.createElement("div",null,e.shortTitle),e.principalInvestigator&&r.createElement("div",{className:Jo.a.icon},r.createElement("i",{className:"fa fa-user-md ".concat(Jo.a.marginRight),"aria-hidden":"true"}),r.createElement(l.If,{condition:!a.isUndefined(e.principalInvestigator.url)},r.createElement(l.Then,null,r.createElement("a",{target:"_blank",href:e.principalInvestigator.url},e.principalInvestigator.full_name)),r.createElement(l.Else,null,e.principalInvestigator.full_name)),r.createElement(l.If,{condition:!a.isUndefined(e.principalInvestigator.email)},r.createElement("a",{href:"mailto:"+e.principalInvestigator.email},r.createElement("i",{className:"fa fa-envelope-o ".concat(Jo.a.marginLeft),"aria-hidden":"true"})))))},width:e.columnWidths[ha.TITLE]},{name:ha.MATCHING_CRITERIA,render:function(t){return r.createElement("div",null,t.matches.map(function(o,a){return r.createElement("div",null,r.createElement("div",{className:Jo.a.matchInfoContainer},r.createElement("div",{className:Jo.a.genomicInfoContainer},r.createElement("div",null,o.matches.map(function(t,n){return r.createElement("div",{className:Jo.a.criteriaContainer},r.createElement(l.If,{condition:t.matches||t.notMatches},r.createElement("div",{className:Jo.a.firstLeft},t.matches&&e.getGenomicMatch(t.matches),t.notMatches&&e.getGenomicNotMatch(t.notMatches))),e.getClinicalMatch(t),r.createElement(l.If,{condition:n<o.matches.length-1},r.createElement("hr",{className:Jo.a.criteriaHr})))})),r.createElement("div",{style:{marginTop:5}},r.createElement("span",null,"Matched Samples:"," ",e.getSampleIdIcons(o.sampleIds))),r.createElement(l.If,{condition:""!==o.armDescription},r.createElement("div",{style:{width:"75%"}},r.createElement("span",null,"Arm: ",o.armDescription))),r.createElement(l.If,{condition:o.drugs.length>0},r.createElement("div",null,r.createElement("span",null,r.createElement("img",{src:n(1160),style:{width:18,marginTop:-5,marginRight:5},alt:"drug icon"}),r.createElement("b",null,o.drugs.map(function(e){return e.join(" + ")}).join(", "))))))),r.createElement(l.If,{condition:a<t.matches.length-1},r.createElement("hr",{className:Jo.a.criteriaHr})))}))},width:e.columnWidths[ha.MATCHING_CRITERIA]},{name:ha.STATUS,render:function(t){return r.createElement("div",{className:Jo.a.statusContainer},r.createElement("a",{target:"_blank",href:"https://www.mskcc.org/cancer-care/clinical-trials/"+t.protocolNo},r.createElement("span",{className:Jo.a.statusBackground},t.status)),r.createElement("span",{className:Jo.a.feedback},r.createElement(Jt.Button,{type:"button",className:"btn btn-default btn-sm btn-xs "+Jo.a.feedbackButton,onClick:function(){return e.openCloseFeedbackForm({nctId:t.nctId,protocolNo:t.protocolNo})}},"Feedback")))},sortBy:function(e){return e.status},width:e.columnWidths[ha.STATUS]}],e}var o,i,u;return fa(t,r["Component"]),o=t,(i=[{key:"getSampleIdIcons",value:function(e){var t=this,n=e;e.length>1&&(n=this.props.sampleManager.getSampleIdsInOrder().filter(function(t){return e.includes(t)}));return r.createElement(r.Fragment,null,n.map(function(e){return r.createElement("span",{className:Jo.a.genomicSpan},t.props.sampleManager.getComponentForSample(e,1,""))}))}},{key:"getClinicalMatch",value:function(e){return r.createElement("div",{className:Jo.a.firstRight,style:e.matches||e.notMatches?{}:{width:"100%"}},r.createElement("span",{className:Jo.a.secondLeft},function(e){if(e.length>1){var t=e.map(function(e){return e.match(/\d+(\.?\d+)?/g).map(function(e){return Number(e)})});if(2===e.length){var n="",r="";return e[0].includes(">")&&e[1].includes("<")?(n=e[0].includes("=")?"".concat(t[0]," ≤"):"".concat(t[0]," <"),r=e[1].includes("=")?"≤ ".concat(t[1]):"< ".concat(t[1]),"".concat(n," Age ").concat(r)):e[0].includes("<")&&e[1].includes(">")?(n=e[1].includes("=")?"".concat(t[1]," ≤"):"".concat(t[1]," <"),r=e[0].includes("=")?"≤ ".concat(t[0]):"< ".concat(t[0]),"".concat(n," Age ").concat(r)):"Age: ".concat(e.join(", "))}return"Age: ".concat(e.join(", "))}return"".concat(e[0]," yrs old")}(e.trialAgeNumerical)),r.createElement("span",{className:Jo.a.secondRight},e.trialOncotreePrimaryDiagnosis.positive.join(", "),e.trialOncotreePrimaryDiagnosis.negative.length>0&&r.createElement("span",null,r.createElement("b",null," except "),r.createElement(l.If,{condition:e.trialOncotreePrimaryDiagnosis.negative.length<4},r.createElement(l.Then,null,r.createElement("span",null,e.trialOncotreePrimaryDiagnosis.negative.join(", ").replace(/,(?!.*,)/gim," and"))),r.createElement(l.Else,null,r.createElement(v.d,{placement:"bottomLeft",trigger:["hover","focus"],overlay:this.tooltipClinicalContent(e.trialOncotreePrimaryDiagnosis.negative),destroyTooltipOnHide:!0,onPopupAlign:v.R},r.createElement("span",null,e.trialOncotreePrimaryDiagnosis.negative.length+" cancer types")))))))}},{key:"openCloseFeedbackForm",value:function(e){this.selectedTrialFeedbackFormData=e}},{key:"getGenomicMatch",value:function(e){var t=this;return r.createElement(r.Fragment,null,e.MUTATION.map(function(e){return r.createElement("div",null,r.createElement("span",{style:{marginRight:5}},r.createElement("b",null,e.patientGenomic.trueHugoSymbol," "),e.patientGenomic.trueProteinChange.join(", ")),r.createElement(v.d,{placement:"bottomLeft",trigger:["hover","focus"],overlay:t.tooltipGenomicContent(e.genomicAlteration),destroyTooltipOnHide:!1,onPopupAlign:v.R},r.createElement("i",{className:"fa fa-info-circle "+Jo.a.icon})))}),e.MSI.length>0&&r.createElement("div",null,"Tumor is ",r.createElement("b",null,"MSI-H")),e.CNA.map(function(e){return r.createElement("div",null,t.getGenomicAlteration(e.genomicAlteration))}),e.WILDTYPE.map(function(e){return r.createElement("div",null,t.getGenomicAlteration(e.genomicAlteration))}))}},{key:"getGenomicNotMatch",value:function(e){var t=[];return e.MUTATION.length>0&&(t=e.MUTATION[0].genomicAlteration),e.CNA.length>0&&(t=t.concat(e.CNA[0].genomicAlteration)),r.createElement(r.Fragment,null,t.length>0&&r.createElement("div",null,r.createElement("span",{className:Jo.a.genomicSpan},this.getDescriptionForNotMatches(t,3,ga.MUTATION)),r.createElement(v.d,{placement:"bottomLeft",trigger:["hover","focus"],overlay:this.tooltipGenomicContent(t),destroyTooltipOnHide:!1,onPopupAlign:v.R},r.createElement("i",{className:"fa fa-info-circle "+Jo.a.icon}))),e.MSI.length>0&&r.createElement("div",null,"Tumor is ",r.createElement("b",null,"not MSI-H")),e.WILDTYPE.length>0&&r.createElement("div",null,r.createElement("span",{className:Jo.a.genomicSpan},this.getDescriptionForNotMatches(e.WILDTYPE[0].genomicAlteration,3,ga.WILDTYPE)),r.createElement(v.d,{placement:"bottomLeft",trigger:["hover","focus"],overlay:this.tooltipGenomicContent(e.WILDTYPE[0].genomicAlteration),destroyTooltipOnHide:!1,onPopupAlign:v.R},r.createElement("i",{className:"fa fa-info-circle "+Jo.a.icon}))))}},{key:"getGenomicAlteration",value:function(e){var t=e.map(function(e){return e.split(" ")});return r.createElement("div",null,t.map(function(e){return r.createElement("div",null,r.createElement("b",null,e[0])," ",e[1])}))}},{key:"tooltipGenomicContent",value:function(e){return r.createElement("div",{className:Jo.a.tooltip},r.createElement("div",null,"Genomic selection"," ",e.length>1?"criteria":"criterion"," specified in the trial:"),e.map(function(e){return r.createElement("div",{className:Jo.a.genomicSpan},r.createElement(l.If,{condition:e.includes("!")},r.createElement(l.Then,null,r.createElement("b",null,"Not "),e.replace(/!/g,"")),r.createElement(l.Else,null,e)))}))}},{key:"tooltipClinicalContent",value:function(e){return r.createElement("div",{className:Jo.a.tooltip},r.createElement("ul",{className:Jo.a.alterationUl},e.map(function(e){return r.createElement("li",null,e)})))}},{key:"getDescriptionForNotMatches",value:function(e,t,n){var r=new Set(la(e).map(function(e){return e.split(" ")[0]})),o="";return n===ga.MUTATION?1===r.size?(o=la(r).join(", ")+" "+la(e).map(function(e){return e.split(" ")[1].replace(/!/g,"")}).join(", "),"Negative for ".concat(o)):(o=r.size<=t?la(r).join(", "):"".concat(r.size," genes"),"Negative for alterations in ".concat(o)):n===ga.WILDTYPE?(o=r.size<=t?la(r).join(", "):"".concat(r.size," genes"),"Tumor doesn't have ".concat(o," defined by the trial")):""}},{key:"render",value:function(){var e=this;return r.createElement("div",null,r.createElement("p",{style:{marginBottom:"0"}},"Curated genomic and clinical criteria from open clinical trials at Memorial Sloan Kettering. Please"," ",r.createElement("a",{href:"mailto:team@oncokb.org"},"contact us")," or submit"," ",r.createElement("a",{onClick:function(){return e.showGeneralFeedback=!0}},"feedback form")," ","if you have any questions."),!a.isUndefined(this.showGeneralFeedback)&&r.createElement(aa,{show:this.showGeneralFeedback,onHide:function(){return e.showGeneralFeedback=!1},title:"OncoKB Matched Trials General Feedback",userEmailAddress:Vt.b.serverConfig.user_email_address}),this.selectedTrialFeedbackFormData&&r.createElement(aa,{show:!!this.selectedTrialFeedbackFormData,data:this.selectedTrialFeedbackFormData,onHide:function(){return e.openCloseFeedbackForm()},isTrialFeedback:!0,title:"OncoKB Matched Trial Feedback",userEmailAddress:Vt.b.serverConfig.user_email_address}),r.createElement(ba,{data:this.props.detailedTrialMatches,columns:this._columns,showCopyDownload:!1}),r.createElement("div",{className:Jo.a.powered},"Powered by"," ",r.createElement("a",{href:"https://oncokb.org/",target:"_blank"},"OncoKB")," ","&"," ",r.createElement("a",{href:"https://matchminer.org/",target:"_blank"},"MatchMiner")))}},{key:"columnWidths",get:function(){var e;return ia(e={},ha.STATUS,ya.STATUS),ia(e,ha.TITLE,.35*(this.props.containerWidth-ya.STATUS)),ia(e,ha.MATCHING_CRITERIA,.65*(this.props.containerWidth-ya.STATUS)),e}}])&&ua(o.prototype,i),u&&ua(o,u),t}();va([P.computed],wa.prototype,"columnWidths",null),va([P.observable],wa.prototype,"selectedTrialFeedbackFormData",void 0),va([P.observable],wa.prototype,"showGeneralFeedback",void 0),va([P.action],wa.prototype,"openCloseFeedbackForm",null);var Sa=wa=va([en.observer],wa),Ta=(n(428),n(925),n(926),n(97)),Ea=n(306),Oa=n(175),Pa=n(274);function _a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ca(e,t){return!t||"object"!==ka(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xa(e){return(xa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ia(e,t){return(Ia=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ka(e){return(ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ma=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ka(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},Aa=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ca(this,xa(t).call(this,e,{studyId:{isSessionProp:!1},caseId:{isSessionProp:!1},sampleId:{isSessionProp:!1},resourceUrl:{isSessionProp:!1},genomicEvolutionSettings:{isSessionProp:!1,nestedObjectProps:{showTimeline:"",clusterHeatmap:"",transposeHeatmap:"",showMutationLabelsInHeatmap:"",showOnlySelectedMutationsInChart:"",logScaleChart:"",yAxisDataRangeInChart:"",showOnlySelectedMutationsInTable:""}}}))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ia(e,t)}(t,Ea["a"]),n=t,(r=[{key:"setActiveTab",value:function(e){this.updateURL({},"".concat(Oa.a.Patient,"/").concat(e))}},{key:"setResourceUrl",value:function(e){this.updateURL({resourceUrl:e})}},{key:"activeTabId",get:function(){return this.pathName.split("/").pop()||Pa.a.Summary}}])&&_a(n.prototype,r),o&&_a(n,o),t}();Ma([P.computed],Aa.prototype,"activeTabId",null);var Da,ja=n(110),Ra=n(843),Na=n(117);function La(e,t){var n=null;if(t){var o;switch(t.mutationStatus){case Da.MUTATED_WITH_VAF:o="VAF: ".concat(t.vaf.toFixed(2));break;case Da.MUTATED_BUT_NO_VAF:o="Mutated, but we don't have VAF data.";break;case Da.PROFILED_WITH_READS_BUT_UNCALLED:case Da.PROFILED_BUT_NOT_MUTATED:o="Mutation not detected (VAF: ".concat((t.vaf||0).toFixed(2),")");break;case Da.NOT_PROFILED:default:o="".concat(t.sampleId," is not sequenced for ").concat(e.gene.hugoGeneSymbol," mutations.")}n=[r.createElement("span",null,"Sample ID: ",t.sampleId),r.createElement("br",null),r.createElement("span",null,o)]}return r.createElement("div",null,r.createElement("span",null,"Gene: ",e.gene.hugoGeneSymbol),r.createElement("br",null),r.createElement("span",null,"Protein Change: ",e.proteinChange),r.createElement("br",null),n)}!function(e){e[e.MUTATED_WITH_VAF=0]="MUTATED_WITH_VAF",e[e.MUTATED_BUT_NO_VAF=1]="MUTATED_BUT_NO_VAF",e[e.PROFILED_WITH_READS_BUT_UNCALLED=2]="PROFILED_WITH_READS_BUT_UNCALLED",e[e.PROFILED_BUT_NOT_MUTATED=3]="PROFILED_BUT_NOT_MUTATED",e[e.NOT_PROFILED=4]="NOT_PROFILED"}(Da||(Da={}));var Ga=[{type:"rectangle",fill:"rgba(255,255,255,1)",z:1e3},{type:"line",stroke:"rgba(190,190,190,1)","stroke-width":1,x1:20,x2:80,y1:50,y2:50,z:1e3}];function Va(e){return"".concat(e.gene.hugoGeneSymbol," ").concat(e.proteinChange)}function Fa(e,t,n,r){var o=i.a.keyBy(t,_.R),a=i.a.groupBy(t,function(e){return e.uniqueSampleKey}),l=i.a.mapValues(o,function(){return!1}),u=[],s=!0,c=!1,p=void 0;try{for(var f,d=function(){var e=f.value,t=a[e.uniqueSampleKey]||[],i={},s=!0,c=!1,p=void 0;try{for(var d,m=t[Symbol.iterator]();!(s=(d=m.next()).done);s=!0){var h=d.value,y=Object(_.R)(h),g=r===ti.SAMPLE_TRACKS?y:e.sampleId,v="uncalled"===h.mutationStatus.toLowerCase();if(!v||h.tumorAltCount>0){i[y]=!0;var b=Object(pn.j)(h),w=void 0;v?w=Da.PROFILED_WITH_READS_BUT_UNCALLED:null===b?w=Da.MUTATED_BUT_NO_VAF:(w=Da.MUTATED_WITH_VAF,l[y]=!0),u.push({profile_data:b,sample:e.sampleId,patient:e.patientId,study_id:e.studyId,hugo_gene_symbol:"",mutation:h,uid:g,mutationId:y,mutationStatus:w})}}}catch(e){c=!0,p=e}finally{try{s||null==m.return||m.return()}finally{if(c)throw p}}var S=Object.keys(o).filter(function(e){return!(e in i)}).map(function(e){return o[e]}),T=!0,E=!1,O=void 0;try{for(var P,C=S[Symbol.iterator]();!(T=(P=C.next()).done);T=!0){var x=P.value,I=Object(_.R)(x),k=r===ti.SAMPLE_TRACKS?I:e.sampleId,M=Object(Na.a)(e.uniqueSampleKey,x.molecularProfileId,x.gene.hugoGeneSymbol,n);u.push({profile_data:null,sample:e.sampleId,patient:e.patientId,study_id:e.studyId,hugo_gene_symbol:"",mutation:x,uid:k,mutationId:I,mutationStatus:M?Da.PROFILED_BUT_NOT_MUTATED:Da.NOT_PROFILED,na:!M})}}catch(e){E=!0,O=e}finally{try{T||null==C.return||C.return()}finally{if(E)throw O}}},m=e[Symbol.iterator]();!(s=(f=m.next()).done);s=!0)d()}catch(e){c=!0,p=e}finally{try{s||null==m.return||m.return()}finally{if(c)throw p}}return u=u.filter(function(e){return l[e.mutationId]}),r===ti.SAMPLE_TRACKS?i.a.groupBy(u,function(e){return e.sample}):i.a.groupBy(u,function(e){return e.mutationId})}var Ua=n(289),Ba=n(172),Ha=n(296),Wa=n.n(Ha),qa=(n(812),n(1161)),za=n.n(qa),Ka=n(23),Ya=n.n(Ka);function Xa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Za(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qa(e){return(Qa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ja(e,t){return(Ja=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ei(e){return(ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ti,ni=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ei(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};!function(e){e[e.MUTATION_TRACKS=0]="MUTATION_TRACKS",e[e.SAMPLE_TRACKS=1]="SAMPLE_TRACKS"}(ti||(ti={}));var ri=2,oi={init_cell_width:20,init_cell_padding:1,cell_padding_off_cell_width_threshold:10},ai=function(e){function t(e){var n,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,a=Qa(t).call(this,e),(n=!a||"object"!==ei(a)&&"function"!=typeof a?$a(o):a).oncoprint=null,n.oncoprintComponent=null,n.horzZoomSliderState=100,n.minZoom=0,n.sortConfig=Object(v.T)({await:function(){return[n.sampleIdOrder]},invoke:function(){return n.clustered?Promise.resolve({clusterHeatmapTrackGroupIndex:ri}):n.mode===ti.MUTATION_TRACKS?Promise.resolve({order:n.sampleIdOrder.result}):Promise.resolve({})}}),n.sampleIdOrder=Object(v.T)({await:function(){return[n.props.store.samples]},invoke:function(){return n.props.sampleManager?Promise.resolve(n.props.sampleManager.getSampleIdsInOrder()):Promise.resolve(n.props.store.samples.result.map(function(e){return e.sampleId}))}}),n.mutationWithIdOrder=Object(v.T)({invoke:function(){var e=[],t=!0,r=!1,o=void 0;try{for(var a,l=n.mutations[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var u=a.value;e.push({mutation:u,id:Object(_.R)(u)})}}catch(e){r=!0,o=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw o}}return Promise.resolve(i.a.chain(e).uniqBy(function(e){return e.id}).sortBy(function(e){return Va(e.mutation)}).value())}}),n.mutationModeColumnLabels=Object(v.T)({await:function(){return[n.sampleIdOrder]},invoke:function(){return Promise.resolve(n.sampleIdOrder.result.reduce(function(e,t,r){var o=r+1;return e[t]={text:o.toString(),angle_in_degrees:0,text_color:"#ffffff",circle_color:n.props.sampleManager.getColorForSample(t),left_padding_percent:o<10?-15:-34},e},{}))}}),n.sampleModeColumnLabels=Object(v.T)({invoke:function(){var e={};if(n.showMutationLabels){var t=!0,r=!1,o=void 0;try{for(var a,i=n.mutations[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var l=a.value;e[Object(_.R)(l)]={text:Va(l)}}}catch(e){r=!0,o=e}finally{try{t||null==i.return||i.return()}finally{if(r)throw o}}}return Promise.resolve(e)}}),n.sampleModeHeatmapTracksOrder=Object(v.T)({await:function(){return[n.sampleIdOrder]},invoke:function(){return n.clustered?Promise.resolve(void 0):Promise.resolve(Xa({},ri,n.sampleIdOrder.result))}}),n.mutationModeHeatmapTracksOrder=Object(v.T)({await:function(){return[n.mutationWithIdOrder]},invoke:function(){return n.clustered?Promise.resolve(void 0):Promise.resolve(Xa({},ri,n.mutationWithIdOrder.result.map(function(e){return e.id})))}}),n.sampleModeHeatmapTracks=Object(v.T)({await:function(){return[n.props.store.samples,n.sampleIdOrder,n.props.store.mutationMolecularProfile,n.props.store.coverageInformation]},invoke:function(){if(0===n.mutations.length)return Promise.resolve([]);var e=n.props.store.mutationMolecularProfile.result,t=Fa(n.props.store.samples.result,n.mutations,n.props.store.coverageInformation.result,ti.SAMPLE_TRACKS),r=[];return n.sampleIdOrder.result.forEach(function(o,a){var i=t[o];if(i&&i.length){var l=n.props.sampleManager?n.props.sampleManager.getColorForSample(o):void 0,u=a+1;r.push({key:o,label:"".concat(u),description:"".concat(o," data from ").concat(e.molecularProfileId),molecularProfileId:e.molecularProfileId,molecularAlterationType:e.molecularAlterationType,datatype:e.datatype,data:i,trackGroupIndex:ri,naLegendLabel:"Not sequenced",labelColor:l?"white":"black",labelCircleColor:l,labelFontWeight:"normal",labelLeftPadding:u<10?21:17,hasColumnSpacing:!0,tooltip:function(e){var t=e[0],n=La(t.mutation,{sampleId:t.sample,mutationStatus:t.mutationStatus,vaf:t.profile_data}),r=document.createElement("div");Ya.a.render(n,r);var o=r.innerHTML;return c()(o)},sortDirectionChangeable:!1,initSortDirection:-1,movable:!1,customNaShapes:Ga})}}),Promise.resolve(r)}}),n.mutationModeHeatmapTracks=Object(v.T)({await:function(){return[n.props.store.samples,n.mutationWithIdOrder,n.props.store.mutationMolecularProfile,n.props.store.coverageInformation]},invoke:function(){if(0===n.mutations.length)return Promise.resolve([]);var e=n.props.store.mutationMolecularProfile.result,t=Fa(n.props.store.samples.result,n.mutations,n.props.store.coverageInformation.result,ti.MUTATION_TRACKS),r=[];return n.mutationWithIdOrder.result.forEach(function(n){var o=t[n.id];o&&o.length&&r.push({key:n.id,label:Va(n.mutation),description:"".concat(Va(n.mutation)," data from ").concat(e.molecularProfileId),molecularProfileId:e.molecularProfileId,molecularAlterationType:e.molecularAlterationType,datatype:e.datatype,data:o,trackGroupIndex:ri,naLegendLabel:"Not sequenced",labelFontWeight:"normal",hasColumnSpacing:!0,tooltip:function(e){var t=e[0],n=La(t.mutation,{sampleId:t.sample,mutationStatus:t.mutationStatus,vaf:t.profile_data}),r=document.createElement("div");Ya.a.render(n,r);var o=r.innerHTML;return c()(o)},sortDirectionChangeable:!1,initSortDirection:-1,movable:!1,customNaShapes:Ga})}),Promise.resolve(r)}}),n.oncoprintUI=Object(ja.a)({await:function(){return[n.heatmapTracks,n.heatmapTracksOrder,n.columnLabels,n.sortConfig]},render:function(){return 0===n.heatmapTracks.result.length?null:r.createElement("div",{className:"borderedChart",style:{display:"inline-block"}},n.header,r.createElement(Ra.c,{key:"MutationOncoprint",ref:n.oncoprintComponentRef,oncoprintRef:n.oncoprintRef,highlightedIds:n.highlightedIds,highlightedTracks:n.highlightedTracks,initParams:oi,showTrackLabels:!(n.mode===ti.MUTATION_TRACKS&&!n.showMutationLabels),columnLabels:n.columnLabels.result,clinicalTracks:[],geneticTracks:[],genesetHeatmapTracks:[],heatmapTracks:n.heatmapTracks.result,heatmapTracksOrder:n.heatmapTracksOrder.result,divId:"MutationHeatmap",width:Qo.a.size.width-100,caseLinkOutInTooltips:!1,sortConfig:n.sortConfig.result}))},renderPending:function(){return r.createElement(xo.a,{isLoading:!0})},renderError:function(){return r.createElement(Ua.a,null)},showLastRenderWhenPending:!0}),window.mutationOncoprint=$a(n),n.minZoomUpdater=setInterval(function(){n.oncoprint&&(n.minZoom=n.oncoprint.model.getMinHorzZoom())},500),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ja(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentWillUnmount",value:function(){clearInterval(this.minZoomUpdater)}},{key:"oncoprintComponentRef",value:function(e){this.oncoprintComponent=e}},{key:"oncoprintRef",value:function(e){var t=this;this.oncoprint=e,this.oncoprint.onHorzZoom(function(e){return t.horzZoomSliderState=e}),this.horzZoomSliderState=this.oncoprint.getHorzZoom(),this.oncoprint.onCellMouseOver(function(e,n){if(t.mode===ti.SAMPLE_TRACKS&&null!==e){var r=t.mutationKeyToMutation[e];r&&t.props.dataStore.setMouseOverMutation(r)}else if(t.mode===ti.MUTATION_TRACKS&&void 0!==n){if(t.oncoprintComponent){var o=t.oncoprintComponent.getTrackSpecKey(n),a=o&&t.mutationKeyToMutation[o];a&&t.props.dataStore.setMouseOverMutation(a)}}else t.props.dataStore.setMouseOverMutation(null)}),this.oncoprint.onCellClick(function(e,n){if(t.mode===ti.SAMPLE_TRACKS&&null!==e){var r=t.mutationKeyToMutation[e];r&&t.props.dataStore.toggleSelectedMutation(r)}else if(t.mode===ti.MUTATION_TRACKS&&void 0!==n){if(t.oncoprintComponent){var o=t.oncoprintComponent.getTrackSpecKey(n),a=o&&t.mutationKeyToMutation[o];a&&t.props.dataStore.toggleSelectedMutation(a)}}else t.props.dataStore.setSelectedMutations([])})}},{key:"updateOncoprintHorzZoom",value:function(){this.oncoprint&&this.oncoprint.setHorzZoom(this.horzZoomSliderState)}},{key:"onClickZoomIn",value:function(){this.oncoprint&&this.oncoprint.setHorzZoom(this.oncoprint.getHorzZoom()/.7)}},{key:"onClickZoomOut",value:function(){this.oncoprint&&this.oncoprint.setHorzZoom(.7*this.oncoprint.getHorzZoom())}},{key:"render",value:function(){return this.oncoprintUI.component}},{key:"showMutationLabels",get:function(){var e=this.props.urlWrapper.query.genomicEvolutionSettings.showMutationLabelsInHeatmap;return!e||"true"===e},set:function(e){this.props.urlWrapper.updateURL(function(t){return t.genomicEvolutionSettings.showMutationLabelsInHeatmap=e.toString(),t})}},{key:"clustered",get:function(){var e=this.props.urlWrapper.query.genomicEvolutionSettings.clusterHeatmap;return!e||"true"===e},set:function(e){this.props.urlWrapper.updateURL(function(t){return t.genomicEvolutionSettings.clusterHeatmap=e.toString(),t})}},{key:"mode",get:function(){return"true"===this.props.urlWrapper.query.genomicEvolutionSettings.transposeHeatmap?ti.MUTATION_TRACKS:ti.SAMPLE_TRACKS},set:function(e){this.props.urlWrapper.updateURL(function(t){return t.genomicEvolutionSettings.transposeHeatmap=(e===ti.MUTATION_TRACKS).toString(),t})}},{key:"mutations",get:function(){return i.a.flatten(this.props.dataStore.allData)}},{key:"highlightedMutationIds",get:function(){var e=this.props.dataStore.mouseOverMutation,t=this.props.dataStore.selectedMutations.slice();return e&&t.push(e),t.map(_.R)}},{key:"highlightedIds",get:function(){return this.mode===ti.SAMPLE_TRACKS?this.highlightedMutationIds:void 0}},{key:"highlightedTracks",get:function(){return this.mode===ti.MUTATION_TRACKS?this.highlightedMutationIds:void 0}},{key:"mutationKeyToMutation",get:function(){return i.a.keyBy(this.mutations,_.R)}},{key:"columnLabels",get:function(){switch(this.mode){case ti.MUTATION_TRACKS:return this.mutationModeColumnLabels;case ti.SAMPLE_TRACKS:default:return this.sampleModeColumnLabels}}},{key:"heatmapTracksOrder",get:function(){switch(this.mode){case ti.MUTATION_TRACKS:return this.mutationModeHeatmapTracksOrder;case ti.SAMPLE_TRACKS:default:return this.sampleModeHeatmapTracksOrder}}},{key:"heatmapTracks",get:function(){switch(this.mode){case ti.MUTATION_TRACKS:return this.mutationModeHeatmapTracks;case ti.SAMPLE_TRACKS:default:return this.sampleModeHeatmapTracks}}},{key:"zoomControls",get:function(){var e=this;return r.createElement("div",{className:za.a.zoomControls},r.createElement(v.d,{overlay:r.createElement("span",null,"Zoom out of heatmap"),placement:"top"},r.createElement("div",{onClick:this.onClickZoomOut,className:za.a.zoomButton},r.createElement("i",{className:"fa fa-search-minus"}))),r.createElement(v.d,{overlay:r.createElement("span",null,"Zoom in/out of heatmap"),placement:"top"},r.createElement("div",{style:{width:"90px"}},r.createElement(Wa.a,{value:this.horzZoomSliderState,onChange:function(t){return e.horzZoomSliderState=t},onChangeComplete:this.updateOncoprintHorzZoom,step:.01,max:1,min:this.minZoom,tooltip:!1}))),r.createElement(v.d,{overlay:r.createElement("span",null,"Zoom in to heatmap"),placement:"top"},r.createElement("div",{className:za.a.zoomButton,onClick:this.onClickZoomIn},r.createElement("i",{className:"fa fa-search-plus"}))))}},{key:"header",get:function(){var e=this;return r.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:5}},r.createElement("div",{style:{display:"inline-flex",alignItems:"center"}},r.createElement(Ba.a,{checked:this.clustered,onChange:function(){e.clustered=!e.clustered},labelProps:{style:{marginRight:10}},inputProps:{"data-test":"HeatmapCluster"}},r.createElement("span",{style:{marginTop:-3}},"Cluster")),r.createElement(Ba.a,{checked:this.mode===ti.MUTATION_TRACKS,onChange:function(){e.mode=e.mode===ti.MUTATION_TRACKS?ti.SAMPLE_TRACKS:ti.MUTATION_TRACKS},labelProps:{style:{marginRight:10}},inputProps:{"data-test":"HeatmapTranspose"}},r.createElement("span",{style:{marginTop:-3}},"Transpose")),r.createElement(Ba.a,{checked:this.showMutationLabels,onChange:function(){e.showMutationLabels=!e.showMutationLabels},labelProps:{style:{marginRight:10}},inputProps:{"data-test":"HeatmapMutationLabels"}},r.createElement("span",{style:{marginTop:-3}},"Show mutation labels")),this.zoomControls),r.createElement(v.e,{filename:"vafHeatmap",getSvg:function(){return e.oncoprint?e.oncoprint.toSVG(!0):null},getData:function(){return function(e){var t=[];t.push(["Sample_ID","Gene","Protein_Change","Variant_Allele_Frequency"]);var n=!0,r=!1,o=void 0;try{for(var a,i=e[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var l=a.value;null!==l.profile_data&&t.push([l.sample,l.mutation.gene.hugoGeneSymbol,l.mutation.proteinChange,l.profile_data])}}catch(e){r=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}return t.map(function(e){return e.join("\t")}).join("\n")}(i.a.flatMap(e.heatmapTracks.result,function(e){return e.data}))},buttons:["SVG","PNG","Data"],type:"button",dontFade:!0,style:{marginLeft:10}}))}}])&&Za(n.prototype,o),a&&Za(n,a),t}();ni([P.observable],ai.prototype,"horzZoomSliderState",void 0),ni([P.observable],ai.prototype,"minZoom",void 0),ni([H.default],ai.prototype,"oncoprintComponentRef",null),ni([H.default],ai.prototype,"oncoprintRef",null),ni([P.computed],ai.prototype,"mutations",null),ni([P.computed],ai.prototype,"highlightedMutationIds",null),ni([P.computed],ai.prototype,"highlightedIds",null),ni([P.computed],ai.prototype,"highlightedTracks",null),ni([H.default],ai.prototype,"updateOncoprintHorzZoom",null),ni([H.default],ai.prototype,"onClickZoomIn",null),ni([H.default],ai.prototype,"onClickZoomOut",null),ni([P.computed],ai.prototype,"mutationKeyToMutation",null),ni([P.computed],ai.prototype,"columnLabels",null),ni([P.computed],ai.prototype,"heatmapTracksOrder",null),ni([P.computed],ai.prototype,"heatmapTracks",null),ni([P.computed],ai.prototype,"zoomControls",null),ni([P.computed],ai.prototype,"header",null);var ii=ai=ni([en.observer],ai),li=n(112);function ui(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var si="None",ci=Object(en.observer)(function(e){var t,n,r,a,i=e.wrapperStore,l=e.sampleManager,u=[{label:si,value:si}].concat(ui((t=l.samples,n={},r=[],t.forEach(function(e,t){e.clinicalData.forEach(function(e,t){void 0===n[e.clinicalAttributeId]&&(r.push({id:e.clinicalAttributeId,value:e.clinicalAttribute.displayName}),n[e.clinicalAttributeId]=e.clinicalAttribute)})}),r).map(function(e){return{label:"".concat(e.value),value:"".concat(e.id)}})));return o.a.createElement("div",{className:"VAFChartControls","data-test":"VAFChartControls"},o.a.createElement("label",null,"Group by: ",o.a.createElement(li.default,{name:"group-by-options-select",value:(a=u.find(function(e){return e.value==i.groupByOption}),a?{label:a.label,value:i.groupByOption}:""),options:u,onChange:function(e){i.setGroupByOption(e?e.value:"")},styles:{container:function(e){return Object.assign(Object.assign({},e),{width:250})}},clearable:!1,searchable:!0})),!i.isOnlySequentialModePossible&&o.a.createElement("label",{className:"checkbox-inline"},o.a.createElement("input",{type:"checkbox","data-test":"VAFSequentialMode",checked:i.showSequentialMode,onChange:function(){return i.setShowSequentialMode(!i.showSequentialMode)}})," ","Show samples in sequential mode"),o.a.createElement("label",{className:"checkbox-inline"},o.a.createElement("input",{type:"checkbox",checked:i.onlyShowSelectedInVAFChart,"data-test":"VAFOnlyHighlighted",onChange:function(){return i.setOnlyShowSelectedInVAFChart(!i.onlyShowSelectedInVAFChart)}})," ","Show only selected mutations"),o.a.createElement("label",{className:"checkbox-inline"},o.a.createElement("input",{type:"checkbox","data-test":"VAFLogScale",checked:i.vafChartLogScale,onChange:function(){i.setVafChartLogScale(!i.vafChartLogScale)}})," ","Log scale"),o.a.createElement("label",{className:"checkbox-inline"},o.a.createElement("input",{type:"checkbox","data-test":"VAFDataRange",checked:i.vafChartYAxisToDataRange,onChange:function(){i.setVafChartYAxisToDataRange(!i.vafChartYAxisToDataRange)}})," ","Set y-axis to data range"))}),pi=n(74),fi=n(5),di=n.n(fi),mi=n(418),hi=n(799),yi=n.n(hi),gi=n(1162),vi=n.n(gi);n(1163);function bi(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function wi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Si(e,t){return!t||"object"!==Oi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ti(e){return(Ti=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ei(e,t){return(Ei=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Oi(e){return(Oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Pi=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Oi(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},_i=function(e){var t=e.x,n=e.y,r=e.color,a=e.datum,i=e.mutation,l=e.onMutationClick,u=e.setTooltipModel;return o.a.createElement("g",null,o.a.createElement("path",{d:"M ".concat(t,", ").concat(n,"\n                            m -3, 0\n                            a 3, 3 0 1,0 6,0\n                            a 3, 3 0 1,0 -6,01"),role:"presentation","shape-rendering":"auto",style:{stroke:"".concat(r),fill:"white",strokeWidth:2,opacity:1},onMouseOver:function(e){u({datum:a,mutation:i,mouseEvent:e,tooltipOnPoint:!0})},onMouseOut:function(e){u({datum:null,mutation:null,mouseEvent:e,tooltipOnPoint:!0})},onClick:function(e){l(i)},onMouseMove:function(e){e.persist(),u({datum:a,mutation:i,mouseEvent:e,tooltipOnPoint:!0})}}))},Ci=function(e){var t=e.x1,n=e.y1,r=e.x2,a=e.y2,i=e.color,l=e.datum,u=e.mutation,s=e.onMutationClick,c=e.setTooltipModel;return o.a.createElement("g",null,o.a.createElement("path",{d:"M".concat(t,",").concat(n,"L").concat(r,",").concat(a),role:"presentation","shape-rendering":"auto",style:{fill:"white",stroke:"".concat(i),strokeOpacity:.5,opacity:1,strokeWidth:2},onMouseOver:function(e){c({datum:l,mutation:u,mouseEvent:e,tooltipOnPoint:!0})},onMouseOut:function(e){c({datum:null,mutation:null,mouseEvent:e,tooltipOnPoint:!1})},onClick:function(e){s(u)},onMouseMove:function(e){e.persist(),c({datum:l,mutation:u,mouseEvent:e,tooltipOnPoint:!0})}}))},xi=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Si(this,Ti(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ei(e,t)}(t,o.a.Component),n=t,(r=[{key:"getHighlights",value:function(){var e=this,t=[];this.props.onlyShowSelectedInVAFChart||t.push.apply(t,bi(this.props.selectedMutations));var n=this.props.mouseOverMutation;return n&&t.push(n),t.length>0?t.map(function(t){var n=e.mutationToDataPoints.get({proteinChange:t.proteinChange,hugoGeneSymbol:t.gene.hugoGeneSymbol});if(!n)return o.a.createElement("g",null);var r=null;if(n.length>1){for(var a="M ".concat(n[0].x," ").concat(n[0].y),i=1;i<n.length;i++)a="".concat(a," L ").concat(n[i].x," ").concat(n[i].y);r=o.a.createElement("path",{style:{stroke:"#318ec4",strokeOpacity:1,strokeWidth:6,fillOpacity:0,pointerEvents:"none"},d:a})}var l=n.map(function(e){return o.a.createElement("path",{d:"M ".concat(e.x," ").concat(e.y,"\n                            m -").concat(3,", 0\n                            a ").concat(3,", ").concat(3," 0 1,0 ").concat(6,",0\n                            a ").concat(3,", ").concat(3," 0 1,0 ").concat(-6,",0\n                            "),style:{stroke:"#318ec4",fill:"white",strokeWidth:2,opacity:1,pointerEvents:"none"}})});return o.a.createElement("g",null,r,l)}):o.a.createElement("g",null)}},{key:"tooltipFunction",value:function(e){return La(e.mutation,e.tooltipOnPoint?{mutationStatus:e.datum.mutationStatus,sampleId:e.datum.sampleId,vaf:e.datum.vaf}:void 0)}},{key:"getTooltipComponent",value:function(){var e=this.tooltipModel;if(e&&null!=e.mouseEvent&&null!=e.mutation&&null!=e.datum){var t=e.mouseEvent.clientY<250?"bottom":"top";return o.a.createElement(mi.a,{isOpened:!0,node:document.body},o.a.createElement(Jt.Popover,{className:di()("cbioportal-frontend","cbioTooltip",yi.a.Tooltip,vi.a.Tooltip),positionLeft:e.mouseEvent.pageX,positionTop:e.mouseEvent.pageY+("top"===t?-7:7),style:{transform:"top"===t?"translate(-50%,-100%)":"translate(-50%,0%)",maxWidth:400},placement:t},this.tooltipFunction(e)))}return o.a.createElement("span",null)}},{key:"render",value:function(){var e=this;return o.a.createElement("svg",{width:this.props.width,height:this.props.height},this.props.lineData.map(function(t,n){return t.map(function(n,r){var a,i,l=n.x,u=n.y,s=t[r+1];s&&(a=s.x,i=s.y);var c={mutationStatus:n.mutationStatus,sampleId:n.sampleId,vaf:n.y},p=n.color;return o.a.createElement("g",null,a&&i&&o.a.createElement(Ci,{x1:l,y1:u,x2:a,y2:i,color:p,datum:c,mutation:n.mutation,onMutationClick:e.props.onMutationClick,setTooltipModel:function(t){e.tooltipModel=t,e.props.onMutationMouseOver(t.mutation)}}),o.a.createElement(_i,{x:l,y:u,color:p,datum:c,mutation:n.mutation,onMutationClick:e.props.onMutationClick,setTooltipModel:function(t){e.tooltipModel=t,e.props.onMutationMouseOver(t.mutation)}}))})}),o.a.createElement(en.Observer,null,this.getHighlights),o.a.createElement(en.Observer,null,this.getTooltipComponent))}},{key:"headerHeight",get:function(){return 20}},{key:"mutationToDataPoints",get:function(){var e=new pi.a,t=!0,n=!1,r=void 0;try{for(var o,a=this.props.lineData[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value;e.set({hugoGeneSymbol:i[0].mutation.gene.hugoGeneSymbol,proteinChange:i[0].mutation.proteinChange},i)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return e}}])&&wi(n.prototype,r),a&&wi(n,a),t}();Pi([P.observable.ref],xi.prototype,"tooltipModel",void 0),Pi([P.computed],xi.prototype,"headerHeight",null),Pi([P.computed],xi.prototype,"mutationToDataPoints",null),Pi([H.default],xi.prototype,"getHighlights",null),Pi([H.default],xi.prototype,"getTooltipComponent",null);var Ii=xi=Pi([en.observer],xi);function ki(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mi(e){return(Mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ai=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Mi(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},Di=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t,this.groupByOption=null,this._showSequentialMode=void 0,this.onlyShowSelectedInVAFChart=void 0,this.vafChartLogScale=void 0,this.vafChartYAxisToDataRange=void 0,this.minYAxisToDataRange=0,this.maxYAxisToDataRange=0,this.dataHeight=200}var t,n,r;return t=e,(n=[{key:"setGroupByOption",value:function(e){this.groupByOption=e}},{key:"setShowSequentialMode",value:function(e){this._showSequentialMode=e}},{key:"setOnlyShowSelectedInVAFChart",value:function(e){this.onlyShowSelectedInVAFChart=e}},{key:"setVafChartLogScale",value:function(e){this.vafChartLogScale=e}},{key:"setVafChartYAxisToDataRange",value:function(e){this.vafChartYAxisToDataRange=e}},{key:"showSequentialMode",get:function(){return this.isOnlySequentialModePossible||this._showSequentialMode}},{key:"groupingByIsSelected",get:function(){return!(null==this.groupByOption||"None"===this.groupByOption)}},{key:"isOnlySequentialModePossible",get:function(){return!!(this.options&&this.options.isOnlySequentialModePossible&&this.options.isOnlySequentialModePossible())}}])&&ki(t.prototype,n),r&&ki(t,r),e}();Ai([P.observable],Di.prototype,"groupByOption",void 0),Ai([P.observable],Di.prototype,"_showSequentialMode",void 0),Ai([P.computed],Di.prototype,"showSequentialMode",null),Ai([P.observable],Di.prototype,"onlyShowSelectedInVAFChart",void 0),Ai([P.observable],Di.prototype,"vafChartLogScale",void 0),Ai([P.observable],Di.prototype,"vafChartYAxisToDataRange",void 0),Ai([P.observable],Di.prototype,"minYAxisToDataRange",void 0),Ai([P.observable],Di.prototype,"maxYAxisToDataRange",void 0),Ai([P.observable],Di.prototype,"dataHeight",void 0),Ai([P.action],Di.prototype,"setGroupByOption",null),Ai([P.action],Di.prototype,"setShowSequentialMode",null),Ai([P.action],Di.prototype,"setOnlyShowSelectedInVAFChart",null),Ai([P.action],Di.prototype,"setVafChartLogScale",null),Ai([P.action],Di.prototype,"setVafChartYAxisToDataRange",null),Ai([P.computed],Di.prototype,"groupingByIsSelected",null),Ai([P.computed],Di.prototype,"isOnlySequentialModePossible",null);n(1099);var ji=n(962),Ri="-";function Ni(e,t){var n=e.event.attributes.find(function(e){return"SAMPLE_ID"===e.key});return n?{color:t.color[n.value]||"#333333",label:t.label[n.value]||Ri}:null}function Li(e,t,n){var r=e.event.attributes.find(function(e){return t.includes(e.key)}),o="#ffffff";if(r){var a=n.find(function(e){return e.re.test(r.value)});a&&(o=a.color)}return o}var Gi=function(e){var t=e.colors,n=e.labels,r=e.y,a=function(e,t){for(var n=[],r=0;r<t.length;r++){var o=parseInt(t[r]);isNaN(o)||n.push({label:o,color:e[r]})}return i.a.sortBy(n,function(e){return e.label})}(t,n),l=function(e){if(!e.length)return Ri;var t=[],n={start:e[0],end:e[0]};return e.forEach(function(e,r){0!==r&&(e===n.end+1?n.end+=1:(t.push(n),n={start:e,end:e}))}),t.push(n),t.map(function(e){return e.start!==e.end?"".concat(e.start,"-").concat(e.end):e.start.toString()}).join(", ")}(a.map(function(e){return e.label})),u=Math.ceil(Object(v.K)(l,"Arial","10px"))+8,s="clipPath_".concat(Math.random()),c=i.a.uniq(a.map(function(e){return e.color})),p=u/c.length;return o.a.createElement("g",{transform:"translate(0 ".concat(r,")")},o.a.createElement("clipPath",{id:s},o.a.createElement("rect",{x:-u/2,y:-7,rx:7,ry:7,width:u,height:14})),o.a.createElement("g",{clipPath:"url(#".concat(s,")")},c.map(function(e,t){return o.a.createElement("rect",{x:-u/2+t*p,y:-7,width:p,height:14,fill:e})}),o.a.createElement("text",{x:"0",y:"0","text-anchor":"middle",fill:"white","font-size":"10px","font-family":"Arial",dy:".3em"},l)))},Vi=function(e){var t=e.color,n=e.label,r=e.y;return o.a.createElement("g",{transform:"translate(0 ".concat(r,")")},o.a.createElement("circle",{cx:"0",cy:"0",r:"7",fill:t}),o.a.createElement("text",{x:"0",y:"0","text-anchor":"middle",fill:"white","font-size":"10px","font-family":"Arial",dy:".3em"},n))},Fi="Other";function Ui(e){return e.sortOrder=["Sample acquisition","Sequencing","Surgery","Diagnostics","Diagnostic","Diagnosis","Treatment","Lab_test","Status","IMAGING","Med Onc Assessment"],e.trackStructures=[["TREATMENT","TREATMENT_TYPE","AGENT"],["LAB_TEST","TEST"]],e.trackEventRenderers.push({trackTypeMatch:/Med Onc Assessment|MedOnc/i,configureTrack:function(e){e.label="Med Onc Assessment";var t=function(e){return Li(e,["CURATED_CANCER_STATUS"],[{re:/indeter/i,color:"#ffffff"},{re:/stable/i,color:"gainsboro"},{re:/mixed/i,color:"goldenrod"},{re:/improving/i,color:"rgb(44, 160, 44)"},{re:/worsening/i,color:"rgb(214, 39, 40)"}])},n=!0,r=!1,a=void 0;try{for(var i,l=function(){var e=i.value,n=t(e);e.render=function(e){return o.a.createElement("circle",{cx:"0",cy:ji.a/2,r:"4",stroke:"#999999",fill:n})}},u=e.items[Symbol.iterator]();!(n=(i=u.next()).done);n=!0)l()}catch(e){r=!0,a=e}finally{try{n||null==u.return||u.return()}finally{if(r)throw a}}e.renderEvents=function(e){return o.a.createElement(o.a.Fragment,null,Object(ji.i)(e.length),Object(ji.h)(e.map(t)))}}}),e.trackEventRenderers.push({trackTypeMatch:/IMAGING/i,configureTrack:function(e){if(e.label="Imaging Assessment",e.items&&e.items.length){var t=function(e){return Li(e,["IMAGE_OVERALL","CURATED_CANCER_STATUS"],[{re:/indeter|does not mention/i,color:"#ffffff"},{re:/stable/i,color:"gainsboro"},{re:/mixed/i,color:"goldenrod"},{re:/improving/i,color:"rgb(44, 160, 44)"},{re:/worsening/i,color:"rgb(214, 39, 40)"}])},n=!0,r=!1,a=void 0;try{for(var i,l=function(){var e=i.value,n=t(e);e.render=function(){return o.a.createElement("circle",{cx:"0",cy:ji.a/2,r:"4",stroke:"#999999",fill:n})}},u=e.items[Symbol.iterator]();!(n=(i=u.next()).done);n=!0)l()}catch(e){r=!0,a=e}finally{try{n||null==u.return||u.return()}finally{if(r)throw a}}e.renderEvents=function(e){return o.a.createElement(o.a.Fragment,null,Object(ji.i)(e.length),Object(ji.h)(e.map(t)))}}}}),e}function Bi(e,t){return{sortOrder:["Specimen","Sequencing","Sample Acquisition","Surgery","Med Onc","Med Onc Assessment","Status","Diagnostics","Diagnostic","Imaging","Imaging Assessment","Lab_test","Treatment"],trackStructures:[["TREATMENT","TREATMENT_TYPE","SUBTYPE","AGENT"],["LAB_TEST","TEST"],["DIAGNOSIS","SUBTYPE"]],trackEventRenderers:[{trackTypeMatch:/LAB_TEST/i,configureTrack:function(e){e.tracks&&e.tracks.forEach(function(e){"PSA"!==e.type&&Ki(e)});var t=e.tracks?e.tracks.find(function(e){return"PSA"===e.type}):void 0;t&&t&&t.items.length&&(t.trackType=ji.d.LINE_CHART,t.getLineChartValue=function(e){var t=Object(ji.g)("VALUE",e)||Object(ji.g)("RESULT",e);return void 0===t?null:parseFloat(t.replace(/^[<>]/gi,""))})}},{trackTypeMatch:/SPECIMEN|SAMPLE ACQUISITION|SEQUENCING/i,configureTrack:function(n){n.renderTooltip=function(t){var n=t.event.attributes.find(function(e){return"SAMPLE_ID"===e.key});if(!n||!n.value)return null;var r=e.samples.find(function(e){return e.id===n.value});return r?o.a.createElement("table",null,o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("th",null,"SAMPLE ID"),o.a.createElement("td",null,r.id)),r.clinicalData.map(function(e){return o.a.createElement("tr",null,o.a.createElement("th",null,e.clinicalAttributeId.toUpperCase().replace(/_/g," ")),o.a.createElement("td",null,e.value))}),o.a.createElement("tr",null,o.a.createElement("th",null,"START DATE"),o.a.createElement("td",{className:"nowrap"},Object(ji.f)(t.start))))):null},n.items.forEach(function(e,n){var r=Ni(e,t);r&&(e.render=function(e){return o.a.createElement(Vi,{color:r.color,label:r.label,y:ji.a/2})})}),n.sortSimultaneousEvents=function(e){return i.a.sortBy(e,function(e){var n=Number.POSITIVE_INFINITY,r=Ni(e,t);if(r){var o=parseInt(r.label);isNaN(o)||(n=o)}return n})},n.renderEvents=function(e){var n=[],r=[],a=!0,i=!1,l=void 0;try{for(var u,s=e[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var c=Ni(u.value,t);c&&(n.push(c.color),r.push(c.label))}}catch(e){i=!0,l=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw l}}return o.a.createElement(Gi,{colors:n,labels:r,y:ji.a/2})}}}]}}function Hi(e,t){var n=i.a.keyBy(e.trackStructures,function(e){return e[0]}),r=i.a.groupBy(t,function(e){return e.eventType.toUpperCase()});return i.a.uniq(e.sortOrder.map(function(e){return e.toUpperCase()}).concat(Object.keys(r))).reduce(function(e,t){var o=r[t];return o?(t in n?e.push(Wi(function e(t,n,r,o){var a=i.a.groupBy(r,function(e){var t=e.attributes.find(function(e){return e.key===n[0]});return t?t.value:Fi});var l=i.a.map(a,function(t,r){if(n.length>1){var a=e(r,n.slice(1),t,"".concat(o,".").concat(r));return a}return{type:r,items:qi(t),uid:"".concat(o,".").concat(r)}});var u={type:t,tracks:l,items:[],uid:o};return u}(t,n[t].slice(1),o,t))):e.push({type:t,items:qi(o),uid:t}),e):e},[])}function Wi(e){for(;e.tracks&&1===e.tracks.length&&e.tracks[0].type===Fi;)e.items=e.items.concat(e.tracks[0].items),e.tracks=e.tracks[0].tracks;return e.tracks&&e.tracks.forEach(Wi),e}function qi(e){return e.map(function(e){return{end:e.endNumberOfDaysSinceDiagnosis||e.startNumberOfDaysSinceDiagnosis,start:e.startNumberOfDaysSinceDiagnosis,event:e}})}function zi(e,t){var n=Object(ji.g)(e,t);return void 0===n?null:parseFloat(n.replace(/^[<>]/gi,""))}function Ki(e){e.items.length&&(i.a.every(e.items,function(e){var t=zi("RESULT",e);return!(!t||isNaN(t))})&&(e.trackType=ji.d.LINE_CHART,e.getLineChartValue=function(e){return zi("RESULT",e)}),e.tracks&&e.tracks.forEach(Ki))}function Yi(e){return(Yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xi(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Zi=.001;function Qi(e){return e.mutationStatus===Da.MUTATED_WITH_VAF||e.mutationStatus===Da.PROFILED_WITH_READS_BUT_UNCALLED}function $i(e,t,n){if(void 0===n||0==+n)return Math[e](t);if(t=+t,n=+n,isNaN(t)||"number"!=typeof n||n%1!=0)return NaN;var r=t.toString().split("e");return+((r=Math[e](+(r[0]+"e"+(r[1]?+r[1]-n:-n))).toString().split("e"))[0]+"e"+(r[1]?+r[1]+n:n))}function Ji(e){return 0==e||e>=.1?0:Object(Ut.T)(e)}var el=Object(en.observer)(function(e){var t=e.ticks,n=e.legendHeight,r=i()(t).map(function(e){return e.offset}).max()||0;return o.a.createElement("div",{style:{height:n,width:50}},o.a.createElement("svg",{height:n,width:50,style:{textTransform:"none",position:"relative"}},o.a.createElement("text",{style:{textAlign:"left"},"text-anchor":"middle",transform:"translate(".concat(10,",").concat(r/2,") rotate(-90)")},"Allele Frequency"),o.a.createElement("g",{transform:"translate(0,0)"},t.map(function(e,t){return o.a.createElement("g",{transform:"translate(".concat(20,",0)")},o.a.createElement("text",{y:e.offset,"font-size":"10px",style:{textAlign:"right"}},e.label),o.a.createElement("rect",{width:5,height:1,fill:"#aaa",transform:"translate(20,".concat(e.offset-4,")")}))}))))}),tl=n(26),nl=n(1164),rl=n.n(nl),ol=n(76),al=n.n(ol);function il(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var ll=["PATIENT_ID","START_DATE","STOP_DATE","EVENT_TYPE"];function ul(e){var t=i.a.groupBy(e,function(e){return e.eventType}),n=new rl.a;i.a.forEach(t,function(e,t){n.file("data_timeline_".concat(t.toLowerCase(),".txt"),sl(e).map(function(e){return e.join("\t")}).join("\n")+"\n")}),n.generateAsync({type:"blob"}).then(function(e){al()(e,"timeline.zip")})}function sl(e){var t={},n=!0,r=!1,o=void 0;try{for(var a,i=e[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var l=a.value,u=!0,s=!1,c=void 0;try{for(var p,f=l.attributes[Symbol.iterator]();!(u=(p=f.next()).done);u=!0){t[p.value.key]=!0}}catch(e){s=!0,c=e}finally{try{u||null==f.return||f.return()}finally{if(s)throw c}}}}catch(e){r=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}var d=Object.keys(t),m=[];m.push(ll.concat(d));var h=!0,y=!1,g=void 0;try{for(var v,b=e[Symbol.iterator]();!(h=(v=b.next()).done);h=!0){var w=v.value;m.push(cl(w,d))}}catch(e){y=!0,g=e}finally{try{h||null==b.return||b.return()}finally{if(y)throw g}}return m}function cl(e,t){return[e.patientId,void 0!==e.startNumberOfDaysSinceDiagnosis?e.startNumberOfDaysSinceDiagnosis.toString():"",void 0!==e.endNumberOfDaysSinceDiagnosis?e.endNumberOfDaysSinceDiagnosis.toString():"",e.eventType].concat(il(t.map(function(t){return function(e,t){var n=e.find(function(e){return e.key===t});return void 0===n?void 0:n.value}(e.attributes,t)||""})))}function pl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fl(e,t){return!t||"object"!==hl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dl(e){return(dl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ml(e,t){return(ml=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hl(e){return(hl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var yl=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":hl(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},gl=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=fl(this,dl(t).call(this,e));var r=window.location.href.includes("genie_bpc"),o=Bi(e.sampleManager,e.caseMetaData);r&&Ui(o);var a=Hi(o,n.props.data);return Object(ji.e)(a,o.trackEventRenderers),n.store=new ji.c(a),n.wrapperStore=new Di({isOnlySequentialModePossible:function(){return 0===n.props.data.length}}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ml(e,t)}(t,o.a.Component),n=t,(r=[{key:"sampleIcons",value:function(e){var t=this,n=i.a.groupBy(e,function(e){return t.xPosition[e]}),r=Object.values(n).map(function(e){var n=e[0],r=t.xPosition[n],a=e.map(function(e){return t.props.caseMetaData.color[e]})||["#333333"],i=e.map(function(e){return t.props.caseMetaData.label[e]})||["-"];return o.a.createElement("g",{transform:"translate(".concat(r,")")},o.a.createElement(Gi,{colors:a,labels:i,y:10}))});return o.a.createElement("g",null,r)}},{key:"groupByTrackLabel",value:function(e){return o.a.createElement(v.g,{text:this.clinicalValuesForGrouping[e],style:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",color:this.groupColorByGroupIndex(e)}})}},{key:"groupColorByGroupIndex",value:function(e){return this.wrapperStore.groupingByIsSelected&&this.numGroupByGroups>1?this.clinicalValueToColor[this.clinicalValuesForGrouping[e]]:"rgb(0,0,0)"}},{key:"render",value:function(){var e=this;return this.store&&this.wrapperStore?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{marginTop:20},"data-test":"VAFChartWrapper"},o.a.createElement(ci,{wrapperStore:this.wrapperStore,sampleManager:this.props.sampleManager}),o.a.createElement(ji.b,{key:"this.props.headerWidth-".concat(this.numGroupByGroups.toString(),"-").concat(this.wrapperStore.showSequentialMode?"seq":"noseq"),store:this.store,onClickDownload:function(){return ul(e.props.data)},width:this.props.width,hideLabels:!1,hideXAxis:this.wrapperStore.showSequentialMode,visibleTracks:[],disableZoom:!0,customTracks:this.customTracks,headerWidth:this.numGroupByGroups>0?150:this.props.headerWidth}))):null}},{key:"maxYTickmarkValue",get:function(){return this.wrapperStore.vafChartYAxisToDataRange&&void 0!==this.maxYValue?(e=this.maxYValue,t=-Ji(this.maxYValue)-1,$i("ceil",e,t)):1;var e,t}},{key:"minYTickmarkValue",get:function(){return this.wrapperStore.vafChartYAxisToDataRange&&void 0!==this.minYValue?(e=this.minYValue,t=-Ji(this.minYValue)-1,$i("floor",e,t)):0;var e,t}},{key:"ticks",get:function(){var e=this,t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6;if(0===n)return[e,t];for(var r=(t-e)/(n-1),o=[e],a=1;a<n;a++){var i=o[a-1]+r;o[a]=i}return o}(this.minYTickmarkValue,this.maxYTickmarkValue),n=function(e){for(var t=e.filter(function(e,t,n){return n.indexOf(e)===t}),n=t.map(function(e){return Number.isInteger(e)?0:Ji(e)+1}),r=function(e){var n=t.map(function(t){return t.toFixed(e)}).filter(function(e,t,n){return n.indexOf(e)===t});if(n.length===t.length)return{v:n}},o=Math.min.apply(Math,Xi(n));o<=3;o++){var a=r(o);if("object"===Yi(a))return a.v}return t.map(function(e){return e.toExponential()})}(t);return t.length!==n.length&&(t=n.map(function(e){return Number(e)})),i.a.map(t,function(t,r){return{label:n[r],value:t,offset:e.scaleYValue(t)}})}},{key:"yPosition",get:function(){var e=this,t={};return this.lineData.forEach(function(n,r){n.forEach(function(n,r){t[n.y]=e.scaleYValue(n.y)})}),t}},{key:"scaleYValue",get:function(){return function(e,t,n,r){if(void 0!==t&&void 0!==e){var o=n-20;if(r){var a=Math.log10(Math.max(Zi,e)),i=o/(Math.log10(Math.max(Zi,t))-a);return function(e){var t=Math.log10(Math.max(Zi,e));return n-10-(t-a)*i}}var l=o/(t-e);return function(t){return n-10-(t-e)*l}}return function(e){return e}}(this.minYTickmarkValue,this.maxYTickmarkValue,this.wrapperStore.dataHeight,this.wrapperStore.vafChartLogScale)}},{key:"mutations",get:function(){var e=this;return this.wrapperStore.onlyShowSelectedInVAFChart?this.props.dataStore.allData.filter(function(t){return e.props.dataStore.isMutationSelected(t[0])}):this.props.dataStore.allData}},{key:"lineData",get:function(){return function(e,t,n,r,o,a,l){var u=[],s=[];a&&a!=si&&(t=function(e,t){var n={},r=[];return e.forEach(function(e,o){for(var a in n={},e.forEach(function(e,r){void 0===n[t[e.sampleId]]&&(n[t[e.sampleId]]=[]),n[t[e.sampleId]].push(e)}),n)r.push(n[a])}),r}(t,l));var c=!0,p=!1,f=void 0;try{for(var d,m=t[Symbol.iterator]();!(c=(d=m.next()).done);c=!0){var h=d.value,y=[],g={},v=!0,b=!1,w=void 0;try{for(var S,T=h[Symbol.iterator]();!(v=(S=T.next()).done);v=!0){var E=S.value,O=E.uniqueSampleKey,P=E.sampleId,_=Object(pn.j)(E);null!==_?"uncalled"===E.mutationStatus.toLowerCase()?E.tumorAltCount>0&&(y.push({x:n[P],y:_,sampleId:P,mutation:E,mutationStatus:Da.PROFILED_WITH_READS_BUT_UNCALLED}),g[O]=!0):(y.push({x:n[P],y:_,sampleId:P,mutation:E,mutationStatus:Da.MUTATED_WITH_VAF}),g[O]=!0):(y.push({x:n[P],sampleId:P,mutation:E,mutationStatus:Da.MUTATED_BUT_NO_VAF}),g[O]=!0)}}catch(e){b=!0,w=e}finally{try{v||null==T.return||T.return()}finally{if(b)throw w}}var C=h[0],x=!0,I=!1,k=void 0;try{for(var M,A=e[Symbol.iterator]();!(x=(M=A.next()).done);x=!0){var D=M.value;D.uniqueSampleKey in g||(Object(Na.a)(D.uniqueSampleKey,r,C.gene.hugoGeneSymbol,o)?y.push({x:n[D.sampleId],y:0,sampleId:D.sampleId,mutation:C,mutationStatus:Da.PROFILED_BUT_NOT_MUTATED}):y.push({x:n[D.sampleId],sampleId:D.sampleId,mutation:C,mutationStatus:Da.NOT_PROFILED}))}}catch(e){I=!0,k=e}finally{try{x||null==A.return||A.return()}finally{if(I)throw k}}for(y=i.a.sortBy(y,function(e){return e.x});y.length>0&&!Qi(y[0]);)y.shift();for(;y.length>0&&!Qi(y[y.length-1]);)y.pop();if(0!==y.length){for(var j=[],R=[],N=0;N<y.length;N++)if(0!==N&&N!==y.length-1&&void 0===y[N].y){var L=0,G=0;for(L=N;L>=0&&void 0===y[L].y;L--);for(G=N;G<=y.length-1&&void 0===y[G].y;G++);var V=1/(G-L);y[N].y=(N-L)*V*(y[L].y+y[G].y),R.push(y[N])}else j.push(y[N]);u.push.apply(u,R),s.push(j)}}}catch(e){p=!0,f=e}finally{try{c||null==m.return||m.return()}finally{if(p)throw f}}return{lineData:s,grayPoints:u}}(this.props.samples,this.mutations,this.props.sampleManager.sampleIdToIndexMap,this.props.mutationProfileId,this.props.coverageInformation,this.wrapperStore.groupByOption,this.sampleIdToClinicalValue).lineData}},{key:"scaledAndColoredLineData",get:function(){var e=this,t=[];return this.lineData.map(function(n,r){t[r]=[],n.map(function(n,o){t[r].push({x:e.xPosition[n.sampleId],y:e.yPosition[n.y],sampleId:n.sampleId,mutation:n.mutation,mutationStatus:n.mutationStatus,color:e.groupColor(n.sampleId)})})}),t}},{key:"minYValue",get:function(){return i()(this.lineData).flatten().map(function(e){return e.y}).min()}},{key:"maxYValue",get:function(){return i()(this.lineData).flatten().map(function(e){return e.y}).max()}},{key:"sampleIdToClinicalValue",get:function(){var e=this,t={};return this.wrapperStore.groupingByIsSelected&&this.props.sampleManager.samples.forEach(function(n,r){t[n.id]=Re.getClinicalAttributeInSample(n,e.wrapperStore.groupByOption).value}),t}},{key:"sampleIconsTracks",get:function(){var e=this,t=[];return this.wrapperStore.groupingByIsSelected?i.a.forIn(this.sampleGroups,function(n,r){var o=parseInt(r);t.push({renderHeader:function(){return e.groupByTrackLabel(o)},renderTrack:function(){return e.sampleIcons(n)},height:function(){return 20},labelForExport:e.clinicalValuesForGrouping[o]})}):t.push({renderHeader:function(){return""},renderTrack:function(){return e.sampleIcons(e.sampleIds)},height:function(){return 20},labelForExport:"VAF Samples"}),t}},{key:"xPosition",get:function(){var e,t=this,n=0;return this.wrapperStore.showSequentialMode?(n=(this.store.pixelWidth-40)/(this.props.samples.length-1),e=this.props.samples.reduce(function(e,r){return e[r.sampleId]=t.sampleIdOrder[r.sampleId]*n+20,e},{})):e=this.store.sampleEvents.reduce(function(e,n){return e[n.event.attributes.find(function(e){return"SAMPLE_ID"===e.key}).value]=t.store.getPosition(n).pixelLeft,e},{}),e}},{key:"sampleIdOrder",get:function(){return Object(v.X)(this.props.sampleManager.getSampleIdsInOrder())}},{key:"groupColor",get:function(){var e=this;return function(t){return e.wrapperStore.groupingByIsSelected&&e.numGroupByGroups>1?e.clinicalValueToColor[e.sampleIdToClinicalValue[t]]:"rgb(0,0,0)"}}},{key:"clinicalValueToColor",get:function(){var e={},t=Object(tl.i)();return De(this.props.sampleManager.samples,this.wrapperStore.groupByOption).forEach(function(n,r){e[r]=t()}),e}},{key:"numGroupByGroups",get:function(){return this.wrapperStore.groupingByIsSelected?i.a.keys(this.sampleGroups).length:0}},{key:"sampleIds",get:function(){return this.props.samples.map(function(e){return e.sampleId})}},{key:"sampleGroups",get:function(){var e=this,t={};return this.sampleIds.forEach(function(n,r){console.info("Sample id "+n+" is in group "+e.sampleIdToClinicalValue[n]),null==t[e.clinicalValuesForGrouping.indexOf(e.sampleIdToClinicalValue[n])]&&(t[e.clinicalValuesForGrouping.indexOf(e.sampleIdToClinicalValue[n])]=[]),t[e.clinicalValuesForGrouping.indexOf(e.sampleIdToClinicalValue[n])].push(n)}),t}},{key:"clinicalValuesForGrouping",get:function(){var e=[];return De(this.props.sampleManager.samples,this.wrapperStore.groupByOption).forEach(function(t,n){e.push(n)}),e}},{key:"vafChartHeight",get:function(){return i.a.sum([this.wrapperStore.dataHeight,20])}},{key:"customTracks",get:function(){var e=this,t=this.props.dataStore.mouseOverMutation,n=this.props.dataStore.selectedMutations,r=this.scaledAndColoredLineData,a=this.vafChartHeight;this.numGroupByGroups>0||this.props.headerWidth;return[{renderHeader:function(t){return o.a.createElement("div",{className:"positionAbsolute",style:{right:-6}},o.a.createElement(el,{ticks:e.ticks,legendHeight:e.vafChartHeight}))},renderTrack:function(i){return o.a.createElement(Ii,{mouseOverMutation:t,onMutationMouseOver:function(t){return e.props.dataStore.setMouseOverMutation(t)},selectedMutations:n,onMutationClick:function(t){return e.props.dataStore.toggleSelectedMutation(t)},onlyShowSelectedInVAFChart:e.wrapperStore.onlyShowSelectedInVAFChart,lineData:r,height:a,width:e.store.viewPortWidth})},disableHover:!0,height:function(e){return a},labelForExport:"VAF"}].concat(this.sampleIconsTracks)}}])&&pl(n.prototype,r),a&&pl(n,a),t}();yl([P.computed],gl.prototype,"maxYTickmarkValue",null),yl([P.computed],gl.prototype,"minYTickmarkValue",null),yl([P.computed],gl.prototype,"ticks",null),yl([P.computed],gl.prototype,"yPosition",null),yl([P.computed],gl.prototype,"scaleYValue",null),yl([P.computed],gl.prototype,"mutations",null),yl([P.computed],gl.prototype,"lineData",null),yl([P.computed],gl.prototype,"scaledAndColoredLineData",null),yl([P.computed],gl.prototype,"minYValue",null),yl([P.computed],gl.prototype,"maxYValue",null),yl([P.computed],gl.prototype,"sampleIdToClinicalValue",null),yl([P.computed],gl.prototype,"sampleIconsTracks",null),yl([P.computed],gl.prototype,"xPosition",null),yl([P.computed],gl.prototype,"sampleIdOrder",null),yl([P.computed],gl.prototype,"groupColor",null),yl([P.computed],gl.prototype,"clinicalValueToColor",null),yl([P.computed],gl.prototype,"numGroupByGroups",null),yl([P.computed],gl.prototype,"sampleIds",null),yl([P.computed],gl.prototype,"sampleGroups",null),yl([P.computed],gl.prototype,"clinicalValuesForGrouping",null),yl([P.computed],gl.prototype,"vafChartHeight",null),yl([P.computed],gl.prototype,"customTracks",null);var vl=gl=yl([en.observer],gl),bl=n(1100);function wl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Sl=Object(bl.a)(function(e){var t=e.data,n=e.caseMetaData,a=e.sampleManager,i=e.width,l=e.headerWidth,u=wl(Object(r.useState)(null),2),s=(u[0],u[1],wl(Object(r.useState)(null),2)),c=s[0],p=s[1],f=wl(Object(r.useState)(null),2),d=f[0],m=f[1];return Object(r.useEffect)(function(){var e=window.location.href.includes("genie_bpc"),r=Bi(a,n);e&&Ui(r);var o=Hi(r,t);Object(ji.e)(o,r.trackEventRenderers);var i=new ji.c(o);p(i);var l=new Di;m(l)},[]),c&&d?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement(ji.b,{store:c,width:i,headerWidth:l,onClickDownload:function(){return ul(t)}})))):o.a.createElement("div",null)});function Tl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function El(e,t){return!t||"object"!==_l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ol(e){return(Ol=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pl(e,t){return(Pl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _l(e){return(_l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Cl,xl=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":_l(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};!function(e){e.LINE_CHART="lineChart",e.HEATMAP="heatmap",e.TIMELINE="timeline"}(Cl||(Cl={}));var Il="patient_view_mutations_tab__vaf_plot_choice",kl=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=El(this,Ol(t).apply(this,arguments))).dataStore=new qo(function(){return e.mergedMutations},e.props.urlWrapper),e.vafLineChartSvg=null,e._plotTab=localStorage.getItem(Il)||Cl.LINE_CHART,e.vafLineChart=Object(ja.a)({await:function(){return[e.props.patientViewPageStore.coverageInformation,e.props.patientViewPageStore.samples,e.props.patientViewPageStore.mutationMolecularProfileId]},renderPending:function(){return r.createElement(xo.a,{isLoading:!0,size:"small"})},render:function(){return r.createElement(r.Fragment,null,e.props.sampleManager&&r.createElement(vl,{key:"vafKey".concat(Qo.a.size.width,"-").concat(e.showTimeline),dataStore:e.dataStore,caseMetaData:{color:e.props.sampleManager.sampleColors,label:e.props.sampleManager.sampleLabels,index:e.props.sampleManager.sampleIndex},data:e.props.patientViewPageStore.clinicalEvents.result,sampleManager:e.props.sampleManager,width:Qo.a.size.width,samples:e.props.patientViewPageStore.samples.result,mutationProfileId:e.props.patientViewPageStore.mutationMolecularProfileId.result,coverageInformation:e.props.patientViewPageStore.coverageInformation.result,headerWidth:e.showTimeline?150:50}))},showLastRenderWhenPending:!0}),e.table=Object(ja.a)({await:function(){return[e.props.patientViewPageStore.mutationData,e.props.patientViewPageStore.uncalledMutationData,e.props.patientViewPageStore.oncoKbAnnotatedGenes,e.props.patientViewPageStore.studyIdToStudy,e.props.patientViewPageStore.sampleToMutationGenePanelId,e.props.patientViewPageStore.genePanelIdToEntrezGeneIds]},renderPending:function(){return r.createElement(xo.a,{isLoading:!0,size:"small"})},render:function(){return r.createElement("div",{"data-test":"GenomicEvolutionMutationTable"},r.createElement("div",{style:{float:"left",marginRight:15,marginTop:4}},r.createElement(Ba.a,{checked:e.dataStore.onlyShowSelectedInTable,onChange:function(){return e.dataStore.setOnlyShowSelectedInTable(!e.dataStore.onlyShowSelectedInTable)},labelProps:{style:{marginRight:10}},inputProps:{"data-test":"TableShowOnlyHighlighted"}},r.createElement("span",{style:{marginTop:-3}},"Show only selected mutations"))),r.createElement(ho,{dataStore:e.dataStore,showGeneFilterMenu:e.props.patientViewPageStore.mutationTableShowGeneFilterMenu.result,currentGeneFilter:e.props.patientViewPageStore.mutationTableGeneFilterOption,onFilterGenes:e.onFilterGenesMutationTable,onRowClick:e.onTableRowClick,onRowMouseEnter:e.onTableRowMouseEnter,onRowMouseLeave:e.onTableRowMouseLeave,studyIdToStudy:e.props.patientViewPageStore.studyIdToStudy.result,sampleManager:e.props.sampleManager,sampleIds:e.props.sampleManager?e.props.sampleManager.getSampleIdsInOrder():[],uniqueSampleKeyToTumorType:e.props.patientViewPageStore.uniqueSampleKeyToTumorType,molecularProfileIdToMolecularProfile:e.props.patientViewPageStore.molecularProfileIdToMolecularProfile.result,variantCountCache:e.props.patientViewPageStore.variantCountCache,indexedVariantAnnotations:e.props.patientViewPageStore.indexedVariantAnnotations,indexedMyVariantInfoAnnotations:e.props.patientViewPageStore.indexedMyVariantInfoAnnotations,discreteCNACache:e.props.patientViewPageStore.discreteCNACache,mrnaExprRankCache:e.props.patientViewPageStore.mrnaExprRankCache,pubMedCache:e.props.patientViewPageStore.pubMedCache,genomeNexusCache:e.props.patientViewPageStore.genomeNexusCache,mrnaExprRankMolecularProfileId:e.props.patientViewPageStore.mrnaRankMolecularProfileId.result||void 0,discreteCNAMolecularProfileId:e.props.patientViewPageStore.molecularProfileIdDiscrete.result,downloadDataFetcher:e.props.patientViewPageStore.downloadDataFetcher,mutSigData:e.props.patientViewPageStore.mutSigData.result,myCancerGenomeData:e.props.patientViewPageStore.myCancerGenomeData,hotspotData:e.props.patientViewPageStore.indexedHotspotData,cosmicData:e.props.patientViewPageStore.cosmicData.result,oncoKbData:e.props.patientViewPageStore.oncoKbData,oncoKbCancerGenes:e.props.patientViewPageStore.oncoKbCancerGenes,usingPublicOncoKbInstance:e.props.patientViewPageStore.usingPublicOncoKbInstance,civicGenes:e.props.patientViewPageStore.civicGenes,civicVariants:e.props.patientViewPageStore.civicVariants,userEmailAddress:Vt.a.getUserEmailAddress(),enableOncoKb:Vt.b.serverConfig.show_oncokb,enableFunctionalImpact:Vt.b.serverConfig.show_genomenexus,enableHotspot:Vt.b.serverConfig.show_hotspot,enableMyCancerGenome:Vt.b.serverConfig.mycancergenome_show,enableCivic:Vt.b.serverConfig.show_civic,columnVisibility:e.props.mutationTableColumnVisibility,columnVisibilityProps:{onColumnToggled:e.props.onMutationTableColumnVisibilityToggled},sampleToGenePanelId:e.props.patientViewPageStore.sampleToMutationGenePanelId.result,genePanelIdToEntrezGeneIds:e.props.patientViewPageStore.genePanelIdToEntrezGeneIds.result,generateGenomeNexusHgvsgUrl:e.props.patientViewPageStore.generateGenomeNexusHgvsgUrl,sampleIdToClinicalDataMap:e.props.patientViewPageStore.clinicalDataGroupedBySampleMap,existsSomeMutationWithAscnProperty:e.props.patientViewPageStore.existsSomeMutationWithAscnProperty}))}}),e.timeline=Object(ja.a)({await:function(){return[e.props.patientViewPageStore.clinicalEvents]},render:function(){return null!==e.props.sampleManager&&e.props.patientViewPageStore.clinicalEvents.result.length>0?r.createElement("div",{style:{marginBottom:20}},r.createElement("button",{className:"btn btn-xs btn-default displayBlock",onClick:e.toggleTimeline,"data-test":"ToggleTimeline"},e.showTimeline?"Hide Timeline":"Show Timeline"),e.showTimeline&&r.createElement("div",{style:{marginTop:10}},r.createElement(Sl,{key:"tlkey-".concat(Qo.a.size.width,"-").concat(e.showTimeline,"1"),dataStore:e.dataStore,caseMetaData:{color:e.props.sampleManager.sampleColors,label:e.props.sampleManager.sampleLabels,index:e.props.sampleManager.sampleIndex},data:e.props.patientViewPageStore.clinicalEvents.result,sampleManager:e.props.sampleManager,width:Qo.a.size.width,samples:e.props.patientViewPageStore.samples.result,mutationProfileId:e.props.patientViewPageStore.mutationMolecularProfileId.result,headerWidth:150}))):null}}),e.tabUI=Object(ja.a)({await:function(){return[e.table,e.vafLineChart,e.timeline]},renderPending:function(){return r.createElement(xo.a,{isLoading:!0,size:"big",center:!0})},render:function(){return r.createElement("div",{"data-test":"GenomicEvolutionTab"},r.createElement(Po.b,{activeTabId:e.plotTab,onTabClick:e.setPlotTab,className:"secondaryNavigation vafVizNavTabs",unmountOnHide:!1},r.createElement(Po.a,{id:Cl.LINE_CHART,linkText:"Line Chart"},r.createElement("div",{style:{paddingBottom:10,width:Qo.a.size.width-50}},e.timeline.component,e.vafLineChart.component)),r.createElement(Po.a,{id:Cl.HEATMAP,linkText:"Heatmap"},r.createElement("div",{style:{paddingBottom:10}},r.createElement(ii,{store:e.props.patientViewPageStore,dataStore:e.dataStore,sampleManager:e.props.sampleManager,urlWrapper:e.props.urlWrapper})))),r.createElement("div",{style:{marginTop:20}},e.table.component))}}),e}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pl(e,t)}(t,r["Component"]),n=t,(o=[{key:"toggleTimeline",value:function(){this.showTimeline=!this.showTimeline}},{key:"setPlotTab",value:function(e){this._plotTab=e,localStorage.setItem(Il,e)}},{key:"vafLineChartSvgRef",value:function(e){this.vafLineChartSvg=e}},{key:"onTableRowClick",value:function(e){e.length&&this.dataStore.toggleSelectedMutation(e[0])}},{key:"onTableRowMouseEnter",value:function(e){e.length&&this.dataStore.setMouseOverMutation(e[0])}},{key:"onTableRowMouseLeave",value:function(){this.dataStore.setMouseOverMutation(null)}},{key:"onFilterGenesMutationTable",value:function(e){this.props.patientViewPageStore.mutationTableGeneFilterOption=e}},{key:"render",value:function(){return this.tabUI.component}},{key:"showTimeline",get:function(){return"true"===this.props.urlWrapper.query.genomicEvolutionSettings.showTimeline},set:function(e){this.props.urlWrapper.updateURL({genomicEvolutionSettings:Object.assign({},this.props.urlWrapper.query.genomicEvolutionSettings,{showTimeline:e.toString()})})}},{key:"vafLineChartLogScale",get:function(){return"true"===this.props.urlWrapper.query.genomicEvolutionSettings.logScaleChart},set:function(e){this.props.urlWrapper.updateURL(function(t){return t.genomicEvolutionSettings.logScaleChart=e.toString(),t})}},{key:"vafLineChartZeroToOneYAxis",get:function(){var e=this.props.urlWrapper.query.genomicEvolutionSettings.yAxisDataRangeInChart;return!e||"true"===e},set:function(e){this.props.urlWrapper.updateURL(function(t){return t.genomicEvolutionSettings.yAxisDataRangeInChart=e.toString(),t})}},{key:"plotTab",get:function(){return this._plotTab}},{key:"mergedMutations",get:function(){return this.props.patientViewPageStore.mergedMutationDataIncludingUncalledFilteredByGene.filter(function(e){return!Object(pn.n)(e[0])})}}])&&Tl(n.prototype,o),a&&Tl(n,a),t}();xl([H.default,P.action],kl.prototype,"toggleTimeline",null),xl([P.observable],kl.prototype,"_plotTab",void 0),xl([P.computed],kl.prototype,"plotTab",null),xl([H.default,P.action],kl.prototype,"setPlotTab",null),xl([H.default],kl.prototype,"vafLineChartSvgRef",null),xl([P.computed],kl.prototype,"mergedMutations",null),xl([H.default],kl.prototype,"onTableRowClick",null),xl([H.default],kl.prototype,"onTableRowMouseEnter",null),xl([H.default],kl.prototype,"onTableRowMouseLeave",null),xl([H.default],kl.prototype,"onFilterGenesMutationTable",null);var Ml=kl=xl([en.observer],kl),Al=n(844),Dl=n(315),jl=n(372),Rl=n(1101),Nl=n.n(Rl),Ll=n(365);function Gl(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Vl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fl(e,t){return!t||"object"!==Hl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ul(e){return(Ul=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bl(e,t){return(Bl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Hl(e){return(Hl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Wl=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Hl(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},ql=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Fl(this,Ul(t).apply(this,arguments))).filter="",e.genesDividedToColumns=function(t){for(var n=[],r=e.columnCount,o=Gl(t);r>0;){var i=Object(a.chunk)(o,Math.ceil(o.length/r));if(i.length===r){n=n.concat(i);break}n.push(i[0]),o=o.slice(Object(a.flatten)(n).length),r--}return n},e.getDownloadData=function(){var t=[["Genes"]].concat(Gl(e.props.genePanel.genes.map(function(e){return[e.hugoGeneSymbol]})));return Object(jl.a)(t)},e.genesDividedToRows=function(t){for(var n=e.genesDividedToColumns(t),r=[],o=e.geneCountPerColumn(t.length),a=0;a<o;a++){for(var i=[],l=0;l<e.columnCount;l++)i.push(n[l]&&n[l][a]?n[l][a].hugoGeneSymbol:"");r.push(i)}return r},e.geneCountPerColumn=function(t){return Math.ceil(t/e.columnCount)},e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bl(e,t)}(t,r["Component"]),n=t,(o=[{key:"handleChangeInput",value:function(e){this.filter=e}},{key:"render",value:function(){var e=this;return r.createElement("div",{id:this.props.id,className:Nl.a.genesList},r.createElement("h4",{className:Nl.a.panelName},this.props.genePanel.genePanelId),r.createElement("span",null,"Number of genes: ",this.props.genePanel.genes.length),r.createElement("div",{className:di()("pull-right has-feedback input-group-sm",Nl.a.searchInput)},r.createElement("input",{type:"text",value:this.filter,onInput:function(t){return e.handleChangeInput(t.target.value)},className:"form-control"}),r.createElement("span",{className:"fa fa-search form-control-feedback","aria-hidden":"true"})),r.createElement(Dl.a,{className:di()("pull-right",Nl.a.copyDownloadControls),downloadData:this.getDownloadData,downloadFilename:"gene_panel_".concat(this.props.genePanel.genePanelId,".tsv"),controlsStyle:"BUTTON",containerId:this.props.id}),r.createElement(Ll.a,{headers:this.renderTableHeaders,rows:this.renderTableRows,noRowsText:"No matches"}))}},{key:"filteredGenes",get:function(){var e=this.props.genePanel.genes;if(this.filter){var t=new RegExp(this.filter,"i");return e.filter(function(e){return t.test(e.entrezGeneId.toString())||t.test(e.hugoGeneSymbol)})}return e}},{key:"renderTableRows",get:function(){var e=this.filteredGenes;if(0===e.length)return[];var t=[];return this.genesDividedToRows(e).forEach(function(e){var n=e.map(function(e){return r.createElement("td",{key:e||Math.random()},e)});t.push(r.createElement("tr",null,n))}),t}},{key:"columnCount",get:function(){return this.props.columns||1}},{key:"renderTableHeaders",get:function(){return[r.createElement("th",null,"Genes")].concat(Array(this.columnCount-1).fill(r.createElement("th",null)))}}])&&Vl(n.prototype,o),i&&Vl(n,i),t}();Wl([P.observable],ql.prototype,"filter",void 0),Wl([H.default,P.action],ql.prototype,"handleChangeInput",null),Wl([P.computed],ql.prototype,"filteredGenes",null),Wl([P.computed],ql.prototype,"renderTableRows",null),Wl([P.computed],ql.prototype,"columnCount",null),Wl([P.computed],ql.prototype,"renderTableHeaders",null);var zl=ql=Wl([en.observer],ql);function Kl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yl(e,t){return!t||"object"!==Ql(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xl(e){return(Xl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zl(e,t){return(Zl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ql(e){return(Ql="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var $l=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Ql(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},Jl=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Yl(this,Xl(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zl(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement(Al.a,{panelName:"Gene Panel",show:this.props.show,onHide:this.props.onHide,className:Nl.a.patientViewModal},r.createElement(zl,{id:"patient-view-gene-panel",genePanel:this.props.genePanel,columns:this.props.columns}))}}])&&Kl(n.prototype,o),a&&Kl(n,a),t}(),eu=Jl=$l([en.observer],Jl),tu=n(829),nu=n(927);function ru(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ou(e,t){return!t||"object"!==lu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function au(e){return(au=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function iu(e,t){return(iu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lu(e){return(lu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var uu=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":lu(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},su=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ou(this,au(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&iu(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement(G.b,{columns:this.columns,data:this.data,showPagination:!1})}},{key:"data",get:function(){var e=Object(v.X)(this.props.sampleManager.getSampleIdsInOrder());return i.a.sortBy(this.props.data,function(t){return e[t.sample.sampleId]})}},{key:"columns",get:function(){var e=this;return[{name:"Sample",sortBy:function(e){return e.sample.sampleId},render:function(t){return e.props.sampleManager.getComponentForSample(t.sample.sampleId)||r.createElement("span",null,t.sample.sampleId)}},{name:"Resources",render:function(t){return r.createElement(r.Fragment,null,i.a.sortBy(t.resources,function(e){return e.resourceDefinition.priority}).map(function(t){return r.createElement(nu.a,{resource:t,isTabOpen:e.props.isTabOpen,openResource:e.props.openResource})}))}}]}}])&&ru(n.prototype,o),a&&ru(n,a),t}();uu([P.computed],su.prototype,"data",null),uu([P.computed],su.prototype,"columns",null);var cu=su=uu([en.observer],su);function pu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fu(e,t){return!t||"object"!==hu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function du(e){return(du=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mu(e,t){return(mu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hu(e){return(hu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var yu=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":hu(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},gu=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=fu(this,du(t).apply(this,arguments))).sampleRows=Object(v.T)({await:function(){return[e.props.store.samples,e.props.store.sampleResourceData]},invoke:function(){var t=e.props.store.sampleResourceData.result,n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e.props.store.samples.result[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var u=i.value,s=t[u.sampleId];s&&s.length&&n.push({sample:u,resources:s})}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return Promise.resolve(n)}}),e.sampleResources=Object(ja.a)({await:function(){return[e.sampleRows]},render:function(){return e.props.sampleManager&&e.sampleRows.result.length>0?r.createElement("div",{className:"resourcesSection"},r.createElement("h4",{className:"blackHeader"},"Sample Resources"),r.createElement(cu,{data:e.sampleRows.result,sampleManager:e.props.sampleManager,isTabOpen:e.props.store.isResourceTabOpen,openResource:e.props.openResource})):null}}),e.patientResources=Object(ja.a)({await:function(){return[e.props.store.patientResourceData]},render:function(){return e.props.store.patientResourceData.result.length>0?r.createElement("div",{className:"resourcesSection"},r.createElement("h4",{className:"blackHeader"},"Patient Resources for ",e.props.store.patientId),i.a.sortBy(e.props.store.patientResourceData.result,function(e){return parseFloat(e.resourceDefinition.priority)}).map(function(t){return r.createElement(nu.a,{resource:t,isTabOpen:e.props.store.isResourceTabOpen,openResource:e.props.openResource})})):null}}),e.studyResources=Object(ja.a)({await:function(){return[e.props.store.studyResourceData,e.props.store.studies]},render:function(){return e.props.store.studyResourceData.result.length>0?r.createElement("div",{className:"resourcesSection"},r.createElement("h4",{className:"blackHeader"},"Study Resources for"," ",e.props.store.studies.result[0].name),i.a.sortBy(e.props.store.studyResourceData.result,function(e){return e.resourceDefinition.priority}).map(function(t){return r.createElement(nu.a,{resource:t,isTabOpen:e.props.store.isResourceTabOpen,openResource:e.props.openResource})})):null}}),e}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mu(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement("div",{className:"resourcesTab"},r.createElement(tu.a,{title:"Files & Links",isLoading:this.sampleResources.isPending||this.patientResources.isPending||this.studyResources.isPending,className:"pull-left"}),r.createElement("br",null),r.createElement("br",null),r.createElement("div",null,this.patientResources.component,this.sampleResources.component,this.studyResources.component))}}])&&pu(n.prototype,o),a&&pu(n,a),t}(),vu=gu=yu([en.observer],gu),bu=n(963);function wu(e){return(wu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Su(e,t){return!t||"object"!==wu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Tu(e){return(Tu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Eu(e,t){return(Eu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ou=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Su(this,Tu(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Eu(e,t)}(t,G["b"]),t}();var Pu=function(e){var t,n,r=e.clinicalEvents,a=(t=r,n=i.a.groupBy(t,function(e){return e.eventType}),i.a.mapValues(n,function(e){return sl(e)}));return o.a.createElement("div",null,i.a.map(a,function(e,t){var n,r=e[0].reduce(function(e,t,n){return["PATIENT_ID"].includes(t)&&e.push(n),e},[]),a=e.map(function(e,t){return e.filter(function(e,t){return!r.includes(t)})});return o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",{className:"pull-left",style:{textTransform:"capitalize"}},t.toLowerCase()),o.a.createElement(Ou,{data:a.slice(1),columns:(n=a,n[0].map(function(e,t){return{name:e,render:function(e){return o.a.createElement("span",null,e[t])},download:function(e){return e[t]},sortBy:function(e){return e[t]},filter:function(e,t,n){return e.toUpperCase().includes(n)}}})),showPagination:!1,showColumnVisibility:!1,showFilter:!0,showCopyDownload:!0}))}))};function _u(e){return(_u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function xu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Iu(e){return(Iu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ku(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mu(e,t){return(Mu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Au(e){return(Au="function"==typeof Symbol&&"symbol"===_u(Symbol.iterator)?function(e){return _u(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_u(e)})(e)}var Du=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Au(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},ju=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function l(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,l)}u((r=r.apply(e,t||[])).next())})},Ru=function(e){function t(e){var n,o,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,i=Iu(t).call(this,e),(n=!i||"object"!==Au(i)&&"function"!=typeof i?ku(o):i).genePanelModal={genePanelId:"",isOpen:!1},n.wholeSlideViewerUrl=Object(v.T)({await:function(){return[n.patientViewPageStore.getWholeSlideViewerIds]},invoke:function(){return ju(ku(n),void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.isEmpty(this.patientViewPageStore.getWholeSlideViewerIds.result)){e.next=11;break}return t=Object(gt.C)(this.patientViewPageStore.getWholeSlideViewerIds.result,this.props.appStore.userName),e.prev=2,e.next=5,ht.a.get(t);case 5:return e.abrupt("return",t);case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",void 0);case 11:return e.abrupt("return",void 0);case 12:case"end":return e.stop()}},e,this,[[2,8]])}))}}),n.resourceTabs=Object(ja.a)({await:function(){return[n.patientViewPageStore.resourceDefinitions,n.patientViewPageStore.resourceIdToResourceData]},render:function(){var e=n.patientViewPageStore.resourceDefinitions.result.filter(function(e){return n.patientViewPageStore.isResourceTabOpen(e.resourceId)}),t=a.sortBy(e,function(e){return e.priority}),o=n.patientViewPageStore.resourceIdToResourceData.result;return t.reduce(function(e,t){var a=o[t.resourceId];return a&&a.length>0&&e.push(r.createElement(Po.a,{key:Object(Pa.d)(t.resourceId),id:Object(Pa.d)(t.resourceId),linkText:t.displayName,onClickClose:n.closeResourceTab},r.createElement(bu.a,{resourceData:o[t.resourceId],urlWrapper:n.urlWrapper}))),e},[])}}),n.urlWrapper=new Aa(e.routing),n.patientViewPageStore=new Rn(n.props.appStore),n.dataStore=new qo(function(){return n.mergedMutations},n.urlWrapper),Object(v.C)().patientViewPageStore=n.patientViewPageStore;var l=n.urlWrapper.activeTabId&&Object(Pa.c)(n.urlWrapper.activeTabId);return l&&n.patientViewPageStore.setResourceTabOpen(l,!0),Object(P.reaction)(function(){return[n.urlWrapper.query.caseId,n.urlWrapper.query.studyId]},function(e){var t=Cu(e,2),r=(t[0],t[1]);r&&n.props.routing.location.pathname.includes("/"+Oa.a.Patient)&&Object(Ta.g)(r)},{fireImmediately:!0}),Object(P.reaction)(function(){return[e.routing.location.query,e.routing.location.hash,e.routing.location.pathname]},function(e){var t=Cu(e,3),r=t[0],o=t[1];if(t[2].includes("/"+Oa.a.Patient)){var a=Co(r);if(a.isValid){n.patientViewPageStore.urlValidationError=null,"studyId"in r&&(n.patientViewPageStore.studyId=r.studyId),"caseId"in r?n.patientViewPageStore.setPatientId(r.caseId):"sampleId"in r&&n.patientViewPageStore.setSampleId(r.sampleId);var i=o.match(/navCaseIds=([^&]*)/);i&&i.length>1&&(n.patientViewPageStore.patientIdsInCohort=function(e){var t=this;return e.split(",").map(function(e){return e.includes(":")?e:t.studyId+":"+e})}(i[1]))}else n.patientViewPageStore.urlValidationError=a.message}},{fireImmediately:!0}),n.onMutationTableColumnVisibilityToggled=n.onMutationTableColumnVisibilityToggled.bind(ku(n)),n.onCnaTableColumnVisibilityToggled=n.onCnaTableColumnVisibilityToggled.bind(ku(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mu(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){var e,t=Object(v.C)().clientPostedData;t&&t.navCaseIds&&(this.patientViewPageStore.patientIdsInCohort=(e=t.navCaseIds,a.map(e,function(e){return e.studyId+":"+e.patientId})),Object(v.C)().clientPostedData=null)}},{key:"handleSampleClick",value:function(e,t){t.shiftKey||t.altKey||t.metaKey||(t.preventDefault(),this.urlWrapper.updateURL({caseId:void 0,sampleId:e}))}},{key:"handlePatientClick",value:function(e){var t=e.split(":");2==t.length?this.urlWrapper.updateURL({studyId:t[0],caseId:t[1],sampleId:void 0}):this.urlWrapper.updateURL({caseId:e,sampleId:void 0})}},{key:"onCnaTableColumnVisibilityToggled",value:function(e,t){this.cnaTableColumnVisibility=Object(v.bb)(this.cnaTableColumnVisibility,e,t)}},{key:"onMutationTableColumnVisibilityToggled",value:function(e,t){this.mutationTableColumnVisibility=Object(v.bb)(this.mutationTableColumnVisibility,e,t)}},{key:"customTabMountCallback",value:function(e,t){Object(Xo.a)(e,t,this.props.routing.location,this.patientViewPageStore)}},{key:"onFilterGenesMutationTable",value:function(e){this.patientViewPageStore.mutationTableGeneFilterOption=e}},{key:"onFilterGenesCopyNumberTable",value:function(e){this.patientViewPageStore.copyNumberTableGeneFilterOption=e}},{key:"mutationTableShowGeneFilterMenu",value:function(e){var t=a.uniq(a.map(this.patientViewPageStore.mergedMutationDataIncludingUncalled,function(e){return e[0].entrezGeneId}));return e.length>1&&Tn(e,t,this.patientViewPageStore.sampleToMutationGenePanelId.result,this.patientViewPageStore.genePanelIdToEntrezGeneIds.result)}},{key:"cnaTableShowGeneFilterMenu",value:function(e){var t=a.uniq(a.map(this.patientViewPageStore.mergedDiscreteCNAData,function(e){return e[0].entrezGeneId}));return e.length>1&&Tn(e,t,this.patientViewPageStore.sampleToDiscreteGenePanelId.result,this.patientViewPageStore.genePanelIdToEntrezGeneIds.result)}},{key:"toggleGenePanelModal",value:function(e){this.genePanelModal={isOpen:!this.genePanelModal.isOpen,genePanelId:e||""}}},{key:"onMutationTableRowClick",value:function(e){e.length&&this.dataStore.toggleSelectedMutation(e[0])}},{key:"onMutationTableRowMouseEnter",value:function(e){e.length&&this.dataStore.setMouseOverMutation(e[0])}},{key:"onMutationTableRowMouseLeave",value:function(){this.dataStore.setMouseOverMutation(null)}},{key:"openResource",value:function(e){this.patientViewPageStore.setResourceTabOpen(e.resourceId,!0),this.urlWrapper.setActiveTab(Object(Pa.d)(e.resourceId)),this.urlWrapper.setResourceUrl(e.url)}},{key:"closeResourceTab",value:function(e){var t=Object(Pa.c)(e);t&&(this.patientViewPageStore.setResourceTabOpen(t,!1),this.urlWrapper.activeTabId===Object(Pa.d)(t)&&this.urlWrapper.setActiveTab(Pa.a.FilesAndLinks))}},{key:"render",value:function(){var e=this,t=this.sampleManager,n=null,o=null,i=null;if(this.patientViewPageStore.urlValidationError)return r.createElement(jo,{urlValidationError:this.patientViewPageStore.urlValidationError});if(this.patientViewPageStore.studyMetaData.isComplete){var u=this.patientViewPageStore.studyMetaData.result;i=r.createElement(Zo.a,{studyId:u.studyId},u.name)}if(this.patientViewPageStore.patientViewData.isComplete&&this.patientViewPageStore.studyMetaData.isComplete&&this.patientViewPageStore.clinicalEvents.isComplete&&null!==t&&(n=a.map(t.samples,function(n){if(t.isSampleVisibleInHeader(n.id)){var o=t&&t.clinicalDataLegacyCleanAndDerived&&t.clinicalDataLegacyCleanAndDerived[n.id]&&"Xenograft"===t.clinicalDataLegacyCleanAndDerived[n.id].DERIVED_NORMALIZED_CASE_TYPE;return r.createElement("div",{className:"patientSample"},r.createElement("span",{className:"clinical-spans"},t.getComponentForSample(n.id,1,"",r.createElement("span",{style:{display:"inline-flex"}}," ",o&&r.createElement("svg",{id:"Layer_2",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"15px",height:"15px",viewBox:"7.015 20 388.209 342.605","enable-background":"new 7.015 47.906 388.209 342.605"},r.createElement("path",{fill:"none",stroke:"#000000",strokeWidth:"20",strokeLinejoin:"bevel",strokeMiterlimit:"10",d:"M377.5,250.5 c-2.896,138.241-177.896,163.241-280.896,89.241"}),r.createElement("g",null,r.createElement("g",null,r.createElement("path",{fill:"#0C0202",stroke:"#000000",strokeMiterlimit:"10",d:"M10.5,251.5h377c0,0,66-275-201-185 C186.5,66.5-19.5,159.5,10.5,251.5z"})),r.createElement("path",{fill:"#0C0202",stroke:"#000000",strokeLinejoin:"bevel",strokeMiterlimit:"10",d:"M50.5,159.5 C-65.396,141.741,82.604,2.741,88.604,128.741"})),r.createElement("circle",{fill:"#FFFFFF",stroke:"#000000",strokeMiterlimit:"10",cx:"50.854",cy:"210.991",r:"21.25"})),o&&" ",r.createElement("a",{href:Object(gt.y)(e.patientViewPageStore.studyMetaData.result.studyId,n.id),target:"_blank",onClick:function(t){return e.handleSampleClick(n.id,t)}},Re.getClinicalAttributeInSample(n,"DISPLAY_SAMPLE_NAME")?"".concat(Re.getClinicalAttributeInSample(n,"DISPLAY_SAMPLE_NAME").value," (").concat(n.id,")"):n.id),t&&t.clinicalDataLegacyCleanAndDerived[n.id]&&he(t.clinicalDataLegacyCleanAndDerived[n.id])),e.toggleGenePanelModal,e.genePanelModal.isOpen)),!0===e.patientViewPageStore.hasMutationalSignatureData.result&&r.createElement(xo.a,{isLoading:e.patientViewPageStore.mutationalSignatureData.isPending&&e.patientViewPageStore.mutationalSignatureMetaData.isPending}),!0===e.patientViewPageStore.hasMutationalSignatureData.result&&e.patientViewPageStore.clinicalDataGroupedBySample.isComplete&&e.patientViewPageStore.mutationalSignatureData.isComplete&&e.patientViewPageStore.mutationalSignatureMetaData.isComplete&&r.createElement(Qe,{data:e.patientViewPageStore.mutationalSignatureData.result,metadata:e.patientViewPageStore.mutationalSignatureMetaData.result,uniqueSampleKey:n.id}))}}))&&n.length>0&&"sample"===this.patientViewPageStore.pageMode&&this.patientViewPageStore.patientId&&this.patientViewPageStore.allSamplesForPatient&&this.patientViewPageStore.allSamplesForPatient.result.length>1&&n.push(r.createElement("button",{className:"btn btn-default btn-xs",onClick:function(){return e.handlePatientClick(e.patientViewPageStore.patientId)}},"Show all"," ",this.patientViewPageStore.allSamplesForPatient.result.length," ","samples")),this.patientViewPageStore.patientIdsInCohort&&this.patientViewPageStore.patientIdsInCohort.length>0){var s=this.patientViewPageStore.patientIdsInCohort.indexOf(this.patientViewPageStore.studyId+":"+this.patientViewPageStore.patientId);o=r.createElement(U.a,{currentPage:s+1,showMoreButton:!1,showItemsPerPageSelector:!1,showFirstPage:!0,showLastPage:!0,textBetweenButtons:" of ".concat(this.patientViewPageStore.patientIdsInCohort.length," patients"),firstPageDisabled:0===s,previousPageDisabled:0===s,nextPageDisabled:s===this.patientViewPageStore.patientIdsInCohort.length-1,lastPageDisabled:s===this.patientViewPageStore.patientIdsInCohort.length-1,onFirstPageClick:function(){return e.handlePatientClick(e.patientViewPageStore.patientIdsInCohort[0])},onPreviousPageClick:function(){return e.handlePatientClick(e.patientViewPageStore.patientIdsInCohort[s-1])},onNextPageClick:function(){return e.handlePatientClick(e.patientViewPageStore.patientIdsInCohort[s+1])},onLastPageClick:function(){return e.handlePatientClick(e.patientViewPageStore.patientIdsInCohort[e.patientViewPageStore.patientIdsInCohort.length-1])},onChangeCurrentPage:function(t){t>0&&t<=e.patientViewPageStore.patientIdsInCohort.length&&e.handlePatientClick(e.patientViewPageStore.patientIdsInCohort[t-1])},pageNumberEditable:!0,className:"cohortNav"})}return r.createElement(zo.a,{noMargin:!0,hideFooter:!0},this.patientViewPageStore.patientViewData.isComplete&&r.createElement(Yo.a,null,r.createElement("title",null,this.patientViewPageStore.pageTitle),r.createElement("meta",{name:"description",content:this.patientViewPageStore.metaDescription})),r.createElement("div",{className:"patientViewPage"},this.genePanelModal.isOpen&&r.createElement(eu,{genePanel:this.modalSelectedGenePanel,show:this.genePanelModal.isOpen,onHide:this.toggleGenePanelModal,columns:3}),r.createElement("div",{className:"headBlock"},this.patientViewPageStore.patientViewData.isComplete&&r.createElement("div",{className:"patientPageHeader"},r.createElement("i",{className:"fa fa-user-circle-o patientIcon","aria-hidden":"true"}),r.createElement("div",{className:"patientDataTable"},r.createElement("table",null,r.createElement("tr",null,r.createElement("td",null,"Patient:"),r.createElement("td",null,r.createElement(Ue,{handlePatientClick:function(t){return e.handlePatientClick(t)},patient:this.patientViewPageStore.patientViewData.result.patient,studyId:this.patientViewPageStore.studyId,darwinUrl:this.patientViewPageStore.darwinUrl.result,sampleManager:t}))),r.createElement("tr",null,r.createElement("td",null,"Samples:"),r.createElement("td",null,r.createElement("div",{className:"patientSamples"},n))))),r.createElement("div",{className:"studyMetaBar"},i," ",r.createElement(l.If,{condition:null!=o},o)))),r.createElement(l.If,{condition:this.patientViewPageStore.patientViewData.isComplete},r.createElement(l.Then,null,r.createElement(Po.b,{id:"patientViewPageTabs",activeTabId:this.urlWrapper.activeTabId,onTabClick:function(t){return e.urlWrapper.setActiveTab(t)},className:"mainTabs",getPaginationWidth:Qo.a.getWindowWidth},r.createElement(Po.a,{key:0,id:Pa.a.Summary,linkText:"Summary"},r.createElement(xo.a,{isLoading:this.patientViewPageStore.clinicalEvents.isPending}),!!t&&this.patientViewPageStore.clinicalEvents.isComplete&&this.patientViewPageStore.clinicalEvents.result.length>0&&r.createElement("div",null,r.createElement("div",{style:{marginTop:20,marginBottom:20}}," ",this.showNewTimeline&&r.createElement(Sl,{dataStore:this.dataStore,caseMetaData:{color:t.sampleColors,label:t.sampleLabels,index:t.sampleIndex},data:this.patientViewPageStore.clinicalEvents.result,sampleManager:t,width:Qo.a.size.width,samples:this.patientViewPageStore.samples.result,mutationProfileId:this.patientViewPageStore.mutationMolecularProfileId.result})),this.showOldTimeline&&r.createElement("div",{style:{marginTop:20}},r.createElement(Yr,{store:this.patientViewPageStore,width:Qo.a.size.width-60,sampleManager:t})),r.createElement("hr",null)),r.createElement(xo.a,{isLoading:this.patientViewPageStore.mutationData.isPending||this.patientViewPageStore.cnaSegments.isPending}),this.patientViewPageStore.mutationData.isComplete&&this.patientViewPageStore.cnaSegments.isComplete&&this.patientViewPageStore.sequencedSampleIdsInStudy.isComplete&&this.patientViewPageStore.sampleToMutationGenePanelId.isComplete&&this.patientViewPageStore.sampleToDiscreteGenePanelId.isComplete&&(this.patientViewPageStore.mergedMutationDataFilteredByGene.length>0||this.patientViewPageStore.cnaSegments.result.length>0)&&t&&r.createElement("div",null,r.createElement(L,{mergedMutations:this.patientViewPageStore.mergedMutationDataFilteredByGene,samples:this.patientViewPageStore.samples.result,cnaSegments:this.patientViewPageStore.cnaSegments.result,sampleOrder:t.sampleIndex,sampleLabels:t.sampleLabels,sampleColors:t.sampleColors,sampleManager:t,containerWidth:Qo.a.size.width-20,sampleIdToMutationGenePanelId:this.patientViewPageStore.sampleToMutationGenePanelId.result,sampleIdToCopyNumberGenePanelId:this.patientViewPageStore.sampleToDiscreteGenePanelId.result,onSelectGenePanel:this.toggleGenePanelModal,disableTooltip:this.genePanelModal.isOpen}),r.createElement("hr",null)),r.createElement(xo.a,{isLoading:this.patientViewPageStore.mutationData.isPending||this.patientViewPageStore.uncalledMutationData.isPending||this.patientViewPageStore.oncoKbAnnotatedGenes.isPending||this.patientViewPageStore.studyIdToStudy.isPending}),this.patientViewPageStore.oncoKbAnnotatedGenes.isComplete&&this.patientViewPageStore.mutationData.isComplete&&this.patientViewPageStore.uncalledMutationData.isComplete&&this.patientViewPageStore.studyIdToStudy.isComplete&&this.patientViewPageStore.sampleToMutationGenePanelId.isComplete&&this.patientViewPageStore.genePanelIdToEntrezGeneIds.isComplete&&!!t&&r.createElement("div",{"data-test":"patientview-mutation-table"},r.createElement(ho,{studyIdToStudy:this.patientViewPageStore.studyIdToStudy.result,sampleManager:t,sampleToGenePanelId:this.patientViewPageStore.sampleToMutationGenePanelId.result,genePanelIdToEntrezGeneIds:this.patientViewPageStore.genePanelIdToEntrezGeneIds.result,sampleIds:t?t.getSampleIdsInOrder():[],uniqueSampleKeyToTumorType:this.patientViewPageStore.uniqueSampleKeyToTumorType,molecularProfileIdToMolecularProfile:this.patientViewPageStore.molecularProfileIdToMolecularProfile.result,variantCountCache:this.patientViewPageStore.variantCountCache,indexedVariantAnnotations:this.patientViewPageStore.indexedVariantAnnotations,indexedMyVariantInfoAnnotations:this.patientViewPageStore.indexedMyVariantInfoAnnotations,discreteCNACache:this.patientViewPageStore.discreteCNACache,mrnaExprRankCache:this.patientViewPageStore.mrnaExprRankCache,pubMedCache:this.patientViewPageStore.pubMedCache,genomeNexusCache:this.patientViewPageStore.genomeNexusCache,genomeNexusMutationAssessorCache:this.patientViewPageStore.genomeNexusMutationAssessorCache,mrnaExprRankMolecularProfileId:this.patientViewPageStore.mrnaRankMolecularProfileId.result||void 0,discreteCNAMolecularProfileId:this.patientViewPageStore.molecularProfileIdDiscrete.result,data:this.patientViewPageStore.mergedMutationDataIncludingUncalledFilteredByGene,downloadDataFetcher:this.patientViewPageStore.downloadDataFetcher,mutSigData:this.patientViewPageStore.mutSigData.result,myCancerGenomeData:this.patientViewPageStore.myCancerGenomeData,hotspotData:this.patientViewPageStore.indexedHotspotData,cosmicData:this.patientViewPageStore.cosmicData.result,oncoKbData:this.patientViewPageStore.oncoKbData,oncoKbCancerGenes:this.patientViewPageStore.oncoKbCancerGenes,usingPublicOncoKbInstance:this.patientViewPageStore.usingPublicOncoKbInstance,civicGenes:this.patientViewPageStore.civicGenes,civicVariants:this.patientViewPageStore.civicVariants,userEmailAddress:Vt.a.getUserEmailAddress(),enableOncoKb:Vt.b.serverConfig.show_oncokb,enableFunctionalImpact:Vt.b.serverConfig.show_genomenexus,enableHotspot:Vt.b.serverConfig.show_hotspot,enableMyCancerGenome:Vt.b.serverConfig.mycancergenome_show,enableCivic:Vt.b.serverConfig.show_civic,columnVisibility:this.mutationTableColumnVisibility,showGeneFilterMenu:this.patientViewPageStore.mutationTableShowGeneFilterMenu.result,currentGeneFilter:this.patientViewPageStore.mutationTableGeneFilterOption,onFilterGenes:this.onFilterGenesMutationTable,columnVisibilityProps:{onColumnToggled:this.onMutationTableColumnVisibilityToggled},onSelectGenePanel:this.toggleGenePanelModal,disableTooltip:this.genePanelModal.isOpen,generateGenomeNexusHgvsgUrl:this.patientViewPageStore.generateGenomeNexusHgvsgUrl,onRowClick:this.onMutationTableRowClick,onRowMouseEnter:this.onMutationTableRowMouseEnter,onRowMouseLeave:this.onMutationTableRowMouseLeave,sampleIdToClinicalDataMap:this.patientViewPageStore.clinicalDataGroupedBySampleMap,existsSomeMutationWithAscnProperty:this.patientViewPageStore.existsSomeMutationWithAscnProperty})),r.createElement("hr",null),r.createElement(xo.a,{isLoading:"loading"===this.cnaTableStatus||this.patientViewPageStore.studyIdToStudy.isPending}),this.patientViewPageStore.studyIdToStudy.isComplete&&this.patientViewPageStore.genePanelIdToEntrezGeneIds.isComplete&&this.patientViewPageStore.referenceGenes.isComplete&&r.createElement("div",{"data-test":"patientview-copynumber-table"},r.createElement(Lr,{uniqueSampleKeyToTumorType:this.patientViewPageStore.uniqueSampleKeyToTumorType,studyIdToStudy:this.patientViewPageStore.studyIdToStudy.result,sampleIds:t?t.getSampleIdsInOrder():[],sampleManager:t,sampleToGenePanelId:this.patientViewPageStore.sampleToDiscreteGenePanelId.result,genePanelIdToEntrezGeneIds:this.patientViewPageStore.genePanelIdToEntrezGeneIds.result,cnaOncoKbData:this.patientViewPageStore.cnaOncoKbData,cnaCivicGenes:this.patientViewPageStore.cnaCivicGenes,cnaCivicVariants:this.patientViewPageStore.cnaCivicVariants,oncoKbCancerGenes:this.patientViewPageStore.oncoKbCancerGenes,usingPublicOncoKbInstance:this.patientViewPageStore.usingPublicOncoKbInstance,enableOncoKb:Vt.b.serverConfig.show_oncokb,enableCivic:Vt.b.serverConfig.show_civic,userEmailAddress:Vt.b.serverConfig.user_email_address,pubMedCache:this.patientViewPageStore.pubMedCache,referenceGenes:this.patientViewPageStore.referenceGenes.result,data:this.patientViewPageStore.mergedDiscreteCNADataFilteredByGene,copyNumberCountCache:this.patientViewPageStore.copyNumberCountCache,mrnaExprRankCache:this.patientViewPageStore.mrnaExprRankCache,gisticData:this.patientViewPageStore.gisticData.result,mrnaExprRankMolecularProfileId:this.patientViewPageStore.mrnaRankMolecularProfileId.result||void 0,status:this.cnaTableStatus,columnVisibility:this.cnaTableColumnVisibility,showGeneFilterMenu:this.patientViewPageStore.cnaTableShowGeneFilterMenu.result,currentGeneFilter:this.patientViewPageStore.copyNumberTableGeneFilterOption,onFilterGenes:this.onFilterGenesCopyNumberTable,columnVisibilityProps:{onColumnToggled:this.onCnaTableColumnVisibilityToggled},onSelectGenePanel:this.toggleGenePanelModal,disableTooltip:this.genePanelModal.isOpen}))),!!t&&this.patientViewPageStore.sampleIds.length>1&&this.patientViewPageStore.existsSomeMutationWithVAFData&&r.createElement(Po.a,{key:1,id:"genomicEvolution",linkText:"Genomic Evolution"},r.createElement(Ml,{patientViewPageStore:this.patientViewPageStore,mutationTableColumnVisibility:this.mutationTableColumnVisibility,onMutationTableColumnVisibilityToggled:this.onMutationTableColumnVisibilityToggled,sampleManager:t,urlWrapper:this.urlWrapper})),r.createElement(Po.a,{key:2,id:Pa.a.ClinicalData,linkText:"Clinical Data",className:"patient-clinical-data-tab"},r.createElement("div",{className:"clearfix"},r.createElement("h3",{className:"pull-left"},"Patient"),this.patientViewPageStore.clinicalDataPatient.isComplete&&r.createElement(J,{showTitleBar:!0,data:this.patientViewPageStore.clinicalDataPatient.result})),r.createElement("div",{className:"clearfix"},r.createElement("h3",{className:"pull-left"},"Samples"),this.patientViewPageStore.clinicalDataGroupedBySample.isComplete&&r.createElement(Kn,{samples:this.patientViewPageStore.clinicalDataGroupedBySample.result})),r.createElement("h2",{className:"divider"},"Timeline Data"),this.patientViewPageStore.clinicalEvents.isComplete&&r.createElement(Pu,{clinicalEvents:this.patientViewPageStore.clinicalEvents.result})),r.createElement(Po.a,{key:4,id:Pa.a.FilesAndLinks,linkText:"Files & Links",hide:!this.shouldShowResources},r.createElement("div",null,r.createElement(vu,{store:this.patientViewPageStore,sampleManager:this.sampleManager,openResource:this.openResource}))),r.createElement(Po.a,{key:3,id:Pa.a.PathologyReport,linkText:"Pathology Report",hide:!this.shouldShowPathologyReport},r.createElement("div",null,r.createElement(Oo,{iframeHeight:Qo.a.size.height-220,pdfs:this.patientViewPageStore.pathologyReport.result}))),r.createElement(Po.a,{key:5,id:Pa.a.TissueImage,linkText:"Tissue Image",hide:this.hideTissueImageTab},r.createElement("div",null,r.createElement(yo.a,{height:Qo.a.size.height-220,url:Object(gt.j)(this.patientViewPageStore.patientId)}))),this.showWholeSlideViewerTab&&this.wholeSlideViewerUrl.result&&r.createElement(Po.a,{key:6,id:Pa.a.MSKTissueImage,linkText:"Tissue Image",unmountOnHide:!1},r.createElement("div",null,r.createElement(yo.a,{height:Qo.a.size.height-220,url:this.wholeSlideViewerUrl.result}))),this.shouldShowTrialMatch&&r.createElement(Po.a,{key:7,id:Pa.a.TrialMatchTab,linkText:"Matched Trials"},r.createElement(Sa,{sampleManager:t,detailedTrialMatches:this.patientViewPageStore.detailedTrialMatches.result,containerWidth:Qo.a.size.width-20})),this.resourceTabs.component,Vt.b.serverConfig.custom_tabs&&Vt.b.serverConfig.custom_tabs.filter(function(e){return"PATIENT_PAGE"===e.location}).map(function(t,n){return r.createElement(Po.a,{key:100+n,id:"customTab1",unmountOnHide:!0===t.unmountOnHide,onTabDidMount:function(n){e.customTabMountCallback(n,t)},linkText:t.title})}))),r.createElement(l.Else,null,r.createElement(xo.a,{isLoading:!0,center:!0,size:"big"})))))}},{key:"mergedMutations",get:function(){return this.patientViewPageStore.mergedMutationDataIncludingUncalledFilteredByGene.filter(function(e){return!Object(pn.n)(e[0])})}},{key:"showNewTimeline",get:function(){return!Vt.b.serverConfig.patient_view_use_legacy_timeline}},{key:"showOldTimeline",get:function(){return Vt.b.serverConfig.patient_view_use_legacy_timeline}},{key:"cnaTableStatus",get:function(){return this.patientViewPageStore.molecularProfileIdDiscrete.isComplete?void 0===this.patientViewPageStore.molecularProfileIdDiscrete.result?"unavailable":this.patientViewPageStore.discreteCNAData.isComplete?"available":"loading":"loading"}},{key:"showWholeSlideViewerTab",get:function(){return this.patientViewPageStore.clinicalDataForSamples.isComplete&&a.some(this.patientViewPageStore.clinicalDataForSamples.result,function(e){return"MSK_SLIDE_ID"===e.clinicalAttributeId})}},{key:"shouldShowResources",get:function(){return!!this.patientViewPageStore.resourceIdToResourceData.isComplete&&a.some(this.patientViewPageStore.resourceIdToResourceData.result,function(e){return e.length>0})}},{key:"shouldShowPathologyReport",get:function(){return this.patientViewPageStore.pathologyReport.isComplete&&this.patientViewPageStore.pathologyReport.result.length>0}},{key:"hideTissueImageTab",get:function(){return this.patientViewPageStore.hasTissueImageIFrameUrl.isPending||this.patientViewPageStore.hasTissueImageIFrameUrl.isError||this.patientViewPageStore.hasTissueImageIFrameUrl.isComplete&&!this.patientViewPageStore.hasTissueImageIFrameUrl.result}},{key:"shouldShowTrialMatch",get:function(){return"true"===Object(v.C)().localStorage.trialmatch&&this.patientViewPageStore.detailedTrialMatches.isComplete&&this.patientViewPageStore.detailedTrialMatches.result.length>0}},{key:"modalSelectedGenePanel",get:function(){return this.patientViewPageStore.genePanelIdToPanel.result[this.genePanelModal.genePanelId]}},{key:"sampleManager",get:function(){if(this.patientViewPageStore.patientViewDataForAllSamplesForPatient.isComplete&&this.patientViewPageStore.studyMetaData.isComplete){var e=this.patientViewPageStore.patientViewDataForAllSamplesForPatient.result;return this.patientViewPageStore.clinicalEvents.isComplete&&this.patientViewPageStore.clinicalEvents.result.length>0?new Re(e.samples,this.patientViewPageStore.clinicalEvents.result,this.patientViewPageStore.sampleIds):new Re(e.samples,void 0,this.patientViewPageStore.sampleIds)}return null}}])&&xu(n.prototype,o),i&&xu(n,i),t}();Du([P.observable],Ru.prototype,"mutationTableColumnVisibility",void 0),Du([P.observable],Ru.prototype,"cnaTableColumnVisibility",void 0),Du([P.observable],Ru.prototype,"genePanelModal",void 0),Du([P.observable],Ru.prototype,"urlWrapper",void 0),Du([P.computed],Ru.prototype,"mergedMutations",null),Du([P.computed],Ru.prototype,"cnaTableStatus",null),Du([P.computed],Ru.prototype,"showWholeSlideViewerTab",null),Du([P.action],Ru.prototype,"onCnaTableColumnVisibilityToggled",null),Du([P.action],Ru.prototype,"onMutationTableColumnVisibilityToggled",null),Du([P.computed],Ru.prototype,"shouldShowResources",null),Du([P.computed],Ru.prototype,"shouldShowPathologyReport",null),Du([P.computed],Ru.prototype,"hideTissueImageTab",null),Du([P.computed],Ru.prototype,"shouldShowTrialMatch",null),Du([H.default],Ru.prototype,"customTabMountCallback",null),Du([H.default],Ru.prototype,"onFilterGenesMutationTable",null),Du([H.default],Ru.prototype,"onFilterGenesCopyNumberTable",null),Du([H.default,P.action],Ru.prototype,"toggleGenePanelModal",null),Du([P.computed],Ru.prototype,"modalSelectedGenePanel",null),Du([P.computed],Ru.prototype,"sampleManager",null),Du([H.default],Ru.prototype,"onMutationTableRowClick",null),Du([H.default],Ru.prototype,"onMutationTableRowMouseEnter",null),Du([H.default],Ru.prototype,"onMutationTableRowMouseLeave",null),Du([H.default,P.action],Ru.prototype,"openResource",null),Du([H.default,P.action],Ru.prototype,"closeResourceTab",null),Ru=Du([Object(en.inject)("routing","appStore"),en.observer],Ru);t.default=Ru},799:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__1kueS",framedImage:"styles-module__framedImage__1ndwn",SurvivalTable:"styles-module__SurvivalTable__2NKCT",Tooltip:"styles-module__Tooltip__1I-Ty",NotAvailable:"styles-module__NotAvailable__1Zx5R",XmaxNumberInput:"styles-module__XmaxNumberInput__SQsf6"}},805:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),o=n(19);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,u(t).apply(this,arguments))}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){return r.createElement(o.b,{to:"/study?id=".concat(this.props.studyId),className:this.props.className},this.props.children)}}])&&i(n.prototype,a),c&&i(n,c),t}()},829:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(0),o=n(20),a=n(66);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p={marginTop:0},f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,s(t).apply(this,arguments))}var n,i,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r["Component"]),n=t,(i=[{key:"render",value:function(){return r.createElement(o.If,{condition:this.props.isHidden},r.createElement(o.Else,null,r.createElement("h2",{style:this.props.style||p,className:this.props.className||""},this.props.title,r.createElement(a.a,{isLoading:this.props.isLoading,small:!0}))))}}])&&l(n.prototype,i),f&&l(n,f),t}()},870:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return a});var r=/.+\.(.+)/;function o(e){var t=new URL(e).pathname;if(t){var n=t.match(r);if(n)return n[1].toLowerCase()}}function a(e){return"https://docs.google.com/viewerng/viewer?url=".concat(e,"?pid=explorer&efh=false&a=v&chrome=false&embedded=true")}},923:function(e,t,n){"use strict";var r=n(0),o=n(66),a=n(9),i=n(2),l=n(6);function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":f(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},m=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=s(this,c(t).apply(this,arguments))).iframeLoaded=!1,e}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,r["Component"]),n=t,(a=[{key:"onLoad",value:function(){this.iframeLoaded=!0}},{key:"render",value:function(){return r.createElement("div",{style:{position:"relative"}},r.createElement(o.a,{center:!0,size:"big",isLoading:!this.iframeLoaded}),r.createElement("iframe",{id:this.props.iframeId||"",className:this.props.className||"",style:{width:"100%",position:"relative",zIndex:100,height:this.props.height,border:"none"},src:this.props.url,onLoad:this.onLoad}))}}])&&u(n.prototype,a),i&&u(n,i),t}();d([i.observable],m.prototype,"iframeLoaded",void 0),d([l.default],m.prototype,"onLoad",null),m=d([a.observer],m),t.a=m},924:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return l});var r=n(958),o=n.n(r),a=n(3),i=n(2);function l(t,n,r,l){var u=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n.dependencyPromise=n.dependencyPromise||function(t){if(t.pathsToCSS&&t.pathsToCSS.forEach(function(t){e("head").append('<link rel="stylesheet" href='.concat(t,' type="text/css" />'))}),t.pathsToJs){var n=[];return t.pathsToJs.forEach(function(e){var t=new Promise(function(t,n){o()(e,function(e){e?n(e):t()})});n.push(t)}),Promise.all(n)}}(n);n.dependencyPromise.then(function(){!function(e){Object(a.C)()[e.mountCallbackName]?Object(a.C)()[e.mountCallbackName](t,e,r,l,i.autorun,u):alert("Callback for tab ".concat(e.title," not found"))}(n)})}}).call(this,n(17))},927:function(e,t,n){"use strict";var r=n(0),o=n(9),a=n(2),i=n(870),l=n(6);function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":f(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,c(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,r["Component"]),n=t,(o=[{key:"openResource",value:function(){this.props.openResource(this.props.resource)}},{key:"render",value:function(){return r.createElement("div",null,r.createElement("a",{onClick:this.openResource},this.icon,this.props.resource.resourceDefinition.displayName||this.props.resource.url),r.createElement("a",{href:this.props.resource.url,style:{marginLeft:16,fontSize:10},target:"_blank"},r.createElement("i",{className:"fa fa-external-link fa-sm",style:{marginRight:5,color:"black"}}),"Open in new window"))}},{key:"icon",get:function(){var e="";switch(Object(i.b)(this.props.resource.url)){case"pdf":e="fa fa-file-pdf-o";break;case"png":case"jpeg":case"jpg":case"gif":e="fa fa-file-image-o";break;case"m4a":case"flac":case"mp3":case"mp4":case"wav":e="fa fa-file-audio-o"}return e?r.createElement("i",{className:"".concat(e," fa-sm"),style:{marginRight:5,color:"black"}}):null}}])&&u(n.prototype,o),a&&u(n,a),t}();d([a.computed],m.prototype,"icon",null),d([l.default],m.prototype,"openResource",null),m=d([o.observer],m),t.a=m},949:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(0),o=n(826),a=n(20);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,s(t).apply(this,arguments))}var n,i,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r["Component"]),n=t,(i=[{key:"render",value:function(){var e=this;return r.createElement("span",{style:{cursor:"default"}},r.createElement(o.a,{text:"G",tooltip:function(){return e.getToolTip(e.props.qValue,e.props.peakGeneCount)}}))}},{key:"getToolTip",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r.createElement("div",null,"Candidate driver gene, as determined by the ",r.createElement("b",null,"GISTIC"),r.createElement("br",null),"algorithm.",r.createElement("p",null),"The GISTIC algorithm identifies likely driver copy number",r.createElement("br",null),"alterations by evaluating the frequency and amplitude of",r.createElement("br",null),"observed CNA events within the entire study.",r.createElement("p",null),r.createElement("span",null," Q-value: ",(e||0).toExponential(3)),r.createElement(a.If,{condition:t>0},r.createElement(a.Then,null,r.createElement("br",null),r.createElement("span",null," ","Number of genes in the peak: ",t))))}}])&&l(n.prototype,i),p&&l(n,p),t}()},962:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return T}),n.d(t,"b",function(){return It}),n.d(t,"c",function(){return K}),n.d(t,"d",function(){return y}),n.d(t,"e",function(){return kt}),n.d(t,"f",function(){return A}),n.d(t,"g",function(){return _}),n.d(t,"h",function(){return G}),n.d(t,"i",function(){return V});var r=n(2),o=n(1),a=n.n(o),i=n(6),l=n(0),u=n.n(l),s=n(9),c=n(1100),p=n(23),f=n.n(p),d=n(15),m=n(3);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var y,g,v=function(){return(v=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function b(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":h(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i}function w(e,t){return{start:Math.min(e,t),end:Math.max(e,t)}}function S(e,t,n){return e>=t&&e<=n}!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.LINE_CHART=1]="LINE_CHART"}(y||(y={})),function(e){e[e.MONTH=30.41666]="MONTH",e[e.YEAR=365]="YEAR",e[e.DAY=1]="DAY"}(g||(g={}));var T=20,E=100,O="tl-remove-for-download";function P(e){switch(e.trackType){case y.LINE_CHART:return E;case y.DEFAULT:case void 0:default:return T}}function _(e,t){var n=a.a.at(t,["event.attributes"]),r=n[0]?n[0].find(function(t){return e instanceof RegExp?e.test(t.key):t.key===e}):void 0;return r?r.value:void 0}var C=4;function x(e,t){var n=[],r=Math.min.apply(Math,e.map(function(e){return e.start})),o=Math.max.apply(Math,e.map(function(e){return e.end})),a=Math.floor(r/t)*t,i=Math.ceil(o/t)*t,l=function(){var r=a,o=a+t-1;n.push({start:r,end:o,events:e.filter(function(e){return t=e.start,n=e.end,a=r,i=o,s=w(t,n),c=s.start,p=s.end,f=w(a,i),d=f.start,m=f.end,p-c>m-d?(l={start:d,end:m},u={start:c,end:p}):(l={start:c,end:p},u={start:d,end:m}),S(l.start,u.start,u.end)||S(l.end,u.start,u.end);var t,n,a,i,l,u,s,c,p,f,d,m})}),a+=t};do{l()}while(a<i);return Math.abs(n[0].start)-Math.abs(r)<20?n.unshift({start:n[0].start-20,end:n[0].start-1,events:[]}):n[0].start=r-20,n[n.length-1].end=o+20,n}function I(e,t){return e/t*100}function k(e,t){var n=a.a.find(t,function(t){return t.start<=e&&(t.end>=e||t.realEnd>=e)});return n?n.isTrim?n.start-(n.offset||0):e-(n.offset||0):void 0}function M(e,t){var n=e,r=0;return a.a.forEach(t,function(e){return!!e.isTrim||(n>=e.end-e.start?(n-=e.end-e.start,!0):(r=e.start+n,!1))}),r}function A(e){var t,n,r;t=Math.floor(e/365),n=Math.floor((e-365*t)/30),r=Math.floor(e-365*t-30*n);var o=[];return t>0&&o.push(t+" year"+(1===t?"":"s")),n>0&&o.push(n+" month"+(1===n?"":"s")),(0===e||r>0)&&o.push(r+" day"+(1===r?"":"s")),o.join(", ")}function D(e,t,n){var r,o=[{track:e,indent:t,height:P(e)}];if(!n(e.uid)&&e.tracks){var i=(r=e.tracks,a.a.sortBy(r,function(e){return e.items&&e.items.length?e.items[0].start:0}));o.push.apply(o,a.a.flatMap(i,function(e){return D(e,t+17,n)}))}return o}var j=.52,R=.2;function N(e,t,n,r){return u.a.createElement("ellipse",{cx:0,cy:t,rx:e/2,ry:j*e/2,fill:n,stroke:"black",strokeWidth:r})}function L(e,t,n){return u.a.createElement(u.a.Fragment,null,N(e,t,n,R),u.a.createElement("g",{transform:"translate(0 -1)"},N(e,t,"#fff",0)))}function G(e){return function(e,t,n){return 2===n.length?u.a.createElement("g",null,L(e,t+e/8,n[1]),N(e,t-e/8,n[0],R)):(n=function(e,t){for(var n=[],r=0;n.length<t;)n.push(e[r]),r=(r+1)%e.length;return n}(n,3),u.a.createElement("g",null,L(e,t+e/4,n[2]),L(e,t,n[1]),N(e,t-e/4,n[0],R)))}(9,T/2,e)}function V(e){return u.a.createElement("g",{transform:"translate(3 -8)"},u.a.createElement("text",{x:1,y:0,dy:"1em",className:"noselect",style:{fontFamily:"Arial",fill:"#666",pointerEvents:"none"}},u.a.createElement("tspan",{style:{fontSize:7}},e)))}function F(e,t,n,r){return r?function(e,t,n,r){var o=e.map(t.getLineChartValue).filter(function(e){return null!==e});if(0===o.length)return null;var i=Math.min(E/7,15),l=n-2*i;return i+(1-(a.a.mean(o)-r.min)/(r.max-r.min))*l}(e,t,n,r):n/2}var U=4,B="rgb(31, 119, 180)";function H(e,t,n){return 1===e.length&&e[0].render?e[0].render(e[0]):t.renderEvents?t.renderEvents(e):u.a.createElement("g",null,e.length>1?u.a.createElement(u.a.Fragment,null,V(e.length),G(e.map(function(e){return B}))):u.a.createElement("circle",{cx:"0",cy:n,r:U,fill:B}))}var W=Object(s.observer)(function(e){var t,n,r,o=e.trackData,i=e.limit,l=e.getPosition,s=e.handleTrackHover,c=e.store,p=e.y,f=e.height,d=e.width;o.items&&(n=o.items,t=a.a.groupBy(n,function(e){return e.start+"-"+e.end}),o.sortSimultaneousEvents&&(t=a.a.mapValues(t,o.sortSimultaneousEvents)));var m=[];o.trackType===y.LINE_CHART&&(r=function(e){for(var t,n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,o=0,a=e.items;o<a.length;o++){var i=a[o];null!==(t=e.getLineChartValue(i))&&(n=Math.min(t,n),r=Math.max(t,r))}return r===n&&(r=n+1),{min:n,max:r}}(o));var h=t&&a.a.map(t,function(e){var t,n=e[0],a=l(n,i),s=null;if(n.start===n.end){var p=F(e,o,f,r);null!==p&&(s=H(e,o,p),m.push({x:a?a.pixelLeft:0,y:p}))}else a&&a.pixelWidth&&(t=a.pixelWidth,s=u.a.createElement("rect",{width:Math.max(t,2*U),height:5,y:(T-5)/2,rx:"2",ry:"2",fill:"rgb(31, 119, 180)"}));return u.a.createElement(q,{x:a&&a.pixelLeft,store:c,track:o,events:e,content:s})});return u.a.createElement("g",{className:"tl-track",transform:"translate(0 "+p+")",onMouseEnter:s,onMouseLeave:s},u.a.createElement("rect",{className:"tl-track-highlight "+O,x:0,y:0,height:f,width:d}),o.trackType===y.LINE_CHART&&function(e){return e.length<2?null:u.a.createElement("g",null,e.map(function(t,n){if(0===n)return null;var r=e[n-1];return u.a.createElement("line",{style:{stroke:"#555",strokeWidth:2},x1:r.x,y1:r.y,x2:t.x,y2:t.y})}))}(m),h,u.a.createElement("line",{x1:0,x2:d,y1:f-.5,y2:f-.5,stroke:"#eee",strokeWidth:1,strokeDasharray:"3,2"}))}),q=function(e){var t=e.x,n=e.store,r=e.track,o=e.events,a=e.content,i=Object(l.useState)(null),s=i[0],c=i[1],p=[];function f(){return s&&!n.doesTooltipExist(s)?(c(null),null):s}return t&&p.push("translate("+t+" 0)"),u.a.createElement("g",{style:{cursor:"pointer"},transform:p.join(" "),onMouseMove:function(e){var t=f();t||(t=n.addTooltip({track:r,events:o}),c(t)),n.setHoveredTooltipUid(t),n.setMousePosition({x:e.pageX,y:e.pageY})},onMouseLeave:function(e){var t=f();t&&!n.isTooltipPinned(t)&&(n.removeTooltip(t),c(null))},onClick:function(){var e=f();e&&n.togglePinTooltip(e)}},a)},z=function(e){var t=e.event;return u.a.createElement("div",null,u.a.createElement("table",null,u.a.createElement("tbody",null,a.a.map(t.event.attributes,function(e){return u.a.createElement("tr",null,u.a.createElement("th",null,e.key.replace(/_/g," ")),u.a.createElement("td",null,e.value))}),u.a.createElement("tr",null,u.a.createElement("th",null,t.event.endNumberOfDaysSinceDiagnosis?"START DATE":"DATE"),u.a.createElement("td",{className:"nowrap"},A(t.event.startNumberOfDaysSinceDiagnosis))),t.event.endNumberOfDaysSinceDiagnosis&&u.a.createElement("tr",null,u.a.createElement("th",null,"END DATE"),u.a.createElement("td",{className:"nowrap"},A(t.event.endNumberOfDaysSinceDiagnosis))))))},K=function(){function e(e){this._expandedTrims=!1,this.collapsedTracks=r.observable.map(),this.uniqueId="tl-id-"+a.a.random(1,1e4),this.enableCollapseTrack=!1,this.tooltipUidCounter=0,this.tooltipModelsByUid=r.observable.map(),this._lastHoveredTooltipUid=null,this.mousePosition={x:0,y:0},this.dragging=void 0,this.viewPortWidth=0,this.headersWidth=0,this._data=e}return Object.defineProperty(e.prototype,"data",{get:function(){return e=this._data,t=this.isTrackCollapsed,a.a.flatMap(e,function(e){return D(e,5,t)});var e,t},enumerable:!1,configurable:!0}),e.prototype.toggleTrackCollapse=function(e){this.collapsedTracks.has(e)?this.collapsedTracks.delete(e):this.collapsedTracks.set(e,!0)},e.prototype.isTrackCollapsed=function(e){return this.collapsedTracks.has(e)},Object.defineProperty(e.prototype,"sampleEvents",{get:function(){return this.allItems.filter(function(e){return/^SPECIMEN$|^SAMPLE ACQUISITION$/i.test(e.event.eventType)})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sampleIds",{get:function(){var e=[];return this.sampleEvents.forEach(function(t,n){t.event.attributes.forEach(function(t,n){"SAMPLE_ID"===t.key&&e.push(t.value)})}),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"expandedTrims",{get:function(){return this._expandedTrims},enumerable:!1,configurable:!0}),e.prototype.toggleExpandedTrims=function(){this._expandedTrims=!this._expandedTrims},e.prototype.setHoveredTooltipUid=function(e){this._lastHoveredTooltipUid=e},Object.defineProperty(e.prototype,"hoveredTooltipUid",{get:function(){return this._lastHoveredTooltipUid&&this.doesTooltipExist(this._lastHoveredTooltipUid)?this._lastHoveredTooltipUid:1===this.tooltipModelsByUid.size?this.tooltipModelsByUid.keys()[0]:null},enumerable:!1,configurable:!0}),e.prototype.doesTooltipExist=function(e){return this.tooltipModelsByUid.has(e)},Object.defineProperty(e.prototype,"tooltipModels",{get:function(){return this.tooltipModelsByUid.entries()},enumerable:!1,configurable:!0}),e.prototype.addTooltip=function(e){var t=(this.tooltipUidCounter++).toString();return this.tooltipModelsByUid.set(t,v(v({},e),{index:0})),t},e.prototype.removeTooltip=function(e){this.tooltipModelsByUid.delete(e),e===this.hoveredTooltipUid&&this.setHoveredTooltipUid(null)},e.prototype.removeAllTooltips=function(){this.tooltipModelsByUid.clear()},e.prototype.removeAllTooltipsExcept=function(e){for(var t=0,n=this.tooltipModelsByUid.keys();t<n.length;t++){var r=n[t];r!==e&&this.tooltipModelsByUid.delete(r)}},e.prototype.togglePinTooltip=function(e){var t=this.tooltipModelsByUid.get(e);t.position?t.position=void 0:t.position=v({},this.mousePosition)},e.prototype.isTooltipPinned=function(e){return!!this.tooltipModelsByUid.get(e).position},e.prototype.nextTooltipEvent=function(){if(!this.hoveredTooltipUid)return!1;var e=this.tooltipModelsByUid.get(this.hoveredTooltipUid);return e.index=(e.index+1)%e.events.length,!0},e.prototype.prevTooltipEvent=function(){if(!this.hoveredTooltipUid)return!1;for(var e=this.tooltipModelsByUid.get(this.hoveredTooltipUid),t=e.index-1;t<0;)t+=e.events.length;return e.index=t,!0},e.prototype.getTooltipContent=function(e,t){var n=this,r=t.events[t.index],o=null;t.track.renderTooltip&&(o=t.track.renderTooltip(r)),null===o&&(o=Object(l.createElement)(z,{event:r}));var a=t.events.length>1,i=null;return a&&(i=Object(l.createElement)("svg",{width:T,height:T,style:{marginRight:5}},Object(l.createElement)("g",{transform:"translate("+T/2+" 0)"},H([r],t.track,T/2)))),Object(l.createElement)("div",{onMouseEnter:function(){return n.setHoveredTooltipUid(e)},onMouseMove:function(){return n.setHoveredTooltipUid(e)},onClick:function(){return n.removeAllTooltipsExcept(e)}},a&&Object(l.createElement)("div",{style:{display:"flex",alignItems:"center",borderBottom:"1px dashed white",paddingBottom:3,marginBottom:3}},i,e===this.hoveredTooltipUid&&Object(l.createElement)("span",null,t.index+1," of"," ",t.events.length,". Use spacebar or arrow keys to see others.")),Object(l.createElement)("div",null,o))},e.prototype.setMousePosition=function(e){this.mousePosition.x=e.x,this.mousePosition.y=e.y},Object.defineProperty(e.prototype,"limit",{get:function(){return this.lastTick.end},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tickInterval",{get:function(){return g.YEAR},enumerable:!1,configurable:!0}),e.prototype.setZoomBounds=function(e,t){this.zoomBounds=e&&t?{start:e,end:t}:void 0},e.prototype.getPosition=function(e){var t=k(e.start,this.ticks),n=k(e.end||e.start,this.ticks);if(void 0!==t&&void 0!==n){var r=t-this.firstTick.start,o=I(n-this.firstTick.start-r,this.absoluteWidth);return{left:I(r,this.absoluteWidth)+"%",width:o+"%",pixelLeft:I(r,this.absoluteWidth)/100*this.pixelWidth,pixelWidth:o/100*this.pixelWidth}}},Object.defineProperty(e.prototype,"trimmedLimit",{get:function(){return this.lastTick.end+Math.abs(this.firstTick.start)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allItems",{get:function(){var e=a.a.flattenDeep(this.data.map(function(e){return function e(t){return t.tracks&&t.tracks.length>0?a.a.flatten(t.tracks.map(function(t){return e(t)})):t.items}(e.track)}));return a.a.sortBy(e,function(e){return e.start})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ticks",{get:function(){var e,t,n,r,o=x(this.allItems,g.YEAR);return e=o,t=this.expandedTrims,n=[],r=0,e.reduce(function(e,o){if(0===o.events.length)o.offset=r,n.push(o);else{if(!t&&n.length>=C){e.push(n[0]);var i=n.slice(1,-1);e.push({isTrim:!0,start:i[0].start,end:i[0].end,realEnd:i[i.length-1].end,offset:r});var l=n[n.length-1];r+=a.a.sumBy(i,function(e){return e.end-e.start+1}),l.offset=r,e.push(l),n=[]}else e.push.apply(e,n);e.push(o),n=[]}return o.offset=r,e},[])},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastTick",{get:function(){return this.ticks[this.ticks.length-1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstTick",{get:function(){return this.ticks[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"absoluteWidth",{get:function(){var e=this.firstTick.start+Math.abs(this.firstTick.start);return k(this.lastTick.end,this.ticks)+Math.abs(this.firstTick.start)-e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zoomedWidth",{get:function(){return this.zoomRange?this.zoomRange.end-this.zoomRange.start:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tickPixelWidth",{get:function(){return this.viewPortWidth*this.zoomLevel/this.ticks.filter(function(e){return!e.isTrim}).length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pixelWidth",{get:function(){return void 0!==this.viewPortWidth?this.viewPortWidth*this.zoomLevel:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zoomRange",{get:function(){return this.zoomBounds?{start:k(this.zoomBounds.start,this.ticks),end:k(this.zoomBounds.end,this.ticks)}:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zoomLevel",{get:function(){return this.zoomedWidth?this.absoluteWidth/this.zoomedWidth:1},enumerable:!1,configurable:!0}),b([r.observable],e.prototype,"_expandedTrims",void 0),b([r.observable.ref],e.prototype,"_data",void 0),b([r.observable],e.prototype,"enableCollapseTrack",void 0),b([r.computed],e.prototype,"data",null),b([r.action],e.prototype,"toggleTrackCollapse",null),b([i.default],e.prototype,"isTrackCollapsed",null),b([r.computed],e.prototype,"sampleEvents",null),b([r.computed],e.prototype,"sampleIds",null),b([r.computed],e.prototype,"expandedTrims",null),b([i.default,r.action],e.prototype,"toggleExpandedTrims",null),b([r.observable],e.prototype,"_lastHoveredTooltipUid",void 0),b([r.action],e.prototype,"setHoveredTooltipUid",null),b([r.computed],e.prototype,"hoveredTooltipUid",null),b([r.observable],e.prototype,"mousePosition",void 0),b([r.computed],e.prototype,"tooltipModels",null),b([i.default,r.action],e.prototype,"addTooltip",null),b([i.default,r.action],e.prototype,"removeTooltip",null),b([i.default,r.action],e.prototype,"removeAllTooltips",null),b([r.action],e.prototype,"removeAllTooltipsExcept",null),b([i.default,r.action],e.prototype,"togglePinTooltip",null),b([i.default,r.action],e.prototype,"nextTooltipEvent",null),b([i.default,r.action],e.prototype,"prevTooltipEvent",null),b([i.default,r.action],e.prototype,"setMousePosition",null),b([r.computed],e.prototype,"limit",null),b([r.computed],e.prototype,"tickInterval",null),b([r.observable.ref],e.prototype,"zoomBounds",void 0),b([r.observable],e.prototype,"viewPortWidth",void 0),b([r.observable],e.prototype,"headersWidth",void 0),b([i.default],e.prototype,"getPosition",null),b([r.computed],e.prototype,"trimmedLimit",null),b([r.computed],e.prototype,"allItems",null),b([r.computed],e.prototype,"ticks",null),b([r.computed],e.prototype,"lastTick",null),b([r.computed],e.prototype,"firstTick",null),b([r.computed],e.prototype,"absoluteWidth",null),b([r.computed],e.prototype,"zoomedWidth",null),b([r.computed],e.prototype,"tickPixelWidth",null),b([r.computed],e.prototype,"pixelWidth",null),b([r.computed],e.prototype,"zoomRange",null),b([r.computed],e.prototype,"zoomLevel",null),b([r.observable],e.prototype,"hoveredTrackIndex",void 0),e}(),Y="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{};function X(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Z(e,t){return e(t={exports:{}},t.exports),t.exports}var Q=Z(function(e){
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){var t={}.hasOwnProperty;function n(){for(var e=[],r=0;r<arguments.length;r++){var o=arguments[r];if(o){var a=h(o);if("string"===a||"number"===a)e.push(o);else if(Array.isArray(o)&&o.length){var i=n.apply(null,o);i&&e.push(i)}else if("object"===a)for(var l in o)t.call(o,l)&&o[l]&&e.push(l)}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):window.classNames=n}()}),$=Z(function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}}});X($);var J=Z(function(e,t){t.__esModule=!0,t.default=void 0;var n=!("undefined"==typeof window||!window.document||!window.document.createElement);t.default=n,e.exports=t.default});X(J);var ee=Z(function(e,t){t.__esModule=!0,t.default=void 0;var n=$(J).default?function(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):r(e,t)}:r;function r(e,t){if(t)do{if(t===e)return!0}while(t=t.parentNode);return!1}t.default=n,e.exports=t.default});X(ee);var te=Z(function(e,t){t.__esModule=!0,t.default=function(e){return e===e.window?e:9===e.nodeType&&(e.defaultView||e.parentWindow)},e.exports=t.default});X(te);var ne=Z(function(e,t){t.__esModule=!0,t.default=function(e){return e&&e.ownerDocument||document},e.exports=t.default});X(ne);var re=Z(function(e,t){t.__esModule=!0,t.default=function(e){var t=(0,o.default)(e),a=(0,r.default)(t),i=t&&t.documentElement,l={top:0,left:0,height:0,width:0};if(!t)return;if(!(0,n.default)(i,e))return l;void 0!==e.getBoundingClientRect&&(l=e.getBoundingClientRect());return l={top:l.top+(a.pageYOffset||i.scrollTop)-(i.clientTop||0),left:l.left+(a.pageXOffset||i.scrollLeft)-(i.clientLeft||0),width:(null==l.width?e.offsetWidth:l.width)||0,height:(null==l.height?e.offsetHeight:l.height)||0}};var n=$(ee),r=$(te),o=$(ne);e.exports=t.default});X(re);var oe=Z(function(e,t){t.__esModule=!0,t.default=function(e,t){var o=(0,r.default)(e);return o?o.innerHeight:t?e.clientHeight:(0,n.default)(e).height};var n=$(re),r=$(te);e.exports=t.default});X(oe);var ae=Z(function(e,t){t.__esModule=!0,t.default=function(e){return e.replace(n,function(e,t){return t.toUpperCase()})};var n=/-(.)/g;e.exports=t.default});X(ae);var ie=Z(function(e,t){t.__esModule=!0,t.default=function(e){return(0,n.default)(e.replace(r,"ms-"))};var n=$(ae),r=/^-ms-/;e.exports=t.default});X(ie);var le=Z(function(e,t){t.__esModule=!0,t.default=function(e){return e.replace(n,"-$1").toLowerCase()};var n=/([A-Z])/g;e.exports=t.default});X(le);var ue=Z(function(e,t){t.__esModule=!0,t.default=function(e){return(0,n.default)(e).replace(r,"-ms-")};var n=$(le),r=/^ms-/;e.exports=t.default});X(ue);var se=Z(function(e,t){t.__esModule=!0,t.default=function(e){if(!e)throw new TypeError("No Element passed to `getComputedStyle()`");var t=e.ownerDocument;return"defaultView"in t?t.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):window.getComputedStyle(e,null):{getPropertyValue:function(t){var a=e.style;"float"==(t=(0,n.default)(t))&&(t="styleFloat");var i=e.currentStyle[t]||null;if(null==i&&a&&a[t]&&(i=a[t]),o.test(i)&&!r.test(t)){var l=a.left,u=e.runtimeStyle,s=u&&u.left;s&&(u.left=e.currentStyle.left),a.left="fontSize"===t?"1em":i,i=a.pixelLeft+"px",a.left=l,s&&(u.left=s)}return i}}};var n=$(ie),r=/^(top|right|bottom|left)$/,o=/^([+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|))(?!px)[a-z%]+$/i;e.exports=t.default});X(se);var ce=Z(function(e,t){t.__esModule=!0,t.default=function(e,t){return"removeProperty"in e.style?e.style.removeProperty(t):e.style.removeAttribute(t)},e.exports=t.default});X(ce);var pe=Z(function(e,t){t.__esModule=!0,t.default=t.animationEnd=t.animationDelay=t.animationTiming=t.animationDuration=t.animationName=t.transitionEnd=t.transitionDuration=t.transitionDelay=t.transitionTiming=t.transitionProperty=t.transform=void 0;var n,r,o,a,i,l,u,s,c,p,f,d=$(J),m="transform";if(t.transform=m,t.animationEnd=o,t.transitionEnd=r,t.transitionDelay=u,t.transitionTiming=l,t.transitionDuration=i,t.transitionProperty=a,t.animationDelay=f,t.animationTiming=p,t.animationDuration=c,t.animationName=s,d.default){var h=function(){for(var e,t,n=document.createElement("div").style,r={O:function(e){return"o"+e.toLowerCase()},Moz:function(e){return e.toLowerCase()},Webkit:function(e){return"webkit"+e},ms:function(e){return"MS"+e}},o=Object.keys(r),a="",i=0;i<o.length;i++){var l=o[i];if(l+"TransitionProperty"in n){a="-"+l.toLowerCase(),e=r[l]("TransitionEnd"),t=r[l]("AnimationEnd");break}}!e&&"transitionProperty"in n&&(e="transitionend");!t&&"animationName"in n&&(t="animationend");return n=null,{animationEnd:t,transitionEnd:e,prefix:a}}();n=h.prefix,t.transitionEnd=r=h.transitionEnd,t.animationEnd=o=h.animationEnd,t.transform=m=n+"-"+m,t.transitionProperty=a=n+"-transition-property",t.transitionDuration=i=n+"-transition-duration",t.transitionDelay=u=n+"-transition-delay",t.transitionTiming=l=n+"-transition-timing-function",t.animationName=s=n+"-animation-name",t.animationDuration=c=n+"-animation-duration",t.animationTiming=p=n+"-animation-delay",t.animationDelay=f=n+"-animation-timing-function"}var y={transform:m,end:r,property:a,timing:l,delay:u,duration:i};t.default=y});X(pe);pe.animationEnd,pe.animationDelay,pe.animationTiming,pe.animationDuration,pe.animationName,pe.transitionEnd,pe.transitionDuration,pe.transitionDelay,pe.transitionTiming,pe.transitionProperty,pe.transform;var fe=Z(function(e,t){t.__esModule=!0,t.default=function(e){return!(!e||!n.test(e))};var n=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;e.exports=t.default});X(fe);var de=Z(function(e,t){t.__esModule=!0,t.default=function(e,t,l){var u="",s="",c=t;if("string"==typeof t){if(void 0===l)return e.style[(0,n.default)(t)]||(0,o.default)(e).getPropertyValue((0,r.default)(t));(c={})[t]=l}Object.keys(c).forEach(function(t){var n=c[t];n||0===n?(0,i.default)(t)?s+=t+"("+n+") ":u+=(0,r.default)(t)+": "+n+";":(0,a.default)(e,(0,r.default)(t))}),s&&(u+=pe.transform+": "+s+";");e.style.cssText+=";"+u};var n=$(ie),r=$(ue),o=$(se),a=$(ce),i=$(fe);e.exports=t.default});X(de);var me=Z(function(e,t){t.__esModule=!0,t.default=function(e){var t=(0,n.default)(e),a=e&&e.offsetParent;for(;a&&"html"!==o(e)&&"static"===(0,r.default)(a,"position");)a=a.offsetParent;return a||t.documentElement};var n=$(ne),r=$(de);function o(e){return e.nodeName&&e.nodeName.toLowerCase()}e.exports=t.default});X(me);var he=Z(function(e,t){t.__esModule=!0,t.default=function(e,t){var r=(0,n.default)(e);if(void 0===t)return r?"pageYOffset"in r?r.pageYOffset:r.document.documentElement.scrollTop:e.scrollTop;r?r.scrollTo("pageXOffset"in r?r.pageXOffset:r.document.documentElement.scrollLeft,t):e.scrollTop=t};var n=$(te);e.exports=t.default});X(he);var ye=Z(function(e,t){t.__esModule=!0,t.default=void 0;var n,r=$(J),o="clearTimeout",a=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-l)),r=setTimeout(e,n);return l=t,r},i=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};r.default&&["","webkit","moz","o","ms"].some(function(e){var t=i(e,"request");if(t in window)return o=i(e,"cancel"),a=function(e){return window[t](e)}});var l=(new Date).getTime();(n=function(e){return a(e)}).cancel=function(e){window[o]&&"function"==typeof window[o]&&window[o](e)};var u=n;t.default=u,e.exports=t.default});X(ye);var ge=Z(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,i=n?Symbol.for("react.strict_mode"):60108,l=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,s=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,p=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,m=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116;function g(e){if("object"===h(e)&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case p:case a:case l:case i:case d:return e;default:switch(e=e&&e.$$typeof){case s:case f:case u:return e;default:return t}}case y:case m:case o:return t}}}function v(e){return g(e)===p}t.typeOf=g,t.AsyncMode=c,t.ConcurrentMode=p,t.ContextConsumer=s,t.ContextProvider=u,t.Element=r,t.ForwardRef=f,t.Fragment=a,t.Lazy=y,t.Memo=m,t.Portal=o,t.Profiler=l,t.StrictMode=i,t.Suspense=d,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===p||e===l||e===i||e===d||"object"===h(e)&&null!==e&&(e.$$typeof===y||e.$$typeof===m||e.$$typeof===u||e.$$typeof===s||e.$$typeof===f)},t.isAsyncMode=function(e){return v(e)||g(e)===c},t.isConcurrentMode=v,t.isContextConsumer=function(e){return g(e)===s},t.isContextProvider=function(e){return g(e)===u},t.isElement=function(e){return"object"===h(e)&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return g(e)===f},t.isFragment=function(e){return g(e)===a},t.isLazy=function(e){return g(e)===y},t.isMemo=function(e){return g(e)===m},t.isPortal=function(e){return g(e)===o},t.isProfiler=function(e){return g(e)===l},t.isStrictMode=function(e){return g(e)===i},t.isSuspense=function(e){return g(e)===d}});X(ge);ge.typeOf,ge.AsyncMode,ge.ConcurrentMode,ge.ContextConsumer,ge.ContextProvider,ge.Element,ge.ForwardRef,ge.Fragment,ge.Lazy,ge.Memo,ge.Portal,ge.Profiler,ge.StrictMode,ge.Suspense,ge.isValidElementType,ge.isAsyncMode,ge.isConcurrentMode,ge.isContextConsumer,ge.isContextProvider,ge.isElement,ge.isForwardRef,ge.isFragment,ge.isLazy,ge.isMemo,ge.isPortal,ge.isProfiler,ge.isStrictMode,ge.isSuspense;var ve=Z(function(e,t){0});X(ve);ve.typeOf,ve.AsyncMode,ve.ConcurrentMode,ve.ContextConsumer,ve.ContextProvider,ve.Element,ve.ForwardRef,ve.Fragment,ve.Lazy,ve.Memo,ve.Portal,ve.Profiler,ve.StrictMode,ve.Suspense,ve.isValidElementType,ve.isAsyncMode,ve.isConcurrentMode,ve.isContextConsumer,ve.isContextProvider,ve.isElement,ve.isForwardRef,ve.isFragment,ve.isLazy,ve.isMemo,ve.isPortal,ve.isProfiler,ve.isStrictMode,ve.isSuspense;var be=Z(function(e){e.exports=ge}),we=Object.getOwnPropertySymbols,Se=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable;(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}})()&&Object.assign;var Ee="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function Oe(e,t,n,r,o){}Oe.resetWarningCache=function(){0};Function.call.bind(Object.prototype.hasOwnProperty);function Pe(){}function _e(){}_e.resetWarningCache=Pe;var Ce=Z(function(e){e.exports=function(){function e(e,t,n,r,o,a){if(a!==Ee){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:_e,resetWarningCache:Pe};return n.PropTypes=n,n}()}),xe=Z(function(e,t){t.__esModule=!0,t.default=void 0;var n=function(){};$(J).default&&(n=document.addEventListener?function(e,t,n,r){return e.addEventListener(t,n,r||!1)}:document.attachEvent?function(e,t,n){return e.attachEvent("on"+t,function(t){(t=t||window.event).target=t.target||t.srcElement,t.currentTarget=e,n.call(e,t)})}:void 0);var r=n;t.default=r,e.exports=t.default});X(xe);var Ie=Z(function(e,t){t.__esModule=!0,t.default=void 0;var n=function(){};$(J).default&&(n=document.addEventListener?function(e,t,n,r){return e.removeEventListener(t,n,r||!1)}:document.attachEvent?function(e,t,n){return e.detachEvent("on"+t,n)}:void 0);var r=n;t.default=r,e.exports=t.default});X(Ie);var ke=Z(function(e,t){t.__esModule=!0,t.default=function(e,t,o,a){return(0,n.default)(e,t,o,a),{remove:function(){(0,r.default)(e,t,o,a)}}};var n=o(xe),r=o(Ie);function o(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default});X(ke);var Me=Z(function(e,t){t.__esModule=!0,t.default=function(e){return Math.max(e.documentElement.offsetHeight||0,e.height||0,e.body.scrollHeight||0,e.body.offsetHeight||0)},e.exports=t.default});X(Me);var Ae=Z(function(e,t){t.__esModule=!0,t.default=function(e){return(0,r.default)(n.default.findDOMNode(e))};var n=o(f.a),r=o(ne);function o(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default});X(Ae);var De=Z(function(e,t){t.__esModule=!0,t.default=function(e){var t=(0,n.default)(e);return t&&t.defaultView||t.parentWindow};var n=$(ne);e.exports=t.default});X(De);var je=Z(function(e,t){t.__esModule=!0,t.default=function(e){return(0,r.default)(n.default.findDOMNode(e))};var n=o(f.a),r=o(De);function o(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default});X(je);var Re=Z(function(e,t){t.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=b(Q),o=b(oe),a=b(re),i=b(me),l=b(he),s=b(ye),c=b(Ce),p=b(u.a),d=b(f.a),m=b(ke),y=b(Me),g=b(Ae),v=b(je);function b(e){return e&&e.__esModule?e:{default:e}}var w=function(e){function t(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==h(t)&&"function"!=typeof t?e:t}(this,e.call(this,n,r));return u.onWindowScroll=function(){u.onUpdate()},u.onDocumentClick=function(){(0,s.default)(function(){return u.onUpdate()})},u.onUpdate=function(){if(u._isMounted){var e=u.props,t=e.offsetTop,n=e.viewportOffsetTop,r=(0,l.default)((0,v.default)(u))+(n||0);r<=t?u.updateState("top",null,null):r>u.getPositionTopMax()?"bottom"===u.state.affixed?u.updateStateAtBottom():u.setState({affixed:"bottom",position:"absolute",top:null},function(){u._isMounted&&u.updateStateAtBottom()}):u.updateState("affix","fixed",n)}},u.getPositionTopMax=function(){return(0,y.default)((0,g.default)(u))-(0,o.default)(d.default.findDOMNode(u))-u.props.offsetBottom},u.updateState=function(e,t,n){if(e!==u.state.affixed||t!==u.state.position||n!==u.state.top){var r="affix"===e?"":e.charAt(0).toUpperCase()+e.substr(1);u.props["onAffix"+r]&&u.props["onAffix"+r](),u.setState({affixed:e,position:t,top:n},function(){u.props["onAffixed"+r]&&u.props["onAffixed"+r]()})}},u.updateStateAtBottom=function(){var e=u.getPositionTopMax(),t=(0,i.default)(d.default.findDOMNode(u)),n=(0,a.default)(t).top;u.updateState("bottom","absolute",e-n)},u.state={affixed:"top",position:null,top:null},u._needPositionUpdate=!1,u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+h(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){var e=this;this._isMounted=!0,this._windowScrollListener=(0,m.default)((0,v.default)(this),"scroll",function(){return e.onWindowScroll()}),this._documentClickListener=(0,m.default)((0,g.default)(this),"click",function(){return e.onDocumentClick()}),this.onUpdate()},t.prototype.componentWillReceiveProps=function(){this._needPositionUpdate=!0},t.prototype.componentDidUpdate=function(){this._needPositionUpdate&&(this._needPositionUpdate=!1,this.onUpdate())},t.prototype.componentWillUnmount=function(){this._isMounted=!1,this._windowScrollListener&&this._windowScrollListener.remove(),this._documentClickListener&&this._documentClickListener.remove()},t.prototype.render=function(){var e=p.default.Children.only(this.props.children),t=e.props,o=t.className,a=t.style,i=this.state,l=i.affixed,u={position:i.position,top:i.top},s=void 0,c=void 0;return"top"===l?(s=this.props.topClassName,c=this.props.topStyle):"bottom"===l?(s=this.props.bottomClassName,c=this.props.bottomStyle):(s=this.props.affixClassName,c=this.props.affixStyle),p.default.cloneElement(e,{className:(0,r.default)(s,o),style:n({},u,c,a)})},t}(p.default.Component);w.propTypes={offsetTop:c.default.number,viewportOffsetTop:c.default.number,offsetBottom:c.default.number,topClassName:c.default.string,topStyle:c.default.object,affixClassName:c.default.string,affixStyle:c.default.object,bottomClassName:c.default.string,bottomStyle:c.default.object,onAffix:c.default.func,onAffixed:c.default.func,onAffixTop:c.default.func,onAffixedTop:c.default.func,onAffixBottom:c.default.func,onAffixedBottom:c.default.func},w.defaultProps={offsetTop:0,viewportOffsetTop:null,offsetBottom:0},t.default=w,e.exports=t.default});X(Re);var Ne=Z(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t,n,r,o,a,i){var l=o||"<<anonymous>>",u=i||r;if(null==n[r])return t?new Error("Required "+a+" `"+u+"` was not specified in `"+l+"`."):null;for(var s=arguments.length,c=Array(s>6?s-6:0),p=6;p<s;p++)c[p-6]=arguments[p];return e.apply(void 0,[n,r,l,a,u].concat(c))}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n},e.exports=t.default});X(Ne);var Le=Z(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"===h(Symbol.iterator)?function(e){return h(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":h(e)},r=a(u.a),o=a(Ne);function a(e){return e&&e.__esModule?e:{default:e}}t.default=(0,o.default)(function(e,t,o,a,i){var l=e[t],u=void 0===l?"undefined":n(l);return r.default.isValidElement(l)?new Error("Invalid "+a+" `"+i+"` of type ReactElement supplied to `"+o+"`, expected a ReactComponent or a DOMElement. You can usually obtain a ReactComponent or DOMElement from a ReactElement by attaching a ref to it."):"object"===u&&"function"==typeof l.render||1===l.nodeType?null:new Error("Invalid "+a+" `"+i+"` of value `"+l+"` supplied to `"+o+"`, expected a ReactComponent or a DOMElement.")}),e.exports=t.default});X(Le);var Ge=Z(function(e,t){t.__esModule=!0,t.default=function(e,t){return e="function"==typeof e?e():e,r.default.findDOMNode(e)||t};var n,r=(n=f.a)&&n.__esModule?n:{default:n};e.exports=t.default});X(Ge);var Ve=Z(function(e,t){t.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=y(re),o=y(ye),a=y(Ce),i=y(Le),l=y(u.a),s=y(Re),c=y(ke),p=y(Ge),f=y(Me),d=y(Ae),m=y(je);function y(e){return e&&e.__esModule?e:{default:e}}var g=n({},s.default.propTypes,{container:a.default.oneOfType([i.default,a.default.func]),autoWidth:a.default.bool}),v=function(e){function t(n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==h(t)&&"function"!=typeof t?e:t}(this,e.call(this,n,a));return i.onWindowScroll=function(){i.onUpdate()},i.onWindowResize=function(){i.props.autoWidth&&(0,o.default)(function(){return i.onUpdate()})},i.onDocumentClick=function(){(0,o.default)(function(){return i.onUpdate()})},i.onUpdate=function(){if(i._isMounted){var e=(0,r.default)(i.positioner),t=e.top,n=e.width,o=(0,p.default)(i.props.container),a=void 0;if(o){var l=(0,f.default)((0,d.default)(i)),u=(0,r.default)(o);a=l-u.top-u.height}else a=null;i.updateState(t,a,n)}},i.updateState=function(e,t,n){e===i.state.offsetTop&&t===i.state.offsetBottom&&n===i.state.width||i.setState({offsetTop:e,offsetBottom:t,width:n})},i.state={offsetTop:null,offsetBottom:null,width:null},i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+h(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){var e=this;this._isMounted=!0,this._windowScrollListener=(0,c.default)((0,m.default)(this),"scroll",function(){return e.onWindowScroll()}),this._windowResizeListener=(0,c.default)((0,m.default)(this),"resize",function(){return e.onWindowResize()}),this._documentClickListener=(0,c.default)((0,d.default)(this),"click",function(){return e.onDocumentClick()}),this.onUpdate()},t.prototype.componentWillReceiveProps=function(){this._needPositionUpdate=!0},t.prototype.componentDidUpdate=function(){this._needPositionUpdate&&(this._needPositionUpdate=!1,this.onUpdate())},t.prototype.componentWillUnmount=function(){this._isMounted=!1,this._windowScrollListener&&this._windowScrollListener.remove(),this._documentClickListener&&this._documentClickListener.remove(),this._windowResizeListener&&this._windowResizeListener.remove()},t.prototype.render=function(){var e=this,t=this.props,r=t.autoWidth,o=t.viewportOffsetTop,a=t.children,i=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["autoWidth","viewportOffsetTop","children"]),u=this.state,c=u.offsetTop,p=u.offsetBottom,f=u.width;delete i.container;var d=Math.max(c,o||0),m=this.props,h=m.affixStyle,y=m.bottomStyle;return r&&(h=n({width:f},h),y=n({width:f},y)),l.default.createElement("div",null,l.default.createElement("div",{ref:function(t){e.positioner=t}}),l.default.createElement(s.default,n({},i,{offsetTop:d,viewportOffsetTop:o,offsetBottom:p,affixStyle:h,bottomStyle:y}),a))},t}(l.default.Component);v.displayName="AutoAffix",v.propTypes=g,v.defaultProps={viewportOffsetTop:0,autoWidth:!0},t.default=v,e.exports=t.default});X(Ve);var Fe=Z(function(e,t){t.__esModule=!0,t.default=function(e){void 0===e&&(e=(0,n.default)());try{return e.activeElement}catch(e){}};var n=$(ne);e.exports=t.default});X(Fe);var Ue=function(){};var Be=Ue,He=Z(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var n,r=(n=Be)&&n.__esModule?n:{default:n};var o={};function a(e,t){return function(n,a,i,l,u){var s=i||"<<anonymous>>",c=u||a;if(null!=n[a]){var p=i+"."+a;(0,r.default)(o[p],"The "+l+" `"+c+"` of `"+s+"` is deprecated. "+t+"."),o[p]=!0}for(var f=arguments.length,d=Array(f>5?f-5:0),m=5;m<f;m++)d[m-5]=arguments[m];return e.apply(void 0,[n,a,i,l,u].concat(d))}}a._resetWarned=function(){o={}},e.exports=t.default});X(He);var We=Z(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=o(u.a),r=o(Ne);function o(e){return e&&e.__esModule?e:{default:e}}t.default=(0,r.default)(function(e,t,r,o,a){var i=e[t];return n.default.isValidElement(i)?new Error("Invalid "+o+" `"+a+"` of type ReactElement supplied to `"+r+"`,expected an element type (a string , component class, or function component)."):(0,be.isValidElementType)(i)?null:new Error("Invalid "+o+" `"+a+"` of value `"+i+"` supplied to `"+r+"`, expected an element type (a string , component class, or function component).")}),e.exports=t.default});X(We);var qe=Z(function(e,t){t.__esModule=!0,t.default=function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")},e.exports=t.default});X(qe);var ze=Z(function(e,t){t.__esModule=!0,t.default=function(e,t){e.classList?e.classList.add(t):(0,n.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))};var n=$(qe);e.exports=t.default});function Ke(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}X(ze);var Ye=function(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=Ke(e.className,t):e.setAttribute("class",Ke(e.className&&e.className.baseVal||"",t))},Xe=Z(function(e,t){t.__esModule=!0,t.default=void 0;var n=$(ze);t.addClass=n.default;var r=$(Ye);t.removeClass=r.default;var o=$(qe);t.hasClass=o.default;var a={addClass:n.default,removeClass:r.default,hasClass:o.default};t.default=a});X(Xe);Xe.addClass,Xe.removeClass,Xe.hasClass;var Ze=Z(function(e,t){t.__esModule=!0,t.default=function(e){if((!n&&0!==n||e)&&r.default){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),n=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return n};var n,r=$(J);e.exports=t.default});X(Ze);var Qe=Z(function(e,t){t.__esModule=!0,t.default=function(e){return(0,n.default)(e)||(t=e,t&&"body"===t.tagName.toLowerCase())?function(e){var t=(0,r.default)(e),o=(0,n.default)(t).innerWidth;if(!o){var a=t.documentElement.getBoundingClientRect();o=a.right-Math.abs(a.left)}return t.body.clientWidth<o}(e):e.scrollHeight>e.clientHeight;var t};var n=o(te),r=o(ne);function o(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default});X(Qe);var $e=Z(function(e,t){t.__esModule=!0,t.ariaHidden=o,t.hideSiblings=function(e,t){r(e,t,function(e){return o(!0,e)})},t.showSiblings=function(e,t){r(e,t,function(e){return o(!1,e)})};var n=["template","script","style"],r=function(e,t,r){t=[].concat(t),[].forEach.call(e.children,function(e){var o,a,i;-1===t.indexOf(e)&&(a=(o=e).nodeType,i=o.tagName,1===a&&-1===n.indexOf(i.toLowerCase()))&&r(e)})};function o(e,t){t&&(e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden"))}});X($e);$e.ariaHidden,$e.hideSiblings,$e.showSiblings;var Je=Z(function(e,t){t.__esModule=!0;var n=i(Xe),r=i(de),o=i(Ze),a=i(Qe);function i(e){return e&&e.__esModule?e:{default:e}}t.default=function e(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=i.hideSiblingNodes,u=void 0===l||l,s=i.handleContainerOverflow,c=void 0===s||s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.add=function(e,i,l){var u=t.modals.indexOf(e),s=t.containers.indexOf(i);if(-1!==u)return u;if(u=t.modals.length,t.modals.push(e),t.hideSiblingNodes&&(0,$e.hideSiblings)(i,e.mountNode),-1!==s)return t.data[s].modals.push(e),u;var c={modals:[e],classes:l?l.split(/\s+/):[],overflowing:(0,a.default)(i)};return t.handleContainerOverflow&&function(e,t){var n={overflow:"hidden"};e.style={overflow:t.style.overflow,paddingRight:t.style.paddingRight},e.overflowing&&(n.paddingRight=parseInt((0,r.default)(t,"paddingRight")||0,10)+(0,o.default)()+"px"),(0,r.default)(t,n)}(c,i),c.classes.forEach(n.default.addClass.bind(null,i)),t.containers.push(i),t.data.push(c),u},this.remove=function(e){var r=t.modals.indexOf(e);if(-1!==r){var o=function(e,t){return n=function(e){return-1!==e.modals.indexOf(t)},r=-1,e.some(function(e,t){if(n(e,t))return r=t,!0}),r;var n,r}(t.data,e),a=t.data[o],i=t.containers[o];a.modals.splice(a.modals.indexOf(e),1),t.modals.splice(r,1),0===a.modals.length?(a.classes.forEach(n.default.removeClass.bind(null,i)),t.handleContainerOverflow&&function(e,t){var n=e.style;Object.keys(n).forEach(function(e){return t.style[e]=n[e]})}(a,i),t.hideSiblingNodes&&(0,$e.showSiblings)(i,e.mountNode),t.containers.splice(o,1),t.data.splice(o,1)):t.hideSiblingNodes&&(0,$e.ariaHidden)(!1,a.modals[a.modals.length-1].mountNode)}},this.isTopModal=function(e){return!!t.modals.length&&t.modals[t.modals.length-1]===e},this.hideSiblingNodes=u,this.handleContainerOverflow=c,this.modals=[],this.containers=[],this.data=[]},e.exports=t.default});X(Je);var et=Z(function(e,t){t.__esModule=!0;var n=s(Ce),r=s(Le),o=s(u.a),a=s(f.a),i=s(Ge),l=s(Ae);function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==h(t)&&"function"!=typeof t?e:t}var p=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var u=arguments.length,s=Array(u),p=0;p<u;p++)s[p]=arguments[p];return n=r=c(this,e.call.apply(e,[this].concat(s))),r._mountOverlayTarget=function(){r._overlayTarget||(r._overlayTarget=document.createElement("div"),r._portalContainerNode=(0,i.default)(r.props.container,(0,l.default)(r).body),r._portalContainerNode.appendChild(r._overlayTarget))},r._unmountOverlayTarget=function(){r._overlayTarget&&(r._portalContainerNode.removeChild(r._overlayTarget),r._overlayTarget=null),r._portalContainerNode=null},r._renderOverlay=function(){var e=r.props.children?o.default.Children.only(r.props.children):null;if(null!==e){r._mountOverlayTarget();var t=!r._overlayInstance;r._overlayInstance=a.default.unstable_renderSubtreeIntoContainer(r,e,r._overlayTarget,function(){t&&r.props.onRendered&&r.props.onRendered()})}else r._unrenderOverlay(),r._unmountOverlayTarget()},r._unrenderOverlay=function(){r._overlayTarget&&(a.default.unmountComponentAtNode(r._overlayTarget),r._overlayInstance=null)},r.getMountNode=function(){return r._overlayTarget},c(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+h(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this._isMounted=!0,this._renderOverlay()},t.prototype.componentDidUpdate=function(){this._renderOverlay()},t.prototype.componentWillReceiveProps=function(e){this._overlayTarget&&e.container!==this.props.container&&(this._portalContainerNode.removeChild(this._overlayTarget),this._portalContainerNode=(0,i.default)(e.container,(0,l.default)(this).body),this._portalContainerNode.appendChild(this._overlayTarget))},t.prototype.componentWillUnmount=function(){this._isMounted=!1,this._unrenderOverlay(),this._unmountOverlayTarget()},t.prototype.render=function(){return null},t}(o.default.Component);p.displayName="Portal",p.propTypes={container:n.default.oneOfType([r.default,n.default.func]),onRendered:n.default.func},t.default=p,e.exports=t.default});X(et);var tt=Z(function(e,t){t.__esModule=!0;var n=c(Ce),r=c(Le),o=c(u.a),a=c(f.a),i=c(Ge),l=c(Ae),s=c(et);function c(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==h(t)&&"function"!=typeof t?e:t}var d=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=Array(o),u=0;u<o;u++)a[u]=arguments[u];return n=r=p(this,e.call.apply(e,[this].concat(a))),r.setContainer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.props;r._portalContainerNode=(0,i.default)(e.container,(0,l.default)(r).body)},r.getMountNode=function(){return r._portalContainerNode},p(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+h(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.setContainer(),this.forceUpdate(this.props.onRendered)},t.prototype.componentWillReceiveProps=function(e){e.container!==this.props.container&&this.setContainer(e)},t.prototype.componentWillUnmount=function(){this._portalContainerNode=null},t.prototype.render=function(){return this.props.children&&this._portalContainerNode?a.default.createPortal(this.props.children,this._portalContainerNode):null},t}(o.default.Component);d.displayName="Portal",d.propTypes={container:n.default.oneOfType([r.default,n.default.func]),onRendered:n.default.func},t.default=a.default.createPortal?d:s.default,e.exports=t.default});X(tt);var nt=Z(function(e,t){t.__esModule=!0;var n=o(Ce),r=o(u.a);function o(e){return e&&e.__esModule?e:{default:e}}var a={children:n.default.node},i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==h(t)&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+h(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){return this.props.children},t}(r.default.Component);i.propTypes=a,t.default=i,e.exports=t.default});X(nt);var rt=Z(function(e,t){t.__esModule=!0,t.default=function(e){var t=!document.addEventListener,n=void 0;t?(document.attachEvent("onfocusin",e),n=function(){return document.detachEvent("onfocusin",e)}):(document.addEventListener("focus",e,!0),n=function(){return document.removeEventListener("focus",e,!0)});return{remove:n}},e.exports=t.default});X(rt);var ot=Z(function(e,t){t.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=E(Fe),o=E(ee),a=E(J),i=E(Ce),l=E(Le),s=E(He),c=E(We),p=E(u.a),d=E(f.a),m=E(Be),y=E(Je),g=E(tt),v=E(nt),b=E(ke),w=E(rt),S=E(Ge),T=E(Ae);function E(e){return e&&e.__esModule?e:{default:e}}function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==h(t)&&"function"!=typeof t?e:t}var P=new y.default,_=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=O(this,e.call.apply(e,[this].concat(a))),C.call(r),O(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+h(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.omitProps=function(e,t){var n=Object.keys(e),r={};return n.map(function(n){Object.prototype.hasOwnProperty.call(t,n)||(r[n]=e[n])}),r},t.prototype.render=function(){var e=this.props,r=e.show,o=e.container,a=e.children,i=e.transition,l=e.backdrop,s=e.dialogTransitionTimeout,c=e.className,f=e.style,d=e.onExit,m=e.onExiting,h=e.onEnter,y=e.onEntering,b=e.onEntered,w=p.default.Children.only(a),S=this.omitProps(this.props,t.propTypes);if(!(r||i&&!this.state.exited))return null;var T=w.props,E=T.role,O=T.tabIndex;return void 0!==E&&void 0!==O||(w=(0,u.a.cloneElement)(w,{role:void 0===E?"document":E,tabIndex:null==O?"-1":O})),i&&(w=p.default.createElement(i,{transitionAppear:!0,unmountOnExit:!0,in:r,timeout:s,onExit:d,onExiting:m,onExited:this.handleHidden,onEnter:h,onEntering:y,onEntered:b},w)),p.default.createElement(g.default,{ref:this.setMountNode,container:o,onRendered:this.onPortalRendered},p.default.createElement("div",n({ref:this.setModalNodeRef,role:E||"dialog"},S,{style:f,className:c}),l&&this.renderBackdrop(),p.default.createElement(v.default,{ref:this.setDialogRef},w)))},t.prototype.componentWillReceiveProps=function(e){e.show?this.setState({exited:!1}):e.transition||this.setState({exited:!0})},t.prototype.componentWillUpdate=function(e){!this.props.show&&e.show&&this.checkForFocus()},t.prototype.componentDidMount=function(){this._isMounted=!0,this.props.show&&this.onShow()},t.prototype.componentDidUpdate=function(e){var t=this.props.transition;!e.show||this.props.show||t?!e.show&&this.props.show&&this.onShow():this.onHide()},t.prototype.componentWillUnmount=function(){var e=this.props,t=e.show,n=e.transition;this._isMounted=!1,(t||n&&!this.state.exited)&&this.onHide()},t.prototype.autoFocus=function(){if(this.props.autoFocus){var e=this.getDialogElement(),t=(0,r.default)((0,T.default)(this));e&&!(0,o.default)(e,t)&&(this.lastFocus=t,e.hasAttribute("tabIndex")||((0,m.default)(!1,'The modal content node does not accept focus. For the benefit of assistive technologies, the tabIndex of the node is being set to "-1".'),e.setAttribute("tabIndex",-1)),e.focus())}},t.prototype.restoreLastFocus=function(){this.lastFocus&&this.lastFocus.focus&&(this.lastFocus.focus(),this.lastFocus=null)},t.prototype.getDialogElement=function(){return d.default.findDOMNode(this.dialog)},t.prototype.isTopModal=function(){return this.props.manager.isTopModal(this)},t}(p.default.Component);_.propTypes=n({},g.default.propTypes,{show:i.default.bool,container:i.default.oneOfType([l.default,i.default.func]),onShow:i.default.func,onHide:i.default.func,backdrop:i.default.oneOfType([i.default.bool,i.default.oneOf(["static"])]),renderBackdrop:i.default.func,onEscapeKeyDown:i.default.func,onEscapeKeyUp:(0,s.default)(i.default.func,"Please use onEscapeKeyDown instead for consistency"),onBackdropClick:i.default.func,backdropStyle:i.default.object,backdropClassName:i.default.string,containerClassName:i.default.string,keyboard:i.default.bool,transition:c.default,dialogTransitionTimeout:i.default.number,backdropTransitionTimeout:i.default.number,autoFocus:i.default.bool,enforceFocus:i.default.bool,restoreFocus:i.default.bool,onEnter:i.default.func,onEntering:i.default.func,onEntered:i.default.func,onExit:i.default.func,onExiting:i.default.func,onExited:i.default.func,manager:i.default.object.isRequired}),_.defaultProps={show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,onHide:function(){},manager:P,renderBackdrop:function(e){return p.default.createElement("div",e)}};var C=function(){var e=this;this.state={exited:!this.props.show},this.renderBackdrop=function(){var t=e.props,n=t.backdropStyle,r=t.backdropClassName,o=t.renderBackdrop,a=t.transition,i=t.backdropTransitionTimeout,l=o({ref:function(t){return e.backdrop=t},style:n,className:r,onClick:e.handleBackdropClick});return a&&(l=p.default.createElement(a,{transitionAppear:!0,in:e.props.show,timeout:i},l)),l},this.onPortalRendered=function(){e.autoFocus(),e.props.onShow&&e.props.onShow()},this.onShow=function(){var t=(0,T.default)(e),n=(0,S.default)(e.props.container,t.body);e.props.manager.add(e,n,e.props.containerClassName),e._onDocumentKeydownListener=(0,b.default)(t,"keydown",e.handleDocumentKeyDown),e._onDocumentKeyupListener=(0,b.default)(t,"keyup",e.handleDocumentKeyUp),e._onFocusinListener=(0,w.default)(e.enforceFocus)},this.onHide=function(){e.props.manager.remove(e),e._onDocumentKeydownListener.remove(),e._onDocumentKeyupListener.remove(),e._onFocusinListener.remove(),e.props.restoreFocus&&e.restoreLastFocus()},this.setMountNode=function(t){e.mountNode=t?t.getMountNode():t},this.setModalNodeRef=function(t){e.modalNode=t},this.setDialogRef=function(t){e.dialog=t},this.handleHidden=function(){var t;(e.setState({exited:!0}),e.onHide(),e.props.onExited)&&(t=e.props).onExited.apply(t,arguments)},this.handleBackdropClick=function(t){t.target===t.currentTarget&&(e.props.onBackdropClick&&e.props.onBackdropClick(t),!0===e.props.backdrop&&e.props.onHide())},this.handleDocumentKeyDown=function(t){e.props.keyboard&&27===t.keyCode&&e.isTopModal()&&(e.props.onEscapeKeyDown&&e.props.onEscapeKeyDown(t),e.props.onHide())},this.handleDocumentKeyUp=function(t){e.props.keyboard&&27===t.keyCode&&e.isTopModal()&&e.props.onEscapeKeyUp&&e.props.onEscapeKeyUp(t)},this.checkForFocus=function(){a.default&&(e.lastFocus=(0,r.default)())},this.enforceFocus=function(){if(e.props.enforceFocus&&e._isMounted&&e.isTopModal()){var t=e.getDialogElement(),n=(0,r.default)((0,T.default)(e));t&&!(0,o.default)(t,n)&&t.focus()}}};_.Manager=y.default,t.default=_,e.exports=t.default});X(ot);var at=Z(function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t.apply(this,arguments)}e.exports=t}),it=Z(function(e,t){t.__esModule=!0,t.default=function(e,t){var r=(0,n.default)(e);if(void 0===t)return r?"pageXOffset"in r?r.pageXOffset:r.document.documentElement.scrollLeft:e.scrollLeft;r?r.scrollTo(t,"pageYOffset"in r?r.pageYOffset:r.document.documentElement.scrollTop):e.scrollLeft=t};var n=$(te);e.exports=t.default});X(it);var lt=Z(function(e,t){t.__esModule=!0,t.default=function(e,t){var u,s={top:0,left:0};"fixed"===(0,l.default)(e,"position")?u=e.getBoundingClientRect():(t=t||(0,o.default)(e),u=(0,r.default)(e),"html"!==function(e){return e.nodeName&&e.nodeName.toLowerCase()}(t)&&(s=(0,r.default)(t)),s.top+=parseInt((0,l.default)(t,"borderTopWidth"),10)-(0,a.default)(t)||0,s.left+=parseInt((0,l.default)(t,"borderLeftWidth"),10)-(0,i.default)(t)||0);return(0,n.default)({},u,{top:u.top-s.top-(parseInt((0,l.default)(e,"marginTop"),10)||0),left:u.left-s.left-(parseInt((0,l.default)(e,"marginLeft"),10)||0)})};var n=$(at),r=$(re),o=$(me),a=$(he),i=$(it),l=$(de);e.exports=t.default});X(lt);var ut=Z(function(e,t){t.__esModule=!0,t.default=function(e,t,o,a,i){var u="BODY"===a.tagName?(0,n.default)(o):(0,r.default)(o,a),s=(0,n.default)(t),c=s.height,p=s.width,f=void 0,d=void 0,m=void 0,h=void 0;if("left"===e||"right"===e){d=u.top+(u.height-c)/2,f="left"===e?u.left-p:u.left+u.width;var y=function(e,t,n,r){var o=l(n),a=o.scroll,i=o.height,u=e-r-a,s=e+r-a+t;return u<0?-u:s>i?i-s:0}(d,c,a,i);d+=y,h=50*(1-2*y/c)+"%",m=void 0}else{if("top"!==e&&"bottom"!==e)throw new Error('calcOverlayPosition(): No such placement of "'+e+'" found.');f=u.left+(u.width-p)/2,d="top"===e?u.top-c:u.top+u.height;var g=function(e,t,n,r){var o=l(n).width,a=e-r,i=e+r+t;if(a<0)return-a;if(i>o)return o-i;return 0}(f,p,a,i);f+=g,m=50*(1-2*g/p)+"%",h=void 0}return{positionLeft:f,positionTop:d,arrowOffsetLeft:m,arrowOffsetTop:h}};var n=i(re),r=i(lt),o=i(he),a=i(Ae);function i(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=void 0,r=void 0,i=void 0;if("BODY"===e.tagName)t=window.innerWidth,r=window.innerHeight,i=(0,o.default)((0,a.default)(e).documentElement)||(0,o.default)(e);else{var l=(0,n.default)(e);t=l.width,r=l.height,i=(0,o.default)(e)}return{width:t,height:r,scroll:i}}e.exports=t.default});X(ut);var st=Z(function(e,t){t.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=d(Q),o=d(Ce),a=d(Le),i=d(u.a),l=d(f.a),s=d(ut),c=d(Ge),p=d(Ae);function d(e){return e&&e.__esModule?e:{default:e}}function m(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var y=function(e){function t(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==h(t)&&"function"!=typeof t?e:t}(this,e.call(this,n,r));return o.getTarget=function(){var e=o.props.target,t="function"==typeof e?e():e;return t&&l.default.findDOMNode(t)||null},o.maybeUpdatePosition=function(e){var t=o.getTarget();(o.props.shouldUpdatePosition||t!==o._lastTarget||e)&&o.updatePosition(t)},o.state={positionLeft:0,positionTop:0,arrowOffsetLeft:null,arrowOffsetTop:null},o._needsFlush=!1,o._lastTarget=null,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+h(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.updatePosition(this.getTarget())},t.prototype.componentWillReceiveProps=function(){this._needsFlush=!0},t.prototype.componentDidUpdate=function(e){this._needsFlush&&(this._needsFlush=!1,this.maybeUpdatePosition(this.props.placement!==e.placement))},t.prototype.render=function(){var e=this.props,t=e.children,o=e.className,a=m(e,["children","className"]),l=this.state,s=l.positionLeft,c=l.positionTop,p=m(l,["positionLeft","positionTop"]);delete a.target,delete a.container,delete a.containerPadding,delete a.shouldUpdatePosition;var f=i.default.Children.only(t);return(0,u.a.cloneElement)(f,n({},a,p,{positionLeft:s,positionTop:c,className:(0,r.default)(o,f.props.className),style:n({},f.props.style,{left:s,top:c})}))},t.prototype.updatePosition=function(e){if(this._lastTarget=e,e){var t=l.default.findDOMNode(this),n=(0,c.default)(this.props.container,(0,p.default)(this).body);this.setState((0,s.default)(this.props.placement,t,e,n,this.props.containerPadding))}else this.setState({positionLeft:0,positionTop:0,arrowOffsetLeft:null,arrowOffsetTop:null})},t}(i.default.Component);y.propTypes={target:o.default.oneOfType([a.default,o.default.func]),container:o.default.oneOfType([a.default,o.default.func]),containerPadding:o.default.number,placement:o.default.oneOf(["top","right","bottom","left"]),shouldUpdatePosition:o.default.bool},y.displayName="Position",y.defaultProps={containerPadding:0,placement:"right",shouldUpdatePosition:!1},t.default=y,e.exports=t.default});X(st);var ct=Z(function(e,t){t.__esModule=!0;var n=s(ee),r=s(Ce),o=s(u.a),a=s(f.a),i=s(ke),l=s(Ae);function s(e){return e&&e.__esModule?e:{default:e}}var c=27;var p=function(e){function t(r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==h(t)&&"function"!=typeof t?e:t}(this,e.call(this,r,o));return u.addEventListeners=function(){var e=u.props.event,t=(0,l.default)(u);u.documentMouseCaptureListener=(0,i.default)(t,e,u.handleMouseCapture,!0),u.documentMouseListener=(0,i.default)(t,e,u.handleMouse),u.documentKeyupListener=(0,i.default)(t,"keyup",u.handleKeyUp)},u.removeEventListeners=function(){u.documentMouseCaptureListener&&u.documentMouseCaptureListener.remove(),u.documentMouseListener&&u.documentMouseListener.remove(),u.documentKeyupListener&&u.documentKeyupListener.remove()},u.handleMouseCapture=function(e){var t;u.preventMouseRootClose=!!((t=e).metaKey||t.altKey||t.ctrlKey||t.shiftKey)||!function(e){return 0===e.button}(e)||(0,n.default)(a.default.findDOMNode(u),e.target)},u.handleMouse=function(e){!u.preventMouseRootClose&&u.props.onRootClose&&u.props.onRootClose(e)},u.handleKeyUp=function(e){e.keyCode===c&&u.props.onRootClose&&u.props.onRootClose(e)},u.preventMouseRootClose=!1,u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+h(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.props.disabled||this.addEventListeners()},t.prototype.componentDidUpdate=function(e){!this.props.disabled&&e.disabled?this.addEventListeners():this.props.disabled&&!e.disabled&&this.removeEventListeners()},t.prototype.componentWillUnmount=function(){this.props.disabled||this.removeEventListeners()},t.prototype.render=function(){return this.props.children},t}(o.default.Component);p.displayName="RootCloseWrapper",p.propTypes={onRootClose:r.default.func,children:r.default.element,disabled:r.default.bool,event:r.default.oneOf(["click","mousedown"])},p.defaultProps={event:"click"},t.default=p,e.exports=t.default});X(ct);var pt=Z(function(e,t){t.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=c(Ce),o=c(We),a=c(u.a),i=c(tt),l=c(st),s=c(ct);function c(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==h(t)&&"function"!=typeof t?e:t}(this,e.call(this,n,r));return o.handleHidden=function(){var e;(o.setState({exited:!0}),o.props.onExited)&&(e=o.props).onExited.apply(e,arguments)},o.state={exited:!n.show},o.onHiddenListener=o.handleHidden.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+h(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillReceiveProps=function(e){e.show?this.setState({exited:!1}):e.transition||this.setState({exited:!0})},t.prototype.render=function(){var e=this.props,t=e.container,n=e.containerPadding,r=e.target,o=e.placement,u=e.shouldUpdatePosition,c=e.rootClose,p=e.children,f=e.transition,d=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["container","containerPadding","target","placement","shouldUpdatePosition","rootClose","children","transition"]);if(!(d.show||f&&!this.state.exited))return null;var m=p;if(m=a.default.createElement(l.default,{container:t,containerPadding:n,target:r,placement:o,shouldUpdatePosition:u},m),f){var h=d.onExit,y=d.onExiting,g=d.onEnter,v=d.onEntering,b=d.onEntered;m=a.default.createElement(f,{in:d.show,transitionAppear:!0,onExit:h,onExiting:y,onExited:this.onHiddenListener,onEnter:g,onEntering:v,onEntered:b},m)}return c&&(m=a.default.createElement(s.default,{onRootClose:d.onHide},m)),a.default.createElement(i.default,{container:t},m)},t}(a.default.Component);p.propTypes=n({},i.default.propTypes,l.default.propTypes,{show:r.default.bool,rootClose:r.default.bool,onHide:function(e){var t=r.default.func;e.rootClose&&(t=t.isRequired);for(var n=arguments.length,o=Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];return t.apply(void 0,[e].concat(o))},transition:o.default,onEnter:r.default.func,onEntering:r.default.func,onEntered:r.default.func,onExit:r.default.func,onExiting:r.default.func,onExited:r.default.func}),t.default=p,e.exports=t.default});X(pt);var ft=Z(function(e,t){t.__esModule=!0,t.EXITING=t.ENTERED=t.ENTERING=t.EXITED=t.UNMOUNTED=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=c(Q),o=c(xe),a=c(pe),i=c(Ce),l=c(u.a),s=c(f.a);function c(e){return e&&e.__esModule?e:{default:e}}var p=a.default.end,d=t.UNMOUNTED=0,m=t.EXITED=1,y=t.ENTERING=2,g=t.ENTERED=3,v=t.EXITING=4,b=function(e){function t(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==h(t)&&"function"!=typeof t?e:t}(this,e.call(this,n,r));a.updateStatus=function(){if(null!==a.nextStatus){a.cancelNextCallback();var e=s.default.findDOMNode(a);a.nextStatus===y?(a.props.onEnter(e),a.safeSetState({status:y},function(){a.props.onEntering(e),a.onTransitionEnd(e,function(){a.safeSetState({status:g},function(){a.props.onEntered(e)})})})):(a.props.onExit(e),a.safeSetState({status:v},function(){a.props.onExiting(e),a.onTransitionEnd(e,function(){a.safeSetState({status:m},function(){a.props.onExited(e)})})})),a.nextStatus=null}else a.props.unmountOnExit&&a.state.status===m&&a.setState({status:d})},a.cancelNextCallback=function(){null!==a.nextCallback&&(a.nextCallback.cancel(),a.nextCallback=null)},a.safeSetState=function(e,t){a.setState(e,a.setNextCallback(t))},a.setNextCallback=function(e){var t=!0;return a.nextCallback=function(n){t&&(t=!1,a.nextCallback=null,e(n))},a.nextCallback.cancel=function(){t=!1},a.nextCallback},a.onTransitionEnd=function(e,t){a.setNextCallback(t),e?((0,o.default)(e,p,a.nextCallback),setTimeout(a.nextCallback,a.props.timeout)):setTimeout(a.nextCallback,0)};var i=void 0;return a.nextStatus=null,n.in?n.transitionAppear?(i=m,a.nextStatus=y):i=g:i=n.unmountOnExit||n.mountOnEnter?d:m,a.state={status:i},a.nextCallback=null,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+h(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.updateStatus()},t.prototype.componentWillReceiveProps=function(e){var t=this.state.status;e.in?(t===d&&this.setState({status:m}),t!==y&&t!==g&&(this.nextStatus=y)):t!==y&&t!==g||(this.nextStatus=v)},t.prototype.componentDidUpdate=function(){this.updateStatus()},t.prototype.componentWillUnmount=function(){this.cancelNextCallback()},t.prototype.render=function(){var e=this.state.status;if(e===d)return null;var o=this.props,a=o.children,i=o.className,u=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(o,["children","className"]);Object.keys(t.propTypes).forEach(function(e){return delete u[e]});var s=void 0;e===m?s=this.props.exitedClassName:e===y?s=this.props.enteringClassName:e===g?s=this.props.enteredClassName:e===v&&(s=this.props.exitingClassName);var c=l.default.Children.only(a);return l.default.cloneElement(c,n({},u,{className:(0,r.default)(c.props.className,i,s)}))},t}(l.default.Component);function w(){}b.propTypes={in:i.default.bool,mountOnEnter:i.default.bool,unmountOnExit:i.default.bool,transitionAppear:i.default.bool,timeout:i.default.number,exitedClassName:i.default.string,exitingClassName:i.default.string,enteredClassName:i.default.string,enteringClassName:i.default.string,onEnter:i.default.func,onEntering:i.default.func,onEntered:i.default.func,onExit:i.default.func,onExiting:i.default.func,onExited:i.default.func},b.displayName="Transition",b.defaultProps={in:!1,unmountOnExit:!1,transitionAppear:!1,timeout:5e3,onEnter:w,onEntering:w,onEntered:w,onExit:w,onExiting:w,onExited:w},t.default=b});X(ft);ft.EXITING,ft.ENTERED,ft.ENTERING,ft.EXITED,ft.UNMOUNTED;var dt=Z(function(e,t){t.__esModule=!0,t.RootCloseWrapper=t.Transition=t.Position=t.Portal=t.Overlay=t.Modal=t.AutoAffix=t.Affix=void 0;var n=c(Re),r=c(Ve),o=c(ot),a=c(pt),i=c(tt),l=c(st),u=c(ft),s=c(ct);function c(e){return e&&e.__esModule?e:{default:e}}t.Affix=n.default,t.AutoAffix=r.default,t.Modal=o.default,t.Overlay=a.default,t.Portal=i.default,t.Position=l.default,t.Transition=u.default,t.RootCloseWrapper=s.default});X(dt);dt.RootCloseWrapper,dt.Transition,dt.Position;var mt=dt.Portal,ht=(dt.Overlay,dt.Modal,dt.AutoAffix,dt.Affix,function(e){var t=e.store,n=e.specification,r=e.width,o=e.y,a=e.handleTrackHover,i=e.disableHover;return Object(l.createElement)("g",{className:Q("tl-track",{"tl-hover-disabled":i}),transform:"translate(0 "+o+")",onMouseEnter:a,onMouseLeave:a},Object(l.createElement)("rect",{className:"tl-track-highlight "+O,x:0,y:0,height:n.height(t),width:r}),n.renderTrack(t),Object(l.createElement)("line",{x1:0,x2:r,y1:n.height(t)-.5,y2:n.height(t)-.5,stroke:"#eee",strokeWidth:1,strokeDasharray:"3,2"}))}),yt=20,gt={fontSize:9,fontFamily:"Arial",textAnchor:"middle"};var vt="#ccc",bt=Object(s.observer)(function(e){var t=e.store,n=e.width;return u.a.createElement(u.a.Fragment,null,u.a.createElement("g",null,u.a.createElement("rect",{transform:"translate(0 "+(yt-1)+")",fill:vt,height:1,width:n}),t.ticks.map(function(e,n){var r,o=null;r=e===t.firstTick?e.end-t.tickInterval+1:e.start;var a,i=t.getPosition({start:r}),l=i?"translate("+i.pixelLeft+" 0)":void 0,s=[];if(e.isTrim)a=t.toggleExpandedTrims,o=u.a.createElement("g",{transform:"translate(-6 "+(yt-6)+")"},u.a.createElement("rect",{y:5,height:1,width:20,fill:"#ffffff"}),u.a.createElement("rect",{y:0,height:10,width:20,fillOpacity:0,style:{cursor:"pointer"},onClick:a}),u.a.createElement("path",{d:["M0,5","L2.5,8","L5,0","L7.5,10","L10,0","L12.5,10","L15,0","L17.5,8","L20,5"].join(""),stroke:vt,strokeWidth:"1",fill:"none",pointerEvents:"none"}));else{var c=r/t.tickInterval,p=t.tickInterval===g.MONTH?"m":"y",f="";if(c<0&&(f=""+c+p),0===c&&(f="0"),c>0&&(f=""+c+p),o=u.a.createElement(u.a.Fragment,null,u.a.createElement("text",{dy:"1em",style:v({fill:"#333"},gt)},f),u.a.createElement("rect",{height:6,width:1,transform:"translate(0 "+(yt-6)+")",fill:"#aaa"})),t.tickPixelWidth>150)for(var d=g.MONTH,m=1;m<12;m++){var h=t.getPosition({start:r+d*m}),y=h?"translate("+h.pixelLeft+" 0)":void 0,b="",w=!1;if(t.tickPixelWidth>150&&(m%4==0&&(w=!0),t.tickPixelWidth>700&&(w=!0)),w){var S=m;c<0?(S=12-m,f=c+1===0?"":""+(c+1)+p,b=-1===c?"-"+S+"m":f+" "+S+"m"):b=0===c?S+"m":f+" "+S+"m"}y&&s.push(u.a.createElement("g",{transform:y},u.a.createElement("text",{dy:"1.5em",style:v({fill:"#aaa"},gt)},b),u.a.createElement("rect",{height:3,width:1,transform:"translate(0 "+(yt-3)+")",fill:"#aaa"})))}}var T=n>0&&t.ticks[n-1].isTrim;return u.a.createElement(u.a.Fragment,null,!T&&l&&u.a.createElement("g",{transform:l},o),s)})))}),wt=Object(s.observer)(function(e){var t=e.store,n=e.width,r=e.handleTrackHover,o=e.customTracks,a=e.visibleTracks,i=t.data,l=0;return u.a.createElement(u.a.Fragment,null,u.a.createElement("g",{transform:"translate(0 "+yt+")"},i.map(function(e){var o=void 0===a||a.includes(e.track.type),i=l;return l+=o?e.height:0,o?u.a.createElement(W,{limit:t.trimmedLimit,trackData:e.track,getPosition:t.getPosition,handleTrackHover:r,store:t,y:i,height:e.height,width:n}):null}),o&&o.map(function(e){var o=l;return l+=e.height(t),u.a.createElement(ht,{store:t,specification:e,handleTrackHover:r,width:n,y:o,disableHover:e.disableHover})})),t.tooltipModels.map(function(e){var r=e[0],o=e[1],a=o.position||t.mousePosition,i=a.x>n/2;return u.a.createElement(mt,{container:document.body},u.a.createElement(d.Popover,{arrowOffsetTop:17,placement:i?"left":"right",style:{transform:i?"translate(-100%, 0)":""},className:"tl-timeline-tooltip cbioTooltip",positionLeft:a.x+(i?-10:10),positionTop:a.y-17},t.getTooltipContent(r,o)))}))}),St=Z(function(e){
/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */
var t,n;t="undefined"!=typeof window?window:Y,n=function(e,t){var n=[],r=e.document,o=Object.getPrototypeOf,a=n.slice,i=n.concat,l=n.push,u=n.indexOf,s={},c=s.toString,p=s.hasOwnProperty,f=p.toString,d=f.call(Object),m={},y=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},g=function(e){return null!=e&&e===e.window},v={type:!0,src:!0,noModule:!0};function b(e,t,n){var o,a=(t=t||r).createElement("script");if(a.text=e,n)for(o in v)n[o]&&(a[o]=n[o]);t.head.appendChild(a).parentNode.removeChild(a)}function w(e){return null==e?e+"":"object"===h(e)||"function"==typeof e?s[c.call(e)]||"object":h(e)}var S=function e(t,n){return new e.fn.init(t,n)},T=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function E(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!y(e)&&!g(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}S.fn=S.prototype={jquery:"3.3.1",constructor:S,length:0,toArray:function(){return a.call(this)},get:function(e){return null==e?a.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(e){return this.pushStack(S.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:n.sort,splice:n.splice},S.extend=S.fn.extend=function(){var e,t,n,r,o,a,i=arguments[0]||{},l=1,u=arguments.length,s=!1;for("boolean"==typeof i&&(s=i,i=arguments[l]||{},l++),"object"===h(i)||y(i)||(i={}),l===u&&(i=this,l--);l<u;l++)if(null!=(e=arguments[l]))for(t in e)n=i[t],i!==(r=e[t])&&(s&&r&&(S.isPlainObject(r)||(o=Array.isArray(r)))?(o?(o=!1,a=n&&Array.isArray(n)?n:[]):a=n&&S.isPlainObject(n)?n:{},i[t]=S.extend(s,a,r)):void 0!==r&&(i[t]=r));return i},S.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==c.call(e))&&(!(t=o(e))||"function"==typeof(n=p.call(t,"constructor")&&t.constructor)&&f.call(n)===d)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){b(e)},each:function(e,t){var n,r=0;if(E(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(T,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(E(Object(e))?S.merge(n,"string"==typeof e?[e]:e):l.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:u.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,o=e.length;r<n;r++)e[o++]=t[r];return e.length=o,e},grep:function(e,t,n){for(var r=[],o=0,a=e.length,i=!n;o<a;o++)!t(e[o],o)!==i&&r.push(e[o]);return r},map:function(e,t,n){var r,o,a=0,l=[];if(E(e))for(r=e.length;a<r;a++)null!=(o=t(e[a],a,n))&&l.push(o);else for(a in e)null!=(o=t(e[a],a,n))&&l.push(o);return i.apply([],l)},guid:1,support:m}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=n[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){s["[object "+t+"]"]=t.toLowerCase()});var O=
/*!
 * Sizzle CSS Selector Engine v2.3.3
 * https://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-08-08
 */
function(e){var t,n,r,o,a,i,l,u,s,c,p,f,d,m,h,y,g,v,b,w="sizzle"+1*new Date,S=e.document,T=0,E=0,O=ie(),P=ie(),_=ie(),C=function(e,t){return e===t&&(p=!0),0},x={}.hasOwnProperty,I=[],k=I.pop,M=I.push,A=I.push,D=I.slice,j=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",N="[\\x20\\t\\r\\n\\f]",L="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",G="\\["+N+"*("+L+")(?:"+N+"*([*^$|!~]?=)"+N+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+L+"))|)"+N+"*\\]",V=":("+L+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+G+")*)|.*)\\)|)",F=new RegExp(N+"+","g"),U=new RegExp("^"+N+"+|((?:^|[^\\\\])(?:\\\\.)*)"+N+"+$","g"),B=new RegExp("^"+N+"*,"+N+"*"),H=new RegExp("^"+N+"*([>+~]|"+N+")"+N+"*"),W=new RegExp("="+N+"*([^\\]'\"]*?)"+N+"*\\]","g"),q=new RegExp(V),z=new RegExp("^"+L+"$"),K={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L+"|[*])"),ATTR:new RegExp("^"+G),PSEUDO:new RegExp("^"+V),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+N+"*(even|odd|(([+-]|)(\\d*)n|)"+N+"*(?:([+-]|)"+N+"*(\\d+)|))"+N+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+N+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+N+"*((?:-\\d)?\\d*)"+N+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,$=/[+~]/,J=new RegExp("\\\\([\\da-f]{1,6}"+N+"?|("+N+")|.)","ig"),ee=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ne=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},re=function(){f()},oe=ve(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{A.apply(I=D.call(S.childNodes),S.childNodes),I[S.childNodes.length].nodeType}catch(e){A={apply:I.length?function(e,t){M.apply(e,D.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function ae(e,t,r,o){var a,l,s,c,p,m,g,v=t&&t.ownerDocument,T=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==T&&9!==T&&11!==T)return r;if(!o&&((t?t.ownerDocument||t:S)!==d&&f(t),t=t||d,h)){if(11!==T&&(p=Q.exec(e)))if(a=p[1]){if(9===T){if(!(s=t.getElementById(a)))return r;if(s.id===a)return r.push(s),r}else if(v&&(s=v.getElementById(a))&&b(t,s)&&s.id===a)return r.push(s),r}else{if(p[2])return A.apply(r,t.getElementsByTagName(e)),r;if((a=p[3])&&n.getElementsByClassName&&t.getElementsByClassName)return A.apply(r,t.getElementsByClassName(a)),r}if(n.qsa&&!_[e+" "]&&(!y||!y.test(e))){if(1!==T)v=t,g=e;else if("object"!==t.nodeName.toLowerCase()){for((c=t.getAttribute("id"))?c=c.replace(te,ne):t.setAttribute("id",c=w),l=(m=i(e)).length;l--;)m[l]="#"+c+" "+ge(m[l]);g=m.join(","),v=$.test(e)&&he(t.parentNode)||t}if(g)try{return A.apply(r,v.querySelectorAll(g)),r}catch(e){}finally{c===w&&t.removeAttribute("id")}}}return u(e.replace(U,"$1"),t,r,o)}function ie(){var e=[];return function t(n,o){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=o}}function le(e){return e[w]=!0,e}function ue(e){var t=d.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function se(e,t){for(var n=e.split("|"),o=n.length;o--;)r.attrHandle[n[o]]=t}function ce(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function pe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function fe(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function de(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&oe(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function me(e){return le(function(t){return t=+t,le(function(n,r){for(var o,a=e([],n.length,t),i=a.length;i--;)n[o=a[i]]&&(n[o]=!(r[o]=n[o]))})})}function he(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=ae.support={},a=ae.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},f=ae.setDocument=function(e){var t,o,i=e?e.ownerDocument||e:S;return i!==d&&9===i.nodeType&&i.documentElement?(m=(d=i).documentElement,h=!a(d),S!==d&&(o=d.defaultView)&&o.top!==o&&(o.addEventListener?o.addEventListener("unload",re,!1):o.attachEvent&&o.attachEvent("onunload",re)),n.attributes=ue(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ue(function(e){return e.appendChild(d.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Z.test(d.getElementsByClassName),n.getById=ue(function(e){return m.appendChild(e).id=w,!d.getElementsByName||!d.getElementsByName(w).length}),n.getById?(r.filter.ID=function(e){var t=e.replace(J,ee);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&h){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(J,ee);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&h){var n,r,o,a=t.getElementById(e);if(a){if((n=a.getAttributeNode("id"))&&n.value===e)return[a];for(o=t.getElementsByName(e),r=0;a=o[r++];)if((n=a.getAttributeNode("id"))&&n.value===e)return[a]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],o=0,a=t.getElementsByTagName(e);if("*"===e){for(;n=a[o++];)1===n.nodeType&&r.push(n);return r}return a},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&h)return t.getElementsByClassName(e)},g=[],y=[],(n.qsa=Z.test(d.querySelectorAll))&&(ue(function(e){m.appendChild(e).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&y.push("[*^$]="+N+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||y.push("\\["+N+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+w+"-]").length||y.push("~="),e.querySelectorAll(":checked").length||y.push(":checked"),e.querySelectorAll("a#"+w+"+*").length||y.push(".#.+[+~]")}),ue(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=d.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&y.push("name"+N+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&y.push(":enabled",":disabled"),m.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&y.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),y.push(",.*:")})),(n.matchesSelector=Z.test(v=m.matches||m.webkitMatchesSelector||m.mozMatchesSelector||m.oMatchesSelector||m.msMatchesSelector))&&ue(function(e){n.disconnectedMatch=v.call(e,"*"),v.call(e,"[s!='']:x"),g.push("!=",V)}),y=y.length&&new RegExp(y.join("|")),g=g.length&&new RegExp(g.join("|")),t=Z.test(m.compareDocumentPosition),b=t||Z.test(m.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},C=t?function(e,t){if(e===t)return p=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===d||e.ownerDocument===S&&b(S,e)?-1:t===d||t.ownerDocument===S&&b(S,t)?1:c?j(c,e)-j(c,t):0:4&r?-1:1)}:function(e,t){if(e===t)return p=!0,0;var n,r=0,o=e.parentNode,a=t.parentNode,i=[e],l=[t];if(!o||!a)return e===d?-1:t===d?1:o?-1:a?1:c?j(c,e)-j(c,t):0;if(o===a)return ce(e,t);for(n=e;n=n.parentNode;)i.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;i[r]===l[r];)r++;return r?ce(i[r],l[r]):i[r]===S?-1:l[r]===S?1:0},d):d},ae.matches=function(e,t){return ae(e,null,null,t)},ae.matchesSelector=function(e,t){if((e.ownerDocument||e)!==d&&f(e),t=t.replace(W,"='$1']"),n.matchesSelector&&h&&!_[t+" "]&&(!g||!g.test(t))&&(!y||!y.test(t)))try{var r=v.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return ae(t,d,null,[e]).length>0},ae.contains=function(e,t){return(e.ownerDocument||e)!==d&&f(e),b(e,t)},ae.attr=function(e,t){(e.ownerDocument||e)!==d&&f(e);var o=r.attrHandle[t.toLowerCase()],a=o&&x.call(r.attrHandle,t.toLowerCase())?o(e,t,!h):void 0;return void 0!==a?a:n.attributes||!h?e.getAttribute(t):(a=e.getAttributeNode(t))&&a.specified?a.value:null},ae.escape=function(e){return(e+"").replace(te,ne)},ae.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ae.uniqueSort=function(e){var t,r=[],o=0,a=0;if(p=!n.detectDuplicates,c=!n.sortStable&&e.slice(0),e.sort(C),p){for(;t=e[a++];)t===e[a]&&(o=r.push(a));for(;o--;)e.splice(r[o],1)}return c=null,e},o=ae.getText=function(e){var t,n="",r=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[r++];)n+=o(t);return n},(r=ae.selectors={cacheLength:50,createPseudo:le,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(J,ee),e[3]=(e[3]||e[4]||e[5]||"").replace(J,ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ae.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ae.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return K.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&q.test(n)&&(t=i(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(J,ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=O[e+" "];return t||(t=new RegExp("(^|"+N+")"+e+"("+N+"|$)"))&&O(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var o=ae.attr(r,e);return null==o?"!="===t:!t||(o+="","="===t?o===n:"!="===t?o!==n:"^="===t?n&&0===o.indexOf(n):"*="===t?n&&o.indexOf(n)>-1:"$="===t?n&&o.slice(-n.length)===n:"~="===t?(" "+o.replace(F," ")+" ").indexOf(n)>-1:"|="===t&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,o){var a="nth"!==e.slice(0,3),i="last"!==e.slice(-4),l="of-type"===t;return 1===r&&0===o?function(e){return!!e.parentNode}:function(t,n,u){var s,c,p,f,d,m,h=a!==i?"nextSibling":"previousSibling",y=t.parentNode,g=l&&t.nodeName.toLowerCase(),v=!u&&!l,b=!1;if(y){if(a){for(;h;){for(f=t;f=f[h];)if(l?f.nodeName.toLowerCase()===g:1===f.nodeType)return!1;m=h="only"===e&&!m&&"nextSibling"}return!0}if(m=[i?y.firstChild:y.lastChild],i&&v){for(b=(d=(s=(c=(p=(f=y)[w]||(f[w]={}))[f.uniqueID]||(p[f.uniqueID]={}))[e]||[])[0]===T&&s[1])&&s[2],f=d&&y.childNodes[d];f=++d&&f&&f[h]||(b=d=0)||m.pop();)if(1===f.nodeType&&++b&&f===t){c[e]=[T,d,b];break}}else if(v&&(b=d=(s=(c=(p=(f=t)[w]||(f[w]={}))[f.uniqueID]||(p[f.uniqueID]={}))[e]||[])[0]===T&&s[1]),!1===b)for(;(f=++d&&f&&f[h]||(b=d=0)||m.pop())&&((l?f.nodeName.toLowerCase()!==g:1!==f.nodeType)||!++b||(v&&((c=(p=f[w]||(f[w]={}))[f.uniqueID]||(p[f.uniqueID]={}))[e]=[T,b]),f!==t)););return(b-=o)===r||b%r==0&&b/r>=0}}},PSEUDO:function(e,t){var n,o=r.pseudos[e]||r.setFilters[e.toLowerCase()]||ae.error("unsupported pseudo: "+e);return o[w]?o(t):o.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,n){for(var r,a=o(e,t),i=a.length;i--;)e[r=j(e,a[i])]=!(n[r]=a[i])}):function(e){return o(e,0,n)}):o}},pseudos:{not:le(function(e){var t=[],n=[],r=l(e.replace(U,"$1"));return r[w]?le(function(e,t,n,o){for(var a,i=r(e,null,o,[]),l=e.length;l--;)(a=i[l])&&(e[l]=!(t[l]=a))}):function(e,o,a){return t[0]=e,r(t,null,a,n),t[0]=null,!n.pop()}}),has:le(function(e){return function(t){return ae(e,t).length>0}}),contains:le(function(e){return e=e.replace(J,ee),function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),lang:le(function(e){return z.test(e||"")||ae.error("unsupported lang: "+e),e=e.replace(J,ee).toLowerCase(),function(t){var n;do{if(n=h?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===m},focus:function(e){return e===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:de(!1),disabled:de(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return X.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:me(function(){return[0]}),last:me(function(e,t){return[t-1]}),eq:me(function(e,t,n){return[n<0?n+t:n]}),even:me(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:me(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:me(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:me(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=pe(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=fe(t);function ye(){}function ge(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function ve(e,t,n){var r=t.dir,o=t.next,a=o||r,i=n&&"parentNode"===a,l=E++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o);return!1}:function(t,n,u){var s,c,p,f=[T,l];if(u){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,u))return!0}else for(;t=t[r];)if(1===t.nodeType||i)if(c=(p=t[w]||(t[w]={}))[t.uniqueID]||(p[t.uniqueID]={}),o&&o===t.nodeName.toLowerCase())t=t[r]||t;else{if((s=c[a])&&s[0]===T&&s[1]===l)return f[2]=s[2];if(c[a]=f,f[2]=e(t,n,u))return!0}return!1}}function be(e){return e.length>1?function(t,n,r){for(var o=e.length;o--;)if(!e[o](t,n,r))return!1;return!0}:e[0]}function we(e,t,n,r,o){for(var a,i=[],l=0,u=e.length,s=null!=t;l<u;l++)(a=e[l])&&(n&&!n(a,r,o)||(i.push(a),s&&t.push(l)));return i}function Se(e,t,n,r,o,a){return r&&!r[w]&&(r=Se(r)),o&&!o[w]&&(o=Se(o,a)),le(function(a,i,l,u){var s,c,p,f=[],d=[],m=i.length,h=a||function(e,t,n){for(var r=0,o=t.length;r<o;r++)ae(e,t[r],n);return n}(t||"*",l.nodeType?[l]:l,[]),y=!e||!a&&t?h:we(h,f,e,l,u),g=n?o||(a?e:m||r)?[]:i:y;if(n&&n(y,g,l,u),r)for(s=we(g,d),r(s,[],l,u),c=s.length;c--;)(p=s[c])&&(g[d[c]]=!(y[d[c]]=p));if(a){if(o||e){if(o){for(s=[],c=g.length;c--;)(p=g[c])&&s.push(y[c]=p);o(null,g=[],s,u)}for(c=g.length;c--;)(p=g[c])&&(s=o?j(a,p):f[c])>-1&&(a[s]=!(i[s]=p))}}else g=we(g===i?g.splice(m,g.length):g),o?o(null,i,g,u):A.apply(i,g)})}function Te(e){for(var t,n,o,a=e.length,i=r.relative[e[0].type],l=i||r.relative[" "],u=i?1:0,c=ve(function(e){return e===t},l,!0),p=ve(function(e){return j(t,e)>-1},l,!0),f=[function(e,n,r){var o=!i&&(r||n!==s)||((t=n).nodeType?c(e,n,r):p(e,n,r));return t=null,o}];u<a;u++)if(n=r.relative[e[u].type])f=[ve(be(f),n)];else{if((n=r.filter[e[u].type].apply(null,e[u].matches))[w]){for(o=++u;o<a&&!r.relative[e[o].type];o++);return Se(u>1&&be(f),u>1&&ge(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(U,"$1"),n,u<o&&Te(e.slice(u,o)),o<a&&Te(e=e.slice(o)),o<a&&ge(e))}f.push(n)}return be(f)}return ye.prototype=r.filters=r.pseudos,r.setFilters=new ye,i=ae.tokenize=function(e,t){var n,o,a,i,l,u,s,c=P[e+" "];if(c)return t?0:c.slice(0);for(l=e,u=[],s=r.preFilter;l;){for(i in n&&!(o=B.exec(l))||(o&&(l=l.slice(o[0].length)||l),u.push(a=[])),n=!1,(o=H.exec(l))&&(n=o.shift(),a.push({value:n,type:o[0].replace(U," ")}),l=l.slice(n.length)),r.filter)!(o=K[i].exec(l))||s[i]&&!(o=s[i](o))||(n=o.shift(),a.push({value:n,type:i,matches:o}),l=l.slice(n.length));if(!n)break}return t?l.length:l?ae.error(e):P(e,u).slice(0)},l=ae.compile=function(e,t){var n,o=[],a=[],l=_[e+" "];if(!l){for(t||(t=i(e)),n=t.length;n--;)(l=Te(t[n]))[w]?o.push(l):a.push(l);(l=_(e,function(e,t){var n=t.length>0,o=e.length>0,a=function(a,i,l,u,c){var p,m,y,g=0,v="0",b=a&&[],w=[],S=s,E=a||o&&r.find.TAG("*",c),O=T+=null==S?1:Math.random()||.1,P=E.length;for(c&&(s=i===d||i||c);v!==P&&null!=(p=E[v]);v++){if(o&&p){for(m=0,i||p.ownerDocument===d||(f(p),l=!h);y=e[m++];)if(y(p,i||d,l)){u.push(p);break}c&&(T=O)}n&&((p=!y&&p)&&g--,a&&b.push(p))}if(g+=v,n&&v!==g){for(m=0;y=t[m++];)y(b,w,i,l);if(a){if(g>0)for(;v--;)b[v]||w[v]||(w[v]=k.call(u));w=we(w)}A.apply(u,w),c&&!a&&w.length>0&&g+t.length>1&&ae.uniqueSort(u)}return c&&(T=O,s=S),b};return n?le(a):a}(a,o))).selector=e}return l},u=ae.select=function(e,t,n,o){var a,u,s,c,p,f="function"==typeof e&&e,d=!o&&i(e=f.selector||e);if(n=n||[],1===d.length){if((u=d[0]=d[0].slice(0)).length>2&&"ID"===(s=u[0]).type&&9===t.nodeType&&h&&r.relative[u[1].type]){if(!(t=(r.find.ID(s.matches[0].replace(J,ee),t)||[])[0]))return n;f&&(t=t.parentNode),e=e.slice(u.shift().value.length)}for(a=K.needsContext.test(e)?0:u.length;a--&&(s=u[a],!r.relative[c=s.type]);)if((p=r.find[c])&&(o=p(s.matches[0].replace(J,ee),$.test(u[0].type)&&he(t.parentNode)||t))){if(u.splice(a,1),!(e=o.length&&ge(u)))return A.apply(n,o),n;break}}return(f||l(e,d))(o,t,!h,n,!t||$.test(e)&&he(t.parentNode)||t),n},n.sortStable=w.split("").sort(C).join("")===w,n.detectDuplicates=!!p,f(),n.sortDetached=ue(function(e){return 1&e.compareDocumentPosition(d.createElement("fieldset"))}),ue(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||se("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&ue(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||se("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ue(function(e){return null==e.getAttribute("disabled")})||se(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),ae}(e);S.find=O,S.expr=O.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=O.uniqueSort,S.text=O.getText,S.isXMLDoc=O.isXML,S.contains=O.contains,S.escapeSelector=O.escape;var P=function(e,t,n){for(var r=[],o=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&S(e).is(n))break;r.push(e)}return r},_=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},C=S.expr.match.needsContext;function x(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var I=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function k(e,t,n){return y(t)?S.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?S.grep(e,function(e){return e===t!==n}):"string"!=typeof t?S.grep(e,function(e){return u.call(t,e)>-1!==n}):S.filter(t,e,n)}S.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?S.find.matchesSelector(r,e)?[r]:[]:S.find.matches(e,S.grep(t,function(e){return 1===e.nodeType}))},S.fn.extend({find:function(e){var t,n,r=this.length,o=this;if("string"!=typeof e)return this.pushStack(S(e).filter(function(){for(t=0;t<r;t++)if(S.contains(o[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)S.find(e,o[t],n);return r>1?S.uniqueSort(n):n},filter:function(e){return this.pushStack(k(this,e||[],!1))},not:function(e){return this.pushStack(k(this,e||[],!0))},is:function(e){return!!k(this,"string"==typeof e&&C.test(e)?S(e):e||[],!1).length}});var M,A=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(e,t,n){var o,a;if(!e)return this;if(n=n||M,"string"==typeof e){if(!(o="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:A.exec(e))||!o[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(o[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(o[1],t&&t.nodeType?t.ownerDocument||t:r,!0)),I.test(o[1])&&S.isPlainObject(t))for(o in t)y(this[o])?this[o](t[o]):this.attr(o,t[o]);return this}return(a=r.getElementById(o[2]))&&(this[0]=a,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):y(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this)}).prototype=S.fn,M=S(r);var D=/^(?:parents|prev(?:Until|All))/,j={children:!0,contents:!0,next:!0,prev:!0};function R(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,o=this.length,a=[],i="string"!=typeof e&&S(e);if(!C.test(e))for(;r<o;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(i?i.index(n)>-1:1===n.nodeType&&S.find.matchesSelector(n,e))){a.push(n);break}return this.pushStack(a.length>1?S.uniqueSort(a):a)},index:function(e){return e?"string"==typeof e?u.call(S(e),this[0]):u.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return P(e,"parentNode")},parentsUntil:function(e,t,n){return P(e,"parentNode",n)},next:function(e){return R(e,"nextSibling")},prev:function(e){return R(e,"previousSibling")},nextAll:function(e){return P(e,"nextSibling")},prevAll:function(e){return P(e,"previousSibling")},nextUntil:function(e,t,n){return P(e,"nextSibling",n)},prevUntil:function(e,t,n){return P(e,"previousSibling",n)},siblings:function(e){return _((e.parentNode||{}).firstChild,e)},children:function(e){return _(e.firstChild)},contents:function(e){return x(e,"iframe")?e.contentDocument:(x(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},function(e,t){S.fn[e]=function(n,r){var o=S.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(o=S.filter(r,o)),this.length>1&&(j[e]||S.uniqueSort(o),D.test(e)&&o.reverse()),this.pushStack(o)}});var N=/[^\x20\t\r\n\f]+/g;function L(e){return e}function G(e){throw e}function V(e,t,n,r){var o;try{e&&y(o=e.promise)?o.call(e).done(t).fail(n):e&&y(o=e.then)?o.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return S.each(e.match(N)||[],function(e,n){t[n]=!0}),t}(e):S.extend({},e);var t,n,r,o,a=[],i=[],l=-1,u=function(){for(o=o||e.once,r=t=!0;i.length;l=-1)for(n=i.shift();++l<a.length;)!1===a[l].apply(n[0],n[1])&&e.stopOnFalse&&(l=a.length,n=!1);e.memory||(n=!1),t=!1,o&&(a=n?[]:"")},s={add:function(){return a&&(n&&!t&&(l=a.length-1,i.push(n)),function t(n){S.each(n,function(n,r){y(r)?e.unique&&s.has(r)||a.push(r):r&&r.length&&"string"!==w(r)&&t(r)})}(arguments),n&&!t&&u()),this},remove:function(){return S.each(arguments,function(e,t){for(var n;(n=S.inArray(t,a,n))>-1;)a.splice(n,1),n<=l&&l--}),this},has:function(e){return e?S.inArray(e,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return o=i=[],a=n="",this},disabled:function(){return!a},lock:function(){return o=i=[],n||t||(a=n=""),this},locked:function(){return!!o},fireWith:function(e,n){return o||(n=[e,(n=n||[]).slice?n.slice():n],i.push(n),t||u()),this},fire:function(){return s.fireWith(this,arguments),this},fired:function(){return!!r}};return s},S.extend({Deferred:function(t){var n=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],r="pending",o={state:function(){return r},always:function(){return a.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var e=arguments;return S.Deferred(function(t){S.each(n,function(n,r){var o=y(e[r[4]])&&e[r[4]];a[r[1]](function(){var e=o&&o.apply(this,arguments);e&&y(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+"With"](this,o?[e]:arguments)})}),e=null}).promise()},then:function(t,r,o){var a=0;function i(t,n,r,o){return function(){var l=this,u=arguments,s=function(){var e,s;if(!(t<a)){if((e=r.apply(l,u))===n.promise())throw new TypeError("Thenable self-resolution");s=e&&("object"===h(e)||"function"==typeof e)&&e.then,y(s)?o?s.call(e,i(a,n,L,o),i(a,n,G,o)):(a++,s.call(e,i(a,n,L,o),i(a,n,G,o),i(a,n,L,n.notifyWith))):(r!==L&&(l=void 0,u=[e]),(o||n.resolveWith)(l,u))}},c=o?s:function(){try{s()}catch(e){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(e,c.stackTrace),t+1>=a&&(r!==G&&(l=void 0,u=[e]),n.rejectWith(l,u))}};t?c():(S.Deferred.getStackHook&&(c.stackTrace=S.Deferred.getStackHook()),e.setTimeout(c))}}return S.Deferred(function(e){n[0][3].add(i(0,e,y(o)?o:L,e.notifyWith)),n[1][3].add(i(0,e,y(t)?t:L)),n[2][3].add(i(0,e,y(r)?r:G))}).promise()},promise:function(e){return null!=e?S.extend(e,o):o}},a={};return S.each(n,function(e,t){var i=t[2],l=t[5];o[t[1]]=i.add,l&&i.add(function(){r=l},n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),i.add(t[3].fire),a[t[0]]=function(){return a[t[0]+"With"](this===a?void 0:this,arguments),this},a[t[0]+"With"]=i.fireWith}),o.promise(a),t&&t.call(a,a),a},when:function(e){var t=arguments.length,n=t,r=Array(n),o=a.call(arguments),i=S.Deferred(),l=function(e){return function(n){r[e]=this,o[e]=arguments.length>1?a.call(arguments):n,--t||i.resolveWith(r,o)}};if(t<=1&&(V(e,i.done(l(n)).resolve,i.reject,!t),"pending"===i.state()||y(o[n]&&o[n].then)))return i.then();for(;n--;)V(o[n],l(n),i.reject);return i.promise()}});var F=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&F.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},S.readyException=function(t){e.setTimeout(function(){throw t})};var U=S.Deferred();function B(){r.removeEventListener("DOMContentLoaded",B),e.removeEventListener("load",B),S.ready()}S.fn.ready=function(e){return U.then(e).catch(function(e){S.readyException(e)}),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0,!0!==e&&--S.readyWait>0||U.resolveWith(r,[S]))}}),S.ready.then=U.then,"complete"===r.readyState||"loading"!==r.readyState&&!r.documentElement.doScroll?e.setTimeout(S.ready):(r.addEventListener("DOMContentLoaded",B),e.addEventListener("load",B));var H=function e(t,n,r,o,a,i,l){var u=0,s=t.length,c=null==r;if("object"===w(r))for(u in a=!0,r)e(t,n,u,r[u],!0,i,l);else if(void 0!==o&&(a=!0,y(o)||(l=!0),c&&(l?(n.call(t,o),n=null):(c=n,n=function(e,t,n){return c.call(S(e),n)})),n))for(;u<s;u++)n(t[u],r,l?o:o.call(t[u],u,n(t[u],r)));return a?t:c?n.call(t):s?n(t[0],r):i},W=/^-ms-/,q=/-([a-z])/g;function z(e,t){return t.toUpperCase()}function K(e){return e.replace(W,"ms-").replace(q,z)}var Y=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function X(){this.expando=S.expando+X.uid++}X.uid=1,X.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Y(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,o=this.cache(e);if("string"==typeof t)o[K(t)]=n;else for(r in t)o[K(r)]=t[r];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][K(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(K):(t=K(t))in r?[t]:t.match(N)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||S.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var Z=new X,Q=new X,$=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,J=/[A-Z]/g;function ee(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(J,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:$.test(e)?JSON.parse(e):e)}(n)}catch(e){}Q.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return Q.hasData(e)||Z.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return Z.access(e,t,n)},_removeData:function(e,t){Z.remove(e,t)}}),S.fn.extend({data:function(e,t){var n,r,o,a=this[0],i=a&&a.attributes;if(void 0===e){if(this.length&&(o=Q.get(a),1===a.nodeType&&!Z.get(a,"hasDataAttrs"))){for(n=i.length;n--;)i[n]&&0===(r=i[n].name).indexOf("data-")&&(r=K(r.slice(5)),ee(a,r,o[r]));Z.set(a,"hasDataAttrs",!0)}return o}return"object"===h(e)?this.each(function(){Q.set(this,e)}):H(this,function(t){var n;if(a&&void 0===t)return void 0!==(n=Q.get(a,e))?n:void 0!==(n=ee(a,e))?n:void 0;this.each(function(){Q.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Q.remove(this,e)})}}),S.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Z.get(e,t),n&&(!r||Array.isArray(n)?r=Z.access(e,t,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=S.queue(e,t),r=n.length,o=n.shift(),a=S._queueHooks(e,t);"inprogress"===o&&(o=n.shift(),r--),o&&("fx"===t&&n.unshift("inprogress"),delete a.stop,o.call(e,function(){S.dequeue(e,t)},a)),!r&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Z.get(e,n)||Z.access(e,n,{empty:S.Callbacks("once memory").add(function(){Z.remove(e,[t+"queue",n])})})}}),S.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?S.queue(this[0],e):void 0===t?this:this.each(function(){var n=S.queue(this,e,t);S._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&S.dequeue(this,e)})},dequeue:function(e){return this.each(function(){S.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,o=S.Deferred(),a=this,i=this.length,l=function(){--r||o.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";i--;)(n=Z.get(a[i],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(l));return l(),o.promise(t)}});var te=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ne=new RegExp("^(?:([+-])=|)("+te+")([a-z%]*)$","i"),re=["Top","Right","Bottom","Left"],oe=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&S.contains(e.ownerDocument,e)&&"none"===S.css(e,"display")},ae=function(e,t,n,r){var o,a,i={};for(a in t)i[a]=e.style[a],e.style[a]=t[a];for(a in o=n.apply(e,r||[]),t)e.style[a]=i[a];return o};function ie(e,t,n,r){var o,a,i=20,l=r?function(){return r.cur()}:function(){return S.css(e,t,"")},u=l(),s=n&&n[3]||(S.cssNumber[t]?"":"px"),c=(S.cssNumber[t]||"px"!==s&&+u)&&ne.exec(S.css(e,t));if(c&&c[3]!==s){for(u/=2,s=s||c[3],c=+u||1;i--;)S.style(e,t,c+s),(1-a)*(1-(a=l()/u||.5))<=0&&(i=0),c/=a;c*=2,S.style(e,t,c+s),n=n||[]}return n&&(c=+c||+u||0,o=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=s,r.start=c,r.end=o)),o}var le={};function ue(e){var t,n=e.ownerDocument,r=e.nodeName,o=le[r];return o||(t=n.body.appendChild(n.createElement(r)),o=S.css(t,"display"),t.parentNode.removeChild(t),"none"===o&&(o="block"),le[r]=o,o)}function se(e,t){for(var n,r,o=[],a=0,i=e.length;a<i;a++)(r=e[a]).style&&(n=r.style.display,t?("none"===n&&(o[a]=Z.get(r,"display")||null,o[a]||(r.style.display="")),""===r.style.display&&oe(r)&&(o[a]=ue(r))):"none"!==n&&(o[a]="none",Z.set(r,"display",n)));for(a=0;a<i;a++)null!=o[a]&&(e[a].style.display=o[a]);return e}S.fn.extend({show:function(){return se(this,!0)},hide:function(){return se(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){oe(this)?S(this).show():S(this).hide()})}});var ce=/^(?:checkbox|radio)$/i,pe=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,fe=/^$|^module$|\/(?:java|ecma)script/i,de={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function me(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&x(e,t)?S.merge([e],n):n}function he(e,t){for(var n=0,r=e.length;n<r;n++)Z.set(e[n],"globalEval",!t||Z.get(t[n],"globalEval"))}de.optgroup=de.option,de.tbody=de.tfoot=de.colgroup=de.caption=de.thead,de.th=de.td;var ye,ge,ve=/<|&#?\w+;/;function be(e,t,n,r,o){for(var a,i,l,u,s,c,p=t.createDocumentFragment(),f=[],d=0,m=e.length;d<m;d++)if((a=e[d])||0===a)if("object"===w(a))S.merge(f,a.nodeType?[a]:a);else if(ve.test(a)){for(i=i||p.appendChild(t.createElement("div")),l=(pe.exec(a)||["",""])[1].toLowerCase(),u=de[l]||de._default,i.innerHTML=u[1]+S.htmlPrefilter(a)+u[2],c=u[0];c--;)i=i.lastChild;S.merge(f,i.childNodes),(i=p.firstChild).textContent=""}else f.push(t.createTextNode(a));for(p.textContent="",d=0;a=f[d++];)if(r&&S.inArray(a,r)>-1)o&&o.push(a);else if(s=S.contains(a.ownerDocument,a),i=me(p.appendChild(a),"script"),s&&he(i),n)for(c=0;a=i[c++];)fe.test(a.type||"")&&n.push(a);return p}ye=r.createDocumentFragment().appendChild(r.createElement("div")),(ge=r.createElement("input")).setAttribute("type","radio"),ge.setAttribute("checked","checked"),ge.setAttribute("name","t"),ye.appendChild(ge),m.checkClone=ye.cloneNode(!0).cloneNode(!0).lastChild.checked,ye.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!ye.cloneNode(!0).lastChild.defaultValue;var we=r.documentElement,Se=/^key/,Te=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ee=/^([^.]*)(?:\.(.+)|)/;function Oe(){return!0}function Pe(){return!1}function _e(){try{return r.activeElement}catch(e){}}function Ce(e,t,n,r,o,a){var i,l;if("object"===h(t)){for(l in"string"!=typeof n&&(r=r||n,n=void 0),t)Ce(e,l,n,r,t[l],a);return e}if(null==r&&null==o?(o=n,r=n=void 0):null==o&&("string"==typeof n?(o=r,r=void 0):(o=r,r=n,n=void 0)),!1===o)o=Pe;else if(!o)return e;return 1===a&&(i=o,(o=function(e){return S().off(e),i.apply(this,arguments)}).guid=i.guid||(i.guid=S.guid++)),e.each(function(){S.event.add(this,t,o,r,n)})}S.event={global:{},add:function(e,t,n,r,o){var a,i,l,u,s,c,p,f,d,m,h,y=Z.get(e);if(y)for(n.handler&&(n=(a=n).handler,o=a.selector),o&&S.find.matchesSelector(we,o),n.guid||(n.guid=S.guid++),(u=y.events)||(u=y.events={}),(i=y.handle)||(i=y.handle=function(t){return void 0!==S&&S.event.triggered!==t.type?S.event.dispatch.apply(e,arguments):void 0}),s=(t=(t||"").match(N)||[""]).length;s--;)d=h=(l=Ee.exec(t[s])||[])[1],m=(l[2]||"").split(".").sort(),d&&(p=S.event.special[d]||{},d=(o?p.delegateType:p.bindType)||d,p=S.event.special[d]||{},c=S.extend({type:d,origType:h,data:r,handler:n,guid:n.guid,selector:o,needsContext:o&&S.expr.match.needsContext.test(o),namespace:m.join(".")},a),(f=u[d])||((f=u[d]=[]).delegateCount=0,p.setup&&!1!==p.setup.call(e,r,m,i)||e.addEventListener&&e.addEventListener(d,i)),p.add&&(p.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),o?f.splice(f.delegateCount++,0,c):f.push(c),S.event.global[d]=!0)},remove:function(e,t,n,r,o){var a,i,l,u,s,c,p,f,d,m,h,y=Z.hasData(e)&&Z.get(e);if(y&&(u=y.events)){for(s=(t=(t||"").match(N)||[""]).length;s--;)if(d=h=(l=Ee.exec(t[s])||[])[1],m=(l[2]||"").split(".").sort(),d){for(p=S.event.special[d]||{},f=u[d=(r?p.delegateType:p.bindType)||d]||[],l=l[2]&&new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=a=f.length;a--;)c=f[a],!o&&h!==c.origType||n&&n.guid!==c.guid||l&&!l.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(f.splice(a,1),c.selector&&f.delegateCount--,p.remove&&p.remove.call(e,c));i&&!f.length&&(p.teardown&&!1!==p.teardown.call(e,m,y.handle)||S.removeEvent(e,d,y.handle),delete u[d])}else for(d in u)S.event.remove(e,d+t[s],n,r,!0);S.isEmptyObject(u)&&Z.remove(e,"handle events")}},dispatch:function(e){var t,n,r,o,a,i,l=S.event.fix(e),u=new Array(arguments.length),s=(Z.get(this,"events")||{})[l.type]||[],c=S.event.special[l.type]||{};for(u[0]=l,t=1;t<arguments.length;t++)u[t]=arguments[t];if(l.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,l)){for(i=S.event.handlers.call(this,l,s),t=0;(o=i[t++])&&!l.isPropagationStopped();)for(l.currentTarget=o.elem,n=0;(a=o.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!l.rnamespace.test(a.namespace)||(l.handleObj=a,l.data=a.data,void 0!==(r=((S.event.special[a.origType]||{}).handle||a.handler).apply(o.elem,u))&&!1===(l.result=r)&&(l.preventDefault(),l.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,l),l.result}},handlers:function(e,t){var n,r,o,a,i,l=[],u=t.delegateCount,s=e.target;if(u&&s.nodeType&&!("click"===e.type&&e.button>=1))for(;s!==this;s=s.parentNode||this)if(1===s.nodeType&&("click"!==e.type||!0!==s.disabled)){for(a=[],i={},n=0;n<u;n++)void 0===i[o=(r=t[n]).selector+" "]&&(i[o]=r.needsContext?S(o,this).index(s)>-1:S.find(o,this,null,[s]).length),i[o]&&a.push(r);a.length&&l.push({elem:s,handlers:a})}return s=this,u<t.length&&l.push({elem:s,handlers:t.slice(u)}),l},addProp:function(e,t){Object.defineProperty(S.Event.prototype,e,{enumerable:!0,configurable:!0,get:y(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==_e()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===_e()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&x(this,"input"))return this.click(),!1},_default:function(e){return x(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Oe:Pe,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Pe,isPropagationStopped:Pe,isImmediatePropagationStopped:Pe,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Oe,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Oe,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Oe,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Se.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Te.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},S.event.addProp),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){S.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,o=e.handleObj;return r&&(r===this||S.contains(this,r))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),S.fn.extend({on:function(e,t,n,r){return Ce(this,e,t,n,r)},one:function(e,t,n,r){return Ce(this,e,t,n,r,1)},off:function(e,t,n){var r,o;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,S(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"===h(e)){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Pe),this.each(function(){S.event.remove(this,e,n,t)})}});var xe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Ie=/<script|<style|<link/i,ke=/checked\s*(?:[^=]|=\s*.checked.)/i,Me=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ae(e,t){return x(e,"table")&&x(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function De(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function je(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Re(e,t){var n,r,o,a,i,l,u,s;if(1===t.nodeType){if(Z.hasData(e)&&(a=Z.access(e),i=Z.set(t,a),s=a.events))for(o in delete i.handle,i.events={},s)for(n=0,r=s[o].length;n<r;n++)S.event.add(t,o,s[o][n]);Q.hasData(e)&&(l=Q.access(e),u=S.extend({},l),Q.set(t,u))}}function Ne(e,t,n,r){t=i.apply([],t);var o,a,l,u,s,c,p=0,f=e.length,d=f-1,h=t[0],g=y(h);if(g||f>1&&"string"==typeof h&&!m.checkClone&&ke.test(h))return e.each(function(o){var a=e.eq(o);g&&(t[0]=h.call(this,o,a.html())),Ne(a,t,n,r)});if(f&&(a=(o=be(t,e[0].ownerDocument,!1,e,r)).firstChild,1===o.childNodes.length&&(o=a),a||r)){for(u=(l=S.map(me(o,"script"),De)).length;p<f;p++)s=o,p!==d&&(s=S.clone(s,!0,!0),u&&S.merge(l,me(s,"script"))),n.call(e[p],s,p);if(u)for(c=l[l.length-1].ownerDocument,S.map(l,je),p=0;p<u;p++)s=l[p],fe.test(s.type||"")&&!Z.access(s,"globalEval")&&S.contains(c,s)&&(s.src&&"module"!==(s.type||"").toLowerCase()?S._evalUrl&&S._evalUrl(s.src):b(s.textContent.replace(Me,""),c,s))}return e}function Le(e,t,n){for(var r,o=t?S.filter(t,e):e,a=0;null!=(r=o[a]);a++)n||1!==r.nodeType||S.cleanData(me(r)),r.parentNode&&(n&&S.contains(r.ownerDocument,r)&&he(me(r,"script")),r.parentNode.removeChild(r));return e}S.extend({htmlPrefilter:function(e){return e.replace(xe,"<$1></$2>")},clone:function(e,t,n){var r,o,a,i,l,u,s,c=e.cloneNode(!0),p=S.contains(e.ownerDocument,e);if(!(m.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(i=me(c),r=0,o=(a=me(e)).length;r<o;r++)l=a[r],u=i[r],s=void 0,"input"===(s=u.nodeName.toLowerCase())&&ce.test(l.type)?u.checked=l.checked:"input"!==s&&"textarea"!==s||(u.defaultValue=l.defaultValue);if(t)if(n)for(a=a||me(e),i=i||me(c),r=0,o=a.length;r<o;r++)Re(a[r],i[r]);else Re(e,c);return(i=me(c,"script")).length>0&&he(i,!p&&me(e,"script")),c},cleanData:function(e){for(var t,n,r,o=S.event.special,a=0;void 0!==(n=e[a]);a++)if(Y(n)){if(t=n[Z.expando]){if(t.events)for(r in t.events)o[r]?S.event.remove(n,r):S.removeEvent(n,r,t.handle);n[Z.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Le(this,e,!0)},remove:function(e){return Le(this,e)},text:function(e){return H(this,function(e){return void 0===e?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Ne(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ae(this,e).appendChild(e)})},prepend:function(){return Ne(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ae(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Ne(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Ne(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(me(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return S.clone(this,e,t)})},html:function(e){return H(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ie.test(e)&&!de[(pe.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(S.cleanData(me(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Ne(this,arguments,function(t){var n=this.parentNode;S.inArray(this,e)<0&&(S.cleanData(me(this)),n&&n.replaceChild(t,this))},e)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){S.fn[e]=function(e){for(var n,r=[],o=S(e),a=o.length-1,i=0;i<=a;i++)n=i===a?this:this.clone(!0),S(o[i])[t](n),l.apply(r,n.get());return this.pushStack(r)}});var Ge=new RegExp("^("+te+")(?!px)[a-z%]+$","i"),Ve=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Fe=new RegExp(re.join("|"),"i");function Ue(e,t,n){var r,o,a,i,l=e.style;return(n=n||Ve(e))&&(""!==(i=n.getPropertyValue(t)||n[t])||S.contains(e.ownerDocument,e)||(i=S.style(e,t)),!m.pixelBoxStyles()&&Ge.test(i)&&Fe.test(t)&&(r=l.width,o=l.minWidth,a=l.maxWidth,l.minWidth=l.maxWidth=l.width=i,i=n.width,l.width=r,l.minWidth=o,l.maxWidth=a)),void 0!==i?i+"":i}function Be(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function t(){if(c){s.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",we.appendChild(s).appendChild(c);var t=e.getComputedStyle(c);o="1%"!==t.top,u=12===n(t.marginLeft),c.style.right="60%",l=36===n(t.right),a=36===n(t.width),c.style.position="absolute",i=36===c.offsetWidth||"absolute",we.removeChild(s),c=null}}function n(e){return Math.round(parseFloat(e))}var o,a,i,l,u,s=r.createElement("div"),c=r.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===c.style.backgroundClip,S.extend(m,{boxSizingReliable:function(){return t(),a},pixelBoxStyles:function(){return t(),l},pixelPosition:function(){return t(),o},reliableMarginLeft:function(){return t(),u},scrollboxSize:function(){return t(),i}}))}();var He=/^(none|table(?!-c[ea]).+)/,We=/^--/,qe={position:"absolute",visibility:"hidden",display:"block"},ze={letterSpacing:"0",fontWeight:"400"},Ke=["Webkit","Moz","ms"],Ye=r.createElement("div").style;function Xe(e){var t=S.cssProps[e];return t||(t=S.cssProps[e]=function(e){if(e in Ye)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=Ke.length;n--;)if((e=Ke[n]+t)in Ye)return e}(e)||e),t}function Ze(e,t,n){var r=ne.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Qe(e,t,n,r,o,a){var i="width"===t?1:0,l=0,u=0;if(n===(r?"border":"content"))return 0;for(;i<4;i+=2)"margin"===n&&(u+=S.css(e,n+re[i],!0,o)),r?("content"===n&&(u-=S.css(e,"padding"+re[i],!0,o)),"margin"!==n&&(u-=S.css(e,"border"+re[i]+"Width",!0,o))):(u+=S.css(e,"padding"+re[i],!0,o),"padding"!==n?u+=S.css(e,"border"+re[i]+"Width",!0,o):l+=S.css(e,"border"+re[i]+"Width",!0,o));return!r&&a>=0&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-a-u-l-.5))),u}function $e(e,t,n){var r=Ve(e),o=Ue(e,t,r),a="border-box"===S.css(e,"boxSizing",!1,r),i=a;if(Ge.test(o)){if(!n)return o;o="auto"}return i=i&&(m.boxSizingReliable()||o===e.style[t]),("auto"===o||!parseFloat(o)&&"inline"===S.css(e,"display",!1,r))&&(o=e["offset"+t[0].toUpperCase()+t.slice(1)],i=!0),(o=parseFloat(o)||0)+Qe(e,t,n||(a?"border":"content"),i,r,o)+"px"}function Je(e,t,n,r,o){return new Je.prototype.init(e,t,n,r,o)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ue(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,i,l=K(t),u=We.test(t),s=e.style;if(u||(t=Xe(l)),i=S.cssHooks[t]||S.cssHooks[l],void 0===n)return i&&"get"in i&&void 0!==(o=i.get(e,!1,r))?o:s[t];"string"===(a=h(n))&&(o=ne.exec(n))&&o[1]&&(n=ie(e,t,o),a="number"),null!=n&&n==n&&("number"===a&&(n+=o&&o[3]||(S.cssNumber[l]?"":"px")),m.clearCloneStyle||""!==n||0!==t.indexOf("background")||(s[t]="inherit"),i&&"set"in i&&void 0===(n=i.set(e,n,r))||(u?s.setProperty(t,n):s[t]=n))}},css:function(e,t,n,r){var o,a,i,l=K(t);return We.test(t)||(t=Xe(l)),(i=S.cssHooks[t]||S.cssHooks[l])&&"get"in i&&(o=i.get(e,!0,n)),void 0===o&&(o=Ue(e,t,r)),"normal"===o&&t in ze&&(o=ze[t]),""===n||n?(a=parseFloat(o),!0===n||isFinite(a)?a||0:o):o}}),S.each(["height","width"],function(e,t){S.cssHooks[t]={get:function(e,n,r){if(n)return!He.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?$e(e,t,r):ae(e,qe,function(){return $e(e,t,r)})},set:function(e,n,r){var o,a=Ve(e),i="border-box"===S.css(e,"boxSizing",!1,a),l=r&&Qe(e,t,r,i,a);return i&&m.scrollboxSize()===a.position&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(a[t])-Qe(e,t,"border",!1,a)-.5)),l&&(o=ne.exec(n))&&"px"!==(o[3]||"px")&&(e.style[t]=n,n=S.css(e,t)),Ze(0,n,l)}}}),S.cssHooks.marginLeft=Be(m.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Ue(e,"marginLeft"))||e.getBoundingClientRect().left-ae(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),S.each({margin:"",padding:"",border:"Width"},function(e,t){S.cssHooks[e+t]={expand:function(n){for(var r=0,o={},a="string"==typeof n?n.split(" "):[n];r<4;r++)o[e+re[r]+t]=a[r]||a[r-2]||a[0];return o}},"margin"!==e&&(S.cssHooks[e+t].set=Ze)}),S.fn.extend({css:function(e,t){return H(this,function(e,t,n){var r,o,a={},i=0;if(Array.isArray(t)){for(r=Ve(e),o=t.length;i<o;i++)a[t[i]]=S.css(e,t[i],!1,r);return a}return void 0!==n?S.style(e,t,n):S.css(e,t)},e,t,arguments.length>1)}}),S.Tween=Je,Je.prototype={constructor:Je,init:function(e,t,n,r,o,a){this.elem=e,this.prop=n,this.easing=o||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=a||(S.cssNumber[n]?"":"px")},cur:function(){var e=Je.propHooks[this.prop];return e&&e.get?e.get(this):Je.propHooks._default.get(this)},run:function(e){var t,n=Je.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Je.propHooks._default.set(this),this}},Je.prototype.init.prototype=Je.prototype,Je.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[S.cssProps[e.prop]]&&!S.cssHooks[e.prop]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}},Je.propHooks.scrollTop=Je.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=Je.prototype.init,S.fx.step={};var et,tt,nt=/^(?:toggle|show|hide)$/,rt=/queueHooks$/;function ot(){tt&&(!1===r.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(ot):e.setTimeout(ot,S.fx.interval),S.fx.tick())}function at(){return e.setTimeout(function(){et=void 0}),et=Date.now()}function it(e,t){var n,r=0,o={height:e};for(t=t?1:0;r<4;r+=2-t)o["margin"+(n=re[r])]=o["padding"+n]=e;return t&&(o.opacity=o.width=e),o}function lt(e,t,n){for(var r,o=(ut.tweeners[t]||[]).concat(ut.tweeners["*"]),a=0,i=o.length;a<i;a++)if(r=o[a].call(n,t,e))return r}function ut(e,t,n){var r,o,a=0,i=ut.prefilters.length,l=S.Deferred().always(function(){delete u.elem}),u=function(){if(o)return!1;for(var t=et||at(),n=Math.max(0,s.startTime+s.duration-t),r=1-(n/s.duration||0),a=0,i=s.tweens.length;a<i;a++)s.tweens[a].run(r);return l.notifyWith(e,[s,r,n]),r<1&&i?n:(i||l.notifyWith(e,[s,1,0]),l.resolveWith(e,[s]),!1)},s=l.promise({elem:e,props:S.extend({},t),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},n),originalProperties:t,originalOptions:n,startTime:et||at(),duration:n.duration,tweens:[],createTween:function(t,n){var r=S.Tween(e,s.opts,t,n,s.opts.specialEasing[t]||s.opts.easing);return s.tweens.push(r),r},stop:function(t){var n=0,r=t?s.tweens.length:0;if(o)return this;for(o=!0;n<r;n++)s.tweens[n].run(1);return t?(l.notifyWith(e,[s,1,0]),l.resolveWith(e,[s,t])):l.rejectWith(e,[s,t]),this}}),c=s.props;for(!function(e,t){var n,r,o,a,i;for(n in e)if(o=t[r=K(n)],a=e[n],Array.isArray(a)&&(o=a[1],a=e[n]=a[0]),n!==r&&(e[r]=a,delete e[n]),(i=S.cssHooks[r])&&"expand"in i)for(n in a=i.expand(a),delete e[r],a)n in e||(e[n]=a[n],t[n]=o);else t[r]=o}(c,s.opts.specialEasing);a<i;a++)if(r=ut.prefilters[a].call(s,e,c,s.opts))return y(r.stop)&&(S._queueHooks(s.elem,s.opts.queue).stop=r.stop.bind(r)),r;return S.map(c,lt,s),y(s.opts.start)&&s.opts.start.call(e,s),s.progress(s.opts.progress).done(s.opts.done,s.opts.complete).fail(s.opts.fail).always(s.opts.always),S.fx.timer(S.extend(u,{elem:e,anim:s,queue:s.opts.queue})),s}S.Animation=S.extend(ut,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ie(n.elem,e,ne.exec(t),n),n}]},tweener:function(e,t){y(e)?(t=e,e=["*"]):e=e.match(N);for(var n,r=0,o=e.length;r<o;r++)n=e[r],ut.tweeners[n]=ut.tweeners[n]||[],ut.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,o,a,i,l,u,s,c,p="width"in t||"height"in t,f=this,d={},m=e.style,h=e.nodeType&&oe(e),y=Z.get(e,"fxshow");for(r in n.queue||(null==(i=S._queueHooks(e,"fx")).unqueued&&(i.unqueued=0,l=i.empty.fire,i.empty.fire=function(){i.unqueued||l()}),i.unqueued++,f.always(function(){f.always(function(){i.unqueued--,S.queue(e,"fx").length||i.empty.fire()})})),t)if(o=t[r],nt.test(o)){if(delete t[r],a=a||"toggle"===o,o===(h?"hide":"show")){if("show"!==o||!y||void 0===y[r])continue;h=!0}d[r]=y&&y[r]||S.style(e,r)}if((u=!S.isEmptyObject(t))||!S.isEmptyObject(d))for(r in p&&1===e.nodeType&&(n.overflow=[m.overflow,m.overflowX,m.overflowY],null==(s=y&&y.display)&&(s=Z.get(e,"display")),"none"===(c=S.css(e,"display"))&&(s?c=s:(se([e],!0),s=e.style.display||s,c=S.css(e,"display"),se([e]))),("inline"===c||"inline-block"===c&&null!=s)&&"none"===S.css(e,"float")&&(u||(f.done(function(){m.display=s}),null==s&&(c=m.display,s="none"===c?"":c)),m.display="inline-block")),n.overflow&&(m.overflow="hidden",f.always(function(){m.overflow=n.overflow[0],m.overflowX=n.overflow[1],m.overflowY=n.overflow[2]})),u=!1,d)u||(y?"hidden"in y&&(h=y.hidden):y=Z.access(e,"fxshow",{display:s}),a&&(y.hidden=!h),h&&se([e],!0),f.done(function(){for(r in h||se([e]),Z.remove(e,"fxshow"),d)S.style(e,r,d[r])})),u=lt(h?y[r]:0,r,f),r in y||(y[r]=u.start,h&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?ut.prefilters.unshift(e):ut.prefilters.push(e)}}),S.speed=function(e,t,n){var r=e&&"object"===h(e)?S.extend({},e):{complete:n||!n&&t||y(e)&&e,duration:e,easing:n&&t||t&&!y(t)&&t};return S.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in S.fx.speeds?r.duration=S.fx.speeds[r.duration]:r.duration=S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){y(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(e,t,n,r){return this.filter(oe).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var o=S.isEmptyObject(e),a=S.speed(t,n,r),i=function(){var t=ut(this,S.extend({},e),a);(o||Z.get(this,"finish"))&&t.stop(!0)};return i.finish=i,o||!1===a.queue?this.each(i):this.queue(a.queue,i)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,o=null!=e&&e+"queueHooks",a=S.timers,i=Z.get(this);if(o)i[o]&&i[o].stop&&r(i[o]);else for(o in i)i[o]&&i[o].stop&&rt.test(o)&&r(i[o]);for(o=a.length;o--;)a[o].elem!==this||null!=e&&a[o].queue!==e||(a[o].anim.stop(n),t=!1,a.splice(o,1));!t&&n||S.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=Z.get(this),r=n[e+"queue"],o=n[e+"queueHooks"],a=S.timers,i=r?r.length:0;for(n.finish=!0,S.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;t<i;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),S.each(["toggle","show","hide"],function(e,t){var n=S.fn[t];S.fn[t]=function(e,r,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(it(t,!0),e,r,o)}}),S.each({slideDown:it("show"),slideUp:it("hide"),slideToggle:it("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){S.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(et=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),et=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){tt||(tt=!0,ot())},S.fx.stop=function(){tt=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(t,n){return t=S.fx&&S.fx.speeds[t]||t,n=n||"fx",this.queue(n,function(n,r){var o=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(o)}})},function(){var e=r.createElement("input"),t=r.createElement("select").appendChild(r.createElement("option"));e.type="checkbox",m.checkOn=""!==e.value,m.optSelected=t.selected,(e=r.createElement("input")).value="t",e.type="radio",m.radioValue="t"===e.value}();var st,ct=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return H(this,S.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){S.removeAttr(this,e)})}}),S.extend({attr:function(e,t,n){var r,o,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return void 0===e.getAttribute?S.prop(e,t,n):(1===a&&S.isXMLDoc(e)||(o=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?st:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):o&&"set"in o&&void 0!==(r=o.set(e,n,t))?r:(e.setAttribute(t,n+""),n):o&&"get"in o&&null!==(r=o.get(e,t))?r:null==(r=S.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!m.radioValue&&"radio"===t&&x(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,o=t&&t.match(N);if(o&&1===e.nodeType)for(;n=o[r++];)e.removeAttribute(n)}}),st={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),function(e,t){var n=ct[t]||S.find.attr;ct[t]=function(e,t,r){var o,a,i=t.toLowerCase();return r||(a=ct[i],ct[i]=o,o=null!=n(e,t,r)?i:null,ct[i]=a),o}});var pt=/^(?:input|select|textarea|button)$/i,ft=/^(?:a|area)$/i;function dt(e){return(e.match(N)||[]).join(" ")}function mt(e){return e.getAttribute&&e.getAttribute("class")||""}function ht(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(N)||[]}S.fn.extend({prop:function(e,t){return H(this,S.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[S.propFix[e]||e]})}}),S.extend({prop:function(e,t,n){var r,o,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&S.isXMLDoc(e)||(t=S.propFix[t]||t,o=S.propHooks[t]),void 0!==n?o&&"set"in o&&void 0!==(r=o.set(e,n,t))?r:e[t]=n:o&&"get"in o&&null!==(r=o.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):pt.test(e.nodeName)||ft.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){S.propFix[this.toLowerCase()]=this}),S.fn.extend({addClass:function(e){var t,n,r,o,a,i,l,u=0;if(y(e))return this.each(function(t){S(this).addClass(e.call(this,t,mt(this)))});if((t=ht(e)).length)for(;n=this[u++];)if(o=mt(n),r=1===n.nodeType&&" "+dt(o)+" "){for(i=0;a=t[i++];)r.indexOf(" "+a+" ")<0&&(r+=a+" ");o!==(l=dt(r))&&n.setAttribute("class",l)}return this},removeClass:function(e){var t,n,r,o,a,i,l,u=0;if(y(e))return this.each(function(t){S(this).removeClass(e.call(this,t,mt(this)))});if(!arguments.length)return this.attr("class","");if((t=ht(e)).length)for(;n=this[u++];)if(o=mt(n),r=1===n.nodeType&&" "+dt(o)+" "){for(i=0;a=t[i++];)for(;r.indexOf(" "+a+" ")>-1;)r=r.replace(" "+a+" "," ");o!==(l=dt(r))&&n.setAttribute("class",l)}return this},toggleClass:function(e,t){var n=h(e),r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):y(e)?this.each(function(n){S(this).toggleClass(e.call(this,n,mt(this),t),t)}):this.each(function(){var t,o,a,i;if(r)for(o=0,a=S(this),i=ht(e);t=i[o++];)a.hasClass(t)?a.removeClass(t):a.addClass(t);else void 0!==e&&"boolean"!==n||((t=mt(this))&&Z.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Z.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+dt(mt(n))+" ").indexOf(t)>-1)return!0;return!1}});var yt=/\r/g;S.fn.extend({val:function(e){var t,n,r,o=this[0];return arguments.length?(r=y(e),this.each(function(n){var o;1===this.nodeType&&(null==(o=r?e.call(this,n,S(this).val()):e)?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=S.map(o,function(e){return null==e?"":e+""})),(t=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))})):o?(t=S.valHooks[o.type]||S.valHooks[o.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(o,"value"))?n:"string"==typeof(n=o.value)?n.replace(yt,""):null==n?"":n:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:dt(S.text(e))}},select:{get:function(e){var t,n,r,o=e.options,a=e.selectedIndex,i="select-one"===e.type,l=i?null:[],u=i?a+1:o.length;for(r=a<0?u:i?a:0;r<u;r++)if(((n=o[r]).selected||r===a)&&!n.disabled&&(!n.parentNode.disabled||!x(n.parentNode,"optgroup"))){if(t=S(n).val(),i)return t;l.push(t)}return l},set:function(e,t){for(var n,r,o=e.options,a=S.makeArray(t),i=o.length;i--;)((r=o[i]).selected=S.inArray(S.valHooks.option.get(r),a)>-1)&&(n=!0);return n||(e.selectedIndex=-1),a}}}}),S.each(["radio","checkbox"],function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=S.inArray(S(e).val(),t)>-1}},m.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),m.focusin="onfocusin"in e;var gt=/^(?:focusinfocus|focusoutblur)$/,vt=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(t,n,o,a){var i,l,u,s,c,f,d,m,v=[o||r],b=p.call(t,"type")?t.type:t,w=p.call(t,"namespace")?t.namespace.split("."):[];if(l=m=u=o=o||r,3!==o.nodeType&&8!==o.nodeType&&!gt.test(b+S.event.triggered)&&(b.indexOf(".")>-1&&(w=b.split("."),b=w.shift(),w.sort()),c=b.indexOf(":")<0&&"on"+b,(t=t[S.expando]?t:new S.Event(b,"object"===h(t)&&t)).isTrigger=a?2:3,t.namespace=w.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+w.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=o),n=null==n?[t]:S.makeArray(n,[t]),d=S.event.special[b]||{},a||!d.trigger||!1!==d.trigger.apply(o,n))){if(!a&&!d.noBubble&&!g(o)){for(s=d.delegateType||b,gt.test(s+b)||(l=l.parentNode);l;l=l.parentNode)v.push(l),u=l;u===(o.ownerDocument||r)&&v.push(u.defaultView||u.parentWindow||e)}for(i=0;(l=v[i++])&&!t.isPropagationStopped();)m=l,t.type=i>1?s:d.bindType||b,(f=(Z.get(l,"events")||{})[t.type]&&Z.get(l,"handle"))&&f.apply(l,n),(f=c&&l[c])&&f.apply&&Y(l)&&(t.result=f.apply(l,n),!1===t.result&&t.preventDefault());return t.type=b,a||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(v.pop(),n)||!Y(o)||c&&y(o[b])&&!g(o)&&((u=o[c])&&(o[c]=null),S.event.triggered=b,t.isPropagationStopped()&&m.addEventListener(b,vt),o[b](),t.isPropagationStopped()&&m.removeEventListener(b,vt),S.event.triggered=void 0,u&&(o[c]=u)),t.result}},simulate:function(e,t,n){var r=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(r,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each(function(){S.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}}),m.focusin||S.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){S.event.simulate(t,e.target,S.event.fix(e))};S.event.special[t]={setup:function(){var r=this.ownerDocument||this,o=Z.access(r,t);o||r.addEventListener(e,n,!0),Z.access(r,t,(o||0)+1)},teardown:function(){var r=this.ownerDocument||this,o=Z.access(r,t)-1;o?Z.access(r,t,o):(r.removeEventListener(e,n,!0),Z.remove(r,t))}}});var bt=e.location,wt=Date.now(),St=/\?/;S.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||S.error("Invalid XML: "+t),n};var Tt=/\[\]$/,Et=/\r?\n/g,Ot=/^(?:submit|button|image|reset|file)$/i,Pt=/^(?:input|select|textarea|keygen)/i;function _t(e,t,n,r){var o;if(Array.isArray(t))S.each(t,function(t,o){n||Tt.test(e)?r(e,o):_t(e+"["+("object"===h(o)&&null!=o?t:"")+"]",o,n,r)});else if(n||"object"!==w(t))r(e,t);else for(o in t)_t(e+"["+o+"]",t[o],n,r)}S.param=function(e,t){var n,r=[],o=function(e,t){var n=y(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,function(){o(this.name,this.value)});else for(n in e)_t(n,e[n],t,o);return r.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&Pt.test(this.nodeName)&&!Ot.test(e)&&(this.checked||!ce.test(e))}).map(function(e,t){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,function(e){return{name:t.name,value:e.replace(Et,"\r\n")}}):{name:t.name,value:n.replace(Et,"\r\n")}}).get()}});var Ct=/%20/g,xt=/#.*$/,It=/([?&])_=[^&]*/,kt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Mt=/^(?:GET|HEAD)$/,At=/^\/\//,Dt={},jt={},Rt="*/".concat("*"),Nt=r.createElement("a");function Lt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,o=0,a=t.toLowerCase().match(N)||[];if(y(n))for(;r=a[o++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Gt(e,t,n,r){var o={},a=e===jt;function i(l){var u;return o[l]=!0,S.each(e[l]||[],function(e,l){var s=l(t,n,r);return"string"!=typeof s||a||o[s]?a?!(u=s):void 0:(t.dataTypes.unshift(s),i(s),!1)}),u}return i(t.dataTypes[0])||!o["*"]&&i("*")}function Vt(e,t){var n,r,o=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((o[n]?e:r||(r={}))[n]=t[n]);return r&&S.extend(!0,e,r),e}Nt.href=bt.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:bt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(bt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Rt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Vt(Vt(e,S.ajaxSettings),t):Vt(S.ajaxSettings,e)},ajaxPrefilter:Lt(Dt),ajaxTransport:Lt(jt),ajax:function(t,n){"object"===h(t)&&(n=t,t=void 0),n=n||{};var o,a,i,l,u,s,c,p,f,d,m=S.ajaxSetup({},n),y=m.context||m,g=m.context&&(y.nodeType||y.jquery)?S(y):S.event,v=S.Deferred(),b=S.Callbacks("once memory"),w=m.statusCode||{},T={},E={},O="canceled",P={readyState:0,getResponseHeader:function(e){var t;if(c){if(!l)for(l={};t=kt.exec(i);)l[t[1].toLowerCase()]=t[2];t=l[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return c?i:null},setRequestHeader:function(e,t){return null==c&&(e=E[e.toLowerCase()]=E[e.toLowerCase()]||e,T[e]=t),this},overrideMimeType:function(e){return null==c&&(m.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)P.always(e[P.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||O;return o&&o.abort(t),_(0,t),this}};if(v.promise(P),m.url=((t||m.url||bt.href)+"").replace(At,bt.protocol+"//"),m.type=n.method||n.type||m.method||m.type,m.dataTypes=(m.dataType||"*").toLowerCase().match(N)||[""],null==m.crossDomain){s=r.createElement("a");try{s.href=m.url,s.href=s.href,m.crossDomain=Nt.protocol+"//"+Nt.host!=s.protocol+"//"+s.host}catch(e){m.crossDomain=!0}}if(m.data&&m.processData&&"string"!=typeof m.data&&(m.data=S.param(m.data,m.traditional)),Gt(Dt,m,n,P),c)return P;for(f in(p=S.event&&m.global)&&0==S.active++&&S.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!Mt.test(m.type),a=m.url.replace(xt,""),m.hasContent?m.data&&m.processData&&0===(m.contentType||"").indexOf("application/x-www-form-urlencoded")&&(m.data=m.data.replace(Ct,"+")):(d=m.url.slice(a.length),m.data&&(m.processData||"string"==typeof m.data)&&(a+=(St.test(a)?"&":"?")+m.data,delete m.data),!1===m.cache&&(a=a.replace(It,"$1"),d=(St.test(a)?"&":"?")+"_="+wt+++d),m.url=a+d),m.ifModified&&(S.lastModified[a]&&P.setRequestHeader("If-Modified-Since",S.lastModified[a]),S.etag[a]&&P.setRequestHeader("If-None-Match",S.etag[a])),(m.data&&m.hasContent&&!1!==m.contentType||n.contentType)&&P.setRequestHeader("Content-Type",m.contentType),P.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Rt+"; q=0.01":""):m.accepts["*"]),m.headers)P.setRequestHeader(f,m.headers[f]);if(m.beforeSend&&(!1===m.beforeSend.call(y,P,m)||c))return P.abort();if(O="abort",b.add(m.complete),P.done(m.success),P.fail(m.error),o=Gt(jt,m,n,P)){if(P.readyState=1,p&&g.trigger("ajaxSend",[P,m]),c)return P;m.async&&m.timeout>0&&(u=e.setTimeout(function(){P.abort("timeout")},m.timeout));try{c=!1,o.send(T,_)}catch(e){if(c)throw e;_(-1,e)}}else _(-1,"No Transport");function _(t,n,r,l){var s,f,d,h,T,E=n;c||(c=!0,u&&e.clearTimeout(u),o=void 0,i=l||"",P.readyState=t>0?4:0,s=t>=200&&t<300||304===t,r&&(h=function(e,t,n){for(var r,o,a,i,l=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(o in l)if(l[o]&&l[o].test(r)){u.unshift(o);break}if(u[0]in n)a=u[0];else{for(o in n){if(!u[0]||e.converters[o+" "+u[0]]){a=o;break}i||(i=o)}a=a||i}if(a)return a!==u[0]&&u.unshift(a),n[a]}(m,P,r)),h=function(e,t,n,r){var o,a,i,l,u,s={},c=e.dataTypes.slice();if(c[1])for(i in e.converters)s[i.toLowerCase()]=e.converters[i];for(a=c.shift();a;)if(e.responseFields[a]&&(n[e.responseFields[a]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=a,a=c.shift())if("*"===a)a=u;else if("*"!==u&&u!==a){if(!(i=s[u+" "+a]||s["* "+a]))for(o in s)if((l=o.split(" "))[1]===a&&(i=s[u+" "+l[0]]||s["* "+l[0]])){!0===i?i=s[o]:!0!==s[o]&&(a=l[0],c.unshift(l[1]));break}if(!0!==i)if(i&&e.throws)t=i(t);else try{t=i(t)}catch(e){return{state:"parsererror",error:i?e:"No conversion from "+u+" to "+a}}}return{state:"success",data:t}}(m,h,P,s),s?(m.ifModified&&((T=P.getResponseHeader("Last-Modified"))&&(S.lastModified[a]=T),(T=P.getResponseHeader("etag"))&&(S.etag[a]=T)),204===t||"HEAD"===m.type?E="nocontent":304===t?E="notmodified":(E=h.state,f=h.data,s=!(d=h.error))):(d=E,!t&&E||(E="error",t<0&&(t=0))),P.status=t,P.statusText=(n||E)+"",s?v.resolveWith(y,[f,E,P]):v.rejectWith(y,[P,E,d]),P.statusCode(w),w=void 0,p&&g.trigger(s?"ajaxSuccess":"ajaxError",[P,m,s?f:d]),b.fireWith(y,[P,E]),p&&(g.trigger("ajaxComplete",[P,m]),--S.active||S.event.trigger("ajaxStop")))}return P},getJSON:function(e,t,n){return S.get(e,t,n,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],function(e,t){S[t]=function(e,n,r,o){return y(n)&&(o=o||r,r=n,n=void 0),S.ajax(S.extend({url:e,type:t,dataType:o,data:n,success:r},S.isPlainObject(e)&&e))}}),S._evalUrl=function(e){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(y(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return y(e)?this.each(function(t){S(this).wrapInner(e.call(this,t))}):this.each(function(){var t=S(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=y(e);return this.each(function(n){S(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){S(this).replaceWith(this.childNodes)}),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Ft={0:200,1223:204},Ut=S.ajaxSettings.xhr();m.cors=!!Ut&&"withCredentials"in Ut,m.ajax=Ut=!!Ut,S.ajaxTransport(function(t){var n,r;if(m.cors||Ut&&!t.crossDomain)return{send:function(o,a){var i,l=t.xhr();if(l.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(i in t.xhrFields)l[i]=t.xhrFields[i];for(i in t.mimeType&&l.overrideMimeType&&l.overrideMimeType(t.mimeType),t.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest"),o)l.setRequestHeader(i,o[i]);n=function(e){return function(){n&&(n=r=l.onload=l.onerror=l.onabort=l.ontimeout=l.onreadystatechange=null,"abort"===e?l.abort():"error"===e?"number"!=typeof l.status?a(0,"error"):a(l.status,l.statusText):a(Ft[l.status]||l.status,l.statusText,"text"!==(l.responseType||"text")||"string"!=typeof l.responseText?{binary:l.response}:{text:l.responseText},l.getAllResponseHeaders()))}},l.onload=n(),r=l.onerror=l.ontimeout=n("error"),void 0!==l.onabort?l.onabort=r:l.onreadystatechange=function(){4===l.readyState&&e.setTimeout(function(){n&&r()})},n=n("abort");try{l.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}}),S.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),S.ajaxTransport("script",function(e){var t,n;if(e.crossDomain)return{send:function(o,a){t=S("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&a("error"===e.type?404:200,e.type)}),r.head.appendChild(t[0])},abort:function(){n&&n()}}});var Bt,Ht=[],Wt=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ht.pop()||S.expando+"_"+wt++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",function(t,n,r){var o,a,i,l=!1!==t.jsonp&&(Wt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Wt.test(t.data)&&"data");if(l||"jsonp"===t.dataTypes[0])return o=t.jsonpCallback=y(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,l?t[l]=t[l].replace(Wt,"$1"+o):!1!==t.jsonp&&(t.url+=(St.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return i||S.error(o+" was not called"),i[0]},t.dataTypes[0]="json",a=e[o],e[o]=function(){i=arguments},r.always(function(){void 0===a?S(e).removeProp(o):e[o]=a,t[o]&&(t.jsonpCallback=n.jsonpCallback,Ht.push(o)),i&&y(a)&&a(i[0]),i=a=void 0}),"script"}),m.createHTMLDocument=((Bt=r.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Bt.childNodes.length),S.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(m.createHTMLDocument?((o=(t=r.implementation.createHTMLDocument("")).createElement("base")).href=r.location.href,t.head.appendChild(o)):t=r),i=!n&&[],(a=I.exec(e))?[t.createElement(a[1])]:(a=be([e],t,i),i&&i.length&&S(i).remove(),S.merge([],a.childNodes)));var o,a,i},S.fn.load=function(e,t,n){var r,o,a,i=this,l=e.indexOf(" ");return l>-1&&(r=dt(e.slice(l)),e=e.slice(0,l)),y(t)?(n=t,t=void 0):t&&"object"===h(t)&&(o="POST"),i.length>0&&S.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done(function(e){a=arguments,i.html(r?S("<div>").append(S.parseHTML(e)).find(r):e)}).always(n&&function(e,t){i.each(function(){n.apply(this,a||[e.responseText,t,e])})}),this},S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){S.fn[t]=function(e){return this.on(t,e)}}),S.expr.pseudos.animated=function(e){return S.grep(S.timers,function(t){return e===t.elem}).length},S.offset={setOffset:function(e,t,n){var r,o,a,i,l,u,s=S.css(e,"position"),c=S(e),p={};"static"===s&&(e.style.position="relative"),l=c.offset(),a=S.css(e,"top"),u=S.css(e,"left"),("absolute"===s||"fixed"===s)&&(a+u).indexOf("auto")>-1?(i=(r=c.position()).top,o=r.left):(i=parseFloat(a)||0,o=parseFloat(u)||0),y(t)&&(t=t.call(e,n,S.extend({},l))),null!=t.top&&(p.top=t.top-l.top+i),null!=t.left&&(p.left=t.left-l.left+o),"using"in t?t.using.call(e,p):c.css(p)}},S.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){S.offset.setOffset(this,e,t)});var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],o={top:0,left:0};if("fixed"===S.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===S.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((o=S(e).offset()).top+=S.css(e,"borderTopWidth",!0),o.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-o.top-S.css(r,"marginTop",!0),left:t.left-o.left-S.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===S.css(e,"position");)e=e.offsetParent;return e||we})}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;S.fn[e]=function(r){return H(this,function(e,r,o){var a;if(g(e)?a=e:9===e.nodeType&&(a=e.defaultView),void 0===o)return a?a[t]:e[r];a?a.scrollTo(n?a.pageXOffset:o,n?o:a.pageYOffset):e[r]=o},e,r,arguments.length)}}),S.each(["top","left"],function(e,t){S.cssHooks[t]=Be(m.pixelPosition,function(e,n){if(n)return n=Ue(e,t),Ge.test(n)?S(e).position()[t]+"px":n})}),S.each({Height:"height",Width:"width"},function(e,t){S.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){S.fn[r]=function(o,a){var i=arguments.length&&(n||"boolean"!=typeof o),l=n||(!0===o||!0===a?"margin":"border");return H(this,function(t,n,o){var a;return g(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])):void 0===o?S.css(t,n,l):S.style(t,n,o,l)},t,i?o:void 0,i)}})}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){S.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),S.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),S.proxy=function(e,t){var n,r,o;if("string"==typeof t&&(n=e[t],t=e,e=n),y(e))return r=a.call(arguments,2),(o=function(){return e.apply(t||this,r.concat(a.call(arguments)))}).guid=e.guid=e.guid||S.guid++,o},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=x,S.isFunction=y,S.isWindow=g,S.camelCase=K,S.type=w,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))};var qt=e.jQuery,zt=e.$;return S.noConflict=function(t){return e.$===S&&(e.$=zt),t&&e.jQuery===S&&(e.jQuery=qt),S},t||(e.jQuery=e.$=S),S},e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}});function Tt(e){return(e.label||e.type).toLowerCase().replace(/_/g,"")}var Et=function(e){var t=e.store,n=e.track,r=e.handleTrackHover,o=e.height,a=e.paddingLeft,i=void 0===a?5:a,s=Object(l.useCallback)(function(){return t.toggleTrackCollapse(n.uid)},[n]);return Object(c.b)(function(){return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{style:{paddingLeft:i,height:o,display:"flex",alignItems:"center",justifyContent:"space-between"},onMouseEnter:r,onMouseLeave:r},u.a.createElement("span",{style:{opacity:t.isTrackCollapsed(n.uid)?.5:1}},u.a.createElement(m.q,{text:Tt(n),maxLength:20})),t.enableCollapseTrack&&n.tracks&&n.tracks.length>0&&u.a.createElement("button",{onClick:s,className:"btn btn-xs btn-default",style:{fontSize:10,lineHeight:.5,padding:3}},t.isTrackCollapsed(n.uid)?u.a.createElement("i",{className:"fa fa-plus fa-sm"}):u.a.createElement("i",{className:"fa fa-minus fa-sm"}))))})},Ot="font-size: 12px;text-transform: uppercase; font-family:Arial",Pt="track-header-border";var _t=function(e){var t=e.store,n=e.specification,r=e.handleTrackHover,o=e.disableHover;return Object(l.createElement)("div",{className:Q("tl-custom-track-header",{"tl-hover-disabled":o}),style:{paddingLeft:5,height:n.height(t)},onMouseEnter:r,onMouseLeave:r},n.renderHeader(t))};function Ct(e,t,n){if(!t)return null;var r=document.createElementNS("http://www.w3.org/2000/svg","svg");document.body.appendChild(r);var o=document.createElementNS("http://www.w3.org/2000/svg","g");r.append(o);try{var a=function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","g");function r(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","text");return n.setAttribute("style",Ot),n.setAttribute("x",e+"px"),n.setAttribute("y",t+"px"),n.setAttribute("dy","1em"),n}function o(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","line");return n.classList.add(Pt),n.setAttribute("x1","0"),n.setAttribute("x2","0"),n.setAttribute("y1",""+(e+t-.5)),n.setAttribute("y2",""+(e+t-.5)),n.setAttribute("stroke","#eee"),n.setAttribute("stroke-width","1"),n.setAttribute("stroke-dasharray","3,2"),n}for(var a=yt,i=0,l=e.data;i<l.length;i++)(c=r((p=l[i]).indent,a)).textContent=Tt(p.track),n.appendChild(c),n.appendChild(o(a,p.height)),a+=p.height;if(t)for(var u=0,s=t;u<s.length;u++){var c,p=s[u];(c=r(5,a)).textContent=p.labelForExport,n.appendChild(c);var f=p.height(e);n.appendChild(o(a,f)),a+=f}return n}(e,n);o.appendChild(a);var i=a.getBBox(),l=document.createElementNS("http://www.w3.org/2000/svg","line");l.setAttribute("x1",""+(i.width+10)),l.setAttribute("x2",""+(i.width+10)),l.setAttribute("y1","0"),l.setAttribute("y2",""+(i.y+i.height)),l.setAttribute("style","stroke-width:1; stroke:"+vt),o.appendChild(l),t=t.cloneNode(!0),o.appendChild(t),t.setAttribute("transform","translate("+(i.width+10)+" 0)");var u=o.getBBox();r.setAttribute("width",""+u.width),r.setAttribute("height",""+u.height),St(r).find("."+O).remove(),St(r).find("."+Pt).each(function(){this.setAttribute("x2",""+(i.width+10))})}finally{document.body.removeChild(r)}return r}function xt(e,t,n,r){void 0===r&&(r=!1);var o=St(n.timeline.current),a=St(n.zoomSelectBox.current),i=St(n.zoomSelectBoxMask.current);switch(e.type){case"mouseleave":St(n.cursor.current).hide();break;case"mouseup":if(t.dragging){if(t.dragging.start&&t.dragging.end&&Math.abs(t.dragging.start-t.dragging.end)>10){var l=o.width(),u=t.dragging.start/l,s=t.dragging.end/l,c=u*t.absoluteWidth,p=s*t.absoluteWidth,f=M(c,t.ticks),d=M(p,t.ticks);f<=d?t.setZoomBounds(f,d):t.setZoomBounds(d,f),setTimeout(function(){!function(e,t,n){var r=0;if(e){var o=n({start:e.start,end:e.end});o&&(r=o.pixelLeft)}t.scrollLeft=r}(t.zoomBounds,n.timelineViewPort.current,t.getPosition)},10)}t.dragging=void 0,i.hide(),a.hide()}t.dragging=void 0;break;case"mousedown":r||(t.dragging={start:null,end:null});break;case"mousemove":var m=e.clientX-o.offset().left+(St(document).scrollLeft()||0);t.dragging?(e.preventDefault(),null===t.dragging.start&&(t.dragging.start=m),t.dragging.end=m,i.show(),a.show().css({left:t.dragging.start<t.dragging.end?t.dragging.start:t.dragging.end,width:Math.abs(t.dragging.end-t.dragging.start)})):r||St(n.cursor.current).css({left:e.clientX-o.offset().left+(St(document).scrollLeft()||0),display:"block"})}}var It=Object(c.a)(function(e){var t=e.store,n=e.customTracks,r=e.width,o=e.hideLabels,i=void 0!==o&&o,s=e.onClickDownload,c=e.visibleTracks,p=e.hideXAxis,f=e.headerWidth,d=e.disableZoom,h=t.data,y=yt+a.a.sumBy(h,function(e){return c?c.includes(e.track.type)?e.height:0:e.height})+a.a.sumBy(n||[],function(e){return e.height(t)})+15,g={cursor:Object(l.useRef)(null),wrapper:Object(l.useRef)(null),timeline:Object(l.useRef)(null),timelineTracksArea:Object(l.useRef)(null),timelineHeadersArea:Object(l.useRef)(null),zoomSelectBox:Object(l.useRef)(null),zoomSelectBoxMask:Object(l.useRef)(null),cursorText:Object(l.useRef)(null),hoverStyleTag:Object(l.useRef)(null),timelineViewPort:Object(l.useRef)(null),scrollPanel:Object(l.useRef)(null)},v=Object(l.useCallback)(function(e){!function(e,t,n){if(t&&t.current)switch(e.type){case"mouseenter":var r=a.a.findIndex(e.currentTarget.parentNode.children,function(t){return t===e.currentTarget});void 0!==r&&St(t.current).text("\n                    #"+n+" .tl-timeline-tracklabels > div:nth-child("+(r+1)+") {\n                        background:#F2F2F2;\n                    }\n                    \n                     #"+n+" .tl-timeline .tl-track:nth-child("+(r+1)+") rect.tl-track-highlight {\n                        opacity: 1 !important;\n                    }\n                ");break;default:St(t.current).empty()}}(e,g.hoverStyleTag,t.uniqueId)},[g.hoverStyleTag]);Object(l.useEffect)(function(){setTimeout(function(){t.viewPortWidth=St(g.timelineViewPort.current).width(),t.headersWidth=St(g.timelineHeadersArea.current).width()},200);var e=function(e,t){var n=function(t){var n=!1;switch(t.which){case 37:case 40:e.prevTooltipEvent()&&(n=!0);break;case 38:case 39:case 32:e.nextTooltipEvent()&&(n=!0);break;case 27:e.removeAllTooltips(),n=!0}n&&t.preventDefault()};St(document).on("keydown",n);var r=function(){e.viewPortWidth=St(t.timelineViewPort.current).width()};St(window).on("resize",r);var o=function(){e.removeAllTooltips()};return St("body").on("mouseleave",o),function(){St(window).off("resize",r),St("body").off("mouseleave",o),St(document).off("keydown",n)}}(t,g);return function(){e()}},[]);var b=1;t.zoomRange&&t.zoomedWidth&&(b=t.absoluteWidth/t.zoomedWidth);var w=t.viewPortWidth?t.viewPortWidth*b:0,S=void 0===c?h:h.filter(function(e){return c.includes(e.track.type)});return u.a.createElement("div",{ref:g.wrapper,className:"tl-timeline-wrapper",id:t.uniqueId},u.a.createElement("div",{className:"tl-timeline-reset-buttons"},t.zoomBounds&&u.a.createElement("div",{className:"tl-timeline-unzoom"},u.a.createElement("button",{className:"btn btn-xs",onClick:function(){t.setZoomBounds()}},"reset zoom")),t.expandedTrims&&u.a.createElement("div",null,u.a.createElement("button",{className:"btn btn-xs",onClick:t.toggleExpandedTrims},"reset axis"))),u.a.createElement("style",{ref:g.hoverStyleTag}),u.a.createElement("div",{style:{flexBasis:r-28,display:"flex"}}," ",u.a.createElement("div",{className:"tl-timeline-leftbar",style:{paddingTop:yt,flexShrink:0}},u.a.createElement("div",{ref:g.timelineHeadersArea,className:Q("tl-timeline-tracklabels",{"tl-displaynone":i}),style:{width:f||"auto",minWidth:f||t.headersWidth}},S.map(function(e){return u.a.createElement(Et,{store:t,track:e.track,height:e.height,paddingLeft:e.indent,handleTrackHover:v})}),n&&n.map(function(e){return u.a.createElement(_t,{store:t,specification:e,handleTrackHover:v,disableHover:e.disableHover})}))),u.a.createElement("div",{className:"tl-viewport-pseudo-border",style:{height:y-15}}),u.a.createElement("div",{ref:g.timelineViewPort,className:"tl-timelineviewport",style:{flexShrink:1,height:y}},t.viewPortWidth>0&&t.ticks&&u.a.createElement("div",{className:"tl-timeline",onMouseDown:function(e){return xt(e,t,g,d)},onMouseUp:function(e){return xt(e,t,g,d)},onMouseMove:function(e){return xt(e,t,g,d)},onMouseLeave:function(e){return xt(e,t,g,d)}},u.a.createElement("div",{ref:g.cursor,style:{height:y-15},className:"tl-cursor"},u.a.createElement("div",{ref:g.cursorText})),u.a.createElement("div",{ref:g.zoomSelectBoxMask,className:"tl-zoom-selectbox-mask"}),u.a.createElement("div",{ref:g.zoomSelectBox,style:{height:y-15},className:"tl-zoom-selectbox"}),u.a.createElement("svg",{ref:g.timeline,width:w,height:y,className:"tl-timeline-svg"},u.a.createElement("g",{ref:g.timelineTracksArea},u.a.createElement(wt,{store:t,width:w,customTracks:n,handleTrackHover:v,visibleTracks:c}),!0!==p&&u.a.createElement(bt,{store:t,width:w}))))),u.a.createElement("div",{className:"tl-viewport-pseudo-border",style:{height:y-15}}),u.a.createElement(m.e,{buttons:["PDF","PNG","SVG"],filename:"timeline",getSvg:function(){return Ct(t,g.timelineTracksArea.current,n)},additionalRightButtons:[{key:"Data (ZIP)",content:u.a.createElement("span",null,"Data (ZIP)"),onClick:s}],dontFade:!0,type:"button",style:{marginLeft:7}})))}),kt=function e(t,n){t.forEach(function(t){var r=n.find(function(e){return e.trackTypeMatch.test(t.type)});r&&r.configureTrack(t),t.tracks&&t.tracks.length&&e(t.tracks,n)})}}).call(this,n(150))},963:function(e,t,n){"use strict";var r=n(0),o=n(9),a=n(829),i=n(192),l=n(2),u=n(964),s=n.n(u),c=n(5),p=n.n(c),f=n(6),d=n(3),m=n(870);function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var S=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":w(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},T=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),g(this,v(t).apply(this,arguments))}var n,o,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,r["Component"]),n=t,(o=[{key:"goToNextDatum",value:function(){this.isLastDatum||this.props.urlWrapper.setResourceUrl(this.props.resourceData[this.currentResourceIndex+1].url)}},{key:"goToPrevDatum",value:function(){this.isFirstDatum||this.props.urlWrapper.setResourceUrl(this.props.resourceData[this.currentResourceIndex-1].url)}},{key:"render",value:function(){var e=this.props.resourceData.length>1;return r.createElement("div",null,r.createElement(a.a,{title:this.currentResourceDatum.resourceDefinition.displayName,isLoading:!1,className:"pull-left",style:{marginBottom:10}}),r.createElement("div",{style:{width:"100%",height:this.iframeHeight,display:"flex",alignItems:"center"}},e&&r.createElement("div",{className:p()(s.a.carouselButton,h({},s.a.active,!this.isFirstDatum)),onClick:this.goToPrevDatum},r.createElement("i",{style:{marginRight:15},className:"fa fa-4x fa-chevron-left"})),this.httpIframeWithHttpsPortal?r.createElement("div",null,r.createElement("span",null,"We can't show this URL in the portal. Please use the link below:"),r.createElement("br",null),r.createElement("a",{href:this.currentResourceDatum.url},this.currentResourceDatum.url)):r.createElement("iframe",{src:this.iframeUrl,style:{width:"100%",height:"100%"}}),e&&r.createElement("div",{className:p()(s.a.carouselButton,h({},s.a.active,!this.isLastDatum)),onClick:this.goToNextDatum},r.createElement("i",{style:{marginLeft:15},className:"fa fa-4x fa-chevron-right"}))))}},{key:"iframeHeight",get:function(){return i.a.size.height-275}},{key:"currentResourceIndex",get:function(){var e=this;if(this.props.urlWrapper.query.resourceUrl){var t=this.props.resourceData.findIndex(function(t){return t.url===e.props.urlWrapper.query.resourceUrl});return-1===t?0:t}return 0}},{key:"currentResourceDatum",get:function(){return this.props.resourceData[this.currentResourceIndex]}},{key:"isFirstDatum",get:function(){return 0===this.currentResourceIndex}},{key:"isLastDatum",get:function(){return this.currentResourceIndex===this.props.resourceData.length-1}},{key:"httpIframeWithHttpsPortal",get:function(){return"https:"===Object(d.C)().location.protocol&&"http:"===new URL(this.currentResourceDatum.url).protocol}},{key:"iframeUrl",get:function(){var e=Object(m.b)(this.currentResourceDatum.url),t=this.currentResourceDatum.url;switch(e){case"pdf":t=Object(m.a)(this.currentResourceDatum.url)}return t}}])&&y(n.prototype,o),l&&y(n,l),t}();S([l.computed],T.prototype,"iframeHeight",null),S([l.computed],T.prototype,"currentResourceIndex",null),S([l.computed],T.prototype,"currentResourceDatum",null),S([f.default,l.action],T.prototype,"goToNextDatum",null),S([f.default,l.action],T.prototype,"goToPrevDatum",null),S([l.computed],T.prototype,"isFirstDatum",null),S([l.computed],T.prototype,"isLastDatum",null),S([l.computed],T.prototype,"httpIframeWithHttpsPortal",null),S([l.computed],T.prototype,"iframeUrl",null),T=S([o.observer],T),t.a=T},964:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__3mtfh",framedImage:"styles-module__framedImage__24LeD",carouselButton:"styles-module__carouselButton__35zgJ",active:"styles-module__active__xJZuN"}}}]);