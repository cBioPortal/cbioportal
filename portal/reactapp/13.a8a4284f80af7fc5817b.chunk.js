(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{1014:function(e,t,n){e.exports=n(15)(900)},1016:function(e,t,n){e.exports=n(15)(55)},1017:function(e,t,n){e.exports=n(15)(114)},1018:function(e,t,n){e.exports=n(15)(378)},1019:function(e,t,n){e.exports=n(15)(918)},1175:function(e,t,n){e.exports=n(15)(651)},1177:function(e,t,n){e.exports=n(15)(650)},1179:function(e,t,n){e.exports=n(15)(373)},1182:function(e,t,n){e.exports=n(15)(649)},1184:function(e,t,n){e.exports=n(15)(102)},1185:function(e,t,n){e.exports=n(15)(1008)},1187:function(e,t,n){e.exports=n(15)(656)},1189:function(e,t,n){e.exports=n(15)(992)},1190:function(e,t,n){e.exports=n(15)(965)},1191:function(e,t,n){e.exports=n(15)(991)},1194:function(e,t,n){e.exports=n(15)(963)},1198:function(e,t,n){e.exports=n(15)(205)},1201:function(e,t,n){e.exports=n(15)(755)},1202:function(e,t,n){e.exports=n(15)(687)},1203:function(e,t,n){e.exports=n(15)(253)},1204:function(e,t,n){e.exports=n(15)(70)},1205:function(e,t,n){e.exports=n(15)(376)},1208:function(e,t,n){e.exports=n(15)(50)},1216:function(e,t,n){},546:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(11),i=n(5),a=n(1014),s=n.n(a),l=n(3),u=(n(733),n(858)),c=n(163),p=n(7),d=n(1170),f=n.n(d);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _=n(1171),S=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=b(this,g(t).apply(this,arguments))).backgroundColorPlugin={beforeDraw:function(e){var t=e.chart.ctx;t.fillStyle="#F1F6FE",t.fillRect(0,0,e.chart.width,e.chart.height)}},e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,r["Component"]),n=t,(o=[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"getShortName",value:function(e){var t=e.shortName;return Object.assign({},e,{shortName:{"Esophagus/Stomach":"Stomach","Ovary/Fallopian Tube":"Ovary","Bladder/Urinary Tract":"Bladder","Head and Neck":"Head/Neck","Peripheral Nervous System":"PNS","Ampulla of Vater":"Amp. of Vater"}[t]||t})}},{key:"lightenDarkenColor",value:function(e,t){var n=_(e).slice(1),r=parseInt(n,16),o=(r>>16)+t;o>255?o=255:o<0&&(o=0);var i=(r>>8&255)+t;i>255?i=255:i<0&&(i=0);var a=(255&r)+t;return a>255?a=255:a<0&&(a=0),.2126*o+.7152*a+.0722*i>=254&&"White"!==e&&t>1?this.lightenDarkenColor(e,t/2):"#"+(a|i<<8|o<<16).toString(16)}},{key:"formatTooltipString",value:function(e){return f()(e,{width:30}).split(/\r?\n/).map(function(e){return e.trim()})}},{key:"componentDidMount",value:function(){var e=this,t=this.byPrimarySiteStudies;if(t.length){t.forEach(function(e){e.caseCount=e.studies.reduce(function(e,t){return e+t.allSampleCount},0)});var n=t.sort(function(e,t){return t.caseCount-e.caseCount}).slice(0,20).map(function(t){return e.getShortName(t)}),r=p.flattenDeep(n.map(function(t,n){return t.studies.sort(function(e,t){return t.allSampleCount-e.allSampleCount}).map(function(r,o){var i=3,a=t.color,s=r.name,l=r.studyId,u=r.allSampleCount,c=t.studies.length;"Cyan"===a?i=18:"Yellow"===a?i=11:p.includes(["LightBlue","LightSkyBlue","PeachPuff","LightYellow"],a)?i=0:"Teal"===a?i=1:"LightYellow"===a?i=-3:"Black"===a&&(i=6);var d=e.lightenDarkenColor(a,(o+i)/c*90);return{studyId:l,borderColor:p.includes(["Gainsboro","White","LightYellow"],a)?"#dddddd":"#F1F6FE",backgroundColor:d,borderWidth:1,label:s,total:t.caseCount,data:0===n?[u]:[].concat(h(Array(n).fill(0)),[u])}})})),o={labels:n.map(function(e){return e.shortName}),datasets:r},i=this,a={animation:{duration:0},title:{display:!0,text:"Cases by Top 20 Primary Sites",fontSize:14,fontStyle:"normal"},onClick:function(e){if(this.getElementAtEvent(e)[0]){var t=r[this.getElementAtEvent(e)[0]._datasetIndex].studyId;i.props.openStudy(t)}return!1},responsive:!0,tooltips:{enabled:!0,displayColors:!1,xPadding:10,yPadding:10,backgroundColor:"rgb(255,255,255)",bodyFontColor:"#000",bodyFontStyle:"bold",bodyFontSize:11,titleFontColor:"#000",titleFontStyle:"normal",filter:function(e){return!!e&&Number(e.xLabel)>0},callbacks:{title:function(t,n){if(t.length>0){var r=t[0],o=r.yLabel+": "+n.datasets[r.datasetIndex].total+" cases";return e.formatTooltipString(o)}},label:function(t,n){var r=n.datasets[t.datasetIndex].label+": "+t.xLabel+" cases";return e.formatTooltipString(r)}}},scales:{xAxes:[{stacked:!0}],yAxes:[{stacked:!0,gridLines:{display:!1},ticks:{fontSize:11}}]},legend:{display:!1}};new s.a(this.chartTarget,{type:"horizontalBar",data:o,options:a,plugins:[this.backgroundColorPlugin]})}}},{key:"render",value:function(){var e=this,t=this.byPrimarySiteStudies.length;return t?r.createElement("canvas",{ref:function(t){return e.chartTarget=t},height:70+430*(t>20?20:t)/20}):null}},{key:"byPrimarySiteStudies",get:function(){return this.props.data.filter(function(e){return p.every(e.studies,function(e){return"other"!==e.cancerTypeId&&"mixed"!==e.cancerTypeId})})}}])&&m(n.prototype,o),i&&m(n,i),t}(),E=n(220),w=n(6),P=n(93),O=n(16),T=n(167);function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var j=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":x(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},N=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=I(this,k(t).call(this,e))).state={twitterLoading:!0},n}var o,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(t,r["Component"]),o=t,(i=[{key:"CancerTypeList",value:function(){return this.logic.cancerTypeListView.getChildCancerTypes(this.studyStore.treeData.rootCancerType,!0)}},{key:"CancerTypeDescendantStudy",value:function(e){var t=e.cancerType;return this.logic.cancerTypeListView.getDescendantCancerStudies(t)}},{key:"CancerTypeDescendantStudies",value:function(e){var t=this;return e.filter(function(e){return"other"!==e.cancerTypeId&&"mixed"!==e.cancerTypeId}).map(function(e){return{shortName:e.name,color:e.dedicatedColor,studies:t.CancerTypeDescendantStudy({cancerType:e})}})}},{key:"getWhatsNew",value:function(){var e=this;if(l.b.serverConfig.skin_right_nav_show_whats_new){if(p.isEmpty(l.b.serverConfig.skin_right_nav_whats_new_blurb)){var t=n(1173).Timeline;return r.createElement("div",{className:"rightBarSection",style:{paddingBottom:20}},r.createElement("h3",{style:{borderBottom:0}},"What's New",r.createElement("a",{href:"http://www.twitter.com/cbioportal",className:"pull-right"},"@cbioportal"," ",r.createElement("i",{className:"fa fa-twitter","aria-hidden":"true"}))),r.createElement("div",{style:{marginTop:3}},r.createElement(t,{dataSource:{sourceType:"profile",screenName:"cbioportal"},options:{username:"cbioportal",height:"200",chrome:"noheader%20nofooter"},onLoad:function(){return e.setState({twitterLoading:!1})}})),r.createElement("div",null,this.state.twitterLoading&&r.createElement("span",{style:{textAlign:"center"}},r.createElement(P.a,{isLoading:!0,small:!0}))||r.createElement("div",{style:{paddingTop:5}},r.createElement("p",{style:{textAlign:"center"}},"Sign up for low-volume email news alerts"),r.createElement("a",{target:"_blank",className:"btn btn-default btn-sm",href:"http://groups.google.com/group/cbioportal-news/boxsubscribe",style:{width:"100%"}},"Subscribe"))))}return r.createElement("div",{className:"rightBarSection"},r.createElement("h3",null,"What's New"),r.createElement("div",{dangerouslySetInnerHTML:{__html:l.b.serverConfig.skin_right_nav_whats_new_blurb}}))}return null}},{key:"getExampleSection",value:function(){return l.b.serverConfig.skin_right_nav_show_examples?p.isEmpty(l.b.serverConfig.skin_examples_right_column_html)?r.createElement("div",{className:"rightBarSection exampleQueries"},r.createElement("h3",null,"Example Queries"),r.createElement("ul",null,r.createElement("li",null,r.createElement(w.b,{to:"/comparison/mutations?sessionId=5cf89323e4b0ab413787436c"},"Primary vs. metastatic prostate cancer")),r.createElement("li",null,r.createElement(w.b,{to:"/results?cancer_study_list=coadread_tcga_pub&cancer_study_id=coadread_tcga_pub&genetic_profile_ids_PROFILE_MUTATION_EXTENDED=coadread_tcga_pub_mutations&genetic_profile_ids_PROFILE_COPY_NUMBER_ALTERATION=coadread_tcga_pub_gistic&Z_SCORE_THRESHOLD=2.0&case_set_id=coadread_tcga_pub_nonhypermut&case_ids=&gene_list=KRAS+NRAS+BRAF&gene_set_choice=user-defined-list"},"RAS/RAF alterations in colorectal cancer")),r.createElement("li",null,r.createElement(w.b,{to:"/results/".concat(T.a.MUTATIONS,"?cancer_study_list=ov_tcga_pub&cancer_study_id=ov_tcga_pub&genetic_profile_ids_PROFILE_MUTATION_EXTENDED=ov_tcga_pub_mutations&Z_SCORE_THRESHOLD=2.0&case_set_id=ov_tcga_pub_3way_complete&case_ids=&gene_list=BRCA1+BRCA2&gene_set_choice=user-defined-list")},"BRCA1 and BRCA2 mutations in ovarian cancer")),r.createElement("li",null,r.createElement(w.b,{to:"/results?cancer_study_list=ucec_tcga_pub&cancer_study_id=ucec_tcga_pub&genetic_profile_ids_PROFILE_MUTATION_EXTENDED=ucec_tcga_pub_mutations&Z_SCORE_THRESHOLD=2.0&RPPA_SCORE_THRESHOLD=2.0&data_priority=0&case_set_id=ucec_tcga_pub_sequenced&case_ids=&gene_set_choice=user-defined-list&gene_list=POLE%3A+MUT+%3D+P286+MUT+%3D+V411+MUT+%3D+L424+MUT+%3D+S297F&clinical_param_selection=null"},"POLE hotspot mutations in endometrial cancer")),r.createElement("li",null,r.createElement(w.b,{to:"/results?case_set_id=gbm_tcga_pub_sequenced&Action=Submit&genetic_profile_ids_PROFILE_MUTATION_EXTENDED=gbm_tcga_pub_mutations&genetic_profile_ids_PROFILE_COPY_NUMBER_ALTERATION=gbm_tcga_pub_cna_rae&case_ids=&Z_SCORE_THRESHOLD=1.0&cancer_study_list=gbm_tcga_pub&cancer_study_id=gbm_tcga_pub&gene_list=TP53+MDM2+MDM4&gene_set_choice=user-defined_list"},"TP53 and MDM2/4 alterations in GBM")),r.createElement("li",null,r.createElement(w.b,{to:"/results/".concat(T.a.DOWNLOAD,"?case_set_id=gbm_tcga_pub_sequenced&Action=Submit&genetic_profile_ids_PROFILE_MUTATION_EXTENDED=gbm_tcga_pub_mutations&cancer_study_list=gbm_tcga_pub&cancer_study_id=gbm_tcga_pub&gene_list=PTEN&gene_set_choice=user-defined_list&transpose_matrix=on")},"PTEN mutations in GBM in text format")),r.createElement("li",null,r.createElement(w.b,{to:"/patient?studyId=ucec_tcga_pub&caseId=TCGA-BK-A0CC"},"Patient view of an endometrial cancer case")),r.createElement("li",null,r.createElement(w.b,{to:"/study?id=laml_tcga_pan_can_atlas_2018,acc_tcga_pan_can_atlas_2018,blca_tcga_pan_can_atlas_2018,lgg_tcga_pan_can_atlas_2018,brca_tcga_pan_can_atlas_2018,cesc_tcga_pan_can_atlas_2018,chol_tcga_pan_can_atlas_2018,coadread_tcga_pan_can_atlas_2018,dlbc_tcga_pan_can_atlas_2018,esca_tcga_pan_can_atlas_2018,gbm_tcga_pan_can_atlas_2018,hnsc_tcga_pan_can_atlas_2018,kich_tcga_pan_can_atlas_2018,kirc_tcga_pan_can_atlas_2018,kirp_tcga_pan_can_atlas_2018,lihc_tcga_pan_can_atlas_2018,luad_tcga_pan_can_atlas_2018,lusc_tcga_pan_can_atlas_2018,meso_tcga_pan_can_atlas_2018,ov_tcga_pan_can_atlas_2018,paad_tcga_pan_can_atlas_2018,pcpg_tcga_pan_can_atlas_2018,prad_tcga_pan_can_atlas_2018,sarc_tcga_pan_can_atlas_2018,skcm_tcga_pan_can_atlas_2018,stad_tcga_pan_can_atlas_2018,tgct_tcga_pan_can_atlas_2018,thym_tcga_pan_can_atlas_2018,thca_tcga_pan_can_atlas_2018,ucs_tcga_pan_can_atlas_2018,ucec_tcga_pan_can_atlas_2018,uvm_tcga_pan_can_atlas_2018"},"All TCGA Pan-Cancer")),r.createElement("li",null,r.createElement(w.b,{to:"/study?id=msk_impact_2017"},"MSK-IMPACT clinical cohort, Zehir et al. 2017")),r.createElement("li",null,r.createElement(w.b,{to:"/study?id=5c26a970e4b05228701f9fa9"},"Histone mutations across cancer types")))):r.createElement("div",{className:"rightBarSection exampleQueries",dangerouslySetInnerHTML:{__html:"<h3>Example Queries</h3>"+l.b.serverConfig.skin_examples_right_column_html}}):null}},{key:"getTestimonialsSection",value:function(){return l.b.serverConfig.skin_right_nav_show_testimonials?r.createElement("div",{className:"rightBarSection",style:{minHeight:"300px"}},r.createElement("h3",null,"Testimonials"),r.createElement(E.b,null)):null}},{key:"getDataSetsSection",value:function(){return l.b.serverConfig.skin_right_nav_show_data_sets?r.createElement("div",{className:"rightBarSection"},r.createElement("h3",null,"Cancer Studies"),this.studyStore.cancerStudies.isComplete&&this.studyStore.cancerTypes.isComplete&&r.createElement("div",null,r.createElement("p",null,"The portal contains"," ",this.studyStore.cancerStudies.result.length," ","cancer studies"," ",r.createElement(w.b,{to:"/datasets"},"(details)")),r.createElement(S,{data:this.CancerTypeDescendantStudies(this.CancerTypeList()),openStudy:function(e){Object(O.C)(e)}})),this.studyStore.cancerStudies.isPending&&r.createElement("span",{style:{textAlign:"center"}},r.createElement(P.a,{isLoading:!0,small:!0}))):null}},{key:"render",value:function(){return r.createElement("div",null,this.getWhatsNew(),this.getDataSetsSection(),this.getExampleSection(),this.getTestimonialsSection())}},{key:"studyStore",get:function(){return this.props.queryStore}},{key:"logic",get:function(){return this.studyStore.studyListLogic}}])&&C(o.prototype,i),a&&C(o,a),t}(),A=N=j([o.observer],N),D=(n(1216),n(25)),M=n(853);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function H(e){return(H="function"==typeof Symbol&&"symbol"===L(Symbol.iterator)?function(e){return L(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":L(e)})(e)}var Q=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":H(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};s.a.plugins.register({beforeDraw:function(e){var t=e.chart.ctx;t.fillStyle="white",t.fillRect(0,0,e.chart.width,e.chart.height)}});var q=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=V(this,B(t).call(this,e))).showQuerySelector=!0,n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentWillMount",value:function(){this.queryStore=Object(M.a)()}},{key:"handleTabChange",value:function(e){this.props.routing.updateRoute({tab:e})}},{key:"getQueryStore",value:function(){return this.queryStore}},{key:"render",value:function(){return r.createElement(c.a,{className:"homePageLayout",noMargin:!0,rightBar:r.createElement(A,{queryStore:this.queryStore})},r.createElement("div",{className:"headBlock",dangerouslySetInnerHTML:{__html:l.b.serverConfig.skin_blurb}}),r.createElement(u.a,{getQueryStore:this.getQueryStore,showQuickSearchTab:l.b.serverConfig.quick_search_enabled,showDownloadTab:!0}))}}])&&G(n.prototype,o),i&&G(n,i),t}();Q([i.observable],q.prototype,"showQuerySelector",void 0),Q([D.a],q.prototype,"getQueryStore",null),q=Q([Object(o.inject)("routing"),o.observer],q);t.default=q},563:function(e,t,n){"use strict";var r=n(7),o=n(161),i=n(5);function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l="tissue",u="My Virtual Studies",c="Studies",p=function(){function e(t){var n,o,i,s=this,p=t.cancerTypes,d=void 0===p?[]:p,f=t.studies,y=void 0===f?[]:f,h=t.priorityStudies,m=void 0===h?{}:h,b=t.virtualStudies,g=void 0===b?[]:b,v=t.maxTreeDepth,_=void 0===v?0:v;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootCancerType={clinicalTrialKeywords:"",dedicatedColor:"",name:"All",parent:"",shortName:"All",cancerTypeId:l},this.virtualStudyCategory={clinicalTrialKeywords:"",dedicatedColor:"",name:u,parent:l,shortName:u,cancerTypeId:u,alwaysVisible:!0},this.physicalStudyCategory={clinicalTrialKeywords:"",dedicatedColor:"",name:c,parent:l,shortName:c,cancerTypeId:c,alwaysVisible:!0},this.priorityCategories=[],this.map_node_meta=new Map,this.map_cancerTypeId_cancerType=new Map,this.map_studyId_cancerStudy=new Map,d=e.sortNodes(d);var S=g.map(function(e){if(e.data)return{allSampleCount:r.sumBy(e.data.studies,function(e){return e.samples.length}),studyId:e.id,name:e.data.name,description:e.data.description,cancerTypeId:u}}).filter(function(e){return e});for(var E in m)this.priorityCategories.push({clinicalTrialKeywords:"",dedicatedColor:"",name:E,parent:l,shortName:E,cancerTypeId:E});0===_&&g.length>0&&(y=r.map(y,function(e){return e.cancerTypeId=s.physicalStudyCategory.cancerTypeId,e}));for(var w=0,P=[d=[this.virtualStudyCategory,this.physicalStudyCategory].concat(a(this.priorityCategories),[this.rootCancerType],a(d)),y=e.sortNodes([].concat(a(S),a(y)))];w<P.length;w++){n=P[w];var O=!0,T=!1,C=void 0;try{for(var I,k=n[Symbol.iterator]();!(O=(I=k.next()).done);O=!0){o=I.value;var R=n==d;R?this.map_cancerTypeId_cancerType.set(o.cancerTypeId,o):this.map_studyId_cancerStudy.set(o.studyId,o);var x=R?o.name:[o.name,o.description].join("\n");this.map_node_meta.set(o,{isCancerType:R,isPriorityCategory:!1,priorityCategories:[],childCancerTypes:[],childStudies:[],descendantStudies:[],descendantCancerTypes:[],ancestors:[],siblings:[],searchTerms:x})}}catch(e){T=!0,C=e}finally{try{O||null==k.return||k.return()}finally{if(T)throw C}}}var j=!0,N=!1,A=void 0;try{for(var D,M=this.priorityCategories[Symbol.iterator]();!(j=(D=M.next()).done);j=!0){var L=D.value;(i=this.map_node_meta.get(L)).isPriorityCategory=!0;var G=!0,V=!1,B=void 0;try{for(var F,H=m[L.cancerTypeId][Symbol.iterator]();!(G=(F=H.next()).done);G=!0){var Q=F.value,q=this.map_studyId_cancerStudy.get(Q);if(q)i.childStudies.push(q),i.descendantStudies.push(q),this.map_node_meta.get(q).priorityCategories.push(L)}}catch(e){V=!0,B=e}finally{try{G||null==H.return||H.return()}finally{if(V)throw B}}}}catch(e){N=!0,A=e}finally{try{j||null==M.return||M.return()}finally{if(N)throw A}}for(var U=0,W=[d,y];U<W.length;U++){n=W[U];var K=!0,Y=!1,z=void 0;try{for(var X,J=n[Symbol.iterator]();!(K=(X=J.next()).done);K=!0){o=X.value,i=this.map_node_meta.get(o);var Z=void 0;if(i.isCancerType){var $=o.alwaysVisible;Z=this.map_cancerTypeId_cancerType.get(o.parent),$&&Z&&(Z.alwaysVisible=$)}else Z=this.map_cancerTypeId_cancerType.get(o.cancerTypeId);var ee=Z&&this.map_node_meta.get(Z);for(ee&&(i.isCancerType?ee.childCancerTypes.push(o):ee.childStudies.push(o));Z&&ee;)i.ancestors.push(Z),i.isCancerType?ee.descendantCancerTypes.push(o):ee.descendantStudies.push(o),ee=(Z=this.map_cancerTypeId_cancerType.get(Z.parent))&&this.map_node_meta.get(Z);var te=[].concat(a(i.ancestors),a(i.priorityCategories)).map(function(e){return e.name});i.searchTerms=[i.searchTerms].concat(a(te)).join("\n")}}catch(e){Y=!0,z=e}finally{try{K||null==J.return||J.return()}finally{if(Y)throw z}}}var ne=!0,re=!1,oe=void 0;try{for(var ie,ae=y[Symbol.iterator]();!(ne=(ie=ae.next()).done);ne=!0){o=ie.value;var se=(i=this.map_node_meta.get(o)).ancestors[i.ancestors.length-2];if(se){var le=this.map_node_meta.get(se);i.siblings=le.descendantStudies}}}catch(e){re=!0,oe=e}finally{try{ne||null==ae.return||ae.return()}finally{if(re)throw oe}}}var t,n,o;return t=e,o=[{key:"sortNodes",value:function(e){return r.sortBy(e,function(e){return e.name})}}],(n=null)&&s(t.prototype,n),o&&s(t,o),e}(),d=n(4),f=n(79),y=n(94),h=n(560),m=n(95),b=n.n(m),g=n(3),v=n(674),_=n(47),S=n.n(_),E=n(16),w=n(677),P=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}l((r=r.apply(e,t||[])).next())})};function O(e,t,n){return P(this,void 0,void 0,regeneratorRuntime.mark(function o(){var i,a;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return i=r.chunk(e,n),a=i.map(t),o.t0=r,o.next=5,Promise.all(a);case 5:return o.t1=o.sent,o.abrupt("return",o.t0.flatten.call(o.t0,o.t1));case 7:case"end":return o.stop()}},o)}))}var T=n(548);function C(e){return function(e,t){return{query:Object.assign({},e,t)}}(function(e,t){var n=e.selectableSelectedStudyIds,r=t?t.replace(/\s+/g,"+"):e.asyncCustomCaseSet.result.map(function(e){return e.studyId+":"+e.sampleId}).join("+"),o={cancer_study_id:1===n.length?n[0]:"all",Z_SCORE_THRESHOLD:e.zScoreThreshold,RPPA_SCORE_THRESHOLD:e.rppaScoreThreshold,data_priority:e.dataTypePriorityCode,profileFilter:e.dataTypePriorityCode,case_set_id:e.selectedSampleListId||"-1",case_ids:r,gene_list:encodeURIComponent(ie(e.geneQuery)||" "),geneset_list:ie(e.genesetQuery)||" ",tab_index:e.forDownloadTab?"tab_download":"tab_visualize",transpose_matrix:e.transposeDataMatrix?"on":void 0,Action:"Submit"};1!==n.length&&(o.cancer_study_list=n.join(","));return o}(e),function(e,t){return{genetic_profile_ids_PROFILE_MUTATION_EXTENDED:e.getSelectedProfileIdFromMolecularAlterationType("MUTATION_EXTENDED",t),genetic_profile_ids_PROFILE_COPY_NUMBER_ALTERATION:e.getSelectedProfileIdFromMolecularAlterationType("COPY_NUMBER_ALTERATION",t),genetic_profile_ids_PROFILE_MRNA_EXPRESSION:e.getSelectedProfileIdFromMolecularAlterationType("MRNA_EXPRESSION",t),genetic_profile_ids_PROFILE_METHYLATION:e.getSelectedProfileIdFromMolecularAlterationType("METHYLATION",t)||e.getSelectedProfileIdFromMolecularAlterationType("METHYLATION_BINARY",t),genetic_profile_ids_PROFILE_PROTEIN_EXPRESSION:e.getSelectedProfileIdFromMolecularAlterationType("PROTEIN_LEVEL",t),genetic_profile_ids_PROFILE_GENESET_SCORE:e.getSelectedProfileIdFromMolecularAlterationType("GENESET_SCORE",t),genetic_profile_ids_PROFILE_GENERIC_ASSAY:e.getSelectedProfileIdFromMolecularAlterationType("GENERIC_ASSAY",t)}}(e))}function I(e){var t=!1,n=!1,r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;if(l.showProfileInAnalysisTab){switch(l.molecularAlterationType){case T.a.MUTATION_EXTENDED:t=!0;break;case T.a.COPY_NUMBER_ALTERATION:n=!0}if(t&&n)break}}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return{mutation:t,cna:n}}function k(e,t,n){var o={},i={},a={},s={},l={},u={},c={},p={};r.each(e,function(e){switch(e.category){case"all_cases_with_mutation_and_cna_data":a[e.studyId]=r.keyBy(e.sampleIds);break;case"all_cases_with_mutation_data":o[e.studyId]=r.keyBy(e.sampleIds);break;case"all_cases_with_cna_data":i[e.studyId]=r.keyBy(e.sampleIds);break;case"all_cases_in_study":s[e.studyId]=r.keyBy(e.sampleIds);break;default:e.sampleListId===e.studyId+"_all"&&(s[e.studyId]=r.keyBy(e.sampleIds))}});var d=r.map(n,function(e){return e.id}),f=t.filter(function(e){return!r.includes(d,e)});return r.forEach(f,function(e){l[e]=o[e]||{},u[e]=i[e]||{},c[e]=a[e]||{},p[e]=s[e]||{}}),r.forEach(n,function(e){r.forEach(e.data.studies,function(e){r.includes(f,e.id)||(l[e.id]=l[e.id]||{},u[e.id]=u[e.id]||{},c[e.id]=c[e.id]||{},p[e.id]=p[e.id]||{},r.forEach(e.samples,function(t){o[e.id]&&o[e.id][t]&&(l[e.id][t]=t),i[e.id]&&i[e.id][t]&&(u[e.id][t]=t),a[e.id]&&a[e.id][t]&&(c[e.id][t]=t),s[e.id]&&s[e.id][t]&&(p[e.id][t]=t)}))})}),{w_mut:r.reduce(l,function(e,t){return e+Object.keys(t).length},0),w_cna:r.reduce(u,function(e,t){return e+Object.keys(t).length},0),w_mut_cna:r.reduce(c,function(e,t){return e+Object.keys(t).length},0),all:r.reduce(p,function(e,t){return e+Object.keys(t).length},0)}}var R=n(549);function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var D=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}l((r=r.apply(e,t||[])).next())})};function M(e){return e}function L(e,t){return t}function G(e){return D(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.fetchMolecularProfilesUsingPOST({molecularProfileFilter:{studyIds:e}});case 2:return n=t.sent,i=r.groupBy(n,function(e){return e.studyId}),t.abrupt("return",e.map(function(e){return{data:[i[e]||[]],meta:e}}));case 5:case"end":return t.stop()}},t)}))}var V=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),j(this,N(t).call(this,M,L,G))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,R["a"]),t}(),B=n(550),F=n(117);function H(e){var t=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value;r.has(l,"genesets")&&l.genesets.forEach(function(e){return t.push(e)})}}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return t}var Q=n(579);function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){return!t||"object"!==q(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Y=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}l((r=r.apply(e,t||[])).next())})};var z=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),U(this,W(t).call(this,function(e){return{invoke:function(){return function(e){return Y(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.getAllSampleListsInStudyUsingGET({studyId:e,projection:"DETAILED"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}))}(e)}}},function(e){return e}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(t,Q["a"]),t}();var X=n(624);function J(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",function(){return re}),n.d(t,"e",function(){return ie}),n.d(t,"b",function(){return ae}),n.d(t,"c",function(){return le}),n.d(t,"d",function(){return ue});var te=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ee(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ne=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}l((r=r.apply(e,t||[])).next())})},re="-1";function oe(e){return Number.isInteger(Number(e))}function ie(e){return e.trim().replace(/^\s+|\s+$/g,"").replace(/[ \+]+/g," ").toUpperCase()}var ae,se=["searchText","selectableSelectedStudyIds","dataTypePriority","selectedProfileIds","zScoreThreshold","rppaScoreThreshold","selectedSampleListId","caseIds","caseIdsMode","geneQuery","genesetQuery"];!function(e){e[e.Unfocused=0]="Unfocused",e[e.ShouldFocus=1]="ShouldFocus",e[e.Focused=2]="Focused"}(ae||(ae={}));var le=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.studiesHaveChangedSinceInitialization=!1,this.deletedVirtualStudies=[],this.forDownloadTab=!1,this.transposeDataMatrix=!1,this.searchText="",this._allSelectedStudyIds=i.observable.map(),this._defaultSelectedIds=i.observable.map(),this.dataTypePriority={mutation:!0,cna:!0},this._selectedProfileIds=void 0,this.zScoreThreshold="2.0",this.rppaScoreThreshold="2.0",this._selectedSampleListId=void 0,this.caseIds="",this._defaultStudySampleMap={},this._caseIdsMode="sample",this._geneQuery="",this.rawGenesetQuery="",this.geneQueryErrorDisplayStatus=ae.Unfocused,this.genesetQueryErrorDisplayStatus=ae.Unfocused,this.showMutSigPopup=!1,this.showGisticPopup=!1,this.showGenesetsHierarchyPopup=!1,this.showGenesetsVolcanoPopup=!1,this.priorityStudies=g.a.parseConfigFormat(g.b.serverConfig.priority_studies),this.showSelectedStudiesOnly=!1,this.selectedCancerTypeIds=[],this.clickAgainToDeselectSingle=!0,this.searchExampleMessage="",this.volcanoPlotSelectedPercentile={label:"75%",value:"75"},this._maxTreeDepth=parseInt(g.b.serverConfig.skin_query_max_tree_depth,10),this.cancerTypes=Object(d.W)({invoke:function(){return ne(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.a.getAllCancerTypesUsingGET({}).then(function(e){return e.filter(function(e){return"null"!==e.parent})}));case 1:case"end":return e.stop()}},e)}))}},[]),this.cancerStudies=Object(d.W)(o.a.getAllStudiesUsingGET({projection:"SUMMARY"}),[]),this.cancerStudyIdsSet=Object(d.W)({await:function(){return[n.cancerStudies]},invoke:function(){return ne(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(d.cb)(this.cancerStudies.result.map(function(e){return e.studyId})));case 1:case"end":return e.stop()}},e,this)}))},default:{}}),this.physicalStudiesIdsSet=Object(d.W)({await:function(){return[n.cancerStudies]},invoke:function(){return ne(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.cancerStudies.result.reduce(function(e,t){return e[t.studyId]=[t.studyId],e},{}));case 1:case"end":return e.stop()}},e,this)}))},default:{}}),this.virtualStudiesIdsSet=Object(d.W)({await:function(){return[n.userVirtualStudies]},invoke:function(){return ne(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.userVirtualStudies.result.reduce(function(e,t){return e[t.id]=[t.id],e},{}));case 1:case"end":return e.stop()}},e,this)}))},default:{}}),this.sharedQueriedStudiesSet=Object(d.W)({await:function(){return[n.physicalStudiesIdsSet,n.virtualStudiesIdsSet]},invoke:function(){return ne(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,o,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.physicalStudiesIdsSet.result,n=this.virtualStudiesIdsSet.result,o=Object.assign({},t,n),i=this._defaultSelectedIds.keys().filter(function(e){return!o[e]}),a={},e.next=7,Promise.all(i.map(function(e){return new Promise(function(n,o){F.a.getVirtualStudy(e).then(function(o){var i=o.data.studies.map(function(e){return e.id}),s=i.filter(function(e){return!t[e]});r.isEmpty(s)&&(a[e]=i),n()}).catch(function(){n()})})}));case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}},e,this)}))},default:{}}),this.physicalStudiesSet=Object(d.W)({await:function(){return[n.cancerStudies]},invoke:function(){return ne(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.cancerStudies.result.reduce(function(e,t){return e[t.studyId]=t,e},{}));case 1:case"end":return e.stop()}},e,this)}))},default:{}}),this.userVirtualStudies=Object(d.W)(function(){return ne(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!g.a.sessionServiceIsEnabled()||!this.userLoggedIn){e.next=13;break}return e.prev=1,e.next=4,F.a.getUserVirtualStudies();case 4:return t=e.sent,e.abrupt("return",t);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",[]);case 11:e.next=14;break;case 13:return e.abrupt("return",[]);case 14:case"end":return e.stop()}},e,this,[[1,8]])}))},[]),this.userVirtualStudiesSet=Object(d.W)({await:function(){return[n.userVirtualStudies]},invoke:function(){return ne(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.userVirtualStudies.result.reduce(function(e,t){return e[t.id]=t,e},{}));case 1:case"end":return e.stop()}},e,this)}))},default:{}}),this.sharedVirtualStudiesSet=Object(d.W)({await:function(){return[n.physicalStudiesSet,n.userVirtualStudiesSet]},invoke:function(){return ne(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,o,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.physicalStudiesSet.result,n=this.userVirtualStudiesSet.result,o=Object.assign([],Object.keys(t),Object.keys(n)),i=this._defaultSelectedIds.keys().filter(function(e){return!r.includes(o,e)}),a={},e.next=7,Promise.all(i.map(function(e){return new Promise(function(n,r){F.a.getVirtualStudy(e).then(function(r){0===r.data.studies.map(function(e){return e.id}).filter(function(e){return!t[e]}).length&&(a[e]=r),n()}).catch(function(){n()})})}));case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}},e,this)}))},default:{}}),this.selectedStudyToSampleSet=Object(d.W)({await:function(){return[n.userVirtualStudiesSet,n.sharedVirtualStudiesSet]},invoke:function(){return ne(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,i,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={},n=r.filter(this.allSelectedStudyIds,function(e){return a.physicalStudiesSet.result[e]}),this._allSelectedStudyIds.keys().length===n.length){e.next=9;break}return e.next=5,Promise.all(r.map(n,function(e){return o.a.getAllSamplesInStudyUsingGET({studyId:e}).then(function(n){t[e]=Object(d.cb)(n.map(function(e){return e.sampleId}))})}));case 5:i=Object.assign({},this.userVirtualStudiesSet.result,this.sharedVirtualStudiesSet.result),this._allSelectedStudyIds.keys().forEach(function(e){i[e]&&i[e].data.studies.forEach(function(e){void 0===t[e.id]&&(t[e.id]=Object(d.cb)(e.samples))})}),e.next=10;break;case 9:n.forEach(function(e){t[e]={}});case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}},e,this)}))},default:{}}),this.selectableStudiesSet=Object(d.W)({await:function(){return[n.physicalStudiesSet,n.selectedStudyToSampleSet]},invoke:function(){return ne(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},r.each(this.physicalStudiesSet.result,function(e,n){t[n]=[n]}),r.each(this.userVirtualStudiesSet.result,function(e,n){t[n]=[n]}),r.each(this.sharedVirtualStudiesSet.result,function(e,n){t[n]=e.data.studies.map(function(e){return e.id})}),e.abrupt("return",t);case 5:case"end":return e.stop()}},e,this)}))},default:{},onResult:function(){if(n.selectedSampleListId!==re){var e=n.sharedVirtualStudiesSet.result,t=r.filter(n._allSelectedStudyIds.keys(),function(t){return void 0!==e[t]});if(r.isEmpty(t))n.caseIds="";else{var o=n._defaultStudySampleMap;(void 0===o||r.isEmpty(o))&&(o=r.reduce(n.selectedStudyToSampleSet.result,function(e,t,n){return e[n]=r.keys(t),e},{})),r.some(o,function(e){return e.length>0})&&n.setCaseIds(o)}}}}),this.unknownStudyIds=Object(d.W)({await:function(){return[n.selectableStudiesSet]},invoke:function(){return ne(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.selectableStudiesSet.result,n=this._allSelectedStudyIds.keys(),e.abrupt("return",n.filter(function(e){return!(e in t)}));case 3:case"end":return e.stop()}},e,this)}))},default:[]}),this.molecularProfiles=Object(d.W)({invoke:function(){return ne(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==this.physicalStudyIdsInSelection.length){e.next=6;break}return e.next=3,o.a.getAllMolecularProfilesInStudyUsingGET({studyId:this.physicalStudyIdsInSelection[0]});case 3:return e.abrupt("return",e.sent);case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}},e,this)}))},default:[],onResult:function(){n.initiallySelected.profileIds&&!n.studiesHaveChangedSinceInitialization||(n._selectedProfileIds=void 0)}}),this.molecularProfilesInSelectedStudies=Object(d.W)({invoke:function(){return ne(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.molecularProfilesInStudyCache.getPromise(this.physicalStudyIdsInSelection,!0);case 2:return t=e.sent,e.abrupt("return",r.flatten(t.map(function(e){return e.data?e.data:[]})));case 4:case"end":return e.stop()}},e,this)}))},default:[]}),this.sampleListInSelectedStudies=Object(d.W)({await:function(){return n.physicalStudyIdsInSelection.map(function(e){return n.sampleListsInStudyCache.get(e)})},invoke:function(){return ne(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.reduce(this.physicalStudyIdsInSelection,function(e,n){var o=t.sampleListsInStudyCache.get(n).result;return r.isUndefined(o)||(e=e.concat(o)),e},[]));case 1:case"end":return e.stop()}},e,this)}))},default:[],onResult:function(){n.initiallySelected.sampleListId&&!n.studiesHaveChangedSinceInitialization||(n._selectedSampleListId=void 0)}}),this.profileAvailability=Object(d.W)({await:function(){return[n.molecularProfilesInSelectedStudies]},invoke:function(){return Promise.resolve(I(n.molecularProfilesInSelectedStudies.result))},default:{mutation:!1,cna:!1},onResult:function(){n.initiallySelected.sampleListId&&!n.studiesHaveChangedSinceInitialization||(n.dataTypePriority=I(n.molecularProfilesInSelectedStudies.result))}}),this.profiledSamplesCount=Object(d.W)({await:function(){return[n.sampleListInSelectedStudies]},invoke:function(){return ne(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k(this.sampleListInSelectedStudies.result,this.selectableSelectedStudyIds,this.selectedVirtualStudies));case 1:case"end":return e.stop()}},e,this)}))},default:{w_mut:0,w_cna:0,w_mut_cna:0,all:0}}),this.sampleLists=Object(d.W)({invoke:function(){return ne(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isSingleNonVirtualStudySelected){e.next=2;break}return e.abrupt("return",[]);case 2:return this.sampleListsInStudyCache.get(this.selectableSelectedStudyIds[0]).result,e.next=5,this.sampleListsInStudyCache.get(this.selectableSelectedStudyIds[0]).result;case 5:return t=e.sent,e.abrupt("return",r.sortBy(t,function(e){return e.name}));case 7:case"end":return e.stop()}},e,this)}))},default:[],onResult:function(){n.initiallySelected.sampleListId&&!n.studiesHaveChangedSinceInitialization||(n._selectedSampleListId=void 0)}}),this.mutSigForSingleStudy=Object(d.W)({invoke:function(){return ne(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isSingleNonVirtualStudySelected){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,y.a.getSignificantlyMutatedGenesUsingGET({studyId:this.selectableSelectedStudyIds[0]});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}))},default:[]}),this.gisticForSingleStudy=Object(d.W)({invoke:function(){return ne(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isSingleNonVirtualStudySelected){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,y.a.getSignificantCopyNumberRegionsUsingGET({studyId:this.selectableSelectedStudyIds[0]});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}))},default:[]}),this.genes=Object(d.W)({invoke:function(){return n.invokeGenesLater(n.geneIds)},default:{found:[],suggestions:[]}}),this.genesets=Object(d.W)({invoke:function(){return n.invokeGenesetsLater(n.genesetIds)},default:{found:[],invalid:[]}}),this.invokeGenesLater=Object(f.debounceAsync)(function(e){return ne(n,void 0,void 0,regeneratorRuntime.mark(function t(){var n,i,a,s,l,u,c,p,d,f,y=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.partition(r.uniq(e),oe),i=Z(n,2),a=i[0],s=i[1],l=function(){return ne(y,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,i,s,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.length){e.next=6;break}return e.next=3,o.a.fetchGenesUsingPOST({geneIdType:"ENTREZ_GENE_ID",geneIds:a});case 3:t=e.sent,e.next=7;break;case 6:t=[];case 7:return n=r.difference(a,t.map(function(e){return e.entrezGeneId+""})),i=n.map(function(e){return{alias:e,genes:[]}}),s=t.map(function(e){return{alias:e.entrezGeneId+"",genes:[e]}}),l=[].concat(J(i),J(s)),e.abrupt("return",{found:t,suggestions:l});case 12:case"end":return e.stop()}},e)}))},u=function(){return ne(y,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,i,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.length){e.next=6;break}return e.next=3,o.a.fetchGenesUsingPOST({geneIdType:"HUGO_GENE_SYMBOL",geneIds:s});case 3:t=e.sent,e.next=7;break;case 6:t=[];case 7:return n=r.difference(s,t.map(function(e){return e.hugoGeneSymbol})),e.next=10,Promise.all(n.map(function(e){return a.getGeneSuggestions(e)}));case 10:return i=e.sent,e.abrupt("return",{found:t,suggestions:i});case 12:case"end":return e.stop()}},e)}))},t.next=5,Promise.all([l(),u()]);case 5:return c=t.sent,p=Z(c,2),d=p[0],f=p[1],t.abrupt("return",{found:[].concat(J(d.found),J(f.found)),suggestions:[].concat(J(d.suggestions),J(f.suggestions))});case 10:case"end":return t.stop()}},t)}))},500),this.invokeGenesetsLater=Object(f.debounceAsync)(function(e){return ne(n,void 0,void 0,regeneratorRuntime.mark(function t(){var n,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.length>0)){t.next=8;break}return t.next=3,y.a.fetchGenesetsUsingPOST({genesetIds:e});case 3:return n=t.sent,o=r.difference(e,n.map(function(e){return e.genesetId})),t.abrupt("return",{found:n,invalid:o});case 8:return t.abrupt("return",Promise.resolve({found:[],invalid:[]}));case 9:case"end":return t.stop()}},t)}))},500),this.asyncCustomCaseSet=Object(d.W)({invoke:function(){return ne(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.selectedSampleListId===re&&0!==this.caseIds.trim().length){e.next=2;break}return e.abrupt("return",[]);case 2:return e.abrupt("return",this.invokeCustomCaseSetLater({isVirtualStudySelected:this.isVirtualStudySelected,caseIds:this.caseIds,caseIdsMode:this.caseIdsMode}));case 3:case"end":return e.stop()}},e,this)}))},default:[]}),this.invokeCustomCaseSetLater=Object(f.debounceAsync)(function(e){return ne(n,void 0,void 0,regeneratorRuntime.mark(function t(){var n,i,a,s,l,u,c,p,f,y,h,m,b,g,v,_,S,E,w,P,T,C,I,k,R,x,j=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n="",this.isSingleNonVirtualStudySelected&&(n=this.selectableSelectedStudyIds[0]),i=e.caseIds.trim().split(/\s+/g),a=Object(d.cb)(this.physicalStudyIdsInSelection),s=i.map(function(e){var t=e.split(":");if(1===t.length){if(n)return{id:e,study:n};throw new Error("No study specified for ".concat(j.caseIdsMode," id: ").concat(e,", and more than one study selected for query."))}if(2===t.length){var r=t[0],o=t[1];if(!a[r]){var i="";throw j.isVirtualStudySelected&&(i=", nor part of a selected Saved Study"),new Error("Study ".concat(r," is not selected").concat(i,"."))}return{id:o,study:r}}throw new Error("Input error for entity: ".concat(e,"."))}),l=Object(d.ab)(s.map(function(e){return"".concat(e.study,":").concat(e.id)})),u=[],c={},p=[],"sample"!==e.caseIdsMode){t.next=37;break}if(!(f=s.map(function(e){return{studyId:e.study,sampleId:e.id}})).length){t.next=35;break}return t.next=14,O(f,function(e){return o.a.fetchSamplesUsingPOST({sampleFilter:{sampleIdentifiers:e},projection:"SUMMARY"})},990);case 14:for(y=t.sent,y=r.sortBy(y,function(e){return l["".concat(e.studyId,":").concat(e.sampleId)]}),h=!0,m=!1,b=void 0,t.prev=19,g=y[Symbol.iterator]();!(h=(v=g.next()).done);h=!0)_=v.value,u.push({studyId:_.studyId,sampleId:_.sampleId}),c["".concat(_.studyId,":").concat(_.sampleId)]=!0;t.next=27;break;case 23:t.prev=23,t.t0=t.catch(19),m=!0,b=t.t0;case 27:t.prev=27,t.prev=28,h||null==g.return||g.return();case 30:if(t.prev=30,!m){t.next=33;break}throw b;case 33:return t.finish(30);case 34:return t.finish(27);case 35:t.next=61;break;case 37:return S=s.map(function(e){return j.getSamplesForStudyAndPatient(e.study,e.id)}),t.next=40,Promise.all(S);case 40:for(E=t.sent,E=r.sortBy(E,function(e){return l["".concat(e.studyId,":").concat(e.patientId)]}),w=!0,P=!1,T=void 0,t.prev=45,C=E[Symbol.iterator]();!(w=(I=C.next()).done);w=!0)k=I.value,k.studyId,k.patientId,R=k.samples,!k.error&&R.length&&(u=u.concat(R.map(function(e){return c["".concat(e.studyId,":").concat(e.patientId)]=!0,{studyId:e.studyId,sampleId:e.sampleId}})));t.next=53;break;case 49:t.prev=49,t.t1=t.catch(45),P=!0,T=t.t1;case 53:t.prev=53,t.prev=54,w||null==C.return||C.return();case 56:if(t.prev=56,!P){t.next=59;break}throw T;case 59:return t.finish(56);case 60:return t.finish(53);case 61:if(p=p.concat(s.filter(function(e){return!c["".concat(e.study,":").concat(e.id)]})),x=this.selectedStudyToSampleSet.result,u.forEach(function(e){x[e.studyId]&&!r.isEmpty(x[e.studyId])&&(x[e.studyId][e.sampleId]||p.push({id:e.sampleId,study:e.studyId}))}),!p.length){t.next=70;break}if(!this.isSingleNonVirtualStudySelected){t.next=69;break}throw new Error("Invalid ".concat(e.caseIdsMode).concat(p.length>1?"s":""," for the selected cancer study: ").concat(p.map(function(e){return e.id}).join(", ")));case 69:throw new Error("Invalid (study, ".concat(e.caseIdsMode,") pair").concat(p.length>1?"s":"",": ").concat(p.map(function(e){return"(".concat(e.study,", ").concat(e.id,")")}).join(", "),"\n\t\t\t\t\t\t"));case 70:return t.abrupt("return",u);case 71:case"end":return t.stop()}},t,this,[[19,23,27,35],[28,,30,34],[45,49,53,61],[54,,56,60]])}))},500),this.studyListLogic=new w.b(this),this.hierarchyData=Object(d.W)({invoke:function(){return ne(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(B.S)(this.getFilteredProfiles("GENESET_SCORE")[0].molecularProfileId,Number(this.volcanoPlotSelectedPercentile.value),0,1,this.defaultSelectedSampleListId);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e,this)}))}}),this.volcanoPlotTableData=Object(d.W)({await:function(){return[n.hierarchyData]},invoke:function(){return ne(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H(this.hierarchyData.result));case 1:case"end":return e.stop()}},e,this)}))}}),this.map_genesets_selected_volcano=new i.ObservableMap,this.dict_molecularAlterationType_filenameSuffix={MUTATION_EXTENDED:"mutations",COPY_NUMBER_ALTERATION:"cna",MRNA_EXPRESSION:"mrna",METHYLATION:"methylation",METHYLATION_BINARY:"methylation",PROTEIN_LEVEL:"rppa"},this.asyncUrlParams=Object(d.W)({await:function(){return[n.asyncCustomCaseSet]},invoke:function(){return ne(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C(this));case 1:case"end":return e.stop()}},e,this)}))}}),this.initiallySelected={profileIds:!1,sampleListId:!1},this.initialize(t)}var t,n,a;return t=e,(n=[{key:"initialize",value:function(e){var t=this;Object(f.labelMobxPromises)(this),e&&this.setParamsFromUrl(e);var n=localStorage.getItem("legacyStudySubmission");if(localStorage.removeItem("legacyStudySubmission"),n)try{this.setParamsFromLocalStorage(JSON.parse(n))}catch(e){throw"error parseing/setting legacyStudySubmission"}Object(i.reaction)(function(){return t.allSelectedStudyIds},function(){t.studiesHaveChangedSinceInitialization=!0})}},{key:"deleteVirtualStudy",value:function(e){var t=this;F.a.deleteVirtualStudy(e).then(Object(i.action)(function(){t.deletedVirtualStudies.push(e),-1!==t.selectableSelectedStudyIds.indexOf(e)&&(t.selectableSelectedStudyIds=r.difference(t.selectableSelectedStudyIds,[e]))}),Object(i.action)(function(e){}))}},{key:"restoreVirtualStudy",value:function(e){var t=this;F.a.addVirtualStudy(e).then(Object(i.action)(function(){t.deletedVirtualStudies=t.deletedVirtualStudies.filter(function(t){return t!==e})}),Object(i.action)(function(e){}))}},{key:"copyFrom",value:function(e){this.forDownloadTab=!1;for(var t=0,n=se;t<n.length;t++){var r=n[t];this[r]=e[r]}}},{key:"setStudyIdSelected",value:function(e,t){if(this.forDownloadTab){var n={};t&&(n[e]=t),this._allSelectedStudyIds=i.observable.map(n)}else t?this._allSelectedStudyIds.set(e,!0):this._allSelectedStudyIds.delete(e)}},{key:"setCaseIds",value:function(e){this.selectedSampleListId=re,this.caseIdsMode="sample",this.caseIds=r.flatten(Object.keys(e).map(function(t){return e[t].map(function(e){return"".concat(t,":").concat(e)})})).join("\n")}},{key:"getGeneSuggestions",value:function(e){return ne(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,o.a.getAllGenesUsingGET({alias:e});case 3:return t.t1=t.sent,t.abrupt("return",{alias:t.t0,genes:t.t1});case 5:case"end":return t.stop()}},t)}))}},{key:"getSamplesForStudyAndPatient",value:function(e,t){return o.a.getAllSamplesOfPatientInStudyUsingGET({studyId:e,patientId:t}).then(function(n){return{studyId:e,patientId:t,samples:n,error:void 0}},function(n){return{studyId:e,patientId:t,samples:[],error:n}})}},{key:"isVirtualStudy",value:function(e){return!this.cancerStudyIdsSet.result[e]}},{key:"isDeletedVirtualStudy",value:function(e){return!!(this.isVirtualStudy(e)&&this.deletedVirtualStudies.indexOf(e)>-1)}},{key:"isSingleStudySelected",value:function(e){if(1!==this.selectableSelectedStudyIds.length)return!1;var t=this.selectableSelectedStudyIds[0];return this.isVirtualStudy(t)===e}},{key:"calculateDataTypePriorityCode",value:function(e){var t=e.mutation,n=e.cna;return t&&n?"0":t?"1":n?"2":"0"}},{key:"getFilteredProfiles",value:function(e){var t=this;return this.molecularProfiles.result.filter(function(n){return n.molecularAlterationType==e&&(n.showProfileInAnalysisTab||t.forDownloadTab)})}},{key:"isProfileSelected",value:function(e){return r.includes(this.selectedProfileIds,e)}},{key:"getSelectedProfileIdFromMolecularAlterationType",value:function(e,t){var n=!0,r=!1,o=void 0;try{for(var i,a=(t||this.selectedProfileIds)[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value,l=this.dict_molecularProfileId_molecularProfile[s];if(l&&l.molecularAlterationType===e)return l.molecularProfileId}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return""}},{key:"sanitizeQueryParams",value:function(e){return e?decodeURIComponent(e).replace(/\+/g,"\n"):""}},{key:"setParamsFromUrl",value:function(e){var t;"string"==typeof e?t=S.a.parse(e,!0).query:t=e;var n=[t.genetic_profile_ids_PROFILE_MUTATION_EXTENDED,t.genetic_profile_ids_PROFILE_COPY_NUMBER_ALTERATION,t.genetic_profile_ids_PROFILE_MRNA_EXPRESSION,t.genetic_profile_ids_PROFILE_METHYLATION,t.genetic_profile_ids_PROFILE_PROTEIN_EXPRESSION,t.genetic_profile_ids_PROFILE_GENESET_SCORE,t.genetic_profile_ids_PROFILE_GENERIC_ASSAY],o=t.cancer_study_list?t.cancer_study_list.split(","):t.cancer_study_id?[t.cancer_study_id]:[];this.selectableSelectedStudyIds=o,this._defaultSelectedIds=i.observable.map(Object(d.cb)(o)),this._selectedProfileIds=n.every(function(e){return void 0===e})?void 0:n.filter(r.identity),this.zScoreThreshold=t.Z_SCORE_THRESHOLD||"2.0",this.rppaScoreThreshold=t.RPPA_SCORE_THRESHOLD||"2.0",this.dataTypePriorityCode=t.data_priority||t.profileFilter||"0",this.selectedSampleListId=t.case_set_id?t.case_set_id.toString():"",this.caseIds=this.sanitizeQueryParams(t.case_ids),this.caseIdsMode="sample",this.geneQuery=ie(decodeURIComponent(t.gene_list||"")),this.genesetQuery=ie(decodeURIComponent(t[X.a.geneset_list]||"")),this.forDownloadTab="tab_download"===t.tab_index,this.initiallySelected.profileIds=!0,this.initiallySelected.sampleListId=!0}},{key:"setParamsFromLocalStorage",value:function(e){var t=e.case_ids;if(t&&e.case_set_id==re&&(this.selectedSampleListId=re,this.caseIdsMode="sample",this.caseIds=t.replace(/\+/g,"\n"),this.initiallySelected.sampleListId=!0),e.cancer_study_list){var n=!0,r=!1,o=void 0;try{for(var i,a=e.cancer_study_list.split(",")[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;"null"!==s&&(this.setStudyIdSelected(s,!0),this._defaultSelectedIds.set(s,!0))}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}}}},{key:"selectCancerType",value:function(e,t){var n=e.cancerTypeId;t?r.includes(this.selectedCancerTypeIds,n)?this.selectedCancerTypeIds=r.difference(this.selectedCancerTypeIds,[n]):this.selectedCancerTypeIds=r.union(this.selectedCancerTypeIds,[n]):this.clickAgainToDeselectSingle&&r.isEqual(Object(i.toJS)(this.selectedCancerTypeIds),[n])?this.selectedCancerTypeIds=[]:this.selectedCancerTypeIds=[n]}},{key:"setSearchText",value:function(e){this.clearSelectedCancerType(),this.searchText=e}},{key:"clearSelectedCancerType",value:function(){this.selectedCancerTypeIds=[]}},{key:"selectMolecularProfile",value:function(e,t){var n=this.getFilteredProfiles(e.molecularAlterationType).map(function(e){return e.molecularProfileId});if(this.forDownloadTab)this._selectedProfileIds=[e.molecularProfileId];else{var o=r.difference(this.selectedProfileIds,n);this._selectedProfileIds=t?r.union(o,[e.molecularProfileId]):o}}},{key:"replaceGene",value:function(e,t){this.geneQuery=ie(this.geneQuery.toUpperCase().replace(new RegExp("\\b".concat(e.toUpperCase(),"\\b"),"g"),function(){return t.toUpperCase()}))}},{key:"replaceGeneset",value:function(e,t){this.genesetQuery=ie(this.genesetQuery.toUpperCase().replace(new RegExp("\\b".concat(e.toUpperCase(),"\\b"),"g"),function(){return t.toUpperCase()}))}},{key:"applyGeneSelection",value:function(e){var t=Z(r.partition(e.keys(),function(t){return e.get(t)}),2),n=t[0],o=t[1];n=r.difference(n,this.geneIds),o=r.intersection(o,this.geneIds);var i=!0,a=!1,s=void 0;try{for(var l,u=o[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value;this.replaceGene(c,"")}}catch(e){a=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw s}}this.geneQuery=ie([this.geneQuery].concat(J(n)).join(" "))}},{key:"addToGenesetSelection",value:function(e){var t=Z(r.partition(e.keys(),function(t){return e.get(t)}),2),n=t[0],o=(t[1],r.union(n,this.genesetIds).join(" "));this.genesetQuery=ie(o)}},{key:"applyGenesetSelection",value:function(e){var t=Z(r.partition(e.keys(),function(t){return e.get(t)}),2),n=t[0],o=t[1],i=this.genesetQuery;if(n.length>0){var a=[],s=!0,l=!1,u=void 0;try{for(var c,p=n[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){var d=c.value;a.push(d)}}catch(e){l=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw u}}i=a.join(" ")}if(o.length>0){var f=i.split(" "),y=!0,h=!1,m=void 0;try{for(var b,g=o[Symbol.iterator]();!(y=(b=g.next()).done);y=!0){var v=b.value,_=!0,S=!1,E=void 0;try{for(var w,P=f[Symbol.iterator]();!(_=(w=P.next()).done);_=!0){var O=w.value;if(v===O){var T=f.indexOf(O);T>=0&&f.splice(T,1)}}}catch(e){S=!0,E=e}finally{try{_||null==P.return||P.return()}finally{if(S)throw E}}}}catch(e){h=!0,m=e}finally{try{y||null==g.return||g.return()}finally{if(h)throw m}}i=f.join(" ")}i=ie(i),this.genesetQuery=i}},{key:"submit",value:function(){if(this.oql.error)return this.geneQueryErrorDisplayStatus=ae.ShouldFocus,this.genesetQueryErrorDisplayStatus=ae.ShouldFocus,!1;if(!this.submitEnabled||!this.asyncUrlParams.isComplete)return!1;var e=this.asyncUrlParams.result;return this.forDownloadTab?function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"post",o=document.createElement("form"),i=r;"smart"===r&&(i=Object(E.b)(e,t).length>1800?"post":"get"),o.setAttribute("method",i),o.setAttribute("action",e),n&&o.setAttribute("target",n);for(var a=0,s=Object.keys(t);a<s.length;a++){var l=s[a],u=document.createElement("input");u.setAttribute("type","hidden"),u.setAttribute("name",l),u.setAttribute("value",t[l]),o.appendChild(u)}document.body.appendChild(o),o.submit()}(Object(E.b)("data_download"),e.query,void 0,"smart"):this.singlePageAppSubmitRoutine(e.query),!0}},{key:"openSummary",value:function(){this.summaryEnabled&&Object(E.C)(this.selectableSelectedStudyIds)}},{key:"virtualStudiesMap",get:function(){return r.keyBy(this.userVirtualStudies.result,function(e){return e.id})}},{key:"selectedVirtualStudies",get:function(){var e=this;return r.reduce(this.selectableSelectedStudies,function(t,n){return e.isVirtualStudy(n.studyId)&&void 0!==e.virtualStudiesMap&&e.virtualStudiesMap[n.studyId]&&t.push(e.virtualStudiesMap[n.studyId]),t},[])}},{key:"physicalStudyIdsInSelection",get:function(){var e={},t=!0,n=!1,r=void 0;try{for(var o,i=this.selectableSelectedStudyIds[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value,s=this.virtualStudiesMap[a];s?s.data.studies.forEach(function(t){return e[t.id]=!0}):e[a]=!0}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return Object.keys(e)}},{key:"stateToSerialize",get:function(){return r.pick(this,se)}},{key:"onlyOneReferenceGenome",get:function(){return 1===r.uniq(this.selectableSelectedStudies.map(function(e){return e.referenceGenome})).length}},{key:"allSelectedStudyIds",get:function(){return this._allSelectedStudyIds.keys()}},{key:"selectableSelectedStudyIds",get:function(){var e=this._allSelectedStudyIds.keys(),t=this.selectableStudiesSet.result;return e=e.reduce(function(e,n){return t[n]?e.concat(t[n]):e},[]),e=r.uniq(e),this.forDownloadTab?e.slice(-1):e},set:function(e){this._allSelectedStudyIds=i.observable.map(Object(d.cb)(e))}},{key:"defaultSelectedIds",get:function(){return this._defaultSelectedIds}},{key:"selectedProfileIds",get:function(){var e,t=this;if(void 0!==this._selectedProfileIds)e=this._selectedProfileIds;else{e=[];for(var n=0,r=["MUTATION_EXTENDED","COPY_NUMBER_ALTERATION"];n<r.length;n++){var o=r[n],i=this.getFilteredProfiles(o);i.length&&e.push(i[0].molecularProfileId)}}return this.forDownloadTab?e.slice(0,1):e.filter(function(e){var n=t.dict_molecularProfileId_molecularProfile[e];return n&&n.showProfileInAnalysisTab})},set:function(e){this._selectedProfileIds=e}},{key:"selectedSampleListId",get:function(){return void 0!==this._selectedSampleListId?this._selectedSampleListId:this.defaultSelectedSampleListId},set:function(e){this._selectedSampleListId=e}},{key:"caseIdsMode",get:function(){return this.selectedSampleListId===re?this._caseIdsMode:"sample"},set:function(e){this._caseIdsMode=e}},{key:"geneQuery",get:function(){return this._geneQuery},set:function(e){this.geneQueryErrorDisplayStatus=ae.Unfocused,this._geneQuery=e}},{key:"genesetQuery",get:function(){return this.rawGenesetQuery.toUpperCase()},set:function(e){this.genesetQueryErrorDisplayStatus=ae.Unfocused,this.rawGenesetQuery=e}},{key:"maxTreeDepth",get:function(){return this.forDownloadTab&&this._maxTreeDepth>0?1:this._maxTreeDepth},set:function(e){this._maxTreeDepth=e}},{key:"userLoggedIn",get:function(){return Object(d.E)().globalStores.appStore.isLoggedIn}},{key:"treeData",get:function(){return new p({cancerTypes:this.cancerTypes.result,studies:this.cancerStudies.result,priorityStudies:this.priorityStudies,virtualStudies:this.forDownloadTab?[]:this.userVirtualStudies.result,maxTreeDepth:this.maxTreeDepth})}},{key:"selectedCancerTypes",get:function(){var e=this;return this.selectedCancerTypeIds.map(function(t){return e.treeData.map_cancerTypeId_cancerType.get(t)}).filter(r.identity)}},{key:"selectableSelectedStudies",get:function(){var e=this;return this.selectableSelectedStudyIds.map(function(t){return e.treeData.map_studyId_cancerStudy.get(t)}).filter(r.identity)}},{key:"isSingleVirtualStudySelected",get:function(){return this.isSingleStudySelected(!0)}},{key:"isSingleNonVirtualStudySelected",get:function(){return this.isSingleStudySelected(!1)}},{key:"isMultipleNonVirtualStudiesSelected",get:function(){var e=this;return this.selectableSelectedStudyIds.filter(function(t){return!e.isVirtualStudy(t)}).length>1}},{key:"getOverlappingStudiesMap",get:function(){var e,t,n=(e=this.selectableSelectedStudies,t=r.reduce(e,function(e,t){if(/_tcga/.test(t.studyId)){var n=t.studyId.replace(/(_\d\d\d\d|_pub|(_pub\d\d\d\d)|_pan_can_atlas_\d\d\d\d)$/g,"");n&&(n in e?e[n].push(t):e[n]=[t])}return e},{}),r.filter(t,function(e){return e.length>1}));return r.chain(n).flatten().keyBy(function(e){return e.studyId}).value()}},{key:"isVirtualStudySelected",get:function(){var e=!1,t=!0,n=!1,r=void 0;try{for(var o,i=this.selectableSelectedStudyIds[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;if(this.virtualStudiesMap[a]){e=!0;break}}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return e}},{key:"isVirtualStudyQuery",get:function(){return 0!==this.selectableSelectedStudyIds.length&&(this.selectableSelectedStudyIds.length>1||this.isSingleVirtualStudySelected)}},{key:"dataTypePriorityCode",set:function(e){switch(e){default:case"0":this.dataTypePriority={mutation:!0,cna:!0};break;case"1":this.dataTypePriority={mutation:!0,cna:!1};break;case"2":this.dataTypePriority={mutation:!1,cna:!0}}},get:function(){return this.calculateDataTypePriorityCode(this.dataTypePriority)}},{key:"dict_molecularProfileId_molecularProfile",get:function(){return r.keyBy(this.molecularProfiles.result,function(e){return e.molecularProfileId})}},{key:"isGenesetProfileSelected",get:function(){var e=!1;if(this.getFilteredProfiles("GENESET_SCORE")[0])for(var t in this.selectedProfileIds)this.selectedProfileIds[t]===this.getFilteredProfiles("GENESET_SCORE")[0].molecularProfileId&&(e=!0);return e}},{key:"defaultSelectedSampleListId",get:function(){if(this.isVirtualStudyQuery)return"all";if(1===this.selectableSelectedStudyIds.length){var e=this.selectableSelectedStudyIds[0],t=this.getSelectedProfileIdFromMolecularAlterationType("MUTATION_EXTENDED"),n=this.getSelectedProfileIdFromMolecularAlterationType("COPY_NUMBER_ALTERATION"),r=this.getSelectedProfileIdFromMolecularAlterationType("MRNA_EXPRESSION"),o=this.getSelectedProfileIdFromMolecularAlterationType("PROTEIN_LEVEL"),i=e+"_all";return t&&n&&!r&&!o?i=e+"_cnaseq":!t||n||r||o?t||!n||r||o?t||n||!r||o?(t||n)&&r&&!o?i=e+"_3way_complete":t||n||r||!o||(i=e+"_rppa"):this.isProfileSelected(e+"_mrna_median_Zscores")?i=e+"_mrna":this.isProfileSelected(e+"_rna_seq_mrna_median_Zscores")?i=e+"_rna_seq_mrna":this.isProfileSelected(e+"_rna_seq_v2_mrna_median_Zscores")&&(i=e+"_rna_seq_v2_mrna"):i=e+"_cna":i=e+"_sequenced",this.dict_sampleListId_sampleList[i]||(i===e+"_cnaseq"?i=e+"_cna_seq":i===e+"_3way_complete"&&(i=e+"_complete")),this.dict_sampleListId_sampleList[i]||(i=e+"_all"),i}}},{key:"dict_sampleListId_sampleList",get:function(){return r.keyBy(this.sampleLists.result,function(e){return e.sampleListId})}},{key:"oql",get:function(){try{return{query:this.geneQuery?Object(h.g)(this.geneQuery.trim().toUpperCase()):[],error:void 0}}catch(o){if("SyntaxError"!==o.name)return{query:[],error:{start:0,end:0,message:"Unexpected ".concat(o)}};var e,t,n,r=o.location.start.offset;return r===this.geneQuery.length?(e="after",t=r-1,n=r):0===r?(e="before",t=r,n=r+1):(e="at",t=r,n=r+1),{query:[],error:{start:t,end:n,message:"OQL syntax error ".concat(e," selected character; please fix and submit again.")}}}}},{key:"geneIds",get:function(){try{return this.oql.query.map(function(e){return e.gene})}catch(e){return[]}}},{key:"genesetIdsQuery",get:function(){try{return{query:this.genesetQuery?this.genesetQuery.split(/[ \n]+/):[],error:void 0}}catch(o){if("SyntaxError"!==o.name)return{query:[],error:{start:0,end:0,message:"Unexpected ".concat(o)}};var e,t,n,r=o.location.start.offset;return r===this.geneQuery.length?(e="after",t=r-1,n=r):0===r?(e="before",t=r,n=r+1):(e="at",t=r,n=r+1),{query:[],error:{start:t,end:n,message:"OQL syntax error ".concat(e," selected character; please fix and submit again.")}}}}},{key:"genesetIds",get:function(){return this.genesetIdsQuery.query}},{key:"minYVolcanoPlot",get:function(){return this.volcanoPlotTableData.result&&(e=this.volcanoPlotTableData.result).length>0?r.minBy(e,function(e){return e.representativePvalue}).representativePvalue:void 0;var e}},{key:"volcanoPlotGraphData",get:function(){return this.volcanoPlotTableData.result?(e=this.volcanoPlotTableData.result,t=this.map_genesets_selected_volcano,e.length>0?e.map(function(e){var n=e.representativeScore,r=e.representativePvalue,o=e.name;return{x:n,y:-Math.log(r)/Math.log(10),fill:t.get(o)?"tomato":"3786C2"}}):void 0):void 0;var e,t}},{key:"submitEnabled",get:function(){return!this.submitError&&(this.genes.isComplete||this.genesets.isComplete)&&this.asyncUrlParams.isComplete||!!this.oql.error||!!this.genesetIdsQuery.error}},{key:"summaryEnabled",get:function(){return this.selectableSelectedStudyIds.length>0}},{key:"hasSelectedStudies",get:function(){return this.selectableSelectedStudyIds.length>0}},{key:"oqlMessages",get:function(){return r.flatten(this.oql.query.map(function(e){return(e.alterations||[]).filter(function(e){return"mut"===e.alteration_type&&e.info.unrecognized})})).map(function(e){return'Unrecognized input "'.concat(e.constr_val,'" is interpreted as a mutation code.')})}},{key:"approxSampleCount",get:function(){var e=this.selectedSampleListId;if(!e)return this.profiledSamplesCount.result.all;if(e===re)return this.caseIds?Math.max(this.caseIds.trim().split(/\s+/g).length,1):1;var t=this.sampleLists.result.find(function(t){return t.sampleListId===e});return t?t.sampleCount:e in this.profiledSamplesCount.result?this.profiledSamplesCount.result[e]:this.profiledSamplesCount.result.all}},{key:"isQueryLimitReached",get:function(){return this.oql.query.length*this.approxSampleCount>g.b.serverConfig.query_product_limit}},{key:"geneLimit",get:function(){return Math.floor(g.b.serverConfig.query_product_limit/this.approxSampleCount)}},{key:"submitError",get:function(){var e=!1,t=!1,n=!1,o=!1,i=!0,a=!1,s=void 0;try{for(var l,u=this.oql.query[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value,p=!0,d=!1,f=void 0;try{for(var y,h=(c.alterations||[])[Symbol.iterator]();!(p=(y=h.next()).done);p=!0){var m=y.value;e=e||"mut"===m.alteration_type,t=t||"cna"===m.alteration_type,n=n||"exp"===m.alteration_type,o=o||"prot"===m.alteration_type}}catch(e){d=!0,f=e}finally{try{p||null==h.return||h.return()}finally{if(d)throw f}}}}catch(e){a=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw s}}if(!this.selectableSelectedStudyIds.length)return"Please select one or more cancer studies.";if(this.isSingleNonVirtualStudySelected){if(!this.selectedProfileIds.length)return"Please select one or more molecular profiles.";var b=this.getSelectedProfileIdFromMolecularAlterationType(T.a.MUTATION_EXTENDED),g=this.getSelectedProfileIdFromMolecularAlterationType(T.a.COPY_NUMBER_ALTERATION),v=this.getSelectedProfileIdFromMolecularAlterationType(T.a.MRNA_EXPRESSION),_=this.getSelectedProfileIdFromMolecularAlterationType(T.a.PROTEIN_LEVEL);if(e&&!b)return"Mutation data query specified in OQL, but no mutation profile selected in `Select Genomic Profiles`";if(t&&!g)return"CNA data query specified in OQL, but not CNA profile selected in `Select Genomic Profiles`";if(n&&!v)return"mRNA expression data query specified in OQL, but no mRNA profile selected in `Select Genomic Profiles`";if(o&&!_)return"Protein level data query specified in OQL, but no protein level profile selected in `Select Genomic Profiles`"}else if(!this.dataTypePriority.mutation&&!this.dataTypePriority.cna)return"Please select one or more molecular profiles.";if(this.selectableSelectedStudyIds.length&&this.selectedSampleListId===re){if(this.asyncCustomCaseSet.isComplete&&!this.asyncCustomCaseSet.result.length)return"Please enter at least one ID in your custom case set.";if(this.asyncCustomCaseSet.error)return"Error in custom case set."}else{if(n&&this.selectableSelectedStudyIds.length>1)return"Expression filtering in the gene list (the EXP command) is not supported when doing cross cancer queries.";if(o&&this.selectableSelectedStudyIds.length>1)return"Protein level filtering in the gene list (the PROT command) is not supported when doing cross cancer queries."}if(0!==this.selectedProfileIds.length){if(1===this.selectedProfileIds.length){if(this.isGenesetProfileSelected){if(!this.genesetQuery.length&&!this.oql.query.length)return"Please enter one or more gene symbols and gene sets.";if(!this.genesetQuery.length)return"Please enter one or more gene sets or deselect gene set profiles.";if(!this.oql.query.length)return"Please enter one or more gene symbols."}else if(!this.oql.query.length)return"Please enter one or more gene symbols."}else if(this.isGenesetProfileSelected){if(!this.genesetQuery.length&&!this.oql.query.length)return"Please enter one or more gene symbols and gene sets.";if(!this.oql.query.length)return"Please enter one or more gene symbols."}else if(!this.oql.query.length)return"Please enter one or more gene symbols."}else if(!this.oql.query.length)return"Please enter one or more gene symbols.";if(this.isQueryLimitReached)return"Please limit your queries to ".concat(this.geneLimit," genes or fewer.");if(this.genes.result.suggestions.length)return"Please edit the gene symbols.";var S=r.groupBy(this.genes.result.found,function(e){return e.hugoGeneSymbol});return r.some(S,function(e){return e.length>1})?"Please edit the gene symbols.":void 0}},{key:"downloadDataFilename",get:function(){var e=1===this.selectableSelectedStudyIds.length&&this.treeData.map_studyId_cancerStudy.get(this.selectableSelectedStudyIds[0]),t=this.dict_molecularProfileId_molecularProfile[this.selectedProfileIds[0]];if(!this.forDownloadTab||!e||!t)return"cbioportal-data.txt";var n=this.dict_molecularAlterationType_filenameSuffix[t.molecularAlterationType]||t.molecularAlterationType.toLowerCase();return"cbioportal-".concat(e.studyId,"-").concat(n,".txt")}},{key:"molecularProfilesInStudyCache",get:function(){return new V}},{key:"sampleListsInStudyCache",get:function(){return new z}}])&&$(t.prototype,n),a&&$(t,a),e}();te([i.observable],le.prototype,"studiesHaveChangedSinceInitialization",void 0),te([i.observable],le.prototype,"deletedVirtualStudies",void 0),te([i.computed],le.prototype,"virtualStudiesMap",null),te([i.computed],le.prototype,"selectedVirtualStudies",null),te([i.computed],le.prototype,"physicalStudyIdsInSelection",null),te([i.computed],le.prototype,"stateToSerialize",null),te([i.computed],le.prototype,"onlyOneReferenceGenome",null),te([i.observable],le.prototype,"forDownloadTab",void 0),te([i.observable],le.prototype,"transposeDataMatrix",void 0),te([i.observable],le.prototype,"searchText",void 0),te([i.observable],le.prototype,"_allSelectedStudyIds",void 0),te([i.computed],le.prototype,"allSelectedStudyIds",null),te([i.computed],le.prototype,"selectableSelectedStudyIds",null),te([i.action],le.prototype,"setStudyIdSelected",null),te([i.computed],le.prototype,"defaultSelectedIds",null),te([i.observable],le.prototype,"dataTypePriority",void 0),te([i.observable.ref],le.prototype,"_selectedProfileIds",void 0),te([i.computed],le.prototype,"selectedProfileIds",null),te([i.observable],le.prototype,"zScoreThreshold",void 0),te([i.observable],le.prototype,"rppaScoreThreshold",void 0),te([i.observable],le.prototype,"_selectedSampleListId",void 0),te([i.computed],le.prototype,"selectedSampleListId",null),te([i.observable],le.prototype,"caseIds",void 0),te([i.observable],le.prototype,"_defaultStudySampleMap",void 0),te([i.observable],le.prototype,"_caseIdsMode",void 0),te([i.computed],le.prototype,"caseIdsMode",null),te([i.observable],le.prototype,"_geneQuery",void 0),te([i.observable],le.prototype,"rawGenesetQuery",void 0),te([i.observable],le.prototype,"geneQueryErrorDisplayStatus",void 0),te([i.observable],le.prototype,"genesetQueryErrorDisplayStatus",void 0),te([i.observable],le.prototype,"showMutSigPopup",void 0),te([i.observable],le.prototype,"showGisticPopup",void 0),te([i.observable],le.prototype,"showGenesetsHierarchyPopup",void 0),te([i.observable],le.prototype,"showGenesetsVolcanoPopup",void 0),te([i.observable],le.prototype,"priorityStudies",void 0),te([i.observable],le.prototype,"showSelectedStudiesOnly",void 0),te([i.observable.shallow],le.prototype,"selectedCancerTypeIds",void 0),te([i.observable],le.prototype,"clickAgainToDeselectSingle",void 0),te([i.observable],le.prototype,"searchExampleMessage",void 0),te([i.observable],le.prototype,"volcanoPlotSelectedPercentile",void 0),te([i.observable],le.prototype,"_maxTreeDepth",void 0),te([i.computed],le.prototype,"maxTreeDepth",null),te([i.computed],le.prototype,"userLoggedIn",null),te([i.action],le.prototype,"setCaseIds",null),te([b.a],le.prototype,"getGeneSuggestions",null),te([b.a],le.prototype,"getSamplesForStudyAndPatient",null),te([f.cached],le.prototype,"treeData",null),te([i.computed],le.prototype,"selectedCancerTypes",null),te([i.computed],le.prototype,"selectableSelectedStudies",null),te([i.computed],le.prototype,"isSingleVirtualStudySelected",null),te([i.computed],le.prototype,"isSingleNonVirtualStudySelected",null),te([i.computed],le.prototype,"isMultipleNonVirtualStudiesSelected",null),te([i.computed],le.prototype,"getOverlappingStudiesMap",null),te([i.computed],le.prototype,"isVirtualStudySelected",null),te([i.computed],le.prototype,"isVirtualStudyQuery",null),te([i.computed],le.prototype,"dataTypePriorityCode",null),te([i.computed],le.prototype,"dict_molecularProfileId_molecularProfile",null),te([i.computed],le.prototype,"defaultSelectedSampleListId",null),te([i.computed],le.prototype,"dict_sampleListId_sampleList",null),te([i.computed],le.prototype,"oql",null),te([i.computed],le.prototype,"geneIds",null),te([i.computed],le.prototype,"genesetIdsQuery",null),te([i.computed],le.prototype,"genesetIds",null),te([i.computed],le.prototype,"minYVolcanoPlot",null),te([i.observable],le.prototype,"map_genesets_selected_volcano",void 0),te([i.computed],le.prototype,"volcanoPlotGraphData",null),te([i.computed],le.prototype,"submitEnabled",null),te([i.computed],le.prototype,"summaryEnabled",null),te([i.computed],le.prototype,"hasSelectedStudies",null),te([i.computed],le.prototype,"oqlMessages",null),te([i.computed],le.prototype,"approxSampleCount",null),te([i.computed],le.prototype,"isQueryLimitReached",null),te([i.computed],le.prototype,"geneLimit",null),te([i.computed],le.prototype,"submitError",null),te([i.computed],le.prototype,"downloadDataFilename",null),te([i.action],le.prototype,"setParamsFromUrl",null),te([i.action],le.prototype,"setParamsFromLocalStorage",null),te([i.action],le.prototype,"selectCancerType",null),te([i.action],le.prototype,"setSearchText",null),te([i.action],le.prototype,"clearSelectedCancerType",null),te([i.action],le.prototype,"selectMolecularProfile",null),te([i.action],le.prototype,"replaceGene",null),te([i.action],le.prototype,"replaceGeneset",null),te([i.action],le.prototype,"applyGeneSelection",null),te([i.action],le.prototype,"addToGenesetSelection",null),te([i.action],le.prototype,"applyGenesetSelection",null),te([i.action],le.prototype,"submit",null),te([i.action],le.prototype,"openSummary",null),te([f.cached],le.prototype,"molecularProfilesInStudyCache",null),te([f.cached],le.prototype,"sampleListsInStudyCache",null);var ue=Object(v.a)(le)},580:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__1P_Zv",framedImage:"styles-module__framedImage__1iqVk",QueryAndDownloadTabs:"styles-module__QueryAndDownloadTabs__ivykJ",QueryContainer:"styles-module__QueryContainer__2cy7B",forkedButtons:"styles-module__forkedButtons__2ctM7",errorMessage:"styles-module__errorMessage__32yZg",oqlMessage:"styles-module__oqlMessage__3xhe8",CancerStudySelector:"styles-module__CancerStudySelector__1FU50",MolecularProfileSelector:"styles-module__MolecularProfileSelector__rlomm",DataTypePrioritySelector:"styles-module__DataTypePrioritySelector__1_VUf",CaseSetSelector:"styles-module__CaseSetSelector__YteFo",StudySelection:"styles-module__StudySelection__3booh",GeneSetSelector:"styles-module__GeneSetSelector__2DY1b",icon:"styles-module__icon__1E8Oh",geneCount:"styles-module__geneCount__3cB9u",SelectedStudiesWindow:"styles-module__SelectedStudiesWindow__NAG6X",CancerStudySelectorHeader:"styles-module__CancerStudySelectorHeader__D2N40",selectAll:"styles-module__selectAll__sQO_b",noData:"styles-module__noData__3J5xx",selectedCount:"styles-module__selectedCount__TRoaE",selectionsExist:"styles-module__selectionsExist__1icpM",cancerStudySelectorBody:"styles-module__cancerStudySelectorBody__2BfDm",cancerTypeListContainer:"styles-module__cancerTypeListContainer__rnSbV",cancerStudyListContainer:"styles-module__cancerStudyListContainer__356jB",cancerTypeList:"styles-module__cancerTypeList__ouFgb",cancerTypeListItemLabel:"styles-module__cancerTypeListItemLabel__31N8Y",cancerTypeListItemCount:"styles-module__cancerTypeListItemCount__1HB2c",selectable:"styles-module__selectable__3NCiW",selected:"styles-module__selected__Zy9_9",matchingNodeText:"styles-module__matchingNodeText__3lV9e",nonMatchingNodeText:"styles-module__nonMatchingNodeText__1l5PU",containsSelectedStudies:"styles-module__containsSelectedStudies__20v-B",searchTextInput:"styles-module__searchTextInput__1VIxV",group:"styles-module__group__Cs8DR",zScore:"styles-module__zScore__23rtN",infoIcon:"styles-module__infoIcon__zMiog",profileName:"styles-module__profileName__1fbIy",DataTypePriorityLabel:"styles-module__DataTypePriorityLabel__21k9z",radioRow:"styles-module__radioRow__1G_fF",buttonRow:"styles-module__buttonRow__51RtG",geneSet:"styles-module__geneSet__Ra6KD",notEmpty:"styles-module__notEmpty__23mDp",GeneSymbolValidator:"styles-module__GeneSymbolValidator__ZK8rf",pendingMessage:"styles-module__pendingMessage__2jgIM",oqlNotice:"styles-module__oqlNotice__1tycm",validBubble:"styles-module__validBubble__QCGq3",invalidBubble:"styles-module__invalidBubble__1gB6Z",suggestionBubble:"styles-module__suggestionBubble__aRL1R",noChoiceLabel:"styles-module__noChoiceLabel__2GF5_",singleChoiceLabel:"styles-module__singleChoiceLabel__2wdqL",multiChoiceLabel:"styles-module__multiChoiceLabel__19sFa",MutSigGeneSelectorWindow:"styles-module__MutSigGeneSelectorWindow__1Uiku",MutSigGeneSelector:"styles-module__MutSigGeneSelector__25hKH",selectionColumnHeader:"styles-module__selectionColumnHeader__2MSUO",selectionColumnCell:"styles-module__selectionColumnCell__3RJ8f",selectButton:"styles-module__selectButton__2dXHK",GisticGeneSelectorWindow:"styles-module__GisticGeneSelectorWindow__1J2UG",GisticGeneSelector:"styles-module__GisticGeneSelector__U5Lb9",header:"styles-module__header__3cqyY",amp:"styles-module__amp__1zeIe",del:"styles-module__del__1_otl",gisticTable:"styles-module__gisticTable__2fquv",GisticGeneToggles:"styles-module__GisticGeneToggles__1aR6k",someGenes:"styles-module__someGenes__J-RhD",moreGenes:"styles-module__moreGenes__2gVF_",geneToggle:"styles-module__geneToggle__EGiaB",simulateHovered:"styles-module__simulateHovered__3IL_G",notSelected:"styles-module__notSelected__3-Rmx",showMoreLess:"styles-module__showMoreLess__3Ef4J",GenesetsSelectorWindow:"styles-module__GenesetsSelectorWindow__NTbph",GenesetsFormGroup:"styles-module__GenesetsFormGroup__1uJYh",GenesetsVolcanoSelectorWindow:"styles-module__GenesetsVolcanoSelectorWindow__w4nHP",GenesetsSelectionArea:"styles-module__GenesetsSelectionArea__3ebp-",transposeDataMatrix:"styles-module__transposeDataMatrix__YP_NR",submitRow:"styles-module__submitRow__k2sC8",genomeSpace:"styles-module__genomeSpace__2augo",tooltip:"styles-module__tooltip__ux3KI",learnOql:"styles-module__learnOql__1Aj5I",quickSelect:"styles-module__quickSelect__3ZhaC",studyName:"styles-module__studyName__2iQkr"}},582:function(e,t,n){"use strict";n.d(t,"a",function(){return E}),n.d(t,"b",function(){return w});var r=n(0),o=n(7),i=n(28),a=n.n(i),s=(n(649),n(25)),l=n(93),u=n(5),c=n(11),p=n(641);function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}function h(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var _=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":v(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},S=function(e){function t(){var e;return d(this,t),(e=h(this,m(t).apply(this,arguments))).renderedOnce=!1,e}return b(t,r["Component"]),y(t,[{key:"render",value:function(){var e=this;return this.renderedOnce||setTimeout(function(){return e.renderedOnce=!0}),r.createElement("div",{className:this.props.className},this.renderedOnce&&this.props.children,!this.renderedOnce&&(this.props.loadingState||null))}}]),t}();_([u.observable],S.prototype,"renderedOnce",void 0),S=_([c.observer],S);var E=function(e){function t(e){return d(this,t),h(this,m(t).call(this,e))}return b(t,r["Component"]),y(t,[{key:"componentDidMount",value:function(){this.props.onTabDidMount&&this.props.onTabDidMount(this.div)}},{key:"componentWillUnmount",value:function(){this.props.onTabUnmount&&this.props.onTabUnmount(this.div)}},{key:"assignRef",value:function(e){this.div=e}},{key:"render",value:function(){var e=this;return r.createElement("div",{ref:function(t){return e.div=t},className:a()({"msk-tab":!0,hiddenByPosition:!!this.props.inactive},this.props.className)},this.props.children)}}]),t}();_([s.a],E.prototype,"assignRef",null);var w=function(e){function t(e){var n;return d(this,t),(n=h(this,m(t).call(this,e))).shownTabs=[],n.tabRefs=[],n.tabClickHandlers=Object(p.a)(function(e,t){e.preventDefault(),n.setActiveTab(t.id,t.datum)}),n.state={currentPage:1,pageBreaks:[]},n}return b(t,r["Component"]),y(t,[{key:"cloneTab",value:function(e,t,n){return n?r.cloneElement(e,{inactive:t},this.props.loadingComponent):r.cloneElement(e,{inactive:t})}},{key:"setActiveTab",value:function(e,t){this.props.onTabClick&&this.props.onTabClick(e,t)}},{key:"navTabsRefHandler",value:function(e){this.navTabsRef=e}},{key:"tabRefHandler",value:function(e,t){e&&t&&this.tabRefs.push({id:e,element:t})}},{key:"nextPage",value:function(){this.setState({currentPage:this.state.currentPage+1})}},{key:"prevPage",value:function(){this.setState({currentPage:this.state.currentPage-1})}},{key:"initOnResize",value:function(e,t){var n=this,r=null;return function(e){null!==r&&(window.clearTimeout(r),r=null),r=window.setTimeout(function(){n.initPaging()},600)}}},{key:"render",value:function(){var e=this;if(this.props.children&&r.Children.count(this.props.children)){var t,n=this.props.children,i=r.Children.toArray(n),s=e.props.activeTabId&&o.some(i,function(t){return t.props.id===e.props.activeTabId})?e.props.activeTabId:i[0].props.id;return t=o.reduce(i,function(t,n){return n.props.hide||(n.props.id===s?(e.shownTabs.push(n.props.id),t.push(e.cloneTab(n,!1))):(!1===n.props.unmountOnHide||void 0===n.props.unmountOnHide&&!1===e.props.unmountOnHide)&&o.includes(e.shownTabs,n.props.id)&&t.push(e.cloneTab(n,!0))),t},[]),r.createElement("div",{id:this.props.id?this.props.id:"",className:a()("msk-tabs","posRelative",this.props.className)},this.navTabs(n,s),r.createElement(S,{className:"tab-content",loadingState:r.createElement(l.a,{isLoading:!0,center:!0,size:"big"})},t))}return null}},{key:"navTabs",value:function(e,t){this.tabRefs=[];var n=this.tabPages(e,t),o=this.state.pageBreaks.length+1,i=this.props.enablePagination?{border:0,overflow:"hidden"}:{},s=this.state.currentPage>1?r.createElement("li",{key:"prevPage",style:{cursor:"pointer"}},r.createElement("a",{onClick:this.prevPage.bind(this)},r.createElement("i",{className:"fa fa-chevron-left",style:this.props.arrowStyle}))):null,l=this.state.currentPage<o?r.createElement("li",{key:"nextPage",style:{cursor:"pointer"}},r.createElement("a",{onClick:this.nextPage.bind(this)},r.createElement("i",{className:"fa fa-chevron-right",style:this.props.arrowStyle}))):null,u=this.props.tabButtonStyle||"tabs";return r.createElement("ul",{ref:this.navTabsRefHandler.bind(this),className:a()("nav","nav-".concat(u)),style:i},s,n[this.state.currentPage-1],l)}},{key:"tabPages",value:function(e,t){var n=this,o=[[]],i=1;return r.Children.forEach(e,function(e){if(e&&!e.props.hide){var s=t===e.props.id?"active":"";n.props.enablePagination&&n.state.pageBreaks.length>0&&n.state.pageBreaks[i-1]===e.props.id&&(o[++i-1]=[]),o[i-1].push(r.createElement("li",{key:e.props.id,style:{cursor:"pointer"},ref:n.tabRefHandler.bind(n,e.props.id),className:s},r.createElement("a",{className:a()("tabAnchor","tabAnchor_".concat(e.props.id),e.props.anchorClassName),onClick:n.tabClickHandlers(e.props),href:n.props.getTabHref&&n.props.getTabHref(e.props.id),style:e.props.anchorStyle},e.props.linkText)))}}),o}},{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){0===e.state.pageBreaks.length&&e.initPaging()},1)}},{key:"initPaging",value:function(){if(this.props.enablePagination){var e=this.findPageBreaks(),t=this.findCurrentPage(e);this.setState({currentPage:t,pageBreaks:e})}}},{key:"findCurrentPage",value:function(e){var t=this,n=1,r=!1;return this.props.activeTabId&&e.length>0&&o.each(this.tabRefs,function(o){if(o.id===e[n-1]&&n++,o.id===t.props.activeTabId)return r=!0,!1}),r?n:1}},{key:"findPageBreaks",value:function(){var e=[],t=this.navTabsRef&&this.navTabsRef.offsetWidth||0;if(t>0){var n=0;o.each(this.tabRefs,function(r){n+=r.element.offsetWidth;var o=e.length>0?160:100;n>t-o&&(e.push(r.id),n=r.element.offsetWidth)})}return e}}]),t}();w.defaultProps={unmountOnHide:!0,loadingComponent:r.createElement(l.a,{isLoading:!0,center:!0,size:"big"})}},594:function(e,t,n){"use strict";n.d(t,"a",function(){return y});var r=n(0),o=n(717),i=n(28),a=n.n(i);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=o,y=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=c(this,p(t).apply(this,arguments))).handleInputRef=function(t){e.input=t,e.props.inputProps&&"function"==typeof e.props.inputProps.ref&&e.props.inputProps.ref(t)},e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){this.input.indeterminate=!!this.props.indeterminate}},{key:"componentDidUpdate",value:function(){this.input.indeterminate=!!this.props.indeterminate}},{key:"render",value:function(){var e=this.props.labelProps&&this.props.labelProps.className,t=a()(f.labeledCheckbox,e);return r.createElement("label",l({className:t},this.props.labelProps),r.createElement("input",l({type:"checkbox",checked:this.props.checked,onChange:this.props.onChange,disabled:this.props.disabled},this.props.inputProps,{ref:this.handleInputRef})),this.props.children)}}])&&u(n.prototype,o),i&&u(n,i),t}()},624:function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"b",function(){return y});var r=n(660),o=n(5),i=n(25),a=n(3);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d,f=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":p(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};!function(e){e.clinicallist="clinicallist",e.gene_list="gene_list",e.cancer_study_list="cancer_study_list",e.case_ids="case_ids",e.sample_list_ids="sample_list_ids",e.case_set_id="case_set_id",e.profileFilter="profileFilter",e.RPPA_SCORE_THRESHOLD="RPPA_SCORE_THRESHOLD",e.Z_SCORE_THRESHOLD="Z_SCORE_THRESHOLD",e.geneset_list="geneset_list",e.treatment_list="treatment_list",e.show_samples="show_samples",e.heatmap_track_groups="heatmap_track_groups",e.oncoprint_sortby="oncoprint_sortby",e.oncoprint_cluster_profile="oncoprint_cluster_profile",e.oncoprint_sort_by_mutation_type="oncoprint_sort_by_mutation_type",e.oncoprint_sort_by_drivers="oncoprint_sort_by_drivers",e.exclude_germline_mutations="exclude_germline_mutations",e.patient_enrichments="patient_enrichments",e.genetic_profile_ids_PROFILE_MUTATION_EXTENDED="genetic_profile_ids_PROFILE_MUTATION_EXTENDED",e.genetic_profile_ids_PROFILE_COPY_NUMBER_ALTERATION="genetic_profile_ids_PROFILE_COPY_NUMBER_ALTERATION",e.genetic_profile_ids_PROFILE_MRNA_EXPRESSION="genetic_profile_ids_PROFILE_MRNA_EXPRESSION",e.genetic_profile_ids_PROFILE_PROTEIN_EXPRESSION="genetic_profile_ids_PROFILE_PROTEIN_EXPRESSION",e.genetic_profile_ids_PROFILE_GENESET_SCORE="genetic_profile_ids_PROFILE_GENESET_SCORE",e.genetic_profile_ids_GENERIC_ASSAY="genetic_profile_ids_GENERIC_ASSAY",e.genetic_profile_ids="genetic_profile_ids"}(d||(d={}));var y=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=l(this,u(t).call(this,e,{clinicallist:{isSessionProp:!1},show_samples:{isSessionProp:!1},heatmap_track_groups:{isSessionProp:!1},oncoprint_sortby:{isSessionProp:!1},oncoprint_cluster_profile:{isSessionProp:!1},oncoprint_sort_by_mutation_type:{isSessionProp:!1},oncoprint_sort_by_drivers:{isSessionProp:!1},treatment_list:{isSessionProp:!1},exclude_germline_mutations:{isSessionProp:!1},patient_enrichments:{isSessionProp:!1},gene_list:{isSessionProp:!0},cancer_study_list:{isSessionProp:!0,aliases:["cancer_study_id"]},case_ids:{isSessionProp:!0},sample_list_ids:{isSessionProp:!0},case_set_id:{isSessionProp:!0},profileFilter:{isSessionProp:!0,aliases:["data_priority"]},RPPA_SCORE_THRESHOLD:{isSessionProp:!0},Z_SCORE_THRESHOLD:{isSessionProp:!0},geneset_list:{isSessionProp:!0},genetic_profile_ids_PROFILE_MUTATION_EXTENDED:{isSessionProp:!0},genetic_profile_ids_PROFILE_COPY_NUMBER_ALTERATION:{isSessionProp:!0},genetic_profile_ids_PROFILE_MRNA_EXPRESSION:{isSessionProp:!0},genetic_profile_ids_PROFILE_PROTEIN_EXPRESSION:{isSessionProp:!0},genetic_profile_ids_PROFILE_GENESET_SCORE:{isSessionProp:!0},genetic_profile_ids_GENERIC_ASSAY:{isSessionProp:!0},genetic_profile_ids:{isSessionProp:!0}},!0,a.b.serverConfig.session_url_length_threshold?parseInt(a.b.serverConfig.session_url_length_threshold):void 0))).pathContext="/results",n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r["a"]),n=t,(o=[{key:"setTabId",value:function(e,t){this.updateURL({},"comparison/".concat(e),!1,t)}},{key:"tabId",get:function(){return this.pathName.split("/").pop()}}])&&s(n.prototype,o),i&&s(n,i),t}();f([o.computed],y.prototype,"tabId",null),f([i.a],y.prototype,"setTabId",null)},626:function(e,t,n){"use strict";n.d(t,"b",function(){return v}),n.d(t,"a",function(){return _});var r=n(0),o=n(929),i=n.n(o),a=n(28),s=n.n(a);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function d(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var b=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n};function g(e,t){var n=e.padded,o=e.overflow,a=e.flex,l=b(e,["padded","overflow","flex"]),u=Object.assign({flex:a,display:"flex",overflow:o?"visible":"auto"},e.style,{flexDirection:t}),c=s()(e.className,i.a[t],n&&i.a.padded);return r.createElement("div",m({},l,{style:u,className:c}))}var v=function(e){function t(){return u(this,t),d(this,f(t).apply(this,arguments))}return y(t,r["Component"]),p(t,[{key:"render",value:function(){return g(this.props,"row")}}]),t}(),_=function(e){function t(){return u(this,t),d(this,f(t).apply(this,arguments))}return y(t,r["Component"]),p(t,[{key:"render",value:function(){return g(this.props,"column")}}]),t}()},629:function(e,t,n){"use strict";var r=n(0),o=n(11),i=n(937),a=n(28),s=n.n(a),l=n(610),u=n.n(l),c=n(938);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n},g=c,v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),y(this,h(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.error,n=e.children,o=e.className,i=b(e,["error","children","className"]);return r.createElement("div",d({className:s()(o,g.error)},i),r.createElement("span",{className:g.message},r.createElement(u.a,{className:g.icon,name:"exclamation-circle"}),t.message+""),n)}}])&&f(n.prototype,o),i&&f(n,i),t}(),_=n(93);function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var C=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":T(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},I=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n},k=i,R=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),w(this,P(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.promises,n=e.children,o=e.className,i=e.secondaryComponent,a=I(e,["promises","children","className","secondaryComponent"]);return r.createElement("div",S({className:s()(o,k.SectionHeader)},a),r.createElement("h2",null,n,!(!t||!t.some(function(e){return e.isPending}))&&r.createElement(_.a,{isLoading:!0,size:"small"})),!!i&&i,t&&t.map(function(e){return!!e.error&&r.createElement(v,{className:k.error,error:e.error})}))}}])&&E(n.prototype,o),i&&E(n,i),t}();R=C([o.observer],R);t.a=R},640:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__3xfuL",framedImage:"styles-module__framedImage__3MWaq",validationBubbleBase:"styles-module__validationBubbleBase__1bQNI",genesSelection:"styles-module__genesSelection__17BpH",GeneSymbolValidator:"styles-module__GeneSymbolValidator__1K2q1",validBubble:"styles-module__validBubble__2iAqd",invalidBubble:"styles-module__invalidBubble__3Hs4P",suggestionBubble:"styles-module__suggestionBubble__1TnzN",topRow:"styles-module__topRow__2F7H0",default:"styles-module__default__3ZAms",oncoprintHeatmap:"styles-module__oncoprintHeatmap__lvPrO",studyView:"styles-module__studyView__3TtjM",studyViewFocus:"styles-module__studyViewFocus__1CfEf",nowrap:"styles-module__nowrap__1GVDf",icon:"styles-module__icon__2RDD6",pendingMessage:"styles-module__pendingMessage__1gVAe",oqlNotice:"styles-module__oqlNotice__3naFJ",errorMessage:"styles-module__errorMessage__3pZ_v",noChoiceLabel:"styles-module__noChoiceLabel__2sdit",singleChoiceLabel:"styles-module__singleChoiceLabel__178JA",multiChoiceLabel:"styles-module__multiChoiceLabel__1PPmp"}},641:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.inputToKey=t,this.inputToOutput=n,this.memo={}}var t,n,o;return t=e,(n=[{key:"get",value:function(e){var t=this.inputToKey(e);return this.memo[t]=this.memo[t]||this.inputToOutput(e),this.memo[t]}},{key:"has",value:function(e){return this.inputToKey(e)in this.memo}}])&&r(t.prototype,n),o&&r(t,o),e}();function i(e){return JSON.stringify(e,Object.keys(e).sort())}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,n=new o(t,function(t){return function(n){return e(n,t)}});return function(e){return n.get(e)}}n.d(t,"a",function(){return a})},649:function(e,t,n){},658:function(e,t,n){"use strict";var r=n(0),o=n(7),i=n(11),a=n(28),s=n.n(a),l=n(640),u=n.n(l),c=n(5),p=n(563),d=n(560);function f(e){try{return{query:e?Object(d.g)(e.trim().toUpperCase()):[],error:void 0}}catch(i){if("SyntaxError"!==i.name)return{query:[],error:{start:0,end:0,message:"Unexpected ".concat(i)}};var t,n,r,o=i.location.start.offset;return o===e.length?(t="after",n=o-1,r=o):0===o?(t="before",n=o,r=o+1):(t="at",n=o,r=o+1),{query:[],error:{start:n,end:r,message:"OQL syntax error ".concat(t," selected character; please fix and submit again.")}}}}n(733);var y=n(4),h=n(161),m=n(95),b=n.n(m),g=n(610),v=n.n(g),_=n(92);function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var C=function(e){if(0==e.genes.length){return r.createElement("div",{className:u.a.suggestionBubble,title:"Could not find gene symbol. Click to remove it from the gene list.",onClick:function(){return e.replaceGene(e.alias,"")}},r.createElement(v.a,{className:u.a.icon,name:"times-circle"}),r.createElement("span",{className:u.a.noChoiceLabel},e.alias))}if(1==e.genes.length){var t=e.genes[0].hugoGeneSymbol,n="'".concat(e.alias,"' is a synonym for '").concat(t,"'. Click here to replace it with the official symbol.");return r.createElement("div",{className:u.a.suggestionBubble,title:n,onClick:function(){return e.replaceGene(e.alias,t)}},r.createElement(v.a,{className:u.a.icon,name:"question"}),r.createElement("span",{className:u.a.singleChoiceLabel},e.alias),r.createElement("span",null,": ".concat(t)))}var o="Ambiguous gene symbol. Click on one of the alternatives to replace it.",i=e.genes.map(function(e){return{label:e.hugoGeneSymbol,value:e.hugoGeneSymbol}});return r.createElement("div",{className:u.a.suggestionBubble,title:o},r.createElement(v.a,{className:u.a.icon,name:"question"}),r.createElement("span",{className:u.a.multiChoiceLabel},e.alias),r.createElement("span",null,":",""),r.createElement(_.DropdownButton,{bsStyle:o.toLowerCase(),bsSize:"xsmall",title:"Select symbol",id:"geneReplace_".concat(e.alias)},i.map(function(t,n){return r.createElement(_.MenuItem,{onClick:function(){e.replaceGene(e.alias,t.value)},eventKey:n+1},t.label)})))},I=function(e){if(e.oql instanceof Error)return r.createElement("div",{className:u.a.GeneSymbolValidator},r.createElement("span",{className:u.a.errorMessage},"Cannot validate gene symbols because of invalid OQL. ".concat(e.oql.message)));if(0===e.oql.query.length)return null;if(!e.errorMessageOnly&&e.validatingGenes)return r.createElement("div",{className:u.a.GeneSymbolValidator},r.createElement("span",{className:u.a.pendingMessage},"Validating gene symbols..."));if(e.genes instanceof Error)return r.createElement("div",{className:u.a.GeneSymbolValidator},r.createElement("span",{className:u.a.pendingMessage},"Unable to validate gene symbols."));if(e.genes.suggestions.length>0)return r.createElement("div",{className:u.a.GeneSymbolValidator},r.createElement("div",{className:u.a.invalidBubble,title:"Please edit the gene symbols."},r.createElement(v.a,{className:u.a.icon,name:"exclamation-circle"}),r.createElement("span",null,"Invalid gene symbols.")),e.genes.suggestions.map(function(t,n){return r.createElement(C,{key:n,genes:t.genes,alias:t.alias,replaceGene:e.replaceGene})}));var t,n,i,a=o.groupBy(e.genes.found,function(e){return e.hugoGeneSymbol}),l=o.reduce(a,function(e,t,n){return t.length>1&&e.push(n),e},[]);return l.length>0?r.createElement("div",{className:u.a.GeneSymbolValidator},r.createElement("div",{className:u.a.invalidBubble,title:"Please edit the gene symbols."},r.createElement(v.a,{className:u.a.icon,name:"exclamation-circle"}),r.createElement("span",null,"The portal does not currently support the following gene(s):")),l.map(function(t,n){return r.createElement(C,{key:n,genes:[],alias:t,replaceGene:e.replaceGene})})):e.errorMessageOnly?null:r.createElement("div",{className:s()(u.a.GeneSymbolValidator,(t={},n=u.a.nowrap,i=!e.wrapTheContent,n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t))},r.createElement("div",{className:u.a.validBubble,title:"You can now submit the list."},r.createElement(v.a,{className:u.a.icon,name:"check-circle"}),r.createElement("span",null,"All gene symbols are valid.")))},k=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),P(this,O(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return this.props.children?r.createElement("div",{id:"wideGeneBoxValidationStatus"},this.props.children):r.createElement("div",{id:"geneBoxValidationStatus"},r.createElement(I,E({replaceGene:this.props.replaceGene},this.props)))}}])&&w(n.prototype,o),i&&w(n,i),t}(),R=r.memo(k);function x(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var G=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},V=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}l((r=r.apply(e,t||[])).next())})};function B(e){return Number.isInteger(Number(e))}var F=function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=A(t).apply(this,arguments),(e=!r||"object"!==L(r)&&"function"!=typeof r?D(n):r).genes=Object(y.W)({invoke:function(){return V(D(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,i,a,s,l,u,c,p,d=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.geneIds.length){e.next=2;break}return e.abrupt("return",{found:[],suggestions:[]});case 2:return t=o.partition(o.uniq(this.geneIds),B),n=j(t,2),r=n[0],i=n[1],a=function(){return V(d,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,i,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.length){e.next=6;break}return e.next=3,h.a.fetchGenesUsingPOST({geneIdType:"ENTREZ_GENE_ID",geneIds:r});case 3:t=e.sent,e.next=7;break;case 6:t=[];case 7:return n=o.difference(r,t.map(function(e){return e.entrezGeneId+""})),i=n.map(function(e){return{alias:e,genes:[]}}),a=t.map(function(e){return{alias:e.entrezGeneId+"",genes:[e]}}),s=[].concat(x(i),x(a)),e.abrupt("return",{found:t,suggestions:s});case 12:case"end":return e.stop()}},e)}))},s=function(){return V(d,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.length){e.next=6;break}return e.next=3,h.a.fetchGenesUsingPOST({geneIdType:"HUGO_GENE_SYMBOL",geneIds:i});case 3:t=e.sent,e.next=7;break;case 6:t=[];case 7:return n=o.difference(i,t.map(function(e){return e.hugoGeneSymbol})),e.next=10,Promise.all(n.map(function(e){return a.getGeneSuggestions(e)}));case 10:return r=e.sent,e.abrupt("return",{found:t,suggestions:r});case 12:case"end":return e.stop()}},e)}))},e.next=7,Promise.all([a(),s()]);case 7:return l=e.sent,u=j(l,2),c=u[0],p=u[1],e.abrupt("return",{found:[].concat(x(c.found),x(p.found)),suggestions:[].concat(x(c.suggestions),x(p.suggestions))});case 12:case"end":return e.stop()}},e,this)}))},onResult:function(t){e.props.afterValidation&&e.props.afterValidation(0===t.suggestions.length,e.genes.result,e.oql)},default:{found:[],suggestions:[]}}),e}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(t,r["Component"]),n=t,(i=[{key:"getGeneSuggestions",value:function(e){return V(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,h.a.getAllGenesUsingGET({alias:e});case 3:return t.t1=t.sent,t.abrupt("return",{alias:t.t0,genes:t.t1});case 5:case"end":return t.stop()}},t)}))}},{key:"render",value:function(){return this.props.skipGeneValidation&&this.props.afterValidation&&this.props.afterValidation(!0,{found:[],suggestions:[]},this.oql),r.createElement(R,{genes:this.props.skipGeneValidation?{found:[],suggestions:[]}:this.genes.isError?new Error("ERROR"):this.genes.result,oql:this.oqlOrError,validatingGenes:!this.props.skipGeneValidation&&this.genes.isPending,errorMessageOnly:this.props.errorMessageOnly,wrapTheContent:this.props.wrap,replaceGene:this.props.replaceGene},this.props.children)}},{key:"oql",get:function(){return f(this.props.geneQuery)}},{key:"geneIds",get:function(){return this.oql.error?[]:this.oql.query.map(function(e){return e.gene})}},{key:"oqlOrError",get:function(){return this.oql.error?null!==this.props.focus&&void 0!==this.props.focus?this.props.focus===p.b.Unfocused?new Error("Please click 'Submit' to see location of error."):new Error("OQL syntax error at selected character; please fix and submit again."):new Error(this.oql.error.message):this.oql}}])&&N(n.prototype,i),a&&N(n,a),t}();F.defaultProps={errorMessageOnly:!1},G([b.a],F.prototype,"getGeneSuggestions",null),G([c.computed],F.prototype,"oql",null),G([c.computed],F.prototype,"geneIds",null),G([c.computed],F.prototype,"oqlOrError",null);var H=F=G([i.observer],F),Q=n(25),q=n(569),U=n.n(q);function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e,t){return!t||"object"!==X(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",function(){return J});var J,Z=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":X(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.STUDY_VIEW_PAGE=1]="STUDY_VIEW_PAGE",e[e.ONCOPRINT_HEATMAP=2]="ONCOPRINT_HEATMAP"}(J||(J={}));var $=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=K(this,Y(t).call(this,e))).currentTextAreaValue="",n.geneQuery="",n.geneQueryIsValid=!0,n.queryToBeValidated="",n.isFocused=!1,n.skipGenesValidation=!1,n.updateQueryToBeValidateDebounce=o.debounce(function(){n.queryToBeValidated=n.currentTextAreaValue,n.skipGenesValidation=!1,""===n.currentTextAreaValue&&(n.geneQuery="",n.props.callback&&n.props.callback(f(""),{found:[],suggestions:[]},n.geneQuery))},500),n.geneQuery=n.props.inputGeneQuery||"",n.queryToBeValidated=n.geneQuery,n.props.validateInputGeneQuery||(n.skipGenesValidation=!0),n.textAreaRef=r.createRef(),n}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(t,r["Component"]),n=t,(i=[{key:"componentDidMount",value:function(){var e=this;this.disposers=[Object(c.reaction)(function(){return e.props.inputGeneQuery},function(t){(t||"").toUpperCase()!==e.geneQuery.toUpperCase()&&(e.props.validateInputGeneQuery||(e.skipGenesValidation=!0),e.geneQuery=(t||"").trim(),e.queryToBeValidated=e.geneQuery),e.updateTextAreaRefValue()}),Object(c.reaction)(function(){return e.showFullText},function(){e.updateTextAreaRefValue()})]}},{key:"componentWillUnmount",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,o=this.disposers[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){(0,r.value)()}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}}},{key:"updateGeneQuery",value:function(e){this.geneQuery=e,this.queryToBeValidated=e,this.isFocused=!0,this.updateTextAreaRefValue()}},{key:"getTextAreaValue",value:function(){return this.showFullText?this.geneQuery:this.getFocusOutValue()}},{key:"updateTextAreaRefValue",value:function(){this.textAreaRef.current.value=this.getTextAreaValue()}},{key:"getFocusOutValue",value:function(){return function(e){var t="";if(e.length>0){t=e[0];for(var n=1;n<e.length;n++){if(t.length>13||t.length+e[n].length>13){t+=" and "+(e.length-n)+" more";break}t+=" "+e[n]}}return t}(f(this.geneQuery).query.map(function(e){return e.gene}))}},{key:"afterGeneSymbolValidation",value:function(e,t,n){this.geneQueryIsValid=e,this.props.callback&&this.props.callback(n,t,this.geneQuery),void 0===n.error||void 0!==this.props.focus&&this.props.focus!==p.b.ShouldFocus||!this.textAreaRef.current||(this.textAreaRef.current.focus(),this.textAreaRef.current.setSelectionRange(n.error.start,n.error.end))}},{key:"onChange",value:function(e){this.currentTextAreaValue=e.currentTarget.value,this.geneQuery=this.currentTextAreaValue,this.updateQueryToBeValidateDebounce()}},{key:"onFocus",value:function(){this.isFocused=!0}},{key:"onBlur",value:function(){this.isFocused=!1}},{key:"replaceGene",value:function(e,t){var n=Object(p.e)(this.getTextAreaValue().toUpperCase().replace(new RegExp("\\b".concat(e.toUpperCase(),"\\b"),"g"),function(){return t.toUpperCase()}));this.updateGeneQuery(n)}},{key:"render",value:function(){return r.createElement("div",{className:u.a.genesSelection},r.createElement("div",{className:u.a.topRow},r.createElement("textarea",{ref:this.textAreaRef,onFocus:this.onFocus,onBlur:this.onBlur,className:s()(this.textAreaClasses),rows:5,cols:80,placeholder:this.promptText,title:this.promptText,defaultValue:this.getTextAreaValue(),onChange:this.onChange,"data-test":"geneSet"}),this.props.submitButton&&this.props.submitButton),r.createElement("div",{className:"oqlValidationContainer"},r.createElement(H,{focus:this.props.focus,geneQuery:this.queryToBeValidated,skipGeneValidation:this.skipGenesValidation,updateGeneQuery:this.updateGeneQuery,afterValidation:this.afterGeneSymbolValidation,replaceGene:this.replaceGene,errorMessageOnly:this.props.location===J.STUDY_VIEW_PAGE},this.props.children)))}},{key:"textAreaClasses",get:function(){var e=[];switch(this.props.location){case J.STUDY_VIEW_PAGE:e.push(u.a.studyView),!this.isFocused&&this.geneQueryIsValid||e.push(u.a.studyViewFocus);break;case J.ONCOPRINT_HEATMAP:e.push(u.a.oncoprintHeatmap);break;default:e.push(u.a.default)}return this.geneQuery?e.push(u.a.notEmpty):e.push(u.a.empty),e}},{key:"showFullText",get:function(){return!this.geneQueryIsValid||this.isFocused||this.props.location!==J.STUDY_VIEW_PAGE}},{key:"promptText",get:function(){return this.props.textBoxPrompt?this.props.textBoxPrompt:"Click gene symbols below or enter here"}}])&&W(n.prototype,i),a&&W(n,a),t}();$.defaultProps={validateInputGeneQuery:!0},Z([c.observable],$.prototype,"geneQuery",void 0),Z([c.observable],$.prototype,"geneQueryIsValid",void 0),Z([c.observable],$.prototype,"queryToBeValidated",void 0),Z([c.observable],$.prototype,"isFocused",void 0),Z([c.observable],$.prototype,"skipGenesValidation",void 0),Z([Q.a,c.action],$.prototype,"updateGeneQuery",null),Z([Q.a,c.action],$.prototype,"updateTextAreaRefValue",null),Z([c.computed],$.prototype,"textAreaClasses",null),Z([c.computed],$.prototype,"showFullText",null),Z([Q.a,c.action],$.prototype,"afterGeneSymbolValidation",null),Z([c.computed],$.prototype,"promptText",null),Z([U.a],$.prototype,"onChange",null),Z([U.a],$.prototype,"onFocus",null),Z([U.a],$.prototype,"onBlur",null),Z([U.a],$.prototype,"replaceGene",null),$=Z([i.observer],$);t.b=$},660:function(e,t,n){"use strict";var r=n(4),o=n(5),i=n(172);var a=n(7),s=n(96);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",function(){return f});var p=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},d=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}l((r=r.apply(e,t||[])).next())})};var f=function(){function e(t,n){var u=this,c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1500;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.routing=t,this.propertiesMap=n,this.sessionEnabled=c,this.urlCharThresholdForSession=p,this.sessionProps={},this.remoteSessionData=Object(r.W)({invoke:function(){return d(u,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.needToLoadSession){e.next=9;break}return Object(s.a)("fetching remote session",this.sessionId),e.next=4,this.getRemoteSession(this.sessionId);case 4:return void 0===(t=e.sent).version&&(t=Object(i.c)(t)),e.abrupt("return",t);case 9:return e.abrupt("return",void 0);case 10:case"end":return e.stop()}},e,this)}))},onResult:function(){u.remoteSessionData.result?u._sessionData={id:u.remoteSessionData.result.id,query:u.remoteSessionData.result.data,path:u.routing.location.pathname,version:u.remoteSessionData.result.version}:u._sessionData&&"pending"!==u._sessionData.id&&delete u._sessionData}}),this.properties=a.entries(this.propertiesMap).map(function(e){return Object.assign({name:e[0]},e[1])});var f={},y=!0,h=!1,m=void 0;try{for(var b,g=this.properties[Symbol.iterator]();!(y=(b=g.next()).done);y=!0){var v=b.value,_=t.location.query[v.name];a.isString(_)&&(_=decodeURIComponent(_)),f[v.name]=_}}catch(e){h=!0,m=e}finally{try{y||null==g.return||g.return()}finally{if(h)throw m}}this.query=Object(o.observable)(f),Object(o.intercept)(this.query,function(e){return e.newValue===u.query[e.name]?null:(Object(s.a)("changing",e.name,e.newValue,u.query[e.name]),e)}),this.reactionDisposer=Object(o.reaction)(function(){return[t.location.query,u._sessionData&&u._sessionData.query]},function(e){var t=l(e,2),n=t[0],r=t[1];u.pathContext&&!new RegExp("^/*".concat(u.pathContext)).test(u.routing.location.pathname)||Object(o.runInAction)(function(){Object(s.a)("setting session",n.session_id);var e=!0,t=!1,o=void 0;try{for(var i,a=u.properties[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var l=i.value;u.hasSessionId&&l.isSessionProp?r&&u.syncProperty(l,r):u.syncProperty(l,n)}}catch(e){t=!0,o=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw o}}})},{fireImmediately:!0})}var t,n,c;return t=e,(n=[{key:"updateURL",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this.getSessionProps(),l=a.assign({},this.query,e),u=a.reduce(l,function(e,t,n){return n in i?e.sessionProps[n]=l[n]:void 0!==l[n]&&(e.nonSessionProps[n]=l[n]),e},{sessionProps:{},nonSessionProps:{}}),c=a.reduce(u.sessionProps,function(e,t,n){return void 0!==t&&e.push("".concat(n,"=").concat(encodeURIComponent(t))),e},[]).join("&");Object(s.a)("url length",c.length);var p=a.some(a.keys(e),function(e){return e in i});if(this.sessionEnabled&&(this.hasSessionId||c.length>this.urlCharThresholdForSession))if(p){var d=Date.now();this._sessionData={id:"pending",query:u.sessionProps,path:n||this.pathName,version:3,timeStamp:d},this.routing.updateRoute(Object.assign({},u.nonSessionProps,{session_id:"pending"}),n,!0,!1),Object(s.a)("updating URL (non session)",e),this.saveRemoteSession(u.sessionProps).then(function(e){t._sessionData&&d===t._sessionData.timeStamp&&(t._sessionData.id=e.id,t.routing.updateRoute({session_id:e.id},n,!1,!0))})}else this.routing.updateRoute(Object.assign({},u.nonSessionProps),n,r,o);else this.routing.updateRoute(e,n,r,o)}},{key:"saveRemoteSession",value:function(e){return Object(i.d)(e)}},{key:"getRemoteSession",value:function(e){return Object(i.b)(this.sessionId)}},{key:"syncProperty",value:function(e,t){var n=void 0;if(void 0!==t[e.name])n=t[e.name];else if(e.aliases&&e.aliases.length){var r=!0,o=!1,i=void 0;try{for(var a,s=e.aliases[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){if(void 0!==(n=t[a.value]))break}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}}this.trySyncProperty(e,n)}},{key:"trySyncProperty",value:function(e,t){var n="string"==typeof t?decodeURIComponent(t):void 0;return e.name in this.query?this.query[e.name]=n:Object(o.extendObservable)(this.query,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e.name,n)),void 0!==n}},{key:"getSessionProps",value:function(){var e={},t=!0,n=!1,r=void 0;try{for(var o,i=this.properties[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;a.isSessionProp&&(e[a.name]=this.query[a.name])}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return e}},{key:"destroy",value:function(){this.reactionDisposer()}},{key:"isPendingSession",get:function(){return"pending"===this.sessionId}},{key:"sessionId",get:function(){return""===this.routing.location.query.session_id?void 0:this.routing.location.query.session_id}},{key:"isLoadingSession",get:function(){return!a.isEmpty(this.sessionId)&&this.remoteSessionData.isPending}},{key:"hasSessionId",get:function(){return void 0!==this.sessionId}},{key:"needToLoadSession",get:function(){return void 0!==(e=this).sessionId&&"pending"!==e.sessionId&&(void 0===e._sessionData||e._sessionData.id!==e.sessionId);var e}},{key:"hash",get:function(){var e=this;return function(e){var t=0;if(0==e.length)return t;for(var n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t}(a.reduce(this.properties,function(t,n){return n.isSessionProp&&(t="".concat(t,",").concat(n.name,":").concat(e.query[n.name])),t},""))}},{key:"pathName",get:function(){return this.routing.location.pathname}}])&&u(t.prototype,n),c&&u(t,c),e}();p([o.observable],f.prototype,"sessionProps",void 0),p([o.action],f.prototype,"updateURL",null),p([o.computed],f.prototype,"isPendingSession",null),p([o.computed],f.prototype,"sessionId",null),p([o.observable],f.prototype,"_sessionData",void 0),p([o.computed],f.prototype,"isLoadingSession",null),p([o.computed],f.prototype,"hasSessionId",null),p([o.computed],f.prototype,"needToLoadSession",null),p([o.computed],f.prototype,"hash",null),p([o.computed],f.prototype,"pathName",null)},673:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),o=n(6);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,l(t).apply(this,arguments))}var n,i,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["Component"]),n=t,(i=[{key:"render",value:function(){return r.createElement(o.b,{to:"/study?id=".concat(this.props.studyId),className:this.props.className},this.props.children)}}])&&a(n.prototype,i),c&&a(n,c),t}()},674:function(e,t,n){"use strict";n.d(t,"b",function(){return d}),n.d(t,"a",function(){return f});var r=n(0),o=n(760),i=n.n(o);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return function(t,n,r){return n in t&&t[n]instanceof e?null:new Error("Expecting ".concat(r," to receive {").concat(JSON.stringify(n),": ").concat(e.name,"} from context"))}}function d(e){return i()({store:p(e)},function(e){return{store:e.store}})}function f(e){var t;return(t=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,u(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r["Component"]),n=t,(o=[{key:"store",get:function(){return this.context.store}}])&&s(n.prototype,o),i&&s(n,i),t}()).contextTypes={store:p(e)},t}},677:function(e,t,n){"use strict";var r=n(7),o=n(5);function i(e,t){return t.toLowerCase().indexOf(e.toLowerCase())>-1}function a(e,t,n){n||(n=i);var r=!1,o=!1,a=!1,s=!0,l=!1,u=void 0;try{for(var c,p=e[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){if("not"!==c.value.type){o=!0;break}}}catch(e){l=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw u}}o||(r=!0);var d=!0,f=!1,y=void 0;try{for(var h,m=e[Symbol.iterator]();!(d=(h=m.next()).done);d=!0){var b=h.value;if("not"===b.type){if(n(b.data,t)){r=!1,a=!0;break}}else if("and"===b.type){o=!0;var g=!0,v=!0,_=!1,S=void 0;try{for(var E,w=b.data[Symbol.iterator]();!(v=(E=w.next()).done);v=!0){var P=E.value;g=g&&n(P,t)}}catch(e){_=!0,S=e}finally{try{v||null==w.return||w.return()}finally{if(_)throw S}}r=r||g}}}catch(e){f=!0,y=e}finally{try{d||null==m.return||m.return()}finally{if(f)throw y}}return{match:r,forced:a}}var s=n(79),l=n(3),u=n(95),c=n.n(u);function p(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),e}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",function(){return g}),n.d(t,"b",function(){return v});var b=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":m(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},g="pan_can_atlas",v=function(){function e(t){f(this,e),this.store=t}return h(e,[{key:"getMetadata",value:function(e){return this.store.treeData.map_node_meta.get(e)}},{key:"cancerTypeContainsSelectedStudies",value:function(e){var t=this.getMetadata(e).descendantStudies;return r.intersection(this.store.selectableSelectedStudies,t).length>0}},{key:"getDepth",value:function(e){return this.getMetadata(e).ancestors.length}},{key:"isHighlighted",value:function(e){return!!this.store.searchText&&!!this.map_node_filterBySearchText.get(e)}},{key:"map_node_filterByDepth",get:function(){var e=new Map,t=!0,n=!1,r=void 0;try{for(var o,i=this.store.treeData.map_node_meta.entries()[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=d(o.value,2),s=a[0],l=a[1],u=!0;l.isCancerType&&(!l.descendantStudies.length||l.ancestors.length>this.store.maxTreeDepth&&!s.alwaysVisible)&&(u=!1),e.set(s,u)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return e}},{key:"map_node_filterBySearchText",get:function(){var e=function(e){e=e.toLowerCase().trim().split(/\s+/g).join(" ");for(var t,n,r=[],o=0;o<e.length;)'"'===e[o]?-1===(n=e.indexOf('"',o+1))?(r.push(e.substring(o+1)),o=e.length):(r.push(e.substring(o+1,n)),o=n+1):" "===e[o]?o+=1:"-"===e[o]?(r.push("-"),o+=1):-1===(t=e.indexOf(" ",o))?(r.push(e.substring(o)),o=e.length):(r.push(e.substring(o,t)),o=t+1);var i,a,s=[];for(o=0;o<r.length;)"-"===r[o]?(o<r.length-1&&s.push({type:"not",data:r[o+1]}),o+=2):(i=r.indexOf("or",o),a=r.indexOf("-",o),-1===i&&-1===a?(s.push({type:"and",data:r.slice(o)}),o=r.length):-1===i&&a>0?(s.push({type:"and",data:r.slice(o,a)}),o=a):i>0&&-1===a?(s.push({type:"and",data:r.slice(o,i)}),o=i+1):i<a?(s.push({type:"and",data:r.slice(o,i)}),o=i+1):(s.push({type:"and",data:r.slice(o,a)}),o=a));return s}(this.store.searchText),t=new Map,n=!0,r=!1,o=void 0;try{for(var i,s=this.store.treeData.map_node_meta.entries()[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var l=d(i.value,2),u=l[0],c=(_=l[1]).searchTerms;u.hasOwnProperty("studyId")&&(c+=u.studyId?u.studyId:""),t.set(u,a(e,c))}}catch(e){r=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}var f=new Map,y=!0,h=!1,m=void 0;try{for(var b,g=this.store.treeData.map_node_meta.entries()[Symbol.iterator]();!(y=(b=g.next()).done);y=!0){var v=d(b.value,2),_=(u=v[0],v[1]);if(!f.has(u)){for(var S=!1,E=0,w=[u].concat(p(_.ancestors),p(_.priorityCategories));E<w.length;E++){var P=w[E],O=t.get(P);if(!O.match&&O.forced){S=!1;break}S=S||O.match}if(f.set(u,S),S&&!_.isCancerType)for(var T=0,C=[_.ancestors,_.priorityCategories];T<C.length;T++){var I=C[T],k=!0,R=!1,x=void 0;try{for(var j,N=I[Symbol.iterator]();!(k=(j=N.next()).done);k=!0){var A=j.value;f.set(A,!0)}}catch(e){R=!0,x=e}finally{try{k||null==N.return||N.return()}finally{if(R)throw x}}}}}}catch(e){h=!0,m=e}finally{try{y||null==g.return||g.return()}finally{if(h)throw m}}return f}},{key:"map_node_filterBySelectedCancerTypes",get:function(){var e=new Map;if(this.store.selectedCancerTypes.length){var t=!0,n=!1,r=void 0;try{for(var o,i=this.store.selectedCancerTypes[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value,s=this.getMetadata(a);e.set(a,!0);for(var l=0,u=[s.ancestors,s.descendantCancerTypes,s.descendantStudies];l<u.length;l++){var c=u[l],p=!0,d=!1,f=void 0;try{for(var y,h=c[Symbol.iterator]();!(p=(y=h.next()).done);p=!0){var m=y.value;e.set(m,!0)}}catch(e){d=!0,f=e}finally{try{p||null==h.return||h.return()}finally{if(d)throw f}}}}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}else{var b=!0,g=!1,v=void 0;try{for(var _,S=this.store.treeData.map_node_meta.keys()[Symbol.iterator]();!(b=(_=S.next()).done);b=!0){var E=_.value;e.set(E,!0)}}catch(e){g=!0,v=e}finally{try{b||null==S.return||S.return()}finally{if(g)throw v}}}return e}},{key:"map_node_filterBySelectedStudies",get:function(){var e=new Map;if(this.store.selectableSelectedStudies.length){var t=!0,n=!1,r=void 0;try{for(var o,i=this.store.selectableSelectedStudies[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value,s=this.store.treeData.map_node_meta.get(a);e.set(a,!0);for(var l=0,u=[s.descendantStudies,s.ancestors,s.priorityCategories];l<u.length;l++){var c=u[l],p=!0,d=!1,f=void 0;try{for(var y,h=c[Symbol.iterator]();!(p=(y=h.next()).done);p=!0){var m=y.value;e.set(m,!0)}}catch(e){d=!0,f=e}finally{try{p||null==h.return||h.return()}finally{if(d)throw f}}}}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}return e}},{key:"mainView",get:function(){return new _(this.store,[this.map_node_filterByDepth,this.map_node_filterBySearchText,this.map_node_filterBySelectedCancerTypes])}},{key:"cancerTypeListView",get:function(){return new _(this.store,[this.map_node_filterByDepth,this.map_node_filterBySearchText])}},{key:"selectedStudiesView",get:function(){var e=this;return new _(this.store,[this.map_node_filterByDepth,this.map_node_filterBySelectedStudies,{get:function(t){return!e.getMetadata(t).isPriorityCategory}}])}}]),e}();b([s.cached],v.prototype,"map_node_filterByDepth",null),b([s.cached],v.prototype,"map_node_filterBySearchText",null),b([s.cached],v.prototype,"map_node_filterBySelectedCancerTypes",null),b([s.cached],v.prototype,"map_node_filterBySelectedStudies",null),b([o.computed],v.prototype,"mainView",null),b([o.computed],v.prototype,"cancerTypeListView",null),b([o.computed],v.prototype,"selectedStudiesView",null);var _=function(){function e(t,n){var r=this;f(this,e),this.store=t,this.filters=n,this.nodeFilter=function(e){return r.filters.every(function(t){return!!t.get(e)})}}return h(e,[{key:"getMetadata",value:function(e){return this.store.treeData.map_node_meta.get(e)}},{key:"getChildCancerTypes",value:function(e,t){var n=this.getMetadata(e);return(n.ancestors.length<this.store.maxTreeDepth||!t&&e.alwaysVisible?n.childCancerTypes:[]).filter(this.nodeFilter)}},{key:"getChildCancerStudies",value:function(e){var t=this.getMetadata(e),n=[];if(t.ancestors.length<this.store.maxTreeDepth)n=t.childStudies;else if(n=t.descendantStudies,e.alwaysVisible){var o=r.chain(t.descendantCancerTypes).filter(function(e){return e.alwaysVisible}).map(function(e){return e.cancerTypeId}).value();n=r.filter(n,function(e){return!o.includes(e.cancerTypeId)})}return n.filter(this.nodeFilter)}},{key:"getDescendantCancerStudies",value:function(e){return this.getMetadata(e).descendantStudies.filter(this.nodeFilter)}},{key:"getCheckboxProps",value:function(e){var t=this;if(this.getMetadata(e).isCancerType){var n=(this.store.selectableSelectedStudyIds||[]).map(function(e){return t.store.treeData.map_studyId_cancerStudy.get(e)}),o=this.getDescendantCancerStudies(e),i=r.intersection(o,n),a=i.length>0;return{checked:a,indeterminate:a&&i.length!=o.length}}var s=e;return{checked:!!this.store.selectableSelectedStudyIds.find(function(e){return e==s.studyId}),disabled:this.store.isDeletedVirtualStudy(s.studyId)}}},{key:"isCheckBoxDisabled",value:function(e){if(this.getMetadata(e).isCancerType)return!1;var t=e;return!!this.store.isDeletedVirtualStudy(t.studyId)}},{key:"clearAllSelection",value:function(){this.store.selectableSelectedStudyIds=[]}},{key:"onCheck",value:function(e,t){var n;this.getMetadata(e).isCancerType?this.store.forDownloadTab||(n=this.getDescendantCancerStudies(e).map(function(e){return e.studyId})):n=[e.studyId],n&&this.handleCheckboxStudyIds(n,t)}},{key:"getSelectionReport",value:function(){var e=this,t=this.store.selectableSelectedStudyIds||[],n=t.map(function(t){return e.store.treeData.map_studyId_cancerStudy.get(t)}),o=this.getDescendantCancerStudies(this.store.treeData.rootCancerType);return{selectableSelectedStudyIds:t,selectableSelectedStudies:n,shownStudies:o,shownAndSelectedStudies:r.intersection(o,n)}}},{key:"quickSelectButtons",value:function(e){if(!e)return{};try{return l.a.parseConfigFormat(e)}catch(e){return{}}}},{key:"toggleAllFiltered",value:function(){var e=this,t=this.getSelectionReport(),n=(t.selectableSelectedStudyIds,t.selectableSelectedStudies,t.shownStudies),o=t.shownAndSelectedStudies,i=[];i=n.length===o.length?r.without.apply(r,[this.store.selectableSelectedStudyIds].concat(p(n.map(function(e){return e.studyId})))):r.union(this.store.selectableSelectedStudyIds,n.map(function(e){return e.studyId})),this.store.selectableSelectedStudyIds=i.filter(function(t){return!r.includes(e.store.deletedVirtualStudies,t)})}},{key:"selectAllMatchingStudies",value:function(e){var t=this.getSelectionReport(),n=(t.selectableSelectedStudyIds,t.selectableSelectedStudies,t.shownStudies);t.shownAndSelectedStudies;this.store.selectableSelectedStudyIds=n.map(function(e){return e.studyId}).filter(function(t){return r.isArray(e)?e.includes(t):t.includes(e)})}},{key:"handleCheckboxStudyIds",value:function(e,t){var n=this,o=this.store.selectableSelectedStudyIds;o=t?r.union(o,e):r.difference(o,e),this.store.selectableSelectedStudyIds=o.filter(function(e){return!r.includes(n.store.deletedVirtualStudies,e)})}},{key:"isFiltered",get:function(){return this.store.selectedCancerTypeIds.length>0||this.store.searchText.length>0}}]),e}();b([o.action],_.prototype,"clearAllSelection",null),b([o.action],_.prototype,"onCheck",null),b([o.computed],_.prototype,"isFiltered",null),b([c.a],_.prototype,"quickSelectButtons",null),b([o.action],_.prototype,"toggleAllFiltered",null),b([o.action],_.prototype,"selectAllMatchingStudies",null)},717:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__-Qj7G",framedImage:"styles-module__framedImage__TmznI",labeledCheckbox:"styles-module__labeledCheckbox__jTAe1"}},811:function(e,t,n){e.exports=n(15)(77)},814:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),o=n(11),i=n(5),a=n(93),s=Object(o.observer)(function(e){return e.store.cancerTypes.isPending||e.store.cancerStudies.isPending||e.store.profiledSamplesCount.isPending?r.createElement(a.a,{isLoading:!0,size:"small",center:!1}):r.createElement(o.Observer,null,function(){var t=Object(i.expr)(function(){return e.store.selectableSelectedStudyIds.length});return r.createElement(r.Fragment,null,r.createElement("a",{onClick:function(){t&&(e.store.showSelectedStudiesOnly=!e.store.showSelectedStudiesOnly)}},r.createElement("b",null,t)," ",1===t?"study":"studies"," ","selected (",r.createElement("b",null,e.store.profiledSamplesCount.result.all)," ","samples)"),e.store.selectableSelectedStudies.length>0&&r.createElement("a",{"data-test":"globalDeselectAllStudiesButton",style:{marginLeft:10},onClick:function(){return e.store.studyListLogic.mainView.clearAllSelection()}},"Deselect all"))})})},843:function(e,t,n){e.exports=n(15)(427)},851:function(e,t,n){"use strict";var r=n(0),o=n(11);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,s(t).apply(this,arguments))}var n,o,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement("span",null,"Queries are limited by gene and sample count. The product of the query's gene and sample count must be less than"," ",this.props.queryProductLimit.toLocaleString(),". You have selected ",this.props.sampleCount.toLocaleString()," samples, so you can have no more than"," ",Math.floor(this.props.queryProductLimit/this.props.sampleCount).toLocaleString()," ","genes in your query. Please"," ",r.createElement("a",{style:{color:"#ccc"},href:"mailto:".concat(this.props.email)},"let us know")," ","your use case(s) if you need to query more than that.")}}])&&i(n.prototype,o),u&&i(n,u),t}();p=c([o.observer],p),t.a=p},853:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(563),o=n(167),i=n(624);function a(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=window,s=new r.c(e);return s.singlePageAppSubmitRoutine=function(e){e.cancer_study_list=e.cancer_study_list||e.cancer_study_id,delete e.cancer_study_id;var r=s.physicalStudyIdsInSelection.length>1&&1===s.geneIds.length?o.a.CANCER_TYPES_SUMMARY:o.a.ONCOPRINT,l=t||new i.b(a.routingStore);l.updateURL(e,"results/".concat(r),n,!1),void 0===t&&l.destroy()},s}},855:function(e,t,n){e.exports=n(15)(909)},858:function(e,t,n){"use strict";var r=n(0),o=n.n(r),i=n(580),a=n(11),s=n(928),l=n(626),u=n(7),c=n(610),p=n.n(c),d=n(28),f=n.n(d),y=n(563),h=n(4),m=n(629),b=n(3);function g(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var O=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":P(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},T=i,C=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=S(this,E(t).apply(this,arguments))).ProfileToggle=function(t){var n,o=t.profile,i=t.type,a=t.label,s=t.checked,l=t.isGroupToggle;return r.createElement("label",{className:f()((n={},v(n,T.altType,l),v(n,T.radio,"radio"===i),v(n,T.checkbox,"checkbox"===i),n))},r.createElement("input",{type:i,checked:s,onChange:function(t){return e.store.selectMolecularProfile(o,t.target.checked)},"data-test":o.molecularAlterationType}),r.createElement("span",{className:l?T.groupName:T.profileName},a),!l&&r.createElement(h.c,{mouseEnterDelay:0,placement:"right",overlay:r.createElement("div",{className:T.tooltip},o.description)},r.createElement(p.a,{className:T.infoIcon,name:"question-circle"})))},e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,y["d"]),n=t,(o=[{key:"render",value:function(){return 1!==this.store.selectableSelectedStudyIds.length?null:r.createElement(l.b,{padded:!0,className:T.MolecularProfileSelector},r.createElement(m.a,{className:"sectionLabel",promises:[this.store.molecularProfiles]},"Select Genomic Profiles:"),r.createElement("div",{className:T.group,"data-test":"molecularProfileSelector"},this.renderGroup("MUTATION_EXTENDED","Mutation"),this.renderGroup("COPY_NUMBER_ALTERATION","Copy Number"),this.showGSVA&&this.renderGroup("GENESET_SCORE","GSVA scores"),this.renderGroup("MRNA_EXPRESSION","mRNA Expression"),this.renderGroup("METHYLATION","DNA Methylation"),this.renderGroup("METHYLATION_BINARY","DNA Methylation"),this.renderGroup("PROTEIN_LEVEL","Protein/phosphoprotein level"),!(!this.store.molecularProfiles.isComplete||this.store.molecularProfiles.result.length)&&r.createElement("strong",null,"No Genomic Profiles available for this Cancer Study")))}},{key:"renderGroup",value:function(e,t){var n=this,o=this.store.getFilteredProfiles(e);if(!o.length)return null;var i=o.map(function(e){return e.molecularProfileId}),a=u.intersection(this.store.selectedProfileIds,i).length>0,s=[];o.length>1&&!this.store.forDownloadTab&&s.push(r.createElement(this.ProfileToggle,{key:"altTypeCheckbox:"+e,profile:o[0],type:"checkbox",label:"".concat(t,". Select one of the profiles below:"),checked:a,isGroupToggle:!0}));var l=o.map(function(e){return r.createElement(n.ProfileToggle,{key:"profile:"+e.molecularProfileId,profile:e,type:n.store.forDownloadTab||o.length>1?"radio":"checkbox",label:e.name,checked:u.includes(n.store.selectedProfileIds,e.molecularProfileId),isGroupToggle:!1})});return this.store.forDownloadTab||1==o.length?s.push.apply(s,g(l)):s.push(r.createElement("div",{key:"group:"+e,className:T.group},l)),this.store.forDownloadTab?s:(a&&"MRNA_EXPRESSION"==e&&s.push(r.createElement("div",{key:s.length,className:T.zScore},"Enter a z-score threshold"," ",r.createElement("span",{dangerouslySetInnerHTML:{__html:["&","plusmn;"].join("")}}),r.createElement("input",{type:"text",value:this.store.zScoreThreshold,onChange:function(e){n.store.zScoreThreshold=e.target.value}}))),a&&"PROTEIN_LEVEL"==e&&s.push(r.createElement("div",{key:s.length,className:T.zScore},"Enter a z-score threshold"," ",r.createElement("span",{dangerouslySetInnerHTML:{__html:["&","plusmn;"].join("")}}),r.createElement("input",{type:"text",value:this.store.rppaScoreThreshold,onChange:function(e){n.store.rppaScoreThreshold=e.target.value}}))),s)}},{key:"showGSVA",get:function(){return b.b.serverConfig.skin_show_gsva}}])&&_(n.prototype,o),i&&_(n,i),t}(),I=C=O([a.observer],C),k=n(93);function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var D=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},M=i,L=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),x(this,j(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,y["d"]),n=t,(o=[{key:"render",value:function(){if(!this.store.isVirtualStudyQuery)return null;var e=[];return e.push(r.createElement(k.a,{key:"loading",isLoading:this.store.profileAvailability.isPending})),this.store.profileAvailability.isError?e.push(r.createElement("span",{key:"error"},"Error loading profiles for selected studies.")):this.store.profileAvailability.isComplete&&(e=e.concat(function(e,t){var n=[];e.mutation&&n.push(r.createElement(V,{key:"M",label:"Mutation",state:"mutation",store:t,dataTest:"M"}));e.cna&&n.push(r.createElement(V,{key:"C",label:"Copy number alterations",state:"cna",store:t,dataTest:"C"}));return n}(this.store.profileAvailability.result,this.store))),r.createElement(l.b,{padded:!0,className:M.DataTypePrioritySelector,"data-test":"dataTypePrioritySelector"},r.createElement(m.a,{className:"sectionLabel"},"Select Molecular Profiles:"),r.createElement(l.b,null,e))}}])&&R(n.prototype,o),i&&R(n,i),t}(),G=L=D([a.observer],L),V=Object(a.observer)(function(e){return r.createElement("label",{className:M.DataTypePriorityLabel},r.createElement("input",{type:"checkbox",checked:e.store.dataTypePriority[e.state]||!1,onChange:function(t){e.store.dataTypePriority[e.state]=t.currentTarget.checked},"data-test":e.dataTest}),e.label)});var B=n(92),F=n(5),H=[{id:"Prostate Cancer: AR Signaling",genes:["SOX9","RAN","TNK2","EP300","PXN","NCOA2","AR","NRIP1","NCOR1","NCOR2"]},{id:"Prostate Cancer: AR and steroid synthesis enzymes",genes:["AKR1C3","AR","CYB5A","CYP11A1","CYP11B1","CYP11B2","CYP17A1","CYP19A1","CYP21A2","HSD17B1","HSD17B10","HSD17B11","HSD17B12","HSD17B13","HSD17B14","HSD17B2","HSD17B3","HSD17B4","HSD17B6","HSD17B7","HSD17B8","HSD3B1","HSD3B2","HSD3B7","RDH5","SHBG","SRD5A1","SRD5A2","SRD5A3","STAR"]},{id:"Prostate Cancer: Steroid inactivating genes",genes:["AKR1C1","AKR1C2","AKR1C4","CYP3A4","CYP3A43","CYP3A5","CYP3A7","UGT2B15","UGT2B17","UGT2B7"]},{id:"Prostate Cancer: Down-regulated by androgen",genes:["BCHE","CDK8","CTBP1","ACKR3","DDC","DPH1","FN1","HES6","MMP16","MYC","PEG3","PIK3R3","PRKD1","SCNN1A","SDC4","SERPINI1","SLC29A1","ST7","TULP4"]},{id:"Glioblastoma: TP53 Pathway",genes:["CDKN2A","MDM2","MDM4","TP53"]},{id:"Glioblastoma: RTK/Ras/PI3K/AKT Signaling",genes:["EGFR","ERBB2","PDGFRA","MET","KRAS","NRAS","HRAS","NF1","SPRY2","FOXO1","FOXO3","AKT1","AKT2","AKT3","PIK3R1","PIK3CA","PTEN"]},{id:"Glioblastoma: RB Pathway",genes:["CDKN2A","CDKN2B","CDKN2C","CDK4","CDK6","CCND2","RB1"]},{id:"Ovarian Cancer: Oncogenes associated with epithelial ovarian cancer",genes:["RAB25","MECOM","EIF5A2","PRKCI","PIK3CA","KIT","FGF1","MYC","EGFR","NOTCH3","KRAS","AKT1","ERBB2","PIK3R1","CCNE1","AKT2","AURKA"]},{id:"Ovarian Cancer: Putative tumor-suppressor genes in epithelial ovarian cancer",genes:["DIRAS3","RASSF1","DLEC1","SPARC","DAB2","PLAGL1","RPS6KA2","PTEN","OPCML","BRCA2","ARL11","WWOX","TP53","DPH1","BRCA1","PEG3"]},{id:"General: Cell Cycle Control",genes:["RB1","RBL1","RBL2","CCNA1","CCNB1","CDK1","CCNE1","CDK2","CDC25A","CCND1","CDK4","CDK6","CCND2","CDKN2A","CDKN2B","MYC","CDKN1A","CDKN1B","E2F1","E2F2","E2F3","E2F4","E2F5","E2F6","E2F7","E2F8","SRC","JAK1","JAK2","STAT1","STAT2","STAT3","STAT5A","STAT5B"]},{id:"General: p53 signaling",genes:["TP53","MDM2","MDM4","CDKN2A","CDKN2B","TP53BP1"]},{id:"General: Notch signaling",genes:["ADAM10","ADAM17","APH1A","APH1B","ARRDC1","CIR1","CTBP1","CTBP2","CUL1","DLL1","DLL3","DLL4","DTX1","DTX2","DTX3","DTX3L","DTX4","EP300","FBXW7","HDAC1","HDAC2","HES1","HES5","HEYL","ITCH","JAG1","JAG2","KDM5A","LFNG","MAML1","MAML2","MAML3","MFNG","NCOR2","NCSTN","NOTCH1","NOTCH2","NOTCH3","NOTCH4","NRARP","NUMB","NUMBL","PSEN1","PSEN2","PSENEN","RBPJ","RBPJL","RFNG","SNW1","SPEN","HES2","HES4","HES7","HEY1","HEY2"]},{id:"General: DNA Damage Response",genes:["CHEK1","CHEK2","RAD51","BRCA1","BRCA2","MLH1","MSH2","ATM","ATR","MDC1","PARP1","FANCF"]},{id:"General: Other growth / proliferation signaling",genes:["CSF1","CSF1R","IGF1","IGF1R","FGF1","FGFR1","AURKA","DLEC1","PLAGL1","OPCML","DPH1"]},{id:"General: Survival / cell death regulation signaling",genes:["NFKB1","NFKB2","CHUK","DIRAS3","FAS","HLA-G","BAD","BCL2","BCL2L1","APAF1","CASP9","CASP8","CASP10","CASP3","CASP6","CASP7","GSK3B","ARL11","WWOX","PEG3","TGFB1","TGFBR1","TGFBR2"]},{id:"General: Telomere maintenance",genes:["TERC","TERT"]},{id:"General: RTK signaling family",genes:["EGFR","ERBB2","ERBB3","ERBB4","PDGFA","PDGFB","PDGFRA","PDGFRB","KIT","FGF1","FGFR1","IGF1","IGF1R","VEGFA","VEGFB","KDR"]},{id:"General: PI3K-AKT-mTOR signaling",genes:["PIK3CA","PIK3R1","PIK3R2","PTEN","PDPK1","AKT1","AKT2","FOXO1","FOXO3","MTOR","RICTOR","TSC1","TSC2","RHEB","AKT1S1","RPTOR","MLST8"]},{id:"General: Ras-Raf-MEK-Erk/JNK signaling",genes:["KRAS","HRAS","BRAF","RAF1","MAP3K1","MAP3K2","MAP3K3","MAP3K4","MAP3K5","MAP2K1","MAP2K2","MAP2K3","MAP2K4","MAP2K5","MAPK1","MAPK3","MAPK4","MAPK6","MAPK7","MAPK8","MAPK9","MAPK12","MAPK14","DAB2","RASSF1","RAB25"]},{id:"General: Regulation of ribosomal protein synthesis and cell growth",genes:["RPS6KA1","RPS6KA2","RPS6KB1","RPS6KB2","EIF5A2","EIF4E","EIF4EBP1","RPS6","HIF1A"]},{id:"General: Angiogenesis",genes:["VEGFA","VEGFB","KDR","CXCL8","CXCR1","CXCR2"]},{id:"General: Folate transport",genes:["SLC19A1","FOLR1","FOLR2","FOLR3","IZUMO1R"]},{id:"General: Invasion and metastasis",genes:["MMP1","MMP2","MMP3","MMP7","MMP9","MMP10","MMP11","MMP12","MMP13","MMP14","MMP15","MMP16","MMP17","MMP19","MMP21","MMP23B","MMP24","MMP25","MMP26","MMP27","MMP28","ITGB3","ITGAV","PTK2","CDH1","SPARC","WFDC2"]},{id:"General: TGF- Pathway",genes:["TGFB1","TGFB2","TGFB3","TGFBR1","TGFBR2","TGFBR3","BMP2","BMP3","BMP4","BMP5","BMP6","BMP7","GDF2","BMP10","BMP15","BMPR1A","BMPR1B","BMPR2","ACVR1","ACVR1B","ACVR1C","ACVR2A","ACVR2B","ACVRL1","Nodal","GDF1","GDF11","INHA","INHBA","INHBB","INHBC","INHBE","SMAD2","SMAD3","SMAD1","SMAD5","SMAD4","SMAD9","SMAD6","SMAD7","SPTBN1","TGFBRAP1","ZFYVE9"]}],Q=n(9),q=n.n(Q),U=n(550);n(947),n(948);function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e,t){return!t||"object"!==X(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var J=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":X(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Z=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}l((r=r.apply(e,t||[])).next())})},$=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=K(this,Y(t).call(this,e))).isLoading=!0,n.map_geneSets_selected=new F.ObservableMap,n.map_geneSets_selected.replace(e.initialSelection.map(function(e){return[e,!0]})),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(t,o.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){var e=this;this.promisedTree=this.initTree(this.tree),this.promisedTree.then(function(t){return e.isLoading=!1,t})}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.scoreThreshold===e.scoreThreshold&&this.props.pvalueThreshold===e.pvalueThreshold&&this.props.percentile===e.percentile||(this.promisedTree=this.promisedTree.then(function(e){return t.isLoading=!0,t.replaceTree(e)}).then(function(e){return t.isLoading=!1,e})),this.props.searchValue!==e.searchValue&&(this.promisedTree=this.promisedTree.then(function(e){return t.searchTree(e,t.props.searchValue)}))}},{key:"transformHierarchyData",value:function(e){var t=e,n=[],r=0,o=!0,i=!1,a=void 0;try{for(var s,l=t[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var c=s.value,p=c.nodeName,d=c.parentNodeName?c.parentNodeName:"#";if(n.push({id:p,parent:d,text:p,li_attr:{name:p},geneset:!1,state:{opened:!0,selected:!1}}),u.has(c,"genesets")){var f=!0,y=!1,h=void 0;try{for(var m,b=c.genesets[Symbol.iterator]();!(f=(m=b.next()).done);f=!0){var g=m.value,v=r++,_=g.genesetId,S=g.description,E=g.representativeScore,w=g.representativePvalue,P=g.refLink,O="",T=_+'<span style="font-weight:normal;font-style:italic;"> '+(O=(O=O+"score = "+E.toFixed(2))+", p-value = "+(w=w<.005?w.toExponential(0):w.toFixed(2)))+"</span>";n.push({id:v.toString(),parent:p,text:T,state:{selected:!1},li_attr:{name:_},description:S,representativeScore:E,representativePvalue:w,refLink:P,geneset:!0})}}catch(e){y=!0,h=e}finally{try{f||null==b.return||b.return()}finally{if(y)throw h}}}}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}return n}},{key:"initTree",value:function(e){return Z(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(U.S)(this.props.gsvaProfile,this.props.percentile,this.props.scoreThreshold,this.props.pvalueThreshold,this.props.sampleListId);case 2:return n=t.sent,q()(e).jstree({search:{show_only_matches:!0,show_only_matches_children:!0},checkbox:{cascade_to_disabled:!1,cascade_to_hidden:!1},core:{themes:{icons:!1},check_callback:!0,data:this.transformHierarchyData(n)},plugins:["checkbox","search"]}),t.abrupt("return",e);case 5:case"end":return t.stop()}},t,this)}))}},{key:"destroyTree",value:function(e){q()(e).jstree(!0).destroy()}},{key:"replaceTree",value:function(e){return Z(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.destroyTree(e),t.next=3,this.initTree(e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t,this)}))}},{key:"submitGeneSets",value:function(e){if(e){var t=q()(e).jstree("get_selected",!0),n=!0,r=!1,o=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;s.original.geneset&&this.map_geneSets_selected.set(s.original.description,!0)}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}}return this.map_geneSets_selected}},{key:"searchTree",value:function(e,t){return q()(e).jstree(!0).search(t),e}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(k.a,{isLoading:this.isLoading}),o.a.createElement("div",{ref:function(t){return e.tree=t},style:{maxHeight:"380px",overflowY:"scroll"},"data-test":"gsva-tree-container"}),o.a.createElement("div",{style:{padding:"30px 0px"}},o.a.createElement("button",{className:"btn btn-primary btn-sm pull-right",style:{margin:"2px"},disabled:this.isLoading,onClick:function(){var t=e.submitGeneSets(e.tree);e.props.onSelect(t)}},"Select")))}}])&&W(n.prototype,r),i&&W(n,i),t}();J([F.observable],$.prototype,"isLoading",void 0);var ee=$=J([a.observer],$),te=n(604);function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ae(e){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var se=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ae(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},le=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=re(t).call(this,e))||"object"!==ae(o)&&"function"!=typeof o?oe(r):o).percentile=n.props.percentile,n.pvalueThreshold=String(n.props.pvalueThreshold),n.scoreThreshold=String(n.props.scoreThreshold),n.percentileOptions=[{label:"50%",value:50},{label:"75%",value:75},{label:"100%",value:100}],n.percentileChange=n.percentileChange.bind(oe(n)),n.applyFilter=n.applyFilter.bind(oe(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}(t,r["Component"]),n=t,(o=[{key:"percentileChange",value:function(e){this.percentile=e?e.value:75}},{key:"applyFilter",value:function(){var e=this.pvalueThreshold?Number(this.pvalueThreshold):NaN,t=this.scoreThreshold?Number(this.scoreThreshold):NaN;Number.isNaN(e)||Number.isNaN(t)||this.props.onApply(this.percentile,e,t)}},{key:"render",value:function(){var e=this;return r.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center",width:"100%",background:"#eee",padding:"10px 10px"}},r.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.createElement("label",{htmlFor:"GSVAScore"},"GSVA score"),r.createElement("input",{id:"GSVAScore",type:"string",value:this.scoreThreshold,style:{width:160,height:36,padding:10},onChange:function(t){return e.scoreThreshold=t.target.value},step:"0.1"})),r.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.createElement("label",{htmlFor:"Pvalue"},"P-value"),r.createElement("input",{id:"Pvalue",type:"string",value:this.pvalueThreshold,style:{width:160,height:36,padding:10},onChange:function(t){return e.pvalueThreshold=t.target.value},step:"0.01",min:"0"})),r.createElement("div",null,r.createElement("label",{htmlFor:"PercentileScoreCalculation"},"Percentile for score calculation"),r.createElement(te.a,{addLabelText:"Percentile for score calculation",style:{width:160,borderRadius:"2px"},clearable:!1,name:"PercentileScoreCalculation",value:this.percentile,options:this.percentileOptions,onChange:this.percentileChange})),r.createElement("div",null,r.createElement("button",{id:"filterButton",className:"btn btn-primary btn-sm",style:{padding:"20px 18px"},onClick:this.applyFilter},"Apply Filter")))}}])&&ne(n.prototype,o),i&&ne(n,i),t}();se([F.observable],le.prototype,"percentile",void 0),se([F.observable],le.prototype,"pvalueThreshold",void 0),se([F.observable],le.prototype,"scoreThreshold",void 0);var ue=le=se([a.observer],le);function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pe(e){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function de(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fe(e,t){return(fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ye(e){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var he=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ye(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},me=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=pe(t).call(this,e))||"object"!==ye(o)&&"function"!=typeof o?de(r):o).percentile=75,n.pvalueThreshold=.05,n.scoreThreshold=.5,n.searchValue="",n.updateSelectionParameters=n.updateSelectionParameters.bind(de(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fe(e,t)}(t,r["Component"]),n=t,(o=[{key:"updateSelectionParameters",value:function(e,t,n){this.percentile=e,this.pvalueThreshold=t,this.scoreThreshold=n}},{key:"render",value:function(){var e=this;return r.createElement("div",null,r.createElement("text",null,"Search hierarchy"),r.createElement("div",{className:"form-group has-feedback input-group-sm",style:{display:"inline-block"}},r.createElement("input",{type:"text",id:"geneset-hierarchy-search",className:"form-control tableSearchInput",style:{width:768},value:this.searchValue,onChange:function(t){return e.searchValue=t.target.value}}),r.createElement("span",{className:"fa fa-search form-control-feedback","aria-hidden":"true"})),r.createElement(ue,{percentile:this.percentile,pvalueThreshold:this.pvalueThreshold,scoreThreshold:this.scoreThreshold,onApply:this.updateSelectionParameters}),r.createElement(ee,{initialSelection:this.props.initialSelection,scoreThreshold:this.scoreThreshold,pvalueThreshold:this.pvalueThreshold,percentile:this.percentile,gsvaProfile:this.props.gsvaProfile,sampleListId:this.props.sampleListId,searchValue:this.searchValue,onSelect:this.props.onSelect}))}}])&&ce(n.prototype,o),i&&ce(n,i),t}();he([F.observable],me.prototype,"percentile",void 0),he([F.observable],me.prototype,"pvalueThreshold",void 0),he([F.observable],me.prototype,"scoreThreshold",void 0),he([F.observable],me.prototype,"searchValue",void 0);var be=me=he([a.observer],me),ge=n(594),ve=n(554),_e=n(557),Se=n(565),Ee=n(561);function we(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oe(e,t){return!t||"object"!==Re(t)&&"function"!=typeof t?Te(e):t}function Te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ce(e){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ie(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ke(e,t)}function ke(e,t){return(ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Re(e){return(Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var xe=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Re(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},je=i,Ne=function(e){function t(){return Pe(this,t),Oe(this,Ce(t).apply(this,arguments))}return Ie(t,ve["b"]),t}(),Ae=function(e){function t(e){var n;return Pe(this,t),(n=Oe(this,Ce(t).call(this,e))).percentileOptions=[{label:"50%",value:"50"},{label:"75%",value:"75"},{label:"100%",value:"100"}],n.percentileChange=n.percentileChange.bind(Te(n)),n.updateSelectionFromPlot=n.updateSelectionFromPlot.bind(Te(n)),n}var n,o,i;return Ie(t,y["d"]),n=t,(o=[{key:"percentileChange",value:function(e){this.store.volcanoPlotSelectedPercentile=e||{label:"75%",value:"75"}}},{key:"updateSelectionFromPlot",value:function(e,t){var n=this,r=e&&e[0].data?e[0].data:[];this.store.volcanoPlotTableData.result.map(function(e){var t=e.representativeScore,o=e.representativePvalue,i=e.name,a=t,s=-Math.log(o)/Math.log(10),l=!0,u=!1,c=void 0;try{for(var p,d=r[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var f=p.value;f.x===a&&f.y===s&&n.store.map_genesets_selected_volcano.set(i,!0)}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}})}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:je.GenesetsVolcanoSelectorWindow,style:{height:"400px"}},r.createElement("div",{style:{float:"left"},className:"form-inline"},r.createElement("label",{htmlFor:"PercentileScoreCalculation"},"Percentile for score calculation:"),r.createElement("span",{style:{display:"inline-block",verticalAlign:"middle",marginLeft:"1em"}},r.createElement(te.a,{addLabelText:"Percentile for score calculation",style:{width:160,borderRadius:"2px"},clearable:!1,name:"PercentileScoreCalculation",value:this.store.volcanoPlotSelectedPercentile,options:this.percentileOptions,onChange:this.percentileChange})),r.createElement(k.a,{isLoading:!(this.props.plotData&&this.props.maxY&&this.store.volcanoPlotTableData.isComplete&&this.props.data)}),this.store.volcanoPlotGraphData&&this.store.minYVolcanoPlot&&this.props.plotData&&this.props.maxY&&this.store.volcanoPlotTableData.isComplete&&this.props.data&&r.createElement(Se.VictoryChart,{theme:Ee.d,width:510,height:350,containerComponent:r.createElement(Se.VictorySelectionContainer,{onSelection:this.updateSelectionFromPlot,selectionStyle:{fill:"tomato",fillOpacity:.5,stroke:"tomato",strokeWidth:2}})},r.createElement(Se.VictoryAxis,{crossAxis:!0,domain:[-1,1.25],tickValues:[-1,-.5,0,.5,1],style:{axisLabel:{padding:35}},label:"GSVA score",offsetY:50,standalone:!1}),r.createElement(Se.VictoryAxis,{dependentAxis:!0,crossAxis:!0,domain:[0,this.props.maxY],style:{axisLabel:{padding:35},stroke:"none"},label:"-log10 p-value",offsetX:50,standalone:!1}),r.createElement(Se.VictoryLabel,{text:"significance",datum:{x:1,y:1.3},textAnchor:"start"}),r.createElement(Se.VictoryLine,{style:{data:{stroke:"black",strokeDasharray:5},parent:{border:"dotted 1px #f00"}},data:[{x:-1.2,y:1.3},{x:1,y:1.3}]}),r.createElement(Se.VictoryLine,{style:{data:{stroke:"rgb(144, 164, 174)"},parent:{border:"1px dashed solid"}},data:[{x:0,y:0},{x:0,y:this.props.maxY}]}),r.createElement(Se.VictoryScatter,{style:{data:{fill:function(e){return e?e.fill:""},fillOpacity:.3}},size:3,data:this.props.plotData}))),r.createElement("div",{style:{float:"right",height:"356.5px",overflowY:"scroll",width:"650px"}},r.createElement(k.a,{isLoading:!(this.store.volcanoPlotTableData.isComplete&&this.props.data)}),this.store.volcanoPlotTableData.isComplete&&this.props.data&&r.createElement(Ne,{data:this.props.data,columns:[{name:"Gene Sets",render:function(e){return r.createElement("span",null,e.name)},sortBy:function(e){return e.name},filter:function(e,t,n){return e.name.toUpperCase().indexOf(n)>-1}},{name:"GSVA Score",render:function(e){return r.createElement("span",null,e.representativeScore.toFixed(2))},sortBy:function(e){return e.representativeScore}},{name:"P Value",render:function(e){return r.createElement("span",null,Object(_e.f)(e.representativePvalue,2,.1))},sortBy:function(e){return e.representativePvalue}},{name:"Selected",render:function(t){return r.createElement(ge.a,{checked:!!e.store.map_genesets_selected_volcano.get(t.name),onChange:function(n){return e.store.map_genesets_selected_volcano.set(t.name,n.target.checked)}})}}],initialSortColumn:"P Value",initialSortDirection:"asc",showPagination:!0,initialItemsPerPage:100,showColumnVisibility:!1,showFilter:!0,showCopyDownload:!1})),r.createElement("div",{style:{float:"right"}},this.store.volcanoPlotTableData.isComplete&&this.props.data&&r.createElement("button",{style:{marginTop:15,float:"right"},className:"btn btn-primary btn-sm pull-right",onClick:function(){return e.props.onSelect(e.store.map_genesets_selected_volcano)}},"Add selection to the query"),this.store.volcanoPlotTableData.isComplete&&this.props.data&&r.createElement("button",{style:{marginRight:15,marginTop:15,float:"right"},className:"btn btn-primary btn-sm pull-right",onClick:function(){return e.store.map_genesets_selected_volcano.replace(e.props.initialSelection.map(function(e){return[e,!0]}))}},"Clear selection")))}}])&&we(n.prototype,o),i&&we(n,i),t}();xe([F.action],Ae.prototype,"updateSelectionFromPlot",null);var De=Ae=xe([a.observer],Ae);function Me(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ge(e,t){return!t||"object"!==Fe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ve(e){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Be(e,t){return(Be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fe(e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var He=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Fe(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Qe=i,qe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ge(this,Ve(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Be(e,t)}(t,y["d"]),n=t,(o=[{key:"render",value:function(){var e=this;return r.createElement(l.b,{padded:!0,overflow:!0,className:Qe.GeneSetSelector},r.createElement(m.a,{className:"sectionLabel"},"Enter Gene Sets:"),r.createElement(l.a,{overflow:!0},r.createElement(l.b,{padded:!0,className:Qe.buttonRow},r.createElement("button",{className:"btn btn-default btn-sm","data-test":"GENESET_HIERARCHY_BUTTON",onClick:function(){return e.store.showGenesetsHierarchyPopup=!0}},"Select Gene Sets from Hierarchy"),r.createElement("button",{className:"btn btn-default btn-sm","data-test":"GENESET_VOLCANO_BUTTON",onClick:function(){return e.store.showGenesetsVolcanoPopup=!0}},"Select Gene Sets from Volcano Plot")),r.createElement("textarea",{ref:this.textAreaRef,className:f()(Qe.geneSet,this.store.genesetQuery?Qe.notEmpty:Qe.empty),rows:5,cols:80,placeholder:"Enter Gene Sets",title:"Enter Gene Sets",value:this.store.genesetQuery,onChange:function(t){return e.store.genesetQuery=t.currentTarget.value},"data-test":"GENESETS_TEXT_AREA"}),r.createElement(B.Modal,{className:f()("cbioportal-frontend",Qe.GenesetsSelectorWindow),show:this.store.showGenesetsHierarchyPopup,onHide:function(){return e.store.showGenesetsHierarchyPopup=!1}},r.createElement(B.Modal.Header,{closeButton:!0},r.createElement(B.Modal.Title,null,"Select Gene Sets From Hierarchy")),r.createElement(B.Modal.Body,null,r.createElement(be,{initialSelection:this.store.genesetIds,gsvaProfile:this.store.getFilteredProfiles("GENESET_SCORE")[0].molecularProfileId,sampleListId:this.store.defaultSelectedSampleListId,onSelect:function(t){e.store.applyGenesetSelection(t),e.store.showGenesetsHierarchyPopup=!1}}))),r.createElement(B.Modal,{className:f()("cbioportal-frontend",Qe.GenesetsVolcanoSelectorWindow),show:this.store.showGenesetsVolcanoPopup,onHide:function(){return e.store.showGenesetsVolcanoPopup=!1},onShow:function(){return e.store.map_genesets_selected_volcano.replace(e.store.genesetIds.map(function(e){return[e,!0]}))}},r.createElement(B.Modal.Header,{closeButton:!0},r.createElement(B.Modal.Title,null,"Select Gene Sets From Volcano Plot")),r.createElement(B.Modal.Body,null,r.createElement(De,{initialSelection:this.store.genesetIds,data:this.store.volcanoPlotTableData.result,plotData:this.store.volcanoPlotGraphData,maxY:this.store.minYVolcanoPlot?-Math.log(this.store.minYVolcanoPlot)/Math.log(10):void 0,onSelect:function(t){e.store.addToGenesetSelection(t),e.store.showGenesetsVolcanoPopup=!1}})))))}},{key:"selectedGeneListOption",get:function(){var e=this,t=this.geneListOptions.find(function(t){return t.value===e.store.geneQuery});return t?t.value:""}},{key:"geneListOptions",get:function(){var e=H;if(b.b.serverConfig.query_sets_of_genes){var t=b.a.parseQuerySetsOfGenes(b.b.serverConfig.query_sets_of_genes);t&&(e=t)}return[{label:"User-defined List",value:""}].concat(Me(e.map(function(e){return{label:"".concat(e.id," (").concat(e.genes.length," genes)"),value:e.genes.join(" ")}})))}},{key:"textAreaRef",get:function(){var e=this;if(this.store.geneQueryErrorDisplayStatus===y.b.ShouldFocus)return function(t){var n=e.store.oql.error;t&&n&&(t.focus(),t.setSelectionRange(n.start,n.end),e.store.geneQueryErrorDisplayStatus=y.b.Focused)}}}])&&Le(n.prototype,o),i&&Le(n,i),t}();He([F.computed],qe.prototype,"selectedGeneListOption",null),He([F.computed],qe.prototype,"geneListOptions",null),He([F.computed],qe.prototype,"textAreaRef",null);var Ue=qe=He([a.observer],qe),We=n(16),Ke=n(949),Ye=n(750),ze=n(116),Xe=n.n(ze),Je=n(581),Ze=n(20),$e=n(665);function et(e){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tt(){return(tt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rt(e){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ot(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function it(e,t){return(it=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n(957);var at=n(591);function st(e,t){var n=[];return t||(Object.keys(e[0]).forEach(function(e){return n.push(e,",")}),n.pop(),n.push("\r\n")),e.forEach(function(e){u.each(e,function(e){n.push(e,",")}),n.pop(),n.push("\r\n")}),n.join("")}var lt=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=rt(t).call(this,e),(n=!o||"object"!==et(o)&&"function"!=typeof o?ot(r):o).downloadData=function(){n.props.downloadDataGenerator?Xe()(st(n.props.downloadDataGenerator()||[],n.props.downloadDataContainsHeader),n.props.downloadFilename):Xe()(st(n.props.tableData||[],n.props.downloadDataContainsHeader),n.props.downloadFilename)},n.handleInput=n.handleInput.bind(ot(n)),n.getText=n.getText.bind(ot(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&it(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){this.props.showCopyAndDownload&&this._copyButton&&this.bindCopyButton()}},{key:"bindCopyButton",value:function(){new at(this._copyButton,{text:function(){return this.getText()}.bind(this)})}},{key:"handleInput",value:function(e){var t=this;null!==this.searchTimeout&&(clearTimeout(this.searchTimeout),this.searchTimeout=null);var n=e.currentTarget.value;this.searchTimeout=setTimeout(function(){t.props.handleInput&&t.props.handleInput(n)},this.props.searchDelayMs)}},{key:"render",value:function(){var e=this,t=r.createElement("div",{className:"rc-tooltip-arrow-inner"});return r.createElement("div",{className:(this.props.className||"")+""},r.createElement(B.ButtonToolbar,null,r.createElement(Ze.If,{condition:this.props.showPagination},r.createElement(Je.a,tt({className:"pull-left"},this.props.paginationProps))),r.createElement(Ze.If,{condition:this.props.showHideShowColumnButton},r.createElement($e.a,this.props.columnVisibilityProps)),r.createElement(Ze.If,{condition:this.props.showCopyAndDownload},r.createElement(B.ButtonGroup,{className:this.props.copyDownloadClassName,style:{marginLeft:10}},r.createElement(h.c,{overlay:r.createElement("span",null,"Copy"),placement:"top",mouseLeaveDelay:0,mouseEnterDelay:.5,arrowContent:t},r.createElement("button",{ref:function(t){e._copyButton=t},className:"btn btn-sm btn-default","option-text":this.getText},r.createElement("i",{className:"fa fa-clipboard"}))),r.createElement(h.c,{overlay:r.createElement("span",null,"Download CSV"),mouseLeaveDelay:0,mouseEnterDelay:.5,placement:"top",arrowContent:t},r.createElement(B.Button,{className:"btn-sm",onClick:this.downloadData},r.createElement("i",{className:"fa fa-cloud-download"}))))),r.createElement(Ze.If,{condition:this.props.showSearch},r.createElement("div",{className:"".concat(this.props.searchClassName," form-group has-feedback input-group-sm"),style:{display:"inline-block",marginLeft:10}},r.createElement("input",{type:"text",onInput:this.handleInput,className:"form-control tableSearchInput",style:{width:200}}),r.createElement("span",{className:"fa fa-search form-control-feedback","aria-hidden":"true"})))))}},{key:"getText",value:function(){return this.props.downloadDataGenerator?st(this.props.downloadDataGenerator()||[],this.props.downloadDataContainsHeader):st(this.props.tableData||[],this.props.downloadDataContainsHeader)}}])&&nt(n.prototype,o),i&&nt(n,i),t}();lt.defaultProps={showSearch:!1,showCopyAndDownload:!0,showPagination:!1,searchClassName:"",copyDownloadClassName:"",downloadFilename:"patient-clinical-attributes.tsv",downloadDataContainsHeader:!1,paginationProps:{},columnVisibilityProps:{},searchDelayMs:400};n(958);function ut(e){return(ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ct(){return(ct=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dt(e){return(dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ft(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yt(e,t){return(yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ht=function(e){function t(e){var n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=dt(t).call(this,e),(n=!o||"object"!==ut(o)&&"function"!=typeof o?ft(r):o).rawDataSelector=function(e,t){return t.rawData},n.columnsSelector=function(e,t){return t.columns},n.columnVisibilitySelector=function(e){return e.columnVisibility},n.visibleColsSelector=Object(Ke.createSelector)(n.columnsSelector,n.columnVisibilitySelector,function(e,t){return n.resolveVisible(e,t)}),n.sortedVisibleColsSelector=Object(Ke.createSelector)(n.visibleColsSelector,function(e){return n.resolveOrder(e)}),n.sortedColsSelector=Object(Ke.createSelector)(n.columnsSelector,function(e){return n.resolveOrder(e)}),n.columnVisibilityArraySelector=Object(Ke.createSelector)(n.sortedColsSelector,n.columnVisibilitySelector,function(e,t){return n.resolveColumnVisibility(n.colNameToId,e,t)}),n.downloadDataSelector=Object(Ke.createSelector)(n.sortedColsSelector,n.columnVisibilitySelector,n.rawDataSelector,function(e,t,r){return n.generateDownloadData(e,t,r)}),n.headersSelector=Object(Ke.createSelector)(n.sortedVisibleColsSelector,function(e){return n.generateHeaders(e)}),n.rowsSelector=Object(Ke.createSelector)(n.sortedColsSelector,n.rawDataSelector,function(e,t){return n.generateRows(e,t)}),n.colNameToId=n.mapColNameToId(e.columns),n.state={columnVisibility:t.resolveVisibility(e.columns,e.rawData),sortableColumns:n.resolveSortable(n.props.columns||{}),filterableColumns:n.resolveFilterable(n.props.columns||{}),filter:"",itemsPerPage:n.props.initItemsPerPage||25,currentPage:n.props.initPage||0},n.filteredDataLength=e.rawData.length,n.shouldSetState=!1;var i=Ye.Table.prototype.applyFilter;Ye.Table.prototype.applyFilter=function(){var e,t=i.apply(this,arguments);return(e=t.length)!==n.filteredDataLength&&(n.filteredDataLength=e,n.shouldSetState=!0),t};var a=Ye.Table.prototype.render;return Ye.Table.prototype.render=function(){var e,t=a.apply(this,arguments);return e=t.props.children.find(function(e){return"tbody"===e.type}).props.children||[],n.props.onVisibleRowsChange&&n.props.onVisibleRowsChange(e.map(function(e){return e.props.rowData})),t},n.handleDownload=n.handleDownload.bind(ft(n)),n.handleFilterInput=n.handleFilterInput.bind(ft(n)),n.handleVisibilityToggle=n.handleVisibilityToggle.bind(ft(n)),n.handleChangeItemsPerPage=n.handleChangeItemsPerPage.bind(ft(n)),n.handlePreviousPageClick=n.handlePreviousPageClick.bind(ft(n)),n.handleNextPageClick=n.handleNextPageClick.bind(ft(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yt(e,t)}(t,r["Component"]),n=t,i=[{key:"resolveVisibility",value:function(e,t){var n={};return e?(u.each(u.keys(e),function(r){var o=e[r],i="visible";o.visible&&(i=u.isFunction(o.visible)?o.visible(t,o.columnProps):o.visible),"excluded"!==i&&(n[r]=i)}),n):n}},{key:"columnSort",value:function(e,t){return e.priority&&t.priority?e.priority-t.priority:e.priority?-1:t.priority?1:e.name>t.name?1:-1}}],(o=[{key:"render",value:function(){var e=this.props,t=e.className,n=e.reactTableProps,o=e.headerControlsProps,i=(this.columnVisibilityArraySelector(this.state,this.props),this.headersSelector(this.state,this.props)),a=this.rowsSelector(this.state,this.props),s=this.rowIndexesOnPage(),l=s.firstIndex,u=s.numIndexes;return r.createElement("div",{className:t},r.createElement(lt,ct({showCopyAndDownload:!0,showHideShowColumnButton:!0,handleInput:this.handleFilterInput,downloadDataGenerator:this.handleDownload,downloadDataContainsHeader:!0,downloadFilename:"mutations.csv",showSearch:!0,columnVisibilityProps:{className:"pull-right",onColumnToggled:this.handleVisibilityToggle},paginationProps:{className:"pull-right",itemsPerPage:this.state.itemsPerPage,currentPage:this.state.currentPage,onChangeItemsPerPage:this.handleChangeItemsPerPage,onPreviousPageClick:this.handlePreviousPageClick,onNextPageClick:this.handleNextPageClick,textBetweenButtons:"".concat(this.filteredDataLength?l+1:0,"-").concat(l+u," of ").concat(this.filteredDataLength),previousPageDisabled:0===this.state.currentPage,nextPageDisabled:this.state.currentPage>=this.numPages()-1}},o)),r.createElement(Ye.Table,ct({sortable:this.state.sortableColumns,filterable:this.state.filterableColumns,filterBy:this.state.filter,itemsPerPage:-1===this.state.itemsPerPage?void 0:this.state.itemsPerPage,currentPage:this.state.currentPage},n),i,a))}},{key:"componentWillUpdate",value:function(e,t){0===t.filter.length&&(this.filteredDataLength=this.props.rawData.length)}},{key:"componentDidUpdate",value:function(){this.shouldSetState&&(this.shouldSetState=!1,this.setState({currentPage:Math.max(0,Math.min(this.state.currentPage,this.numPages()-1))}))}},{key:"rowIndexesOnPage",value:function(){var e,t;return-1===this.state.itemsPerPage?(e=0,t=this.filteredDataLength):(e=this.state.itemsPerPage*this.state.currentPage,t=Math.min(this.filteredDataLength-e,this.state.itemsPerPage)),{firstIndex:e,numIndexes:t}}},{key:"numPages",value:function(e){return-1===(e=e||this.state.itemsPerPage)?1:Math.ceil(this.filteredDataLength/e)}},{key:"mapColNameToId",value:function(e){var t={};return e&&u.each(e,function(e,n){e.name&&(t[e.name],t[e.name]=n)}),t}},{key:"resolveOrder",value:function(e){return e?u.values(e).sort(t.columnSort):[]}},{key:"resolveColumnVisibility",value:function(e,t,n){var r=[];return u.each(t,function(t){var o=e[t.name];n[o]&&r.push({id:o,name:t.name,visibility:n[o]})}),r}},{key:"generateHeaders",value:function(e){var t=[];return u.each(e,function(e){var n=e.header||r.createElement("span",null,e.name);if(e.description){var o=r.createElement("div",{className:"rc-tooltip-arrow-inner"});n=r.createElement(h.c,{overlay:r.createElement("span",null,e.description),placement:"top",arrowContent:o},n)}t.push(r.createElement(Ye.Th,{key:e.name,column:e.name},n))}),t}},{key:"generateDownloadData",value:function(e,t,n){var r=this,o=[];return o[0]=[],u.each(e,function(e){var n=r.colNameToId[e.name];n in t&&"excluded"!==t[n]&&o[0].push(e.name)}),u.each(n,function(i,a){var s=[];u.each(e,function(e){var o=r.colNameToId[e.name];if(o in t&&"excluded"!==t[o]){var a=r.getColumnData(e,n,i);e.downloader?s.push(e.downloader(a,e.columnProps)):s.push((a.columnData||"").toString())}}),o.push(s)}),o}},{key:"getColumnData",value:function(e,t,n){var r={name:e.name,tableData:t,rowData:n,columnData:null};if(e.columnDataFunction)r.columnData=e.columnDataFunction(r);else if(e.dataField){var o=null;(o=u.isArray(r.rowData)&&r.rowData.length>0?r.rowData[0]:r.rowData)&&(r.columnData=o[e.dataField])}return r}},{key:"generateRows",value:function(e,t){var n=this,o=[];return u.each(t,function(i,a){var s=n.generateColumns(e,t,i);o.push(r.createElement(Ye.Tr,{key:a,rowData:i},s))}),o}},{key:"generateColumns",value:function(e,t,n){var r=this,o=[];return u.each(e,function(e){var i=r.getColumnData(e,t,n);o.push(r.generateColumn(i,e))}),o}},{key:"generateColumn",value:function(e,t){return t.formatter?t.formatter(e,t.columnProps):r.createElement(Ye.Td,{key:t.name,column:t.name,value:e.columnData},e.columnData)}},{key:"resolveVisible",value:function(e,t){var n={};return u.each(u.keys(t),function(r){"visible"===t[r]&&(n[r]=e[r])}),n}},{key:"resolveSortable",value:function(e){var t=[];return u.each(e,function(e){u.isFunction(e.sortable)?t.push({column:e.name,sortFunction:e.sortable}):e.sortable&&t.push(e.name)}),t}},{key:"resolveFilterable",value:function(e){var t=[];return u.each(e,function(e){u.isFunction(e.filterable)?t.push({column:e.name,filterFunction:e.filterable}):e.filterable&&t.push(e.name)}),t}},{key:"handleFilterInput",value:function(e){this.setState({filter:e})}},{key:"handleDownload",value:function(){return this.downloadDataSelector(this.state,this.props)}},{key:"handleVisibilityToggle",value:function(e){var t=e,n=this.state.columnVisibility[t],r=Object.assign({},this.state.columnVisibility);"hidden"===n?n="visible":"visible"===n&&(n="hidden"),r[t]=n,this.setState({columnVisibility:r})}},{key:"handleChangeItemsPerPage",value:function(e){this.setState({itemsPerPage:e,currentPage:Math.min(this.state.currentPage,this.numPages(e)-1)})}},{key:"handlePreviousPageClick",value:function(){this.setState({currentPage:Math.max(0,this.state.currentPage-1)})}},{key:"handleNextPageClick",value:function(){this.setState({currentPage:Math.min(this.state.currentPage+1,this.numPages()-1)})}}])&&pt(n.prototype,o),i&&pt(n,i),t}();function mt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gt(e,t){return!t||"object"!==Et(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vt(e){return(vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _t(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&St(e,t)}function St(e,t){return(St=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Et(e){return(Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var wt=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Et(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Pt=i,Ot=function(e){function t(){return bt(this,t),gt(this,vt(t).apply(this,arguments))}return _t(t,ht),t}(),Tt=function(e){function t(e){var n;return bt(this,t),(n=gt(this,vt(t).call(this,e))).map_geneSymbol_selected=F.observable.map(),n.columns={hugoGeneSymbol:{priority:1,dataField:"hugoGeneSymbol",name:"Gene Symbol",sortable:!0,filterable:!0},numberOfMutations:{priority:2,dataField:"numberOfMutations",name:"Num Mutations",sortable:!0,filterable:!0},qValue:{priority:3,dataField:"qValue",name:"Q-Value",sortable:!0,filterable:!0,formatter:function(e){var t=e.name,n=e.columnData;return r.createElement(Ye.Td,{key:t,column:t,value:n},Object(_e.f)(n,2,.1))}},selected:{name:"Selected",priority:4,sortable:!1,filterable:!1,header:r.createElement("div",{className:Pt.selectionColumnHeader},r.createElement("span",null,"All"),r.createElement(a.Observer,null,function(){return r.createElement(ge.a,{checked:n.selectedGenes.length>0,indeterminate:n.selectedGenes.length>0&&n.selectedGenes.length<n.allGenes.length,onChange:function(e){return n.selectAll(e.target.checked)}})})),formatter:function(e){var t=e.name,o=e.rowData;return r.createElement(Ye.Td,{key:t,column:t},!!o&&r.createElement("div",{className:Pt.selectionColumnCell},r.createElement(a.Observer,null,function(){return r.createElement(ge.a,{checked:!!n.map_geneSymbol_selected.get(o.hugoGeneSymbol),onChange:function(e){return n.map_geneSymbol_selected.set(o.hugoGeneSymbol,e.target.checked)}})})))}}},n.map_geneSymbol_selected.replace(e.initialSelection.map(function(e){return[e,!0]})),n}var n,o,i;return _t(t,r["Component"]),n=t,(o=[{key:"selectAll",value:function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=this.allGenes[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;this.map_geneSymbol_selected.set(a,e)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:Pt.MutSigGeneSelector},r.createElement(Ot,{itemsName:"genes",initItemsPerPage:10,columns:this.columns,rawData:this.props.data,headerControlsProps:{showCopyAndDownload:!1,showHideShowColumnButton:!1,showPagination:!0},reactTableProps:{className:"table table-striped table-border-top",hideFilterInput:!0,defaultSort:this.columns.qValue.name}}),r.createElement("div",null,r.createElement("button",{style:{marginTop:20},className:"btn btn-primary btn-sm pull-right",onClick:function(){return e.props.onSelect(e.map_geneSymbol_selected)}},"Select")))}},{key:"allGenes",get:function(){return u.uniq(this.props.data.map(function(e){return e.hugoGeneSymbol}))}},{key:"selectedGenes",get:function(){var e=this;return this.allGenes.filter(function(t){return e.map_geneSymbol_selected.get(t)})}}])&&mt(n.prototype,o),i&&mt(n,i),t}();wt([F.computed],Tt.prototype,"allGenes",null),wt([F.computed],Tt.prototype,"selectedGenes",null),wt([F.action],Tt.prototype,"selectAll",null);var Ct=Tt=wt([a.observer],Tt);function It(e){return e?e.genes.map(function(e){return e.hugoGeneSymbol}):[]}var kt=new RegExp("^([0-9]{1,2})([pq])([0-9]{1,2})(?:.?)([0-9]{0,2})$");function Rt(e,t){var n=e.match(kt),r=t.match(kt);return n&&r?parseInt(n[1],10)-parseInt(r[1],10)!=0?parseInt(n[1],10)-parseInt(r[1],10):"p"===n[2]&&"q"===r[2]?-1:"q"===n[2]&&"p"===r[2]?1:n[2]===r[2]?parseInt(n[3],10)-parseInt(r[3],10):0:+!!n-+!!r}function xt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jt(e,t,n){return t&&xt(e.prototype,t),n&&xt(e,n),e}function Nt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function At(e,t){return!t||"object"!==Gt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dt(e){return(Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lt(e,t)}function Lt(e,t){return(Lt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gt(e){return(Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Vt=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Gt(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Bt=i,Ft=function(e){function t(){return Nt(this,t),At(this,Dt(t).apply(this,arguments))}return Mt(t,ht),t}(),Ht=function(e){function t(e){var n;return Nt(this,t),(n=At(this,Dt(t).call(this,e))).map_geneSymbol_selected=F.observable.map(),n.columns={amp:{priority:1,columnDataFunction:function(e){var t=e.rowData;return t&&(t.amp?"Amp":"Del")},name:"Amp Del",sortable:!0,filterable:!0,header:r.createElement("div",{className:f()(Bt.header,Bt.amp,Bt.del)},r.createElement("span",{className:Bt.amp},"Amp"),r.createElement("span",{className:Bt.del},"Del")),formatter:function(e){var t=e.name,n=e.rowData,o=e.columnData;return r.createElement(Ye.Td,{key:t,column:t,value:o},!!n&&r.createElement("div",{className:n.amp?Bt.amp:Bt.del}))}},chromosome:{priority:2,dataField:"chromosome",name:"Chr",sortable:!0,filterable:!0},cytoband:{priority:3,dataField:"cytoband",name:"Cytoband",sortable:Rt,filterable:!0},"#":{priority:4,columnDataFunction:function(e){return It(e.rowData).length},name:"#",sortable:!0,filterable:!0},genes:{priority:5,columnDataFunction:function(e){return It(e.rowData).join(" ")},name:"Genes",sortable:function(e,t){return e.length-t.length||+(e>t)-+(e<t)},filterable:!0,formatter:function(e){var t=e.name,o=e.rowData,i=e.columnData;return r.createElement(Ye.Td,{key:t,column:t,value:i},r.createElement(qt,{gistic:o,map_geneSymbol_selected:n.map_geneSymbol_selected}))}},qValue:{priority:6,dataField:"qValue",name:"Q-Value",sortable:!0,filterable:!0,formatter:function(e){var t=e.name,n=(e.rowData,e.columnData);return r.createElement(Ye.Td,{key:t,column:t,value:n},Object(_e.f)(n,2,.1))}}},n.map_geneSymbol_selected.replace(e.initialSelection.map(function(e){return[e,!0]})),n}return Mt(t,r["Component"]),jt(t,[{key:"render",value:function(){var e=this;return r.createElement("div",{className:Bt.GisticGeneSelector},r.createElement("span",null,"Click on a gene to ",r.createElement("span",{className:f()(Bt.geneToggle,Bt.selected,Bt.simulateHovered)},"select")," it."),r.createElement(Ft,{className:Bt.gisticTable,itemsName:"genes",initItemsPerPage:10,columns:this.columns,rawData:this.props.data,headerControlsProps:{showCopyAndDownload:!1,showHideShowColumnButton:!1,showPagination:!0},reactTableProps:{className:"table table-striped table-border-top",hideFilterInput:!0,defaultSort:this.columns.qValue.name}}),r.createElement("div",null,r.createElement("button",{style:{marginTop:20},className:"btn btn-primary btn-sm pull-right",onClick:function(){return e.props.onSelect(e.map_geneSymbol_selected)}},"Select")))}}]),t}(),Qt=Ht=Vt([a.observer],Ht),qt=function(e){function t(){var e;return Nt(this,t),(e=At(this,Dt(t).apply(this,arguments))).showAll=!1,e}return Mt(t,r["Component"]),jt(t,[{key:"renderGeneToggles",value:function(e){var t=this;return e.map(function(e){return r.createElement(a.Observer,null,function(){var n=!!t.props.map_geneSymbol_selected.get(e);return r.createElement("span",{key:e,className:f()(Bt.geneToggle,n?Bt.selected:Bt.notSelected),onClick:function(r){return t.props.map_geneSymbol_selected.set(e,!n)}},e)})})}},{key:"render",value:function(){var e=this,t=It(this.props.gistic),n=t.slice(0,5),o=t.slice(5);return r.createElement("div",{className:Bt.GisticGeneToggles},r.createElement("div",{className:Bt.someGenes},this.renderGeneToggles(n),!!o.length&&r.createElement("a",{className:Bt.showMoreLess,onClick:function(){return e.showAll=!e.showAll}},this.showAll?"less":"+".concat(o.length," more"))),r.createElement("div",{className:Bt.moreGenes},this.showAll&&this.renderGeneToggles(o)))}}]),t}();Vt([F.observable],qt.prototype,"showAll",void 0),qt=Vt([a.observer],qt);var Ut=n(658),Wt=n(569);function Kt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yt(e,t){return!t||"object"!==Jt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zt(e){return(zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xt(e,t){return(Xt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Jt(e){return(Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Zt=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Jt(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},$t=i,en=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Yt(this,zt(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xt(e,t)}(t,y["d"]),n=t,(o=[{key:"render",value:function(){return this.store.genesetIdsQuery.error?r.createElement("div",{className:$t.GeneSymbolValidator},r.createElement("span",{className:$t.errorMessage},"Cannot validate gene sets because of invalid OQL. ".concat(this.store.genesetQueryErrorDisplayStatus===y.b.Focused?"Please click 'Submit' to see location of error.":this.store.genesetIdsQuery.error.message))):this.store.genesetIdsQuery.query.length?this.store.genesets.isError?r.createElement("div",{className:$t.GeneSymbolValidator},r.createElement("span",{className:$t.pendingMessage},"Unable to validate gene sets.")):this.store.genesets.isPending&&0===this.store.genesets.result.invalid.length?r.createElement("div",{className:$t.GeneSymbolValidator},r.createElement("span",{className:$t.pendingMessage},"Validating gene sets...")):this.store.genesets.result.invalid.length?r.createElement("div",{className:$t.GeneSymbolValidator},r.createElement("div",{className:$t.invalidBubble,title:"Please edit the gene sets."},r.createElement(p.a,{className:$t.icon,name:"exclamation-circle"}),r.createElement("span",null,"Invalid gene sets.")),this.store.genesets.result.invalid.map(this.renderSuggestion,this)):r.createElement("div",{className:$t.GeneSymbolValidator},r.createElement("div",{className:$t.validBubble,title:"You can now submit the list."},r.createElement(p.a,{className:$t.icon,name:"check-circle"}),r.createElement("span",null,"All gene sets are valid."))):null}},{key:"renderSuggestion",value:function(e,t){var n=this;return r.createElement("div",{key:t,className:$t.suggestionBubble,title:"Could not find gene set. Click to remove it from the gene list.",onClick:function(){return n.store.replaceGeneset(e,"")}},r.createElement(p.a,{className:$t.icon,name:"times-circle"}),r.createElement("span",{className:$t.noChoiceLabel},e))}}])&&Kt(n.prototype,o),i&&Kt(n,i),t}(),tn=en=Zt([a.observer],en),nn=n(851);function rn(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function on(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function an(e,t){return!t||"object"!==un(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function sn(e){return(sn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ln(e,t){return(ln=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function un(e){return(un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var cn=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":un(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},pn=i,dn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),an(this,sn(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ln(e,t)}(t,y["d"]),n=t,(o=[{key:"handleOQLUpdate",value:function(e,t,n){n!==this.store.geneQuery&&(this.store.geneQuery=n,this.store.oql.error=e.error)}},{key:"render",value:function(){var e=this;return r.createElement(l.b,{overflow:!0,padded:!0,className:pn.GeneSetSelector},r.createElement(m.a,{className:"sectionLabel",secondaryComponent:r.createElement("a",{target:"_blank",className:pn.learnOql,href:Object(We.t)()},r.createElement("strong",null,"Hint:")," Learn Onco Query Language (OQL)",r.createElement("br",null),"to write more powerful queries"," ",r.createElement("i",{className:"fa fa-external-link"}))},"Enter Genes:"),r.createElement(l.a,{overflow:!0},r.createElement(te.a,{value:this.selectedGeneListOption,options:this.geneListOptions,onChange:function(t){return e.store.geneQuery=t?t.value:""}}),r.createElement(Ut.b,{focus:this.store.geneQueryErrorDisplayStatus,inputGeneQuery:this.store.geneQuery,validateInputGeneQuery:!0,location:Ut.a.DEFAULT,textBoxPrompt:"Enter HUGO Gene Symbols, Gene Aliases, or OQL",callback:this.handleOQLUpdate},this.customError),r.createElement(tn,null),r.createElement(B.Modal,{className:f()("cbioportal-frontend",pn.MutSigGeneSelectorWindow),show:this.store.showMutSigPopup,onHide:function(){return e.store.showMutSigPopup=!1}},r.createElement(B.Modal.Header,{closeButton:!0},r.createElement(B.Modal.Title,null,"Recently Mutated Genes")),r.createElement(B.Modal.Body,null,r.createElement(Ct,{initialSelection:this.store.geneIds,data:this.store.mutSigForSingleStudy.result,onSelect:function(t){e.store.applyGeneSelection(t),e.store.showMutSigPopup=!1}}))),r.createElement(B.Modal,{className:f()("cbioportal-frontend",pn.GisticGeneSelectorWindow),show:this.store.showGisticPopup,onHide:function(){return e.store.showGisticPopup=!1}},r.createElement(B.Modal.Header,{closeButton:!0},r.createElement(B.Modal.Title,null,"Recurrent Copy Number Alterations (Gistic)")),r.createElement(B.Modal.Body,null,r.createElement(Qt,{initialSelection:this.store.geneIds,data:this.store.gisticForSingleStudy.result,onSelect:function(t){e.store.applyGeneSelection(t),e.store.showGisticPopup=!1}})))))}},{key:"selectedGeneListOption",get:function(){var e=this,t=this.geneListOptions.find(function(t){return t.value==e.store.geneQuery});return t?t.value:""}},{key:"geneListOptions",get:function(){var e=H;if(b.b.serverConfig.query_sets_of_genes){var t=b.a.parseQuerySetsOfGenes(b.b.serverConfig.query_sets_of_genes);t&&(e=t)}return[{label:"User-defined List",value:""}].concat(rn(e.map(function(e){return{label:"".concat(e.id," (").concat(e.genes.length," genes)"),value:e.genes.join(" ")}})))}},{key:"customError",get:function(){return this.store.isQueryLimitReached?r.createElement("div",{className:pn.geneCount},r.createElement("div",{className:"",title:"Please limit your queries to ".concat(this.store.geneLimit," genes or fewer.")},r.createElement(p.a,{className:pn.icon,name:"exclamation-circle"}),r.createElement(nn.a,{sampleCount:this.store.approxSampleCount,queryProductLimit:b.b.serverConfig.query_product_limit,email:b.b.serverConfig.skin_email_contact}))):null}}])&&on(n.prototype,o),i&&on(n,i),t}();cn([F.computed],dn.prototype,"selectedGeneListOption",null),cn([F.computed],dn.prototype,"geneListOptions",null),cn([Wt.bind,F.action],dn.prototype,"handleOQLUpdate",null),cn([F.computed],dn.prototype,"customError",null);var fn,yn=dn=cn([a.observer],dn),hn=n(674);!function(e){e.custom="-1",e.mutation_cna="w_mut_cna",e.mutation="w_mut",e.cna="w_cna",e.all="all"}(fn||(fn={}));var mn=[{name:"All",description:"All cases in the selected cohorts",value:fn.all,isdefault:!1},{name:"Cases with mutations data",description:"All cases with mutations data",value:fn.mutation,isdefault:!1},{name:"Cases with copy number alterations data",description:"All cases with copy number alterations data",value:fn.cna,isdefault:!1},{name:"Cases with both mutations and copy number alterations data",description:"All cases with both mutations and copy number alterations data",value:fn.mutation_cna,isdefault:!1},{name:"User-defined Case List",description:"Specify your own case list",value:fn.custom,isdefault:!0}];function bn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gn(e,t){return!t||"object"!==Sn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vn(e){return(vn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _n(e,t){return(_n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Sn(e){return(Sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var En=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Sn(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},wn=i;function Pn(e,t){return u.includes(e.textLabel.toLowerCase(),t.toLowerCase())}var On=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=gn(this,vn(t).apply(this,arguments))).isQueryModified=!1,e.CaseIdsModeRadio=Object(a.observer)(function(t){return r.createElement("label",null,r.createElement("input",{type:"radio",checked:e.store.caseIdsMode==t.state,onChange:function(n){n.currentTarget.checked&&(e.store.caseIdsMode=t.state)}}),t.label)}),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_n(e,t)}(t,y["d"]),n=t,(o=[{key:"render",value:function(){var e=this;return!this.isQueryModified&&this.props.modifyQueryParams&&this.modifyQuery(),this.store.selectableSelectedStudyIds.length?r.createElement(l.b,{padded:!0,overflow:!0,className:wn.CaseSetSelector,"data-test":"CaseSetSelector"},r.createElement("div",null,r.createElement(m.a,{className:"sectionLabel",secondaryComponent:r.createElement("a",{href:Object(We.z)(this.store.selectableSelectedStudyIds),target:"_blank"},"To build your own case set,",r.createElement("br",null),"try out our enhanced Study View."),promises:[this.store.sampleLists,this.store.asyncCustomCaseSet,this.store.profiledSamplesCount]},"Select Patient/Case Set:")),r.createElement("div",null,r.createElement(te.a,{value:this.store.selectedSampleListId,options:this.caseSetOptions,filterOption:Pn,onChange:function(t){return e.store.selectedSampleListId=t?t.value:void 0},"data-test":"caseSetSelector"}),!(this.store.selectedSampleListId!==y.a)&&r.createElement(l.a,{padded:!0},r.createElement("div",{className:wn.radioRow},r.createElement(l.b,{padded:!0},r.createElement(this.CaseIdsModeRadio,{label:"By sample ID",state:"sample"}),r.createElement(this.CaseIdsModeRadio,{label:"By patient ID",state:"patient"}))),r.createElement("span",null,"Enter case IDs below:"),r.createElement("textarea",{title:"Enter case IDs",rows:6,cols:80,value:this.store.caseIds,onChange:function(t){return e.store.caseIds=t.currentTarget.value},"data-test":"CustomCaseSetInput"})))):null}},{key:"modifyQuery",value:function(){this.store.selectedSampleListId=this.props.modifyQueryParams.selectedSampleListId,this.store.caseIds=this.props.modifyQueryParams.selectedSampleIds.join("\n"),this.store.caseIdsMode=this.props.modifyQueryParams.caseIdsMode,this.isQueryModified=!0}},{key:"caseSetOptions",get:function(){var e,t,n,o=this.store.sampleLists.result.map(function(e){return{label:r.createElement(h.c,{placement:"right",mouseEnterDelay:0,overlay:r.createElement("div",{className:wn.tooltip},e.description)},r.createElement("span",null,"".concat(e.name," (").concat(e.sampleCount,")"))),value:e.sampleListId,textLabel:e.name}}),i=(e=this.store.isVirtualStudySelected,t=this.store.isMultipleNonVirtualStudiesSelected,n=this.store.profiledSamplesCount.result,u.reduce(mn,function(r,o){if(o.isdefault)r.push(o);else if(t&&!e){var i=n[o.value];i>0&&r.push(Object.assign({},o,{name:"".concat(o.name," (").concat(i,")")}))}else if(e&&o.value===fn.all){var a=n[o.value];a>0&&r.push(Object.assign({},o,{name:"".concat(o.name," (").concat(a,")")}))}return r},[])).map(function(e){return{value:e.value,label:r.createElement(h.c,{placement:"right",mouseEnterDelay:0,overlay:r.createElement("div",{className:wn.tooltip},e.description)},r.createElement("span",null,e.name)),textLabel:e.name}});return o.concat(i)}}])&&bn(n.prototype,o),i&&bn(n,i),t}();En([F.computed],On.prototype,"caseSetOptions",null),En([F.action],On.prototype,"modifyQuery",null);var Tn=On=En([a.observer],On);function Cn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function In(e,t){return!t||"object"!==xn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kn(e){return(kn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rn(e,t){return(Rn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xn(e){return(xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var jn=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":xn(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Nn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),In(this,kn(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rn(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return this.props.ids.length>0?r.createElement("div",{className:"alert alert-danger","data-test":"unkown-study-warning",style:{marginBottom:0}},r.createElement("i",{className:"fa fa-exclamation-triangle"})," The following studies do not exist or you do not have access to them:",r.createElement("ul",{style:{margin:"10px 0"}},this.props.ids.map(function(e){return r.createElement("li",null,e)})),"Please resubmit your query below."):null}}])&&Cn(n.prototype,o),i&&Cn(n,i),t}(),An=Nn=jn([a.observer],Nn),Dn=n(25),Mn=n(959),Ln=n(814),Gn=n(59);function Vn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bn(e){return(Bn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hn(e,t){return(Hn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qn(e){return(Qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var qn=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Qn(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Un=i,Wn=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=Bn(t).call(this,e))||"object"!==Qn(o)&&"function"!=typeof o?Fn(r):o)._showQueryControls=!1,n.handleSubmit=n.handleSubmit.bind(Fn(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hn(e,t)}(t,r["Component"]),n=t,(o=[{key:"handleSubmit",value:function(){this.store.submit(),this.props.onSubmit&&this.props.onSubmit()}},{key:"toggleQueryControls",value:function(){q()(document).scrollTop(0),this._showQueryControls=!this._showQueryControls}},{key:"render",value:function(){var e=this;return r.createElement(l.a,{padded:!0,overflow:!0,className:f()("small",Un.QueryContainer,{forkedMode:this.props.forkedMode})},this.props.showAlerts&&this.store.genes.isComplete&&this.store.genes.result.suggestions.length>0&&r.createElement("div",{className:"alert alert-danger","data-test":"invalidQueryAlert",style:{marginBottom:0}},r.createElement("i",{className:"fa fa-exclamation-triangle"})," Your query has invalid or out-dated gene symbols. Please correct below."),this.store.unknownStudyIds.isComplete&&r.createElement(An,{ids:this.store.unknownStudyIds.result}),this.store.forDownloadTab&&r.createElement("div",{className:"alert alert-danger",role:"alert"},"The Download interface has been removed. Enhanced download functionality is now available through the Query interface. Run a query with your gene(s) of interest and use the Download tab to download all available data types."),!this.store.forDownloadTab&&r.createElement(Ze.If,{condition:0===this.store.defaultSelectedIds.size||this.studiesDataReady},r.createElement(Ze.Then,null,r.createElement(Ze.If,{condition:this.props.forkedMode&&this.showQueryControls},r.createElement(l.b,{className:Un.StudySelection},r.createElement(m.a,{className:"sectionLabel"},"Selected Studies:"," ",r.createElement("button",{"data-test":"modifyStudySelectionButton",className:"btn btn-default btn-xs",onClick:this.toggleQueryControls},"Modify")),r.createElement("div",{style:{marginLeft:8}},this.selectedStudySummary))),this.getWrappedCancerStudySelector,r.createElement(Ze.If,{condition:this.showQueryControls},r.createElement(r.Fragment,null,this.store.physicalStudyIdsInSelection.length>1?r.createElement(G,null):r.createElement(I,null),this.store.selectableSelectedStudyIds.length>0&&r.createElement(Tn,{modifyQueryParams:this.props.modifyQueryParams}),r.createElement(yn,null),!!this.store.isGenesetProfileSelected&&r.createElement(Ue,null),!!this.store.forDownloadTab&&r.createElement("span",{className:Un.downloadSubmitExplanation},"Clicking submit will generate a tab-delimited file containing your requested data."),!!this.store.forDownloadTab&&r.createElement(ge.a,{labelProps:{className:Un.transposeDataMatrix},checked:this.store.transposeDataMatrix,onChange:function(t){return e.store.transposeDataMatrix=t.currentTarget.checked}},"Transpose data matrix"),r.createElement(l.b,{overflow:!0,padded:!0,className:f()(Un.submitRow,"posRelative")},r.createElement("button",{style:{paddingLeft:50,paddingRight:50,marginRight:50},disabled:!this.store.submitEnabled,className:"btn btn-primary btn-lg",onClick:function(){return e.handleSubmit()},"data-test":"queryButton"},this.store.forDownloadTab?"Download":"Submit Query"),r.createElement(l.a,null,!!this.store.submitError&&r.createElement("span",{className:Un.errorMessage,"data-test":"oqlErrorMessage"},this.store.submitError),this.store.oqlMessages.map(function(e){return r.createElement("span",{className:Un.oqlMessage},r.createElement("i",{className:"fa fa-info-circle",style:{marginRight:5}}),e)}))))),r.createElement(Ze.If,{condition:!this.showQueryControls},r.createElement(l.b,{className:Un.forkedButtons},r.createElement("div",{style:{width:330,textAlign:"right",marginRight:20}},r.createElement(Ln.a,{store:this.store})),r.createElement(h.c,{placement:"top",trigger:["hover"],destroyTooltipOnHide:!0,mouseEnterDelay:0,mouseLeaveDelay:0,disabled:this.store.selectableSelectedStudies.length>0,overlay:this.queryByGeneTooltipMessage},r.createElement("a",{"data-test":"queryByGeneButton",onClick:function(){return e.store.hasSelectedStudies&&e.toggleQueryControls()},"data-event":Object(Gn.e)({action:"clickQueryByGeneButton",label:"",category:"homePage"}),className:f()("btn btn-primary btn-lg",{disabled:!this.store.hasSelectedStudies})},"Query By Gene")),"OR",r.createElement(h.c,{placement:"top",trigger:["hover"],destroyTooltipOnHide:!0,mouseEnterDelay:0,mouseLeaveDelay:0,disabled:!this.exploreCohortsButtonDisabled,overlay:this.exploreCohortsButtonTooltipMessage},r.createElement("a",{onClick:function(){return!e.exploreCohortsButtonDisabled&&e.store.openSummary()},"data-event":Object(Gn.e)({action:"clickExploreStudiesButton",label:"",category:"homePage"}),className:f()("btn btn-primary btn-lg",{disabled:this.exploreCohortsButtonDisabled})},r.createElement("i",{style:{marginTop:5},className:"ci ci-pie-chart"})," ","Explore Selected Studies"))))),r.createElement(Ze.Else,null,r.createElement(k.a,{isLoading:!0,center:!0,size:"big"}))))}},{key:"store",get:function(){return this.props.store}},{key:"studiesDataReady",get:function(){return this.store.studiesHaveChangedSinceInitialization||this.store.selectableStudiesSet.isComplete&&this.store.initiallySelected.profileIds&&this.store.cancerTypes.isComplete&&this.store.cancerStudies.isComplete&&this.store.profiledSamplesCount.isComplete}},{key:"showQueryControls",get:function(){return!1===this.props.forkedMode||this._showQueryControls}},{key:"selectedStudySummary",get:function(){var e=this,t=null;if(this.store.selectableSelectedStudies.length>4){t=r.createElement("span",{className:"inlineBlock"},r.createElement(h.c,{overlay:function(){return e.store.selectableSelectedStudies.slice(4).map(function(e){return r.createElement("div",null,e.name)})}},r.createElement("a",null,"and"," ",this.store.selectableSelectedStudies.length-4," ","more")))}return r.createElement("span",{className:"inlineBlock"},this.store.selectableSelectedStudies.slice(0,4).reduce(function(e,t,n,o){return e.push(r.createElement("span",{className:Un.studyName},t.name)),e},[]),t,t&&r.createElement("span",null,""),"(",r.createElement("b",null,this.store.profiledSamplesCount.result.all)," ",1===this.store.profiledSamplesCount.result.all?"sample":"total samples",")")}},{key:"getWrappedCancerStudySelector",get:function(){var e=r.createElement(s.a,{queryStore:this.store,forkedMode:this.props.forkedMode});return this.props.forkedMode?r.createElement("div",{style:{marginTop:0}},r.createElement(Mn.Fade,{duration:500,collapse:!1,className:"monkeys",unmountOnExit:!0,when:!this.showQueryControls},e)):e}},{key:"studyLimitedReached",get:function(){return this.store.selectableSelectedStudyIds.length>50}},{key:"exploreCohortsButtonDisabled",get:function(){return this.studyLimitedReached||!this.store.hasSelectedStudies}},{key:"exploreCohortsButtonTooltipMessage",get:function(){return 0===this.store.selectableSelectedStudyIds.length?"Please select at least one study above":this.studyLimitedReached?"Too many studies selected for study summary (limit: 50)":"Open summary of selected studies"}},{key:"queryByGeneTooltipMessage",get:function(){return 0===this.store.selectableSelectedStudies.length?"Please select at least one study above":"Continue to query configuration"}}])&&Vn(n.prototype,o),i&&Vn(n,i),t}();qn([F.computed],Wn.prototype,"studiesDataReady",null),qn([F.observable],Wn.prototype,"_showQueryControls",void 0),qn([F.computed],Wn.prototype,"showQueryControls",null),qn([F.computed],Wn.prototype,"selectedStudySummary",null),qn([F.computed],Wn.prototype,"getWrappedCancerStudySelector",null),qn([Dn.a],Wn.prototype,"toggleQueryControls",null),qn([F.computed],Wn.prototype,"studyLimitedReached",null),qn([F.computed],Wn.prototype,"exploreCohortsButtonDisabled",null),qn([F.computed],Wn.prototype,"exploreCohortsButtonTooltipMessage",null),qn([F.computed],Wn.prototype,"queryByGeneTooltipMessage",null);var Kn,Yn=Wn=qn([Object(hn.b)(y.c),a.observer],Wn),zn=n(582),Xn=n(166),Jn=n(161);!function(e){e.STUDY="STUDY",e.STUDY_COUNT="studies",e.GENE="GENE",e.GENE_COUNT="genes",e.PATIENT="PATIENT",e.PATIENT_COUNT="patients",e.SAMPLE="SAMPLE",e.SAMPLE_COUNT="samples"}(Kn||(Kn={}));n(969);var Zn=n(599),$n=n(970),er=n(821),tr=n.n(er),nr=n(117),rr=n(80);function or(){return(or=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ir(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ar(e){return(ar=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lr(e,t){return(lr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ur(e){return(ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var cr,pr=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ur(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},dr=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}l((r=r.apply(e,t||[])).next())})},fr=20,yr=3;!function(e){e[e.SESSION=0]="SESSION",e[e.STUDY_LIST=1]="STUDY_LIST"}(cr||(cr={}));var hr=function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=ar(t).apply(this,arguments),(e=!r||"object"!==ur(r)&&"function"!=typeof r?sr(n):r).studyPageMultiplier=0,e.genePageMultiplier=0,e.patientPageMultiplier=0,e.samplePageMultiplier=0,e.inputValue="",e.isFocusing=!1,e.isLoading=!1,e.geneStudyQueryVirtualStudy=Object(h.W)(function(){return dr(sr(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=b.b.serverConfig.default_cross_cancer_study_session_id,!b.a.sessionServiceIsEnabled()||!t){e.next=14;break}return e.prev=2,e.next=5,nr.a.getVirtualStudy(t);case 5:return n=e.sent,e.abrupt("return",n);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:e.next=15;break;case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}},e,null,[[2,9]])}))},null),e.geneStudyQuery=Object(h.W)({await:function(){return[e.geneStudyQueryVirtualStudy]},invoke:function(){return e.geneStudyQueryVirtualStudy.result?Promise.resolve({type:cr.SESSION,query:e.geneStudyQueryVirtualStudy.result.id,name:e.geneStudyQueryVirtualStudy.result.data.name}):Promise.resolve({type:cr.STUDY_LIST,query:b.b.serverConfig.default_cross_cancer_study_list,name:b.b.serverConfig.default_cross_cancer_study_list_name})}}),e.options=Object(h.W)({await:function(){return[e.geneStudyQuery]},invoke:function(){var t=e.inputValue,n=e.geneStudyQuery.result;return t.length>0?Promise.all([Jn.a.getAllStudiesUsingGETWithHttpInfo({keyword:t,pageSize:yr+fr*e.studyPageMultiplier}),Jn.a.getAllStudiesUsingGETWithHttpInfo({keyword:t,projection:"META"}),Jn.a.getAllGenesUsingGETWithHttpInfo({keyword:t,pageSize:yr+fr*e.genePageMultiplier}),Jn.a.getAllGenesUsingGETWithHttpInfo({keyword:t,projection:"META"}),Jn.a.getAllPatientsUsingGETWithHttpInfo({keyword:t,pageSize:yr+fr*e.patientPageMultiplier,projection:"DETAILED"}),Jn.a.getAllPatientsUsingGETWithHttpInfo({keyword:t,projection:"META"}),Jn.a.getSamplesByKeywordUsingGETWithHttpInfo({keyword:t,pageSize:yr+fr*e.samplePageMultiplier}),Jn.a.getSamplesByKeywordUsingGETWithHttpInfo({keyword:t,projection:"META"}),Object(Zn.a)(0)]).then(function(r){return dr(sr(e),void 0,void 0,regeneratorRuntime.mark(function e(){var o,i,a,s,l,u,c,p,d,f,y,h=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=r[0].body.map(this.studyToOption),i={value:parseInt(r[1].headers["total-count"])-o.length,type:Kn.STUDY_COUNT},a=r[2].body.map(this.geneToOption),s={value:parseInt(r[3].headers["total-count"])-a.length,type:Kn.GENE_COUNT},l=r[4].body.map(this.patientToOption),u={value:parseInt(r[5].headers["total-count"])-l.length,type:Kn.PATIENT_COUNT},c=r[6].body.map(this.sampleToOption),p={value:parseInt(r[7].headers["total-count"])-c.length,type:Kn.SAMPLE_COUNT},!(a.length+l.length<2*yr&&i.value>0)){e.next=13;break}return d=2*yr-(a.length+l.length),e.next=12,Jn.a.getAllStudiesUsingGETWithHttpInfo({keyword:t,pageSize:d+yr+fr*this.studyPageMultiplier}).then(function(e){o=e.body.map(h.studyToOption)});case 12:i.value=i.value-d;case 13:return f=[],(y=[]).push({label:"Studies",options:o,groupData:i,instruction:"Click on a study to open its summary"}),i.value>0&&(o.push(i),f.push(i)),n&&(y.push({label:"Genes",options:a,groupData:s,instruction:"Click on a gene to query it across ".concat(n.name)}),s.value>0&&(a.push(s),f.push(s))),y.push({label:"Patients",options:l,groupData:u,instruction:"Click on a patient to see a summary"}),u.value>0&&(l.push(u),f.push(u)),y.push({label:"Samples",options:c,groupData:p,instruction:"Click on a sample to open its summary"}),p.value>0&&(c.push(p),f.push(p)),e.abrupt("return",y);case 23:case"end":return e.stop()}},e,this)}))}):Promise.resolve([])}}),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lr(e,t)}(t,r["Component"]),n=t,(o=[{key:"selectRef",value:function(e){this.select=e}},{key:"studyToOption",value:function(e,t){return{value:e.studyId,type:Kn.STUDY,studyId:e.studyId,name:e.name,allSampleCount:e.allSampleCount,index:t}}},{key:"geneToOption",value:function(e,t){return{value:e.entrezGeneId,type:Kn.GENE,hugoGeneSymbol:e.hugoGeneSymbol,cytoband:e.cytoband,index:t}}},{key:"patientToOption",value:function(e,t){return{value:e.uniquePatientKey,type:Kn.PATIENT,studyId:e.studyId,patientId:e.patientId,studyName:e.cancerStudy.name,index:t}}},{key:"sampleToOption",value:function(e,t){return{value:e.sampleId,type:Kn.SAMPLE,studyId:e.studyId,patientId:e.patientId,sampleType:e.sampleType,index:t}}},{key:"handleChange",value:function(e){var t,n;if(e.type===Kn.STUDY)t={id:e.studyId},n=rr.a.Study,this.trackClick(rr.a.Study,this.inputValue);else if(e.type===Kn.GENE){var r=this.geneStudyQuery.isComplete&&this.geneStudyQuery.result.query;t={case_set_id:"all",gene_list:e.hugoGeneSymbol,cancer_study_list:r},n="results/cancerTypesSummary",this.trackClick("gene",this.inputValue)}else e.type===Kn.PATIENT?(t={studyId:e.studyId,caseId:e.patientId},n=rr.a.Patient,this.trackClick(rr.a.Patient,this.inputValue)):e.type===Kn.SAMPLE?(t={studyId:e.studyId,sampleId:e.value},n=rr.a.Patient,this.trackClick("sample",this.inputValue)):e.type===Kn.STUDY_COUNT?this.studyPageMultiplier++:e.type===Kn.GENE_COUNT?this.genePageMultiplier++:e.type===Kn.PATIENT_COUNT?this.patientPageMultiplier++:e.type===Kn.SAMPLE_COUNT&&this.samplePageMultiplier++;n&&Object(h.E)().routingStore.updateRoute(t,n)}},{key:"trackClick",value:function(e,t){Object(Gn.f)({category:"quickSearch",action:e,label:t})}},{key:"handleInputChange",value:function(e,t){var n=t.action;"set-value"!==n&&(e!=this.inputValue&&(this.studyPageMultiplier=0,this.genePageMultiplier=0,this.patientPageMultiplier=0,this.samplePageMultiplier=0),"input-change"===n&&(this.inputValue=e)),"input-blur"===n&&(this.isFocusing=!1)}},{key:"onFocus",value:function(){this.isFocusing=!0}},{key:"renderInput",value:function(e){return delete e.value,console.log(e),r.createElement("div",{className:"Select-input"},r.createElement("input",or({placeholder:"e.g. Lung, EGFR, TCGA-OR-A5J2"},e)))}},{key:"render",value:function(){return r.createElement("div",{onFocusCapture:this.onFocus},r.createElement(Xn.default,{options:this.options.result||[],autoFocus:!0,onInputChange:this.handleInputChange,onChange:this.handleChange,components:{Group:br,GroupHeading:gr},formatOptionLabel:vr,controlShouldRenderValue:!1,filterOption:!1,inputValue:this.inputValue,isLoading:this.options.isPending,placeholder:"e.g. Lung, EGFR, TCGA-OR-A5J2",noOptionsMessage:function(){return"No results"},blurInputOnSelect:!1,closeMenuOnSelect:!1,onSelectResetsInput:!1,menuIsOpen:this.menuIsOpen,maxMenuHeight:550,styles:{dropdownIndicator:function(){return{display:"none"}},control:function(e){return Object.assign({},e,{cursor:"text"})},option:function(e,t){return t.isSelected?Object.assign({},e,{backgroundColor:"inherit",color:"inherit",":hover":{backgroundColor:"#DEEBFF"}}):Object.assign({},e)}}}),r.createElement("p",{style:{fontSize:"x-small",textAlign:"center",paddingTop:15}},"We would love to hear what you think:",r.createElement("a",{href:"mailto:cbioportal@googlegroups.com"},"cbioportal@googlegroups.com")))}},{key:"menuIsOpen",get:function(){return this.isFocusing&&this.inputValue.length>0}}])&&ir(n.prototype,o),i&&ir(n,i),t}();pr([F.observable],hr.prototype,"studyPageMultiplier",void 0),pr([F.observable],hr.prototype,"genePageMultiplier",void 0),pr([F.observable],hr.prototype,"patientPageMultiplier",void 0),pr([F.observable],hr.prototype,"samplePageMultiplier",void 0),pr([F.observable],hr.prototype,"inputValue",void 0),pr([F.observable],hr.prototype,"isFocusing",void 0),pr([F.observable],hr.prototype,"isLoading",void 0),pr([F.computed],hr.prototype,"menuIsOpen",null),pr([Dn.a],hr.prototype,"selectRef",null),pr([Dn.a,F.action],hr.prototype,"handleChange",null),pr([Dn.a,F.action],hr.prototype,"handleInputChange",null),pr([Dn.a,F.action],hr.prototype,"onFocus",null),pr([Dn.a],hr.prototype,"renderInput",null);var mr=hr=pr([a.observer],hr),br=function(e){var t=e.data.groupData;t.value,tr()(t.type,t.value),t.value<fr&&t.value;return r.createElement("div",{className:$n.optionGroup},r.createElement("div",{className:$n.groupHeader},e.data.instruction),r.createElement(Xn.components.Group,e))},gr=function(e){return null};function vr(e){var t,n,o;return e.type===Kn.STUDY?(t=e.name,n="primary",o=e.allSampleCount+" samples","Select a study to open its summary"):e.type===Kn.GENE?(t=e.hugoGeneSymbol,n="success",o=e.cytoband||"-","Select a gene to query it across all TCGA PanCancer Atlas studies"):e.type===Kn.PATIENT?(t=e.patientId,n="danger",o=e.studyName,"Select a patient to see a summary"):e.type===Kn.SAMPLE?(t=e.value,n="warning",o=e.sampleType,"Select a sample to open its summary"):t=e.value+" more "+tr()(e.type,e.value)+" (click to load "+(e.value<fr?e.value:fr)+" more)",r.createElement("div",{className:$n.optionWrapper},n&&r.createElement("div",{className:$n.optionLabelWrapper},r.createElement(B.Label,{bsStyle:n},e.type)),r.createElement("div",null,r.createElement("div",null,r.createElement("strong",null,t)),o&&r.createElement("small",null,o)))}function _r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sr(e,t){return!t||"object"!==Pr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Er(e){return(Er=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wr(e,t){return(wr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pr(e){return(Pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Or=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Pr(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Tr=i,Cr="quickSearch",Ir="defaultHomePageTab",kr=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=Sr(this,Er(t).call(this,e)),e.showQuickSearchTab&&Object(h.E)().localStorage.getItem(Ir)===Cr&&(n.activeTabId=Object(h.E)().localStorage.getItem(Ir)),n.store=e.getQueryStore(),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wr(e,t)}(t,r["Component"]),n=t,(o=[{key:"setDefaultTab",value:function(e){this.props.showQuickSearchTab&&(Object(h.E)().localStorage.defaultHomePageTab=e===Cr?Cr:void 0)}},{key:"trackQuickSearch",value:function(){Object(Gn.f)({category:"quickSearch",action:"quickSearchLoad"})}},{key:"onSelectTab",value:function(e){this.store.forDownloadTab="download"===e,this.store.selectableSelectedStudyIds=[],this.activeTabId=e}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:Tr.QueryAndDownloadTabs},r.createElement(Ze.If,{condition:b.b.serverConfig.skin_citation_rule_text},r.createElement("div",{className:"citationRule",dangerouslySetInnerHTML:{__html:b.b.serverConfig.skin_citation_rule_text}})),r.createElement(zn.b,{activeTabId:this.activeTabId,onTabClick:this.onSelectTab,className:"mainTabs"},r.createElement(zn.a,{id:"advanced",linkText:"Query",onTabDidMount:function(){return e.setDefaultTab(void 0)}},r.createElement(Yn,{forkedMode:this.props.forkedMode,onSubmit:this.props.onSubmit,store:this.store,modifyQueryParams:this.props.modifyQueryParams,showAlerts:this.props.showAlerts})),r.createElement(zn.a,{id:Cr,linkText:r.createElement("span",null,"Quick Search"," ",r.createElement("strong",{className:"beta-text"},"Beta!")),hide:!this.props.showQuickSearchTab,onTabDidMount:function(){e.setDefaultTab(Cr),e.trackQuickSearch()}},r.createElement("div",null,r.createElement(mr,null))),r.createElement(zn.a,{id:"download",linkText:"Download",hide:!this.props.showDownloadTab,onTabDidMount:function(){return e.setDefaultTab(void 0)}},r.createElement(Yn,{forkedMode:!1,onSubmit:this.props.onSubmit,store:this.store,showAlerts:this.props.showAlerts}))))}},{key:"quickSearchDefaulted",get:function(){return Object(h.E)().localStorage.getItem(Ir)===Cr}}])&&_r(n.prototype,o),i&&_r(n,i),t}();kr.defaultProps={forkedMode:!0},Or([F.observable.ref],kr.prototype,"store",void 0),Or([F.observable],kr.prototype,"activeTabId",void 0),Or([Dn.a],kr.prototype,"setDefaultTab",null),Or([Dn.a,F.action],kr.prototype,"onSelectTab",null),kr=Or([a.observer],kr);t.a=kr},928:function(e,t,n){"use strict";(function(e){var r=n(7),o=n(0),i=n(17),a=n.n(i),s=n(626),l=n(580),u=n(28),c=n.n(u),p=n(994),d=n(11),f=n(5),y=n(95),h=n.n(y),m=n(20),b=n(629),g=n(92),v=n(939),_=n.n(v),S=n(3),E=n(25),w=n(677),P=n(946),O=n(814),T=n(566);function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var N=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":j(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},A=l,D=function(t){function n(e){var t,i=this;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=k(this,R(n).call(this,e))).handlers={onSummaryClick:function(){t.store.openSummary()},onCheckAllFiltered:function(){t.logic.mainView.toggleAllFiltered()},onClearFilter:function(){t.store.setSearchText("")}},t.CancerTypeList=Object(d.observer)(function(){var e=t.logic.cancerTypeListView.getChildCancerTypes(t.store.treeData.rootCancerType);return o.createElement("ul",{className:A.cancerTypeList},e.map(function(e,t){return o.createElement(i.CancerTypeListItem,{key:t,cancerType:e})}))}),t.CancerTypeListItem=Object(d.observer)(function(e){var n,i=e.cancerType,a=Object(f.expr)(function(){return t.logic.cancerTypeListView.getDescendantCancerStudies(i).length}),s=r.includes(t.store.selectedCancerTypeIds,i.cancerTypeId),l=t.logic.isHighlighted(i),u=c()((C(n={},A.cancerTypeListItem,!0),C(n,A.selectable,!0),C(n,A.selected,s),C(n,A.matchingNodeText,!!t.store.searchText&&l),C(n,A.nonMatchingNodeText,!!t.store.searchText&&!l),C(n,A.containsSelectedStudies,Object(f.expr)(function(){return t.logic.cancerTypeContainsSelectedStudies(i)})),n));return o.createElement("li",{className:u,onMouseDown:t.getCancerTypeListClickHandler(i)},o.createElement("span",{className:A.cancerTypeListItemLabel},i.name),o.createElement("span",{className:A.cancerTypeListItemCount},a))}),t.store=t.props.queryStore,t}var i,l,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(n,o["Component"]),i=n,(l=[{key:"getCancerTypeListClickHandler",value:function(e){var t=this;return function(n){return t.store.selectCancerType(e,n.ctrlKey)}}},{key:"selectTCGAPanAtlas",value:function(){this.logic.mainView.selectAllMatchingStudies(w.a)}},{key:"selectMatchingStudies",value:function(e){e&&(1===e.length&&/^\*.*\*$/.test(e[0])?this.logic.mainView.selectAllMatchingStudies(e[0].replace(/\*/g,"")):this.logic.mainView.selectAllMatchingStudies(e))}},{key:"componentDidMount",value:function(){var e,t=this;this.windowSizeDisposer=Object(f.reaction)(function(){return T.a.size},function(){t.props.forkedMode&&(clearTimeout(e),e=setTimeout(function(){return t.setListHeight()},200))},{fireImmediately:!0})}},{key:"componentWillUnmount",value:function(){this.windowSizeDisposer()}},{key:"setListHeight",value:function(){var t=e(a.a.findDOMNode(this)),n=T.a.size.height-t.offset().top;n=n<200?200:n,t.css("height",n-75)}},{key:"render",value:function(){var e=this,t=this.logic.mainView.getSelectionReport(),n=t.shownStudies,i=t.shownAndSelectedStudies,a=this.logic.mainView.quickSelectButtons(S.b.serverConfig.skin_quick_select_buttons);return o.createElement(s.a,{overflow:!0,"data-test":"studyList",className:A.CancerStudySelector},o.createElement(s.b,{overflow:!0,className:A.CancerStudySelectorHeader},o.createElement(b.a,{promises:[this.store.cancerTypes,this.store.cancerStudies]},"Select Studies for Visualization & Analysis:"),this.store.selectableStudiesSet.isComplete&&o.createElement("div",null,o.createElement(O.a,{store:this.store})),o.createElement(d.Observer,null,function(){var t=S.a.skin_example_study_queries(S.b.serverConfig.skin_example_study_queries||"");e.store.searchText&&t.indexOf(e.store.searchText)<0&&(t=[e.store.searchText].concat(t));var n=null,r=t.map(function(e,t){return{value:e,sortKey:t}});return o.createElement("div",{style:{display:"flex",alignItems:"center"}},e.store.searchText&&o.createElement("span",{"data-test":"clearStudyFilter",onClick:function(t){e.autosuggest.setState({inputValue:""}),e.handlers.onClearFilter()},style:{fontSize:18,cursor:"pointer",color:"#999999",position:"relative",left:164,zIndex:10}},"x"),o.createElement(_.a,{datalist:r,ref:function(t){return e.autosuggest=t},placeholder:"Search...",bsSize:"small",onChange:function(t){null!==n&&(window.clearTimeout(n),n=null),n=window.setTimeout(function(){e.store.setSearchText(t)},400)},onFocus:function(t){0===t.length&&setTimeout(function(){e.autosuggest.setState({open:!0})},400)}}))})),o.createElement(m.If,{condition:this.studiesDataComplete},o.createElement(s.b,{className:A.cancerStudySelectorBody},o.createElement(m.If,{condition:this.store.maxTreeDepth>0},o.createElement(m.Then,null,o.createElement("div",{className:A.cancerTypeListContainer},o.createElement(this.CancerTypeList,null)))),o.createElement("div",{className:A.cancerStudyListContainer,"data-test":"cancerTypeListContainer"},o.createElement("div",{className:"checkbox",style:{marginLeft:19}},o.createElement(m.If,{condition:n.length>0},o.createElement(m.If,{condition:!this.logic.mainView.isFiltered&&!r.isEmpty(a)},o.createElement(m.Then,null,o.createElement("div",{className:A.quickSelect},o.createElement(P.a,{onSelect:this.selectMatchingStudies,buttonsConfig:a}))),o.createElement(m.Else,null,o.createElement("label",null,o.createElement("input",{type:"checkbox","data-test":"selectAllStudies",style:{top:-2},onClick:this.handlers.onCheckAllFiltered,checked:i.length===n.length}),o.createElement("strong",null,i.length===n.length?"Deselect all listed studies ".concat(n.length<this.store.cancerStudies.result.length?"matching filter":""," (").concat(n.length,")"):"Select all listed studies ".concat(n.length<this.store.cancerStudies.result.length?"matching filter":"","  (").concat(n.length,")")))))),o.createElement(m.If,{condition:this.store.cancerStudies.isComplete&&this.store.cancerTypes.isComplete&&0===n.length},o.createElement("p",null,"There are no studies matching your filter."))),o.createElement(p.a,null)))),o.createElement(g.Modal,{className:c()(A.SelectedStudiesWindow,"cbioportal-frontend"),show:this.store.showSelectedStudiesOnly,onHide:function(){return e.store.showSelectedStudiesOnly=!1}},o.createElement(g.Modal.Header,{closeButton:!0},o.createElement(g.Modal.Title,null,"Selected Studies")),o.createElement(g.Modal.Body,null,o.createElement(p.a,{showSelectedStudiesOnly:!0}))))}},{key:"studiesDataComplete",get:function(){return this.store.cancerTypes.isComplete&&this.store.cancerStudies.isComplete&&this.store.userVirtualStudies.isComplete}},{key:"logic",get:function(){return this.store.studyListLogic}}])&&I(i.prototype,l),u&&I(i,u),n}();N([f.computed],D.prototype,"studiesDataComplete",null),N([h.a],D.prototype,"getCancerTypeListClickHandler",null),N([E.a,f.action],D.prototype,"selectTCGAPanAtlas",null),N([E.a,f.action],D.prototype,"selectMatchingStudies",null),D=N([d.observer],D),t.a=D}).call(this,n(9))},929:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__3uFIJ",framedImage:"styles-module__framedImage__3chnD",padded:"styles-module__padded__3vpqj",column:"styles-module__column__2pa-R",row:"styles-module__row__3l99O"}},930:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__agNQJ",framedImage:"styles-module__framedImage__JjRC-",selectAllStudies:"styles-module__selectAllStudies__2gWhF",SelectedStudyList:"styles-module__SelectedStudyList__27Hpt",StudyList:"styles-module__StudyList__2mxsz",deselectAll:"styles-module__deselectAll__26p-l",Level0:"styles-module__Level0__1RUPZ",Level1:"styles-module__Level1__2R0IW",Level3:"styles-module__Level3__1vXaT",Level4:"styles-module__Level4__3ZJ1g",Level2:"styles-module__Level2__3AEJ-",CancerType:"styles-module__CancerType__Zm_qX",Study:"styles-module__Study__398QL",indentArrow:"styles-module__indentArrow__32udx",SelectAll:"styles-module__SelectAll__3SSsJ",StudyName:"styles-module__StudyName__3IA_4",DeletedStudy:"styles-module__DeletedStudy__2axOg",StudySamples:"styles-module__StudySamples__3_cjf",StudyMeta:"styles-module__StudyMeta__3UFnp",StudyLinks:"styles-module__StudyLinks__cMCHs",summaryIcon:"styles-module__summaryIcon__WR75I",iconWithTooltip:"styles-module__iconWithTooltip__2yBW3",icon:"styles-module__icon__1ZBlQ",trashIcon:"styles-module__trashIcon__1z-wJ",infoCircleIcon:"styles-module__infoCircleIcon__27xSR",tooltip:"styles-module__tooltip__b54B6",fadein:"styles-module__fadein__2G2-B"}},936:function(e,t,n){},937:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__1fCuf",framedImage:"styles-module__framedImage__1w-Q4",SectionHeader:"styles-module__SectionHeader__3RwOA",error:"styles-module__error__1QyPg"}},938:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__3FkcF",framedImage:"styles-module__framedImage__Jd87U",error:"styles-module__error__19z3B",icon:"styles-module__icon__1tBLC"}},946:function(e,t,n){"use strict";var r=n(0),o=n(7),i=n(11),a=n(4);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":d(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,c(t).apply(this,arguments))}var n,i,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,r["Component"]),n=t,(i=[{key:"render",value:function(){var e=this;return r.createElement("div",null,"Quick select:",o.map(this.props.buttonsConfig,function(t,n){var o=s(n.split("|"),2),i=o[0],l=o[1],u=r.createElement("button",{"data-test":"selectPanCan",className:"btn btn-default btn-xs",onClick:function(){return e.props.onSelect(t)}},i),c=r.createElement("span",{style:{display:"inline-block",width:"300px"}},l||"");return l?r.createElement(a.c,{overlay:c},u):u}))}}])&&l(n.prototype,i),d&&l(n,d),t}();y=f([i.observer],y),t.a=y},948:function(e,t,n){},958:function(e,t,n){},969:function(e,t,n){},970:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__3ybLz",framedImage:"styles-module__framedImage__1LRLJ",optionGroup:"styles-module__optionGroup__2f4nW",groupHeader:"styles-module__groupHeader__1pzK0",optionWrapper:"styles-module__optionWrapper__10YFL",optionLabelWrapper:"styles-module__optionLabelWrapper__Nj0Ws"}},978:function(e,t,n){e.exports=n(15)(387)},994:function(e,t,n){"use strict";var r=n(0),o=n(930),i=n(28),a=n.n(i),s=n(610),l=n.n(s),u=n(594),c=n(11),p=n(5),d=n(7),f=n.n(d),y=n(16),h=n(563),m=n(4),b=n(673),g=n(931),v=(n(936),n(161)),_=n(93);function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t,n){return t&&E(e.prototype,t),n&&E(e,n),e}function P(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?T(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var R=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":k(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},x=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}l((r=r.apply(e,t||[])).next())})},j=function(e){function t(){var e;return S(this,t),(e=P(this,O(t).apply(this,arguments))).studyMetadata=Object(m.W)({invoke:function(){return x(T(e),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.a.getTagsUsingGET({studyId:this.props.studyId}));case 1:case"end":return e.stop()}},e,this)}))},onError:function(e){console.error("Error on getting study tags.",e)}}),e}return C(t,r["Component"]),w(t,[{key:"addHTMLDescription",value:function(e){return{__html:e}}},{key:"render",value:function(){var e="";if(this.props.isVirtualStudy)e=r.createElement("div",{dangerouslySetInnerHTML:this.addHTMLDescription(this.props.studyDescription)});else if(this.studyMetadata.isPending)e=r.createElement(_.a,{isLoading:!0});else if(this.studyMetadata.isComplete){var t=Object.keys(this.studyMetadata.result).length,n=r.createElement("div",{dangerouslySetInnerHTML:this.addHTMLDescription(this.props.studyDescription)});e=t>0?[n,r.createElement("br",null),r.createElement("div",{className:"studyTagsTooltip"}," ",r.createElement(g.JsonToTable,{json:this.studyMetadata.result}))]:n}else this.studyMetadata.isError&&(e="error");return e}}]),t}();R([p.observable],j.prototype,"studyMetadata",void 0),j=R([c.observer],j);var N=function(e){function t(){return S(this,t),P(this,O(t).apply(this,arguments))}return C(t,r["Component"]),w(t,[{key:"renderTooltip",value:function(){return r.createElement(m.c,{key:this.props.key,mouseEnterDelay:this.props.mouseEnterDelay,placement:this.props.placement,overlay:r.createElement(j,{studyDescription:this.props.studyDescription,studyId:this.props.studyId,isVirtualStudy:this.props.isVirtualStudy}),children:this.props.children})}},{key:"render",value:function(){return this.renderTooltip()}}]),t}(),A=N=R([c.observer],N);function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t,n){return t&&G(e.prototype,t),n&&G(e,n),e}function B(e,t){return!t||"object"!==q(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var U=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":q(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},W=Object.assign({},o,{Level:function(e){return o["Level".concat(e)]}}),K=function(e){function t(){var e;return L(this,t),(e=B(this,F(t).apply(this,arguments))).renderCancerType=function(t){var n,o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=e.logic.getDepth(t),u=e.view.getChildCancerTypes(t),c=e.view.getChildCancerStudies(t),p=e.logic.cancerTypeListView.getDescendantCancerStudies(t).map(function(e){return e.studyId});if(t!=e.rootCancerType){var d=a()(W.CancerType,W.Level(s),e.logic.isHighlighted(t)&&W.highlighted);3===s&&(o=r.createElement(l.a,{className:W.indentArrow,name:"long-arrow-right"})),n=r.createElement("li",{className:d},r.createElement(Y,{view:e.view,node:t},o,r.createElement("span",{className:W.CancerTypeName},t.name),!e.store.forDownloadTab&&r.createElement("span",{className:W.SelectAll},f.a.intersection(p,e.store.selectableSelectedStudyIds).length?"Deselect All":"Select All")))}var y=a()(W.StudyList,W.Level(s));return r.createElement("ul",{key:i,className:y},n,c.map(e.renderCancerStudy),u.map(e.renderCancerType))},e.renderCancerStudy=function(t,n){var o=a()(W.Study,e.logic.isHighlighted(t)&&W.highlighted),i=t.studyId in e.store.getOverlappingStudiesMap,s=i?r.createElement(m.c,{mouseEnterDelay:0,placement:"top",overlay:r.createElement("div",null,"This study has overlapping data with another selected study.")},r.createElement("i",{className:"fa fa-exclamation-triangle"})):null;return r.createElement("li",{key:n,className:o,"data-test":e.store.isVirtualStudy(t.studyId)?"VirtualStudySelect":"StudySelect"},r.createElement(c.Observer,null,function(){var n,o=a()((M(n={},W.StudyName,!0),M(n,"overlappingStudy",i),M(n,W.DeletedStudy,e.store.isDeletedVirtualStudy(t.studyId)),n));return r.createElement(Y,{view:e.view,node:t},r.createElement("span",{className:o},t.name,s))}),r.createElement(c.Observer,null,function(){return r.createElement("div",{className:W.StudyMeta},!e.store.isDeletedVirtualStudy(t.studyId)&&e.renderSamples(t),e.renderStudyLinks(t))}))},e.renderSamples=function(e){return r.createElement("span",{className:W.StudySamples},"".concat(e.allSampleCount," samples"))},e.renderStudyLinks=function(t){if(e.store.isDeletedVirtualStudy(t.studyId))return r.createElement(m.c,{mouseEnterDelay:0,placement:"top",overlay:r.createElement("div",{className:W.tooltip},"Restore study"),children:r.createElement("button",{className:"btn btn-default btn-xs",onClick:function(){return e.store.restoreVirtualStudy(t.studyId)},style:{lineHeight:"80%"},"data-test":"virtualStudyRestore"},"Restore")});var n=[{icon:"info-circle",tooltip:""}];return e.store.isVirtualStudy(t.studyId)?n.push({icon:"trash",tooltip:"Delete this virtual study.",onClick:function(){return e.store.deleteVirtualStudy(t.studyId)}}):n.push({icon:"book",onClick:t.pmid&&Object(y.v)(t.pmid),tooltip:t.pmid&&"PubMed"}),r.createElement("span",{className:W.StudyLinks},n.map(function(n,o){var i,s=r.createElement(l.a,{key:o,name:n.icon,className:a()((i={},M(i,W.icon,!0),M(i,W.iconWithTooltip,!!n.tooltip),M(i,W.trashIcon,"trash"===n.icon),M(i,W.infoCircleIcon,"info-circle"===n.icon),i))});if(n.onClick){var u={key:o};"string"==typeof n.onClick?(u.href=n.onClick,u.target="_blank"):u.onClick=n.onClick,s=r.createElement("a",u,s)}if(n.tooltip){var c=r.createElement("div",{className:W.tooltip,dangerouslySetInnerHTML:{__html:n.tooltip}});s=r.createElement(m.c,{key:o,mouseEnterDelay:0,placement:"top",overlay:c,children:s})}return"info-circle"===n.icon&&(s=r.createElement(A,{key:o,studyDescription:e.store.isVirtualStudy(t.studyId)?t.description.replace(/\r?\n/g,"<br />"):t.description,studyId:t.studyId,isVirtualStudy:e.store.isVirtualStudy(t.studyId),mouseEnterDelay:0,placement:"top"},r.createElement("a",null,s))),s}),t.studyId&&r.createElement(m.c,{mouseEnterDelay:0,placement:"top",overlay:r.createElement("div",{className:W.tooltip},"View clinical and genomic data of this study")},r.createElement("span",null,r.createElement(b.a,{studyId:t.studyId,className:a()(W.summaryIcon,"ci ci-pie-chart")}))))},e}return H(t,h["d"]),V(t,[{key:"componentDidMount",value:function(){this.props.showSelectedStudiesOnly&&(this._view=this.view)}},{key:"render",value:function(){var e=this,t=this.renderCancerType(this.rootCancerType);return this.props.showSelectedStudiesOnly?r.createElement("div",{className:W.SelectedStudyList},r.createElement("span",{className:W.deselectAll,onClick:function(){e.view.onCheck(e.store.treeData.rootCancerType,!1),e.store.showSelectedStudiesOnly=!1}},"Deselect all"),t):t}},{key:"view",get:function(){return this._view||(this.props.showSelectedStudiesOnly?this.logic.selectedStudiesView:this.logic.mainView)}},{key:"logic",get:function(){return this.store.studyListLogic}},{key:"rootCancerType",get:function(){return this.store.treeData.rootCancerType}}]),t}();K=U([c.observer],K);t.a=K;var Y=function(e){function t(){return L(this,t),B(this,F(t).apply(this,arguments))}return H(t,h["d"]),V(t,[{key:"render",value:function(){var e=this;return r.createElement(u.a,D({},this.checkboxProps,{onChange:function(t){e.props.view.onCheck(e.props.node,t.target.checked)}}),this.props.children)}},{key:"checkboxProps",get:function(){return this.props.view.getCheckboxProps(this.props.node)}}]),t}();U([p.computed.struct],Y.prototype,"checkboxProps",null),Y=U([c.observer],Y)}}]);