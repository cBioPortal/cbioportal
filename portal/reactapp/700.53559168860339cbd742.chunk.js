(self.webpackChunkcbioportal_frontend=self.webpackChunkcbioportal_frontend||[]).push([[700],{24952:(e,t,n)=>{"use strict";n.d(t,{Z:()=>we});var r=n(88034),o=n(27808),i=n(57930),a=n.n(i),l=n(53065),s=n.n(l),u=n(78566),c=n(83329),p=n(21958),f=n.n(p),d=n(78631),y=n(70245),h=n(87911),m=n(5933),b=n(97333),g=n(49572),v=n(79280),O=n(71780),P=n(3563),S=n(17299),E=n(67526),w=n(65587);function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var G=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":_(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},A=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?j(e):t}(this,C(t).call(this,e)),Object.defineProperty(j(n),"tooltipModel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(j(n),"svgContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(j(n),"dragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),(0,u.makeObservable)(j(n)),n}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,e),n=t,(i=[{key:"svgRef",value:function(e){this.svgContainer=e&&e.children?e.children[0]:null}},{key:"handleSelection",value:function(e,t,n){this.props.onSelection(e[0].data.map((function(e){return e.hugoGeneSymbol})))}},{key:"handleSelectionCleared",value:function(){this.tooltipModel&&this.props.onGeneNameClick(this.tooltipModel.datum.hugoGeneSymbol,this.tooltipModel.datum.entrezGeneId),this.props.onSelectionCleared()}},{key:"onMouseOver",value:function(e,t,n){this.tooltipModel={datum:e,x:t,y:n}}},{key:"onMouseOut",value:function(){this.tooltipModel=null}},{key:"getTooltip",value:function(){return this.tooltipModel?r.createElement(v.Popover,{className:"cbioTooltip",positionLeft:this.tooltipModel.x+15,positionTop:this.tooltipModel.y-44},"Gene: ",this.tooltipModel.datum.hugoGeneSymbol,r.createElement("br",null),"Log Ratio:"," ",(0,O.fm)(this.tooltipModel.datum.logRatio),r.createElement("br",null),"Alteration Frequency in ",this.props.xGroupName,":"," ",this.tooltipModel.datum.x.toFixed(),"%",r.createElement("br",null),"Alteration Frequency in ",this.props.yGroupName,":"," ",this.tooltipModel.datum.y.toFixed(),"%",r.createElement("br",null),"p-Value:"," ",(0,P.C)(this.tooltipModel.datum.pValue,3,.01),r.createElement("br",null),"q-Value:"," ",(0,P.C)(this.tooltipModel.datum.qValue,3,.01)):r.createElement("span",null)}},{key:"onClick",value:function(){this.dragging||this.handleSelectionCleared(),this.dragging=!1}},{key:"onSelectionComponentRender",value:function(){this.dragging=!0}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:"posRelative"},r.createElement("div",{className:"borderedChart inlineBlock",style:{position:"relative"},onClick:this.onClick},r.createElement(g.VictoryChart,{containerComponent:this.containerComponent,theme:w.Nv,domainPadding:{x:[0,20],y:[0,20]},height:350,width:350,padding:{top:40,bottom:60,left:60,right:40}},r.createElement(g.VictoryAxis,k({domain:[0,this.plotDomainMax],label:this.xLabel,style:{tickLabels:{padding:5},axisLabel:{padding:27},ticks:{size:3},grid:{strokeOpacity:1}},crossAxis:!1,orientation:"bottom",offsetY:45},this.tickProps)),r.createElement(g.VictoryAxis,k({domain:[0,this.plotDomainMax],dependentAxis:!0,label:this.yLabel,style:{tickLabels:{padding:5},axisLabel:{padding:32},ticks:{size:3},grid:{strokeOpacity:1}},crossAxis:!1,orientation:"left",offsetX:45},this.tickProps)),r.createElement(g.VictoryLine,{style:{data:{stroke:"#cccccc",strokeWidth:1,strokeDasharray:"10,5"}},data:[{x:0,y:0},{x:this.plotDomainMax,y:this.plotDomainMax}]}),r.createElement(g.VictoryScatter,{style:{data:{fillOpacity:.4}},data:this.splitData.insignificant,dataComponent:r.createElement(E.Z,{onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,fill:function(t){return t.hugoGeneSymbol in e.props.selectedGenesSet?"#FE9929":"#D3D3D3"}}),symbol:"circle",size:3}),r.createElement(g.VictoryScatter,{style:{data:{fillOpacity:.6}},data:this.splitData.significant,dataComponent:r.createElement(E.Z,{onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,fill:function(t){return t.hugoGeneSymbol in e.props.selectedGenesSet?"#FE9929":"#58ACFA"}})})),r.createElement(w.t_,{getSvg:function(){return e.svgContainer},filename:"enrichments-frequency-scatter",dontFade:!0,type:"button",style:{position:"absolute",top:10,right:10,zIndex:0}})),r.createElement(o.Observer,null,this.getTooltip))}},{key:"maxLabelWidth",get:function(){return(0,w.mY)(this.props.xGroupName,"Arial","13px")+(0,w.mY)(this.props.yGroupName,"Arial","13px")>150?75:90}},{key:"xLabel",get:function(){return"Altered Frequency in ".concat((0,w.uC)(this.props.xGroupName,this.maxLabelWidth,"Arial","13px")," (%)")}},{key:"yLabel",get:function(){return"Altered Frequency in ".concat((0,w.uC)(this.props.yGroupName,this.maxLabelWidth,"Arial","13px")," (%)")}},{key:"splitData",get:function(){var e=[],t=[],n=!0,r=!1,o=void 0;try{for(var i,a=this.props.data[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var l=i.value;l.qValue<.05?e.push(l):t.push(l)}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return{significant:e,insignificant:t}}},{key:"plotDomainMax",get:function(){var e=0,t=0,n=!0,r=!1,o=void 0;try{for(var i,a=this.props.data[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var l=i.value;e=Math.max(e,l.x),t=Math.max(t,l.y)}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return Math.max(e,t)}},{key:"containerComponent",get:function(){var e=this;return r.createElement(g.VictorySelectionContainer,{containerRef:this.svgRef,onSelection:function(t,n,r){return e.handleSelection(t,n,r)},responsive:!1,onSelectionCleared:this.handleSelectionCleared,activateSelectedData:!1,selectionComponent:r.createElement(S.Z,{onRender:this.onSelectionComponentRender})})}},{key:"tickProps",get:function(){return this.plotDomainMax>40?{tickValues:[0,25,50,75]}:this.plotDomainMax>20?{tickValues:[0,10,20,30,40]}:this.plotDomainMax>10?{tickValues:[0,5,10,15,20]}:{tickCount:4}}}])&&x(n.prototype,i),a&&x(n,a),t}(r.Component);G([u.observable],A.prototype,"tooltipModel",void 0),G([u.observable],A.prototype,"svgContainer",void 0),G([u.action.bound],A.prototype,"svgRef",null),G([u.computed],A.prototype,"maxLabelWidth",null),G([u.computed],A.prototype,"xLabel",null),G([u.computed],A.prototype,"yLabel",null),G([u.computed],A.prototype,"splitData",null),G([u.computed],A.prototype,"plotDomainMax",null),G([u.action.bound],A.prototype,"onMouseOver",null),G([u.action.bound],A.prototype,"onMouseOut",null),G([m.default],A.prototype,"getTooltip",null),G([m.default],A.prototype,"onClick",null),G([m.default],A.prototype,"onSelectionComponentRender",null),G([u.computed],A.prototype,"tickProps",null);const R=A=G([o.observer],A);var M=n(11230),L=n.n(M),D=function(e){e.height;return r.createElement("div",{className:L().wrapper,style:{width:e.width}},r.createElement("div",{className:L().groupRow},r.createElement("div",{style:{width:"".concat(e.group1Width,"%"),background:e.group1Color}}),r.createElement("div",{style:{width:"".concat(e.group2Width,"%"),background:e.group2Color}})),r.createElement("div",{className:L().alterationRow},r.createElement("div",{style:{width:"".concat(e.group1Unprofiled,"%"),background:"white",position:"relative"}},r.createElement("div",{className:L().strike})),r.createElement("div",{style:{width:"".concat(e.group1Unaltered,"%"),background:"transparent"}}),r.createElement("div",{style:{width:"".concat(e.group1Altered,"%"),background:"#3786C2"}}),r.createElement("div",{style:{width:"".concat(e.group2Altered,"%"),background:"#3786C2"}}),r.createElement("div",{style:{width:"".concat(e.group2Unprofiled,"%"),background:"white",position:"absolute",right:0}},r.createElement("div",{className:L().strike}))))},N=n(79623),I=n(38659),V=n(17790),B=n(65483),U=n.n(B);function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e,t,n){return t&&W(e.prototype,t),n&&W(e,n),e}function q(e,t){return!t||"object"!==Y(t)&&"function"!=typeof t?H(e):t}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var $=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Y(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},X=["AMP","HOMDEL"],J=function(e){function t(e){var n;return F(this,t),n=q(this,Z(t).call(this,e)),Object.defineProperty(H(n),"tooltipModel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(H(n),"_geneQuery",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(H(n),"selectedGenes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(H(n),"_label",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(H(n),"isGeneSelectionPopupVisible",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(H(n),"svgContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),(0,u.makeObservable)(H(n)),n}return Q(t,e),z(t,[{key:"getTooltip",value:function(e){var t=e.majorCategory;t=t.replace(/\*$/,"");var n=this.geneDataSet[t],o=a().map(this.props.groupOrder,(function(t){var o=n.groupsSet[t],i={};return e.minorCategory===o.name&&(i={fontWeight:"bold"}),r.createElement("tr",{style:i},r.createElement("td",null,o.name),r.createElement("td",null,o.alteredPercentage.toFixed(2),"% (",o.alteredCount,"/",o.profiledCount,")"))}));return r.createElement("div",null,r.createElement("strong",null,t," ",this.props.yAxisLabel),r.createElement("br",null),r.createElement("table",{className:"table table-bordered"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{scope:"col"},"Group"),r.createElement("th",{scope:"col"},"Percentage Altered"))),r.createElement("tbody",null,o)),r.createElement("strong",null,"p-Value"),":"," ",n.pValue?(0,P.C)(n.pValue,3,.01):"-",r.createElement("br",null),r.createElement("strong",null,"q-Value"),":"," ",n.qValue?(0,P.C)(n.qValue,3,.01):"-")}},{key:"render",value:function(){var e=this;return r.createElement("div",{"data-test":"GeneBarPlotDiv",className:"borderedChart",style:{position:"relative",display:"inline-block"}},this.toolbar,r.createElement("div",{style:{overflow:"auto hidden",position:"relative"}},r.createElement(N.Z,{barWidth:10,domainPadding:10,chartBase:300,legendLocationWidthThreshold:800,ticksCount:6,horizontalBars:!1,percentage:!1,stacked:!1,plotData:this.barPlotData,axisStyle:{tickLabels:{fontSize:10}},horzCategoryOrder:this.horzCategoryOrder,vertCategoryOrder:this.props.groupOrder,countAxisLabel:"".concat(this.props.yAxisLabel," (%)"),tooltip:this.getTooltip,categoryToColor:this.props.categoryToColor,svgRef:function(t){return e.svgContainer=t}})))}},{key:"geneListOptions",get:function(){return(0,d.ar)(this.props.data,this.props.showCNAInTable)}},{key:"defaultOption",get:function(){return this.geneListOptions.length>1?this.geneListOptions[1]:this.geneListOptions[0]}},{key:"geneDataSet",get:function(){var e=this;return a().keyBy(this.props.data,(function(t){return e.props.showCNAInTable?t.hugoGeneSymbol+": ".concat(d.Xj[t.value]):t.hugoGeneSymbol}))}},{key:"barPlotData",get:function(){return(0,d.fT)(this.geneDataSet,this.barPlotOrderedGenes)}},{key:"barPlotOrderedGenes",get:function(){return this._label===d.m9.SYNC_WITH_TABLE?this.tableSelectedGenes:this.selectedGenes?this.props.showCNAInTable?a().flatMap(this.selectedGenes,(function(e){if(!1===e.alterations)return[e.gene+": AMP",e.gene+": HOMDEL"];var t=[];return a().each(e.alterations,(function(n){"cna"===n.alteration_type&&"="===n.constr_rel&&X.includes(n.constr_val)&&t.push(e.gene+": "+n.constr_val)})),t})):this.selectedGenes.map((function(e){return e.gene})):this.defaultOption.genes.slice(0,10)}},{key:"horzCategoryOrder",get:function(){return a().flatMap(this.barPlotOrderedGenes,(function(e){return[e+"*",e]}))}},{key:"selectedOption",get:function(){return this._label&&void 0!==this._geneQuery?{label:this._label,value:this._geneQuery}:{label:this.defaultOption.label,value:this.defaultOption.genes.slice(0,10).join("\n")}}},{key:"toolbar",get:function(){var e=this;return r.createElement(r.Fragment,null,r.createElement("div",{style:{zIndex:10,position:"absolute",top:"10px",left:"15px"}},r.createElement("strong",null,this.selectedOption.label)),r.createElement("div",{style:{zIndex:10,position:"absolute",top:"10px",right:"10px"}},r.createElement("div",{className:U().ChartControls},r.createElement(w.ZD,{trigger:["click"],destroyTooltipOnHide:!1,visible:this.isGeneSelectionPopupVisible,onVisibleChange:function(t){e.isGeneSelectionPopupVisible=t},overlay:r.createElement(te,{options:this.geneListOptions,selectedOption:this.selectedOption,onSelectedGenesChange:function(t,n,r){e._geneQuery=t,e.selectedGenes=n,e._label=r,e.isGeneSelectionPopupVisible=!1},defaultNumberOfGenes:10}),placement:"bottomLeft"},r.createElement("div",null,r.createElement("button",{"data-test":"selectGenes",className:"btn btn-default btn-xs"},"Select genes"))),r.createElement(w.t_,{getSvg:function(){return e.svgContainer},filename:"GroupComparisonGeneFrequencyPlot",dontFade:!0,type:"button"}))))}},{key:"tableSelectedGenes",get:function(){return null!==this.props.dataStore.visibleData?this.props.dataStore.visibleData.map((function(e){return e.hugoGeneSymbol})).slice(0,100):[]}}]),t}(r.Component);$([u.observable],J.prototype,"tooltipModel",void 0),$([u.observable.ref],J.prototype,"_geneQuery",void 0),$([u.observable],J.prototype,"selectedGenes",void 0),$([u.observable],J.prototype,"_label",void 0),$([u.observable],J.prototype,"isGeneSelectionPopupVisible",void 0),$([u.observable],J.prototype,"svgContainer",void 0),$([u.computed],J.prototype,"geneListOptions",null),$([u.computed],J.prototype,"defaultOption",null),$([u.computed],J.prototype,"geneDataSet",null),$([u.computed],J.prototype,"barPlotData",null),$([u.computed],J.prototype,"barPlotOrderedGenes",null),$([u.computed],J.prototype,"horzCategoryOrder",null),$([m.default],J.prototype,"getTooltip",null),$([u.computed],J.prototype,"selectedOption",null),$([u.computed],J.prototype,"toolbar",null),$([u.computed],J.prototype,"tableSelectedGenes",null);const ee=J=$([o.observer],J);var te=function(e){function t(e){var n;return F(this,t),n=q(this,Z(t).call(this,e)),Object.defineProperty(H(n),"_geneQuery",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(H(n),"selectedGenesHasError",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(H(n),"numberOfGenes",{enumerable:!0,configurable:!0,writable:!0,value:n.props.defaultNumberOfGenes}),Object.defineProperty(H(n),"_selectedGeneListOption",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(H(n),"genesToPlot",{enumerable:!0,configurable:!0,writable:!0,value:[]}),(0,u.makeObservable)(H(n)),window.genesSelection=H(n),n}return Q(t,e),z(t,[{key:"onChangeGeneInput",value:function(e,t,n){var r=a().keyBy(t.found,(function(e){return e.hugoGeneSymbol.toUpperCase()})),o=a().map(e.query,(function(e){return e.gene.toUpperCase()}));a().isEmpty(r)&&a().isEmpty(t.suggestions)||(this.selectedGenesHasError=!a().every(o,(function(e){return e in r}))),this.selectedGenesHasError||(this.genesToPlot=e.query),this.geneQuery!==n&&(this._selectedGeneListOption={label:d.m9.USER_DEFINED_OPTION,genes:[],value:""}),this._geneQuery=n}},{key:"onGeneListOptionChange",value:function(e){if(this._selectedGeneListOption=e,""!==e.value){var t=this.geneOptionSet[e.label].genes;this._geneQuery=t.slice(0,this.numberOfGenes).join("\n")}else this._geneQuery=""}},{key:"handleTotalInputChange",value:function(e){var t=e.target.value.replace(/[^0-9]/g,"");t<=this.props.maxNumberOfGenes&&(this.numberOfGenes=t)}},{key:"handleTotalInputKeyPress",value:function(e){if(13===e.charCode){if(isNaN(this.numberOfGenes))return void(this.numberOfGenes=0);this.updateGeneQuery()}}},{key:"onBlur",value:function(){isNaN(this.numberOfGenes)?this.numberOfGenes=0:this.updateGeneQuery()}},{key:"updateGeneQuery",value:function(){if(this.numberOfGenes=Number(this.numberOfGenes),this.selectedGeneListOption){var e=this.selectedGeneListOption.label,t=this.geneOptionSet[e].genes;t.length>0&&(this._geneQuery=t.slice(0,this.numberOfGenes).join("\n"))}}},{key:"render",value:function(){var e=this;return r.createElement("div",{style:{width:300}},this.props.options.length>0&&r.createElement("div",{"data-test":"genesSelector"},r.createElement(I.default,{value:this.selectedGeneListOption,options:this.geneListOptions,onChange:this.onGeneListOptionChange,isClearable:!1,isSearchable:!1})),!this.inSyncMode&&!this.isCustomGeneSelection&&r.createElement("div",null,r.createElement("br",null),r.createElement("div",{style:{display:"table-row"}},r.createElement("label",{style:{display:"table-cell",whiteSpace:"nowrap"}},"Number of Genes (max."," ",this.props.maxNumberOfGenes,"):  "),r.createElement(v.FormControl,{"data-test":"numberOfGenes",type:"text",value:this.numberOfGenes,onChange:this.handleTotalInputChange,onKeyPress:this.handleTotalInputKeyPress,onBlur:this.onBlur}))),r.createElement("div",null,r.createElement("br",null),!this.inSyncMode&&r.createElement("div",null,r.createElement(V.Z,{inputGeneQuery:this.geneQuery,validateInputGeneQuery:!1,callback:this.onChangeGeneInput,location:V.e.ONCOPRINT_HEATMAP}),this.hasUnsupportedOQL&&r.createElement("strong",{style:{display:"block"}},r.createElement("span",{style:{color:"#a71111"}},"OQL is not allowed")),r.createElement("br",null)),r.createElement("button",{key:"addGenestoBarPlot","data-test":"addGenestoBarPlot",className:"btn btn-sm btn-primary",onClick:function(){e.props.onSelectedGenesChange(e._geneQuery,e.genesToPlot,e.selectedGeneListOption.label)},disabled:this.addGenesButtonDisabled},"Submit")))}},{key:"geneListOptions",get:function(){return a().map(this.props.options,(function(e){return{label:e.label,value:e.genes.join("\n")}}))}},{key:"geneOptionSet",get:function(){return a().keyBy(this.props.options,(function(e){return e.label}))}},{key:"selectedGeneListOption",get:function(){if(void 0===this._selectedGeneListOption&&this.props.selectedOption){var e=this.props.selectedOption;return this.geneListOptions.find((function(t){return t.value.startsWith(e.value)}))}return this._selectedGeneListOption}},{key:"isCustomGeneSelection",get:function(){return void 0===this.selectedGeneListOption||this.selectedGeneListOption.label===d.m9.USER_DEFINED_OPTION}},{key:"geneQuery",get:function(){return void 0===this._geneQuery&&this.props.selectedOption?this.props.selectedOption.value:this._geneQuery||""}},{key:"hasUnsupportedOQL",get:function(){return void 0!==a().find(this.genesToPlot,(function(e){return!!(e.alterations&&e.alterations.length>0)&&void 0!==a().find(e.alterations,(function(e){return"cna"===e.alteration_type&&("="!==e.constr_rel||!X.includes(e.constr_val))}))}))}},{key:"addGenesButtonDisabled",get:function(){return this.inSyncMode?void 0!==this.props.selectedOption&&this.props.selectedOption.label===d.m9.SYNC_WITH_TABLE:this.hasUnsupportedOQL||this.props.selectedOption&&this.props.selectedOption.value===this._geneQuery||this.selectedGenesHasError||a().isEmpty(this._geneQuery)}},{key:"inSyncMode",get:function(){return this._selectedGeneListOption&&this._selectedGeneListOption.label===d.m9.SYNC_WITH_TABLE}}]),t}(r.Component);Object.defineProperty(te,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{maxNumberOfGenes:100}}),$([u.observable.ref],te.prototype,"_geneQuery",void 0),$([u.observable],te.prototype,"selectedGenesHasError",void 0),$([u.observable],te.prototype,"numberOfGenes",void 0),$([u.observable],te.prototype,"_selectedGeneListOption",void 0),$([u.observable.ref],te.prototype,"genesToPlot",void 0),$([u.computed],te.prototype,"geneListOptions",null),$([u.computed],te.prototype,"geneOptionSet",null),$([u.computed],te.prototype,"selectedGeneListOption",null),$([u.computed],te.prototype,"isCustomGeneSelection",null),$([u.computed],te.prototype,"geneQuery",null),$([u.action.bound],te.prototype,"onChangeGeneInput",null),$([u.computed],te.prototype,"hasUnsupportedOQL",null),$([u.computed],te.prototype,"addGenesButtonDisabled",null),$([u.action.bound],te.prototype,"onGeneListOptionChange",null),$([u.computed],te.prototype,"inSyncMode",null),$([u.action.bound],te.prototype,"handleTotalInputChange",null),$([u.action.bound],te.prototype,"handleTotalInputKeyPress",null),$([u.action.bound],te.prototype,"onBlur",null),$([u.action.bound],te.prototype,"updateGeneQuery",null),te=$([o.observer],te);var ne=n(64577),re=n(26942);function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function le(e,t){return(le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function se(e){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ue=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":se(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ce=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==se(t)&&"function"!=typeof t?ae(e):t}(this,ie(t).call(this,e)),Object.defineProperty(ae(n),"significanceFilter",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(ae(n),"checkedGenes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(ae(n),"selectedGenes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(ae(n),"highlightedRow",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(ae(n),"_enrichedGroups",{enumerable:!0,configurable:!0,writable:!0,value:n.props.groups.map((function(e){return e.name}))}),Object.defineProperty(ae(n),"dataStore",{enumerable:!0,configurable:!0,writable:!0,value:new b.v((function(){return n.filteredData}),(function(){return n.highlightedRow}),(function(e){n.highlightedRow=e}))}),(0,u.makeObservable)(ae(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}(t,e),n=t,(o=[{key:"filterByGene",value:function(e){return!this.selectedGenes||this.selectedGenes.includes(e)}},{key:"toggleSignificanceFilter",value:function(){this.significanceFilter=!this.significanceFilter}},{key:"onCheckGene",value:function(e){var t=this.checkedGenes.indexOf(e);-1!==t?this.checkedGenes.splice(t,1):this.checkedGenes.push(e)}},{key:"onGeneNameClick",value:function(e){}},{key:"onSelection",value:function(e){this.selectedGenes=e}},{key:"onSelectionCleared",value:function(){this.selectedGenes=null}},{key:"onChange",value:function(e){this._enrichedGroups=a().map(e,(function(e){return e.value}))}},{key:"render",value:function(){var e=this;if(0===this.props.data.length)return r.createElement("div",{className:"alert alert-info",style:{marginLeft:this.props.containerType===d.WO.ALTERATIONS&&this.props.dashToRight?244:0}},"No data/result available");var t=!(0,re.Ib)().skin_show_settings_menu;return r.createElement("div",{className:f().Container,"data-test":"GroupComparisonAlterationEnrichments"},r.createElement("div",{className:f().ChartsPanel,style:{maxWidth:ne.Z.size.width-60,position:this.props.containerType===d.WO.ALTERATIONS?"relative":"static",zIndex:this.props.containerType===d.WO.ALTERATIONS?1:"auto"}},t&&r.createElement("div",{className:f().inlineAlterationTypeSelectorMenuDash}),this.isTwoGroupAnalysis&&r.createElement(y.Z,{data:(0,d.AA)(this.data,this.props.store?this.props.store.hugoGeneSymbols:[]),xAxisLeftLabel:this.group2.nameOfEnrichmentDirection||this.group2.name,xAxisRightLabel:this.group1.nameOfEnrichmentDirection||this.group1.name,xAxisDomain:15,xAxisTickValues:[-10,0,10],selectedSet:this.selectedGenesSet,onGeneNameClick:this.onGeneNameClick,onSelection:this.onSelection,onSelectionCleared:this.onSelectionCleared}),this.isTwoGroupAnalysis&&r.createElement(R,{data:(0,d.sr)(this.data,this.props.store?this.props.store.hugoGeneSymbols:[],this.group1.name,this.group2.name),xGroupName:this.group1.name,yGroupName:this.group2.name,onGeneNameClick:this.onGeneNameClick,selectedGenesSet:this.selectedGenesSet,onSelection:this.onSelection,onSelectionCleared:this.onSelectionCleared}),r.createElement("div",{style:{maxWidth:this.genePlotMaxWidth}},r.createElement(ee,{data:this.data,isTwoGroupAnalysis:this.isTwoGroupAnalysis,groupOrder:this.props.groups.map((function(e){return e.name})),yAxisLabel:this.geneBarplotYAxislabel,showCNAInTable:this.props.showCNAInTable,categoryToColor:this.categoryToColor,dataStore:this.dataStore}))),r.createElement("div",null,r.createElement("div",null,r.createElement("h3",null,this.props.headerName),this.props.store&&r.createElement(h.Z,{checkedGenes:this.checkedGenes})),r.createElement("div",{className:f().Checkboxes},r.createElement("div",{style:{width:250,marginRight:7}},r.createElement(I.default,{name:"select enrichments level: sample or patient",onChange:function(t){t&&e.props.onSetPatientLevelEnrichments(t.value)},options:[{label:"Patient-level enrichments",value:!0},{label:"Sample-level enrichments",value:!1}],clearable:!1,searchable:!1,value:{label:this.props.patientLevelEnrichments?"Patient-level enrichments":"Sample-level enrichments",value:this.props.patientLevelEnrichments},styles:{control:function(e){return Object.assign(Object.assign({},e),{height:36,minHeight:36,border:"1px solid rgb(204,204,204)"})},menu:function(e){return Object.assign(Object.assign({},e),{maxHeight:400})},menuList:function(e){return Object.assign(Object.assign({},e),{maxHeight:400})},placeholder:function(e){return Object.assign(Object.assign({},e),{color:"#000000"})},dropdownIndicator:function(e){return Object.assign(Object.assign({},e),{color:"#000000"})},option:function(e,t){return Object.assign(Object.assign({},e),{cursor:"pointer"})}},theme:function(e){return Object.assign(Object.assign({},e),{colors:Object.assign(Object.assign({},e.colors),{neutral80:"black"})})}})),r.createElement("div",{style:{width:250,marginRight:7}},r.createElement(w.uH,{name:"groupsSelector",placeholder:"Enriched in ...",onChange:this.onChange,options:this.options,value:this.selectedValues,height:36})),r.createElement("label",{className:"checkbox-inline"},r.createElement("input",{type:"checkbox",checked:this.significanceFilter,onClick:this.toggleSignificanceFilter,"data-test":"SwapAxes"}),"Significant only")),r.createElement(c.Z,{key:this.props.patientLevelEnrichments.toString(),data:this.filteredData,onCheckGene:this.props.store?this.onCheckGene:void 0,checkedGenes:this.props.store?this.checkedGenes:void 0,dataStore:this.dataStore,visibleOrderedColumnNames:this.visibleOrderedColumnNames,customColumns:a().keyBy(this.customColumns,(function(e){return e.name}))})))}},{key:"isTwoGroupAnalysis",get:function(){return 2==this.props.groups.length}},{key:"group1",get:function(){return this.props.groups[0]}},{key:"group2",get:function(){return this.props.groups[1]}},{key:"group1QueriedCasesCount",get:function(){var e=this;return new Set(this.group1.samples.map((function(t){return e.props.patientLevelEnrichments?t.uniquePatientKey:t.uniqueSampleKey}))).size}},{key:"group2QueriedCasesCount",get:function(){var e=this;return new Set(this.group2.samples.map((function(t){return e.props.patientLevelEnrichments?t.uniquePatientKey:t.uniqueSampleKey}))).size}},{key:"data",get:function(){return(0,d.G3)(this.props.data,this.props.store?this.props.store.hugoGeneSymbols:[],this.props.groups)}},{key:"filteredData",get:function(){return(0,d.a)(this.data,this._enrichedGroups,this.significanceFilter,this.filterByGene)}},{key:"customColumns",get:function(){var e=this,t=(0,d.SA)(this.props.groups,this.props.alteredVsUnalteredMode);return this.isTwoGroupAnalysis&&t.push({name:"Alteration Overlap",headerRender:function(){return r.createElement("span",null,"Co-occurrence Pattern")},render:function(t){if(void 0===t.pValue)return r.createElement("span",null,"-");var n=a().map(t.groupsSet),o=n.find((function(t){return t.name===e.props.groups[0].name})),i=n.find((function(t){return t.name===e.props.groups[1].name}));if(!o||!i)throw"No matching groups in Alteration Overlap Cell";var l=e.group1QueriedCasesCount+e.group2QueriedCasesCount,u=e.group1QueriedCasesCount/l*100,c=100-u,p=(e.group1QueriedCasesCount-o.profiledCount)/l*100,f=(o.profiledCount-o.alteredCount)/l*100,d=(e.group2QueriedCasesCount-i.profiledCount)/l*100,y=o.alteredCount/l*100,h=i.alteredCount/l*100;return r.createElement(w.ZD,{destroyTooltipOnHide:!0,trigger:["hover"],overlay:function(){return r.createElement("div",null,r.createElement("h3",null,t.hugoGeneSymbol," ","alterations"," ","in:"),r.createElement("table",{className:"table table-striped"},r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",null,r.createElement("strong",null,o.name,": ")),r.createElement("td",null,o.alteredCount," of"," ",o.profiledCount," of profiled"," ",e.props.patientLevelEnrichments?"patients":"samples"," ","(",s()(o.alteredPercentage).format("0.0"),"%)")),r.createElement("tr",null,r.createElement("td",null,r.createElement("strong",null,i.name,": ")),r.createElement("td",null,i.alteredCount," of"," ",i.profiledCount," of profiled"," ",e.props.patientLevelEnrichments?"patients":"samples"," ","(",s()(i.alteredPercentage).format("0.0"),"%)")))))}},r.createElement("div",{className:"inlineBlock",style:{padding:"3px 0"}},r.createElement(D,{group1Width:u,group2Width:c,group1Unaltered:f,group1Altered:y,group2Altered:h,group1Unprofiled:p,group2Unprofiled:d,group1Color:e.props.groups[0].color,group2Color:e.props.groups[1].color,width:150})))},tooltip:r.createElement("table",null,r.createElement("tr",null,r.createElement("td",null,"Upper row"),r.createElement("td",null,":"," ",this.props.patientLevelEnrichments?"Patients":"Samples"," ","colored according to group.")),r.createElement("tr",null,r.createElement("td",null,"Lower row"),r.createElement("td",null,":"," ",this.props.patientLevelEnrichments?"Patients":"Samples"," ","with an alteration in the listed gene are highlighted.")))}),t}},{key:"visibleOrderedColumnNames",get:function(){var e=[];return e.push(c.n.GENE,c.n.CYTOBAND),this.props.showCNAInTable&&e.push(c.n.ALTERATION),this.props.groups.forEach((function(t){e.push(t.name)})),this.isTwoGroupAnalysis&&(e.push("Alteration Overlap"),e.push(c.n.LOG_RATIO)),e.push(c.n.P_VALUE,c.n.Q_VALUE),this.isTwoGroupAnalysis?e.push(this.props.alteredVsUnalteredMode?c.n.TENDENCY:c.n.ENRICHED):e.push(c.n.MOST_ENRICHED),e}},{key:"selectedGenesSet",get:function(){return a().keyBy(this.selectedGenes||[])}},{key:"selectedValues",get:function(){return this._enrichedGroups.map((function(e){return{value:e}}))}},{key:"options",get:function(){return a().map(this.props.groups,(function(e){return{label:e.nameOfEnrichmentDirection?e.nameOfEnrichmentDirection:e.name,value:e.name}}))}},{key:"genePlotMaxWidth",get:function(){return ne.Z.size.width-(this.isTwoGroupAnalysis?820:40)}},{key:"categoryToColor",get:function(){return a().reduce(this.props.groups,(function(e,t){return t.color&&(e[t.name]=t.color),e}),{})}},{key:"geneBarplotYAxislabel",get:function(){return!this.isAnyMutationTypeSelected||this.isAnyFusionTypeSelected||this.isAnyCnaTypeSelected?!this.isAnyMutationTypeSelected&&this.isAnyFusionTypeSelected&&this.isAnyCnaTypeSelected?"Fusion event frequency":this.isAnyMutationTypeSelected||this.isAnyFusionTypeSelected||this.isAnyCnaTypeSelected?"Alteration event frequency":"Copy-number alteration frequency":"Mutation frequency"}},{key:"isAnyMutationTypeSelected",get:function(){if(!this.props.comparisonStore||!this.props.comparisonStore.selectedMutationEnrichmentEventTypes)return!1;var e=this.props.comparisonStore.selectedMutationEnrichmentEventTypes;return a().some(a().keys(e),(function(t){return e[t]}))}},{key:"isAnyFusionTypeSelected",get:function(){return this.props.comparisonStore&&this.props.comparisonStore.isStructuralVariantEnrichmentSelected}},{key:"isAnyCnaTypeSelected",get:function(){if(!this.props.comparisonStore||!this.props.comparisonStore.selectedCopyNumberEnrichmentEventTypes)return!1;var e=this.props.comparisonStore.selectedCopyNumberEnrichmentEventTypes;return a().some(a().keys(e),(function(t){return e[t]}))}}])&&oe(n.prototype,o),i&&oe(n,i),t}(r.Component);Object.defineProperty(ce,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{showCNAInTable:!1,alteredVsUnalteredMode:!0}}),ue([u.observable],ce.prototype,"significanceFilter",void 0),ue([u.observable.shallow],ce.prototype,"checkedGenes",void 0),ue([u.observable.shallow],ce.prototype,"selectedGenes",void 0),ue([u.observable.ref],ce.prototype,"highlightedRow",void 0),ue([u.observable.ref],ce.prototype,"_enrichedGroups",void 0),ue([u.computed],ce.prototype,"isTwoGroupAnalysis",null),ue([u.computed],ce.prototype,"group1",null),ue([u.computed],ce.prototype,"group2",null),ue([u.computed],ce.prototype,"group1QueriedCasesCount",null),ue([u.computed],ce.prototype,"group2QueriedCasesCount",null),ue([u.computed],ce.prototype,"data",null),ue([u.computed],ce.prototype,"filteredData",null),ue([m.default],ce.prototype,"filterByGene",null),ue([m.default],ce.prototype,"toggleSignificanceFilter",null),ue([m.default],ce.prototype,"onCheckGene",null),ue([m.default],ce.prototype,"onGeneNameClick",null),ue([u.action.bound],ce.prototype,"onSelection",null),ue([u.action.bound],ce.prototype,"onSelectionCleared",null),ue([u.computed],ce.prototype,"customColumns",null),ue([u.computed],ce.prototype,"visibleOrderedColumnNames",null),ue([u.computed],ce.prototype,"selectedGenesSet",null),ue([u.action.bound],ce.prototype,"onChange",null),ue([u.computed],ce.prototype,"selectedValues",null),ue([u.computed],ce.prototype,"options",null),ue([u.computed],ce.prototype,"genePlotMaxWidth",null),ue([u.computed],ce.prototype,"categoryToColor",null),ue([u.computed],ce.prototype,"geneBarplotYAxislabel",null),ue([u.computed],ce.prototype,"isAnyMutationTypeSelected",null),ue([u.computed],ce.prototype,"isAnyFusionTypeSelected",null),ue([u.computed],ce.prototype,"isAnyCnaTypeSelected",null);const pe=ce=ue([o.observer],ce);var fe=n(35770),de=n(36903),ye=n(93527),he=n(57761),me=n(62046);function be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ge(e){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oe(e,t){return(Oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pe(e){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Se=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Pe(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Ee=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==Pe(t)&&"function"!=typeof t?ve(e):t}(this,ge(t).call(this,e)),Object.defineProperty(ve(n),"tabUI",{enumerable:!0,configurable:!0,writable:!0,value:(0,he.BS)((function(){return n.props.store}),(function(){return n.enrichmentsUI}),"alterations",!0,!0,!0)}),Object.defineProperty(ve(n),"useInlineTypeSelectorMenu",{enumerable:!0,configurable:!0,writable:!0,value:!(0,re.Ib)().skin_show_settings_menu}),Object.defineProperty(ve(n),"enrichmentsUI",{enumerable:!0,configurable:!0,writable:!0,value:(0,fe.F)({await:function(){return[n.props.store.alterationsEnrichmentData,n.props.store.alterationsEnrichmentAnalysisGroups,n.props.store.selectedStudyMutationEnrichmentProfileMap,n.props.store.selectedStudyCopyNumberEnrichmentProfileMap,n.props.store.selectedStudyStructuralVariantEnrichmentProfileMap,n.props.store.studies]},render:function(){var e=me.hN;return r.createElement("div",{"data-test":"GroupComparisonAlterationEnrichments"},r.createElement(pe,{data:n.props.store.alterationsEnrichmentData.result,groups:n.props.store.alterationsEnrichmentAnalysisGroups.result,alteredVsUnalteredMode:!1,headerName:e,patientLevelEnrichments:n.props.store.usePatientLevelEnrichments,onSetPatientLevelEnrichments:n.props.store.setUsePatientLevelEnrichments,store:n.props.resultsViewStore,comparisonStore:n.props.store,dashToRight:n.useInlineTypeSelectorMenu}))},renderPending:function(){return r.createElement(de.Z,{center:!0,isLoading:!0,size:"big"})},renderError:function(){return r.createElement(ye.Z,null)}})}),(0,u.makeObservable)(ve(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oe(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){return this.tabUI.component}}])&&be(n.prototype,o),i&&be(n,i),t}(r.Component);const we=Ee=Se([o.observer],Ee)},11037:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>he});var r=n(88034),o=n(27808),i=n(5933),a=n(36903),l=n(78566),s=n(17502),u=n(57930),c=n.n(u),p=n(6240),f=n(3563),d=n(71780),y=n(65587),h=n(26942);function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var P,S=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":O(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};!function(e){e.CLINICAL_ATTRIBUTE_NAME="Clinical Attribute",e.CLINICAL_ATTRIBUTE_TYPE="Attribute Type",e.STATISTICAL_TEST_NAME="Statistical Test",e.SCORE="Score",e.P_VALUE="p-Value",e.Q_VALUE="q-Value"}(P||(P={}));var E=[{name:P.CLINICAL_ATTRIBUTE_NAME,render:function(e){return r.createElement("span",{"data-test":e.clinicalAttribute.displayName,style:{fontWeight:e.qValue<.05?"bold":"normal"}},e.clinicalAttribute.displayName)},filter:function(e,t,n){return e.clinicalAttribute.displayName.toUpperCase().indexOf(n)>-1},sortBy:function(e){return e.clinicalAttribute.displayName},download:function(e){return e.clinicalAttribute.displayName},width:160,visible:!0},{name:P.CLINICAL_ATTRIBUTE_TYPE,render:function(e){return r.createElement("span",null,e.clinicalAttribute.patientAttribute?"Patient":"Sample")},filter:function(e,t,n){return(e.clinicalAttribute.patientAttribute?"Patient":"Sample").toUpperCase().indexOf(n)>-1},sortBy:function(e){return e.clinicalAttribute.patientAttribute?"Patient":"Sample"},download:function(e){return e.clinicalAttribute.patientAttribute?"Patient":"Sample"},width:100,visible:!0},{name:P.STATISTICAL_TEST_NAME,render:function(e){return r.createElement("span",{style:{whiteSpace:"nowrap"}},e.method)},filter:function(e,t,n){return e.method.toUpperCase().indexOf(n)>-1},sortBy:function(e){return e.method},download:function(e){return e.method},width:130,visible:!0},{name:P.P_VALUE,render:function(e){return r.createElement("span",{style:{whiteSpace:"nowrap",fontWeight:e.qValue<.05?"bold":"normal"}},(0,d._M)(e.pValue,3,.01,-10))},sortBy:function(e){return e.pValue},download:function(e){return(0,f.C)(e.pValue,3,.01)},width:100,tooltip:r.createElement("span",null,"p-value of null Hypothesis, derived from Chi-Squared test or Kruskal-Wallis test"),visible:!0},{name:P.Q_VALUE,render:function(e){return r.createElement("span",{style:{whiteSpace:"nowrap",fontWeight:e.qValue<.05?"bold":"normal"}},(0,d._M)(e.qValue,3,.01,-10))},sortBy:function(e){return e.qValue},download:function(e){return(0,f.C)(e.qValue,3,.01)},width:100,tooltip:r.createElement("span",null,"Derived from Benjamini-Hochberg FDR correction procedure."),visible:!0}],w=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?g(e):t}(this,b(t).call(this,e)),Object.defineProperty(g(n),"columnVisibility",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),(0,l.makeObservable)(g(n)),n.columnVisibility=n.initColumnVisibility(),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,e),n=t,(o=[{key:"onRowClick",value:function(e){this.props.dataStore.setHighlighted(e)}},{key:"initColumnVisibility",value:function(){var e=c().keyBy([P.STATISTICAL_TEST_NAME,P.P_VALUE,P.Q_VALUE],(function(e){return e}));return c().mapValues(c().keyBy(E,(function(e){return e.name})),(function(t){return(0,h.Ib)().survival_show_p_q_values_in_survival_type_table?t.visible:!(t.name in e)}))}},{key:"onColumnToggled",value:function(e,t){this.columnVisibility=(0,y.mw)(this.columnVisibility,e,t)}},{key:"render",value:function(){return r.createElement(p.ZP,{columns:E,initialSortColumn:P.Q_VALUE,initialSortDirection:"asc",showColumnVisibility:!0,columnVisibility:this.columnVisibility,columnVisibilityProps:{onColumnToggled:this.onColumnToggled},dataStore:this.props.dataStore,onRowClick:this.onRowClick,paginationProps:{itemsPerPageOptions:[20]},initialItemsPerPage:20,copyDownloadProps:{showCopy:!1}})}}])&&m(n.prototype,o),i&&m(n,i),t}(r.Component);S([i.default],w.prototype,"onRowClick",null),S([l.observable],w.prototype,"columnVisibility",void 0),S([i.default],w.prototype,"onColumnToggled",null);const k=w=S([o.observer],w);var x=n(41940),C=n(67145),j=n(17163),T=n(72685),_=n.n(T),G=n(42539),A=n.n(G);function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var I=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":N(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},V=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?L(e):t}(this,M(t).call(this,e)),Object.defineProperty(L(n),"scrollbarEl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(L(n),"visible",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(L(n),"handleWidth",{enumerable:!0,configurable:!0,writable:!0,value:"10%"}),(0,l.makeObservable)(L(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,e),n=t,(o=[{key:"doScroll",value:function(e){this.overflow>0&&(this.scrollEl.style.left=e*this.overflow*-1+"px")}},{key:"componentDidMount",value:function(){this.updateScrollbar()}},{key:"componentDidUpdate",value:function(){this.updateScrollbar()}},{key:"updateScrollbar",value:function(){var e=this;setTimeout((function(){e.overflow>0&&(0,l.runInAction)((function(){e.visible=!0;var t=e.scrollEl.parentNode.offsetWidth/e.scrollEl.offsetWidth;e.handleWidth=75*t+"%"}))}),1)}},{key:"handleDragEvent",value:function(e,t){var n=t.node,r=t.x/(n.parentNode.offsetWidth-n.offsetWidth);r=(r=r>1?1:r)<0?0:r,this.props.onScroll&&this.props.onScroll({percentage:r}),this.doScroll(r)}},{key:"render",value:function(){var e=this,t=Object.assign({},{visibility:this.visible?"visible":"hidden"},this.props.style);return r.createElement("div",{className:A().scrollbar,style:t,ref:function(t){return e.scrollbarEl=t}},r.createElement(_(),{bounds:"parent",onDrag:this.handleDragEvent},r.createElement("div",{className:A().handle,style:{width:this.handleWidth}})))}},{key:"scrollEl",get:function(){return this.props.getScrollEl()}},{key:"overflow",get:function(){return this.scrollEl.offsetWidth-this.scrollEl.parentNode.offsetWidth}}])&&R(n.prototype,o),i&&R(n,i),t}(r.Component);I([l.observable],V.prototype,"visible",void 0),I([l.observable],V.prototype,"handleWidth",void 0),I([i.default],V.prototype,"handleDragEvent",null);const B=V=I([o.observer],V);var U=n(91989),F=n(58839),W=n(57761),z=n(79623),q=n(92977),Z=n(35770),H=n(9804),Q=n(75508),K=n(93527),Y=n(80320),$=n(63443);function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e,t,n){return t&&X(e.prototype,t),n&&X(e,n),e}function ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function te(e,t){return!t||"object"!==ae(t)&&"function"!=typeof t?ne(e):t}function ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ae(e){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var le,se=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ae(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ue=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function l(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}s((r=r.apply(e,t||[])).next())}))},ce="clinical-plot-svg",pe=function(e){function t(){return ee(this,t),te(this,re(t).apply(this,arguments))}return oe(t,e),t}(U.Z),fe=function(e){function t(e,n,r){var o;return ee(this,t),o=te(this,re(t).call(this,e)),Object.defineProperty(ne(o),"setHighlighted",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(ne(o),"reactionDisposer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),o.dataHighlighter=function(e){var t=n();return!(!t||e.clinicalAttribute.clinicalAttributeId!==t.clinicalAttribute.clinicalAttributeId)},o.reactionDisposer=(0,l.autorun)((function(){o.sortMetric&&o.sortedFilteredData.length>0&&!n()&&o.setHighlighted(o.sortedFilteredData[0])})),o}return oe(t,e),J(t,[{key:"destroy",value:function(){this.reactionDisposer()}}]),t}(s.Lq);!function(e){e.Bar="Bar",e.StackedBar="StackedBar",e.PercentageStackedBar="PercentageStackedBar"}(le||(le={}));var de=[{value:le.Bar,label:"Bar chart"},{value:le.StackedBar,label:"Stacked bar chart"},{value:le.PercentageStackedBar,label:"100% stacked bar chart"}],ye=function(e){function t(e){var n;return ee(this,t),n=te(this,re(t).call(this,e)),Object.defineProperty(ne(n),"highlightedRow",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(ne(n),"scrollPane",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(ne(n),"tabUI",{enumerable:!0,configurable:!0,writable:!0,value:(0,Z.F)({await:function(){var e=[n.props.store.activeGroups];return n.props.store.activeGroups.isComplete&&n.props.store.activeGroups.result.length<2||e.push(n.overlapUI),e},render:function(){var e=[];return n.props.store.activeGroups.result.length<2?e.push(r.createElement("span",null,(0,W.pv)(n.props.store._activeGroupsNotOverlapRemoved.result.length))):(e.push(r.createElement("div",{className:"tabMessageContainer"},(0,W.PK)(),r.createElement(H.Z,{store:n.props.store}))),e.push(n.overlapUI.component)),r.createElement("div",{"data-test":"ComparisonPageClinicalTabDiv"},e)},renderPending:function(){return r.createElement(a.Z,{isLoading:!0,center:!0,size:"big"})},renderError:function(){return r.createElement(K.Z,null)}})}),Object.defineProperty(ne(n),"overlapUI",{enumerable:!0,configurable:!0,writable:!0,value:(0,Z.F)({await:function(){return[n.props.store.clinicalDataEnrichmentsWithQValues]},render:function(){return r.createElement("div",{className:"clearfix",style:{display:"flex"}},r.createElement("div",{style:{width:"600px"}},r.createElement(k,{dataStore:n.tableDataStore})),r.createElement("div",{style:{marginLeft:"10px"}},n.getUtilitiesMenu,n.plot))},renderPending:function(){return r.createElement(a.Z,{isLoading:!0,centerRelativeToContainer:!0,size:"big"})},renderError:function(){return r.createElement(K.Z,null)}})}),Object.defineProperty(ne(n),"tableDataStore",{enumerable:!0,configurable:!0,writable:!0,value:new fe((function(){var e=(0,$.Nj)(n.props.store.survivalClinicalAttributesPrefix.result||[]),t={AGE_LAST_FU_YEARS:"AGE_LAST_FU_YEARS",BIRTH_YEAR:"BIRTH_YEAR"};return n.props.store.clinicalDataEnrichmentsWithQValues.result.filter((function(n){return!(n.clinicalAttribute.clinicalAttributeId in e)&&!(n.clinicalAttribute.clinicalAttributeId in t)}))}),(function(){return n.highlightedRow}),(function(e){n.highlightedRow=e,n.swapAxes=!1,n.logScale=!1}))}),Object.defineProperty(ne(n),"logScale",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(ne(n),"logScaleFunction",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(ne(n),"swapAxes",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(ne(n),"horizontalBars",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(ne(n),"showNA",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(ne(n),"clinicalDataPromiseFiltered",{enumerable:!0,configurable:!0,writable:!0,value:(0,y.$w)({await:function(){return[n.clinicalDataPromise,n.props.store.samples]},invoke:function(){var e=n.clinicalDataPromise.result;if(n.showNA&&"string"===e.datatype&&n.props.store.samples.result.length>0){var t=c().difference(c().uniq(n.props.store.samples.result.map((function(e){return e.uniqueSampleKey}))),c().uniq(e.data.map((function(e){return e.uniqueSampleKey}))));return Promise.resolve(Object.assign(Object.assign({},e),{data:e.data.concat(t.map((function(e){return{uniqueSampleKey:e,value:"NA"}})))}))}return Promise.resolve(Object.assign(Object.assign({},e),{data:e.data.filter((function(e){return"string"!=typeof e.value||c().every((0,h.Ib)().comparison_categorical_na_values.split("|"),(function(t){return t.toLowerCase()!==e.value.toLowerCase()}))}))}))}})}),Object.defineProperty(ne(n),"clinicalDataPromise",{enumerable:!0,configurable:!0,writable:!0,value:(0,y.$w)({await:function(){return[n.props.store.patientKeyToSamples,n.props.store.activeGroups]},invoke:function(){return ue(ne(n),void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r,o,i,a,l,s,u,p,f,d,y,h,m,b,g,v,O,P,S,E,w,k,x,j,T,_,G,A,R,M,L,D,N,I,V,B,U,F;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={data:[],datatype:"string"},!this.highlightedRow){e.next=117;break}return n=this.highlightedRow.clinicalAttribute,r=this.props.store.patientKeyToSamples.result,o=c().flatMap(this.props.store.activeGroups.result,(function(e){return c().flatMap(e.studies,(function(e){return e.samples.map((function(t){return{studyId:e.id,entityId:t}}))}))})),i=c().flatMap(this.props.store.activeGroups.result,(function(e){return c().flatMap(e.studies,(function(e){return e.patients.map((function(t){return{studyId:e.id,entityId:t}}))}))})),e.next=8,C.Z.fetchClinicalDataUsingPOST({clinicalDataType:n.patientAttribute?"PATIENT":"SAMPLE",clinicalDataMultiStudyFilter:{attributeIds:[n.clinicalAttributeId],identifiers:n.patientAttribute?i:o}});case 8:for(a=e.sent,l={},s=!0,u=!1,p=void 0,e.prev=13,f=a[Symbol.iterator]();!(s=(d=f.next()).done);s=!0)y=d.value,h=y.value.toLowerCase(),void 0===l[h]&&(l[h]=y.value);e.next=21;break;case 17:e.prev=17,e.t0=e.catch(13),u=!0,p=e.t0;case 21:e.prev=21,e.prev=22,s||null==f.return||f.return();case 24:if(e.prev=24,!u){e.next=27;break}throw p;case 27:return e.finish(24);case 28:return e.finish(21);case 29:if(t.datatype=n.datatype.toLowerCase(),m=t.data,!n.patientAttribute){e.next=78;break}b=!0,g=!1,v=void 0,e.prev=35,O=a[Symbol.iterator]();case 37:if(b=(P=O.next()).done){e.next=62;break}for(S=P.value,E=r[S.uniquePatientKey],w=!0,k=!1,x=void 0,e.prev=43,j=E[Symbol.iterator]();!(w=(T=j.next()).done);w=!0)_=T.value,m.push({uniqueSampleKey:_.uniqueSampleKey,value:l[S.value.toLowerCase()]});e.next=51;break;case 47:e.prev=47,e.t1=e.catch(43),k=!0,x=e.t1;case 51:e.prev=51,e.prev=52,w||null==j.return||j.return();case 54:if(e.prev=54,!k){e.next=57;break}throw x;case 57:return e.finish(54);case 58:return e.finish(51);case 59:b=!0,e.next=37;break;case 62:e.next=68;break;case 64:e.prev=64,e.t2=e.catch(35),g=!0,v=e.t2;case 68:e.prev=68,e.prev=69,b||null==O.return||O.return();case 71:if(e.prev=71,!g){e.next=74;break}throw v;case 74:return e.finish(71);case 75:return e.finish(68);case 76:e.next=97;break;case 78:for(G=!0,A=!1,R=void 0,e.prev=81,M=a[Symbol.iterator]();!(G=(L=M.next()).done);G=!0)D=L.value,m.push({uniqueSampleKey:D.uniqueSampleKey,value:l[D.value.toLowerCase()]});e.next=89;break;case 85:e.prev=85,e.t3=e.catch(81),A=!0,R=e.t3;case 89:e.prev=89,e.prev=90,G||null==M.return||M.return();case 92:if(e.prev=92,!A){e.next=95;break}throw R;case 95:return e.finish(92);case 96:return e.finish(89);case 97:if("number"!==n.datatype.toLowerCase()){e.next=117;break}for(N=!0,I=!1,V=void 0,e.prev=101,B=m[Symbol.iterator]();!(N=(U=B.next()).done);N=!0)(F=U.value).value=parseFloat(F.value);e.next=109;break;case 105:e.prev=105,e.t4=e.catch(101),I=!0,V=e.t4;case 109:e.prev=109,e.prev=110,N||null==B.return||B.return();case 112:if(e.prev=112,!I){e.next=115;break}throw V;case 115:return e.finish(112);case 116:return e.finish(109);case 117:return e.abrupt("return",Promise.resolve(t));case 118:case"end":return e.stop()}}),e,this,[[13,17,21,29],[22,,24,28],[35,64,68,76],[43,47,51,59],[52,,54,58],[69,,71,75],[81,85,89,97],[90,,92,96],[101,105,109,117],[110,,112,116]])})))}})}),Object.defineProperty(ne(n),"groupMembershipAxisData",{enumerable:!0,configurable:!0,writable:!0,value:(0,y.$w)({await:function(){return[n.props.store.sampleMap,n.props.store.activeGroups]},invoke:function(){return ue(ne(n),void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c().map(this.props.store.activeGroups.result,(function(e){return e.nameWithOrdinal})),n={data:[],datatype:"string",categoryOrder:t},r=this.props.store.sampleMap.result||new Y.Z,o=c().reduce(this.props.store.activeGroups.result,(function(e,t){return t.studies.forEach((function(n){n.samples.forEach((function(o){if(r.has({studyId:n.id,sampleId:o})){var i=r.get({studyId:n.id,sampleId:o}).uniqueSampleKey;void 0===e[i]&&(e[i]={uniqueSampleKey:i,value:[]}),e[i].value.push(t.nameWithOrdinal)}}))})),e}),{}),n.data=c().values(o),e.abrupt("return",Promise.resolve(n));case 6:case"end":return e.stop()}}),e,this)})))}})}),Object.defineProperty(ne(n),"boxPlotData",{enumerable:!0,configurable:!0,writable:!0,value:(0,y.$w)({await:function(){return[n.horzAxisDataPromise,n.vertAxisDataPromise,n.props.store.sampleKeyToSample]},invoke:function(){var e=n.horzAxisDataPromise.result,t=n.vertAxisDataPromise.result;if(e&&t){var r,o,i;if((0,j.ev)(e)&&(0,j.JA)(t))r=t,o=e,i=!0;else{if(!(0,j.JA)(e)||!(0,j.ev)(t))return Promise.resolve({horizontal:!1,data:[]});r=e,o=t,i=!1}return Promise.resolve({horizontal:i,data:(0,j.Qq)(r,o,n.props.store.sampleKeyToSample.result,{},void 0,void 0)})}return new Promise((function(){return 0}))}})}),Object.defineProperty(ne(n),"plotType",{enumerable:!0,configurable:!0,writable:!0,value:le.PercentageStackedBar}),(0,l.makeObservable)(ne(n)),n}return oe(t,e),J(t,[{key:"getScrollPane",value:function(){return this.scrollPane}},{key:"onClickLogScale",value:function(){if(this.logScale=!this.logScale,this.logScale){this.logScaleFunction={label:"log2",fLogScale:function(e,t){return Math.log2(Math.max(e,.01))},fInvLogScale:function(e){return Math.pow(2,e)}}}else this.logScaleFunction=void 0}},{key:"onClickSwapAxes",value:function(){this.swapAxes=!this.swapAxes}},{key:"onClickhorizontalBars",value:function(){this.horizontalBars=!this.horizontalBars}},{key:"onClickShowNA",value:function(){this.showNA=!this.showNA}},{key:"getSvg",value:function(){return document.getElementById(ce)}},{key:"assignScrollPaneRef",value:function(e){this.scrollPane=e}},{key:"onPlotTypeSelect",value:function(e){this.plotType=e.value}},{key:"toolbar",value:function(){return r.createElement("div",{style:{textAlign:"center",position:"relative"}},r.createElement(y.t_,{getSvg:this.getSvg,filename:ce,dontFade:!0,type:"button",style:{position:"absolute",right:0,top:0}}))}},{key:"componentWillUnmount",value:function(){this.tableDataStore.destroy()}},{key:"render",value:function(){return this.tabUI.component}},{key:"showLogScaleControls",get:function(){return"number"===this.highlightedRow.clinicalAttribute.datatype.toLowerCase()}},{key:"vertAxisDataPromise",get:function(){return this.swapAxes?this.groupMembershipAxisData:this.clinicalDataPromiseFiltered}},{key:"horzAxisDataPromise",get:function(){return this.swapAxes?this.clinicalDataPromiseFiltered:this.groupMembershipAxisData}},{key:"horzLabel",get:function(){return this.swapAxes?"".concat(this.highlightedRow.clinicalAttribute.displayName).concat(this.logScale?" (log2)":""):"Group"}},{key:"vertLabel",get:function(){return this.swapAxes?"Group":"".concat(this.highlightedRow.clinicalAttribute.displayName).concat(this.logScale?" (log2)":"")}},{key:"scatterPlotTooltip",get:function(){var e=this;return function(t){var n=r.createElement("span",null);return e.boxPlotData.isComplete&&(n=(0,j.jU)(t,e.props.store.activeStudyIdToStudy.result,e.boxPlotData.result.horizontal)),n}}},{key:"boxPlotTooltip",get:function(){var e=this;return function(t){return r.createElement("table",{className:"table table-striped"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{colSpan:2},e.boxPlotData.result.data[t.eventKey].label))),r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",null,"Maximum"),r.createElement("td",null,t.max)),r.createElement("tr",null,r.createElement("td",null,"75% (q3)"),r.createElement("td",null,t.q3)),r.createElement("tr",null,r.createElement("td",null,"Median"),r.createElement("td",null,t.median)),r.createElement("tr",null,r.createElement("td",null,"25% (q1)"),r.createElement("td",null,t.q1)),r.createElement("tr",null,r.createElement("td",null,"Minimum"),r.createElement("td",null,t.min))))}}},{key:"categoryToColor",get:function(){return c().reduce(this.props.store.uidToGroup.result,(function(e,t){return e[t.nameWithOrdinal]=t.color,e}),Q.tX)}},{key:"getUtilitiesMenu",get:function(){return this.highlightedRow?r.createElement("div",{style:{marginBottom:"10px"}},!this.showLogScaleControls&&r.createElement("div",{className:"form-group",style:{display:"flex",alignItems:"center"}},r.createElement("label",null,"Plot Type"),r.createElement("div",{style:{width:240,marginLeft:5},"data-test":"plotTypeSelector"},r.createElement(q.default,{name:"discrete-vs-discrete-plot-type",value:this.plotType,onChange:this.onPlotTypeSelect,options:de,clearable:!1,searchable:!0}))),r.createElement("div",null,r.createElement("label",{className:"checkbox-inline"},r.createElement("input",{type:"checkbox",checked:this.swapAxes,onClick:this.onClickSwapAxes,"data-test":"SwapAxes"}),"Swap Axes"),!this.showLogScaleControls&&r.createElement("label",{className:"checkbox-inline"},r.createElement("input",{type:"checkbox",name:"horizontalBars",checked:this.horizontalBars,onClick:this.onClickhorizontalBars,"data-test":"HorizontalBars"}),"Horizontal Bars"),this.showLogScaleControls&&r.createElement("label",{className:"checkbox-inline"},r.createElement("input",{type:"checkbox",checked:this.logScale,onClick:this.onClickLogScale,"data-test":"logScale"}),"Log Scale"),this.clinicalDataPromise.result&&"string"===this.clinicalDataPromise.result.datatype&&r.createElement("label",{className:"checkbox-inline"},r.createElement("input",{type:"checkbox",checked:this.showNA,onClick:this.onClickShowNA,"data-test":"showNA"}),"Show NA"))):r.createElement("span",null)}},{key:"plot",get:function(){if(0===this.tableDataStore.allData.length||!this.highlightedRow)return r.createElement("span",null);var e=[this.horzAxisDataPromise,this.vertAxisDataPromise],t=x.CX.apply(void 0,e),n=this.plotType===le.PercentageStackedBar,i=n||this.plotType===le.StackedBar;switch(t){case"pending":return r.createElement(a.Z,{center:!0,isLoading:!0,size:"big"});case"error":return r.createElement("span",null,"Error loading plot data.");default:if(!this.horzAxisDataPromise.result||!this.vertAxisDataPromise.result)return r.createElement("span",null,"Error loading plot data.");var l=null;if("number"===this.highlightedRow.clinicalAttribute.datatype.toLowerCase()){if(!this.boxPlotData.isComplete)return this.boxPlotData.isError?r.createElement("span",null,"Error loading plot data."):r.createElement(a.Z,{center:!0,isLoading:!0,size:"big"});l=r.createElement(pe,{svgId:ce,domainPadding:75,boxWidth:this.boxPlotData.result.data.length>7?30:60,axisLabelX:this.horzLabel,axisLabelY:this.vertLabel,data:this.boxPlotData.result.data,chartBase:500,scatterPlotTooltip:this.scatterPlotTooltip,boxPlotTooltip:this.boxPlotTooltip,horizontal:this.boxPlotData.result.horizontal,logScale:this.logScaleFunction,size:F.kl,fill:j.g_.fill,stroke:j.g_.stroke,strokeOpacity:j.g_.strokeOpacity,symbol:"circle",useLogSpaceTicks:!0,legendLocationWidthThreshold:550})}else l=r.createElement(z.Z,{svgId:ce,horzData:this.horzAxisDataPromise.result.data,vertData:this.vertAxisDataPromise.result.data,horzCategoryOrder:this.horzAxisDataPromise.result.categoryOrder,vertCategoryOrder:this.vertAxisDataPromise.result.categoryOrder,categoryToColor:this.categoryToColor,barWidth:20,domainPadding:20,chartBase:500,axisLabelX:this.horzLabel,axisLabelY:this.vertLabel,legendLocationWidthThreshold:450,ticksCount:6,horizontalBars:this.horizontalBars,percentage:n,stacked:i});return r.createElement("div",{"data-test":"ClinicalTabPlotDiv",className:"borderedChart posRelative",style:{marginBottom:10}},r.createElement(B,{style:{position:"relative",top:-5},getScrollEl:this.getScrollPane}),r.createElement(o.Observer,null,this.toolbar),r.createElement("div",{ref:this.assignScrollPaneRef,style:{position:"relative",display:"inline-block"}},l))}}}]),t}(r.Component);se([l.observable.ref],ye.prototype,"highlightedRow",void 0),se([i.default],ye.prototype,"getScrollPane",null),se([l.computed],ye.prototype,"showLogScaleControls",null),se([l.observable],ye.prototype,"logScale",void 0),se([l.observable],ye.prototype,"logScaleFunction",void 0),se([l.observable],ye.prototype,"swapAxes",void 0),se([l.observable],ye.prototype,"horizontalBars",void 0),se([l.observable],ye.prototype,"showNA",void 0),se([l.action.bound],ye.prototype,"onClickLogScale",null),se([l.action.bound],ye.prototype,"onClickSwapAxes",null),se([l.action.bound],ye.prototype,"onClickhorizontalBars",null),se([l.action.bound],ye.prototype,"onClickShowNA",null),se([l.computed],ye.prototype,"vertAxisDataPromise",null),se([l.computed],ye.prototype,"horzAxisDataPromise",null),se([l.computed],ye.prototype,"horzLabel",null),se([l.computed],ye.prototype,"vertLabel",null),se([i.default],ye.prototype,"getSvg",null),se([i.default],ye.prototype,"assignScrollPaneRef",null),se([l.computed],ye.prototype,"scatterPlotTooltip",null),se([l.computed],ye.prototype,"boxPlotTooltip",null),se([l.computed],ye.prototype,"categoryToColor",null),se([l.observable],ye.prototype,"plotType",void 0),se([l.action.bound],ye.prototype,"onPlotTypeSelect",null),se([l.computed],ye.prototype,"getUtilitiesMenu",null),se([l.computed],ye.prototype,"plot",null),se([i.default],ye.prototype,"toolbar",null);const he=ye=se([o.observer],ye)},19046:(e,t,n)=>{"use strict";n.d(t,{Z:()=>$});var r=n(88034),o=n(27808),i=n(5933),a=n(35770),l=n(36903),s=n(93527),u=n(57761),c=n(78566),p=n(21958),f=n.n(p),d=n(78631),y=n(57930),h=n.n(y),m=n(65587),b=n(44650);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var S=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=function(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?O(e):t}(this,v(t).call(this,e)),Object.defineProperty(O(o),"setHighlighted",{enumerable:!0,configurable:!0,writable:!0,value:r}),o.dataHighlighter=function(e){var t=n();return!(!t||e.stableId!==t.stableId)},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,e),t}(n(17502).Lq),E=n(30188),w=n(98821),k=n(79666);function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var G=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":_(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},A=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?j(e):t}(this,C(t).call(this,e)),(0,c.makeObservable)(j(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,e),n=t,(r=[{key:"handleSelectionCleared",value:function(){this.tooltipModel&&this.props.onGenericAssayEntityClick(this.tooltipModel.stableId),this.props.onSelectionCleared()}},{key:"handleSelection",value:function(e,t,n){this.props.onSelection(e[0].data.map((function(e){return e.stableId})))}},{key:"genericAssayEntityTitle",get:function(){var e,t;return this.props.genericAssayType?(null===(t=null===(e=w.k.genericAssayConfigByType[this.props.genericAssayType])||void 0===e?void 0:e.globalConfig)||void 0===t?void 0:t.entityTitle)||(0,k._y)(this.props.genericAssayType):""}},{key:"tooltipTitle",get:function(){return"".concat(this.genericAssayEntityTitle,": ").concat((0,k.kr)(this.tooltipModel.stableId,this.tooltipModel.entityName))}},{key:"scatterFillColorFunction",get:function(){var e=this;return function(t){return t.stableId in e.props.selectedSet?"#FE9929":t.qValue<.05?"#58ACFA":"#D3D3D3"}}}])&&x(n.prototype,r),o&&x(n,o),t}(n(70245).Z);function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}G([i.default],A.prototype,"handleSelectionCleared",null);var I=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":N(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},V=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?L(e):t}(this,M(t).call(this,e)),Object.defineProperty(L(n),"significanceFilter",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(L(n),"clickedEntityStableId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(L(n),"selectedStableIds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(L(n),"highlightedRow",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(L(n),"_enrichedGroups",{enumerable:!0,configurable:!0,writable:!0,value:n.props.groups.map((function(e){return e.name}))}),Object.defineProperty(L(n),"dataStore",{enumerable:!0,configurable:!0,writable:!0,value:new S((function(){return n.filteredData}),(function(){return n.highlightedRow}),(function(e){n.highlightedRow=e}))}),(0,c.makeObservable)(L(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,e),n=t,(o=[{key:"filterByStableId",value:function(e){return!this.selectedStableIds||this.selectedStableIds.includes(e)}},{key:"toggleSignificanceFilter",value:function(){this.significanceFilter=!this.significanceFilter}},{key:"onEntityClick",value:function(e){this.clickedEntityStableId=e}},{key:"onSelection",value:function(e){this.selectedStableIds=e}},{key:"onSelectionCleared",value:function(){this.selectedStableIds=null}},{key:"onChange",value:function(e){this._enrichedGroups=h().map(e,(function(e){return e.value}))}},{key:"render",value:function(){if(0===this.props.data.length)return r.createElement("div",{className:"alert alert-info"},"No data/result available");var e=(0,d.lN)(this.data),t=h().maxBy(e,(function(e){return Math.ceil(Math.abs(e.x))}));return r.createElement("div",{className:f().Container},r.createElement("div",{className:f().ChartsPanel},this.isTwoGroupAnalysis&&r.createElement(A,{data:e,selectedSet:this.selectedEntitiesSet,xAxisLeftLabel:this.group2.nameOfEnrichmentDirection||this.group2.name,xAxisRightLabel:this.group1.nameOfEnrichmentDirection||this.group1.name,xAxisDomain:Math.ceil(Math.abs(t.x)),xAxisTickValues:null,onGenericAssayEntityClick:this.onEntityClick,onSelection:this.onSelection,onSelectionCleared:this.onSelectionCleared,genericAssayType:this.props.genericAssayType}),r.createElement(E.Z,{selectedProfile:this.props.selectedProfile,groups:this.props.groups,sampleKeyToSample:this.props.sampleKeyToSample,selectedRow:this.selectedRow,genericAssayType:this.props.genericAssayType})),r.createElement("div",{className:f().TableContainer},r.createElement("hr",{style:{marginTop:0,marginBottom:5,borderWidth:2}}),r.createElement("div",{className:f().Checkboxes},r.createElement("div",{style:{width:250,marginRight:7}},r.createElement(m.uH,{name:"groupsSelector",placeholder:"High in ...",onChange:this.onChange,options:this.options,value:this.selectedValues})),r.createElement("div",{className:f().FlexCheckbox},r.createElement("label",null,r.createElement("input",{type:"checkbox",checked:this.significanceFilter,onClick:this.toggleSignificanceFilter}),"Significant only"))),r.createElement(b.Z,{data:this.filteredData,onEntityClick:this.onEntityClick,dataStore:this.dataStore,mutexTendency:this.props.alteredVsUnalteredMode,visibleOrderedColumnNames:this.visibleOrderedColumnNames,customColumns:h().keyBy(this.customColumns,(function(e){return e.uniqueName||e.name})),genericAssayType:this.props.genericAssayType})))}},{key:"data",get:function(){return(0,d.kr)(this.props.data,this.props.groups)}},{key:"filteredData",get:function(){return(0,d.a)(this.data,this._enrichedGroups,this.significanceFilter,this.filterByStableId,!0)}},{key:"group1",get:function(){return this.props.groups[0]}},{key:"group2",get:function(){return this.props.groups[1]}},{key:"selectedEntitiesSet",get:function(){return h().keyBy(this.selectedStableIds||[])}},{key:"isTwoGroupAnalysis",get:function(){return 2==this.props.groups.length}},{key:"customColumns",get:function(){return(0,d.TF)(this.props.groups,this.props.alteredVsUnalteredMode)}},{key:"visibleOrderedColumnNames",get:function(){var e=[];return e.push(b.N.ENTITY_ID),this.props.groups.forEach((function(t){e.push(t.name+" mean")})),this.props.groups.forEach((function(t){e.push(t.name+" standard deviation")})),this.isTwoGroupAnalysis&&e.push(b.N.LOG_RATIO),e.push(b.N.P_VALUE,b.N.Q_VALUE),this.isTwoGroupAnalysis&&this.props.alteredVsUnalteredMode?e.push(b.N.TENDENCY):e.push(b.N.EXPRESSED),e}},{key:"selectedValues",get:function(){return this._enrichedGroups.map((function(e){return{value:e}}))}},{key:"options",get:function(){return h().map(this.props.groups,(function(e){return{label:e.nameOfEnrichmentDirection?e.nameOfEnrichmentDirection:e.name,value:e.name}}))}},{key:"selectedRow",get:function(){var e=this;if(this.clickedEntityStableId)return this.props.data.filter((function(t){return t.stableId===e.clickedEntityStableId}))[0]}}])&&R(n.prototype,o),i&&R(n,i),t}(r.Component);Object.defineProperty(V,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{alteredVsUnalteredMode:!0}}),I([c.observable],V.prototype,"significanceFilter",void 0),I([c.observable.ref],V.prototype,"clickedEntityStableId",void 0),I([c.observable.ref],V.prototype,"selectedStableIds",void 0),I([c.observable.ref],V.prototype,"highlightedRow",void 0),I([c.observable.ref],V.prototype,"_enrichedGroups",void 0),I([c.computed],V.prototype,"data",null),I([c.computed],V.prototype,"filteredData",null),I([i.default],V.prototype,"filterByStableId",null),I([i.default],V.prototype,"toggleSignificanceFilter",null),I([i.default],V.prototype,"onEntityClick",null),I([i.default],V.prototype,"onSelection",null),I([i.default],V.prototype,"onSelectionCleared",null),I([c.computed],V.prototype,"group1",null),I([c.computed],V.prototype,"group2",null),I([c.computed],V.prototype,"selectedEntitiesSet",null),I([c.computed],V.prototype,"isTwoGroupAnalysis",null),I([c.computed],V.prototype,"customColumns",null),I([c.computed],V.prototype,"visibleOrderedColumnNames",null),I([c.action.bound],V.prototype,"onChange",null),I([c.computed],V.prototype,"selectedValues",null),I([c.computed],V.prototype,"options",null),I([c.computed],V.prototype,"selectedRow",null);const B=V=I([o.observer],V);var U=n(18648);function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e,t){return!t||"object"!==Q(t)&&"function"!=typeof t?Z(e):t}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var K=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Q(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Y=function(e){function t(){var e;return F(this,t),e=z(this,q(t).apply(this,arguments)),Object.defineProperty(Z(e),"tabUI",{enumerable:!0,configurable:!0,writable:!0,value:(0,u.BS)((function(){return e.props.store}),(function(){return e.enrichmentsUI}),e.props.genericAssayType,!0,!0,!1)}),Object.defineProperty(Z(e),"enrichmentsUI",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.F)({await:function(){var t=[e.props.store.gaEnrichmentDataByAssayType,e.props.store.selectedGenericAssayEnrichmentProfileMapGroupedByGenericAssayType,e.props.store.gaEnrichmentGroupsByAssayType,e.props.store.studies];return e.props.store.gaEnrichmentDataByAssayType.isComplete&&e.props.store.gaEnrichmentDataByAssayType.result[e.props.genericAssayType]&&t.push(e.props.store.gaEnrichmentDataByAssayType.result[e.props.genericAssayType]),t},render:function(){var t=Object.keys(e.props.store.selectedGenericAssayEnrichmentProfileMapGroupedByGenericAssayType.result[e.props.genericAssayType])[0],n=e.props.store.selectedGenericAssayEnrichmentProfileMapGroupedByGenericAssayType.result[e.props.genericAssayType][t];return r.createElement("div",{"data-test":"GroupComparisonGenericAssayEnrichments"},r.createElement(U.Z,{dataSets:e.props.store.genericAssayEnrichmentProfilesGroupedByGenericAssayType.result[e.props.genericAssayType],onChange:e.onChangeProfile,selectedProfileByStudyId:e.props.store.selectedGenericAssayEnrichmentProfileMapGroupedByGenericAssayType.result[e.props.genericAssayType],alwaysShow:!0,studies:e.props.store.studies.result,showDescription:!0}),r.createElement(B,{data:e.props.store.gaEnrichmentDataByAssayType.result[e.props.genericAssayType].result,groups:e.props.store.gaEnrichmentGroupsByAssayType.result[e.props.genericAssayType],selectedProfile:n,alteredVsUnalteredMode:!1,sampleKeyToSample:e.props.store.sampleKeyToSample.result,genericAssayType:e.props.genericAssayType}))},renderPending:function(){return r.createElement(l.Z,{center:!0,isLoading:!0,size:"big"})},renderError:function(){return r.createElement(s.Z,null)}})}),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(t,e),n=t,(o=[{key:"onChangeProfile",value:function(e){this.props.store.setGenericAssayEnrichmentProfileMap(e,this.props.genericAssayType)}},{key:"render",value:function(){return this.tabUI.component}}])&&W(n.prototype,o),i&&W(n,i),t}(r.Component);K([i.default],Y.prototype,"onChangeProfile",null);const $=Y=K([o.observer],Y)},94745:(e,t,n)=>{"use strict";n.d(t,{Z:()=>S});var r=n(88034),o=n(27808),i=n(5933),a=n(35770),l=n(18648),s=n(36903),u=n(93527),c=n(79083),p=n(57761),f=n(78631);function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?b(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var O=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":v(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},P=function(e){function t(){var e;return d(this,t),e=h(this,m(t).apply(this,arguments)),Object.defineProperty(b(e),"tabUI",{enumerable:!0,configurable:!0,writable:!0,value:(0,p.BS)((function(){return e.props.store}),(function(){return e.enrichmentsUI}),"mRNA",!0,!0,!1)}),Object.defineProperty(b(e),"enrichmentsUI",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.F)({await:function(){return[e.props.store.mRNAEnrichmentData,e.props.store.selectedmRNAEnrichmentProfileMap,e.props.store.mrnaEnrichmentAnalysisGroups,e.props.store.studies,e.props.store.sampleKeyToSample,e.props.store.mRNAEnrichmentProfiles]},render:function(){var t=Object.keys(e.props.store.selectedmRNAEnrichmentProfileMap.result),n=e.props.store.selectedmRNAEnrichmentProfileMap.result[t[0]];return r.createElement("div",{"data-test":"GroupComparisonMRNAEnrichments"},r.createElement(l.Z,{dataSets:e.props.store.mRNAEnrichmentProfiles.result,onChange:e.onChangeProfile,selectedProfileByStudyId:e.props.store.selectedmRNAEnrichmentProfileMap.result,alwaysShow:!0,studies:e.props.store.studies.result,showDescription:!0}),r.createElement(c.Z,{data:e.props.store.mRNAEnrichmentData.result,groups:e.props.store.mrnaEnrichmentAnalysisGroups.result,selectedProfile:n,alteredVsUnalteredMode:!1,sampleKeyToSample:e.props.store.sampleKeyToSample.result,isGeneCheckBoxEnabled:e.props.resultsViewMode,enrichmentType:f.x8.MRNA_EXPRESSION}))},renderPending:function(){return r.createElement(s.Z,{center:!0,isLoading:!0,size:"big"})},renderError:function(){return r.createElement(u.Z,null)}})}),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,e),n=t,(o=[{key:"onChangeProfile",value:function(e){this.props.store.setMRNAEnrichmentProfileMap(e)}},{key:"render",value:function(){return this.tabUI.component}}])&&y(n.prototype,o),i&&y(n,i),t}(r.Component);O([i.default],P.prototype,"onChangeProfile",null);const S=P=O([o.observer],P)},4538:(e,t,n)=>{"use strict";n.d(t,{Z:()=>S});var r=n(88034),o=n(27808),i=n(5933),a=n(35770),l=n(18648),s=n(79083),u=n(36903),c=n(93527),p=n(57761),f=n(78631);function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?b(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var O=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":v(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},P=function(e){function t(){var e;return d(this,t),e=h(this,m(t).apply(this,arguments)),Object.defineProperty(b(e),"tabUI",{enumerable:!0,configurable:!0,writable:!0,value:(0,p.BS)((function(){return e.props.store}),(function(){return e.enrichmentsUI}),"methylation",!0,!0,!1)}),Object.defineProperty(b(e),"enrichmentsUI",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.F)({await:function(){return[e.props.store.methylationEnrichmentData,e.props.store.selectedMethylationEnrichmentProfileMap,e.props.store.methylationEnrichmentAnalysisGroups,e.props.store.studies,e.props.store.methylationEnrichmentProfiles]},render:function(){var t=Object.keys(e.props.store.selectedMethylationEnrichmentProfileMap.result),n=e.props.store.selectedMethylationEnrichmentProfileMap.result[t[0]];return r.createElement("div",{"data-test":"GroupComparisonMethylationEnrichments"},r.createElement(l.Z,{dataSets:e.props.store.methylationEnrichmentProfiles.result,onChange:e.onChangeProfile,selectedProfileByStudyId:e.props.store.selectedMethylationEnrichmentProfileMap.result,alwaysShow:!0,studies:e.props.store.studies.result,showDescription:!0}),r.createElement(s.Z,{data:e.props.store.methylationEnrichmentData.result,groups:e.props.store.methylationEnrichmentAnalysisGroups.result,selectedProfile:n,alteredVsUnalteredMode:!1,sampleKeyToSample:e.props.store.sampleKeyToSample.result,isGeneCheckBoxEnabled:e.props.resultsViewMode,enrichmentType:f.x8.DNA_METHYLATION,groupsSelectorPlaceholder:"High methylation in ..."}))},renderPending:function(){return r.createElement(u.Z,{center:!0,isLoading:!0,size:"big"})},renderError:function(){return r.createElement(c.Z,null)}})}),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,e),n=t,(o=[{key:"onChangeProfile",value:function(e){this.props.store.setMethylationEnrichmentProfileMap(e)}},{key:"render",value:function(){return this.tabUI.component}}])&&y(n.prototype,o),i&&y(n,i),t}(r.Component);O([i.default],P.prototype,"onChangeProfile",null);const S=P=O([o.observer],P)},16168:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ct});var r=n(88034),o=n(36903),i=n(27808),a=n(78566),l=n(49572),s=n(65587),u=n(5933),c=n(31708),p=n(57930),f=n.n(p),d=n(95269),y=n(31744),h=n(56066),m=n(79280),b=n(76127),g=n.n(b),v=n(5985),O=n.n(v),P=n(24440),S=n(63133);function E(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function w(e){return e.xLength*e.yLength}function k(){for(var e=arguments.length<=0?void 0:arguments[0],t=1;t<arguments.length;t++){var n=t<0||arguments.length<=t?void 0:arguments[t],r=Math.max(e.x,n.x),o=Math.min(e.x+e.xLength,n.x+n.xLength),i=Math.max(e.y,n.y),a=Math.min(e.y+e.yLength,n.y+n.yLength);if(r>=o||i>=a)return{x:0,y:0,xLength:0,yLength:0};e={x:r,y:i,xLength:o-r,yLength:a-i}}return e}function x(e,t){var n=[e],r=!0,o=!1,i=void 0;try{for(var a,l=function(){var e=a.value;n=f().flatMap(n,(function(t){return function(e,t){if(0===w(k(e,t)))return[e];var n=T([e,t]),r=[{x:n.xRange.min,y:t.y+t.yLength,xLength:n.xLength,yLength:n.yRange.max-(t.y+t.yLength)},{x:n.xRange.min,y:t.y,xLength:t.x-n.xRange.min,yLength:t.yLength},{x:n.xRange.min,y:n.yRange.min,xLength:n.xLength,yLength:t.y-n.yRange.min},{x:t.x+t.xLength,y:t.y,xLength:n.xRange.max-(t.x+t.xLength),yLength:t.yLength}].map((function(t){return k(t,e)}));return r.filter((function(e){return w(e)>0}))}(t,e)}))},s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0)l()}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}function C(e){return f().sumBy(e,w)}function j(e,t){return x(k.apply(void 0,E(e.map((function(e){return t[e]})))),f().difference(Object.keys(t),e).map((function(e){return t[e]})))}function T(e){var t={xRange:{min:Math.min.apply(Math,E(e.map((function(e){return e.x})))),max:Math.max.apply(Math,E(e.map((function(e){return e.x+e.xLength}))))},yRange:{min:Math.min.apply(Math,E(e.map((function(e){return e.y})))),max:Math.max.apply(Math,E(e.map((function(e){return e.y+e.yLength}))))},xLength:0,yLength:0};return t.xLength=t.xRange.max-t.xRange.min,t.yLength=t.yRange.max-t.yRange.min,t}function _(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function G(e){var t=function(e){var t=[],n=f().values(e),r=!0,o=!1,i=void 0;try{for(var a,l=function(){for(var e=a.value,n=!1,r=0,o=t;r<o.length;r++){var i=o[r];f().some(i.rectangles,(function(t){return w(k(e,t))>0}))&&(i.rectangles.push(e),n=!0)}n||t.push({rectangles:[e]})},s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0)l()}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return t}(e);if(t.length>1){var n=(t=f().sortBy(t,(function(e){return-w(T(e.rectangles))}))).map((function(e){return T(e.rectangles)})),r=Math.max.apply(Math,_(n.map((function(e){return e.xRange.max-e.xRange.min}))))/10,o=Math.max.apply(Math,_(n.map((function(e){return e.yRange.max-e.yRange.min}))))/10,i=[];switch(n.length){case 2:i=[{x:0,y:0},{x:n[0].xLength+r,y:0}];break;case 3:i=[{x:0,y:0},{x:Math.max(n[0].xLength,n[2].xLength)+r,y:0},{x:0,y:Math.max(n[0].yLength,n[1].yLength)+o}]}for(var a=0;a<i.length;a++){var l=i[a].x-n[a].xRange.min,s=i[a].y-n[a].yRange.min,u=!0,c=!1,p=void 0;try{for(var d,y=t[a].rectangles[Symbol.iterator]();!(u=(d=y.next()).done);u=!0){var h=d.value;h.x+=l,h.y+=s}}catch(e){c=!0,p=e}finally{try{u||null==y.return||y.return()}finally{if(c)throw p}}}}}function A(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var R=n(73875);function M(e,t){var n=j(e,t);if(0===n.length)return null;var r=f().sortBy(n,(function(e){return-w(e)}))[0];return{x:r.x+r.xLength/2,y:r.y+r.yLength/2}}function L(e,t,n){var r,o,i,a,l=0,s=0,u=!0,c=!1,p=void 0;try{for(var f,d=t[Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var y=f.value,h=C(j(y.sets,e)),m=h-y.size;l+=m*m,2===y.sets.length&&0===h&&y.size>0&&(s+=(r=e[y.sets[0]],o=e[y.sets[1]],i=void 0,a=void 0,i=r.x-o.x,a=r.y-o.y,Math.sqrt(i*i+a*a)))}}catch(e){c=!0,p=e}finally{try{u||null==d.return||d.return()}finally{if(c)throw p}}var b=!0,g=!1,v=void 0;try{for(var O,P=n[Symbol.iterator]();!(b=(O=P.next()).done);b=!0){var S=O.value,E=w(e[S.uid])-S.size;l+=E*E}}catch(e){g=!0,v=e}finally{try{b||null==P.return||P.return()}finally{if(g)throw v}}return{areaError:l,otherPenalties:s}}function D(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var F=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":U(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};function W(e){e.target.setAttribute("fill",e.target.getAttribute("data-hover-fill"))}function z(e){e.target.setAttribute("fill",e.target.getAttribute("data-default-fill"))}var q=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==U(t)&&"function"!=typeof t?V(e):t}(this,I(t).call(this,e)),Object.defineProperty(V(n),"svg",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(V(n),"tooltipModel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(V(n),"mousePosition",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0}}),Object.defineProperty(V(n),"regionClickHandlers",{enumerable:!0,configurable:!0,writable:!0,value:(0,d.Z)((function(e,t){n.props.onChangeSelectedRegions((0,P.tq)(t.combination,n.props.selection.regions))}))}),Object.defineProperty(V(n),"regionHoverHandlers",{enumerable:!0,configurable:!0,writable:!0,value:(0,d.Z)((function(e,t){t.sizeOfRegion>0&&(n.tooltipModel=t,n.mousePosition.x=e.pageX,n.mousePosition.y=e.pageY)}))}),(0,a.makeObservable)(V(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(t,e),n=t,(o=[{key:"svgRef",value:function(e){this.svg=e}},{key:"resetSelection",value:function(){this.props.onChangeSelectedRegions([])}},{key:"resetTooltip",value:function(){this.tooltipModel=null}},{key:"render",value:function(){return r.createElement("g",{transform:"translate(".concat(this.props.x,",").concat(this.props.y,")"),onMouseOut:this.resetTooltip},r.createElement("rect",{x:"0",y:"0",fill:"white",fillOpacity:0,width:this.props.width,height:this.props.height,onMouseMove:this.resetTooltip,onClick:this.resetSelection}),this.svgElements,!!this.tooltipModel&&h.createPortal(r.createElement(m.Popover,{arrowOffsetTop:17,className:g()("cbioportal-frontend","cbioTooltip",O().Tooltip),positionLeft:this.mousePosition.x+15,positionTop:this.mousePosition.y-17},this.tooltipContent),document.body))}},{key:"layoutParams",get:function(){var e,t=this;switch(this.props.groups.length){case 2:e=[[0],[1],[0,1]];break;case 3:default:e=[[0],[1],[2],[0,1],[0,2],[1,2],[0,1,2]]}var n=e.map((function(e){var n=f().intersection.apply(f(),D(e.map((function(e){return t.props.groups[e].cases})))),r=n.length,o=!0,i=!1,a=void 0;try{for(var l,s=(0,P.L8)(e,t.props.groups.length)[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var u=l.value;f().pullAll(n,t.props.groups[u].cases)}}catch(e){i=!0,a=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw a}}return{combination:e,sizeOfIntersectionOfSets:r,sizeOfRegion:n.length,color:(0,P.B5)(e.map((function(e){return t.props.uidToGroup[t.props.groups[e].uid].color}))),labelPosition:null}})),r=n.map((function(e){return{sets:e.combination.map((function(e){return t.props.groups[e].uid})),size:e.sizeOfRegion,sizeOfIntersectionOfSets:e.sizeOfIntersectionOfSets}})),o=this.props.groups.map((function(e){return{size:e.cases.length,uid:e.uid,color:t.props.uidToGroup[e.uid].color,disjoint:function(){var t=r.find((function(t){return 1===t.sets.length&&t.sets[0]===e.uid}));return t.size===t.sizeOfIntersectionOfSets}()}})),i=function(e,t){var n=Math.max.apply(Math,_(t.map((function(e){return e.size}))))/30;t=f().cloneDeep(t),e=f().cloneDeep(e);var r=f().keyBy(t,(function(e){return e.uid})),o=!0,i=!1,a=void 0;try{for(var l,s=e[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var u=l.value;if(u.size>0&&u.size<n){var c=n-u.size;u.size+=c,u.sizeOfIntersectionOfSets+=c;var p=!0,d=!1,y=void 0;try{for(var h,m=u.sets[Symbol.iterator]();!(p=(h=m.next()).done);p=!0)r[h.value].size+=c}catch(e){d=!0,y=e}finally{try{p||null==m.return||m.return()}finally{if(d)throw y}}}}}catch(e){i=!0,a=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw a}}return{regions:e,sets:t}}(r,o),a=function(e,t,n){n=n||{};var r,o=R.bestInitialLayout(e.map((function(e){return{sets:e.sets,size:e.sizeOfIntersectionOfSets}})),n),i=f().mapValues(o,(function(e){return{x:e.x-e.radius,y:e.y-e.radius,xLength:2*e.radius,yLength:2*e.radius}})),a=function(e,t,n){var r,o,i=t[6*e],a=t[6*e+1],l=Math.abs(t[6*e+2]),s=l+Math.abs(t[6*e+3]);return n?(r=l,o=s):o=(r=Math.abs(t[6*e+4]))+Math.abs(t[6*e+5]),{x:i-l,y:a-r,xLength:s,yLength:o}},l=[],s=!0,u=!1,c=void 0;try{for(var p,d=t[Symbol.iterator]();!(s=(p=d.next()).done);s=!0){var y=p.value;l.push.apply(l,A([(r=i[y.uid]).x+r.xLength/2,r.y+r.yLength/2,r.xLength/2,r.xLength/2,r.yLength/2,r.yLength/2]))}}catch(e){u=!0,c=e}finally{try{s||null==d.return||d.return()}finally{if(u)throw c}}for(var h={},m=(0,S.nelderMead)((function(n){for(var r={},o=0;o<t.length;o++)r[t[o].uid]=a(o,n,t[o].disjoint);var i=L(r,e,t);return i.areaError+i.otherPenalties}),l,n).x,b=0;b<t.length;b++)h[t[b].uid]=a(b,m,t[b].disjoint);return G(h),{rectangles:h,finalErrorValue:L(h,e,t).areaError}}(i.regions,i.sets,{maxIterations:1e4}),l=function(e,t,n,r){var o=f().values(e),i=Object.keys(e);t-=2*r,n-=2*r;var a=T(o),l=a.xRange,s=a.yRange;if(l.max==l.min||s.max==s.min)return console.log("not scaling layout: zero size detected"),e;for(var u=t/(l.max-l.min),c=n/(s.max-s.min),p=Math.min(c,u),d=(t-(l.max-l.min)*p)/2,y=(n-(s.max-s.min)*p)/2,h={},m=0;m<o.length;++m){var b=o[m];h[i[m]]={xLength:p*b.xLength,yLength:p*b.yLength,x:r+d+(b.x-l.min)*p,y:r+y+(b.y-s.min)*p}}return h}(a.rectangles,this.props.width,this.props.height,20),s=!0,u=!1,c=void 0;try{for(var p,d=n[Symbol.iterator]();!(s=(p=d.next()).done);s=!0){var y=p.value;y.sizeOfRegion>0&&(y.labelPosition=M(y.combination.map((function(e){return t.props.groups[e].uid})),l))}}catch(e){u=!0,c=e}finally{try{s||null==d.return||d.return()}finally{if(u)throw c}}return a.finalErrorValue>=1&&setTimeout(this.props.onLayoutFailure,0),{rectangles:l,regions:n,sets:o}}},{key:"svgElements",get:function(){var e=this,t=this.layoutParams.rectangles,n=this.props.groups.map((function(n,o){return r.createElement("clipPath",{id:"".concat(e.props.uid,"_circle_").concat(o)},r.createElement("rect",{x:t[n.uid].x,y:t[n.uid].y,width:t[n.uid].xLength,height:t[n.uid].yLength,rx:8}))})),o=f().flattenDeep(this.layoutParams.regions.map((function(t){var n=t.combination,o=r.createElement("g",null,r.createElement("rect",{x:"0",y:"0",height:e.props.height,width:e.props.width,fill:t.color,style:{cursor:t.sizeOfRegion>0?"pointer":"default"},"data-default-fill":t.color,"data-hover-fill":c.hsl(t.color).brighter(1).rgb(),onMouseOver:t.sizeOfRegion>0?W:void 0,onMouseOut:t.sizeOfRegion>0?z:void 0,onMouseMove:e.regionHoverHandlers({combination:n,sizeOfRegion:t.sizeOfRegion}),onClick:t.sizeOfRegion>0?e.regionClickHandlers({combination:n}):void 0,"data-test":"".concat(e.props.caseType).concat(t.combination.join(","),"VennRegion")})),i=!0,a=!1,l=void 0;try{for(var s,u=n[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var p=s.value;o=r.createElement("g",{clipPath:"url(#".concat(e.props.uid,"_circle_").concat(p,")")},o)}}catch(e){a=!0,l=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw l}}return[o]}))),i=f().sortBy(this.layoutParams.sets,(function(e){return-e.size})).map((function(e){var n=e.uid;return r.createElement("rect",{x:t[n].x,y:t[n].y,width:t[n].xLength,height:t[n].yLength,fill:"none",stroke:e.color,strokeWidth:2,rx:8})})),a=f().flattenDeep(this.layoutParams.regions.map((function(t){if(0===t.sizeOfRegion||!t.labelPosition)return[];var n=(0,P.W4)(t.combination,e.props.selection.regions),o="".concat(t.sizeOfRegion.toString()).concat(n?" "+String.fromCharCode(10004):""),i=(0,y.Z)({text:o,fontFamily:"Arial",fontSize:"13px",lineHeight:1}),a=t.labelPosition,l=null;return n&&(l=r.createElement("rect",{x:a.x-i.width.value/2-4,y:a.y-i.height.value+3,width:i.width.value+8,height:i.height.value+4,fill:"yellow",rx:3,ry:3,pointerEvents:"none"})),[l,r.createElement("text",{x:a.x,y:a.y,style:{userSelect:"none",color:n?"black":(0,P.uu)(t.color)},fontWeight:t.sizeOfRegion>0?"bold":"normal",pointerEvents:"none",textAnchor:"middle",alignmentBaseline:"middle","data-test":"".concat(e.props.caseType).concat(t.combination.join(","),"VennLabel")},o)]})));return r.createElement(r.Fragment,null,n,o,i,a)}},{key:"tooltipContent",get:function(){var e=this;if(!this.tooltipModel)return null;var t=this.tooltipModel.combination.map((function(t){return e.props.groups[t].uid})).map((function(t){return e.props.uidToGroup[t]}));return r.createElement("div",{style:{width:300,whiteSpace:"normal"}},r.createElement("strong",null,this.tooltipModel.sizeOfRegion," ",(0,s._6)(this.props.caseType,this.tooltipModel.sizeOfRegion)),r.createElement("br",null),"in only ",(0,P.Ld)(t,"and"),".")}}])&&N(n.prototype,o),i&&N(n,i),t}(r.Component);F([a.observable.ref],q.prototype,"svg",void 0),F([a.observable.ref],q.prototype,"tooltipModel",void 0),F([a.observable],q.prototype,"mousePosition",void 0),F([u.default],q.prototype,"svgRef",null),F([a.computed],q.prototype,"layoutParams",null),F([a.computed],q.prototype,"svgElements",null),F([u.default],q.prototype,"resetSelection",null),F([u.default],q.prototype,"resetTooltip",null),F([a.computed],q.prototype,"tooltipContent",null);const Z=q=F([i.observer],q);var H=n(57761),Q=n(35770),K=n(21382),Y=n(12758),$=n(58997);function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e,t){return(te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var re=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ne(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};var oe=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==ne(t)&&"function"!=typeof t?ee(e):t}(this,J(t).call(this,e)),Object.defineProperty(ee(n),"inputGroupName",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(ee(n),"saveGroupToUser",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(ee(n),"enterNameInterface",{enumerable:!0,configurable:!0,writable:!0,value:(0,Q.F)({await:function(){return[n.props.store.origin,n.props.store.sampleMap,n.props.store.existingGroupNames,n.props.store._originalGroups,n.props.store.patientToSamplesSet]},render:function(){return r.createElement("div",{style:{width:250}},n.props.store.isLoggedIn&&r.createElement(Y.Z,{checked:n.saveGroupToUser,onClick:n.toggleSaveGroupToUser,label:[r.createElement("span",{style:{marginRight:5}},"Save group to user account"),r.createElement(K.Z,{divStyle:{display:"inline"},tooltip:r.createElement("span",null,"Selecting this will save the new group with the associated study in your user account.")})]}),r.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.createElement("input",{className:"form-control",style:{marginRight:5},type:"text",placeholder:"Enter a group name..",value:n.inputGroupName,onChange:n.onChangeInputGroupName,"data-test":n.props.caseType+"GroupNameInputField"}),r.createElement("button",{className:"btn btm-sm btn-primary",disabled:0===n.inputGroupName.length||n.isDuplicateName,onClick:n.submit,"data-test":n.props.caseType+"GroupNameSubmitButton"},"Submit")),n.isDuplicateName&&r.createElement("div",{style:{marginTop:4},"data-test":n.props.caseType+"DuplicateGroupNameMessage"},H.Bj))},renderPending:function(){return r.createElement(o.Z,{isLoading:!0})}})}),Object.defineProperty(ee(n),"includedRegionsDescription",{enumerable:!0,configurable:!0,writable:!0,value:(0,Q.F)({await:function(){return[n.props.store.uidToGroup]},render:function(){return r.createElement("div",null,n.props.includedRegions.map((function(e){return r.createElement("div",null,function(e,t,n,o){var i=e.map((function(e){return n[e]})),a=r.createElement("span",null,o[0].toUpperCase(),o.substring(1),"s only in"," ",(0,P.Ld)(i,"and"));return r.createElement("span",null,a,".")}(e,n.props.allGroupsInPlot,n.props.store.uidToGroup.result,n.props.caseType))})))}})}),(0,a.makeObservable)(ee(n)),n}var n,i,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&te(e,t)}(t,e),n=t,(i=[{key:"toggleSaveGroupToUser",value:function(){this.saveGroupToUser=!this.saveGroupToUser}},{key:"onChangeInputGroupName",value:function(e){this.inputGroupName=e.target.value}},{key:"submit",value:function(){var e;e="sample"===this.props.caseType?(0,P.fz)(this.props.store._originalGroups.result,this.props.includedRegions,this.props.allGroupsInPlot):(0,P.Im)(this.props.store._originalGroups.result,this.props.includedRegions,this.props.allGroupsInPlot,this.props.store.patientToSamplesSet.result),this.props.submitGroup({name:this.inputGroupName,description:"",studies:e,origin:this.props.store.origin.result,color:void 0},this.saveGroupToUser)}},{key:"render",value:function(){return r.createElement("div",{style:Object.assign({width:this.props.width,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},this.props.style)},r.createElement(s.ZD,{trigger:["click"],overlay:this.enterNameInterface.component,placement:"top"},r.createElement("button",{className:"btn btn-md btn-primary",disabled:0===this.props.includedRegions.length,"data-event":(0,$.XO)({action:"createGroupFromVenn",label:"",category:"groupComparison"}),"data-test":this.props.caseType+"GroupComparisonCreateGroupButton"},"Create Group From Selected Diagram Areas")),r.createElement("div",{style:{marginTop:20}},this.includedRegionsDescription.component))}},{key:"isDuplicateName",get:function(){var e=this.props.store.existingGroupNames.result,t=e.session;return this.saveGroupToUser&&(t=t.concat(e.user)),t.includes(this.inputGroupName.trim())}}])&&X(n.prototype,i),l&&X(n,l),t}(r.Component);re([a.observable],oe.prototype,"inputGroupName",void 0),re([a.observable],oe.prototype,"saveGroupToUser",void 0),re([a.action.bound],oe.prototype,"toggleSaveGroupToUser",null),re([a.action.bound],oe.prototype,"onChangeInputGroupName",null),re([a.action.bound],oe.prototype,"submit",null),re([a.computed],oe.prototype,"isDuplicateName",null);const ie=oe=re([i.observer],oe);var ae=n(1679);function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pe(e){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var fe=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":pe(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},de=400,ye=400,he=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==pe(t)&&"function"!=typeof t?ue(e):t}(this,se(t).call(this,e)),Object.defineProperty(ue(n),"sampleSelection",{enumerable:!0,configurable:!0,writable:!0,value:{regions:[]}}),Object.defineProperty(ue(n),"patientSelection",{enumerable:!0,configurable:!0,writable:!0,value:{regions:[]}}),(0,a.makeObservable)(ue(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}(t,e),n=t,(o=[{key:"submitSampleOverlapGroup",value:function(e,t){this.props.store.addGroup(e,t),this.sampleSelection.regions=[]}},{key:"submitPatientOverlapGroup",value:function(e,t){this.props.store.addGroup(e,t),this.patientSelection.regions=[]}},{key:"changeSelectedSampleRegions",value:function(e){this.sampleSelection.regions=e}},{key:"changeSelectedPatientRegions",value:function(e){this.patientSelection.regions=e}},{key:"render",value:function(){return r.createElement("div",{style:{position:"relative",paddingBottom:"".concat(Math.max(this.sampleSelection.regions.length,this.patientSelection.regions.length)+1,"em")}},r.createElement("svg",{id:this.props.svgId||"",xmlns:"http://www.w3.org/2000/svg",width:this.chartWidth,height:this.chartHeight,role:"img",viewBox:"0 0 ".concat(this.chartWidth," ").concat(this.chartHeight)},r.createElement(l.VictoryLabel,{style:{fontWeight:"bold",fontFamily:"Verdana,Arial,sans-serif",textAnchor:"middle",userSelect:"none"},x:200,y:"1.2em",text:"Samples overlap"}),r.createElement(Z,{uid:"samples",x:0,y:15,groups:this.props.sampleGroups,uidToGroup:this.props.uidToGroup,width:de,height:ye,selection:this.sampleSelection,onChangeSelectedRegions:this.changeSelectedSampleRegions,caseType:"sample",onLayoutFailure:this.props.onLayoutFailure}),r.createElement(l.VictoryLabel,{style:{fontWeight:"bold",fontFamily:"Verdana,Arial,sans-serif",textAnchor:"middle",userSelect:"none"},x:200,dx:410,y:"1.2em",text:"Patients overlap"}),r.createElement(Z,{uid:"patients",x:410,y:15,groups:this.props.patientGroups,uidToGroup:this.props.uidToGroup,width:de,height:ye,selection:this.patientSelection,onChangeSelectedRegions:this.changeSelectedPatientRegions,caseType:"patient",onLayoutFailure:this.props.onLayoutFailure}),this.legendData.length>0&&r.createElement(l.VictoryLegend,{x:this.vennPlotAreaWidth+20,y:100,theme:s.Nv,labelComponent:r.createElement(ae.C,{maxLabelWidth:100,uidToGroup:this.props.uidToGroup,dy:"0.4em"}),standalone:!1,data:this.legendData})),[r.createElement(ie,{store:this.props.store,includedRegions:this.sampleSelectedRegionsUids,style:{position:"absolute",left:0,top:420},submitGroup:this.submitSampleOverlapGroup,allGroupsInPlot:this.sampleGroupUids,caseType:"sample",width:de}),r.createElement(ie,{store:this.props.store,includedRegions:this.patientSelectedRegionsUids,style:{position:"absolute",left:410,top:420},submitGroup:this.submitPatientOverlapGroup,allGroupsInPlot:this.patientGroupUids,caseType:"patient",width:de})])}},{key:"chartWidth",get:function(){return this.vennPlotAreaWidth+20+180}},{key:"chartHeight",get:function(){return 500}},{key:"sampleGroupUids",get:function(){return this.props.sampleGroups.map((function(e){return e.uid}))}},{key:"patientGroupUids",get:function(){return this.props.patientGroups.map((function(e){return e.uid}))}},{key:"legendData",get:function(){var e=this;return this.props.sampleGroups.map((function(t){return{name:t.uid,symbol:{fill:e.props.uidToGroup[t.uid].color,strokeOpacity:0,type:"square",size:6}}}))}},{key:"vennPlotAreaWidth",get:function(){return 810}},{key:"sampleSelectedRegionsUids",get:function(){var e=this;return this.sampleSelection.regions.map((function(t){return t.map((function(t){return e.props.sampleGroups[t].uid}))}))}},{key:"patientSelectedRegionsUids",get:function(){var e=this;return this.patientSelection.regions.map((function(t){return t.map((function(t){return e.props.patientGroups[t].uid}))}))}}])&&le(n.prototype,o),i&&le(n,i),t}(r.Component);fe([a.observable.shallow],he.prototype,"sampleSelection",void 0),fe([a.observable.shallow],he.prototype,"patientSelection",void 0),fe([a.computed],he.prototype,"chartWidth",null),fe([a.computed],he.prototype,"chartHeight",null),fe([a.action.bound],he.prototype,"submitSampleOverlapGroup",null),fe([a.action.bound],he.prototype,"submitPatientOverlapGroup",null),fe([a.action.bound],he.prototype,"changeSelectedSampleRegions",null),fe([a.action.bound],he.prototype,"changeSelectedPatientRegions",null),fe([a.computed],he.prototype,"sampleGroupUids",null),fe([a.computed],he.prototype,"patientGroupUids",null),fe([a.computed],he.prototype,"legendData",null),fe([a.computed],he.prototype,"vennPlotAreaWidth",null),fe([a.computed],he.prototype,"sampleSelectedRegionsUids",null),fe([a.computed],he.prototype,"patientSelectedRegionsUids",null);const me=he=fe([i.observer],he);var be=n(93527),ge=n(64577),ve=n(72564),Oe=n(9804);function Pe(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return{x:e>0?[n(0),r?n(Math.max(1,e-1)):e]:[0,0],y:t>0?[n(0),o?n(Math.max(1,t-1)):t]:[0,0]}}function Se(e,t){for(var n=0,r=1;e(n)>t;){if(n<Number.MIN_SAFE_INTEGER)throw new Error("Couldnt find lower bound");n-=r,r*=2}r=1;for(var o=0;e(o)<t;){if(o>Number.MAX_SAFE_INTEGER)throw new Error("Couldnt find upper bound");o+=r,r*=2}return[n,o]}function Ee(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20,o=(n=n||Se(e,t))[0],i=n[1],a=(o+i)/2,l=r;l>0&&e(a)!==t;)e(a)>t?i=a:o=a,a=(o+i)/2,l-=1;return a}var we=n(4259);function ke(){return(ke=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ce(e){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function je(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Te(e,t){return(Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _e(e){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ge=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":_e(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Ae=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},Re=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==_e(t)&&"function"!=typeof t?je(e):t}(this,Ce(t).call(this,e)),Object.defineProperty(je(n),"textElt",{enumerable:!0,configurable:!0,writable:!0,value:null}),(0,a.makeObservable)(je(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Te(e,t)}(t,e),n=t,(o=[{key:"ref",value:function(e){this.textElt=e}},{key:"render",value:function(){var e=this.props,t=(e.categoryCoordToGroup,e.dx),n=e.dy,o=e.maxLabelWidth,i=(e.datum,e.text,Ae(e,["categoryCoordToGroup","dx","dy","maxLabelWidth","datum","text"]));return r.createElement(r.Fragment,null,this.colorRectangle,r.createElement(we.Z,ke({text:this.group.name,textRef:this.ref,prefixTspans:this.group.ordinal.length>0?[r.createElement("tspan",null,"("),r.createElement("tspan",{fontWeight:"bold"},this.group.ordinal),r.createElement("tspan",null,") ")]:void 0,datum:this.group,tooltip:function(e){return r.createElement("div",null,(0,P.$k)(e))},maxWidth:o,dy:n,dx:t},i)))}},{key:"group",get:function(){return this.props.categoryCoordToGroup(this.props.text)}},{key:"colorRectangle",get:function(){if(this.textElt){var e=this.textElt.getBBox();return r.createElement("rect",{x:e.x-10-5,y:e.y+(e.height-10)/2,fill:this.group.color,width:10,height:10})}return null}}])&&xe(n.prototype,o),i&&xe(n,i),t}(r.Component);Ge([a.observable.ref],Re.prototype,"textElt",void 0),Ge([a.computed],Re.prototype,"group",null),Ge([a.action.bound],Re.prototype,"ref",null),Ge([a.computed],Re.prototype,"colorRectangle",null);const Me=Re=Ge([i.observer],Re);function Le(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function De(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ne(e){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ve(e,t){return(Ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Be(){return(Be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ue(e){return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Fe=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Ue(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},We=function(e){return r.createElement(l.Bar,Be({className:"".concat(e.caseType,"_").concat(f().sortBy(e.datum.groups).map((function(e){return encodeURI(e.replace(/ /g,"_"))})).join("_"),"_bar")},e))},ze=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==Ue(t)&&"function"!=typeof t?Ie(e):t}(this,Ne(t).call(this,e)),Object.defineProperty(Ie(n),"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(Ie(n),"tooltipModel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(Ie(n),"mouseEvents",{enumerable:!0,configurable:!0,writable:!0,value:n.makeMouseEvents()}),Object.defineProperty(Ie(n),"mousePosition",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0}}),(0,a.makeObservable)(Ie(n)),n}var n,o,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ve(e,t)}(t,e),n=t,(o=[{key:"containerRef",value:function(e){this.container=e}},{key:"makeMouseEvents",value:function(){var e=this;return[{target:"data",eventHandlers:{onMouseOver:function(){return[{target:"data",mutation:function(t){return t.datum&&t.datum.dontShowTooltip||(e.tooltipModel=t),null}}]},onMouseOut:function(){return[{target:"data",mutation:function(){return e.tooltipModel=null,null}}]},onClick:function(){return[{target:"data",mutation:function(t){var n;return n=t.datum?t.datum.groups:t.data[0].groups,t.datum&&t.datum.notClickable||e.props.onChangeSelectedCombinations((0,P.tq)(n,e.props.selectedCombinations)),null}}]}}}]}},{key:"resetSelection",value:function(){this.props.onChangeSelectedCombinations([])}},{key:"barSeparation",value:function(){return.2*this.barWidth()}},{key:"barWidth",value:function(){return 10}},{key:"barChartHeight",value:function(){return 250}},{key:"domainPadding",value:function(){return 20}},{key:"categoryAxisDomainPadding",value:function(){return this.domainPadding()}},{key:"countAxisDomainPadding",value:function(){return this.domainPadding()}},{key:"chartDomainPadding",value:function(){return{y:this.countAxisDomainPadding(),x:this.categoryAxisDomainPadding()}}},{key:"categoryCoord",value:function(e){return e*(this.barWidth()+this.barSeparation())}},{key:"categoryCoordToGroup",value:function(e){var t=Math.round(Ee(this.categoryCoord,e,[0,this.usedGroups.length]));return this.usedGroups[t]}},{key:"formatNumericalTick",value:function(e,t,n){return(0,s.kQ)(e,n)}},{key:"groupTick",value:function(e,t){return this.groupLabels[t]}},{key:"tooltipFunction",value:function(e){var t=this,n=f().map(e.groups,(function(e){return t.props.uidToGroup[e]})),o=e.cases.length;return r.createElement("div",{style:{width:300,whiteSpace:"normal"}},r.createElement("strong",null,o," ",(0,s._6)(this.props.caseType,o)),r.createElement("br",null),"in only ",(0,P.Ld)(n,"and"),".")}},{key:"onMouseMove",value:function(e){this.mousePosition.x=e.pageX,this.mousePosition.y=e.pageY}},{key:"lineStroke",value:function(e){return 0===e.length?"black":(0,P.W4)(e[0].groups,this.props.selectedCombinations)?"yellow":"black"}},{key:"fill",value:function(e){return(0,P.W4)(e.groups,this.props.selectedCombinations)&&!e.notClickable?"yellow":e.fill||"black"}},{key:"getChart",value:function(){return this.groupCombinationSets.length>0?r.createElement("div",{ref:this.containerRef,style:{width:this.svgWidth,height:this.svgHeight}},r.createElement("svg",{id:this.props.svgId||"",style:{width:this.svgWidth,height:this.svgHeight,pointerEvents:"all"},height:this.svgHeight,width:this.svgWidth,role:"img",viewBox:"0 0 ".concat(this.svgWidth," ").concat(this.svgHeight),onMouseMove:this.onMouseMove},r.createElement("g",null,this.title),r.createElement("g",{transform:"translate(".concat(this.leftPadding,", ").concat(this.topPadding,")")},r.createElement(l.VictoryChart,{theme:s.Nv,width:this.chartWidth,height:this.barChartHeight(),standalone:!1,domainPadding:this.chartDomainPadding(),domain:this.barPlotDomain,singleQuadrantDomainPadding:{y:!0,x:!1}},r.createElement(l.VictoryAxis,{orientation:"bottom",offsetY:50,crossAxis:!1,tickValues:this.categoryTickValues,style:{ticks:{size:0},tickLabels:{fontSize:0},grid:{stroke:0}}}),r.createElement(l.VictoryAxis,{orientation:"left",offsetX:50,dependentAxis:!0,label:"Overlap count",tickFormat:this.formatNumericalTick,style:{grid:{stroke:0}},axisLabelComponent:r.createElement(l.VictoryLabel,{dy:-40})}),r.createElement(l.VictoryBar,{style:{data:{fill:this.fill,width:this.barWidth()}},data:this.barPlotData}),r.createElement(l.VictoryBar,{style:{data:{fillOpacity:0,width:this.barWidth(),cursor:"pointer"}},data:this.barPlotHitzoneData,events:this.mouseEvents,dataComponent:r.createElement(We,{caseType:this.props.caseType})}))),r.createElement("g",{transform:"translate(".concat(this.leftPadding,", ").concat(this.scatterPlotTopPadding,")")},r.createElement(l.VictoryChart,{theme:s.Nv,width:this.chartWidth,height:this.scatterChartHeight,standalone:!1,domainPadding:this.chartDomainPadding(),domain:this.scatterPlotDomain,singleQuadrantDomainPadding:{y:!0,x:!1}},r.createElement(l.VictoryAxis,{orientation:"bottom",offsetY:50,crossAxis:!1,tickValues:this.categoryTickValues,style:{axis:{strokeWidth:0},ticks:{size:0,strokeWidth:0},tickLabels:{fill:"none"},grid:{stroke:0}}}),r.createElement(l.VictoryAxis,{orientation:"left",offsetX:50,dependentAxis:!0,crossAxis:!1,tickLabelComponent:r.createElement(Me,{categoryCoordToGroup:this.categoryCoordToGroup,maxLabelWidth:200,dy:"0.4em"}),tickValues:this.groupTickValues,style:{axis:{strokeWidth:0},ticks:{size:0,strokeWidth:0},grid:{stroke:0}}}),r.createElement(l.VictoryScatter,{size:this.barWidth()/2,style:{data:{fill:this.fill,cursor:function(e){return e.cursor}}},data:this.scatterData,events:this.mouseEvents}),this.getGroupIntersectionLines)))):r.createElement("span",null,"No data to plot.")}},{key:"render",value:function(){return r.createElement("div",null,r.createElement(i.Observer,null,this.getChart),this.tooltipComponent)}},{key:"usedGroups",get:function(){var e=f().chain(this.groupCombinationSets).flatMap((function(e){return e.groups})).keyBy().value();return f().chain(this.props.uidToGroup).reduce((function(t,n,r){return r in e&&t.push(n),t}),[]).orderBy((function(e){return e.nameWithOrdinal}),"desc").value()}},{key:"groupLabels",get:function(){return f().map(this.usedGroups,(function(e){return(0,s.uC)(e.nameWithOrdinal,100,"Arial","13px")}))}},{key:"chartWidth",get:function(){return this.barChartExtent}},{key:"scatterChartHeight",get:function(){return this.scatterChartExtent}},{key:"title",get:function(){return this.props.title?r.createElement(l.VictoryLabel,{style:{fontWeight:"bold",fontFamily:"Verdana,Arial,sans-serif",textAnchor:"middle"},x:this.svgWidth/2,y:"1.2em",text:this.props.title}):null}},{key:"scatterChartExtent",get:function(){return this.usedGroups.length>0?this.categoryCoord(this.usedGroups.length-1)+2*this.categoryAxisDomainPadding()+100:100}},{key:"barChartExtent",get:function(){return this.groupCombinationSets.length>0?this.categoryCoord(this.groupCombinationSets.length-1)+2*this.categoryAxisDomainPadding()+100:100}},{key:"biggestCategoryLabelSize",get:function(){var e=Math.max.apply(Math,Le(f().map(this.usedGroups,(function(e){return(0,s.mY)(e.nameWithOrdinal,s.jU.fontFamily,s.jU.fontSize+"px")}))));return Math.min(e,200)}},{key:"svgWidth",get:function(){return Math.max(this.leftPadding+this.chartWidth+this.rightPadding,320)}},{key:"svgHeight",get:function(){return this.topPadding+this.barChartHeight()+this.scatterChartHeight+this.bottomPadding-100}},{key:"leftPadding",get:function(){return this.biggestCategoryLabelSize}},{key:"rightPadding",get:function(){return 50}},{key:"topPadding",get:function(){return 0}},{key:"bottomPadding",get:function(){return 10}},{key:"groupCombinationSets",get:function(){return f().orderBy(this.props.groups.map((function(e){return{groups:Object.keys(e.key).filter((function(t){return e.key[t]})),cases:e.value}})),(function(e){return e.cases.length}),"desc")}},{key:"scatterData",get:function(){var e=this;return f().flatMap(this.groupCombinationSets,(function(t,n){return f().map(e.usedGroups,(function(r,o){var i=f().includes(t.groups,r.uid);return Object.assign({x:e.categoryCoord(n),y:e.categoryCoord(o),fill:i?"#000000":"#efefef",dontShowTooltip:!i,cursor:i?"pointer":"default",notClickable:!i},t)}))}))}},{key:"barPlotData",get:function(){var e=this;return f().map(this.groupCombinationSets,(function(t,n){return Object.assign({x:e.categoryCoord(n),y:t.cases.length},t)}))}},{key:"barPlotHitzoneData",get:function(){var e=this.barPlotDomain.y[1]/15;return this.barPlotData.map((function(t){return Object.assign({},t,{y:Math.max(t.y,e)})}))}},{key:"getGroupIntersectionLines",get:function(){var e=this,t=f().map(this.usedGroups,(function(e){return e.uid}));return f().flatMap(this.groupCombinationSets,(function(n,o){var i=f().map(n.groups,(function(r){var i=f().indexOf(t,r);return Object.assign({x:e.categoryCoord(o),y:e.categoryCoord(i)},n)}));return[r.createElement(l.VictoryLine,{style:{data:{stroke:e.lineStroke,strokeWidth:2,strokeLinecap:"round"}},data:i}),r.createElement(l.VictoryLine,{style:{data:{strokeOpacity:0,strokeWidth:e.barWidth(),strokeLinecap:"round",cursor:"pointer"}},data:i,events:e.mouseEvents})]}))}},{key:"barPlotDomain",get:function(){var e=f().max(f().map(this.groupCombinationSets,(function(e){return e.cases.length})))||0;return Pe(this.groupCombinationSets.length,e,this.categoryCoord,!0,!1)}},{key:"scatterPlotDomain",get:function(){return Pe(this.groupCombinationSets.length,f().keys(this.groupLabels).length,this.categoryCoord)}},{key:"categoryTickValues",get:function(){var e=this;return this.groupCombinationSets.map((function(t,n){return e.categoryCoord(n)}))}},{key:"groupTickValues",get:function(){var e=this;return f().map(this.groupLabels,(function(t,n){return e.categoryCoord(n)}))}},{key:"scatterPlotTopPadding",get:function(){return this.barChartHeight()-100}},{key:"tooltipComponent",get:function(){if(this.tooltipModel){var e=this.mousePosition.x>ge.Z.size.width-400?"left":"right";return h.createPortal(r.createElement(m.Popover,{arrowOffsetTop:17,className:g()("cbioportal-frontend","cbioTooltip",O().Tooltip),positionLeft:this.mousePosition.x+("left"===e?-8:8),positionTop:this.mousePosition.y-17,style:{transform:"left"===e?"translate(-100%,0%)":void 0,maxWidth:400},placement:e},this.tooltipFunction(this.tooltipModel.datum||this.tooltipModel.data[0])),document.body)}return null}}])&&De(n.prototype,o),u&&De(n,u),t}(r.Component);Fe([a.observable.ref],ze.prototype,"tooltipModel",void 0),Fe([a.observable],ze.prototype,"mousePosition",void 0),Fe([u.default],ze.prototype,"containerRef",null),Fe([u.default],ze.prototype,"resetSelection",null),Fe([a.computed],ze.prototype,"usedGroups",null),Fe([a.computed],ze.prototype,"groupLabels",null),Fe([a.computed],ze.prototype,"chartWidth",null),Fe([a.computed],ze.prototype,"scatterChartHeight",null),Fe([a.computed],ze.prototype,"scatterChartExtent",null),Fe([a.computed],ze.prototype,"barChartExtent",null),Fe([a.computed],ze.prototype,"biggestCategoryLabelSize",null),Fe([a.computed],ze.prototype,"svgWidth",null),Fe([a.computed],ze.prototype,"svgHeight",null),Fe([a.computed],ze.prototype,"leftPadding",null),Fe([a.computed],ze.prototype,"rightPadding",null),Fe([a.computed],ze.prototype,"topPadding",null),Fe([a.computed],ze.prototype,"bottomPadding",null),Fe([u.default],ze.prototype,"categoryCoord",null),Fe([u.default],ze.prototype,"categoryCoordToGroup",null),Fe([a.computed],ze.prototype,"groupCombinationSets",null),Fe([a.computed],ze.prototype,"scatterData",null),Fe([a.computed],ze.prototype,"barPlotData",null),Fe([a.computed],ze.prototype,"barPlotHitzoneData",null),Fe([a.computed],ze.prototype,"getGroupIntersectionLines",null),Fe([a.computed],ze.prototype,"barPlotDomain",null),Fe([a.computed],ze.prototype,"scatterPlotDomain",null),Fe([a.computed],ze.prototype,"categoryTickValues",null),Fe([a.computed],ze.prototype,"groupTickValues",null),Fe([u.default],ze.prototype,"formatNumericalTick",null),Fe([u.default],ze.prototype,"groupTick",null),Fe([a.computed],ze.prototype,"scatterPlotTopPadding",null),Fe([a.computed],ze.prototype,"tooltipComponent",null),Fe([u.default],ze.prototype,"onMouseMove",null),Fe([u.default],ze.prototype,"lineStroke",null),Fe([u.default],ze.prototype,"fill",null),Fe([u.default],ze.prototype,"getChart",null);const qe=ze=Fe([i.observer],ze);function Ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function He(e){return(He=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ke(e,t){return(Ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ye(e){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var $e=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Ye(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Xe=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==Ye(t)&&"function"!=typeof t?Qe(e):t}(this,He(t).call(this,e)),Object.defineProperty(Qe(n),"sampleSelection",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(Qe(n),"patientSelection",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(Qe(n),"sampleUpset",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(Qe(n),"patientUpset",{enumerable:!0,configurable:!0,writable:!0,value:null}),(0,a.makeObservable)(Qe(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ke(e,t)}(t,e),n=t,(o=[{key:"changeSelectedSampleRegions",value:function(e){this.sampleSelection=e}},{key:"changeSelectedPatientRegions",value:function(e){this.patientSelection=e}},{key:"sampleUpsetRef",value:function(e){this.sampleUpset=e}},{key:"patientUpsetRef",value:function(e){this.patientUpset=e}},{key:"submitSampleOverlapGroup",value:function(e,t){this.props.store.addGroup(e,t),this.sampleSelection=[]}},{key:"submitPatientOverlapGroup",value:function(e,t){this.props.store.addGroup(e,t),this.patientSelection=[]}},{key:"render",value:function(){return r.createElement("div",{style:{position:"relative",display:"".concat(this.props.sideBySide?"flex":"block"),maxWidth:this.props.maxWidth,overflow:"auto hidden"}},r.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",paddingBottom:20,marginRight:this.props.sideBySide?10:void 0}},r.createElement(qe,{ref:this.sampleUpsetRef,groups:this.props.samplesVennPartition,uidToGroup:this.props.uidToGroup,caseType:"sample",title:"Samples overlap",onChangeSelectedCombinations:this.changeSelectedSampleRegions,selectedCombinations:this.sampleSelection}),this.sampleUpset&&this.props.samplesVennPartition.length>0&&r.createElement(ie,{store:this.props.store,includedRegions:this.sampleSelection,submitGroup:this.submitSampleOverlapGroup,allGroupsInPlot:Object.keys(this.props.samplesVennPartition[0].key),caseType:"sample",width:this.sampleUpset.svgWidth})),r.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},r.createElement(qe,{ref:this.patientUpsetRef,groups:this.props.patientsVennPartition,uidToGroup:this.props.uidToGroup,caseType:"patient",title:"Patients overlap",onChangeSelectedCombinations:this.changeSelectedPatientRegions,selectedCombinations:this.patientSelection}),this.patientUpset&&this.props.patientsVennPartition.length>0&&r.createElement(ie,{store:this.props.store,includedRegions:this.patientSelection,submitGroup:this.submitPatientOverlapGroup,allGroupsInPlot:Object.keys(this.props.patientsVennPartition[0].key),caseType:"patient",width:this.patientUpset.svgWidth})))}}])&&Ze(n.prototype,o),i&&Ze(n,i),t}(r.Component);$e([a.observable.shallow],Xe.prototype,"sampleSelection",void 0),$e([a.observable.shallow],Xe.prototype,"patientSelection",void 0),$e([a.observable.ref],Xe.prototype,"sampleUpset",void 0),$e([a.observable.ref],Xe.prototype,"patientUpset",void 0),$e([a.action.bound],Xe.prototype,"changeSelectedSampleRegions",null),$e([a.action.bound],Xe.prototype,"changeSelectedPatientRegions",null),$e([u.default],Xe.prototype,"sampleUpsetRef",null),$e([u.default],Xe.prototype,"patientUpsetRef",null),$e([a.action.bound],Xe.prototype,"submitSampleOverlapGroup",null),$e([a.action.bound],Xe.prototype,"submitPatientOverlapGroup",null);const Je=Xe=$e([i.observer],Xe);var et=n(77906);function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nt(e){return(nt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ot(e,t){return(ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function it(e){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var at,lt=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":it(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},st="comparison-tab-overlap-svg";!function(e){e[e.Upset=0]="Upset",e[e.Venn=1]="Venn"}(at||(at={}));var ut=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==it(t)&&"function"!=typeof t?rt(e):t}(this,nt(t).call(this,e)),Object.defineProperty(rt(n),"vennFailed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(rt(n),"tabUI",{enumerable:!0,configurable:!0,writable:!0,value:(0,Q.F)({await:function(){return n.props.store._selectedGroups.isComplete&&n.props.store._selectedGroups.result.length<2?[n.props.store._selectedGroups]:[n.props.store._selectedGroups,n.overlapUI]},render:function(){var e=[];return n.props.store._selectedGroups.result.length<2?e.push(r.createElement("span",null,H.IB)):(e.push(r.createElement(Oe.Z,{overlapTabMode:!0,store:n.props.store})),n.vennFailed&&e.push(r.createElement("div",{className:"alert alert-info"},"We couldn't find a good Venn diagram layout, so showing UpSet diagram instead.")),e.push(n.overlapUI.component)),r.createElement("div",{"data-test":"ComparisonPageOverlapTabDiv"},e)},renderPending:function(){return r.createElement(o.Z,{isLoading:!0,center:!0,size:"big"})},renderError:function(){return r.createElement(be.Z,null)}})}),Object.defineProperty(rt(n),"plotType",{enumerable:!0,configurable:!0,writable:!0,value:(0,s.$w)({await:function(){return[n.props.store._selectedGroups]},invoke:function(){return n.vennFailed||n.props.store._selectedGroups.result.length>3?Promise.resolve(at.Upset):Promise.resolve(at.Venn)}})}),Object.defineProperty(rt(n),"sampleGroupsWithCases",{enumerable:!0,configurable:!0,writable:!0,value:(0,s.$w)({await:function(){return[n.props.store._selectedGroups,n.props.store.sampleMap]},invoke:function(){var e=n.props.store.sampleMap.result,t=f().map(n.props.store._selectedGroups.result,(function(t){var n=(0,H.b)([t]).map((function(t){return e.get({studyId:t.studyId,sampleId:t.sampleId})}));return{uid:t.uid,cases:f().map(n,(function(e){return e.uniqueSampleKey}))}}));return Promise.resolve(t)}},[])}),Object.defineProperty(rt(n),"patientGroupsWithCases",{enumerable:!0,configurable:!0,writable:!0,value:(0,s.$w)({await:function(){return[n.props.store._selectedGroups,n.props.store.sampleMap]},invoke:function(){var e=n.props.store.sampleMap.result,t=f().map(n.props.store._selectedGroups.result,(function(t){var n=(0,H.b)([t]).map((function(t){return e.get({studyId:t.studyId,sampleId:t.sampleId})}));return{uid:t.uid,cases:f().uniq(f().map(n,(function(e){return e.uniquePatientKey})))}}));return Promise.resolve(t)}},[])}),Object.defineProperty(rt(n),"activeSamples",{enumerable:!0,configurable:!0,writable:!0,value:(0,s.$w)({await:function(){return[n.props.store._selectedGroups,n.props.store.sampleMap]},invoke:function(){var e=n.props.store.sampleMap.result,t=(0,H.b)(n.props.store._selectedGroups.result).map((function(t){return e.get(t)}));return Promise.resolve(t)}})}),Object.defineProperty(rt(n),"samplesVennPartition",{enumerable:!0,configurable:!0,writable:!0,value:(0,s.$w)({await:function(){return[n.props.store._selectedGroups,n.props.store.sampleMap,n.activeSamples]},invoke:function(){var e=n.props.store.sampleMap.result;return Promise.resolve((0,H.fz)(n.props.store._selectedGroups.result,(function(e){return(0,H.b)([e])}),(function(t){return e.get({studyId:t.studyId,sampleId:t.sampleId}).uniqueSampleKey}),n.activeSamples.result.map((function(e){return e.uniqueSampleKey}))))}})}),Object.defineProperty(rt(n),"patientsVennPartition",{enumerable:!0,configurable:!0,writable:!0,value:(0,s.$w)({await:function(){return[n.props.store._selectedGroups,n.props.store.patientToSamplesSet,n.activeSamples]},invoke:function(){var e=n.props.store.patientToSamplesSet.result;return Promise.resolve((0,H.fz)(n.props.store._selectedGroups.result,(function(e){return(0,ve.x1)([e])}),(function(t){return e.get({studyId:t.studyId,patientId:t.patientId})[0].uniquePatientKey}),f().uniq(n.activeSamples.result.map((function(e){return e.uniquePatientKey})))))}})}),Object.defineProperty(rt(n),"uidToGroup",{enumerable:!0,configurable:!0,writable:!0,value:(0,s.$w)({await:function(){return[n.props.store._selectedGroups]},invoke:function(){return Promise.resolve(f().keyBy(n.props.store._selectedGroups.result,(function(e){return e.uid})))}})}),Object.defineProperty(rt(n),"plot",{enumerable:!0,configurable:!0,writable:!0,value:(0,Q.F)({await:function(){return[n.plotType,n.samplesVennPartition,n.patientsVennPartition,n.sampleGroupsWithCases,n.patientGroupsWithCases,n.uidToGroup]},render:function(){var e=null;switch(n.plotType.result){case at.Upset:e=r.createElement(Je,{store:n.props.store,sideBySide:n.areUpsetPlotsSidebySide,maxWidth:n.maxWidth,samplesVennPartition:n.samplesVennPartition.result,patientsVennPartition:n.patientsVennPartition.result,uidToGroup:n.uidToGroup.result});break;case at.Venn:e=r.createElement(me,{svgId:st,sampleGroups:n.sampleGroupsWithCases.result,patientGroups:n.patientGroupsWithCases.result,uidToGroup:n.uidToGroup.result,store:n.props.store,onLayoutFailure:n.onVennLayoutFailure});break;default:return r.createElement("span",null,"Not implemented yet")}return e},renderPending:function(){return r.createElement(o.Z,{isLoading:!0,size:"big"})},renderError:function(){return r.createElement(be.Z,null)}})}),Object.defineProperty(rt(n),"overlapUI",{enumerable:!0,configurable:!0,writable:!0,value:(0,Q.F)({await:function(){return[n.plot]},render:function(){return r.createElement("div",{"data-test":"ComparisonPageOverlapTabContent",className:"borderedChart posRelative"},n.plotExists&&r.createElement(s.t_,{getSvg:n.getSvg,getData:n.props.store.getGroupsDownloadDataPromise,buttons:["SVG","PNG","PDF","Data"],filename:"overlap",dontFade:!0,style:{position:"absolute",right:10,top:10},type:"button"}),r.createElement("div",{style:{position:"relative",display:"inline-block"}},n.plot.component))},renderPending:function(){return r.createElement(o.Z,{isLoading:!0,centerRelativeToContainer:!0,size:"big"})},renderError:function(){return r.createElement(be.Z,null)}})}),(0,a.makeObservable)(rt(n)),window.blah=rt(n),n}var n,i,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ot(e,t)}(t,e),n=t,(i=[{key:"onVennLayoutFailure",value:function(){this.vennFailed=!0}},{key:"getSvg",value:function(){if(this.plotType.result===at.Upset){var e=h.findDOMNode(this),t=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=et(e).find("svg"),r=n[0].cloneNode(!0),o=n[1].cloneNode(!0);et(e).find("svg");var i=0,a=0;return t.appendChild(r),this.areUpsetPlotsSidebySide?(o.setAttribute("x","".concat(et(r).width())),i=Math.max(et(r).height(),et(o).height()),a=et(r).width()+et(o).width()):(o.setAttribute("y","".concat(et(r).height())),i=et(r).height()+et(o).height(),a=Math.max(et(r).width(),et(o).width())),et(t).attr("height",i),et(t).attr("width",a),et(t).css({height:i,width:a}),t.appendChild(o),t}return document.getElementById(st)}},{key:"render",value:function(){return r.createElement("div",{className:"inlineBlock"},this.tabUI.component)}},{key:"plotExists",get:function(){return this.plotType.isComplete&&!this.vennFailed}},{key:"areUpsetPlotsSidebySide",get:function(){return!this.samplesVennPartition.isComplete||!this.patientsVennPartition.isComplete||this.samplesVennPartition.result.length+this.patientsVennPartition.result.length<=100}},{key:"maxWidth",get:function(){return ge.Z.size.width-80}}])&&tt(n.prototype,i),l&&tt(n,l),t}(r.Component);lt([a.observable],ut.prototype,"vennFailed",void 0),lt([a.computed],ut.prototype,"plotExists",null),lt([a.action.bound],ut.prototype,"onVennLayoutFailure",null),lt([u.default],ut.prototype,"getSvg",null),lt([a.computed],ut.prototype,"areUpsetPlotsSidebySide",null),lt([a.computed],ut.prototype,"maxWidth",null);const ct=ut=lt([i.observer],ut)},35595:(e,t,n)=>{"use strict";n.d(t,{Z:()=>S});var r=n(88034),o=n(27808),i=n(5933),a=n(35770),l=n(18648),s=n(79083),u=n(36903),c=n(93527),p=n(57761),f=n(78631);function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?b(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var O=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":v(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},P=function(e){function t(){var e;return d(this,t),e=h(this,m(t).apply(this,arguments)),Object.defineProperty(b(e),"tabUI",{enumerable:!0,configurable:!0,writable:!0,value:(0,p.BS)((function(){return e.props.store}),(function(){return e.enrichmentsUI}),"protein",!0,!0,!1)}),Object.defineProperty(b(e),"enrichmentsUI",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.F)({await:function(){return[e.props.store.proteinEnrichmentData,e.props.store.selectedProteinEnrichmentProfileMap,e.props.store.proteinEnrichmentAnalysisGroups,e.props.store.studies,e.props.store.proteinEnrichmentProfiles]},render:function(){var t=Object.keys(e.props.store.selectedProteinEnrichmentProfileMap.result),n=e.props.store.selectedProteinEnrichmentProfileMap.result[t[0]];return r.createElement("div",{"data-test":"GroupComparisonProteinEnrichments"},r.createElement(l.Z,{dataSets:e.props.store.proteinEnrichmentProfiles.result,onChange:e.onChangeProfile,selectedProfileByStudyId:e.props.store.selectedProteinEnrichmentProfileMap.result,alwaysShow:!0,studies:e.props.store.studies.result,showDescription:!0}),r.createElement(s.Z,{data:e.props.store.proteinEnrichmentData.result,groups:e.props.store.proteinEnrichmentAnalysisGroups.result,selectedProfile:n,alteredVsUnalteredMode:!1,sampleKeyToSample:e.props.store.sampleKeyToSample.result,isGeneCheckBoxEnabled:e.props.resultsViewMode,enrichmentType:f.x8.PROTEIN_EXPRESSION}))},renderPending:function(){return r.createElement(u.Z,{center:!0,isLoading:!0,size:"big"})},renderError:function(){return r.createElement(c.Z,null)}})}),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,e),n=t,(o=[{key:"onChangeProfile",value:function(e){this.props.store.setProteinEnrichmentProfileMap(e)}},{key:"render",value:function(){return this.tabUI.component}}])&&y(n.prototype,o),i&&y(n,i),t}(r.Component);O([i.default],P.prototype,"onChangeProfile",null);const S=P=O([o.observer],P)},37672:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ve});var r=n(88034),o=n(92955),i=n(36903),a=n(27808),l=n(65587),s=n(35770),u=n(57761),c=n(93527),p=n(24440),f=n(9804),d=n(72564),y=n(57930),h=n.n(y),m=n(6240);function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var w=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":E(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},k=function(e){function t(){return g(this,t),v(this,O(t).apply(this,arguments))}return P(t,e),t}(m.ZP),x=function(e){function t(){return g(this,t),v(this,O(t).apply(this,arguments))}var n,o,i;return P(t,e),n=t,(o=[{key:"render",value:function(){return r.createElement(k,{data:this.props.survivalDescriptionData,columns:[{name:"Study",render:function(e){return r.createElement("span",null,e.studyName)},sortBy:function(e){return e.studyName}},{name:"Description",render:function(e){return r.createElement("span",null,e.description)},sortBy:function(e){return e.description}}],initialSortColumn:"Description",initialSortDirection:"desc",showPagination:!0,initialItemsPerPage:10,showColumnVisibility:!1,showFilter:!1,showCopyDownload:!1})}}])&&b(n.prototype,o),i&&b(n,i),t}(r.Component);const C=x=w([a.observer],x);var j=n(1679),T=n(18474),_=n(63443),G=n(78566),A=n(6790),R=n.n(A),M=n(5933),L=n(17502),D=n(71780),N=n(3563),I=n(91098),V=n(26942),B=n(95920),U=n(5985),F=n.n(U);function W(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e,t,n){return t&&q(e.prototype,t),n&&q(e,n),e}function H(e,t){return!t||"object"!==X(t)&&"function"!=typeof t?K(e):t}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}function $(e,t){return($=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var J=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":X(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ee=function(e){function t(e){var n;return z(this,t),n=H(this,Q(t).call(this,e)),(0,G.makeObservable)(K(n)),n}return Y(t,e),Z(t,[{key:"onSliderTextChange",value:function(e){var t=Number.parseFloat(e);isNaN(t)||this.props.onPatientMinThresholdChange(t)}},{key:"render",value:function(){return r.createElement("div",{className:"small",style:{float:"left",display:"inline-flex",alignItems:"center",alignContent:"center"}},r.createElement("span",{style:{textAlign:"center",maxWidth:95}},"Min. # Patients per Group:"),r.createElement("div",{className:"RangeSliderContainer",style:{width:75,marginLeft:10,marginRight:10}},r.createElement(B.default,{min:this.props.minNumPatients,max:this.props.maxNumPatients,value:this.props.patientMinThreshold,onChange:this.props.onPatientMinThresholdChange,tooltip:!1,step:1})),r.createElement(l.m1,{className:F().XmaxNumberInput,value:this.props.patientMinThreshold.toString(),setValue:this.onSliderTextChange,numericOnly:!0}))}}]),t}(r.Component);J([G.action.bound],ee.prototype,"onSliderTextChange",null),ee=J([a.observer],ee);var te,ne=function(e){function t(e,n,r){var o;return z(this,t),o=H(this,Q(t).call(this,e)),Object.defineProperty(K(o),"getPatientMinThreshold",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(K(o),"getSortedFilteredData",{enumerable:!0,configurable:!0,writable:!0,value:function(){return(0,L.N7)(o.sortedData,o.filterString,(function(e,t,n,r){return h().every(Object.values(e.numPatientsPerGroup),(function(e){return e>=o.getPatientMinThreshold()}))&&o.dataFilter(e,t,n,r)}))}}),o.dataHighlighter=function(e){return e.prefix===n()},o}return Y(t,e),t}(L.Lq);function re(e){var t="# in ".concat(e);return{name:t,render:function(t){return r.createElement("span",null,t.numPatientsPerGroup[e])},sortBy:function(t){return t.numPatientsPerGroup[e]},filter:(0,I.UA)((function(t){return t.numPatientsPerGroup[e]}),t),download:function(t){return t.numPatientsPerGroup[e].toString()},visible:!1}}function oe(e){var t="Median months survival in ".concat(e," (95% CI)");return{name:t,render:function(t){return r.createElement("span",null,t.medianPerGroup[e])},sortBy:function(t){var n=parseFloat(t.medianPerGroup[e]);return isNaN(n)?Number.POSITIVE_INFINITY:n},filter:(0,I.UA)((function(t){var n=parseFloat(t.medianPerGroup[e]);return isNaN(n)?Number.POSITIVE_INFINITY:n}),t),download:function(t){return t.medianPerGroup[e]},visible:!1}}!function(e){e.P_VALUE="p-Value"}(te||(te={}));var ie=[{name:"Survival Type",render:function(e){return r.createElement("span",null,e.displayText)},filter:function(e,t,n){return e.displayText.toUpperCase().indexOf(n)>-1},sortBy:function(e){return e.displayText},download:function(e){return e.displayText},visible:!0,togglable:!1},{name:"Number of Patients",render:function(e){return r.createElement("span",null,e.numPatients)},sortBy:function(e){return e.numPatients},download:function(e){return e.numPatients.toString()},visible:!0}],ae=[{name:te.P_VALUE,render:function(e){return r.createElement("span",null,null!==e.pValue?(0,D._M)(e.pValue,3,.01,-10):"N/A")},sortBy:function(e){return e.pValue},filter:(0,I.UA)((function(e){return e.pValue}),te.P_VALUE),download:function(e){return null!==e.pValue?(0,N.C)(e.pValue,3,.01):"N/A"},tooltip:r.createElement("span",null,"Derived from Log Rank test."),visible:!0},{name:"q-Value",render:function(e){return r.createElement("span",null,null!==e.qValue?(0,D._M)(e.qValue,3,.01,-10):"N/A")},sortBy:function(e){return e.qValue},filter:(0,I.UA)((function(e){return e.qValue}),"q-Value"),download:function(e){return null!==e.qValue?(0,N.C)(e.qValue,3,.01):"N/A"},tooltip:r.createElement("span",null,"Derived from Benjamini-Hochberg FDR correction procedure."),visible:!0}],le=function(e){function t(e){var n;return z(this,t),n=H(this,Q(t).call(this,e)),Object.defineProperty(K(n),"dataStore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(K(n),"columnVisibility",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(K(n),"patientMinThreshold",{enumerable:!0,configurable:!0,writable:!0,value:(0,V.Ib)().survival_min_group_threshold}),(0,G.makeObservable)(K(n)),n.dataStore=new ne((function(){return n.props.survivalPrefixes}),n.props.getSelectedPrefix,n.getPatientMinThreshold),n.columnVisibility=n.initColumnVisibility(),n}return Y(t,e),Z(t,[{key:"getPatientMinThreshold",value:function(){return this.patientMinThreshold}},{key:"initColumnVisibility",value:function(){return h().mapValues(h().keyBy(this.columns,(function(e){return e.name})),(function(e){return e.visible}))}},{key:"onRowClick",value:function(e){this.props.setSelectedPrefix(e.prefix)}},{key:"onColumnToggled",value:function(e,t){this.columnVisibility=(0,l.mw)(this.columnVisibility,e,t)}},{key:"onPatientMinThresholdChange",value:function(e){this.patientMinThreshold=e}},{key:"render",value:function(){return r.createElement(m.ZP,{columns:this.columns,showColumnVisibility:!0,columnVisibility:this.columnVisibility,columnVisibilityProps:{onColumnToggled:this.onColumnToggled,className:"pull-right SurvivalPrefixTableVisibilityColumn"},headerComponent:r.createElement(ee,{maxNumPatients:this.maxNumPatients,minNumPatients:this.minNumPatients,patientMinThreshold:this.patientMinThreshold,onPatientMinThresholdChange:this.onPatientMinThresholdChange}),initialSortColumn:te.P_VALUE,initialSortDirection:"asc",dataStore:this.dataStore,onRowClick:this.onRowClick,paginationProps:{itemsPerPageOptions:[15]},initialItemsPerPage:15,copyDownloadProps:{showCopy:!1},filterBoxWidth:120})}},{key:"columns",get:function(){var e=[].concat(ie,W(this.props.groupNames.map(re)),W(this.props.groupNames.map(oe)));return(0,V.Ib)().survival_show_p_q_values_in_survival_type_table&&e.push.apply(e,ae),e}},{key:"minNumPatients",get:function(){return Math.min.apply(Math,W(this.dataStore.allData.map((function(e){return Math.min.apply(Math,W(Object.values(e.numPatientsPerGroup)))}))))}},{key:"maxNumPatients",get:function(){return Math.max.apply(Math,W(this.dataStore.allData.map((function(e){return Math.min.apply(Math,W(Object.values(e.numPatientsPerGroup)))}))))}}]),t}(r.Component);J([G.observable],le.prototype,"columnVisibility",void 0),J([G.observable],le.prototype,"patientMinThreshold",void 0),J([M.default],le.prototype,"getPatientMinThreshold",null),J([M.default],le.prototype,"onRowClick",null),J([M.default],le.prototype,"onColumnToggled",null),J([G.computed],le.prototype,"columns",null),J([G.computed],le.prototype,"minNumPatients",null),J([G.computed],le.prototype,"maxNumPatients",null),J([G.action.bound],le.prototype,"onPatientMinThresholdChange",null);const se=le=J([a.observer],le);var ue=n(55505),ce=n(24999);function pe(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function de(e){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ye(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function he(e,t){return(he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var be=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":me(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ge=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==me(t)&&"function"!=typeof t?ye(e):t}(this,de(t).call(this,e)),Object.defineProperty(ye(n),"multipleDescriptionWarningMessageWithoutTooltip",{enumerable:!0,configurable:!0,writable:!0,value:"The survival data on patients from different cohorts may have been defined by "}),Object.defineProperty(ye(n),"multipleDescriptionWarningMessageWithTooltip",{enumerable:!0,configurable:!0,writable:!0,value:"different criteria."}),Object.defineProperty(ye(n),"differentDescriptionExistMessage",{enumerable:!0,configurable:!0,writable:!0,value:"Different descriptions of survival data were used for different studies."}),Object.defineProperty(ye(n),"selectedSurvivalPlotPrefix",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(ye(n),"analysisGroupsComputations",{enumerable:!0,configurable:!0,writable:!0,value:(0,l.$w)({await:function(){return[n.props.store.activeGroups,n.props.store.patientsVennPartition,n.props.store.uidToGroup,n.props.store.patientToSamplesSet]},invoke:function(){var e=h().reduce(n.props.store._activeGroupsNotOverlapRemoved.result,(function(e,t,n){return e[t.uid]=n,e}),{}),t=n.props.store.patientsVennPartition.result;t.sort((function(t,n){var r=Object.keys(t.key).filter((function(e){return t.key[e]})),o=Object.keys(n.key).filter((function(e){return n.key[e]}));return r.length!==o.length?r.length-o.length:h().sumBy(r,(function(t){return e[t]}))-h().sumBy(o,(function(t){return e[t]}))}));var r=n.props.store.uidToGroup.result,o=[],i={};if(n.props.store.overlapStrategy===T.T.INCLUDE){var a=!0,l=!1,s=void 0;try{for(var u,c=function(){var t=u.value,n=Object.keys(t.key).filter((function(e){return t.key[e]}));if(n.sort((function(t,n){return e[t]-e[n]})),n.length>0){var a="Only ".concat(n.map((function(e){return r[e].nameWithOrdinal})).join(", ")),l=n.join(","),s=!0,c=!1,f=void 0;try{for(var d,y=t.value[Symbol.iterator]();!(s=(d=y.next()).done);s=!0){var h=d.value;i[h]=[l]}}catch(e){c=!0,f=e}finally{try{s||null==y.return||y.return()}finally{if(c)throw f}}o.push({name:a,color:(0,p.B5)(n.map((function(e){return r[e].color}))),value:l,legendText:JSON.stringify(n)})}},f=t[Symbol.iterator]();!(a=(u=f.next()).done);a=!0)c()}catch(e){l=!0,s=e}finally{try{a||null==f.return||f.return()}finally{if(l)throw s}}}else{var y=n.props.store.patientToSamplesSet.result,m=!0,b=!1,g=void 0;try{for(var v,O=n.props.store.activeGroups.result[Symbol.iterator]();!(m=(v=O.next()).done);m=!0){var P=v.value,S=P.nameWithOrdinal;o.push({name:S,color:P.color,value:P.uid,legendText:P.uid});var E=(0,d.x1)([P]),w=!0,k=!1,x=void 0;try{for(var C,j=E[Symbol.iterator]();!(w=(C=j.next()).done);w=!0){var _=C.value,G=y.get({studyId:_.studyId,patientId:_.patientId});G&&G.length&&(i[G[0].uniquePatientKey]=[P.uid])}}catch(e){k=!0,x=e}finally{try{w||null==j.return||j.return()}finally{if(k)throw x}}}}catch(e){b=!0,g=e}finally{try{m||null==O.return||O.return()}finally{if(b)throw g}}}return Promise.resolve({analysisGroups:o,patientToAnalysisGroups:i})}})}),Object.defineProperty(ye(n),"sortedGroupedSurvivals",{enumerable:!0,configurable:!0,writable:!0,value:(0,l.$w)({await:function(){return[n.analysisGroupsComputations,n.props.store.patientSurvivals]},invoke:function(){var e=n.analysisGroupsComputations.result.patientToAnalysisGroups,t=h().mapValues(n.props.store.patientSurvivals.result,(function(t){return h().reduce(t,(function(t,n){n.uniquePatientKey in e&&e[n.uniquePatientKey].forEach((function(e){t[e]=t[e]||[],t[e].push(n)}));return t}),{})}));return Promise.resolve(h().mapValues(t,(function(e){return h().mapValues(e,(function(e){return e.sort((function(e,t){return e.months-t.months}))}))})))}})}),Object.defineProperty(ye(n),"pValuesByPrefix",{enumerable:!0,configurable:!0,writable:!0,value:(0,l.$w)({await:function(){return[n.sortedGroupedSurvivals,n.analysisGroupsComputations]},invoke:function(){var e=n.analysisGroupsComputations.result.analysisGroups;return Promise.resolve(h().mapValues(n.sortedGroupedSurvivals.result,(function(t){var n=null;return e.length>1&&(n=ce.M.apply(void 0,pe(e.map((function(e){return t[e.value]||[]}))))),n})))}})}),Object.defineProperty(ye(n),"qValuesByPrefix",{enumerable:!0,configurable:!0,writable:!0,value:(0,l.$w)({await:function(){return[n.pValuesByPrefix]},invoke:function(){var e=h().map(n.pValuesByPrefix.result,(function(e,t){return{pVal:e,prefix:t}})),t=h().sortBy(e.filter((function(e){return null!==e.pVal})),(function(e){return e.pVal})),r=(0,ue.f)(t.map((function(e){return e.pVal}))),o=h().clone(n.pValuesByPrefix.result);return t.forEach((function(e,t){o[e.prefix]=r[t]})),Promise.resolve(o)}})}),Object.defineProperty(ye(n),"tabUI",{enumerable:!0,configurable:!0,writable:!0,value:(0,s.F)({await:function(){return n.props.store._activeGroupsNotOverlapRemoved.isComplete&&n.props.store._activeGroupsNotOverlapRemoved.result.length>10?[n.props.store._activeGroupsNotOverlapRemoved]:[n.props.store._activeGroupsNotOverlapRemoved,n.survivalUI,n.props.store.overlapComputations,n.survivalPrefixTable]},render:function(){var e=n.props.store._activeGroupsNotOverlapRemoved.result.length,t=[];if(e>10)t=r.createElement("span",null,u.p4);else if(0===e)t=r.createElement("span",null,u.LO);else{var o=n.props.store.studies.result.find((function(e){return e.studyId.includes("genie_bpc")}));t=r.createElement(r.Fragment,null,r.createElement("div",{className:"tabMessageContainer",style:{paddingBottom:0}},(0,u.PK)(),o&&r.createElement("div",{className:"alert alert-info"},r.createElement("i",{className:"fa fa-md fa-info-circle",style:{verticalAlign:"middle !important",marginRight:6,marginBottom:1}}),"Kaplan-Meier estimates do not account for the lead time bias introduced by the inclusion criteria for the GENIE BPC Project."),r.createElement(f.Z,{store:n.props.store,only:"patient",survivalTabMode:!0})),r.createElement("div",{style:{display:"flex"}},n.survivalPrefixTable.component&&r.createElement("div",{style:{marginRight:15,marginTop:15,minWidth:475,maxWidth:475,height:"fit-content",overflowX:"scroll"}},n.survivalPrefixTable.component),n.survivalUI.component))}return r.createElement("div",{"data-test":"ComparisonPageSurvivalTabDiv"},t)},renderPending:function(){return r.createElement(i.Z,{center:!0,isLoading:!0,size:"big"})},renderError:function(){return r.createElement(c.Z,null)},showLastRenderWhenPending:!0})}),Object.defineProperty(ye(n),"survivalPrefixTable",{enumerable:!0,configurable:!0,writable:!0,value:(0,s.F)({await:function(){return[n.survivalTitleText,n.props.store.patientSurvivals,n.pValuesByPrefix,n.qValuesByPrefix,n.analysisGroupsComputations]},render:function(){var e=n.props.store.patientSurvivals.result,t=n.analysisGroupsComputations.result.analysisGroups,o=h().keyBy(t,(function(e){return e.value})),i=n.analysisGroupsComputations.result.patientToAnalysisGroups,a=n.pValuesByPrefix.result,l=n.qValuesByPrefix.result,s=n.survivalTitleText.result;return Object.keys(s).length>1?r.createElement(se,{groupNames:t.map((function(e){return e.name})),survivalPrefixes:h().map(n.survivalTitleText.result,(function(n,r){var s=h().mapValues(h().keyBy(t,(function(e){return e.name})),(function(){return[]})),u=!0,c=!1,p=void 0;try{for(var f,d=e[r][Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var y=f.value,m=i[y.uniquePatientKey]||[],b=!0,g=!1,v=void 0;try{for(var O,P=m[Symbol.iterator]();!(b=(O=P.next()).done);b=!0){var S=O.value;s[o[S].name].push(y)}}catch(e){g=!0,v=e}finally{try{b||null==P.return||P.return()}finally{if(g)throw v}}}}catch(e){c=!0,p=e}finally{try{u||null==d.return||d.return()}finally{if(c)throw p}}return{prefix:r,displayText:n,numPatients:h().sumBy(e[r],(function(e){return e.uniquePatientKey in i?1:0})),numPatientsPerGroup:h().mapValues(s,(function(e){return e.length})),medianPerGroup:h().mapValues(s,(function(e){var t=h().sortBy(e,(function(e){return e.months}));return(0,_.rV)(t,(0,_.i4)(t))})),pValue:a[r],qValue:l[r]}})),getSelectedPrefix:function(){return n.selectedSurvivalPlotPrefix},setSelectedPrefix:n.setSurvivalPlotPrefix}):null}})}),Object.defineProperty(ye(n),"survivalTitleText",{enumerable:!0,configurable:!0,writable:!0,value:(0,l.$w)({await:function(){return[n.props.store.survivalClinicalAttributesPrefix,n.props.store.survivalDescriptions]},invoke:function(){return Promise.resolve(n.props.store.survivalClinicalAttributesPrefix.result.reduce((function(e,t){return e[t]=(0,_.BR)(n.props.store.survivalDescriptions.result[t][0].displayName),e}),{}))}})}),Object.defineProperty(ye(n),"survivalYLabel",{enumerable:!0,configurable:!0,writable:!0,value:(0,l.$w)({await:function(){return[n.props.store.survivalClinicalAttributesPrefix,n.props.store.survivalDescriptions]},invoke:function(){return Promise.resolve(n.props.store.survivalClinicalAttributesPrefix.result.reduce((function(e,t){return e[t]=(0,_.QU)(n.props.store.survivalDescriptions.result[t][0].displayName),e}),{}))}})}),Object.defineProperty(ye(n),"survivalUI",{enumerable:!0,configurable:!0,writable:!0,value:(0,s.F)({await:function(){return[n.props.store.survivalDescriptions,n.props.store.survivalXAxisLabelGroupByPrefix,n.props.store.survivalClinicalAttributesPrefix,n.props.store.patientSurvivals,n.props.store.activeStudiesClinicalAttributes,n.analysisGroupsComputations,n.props.store.overlapComputations,n.props.store.uidToGroup,n.survivalTitleText,n.survivalYLabel,n.sortedGroupedSurvivals,n.pValuesByPrefix]},render:function(){var e=null,t=null,i=n.analysisGroupsComputations.result.analysisGroups,a=n.analysisGroupsComputations.result.patientToAnalysisGroups,s={},u=n.survivalTitleText.result,c=n.survivalYLabel.result;if(n.props.store.survivalClinicalAttributesPrefix.result.forEach((function(e){s[e]=1===n.props.store.survivalDescriptions.result[e].length?n.props.store.survivalDescriptions.result[e][0].description:""})),void 0!==n.selectedSurvivalPlotPrefix||h().isEmpty(n.props.store.patientSurvivals.result)||n.setSurvivalPlotPrefix(h().keys(n.props.store.patientSurvivals.result)[0]),n.selectedSurvivalPlotPrefix){var p=n.props.store.patientSurvivals.result[n.selectedSurvivalPlotPrefix],f=n.selectedSurvivalPlotPrefix;if(p.length>0){if(n.props.store.survivalDescriptions&&n.props.store.survivalDescriptions.result[f].length>1){var d=n.multipleDescriptionWarningMessageWithoutTooltip;h().uniq(h().map(n.props.store.survivalDescriptions.result[f],(function(e){return e.description}))).length>1&&(d="".concat(n.differentDescriptionExistMessage," ").concat(d)),t=r.createElement("div",{className:"tabMessageContainer"},r.createElement("div",{className:"alert alert-warning",role:"alert"},d,r.createElement(l.ZD,{placement:"bottom",overlay:r.createElement(C,{survivalDescriptionData:n.props.store.survivalDescriptions.result[f]})},r.createElement("a",{href:"javascript:void(0)"},n.multipleDescriptionWarningMessageWithTooltip))))}e=r.createElement("div",{style:{marginBottom:40}},r.createElement("h4",{className:"forceHeaderStyle h4"},u[f]),r.createElement("p",null,s[f]),r.createElement("div",{className:"borderedChart",style:{width:"920px"}},r.createElement(o.Z,{key:f,sortedGroupedSurvivals:n.sortedGroupedSurvivals.result[n.selectedSurvivalPlotPrefix],analysisGroups:i,patientToAnalysisGroups:a,title:u[f],xAxisLabel:n.props.store.survivalXAxisLabelGroupByPrefix.result[f],yAxisLabel:c[f],totalCasesHeader:"Number of Cases, Total",statusCasesHeader:"Number of Events",medianMonthsHeader:"Median Months ".concat(u[f]," (95% CI)"),yLabelTooltip:_.Ic,xLabelWithEventTooltip:_.qm,xLabelWithoutEventTooltip:_.jM,fileName:u[f].replace(" ","_"),showCurveInTooltip:!0,legendLabelComponent:n.props.store.overlapStrategy===T.T.INCLUDE?r.createElement(j.U,{maxLabelWidth:256,uidToGroup:n.props.store.uidToGroup.result,dy:"0.3em"}):r.createElement(j.C,{maxLabelWidth:256,uidToGroup:n.props.store.uidToGroup.result,dy:"0.3em"}),styleOpts:{tooltipYOffset:-28},pValue:n.pValuesByPrefix.result[n.selectedSurvivalPlotPrefix]})))}else e=r.createElement("div",{className:"alert alert-info"},u[f]," not available")}return r.createElement("div",null,r.createElement("div",{className:R().survivalPlotHeaderContainer},r.createElement("div",{className:R().survivalPlotHeader},r.createElement("ul",{className:"nav nav-pills"},t))),e)},renderPending:function(){return r.createElement(i.Z,{center:!0,isLoading:!0,size:"big"})},renderError:function(){return r.createElement(c.Z,null)}})}),(0,G.makeObservable)(ye(n)),n}var n,a,y;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&he(e,t)}(t,e),n=t,(a=[{key:"setSurvivalPlotPrefix",value:function(e){this.selectedSurvivalPlotPrefix=e}},{key:"render",value:function(){return this.tabUI.component}}])&&fe(n.prototype,a),y&&fe(n,y),t}(r.Component);be([G.observable],ge.prototype,"selectedSurvivalPlotPrefix",void 0),be([G.action.bound],ge.prototype,"setSurvivalPlotPrefix",null);const ve=ge=be([a.observer],ge)},42764:(e,t,n)=>{"use strict";n.d(t,{Z:()=>fe});var r=n(88034),o=n(27808),i=n(35770),a=n(36903),l=n(93527),s=n(5933),u=n(76127),c=n.n(u),p=n(6790),f=n.n(p),d=n(57761),y=n(18667),h=n(48003),m=n(24440),b=n(65587),g=n(56066),v=n(79280),O=n(78566);function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var C=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":x(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},j=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?w(e):t}(this,E(t).call(this,e)),Object.defineProperty(w(n),"hovered",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(w(n),"button",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(w(n),"hoverTimeout",{enumerable:!0,configurable:!0,writable:!0,value:null}),(0,O.makeObservable)(w(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,e),n=t,(o=[{key:"buttonRef",value:function(e){this.button=e}},{key:"onMouseClick",value:function(){this.hovered=!1}},{key:"onMouseEnter",value:function(){var e=this;this.hoverTimeout=setTimeout((function(){e.hovered=!0}),b.tA)}},{key:"onMouseLeave",value:function(){this.hovered=!1,clearTimeout(this.hoverTimeout),this.hoverTimeout=null}},{key:"onMouseDown",value:function(){this.hovered=!1}},{key:"render",value:function(){var e,t=this,n=this.props.group,o=this.props.isSelected(n.name),i=(0,d.b)([n]),a=(0,d.x1)(i,this.props.sampleSet);return r.createElement("button",{ref:this.buttonRef,className:c()("btn btn-xs",(e={},P(e,f().buttonUnselected,!o),P(e,f().buttonExcludedFromAnalysis,this.props.excludedFromAnalysis),e)),onClick:this.onMouseClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseDown:this.onMouseDown,style:{backgroundColor:n.color},"data-test":"groupSelectorButton".concat(n.name)},r.createElement("span",{style:{display:"flex",alignItems:"center"}},r.createElement("div",{style:{display:"flex",alignItems:"center"},onClick:function(){return t.props.onClick(n.name)}},r.createElement("div",{className:"text-with-ellipsis",style:{display:"inline-block",color:(0,m.uu)(n.color),maxWidth:200}},(0,m.$k)(n))," ",r.createElement("span",{style:{color:(0,m.uu)(n.color)}},"(",i.length===a.length?i.length:"".concat(i.length,"/").concat(a.length),")")),n.nonExistentSamples.length>0&&r.createElement(y.Z,{style:{marginLeft:7},tooltip:r.createElement(d.Mt,{samples:n.nonExistentSamples})}),this.props.deletable&&r.createElement("div",{style:{paddingLeft:2,marginLeft:5,marginRight:-3,borderLeft:"1px dashed white",cursor:"pointer"},"data-test":"deleteButton",onClick:function(){return t.props.onClickDelete(n.name)}},r.createElement("i",{className:"fa fa-times-circle"}))),this.button&&g.createPortal(r.createElement(v.Overlay,{rootClose:!0,placement:"top",show:this.hovered,target:this.button},r.createElement(v.Popover,{arrowOffsetTop:17,className:c()("cbioportal-frontend","cbioTooltip")},r.createElement("div",null,(0,m.$k)(n)," ",(0,d.Bm)(i,a),n.description&&" - ".concat(n.description)),this.props.excludedFromAnalysis&&r.createElement("div",{style:{maxWidth:300,whiteSpace:"initial",marginTop:5}},"This group is a subset of the other selected groups, so it's excluded from analysis, and not considered in overlap calculations."))),document.body))}}])&&S(n.prototype,o),i&&S(n,i),t}(r.Component);C([O.observable],j.prototype,"hovered",void 0),C([O.observable.ref],j.prototype,"button",void 0),C([O.action.bound],j.prototype,"buttonRef",null),C([O.action.bound],j.prototype,"onMouseClick",null),C([O.action.bound],j.prototype,"onMouseEnter",null),C([O.action.bound],j.prototype,"onMouseLeave",null),C([O.action.bound],j.prototype,"onMouseDown",null),j=C([o.observer],j);const T=(0,h.SortableElement)(j);function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var D=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},N=function(e){function t(){return _(this,t),A(this,R(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){return r.createElement("div",{className:f().groupButtons},r.createElement("div",null,this.props.buttons))}}])&&G(n.prototype,o),i&&G(n,i),t}(r.Component);N=D([o.observer],N);const I=(0,h.SortableContainer)(N);function V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e,t){return!t||"object"!==z(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var q=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":z(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Z=function(e){function t(){return V(this,t),U(this,F(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){return r.createElement("div",{style:{display:"inline-flex",whiteSpace:"nowrap",paddingLeft:7,paddingRight:7}},r.createElement("a",{onClick:this.props.store.selectAllGroups},"Select all")," | ",r.createElement("a",{onClick:this.props.store.deselectAllGroups},"Deselect all"))}}])&&B(n.prototype,o),i&&B(n,i),t}(r.Component);Z=q([o.observer],Z);const H=(0,h.SortableElement)(Z);var Q=n(18474);function K(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $(e,t){return!t||"object"!==ee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var te=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ee(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ne=function(e){function t(){return K(this,t),$(this,X(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){return r.createElement("button",{className:c()("btn btn-xs btn-default"),onClick:this.props.toggleCollapsedGroups,"data-test":"groupSelectorCollapseButton"},this.props.collapsed?"".concat(this.props.numCollapsedGroups," more groups ").concat(String.fromCharCode(9660)):"Show less ".concat(String.fromCharCode(9650)))}}])&&Y(n.prototype,o),i&&Y(n,i),t}(r.Component);ne=te([o.observer],ne);const re=(0,h.SortableElement)(ne);function oe(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function le(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ce=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ue(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},pe=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==ue(t)&&"function"!=typeof t?le(e):t}(this,ae(t).call(this,e)),Object.defineProperty(le(n),"collapsedGroupsShown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(le(n),"dragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(le(n),"tabUI",{enumerable:!0,configurable:!0,writable:!0,value:(0,i.F)({await:function(){return[n.props.store._originalGroups,n.props.store.sampleMap,n.props.store.overlapComputations]},render:function(){var e=n.props.store._originalGroups.result.length;if(0===e)return null;var t,o=[];if(void 0===n.props.groupCollapseThreshold||e<=n.props.groupCollapseThreshold||n.collapsedGroupsShown?o=n.props.store._originalGroups.result.map(n.makeGroupButton):(t=o).push.apply(t,oe(n.props.store._originalGroups.result.slice(0,n.props.groupCollapseThreshold-1).map(n.makeGroupButton))),void 0!==n.props.groupCollapseThreshold&&e>n.props.groupCollapseThreshold){var i=e-n.props.groupCollapseThreshold+1;o.push(r.createElement(re,{numCollapsedGroups:i,toggleCollapsedGroups:n.toggleCollapsedGroups,collapsed:!n.collapsedGroupsShown,disabled:!0,index:o.length}))}return o.push(r.createElement(H,{store:n.props.store,disabled:!0,index:o.length})),r.createElement("div",{style:{display:"flex",alignItems:"center",position:"relative"}},r.createElement("strong",{style:{marginRight:5}},"Groups: "),r.createElement("span",{style:{fontSize:12,marginRight:3}},"(drag to reorder)"),r.createElement(I,{buttons:o,axis:"xy",onSortStart:n.onSortStart,onSortEnd:n.onSortEnd,distance:6}))},renderPending:function(){return r.createElement(a.Z,{isLoading:!0,size:"big",center:!0})},renderError:function(){return r.createElement(l.Z,null)}})}),(0,O.makeObservable)(le(n)),n}var n,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&se(e,t)}(t,e),n=t,(o=[{key:"toggleCollapsedGroups",value:function(){this.collapsedGroupsShown=!this.collapsedGroupsShown}},{key:"isSelected",value:function(e){return!!this.props.store.isGroupSelected(e)}},{key:"onClick",value:function(e){this.dragging||this.props.store.toggleGroupSelected(e)}},{key:"onClickDelete",value:function(e){this.dragging||this.props.store.deleteGroup(e)}},{key:"onSortEnd",value:function(e){e.oldIndex!==e.newIndex&&this.props.store.updateGroupOrder(e.oldIndex,e.newIndex),this.dragging=!1}},{key:"onSortStart",value:function(){this.dragging=!0}},{key:"makeGroupButton",value:function(e,t){var n=this.props.store.overlapStrategy===Q.T.EXCLUDE&&e.uid in this.props.store.overlapComputations.result.excludedFromAnalysis;return r.createElement(T,{isSelected:this.isSelected,deletable:this.props.isGroupDeletable(e),onClick:this.onClick,onClickDelete:this.onClickDelete,sampleSet:this.props.store.sampleMap.result,group:e,index:t,excludedFromAnalysis:n})}},{key:"render",value:function(){return this.tabUI.component}}])&&ie(n.prototype,o),s&&ie(n,s),t}(r.Component);ce([O.observable],pe.prototype,"collapsedGroupsShown",void 0),ce([O.action.bound],pe.prototype,"toggleCollapsedGroups",null),ce([s.default],pe.prototype,"isSelected",null),ce([s.default],pe.prototype,"onClick",null),ce([s.default],pe.prototype,"onClickDelete",null),ce([s.default],pe.prototype,"onSortEnd",null),ce([s.default],pe.prototype,"onSortStart",null),ce([s.default],pe.prototype,"makeGroupButton",null);const fe=pe=ce([o.observer],pe)},1679:(e,t,n)=>{"use strict";n.d(t,{C:()=>u,U:()=>c});var r=n(88034),o=n(4259),i=n(24440),a=n(72903);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},u=function(e){var t=e.uidToGroup,n=e.dx,a=e.dy,u=(e.datum,e.text,s(e,["uidToGroup","dx","dy","datum","text"])),c=t[e.text];return r.createElement(o.Z,l({text:c.name,prefixTspans:c.ordinal.length>0?[r.createElement("tspan",null,"("),r.createElement("tspan",{style:{fontWeight:"bold"}},c.ordinal),r.createElement("tspan",null,") ")]:void 0,tooltip:function(){return r.createElement("div",null,(0,i.$k)(c))},maxWidth:e.maxLabelWidth,dy:a,dx:n},u))},c=function(e){var t=e.uidToGroup,n=e.dx,u=e.dy,c=(e.datum,e.text),p=s(e,["uidToGroup","dx","dy","datum","text"]),f=JSON.parse(c).map((function(e){return t[e]})),d=(f.map((function(e){return e.ordinal})),"Only ".concat(f.map((function(e){return e.ordinal?"(".concat(e.ordinal,")"):e.name})).join(", ")));return r.createElement(o.Z,l({text:d,renderTruncatedText:function(e){for(var t=[],n=0;n<e.length;n++){n>0&&n<e.length-1&&"("===e[n-1]&&")"===e[n+1]?t.push(r.createElement("tspan",{style:{fontWeight:"bold"}},e[n])):t.push(r.createElement("tspan",null,e[n]))}return t},alwaysShowTooltip:!0,tooltip:function(){return r.createElement("div",null,"Only"," ",(0,a.E)(r.createElement("span",null,", "),f.map((function(e){return(0,i.$k)(e)}))))},maxWidth:e.maxLabelWidth,dy:u,dx:n},p))}},87911:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var r=n(88034),o=n(27808),i=n(79280),a=n(5933),l=n(65587),s=n(49199);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var h=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":y(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},m=function(e){function t(){return u(this,t),p(this,f(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),n=t,(o=[{key:"onAddGenes",value:function(){(0,s.AO)(window.urlWrapper,this.props.checkedGenes)}},{key:"render",value:function(){var e=this.props.checkedGenes.length>0?"(".concat(this.props.checkedGenes.join(", "),")"):"(none checked)";return r.createElement("div",{style:{marginBottom:15}},r.createElement(l.ZD,{overlay:"Check genes in table below"},r.createElement(i.Button,{style:{marginBottom:2},disabled:this.props.checkedGenes.length<1,onClick:this.onAddGenes,bsSize:"xsmall"},"Add checked genes to query ",e)))}}])&&c(n.prototype,o),a&&c(n,a),t}(r.Component);h([a.default],m.prototype,"onAddGenes",null);const b=m=h([o.observer],m)},18648:(e,t,n)=>{"use strict";n.d(t,{Z:()=>A});var r=n(88034),o=n(27808),i=n(78566),a=n(21958),l=n.n(a),s=n(5933),u=n(92977),c=n(12004);function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var b=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":m(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},g=function(e){function t(){return p(this,t),d(this,y(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){return r.createElement(u.default,{name:this.props.name,value:this.props.value,onChange:this.props.onChange,options:(0,c.mY)(this.props.molecularProfiles),searchable:!1,clearable:!1,className:this.props.className})}}])&&f(n.prototype,o),i&&f(n,i),t}(r.Component);const v=g=b([o.observer],g);var O=n(57930),P=n.n(O),S=n(65587),E=n(8506),w=n.n(E);function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var _=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":T(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},G=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?C(e):t}(this,x(t).call(this,e)),(0,i.makeObservable)(C(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,e),n=t,(o=[{key:"change",value:function(e,t){var n=this,r=P().mapValues(this.props.selectedProfileByStudyId,(function(r,o){return e===o?n.molecularProfileMap[t.value]:n.molecularProfileMap[r.molecularProfileId]}));P().isEqual(this.props.selectedProfileByStudyId,r)||this.props.onChange(r)}},{key:"render",value:function(){var e=this;if(this.showEnrichmentsDataSetDropdown||this.props.alwaysShow){var t=P().groupBy(this.props.dataSets,(function(e){return e.studyId})),n=Object.keys(t).length>1;return P().map(t,(function(t,o){var i=P().find(t,(function(t){return t.molecularProfileId===e.props.selectedProfileByStudyId[o].molecularProfileId}));return r.createElement("div",{className:l().DataSet},r.createElement("div",{style:{display:"flex",alignItems:"center"}},r.createElement("strong",null,n?e.studiesMap[o].name+" ":"","Data Set:"),r.createElement("div",{style:{display:"inline-block",marginLeft:5,width:400}},r.createElement(v,{value:e.props.selectedProfileByStudyId[o].molecularProfileId,molecularProfiles:t,onChange:function(t){return e.change(o,t)}})),e.props.showDescription&&i.description&&r.createElement(S.ZD,{mouseEnterDelay:0,placement:"right",overlay:r.createElement("div",{className:l().ProfileTooltip},i.description)},r.createElement(w(),{className:l().ProfileInfoIcon,name:"info-circle"}))))}))}return null}},{key:"studiesMap",get:function(){return P().keyBy(this.props.studies,(function(e){return e.studyId}))}},{key:"molecularProfileMap",get:function(){return P().keyBy(this.props.dataSets,(function(e){return e.molecularProfileId}))}},{key:"showEnrichmentsDataSetDropdown",get:function(){var e=P().groupBy(this.props.dataSets,(function(e){return e.studyId}));return P().some(e,(function(e){return e.length>1}))}}])&&k(n.prototype,o),a&&k(n,a),t}(r.Component);_([s.default],G.prototype,"change",null),_([i.computed],G.prototype,"studiesMap",null),_([i.computed],G.prototype,"molecularProfileMap",null),_([i.computed],G.prototype,"showEnrichmentsDataSetDropdown",null);const A=G=_([o.observer],G)},97333:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,{v:()=>l});var l=function(e){function t(e,n,a){var l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?i(e):t}(this,o(t).call(this,e)),Object.defineProperty(i(l),"setHighlighted",{enumerable:!0,configurable:!0,writable:!0,value:a}),l.dataHighlighter=function(e){var t=n();return!(!t||e.entrezGeneId!==t.entrezGeneId)},l}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,e),t}(n(17502).Lq)},30188:(e,t,n)=>{"use strict";n.d(t,{Z:()=>L});var r=n(88034),o=n(27808),i=n(78566),a=n(21958),l=n.n(a),s=n(78631),u=n(57930),c=n.n(u),p=n(5933),f=n(17163),d=n(91989),y=n(65587),h=n(67145),m=n(36903),b=n(3563),g=n(62524),v=n(76127),O=n.n(v),P=n(40416),S=n(79666);function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?x(e):t}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var G=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":_(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},A=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function l(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}s((r=r.apply(e,t||[])).next())}))},R=function(e){function t(){return w(this,t),k(this,C(t).apply(this,arguments))}return j(t,e),t}(d.Z),M=function(e){function t(e){var n;return w(this,t),n=k(this,C(t).call(this,e)),Object.defineProperty(x(n),"svgContainer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(x(n),"horzAxisData",{enumerable:!0,configurable:!0,writable:!0,value:(0,y.$w)({await:function(){return[]},invoke:function(){return A(x(n),void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c().map(this.props.groups,(function(e){return e.name})),n={data:[],datatype:"string",categoryOrder:t},r=c().reduce(this.props.groups,(function(e,t){return t.samples.forEach((function(n){var r=n.uniqueSampleKey;void 0===e[r]&&(e[r]={uniqueSampleKey:r,value:[]}),e[r].value.push(t.name)})),e}),{}),n.data=c().values(r),e.abrupt("return",Promise.resolve(n));case 5:case"end":return e.stop()}}),e,this)})))}})}),Object.defineProperty(x(n),"vertAxisData",{enumerable:!0,configurable:!0,writable:!0,value:(0,y.$w)({invoke:function(){return A(x(n),void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r,o,i,a,l,s,u,p,f,d,y,m,b,g,v,O,P;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={data:[],datatype:"number"},void 0===this.props.selectedRow){e.next=62;break}if(!this.isGenericAssay){e.next=39;break}return e.next=5,h.Z.fetchGenericAssayDataInMolecularProfileUsingPOST({molecularProfileId:this.props.selectedProfile.molecularProfileId,genericAssayDataFilter:{genericAssayStableIds:[this.props.selectedRow.stableId],sampleIds:c().map(this.props.sampleKeyToSample,(function(e){return e.sampleId}))}});case 5:n=e.sent,r=t.data,o=!0,i=!1,a=void 0,e.prev=10,l=n[Symbol.iterator]();case 12:if(o=(s=l.next()).done){e.next=23;break}if(u=s.value,!/[<>]+/.test(u.value)){e.next=18;break}return e.abrupt("continue",20);case 18:p=parseFloat(u.value),r.push({uniqueSampleKey:u.uniqueSampleKey,value:p});case 20:o=!0,e.next=12;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(10),i=!0,a=e.t0;case 29:e.prev=29,e.prev=30,o||null==l.return||l.return();case 32:if(e.prev=32,!i){e.next=35;break}throw a;case 35:return e.finish(32);case 36:return e.finish(29);case 37:e.next=62;break;case 39:return e.next=41,h.Z.fetchAllMolecularDataInMolecularProfileUsingPOST({molecularProfileId:this.props.selectedProfile.molecularProfileId,molecularDataFilter:{entrezGeneIds:[this.props.selectedRow.entrezGeneId],sampleIds:c().map(this.props.sampleKeyToSample,(function(e){return e.sampleId}))}});case 41:for(f=e.sent,d=t.data,y=!0,m=!1,b=void 0,e.prev=46,g=f[Symbol.iterator]();!(y=(v=g.next()).done);y=!0)O=v.value,P=this.logScale?Math.log(O.value+1)/Math.log(2):O.value,d.push({uniqueSampleKey:O.uniqueSampleKey,value:P});e.next=54;break;case 50:e.prev=50,e.t1=e.catch(46),m=!0,b=e.t1;case 54:e.prev=54,e.prev=55,y||null==g.return||g.return();case 57:if(e.prev=57,!m){e.next=60;break}throw b;case 60:return e.finish(57);case 61:return e.finish(54);case 62:return e.abrupt("return",Promise.resolve(t));case 63:case"end":return e.stop()}}),e,this,[[10,25,29,37],[30,,32,36],[46,50,54,62],[55,,57,61]])})))}})}),Object.defineProperty(x(n),"boxPlotData",{enumerable:!0,configurable:!0,writable:!0,value:(0,y.$w)({await:function(){return[n.vertAxisData,n.horzAxisData]},invoke:function(){var e=n.horzAxisData.result,t=n.vertAxisData.result;if(e&&t){var r=e,o=t;return Promise.resolve((0,f.Qq)(r,o,n.props.sampleKeyToSample,{},void 0,void 0))}return new Promise((function(){return 0}))}})}),(0,i.makeObservable)(x(n)),n}var n,o,a;return j(t,e),n=t,(o=[{key:"getData",value:function(){return void 0!==this.props.selectedRow?(0,f.g$)(this.boxPlotData.result,"Group",this.axisLabelY,{}):""}},{key:"render",value:function(){var e=this,t=null;if(void 0===this.props.selectedRow)t=r.createElement("div",{className:O()("text-center",l().BoxEmpty)},"Click on ",this.isGenericAssay?"an entity":"gene"," in the table to render this plot.");else if(this.boxPlotData.isPending)t=r.createElement("div",{className:O()("text-center",l().BoxEmpty)},r.createElement(m.Z,{isLoading:!0,size:"small",className:l().ChartLoader}));else if(this.boxPlotData.isComplete&&this.boxPlotData.result.length>0){var n="Group";this.isGenericAssay||void 0===this.props.queriedHugoGeneSymbols||(n="Query: ".concat((0,P.sC)(this.props.queriedHugoGeneSymbols)));var o="";o=this.isGenericAssay?"".concat(this.props.selectedProfile.genericAssayType,"_enrichment"):"".concat(this.props.enrichmentType===s.x8.DNA_METHYLATION?"methylation":"expression","_enrichment"),t=r.createElement("div",{className:l().BoxPlot,"data-test":"MiniBoxPlot"},r.createElement(y.t_,{buttons:["SVG","PNG","Data"],getSvg:function(){return e.svgContainer},getData:this.getData,filename:o,dontFade:!0,style:{position:"absolute",right:10,top:10},type:"button"}),r.createElement(R,{domainPadding:10,startDataAxisAtZero:!0,boxWidth:this.boxPlotData.result.length>7?30:60,axisLabelY:this.axisLabelY,axisLabelX:n,data:this.boxPlotData.result,chartBase:320,scatterPlotTooltip:this.scatterPlotTooltip,horizontal:!1,fill:"#00AAF8",symbol:"circle",useLogSpaceTicks:!0,svgRef:function(t){return e.svgContainer=t},compressXAxis:!0,legendData:[{name:"p-Value: ".concat((0,b.C)(this.props.selectedRow.pValue,3,.01)),symbol:{fill:"none",strokeWidth:0}},{name:"q-Value: ".concat((0,b.C)(this.props.selectedRow.qValue,3,.01)),symbol:{fill:"none",strokeWidth:0}}]}))}return r.createElement("div",{style:{position:"relative",display:"inline-block"},className:"borderedChart"},t)}},{key:"logScale",get:function(){return this.props.selectedProfile.molecularProfileId.includes("rna_seq")}},{key:"isGenericAssay",get:function(){return!!this.props.genericAssayType}},{key:"entityName",get:function(){var e=this.props.selectedRow;return(0,S.kr)(e.stableId,(0,S.fG)(e.genericEntityMetaProperties,S.oU.NAME,e.stableId))}},{key:"axisLabelY",get:function(){return void 0!==this.props.selectedRow?this.isGenericAssay?"".concat(this.entityName,", ").concat(this.props.selectedProfile.name):"".concat(this.props.selectedRow.hugoGeneSymbol,", ").concat(this.props.selectedProfile.name).concat(this.logScale?" (log2)":""):""}},{key:"scatterPlotTooltip",get:function(){var e=this;return function(t){var n=void 0;if(e.props.oqlFilteredCaseAggregatedData){var o=e.props.oqlFilteredCaseAggregatedData?e.props.oqlFilteredCaseAggregatedData[t.uniqueSampleKey]:[];n="Alteration(s): "+(0,s.Yz)(o)}var i=r.createElement("span",null,"Loading... (this shouldnt appear because the box plot shouldnt be visible)");return e.boxPlotData.isComplete&&(i=e.isGenericAssay?r.createElement("div",null,r.createElement("a",{href:(0,g.Qk)(t.studyId,t.sampleId),target:"_blank"},r.createElement("b",null,t.sampleId)),r.createElement("br",null),e.entityName,": ",t.value.toFixed(3)):r.createElement("div",null,r.createElement("a",{href:(0,g.Qk)(t.studyId,t.sampleId),target:"_blank"},r.createElement("b",null,t.sampleId)),r.createElement("br",null),e.props.enrichmentType,e.logScale?" (log2)":"",":"," ",t.value.toFixed(3),!!n&&r.createElement("br",null),n)),i}}}])&&E(n.prototype,o),a&&E(n,a),t}(r.Component);Object.defineProperty(M,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{}}),G([i.observable],M.prototype,"svgContainer",void 0),G([p.default],M.prototype,"getData",null),G([i.computed],M.prototype,"logScale",null),G([i.computed],M.prototype,"isGenericAssay",null),G([i.computed],M.prototype,"axisLabelY",null),G([i.computed],M.prototype,"scatterPlotTooltip",null);const L=M=G([o.observer],M)},79083:(e,t,n)=>{"use strict";n.d(t,{Z:()=>k});var r=n(88034),o=n(27808),i=n(78566),a=n(92777),l=n(21958),s=n.n(l),u=n(78631),c=n(87911),p=n(70245),f=n(57930),d=n.n(f),y=n(5933),h=n(97333),m=n(65587),b=n(30188);function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var E=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":S(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},w=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?O(e):t}(this,v(t).call(this,e)),Object.defineProperty(O(n),"overExpressedFilter",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(O(n),"underExpressedFilter",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(O(n),"significanceFilter",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(O(n),"checkedGenes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(O(n),"clickedGeneHugo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(O(n),"clickedGeneEntrez",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(O(n),"selectedGenes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(O(n),"highlightedRow",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(O(n),"_expressedGroups",{enumerable:!0,configurable:!0,writable:!0,value:n.props.groups.map((function(e){return e.name}))}),Object.defineProperty(O(n),"svgContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(O(n),"dataStore",{enumerable:!0,configurable:!0,writable:!0,value:new h.v((function(){return n.filteredData}),(function(){return n.highlightedRow}),(function(e){n.highlightedRow=e}))}),(0,i.makeObservable)(O(n)),n}var n,o,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,e),n=t,(o=[{key:"filterByGene",value:function(e){return!this.selectedGenes||this.selectedGenes.includes(e)}},{key:"toggleSignificanceFilter",value:function(){this.significanceFilter=!this.significanceFilter}},{key:"onCheckGene",value:function(e){var t=this.checkedGenes.indexOf(e);-1!==t?this.checkedGenes.splice(t,1):this.checkedGenes.push(e)}},{key:"onGeneNameClick",value:function(e,t){this.clickedGeneHugo=e,this.clickedGeneEntrez=t}},{key:"onSelection",value:function(e){this.selectedGenes=e}},{key:"onSelectionCleared",value:function(){this.selectedGenes=null}},{key:"onChange",value:function(e){this._expressedGroups=d().map(e,(function(e){return e.value}))}},{key:"render",value:function(){if(0===this.props.data.length)return r.createElement("div",{className:"alert alert-info"},"No data/result available");var e=(0,u.Hy)(this.data,this.props.queriedHugoGeneSymbols||[]),t=d().maxBy(e,(function(e){return Math.ceil(Math.abs(e.x))}));return r.createElement("div",{className:s().Container},r.createElement("div",{className:s().ChartsPanel},this.isTwoGroupAnalysis&&r.createElement(p.Z,{data:e,selectedSet:this.selectedGenesSet,xAxisLeftLabel:this.group2.nameOfEnrichmentDirection||this.group2.name,xAxisRightLabel:this.group1.nameOfEnrichmentDirection||this.group1.name,xAxisDomain:Math.ceil(Math.abs(t.x)),xAxisTickValues:null,onGeneNameClick:this.onGeneNameClick,onSelection:this.onSelection,onSelectionCleared:this.onSelectionCleared}),r.createElement(b.Z,{selectedProfile:this.props.selectedProfile,groups:this.props.groups,sampleKeyToSample:this.props.sampleKeyToSample,queriedHugoGeneSymbols:this.props.queriedHugoGeneSymbols,oqlFilteredCaseAggregatedData:this.props.oqlFilteredCaseAggregatedData,selectedRow:this.selectedRow,enrichmentType:this.props.enrichmentType})),r.createElement("div",{className:s().TableContainer},r.createElement("div",null,r.createElement("h3",null,this.props.selectedProfile.name),!!this.props.isGeneCheckBoxEnabled&&r.createElement(c.Z,{checkedGenes:this.checkedGenes})),r.createElement("hr",{style:{marginTop:0,marginBottom:5,borderWidth:2}}),r.createElement("div",{className:s().Checkboxes},r.createElement("div",{style:{width:250,marginRight:7}},r.createElement(m.uH,{name:"groupsSelector",placeholder:this.props.groupsSelectorPlaceholder,onChange:this.onChange,options:this.options,value:this.selectedValues})),r.createElement("div",{className:s().FlexCheckbox},r.createElement("label",null,r.createElement("input",{type:"checkbox",checked:this.significanceFilter,onClick:this.toggleSignificanceFilter}),"Significant only"))),r.createElement(a.Z,{data:this.filteredData,onCheckGene:this.props.isGeneCheckBoxEnabled?this.onCheckGene:void 0,onGeneNameClick:this.onGeneNameClick,dataStore:this.dataStore,mutexTendency:this.props.alteredVsUnalteredMode,checkedGenes:this.props.isGeneCheckBoxEnabled?this.checkedGenes:void 0,visibleOrderedColumnNames:this.visibleOrderedColumnNames,customColumns:d().keyBy(this.customColumns,(function(e){return e.uniqueName||e.name}))})))}},{key:"data",get:function(){return(0,u.WW)(this.props.data,this.props.queriedHugoGeneSymbols||[],this.props.groups)}},{key:"filteredData",get:function(){return(0,u.a)(this.data,this._expressedGroups,this.significanceFilter,this.filterByGene)}},{key:"group1",get:function(){return this.props.groups[0]}},{key:"group2",get:function(){return this.props.groups[1]}},{key:"group1CheckboxLabel",get:function(){return this.props.alteredVsUnalteredMode?"Over-expressed":r.createElement("span",{style:{display:"flex",alignItems:"center"}},"Enriched in ",r.createElement(m.CQ,{text:this.group1.name}))}},{key:"group2CheckboxLabel",get:function(){return this.props.alteredVsUnalteredMode?"Under-expressed":r.createElement("span",{style:{display:"flex",alignItems:"center"}},"Enriched in ",r.createElement(m.CQ,{text:this.group2.name}))}},{key:"selectedGenesSet",get:function(){return d().keyBy(this.selectedGenes||[])}},{key:"isTwoGroupAnalysis",get:function(){return 2==this.props.groups.length}},{key:"customColumns",get:function(){return(0,u.M)(this.props.groups,this.props.enrichmentType,this.props.alteredVsUnalteredMode)}},{key:"visibleOrderedColumnNames",get:function(){var e=[];return e.push(a.S.GENE,a.S.CYTOBAND),this.props.groups.forEach((function(t){e.push(t.name+" mean")})),this.props.groups.forEach((function(t){e.push(t.name+" standard deviation")})),this.isTwoGroupAnalysis&&e.push(a.S.LOG_RATIO),e.push(a.S.P_VALUE,a.S.Q_VALUE),this.isTwoGroupAnalysis&&this.props.alteredVsUnalteredMode?e.push(a.S.TENDENCY):this.props.enrichmentType===u.x8.DNA_METHYLATION?e.push(a.S.METHYLATION):e.push(a.S.EXPRESSED),e}},{key:"selectedValues",get:function(){return this._expressedGroups.map((function(e){return{value:e}}))}},{key:"options",get:function(){return d().map(this.props.groups,(function(e){return{label:e.nameOfEnrichmentDirection?e.nameOfEnrichmentDirection:e.name,value:e.name}}))}},{key:"selectedRow",get:function(){var e=this;if(this.clickedGeneHugo)return this.props.data.filter((function(t){return t.hugoGeneSymbol===e.clickedGeneHugo}))[0]}}])&&g(n.prototype,o),l&&g(n,l),t}(r.Component);Object.defineProperty(w,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{alteredVsUnalteredMode:!0,isGeneCheckBoxEnabled:!1,groupsSelectorPlaceholder:"High expression in ..."}}),E([i.observable],w.prototype,"overExpressedFilter",void 0),E([i.observable],w.prototype,"underExpressedFilter",void 0),E([i.observable],w.prototype,"significanceFilter",void 0),E([i.observable.shallow],w.prototype,"checkedGenes",void 0),E([i.observable.ref],w.prototype,"clickedGeneHugo",void 0),E([i.observable],w.prototype,"clickedGeneEntrez",void 0),E([i.observable.ref],w.prototype,"selectedGenes",void 0),E([i.observable.ref],w.prototype,"highlightedRow",void 0),E([i.observable.ref],w.prototype,"_expressedGroups",void 0),E([i.observable],w.prototype,"svgContainer",void 0),E([i.computed],w.prototype,"data",null),E([i.computed],w.prototype,"filteredData",null),E([y.default],w.prototype,"filterByGene",null),E([y.default],w.prototype,"toggleSignificanceFilter",null),E([y.default],w.prototype,"onCheckGene",null),E([y.default],w.prototype,"onGeneNameClick",null),E([y.default],w.prototype,"onSelection",null),E([y.default],w.prototype,"onSelectionCleared",null),E([i.computed],w.prototype,"group1",null),E([i.computed],w.prototype,"group2",null),E([i.computed],w.prototype,"group1CheckboxLabel",null),E([i.computed],w.prototype,"group2CheckboxLabel",null),E([i.computed],w.prototype,"selectedGenesSet",null),E([i.computed],w.prototype,"isTwoGroupAnalysis",null),E([i.computed],w.prototype,"customColumns",null),E([i.computed],w.prototype,"visibleOrderedColumnNames",null),E([i.action.bound],w.prototype,"onChange",null),E([i.computed],w.prototype,"selectedValues",null),E([i.computed],w.prototype,"options",null),E([i.computed],w.prototype,"selectedRow",null);const k=w=E([o.observer],w)},67526:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(88034),o=n(5933);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},f=function(e){function t(){return i(this,t),l(this,s(t).apply(this,arguments))}var n,o,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),n=t,(o=[{key:"onMouseOver",value:function(e){e.target.setAttribute("r",10),this.props.onMouseOver(this.props.datum,this.props.x,this.props.y)}},{key:"onMouseOut",value:function(e){e.target.setAttribute("r",3),this.props.onMouseOut()}},{key:"render",value:function(){return r.createElement("circle",{cx:this.props.x,cy:this.props.y,r:"3",onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,style:Object.assign({},this.props.style,{fill:this.props.fill(this.props.datum)})})}}])&&a(n.prototype,o),c&&a(n,c),t}(r.Component);p([o.default],f.prototype,"onMouseOver",null),p([o.default],f.prototype,"onMouseOut",null)},70245:(e,t,n)=>{"use strict";n.d(t,{Z:()=>P});var r=n(88034),o=n(27808),i=n(49572),a=n(78566),l=n(79280),s=n(71780),u=n(3563),c=n(5933),p=n(17299),f=n(67526),d=n(65587);function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var v=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":g(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},O=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?m(e):t}(this,h(t).call(this,e)),Object.defineProperty(m(n),"tooltipModel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(m(n),"svgContainer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(m(n),"dragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),(0,a.makeObservable)(m(n)),n}var n,c,v;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,e),n=t,(c=[{key:"svgRef",value:function(e){this.svgContainer=e&&e.children?e.children[0]:null}},{key:"handleSelection",value:function(e,t,n){this.props.onSelection(e[0].data.map((function(e){return e.hugoGeneSymbol})))}},{key:"handleSelectionCleared",value:function(){this.tooltipModel&&this.props.onGeneNameClick&&this.props.onGeneNameClick(this.tooltipModel.hugoGeneSymbol,this.tooltipModel.entrezGeneId),this.props.onSelectionCleared()}},{key:"onPointMouseOver",value:function(e,t,n){this.tooltipModel=e,this.tooltipModel.x=t,this.tooltipModel.y=n}},{key:"onPointMouseOut",value:function(){this.tooltipModel=null}},{key:"getTooltip",value:function(){return this.tooltipModel?r.createElement(l.Popover,{className:"cbioTooltip",positionLeft:this.tooltipModel.x+15,positionTop:this.tooltipModel.y-33},this.tooltipTitle,r.createElement("br",null),"Log Ratio: ",(0,s.fm)(this.tooltipModel.logRatio),r.createElement("br",null),"p-Value:"," ",(0,u.C)(this.tooltipModel.pValue,3,.01),r.createElement("br",null),"q-Value:"," ",(0,u.C)(this.tooltipModel.qValue,3,.01)):r.createElement("span",null)}},{key:"onClick",value:function(){this.dragging||this.handleSelectionCleared(),this.dragging=!1}},{key:"onSelectionComponentRender",value:function(){this.dragging=!0}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:"posRelative"},r.createElement("div",{className:"borderedChart inlineBlock",style:{position:"relative"},onClick:this.onClick},r.createElement(i.VictoryChart,{containerComponent:r.createElement(i.VictorySelectionContainer,{containerRef:this.svgRef,activateSelectedData:!1,onSelection:function(t,n,r){return e.handleSelection(t,n,r)},responsive:!1,onSelectionCleared:this.handleSelectionCleared,selectionComponent:r.createElement(p.Z,{onRender:this.onSelectionComponentRender})}),theme:d.Nv,domainPadding:{y:20},height:350,width:350,padding:{top:40,bottom:60,left:60,right:40},singleQuadrantDomainPadding:!1},r.createElement(i.VictoryAxis,{tickValues:this.props.xAxisTickValues,domain:[-this.props.xAxisDomain,this.props.xAxisDomain],label:"Log Ratio",tickFormat:function(e){return e>=1e3||e<=-1e3?"".concat(e/1e3,"k"):e},style:{tickLabels:{padding:20},axisLabel:{padding:40},ticks:{size:0},grid:{strokeOpacity:1}},crossAxis:!1,orientation:"bottom",offsetY:60}),r.createElement(i.VictoryAxis,{label:"-log10 p-Value",dependentAxis:!0,tickCount:4,style:{tickLabels:{padding:135},axisLabel:{padding:165},ticks:{size:0},grid:{strokeOpacity:1}}}),r.createElement(i.VictoryLabel,{style:d._m,text:"← "+this.xAxisLeftLabel,x:60,y:300}),r.createElement(i.VictoryLabel,{style:d._m,text:this.xAxisRightLabel+" →",textAnchor:"end",x:310,y:300}),r.createElement(i.VictoryLabel,{style:d._m,text:"Significance →",x:320,y:210,angle:-90}),r.createElement(i.VictoryScatter,{style:{data:{fillOpacity:.4}},data:this.props.data,dataComponent:r.createElement(f.Z,{onMouseOver:this.onPointMouseOver,onMouseOut:this.onPointMouseOut,fill:this.scatterFillColorFunction})})),r.createElement(d.t_,{getSvg:function(){return e.svgContainer},filename:"enrichments-volcano",dontFade:!0,type:"button",style:{position:"absolute",top:10,right:10,zIndex:0}})),r.createElement(o.Observer,null,this.getTooltip))}},{key:"tooltipTitle",get:function(){return"Gene: ".concat(this.tooltipModel.hugoGeneSymbol)}},{key:"totalLabelWidths",get:function(){return(0,d.mY)(this.props.xAxisLeftLabel,"Arial","13px")+(0,d.mY)(this.props.xAxisRightLabel,"Arial","13px")}},{key:"xAxisLeftLabel",get:function(){return this.totalLabelWidths>200?(0,d.uC)(this.props.xAxisLeftLabel,90,"Arial","13px"):this.props.xAxisLeftLabel}},{key:"xAxisRightLabel",get:function(){return this.totalLabelWidths>180?(0,d.uC)(this.props.xAxisRightLabel,90,"Arial","13px"):this.props.xAxisRightLabel}},{key:"scatterFillColorFunction",get:function(){var e=this;return function(t){return t.hugoGeneSymbol in e.props.selectedSet?"#FE9929":t.qValue<.05?"#58ACFA":"#D3D3D3"}}}])&&y(n.prototype,c),v&&y(n,v),t}(r.Component);v([a.observable],O.prototype,"tooltipModel",void 0),v([a.observable],O.prototype,"svgContainer",void 0),v([a.action.bound],O.prototype,"svgRef",null),v([c.default],O.prototype,"handleSelectionCleared",null),v([a.action.bound],O.prototype,"onPointMouseOver",null),v([a.action.bound],O.prototype,"onPointMouseOut",null),v([c.default],O.prototype,"getTooltip",null),v([c.default],O.prototype,"onClick",null),v([c.default],O.prototype,"onSelectionComponentRender",null),v([a.computed],O.prototype,"xAxisLeftLabel",null),v([a.computed],O.prototype,"xAxisRightLabel",null);const P=O=v([o.observer],O)},17299:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(88034);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},p=function(e){function t(){return i(this,t),l(this,s(t).apply(this,arguments))}var n,o,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.onRender,n=c(e,["onRender"]);return(n.width>5||n.height>5)&&t(),r.createElement("rect",n)}}])&&a(n.prototype,o),p&&a(n,p),t}(r.Component)},40416:(e,t,n)=>{"use strict";n.d(t,{Fq:()=>s,sC:()=>u,Rs:()=>c,Bu:()=>p});var r=n(71780),o=n(88034),i=n(57930),a=n.n(i),l=n(62524);function s(e,t){if(e.length!==t.length){var n=1===t.length?"patient":"patients",r=1===e.length?"sample":"samples";return o.createElement("span",null,o.createElement("strong",null,t.length)," ",n," /"," ",o.createElement("strong",null,e.length)," ",r)}var i=1===e.length?"patient/sample":"patients/samples";return o.createElement("span",null,o.createElement("strong",null,e.length)," ",i)}function u(e){switch(e.length){case 0:return"";case 1:return e[0];case 2:return e.join(" & ");default:return"".concat(e[0],", ").concat(e[1]," & ").concat(3===e.length?e[2]:"".concat(e.length-2," other genes"))}}function c(e,t,n,i,a){var l="Queried gene".concat(1!==a?"s are":" is"," altered in"),s="".concat(n," (").concat((0,r.DU)(n/e),") of queried");return e!==t?o.createElement("strong",{style:{display:"flex"}},o.createElement("span",{style:{marginRight:13}},l),o.createElement("table",null,o.createElement("tr",null,o.createElement("td",null,"• ","".concat(i," (").concat((0,r.DU)(i/t),") of queried patients"))),o.createElement("tr",null,o.createElement("td",null,"• ","".concat(s," samples"))))):o.createElement("strong",null,o.createElement("span",null,"".concat(l," ").concat(s," patients/samples")))}function p(e,t,n,r,o){var i=a().some(o,(function(e){return"all_cases_in_study"===e.category})),s=[],u=n||r||!i;t.length>0&&u&&t.forEach((function(e){return s.push({sampleId:e.sampleId,studyId:e.studyId})}));var c=window.open((0,l.gN)("study",{id:e.map((function(e){return e.studyId})).join(",")}),"_blank");s.length>0&&(c.studyPageFilter="filterJson=".concat(JSON.stringify({sampleIdentifiers:s})))}},23280:(e,t,n)=>{"use strict";n.d(t,{_:()=>p});var r=n(88034),o=n(12401);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){return a(this,t),s(this,u(t).apply(this,arguments))}var n,i,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(i=[{key:"render",value:function(){return r.createElement(o.rU,{to:"/study?id=".concat(this.props.studyId),className:this.props.className},this.props.children)}}])&&l(n.prototype,i),p&&l(n,p),t}(r.Component)},72903:(e,t,n)=>{"use strict";function r(e,t){var n=t.indexOf(e);if(-1===n)return t.concat([e]);var r=t.slice();return r.splice(n,1),r}function o(e,t){for(var n=[],r=0;r<t.length;r++)n.push(t[r]),r<t.length-1&&n.push(e);return n}n.d(t,{f:()=>r,E:()=>o})},65483:e=>{e.exports={portalWidth:"frequencyPlotStyles-module__portalWidth__bPwxT",framedImage:"frequencyPlotStyles-module__framedImage__R6mzB",ChartControls:"frequencyPlotStyles-module__ChartControls__2YKR9"}},42539:e=>{e.exports={portalWidth:"styles-module__portalWidth__quCC8",framedImage:"styles-module__framedImage__2pTmh",scrollbar:"styles-module__scrollbar__-BNTg",handle:"styles-module__handle__2PODi"}},11230:e=>{e.exports={portalWidth:"styles-module__portalWidth__1mlqI",framedImage:"styles-module__framedImage__AkabG",wrapper:"styles-module__wrapper__29CoN",groupRow:"styles-module__groupRow__3Q2Y8",alterationRow:"styles-module__alterationRow__1G5NG",strike:"styles-module__strike__1ycDg"}}}]);