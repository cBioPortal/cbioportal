(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1018:function(e,t,r){e.exports=r(35)(705)},1020:function(e,t,r){e.exports=r(35)(200)},1021:function(e,t,r){e.exports=r(35)(419)},1023:function(e,t,r){e.exports=r(35)(202)},1024:function(e,t,r){e.exports=r(35)(717)},1025:function(e,t,r){e.exports=r(35)(243)},1026:function(e,t,r){e.exports=r(35)(745)},1027:function(e,t,r){e.exports=r(35)(746)},1028:function(e,t,r){e.exports=r(35)(450)},1029:function(e,t,r){e.exports=r(35)(704)},1030:function(e,t,r){e.exports=r(35)(447)},1032:function(e,t,r){e.exports=r(35)(165)},1033:function(e,t,r){e.exports=r(35)(367)},1034:function(e,t,r){e.exports=r(35)(750)},1035:function(e,t,r){e.exports=r(35)(151)},1036:function(e,t,r){e.exports=r(35)(455)},1037:function(e,t,r){e.exports=r(35)(204)},1041:function(e,t,r){"use strict";r.d(t,"a",function(){return g});var n=r(1),o=r(0),i=r(26),a=r.n(i),s=r(1042),l=r.n(s),u=r(12),c=r(870),p=r(856);function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var y=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},g=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=!(o=f(t).call(this,e))||"object"!==b(o)&&"function"!=typeof o?h(n):o,Object.defineProperty(h(r),"igvDiv",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(h(r),"igvBrowser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(h(r),"modifiedTrackNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(h(r),"lastRenderedTracks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),r}var r,i,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,o["Component"]),r=t,(i=[{key:"render",value:function(){return o.createElement("div",null,o.createElement("div",{ref:this.igvDivRefHandler,className:"igvContainer"}))}},{key:"componentDidMount",value:function(){var e=this;this.props.onRenderingStart&&this.props.onRenderingStart();var t={genome:this.props.genome,locus:this.props.locus,onLocusChange:this.props.onLocusChange};l.a.createBrowser(this.igvDiv,t).then(function(t){e.igvBrowser=t,e.igvDiv&&e.updateSearch(e.igvDiv,e.props.disableSearch),e.loadTrackList(t,n.cloneDeep(e.props.tracks)),e.lastRenderedTracks=e.props.tracks,e.props.onRenderingComplete&&e.props.onRenderingComplete()})}},{key:"shouldComponentUpdate",value:function(e){var t=!1;if(!1!==e.isVisible){var r=Object(p.f)(this.lastRenderedTracks||[],e.tracks||[]),n=this.props.genome!==e.genome,o=this.props.locus!==e.locus,i=this.props.disableSearch!==e.disableSearch;(t=n||r.length>0||o||i)&&(this.modifiedTrackNames=r)}return t}},{key:"componentDidUpdate",value:function(){this.igvBrowser&&this.props.locus&&this.igvBrowser.search(this.props.locus),this.igvBrowser&&this.modifiedTrackNames&&this.modifiedTrackNames.length>0&&(this.updateTracks(this.igvBrowser,this.modifiedTrackNames,this.tracksByName),this.modifiedTrackNames=void 0,this.lastRenderedTracks=this.props.tracks),this.igvDiv&&this.updateSearch(this.igvDiv,this.props.disableSearch)}},{key:"loadTrackList",value:function(e,t){var r=this;e.loadTrackList(t).then(function(){r.props.onRenderingComplete&&r.props.onRenderingComplete()}).catch(function(){r.props.onRenderingComplete&&r.props.onRenderingComplete()})}},{key:"updateTracks",value:function(e,t,r){var o=this;t.forEach(function(t){return e.removeTrackByName(t)});var i=t.map(function(e){return n.cloneDeep(r[e])}).filter(function(e){return void 0!==e});i.length>0&&(this.props.onRenderingStart&&this.props.onRenderingStart(),Object(c.a)(function(){o.loadTrackList(e,i)}))}},{key:"updateSearch",value:function(e,t){var r=a()(e).find(".igv-chromosome-select-widget-container select"),n=a()(e).find(".igv-search-container input");t?(n.attr("disabled","true"),r.attr("disabled","true")):(n.attr("disabled",null),r.attr("disabled",null))}},{key:"igvDivRefHandler",value:function(e){this.igvDiv=e}},{key:"tracksByName",get:function(){return Object(p.g)(this.props.tracks)}}])&&d(r.prototype,i),s&&d(r,s),t}();Object.defineProperty(g,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{genome:"hg19",locus:"all",disableSearch:!1}}),y([u.default],g.prototype,"igvDivRefHandler",null)},1042:function(e,t,r){e.exports=r(35)(898)},1043:function(e,t,r){"use strict";var n=r(0),o=r(2),i=r(9),a=r(17),s=r(5),l=r.n(s),u=r(3),c=r(856),p=r(222),d=r(74),f=r.n(d),h=r(12);function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var S=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":v(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},C=function(e){function t(e){var r,n,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=!(i=b(t).call(this,e))||"object"!==v(i)&&"function"!=typeof i?y(n):i,Object.defineProperty(y(r),"downloading",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object(o.makeObservable)(y(r)),r}var r,i,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,n["Component"]),r=t,(i=[{key:"render",value:function(){return n.createElement(u.i,{overlay:n.createElement("span",null,"Download a copy number segment file for the selected samples"),placement:this.props.tooltipPlacement},n.createElement(a.Button,{className:this.props.buttonClassName,onClick:this.handleDownload,disabled:this.downloading},n.createElement("i",{className:l()({fa:!0,"fa-cloud-download":!this.downloading,"fa-spinner fa-pulse":this.downloading})})))}},{key:"handleDownload",value:function(){var e=this;this.downloading=!0,Object(p.a)(this.props.promise,function(t){f()(Object(c.e)(t),e.props.filename),e.downloading=!1})}}])&&m(r.prototype,i),s&&m(r,s),t}();Object.defineProperty(C,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{filename:"segments.seg",buttonClassName:"btn btn-sm pull-right",tooltipPlacement:"left"}}),S([o.observable],C.prototype,"downloading",void 0),S([h.default],C.prototype,"handleDownload",null),C=S([i.observer],C),t.a=C},1044:function(e,t,r){e.exports={portalWidth:"styles-module__portalWidth__voGSg",framedImage:"styles-module__framedImage__1XH6x",container:"styles-module__container__16NQq","items-container":"styles-module__items-container__2byHQ","fa-check":"styles-module__fa-check__l2mEf","fa-exclamation-triangle":"styles-module__fa-exclamation-triangle__1RHoj","not-invoked-item":"styles-module__not-invoked-item__2JY4J","item-row":"styles-module__item-row__2FhJM","pulse-spinner":"styles-module__pulse-spinner__16rgL"}},1095:function(e,t,r){"use strict";r.d(t,"a",function(){return g});var n=r(0),o=r(9),i=r(17),a=r(2),s=r(5),l=r.n(s),u=r(12),c=r(72);function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var b=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":m(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},y=r(221),g=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=!(o=d(t).call(this,e))||"object"!==m(o)&&"function"!=typeof o?f(n):o,Object.defineProperty(f(r),"urlData",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(f(r),"clipboards",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(f(r),"sessionButton",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(f(r),"bitlyButton",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(f(r),"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object(a.makeObservable)(f(r)),r}var r,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,n["Component"]),r=t,(o=[{key:"componentDidMount",value:function(){var e=this;this.props.urlPromise.then(function(t){e.urlData=t,setTimeout(function(){e.initializeClipboards()},0)},function(){})}},{key:"showThumb",value:function(e){e.target.className="fa fa-thumbs-up"}},{key:"initializeClipboards",value:function(){this.clipboards.push(new y(this.sessionButton,{text:function(){return this.urlData.fullUrl}.bind(this),container:this.container})),this.urlData&&this.urlData.bitlyUrl&&this.clipboards.push(new y(this.bitlyButton,{text:function(){return this.urlData.bitlyUrl}.bind(this),container:this.container}))}},{key:"componentWillUnmount",value:function(){this.clipboards.forEach(function(e){return e.destroy()})}},{key:"render",value:function(){var e=this;return n.createElement(i.Modal,{show:!0,onHide:this.props.onHide},n.createElement(i.Modal.Header,{closeButton:!0},n.createElement(i.Modal.Title,null,this.props.title)),n.createElement(i.Modal.Body,{style:{minHeight:70}},n.createElement(c.a,{size:"big",center:!0,style:{top:32},isLoading:!this.urlData}),n.createElement("div",{className:l()({hidden:!this.urlData}),ref:function(t){return e.container=t}},n.createElement("form",null,n.createElement("div",{className:"form-group"},n.createElement("p",null,this.props.description),n.createElement("div",{className:"input-group"},n.createElement("input",{type:"text",className:"form-control",value:this.urlData?this.urlData.fullUrl:""}),n.createElement("div",{className:"input-group-addon"},n.createElement("a",{ref:function(t){return e.sessionButton=t},onClick:this.showThumb},n.createElement("i",{className:"fa fa-clipboard"}))))),this.urlData&&this.urlData.bitlyUrl&&n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"exampleInputAmount"},"Shortened URL"),n.createElement("div",{className:"input-group"},n.createElement("input",{type:"text",className:"form-control",value:this.urlData?this.urlData.bitlyUrl:""}),n.createElement("div",{className:"input-group-addon"},n.createElement("a",{onClick:this.showThumb,ref:function(t){return e.bitlyButton=t}},n.createElement("i",{className:"fa fa-clipboard"})))))))))}}])&&p(r.prototype,o),s&&p(r,s),t}();b([a.observable],g.prototype,"urlData",void 0),b([u.default],g.prototype,"showThumb",null),b([u.default],g.prototype,"initializeClipboards",null),g=b([o.observer],g)},1107:function(e,t,r){"use strict";r.d(t,"a",function(){return c});var n=r(0),o=r(109);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,l(t).apply(this,arguments))}var r,i,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,n["Component"]),r=t,(i=[{key:"render",value:function(){var e=this;return n.createElement("a",{className:"dataset-table-download-link",style:{display:"block"},href:"https://cbioportal-datahub.s3.amazonaws.com/"+this.props.studyId+".tar.gz",download:!0,onClick:function(){return Object(o.f)({category:"download",action:"study download",label:e.props.studyId})}},n.createElement("i",{className:"fa fa-download"}))}}])&&a(r.prototype,i),c&&a(r,c),t}()},1108:function(e,t,r){e.exports=r(35)(522)},1111:function(e,t,r){e.exports=r(35)(101)},1112:function(e,t,r){e.exports=r(35)(878)},1114:function(e,t,r){e.exports=r(35)(833)},1117:function(e,t,r){e.exports=r(35)(627)},1118:function(e,t,r){e.exports=r(35)(559)},1119:function(e,t,r){e.exports=r(35)(252)},1120:function(e,t,r){e.exports=r(35)(376)},1193:function(e,t,r){e.exports={portalWidth:"styles-module__portalWidth__18DKo",framedImage:"styles-module__framedImage__24p2j",header:"styles-module__header__1aeAb",name:"styles-module__name__1XFGq",draggable:"styles-module__draggable__3RmmQ",controls:"styles-module__controls__1BH85",menuToggle:"styles-module__menuToggle__1KWSD",item:"styles-module__item__2oGTK",menuItemIcon:"styles-module__menuItemIcon__1T8eb",disabledMenuItem:"styles-module__disabledMenuItem__18WAz",survivalIcon:"styles-module__survivalIcon__20yGX",clickable:"styles-module__clickable__2tZDi",undo:"styles-module__undo__1M88I",downloadControl:"styles-module__downloadControl___BLbx",dropdownHoverEffect:"styles-module__dropdownHoverEffect__30h85"}},1199:function(e,t,r){e.exports={portalWidth:"styles-module__portalWidth__2G9Ld",framedImage:"styles-module__framedImage__36jTC",rightPanel:"styles-module__rightPanel__1LNa2",summary:"styles-module__summary__3bP5G",description:"styles-module__description__3ShDq",submitQuery:"styles-module__submitQuery__3EV3t",iconGroup:"styles-module__iconGroup__1K9m4",studyLinks:"styles-module__studyLinks__ON9F9"}},1200:function(e,t,r){"use strict";(function(e){var n=r(0),o=r(1),i=r(9),a=r(1377),s=r.n(a),l=r(2),u=r(17),c=r(1378),p=r(109),d=r(31);function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var g,v=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":y(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},S=[{value:d.d.SAMPLE,label:"By sample ID"},{value:d.d.PATIENT,label:"By patient ID"}];!function(e){e[e.SELECTED=0]="SELECTED",e[e.UNSELECTED=1]="UNSELECTED"}(g||(g={}));var C=function(t){function r(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),n=this,t=!(o=h(r).call(this,e))||"object"!==y(o)&&"function"!=typeof o?m(n):o,Object.defineProperty(m(t),"validateContent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(m(t),"chartNameValidation",{enumerable:!0,configurable:!0,writable:!0,value:{warning:[],error:[]}}),Object.defineProperty(m(t),"chartName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(m(t),"showCaseIds",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(m(t),"caseIdsMode",{enumerable:!0,configurable:!0,writable:!0,value:d.d.SAMPLE}),Object.defineProperty(m(t),"content",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(m(t),"validContent",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object(l.makeObservable)(m(t)),t}var i,a,v;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(r,n["Component"]),i=r,(a=[{key:"onClick",value:function(e){var t,r=this;if(e===g.SELECTED)t=this.props.selectedSamples;else{var n=o.keyBy(this.props.selectedSamples,function(e){return e.uniqueSampleKey});t=this.props.allSamples.filter(function(e){return!n[e.uniqueSampleKey]})}var i=t.map(function(e){return"".concat(e.studyId,":").concat(r.caseIdsMode===d.d.SAMPLE?e.sampleId:e.patientId).concat(r.props.disableGrouping?"":" ".concat(c.b))});this.caseIdsMode===d.d.PATIENT&&(i=o.uniq(i)),this.content=i.join("\n"),this.validateContent=!1,this.validContent=this.content}},{key:"onChange",value:function(e){this.validContent=e,this.validateContent=!0}},{key:"onChartNameChange",value:function(e){this.chartName=e.currentTarget.value;var t=!this.props.isChartNameValid||this.props.isChartNameValid(this.chartName);this.chartNameValidation=t?{error:[],warning:[]}:{error:[{code:c.a.INVALID,message:new Error("Custom data exists.")}],warning:[]}}},{key:"onAddChart",value:function(){this.props.onSubmit(this.newChartInfo)}},{key:"mainContent",value:function(){var t=this;return n.createElement("div",{className:s.a.body},n.createElement(u.ButtonGroup,null,S.map(function(r,o){return n.createElement(u.Radio,{checked:r.value===t.caseIdsMode,onChange:function(r){t.caseIdsMode=e(r.target).attr("data-value"),t.validateContent=!0},inline:!0,"data-value":r.value},r.label)})),n.createElement("span",null,n.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginTop:5}},n.createElement("span",{className:s.a.selection,onClick:function(){t.onClick(g.SELECTED)}},n.createElement("i",{className:"fa fa-arrow-down",style:{marginRight:5}}),n.createElement("span",{className:s.a.selectionText},"currently selected")),n.createElement("span",{className:s.a.selection,onClick:function(){t.onClick(g.UNSELECTED)}},n.createElement("i",{className:"fa fa-arrow-down",style:{marginRight:5}}),n.createElement("span",{className:s.a.selectionText},"currently unselected")))),n.createElement("textarea",{className:"form-control",rows:5,value:this.content,placeholder:this.exampleData,onChange:function(e){t.content=e.currentTarget.value,o.delay(function(){t.onChange(t.content)},500)},"data-test":"CustomCaseSetInput"}),this.props.disableGrouping&&n.createElement("div",{className:"alert alert-warning",style:{marginTop:"15px",marginBottom:"5px"}},n.createElement("i",{className:"fa fa-warning",style:{marginRight:3}}),"Submitting will clear current filters."),n.createElement("div",{className:s.a.operations},!this.props.disableGrouping&&n.createElement("input",{placeholder:"Title (optional)",style:{width:"200px"},type:"text",onInput:this.onChartNameChange,className:"form-control input-sm"}),n.createElement("button",{disabled:this.addChartButtonDisabled,className:"btn btn-primary btn-sm","data-test":"CustomCaseSetSubmitButton","data-event":Object(p.e)({category:"studyPage",action:"customCaseSetSelection",label:this.props.queriedStudies.join(",")}),onClick:this.onAddChart},this.submitButtonText)),this.result.validationResult.error.concat(this.chartNameValidation.error).map(function(e){return n.createElement("div",{className:"alert alert-danger",role:"alert",style:{marginTop:"10px",marginBottom:"0"}},e.message.message)}),this.result.validationResult.warning.concat(this.chartNameValidation.warning).map(function(e){return n.createElement("div",{className:"alert alert-warning",role:"alert",style:{marginTop:"10px",marginBottom:"0"},"data-test":"ValidationResultWarning"},e.message.message)}))}},{key:"render",value:function(){return this.mainContent()}},{key:"sampleSet",get:function(){return o.keyBy(this.props.selectedSamples,function(e){return"".concat(e.studyId,":").concat(e.sampleId)})}},{key:"isSingleStudy",get:function(){return 1===this.props.queriedStudies.length}},{key:"result",get:function(){return Object(c.c)(this.validContent,this.validateContent,this.props.queriedStudies,this.caseIdsMode,this.props.allSamples,this.isSingleStudy)}},{key:"newChartInfo",get:function(){var e=this.chartName?this.chartName:this.props.getDefaultChartName?this.props.getDefaultChartName():"";return{displayName:e,description:e,datatype:d.e.STRING,patientAttribute:this.caseIdsMode===d.d.PATIENT,data:0===this.result.validationResult.error.length?this.result.data:[]}}},{key:"addChartButtonDisabled",get:function(){return!!this.props.disableSubmitButton||this.result.validationResult.error.length>0||0===this.newChartInfo.data.length||this.chartNameValidation.error.length>0}},{key:"exampleData",get:function(){var e=this.caseIdsMode===d.d.SAMPLE?"sample_id":"patient_id";return"Example:\nstudy_id:".concat(e,"1").concat(this.props.disableGrouping?"":" value1","\nstudy_id:").concat(e,"2").concat(this.props.disableGrouping?"":" value2")}},{key:"dataFormatContent",get:function(){return"Each row must have two columns separated by space or tab:"+"\n1) study_id: ".concat(this.caseIdsMode===d.d.SAMPLE?"sample_id":"patient_id"," and")+"\n2) custom data (currently only support categorical data)"}},{key:"submitButtonText",get:function(){return this.props.disableGrouping?"Filter to listed ".concat(this.caseIdsMode===d.d.SAMPLE?"samples":"patients"):this.props.submitButtonText}}])&&f(i.prototype,a),v&&f(i,v),r}();Object.defineProperty(C,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{submitButtonText:"Submit",disableGrouping:!1}}),v([l.observable.ref],C.prototype,"chartName",void 0),v([l.observable],C.prototype,"showCaseIds",void 0),v([l.observable],C.prototype,"caseIdsMode",void 0),v([l.observable],C.prototype,"content",void 0),v([l.observable],C.prototype,"validContent",void 0),v([l.computed],C.prototype,"sampleSet",null),v([l.computed],C.prototype,"isSingleStudy",null),v([l.computed],C.prototype,"result",null),v([l.computed],C.prototype,"newChartInfo",null),v([l.action.bound],C.prototype,"onClick",null),v([l.action.bound],C.prototype,"onChange",null),v([l.action.bound],C.prototype,"onChartNameChange",null),v([l.action.bound],C.prototype,"onAddChart",null),v([l.computed],C.prototype,"addChartButtonDisabled",null),v([l.computed],C.prototype,"exampleData",null),v([l.computed],C.prototype,"dataFormatContent",null),v([l.computed],C.prototype,"submitButtonText",null),C=v([i.observer],C),t.a=C}).call(this,r(26))},1360:function(e,t,r){e.exports={portalWidth:"studySummaryTabStyles-module__portalWidth__E_ZYO",framedImage:"studySummaryTabStyles-module__framedImage__2SfLL",studyViewFlexContainer:"studySummaryTabStyles-module__studyViewFlexContainer__2qzDx",studyViewNoSamples:"studySummaryTabStyles-module__studyViewNoSamples__25ZnH",studyViewNoSamplesInner:"studySummaryTabStyles-module__studyViewNoSamplesInner__2CP0d",quickFilters:"studySummaryTabStyles-module__quickFilters__3jA-o"}},1361:function(e,t,r){e.exports={portalWidth:"styles-module__portalWidth__1-dsc",framedImage:"styles-module__framedImage__1-X5s",chart:"styles-module__chart__RXir-",highlight:"styles-module__highlight__1DVtC",chartHeightOne:"styles-module__chartHeightOne__1EZ41",chartHeightTwo:"styles-module__chartHeightTwo__38Rdk",chartWidthOne:"styles-module__chartWidthOne__6k_oz",chartWidthTwo:"styles-module__chartWidthTwo__DZIFm",chartLoader:"styles-module__chartLoader__1WwZ2",chartError:"styles-module__chartError__21C0i",chartInnerWrapper:"styles-module__chartInnerWrapper__1ttrJ"}},1362:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjQsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iMTguNzI5cHgiIGhlaWdodD0iOS41NTdweCIgdmlld0JveD0iMCAwIDE4LjcyOSA5LjU1NyIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTguNzI5IDkuNTU3IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnPg0KCTxwYXRoIGQ9Ik0xLjg4OSw5LjM0NEwwLjM5MywwLjIxM2gxLjUxM2wwLjc4Myw1LjAzYzAuMDg2LDAuNTUsMC4xOTIsMS40NDcsMC4zMTgsMi42OWMwLjI5OC0wLjY0NywwLjY3OS0xLjM5LDEuMTQ0LTIuMjI3DQoJCWwzLjA1Mi01LjQ5NGgxLjY0M0wzLjYxNyw5LjM0NEgxLjg4OXoiLz4NCgk8cGF0aCBkPSJNOC4wOTQsNi4yMjNMOS42NSw2LjEyOGMwLDAuNDQ3LDAuMDY4LDAuODI5LDAuMjA2LDEuMTQ0YzAuMTM4LDAuMzE1LDAuMzkyLDAuNTczLDAuNzYxLDAuNzc0DQoJCWMwLjM3LDAuMiwwLjgwMSwwLjMwMSwxLjI5NCwwLjMwMWMwLjY4OCwwLDEuMjA0LTAuMTM4LDEuNTQ4LTAuNDEzczAuNTE2LTAuNTk5LDAuNTE2LTAuOTcyYzAtMC4yNy0wLjEwMy0wLjUyNC0wLjMxLTAuNzY1DQoJCWMtMC4yMTItMC4yNDEtMC43MjktMC41MzctMS41NTItMC44OXMtMS4zNDktMC42MDEtMS41NzctMC43NDRjLTAuMzg1LTAuMjM1LTAuNjc0LTAuNTEyLTAuODY5LTAuODMNCgkJQzkuNDczLDMuNDE2LDkuMzc1LDMuMDUsOS4zNzUsMi42MzhjMC0wLjcyMiwwLjI4Ny0xLjM0MSwwLjg2LTEuODU3YzAuNTcyLTAuNTE2LDEuMzc1LTAuNzc0LDIuNDA3LTAuNzc0DQoJCWMxLjE0NiwwLDIuMDE5LDAuMjY1LDIuNjE3LDAuNzk1YzAuNiwwLjUzLDAuOTEsMS4yMjgsMC45MzQsMi4wOTNsLTEuNTIyLDAuMTAzYy0wLjAyMi0wLjU1LTAuMjE4LTAuOTg1LTAuNTg0LTEuMzA3DQoJCUMxMy43MiwxLjM3MSwxMy4yMDEsMS4yMSwxMi41MywxLjIxYy0wLjUzOSwwLTAuOTU3LDAuMTIzLTEuMjU1LDAuMzdzLTAuNDQ3LDAuNTEzLTAuNDQ3LDAuOHMwLjEyOSwwLjUzOSwwLjM4NywwLjc1Ng0KCQljMC4xNzIsMC4xNDksMC42MTYsMC4zNzgsMS4zMzMsMC42ODhDMTMuNzQsNC4zNCwxNC40OSw0Ljc0NywxNC44LDUuMDQ1YzAuNDkzLDAuNDc2LDAuNzQsMS4wNTUsMC43NCwxLjczNg0KCQljMCwwLjQ1My0wLjE0LDAuODk3LTAuNDE3LDEuMzMzYy0wLjI3OCwwLjQzNi0wLjcwMiwwLjc4NC0xLjI3MiwxLjA0NUMxMy4yNzksOS40MiwxMi42MDcsOS41NSwxMS44MzQsOS41NQ0KCQljLTEuMDU1LDAtMS45NTEtMC4yNjEtMi42OTEtMC43ODJDOC40MDMsOC4yNDYsOC4wNTQsNy4zOTcsOC4wOTQsNi4yMjN6Ii8+DQoJPHBhdGggZD0iTTE2LjU5OCw5LjM0NGwwLjM2OS0xLjc2M2gxLjc2M2wtMC4zNzgsMS43NjNIMTYuNTk4eiIvPg0KPC9nPg0KPC9zdmc+DQo="},1372:function(e,t,r){e.exports={portalWidth:"styles-module__portalWidth__3RN1K",framedImage:"styles-module__framedImage__1q4ml",main:"styles-module__main__1M4Pn",content:"styles-module__content__-z-NW",delete:"styles-module__delete__3E7Yr"}},1375:function(e,t,r){e.exports={portalWidth:"styles-module__portalWidth__21Wnc",framedImage:"styles-module__framedImage__2DLAM",main:"styles-module__main__6UjQ_",text:"styles-module__text__3EbPk",mostLeft:"styles-module__mostLeft__1HcgP",mostRight:"styles-module__mostRight__OHotS"}},1377:function(e,t,r){e.exports={portalWidth:"styles-module__portalWidth__1nrF_",framedImage:"styles-module__framedImage__30VqV",body:"styles-module__body__1rzI0",invalid:"styles-module__invalid__2aTxj",valid:"styles-module__valid__ayiQx",selection:"styles-module__selection__iEp5C",selectionText:"styles-module__selectionText__oWsS9",operations:"styles-module__operations__3fdLE"}},1378:function(e,t,r){"use strict";r.d(t,"b",function(){return c}),r.d(t,"a",function(){return l}),r.d(t,"c",function(){return m});var n=r(1),o=r(31),i=r(141),a=r.n(i);function s(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var l,u,c="custom_value",p="Unselected";function d(e,t){return"".concat(e,":").concat(t)}function f(e){return[e.studyId||"",e.caseId,e.value||""].join("&")}function h(e,t,r,i,a){var s={},l={},u=r===o.d.PATIENT;return n.each(i,function(e){s["".concat(e.studyId,":").concat(e.sampleId)]=e;var t="".concat(e.studyId,":").concat(e.patientId);void 0===l[t]&&(l[t]=[]),l[t].push(e)}),n.flatMap(e,function(e){var r=e.value||(a?p:c),n=void 0===e.studyId?"".concat(t,":").concat(e.caseId):"".concat(e.studyId,":").concat(e.caseId);return(u?l[n]:[s[n]]).map(function(n){return{studyId:e.studyId||t,sampleId:n.sampleId,patientId:n.patientId,value:r}})})}function m(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,u=arguments.length>4?arguments[4]:void 0,c=arguments.length>5?arguments[5]:void 0,p={error:[],warning:[]},m=function(e){return n.reduce(e.trim().split(/\n|\r/g),function(e,t){return(t=t.trim())&&e.push(function(e){var t={line:e,caseId:""},r=e.split(":");if(1===r.length)t.caseId=r[0];else if(r.length>1){t.studyId=r[0];var n=r[1].split(/\s|\t/g);n.length>1&&(t.value=n[1]),t.caseId=n[0]}return t}(t)),e},[])}(e);if(m.length>0&&t){var b,y,g=function(e,t,r,i,s){var u=[],c=[],p=[],h=n.reduce(r,function(e,r){return e["".concat(r.studyId,":").concat(t===o.d.PATIENT?r.patientId:r.sampleId)]=!0,e},{}),m={},b={};n.reduce(n.uniqBy(e,function(e){return f(e)}),function(e,r){var o="",a=!0;return void 0===r.studyId||""===r.studyId?i?(o=d(s[0],r.caseId),h[o]?(void 0===m[o]&&(m[o]=0),m[o]++):(p.push(r.caseId),a=!1)):(c.push({code:l.INVALID_CASE_ID,message:new Error("No study specified for ".concat(t," id: ").concat(r.caseId,", and more than one study selected for query. The case will be ignored."))}),a=!1):n.includes(s,r.studyId)?(o=d(r.studyId,r.caseId),void 0!==h[o]?(void 0===m[o]&&(m[o]=0),m[o]++):(p.push(r.caseId),a=!1)):(u.push({code:l.STUDY_NOT_SELECTED,message:new Error("Incorrect study id: ".concat(r.studyId))}),a=!1),a&&(e[f(r)]=r),e},b);var y=n.reduce(m,function(e,t,r){return t>1&&e.push(r),e},[]);if(y.length>0){var g=n.reduce(e,function(e,t){var r=t.value?t.value:"_TEST_";return void 0===e[r]&&(e[r]=[]),e[r].push(d(t.studyId?t.studyId:"",t.caseId)),e},{}),v=n.reduce(g,function(e,t){return e+=t.length-n.uniq(t).length},0);n.keys(g).length>1&&v!==y.length&&c.push({code:l.POTENTIAL_OVERLAP,message:new Error("".concat(y.join(", ")," ").concat(a()("exist",y.length-v)," in different groups."))})}return p.length>0&&c.push({code:l.INVALID_CASE_ID,message:new Error("The following ".concat(a()("case",p.length)," ").concat(a()("is",p.length)," invalid and will be ignored. ").concat(p.join(", ")))}),{error:u,warning:c,updatedLines:n.values(b)}}(m,i,u,c,r);(b=p.warning).push.apply(b,s(g.warning)),(y=p.error).push.apply(y,s(g.error)),void 0!==g.updatedLines&&(m=g.updatedLines)}var v=void 0!==n.find(m,function(e){return void 0!==e.value&&""!==e.value});return p.error.length>0?{data:[],validationResult:p}:{data:h(m,r[0],i,u,v),validationResult:p}}!function(e){e.OVERLAP="OVERLAP",e.POTENTIAL_OVERLAP="POTENTIAL_OVERLAP",e.INVALID="INVALID",e.INVALID_CASE_ID="INVALID_CASE_ID",e.STUDY_NOT_SELECTED="STUDY_NOT_SELECTED",e.INPUT_ERROR="INPUT_ERROR",e.NO_CHART_NAME="NO_CHART_NAME",e.NO_GROUP_NAME="NO_GROUP_NAME"}(l||(l={})),function(e){e.GROUP_NAME="GROUP_NAME",e.CHART_NAME="CHART_NAME",e.CASE_ID="CASE_ID"}(u||(u={}))},1379:function(e,t,r){e.exports={portalWidth:"styles-module__portalWidth__3vtVw",framedImage:"styles-module__framedImage__3P2Qv",oqlerror:"styles-module__oqlerror__1o_bc",operations:"styles-module__operations__2I3K7"}},1380:function(e,t,r){e.exports={portalWidth:"styles-module__portalWidth__1fUOQ",framedImage:"styles-module__framedImage__2d1Ka",modalHeader:"styles-module__modalHeader__JllNW",addChart:"styles-module__addChart__1wwdE",child:"styles-module__child__1RDTc",childContent:"styles-module__childContent__3qjw6",faCharC:"styles-module__faCharC__1Juo6",faCharG:"styles-module__faCharG__1M9-6",sharedChart:"styles-module__sharedChart__JehFS"}},1497:function(e,t,r){e.exports=r(35)(249)},1498:function(e,t,r){e.exports=r(35)(170)},1499:function(e,t,r){e.exports=r(35)(850)},1501:function(e,t,r){e.exports=r(35)(253)},1502:function(e,t,r){e.exports=r(35)(860)},1503:function(e,t,r){e.exports=r(35)(15)},1504:function(e,t,r){e.exports=r(35)(51)},1505:function(e,t,r){e.exports=r(35)(377)},1507:function(e,t,r){e.exports=r(35)(780)},1509:function(e,t,r){e.exports=r(35)(95)},1511:function(e,t,r){e.exports=r(35)(870)},1514:function(e,t,r){e.exports=r(35)(407)},1515:function(e,t,r){e.exports=r(35)(879)},1522:function(e,t,r){e.exports=r(35)(171)},1523:function(e,t,r){e.exports=r(35)(133)},1524:function(e,t,r){e.exports=r(35)(849)},1559:function(e,t,r){},1767:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n),i=r(1),a=r.n(i),s=r(9),l=r(804),u=r(2),c=r(7),p=r(27),d=r(13),f=r(77),h=r(21),m=r(414),b=r(31),y=r(12),g=r(422),v=r(42),S=r(76),C=r(220),O=r(24),w=r.n(O),E=function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})};function T(e){return E(this,void 0,void 0,regeneratorRuntime.mark(function t(){var r,n,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=[],t.prev=1,t.next=4,w.a.get(e);case 4:n=t.sent,o=JSON.parse(n.text),r=JSON.parse(o.fileContent),t.next=12;break;case 9:return t.prev=9,t.t0=t.catch(1),t.abrupt("return",[]);case 12:if(void 0!==r){t.next=16;break}return t.abrupt("return",[]);case 16:return t.abrupt("return",r);case 17:case"end":return t.stop()}},t,null,[[1,9]])}))}var _,A=r(40),P=r(19),k=r(222),j=r(109),I=r(160),D=r(49),N=r(341),R=r(827),G=r(75),M=r(84),F=r(3),x=r(831),L=r(162),B=r(10),U=r(99),V=r(815),q=r.n(V);function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function z(e,t,r){return t&&H(e.prototype,t),r&&H(e,r),e}function Q(e,t){return!t||"object"!==K(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e,t){if(void 0===e.time||t)return e.treatment;var r=e;return"".concat(r.time,"-").concat(r.treatment)}function $(e,t){if(void 0===e.time||t)return e.treatment;var r=e;return r.treatment+"::"+r.time}!function(e){e.SAMPLE="SAMPLE_TREATMENTS",e.PATIENT="PATIENT_TREATMENTS"}(_||(_={}));var ee=function(e){function t(){return W(this,t),Q(this,J(t).apply(this,arguments))}return Y(t,o.a.Component),z(t,[{key:"render",value:function(){return o.a.createElement("div",{style:{marginLeft:this.props.margin},className:q.a.displayFlex},this.props.headerName)}}]),t}(),te=function(e){function t(){return W(this,t),Q(this,J(t).apply(this,arguments))}return Y(t,o.a.Component),z(t,[{key:"render",value:function(){return o.a.createElement("div",null,this.props.row.treatment)}}]),t}();function re(e,t){return e.treatment.toUpperCase().includes(t.toUpperCase())}function ne(e){return e.toLocaleLowerCase().substring(0,Math.min(5,e.length)).split("").map(function(e){return Math.min(e.charCodeAt(0),127)}).filter(function(e){return NaN!==e}).reduce(function(e,t,r){return e+t/Math.pow(128,r+1)},0)}var oe=r(148),ie=r(59);function ae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function se(e){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var le=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":se(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},ue=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,"_promise",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_status",{enumerable:!0,configurable:!0,writable:!0,value:"pending"}),Object.defineProperty(this,"_result",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object(u.makeObservable)(this),Object(u.runInAction)(function(){r._status="pending",t.then(Object(u.action)(function(e){r._status="complete",r._result=e}),Object(u.action)(function(e){r._status="error",r._error=e}))})}var t,r,n;return t=e,(r=[{key:"status",get:function(){return this._status}},{key:"result",get:function(){return this._result}},{key:"error",get:function(){return this._error}},{key:"promise",get:function(){return this._promise}}])&&ae(t.prototype,r),n&&ae(t,n),e}();le([u.observable.ref],ue.prototype,"_status",void 0),le([u.observable.ref],ue.prototype,"_result",void 0),le([u.observable.ref],ue.prototype,"_error",void 0),le([u.computed],ue.prototype,"status",null),le([u.computed],ue.prototype,"result",null),le([u.computed],ue.prototype,"error",null),le([u.computed],ue.prototype,"promise",null);var ce=r(55),pe=function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})};function de(e){return e.uniqueKey!==b.j.CANCER_STUDIES}function fe(e,t,r,n){return pe(this,void 0,void 0,regeneratorRuntime.mark(function o(){var i,s,l;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return i=a.a.map(r,function(e,r){var n=a.a.uniqBy(e,function(e){return"".concat(e.sampleId,"_").concat(e.studyId)}).map(function(e){return{studyId:e.studyId,sampleId:e.sampleId}});return Object(L.a)(r,n,t)}),n(N.a.CREATING_SESSION),o.next=4,I.a.addComparisonSession({groups:i,origin:t,clinicalAttributeName:e.displayName});case 4:return s=o.sent,l=s.id,o.abrupt("return",l);case 7:case"end":return o.stop()}},o)}))}function he(e,t){var r=a.a.keyBy(t,function(e){return e.studyId});return e.reduce(function(e,t){return t.studyId in r&&e.push({sampleId:t.sampleId,molecularProfileId:r[t.studyId].molecularProfileId}),e},[])}function me(e,t,r){return pe(this,void 0,void 0,regeneratorRuntime.mark(function n(){var o,i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o=he(e,t),n.next=3,d.a.fetchGenesUsingPOST({geneIdType:"HUGO_GENE_SYMBOL",geneIds:r});case 3:return i=n.sent,a={entrezGeneIds:i.map(function(e){return e.entrezGeneId}),sampleMolecularIdentifiers:o},n.abrupt("return",d.a.fetchMutationsInMultipleMolecularProfilesUsingPOST({projection:"DETAILED",mutationMultipleStudyFilter:a}));case 6:case"end":return n.stop()}},n)}))}function be(e,t,r){return pe(this,void 0,void 0,regeneratorRuntime.mark(function n(){var o,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o=he(e,t),n.next=3,d.a.fetchGenesUsingPOST({geneIdType:"HUGO_GENE_SYMBOL",geneIds:r});case 3:return i=n.sent,n.abrupt("return",d.a.fetchMolecularDataInMultipleMolecularProfilesUsingPOST({projection:"DETAILED",molecularDataMultipleStudyFilter:{entrezGeneIds:i.map(function(e){return e.entrezGeneId}),sampleMolecularIdentifiers:o}}));case 5:case"end":return n.stop()}},n)}))}function ye(e,t,r){return pe(this,void 0,void 0,regeneratorRuntime.mark(function n(){var o,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o=he(e,t),n.next=3,d.a.fetchGenesUsingPOST({geneIdType:"HUGO_GENE_SYMBOL",geneIds:r});case 3:return i=n.sent,n.abrupt("return",d.a.fetchStructuralVariantsUsingPOST({structuralVariantFilter:{entrezGeneIds:i.map(function(e){return e.entrezGeneId}),sampleMolecularIdentifiers:o}}));case 5:case"end":return n.stop()}},n)}))}function ge(e,t){var r={},n=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){r[a.value]=[]}}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}var l=!0,u=!1,c=void 0;try{for(var p,d=e[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var f=p.value;f.site1HugoSymbol in r&&r[f.site1HugoSymbol].push(f),f.site2HugoSymbol in r&&r[f.site2HugoSymbol].push(f)}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}return r}function ve(e,t){switch(t){case A.a.MUTATED_GENES_TABLE:case A.a.CNA_GENES_TABLE:case A.a.STRUCTURAL_VARIANT_GENES_TABLE:return{hugoGeneSymbols:function(e,t){switch(e){case A.a.CNA_GENES_TABLE:return a.a.uniq(t.map(x.f));default:return t}}(t,e.slice())};case A.a.SAMPLE_TREATMENTS_TABLE:case A.a.PATIENT_TREATMENTS_TABLE:return{treatmentUniqueKeys:e.slice()};default:return{}}}var Se=r(98),Ce=r(46),Oe=r(126),we=r(25);function Ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _e(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pe(e){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ke,je=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":Pe(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},Ie=function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},De=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r};!function(e){e.SUMMARY="Summary",e.CLINICAL_DATA="Clinical Data",e.HEATMAPS="Heatmaps",e.CN_SEGMENTS="CN Segments"}(ke||(ke={}));var Ne="Selected",Re="Unselected",Ge="STATIC",Me=function(){function e(t,r,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,"appStore",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"sessionServiceIsEnabled",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"urlWrapper",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"reactionDisposers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"chartItemToColor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"chartToUsedColors",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"studyViewQueryFilter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"driverAnnotationSettings",{enumerable:!0,configurable:!0,writable:!0,value:Object(Oe.c)(function(){return!1})}),Object.defineProperty(this,"includeGermlineMutations",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeSomaticMutations",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeUnknownStatusMutations",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"isSettingsMenuVisible",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"showComparisonGroupUI",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"showCustomDataSelectionUI",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"numberOfVisibleColorChooserModals",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"userGroupColors",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"updateNAValue",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t=o.isShowNAChecked(e),r=i.clone(o._clinicalDataBinFilterSet.get(e));r.showNA=t,o._clinicalDataBinFilterSet.set(e,r)}}),Object.defineProperty(this,"toggleNAValue",{enumerable:!0,configurable:!0,writable:!0,value:function(e){o.updateNAValue(e);var t=i.clone(o._clinicalDataBinFilterSet.get(e)),r=t.showNA;t.showNA=!r,o._clinicalDataBinFilterSet.set(e,t)}}),Object.defineProperty(this,"isShowNAChecked",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t=i.clone(o._clinicalDataBinFilterSet.get(e)),r=t?t.showNA:void 0;return void 0===r||r}}),Object.defineProperty(this,"hideRestoreSettingsMsg",{enumerable:!0,configurable:!0,writable:!0,value:this.isLoggedIn}),Object.defineProperty(this,"_loadUserSettingsInitially",{enumerable:!0,configurable:!0,writable:!0,value:this.isLoggedIn}),Object.defineProperty(this,"openResourceTabMap",{enumerable:!0,configurable:!0,writable:!0,value:u.observable.map()}),Object.defineProperty(this,"_comparisonConfirmationModal",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_selectedComparisonGroups",{enumerable:!0,configurable:!0,writable:!0,value:u.observable.map({},{deep:!1})}),Object.defineProperty(this,"_selectedComparisonGroupsWarningSigns",{enumerable:!0,configurable:!0,writable:!0,value:u.observable.map({},{deep:!1})}),Object.defineProperty(this,"_comparisonGroupsMarkedForDeletion",{enumerable:!0,configurable:!0,writable:!0,value:u.observable.map({},{deep:!1})}),Object.defineProperty(this,"_customChartsMarkedForDeletion",{enumerable:!0,configurable:!0,writable:!0,value:u.observable.map({},{deep:!1})}),Object.defineProperty(this,"_pendingChanges",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pendingDecision",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._pendingChanges=this._pendingChanges.filter(function(e){return"pending"!==e.status}),e.next=3,Promise.all(this._pendingChanges.map(function(e){return e.promise}));case 3:return e.abrupt("return",!1);case 4:case"end":return e.stop()}},e,this)}))},default:!0})}),Object.defineProperty(this,"userGroupsFromRemote",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.sampleSet,o.pendingDecision]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._comparisonGroupsChangeCount,!(this.studyIds.length>0)||!this.isLoggedIn&&"noauthsessionservice"!==c.b.serverConfig.authenticationMethod||this.pendingDecision.result){e.next=6;break}return e.next=4,I.a.getGroupsForStudies(this.studyIds.slice());case 4:return t=e.sent,e.abrupt("return",t.map(function(e){return Object.assign(e.data,{uid:e.id,isSharedGroup:!1,color:void 0},Object(D.p)(e.data,r.sampleSet.result))}));case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}},e,this)}))},default:[]})}),Object.defineProperty(this,"sharedGroups",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.sampleSet,o.queriedPhysicalStudyIds,o.userSettings]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t,r,n,o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],Object.keys(this.sharedGroupSet).forEach(function(e){t.push(I.a.getGroup(e))}),r=Object(F.Bb)(this.queriedPhysicalStudyIds.result),e.next=5,Promise.all(t);case 5:return n=e.sent,e.abrupt("return",n.filter(function(e){return!i.some(e.data.studies,function(e){return void 0===r[e.id]})}).map(function(e){return Object.assign(e.data,{uid:e.id,isSharedGroup:!0,color:Object(b.vb)(o.userGroupColors,e.id)},Object(D.p)(e.data,o.sampleSet.result))}));case 7:case"end":return e.stop()}},e,this)}))},default:[]})}),Object.defineProperty(this,"comparisonGroups",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.userGroupsFromRemote,o.sharedGroups]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t,r,n,o,a,s,l,u,c,p,d,f=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.cloneDeep(this.userGroupsFromRemote.result),r=Object(F.Bb)(t.map(function(e){return e.uid})),this.sharedGroups.result.length>0&&this.sharedGroups.result.forEach(function(e){void 0===r[e.uid]&&(t.push(e),r[e.uid]=!0)}),!((n=Array.from(this._selectedComparisonGroups.keys()).filter(function(e){return void 0===r[e]})).length>0)){e.next=30;break}for(o=[],a=!0,s=!1,l=void 0,e.prev=9,u=n[Symbol.iterator]();!(a=(c=u.next()).done);a=!0)p=c.value,o.push(I.a.getGroup(p));e.next=17;break;case 13:e.prev=13,e.t0=e.catch(9),s=!0,l=e.t0;case 17:e.prev=17,e.prev=18,a||null==u.return||u.return();case 20:if(e.prev=20,!s){e.next=23;break}throw l;case 23:return e.finish(20);case 24:return e.finish(17);case 25:return d=Object(F.Bb)(this.queriedPhysicalStudyIds.result),e.next=28,Promise.all(o);case 28:e.sent.filter(function(e){return!i.some(e.data.studies,function(e){return void 0===d[e.id]})}).forEach(function(e){return t.push(Object.assign(e.data,{uid:e.id},{color:void 0},Object(D.p)(e.data,f.sampleSet.result)))});case 30:return e.abrupt("return",t);case 31:case"end":return e.stop()}},e,this,[[9,13,17,25],[18,,20,24]])}))},default:[],onResult:function(e){o.saveGroupsToUserProfile(e)}})}),Object.defineProperty(this,"userSavedCustomData",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.studyIds.length>0&&this.isLoggedIn)){e.next=5;break}return e.next=3,S.a.getCustomDataForStudies(this.studyIds.slice());case 3:return t=e.sent,e.abrupt("return",t.map(function(e){return{uniqueKey:e.id,displayName:e.data.displayName,description:e.data.description,priority:e.data.priority,dataType:b.c.CUSTOM_DATA,patientAttribute:e.data.patientAttribute,renderWhenDataChange:!1,data:e.data.data,isSharedChart:!1,clinicalAttribute:{clinicalAttributeId:e.id,datatype:e.data.datatype,displayName:e.data.displayName,description:e.data.description,patientAttribute:e.data.patientAttribute,priority:e.data.priority}}}));case 5:return e.abrupt("return",[]);case 6:case"end":return e.stop()}},e,this)}))},default:[],onResult:function(e){o._loadUserSettingsInitially&&o.updateCustomDataList(e,!0)}})}),Object.defineProperty(this,"sharedCustomData",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.queriedPhysicalStudyIds]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t,r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],Object.keys(this.sharedCustomChartSet).forEach(function(e){t.push(S.a.getCustomData(e))}),r=Object(F.Bb)(this.queriedPhysicalStudyIds.result),e.next=5,Promise.all(t);case 5:return n=e.sent,e.abrupt("return",n.filter(function(e){return!i.some(e.data.origin,function(e){return void 0===r[e]})}).map(function(e){return{uniqueKey:e.id,displayName:e.data.displayName,description:e.data.description,priority:e.data.priority,dataType:b.c.CUSTOM_DATA,patientAttribute:e.data.patientAttribute,renderWhenDataChange:!1,data:e.data.data,isSharedChart:!0,clinicalAttribute:{clinicalAttributeId:e.id,datatype:e.data.datatype,displayName:e.data.displayName,description:e.data.description,patientAttribute:e.data.patientAttribute,priority:e.data.priority}}}));case 7:case"end":return e.stop()}},e,this)}))},default:[],onResult:function(e){o.updateCustomDataList(e,!1,!0),o.saveSharedCustomDataToUserProfile(e)}})}),Object.defineProperty(this,"_comparisonGroupsChangeCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"initialFiltersQuery",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"studyIds",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_clinicalDataFilterSet",{enumerable:!0,configurable:!0,writable:!0,value:u.observable.map({},{deep:!1})}),Object.defineProperty(this,"_customDataFilterSet",{enumerable:!0,configurable:!0,writable:!0,value:u.observable.map({},{deep:!1})}),Object.defineProperty(this,"_genomicProfilesFilter",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_caseListsFilter",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_customBinsFromScatterPlotSelectionSet",{enumerable:!0,configurable:!0,writable:!0,value:u.observable.map({},{deep:!1})}),Object.defineProperty(this,"_genomicDataIntervalFilterSet",{enumerable:!0,configurable:!0,writable:!0,value:u.observable.map({},{deep:!1})}),Object.defineProperty(this,"_genericAssayDataIntervalFilterSet",{enumerable:!0,configurable:!0,writable:!0,value:u.observable.map({},{deep:!1})}),Object.defineProperty(this,"_clinicalDataBinFilterSet",{enumerable:!0,configurable:!0,writable:!0,value:u.observable.map()}),Object.defineProperty(this,"_genomicDataBinFilterSet",{enumerable:!0,configurable:!0,writable:!0,value:u.observable.map()}),Object.defineProperty(this,"_genericAssayDataBinFilterSet",{enumerable:!0,configurable:!0,writable:!0,value:u.observable.map()}),Object.defineProperty(this,"_geneFilterSet",{enumerable:!0,configurable:!0,writable:!0,value:u.observable.map()}),Object.defineProperty(this,"_chartVisibility",{enumerable:!0,configurable:!0,writable:!0,value:u.observable.map()}),Object.defineProperty(this,"geneQueryStr",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"geneQueries",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"chartsDimension",{enumerable:!0,configurable:!0,writable:!0,value:u.observable.map()}),Object.defineProperty(this,"chartsType",{enumerable:!0,configurable:!0,writable:!0,value:u.observable.map()}),Object.defineProperty(this,"newlyAddedCharts",{enumerable:!0,configurable:!0,writable:!0,value:u.observable.array()}),Object.defineProperty(this,"sharedGroupSet",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"sharedCustomChartSet",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"unfilteredClinicalDataCountCache",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"unfilteredClinicalDataBinCountCache",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"pageStatusMessages",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"useCurrentGridLayout",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"currentGridLayout",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"previousSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"currentFocusedChartByUser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"currentFocusedChartByUserDimension",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clinicalDataBinPromises",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"clinicalDataCountPromises",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"customDataCountPromises",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"genomicChartPromises",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"genericAssayChartPromises",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_chartSampleIdentifiersFilterSet",{enumerable:!0,configurable:!0,writable:!0,value:u.observable.map()}),Object.defineProperty(this,"preDefinedCustomChartFilterSet",{enumerable:!0,configurable:!0,writable:!0,value:u.observable.map()}),Object.defineProperty(this,"numberOfSelectedSamplesInCustomSelection",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_filterComparisonGroups",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_filterMutatedGenesTableByCancerGenes",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_filterSVGenesTableByCancerGenes",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_filterCNAGenesTableByCancerGenes",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_customCharts",{enumerable:!0,configurable:!0,writable:!0,value:u.observable.map({},{deep:!1})}),Object.defineProperty(this,"_geneSpecificChartMap",{enumerable:!0,configurable:!0,writable:!0,value:u.observable.map({},{deep:!1})}),Object.defineProperty(this,"_geneSpecificCharts",{enumerable:!0,configurable:!0,writable:!0,value:u.observable.map({},{deep:!1})}),Object.defineProperty(this,"_genericAssayChartMap",{enumerable:!0,configurable:!0,writable:!0,value:u.observable.map({},{deep:!1})}),Object.defineProperty(this,"_genericAssayCharts",{enumerable:!0,configurable:!0,writable:!0,value:u.observable.map({},{deep:!1})}),Object.defineProperty(this,"_customChartsSelectedCases",{enumerable:!0,configurable:!0,writable:!0,value:u.observable.map({},{deep:!1})}),Object.defineProperty(this,"customChartSet",{enumerable:!0,configurable:!0,writable:!0,value:u.observable.map({},{deep:!1})}),Object.defineProperty(this,"_newlyCreatedCustomChartSet",{enumerable:!0,configurable:!0,writable:!0,value:u.observable.map({},{deep:!1})}),Object.defineProperty(this,"sampleToAnalysisGroup",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.samples,o.selectedSamples]},invoke:function(){var e=i.keyBy(o.selectedSamples.result,function(e){return e.uniqueSampleKey});return Promise.resolve(i.reduce(o.samples.result,function(t,r){var n=r.uniqueSampleKey;return t[n]=n in e?Ne:Re,t},{}))}})}),Object.defineProperty(this,"patientToAnalysisGroup",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.samples,o.selectedPatientKeys]},invoke:function(){var e=i.keyBy(o.selectedPatientKeys.result);return Promise.resolve(i.reduce(o.samples.result,function(t,r){var n=r.uniquePatientKey;return n in e&&(t[n]=Ne),t},{}))}})}),Object.defineProperty(this,"hasRawDataForDownload",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==this.studyIds.length){e.next=7;break}return e.next=3,w()(Object(P.z)());case 3:return t=e.sent,e.abrupt("return",t.body.includes(this.studyIds[0]));case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}},e,this)}))},onError:function(){return!1},default:!1})}),Object.defineProperty(this,"unfilteredClinicalDataCount",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.selectedSamples]},invoke:function(){return o.hasFilteredSamples&&!i.isEmpty(o.unfilteredAttrsForNonNumerical)?p.a.fetchClinicalDataCountsUsingPOST({clinicalDataCountFilter:{attributes:o.unfilteredAttrsForNonNumerical,studyViewFilter:o.filters}}):Promise.resolve([])},onError:function(){},onResult:function(e){e.forEach(function(e){var t=e.attributeId;o.isNewlyAdded(t)&&(o.showAsPieChart(t,e.counts.length),o.newlyAddedCharts.remove(t))})},default:[]})}),Object.defineProperty(this,"unfilteredCustomDataCount",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.selectedSamples]},invoke:function(){return o.hasFilteredSamples?p.a.fetchCustomDataCountsUsingPOST({clinicalDataCountFilter:{attributes:o.unfilteredCustomAttrsForNonNumerical,studyViewFilter:o.filters}}):Promise.resolve([])},onError:function(){},onResult:function(e){e.forEach(function(e){var t=e.attributeId;o.isNewlyAdded(t)&&(o.showAsPieChart(t,e.counts.length),o.newlyAddedCharts.remove(t))})},default:[]})}),Object.defineProperty(this,"newlyAddedUnfilteredClinicalDataCount",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.selectedSamples]},invoke:function(){return o.hasFilteredSamples&&!i.isEmpty(o.newlyAddedUnfilteredAttrsForNonNumerical)?p.a.fetchClinicalDataCountsUsingPOST({clinicalDataCountFilter:{attributes:o.newlyAddedUnfilteredAttrsForNonNumerical,studyViewFilter:o.filters}}):Promise.resolve([])},default:[],onError:function(){},onResult:function(e){e.forEach(function(e){var t=e.attributeId;o.unfilteredClinicalDataCountCache[t]=e,o.showAsPieChart(t,e.counts.length),o.newlyAddedCharts.remove(t)})}})}),Object.defineProperty(this,"newlyAddedUnfilteredClinicalDataBinCount",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.hasSampleIdentifiersInFilter&&this.newlyAddedUnfilteredAttrsForNumerical.length>0)){e.next=5;break}return e.next=3,p.a.fetchClinicalDataBinCountsUsingPOST({dataBinMethod:"STATIC",clinicalDataBinCountFilter:{attributes:this.newlyAddedUnfilteredAttrsForNumerical,studyViewFilter:this.filters}});case 3:return t=e.sent,e.abrupt("return",Promise.resolve(Object(b.q)(t)));case 5:return e.abrupt("return",Promise.resolve([]));case 6:case"end":return e.stop()}},e,this)}))},default:[],onError:function(){},onResult:function(e){i.each(i.groupBy(e,function(e){return e.id}),function(e,t){o.unfilteredClinicalDataBinCountCache[t]=e,o.newlyAddedCharts.remove(t)})}})}),Object.defineProperty(this,"unfilteredClinicalDataBinCount",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.hasSampleIdentifiersInFilter&&this.unfilteredAttrsForNumerical.length>0)){e.next=5;break}return e.next=3,p.a.fetchClinicalDataBinCountsUsingPOST({dataBinMethod:"STATIC",clinicalDataBinCountFilter:{attributes:this.unfilteredAttrsForNumerical,studyViewFilter:this.filters}});case 3:return t=e.sent,e.abrupt("return",Promise.resolve(Object(b.q)(t)));case 5:return e.abrupt("return",Promise.resolve([]));case 6:case"end":return e.stop()}},e,this)}))},onError:function(){},default:[]})}),Object.defineProperty(this,"molecularProfiles",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.queriedPhysicalStudyIds]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.queriedPhysicalStudyIds.result.length>0)){e.next=4;break}return e.next=3,d.a.fetchMolecularProfilesUsingPOST({molecularProfileFilter:{studyIds:this.queriedPhysicalStudyIds.result}});case 3:return e.abrupt("return",e.sent);case 4:return e.abrupt("return",[]);case 5:case"end":return e.stop()}},e,this)}))},onError:function(){},default:[]})}),Object.defineProperty(this,"allStudies",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.getAllStudiesUsingGET({projection:"SUMMARY"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))}},[])}),Object.defineProperty(this,"everyStudyIdToStudy",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.allStudies]},invoke:function(){return Promise.resolve(i.keyBy(o.allStudies.result,function(e){return e.studyId}))}})}),Object.defineProperty(this,"filteredPhysicalStudies",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.everyStudyIdToStudy]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.everyStudyIdToStudy.result,e.abrupt("return",i.reduce(this.studyIds,function(e,r){return t[r]&&e.push(t[r]),e},[]));case 2:case"end":return e.stop()}},e,this)}))},default:[]})}),Object.defineProperty(this,"filteredVirtualStudies",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.filteredPhysicalStudies]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t,r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.filteredPhysicalStudies.result.length!==this.studyIds.length){e.next=2;break}return e.abrupt("return",[]);case 2:return t=[],r=this.filteredPhysicalStudies.result.map(function(e){return e.studyId}),n=i.filter(this.studyIds,function(e){return!i.includes(r,e)}),e.next=7,Promise.all(n.map(function(e){return S.a.getVirtualStudy(e).then(function(e){t.push(e)}).catch(function(){})}));case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}},e,this)}))},default:[]})}),Object.defineProperty(this,"queriedPhysicalStudies",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.filteredPhysicalStudies,o.filteredVirtualStudies]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.everyStudyIdToStudy.result,r=i.reduce(this.filteredPhysicalStudies.result,function(e,r){return e[r.studyId]=t[r.studyId],e},{}),this.filteredVirtualStudies.result.forEach(function(e){e.data.studies.forEach(function(e){!r[e.id]&&t[e.id]&&(r[e.id]=t[e.id])})}),e.abrupt("return",i.values(r));case 4:case"end":return e.stop()}},e,this)}))},default:[]})}),Object.defineProperty(this,"queriedPhysicalStudyIds",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.queriedPhysicalStudies]},invoke:function(){return Promise.resolve(i.map(o.queriedPhysicalStudies.result,function(e){return e.studyId}))},default:[]})}),Object.defineProperty(this,"queriedSampleIdentifiers",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.filteredPhysicalStudies,o.filteredVirtualStudies]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.reduce(this.filteredVirtualStudies.result,function(e,t){return t.data.studies.forEach(function(t){var r=t.samples;e[t.id]&&(r=i.union(e[t.id],r)),e[t.id]=r}),e},{}),i.isEmpty(t)){e.next=6;break}return t=i.reduce(this.filteredPhysicalStudies.result,function(e,t){return e[t.studyId]=[],e},t),r=i.reduce(t,function(e,t,r){return 0===t.length&&e.push(r),e},[]),e.next=6,Promise.all(i.map(r,function(e){return d.a.getAllSamplesInStudyUsingGET({studyId:e}).then(function(r){t[e]=r.map(function(e){return e.sampleId})})}));case 6:return e.abrupt("return",i.flatten(i.map(t,function(e,t){return e.map(function(e){return{sampleId:e,studyId:t}})})));case 7:case"end":return e.stop()}},e,this)}))},default:[]})}),Object.defineProperty(this,"displayedStudies",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.filteredVirtualStudies,o.filteredPhysicalStudies,o.queriedPhysicalStudies]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.filteredPhysicalStudies.result.length||1!==this.filteredVirtualStudies.result.length){e.next=5;break}return t=this.filteredVirtualStudies.result[0],e.abrupt("return",[{name:t.data.name,description:t.data.description,studyId:t.id}]);case 5:return e.abrupt("return",this.queriedPhysicalStudies.result);case 6:case"end":return e.stop()}},e,this)}))},default:[]})}),Object.defineProperty(this,"originStudies",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.filteredPhysicalStudies,o.filteredVirtualStudies,o.everyStudyIdToStudy]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t,r,n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],!this.showOriginStudiesInSummaryDescription){e.next=8;break}return r=this.filteredVirtualStudies.result[0].data.origin,n=[],o=this.everyStudyIdToStudy.result,i.each(r,function(e){o[e]?t.push(o[e]):n.push(e)}),e.next=8,Promise.all(n.map(function(e){return S.a.getVirtualStudy(e).then(function(e){t.push({name:e.data.name,description:e.data.description,studyId:e.id})}).catch(function(){})}));case 8:return e.abrupt("return",t);case 9:case"end":return e.stop()}},e,this)}))},default:[]})}),Object.defineProperty(this,"unknownQueriedIds",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.filteredPhysicalStudies,o.filteredVirtualStudies]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],i.each(this.filteredPhysicalStudies.result,function(e){return t.push(e.studyId)}),i.each(this.filteredVirtualStudies.result,function(e){return t.push(e.id)}),e.abrupt("return",i.filter(this.studyIds,function(e){return!i.includes(t,e)}));case 4:case"end":return e.stop()}},e,this)}))},onError:function(){},onResult:function(e){e.length>0&&(o.pageStatusMessages.unknownIds={status:"danger",message:"Unknown/Unauthorized ".concat(e.length>1?"studies":"study"," ").concat(e.join(", "))})},default:[]})}),Object.defineProperty(this,"studyIdToMolecularProfiles",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.molecularProfiles]},invoke:function(){return Promise.resolve(i.groupBy(o.molecularProfiles.result,function(e){return e.studyId}))},onError:function(e){},default:{}})}),Object.defineProperty(this,"mutationProfiles",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.studyIdToMolecularProfiles]},invoke:function(){return Promise.resolve(Object(b.V)(o.studyIdToMolecularProfiles.result,B.a.MUTATION_EXTENDED))},onError:function(){},default:[]})}),Object.defineProperty(this,"structuralVariantProfiles",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.studyIdToMolecularProfiles]},invoke:function(){return Promise.resolve(Object(b.V)(o.studyIdToMolecularProfiles.result,B.a.STRUCTURAL_VARIANT,[B.b.FUSION,B.b.SV]))},onError:function(){},default:[]})}),Object.defineProperty(this,"cnaProfiles",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.studyIdToMolecularProfiles]},invoke:function(){return Promise.resolve(Object(b.V)(o.studyIdToMolecularProfiles.result,B.a.COPY_NUMBER_ALTERATION,[B.b.DISCRETE]))},onError:function(){},default:[]})}),Object.defineProperty(this,"resourceDefinitions",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.queriedPhysicalStudies]},invoke:function(){return p.a.fetchResourceDefinitionsUsingPOST({studyIds:o.queriedPhysicalStudies.result.map(function(e){return e.studyId})})},onResult:function(e){if(e){var t=!0,r=!1,n=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value;s.openByDefault&&o.setResourceTabOpen(s.resourceId,!0)}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}}}})}),Object.defineProperty(this,"studyResourceData",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.resourceDefinitions]},invoke:function(){var e=[],t=o.resourceDefinitions.result.filter(function(e){return"STUDY"===e.resourceType}),r=[],n=!0,i=!1,a=void 0;try{for(var s,l=t[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){var u=s.value;r.push(p.a.getAllStudyResourceDataInStudyUsingGET({studyId:u.studyId,resourceId:u.resourceId,projection:"DETAILED"}).then(function(t){return e.push.apply(e,_e(t))}))}}catch(e){i=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw a}}return Promise.all(r).then(function(){return e})}})}),Object.defineProperty(this,"resourceIdToResourceData",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.studyResourceData]},invoke:function(){return Promise.resolve(i.groupBy(o.studyResourceData.result,function(e){return e.resourceId}))}})}),Object.defineProperty(this,"clinicalAttributes",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.queriedPhysicalStudyIds]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.queriedPhysicalStudyIds.result.length>0)){e.next=7;break}return e.t0=i,e.next=4,d.a.fetchClinicalAttributesUsingPOST({studyIds:this.queriedPhysicalStudyIds.result});case 4:return e.t1=e.sent,e.t2=function(e){return"".concat(e.patientAttribute,"-").concat(e.clinicalAttributeId)},e.abrupt("return",e.t0.uniqBy.call(e.t0,e.t1,e.t2));case 7:return e.abrupt("return",[]);case 8:case"end":return e.stop()}},e,this)}))},default:[],onError:function(){},onResult:function(e){e.forEach(function(e){if(e.datatype===b.e.NUMBER){var t=Object(b.tb)(e),r=o.getDefaultClinicalDataBinFilter(e);A.d.initialBins[t]&&(r.customBins=A.d.initialBins[t]),o._clinicalDataBinFilterSet.set(t,r)}})}})}),Object.defineProperty(this,"clinicalAttributeIdToClinicalAttribute",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.clinicalAttributes]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.keyBy(this.clinicalAttributes.result,"clinicalAttributeId"));case 1:case"end":return e.stop()}},e,this)}))}})}),Object.defineProperty(this,"clinicalAttributeIdToDataType",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.clinicalAttributes]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},i.map(Array.from(this._customCharts.values()),function(e){t[e.uniqueKey]=e.clinicalAttribute?e.clinicalAttribute.datatype:b.e.STRING}),this.clinicalAttributes.result.forEach(function(e){t[e.clinicalAttributeId]=e.datatype}),e.abrupt("return",t);case 4:case"end":return e.stop()}},e,this)}))}})}),Object.defineProperty(this,"MDACCHeatmapStudyMeta",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.queriedPhysicalStudyIds]},onError:function(){},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.b.serverConfig.show_mdacc_heatmap){e.next=6;break}if(!(1===this.queriedPhysicalStudyIds.result.length)){e.next=6;break}return e.next=5,T(Object(P.r)(this.queriedPhysicalStudyIds.result[0]));case 5:return e.abrupt("return",e.sent);case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}},e,this)}))}},[])}),Object.defineProperty(this,"oncokbCancerGenes",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.utilsCancerGeneListGetUsingGET_1({}));case 1:case"end":return e.stop()}},e)}))},onError:function(){},default:[]})}),Object.defineProperty(this,"oncokbGenes",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.oncokbCancerGenes]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.oncokbCancerGenes.result.filter(function(e){return e.oncokbAnnotated}));case 1:case"end":return e.stop()}},e,this)}))},onError:function(){},default:[]})}),Object.defineProperty(this,"oncokbCancerGeneEntrezGeneIds",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.oncokbCancerGenes]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.oncokbCancerGenes.result.map(function(e){return e.entrezGeneId}));case 1:case"end":return e.stop()}},e,this)}))},default:[]})}),Object.defineProperty(this,"oncokbAnnotatedGeneEntrezGeneIds",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.oncokbCancerGenes]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.oncokbCancerGenes.result.filter(function(e){return e.oncokbAnnotated}).map(function(e){return e.entrezGeneId}));case 1:case"end":return e.stop()}},e,this)}))},default:[]})}),Object.defineProperty(this,"oncokbOncogeneEntrezGeneIds",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.oncokbGenes]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.oncokbGenes.result.filter(function(e){return e.oncogene}).map(function(e){return e.entrezGeneId}));case 1:case"end":return e.stop()}},e,this)}))},default:[]})}),Object.defineProperty(this,"oncokbTumorSuppressorGeneEntrezGeneIds",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.oncokbGenes]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.oncokbGenes.result.filter(function(e){return e.tsg}).map(function(e){return e.entrezGeneId}));case 1:case"end":return e.stop()}},e,this)}))},default:[]})}),Object.defineProperty(this,"genericAssayEntitiesGroupedByGenericAssayType",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.genericAssayProfiles]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ce.e)(this.genericAssayProfiles.result);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}))}})}),Object.defineProperty(this,"genericAssayStableIdToMeta",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.genericAssayEntitiesGroupedByGenericAssayType]},invoke:function(){return Promise.resolve(i.chain(o.genericAssayEntitiesGroupedByGenericAssayType.result).values().flatten().uniqBy(function(e){return e.stableId}).keyBy(function(e){return e.stableId}).value())}})}),Object.defineProperty(this,"genericAssayProfiles",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.molecularProfiles]},invoke:function(){return Promise.resolve(o.molecularProfiles.result.filter(function(e){return e.molecularAlterationType===B.a.GENERIC_ASSAY}))},default:[]})}),Object.defineProperty(this,"genericAssayProfileOptionsByType",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.genericAssayProfiles,o.molecularProfileSampleCountSet]},invoke:function(){return Promise.resolve(i.chain(o.genericAssayProfiles.result).filter(function(e){return e.molecularAlterationType===B.a.GENERIC_ASSAY}).groupBy(function(e){return e.genericAssayType}).mapValues(function(e){return i.chain(e).groupBy(function(e){return Object(ce.a)(e)}).map(function(e,t){return{value:t,count:o.molecularProfileSampleCountSet.result[t]||0,label:e[0].name,description:e[0].description,dataType:e[0].datatype,patientLevel:e[0].patientLevel}}).filter(function(e){return e.count>0}).value()}).value())},default:{}})}),Object.defineProperty(this,"isInitiallLoad",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"updateUserSettingsDebounce",{enumerable:!0,configurable:!0,writable:!0,value:i.debounce(function(){!i.isEqual(o.previousSettings,o.currentChartSettingsMap)&&(o.previousSettings=o.currentChartSettingsMap,i.isEmpty(o.currentChartSettingsMap)||S.a.updateUserSettings({origin:Object(u.toJS)(o.studyIds),chartSettings:i.values(o.currentChartSettingsMap),groupColors:Object(u.toJS)(o.userGroupColors)}))},3e3)}),Object.defineProperty(this,"userSettings",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.isSavingUserPreferencePossible&&this.studyIds.length>0)){e.next=2;break}return e.abrupt("return",S.a.fetchUserSettings(Object(u.toJS)(this.studyIds)));case 2:return e.abrupt("return",void 0);case 3:case"end":return e.stop()}},e,this)}))},default:void 0,onError:function(){},onResult:function(){var e=o.userSettings.isComplete&&o.userSettings.result?o.userSettings.result.groupColors:{};i.forIn(e,function(e,t){return o.userGroupColors[t]=e})}})}),Object.defineProperty(this,"_defaultChartsDimension",{enumerable:!0,configurable:!0,writable:!0,value:u.observable.map()}),Object.defineProperty(this,"_defaultChartsType",{enumerable:!0,configurable:!0,writable:!0,value:u.observable.map()}),Object.defineProperty(this,"_defaultVisibleChartIds",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_defaultClinicalDataBinFilterSet",{enumerable:!0,configurable:!0,writable:!0,value:u.observable.map()}),Object.defineProperty(this,"defaultVisibleAttributes",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.clinicalAttributes]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t,r,n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.clinicalAttributes.result.map(function(e){return e.priority=Object(b.mb)(e).toString(),e}),r=t.sort(b.p).slice(0,20),n=[],void 0!==this.initialFilters.clinicalDataFilters&&(n=n.concat(this.initialFilters.clinicalDataFilters.map(function(e){return e.attributeId}))),n.length>0&&(o=i.filter(this.clinicalAttributes.result,function(e){return n.includes(e.clinicalAttributeId)}),void 0!==r&&(r=r.concat(o))),e.abrupt("return",i.uniq(r));case 6:case"end":return e.stop()}},e,this)}))},onError:function(){},default:[]})}),Object.defineProperty(this,"initialVisibleAttributesClinicalDataCountData",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.defaultVisibleAttributes]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.uniqBy(i.filter(this.defaultVisibleAttributes.result,function(e){return e.datatype===b.e.STRING}).map(function(e){return{attributeId:e.clinicalAttributeId}}),function(e){return e.attributeId}),e.abrupt("return",p.a.fetchClinicalDataCountsUsingPOST({clinicalDataCountFilter:{attributes:t,studyViewFilter:this.initialFilters}}));case 2:case"end":return e.stop()}},e,this)}))},onError:function(){},default:[]})}),Object.defineProperty(this,"initialVisibleAttributesClinicalDataBinAttributes",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.defaultVisibleAttributes]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.chain(this.defaultVisibleAttributes.result).filter(function(e){return e.datatype===b.e.NUMBER}).map(this.getDefaultClinicalDataBinFilter).uniqBy(function(e){return e.attributeId}).value());case 1:case"end":return e.stop()}},e,this)}))},onError:function(){},default:[]})}),Object.defineProperty(this,"initialVisibleAttributesClinicalDataBinCountData",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.initialVisibleAttributesClinicalDataBinAttributes]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.fetchClinicalDataBinCountsUsingPOST({dataBinMethod:"STATIC",clinicalDataBinCountFilter:{attributes:this.initialVisibleAttributesClinicalDataBinAttributes.result,studyViewFilter:this.initialFilters}});case 2:return t=e.sent,e.abrupt("return",Promise.resolve(Object(b.q)(t)));case 4:case"end":return e.stop()}},e,this)}))},onError:function(){},default:[]})}),Object.defineProperty(this,"samples",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.clinicalAttributes,o.queriedSampleIdentifiers,o.queriedPhysicalStudyIds]},invoke:function(){var e={};return o.queriedSampleIdentifiers.result.length>0?e.sampleIdentifiers=o.queriedSampleIdentifiers.result:e.studyIds=o.queriedPhysicalStudyIds.result,i.isEmpty(e.sampleIdentifiers)&&i.isEmpty(e.studyIds)?Promise.resolve([]):p.a.fetchFilteredSamplesUsingPOST({studyViewFilter:e})},onError:function(){},default:[]})}),Object.defineProperty(this,"sampleSet",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.samples]},invoke:function(){var e=new G.a,t=!0,r=!1,n=void 0;try{for(var i,a=o.samples.result[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value;e.set({studyId:s.studyId,sampleId:s.sampleId},s)}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}return Promise.resolve(e)}})}),Object.defineProperty(this,"selectedSampleSet",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.selectedSamples]},invoke:function(){return Promise.resolve(G.a.from(o.selectedSamples.result,function(e){return{studyId:e.studyId,sampleId:e.sampleId}}))}})}),Object.defineProperty(this,"sampleSetByKey",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.samples]},invoke:function(){return Promise.resolve(i.keyBy(o.samples.result,function(e){return e.uniqueSampleKey}))}})}),Object.defineProperty(this,"invalidSampleIds",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.queriedSampleIdentifiers,o.samples]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.queriedSampleIdentifiers.result.length>0&&this.samples.result.length!==this.queriedSampleIdentifiers.result.length)){e.next=3;break}return t=i.reduce(this.samples.result,function(e,t){return e[t.studyId+"_"+t.sampleId]=!0,e},{}),e.abrupt("return",i.filter(this.queriedSampleIdentifiers.result,function(e){return!t[e.studyId+"_"+e.sampleId]}));case 3:return e.abrupt("return",[]);case 4:case"end":return e.stop()}},e,this)}))},onError:function(){},default:[]})}),Object.defineProperty(this,"studyWithSamples",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.selectedSamples,o.filteredPhysicalStudies,o.filteredVirtualStudies]},invoke:function(){return Promise.resolve(Object(b.X)(o.selectedSamples.result,o.filteredPhysicalStudies.result,o.filteredVirtualStudies.result))},onError:function(){},default:[]})}),Object.defineProperty(this,"blockLoading",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"selectedSamples",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.samples]},invoke:function(){return o.chartsAreFiltered?o.hasSampleIdentifiersInFilter?p.a.fetchFilteredSamplesUsingPOST({studyViewFilter:o.filters}):Promise.resolve([]):Promise.resolve(o.samples.result)},onError:function(){},default:[],onResult:function(e){0===e.length?o.blockLoading=!0:o.blockLoading=!1}})}),Object.defineProperty(this,"selectedPatientKeys",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.selectedSamples]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.uniq(this.selectedSamples.result.map(function(e){return e.uniquePatientKey})));case 1:case"end":return e.stop()}},e,this)}))},onError:function(){},default:[]})}),Object.defineProperty(this,"unSelectedPatientKeys",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.samples,o.selectedPatientKeys]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.reduce(this.selectedPatientKeys.result,function(e,t){return e[t]=!0,e},{}),r=i.reduce(this.samples.result,function(e,r){return void 0===t[r.uniquePatientKey]&&(e[r.uniquePatientKey]=!0),e},{}),e.abrupt("return",Object.keys(r));case 3:case"end":return e.stop()}},e,this)}))},onError:function(){},default:[]})}),Object.defineProperty(this,"genePanelCache",{enumerable:!0,configurable:!0,writable:!0,value:new M.a(function(e){return{invoke:function(){return d.a.getGenePanelUsingGET(e)}}})}),Object.defineProperty(this,"mutatedGeneTableRowData",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return o.oncokbCancerGeneFilterEnabled?[o.mutationProfiles,o.oncokbAnnotatedGeneEntrezGeneIds,o.oncokbOncogeneEntrezGeneIds,o.oncokbTumorSuppressorGeneEntrezGeneIds,o.oncokbCancerGeneEntrezGeneIds,o.selectedSamples]:[o.mutationProfiles,o.selectedSamples]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i.isEmpty(this.mutationProfiles.result)||!(this.selectedSamples.result.length>0)){e.next=7;break}return e.next=3,p.a.fetchMutatedGenesUsingPOST({studyViewFilter:this.filters});case 3:return t=e.sent,e.abrupt("return",t.map(function(e){return Object.assign(Object.assign({},e),{label:e.hugoGeneSymbol,uniqueKey:e.hugoGeneSymbol,oncokbAnnotated:!!r.oncokbCancerGeneFilterEnabled&&r.oncokbAnnotatedGeneEntrezGeneIds.result.includes(e.entrezGeneId),isOncokbOncogene:!!r.oncokbCancerGeneFilterEnabled&&r.oncokbOncogeneEntrezGeneIds.result.includes(e.entrezGeneId),isOncokbTumorSuppressorGene:!!r.oncokbCancerGeneFilterEnabled&&r.oncokbTumorSuppressorGeneEntrezGeneIds.result.includes(e.entrezGeneId),isCancerGene:!!r.oncokbCancerGeneFilterEnabled&&r.oncokbCancerGeneEntrezGeneIds.result.includes(e.entrezGeneId)})}));case 7:return e.abrupt("return",[]);case 8:case"end":return e.stop()}},e,this)}))},onError:function(){},default:[]})}),Object.defineProperty(this,"structuralVariantGeneTableRowData",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return o.oncokbCancerGeneFilterEnabled?[o.structuralVariantProfiles,o.oncokbAnnotatedGeneEntrezGeneIds,o.oncokbOncogeneEntrezGeneIds,o.oncokbTumorSuppressorGeneEntrezGeneIds,o.oncokbCancerGeneEntrezGeneIds,o.selectedSamples]:[o.mutationProfiles,o.selectedSamples]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i.isEmpty(this.structuralVariantProfiles.result)||!(this.selectedSamples.result.length>0)){e.next=7;break}return e.next=3,p.a.fetchStructuralVariantGenesUsingPOST({studyViewFilter:this.filters});case 3:return t=e.sent,e.abrupt("return",t.map(function(e){return Object.assign(Object.assign({},e),{label:e.hugoGeneSymbol,uniqueKey:e.hugoGeneSymbol,oncokbAnnotated:!!r.oncokbCancerGeneFilterEnabled&&r.oncokbAnnotatedGeneEntrezGeneIds.result.includes(e.entrezGeneId),isOncokbOncogene:!!r.oncokbCancerGeneFilterEnabled&&r.oncokbOncogeneEntrezGeneIds.result.includes(e.entrezGeneId),isOncokbTumorSuppressorGene:!!r.oncokbCancerGeneFilterEnabled&&r.oncokbTumorSuppressorGeneEntrezGeneIds.result.includes(e.entrezGeneId),isCancerGene:!!r.oncokbCancerGeneFilterEnabled&&r.oncokbCancerGeneEntrezGeneIds.result.includes(e.entrezGeneId)})}));case 7:return e.abrupt("return",[]);case 8:case"end":return e.stop()}},e,this)}))},onError:function(){},default:[]})}),Object.defineProperty(this,"cnaGeneTableRowData",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return o.oncokbCancerGeneFilterEnabled?[o.cnaProfiles,o.oncokbAnnotatedGeneEntrezGeneIds,o.oncokbOncogeneEntrezGeneIds,o.oncokbTumorSuppressorGeneEntrezGeneIds,o.oncokbCancerGeneEntrezGeneIds,o.selectedSamples]:[o.mutationProfiles,o.selectedSamples]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i.isEmpty(this.cnaProfiles.result)||!(this.selectedSamples.result.length>0)){e.next=7;break}return e.next=3,p.a.fetchCNAGenesUsingPOST({studyViewFilter:this.filters});case 3:return t=e.sent,e.abrupt("return",t.map(function(e){return Object.assign(Object.assign({},e),{label:e.hugoGeneSymbol,uniqueKey:Object(x.d)(e.hugoGeneSymbol,e.alteration),oncokbAnnotated:!!r.oncokbCancerGeneFilterEnabled&&r.oncokbAnnotatedGeneEntrezGeneIds.result.includes(e.entrezGeneId),isOncokbOncogene:!!r.oncokbCancerGeneFilterEnabled&&r.oncokbOncogeneEntrezGeneIds.result.includes(e.entrezGeneId),isOncokbTumorSuppressorGene:!!r.oncokbCancerGeneFilterEnabled&&r.oncokbTumorSuppressorGeneEntrezGeneIds.result.includes(e.entrezGeneId),isCancerGene:!!r.oncokbCancerGeneFilterEnabled&&r.oncokbCancerGeneEntrezGeneIds.result.includes(e.entrezGeneId)})}));case 7:return e.abrupt("return",[]);case 8:case"end":return e.stop()}},e,this)}))},onError:function(){},default:[]})}),Object.defineProperty(this,"cnSegments",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.selectedSamples]},invoke:function(){return Object(h.r)(o.selectedSamples.result)}},[])}),Object.defineProperty(this,"hasCNSegmentData",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.samples]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d.a.fetchCopyNumberSegmentsUsingPOSTWithHttpInfo({sampleIdentifiers:this.samples.result.map(function(e){return{sampleId:e.sampleId,studyId:e.studyId}}),projection:"META"}).then(function(e){return parseInt(e.header["total-count"],10)>0}));case 1:case"end":return e.stop()}},e,this)}))}})}),Object.defineProperty(this,"selectedDriverTiers",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.customDriverAnnotationReport]},invoke:function(){return Promise.resolve(o.customDriverAnnotationReport.result.tiers.filter(function(e){return o.driverAnnotationSettings.driverTiers.get(e)}))}})}),Object.defineProperty(this,"selectedDriverTiersMap",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.customDriverAnnotationReport,o.selectedDriverTiers]},invoke:function(){return Promise.resolve(Object(b.l)(o.selectedDriverTiers.result,o.customDriverAnnotationReport.result.tiers))}})}),Object.defineProperty(this,"customDriverAnnotationReport",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.molecularProfiles]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.molecularProfiles.result.map(function(e){return e.molecularProfileId}),e.next=3,p.a.fetchAlterationDriverAnnotationReportUsingPOST({molecularProfileIds:t});case 3:return r=e.sent,e.abrupt("return",Object.assign(Object.assign({},r),{hasCustomDriverAnnotations:r.hasBinary||r.tiers.length>0}));case 5:case"end":return e.stop()}},e,this)}))},onResult:function(e){Object(Oe.d)(e,o.driverAnnotationSettings,o.driverAnnotationSettings.customTiersDefault)}})}),Object.defineProperty(this,"survivalPlots",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.survivalClinicalAttributesPrefix,o.clinicalAttributeIdToClinicalAttribute,o.survivalDescriptions]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.survivalClinicalAttributesPrefix.result.map(function(e){var t="KM Plot: ";t+=r.survivalDescriptions.result&&r.survivalDescriptions.result[e]?Object(U.g)(r.survivalDescriptions.result[e][0].displayName):"".concat(e," Survival"),t+=" (months)";var n=r.clinicalAttributeIdToClinicalAttribute.result["".concat(e,"_STATUS")];return{id:"".concat(e,"_SURVIVAL"),title:t,survivalStatusAttribute:n,associatedAttrs:["".concat(e,"_STATUS"),"".concat(e,"_MONTHS")],filter:function(t){return Object(U.p)(t,e)},survivalData:[]}}),e.abrupt("return",t);case 2:case"end":return e.stop()}},e,this)}))},default:[]})}),Object.defineProperty(this,"survivalPlotData",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.survivalData,o.selectedPatientKeys,o.survivalPlots]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.survivalPlots.result.map(function(e){return e.survivalData=Object(m.a)(t.survivalData.result,t.selectedPatientKeys.result,e.associatedAttrs[0],e.associatedAttrs[1],e.filter),e}));case 1:case"end":return e.stop()}},e,this)}))},onError:function(){},default:[]})}),Object.defineProperty(this,"survivalData",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.clinicalAttributes,o.samples,o.survivalPlots]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t,r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.flatten(this.survivalPlots.result.map(function(e){return e.associatedAttrs})),i.isEmpty(t)){e.next=7;break}return r={attributeIds:t,identifiers:i.map(this.samples.result,function(e){return{entityId:e.patientId,studyId:e.studyId}})},e.next=5,d.a.fetchClinicalDataUsingPOST({clinicalDataType:b.d.PATIENT,clinicalDataMultiStudyFilter:r});case 5:return n=e.sent,e.abrupt("return",i.groupBy(n,"uniquePatientKey"));case 7:return e.abrupt("return",{});case 8:case"end":return e.stop()}},e,this)}))},onError:function(){},default:{}})}),Object.defineProperty(this,"mutationCountVsCNADensityData",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.clinicalAttributes,o.selectedSamples]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t,r,n,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.clinicalAttributes.result.find(function(e){return e.clinicalAttributeId===b.j.MUTATION_COUNT})&&this.clinicalAttributes.result.find(function(e){return e.clinicalAttributeId===b.j.FRACTION_GENOME_ALTERED})&&this.selectedSamples.result.length>0)){e.next=12;break}return t=b.g,r=50,e.next=5,p.a.fetchClinicalDataDensityPlotUsingPOST({xAxisAttributeId:b.j.FRACTION_GENOME_ALTERED,yAxisAttributeId:b.j.MUTATION_COUNT,xAxisStart:0,xAxisEnd:1,yAxisStart:0,xAxisBinCount:r,yAxisBinCount:t,studyViewFilter:this.filters});case 5:return e.t0=function(e){return e.count>0},n=e.sent.filter(e.t0),o=1/r,i=Math.max.apply(Math,_e(n.map(function(e){return e.binY})))/(t-1),e.abrupt("return",{bins:n,xBinSize:o,yBinSize:i});case 12:return e.abrupt("return",{bins:[],xBinSize:-1,yBinSize:-1});case 13:case"end":return e.stop()}},e,this)}))},onError:function(){},default:{bins:[],xBinSize:-1,yBinSize:-1}})}),Object.defineProperty(this,"sampleMutationCountAndFractionGenomeAlteredData",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.clinicalAttributes,o.selectedSamples]},invoke:function(){if(0===o.selectedSamples.result.length)return Promise.resolve([]);var e={attributeIds:[b.j.MUTATION_COUNT,b.j.FRACTION_GENOME_ALTERED],identifiers:i.map(o.selectedSamples.result,function(e){return{entityId:e.sampleId,studyId:e.studyId}})};return d.a.fetchClinicalDataUsingPOST({clinicalDataType:b.d.SAMPLE,clinicalDataMultiStudyFilter:e})},onError:function(){},default:[]})}),Object.defineProperty(this,"mutationCountVsFGAData",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.sampleMutationCountAndFractionGenomeAlteredData]},onError:function(){},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.reduce(i.groupBy(this.sampleMutationCountAndFractionGenomeAlteredData.result,function(e){return e.uniqueSampleKey}),function(e,t){if(2==t.length){var r={studyId:t[0].studyId,sampleId:t[0].sampleId,patientId:t[0].patientId,uniqueSampleKey:t[0].uniqueSampleKey,x:0,y:0};i.forEach(t,function(e){e.clinicalAttributeId===b.j.MUTATION_COUNT?r.y=Number(e.value):e.clinicalAttributeId===b.j.FRACTION_GENOME_ALTERED&&(r.x=Number(e.value))}),e.push(r)}return e},[]));case 1:case"end":return e.stop()}},e,this)}))}})}),Object.defineProperty(this,"mutationCountVsFractionGenomeAlteredDataSet",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.mutationCountVsFGAData]},invoke:function(){return Promise.resolve(i.keyBy(o.mutationCountVsFGAData.result,function(e){return e.uniqueSampleKey}))},default:{}})}),Object.defineProperty(this,"getDataForClinicalDataTab",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.clinicalAttributes,o.selectedSamples]},onError:function(){},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.selectedSamples.result.length){e.next=2;break}return e.abrupt("return",Promise.resolve([]));case 2:return e.next=4,Object(b.O)(this.selectedSamples.result);case 4:return t=e.sent,e.abrupt("return",i.reduce(this.selectedSamples.result,function(e,r){var n=Object.assign({studyId:r.studyId,patientId:r.patientId,sampleId:r.sampleId},t[r.uniqueSampleKey]||{});return e.push(n),e},[]));case 6:case"end":return e.stop()}},e,this)}))},default:[]})}),Object.defineProperty(this,"molecularProfileForGeneCharts",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.molecularProfiles,o.molecularProfileSampleCounts]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.molecularProfiles.result.filter(function(e){return[B.a.MRNA_EXPRESSION,B.a.PROTEIN_LEVEL,B.a.METHYLATION].includes(e.molecularAlterationType)||e.molecularAlterationType===B.a.COPY_NUMBER_ALTERATION&&e.datatype===B.b.CONTINUOUS}));case 1:case"end":return e.stop()}},e,this)}))},default:[]})}),Object.defineProperty(this,"molecularProfileOptions",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.molecularProfileForGeneCharts,o.molecularProfileSampleCounts]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.molecularProfileForGeneCharts.result.map(function(e){return Object(ce.a)(e)}),e.abrupt("return",this.molecularProfileSampleCounts.result.filter(function(e){return t.includes(e.uniqueKey)}).map(function(e){return{value:e.uniqueKey,count:e.numberOfAlteredCases,label:e.label,description:e.label,dataType:"STRING"}}));case 2:case"end":return e.stop()}},e,this)}))},default:[]})}),Object.defineProperty(this,"molecularProfileSampleCounts",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.molecularProfiles,o.selectedSamples]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hasFilteredSamples){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,p.a.fetchMolecularProfileSampleCountsUsingPOST({studyViewFilter:this.filters});case 4:return t=e.sent,e.abrupt("return",t.map(function(e){return{uniqueKey:e.value,label:e.label,numberOfAlteredCases:e.count,numberOfProfiledCases:r.selectedSamples.result.length}}));case 6:case"end":return e.stop()}},e,this)}))},default:[]})}),Object.defineProperty(this,"caseListSampleCounts",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.selectedSamples]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hasFilteredSamples){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,p.a.fetchCaseListCountsUsingPOST({studyViewFilter:this.filters});case 4:return t=e.sent,e.abrupt("return",t.map(function(e){return{uniqueKey:e.value,label:e.label,numberOfAlteredCases:e.count,numberOfProfiledCases:r.selectedSamples.result.length}}));case 6:case"end":return e.stop()}},e,this)}))}})}),Object.defineProperty(this,"molecularProfileSampleCountSet",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.molecularProfileSampleCounts]},onError:function(){},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.chain(this.molecularProfileSampleCounts.result||[]).keyBy(function(e){return e.uniqueKey}).mapValues(function(e){return e.numberOfAlteredCases}).value());case 1:case"end":return e.stop()}},e,this)}))},default:{}})}),Object.defineProperty(this,"initialMolecularProfileSampleCounts",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.samples,o.molecularProfiles]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.a.fetchMolecularProfileSampleCountsUsingPOST({studyViewFilter:this.initialFilters}));case 1:case"end":return e.stop()}},e,this)}))},default:[]})}),Object.defineProperty(this,"initialMolecularProfileSampleCountSet",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.initialMolecularProfileSampleCounts]},onError:function(){},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.chain(this.initialMolecularProfileSampleCounts.result||[]).keyBy(function(e){return e.value}).mapValues(function(e){return e.count}).value());case 1:case"end":return e.stop()}},e,this)}))}})}),Object.defineProperty(this,"molecularProfileNameSet",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.initialMolecularProfileSampleCounts]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.chain(this.initialMolecularProfileSampleCounts.result).keyBy(function(e){return e.value}).mapValues(function(e){return e.label}).value());case 1:case"end":return e.stop()}},e,this)}))}})}),Object.defineProperty(this,"caseListNameSet",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.caseListSampleCounts]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.chain(this.caseListSampleCounts.result).keyBy(function(e){return e.uniqueKey}).mapValues(function(e){return e.label}).value());case 1:case"end":return e.stop()}},e,this)}))}})}),Object.defineProperty(this,"clinicalAttributesCounts",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.selectedSamples]},onError:function(){},invoke:function(){if(0===o.selectedSamples.result.length)return Promise.resolve([]);var e={sampleIdentifiers:o.selectedSamples.result.map(function(e){return{sampleId:e.sampleId,studyId:e.studyId}})};return p.a.getClinicalAttributeCountsUsingPOST({clinicalAttributeCountFilter:e})}})}),Object.defineProperty(this,"dataWithCount",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.molecularProfileSampleCountSet,o.clinicalAttributeIdToClinicalAttribute,o.clinicalAttributesCounts,o.mutationCountVsFractionGenomeAlteredDataSet,o.sampleTreatments,o.patientTreatments]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t,r,n,o,a,s,l,u,c,p,d,f,h=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i.isEmpty(this.chartMetaSet)){e.next=18;break}return t=this.clinicalAttributeIdToClinicalAttribute.result,r=i.reduce(this.clinicalAttributesCounts.result||[],function(e,r){var n=t[r.clinicalAttributeId];if(n){var o=Object(b.tb)(n);e[o]=e[o]||0,e[o]+=r.count}return e},{}),i.each(this.survivalPlotData.result,function(e){e.id in h.chartMetaSet&&(r[e.id]=e.survivalData.length)}),b.j.CANCER_STUDIES in this.chartMetaSet&&(r[b.j.CANCER_STUDIES]=i.sumBy(this.cancerStudiesData.result,function(e){return e.count})),n=this.molecularProfileSampleCountSet.result,i.isEmpty(this.mutationProfiles.result)||(o=Object(b.ub)(this.mutationProfiles.result.map(function(e){return e.molecularProfileId})),r[o]=i.sumBy(this.mutationProfiles.result,function(e){return n[Object(ce.a)(e)]||0})),a=function(e){return e?e.map(function(e){return e.samples}).reduce(function(e,t){return t.forEach(function(t){return e.add(t.sampleId+"::"+t.studyId)}),e},new Set).size:0},i.isEmpty(this.sampleTreatments.result)||(r.SAMPLE_TREATMENTS=a(this.sampleTreatments.result)),i.isEmpty(this.patientTreatments.result)||(r.PATIENT_TREATMENTS=a(this.patientTreatments.result)),i.isEmpty(this.structuralVariantProfiles.result)||(s=Object(b.ub)(this.structuralVariantProfiles.result.map(function(e){return e.molecularProfileId})),0===(l=i.sumBy(this.structuralVariantProfiles.result,function(e){return n[Object(ce.a)(e)]||0}))&&(u=Object(b.ub)(this.mutationProfiles.result.map(function(e){return e.molecularProfileId})),l=r[u]),r[s]=l),i.isEmpty(this.cnaProfiles.result)||(c=Object(b.ub)(this.cnaProfiles.result.map(function(e){return e.molecularProfileId})),r[c]=i.sumBy(this.cnaProfiles.result,function(e){return n[Object(ce.a)(e)]||0})),b.j.MUTATION_COUNT_CNA_FRACTION in this.chartMetaSet&&(p=this.mutationCountVsFractionGenomeAlteredDataSet.result,d=i.keyBy(this.selectedSamples.result,function(e){return e.uniqueSampleKey}),f=i.reduce(d,function(e,t){return p[t.uniqueSampleKey]&&e.push(p[t.uniqueSampleKey]),e},[]),r[b.j.MUTATION_COUNT_CNA_FRACTION]=f.length),b.j.GENOMIC_PROFILES_SAMPLE_COUNT in this.chartMetaSet&&(r[b.j.GENOMIC_PROFILES_SAMPLE_COUNT]=this.selectedSamples.result.length),i.reduce(Array.from(this._customCharts.keys()),function(e,t){return e[t]=h.selectedSamples.result.length,e},r),this._geneSpecificChartMap.size>0&&i.reduce(Array.from(this._geneSpecificChartMap.keys()),function(e,t){var r=h._geneSpecificChartMap.get(t);return e[t]=n[r.profileType]||0,e},r),this._genericAssayChartMap.size>0&&i.reduce(Array.from(this._genericAssayChartMap.keys()),function(e,t){var r=h._genericAssayChartMap.get(t);return e[t]=n[r.profileType]||0,e},r),e.abrupt("return",i.reduce(this.chartMetaSet,function(e,t,n){return e[n]=r[n]||0,e},{}));case 18:return e.abrupt("return",{});case 19:case"end":return e.stop()}},e,this)}))},onError:function(){},default:{}})}),Object.defineProperty(this,"cancerStudiesData",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.selectedSamples]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hasFilteredSamples){e.next=2;break}return e.abrupt("return",[]);case 2:if(t=[],!this._chartSampleIdentifiersFilterSet.has(b.j.CANCER_STUDIES)){e.next=9;break}return e.next=6,Object(b.pb)(b.j.CANCER_STUDIES,this.filters,i.fromPairs(this._chartSampleIdentifiersFilterSet.toJSON()),this.queriedSampleIdentifiers.result,this.queriedPhysicalStudyIds.result);case 6:t=e.sent,e.next=10;break;case 9:t=this.selectedSamples.result;case 10:return e.abrupt("return",Object(b.P)(i.values(i.reduce(t,function(e,t){var r=t.studyId;return e[r]?e[r].count=e[r].count+1:e[r]={value:"".concat(r),count:1},e},{}))));case 11:case"end":return e.stop()}},e,this)}))},onError:function(){},default:[]})}),Object.defineProperty(this,"cancerStudyAsClinicalData",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.samples]},invoke:function(){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve(this.samples.result.map(function(e){return{clinicalAttributeId:b.j.CANCER_STUDIES,patientId:e.patientId,sampleId:e.sampleId,studyId:e.studyId,uniquePatientKey:e.uniquePatientKey,uniqueSampleKey:e.uniqueSampleKey,value:e.studyId}})));case 1:case"end":return e.stop()}},e,this)}))},onError:function(){return Promise.resolve([])},default:[]})}),Object.defineProperty(this,"survivalClinicalAttributesPrefix",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.clinicalAttributes]},invoke:function(){return Promise.resolve(Object(h.jb)(o.clinicalAttributes.result))},default:[]})}),Object.defineProperty(this,"survivalDescriptions",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.clinicalAttributes,o.survivalClinicalAttributesPrefix]},invoke:function(){var e=i.reduce(o.survivalClinicalAttributesPrefix.result,function(e,t){var r="".concat(t,"_STATUS"),n=i.groupBy(o.clinicalAttributes.result,"clinicalAttributeId");return n&&n[r]&&n[r].length>0&&n[r].map(function(r){e[t]||(e[t]=[]),e[t].push({studyName:r.studyId,description:r.description,displayName:r.displayName})}),e},{});return Promise.resolve(e)}})}),Object.defineProperty(this,"_patientTreatmentsFilter",{enumerable:!0,configurable:!0,writable:!0,value:{filters:[]}}),Object.defineProperty(this,"_sampleTreatmentsFilters",{enumerable:!0,configurable:!0,writable:!0,value:{filters:[]}}),Object.defineProperty(this,"sampleTreatments",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.selectedSamples,o.displaySampleTreatments]},invoke:function(){return o.hasFilteredSamples&&o.displaySampleTreatments.result?d.a.getAllSampleTreatmentsUsingPOST({studyViewFilter:o.filters}):Promise.resolve([])}})}),Object.defineProperty(this,"displayPatientTreatments",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.queriedPhysicalStudyIds]},invoke:function(){return d.a.getContainsTreatmentDataUsingPOST({studyIds:Object(u.toJS)(o.queriedPhysicalStudyIds.result)})}})}),Object.defineProperty(this,"displaySampleTreatments",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.queriedPhysicalStudyIds]},invoke:function(){return d.a.getContainsSampleTreatmentDataUsingPOST({studyIds:Object(u.toJS)(o.queriedPhysicalStudyIds.result)})}})}),Object.defineProperty(this,"patientTreatments",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.selectedSamples,o.displayPatientTreatments]},invoke:function(){return o.hasFilteredSamples&&o.displayPatientTreatments.result?d.a.getAllPatientTreatmentsUsingPOST({studyViewFilter:o.filters}):Promise.resolve([])}})}),Object(u.makeObservable)(this),this.chartItemToColor=new Map,this.chartToUsedColors=new Map,this.reactionDisposers.push(Object(u.reaction)(function(){return o.loadingInitialDataForSummaryTab},function(){o.loadingInitialDataForSummaryTab||(o.updateChartStats(),o.loadUserChartSettings())})),this.reactionDisposers.push(Object(u.reaction)(function(){return[o.visibleAttributes,o.columns,i.fromPairs(o.chartsDimension.toJSON()),i.fromPairs(o.chartsType.toJSON())]},function(){o.updateLayout()})),this.reactionDisposers.push(Object(u.reaction)(function(){return[Object(u.toJS)(o.currentChartSettingsMap),Object(u.toJS)(o.userGroupColors)]},function(){if(o.isSavingUserSettingsPossible){o.hideRestoreSettingsMsg||(o.hideRestoreSettingsMsg=!0);var e=void 0===o.userSettings.result&&Object.keys(o.userGroupColors).length>0;o.userSettings.result&&(!o.userSettings.result.groupColors||!i.isEqual(Object(u.toJS)(o.userGroupColors),o.userSettings.result.groupColors))||e?o.updateUserSettings():o.updateUserSettingsDebounce()}})),this.reactionDisposers.push(Object(u.reaction)(function(){return o.userSettings.isComplete},function(e){e&&o.isSavingUserPreferencePossible&&!o._loadUserSettingsInitially&&(o.previousSettings=o.currentChartSettingsMap,o.loadUserChartSettings())})),this.reactionDisposers.push(Object(u.reaction)(function(){return o.userSavedCustomData.isComplete},function(e){e&&o.isSavingUserPreferencePossible&&!o._loadUserSettingsInitially&&(o.updateCustomDataList(o.userSavedCustomData.result,!0),o.saveSharedCustomDataToUserProfile(Array.from(o.customChartSet.values())))})),b.i.forEach(function(e){var t=e.uniqueKey;o.chartsType.has(t)||o.chartsType.set(t,e.chartType),void 0!==o.chartsType.get(t)&&(o._customCharts.set(t,{displayName:e.displayName,uniqueKey:t,dataType:Object(b.L)(t),patientAttribute:e.patientAttribute,description:e.description,renderWhenDataChange:!1,priority:A.d.priority[t]||e.priority}),o.chartsType.set(t,e.chartType),o.chartsDimension.set(t,e.dimension))})}var t,r,n;return t=e,(r=[{key:"isShowNAToggleVisible",value:function(e){return 0!==e.length&&e.some(function(e){return"NA"===e.specialValue})}},{key:"destroy",value:function(){var e=!0,t=!1,r=void 0;try{for(var n,o=this.reactionDisposers[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){(0,n.value)()}}catch(e){t=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}}},{key:"isResourceTabOpen",value:function(e){return!!this.openResourceTabMap.get(e)}},{key:"setResourceTabOpen",value:function(e,t){this.openResourceTabMap.set(e,t)}},{key:"setComparisonConfirmationModal",value:function(e){var t=this;this._comparisonConfirmationModal=e(function(){t._comparisonConfirmationModal=null})}},{key:"setComparisonGroupSelected",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._selectedComparisonGroups.set(e,t)}},{key:"toggleComparisonGroupSelected",value:function(e){this.isComparisonGroupSelected(e)&&this.showComparisonGroupWarningSign(e,!1),this.setComparisonGroupSelected(e,!this.isComparisonGroupSelected(e))}},{key:"toggleComparisonGroupMarkedForDeletion",value:function(e){this._comparisonGroupsMarkedForDeletion.set(e,!this.isComparisonGroupMarkedForDeletion(e))}},{key:"toggleCustomChartMarkedForDeletion",value:function(e){this._customChartsMarkedForDeletion.set(e,!this.isCustomChartGroupMarkedForDeletion(e))}},{key:"showComparisonGroupWarningSign",value:function(e,t){this._selectedComparisonGroupsWarningSigns.set(e,t)}},{key:"isComparisonGroupSelected",value:function(e){return!this.isComparisonGroupMarkedForDeletion(e)&&(!!this._selectedComparisonGroups.has(e)&&this._selectedComparisonGroups.get(e))}},{key:"isComparisonGroupMarkedForDeletion",value:function(e){return!!this._comparisonGroupsMarkedForDeletion.has(e)&&this._comparisonGroupsMarkedForDeletion.get(e)}},{key:"isCustomChartGroupMarkedForDeletion",value:function(e){return this._customChartsMarkedForDeletion.get(e)||!1}},{key:"isComparisonGroupMarkedWithWarningSign",value:function(e){return!(!this._selectedComparisonGroups.has(e)||!this._selectedComparisonGroupsWarningSigns.get(e))}},{key:"deleteMarkedComparisonGroups",value:function(){return Ie(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,r,n,o,i,a,s,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t=[],r=!0,n=!1,o=void 0,e.prev=4,i=this._comparisonGroupsMarkedForDeletion.keys()[Symbol.iterator]();!(r=(a=i.next()).done);r=!0)s=a.value,this.isComparisonGroupMarkedForDeletion(s)&&(this.isLoggedIn&&(l=I.a.deleteGroup(s),t.push(l),this._pendingChanges.push(new ue(l))),delete this.sharedGroupSet[s],this._selectedComparisonGroups.delete(s));e.next=12;break;case 8:e.prev=8,e.t0=e.catch(4),n=!0,o=e.t0;case 12:e.prev=12,e.prev=13,r||null==i.return||i.return();case 15:if(e.prev=15,!n){e.next=18;break}throw o;case 18:return e.finish(15);case 19:return e.finish(12);case 20:return e.next=22,Promise.all(t);case 22:this._comparisonGroupsMarkedForDeletion.clear(),this.notifyComparisonGroupsChange();case 24:case"end":return e.stop()}},e,this,[[4,8,12,20],[13,,15,19]])}))}},{key:"deleteMarkedCustomData",value:function(){return Ie(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,r,n,o,i,a,s,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Array.from(this._customChartsMarkedForDeletion.keys()).length>0)){e.next=24;break}for(t=[],r=!0,n=!1,o=void 0,e.prev=5,i=this._customChartsMarkedForDeletion.keys()[Symbol.iterator]();!(r=(a=i.next()).done);r=!0)s=a.value,this.isCustomChartGroupMarkedForDeletion(s)&&(this.isLoggedIn&&(l=S.a.deleteCustomData(s),t.push(l)),delete this.sharedCustomChartSet[s],this.customChartSet.delete(s),this._customCharts.delete(s));e.next=13;break;case 9:e.prev=9,e.t0=e.catch(5),n=!0,o=e.t0;case 13:e.prev=13,e.prev=14,r||null==i.return||i.return();case 16:if(e.prev=16,!n){e.next=19;break}throw o;case 19:return e.finish(16);case 20:return e.finish(13);case 21:return e.next=23,Promise.all(t);case 23:this._customChartsMarkedForDeletion.clear();case 24:case"end":return e.stop()}},e,this,[[5,9,13,21],[14,,16,20]])}))}},{key:"flagDuplicateColorsForSelectedGroups",value:function(e,t){var r=this,n={},o=Object(L.b)(this.comparisonGroups.result,this);o.sort(function(e,t){return e.name.localeCompare(t.name)}),o.forEach(function(o,i){var a=o.uid===e?t:r.userGroupColors[o.uid];null!=a&&(a=a.toLowerCase()),null==a||null==n[a]?(null!=a&&(n[a]=1),r.showComparisonGroupWarningSign(o.uid,!1)):(n[a]=n[a]+1,r.showComparisonGroupWarningSign(o.uid,!0))})}},{key:"saveGroupsToUserProfile",value:function(e){return Ie(this,void 0,void 0,regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isLoggedIn){t.next=5;break}return r=[],e.forEach(function(e){if(e.isSharedGroup||void 0===e.isSharedGroup){var t=I.a.addGroupToUser(e.uid);r.push(t)}}),t.next=5,Promise.all(r);case 5:case"end":return t.stop()}},t,this)}))}},{key:"saveSharedCustomDataToUserProfile",value:function(e){if(this.isLoggedIn){var t=[];e.forEach(function(e){if(e.isSharedChart||void 0===e.isSharedChart){var r=S.a.addCustomDataToUser(e.uniqueKey);t.push(r)}}),Promise.all(t)}}},{key:"notifyComparisonGroupsChange",value:function(){this._comparisonGroupsChangeCount+=1}},{key:"onGroupColorChange",value:function(e,t){null==t&&this.userGroupColors[e]?delete this.userGroupColors[e]:this.userGroupColors[e]=t}},{key:"createNumberAttributeComparisonSession",value:function(e,t,r){return Ie(this,void 0,void 0,regeneratorRuntime.mark(function n(){var o,i=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r(N.a.DOWNLOADING_GROUPS),o=[this.selectedSamples],this.isGeneSpecificChart(e.uniqueKey)?o.push(this.genomicChartPromises[e.uniqueKey]):this.isGenericAssayChart(e.uniqueKey)?o.push(this.genericAssayChartPromises[e.uniqueKey]):o.push(this.clinicalDataBinPromises[e.uniqueKey]),n.abrupt("return",new Promise(function(n){Object(k.a)(o,function(o,a){return Ie(i,void 0,void 0,regeneratorRuntime.mark(function i(){var s,l,u,c,p,f,h,m,y;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(s=[],!this.isGeneSpecificChart(e.uniqueKey)){i.next=8;break}return l=this._geneSpecificChartMap.get(e.uniqueKey),i.next=5,Object(b.eb)(l,this.molecularProfileMapByType,o);case 5:s=i.sent,i.next=25;break;case 8:if(!this.isGenericAssayChart(e.uniqueKey)){i.next=15;break}return u=this._genericAssayChartMap.get(e.uniqueKey),i.next=12,Object(b.cb)(u,this.molecularProfileMapByType,o);case 12:s=i.sent,i.next=25;break;case 15:if(!(c=e.clinicalAttribute)){i.next=25;break}if(p=c.patientAttribute?"patientId":"sampleId",0!==o.length){i.next=22;break}s=[],i.next=25;break;case 22:return i.next=24,d.a.fetchClinicalDataUsingPOST({clinicalDataType:c.patientAttribute?b.d.PATIENT:b.d.SAMPLE,clinicalDataMultiStudyFilter:{attributeIds:[c.clinicalAttributeId],identifiers:o.map(function(e){return{studyId:e.studyId,entityId:e[p]}})}});case 24:s=i.sent;case 25:f=[],i.t0=t,i.next=i.t0===b.h.BINS?29:i.t0===b.h.MEDIAN?32:(i.t0,b.h.QUARTILES,35);break;case 29:return f=Object(b.fb)(o,e.patientAttribute,s,a,this.studyIds),h="Bins of ".concat(e.displayName),i.abrupt("break",37);case 32:return f=Object(b.gb)(o,e.patientAttribute,Object(D.F)(s,2),this.studyIds),h="Median of ".concat(e.displayName),i.abrupt("break",37);case 35:f=Object(b.gb)(o,e.patientAttribute,Object(D.F)(s,4),this.studyIds),h="Quartiles of ".concat(e.displayName);case 37:return r(N.a.CREATING_SESSION),i.next=40,I.a.addComparisonSession({groups:f,clinicalAttributeName:h,origin:this.studyIds,groupNameOrder:f.map(function(e){return e.name})});case 40:return m=i.sent,y=m.id,i.abrupt("return",n(y));case 43:case"end":return i.stop()}},i,this)}))})}));case 4:case"end":return n.stop()}},n,this)}))}},{key:"createTreatmentsComparisonSession",value:function(e,t,r,n){var o=this;n(N.a.DOWNLOADING_GROUPS);var a=t===A.a.PATIENT_TREATMENTS_TABLE,s=[this.selectedSampleSet,this.sampleTreatments];return new Promise(function(t){Object(k.a)(s,function(s,l){return Ie(o,void 0,void 0,regeneratorRuntime.mark(function o(){var u,c,p,d,f,h,m=this;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return u=i.keyBy(r),c=l.filter(function(e){return $(e,a)in u}),p=i.groupBy(c,function(e){return $(e,a)}),d=i.map(p,function(e){var t=i.flatMap(e,function(e){return e.samples.filter(function(e){return s.has(e,["sampleId","studyId"])})}).map(function(e){return{studyId:e.studyId,sampleId:e.sampleId}});return Object(L.a)(X(e[0],a),t,m.studyIds)}),n(N.a.CREATING_SESSION),o.next=7,I.a.addComparisonSession({groups:d,origin:this.studyIds,clinicalAttributeName:e.displayName});case 7:return f=o.sent,h=f.id,o.abrupt("return",t(h));case 10:case"end":return o.stop()}},o,this)}))})})}},{key:"createSvGeneComparisonSession",value:function(e,t,r){var n=this;r(N.a.DOWNLOADING_GROUPS);var o=[this.selectedSamples,this.structuralVariantProfiles];return new Promise(function(i){Object(k.a)(o,function(o,a){return Ie(n,void 0,void 0,regeneratorRuntime.mark(function n(){var s,l;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ye(o,a,t);case 2:return s=n.sent,l=ge(s,t),n.t0=i,n.next=7,fe(e,this.studyIds,l,r);case 7:return n.t1=n.sent,n.abrupt("return",(0,n.t0)(n.t1));case 9:case"end":return n.stop()}},n,this)}))})})}},{key:"createCnaGeneComparisonSession",value:function(e,t,r){var n=this;r(N.a.DOWNLOADING_GROUPS);var o=[this.selectedSamples,this.cnaProfiles];return new Promise(function(a){Object(k.a)(o,function(o,s){return Ie(n,void 0,void 0,regeneratorRuntime.mark(function n(){var l,u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,be(o,s,t);case 2:return l=n.sent,u=i.groupBy(l.filter(function(e){return e.value===Se.b||e.value===Se.c}),function(e){return"".concat(e.gene.hugoGeneSymbol,":").concat(Object(b.I)(e.value))}),n.t0=a,n.next=7,fe(e,this.studyIds,u,r);case 7:return n.t1=n.sent,n.abrupt("return",(0,n.t0)(n.t1));case 9:case"end":return n.stop()}},n,this)}))})})}},{key:"createMutatedGeneComparisonSession",value:function(e,t,r){var n=this;r(N.a.DOWNLOADING_GROUPS);var o=[this.selectedSamples,this.mutationProfiles];return new Promise(function(a){Object(k.a)(o,function(o,s){return Ie(n,void 0,void 0,regeneratorRuntime.mark(function n(){var l,u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,me(o,s,t);case 2:return l=n.sent,u=i.groupBy(l,function(e){return e.gene.hugoGeneSymbol}),n.t0=a,n.next=7,fe(e,this.studyIds,u,r);case 7:return n.t1=n.sent,n.abrupt("return",(0,n.t0)(n.t1));case 9:case"end":return n.stop()}},n,this)}))})})}},{key:"createCategoricalAttributeComparisonSession",value:function(e,t,r){var n=this;r(N.a.DOWNLOADING_GROUPS);var o=[this.selectedSamples];return e.uniqueKey===b.j.CANCER_STUDIES&&o.push(this.cancerStudyAsClinicalData),new Promise(function(a){Object(k.a)(o,function(o,s){return Ie(n,void 0,void 0,regeneratorRuntime.mark(function n(){var l,u,c,p,f,h,m,b,y,g,v,S=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(l=[],!this.isUserDefinedCustomDataChart(e.uniqueKey)){n.next=5;break}void 0===s?(u=i.keyBy(this._customChartsSelectedCases.get(e.uniqueKey),function(e){return e.studyId+e.sampleId}),l=o.map(function(e){var t=u[e.studyId+e.sampleId];return{sampleId:e.sampleId,studyId:e.studyId,value:t?t.value:ie.a.NA}})):(c=i.keyBy(o,function(e){return e.uniqueSampleKey}),l=i.filter(s,function(e){return void 0!==c[e.uniqueSampleKey]})),n.next=11;break;case 5:return p=e.clinicalAttribute&&e.clinicalAttribute.patientAttribute||!1,f=p?"patientId":"sampleId",n.next=9,d.a.fetchClinicalDataUsingPOST({clinicalDataType:p?"PATIENT":"SAMPLE",clinicalDataMultiStudyFilter:{attributeIds:[e.clinicalAttribute.clinicalAttributeId],identifiers:o.map(function(e){return{studyId:e.studyId,entityId:e[f]}})}});case 9:l=n.sent,p&&(h=i.keyBy(l,function(e){return e.uniquePatientKey}),l=o.map(function(e){var t=h[e.uniquePatientKey];return{sampleId:e.sampleId,studyId:e.studyId,value:t?t.value:ie.a.NA}}));case 11:return m=i.groupBy(l,function(e){return e.value.toLowerCase()}),b=i.keyBy(t,function(e){return e.value.toLowerCase()}),y=i.chain(t).filter(function(e){var t=e.value.toLowerCase(),r=m[t];return r&&r.length>0}).sortBy(function(e){return-e.count}).slice(0,de(e)?D.d:void 0).map(function(e){var t=e.value.toLowerCase(),r=m[t];return Object(L.a)(e.value,r,S.studyIds,b[t].color)}).value(),r(N.a.CREATING_SESSION),n.next=17,I.a.addComparisonSession({groups:y,clinicalAttributeName:e.displayName,origin:this.studyIds});case 17:return g=n.sent,v=g.id,n.abrupt("return",a(v));case 20:case"end":return n.stop()}},n,this)}))})})}},{key:"openComparisonPage",value:function(e,t){return Ie(this,void 0,void 0,regeneratorRuntime.mark(function r(){var n,o,i,a,s;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n=window.open(Object(P.f)({phase:N.a.DOWNLOADING_GROUPS,clinicalAttributeName:e.displayName,origin:this.studyIds.join(",")}),"_blank"),r.next=3,Object(R.b)(function(){return n.closed||n.globalStores&&n.globalStores.appStore.appReady});case 3:if(!n.closed){r.next=5;break}return r.abrupt("return");case 5:o=setInterval(function(){try{n.closed||n.ping()}catch(e){clearInterval(o)}},500),a=function(e){n.closed||n.routingStore.updateRoute({phase:e},void 0,!1)},s=this.chartsType.get(e.uniqueKey),r.t0=s,r.next=r.t0===A.a.PIE_CHART?11:r.t0===A.a.TABLE?11:r.t0===A.a.MUTATED_GENES_TABLE?15:r.t0===A.a.CNA_GENES_TABLE?19:r.t0===A.a.STRUCTURAL_VARIANT_GENES_TABLE?23:r.t0===A.a.SAMPLE_TREATMENTS_TABLE?27:r.t0===A.a.PATIENT_TREATMENTS_TABLE?27:31;break;case 11:return r.next=13,this.createCategoricalAttributeComparisonSession(e,t.clinicalAttributeValues,a);case 13:return i=r.sent,r.abrupt("break",35);case 15:return r.next=17,this.createMutatedGeneComparisonSession(e,t.hugoGeneSymbols,a);case 17:return i=r.sent,r.abrupt("break",35);case 19:return r.next=21,this.createCnaGeneComparisonSession(e,t.hugoGeneSymbols,a);case 21:return i=r.sent,r.abrupt("break",35);case 23:return r.next=25,this.createSvGeneComparisonSession(e,t.hugoGeneSymbols,a);case 25:return i=r.sent,r.abrupt("break",35);case 27:return r.next=29,this.createTreatmentsComparisonSession(e,s,t.treatmentUniqueKeys,a);case 29:return i=r.sent,r.abrupt("break",35);case 31:return r.next=33,this.createNumberAttributeComparisonSession(e,t.categorizationType||b.h.QUARTILES,a);case 33:return i=r.sent,r.abrupt("break",35);case 35:clearInterval(o),n.closed||Object(P.C)(n,{comparisonId:i});case 37:case"end":return r.stop()}},r,this)}))}},{key:"setGenomicProfilesFilter",value:function(e){this._genomicProfilesFilter=e}},{key:"setCaseListsFilter",value:function(e){this._caseListsFilter=e}},{key:"isNewlyAdded",value:function(e){return this.newlyAddedCharts.includes(e)}},{key:"updateStoreByFilters",value:function(e){var t=this;Object(b.x)(e),i.isEmpty(e.clinicalDataFilters)||i.each(e.clinicalDataFilters,function(e){t._clinicalDataFilterSet.set(e.attributeId,{attributeId:e.attributeId,values:i.reduce(e.values,function(e,t){return e.push({end:t.end,start:t.start,value:t.value}),e},[])})}),i.isArray(e.customDataFilters)&&e.customDataFilters.length>0&&i.each(e.customDataFilters,function(e){t.sharedCustomChartSet[e.attributeId]=!0,t._customDataFilterSet.set(e.attributeId,{attributeId:e.attributeId,values:i.reduce(e.values,function(e,t){return e.push({end:t.end,start:t.start,value:t.value}),e},[])})}),i.isEmpty(e.geneFilters)||e.geneFilters.forEach(function(e){var r=Object(b.ub)(e.molecularProfileIds);t._geneFilterSet.set(r,i.clone(e.geneQueries))}),i.isEmpty(e.sampleIdentifiers)||(this.numberOfSelectedSamplesInCustomSelection=e.sampleIdentifiers.length,this.updateChartSampleIdentifierFilter(b.j.CUSTOM_SELECT,e.sampleIdentifiers,!1)),void 0!==e.genomicProfiles&&this.setGenomicProfilesFilter(e.genomicProfiles),this.setTreatmentFilters(e),void 0!==e.caseLists&&this.setCaseListsFilter(e.caseLists),i.isEmpty(e.genomicDataFilters)||e.genomicDataFilters.forEach(function(e){var r=Object(b.db)(e.hugoGeneSymbol,e.profileType);t._genomicDataIntervalFilterSet.set(r,i.clone(e))}),i.isEmpty(e.genericAssayDataFilters)||e.genericAssayDataFilters.forEach(function(e){var r=Object(b.bb)(e.stableId,e.profileType);t._genericAssayDataIntervalFilterSet.set(r,i.clone(e))}),i.isEqual(Object(u.toJS)(this.initialFiltersQuery),e)||(this.initialFiltersQuery=e)}},{key:"updateStoreFromURL",value:function(e){return Ie(this,void 0,void 0,regeneratorRuntime.mark(function t(){var r,n,o,a,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r="",n=[],e.studyId&&(r=e.studyId),e.cancer_study_id&&(r=e.cancer_study_id),e.id&&(r=e.id),r&&(n=r.trim().split(","),i.isEqual(n,Object(u.toJS)(this.studyIds))||(this.studyIds=n)),e.sharedGroups&&(this.sharedGroupSet=Object(F.Bb)(e.sharedGroups.trim().split(",")),this.showComparisonGroupUI=!0),e.sharedCustomData&&(this.sharedCustomChartSet=Object(F.Bb)(e.sharedCustomData.trim().split(",")),this.showCustomDataSelectionUI=!0),o={},!e.filterJson){t.next=13;break}try{o=JSON.parse(decodeURIComponent(e.filterJson)),this.updateStoreByFilters(o)}catch(e){}t.next=22;break;case 13:if(!e.filterAttributeId||!e.filterValues){t.next=22;break}return t.t0=i,t.next=17,d.a.fetchClinicalAttributesUsingPOST({studyIds:n});case 17:t.t1=t.sent,t.t2=function(e){return"".concat(e.patientAttribute,"-").concat(e.clinicalAttributeId)},a=t.t0.uniqBy.call(t.t0,t.t1,t.t2),void 0!==(s=i.find(a,function(t){return t.clinicalAttributeId.toUpperCase()===e.filterAttributeId.toUpperCase()}))?(s.datatype==b.e.NUMBER?o.clinicalDataFilters=[{attributeId:s.clinicalAttributeId,values:e.filterValues.split(",").map(function(e){var t=e.split("-");return{start:Number(t[0]),end:Number(t[1])}})}]:o.clinicalDataFilters=[{attributeId:s.clinicalAttributeId,values:Object(b.Q)(e.filterValues).map(function(e){return{value:e}})}],this.updateStoreByFilters(o)):this.pageStatusMessages.unknownClinicalAttribute={message:"The clinical attribute ".concat(e.filterAttributeId," is not available for this study"),status:"danger"};case 22:case"end":return t.stop()}},t,this)}))}},{key:"updateLayout",value:function(){this.currentGridLayout=Object(b.n)(this.visibleAttributes,this.columns,i.fromPairs(this.chartsDimension.toJSON()),this.useCurrentGridLayout?this.currentGridLayout:[],this.currentFocusedChartByUser,this.currentFocusedChartByUserDimension),this.useCurrentGridLayout&&(this.useCurrentGridLayout=!1)}},{key:"updateCurrentGridLayout",value:function(e){this.currentGridLayout=e}},{key:"updateMutatedGenesTableByCancerGenesFilter",value:function(e){this._filterMutatedGenesTableByCancerGenes=e}},{key:"updateSVGenesTableByCancerGenesFilter",value:function(e){this._filterSVGenesTableByCancerGenes=e}},{key:"updateCNAGenesTableByCancerGenesFilter",value:function(e){this._filterCNAGenesTableByCancerGenes=e}},{key:"updateComparisonGroupsFilter",value:function(){var e=this;Object(k.a)(this.comparisonGroups,function(t){e._filterComparisonGroups=Object(L.b)(t,e),e.updateChartSampleIdentifierFilter(b.j.SELECTED_COMPARISON_GROUPS,Object(D.x)(e._filterComparisonGroups))})}},{key:"onCheckGene",value:function(e){this.geneQueries=Object(b.Kb)(this.geneQueries,e),this.geneQueryStr=this.geneQueries.map(function(e){return Object(v.j)(e)}).join(" ")}},{key:"isSharedCustomData",value:function(e){var t;return this.customChartSet.has(e)&&(null===(t=this.customChartSet.get(e))||void 0===t?void 0:t.isSharedChart)||!1}},{key:"updateSelectedGenes",value:function(e,t){this.geneQueries=e,this.geneQueryStr=t}},{key:"clearAllFilters",value:function(){this._clinicalDataFilterSet.clear(),this._customDataFilterSet.clear(),this._geneFilterSet.clear(),this._genomicDataIntervalFilterSet.clear(),this._genericAssayDataIntervalFilterSet.clear(),this._chartSampleIdentifiersFilterSet.clear(),this.preDefinedCustomChartFilterSet.clear(),this.numberOfSelectedSamplesInCustomSelection=0,this.removeComparisonGroupSelectionFilter(),this._customBinsFromScatterPlotSelectionSet.clear(),this.setGenomicProfilesFilter([]),this.setCaseListsFilter([]),this.clearPatientTreatmentFilters(),this.clearSampleTreatmentFilters()}},{key:"updateClinicalDataIntervalFilters",value:function(e,t){e===b.j.FRACTION_GENOME_ALTERED&&this._customBinsFromScatterPlotSelectionSet.delete(b.j.FRACTION_GENOME_ALTERED),e===b.j.MUTATION_COUNT&&this._customBinsFromScatterPlotSelectionSet.delete(b.j.MUTATION_COUNT),Object(j.i)("clinicalDataInterval",this);var r=Object(b.S)(t);this.updateClinicalDataFilterByValues(e,r)}},{key:"updateClinicalDataFilterByValues",value:function(e,t){if(this.chartMetaSet[e]){var r=this.chartMetaSet[e];if(Object(j.i)("clinicalDataFilters",this),t.length>0){var n={attributeId:r.clinicalAttribute.clinicalAttributeId,values:t};this._clinicalDataFilterSet.set(r.uniqueKey,n)}else this._clinicalDataFilterSet.delete(r.uniqueKey)}}},{key:"setCustomChartFilters",value:function(e,t){if(e===b.j.CANCER_STUDIES)if(t.length>0){var r=Object(b.W)(this.samples.result.filter(function(e){return t.includes(e.studyId)}));this._chartSampleIdentifiersFilterSet.set(e,r),this.preDefinedCustomChartFilterSet.set(e,t)}else this._chartSampleIdentifiersFilterSet.delete(e),this.preDefinedCustomChartFilterSet.delete(e);else if(this.chartMetaSet[e]){var n=this.chartMetaSet[e];if(t.length>0){var o={attributeId:n.uniqueKey,values:t.map(function(e){return{value:e}})};this._customDataFilterSet.set(n.uniqueKey,o)}else this._customDataFilterSet.delete(n.uniqueKey)}}},{key:"updateGenomicDataIntervalFilters",value:function(e,t){Object(j.i)("genomicDataInterval",this);var r=Object(b.S)(t);this.updateGenomicDataIntervalFiltersByValues(e,r)}},{key:"updateGenericAssayDataIntervalFilters",value:function(e,t){Object(j.i)("genericAssayDataInterval",this);var r=Object(b.S)(t);this.updateGenericAssayDataIntervalFiltersByValues(e,r)}},{key:"updateScatterPlotFilterByValues",value:function(e,t){if(e===b.j.MUTATION_COUNT_CNA_FRACTION)if(void 0===t)this._clinicalDataFilterSet.delete(b.j.FRACTION_GENOME_ALTERED),this._clinicalDataFilterSet.delete(b.j.MUTATION_COUNT),this._customBinsFromScatterPlotSelectionSet.delete(b.j.FRACTION_GENOME_ALTERED),this._customBinsFromScatterPlotSelectionSet.delete(b.j.MUTATION_COUNT);else{var r={start:t.yStart,end:t.yEnd},n={attributeId:b.j.MUTATION_COUNT,values:[r]};this._customBinsFromScatterPlotSelectionSet.set(b.j.MUTATION_COUNT,[r.start,r.end]),this._clinicalDataFilterSet.set(b.j.MUTATION_COUNT,n);var o={start:t.xStart,end:t.xEnd},i={attributeId:b.j.FRACTION_GENOME_ALTERED,values:[o]};this._customBinsFromScatterPlotSelectionSet.set(b.j.FRACTION_GENOME_ALTERED,[o.start,o.end]),this._clinicalDataFilterSet.set(b.j.FRACTION_GENOME_ALTERED,i)}}},{key:"addGeneFilters",value:function(e,t){var r=this;Object(j.i)("geneFilter",this);var n=Object(u.toJS)(this._geneFilterSet.get(e.uniqueKey))||[],o=i.map(t,function(e){return i.map(e,function(e){return Object(b.C)(e,r.driverAnnotationSettings.includeDriver,r.driverAnnotationSettings.includeVUS,r.driverAnnotationSettings.includeUnknownOncogenicity,r.selectedDriverTiersMap.isComplete?r.selectedDriverTiersMap.result:{},r.driverAnnotationSettings.includeUnknownTier,r.includeGermlineMutations,r.includeSomaticMutations,r.includeUnknownStatusMutations)})});n=n.concat(o),this._geneFilterSet.set(e.uniqueKey,n)}},{key:"updateGenomicDataIntervalFiltersByValues",value:function(e,t){if(t.length>0){var r=this._geneSpecificChartMap.get(e),n={hugoGeneSymbol:r.hugoGeneSymbol,profileType:r.profileType,values:t};this._genomicDataIntervalFilterSet.set(e,n)}else this._genomicDataIntervalFilterSet.delete(e)}},{key:"updateGenericAssayDataIntervalFiltersByValues",value:function(e,t){if(t.length>0){var r=this._genericAssayChartMap.get(e),n={stableId:r.genericAssayEntityId,profileType:r.profileType,values:t};this._genericAssayDataIntervalFilterSet.set(e,n)}else this._genericAssayDataIntervalFilterSet.delete(e)}},{key:"addGenomicProfilesFilter",value:function(e,t){var r=Object(u.toJS)(this.genomicProfilesFilter)||[];this.setGenomicProfilesFilter(r.concat(t))}},{key:"addCaseListsFilter",value:function(e,t){var r=Object(u.toJS)(this.caseListsFilter)||[];this.setCaseListsFilter(r.concat(t))}},{key:"removeGeneFilter",value:function(e,t){var r=Object(u.toJS)(this._geneFilterSet.get(e))||[];0===(r=i.reduce(r,function(e,r){var n=Te(t.split(":"),2),o=n[0],a=n[1],s=r.filter(function(e){return e.hugoGeneSymbol!==o&&!i.includes(e.alterations,a)});return s.length>0&&e.push(s),e},[])).length?this._geneFilterSet.delete(e):this._geneFilterSet.set(e,r)}},{key:"resetGeneFilter",value:function(e){this._geneFilterSet.delete(e)}},{key:"removeGenomicProfileFilter",value:function(e){var t=Object(u.toJS)(this.genomicProfilesFilter)||[];t=i.reduce(t,function(t,r){var n=r.filter(function(t){return t!==e});return n.length>0&&t.push(n),t},[]),this.setGenomicProfilesFilter(t)}},{key:"removeCaseListsFilter",value:function(e){var t=Object(u.toJS)(this.caseListsFilter)||[];t=i.reduce(t,function(t,r){var n=r.filter(function(t){return t!==e});return n.length>0&&t.push(n),t},[]),this.setGenomicProfilesFilter(t)}},{key:"updateChartSampleIdentifierFilter",value:function(e,t,r){var n=t,o=i.keyBy(n,function(e){return"".concat(e.studyId,":").concat(e.sampleId)});r&&(n=i.reduce(this._chartSampleIdentifiersFilterSet.get(e)||[],function(e,t){return"".concat(t.studyId,":").concat(t.sampleId)in o||e.push(t),e},n)),i.isEmpty(n)?this._chartSampleIdentifiersFilterSet.delete(e):this._chartSampleIdentifiersFilterSet.set(e,n)}},{key:"getChartSampleIdentifiersFilter",value:function(e){return this._chartSampleIdentifiersFilterSet.get(e)||[]}},{key:"getPreDefinedCustomChartFilters",value:function(e){return this.preDefinedCustomChartFilterSet.get(e)||[]}},{key:"isPreDefinedCustomChart",value:function(e){return e in b.j}},{key:"newCustomChartUniqueKey",value:function(){return"CUSTOM_FILTERS_".concat(this._customCharts.size)}},{key:"getUserDefinedCustomChartFilters",value:function(e){return this._customDataFilterSet.get(e)||[]}},{key:"isUserDefinedCustomDataChart",value:function(e){return this._customCharts.has(e)}},{key:"isGeneSpecificChart",value:function(e){return this._geneSpecificChartMap.has(e)}},{key:"isGenericAssayChart",value:function(e){return this._genericAssayChartMap.has(e)}},{key:"changeChartVisibility",value:function(e,t){t?this._chartVisibility.set(e,!0):this._chartVisibility.delete(e)}},{key:"resetFilterAndChangeChartVisibility",value:function(e,t){if(!t)switch(this.chartsType.get(e)){case A.a.PIE_CHART:case A.a.TABLE:this.isUserDefinedCustomDataChart(e)?this.setCustomChartFilters(e,[]):this.updateClinicalDataFilterByValues(e,[]);break;case A.a.BAR_CHART:this.isGeneSpecificChart(e)?this.updateGenomicDataIntervalFilters(e,[]):this.isGenericAssayChart(e)?this.updateGenericAssayDataIntervalFilters(e,[]):this.updateClinicalDataIntervalFilters(e,[]);break;case A.a.SCATTER:this.updateScatterPlotFilterByValues(e);break;case A.a.MUTATED_GENES_TABLE:case A.a.STRUCTURAL_VARIANT_GENES_TABLE:case A.a.CNA_GENES_TABLE:this.resetGeneFilter(e);break;case A.a.GENOMIC_PROFILES_TABLE:this.setGenomicProfilesFilter([]);break;case A.a.CASE_LIST_TABLE:this.setCaseListsFilter([]);break;case A.a.SURVIVAL:break;case A.a.SAMPLE_TREATMENTS_TABLE:this.setSampleTreatmentFilters({filters:[]});break;case A.a.PATIENT_TREATMENTS_TABLE:this.setPatientTreatmentFilters({filters:[]});break;default:this._clinicalDataFilterSet.delete(e),this._chartSampleIdentifiersFilterSet.delete(e),this.preDefinedCustomChartFilterSet.delete(e),this._genomicDataIntervalFilterSet.delete(e),this._genericAssayDataIntervalFilterSet.delete(e)}this.changeChartVisibility(e,t)}},{key:"isChartFiltered",value:function(e){switch(this.chartsType.get(e)){case A.a.PIE_CHART:case A.a.TABLE:return this.isUserDefinedCustomDataChart(e)?this._customDataFilterSet.has(e)||this.preDefinedCustomChartFilterSet.has(e):this._clinicalDataFilterSet.has(e);case A.a.BAR_CHART:return this.isGeneSpecificChart(e)&&this._genomicDataIntervalFilterSet.has(e),this._clinicalDataFilterSet.has(e);case A.a.SCATTER:return e===b.j.MUTATION_COUNT_CNA_FRACTION&&(this._customBinsFromScatterPlotSelectionSet.has(b.j.MUTATION_COUNT)&&this._customBinsFromScatterPlotSelectionSet.has(b.j.FRACTION_GENOME_ALTERED));case A.a.MUTATED_GENES_TABLE:case A.a.STRUCTURAL_VARIANT_GENES_TABLE:case A.a.CNA_GENES_TABLE:return this._geneFilterSet.has(e);case A.a.GENOMIC_PROFILES_TABLE:return!i.isEmpty(this._genomicProfilesFilter);case A.a.CASE_LIST_TABLE:return!i.isEmpty(this._caseListsFilter);case A.a.SURVIVAL:return!1;case A.a.SAMPLE_TREATMENTS_TABLE:return!i.isEmpty(this._patientTreatmentsFilter.filters);case A.a.PATIENT_TREATMENTS_TABLE:return!i.isEmpty(this._sampleTreatmentsFilters.filters);default:return!1}}},{key:"removeComparisonGroupSelectionFilter",value:function(){this._chartSampleIdentifiersFilterSet.delete(b.j.SELECTED_COMPARISON_GROUPS),this._filterComparisonGroups=[]}},{key:"removeCustomSelectFilter",value:function(){this._chartSampleIdentifiersFilterSet.delete(b.j.CUSTOM_SELECT),this.numberOfSelectedSamplesInCustomSelection=0}},{key:"toggleLogScale",value:function(e){if(this.isGeneSpecificChart(e)){this.updateGenomicDataIntervalFilters(e,[]);var t=this._genomicDataBinFilterSet.get(e);t.disableLogScale=!t.disableLogScale}else if(this.isGenericAssayChart(e)){this.updateGenericAssayDataIntervalFilters(e,[]);var r=this._genericAssayDataBinFilterSet.get(e);r.disableLogScale=!r.disableLogScale}else{this.updateClinicalDataIntervalFilters(e,[]);var n=this._clinicalDataBinFilterSet.get(e);n.disableLogScale=!n.disableLogScale}}},{key:"isLogScaleToggleVisible",value:function(e,t){return this.isGeneSpecificChart(e)?void 0!==this._genomicDataBinFilterSet.get(e)&&this._genomicDataBinFilterSet.get(e).disableLogScale||Object(b.Ab)(t):this.isGenericAssayChart(e)?void 0!==this._genericAssayDataBinFilterSet.get(e)&&this._genericAssayDataBinFilterSet.get(e).disableLogScale||Object(b.Ab)(t):void 0!==this._clinicalDataBinFilterSet.get(e)&&this._clinicalDataBinFilterSet.get(e).disableLogScale||Object(b.Ab)(t)}},{key:"isLogScaleChecked",value:function(e){return this.isGeneSpecificChart(e)?void 0!==this._genomicDataBinFilterSet.get(e)&&!this._genomicDataBinFilterSet.get(e).disableLogScale:this.isGenericAssayChart(e)?void 0!==this._genericAssayDataBinFilterSet.get(e)&&!this._genericAssayDataBinFilterSet.get(e).disableLogScale:void 0!==this._clinicalDataBinFilterSet.get(e)&&!this._clinicalDataBinFilterSet.get(e).disableLogScale}},{key:"updateCustomBins",value:function(e,t){if(this.isGeneSpecificChart(e)){var r=i.clone(this._genomicDataBinFilterSet.get(e));r.customBins=t,this._genomicDataBinFilterSet.set(e,r)}else if(this.isGenericAssayChart(e)){var n=i.clone(this._genericAssayDataBinFilterSet.get(e));n.customBins=t,this._genericAssayDataBinFilterSet.set(e,n)}else{var o=i.clone(this._clinicalDataBinFilterSet.get(e));t.length>0?o.customBins=t:delete o.customBins,this._clinicalDataBinFilterSet.set(e,o)}}},{key:"getCurrentBins",value:function(e){return this.isGeneSpecificChart(e.uniqueKey)?Object(b.jb)(this.getGenomicChartDataBin(e).result):this.isGenericAssayChart(e.uniqueKey)?Object(b.jb)(this.getGenericAssayChartDataBin(e).result):Object(b.jb)(this.getClinicalDataBin(e).result)}},{key:"addCharts",value:function(e){var t=this;e.forEach(function(e){t._chartVisibility.has(e)||t.newlyAddedCharts.push(e)}),this.updateChartsVisibility(e)}},{key:"updateChartsVisibility",value:function(e){var t=!0,r=!1,n=void 0;try{for(var o,a=this._chartVisibility.keys()[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var s=o.value;i.includes(e,s)&&this._chartVisibility.get(s)||this.changeChartVisibility(s,!1)}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}var l=!0,u=!1,c=void 0;try{for(var p,d=e[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var f=p.value;void 0===this._chartVisibility.get(f)&&this.changeChartVisibility(f,!0)}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}}},{key:"getGeneFiltersByUniqueKey",value:function(e){var t=i.map(this._geneFilterSet.get(e),function(e){return i.map(e,b.D)});return Object(u.toJS)(t)}},{key:"getClinicalDataFiltersByUniqueKey",value:function(e){var t=this._clinicalDataFilterSet.get(e);return t?t.values:[]}},{key:"getCustomDataFiltersByUniqueKey",value:function(e){var t=this._customDataFilterSet.get(e);return t?t.values:[]}},{key:"getScatterPlotFiltersByUniqueKey",value:function(e){if(e===b.j.MUTATION_COUNT_CNA_FRACTION){var t=this._clinicalDataFilterSet.get(b.j.FRACTION_GENOME_ALTERED),r=this._clinicalDataFilterSet.get(b.j.MUTATION_COUNT),n={};if(t){var o=Object(b.U)(t.values);n.xStart=o.start,n.xEnd=o.end}if(r){var i=Object(b.U)(r.values);n.yStart=i.start,n.yEnd=i.end}if(t||r)return[n]}return[]}},{key:"getGenomicDataIntervalFiltersByUniqueKey",value:function(e){return this._genomicDataIntervalFilterSet.has(e)?this._genomicDataIntervalFilterSet.get(e).values:[]}},{key:"getGenericAssayDataIntervalFiltersByUniqueKey",value:function(e){return this._genericAssayDataIntervalFilterSet.has(e)?this._genericAssayDataIntervalFilterSet.get(e).values:[]}},{key:"hideChart",value:function(e){this.changeChartVisibility(e,!1)}},{key:"getClinicalDataCount",value:function(e){var t=this,r=Object(b.tb)(e.clinicalAttribute);if(!this.clinicalDataCountPromises.hasOwnProperty(r)){var n=void 0!==i.find(this.defaultVisibleAttributes.result,function(e){return Object(b.tb)(e)===r});this.clinicalDataCountPromises[r]=Object(F.vb)({await:function(){return[t.selectedSamples].concat(_e(Object(b.ob)(n,t.isInitialFilterState,t.chartsAreFiltered,t._clinicalDataFilterSet.has(r),t.unfilteredClinicalDataCount,t.newlyAddedUnfilteredClinicalDataCount,t.initialVisibleAttributesClinicalDataCountData)))},invoke:function(){return Ie(t,void 0,void 0,regeneratorRuntime.mark(function t(){var o,a,s,l,u,c=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=[],!this.isInitialFilterState||!n||this._clinicalDataFilterSet.has(r)){t.next=5;break}o=this.initialVisibleAttributesClinicalDataCountData.result,t.next=14;break;case 5:if(!this._clinicalDataFilterSet.has(r)&&!this.isInitialFilterState){t.next=13;break}if(this.hasFilteredSamples){t.next=8;break}return t.abrupt("return",[]);case 8:return t.next=10,p.a.fetchClinicalDataCountsUsingPOST({clinicalDataCountFilter:{attributes:[{attributeId:e.clinicalAttribute.clinicalAttributeId}],studyViewFilter:this.filters}});case 10:o=t.sent,t.next=14;break;case 13:o=n||this.chartsAreFiltered?this.unfilteredClinicalDataCount.result:[this.unfilteredClinicalDataCountCache[r]];case 14:return a=i.find(o,{attributeId:e.clinicalAttribute.clinicalAttributeId}),s=[],l="",void 0!==a&&(s=a.counts,l=a.attributeId,this.chartToUsedColors.has(l)||this.chartToUsedColors.set(l,new Set)),(u=Object(b.P)(s)).forEach(function(e){var t,r,n,o=c.generateColorMapKey(l,e.value);if(c.chartItemToColor.has(o))e.color=c.chartItemToColor.get(o);else if(null===(t=c.chartToUsedColors.get(l))||void 0===t?void 0:t.has(e.color)){var i={value:e.value,count:e.count},a=Object(b.Eb)(i,c.chartToUsedColors.get(l)||new Set);c.chartItemToColor.set(o,a),null===(n=c.chartToUsedColors.get(l))||void 0===n||n.add(a),e.color=a}else c.chartItemToColor.set(o,e.color),null===(r=c.chartToUsedColors.get(l))||void 0===r||r.add(e.color)}),t.abrupt("return",u);case 21:case"end":return t.stop()}},t,this)}))},onError:function(){},default:[]})}return this.clinicalDataCountPromises[r]}},{key:"getCustomDataCount",value:function(e){var t=this,r=e.uniqueKey;return r===b.j.CANCER_STUDIES?this.cancerStudiesData:(this.customDataCountPromises.hasOwnProperty(r)||(this.customDataCountPromises[r]=Object(F.vb)({await:function(){return t._customDataFilterSet.has(r)?[t.selectedSamples]:[t.selectedSamples,t.unfilteredCustomDataCount]},invoke:function(){return Ie(t,void 0,void 0,regeneratorRuntime.mark(function t(){var n,o,a,s,l,u=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=[],!this.isInitialFilterState||this._customDataFilterSet.has(r)){t.next=5;break}n=this.unfilteredCustomDataCount.result,t.next=14;break;case 5:if(!this._customDataFilterSet.has(r)&&!this.isInitialFilterState){t.next=13;break}if(this.hasFilteredSamples){t.next=8;break}return t.abrupt("return",[]);case 8:return t.next=10,p.a.fetchCustomDataCountsUsingPOST({clinicalDataCountFilter:{attributes:[{attributeId:e.uniqueKey}],studyViewFilter:this.filters}});case 10:n=t.sent,t.next=14;break;case 13:n=this.unfilteredCustomDataCount.result;case 14:return o=i.find(n,{attributeId:e.uniqueKey}),a=[],s="",void 0!==o&&(a=o.counts,s=o.attributeId,this.chartToUsedColors.has(s)||this.chartToUsedColors.set(s,new Set)),(l=Object(b.P)(a)).forEach(function(e){var t,r,n,o=u.generateColorMapKey(s,e.value);if(u.chartItemToColor.has(o))e.color=u.chartItemToColor.get(o);else if(null===(t=u.chartToUsedColors.get(s))||void 0===t?void 0:t.has(e.color)){var i={value:e.value,count:e.count},a=Object(b.Eb)(i,u.chartToUsedColors.get(s)||new Set);u.chartItemToColor.set(o,a),null===(n=u.chartToUsedColors.get(s))||void 0===n||n.add(a),e.color=a}else u.chartItemToColor.set(o,e.color),null===(r=u.chartToUsedColors.get(s))||void 0===r||r.add(e.color)}),t.abrupt("return",l);case 21:case"end":return t.stop()}},t,this)}))},onError:function(){},default:[]})),this.customDataCountPromises[r])}},{key:"generateColorMapKey",value:function(e,t){return"".concat(e,".").concat(t)}},{key:"getClinicalDataBin",value:function(e){var t=this,r=Object(b.tb)(e.clinicalAttribute);if(!this.clinicalDataBinPromises.hasOwnProperty(r)){var n=void 0!==i.find(this.defaultVisibleAttributes.result,function(e){return Object(b.tb)(e)===r});this.clinicalDataBinPromises[r]=Object(F.vb)({await:function(){return Object(b.ob)(n,t.isInitialFilterState,t.chartsAreFiltered,t._clinicalDataFilterSet.has(r),t.unfilteredClinicalDataBinCount,t.newlyAddedUnfilteredClinicalDataBinCount,t.initialVisibleAttributesClinicalDataBinCountData)},invoke:function(){return Ie(t,void 0,void 0,regeneratorRuntime.mark(function t(){var o,a,s,l,c,d;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=Ge,a=[],s=i.find(this.initialVisibleAttributesClinicalDataBinAttributes.result,function(t){return t.attributeId===Object(b.tb)(e.clinicalAttribute)}),l=i.clone(this._clinicalDataBinFilterSet.get(Object(b.tb)(e.clinicalAttribute))),this._customBinsFromScatterPlotSelectionSet.has(e.uniqueKey)&&(c=this._customBinsFromScatterPlotSelectionSet.get(e.uniqueKey)||[],l.customBins=i.sortBy([].concat(_e(l.customBins||[]),_e(c)))),d=n&&!i.isEqual(i.omit(Object(u.toJS)(l),["showNA"]),i.omit(s,["showNA"])),!this.isInitialFilterState||!n||this._clinicalDataFilterSet.has(r)||d){t.next=10;break}a=this.initialVisibleAttributesClinicalDataBinCountData.result,t.next=20;break;case 10:if(!this._clinicalDataFilterSet.has(r)&&!this.isInitialFilterState){t.next=19;break}if(this.hasSampleIdentifiersInFilter){t.next=13;break}return t.abrupt("return",[]);case 13:return t.next=15,p.a.fetchClinicalDataBinCountsUsingPOST({dataBinMethod:o,clinicalDataBinCountFilter:{attributes:[l],studyViewFilter:this.filters}});case 15:a=t.sent,a=Object(b.q)(a),t.next=20;break;case 19:a=n||this.chartsAreFiltered?this.unfilteredClinicalDataBinCount.result:this.unfilteredClinicalDataBinCountCache[r];case 20:return t.abrupt("return",i.filter(a,function(t){return t.id===e.clinicalAttribute.clinicalAttributeId})||[]);case 21:case"end":return t.stop()}},t,this)}))},onError:function(){},default:[]})}return this.clinicalDataBinPromises[r]}},{key:"getGenomicChartDataBin",value:function(e){var t=this;return this.genomicChartPromises.hasOwnProperty(e.uniqueKey)||(this.genomicChartPromises[e.uniqueKey]=Object(F.vb)({await:function(){return[t.selectedSamples]},invoke:function(){return Ie(t,void 0,void 0,regeneratorRuntime.mark(function t(){var r,n,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this._geneSpecificChartMap.get(e.uniqueKey),n=this._genomicDataBinFilterSet.get(e.uniqueKey),!r||!this.hasFilteredSamples){t.next=7;break}return t.next=5,p.a.fetchGenomicDataBinCountsUsingPOST({dataBinMethod:Ge,genomicDataBinCountFilter:{genomicDataBinFilters:[{hugoGeneSymbol:r.hugoGeneSymbol,profileType:r.profileType,customBins:n.customBins,disableLogScale:n.disableLogScale}],studyViewFilter:this.filters}});case 5:return o=t.sent,t.abrupt("return",Object(b.s)(o));case 7:return t.abrupt("return",[]);case 8:case"end":return t.stop()}},t,this)}))},default:[]})),this.genomicChartPromises[e.uniqueKey]}},{key:"getGenericAssayChartDataBin",value:function(e){var t=this;return this.genericAssayChartPromises.hasOwnProperty(e.uniqueKey)||(this.genericAssayChartPromises[e.uniqueKey]=Object(F.vb)({await:function(){return[]},invoke:function(){return Ie(t,void 0,void 0,regeneratorRuntime.mark(function t(){var r,n,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this._genericAssayChartMap.get(e.uniqueKey),n=this._genericAssayDataBinFilterSet.get(e.uniqueKey),!r){t.next=7;break}return t.next=5,p.a.fetchGenericAssayDataBinCountsUsingPOST({dataBinMethod:Ge,genericAssayDataBinCountFilter:{genericAssayDataBinFilters:[{stableId:r.genericAssayEntityId,profileType:r.profileType,customBins:n.customBins,disableLogScale:n.disableLogScale}],studyViewFilter:this.filters}});case 5:return o=t.sent,t.abrupt("return",Object(b.r)(o));case 7:return t.abrupt("return",[]);case 8:case"end":return t.stop()}},t,this)}))},default:[]})),this.genericAssayChartPromises[e.uniqueKey]}},{key:"getDefaultClinicalDataBinFilter",value:function(e){return{attributeId:e.clinicalAttributeId,disableLogScale:!1,showNA:!0}}},{key:"isChartNameValid",value:function(e){return void 0===i.find(this.chartMetaSet,function(t){return t.displayName.toUpperCase()===e.toUpperCase()})}},{key:"getDefaultCustomChartName",value:function(){return"".concat("Custom Data"," ").concat(this._customCharts.size-b.i.length+1)}},{key:"addCustomChart",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Ie(this,void 0,void 0,regeneratorRuntime.mark(function r(){var n,o,a,s,l,c,p;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.displayName?e.displayName:this.getDefaultCustomChartName(),o=e.data,r.next=4,S.a.saveCustomData({origin:Object(u.toJS)(this.studyIds),displayName:n,description:n,datatype:"STRING",patientAttribute:!1,priority:0,data:o});case 4:a=r.sent,s=a.id,l={clinicalAttributeId:s,datatype:"STRING",description:n,displayName:n,patientAttribute:!1,priority:0},c={uniqueKey:s,displayName:n,description:n,dataType:b.c.CUSTOM_DATA,patientAttribute:!1,renderWhenDataChange:!1,priority:0,clinicalAttribute:l},this.customChartSet.set(s,Object.assign(Object.assign({},c),{data:o})),this._newlyCreatedCustomChartSet.set(s,Object.assign(Object.assign({},c),{data:o})),e.patientAttribute&&(c.patientAttribute=!0),this._customCharts.set(s,c),this._customChartsSelectedCases.set(s,o),this.chartsType.set(s,A.a.PIE_CHART),this.chartsDimension.set(s,{w:1,h:1}),this.changeChartVisibility(s,!0),t||(p=i.chain(o).map(function(e){return e.value}).uniq().value(),this.setCustomChartFilters(c.uniqueKey,p),this.newlyAddedCharts.clear(),this.newlyAddedCharts.push(s));case 17:case"end":return r.stop()}},r,this)}))}},{key:"addGeneSpecificCharts",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];r||this.newlyAddedCharts.clear(),e.forEach(function(e){var n=Object(b.db)(e.hugoGeneSymbol,e.profileType);if(t._geneSpecificChartMap.has(n))t.changeChartVisibility(n,!0);else{var o=e.name?e.name:t.getDefaultCustomChartName(),i={uniqueKey:n,displayName:o,description:e.description||o,dataType:b.c.GENE_SPECIFIC,patientAttribute:!1,renderWhenDataChange:!1,priority:0};t._geneSpecificCharts.set(n,i),t._geneSpecificChartMap.set(n,e),t.changeChartVisibility(n,!0),t.chartsType.set(n,A.a.BAR_CHART),t.chartsDimension.set(n,{w:2,h:1}),t._genomicDataBinFilterSet.set(n,{clinicalDataType:"SAMPLE",disableLogScale:!1,hugoGeneSymbol:e.hugoGeneSymbol,profileType:e.profileType})}r||t.newlyAddedCharts.push(n)})}},{key:"addGenericAssayContinuousCharts",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];r||this.newlyAddedCharts.clear(),e.forEach(function(e){var n=Object(b.bb)(e.genericAssayEntityId,e.profileType);if(t._genericAssayChartMap.has(n))t.changeChartVisibility(n,!0);else{var o=e.name?e.name:t.getDefaultCustomChartName(),i={uniqueKey:n,displayName:o,description:e.description||o,dataType:b.c.GENERIC_ASSAY,patientAttribute:!1,renderWhenDataChange:!1,priority:0,genericAssayType:e.genericAssayType};t._genericAssayCharts.set(n,i),t._genericAssayChartMap.set(n,e),t.changeChartVisibility(n,!0),t.chartsType.set(n,A.a.BAR_CHART),t.chartsDimension.set(n,{w:2,h:1}),t._genericAssayDataBinFilterSet.set(n,{clinicalDataType:"SAMPLE",disableLogScale:!1,stableId:e.genericAssayEntityId,profileType:e.profileType})}r||t.newlyAddedCharts.push(n)})}},{key:"updateCustomSelect",value:function(e){this.clearAllFilters();var t=e.data.map(function(e){return{studyId:e.studyId,sampleId:e.sampleId}});this.numberOfSelectedSamplesInCustomSelection=t.length,this.updateChartSampleIdentifierFilter(b.j.CUSTOM_SELECT,t,!1)}},{key:"updateUserSettings",value:function(){S.a.updateUserSettings({origin:Object(u.toJS)(this.studyIds),chartSettings:i.values(this.currentChartSettingsMap),groupColors:Object(u.toJS)(this.userGroupColors)})}},{key:"clearPageChartSettings",value:function(){var e=this;i.forEach(i.fromPairs(this._chartVisibility.toJSON()),function(t,r){t&&!e.isChartFiltered(r)&&e._chartVisibility.delete(r)}),this.currentGridLayout=[],this.currentFocusedChartByUser=void 0,this.currentFocusedChartByUserDimension=void 0,this._filterMutatedGenesTableByCancerGenes=!0,this._filterSVGenesTableByCancerGenes=!0,this._filterCNAGenesTableByCancerGenes=!0,this._clinicalDataBinFilterSet=u.observable.map(Object(u.toJS)(this._defaultClinicalDataBinFilterSet))}},{key:"loadUserChartSettings",value:function(){this.isSavingUserPreferencePossible&&this.userSettings.isComplete&&this.userSettings.result&&!i.isEmpty(this.userSettings.result.chartSettings)&&(this.loadChartSettings(this.userSettings.result.chartSettings),this._loadUserSettingsInitially&&(this.previousSettings=i.keyBy(this.userSettings.result.chartSettings,function(e){return e.id})))}},{key:"updateCustomDataList",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.forEach(function(e){var o=e.uniqueKey;if(!t.customChartSet.has(o)){var i=e.data,a=(e.isSharedChart,De(e,["data","isSharedChart"]));t._customCharts.set(o,a),t._customChartsSelectedCases.set(o,i),t.chartsType.set(o,A.a.PIE_CHART),t.chartsDimension.set(o,{w:1,h:1}),t.customChartSet.set(o,e),n&&t.changeChartVisibility(o,!0)}r&&t.customChartSet.set(o,e)})}},{key:"undoUserChartSettings",value:function(){this.loadChartSettings(i.values(this.previousSettings)),this.previousSettings={}}},{key:"resetToDefaultChartSettings",value:function(){this.clearPageChartSettings(),this.loadChartSettings(i.values(this.defaultChartSettingsMap))}},{key:"loadChartSettings",value:function(e){var t=this;this.clearPageChartSettings();var r=Object.values(A.a).map(function(e){return e.toString()});i.map(e,function(e){if(e.name&&e.groups){var n=e.groups,o=i.flatMap(n,function(e){return e.sampleIdentifiers.map(function(t){return Object.assign(Object.assign({},t),{value:e.name})})}),a={origin:t.studyIds,displayName:e.name,description:e.name,datatype:"STRING",patientAttribute:e.patientAttribute,priority:0,data:o};t.addCustomChart(a,!0)}switch(e.hugoGeneSymbol&&e.profileType&&t.addGeneSpecificCharts([{name:e.name,description:e.description,profileType:e.profileType,hugoGeneSymbol:e.hugoGeneSymbol}],!0),e.genericAssayEntityId&&e.profileType&&t.addGenericAssayContinuousCharts([{name:e.name,description:e.description,profileType:e.profileType,genericAssayType:e.genericAssayType,genericAssayEntityId:e.genericAssayEntityId,dataType:e.dataType,patientLevel:e.patientLevelProfile}],!0),e.layout&&(t.currentGridLayout.push(Object.assign({i:e.id,isResizable:!0,moved:!1,static:!1},e.layout)),t.chartsDimension.set(e.id,{w:e.layout.w,h:e.layout.h})),e.chartType){case A.a.MUTATED_GENES_TABLE:t._filterMutatedGenesTableByCancerGenes=void 0===e.filterByCancerGenes||e.filterByCancerGenes;break;case A.a.STRUCTURAL_VARIANT_GENES_TABLE:t._filterSVGenesTableByCancerGenes=void 0===e.filterByCancerGenes||e.filterByCancerGenes;break;case A.a.CNA_GENES_TABLE:t._filterCNAGenesTableByCancerGenes=void 0===e.filterByCancerGenes||e.filterByCancerGenes;break;case A.a.BAR_CHART:var s=t._clinicalDataBinFilterSet.get(e.id);s&&(e.customBins&&(s.customBins=e.customBins),e.disableLogScale&&(s.disableLogScale=e.disableLogScale),s.showNA=e.showNA)}var l=e.chartType;l&&("FUSION_GENES_TABLE"===l.toString()&&(l=A.a.STRUCTURAL_VARIANT_GENES_TABLE),r.includes(l)&&(t.changeChartVisibility(e.id,!0),t.chartsType.set(e.id,l)))}),this.useCurrentGridLayout=!0}},{key:"updateChartStats",value:function(){if(this.initializeChartStatsByClinicalAttributes(),!i.isEmpty(this.molecularProfiles.result)){var e=i.find(this.chartMetaSet,function(e){return e.uniqueKey===b.j.GENOMIC_PROFILES_SAMPLE_COUNT});this.chartsType.set(b.j.GENOMIC_PROFILES_SAMPLE_COUNT,A.a.GENOMIC_PROFILES_TABLE),this.chartsDimension.set(b.j.GENOMIC_PROFILES_SAMPLE_COUNT,A.d.layout.dimensions[A.a.GENOMIC_PROFILES_TABLE]),e&&0!==e.priority&&this.changeChartVisibility(e.uniqueKey,!0)}if(this.displayPatientTreatments.result&&(this.changeChartVisibility(b.j.SAMPLE_TREATMENTS,!0),this.changeChartVisibility(b.j.PATIENT_TREATMENTS,!0),this.chartsType.set(b.j.PATIENT_TREATMENTS,A.a.PATIENT_TREATMENTS_TABLE),this.chartsType.set(b.j.SAMPLE_TREATMENTS,A.a.SAMPLE_TREATMENTS_TABLE)),!i.isEmpty(this.mutationProfiles.result)){var t=Object(b.ub)(this.mutationProfiles.result.map(function(e){return e.molecularProfileId})),r=i.find(this.chartMetaSet,function(e){return e.uniqueKey===t});this.chartsType.set(t,A.a.MUTATED_GENES_TABLE),this.chartsDimension.set(t,A.d.layout.dimensions[A.a.MUTATED_GENES_TABLE]),r&&0!==r.priority&&this.changeChartVisibility(r.uniqueKey,!0)}if(!i.isEmpty(this.structuralVariantProfiles.result)){var n=Object(b.ub)(this.structuralVariantProfiles.result.map(function(e){return e.molecularProfileId})),o=i.find(this.chartMetaSet,function(e){return e.uniqueKey===n});o&&0!==o.priority&&this.changeChartVisibility(o.uniqueKey,!0),this.chartsType.set(n,A.a.STRUCTURAL_VARIANT_GENES_TABLE),this.chartsDimension.set(n,A.d.layout.dimensions[A.a.STRUCTURAL_VARIANT_GENES_TABLE])}if(!i.isEmpty(this.cnaProfiles.result)){var a=Object(b.ub)(this.cnaProfiles.result.map(function(e){return e.molecularProfileId})),s=i.find(this.chartMetaSet,function(e){return e.uniqueKey===a});this.chartsType.set(a,A.a.CNA_GENES_TABLE),this.chartsDimension.set(a,A.d.layout.dimensions[A.a.CNA_GENES_TABLE]),s&&0!==s.priority&&this.changeChartVisibility(s.uniqueKey,!0)}i.isEmpty(this.initialFilters.caseLists)||this.changeChartVisibility(b.j.CASE_LISTS_SAMPLE_COUNT,!0),this.initializeClinicalDataCountCharts(),this.initializeClinicalDataBinCountCharts(),this.initializeGeneSpecificCharts(),this.initializeGenericAssayCharts(),this._defaultChartsDimension=u.observable.map(i.fromPairs(this.chartsDimension.toJSON())),this._defaultChartsType=u.observable.map(i.fromPairs(this.chartsType.toJSON())),this._defaultVisibleChartIds=this.visibleAttributes.map(function(e){return e.uniqueKey}),this._defaultClinicalDataBinFilterSet=u.observable.map(i.fromPairs(this._clinicalDataBinFilterSet.toJSON()))}},{key:"initializeChartStatsByClinicalAttributes",value:function(){var e=this,t=!1,r=!1;this.clinicalAttributes.result.forEach(function(n){var o=Object(b.tb)(n);"0"!==n.priority&&(b.j.MUTATION_COUNT===n.clinicalAttributeId?t=!0:b.j.FRACTION_GENOME_ALTERED===n.clinicalAttributeId&&(r=!0)),n.datatype===b.e.NUMBER?(e.chartsType.set(o,A.a.BAR_CHART),e.chartsDimension.set(o,A.d.layout.dimensions[A.a.BAR_CHART])):(e.chartsType.set(o,A.a.PIE_CHART),e.chartsDimension.set(o,A.d.layout.dimensions[A.a.PIE_CHART]))}),this.survivalPlotKeys.forEach(function(t){e.chartsType.set(t,A.a.SURVIVAL),e.chartsDimension.set(t,A.d.layout.dimensions[A.a.SURVIVAL]),t in e.chartMetaSet&&0!==e.chartMetaSet[t].priority&&e.changeChartVisibility(t,!0)}),this.chartsType.set(b.j.MUTATION_COUNT_CNA_FRACTION,A.a.SCATTER),this.chartsDimension.set(b.j.MUTATION_COUNT_CNA_FRACTION,A.d.layout.dimensions[A.a.SCATTER]),this.chartsDimension.set(b.j.SAMPLE_TREATMENTS,A.d.layout.dimensions[A.a.SAMPLE_TREATMENTS_TABLE]),this.chartsDimension.set(b.j.PATIENT_TREATMENTS,A.d.layout.dimensions[A.a.SAMPLE_TREATMENTS_TABLE]),t&&r&&0!==Object(b.T)(b.j.MUTATION_COUNT_CNA_FRACTION)&&this.changeChartVisibility(b.j.MUTATION_COUNT_CNA_FRACTION,!0),this.queriedPhysicalStudyIds.result.length>1&&this.showAsPieChart(b.j.CANCER_STUDIES,this.queriedPhysicalStudyIds.result.length)}},{key:"getTableDimensionByNumberOfRecords",value:function(e){return e<=A.d.thresholds.rowsInTableForOneGrid?{w:2,h:1,minW:2}:{w:2,h:2,minW:2}}},{key:"changeChartType",value:function(e,t){var r;t===A.a.TABLE?(void 0!==(r=e.uniqueKey===b.j.CANCER_STUDIES?this.cancerStudiesData:this.isUserDefinedCustomDataChart(e.uniqueKey)?this.getCustomDataCount(e):this.getClinicalDataCount(e))&&this.chartsDimension.set(e.uniqueKey,this.getTableDimensionByNumberOfRecords(r.result.length)),this.chartsType.set(e.uniqueKey,A.a.TABLE)):(this.chartsDimension.set(e.uniqueKey,A.d.layout.dimensions[t]),this.chartsType.set(e.uniqueKey,t)),this.currentFocusedChartByUser=i.clone(e),this.currentFocusedChartByUserDimension=this.chartsDimension.get(e.uniqueKey),this.useCurrentGridLayout=!0}},{key:"initializeClinicalDataCountCharts",value:function(){var e=this;i.each(this.initialVisibleAttributesClinicalDataCountData.result,function(t){e.showAsPieChart(t.attributeId,t.counts.length)})}},{key:"initializeGeneSpecificCharts",value:function(){var e=this;if(!i.isEmpty(this.initialFilters.genomicDataFilters)){var t=i.keyBy(this.molecularProfileSampleCounts.result,function(e){return e.uniqueKey});i.each(this.initialFilters.genomicDataFilters,function(r){if(void 0!==t[r.profileType]){var n=t[r.profileType];e.addGeneSpecificCharts([{name:"".concat(r.hugoGeneSymbol,": ").concat(n.label),description:n.label,profileType:r.profileType,hugoGeneSymbol:r.hugoGeneSymbol}],!0)}})}}},{key:"initializeGenericAssayCharts",value:function(){var e=this;i.isEmpty(this.initialFilters.genericAssayDataFilters)||i.map(this.genericAssayProfileOptionsByType.result,function(t,r){var n=i.keyBy(t,function(e){return e.value});i.each(e.initialFilters.genericAssayDataFilters,function(t){if(void 0!==n[t.profileType]){var o=n[t.profileType];o.dataType===B.b.LIMITVALUE&&e.addGenericAssayContinuousCharts([{name:"".concat(t.stableId,": ").concat(o.label),description:o.description,profileType:t.profileType,genericAssayType:r,genericAssayEntityId:t.stableId,dataType:o.dataType,patientLevel:o.patientLevel}],!0)}})})}},{key:"initializeClinicalDataBinCountCharts",value:function(){var e=this;i.each(i.groupBy(this.initialVisibleAttributesClinicalDataBinCountData.result,function(e){return e.id}),function(t,r){Object(b.Fb)(e.initialFilters,t.length,e.samples.result.length)&&e.changeChartVisibility(r,!0),e.chartsType.set(r,A.a.BAR_CHART),e.chartsDimension.set(r,A.d.layout.dimensions[A.a.BAR_CHART])})}},{key:"getPieChartDataDownload",value:function(e,t){return Ie(this,void 0,void 0,regeneratorRuntime.mark(function r(){var n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(n=this.isUserDefinedCustomDataChart(e.uniqueKey),!t||"summary"!==t){r.next=9;break}if(!n){r.next=6;break}return r.abrupt("return",this.getClinicalDataCountSummary(e,this.getCustomDataCount(e).result));case 6:return r.abrupt("return",this.getClinicalDataCountSummary(e,this.getClinicalDataCount(e).result));case 7:r.next=14;break;case 9:if(!n){r.next=13;break}return r.abrupt("return",this.getCustomChartDownloadData(e));case 13:return r.abrupt("return",this.getChartDownloadableData(e));case 14:case"end":return r.stop()}},r,this)}))}},{key:"getClinicalDataCountSummary",value:function(e,t){var r=e.patientAttribute?"patients":"samples",n=[["Category","Number of ".concat(r),"Percentage of ".concat(r)].join("\t")];return(n=n.concat(t.map(function(e){return[e.value,e.count,e.freq].join("\t")}))).join("\n")}},{key:"getChartDownloadableData",value:function(e){return Ie(this,void 0,void 0,regeneratorRuntime.mark(function t(){var r,n,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=[],!this.isGeneSpecificChart(e.uniqueKey)){t.next=7;break}return t.next=4,Object(b.eb)(this._geneSpecificChartMap.get(e.uniqueKey),this.molecularProfileMapByType,this.selectedSamples.result);case 4:r=t.sent,t.next=17;break;case 7:if(!this.isGenericAssayChart(e.uniqueKey)){t.next=13;break}return t.next=10,Object(b.cb)(this._genericAssayChartMap.get(e.uniqueKey),this.molecularProfileMapByType,this.selectedSamples.result);case 10:r=t.sent,t.next=17;break;case 13:if(!e.clinicalAttribute||!this.samples.result){t.next=17;break}return t.next=16,d.a.fetchClinicalDataUsingPOST({clinicalDataType:e.clinicalAttribute.patientAttribute?b.d.PATIENT:b.d.SAMPLE,clinicalDataMultiStudyFilter:{attributeIds:[e.clinicalAttribute.clinicalAttributeId],identifiers:this.selectedSamples.result.map(function(t){return{entityId:e.clinicalAttribute.patientAttribute?t.patientId:t.sampleId,studyId:t.studyId}})}});case 16:r=t.sent;case 17:return n=["Study ID","Patient ID"],e.patientAttribute||n.push("Sample ID"),n.push(e.displayName),o=(o=[n.join("\t")]).concat(r.map(function(t){var r=[t.studyId||ie.a.NA,t.patientId||ie.a.NA];return e.patientAttribute||r.push(t.sampleId||ie.a.NA),r.push(t.value||ie.a.NA),r.join("\t")})),t.abrupt("return",o.join("\n"));case 23:case"end":return t.stop()}},t,this)}))}},{key:"getCustomChartDownloadData",value:function(e){var t=this;return new Promise(function(r){if(e&&e.uniqueKey&&t._customChartsSelectedCases.has(e.uniqueKey)){var n=!0,o=["Study ID","Patient ID"];e.patientAttribute||(n=!1,o.push("Sample ID")),o.push(e.displayName);var a=[o.join("\t")];r((a=n?a.concat(t.selectedPatients.map(function(r){var n=i.find(t._customChartsSelectedCases.get(e.uniqueKey),function(e){return e.studyId===r.studyId&&r.patientId===e.patientId});return[r.studyId||ie.a.NA,r.patientId||ie.a.NA,void 0===n?"NA":n.value].join("\t")})):a.concat(t.selectedSamples.result.map(function(r){var n=i.find(t._customChartsSelectedCases.get(e.uniqueKey),function(e){return e.studyId===r.studyId&&r.sampleId===e.sampleId});return[r.studyId||ie.a.NA,r.patientId||ie.a.NA,r.sampleId||ie.a.NA,void 0===n?"NA":n.value].join("\t")}))).join("\n"))}else r("")})}},{key:"getScatterDownloadData",value:function(){var e=this;return new Promise(function(t){Object(k.a)(e.mutationCountVsFGAData,function(r){t(r?Object(b.G)(r,e.sampleToAnalysisGroup.result,void 0,e.analysisGroupsSettings.groups):"")})})}},{key:"getSurvivalDownloadData",value:function(e){var t=this,r=i.find(this.survivalPlots.result,function(t){return t.id===e.uniqueKey});if(r&&this.survivalData.result){var n=[],o=r.associatedAttrs;n.push(["Study ID","Patient ID"].concat(_e(o)).join("\t"));var a=i.reduce(this.selectedPatients,function(e,t){return e[t.uniquePatientKey]=t,e},{});return this.selectedPatientKeys.result.forEach(function(e){var r=t.survivalData.result[e],s=[];if(r&&r.length>0){s.push(r[0].studyId||ie.a.NA),s.push(r[0].patientId||ie.a.NA);var l=i.keyBy(r,"clinicalAttributeId");i.each(o,function(e){s.push(l[e]&&l[e].value||ie.a.NA)})}else{var u=a[e];u&&(s.push(u.studyId||ie.a.NA),s.push(u.patientId||ie.a.NA),i.each(o,function(){s.push(ie.a.NA)}))}n.push(s.join("\t"))}),n.join("\n")}return""}},{key:"getMutatedGenesDownloadData",value:function(){return Ie(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,r,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.mutatedGeneTableRowData.result){e.next=8;break}return t=["Gene","MutSig(Q-value)","# Mut","#","Profiled Samples","Freq"],this.oncokbCancerGeneFilterEnabled&&t.push("Is Cancer Gene (source: OncoKB)"),r=[t.join("\t")],i.each(this.mutatedGeneTableRowData.result,function(e){var t=[e.label,void 0===e.qValue?"":Object(b.nb)(e.qValue),e.totalCount,e.numberOfAlteredCases,e.numberOfProfiledCases,Object(b.ab)(e.numberOfAlteredCases/e.numberOfProfiledCases*100)];n.oncokbCancerGeneFilterEnabled&&t.push(n.oncokbCancerGeneFilterEnabled?e.isCancerGene?"Yes":"No":"NA"),r.push(t.join("\t"))}),e.abrupt("return",r.join("\n"));case 8:return e.abrupt("return","");case 9:case"end":return e.stop()}},e,this)}))}},{key:"getStructuralVariantGenesDownloadData",value:function(){var e=this;if(this.structuralVariantGeneTableRowData.result){var t=["Gene","# Structural Variant","#","Profiled Samples","Freq"];this.oncokbCancerGeneFilterEnabled&&t.push("Is Cancer Gene (source: OncoKB)");var r=[t.join("\t")];return i.each(this.structuralVariantGeneTableRowData.result,function(t){var n=[t.label,t.totalCount,t.numberOfAlteredCases,t.numberOfProfiledCases,Object(b.ab)(t.numberOfAlteredCases/t.numberOfProfiledCases*100)];e.oncokbCancerGeneFilterEnabled&&n.push(e.oncokbCancerGeneFilterEnabled?t.isCancerGene?"Yes":"No":"NA"),r.push(n.join("\t"))}),r.join("\n")}return""}},{key:"getGenesCNADownloadData",value:function(){return Ie(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,r,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.cnaGeneTableRowData.result){e.next=8;break}return t=["Gene","Gistic(Q-value)","Cytoband","CNA","Profiled Samples","#","Freq"],this.oncokbCancerGeneFilterEnabled&&t.push("Is Cancer Gene (source: OncoKB)"),r=[t.join("\t")],i.each(this.cnaGeneTableRowData.result,function(e){var t=[e.label,void 0===e.qValue?"":Object(b.nb)(e.qValue),e.cytoband,Object(b.I)(e.alteration),e.numberOfAlteredCases,e.numberOfProfiledCases,Object(b.ab)(e.numberOfAlteredCases/e.numberOfProfiledCases*100)];n.oncokbCancerGeneFilterEnabled&&t.push(n.oncokbCancerGeneFilterEnabled?e.isCancerGene?"Yes":"No":"NA"),r.push(t.join("\t"))}),e.abrupt("return",r.join("\n"));case 8:return e.abrupt("return","");case 9:case"end":return e.stop()}},e,this)}))}},{key:"getDownloadDataPromise",value:function(){return Ie(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.O)(this.selectedSamples.result);case 2:return t=e.sent,r=i.reduce(this.clinicalAttributes.result,function(e,t){return e[Object(b.tb)(t)]=t.displayName,e},{studyId:"Study ID",patientId:"Patient ID",sampleId:"Sample ID"}),n=i.reduce(this.selectedSamples.result,function(e,n){var o=Object.assign({studyId:n.studyId,patientId:n.patientId,sampleId:n.sampleId},t[n.uniqueSampleKey]||{});return e.push(i.map(Object.keys(r),function(e){return o[e]||ie.a.NA})),e},[i.values(r)]),e.abrupt("return",n.map(function(e){return e.join("\t")}).join("\n"));case 6:case"end":return e.stop()}},e,this)}))}},{key:"onSubmitQuery",value:function(){var e=Object(F.Bb)(this.unknownQueriedIds.result),t={cancer_study_list:this.studyIds.filter(function(t){return!e[t]}).join(","),tab_index:"tab_visualize"},r=[];0===this.filteredVirtualStudies.result.length&&1===this.studyIds.length?(this.alterationTypesInOQL.haveMutInQuery&&this.defaultMutationProfile&&r.push(Object(ce.a)(this.defaultMutationProfile)),this.alterationTypesInOQL.haveStructuralVariantInQuery&&this.defaultStructuralVariantProfile&&r.push(Object(ce.a)(this.defaultStructuralVariantProfile)),this.alterationTypesInOQL.haveCnaInQuery&&this.defaultCnaProfile&&r.push(Object(ce.a)(this.defaultCnaProfile)),this.alterationTypesInOQL.haveMrnaInQuery&&this.defaultMrnaProfile&&r.push(Object(ce.a)(this.defaultMrnaProfile)),this.alterationTypesInOQL.haveProtInQuery&&this.defaultProtProfile&&r.push(Object(ce.a)(this.defaultProtProfile))):r=i.chain([].concat(_e(this.mutationProfiles.result),_e(this.cnaProfiles.result),_e(this.structuralVariantProfiles.result))).map(function(e){return Object(ce.a)(e)}).uniq().value(),r.length>0&&(t.profileFilter=r.join(",")),this.chartsAreFiltered?(t.case_set_id="-1",t.case_ids=i.map(this.selectedSamples.result,function(e){return e.studyId+":"+e.sampleId}).join("+")):0===this.filteredVirtualStudies.result.length&&1===this.studyIds.length?t.case_set_id=this.studyIds[0]+"_all":t.case_set_id="all";var n="/";i.isEmpty(this.geneQueries)||(t.Action="Submit",t.gene_list=this.geneQueries.map(function(e){return Object(v.j)(e)}).join("\n"),n="/results"),Object(b.Ib)(n,t,"_blank")}},{key:"showAsPieChart",value:function(e,t){Object(b.Fb)(this.initialFilters,t,this.samples.result.length)&&(this.changeChartVisibility(e,!0),t>A.d.thresholds.pieToTable||i.includes(A.d.tableAttrs,e)?(this.chartsType.set(e,A.a.TABLE),this.chartsDimension.set(e,this.getTableDimensionByNumberOfRecords(t))):(this.chartsType.set(e,A.a.PIE_CHART),this.chartsDimension.set(e,A.d.layout.dimensions[A.a.PIE_CHART])))}},{key:"getChartTitle",value:function(e,t){var r=0;if(void 0!==this.molecularProfileSampleCountSet.result){switch(e){case A.a.MUTATED_GENES_TABLE:r=this.molecularProfileSampleCountSet.result[h.b.MUTATION_EXTENDED]?this.molecularProfileSampleCountSet.result[h.b.MUTATION_EXTENDED]:0;break;case A.a.STRUCTURAL_VARIANT_GENES_TABLE:r=Object(b.rb)(this.molecularProfileSampleCountSet.result);break;case A.a.CNA_GENES_TABLE:r=Object(b.K)(this.molecularProfileSampleCountSet.result)}if(r>0)return"".concat(t," (").concat(r," profiled ").concat(Object(F.ub)("sample",r),")")}return t}},{key:"clearPatientTreatmentFilters",value:function(){this._patientTreatmentsFilter={filters:[]}}},{key:"setPatientTreatmentFilters",value:function(e){this._patientTreatmentsFilter=e}},{key:"addPatientTreatmentFilters",value:function(e){this._patientTreatmentsFilter.filters=this._patientTreatmentsFilter.filters.concat(e)}},{key:"clearSampleTreatmentFilters",value:function(){this._sampleTreatmentsFilters={filters:[]}}},{key:"setSampleTreatmentFilters",value:function(e){this._sampleTreatmentsFilters=e}},{key:"addSampleTreatmentFilters",value:function(e){this._sampleTreatmentsFilters.filters=this._sampleTreatmentsFilters.filters.concat(e)}},{key:"setTreatmentFilters",value:function(e){e.patientTreatmentFilters&&i.isArray(e.patientTreatmentFilters.filters)&&this.setPatientTreatmentFilters(e.patientTreatmentFilters),e.sampleTreatmentFilters&&i.isArray(e.sampleTreatmentFilters.filters)&&this.setSampleTreatmentFilters(e.sampleTreatmentFilters)}},{key:"onSampleTreatmentSelection",value:function(e,t){var r=t.map(function(e){return{filters:e.map(function(e){return{treatment:(t=e.split("::"))[0],time:t[1]};var t})}});this.addSampleTreatmentFilters(r)}},{key:"onPatientTreatmentSelection",value:function(e,t){var r=t.map(function(e){return{filters:e.map(function(e){return{treatment:e.split("::")[0]}})}});this.addPatientTreatmentFilters(r)}},{key:"removeSampleTreatmentsFilter",value:function(e,t){var r=this.sampleTreatmentFilters.filters.map(function(r,n){return{filters:r.filters.filter(function(r,o){return!(e===n&&t===o)})}}).filter(function(e){return e.filters.length>0});this.setSampleTreatmentFilters({filters:r})}},{key:"removePatientTreatmentsFilter",value:function(e,t){var r=this.patientTreatmentFilters.filters.map(function(r,n){return{filters:r.filters.filter(function(r,o){return!(e===n&&t===o)})}}).filter(function(e){return e.filters.length>0});this.setPatientTreatmentFilters({filters:r})}},{key:"isLoggedIn",get:function(){return this.appStore.isLoggedIn}},{key:"isSavingUserPreferencePossible",get:function(){return this.isLoggedIn&&this.sessionServiceIsEnabled}},{key:"comparisonConfirmationModal",get:function(){return this._comparisonConfirmationModal}},{key:"customChartGroupMarkedForDeletion",get:function(){var e=[];return this._customChartsMarkedForDeletion.forEach(function(t,r){t&&e.push(r)}),e}},{key:"genomicProfilesFilter",get:function(){return this._genomicProfilesFilter}},{key:"caseListsFilter",get:function(){return this._caseListsFilter}},{key:"currentTab",get:function(){return this.urlWrapper.tabId}},{key:"initialFilters",get:function(){var e={};i.isEmpty(this.queriedSampleIdentifiers.result)?e.studyIds=this.queriedPhysicalStudyIds.result:e.sampleIdentifiers=this.queriedSampleIdentifiers.result;var t=Object.assign({},Object(u.toJS)(this.initialFiltersQuery),e);return i.isEmpty(t.sampleIdentifiers)||delete t.studyIds,t}},{key:"isInitialFilterState",get:function(){return i.isEqual(Object(u.toJS)(this.initialFilters),Object(u.toJS)(this.filters))}},{key:"containerWidth",get:function(){return this.columns*A.d.layout.grid.w+(this.columns+1)*A.d.layout.gridMargin.x}},{key:"columns",get:function(){return Math.floor((C.a.size.width-40)/(A.d.layout.grid.w+A.d.layout.gridMargin.x))}},{key:"studyViewPageLayoutProps",get:function(){return{cols:this.columns,grid:A.d.layout.grid,gridMargin:A.d.layout.gridMargin,layout:this.currentGridLayout,dimensions:A.d.layout.dimensions}}},{key:"filterMutatedGenesTableByCancerGenes",get:function(){return this.oncokbCancerGeneFilterEnabled&&this._filterMutatedGenesTableByCancerGenes}},{key:"filterSVGenesTableByCancerGenes",get:function(){return this.oncokbCancerGeneFilterEnabled&&this._filterSVGenesTableByCancerGenes}},{key:"filterCNAGenesTableByCancerGenes",get:function(){return this.oncokbCancerGeneFilterEnabled&&this._filterCNAGenesTableByCancerGenes}},{key:"filterComparisonGroups",get:function(){return this._filterComparisonGroups}},{key:"selectedGenes",get:function(){return this.geneQueries.map(function(e){return e.gene})}},{key:"alterationTypesInOQL",get:function(){return Object(h.X)(this.geneQueries)}},{key:"defaultProfilesForOql",get:function(){if(this.molecularProfiles.isComplete)return Object(h.Z)(this.molecularProfiles.result)}},{key:"defaultMutationProfile",get:function(){return this.defaultProfilesForOql&&this.defaultProfilesForOql[B.a.MUTATION_EXTENDED]}},{key:"defaultStructuralVariantProfile",get:function(){return this.defaultProfilesForOql&&this.defaultProfilesForOql[B.a.STRUCTURAL_VARIANT]}},{key:"defaultCnaProfile",get:function(){return this.defaultProfilesForOql&&this.defaultProfilesForOql[B.a.COPY_NUMBER_ALTERATION]}},{key:"defaultMrnaProfile",get:function(){return this.defaultProfilesForOql&&this.defaultProfilesForOql[B.a.MRNA_EXPRESSION]}},{key:"defaultProtProfile",get:function(){return this.defaultProfilesForOql&&this.defaultProfilesForOql[B.a.PROTEIN_LEVEL]}},{key:"analysisGroupsSettings",get:function(){return{groups:[{value:Ne,color:A.d.colors.theme.unselectedGroup,name:this.chartsAreFiltered?"Selected patients":"All patients"}]}}},{key:"clinicalDataFilters",get:function(){return Array.from(this._clinicalDataFilterSet.values())}},{key:"customDataFilters",get:function(){return Array.from(this._customDataFilterSet.values())}},{key:"geneFilters",get:function(){return i.map(this._geneFilterSet.toJSON(),function(e){var t=Te(e,2),r=t[0],n=t[1];return{molecularProfileIds:Object(b.ib)(r),geneQueries:n}})}},{key:"genomicDataIntervalFilters",get:function(){return Array.from(this._genomicDataIntervalFilterSet.values())}},{key:"genericAssayDataIntervalFilters",get:function(){return Array.from(this._genericAssayDataIntervalFilterSet.values())}},{key:"filters",get:function(){var e,t={},r=this.clinicalDataFilters,n=this.genomicDataIntervalFilters;n.length>0&&(t.genomicDataFilters=n);var o=this.genericAssayDataIntervalFilters;o.length>0&&(t.genericAssayDataFilters=o),r.length>0&&(t.clinicalDataFilters=r),this.customDataFilters.length>0&&(t.customDataFilters=this.customDataFilters),this.geneFilters.length>0&&(t.geneFilters=this.geneFilters),this.genomicProfilesFilter.length>0&&(t.genomicProfiles=Object(u.toJS)(this.genomicProfilesFilter)),this.caseListsFilter.length>0&&(t.caseLists=Object(u.toJS)(this.caseListsFilter)),this.sampleTreatmentFilters&&this.sampleTreatmentFilters.filters.length>0&&(t.sampleTreatmentFilters=this.sampleTreatmentFilters),this.patientTreatmentFilters&&this.patientTreatmentFilters.filters.length>0&&(t.patientTreatmentFilters=this.patientTreatmentFilters);var a=Array.from(this._chartSampleIdentifiersFilterSet.values()),s=i.intersectionWith.apply(i,_e(a).concat([function(e,t){return e.sampleId===t.sampleId&&e.studyId===t.studyId}]));return i.isEmpty(a)?i.isEmpty(this.queriedSampleIdentifiers.result)?t.studyIds=this.queriedPhysicalStudyIds.result:t.sampleIdentifiers=this.queriedSampleIdentifiers.result:t.sampleIdentifiers=s,t.alterationFilter={copyNumberAlterationEventTypes:(e={},Ee(e,we.a.AMP,!0),Ee(e,we.a.HOMDEL,!0),e),mutationEventTypes:Ee({},we.b.any,!0),structuralVariants:null,includeDriver:this.driverAnnotationSettings.includeDriver,includeVUS:this.driverAnnotationSettings.includeVUS,includeUnknownOncogenicity:this.driverAnnotationSettings.includeUnknownOncogenicity,includeUnknownTier:this.driverAnnotationSettings.includeUnknownTier,includeGermline:this.includeGermlineMutations,includeSomatic:this.includeSomaticMutations,includeUnknownStatus:this.includeUnknownStatusMutations,tiersBooleanMap:this.selectedDriverTiersMap.isComplete?this.selectedDriverTiersMap.result:{}},t}},{key:"userSelections",get:function(){return Object.assign(Object.assign({},this.filters),{sampleIdentifiersSet:i.fromPairs(this._chartSampleIdentifiersFilterSet.toJSON())})}},{key:"unfilteredAttrsForNonNumerical",get:function(){var e=this;return this.visibleAttributes.filter(function(t){if(!e.isUserDefinedCustomDataChart(t.uniqueKey)&&void 0!==t.clinicalAttribute&&t.clinicalAttribute.datatype!==b.e.NUMBER){var r=Object(b.tb)(t.clinicalAttribute);return!e._clinicalDataFilterSet.has(r)}return!1}).map(function(e){return{attributeId:e.clinicalAttribute.clinicalAttributeId}})}},{key:"unfilteredCustomAttrsForNonNumerical",get:function(){var e=this;return this.visibleAttributes.filter(function(t){return!(!e.isUserDefinedCustomDataChart(t.uniqueKey)||void 0===t.clinicalAttribute||t.clinicalAttribute.datatype===b.e.NUMBER)&&!e._customDataFilterSet.has(t.uniqueKey)}).map(function(e){return{attributeId:e.clinicalAttribute.clinicalAttributeId}})}},{key:"newlyAddedUnfilteredAttrsForNonNumerical",get:function(){var e=this;return this.clinicalAttributes.result.filter(function(t){if(t.datatype!==b.e.NUMBER){var r=Object(b.tb)(t);return!!e.newlyAddedCharts.includes(r)}return!1}).map(function(e){return{attributeId:e.clinicalAttributeId}})}},{key:"newlyAddedUnfilteredAttrsForNumerical",get:function(){var e=this;return this.clinicalAttributes.result.filter(function(t){if(t.datatype===b.e.NUMBER){var r=Object(b.tb)(t);return!!e.newlyAddedCharts.includes(r)}return!1}).map(function(t){return e._clinicalDataBinFilterSet.get(Object(b.tb)(t))})}},{key:"unfilteredAttrsForNumerical",get:function(){var e=this;return this.visibleAttributes.filter(function(t){if(void 0!==t.clinicalAttribute&&t.clinicalAttribute.datatype===b.e.NUMBER){var r=Object(b.tb)(t.clinicalAttribute);return!e._clinicalDataFilterSet.has(r)}return!1}).map(function(t){return e._clinicalDataBinFilterSet.get(Object(b.tb)(t.clinicalAttribute))})}},{key:"isSingleNonVirtualStudyQueried",get:function(){return this.filteredPhysicalStudies.isComplete&&this.filteredVirtualStudies.isComplete&&1===this.filteredPhysicalStudies.result.length&&0===this.filteredVirtualStudies.result.length}},{key:"showOriginStudiesInSummaryDescription",get:function(){return Object(b.Gb)(this.filteredPhysicalStudies.result,this.filteredVirtualStudies.result)}},{key:"hasCnaProfileData",get:function(){return this.cnaProfiles.isComplete&&!i.isEmpty(this.cnaProfiles.result)}},{key:"oncokbCancerGeneFilterEnabled",get:function(){return!!c.b.serverConfig.show_oncokb&&(!this.oncokbCancerGenes.isError&&!this.oncokbGenes.isError)}},{key:"isSingleVirtualStudyPageWithoutFilter",get:function(){return this.filteredPhysicalStudies.result.length+this.filteredVirtualStudies.result.length===1&&this.filteredVirtualStudies.result.length>0&&!this.chartsAreFiltered}},{key:"analysisGroupsPossible",get:function(){var e=this.survivalPlotKeys,t=!1,r=!0,n=!1,o=void 0;try{for(var i,a=this.visibleAttributes[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var s=i.value;if(e.includes(s.uniqueKey)){t=!0;break}}}catch(e){n=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw o}}return t}},{key:"survivalPlotKeys",get:function(){return this.survivalClinicalAttributesPrefix.result?this.survivalClinicalAttributesPrefix.result.map(function(e){return"".concat(e,"_SURVIVAL")}):[]}},{key:"chartMetaSet",get:function(){var e,t=i.fromPairs(this._customCharts.toJSON());i.isEmpty(this.molecularProfiles.result)&&delete t[b.j.GENOMIC_PROFILES_SAMPLE_COUNT],t=i.merge(t,i.fromPairs(this._geneSpecificCharts.toJSON()),i.fromPairs(this._genericAssayCharts.toJSON()));var r=Object(U.e)(this.survivalClinicalAttributesPrefix.result);r=i.omit(r,["OS_STATUS"]);var n=i.filter(this.clinicalAttributes.result,function(e){return!(e.clinicalAttributeId in r)});if(i.reduce(n,function(e,t){var r=Object(b.tb)(t);return e[r]={displayName:t.displayName,uniqueKey:r,dataType:Object(b.L)(r),patientAttribute:t.patientAttribute,description:t.description,priority:Object(b.mb)(t),renderWhenDataChange:!1,clinicalAttribute:t},e},t),i.reduce(this.survivalPlots.result,function(e,t){return e[t.id]={uniqueKey:t.id,dataType:Object(b.L)(t.id),patientAttribute:!0,displayName:t.title,priority:A.d.priority[t.id]||Object(b.mb)(t.survivalStatusAttribute),renderWhenDataChange:!1,description:""},e},t),this.displaySampleTreatments.result&&(t.SAMPLE_TREATMENTS={uniqueKey:"SAMPLE_TREATMENTS",dataType:b.c.CLINICAL,patientAttribute:!0,displayName:"Sample Treatments",priority:Object(b.T)(A.a.SAMPLE_TREATMENTS_TABLE),renderWhenDataChange:!0,description:"List of treatments and the corresponding number of samples acquired before treatment or after/on treatment"}),this.displayPatientTreatments.result&&(t.PATIENT_TREATMENTS={uniqueKey:"PATIENT_TREATMENTS",dataType:b.c.CLINICAL,patientAttribute:!0,displayName:"Patient Treatments",priority:Object(b.T)(A.a.PATIENT_TREATMENTS_TABLE),renderWhenDataChange:!0,description:"List of treatments and the corresponding number of patients treated"}),!i.isEmpty(this.mutationProfiles.result)){var o=Object(b.ub)(this.mutationProfiles.result.map(function(e){return e.molecularProfileId}));t[o]={uniqueKey:o,dataType:b.c.GENOMIC,patientAttribute:!1,displayName:"Mutated Genes",priority:Object(b.T)(A.a.MUTATED_GENES_TABLE),renderWhenDataChange:!1,description:""}}if(!i.isEmpty(this.structuralVariantProfiles.result)){var a=Object(b.ub)(this.structuralVariantProfiles.result.map(function(e){return e.molecularProfileId}));t[a]={uniqueKey:a,dataType:b.c.GENOMIC,patientAttribute:!1,displayName:"Structural Variant Genes",priority:Object(b.T)(A.a.STRUCTURAL_VARIANT_GENES_TABLE),renderWhenDataChange:!0,description:""}}if(!i.isEmpty(this.cnaProfiles.result)){var s=Object(b.ub)(this.cnaProfiles.result.map(function(e){return e.molecularProfileId}));t[s]={uniqueKey:s,dataType:b.c.GENOMIC,patientAttribute:!1,displayName:"CNA Genes",renderWhenDataChange:!1,priority:Object(b.T)(A.a.CNA_GENES_TABLE),description:""}}var l=i.reduce(this.clinicalAttributes.result,function(e,t){return b.j.MUTATION_COUNT===t.clinicalAttributeId&&(e[b.j.MUTATION_COUNT]=!0),b.j.FRACTION_GENOME_ALTERED===t.clinicalAttributeId&&(e[b.j.FRACTION_GENOME_ALTERED]=!0),e},(Ee(e={},b.j.MUTATION_COUNT,!1),Ee(e,b.j.FRACTION_GENOME_ALTERED,!1),e));return l[b.j.MUTATION_COUNT]&&l[b.j.FRACTION_GENOME_ALTERED]&&(t[b.j.MUTATION_COUNT_CNA_FRACTION]={dataType:b.c.GENOMIC,patientAttribute:!1,uniqueKey:b.j.MUTATION_COUNT_CNA_FRACTION,displayName:"Mutation Count vs Fraction of Genome Altered",priority:Object(b.T)(b.j.MUTATION_COUNT_CNA_FRACTION),renderWhenDataChange:!1,description:""}),t}},{key:"chartMetaSetWithChartType",get:function(){var e=this;return i.reduce(this.chartMetaSet,function(t,r){return t[r.uniqueKey]=Object.assign(Object.assign({},r),{chartType:e.chartsType.get(r.uniqueKey)}),t},{})}},{key:"visibleAttributes",get:function(){var e=this;return i.reduce(Array.from(this._chartVisibility.entries()),function(t,r){var n=Te(r,2),o=n[0];if(n[1]&&e.chartMetaSet[o]){var i=e.chartMetaSet[o];t.push(i)}return t},[])}},{key:"showSettingRestoreMsg",get:function(){return!(!this.isSavingUserPreferencePossible||this.hideRestoreSettingsMsg||!this.userSettings.isComplete||!this.userSettings.result||i.isEqual(this.previousSettings,i.keyBy(this.userSettings.result.chartSettings,function(e){return e.id})))}},{key:"isSavingUserSettingsPossible",get:function(){return this.isSavingUserPreferencePossible&&this.userSettings.isComplete&&(!this.showSettingRestoreMsg||!this.userSettings.result||!i.isEqual(this.currentChartSettingsMap,i.keyBy(this.userSettings.result.chartSettings,function(e){return e.id}))||!i.isEqual(Object(u.toJS)(this.userGroupColors),this.userSettings.result.groupColors))}},{key:"loadingInitialDataForSummaryTab",get:function(){var e=this.defaultVisibleAttributes.isPending||this.clinicalAttributes.isPending||this.mutationProfiles.isPending||this.cnaProfiles.isPending||this.structuralVariantProfiles.isPending||this.survivalPlots.isPending||this.displayPatientTreatments.isPending||this.sharedCustomData.isPending;return this.clinicalAttributes.isComplete&&!i.isEmpty(this.clinicalAttributes.result)&&(e=e||this.initialVisibleAttributesClinicalDataBinCountData.isPending||this.initialVisibleAttributesClinicalDataCountData.isPending),this._loadUserSettingsInitially&&(e=(e=e||this.userSettings.isPending)||this.userSavedCustomData.isPending),i.isEmpty(this.initialFilters.genomicDataFilters)||(e=e||this.molecularProfileSampleCounts.isPending),i.isEmpty(this.initialFilters.genericAssayDataFilters)||(e=e||this.genericAssayProfileOptionsByType.isPending),i.isEmpty(this.initialFilters.caseLists)||(e=e||this.caseListSampleCounts.isPending),!e&&this.isInitiallLoad&&(e=e||0===this.selectedSamples.result.length),!e&&this.isInitiallLoad&&(this.isInitiallLoad=!1),e}},{key:"currentChartSettingsMap",get:function(){var e={};return this.isSavingUserPreferencePossible&&(e=Object(b.M)(this.visibleAttributes,this.columns,i.fromPairs(this.chartsDimension.toJSON()),i.fromPairs(this.chartsType.toJSON()),i.fromPairs(this._geneSpecificChartMap.toJSON()),i.fromPairs(this._genericAssayChartMap.toJSON()),i.fromPairs(this._clinicalDataBinFilterSet.toJSON()),this._filterMutatedGenesTableByCancerGenes,this._filterSVGenesTableByCancerGenes,this._filterCNAGenesTableByCancerGenes,this.currentGridLayout)),e}},{key:"showResetToDefaultButton",get:function(){return!i.isEqual(this.currentChartSettingsMap,this.defaultChartSettingsMap)}},{key:"defaultChartSettingsMap",get:function(){var e=this,t=i.reduce(this._defaultVisibleChartIds,function(t,r){return e.chartMetaSet[r]&&t.push(e.chartMetaSet[r]),t},[]);return Object(b.M)(t,this.columns,i.fromPairs(this._defaultChartsDimension.toJSON()),i.fromPairs(this._defaultChartsType.toJSON()),{},{},i.fromPairs(this._defaultClinicalDataBinFilterSet.toJSON()))}},{key:"chartsAreFiltered",get:function(){return Object(b.zb)(this.userSelections)}},{key:"hasFilteredSamples",get:function(){return this.selectedSamples.isComplete&&this.selectedSamples.result.length>0}},{key:"hasSampleIdentifiersInFilter",get:function(){return!(i.isEmpty(this.filters.studyIds)&&i.isEmpty(this.filters.sampleIdentifiers))}},{key:"selectedSamplesMap",get:function(){return i.keyBy(this.selectedSamples.result,function(e){return e.uniqueSampleKey})}},{key:"selectedPatients",get:function(){return i.values(i.reduce(this.selectedSamples.result,function(e,t){return e[t.uniquePatientKey]={cancerStudy:{},patientId:t.patientId,uniquePatientKey:t.uniquePatientKey,studyId:t.studyId,uniqueSampleKey:t.uniqueSampleKey},e},{}))}},{key:"molecularProfileMapByType",get:function(){return i.groupBy(this.molecularProfiles.result,function(e){return Object(ce.a)(e)})}},{key:"clinicalDataDownloadFilename",get:function(){return"".concat(this.downloadFilenamePrefix,"clinical_data.tsv")}},{key:"downloadFilenamePrefix",get:function(){return Object(g.a)(this.displayedStudies.result)}},{key:"isMixedReferenceGenome",get:function(){if(this.queriedPhysicalStudies.result)return Object(oe.c)(this.queriedPhysicalStudies.result)}},{key:"patientTreatmentFilters",get:function(){return this._patientTreatmentsFilter}},{key:"sampleTreatmentFilters",get:function(){return this._sampleTreatmentsFilters}},{key:"sampleTreatmentFiltersAsStrings",get:function(){return this.sampleTreatmentFilters.filters.map(function(e){return e.filters.map(function(e){return $(e)})})}},{key:"patientTreatmentFiltersAsStrings",get:function(){return this.patientTreatmentFilters.filters.map(function(e){return e.filters.map(function(e){return $(e)})})}},{key:"isGlobalMutationFilterActive",get:function(){return this.isGlobalAlterationFilterActive||this.isStatusFilterActive}},{key:"isGlobalAlterationFilterActive",get:function(){return this.isTiersFilterActive||this.isAnnotationsFilterActive}},{key:"isTiersFilterActive",get:function(){return Object(b.w)(i.fromPairs(this.driverAnnotationSettings.driverTiers.toJSON()),this.driverAnnotationSettings.includeUnknownTier)}},{key:"isAnnotationsFilterActive",get:function(){return Object(b.k)(this.driverAnnotationSettings.includeDriver,this.driverAnnotationSettings.includeVUS,this.driverAnnotationSettings.includeUnknownOncogenicity)}},{key:"isStatusFilterActive",get:function(){return Object(b.Hb)(this.includeGermlineMutations,this.includeSomaticMutations,this.includeUnknownStatusMutations)}},{key:"doShowDriverAnnotationSectionInGlobalMenu",get:function(){return!!(this.customDriverAnnotationReport.isComplete&&this.customDriverAnnotationReport.result.hasBinary&&c.b.serverConfig.oncoprint_custom_driver_annotation_binary_menu_label&&c.b.serverConfig.oncoprint_custom_driver_annotation_tiers_menu_label)}},{key:"doShowTierAnnotationSectionInGlobalMenu",get:function(){return!!(this.customDriverAnnotationReport.isComplete&&this.customDriverAnnotationReport.result.tiers.length>0&&c.b.serverConfig.oncoprint_custom_driver_annotation_binary_menu_label&&c.b.serverConfig.oncoprint_custom_driver_annotation_tiers_menu_label)}}])&&Ae(t.prototype,r),n&&Ae(t,n),e}();je([u.observable],Me.prototype,"driverAnnotationSettings",void 0),je([u.observable],Me.prototype,"includeGermlineMutations",void 0),je([u.observable],Me.prototype,"includeSomaticMutations",void 0),je([u.observable],Me.prototype,"includeUnknownStatusMutations",void 0),je([u.observable],Me.prototype,"isSettingsMenuVisible",void 0),je([u.observable],Me.prototype,"showComparisonGroupUI",void 0),je([u.observable],Me.prototype,"showCustomDataSelectionUI",void 0),je([u.observable],Me.prototype,"numberOfVisibleColorChooserModals",void 0),je([u.observable],Me.prototype,"userGroupColors",void 0),je([u.action],Me.prototype,"updateNAValue",void 0),je([u.action],Me.prototype,"toggleNAValue",void 0),je([u.computed],Me.prototype,"isLoggedIn",null),je([u.computed],Me.prototype,"isSavingUserPreferencePossible",null),je([u.observable],Me.prototype,"hideRestoreSettingsMsg",void 0),je([y.default],Me.prototype,"isResourceTabOpen",null),je([u.action.bound],Me.prototype,"setResourceTabOpen",null),je([u.observable.ref],Me.prototype,"_comparisonConfirmationModal",void 0),je([u.action.bound],Me.prototype,"setComparisonConfirmationModal",null),je([u.action],Me.prototype,"setComparisonGroupSelected",null),je([u.action],Me.prototype,"toggleComparisonGroupSelected",null),je([u.action],Me.prototype,"toggleComparisonGroupMarkedForDeletion",null),je([u.action],Me.prototype,"toggleCustomChartMarkedForDeletion",null),je([u.action],Me.prototype,"showComparisonGroupWarningSign",null),je([u.computed],Me.prototype,"customChartGroupMarkedForDeletion",null),je([u.action],Me.prototype,"deleteMarkedComparisonGroups",null),je([u.action],Me.prototype,"deleteMarkedCustomData",null),je([u.observable],Me.prototype,"_pendingChanges",void 0),je([u.observable],Me.prototype,"_comparisonGroupsChangeCount",void 0),je([u.action],Me.prototype,"notifyComparisonGroupsChange",null),je([u.action.bound],Me.prototype,"onGroupColorChange",null),je([y.default],Me.prototype,"openComparisonPage",null),je([u.observable],Me.prototype,"initialFiltersQuery",void 0),je([u.observable],Me.prototype,"studyIds",void 0),je([u.observable],Me.prototype,"_genomicProfilesFilter",void 0),je([u.observable],Me.prototype,"_caseListsFilter",void 0),je([u.computed.struct],Me.prototype,"genomicProfilesFilter",null),je([u.computed.struct],Me.prototype,"caseListsFilter",null),je([u.action],Me.prototype,"setGenomicProfilesFilter",null),je([u.action],Me.prototype,"setCaseListsFilter",null),je([u.observable],Me.prototype,"_clinicalDataBinFilterSet",void 0),je([u.observable],Me.prototype,"_genomicDataBinFilterSet",void 0),je([u.observable],Me.prototype,"_genericAssayDataBinFilterSet",void 0),je([u.observable.ref],Me.prototype,"_geneFilterSet",void 0),je([u.observable],Me.prototype,"_chartVisibility",void 0),je([u.observable.ref],Me.prototype,"geneQueryStr",void 0),je([u.observable],Me.prototype,"geneQueries",void 0),je([u.observable],Me.prototype,"chartsDimension",void 0),je([u.observable],Me.prototype,"chartsType",void 0),je([u.observable],Me.prototype,"sharedGroupSet",void 0),je([u.observable],Me.prototype,"sharedCustomChartSet",void 0),je([u.computed],Me.prototype,"currentTab",null),je([u.observable],Me.prototype,"pageStatusMessages",void 0),je([u.action],Me.prototype,"updateStoreByFilters",null),je([u.action],Me.prototype,"updateStoreFromURL",null),je([u.computed],Me.prototype,"initialFilters",null),je([u.computed],Me.prototype,"isInitialFilterState",null),je([u.computed],Me.prototype,"containerWidth",null),je([u.computed],Me.prototype,"columns",null),je([u.action.bound],Me.prototype,"updateLayout",null),je([u.computed],Me.prototype,"studyViewPageLayoutProps",null),je([u.action.bound],Me.prototype,"updateCurrentGridLayout",null),je([u.observable.ref],Me.prototype,"currentGridLayout",void 0),je([u.observable],Me.prototype,"previousSettings",void 0),je([u.observable],Me.prototype,"numberOfSelectedSamplesInCustomSelection",void 0),je([u.observable],Me.prototype,"_filterComparisonGroups",void 0),je([u.observable],Me.prototype,"_filterMutatedGenesTableByCancerGenes",void 0),je([u.observable],Me.prototype,"_filterSVGenesTableByCancerGenes",void 0),je([u.observable],Me.prototype,"_filterCNAGenesTableByCancerGenes",void 0),je([u.action.bound],Me.prototype,"updateMutatedGenesTableByCancerGenesFilter",null),je([u.action.bound],Me.prototype,"updateSVGenesTableByCancerGenesFilter",null),je([u.action.bound],Me.prototype,"updateCNAGenesTableByCancerGenesFilter",null),je([u.computed],Me.prototype,"filterMutatedGenesTableByCancerGenes",null),je([u.computed],Me.prototype,"filterSVGenesTableByCancerGenes",null),je([u.computed],Me.prototype,"filterCNAGenesTableByCancerGenes",null),je([u.action],Me.prototype,"updateComparisonGroupsFilter",null),je([u.observable],Me.prototype,"_customCharts",void 0),je([u.observable],Me.prototype,"_geneSpecificChartMap",void 0),je([u.observable],Me.prototype,"_geneSpecificCharts",void 0),je([u.observable],Me.prototype,"_genericAssayChartMap",void 0),je([u.observable],Me.prototype,"_genericAssayCharts",void 0),je([u.observable],Me.prototype,"_customChartsSelectedCases",void 0),je([u.observable],Me.prototype,"customChartSet",void 0),je([u.observable],Me.prototype,"_newlyCreatedCustomChartSet",void 0),je([u.action.bound],Me.prototype,"onCheckGene",null),je([u.action.bound],Me.prototype,"isSharedCustomData",null),je([u.computed],Me.prototype,"selectedGenes",null),je([u.action.bound],Me.prototype,"updateSelectedGenes",null),je([u.computed],Me.prototype,"alterationTypesInOQL",null),je([u.computed],Me.prototype,"defaultProfilesForOql",null),je([u.computed],Me.prototype,"defaultMutationProfile",null),je([u.computed],Me.prototype,"defaultStructuralVariantProfile",null),je([u.computed],Me.prototype,"defaultCnaProfile",null),je([u.computed],Me.prototype,"defaultMrnaProfile",null),je([u.computed],Me.prototype,"defaultProtProfile",null),je([u.action.bound],Me.prototype,"clearAllFilters",null),je([u.computed],Me.prototype,"analysisGroupsSettings",null),je([u.action],Me.prototype,"updateClinicalDataIntervalFilters",null),je([u.action.bound],Me.prototype,"updateClinicalDataFilterByValues",null),je([u.action.bound],Me.prototype,"setCustomChartFilters",null),je([u.action.bound],Me.prototype,"updateGenomicDataIntervalFilters",null),je([u.action.bound],Me.prototype,"updateGenericAssayDataIntervalFilters",null),je([u.action.bound],Me.prototype,"updateScatterPlotFilterByValues",null),je([u.action.bound],Me.prototype,"addGeneFilters",null),je([u.action.bound],Me.prototype,"updateGenomicDataIntervalFiltersByValues",null),je([u.action.bound],Me.prototype,"updateGenericAssayDataIntervalFiltersByValues",null),je([u.action.bound],Me.prototype,"addGenomicProfilesFilter",null),je([u.action.bound],Me.prototype,"addCaseListsFilter",null),je([u.action.bound],Me.prototype,"removeGeneFilter",null),je([u.action.bound],Me.prototype,"resetGeneFilter",null),je([u.action.bound],Me.prototype,"removeGenomicProfileFilter",null),je([u.action.bound],Me.prototype,"removeCaseListsFilter",null),je([u.action.bound],Me.prototype,"updateChartSampleIdentifierFilter",null),je([u.action],Me.prototype,"changeChartVisibility",null),je([u.action],Me.prototype,"resetFilterAndChangeChartVisibility",null),je([u.action.bound],Me.prototype,"removeComparisonGroupSelectionFilter",null),je([u.action.bound],Me.prototype,"removeCustomSelectFilter",null),je([u.action],Me.prototype,"toggleLogScale",null),je([u.action.bound],Me.prototype,"updateCustomBins",null),je([u.action],Me.prototype,"addCharts",null),je([u.action],Me.prototype,"updateChartsVisibility",null),je([u.computed],Me.prototype,"clinicalDataFilters",null),je([u.computed],Me.prototype,"customDataFilters",null),je([u.computed],Me.prototype,"geneFilters",null),je([u.computed],Me.prototype,"genomicDataIntervalFilters",null),je([u.computed],Me.prototype,"genericAssayDataIntervalFilters",null),je([u.computed],Me.prototype,"filters",null),je([u.computed],Me.prototype,"userSelections",null),je([u.computed],Me.prototype,"unfilteredAttrsForNonNumerical",null),je([u.computed],Me.prototype,"unfilteredCustomAttrsForNonNumerical",null),je([u.computed],Me.prototype,"newlyAddedUnfilteredAttrsForNonNumerical",null),je([u.computed],Me.prototype,"newlyAddedUnfilteredAttrsForNumerical",null),je([u.computed],Me.prototype,"unfilteredAttrsForNumerical",null),je([u.action.bound],Me.prototype,"hideChart",null),je([u.computed],Me.prototype,"isSingleNonVirtualStudyQueried",null),je([u.computed],Me.prototype,"showOriginStudiesInSummaryDescription",null),je([u.computed],Me.prototype,"hasCnaProfileData",null),je([u.computed],Me.prototype,"oncokbCancerGeneFilterEnabled",null),je([u.computed],Me.prototype,"isSingleVirtualStudyPageWithoutFilter",null),je([u.computed],Me.prototype,"analysisGroupsPossible",null),je([u.computed],Me.prototype,"survivalPlotKeys",null),je([y.default],Me.prototype,"isChartNameValid",null),je([y.default],Me.prototype,"getDefaultCustomChartName",null),je([u.action.bound],Me.prototype,"addCustomChart",null),je([u.action.bound],Me.prototype,"addGeneSpecificCharts",null),je([u.action.bound],Me.prototype,"addGenericAssayContinuousCharts",null),je([u.action.bound],Me.prototype,"updateCustomSelect",null),je([u.computed],Me.prototype,"chartMetaSet",null),je([u.computed],Me.prototype,"chartMetaSetWithChartType",null),je([u.computed],Me.prototype,"visibleAttributes",null),je([u.computed],Me.prototype,"showSettingRestoreMsg",null),je([u.computed],Me.prototype,"isSavingUserSettingsPossible",null),je([u.computed],Me.prototype,"loadingInitialDataForSummaryTab",null),je([u.computed],Me.prototype,"currentChartSettingsMap",null),je([u.action.bound],Me.prototype,"clearPageChartSettings",null),je([u.action.bound],Me.prototype,"loadUserChartSettings",null),je([u.action.bound],Me.prototype,"updateCustomDataList",null),je([u.action.bound],Me.prototype,"undoUserChartSettings",null),je([u.observable],Me.prototype,"_defaultChartsDimension",void 0),je([u.observable],Me.prototype,"_defaultChartsType",void 0),je([u.observable],Me.prototype,"_defaultVisibleChartIds",void 0),je([u.observable],Me.prototype,"_defaultClinicalDataBinFilterSet",void 0),je([u.action.bound],Me.prototype,"resetToDefaultChartSettings",null),je([u.computed],Me.prototype,"showResetToDefaultButton",null),je([u.computed],Me.prototype,"defaultChartSettingsMap",null),je([u.action.bound],Me.prototype,"loadChartSettings",null),je([u.action.bound],Me.prototype,"updateChartStats",null),je([u.action],Me.prototype,"initializeChartStatsByClinicalAttributes",null),je([u.action.bound],Me.prototype,"changeChartType",null),je([u.action],Me.prototype,"initializeClinicalDataCountCharts",null),je([u.action],Me.prototype,"initializeGeneSpecificCharts",null),je([u.action],Me.prototype,"initializeGenericAssayCharts",null),je([u.action],Me.prototype,"initializeClinicalDataBinCountCharts",null),je([u.computed],Me.prototype,"chartsAreFiltered",null),je([u.observable],Me.prototype,"blockLoading",void 0),je([u.computed],Me.prototype,"hasFilteredSamples",null),je([u.computed],Me.prototype,"hasSampleIdentifiersInFilter",null),je([u.computed],Me.prototype,"selectedSamplesMap",null),je([u.computed],Me.prototype,"selectedPatients",null),je([u.computed],Me.prototype,"molecularProfileMapByType",null),je([u.computed],Me.prototype,"clinicalDataDownloadFilename",null),je([u.computed],Me.prototype,"downloadFilenamePrefix",null),je([y.default],Me.prototype,"getDownloadDataPromise",null),je([y.default],Me.prototype,"onSubmitQuery",null),je([u.action],Me.prototype,"showAsPieChart",null),je([u.computed],Me.prototype,"isMixedReferenceGenome",null),je([u.observable],Me.prototype,"_patientTreatmentsFilter",void 0),je([u.observable],Me.prototype,"_sampleTreatmentsFilters",void 0),je([u.computed],Me.prototype,"patientTreatmentFilters",null),je([u.computed],Me.prototype,"sampleTreatmentFilters",null),je([u.computed],Me.prototype,"sampleTreatmentFiltersAsStrings",null),je([u.computed],Me.prototype,"patientTreatmentFiltersAsStrings",null),je([u.action],Me.prototype,"clearPatientTreatmentFilters",null),je([u.action],Me.prototype,"setPatientTreatmentFilters",null),je([u.action],Me.prototype,"addPatientTreatmentFilters",null),je([u.action],Me.prototype,"clearSampleTreatmentFilters",null),je([u.action],Me.prototype,"setSampleTreatmentFilters",null),je([u.action],Me.prototype,"addSampleTreatmentFilters",null),je([u.action],Me.prototype,"setTreatmentFilters",null),je([u.action.bound],Me.prototype,"onSampleTreatmentSelection",null),je([u.action.bound],Me.prototype,"onPatientTreatmentSelection",null),je([u.action.bound],Me.prototype,"removeSampleTreatmentsFilter",null),je([u.action.bound],Me.prototype,"removePatientTreatmentsFilter",null),je([u.computed],Me.prototype,"isGlobalMutationFilterActive",null),je([u.computed],Me.prototype,"isGlobalAlterationFilterActive",null),je([u.computed],Me.prototype,"isTiersFilterActive",null),je([u.computed],Me.prototype,"isAnnotationsFilterActive",null),je([u.computed],Me.prototype,"isStatusFilterActive",null),je([u.computed],Me.prototype,"doShowDriverAnnotationSectionInGlobalMenu",null),je([u.computed],Me.prototype,"doShowTierAnnotationSectionInGlobalMenu",null);var Fe=r(272),xe=r(72),Le=r(73),Be=r(23),Ue=r(876),Ve=r(945);function qe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function We(e,t){return!t||"object"!==Ye(t)&&"function"!=typeof t?He(e):t}function He(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ze(e){return(ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Je(e,t)}function Je(e,t){return(Je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ye(e){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ze=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":Ye(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},Xe=function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},$e=function(e){function t(){return Ke(this,t),We(this,ze(t).apply(this,arguments))}return Qe(t,Le["b"]),t}(),et=function(e){function t(){var e;return Ke(this,t),e=We(this,ze(t).apply(this,arguments)),Object.defineProperty(He(e),"columns",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({invoke:function(){return Xe(He(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[Object.assign(Object.assign({},this.getDefaultColumnConfig("patientId","Patient ID")),{render:function(e){return n.createElement("a",{href:Object(P.v)(e.studyId,e.patientId),target:"_blank"},e.patientId)}}),Object.assign(Object.assign({},this.getDefaultColumnConfig("sampleId","Sample ID")),{render:function(e){return n.createElement("a",{href:Object(P.x)(e.studyId,e.sampleId),target:"_blank"},e.sampleId)}})],void 0!==i.find(this.props.store.visibleAttributes,function(e){return e.uniqueKey===b.j.CANCER_STUDIES})&&t.push(Object.assign({},this.getDefaultColumnConfig("studyId","Cancer Study"))),e.abrupt("return",i.reduce(this.props.store.visibleAttributes.sort(b.o),function(e,t,n){return void 0!==t.clinicalAttribute&&e.push(Object.assign(Object.assign({},r.getDefaultColumnConfig(Object(b.tb)(t.clinicalAttribute),t.clinicalAttribute.displayName,t.clinicalAttribute.datatype===b.e.NUMBER)),{tooltip:Object(b.N)(t.clinicalAttribute.displayName,t.description?t.description:"",t.clinicalAttribute?t.clinicalAttribute.clinicalAttributeId:void 0)})),e},t));case 3:case"end":return e.stop()}},e,this)}))},default:[]})}),e}var r,o,a;return Qe(t,n["Component"]),r=t,(o=[{key:"getDefaultColumnConfig",value:function(e,t,r){return{name:t||"",headerRender:function(e){return n.createElement("span",{"data-test":e},e)},render:function(t){return Object(F.ob)(t[e])?n.createElement("a",{href:t[e],target:"_blank"},t[e]):n.createElement("span",{"data-test":t[e]},t[e])},download:function(t){return t[e]||""},sortBy:function(t){return t[e]?r?parseFloat(t[e]):t[e]:null},filter:function(t,r,n){return(t[e]||"").toUpperCase().includes(n)}}}},{key:"getProgressItems",value:function(e){return[{label:"Loading clinical data"+(e>2?" - this can take several seconds":""),promises:[this.props.store.getDataForClinicalDataTab]}]}},{key:"render",value:function(){return n.createElement("span",{"data-test":"clinical-data-tab-content"},n.createElement(Ve.a,{offset:60},n.createElement(Be.If,{condition:this.columns.isPending||this.props.store.getDataForClinicalDataTab.isPending},n.createElement(Be.Then,null,n.createElement(xe.a,{isLoading:this.columns.isPending||this.props.store.getDataForClinicalDataTab.isPending,size:"big",center:!0},n.createElement(Ue.a,{getItems:this.getProgressItems,show:this.columns.isPending||this.props.store.getDataForClinicalDataTab.isPending}))),n.createElement(Be.Else,null,n.createElement($e,{initialItemsPerPage:20,showCopyDownload:!0,showColumnVisibility:!1,data:this.props.store.getDataForClinicalDataTab.result||[],columns:this.columns.result,copyDownloadProps:{showCopy:!1,downloadFilename:this.props.store.clinicalDataDownloadFilename}})))))}}])&&qe(r.prototype,o),a&&qe(r,a),t}();Ze([y.default],et.prototype,"getProgressItems",null),et=Ze([s.observer],et);var tt=r(329),rt=r(940),nt=r(1360),ot=r.n(nt),it=r(1193),at=r.n(it),st=r(1361),lt=r.n(st),ut=r(5),ct=r.n(ut),pt=r(923),dt=r(17);function ft(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ht(e){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bt(e,t){return(bt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yt(e){return(yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var gt=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":yt(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},vt=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=!(o=ht(t).call(this,e))||"object"!==yt(o)&&"function"!=typeof o?mt(n):o,Object.defineProperty(mt(r),"binSeparator",{enumerable:!0,configurable:!0,writable:!0,value:","}),Object.defineProperty(mt(r),"currentBinsValue",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object(u.makeObservable)(mt(r)),r.props.currentBins&&(r.currentBinsValue=i.sortBy(r.props.currentBins).join("".concat(r.binSeparator," "))),r}var r,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bt(e,t)}(t,n["Component"]),r=t,(o=[{key:"updateCurrentBinsValue",value:function(){var e=i.sortBy(this.newStringBins.map(function(e){return Number(e.trim())}));this.currentBinsValue=e.join("".concat(this.binSeparator," ")),this.props.updateCustomBins(this.props.chartMeta.uniqueKey,e),this.props.onHide()}},{key:"render",value:function(){var e=this;return n.createElement(dt.Modal,{bsSize:"small",show:this.props.show,onHide:this.props.onHide,keyboard:!0},n.createElement(dt.Modal.Header,{closeButton:!0},n.createElement(dt.Modal.Title,null,"Custom Bins")),n.createElement(dt.Modal.Body,null,n.createElement("div",null,"Please specify bin boundaries of the x axis"),n.createElement("textarea",{style:{resize:"none"},rows:5,value:this.currentBinsValue,className:"form-control input-sm",onChange:function(t){return e.currentBinsValue=t.currentTarget.value}}),!this.contentIsValid&&n.createElement("div",{className:"alert alert-danger",role:"alert",style:{marginTop:"10px",marginBottom:"0"}},"Invalid bins")),n.createElement(dt.Modal.Footer,null,n.createElement("button",{className:"btn btn-primary btn-sm",onClick:this.updateCurrentBinsValue,disabled:!this.contentIsValid,style:{marginTop:"10px",marginBottom:"0"}},"Update")))}},{key:"newStringBins",get:function(){return this.currentBinsValue.trim().split(this.binSeparator)}},{key:"contentIsValid",get:function(){return Object(b.v)(this.newStringBins)}}])&&ft(r.prototype,o),a&&ft(r,a),t}();gt([u.observable],vt.prototype,"currentBinsValue",void 0),gt([y.default],vt.prototype,"updateCurrentBinsValue",null),gt([u.computed],vt.prototype,"newStringBins",null),gt([u.computed],vt.prototype,"contentIsValid",null);var St=vt=gt([s.observer],vt),Ct=function(e){var t=e.width,o=e.style,i=e.className;return n.createElement("img",{src:r(1362),className:i||"",style:Object.assign({width:t,border:"1px solid black",padding:2},o||{})})};function Ot(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function wt(e){return(wt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Et(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tt(e,t){return(Tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _t(e){return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var At=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":_t(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},Pt=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=!(o=wt(t).call(this,e))||"object"!==_t(o)&&"function"!=typeof o?Et(n):o,Object.defineProperty(Et(r),"menuOpen",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(Et(r),"downloadSubmenuOpen",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(Et(r),"comparisonSubmenuOpen",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(Et(r),"showCustomBinModal",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(Et(r),"closeMenuTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object(u.makeObservable)(Et(r)),r}var r,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tt(e,t)}(t,n["Component"]),r=t,(o=[{key:"openMenu",value:function(){this.menuOpen=!0,window.clearTimeout(this.closeMenuTimeout),this.closeMenuTimeout=void 0}},{key:"closeMenu",value:function(){var e=this;this.closeMenuTimeout||(this.closeMenuTimeout=window.setTimeout(function(){e.menuOpen=!1,e.closeMenuTimeout=void 0},125))}},{key:"render",value:function(){return n.createElement("div",{className:ct()(at.a.header,"chartHeader"),style:{position:"relative",height:"".concat(this.props.height,"px"),lineHeight:"".concat(this.props.height,"px")}},n.createElement("div",{className:ct()(at.a.name,at.a.draggable)},!this.props.hideLabel&&n.createElement("span",{className:"chartTitle"},this.props.title)),this.active&&n.createElement("div",{className:ct()(at.a.controls,"controls")},n.createElement("div",{className:"btn-group"},n.createElement(Be.If,{condition:!!this.props.description},n.createElement(F.i,{mouseEnterDelay:0,trigger:["hover"],placement:this.tooltipPosition,align:this.tooltipAlign,overlay:Object(b.N)(this.props.title,this.props.description?this.props.description.description:"",this.props.chartMeta.uniqueKey),destroyTooltipOnHide:!0},n.createElement("div",{className:ct()("btn btn-xs btn-default",at.a.item)},n.createElement("i",{className:ct()("fa fa-xs fa-fw","fa-info-circle"),"aria-hidden":"true"})))),n.createElement(Be.If,{condition:!!this.props.chartMeta.clinicalAttribute||!!this.props.chartMeta.description},n.createElement(F.i,{mouseEnterDelay:0,trigger:["hover"],placement:this.tooltipPosition,align:this.tooltipAlign,overlay:Object(b.N)(this.props.chartMeta.displayName,this.props.chartMeta.description,this.props.chartMeta.clinicalAttribute?this.props.chartMeta.clinicalAttribute.clinicalAttributeId:void 0),destroyTooltipOnHide:!0},n.createElement("div",{className:ct()("btn btn-xs btn-default",at.a.item)},n.createElement("i",{className:ct()("fa fa-xs fa-fw","fa-info-circle"),"aria-hidden":"true"})))),n.createElement(Be.If,{condition:this.props.chartControls&&!!this.props.chartControls.showResetIcon},n.createElement(F.i,{placement:this.tooltipPosition,align:this.tooltipAlign,overlay:n.createElement("span",null,"Reset filters in chart"),destroyTooltipOnHide:!0},n.createElement("button",{className:ct()("btn btn-xs btn-default",at.a.item),onClick:this.props.resetChart},n.createElement("i",{className:ct()("fa fa-xs fa-fw","fa-undo",at.a.undo,at.a.clickable),"aria-hidden":"true"})))),n.createElement(F.i,{placement:this.tooltipPosition,align:this.tooltipAlign,overlay:n.createElement("span",null,"Delete chart")},n.createElement("button",{className:ct()("btn btn-xs btn-default",at.a.item),onClick:this.props.deleteChart},n.createElement("i",{className:ct()("fa fa-xs fa-fw","fa-times",at.a.clickable),"aria-hidden":"true"}))),this.menuItems.length>0&&n.createElement("div",{onMouseEnter:this.openMenu,onMouseLeave:this.closeMenu,"data-test":"chart-header-hamburger-icon",className:ct()("dropdown btn-group",{show:this.menuOpen})},n.createElement("button",{className:ct()("btn btn-xs btn-default dropdown-toggle",{active:this.menuOpen})},n.createElement("i",{className:ct()("fa fa-xs fa-fw fa-bars")})),n.createElement("ul",{"data-test":"chart-header-hamburger-icon-menu",className:ct()("dropdown-menu pull-right",{show:this.menuOpen}),style:{width:"190px"}},this.menuItems)))),this.active&&n.createElement("div",{style:{position:"absolute",top:2,right:2}}))}},{key:"fileName",get:function(){return this.props.chartMeta.displayName.replace(/[ \t]/g,"_")}},{key:"active",get:function(){return this.menuOpen||this.props.active}},{key:"comparisonButton",get:function(){var e,t,r,o=this;switch(this.props.chartType){case A.a.BAR_CHART:return n.createElement("div",{className:ct()("dropdown-item",at.a.dropdownHoverEffect),style:{display:"flex",justifyContent:"space-between",padding:"3px 20px"},onMouseEnter:function(){return o.comparisonSubmenuOpen=!0},onMouseLeave:function(){return o.comparisonSubmenuOpen=!1}},n.createElement("div",{style:{display:"flex",alignItems:"center"}},n.createElement(Ct,{className:ct()("fa fa-fw",at.a.menuItemIcon)}),n.createElement("span",null,"Compare Groups")),n.createElement("i",{className:"fa fa-xs fa-fw fa-caret-right",style:{lineHeight:"inherit"}}),this.comparisonSubmenuOpen&&n.createElement("ul",{className:ct()("dropdown-menu",{show:this.comparisonSubmenuOpen}),style:{top:0,margin:"-6px 0",left:"left"===this.props.placement?-120:"100%",minWidth:120}},n.createElement("li",null,n.createElement("a",{className:"dropdown-item",onClick:function(){o.props.openComparisonPage({categorizationType:b.h.QUARTILES})}},"Quartiles")),n.createElement("li",null,n.createElement("a",{className:"dropdown-item",onClick:function(){o.props.openComparisonPage({categorizationType:b.h.MEDIAN})}},"Median")),n.createElement("li",null,n.createElement("a",{className:"dropdown-item",onClick:function(){return o.props.openComparisonPage({categorizationType:b.h.BINS})}},"Current bins"))));case A.a.MUTATED_GENES_TABLE:case A.a.CNA_GENES_TABLE:case A.a.STRUCTURAL_VARIANT_GENES_TABLE:case A.a.SAMPLE_TREATMENTS_TABLE:case A.a.PATIENT_TREATMENTS_TABLE:return n.createElement("a",{className:ct()("dropdown-item",(e={},t=at.a.disabledMenuItem,r=this.props.selectedRowsKeys.length<2,t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e)),onClick:function(){o.props.selectedRowsKeys.length>=2&&o.props.openComparisonPage(ve(o.props.selectedRowsKeys,o.props.chartType))},style:{display:"flex",alignItems:"center"}},n.createElement(Ct,{className:ct()("fa fa-fw",at.a.menuItemIcon)}),"Compare Groups");default:return n.createElement("a",{className:"dropdown-item",onClick:function(){return o.props.openComparisonPage({})},style:{display:"flex",alignItems:"center"}},n.createElement(Ct,{className:ct()("fa fa-fw",at.a.menuItemIcon)}),"Compare Groups")}}},{key:"menuItems",get:function(){var e=this,t=[];if(this.props.chartControls&&this.props.chartControls.showLogScaleToggle&&this.props.toggleLogScale&&t.push(n.createElement("li",null,n.createElement("a",{className:"dropdown-item logScaleCheckbox",onClick:this.props.toggleLogScale},n.createElement(pt.a,{checked:!(!this.props.chartControls||!this.props.chartControls.logScaleChecked),label:n.createElement("span",{style:{marginTop:-3}},"Log Scale"),style:{marginTop:1,marginBottom:-3}})))),this.props.chartControls&&this.props.chartControls.showTableIcon&&t.push(n.createElement("li",null,n.createElement("a",{className:"dropdown-item",onClick:function(){return e.props.changeChartType(A.a.TABLE)}},n.createElement("i",{className:ct()("fa fa-xs fa-fw","fa-table",at.a.menuItemIcon),"aria-hidden":"true"}),"Show Table"))),this.props.chartControls&&this.props.chartControls.showPieIcon&&t.push(n.createElement("li",null,n.createElement("a",{className:"dropdown-item",onClick:function(){return e.props.changeChartType(A.a.PIE_CHART)}},n.createElement("i",{className:ct()("fa fa-xs fa-fw","fa-pie-chart",at.a.menuItemIcon),"aria-hidden":"true"}),"Show Pie"))),this.props.chartControls&&this.props.chartControls.showComparisonPageIcon&&t.push(n.createElement("li",{style:{position:"relative"}},this.comparisonButton)),this.props.chartType===A.a.BAR_CHART&&(t.push(n.createElement("li",null,n.createElement("a",{className:"dropdown-item",onClick:function(){return e.showCustomBinModal=!0}},n.createElement("i",{className:ct()("fa fa-xs fa-fw","fa-bar-chart",at.a.menuItemIcon),"aria-hidden":"true"}),"Custom Bins"),n.createElement(St,{show:this.showCustomBinModal,onHide:function(){return e.showCustomBinModal=!1},chartMeta:this.props.chartMeta,currentBins:this.props.store.getCurrentBins(this.props.chartMeta),updateCustomBins:this.props.store.updateCustomBins}))),this.props.chartControls&&this.props.chartControls.showNAToggle&&this.props.toggleNAValue&&t.push(n.createElement("li",null,n.createElement("a",{className:"dropdown-item",onClick:this.props.toggleNAValue},n.createElement(pt.a,{checked:!(!this.props.chartControls||!this.props.chartControls.isShowNAChecked),label:n.createElement("span",{style:{marginTop:-3}},"Show NA"),style:{marginTop:1,marginBottom:-3}}))))),this.props.chartControls&&this.props.downloadTypes&&this.props.downloadTypes.length>0){t.push(n.createElement("li",{style:{position:"relative"}},n.createElement("div",{className:ct()("dropdown-item",at.a.dropdownHoverEffect),style:{display:"flex",justifyContent:"space-between",padding:"3px 20px"},onMouseEnter:function(){return e.downloadSubmenuOpen=!0},onMouseLeave:function(){return e.downloadSubmenuOpen=!1}},n.createElement("div",null,n.createElement("i",{className:ct()("fa fa-xs","fa-download",at.a.menuItemIcon),"aria-hidden":"true"}),n.createElement("span",null,"Download")),n.createElement("i",{className:"fa fa-xs fa-fw fa-caret-right",style:{lineHeight:"inherit"}}),this.downloadSubmenuOpen&&n.createElement(F.j,{filename:this.fileName,buttons:this.props.downloadTypes,getSvg:this.props.getSVG,getData:this.props.getData,type:"dropdown",className:ct()({show:this.downloadSubmenuOpen}),style:{top:0,margin:"-6px 0",left:"left"===this.props.placement?-70:"100%",minWidth:70},dontFade:!0}))))}return t}},{key:"tooltipPosition",get:function(){return"left"==this.props.placement?"topRight":"top"}},{key:"tooltipAlign",get:function(){return"left"==this.props.placement?{offset:[0,-6]}:void 0}}])&&Ot(r.prototype,o),i&&Ot(r,i),t}();At([u.observable],Pt.prototype,"menuOpen",void 0),At([u.observable],Pt.prototype,"downloadSubmenuOpen",void 0),At([u.observable],Pt.prototype,"comparisonSubmenuOpen",void 0),At([u.observable],Pt.prototype,"showCustomBinModal",void 0),At([u.computed],Pt.prototype,"fileName",null),At([u.action.bound],Pt.prototype,"openMenu",null),At([u.action.bound],Pt.prototype,"closeMenu",null),At([u.computed],Pt.prototype,"active",null),At([u.computed],Pt.prototype,"comparisonButton",null),At([u.computed],Pt.prototype,"menuItems",null),At([u.computed],Pt.prototype,"tooltipPosition",null),At([u.computed],Pt.prototype,"tooltipAlign",null),Pt=At([s.observer],Pt);var kt=r(18),jt=r(176),It=r(837);function Dt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Rt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gt(e,t){return!t||"object"!==Bt(t)&&"function"!=typeof t?Mt(e):t}function Mt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ft(e){return(Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lt(e,t)}function Lt(e,t){return(Lt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Bt(e){return(Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ut,Vt=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":Bt(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},qt=function(e){function t(){return Rt(this,t),Gt(this,Ft(t).apply(this,arguments))}return xt(t,It["a"]),t}();!function(e){e.CATEGORY="Category",e.NUMBER="#",e.FREQ="Freq"}(Ut||(Ut={}));var Kt=function(e){function t(e){var r;return Rt(this,t),r=Gt(this,Ft(t).call(this,e)),Object.defineProperty(Mt(r),"sortBy",{enumerable:!0,configurable:!0,writable:!0,value:A.c}),Object.defineProperty(Mt(r),"sortDirection",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object(u.makeObservable)(Mt(r)),r}var r,o,i;return xt(t,n["Component"]),r=t,(o=[{key:"onUserSelection",value:function(e){var t=Object(u.toJS)(this.props.filters);a.a.includes(t,e)?t=a.a.filter(t,function(t){return t!==e}):t.push(e),this.props.onUserSelection(t)}},{key:"tooltipLabelMouseEnter",value:function(e){this.props.highlightedRow&&this.props.highlightedRow(e)}},{key:"tooltipLabelMouseLeave",value:function(){this.props.highlightedRow&&this.props.highlightedRow(void 0)}},{key:"addAll",value:function(e){this.props.onUserSelection(e.map(function(e){return e.value}))}},{key:"removeAll",value:function(e){var t=e.map(function(e){return e.value});this.props.onUserSelection(this.props.filters.filter(function(e){return!t.includes(e)}))}},{key:"afterSorting",value:function(e,t){this.sortBy=e,this.sortDirection=t}},{key:"render",value:function(){return n.createElement(qt,{width:this.props.width,height:this.props.height,data:this.props.data||[],columns:this.columns,addAll:this.addAll,removeAll:this.removeAll,numberOfSelectedRows:this.props.filters.length,showAddRemoveAllButton:this.props.showAddRemoveAllButtons,extraButtons:this.extraButtons,sortBy:this.sortBy,sortDirection:this.sortDirection,afterSorting:this.afterSorting})}},{key:"columnsWidth",get:function(){var e,t=Object(b.t)(this.props.width-140);return Dt(e={},Ut.CATEGORY,t),Dt(e,Ut.NUMBER,80),Dt(e,Ut.FREQ,60),e}},{key:"cellMargin",get:function(){var e;return Dt(e={},Ut.CATEGORY,0),Dt(e,Ut.NUMBER,0===this.props.data.length?0:Object(b.u)((this.columnsWidth[Ut.NUMBER]-10-(Object(b.Z)(a.a.max(this.props.data.map(function(e){return e.count})).toLocaleString())+20))/2)),Dt(e,Ut.FREQ,0===this.props.data.length?0:Object(b.u)(Object(b.Y)(this.columnsWidth[Ut.FREQ],a.a.sortBy(this.props.data,function(e){return e.percentage})[this.props.data.length-1].freq))),e}},{key:"firstColumnName",get:function(){return this.props.label?this.props.label:Ut.CATEGORY}},{key:"columns",get:function(){var e=this;return[{name:this.firstColumnName,render:function(t){return n.createElement("div",{className:q.a.labelContent,onMouseEnter:function(r){e.tooltipLabelMouseEnter(t.value)},onMouseLeave:e.tooltipLabelMouseLeave},n.createElement("svg",{width:"18",height:"12",className:q.a.labelContentSVG},n.createElement("g",null,n.createElement("rect",{x:"0",y:"0",width:"12",height:"12",fill:t.color}))),n.createElement(F.m,{text:t.value}))},headerRender:function(){var t={},r=e.firstColumnName;return e.props.label||(t.opacity=0,r="."),n.createElement(F.m,{style:t,text:r,hideTooltip:!0})},tooltip:Object(b.N)(this.firstColumnName,this.props.labelDescription?this.props.labelDescription:""),filter:function(e,t,r){return e.value.toUpperCase().includes(r)},sortBy:function(e){return e.value},defaultSortDirection:"asc",width:this.columnsWidth[Ut.CATEGORY]},{name:Ut.NUMBER,headerRender:function(){return n.createElement("div",{style:{marginLeft:e.cellMargin[Ut.NUMBER]}},"#")},render:function(t){return n.createElement(jt.a,{checked:a.a.includes(e.props.filters,t.value),onChange:function(r){return e.onUserSelection(t.value)},labelProps:{style:{display:"flex",justifyContent:"space-between",marginLeft:e.cellMargin[Ut.NUMBER],marginRight:e.cellMargin[Ut.NUMBER]}},inputProps:{className:q.a.autoMarginCheckbox}},t.count.toLocaleString())},tooltip:n.createElement("span",null,"Number of"," ",this.props.patientAttribute?"patients":"samples"),filter:function(e,t){return e.count.toString().includes(t)},sortBy:function(e){return e.count},defaultSortDirection:"desc",width:this.columnsWidth[Ut.NUMBER]},{name:Ut.FREQ,headerRender:function(){return n.createElement("div",{style:{marginLeft:e.cellMargin[Ut.FREQ]}},"Freq")},render:function(t){return n.createElement("span",{style:{flexDirection:"row-reverse",display:"flex",marginRight:e.cellMargin[Ut.FREQ]}},t.freq)},tooltip:n.createElement("span",null,"Percentage of"," ",this.props.patientAttribute?"patients":"samples"),filter:function(e,t){return e.freq.includes(t)},sortBy:function(e){return e.percentage},defaultSortDirection:"desc",width:this.columnsWidth[Ut.FREQ]}]}},{key:"selectedClinicalValues",get:function(){var e=a.a.keyBy(this.props.filters);return this.props.data.filter(function(t){return t.value in e})}},{key:"extraButtons",get:function(){var e=this;return this.props.openComparisonPage?[{content:n.createElement("div",{style:{display:"flex",alignItems:"center"}},n.createElement(Ct,{width:16,style:{marginRight:5}}),"Compare"),onClick:this.props.openComparisonPage,isDisabled:function(){return 1===e.selectedClinicalValues.length}}]:[]}}])&&Nt(r.prototype,o),i&&Nt(r,i),t}();Object.defineProperty(Kt,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{width:300,showAddRemoveAllButtons:!1}}),Vt([u.observable],Kt.prototype,"sortBy",void 0),Vt([u.observable],Kt.prototype,"sortDirection",void 0),Vt([u.computed],Kt.prototype,"columnsWidth",null),Vt([u.computed],Kt.prototype,"cellMargin",null),Vt([u.computed],Kt.prototype,"firstColumnName",null),Vt([u.computed],Kt.prototype,"columns",null),Vt([y.default],Kt.prototype,"onUserSelection",null),Vt([y.default],Kt.prototype,"tooltipLabelMouseEnter",null),Vt([y.default],Kt.prototype,"tooltipLabelMouseLeave",null),Vt([y.default],Kt.prototype,"addAll",null),Vt([y.default],Kt.prototype,"removeAll",null),Vt([u.action.bound],Kt.prototype,"afterSorting",null),Vt([u.computed],Kt.prototype,"selectedClinicalValues",null),Vt([u.computed],Kt.prototype,"extraButtons",null);var Wt=Kt=Vt([s.observer],Kt),Ht=r(20),zt=r(50);function Qt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Yt(e,t,r){return t&&Jt(e.prototype,t),r&&Jt(e,r),e}function Zt(e,t){return!t||"object"!==rr(t)&&"function"!=typeof t?$t(e):t}function Xt(e){return(Xt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $t(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function er(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tr(e,t)}function tr(e,t){return(tr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rr(e){return(rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var nr=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":rr(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},or=function(e){function t(e){var r;return Qt(this,t),r=Zt(this,Xt(t).call(this,e)),Object.defineProperty($t(r),"svg",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty($t(r),"isTooltipHovered",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty($t(r),"tooltipHighlightedRow",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object(u.makeObservable)($t(r)),r}return er(t,n["Component"]),Yt(t,[{key:"onUserSelection",value:function(e){var t=Object(u.toJS)(this.filters);a.a.includes(t,e)?t=a.a.filter(t,function(t){return t!==e}):t.push(e),this.props.onUserSelection(t)}},{key:"highlightedRow",value:function(e){this.tooltipHighlightedRow=e}},{key:"downloadData",value:function(){return this.props.data.map(function(e){return e.value+"\t"+e.count}).join("\n")}},{key:"toSVGDOMNode",value:function(){return Object(b.Jb)(this.svg,{legendGroupSelector:".studyViewPieChartLegend",chartGroupSelector:".studyViewPieChartGroup",centerLegend:!0})}},{key:"x",value:function(e){return e.value}},{key:"y",value:function(e){return e.count}},{key:"label",value:function(e){return e.count/this.totalCount>.5?e.count.toLocaleString():this.maxLength(e.count/this.totalCount,this.pieSliceRadius/3)<Object(F.mb)(e.count.toLocaleString(),F.a.axis.style.tickLabels.fontFamily,"".concat(F.a.axis.style.tickLabels.fontSize,"px"))?"":e.count.toLocaleString()}},{key:"maxLength",value:function(e,t){return Math.abs(Math.tan(Math.PI*e/2))*t*2}},{key:"render",value:function(){var e=this;return n.createElement(F.i,{placement:this.props.placement,overlay:n.createElement(Wt,{width:300,height:150,openComparisonPage:this.props.openComparisonPage,data:this.props.data,label:this.props.label,labelDescription:this.props.labelDescription,patientAttribute:this.props.patientAttribute,showAddRemoveAllButtons:!0,filters:this.filters,highlightedRow:this.highlightedRow,onUserSelection:this.props.onUserSelection}),destroyTooltipOnHide:!0,trigger:["hover"]},n.createElement("svg",{width:this.props.width,height:this.props.height,ref:function(t){return e.svg=t}},this.victoryPie,this.victoryLegend))}},{key:"filters",get:function(){var e=a.a.reduce(this.props.data,function(e,t){return e[t.value.toLowerCase()]=t.value,e},{});return this.props.filters.map(function(t){return e[t.toLowerCase()]||t})}},{key:"userEvents",get:function(){return[{target:"data",eventHandlers:this.pieSliceOnClickEventHandlers},{target:"labels",eventHandlers:this.pieSliceOnClickEventHandlers}]}},{key:"pieSliceOnClickEventHandlers",get:function(){var e=this;return{onClick:function(){return[{target:"data",mutation:function(t){e.onUserSelection(t.datum.value)}}]}}}},{key:"totalCount",get:function(){return a.a.sumBy(this.props.data,function(e){return e.count})}},{key:"fill",get:function(){var e=this;return function(t){return a.a.isEmpty(e.filters)||a.a.includes(e.filters,t.value)?t.color:Ht.n}}},{key:"stroke",get:function(){var e=this;return function(t){return!a.a.isEmpty(e.filters)&&a.a.includes(e.filters,t.value)?"#cccccc":null}}},{key:"strokeWidth",get:function(){var e=this;return function(t){return!a.a.isEmpty(e.filters)&&a.a.includes(e.filters,t.value)?3:0}}},{key:"fillOpacity",get:function(){var e=this;return function(t){return a.a.isEmpty(e.filters)||a.a.includes(e.filters,t.value)?1:"0.5"}}},{key:"chartSize",get:function(){return Math.min(this.props.width,this.props.height)}},{key:"pieSliceRadius",get:function(){return(this.props.width>this.props.height?this.props.height:this.props.width)/2-A.d.thresholds.piePadding}},{key:"victoryPie",get:function(){return n.createElement(kt.VictoryPie,{standalone:!1,theme:F.a,containerComponent:n.createElement(kt.VictoryContainer,{responsive:!1}),groupComponent:n.createElement("g",{className:"studyViewPieChartGroup",transform:"translate(0, -12)"}),width:this.props.width,height:this.chartSize,labelRadius:this.pieSliceRadius/3,radius:this.pieSliceRadius,labels:this.label,data:this.props.data,dataComponent:n.createElement(ar,null),labelComponent:n.createElement(kt.VictoryLabel,null),events:this.userEvents,style:{data:{fill:Object(zt.a)(this.fill,"#cccccc"),stroke:Object(zt.a)(this.stroke,"0x000000"),strokeWidth:Object(zt.a)(this.strokeWidth,0),fillOpacity:Object(zt.a)(this.fillOpacity,1),cursor:"pointer"},labels:{fill:"white",cursor:"pointer"}},x:this.x,y:this.y})}},{key:"victoryLegend",get:function(){var e=this,t=this.props.data.map(function(t){return{name:"".concat(t.value,": ").concat(t.count," (").concat(Object(b.ab)(100*t.count/e.totalCount),")")}}),r=this.props.data.map(function(e){return e.color}),o=a.a.cloneDeep(F.a);return o.legend.style.data={type:"square",size:5,strokeWidth:0,stroke:"black"},n.createElement(kt.VictoryLegend,{standalone:!1,theme:o,colorScale:r,x:0,y:this.props.height+1,rowGutter:-10,title:this.props.label||"Legend",centerTitle:!0,style:{title:{fontWeight:"bold"}},data:t,groupComponent:n.createElement("g",{className:"studyViewPieChartLegend"})})}}]),t}();nr([u.computed],or.prototype,"filters",null),nr([y.default],or.prototype,"onUserSelection",null),nr([u.observable],or.prototype,"isTooltipHovered",void 0),nr([u.observable],or.prototype,"tooltipHighlightedRow",void 0),nr([u.action.bound],or.prototype,"highlightedRow",null),nr([u.computed],or.prototype,"totalCount",null),nr([u.computed],or.prototype,"fill",null),nr([u.computed],or.prototype,"stroke",null),nr([u.computed],or.prototype,"strokeWidth",null),nr([u.computed],or.prototype,"fillOpacity",null),nr([y.default],or.prototype,"x",null),nr([y.default],or.prototype,"y",null),nr([y.default],or.prototype,"label",null),nr([u.computed],or.prototype,"chartSize",null),nr([u.computed],or.prototype,"pieSliceRadius",null),nr([u.computed],or.prototype,"victoryPie",null),nr([u.computed],or.prototype,"victoryLegend",null);var ir=or=nr([s.observer],or),ar=function(e){function t(){return Qt(this,t),Zt(this,Xt(t).apply(this,arguments))}return er(t,n["Component"]),Yt(t,[{key:"render",value:function(){var e=this.props;return n.createElement("g",null,n.createElement(kt.Slice,this.props),n.createElement("title",null,"".concat(e.datum.value,":").concat(e.datum.count)))}}]),t}(),sr=r(930);function lr(e){return(lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ur(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function cr(e,t){return!t||"object"!==lr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pr(e){return(pr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dr(e,t){return(dr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var fr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),cr(this,pr(t).apply(this,arguments))}var r,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dr(e,t)}(t,kt["VictoryLabel"]),r=t,(o=[{key:"renderElements",value:function(e,t){var r=e.datum,o=e.active,i=e.inline,a=e.className,s=e.title,l=e.desc,u=e.events,c=this.getStyles(e),p=this.getHeight(e,"lineHeight"),d=e.textAnchor?kt.Helpers.evaluateProp(e.textAnchor,r,o):"start",f=e.dx?kt.Helpers.evaluateProp(e.dx,r,o):0,h=this.getDy(e,c,t,p),m=this.getTransform(e,c),b=void 0!==e.x?e.x:this.getPosition(e,"x"),y=void 0!==e.y?e.y:this.getPosition(e,"y"),g={x:i?void 0:e.x,dx:f,textAnchor:c[0].textAnchor||d,style:c[0],key:c[0].textAnchor||d},v=[];return t.length>1?(v.push(n.createElement("tspan",g,t[0])),v.push(n.createElement("tspan",{dy:-c[0].fontSize/2,style:Object.assign(Object.assign({},c[0]),{fontSize:.7*c[0].fontSize})},t[1]))):v.push(n.createElement("tspan",g,t[0])),n.cloneElement(e.textComponent,{dx:f,dy:h,x:b,y:y,events:u,transform:m,className:a,title:s,desc:l},v)}}])&&ur(r.prototype,o),i&&ur(r,i),t}(),hr=r(999),mr=r(29),br=r.n(mr);function yr(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function gr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vr(e){return(vr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cr(e,t){return(Cr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Or(e){return(Or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var wr=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":Or(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a};var Er,Tr=((Er=a.a.cloneDeep(F.a)).axis.style.tickLabels.fontSize*=.85,Er),_r=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=!(o=vr(t).call(this,e))||"object"!==Or(o)&&"function"!=typeof o?Sr(n):o,Object.defineProperty(Sr(r),"svgContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(Sr(r),"mousePosition",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0}}),Object.defineProperty(Sr(r),"currentBarIndex",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(Sr(r),"toolTipModel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object(u.makeObservable)(Sr(r)),r}var r,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cr(e,t)}(t,n["Component"]),r=t,(o=[{key:"onSelection",value:function(e){var t=a.a.flatten(e.map(function(e){return e.data.map(function(e){return e.dataBin})}));this.props.onUserSelection(t)}},{key:"isDataBinSelected",value:function(e,t){return a.a.some(t,function(t){return void 0!==t.start&&void 0!==t.end?t.start<=e.start&&t.end>=e.end:void 0!==t.start&&void 0===t.end?e.start>=t.start:void 0===t.start&&void 0!==t.end?e.end<=t.end:void 0!==t.value&&t.value===e.specialValue})}},{key:"toSVGDOMNode",value:function(){return this.svgContainer.firstChild}},{key:"onMouseMove",value:function(e){this.mousePosition={x:e.pageX,y:e.pageY}}},{key:"render",value:function(){var e=this;return n.createElement("div",{onMouseMove:this.onMouseMove},this.barData.length>0&&n.createElement(kt.VictoryChart,{containerComponent:n.createElement(kt.VictorySelectionContainer,{containerRef:function(t){return e.svgContainer=t},selectionDimension:"x",onSelection:this.onSelection}),style:{parent:{width:this.props.width,height:this.props.height}},height:this.props.height-this.bottomPadding,width:this.props.width,padding:{left:40,right:20,top:10,bottom:this.bottomPadding},theme:Tr},n.createElement(kt.VictoryAxis,{tickValues:this.tickValuesBasedOnNA,tickFormat:function(t){return e.tickFormat[t-1]},domain:[0,this.maximumX],tickLabelComponent:n.createElement(fr,null),style:{tickLabels:{angle:50,verticalAnchor:"start",textAnchor:"start"}}}),n.createElement(kt.VictoryAxis,{dependentAxis:!0,tickFormat:function(e){return Number.isInteger(e)?e.toFixed(0):""}}),n.createElement(kt.VictoryBar,{barRatio:this.barRatio,style:{data:{fill:function(t){return e.isDataBinSelected(t.dataBin,e.props.filters)||0===e.props.filters.length?A.d.colors.theme.primary:Ht.n}}},data:this.barDataBasedOnNA,events:this.barPlotEvents}),this.labelShowingNA),br.a.createPortal(n.createElement(hr.c,{mousePosition:this.mousePosition,windowWidth:C.a.size.width,model:this.toolTipModel,totalBars:this.barData.length,currentBarIndex:this.currentBarIndex}),document.body))}},{key:"numericalBins",get:function(){return Object(b.z)(this.props.data)}},{key:"categoryBins",get:function(){return Object(b.y)(this.props.data)}},{key:"numericalData",get:function(){return Object(b.F)(this.numericalBins)}},{key:"categoricalData",get:function(){return Object(b.E)(this.categoryBins,this.numericalTickFormat.length)}},{key:"numericalTickFormat",get:function(){return Object(b.A)(this.numericalBins).map(function(e){return e.includes("^")?e.split("^"):e})}},{key:"barData",get:function(){return[].concat(yr(this.numericalData),yr(this.categoricalData))}},{key:"barDataBasedOnNA",get:function(){return this.props.showNAChecked?this.barData:this.barData.filter(kr)}},{key:"categories",get:function(){return this.categoryBins.map(function(e){return void 0===e.specialValue?"".concat(e.start):e.specialValue})}},{key:"tickValues",get:function(){for(var e=[],t=1;t<=this.numericalTickFormat.length+this.categories.length;t++)e.push(t);return e}},{key:"barDataWithNA",get:function(){return this.barData.filter(Pr)}},{key:"numberOfNA",get:function(){return this.barDataWithNA.length}},{key:"tickValuesBasedOnNA",get:function(){return this.props.showNAChecked?this.tickValues:this.tickValues.slice(0,-this.numberOfNA)}},{key:"tickFormat",get:function(){return[].concat(yr(this.numericalTickFormat),yr(this.categories))}},{key:"bottomPadding",get:function(){return Object(F.ab)(Tr.axis.style.tickLabels.fontFamily,Tr.axis.style.tickLabels.fontSize,this.tickFormat,50,40,10)}},{key:"barRatio",get:function(){return(Object(b.Cb)(this.numericalBins)?this.barDataBasedOnNA.length/(this.barDataBasedOnNA.length+1):1)*A.d.thresholds.barRatio}},{key:"barPlotEvents",get:function(){var e=this;return[{target:"data",eventHandlers:{onMouseEnter:function(){return[{target:"data",mutation:function(t){e.currentBarIndex=t.datum.eventKey,e.toolTipModel={start:e.barData[e.currentBarIndex].dataBin.start,end:e.barData[e.currentBarIndex].dataBin.end,special:e.barData[e.currentBarIndex].dataBin.specialValue,sampleCount:t.datum.y}}}]},onMouseLeave:function(){return[{target:"data",mutation:function(){e.toolTipModel=null}}]}}}]}},{key:"maximumX",get:function(){return this.tickValuesBasedOnNA[this.tickValuesBasedOnNA.length-1]+1}},{key:"maximumY",get:function(){var e=this.barData.filter(kr);return Math.max.apply(Math,yr(e.map(function(e){return e.y})))}},{key:"labelShowingNA",get:function(){if(!this.props.showNAChecked){var e=this.barDataWithNA.map(function(e){return e.dataBin.count}).join(", ");return n.createElement(kt.VictoryLabel,{text:"NA: ".concat(e),textAnchor:"end",datum:{x:this.maximumX,y:this.maximumY},style:{fontFamily:Tr.axis.style.tickLabels.fontFamily,fontSize:Tr.axis.style.tickLabels.fontSize}})}return null}}])&&gr(r.prototype,o),i&&gr(r,i),t}();wr([u.observable.ref],_r.prototype,"mousePosition",void 0),wr([u.observable],_r.prototype,"currentBarIndex",void 0),wr([u.observable],_r.prototype,"toolTipModel",void 0),wr([y.default],_r.prototype,"onSelection",null),wr([u.computed],_r.prototype,"numericalBins",null),wr([u.computed],_r.prototype,"categoryBins",null),wr([u.computed],_r.prototype,"numericalData",null),wr([u.computed],_r.prototype,"categoricalData",null),wr([u.computed],_r.prototype,"numericalTickFormat",null),wr([u.computed],_r.prototype,"barData",null),wr([u.computed],_r.prototype,"barDataBasedOnNA",null),wr([u.computed],_r.prototype,"categories",null),wr([u.computed],_r.prototype,"tickValues",null),wr([u.computed],_r.prototype,"barDataWithNA",null),wr([u.computed],_r.prototype,"numberOfNA",null),wr([u.computed],_r.prototype,"tickValuesBasedOnNA",null),wr([u.computed],_r.prototype,"tickFormat",null),wr([u.computed],_r.prototype,"bottomPadding",null),wr([u.computed],_r.prototype,"barRatio",null),wr([y.default],_r.prototype,"onMouseMove",null),wr([u.computed],_r.prototype,"maximumX",null),wr([u.computed],_r.prototype,"maximumY",null),wr([u.computed],_r.prototype,"labelShowingNA",null);var Ar=_r=wr([s.observer],_r),Pr=function(e){return"NA"===e.dataBin.specialValue},kr=function(e){return!Pr(e)},jr=r(851);function Ir(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Dr=r(317);function Nr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Rr(e){return(Rr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mr(e,t){return(Mr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fr(e){return(Fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var xr=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":Fr(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},Lr=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=!(o=Rr(t).call(this,e))||"object"!==Fr(o)&&"function"!=typeof o?Gr(n):o,Object.defineProperty(Gr(r),"tooltipModel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(Gr(r),"pointHovered",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(Gr(r),"mouseIsDown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(Gr(r),"mouseEvents",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.sb)(Gr(r))}),Object.defineProperty(Gr(r),"xAxis",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(Gr(r),"yAxis",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(Gr(r),"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(Gr(r),"svg",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object(u.makeObservable)(Gr(r)),r}var r,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mr(e,t)}(t,n["Component"]),r=t,(o=[{key:"containerRef",value:function(e){this.container=e}},{key:"svgRef",value:function(e){this.svg=e,this.props.svgRef&&this.props.svgRef(this.svg)}},{key:"toSVGDOMNode",value:function(){return this.svg}},{key:"tickFormat",value:function(e,t,r){return Object(F.Db)(e,r)}},{key:"onMouseDown",value:function(){this.mouseIsDown=!0}},{key:"onMouseUp",value:function(){this.mouseIsDown=!1}},{key:"onSelection",value:function(e,t){if(this.xAxis&&this.yAxis){var r=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY,a=!0,s=!1,l=void 0;try{for(var u,c=e[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var p=u.value,d=!0,f=!1,h=void 0;try{for(var m,b=p.data[Symbol.iterator]();!(d=(m=b.next()).done);d=!0){var y=m.value;r=Math.min(r,y.x),n=Math.min(n,y.y),o=Math.max(o,y.x),i=Math.max(i,y.y)}}catch(e){f=!0,h=e}finally{try{d||null==b.return||b.return()}finally{if(f)throw h}}}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}o+=this.props.xBinSize,i+=this.props.yBinSize,Math.abs(i-this.dataDomain.y[1])<5e-5&&(i+=1),Math.abs(o-1)<5e-5&&(o+=1),r=+r.toFixed(2),o=+o.toFixed(2),n=+n.toFixed(2),i=+i.toFixed(2),this.props.onSelection({xStart:r,xEnd:o,yStart:n,yEnd:i})}}},{key:"isSelected",value:function(e){if(this.props.selectionBounds){var t=this.props.selectionBounds,r=!0,n=!0;return void 0!==t.xStart&&void 0!==t.xEnd?r=e.binX>=t.xStart&&e.binX<t.xEnd:void 0!==t.xEnd?r=e.binX<t.xEnd:void 0!==t.xStart&&(r=e.binX>=t.xStart),void 0!==t.yStart&&void 0!==t.yEnd?n=e.binY>=t.yStart&&e.binY<t.yEnd:void 0!==t.yEnd?n=e.binY<t.yEnd:void 0!==t.yStart&&(n=e.binY>=t.yStart),r&&n}return!0}},{key:"xAxisRef",value:function(e){this.xAxis=e}},{key:"yAxisRef",value:function(e){this.yAxis=e}},{key:"render",value:function(){var e=this;return n.createElement("div",null,n.createElement("div",{style:{width:this.props.width,height:this.props.height,position:"relative"},ref:this.containerRef,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp},n.createElement(kt.VictoryChart,{theme:F.a,containerComponent:n.createElement(F.T,{onSelection:this.onSelection,containerRef:function(t){t&&e.svgRef(t.firstChild)},legend:this.legend&&this.legend.legend,gradient:this.legend&&this.legend.gradient}),width:this.props.width,height:this.props.height,standalone:!0,domainPadding:15,singleQuadrantDomainPadding:!1},this.title,n.createElement(kt.VictoryAxis,{ref:this.xAxisRef,domain:this.plotDomain.x,orientation:"bottom",offsetY:50,crossAxis:!1,tickCount:8,tickFormat:this.tickFormat,axisLabelComponent:n.createElement(kt.VictoryLabel,{dy:20}),label:this.props.axisLabelX}),n.createElement(kt.VictoryAxis,{ref:this.yAxisRef,domain:this.plotDomain.y,orientation:"left",offsetX:50,crossAxis:!1,tickCount:8,tickFormat:this.tickFormat,dependentAxis:!0,axisLabelComponent:n.createElement(kt.VictoryLabel,{dy:-27}),label:this.props.axisLabelY}),this.scatters),n.createElement("span",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(255,255,255,0.8)",display:this.props.isLoading?"block":"none"}}),n.createElement(xe.a,{isLoading:!!this.props.isLoading,style:{position:"absolute",top:"50%",left:"50%",marginLeft:-10}})),this.tooltipModel&&this.props.tooltip&&!this.mouseIsDown&&n.createElement(F.N,{container:this.container,targetHovered:this.pointHovered,targetCoords:{x:this.tooltipModel.x,y:this.tooltipModel.y},overlay:this.props.tooltip(this.tooltipModel.datum)}))}},{key:"title",get:function(){return this.props.title?n.createElement(kt.VictoryLabel,{style:{fontWeight:"bold",textAnchor:"middle"},x:this.props.width/2,y:"1.2em",text:this.props.title}):null}},{key:"plotDomain",get:function(){return{x:[0,1],y:[0,Math.max(this.props.yBinsMin,this.dataDomain.y[1])]}}},{key:"dataDomain",get:function(){var e={x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY},t={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},r=!0,n=!1,o=void 0;try{for(var i,a=this.data[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var s=i.value;e.x=Math.max(s.x+this.props.xBinSize,e.x),e.y=Math.max(s.y+this.props.yBinSize,e.y),t.x=Math.min(s.x,t.x),t.y=Math.min(s.y,t.y)}}catch(e){n=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw o}}return{x:[0,1],y:[0,e.y]}}},{key:"data",get:function(){return this.props.data.map(function(e){return Object.assign({},e,{x:e.binX,y:e.binY})})}},{key:"plotComputations",get:function(){var e=Number.NEGATIVE_INFINITY,t=Number.POSITIVE_INFINITY,r=[],n=[],o=!0,i=!1,s=void 0;try{for(var l,u=this.data[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;this.isSelected(c)?r.push(c):n.push(c)}}catch(e){i=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(i)throw s}}var p=a.a.groupBy(r,function(r){var n=r.count;return e=Math.max(n,e),t=Math.min(n,t),n}),d=a.a.groupBy(n,function(r){var n=r.count;return e=Math.max(n,e),t=Math.min(n,t),n});t===e&&(t=1);var f,h,m,b=Math.log(e),y=Math.log(t);return t===e?(f=function(){return 0},m=function(){return Object(Dr.a)(0)},h=null):(f=function(e){return(Math.log(e)-y)/(b-y)},h=function(e){return Math.exp(e*(b-y)/.75+y)},m=function(e){return Object(Dr.a)(.75*e)}),{selectedDataByAreaCount:p,unselectedDataByAreaCount:d,colorCoordToCount:h,colorCoordMax:.75,countToSelectedColor:function(e){return m(f(e))},countToUnselectedColor:function(e){return"rgb(200,200,200)"},colorCoordToColor:m,countMax:e,countMin:t}}},{key:"scatters",get:function(){var e=this;if(0===this.data.length)return[];for(var t=[],r=[{dataByAreaCount:this.plotComputations.selectedDataByAreaCount,countToColor:this.plotComputations.countToSelectedColor,size:3},{dataByAreaCount:this.plotComputations.unselectedDataByAreaCount,countToColor:this.plotComputations.countToUnselectedColor,size:2.5}],o=function(){var r=s[i];a.a.forEach(r.dataByAreaCount,function(o,i){var a=r.countToColor(parseInt(i,10));t.push(n.createElement(kt.VictoryScatter,{key:"".concat(i),style:{data:{fill:a,stroke:"black",strokeWidth:1,strokeOpacity:0}},size:r.size,symbol:"circle",data:o,events:e.mouseEvents}))})},i=0,s=r;i<s.length;i++)o();return t}},{key:"legend",get:function(){var e=this.plotComputations.colorCoordToCount;if(e){for(var t=[],r=0;r<30;r++)t.push(n.createElement("stop",{offset:"".concat((r/30*100).toFixed(0),"%"),stopColor:this.plotComputations.colorCoordToColor(r/30)}));var o=n.createElement("linearGradient",{id:"legendGradient",key:"legendGradient",x1:"0",y1:"1",x2:"0",y2:"0"},t),i=this.props.width-45,a=this.plotComputations.countMax-this.plotComputations.countMin>=2,s=a?68:38,l=n.createElement("rect",{fill:"url(#".concat("legendGradient",")"),x:i,y:70,width:10,height:s}),u=[n.createElement("text",{fontSize:11,x:i+10+4,y:70,dy:"1em"},this.plotComputations.countMax.toLocaleString()),n.createElement("text",{fontSize:11,x:i+10+4,y:70+s,dy:"-0.3em"},this.plotComputations.countMin.toLocaleString())];a&&u.push(n.createElement("text",{fontSize:11,x:i+10+4,y:70+s/2,dy:"0.3em"},Math.round(e(.5)).toLocaleString()));var c=n.createElement("text",{fontSize:11,x:i,y:70,dy:"-0.5em",dx:"-12px"},"# samples");return{gradient:o,legend:n.createElement("g",null,c,l,u)}}return null}}])&&Nr(r.prototype,o),i&&Nr(r,i),t}();xr([u.observable],Lr.prototype,"tooltipModel",void 0),xr([u.observable],Lr.prototype,"pointHovered",void 0),xr([u.observable],Lr.prototype,"mouseIsDown",void 0),xr([u.observable.ref],Lr.prototype,"container",void 0),xr([y.default],Lr.prototype,"containerRef",null),xr([y.default],Lr.prototype,"svgRef",null),xr([u.computed],Lr.prototype,"plotDomain",null),xr([u.computed],Lr.prototype,"dataDomain",null),xr([y.default],Lr.prototype,"tickFormat",null),xr([y.default],Lr.prototype,"onMouseDown",null),xr([y.default],Lr.prototype,"onMouseUp",null),xr([y.default],Lr.prototype,"onSelection",null),xr([u.computed],Lr.prototype,"data",null),xr([u.computed],Lr.prototype,"plotComputations",null),xr([u.computed],Lr.prototype,"scatters",null),xr([u.computed],Lr.prototype,"legend",null),xr([y.default],Lr.prototype,"xAxisRef",null),xr([y.default],Lr.prototype,"yAxisRef",null);var Br=Lr=xr([s.observer],Lr),Ur=r(875),Vr=r(986),qr=r(417);function Kr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Wr(e){return(Wr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zr(e,t){return(zr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qr(e){return(Qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Jr=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":Qr(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},Yr=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=!(o=Wr(t).call(this,e))||"object"!==Qr(o)&&"function"!=typeof o?Hr(n):o,Object.defineProperty(Hr(r),"isVisible",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object(u.makeObservable)(Hr(r)),r}var r,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zr(e,t)}(t,n["Component"]),r=t,(o=[{key:"onVisibleChange",value:function(e){this.isVisible=e}},{key:"render",value:function(){var e=this,t=i.includes(this.props.selectedGenes,this.props.hugoGeneSymbol);return n.createElement(F.i,{placement:"left",disabled:!this.props.isCancerGene,overlay:Object(x.e)(this.props.hugoGeneSymbol,t,this.props.isCancerGene,this.props.oncokbAnnotated,this.props.isOncogene,this.props.isTumorSuppressorGene),destroyTooltipOnHide:!0},n.createElement("div",{"data-test":"geneNameCell",className:ct()(q.a.geneSymbol,q.a.displayFlex),onMouseEnter:function(){return e.onVisibleChange(!0)},onMouseLeave:function(){return e.onVisibleChange(!1)},onClick:function(){return e.props.onGeneSelect(e.props.hugoGeneSymbol)}},n.createElement(F.m,{text:this.props.hugoGeneSymbol,hideTooltip:this.props.isCancerGene}),n.createElement("span",{style:{marginLeft:5}},n.createElement(Be.If,{condition:t},n.createElement(Be.Then,null,n.createElement("i",{className:"fa fa-check-square-o"})),n.createElement(Be.Else,null,n.createElement(Be.If,{condition:this.isVisible},n.createElement("i",{className:"fa fa-square-o"}))))),n.createElement(Be.If,{condition:!i.isUndefined(this.props.qValue)},n.createElement("span",{style:{marginLeft:2,marginTop:2}},n.createElement(Be.If,{condition:this.props.tableType===x.a.MUTATION},n.createElement(Be.Then,null,n.createElement(qr.a,{qValue:this.props.qValue})),n.createElement(Be.Else,null,n.createElement(Vr.a,{qValue:this.props.qValue})))))))}}])&&Kr(r.prototype,o),a&&Kr(r,a),t}();function Zr(e){return(Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $r(e,t){return!t||"object"!==Zr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function en(e){return(en=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tn(e,t){return(tn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Jr([u.observable],Yr.prototype,"isVisible",void 0),Jr([u.action.bound],Yr.prototype,"onVisibleChange",null),Yr=Jr([s.observer],Yr);var rn,nn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),$r(this,en(t).apply(this,arguments))}var r,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tn(e,t)}(t,n["Component"]),r=t,(o=[{key:"render",value:function(){return n.createElement("div",{style:{marginLeft:this.props.cellMargin},className:q.a.displayFlex,"data-test":this.props.dataTest},this.props.showFilter&&n.createElement(F.i,{mouseEnterDelay:0,placement:"top",disabled:!this.props.overlay,overlay:this.props.overlay||null},n.createElement("div",{onClick:this.props.onClickCallback,className:q.a.displayFlex},n.createElement("span",{"data-test":"header-filter-icon",className:ct()(q.a.cancerGeneIcon,q.a.displayFlex),style:{color:this.props.isFiltered?Ht.p:Ht.o}},n.createElement("i",{className:"fa fa-filter"})))),this.props.children)}}])&&Xr(r.prototype,o),i&&Xr(r,i),t}();function on(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function an(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function sn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ln(e,t){return!t||"object"!==hn(t)&&"function"!=typeof t?un(e):t}function un(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cn(e){return(cn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dn(e,t)}function dn(e,t){return(dn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hn(e){return(hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var mn,bn=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":hn(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a};!function(e){e.GENE="Gene",e.MOLECULAR_PROFILE="Molecular Profile",e.CASE_LIST="Name",e.NUMBER_STRUCTURAL_VARIANTS="# SV",e.NUMBER_MUTATIONS="# Mut",e.CYTOBAND="Cytoband",e.CNA="CNA",e.NUMBER="#",e.FREQ="Freq"}(mn||(mn={}));var yn=(fn(rn={},mn.GENE,.35),fn(rn,mn.MOLECULAR_PROFILE,.6),fn(rn,mn.CASE_LIST,.6),fn(rn,mn.NUMBER_MUTATIONS,.25),fn(rn,mn.NUMBER_STRUCTURAL_VARIANTS,.2),fn(rn,mn.NUMBER,.25),fn(rn,mn.FREQ,.15),fn(rn,mn.CYTOBAND,.25),fn(rn,mn.CNA,.14),rn),gn=function(e){function t(){return sn(this,t),ln(this,cn(t).apply(this,arguments))}return pn(t,It["a"]),t}(),vn=function(e){function t(e,r){var o;return sn(this,t),o=ln(this,cn(t).call(this,e,r)),Object.defineProperty(un(o),"sortBy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(un(o),"sortDirection",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(un(o),"modalSettings",{enumerable:!0,configurable:!0,writable:!0,value:{modalOpen:!1,modalPanelName:""}}),Object.defineProperty(un(o),"getDefaultColumnDefinition",{enumerable:!0,configurable:!0,writable:!0,value:function(e,t,r){var a;return(fn(a={},mn.GENE,{name:e,headerRender:function(){return n.createElement(nn,{cellMargin:r,dataTest:"gene-column-header",className:q.a.displayFlex,showFilter:!!o.props.cancerGeneFilterEnabled,isFiltered:!!o.isFilteredByCancerGeneList,onClickCallback:o.toggleCancerGeneFilter},n.createElement("span",null,e))},render:function(e){return n.createElement(Yr,{tableType:o.props.tableType,selectedGenes:o.props.selectedGenes,hugoGeneSymbol:e.label,qValue:e.qValue,isCancerGene:e.isCancerGene,oncokbAnnotated:e.oncokbAnnotated,isOncogene:e.isOncokbOncogene,isTumorSuppressorGene:e.isOncokbTumorSuppressorGene,onGeneSelect:o.props.onGeneSelect})},sortBy:function(e){return e.label},defaultSortDirection:"asc",filter:function(e,t,r){return e.label.toUpperCase().includes(r)},width:t}),fn(a,mn.MOLECULAR_PROFILE,{name:e,headerRender:function(){return n.createElement("div",{style:{marginLeft:r},className:q.a.displayFlex,"data-test":"profile-column-header"},e)},render:function(e){return n.createElement("div",{className:q.a.labelContent},n.createElement(F.m,{text:e.label}))},sortBy:function(e){return e.label},defaultSortDirection:"asc",filter:function(e,t,r){return e.label.toUpperCase().includes(r)},width:t}),fn(a,mn.CASE_LIST,{name:e,headerRender:function(){return n.createElement("div",{style:{marginLeft:r},className:q.a.displayFlex,"data-test":"profile-column-header"},e)},render:function(e){return n.createElement("div",{className:q.a.labelContent},n.createElement(F.m,{text:e.label}))},sortBy:function(e){return e.label},defaultSortDirection:"asc",filter:function(e,t,r){return e.label.toUpperCase().includes(r)},width:t}),fn(a,mn.NUMBER,{name:e,tooltip:n.createElement("span",null,Object(x.g)(o.props.tableType,!1)),headerRender:function(){return n.createElement(nn,{cellMargin:r,dataTest:"number-column-header",className:q.a.displayFlex,showFilter:!!o.props.alterationFilterEnabled,isFiltered:!!o.props.filterAlterations},n.createElement("span",null,e))},render:function(e){return n.createElement(jt.a,{checked:o.isChecked(e.uniqueKey),disabled:o.isDisabled(e.uniqueKey),onChange:function(t){return o.toggleSelectRow(e.uniqueKey)},labelProps:{style:{display:"flex",justifyContent:"space-between",marginLeft:r,marginRight:r}},inputProps:{className:q.a.autoMarginCheckbox}},n.createElement("span",{"data-test":"numberOfAlteredCasesText"},e.numberOfAlteredCases.toLocaleString()))},sortBy:function(e){return e.numberOfAlteredCases},defaultSortDirection:"desc",filter:function(e,t){return i.toString(e.numberOfAlteredCases).includes(t)},width:t}),fn(a,mn.FREQ,{name:e,tooltip:n.createElement("span",null,Object(x.g)(o.props.tableType,!0)),headerRender:function(){return n.createElement("div",{style:{marginLeft:r}},"Freq")},render:function(e){return Object(x.c)(o.props.tableType,e.numberOfProfiledCases,e.numberOfAlteredCases,e.matchingGenePanelIds||[],o.toggleModal,{marginLeft:r})},sortBy:function(e){return e.numberOfAlteredCases/e.numberOfProfiledCases*100},defaultSortDirection:"desc",filter:function(e,t){return i.toString(Object(b.ab)(e.numberOfAlteredCases/e.numberOfProfiledCases)).includes(t)},width:t}),fn(a,mn.NUMBER_MUTATIONS,{name:e,tooltip:n.createElement("span",null,"Total number of mutations"),headerRender:function(){return n.createElement("div",{style:{marginLeft:r}},mn.NUMBER_MUTATIONS)},render:function(e){return n.createElement("span",{"data-test":"numberOfAlterations",style:{flexDirection:"row-reverse",display:"flex",marginRight:r}},e.totalCount.toLocaleString())},sortBy:function(e){return e.totalCount},defaultSortDirection:"desc",filter:function(e,t){return i.toString(e.totalCount).includes(t)},width:t}),fn(a,mn.NUMBER_STRUCTURAL_VARIANTS,{name:e,tooltip:n.createElement("span",null,"Total number of structural variants"),headerRender:function(){return n.createElement("div",{style:{marginLeft:r}},mn.NUMBER_STRUCTURAL_VARIANTS)},render:function(e){return n.createElement("span",{"data-test":"numberOfAlterations",style:{flexDirection:"row-reverse",display:"flex",marginRight:r}},e.totalCount.toLocaleString())},sortBy:function(e){return e.totalCount},defaultSortDirection:"desc",filter:function(e,t){return i.toString(e.totalCount).includes(t)},width:t}),fn(a,mn.CNA,{name:mn.CNA,tooltip:n.createElement("span",null,"Copy number alteration, only amplifications and deep deletions are shown"),render:function(e){return n.createElement("span",{"data-test":"cnaCell",style:{color:Object(b.J)(Object(b.I)(e.alteration)),fontWeight:"bold"}},Object(b.I)(e.alteration))},sortBy:function(e){return e.alteration},defaultSortDirection:"asc",filter:function(e,t,r){return Object(b.I)(e.alteration).includes(r)},width:t}),fn(a,mn.CYTOBAND,{name:mn.CYTOBAND,tooltip:n.createElement("span",null,"Cytoband"),render:function(e){return n.createElement("span",null,e.cytoband)},sortBy:function(e){return e.cytoband},defaultSortDirection:"asc",filter:function(e,t,r){return!i.isUndefined(e.cytoband)&&e.cytoband.toUpperCase().includes(r)},width:t}),a)[e]}}),Object.defineProperty(un(o),"getDefaultCellMargin",{enumerable:!0,configurable:!0,writable:!0,value:function(e,t){var r;return(fn(r={},mn.GENE,0),fn(r,mn.MOLECULAR_PROFILE,0),fn(r,mn.CASE_LIST,0),fn(r,mn.NUMBER_MUTATIONS,Object(b.u)(Object(b.Y)(t,o.totalCountLocaleString))),fn(r,mn.NUMBER_STRUCTURAL_VARIANTS,Object(b.u)(Object(b.Y)(t,o.totalCountLocaleString))),fn(r,mn.NUMBER,Object(b.u)((t-10-(Object(b.Z)(o.alteredCasesLocaleString)+20))/2)),fn(r,mn.FREQ,Object(b.u)(Object(b.Y)(t,Object(b.ab)(i.max(o.tableData.map(function(e){return e.numberOfAlteredCases/e.numberOfProfiledCases*100})))))),fn(r,mn.CYTOBAND,0),fn(r,mn.CNA,0),r)[e]}}),Object.defineProperty(un(o),"_selectionType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object(u.makeObservable)(un(o)),o.sortBy=o.props.defaultSortBy,o}var r,o,a;return pn(t,n["Component"]),r=t,(o=[{key:"toggleModal",value:function(e){this.modalSettings.modalOpen=!this.modalSettings.modalOpen,this.modalSettings.modalOpen&&(this.modalSettings.modalPanelName=e)}},{key:"closeModal",value:function(){this.modalSettings.modalOpen=!this.modalSettings.modalOpen}},{key:"toggleCancerGeneFilter",value:function(e){e.stopPropagation(),this.props.onChangeCancerGeneFilter(!this.props.filterByCancerGenes)}},{key:"isChecked",value:function(e){return!!this.allSelectedRowsKeysSet[e]}},{key:"isDisabled",value:function(e){return i.some(this.preSelectedRowsKeys,function(t){return t===e})}},{key:"toggleSelectRow",value:function(e){var t=i.find(this.props.selectedRowsKeys,function(t){return t===e});i.isUndefined(t)?this.props.onChangeSelectedRows(this.props.selectedRowsKeys.concat([e])):this.props.onChangeSelectedRows(i.xorBy(this.props.selectedRowsKeys,[t]))}},{key:"afterSelectingRows",value:function(){this.selectionType===x.b.UNION?this.props.onSubmitSelection([this.props.selectedRowsKeys]):this.props.onSubmitSelection(this.props.selectedRowsKeys.map(function(e){return[e]})),this.props.onChangeSelectedRows([])}},{key:"toggleSelectionOperator",value:function(){(this._selectionType||this.selectionType)===x.b.INTERSECTION?this._selectionType=x.b.UNION:this._selectionType=x.b.INTERSECTION,localStorage.setItem(this.props.tableType,this.selectionType)}},{key:"isSelectedRow",value:function(e){return this.isChecked(e.uniqueKey)}},{key:"selectedRowClassName",value:function(e){var t=this.filterKeyToIndexSet[e.uniqueKey];return void 0===t?this.props.filters.length%2==0?q.a.highlightedEvenRow:q.a.highlightedOddRow:t%2==0?q.a.highlightedEvenRow:q.a.highlightedOddRow}},{key:"afterSorting",value:function(e,t){this.sortBy=e,this.sortDirection=t}},{key:"render",value:function(){var e="".concat(this.props.tableType,"-table");return n.createElement("div",{"data-test":e,key:e},this.props.promise.isComplete&&n.createElement(gn,{width:this.props.width,height:this.props.height,data:this.selectableTableData,columns:this.tableColumns,isSelectedRow:this.isSelectedRow,afterSelectingRows:this.afterSelectingRows,defaultSelectionOperator:this.selectionType,toggleSelectionOperator:this.toggleSelectionOperator,extraButtons:this.props.extraButtons,sortBy:this.sortBy,sortDirection:this.sortDirection,afterSorting:this.afterSorting,fixedTopRowsData:this.preSelectedRows,highlightedRowClassName:this.selectedRowClassName,showSetOperationsButton:!0,numberOfSelectedRows:this.props.selectedRowsKeys.length}),this.props.genePanelCache?n.createElement(Ur.b,{show:this.modalSettings.modalOpen,genePanelCache:this.props.genePanelCache,panelName:this.modalSettings.modalPanelName,onHide:this.closeModal}):null)}},{key:"maxNumberTotalCount",get:function(){return i.max(this.tableData.map(function(e){return e.totalCount}))}},{key:"maxNumberAlteredCasesColumn",get:function(){return i.max(this.tableData.map(function(e){return e.numberOfAlteredCases}))}},{key:"totalCountLocaleString",get:function(){return void 0===this.maxNumberTotalCount?"":this.maxNumberTotalCount.toLocaleString()}},{key:"alteredCasesLocaleString",get:function(){return void 0===this.maxNumberAlteredCasesColumn?"":this.maxNumberAlteredCasesColumn.toLocaleString()}},{key:"columnsWidth",get:function(){var e=this;return i.reduce(this.props.columns,function(t,r){return t[r.columnKey]=Object(b.t)((r.columnWidthRatio?r.columnWidthRatio:yn[r.columnKey])*e.props.width),t},{})}},{key:"cellMargin",get:function(){var e=this;return i.reduce(this.props.columns,function(t,r){return t[r.columnKey]=e.getDefaultCellMargin(r.columnKey,e.columnsWidth[r.columnKey]),t},{})}},{key:"tableData",get:function(){return this.isFilteredByCancerGeneList?i.filter(this.props.promise.result,function(e){return e.isCancerGene}):this.props.promise.result||[]}},{key:"flattenedFilters",get:function(){return i.flatMap(this.props.filters)}},{key:"selectableTableData",get:function(){var e=this;return 0===this.flattenedFilters.length?this.tableData:i.filter(this.tableData,function(t){return!e.flattenedFilters.includes(t.uniqueKey)})}},{key:"preSelectedRows",get:function(){var e=this;if(0===this.flattenedFilters.length)return[];var t=Object(F.zb)(this.flattenedFilters);return i.chain(this.tableData).filter(function(t){return e.flattenedFilters.includes(t.uniqueKey)}).sortBy(function(e){return Object(zt.a)(t[e.uniqueKey],Number.POSITIVE_INFINITY)}).value()}},{key:"preSelectedRowsKeys",get:function(){return this.preSelectedRows.map(function(e){return e.uniqueKey})}},{key:"tableColumns",get:function(){var e=this;return this.props.columns.map(function(t){var r=e.getDefaultColumnDefinition(t.columnKey,e.columnsWidth[t.columnKey],e.cellMargin[t.columnKey]);return t.columnTooltip&&(r.tooltip=t.columnTooltip),r})}},{key:"isFilteredByCancerGeneList",get:function(){return!!this.props.cancerGeneFilterEnabled&&this.props.filterByCancerGenes}},{key:"allSelectedRowsKeysSet",get:function(){return Object(F.Bb)([].concat(on(this.props.selectedRowsKeys),on(this.preSelectedRowsKeys)))}},{key:"selectionType",get:function(){if(this._selectionType)return this._selectionType;switch((localStorage.getItem(this.props.tableType)||"").toUpperCase()){case x.b.INTERSECTION:return x.b.INTERSECTION;case x.b.UNION:return x.b.UNION;default:return this.props.tableType===x.a.DATA?x.b.INTERSECTION:x.b.UNION}}},{key:"filterKeyToIndexSet",get:function(){return i.reduce(this.props.filters,function(e,t,r){return t.forEach(function(t){e[t]=r}),e},{})}}])&&an(r.prototype,o),a&&an(r,a),t}();function Sn(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Cn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function On(e){return(On=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function En(e,t){return(En=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Tn(e){return(Tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(vn,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{cancerGeneFilterEnabled:!1}}),bn([u.observable],vn.prototype,"sortBy",void 0),bn([u.observable],vn.prototype,"sortDirection",void 0),bn([u.observable],vn.prototype,"modalSettings",void 0),bn([u.computed],vn.prototype,"maxNumberTotalCount",null),bn([u.computed],vn.prototype,"maxNumberAlteredCasesColumn",null),bn([u.computed],vn.prototype,"totalCountLocaleString",null),bn([u.computed],vn.prototype,"alteredCasesLocaleString",null),bn([u.computed],vn.prototype,"columnsWidth",null),bn([u.computed],vn.prototype,"cellMargin",null),bn([u.computed],vn.prototype,"tableData",null),bn([u.computed],vn.prototype,"flattenedFilters",null),bn([u.computed],vn.prototype,"selectableTableData",null),bn([u.computed],vn.prototype,"preSelectedRows",null),bn([u.computed],vn.prototype,"preSelectedRowsKeys",null),bn([u.computed],vn.prototype,"tableColumns",null),bn([u.action.bound],vn.prototype,"toggleModal",null),bn([u.action.bound],vn.prototype,"closeModal",null),bn([y.default],vn.prototype,"toggleCancerGeneFilter",null),bn([u.computed],vn.prototype,"isFilteredByCancerGeneList",null),bn([u.computed],vn.prototype,"allSelectedRowsKeysSet",null),bn([y.default],vn.prototype,"isChecked",null),bn([y.default],vn.prototype,"isDisabled",null),bn([u.action.bound],vn.prototype,"toggleSelectRow",null),bn([u.observable],vn.prototype,"_selectionType",void 0),bn([u.action.bound],vn.prototype,"afterSelectingRows",null),bn([u.computed],vn.prototype,"selectionType",null),bn([u.action.bound],vn.prototype,"toggleSelectionOperator",null),bn([y.default],vn.prototype,"isSelectedRow",null),bn([u.computed],vn.prototype,"filterKeyToIndexSet",null),bn([y.default],vn.prototype,"selectedRowClassName",null),bn([u.action.bound],vn.prototype,"afterSorting",null),vn=bn([s.observer],vn);var _n,An=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":Tn(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},Pn=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=!(o=On(t).call(this,e))||"object"!==Tn(o)&&"function"!=typeof o?wn(n):o,Object.defineProperty(wn(r),"_selectionType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(wn(r),"sortDirection",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(wn(r),"modalSettings",{enumerable:!0,configurable:!0,writable:!0,value:{modalOpen:!1,modalPanelName:""}}),Object(u.makeObservable)(wn(r)),r}var r,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&En(e,t)}(t,n["Component"]),r=t,(o=[{key:"isDisabled",value:function(e){return i.some(this.preSelectedRowsKeys,function(t){return t===e})}},{key:"isChecked",value:function(e){return!!this.allSelectedRowsKeysSet[e]}},{key:"toggleModal",value:function(e){this.modalSettings.modalOpen=!this.modalSettings.modalOpen,this.modalSettings.modalOpen&&(this.modalSettings.modalPanelName=e)}},{key:"closeModal",value:function(){this.modalSettings.modalOpen=!this.modalSettings.modalOpen}},{key:"toggleSelectRow",value:function(e){var t=i.find(this.props.selectedRowsKeys,function(t){return t===e});i.isUndefined(t)?this.props.onChangeSelectedRows(this.props.selectedRowsKeys.concat([e])):this.props.onChangeSelectedRows(i.xorBy(this.props.selectedRowsKeys,[t]))}},{key:"afterSelectingRows",value:function(){this.selectionType===x.b.UNION?this.props.onSubmitSelection([this.props.selectedRowsKeys]):this.props.onSubmitSelection(this.props.selectedRowsKeys.map(function(e){return[e]})),this.props.onChangeSelectedRows([])}},{key:"toggleSelectionOperator",value:function(){(this._selectionType||this.selectionType)===x.b.INTERSECTION?this._selectionType=x.b.UNION:this._selectionType=x.b.INTERSECTION,localStorage.setItem(this.props.tableType,this.selectionType)}},{key:"isSelectedRow",value:function(e){return this.isChecked($(e))}},{key:"selectedRowClassName",value:function(e){var t=this.filterKeyToIndexSet[$(e)];return void 0===t?this.props.filters.length%2==0?q.a.highlightedEvenRow:q.a.highlightedOddRow:t%2==0?q.a.highlightedEvenRow:q.a.highlightedOddRow}},{key:"flattenedFilters",get:function(){return i.flatMap(this.props.filters)}},{key:"allSelectedRowsKeysSet",get:function(){return Object(F.Bb)([].concat(Sn(this.props.selectedRowsKeys),Sn(this.preSelectedRowsKeys)))}},{key:"filterKeyToIndexSet",get:function(){return i.reduce(this.props.filters,function(e,t,r){return t.forEach(function(t){e[t]=r}),e},{})}},{key:"selectionType",get:function(){if(this._selectionType)return this._selectionType;switch((localStorage.getItem(this.props.tableType)||"").toUpperCase()){case x.b.INTERSECTION:return x.b.INTERSECTION;case x.b.UNION:default:return x.b.UNION}}}])&&Cn(r.prototype,o),a&&Cn(r,a),t}();function kn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function jn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function In(e,t){return!t||"object"!==Fn(t)&&"function"!=typeof t?Dn(e):t}function Dn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nn(e){return(Nn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gn(e,t)}function Gn(e,t){return(Gn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fn(e){return(Fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}An([u.observable],Pn.prototype,"_selectionType",void 0),An([u.observable],Pn.prototype,"sortDirection",void 0),An([u.observable],Pn.prototype,"modalSettings",void 0),An([u.computed],Pn.prototype,"flattenedFilters",null),An([u.computed],Pn.prototype,"allSelectedRowsKeysSet",null),An([u.computed],Pn.prototype,"filterKeyToIndexSet",null),An([u.computed],Pn.prototype,"selectionType",null),An([y.default],Pn.prototype,"isDisabled",null),An([y.default],Pn.prototype,"isChecked",null),An([u.action.bound],Pn.prototype,"toggleModal",null),An([u.action.bound],Pn.prototype,"closeModal",null),An([u.action.bound],Pn.prototype,"toggleSelectRow",null),An([u.action.bound],Pn.prototype,"afterSelectingRows",null),An([u.action.bound],Pn.prototype,"toggleSelectionOperator",null),An([y.default],Pn.prototype,"isSelectedRow",null),An([y.default],Pn.prototype,"selectedRowClassName",null);var xn,Ln=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":Fn(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a};!function(e){e.TREATMENT="Treatment",e.TIME="Pre / Post",e.COUNT="#"}(xn||(xn={}));var Bn,Un=(Mn(_n={},xn.TREATMENT,.6),Mn(_n,xn.TIME,.3),Mn(_n,xn.COUNT,.2),_n),Vn=function(e){function t(){return jn(this,t),In(this,Nn(t).apply(this,arguments))}return Rn(t,It["a"]),t}(),qn=function(e){function t(e){var r;return jn(this,t),r=In(this,Nn(t).call(this,e)),Object.defineProperty(Dn(r),"sortBy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(Dn(r),"getDefaultColumnDefinition",{enumerable:!0,configurable:!0,writable:!0,value:function(e,t,o){var i;return(Mn(i={},xn.TREATMENT,{name:e,headerRender:function(){return n.createElement(ee,{margin:o,headerName:e})},render:function(e){return n.createElement(te,{row:e})},sortBy:function(e){return e.treatment},defaultSortDirection:"asc",filter:re,width:t}),Mn(i,xn.TIME,{name:e,headerRender:function(){return n.createElement(ee,{margin:o,headerName:e})},render:r.createTemporalRelationColumnCell,sortBy:function(e){return e.time},defaultSortDirection:"asc",filter:re,width:t}),Mn(i,xn.COUNT,{tooltip:n.createElement("span",null,"Number of samples acquired before treatment or after/on treatment"),name:e,headerRender:function(){return n.createElement(ee,{margin:o,headerName:e})},render:function(e){return r.createNubmerColumnCell(e,28)},sortBy:function(e){return e.count+ne(e.time+e.treatment)},defaultSortDirection:"desc",filter:re,width:t}),i)[e]}}),Object(u.makeObservable)(Dn(r)),r.sortBy=r.props.defaultSortBy,r}var r,o,a;return Rn(t,Pn),r=t,(o=[{key:"createTemporalRelationColumnCell",value:function(e){return n.createElement("div",null,e.time)}},{key:"createNubmerColumnCell",value:function(e,t){var r=this;return n.createElement(jt.a,{checked:this.isChecked($(e)),disabled:this.isDisabled($(e)),onChange:function(t){return r.toggleSelectRow($(e))},labelProps:{style:{display:"flex",justifyContent:"space-between",marginLeft:0,marginRight:t}},inputProps:{className:q.a.autoMarginCheckbox}},n.createElement("span",null,e.count.toLocaleString()))}},{key:"afterSorting",value:function(e,t){this.sortBy=e,this.sortDirection=t}},{key:"render",value:function(){var e="".concat(this.props.tableType,"-table");return n.createElement("div",{"data-test":e,key:e},this.props.promise.isComplete&&n.createElement(Vn,{width:this.props.width,height:this.props.height,data:this.selectableTableData,columns:this.tableColumns,isSelectedRow:this.isSelectedRow,afterSelectingRows:this.afterSelectingRows,defaultSelectionOperator:this.selectionType,toggleSelectionOperator:this.toggleSelectionOperator,extraButtons:this.props.extraButtons,sortBy:this.sortBy,sortDirection:this.sortDirection,afterSorting:this.afterSorting,fixedTopRowsData:this.preSelectedRows,highlightedRowClassName:this.selectedRowClassName,numberOfSelectedRows:this.props.selectedRowsKeys.length,showSetOperationsButton:!0}))}},{key:"columnsWidth",get:function(){var e=this;return i.reduce(this.props.columns,function(t,r){return t[r.columnKey]=Object(b.t)((r.columnWidthRatio?r.columnWidthRatio:Un[r.columnKey])*e.props.width),t},{})}},{key:"cellMargin",get:function(){return i.reduce(this.props.columns,function(e,t){return e[t.columnKey]=0,e},{})}},{key:"tableData",get:function(){return this.props.promise.result||[]}},{key:"selectableTableData",get:function(){var e=this;return 0===this.flattenedFilters.length?this.tableData:i.filter(this.tableData,function(t){return!e.flattenedFilters.includes($(t))})}},{key:"preSelectedRows",get:function(){var e=this;if(0===this.flattenedFilters.length)return[];var t=Object(F.zb)(this.flattenedFilters);return i.chain(this.tableData).filter(function(t){return e.flattenedFilters.includes($(t))}).sortBy(function(e){return Object(zt.a)(t[$(e)],Number.POSITIVE_INFINITY)}).value()}},{key:"preSelectedRowsKeys",get:function(){return this.preSelectedRows.map(function(e){return $(e)})}},{key:"tableColumns",get:function(){var e=this;return this.props.columns.map(function(t){return e.getDefaultColumnDefinition(t.columnKey,e.columnsWidth[t.columnKey],e.cellMargin[t.columnKey])})}}])&&kn(r.prototype,o),a&&kn(r,a),t}();function Kn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Wn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hn(e,t){return!t||"object"!==Xn(t)&&"function"!=typeof t?zn(e):t}function zn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qn(e){return(Qn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yn(e,t)}function Yn(e,t){return(Yn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xn(e){return(Xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(qn,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{cancerGeneFilterEnabled:!1}}),Ln([u.observable],qn.prototype,"sortBy",void 0),Ln([u.computed],qn.prototype,"columnsWidth",null),Ln([u.computed],qn.prototype,"cellMargin",null),Ln([u.computed],qn.prototype,"tableData",null),Ln([u.computed],qn.prototype,"selectableTableData",null),Ln([u.computed],qn.prototype,"preSelectedRows",null),Ln([u.computed],qn.prototype,"preSelectedRowsKeys",null),Ln([u.computed],qn.prototype,"tableColumns",null),Ln([u.action.bound],qn.prototype,"afterSorting",null),qn=Ln([s.observer],qn);var $n,eo=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":Xn(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a};!function(e){e.TREATMENT="Treatment",e.COUNT="#"}($n||($n={}));var to=(Zn(Bn={},$n.TREATMENT,.8),Zn(Bn,$n.COUNT,.2),Bn),ro=function(e){function t(){return Wn(this,t),Hn(this,Qn(t).apply(this,arguments))}return Jn(t,It["a"]),t}(),no=function(e){function t(e){var r;return Wn(this,t),r=Hn(this,Qn(t).call(this,e)),Object.defineProperty(zn(r),"sortBy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(zn(r),"getDefaultColumnDefinition",{enumerable:!0,configurable:!0,writable:!0,value:function(e,t,o){var i;return(Zn(i={},$n.TREATMENT,{name:e,headerRender:function(){return n.createElement(ee,{margin:o,headerName:e})},render:function(e){return n.createElement(te,{row:e})},sortBy:function(e){return e.treatment},defaultSortDirection:"asc",filter:re,width:t}),Zn(i,$n.COUNT,{tooltip:n.createElement("span",null,"Number of patients treated"),name:e,headerRender:function(){return n.createElement(ee,{margin:o,headerName:e})},render:function(e){return r.createNubmerColumnCell(e,28)},sortBy:function(e){return e.count+ne(e.treatment)},defaultSortDirection:"desc",filter:re,width:t}),i)[e]}}),Object(u.makeObservable)(zn(r)),r.sortBy=r.props.defaultSortBy,r}var r,o,a;return Jn(t,Pn),r=t,(o=[{key:"createNubmerColumnCell",value:function(e,t){var r=this;return n.createElement(jt.a,{checked:this.isChecked($(e)),disabled:this.isDisabled($(e)),onChange:function(t){return r.toggleSelectRow($(e))},labelProps:{style:{display:"flex",justifyContent:"space-between",marginLeft:0,marginRight:t}},inputProps:{className:q.a.autoMarginCheckbox}},n.createElement("span",null,e.count.toLocaleString()))}},{key:"afterSorting",value:function(e,t){this.sortBy=e,this.sortDirection=t}},{key:"render",value:function(){var e="".concat(this.props.tableType,"-table");return n.createElement("div",{"data-test":e,key:e},this.props.promise.isComplete&&n.createElement(ro,{width:this.props.width,height:this.props.height,data:this.selectableTableData,columns:this.tableColumns,isSelectedRow:this.isSelectedRow,afterSelectingRows:this.afterSelectingRows,defaultSelectionOperator:this.selectionType,toggleSelectionOperator:this.toggleSelectionOperator,extraButtons:this.props.extraButtons,sortBy:this.sortBy,sortDirection:this.sortDirection,afterSorting:this.afterSorting,fixedTopRowsData:this.preSelectedRows,highlightedRowClassName:this.selectedRowClassName,numberOfSelectedRows:this.props.selectedRowsKeys.length,showSetOperationsButton:!0}))}},{key:"columnsWidth",get:function(){var e=this;return i.reduce(this.props.columns,function(t,r){return t[r.columnKey]=Object(b.t)((r.columnWidthRatio?r.columnWidthRatio:to[r.columnKey])*e.props.width),t},{})}},{key:"cellMargin",get:function(){return i.reduce(this.props.columns,function(e,t){return e[t.columnKey]=0,e},{})}},{key:"tableData",get:function(){return this.props.promise.result||[]}},{key:"selectableTableData",get:function(){var e=this;return 0===this.flattenedFilters.length?this.tableData:i.filter(this.tableData,function(t){return!e.flattenedFilters.includes($(t))})}},{key:"preSelectedRows",get:function(){var e=this;if(0===this.flattenedFilters.length)return[];var t=Object(F.zb)(this.flattenedFilters);return i.chain(this.tableData).filter(function(t){return e.flattenedFilters.includes($(t))}).sortBy(function(e){return Object(zt.a)(t[$(e)],Number.POSITIVE_INFINITY)}).value()}},{key:"preSelectedRowsKeys",get:function(){return this.preSelectedRows.map(function(e){return $(e)})}},{key:"tableColumns",get:function(){var e=this;return this.props.columns.map(function(t){return e.getDefaultColumnDefinition(t.columnKey,e.columnsWidth[t.columnKey],e.cellMargin[t.columnKey])})}}])&&Kn(r.prototype,o),a&&Kn(r,a),t}();function oo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function io(e){return(io=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ao(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function so(e,t){return(so=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lo(e){return(lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(no,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{cancerGeneFilterEnabled:!1}}),eo([u.observable],no.prototype,"sortBy",void 0),eo([u.computed],no.prototype,"columnsWidth",null),eo([u.computed],no.prototype,"cellMargin",null),eo([u.computed],no.prototype,"tableData",null),eo([u.computed],no.prototype,"selectableTableData",null),eo([u.computed],no.prototype,"preSelectedRows",null),eo([u.computed],no.prototype,"preSelectedRowsKeys",null),eo([u.computed],no.prototype,"tableColumns",null),eo([u.action.bound],no.prototype,"afterSorting",null),no=eo([s.observer],no);var uo=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":lo(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},co=[A.a.PIE_CHART,A.a.TABLE,A.a.BAR_CHART,A.a.MUTATED_GENES_TABLE,A.a.CNA_GENES_TABLE,A.a.SAMPLE_TREATMENTS_TABLE,A.a.PATIENT_TREATMENTS_TABLE,A.a.STRUCTURAL_VARIANT_GENES_TABLE],po=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=io(t).call(this,e),r=!o||"object"!==lo(o)&&"function"!=typeof o?ao(n):o,Object.defineProperty(ao(r),"chartHeaderHeight",{enumerable:!0,configurable:!0,writable:!0,value:20}),Object.defineProperty(ao(r),"handlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(ao(r),"plot",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(ao(r),"mouseLeaveTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(ao(r),"mouseInChart",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(ao(r),"placement",{enumerable:!0,configurable:!0,writable:!0,value:"right"}),Object.defineProperty(ao(r),"chartType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(ao(r),"newlyAdded",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(ao(r),"selectedRowsKeys",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object(u.makeObservable)(ao(r)),r.chartType=r.props.chartType,r.handlers={ref:function(e){r.plot=e},resetFilters:Object(u.action)(function(){r.props.onResetSelection(r.props.chartMeta,[])}),onValueSelection:Object(u.action)(function(e){r.props.onValueSelection(r.props.chartMeta,e)}),onChangeSelectedRows:Object(u.action)(function(e){r.selectedRowsKeys=e}),onDataBinSelection:Object(u.action)(function(e){r.props.onDataBinSelection(r.props.chartMeta,e)}),onToggleLogScale:Object(u.action)(function(){r.props.onToggleLogScale&&r.props.onToggleLogScale(r.props.chartMeta)}),onToggleNAValue:Object(u.action)(function(){r.props.onToggleNAValue&&r.props.onToggleNAValue(r.props.chartMeta)}),onMouseEnterChart:Object(u.action)(function(e){r.mouseLeaveTimeout&&clearTimeout(r.mouseLeaveTimeout),r.placement=e.nativeEvent.x>C.a.size.width-400?"left":"right",r.mouseInChart=!0}),onMouseLeaveChart:Object(u.action)(function(){r.mouseLeaveTimeout=setTimeout(function(){r.placement="right",r.mouseInChart=!1},100)}),defaultDownload:{SVG:function(){return Promise.resolve((new XMLSerializer).serializeToString(r.toSVGDOMNode()))},PNG:function(){return Promise.resolve(r.toSVGDOMNode())},PDF:function(){return Promise.resolve(r.toSVGDOMNode())}},onChangeChartType:function(e){r.mouseInChart=!1,r.props.onChangeChartType(r.props.chartMeta,e)},onDeleteChart:function(){r.props.onDeleteChart(r.props.chartMeta)}},Object(u.makeObservable)(ao(r)),r}var r,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&so(e,t)}(t,n["Component"]),r=t,(o=[{key:"toSVGDOMNode",value:function(){return this.plot?this.plot.toSVGDOMNode():document.createElementNS("http://www.w3.org/2000/svg","svg")}},{key:"changeChartType",value:function(e){this.chartType=e,this.handlers.onChangeChartType(e)}},{key:"openComparisonPage",value:function(e){var t=this;if(this.comparisonPagePossible)switch(this.props.chartType){case A.a.PIE_CHART:case A.a.TABLE:t.props.store.openComparisonPage(t.props.chartMeta,{clinicalAttributeValues:t.props.promise.result});break;default:this.props.store.openComparisonPage(this.props.chartMeta,e||{})}}},{key:"getScatterPlotHeight",value:function(e){return A.d.layout.grid.h*e-this.chartHeaderHeight+33}},{key:"componentDidMount",value:function(){var e=this;this.props.isNewlyAdded(this.props.chartMeta.uniqueKey)&&(this.newlyAdded=!0,setTimeout(function(){return e.newlyAdded=!1},A.d.thresholds.chartHighlight))}},{key:"componentWillReceiveProps",value:function(e,t){e.chartType!==this.chartType&&(this.chartType=e.chartType)}},{key:"render",value:function(){var e,t,r,o=this;return n.createElement("div",{className:ct()(lt.a.chart,(e={},t=lt.a.highlight,r=this.highlightChart,t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e)),"data-test":"chart-container-".concat(this.props.chartMeta.uniqueKey),onMouseEnter:this.handlers.onMouseEnterChart,onMouseLeave:this.handlers.onMouseLeaveChart},n.createElement(Pt,{height:this.chartHeaderHeight,chartMeta:this.props.chartMeta,chartType:this.props.chartType,store:this.props.store,title:this.props.title,active:this.mouseInChart,resetChart:this.handlers.resetFilters,deleteChart:this.handlers.onDeleteChart,selectedRowsKeys:this.selectedRowsKeys,toggleLogScale:this.handlers.onToggleLogScale,toggleNAValue:this.handlers.onToggleNAValue,chartControls:this.chartControls,changeChartType:this.changeChartType,getSVG:function(){return Promise.resolve(o.toSVGDOMNode())},getData:this.props.getData,downloadTypes:this.props.downloadTypes,openComparisonPage:this.openComparisonPage,placement:this.placement,description:this.props.description}),n.createElement("div",{className:lt.a.chartInnerWrapper},this.props.promise.isPending&&n.createElement(xe.a,{isLoading:!0,className:lt.a.chartLoader}),this.props.promise.isError&&n.createElement("div",{className:lt.a.chartError},n.createElement("i",{className:"fa fa-warning","aria-hidden":"true"})," ","Error when loading data."),(!this.props.chartMeta.renderWhenDataChange||this.props.promise.isComplete)&&n.createElement("div",{style:{visibility:this.props.promise.isPending?"hidden":"visible",display:"flex"}},this.chart&&this.chart())))}},{key:"chartControls",get:function(){var e={};switch(this.chartType){case A.a.BAR_CHART:e={showLogScaleToggle:this.props.showLogScaleToggle,logScaleChecked:this.props.logScaleChecked,isShowNAChecked:this.props.isShowNAChecked,showNAToggle:this.props.showNAToggle};break;case A.a.PIE_CHART:e={showTableIcon:!0};break;case A.a.TABLE:e={showPieIcon:!0}}return this.comparisonPagePossible&&(e.showComparisonPageIcon=!0),Object.assign(Object.assign({},e),{showResetIcon:this.props.filters&&this.props.filters.length>0})}},{key:"comparisonPagePossible",get:function(){return this.props.promise.isComplete&&this.props.promise.result.length>1&&co.indexOf(this.props.chartType)>-1}},{key:"survivalChartData",get:function(){var e,t,r,n,o,i,s,l=this;if(this.props.promise.isComplete&&this.props.patientToAnalysisGroup&&this.props.patientToAnalysisGroup.isComplete){var u=a.a.find(this.props.promise.result,function(e){return e.id===l.props.chartMeta.uniqueKey});return e=u.survivalData,t=this.props.analysisGroupsSettings.groups,r=this.props.patientToAnalysisGroup.result,n=a.a.mapValues(r,function(e){return[e]}),o=a.a.reduce(e,function(e,t){return t.uniquePatientKey in n&&n[t.uniquePatientKey].forEach(function(r){e[r]=e[r]||[],e[r].push(t)}),e},{}),i=a.a.mapValues(o,function(e){return e.sort(function(e,t){return e.months-t.months})}),s=null,t.length>1&&(s=jr.a.apply(void 0,Ir(t.map(function(e){return i[e.value]||[]})))),{patientToAnalysisGroups:n,analysisGroups:t,sortedGroupedSurvivals:i,pValue:s}}}},{key:"borderWidth",get:function(){return this.highlightChart?2:1}},{key:"comparisonButtonForTables",get:function(){var e=this;return this.selectedRowsKeys.length>=2?{content:n.createElement("div",{style:{display:"flex",alignItems:"center"}},n.createElement(Ct,{className:ct()("fa fa-fw"),style:{marginRight:4}}),"Compare"),onClick:function(){e.openComparisonPage(ve(e.selectedRowsKeys,e.chartType))},isDisabled:function(){return e.selectedRowsKeys.length<2}}:void 0}},{key:"chart",get:function(){var e=this;switch(this.chartType){case A.a.PIE_CHART:return function(){return n.createElement(ir,{width:Object(b.xb)(e.props.dimension,e.borderWidth),height:Object(b.hb)(e.props.dimension,e.chartHeaderHeight),ref:e.handlers.ref,onUserSelection:e.handlers.onValueSelection,openComparisonPage:e.openComparisonPage,filters:e.props.filters,data:e.props.promise.result,placement:e.placement,label:e.props.title,labelDescription:e.props.chartMeta.description,patientAttribute:e.props.chartMeta.patientAttribute})};case A.a.BAR_CHART:return function(){return n.createElement(Ar,{width:Object(b.xb)(e.props.dimension,e.borderWidth),height:Object(b.hb)(e.props.dimension,e.chartHeaderHeight),ref:e.handlers.ref,onUserSelection:e.handlers.onDataBinSelection,filters:e.props.filters,data:e.props.promise.result,showNAChecked:e.props.store.isShowNAChecked(e.props.chartMeta.uniqueKey)})};case A.a.TABLE:return function(){return n.createElement(Wt,{data:e.props.promise.result,width:Object(b.xb)(e.props.dimension,e.borderWidth),height:Object(b.sb)(e.props.dimension,e.chartHeaderHeight),filters:e.props.filters,onUserSelection:e.handlers.onValueSelection,labelDescription:e.props.chartMeta.description,patientAttribute:e.props.chartMeta.patientAttribute,showAddRemoveAllButtons:e.mouseInChart})};case A.a.MUTATED_GENES_TABLE:return function(){var t={columnKey:mn.NUMBER};return e.props.store.isGlobalMutationFilterActive&&(t.columnTooltip=n.createElement("span",{"data-test":"hidden-mutation-alterations"},"Total number of mutations",n.createElement("br",null),"This table is filtered based on selections in the ",n.createElement("i",null,"Alteration Filter")," menu.")),n.createElement(vn,{tableType:x.a.MUTATION,promise:e.props.promise,width:Object(b.xb)(e.props.dimension,e.borderWidth),height:Object(b.sb)(e.props.dimension,e.chartHeaderHeight),filters:e.props.filters,onSubmitSelection:e.handlers.onValueSelection,onChangeSelectedRows:e.handlers.onChangeSelectedRows,extraButtons:e.comparisonButtonForTables&&[e.comparisonButtonForTables],selectedRowsKeys:e.selectedRowsKeys,onGeneSelect:e.props.onGeneSelect,selectedGenes:e.props.selectedGenes,genePanelCache:e.props.genePanelCache,cancerGeneFilterEnabled:e.props.cancerGeneFilterEnabled,filterByCancerGenes:e.props.filterByCancerGenes,onChangeCancerGeneFilter:e.props.onChangeCancerGeneFilter,alterationFilterEnabled:e.props.alterationFilterEnabled,filterAlterations:e.props.filterAlterations,columns:[{columnKey:mn.GENE},{columnKey:mn.NUMBER_MUTATIONS},t,{columnKey:mn.FREQ}],defaultSortBy:mn.FREQ})};case A.a.STRUCTURAL_VARIANT_GENES_TABLE:return function(){var t={columnKey:mn.NUMBER};return e.props.store.isGlobalMutationFilterActive&&(t.columnTooltip=n.createElement("span",{"data-test":"hidden-fusion-alterations"},"Total number of fusions",n.createElement("br",null),"This table is filtered based on selections in the ",n.createElement("i",null,"Alteration Filter")," menu.")),n.createElement(vn,{tableType:x.a.STRUCTURAL_VARIANT,promise:e.props.promise,width:Object(b.xb)(e.props.dimension,e.borderWidth),height:Object(b.sb)(e.props.dimension,e.chartHeaderHeight),filters:e.props.filters,onSubmitSelection:e.handlers.onValueSelection,onChangeSelectedRows:e.handlers.onChangeSelectedRows,selectedRowsKeys:e.selectedRowsKeys,onGeneSelect:e.props.onGeneSelect,selectedGenes:e.props.selectedGenes,genePanelCache:e.props.genePanelCache,cancerGeneFilterEnabled:e.props.cancerGeneFilterEnabled,filterByCancerGenes:e.props.filterByCancerGenes,onChangeCancerGeneFilter:e.props.onChangeCancerGeneFilter,alterationFilterEnabled:e.props.alterationFilterEnabled,filterAlterations:e.props.filterAlterations,columns:[{columnKey:mn.GENE},{columnKey:mn.NUMBER_STRUCTURAL_VARIANTS},t,{columnKey:mn.FREQ}],defaultSortBy:mn.FREQ})};case A.a.CNA_GENES_TABLE:return function(){var t={columnKey:mn.NUMBER,columnWidthRatio:.17};return e.props.store.isGlobalAlterationFilterActive&&(t.columnTooltip=n.createElement("span",{"data-test":"hidden-fusion-alterations"},"Number of samples with one or more copy number alterations",n.createElement("br",null),"This table is filtered based on selections in the ",n.createElement("i",null,"Alteration Filter")," menu.")),n.createElement(vn,{tableType:x.a.CNA,promise:e.props.promise,width:Object(b.xb)(e.props.dimension,e.borderWidth),height:Object(b.sb)(e.props.dimension,e.chartHeaderHeight),filters:e.props.filters,onSubmitSelection:e.handlers.onValueSelection,onChangeSelectedRows:e.handlers.onChangeSelectedRows,extraButtons:e.comparisonButtonForTables&&[e.comparisonButtonForTables],selectedRowsKeys:e.selectedRowsKeys,onGeneSelect:e.props.onGeneSelect,selectedGenes:e.props.selectedGenes,genePanelCache:e.props.genePanelCache,cancerGeneFilterEnabled:e.props.cancerGeneFilterEnabled,filterByCancerGenes:e.props.filterByCancerGenes,onChangeCancerGeneFilter:e.props.onChangeCancerGeneFilter,alterationFilterEnabled:e.props.alterationFilterEnabled,filterAlterations:e.props.filterAlterations,columns:[{columnKey:mn.GENE,columnWidthRatio:.24},{columnKey:mn.CYTOBAND,columnWidthRatio:.24},{columnKey:mn.CNA,columnWidthRatio:.18},t,{columnKey:mn.FREQ,columnWidthRatio:.17}],defaultSortBy:mn.FREQ})};case A.a.GENOMIC_PROFILES_TABLE:return function(){return n.createElement(vn,{tableType:x.a.DATA,promise:e.props.promise,width:Object(b.xb)(e.props.dimension,e.borderWidth),height:Object(b.sb)(e.props.dimension,e.chartHeaderHeight),filters:e.props.filters,onSubmitSelection:e.handlers.onValueSelection,onChangeSelectedRows:e.handlers.onChangeSelectedRows,selectedRowsKeys:e.selectedRowsKeys,onGeneSelect:e.props.onGeneSelect,selectedGenes:e.props.selectedGenes,genePanelCache:e.props.genePanelCache,cancerGeneFilterEnabled:e.props.cancerGeneFilterEnabled,filterByCancerGenes:e.props.filterByCancerGenes,onChangeCancerGeneFilter:e.props.onChangeCancerGeneFilter,columns:[{columnKey:mn.MOLECULAR_PROFILE},{columnKey:mn.NUMBER},{columnKey:mn.FREQ}],defaultSortBy:mn.FREQ})};case A.a.CASE_LIST_TABLE:return function(){return n.createElement(vn,{tableType:x.a.DATA,promise:e.props.promise,width:Object(b.xb)(e.props.dimension,e.borderWidth),height:Object(b.sb)(e.props.dimension,e.chartHeaderHeight),filters:e.props.filters,onSubmitSelection:e.handlers.onValueSelection,onChangeSelectedRows:e.handlers.onChangeSelectedRows,selectedRowsKeys:e.selectedRowsKeys,onGeneSelect:e.props.onGeneSelect,selectedGenes:e.props.selectedGenes,genePanelCache:e.props.genePanelCache,cancerGeneFilterEnabled:e.props.cancerGeneFilterEnabled,filterByCancerGenes:e.props.filterByCancerGenes,onChangeCancerGeneFilter:e.props.onChangeCancerGeneFilter,columns:[{columnKey:mn.CASE_LIST},{columnKey:mn.NUMBER},{columnKey:mn.FREQ}],defaultSortBy:mn.FREQ})};case A.a.SURVIVAL:if(this.survivalChartData){var t=this.survivalChartData;return function(){return n.createElement(sr.b,{ref:e.handlers.ref,sortedGroupedSurvivals:t.sortedGroupedSurvivals,patientToAnalysisGroups:t.patientToAnalysisGroups,pValue:t.pValue,analysisGroups:t.analysisGroups,legendLocation:sr.a.TOOLTIP,title:e.props.title,totalCasesHeader:"Number of Cases, Total",statusCasesHeader:"Number of Events",medianMonthsHeader:"Median Months Survival",yLabelTooltip:U.d,xLabelWithEventTooltip:U.c,xLabelWithoutEventTooltip:U.b,showDownloadButtons:!1,showSlider:!1,showTable:!1,styleOpts:{padding:{top:15,bottom:30,left:45,right:20},width:Object(b.xb)(e.props.dimension,e.borderWidth),height:Object(b.hb)(e.props.dimension,e.chartHeaderHeight),tooltipXOffset:10,tooltipYOffset:-58,pValue:{x:Object(b.xb)(e.props.dimension,e.borderWidth)-10,y:30,textAnchor:"end"},axis:{y:{axisLabel:{padding:40}}}},fileName:e.props.title.replace(" ","_"),yAxisTickCount:2,xAxisTickCount:4})}}return null;case A.a.SAMPLE_TREATMENTS_TABLE:return function(){return n.createElement(qn,{tableType:_.SAMPLE,promise:e.props.promise,width:Object(b.xb)(e.props.dimension,e.borderWidth),height:Object(b.sb)(e.props.dimension,e.chartHeaderHeight),filters:e.props.filters,onSubmitSelection:e.handlers.onValueSelection,onChangeSelectedRows:e.handlers.onChangeSelectedRows,extraButtons:e.comparisonButtonForTables&&[e.comparisonButtonForTables],selectedRowsKeys:e.selectedRowsKeys,columns:[{columnKey:xn.TREATMENT},{columnKey:xn.TIME},{columnKey:xn.COUNT}],defaultSortBy:xn.COUNT,selectedTreatments:[]})};case A.a.PATIENT_TREATMENTS_TABLE:return function(){return n.createElement(no,{tableType:_.PATIENT,promise:e.props.promise,width:Object(b.xb)(e.props.dimension,e.borderWidth),height:Object(b.sb)(e.props.dimension,e.chartHeaderHeight),filters:e.props.filters,onSubmitSelection:e.handlers.onValueSelection,onChangeSelectedRows:e.handlers.onChangeSelectedRows,extraButtons:e.comparisonButtonForTables&&[e.comparisonButtonForTables],selectedRowsKeys:e.selectedRowsKeys,columns:[{columnKey:$n.TREATMENT},{columnKey:$n.COUNT}],defaultSortBy:$n.COUNT,selectedTreatments:[]})};case A.a.SCATTER:return function(){return n.createElement("div",{style:{overflow:"hidden",height:Object(b.hb)(e.props.dimension,e.chartHeaderHeight)}},n.createElement("div",{style:{marginTop:-33}},n.createElement(Br,{ref:e.handlers.ref,width:Object(b.xb)(e.props.dimension,e.borderWidth),height:e.getScatterPlotHeight(e.props.dimension.h),yBinsMin:b.g,onSelection:e.props.onValueSelection,selectionBounds:e.props.filters&&e.props.filters.length>0?e.props.filters[0]:void 0,data:e.props.promise.result.bins,xBinSize:e.props.promise.result.xBinSize,yBinSize:e.props.promise.result.yBinSize,isLoading:e.props.promise.isPending,axisLabelX:"Fraction of copy number altered genome",axisLabelY:"# of mutations",tooltip:b.Bb})))};default:return null}}},{key:"highlightChart",get:function(){return this.newlyAdded}}])&&oo(r.prototype,o),i&&oo(r,i),t}();uo([u.observable],po.prototype,"mouseInChart",void 0),uo([u.observable],po.prototype,"placement",void 0),uo([u.observable],po.prototype,"chartType",void 0),uo([u.observable],po.prototype,"newlyAdded",void 0),uo([u.observable],po.prototype,"selectedRowsKeys",void 0),uo([u.computed],po.prototype,"chartControls",null),uo([u.action.bound],po.prototype,"changeChartType",null),uo([u.computed],po.prototype,"comparisonPagePossible",null),uo([u.action.bound],po.prototype,"openComparisonPage",null),uo([u.computed],po.prototype,"survivalChartData",null),uo([u.computed],po.prototype,"borderWidth",null),uo([u.computed],po.prototype,"comparisonButtonForTables",null),uo([u.computed],po.prototype,"chart",null),uo([u.computed],po.prototype,"highlightChart",null),po=uo([s.observer],po);var fo=r(1363),ho=r.n(fo);r(1197),r(1198);function mo(e){return(mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yo(e,t){return!t||"object"!==mo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function go(e){return(go=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vo(e,t){return(vo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var So=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),yo(this,go(t).apply(this,arguments))}var r,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vo(e,t)}(t,n["Component"]),r=t,(o=[{key:"shouldComponentUpdate",value:function(){var e=this;return setTimeout(function(){return e.forceUpdate()},0),!1}},{key:"render",value:function(){return this.props.children}}])&&bo(r.prototype,o),i&&bo(r,i),t}(),Co=r(6);function Oo(){return(Oo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function wo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Eo(e){return(Eo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function To(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _o(e,t){return(_o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ao(e){return(Ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Po=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":Ao(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},ko=function(e){function t(e){var r,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,i=Eo(t).call(this,e),r=!i||"object"!==Ao(i)&&"function"!=typeof i?To(o):i,Object.defineProperty(To(r),"store",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(To(r),"handlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(To(r),"showErrorMessage",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(To(r),"renderAttributeChart",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t={chartMeta:e,chartType:r.props.store.chartsType.get(e.uniqueKey),store:r.props.store,dimension:r.store.chartsDimension.get(e.uniqueKey),title:e.displayName,filters:[],onDeleteChart:r.handlers.onDeleteChart,isNewlyAdded:r.handlers.isNewlyAdded,studyViewFilters:r.store.filters,analysisGroupsSettings:r.store.analysisGroupsSettings,cancerGeneFilterEnabled:r.store.oncokbCancerGeneFilterEnabled,setComparisonConfirmationModal:r.store.setComparisonConfirmationModal};switch(r.store.chartsType.get(e.uniqueKey)){case A.a.PIE_CHART:r.store.isUserDefinedCustomDataChart(e.uniqueKey)?(t.filters=r.store.getCustomDataFiltersByUniqueKey(e.uniqueKey).map(function(e){return e.value}),t.onValueSelection=r.handlers.setCustomChartFilters,t.onResetSelection=r.handlers.setCustomChartFilters,t.promise=r.store.getCustomDataCount(e)):(t.promise=r.store.getClinicalDataCount(e),t.filters=r.store.getClinicalDataFiltersByUniqueKey(e.uniqueKey).map(function(e){return e.value}),t.onValueSelection=r.handlers.onValueSelection,t.onResetSelection=r.handlers.onValueSelection),t.onChangeChartType=r.handlers.onChangeChartType,t.getData=function(t){return r.store.getPieChartDataDownload(e,t)},t.downloadTypes=["Summary Data","Full Data","SVG","PDF"];break;case A.a.BAR_CHART:r.store.isGeneSpecificChart(e.uniqueKey)?(t.promise=r.store.getGenomicChartDataBin(e),t.filters=r.store.getGenomicDataIntervalFiltersByUniqueKey(t.chartMeta.uniqueKey),t.onDataBinSelection=r.handlers.onGenomicDataBinSelection,t.onResetSelection=r.handlers.onGenomicDataBinSelection,t.getData=function(){return r.store.getChartDownloadableData(e)}):r.store.isGenericAssayChart(e.uniqueKey)?(t.promise=r.store.getGenericAssayChartDataBin(e),t.filters=r.store.getGenericAssayDataIntervalFiltersByUniqueKey(t.chartMeta.uniqueKey),t.onDataBinSelection=r.handlers.onGenericAssayDataBinSelection,t.onResetSelection=r.handlers.onGenericAssayDataBinSelection,t.getData=function(){return r.store.getChartDownloadableData(e)}):(t.promise=r.store.getClinicalDataBin(e),t.filters=r.store.getClinicalDataFiltersByUniqueKey(e.uniqueKey),t.onDataBinSelection=r.handlers.onDataBinSelection,t.onResetSelection=r.handlers.onDataBinSelection,t.getData=function(){return r.store.getChartDownloadableData(e)}),t.onToggleLogScale=r.handlers.onToggleLogScale,t.onToggleNAValue=r.handlers.onToggleNAValue,t.showLogScaleToggle=r.store.isLogScaleToggleVisible(e.uniqueKey,t.promise.result),t.logScaleChecked=r.store.isLogScaleChecked(e.uniqueKey),t.isShowNAChecked=r.store.isShowNAChecked(e.uniqueKey),t.showNAToggle=r.store.isShowNAToggleVisible(t.promise.result),t.downloadTypes=["Data","SVG","PDF"];break;case A.a.TABLE:r.store.isUserDefinedCustomDataChart(e.uniqueKey)?(t.filters=r.store.getPreDefinedCustomChartFilters(t.chartMeta.uniqueKey),t.onValueSelection=r.handlers.setCustomChartFilters,t.onResetSelection=r.handlers.setCustomChartFilters,t.promise=r.store.getCustomDataCount(e)):(t.filters=r.store.getClinicalDataFiltersByUniqueKey(e.uniqueKey).map(function(e){return e.value}),t.promise=r.store.getClinicalDataCount(e),t.onValueSelection=r.handlers.onValueSelection,t.onResetSelection=r.handlers.onValueSelection),t.onChangeChartType=r.handlers.onChangeChartType,t.getData=function(){return r.store.getChartDownloadableData(e)},t.downloadTypes=["Data"];break;case A.a.MUTATED_GENES_TABLE:t.filters=r.store.getGeneFiltersByUniqueKey(e.uniqueKey),t.promise=r.store.mutatedGeneTableRowData,t.onValueSelection=r.store.addGeneFilters,t.onResetSelection=function(){return r.store.resetGeneFilter(e.uniqueKey)},t.selectedGenes=r.store.selectedGenes,t.onGeneSelect=r.store.onCheckGene,t.title=r.store.getChartTitle(A.a.MUTATED_GENES_TABLE,t.title),t.getData=function(){return r.store.getMutatedGenesDownloadData()},t.genePanelCache=r.store.genePanelCache,t.downloadTypes=["Data"],t.filterByCancerGenes=r.store.filterMutatedGenesTableByCancerGenes,t.onChangeCancerGeneFilter=r.store.updateMutatedGenesTableByCancerGenesFilter,t.alterationFilterEnabled=c.b.serverConfig.skin_show_settings_menu,t.filterAlterations=r.store.isGlobalMutationFilterActive;break;case A.a.STRUCTURAL_VARIANT_GENES_TABLE:t.filters=r.store.getGeneFiltersByUniqueKey(e.uniqueKey),t.promise=r.store.structuralVariantGeneTableRowData,t.onValueSelection=r.store.addGeneFilters,t.onResetSelection=function(){return r.store.resetGeneFilter(e.uniqueKey)},t.selectedGenes=r.store.selectedGenes,t.onGeneSelect=r.store.onCheckGene,t.title=r.store.getChartTitle(A.a.STRUCTURAL_VARIANT_GENES_TABLE,t.title),t.getData=function(){return r.store.getStructuralVariantGenesDownloadData()},t.genePanelCache=r.store.genePanelCache,t.downloadTypes=["Data"],t.filterByCancerGenes=r.store.filterSVGenesTableByCancerGenes,t.onChangeCancerGeneFilter=r.store.updateSVGenesTableByCancerGenesFilter,t.alterationFilterEnabled=c.b.serverConfig.skin_show_settings_menu,t.filterAlterations=r.store.isGlobalMutationFilterActive;break;case A.a.CNA_GENES_TABLE:t.filters=r.store.getGeneFiltersByUniqueKey(e.uniqueKey),t.promise=r.store.cnaGeneTableRowData,t.onValueSelection=r.store.addGeneFilters,t.onResetSelection=function(){return r.store.resetGeneFilter(e.uniqueKey)},t.selectedGenes=r.store.selectedGenes,t.onGeneSelect=r.store.onCheckGene,t.title=r.store.getChartTitle(A.a.CNA_GENES_TABLE,t.title),t.getData=function(){return r.store.getGenesCNADownloadData()},t.genePanelCache=r.store.genePanelCache,t.downloadTypes=["Data"],t.filterByCancerGenes=r.store.filterCNAGenesTableByCancerGenes,t.onChangeCancerGeneFilter=r.store.updateCNAGenesTableByCancerGenesFilter,t.alterationFilterEnabled=c.b.serverConfig.skin_show_settings_menu,t.filterAlterations=r.store.isGlobalAlterationFilterActive;break;case A.a.GENOMIC_PROFILES_TABLE:t.filters=Object(u.toJS)(r.store.genomicProfilesFilter),t.promise=r.store.molecularProfileSampleCounts,t.onValueSelection=r.store.addGenomicProfilesFilter,t.onResetSelection=function(){r.store.setGenomicProfilesFilter([])};break;case A.a.CASE_LIST_TABLE:t.filters=Object(u.toJS)(r.store.caseListsFilter),t.promise=r.store.caseListSampleCounts,t.onValueSelection=r.store.addCaseListsFilter,t.onResetSelection=function(){r.store.setCaseListsFilter([])};break;case A.a.SURVIVAL:t.promise=r.store.survivalPlotData,t.getData=function(){return r.store.getSurvivalDownloadData(e)},t.patientToAnalysisGroup=r.store.patientToAnalysisGroup,t.downloadTypes=["Data","SVG","PDF"],t.description=r.store.survivalDescriptions.result?r.store.survivalDescriptions.result[e.uniqueKey.substring(0,e.uniqueKey.lastIndexOf("_SURVIVAL"))][0]:void 0;break;case A.a.SCATTER:t.filters=r.store.getScatterPlotFiltersByUniqueKey(t.chartMeta.uniqueKey),t.promise=r.store.mutationCountVsCNADensityData,t.onValueSelection=function(e){r.store.updateScatterPlotFilterByValues(t.chartMeta.uniqueKey,e)},t.onResetSelection=function(){r.store.updateScatterPlotFilterByValues(t.chartMeta.uniqueKey)},t.sampleToAnalysisGroup=r.store.sampleToAnalysisGroup,t.getData=function(){return r.store.getScatterDownloadData()},t.downloadTypes=["Data","SVG","PDF"];break;case A.a.SAMPLE_TREATMENTS_TABLE:t.filters=r.store.sampleTreatmentFiltersAsStrings,t.promise=r.store.sampleTreatments,t.onValueSelection=r.store.onSampleTreatmentSelection,t.onResetSelection=function(){r.store.clearSampleTreatmentFilters()};break;case A.a.PATIENT_TREATMENTS_TABLE:t.filters=r.store.patientTreatmentFiltersAsStrings,t.promise=r.store.patientTreatments,t.onValueSelection=r.store.onPatientTreatmentSelection,t.onResetSelection=function(){r.store.clearPatientTreatmentFilters()}}return n.createElement("div",{key:e.uniqueKey},n.createElement(So,null,n.createElement(po,Oo({key:e.uniqueKey},t))))}}),Object(u.makeObservable)(To(r)),r.store=e.store,r.handlers={onValueSelection:function(e,t){r.store.updateClinicalDataFilterByValues(e.uniqueKey,t.map(function(e){return{value:e}}))},onDataBinSelection:function(e,t){r.store.updateClinicalDataIntervalFilters(e.uniqueKey,t)},onToggleLogScale:function(e){r.store.toggleLogScale(e.uniqueKey)},onToggleNAValue:function(e){r.store.toggleNAValue(e.uniqueKey)},onDeleteChart:function(e){r.store.resetFilterAndChangeChartVisibility(e.uniqueKey,!1)},onChangeChartType:function(e,t){r.store.changeChartType(e,t)},isNewlyAdded:function(e){return r.store.isNewlyAdded(e)},setCustomChartFilters:function(e,t){r.store.setCustomChartFilters(e.uniqueKey,t)},onLayoutChange:function(e){r.store.updateCurrentGridLayout(e),r.onResize(e)},resetGeneFilter:function(e){r.store.resetGeneFilter(e.uniqueKey)},onGenomicDataBinSelection:function(e,t){r.store.updateGenomicDataIntervalFilters(e.uniqueKey,t)},onGenericAssayDataBinSelection:function(e,t){r.store.updateGenericAssayDataIntervalFilters(e.uniqueKey,t)}},r}var r,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_o(e,t)}(t,n["Component"]),r=t,(o=[{key:"onResize",value:function(e){var t=this;e.filter(function(e){var r=t.store.chartsDimension.get(e.i);return r&&(r.h!==e.h||r.w!==e.w)}).forEach(function(e){var r=e.i,n=t.store.chartsDimension.get(r);n.h=e.h,n.w=e.w,t.store.chartsDimension.set(r,n)})}},{key:"getProgressItems",value:function(e){var t=[this.store.initialVisibleAttributesClinicalDataBinCountData,this.store.initialVisibleAttributesClinicalDataCountData],r=[this.store.caseListSampleCounts,this.store.selectedSamples],n=e>2&&"pending"===Co.Z.apply(void 0,t),o=e>2&&"pending"===Co.Z.apply(void 0,r);return[{label:"Loading meta information",promises:[this.store.defaultVisibleAttributes,this.store.mutationProfiles,this.store.cnaProfiles]},{label:"Loading clinical data"+(n?" - this can take several seconds":""),promises:t},{label:"Loading sample data"+(o?" - this can take several seconds":""),promises:r},{label:"Rendering"}]}},{key:"render",value:function(){var e=this;return n.createElement("div",null,n.createElement(xe.a,{isLoading:this.store.loadingInitialDataForSummaryTab,size:"big",center:!0},n.createElement(Ue.a,{getItems:this.getProgressItems,show:this.store.loadingInitialDataForSummaryTab,sequential:!0})),this.store.invalidSampleIds.result.length>0&&this.showErrorMessage&&n.createElement("div",null,n.createElement("div",{className:"alert alert-danger"},n.createElement("button",{type:"button",className:"close",onClick:function(){return e.showErrorMessage=!1}},"×"),"The following sample(s) might have been deleted/updated with the recent data updates",n.createElement("br",null),n.createElement("ul",{style:{listStyle:"none",padding:"10px",maxHeight:"300px",overflowY:"scroll"}},this.store.invalidSampleIds.result.map(function(e){return n.createElement("li",null,e.studyId+":"+e.sampleId)})))),this.store.showSettingRestoreMsg&&n.createElement("div",null,n.createElement("div",{className:"alert alert-info"},n.createElement("button",{type:"button",className:"close",onClick:function(){e.store.hideRestoreSettingsMsg=!0}},"×"),"Your previously saved layout preferences have been applied.",n.createElement("button",{className:"btn btn-primary btn-sm",onClick:function(){e.store.hideRestoreSettingsMsg=!0},style:{marginLeft:"10px"}},"Keep Saved Layout"),n.createElement("button",{className:"btn btn-primary btn-sm",onClick:function(){e.store.hideRestoreSettingsMsg=!0,e.store.undoUserChartSettings()},style:{marginLeft:"10px"}},"Revert to Previous Layout"))),!this.store.loadingInitialDataForSummaryTab&&!this.store.blockLoading&&n.createElement("div",{"data-test":"summary-tab-content"},n.createElement("div",{className:ot.a.studyViewFlexContainer},this.store.defaultVisibleAttributes.isComplete&&n.createElement(ho.a,{className:"layout",style:{width:this.store.containerWidth},width:this.store.containerWidth,cols:this.store.studyViewPageLayoutProps.cols,rowHeight:this.store.studyViewPageLayoutProps.grid.h,layout:this.store.studyViewPageLayoutProps.layout,margin:[A.d.layout.gridMargin.x,A.d.layout.gridMargin.y],useCSSTransforms:!1,draggableHandle:".".concat(at.a.draggable),onLayoutChange:this.handlers.onLayoutChange,onResizeStop:this.onResize},this.store.visibleAttributes.map(this.renderAttributeChart)))),this.props.store.selectedSamples.isComplete&&0===this.props.store.selectedSamples.result.length&&n.createElement("div",{className:ot.a.studyViewNoSamples},n.createElement("div",{className:ot.a.studyViewNoSamplesInner},n.createElement("p",null,"The filters you have selected have filtered out all the samples in this study; because of this, no data visualizations are shown."),n.createElement("p",null,"You can remove filters in the header of this page to widen your search criteria and add samples back to your results."))))}}])&&wo(r.prototype,o),i&&wo(r,i),t}();Po([u.observable],ko.prototype,"showErrorMessage",void 0),Po([y.default],ko.prototype,"onResize",null),Po([y.default],ko.prototype,"getProgressItems",null),ko=Po([s.observer],ko);var jo=r(1199),Io=r.n(jo),Do=r(835);function No(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ro(e){return(Ro=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Go(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mo(e,t){return(Mo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fo(e){return(Fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var xo=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":Fo(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},Lo=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=!(o=Ro(t).call(this,e))||"object"!==Fo(o)&&"function"!=typeof o?Go(n):o,Object.defineProperty(Go(r),"downloadingData",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(Go(r),"showDownloadErrorMessage",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(Go(r),"geneValidationHasIssue",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object(u.makeObservable)(Go(r)),r}var r,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mo(e,t)}(t,n["Component"]),r=t,(o=[{key:"updateSelectedGenes",value:function(e,t,r){this.geneValidationHasIssue=""===r||!i.isUndefined(e.error)||0!==t.suggestions.length,this.props.store.updateSelectedGenes(e.query,r)}},{key:"render",value:function(){var e=this;return n.createElement("div",{className:"studyViewSummaryHeader"},n.createElement("div",{className:Io.a.rightPanel},n.createElement("div",{className:"small"},n.createElement(Do.b,{inputGeneQuery:this.props.store.geneQueryStr,validateInputGeneQuery:!0,callback:this.updateSelectedGenes,location:Do.a.STUDY_VIEW_PAGE,error:this.oqlSubmitError,messages:this.oqlMessages})),n.createElement("button",{disabled:this.isQueryButtonDisabled,className:ct()("btn btn-primary btn-sm",Io.a.submitQuery),"data-event":Object(j.e)({category:"studyPage",action:"submitQuery",label:this.props.store.queriedPhysicalStudyIds.result}),"data-test":"geneSetSubmit",onClick:function(){return e.props.store.onSubmitQuery()}},"Query")))}},{key:"isQueryButtonDisabled",get:function(){return""===this.props.store.geneQueryStr||this.geneValidationHasIssue||!!this.oqlSubmitError}},{key:"isQueryLimitReached",get:function(){return!!this.props.store.selectedSamples.isComplete&&this.props.store.geneQueries.length*this.props.store.selectedSamples.result.length>c.b.serverConfig.query_product_limit}},{key:"geneLimit",get:function(){return this.props.store.selectedSamples.isComplete?Math.floor(c.b.serverConfig.query_product_limit/this.props.store.selectedSamples.result.length):0}},{key:"oqlMessages",get:function(){return Object(h.db)(this.props.store.geneQueries)}},{key:"oqlSubmitError",get:function(){if(this.props.store.isSingleNonVirtualStudyQueried){if(this.props.store.alterationTypesInOQL.haveMutInQuery&&!this.props.store.defaultMutationProfile)return"Mutation data query specified in OQL, but no mutation profile is available for the selected study.";if(this.props.store.alterationTypesInOQL.haveCnaInQuery&&!this.props.store.defaultCnaProfile)return"CNA data query specified in OQL, but no CNA profile is available in the selected study.";if(this.props.store.alterationTypesInOQL.haveMrnaInQuery&&!this.props.store.defaultMrnaProfile)return"mRNA expression data query specified in OQL, but no mRNA profile is available in the selected study.";if(this.props.store.alterationTypesInOQL.haveProtInQuery&&!this.props.store.defaultProtProfile)return"Protein level data query specified in OQL, but no protein level profile is available in the selected study."}return this.props.store.alterationTypesInOQL.haveMrnaInQuery&&this.props.store.displayedStudies.isComplete&&this.props.store.displayedStudies.result.length>1?"Expression filtering in the gene list (the EXP command) is not supported when doing cross cancer queries.":this.props.store.alterationTypesInOQL.haveProtInQuery&&this.props.store.displayedStudies.isComplete&&this.props.store.displayedStudies.result.length>1?"Protein level filtering in the gene list (the PROT command) is not supported when doing cross cancer queries.":this.isQueryLimitReached?"Please limit your queries to ".concat(this.geneLimit," genes or fewer."):void 0}}])&&No(r.prototype,o),a&&No(r,a),t}();xo([u.observable],Lo.prototype,"downloadingData",void 0),xo([u.observable],Lo.prototype,"showDownloadErrorMessage",void 0),xo([u.observable],Lo.prototype,"geneValidationHasIssue",void 0),xo([u.action.bound],Lo.prototype,"updateSelectedGenes",null),xo([u.computed],Lo.prototype,"isQueryButtonDisabled",null),xo([u.computed],Lo.prototype,"isQueryLimitReached",null),xo([u.computed],Lo.prototype,"geneLimit",null),xo([u.computed],Lo.prototype,"oqlMessages",null),xo([u.computed],Lo.prototype,"oqlSubmitError",null);var Bo=Lo=xo([s.observer],Lo),Uo=r(351),Vo=r(1107);function qo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ko(e){return(Ko=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ho(e,t){return(Ho=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zo(e){return(zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Qo=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":zo(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},Jo=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=!(o=Ko(t).call(this,e))||"object"!==zo(o)&&"function"!=typeof o?Wo(n):o,Object.defineProperty(Wo(r),"showMoreDescription",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object(u.makeObservable)(Wo(r)),r}var r,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ho(e,t)}(t,n["Component"]),r=t,(o=[{key:"render",value:function(){var e=this;return n.createElement("div",{className:ct()(Io.a.summary)},n.createElement("h3",{style:{marginBottom:3,display:"flex",alignItems:"baseline"}},this.name,this.props.isMixedReferenceGenome&&Object(oe.d)(),this.props.hasRawDataForDownload&&n.createElement(F.i,{trigger:["hover"],placement:"top",overlay:n.createElement("span",null,"Download all clinical and genomic data of this study")},n.createElement("span",{"data-test":"studySummaryRawDataDownloadIcon","data-event":Object(j.e)({category:"studyPage",action:"dataDownload",label:this.props.studies.map(function(e){return e.studyId}).join(",")}),style:{marginLeft:"10px",fontSize:"14px"}},n.createElement(Vo.a,{studyId:this.props.studies[0].studyId})))),n.createElement("div",{className:Io.a.description},n.createElement("div",null,this.descriptionFirstLine,this.hasMoreDescription&&n.createElement("i",{className:"fa fa-".concat(this.showMoreDescription?"minus":"plus","-circle"),onClick:function(){return e.showMoreDescription=!e.showMoreDescription},style:{marginLeft:"5px",cursor:"pointer"}})),this.showMoreDescription&&n.createElement("div",null,n.createElement("ul",{className:Io.a.studyLinks},this.descriptionRemainingLines),this.props.showOriginStudiesInSummaryDescription&&n.createElement("div",null,this.props.originStudies.isComplete&&this.props.originStudies.result.length>0&&n.createElement("span",null,n.createElement("span",{style:{fontWeight:"bold",marginBottom:"5px",display:"block"}},"This virtual study was derived from:"),this.props.originStudies.result.map(function(e){return n.createElement(Uo.a,e)})),n.createElement(xe.a,{isLoading:this.props.originStudies.isPending,center:!0,size:"big"})))))}},{key:"name",get:function(){return 1===this.props.studies.length?this.props.studies[0].name:"Combined Study"}},{key:"descriptionFirstLine",get:function(){if(1===this.props.studies.length){var e=[n.createElement("span",{dangerouslySetInnerHTML:{__html:this.props.studies[0].description.split(/\n+/g)[0]}})];return this.props.studies[0].pmid&&e.push(n.createElement("a",{target:"_blank",href:Object(F.hb)("/pubmed/".concat(this.props.studies[0].pmid)),style:{marginLeft:"5px"}},"PubMed")),n.createElement("span",null,e)}return n.createElement("span",null,"This combined study contains samples from ".concat(this.props.studies.length," studies"))}},{key:"hasMoreDescription",get:function(){return this.props.showOriginStudiesInSummaryDescription||this.props.studies.length>1||this.props.studies[0].description.split(/\n/g).length>1}},{key:"descriptionRemainingLines",get:function(){if(1!==this.props.studies.length)return i.map(this.props.studies,function(e){return n.createElement("li",null,n.createElement("a",{href:Object(P.A)(e.studyId),target:"_blank"},e.name))});var e=this.props.studies[0].description.split(/\n/g);return e.length>1?[n.createElement("span",{style:{whiteSpace:"pre"},dangerouslySetInnerHTML:{__html:e.slice(1).join("\n")}})]:[]}}])&&qo(r.prototype,o),a&&qo(r,a),t}();Qo([u.observable],Jo.prototype,"showMoreDescription",void 0),Qo([u.computed],Jo.prototype,"name",null),Qo([u.computed],Jo.prototype,"descriptionFirstLine",null),Qo([u.computed],Jo.prototype,"hasMoreDescription",null),Qo([u.computed],Jo.prototype,"descriptionRemainingLines",null);var Yo=Jo=Qo([s.observer],Jo),Zo=r(247),Xo=r.n(Zo),$o=r(1372),ei=r.n($o),ti=r(1373),ri=r.n(ti);function ni(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function oi(e){return(oi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ii(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ai(e,t){return(ai=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function si(e){return(si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var li=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":si(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},ui=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=!(o=oi(t).call(this,e))||"object"!==si(o)&&"function"!=typeof o?ii(n):o,Object(u.makeObservable)(ii(r)),r}var r,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ai(e,t)}(t,n["Component"]),r=t,(o=[{key:"render",value:function(){return n.createElement("div",{className:ei.a.main,style:{background:this.props.backgroundColor,color:this.contentColor}},n.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"}},n.createElement("span",{className:ei.a.content},this.props.content),this.props.infoSection),n.createElement(Be.If,{condition:i.isFunction(this.props.onDelete)},n.createElement("span",{"data-test":"pill-tag-delete",className:ei.a.delete,onClick:this.props.onDelete},n.createElement("i",{className:"fa fa-times-circle"}))))}},{key:"contentColor",get:function(){return"light"===ri()(this.props.backgroundColor)?"#000":"#fff"}}])&&ni(r.prototype,o),a&&ni(r,a),t}();li([u.computed],ui.prototype,"contentColor",null);var ci=r(1375),pi=r.n(ci);function di(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fi(e){return(fi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mi(e,t){return(mi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bi(e){return(bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var yi=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":bi(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},gi=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=!(o=fi(t).call(this,e))||"object"!==bi(o)&&"function"!=typeof o?hi(n):o,Object(u.makeObservable)(hi(r)),r}var r,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mi(e,t)}(t,n["Component"]),r=t,(o=[{key:"render",value:function(){return n.createElement("div",{className:pi.a.main},this.child)}},{key:"child",get:function(){var e=this,t=[];return this.props.group&&t.push(n.createElement("span",{className:ct()(pi.a.text,pi.a.mostLeft)},"(")),i.reduce(this.props.components,function(t,r,o){return o>0&&t.push(n.createElement("span",{className:pi.a.text},e.props.operation)),t.push(r),t},t),this.props.group&&t.push(n.createElement("span",{className:ct()(pi.a.text,pi.a.mostRight)},")")),t}}])&&di(r.prototype,o),a&&di(r,a),t}();function vi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Si(e){return(Si=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ci(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oi(e,t){return(Oi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wi(e){return(wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}yi([u.computed],gi.prototype,"child",null),gi=yi([s.observer],gi);var Ei=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":wi(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},Ti=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=!(o=Si(t).call(this,e))||"object"!==wi(o)&&"function"!=typeof o?Ci(n):o,Object(u.makeObservable)(Ci(r)),r}var r,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oi(e,t)}(t,n["Component"]),r=t,(o=[{key:"renderClinicalDataFilters",value:function(e,t,r){var o=this;return i.reduce(e||[],function(e,t){var i=o.props.attributesMetaSet[t.attributeId];if(i){var a=o.props.clinicalAttributeIdToDataType[t.attributeId]===b.e.STRING?o.renderCategoricalDataFilter(t,r,i):o.renderDataBinFilter(t.values,r,i);e.push(n.createElement("div",{className:Xo.a.parentGroupLogic},n.createElement(gi,{components:[n.createElement("span",{className:Xo.a.filterClinicalAttrName},i.displayName),a],operation:":",group:!1})))}return e},t)}},{key:"renderDataBinFilter",value:function(e,t,r){return n.createElement(ui,{content:Object(b.yb)(e),backgroundColor:A.d.colors.theme.clinicalFilterContent,onDelete:function(){return t(r.uniqueKey,[])}})}},{key:"renderCategoricalDataFilter",value:function(e,t,r){return n.createElement(gi,{components:e.values.map(function(o){return n.createElement(ui,{content:o.value,backgroundColor:A.d.colors.theme.clinicalFilterContent,onDelete:function(){return t(r.uniqueKey,i.remove(e.values,function(e){return e.value!==o.value}))}})}),operation:"or",group:!1})}},{key:"renderTreatmentFilter",value:function(e){var t=this,r=e.filters.map(function(e,r){var o=e.filters.map(function(e,o){var i=t.getFilterStringAndRemoveFunc(e);return n.createElement(ui,{content:e.treatment+" "+i.str,backgroundColor:A.d.colors.theme.clinicalFilterContent,onDelete:function(){i.func(r,o)}})});return n.createElement(gi,{components:o,operation:"or",group:!0})});return n.createElement(gi,{components:r,operation:"and",group:!1})}},{key:"getFilterStringAndRemoveFunc",value:function(e){return e.hasOwnProperty("time")?{str:e.time,func:this.props.removeSampleTreatmentsFilter}:{str:"",func:this.props.removePatientTreatmentsFilter}}},{key:"groupedGeneQueries",value:function(e,t){var r=this;return e.map(function(e){var o=Ht.n,i=e.hugoGeneSymbol;switch(t.chartType){case A.a.MUTATED_GENES_TABLE:o=F.w;break;case A.a.STRUCTURAL_VARIANT_GENES_TABLE:o=F.K;break;case A.a.CNA_GENES_TABLE:if(1===e.alterations.length){var a=Object(b.J)(e.alterations[0]);a&&(o=a)}}return n.createElement(ui,{content:i,backgroundColor:o,infoSection:n.createElement(b.f,{chartType:t.chartType,geneFilterQuery:e}),onDelete:function(){return r.props.removeGeneFilter(t.uniqueKey,Object(b.D)(e))}})})}},{key:"groupedGenomicProfiles",value:function(e){var t=this;return e.map(function(e){return n.createElement(ui,{content:t.props.molecularProfileNameSet[e]||e,backgroundColor:A.d.colors.theme.clinicalFilterContent,onDelete:function(){return t.props.removeGenomicProfileFilter(e)}})})}},{key:"groupedCaseLists",value:function(e){var t=this;return e.map(function(e){return n.createElement(ui,{content:t.props.caseListNameSet[e]||e,backgroundColor:A.d.colors.theme.clinicalFilterContent,onDelete:function(){return t.props.removeCaseListsFilter(e)}})})}},{key:"render",value:function(){return this.showFilters?n.createElement("div",{className:ct()(Xo.a.userSelections,"userSelections")},this.allComponents,n.createElement("button",{"data-test":"clear-all-filters",className:ct()("btn btn-default btn-sm",Xo.a.summaryClearAllBtn),onClick:this.props.clearAllFilters},"Clear All Filters"),n.createElement(F.i,{placement:"topLeft",overlay:n.createElement("div",null,"Get bookmark link for this filter")},n.createElement("a",{onClick:this.props.onBookmarkClick,className:Xo.a.bookmarkButton},n.createElement("span",{className:"fa-stack fa-4x"},n.createElement("i",{className:"fa fa-circle fa-stack-2x"}),n.createElement("i",{className:"fa fa-link fa-stack-1x"}))))):null}},{key:"showFilters",get:function(){return this.allComponents.length>0}},{key:"allComponents",get:function(){var e=this,t=[];if(this.props.numberOfSelectedSamplesInCustomSelection>0&&t.push(n.createElement("div",{className:Xo.a.parentGroupLogic},n.createElement(gi,{components:[n.createElement("span",{className:Xo.a.filterClinicalAttrName},"Custom Selection"),n.createElement(ui,{content:"".concat(this.props.numberOfSelectedSamplesInCustomSelection," sample").concat(this.props.numberOfSelectedSamplesInCustomSelection>1?"s":""),backgroundColor:A.d.colors.theme.clinicalFilterContent,onDelete:function(){return e.props.removeCustomSelectionFilter()}})],operation:":",group:!1}))),this.props.comparisonGroupSelection.length>0){var r=Object(D.x)(this.props.comparisonGroupSelection).length,o=Object(b.lb)(this.props.comparisonGroupSelection).length;t.push(n.createElement("div",{className:Xo.a.parentGroupLogic},n.createElement(gi,{components:[n.createElement("span",{className:Xo.a.filterClinicalAttrName},Object(b.qb)(this.props.comparisonGroupSelection)),n.createElement(ui,{content:Object(D.j)(r,o),backgroundColor:A.d.colors.theme.clinicalFilterContent,onDelete:function(){return e.props.removeComparisonGroupSelectionFilter()}})],operation:":",group:!1})))}this.renderClinicalDataFilters(this.props.filter.clinicalDataFilters,t,this.props.updateClinicalDataFilterByValues),this.renderClinicalDataFilters(this.props.filter.customDataFilters,t,function(t,r){e.props.updateCustomChartFilter(t,r.map(function(e){return e.value}))}),i.reduce(this.props.filter.genomicDataFilters||[],function(t,r){var o=Object(b.db)(r.hugoGeneSymbol,r.profileType),i=e.props.attributesMetaSet[o];return i&&t.push(n.createElement("div",{className:Xo.a.parentGroupLogic},n.createElement(gi,{components:[n.createElement("span",{className:Xo.a.filterClinicalAttrName},i.displayName),e.renderDataBinFilter(r.values,e.props.updateGenomicDataIntervalFilter,i)],operation:":",group:!1}))),t},t);var a=[];if(this.props.filter.genericAssayDataFilters&&i.forEach(this.props.filter.genericAssayDataFilters,function(t){var r=Object(b.bb)(t.stableId,t.profileType),o=e.props.attributesMetaSet[r];o&&a.push(n.createElement("div",{className:Xo.a.parentGroupLogic},n.createElement(gi,{components:[n.createElement("span",{className:Xo.a.filterClinicalAttrName},o.displayName),n.createElement(ui,{content:Object(b.yb)(t.values),backgroundColor:A.d.colors.theme.clinicalFilterContent,onDelete:function(){return e.props.updateGenericAssayDataIntervalFilter(o.uniqueKey,[])}})],operation:":",group:!1})))}),i.isEmpty(this.props.customChartsFilter)||i.reduce(this.props.customChartsFilter,function(t,r,o){var a=e.props.attributesMetaSet[o];return a&&t.push(n.createElement("div",{className:Xo.a.parentGroupLogic},n.createElement(gi,{components:[n.createElement("span",{className:Xo.a.filterClinicalAttrName},a.displayName),n.createElement(gi,{components:r.map(function(t){return n.createElement(ui,{content:t,backgroundColor:A.d.colors.theme.clinicalFilterContent,onDelete:function(){return e.props.updateCustomChartFilter(a.uniqueKey,i.remove(r,function(e){return e!==t}))}})}),operation:"or",group:!1})],operation:":",group:!1}))),t},t),i.reduce(this.props.filter.geneFilters||[],function(t,r){var o=Object(b.ub)(r.molecularProfileIds),i=e.props.attributesMetaSet[o];return i&&t.push(n.createElement("div",{className:Xo.a.parentGroupLogic},n.createElement(gi,{components:r.geneQueries.map(function(t){return n.createElement(gi,{components:e.groupedGeneQueries(t,i),operation:"or",group:t.length>1})}),operation:"and",group:!1}))),t},t),i.isEmpty(this.props.filter.genomicProfiles)||t.push(n.createElement("div",{className:Xo.a.parentGroupLogic},n.createElement(gi,{components:this.props.filter.genomicProfiles.map(function(t){return n.createElement(gi,{components:e.groupedGenomicProfiles(t),operation:"or",group:t.length>1})}),operation:"and",group:!1}))),i.isEmpty(this.props.filter.caseLists)||t.push(n.createElement("div",{className:Xo.a.parentGroupLogic},n.createElement(gi,{components:this.props.filter.caseLists.map(function(t){return n.createElement(gi,{components:e.groupedCaseLists(t),operation:"or",group:t.length>1})}),operation:"and",group:!1}))),a&&t.push.apply(t,a),this.props.filter.sampleTreatmentFilters&&this.props.filter.sampleTreatmentFilters.filters.length>0){var s=this.renderTreatmentFilter(this.props.filter.sampleTreatmentFilters);t.push(s)}if(this.props.filter.patientTreatmentFilters&&this.props.filter.patientTreatmentFilters.filters.length>0){var l=this.renderTreatmentFilter(this.props.filter.patientTreatmentFilters);t.push(l)}return t}}])&&vi(r.prototype,o),a&&vi(r,a),t}();Ei([u.computed],Ti.prototype,"showFilters",null),Ei([u.computed],Ti.prototype,"allComponents",null);var _i=Ti=Ei([s.observer],Ti);function Ai(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pi(e){return(Pi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ki(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ji(e,t){return(ji=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ii(e){return(Ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Di=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":Ii(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},Ni=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=!(o=Pi(t).call(this,e))||"object"!==Ii(o)&&"function"!=typeof o?ki(n):o,Object(u.makeObservable)(ki(r)),r}var r,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ji(e,t)}(t,n["Component"]),r=t,(o=[{key:"render",value:function(){return n.createElement("div",{className:"headBlock","data-test":"study-view-header"},i.keys(this.props.store.pageStatusMessages).length>0&&n.createElement("div",null,i.values(this.props.store.pageStatusMessages).map(function(e){return n.createElement("div",{className:"alert alert-".concat(e.status)},e.message)})),n.createElement("div",{style:{display:"flex"}},n.createElement(Yo,{hasRawDataForDownload:this.props.store.hasRawDataForDownload.result,studies:this.props.store.displayedStudies.result,originStudies:this.props.store.originStudies,showOriginStudiesInSummaryDescription:this.props.store.showOriginStudiesInSummaryDescription,isMixedReferenceGenome:this.props.store.isMixedReferenceGenome}),n.createElement(Bo,{store:this.props.store})),this.props.store.clinicalAttributeIdToDataType.isComplete&&n.createElement(_i,{filter:this.props.store.userSelections,comparisonGroupSelection:this.props.store.filterComparisonGroups,numberOfSelectedSamplesInCustomSelection:this.props.store.numberOfSelectedSamplesInCustomSelection,customChartsFilter:this.customChartsFilter,attributesMetaSet:this.props.store.chartMetaSetWithChartType,clinicalAttributeIdToDataType:this.props.store.clinicalAttributeIdToDataType.result,updateClinicalDataFilterByValues:this.props.store.updateClinicalDataFilterByValues,updateGenomicDataIntervalFilter:this.props.store.updateGenomicDataIntervalFiltersByValues,updateGenericAssayDataIntervalFilter:this.props.store.updateGenericAssayDataIntervalFiltersByValues,updateCustomChartFilter:this.props.store.setCustomChartFilters,removeGeneFilter:this.props.store.removeGeneFilter,removeCustomSelectionFilter:this.props.store.removeCustomSelectFilter,removeComparisonGroupSelectionFilter:this.props.store.removeComparisonGroupSelectionFilter,onBookmarkClick:this.props.onBookmarkClick,clearAllFilters:this.props.store.clearAllFilters,molecularProfileNameSet:this.props.store.molecularProfileNameSet.result||{},removeGenomicProfileFilter:this.props.store.removeGenomicProfileFilter,caseListNameSet:this.props.store.caseListNameSet.result||{},removeCaseListsFilter:this.props.store.removeCaseListsFilter,removeSampleTreatmentsFilter:this.props.store.removeSampleTreatmentsFilter,removePatientTreatmentsFilter:this.props.store.removePatientTreatmentsFilter}))}},{key:"customChartsFilter",get:function(){return i.fromPairs(this.props.store.preDefinedCustomChartFilterSet.toJSON())}}])&&Ai(r.prototype,o),a&&Ai(r,a),t}();Di([u.computed],Ni.prototype,"customChartsFilter",null);var Ri=Ni=Di([s.observer],Ni),Gi=r(1041),Mi=r(856),Fi=r(32),xi=r(1043);function Li(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Bi(e){return(Bi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ui(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vi(e,t){return(Vi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qi(e){return(qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ki=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":qi(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},Wi=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=!(o=Bi(t).call(this,e))||"object"!==qi(o)&&"function"!=typeof o?Ui(n):o,Object.defineProperty(Ui(r),"renderingComplete",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(Ui(r),"segmentTrackMaxHeight",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(Ui(r),"lastSelectedLocus",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object(u.makeObservable)(Ui(r)),r.segmentTrackMaxHeight=.7*C.a.size.height,r}var r,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vi(e,t)}(t,n["Component"]),r=t,(o=[{key:"updateLastSelectedLocus",value:function(e){this.lastSelectedLocus=e}},{key:"render",value:function(){var e=this;return n.createElement("div",null,n.createElement(xe.a,{isLoading:this.isSampleCountWithinThreshold&&this.isHidden,size:"big",center:!0},n.createElement(Ue.a,{getItems:function(){return e.progressItems},show:this.isSampleCountWithinThreshold&&this.isHidden,sequential:!0})),n.createElement("div",{style:{marginBottom:15,marginLeft:15}},n.createElement("span",null,this.selectionInfo),!this.hasNoSegmentData&&n.createElement(xi.a,{promise:this.activePromise,filename:this.filename})),n.createElement("div",{style:this.isHidden||this.hasNoSegmentData||!this.isSampleCountWithinThreshold?{opacity:0}:void 0},n.createElement(Gi.a,{tracks:[Object.assign(Object.assign({},Object(Mi.c)()),{height:this.segmentTrackHeight,features:this.features})],genome:this.genome,locus:this.lastSelectedLocus,onLocusChange:this.updateLastSelectedLocus,onRenderingStart:this.onIgvRenderingStart,onRenderingComplete:this.onIgvRenderingComplete,isVisible:this.props.store.currentTab===Fe.a.CN_SEGMENTS&&!this.isHidden})))}},{key:"onIgvRenderingStart",value:function(){this.renderingComplete=!1}},{key:"onIgvRenderingComplete",value:function(){this.renderingComplete=!0}},{key:"segmentTrackHeight",get:function(){return Object(Mi.b)(this.features,this.segmentTrackMaxHeight)}},{key:"features",get:function(){var e=this.activePromise&&this.activePromise.result||[];return Object(Mi.d)(e)}},{key:"filename",get:function(){return"".concat(this.props.store.downloadFilenamePrefix,"segments.seg")}},{key:"isHidden",get:function(){return this.isLoading||!this.renderingComplete}},{key:"isLoading",get:function(){return!!this.isSampleCountWithinThreshold&&(!this.activePromise||this.activePromise.isPending)}},{key:"isSampleCountWithinThreshold",get:function(){return!this.props.store.selectedSamples.result||!this.props.sampleThreshold||this.props.store.selectedSamples.result.length<=this.props.sampleThreshold}},{key:"activePromise",get:function(){return this.props.store.selectedSamples.result&&this.isSampleCountWithinThreshold?this.props.store.cnSegments:void 0}},{key:"progressItems",get:function(){return this.activePromise?[{label:"Loading copy number segments data...",promises:[this.activePromise]},{label:"Rendering"}]:[]}},{key:"hasNoSegmentData",get:function(){var e;return(null===(e=this.activePromise)||void 0===e?void 0:e.isComplete)&&(!this.activePromise.result||0===this.activePromise.result.length)}},{key:"genome",get:function(){var e=this.props.store.queriedPhysicalStudies.result?this.props.store.queriedPhysicalStudies.result[0]:void 0;return e?e.referenceGenome:Fi.a}},{key:"selectionInfo",get:function(){var e;if(this.isSampleCountWithinThreshold){var t=this.hasNoSegmentData?"No segmented":"Segmented",r=this.props.store.selectedSamples.result?"".concat(this.props.store.selectedSamples.result.length," "):"",n=1===(null===(e=this.props.store.selectedSamples.result)||void 0===e?void 0:e.length)?"sample":"samples";return"".concat(t," copy-number data for the selected ").concat(r).concat(n,".")}return"Too many samples (>".concat(this.props.sampleThreshold,") for copy number segmentation view, make a selection on Summary tab first.")}}])&&Li(r.prototype,o),i&&Li(r,i),t}();Object.defineProperty(Wi,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{sampleThreshold:2e4}}),Ki([u.observable],Wi.prototype,"renderingComplete",void 0),Ki([u.observable.ref],Wi.prototype,"segmentTrackMaxHeight",void 0),Ki([y.default],Wi.prototype,"updateLastSelectedLocus",null),Ki([u.computed],Wi.prototype,"segmentTrackHeight",null),Ki([u.computed],Wi.prototype,"features",null),Ki([u.computed],Wi.prototype,"filename",null),Ki([u.computed],Wi.prototype,"isHidden",null),Ki([u.computed],Wi.prototype,"isLoading",null),Ki([u.computed],Wi.prototype,"isSampleCountWithinThreshold",null),Ki([u.computed],Wi.prototype,"activePromise",null),Ki([u.computed],Wi.prototype,"progressItems",null),Ki([u.computed],Wi.prototype,"hasNoSegmentData",null),Ki([u.computed],Wi.prototype,"genome",null),Ki([u.action.bound],Wi.prototype,"onIgvRenderingStart",null),Ki([u.action.bound],Wi.prototype,"onIgvRenderingComplete",null);var Hi=Wi=Ki([s.observer],Wi),zi=(r(1376),r(872)),Qi=r(1200);function Ji(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Yi(e,t){return!t||"object"!==$i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zi(e){return(Zi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xi(e,t){return(Xi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $i(e){return($i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ea=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":$i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},ta=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Yi(this,Zi(t).apply(this,arguments))}var r,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xi(e,t)}(t,n["Component"]),r=t,(o=[{key:"render",value:function(){return n.createElement("div",{className:"alert alert-success",style:{marginTop:"10px",marginBottom:"0"}},n.createElement("span",null,n.createElement("i",{className:"fa fa-md fa-check"})," ",this.props.message))}}])&&Ji(r.prototype,o),i&&Ji(r,i),t}(),ra=ta=ea([s.observer],ta),na=r(1379),oa=r.n(na),ia=r(120),aa=r(118),sa=r(328);function la(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ua(e){return(ua=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ca(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pa(e,t){return(pa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function da(e){return(da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var fa=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":da(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},ha=function(e){function t(e){var r,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,i=ua(t).call(this,e),r=!i||"object"!==da(i)&&"function"!=typeof i?ca(o):i,Object.defineProperty(ca(r),"_selectedProfileOption",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(ca(r),"_oql",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(ca(r),"_genes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(ca(r),"_queryStr",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(ca(r),"genomicChartSelection",{enumerable:!0,configurable:!0,writable:!0,value:Object(aa.a)({await:function(){return[r.props.molecularProfileOptionsPromise]},render:function(){return 0===r.props.molecularProfileOptionsPromise.result.length?n.createElement("div",{style:{textAlign:"center"}},"No molecular profiles found"):n.createElement("div",{style:{width:r.props.containerWidth-20}},n.createElement(Do.b,{inputGeneQuery:r._queryStr,validateInputGeneQuery:!1,callback:function(){r._oql=arguments.length<=0?void 0:arguments[0],r._genes=arguments.length<=1?void 0:arguments[1],r._queryStr=arguments.length<=2?void 0:arguments[2]},location:Do.a.DEFAULT,textBoxPrompt:"Enter gene symbols",textAreaHeight:"40px"}),r.hasOQL&&n.createElement("div",{className:ct()("alert",oa.a.oqlerror)},n.createElement("span",{className:"fa fa-exclamation-circle"}),"OQL not allowed"),n.createElement("div",{style:{display:"flex",marginTop:"10px"}},n.createElement("div",{style:{flex:1,marginRight:15}},n.createElement(ia.default,{value:r.selectedOption,onChange:r.handleSelect,options:r.molecularProfileOptions,isClearable:!1,isSearchable:!1})),n.createElement("button",{disabled:r.isQueryInvalid||r.hasOQL,className:"btn btn-primary btn-sm","data-test":"GeneLevelSelectionSubmitButton",onClick:r.onAddChart},r.props.submitButtonText)))},renderPending:function(){return n.createElement("div",{style:{textAlign:"center",marginTop:"20px"}},n.createElement(xe.a,{isLoading:!0}),"Calculating data availability...")},renderError:function(){return n.createElement("div",null,n.createElement(sa.a,{message:"There was an error loading data. Please try again."}))}})}),Object(u.makeObservable)(ca(r)),r}var r,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pa(e,t)}(t,n["Component"]),r=t,(o=[{key:"onAddChart",value:function(){var e=this;if(void 0!==this.selectedOption){var t=this.validGenes.map(function(t){return{name:t.hugoGeneSymbol+": "+e.selectedOption.profileName,description:e.selectedOption.description,profileType:e.selectedOption.value,hugoGeneSymbol:t.hugoGeneSymbol}});this.props.onSubmit(t)}}},{key:"handleSelect",value:function(e){e&&e.value&&(this._selectedProfileOption=e)}},{key:"render",value:function(){return this.genomicChartSelection.component}},{key:"selectedOption",get:function(){return void 0!==this._selectedProfileOption?this._selectedProfileOption:this.props.molecularProfileOptionsPromise.isComplete?this.molecularProfileOptions[0]:void 0}},{key:"isQueryInvalid",get:function(){return""===this._queryStr||void 0===this._oql||void 0===this._genes||!i.isUndefined(this._oql.error)||0!==this._genes.suggestions.length}},{key:"hasOQL",get:function(){return!this.isQueryInvalid&&i.some(this._oql.query,function(e){return!1!==e.alterations})}},{key:"validGenes",get:function(){return this.isQueryInvalid||this.hasOQL?[]:this._genes.found}},{key:"molecularProfileOptions",get:function(){return this.props.molecularProfileOptionsPromise.isComplete?this.props.molecularProfileOptionsPromise.result.map(function(e){return Object.assign(Object.assign({},e),{label:"".concat(e.label," (").concat(e.count," samples)"),profileName:e.label})}):[]}}])&&la(r.prototype,o),a&&la(r,a),t}();Object.defineProperty(ha,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{disableGrouping:!1}}),fa([u.observable],ha.prototype,"_selectedProfileOption",void 0),fa([u.observable],ha.prototype,"_oql",void 0),fa([u.observable],ha.prototype,"_genes",void 0),fa([u.observable.ref],ha.prototype,"_queryStr",void 0),fa([u.action.bound],ha.prototype,"onAddChart",null),fa([u.action.bound],ha.prototype,"handleSelect",null),fa([u.computed],ha.prototype,"selectedOption",null),fa([u.computed],ha.prototype,"isQueryInvalid",null),fa([u.computed],ha.prototype,"hasOQL",null),fa([u.computed],ha.prototype,"validGenes",null),fa([u.computed],ha.prototype,"molecularProfileOptions",null);var ma=ha=fa([s.observer],ha),ba=r(8),ya=r(907);var ga=r(1380),va=r.n(ga),Sa=r(345);function Ca(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function wa(e,t,r){return t&&Oa(e.prototype,t),r&&Oa(e,r),e}function Ea(e,t){return!t||"object"!==ka(t)&&"function"!=typeof t?_a(e):t}function Ta(e){return(Ta=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Aa(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pa(e,t)}function Pa(e,t){return(Pa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ka(e){return(ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ja,Ia=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":ka(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},Da=function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})};!function(e){e.CUSTOM_DATA="Custom Data",e.CLINICAL="Clinical",e.GENOMIC="Genomic",e.GENE_SPECIFIC="Gene Specific"}(ja||(ja={}));var Na=function(e){function t(e,r){var o;return Ca(this,t),o=Ea(this,Ta(t).call(this,e,r)),Object.defineProperty(_a(o),"activeId",{enumerable:!0,configurable:!0,writable:!0,value:o.props.defaultActiveTab||b.c.CLINICAL}),Object.defineProperty(_a(o),"infoMessage",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(_a(o),"tabsWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(_a(o),"tabsDivRef",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(_a(o),"dataCount",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[o.props.store.dataWithCount,o.props.store.selectedSamples]},invoke:function(){return Da(_a(o),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(b.m)(this.props.store.dataWithCount.result,this.props.store.selectedSamples.result.length));case 1:case"end":return e.stop()}},e,this)}))},default:{}})}),Object.defineProperty(_a(o),"showAddNewChart",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(_a(o),"savingCustomData",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object(u.makeObservable)(_a(o)),o.tabsDivRef=n.createRef(),o}return Aa(t,n["Component"]),wa(t,[{key:"componentDidMount",value:function(){this.setTabsWidth(this.tabsDivRef.current)}},{key:"setTabsWidth",value:function(e){e&&(this.tabsWidth=e.offsetWidth)}},{key:"updateActiveId",value:function(e){this.activeId=e,this.resetInfoMessage()}},{key:"updateInfoMessage",value:function(e){this.infoMessage=e,setTimeout(this.resetInfoMessage,1e4)}},{key:"resetInfoMessage",value:function(){this.infoMessage=""}},{key:"onGenericAssaySubmit",value:function(e){this.infoMessage=function(e,t){var r="";if(1===e.length){var n=Object(b.bb)(e[0].genericAssayEntityId,e[0].profileType);r="".concat(e[0].name," ").concat(t.includes(n)?"is already":"has been"," added.")}else r="".concat(e.length," charts added");return r}(e,this.selectedAttrs),i.every(e,function(e){return e.dataType===B.b.LIMITVALUE})&&this.props.store.addGenericAssayContinuousCharts(e)}},{key:"onAddAll",value:function(e){this.props.store.addCharts(this.selectedAttrs.concat(e));var t="".concat(e.length," chart").concat(e.length>1?"s":""," added");this.props.currentTab===Fe.a.CLINICAL_DATA?this.updateInfoMessage("".concat(e.length," column").concat(e.length>1?"s":""," added to table and ").concat(t," in Summary tab")):this.props.currentTab===Fe.a.SUMMARY?this.updateInfoMessage(t):this.updateInfoMessage("Added")}},{key:"onClearAll",value:function(e){this.props.store.updateChartsVisibility(i.reduce(this.selectedAttrs,function(t,r){return e.includes(r)||t.push(r),t},[]));var t="".concat(e.length," chart").concat(e.length>1?"s":""," removed");this.props.currentTab===Fe.a.CLINICAL_DATA?this.updateInfoMessage("".concat(e.length," column").concat(e.length>1?"s":""," removed from table and ").concat(t," from Summary tab")):this.props.currentTab===Fe.a.SUMMARY?this.updateInfoMessage(t):this.updateInfoMessage("Removed")}},{key:"onToggleOption",value:function(e){var t=this.props.store.chartMetaSet[e];if(void 0!==t){var r=A.b[this.props.store.chartsType.get(e)];if(this.selectedAttrs.includes(e)){this.props.store.resetFilterAndChangeChartVisibility(e,!1);var n="";this.props.currentTab===Fe.a.SUMMARY?n=" ".concat(r):this.props.currentTab===Fe.a.CLINICAL_DATA&&(n=" column"),Object(j.f)({category:"studyPage",action:"removeChart",label:e}),this.updateInfoMessage("".concat(t.displayName).concat(n," is removed"))}else{this.props.store.addCharts(this.selectedAttrs.concat([e]));var o="";this.props.currentTab===Fe.a.SUMMARY?o=" as a ".concat(r):this.props.currentTab===Fe.a.CLINICAL_DATA&&(o=" to table and as ".concat(r," in Summary tab")),this.updateInfoMessage("".concat(t.displayName," added").concat(o)),Object(j.f)({category:"studyPage",action:"addChart",label:e})}}}},{key:"onToggleAddNewChart",value:function(){this.showAddNewChart=!this.showAddNewChart}},{key:"render",value:function(){var e=this;return n.createElement("div",{style:{display:"flex",flexDirection:"column"},ref:this.tabsDivRef},n.createElement(l.b,{unmountOnHide:!1,activeTabId:this.activeId,onTabClick:this.updateActiveId,className:"addChartTabs mainTabs"},n.createElement(l.a,{key:0,id:b.c.CLINICAL,linkText:ja.CLINICAL,className:"addClinicalChartTab"},n.createElement(zi.a,{width:this.getTabsWidth,options:this.clinicalDataOptions,freqPromise:this.dataCount,onAddAll:this.onAddAll,onClearAll:this.onClearAll,onToggleOption:this.onToggleOption})),n.createElement(l.a,{key:1,id:b.c.GENOMIC,linkText:ja.GENOMIC,hide:this.props.disableGenomicTab||0===this.genomicChartOptions.length,className:"addGenomicChartTab"},n.createElement(zi.a,{width:this.getTabsWidth,options:this.genomicChartOptions,freqPromise:this.dataCount,onAddAll:this.onAddAll,onClearAll:this.onClearAll,onToggleOption:this.onToggleOption})),n.createElement(l.a,{key:2,id:b.c.GENE_SPECIFIC,linkText:ja.GENE_SPECIFIC,hide:this.hideGeneSpecificTab},n.createElement(ma,{containerWidth:this.getTabsWidth,molecularProfileOptionsPromise:this.props.store.molecularProfileOptions,submitButtonText:"Add Chart",onSubmit:function(t){if(1===t.length){var r=Object(b.db)(t[0].hugoGeneSymbol,t[0].profileType);e.updateInfoMessage("".concat(t[0].name," ").concat(e.selectedAttrs.includes(r)?"is already":"has been"," added."))}else e.updateInfoMessage("".concat(t.length," charts added"));e.props.store.addGeneSpecificCharts(t)}}),this.geneSpecificChartOptions.length>0&&n.createElement("div",{style:{marginTop:10}},n.createElement(zi.a,{width:this.getTabsWidth,options:this.geneSpecificChartOptions,freqPromise:this.dataCount,onAddAll:this.onAddAll,onClearAll:this.onClearAll,onToggleOption:this.onToggleOption,hideControls:!0,firstColumnHeaderName:"Gene Specific Chart"}))),n.createElement(l.a,{key:3,id:b.c.CUSTOM_DATA,linkText:ja.CUSTOM_DATA,hide:this.props.disableCustomTab,className:"custom"},n.createElement("div",{style:{width:this.getTabsWidth-20}},this.customChartDataOptions.length>0&&n.createElement("button",{className:"btn btn-primary btn-xs",onClick:this.onToggleAddNewChart},this.isAddNewChartWindowVisible?"Cancel":"+ Add new custom data"),this.isAddNewChartWindowVisible&&n.createElement(Qi.a,{allSamples:this.props.store.samples.result,selectedSamples:this.props.store.selectedSamples.result,submitButtonText:"Add Chart",queriedStudies:this.props.store.queriedPhysicalStudyIds.result,isChartNameValid:this.props.store.isChartNameValid,getDefaultChartName:this.props.store.getDefaultCustomChartName,disableSubmitButton:this.savingCustomData,onSubmit:function(t){e.showAddNewChart=!1,e.savingCustomData=!0,e.updateInfoMessage("Saving ".concat(t.displayName)),e.props.store.addCustomChart(t).then(function(){e.savingCustomData=!1,e.updateInfoMessage("".concat(t.displayName," has been added."))})}}),n.createElement(n.Fragment,null,this.customChartDataOptions.length>0&&n.createElement(n.Fragment,null,n.createElement("hr",{style:{marginTop:10,marginBottom:10}}),n.createElement(zi.a,{width:this.getTabsWidth,options:this.customChartDataOptions,freqPromise:this.dataCount,onAddAll:this.onAddAll,onClearAll:this.onClearAll,onToggleOption:this.onToggleOption,hideControls:!0,firstColumnHeaderName:"Custom data",shareCharts:this.props.openShareCustomDataUrlModal,deleteChart:function(t){e.props.store.toggleCustomChartMarkedForDeletion(t)},restoreChart:function(t){e.props.store.toggleCustomChartMarkedForDeletion(t)},markedForDeletion:this.props.store.customChartGroupMarkedForDeletion})),this.notificationMessages.length>0&&n.createElement(n.Fragment,null,n.createElement("br",null),n.createElement("span",{className:"text-warning"},"Note: ",this.notificationMessages))))),!this.hideGenericAssayTabs&&this.genericAssayTabs),this.showResetButton&&n.createElement("button",{style:{position:"absolute",top:14,right:18,zIndex:2},className:"btn btn-primary btn-xs",onClick:this.props.showResetPopup},"Reset charts"),this.infoMessage&&!this.savingCustomData&&n.createElement(ra,{message:this.infoMessage}),this.savingCustomData&&n.createElement("div",{className:"alert alert-info",style:{marginTop:"10px",marginBottom:"0"}},n.createElement("span",null,n.createElement("i",{className:"fa fa-spinner fa-spin"})," ",this.infoMessage)))}},{key:"getTabsWidth",get:function(){var e=this.tabsWidth+(this.showResetButton?70:0);return e>400?e:400}},{key:"showResetButton",get:function(){return this.props.store.isLoggedIn&&this.props.currentTab===Fe.a.SUMMARY&&this.props.store.showResetToDefaultButton}},{key:"groupedChartMetaByDataType",get:function(){return i.chain(this.props.store.chartMetaSet).values().groupBy(function(e){return e.dataType}).value()}},{key:"genomicChartOptions",get:function(){var e=Object(b.kb)(this.groupedChartMetaByDataType[b.c.GENOMIC]||[],this.selectedAttrs,i.fromPairs(this.props.store.chartsType.toJSON()));return this.props.currentTab===Fe.a.CLINICAL_DATA?e.filter(function(e){return e.chartType===A.a.BAR_CHART||e.chartType===A.a.PIE_CHART}):e}},{key:"geneSpecificChartOptions",get:function(){var e=Object(b.kb)(this.groupedChartMetaByDataType[b.c.GENE_SPECIFIC]||[],this.selectedAttrs,i.fromPairs(this.props.store.chartsType.toJSON()));return this.props.currentTab===Fe.a.CLINICAL_DATA?e.filter(function(e){return e.chartType===A.a.BAR_CHART||e.chartType===A.a.PIE_CHART}):e}},{key:"genericAssayChartOptionsByGenericAssayType",get:function(){var e=this,t=i.groupBy(this.groupedChartMetaByDataType[b.c.GENERIC_ASSAY]||[],function(e){return e.genericAssayType});return i.mapValues(t,function(t){return Object(b.kb)(t,e.selectedAttrs,i.fromPairs(e.props.store.chartsType.toJSON()))})}},{key:"clinicalDataOptions",get:function(){return Object(b.kb)(this.groupedChartMetaByDataType[b.c.CLINICAL]||[],this.selectedAttrs,i.fromPairs(this.props.store.chartsType.toJSON()))}},{key:"customChartDataOptions",get:function(){return Object(b.kb)(this.groupedChartMetaByDataType[b.c.CUSTOM_DATA]||[],this.selectedAttrs,i.fromPairs(this.props.store.chartsType.toJSON()),this.props.store.isLoggedIn?this.props.store.showCustomDataSelectionUI?this.props.store.isSharedCustomData:void 0:this.props.store.isSharedCustomData)}},{key:"selectedAttrs",get:function(){return this.props.store.visibleAttributes.map(function(e){return e.uniqueKey})}},{key:"hideGeneSpecificTab",get:function(){return this.props.disableGeneSpecificTab||!this.props.store.molecularProfileForGeneCharts.isComplete||this.props.store.molecularProfileForGeneCharts.isComplete&&0===this.props.store.molecularProfileForGeneCharts.result.length}},{key:"hideGenericAssayTabs",get:function(){return this.props.disableGenericAssayTabs||!this.props.store.genericAssayProfiles.isComplete||!this.props.store.genericAssayEntitiesGroupedByGenericAssayType.isComplete||this.props.store.genericAssayProfiles.isComplete&&i.isEmpty(this.props.store.genericAssayProfiles.result)}},{key:"genericAssayTabs",get:function(){var e=this;return i.map(this.props.store.genericAssayProfileOptionsByType.result,function(t,r){var o=i.map(e.props.store.genericAssayEntitiesGroupedByGenericAssayType.result[r],function(e){return Object(Ce.g)(e,!1)}),a=e.genericAssayChartOptionsByGenericAssayType[r]&&e.genericAssayChartOptionsByGenericAssayType[r].length>0,s=t.map(function(e){return Object.assign(Object.assign({},e),{label:"".concat(e.label," (").concat(e.count," ").concat(e.patientLevel?"patients":"samples",")"),profileName:e.label})});return n.createElement(l.a,{key:r,id:r,linkText:Object(ba.n)(r)},n.createElement(ya.a,{containerWidth:e.getTabsWidth,molecularProfileOptions:s,submitButtonText:"Add Chart",genericAssayType:r,genericAssayEntityOptions:o,onChartSubmit:e.onGenericAssaySubmit}),a&&n.createElement("div",{style:{marginTop:10}},n.createElement(zi.a,{width:e.getTabsWidth,options:e.genericAssayChartOptionsByGenericAssayType[r],freqPromise:e.dataCount,onAddAll:e.onAddAll,onClearAll:e.onClearAll,onToggleOption:e.onToggleOption,hideControls:!0,firstColumnHeaderName:"".concat(Object(ba.n)(r)," Chart")})))})}},{key:"existSharedCustomData",get:function(){return i.some(this.customChartDataOptions,function(e){return e.isSharedChart})}},{key:"notificationMessages",get:function(){var e,t,r,o=this,a=[];return this.props.store.customChartSet.size>0&&(this.existSharedCustomData&&a.push(n.createElement(n.Fragment,null,n.createElement("span",{className:ct()((e={},t=va.a.sharedChart,r=!0,t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e))},"Highlighted rows")," ","are shared custom data.")),!this.props.store.isLoggedIn&&this.props.store.appStore.isSocialAuthenticated?(a.length>0&&a.push(n.createElement("br",null)),a.push(n.createElement(n.Fragment,null,n.createElement("button",{className:"btn btn-default btn-xs",onClick:function(){return Object(Sa.a)(o.props.store.appStore)}},"Login")," to save custom data charts to your profile."))):this.existSharedCustomData&&(a.length>0&&a.push(n.createElement("br",null)),a.push(n.createElement(n.Fragment,null," Custom charts are saved to your profile"))),i.isEmpty(this.props.store.customChartGroupMarkedForDeletion)||(a.length>0&&a.push(n.createElement("br",null)),a.push(n.createElement("span",null,"Deleted charts will be permanently removed when this menu is closed. Any active filters based on deleted charts will also be removed.")))),a}},{key:"selectedCustomChartIds",get:function(){return this.customChartDataOptions.filter(function(e){return!!e.selected}).map(function(e){return e.key})}},{key:"isAddNewChartWindowVisible",get:function(){return 0===this.customChartDataOptions.length||this.showAddNewChart}}]),t}();Object.defineProperty(Na,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{disableGenomicTab:!1,disableCustomTab:!1,disableGeneSpecificTab:!1,disableGenericAssayTabs:!1}}),Ia([u.observable],Na.prototype,"activeId",void 0),Ia([u.observable],Na.prototype,"infoMessage",void 0),Ia([u.observable],Na.prototype,"tabsWidth",void 0),Ia([u.action.bound],Na.prototype,"setTabsWidth",null),Ia([u.computed],Na.prototype,"getTabsWidth",null),Ia([u.computed],Na.prototype,"showResetButton",null),Ia([u.action.bound],Na.prototype,"updateActiveId",null),Ia([u.action.bound],Na.prototype,"updateInfoMessage",null),Ia([u.action.bound],Na.prototype,"resetInfoMessage",null),Ia([u.computed],Na.prototype,"groupedChartMetaByDataType",null),Ia([u.computed],Na.prototype,"genomicChartOptions",null),Ia([u.computed],Na.prototype,"geneSpecificChartOptions",null),Ia([u.computed],Na.prototype,"genericAssayChartOptionsByGenericAssayType",null),Ia([u.computed],Na.prototype,"clinicalDataOptions",null),Ia([u.computed],Na.prototype,"customChartDataOptions",null),Ia([u.computed],Na.prototype,"selectedAttrs",null),Ia([u.computed],Na.prototype,"hideGeneSpecificTab",null),Ia([u.computed],Na.prototype,"hideGenericAssayTabs",null),Ia([u.action.bound],Na.prototype,"onGenericAssaySubmit",null),Ia([u.action.bound],Na.prototype,"onAddAll",null),Ia([y.default],Na.prototype,"onClearAll",null),Ia([u.action.bound],Na.prototype,"onToggleOption",null),Ia([u.computed],Na.prototype,"genericAssayTabs",null),Ia([u.computed],Na.prototype,"existSharedCustomData",null),Ia([u.computed],Na.prototype,"notificationMessages",null),Ia([u.computed],Na.prototype,"selectedCustomChartIds",null),Ia([u.observable],Na.prototype,"showAddNewChart",void 0),Ia([u.action.bound],Na.prototype,"onToggleAddNewChart",null),Ia([u.computed],Na.prototype,"isAddNewChartWindowVisible",null),Ia([u.observable],Na.prototype,"savingCustomData",void 0),Na=Ia([s.observer],Na);var Ra=function(e){function t(e){var r;return Ca(this,t),r=Ea(this,Ta(t).call(this,e)),Object.defineProperty(_a(r),"showTooltip",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object(u.makeObservable)(_a(r)),r}return Aa(t,n["Component"]),wa(t,[{key:"render",value:function(){var e=this;return n.createElement(F.i,{visible:this.showTooltip||this.props.store.showCustomDataSelectionUI,onVisibleChange:function(t){e.props.isShareLinkModalVisible||(e.showTooltip=!e.tabsLoading&&!!t,e.props.store.showCustomDataSelectionUI=!1,t||e.props.store.deleteMarkedCustomData())},trigger:["click"],placement:"bottomRight",destroyTooltipOnHide:!1,getTooltipContainer:function(){return document.getElementById("comparisonGroupManagerContainer")},overlay:function(){return n.createElement(Na,{store:e.props.store,defaultActiveTab:e.props.defaultActiveTab,currentTab:e.props.currentTab,disableGenomicTab:e.props.disableGenomicTab,disableGeneSpecificTab:e.props.disableGeneSpecificTab,disableGenericAssayTabs:e.props.disableGenericAssayTabs,disableCustomTab:e.props.disableCustomTab,showResetPopup:e.props.showResetPopup,openShareCustomDataUrlModal:e.props.openShareCustomDataUrlModal})},overlayClassName:this.props.addChartOverlayClassName},n.createElement("button",{className:ct()("btn btn-primary btn-sm",{active:this.showTooltip,disabled:this.tabsLoading}),style:{marginLeft:10},"aria-pressed":this.showTooltip,"data-event":Object(j.e)({category:"studyPage",action:"addChartMenuOpen",label:this.props.store.studyIds.join(",")}),"data-test":"add-charts-button"},this.props.buttonText))}},{key:"tabsLoading",get:function(){return this.props.store.genericAssayProfileOptionsByType.isPending||this.props.store.molecularProfileOptions.isPending||this.props.store.genericAssayEntitiesGroupedByGenericAssayType.isPending}}]),t}();Ia([u.observable],Ra.prototype,"showTooltip",void 0),Ia([u.computed],Ra.prototype,"tabsLoading",null);var Ga=Ra=Ia([s.observer],Ra),Ma=r(74),Fa=r.n(Ma);function xa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function La(e){return(La=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ba(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ua(e,t){return(Ua=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Va(e){return(Va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var qa=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":Va(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},Ka=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=!(o=La(t).call(this,e))||"object"!==Va(o)&&"function"!=typeof o?Ba(n):o,Object.defineProperty(Ba(r),"downloadingData",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(Ba(r),"showDownloadErrorMessage",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object(u.makeObservable)(Ba(r)),r}var r,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ua(e,t)}(t,n["Component"]),r=t,(o=[{key:"initiateDownload",value:function(){var e=this;this.downloadingData=!0,this.showDownloadErrorMessage=!1,this.props.store.getDownloadDataPromise().then(function(t){e.downloadingData=!1,Fa()(t,e.props.store.clinicalDataDownloadFilename)}).catch(function(){e.downloadingData=!1,e.showDownloadErrorMessage=!0})}},{key:"openCases",value:function(){if(!i.isEmpty(this.props.store.selectedPatients)){var e=this.props.store.selectedPatients[0],t=i.map(this.props.store.selectedPatients,function(e){return{patientId:e.patientId,studyId:e.studyId}}),r=Object(P.v)(e.studyId,e.patientId,t);if(r.length>4500)window.open(Object(P.v)(e.studyId,e.patientId)).clientPostedData={navCaseIds:t};else window.open(r)}}},{key:"render",value:function(){return n.createElement("div",{className:ct()(Xo.a.actionButtons,"btn-group")},n.createElement(F.i,{trigger:["hover"],placement:"top",overlay:n.createElement("span",null,"View selected cases")},n.createElement("button",{className:"btn btn-default btn-sm",disabled:!this.props.loadingComplete,onClick:this.openCases,"data-event":Object(j.e)({category:"studyPage",action:"viewPatientCohort",label:this.props.store.queriedPhysicalStudyIds.result})},n.createElement("i",{className:"fa fa-user-circle-o"}))),n.createElement(F.i,{trigger:["click"],destroyTooltipOnHide:!0,overlay:this.virtualStudy,placement:"bottom"},n.createElement(F.i,{placement:"top",trigger:["hover"],overlay:n.createElement("span",null,this.virtualStudyButtonTooltip)},n.createElement("button",{className:"btn btn-default btn-sm",disabled:!this.props.loadingComplete},n.createElement("i",{className:"fa fa-bookmark"})))),n.createElement(F.i,{trigger:["hover"],placement:"top",overlay:n.createElement("span",null,this.downloadButtonTooltip)},n.createElement("button",{className:"btn btn-default btn-sm",disabled:!this.props.loadingComplete,onClick:this.initiateDownload,"data-event":Object(j.e)({category:"studyPage",action:"dataDownload",label:this.props.store.queriedPhysicalStudyIds.result})},n.createElement(Be.If,{condition:this.downloadingData},n.createElement(Be.Then,null,n.createElement("i",{className:"fa fa-spinner fa-spin"})),n.createElement(Be.Else,null,n.createElement("i",{className:"fa fa-download"}))))))}},{key:"virtualStudyButtonTooltip",get:function(){return(this.props.appStore.isLoggedIn?"Save/":"")+"Share Virtual Study"}},{key:"downloadButtonTooltip",get:function(){return this.showDownloadErrorMessage?"An error occurred while downloading the data. Please try again.":"Download clinical data for the selected cases"}},{key:"virtualStudy",get:function(){return this.props.loadingComplete?n.createElement(Uo.b,{user:this.props.appStore.userName,name:this.props.store.isSingleVirtualStudyPageWithoutFilter?this.props.store.filteredVirtualStudies.result[0].data.name:void 0,description:this.props.store.isSingleVirtualStudyPageWithoutFilter?this.props.store.filteredVirtualStudies.result[0].data.description:void 0,studyWithSamples:this.props.store.studyWithSamples.result,selectedSamples:this.props.store.selectedSamples.result,filter:this.props.store.userSelections,attributesMetaSet:this.props.store.chartMetaSet,molecularProfileNameSet:this.props.store.molecularProfileNameSet.result||{},caseListNameSet:this.props.store.caseListNameSet.result||{}}):null}}])&&xa(r.prototype,o),a&&xa(r,a),t}();qa([u.observable],Ka.prototype,"downloadingData",void 0),qa([u.observable],Ka.prototype,"showDownloadErrorMessage",void 0),qa([y.default],Ka.prototype,"initiateDownload",null),qa([y.default],Ka.prototype,"openCases",null),qa([u.computed],Ka.prototype,"virtualStudyButtonTooltip",null),qa([u.computed],Ka.prototype,"downloadButtonTooltip",null),qa([u.computed],Ka.prototype,"virtualStudy",null);var Wa=Ka=qa([s.observer],Ka),Ha=r(331),za=r.n(Ha),Qa=r(848),Ja=r(1381);function Ya(e){return(Ya="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Za(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Xa(e){return(Xa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function es(e,t){return(es=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ts=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=Xa(t).call(this,e))||"object"!==Ya(o)&&"function"!=typeof o?$a(n):o).render=r.render.bind($a(r)),r}var r,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&es(e,t)}(t,n["Component"]),r=t,(o=[{key:"render",value:function(){var e=this.props.color;return n.createElement("svg",{width:"12",height:"12",className:"case-label-header","data-test":"color-picker-icon"},n.createElement("rect",{width:"12",height:"12",fill:null==e?"#FFFFFF":e,stroke:"#3786c2","stroke-width":"4",cursor:"pointer"}),"#FFFFFF"===e&&n.createElement("line",{x1:"10",y1:"2",x2:"2",y2:"10",stroke:"red","stroke-width":"1"}))}}])&&Za(r.prototype,o),i&&Za(r,i),t}();function rs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ns(e){return(ns=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function os(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function is(e,t){return(is=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function as(e){return(as="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ss=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":as(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},ls=function(e){function t(e){var r,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,i=ns(t).call(this,e),r=!i||"object"!==as(i)&&"function"!=typeof i?os(o):i,Object.defineProperty(os(r),"handleChangeComplete",{enumerable:!0,configurable:!0,writable:!0,value:function(e,t){e.hex===r.props.color?(r.props.onChangeGroupColor(r.props.group,void 0),r.props.store.flagDuplicateColorsForSelectedGroups(r.props.group.uid,void 0)):(r.props.onChangeGroupColor(r.props.group,e.hex),r.props.store.flagDuplicateColorsForSelectedGroups(r.props.group.uid,e.hex))}}),Object.defineProperty(os(r),"buildColorChooserWidget",{enumerable:!0,configurable:!0,writable:!0,value:function(){return n.createElement(dt.Popover,{id:"popover-basic",onClick:function(e){e.stopPropagation(),e.preventDefault()}},n.createElement("div",null,n.createElement(Ja.CirclePicker,{colors:r.colorList,circleSize:20,circleSpacing:3,onChangeComplete:r.handleChangeComplete,color:r.props.color,width:"140px"})))}}),Object(u.makeObservable)(os(r)),r}var r,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&is(e,t)}(t,n["Component"]),r=t,(o=[{key:"onCheckboxClick",value:function(){this.props.store.toggleComparisonGroupSelected(this.props.group.uid),this.props.store.flagDuplicateColorsForSelectedGroups(this.props.group.uid,this.props.color)}},{key:"onRestoreClick",value:function(){this.props.restore(this.props.group)}},{key:"onDeleteClick",value:function(){this.props.delete(this.props.group)}},{key:"shareGroup",value:function(){this.props.shareGroup(this.props.group)}},{key:"onOverlayEnter",value:function(){this.props.store.numberOfVisibleColorChooserModals+=1}},{key:"onOverlayExit",value:function(){this.props.store.numberOfVisibleColorChooserModals-=1}},{key:"render",value:function(){var e,t,r,o,i=this.props.group;return e=this.props.markedForDeletion?n.createElement("span",{className:za.a.markedForDeletion},this.label):n.createElement("div",{className:za.a.groupItem,style:{display:"flex",alignItems:"center"}},n.createElement("input",{type:"checkbox",value:i.uid,checked:this.props.store.isComparisonGroupSelected(i.uid),onClick:this.onCheckboxClick}),this.label),n.createElement("div",{key:i.uid,"data-test":i.name,className:ct()(za.a.groupRow,(t={},r=za.a.sharedGroup,o=this.props.group.isSharedGroup,r in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o,t)),style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingBottom:4,paddingTop:4,minHeight:"35px"}},e,n.createElement("div",{className:za.a.groupLineItemActionButtons},!this.props.markedForDeletion&&n.createElement(n.Fragment,null,n.createElement(F.i,{overlay:"You have selected identical colors for compared groups."},n.createElement("span",null,this.props.markedWithWarningSign&&n.createElement("i",{className:"fa fa-warning",style:{cursor:"pointer",color:"#fad201",position:"relative",top:"1px",right:"2px"}}))),n.createElement(dt.OverlayTrigger,{containerPadding:40,trigger:"click",placement:"bottom",overlay:this.buildColorChooserWidget(),onEnter:this.onOverlayEnter,onExit:this.onOverlayExit,rootClose:!0},n.createElement(F.i,{overlay:"Optional: Select color for group to be used in group comparison. If no color is selected, a random color will be applied.",disabled:this.props.store.numberOfVisibleColorChooserModals>0},n.createElement("span",{style:{marginTop:2,marginRight:2}},n.createElement(ts,{color:this.props.color||"#FFFFFF"})))),n.createElement(F.i,{overlay:"Delete Group"},n.createElement("span",{onClick:this.onDeleteClick,"data-test":"deleteGroupButton"},n.createElement("i",{className:"fa fa-md fa-trash",style:{cursor:"pointer"}}))),n.createElement("span",{onClick:this.shareGroup},n.createElement("i",{className:"fa fa-share-alt",style:{cursor:"pointer"}}))),this.props.group.nonExistentSamples.length>0&&n.createElement(Qa.a,{tooltip:n.createElement(D.f,{samples:this.props.group.nonExistentSamples})}),this.props.markedForDeletion&&n.createElement("button",{style:{marginLeft:10},className:"btn btn-xs btn-default",onClick:this.onRestoreClick},"Restore")))}},{key:"label",get:function(){return n.createElement("span",{style:{display:"flex",alignItems:"center",whiteSpace:"nowrap"}},n.createElement(F.S,{text:this.props.group.name,maxLength:30})," (",Object(D.j)(Object(D.t)(this.props.group),Object(D.s)(this.props.group)),")")}},{key:"colorList",get:function(){var e=b.b.slice(0,20);return e.push(Ht.k),e.push(Ht.j),e.push(Ht.i),e.push(Ht.l),e}}])&&rs(r.prototype,o),i&&rs(r,i),t}();ss([y.default],ls.prototype,"onCheckboxClick",null),ss([y.default],ls.prototype,"onRestoreClick",null),ss([y.default],ls.prototype,"onDeleteClick",null),ss([y.default],ls.prototype,"shareGroup",null),ss([y.default],ls.prototype,"onOverlayEnter",null),ss([y.default],ls.prototype,"onOverlayExit",null),ss([u.computed],ls.prototype,"label",null),ss([u.computed],ls.prototype,"colorList",null),ss([u.action.bound],ls.prototype,"handleChangeComplete",void 0);var us=ls=ss([s.observer],ls);function cs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ps(e){return(ps=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ds(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fs(e,t){return(fs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hs(e){return(hs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ms=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":hs(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},bs=function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},ys=function(e){function t(e){var r,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,i=ps(t).call(this,e),r=!i||"object"!==hs(i)&&"function"!=typeof i?ds(o):i,Object.defineProperty(ds(r),"groupNameFilter",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(ds(r),"addGroupPanelOpen",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(ds(r),"_inputGroupName",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(ds(r),"addSamplesTargetGroupId",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(ds(r),"filteredGroups",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[r.props.store.comparisonGroups]},invoke:function(){return Promise.resolve(a.a.sortBy(r.props.store.comparisonGroups.result.filter(function(e){return new RegExp(r.groupNameFilter,"i").test(e.name)}),function(e){return e.name.toLowerCase()}))}})}),Object.defineProperty(ds(r),"groupsSection",{enumerable:!0,configurable:!0,writable:!0,value:Object(aa.a)({await:function(){return[r.props.store.comparisonGroups,r.filteredGroups,r.props.store.selectedSamples]},render:function(){return r.props.store.comparisonGroups.result.length>0?n.createElement("div",{className:za.a.groupCheckboxes,"data-test":"group-checkboxes"},r.filteredGroups.result.length>0?r.filteredGroups.result.map(function(e){return n.createElement(us,{group:e,color:r.props.store.userGroupColors[e.uid],store:r.props.store,markedForDeletion:r.props.store.isComparisonGroupMarkedForDeletion(e.uid),markedWithWarningSign:r.props.store.isComparisonGroupMarkedWithWarningSign(e.uid),restore:r.restoreGroup,delete:r.deleteGroup,studyIds:r.props.store.studyIds,shareGroup:r.shareSingleGroup,onChangeGroupColor:r.onGroupColorChange})}):n.createElement("div",{className:za.a.noGroupsMessage},"No results for your current search.")):n.createElement("div",{className:za.a.noGroupsMessage},"Group comparison allows you to create custom groups and compare their clinical and genomic features. Use the button below to create groups based on selections.")},renderPending:function(){return n.createElement(xe.a,{isLoading:!0})},renderError:function(){return n.createElement("div",{className:za.a.noGroupsMessage},n.createElement(sa.a,{message:"There was an error loading saved groups. Please try again."}))}})}),Object.defineProperty(ds(r),"actionButtons",{enumerable:!0,configurable:!0,writable:!0,value:Object(aa.a)({await:function(){return[r.props.store.comparisonGroups]},render:function(){return r.props.store.comparisonGroups.result.length>0?n.createElement("div",{style:{marginTop:6}},r.compareButton,r.viewButton,r.shareButton):null}})}),Object(u.makeObservable)(ds(r)),r}var r,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fs(e,t)}(t,n["Component"]),r=t,(o=[{key:"onChangeGroupNameFilter",value:function(e){this.groupNameFilter=e.target.value}},{key:"onChangeInputGroupName",value:function(e){this._inputGroupName=e.target.value}},{key:"showAddGroupPanel",value:function(){this.addGroupPanelOpen=!0,this._inputGroupName=Object(D.q)(this.props.store.filters,a.a.fromPairs(this.props.store.preDefinedCustomChartFilterSet.toJSON()),this.props.store.clinicalAttributeIdToDataType.result)}},{key:"cancelAddGroup",value:function(){this.addGroupPanelOpen=!1,this._inputGroupName="",this.addSamplesTargetGroupId=""}},{key:"deleteGroup",value:function(e){this.props.store.toggleComparisonGroupMarkedForDeletion(e.uid)}},{key:"selectAllFiltered",value:function(){var e=!0,t=!1,r=void 0;try{for(var n,o=this.filteredGroups.result[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var i=n.value;this.props.store.setComparisonGroupSelected(i.uid,!0)}}catch(e){t=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}this.props.store.flagDuplicateColorsForSelectedGroups(void 0,void 0)}},{key:"deselectAllFiltered",value:function(){var e=!0,t=!1,r=void 0;try{for(var n,o=this.filteredGroups.result[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var i=n.value;this.props.store.setComparisonGroupSelected(i.uid,!1),this.props.store.showComparisonGroupWarningSign(i.uid,!1)}}catch(e){t=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}}},{key:"restoreGroup",value:function(e){this.props.store.toggleComparisonGroupMarkedForDeletion(e.uid)}},{key:"shareSingleGroup",value:function(e){this.props.shareGroups([e])}},{key:"shareGroups",value:function(){var e=Object(L.b)(this.props.store.comparisonGroups.result||[],this.props.store);this.props.shareGroups(e)}},{key:"onSubmitNewGroup",value:function(){return bs(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,r,n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.store.selectedSamples.isComplete?this.props.store.selectedSamples.result:void 0,e.next=3,I.a.addGroup(Object(L.a)(this.inputGroupName,t,this.props.store.studyIds));case 3:r=e.sent,n=r.id,null!=(o=Object(Ht.t)(this.inputGroupName))&&this.props.store.onGroupColorChange(n,o),this.props.store.notifyComparisonGroupsChange(),this.props.store.setComparisonGroupSelected(n),this.cancelAddGroup();case 10:case"end":return e.stop()}},e,this)}))}},{key:"onGroupColorChange",value:function(e,t){return bs(this,void 0,void 0,regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:this.props.onGroupColorChange&&this.props.onGroupColorChange(e.uid,t);case 1:case"end":return r.stop()}},r,this)}))}},{key:"componentWillUnmount",value:function(){this.props.store.deleteMarkedComparisonGroups()}},{key:"render",value:function(){return n.createElement("div",{className:za.a.comparisonGroupManager,style:{position:"relative"}},this.header,this.groupsSection.component,this.notificationMessages.length>0&&n.createElement(n.Fragment,null,n.createElement("br",null),n.createElement("i",{className:"text-warning"},"Note: ",this.notificationMessages)),this.actionButtons.component,n.createElement("hr",null),this.addGroupPanel)}},{key:"inputGroupName",get:function(){return this._inputGroupName}},{key:"header",get:function(){return n.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",marginTop:3,alignItems:"center",marginBottom:10}},n.createElement("div",{className:"btn-group",role:"group"},n.createElement("button",{className:"btn btn-default btn-xs",onClick:this.selectAllFiltered},"Select all ",this.filteredGroups.isComplete?"(".concat(this.filteredGroups.result.length,")"):""),n.createElement("button",{className:"btn btn-default btn-xs",onClick:this.deselectAllFiltered},"Deselect all")),n.createElement("input",{className:"form-control",style:{right:0,width:140,height:25},type:"text",placeholder:"Search..",value:this.groupNameFilter,onChange:this.onChangeGroupNameFilter}))}},{key:"viewButton",get:function(){var e=this;return this.props.store.comparisonGroups.isComplete&&this.props.store.comparisonGroups.result.length>0?n.createElement("button",{className:"btn btn-sm btn-default",disabled:0===Object(L.b)(this.props.store.comparisonGroups.result,this.props.store).length,style:{marginLeft:7},onClick:function(){e.props.store.clearAllFilters(),e.props.store.updateComparisonGroupsFilter()}},"Filter"):null}},{key:"shareButton",get:function(){return this.props.store.comparisonGroups.isComplete&&this.props.store.comparisonGroups.result.length>0?n.createElement("button",{className:"btn btn-sm btn-default",disabled:0===Object(L.b)(this.props.store.comparisonGroups.result,this.props.store).length,style:{marginLeft:7},onClick:this.shareGroups},"Share"):null}},{key:"allGroupNames",get:function(){return this.props.store.comparisonGroups.isComplete?this.props.store.comparisonGroups.result.map(function(e){return e.name}):void 0}},{key:"submitNewGroupDisabled",get:function(){return!(this.props.store.selectedSamples.isComplete?this.props.store.selectedSamples.result:void 0)||0===this.inputGroupName.length||!this.allGroupNames||this.allGroupNames.includes(this.inputGroupName)}},{key:"compareButton",get:function(){var e=this;if(this.props.store.comparisonGroups.isComplete){var t=Object(L.b)(this.props.store.comparisonGroups.result,this.props.store).length,r=t>D.d||t<2,o="";return o=this.props.store.comparisonGroups.result.length>=2?r?"Select between 2 and ".concat(D.d," groups to enable comparison."):"Open a comparison session with selected groups":"Create at least two groups to open a comparison session",n.createElement(F.i,{overlay:o},n.createElement("button",{className:"btn btn-sm btn-primary",disabled:r,"data-event":Object(j.e)({action:"createCustomComparisonSession",label:this.props.store.comparisonGroups.result.length.toString(),category:"groupComparison"}),onClick:function(){return bs(e,void 0,void 0,regeneratorRuntime.mark(function e(){var t,r,n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.open(Object(P.f)({phase:N.a.CREATING_SESSION}),"_blank"),e.next=3,Object(R.b)(function(){return!!t.routingStore});case 3:return r=Object(L.b)(this.props.store.comparisonGroups.result,this.props.store),e.next=6,I.a.addComparisonSession({groups:r,origin:this.props.store.studyIds});case 6:n=e.sent,o=n.id,Object(P.C)(t,{comparisonId:o});case 9:case"end":return e.stop()}},e,this)}))}},"Compare"))}return null}},{key:"addGroupPanel",get:function(){var e,t=this,r=this.props.store.selectedSamples.isComplete?this.props.store.selectedSamples.result:void 0;return e=this.addGroupPanelOpen?[n.createElement("div",{style:{display:"none",flexDirection:"row",justifyContent:"space-between",width:"100%",marginTop:3}},n.createElement("h5",null,"Add",r?" ".concat(r.length):""," ","selected samples"),n.createElement("button",{className:"btn btn-xs btn-default",style:{right:0,marginTop:-4},onClick:this.cancelAddGroup},"Cancel")),n.createElement("div",{style:{width:"100%",marginTop:7}},n.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%"}},n.createElement(F.i,{visible:this.allGroupNames&&this.allGroupNames.includes(this.inputGroupName),overlay:n.createElement("div",null,n.createElement("i",{className:"fa fa-md fa-exclamation-triangle",style:{color:"#BB1700",marginRight:5}}),n.createElement("span",null,D.c))},n.createElement("input",{className:"form-control",style:{marginRight:5},type:"text",placeholder:"Enter a name for your new group",value:this.inputGroupName,onChange:this.onChangeInputGroupName,onKeyPress:function(e){"Enter"!=e.key||t.submitNewGroupDisabled||t.onSubmitNewGroup()}})),n.createElement("button",{className:"btn btn-sm btn-primary",style:{width:58},onClick:this.onSubmitNewGroup,disabled:this.submitNewGroupDisabled},"Create")))]:n.createElement("button",{className:"btn btn-sm btn-primary","data-event":Object(j.e)({action:"createCustomGroup",label:"",category:"groupComparison"}),"data-test":"create-new-group-btn",onClick:this.showAddGroupPanel,disabled:!r,style:{width:"100%"}},"Create new group from selected samples"," ",r?" (".concat(r.length,")"):""),n.createElement("div",{style:{width:"100%"}},e)}},{key:"existSharedGroups",get:function(){return this.props.store.comparisonGroups.result.filter(function(e){return e.isSharedGroup}).length>0}},{key:"notificationMessages",get:function(){var e,t,r,o=this,i=[];return this.props.store.comparisonGroups.result.length>0&&(this.existSharedGroups&&i.push(n.createElement(n.Fragment,null,n.createElement("span",{className:ct()((e={},t=za.a.sharedGroup,r=!0,t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e))},"Highlighted rows")," ","are shared groups.")),!this.props.store.isLoggedIn&&this.props.store.appStore.isSocialAuthenticated?i.push(n.createElement(n.Fragment,null,n.createElement("br",null),"The groups above will not be saved without  ",n.createElement("button",{className:"btn btn-default btn-xs",onClick:function(){return Object(Sa.a)(o.props.store.appStore)}},"Login"),n.createElement("br",null))):this.existSharedGroups&&i.push(n.createElement(n.Fragment,null,"They have been saved to your profile."))),i}}])&&cs(r.prototype,o),i&&cs(r,i),t}();ms([u.observable],ys.prototype,"groupNameFilter",void 0),ms([u.observable],ys.prototype,"addGroupPanelOpen",void 0),ms([u.observable],ys.prototype,"_inputGroupName",void 0),ms([u.computed],ys.prototype,"inputGroupName",null),ms([u.observable],ys.prototype,"addSamplesTargetGroupId",void 0),ms([u.action.bound],ys.prototype,"onChangeGroupNameFilter",null),ms([u.action.bound],ys.prototype,"onChangeInputGroupName",null),ms([u.action.bound],ys.prototype,"showAddGroupPanel",null),ms([u.action.bound],ys.prototype,"cancelAddGroup",null),ms([u.action.bound],ys.prototype,"deleteGroup",null),ms([u.action.bound],ys.prototype,"selectAllFiltered",null),ms([u.action.bound],ys.prototype,"deselectAllFiltered",null),ms([y.default],ys.prototype,"restoreGroup",null),ms([y.default],ys.prototype,"shareSingleGroup",null),ms([y.default],ys.prototype,"shareGroups",null),ms([u.computed],ys.prototype,"allGroupNames",null),ms([u.computed],ys.prototype,"submitNewGroupDisabled",null),ms([u.action.bound],ys.prototype,"onSubmitNewGroup",null),ms([u.action.bound],ys.prototype,"onGroupColorChange",null),ms([u.computed],ys.prototype,"existSharedGroups",null),ms([u.computed],ys.prototype,"notificationMessages",null);var gs=ys=ms([s.observer],ys),vs=(r(1559),r(1095)),Ss=r(242),Cs=r(997),Os=r(344),ws=r(208);function Es(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ts(e){return(Ts=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function As(e,t){return(As=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ps(e){return(Ps="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ks=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":Ps(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},js=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=!(o=Ts(t).call(this,e,{tab:{isSessionProp:!1},resourceUrl:{isSessionProp:!1}}))||"object"!==Ps(o)&&"function"!=typeof o?_s(n):o,Object(u.makeObservable)(_s(r)),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&As(e,t)}(t,Os["a"]),r=t,(n=[{key:"setTab",value:function(e){this.updateURL({},"".concat(ws.a.Study,"/").concat(e))}},{key:"setResourceUrl",value:function(e){this.updateURL({resourceUrl:e})}},{key:"tabId",get:function(){var e=new RegExp("".concat(ws.a.Study,"/(.+)")).exec(this.pathName);return e&&e[1]||Fe.a.SUMMARY}}])&&Es(r.prototype,n),o&&Es(r,o),t}();ks([u.computed],js.prototype,"tabId",null);var Is=r(846),Ds=r(944);function Ns(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Rs(e){return(Rs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ms(e,t){return(Ms=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fs(e){return(Fs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var xs=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":Fs(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},Ls=function(e){function t(){var e,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=Rs(t).apply(this,arguments),e=!o||"object"!==Fs(o)&&"function"!=typeof o?Gs(r):o,Object.defineProperty(Gs(e),"studyResources",{enumerable:!0,configurable:!0,writable:!0,value:Object(aa.a)({await:function(){return[e.props.store.studyResourceData,e.props.store.queriedPhysicalStudies]},render:function(){return e.props.store.studyResourceData.result.length>0?n.createElement("div",{className:"resourcesSection"},n.createElement("h4",{className:"blackHeader"},"Study Resources for"," ",e.props.store.queriedPhysicalStudies.result[0].name),a.a.sortBy(e.props.store.studyResourceData.result,function(e){return parseFloat(e.resourceDefinition.priority)}).map(function(t){return n.createElement(Ds.a,{resource:t,isTabOpen:e.props.store.isResourceTabOpen,openResource:e.props.openResource})})):null}})}),e}var r,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ms(e,t)}(t,n["Component"]),r=t,(o=[{key:"render",value:function(){return n.createElement("div",{className:"resourcesTab"},n.createElement(Is.a,{title:"Files & Links",isLoading:this.studyResources.isPending,className:"pull-left"}),n.createElement("br",null),n.createElement("br",null),n.createElement("div",null,this.studyResources.component))}}])&&Ns(r.prototype,o),i&&Ns(r,i),t}(),Bs=Ls=xs([s.observer],Ls),Us=r(26),Vs=r.n(Us),qs=r(1560),Ks=r(430);function Ws(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Hs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qs(e,t,r){return t&&zs(e.prototype,t),r&&zs(e,r),e}function Js(e,t){return!t||"object"!==el(t)&&"function"!=typeof t?Ys(e):t}function Ys(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zs(e){return(Zs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xs(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$s(e,t)}function $s(e,t){return($s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function el(e){return(el="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.d(t,"StudyResultsSummary",function(){return nl});var tl=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":el(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},rl=function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},nl=function(e){function t(){return Hs(this,t),Js(this,Zs(t).apply(this,arguments))}return Xs(t,n["Component"]),Qs(t,[{key:"render",value:function(){return n.createElement("div",{className:Xo.a.selectedInfo,"data-test":"selected-info"},n.createElement("strong",null,"Selected: "),n.createElement("strong",{"data-test":"selected-patients"},this.props.store.selectedPatients.length.toLocaleString())," ",n.createElement("strong",null,"patients")," | ",n.createElement("strong",{"data-test":"selected-samples"},this.props.store.selectedSamples.result.length.toLocaleString())," ",n.createElement("strong",null,"samples"))}}]),t}();nl=tl([s.observer],nl);var ol=function(e){function t(e){var r;Hs(this,t),r=Js(this,Zs(t).call(this,e)),Object.defineProperty(Ys(r),"urlWrapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(Ys(r),"store",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(Ys(r),"enableCustomSelectionInTabs",{enumerable:!0,configurable:!0,writable:!0,value:[Fe.a.SUMMARY,Fe.a.CLINICAL_DATA,Fe.a.CN_SEGMENTS]}),Object.defineProperty(Ys(r),"enableAddChartInTabs",{enumerable:!0,configurable:!0,writable:!0,value:[Fe.a.SUMMARY,Fe.a.CLINICAL_DATA]}),Object.defineProperty(Ys(r),"toolbar",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(Ys(r),"toolbarLeftUpdater",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(Ys(r),"toolbarLeft",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(Ys(r),"showCustomSelectTooltip",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(Ys(r),"showAlterationFilterTooltip",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(Ys(r),"showReturnToDefaultChartListModal",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(Ys(r),"showBookmarkModal",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(Ys(r),"shareLinkModal",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(Ys(r),"getShareBookmarkUrl",{enumerable:!0,configurable:!0,writable:!0,value:Promise.resolve(null)}),Object.defineProperty(Ys(r),"sharedGroups",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(Ys(r),"shareCustomDataLinkModal",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(Ys(r),"getShareCustomChartBookmarkUrl",{enumerable:!0,configurable:!0,writable:!0,value:Promise.resolve(null)}),Object.defineProperty(Ys(r),"chartDataPromises",{enumerable:!0,configurable:!0,writable:!0,value:Object(F.vb)({await:function(){return[].concat(Ws(i.values(r.store.clinicalDataBinPromises)),Ws(i.values(r.store.clinicalDataCountPromises)),[r.store.mutationProfiles,r.store.cnaProfiles,r.store.selectedSamples,r.store.molecularProfileSampleCounts,r.store.sampleTreatments,r.store.patientTreatments])},invoke:function(){return rl(Ys(r),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.a)(10);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))}})}),Object.defineProperty(Ys(r),"resourceTabs",{enumerable:!0,configurable:!0,writable:!0,value:Object(aa.a)({await:function(){return[r.store.resourceDefinitions,r.store.resourceIdToResourceData]},render:function(){var e=r.store.resourceDefinitions.result.filter(function(e){return r.store.isResourceTabOpen(e.resourceId)}),t=i.sortBy(e,function(e){return e.priority}),o=r.store.resourceIdToResourceData.result;return t.reduce(function(e,t){var i=o[t.resourceId];return i&&i.length>0&&e.push(n.createElement(l.a,{key:Object(Fe.d)(t.resourceId),id:Object(Fe.d)(t.resourceId),linkText:t.displayName,onClickClose:r.closeResourceTab},n.createElement(Cs.a,{resourceData:o[t.resourceId],urlWrapper:r.urlWrapper}))),e},[])}})}),Object(u.makeObservable)(Ys(r)),r.urlWrapper=new js(r.props.routing),r.store=new Me(r.props.appStore,c.a.sessionServiceIsEnabled(),r.urlWrapper);var o=r.urlWrapper.tabId&&Object(Fe.c)(r.urlWrapper.tabId);if(o&&r.store.setResourceTabOpen(o,!0),Object(F.eb)().studyPage=Ys(r),!Object(F.eb)().globalStores.routing.location.pathname.includes("/study"))return Js(r);var a=e.routing.query,s=e.routing.location.hash;e.routing.location.hash="";var p=i.pick(a,["id","studyId","cancer_study_id","filterAttributeId","filterValues"]);p.filterJson=a.filters;var d=s||Object(F.eb)().studyPageFilter;if(delete window.studyPageFilter,d){var f=Object(qs.parse)(d);f.filterJson&&(p.filterJson=f.filterJson),f.sharedGroups&&(p.sharedGroups=f.sharedGroups),f.sharedCustomData&&(p.sharedCustomData=f.sharedCustomData)}return i.isEqual(p,r.store.studyViewQueryFilter)||(r.store.updateStoreFromURL(p),r.store.studyViewQueryFilter=p),Object(k.a)(r.store.queriedPhysicalStudyIds,function(e){var t,n,o;Object(j.f)({category:"studyPage",action:"studyPageLoad",label:e.join(",")+",",fieldsObject:(t={},n=j.a.VirtualStudy,o=(r.store.filteredVirtualStudies.result.length>0).toString(),n in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,t)})}),r}return Xs(t,n["Component"]),Qs(t,[{key:"componentDidMount",value:function(){var e=this;this.props.routing.updateRoute({},"study/".concat(this.store.currentTab),!1,!0),this.toolbarLeftUpdater=setInterval(function(){e.toolbar&&(e.toolbarLeft=Vs()(e.toolbar).position().left)},500)}},{key:"toolbarRef",value:function(e){this.toolbar=e}},{key:"handleTabChange",value:function(e){this.urlWrapper.setTab(e)}},{key:"toggleBookmarkModal",value:function(){this.showBookmarkModal=!this.showBookmarkModal}},{key:"toggleShareLinkModal",value:function(){this.shareLinkModal=!this.shareLinkModal,this.sharedGroups=[]}},{key:"toggleShareCustomDataLinkModal",value:function(){this.shareCustomDataLinkModal=!this.shareCustomDataLinkModal}},{key:"openShareUrlModal",value:function(e){this.shareLinkModal=!0,this.sharedGroups=e;var t=e.map(function(e){return e.uid});this.getShareBookmarkUrl=Promise.resolve({bitlyUrl:void 0,fullUrl:"".concat(window.location.protocol,"//").concat(window.location.host).concat(window.location.pathname).concat(window.location.search,"#sharedGroups=").concat(t.join(",")),sessionUrl:void 0})}},{key:"openShareCustomDataUrlModal",value:function(e){this.shareCustomDataLinkModal=!0,this.getShareCustomChartBookmarkUrl=Promise.resolve({bitlyUrl:void 0,fullUrl:"".concat(window.location.protocol,"//").concat(window.location.host).concat(window.location.pathname).concat(window.location.search,"#sharedCustomData=").concat(e.join(",")),sessionUrl:void 0})}},{key:"onBookmarkClick",value:function(){this.toggleBookmarkModal()}},{key:"openResource",value:function(e){this.store.setResourceTabOpen(e.resourceId,!0),this.urlWrapper.setTab(Object(Fe.d)(e.resourceId)),this.urlWrapper.setResourceUrl(e.url)}},{key:"closeResourceTab",value:function(e){var t=Object(Fe.c)(e);t&&(this.store.setResourceTabOpen(t,!1),this.urlWrapper.tabId===Object(Fe.d)(t)&&this.urlWrapper.setTab(Fe.a.FILES_AND_LINKS))}},{key:"getBookmarkUrl",value:function(){return rl(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ss.b)(this.studyViewFullUrlWithFilter,c.b.serverConfig.bitly_access_token);case 2:return t=e.sent,e.abrupt("return",{bitlyUrl:t,fullUrl:this.studyViewFullUrlWithFilter,sessionUrl:void 0});case 4:case"end":return e.stop()}},e,this)}))}},{key:"content",value:function(){var e=this;return n.createElement("div",{className:"studyView"},this.showBookmarkModal&&n.createElement(vs.a,{onHide:this.toggleBookmarkModal,title:"Bookmark this filter",urlPromise:this.getBookmarkUrl()}),this.shareLinkModal&&n.createElement(vs.a,{onHide:this.toggleShareLinkModal,title:this.sharedGroups.length>1?"Share ".concat(this.sharedGroups.length," Groups"):"Share Group",urlPromise:this.getShareBookmarkUrl,description:"Please send the following link to users with whom you want to share the selected group(s)."}),this.shareCustomDataLinkModal&&n.createElement(vs.a,{onHide:this.toggleShareCustomDataLinkModal,title:"Share custom data",urlPromise:this.getShareCustomChartBookmarkUrl,description:"Please send the following link to users with whom you want to share the selected custom data"}),this.store.comparisonConfirmationModal,this.store.unknownQueriedIds.isComplete&&this.store.unknownQueriedIds.result.length>0&&n.createElement(dt.Alert,{bsStyle:"danger"},n.createElement("span",null,"Unknown/Unauthorized studies"," ",this.store.unknownQueriedIds.result.join(", "))),n.createElement(xe.a,{size:"big",isLoading:this.store.queriedSampleIdentifiers.isPending||this.store.invalidSampleIds.isPending,center:!0}),this.store.queriedSampleIdentifiers.isComplete&&this.store.invalidSampleIds.isComplete&&this.store.unknownQueriedIds.isComplete&&this.store.displayedStudies.isComplete&&this.store.queriedPhysicalStudies.isComplete&&this.store.queriedPhysicalStudies.result.length>0&&n.createElement("div",null,n.createElement(Ri,{store:this.store,onBookmarkClick:this.onBookmarkClick}),n.createElement("div",{className:Xo.a.mainTabs},n.createElement(l.b,{id:"studyViewTabs",activeTabId:this.store.currentTab,onTabClick:function(t){return e.handleTabChange(t)},className:"mainTabs",unmountOnHide:!1,getPaginationWidth:function(){return e.toolbarLeft}},n.createElement(l.a,{key:0,id:Fe.a.SUMMARY,linkText:ke.SUMMARY},n.createElement(ko,{store:this.store})),n.createElement(l.a,{key:1,id:Fe.a.CLINICAL_DATA,linkText:ke.CLINICAL_DATA,hide:0===this.store.selectedSamples.result.length},n.createElement(et,{store:this.store})),n.createElement(l.a,{key:2,id:Fe.a.HEATMAPS,linkText:ke.HEATMAPS,hide:0===this.store.MDACCHeatmapStudyMeta.result.length},n.createElement(rt.a,{className:"mdacc-heatmap-iframe",url:"https://bioinformatics.mdanderson.org/TCGA/NGCHMPortal/?".concat(this.store.MDACCHeatmapStudyMeta.result[0])})),n.createElement(l.a,{key:3,id:Fe.a.CN_SEGMENTS,linkText:ke.CN_SEGMENTS,hide:this.store.hasCNSegmentData.isPending||!this.store.hasCNSegmentData.result},n.createElement(Hi,{store:this.store})),n.createElement(l.a,{key:4,id:Fe.a.FILES_AND_LINKS,linkText:"Files & Links",hide:!this.shouldShowResources},n.createElement("div",null,n.createElement(Bs,{store:this.store,openResource:this.openResource}))),this.resourceTabs.component),n.createElement("div",{ref:this.toolbarRef,className:Xo.a.absolutePanel},n.createElement(s.Observer,null,function(){var t=n.createElement(nl,{store:e.store,appStore:e.props.appStore,loadingComplete:e.chartDataPromises.isComplete}),r=n.createElement(Wa,{store:e.store,appStore:e.props.appStore,loadingComplete:e.chartDataPromises.isComplete});return n.createElement("div",{className:Xo.a.studyFilterResult},n.createElement(Be.If,{condition:e.store.selectedSamples.isComplete},n.createElement(Be.Then,null,t,r),n.createElement(Be.Else,null,n.createElement(xe.a,{isLoading:!0,size:"small",className:Xo.a.selectedInfoLoadingIndicator}),r)))}),n.createElement("div",{id:"comparisonGroupManagerContainer",style:{display:"flex",position:"relative"}},this.enableCustomSelectionInTabs.includes(this.store.currentTab)&&n.createElement(n.Fragment,null,n.createElement(F.i,{visible:this.showCustomSelectTooltip,trigger:["click"],placement:"bottomLeft",onVisibleChange:function(t){return e.showCustomSelectTooltip=!!t},destroyTooltipOnHide:!0,overlay:function(){return n.createElement("div",{style:{width:"350px"}},n.createElement(Qi.a,{allSamples:e.store.samples.result,selectedSamples:e.store.selectedSamples.result,disableGrouping:!0,queriedStudies:e.store.queriedPhysicalStudyIds.result,onSubmit:function(t){e.showCustomSelectTooltip=!1,e.store.updateCustomSelect(t)}}))}},n.createElement("button",{className:ct()("btn btn-primary btn-sm",{active:this.showCustomSelectTooltip}),"aria-pressed":this.showCustomSelectTooltip,"data-test":"custom-selection-button",style:{marginLeft:"10px"}},Object(b.H)("Custom Selection")))),c.b.serverConfig.skin_show_settings_menu&&n.createElement(F.i,{trigger:["click"],placement:"bottomLeft",overlay:n.createElement(Ks.a,{store:this.store,infoElement:n.createElement(b.a,{includeCnaTable:this.store.hasCnaProfileData}),customDriverSourceName:Object(F.eb)().frontendConfig.serverConfig.oncoprint_custom_driver_annotation_binary_menu_label,showDriverAnnotationSection:this.store.doShowDriverAnnotationSectionInGlobalMenu,showTierAnnotationSection:this.store.doShowTierAnnotationSectionInGlobalMenu}),visible:this.showAlterationFilterTooltip,onVisibleChange:function(t){e.showAlterationFilterTooltip=!!t}},n.createElement("button",{"data-test":"AlterationFilterButton",style:{marginLeft:"10px"},className:"btn btn-primary btn-sm"},Object(b.H)("Alteration Filter"))),this.enableAddChartInTabs.includes(this.store.currentTab)&&n.createElement(Ga,{buttonText:this.addChartButtonText,store:this.store,currentTab:this.store.currentTab,defaultActiveTab:this.store.showCustomDataSelectionUI?b.c.CUSTOM_DATA:b.c.CLINICAL,addChartOverlayClassName:"studyViewAddChartOverlay",disableCustomTab:this.store.currentTab===Fe.a.CLINICAL_DATA,disableGeneSpecificTab:this.store.currentTab===Fe.a.CLINICAL_DATA,disableGenericAssayTabs:this.store.currentTab===Fe.a.CLINICAL_DATA,showResetPopup:function(){e.showReturnToDefaultChartListModal=!0},openShareCustomDataUrlModal:this.openShareCustomDataUrlModal,isShareLinkModalVisible:this.shareCustomDataLinkModal}),n.createElement(dt.Modal,{bsSize:"small",show:this.showReturnToDefaultChartListModal,onHide:function(){e.showReturnToDefaultChartListModal=!1},keyboard:!0},n.createElement(dt.Modal.Header,{closeButton:!0},n.createElement(dt.Modal.Title,null,"Reset charts")),n.createElement(dt.Modal.Body,null,n.createElement("div",null,"Please confirm that you would like to replace the current charts with the default list.")),n.createElement(dt.Modal.Footer,null,n.createElement("button",{className:"btn btn-primary btn-sm",style:{marginTop:"10px",marginBottom:"0"},onClick:function(){e.store.resetToDefaultChartSettings(),e.showReturnToDefaultChartListModal=!1}},"Confirm"),n.createElement("button",{className:"btn btn-primary btn-sm",style:{marginTop:"10px",marginBottom:"0"},onClick:function(){e.showReturnToDefaultChartListModal=!1}},"Cancel"))),c.a.sessionServiceIsEnabled()&&this.groupsButton)))))}},{key:"componentWillUnmount",value:function(){this.store.destroy(),clearInterval(this.toolbarLeftUpdater)}},{key:"render",value:function(){return n.createElement(tt.a,{noMargin:!0,hideFooter:!0,className:"subhead-dark"},this.content())}},{key:"shouldShowResources",get:function(){return!!this.store.resourceIdToResourceData.isComplete&&i.some(this.store.resourceIdToResourceData.result,function(e){return e.length>0})}},{key:"studyViewFullUrlWithFilter",get:function(){return"".concat(window.location.protocol,"//").concat(window.location.host).concat(window.location.pathname).concat(window.location.search,"#filterJson=").concat(JSON.stringify(this.store.filters))}},{key:"addChartButtonText",get:function(){return this.store.currentTab===Fe.a.SUMMARY?Object(b.H)("Charts"):this.store.currentTab===Fe.a.CLINICAL_DATA?Object(b.H)("Columns"):""}},{key:"groupsButton",get:function(){var e=this;return n.createElement(n.Fragment,null,n.createElement(F.i,{visible:this.store.showComparisonGroupUI,trigger:["click"],placement:"bottomLeft",destroyTooltipOnHide:!0,onPopupAlign:function(e){e.querySelector(".rc-tooltip-arrow").style.right="10px"},onVisibleChange:function(t){0!=e.store.numberOfVisibleColorChooserModals||e.shareLinkModal||(e.store.showComparisonGroupUI=!!t)},getTooltipContainer:function(){return document.getElementById("comparisonGroupManagerContainer")},overlay:n.createElement("div",{style:{width:350}},n.createElement(gs,{store:this.store,shareGroups:this.openShareUrlModal,onGroupColorChange:this.store.onGroupColorChange}))},n.createElement("button",{className:ct()("btn btn-primary btn-xs",{active:this.store.showComparisonGroupUI}),id:"groupManagementButton","data-test":"groups-button","aria-pressed":this.store.showComparisonGroupUI,style:{marginLeft:"10px"},"data-event":Object(j.e)({action:"openGroupManagement",label:"",category:"groupComparison"})},Object(b.H)("Groups"))))}}]),t}();tl([u.observable],ol.prototype,"toolbarLeft",void 0),tl([u.observable],ol.prototype,"showCustomSelectTooltip",void 0),tl([u.observable],ol.prototype,"showAlterationFilterTooltip",void 0),tl([u.observable],ol.prototype,"showReturnToDefaultChartListModal",void 0),tl([y.default],ol.prototype,"toolbarRef",null),tl([u.observable],ol.prototype,"showBookmarkModal",void 0),tl([u.action.bound],ol.prototype,"toggleBookmarkModal",null),tl([u.observable],ol.prototype,"shareLinkModal",void 0),tl([u.action.bound],ol.prototype,"toggleShareLinkModal",null),tl([u.action.bound],ol.prototype,"toggleShareCustomDataLinkModal",null),tl([u.observable],ol.prototype,"shareCustomDataLinkModal",void 0),tl([u.action.bound],ol.prototype,"openShareUrlModal",null),tl([u.action.bound],ol.prototype,"openShareCustomDataUrlModal",null),tl([y.default],ol.prototype,"onBookmarkClick",null),tl([u.action.bound],ol.prototype,"openResource",null),tl([u.action.bound],ol.prototype,"closeResourceTab",null),tl([u.computed],ol.prototype,"shouldShowResources",null),tl([u.computed],ol.prototype,"studyViewFullUrlWithFilter",null),tl([u.computed],ol.prototype,"addChartButtonText",null),tl([u.computed],ol.prototype,"groupsButton",null),ol=tl([Object(s.inject)("routing","appStore"),s.observer],ol);t.default=ol},802:function(e,t,r){e.exports=r(35)(6)},812:function(e,t,r){e.exports=r(35)(7)},813:function(e,t,r){e.exports=r(35)(8)},814:function(e,t,r){e.exports={portalWidth:"styles-module__portalWidth__1kueS",framedImage:"styles-module__framedImage__1ndwn",SurvivalTable:"styles-module__SurvivalTable__2NKCT",Tooltip:"styles-module__Tooltip__1I-Ty",NotAvailable:"styles-module__NotAvailable__1Zx5R",XmaxNumberInput:"styles-module__XmaxNumberInput__SQsf6"}},815:function(e,t,r){e.exports={portalWidth:"tables-module__portalWidth__2u2eA",framedImage:"tables-module__framedImage__2sdMG",studyViewTablesTable:"tables-module__studyViewTablesTable__29Y2_",tableSearchInput:"tables-module__tableSearchInput__2uOMk",labelContent:"tables-module__labelContent__2FLsJ",labelContentSVG:"tables-module__labelContentSVG__2v71D",controls:"tables-module__controls__2KTG_",controlsAtTop:"tables-module__controlsAtTop__czH5v",controlsBtn:"tables-module__controlsBtn__24B4k",geneSymbol:"tables-module__geneSymbol__1OUGZ",cancerGene:"tables-module__cancerGene__CqmRo",headerColumn:"tables-module__headerColumn__WCJTO",headerRow:"tables-module__headerRow__3Ckx0",row:"tables-module__row__20ZyT",oddRow:"tables-module__oddRow__3vz4c",evenRow:"tables-module__evenRow__KCskI",highlightedEvenRow:"tables-module__highlightedEvenRow__2EYSy",highlightedRow:"tables-module__highlightedRow__1wuhn",highlightedOddRow:"tables-module__highlightedOddRow__1RWUf",cancerGeneIcon:"tables-module__cancerGeneIcon__1Zp6i",gistic:"tables-module__gistic__1d6Gl",mutsig:"tables-module__mutsig__3Q3o0",cancerGenesRow:"tables-module__cancerGenesRow__1crxh",amp:"tables-module__amp__yRy0o",del:"tables-module__del__PLU6Y",displayFlex:"tables-module__displayFlex__7WOab",headerSortingIcon:"tables-module__headerSortingIcon__1aRye",autoMarginCheckbox:"tables-module__autoMarginCheckbox__3tMQV",union:"tables-module__union__3dOlj",intersection:"tables-module__intersection__2qPMu"}},820:function(e,t,r){e.exports=r(35)(88)},822:function(e,t,r){e.exports=r(35)(3)},827:function(e,t,r){"use strict";function n(e){return new Promise(function(t){return setTimeout(t,e)})}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3;return new Promise(function(n){var o=0,i=setInterval(function(){if(o+=t,e())clearInterval(i),n();else if(o>r)throw clearInterval(i),new Error("sleepUntil timeout")},t)})}r.d(t,"a",function(){return n}),r.d(t,"b",function(){return o})},831:function(e,t,r){"use strict";var n=r(0),o=r(23),i=(r(903),"https://oncokb.org");function a(){return n.createElement("a",{href:"".concat(i,"/cancerGenes"),target:"_blank"},"OncoKB Cancer Gene List")}r(815),r(5);var s,l,u=r(3),c=(r(20),r(31)),p=r(875);function d(e,t){return[e,Object(c.I)(t)].join(":")}function f(e){return e.split(":")[0]}function h(e,t,r,s,l,u){return n.createElement("div",{style:{display:"flex",flexDirection:"column",maxWidth:300,fontSize:12}},n.createElement("span",null,function(e,t,r,s,l){if(t){var u="";if(s||l){u=" as a ";var c=[];s&&c.push("oncogene"),l&&c.push("tumor suppressor gene"),u="".concat(u," ").concat(c.join(" and "))}return n.createElement("span",null,n.createElement(o.If,{condition:r},n.createElement(o.Then,null,n.createElement("a",{href:"".concat(i,"/gene/").concat(e),target:"_blank"},e)),n.createElement(o.Else,null,n.createElement("span",null,e))),n.createElement("span",null," is included in the "),a(),(s||l)&&n.createElement("span",null,u),".")}}(e,r,s,l,u)))}function m(e,t,r,o,i,a){var s="# of samples profiled";"data"!==e&&(s+=" for ".concat(e," in this gene: ").concat(t.toLocaleString()));return n.createElement(u.i,{placement:"right",overlay:function(){return n.createElement("span",{style:{display:"flex",flexDirection:"column"},"data-test":"freq-cell-tooltip"},n.createElement("span",null,s),n.createElement(p.a,{genePanelIds:o,toggleModal:i}))},destroyTooltipOnHide:!0},n.createElement("span",{"data-test":"freq-cell",style:a},Object(c.ab)(r/t*100)))}function b(e,t){var r="".concat(t?"Percentage":"Number"," of samples");return"data"!==e&&(r+=" with one or more ".concat(e)),r}r.d(t,"d",function(){return d}),r.d(t,"f",function(){return f}),r.d(t,"e",function(){return h}),r.d(t,"a",function(){return s}),r.d(t,"b",function(){return l}),r.d(t,"c",function(){return m}),r.d(t,"g",function(){return b}),function(e){e.MUTATION="mutations",e.STRUCTURAL_VARIANT="structural variants",e.CNA="copy number alterations",e.DATA="data"}(s||(s={})),function(e){e.INTERSECTION="Intersection",e.UNION="Union"}(l||(l={}))},837:function(e,t,r){"use strict";var n,o=r(0),i=r(73),a=r(1158),s=(r(1038),r(2)),l=r(815),u=r.n(l),c=r(1),p=r(9),d=r(5),f=r.n(d),h=r(23),m=r(12),b=r(338),y=r(3),g=r(174),v=r(831),S=r(17);function C(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function O(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?_(e):t}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var I=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":j(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},D=(k(n={},"desc",a.b.DESC),k(n,"asc",a.b.ASC),n),N=function(e){function t(e,r){var n;return w(this,t),n=E(this,T(t).call(this,e)),Object.defineProperty(_(n),"fixedTopRowsData",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(_(n),"getSortedData",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e=n.sortMetric||function(){return 0},t=void 0===n.sortAscending||n.sortAscending;return[].concat(O(n.fixedTopRowsData),O(Object(i.c)(n.allData,e,t)))}}),Object(s.makeObservable)(_(n)),n.fixedTopRowsData=r,n}return A(t,g["a"]),t}(),R=function(e){function t(e){var r;w(this,t),r=E(this,T(t).call(this,e)),Object.defineProperty(_(r),"_store",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(_(r),"inputElement",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(_(r),"_sortBy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(_(r),"_sortDirection",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object(s.makeObservable)(_(r)),r._sortBy=e.sortBy;var n=c.find(r.props.columns,function(e){return e.name===r._sortBy});return r._sortDirection=void 0===e.sortDirection?c.isUndefined(n)?"desc":n.defaultSortDirection||"desc":e.sortDirection,r.initDataStore(),r}var r,n,l;return A(t,o["Component"]),r=t,(n=[{key:"componentWillReceiveProps",value:function(e){this.updateDataStore(e)}},{key:"updateDataStore",value:function(e){var t=this,r=new N(function(){return t.props.data},this.props.fixedTopRowsData||[]),n=Object(s.toJS)(this._store.filterString);this._store.setProps({columns:e.columns,dataStore:r,initialSortColumn:this._sortBy,initialSortDirection:this._sortDirection}),void 0!==n&&this._store.setFilterString(n)}},{key:"initDataStore",value:function(){var e=this,t=new N(function(){return e.props.data},this.props.fixedTopRowsData||[]);this._store=new i.a({columns:this.props.columns,dataStore:t,initialSortColumn:this._sortBy,initialSortDirection:this._sortDirection})}},{key:"rowClassName",value:function(e){var t=e.index;if(t>-1&&this.isSelectedRow(this._store.dataStore.sortedFilteredData[t])){var r=[u.a.row];if(this.props.highlightedRowClassName){var n=this.props.highlightedRowClassName(this._store.dataStore.sortedFilteredData[t]);r.push(n)}else r.push(u.a.highlightedRow);return f()(r)}return t<0?u.a.headerRow:f()(u.a.row,t%2==0?u.a.evenRow:u.a.oddRow)}},{key:"rowGetter",value:function(e){var t=e.index;return this._store.dataStore.sortedFilteredData[t]}},{key:"getColumn",value:function(e){return c.keyBy(this.props.columns,function(e){return e.name})[e]}},{key:"sort",value:function(e){var t=e.sortBy;this._store.defaultHeaderClick(this.getColumn(t)),this._sortBy=t,this._sortDirection=this._store.dataStore.sortAscending?"asc":"desc",this.props.afterSorting&&this.props.afterSorting(this._sortBy,this._sortDirection)}},{key:"onFilterTextChange",value:function(){var e=this;return Object(b.a)(function(t){e._store.setFilterString(t)},400)}},{key:"afterSelectingRows",value:function(){this.props.afterSelectingRows&&this.props.afterSelectingRows()}},{key:"changeSelectionType",value:function(e){this.props.toggleSelectionOperator&&this.props.defaultSelectionOperator!==e&&this.props.toggleSelectionOperator()}},{key:"isSelectedRow",value:function(e){return!!c.isFunction(this.props.isSelectedRow)&&this.props.isSelectedRow(e)}},{key:"onAddAll",value:function(){this.props.addAll&&this.props.addAll(this._store.dataStore.sortedFilteredData)}},{key:"onRemoveAll",value:function(){this.props.removeAll&&this.props.removeAll(this._store.dataStore.sortedFilteredData)}},{key:"setInputRef",value:function(e){this.inputElement=e}},{key:"componentDidMount",value:function(){!this.props.hideControls&&this.props.autoFocusSearchAfterRendering&&this.inputElement.focus()}},{key:"getSelectionOptions",value:function(){var e=this;return Object.keys(v.b).map(function(t){var r=v.b[t];return o.createElement(S.MenuItem,{onClick:function(){return e.changeSelectionType(r)},active:e.props.defaultSelectionOperator===t},o.createElement(y.i,{overlay:"".concat(r," of samples in the newly selected rows")},o.createElement("div",null,r," ",o.createElement("i",{className:u.a[r.toLowerCase()]}))))})}},{key:"getAddRemoveAllButton",value:function(){var e=0===this.props.numberOfSelectedRows,t=this.props.numberOfSelectedRows===this.props.data.length,r="Select all".concat(this.props.showSelectableNumber?" (".concat(this._store.dataStore.sortedFilteredData.length,")"):""),n=!t&&this.props.addAll,i=!e&&this.props.removeAll;return o.createElement("div",{style:{display:"flex",alignItems:"baseline"}},n&&o.createElement("button",{className:"btn btn-default btn-xs","data-test":"fixed-header-table-add-all",onClick:this.onAddAll},r),i&&o.createElement("button",{className:"btn btn-default btn-xs","data-test":"fixed-header-table-remove-all",onClick:this.onRemoveAll},"Deselect all"))}},{key:"getControls",value:function(){return o.createElement("div",{className:f()(u.a.controls,k({},u.a.controlsAtTop,!!this.props.showControlsAtTop))},!this.props.showControlsAtTop&&o.createElement("input",{placeholder:"Search...",type:"text",onInput:this.onFilterTextChange(),className:f()("form-control",u.a.tableSearchInput)}),this.props.showAddRemoveAllButton&&this.getAddRemoveAllButton(),o.createElement(h.If,{condition:this.props.showSetOperationsButton&&this.props.numberOfSelectedRows>0},o.createElement("div",{className:"btn-group"},o.createElement("button",{className:"btn btn-default btn-xs",onClick:this.afterSelectingRows},"Select Samples"," ",o.createElement(h.If,{condition:this.props.numberOfSelectedRows>1},o.createElement("i",{style:{marginTop:"-2px"},className:this.props.defaultSelectionOperator===v.b.INTERSECTION?u.a.intersection:u.a.union}))),o.createElement(h.If,{condition:this.props.numberOfSelectedRows>1},o.createElement(S.DropdownButton,{bsSize:"xsmall",title:"",id:"selectButton",pullRight:!0},this.getSelectionOptions())))),this.props.extraButtons&&this.props.extraButtons.map(function(e){return o.createElement("button",{className:"btn btn-default btn-xs",onClick:e.onClick,disabled:e.isDisabled()},e.content)}),this.props.showControlsAtTop&&o.createElement("input",{placeholder:"Search...",type:"text",onInput:this.onFilterTextChange(),ref:this.setInputRef,"data-test":"fixed-header-table-search-input",className:f()("form-control",u.a.tableSearchInput)}))}},{key:"render",value:function(){var e=this;return o.createElement("div",{className:u.a.studyViewTablesTable},!this.props.hideControls&&this.props.showControlsAtTop&&this.getControls(),o.createElement(p.Observer,null,function(){return o.createElement(a.c,{width:e.props.width,height:e.props.height,headerHeight:e.props.headerHeight,rowHeight:e.props.rowHeight,rowCount:e._store.dataStore.sortedFilteredData.length,rowGetter:e.rowGetter,rowClassName:e.rowClassName,headerClassName:u.a.headerColumn,sort:e.sort,sortDirection:D[e._sortDirection],sortBy:e._sortBy},e.props.columns.map(function(t,r){return o.createElement(a.a,{key:t.name,label:t.name,dataKey:t.name,width:Number(t.width),headerRenderer:e.columnHeaders[r],cellRenderer:function(e){return t.render(e.rowData)}})}))}),!this.props.hideControls&&!this.props.showControlsAtTop&&this.getControls())}},{key:"columnHeaders",get:function(){var e=this;return this.props.columns.map(function(t){return function(r){var n=[];t.headerRender?n.push(t.headerRender(t.name)):n.push(o.createElement("span",{key:t.name},t.name)),t.name===e._sortBy&&n.push(o.createElement("i",{className:f()(u.a.headerSortingIcon,"fa","desc"===e._sortDirection?"fa-sort-desc":"fa-sort-asc")}));var i=o.createElement("div",{style:{display:"flex"}},n);return t.tooltip?o.createElement(y.i,{placement:"top",overlay:t.tooltip},i):i}})}}])&&C(r.prototype,n),l&&C(r,l),t}();Object.defineProperty(R,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{showControlsAtTop:!1,showAddRemoveAllButton:!1,autoFocusSearchAfterRendering:!1,width:398,height:350,headerHeight:25,rowHeight:25,showSelectableNumber:!1,sortBy:"",numberOfSelectedRows:0,hideControls:!1}}),I([s.observable.ref],R.prototype,"_sortBy",void 0),I([s.observable],R.prototype,"_sortDirection",void 0),I([m.default],R.prototype,"rowClassName",null),I([m.default],R.prototype,"rowGetter",null),I([m.default],R.prototype,"getColumn",null),I([s.action.bound],R.prototype,"sort",null),I([s.action.bound],R.prototype,"onFilterTextChange",null),I([s.action.bound],R.prototype,"afterSelectingRows",null),I([s.action.bound],R.prototype,"changeSelectionType",null),I([m.default],R.prototype,"isSelectedRow",null),I([m.default],R.prototype,"onAddAll",null),I([m.default],R.prototype,"onRemoveAll",null),I([s.computed],R.prototype,"columnHeaders",null),I([m.default],R.prototype,"setInputRef",null),R=I([p.observer],R),t.a=R},840:function(e,t,r){"use strict";var n=r(0),o=r(9),i=r(2),a=r(12),s=r(17),l=r(5),u=r.n(l),c=r(814),p=r.n(c),d=r(3),f=r(454);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var S=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":v(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},C=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r},O=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=!(o=b(t).call(this,e))||"object"!==v(o)&&"function"!=typeof o?y(n):o,Object.defineProperty(y(r),"mousePosition",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0}}),Object.defineProperty(y(r),"tooltipOpen",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object(i.makeObservable)(y(r)),r}var r,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,n["Component"]),r=t,(o=[{key:"onMouseOver",value:function(){this.tooltipOpen=!0}},{key:"onMouseOut",value:function(){this.tooltipOpen=!1}},{key:"onMouseMove",value:function(e){this.mousePosition.x=e.pageX,this.mousePosition.y=e.pageY}},{key:"render",value:function(){var e=this.props,t=(e.text,e.maxWidth,e.datum,e.suffix,e.tooltip,e.prefixTspans,e.alwaysShowTooltip,e.renderTruncatedText,e.transform),r=e.tooltipPlacement,o=e.textRef,i=C(e,["text","maxWidth","datum","suffix","tooltip","prefixTspans","alwaysShowTooltip","renderTruncatedText","transform","tooltipPlacement","textRef"]),a=void 0;return t&&void 0!==this.props.x&&void 0!==this.props.y&&(a=t(this.props.x,this.props.y)),n.createElement(n.Fragment,null,n.createElement("text",h({onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,onMouseMove:this.onMouseMove,ref:o,transform:a},i),this.props.prefixTspans,this.truncatedText),(this.textReport.isTruncated||this.props.alwaysShowTooltip)&&this.tooltipOpen&&n.createElement(f.a,{isOpened:!0,node:document.body},n.createElement(s.Popover,{arrowOffsetTop:17,className:u()("cbioportal-frontend","cbioTooltip",p.a.Tooltip),positionLeft:this.mousePosition.x+("left"===r?-8:8),positionTop:this.mousePosition.y-17,style:{transform:"left"===r?"translate(-100%,0%)":void 0},placement:r},this.tooltipElt)))}},{key:"tooltipElt",get:function(){return this.props.tooltip?this.props.tooltip(this.props.datum):n.createElement("span",null,this.props.text)}},{key:"fontFamily",get:function(){var e="Arial";return this.props.style&&this.props.style.fontFamily&&(e=this.props.style.fontFamily.split(", ")[0]),e}},{key:"fontSize",get:function(){var e="13px";return this.props.style&&this.props.style.fontSize&&(e=this.props.style.fontSize+"px"),e}},{key:"textReport",get:function(){return Object(d.Hb)(this.props.text||"",this.props.maxWidth,this.fontFamily,this.fontSize)}},{key:"truncatedText",get:function(){return this.props.renderTruncatedText?this.props.renderTruncatedText(this.textReport.text):n.createElement("tspan",null,this.textReport.text)}}])&&m(r.prototype,o),a&&m(r,a),t}();Object.defineProperty(O,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{maxWidth:100,suffix:"..."}}),S([i.observable],O.prototype,"mousePosition",void 0),S([i.observable],O.prototype,"tooltipOpen",void 0),S([i.computed],O.prototype,"tooltipElt",null),S([i.action.bound],O.prototype,"onMouseOver",null),S([i.action.bound],O.prototype,"onMouseOut",null),S([a.default],O.prototype,"onMouseMove",null),S([i.computed],O.prototype,"fontFamily",null),S([i.computed],O.prototype,"fontSize",null),S([i.computed],O.prototype,"textReport",null),S([i.computed],O.prototype,"truncatedText",null),O=S([o.observer],O),t.a=O},846:function(e,t,r){"use strict";r.d(t,"a",function(){return d});var n=r(0),o=r(23),i=r(72);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p={marginTop:0},d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,u(t).apply(this,arguments))}var r,a,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,n["Component"]),r=t,(a=[{key:"render",value:function(){return n.createElement(o.If,{condition:this.props.isHidden},n.createElement(o.Else,null,n.createElement("h2",{style:this.props.style||p,className:this.props.className||""},this.props.title,n.createElement(i.a,{isLoading:this.props.isLoading,small:!0}))))}}])&&s(r.prototype,a),d&&s(r,d),t}()},847:function(e,t,r){e.exports=r(35)(132)},848:function(e,t,r){"use strict";r.d(t,"a",function(){return c});var n=r(0),o=r(3);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,l(t).apply(this,arguments))}var r,i,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,n["Component"]),r=t,(i=[{key:"render",value:function(){return n.createElement(o.i,{overlay:this.props.tooltip},n.createElement("i",{className:"fa fa-md fa-exclamation-triangle",style:Object.assign({},{color:"#BB1700",cursor:"pointer"},this.props.style||{})}))}}])&&a(r.prototype,i),c&&a(r,c),t}()},851:function(e,t,r){"use strict";var n=r(1),o=r.n(n);function i(e,t){for(var r,n=0,o=e.length;n<o;)switch(t(e[r=Math.floor((n+o)/2)],r)){case 1:o=r;break;case-1:n=r+1;break;case 0:return r}}var a=r(93),s=r.n(a),l=r(1103),u=r.n(l);function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.d(t,"a",function(){return C});var p=u()(),d=(p.Vector,p.Matrix),f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"deathEvents",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"deathsByMonth",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"censorEvents",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"censorsByMonth",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.deathEvents=o.a.sortBy(t.filter(function(e){return e.status}),function(e){return e.months}),this.deathsByMonth=o.a.groupBy(this.deathEvents,function(e){return e.months}),this.censorEvents=o.a.sortBy(t.filter(function(e){return!e.status}),function(e){return e.months}),this.censorsByMonth=o.a.groupBy(this.censorEvents,function(e){return e.months})}var t,r,n;return t=e,(r=[{key:"getTotalEventsAtStartOf",value:function(e,t){return 0===e.length||t<=e[0].months?0:i(e,function(r,n){return r.months<t?n===e.length-1||e[n+1].months>=t?0:-1:1})+1}},{key:"getTotalDeathsAtStartOf",value:function(e){return this.getTotalEventsAtStartOf(this.deathEvents,e)}},{key:"getTotalCensorsAtStartOf",value:function(e){return this.getTotalEventsAtStartOf(this.censorEvents,e)}},{key:"getDeathsExactlyAt",value:function(e){return(this.deathsByMonth[e]||[]).length}},{key:"getCensorsExactlyAt",value:function(e){return(this.censorsByMonth[e]||[]).length}},{key:"getTotalAtRiskAtStartOf",value:function(e){return this.events.length-this.getTotalDeathsAtStartOf(e)-this.getTotalCensorsAtStartOf(e)}}])&&c(t.prototype,r),n&&c(t,n),e}(),h=o.a.map,m=o.a.sortBy,b=o.a.groupBy,y=o.a.reduce,g=o.a.last,v=o.a.filter;function S(e,t,r){var n,i,a,l,u,c,p,f,S,C,O,w=null,E=[],T=[],_=[];for(o.a.each(t,function(t,n){var i,a,s,l,u,c,p,d={tte:t,ev:r[n]},f=(i=e,a=d.ev,s=m(h(d.tte,function(e,t){return{tte:e,ev:a[t]}}),"tte"),l=o.a.uniq(h(s,"tte")),u=b(s,function(e){return e.tte}),c=y(l,function(e,t){var r=u[t],n=g(e)||{n:s.length,e:0},o=v(r,function(e){return e.ev});return e.push({n:n.n-n.e,e:r.length,d:o.length,t:r[0].tte}),e},[]),p=[],i=i.filter(function(e){return!!e.d}),{expected:y(i,function(e,t){var r=o.a.find(c,function(e){return e.t===t.t||e.t>t.t});if(r){var n=r.n*t.rate;return p.push(r),e+n}return e},0),observed:v(a,function(e){return 1===e}).length,dataByTimeTable:p,timeNumber:p.length});f.expected&&(E.push(f),T.push(f.observed-f.expected))}),i=E.length-1,a=0;a<E.length;a++)for(_.push([]),l=0;l<E.length;l++)_[a].push(0);for(a=0;a<E.length;a++)for(l=a;l<E.length;l++)for(u=0;u<e.length;u++)f=e[u].n,O=e[u].d,u<E[a].timeNumber&&u<E[l].timeNumber&&(S=E[a].dataByTimeTable[u].n,C=E[l].dataByTimeTable[u].n,a!==l&&1!==f?(_[a][l]-=O*S*C*(f-O)/(f*f*(f-1)),_[l][a]=_[a][l]):1!==f&&(_[a][a]+=O*S*(f-S)*(f-O)/(f*f*(f-1))));for(c=T.slice(0,T.length-1),p=_.slice(0,_.length-1),a=0;a<p.length;a++)p[a]=p[a].slice(0,p[a].length-1);var A=p.slice(0,p.length);for(a=0;a<p.length;a++)A[a]=p[a].slice(0,p[a].length);if(i>0){var P=new d([c]),k=new d([c]).trans(),j=new d(s.a.inv(A));n=P.dot(j).dot(k).data[0][0],w=1-s.a.chisquare.cdf(n,i)}return{dof:i,KM_stats:n,pValue:w}}function C(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=o.a.sortBy(o.a.flatten(t),function(e){return e.months}),i=new f(n),a=t.map(function(e){return o.a.sortBy(e,function(e){return e.months})}),s=a.map(function(e){return e.map(function(e){return e.months})}),l=a.map(function(e){return e.map(function(e){return+e.status})});return S(o.a.uniqBy(n,function(e){return e.months}).map(function(e){return{t:e.months,d:i.getDeathsExactlyAt(e.months),n:i.getTotalAtRiskAtStartOf(e.months),rate:i.getDeathsExactlyAt(e.months)/i.getTotalAtRiskAtStartOf(e.months)}}).filter(function(e){return e.d>0}),s,l).pValue}},854:function(e,t,r){e.exports=r(35)(131)},856:function(e,t,r){"use strict";r.d(t,"a",function(){return a}),r.d(t,"c",function(){return s}),r.d(t,"g",function(){return l}),r.d(t,"f",function(){return u}),r.d(t,"e",function(){return c}),r.d(t,"d",function(){return p}),r.d(t,"b",function(){return d});var n=r(1),o=r(6);function i(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var a="all";function s(){return{name:"CNA",type:"seg",displayMode:"FILL",features:[]}}function l(e){return n.keyBy(e||[],"name")}function u(e,t){var r=l(e),o=l(t),a=t.filter(function(e){return!n.isEqual(o[e.name],r[e.name])}).map(function(e){return e.name}),s=n.difference(e.map(function(e){return e.name}),t.map(function(e){return e.name}));return[].concat(i(a),i(s))}function c(e){var t=e.map(function(e){return[e.sampleId,e.chromosome,e.start,e.end,e.numberOfProbes,e.segmentMean]});return[["ID","chrom","loc.start","loc.end","num.mark","seg.mean"]].concat(i(t)).map(function(e){return e.join("\t")}).join("\n")}function p(e){return e.map(function(e){return{chr:Object(o.mb)(e.chromosome),start:e.start,end:e.end,value:e.segmentMean,sample:e.sampleId,patient:e.patientId,study:e.studyId,numberOfProbes:e.numberOfProbes,sampleKey:e.uniqueSampleKey}})}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:600,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return Math.max(Math.min(t,n.uniq(e.map(function(e){return e.sampleKey})).length*o),r)}},868:function(e,t,r){"use strict";var n=r(0),o=r(17),i=r(9),a=r(72),s=r(12);function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":d(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,c(t).apply(this,arguments))}var r,i,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,n["Component"]),r=t,(i=[{key:"handleClose",value:function(){this.props.onHide()}},{key:"render",value:function(){return n.createElement(o.Modal,{show:this.props.show,onHide:this.handleClose,keyboard:!0,className:this.props.className},n.createElement(o.Modal.Header,{closeButton:!0},n.createElement(o.Modal.Title,{"data-test":"gene-panel-modal-title"},this.props.panelName)),n.createElement(o.Modal.Body,{style:{maxHeight:"calc(100vh - 210px)",overflowY:"auto"}},this.props.show&&this.props.isLoading&&n.createElement(a.a,{isLoading:!0}),this.props.show&&!this.props.isLoading&&n.createElement("div",{"data-test":"gene-panel-modal-body"},this.props.children)),n.createElement(o.Modal.Footer,null,n.createElement(o.Button,{"data-test":"modal-button",onClick:this.handleClose},"Close")))}}])&&l(r.prototype,i),s&&l(r,s),t}();f([s.default],h.prototype,"handleClose",null),h=f([i.observer],h),t.a=h},870:function(e,t,r){"use strict";function n(e){setTimeout(function(){window.requestAnimationFrame(e)},0)}r.d(t,"a",function(){return n})},872:function(e,t,r){"use strict";var n=r(0),o=r(2),i=r(9),a=r(897),s=r.n(a),l=r(1),u=r(176),c=r(31),p=r(72),d=r(837),f=r(12),h=r(5),m=r.n(h),b=r(3),y=r(50);function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var A=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":_(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},P=function(e){function t(){return S(this,t),C(this,w(t).apply(this,arguments))}return E(t,d["a"]),t}(),k=function(e){function t(e){var r;return S(this,t),r=C(this,w(t).call(this,e)),Object(o.makeObservable)(O(r)),r}var r,a,d;return E(t,n["Component"]),r=t,(a=[{key:"onDeleteClick",value:function(e){this.props.deleteChart(e.key)}},{key:"shareChart",value:function(e){this.props.shareCharts([e.key])}},{key:"onRestoreClick",value:function(e){this.props.restoreChart(e.key)}},{key:"getCurrentSelectedRows",value:function(){return this.options.filter(function(e){return e.selected})}},{key:"getCurrentSelectedRowKeys",value:function(){return this.getCurrentSelectedRows().map(function(e){return e.key})}},{key:"addAll",value:function(e){this.props.onAddAll(l.filter(e,function(e){return!e.disabled}).map(function(e){return e.key}))}},{key:"removeAll",value:function(e){this.props.onClearAll(e.map(function(e){return e.key}))}},{key:"onOptionChange",value:function(e){this.props.onToggleOption(e.key)}},{key:"shareSelected",value:function(){this.props.shareCharts(this.props.options.filter(function(e){return e.selected}).map(function(e){return e.key}))}},{key:"render",value:function(){var e;return n.createElement("div",{style:{display:"flex",flexDirection:"column"},"data-test":"add-by-type"},(!this.props.freqPromise||this.props.freqPromise.isComplete)&&n.createElement(P,{width:this.props.width-20,height:this.tableHeight,columns:this.columns,data:this.options,showControlsAtTop:!0,addAll:this.addAll,removeAll:this.removeAll,showSelectableNumber:!0,showAddRemoveAllButton:!0,autoFocusSearchAfterRendering:!0,numberOfSelectedRows:this.getCurrentSelectedRows().length,hideControls:this.props.hideControls,isSelectedRow:function(e){return!!e.isSharedChart},highlightedRowClassName:function(e){return e.isSharedChart?s.a.sharedChart:""},extraButtons:this.extraButtons}),(null===(e=this.props.freqPromise)||void 0===e?void 0:e.isPending)&&n.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:100}},n.createElement(p.a,{isLoading:!0}),n.createElement("br",null),"Calculating data availability..."))}},{key:"options",get:function(){var e,t=this;if(null===(e=this.props.freqPromise)||void 0===e?void 0:e.isComplete){var r=l.reduce(this.props.options,function(e,r){var n=0===t.props.freqPromise.result[r.key];return e.push({label:r.label,key:r.key,disabled:n,selected:r.selected,isSharedChart:r.isSharedChart,freq:n?0:t.props.freqPromise.result[r.key]}),e},[]);return this.props.optionsGivenInSortedOrder?r:r.sort(function(e,t){return t.freq-e.freq||e.label.localeCompare(t.label)})}var n=this.props.options.map(function(e){return Object.assign({freq:100},e)});return this.props.optionsGivenInSortedOrder?n:n.sort(function(e,t){return e.label.localeCompare(t.label)})}},{key:"columns",get:function(){var e=this,t=[{name:this.props.firstColumnHeaderName,render:function(t){return n.createElement(i.Observer,null,function(){return n.createElement("div",{className:m()(s.a.option,"add-chart-option",g({},s.a.markedForDeletion,e.props.markedForDeletion&&e.props.markedForDeletion.includes(t.key))),"data-test":"add-chart-option-".concat(t.label.toLowerCase().replace(/\s/g,"-"))},n.createElement(u.a,{checked:t.selected,disabled:t.disabled||e.props.markedForDeletion&&e.props.markedForDeletion.includes(t.key),labelProps:{className:m()(s.a.label,t.disabled?s.a.labelDisabled:"")},inputProps:{className:s.a.input},onChange:function(){return e.onOptionChange(t)}},n.createElement(b.m,{text:t.label})))})},filter:function(e,t,r){return e.label.toUpperCase().includes(r)},sortBy:function(e){return e.label},width:this.props.width-80-(this.props.shareCharts||this.props.deleteChart?70:0),defaultSortDirection:"asc"}];return this.props.freqPromise&&t.push({name:"Freq",tooltip:n.createElement("span",null,Object(y.a)(this.props.frequencyHeaderTooltip,"% samples with data")),render:function(t){var r;return n.createElement("span",{className:m()(t.disabled?s.a.labelDisabled:"",g({},s.a.markedForDeletion,e.props.markedForDeletion&&e.props.markedForDeletion.includes(t.key)))},(null===(r=e.props.freqPromise)||void 0===r?void 0:r.isComplete)?Object(c.ab)(t.freq):"")},sortBy:function(e){return e.freq},defaultSortDirection:"desc",width:60}),(this.props.shareCharts||this.props.deleteChart)&&t.push({name:" ",render:function(t){var r=n.createElement(n.Fragment,null);return r=e.props.markedForDeletion&&e.props.markedForDeletion.includes(t.key)?n.createElement("button",{className:"btn btn-xs btn-default",onClick:function(){return e.onRestoreClick(t)}},"Restore"):n.createElement(n.Fragment,null,e.props.deleteChart&&n.createElement(b.i,{overlay:"Delete Chart",placement:"top"},n.createElement("span",{onClick:function(){return e.onDeleteClick(t)},style:{marginRight:"5px"}},n.createElement("i",{className:"fa fa-md fa-trash",style:{cursor:"pointer"}}))),e.props.shareCharts&&n.createElement("span",{onClick:function(){return e.shareChart(t)}},n.createElement("i",{className:"fa fa-share-alt",style:{cursor:"pointer"}}))),n.createElement("div",{style:{display:"flex",justifyContent:"flex-end"},className:m()(g({},s.a.labelDisabled,t.disabled))},r)},width:70}),t}},{key:"tableHeight",get:function(){return this.options.length>15?375:25*(this.options.length+1)}},{key:"extraButtons",get:function(){var e=this;return this.props.shareCharts?[{content:n.createElement(n.Fragment,null,"Share selected"),onClick:this.shareSelected,isDisabled:function(){return 0===e.props.options.filter(function(e){return e.selected}).length}}]:[]}}])&&v(r.prototype,a),d&&v(r,d),t}();Object.defineProperty(k,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{firstColumnHeaderName:"Name",hideControls:!1,width:400}}),A([o.computed],k.prototype,"options",null),A([f.default],k.prototype,"onDeleteClick",null),A([f.default],k.prototype,"shareChart",null),A([f.default],k.prototype,"onRestoreClick",null),A([o.computed],k.prototype,"columns",null),A([o.computed],k.prototype,"tableHeight",null),A([f.default],k.prototype,"getCurrentSelectedRows",null),A([f.default],k.prototype,"getCurrentSelectedRowKeys",null),A([o.action.bound],k.prototype,"addAll",null),A([o.action.bound],k.prototype,"removeAll",null),A([o.action.bound],k.prototype,"onOptionChange",null),A([o.action.bound],k.prototype,"shareSelected",null),A([o.computed],k.prototype,"extraButtons",null),k=A([i.observer],k),t.a=k},873:function(e,t,r){e.exports=r(35)(166)},874:function(e,t,r){e.exports=r(35)(100)},875:function(e,t,r){"use strict";r.d(t,"a",function(){return d}),r.d(t,"b",function(){return f});var n=r(0),o=r(9),i=r(868);function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},d=function(e){var t=e.genePanelIds,r=e.toggleModal;return t.length>0?n.createElement("span",{style:{maxWidth:400}},"Gene panels:"," ",t.map(function(e,t){return[t>0&&", ",n.createElement("a",{key:e,"data-test":"gene-panel-linkout-".concat(e),href:"#",onClick:function(){r(e)}},e)]})):n.createElement("span",null)},f=function(e){function t(){var e,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,e=!(o=s(t).apply(this,arguments))||"object"!==c(o)&&"function"!=typeof o?l(r):o,Object.defineProperty(l(e),"getGenesList",{enumerable:!0,configurable:!0,writable:!0,value:function(e){return e&&e.genes?e.genes.map(function(e){return n.createElement("p",{key:e.entrezGeneId},e.hugoGeneSymbol)}):null}}),e}var r,o,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,n["Component"]),r=t,(o=[{key:"render",value:function(){var e=this.props.genePanelCache.get({genePanelId:this.props.panelName});return n.createElement(i.a,{panelName:this.props.panelName,show:this.props.show,onHide:this.props.onHide,isLoading:e.isPending},e.isComplete&&this.getGenesList(e.result))}}])&&a(r.prototype,o),p&&a(r,p),t}();f=p([o.observer],f)},876:function(e,t,r){"use strict";var n=r(0),o=r(9),i=r(1044),a=r.n(i),s=r(5),l=r.n(s),u=r(2),c=r(1),p=r.n(c),d=r(328),f=r(308),h=r.n(f),m=r(6),b=r(12);function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var w=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":O(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a};function E(e){return e.promises?0===e.promises.length?"complete":m.Z.apply(void 0,C(e.promises)):"pending"}var T=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=!(o=g(t).call(this,e))||"object"!==O(o)&&"function"!=typeof o?v(n):o,Object.defineProperty(v(r),"timeShown",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(v(r),"timeShownInterval",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object(u.makeObservable)(v(r)),r}var r,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,n["Component"]),r=t,(o=[{key:"componentWillMount",value:function(){var e=this;this.timeShownInterval=setInterval(function(){e.props.show?e.timeShown+=1:e.timeShown>0&&(e.timeShown=0)},1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timeShownInterval)}},{key:"makeItem",value:function(e,t){var r,o,i,s=null,u=this.props.sequential&&t>this.firstIncompleteIndex;if(!u&&!e.hideIcon)switch(E(e)){case"complete":s=n.createElement("i",{className:l()("fa fa-sm fa-check",a.a["fa-check"])});break;case"pending":s=n.createElement(h.a,{name:"double-bounce",fadeIn:!1,className:a.a["pulse-spinner"]});break;case"error":s=n.createElement("i",{className:l()("fa fa-sm fa-exclamation-triangle",a.a["fa-exclamation-triangle"])})}return n.createElement("span",{className:l()(a.a["item-row"],(r={},o=a.a["not-invoked-item"],i=u,o in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i,r)),style:e.style},e.label,n.createElement("span",{style:{marginLeft:7}},s))}},{key:"render",value:function(){return this.props.show?n.createElement("div",{className:a.a.container},n.createElement("div",{className:a.a["items-container"]},this.items.map(this.makeItem)),p.a.some(this.items,function(e){return"error"===E(e)})&&n.createElement(d.a,null)):null}},{key:"items",get:function(){return this.props.getItems(this.timeShown)}},{key:"firstIncompleteIndex",get:function(){return this.items.findIndex(function(e){return"complete"!==E(e)})}}])&&y(r.prototype,o),i&&y(r,i),t}();w([u.observable],T.prototype,"timeShown",void 0),w([u.computed],T.prototype,"items",null),w([u.computed],T.prototype,"firstIncompleteIndex",null),w([b.default],T.prototype,"makeItem",null),T=w([o.observer],T),t.a=T},879:function(e,t,r){e.exports=r(35)(779)},890:function(e,t,r){"use strict";r.d(t,"b",function(){return o}),r.d(t,"a",function(){return i});var n=/.+\.(.+)/;function o(e){var t=new URL(e).pathname;if(t){var r=t.match(n);if(r)return r[1].toLowerCase()}}function i(e){return"https://docs.google.com/viewerng/viewer?url=".concat(e,"?pid=explorer&efh=false&a=v&chrome=false&embedded=true")}},897:function(e,t,r){e.exports={portalWidth:"styles-module__portalWidth__1Knza",framedImage:"styles-module__framedImage__p1p-k",main:"styles-module__main__2V5AI",operations:"styles-module__operations__2tHBt",options:"styles-module__options__2V0tE",option:"styles-module__option__dhLVt",markedForDeletion:"styles-module__markedForDeletion__2l0on",footer:"styles-module__footer__8u68Z",input:"styles-module__input__2Zk8R",label:"styles-module__label__YKqSs",labelDisabled:"styles-module__labelDisabled__3jDaR",sharedChart:"styles-module__sharedChart__23Z4O"}},898:function(e,t,r){e.exports=r(35)(12)},899:function(e,t,r){e.exports=r(35)(451)},900:function(e,t,r){e.exports=r(35)(706)},901:function(e,t,r){e.exports=r(35)(356)},902:function(e,t,r){e.exports=r(35)(695)},903:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0ZWQgYnkgSWNvTW9vbi5pbyAtLT4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIxNCIgaGVpZ2h0PSIxNCI+CiAgPCEtLU5vIGxldmVsIGljb25zLS0+CiAgICAgIDxnICB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3LCA3KSI+CiAgICAgICAgPGNpcmNsZSByPSI2IiBmaWxsPSJub25lIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZT0iIzAwN0ZGRiI+PC9jaXJjbGU+CiAgICAgICAgPGNpcmNsZSByPSIzIiBmaWxsPSJub25lIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZT0iIzAwN0ZGRiI+PC9jaXJjbGU+CiAgICAgICAgPGNpcmNsZSByPSIxLjUiIGZpbGw9IiMwMDdGRkYiIHN0cm9rZT0ibm9uZSI+PC9jaXJjbGU+CiAgICAgIDwvZz4KPC9zdmc+"},907:function(e,t,r){"use strict";var n=r(0),o=r(1),i=r.n(o),a=r(9),s=r(2),l=r(120),u=r(8);function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var m=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":h(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},b=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=!(o=p(t).call(this,e))||"object"!==h(o)&&"function"!=typeof o?d(n):o,Object.defineProperty(d(r),"_selectedProfileOption",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(d(r),"_selectedGenericAssayEntityIds",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(d(r),"_genericAssaySearchText",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object(s.makeObservable)(d(r)),r.props.initialGenericAssayEntityIds&&(r._selectedGenericAssayEntityIds=r.props.initialGenericAssayEntityIds),r}var r,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,n["Component"]),r=t,(o=[{key:"onSubmit",value:function(){var e=this;if(void 0!==this.selectedProfileOption){if(this.props.onChartSubmit){var t=this.selectedProfileOption,r=this._selectedGenericAssayEntityIds.map(function(r){return{name:r+": "+t.profileName,description:t.description,profileType:t.value,genericAssayType:e.props.genericAssayType,dataType:t.dataType,genericAssayEntityId:r,patientLevel:t.patientLevel}});this.props.onChartSubmit(r),this.clearSelectedEntities()}if(this.props.onTrackSubmit){var n=this.selectedProfileOption;this.props.onSelectGenericAssayProfile&&this.props.onSelectGenericAssayProfile(n.value);var o=this._selectedGenericAssayEntityIds.map(function(t){return{profileId:n.value,genericAssayType:e.props.genericAssayType,genericAssayEntityId:t}});this.props.onTrackSubmit(o)}}}},{key:"clearSelectedEntities",value:function(){this._selectedGenericAssayEntityIds=[]}},{key:"handleProfileSelect",value:function(e){e&&e.value&&(this._selectedProfileOption=e)}},{key:"onSelectGenericAssayEntities",value:function(e,t){var r=e||[];"select-option"===t.action&&"select_all_filtered_options"===t.option.value&&(r=i.a.union(this.filteredGenericAssayOptions,r));var n=r.map(function(e){return e.value});n=n.filter(function(e){return"select_all_filtered_options"!==e}),this._selectedGenericAssayEntityIds=n,this._genericAssaySearchText=""}},{key:"doesOptionMatchSearchText",value:function(e,t){var r=!1;return(!e||new RegExp(e,"i").test(t.label)||new RegExp(e,"i").test(t.value))&&(r=!0),r}},{key:"filterGenericAssayOption",value:function(e,t){return"select_all_filtered_options"===e.value||this.doesOptionMatchSearchText(t,e)&&!this._selectedGenericAssayEntityIds.includes(e.value)}},{key:"onGenericAssayInputChange",value:function(e,t){"input-change"===t.action?this._genericAssaySearchText=e:"set-value"!==t.action&&(this._genericAssaySearchText="")}},{key:"render",value:function(){return n.createElement("div",{"data-test":"GenericAssaySelection",style:{width:this.props.containerWidth?this.props.containerWidth-20:"auto"}},n.createElement("div",{"data-test":"GenericAssayEntitySelection"},n.createElement(l.default,{name:"generic-assay-select",placeholder:"Search for ".concat(Object(u.n)(this.props.genericAssayType,!0),"..."),closeMenuOnSelect:!1,value:this.selectedGenericAssaysJS,isMulti:!0,isClearable:!1,options:this.genericAssayOptions,filterOption:this.filterGenericAssayOption,onInputChange:this.onGenericAssayInputChange,onChange:this.onSelectGenericAssayEntities,styles:{multiValueLabel:function(e){return Object.assign(Object.assign({},e),{whiteSpace:"normal"})}}})),n.createElement("div",{style:{display:"flex",marginTop:10}},n.createElement("div",{"data-test":"GenericAssayProfileSelection",style:{flex:1,marginRight:15}},n.createElement(l.default,{value:this.selectedProfileOption,onChange:this.handleProfileSelect,options:this.props.molecularProfileOptions,isClearable:!1,isSearchable:!1})),n.createElement("button",{disabled:this.buttonDisabled,className:"btn btn-primary btn-sm","data-test":"GenericAssaySelectionSubmitButton",onClick:this.onSubmit},this.props.submitButtonText)))}},{key:"selectedProfileOption",get:function(){return void 0!==this._selectedProfileOption?this._selectedProfileOption:this.props.molecularProfileOptions?this.props.molecularProfileOptions[0]:void 0}},{key:"buttonDisabled",get:function(){return!this.props.allowEmptySubmission&&i.a.isEmpty(this._selectedGenericAssayEntityIds)}},{key:"genericAssayEntitiesOptionsByValueMap",get:function(){return i.a.keyBy(this.props.genericAssayEntityOptions,function(e){return e.value})}},{key:"selectedGenericAssayEntities",get:function(){var e=this;return i.a.intersection(this._selectedGenericAssayEntityIds,i.a.keys(this.genericAssayEntitiesOptionsByValueMap)).map(function(t){return e.genericAssayEntitiesOptionsByValueMap[t]})}},{key:"selectedGenericAssaysJS",get:function(){return Object(s.toJS)(this.selectedGenericAssayEntities)}},{key:"genericAssayOptions",get:function(){var e=this,t=this.props.genericAssayEntityOptions,r=this.props.genericAssayEntityOptions.filter(function(t){return e.doesOptionMatchSearchText(e._genericAssaySearchText,t)&&!e._selectedGenericAssayEntityIds.includes(t.value)}).length;return this._genericAssaySearchText.length>0&&r>0&&(t=i.a.concat({id:"select_all_filtered_options",value:"select_all_filtered_options",label:"Select all filtered options (".concat(r,")")},t)),t}},{key:"filteredGenericAssayOptions",get:function(){var e=this;return i.a.filter(this.genericAssayOptions,function(t){return"select_all_filtered_options"!==t.value&&e.doesOptionMatchSearchText(e._genericAssaySearchText,t)})}},{key:"isSelectedGenericAssayOptionsOverLimit",get:function(){return this._selectedGenericAssayEntityIds.length>100}}])&&c(r.prototype,o),a&&c(r,a),t}();Object.defineProperty(b,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{allowEmptySubmission:!1}}),m([s.observable],b.prototype,"_selectedProfileOption",void 0),m([s.observable.ref],b.prototype,"_selectedGenericAssayEntityIds",void 0),m([s.observable],b.prototype,"_genericAssaySearchText",void 0),m([s.action.bound],b.prototype,"onSubmit",null),m([s.action.bound],b.prototype,"clearSelectedEntities",null),m([s.action.bound],b.prototype,"handleProfileSelect",null),m([s.computed],b.prototype,"selectedProfileOption",null),m([s.computed],b.prototype,"buttonDisabled",null),m([s.computed],b.prototype,"genericAssayEntitiesOptionsByValueMap",null),m([s.action.bound],b.prototype,"onSelectGenericAssayEntities",null),m([s.computed],b.prototype,"selectedGenericAssayEntities",null),m([s.computed],b.prototype,"selectedGenericAssaysJS",null),m([s.computed],b.prototype,"genericAssayOptions",null),m([s.computed],b.prototype,"filteredGenericAssayOptions",null),m([s.action.bound],b.prototype,"filterGenericAssayOption",null),m([s.action.bound],b.prototype,"onGenericAssayInputChange",null),m([s.computed],b.prototype,"isSelectedGenericAssayOptionsOverLimit",null),b=m([a.observer],b),t.a=b},923:function(e,t,r){"use strict";var n=r(0),o=r(9);function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,s(t).apply(this,arguments))}var r,o,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,n["Component"]),r=t,(o=[{key:"render",value:function(){return n.createElement("div",{className:"checkbox",style:Object.assign({display:"flex",alignItems:"center"},this.props.style)},n.createElement("label",null,n.createElement("input",{type:"checkbox",value:this.props.value,checked:this.props.checked,onClick:this.props.onClick,style:{marginTop:1}})),"function"==typeof this.props.label?this.props.label():this.props.label)}}])&&i(r.prototype,o),u&&i(r,u),t}();p=c([o.observer],p),t.a=p},930:function(e,t,r){"use strict";r.d(t,"a",function(){return D});var n=r(0),o=r(9),i=r(2),a=r(332),s=r.n(a),l=r(17),u=r(814),c=r.n(u),p=(r(931),r(827)),d=r(1),f=r(18),h=r(99),m=r(56),b=r(19),y=r(3),g=r(12),v=r(31),S=r(5),C=r.n(S),O=r(840),w=r(851),E=r(7);function T(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function A(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var D,N=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":I(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},R=function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})};!function(e){e.TOOLTIP="tooltip",e.CHART="chart"}(D||(D={}));var G=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=P(t).call(this,e),r=!o||"object"!==I(o)&&"function"!=typeof o?k(n):o,Object.defineProperty(k(r),"tooltipModel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(k(r),"scatterFilter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(k(r),"highlightedCurve",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(k(r),"sliderValue",{enumerable:!0,configurable:!0,writable:!0,value:r.getInitialSliderValue()}),Object.defineProperty(k(r),"isTooltipHovered",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(k(r),"tooltipCounter",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(k(r),"svgContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(k(r),"styleOptsDefaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{width:900,height:500,padding:{top:20,bottom:50,left:60,right:20},tooltipXOffset:20,tooltipYOffset:-47,axis:{x:{axisLabel:{padding:35},grid:{opacity:0}},y:{axisLabel:{padding:45,fill:"black"},grid:{opacity:0}}},pValue:{x:610,y:30,textAnchor:"start"},legend:{x:600,y:50}}}),Object.defineProperty(k(r),"events",{enumerable:!0,configurable:!0,writable:!0,value:[{target:"data",eventHandlers:{onMouseOver:function(){return[{target:"data",mutation:function(e){return r.tooltipModel=e,r.tooltipCounter++,{active:!0}}}]},onMouseOut:function(){return[{target:"data",mutation:function(){return R(k(r),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.a)(100);case 2:return this.isTooltipHovered||1!==this.tooltipCounter||(this.tooltipModel=null),this.tooltipCounter--,e.abrupt("return",{active:!1});case 5:case"end":return e.stop()}},e,this)}))}}]}}}]}),Object(i.makeObservable)(k(r)),r.tooltipMouseEnter=r.tooltipMouseEnter.bind(k(r)),r.tooltipMouseLeave=r.tooltipMouseLeave.bind(k(r)),r}var r,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,n["Component"]),r=t,(o=[{key:"getInitialSliderValue",value:function(){return E.b.serverConfig.survival_initial_x_axis_limit?Math.min(E.b.serverConfig.survival_initial_x_axis_limit,this.maximumDataMonthValue):this.maximumDataMonthValue}},{key:"toSVGDOMNode",value:function(){return Object(v.Jb)(this.svgContainer.firstChild,{legendGroupSelector:".survivalChartDownloadLegend",selectorToHide:".survivalChartLegendHideForDownload"})}},{key:"tooltipMouseEnter",value:function(){this.isTooltipHovered=!0}},{key:"tooltipMouseLeave",value:function(){this.isTooltipHovered=!1,this.tooltipModel=null}},{key:"getSvg",value:function(){return this.toSVGDOMNode()}},{key:"getData",value:function(){var e=[],t=!0,r=!1,n=void 0;try{for(var o,i=this.analysisGroupsWithData[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;e.push({scatterData:Object(h.l)(this.props.sortedGroupedSurvivals[a.value],this.survivalSummaries[a.value].map(function(e){return e.survivalFunctionEstimate}),a.value),title:void 0!==a.name?a.name:a.value})}}catch(e){r=!0,n=e}finally{try{t||null==i.return||i.return()}finally{if(r)throw n}}return Object(h.i)(e,this.props.title)}},{key:"hoverCircleFillOpacity",value:function(e,t){return t||this.isTooltipHovered&&this.tooltipModel&&this.tooltipModel.datum.studyId===e.studyId&&this.tooltipModel.datum.patientId===e.patientId?.3:0}},{key:"getAxisTickCount",value:function(e){return 5*Math.ceil(e/200)}},{key:"onSliderChange",value:function(e){this.sliderValue=e}},{key:"onSliderTextChange",value:function(e){this.sliderValue=Number.parseFloat(e)}},{key:"render",value:function(){return 0===d.flatten(d.values(this.props.sortedGroupedSurvivals)).length?n.createElement("div",{className:"alert alert-info"},"No data to plot."):n.createElement("div",{style:{position:"relative"}},this.props.legendLocation===D.TOOLTIP?n.createElement(y.i,{mouseLeaveDelay:.2,placement:"rightBottom",overlay:this.chartTooltip},this.chart):this.chart,this.tooltipModel&&n.createElement(l.Popover,_({arrowOffsetTop:56,className:C()("cbioportal-frontend","cbioTooltip",c.a.Tooltip),positionLeft:this.tooltipModel.x+this.styleOpts.tooltipXOffset},{container:this},{positionTop:this.tooltipModel.y+this.styleOpts.tooltipYOffset,onMouseEnter:this.tooltipMouseEnter,onMouseLeave:this.tooltipMouseLeave}),n.createElement("div",null,"Patient ID:"," ",n.createElement("a",{href:Object(b.v)(this.tooltipModel.datum.studyId,this.tooltipModel.datum.patientId),target:"_blank"},this.tooltipModel.datum.patientId),n.createElement("br",null),!!this.props.showCurveInTooltip&&["Curve: ".concat(this.tooltipModel.datum.group),n.createElement("br",null)],this.props.yLabelTooltip,":"," ",this.tooltipModel.datum.y.toFixed(2),"%",n.createElement("br",null),this.tooltipModel.datum.status?this.props.xLabelWithEventTooltip:this.props.xLabelWithoutEventTooltip,": ",this.tooltipModel.datum.x.toFixed(2)," months"," ",this.tooltipModel.datum.status?"":"(censored)",n.createElement("br",null),this.props.analysisClinicalAttribute&&n.createElement("span",null,this.props.analysisClinicalAttribute.displayName,":"," ",this.props.patientToAnalysisGroups[this.tooltipModel.datum.uniquePatientKey]))),this.props.showTable&&n.createElement("table",{className:"table table-striped",style:{marginTop:20,width:"100%"}},n.createElement("tbody",null,n.createElement("tr",null,n.createElement("td",null),n.createElement("td",null,this.props.totalCasesHeader),n.createElement("td",null,this.props.statusCasesHeader),n.createElement("td",null,this.props.medianMonthsHeader)),this.tableRows)))}},{key:"styleOpts",get:function(){var e=d.merge({},this.styleOptsDefaultProps,this.props.styleOpts);return e.padding.right=this.props.legendLocation===D.CHART?300:e.padding.right,this.props.styleOpts&&this.props.styleOpts.legend&&void 0!==this.props.styleOpts.legend.x||(e.legend.x=e.width-e.padding.right),e}},{key:"downSamplingDenominators",get:function(){return{x:this.styleOpts.width-this.styleOpts.padding.left-this.styleOpts.padding.right,y:this.styleOpts.height-this.styleOpts.padding.top-this.styleOpts.padding.bottom}}},{key:"survivalSummaries",get:function(){return d.mapValues(this.props.sortedGroupedSurvivals,function(e){return Object(h.q)(e)})}},{key:"unfilteredScatterData",get:function(){var e=this;return d.mapValues(this.props.sortedGroupedSurvivals,function(t,r){var n=e.survivalSummaries[r],o=e.analysisGroupsMap[r].name;return{numOfCases:t.length,line:Object(h.j)(t,n.map(function(e){return e.survivalFunctionEstimate})),scatterWithOpacity:Object(h.m)(t,n.map(function(e){return e.survivalFunctionEstimate}),o),scatter:Object(h.l)(t,n.map(function(e){return e.survivalFunctionEstimate}),o)}})}},{key:"scatterData",get:function(){return Object(h.f)(this.unfilteredScatterData,this.scatterFilter,{xDenominator:this.downSamplingDenominators.x,yDenominator:this.downSamplingDenominators.y,threshold:1e3})}},{key:"analysisGroupsMap",get:function(){return d.keyBy(this.props.analysisGroups,function(e){return e.value})}},{key:"logRankTestPVal",get:function(){var e=this;return this.analysisGroupsWithData.length>1&&d.every(this.analysisGroupsWithData,function(t){return e.props.sortedGroupedSurvivals[t.value].length>10})?w.a.apply(void 0,T(this.analysisGroupsWithData.map(function(t){return e.props.sortedGroupedSurvivals[t.value]}))):null}},{key:"victoryLegendData",get:function(){var e=[];if(this.props.legendLocation===D.CHART){var t=!0,r=!1,n=void 0;try{for(var o,i=this.analysisGroupsWithData[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;e.push({name:a.legendText||a.name||a.value,symbol:{fill:a.color,strokeOpacity:0,type:"square",size:6}})}}catch(e){r=!0,n=e}finally{try{t||null==i.return||i.return()}finally{if(r)throw n}}}return e}},{key:"pValueText",get:function(){return null!==this.props.pValue&&void 0!==this.props.pValue?n.createElement(f.VictoryLabel,{x:this.styleOpts.pValue.x,y:this.styleOpts.pValue.y,style:y.Y,textAnchor:this.styleOpts.pValue.textAnchor,text:"Logrank Test P-Value: ".concat(Object(m.b)(this.props.pValue,3,.01))}):null}},{key:"legendDataForDownload",get:function(){var e=this.analysisGroupsWithData.map(function(e){return{name:e.name?e.name:e.value,symbol:{fill:e.color,strokeOpacity:0,type:"square",size:6}}});return this.props.naPatientsHiddenInSurvival&&e.push({name:"* Patients with NA for any of the selected attributes are excluded",symbol:{opacity:0}}),e}},{key:"analysisGroupsWithData",get:function(){var e=this,t=this.props.analysisGroups;return t=t.filter(function(t){return t.value in e.scatterData&&e.scatterData[t.value].numOfCases>0})}},{key:"scattersAndLines",get:function(){var e=this,t=this.analysisGroupsWithData,r=(t=d.sortBy(t,function(t){return e.highlightedCurve===t.value?1:0})).map(function(t){return n.createElement(f.VictoryLine,{key:t.value,interpolation:"stepAfter",data:e.scatterData[t.value].line,style:{data:{stroke:t.color,strokeWidth:e.highlightedCurve===t.value?4:1,fill:"#000000",fillOpacity:0}}})}),o=t.map(function(t){return n.createElement(f.VictoryScatter,{key:t.value,data:e.scatterData[t.value].scatterWithOpacity,symbol:"plus",style:{data:{fill:t.color,opacity:function(e){return e.opacity}}},size:3})}),i=t.map(function(t){return n.createElement(f.VictoryScatter,{key:t.value,data:e.scatterData[t.value].scatter,symbol:"circle",style:{data:{fill:t.color,fillOpacity:e.hoverCircleFillOpacity}},size:10,events:e.events})});return r.concat(o).concat(i)}},{key:"legendForDownload",get:function(){var e=d.cloneDeep(y.a);return e.legend.style.data={type:"square",size:5,strokeWidth:0,stroke:"black"},n.createElement(f.VictoryLegend,{x:0,y:this.styleOpts.height+1,style:Object.assign(Object.assign({},e.legend.style),{title:{fontWeight:"bold"}}),title:this.props.title,rowGutter:-10,data:this.legendDataForDownload,groupComponent:n.createElement("g",{className:"survivalChartDownloadLegend"})})}},{key:"xAxisTickCount",get:function(){return this.props.xAxisTickCount||this.getAxisTickCount(this.showLegend?this.styleOpts.legend.x:this.styleOpts.width)}},{key:"showLegend",get:function(){return this.victoryLegendData.length>0}},{key:"maximumDataMonthValue",get:function(){return d.chain(this.props.sortedGroupedSurvivals).map(function(e){return e[e.length-1].months}).max().ceil().value()}},{key:"chart",get:function(){var e=this;return n.createElement("div",{className:this.props.className,"data-test":"SurvivalChart"},this.props.showDownloadButtons&&n.createElement(y.j,{dontFade:!0,filename:this.props.fileName,buttons:["SVG","PNG","PDF","Data"],getSvg:this.getSvg,getData:this.getData,style:{position:"absolute",zIndex:10,right:10},type:"button"}),this.props.showSlider&&n.createElement("div",{className:"small",style:{display:"flex",alignItems:"center",marginLeft:60}},n.createElement("span",null,"X-Axis Max:"),n.createElement("div",{className:"RangeSliderContainer",style:{width:300,marginLeft:10,marginRight:10}},n.createElement(s.a,{min:0,max:this.maximumDataMonthValue,value:this.sliderValue,onChange:this.onSliderChange,tooltip:!1,step:1})),n.createElement(y.l,{className:c.a.XmaxNumberInput,value:this.sliderValue.toString(),setValue:this.onSliderTextChange,numericOnly:!0}),n.createElement("span",null,Object(y.ub)("Month",this.sliderValue)," Survival")),n.createElement(f.VictoryChart,{containerComponent:n.createElement(f.VictoryZoomContainer,{responsive:!1,disable:!0,zoomDomain:this.props.showSlider?{x:[0,this.sliderValue]}:void 0,onZoomDomainChange:d.debounce(function(t){e.scatterFilter=t},1e3),containerRef:function(t){return e.svgContainer=t}}),height:this.styleOpts.height,width:this.styleOpts.width,padding:this.styleOpts.padding,theme:y.a,domainPadding:{x:[10,50],y:[20,20]}},n.createElement(f.VictoryAxis,{style:this.styleOpts.axis.x,crossAxis:!1,tickCount:this.xAxisTickCount,label:this.props.xAxisLabel}),n.createElement(f.VictoryAxis,{label:this.props.yAxisLabel,dependentAxis:!0,tickFormat:function(e){return"".concat(e,"%")},tickCount:this.props.yAxisTickCount,style:this.styleOpts.axis.y,domain:[0,100],crossAxis:!1}),this.scattersAndLines,this.showLegend&&n.createElement(f.VictoryLegend,{x:this.styleOpts.legend.x,y:this.styleOpts.legend.y,data:this.victoryLegendData,labelComponent:this.props.legendLabelComponent||n.createElement(O.a,{dy:"0.3em",maxWidth:256}),groupComponent:n.createElement("g",{className:"survivalChartLegendHideForDownload"})}),this.legendForDownload,this.pValueText))}},{key:"chartTooltip",get:function(){var e=this;return n.createElement("div",{style:{maxWidth:250}},this.analysisGroupsWithData.map(function(t){return n.createElement("span",{key:t.value,style:{display:"inline-block",marginRight:12,fontWeight:e.highlightedCurve===t.value?"bold":"initial",cursor:"pointer"},onClick:function(){e.highlightedCurve=e.highlightedCurve===t.value?"":t.value}},n.createElement("div",{style:{width:10,height:10,display:"inline-block",backgroundColor:t.color,marginRight:5}}),t.name?t.name:t.value)}),this.props.showNaPatientsHiddenToggle&&n.createElement("div",{className:"checkbox"},n.createElement("label",null,n.createElement("input",{type:"checkbox",checked:this.props.naPatientsHiddenInSurvival,onClick:this.props.toggleSurvivalHideNAPatients})," ","Exclude patients with NA for any of the selected attributes.")))}},{key:"tableRows",get:function(){var e=this;return this.props.analysisGroups.map(function(t){return n.createElement("tr",null,n.createElement("td",null,t.name?t.name:t.value),Object(h.n)(e.props.sortedGroupedSurvivals[t.value],e.survivalSummaries[t.value]).map(function(e){return n.createElement("td",null,n.createElement("b",null,e))}))})}}])&&A(r.prototype,o),a&&A(r,a),t}();Object.defineProperty(G,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{showTable:!0,showSlider:!0,legendLocation:D.CHART,showNaPatientsHiddenToggle:!1,showDownloadButtons:!0,yAxisTickCount:11}}),N([i.observable.ref],G.prototype,"tooltipModel",void 0),N([i.observable],G.prototype,"scatterFilter",void 0),N([i.observable],G.prototype,"highlightedCurve",void 0),N([i.observable],G.prototype,"sliderValue",void 0),N([i.computed],G.prototype,"styleOpts",null),N([i.computed],G.prototype,"downSamplingDenominators",null),N([i.computed],G.prototype,"survivalSummaries",null),N([i.computed],G.prototype,"unfilteredScatterData",null),N([i.computed],G.prototype,"scatterData",null),N([i.computed],G.prototype,"analysisGroupsMap",null),N([i.computed],G.prototype,"logRankTestPVal",null),N([i.computed],G.prototype,"victoryLegendData",null),N([i.computed],G.prototype,"legendDataForDownload",null),N([g.default],G.prototype,"getSvg",null),N([g.default],G.prototype,"getData",null),N([g.default],G.prototype,"hoverCircleFillOpacity",null),N([i.computed],G.prototype,"analysisGroupsWithData",null),N([i.computed],G.prototype,"scattersAndLines",null),N([i.computed],G.prototype,"legendForDownload",null),N([i.computed],G.prototype,"xAxisTickCount",null),N([i.computed],G.prototype,"showLegend",null),N([i.computed],G.prototype,"maximumDataMonthValue",null),N([i.action.bound],G.prototype,"onSliderChange",null),N([i.action.bound],G.prototype,"onSliderTextChange",null),N([i.computed],G.prototype,"chart",null),N([i.computed],G.prototype,"chartTooltip",null),N([i.computed],G.prototype,"tableRows",null),G=N([o.observer],G),t.b=G},931:function(e,t,r){},933:function(e,t,r){e.exports=r(35)(69)},940:function(e,t,r){"use strict";var n=r(0),o=r(72),i=r(9),a=r(2),s=r(12);function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":d(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},h=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=!(o=u(t).call(this,e))||"object"!==d(o)&&"function"!=typeof o?c(n):o,Object.defineProperty(c(r),"iframeLoaded",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object(a.makeObservable)(c(r)),r}var r,i,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,n["Component"]),r=t,(i=[{key:"onLoad",value:function(){this.iframeLoaded=!0}},{key:"render",value:function(){return n.createElement("div",{style:{position:"relative"}},n.createElement(o.a,{center:!0,size:"big",isLoading:!this.iframeLoaded}),n.createElement("iframe",{id:this.props.iframeId||"",className:this.props.className||"",style:{width:"100%",position:"relative",zIndex:100,height:this.props.height,border:"none"},src:this.props.url,onLoad:this.onLoad}))}}])&&l(r.prototype,i),s&&l(r,s),t}();f([a.observable],h.prototype,"iframeLoaded",void 0),f([s.default],h.prototype,"onLoad",null),h=f([i.observer],h),t.a=h},944:function(e,t,r){"use strict";var n=r(0),o=r(9),i=r(2),a=r(890),s=r(12);function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":d(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},h=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=!(o=u(t).call(this,e))||"object"!==d(o)&&"function"!=typeof o?c(n):o,Object(i.makeObservable)(c(r)),r}var r,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,n["Component"]),r=t,(o=[{key:"openResource",value:function(){this.props.openResource(this.props.resource)}},{key:"render",value:function(){return n.createElement("div",null,n.createElement("a",{onClick:this.openResource},this.icon,this.props.resource.resourceDefinition.displayName||this.props.resource.url),n.createElement("a",{href:this.props.resource.url,style:{marginLeft:16,fontSize:10},target:"_blank"},n.createElement("i",{className:"fa fa-external-link fa-sm",style:{marginRight:5,color:"black"}}),"Open in new window"))}},{key:"icon",get:function(){var e="";switch(Object(a.b)(this.props.resource.url)){case"pdf":e="fa fa-file-pdf-o";break;case"png":case"jpeg":case"jpg":case"gif":e="fa fa-file-image-o";break;case"m4a":case"flac":case"mp3":case"mp4":case"wav":e="fa fa-file-audio-o"}return e?n.createElement("i",{className:"".concat(e," fa-sm"),style:{marginRight:5,color:"black"}}):null}}])&&l(r.prototype,o),s&&l(r,s),t}();f([i.computed],h.prototype,"icon",null),f([s.default],h.prototype,"openResource",null),h=f([o.observer],h),t.a=h},945:function(e,t,r){"use strict";r.d(t,"a",function(){return h});var n=r(220),o=r(0),i=r(2),a=r(9);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":d(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},h=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=!(o=u(t).call(this,e))||"object"!==d(o)&&"function"!=typeof o?c(n):o,Object.defineProperty(c(r),"wrapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object(i.makeObservable)(c(r)),r}var r,a,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,o["Component"]),r=t,(a=[{key:"render",value:function(){var e=this;return o.createElement("div",s({className:this.props.className||""},this.props,{ref:function(t){return e.wrapper=t},style:this.style}),this.props.children)}},{key:"offset",get:function(){return this.props.offset||0}},{key:"style",get:function(){return{width:n.a.size.width-this.offset,overflowX:"auto"}}}])&&l(r.prototype,a),f&&l(r,f),t}();f([i.computed],h.prototype,"offset",null),f([i.computed],h.prototype,"style",null),h=f([a.observer],h)},949:function(e,t,r){e.exports=r(35)(365)},950:function(e,t,r){e.exports=r(35)(168)},951:function(e,t,r){e.exports=r(35)(149)},952:function(e,t,r){e.exports=r(35)(327)},953:function(e,t,r){e.exports=r(35)(749)},954:function(e,t,r){e.exports=r(35)(167)},955:function(e,t,r){e.exports=r(35)(748)},956:function(e,t,r){e.exports=r(35)(358)},962:function(e,t,r){e.exports=r(35)(521)},963:function(e,t,r){e.exports=r(35)(49)},986:function(e,t,r){"use strict";r.d(t,"a",function(){return p});var n=r(0),o=r(356),i=r(23);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,u(t).apply(this,arguments))}var r,a,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,n["Component"]),r=t,(a=[{key:"render",value:function(){var e=this;return n.createElement("span",{style:{cursor:"default"}},n.createElement(o.a,{text:"G",tooltip:function(){return e.getToolTip(e.props.qValue,e.props.peakGeneCount)}}))}},{key:"getToolTip",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return n.createElement("div",null,"Candidate driver gene, as determined by the ",n.createElement("b",null,"GISTIC"),n.createElement("br",null),"algorithm.",n.createElement("p",null),"The GISTIC algorithm identifies likely driver copy number",n.createElement("br",null),"alterations by evaluating the frequency and amplitude of",n.createElement("br",null),"observed CNA events within the entire study.",n.createElement("p",null),n.createElement("span",null," Q-value: ",(e||0).toExponential(3)),n.createElement(i.If,{condition:t>0},n.createElement(i.Then,null,n.createElement("br",null),n.createElement("span",null," ","Number of genes in the peak: ",t))))}}])&&s(r.prototype,a),p&&s(r,p),t}()},997:function(e,t,r){"use strict";var n=r(0),o=r(9),i=r(846),a=r(220),s=r(2),l=r(998),u=r.n(l),c=r(5),p=r.n(c),d=r(3),f=r(890);function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var S=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":v(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},C=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=!(o=b(t).call(this,e))||"object"!==v(o)&&"function"!=typeof o?y(n):o,Object(s.makeObservable)(y(r)),r}var r,o,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,n["Component"]),r=t,(o=[{key:"goToNextDatum",value:function(){this.isLastDatum||this.props.urlWrapper.setResourceUrl(this.props.resourceData[this.currentResourceIndex+1].url)}},{key:"goToPrevDatum",value:function(){this.isFirstDatum||this.props.urlWrapper.setResourceUrl(this.props.resourceData[this.currentResourceIndex-1].url)}},{key:"render",value:function(){var e=this.props.resourceData.length>1;return n.createElement("div",null,n.createElement(i.a,{title:this.currentResourceDatum.resourceDefinition.displayName,isLoading:!1,className:"pull-left",style:{marginBottom:10}}),n.createElement("div",{style:{width:"100%",height:this.iframeHeight,display:"flex",alignItems:"center"}},e&&n.createElement("div",{className:p()(u.a.carouselButton,h({},u.a.active,!this.isFirstDatum)),onClick:this.goToPrevDatum},n.createElement("i",{style:{marginRight:15},className:"fa fa-4x fa-chevron-left"})),this.httpIframeWithHttpsPortal?n.createElement("div",null,n.createElement("span",null,"We can't show this URL in the portal. Please use the link below:"),n.createElement("br",null),n.createElement("a",{href:this.currentResourceDatum.url},this.currentResourceDatum.url)):n.createElement("iframe",{src:this.iframeUrl,style:{width:"100%",height:"100%"}}),e&&n.createElement("div",{className:p()(u.a.carouselButton,h({},u.a.active,!this.isLastDatum)),onClick:this.goToNextDatum},n.createElement("i",{style:{marginLeft:15},className:"fa fa-4x fa-chevron-right"}))))}},{key:"iframeHeight",get:function(){return a.a.size.height-275}},{key:"currentResourceIndex",get:function(){var e=this;if(this.props.urlWrapper.query.resourceUrl){var t=this.props.resourceData.findIndex(function(t){return t.url===e.props.urlWrapper.query.resourceUrl});return-1===t?0:t}return 0}},{key:"currentResourceDatum",get:function(){return this.props.resourceData[this.currentResourceIndex]}},{key:"isFirstDatum",get:function(){return 0===this.currentResourceIndex}},{key:"isLastDatum",get:function(){return this.currentResourceIndex===this.props.resourceData.length-1}},{key:"httpIframeWithHttpsPortal",get:function(){return"https:"===Object(d.eb)().location.protocol&&"http:"===new URL(this.currentResourceDatum.url).protocol}},{key:"iframeUrl",get:function(){var e=Object(f.b)(this.currentResourceDatum.url),t=this.currentResourceDatum.url;switch(e){case"pdf":t=Object(f.a)(this.currentResourceDatum.url)}return t}}])&&m(r.prototype,o),l&&m(r,l),t}();S([s.computed],C.prototype,"iframeHeight",null),S([s.computed],C.prototype,"currentResourceIndex",null),S([s.computed],C.prototype,"currentResourceDatum",null),S([s.action.bound],C.prototype,"goToNextDatum",null),S([s.action.bound],C.prototype,"goToPrevDatum",null),S([s.computed],C.prototype,"isFirstDatum",null),S([s.computed],C.prototype,"isLastDatum",null),S([s.computed],C.prototype,"httpIframeWithHttpsPortal",null),S([s.computed],C.prototype,"iframeUrl",null),C=S([o.observer],C),t.a=C},998:function(e,t,r){e.exports={portalWidth:"styles-module__portalWidth__3mtfh",framedImage:"styles-module__framedImage__24LeD",carouselButton:"styles-module__carouselButton__35zgJ",active:"styles-module__active__xJZuN"}},999:function(e,t,r){"use strict";r.d(t,"b",function(){return b}),r.d(t,"a",function(){return y});var n=r(0),o=r(2),i=r(17),a=r(5),s=r.n(a),l=r(31),u=r(9);function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var m=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":h(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},b=17,y=8,g=function(e){function t(e){var r,n,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=!(i=p(t).call(this,e))||"object"!==h(i)&&"function"!=typeof i?d(n):i,Object(o.makeObservable)(d(r)),r}var r,a,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,n["Component"]),r=t,(a=[{key:"render",value:function(){return this.props.model?n.createElement(i.Popover,{arrowOffsetTop:b,className:s()("cbioportal-frontent","cbioTooltip"),positionLeft:this.positionLeft,positionTop:this.props.mousePosition.y-b,style:{width:150},placement:this.placement},n.createElement("div",null,n.createElement("div",null,"Number of samples:"," ",n.createElement("strong",null,this.props.model.sampleCount)),n.createElement("div",null,"Range:"," ",n.createElement("strong",null,Object(l.B)(this.props.model.start,this.props.model.end,this.props.model.special))))):null}},{key:"placement",get:function(){return this.props.totalBars<2*this.props.currentBarIndex?"left":"right"}},{key:"positionLeft",get:function(){return"left"===this.placement?this.props.mousePosition.x-(y+150):this.props.mousePosition.x+y}},{key:"transform",get:function(){return"left"===this.placement?"translate(-100%,0%)":void 0}}])&&c(r.prototype,a),u&&c(r,u),t}();m([o.computed],g.prototype,"placement",null),m([o.computed],g.prototype,"positionLeft",null),m([o.computed],g.prototype,"transform",null),g=m([u.observer],g),t.c=g}}]);