(window.webpackJsonp=window.webpackJsonp||[]).push([[12,3],{1000:function(e,t,n){e.exports=n(25)(875)},1001:function(e,t,n){e.exports=n(25)(451)},1002:function(e,t,n){e.exports=n(25)(833)},1003:function(e,t,n){e.exports=n(25)(448)},1005:function(e,t,n){e.exports=n(25)(165)},1006:function(e,t,n){e.exports=n(25)(369)},1007:function(e,t,n){e.exports=n(25)(879)},1008:function(e,t,n){e.exports=n(25)(151)},1009:function(e,t,n){e.exports=n(25)(456)},1010:function(e,t,n){e.exports=n(25)(204)},1058:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var r=n(0),o=n(9),i=n(15),a=n(2),s=n(5),l=n.n(s),u=n(6),c=n(66);function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var y=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":m(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},b=n(194),g=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=d(this,f(t).apply(this,arguments))).clipboards=[],e}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){var e=this;this.props.urlPromise.then(function(t){e.urlData=t,setTimeout(function(){e.initializeClipboards()},0)},function(){})}},{key:"showThumb",value:function(e){e.target.className="fa fa-thumbs-up"}},{key:"initializeClipboards",value:function(){this.clipboards.push(new b(this.sessionButton,{text:function(){return this.urlData.fullUrl}.bind(this),container:this.container})),this.urlData&&this.urlData.bitlyUrl&&this.clipboards.push(new b(this.bitlyButton,{text:function(){return this.urlData.bitlyUrl}.bind(this),container:this.container}))}},{key:"componentWillUnmount",value:function(){this.clipboards.forEach(function(e){return e.destroy()})}},{key:"render",value:function(){var e=this;return r.createElement(i.Modal,{show:!0,onHide:this.props.onHide},r.createElement(i.Modal.Header,{closeButton:!0},r.createElement(i.Modal.Title,null,this.props.title)),r.createElement(i.Modal.Body,{style:{minHeight:70}},r.createElement(c.a,{size:"big",center:!0,style:{top:32},isLoading:!this.urlData}),r.createElement("div",{className:l()({hidden:!this.urlData}),ref:function(t){return e.container=t}},r.createElement("form",null,r.createElement("div",{className:"form-group"},r.createElement("p",null,this.props.description),r.createElement("div",{className:"input-group"},r.createElement("input",{type:"text",className:"form-control",value:this.urlData?this.urlData.fullUrl:""}),r.createElement("div",{className:"input-group-addon"},r.createElement("a",{ref:function(t){return e.sessionButton=t},onClick:this.showThumb},r.createElement("i",{className:"fa fa-clipboard"}))))),this.urlData&&this.urlData.bitlyUrl&&r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"exampleInputAmount"},"Shortened URL"),r.createElement("div",{className:"input-group"},r.createElement("input",{type:"text",className:"form-control",value:this.urlData?this.urlData.bitlyUrl:""}),r.createElement("div",{className:"input-group-addon"},r.createElement("a",{onClick:this.showThumb,ref:function(t){return e.bitlyButton=t}},r.createElement("i",{className:"fa fa-clipboard"})))))))))}}])&&p(n.prototype,o),a&&p(n,a),t}();y([a.observable],g.prototype,"urlData",void 0),y([u.default],g.prototype,"showThumb",null),y([u.default],g.prototype,"initializeClipboards",null),g=y([o.observer],g)},1072:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),o=n(97);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,l(t).apply(this,arguments))}var n,i,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["Component"]),n=t,(i=[{key:"render",value:function(){var e=this;return r.createElement("a",{className:"dataset-table-download-link",style:{display:"block"},href:"http://download.cbioportal.org/"+this.props.studyId+".tar.gz",download:!0,onClick:function(){return Object(o.f)({category:"download",action:"study download",label:e.props.studyId})}},r.createElement("i",{className:"fa fa-download"}))}}])&&a(n.prototype,i),c&&a(n,c),t}()},1121:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__18DKo",framedImage:"styles-module__framedImage__24p2j",header:"styles-module__header__1aeAb",name:"styles-module__name__1XFGq",draggable:"styles-module__draggable__3RmmQ",controls:"styles-module__controls__1BH85",menuToggle:"styles-module__menuToggle__1KWSD",item:"styles-module__item__2oGTK",menuItemIcon:"styles-module__menuItemIcon__1T8eb",disabledMenuItem:"styles-module__disabledMenuItem__18WAz",survivalIcon:"styles-module__survivalIcon__20yGX",clickable:"styles-module__clickable__2tZDi",undo:"styles-module__undo__1M88I",downloadControl:"styles-module__downloadControl___BLbx",dropdownHoverEffect:"styles-module__dropdownHoverEffect__30h85"}},1127:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__2G9Ld",framedImage:"styles-module__framedImage__36jTC",rightPanel:"styles-module__rightPanel__1LNa2",summary:"styles-module__summary__3bP5G",description:"styles-module__description__3ShDq",submitQuery:"styles-module__submitQuery__3EV3t",iconGroup:"styles-module__iconGroup__1K9m4",studyLinks:"styles-module__studyLinks__ON9F9"}},1128:function(e,t,n){"use strict";(function(e){var r=n(0),o=n(1),i=n(9),a=n(1272),s=n.n(a),l=n(2),u=n(15),c=n(1273),p=n(6),d=n(196),f=n(97),h=n(30);function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var S,C=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":v(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},_=[{value:h.b.SAMPLE,label:"By sample ID"},{value:h.b.PATIENT,label:"By patient ID"}];!function(e){e[e.SELECTED=0]="SELECTED",e[e.UNSELECTED=1]="UNSELECTED"}(S||(S={}));var T=function(t){function n(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(e=y(this,b(n).apply(this,arguments))).validateContent=!1,e.chartNameValidation={warning:[],error:[]},e.dataFormatCollapsed=!0,e.showCaseIds=!1,e.caseIdsMode=h.b.SAMPLE,e.content="",e.validContent="",e}var i,a,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(n,r["Component"]),i=n,(a=[{key:"onClick",value:function(e){var t,n=this;if(e===S.SELECTED)t=this.props.selectedSamples;else{var r=o.keyBy(this.props.selectedSamples,function(e){return e.uniqueSampleKey});t=this.props.allSamples.filter(function(e){return!r[e.uniqueSampleKey]})}var i=t.map(function(e){return"".concat(e.studyId,":").concat(n.caseIdsMode===h.b.SAMPLE?e.sampleId:e.patientId).concat(n.props.disableGrouping?"":" ".concat(c.b))});this.caseIdsMode===h.b.PATIENT&&(i=o.uniq(i)),this.content=i.join("\n"),this.validateContent=!1,this.validContent=this.content}},{key:"onChange",value:function(e){this.validContent=e,this.validateContent=!0}},{key:"onChartNameChange",value:function(e){this.chartName=e.currentTarget.value;var t=!this.props.isChartNameValid||this.props.isChartNameValid(this.chartName);this.chartNameValidation=t?{error:[],warning:[]}:{error:[{code:c.a.INVALID,message:new Error("Chart name exists.")}],warning:[]}}},{key:"onAddChart",value:function(){this.props.onSubmit(this.newChartInfo)}},{key:"handleDataFormatToggle",value:function(){this.dataFormatCollapsed=!this.dataFormatCollapsed}},{key:"mainContent",value:function(){var t=this;return r.createElement("div",{className:s.a.body},r.createElement(u.ButtonGroup,null,_.map(function(n,o){return r.createElement(u.Radio,{checked:n.value===t.caseIdsMode,onChange:function(n){t.caseIdsMode=e(n.target).attr("data-value"),t.validateContent=!0},inline:!0,"data-value":n.value},n.label)})),r.createElement("span",null,r.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginTop:5}},r.createElement("span",{className:s.a.selection,onClick:function(){t.onClick(S.SELECTED)}},r.createElement("i",{className:"fa fa-arrow-down",style:{marginRight:5}}),r.createElement("span",{className:s.a.selectionText},"currently selected")),r.createElement("span",{className:s.a.selection,onClick:function(){t.onClick(S.UNSELECTED)}},r.createElement("i",{className:"fa fa-arrow-down",style:{marginRight:5}}),r.createElement("span",{className:s.a.selectionText},"currently unselected")),r.createElement("div",{className:"collapsible-header",onClick:this.handleDataFormatToggle},r.createElement("a",null,"Data Format"),r.createElement("span",{style:{paddingLeft:4,cursor:"pointer"}},this.dataFormatCollapsed?r.createElement("i",{className:"fa fa-chevron-down"}):r.createElement("i",{className:"fa fa-chevron-up"})))),r.createElement(d.Collapse,{isOpened:!this.dataFormatCollapsed},r.createElement("div",{style:{marginTop:"5px"}},this.dataFormatContent))),r.createElement("textarea",{className:"form-control",rows:5,value:this.content,onChange:function(e){t.content=e.currentTarget.value,o.delay(function(){t.onChange(t.content)},500)},"data-test":"CustomCaseSetInput"}),this.props.disableGrouping&&r.createElement("div",{className:"alert alert-warning",style:{marginTop:"15px",marginBottom:"5px"}},r.createElement("i",{className:"fa fa-warning",style:{marginRight:3}}),"Submitting will clear current filters."),r.createElement("div",{className:s.a.operations},!this.props.disableGrouping&&r.createElement("input",{placeholder:"Chart name (optional)",style:{width:"200px"},type:"text",onInput:this.onChartNameChange,className:"form-control input-sm"}),r.createElement("button",{disabled:this.addChartButtonDisabled,className:"btn btn-primary btn-sm","data-test":"CustomCaseSetSubmitButton","data-event":Object(f.e)({category:"studyPage",action:"customCaseSetSelection",label:this.props.queriedStudies.join(",")}),onClick:this.onAddChart},this.submitButtonText)),this.result.validationResult.error.concat(this.chartNameValidation.error).map(function(e){return r.createElement("div",{className:"alert alert-danger",role:"alert",style:{marginTop:"10px",marginBottom:"0"}},e.message.message)}),this.result.validationResult.warning.concat(this.chartNameValidation.warning).map(function(e){return r.createElement("div",{className:"alert alert-warning",role:"alert",style:{marginTop:"10px",marginBottom:"0"}},e.message.message)}))}},{key:"render",value:function(){return this.mainContent()}},{key:"sampleSet",get:function(){return o.keyBy(this.props.selectedSamples,function(e){return"".concat(e.studyId,":").concat(e.sampleId)})}},{key:"isSingleStudy",get:function(){return 1===this.props.queriedStudies.length}},{key:"result",get:function(){return Object(c.c)(this.validContent,this.validateContent,this.props.queriedStudies,this.caseIdsMode,this.props.allSamples,this.isSingleStudy)}},{key:"newChartInfo",get:function(){return{name:this.chartName?this.chartName:this.props.getDefaultChartName?this.props.getDefaultChartName():"",patientAttribute:this.caseIdsMode===h.b.PATIENT,groups:0===this.result.validationResult.error.length?this.result.groups:[]}}},{key:"addChartButtonDisabled",get:function(){return this.result.validationResult.error.length>0||0===this.newChartInfo.groups.length||this.chartNameValidation.error.length>0}},{key:"dataFormatContent",get:function(){return r.createElement("span",null,"Each row can have two columns separated by space or tab:",r.createElement("br",null),"1) study_id:",this.caseIdsMode===h.b.SAMPLE?"sample_id ":"patient_id ","and",r.createElement("br",null),"2) group_name of your choice",r.createElement("br",null),"group_name is optional if there is only one group.")}},{key:"submitButtonText",get:function(){return this.props.disableGrouping?"Filter to listed ".concat(this.caseIdsMode===h.b.SAMPLE?"samples":"patients"):this.props.submitButtonText}}])&&m(i.prototype,a),l&&m(i,l),n}();T.defaultProps={submitButtonText:"Submit",disableGrouping:!1},C([l.observable],T.prototype,"dataFormatCollapsed",void 0),C([l.observable],T.prototype,"chartName",void 0),C([l.observable],T.prototype,"showCaseIds",void 0),C([l.observable],T.prototype,"caseIdsMode",void 0),C([l.observable],T.prototype,"content",void 0),C([l.observable],T.prototype,"validContent",void 0),C([l.computed],T.prototype,"sampleSet",null),C([l.computed],T.prototype,"isSingleStudy",null),C([l.computed],T.prototype,"result",null),C([l.computed],T.prototype,"newChartInfo",null),C([p.default,l.action],T.prototype,"onClick",null),C([p.default,l.action],T.prototype,"onChange",null),C([p.default,l.action],T.prototype,"onChartNameChange",null),C([p.default,l.action],T.prototype,"onAddChart",null),C([p.default,l.action],T.prototype,"handleDataFormatToggle",null),C([l.computed],T.prototype,"addChartButtonDisabled",null),C([l.computed],T.prototype,"dataFormatContent",null),C([l.computed],T.prototype,"submitButtonText",null),T=C([i.observer],T),t.a=T}).call(this,n(17))},1257:function(e,t,n){e.exports={portalWidth:"studySummaryTabStyles-module__portalWidth__E_ZYO",framedImage:"studySummaryTabStyles-module__framedImage__2SfLL",studyViewFlexContainer:"studySummaryTabStyles-module__studyViewFlexContainer__2qzDx",studyViewNoSamples:"studySummaryTabStyles-module__studyViewNoSamples__25ZnH",studyViewNoSamplesInner:"studySummaryTabStyles-module__studyViewNoSamplesInner__2CP0d",quickFilters:"studySummaryTabStyles-module__quickFilters__3jA-o"}},1258:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__1-dsc",framedImage:"styles-module__framedImage__1-X5s",chart:"styles-module__chart__RXir-",highlight:"styles-module__highlight__1DVtC",chartHeightOne:"styles-module__chartHeightOne__1EZ41",chartHeightTwo:"styles-module__chartHeightTwo__38Rdk",chartWidthOne:"styles-module__chartWidthOne__6k_oz",chartWidthTwo:"styles-module__chartWidthTwo__DZIFm",chartLoader:"styles-module__chartLoader__1WwZ2",chartError:"styles-module__chartError__21C0i",chartInnerWrapper:"styles-module__chartInnerWrapper__1ttrJ"}},1259:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjQsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iMTguNzI5cHgiIGhlaWdodD0iOS41NTdweCIgdmlld0JveD0iMCAwIDE4LjcyOSA5LjU1NyIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTguNzI5IDkuNTU3IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnPg0KCTxwYXRoIGQ9Ik0xLjg4OSw5LjM0NEwwLjM5MywwLjIxM2gxLjUxM2wwLjc4Myw1LjAzYzAuMDg2LDAuNTUsMC4xOTIsMS40NDcsMC4zMTgsMi42OWMwLjI5OC0wLjY0NywwLjY3OS0xLjM5LDEuMTQ0LTIuMjI3DQoJCWwzLjA1Mi01LjQ5NGgxLjY0M0wzLjYxNyw5LjM0NEgxLjg4OXoiLz4NCgk8cGF0aCBkPSJNOC4wOTQsNi4yMjNMOS42NSw2LjEyOGMwLDAuNDQ3LDAuMDY4LDAuODI5LDAuMjA2LDEuMTQ0YzAuMTM4LDAuMzE1LDAuMzkyLDAuNTczLDAuNzYxLDAuNzc0DQoJCWMwLjM3LDAuMiwwLjgwMSwwLjMwMSwxLjI5NCwwLjMwMWMwLjY4OCwwLDEuMjA0LTAuMTM4LDEuNTQ4LTAuNDEzczAuNTE2LTAuNTk5LDAuNTE2LTAuOTcyYzAtMC4yNy0wLjEwMy0wLjUyNC0wLjMxLTAuNzY1DQoJCWMtMC4yMTItMC4yNDEtMC43MjktMC41MzctMS41NTItMC44OXMtMS4zNDktMC42MDEtMS41NzctMC43NDRjLTAuMzg1LTAuMjM1LTAuNjc0LTAuNTEyLTAuODY5LTAuODMNCgkJQzkuNDczLDMuNDE2LDkuMzc1LDMuMDUsOS4zNzUsMi42MzhjMC0wLjcyMiwwLjI4Ny0xLjM0MSwwLjg2LTEuODU3YzAuNTcyLTAuNTE2LDEuMzc1LTAuNzc0LDIuNDA3LTAuNzc0DQoJCWMxLjE0NiwwLDIuMDE5LDAuMjY1LDIuNjE3LDAuNzk1YzAuNiwwLjUzLDAuOTEsMS4yMjgsMC45MzQsMi4wOTNsLTEuNTIyLDAuMTAzYy0wLjAyMi0wLjU1LTAuMjE4LTAuOTg1LTAuNTg0LTEuMzA3DQoJCUMxMy43MiwxLjM3MSwxMy4yMDEsMS4yMSwxMi41MywxLjIxYy0wLjUzOSwwLTAuOTU3LDAuMTIzLTEuMjU1LDAuMzdzLTAuNDQ3LDAuNTEzLTAuNDQ3LDAuOHMwLjEyOSwwLjUzOSwwLjM4NywwLjc1Ng0KCQljMC4xNzIsMC4xNDksMC42MTYsMC4zNzgsMS4zMzMsMC42ODhDMTMuNzQsNC4zNCwxNC40OSw0Ljc0NywxNC44LDUuMDQ1YzAuNDkzLDAuNDc2LDAuNzQsMS4wNTUsMC43NCwxLjczNg0KCQljMCwwLjQ1My0wLjE0LDAuODk3LTAuNDE3LDEuMzMzYy0wLjI3OCwwLjQzNi0wLjcwMiwwLjc4NC0xLjI3MiwxLjA0NUMxMy4yNzksOS40MiwxMi42MDcsOS41NSwxMS44MzQsOS41NQ0KCQljLTEuMDU1LDAtMS45NTEtMC4yNjEtMi42OTEtMC43ODJDOC40MDMsOC4yNDYsOC4wNTQsNy4zOTcsOC4wOTQsNi4yMjN6Ii8+DQoJPHBhdGggZD0iTTE2LjU5OCw5LjM0NGwwLjM2OS0xLjc2M2gxLjc2M2wtMC4zNzgsMS43NjNIMTYuNTk4eiIvPg0KPC9nPg0KPC9zdmc+DQo="},1267:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__3RN1K",framedImage:"styles-module__framedImage__1q4ml",main:"styles-module__main__1M4Pn",content:"styles-module__content__-z-NW",delete:"styles-module__delete__3E7Yr"}},1270:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__21Wnc",framedImage:"styles-module__framedImage__2DLAM",main:"styles-module__main__6UjQ_",text:"styles-module__text__3EbPk",mostLeft:"styles-module__mostLeft__1HcgP",mostRight:"styles-module__mostRight__OHotS"}},1272:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__1nrF_",framedImage:"styles-module__framedImage__30VqV",body:"styles-module__body__1rzI0",invalid:"styles-module__invalid__2aTxj",valid:"styles-module__valid__ayiQx",selection:"styles-module__selection__iEp5C",selectionText:"styles-module__selectionText__oWsS9",operations:"styles-module__operations__3fdLE"}},1273:function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"a",function(){return l}),n.d(t,"c",function(){return m});var r=n(1),o=n(30),i=n(129),a=n.n(i);function s(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var l,u,c="Selected",p="Unselected";function d(e,t){return"".concat(e,":").concat(t)}function f(e){return[e.studyId||"",e.caseId,e.groupName||""].join("&")}function h(e,t,n,i,a){var l={},u={},d=n===o.b.PATIENT;return r.each(i,function(e){l["".concat(e.studyId,":").concat(e.sampleId)]=e;var t="".concat(e.studyId,":").concat(e.patientId);void 0===u[t]&&(u[t]=[]),u[t].push(e)}),r.values(r.reduce(e,function(e,n){var r,o=n.groupName||(a?p:c);null==e[o]&&(e[o]={name:o,sampleIdentifiers:[]});var i=void 0===n.studyId?"".concat(t,":").concat(n.caseId):"".concat(n.studyId,":").concat(n.caseId),f=d?u[i]:[l[i]],h=void 0===f?[]:f.map(function(e){return{studyId:e.studyId,sampleId:e.sampleId,patientId:e.patientId}});return(r=e[o].sampleIdentifiers).push.apply(r,s(h)),e},{})).map(function(e){return e.sampleIdentifiers=r.uniqBy(e.sampleIdentifiers,function(e){return"".concat(e.studyId,":").concat(e.sampleId)}),e})}function m(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,u=arguments.length>4?arguments[4]:void 0,c=arguments.length>5?arguments[5]:void 0,p={error:[],warning:[]},m=function(e){return r.reduce(e.trim().split(/\n|\r/g),function(e,t){return(t=t.trim())&&e.push(function(e){var t={line:e,caseId:""},n=e.split(":");if(1===n.length)t.caseId=n[0];else if(n.length>1){t.studyId=n[0];var r=n[1].split(/\s|\t/g);r.length>1&&(t.groupName=r[1]),t.caseId=r[0]}return t}(t)),e},[])}(e);if(m.length>0&&t){var y,b,g=function(e,t,n,i,s){var u=[],c=[],p=[],h=r.reduce(n,function(e,n){return e["".concat(n.studyId,":").concat(t===o.b.PATIENT?n.patientId:n.sampleId)]=!0,e},{}),m={},y={};r.reduce(r.uniqBy(e,function(e){return f(e)}),function(e,n){var o="",a=!0;return void 0===n.studyId||""===n.studyId?i?(o=d(s[0],n.caseId),h[o]?(void 0===m[o]&&(m[o]=0),m[o]++):(p.push(n.caseId),a=!1)):(c.push({code:l.INVALID_CASE_ID,message:new Error("No study specified for ".concat(t," id: ").concat(n.caseId,", and more than one study selected for query. The case will be ignored."))}),a=!1):r.includes(s,n.studyId)?(o=d(n.studyId,n.caseId),void 0!==h[o]?(void 0===m[o]&&(m[o]=0),m[o]++):(p.push(n.caseId),a=!1)):(u.push({code:l.STUDY_NOT_SELECTED,message:new Error("Incorrect study id: ".concat(n.studyId))}),a=!1),a&&(e[f(n)]=n),e},y);var b=r.reduce(m,function(e,t,n){return t>1&&e.push(n),e},[]);if(b.length>0){var g=r.reduce(e,function(e,t){var n=t.groupName?t.groupName:"_TEST_";return void 0===e[n]&&(e[n]=[]),e[n].push(d(t.studyId?t.studyId:"",t.caseId)),e},{}),v=r.reduce(g,function(e,t){return e+=t.length-r.uniq(t).length},0);r.keys(g).length>1&&v!==b.length&&c.push({code:l.POTENTIAL_OVERLAP,message:new Error("".concat(b.join(", ")," ").concat(a()("exist",b.length-v)," in different groups."))})}return p.length>0&&c.push({code:l.INVALID_CASE_ID,message:new Error("The following ".concat(a()("case",p.length)," ").concat(a()("is",p.length)," invalid and will be ignored. ").concat(p.join(", ")))}),{error:u,warning:c,updatedLines:r.values(y)}}(m,i,u,c,n);(y=p.warning).push.apply(y,s(g.warning)),(b=p.error).push.apply(b,s(g.error)),void 0!==g.updatedLines&&(m=g.updatedLines)}var v=void 0!==r.find(m,function(e){return void 0!==e.groupName&&""!==e.groupName});return p.error.length>0?{groups:[],validationResult:p}:{groups:h(m,n[0],i,u,v),validationResult:p}}!function(e){e.OVERLAP="OVERLAP",e.POTENTIAL_OVERLAP="POTENTIAL_OVERLAP",e.INVALID="INVALID",e.INVALID_CASE_ID="INVALID_CASE_ID",e.STUDY_NOT_SELECTED="STUDY_NOT_SELECTED",e.INPUT_ERROR="INPUT_ERROR",e.NO_CHART_NAME="NO_CHART_NAME",e.NO_GROUP_NAME="NO_GROUP_NAME"}(l||(l={})),function(e){e.GROUP_NAME="GROUP_NAME",e.CHART_NAME="CHART_NAME",e.CASE_ID="CASE_ID"}(u||(u={}))},1274:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__3vtVw",framedImage:"styles-module__framedImage__3P2Qv",oqlerror:"styles-module__oqlerror__1o_bc",operations:"styles-module__operations__2I3K7"}},1275:function(e,t,n){},780:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(1),a=n.n(i),s=n(9),l=n(792),u=n(2),c=n(8),p=n(31),d=n(13),f=n(81),h=n(21),m=n(281),y=n(30),b=n(6),g=n(373),v=n(46),S=n(122),C=n(192),_=n(24),T=n.n(_),E=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};function w(e){return E(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,r,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],t.prev=1,t.next=4,T.a.get(e);case 4:r=t.sent,o=JSON.parse(r.text),n=JSON.parse(o.fileContent),t.next=12;break;case 9:return t.prev=9,t.t0=t.catch(1),t.abrupt("return",[]);case 12:if(void 0!==n){t.next=16;break}return t.abrupt("return",[]);case 16:return t.abrupt("return",n);case 17:case"end":return t.stop()}},t,null,[[1,9]])}))}var O,I=n(39),k=n(18),P=n(193),A=n(97),R=n(143),N=n(47),D=n(302),j=n(807),x=n(74),M=n(104),G=n(3),F=n(810),L=n(145),B=n(11),V=n(93),U=n(796),q=n.n(U);function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e,t,n){return t&&Q(e.prototype,t),n&&Q(e,n),e}function z(e,t){return!t||"object"!==K(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function J(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e,t){if(void 0===e.time||t)return e.treatment;var n=e;return"".concat(n.time,"-").concat(n.treatment)}function $(e,t){if(void 0===e.time||t)return e.treatment;var n=e;return n.treatment+"::"+n.time}!function(e){e.SAMPLE="SAMPLE_TREATMENTS",e.PATIENT="PATIENT_TREATMENTS"}(O||(O={}));var ee=function(e){function t(){return H(this,t),z(this,Y(t).apply(this,arguments))}return J(t,o.a.Component),W(t,[{key:"render",value:function(){return o.a.createElement("div",{style:{marginLeft:this.props.margin},className:q.a.displayFlex},this.props.headerName)}}]),t}(),te=function(e){function t(){return H(this,t),z(this,Y(t).apply(this,arguments))}return J(t,o.a.Component),W(t,[{key:"render",value:function(){return o.a.createElement("div",null,this.props.row.treatment)}}]),t}();function ne(e,t){return e.treatment.toUpperCase().includes(t.toUpperCase())}var re=n(173),oe=n(59);function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ae(e){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var se=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ae(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},le=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._promise=t,Object(u.runInAction)(function(){n._status="pending",t.then(Object(u.action)(function(e){n._status="complete",n._result=e}),Object(u.action)(function(e){n._status="error",n._error=e}))})}var t,n,r;return t=e,(n=[{key:"status",get:function(){return this._status}},{key:"result",get:function(){return this._result}},{key:"error",get:function(){return this._error}},{key:"promise",get:function(){return this._promise}}])&&ie(t.prototype,n),r&&ie(t,r),e}();se([u.observable],le.prototype,"_status",void 0),se([u.observable],le.prototype,"_result",void 0),se([u.observable],le.prototype,"_error",void 0),se([u.computed],le.prototype,"status",null),se([u.computed],le.prototype,"result",null),se([u.computed],le.prototype,"error",null),se([u.computed],le.prototype,"promise",null);var ue=n(161),ce=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};function pe(e){return e.uniqueKey!==y.g.CANCER_STUDIES}function de(e,t,n,r){return ce(this,void 0,void 0,regeneratorRuntime.mark(function o(){var i,s,l;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return i=a.a.map(n,function(e,n){var r=a.a.uniqBy(e,function(e){return"".concat(e.sampleId,"_").concat(e.studyId)}).map(function(e){return{studyId:e.studyId,sampleId:e.sampleId}});return Object(L.a)(n,r,t)}),r(D.a.CREATING_SESSION),o.next=4,R.a.addComparisonSession({groups:i,origin:t,clinicalAttributeName:e.displayName});case 4:return s=o.sent,l=s.id,o.abrupt("return",l);case 7:case"end":return o.stop()}},o)}))}function fe(e,t){var n=a.a.keyBy(t,function(e){return e.studyId});return e.reduce(function(e,t){return t.studyId in n&&e.push({sampleId:t.sampleId,molecularProfileId:n[t.studyId].molecularProfileId}),e},[])}function he(e,t,n){return ce(this,void 0,void 0,regeneratorRuntime.mark(function r(){var o,i,a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return o=fe(e,t),r.next=3,d.a.fetchGenesUsingPOST({geneIdType:"HUGO_GENE_SYMBOL",geneIds:n});case 3:return i=r.sent,a={entrezGeneIds:i.map(function(e){return e.entrezGeneId}),sampleMolecularIdentifiers:o},r.abrupt("return",d.a.fetchMutationsInMultipleMolecularProfilesUsingPOST({projection:"DETAILED",mutationMultipleStudyFilter:a}));case 6:case"end":return r.stop()}},r)}))}function me(e,t,n){return ce(this,void 0,void 0,regeneratorRuntime.mark(function r(){var o,i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return o=fe(e,t),r.next=3,d.a.fetchGenesUsingPOST({geneIdType:"HUGO_GENE_SYMBOL",geneIds:n});case 3:return i=r.sent,r.abrupt("return",d.a.fetchMolecularDataInMultipleMolecularProfilesUsingPOST({projection:"DETAILED",molecularDataMultipleStudyFilter:{entrezGeneIds:i.map(function(e){return e.entrezGeneId}),sampleMolecularIdentifiers:o}}));case 5:case"end":return r.stop()}},r)}))}function ye(e,t){switch(t){case I.a.MUTATED_GENES_TABLE:case I.a.CNA_GENES_TABLE:return{hugoGeneSymbols:function(e,t){switch(e){case I.a.CNA_GENES_TABLE:return a.a.uniq(t.map(F.g));default:return t}}(t,e.slice())};case I.a.SAMPLE_TREATMENTS_TABLE:case I.a.PATIENT_TREATMENTS_TABLE:return{treatmentUniqueKeys:e.slice()};default:return{}}}var be=n(111);function ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Se(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _e(e){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Te,Ee=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":_e(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},we=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};!function(e){e.SUMMARY="Summary",e.CLINICAL_DATA="Clinical Data",e.HEATMAPS="Heatmaps",e.CN_SEGMENTS="CN Segments"}(Te||(Te={}));var Oe="Selected",Ie="Unselected",ke="STATIC",Pe=function(){function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.appStore=t,this.sessionServiceIsEnabled=n,this.urlWrapper=r,this.reactionDisposers=[],this.showComparisonGroupUI=!1,this.hideRestoreSettingsMsg=this.isLoggedIn,this._loadUserSettingsInitially=this.isLoggedIn,this.openResourceTabMap=u.observable.map(),this._comparisonConfirmationModal=null,this._selectedComparisonGroups=u.observable.shallowMap(),this._comparisonGroupsMarkedForDeletion=u.observable.shallowMap(),this._pendingChanges=[],this.pendingDecision=Object(G.T)({invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._pendingChanges=this._pendingChanges.filter(function(e){return"pending"!==e.status}),e.next=3,Promise.all(this._pendingChanges.map(function(e){return e.promise}));case 3:return e.abrupt("return",!1);case 4:case"end":return e.stop()}},e,this)}))},default:!0}),this.userSavedGroups=Object(G.T)({await:function(){return[o.sampleSet,o.pendingDecision]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._comparisonGroupsChangeCount,!(this.studyIds.length>0&&this.isLoggedIn)||this.pendingDecision.result){e.next=6;break}return e.next=4,R.a.getGroupsForStudies(this.studyIds.slice());case 4:return t=e.sent,e.abrupt("return",t.map(function(e){return Object.assign(e.data,{uid:e.id,isSharedGroup:!1},Object(N.o)(e.data,n.sampleSet.result))}));case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}},e,this)}))},default:[]}),this.sharedGroups=Object(G.T)({await:function(){return[o.sampleSet,o.queriedPhysicalStudyIds]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],Object.keys(this.sharedGroupSet).forEach(function(e){t.push(R.a.getGroup(e))}),n=Object(G.Z)(this.queriedPhysicalStudyIds.result),e.next=5,Promise.all(t);case 5:return r=e.sent,e.abrupt("return",r.filter(function(e){return!i.some(e.data.studies,function(e){return void 0===n[e.id]})}).map(function(e){return Object.assign(e.data,{uid:e.id,isSharedGroup:!0},Object(N.o)(e.data,o.sampleSet.result))}));case 7:case"end":return e.stop()}},e,this)}))},default:[]}),this.comparisonGroups=Object(G.T)({await:function(){return[o.userSavedGroups,o.sharedGroups]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,o,a,s,l,u,c,p,d,f=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.cloneDeep(this.userSavedGroups.result),n=Object(G.Z)(t.map(function(e){return e.uid})),this.sharedGroups.result.length>0&&this.sharedGroups.result.forEach(function(e){void 0===n[e.uid]&&(t.push(e),n[e.uid]=!0)}),!((r=this._selectedComparisonGroups.keys().filter(function(e){return void 0===n[e]})).length>0)){e.next=30;break}for(o=[],a=!0,s=!1,l=void 0,e.prev=9,u=r[Symbol.iterator]();!(a=(c=u.next()).done);a=!0)p=c.value,o.push(R.a.getGroup(p));e.next=17;break;case 13:e.prev=13,e.t0=e.catch(9),s=!0,l=e.t0;case 17:e.prev=17,e.prev=18,a||null==u.return||u.return();case 20:if(e.prev=20,!s){e.next=23;break}throw l;case 23:return e.finish(20);case 24:return e.finish(17);case 25:return d=Object(G.Z)(this.queriedPhysicalStudyIds.result),e.next=28,Promise.all(o);case 28:e.sent.filter(function(e){return!i.some(e.data.studies,function(e){return void 0===d[e.id]})}).forEach(function(e){return t.push(Object.assign(e.data,{uid:e.id},Object(N.o)(e.data,f.sampleSet.result)))});case 30:return e.abrupt("return",t);case 31:case"end":return e.stop()}},e,this,[[9,13,17,25],[18,,20,24]])}))},default:[],onResult:function(e){o.saveGroupsToUserProfile(e)}}),this._comparisonGroupsChangeCount=0,this.initialFiltersQuery={},this.studyIds=[],this._clinicalDataFilterSet=u.observable.shallowMap(),this._genomicProfilesFilter=[],this._caseListsFilter=[],this._customBinsFromScatterPlotSelectionSet=u.observable.shallowMap(),this._genomicDataIntervalFilterSet=u.observable.shallowMap(),this._clinicalDataBinFilterSet=u.observable.map(),this._genomicDataBinFilterSet=u.observable.map(),this._geneFilterSet=u.observable.map(),this._chartVisibility=u.observable.map(),this.geneQueries=[],this.chartsDimension=u.observable.map(),this.chartsType=u.observable.map(),this.newlyAddedCharts=u.observable.array(),this.sharedGroupSet={},this.unfilteredClinicalDataCountCache={},this.unfilteredClinicalDataBinCountCache={},this.pageStatusMessages={},this.useCurrentGridLayout=!1,this.currentGridLayout=[],this.previousSettings={},this.currentFocusedChartByUser=void 0,this.currentFocusedChartByUserDimension=void 0,this.clinicalDataBinPromises={},this.clinicalDataCountPromises={},this.customChartsPromises={},this.genomicChartPromises={},this._chartSampleIdentifiersFilterSet=u.observable.map(),this.customChartFilterSet=u.observable.map(),this.numberOfSelectedSamplesInCustomSelection=0,this._filterComparisonGroups=[],this._filterMutatedGenesTableByCancerGenes=!0,this._filterFusionGenesTableByCancerGenes=!0,this._filterCNAGenesTableByCancerGenes=!0,this._customChartMap=u.observable.shallowMap(),this._customCharts=u.observable.shallowMap(),this._geneSpecificChartMap=u.observable.shallowMap(),this._geneSpecificCharts=u.observable.shallowMap(),this._customChartsSelectedCases=u.observable.shallowMap(),this.sampleToAnalysisGroup=Object(G.T)({await:function(){return[o.samples,o.selectedSamples]},invoke:function(){var e=i.keyBy(o.selectedSamples.result,function(e){return e.uniqueSampleKey});return Promise.resolve(i.reduce(o.samples.result,function(t,n){var r=n.uniqueSampleKey;return t[r]=r in e?Oe:Ie,t},{}))}}),this.patientToAnalysisGroup=Object(G.T)({await:function(){return[o.samples,o.selectedPatientKeys]},invoke:function(){var e=i.keyBy(o.selectedPatientKeys.result);return Promise.resolve(i.reduce(o.samples.result,function(t,n){var r=n.uniquePatientKey;return r in e&&(t[r]=Oe),t},{}))}}),this.hasRawDataForDownload=Object(G.T)({invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==this.studyIds.length){e.next=7;break}return e.next=3,T()(Object(k.A)());case 3:return t=e.sent,e.abrupt("return",t.body.includes(this.studyIds[0]));case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}},e,this)}))},onError:function(){return!1},default:!1}),this.unfilteredClinicalDataCount=Object(G.T)({await:function(){return[o.studyViewFilterWithFilteredSampleIdentifiers]},invoke:function(){return p.a.fetchClinicalDataCountsUsingPOST({clinicalDataCountFilter:{attributes:o.unfilteredAttrsForNonNumerical,studyViewFilter:o.studyViewFilterWithFilteredSampleIdentifiers.result}})},onError:function(e){},onResult:function(e){e.forEach(function(e){var t=e.attributeId;o.isNewlyAdded(t)&&(o.showAsPieChart(t,e.counts.length),o.newlyAddedCharts.remove(t))})},default:[]}),this.newlyAddedUnfilteredClinicalDataCount=Object(G.T)({await:function(){return[o.studyViewFilterWithFilteredSampleIdentifiers]},invoke:function(){return p.a.fetchClinicalDataCountsUsingPOST({clinicalDataCountFilter:{attributes:o.newlyAddedUnfilteredAttrsForNonNumerical,studyViewFilter:o.studyViewFilterWithFilteredSampleIdentifiers.result}})},default:[],onError:function(e){},onResult:function(e){e.forEach(function(e){var t=e.attributeId;o.unfilteredClinicalDataCountCache[t]=e,o.showAsPieChart(t,e.counts.length),o.newlyAddedCharts.remove(t)})}}),this.newlyAddedUnfilteredClinicalDataBinCount=Object(G.T)({invoke:function(){return p.a.fetchClinicalDataBinCountsUsingPOST({dataBinMethod:"STATIC",clinicalDataBinCountFilter:{attributes:o.newlyAddedUnfilteredAttrsForNumerical,studyViewFilter:o.filters}})},default:[],onError:function(e){},onResult:function(e){i.each(i.groupBy(e,function(e){return e.attributeId}),function(e,t){o.unfilteredClinicalDataBinCountCache[t]=e,o.newlyAddedCharts.remove(t)})}}),this.unfilteredClinicalDataBinCount=Object(G.T)({invoke:function(){return p.a.fetchClinicalDataBinCountsUsingPOST({dataBinMethod:"STATIC",clinicalDataBinCountFilter:{attributes:o.unfilteredAttrsForNumerical,studyViewFilter:o.filters}})},onError:function(e){},default:[]}),this.molecularProfiles=Object(G.T)({await:function(){return[o.queriedPhysicalStudyIds]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.queriedPhysicalStudyIds.result.length>0)){e.next=4;break}return e.next=3,d.a.fetchMolecularProfilesUsingPOST({molecularProfileFilter:{studyIds:this.queriedPhysicalStudyIds.result}});case 3:return e.abrupt("return",e.sent);case 4:return e.abrupt("return",[]);case 5:case"end":return e.stop()}},e,this)}))},onError:function(e){},default:[]}),this.allStudies=Object(G.T)({invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.getAllStudiesUsingGET({projection:"SUMMARY"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))}},[]),this.everyStudyIdToStudy=Object(G.T)({await:function(){return[o.allStudies]},invoke:function(){return Promise.resolve(i.keyBy(o.allStudies.result,function(e){return e.studyId}))}}),this.filteredPhysicalStudies=Object(G.T)({await:function(){return[o.everyStudyIdToStudy]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.everyStudyIdToStudy.result,e.abrupt("return",i.reduce(this.studyIds,function(e,n){return t[n]&&e.push(t[n]),e},[]));case 2:case"end":return e.stop()}},e,this)}))},default:[]}),this.filteredVirtualStudies=Object(G.T)({await:function(){return[o.filteredPhysicalStudies]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.filteredPhysicalStudies.result.length!==this.studyIds.length){e.next=2;break}return e.abrupt("return",[]);case 2:return t=[],n=this.filteredPhysicalStudies.result.map(function(e){return e.studyId}),r=i.filter(this.studyIds,function(e){return!i.includes(n,e)}),e.next=7,Promise.all(r.map(function(e){return S.a.getVirtualStudy(e).then(function(e){t.push(e)}).catch(function(e){})}));case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}},e,this)}))},default:[]}),this.queriedPhysicalStudies=Object(G.T)({await:function(){return[o.filteredPhysicalStudies,o.filteredVirtualStudies]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.everyStudyIdToStudy.result,n=i.reduce(this.filteredPhysicalStudies.result,function(e,n){return e[n.studyId]=t[n.studyId],e},{}),this.filteredVirtualStudies.result.forEach(function(e){e.data.studies.forEach(function(e){!n[e.id]&&t[e.id]&&(n[e.id]=t[e.id])})}),e.abrupt("return",i.values(n));case 4:case"end":return e.stop()}},e,this)}))},default:[]}),this.queriedPhysicalStudyIds=Object(G.T)({await:function(){return[o.queriedPhysicalStudies]},invoke:function(){return Promise.resolve(i.map(o.queriedPhysicalStudies.result,function(e){return e.studyId}))},default:[]}),this.queriedSampleIdentifiers=Object(G.T)({await:function(){return[o.filteredPhysicalStudies,o.filteredVirtualStudies]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.reduce(this.filteredVirtualStudies.result,function(e,t){return t.data.studies.forEach(function(t){var n=t.samples;e[t.id]&&(n=i.union(e[t.id],n)),e[t.id]=n}),e},{}),i.isEmpty(t)){e.next=6;break}return t=i.reduce(this.filteredPhysicalStudies.result,function(e,t){return e[t.studyId]=[],e},t),n=i.reduce(t,function(e,t,n){return 0===t.length&&e.push(n),e},[]),e.next=6,Promise.all(i.map(n,function(e){return d.a.getAllSamplesInStudyUsingGET({studyId:e}).then(function(n){t[e]=n.map(function(e){return e.sampleId})})}));case 6:return e.abrupt("return",i.flatten(i.map(t,function(e,t){return e.map(function(e){return{sampleId:e,studyId:t}})})));case 7:case"end":return e.stop()}},e,this)}))},default:[]}),this.displayedStudies=Object(G.T)({await:function(){return[o.filteredVirtualStudies,o.filteredPhysicalStudies,o.queriedPhysicalStudies]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.filteredPhysicalStudies.result.length||1!==this.filteredVirtualStudies.result.length){e.next=5;break}return t=this.filteredVirtualStudies.result[0],e.abrupt("return",[{name:t.data.name,description:t.data.description,studyId:t.id}]);case 5:return e.abrupt("return",this.queriedPhysicalStudies.result);case 6:case"end":return e.stop()}},e,this)}))},default:[]}),this.originStudies=Object(G.T)({await:function(){return[o.filteredPhysicalStudies,o.filteredVirtualStudies,o.everyStudyIdToStudy]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],!this.showOriginStudiesInSummaryDescription){e.next=8;break}return n=this.filteredVirtualStudies.result[0].data.origin,r=[],o=this.everyStudyIdToStudy.result,i.each(n,function(e){o[e]?t.push(o[e]):r.push(e)}),e.next=8,Promise.all(r.map(function(e){return S.a.getVirtualStudy(e).then(function(e){t.push({name:e.data.name,description:e.data.description,studyId:e.id})}).catch(function(e){})}));case 8:return e.abrupt("return",t);case 9:case"end":return e.stop()}},e,this)}))},default:[]}),this.unknownQueriedIds=Object(G.T)({await:function(){return[o.filteredPhysicalStudies,o.filteredVirtualStudies]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],i.each(this.filteredPhysicalStudies.result,function(e){return t.push(e.studyId)}),i.each(this.filteredVirtualStudies.result,function(e){return t.push(e.id)}),e.abrupt("return",i.filter(this.studyIds,function(e){return!i.includes(t,e)}));case 4:case"end":return e.stop()}},e,this)}))},onError:function(e){},onResult:function(e){e.length>0&&(o.pageStatusMessages.unknownIds={status:"danger",message:"Unknown/Unauthorized ".concat(e.length>1?"studies":"study"," ").concat(e.join(", "))})},default:[]}),this.mutationProfiles=Object(G.T)({await:function(){return[o.molecularProfiles]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve(this.getMolecularProfilesByAlterationType(B.a.MUTATION_EXTENDED)));case 1:case"end":return e.stop()}},e,this)}))},onError:function(e){},default:[]}),this.structuralVariantProfiles=Object(G.T)({await:function(){return[o.molecularProfiles]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve(this.getMolecularProfilesByAlterationType(B.a.STRUCTURAL_VARIANT,B.a.FUSION)));case 1:case"end":return e.stop()}},e,this)}))},onError:function(e){},default:[]}),this.cnaProfiles=Object(G.T)({await:function(){return[o.molecularProfiles]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve(this.getMolecularProfilesByAlterationType(B.a.COPY_NUMBER_ALTERATION,B.b.DISCRETE)));case 1:case"end":return e.stop()}},e,this)}))},onError:function(e){},default:[]}),this.filteredGenePanelData=Object(G.T)({await:function(){return[o.molecularProfiles,o.samples]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.groupBy(this.molecularProfiles.result,function(e){return e.studyId}),n=i.flatMap(this.samples.result,function(e){return t[e.studyId].map(function(t){return{molecularProfileId:t.molecularProfileId,sampleId:e.sampleId}})}),e.next=4,d.a.fetchGenePanelDataInMultipleMolecularProfilesUsingPOST({sampleMolecularIdentifiers:n});case 4:return r=e.sent,e.abrupt("return",r.filter(function(e){return e.profiled}));case 6:case"end":return e.stop()}},e,this)}))},default:[]}),this.resourceDefinitions=Object(G.T)({await:function(){return[o.queriedPhysicalStudies]},invoke:function(){var e=[],t=[],n=!0,r=!1,i=void 0;try{for(var a,s=o.queriedPhysicalStudies.result[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value;e.push(d.a.getAllResourceDefinitionsInStudyUsingGET({studyId:l.studyId}).then(function(e){t.push.apply(t,Se(e))}))}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return Promise.all(e).then(function(){return t})},onResult:function(e){if(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value;s.openByDefault&&o.setResourceTabOpen(s.resourceId,!0)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}}}),this.studyResourceData=Object(G.T)({await:function(){return[o.resourceDefinitions]},invoke:function(){var e=[],t=o.resourceDefinitions.result.filter(function(e){return"STUDY"===e.resourceType}),n=[],r=!0,i=!1,a=void 0;try{for(var s,l=t[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;n.push(d.a.getAllStudyResourceDataInStudyUsingGET({studyId:u.studyId,resourceId:u.resourceId,projection:"DETAILED"}).then(function(t){return e.push.apply(e,Se(t))}))}}catch(e){i=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw a}}return Promise.all(n).then(function(){return e})}}),this.resourceIdToResourceData=Object(G.T)({await:function(){return[o.studyResourceData]},invoke:function(){return Promise.resolve(i.groupBy(o.studyResourceData.result,function(e){return e.resourceId}))}}),this.clinicalAttributes=Object(G.T)({await:function(){return[o.queriedPhysicalStudyIds]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.queriedPhysicalStudyIds.result.length>0)){e.next=7;break}return e.t0=i,e.next=4,d.a.fetchClinicalAttributesUsingPOST({studyIds:this.queriedPhysicalStudyIds.result});case 4:return e.t1=e.sent,e.t2=function(e){return"".concat(e.patientAttribute,"-").concat(e.clinicalAttributeId)},e.abrupt("return",e.t0.uniqBy.call(e.t0,e.t1,e.t2));case 7:return e.abrupt("return",[]);case 8:case"end":return e.stop()}},e,this)}))},default:[],onError:function(e){},onResult:function(e){e.forEach(function(e){if(e.datatype===y.c.NUMBER){var t=Object(y.fb)(e),n=o.getDefaultClinicalDataBinFilter(e);I.d.initialBins[t]&&(n.customBins=I.d.initialBins[t]),o._clinicalDataBinFilterSet.set(t,n)}})}}),this.clinicalAttributeIdToClinicalAttribute=Object(G.T)({await:function(){return[o.clinicalAttributes]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.keyBy(this.clinicalAttributes.result,"clinicalAttributeId"));case 1:case"end":return e.stop()}},e,this)}))}}),this.clinicalAttributeIdToDataType=Object(G.T)({await:function(){return[o.clinicalAttributes]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.reduce(this.clinicalAttributes.result,function(e,t){return void 0===e[t.clinicalAttributeId]?e[t.clinicalAttributeId]=t.datatype:e[t.clinicalAttributeId]!==t.datatype&&(e[t.clinicalAttributeId]=y.c.STRING),e},{}));case 1:case"end":return e.stop()}},e,this)}))}}),this.MDACCHeatmapStudyMeta=Object(G.T)({await:function(){return[o.queriedPhysicalStudyIds]},onError:function(e){},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.b.serverConfig.show_mdacc_heatmap){e.next=6;break}if(!(1===this.queriedPhysicalStudyIds.result.length)){e.next=6;break}return e.next=5,w(Object(k.s)(this.queriedPhysicalStudyIds.result[0]));case 5:return e.abrupt("return",e.sent);case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}},e,this)}))}},[]),this.oncokbCancerGenes=Object(G.T)({await:function(){return[]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.utilsCancerGeneListGetUsingGET_1({}));case 1:case"end":return e.stop()}},e)}))},onError:function(e){},default:[]}),this.oncokbGenes=Object(G.T)({await:function(){return[o.oncokbCancerGenes]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.oncokbCancerGenes.result.filter(function(e){return e.oncokbAnnotated}));case 1:case"end":return e.stop()}},e,this)}))},onError:function(e){},default:[]}),this.oncokbCancerGeneEntrezGeneIds=Object(G.T)({await:function(){return[o.oncokbCancerGenes]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.oncokbCancerGenes.result.map(function(e){return e.entrezGeneId}));case 1:case"end":return e.stop()}},e,this)}))},default:[]}),this.oncokbAnnotatedGeneEntrezGeneIds=Object(G.T)({await:function(){return[o.oncokbCancerGenes]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.oncokbCancerGenes.result.filter(function(e){return e.oncokbAnnotated}).map(function(e){return e.entrezGeneId}));case 1:case"end":return e.stop()}},e,this)}))},default:[]}),this.oncokbOncogeneEntrezGeneIds=Object(G.T)({await:function(){return[o.oncokbGenes]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.oncokbGenes.result.filter(function(e){return e.oncogene}).map(function(e){return e.entrezGeneId}));case 1:case"end":return e.stop()}},e,this)}))},default:[]}),this.oncokbTumorSuppressorGeneEntrezGeneIds=Object(G.T)({await:function(){return[o.oncokbGenes]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.oncokbGenes.result.filter(function(e){return e.tsg}).map(function(e){return e.entrezGeneId}));case 1:case"end":return e.stop()}},e,this)}))},default:[]}),this.updateUserSettingsDebounce=i.debounce(function(){i.isEqual(o.previousSettings,o.currentChartSettingsMap)||(o.previousSettings=o.currentChartSettingsMap,i.isEmpty(o.currentChartSettingsMap)||S.a.updateUserSettings({origin:Object(u.toJS)(o.studyIds),chartSettings:i.values(o.currentChartSettingsMap)}))},3e3),this.fetchUserSettings=Object(G.T)({invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.isSavingUserPreferencePossible&&this.studyIds.length>0)){e.next=6;break}return e.next=3,S.a.fetchUserSettings(Object(u.toJS)(this.studyIds));case 3:if(!(t=e.sent)){e.next=6;break}return e.abrupt("return",Object(y.vb)(t.chartSettings));case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}},e,this)}))},default:[],onError:function(){}}),this._defualtChartsDimension=u.observable.map(),this._defaultChartsType=u.observable.map(),this._defaultVisibleChartIds=[],this._defaultClinicalDataBinFilterSet=u.observable.map(),this.defaultVisibleAttributes=Object(G.T)({await:function(){return[o.clinicalAttributes]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.clinicalAttributes.result.map(function(e){return e.priority=Object(y.Z)(e).toString(),e}),n=t.sort(y.k).slice(0,20),r=[],void 0!==this.initialFilters.clinicalDataFilters&&(r=r.concat(this.initialFilters.clinicalDataFilters.map(function(e){return e.attributeId}))),r.length>0&&(o=i.filter(this.clinicalAttributes.result,function(e){return r.includes(e.clinicalAttributeId)}),void 0!==n&&(n=n.concat(o))),e.abrupt("return",i.uniq(n));case 6:case"end":return e.stop()}},e,this)}))},onError:function(e){},default:[]}),this.initialVisibleAttributesClinicalDataCountData=Object(G.T)({await:function(){return[o.defaultVisibleAttributes]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.uniqBy(i.filter(this.defaultVisibleAttributes.result,function(e){return e.datatype===y.c.STRING}).map(function(e){return{attributeId:e.clinicalAttributeId}}),function(e){return e.attributeId}),e.abrupt("return",p.a.fetchClinicalDataCountsUsingPOST({clinicalDataCountFilter:{attributes:t,studyViewFilter:this.initialFilters}}));case 2:case"end":return e.stop()}},e,this)}))},onError:function(e){},default:[]}),this.initialVisibleAttributesClinicalDataBinAttributes=Object(G.T)({await:function(){return[o.defaultVisibleAttributes]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.chain(this.defaultVisibleAttributes.result).filter(function(e){return e.datatype===y.c.NUMBER}).map(this.getDefaultClinicalDataBinFilter).uniqBy(function(e){return e.attributeId}).value());case 1:case"end":return e.stop()}},e,this)}))},onError:function(e){},default:[]}),this.initialVisibleAttributesClinicalDataBinCountData=Object(G.T)({await:function(){return[o.initialVisibleAttributesClinicalDataBinAttributes]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.a.fetchClinicalDataBinCountsUsingPOST({dataBinMethod:"STATIC",clinicalDataBinCountFilter:{attributes:this.initialVisibleAttributesClinicalDataBinAttributes.result,studyViewFilter:this.initialFilters}}));case 1:case"end":return e.stop()}},e,this)}))},onError:function(e){},default:[]}),this.samples=Object(G.T)({await:function(){return[o.clinicalAttributes,o.queriedSampleIdentifiers,o.queriedPhysicalStudyIds]},invoke:function(){var e={};return o.queriedSampleIdentifiers.result.length>0?e.sampleIdentifiers=o.queriedSampleIdentifiers.result:e.studyIds=o.queriedPhysicalStudyIds.result,i.isEmpty(e.sampleIdentifiers)&&i.isEmpty(e.studyIds)?Promise.resolve([]):p.a.fetchFilteredSamplesUsingPOST({studyViewFilter:e})},onError:function(e){},default:[]}),this.sampleSet=Object(G.T)({await:function(){return[o.samples]},invoke:function(){var e=new x.a,t=!0,n=!1,r=void 0;try{for(var i,a=o.samples.result[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value;e.set({studyId:s.studyId,sampleId:s.sampleId},s)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return Promise.resolve(e)}}),this.selectedSampleSet=Object(G.T)({await:function(){return[o.selectedSamples]},invoke:function(){return Promise.resolve(x.a.from(o.selectedSamples.result,function(e){return{studyId:e.studyId,sampleId:e.sampleId}}))}}),this.sampleSetByKey=Object(G.T)({await:function(){return[o.samples]},invoke:function(){return Promise.resolve(i.keyBy(o.samples.result,function(e){return e.uniqueSampleKey}))}}),this.invalidSampleIds=Object(G.T)({await:function(){return[o.queriedSampleIdentifiers,o.samples]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.queriedSampleIdentifiers.result.length>0&&this.samples.result.length!==this.queriedSampleIdentifiers.result.length)){e.next=3;break}return t=i.reduce(this.samples.result,function(e,t){return e[t.studyId+"_"+t.sampleId]=!0,e},{}),e.abrupt("return",i.filter(this.queriedSampleIdentifiers.result,function(e){return!t[e.studyId+"_"+e.sampleId]}));case 3:return e.abrupt("return",[]);case 4:case"end":return e.stop()}},e,this)}))},onError:function(e){},default:[]}),this.studyWithSamples=Object(G.T)({await:function(){return[o.selectedSamples,o.filteredPhysicalStudies,o.filteredVirtualStudies]},invoke:function(){return Promise.resolve(Object(y.L)(o.selectedSamples.result,o.filteredPhysicalStudies.result,o.filteredVirtualStudies.result))},onError:function(e){},default:[]}),this.sampleIdentifiersFromGenomicProfileFilter=Object(G.T)({await:function(){return[o.samples,o.initialMolecularProfileSampleCounts]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.keyBy(this.initialMolecularProfileSampleCounts.result,function(e){return e.value}),n=i.map(this.genomicProfilesFilter,function(e){return i.flatMap(e,function(e){return t[e]?t[e].sampleUniqueKeys:[]})}),r=this.sampleSetByKey.result||{},o=i.intersection.apply(i,Se(n)),e.abrupt("return",i.reduce(o,function(e,t){var n=r[t];return n&&e.push({sampleId:n.sampleId,studyId:n.studyId}),e},[]));case 5:case"end":return e.stop()}},e,this)}))},default:[]}),this.selectedSamples=Object(G.T)({await:function(){return[o.samples,o.sampleIdentifiersFromGenomicProfileFilter]},invoke:function(){if(o.chartsAreFiltered){var e=i.clone(o.filters);if(!i.isEmpty(o.genomicProfilesFilter)){var t=o.sampleIdentifiersFromGenomicProfileFilter.result;if(i.isEmpty(e.sampleIdentifiers))e.sampleIdentifiers=t,delete e.studyIds;else{var n=i.intersectionWith(e.sampleIdentifiers,t,function(e,t){return e.sampleId===t.sampleId&&e.studyId===t.studyId});e.sampleIdentifiers=n}delete e.genomicProfiles}return p.a.fetchFilteredSamplesUsingPOST({studyViewFilter:e})}return Promise.resolve(o.samples.result)},onError:function(e){},default:[]}),this.studyViewFilterWithFilteredSampleIdentifiers=Object(G.T)({await:function(){return[o.selectedSamples]},invoke:function(){var e=o.selectedSamples.result.map(function(e){return{sampleId:e.sampleId,studyId:e.studyId}});return Promise.resolve({sampleIdentifiers:e})},onError:function(e){}}),this.selectedPatientKeys=Object(G.T)({await:function(){return[o.selectedSamples]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.uniq(this.selectedSamples.result.map(function(e){return e.uniquePatientKey})));case 1:case"end":return e.stop()}},e,this)}))},onError:function(e){},default:[]}),this.unSelectedPatientKeys=Object(G.T)({await:function(){return[o.samples,o.selectedPatientKeys]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.reduce(this.selectedPatientKeys.result,function(e,t){return e[t]=!0,e},{}),n=i.reduce(this.samples.result,function(e,n){return void 0===t[n.uniquePatientKey]&&(e[n.uniquePatientKey]=!0),e},{}),e.abrupt("return",Object.keys(n));case 3:case"end":return e.stop()}},e,this)}))},onError:function(e){},default:[]}),this.genePanelCache=new M.a(function(e){return{invoke:function(){return d.a.getGenePanelUsingGET(e)}}}),this.mutatedGeneTableRowData=Object(G.T)({await:function(){return o.oncokbCancerGeneFilterEnabled?[o.mutationProfiles,o.oncokbAnnotatedGeneEntrezGeneIds,o.oncokbOncogeneEntrezGeneIds,o.oncokbTumorSuppressorGeneEntrezGeneIds,o.oncokbCancerGeneEntrezGeneIds,o.studyViewFilterWithFilteredSampleIdentifiers]:[o.mutationProfiles,o.studyViewFilterWithFilteredSampleIdentifiers]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i.isEmpty(this.mutationProfiles.result)){e.next=7;break}return e.next=3,p.a.fetchMutatedGenesUsingPOST({studyViewFilter:this.studyViewFilterWithFilteredSampleIdentifiers.result});case 3:return t=e.sent,e.abrupt("return",t.map(function(e){return Object.assign(Object.assign({},e),{label:e.hugoGeneSymbol,uniqueKey:e.hugoGeneSymbol,oncokbAnnotated:!!n.oncokbCancerGeneFilterEnabled&&n.oncokbAnnotatedGeneEntrezGeneIds.result.includes(e.entrezGeneId),isOncokbOncogene:!!n.oncokbCancerGeneFilterEnabled&&n.oncokbOncogeneEntrezGeneIds.result.includes(e.entrezGeneId),isOncokbTumorSuppressorGene:!!n.oncokbCancerGeneFilterEnabled&&n.oncokbTumorSuppressorGeneEntrezGeneIds.result.includes(e.entrezGeneId),isCancerGene:!!n.oncokbCancerGeneFilterEnabled&&n.oncokbCancerGeneEntrezGeneIds.result.includes(e.entrezGeneId)})}));case 7:return e.abrupt("return",[]);case 8:case"end":return e.stop()}},e,this)}))},onError:function(e){},default:[]}),this.fusionGeneTableRowData=Object(G.T)({await:function(){return o.oncokbCancerGeneFilterEnabled?[o.structuralVariantProfiles,o.oncokbAnnotatedGeneEntrezGeneIds,o.oncokbOncogeneEntrezGeneIds,o.oncokbTumorSuppressorGeneEntrezGeneIds,o.oncokbCancerGeneEntrezGeneIds,o.studyViewFilterWithFilteredSampleIdentifiers]:[o.mutationProfiles,o.studyViewFilterWithFilteredSampleIdentifiers]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i.isEmpty(this.structuralVariantProfiles.result)){e.next=7;break}return e.next=3,p.a.fetchFusionGenesUsingPOST({studyViewFilter:this.studyViewFilterWithFilteredSampleIdentifiers.result});case 3:return t=e.sent,e.abrupt("return",t.map(function(e){return Object.assign(Object.assign({},e),{label:e.hugoGeneSymbol,uniqueKey:e.hugoGeneSymbol,oncokbAnnotated:!!n.oncokbCancerGeneFilterEnabled&&n.oncokbAnnotatedGeneEntrezGeneIds.result.includes(e.entrezGeneId),isOncokbOncogene:!!n.oncokbCancerGeneFilterEnabled&&n.oncokbOncogeneEntrezGeneIds.result.includes(e.entrezGeneId),isOncokbTumorSuppressorGene:!!n.oncokbCancerGeneFilterEnabled&&n.oncokbTumorSuppressorGeneEntrezGeneIds.result.includes(e.entrezGeneId),isCancerGene:!!n.oncokbCancerGeneFilterEnabled&&n.oncokbCancerGeneEntrezGeneIds.result.includes(e.entrezGeneId)})}));case 7:return e.abrupt("return",[]);case 8:case"end":return e.stop()}},e,this)}))},onError:function(e){},default:[]}),this.cnaGeneTableRowData=Object(G.T)({await:function(){return o.oncokbCancerGeneFilterEnabled?[o.cnaProfiles,o.oncokbAnnotatedGeneEntrezGeneIds,o.oncokbOncogeneEntrezGeneIds,o.oncokbTumorSuppressorGeneEntrezGeneIds,o.oncokbCancerGeneEntrezGeneIds,o.studyViewFilterWithFilteredSampleIdentifiers]:[o.mutationProfiles,o.studyViewFilterWithFilteredSampleIdentifiers]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i.isEmpty(this.cnaProfiles.result)){e.next=7;break}return e.next=3,p.a.fetchCNAGenesUsingPOST({studyViewFilter:this.studyViewFilterWithFilteredSampleIdentifiers.result});case 3:return t=e.sent,e.abrupt("return",t.map(function(e){return Object.assign(Object.assign({},e),{label:e.hugoGeneSymbol,uniqueKey:Object(F.d)(e.hugoGeneSymbol,e.alteration),oncokbAnnotated:!!n.oncokbCancerGeneFilterEnabled&&n.oncokbAnnotatedGeneEntrezGeneIds.result.includes(e.entrezGeneId),isOncokbOncogene:!!n.oncokbCancerGeneFilterEnabled&&n.oncokbOncogeneEntrezGeneIds.result.includes(e.entrezGeneId),isOncokbTumorSuppressorGene:!!n.oncokbCancerGeneFilterEnabled&&n.oncokbTumorSuppressorGeneEntrezGeneIds.result.includes(e.entrezGeneId),isCancerGene:!!n.oncokbCancerGeneFilterEnabled&&n.oncokbCancerGeneEntrezGeneIds.result.includes(e.entrezGeneId)})}));case 7:return e.abrupt("return",[]);case 8:case"end":return e.stop()}},e,this)}))},onError:function(e){},default:[]}),this.cnSegments=Object(G.T)({await:function(){return[o.selectedSamples]},invoke:function(){return Object(h.m)(o.selectedSamples.result)}},[]),this.hasCNSegmentData=Object(G.T)({await:function(){return[o.samples]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d.a.fetchCopyNumberSegmentsUsingPOSTWithHttpInfo({sampleIdentifiers:this.samples.result.map(function(e){return{sampleId:e.sampleId,studyId:e.studyId}}),projection:"META"}).then(function(e){return parseInt(e.header["total-count"],10)>0}));case 1:case"end":return e.stop()}},e,this)}))}}),this.survivalPlots=Object(G.T)({await:function(){return[o.survivalClinicalAttributesPrefix,o.clinicalAttributeIdToClinicalAttribute,o.survivalDescriptions]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.survivalClinicalAttributesPrefix.result.map(function(e){var t="KM Plot: ";t+=n.survivalDescriptions.result&&n.survivalDescriptions.result[e]?Object(V.c)(n.survivalDescriptions.result[e][0].displayName):"".concat(e," Survival");var r=n.clinicalAttributeIdToClinicalAttribute.result["".concat(e,"_STATUS")];return{id:"".concat(e,"_SURVIVAL"),title:t,survivalStatusAttribute:r,associatedAttrs:["".concat(e,"_STATUS"),"".concat(e,"_MONTHS")],filter:function(t){return Object(V.n)(t,e)},survivalData:[]}}),e.abrupt("return",t);case 2:case"end":return e.stop()}},e,this)}))},default:[]}),this.survivalPlotData=Object(G.T)({await:function(){return[o.survivalData,o.selectedPatientKeys,o.survivalPlots]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.survivalPlots.result.map(function(e){return e.survivalData=Object(m.b)(t.survivalData.result,t.selectedPatientKeys.result,e.associatedAttrs[0],e.associatedAttrs[1],e.filter),e}));case 1:case"end":return e.stop()}},e,this)}))},onError:function(e){},default:[]}),this.survivalData=Object(G.T)({await:function(){return[o.clinicalAttributes,o.samples,o.survivalPlots]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.flatten(this.survivalPlots.result.map(function(e){return e.associatedAttrs})),i.isEmpty(t)){e.next=7;break}return n={attributeIds:t,identifiers:i.map(this.samples.result,function(e){return{entityId:e.patientId,studyId:e.studyId}})},e.next=5,d.a.fetchClinicalDataUsingPOST({clinicalDataType:y.b.PATIENT,clinicalDataMultiStudyFilter:n});case 5:return r=e.sent,e.abrupt("return",i.groupBy(r,"uniquePatientKey"));case 7:return e.abrupt("return",{});case 8:case"end":return e.stop()}},e,this)}))},onError:function(e){},default:{}}),this.mutationCountVsCNADensityData=Object(G.T)({await:function(){return[o.clinicalAttributes,o.studyViewFilterWithFilteredSampleIdentifiers]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.clinicalAttributes.result.find(function(e){return e.clinicalAttributeId===y.g.MUTATION_COUNT})||!this.clinicalAttributes.result.find(function(e){return e.clinicalAttributeId===y.g.FRACTION_GENOME_ALTERED})){e.next=12;break}return t=y.d,n=50,e.next=5,p.a.fetchClinicalDataDensityPlotUsingPOST({xAxisAttributeId:y.g.FRACTION_GENOME_ALTERED,yAxisAttributeId:y.g.MUTATION_COUNT,xAxisStart:0,xAxisEnd:1,yAxisStart:0,xAxisBinCount:n,yAxisBinCount:t,studyViewFilter:this.studyViewFilterWithFilteredSampleIdentifiers.result});case 5:return e.t0=function(e){return e.count>0},r=e.sent.filter(e.t0),o=1/n,i=Math.max.apply(Math,Se(r.map(function(e){return e.binY})))/(t-1),e.abrupt("return",{bins:r,xBinSize:o,yBinSize:i});case 12:return e.abrupt("return",{bins:[],xBinSize:-1,yBinSize:-1});case 13:case"end":return e.stop()}},e,this)}))},onError:function(e){},default:{bins:[],xBinSize:-1,yBinSize:-1}}),this.sampleMutationCountAndFractionGenomeAlteredData=Object(G.T)({await:function(){return[o.clinicalAttributes,o.selectedSamples]},invoke:function(){if(0===o.selectedSamples.result.length)return Promise.resolve([]);var e={attributeIds:[y.g.MUTATION_COUNT,y.g.FRACTION_GENOME_ALTERED],identifiers:i.map(o.selectedSamples.result,function(e){return{entityId:e.sampleId,studyId:e.studyId}})};return d.a.fetchClinicalDataUsingPOST({clinicalDataType:y.b.SAMPLE,clinicalDataMultiStudyFilter:e})},onError:function(e){},default:[]}),this.mutationCountVsFGAData=Object(G.T)({await:function(){return[o.sampleMutationCountAndFractionGenomeAlteredData]},onError:function(e){},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.reduce(i.groupBy(this.sampleMutationCountAndFractionGenomeAlteredData.result,function(e){return e.uniqueSampleKey}),function(e,t){if(2==t.length){var n={studyId:t[0].studyId,sampleId:t[0].sampleId,patientId:t[0].patientId,uniqueSampleKey:t[0].uniqueSampleKey,x:0,y:0};i.forEach(t,function(e){e.clinicalAttributeId===y.g.MUTATION_COUNT?n.y=Number(e.value):e.clinicalAttributeId===y.g.FRACTION_GENOME_ALTERED&&(n.x=Number(e.value))}),e.push(n)}return e},[]));case 1:case"end":return e.stop()}},e,this)}))}}),this.mutationCountVsFractionGenomeAlteredDataSet=Object(G.T)({await:function(){return[o.mutationCountVsFGAData]},invoke:function(){return Promise.resolve(i.keyBy(o.mutationCountVsFGAData.result,function(e){return e.uniqueSampleKey}))},default:{}}),this.getDataForClinicalDataTab=Object(G.T)({await:function(){return[o.clinicalAttributes,o.selectedSamples]},onError:function(e){},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.selectedSamples.result.length){e.next=2;break}return e.abrupt("return",Promise.resolve([]));case 2:return e.next=4,Object(y.D)(this.selectedSamples.result);case 4:return t=e.sent,e.abrupt("return",i.reduce(this.selectedSamples.result,function(e,n){var r=Object.assign({studyId:n.studyId,patientId:n.patientId,sampleId:n.sampleId},t[n.uniqueSampleKey]||{});return e.push(r),e},[]));case 6:case"end":return e.stop()}},e,this)}))},default:[]}),this.sampleUniqueKeysByMolecularProfileIdSet=Object(G.T)({await:function(){return[o.selectedSamples,o.filteredGenePanelData]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(y.W)(this.selectedSamples.result,this.filteredGenePanelData.result));case 1:case"end":return e.stop()}},e,this)}))},default:{}}),this.molecularProfileOptions=Object(G.T)({await:function(){return[o.molecularProfiles,o.sampleUniqueKeysByMolecularProfileIdSet]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve(Object(y.V)(this.molecularProfiles.result,this.sampleUniqueKeysByMolecularProfileIdSet.result,function(e){return[B.a.MRNA_EXPRESSION,B.a.PROTEIN_LEVEL,B.a.METHYLATION].includes(e.molecularAlterationType)||e.molecularAlterationType===B.a.COPY_NUMBER_ALTERATION&&e.datatype===B.b.CONTINUOUS})));case 1:case"end":return e.stop()}},e,this)}))},default:[]}),this.molecularProfileSampleCounts=Object(G.T)({await:function(){return[o.molecularProfiles,o.initialMolecularProfileSampleCounts,o.sampleUniqueKeysByMolecularProfileIdSet,o.selectedSamples]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],t=this.isInitialFilterState?this.initialMolecularProfileSampleCounts.result:Object(y.V)(this.molecularProfiles.result,this.sampleUniqueKeysByMolecularProfileIdSet.result),e.abrupt("return",t.map(function(e){return{uniqueKey:e.value,label:e.label,numberOfAlteredCases:e.count,numberOfProfiledCases:n.selectedSamples.result.length}}));case 3:case"end":return e.stop()}},e,this)}))}}),this.caseListSampleCounts=Object(G.T)({await:function(){return[o.selectedSamples]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.fetchCaseListCountsUsingPOST({studyViewFilter:this.filters});case 2:return t=e.sent,e.abrupt("return",t.map(function(e){return{uniqueKey:e.value,label:e.label,numberOfAlteredCases:e.count,numberOfProfiledCases:n.selectedSamples.result.length}}));case 4:case"end":return e.stop()}},e,this)}))}}),this.molecularProfileSampleCountSet=Object(G.T)({await:function(){return[o.molecularProfileSampleCounts]},onError:function(e){},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.chain(this.molecularProfileSampleCounts.result||[]).keyBy(function(e){return e.uniqueKey}).mapValues(function(e){return e.numberOfAlteredCases}).value());case 1:case"end":return e.stop()}},e,this)}))}}),this.initialMolecularProfileSampleCounts=Object(G.T)({await:function(){return[o.samples,o.molecularProfiles,o.filteredGenePanelData]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(y.V)(this.molecularProfiles.result,Object(y.W)(this.samples.result,this.filteredGenePanelData.result)));case 1:case"end":return e.stop()}},e,this)}))}}),this.molecularProfileNameSet=Object(G.T)({await:function(){return[o.initialMolecularProfileSampleCounts]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.chain(this.initialMolecularProfileSampleCounts.result).keyBy(function(e){return e.value}).mapValues(function(e){return e.label}).value());case 1:case"end":return e.stop()}},e,this)}))}}),this.caseListNameSet=Object(G.T)({await:function(){return[o.caseListSampleCounts]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.chain(this.caseListSampleCounts.result).keyBy(function(e){return e.uniqueKey}).mapValues(function(e){return e.label}).value());case 1:case"end":return e.stop()}},e,this)}))}}),this.clinicalAttributesCounts=Object(G.T)({await:function(){return[o.selectedSamples]},onError:function(e){},invoke:function(){if(0===o.selectedSamples.result.length)return Promise.resolve([]);var e={sampleIdentifiers:o.selectedSamples.result.map(function(e){return{sampleId:e.sampleId,studyId:e.studyId}})};return d.a.getClinicalAttributeCountsUsingPOST({clinicalAttributeCountFilter:e})}}),this.dataWithCount=Object(G.T)({await:function(){return[o.molecularProfileSampleCounts,o.clinicalAttributeIdToClinicalAttribute,o.clinicalAttributesCounts,o.mutationCountVsFractionGenomeAlteredDataSet,o.molecularProfileOptions,o.sampleTreatments,o.patientTreatments]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,o,a,s,l,u,c,p,d,f,h=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i.isEmpty(this.chartMetaSet)){e.next=16;break}return t=this.clinicalAttributeIdToClinicalAttribute.result,n=i.reduce(this.clinicalAttributesCounts.result||[],function(e,n){var r=t[n.clinicalAttributeId];if(r){var o=Object(y.fb)(r);e[o]=e[o]||0,e[o]+=n.count}return e},{}),i.each(this.survivalPlotData.result,function(e){e.id in h.chartMetaSet&&(n[e.id]=e.survivalData.length)}),y.g.CANCER_STUDIES in this.chartMetaSet&&(n[y.g.CANCER_STUDIES]=i.sumBy(this.cancerStudiesData.result,function(e){return e.count})),r=this.sampleUniqueKeysByMolecularProfileIdSet.result,i.isEmpty(this.mutationProfiles.result)||(o=Object(y.gb)(this.mutationProfiles.result.map(function(e){return e.molecularProfileId})),n[o]=i.sumBy(this.mutationProfiles.result,function(e){return(r[e.molecularProfileId]||[]).length})),i.isEmpty(this.sampleTreatments.result)||(n.SAMPLE_TREATMENTS=1),i.isEmpty(this.patientTreatments.result)||(n.PATIENT_TREATMENTS=1),i.isEmpty(this.structuralVariantProfiles.result)||(a=Object(y.gb)(this.structuralVariantProfiles.result.map(function(e){return e.molecularProfileId})),0===(s=i.sumBy(this.structuralVariantProfiles.result,function(e){return(r[e.molecularProfileId]||[]).length}))&&(l=Object(y.gb)(this.mutationProfiles.result.map(function(e){return e.molecularProfileId})),s=n[l]),n[a]=s),i.isEmpty(this.cnaProfiles.result)||(u=Object(y.gb)(this.cnaProfiles.result.map(function(e){return e.molecularProfileId})),n[u]=i.sumBy(this.cnaProfiles.result,function(e){return(r[e.molecularProfileId]||[]).length})),y.g.MUTATION_COUNT_CNA_FRACTION in this.chartMetaSet&&(c=this.mutationCountVsFractionGenomeAlteredDataSet.result,p=i.keyBy(this.selectedSamples.result,function(e){return e.uniqueSampleKey}),d=i.reduce(p,function(e,t){return c[t.uniqueSampleKey]&&e.push(c[t.uniqueSampleKey]),e},[]),n[y.g.MUTATION_COUNT_CNA_FRACTION]=d.length),y.g.GENOMIC_PROFILES_SAMPLE_COUNT in this.chartMetaSet&&(n[y.g.GENOMIC_PROFILES_SAMPLE_COUNT]=this.selectedSamples.result.length),i.reduce(this._customCharts.keys(),function(e,t){return e[t]=h.selectedSamples.result.length,e},n),this._geneSpecificChartMap.size>0&&(f=i.chain(this.molecularProfileOptions.result).keyBy(function(e){return e.value}).mapValues(function(e){return e.count}).value(),i.reduce(this._geneSpecificChartMap.keys(),function(e,t){var n=h._geneSpecificChartMap.get(t);return e[t]=f[n.profileType]||0,e},n)),e.abrupt("return",i.reduce(this.chartMetaSet,function(e,t,r){return e[r]=n[r]||0,e},{}));case 16:return e.abrupt("return",{});case 17:case"end":return e.stop()}},e,this)}))},onError:function(e){},default:{}}),this.cancerStudiesData=Object(G.T)({await:function(){return[o.selectedSamples]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],!i.includes(this._chartSampleIdentifiersFilterSet.keys(),y.g.CANCER_STUDIES)){e.next=7;break}return e.next=4,Object(y.cb)(y.g.CANCER_STUDIES,this.filters,this._chartSampleIdentifiersFilterSet.toJS(),this.queriedSampleIdentifiers.result,this.queriedPhysicalStudyIds.result);case 4:t=e.sent,e.next=8;break;case 7:t=this.selectedSamples.result;case 8:return e.abrupt("return",Object(y.E)(i.values(i.reduce(t,function(e,t){var n=t.studyId;return e[n]?e[n].count=e[n].count+1:e[n]={value:"".concat(n),count:1},e},{}))));case 9:case"end":return e.stop()}},e,this)}))},onError:function(e){},default:[]}),this.cancerStudyAsClinicalData=Object(G.T)({await:function(){return[o.samples]},invoke:function(){return we(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve(this.samples.result.map(function(e){return{clinicalAttributeId:y.g.CANCER_STUDIES,patientId:e.patientId,sampleId:e.sampleId,studyId:e.studyId,uniquePatientKey:e.uniquePatientKey,uniqueSampleKey:e.uniqueSampleKey,value:e.studyId}})));case 1:case"end":return e.stop()}},e,this)}))},onError:function(e){return Promise.resolve([])},default:[]}),this.survivalClinicalAttributesPrefix=Object(G.T)({await:function(){return[o.clinicalAttributes]},invoke:function(){return Promise.resolve(Object(h.Z)(o.clinicalAttributes.result))},default:[]}),this.survivalDescriptions=Object(G.T)({await:function(){return[o.clinicalAttributes,o.survivalClinicalAttributesPrefix]},invoke:function(){var e=i.reduce(o.survivalClinicalAttributesPrefix.result,function(e,t){var n="".concat(t,"_STATUS"),r=i.groupBy(o.clinicalAttributes.result,"clinicalAttributeId");return r&&r[n]&&r[n].length>0&&r[n].map(function(n){e[t]||(e[t]=[]),e[t].push({studyName:n.studyId,description:n.description,displayName:n.displayName})}),e},{});return Promise.resolve(e)}}),this._patientTreatmentsFilter={filters:[]},this._sampleTreatmentsFilters={filters:[]},this.sampleTreatments=Object(G.T)({await:function(){return[o.studyViewFilterWithFilteredSampleIdentifiers,o.selectedSamples]},invoke:function(){return d.a.getAllSampleTreatmentsUsingPOST({studyViewFilter:o.studyViewFilterWithFilteredSampleIdentifiers.result})}}),this.displayPatientTreatments=Object(G.T)({await:function(){return[o.queriedPhysicalStudyIds]},invoke:function(){return d.a.getContainsTreatmentDataUsingPOST({studyIds:Object(u.toJS)(o.queriedPhysicalStudyIds.result)})}}),this.displaySampleTreatments=Object(G.T)({await:function(){return[o.queriedPhysicalStudyIds]},invoke:function(){return d.a.getContainsSampleTreatmentDataUsingPOST({studyIds:Object(u.toJS)(o.queriedPhysicalStudyIds.result)})}}),this.patientTreatments=Object(G.T)({await:function(){return[o.studyViewFilterWithFilteredSampleIdentifiers,o.selectedSamples]},invoke:function(){return d.a.getAllPatientTreatmentsUsingPOST({studyViewFilter:o.studyViewFilterWithFilteredSampleIdentifiers.result})}}),this.chartItemToColor=new Map,this.chartToUsedColors=new Map,this.reactionDisposers.push(Object(u.reaction)(function(){return o.loadingInitialDataForSummaryTab},function(){o.loadingInitialDataForSummaryTab||(o.updateChartStats(),o.loadUserSettings())})),this.reactionDisposers.push(Object(u.reaction)(function(){return[o.visibleAttributes,o.columns,o.chartsDimension.toJS(),o.chartsType.toJS()]},function(){o.updateLayout()})),this.reactionDisposers.push(Object(u.reaction)(function(){return Object(u.toJS)(o.currentChartSettingsMap)},function(){o.isSavingUserSettingsPossible&&(o.hideRestoreSettingsMsg||(o.hideRestoreSettingsMsg=!0),o.updateUserSettingsDebounce())})),this.reactionDisposers.push(Object(u.reaction)(function(){return o.fetchUserSettings.isComplete},function(e){e&&o.isSavingUserPreferencePossible&&!o._loadUserSettingsInitially&&(o.previousSettings=o.currentChartSettingsMap,o.loadUserSettings())})),y.f.forEach(function(e){var t=e.uniqueKey;o.chartsType.has(t)||o.chartsType.set(t,e.chartType),void 0!==o.chartsType.get(t)&&(o._customCharts.set(t,{displayName:e.displayName,uniqueKey:t,dataType:Object(y.A)(t),patientAttribute:e.patientAttribute,description:e.description,renderWhenDataChange:!1,priority:I.d.priority[t]||e.priority}),o.chartsType.set(t,e.chartType),o.chartsDimension.set(t,e.dimension),t===y.g.CANCER_STUDIES&&(o.customChartsPromises[t]=o.cancerStudiesData))})}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,o=this.reactionDisposers[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){(0,r.value)()}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}}},{key:"isResourceTabOpen",value:function(e){return!!this.openResourceTabMap.get(e)}},{key:"setResourceTabOpen",value:function(e,t){this.openResourceTabMap.set(e,t)}},{key:"setComparisonConfirmationModal",value:function(e){var t=this;this._comparisonConfirmationModal=e(function(){t._comparisonConfirmationModal=null})}},{key:"setComparisonGroupSelected",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._selectedComparisonGroups.set(e,t)}},{key:"toggleComparisonGroupSelected",value:function(e){this.setComparisonGroupSelected(e,!this.isComparisonGroupSelected(e))}},{key:"toggleComparisonGroupMarkedForDeletion",value:function(e){this._comparisonGroupsMarkedForDeletion.set(e,!this.isComparisonGroupMarkedForDeletion(e))}},{key:"isComparisonGroupSelected",value:function(e){return!this.isComparisonGroupMarkedForDeletion(e)&&(!!this._selectedComparisonGroups.has(e)&&this._selectedComparisonGroups.get(e))}},{key:"isComparisonGroupMarkedForDeletion",value:function(e){return!!this._comparisonGroupsMarkedForDeletion.has(e)&&this._comparisonGroupsMarkedForDeletion.get(e)}},{key:"deleteMarkedComparisonGroups",value:function(){return we(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,o,i,a,s,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t=[],n=!0,r=!1,o=void 0,e.prev=4,i=this._comparisonGroupsMarkedForDeletion.keys()[Symbol.iterator]();!(n=(a=i.next()).done);n=!0)s=a.value,this.isComparisonGroupMarkedForDeletion(s)&&(this.isLoggedIn&&(l=R.a.deleteGroup(s),t.push(l),this._pendingChanges.push(new le(l))),delete this.sharedGroupSet[s],this._selectedComparisonGroups.delete(s));e.next=12;break;case 8:e.prev=8,e.t0=e.catch(4),r=!0,o=e.t0;case 12:e.prev=12,e.prev=13,n||null==i.return||i.return();case 15:if(e.prev=15,!r){e.next=18;break}throw o;case 18:return e.finish(15);case 19:return e.finish(12);case 20:return e.next=22,Promise.all(t);case 22:this._comparisonGroupsMarkedForDeletion.clear(),this.notifyComparisonGroupsChange();case 24:case"end":return e.stop()}},e,this,[[4,8,12,20],[13,,15,19]])}))}},{key:"saveGroupsToUserProfile",value:function(e){return we(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isLoggedIn){t.next=5;break}return n=[],e.forEach(function(e){if(e.isSharedGroup||void 0===e.isSharedGroup){var t=R.a.addGroupToUser(e.uid);n.push(t)}}),t.next=5,Promise.all(n);case 5:case"end":return t.stop()}},t,this)}))}},{key:"notifyComparisonGroupsChange",value:function(){this._comparisonGroupsChangeCount+=1}},{key:"createNumberAttributeComparisonSession",value:function(e,t,n){return we(this,void 0,void 0,regeneratorRuntime.mark(function r(){var o,i=this;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n(D.a.DOWNLOADING_GROUPS),o=[this.selectedSamples],this.isGeneSpecificChart(e.uniqueKey)?o.push(this.genomicChartPromises[e.uniqueKey]):o.push(this.clinicalDataBinPromises[e.uniqueKey]),r.abrupt("return",new Promise(function(r){Object(P.a)(o,function(o,a){return we(i,void 0,void 0,regeneratorRuntime.mark(function i(){var s,l,u,c,p,f,h,m;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(s=[],!this.isGeneSpecificChart(e.uniqueKey)){i.next=8;break}return l=this._geneSpecificChartMap.get(e.uniqueKey),i.next=5,Object(y.Q)(l,this.molecularProfileMapByType,o);case 5:s=i.sent,i.next=18;break;case 8:if(!(u=e.clinicalAttribute)){i.next=18;break}if(c=u.patientAttribute?"patientId":"sampleId",0!==o.length){i.next=15;break}s=[],i.next=18;break;case 15:return i.next=17,d.a.fetchClinicalDataUsingPOST({clinicalDataType:u.patientAttribute?y.b.PATIENT:y.b.SAMPLE,clinicalDataMultiStudyFilter:{attributeIds:[u.clinicalAttributeId],identifiers:o.map(function(e){return{studyId:e.studyId,entityId:e[c]}})}});case 17:s=i.sent;case 18:p=[],i.t0=t,i.next=i.t0===y.e.BINS?22:i.t0===y.e.MEDIAN?25:(i.t0,y.e.QUARTILES,28);break;case 22:return p=Object(y.R)(o,e.patientAttribute,s,a,this.studyIds),f="Bins of ".concat(e.displayName),i.abrupt("break",30);case 25:return p=Object(y.S)(o,e.patientAttribute,Object(N.D)(s,2),this.studyIds),f="Median of ".concat(e.displayName),i.abrupt("break",30);case 28:p=Object(y.S)(o,e.patientAttribute,Object(N.D)(s,4),this.studyIds),f="Quartiles of ".concat(e.displayName);case 30:return n(D.a.CREATING_SESSION),i.next=33,R.a.addComparisonSession({groups:p,clinicalAttributeName:f,origin:this.studyIds,groupNameOrder:p.map(function(e){return e.name})});case 33:return h=i.sent,m=h.id,i.abrupt("return",r(m));case 36:case"end":return i.stop()}},i,this)}))})}));case 4:case"end":return r.stop()}},r,this)}))}},{key:"createTreatmentsComparisonSession",value:function(e,t,n,r){var o=this;r(D.a.DOWNLOADING_GROUPS);var a=t===I.a.PATIENT_TREATMENTS_TABLE,s=[this.selectedSampleSet,this.sampleTreatments];return new Promise(function(t){Object(P.a)(s,function(s,l){return we(o,void 0,void 0,regeneratorRuntime.mark(function o(){var u,c,p,d,f,h,m=this;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return u=i.keyBy(n),c=l.filter(function(e){return $(e,a)in u}),p=i.groupBy(c,function(e){return $(e,a)}),d=i.map(p,function(e,t){var n=i.flatMap(e,function(e){return e.samples.filter(function(e){return s.has(e,["sampleId","studyId"])})}).map(function(e){return{studyId:e.studyId,sampleId:e.sampleId}});return Object(L.a)(X(e[0],a),n,m.studyIds)}),r(D.a.CREATING_SESSION),o.next=7,R.a.addComparisonSession({groups:d,origin:this.studyIds,clinicalAttributeName:e.displayName});case 7:return f=o.sent,h=f.id,o.abrupt("return",t(h));case 10:case"end":return o.stop()}},o,this)}))})})}},{key:"createCnaGeneComparisonSession",value:function(e,t,n){var r=this;n(D.a.DOWNLOADING_GROUPS);var o=[this.selectedSamples,this.cnaProfiles];return new Promise(function(a){Object(P.a)(o,function(o,s){return we(r,void 0,void 0,regeneratorRuntime.mark(function r(){var l,u;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,me(o,s,t);case 2:return l=r.sent,u=i.groupBy(l.filter(function(e){return e.value===be.b||e.value===be.c}),function(e){return"".concat(e.gene.hugoGeneSymbol,":").concat(Object(y.x)(e.value))}),r.t0=a,r.next=7,de(e,this.studyIds,u,n);case 7:return r.t1=r.sent,r.abrupt("return",(0,r.t0)(r.t1));case 9:case"end":return r.stop()}},r,this)}))})})}},{key:"createMutatedGeneComparisonSession",value:function(e,t,n){var r=this;n(D.a.DOWNLOADING_GROUPS);var o=[this.selectedSamples,this.mutationProfiles];return new Promise(function(a){Object(P.a)(o,function(o,s){return we(r,void 0,void 0,regeneratorRuntime.mark(function r(){var l,u;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,he(o,s,t);case 2:return l=r.sent,u=i.groupBy(l,function(e){return e.gene.hugoGeneSymbol}),r.t0=a,r.next=7,de(e,this.studyIds,u,n);case 7:return r.t1=r.sent,r.abrupt("return",(0,r.t0)(r.t1));case 9:case"end":return r.stop()}},r,this)}))})})}},{key:"createCategoricalAttributeComparisonSession",value:function(e,t,n){var r=this;n(D.a.DOWNLOADING_GROUPS);var o=[this.selectedSamples];return e.uniqueKey===y.g.CANCER_STUDIES&&o.push(this.cancerStudyAsClinicalData),new Promise(function(a){Object(P.a)(o,function(o,s){return we(r,void 0,void 0,regeneratorRuntime.mark(function r(){var l,u,c,p,f,h,m,y,b,g,v,S=this;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(l=[],!this.isCustomChart(e.uniqueKey)){r.next=5;break}void 0===s?(u=i.keyBy(this._customChartsSelectedCases.get(e.uniqueKey),function(e){return e.studyId+e.sampleId}),l=o.map(function(e){var t=u[e.studyId+e.sampleId];return{sampleId:e.sampleId,studyId:e.studyId,value:t?t.value:oe.a.NA}})):(c=i.keyBy(o,function(e){return e.uniqueSampleKey}),l=i.filter(s,function(e){return void 0!==c[e.uniqueSampleKey]})),r.next=11;break;case 5:return p=e.clinicalAttribute&&e.clinicalAttribute.patientAttribute||!1,f=p?"patientId":"sampleId",r.next=9,d.a.fetchClinicalDataUsingPOST({clinicalDataType:p?"PATIENT":"SAMPLE",clinicalDataMultiStudyFilter:{attributeIds:[e.clinicalAttribute.clinicalAttributeId],identifiers:o.map(function(e){return{studyId:e.studyId,entityId:e[f]}})}});case 9:l=r.sent,p&&(h=i.keyBy(l,function(e){return e.uniquePatientKey}),l=o.map(function(e){var t=h[e.uniquePatientKey];return{sampleId:e.sampleId,studyId:e.studyId,value:t?t.value:oe.a.NA}}));case 11:return m=i.groupBy(l,function(e){return e.value.toLowerCase()}),y=i.keyBy(t,function(e){return e.value.toLowerCase()}),b=i.chain(t).sortBy(function(e){return-e.count}).slice(0,pe(e)?N.c:void 0).filter(function(e){var t=e.value.toLowerCase(),n=m[t];return n&&n.length>0}).map(function(e){var t=e.value.toLowerCase(),n=m[t];return Object(L.a)(e.value,n,S.studyIds,y[t].color)}).value(),n(D.a.CREATING_SESSION),r.next=17,R.a.addComparisonSession({groups:b,clinicalAttributeName:e.displayName,origin:this.studyIds});case 17:return g=r.sent,v=g.id,r.abrupt("return",a(v));case 20:case"end":return r.stop()}},r,this)}))})})}},{key:"openComparisonPage",value:function(e,t){return we(this,void 0,void 0,regeneratorRuntime.mark(function n(){var r,o,i,a,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=window.open(Object(k.f)({phase:D.a.DOWNLOADING_GROUPS,clinicalAttributeName:e.displayName,origin:this.studyIds.join(",")}),"_blank"),n.next=3,Object(j.b)(function(){return r.closed||r.globalStores&&r.globalStores.appStore.appReady});case 3:if(!r.closed){n.next=5;break}return n.abrupt("return");case 5:o=setInterval(function(){try{r.closed||r.ping()}catch(e){clearInterval(o)}},500),a=function(e){r.closed||r.routingStore.updateRoute({phase:e},void 0,!1)},s=this.chartsType.get(e.uniqueKey),n.t0=s,n.next=n.t0===I.a.PIE_CHART?11:n.t0===I.a.TABLE?11:n.t0===I.a.MUTATED_GENES_TABLE?15:n.t0===I.a.CNA_GENES_TABLE?19:n.t0===I.a.SAMPLE_TREATMENTS_TABLE?23:n.t0===I.a.PATIENT_TREATMENTS_TABLE?23:27;break;case 11:return n.next=13,this.createCategoricalAttributeComparisonSession(e,t.clinicalAttributeValues,a);case 13:return i=n.sent,n.abrupt("break",31);case 15:return n.next=17,this.createMutatedGeneComparisonSession(e,t.hugoGeneSymbols,a);case 17:return i=n.sent,n.abrupt("break",31);case 19:return n.next=21,this.createCnaGeneComparisonSession(e,t.hugoGeneSymbols,a);case 21:return i=n.sent,n.abrupt("break",31);case 23:return n.next=25,this.createTreatmentsComparisonSession(e,s,t.treatmentUniqueKeys,a);case 25:return i=n.sent,n.abrupt("break",31);case 27:return n.next=29,this.createNumberAttributeComparisonSession(e,t.categorizationType||y.e.QUARTILES,a);case 29:return i=n.sent,n.abrupt("break",31);case 31:clearInterval(o),r.closed||Object(k.D)(r,{sessionId:i});case 33:case"end":return n.stop()}},n,this)}))}},{key:"setGenomicProfilesFilter",value:function(e){this._genomicProfilesFilter=e}},{key:"setCaseListsFilter",value:function(e){this._caseListsFilter=e}},{key:"isNewlyAdded",value:function(e){return this.newlyAddedCharts.includes(e)}},{key:"updateStoreByFilters",value:function(e){var t=this;i.isArray(e.clinicalDataFilters)&&e.clinicalDataFilters.length>0&&i.each(e.clinicalDataFilters,function(e){t._clinicalDataFilterSet.set(e.attributeId,{attributeId:e.attributeId,values:i.reduce(e.values,function(e,t){return e.push({end:t.end,start:t.start,value:t.value}),e},[])})}),i.isArray(e.geneFilters)&&e.geneFilters.length>0&&e.geneFilters.forEach(function(e){var n=Object(y.gb)(e.molecularProfileIds);t._geneFilterSet.set(n,i.clone(e.geneQueries))}),i.isArray(e.sampleIdentifiers)&&e.sampleIdentifiers.length>0&&(this.numberOfSelectedSamplesInCustomSelection=e.sampleIdentifiers.length,this.updateChartSampleIdentifierFilter(y.g.CUSTOM_SELECT,e.sampleIdentifiers,!1)),void 0!==e.genomicProfiles&&this.setGenomicProfilesFilter(e.genomicProfiles),this.setTreatmentFilters(e),void 0!==e.caseLists&&this.setCaseListsFilter(e.caseLists),i.isArray(e.genomicDataFilters)&&e.genomicDataFilters.length>0&&e.genomicDataFilters.forEach(function(e){var n=Object(y.P)(e.hugoGeneSymbol,e.profileType);t._genomicDataIntervalFilterSet.set(n,i.clone(e))}),i.isEqual(Object(u.toJS)(this.initialFiltersQuery),e)||(this.initialFiltersQuery=e)}},{key:"updateStoreFromURL",value:function(e){return we(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,r,o,a,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n="",r=[],e.studyId&&(n=e.studyId),e.cancer_study_id&&(n=e.cancer_study_id),e.id&&(n=e.id),n&&(r=n.trim().split(","),i.isEqual(r,Object(u.toJS)(this.studyIds))||(this.studyIds=r)),e.sharedGroups&&(this.sharedGroupSet=Object(G.Z)(e.sharedGroups.trim().split(","))),o={},!e.filters){t.next=12;break}try{o=JSON.parse(decodeURIComponent(e.filters)),this.updateStoreByFilters(o)}catch(e){}t.next=21;break;case 12:if(!e.filterAttributeId||!e.filterValues){t.next=21;break}return t.t0=i,t.next=16,d.a.fetchClinicalAttributesUsingPOST({studyIds:r});case 16:t.t1=t.sent,t.t2=function(e){return"".concat(e.patientAttribute,"-").concat(e.clinicalAttributeId)},a=t.t0.uniqBy.call(t.t0,t.t1,t.t2),void 0!==(s=i.find(a,function(t){return t.clinicalAttributeId.toUpperCase()===e.filterAttributeId.toUpperCase()}))?(s.datatype==y.c.NUMBER?o.clinicalDataFilters=[{attributeId:s.clinicalAttributeId,values:e.filterValues.split(",").map(function(e){var t=e.split("-");return{start:Number(t[0]),end:Number(t[1])}})}]:o.clinicalDataFilters=[{attributeId:s.clinicalAttributeId,values:Object(y.F)(e.filterValues).map(function(e){return{value:e}})}],this.updateStoreByFilters(o)):this.pageStatusMessages.unknownClinicalAttribute={message:"The clinical attribute ".concat(e.filterAttributeId," is not available for this study"),status:"danger"};case 21:case"end":return t.stop()}},t,this)}))}},{key:"updateLayout",value:function(){this.currentGridLayout=Object(y.i)(this.visibleAttributes,this.columns,this.chartsDimension.toJS(),this.useCurrentGridLayout?this.currentGridLayout:[],this.currentFocusedChartByUser,this.currentFocusedChartByUserDimension),this.useCurrentGridLayout&&(this.useCurrentGridLayout=!1)}},{key:"updateCurrentGridLayout",value:function(e){this.currentGridLayout=e}},{key:"updateMutatedGenesTableByCancerGenesFilter",value:function(e){this._filterMutatedGenesTableByCancerGenes=e}},{key:"updateFusionGenesTableByCancerGenesFilter",value:function(e){this._filterFusionGenesTableByCancerGenes=e}},{key:"updateCNAGenesTableByCancerGenesFilter",value:function(e){this._filterCNAGenesTableByCancerGenes=e}},{key:"updateComparisonGroupsFilter",value:function(){var e=this;Object(P.a)(this.comparisonGroups,function(t){e._filterComparisonGroups=Object(L.b)(t,e),e.updateChartSampleIdentifierFilter(y.g.SELECTED_COMPARISON_GROUPS,Object(N.w)(e._filterComparisonGroups))})}},{key:"onCheckGene",value:function(e){this.geneQueries=Object(y.ub)(this.geneQueries,e),this.geneQueryStr=this.geneQueries.map(function(e){return Object(v.j)(e)}).join(" ")}},{key:"updateSelectedGenes",value:function(e,t){this.geneQueries=e,this.geneQueryStr=t}},{key:"clearAllFilters",value:function(){this._clinicalDataFilterSet.clear(),this._geneFilterSet.clear(),this._genomicDataIntervalFilterSet.clear(),this._chartSampleIdentifiersFilterSet.clear(),this.customChartFilterSet.clear(),this.numberOfSelectedSamplesInCustomSelection=0,this.removeComparisonGroupSelectionFilter(),this._customBinsFromScatterPlotSelectionSet.clear(),this.setGenomicProfilesFilter([]),this.setCaseListsFilter([]),this.clearPatientTreatmentFilters(),this.clearSampleTreatmentFilters()}},{key:"updateClinicalDataIntervalFilters",value:function(e,t){e===y.g.FRACTION_GENOME_ALTERED&&this._customBinsFromScatterPlotSelectionSet.delete(y.g.FRACTION_GENOME_ALTERED),e===y.g.MUTATION_COUNT&&this._customBinsFromScatterPlotSelectionSet.delete(y.g.MUTATION_COUNT),Object(A.i)("clinicalDataInterval",this);var n=Object(y.H)(t);this.updateClinicalDataFilterByValues(e,n)}},{key:"updateClinicalDataFilterByValues",value:function(e,t){if(this.chartMetaSet[e]){var n=this.chartMetaSet[e];if(Object(A.i)("clinicalDataFilters",this),t.length>0){var r={attributeId:n.clinicalAttribute.clinicalAttributeId,values:t};this._clinicalDataFilterSet.set(n.uniqueKey,r)}else this._clinicalDataFilterSet.delete(n.uniqueKey)}}},{key:"updateGenomicDataIntervalFilters",value:function(e,t){Object(A.i)("genomicDataInterval",this);var n=Object(y.H)(t);this.updateGenomicDataIntervalFiltersByValues(e,n)}},{key:"updateScatterPlotFilterByValues",value:function(e,t){if(e===y.g.MUTATION_COUNT_CNA_FRACTION)if(void 0===t)this._clinicalDataFilterSet.delete(y.g.FRACTION_GENOME_ALTERED),this._clinicalDataFilterSet.delete(y.g.MUTATION_COUNT),this._customBinsFromScatterPlotSelectionSet.delete(y.g.FRACTION_GENOME_ALTERED),this._customBinsFromScatterPlotSelectionSet.delete(y.g.MUTATION_COUNT);else{var n={start:t.yStart,end:t.yEnd},r={attributeId:y.g.MUTATION_COUNT,values:[n]};this._customBinsFromScatterPlotSelectionSet.set(y.g.MUTATION_COUNT,[n.start,n.end]),this._clinicalDataFilterSet.set(y.g.MUTATION_COUNT,r);var o={start:t.xStart,end:t.xEnd},i={attributeId:y.g.FRACTION_GENOME_ALTERED,values:[o]};this._customBinsFromScatterPlotSelectionSet.set(y.g.FRACTION_GENOME_ALTERED,[o.start,o.end]),this._clinicalDataFilterSet.set(y.g.FRACTION_GENOME_ALTERED,i)}}},{key:"addGeneFilters",value:function(e,t){Object(A.i)("geneFilter",this);var n=Object(u.toJS)(this._geneFilterSet.get(e.uniqueKey))||[];n=n.concat(t),this._geneFilterSet.set(e.uniqueKey,n)}},{key:"updateGenomicDataIntervalFiltersByValues",value:function(e,t){if(t.length>0){var n=this._geneSpecificChartMap.get(e),r={hugoGeneSymbol:n.hugoGeneSymbol,profileType:n.profileType,values:t};this._genomicDataIntervalFilterSet.set(e,r)}else this._genomicDataIntervalFilterSet.delete(e)}},{key:"addGenomicProfilesFilter",value:function(e,t){var n=Object(u.toJS)(this.genomicProfilesFilter)||[];this.setGenomicProfilesFilter(n.concat(t))}},{key:"addCaseListsFilter",value:function(e,t){var n=Object(u.toJS)(this.caseListsFilter)||[];this.setCaseListsFilter(n.concat(t))}},{key:"removeGeneFilter",value:function(e,t){var n=Object(u.toJS)(this._geneFilterSet.get(e))||[];0===(n=i.reduce(n,function(e,n){var r=n.filter(function(e){return e!==t});return r.length>0&&e.push(r),e},[])).length?this._geneFilterSet.delete(e):this._geneFilterSet.set(e,n)}},{key:"resetGeneFilter",value:function(e){this._geneFilterSet.delete(e)}},{key:"removeGenomicProfileFilter",value:function(e){var t=Object(u.toJS)(this.genomicProfilesFilter)||[];t=i.reduce(t,function(t,n){var r=n.filter(function(t){return t!==e});return r.length>0&&t.push(r),t},[]),this.setGenomicProfilesFilter(t)}},{key:"removeCaseListsFilter",value:function(e){var t=Object(u.toJS)(this.caseListsFilter)||[];t=i.reduce(t,function(t,n){var r=n.filter(function(t){return t!==e});return r.length>0&&t.push(r),t},[]),this.setGenomicProfilesFilter(t)}},{key:"updateChartSampleIdentifierFilter",value:function(e,t,n){var r=t,o=i.keyBy(r,function(e){return"".concat(e.studyId,":").concat(e.sampleId)});n&&(r=i.reduce(this._chartSampleIdentifiersFilterSet.get(e)||[],function(e,t){return"".concat(t.studyId,":").concat(t.sampleId)in o||e.push(t),e},r)),i.isEmpty(r)?this._chartSampleIdentifiersFilterSet.delete(e):this._chartSampleIdentifiersFilterSet.set(e,r)}},{key:"getChartSampleIdentifiersFilter",value:function(e){return this._chartSampleIdentifiersFilterSet.get(e)||[]}},{key:"getCustomChartFilters",value:function(e){return this.customChartFilterSet.get(e)||[]}},{key:"newCustomChartUniqueKey",value:function(){return"CUSTOM_FILTERS_".concat(this._customCharts.keys().length)}},{key:"isCustomChart",value:function(e){return this._customCharts.has(e)}},{key:"isGeneSpecificChart",value:function(e){return this._geneSpecificChartMap.has(e)}},{key:"changeChartVisibility",value:function(e,t){t?this._chartVisibility.set(e,!0):this._chartVisibility.delete(e)}},{key:"resetFilterAndChangeChartVisibility",value:function(e,t){if(!t)switch(this.chartsType.get(e)){case I.a.PIE_CHART:case I.a.TABLE:this.isCustomChart(e)?this.customChartFilterSet.delete(e):this.updateClinicalDataFilterByValues(e,[]);break;case I.a.BAR_CHART:this.isGeneSpecificChart(e)?this.updateGenomicDataIntervalFilters(e,[]):this.updateClinicalDataIntervalFilters(e,[]);break;case I.a.SCATTER:this.updateScatterPlotFilterByValues(e);break;case I.a.MUTATED_GENES_TABLE:case I.a.FUSION_GENES_TABLE:case I.a.CNA_GENES_TABLE:this.resetGeneFilter(e);break;case I.a.GENOMIC_PROFILES_TABLE:this.setGenomicProfilesFilter([]);break;case I.a.CASE_LIST_TABLE:this.setCaseListsFilter([]);break;case I.a.SURVIVAL:break;case I.a.SAMPLE_TREATMENTS_TABLE:this.setSampleTreatmentFilters({filters:[]});break;case I.a.PATIENT_TREATMENTS_TABLE:this.setPatientTreatmentFilters({filters:[]});break;default:this._clinicalDataFilterSet.delete(e),this._chartSampleIdentifiersFilterSet.delete(e),this.customChartFilterSet.delete(e),this._genomicDataIntervalFilterSet.delete(e)}this.changeChartVisibility(e,t)}},{key:"removeComparisonGroupSelectionFilter",value:function(){this._chartSampleIdentifiersFilterSet.delete(y.g.SELECTED_COMPARISON_GROUPS),this._filterComparisonGroups=[]}},{key:"removeCustomSelectFilter",value:function(){this._chartSampleIdentifiersFilterSet.delete(y.g.CUSTOM_SELECT),this.numberOfSelectedSamplesInCustomSelection=0}},{key:"toggleLogScale",value:function(e){if(this.isGeneSpecificChart(e)){this.updateGenomicDataIntervalFilters(e,[]);var t=this._genomicDataBinFilterSet.get(e);t.disableLogScale=!t.disableLogScale}else{this.updateClinicalDataIntervalFilters(e,[]);var n=this._clinicalDataBinFilterSet.get(e);n.disableLogScale=!n.disableLogScale}}},{key:"isLogScaleToggleVisible",value:function(e,t){return this.isGeneSpecificChart(e)?void 0!==this._genomicDataBinFilterSet.get(e)&&this._genomicDataBinFilterSet.get(e).disableLogScale||Object(y.lb)(t):void 0!==this._clinicalDataBinFilterSet.get(e)&&this._clinicalDataBinFilterSet.get(e).disableLogScale||Object(y.lb)(t)}},{key:"isLogScaleChecked",value:function(e){return this.isGeneSpecificChart(e)?void 0!==this._genomicDataBinFilterSet.get(e)&&!this._genomicDataBinFilterSet.get(e).disableLogScale:void 0!==this._clinicalDataBinFilterSet.get(e)&&!this._clinicalDataBinFilterSet.get(e).disableLogScale}},{key:"updateCustomBins",value:function(e,t){if(this.isGeneSpecificChart(e)){var n=i.clone(this._genomicDataBinFilterSet.get(e));n.customBins=t,this._genomicDataBinFilterSet.set(e,n)}else{var r=i.clone(this._clinicalDataBinFilterSet.get(e));t.length>0?r.customBins=t:delete r.customBins,this._clinicalDataBinFilterSet.set(e,r)}}},{key:"getCurrentBins",value:function(e){return this.isGeneSpecificChart(e.uniqueKey)?i.uniq(i.reduce(this.getGenomicChartDataBin(e).result,function(e,t){return t.start&&e.push(t.start),t.end&&e.push(t.end),e},[])):i.uniq(i.reduce(this.getClinicalDataBin(e).result,function(e,t){return t.start&&e.push(t.start),t.end&&e.push(t.end),e},[]))}},{key:"addCharts",value:function(e){var t=this;e.forEach(function(e){t._chartVisibility.keys().includes(e)||t.newlyAddedCharts.push(e)}),this.updateChartsVisibility(e)}},{key:"updateChartsVisibility",value:function(e){var t=this;i.each(this._chartVisibility.keys(),function(n){i.includes(e,n)&&t._chartVisibility.get(n)||t.changeChartVisibility(n,!1)}),i.each(e,function(e){void 0===t._chartVisibility.get(e)&&t.changeChartVisibility(e,!0)})}},{key:"getGeneFiltersByUniqueKey",value:function(e){return Object(u.toJS)(this._geneFilterSet.get(e))||[]}},{key:"getClinicalDataFiltersByUniqueKey",value:function(e){var t=this._clinicalDataFilterSet.get(e);return t?t.values:[]}},{key:"getScatterPlotFiltersByUniqueKey",value:function(e){if(e===y.g.MUTATION_COUNT_CNA_FRACTION){var t=this._clinicalDataFilterSet.get(y.g.FRACTION_GENOME_ALTERED),n=this._clinicalDataFilterSet.get(y.g.MUTATION_COUNT),r={};if(t){var o=Object(y.J)(t.values);r.xStart=o.start,r.xEnd=o.end}if(n){var i=Object(y.J)(n.values);r.yStart=i.start,r.yEnd=i.end}if(t||n)return[r]}return[]}},{key:"getGenomicDataIntervalFiltersByUniqueKey",value:function(e){return this._genomicDataIntervalFilterSet.has(e)?this._genomicDataIntervalFilterSet.get(e).values:[]}},{key:"hideChart",value:function(e){this.changeChartVisibility(e,!1)}},{key:"getClinicalDataCount",value:function(e){var t=this,n=Object(y.fb)(e.clinicalAttribute);if(!this.clinicalDataCountPromises.hasOwnProperty(n)){var r=void 0!==i.find(this.defaultVisibleAttributes.result,function(e){return Object(y.fb)(e)===n});this.clinicalDataCountPromises[n]=Object(G.T)({await:function(){return Object(y.bb)(r,t.isInitialFilterState,t.chartsAreFiltered,t._clinicalDataFilterSet.has(n),t.unfilteredClinicalDataCount,t.newlyAddedUnfilteredClinicalDataCount,t.initialVisibleAttributesClinicalDataCountData)},invoke:function(){return we(t,void 0,void 0,regeneratorRuntime.mark(function t(){var o,a,s,l,u,c=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=[],!this.isInitialFilterState||!r||this._clinicalDataFilterSet.has(n)){t.next=5;break}o=this.initialVisibleAttributesClinicalDataCountData.result,t.next=12;break;case 5:if(!this._clinicalDataFilterSet.has(n)&&!this.isInitialFilterState){t.next=11;break}return t.next=8,p.a.fetchClinicalDataCountsUsingPOST({clinicalDataCountFilter:{attributes:[{attributeId:e.clinicalAttribute.clinicalAttributeId}],studyViewFilter:this.filters}});case 8:o=t.sent,t.next=12;break;case 11:o=r||this.chartsAreFiltered?this.unfilteredClinicalDataCount.result:[this.unfilteredClinicalDataCountCache[n]];case 12:return a=i.find(o,{attributeId:e.clinicalAttribute.clinicalAttributeId}),s=[],l="",void 0!==a&&(s=a.counts,l=a.attributeId,this.chartToUsedColors.has(l)||this.chartToUsedColors.set(l,new Set)),(u=Object(y.E)(s)).forEach(function(e){var t,n,r,o=c.generateColorMapKey(l,e.value);if(c.chartItemToColor.has(o))e.color=c.chartItemToColor.get(o);else if(null===(t=c.chartToUsedColors.get(l))||void 0===t?void 0:t.has(e.color)){var i={value:e.value,count:e.count},a=Object(y.pb)(i,c.chartToUsedColors.get(l)||new Set);c.chartItemToColor.set(o,a),null===(r=c.chartToUsedColors.get(l))||void 0===r||r.add(a),e.color=a}else c.chartItemToColor.set(o,e.color),null===(n=c.chartToUsedColors.get(l))||void 0===n||n.add(e.color)}),t.abrupt("return",u);case 19:case"end":return t.stop()}},t,this)}))},onError:function(e){},default:[]})}return this.clinicalDataCountPromises[n]}},{key:"generateColorMapKey",value:function(e,t){return"".concat(e,".").concat(t)}},{key:"getClinicalDataBin",value:function(e){var t=this,n=Object(y.fb)(e.clinicalAttribute);if(!this.clinicalDataBinPromises.hasOwnProperty(n)){var r=void 0!==i.find(this.defaultVisibleAttributes.result,function(e){return Object(y.fb)(e)===n});this.clinicalDataBinPromises[n]=Object(G.T)({await:function(){return Object(y.bb)(r,t.isInitialFilterState,t.chartsAreFiltered,t._clinicalDataFilterSet.has(n),t.unfilteredClinicalDataBinCount,t.newlyAddedUnfilteredClinicalDataBinCount,t.initialVisibleAttributesClinicalDataBinCountData)},invoke:function(){return we(t,void 0,void 0,regeneratorRuntime.mark(function t(){var o,a,s,l,c,d;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=ke,a=[],s=i.find(this.initialVisibleAttributesClinicalDataBinAttributes.result,function(t){return t.attributeId===Object(y.fb)(e.clinicalAttribute)}),l=i.clone(this._clinicalDataBinFilterSet.get(Object(y.fb)(e.clinicalAttribute))),this._customBinsFromScatterPlotSelectionSet.has(e.uniqueKey)&&(c=this._customBinsFromScatterPlotSelectionSet.get(e.uniqueKey)||[],l.customBins=i.sortBy([].concat(Se(l.customBins||[]),Se(c)))),d=r&&!i.isEqual(Object(u.toJS)(l),s),!this.isInitialFilterState||!r||this._clinicalDataFilterSet.has(n)||d){t.next=10;break}a=this.initialVisibleAttributesClinicalDataBinCountData.result,t.next=17;break;case 10:if(!this._clinicalDataFilterSet.has(n)&&!this.isInitialFilterState){t.next=16;break}return t.next=13,p.a.fetchClinicalDataBinCountsUsingPOST({dataBinMethod:o,clinicalDataBinCountFilter:{attributes:[l],studyViewFilter:this.filters}});case 13:a=t.sent,t.next=17;break;case 16:a=r||this.chartsAreFiltered?this.unfilteredClinicalDataBinCount.result:this.unfilteredClinicalDataBinCountCache[n];case 17:return t.abrupt("return",i.filter(a,{attributeId:e.clinicalAttribute.clinicalAttributeId})||[]);case 18:case"end":return t.stop()}},t,this)}))},onError:function(e){},default:[]})}return this.clinicalDataBinPromises[n]}},{key:"getGenomicChartDataBin",value:function(e){var t=this;return this.genomicChartPromises.hasOwnProperty(e.uniqueKey)||(this.genomicChartPromises[e.uniqueKey]=Object(G.T)({await:function(){return[]},invoke:function(){return we(t,void 0,void 0,regeneratorRuntime.mark(function t(){var n,r,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this._geneSpecificChartMap.get(e.uniqueKey),r=this._genomicDataBinFilterSet.get(e.uniqueKey),!n){t.next=7;break}return t.next=5,p.a.fetchGenomicDataBinCountsUsingPOST({dataBinMethod:ke,genomicDataBinCountFilter:{genomicDataBinFilters:[{hugoGeneSymbol:n.hugoGeneSymbol,profileType:n.profileType,customBins:r.customBins,disableLogScale:r.disableLogScale}],studyViewFilter:this.filters}});case 5:return o=t.sent,t.abrupt("return",Object(y.l)(o));case 7:return t.abrupt("return",[]);case 8:case"end":return t.stop()}},t,this)}))},default:[]})),this.genomicChartPromises[e.uniqueKey]}},{key:"getMolecularProfilesByAlterationType",value:function(e,t){var n=[];return n=i.isEmpty(t)?this.molecularProfiles.result.filter(function(t){return t.molecularAlterationType===e}):this.molecularProfiles.result.filter(function(n){return n.molecularAlterationType===e&&n.datatype===t}),i.chain(n).groupBy(function(e){return e.studyId}).flatMap(function(e){return e[0]}).value()}},{key:"getDefaultClinicalDataBinFilter",value:function(e){return{attributeId:e.clinicalAttributeId,disableLogScale:!1}}},{key:"isChartNameValid",value:function(e){return void 0===i.find(this.chartMetaSet,function(t){return t.displayName.toUpperCase()===e.toUpperCase()})}},{key:"getDefaultCustomChartName",value:function(){return"".concat("Custom Chart"," ").concat(this._customCharts.size-y.f.length+1)}},{key:"addCustomChart",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.newCustomChartUniqueKey(),n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.name?e.name:this.getDefaultCustomChartName(),o={uniqueKey:t,displayName:r,description:r,dataType:y.a.CUSTOM_DATA,patientAttribute:!1,renderWhenDataChange:!1,priority:0},a=[];e.patientAttribute&&(o.patientAttribute=!0),i.each(e.groups,function(e){i.reduce(e.sampleIdentifiers,function(t,n){return t.push({studyId:n.studyId,sampleId:n.sampleId,patientId:n.patientId,value:e.name}),t},a)}),this._customCharts.set(t,o),this._customChartMap.set(t,e),this.changeChartVisibility(t,!0),this._customChartsSelectedCases.set(t,a),this.chartsType.set(t,I.a.PIE_CHART),this.chartsDimension.set(t,{w:1,h:1}),n||(this.setCustomChartFilters(o.uniqueKey,e.groups.map(function(e){return e.name})),this.newlyAddedCharts.clear(),this.newlyAddedCharts.push(t))}},{key:"addGeneSpecificCharts",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n||this.newlyAddedCharts.clear(),e.forEach(function(e){var r=Object(y.P)(e.hugoGeneSymbol,e.profileType);if(t._geneSpecificChartMap.has(r))t.changeChartVisibility(r,!0);else{var o=e.name?e.name:t.getDefaultCustomChartName(),i={uniqueKey:r,displayName:o,description:e.description||o,dataType:y.a.GENE_SPECIFIC,patientAttribute:!1,renderWhenDataChange:!1,priority:0};t._geneSpecificCharts.set(r,i),t._geneSpecificChartMap.set(r,e),t.changeChartVisibility(r,!0),t.chartsType.set(r,I.a.BAR_CHART),t.chartsDimension.set(r,{w:2,h:1}),t._genomicDataBinFilterSet.set(r,{clinicalDataType:"SAMPLE",disableLogScale:!1,hugoGeneSymbol:e.hugoGeneSymbol,profileType:e.profileType})}n||t.newlyAddedCharts.push(r)})}},{key:"updateCustomSelect",value:function(e){this.clearAllFilters();var t=i.reduce(e.groups,function(e,t){return e.push.apply(e,Se(t.sampleIdentifiers.map(function(e){return{sampleId:e.sampleId,studyId:e.studyId}}))),e},[]);this.numberOfSelectedSamplesInCustomSelection=t.length,this.updateChartSampleIdentifierFilter(y.g.CUSTOM_SELECT,t,!1)}},{key:"clearPageSettings",value:function(){this._chartVisibility.clear(),this.currentGridLayout=[],this.currentFocusedChartByUser=void 0,this.currentFocusedChartByUserDimension=void 0,this._filterMutatedGenesTableByCancerGenes=!0,this._filterFusionGenesTableByCancerGenes=!0,this._filterCNAGenesTableByCancerGenes=!0,this._clinicalDataBinFilterSet=u.observable.map(Object(u.toJS)(this._defaultClinicalDataBinFilterSet))}},{key:"loadUserSettings",value:function(){this.isSavingUserPreferencePossible&&!i.isEmpty(this.fetchUserSettings.result)&&(this.loadSettings(this.fetchUserSettings.result),this._loadUserSettingsInitially&&(this.previousSettings=i.keyBy(this.fetchUserSettings.result,function(e){return e.id})))}},{key:"undoUserSettings",value:function(){this.loadSettings(i.values(this.previousSettings)),this.previousSettings={}}},{key:"resetToDefaultSettings",value:function(){this.clearPageSettings(),this.loadSettings(i.values(this.defaultChartSettingsMap))}},{key:"loadSettings",value:function(e){var t=this;this.clearPageSettings(),i.map(e,function(e){switch(e.name&&e.groups&&e.groups.length>0&&t.addCustomChart({name:e.name,groups:e.groups||[],patientAttribute:e.patientAttribute},e.id,!0),e.hugoGeneSymbol&&e.profileType&&t.addGeneSpecificCharts([{name:e.name,description:e.description,profileType:e.profileType,hugoGeneSymbol:e.hugoGeneSymbol}],!0),e.layout&&(t.currentGridLayout.push(Object.assign({i:e.id,isResizable:!0,moved:!1,static:!1},e.layout)),t.chartsDimension.set(e.id,{w:e.layout.w,h:e.layout.h})),e.chartType){case I.a.MUTATED_GENES_TABLE:t._filterMutatedGenesTableByCancerGenes=void 0===e.filterByCancerGenes||e.filterByCancerGenes;break;case I.a.FUSION_GENES_TABLE:t._filterFusionGenesTableByCancerGenes=void 0===e.filterByCancerGenes||e.filterByCancerGenes;break;case I.a.CNA_GENES_TABLE:t._filterCNAGenesTableByCancerGenes=void 0===e.filterByCancerGenes||e.filterByCancerGenes;break;case I.a.BAR_CHART:var n=t._clinicalDataBinFilterSet.get(e.id);n&&(e.customBins&&(n.customBins=e.customBins),e.disableLogScale&&(n.disableLogScale=e.disableLogScale))}t.changeChartVisibility(e.id,!0),e.chartType&&t.chartsType.set(e.id,e.chartType)}),this.useCurrentGridLayout=!0}},{key:"updateChartStats",value:function(){if(this.initializeChartStatsByClinicalAttributes(),!i.isEmpty(this.molecularProfiles.result)){var e=i.find(this.chartMetaSet,function(e){return e.uniqueKey===y.g.GENOMIC_PROFILES_SAMPLE_COUNT});this.chartsType.set(y.g.GENOMIC_PROFILES_SAMPLE_COUNT,I.a.GENOMIC_PROFILES_TABLE),this.chartsDimension.set(y.g.GENOMIC_PROFILES_SAMPLE_COUNT,I.d.layout.dimensions[I.a.GENOMIC_PROFILES_TABLE]),e&&0!==e.priority&&this.changeChartVisibility(e.uniqueKey,!0)}if(this.displayPatientTreatments.result&&(this.changeChartVisibility(y.g.SAMPLE_TREATMENTS,!0),this.changeChartVisibility(y.g.PATIENT_TREATMENTS,!0),this.chartsType.set(y.g.PATIENT_TREATMENTS,I.a.PATIENT_TREATMENTS_TABLE),this.chartsType.set(y.g.SAMPLE_TREATMENTS,I.a.SAMPLE_TREATMENTS_TABLE)),!i.isEmpty(this.mutationProfiles.result)){var t=Object(y.gb)(this.mutationProfiles.result.map(function(e){return e.molecularProfileId})),n=i.find(this.chartMetaSet,function(e){return e.uniqueKey===t});this.chartsType.set(t,I.a.MUTATED_GENES_TABLE),this.chartsDimension.set(t,I.d.layout.dimensions[I.a.MUTATED_GENES_TABLE]),n&&0!==n.priority&&this.changeChartVisibility(n.uniqueKey,!0)}if(!i.isEmpty(this.structuralVariantProfiles.result)){var r=Object(y.gb)(this.structuralVariantProfiles.result.map(function(e){return e.molecularProfileId})),o=i.find(this.chartMetaSet,function(e){return e.uniqueKey===r});o&&0!==o.priority&&this.changeChartVisibility(o.uniqueKey,!0),this.chartsType.set(r,I.a.FUSION_GENES_TABLE),this.chartsDimension.set(r,I.d.layout.dimensions[I.a.FUSION_GENES_TABLE])}if(!i.isEmpty(this.cnaProfiles.result)){var a=Object(y.gb)(this.cnaProfiles.result.map(function(e){return e.molecularProfileId})),s=i.find(this.chartMetaSet,function(e){return e.uniqueKey===a});this.chartsType.set(a,I.a.CNA_GENES_TABLE),this.chartsDimension.set(a,I.d.layout.dimensions[I.a.CNA_GENES_TABLE]),s&&0!==s.priority&&this.changeChartVisibility(s.uniqueKey,!0)}i.isEmpty(this.initialFilters.caseLists)||this.changeChartVisibility(y.g.CASE_LISTS_SAMPLE_COUNT,!0),this.initializeClinicalDataCountCharts(),this.initializeClinicalDataBinCountCharts(),this.initializeGeneSpecificCharts(),this._defualtChartsDimension=u.observable.map(this.chartsDimension.toJS()),this._defaultChartsType=u.observable.map(this.chartsType.toJS()),this._defaultVisibleChartIds=this.visibleAttributes.map(function(e){return e.uniqueKey}),this._defaultClinicalDataBinFilterSet=u.observable.map(Object(u.toJS)(this._clinicalDataBinFilterSet))}},{key:"initializeChartStatsByClinicalAttributes",value:function(){var e=this,t=!1,n=!1;this.clinicalAttributes.result.forEach(function(r){var o=Object(y.fb)(r);"0"!==r.priority&&(y.g.MUTATION_COUNT===r.clinicalAttributeId?t=!0:y.g.FRACTION_GENOME_ALTERED===r.clinicalAttributeId&&(n=!0)),r.datatype===y.c.NUMBER?(e.chartsType.set(o,I.a.BAR_CHART),e.chartsDimension.set(o,I.d.layout.dimensions[I.a.BAR_CHART])):(e.chartsType.set(o,I.a.PIE_CHART),e.chartsDimension.set(o,I.d.layout.dimensions[I.a.PIE_CHART]))}),this.survivalPlotKeys.forEach(function(t){e.chartsType.set(t,I.a.SURVIVAL),e.chartsDimension.set(t,I.d.layout.dimensions[I.a.SURVIVAL]),0!==e.chartMetaSet[t].priority&&e.changeChartVisibility(t,!0)}),this.chartsType.set(y.g.MUTATION_COUNT_CNA_FRACTION,I.a.SCATTER),this.chartsDimension.set(y.g.MUTATION_COUNT_CNA_FRACTION,I.d.layout.dimensions[I.a.SCATTER]),this.chartsDimension.set(y.g.SAMPLE_TREATMENTS,I.d.layout.dimensions[I.a.SAMPLE_TREATMENTS_TABLE]),this.chartsDimension.set(y.g.PATIENT_TREATMENTS,I.d.layout.dimensions[I.a.SAMPLE_TREATMENTS_TABLE]),t&&n&&0!==Object(y.I)(y.g.MUTATION_COUNT_CNA_FRACTION)&&this.changeChartVisibility(y.g.MUTATION_COUNT_CNA_FRACTION,!0),this.queriedPhysicalStudyIds.result.length>1&&this.showAsPieChart(y.g.CANCER_STUDIES,this.queriedPhysicalStudyIds.result.length)}},{key:"getTableDimensionByNumberOfRecords",value:function(e){return e<=I.d.thresholds.rowsInTableForOneGrid?{w:2,h:1,minW:2}:{w:2,h:2,minW:2}}},{key:"changeChartType",value:function(e,t){var n;t===I.a.TABLE?(void 0!==(n=e.uniqueKey===y.g.CANCER_STUDIES?this.cancerStudiesData:this.isCustomChart(e.uniqueKey)?this.getCustomChartDataCount(e):this.getClinicalDataCount(e))&&this.chartsDimension.set(e.uniqueKey,this.getTableDimensionByNumberOfRecords(n.result.length)),this.chartsType.set(e.uniqueKey,I.a.TABLE)):(this.chartsDimension.set(e.uniqueKey,I.d.layout.dimensions[t]),this.chartsType.set(e.uniqueKey,t)),this.currentFocusedChartByUser=i.clone(e),this.currentFocusedChartByUserDimension=this.chartsDimension.get(e.uniqueKey),this.useCurrentGridLayout=!0}},{key:"initializeClinicalDataCountCharts",value:function(){var e=this;i.each(this.initialVisibleAttributesClinicalDataCountData.result,function(t){e.showAsPieChart(t.attributeId,t.counts.length)})}},{key:"initializeGeneSpecificCharts",value:function(){var e=this;if(!i.isEmpty(this.initialFilters.genomicDataFilters)){var t=i.keyBy(this.molecularProfileOptions.result,function(e){return e.value});i.each(this.initialFilters.genomicDataFilters,function(n){if(void 0!==t[n.profileType]){var r=t[n.profileType];e.addGeneSpecificCharts([{name:"".concat(n.hugoGeneSymbol,": ").concat(r.label),description:r.description,profileType:n.profileType,hugoGeneSymbol:n.hugoGeneSymbol}],!0)}})}}},{key:"initializeClinicalDataBinCountCharts",value:function(){var e=this;i.each(i.groupBy(this.initialVisibleAttributesClinicalDataBinCountData.result,"attributeId"),function(t,n){Object(y.qb)(e.initialFilters,t.length,e.samples.result.length)&&e.changeChartVisibility(n,!0),e.chartsType.set(n,I.a.BAR_CHART),e.chartsDimension.set(n,I.d.layout.dimensions[I.a.BAR_CHART])})}},{key:"getPieChartDataDownload",value:function(e,t){return we(this,void 0,void 0,regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=this.isCustomChart(e.uniqueKey),!t||"summary"!==t){n.next=9;break}if(!r){n.next=6;break}return n.abrupt("return",this.getClinicalDataCountSummary(e,this.getCustomChartDataCount(e).result));case 6:return n.abrupt("return",this.getClinicalDataCountSummary(e,this.getClinicalDataCount(e).result));case 7:n.next=14;break;case 9:if(!r){n.next=13;break}return n.abrupt("return",this.getCustomChartDownloadData(e));case 13:return n.abrupt("return",this.getChartDownloadableData(e));case 14:case"end":return n.stop()}},n,this)}))}},{key:"getClinicalDataCountSummary",value:function(e,t){var n=e.patientAttribute?"patients":"samples",r=[["Category","Number of ".concat(n),"Percentage of ".concat(n)].join("\t")];return(r=r.concat(t.map(function(e){return[e.value,e.count,e.freq].join("\t")}))).join("\n")}},{key:"getChartDownloadableData",value:function(e){return we(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,r,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=[],!this.isGeneSpecificChart(e.uniqueKey)){t.next=7;break}return t.next=4,Object(y.Q)(this._geneSpecificChartMap.get(e.uniqueKey),this.molecularProfileMapByType,this.selectedSamples.result);case 4:n=t.sent,t.next=11;break;case 7:if(!e.clinicalAttribute||!this.samples.result){t.next=11;break}return t.next=10,d.a.fetchClinicalDataUsingPOST({clinicalDataType:e.clinicalAttribute.patientAttribute?y.b.PATIENT:y.b.SAMPLE,clinicalDataMultiStudyFilter:{attributeIds:[e.clinicalAttribute.clinicalAttributeId],identifiers:this.selectedSamples.result.map(function(t){return{entityId:e.clinicalAttribute.patientAttribute?t.patientId:t.sampleId,studyId:t.studyId}})}});case 10:n=t.sent;case 11:return r=["Study ID","Patient ID"],e.patientAttribute||r.push("Sample ID"),r.push(e.displayName),o=(o=[r.join("\t")]).concat(n.map(function(t){var n=[t.studyId||oe.a.NA,t.patientId||oe.a.NA];return e.patientAttribute||n.push(t.sampleId||oe.a.NA),n.push(t.value||oe.a.NA),n.join("\t")})),t.abrupt("return",o.join("\n"));case 17:case"end":return t.stop()}},t,this)}))}},{key:"getCustomChartDownloadData",value:function(e){var t=this;return new Promise(function(n){if(e&&e.uniqueKey&&t._customChartsSelectedCases.has(e.uniqueKey)){var r=!0,o=["Study ID","Patient ID"];e.patientAttribute||(r=!1,o.push("Sample ID")),o.push(e.displayName);var a=[o.join("\t")];n((a=r?a.concat(t.selectedPatients.map(function(n){var r=i.find(t._customChartsSelectedCases.get(e.uniqueKey),function(e){return e.studyId===n.studyId&&n.patientId===e.patientId});return[n.studyId||oe.a.NA,n.patientId||oe.a.NA,void 0===r?"NA":r.value].join("\t")})):a.concat(t.selectedSamples.result.map(function(n){var r=i.find(t._customChartsSelectedCases.get(e.uniqueKey),function(e){return e.studyId===n.studyId&&n.sampleId===e.sampleId});return[n.studyId||oe.a.NA,n.patientId||oe.a.NA,n.sampleId||oe.a.NA,void 0===r?"NA":r.value].join("\t")}))).join("\n"))}else n("")})}},{key:"getScatterDownloadData",value:function(){var e=this;return new Promise(function(t){Object(P.a)(e.mutationCountVsFGAData,function(n){t(n?Object(y.v)(n,e.sampleToAnalysisGroup.result,void 0,e.analysisGroupsSettings.groups):"")})})}},{key:"getSurvivalDownloadData",value:function(e){var t=this,n=i.find(this.survivalPlots.result,function(t){return t.id===e.uniqueKey});if(n&&this.survivalData.result){var r=[],o=n.associatedAttrs;r.push(["Study ID","Patient ID"].concat(Se(o)).join("\t"));var a=i.reduce(this.selectedPatients,function(e,t){return e[t.uniquePatientKey]=t,e},{});return this.selectedPatientKeys.result.forEach(function(e){var n=t.survivalData.result[e],s=[];if(n&&n.length>0){s.push(n[0].studyId||oe.a.NA),s.push(n[0].patientId||oe.a.NA);var l=i.keyBy(n,"clinicalAttributeId");i.each(o,function(e){s.push(l[e]&&l[e].value||oe.a.NA)})}else{var u=a[e];u&&(s.push(u.studyId||oe.a.NA),s.push(u.patientId||oe.a.NA),i.each(o,function(e){s.push(oe.a.NA)}))}r.push(s.join("\t"))}),r.join("\n")}return""}},{key:"getMutatedGenesDownloadData",value:function(){return we(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.mutatedGeneTableRowData.result){e.next=8;break}return t=["Gene","MutSig(Q-value)","# Mut","#","Profiled Samples","Freq"],this.oncokbCancerGeneFilterEnabled&&t.push("Is Cancer Gene (source: OncoKB)"),n=[t.join("\t")],i.each(this.mutatedGeneTableRowData.result,function(e){var t=[e.label,void 0===e.qValue?"":Object(y.ab)(e.qValue),e.totalCount,e.numberOfAlteredCases,e.numberOfProfiledCases,Object(y.O)(e.numberOfAlteredCases/e.numberOfProfiledCases*100)];r.oncokbCancerGeneFilterEnabled&&t.push(r.oncokbCancerGeneFilterEnabled?e.isCancerGene?"Yes":"No":"NA"),n.push(t.join("\t"))}),e.abrupt("return",n.join("\n"));case 8:return e.abrupt("return","");case 9:case"end":return e.stop()}},e,this)}))}},{key:"getFusionGenesDownloadData",value:function(){var e=this;if(this.fusionGeneTableRowData.result){var t=["Gene","# Fusion","#","Profiled Samples","Freq"];this.oncokbCancerGeneFilterEnabled&&t.push("Is Cancer Gene (source: OncoKB)");var n=[t.join("\t")];return i.each(this.fusionGeneTableRowData.result,function(t){var r=[t.label,t.totalCount,t.numberOfAlteredCases,t.numberOfProfiledCases,Object(y.O)(t.numberOfAlteredCases/t.numberOfProfiledCases*100)];e.oncokbCancerGeneFilterEnabled&&r.push(e.oncokbCancerGeneFilterEnabled?t.isCancerGene?"Yes":"No":"NA"),n.push(r.join("\t"))}),n.join("\n")}return""}},{key:"getGenesCNADownloadData",value:function(){return we(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.cnaGeneTableRowData.result){e.next=8;break}return t=["Gene","Gistic(Q-value)","Cytoband","CNA","Profiled Samples","#","Freq"],this.oncokbCancerGeneFilterEnabled&&t.push("Is Cancer Gene (source: OncoKB)"),n=[t.join("\t")],i.each(this.cnaGeneTableRowData.result,function(e){var t=[e.label,void 0===e.qValue?"":Object(y.ab)(e.qValue),e.cytoband,Object(y.x)(e.alteration),e.numberOfAlteredCases,e.numberOfProfiledCases,Object(y.O)(e.numberOfAlteredCases/e.numberOfProfiledCases*100)];r.oncokbCancerGeneFilterEnabled&&t.push(r.oncokbCancerGeneFilterEnabled?e.isCancerGene?"Yes":"No":"NA"),n.push(t.join("\t"))}),e.abrupt("return",n.join("\n"));case 8:return e.abrupt("return","");case 9:case"end":return e.stop()}},e,this)}))}},{key:"getDownloadDataPromise",value:function(){return we(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.D)(this.selectedSamples.result);case 2:return t=e.sent,n=i.reduce(this.clinicalAttributes.result,function(e,t){return e[Object(y.fb)(t)]=t.displayName,e},{studyId:"Study ID",patientId:"Patient ID",sampleId:"Sample ID"}),r=i.reduce(this.selectedSamples.result,function(e,r){var o=Object.assign({studyId:r.studyId,patientId:r.patientId,sampleId:r.sampleId},t[r.uniqueSampleKey]||{});return e.push(i.map(Object.keys(n),function(e){return o[e]||oe.a.NA})),e},[i.values(n)]),e.abrupt("return",r.map(function(e){return e.join("\t")}).join("\n"));case 6:case"end":return e.stop()}},e,this)}))}},{key:"onSubmitQuery",value:function(){var e=Object(G.Z)(this.unknownQueriedIds.result),t={cancer_study_list:this.studyIds.filter(function(t){return!e[t]}).join(","),tab_index:"tab_visualize"};if(0===this.filteredVirtualStudies.result.length&&1===this.studyIds.length)this.alterationTypesInOQL.haveMutInQuery&&this.defaultMutationProfile&&(t.genetic_profile_ids_PROFILE_MUTATION_EXTENDED=this.defaultMutationProfile.molecularProfileId),this.alterationTypesInOQL.haveCnaInQuery&&this.defaultCnaProfile&&(t.genetic_profile_ids_PROFILE_COPY_NUMBER_ALTERATION=this.defaultCnaProfile.molecularProfileId),this.alterationTypesInOQL.haveMrnaInQuery&&this.defaultMrnaProfile&&(t.genetic_profile_ids_PROFILE_MRNA_EXPRESSION=this.defaultMrnaProfile.molecularProfileId),this.alterationTypesInOQL.haveProtInQuery&&this.defaultProtProfile&&(t.genetic_profile_ids_PROFILE_PROTEIN_EXPRESSION=this.defaultProtProfile.molecularProfileId);else{var n="0",r={mutation:!i.isEmpty(this.mutationProfiles.result),cna:!i.isEmpty(this.cnaProfiles)},o=r.mutation,a=r.cna;o&&a?n="0":o?n="1":a&&(n="2"),t.data_priority=n}this.chartsAreFiltered?(t.case_set_id="-1",t.case_ids=i.map(this.selectedSamples.result,function(e){return e.studyId+":"+e.sampleId}).join("+")):0===this.filteredVirtualStudies.result.length&&1===this.studyIds.length?t.case_set_id=this.studyIds[0]+"_all":t.case_set_id="all";var s="/";i.isEmpty(this.geneQueries)||(t.Action="Submit",t.gene_list=this.geneQueries.map(function(e){return Object(v.j)(e)}).join("\n"),s="/results"),Object(y.sb)(s,t,"_blank")}},{key:"setCustomChartFilters",value:function(e,t){if(t.length>0){switch(e){case y.g.CANCER_STUDIES:var n=Object(y.K)(this.samples.result.filter(function(e){return t.includes(e.studyId)}));this._chartSampleIdentifiersFilterSet.set(e,n);break;default:var r=i.reduce(this._customChartsSelectedCases.get(e),function(e,n){return t.includes(n.value)&&e.push({studyId:n.studyId,sampleId:n.sampleId}),e},[]);this._chartSampleIdentifiersFilterSet.set(e,r)}this.customChartFilterSet.set(e,t)}else this._chartSampleIdentifiersFilterSet.delete(e),this.customChartFilterSet.delete(e)}},{key:"showAsPieChart",value:function(e,t){Object(y.qb)(this.initialFilters,t,this.samples.result.length)&&(this.changeChartVisibility(e,!0),t>I.d.thresholds.pieToTable||i.includes(I.d.tableAttrs,e)?(this.chartsType.set(e,I.a.TABLE),this.chartsDimension.set(e,this.getTableDimensionByNumberOfRecords(t))):(this.chartsType.set(e,I.a.PIE_CHART),this.chartsDimension.set(e,I.d.layout.dimensions[I.a.PIE_CHART])))}},{key:"getCustomChartDataCount",value:function(e){var t=this,n=e.uniqueKey;return this.customChartsPromises.hasOwnProperty(n)||(this.customChartsPromises[n]=Object(G.T)({await:function(){return[t.selectedSamples]},invoke:function(){return we(t,void 0,void 0,regeneratorRuntime.mark(function e(){var t,r,o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={},r=[],!this._chartSampleIdentifiersFilterSet.has(n)){e.next=8;break}return e.next=5,Object(y.cb)(n,this.filters,this._chartSampleIdentifiersFilterSet.toJS(),this.queriedSampleIdentifiers.result,this.queriedPhysicalStudyIds.result);case 5:r=e.sent,e.next=9;break;case 8:r=this.selectedSamples.result;case 9:return t=i.reduce(r,function(e,t){var r=i.filter(o._customChartsSelectedCases.get(n),function(e){return e.studyId===t.studyId&&e.sampleId===t.sampleId}),a=oe.a.NA;return(r.length>=1?r.map(function(e){return e.value?e.value:a}):[a]).forEach(function(t){e[t]?e[t].count=e[t].count+1:e[t]={value:t,count:1}}),e},t),e.abrupt("return",Promise.resolve(Object(y.E)(i.values(t))));case 11:case"end":return e.stop()}},e,this)}))},default:[]})),this.customChartsPromises[n]}},{key:"getChartTitle",value:function(e,t){var n=0;if(void 0!==this.molecularProfileSampleCountSet.result){switch(e){case I.a.MUTATED_GENES_TABLE:n=this.molecularProfileSampleCountSet.result.mutations?this.molecularProfileSampleCountSet.result.mutations:0;break;case I.a.FUSION_GENES_TABLE:n=this.molecularProfileSampleCountSet.result.fusion?this.molecularProfileSampleCountSet.result.fusion:0;break;case I.a.CNA_GENES_TABLE:n=Object(y.z)(this.molecularProfileSampleCountSet.result)}if(n>0)return"".concat(t," (").concat(n," profiled ").concat(Object(G.S)("sample",n),")")}return t}},{key:"clearPatientTreatmentFilters",value:function(){this._patientTreatmentsFilter={filters:[]}}},{key:"setPatientTreatmentFilters",value:function(e){this._patientTreatmentsFilter=e}},{key:"addPatientTreatmentFilters",value:function(e){this._patientTreatmentsFilter.filters=this._patientTreatmentsFilter.filters.concat(e)}},{key:"clearSampleTreatmentFilters",value:function(){this._sampleTreatmentsFilters={filters:[]}}},{key:"setSampleTreatmentFilters",value:function(e){this._sampleTreatmentsFilters=e}},{key:"addSampleTreatmentFilters",value:function(e){this._sampleTreatmentsFilters.filters=this._sampleTreatmentsFilters.filters.concat(e)}},{key:"setTreatmentFilters",value:function(e){e.patientTreatmentFilters&&i.isArray(e.patientTreatmentFilters.filters)&&this.setPatientTreatmentFilters(e.patientTreatmentFilters),e.sampleTreatmentFilters&&i.isArray(e.sampleTreatmentFilters.filters)&&this.setSampleTreatmentFilters(e.sampleTreatmentFilters)}},{key:"onSampleTreatmentSelection",value:function(e,t){var n=t.map(function(e){return{filters:e.map(function(e){return{treatment:(t=e.split("::"))[0],time:t[1]};var t})}});this.addSampleTreatmentFilters(n)}},{key:"onPatientTreatmentSelection",value:function(e,t){var n=t.map(function(e){return{filters:e.map(function(e){return{treatment:e.split("::")[0]}})}});this.addPatientTreatmentFilters(n)}},{key:"removeSampleTreatmentsFilter",value:function(e,t){var n=this.sampleTreatmentFilters.filters.map(function(n,r){return{filters:n.filters.filter(function(n,o){return!(e===r&&t===o)})}}).filter(function(e){return e.filters.length>0});this.setSampleTreatmentFilters({filters:n})}},{key:"removePatientTreatmentsFilter",value:function(e,t){var n=this.patientTreatmentFilters.filters.map(function(n,r){return{filters:n.filters.filter(function(n,o){return!(e===r&&t===o)})}}).filter(function(e){return e.filters.length>0});this.setPatientTreatmentFilters({filters:n})}},{key:"isLoggedIn",get:function(){return this.appStore.isLoggedIn}},{key:"isSavingUserPreferencePossible",get:function(){return this.isLoggedIn&&this.sessionServiceIsEnabled}},{key:"comparisonConfirmationModal",get:function(){return this._comparisonConfirmationModal}},{key:"genomicProfilesFilter",get:function(){return this._genomicProfilesFilter}},{key:"caseListsFilter",get:function(){return this._caseListsFilter}},{key:"currentTab",get:function(){return this.urlWrapper.tabId}},{key:"initialFilters",get:function(){var e={};i.isEmpty(this.queriedSampleIdentifiers.result)?e.studyIds=this.queriedPhysicalStudyIds.result:e.sampleIdentifiers=this.queriedSampleIdentifiers.result;var t=Object.assign({},Object(u.toJS)(this.initialFiltersQuery),e);return i.isEmpty(t.sampleIdentifiers)||delete t.studyIds,t.patientTreatmentFilters={filters:[]},t.sampleTreatmentFilters={filters:[]},t}},{key:"isInitialFilterState",get:function(){return i.isEqual(Object(u.toJS)(this.initialFilters),Object(u.toJS)(this.filters))}},{key:"containerWidth",get:function(){return this.columns*I.d.layout.grid.w+(this.columns+1)*I.d.layout.gridMargin.x}},{key:"columns",get:function(){return Math.floor((C.a.size.width-40)/(I.d.layout.grid.w+I.d.layout.gridMargin.x))}},{key:"studyViewPageLayoutProps",get:function(){return{cols:this.columns,grid:I.d.layout.grid,gridMargin:I.d.layout.gridMargin,layout:this.currentGridLayout,dimensions:I.d.layout.dimensions}}},{key:"filterMutatedGenesTableByCancerGenes",get:function(){return this.oncokbCancerGeneFilterEnabled&&this._filterMutatedGenesTableByCancerGenes}},{key:"filterFusionGenesTableByCancerGenes",get:function(){return this.oncokbCancerGeneFilterEnabled&&this._filterFusionGenesTableByCancerGenes}},{key:"filterCNAGenesTableByCancerGenes",get:function(){return this.oncokbCancerGeneFilterEnabled&&this._filterCNAGenesTableByCancerGenes}},{key:"filterComparisonGroups",get:function(){return this._filterComparisonGroups}},{key:"selectedGenes",get:function(){return this.geneQueries.map(function(e){return e.gene})}},{key:"alterationTypesInOQL",get:function(){return Object(h.T)(this.geneQueries)}},{key:"defaultProfilesForOql",get:function(){if(this.molecularProfiles.isComplete)return Object(h.V)(this.molecularProfiles.result)}},{key:"defaultMutationProfile",get:function(){return this.defaultProfilesForOql&&this.defaultProfilesForOql[B.a.MUTATION_EXTENDED]}},{key:"defaultCnaProfile",get:function(){return this.defaultProfilesForOql&&this.defaultProfilesForOql[B.a.COPY_NUMBER_ALTERATION]}},{key:"defaultMrnaProfile",get:function(){return this.defaultProfilesForOql&&this.defaultProfilesForOql[B.a.MRNA_EXPRESSION]}},{key:"defaultProtProfile",get:function(){return this.defaultProfilesForOql&&this.defaultProfilesForOql[B.a.PROTEIN_LEVEL]}},{key:"analysisGroupsSettings",get:function(){return{groups:[{value:Oe,color:I.d.colors.theme.unselectedGroup,name:this.chartsAreFiltered?"Selected patients":"All patients"}]}}},{key:"clinicalDataFilters",get:function(){return this._clinicalDataFilterSet.values()}},{key:"geneFilters",get:function(){return i.map(this._geneFilterSet.entries(),function(e){var t=ve(e,2),n=t[0],r=t[1];return{molecularProfileIds:Object(y.U)(n),geneQueries:r}})}},{key:"genomicDataIntervalFilters",get:function(){return this._genomicDataIntervalFilterSet.values()}},{key:"filters",get:function(){var e={},t=this.clinicalDataFilters,n=this.genomicDataIntervalFilters;n.length>0&&(e.genomicDataFilters=n),t.length>0&&(e.clinicalDataFilters=t),this.geneFilters.length>0&&(e.geneFilters=this.geneFilters),this.genomicProfilesFilter.length>0&&(e.genomicProfiles=Object(u.toJS)(this.genomicProfilesFilter)),this.caseListsFilter.length>0&&(e.caseLists=Object(u.toJS)(this.caseListsFilter)),this.sampleTreatmentFilters&&this.sampleTreatmentFilters.filters.length>0?e.sampleTreatmentFilters=this.sampleTreatmentFilters:e.sampleTreatmentFilters={filters:[]},this.patientTreatmentFilters&&this.patientTreatmentFilters.filters.length>0?e.patientTreatmentFilters=this.patientTreatmentFilters:e.patientTreatmentFilters={filters:[]};var r=this._chartSampleIdentifiersFilterSet.values(),o=i.intersectionWith.apply(i,Se(r).concat([function(e,t){return e.sampleId===t.sampleId&&e.studyId===t.studyId}]));return o&&o.length>0?e.sampleIdentifiers=o:i.isEmpty(this.queriedSampleIdentifiers.result)?e.studyIds=this.queriedPhysicalStudyIds.result:e.sampleIdentifiers=this.queriedSampleIdentifiers.result,e}},{key:"userSelections",get:function(){var e=this._chartSampleIdentifiersFilterSet.toJS();return Object.assign(Object.assign({},this.filters),{sampleIdentifiersSet:e})}},{key:"unfilteredAttrsForNonNumerical",get:function(){var e=this;return this.visibleAttributes.filter(function(t){if(void 0!==t.clinicalAttribute&&t.clinicalAttribute.datatype!==y.c.NUMBER){var n=Object(y.fb)(t.clinicalAttribute);return!e._clinicalDataFilterSet.has(n)}return!1}).map(function(e){return{attributeId:e.clinicalAttribute.clinicalAttributeId}})}},{key:"newlyAddedUnfilteredAttrsForNonNumerical",get:function(){var e=this;return this.clinicalAttributes.result.filter(function(t){if(t.datatype!==y.c.NUMBER){var n=Object(y.fb)(t);return!!e.newlyAddedCharts.includes(n)}return!1}).map(function(e){return{attributeId:e.clinicalAttributeId}})}},{key:"newlyAddedUnfilteredAttrsForNumerical",get:function(){var e=this;return this.clinicalAttributes.result.filter(function(t){if(t.datatype===y.c.NUMBER){var n=Object(y.fb)(t);return!!e.newlyAddedCharts.includes(n)}return!1}).map(function(t){return e._clinicalDataBinFilterSet.get(Object(y.fb)(t))})}},{key:"unfilteredAttrsForNumerical",get:function(){var e=this;return this.visibleAttributes.filter(function(t){if(void 0!==t.clinicalAttribute&&t.clinicalAttribute.datatype===y.c.NUMBER){var n=Object(y.fb)(t.clinicalAttribute);return!e._clinicalDataFilterSet.has(n)}return!1}).map(function(t){return e._clinicalDataBinFilterSet.get(Object(y.fb)(t.clinicalAttribute))})}},{key:"isSingleNonVirtualStudyQueried",get:function(){return this.filteredPhysicalStudies.isComplete&&this.filteredVirtualStudies.isComplete&&1===this.filteredPhysicalStudies.result.length&&0===this.filteredVirtualStudies.result.length}},{key:"showOriginStudiesInSummaryDescription",get:function(){return Object(y.rb)(this.filteredPhysicalStudies.result,this.filteredVirtualStudies.result)}},{key:"oncokbCancerGeneFilterEnabled",get:function(){return!!c.b.serverConfig.show_oncokb&&(!this.oncokbCancerGenes.isError&&!this.oncokbGenes.isError)}},{key:"isSingleVirtualStudyPageWithoutFilter",get:function(){return this.filteredPhysicalStudies.result.length+this.filteredVirtualStudies.result.length===1&&this.filteredVirtualStudies.result.length>0&&!this.chartsAreFiltered}},{key:"analysisGroupsPossible",get:function(){var e=this.survivalPlotKeys,t=!1,n=!0,r=!1,o=void 0;try{for(var i,a=this.visibleAttributes[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;if(e.includes(s.uniqueKey)){t=!0;break}}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return t}},{key:"survivalPlotKeys",get:function(){return this.survivalClinicalAttributesPrefix.result?this.survivalClinicalAttributesPrefix.result.map(function(e){return"".concat(e,"_SURVIVAL")}):[]}},{key:"chartMetaSet",get:function(){var e,t=this._customCharts.toJS();if(t=i.merge(t,this._geneSpecificCharts.toJS()),i.reduce(this.clinicalAttributes.result,function(e,t){var n=Object(y.fb)(t);return e[n]={displayName:t.displayName,uniqueKey:n,dataType:Object(y.A)(n),patientAttribute:t.patientAttribute,description:t.description,priority:Object(y.Z)(t),renderWhenDataChange:!1,clinicalAttribute:t},e},t),i.reduce(this.survivalPlots.result,function(e,t){return e[t.id]={uniqueKey:t.id,dataType:Object(y.A)(t.id),patientAttribute:!0,displayName:t.title,priority:I.d.priority[t.id]||Object(y.Z)(t.survivalStatusAttribute),renderWhenDataChange:!1,description:""},e},t),this.displaySampleTreatments.result&&(t.SAMPLE_TREATMENTS={uniqueKey:"SAMPLE_TREATMENTS",dataType:y.a.CLINICAL,patientAttribute:!0,displayName:"Sample Treatments",priority:Object(y.I)(I.a.SAMPLE_TREATMENTS_TABLE),renderWhenDataChange:!0,description:"List of treatments and the corresponding number of samples acquired before treatment or after/on treatment"}),this.displayPatientTreatments.result&&(t.PATIENT_TREATMENTS={uniqueKey:"PATIENT_TREATMENTS",dataType:y.a.CLINICAL,patientAttribute:!0,displayName:"Patient Treatments",priority:Object(y.I)(I.a.PATIENT_TREATMENTS_TABLE),renderWhenDataChange:!0,description:"List of treatments and the corresponding number of patients treated"}),!i.isEmpty(this.mutationProfiles.result)){var n=Object(y.gb)(this.mutationProfiles.result.map(function(e){return e.molecularProfileId}));t[n]={uniqueKey:n,dataType:y.a.GENOMIC,patientAttribute:!1,displayName:"Mutated Genes",priority:Object(y.I)(I.a.MUTATED_GENES_TABLE),renderWhenDataChange:!1,description:""}}if(!i.isEmpty(this.structuralVariantProfiles.result)){var r=Object(y.gb)(this.structuralVariantProfiles.result.map(function(e){return e.molecularProfileId}));t[r]={uniqueKey:r,dataType:y.a.GENOMIC,patientAttribute:!1,displayName:"Fusion Genes",priority:Object(y.I)(I.a.FUSION_GENES_TABLE),renderWhenDataChange:!0,description:""}}if(!i.isEmpty(this.cnaProfiles.result)){var o=Object(y.gb)(this.cnaProfiles.result.map(function(e){return e.molecularProfileId}));t[o]={uniqueKey:o,dataType:y.a.GENOMIC,patientAttribute:!1,displayName:"CNA Genes",renderWhenDataChange:!1,priority:Object(y.I)(I.a.CNA_GENES_TABLE),description:""}}var a=i.reduce(this.clinicalAttributes.result,function(e,t){return y.g.MUTATION_COUNT===t.clinicalAttributeId&&(e[y.g.MUTATION_COUNT]=!0),y.g.FRACTION_GENOME_ALTERED===t.clinicalAttributeId&&(e[y.g.FRACTION_GENOME_ALTERED]=!0),e},(ge(e={},y.g.MUTATION_COUNT,!1),ge(e,y.g.FRACTION_GENOME_ALTERED,!1),e));return a[y.g.MUTATION_COUNT]&&a[y.g.FRACTION_GENOME_ALTERED]&&(t[y.g.MUTATION_COUNT_CNA_FRACTION]={dataType:y.a.GENOMIC,patientAttribute:!1,uniqueKey:y.g.MUTATION_COUNT_CNA_FRACTION,displayName:"Mutation Count vs Fraction of Genome Altered",priority:Object(y.I)(y.g.MUTATION_COUNT_CNA_FRACTION),renderWhenDataChange:!1,description:""}),t}},{key:"chartMetaSetWithChartType",get:function(){var e=this;return i.reduce(this.chartMetaSet,function(t,n){return t[n.uniqueKey]=Object.assign(Object.assign({},n),{chartType:e.chartsType.get(n.uniqueKey)}),t},{})}},{key:"visibleAttributes",get:function(){var e=this;return i.reduce(this._chartVisibility.entries(),function(t,n){var r=ve(n,2),o=r[0];if(r[1]&&e.chartMetaSet[o]){var i=e.chartMetaSet[o];t.push(i)}return t},[])}},{key:"showSettingRestoreMsg",get:function(){return this.isSavingUserPreferencePossible&&!this.hideRestoreSettingsMsg&&this.fetchUserSettings.isComplete&&!i.isEqual(this.previousSettings,i.keyBy(this.fetchUserSettings.result,function(e){return e.id}))}},{key:"isSavingUserSettingsPossible",get:function(){return this.isSavingUserPreferencePossible&&this.fetchUserSettings.isComplete&&(!this.showSettingRestoreMsg||!i.isEqual(this.currentChartSettingsMap,i.keyBy(this.fetchUserSettings.result,function(e){return e.id})))}},{key:"loadingInitialDataForSummaryTab",get:function(){var e=this.defaultVisibleAttributes.isPending||this.clinicalAttributes.isPending||this.mutationProfiles.isPending||this.cnaProfiles.isPending||this.structuralVariantProfiles.isPending||this.survivalClinicalAttributesPrefix.isPending||this.displayPatientTreatments.isPending;return this.clinicalAttributes.isComplete&&!i.isEmpty(this.clinicalAttributes.result)&&(e=e||this.initialVisibleAttributesClinicalDataBinCountData.isPending||this.initialVisibleAttributesClinicalDataCountData.isPending),this._loadUserSettingsInitially&&(e=e||this.fetchUserSettings.isPending),i.isEmpty(this.initialFilters.genomicDataFilters)||(e=e||this.molecularProfileOptions.isPending),i.isEmpty(this.initialFilters.caseLists)||(e=e||this.caseListSampleCounts.isPending),e=e||0===this.selectedSamples.result.length}},{key:"currentChartSettingsMap",get:function(){var e={};return this.isSavingUserPreferencePossible&&(e=Object(y.B)(this.visibleAttributes,this.columns,this.chartsDimension.toJS(),this.chartsType.toJS(),this._customChartMap.toJS(),this._geneSpecificChartMap.toJS(),this._clinicalDataBinFilterSet.toJS(),this._filterMutatedGenesTableByCancerGenes,this._filterFusionGenesTableByCancerGenes,this._filterCNAGenesTableByCancerGenes,this.currentGridLayout)),e}},{key:"showResetToDefaultButton",get:function(){return!i.isEqual(this.currentChartSettingsMap,this.defaultChartSettingsMap)}},{key:"defaultChartSettingsMap",get:function(){var e=this;return Object(y.B)(this._defaultVisibleChartIds.map(function(t){return e.chartMetaSet[t]}),this.columns,this._defualtChartsDimension.toJS(),this._defaultChartsType.toJS(),{},{},this._defaultClinicalDataBinFilterSet.toJS())}},{key:"chartsAreFiltered",get:function(){return Object(y.kb)(this.userSelections)}},{key:"selectedSamplesMap",get:function(){return i.keyBy(this.selectedSamples.result,function(e){return e.uniqueSampleKey})}},{key:"selectedPatients",get:function(){return i.values(i.reduce(this.selectedSamples.result,function(e,t){return e[t.uniquePatientKey]={cancerStudy:{},patientId:t.patientId,uniquePatientKey:t.uniquePatientKey,studyId:t.studyId,uniqueSampleKey:t.uniqueSampleKey},e},{}))}},{key:"molecularProfileMapByType",get:function(){return i.groupBy(this.molecularProfiles.result,function(e){return Object(ue.a)(e)})}},{key:"clinicalDataDownloadFilename",get:function(){return"".concat(this.downloadFilenamePrefix,"clinical_data.tsv")}},{key:"downloadFilenamePrefix",get:function(){return Object(g.a)(this.displayedStudies.result)}},{key:"isMixedReferenceGenome",get:function(){if(this.queriedPhysicalStudies.result)return Object(re.c)(this.queriedPhysicalStudies.result)}},{key:"patientTreatmentFilters",get:function(){return this._patientTreatmentsFilter}},{key:"sampleTreatmentFilters",get:function(){return this._sampleTreatmentsFilters}},{key:"sampleTreatmentFiltersAsStrings",get:function(){return this.sampleTreatmentFilters.filters.map(function(e){return e.filters.map(function(e){return $(e)})})}},{key:"patientTreatmentFiltersAsStrings",get:function(){return this.patientTreatmentFilters.filters.map(function(e){return e.filters.map(function(e){return $(e)})})}}])&&Ce(t.prototype,n),r&&Ce(t,r),e}();Ee([u.observable],Pe.prototype,"showComparisonGroupUI",void 0),Ee([u.computed],Pe.prototype,"isLoggedIn",null),Ee([u.computed],Pe.prototype,"isSavingUserPreferencePossible",null),Ee([u.observable],Pe.prototype,"hideRestoreSettingsMsg",void 0),Ee([b.default],Pe.prototype,"isResourceTabOpen",null),Ee([b.default,u.action],Pe.prototype,"setResourceTabOpen",null),Ee([u.observable.ref],Pe.prototype,"_comparisonConfirmationModal",void 0),Ee([b.default,u.action],Pe.prototype,"setComparisonConfirmationModal",null),Ee([u.action],Pe.prototype,"setComparisonGroupSelected",null),Ee([u.action],Pe.prototype,"toggleComparisonGroupSelected",null),Ee([u.action],Pe.prototype,"toggleComparisonGroupMarkedForDeletion",null),Ee([u.action],Pe.prototype,"deleteMarkedComparisonGroups",null),Ee([u.observable],Pe.prototype,"_pendingChanges",void 0),Ee([u.observable],Pe.prototype,"_comparisonGroupsChangeCount",void 0),Ee([u.action],Pe.prototype,"notifyComparisonGroupsChange",null),Ee([b.default],Pe.prototype,"openComparisonPage",null),Ee([u.observable],Pe.prototype,"initialFiltersQuery",void 0),Ee([u.observable],Pe.prototype,"studyIds",void 0),Ee([u.observable],Pe.prototype,"_genomicProfilesFilter",void 0),Ee([u.observable],Pe.prototype,"_caseListsFilter",void 0),Ee([u.computed.struct],Pe.prototype,"genomicProfilesFilter",null),Ee([u.computed.struct],Pe.prototype,"caseListsFilter",null),Ee([u.action],Pe.prototype,"setGenomicProfilesFilter",null),Ee([u.action],Pe.prototype,"setCaseListsFilter",null),Ee([u.observable],Pe.prototype,"_clinicalDataBinFilterSet",void 0),Ee([u.observable],Pe.prototype,"_genomicDataBinFilterSet",void 0),Ee([u.observable.ref],Pe.prototype,"_geneFilterSet",void 0),Ee([u.observable],Pe.prototype,"_chartVisibility",void 0),Ee([u.observable],Pe.prototype,"geneQueryStr",void 0),Ee([u.observable],Pe.prototype,"geneQueries",void 0),Ee([u.observable],Pe.prototype,"chartsDimension",void 0),Ee([u.observable],Pe.prototype,"chartsType",void 0),Ee([u.observable],Pe.prototype,"sharedGroupSet",void 0),Ee([u.computed],Pe.prototype,"currentTab",null),Ee([u.observable],Pe.prototype,"pageStatusMessages",void 0),Ee([u.action],Pe.prototype,"updateStoreByFilters",null),Ee([u.action],Pe.prototype,"updateStoreFromURL",null),Ee([u.computed],Pe.prototype,"initialFilters",null),Ee([u.computed],Pe.prototype,"isInitialFilterState",null),Ee([u.computed],Pe.prototype,"containerWidth",null),Ee([u.computed],Pe.prototype,"columns",null),Ee([b.default,u.action],Pe.prototype,"updateLayout",null),Ee([u.computed],Pe.prototype,"studyViewPageLayoutProps",null),Ee([b.default,u.action],Pe.prototype,"updateCurrentGridLayout",null),Ee([u.observable.ref],Pe.prototype,"currentGridLayout",void 0),Ee([u.observable],Pe.prototype,"previousSettings",void 0),Ee([u.observable],Pe.prototype,"numberOfSelectedSamplesInCustomSelection",void 0),Ee([u.observable],Pe.prototype,"_filterComparisonGroups",void 0),Ee([u.observable],Pe.prototype,"_filterMutatedGenesTableByCancerGenes",void 0),Ee([u.observable],Pe.prototype,"_filterFusionGenesTableByCancerGenes",void 0),Ee([u.observable],Pe.prototype,"_filterCNAGenesTableByCancerGenes",void 0),Ee([b.default,u.action],Pe.prototype,"updateMutatedGenesTableByCancerGenesFilter",null),Ee([b.default,u.action],Pe.prototype,"updateFusionGenesTableByCancerGenesFilter",null),Ee([b.default,u.action],Pe.prototype,"updateCNAGenesTableByCancerGenesFilter",null),Ee([u.computed],Pe.prototype,"filterMutatedGenesTableByCancerGenes",null),Ee([u.computed],Pe.prototype,"filterFusionGenesTableByCancerGenes",null),Ee([u.computed],Pe.prototype,"filterCNAGenesTableByCancerGenes",null),Ee([u.action],Pe.prototype,"updateComparisonGroupsFilter",null),Ee([u.observable],Pe.prototype,"_customChartMap",void 0),Ee([u.observable],Pe.prototype,"_customCharts",void 0),Ee([u.observable],Pe.prototype,"_geneSpecificChartMap",void 0),Ee([u.observable],Pe.prototype,"_geneSpecificCharts",void 0),Ee([u.observable],Pe.prototype,"_customChartsSelectedCases",void 0),Ee([b.default,u.action],Pe.prototype,"onCheckGene",null),Ee([u.computed],Pe.prototype,"selectedGenes",null),Ee([b.default,u.action],Pe.prototype,"updateSelectedGenes",null),Ee([u.computed],Pe.prototype,"alterationTypesInOQL",null),Ee([u.computed],Pe.prototype,"defaultProfilesForOql",null),Ee([u.computed],Pe.prototype,"defaultMutationProfile",null),Ee([u.computed],Pe.prototype,"defaultCnaProfile",null),Ee([u.computed],Pe.prototype,"defaultMrnaProfile",null),Ee([u.computed],Pe.prototype,"defaultProtProfile",null),Ee([b.default,u.action],Pe.prototype,"clearAllFilters",null),Ee([u.computed],Pe.prototype,"analysisGroupsSettings",null),Ee([u.action],Pe.prototype,"updateClinicalDataIntervalFilters",null),Ee([b.default,u.action],Pe.prototype,"updateClinicalDataFilterByValues",null),Ee([b.default,u.action],Pe.prototype,"updateGenomicDataIntervalFilters",null),Ee([b.default,u.action],Pe.prototype,"updateScatterPlotFilterByValues",null),Ee([b.default,u.action],Pe.prototype,"addGeneFilters",null),Ee([b.default,u.action],Pe.prototype,"updateGenomicDataIntervalFiltersByValues",null),Ee([b.default,u.action],Pe.prototype,"addGenomicProfilesFilter",null),Ee([b.default,u.action],Pe.prototype,"addCaseListsFilter",null),Ee([b.default,u.action],Pe.prototype,"removeGeneFilter",null),Ee([b.default,u.action],Pe.prototype,"resetGeneFilter",null),Ee([b.default,u.action],Pe.prototype,"removeGenomicProfileFilter",null),Ee([b.default,u.action],Pe.prototype,"removeCaseListsFilter",null),Ee([b.default,u.action],Pe.prototype,"updateChartSampleIdentifierFilter",null),Ee([u.action],Pe.prototype,"changeChartVisibility",null),Ee([u.action],Pe.prototype,"resetFilterAndChangeChartVisibility",null),Ee([b.default,u.action],Pe.prototype,"removeComparisonGroupSelectionFilter",null),Ee([b.default,u.action],Pe.prototype,"removeCustomSelectFilter",null),Ee([u.action],Pe.prototype,"toggleLogScale",null),Ee([b.default,u.action],Pe.prototype,"updateCustomBins",null),Ee([u.action],Pe.prototype,"addCharts",null),Ee([u.action],Pe.prototype,"updateChartsVisibility",null),Ee([u.computed],Pe.prototype,"clinicalDataFilters",null),Ee([u.computed],Pe.prototype,"geneFilters",null),Ee([u.computed],Pe.prototype,"genomicDataIntervalFilters",null),Ee([u.computed],Pe.prototype,"filters",null),Ee([u.computed],Pe.prototype,"userSelections",null),Ee([u.computed],Pe.prototype,"unfilteredAttrsForNonNumerical",null),Ee([u.computed],Pe.prototype,"newlyAddedUnfilteredAttrsForNonNumerical",null),Ee([u.computed],Pe.prototype,"newlyAddedUnfilteredAttrsForNumerical",null),Ee([u.computed],Pe.prototype,"unfilteredAttrsForNumerical",null),Ee([b.default,u.action],Pe.prototype,"hideChart",null),Ee([u.computed],Pe.prototype,"isSingleNonVirtualStudyQueried",null),Ee([u.computed],Pe.prototype,"showOriginStudiesInSummaryDescription",null),Ee([u.computed],Pe.prototype,"oncokbCancerGeneFilterEnabled",null),Ee([u.computed],Pe.prototype,"isSingleVirtualStudyPageWithoutFilter",null),Ee([u.computed],Pe.prototype,"analysisGroupsPossible",null),Ee([u.computed],Pe.prototype,"survivalPlotKeys",null),Ee([b.default],Pe.prototype,"isChartNameValid",null),Ee([b.default],Pe.prototype,"getDefaultCustomChartName",null),Ee([b.default,u.action],Pe.prototype,"addCustomChart",null),Ee([b.default,u.action],Pe.prototype,"addGeneSpecificCharts",null),Ee([b.default,u.action],Pe.prototype,"updateCustomSelect",null),Ee([u.computed],Pe.prototype,"chartMetaSet",null),Ee([u.computed],Pe.prototype,"chartMetaSetWithChartType",null),Ee([u.computed],Pe.prototype,"visibleAttributes",null),Ee([u.computed],Pe.prototype,"showSettingRestoreMsg",null),Ee([u.computed],Pe.prototype,"isSavingUserSettingsPossible",null),Ee([u.computed],Pe.prototype,"loadingInitialDataForSummaryTab",null),Ee([u.computed],Pe.prototype,"currentChartSettingsMap",null),Ee([b.default,u.action],Pe.prototype,"clearPageSettings",null),Ee([b.default,u.action],Pe.prototype,"loadUserSettings",null),Ee([b.default,u.action],Pe.prototype,"undoUserSettings",null),Ee([u.observable],Pe.prototype,"_defualtChartsDimension",void 0),Ee([u.observable],Pe.prototype,"_defaultChartsType",void 0),Ee([u.observable],Pe.prototype,"_defaultVisibleChartIds",void 0),Ee([u.observable],Pe.prototype,"_defaultClinicalDataBinFilterSet",void 0),Ee([b.default,u.action],Pe.prototype,"resetToDefaultSettings",null),Ee([u.computed],Pe.prototype,"showResetToDefaultButton",null),Ee([u.computed],Pe.prototype,"defaultChartSettingsMap",null),Ee([b.default,u.action],Pe.prototype,"loadSettings",null),Ee([b.default,u.action],Pe.prototype,"updateChartStats",null),Ee([u.action],Pe.prototype,"initializeChartStatsByClinicalAttributes",null),Ee([b.default,u.action],Pe.prototype,"changeChartType",null),Ee([u.action],Pe.prototype,"initializeClinicalDataCountCharts",null),Ee([u.action],Pe.prototype,"initializeGeneSpecificCharts",null),Ee([u.action],Pe.prototype,"initializeClinicalDataBinCountCharts",null),Ee([u.computed],Pe.prototype,"chartsAreFiltered",null),Ee([u.computed],Pe.prototype,"selectedSamplesMap",null),Ee([u.computed],Pe.prototype,"selectedPatients",null),Ee([u.computed],Pe.prototype,"molecularProfileMapByType",null),Ee([u.computed],Pe.prototype,"clinicalDataDownloadFilename",null),Ee([u.computed],Pe.prototype,"downloadFilenamePrefix",null),Ee([b.default],Pe.prototype,"getDownloadDataPromise",null),Ee([b.default],Pe.prototype,"onSubmitQuery",null),Ee([b.default,u.action],Pe.prototype,"setCustomChartFilters",null),Ee([u.action],Pe.prototype,"showAsPieChart",null),Ee([u.computed],Pe.prototype,"isMixedReferenceGenome",null),Ee([u.observable],Pe.prototype,"_patientTreatmentsFilter",void 0),Ee([u.observable],Pe.prototype,"_sampleTreatmentsFilters",void 0),Ee([u.computed],Pe.prototype,"patientTreatmentFilters",null),Ee([u.computed],Pe.prototype,"sampleTreatmentFilters",null),Ee([u.computed],Pe.prototype,"sampleTreatmentFiltersAsStrings",null),Ee([u.computed],Pe.prototype,"patientTreatmentFiltersAsStrings",null),Ee([u.action],Pe.prototype,"clearPatientTreatmentFilters",null),Ee([u.action],Pe.prototype,"setPatientTreatmentFilters",null),Ee([u.action],Pe.prototype,"addPatientTreatmentFilters",null),Ee([u.action],Pe.prototype,"clearSampleTreatmentFilters",null),Ee([u.action],Pe.prototype,"setSampleTreatmentFilters",null),Ee([u.action],Pe.prototype,"addSampleTreatmentFilters",null),Ee([u.action],Pe.prototype,"setTreatmentFilters",null),Ee([b.default,u.action],Pe.prototype,"onSampleTreatmentSelection",null),Ee([b.default,u.action],Pe.prototype,"onPatientTreatmentSelection",null),Ee([b.default,u.action],Pe.prototype,"removeSampleTreatmentsFilter",null),Ee([b.default,u.action],Pe.prototype,"removePatientTreatmentsFilter",null);var Ae=n(235),Re=n(66),Ne=n(96),De=n(20),je=n(847),xe=n(928);function Me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fe(e,t){return!t||"object"!==qe(t)&&"function"!=typeof t?Le(e):t}function Le(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Be(e){return(Be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ve(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ue(e,t)}function Ue(e,t){return(Ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qe(e){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ke=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":qe(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},He=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},Qe=function(e){function t(){return Ge(this,t),Fe(this,Be(t).apply(this,arguments))}return Ve(t,Ne["b"]),t}(),We=function(e){function t(){var e;return Ge(this,t),(e=Fe(this,Be(t).apply(this,arguments))).columns=Object(G.T)({invoke:function(){return He(Le(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[Object.assign(Object.assign({},this.getDefaultColumnConfig("patientId","Patient ID")),{render:function(e){return r.createElement("a",{href:Object(k.w)(e.studyId,e.patientId),target:"_blank"},e.patientId)}}),Object.assign(Object.assign({},this.getDefaultColumnConfig("sampleId","Sample ID")),{render:function(e){return r.createElement("a",{href:Object(k.y)(e.studyId,e.sampleId),target:"_blank"},e.sampleId)}})],void 0!==i.find(this.props.store.visibleAttributes,function(e){return e.uniqueKey===y.g.CANCER_STUDIES})&&t.push(Object.assign({},this.getDefaultColumnConfig("studyId","Cancer Study"))),e.abrupt("return",i.reduce(this.props.store.visibleAttributes.sort(y.j),function(e,t,r){return void 0!==t.clinicalAttribute&&e.push(Object.assign(Object.assign({},n.getDefaultColumnConfig(Object(y.fb)(t.clinicalAttribute),t.clinicalAttribute.displayName,t.clinicalAttribute.datatype===y.c.NUMBER)),{tooltip:Object(y.C)(t.clinicalAttribute.displayName,t.description?t.description:"",t.clinicalAttribute?t.clinicalAttribute.clinicalAttributeId:void 0)})),e},t));case 3:case"end":return e.stop()}},e,this)}))},default:[]}),e}var n,o,a;return Ve(t,r["Component"]),n=t,(o=[{key:"getDefaultColumnConfig",value:function(e,t,n){return{name:t||"",headerRender:function(e){return r.createElement("span",{"data-test":e},e)},render:function(t){return Object(G.M)(t[e])?r.createElement("a",{href:t[e],target:"_blank"},t[e]):r.createElement("span",{"data-test":t[e]},t[e])},download:function(t){return t[e]||""},sortBy:function(t){return t[e]?n?parseFloat(t[e]):t[e]:null},filter:function(t,n,r){return(t[e]||"").toUpperCase().includes(r)}}}},{key:"getProgressItems",value:function(e){return[{label:"Loading clinical data"+(e>2?" - this can take several seconds":""),promises:[this.props.store.getDataForClinicalDataTab]}]}},{key:"render",value:function(){return r.createElement("span",{"data-test":"clinical-data-tab-content"},r.createElement(xe.a,{offset:60},r.createElement(De.If,{condition:this.columns.isPending||this.props.store.getDataForClinicalDataTab.isPending},r.createElement(De.Then,null,r.createElement(Re.a,{isLoading:this.columns.isPending||this.props.store.getDataForClinicalDataTab.isPending,size:"big",center:!0},r.createElement(je.a,{getItems:this.getProgressItems,show:this.columns.isPending||this.props.store.getDataForClinicalDataTab.isPending}))),r.createElement(De.Else,null,r.createElement(Qe,{initialItemsPerPage:20,showCopyDownload:!0,showColumnVisibility:!1,data:this.props.store.getDataForClinicalDataTab.result||[],columns:this.columns.result,copyDownloadProps:{showCopy:!1,downloadFilename:this.props.store.clinicalDataDownloadFilename}})))))}}])&&Me(n.prototype,o),a&&Me(n,a),t}();Ke([b.default],We.prototype,"getProgressItems",null),We=Ke([s.observer],We);var ze=n(290),Ye=n(923),Je=n(1257),Ze=n.n(Je),Xe=n(1121),$e=n.n(Xe),et=n(1258),tt=n.n(et),nt=n(5),rt=n.n(nt),ot=n(908),it=n(15);function at(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function st(e,t){return!t||"object"!==ct(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lt(e){return(lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ut(e,t){return(ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ct(e){return(ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var pt=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ct(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},dt=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=st(this,lt(t).call(this,e))).binSeparator=",",n.currentBinsValue="",n.props.currentBins&&(n.currentBinsValue=i.sortBy(n.props.currentBins).join("".concat(n.binSeparator," "))),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ut(e,t)}(t,r["Component"]),n=t,(o=[{key:"updateCurrentBinsValue",value:function(){var e=i.sortBy(this.newStringBins.map(function(e){return Number(e.trim())}));this.currentBinsValue=e.join("".concat(this.binSeparator," ")),this.props.updateCustomBins(this.props.chartMeta.uniqueKey,e),this.props.onHide()}},{key:"render",value:function(){var e=this;return r.createElement(it.Modal,{bsSize:"small",show:this.props.show,onHide:this.props.onHide,keyboard:!0},r.createElement(it.Modal.Header,{closeButton:!0},r.createElement(it.Modal.Title,null,"Custom Bins")),r.createElement(it.Modal.Body,null,r.createElement("div",null,"Please specify bin boundaries of the x axis"),r.createElement("textarea",{style:{resize:"none"},rows:5,value:this.currentBinsValue,className:"form-control input-sm",onChange:function(t){return e.currentBinsValue=t.currentTarget.value}}),!this.contentIsValid&&r.createElement("div",{className:"alert alert-danger",role:"alert",style:{marginTop:"10px",marginBottom:"0"}},"Invalid bins")),r.createElement(it.Modal.Footer,null,r.createElement("button",{className:"btn btn-primary btn-sm",onClick:this.updateCurrentBinsValue,disabled:!this.contentIsValid,style:{marginTop:"10px",marginBottom:"0"}},"Update")))}},{key:"newStringBins",get:function(){return this.currentBinsValue.trim().split(this.binSeparator)}},{key:"contentIsValid",get:function(){return Object(y.o)(this.newStringBins)}}])&&at(n.prototype,o),a&&at(n,a),t}();pt([u.observable],dt.prototype,"currentBinsValue",void 0),pt([b.default],dt.prototype,"updateCurrentBinsValue",null),pt([u.computed],dt.prototype,"newStringBins",null),pt([u.computed],dt.prototype,"contentIsValid",null);var ft=dt=pt([s.observer],dt),ht=function(e){var t=e.width,o=e.style,i=e.className;return r.createElement("img",{src:n(1259),className:i||"",style:Object.assign({width:t,border:"1px solid black",padding:2},o||{})})};function mt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yt(e,t){return!t||"object"!==vt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bt(e){return(bt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gt(e,t){return(gt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vt(e){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var St=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":vt(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Ct=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=yt(this,bt(t).apply(this,arguments))).menuOpen=!1,e.downloadSubmenuOpen=!1,e.comparisonSubmenuOpen=!1,e.showCustomBinModal=!1,e.closeMenuTimeout=void 0,e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gt(e,t)}(t,r["Component"]),n=t,(o=[{key:"openMenu",value:function(){this.menuOpen=!0,window.clearTimeout(this.closeMenuTimeout),this.closeMenuTimeout=void 0}},{key:"closeMenu",value:function(){var e=this;this.closeMenuTimeout||(this.closeMenuTimeout=window.setTimeout(function(){e.menuOpen=!1,e.closeMenuTimeout=void 0},125))}},{key:"render",value:function(){return r.createElement("div",{className:rt()($e.a.header,"chartHeader"),style:{position:"relative",height:"".concat(this.props.height,"px"),lineHeight:"".concat(this.props.height,"px")}},r.createElement("div",{className:rt()($e.a.name,$e.a.draggable)},!this.props.hideLabel&&r.createElement("span",{className:"chartTitle"},this.props.title)),this.active&&r.createElement("div",{className:rt()($e.a.controls,"controls")},r.createElement("div",{className:"btn-group"},r.createElement(De.If,{condition:!!this.props.description},r.createElement(G.d,{mouseEnterDelay:0,trigger:["hover"],placement:this.tooltipPosition,align:this.tooltipAlign,overlay:Object(y.C)(this.props.title,this.props.description?this.props.description.description:"",this.props.chartMeta.uniqueKey),destroyTooltipOnHide:!0},r.createElement("div",{className:rt()("btn btn-xs btn-default",$e.a.item)},r.createElement("i",{className:rt()("fa fa-xs fa-fw","fa-info-circle"),"aria-hidden":"true"})))),r.createElement(De.If,{condition:!!this.props.chartMeta.clinicalAttribute||!!this.props.chartMeta.description},r.createElement(G.d,{mouseEnterDelay:0,trigger:["hover"],placement:this.tooltipPosition,align:this.tooltipAlign,overlay:Object(y.C)(this.props.chartMeta.displayName,this.props.chartMeta.description,this.props.chartMeta.clinicalAttribute?this.props.chartMeta.clinicalAttribute.clinicalAttributeId:void 0),destroyTooltipOnHide:!0},r.createElement("div",{className:rt()("btn btn-xs btn-default",$e.a.item)},r.createElement("i",{className:rt()("fa fa-xs fa-fw","fa-info-circle"),"aria-hidden":"true"})))),r.createElement(De.If,{condition:this.props.chartControls&&!!this.props.chartControls.showResetIcon},r.createElement(G.d,{placement:this.tooltipPosition,align:this.tooltipAlign,overlay:r.createElement("span",null,"Reset filters in chart"),destroyTooltipOnHide:!0},r.createElement("button",{className:rt()("btn btn-xs btn-default",$e.a.item),onClick:this.props.resetChart},r.createElement("i",{className:rt()("fa fa-xs fa-fw","fa-undo",$e.a.undo,$e.a.clickable),"aria-hidden":"true"})))),r.createElement(G.d,{placement:this.tooltipPosition,align:this.tooltipAlign,overlay:r.createElement("span",null,"Delete chart")},r.createElement("button",{className:rt()("btn btn-xs btn-default",$e.a.item),onClick:this.props.deleteChart},r.createElement("i",{className:rt()("fa fa-xs fa-fw","fa-times",$e.a.clickable),"aria-hidden":"true"}))),this.menuItems.length>0&&r.createElement("div",{onMouseEnter:this.openMenu,onMouseLeave:this.closeMenu,"data-test":"chart-header-hamburger-icon",className:rt()("dropdown btn-group",{show:this.menuOpen})},r.createElement("button",{className:rt()("btn btn-xs btn-default dropdown-toggle",{active:this.menuOpen})},r.createElement("i",{className:rt()("fa fa-xs fa-fw fa-bars")})),r.createElement("ul",{"data-test":"chart-header-hamburger-icon-menu",className:rt()("dropdown-menu pull-right",{show:this.menuOpen}),style:{width:"190px"}},this.menuItems)))),this.active&&r.createElement("div",{style:{position:"absolute",top:2,right:2}}))}},{key:"fileName",get:function(){return this.props.chartMeta.displayName.replace(/[ \t]/g,"_")}},{key:"active",get:function(){return this.menuOpen||this.props.active}},{key:"comparisonButton",get:function(){var e,t,n,o=this;switch(this.props.chartType){case I.a.BAR_CHART:return r.createElement("div",{className:rt()("dropdown-item",$e.a.dropdownHoverEffect),style:{display:"flex",justifyContent:"space-between",padding:"3px 20px"},onMouseEnter:function(){return o.comparisonSubmenuOpen=!0},onMouseLeave:function(){return o.comparisonSubmenuOpen=!1}},r.createElement("div",{style:{display:"flex",alignItems:"center"}},r.createElement(ht,{className:rt()("fa fa-fw",$e.a.menuItemIcon)}),r.createElement("span",null,"Compare Groups")),r.createElement("i",{className:"fa fa-xs fa-fw fa-caret-right",style:{lineHeight:"inherit"}}),this.comparisonSubmenuOpen&&r.createElement("ul",{className:rt()("dropdown-menu",{show:this.comparisonSubmenuOpen}),style:{top:0,margin:"-6px 0",left:"left"===this.props.placement?-120:"100%",minWidth:120}},r.createElement("li",null,r.createElement("a",{className:"dropdown-item",onClick:function(){o.props.openComparisonPage({categorizationType:y.e.QUARTILES})}},"Quartiles")),r.createElement("li",null,r.createElement("a",{className:"dropdown-item",onClick:function(){o.props.openComparisonPage({categorizationType:y.e.MEDIAN})}},"Median")),r.createElement("li",null,r.createElement("a",{className:"dropdown-item",onClick:function(){return o.props.openComparisonPage({categorizationType:y.e.BINS})}},"Current bins"))));case I.a.MUTATED_GENES_TABLE:case I.a.CNA_GENES_TABLE:case I.a.SAMPLE_TREATMENTS_TABLE:case I.a.PATIENT_TREATMENTS_TABLE:return r.createElement("a",{className:rt()("dropdown-item",(e={},t=$e.a.disabledMenuItem,n=this.props.selectedRowsKeys.length<2,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e)),onClick:function(){o.props.selectedRowsKeys.length>=2&&o.props.openComparisonPage(ye(o.props.selectedRowsKeys,o.props.chartType))},style:{display:"flex",alignItems:"center"}},r.createElement(ht,{className:rt()("fa fa-fw",$e.a.menuItemIcon)}),"Compare Groups");default:return r.createElement("a",{className:"dropdown-item",onClick:function(){return o.props.openComparisonPage({})},style:{display:"flex",alignItems:"center"}},r.createElement(ht,{className:rt()("fa fa-fw",$e.a.menuItemIcon)}),"Compare Groups")}}},{key:"menuItems",get:function(){var e=this,t=[];if(this.props.chartControls&&this.props.chartControls.showLogScaleToggle&&t.push(r.createElement("li",null,r.createElement("a",{className:"dropdown-item logScaleCheckbox",onClick:this.props.toggleLogScale},r.createElement(ot.a,{checked:!(!this.props.chartControls||!this.props.chartControls.logScaleChecked),onClick:this.props.toggleLogScale,label:r.createElement("span",{style:{marginTop:-3}},"Log Scale"),style:{marginTop:1,marginBottom:-3}})))),this.props.chartControls&&this.props.chartControls.showTableIcon&&t.push(r.createElement("li",null,r.createElement("a",{className:"dropdown-item",onClick:function(){return e.props.changeChartType(I.a.TABLE)}},r.createElement("i",{className:rt()("fa fa-xs fa-fw","fa-table",$e.a.menuItemIcon),"aria-hidden":"true"}),"Show Table"))),this.props.chartControls&&this.props.chartControls.showPieIcon&&t.push(r.createElement("li",null,r.createElement("a",{className:"dropdown-item",onClick:function(){return e.props.changeChartType(I.a.PIE_CHART)}},r.createElement("i",{className:rt()("fa fa-xs fa-fw","fa-pie-chart",$e.a.menuItemIcon),"aria-hidden":"true"}),"Show Pie"))),this.props.chartControls&&this.props.chartControls.showComparisonPageIcon&&t.push(r.createElement("li",{style:{position:"relative"}},this.comparisonButton)),this.props.chartType===I.a.BAR_CHART&&t.push(r.createElement("li",null,r.createElement("a",{className:"dropdown-item",onClick:function(){return e.showCustomBinModal=!0}},r.createElement("i",{className:rt()("fa fa-xs fa-fw","fa-bar-chart",$e.a.menuItemIcon),"aria-hidden":"true"}),"Custom Bins"),r.createElement(ft,{show:this.showCustomBinModal,onHide:function(){return e.showCustomBinModal=!1},chartMeta:this.props.chartMeta,currentBins:this.props.store.getCurrentBins(this.props.chartMeta),updateCustomBins:this.props.store.updateCustomBins}))),this.props.chartControls&&this.props.downloadTypes&&this.props.downloadTypes.length>0){t.push(r.createElement("li",{style:{position:"relative"}},r.createElement("div",{className:rt()("dropdown-item",$e.a.dropdownHoverEffect),style:{display:"flex",justifyContent:"space-between",padding:"3px 20px"},onMouseEnter:function(){return e.downloadSubmenuOpen=!0},onMouseLeave:function(){return e.downloadSubmenuOpen=!1}},r.createElement("div",null,r.createElement("i",{className:rt()("fa fa-xs","fa-download",$e.a.menuItemIcon),"aria-hidden":"true"}),r.createElement("span",null,"Download")),r.createElement("i",{className:"fa fa-xs fa-fw fa-caret-right",style:{lineHeight:"inherit"}}),this.downloadSubmenuOpen&&r.createElement(G.e,{filename:this.fileName,buttons:this.props.downloadTypes,getSvg:this.props.getSVG,getData:this.props.getData,type:"dropdown",className:rt()({show:this.downloadSubmenuOpen}),style:{top:0,margin:"-6px 0",left:"left"===this.props.placement?-70:"100%",minWidth:70},dontFade:!0}))))}return t}},{key:"tooltipPosition",get:function(){return"left"==this.props.placement?"topRight":"top"}},{key:"tooltipAlign",get:function(){return"left"==this.props.placement?{offset:[0,-6]}:void 0}}])&&mt(n.prototype,o),i&&mt(n,i),t}();St([u.observable],Ct.prototype,"menuOpen",void 0),St([u.observable],Ct.prototype,"downloadSubmenuOpen",void 0),St([u.observable],Ct.prototype,"comparisonSubmenuOpen",void 0),St([u.observable],Ct.prototype,"showCustomBinModal",void 0),St([u.computed],Ct.prototype,"fileName",null),St([b.default,u.action],Ct.prototype,"openMenu",null),St([b.default,u.action],Ct.prototype,"closeMenu",null),St([u.computed],Ct.prototype,"active",null),St([u.computed],Ct.prototype,"comparisonButton",null),St([u.computed],Ct.prototype,"menuItems",null),St([u.computed],Ct.prototype,"tooltipPosition",null),St([u.computed],Ct.prototype,"tooltipAlign",null),Ct=St([s.observer],Ct);var _t=n(14),Tt=n(172),Et=n(813);function wt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function It(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kt(e,t){return!t||"object"!==Nt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pt(e){return(Pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function At(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rt(e,t)}function Rt(e,t){return(Rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Nt(e){return(Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Dt,jt=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Nt(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},xt=function(e){function t(){return It(this,t),kt(this,Pt(t).apply(this,arguments))}return At(t,Et["a"]),t}();!function(e){e.CATEGORY="Category",e.NUMBER="#",e.FREQ="Freq"}(Dt||(Dt={}));var Mt=function(e){function t(){var e;return It(this,t),(e=kt(this,Pt(t).apply(this,arguments))).sortBy=I.c,e}var n,o,i;return At(t,r["Component"]),n=t,(o=[{key:"onUserSelection",value:function(e){var t=Object(u.toJS)(this.props.filters);a.a.includes(t,e)?t=a.a.filter(t,function(t){return t!==e}):t.push(e),this.props.onUserSelection(t)}},{key:"tooltipLabelMouseEnter",value:function(e){this.props.highlightedRow&&this.props.highlightedRow(e)}},{key:"tooltipLabelMouseLeave",value:function(){this.props.highlightedRow&&this.props.highlightedRow(void 0)}},{key:"addAll",value:function(e){this.props.onUserSelection(e.map(function(e){return e.value}))}},{key:"removeAll",value:function(e){var t=e.map(function(e){return e.value});this.props.onUserSelection(this.props.filters.filter(function(e){return!t.includes(e)}))}},{key:"afterSorting",value:function(e,t){this.sortBy=e,this.sortDirection=t}},{key:"render",value:function(){return r.createElement(xt,{width:this.props.width,height:this.props.height,data:this.props.data||[],columns:this.columns,addAll:this.addAll,removeAll:this.removeAll,numberOfSelectedRows:this.props.filters.length,showAddRemoveAllButton:this.props.showAddRemoveAllButtons,extraButtons:this.extraButtons,sortBy:this.sortBy,sortDirection:this.sortDirection,afterSorting:this.afterSorting})}},{key:"columnsWidth",get:function(){var e,t=Object(y.m)(this.props.width-140);return wt(e={},Dt.CATEGORY,t),wt(e,Dt.NUMBER,80),wt(e,Dt.FREQ,60),e}},{key:"cellMargin",get:function(){var e;return wt(e={},Dt.CATEGORY,0),wt(e,Dt.NUMBER,0===this.props.data.length?0:Object(y.n)((this.columnsWidth[Dt.NUMBER]-10-(Object(y.N)(a.a.max(this.props.data.map(function(e){return e.count})).toLocaleString())+20))/2)),wt(e,Dt.FREQ,0===this.props.data.length?0:Object(y.n)(Object(y.M)(this.columnsWidth[Dt.FREQ],a.a.sortBy(this.props.data,function(e){return e.percentage})[this.props.data.length-1].freq))),e}},{key:"firstColumnName",get:function(){return this.props.label?this.props.label:Dt.CATEGORY}},{key:"columns",get:function(){var e=this;return[{name:this.firstColumnName,render:function(t){return r.createElement("div",{className:q.a.labelContent,onMouseEnter:function(n){e.tooltipLabelMouseEnter(t.value)},onMouseLeave:e.tooltipLabelMouseLeave},r.createElement("svg",{width:"18",height:"12",className:q.a.labelContentSVG},r.createElement("g",null,r.createElement("rect",{x:"0",y:"0",width:"12",height:"12",fill:t.color}))),r.createElement(G.g,{text:t.value}))},headerRender:function(){var t={},n=e.firstColumnName;return e.props.label||(t.opacity=0,n="."),r.createElement(G.g,{style:t,text:n,hideTooltip:!0})},tooltip:Object(y.C)(this.firstColumnName,this.props.labelDescription?this.props.labelDescription:""),filter:function(e,t,n){return e.value.toUpperCase().includes(n)},sortBy:function(e){return e.value},defaultSortDirection:"asc",width:this.columnsWidth[Dt.CATEGORY]},{name:Dt.NUMBER,headerRender:function(){return r.createElement("div",{style:{marginLeft:e.cellMargin[Dt.NUMBER]}},"#")},render:function(t){return r.createElement(Tt.a,{checked:a.a.includes(e.props.filters,t.value),onChange:function(n){return e.onUserSelection(t.value)},labelProps:{style:{display:"flex",justifyContent:"space-between",marginLeft:e.cellMargin[Dt.NUMBER],marginRight:e.cellMargin[Dt.NUMBER]}},inputProps:{className:q.a.autoMarginCheckbox}},t.count.toLocaleString())},tooltip:r.createElement("span",null,"Number of"," ",this.props.patientAttribute?"patients":"samples"),filter:function(e,t){return e.count.toString().includes(t)},sortBy:function(e){return e.count},defaultSortDirection:"desc",width:this.columnsWidth[Dt.NUMBER]},{name:Dt.FREQ,headerRender:function(){return r.createElement("div",{style:{marginLeft:e.cellMargin[Dt.FREQ]}},"Freq")},render:function(t){return r.createElement("span",{style:{flexDirection:"row-reverse",display:"flex",marginRight:e.cellMargin[Dt.FREQ]}},t.freq)},tooltip:r.createElement("span",null,"Percentage of"," ",this.props.patientAttribute?"patients":"samples"),filter:function(e,t){return e.freq.includes(t)},sortBy:function(e){return e.percentage},defaultSortDirection:"desc",width:this.columnsWidth[Dt.FREQ]}]}},{key:"selectedClinicalValues",get:function(){var e=a.a.keyBy(this.props.filters);return this.props.data.filter(function(t){return t.value in e})}},{key:"extraButtons",get:function(){var e=this;return this.props.openComparisonPage?[{content:r.createElement("div",{style:{display:"flex",alignItems:"center"}},r.createElement(ht,{width:16,style:{marginRight:5}}),"Compare"),onClick:this.props.openComparisonPage,isDisabled:function(){return 1===e.selectedClinicalValues.length}}]:[]}}])&&Ot(n.prototype,o),i&&Ot(n,i),t}();Mt.defaultProps={width:300,showAddRemoveAllButtons:!1},jt([u.observable],Mt.prototype,"sortBy",void 0),jt([u.observable],Mt.prototype,"sortDirection",void 0),jt([u.computed],Mt.prototype,"columnsWidth",null),jt([u.computed],Mt.prototype,"cellMargin",null),jt([u.computed],Mt.prototype,"firstColumnName",null),jt([u.computed],Mt.prototype,"columns",null),jt([b.default],Mt.prototype,"onUserSelection",null),jt([b.default],Mt.prototype,"tooltipLabelMouseEnter",null),jt([b.default],Mt.prototype,"tooltipLabelMouseLeave",null),jt([b.default],Mt.prototype,"addAll",null),jt([b.default],Mt.prototype,"removeAll",null),jt([b.default,u.action],Mt.prototype,"afterSorting",null),jt([u.computed],Mt.prototype,"selectedClinicalValues",null),jt([u.computed],Mt.prototype,"extraButtons",null);var Gt=Mt=jt([s.observer],Mt),Ft=n(16),Lt=n(50);function Bt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ut(e,t,n){return t&&Vt(e.prototype,t),n&&Vt(e,n),e}function qt(e,t){return!t||"object"!==Wt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Kt(e){return(Kt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ht(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qt(e,t)}function Qt(e,t){return(Qt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wt(e){return(Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var zt=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Wt(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Yt=function(e){function t(e){var n;return Bt(this,t),(n=qt(this,Kt(t).call(this,e))).isTooltipHovered=!1,n.tooltipHighlightedRow=void 0,n}return Ht(t,r["Component"]),Ut(t,[{key:"onUserSelection",value:function(e){var t=Object(u.toJS)(this.filters);a.a.includes(t,e)?t=a.a.filter(t,function(t){return t!==e}):t.push(e),this.props.onUserSelection(t)}},{key:"highlightedRow",value:function(e){this.tooltipHighlightedRow=e}},{key:"downloadData",value:function(){return this.props.data.map(function(e){return e.value+"\t"+e.count}).join("\n")}},{key:"toSVGDOMNode",value:function(){return Object(y.tb)(this.svg,{legendGroupSelector:".studyViewPieChartLegend",chartGroupSelector:".studyViewPieChartGroup",centerLegend:!0})}},{key:"x",value:function(e){return e.value}},{key:"y",value:function(e){return e.count}},{key:"label",value:function(e){return e.count/this.totalCount>.5?e.count.toLocaleString():this.maxLength(e.count/this.totalCount,this.pieSliceRadius/3)<Object(G.K)(e.count.toLocaleString(),G.a.axis.style.tickLabels.fontFamily,"".concat(G.a.axis.style.tickLabels.fontSize,"px"))?"":e.count.toLocaleString()}},{key:"maxLength",value:function(e,t){return Math.abs(Math.tan(Math.PI*e/2))*t*2}},{key:"render",value:function(){var e=this;return r.createElement(G.d,{placement:this.props.placement,overlay:r.createElement(Gt,{width:300,height:150,openComparisonPage:this.props.openComparisonPage,data:this.props.data,label:this.props.label,labelDescription:this.props.labelDescription,patientAttribute:this.props.patientAttribute,showAddRemoveAllButtons:!0,filters:this.filters,highlightedRow:this.highlightedRow,onUserSelection:this.props.onUserSelection}),destroyTooltipOnHide:!0,trigger:["hover"]},r.createElement("svg",{width:this.props.width,height:this.props.height,ref:function(t){return e.svg=t}},this.victoryPie,this.victoryLegend))}},{key:"filters",get:function(){var e=a.a.reduce(this.props.data,function(e,t){return e[t.value.toLowerCase()]=t.value,e},{});return this.props.filters.map(function(t){return e[t.toLowerCase()]||t})}},{key:"userEvents",get:function(){return[{target:"data",eventHandlers:this.pieSliceOnClickEventHandlers},{target:"labels",eventHandlers:this.pieSliceOnClickEventHandlers}]}},{key:"pieSliceOnClickEventHandlers",get:function(){var e=this;return{onClick:function(){return[{target:"data",mutation:function(t){e.onUserSelection(t.datum.value)}}]}}}},{key:"totalCount",get:function(){return a.a.sumBy(this.props.data,function(e){return e.count})}},{key:"fill",get:function(){var e=this;return function(t){return a.a.isEmpty(e.filters)||a.a.includes(e.filters,t.value)?t.color:Ft.m}}},{key:"stroke",get:function(){var e=this;return function(t){return!a.a.isEmpty(e.filters)&&a.a.includes(e.filters,t.value)?"#cccccc":null}}},{key:"strokeWidth",get:function(){var e=this;return function(t){return!a.a.isEmpty(e.filters)&&a.a.includes(e.filters,t.value)?3:0}}},{key:"fillOpacity",get:function(){var e=this;return function(t){return a.a.isEmpty(e.filters)||a.a.includes(e.filters,t.value)?1:"0.5"}}},{key:"chartSize",get:function(){return Math.min(this.props.width,this.props.height)}},{key:"pieSliceRadius",get:function(){return(this.props.width>this.props.height?this.props.height:this.props.width)/2-I.d.thresholds.piePadding}},{key:"victoryPie",get:function(){return r.createElement(_t.VictoryPie,{standalone:!1,theme:G.a,containerComponent:r.createElement(_t.VictoryContainer,{responsive:!1}),groupComponent:r.createElement("g",{className:"studyViewPieChartGroup",transform:"translate(0, -12)"}),width:this.props.width,height:this.chartSize,labelRadius:this.pieSliceRadius/3,radius:this.pieSliceRadius,labels:this.label,data:this.props.data,dataComponent:r.createElement(Zt,null),labelComponent:r.createElement(_t.VictoryLabel,null),events:this.userEvents,style:{data:{fill:Object(Lt.a)(this.fill,"#cccccc"),stroke:Object(Lt.a)(this.stroke,"0x000000"),strokeWidth:Object(Lt.a)(this.strokeWidth,0),fillOpacity:Object(Lt.a)(this.fillOpacity,1),cursor:"pointer"},labels:{fill:"white",cursor:"pointer"}},x:this.x,y:this.y})}},{key:"victoryLegend",get:function(){var e=this,t=this.props.data.map(function(t){return{name:"".concat(t.value,": ").concat(t.count," (").concat(Object(y.O)(100*t.count/e.totalCount),")")}}),n=this.props.data.map(function(e){return e.color}),o=a.a.cloneDeep(G.a);return o.legend.style.data={type:"square",size:5,strokeWidth:0,stroke:"black"},r.createElement(_t.VictoryLegend,{standalone:!1,theme:o,colorScale:n,x:0,y:this.props.height+1,rowGutter:-10,title:this.props.label||"Legend",centerTitle:!0,style:{title:{fontWeight:"bold"}},data:t,groupComponent:r.createElement("g",{className:"studyViewPieChartLegend"})})}}]),t}();zt([u.computed],Yt.prototype,"filters",null),zt([b.default],Yt.prototype,"onUserSelection",null),zt([u.observable],Yt.prototype,"isTooltipHovered",void 0),zt([u.observable],Yt.prototype,"tooltipHighlightedRow",void 0),zt([b.default,u.action],Yt.prototype,"highlightedRow",null),zt([u.computed],Yt.prototype,"totalCount",null),zt([u.computed],Yt.prototype,"fill",null),zt([u.computed],Yt.prototype,"stroke",null),zt([u.computed],Yt.prototype,"strokeWidth",null),zt([u.computed],Yt.prototype,"fillOpacity",null),zt([b.default],Yt.prototype,"x",null),zt([b.default],Yt.prototype,"y",null),zt([b.default],Yt.prototype,"label",null),zt([u.computed],Yt.prototype,"chartSize",null),zt([u.computed],Yt.prototype,"pieSliceRadius",null),zt([u.computed],Yt.prototype,"victoryPie",null),zt([u.computed],Yt.prototype,"victoryLegend",null);var Jt=Yt=zt([s.observer],Yt),Zt=function(e){function t(){return Bt(this,t),qt(this,Kt(t).apply(this,arguments))}return Ht(t,r["Component"]),Ut(t,[{key:"render",value:function(){var e=this.props;return r.createElement("g",null,r.createElement(_t.Slice,this.props),r.createElement("title",null,"".concat(e.datum.value,":").concat(e.datum.count)))}}]),t}(),Xt=n(915);function $t(e){return($t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function en(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tn(e,t){return!t||"object"!==$t(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nn(e){return(nn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rn(e,t){return(rn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var on=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),tn(this,nn(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rn(e,t)}(t,_t["VictoryLabel"]),n=t,(o=[{key:"renderElements",value:function(e,t){var n=e.datum,o=e.active,i=e.inline,a=e.className,s=e.title,l=e.desc,u=e.events,c=this.getStyles(e),p=this.getHeight(e,"lineHeight"),d=e.textAnchor?_t.Helpers.evaluateProp(e.textAnchor,n,o):"start",f=e.dx?_t.Helpers.evaluateProp(e.dx,n,o):0,h=this.getDy(e,c,t,p),m=this.getTransform(e,c),y=void 0!==e.x?e.x:this.getPosition(e,"x"),b=void 0!==e.y?e.y:this.getPosition(e,"y"),g={x:i?void 0:e.x,dx:f,textAnchor:c[0].textAnchor||d,style:c[0],key:c[0].textAnchor||d},v=[];return t.length>1?(v.push(r.createElement("tspan",g,t[0])),v.push(r.createElement("tspan",{dy:-c[0].fontSize/2,style:Object.assign(Object.assign({},c[0]),{fontSize:.7*c[0].fontSize})},t[1]))):v.push(r.createElement("tspan",g,t[0])),r.cloneElement(e.textComponent,{dx:f,dy:h,x:y,y:b,events:u,transform:m,className:a,title:s,desc:l},v)}}])&&en(n.prototype,o),i&&en(n,i),t}(),an=n(965),sn=n(23),ln=n.n(sn);function un(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function cn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pn(e,t){return!t||"object"!==hn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dn(e){return(dn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fn(e,t){return(fn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hn(e){return(hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var mn=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":hn(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};var yn,bn=((yn=a.a.cloneDeep(G.a)).axis.style.tickLabels.fontSize*=.85,yn),gn=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=pn(this,dn(t).call(this,e))).mousePosition={x:0,y:0},n.currentBarIndex=-1,n.toolTipModel=null,n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fn(e,t)}(t,r["Component"]),n=t,(o=[{key:"onSelection",value:function(e,t,n){var r=a.a.flatten(e.map(function(e){return e.data.map(function(e){return e.dataBin})}));this.props.onUserSelection(r)}},{key:"isDataBinSelected",value:function(e,t){return a.a.some(t,function(t){return void 0!==t.start&&void 0!==t.end?t.start<=e.start&&t.end>=e.end:void 0!==t.start&&void 0===t.end?e.start>=t.start:void 0===t.start&&void 0!==t.end?e.end<=t.end:void 0!==t.value&&t.value===e.specialValue})}},{key:"toSVGDOMNode",value:function(){return this.svgContainer.firstChild}},{key:"onMouseMove",value:function(e){this.mousePosition={x:e.pageX,y:e.pageY}}},{key:"render",value:function(){var e=this;return r.createElement("div",{onMouseMove:this.onMouseMove},this.barData.length>0&&r.createElement(_t.VictoryChart,{containerComponent:r.createElement(_t.VictorySelectionContainer,{containerRef:function(t){return e.svgContainer=t},selectionDimension:"x",onSelection:this.onSelection}),style:{parent:{width:this.props.width,height:this.props.height}},height:this.props.height-this.bottomPadding,padding:{left:40,right:20,top:10,bottom:this.bottomPadding},theme:bn},r.createElement(_t.VictoryAxis,{tickValues:this.tickValues,tickFormat:function(t){return e.tickFormat[t-1]},domain:[0,this.tickValues[this.tickValues.length-1]+1],tickLabelComponent:r.createElement(on,null),style:{tickLabels:{angle:50,verticalAnchor:"start",textAnchor:"start"}}}),r.createElement(_t.VictoryAxis,{dependentAxis:!0,tickFormat:function(e){return Number.isInteger(e)?e.toFixed(0):""}}),r.createElement(_t.VictoryBar,{barRatio:this.barRatio,style:{data:{fill:function(t){return e.isDataBinSelected(t.dataBin,e.props.filters)||0===e.props.filters.length?I.d.colors.theme.primary:Ft.m}}},data:this.barData,events:this.barPlotEvents})),ln.a.createPortal(r.createElement(an.c,{mousePosition:this.mousePosition,windowWidth:C.a.size.width,model:this.toolTipModel,totalBars:this.barData.length,currentBarIndex:this.currentBarIndex}),document.body))}},{key:"numericalBins",get:function(){return Object(y.q)(this.props.data)}},{key:"categoryBins",get:function(){return Object(y.p)(this.props.data)}},{key:"numericalData",get:function(){return Object(y.u)(this.numericalBins)}},{key:"categoricalData",get:function(){return Object(y.t)(this.categoryBins,this.numericalTickFormat.length)}},{key:"numericalTickFormat",get:function(){return Object(y.r)(this.numericalBins).map(function(e){return e.includes("^")?e.split("^"):e})}},{key:"barData",get:function(){return[].concat(un(this.numericalData),un(this.categoricalData))}},{key:"categories",get:function(){return this.categoryBins.map(function(e){return void 0===e.specialValue?"".concat(e.start):e.specialValue})}},{key:"tickValues",get:function(){for(var e=[],t=1;t<=this.numericalTickFormat.length+this.categories.length;t++)e.push(t);return e}},{key:"tickFormat",get:function(){return[].concat(un(this.numericalTickFormat),un(this.categories))}},{key:"bottomPadding",get:function(){return Object(G.y)(bn.axis.style.tickLabels.fontFamily,bn.axis.style.tickLabels.fontSize,this.tickFormat,50,40,10)}},{key:"barRatio",get:function(){return(Object(y.nb)(this.numericalBins)?this.barData.length/(this.barData.length+1):1)*I.d.thresholds.barRatio}},{key:"barPlotEvents",get:function(){var e=this;return[{target:"data",eventHandlers:{onMouseEnter:function(){return[{target:"data",mutation:function(t){e.currentBarIndex=t.datum.eventKey,e.toolTipModel={start:e.barData[e.currentBarIndex].dataBin.start,end:e.barData[e.currentBarIndex].dataBin.end,special:e.barData[e.currentBarIndex].dataBin.specialValue,sampleCount:t.datum.y}}}]},onMouseLeave:function(){return[{target:"data",mutation:function(){e.toolTipModel=null}}]}}}]}}])&&cn(n.prototype,o),i&&cn(n,i),t}();mn([u.observable.ref],gn.prototype,"mousePosition",void 0),mn([u.observable],gn.prototype,"currentBarIndex",void 0),mn([u.observable],gn.prototype,"toolTipModel",void 0),mn([b.default],gn.prototype,"onSelection",null),mn([u.computed],gn.prototype,"numericalBins",null),mn([u.computed],gn.prototype,"categoryBins",null),mn([u.computed],gn.prototype,"numericalData",null),mn([u.computed],gn.prototype,"categoricalData",null),mn([u.computed],gn.prototype,"numericalTickFormat",null),mn([u.computed],gn.prototype,"barData",null),mn([u.computed],gn.prototype,"categories",null),mn([u.computed],gn.prototype,"tickValues",null),mn([u.computed],gn.prototype,"tickFormat",null),mn([u.computed],gn.prototype,"bottomPadding",null),mn([u.computed],gn.prototype,"barRatio",null),mn([b.default],gn.prototype,"onMouseMove",null);var vn=gn=mn([s.observer],gn),Sn=n(825);function Cn(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var _n=n(103),Tn=n(282);function En(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wn(e){return(wn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function On(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function In(e,t){return(In=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kn(e){return(kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Pn=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":kn(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},An=function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(r=wn(t).apply(this,arguments))||"object"!==kn(r)&&"function"!=typeof r?On(n):r).tooltipModel=null,e.pointHovered=!1,e.mouseIsDown=!1,e.mouseEvents=Object(G.Q)(On(e)),e.xAxis=null,e.yAxis=null,e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&In(e,t)}(t,r["Component"]),n=t,(o=[{key:"containerRef",value:function(e){this.container=e}},{key:"svgRef",value:function(e){this.svg=e,this.props.svgRef&&this.props.svgRef(this.svg)}},{key:"toSVGDOMNode",value:function(){return this.svg}},{key:"tickFormat",value:function(e,t,n){return Object(_n.a)(e,n)}},{key:"onMouseDown",value:function(){this.mouseIsDown=!0}},{key:"onMouseUp",value:function(){this.mouseIsDown=!1}},{key:"onSelection",value:function(e,t){if(this.xAxis&&this.yAxis){var n=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY,a=!0,s=!1,l=void 0;try{for(var u,c=e[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var p=u.value,d=!0,f=!1,h=void 0;try{for(var m,y=p.data[Symbol.iterator]();!(d=(m=y.next()).done);d=!0){var b=m.value;n=Math.min(n,b.x),r=Math.min(r,b.y),o=Math.max(o,b.x),i=Math.max(i,b.y)}}catch(e){f=!0,h=e}finally{try{d||null==y.return||y.return()}finally{if(f)throw h}}}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}o+=this.props.xBinSize,i+=this.props.yBinSize,Math.abs(i-this.dataDomain.y[1])<5e-5&&(i+=1),Math.abs(o-1)<5e-5&&(o+=1),n=+n.toFixed(2),o=+o.toFixed(2),r=+r.toFixed(2),i=+i.toFixed(2),this.props.onSelection({xStart:n,xEnd:o,yStart:r,yEnd:i})}}},{key:"isSelected",value:function(e){if(this.props.selectionBounds){var t=this.props.selectionBounds,n=!0,r=!0;return void 0!==t.xStart&&void 0!==t.xEnd?n=e.binX>=t.xStart&&e.binX<t.xEnd:void 0!==t.xEnd?n=e.binX<t.xEnd:void 0!==t.xStart&&(n=e.binX>=t.xStart),void 0!==t.yStart&&void 0!==t.yEnd?r=e.binY>=t.yStart&&e.binY<t.yEnd:void 0!==t.yEnd?r=e.binY<t.yEnd:void 0!==t.yStart&&(r=e.binY>=t.yStart),n&&r}return!0}},{key:"xAxisRef",value:function(e){this.xAxis=e}},{key:"yAxisRef",value:function(e){this.yAxis=e}},{key:"render",value:function(){var e=this;return r.createElement("div",null,r.createElement("div",{style:{width:this.props.width,height:this.props.height,position:"relative"},ref:this.containerRef,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp},r.createElement(_t.VictoryChart,{theme:G.a,containerComponent:r.createElement(G.r,{onSelection:this.onSelection,containerRef:function(t){t&&e.svgRef(t.firstChild)},legend:this.legend&&this.legend.legend,gradient:this.legend&&this.legend.gradient}),width:this.props.width,height:this.props.height,standalone:!0,domainPadding:15,singleQuadrantDomainPadding:!1},this.title,r.createElement(_t.VictoryAxis,{ref:this.xAxisRef,domain:this.plotDomain.x,orientation:"bottom",offsetY:50,crossAxis:!1,tickCount:8,tickFormat:this.tickFormat,axisLabelComponent:r.createElement(_t.VictoryLabel,{dy:20}),label:this.props.axisLabelX}),r.createElement(_t.VictoryAxis,{ref:this.yAxisRef,domain:this.plotDomain.y,orientation:"left",offsetX:50,crossAxis:!1,tickCount:8,tickFormat:this.tickFormat,dependentAxis:!0,axisLabelComponent:r.createElement(_t.VictoryLabel,{dy:-27}),label:this.props.axisLabelY}),this.scatters),r.createElement("span",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(255,255,255,0.8)",display:this.props.isLoading?"block":"none"}}),r.createElement(Re.a,{isLoading:!!this.props.isLoading,style:{position:"absolute",top:"50%",left:"50%",marginLeft:-10}})),this.tooltipModel&&this.props.tooltip&&!this.mouseIsDown&&r.createElement(G.l,{container:this.container,targetHovered:this.pointHovered,targetCoords:{x:this.tooltipModel.x,y:this.tooltipModel.y},overlay:this.props.tooltip(this.tooltipModel.datum)}))}},{key:"title",get:function(){return this.props.title?r.createElement(_t.VictoryLabel,{style:{fontWeight:"bold",textAnchor:"middle"},x:this.props.width/2,y:"1.2em",text:this.props.title}):null}},{key:"plotDomain",get:function(){return{x:[0,1],y:[0,Math.max(this.props.yBinsMin,this.dataDomain.y[1])]}}},{key:"dataDomain",get:function(){var e={x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY},t={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},n=!0,r=!1,o=void 0;try{for(var i,a=this.data[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;e.x=Math.max(s.x+this.props.xBinSize,e.x),e.y=Math.max(s.y+this.props.yBinSize,e.y),t.x=Math.min(s.x,t.x),t.y=Math.min(s.y,t.y)}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return{x:[0,1],y:[0,e.y]}}},{key:"data",get:function(){return this.props.data.map(function(e){return Object.assign({},e,{x:e.binX,y:e.binY})})}},{key:"plotComputations",get:function(){var e=Number.NEGATIVE_INFINITY,t=Number.POSITIVE_INFINITY,n=[],r=[],o=!0,i=!1,s=void 0;try{for(var l,u=this.data[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;this.isSelected(c)?n.push(c):r.push(c)}}catch(e){i=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(i)throw s}}var p=a.a.groupBy(n,function(n){var r=n.count;return e=Math.max(r,e),t=Math.min(r,t),r}),d=a.a.groupBy(r,function(n){var r=n.count;return e=Math.max(r,e),t=Math.min(r,t),r});t===e&&(t=1);var f,h,m,y=Math.log(e),b=Math.log(t);return t===e?(f=function(){return 0},m=function(){return Object(Tn.a)(0)},h=null):(f=function(e){return(Math.log(e)-b)/(y-b)},h=function(e){return Math.exp(e*(y-b)/.75+b)},m=function(e){return Object(Tn.a)(.75*e)}),{selectedDataByAreaCount:p,unselectedDataByAreaCount:d,colorCoordToCount:h,colorCoordMax:.75,countToSelectedColor:function(e){return m(f(e))},countToUnselectedColor:function(e){return"rgb(200,200,200)"},colorCoordToColor:m,countMax:e,countMin:t}}},{key:"scatters",get:function(){var e=this;if(0===this.data.length)return[];for(var t=[],n=[{dataByAreaCount:this.plotComputations.selectedDataByAreaCount,countToColor:this.plotComputations.countToSelectedColor,size:3},{dataByAreaCount:this.plotComputations.unselectedDataByAreaCount,countToColor:this.plotComputations.countToUnselectedColor,size:2.5}],o=function(){var n=s[i];a.a.forEach(n.dataByAreaCount,function(o,i){var a=n.countToColor(parseInt(i,10));t.push(r.createElement(_t.VictoryScatter,{key:"".concat(i),style:{data:{fill:a,stroke:"black",strokeWidth:1,strokeOpacity:0}},size:n.size,symbol:"circle",data:o,events:e.mouseEvents}))})},i=0,s=n;i<s.length;i++)o();return t}},{key:"legend",get:function(){var e=this.plotComputations.colorCoordToCount;if(e){for(var t=[],n=0;n<30;n++)t.push(r.createElement("stop",{offset:"".concat((n/30*100).toFixed(0),"%"),stopColor:this.plotComputations.colorCoordToColor(n/30)}));var o=r.createElement("linearGradient",{id:"legendGradient",key:"legendGradient",x1:"0",y1:"1",x2:"0",y2:"0"},t),i=this.props.width-45,a=this.plotComputations.countMax-this.plotComputations.countMin>=2,s=a?68:38,l=r.createElement("rect",{fill:"url(#".concat("legendGradient",")"),x:i,y:70,width:10,height:s}),u=[r.createElement("text",{fontSize:11,x:i+10+4,y:70,dy:"1em"},this.plotComputations.countMax.toLocaleString()),r.createElement("text",{fontSize:11,x:i+10+4,y:70+s,dy:"-0.3em"},this.plotComputations.countMin.toLocaleString())];a&&u.push(r.createElement("text",{fontSize:11,x:i+10+4,y:70+s/2,dy:"0.3em"},Math.round(e(.5)).toLocaleString()));var c=r.createElement("text",{fontSize:11,x:i,y:70,dy:"-0.5em",dx:"-12px"},"# samples");return{gradient:o,legend:r.createElement("g",null,c,l,u)}}return null}}])&&En(n.prototype,o),i&&En(n,i),t}();Pn([u.observable],An.prototype,"tooltipModel",void 0),Pn([u.observable],An.prototype,"pointHovered",void 0),Pn([u.observable],An.prototype,"mouseIsDown",void 0),Pn([u.observable.ref],An.prototype,"container",void 0),Pn([b.default],An.prototype,"containerRef",null),Pn([b.default],An.prototype,"svgRef",null),Pn([u.computed],An.prototype,"plotDomain",null),Pn([u.computed],An.prototype,"dataDomain",null),Pn([b.default],An.prototype,"tickFormat",null),Pn([b.default],An.prototype,"onMouseDown",null),Pn([b.default],An.prototype,"onMouseUp",null),Pn([b.default],An.prototype,"onSelection",null),Pn([u.computed],An.prototype,"data",null),Pn([u.computed],An.prototype,"plotComputations",null),Pn([u.computed],An.prototype,"scatters",null),Pn([u.computed],An.prototype,"legend",null),Pn([b.default],An.prototype,"xAxisRef",null),Pn([b.default],An.prototype,"yAxisRef",null);var Rn=An=Pn([s.observer],An),Nn=n(850),Dn=n(949),jn=n(857);function xn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mn(e,t){return!t||"object"!==Ln(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gn(e){return(Gn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fn(e,t){return(Fn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ln(e){return(Ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Bn,Vn=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Ln(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Un=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Mn(this,Gn(t).apply(this,arguments))).isVisible=!1,e}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fn(e,t)}(t,r["Component"]),n=t,(o=[{key:"onVisibleChange",value:function(e){this.isVisible=e}},{key:"render",value:function(){var e=this,t=i.includes(this.props.selectedGenes,this.props.hugoGeneSymbol);return r.createElement(G.d,{placement:"left",disabled:!this.props.isCancerGene,overlay:Object(F.e)(this.props.hugoGeneSymbol,t,this.props.isCancerGene,this.props.oncokbAnnotated,this.props.isOncogene,this.props.isTumorSuppressorGene),destroyTooltipOnHide:!0},r.createElement("div",{className:rt()(q.a.geneSymbol,q.a.displayFlex),onMouseEnter:function(){return e.onVisibleChange(!0)},onMouseLeave:function(){return e.onVisibleChange(!1)},onClick:function(){return e.props.onGeneSelect(e.props.hugoGeneSymbol)}},r.createElement(G.g,{text:this.props.hugoGeneSymbol,hideTooltip:this.props.isCancerGene}),r.createElement("span",{style:{marginLeft:5}},r.createElement(De.If,{condition:t},r.createElement(De.Then,null,r.createElement("i",{className:"fa fa-check-square-o"})),r.createElement(De.Else,null,r.createElement(De.If,{condition:this.isVisible},r.createElement("i",{className:"fa fa-square-o"}))))),r.createElement(De.If,{condition:!i.isUndefined(this.props.qValue)},r.createElement("span",{style:{marginLeft:2,marginTop:2}},r.createElement(De.If,{condition:this.props.tableType===F.a.MUTATION},r.createElement(De.Then,null,r.createElement(jn.a,{qValue:this.props.qValue})),r.createElement(De.Else,null,r.createElement(Dn.a,{qValue:this.props.qValue})))))))}}])&&xn(n.prototype,o),a&&xn(n,a),t}();function qn(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Kn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qn(e,t){return!t||"object"!==Zn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Wn(e){return(Wn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yn(e,t)}function Yn(e,t){return(Yn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Jn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zn(e){return(Zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Vn([u.observable],Un.prototype,"isVisible",void 0),Vn([b.default,u.action],Un.prototype,"onVisibleChange",null),Un=Vn([s.observer],Un);var Xn,$n=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Zn(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};!function(e){e.GENE="Gene",e.MOLECULAR_PROFILE="Molecular Profile",e.CASE_LIST="Name",e.NUMBER_FUSIONS="# Fusion",e.NUMBER_MUTATIONS="# Mut",e.CYTOBAND="Cytoband",e.CNA="CNA",e.NUMBER="#",e.FREQ="Freq"}(Xn||(Xn={}));var er=(Jn(Bn={},Xn.GENE,.35),Jn(Bn,Xn.MOLECULAR_PROFILE,.6),Jn(Bn,Xn.CASE_LIST,.6),Jn(Bn,Xn.NUMBER_MUTATIONS,.25),Jn(Bn,Xn.NUMBER_FUSIONS,.25),Jn(Bn,Xn.NUMBER,.25),Jn(Bn,Xn.FREQ,.15),Jn(Bn,Xn.CYTOBAND,.25),Jn(Bn,Xn.CNA,.14),Bn),tr=function(e){function t(){return Hn(this,t),Qn(this,Wn(t).apply(this,arguments))}return zn(t,Et["a"]),t}(),nr=function(e){function t(e,n){var o;return Hn(this,t),(o=Qn(this,Wn(t).call(this,e,n))).modalSettings={modalOpen:!1,modalPanelName:""},o.getDefaultColumnDefinition=function(e,t,n){var a;return(Jn(a={},Xn.GENE,{name:e,headerRender:function(){return Object(F.f)(n,e,o.props.cancerGeneFilterEnabled,o.isFilteredByCancerGeneList,o.toggleCancerGeneFilter)},render:function(e){return r.createElement(Un,{tableType:o.props.tableType,selectedGenes:o.props.selectedGenes,hugoGeneSymbol:e.label,qValue:e.qValue,isCancerGene:e.isCancerGene,oncokbAnnotated:e.oncokbAnnotated,isOncogene:e.isOncokbOncogene,isTumorSuppressorGene:e.isOncokbTumorSuppressorGene,onGeneSelect:o.props.onGeneSelect})},sortBy:function(e){return e.label},defaultSortDirection:"asc",filter:function(e,t,n){return e.label.toUpperCase().includes(n)},width:t}),Jn(a,Xn.MOLECULAR_PROFILE,{name:e,headerRender:function(){return r.createElement("div",{style:{marginLeft:n},className:q.a.displayFlex,"data-test":"profile-column-header"},e)},render:function(e){return r.createElement("div",{className:q.a.labelContent},r.createElement(G.g,{text:e.label}))},sortBy:function(e){return e.label},defaultSortDirection:"asc",filter:function(e,t,n){return e.label.toUpperCase().includes(n)},width:t}),Jn(a,Xn.CASE_LIST,{name:e,headerRender:function(){return r.createElement("div",{style:{marginLeft:n},className:q.a.displayFlex,"data-test":"profile-column-header"},e)},render:function(e){return r.createElement("div",{className:q.a.labelContent},r.createElement(G.g,{text:e.label}))},sortBy:function(e){return e.label},defaultSortDirection:"asc",filter:function(e,t,n){return e.label.toUpperCase().includes(n)},width:t}),Jn(a,Xn.NUMBER,{name:e,tooltip:r.createElement("span",null,Object(F.h)(o.props.tableType,!1)),headerRender:function(){return r.createElement("div",{style:{marginLeft:n}},"#")},render:function(e){return r.createElement(Tt.a,{checked:o.isChecked(e.uniqueKey),disabled:o.isDisabled(e.uniqueKey),onChange:function(t){return o.toggleSelectRow(e.uniqueKey)},labelProps:{style:{display:"flex",justifyContent:"space-between",marginLeft:n,marginRight:n}},inputProps:{className:q.a.autoMarginCheckbox}},r.createElement("span",null,e.numberOfAlteredCases.toLocaleString()))},sortBy:function(e){return e.numberOfAlteredCases},defaultSortDirection:"desc",filter:function(e,t){return i.toString(e.numberOfAlteredCases).includes(t)},width:t}),Jn(a,Xn.FREQ,{name:e,tooltip:r.createElement("span",null,Object(F.h)(o.props.tableType,!0)),headerRender:function(){return r.createElement("div",{style:{marginLeft:n}},"Freq")},render:function(e){return Object(F.c)(o.props.tableType,e.numberOfProfiledCases,e.numberOfAlteredCases,e.matchingGenePanelIds||[],o.toggleModal,{marginLeft:n})},sortBy:function(e){return e.numberOfAlteredCases/e.numberOfProfiledCases*100},defaultSortDirection:"desc",filter:function(e,t){return i.toString(Object(y.O)(e.numberOfAlteredCases/e.numberOfProfiledCases)).includes(t)},width:t}),Jn(a,Xn.NUMBER_MUTATIONS,{name:e,tooltip:r.createElement("span",null,"Total number of mutations"),headerRender:function(){return r.createElement("div",{style:{marginLeft:n}},"# Mut")},render:function(e){return r.createElement("span",{style:{flexDirection:"row-reverse",display:"flex",marginRight:n}},e.totalCount.toLocaleString())},sortBy:function(e){return e.totalCount},defaultSortDirection:"desc",filter:function(e,t){return i.toString(e.totalCount).includes(t)},width:t}),Jn(a,Xn.NUMBER_FUSIONS,{name:Xn.NUMBER_FUSIONS,tooltip:r.createElement("span",null,"Total number of mutations"),headerRender:function(){return r.createElement("span",null,"# Fusion")},render:function(e){return r.createElement("span",{style:{flexDirection:"row-reverse",display:"flex",marginRight:n}},e.totalCount.toLocaleString())},sortBy:function(e){return e.totalCount},defaultSortDirection:"desc",filter:function(e,t){return i.toString(e.totalCount).includes(t)},width:t}),Jn(a,Xn.CNA,{name:Xn.CNA,tooltip:r.createElement("span",null,"Copy number alteration, only amplifications and deep deletions are shown"),render:function(e){return r.createElement("span",{style:{color:Object(y.y)(Object(y.x)(e.alteration)),fontWeight:"bold"}},Object(y.x)(e.alteration))},sortBy:function(e){return e.alteration},defaultSortDirection:"asc",filter:function(e,t,n){return Object(y.x)(e.alteration).includes(n)},width:t}),Jn(a,Xn.CYTOBAND,{name:Xn.CYTOBAND,tooltip:r.createElement("span",null,"Cytoband"),render:function(e){return r.createElement("span",null,e.cytoband)},sortBy:function(e){return e.cytoband},defaultSortDirection:"asc",filter:function(e,t,n){return!i.isUndefined(e.cytoband)&&e.cytoband.toUpperCase().includes(n)},width:t}),a)[e]},o.getDefaultCellMargin=function(e,t){var n;return(Jn(n={},Xn.GENE,0),Jn(n,Xn.MOLECULAR_PROFILE,0),Jn(n,Xn.CASE_LIST,0),Jn(n,Xn.NUMBER_MUTATIONS,Object(y.n)(Object(y.M)(t,o.totalCountLocaleString))),Jn(n,Xn.NUMBER_FUSIONS,Object(y.n)(Object(y.M)(t,o.totalCountLocaleString))),Jn(n,Xn.NUMBER,Object(y.n)((t-10-(Object(y.N)(o.alteredCasesLocaleString)+20))/2)),Jn(n,Xn.FREQ,Object(y.n)(Object(y.M)(t,Object(y.O)(i.max(o.tableData.map(function(e){return e.numberOfAlteredCases/e.numberOfProfiledCases*100})))))),Jn(n,Xn.CYTOBAND,0),Jn(n,Xn.CNA,0),n)[e]},o.sortBy=o.props.defaultSortBy,o}var n,o,a;return zn(t,r["Component"]),n=t,(o=[{key:"toggleModal",value:function(e){this.modalSettings.modalOpen=!this.modalSettings.modalOpen,this.modalSettings.modalOpen&&(this.modalSettings.modalPanelName=e)}},{key:"closeModal",value:function(){this.modalSettings.modalOpen=!this.modalSettings.modalOpen}},{key:"toggleCancerGeneFilter",value:function(e){e.stopPropagation(),this.props.onChangeCancerGeneFilter(!this.props.filterByCancerGenes)}},{key:"isChecked",value:function(e){return!!this.allSelectedRowsKeysSet[e]}},{key:"isDisabled",value:function(e){return i.some(this.preSelectedRowsKeys,function(t){return t===e})}},{key:"toggleSelectRow",value:function(e){var t=i.find(this.props.selectedRowsKeys,function(t){return t===e});i.isUndefined(t)?this.props.onChangeSelectedRows(this.props.selectedRowsKeys.concat([e])):this.props.onChangeSelectedRows(i.xorBy(this.props.selectedRowsKeys,[t]))}},{key:"afterSelectingRows",value:function(){this.selectionType===F.b.UNION?this.props.onSubmitSelection([this.props.selectedRowsKeys]):this.props.onSubmitSelection(this.props.selectedRowsKeys.map(function(e){return[e]})),this.props.onChangeSelectedRows([])}},{key:"toggleSelectionOperator",value:function(){(this._selectionType||this.selectionType)===F.b.INTERSECTION?this._selectionType=F.b.UNION:this._selectionType=F.b.INTERSECTION,localStorage.setItem(this.props.tableType,this.selectionType)}},{key:"isSelectedRow",value:function(e){return this.isChecked(e.uniqueKey)}},{key:"selectedRowClassName",value:function(e){var t=this.filterKeyToIndexSet[e.uniqueKey];return void 0===t?this.props.filters.length%2==0?q.a.highlightedEvenRow:q.a.highlightedOddRow:t%2==0?q.a.highlightedEvenRow:q.a.highlightedOddRow}},{key:"afterSorting",value:function(e,t){this.sortBy=e,this.sortDirection=t}},{key:"render",value:function(){var e="".concat(this.props.tableType,"-table");return r.createElement("div",{"data-test":e,key:e},this.props.promise.isComplete&&r.createElement(tr,{width:this.props.width,height:this.props.height,data:this.selectableTableData,columns:this.tableColumns,isSelectedRow:this.isSelectedRow,afterSelectingRows:this.afterSelectingRows,defaultSelectionOperator:this.selectionType,toggleSelectionOperator:this.toggleSelectionOperator,extraButtons:this.props.extraButtons,sortBy:this.sortBy,sortDirection:this.sortDirection,afterSorting:this.afterSorting,fixedTopRowsData:this.preSelectedRows,highlightedRowClassName:this.selectedRowClassName,showSetOperationsButton:!0,numberOfSelectedRows:this.props.selectedRowsKeys.length}),this.props.genePanelCache?r.createElement(Nn.b,{show:this.modalSettings.modalOpen,genePanelCache:this.props.genePanelCache,panelName:this.modalSettings.modalPanelName,onHide:this.closeModal}):null)}},{key:"maxNumberTotalCount",get:function(){return i.max(this.tableData.map(function(e){return e.totalCount}))}},{key:"maxNumberAlteredCasesColumn",get:function(){return i.max(this.tableData.map(function(e){return e.numberOfAlteredCases}))}},{key:"totalCountLocaleString",get:function(){return void 0===this.maxNumberTotalCount?"":this.maxNumberTotalCount.toLocaleString()}},{key:"alteredCasesLocaleString",get:function(){return void 0===this.maxNumberAlteredCasesColumn?"":this.maxNumberAlteredCasesColumn.toLocaleString()}},{key:"columnsWidth",get:function(){var e=this;return i.reduce(this.props.columns,function(t,n){return t[n.columnKey]=Object(y.m)((n.columnWidthRatio?n.columnWidthRatio:er[n.columnKey])*e.props.width),t},{})}},{key:"cellMargin",get:function(){var e=this;return i.reduce(this.props.columns,function(t,n){return t[n.columnKey]=e.getDefaultCellMargin(n.columnKey,e.columnsWidth[n.columnKey]),t},{})}},{key:"tableData",get:function(){return this.isFilteredByCancerGeneList?i.filter(this.props.promise.result,function(e){return e.isCancerGene}):this.props.promise.result||[]}},{key:"flattenedFilters",get:function(){return i.flatMap(this.props.filters)}},{key:"selectableTableData",get:function(){var e=this;return 0===this.flattenedFilters.length?this.tableData:i.filter(this.tableData,function(t){return!e.flattenedFilters.includes(t.uniqueKey)})}},{key:"preSelectedRows",get:function(){var e=this;if(0===this.flattenedFilters.length)return[];var t=Object(G.X)(this.flattenedFilters);return i.chain(this.tableData).filter(function(t){return e.flattenedFilters.includes(t.uniqueKey)}).sortBy(function(e){return Object(Lt.a)(t[e.uniqueKey],Number.POSITIVE_INFINITY)}).value()}},{key:"preSelectedRowsKeys",get:function(){return this.preSelectedRows.map(function(e){return e.uniqueKey})}},{key:"tableColumns",get:function(){var e=this;return this.props.columns.map(function(t){return e.getDefaultColumnDefinition(t.columnKey,e.columnsWidth[t.columnKey],e.cellMargin[t.columnKey])})}},{key:"isFilteredByCancerGeneList",get:function(){return!!this.props.cancerGeneFilterEnabled&&this.props.filterByCancerGenes}},{key:"allSelectedRowsKeysSet",get:function(){return Object(G.Z)([].concat(qn(this.props.selectedRowsKeys),qn(this.preSelectedRowsKeys)))}},{key:"selectionType",get:function(){if(this._selectionType)return this._selectionType;switch((localStorage.getItem(this.props.tableType)||"").toUpperCase()){case F.b.INTERSECTION:return F.b.INTERSECTION;case F.b.UNION:return F.b.UNION;default:return this.props.tableType===F.a.DATA?F.b.INTERSECTION:F.b.UNION}}},{key:"filterKeyToIndexSet",get:function(){return i.reduce(this.props.filters,function(e,t,n){return t.forEach(function(t){e[t]=n}),e},{})}}])&&Kn(n.prototype,o),a&&Kn(n,a),t}();function rr(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function or(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ir(e,t){return!t||"object"!==lr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ar(e){return(ar=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sr(e,t){return(sr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lr(e){return(lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}nr.defaultProps={cancerGeneFilterEnabled:!1},$n([u.observable],nr.prototype,"sortBy",void 0),$n([u.observable],nr.prototype,"sortDirection",void 0),$n([u.observable],nr.prototype,"modalSettings",void 0),$n([u.computed],nr.prototype,"maxNumberTotalCount",null),$n([u.computed],nr.prototype,"maxNumberAlteredCasesColumn",null),$n([u.computed],nr.prototype,"totalCountLocaleString",null),$n([u.computed],nr.prototype,"alteredCasesLocaleString",null),$n([u.computed],nr.prototype,"columnsWidth",null),$n([u.computed],nr.prototype,"cellMargin",null),$n([u.computed],nr.prototype,"tableData",null),$n([u.computed],nr.prototype,"flattenedFilters",null),$n([u.computed],nr.prototype,"selectableTableData",null),$n([u.computed],nr.prototype,"preSelectedRows",null),$n([u.computed],nr.prototype,"preSelectedRowsKeys",null),$n([u.computed],nr.prototype,"tableColumns",null),$n([b.default,u.action],nr.prototype,"toggleModal",null),$n([b.default,u.action],nr.prototype,"closeModal",null),$n([b.default],nr.prototype,"toggleCancerGeneFilter",null),$n([u.computed],nr.prototype,"isFilteredByCancerGeneList",null),$n([u.computed],nr.prototype,"allSelectedRowsKeysSet",null),$n([b.default],nr.prototype,"isChecked",null),$n([b.default],nr.prototype,"isDisabled",null),$n([b.default,u.action],nr.prototype,"toggleSelectRow",null),$n([u.observable],nr.prototype,"_selectionType",void 0),$n([b.default,u.action],nr.prototype,"afterSelectingRows",null),$n([u.computed],nr.prototype,"selectionType",null),$n([b.default,u.action],nr.prototype,"toggleSelectionOperator",null),$n([b.default],nr.prototype,"isSelectedRow",null),$n([u.computed],nr.prototype,"filterKeyToIndexSet",null),$n([b.default],nr.prototype,"selectedRowClassName",null),$n([b.default,u.action],nr.prototype,"afterSorting",null),nr=$n([s.observer],nr);var ur,cr=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":lr(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},pr=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=ir(this,ar(t).apply(this,arguments))).modalSettings={modalOpen:!1,modalPanelName:""},e}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sr(e,t)}(t,r["Component"]),n=t,(o=[{key:"isDisabled",value:function(e){return i.some(this.preSelectedRowsKeys,function(t){return t===e})}},{key:"isChecked",value:function(e){return!!this.allSelectedRowsKeysSet[e]}},{key:"toggleModal",value:function(e){this.modalSettings.modalOpen=!this.modalSettings.modalOpen,this.modalSettings.modalOpen&&(this.modalSettings.modalPanelName=e)}},{key:"closeModal",value:function(){this.modalSettings.modalOpen=!this.modalSettings.modalOpen}},{key:"toggleSelectRow",value:function(e){var t=i.find(this.props.selectedRowsKeys,function(t){return t===e});i.isUndefined(t)?this.props.onChangeSelectedRows(this.props.selectedRowsKeys.concat([e])):this.props.onChangeSelectedRows(i.xorBy(this.props.selectedRowsKeys,[t]))}},{key:"afterSelectingRows",value:function(){this.selectionType===F.b.UNION?this.props.onSubmitSelection([this.props.selectedRowsKeys]):this.props.onSubmitSelection(this.props.selectedRowsKeys.map(function(e){return[e]})),this.props.onChangeSelectedRows([])}},{key:"toggleSelectionOperator",value:function(){(this._selectionType||this.selectionType)===F.b.INTERSECTION?this._selectionType=F.b.UNION:this._selectionType=F.b.INTERSECTION,localStorage.setItem(this.props.tableType,this.selectionType)}},{key:"isSelectedRow",value:function(e){return this.isChecked($(e))}},{key:"selectedRowClassName",value:function(e){var t=this.filterKeyToIndexSet[$(e)];return void 0===t?this.props.filters.length%2==0?q.a.highlightedEvenRow:q.a.highlightedOddRow:t%2==0?q.a.highlightedEvenRow:q.a.highlightedOddRow}},{key:"flattenedFilters",get:function(){return i.flatMap(this.props.filters)}},{key:"allSelectedRowsKeysSet",get:function(){return Object(G.Z)([].concat(rr(this.props.selectedRowsKeys),rr(this.preSelectedRowsKeys)))}},{key:"filterKeyToIndexSet",get:function(){return i.reduce(this.props.filters,function(e,t,n){return t.forEach(function(t){e[t]=n}),e},{})}},{key:"selectionType",get:function(){if(this._selectionType)return this._selectionType;switch((localStorage.getItem(this.props.tableType)||"").toUpperCase()){case F.b.INTERSECTION:return F.b.INTERSECTION;case F.b.UNION:default:return F.b.UNION}}}])&&or(n.prototype,o),a&&or(n,a),t}();function dr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hr(e,t){return!t||"object"!==vr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mr(e){return(mr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&br(e,t)}function br(e,t){return(br=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vr(e){return(vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}cr([u.observable],pr.prototype,"_selectionType",void 0),cr([u.observable],pr.prototype,"sortDirection",void 0),cr([u.observable],pr.prototype,"modalSettings",void 0),cr([u.computed],pr.prototype,"flattenedFilters",null),cr([u.computed],pr.prototype,"allSelectedRowsKeysSet",null),cr([u.computed],pr.prototype,"filterKeyToIndexSet",null),cr([u.computed],pr.prototype,"selectionType",null),cr([b.default],pr.prototype,"isDisabled",null),cr([b.default],pr.prototype,"isChecked",null),cr([b.default,u.action],pr.prototype,"toggleModal",null),cr([b.default,u.action],pr.prototype,"closeModal",null),cr([b.default,u.action],pr.prototype,"toggleSelectRow",null),cr([b.default,u.action],pr.prototype,"afterSelectingRows",null),cr([b.default,u.action],pr.prototype,"toggleSelectionOperator",null),cr([b.default],pr.prototype,"isSelectedRow",null),cr([b.default],pr.prototype,"selectedRowClassName",null);var Sr,Cr=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":vr(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};!function(e){e.TREATMENT="Treatment",e.TIME="Pre / Post",e.COUNT="#"}(Sr||(Sr={}));var _r,Tr=(gr(ur={},Sr.TREATMENT,.6),gr(ur,Sr.TIME,.3),gr(ur,Sr.COUNT,.2),ur),Er=function(e){function t(){return fr(this,t),hr(this,mr(t).apply(this,arguments))}return yr(t,Et["a"]),t}(),wr=function(e){function t(e,n){var o;return fr(this,t),(o=hr(this,mr(t).call(this,e,n))).getDefaultColumnDefinition=function(e,t,n){var i;return(gr(i={},Sr.TREATMENT,{name:e,headerRender:function(){return r.createElement(ee,{margin:n,headerName:e})},render:function(e){return r.createElement(te,{row:e})},sortBy:function(e){return e.treatment},defaultSortDirection:"asc",filter:ne,width:t}),gr(i,Sr.TIME,{name:e,headerRender:function(){return r.createElement(ee,{margin:n,headerName:e})},render:o.createTemporalRelationColumnCell,sortBy:function(e){return e.time},defaultSortDirection:"asc",filter:ne,width:t}),gr(i,Sr.COUNT,{tooltip:r.createElement("span",null,"Number of samples acquired before treatment or after/on treatment"),name:e,headerRender:function(){return r.createElement(ee,{margin:n,headerName:e})},render:function(e){return o.createNubmerColumnCell(e,28)},sortBy:function(e){return e.count},defaultSortDirection:"desc",filter:ne,width:t}),i)[e]},o.sortBy=o.props.defaultSortBy,o}var n,o,a;return yr(t,pr),n=t,(o=[{key:"createTemporalRelationColumnCell",value:function(e){return r.createElement("div",null,e.time)}},{key:"createNubmerColumnCell",value:function(e,t){var n=this;return r.createElement(Tt.a,{checked:this.isChecked($(e)),disabled:this.isDisabled($(e)),onChange:function(t){return n.toggleSelectRow($(e))},labelProps:{style:{display:"flex",justifyContent:"space-between",marginLeft:0,marginRight:t}},inputProps:{className:q.a.autoMarginCheckbox}},r.createElement("span",null,e.count.toLocaleString()))}},{key:"afterSorting",value:function(e,t){this.sortBy=e,this.sortDirection=t}},{key:"render",value:function(){var e="".concat(this.props.tableType,"-table");return r.createElement("div",{"data-test":e,key:e},this.props.promise.isComplete&&r.createElement(Er,{width:this.props.width,height:this.props.height,data:this.selectableTableData,columns:this.tableColumns,isSelectedRow:this.isSelectedRow,afterSelectingRows:this.afterSelectingRows,defaultSelectionOperator:this.selectionType,toggleSelectionOperator:this.toggleSelectionOperator,extraButtons:this.props.extraButtons,sortBy:this.sortBy,sortDirection:this.sortDirection,afterSorting:this.afterSorting,fixedTopRowsData:this.preSelectedRows,highlightedRowClassName:this.selectedRowClassName,numberOfSelectedRows:this.props.selectedRowsKeys.length,showSetOperationsButton:!0}))}},{key:"columnsWidth",get:function(){var e=this;return i.reduce(this.props.columns,function(t,n){return t[n.columnKey]=Object(y.m)((n.columnWidthRatio?n.columnWidthRatio:Tr[n.columnKey])*e.props.width),t},{})}},{key:"cellMargin",get:function(){return i.reduce(this.props.columns,function(e,t){return e[t.columnKey]=0,e},{})}},{key:"tableData",get:function(){return this.props.promise.result||[]}},{key:"selectableTableData",get:function(){var e=this;return 0===this.flattenedFilters.length?this.tableData:i.filter(this.tableData,function(t){return!e.flattenedFilters.includes($(t))})}},{key:"preSelectedRows",get:function(){var e=this;if(0===this.flattenedFilters.length)return[];var t=Object(G.X)(this.flattenedFilters);return i.chain(this.tableData).filter(function(t){return e.flattenedFilters.includes($(t))}).sortBy(function(e){return Object(Lt.a)(t[$(e)],Number.POSITIVE_INFINITY)}).value()}},{key:"preSelectedRowsKeys",get:function(){return this.preSelectedRows.map(function(e){return $(e)})}},{key:"tableColumns",get:function(){var e=this;return this.props.columns.map(function(t){return e.getDefaultColumnDefinition(t.columnKey,e.columnsWidth[t.columnKey],e.cellMargin[t.columnKey])})}}])&&dr(n.prototype,o),a&&dr(n,a),t}();function Or(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ir(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kr(e,t){return!t||"object"!==Dr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pr(e){return(Pr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ar(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rr(e,t)}function Rr(e,t){return(Rr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Nr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dr(e){return(Dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}wr.defaultProps={cancerGeneFilterEnabled:!1},Cr([u.observable],wr.prototype,"sortBy",void 0),Cr([u.computed],wr.prototype,"columnsWidth",null),Cr([u.computed],wr.prototype,"cellMargin",null),Cr([u.computed],wr.prototype,"tableData",null),Cr([u.computed],wr.prototype,"selectableTableData",null),Cr([u.computed],wr.prototype,"preSelectedRows",null),Cr([u.computed],wr.prototype,"preSelectedRowsKeys",null),Cr([u.computed],wr.prototype,"tableColumns",null),Cr([b.default,u.action],wr.prototype,"afterSorting",null),wr=Cr([s.observer],wr);var jr,xr=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Dr(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};!function(e){e.TREATMENT="Treatment",e.COUNT="#"}(jr||(jr={}));var Mr=(Nr(_r={},jr.TREATMENT,.8),Nr(_r,jr.COUNT,.2),_r),Gr=function(e){function t(){return Ir(this,t),kr(this,Pr(t).apply(this,arguments))}return Ar(t,Et["a"]),t}(),Fr=function(e){function t(e,n){var o;return Ir(this,t),(o=kr(this,Pr(t).call(this,e,n))).getDefaultColumnDefinition=function(e,t,n){var i;return(Nr(i={},jr.TREATMENT,{name:e,headerRender:function(){return r.createElement(ee,{margin:n,headerName:e})},render:function(e){return r.createElement(te,{row:e})},sortBy:function(e){return e.treatment},defaultSortDirection:"asc",filter:ne,width:t}),Nr(i,jr.COUNT,{tooltip:r.createElement("span",null,"Number of patients treated"),name:e,headerRender:function(){return r.createElement(ee,{margin:n,headerName:e})},render:function(e){return o.createNubmerColumnCell(e,28)},sortBy:function(e){return e.count},defaultSortDirection:"desc",filter:ne,width:t}),i)[e]},o.sortBy=o.props.defaultSortBy,o}var n,o,a;return Ar(t,pr),n=t,(o=[{key:"createNubmerColumnCell",value:function(e,t){var n=this;return r.createElement(Tt.a,{checked:this.isChecked($(e)),disabled:this.isDisabled($(e)),onChange:function(t){return n.toggleSelectRow($(e))},labelProps:{style:{display:"flex",justifyContent:"space-between",marginLeft:0,marginRight:t}},inputProps:{className:q.a.autoMarginCheckbox}},r.createElement("span",null,e.count.toLocaleString()))}},{key:"afterSorting",value:function(e,t){this.sortBy=e,this.sortDirection=t}},{key:"render",value:function(){var e="".concat(this.props.tableType,"-table");return r.createElement("div",{"data-test":e,key:e},this.props.promise.isComplete&&r.createElement(Gr,{width:this.props.width,height:this.props.height,data:this.selectableTableData,columns:this.tableColumns,isSelectedRow:this.isSelectedRow,afterSelectingRows:this.afterSelectingRows,defaultSelectionOperator:this.selectionType,toggleSelectionOperator:this.toggleSelectionOperator,extraButtons:this.props.extraButtons,sortBy:this.sortBy,sortDirection:this.sortDirection,afterSorting:this.afterSorting,fixedTopRowsData:this.preSelectedRows,highlightedRowClassName:this.selectedRowClassName,numberOfSelectedRows:this.props.selectedRowsKeys.length,showSetOperationsButton:!0}))}},{key:"columnsWidth",get:function(){var e=this;return i.reduce(this.props.columns,function(t,n){return t[n.columnKey]=Object(y.m)((n.columnWidthRatio?n.columnWidthRatio:Mr[n.columnKey])*e.props.width),t},{})}},{key:"cellMargin",get:function(){return i.reduce(this.props.columns,function(e,t){return e[t.columnKey]=0,e},{})}},{key:"tableData",get:function(){return this.props.promise.result||[]}},{key:"selectableTableData",get:function(){var e=this;return 0===this.flattenedFilters.length?this.tableData:i.filter(this.tableData,function(t){return!e.flattenedFilters.includes($(t))})}},{key:"preSelectedRows",get:function(){var e=this;if(0===this.flattenedFilters.length)return[];var t=Object(G.X)(this.flattenedFilters);return i.chain(this.tableData).filter(function(t){return e.flattenedFilters.includes($(t))}).sortBy(function(e){return Object(Lt.a)(t[$(e)],Number.POSITIVE_INFINITY)}).value()}},{key:"preSelectedRowsKeys",get:function(){return this.preSelectedRows.map(function(e){return $(e)})}},{key:"tableColumns",get:function(){var e=this;return this.props.columns.map(function(t){return e.getDefaultColumnDefinition(t.columnKey,e.columnsWidth[t.columnKey],e.cellMargin[t.columnKey])})}}])&&Or(n.prototype,o),a&&Or(n,a),t}();function Lr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Br(e,t){return!t||"object"!==qr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vr(e){return(Vr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ur(e,t){return(Ur=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qr(e){return(qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Fr.defaultProps={cancerGeneFilterEnabled:!1},xr([u.observable],Fr.prototype,"sortBy",void 0),xr([u.computed],Fr.prototype,"columnsWidth",null),xr([u.computed],Fr.prototype,"cellMargin",null),xr([u.computed],Fr.prototype,"tableData",null),xr([u.computed],Fr.prototype,"selectableTableData",null),xr([u.computed],Fr.prototype,"preSelectedRows",null),xr([u.computed],Fr.prototype,"preSelectedRowsKeys",null),xr([u.computed],Fr.prototype,"tableColumns",null),xr([b.default,u.action],Fr.prototype,"afterSorting",null),Fr=xr([s.observer],Fr);var Kr=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":qr(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Hr=[I.a.PIE_CHART,I.a.TABLE,I.a.BAR_CHART,I.a.MUTATED_GENES_TABLE,I.a.CNA_GENES_TABLE,I.a.SAMPLE_TREATMENTS_TABLE,I.a.PATIENT_TREATMENTS_TABLE],Qr=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Br(this,Vr(t).call(this,e))).chartHeaderHeight=20,n.mouseInChart=!1,n.placement="right",n.newlyAdded=!1,n.selectedRowsKeys=[],n.chartType=n.props.chartType,n.handlers={ref:function(e){n.plot=e},resetFilters:Object(u.action)(function(){n.props.onResetSelection(n.props.chartMeta,[])}),onValueSelection:Object(u.action)(function(e){n.props.onValueSelection(n.props.chartMeta,e)}),onChangeSelectedRows:Object(u.action)(function(e){n.selectedRowsKeys=e}),onDataBinSelection:Object(u.action)(function(e){n.props.onDataBinSelection(n.props.chartMeta,e)}),onToggleLogScale:Object(u.action)(function(){n.props.onToggleLogScale&&n.props.onToggleLogScale(n.props.chartMeta)}),onMouseEnterChart:Object(u.action)(function(e){n.mouseLeaveTimeout&&clearTimeout(n.mouseLeaveTimeout),n.placement=e.nativeEvent.x>C.a.size.width-400?"left":"right",n.mouseInChart=!0}),onMouseLeaveChart:Object(u.action)(function(){n.mouseLeaveTimeout=setTimeout(function(){n.placement="right",n.mouseInChart=!1},100)}),defaultDownload:{SVG:function(){return Promise.resolve((new XMLSerializer).serializeToString(n.toSVGDOMNode()))},PNG:function(){return Promise.resolve(n.toSVGDOMNode())},PDF:function(){return Promise.resolve(n.toSVGDOMNode())}},onChangeChartType:function(e){n.mouseInChart=!1,n.props.onChangeChartType(n.props.chartMeta,e)},onDeleteChart:function(){n.props.onDeleteChart(n.props.chartMeta)}},n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ur(e,t)}(t,r["Component"]),n=t,(o=[{key:"toSVGDOMNode",value:function(){return this.plot?this.plot.toSVGDOMNode():document.createElementNS("http://www.w3.org/2000/svg","svg")}},{key:"changeChartType",value:function(e){this.chartType=e,this.handlers.onChangeChartType(e)}},{key:"openComparisonPage",value:function(e){var t=this;if(this.comparisonPagePossible)switch(this.props.chartType){case I.a.PIE_CHART:case I.a.TABLE:var n=function(){return t.props.store.openComparisonPage(t.props.chartMeta,{clinicalAttributeValues:t.props.promise.result})},o=this.props.promise.result;pe(this.props.chartMeta)&&o.length>N.c?this.props.setComparisonConfirmationModal(function(e){return r.createElement(it.Modal,{show:!0,onHide:function(){},backdrop:"static"},r.createElement(it.Modal.Body,null,"Group comparisons are limited to 20 groups. Click OK to compare the 20 largest groups in this chart. Or, select up to 20 specific groups in the chart to compare."),r.createElement(it.Modal.Footer,null,r.createElement("button",{className:"btn btn-md btn-primary",onClick:function(){n(),e()}},"OK"),r.createElement("button",{className:"btn btn-md btn-default",onClick:e},"Cancel")))}):n();break;default:this.props.store.openComparisonPage(this.props.chartMeta,e||{})}}},{key:"getScatterPlotHeight",value:function(e){return I.d.layout.grid.h*e-this.chartHeaderHeight+33}},{key:"componentDidMount",value:function(){var e=this;this.props.isNewlyAdded(this.props.chartMeta.uniqueKey)&&(this.newlyAdded=!0,setTimeout(function(){return e.newlyAdded=!1},I.d.thresholds.chartHighlight))}},{key:"componentWillReceiveProps",value:function(e,t){e.chartType!==this.chartType&&(this.chartType=e.chartType)}},{key:"render",value:function(){var e,t,n,o=this;return r.createElement("div",{className:rt()(tt.a.chart,(e={},t=tt.a.highlight,n=this.highlightChart,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e)),"data-test":"chart-container-".concat(this.props.chartMeta.uniqueKey),onMouseEnter:this.handlers.onMouseEnterChart,onMouseLeave:this.handlers.onMouseLeaveChart},r.createElement(Ct,{height:this.chartHeaderHeight,chartMeta:this.props.chartMeta,chartType:this.props.chartType,store:this.props.store,title:this.props.title,active:this.mouseInChart,resetChart:this.handlers.resetFilters,deleteChart:this.handlers.onDeleteChart,selectedRowsKeys:this.selectedRowsKeys,toggleLogScale:this.handlers.onToggleLogScale,chartControls:this.chartControls,changeChartType:this.changeChartType,getSVG:function(){return Promise.resolve(o.toSVGDOMNode())},getData:this.props.getData,downloadTypes:this.props.downloadTypes,openComparisonPage:this.openComparisonPage,placement:this.placement,description:this.props.description}),r.createElement("div",{className:tt.a.chartInnerWrapper},this.props.promise.isPending&&r.createElement(Re.a,{isLoading:!0,className:tt.a.chartLoader}),this.props.promise.isError&&r.createElement("div",{className:tt.a.chartError},r.createElement("i",{className:"fa fa-warning","aria-hidden":"true"})," ","Error when loading data."),(!this.props.chartMeta.renderWhenDataChange||this.props.promise.isComplete)&&r.createElement("div",{style:{visibility:this.props.promise.isPending?"hidden":"visible",display:"flex"}},this.chart&&this.chart())))}},{key:"chartControls",get:function(){var e={};switch(this.chartType){case I.a.BAR_CHART:e={showLogScaleToggle:this.props.showLogScaleToggle,logScaleChecked:this.props.logScaleChecked};break;case I.a.PIE_CHART:e={showTableIcon:!0};break;case I.a.TABLE:e={showPieIcon:!0}}return this.comparisonPagePossible&&(e.showComparisonPageIcon=!0),Object.assign(Object.assign({},e),{showResetIcon:this.props.filters&&this.props.filters.length>0})}},{key:"comparisonPagePossible",get:function(){return this.props.promise.isComplete&&this.props.promise.result.length>1&&Hr.indexOf(this.props.chartType)>-1}},{key:"survivalChartData",get:function(){var e,t,n,r,o,i,s,l=this;if(this.props.promise.isComplete&&this.props.patientToAnalysisGroup&&this.props.patientToAnalysisGroup.isComplete){var u=a.a.find(this.props.promise.result,function(e){return e.id===l.props.chartMeta.uniqueKey});return e=u.survivalData,t=this.props.analysisGroupsSettings.groups,n=this.props.patientToAnalysisGroup.result,r=a.a.mapValues(n,function(e){return[e]}),o=a.a.reduce(e,function(e,t){return t.uniquePatientKey in r&&r[t.uniquePatientKey].forEach(function(n){e[n]=e[n]||[],e[n].push(t)}),e},{}),i=a.a.mapValues(o,function(e){return e.sort(function(e,t){return e.months-t.months})}),s=null,t.length>1&&(s=Sn.a.apply(void 0,Cn(t.map(function(e){return i[e.value]||[]})))),{patientToAnalysisGroups:r,analysisGroups:t,sortedGroupedSurvivals:i,pValue:s}}}},{key:"borderWidth",get:function(){return this.highlightChart?2:1}},{key:"comparisonButtonForTables",get:function(){var e=this;return this.selectedRowsKeys.length>=2?{content:r.createElement("div",{style:{display:"flex",alignItems:"center"}},r.createElement(ht,{className:rt()("fa fa-fw"),style:{marginRight:4}}),"Compare"),onClick:function(){e.openComparisonPage(ye(e.selectedRowsKeys,e.chartType))},isDisabled:function(){return e.selectedRowsKeys.length<2}}:void 0}},{key:"chart",get:function(){var e=this;switch(this.chartType){case I.a.PIE_CHART:return function(){return r.createElement(Jt,{width:Object(y.ib)(e.props.dimension,e.borderWidth),height:Object(y.T)(e.props.dimension,e.chartHeaderHeight),ref:e.handlers.ref,onUserSelection:e.handlers.onValueSelection,openComparisonPage:e.openComparisonPage,filters:e.props.filters,data:e.props.promise.result,placement:e.placement,label:e.props.title,labelDescription:e.props.chartMeta.description,patientAttribute:e.props.chartMeta.patientAttribute})};case I.a.BAR_CHART:return function(){return r.createElement(vn,{width:Object(y.ib)(e.props.dimension,e.borderWidth),height:Object(y.T)(e.props.dimension,e.chartHeaderHeight),ref:e.handlers.ref,onUserSelection:e.handlers.onDataBinSelection,filters:e.props.filters,data:e.props.promise.result})};case I.a.TABLE:return function(){return r.createElement(Gt,{data:e.props.promise.result,width:Object(y.ib)(e.props.dimension,e.borderWidth),height:Object(y.eb)(e.props.dimension,e.chartHeaderHeight),filters:e.props.filters,onUserSelection:e.handlers.onValueSelection,labelDescription:e.props.chartMeta.description,patientAttribute:e.props.chartMeta.patientAttribute,showAddRemoveAllButtons:e.mouseInChart})};case I.a.MUTATED_GENES_TABLE:return function(){return r.createElement(nr,{tableType:F.a.MUTATION,promise:e.props.promise,width:Object(y.ib)(e.props.dimension,e.borderWidth),height:Object(y.eb)(e.props.dimension,e.chartHeaderHeight),filters:e.props.filters,onSubmitSelection:e.handlers.onValueSelection,onChangeSelectedRows:e.handlers.onChangeSelectedRows,extraButtons:e.comparisonButtonForTables&&[e.comparisonButtonForTables],selectedRowsKeys:e.selectedRowsKeys,onGeneSelect:e.props.onGeneSelect,selectedGenes:e.props.selectedGenes,genePanelCache:e.props.genePanelCache,cancerGeneFilterEnabled:e.props.cancerGeneFilterEnabled,filterByCancerGenes:e.props.filterByCancerGenes,onChangeCancerGeneFilter:e.props.onChangeCancerGeneFilter,columns:[{columnKey:Xn.GENE},{columnKey:Xn.NUMBER_MUTATIONS},{columnKey:Xn.NUMBER},{columnKey:Xn.FREQ}],defaultSortBy:Xn.FREQ})};case I.a.FUSION_GENES_TABLE:return function(){return r.createElement(nr,{tableType:F.a.FUSION,promise:e.props.promise,width:Object(y.ib)(e.props.dimension,e.borderWidth),height:Object(y.eb)(e.props.dimension,e.chartHeaderHeight),filters:e.props.filters,onSubmitSelection:e.handlers.onValueSelection,onChangeSelectedRows:e.handlers.onChangeSelectedRows,selectedRowsKeys:e.selectedRowsKeys,onGeneSelect:e.props.onGeneSelect,selectedGenes:e.props.selectedGenes,genePanelCache:e.props.genePanelCache,cancerGeneFilterEnabled:e.props.cancerGeneFilterEnabled,filterByCancerGenes:e.props.filterByCancerGenes,onChangeCancerGeneFilter:e.props.onChangeCancerGeneFilter,columns:[{columnKey:Xn.GENE},{columnKey:Xn.NUMBER_FUSIONS},{columnKey:Xn.NUMBER},{columnKey:Xn.FREQ}],defaultSortBy:Xn.FREQ})};case I.a.CNA_GENES_TABLE:return function(){return r.createElement(nr,{tableType:F.a.CNA,promise:e.props.promise,width:Object(y.ib)(e.props.dimension,e.borderWidth),height:Object(y.eb)(e.props.dimension,e.chartHeaderHeight),filters:e.props.filters,onSubmitSelection:e.handlers.onValueSelection,onChangeSelectedRows:e.handlers.onChangeSelectedRows,extraButtons:e.comparisonButtonForTables&&[e.comparisonButtonForTables],selectedRowsKeys:e.selectedRowsKeys,onGeneSelect:e.props.onGeneSelect,selectedGenes:e.props.selectedGenes,genePanelCache:e.props.genePanelCache,cancerGeneFilterEnabled:e.props.cancerGeneFilterEnabled,filterByCancerGenes:e.props.filterByCancerGenes,onChangeCancerGeneFilter:e.props.onChangeCancerGeneFilter,columns:[{columnKey:Xn.GENE,columnWidthRatio:.24},{columnKey:Xn.CYTOBAND,columnWidthRatio:.24},{columnKey:Xn.CNA,columnWidthRatio:.18},{columnKey:Xn.NUMBER,columnWidthRatio:.17},{columnKey:Xn.FREQ,columnWidthRatio:.17}],defaultSortBy:Xn.FREQ})};case I.a.GENOMIC_PROFILES_TABLE:return function(){return r.createElement(nr,{tableType:F.a.DATA,promise:e.props.promise,width:Object(y.ib)(e.props.dimension,e.borderWidth),height:Object(y.eb)(e.props.dimension,e.chartHeaderHeight),filters:e.props.filters,onSubmitSelection:e.handlers.onValueSelection,onChangeSelectedRows:e.handlers.onChangeSelectedRows,selectedRowsKeys:e.selectedRowsKeys,onGeneSelect:e.props.onGeneSelect,selectedGenes:e.props.selectedGenes,genePanelCache:e.props.genePanelCache,cancerGeneFilterEnabled:e.props.cancerGeneFilterEnabled,filterByCancerGenes:e.props.filterByCancerGenes,onChangeCancerGeneFilter:e.props.onChangeCancerGeneFilter,columns:[{columnKey:Xn.MOLECULAR_PROFILE},{columnKey:Xn.NUMBER},{columnKey:Xn.FREQ}],defaultSortBy:Xn.FREQ})};case I.a.CASE_LIST_TABLE:return function(){return r.createElement(nr,{tableType:F.a.DATA,promise:e.props.promise,width:Object(y.ib)(e.props.dimension,e.borderWidth),height:Object(y.eb)(e.props.dimension,e.chartHeaderHeight),filters:e.props.filters,onSubmitSelection:e.handlers.onValueSelection,onChangeSelectedRows:e.handlers.onChangeSelectedRows,selectedRowsKeys:e.selectedRowsKeys,onGeneSelect:e.props.onGeneSelect,selectedGenes:e.props.selectedGenes,genePanelCache:e.props.genePanelCache,cancerGeneFilterEnabled:e.props.cancerGeneFilterEnabled,filterByCancerGenes:e.props.filterByCancerGenes,onChangeCancerGeneFilter:e.props.onChangeCancerGeneFilter,columns:[{columnKey:Xn.CASE_LIST},{columnKey:Xn.NUMBER},{columnKey:Xn.FREQ}],defaultSortBy:Xn.FREQ})};case I.a.SURVIVAL:if(this.survivalChartData){var t=this.survivalChartData;return function(){return r.createElement(Xt.b,{ref:e.handlers.ref,sortedGroupedSurvivals:t.sortedGroupedSurvivals,patientToAnalysisGroups:t.patientToAnalysisGroups,pValue:t.pValue,analysisGroups:t.analysisGroups,legendLocation:Xt.a.TOOLTIP,title:e.props.title,totalCasesHeader:"Number of Cases, Total",statusCasesHeader:"Number of Cases, Deceased",medianMonthsHeader:"Median Months Survival",yLabelTooltip:"Survival estimate",xLabelWithEventTooltip:"Time of death",xLabelWithoutEventTooltip:"Time of last observation",showDownloadButtons:!1,showSlider:!1,showTable:!1,styleOpts:{padding:{top:15,bottom:30,left:45,right:20},width:Object(y.ib)(e.props.dimension,e.borderWidth),height:Object(y.T)(e.props.dimension,e.chartHeaderHeight),tooltipXOffset:10,tooltipYOffset:-58,pValue:{x:Object(y.ib)(e.props.dimension,e.borderWidth)-10,y:30,textAnchor:"end"},axis:{y:{axisLabel:{padding:40}}}},fileName:e.props.title.replace(" ","_"),yAxisTickCount:2,xAxisTickCount:4})}}return null;case I.a.SAMPLE_TREATMENTS_TABLE:return function(){return r.createElement(wr,{tableType:O.SAMPLE,promise:e.props.promise,width:Object(y.ib)(e.props.dimension,e.borderWidth),height:Object(y.eb)(e.props.dimension,e.chartHeaderHeight),filters:e.props.filters,onSubmitSelection:e.handlers.onValueSelection,onChangeSelectedRows:e.handlers.onChangeSelectedRows,extraButtons:e.comparisonButtonForTables&&[e.comparisonButtonForTables],selectedRowsKeys:e.selectedRowsKeys,columns:[{columnKey:Sr.TREATMENT},{columnKey:Sr.TIME},{columnKey:Sr.COUNT}],defaultSortBy:Sr.COUNT,selectedTreatments:[]})};case I.a.PATIENT_TREATMENTS_TABLE:return function(){return r.createElement(Fr,{tableType:O.PATIENT,promise:e.props.promise,width:Object(y.ib)(e.props.dimension,e.borderWidth),height:Object(y.eb)(e.props.dimension,e.chartHeaderHeight),filters:e.props.filters,onSubmitSelection:e.handlers.onValueSelection,onChangeSelectedRows:e.handlers.onChangeSelectedRows,extraButtons:e.comparisonButtonForTables&&[e.comparisonButtonForTables],selectedRowsKeys:e.selectedRowsKeys,columns:[{columnKey:jr.TREATMENT},{columnKey:jr.COUNT}],defaultSortBy:jr.COUNT,selectedTreatments:[]})};case I.a.SCATTER:return function(){return r.createElement("div",{style:{overflow:"hidden",height:Object(y.T)(e.props.dimension,e.chartHeaderHeight)}},r.createElement("div",{style:{marginTop:-33}},r.createElement(Rn,{ref:e.handlers.ref,width:Object(y.ib)(e.props.dimension,e.borderWidth),height:e.getScatterPlotHeight(e.props.dimension.h),yBinsMin:y.d,onSelection:e.props.onValueSelection,selectionBounds:e.props.filters&&e.props.filters.length>0?e.props.filters[0]:void 0,data:e.props.promise.result.bins,xBinSize:e.props.promise.result.xBinSize,yBinSize:e.props.promise.result.yBinSize,isLoading:e.props.promise.isPending,axisLabelX:"Fraction of copy number altered genome",axisLabelY:"# of mutations",tooltip:y.mb})))};default:return null}}},{key:"highlightChart",get:function(){return this.newlyAdded}}])&&Lr(n.prototype,o),i&&Lr(n,i),t}();Kr([u.observable],Qr.prototype,"mouseInChart",void 0),Kr([u.observable],Qr.prototype,"placement",void 0),Kr([u.observable],Qr.prototype,"chartType",void 0),Kr([u.observable],Qr.prototype,"newlyAdded",void 0),Kr([u.observable],Qr.prototype,"selectedRowsKeys",void 0),Kr([u.computed],Qr.prototype,"chartControls",null),Kr([b.default,u.action],Qr.prototype,"changeChartType",null),Kr([u.computed],Qr.prototype,"comparisonPagePossible",null),Kr([b.default,u.action],Qr.prototype,"openComparisonPage",null),Kr([u.computed],Qr.prototype,"survivalChartData",null),Kr([u.computed],Qr.prototype,"borderWidth",null),Kr([u.computed],Qr.prototype,"comparisonButtonForTables",null),Kr([u.computed],Qr.prototype,"chart",null),Kr([u.computed],Qr.prototype,"highlightChart",null),Qr=Kr([s.observer],Qr);var Wr=n(1260),zr=n.n(Wr);n(1125),n(1126);function Yr(e){return(Yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zr(e,t){return!t||"object"!==Yr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xr(e){return(Xr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $r(e,t){return($r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var eo=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Zr(this,Xr(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$r(e,t)}(t,r["Component"]),n=t,(o=[{key:"shouldComponentUpdate",value:function(){var e=this;return setTimeout(function(){return e.forceUpdate()},0),!1}},{key:"render",value:function(){return this.props.children}}])&&Jr(n.prototype,o),i&&Jr(n,i),t}();function to(){return(to=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function no(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ro(e,t){return!t||"object"!==ao(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oo(e){return(oo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function io(e,t){return(io=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ao(e){return(ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var so=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ao(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},lo=(Object(Wr.WidthProvider)(zr.a),function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ro(this,oo(t).call(this,e))).showErrorMessage=!0,n.renderAttributeChart=function(e){var t={chartMeta:e,chartType:n.props.store.chartsType.get(e.uniqueKey),store:n.props.store,dimension:n.store.chartsDimension.get(e.uniqueKey),title:e.displayName,filters:[],onDeleteChart:n.handlers.onDeleteChart,isNewlyAdded:n.handlers.isNewlyAdded,studyViewFilters:n.store.filters,analysisGroupsSettings:n.store.analysisGroupsSettings,cancerGeneFilterEnabled:n.store.oncokbCancerGeneFilterEnabled,setComparisonConfirmationModal:n.store.setComparisonConfirmationModal};switch(n.store.chartsType.get(e.uniqueKey)){case I.a.PIE_CHART:n.store.isCustomChart(e.uniqueKey)?(t.filters=n.store.getCustomChartFilters(t.chartMeta.uniqueKey),t.onValueSelection=n.handlers.setCustomChartFilters,t.onResetSelection=n.handlers.setCustomChartFilters,t.promise=n.store.getCustomChartDataCount(e)):(t.promise=n.store.getClinicalDataCount(e),t.filters=n.store.getClinicalDataFiltersByUniqueKey(e.uniqueKey).map(function(e){return e.value}),t.onValueSelection=n.handlers.onValueSelection,t.onResetSelection=n.handlers.onValueSelection),t.onChangeChartType=n.handlers.onChangeChartType,t.getData=function(t){return n.store.getPieChartDataDownload(e,t)},t.downloadTypes=["Summary Data","Full Data","SVG","PDF"];break;case I.a.BAR_CHART:n.store.isGeneSpecificChart(e.uniqueKey)?(t.promise=n.store.getGenomicChartDataBin(e),t.filters=n.store.getGenomicDataIntervalFiltersByUniqueKey(t.chartMeta.uniqueKey),t.onDataBinSelection=n.handlers.onGenomicDataBinSelection,t.onResetSelection=n.handlers.onGenomicDataBinSelection,t.getData=function(){return n.store.getChartDownloadableData(e)}):(t.promise=n.store.getClinicalDataBin(e),t.filters=n.store.getClinicalDataFiltersByUniqueKey(e.uniqueKey),t.onDataBinSelection=n.handlers.onDataBinSelection,t.onResetSelection=n.handlers.onDataBinSelection,t.getData=function(){return n.store.getChartDownloadableData(e)}),t.onToggleLogScale=n.handlers.onToggleLogScale,t.showLogScaleToggle=n.store.isLogScaleToggleVisible(e.uniqueKey,t.promise.result),t.logScaleChecked=n.store.isLogScaleChecked(e.uniqueKey),t.downloadTypes=["Data","SVG","PDF"];break;case I.a.TABLE:n.store.isCustomChart(e.uniqueKey)?(t.filters=n.store.getCustomChartFilters(t.chartMeta.uniqueKey),t.onValueSelection=n.handlers.setCustomChartFilters,t.onResetSelection=n.handlers.setCustomChartFilters,t.promise=n.store.getCustomChartDataCount(e)):(t.filters=n.store.getClinicalDataFiltersByUniqueKey(e.uniqueKey).map(function(e){return e.value}),t.promise=n.store.getClinicalDataCount(e),t.onValueSelection=n.handlers.onValueSelection,t.onResetSelection=n.handlers.onValueSelection),t.onChangeChartType=n.handlers.onChangeChartType,t.getData=function(){return n.store.getChartDownloadableData(e)},t.downloadTypes=["Data"];break;case I.a.MUTATED_GENES_TABLE:t.filters=n.store.getGeneFiltersByUniqueKey(e.uniqueKey),t.promise=n.store.mutatedGeneTableRowData,t.onValueSelection=n.store.addGeneFilters,t.onResetSelection=function(){return n.store.resetGeneFilter(e.uniqueKey)},t.selectedGenes=n.store.selectedGenes,t.onGeneSelect=n.store.onCheckGene,t.title=n.store.getChartTitle(I.a.MUTATED_GENES_TABLE,t.title),t.getData=function(){return n.store.getMutatedGenesDownloadData()},t.genePanelCache=n.store.genePanelCache,t.downloadTypes=["Data"],t.filterByCancerGenes=n.store.filterMutatedGenesTableByCancerGenes,t.onChangeCancerGeneFilter=n.store.updateMutatedGenesTableByCancerGenesFilter;break;case I.a.FUSION_GENES_TABLE:t.filters=n.store.getGeneFiltersByUniqueKey(e.uniqueKey),t.promise=n.store.fusionGeneTableRowData,t.onValueSelection=n.store.addGeneFilters,t.onResetSelection=function(){return n.store.resetGeneFilter(e.uniqueKey)},t.selectedGenes=n.store.selectedGenes,t.onGeneSelect=n.store.onCheckGene,t.title=n.store.getChartTitle(I.a.FUSION_GENES_TABLE,t.title),t.getData=function(){return n.store.getFusionGenesDownloadData()},t.genePanelCache=n.store.genePanelCache,t.downloadTypes=["Data"],t.filterByCancerGenes=n.store.filterFusionGenesTableByCancerGenes,t.onChangeCancerGeneFilter=n.store.updateFusionGenesTableByCancerGenesFilter;break;case I.a.CNA_GENES_TABLE:t.filters=n.store.getGeneFiltersByUniqueKey(e.uniqueKey),t.promise=n.store.cnaGeneTableRowData,t.onValueSelection=n.store.addGeneFilters,t.onResetSelection=function(){return n.store.resetGeneFilter(e.uniqueKey)},t.selectedGenes=n.store.selectedGenes,t.onGeneSelect=n.store.onCheckGene,t.title=n.store.getChartTitle(I.a.CNA_GENES_TABLE,t.title),t.getData=function(){return n.store.getGenesCNADownloadData()},t.genePanelCache=n.store.genePanelCache,t.downloadTypes=["Data"],t.filterByCancerGenes=n.store.filterCNAGenesTableByCancerGenes,t.onChangeCancerGeneFilter=n.store.updateCNAGenesTableByCancerGenesFilter;break;case I.a.GENOMIC_PROFILES_TABLE:t.filters=Object(u.toJS)(n.store.genomicProfilesFilter),t.promise=n.store.molecularProfileSampleCounts,t.onValueSelection=n.store.addGenomicProfilesFilter,t.onResetSelection=function(){n.store.setGenomicProfilesFilter([])};break;case I.a.CASE_LIST_TABLE:t.filters=Object(u.toJS)(n.store.caseListsFilter),t.promise=n.store.caseListSampleCounts,t.onValueSelection=n.store.addCaseListsFilter,t.onResetSelection=function(){n.store.setCaseListsFilter([])};break;case I.a.SURVIVAL:t.promise=n.store.survivalPlotData,t.getData=function(){return n.store.getSurvivalDownloadData(e)},t.patientToAnalysisGroup=n.store.patientToAnalysisGroup,t.downloadTypes=["Data","SVG","PDF"],t.description=n.store.survivalDescriptions.result?n.store.survivalDescriptions.result[e.uniqueKey.substring(0,e.uniqueKey.indexOf("_SURVIVAL"))][0]:void 0;break;case I.a.SCATTER:t.filters=n.store.getScatterPlotFiltersByUniqueKey(t.chartMeta.uniqueKey),t.promise=n.store.mutationCountVsCNADensityData,t.onValueSelection=function(e){n.store.updateScatterPlotFilterByValues(t.chartMeta.uniqueKey,e)},t.onResetSelection=function(){n.store.updateScatterPlotFilterByValues(t.chartMeta.uniqueKey)},t.sampleToAnalysisGroup=n.store.sampleToAnalysisGroup,t.getData=function(){return n.store.getScatterDownloadData()},t.downloadTypes=["Data","SVG","PDF"];break;case I.a.SAMPLE_TREATMENTS_TABLE:t.filters=n.store.sampleTreatmentFiltersAsStrings,t.promise=n.store.sampleTreatments,t.onValueSelection=n.store.onSampleTreatmentSelection,t.onResetSelection=function(){n.store.clearSampleTreatmentFilters()};break;case I.a.PATIENT_TREATMENTS_TABLE:t.filters=n.store.patientTreatmentFiltersAsStrings,t.promise=n.store.patientTreatments,t.onValueSelection=n.store.onPatientTreatmentSelection,t.onResetSelection=function(){n.store.clearPatientTreatmentFilters()}}return r.createElement("div",{key:e.uniqueKey},r.createElement(eo,null,r.createElement(Qr,to({key:e.uniqueKey},t))))},n.store=e.store,n.handlers={onValueSelection:function(e,t){n.store.updateClinicalDataFilterByValues(e.uniqueKey,t.map(function(e){return{value:e}}))},onDataBinSelection:function(e,t){n.store.updateClinicalDataIntervalFilters(e.uniqueKey,t)},onToggleLogScale:function(e){n.store.toggleLogScale(e.uniqueKey)},onDeleteChart:function(e){n.store.resetFilterAndChangeChartVisibility(e.uniqueKey,!1)},onChangeChartType:function(e,t){n.store.changeChartType(e,t)},isNewlyAdded:function(e){return n.store.isNewlyAdded(e)},setCustomChartFilters:function(e,t){n.store.setCustomChartFilters(e.uniqueKey,t)},onLayoutChange:function(e){n.store.updateCurrentGridLayout(e),n.onResize(e)},resetGeneFilter:function(e){n.store.resetGeneFilter(e.uniqueKey)},onGenomicDataBinSelection:function(e,t){n.store.updateGenomicDataIntervalFilters(e.uniqueKey,t)}},n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&io(e,t)}(t,r["Component"]),n=t,(o=[{key:"onResize",value:function(e){var t=this;e.filter(function(e){var n=t.store.chartsDimension.get(e.i);return n&&(n.h!==e.h||n.w!==e.w)}).forEach(function(e){var n=e.i,r=t.store.chartsDimension.get(n);r.h=e.h,r.w=e.w,t.store.chartsDimension.set(n,r)})}},{key:"getProgressItems",value:function(e){return[{label:"Loading meta information",promises:[this.store.defaultVisibleAttributes,this.store.mutationProfiles,this.store.cnaProfiles]},{label:"Loading clinical data"+(e>2?" - this can take several seconds":""),promises:[this.store.initialVisibleAttributesClinicalDataBinCountData,this.store.initialVisibleAttributesClinicalDataCountData]},{label:"Rendering"}]}},{key:"render",value:function(){var e=this;return r.createElement("div",null,r.createElement(Re.a,{isLoading:this.store.loadingInitialDataForSummaryTab,size:"big",center:!0},r.createElement(je.a,{getItems:this.getProgressItems,show:this.store.loadingInitialDataForSummaryTab,sequential:!0})),this.store.invalidSampleIds.result.length>0&&this.showErrorMessage&&r.createElement("div",null,r.createElement("div",{className:"alert alert-danger"},r.createElement("button",{type:"button",className:"close",onClick:function(t){return e.showErrorMessage=!1}},""),"The following sample(s) might have been deleted/updated with the recent data updates",r.createElement("br",null),r.createElement("ul",{style:{listStyle:"none",padding:"10px",maxHeight:"300px",overflowY:"scroll"}},this.store.invalidSampleIds.result.map(function(e){return r.createElement("li",null,e.studyId+":"+e.sampleId)})))),this.store.showSettingRestoreMsg&&r.createElement("div",null,r.createElement("div",{className:"alert alert-info"},r.createElement("button",{type:"button",className:"close",onClick:function(){e.store.hideRestoreSettingsMsg=!0}},""),"Your previously saved layout preferences have been applied.",r.createElement("button",{className:"btn btn-primary btn-sm",onClick:function(){e.store.hideRestoreSettingsMsg=!0},style:{marginLeft:"10px"}},"Keep Saved Layout"),r.createElement("button",{className:"btn btn-primary btn-sm",onClick:function(){e.store.hideRestoreSettingsMsg=!0,e.store.undoUserSettings()},style:{marginLeft:"10px"}},"Revert to Previous Layout"))),!this.store.loadingInitialDataForSummaryTab&&r.createElement("div",{"data-test":"summary-tab-content"},r.createElement("div",{className:Ze.a.studyViewFlexContainer},this.store.defaultVisibleAttributes.isComplete&&r.createElement(zr.a,{className:"layout",style:{width:this.store.containerWidth},width:this.store.containerWidth,cols:this.store.studyViewPageLayoutProps.cols,rowHeight:this.store.studyViewPageLayoutProps.grid.h,layout:this.store.studyViewPageLayoutProps.layout,margin:[I.d.layout.gridMargin.x,I.d.layout.gridMargin.y],useCSSTransforms:!1,draggableHandle:".".concat($e.a.draggable),onLayoutChange:this.handlers.onLayoutChange,onResizeStop:this.onResize},this.store.visibleAttributes.map(this.renderAttributeChart)))),this.props.store.selectedSamples.isComplete&&0===this.props.store.selectedSamples.result.length&&r.createElement("div",{className:Ze.a.studyViewNoSamples},r.createElement("div",{className:Ze.a.studyViewNoSamplesInner},r.createElement("p",null,"The filters you have selected have filtered out all the samples in this study; because of this, no data visualizations are shown."),r.createElement("p",null,"You can remove filters in the header of this page to widen your search criteria and add samples back to your results."))))}}])&&no(n.prototype,o),i&&no(n,i),t}());so([u.observable],lo.prototype,"showErrorMessage",void 0),so([b.default],lo.prototype,"onResize",null),so([b.default],lo.prototype,"getProgressItems",null),lo=so([s.observer],lo);var uo=n(1127),co=n.n(uo),po=n(803);function fo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ho(e,t){return!t||"object"!==bo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mo(e){return(mo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yo(e,t){return(yo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bo(e){return(bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var go=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":bo(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},vo=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=ho(this,mo(t).apply(this,arguments))).downloadingData=!1,e.showDownloadErrorMessage=!1,e.geneValidationHasIssue=!1,e}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yo(e,t)}(t,r["Component"]),n=t,(o=[{key:"updateSelectedGenes",value:function(e,t,n){this.geneValidationHasIssue=""===n||!i.isUndefined(e.error)||0!==t.suggestions.length,this.props.store.updateSelectedGenes(e.query,n)}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:"studyViewSummaryHeader"},r.createElement("div",{className:co.a.rightPanel},r.createElement("div",{className:"small"},r.createElement(po.b,{inputGeneQuery:this.props.store.geneQueryStr,validateInputGeneQuery:!0,callback:this.updateSelectedGenes,location:po.a.STUDY_VIEW_PAGE,error:this.oqlSubmitError,messages:this.oqlMessages})),r.createElement("button",{disabled:this.isQueryButtonDisabled,className:rt()("btn btn-primary btn-sm",co.a.submitQuery),"data-event":Object(A.e)({category:"studyPage",action:"submitQuery",label:this.props.store.queriedPhysicalStudyIds.result}),"data-test":"geneSetSubmit",onClick:function(){return e.props.store.onSubmitQuery()}},"Query")))}},{key:"isQueryButtonDisabled",get:function(){return""===this.props.store.geneQueryStr||this.geneValidationHasIssue||!!this.oqlSubmitError}},{key:"isQueryLimitReached",get:function(){return!!this.props.store.selectedSamples.isComplete&&this.props.store.geneQueries.length*this.props.store.selectedSamples.result.length>c.b.serverConfig.query_product_limit}},{key:"geneLimit",get:function(){return this.props.store.selectedSamples.isComplete?Math.floor(c.b.serverConfig.query_product_limit/this.props.store.selectedSamples.result.length):0}},{key:"oqlMessages",get:function(){return Object(h.Y)(this.props.store.geneQueries)}},{key:"oqlSubmitError",get:function(){if(this.props.store.isSingleNonVirtualStudyQueried){if(this.props.store.alterationTypesInOQL.haveMutInQuery&&!this.props.store.defaultMutationProfile)return"Mutation data query specified in OQL, but no mutation profile is available for the selected study.";if(this.props.store.alterationTypesInOQL.haveCnaInQuery&&!this.props.store.defaultCnaProfile)return"CNA data query specified in OQL, but no CNA profile is available in the selected study.";if(this.props.store.alterationTypesInOQL.haveMrnaInQuery&&!this.props.store.defaultMrnaProfile)return"mRNA expression data query specified in OQL, but no mRNA profile is available in the selected study.";if(this.props.store.alterationTypesInOQL.haveProtInQuery&&!this.props.store.defaultProtProfile)return"Protein level data query specified in OQL, but no protein level profile is available in the selected study."}return this.props.store.alterationTypesInOQL.haveMrnaInQuery&&this.props.store.displayedStudies.isComplete&&this.props.store.displayedStudies.result.length>1?"Expression filtering in the gene list (the EXP command) is not supported when doing cross cancer queries.":this.props.store.alterationTypesInOQL.haveProtInQuery&&this.props.store.displayedStudies.isComplete&&this.props.store.displayedStudies.result.length>1?"Protein level filtering in the gene list (the PROT command) is not supported when doing cross cancer queries.":this.isQueryLimitReached?"Please limit your queries to ".concat(this.geneLimit," genes or fewer."):void 0}}])&&fo(n.prototype,o),a&&fo(n,a),t}();go([u.observable],vo.prototype,"downloadingData",void 0),go([u.observable],vo.prototype,"showDownloadErrorMessage",void 0),go([u.observable],vo.prototype,"geneValidationHasIssue",void 0),go([b.default,u.action],vo.prototype,"updateSelectedGenes",null),go([u.computed],vo.prototype,"isQueryButtonDisabled",null),go([u.computed],vo.prototype,"isQueryLimitReached",null),go([u.computed],vo.prototype,"geneLimit",null),go([u.computed],vo.prototype,"oqlMessages",null),go([u.computed],vo.prototype,"oqlSubmitError",null);var So=vo=go([s.observer],vo),Co=n(311),_o=n(1072);function To(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Eo(e,t){return!t||"object"!==Io(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wo(e){return(wo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Oo(e,t){return(Oo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Io(e){return(Io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ko=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Io(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Po=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Eo(this,wo(t).apply(this,arguments))).showMoreDescription=!1,e}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oo(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=this;return r.createElement("div",{className:rt()(co.a.summary)},r.createElement("h3",{style:{marginBottom:3,display:"flex",alignItems:"baseline"}},this.name,this.props.isMixedReferenceGenome&&Object(re.d)(),this.props.hasRawDataForDownload&&r.createElement(G.d,{trigger:["hover"],placement:"top",overlay:r.createElement("span",null,"Download all clinical and genomic data of this study")},r.createElement("span",{"data-test":"studySummaryRawDataDownloadIcon","data-event":Object(A.e)({category:"studyPage",action:"dataDownload",label:this.props.studies.map(function(e){return e.studyId}).join(",")}),style:{marginLeft:"10px",fontSize:"14px"}},r.createElement(_o.a,{studyId:this.props.studies[0].studyId})))),r.createElement("div",{className:co.a.description},r.createElement("div",null,this.descriptionFirstLine,this.hasMoreDescription&&r.createElement("i",{className:"fa fa-".concat(this.showMoreDescription?"minus":"plus","-circle"),onClick:function(){return e.showMoreDescription=!e.showMoreDescription},style:{marginLeft:"5px",cursor:"pointer"}})),this.showMoreDescription&&r.createElement("div",null,r.createElement("ul",{className:co.a.studyLinks},this.descriptionRemainingLines),this.props.showOriginStudiesInSummaryDescription&&r.createElement("div",null,this.props.originStudies.isComplete&&this.props.originStudies.result.length>0&&r.createElement("span",null,r.createElement("span",{style:{fontWeight:"bold",marginBottom:"5px",display:"block"}},"This virtual study was derived from:"),this.props.originStudies.result.map(function(e){return r.createElement(Co.a,e)})),r.createElement(Re.a,{isLoading:this.props.originStudies.isPending,center:!0,size:"big"})))))}},{key:"name",get:function(){return 1===this.props.studies.length?this.props.studies[0].name:"Combined Study"}},{key:"descriptionFirstLine",get:function(){if(1===this.props.studies.length){var e=[r.createElement("span",{dangerouslySetInnerHTML:{__html:this.props.studies[0].description.split(/\n+/g)[0]}})];return this.props.studies[0].pmid&&e.push(r.createElement("a",{target:"_blank",href:Object(G.F)("/pubmed/".concat(this.props.studies[0].pmid)),style:{marginLeft:"5px"}},"PubMed")),r.createElement("span",null,e)}return r.createElement("span",null,"This combined study contains samples from ".concat(this.props.studies.length," studies"))}},{key:"hasMoreDescription",get:function(){return this.props.showOriginStudiesInSummaryDescription||this.props.studies.length>1||this.props.studies[0].description.split(/\n/g).length>1}},{key:"descriptionRemainingLines",get:function(){if(1!==this.props.studies.length)return i.map(this.props.studies,function(e){return r.createElement("li",null,r.createElement("a",{href:Object(k.B)(e.studyId),target:"_blank"},e.name))});var e=this.props.studies[0].description.split(/\n/g);return e.length>1?[r.createElement("span",{style:{whiteSpace:"pre"},dangerouslySetInnerHTML:{__html:e.slice(1).join("\n")}})]:[]}}])&&To(n.prototype,o),a&&To(n,a),t}();ko([u.observable],Po.prototype,"showMoreDescription",void 0),ko([u.computed],Po.prototype,"name",null),ko([u.computed],Po.prototype,"descriptionFirstLine",null),ko([u.computed],Po.prototype,"hasMoreDescription",null),ko([u.computed],Po.prototype,"descriptionRemainingLines",null);var Ao=Po=ko([s.observer],Po),Ro=n(236),No=n.n(Ro),Do=n(1267),jo=n.n(Do),xo=n(1268),Mo=n.n(xo);function Go(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fo(e,t){return!t||"object"!==Vo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Lo(e){return(Lo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bo(e,t){return(Bo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vo(e){return(Vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Uo=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Vo(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},qo=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Fo(this,Lo(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bo(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement("div",{className:jo.a.main,style:{background:this.props.backgroundColor,color:this.contentColor}},r.createElement("span",{className:jo.a.content},this.props.content),r.createElement(De.If,{condition:i.isFunction(this.props.onDelete)},r.createElement("span",{"data-test":"pill-tag-delete",className:jo.a.delete,onClick:this.props.onDelete},r.createElement("i",{className:"fa fa-times-circle"}))))}},{key:"contentColor",get:function(){return"light"===Mo()(this.props.backgroundColor)?"#000":"#fff"}}])&&Go(n.prototype,o),a&&Go(n,a),t}();Uo([u.computed],qo.prototype,"contentColor",null);var Ko=n(1270),Ho=n.n(Ko);function Qo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wo(e,t){return!t||"object"!==Jo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zo(e){return(zo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yo(e,t){return(Yo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Jo(e){return(Jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Zo=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Jo(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Xo=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Wo(this,zo(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yo(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement("div",{className:Ho.a.main},this.child)}},{key:"child",get:function(){var e=this,t=[];return this.props.group&&t.push(r.createElement("span",{className:rt()(Ho.a.text,Ho.a.mostLeft)},"(")),i.reduce(this.props.components,function(t,n,o){return o>0&&t.push(r.createElement("span",{className:Ho.a.text},e.props.operation)),t.push(n),t},t),this.props.group&&t.push(r.createElement("span",{className:rt()(Ho.a.text,Ho.a.mostRight)},")")),t}}])&&Qo(n.prototype,o),a&&Qo(n,a),t}();function $o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ei(e,t){return!t||"object"!==ri(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ti(e){return(ti=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ni(e,t){return(ni=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ri(e){return(ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Zo([u.computed],Xo.prototype,"child",null),Xo=Zo([s.observer],Xo);var oi=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ri(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ii=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ei(this,ti(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ni(e,t)}(t,r["Component"]),n=t,(o=[{key:"renderTreatmentFilter",value:function(e){var t=this,n=e.filters.map(function(e,n){var o=e.filters.map(function(e,o){var i=t.getFilterStringAndRemoveFunc(e);return r.createElement(qo,{content:e.treatment+" "+i.str,backgroundColor:I.d.colors.theme.clinicalFilterContent,onDelete:function(){i.func(n,o)}})});return r.createElement(Xo,{components:o,operation:"or",group:!0})});return r.createElement(Xo,{components:n,operation:"and",group:!1})}},{key:"getFilterStringAndRemoveFunc",value:function(e){return e.hasOwnProperty("time")?{str:e.time,func:this.props.removeSampleTreatmentsFilter}:{str:"",func:this.props.removePatientTreatmentsFilter}}},{key:"groupedGeneQueries",value:function(e,t){var n=this;return e.map(function(e){var o=Ft.m,i=e;switch(t.chartType){case I.a.MUTATED_GENES_TABLE:o=Ft.w;break;case I.a.FUSION_GENES_TABLE:o=Ft.s;break;case I.a.CNA_GENES_TABLE:var a=e.trim().split(":");if(2===a.length){i=a[0];var s=Object(y.y)(a[1]);s&&(o=s)}}return r.createElement(qo,{content:i,backgroundColor:o,onDelete:function(){return n.props.removeGeneFilter(t.uniqueKey,e)}})})}},{key:"groupedGenomicProfiles",value:function(e){var t=this;return e.map(function(e){return r.createElement(qo,{content:t.props.molecularProfileNameSet[e]||e,backgroundColor:I.d.colors.theme.clinicalFilterContent,onDelete:function(){return t.props.removeGenomicProfileFilter(e)}})})}},{key:"groupedCaseLists",value:function(e){var t=this;return e.map(function(e){return r.createElement(qo,{content:t.props.caseListNameSet[e]||e,backgroundColor:I.d.colors.theme.clinicalFilterContent,onDelete:function(){return t.props.removeCaseListsFilter(e)}})})}},{key:"render",value:function(){return this.showFilters?r.createElement("div",{className:rt()(No.a.userSelections,"userSelections")},this.allComponents,r.createElement("button",{"data-test":"clear-all-filters",className:rt()("btn btn-default btn-sm",No.a.summaryClearAllBtn),onClick:this.props.clearAllFilters},"Clear All Filters"),r.createElement(G.d,{placement:"topLeft",overlay:r.createElement("div",null,"Get bookmark link for this filter")},r.createElement("a",{onClick:this.props.onBookmarkClick,className:No.a.bookmarkButton},r.createElement("span",{className:"fa-stack fa-4x"},r.createElement("i",{className:"fa fa-circle fa-stack-2x"}),r.createElement("i",{className:"fa fa-link fa-stack-1x"}))))):null}},{key:"showFilters",get:function(){return this.allComponents.length>0}},{key:"allComponents",get:function(){var e=this,t=[];if(this.props.numberOfSelectedSamplesInCustomSelection>0&&t.push(r.createElement("div",{className:No.a.parentGroupLogic},r.createElement(Xo,{components:[r.createElement("span",{className:No.a.filterClinicalAttrName},"Custom Selection"),r.createElement(qo,{content:"".concat(this.props.numberOfSelectedSamplesInCustomSelection," sample").concat(this.props.numberOfSelectedSamplesInCustomSelection>1?"s":""),backgroundColor:I.d.colors.theme.clinicalFilterContent,onDelete:function(){return e.props.removeCustomSelectionFilter()}})],operation:":",group:!1}))),this.props.comparisonGroupSelection.length>0){var n=Object(N.w)(this.props.comparisonGroupSelection).length,o=Object(y.Y)(this.props.comparisonGroupSelection).length;t.push(r.createElement("div",{className:No.a.parentGroupLogic},r.createElement(Xo,{components:[r.createElement("span",{className:No.a.filterClinicalAttrName},Object(y.db)(this.props.comparisonGroupSelection)),r.createElement(qo,{content:Object(N.i)(n,o),backgroundColor:I.d.colors.theme.clinicalFilterContent,onDelete:function(){return e.props.removeComparisonGroupSelectionFilter()}})],operation:":",group:!1})))}if(i.reduce(this.props.filter.clinicalDataFilters||[],function(t,n){var o=e.props.attributesMetaSet[n.attributeId];o&&(e.props.clinicalAttributeIdToDataType[n.attributeId]===y.c.STRING?t.push(r.createElement("div",{className:No.a.parentGroupLogic},r.createElement(Xo,{components:[r.createElement("span",{className:No.a.filterClinicalAttrName},o.displayName),r.createElement(Xo,{components:n.values.map(function(t){return r.createElement(qo,{content:t.value,backgroundColor:I.d.colors.theme.clinicalFilterContent,onDelete:function(){return e.props.updateClinicalDataFilterByValues(o.uniqueKey,i.remove(n.values,function(e){return e.value!==t.value}))}})}),operation:"or",group:!1})],operation:":",group:!1}))):t.push(r.createElement("div",{className:No.a.parentGroupLogic},r.createElement(Xo,{components:[r.createElement("span",{className:No.a.filterClinicalAttrName},o.displayName),r.createElement(qo,{content:Object(y.jb)(n.values),backgroundColor:I.d.colors.theme.clinicalFilterContent,onDelete:function(){return e.props.updateClinicalDataFilterByValues(o.uniqueKey,[])}})],operation:":",group:!1}))));return t},t),i.reduce(this.props.filter.genomicDataFilters||[],function(t,n){var o=Object(y.P)(n.hugoGeneSymbol,n.profileType),i=e.props.attributesMetaSet[o];return i&&t.push(r.createElement("div",{className:No.a.parentGroupLogic},r.createElement(Xo,{components:[r.createElement("span",{className:No.a.filterClinicalAttrName},i.displayName),r.createElement(qo,{content:Object(y.jb)(n.values),backgroundColor:I.d.colors.theme.clinicalFilterContent,onDelete:function(){return e.props.updateGenomicDataIntervalFilter(i.uniqueKey,[])}})],operation:":",group:!1}))),t},t),i.isEmpty(this.props.customChartsFilter)||i.reduce(this.props.customChartsFilter,function(t,n,o){var a=e.props.attributesMetaSet[o];return a&&t.push(r.createElement("div",{className:No.a.parentGroupLogic},r.createElement(Xo,{components:[r.createElement("span",{className:No.a.filterClinicalAttrName},a.displayName),r.createElement(Xo,{components:n.map(function(t){return r.createElement(qo,{content:t,backgroundColor:I.d.colors.theme.clinicalFilterContent,onDelete:function(){return e.props.updateCustomChartFilter(a.uniqueKey,i.remove(n,function(e){return e!==t}))}})}),operation:"or",group:!1})],operation:":",group:!1}))),t},t),i.reduce(this.props.filter.geneFilters||[],function(t,n){var o=Object(y.gb)(n.molecularProfileIds),i=e.props.attributesMetaSet[o];return i&&t.push(r.createElement("div",{className:No.a.parentGroupLogic},r.createElement(Xo,{components:n.geneQueries.map(function(t){return r.createElement(Xo,{components:e.groupedGeneQueries(t,i),operation:"or",group:t.length>1})}),operation:"and",group:!1}))),t},t),i.isEmpty(this.props.filter.genomicProfiles)||t.push(r.createElement("div",{className:No.a.parentGroupLogic},r.createElement(Xo,{components:this.props.filter.genomicProfiles.map(function(t){return r.createElement(Xo,{components:e.groupedGenomicProfiles(t),operation:"or",group:t.length>1})}),operation:"and",group:!1}))),i.isEmpty(this.props.filter.caseLists)||t.push(r.createElement("div",{className:No.a.parentGroupLogic},r.createElement(Xo,{components:this.props.filter.caseLists.map(function(t){return r.createElement(Xo,{components:e.groupedCaseLists(t),operation:"or",group:t.length>1})}),operation:"and",group:!1}))),this.props.filter.sampleTreatmentFilters&&this.props.filter.sampleTreatmentFilters.filters.length>0){var a=this.renderTreatmentFilter(this.props.filter.sampleTreatmentFilters);t.push(a)}if(this.props.filter.patientTreatmentFilters&&this.props.filter.patientTreatmentFilters.filters.length>0){var s=this.renderTreatmentFilter(this.props.filter.patientTreatmentFilters);t.push(s)}return t}}])&&$o(n.prototype,o),a&&$o(n,a),t}();oi([u.computed],ii.prototype,"showFilters",null),oi([u.computed],ii.prototype,"allComponents",null);var ai=ii=oi([s.observer],ii);function si(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function li(e,t){return!t||"object"!==pi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ui(e){return(ui=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ci(e,t){return(ci=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pi(e){return(pi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var di=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":pi(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},fi=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),li(this,ui(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ci(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement("div",{className:"headBlock","data-test":"study-view-header"},i.keys(this.props.store.pageStatusMessages).length>0&&r.createElement("div",null,i.values(this.props.store.pageStatusMessages).map(function(e){return r.createElement("div",{className:"alert alert-".concat(e.status)},e.message)})),r.createElement("div",{style:{display:"flex"}},r.createElement(Ao,{hasRawDataForDownload:this.props.store.hasRawDataForDownload.result,studies:this.props.store.displayedStudies.result,originStudies:this.props.store.originStudies,showOriginStudiesInSummaryDescription:this.props.store.showOriginStudiesInSummaryDescription,isMixedReferenceGenome:this.props.store.isMixedReferenceGenome}),r.createElement(So,{store:this.props.store})),this.props.store.clinicalAttributeIdToDataType.isComplete&&r.createElement(ai,{filter:this.props.store.userSelections,comparisonGroupSelection:this.props.store.filterComparisonGroups,numberOfSelectedSamplesInCustomSelection:this.props.store.numberOfSelectedSamplesInCustomSelection,customChartsFilter:this.props.store.customChartFilterSet.toJS(),attributesMetaSet:this.props.store.chartMetaSetWithChartType,clinicalAttributeIdToDataType:this.props.store.clinicalAttributeIdToDataType.result,updateClinicalDataFilterByValues:this.props.store.updateClinicalDataFilterByValues,updateGenomicDataIntervalFilter:this.props.store.updateGenomicDataIntervalFiltersByValues,updateCustomChartFilter:this.props.store.setCustomChartFilters,removeGeneFilter:this.props.store.removeGeneFilter,removeCustomSelectionFilter:this.props.store.removeCustomSelectFilter,removeComparisonGroupSelectionFilter:this.props.store.removeComparisonGroupSelectionFilter,onBookmarkClick:this.props.onBookmarkClick,clearAllFilters:this.props.store.clearAllFilters,molecularProfileNameSet:this.props.store.molecularProfileNameSet.result||{},removeGenomicProfileFilter:this.props.store.removeGenomicProfileFilter,caseListNameSet:this.props.store.caseListNameSet.result||{},removeCaseListsFilter:this.props.store.removeCaseListsFilter,removeSampleTreatmentsFilter:this.props.store.removeSampleTreatmentsFilter,removePatientTreatmentsFilter:this.props.store.removePatientTreatmentsFilter}))}}])&&si(n.prototype,o),a&&si(n,a),t}(),hi=fi=di([s.observer],fi),mi=n(970),yi=n(833),bi=n(29),gi=n(972);function vi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Si(e,t){return!t||"object"!==Ti(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ci(e){return(Ci=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _i(e,t){return(_i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ti(e){return(Ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ei=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Ti(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},wi=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Si(this,Ci(t).call(this,e))).renderingComplete=!1,n.segmentTrackMaxHeight=.7*C.a.size.height,n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_i(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=this;return r.createElement("div",null,r.createElement(Re.a,{isLoading:this.isHidden,size:"big",center:!0},r.createElement(je.a,{getItems:function(){return e.progressItems},show:this.isHidden,sequential:!0})),r.createElement("div",{style:{marginBottom:15,marginLeft:15}},r.createElement("span",null,this.hasNoSegmentData?"No segmented":"Segmented"," ","copy-number data for the selected"," ",this.props.store.selectedSamples.result&&this.props.store.selectedSamples.result.length," ",this.props.store.selectedSamples.result&&1===this.props.store.selectedSamples.result.length?"sample.":"samples."),!this.hasNoSegmentData&&r.createElement(gi.a,{promise:this.activePromise,filename:this.filename})),r.createElement("div",{style:this.isHidden||this.hasNoSegmentData?{opacity:0}:void 0},r.createElement(mi.a,{tracks:[Object.assign(Object.assign({},Object(yi.c)()),{height:this.segmentTrackHeight,features:this.features})],genome:this.genome,onRenderingStart:this.onIgvRenderingStart,onRenderingComplete:this.onIgvRenderingComplete,isVisible:this.props.store.currentTab===Ae.a.CN_SEGMENTS&&!this.isHidden})))}},{key:"onIgvRenderingStart",value:function(){this.renderingComplete=!1}},{key:"onIgvRenderingComplete",value:function(){this.renderingComplete=!0}},{key:"segmentTrackHeight",get:function(){return Object(yi.b)(this.features,this.segmentTrackMaxHeight)}},{key:"features",get:function(){var e=this.activePromise&&this.activePromise.result||[];return Object(yi.d)(e)}},{key:"filename",get:function(){return"".concat(this.props.store.downloadFilenamePrefix,"segments.seg")}},{key:"isHidden",get:function(){return this.isLoading||!this.renderingComplete}},{key:"isLoading",get:function(){return!this.activePromise||this.activePromise.isPending}},{key:"activePromise",get:function(){return this.props.store.cnSegments}},{key:"progressItems",get:function(){return[{label:"Loading copy number segments data...",promises:[this.activePromise]},{label:"Rendering"}]}},{key:"hasNoSegmentData",get:function(){return this.activePromise.isComplete&&(!this.activePromise.result||0===this.activePromise.result.length)}},{key:"genome",get:function(){var e=this.props.store.queriedPhysicalStudies.result?this.props.store.queriedPhysicalStudies.result[0]:void 0;return e?e.referenceGenome:bi.a}}])&&vi(n.prototype,o),i&&vi(n,i),t}();Ei([u.observable],wi.prototype,"renderingComplete",void 0),Ei([u.observable],wi.prototype,"segmentTrackMaxHeight",void 0),Ei([u.computed],wi.prototype,"segmentTrackHeight",null),Ei([u.computed],wi.prototype,"features",null),Ei([u.computed],wi.prototype,"filename",null),Ei([u.computed],wi.prototype,"isHidden",null),Ei([u.computed],wi.prototype,"isLoading",null),Ei([u.computed],wi.prototype,"activePromise",null),Ei([u.computed],wi.prototype,"progressItems",null),Ei([u.computed],wi.prototype,"hasNoSegmentData",null),Ei([u.computed],wi.prototype,"genome",null),Ei([b.default,u.action],wi.prototype,"onIgvRenderingStart",null),Ei([b.default,u.action],wi.prototype,"onIgvRenderingComplete",null);var Oi=wi=Ei([s.observer],wi),Ii=(n(1271),n(885)),ki=n(1128);function Pi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ai(e,t){return!t||"object"!==Di(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ri(e){return(Ri=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ni(e,t){return(Ni=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Di(e){return(Di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ji=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Di(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},xi=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ai(this,Ri(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ni(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement("div",{className:"alert alert-success",style:{marginTop:"10px",marginBottom:"0"}},r.createElement("span",null,r.createElement("i",{className:"fa fa-md fa-check"})," ",this.props.message))}}])&&Pi(n.prototype,o),i&&Pi(n,i),t}(),Mi=xi=ji([s.observer],xi),Gi=n(1274),Fi=n.n(Gi),Li=n(112),Bi=n(110),Vi=n(289);function Ui(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qi(e,t){return!t||"object"!==Qi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ki(e){return(Ki=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hi(e,t){return(Hi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qi(e){return(Qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Wi=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Qi(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},zi=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=qi(this,Ki(t).apply(this,arguments))).genomicChartSelection=Object(Bi.a)({await:function(){return[e.props.molecularProfileOptionsPromise]},render:function(){return 0===e.props.molecularProfileOptionsPromise.result.length?r.createElement("div",{style:{textAlign:"center"}},"No molecular profiles found"):r.createElement("div",null,r.createElement(po.b,{inputGeneQuery:e._queryStr,validateInputGeneQuery:!1,callback:function(){e._oql=arguments.length<=0?void 0:arguments[0],e._genes=arguments.length<=1?void 0:arguments[1],e._queryStr=arguments.length<=2?void 0:arguments[2]},location:po.a.DEFAULT,textBoxPrompt:"Enter gene symbols",textAreaHeight:"40px"}),e.hasOQL&&r.createElement("div",{className:rt()("alert",Fi.a.oqlerror)},r.createElement("span",{className:"fa fa-exclamation-circle"}),"OQL not allowed"),r.createElement("div",{style:{display:"flex",marginTop:"10px"}},r.createElement("div",{style:{minWidth:290,width:290,marginRight:15}},r.createElement(Li.default,{value:e.selectedOption,onChange:e.handleSelect,options:e.molecularProfileOptions,isClearable:!1,isSearchable:!1})),r.createElement("button",{disabled:e.isQueryInvalid||e.hasOQL,className:"btn btn-primary btn-sm","data-test":"GeneLevelSelectionSubmitButton",onClick:e.onAddChart},e.props.submitButtonText)))},renderPending:function(){return r.createElement("div",{style:{textAlign:"center",marginTop:"20px"}},r.createElement(Re.a,{isLoading:!0}),"Calculating data availability...")},renderError:function(){return r.createElement("div",null,r.createElement(Vi.a,{message:"There was an error loading data. Please try again."}))}}),e}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hi(e,t)}(t,r["Component"]),n=t,(o=[{key:"onAddChart",value:function(){var e=this;if(void 0!==this.selectedOption){var t=this.validGenes.map(function(t){return{name:t.hugoGeneSymbol+": "+e.selectedOption.profileName,description:e.selectedOption.description,profileType:e.selectedOption.value,hugoGeneSymbol:t.hugoGeneSymbol}});this.props.onSubmit(t)}}},{key:"handleSelect",value:function(e){e&&e.value&&(this._selectedProfileOption=e)}},{key:"render",value:function(){return this.genomicChartSelection.component}},{key:"selectedOption",get:function(){return void 0!==this._selectedProfileOption?this._selectedProfileOption:this.props.molecularProfileOptionsPromise.isComplete?this.molecularProfileOptions[0]:void 0}},{key:"isQueryInvalid",get:function(){return""===this._queryStr||void 0===this._oql||void 0===this._genes||!i.isUndefined(this._oql.error)||0!==this._genes.suggestions.length}},{key:"hasOQL",get:function(){return!this.isQueryInvalid&&i.some(this._oql.query,function(e){return!1!==e.alterations})}},{key:"validGenes",get:function(){return this.isQueryInvalid||this.hasOQL?[]:this._genes.found}},{key:"molecularProfileOptions",get:function(){return this.props.molecularProfileOptionsPromise.isComplete?this.props.molecularProfileOptionsPromise.result.map(function(e){return Object.assign(Object.assign({},e),{label:"".concat(e.label," (").concat(e.count," samples)"),profileName:e.label})}):[]}}])&&Ui(n.prototype,o),a&&Ui(n,a),t}();zi.defaultProps={disableGrouping:!1},Wi([u.observable],zi.prototype,"_selectedProfileOption",void 0),Wi([u.observable],zi.prototype,"_oql",void 0),Wi([u.observable],zi.prototype,"_genes",void 0),Wi([u.observable],zi.prototype,"_queryStr",void 0),Wi([b.default,u.action],zi.prototype,"onAddChart",null),Wi([b.default,u.action],zi.prototype,"handleSelect",null),Wi([u.computed],zi.prototype,"selectedOption",null),Wi([u.computed],zi.prototype,"isQueryInvalid",null),Wi([u.computed],zi.prototype,"hasOQL",null),Wi([u.computed],zi.prototype,"validGenes",null),Wi([u.computed],zi.prototype,"molecularProfileOptions",null);var Yi=zi=Wi([s.observer],zi);function Ji(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xi(e,t,n){return t&&Zi(e.prototype,t),n&&Zi(e,n),e}function $i(e,t){return!t||"object"!==oa(t)&&"function"!=typeof t?ta(e):t}function ea(e){return(ea=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ta(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function na(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ra(e,t)}function ra(e,t){return(ra=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oa(e){return(oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ia,aa=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":oa(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},sa=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};!function(e){e.CUSTOM_DATA="Custom Data",e.CLINICAL="Clinical",e.GENOMIC="Genomic",e.GENE_SPECIFIC="Gene Specific"}(ia||(ia={}));var la=function(e){function t(e,n){var r;return Ji(this,t),(r=$i(this,ea(t).call(this,e,n))).activeId=y.a.CLINICAL,r.infoMessage="",r.dataCount=Object(G.T)({await:function(){return[r.props.store.dataWithCount,r.props.store.selectedSamples]},invoke:function(){return sa(ta(r),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(y.h)(this.props.store.dataWithCount.result,this.props.store.selectedSamples.result.length));case 1:case"end":return e.stop()}},e,this)}))},default:{}}),r}return na(t,r["Component"]),Xi(t,[{key:"updateActiveId",value:function(e){this.activeId=e,this.resetInfoMessage()}},{key:"onInfoMessageChange",value:function(e){this.infoMessage=e,this.props.onInfoMessageChange&&this.props.onInfoMessageChange(e),setTimeout(this.resetInfoMessage,5e3)}},{key:"resetInfoMessage",value:function(){this.infoMessage=""}},{key:"onAddAll",value:function(e){this.props.store.addCharts(this.selectedAttrs.concat(e));var t="".concat(e.length," chart").concat(e.length>1?"s":""," added");this.props.currentTab===Ae.a.CLINICAL_DATA?this.infoMessage="".concat(e.length," column").concat(e.length>1?"s":""," added to table and ").concat(t," in Summary tab"):this.props.currentTab===Ae.a.SUMMARY?this.infoMessage=t:this.infoMessage="Added"}},{key:"onClearAll",value:function(e){this.props.store.updateChartsVisibility(i.reduce(this.selectedAttrs,function(t,n){return e.includes(n)||t.push(n),t},[]));var t="".concat(e.length," chart").concat(e.length>1?"s":""," removed");this.props.currentTab===Ae.a.CLINICAL_DATA?this.infoMessage="".concat(e.length," column").concat(e.length>1?"s":""," removed from table and ").concat(t," from Summary tab"):this.props.currentTab===Ae.a.SUMMARY?this.infoMessage=t:this.infoMessage="Removed"}},{key:"onToggleOption",value:function(e){var t=this.props.store.chartMetaSet[e];if(void 0!==t){var n=I.b[this.props.store.chartsType.get(e)];if(this.selectedAttrs.includes(e)){this.props.store.resetFilterAndChangeChartVisibility(e,!1);var r="";this.props.currentTab===Ae.a.SUMMARY?r=" ".concat(n):this.props.currentTab===Ae.a.CLINICAL_DATA&&(r=" column"),Object(A.f)({category:"studyPage",action:"removeChart",label:e}),this.infoMessage="".concat(t.displayName).concat(r," is removed")}else{this.props.store.addCharts(this.selectedAttrs.concat([e]));var o="";this.props.currentTab===Ae.a.SUMMARY?o=" as a ".concat(n):this.props.currentTab===Ae.a.CLINICAL_DATA&&(o=" to table and as ".concat(n," in Summary tab")),this.infoMessage="".concat(t.displayName," added").concat(o),Object(A.f)({category:"studyPage",action:"addChart",label:e})}}}},{key:"render",value:function(){var e=this;return r.createElement("div",{style:{width:"400px",display:"flex",flexDirection:"column"}},r.createElement(l.b,{unmountOnHide:!1,activeTabId:this.activeId,onTabClick:this.updateActiveId,className:"addChartTabs mainTabs"},r.createElement(l.a,{key:0,id:y.a.CLINICAL,linkText:ia.CLINICAL,className:"addClinicalChartTab"},r.createElement(Ii.a,{options:this.clinicalDataOptions,freqPromise:this.dataCount,onAddAll:this.onAddAll,onClearAll:this.onClearAll,onToggleOption:this.onToggleOption})),r.createElement(l.a,{key:1,id:y.a.GENOMIC,linkText:ia.GENOMIC,hide:this.props.disableGenomicTab,className:"addGenomicChartTab"},r.createElement(Ii.a,{options:this.genomicDataOptions,freqPromise:this.dataCount,onAddAll:this.onAddAll,onClearAll:this.onClearAll,onToggleOption:this.onToggleOption})),r.createElement(l.a,{key:2,id:y.a.GENE_SPECIFIC,linkText:ia.GENE_SPECIFIC,hide:this.hideGeneSpecificTab},r.createElement(Yi,{molecularProfileOptionsPromise:this.props.store.molecularProfileOptions,submitButtonText:"Add Chart",onSubmit:function(t){if(1===t.length){var n=Object(y.P)(t[0].hugoGeneSymbol,t[0].profileType);e.infoMessage="".concat(t[0].name," ").concat(e.selectedAttrs.includes(n)?"is already":"has been"," added.")}else e.infoMessage="".concat(t.length," charts added");e.props.store.addGeneSpecificCharts(t)}}),this.geneSpecificDataOptions.length>0&&r.createElement("div",{style:{marginTop:"10px"}},r.createElement(Ii.a,{options:this.geneSpecificDataOptions,freqPromise:this.dataCount,onAddAll:this.onAddAll,onClearAll:this.onClearAll,onToggleOption:this.onToggleOption,hideControls:!0,firstColumnHeaderName:"Gene Specific Chart"}))),r.createElement(l.a,{key:3,id:y.a.CUSTOM_DATA,linkText:ia.CUSTOM_DATA,hide:this.props.disableCustomTab,className:"custom"},r.createElement(ki.a,{allSamples:this.props.store.samples.result,selectedSamples:this.props.store.selectedSamples.result,submitButtonText:"Add Chart",queriedStudies:this.props.store.queriedPhysicalStudyIds.result,isChartNameValid:this.props.store.isChartNameValid,getDefaultChartName:this.props.store.getDefaultCustomChartName,onSubmit:function(t){e.infoMessage="".concat(t.name," has been added."),e.props.store.addCustomChart(t)}}),this.customChartDataOptions.length>0&&r.createElement("div",{style:{marginTop:"10px"}},r.createElement(Ii.a,{options:this.customChartDataOptions,freqPromise:this.dataCount,onAddAll:this.onAddAll,onClearAll:this.onClearAll,onToggleOption:this.onToggleOption,hideControls:!0,firstColumnHeaderName:"Custom Chart"})))),this.props.store.isLoggedIn&&this.props.currentTab===Ae.a.SUMMARY&&this.props.store.showResetToDefaultButton&&r.createElement("button",{style:{position:"absolute",top:"14px",right:"18px",zIndex:2},className:"btn btn-primary btn-xs",onClick:this.props.showResetPopup},"Reset charts"),this.infoMessage&&r.createElement(Mi,{message:this.infoMessage}))}},{key:"groupedChartMetaByDataType",get:function(){return i.chain(this.props.store.chartMetaSet).values().groupBy(function(e){return e.dataType}).value()}},{key:"genomicDataOptions",get:function(){var e=Object(y.X)(this.groupedChartMetaByDataType[y.a.GENOMIC]||[],this.selectedAttrs,this.props.store.chartsType.toJS());return this.props.currentTab===Ae.a.CLINICAL_DATA?e.filter(function(e){return e.chartType===I.a.BAR_CHART||e.chartType===I.a.PIE_CHART}):e}},{key:"geneSpecificDataOptions",get:function(){var e=Object(y.X)(this.groupedChartMetaByDataType[y.a.GENE_SPECIFIC]||[],this.selectedAttrs,this.props.store.chartsType.toJS());return this.props.currentTab===Ae.a.CLINICAL_DATA?e.filter(function(e){return e.chartType===I.a.BAR_CHART||e.chartType===I.a.PIE_CHART}):e}},{key:"clinicalDataOptions",get:function(){return Object(y.X)(this.groupedChartMetaByDataType[y.a.CLINICAL]||[],this.selectedAttrs,this.props.store.chartsType.toJS())}},{key:"customChartDataOptions",get:function(){return Object(y.X)(this.groupedChartMetaByDataType[y.a.CUSTOM_DATA]||[],this.selectedAttrs,this.props.store.chartsType.toJS())}},{key:"selectedAttrs",get:function(){return this.props.store.visibleAttributes.map(function(e){return e.uniqueKey})}},{key:"hideGeneSpecificTab",get:function(){return this.props.disableGeneSpecificTab||!this.props.store.molecularProfileOptions.isComplete||this.props.store.molecularProfileOptions.isComplete&&0===this.props.store.molecularProfileOptions.result.length}}]),t}();la.defaultProps={disableGenomicTab:!1,disableCustomTab:!1,disableGeneSpecificTab:!1},aa([u.observable],la.prototype,"activeId",void 0),aa([u.observable],la.prototype,"infoMessage",void 0),aa([b.default,u.action],la.prototype,"updateActiveId",null),aa([b.default,u.action],la.prototype,"onInfoMessageChange",null),aa([b.default,u.action],la.prototype,"resetInfoMessage",null),aa([u.computed],la.prototype,"groupedChartMetaByDataType",null),aa([u.computed],la.prototype,"genomicDataOptions",null),aa([u.computed],la.prototype,"geneSpecificDataOptions",null),aa([u.computed],la.prototype,"clinicalDataOptions",null),aa([u.computed],la.prototype,"customChartDataOptions",null),aa([u.computed],la.prototype,"selectedAttrs",null),aa([u.computed],la.prototype,"hideGeneSpecificTab",null),aa([b.default,u.action],la.prototype,"onAddAll",null),aa([b.default],la.prototype,"onClearAll",null),aa([b.default,u.action],la.prototype,"onToggleOption",null),la=aa([s.observer],la);var ua=function(e){function t(){var e;return Ji(this,t),(e=$i(this,ea(t).apply(this,arguments))).showTooltip=!1,e}return na(t,r["Component"]),Xi(t,[{key:"render",value:function(){var e=this;return r.createElement(G.d,{visible:this.showTooltip,onVisibleChange:function(t){return e.showTooltip=!!t},trigger:["click"],placement:"bottomRight",destroyTooltipOnHide:!1,overlay:function(){return r.createElement(la,{store:e.props.store,currentTab:e.props.currentTab,disableGenomicTab:e.props.disableGenomicTab,disableGeneSpecificTab:e.props.disableGeneSpecificTab,disableCustomTab:e.props.disableCustomTab,showResetPopup:e.props.showResetPopup})},overlayClassName:this.props.addChartOverlayClassName},r.createElement("button",{className:rt()("btn btn-primary btn-sm",{active:this.showTooltip}),style:{marginLeft:"10px"},"aria-pressed":this.showTooltip,"data-event":Object(A.e)({category:"studyPage",action:"addChartMenuOpen",label:this.props.store.studyIds.join(",")}),"data-test":"add-charts-button"},this.props.buttonText))}}]),t}();aa([u.observable],ua.prototype,"showTooltip",void 0);var ca=ua=aa([s.observer],ua),pa=n(76),da=n.n(pa);function fa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ha(e,t){return!t||"object"!==ba(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ma(e){return(ma=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ya(e,t){return(ya=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ba(e){return(ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ga=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ba(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},va=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=ha(this,ma(t).apply(this,arguments))).downloadingData=!1,e.showDownloadErrorMessage=!1,e}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ya(e,t)}(t,r["Component"]),n=t,(o=[{key:"initiateDownload",value:function(){var e=this;this.downloadingData=!0,this.showDownloadErrorMessage=!1,this.props.store.getDownloadDataPromise().then(function(t){e.downloadingData=!1,da()(t,e.props.store.clinicalDataDownloadFilename)}).catch(function(){e.downloadingData=!1,e.showDownloadErrorMessage=!0})}},{key:"openCases",value:function(){if(!i.isEmpty(this.props.store.selectedPatients)){var e=this.props.store.selectedPatients[0],t=i.map(this.props.store.selectedPatients,function(e){return{patientId:e.patientId,studyId:e.studyId}});if(t.length>=2e3)window.open(Object(k.w)(e.studyId,e.patientId)).clientPostedData={navCaseIds:t};else window.open(Object(k.w)(e.studyId,e.patientId,t))}}},{key:"render",value:function(){return r.createElement("div",{className:rt()(No.a.actionButtons,"btn-group")},r.createElement(G.d,{trigger:["hover"],placement:"top",overlay:r.createElement("span",null,"View selected cases")},r.createElement("button",{className:"btn btn-default btn-sm",disabled:!this.props.loadingComplete,onClick:this.openCases,"data-event":Object(A.e)({category:"studyPage",action:"viewPatientCohort",label:this.props.store.queriedPhysicalStudyIds.result})},r.createElement("i",{className:"fa fa-user-circle-o"}))),r.createElement(G.d,{trigger:["click"],destroyTooltipOnHide:!0,overlay:this.virtualStudy,placement:"bottom"},r.createElement(G.d,{placement:"top",trigger:["hover"],overlay:r.createElement("span",null,this.virtualStudyButtonTooltip)},r.createElement("button",{className:"btn btn-default btn-sm",disabled:!this.props.loadingComplete},r.createElement("i",{className:"fa fa-bookmark"})))),r.createElement(G.d,{trigger:["hover"],placement:"top",overlay:r.createElement("span",null,this.downloadButtonTooltip)},r.createElement("button",{className:"btn btn-default btn-sm",disabled:!this.props.loadingComplete,onClick:this.initiateDownload,"data-event":Object(A.e)({category:"studyPage",action:"dataDownload",label:this.props.store.queriedPhysicalStudyIds.result})},r.createElement(De.If,{condition:this.downloadingData},r.createElement(De.Then,null,r.createElement("i",{className:"fa fa-spinner fa-spin"})),r.createElement(De.Else,null,r.createElement("i",{className:"fa fa-download"}))))))}},{key:"virtualStudyButtonTooltip",get:function(){return(this.props.appStore.isLoggedIn?"Save/":"")+"Share Virtual Study"}},{key:"downloadButtonTooltip",get:function(){return this.showDownloadErrorMessage?"An error occurred while downloading the data. Please try again.":"Download clinical data for the selected cases"}},{key:"virtualStudy",get:function(){return this.props.loadingComplete?r.createElement(Co.b,{user:this.props.appStore.userName,name:this.props.store.isSingleVirtualStudyPageWithoutFilter?this.props.store.filteredVirtualStudies.result[0].data.name:void 0,description:this.props.store.isSingleVirtualStudyPageWithoutFilter?this.props.store.filteredVirtualStudies.result[0].data.description:void 0,studyWithSamples:this.props.store.studyWithSamples.result,selectedSamples:this.props.store.selectedSamples.result,filter:this.props.store.userSelections,attributesMetaSet:this.props.store.chartMetaSet,molecularProfileNameSet:this.props.store.molecularProfileNameSet.result||{},caseListNameSet:this.props.store.caseListNameSet.result||{}}):null}}])&&fa(n.prototype,o),a&&fa(n,a),t}();ga([u.observable],va.prototype,"downloadingData",void 0),ga([u.observable],va.prototype,"showDownloadErrorMessage",void 0),ga([b.default],va.prototype,"initiateDownload",null),ga([b.default],va.prototype,"openCases",null),ga([u.computed],va.prototype,"virtualStudyButtonTooltip",null),ga([u.computed],va.prototype,"downloadButtonTooltip",null),ga([u.computed],va.prototype,"virtualStudy",null);var Sa=va=ga([s.observer],va),Ca=n(801),_a=n.n(Ca),Ta=n(824);function Ea(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wa(e,t){return!t||"object"!==ka(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Oa(e){return(Oa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ia(e,t){return(Ia=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ka(e){return(ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Pa=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ka(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Aa=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),wa(this,Oa(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ia(e,t)}(t,r["Component"]),n=t,(o=[{key:"onCheckboxClick",value:function(){this.props.store.toggleComparisonGroupSelected(this.props.group.uid)}},{key:"onRestoreClick",value:function(){this.props.restore(this.props.group)}},{key:"onDeleteClick",value:function(){this.props.delete(this.props.group)}},{key:"shareGroup",value:function(){this.props.shareGroup(this.props.group)}},{key:"render",value:function(){var e,t,n,o,i=this.props.group;return e=this.props.markedForDeletion?r.createElement("span",{className:_a.a.markedForDeletion},this.label):r.createElement("div",{className:_a.a.groupItem,style:{display:"flex",alignItems:"center"}},r.createElement("input",{type:"checkbox",value:i.uid,checked:this.props.store.isComparisonGroupSelected(i.uid),onClick:this.onCheckboxClick}),this.label),r.createElement("div",{key:i.uid,className:rt()(_a.a.groupRow,(t={},n=_a.a.sharedGroup,o=this.props.group.isSharedGroup,n in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,t)),style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingBottom:4,paddingTop:4,minHeight:"35px"}},e,r.createElement("div",{className:_a.a.groupLineItemActionButtons},!this.props.markedForDeletion&&r.createElement(r.Fragment,null,r.createElement(G.d,{overlay:"Delete Group"},r.createElement("span",{onClick:this.onDeleteClick},r.createElement("i",{className:"fa fa-md fa-trash",style:{cursor:"pointer"}}))),r.createElement("span",{onClick:this.shareGroup},r.createElement("i",{className:"fa fa-share-alt",style:{cursor:"pointer"}}))),this.props.group.nonExistentSamples.length>0&&r.createElement(Ta.a,{tooltip:r.createElement(N.e,{samples:this.props.group.nonExistentSamples})}),this.props.markedForDeletion&&r.createElement("button",{style:{marginLeft:10},className:"btn btn-xs btn-default",onClick:this.onRestoreClick},"Restore")))}},{key:"label",get:function(){return r.createElement("span",{style:{display:"flex",alignItems:"center"}},r.createElement(G.g,{text:this.props.group.name}),"(",Object(N.i)(Object(N.s)(this.props.group),Object(N.r)(this.props.group)),")")}}])&&Ea(n.prototype,o),i&&Ea(n,i),t}();Pa([b.default],Aa.prototype,"onCheckboxClick",null),Pa([b.default],Aa.prototype,"onRestoreClick",null),Pa([b.default],Aa.prototype,"onDeleteClick",null),Pa([b.default],Aa.prototype,"shareGroup",null),Pa([u.computed],Aa.prototype,"label",null);var Ra=Aa=Pa([s.observer],Aa),Na=n(360);function Da(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ja(e,t){return!t||"object"!==Ga(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xa(e){return(xa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ma(e,t){return(Ma=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ga(e){return(Ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Fa=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Ga(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},La=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},Ba=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=ja(this,xa(t).apply(this,arguments))).groupNameFilter="",e.addGroupPanelOpen=!1,e._inputGroupName="",e.addSamplesTargetGroupId="",e.filteredGroups=Object(G.T)({await:function(){return[e.props.store.comparisonGroups]},invoke:function(){return Promise.resolve(a.a.sortBy(e.props.store.comparisonGroups.result.filter(function(t){return new RegExp(e.groupNameFilter,"i").test(t.name)}),function(e){return e.name.toLowerCase()}))}}),e.groupsSection=Object(Bi.a)({await:function(){return[e.props.store.comparisonGroups,e.filteredGroups,e.props.store.selectedSamples]},render:function(){return e.props.store.comparisonGroups.result.length>0?r.createElement("div",{className:_a.a.groupCheckboxes},e.filteredGroups.result.length>0?e.filteredGroups.result.map(function(t){return r.createElement(Ra,{group:t,store:e.props.store,markedForDeletion:e.props.store.isComparisonGroupMarkedForDeletion(t.uid),restore:e.restoreGroup,delete:e.deleteGroup,studyIds:e.props.store.studyIds,shareGroup:e.shareSingleGroup})}):r.createElement("div",{className:_a.a.noGroupsMessage},"No results for your current search.")):r.createElement("div",{className:_a.a.noGroupsMessage},"Group comparison allows you to create custom groups and compare their clinical and genomic features. Use the button below to create groups based on selections.")},renderPending:function(){return r.createElement(Re.a,{isLoading:!0})},renderError:function(){return r.createElement("div",{className:_a.a.noGroupsMessage},r.createElement(Vi.a,{message:"There was an error loading saved groups. Please try again."}))}}),e.actionButtons=Object(Bi.a)({await:function(){return[e.props.store.comparisonGroups]},render:function(){return e.props.store.comparisonGroups.result.length>0?r.createElement("div",{style:{marginTop:6}},e.compareButton,e.viewButton,e.shareButton):null}}),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ma(e,t)}(t,r["Component"]),n=t,(o=[{key:"onChangeGroupNameFilter",value:function(e){this.groupNameFilter=e.target.value}},{key:"onChangeInputGroupName",value:function(e){this._inputGroupName=e.target.value}},{key:"showAddGroupPanel",value:function(){this.addGroupPanelOpen=!0,this._inputGroupName=Object(N.p)(this.props.store.filters,this.props.store.customChartFilterSet.toJS(),this.props.store.clinicalAttributeIdToDataType.result)}},{key:"cancelAddGroup",value:function(){this.addGroupPanelOpen=!1,this._inputGroupName="",this.addSamplesTargetGroupId=""}},{key:"deleteGroup",value:function(e){this.props.store.toggleComparisonGroupMarkedForDeletion(e.uid)}},{key:"selectAllFiltered",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,o=this.filteredGroups.result[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var i=r.value;this.props.store.setComparisonGroupSelected(i.uid,!0)}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}}},{key:"deselectAllFiltered",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,o=this.filteredGroups.result[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var i=r.value;this.props.store.setComparisonGroupSelected(i.uid,!1)}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}}},{key:"restoreGroup",value:function(e){this.props.store.toggleComparisonGroupMarkedForDeletion(e.uid)}},{key:"shareSingleGroup",value:function(e){this.props.shareGroups([e])}},{key:"shareGroups",value:function(){var e=Object(L.b)(this.props.store.comparisonGroups.result||[],this.props.store);this.props.shareGroups(e)}},{key:"submitNewGroup",value:function(){return La(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.store.selectedSamples.isComplete?this.props.store.selectedSamples.result:void 0,e.next=3,R.a.addGroup(Object(L.a)(this.inputGroupName,t,this.props.store.studyIds));case 3:n=e.sent,r=n.id,this.props.store.notifyComparisonGroupsChange(),this.props.store.setComparisonGroupSelected(r),this.cancelAddGroup();case 8:case"end":return e.stop()}},e,this)}))}},{key:"componentWillUnmount",value:function(){this.props.store.deleteMarkedComparisonGroups()}},{key:"render",value:function(){return r.createElement("div",{className:_a.a.comparisonGroupManager,style:{position:"relative"}},this.header,this.groupsSection.component,this.notificationMessages.length>0&&r.createElement(r.Fragment,null,r.createElement("br",null),r.createElement("i",{className:"text-warning"},"Note: ",this.notificationMessages)),this.actionButtons.component,r.createElement("hr",null),this.addGroupPanel)}},{key:"inputGroupName",get:function(){return this._inputGroupName}},{key:"header",get:function(){return r.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",marginTop:3,alignItems:"center",marginBottom:10}},r.createElement("div",{className:"btn-group",role:"group"},r.createElement("button",{className:"btn btn-default btn-xs",onClick:this.selectAllFiltered},"Select all",this.filteredGroups.isComplete?"(".concat(this.filteredGroups.result.length,")"):""),r.createElement("button",{className:"btn btn-default btn-xs",onClick:this.deselectAllFiltered},"Deselect all")),r.createElement("input",{className:"form-control",style:{right:0,width:140,height:25},type:"text",placeholder:"Search..",value:this.groupNameFilter,onChange:this.onChangeGroupNameFilter}))}},{key:"viewButton",get:function(){var e=this;return this.props.store.comparisonGroups.isComplete&&this.props.store.comparisonGroups.result.length>0?r.createElement("button",{className:"btn btn-sm btn-default",disabled:0===Object(L.b)(this.props.store.comparisonGroups.result,this.props.store).length,style:{marginLeft:7},onClick:function(){e.props.store.clearAllFilters(),e.props.store.updateComparisonGroupsFilter()}},"Filter"):null}},{key:"shareButton",get:function(){return this.props.store.comparisonGroups.isComplete&&this.props.store.comparisonGroups.result.length>0?r.createElement("button",{className:"btn btn-sm btn-default",disabled:0===Object(L.b)(this.props.store.comparisonGroups.result,this.props.store).length,style:{marginLeft:7},onClick:this.shareGroups},"Share"):null}},{key:"allGroupNames",get:function(){return this.props.store.comparisonGroups.isComplete?this.props.store.comparisonGroups.result.map(function(e){return e.name}):void 0}},{key:"submitNewGroupDisabled",get:function(){return!(this.props.store.selectedSamples.isComplete?this.props.store.selectedSamples.result:void 0)||0===this.inputGroupName.length||!this.allGroupNames||this.allGroupNames.includes(this.inputGroupName)}},{key:"compareButton",get:function(){var e=this;if(this.props.store.comparisonGroups.isComplete){var t=Object(L.b)(this.props.store.comparisonGroups.result,this.props.store).length,n=t>N.c||t<2,o="";return o=this.props.store.comparisonGroups.result.length>=2?n?"Select between 2 and ".concat(N.c," groups to enable comparison."):"Open a comparison session with selected groups":"Create at least two groups to open a comparison session",r.createElement(G.d,{overlay:o},r.createElement("button",{className:"btn btn-sm btn-primary",disabled:n,"data-event":Object(A.e)({action:"createCustomComparisonSession",label:this.props.store.comparisonGroups.result.length.toString(),category:"groupComparison"}),onClick:function(){return La(e,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.open(Object(k.f)({phase:D.a.CREATING_SESSION}),"_blank"),e.next=3,Object(j.b)(function(){return!!t.routingStore});case 3:return n=Object(L.b)(this.props.store.comparisonGroups.result,this.props.store),e.next=6,R.a.addComparisonSession({groups:n,origin:this.props.store.studyIds});case 6:r=e.sent,o=r.id,Object(k.D)(t,{sessionId:o});case 9:case"end":return e.stop()}},e,this)}))}},"Compare"))}return null}},{key:"addGroupPanel",get:function(){var e,t=this,n=this.props.store.selectedSamples.isComplete?this.props.store.selectedSamples.result:void 0;return e=this.addGroupPanelOpen?[r.createElement("div",{style:{display:"none",flexDirection:"row",justifyContent:"space-between",width:"100%",marginTop:3}},r.createElement("h5",null,"Add",n?" ".concat(n.length):""," ","selected samples"),r.createElement("button",{className:"btn btn-xs btn-default",style:{right:0,marginTop:-4},onClick:this.cancelAddGroup},"Cancel")),r.createElement("div",{style:{width:"100%",marginTop:7}},r.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%"}},r.createElement(G.d,{visible:this.allGroupNames&&this.allGroupNames.includes(this.inputGroupName),overlay:r.createElement("div",null,r.createElement("i",{className:"fa fa-md fa-exclamation-triangle",style:{color:"#BB1700",marginRight:5}}),r.createElement("span",null,N.b))},r.createElement("input",{className:"form-control",style:{marginRight:5},type:"text",placeholder:"Enter a name for your new group",value:this.inputGroupName,onChange:this.onChangeInputGroupName,onKeyPress:function(e){"Enter"!=e.key||t.submitNewGroupDisabled||t.submitNewGroup()}})),r.createElement("button",{className:"btn btn-sm btn-primary",style:{width:58},onClick:this.submitNewGroup,disabled:this.submitNewGroupDisabled},"Create")))]:r.createElement("button",{className:"btn btn-sm btn-primary","data-event":Object(A.e)({action:"createCustomGroup",label:"",category:"groupComparison"}),onClick:this.showAddGroupPanel,disabled:!n,style:{width:"100%"}},"Create new group from selected samples"," ",n?" (".concat(n.length,")"):""),r.createElement("div",{style:{width:"100%"}},e)}},{key:"existSharedGroups",get:function(){return this.props.store.comparisonGroups.result.filter(function(e){return e.isSharedGroup}).length>0}},{key:"notificationMessages",get:function(){var e,t,n,o=this,i=[];return this.props.store.comparisonGroups.result.length>0&&(this.existSharedGroups&&i.push(r.createElement(r.Fragment,null,r.createElement("span",{className:rt()((e={},t=_a.a.sharedGroup,n=!0,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e))},"Highlighted rows")," ","are shared groups.")),!this.props.store.isLoggedIn&&c.b.serverConfig.authenticationMethod&&c.b.serverConfig.authenticationMethod.includes("social_auth")?i.push(r.createElement(r.Fragment,null,r.createElement("br",null),"The groups above will not be saved without ",r.createElement("button",{className:"btn btn-default btn-xs",onClick:function(){return Object(Na.a)(o.props.store.appStore)}},"Login"),r.createElement("br",null))):this.existSharedGroups&&i.push(r.createElement(r.Fragment,null,"They have been saved to your profile."))),i}}])&&Da(n.prototype,o),i&&Da(n,i),t}();Fa([u.observable],Ba.prototype,"groupNameFilter",void 0),Fa([u.observable],Ba.prototype,"addGroupPanelOpen",void 0),Fa([u.observable],Ba.prototype,"_inputGroupName",void 0),Fa([u.computed],Ba.prototype,"inputGroupName",null),Fa([u.observable],Ba.prototype,"addSamplesTargetGroupId",void 0),Fa([b.default,u.action],Ba.prototype,"onChangeGroupNameFilter",null),Fa([b.default,u.action],Ba.prototype,"onChangeInputGroupName",null),Fa([b.default,u.action],Ba.prototype,"showAddGroupPanel",null),Fa([b.default,u.action],Ba.prototype,"cancelAddGroup",null),Fa([b.default,u.action],Ba.prototype,"deleteGroup",null),Fa([b.default,u.action],Ba.prototype,"selectAllFiltered",null),Fa([b.default,u.action],Ba.prototype,"deselectAllFiltered",null),Fa([b.default],Ba.prototype,"restoreGroup",null),Fa([b.default],Ba.prototype,"shareSingleGroup",null),Fa([b.default],Ba.prototype,"shareGroups",null),Fa([u.computed],Ba.prototype,"allGroupNames",null),Fa([u.computed],Ba.prototype,"submitNewGroupDisabled",null),Fa([b.default,u.action],Ba.prototype,"submitNewGroup",null),Fa([u.computed],Ba.prototype,"existSharedGroups",null),Fa([u.computed],Ba.prototype,"notificationMessages",null);var Va=Ba=Fa([s.observer],Ba),Ua=(n(1275),n(1058)),qa=n(215),Ka=n(963),Ha=n(306),Qa=n(175);function Wa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function za(e,t){return!t||"object"!==Za(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ya(e){return(Ya=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ja(e,t){return(Ja=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Za(e){return(Za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Xa=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Za(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},$a=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),za(this,Ya(t).call(this,e,{tab:{isSessionProp:!1},resourceUrl:{isSessionProp:!1}}))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ja(e,t)}(t,Ha["a"]),n=t,(r=[{key:"setTab",value:function(e){this.updateURL({},"".concat(Qa.a.Study,"/").concat(e))}},{key:"setResourceUrl",value:function(e){this.updateURL({resourceUrl:e})}},{key:"tabId",get:function(){var e=new RegExp("".concat(Qa.a.Study,"/(.+)")).exec(this.pathName);return e&&e[1]||Ae.a.SUMMARY}}])&&Wa(n.prototype,r),o&&Wa(n,o),t}();Xa([u.computed],$a.prototype,"tabId",null);var es=n(829),ts=n(927);function ns(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rs(e,t){return!t||"object"!==as(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function os(e){return(os=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function is(e,t){return(is=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function as(e){return(as="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ss=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":as(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ls=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=rs(this,os(t).apply(this,arguments))).studyResources=Object(Bi.a)({await:function(){return[e.props.store.studyResourceData,e.props.store.queriedPhysicalStudies]},render:function(){return e.props.store.studyResourceData.result.length>0?r.createElement("div",{className:"resourcesSection"},r.createElement("h4",{className:"blackHeader"},"Study Resources for"," ",e.props.store.queriedPhysicalStudies.result[0].name),a.a.sortBy(e.props.store.studyResourceData.result,function(e){return parseFloat(e.resourceDefinition.priority)}).map(function(t){return r.createElement(ts.a,{resource:t,isTabOpen:e.props.store.isResourceTabOpen,openResource:e.props.openResource})})):null}}),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&is(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement("div",{className:"resourcesTab"},r.createElement(es.a,{title:"Files & Links",isLoading:this.studyResources.isPending,className:"pull-left"}),r.createElement("br",null),r.createElement("br",null),r.createElement("div",null,this.studyResources.component))}}])&&ns(n.prototype,o),i&&ns(n,i),t}(),us=ls=ss([s.observer],ls),cs=n(17),ps=n.n(cs);function ds(e){return(ds="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fs(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function hs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ms(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ys(e,t,n){return t&&ms(e.prototype,t),n&&ms(e,n),e}function bs(e,t){return!t||"object"!==_s(t)&&"function"!=typeof t?gs(e):t}function gs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vs(e){return(vs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ss(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cs(e,t)}function Cs(e,t){return(Cs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _s(e){return(_s="function"==typeof Symbol&&"symbol"===ds(Symbol.iterator)?function(e){return ds(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ds(e)})(e)}n.d(t,"StudyResultsSummary",function(){return ws});var Ts=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":_s(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Es=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},ws=function(e){function t(){return hs(this,t),bs(this,vs(t).apply(this,arguments))}return Ss(t,r["Component"]),ys(t,[{key:"render",value:function(){return r.createElement("div",{className:No.a.selectedInfo,"data-test":"selected-info"},r.createElement("strong",null,"Selected:"),r.createElement("strong",{"data-test":"selected-patients"},this.props.store.selectedPatients.length.toLocaleString()),"",r.createElement("strong",null,"patients"),"|",r.createElement("strong",{"data-test":"selected-samples"},this.props.store.selectedSamples.result.length.toLocaleString()),"",r.createElement("strong",null,"samples"))}}]),t}();ws=Ts([s.observer],ws);var Os=function(e){function t(e){var n;hs(this,t),(n=bs(this,vs(t).call(this,e))).enableCustomSelectionInTabs=[Ae.a.SUMMARY,Ae.a.CLINICAL_DATA,Ae.a.CN_SEGMENTS],n.enableAddChartInTabs=[Ae.a.SUMMARY,Ae.a.CLINICAL_DATA],n.toolbarLeft=0,n.showCustomSelectTooltip=!1,n.showReturnToDefaultChartListModal=!1,n.showBookmarkModal=!1,n.shareLinkModal=!1,n.getShareBookmarkUrl=Promise.resolve(null),n.sharedGroups=[],n.chartDataPromises=Object(G.T)({await:function(){return[].concat(fs(i.values(n.store.clinicalDataBinPromises)),fs(i.values(n.store.clinicalDataCountPromises)),fs(i.values(n.store.customChartsPromises)),[n.store.mutationProfiles,n.store.cnaProfiles,n.store.selectedSamples,n.store.molecularProfileSampleCounts,n.store.sampleTreatments,n.store.patientTreatments])},invoke:function(){return Es(gs(n),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.a)(10);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))}}),n.resourceTabs=Object(Bi.a)({await:function(){return[n.store.resourceDefinitions,n.store.resourceIdToResourceData]},render:function(){var e=n.store.resourceDefinitions.result.filter(function(e){return n.store.isResourceTabOpen(e.resourceId)}),t=i.sortBy(e,function(e){return e.priority}),o=n.store.resourceIdToResourceData.result;return t.reduce(function(e,t){var i=o[t.resourceId];return i&&i.length>0&&e.push(r.createElement(l.a,{key:Object(Ae.d)(t.resourceId),id:Object(Ae.d)(t.resourceId),linkText:t.displayName,onClickClose:n.closeResourceTab},r.createElement(Ka.a,{resourceData:o[t.resourceId],urlWrapper:n.urlWrapper}))),e},[])}}),n.urlWrapper=new $a(n.props.routing),n.store=new Pe(n.props.appStore,c.a.sessionServiceIsEnabled(),n.urlWrapper);var o=n.urlWrapper.tabId&&Object(Ae.c)(n.urlWrapper.tabId);if(o&&n.store.setResourceTabOpen(o,!0),Object(G.C)().studyPage=gs(n),!Object(G.C)().globalStores.routing.location.pathname.includes("/study"))return bs(n);var a=e.routing.location.query,s=e.routing.location.hash;e.routing.location.hash="";var u=i.pick(a,["id","studyId","cancer_study_id","filters","filterAttributeId","filterValues"]),p=s||Object(G.C)().studyPageFilter;return delete window.studyPageFilter,p&&(p=p.substring(1)).split("&").forEach(function(e){if(e.startsWith("filterJson")){var t=e.match(/filterJson=([^&]*)/);t&&t.length>1&&(u.filters=t[1])}else if(e.startsWith("sharedGroups")){var r=e.match(/sharedGroups=([^&]*)/);r&&r.length>1&&(u.sharedGroups=r[1],n.store.showComparisonGroupUI=!0)}}),i.isEqual(u,n.store.studyViewQueryFilter)||(n.store.updateStoreFromURL(u),n.store.studyViewQueryFilter=u),Object(P.a)(n.store.queriedPhysicalStudyIds,function(e){var t,r,o;Object(A.f)({category:"studyPage",action:"studyPageLoad",label:e.join(",")+",",fieldsObject:(t={},r=A.a.VirtualStudy,o=(n.store.filteredVirtualStudies.result.length>0).toString(),r in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o,t)})}),n}return Ss(t,r["Component"]),ys(t,[{key:"componentDidMount",value:function(){var e=this;this.props.routing.updateRoute({},"study/".concat(this.store.currentTab),!1,!0),this.toolbarLeftUpdater=setInterval(function(){e.toolbar&&(e.toolbarLeft=ps()(e.toolbar).position().left)},500)}},{key:"toolbarRef",value:function(e){this.toolbar=e}},{key:"handleTabChange",value:function(e){this.urlWrapper.setTab(e)}},{key:"toggleBookmarkModal",value:function(){this.showBookmarkModal=!this.showBookmarkModal}},{key:"toggleShareLinkModal",value:function(){this.shareLinkModal=!this.shareLinkModal,this.sharedGroups=[]}},{key:"openShareUrlModal",value:function(e){this.shareLinkModal=!0,this.sharedGroups=e;var t=e.map(function(e){return e.uid});this.getShareBookmarkUrl=Promise.resolve({bitlyUrl:void 0,fullUrl:"".concat(window.location.protocol,"//").concat(window.location.host).concat(window.location.pathname).concat(window.location.search,"#sharedGroups=").concat(t.join(",")),sessionUrl:void 0})}},{key:"onBookmarkClick",value:function(){this.toggleBookmarkModal()}},{key:"openResource",value:function(e){this.store.setResourceTabOpen(e.resourceId,!0),this.urlWrapper.setTab(Object(Ae.d)(e.resourceId)),this.urlWrapper.setResourceUrl(e.url)}},{key:"closeResourceTab",value:function(e){var t=Object(Ae.c)(e);t&&(this.store.setResourceTabOpen(t,!1),this.urlWrapper.tabId===Object(Ae.d)(t)&&this.urlWrapper.setTab(Ae.a.FILES_AND_LINKS))}},{key:"getBookmarkUrl",value:function(){return Es(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(qa.b)(this.studyViewFullUrlWithFilter,c.b.serverConfig.bitly_access_token);case 2:return t=e.sent,e.abrupt("return",{bitlyUrl:t,fullUrl:this.studyViewFullUrlWithFilter,sessionUrl:void 0});case 4:case"end":return e.stop()}},e,this)}))}},{key:"content",value:function(){var e=this;return r.createElement("div",{className:"studyView"},this.showBookmarkModal&&r.createElement(Ua.a,{onHide:this.toggleBookmarkModal,title:"Bookmark this filter",urlPromise:this.getBookmarkUrl()}),this.shareLinkModal&&r.createElement(Ua.a,{onHide:this.toggleShareLinkModal,title:this.sharedGroups.length>1?"Share ".concat(this.sharedGroups.length," Groups"):"Share Group",urlPromise:this.getShareBookmarkUrl,description:"Please send the following link to users with whom you want to share the selected group(s)."}),this.store.comparisonConfirmationModal,this.store.unknownQueriedIds.isComplete&&this.store.unknownQueriedIds.result.length>0&&r.createElement(it.Alert,{bsStyle:"danger"},r.createElement("span",null,"Unknown/Unauthorized studies"," ",this.store.unknownQueriedIds.result.join(", "))),r.createElement(Re.a,{size:"big",isLoading:this.store.queriedSampleIdentifiers.isPending||this.store.invalidSampleIds.isPending,center:!0}),this.store.queriedSampleIdentifiers.isComplete&&this.store.invalidSampleIds.isComplete&&this.store.unknownQueriedIds.isComplete&&this.store.displayedStudies.isComplete&&this.store.queriedPhysicalStudies.isComplete&&this.store.queriedPhysicalStudies.result.length>0&&r.createElement("div",null,r.createElement(hi,{store:this.store,onBookmarkClick:this.onBookmarkClick}),r.createElement("div",{className:No.a.mainTabs},r.createElement(l.b,{id:"studyViewTabs",activeTabId:this.store.currentTab,onTabClick:function(t){return e.handleTabChange(t)},className:"mainTabs",unmountOnHide:!1,getPaginationWidth:function(){return e.toolbarLeft}},r.createElement(l.a,{key:0,id:Ae.a.SUMMARY,linkText:Te.SUMMARY},r.createElement(lo,{store:this.store})),r.createElement(l.a,{key:1,id:Ae.a.CLINICAL_DATA,linkText:Te.CLINICAL_DATA,hide:0===this.store.selectedSamples.result.length},r.createElement(We,{store:this.store})),r.createElement(l.a,{key:2,id:Ae.a.HEATMAPS,linkText:Te.HEATMAPS,hide:0===this.store.MDACCHeatmapStudyMeta.result.length},r.createElement(Ye.a,{className:"mdacc-heatmap-iframe",url:"https://bioinformatics.mdanderson.org/TCGA/NGCHMPortal/?".concat(this.store.MDACCHeatmapStudyMeta.result[0])})),r.createElement(l.a,{key:3,id:Ae.a.CN_SEGMENTS,linkText:Te.CN_SEGMENTS,hide:this.store.hasCNSegmentData.isPending||!this.store.hasCNSegmentData.result},r.createElement(Oi,{store:this.store})),r.createElement(l.a,{key:4,id:Ae.a.FILES_AND_LINKS,linkText:"Files & Links",hide:!this.shouldShowResources},r.createElement("div",null,r.createElement(us,{store:this.store,openResource:this.openResource}))),this.resourceTabs.component),r.createElement("div",{ref:this.toolbarRef,className:No.a.absolutePanel},r.createElement(s.Observer,null,function(){var t=r.createElement(ws,{store:e.store,appStore:e.props.appStore,loadingComplete:e.chartDataPromises.isComplete}),n=r.createElement(Sa,{store:e.store,appStore:e.props.appStore,loadingComplete:e.chartDataPromises.isComplete});return r.createElement("div",{className:No.a.studyFilterResult},r.createElement(De.If,{condition:e.store.selectedSamples.isComplete},r.createElement(De.Then,null,t,n),r.createElement(De.Else,null,r.createElement(Re.a,{isLoading:!0,size:"small",className:No.a.selectedInfoLoadingIndicator}),n)))}),r.createElement("div",{id:"comparisonGroupManagerContainer",style:{display:"flex",position:"relative"}},this.enableCustomSelectionInTabs.includes(this.store.currentTab)&&r.createElement(r.Fragment,null,r.createElement(G.d,{visible:this.showCustomSelectTooltip,trigger:["click"],placement:"bottomLeft",onVisibleChange:function(t){return e.showCustomSelectTooltip=!!t},destroyTooltipOnHide:!0,overlay:function(){return r.createElement("div",{style:{width:"350px"}},r.createElement(ki.a,{allSamples:e.store.samples.result,selectedSamples:e.store.selectedSamples.result,disableGrouping:!0,queriedStudies:e.store.queriedPhysicalStudyIds.result,onSubmit:function(t){e.showCustomSelectTooltip=!1,e.store.updateCustomSelect(t)}}))}},r.createElement("button",{className:rt()("btn btn-primary btn-sm",{active:this.showCustomSelectTooltip}),"aria-pressed":this.showCustomSelectTooltip,"data-test":"custom-selection-button",style:{marginLeft:"10px"}},Object(y.w)("Custom Selection")))),this.enableAddChartInTabs.includes(this.store.currentTab)&&r.createElement(ca,{buttonText:this.addChartButtonText,store:this.store,currentTab:this.store.currentTab,addChartOverlayClassName:"studyViewAddChartOverlay",disableCustomTab:this.store.currentTab===Ae.a.CLINICAL_DATA,disableGeneSpecificTab:this.store.currentTab===Ae.a.CLINICAL_DATA,showResetPopup:function(){e.showReturnToDefaultChartListModal=!0}}),r.createElement(it.Modal,{bsSize:"small",show:this.showReturnToDefaultChartListModal,onHide:function(){e.showReturnToDefaultChartListModal=!1},keyboard:!0},r.createElement(it.Modal.Header,{closeButton:!0},r.createElement(it.Modal.Title,null,"Reset charts")),r.createElement(it.Modal.Body,null,r.createElement("div",null,"Please confirm that you would like to replace the current charts with the default list.")),r.createElement(it.Modal.Footer,null,r.createElement("button",{className:"btn btn-primary btn-sm",style:{marginTop:"10px",marginBottom:"0"},onClick:function(){e.store.resetToDefaultSettings(),e.showReturnToDefaultChartListModal=!1}},"Confirm"),r.createElement("button",{className:"btn btn-primary btn-sm",style:{marginTop:"10px",marginBottom:"0"},onClick:function(){e.showReturnToDefaultChartListModal=!1}},"Cancel"))),c.a.sessionServiceIsEnabled()&&this.groupsButton)))))}},{key:"componentWillUnmount",value:function(){this.store.destroy(),clearInterval(this.toolbarLeftUpdater)}},{key:"render",value:function(){return r.createElement(ze.a,{noMargin:!0,hideFooter:!0,className:"subhead-dark"},this.content())}},{key:"shouldShowResources",get:function(){return!!this.store.resourceIdToResourceData.isComplete&&i.some(this.store.resourceIdToResourceData.result,function(e){return e.length>0})}},{key:"studyViewFullUrlWithFilter",get:function(){return"".concat(window.location.protocol,"//").concat(window.location.host).concat(window.location.pathname).concat(window.location.search,"#filterJson=").concat(JSON.stringify(this.store.filters))}},{key:"addChartButtonText",get:function(){return this.store.currentTab===Ae.a.SUMMARY?Object(y.w)("Charts"):this.store.currentTab===Ae.a.CLINICAL_DATA?Object(y.w)("Columns"):""}},{key:"groupsButton",get:function(){var e=this;return r.createElement(r.Fragment,null,r.createElement(G.d,{visible:this.store.showComparisonGroupUI,trigger:["click"],placement:"bottomLeft",destroyTooltipOnHide:!0,onPopupAlign:function(e){e.querySelector(".rc-tooltip-arrow").style.right="10px"},onVisibleChange:function(t){e.shareLinkModal||(e.store.showComparisonGroupUI=!!t)},getTooltipContainer:function(){return document.getElementById("comparisonGroupManagerContainer")},overlay:r.createElement("div",{style:{width:350}},r.createElement(Va,{store:this.store,shareGroups:this.openShareUrlModal}))},r.createElement("button",{className:rt()("btn btn-primary btn-xs",{active:this.store.showComparisonGroupUI}),id:"groupManagementButton","data-test":"groups-button","aria-pressed":this.store.showComparisonGroupUI,style:{marginLeft:"10px"},"data-event":Object(A.e)({action:"openGroupManagement",label:"",category:"groupComparison"})},Object(y.w)("Groups"))))}}]),t}();Ts([u.observable],Os.prototype,"toolbarLeft",void 0),Ts([u.observable],Os.prototype,"showCustomSelectTooltip",void 0),Ts([u.observable],Os.prototype,"showReturnToDefaultChartListModal",void 0),Ts([b.default],Os.prototype,"toolbarRef",null),Ts([u.observable],Os.prototype,"showBookmarkModal",void 0),Ts([b.default,u.action],Os.prototype,"toggleBookmarkModal",null),Ts([u.observable],Os.prototype,"shareLinkModal",void 0),Ts([b.default,u.action],Os.prototype,"toggleShareLinkModal",null),Ts([b.default,u.action],Os.prototype,"openShareUrlModal",null),Ts([b.default],Os.prototype,"onBookmarkClick",null),Ts([b.default,u.action],Os.prototype,"openResource",null),Ts([b.default,u.action],Os.prototype,"closeResourceTab",null),Ts([u.computed],Os.prototype,"shouldShowResources",null),Ts([u.computed],Os.prototype,"studyViewFullUrlWithFilter",null),Ts([u.computed],Os.prototype,"addChartButtonText",null),Ts([u.computed],Os.prototype,"groupsButton",null),Os=Ts([Object(s.inject)("routing","appStore"),s.observer],Os);t.default=Os},787:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__1P_Zv",framedImage:"styles-module__framedImage__1iqVk",QueryAndDownloadTabs:"styles-module__QueryAndDownloadTabs__ivykJ",QueryContainer:"styles-module__QueryContainer__2cy7B",forkedButtons:"styles-module__forkedButtons__2ctM7",errorMessage:"styles-module__errorMessage__32yZg",oqlMessage:"styles-module__oqlMessage__3xhe8",CancerStudySelector:"styles-module__CancerStudySelector__1FU50",MolecularProfileSelector:"styles-module__MolecularProfileSelector__rlomm",DataTypePrioritySelector:"styles-module__DataTypePrioritySelector__1_VUf",CaseSetSelector:"styles-module__CaseSetSelector__YteFo",StudySelection:"styles-module__StudySelection__3booh",GeneSetSelector:"styles-module__GeneSetSelector__2DY1b",icon:"styles-module__icon__1E8Oh",geneCount:"styles-module__geneCount__3cB9u",SelectedStudiesWindow:"styles-module__SelectedStudiesWindow__NAG6X",CancerStudySelectorHeader:"styles-module__CancerStudySelectorHeader__D2N40",selectAll:"styles-module__selectAll__sQO_b",noData:"styles-module__noData__3J5xx",selectedCount:"styles-module__selectedCount__TRoaE",selectionsExist:"styles-module__selectionsExist__1icpM",cancerStudySelectorBody:"styles-module__cancerStudySelectorBody__2BfDm",cancerTypeListContainer:"styles-module__cancerTypeListContainer__rnSbV",cancerStudyListContainer:"styles-module__cancerStudyListContainer__356jB",cancerTypeList:"styles-module__cancerTypeList__ouFgb",cancerTypeListItemLabel:"styles-module__cancerTypeListItemLabel__31N8Y",cancerTypeListItemCount:"styles-module__cancerTypeListItemCount__1HB2c",selectable:"styles-module__selectable__3NCiW",selected:"styles-module__selected__Zy9_9",matchingNodeText:"styles-module__matchingNodeText__3lV9e",nonMatchingNodeText:"styles-module__nonMatchingNodeText__1l5PU",containsSelectedStudies:"styles-module__containsSelectedStudies__20v-B",searchTextInput:"styles-module__searchTextInput__1VIxV",group:"styles-module__group__Cs8DR",zScore:"styles-module__zScore__23rtN",infoIcon:"styles-module__infoIcon__zMiog",profileName:"styles-module__profileName__1fbIy",DataTypePriorityLabel:"styles-module__DataTypePriorityLabel__21k9z",radioRow:"styles-module__radioRow__1G_fF",buttonRow:"styles-module__buttonRow__51RtG",geneSet:"styles-module__geneSet__Ra6KD",notEmpty:"styles-module__notEmpty__23mDp",GeneSymbolValidator:"styles-module__GeneSymbolValidator__ZK8rf",pendingMessage:"styles-module__pendingMessage__2jgIM",oqlNotice:"styles-module__oqlNotice__1tycm",validBubble:"styles-module__validBubble__QCGq3",invalidBubble:"styles-module__invalidBubble__1gB6Z",suggestionBubble:"styles-module__suggestionBubble__aRL1R",noChoiceLabel:"styles-module__noChoiceLabel__2GF5_",singleChoiceLabel:"styles-module__singleChoiceLabel__2wdqL",multiChoiceLabel:"styles-module__multiChoiceLabel__19sFa",MutSigGeneSelectorWindow:"styles-module__MutSigGeneSelectorWindow__1Uiku",MutSigGeneSelector:"styles-module__MutSigGeneSelector__25hKH",selectionColumnHeader:"styles-module__selectionColumnHeader__2MSUO",selectionColumnCell:"styles-module__selectionColumnCell__3RJ8f",selectButton:"styles-module__selectButton__2dXHK",GisticGeneSelectorWindow:"styles-module__GisticGeneSelectorWindow__1J2UG",GisticGeneSelector:"styles-module__GisticGeneSelector__U5Lb9",header:"styles-module__header__3cqyY",amp:"styles-module__amp__1zeIe",del:"styles-module__del__1_otl",gisticTable:"styles-module__gisticTable__2fquv",GisticGeneToggles:"styles-module__GisticGeneToggles__1aR6k",someGenes:"styles-module__someGenes__J-RhD",moreGenes:"styles-module__moreGenes__2gVF_",geneToggle:"styles-module__geneToggle__EGiaB",simulateHovered:"styles-module__simulateHovered__3IL_G",notSelected:"styles-module__notSelected__3-Rmx",showMoreLess:"styles-module__showMoreLess__3Ef4J",GenesetsSelectorWindow:"styles-module__GenesetsSelectorWindow__NTbph",GenesetsFormGroup:"styles-module__GenesetsFormGroup__1uJYh",GenesetsVolcanoSelectorWindow:"styles-module__GenesetsVolcanoSelectorWindow__w4nHP",GenesetsSelectionArea:"styles-module__GenesetsSelectionArea__3ebp-",transposeDataMatrix:"styles-module__transposeDataMatrix__YP_NR",submitRow:"styles-module__submitRow__k2sC8",genomeSpace:"styles-module__genomeSpace__2augo",tooltip:"styles-module__tooltip__ux3KI",learnOql:"styles-module__learnOql__1Aj5I",quickSelect:"styles-module__quickSelect__3ZhaC",studyName:"styles-module__studyName__2iQkr"}},788:function(e,t,n){"use strict";var r=n(1),o=n(13),i=n(2);function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l="tissue",u="My Virtual Studies",c="Studies",p=function(){function e(t){var n,o,i,s=this,p=t.cancerTypes,d=void 0===p?[]:p,f=t.studies,h=void 0===f?[]:f,m=t.priorityStudies,y=void 0===m?{}:m,b=t.virtualStudies,g=void 0===b?[]:b,v=t.maxTreeDepth,S=void 0===v?0:v;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootCancerType={clinicalTrialKeywords:"",dedicatedColor:"",name:"All",parent:"",shortName:"All",cancerTypeId:l},this.virtualStudyCategory={clinicalTrialKeywords:"",dedicatedColor:"",name:u,parent:l,shortName:u,cancerTypeId:u,alwaysVisible:!0},this.physicalStudyCategory={clinicalTrialKeywords:"",dedicatedColor:"",name:c,parent:l,shortName:c,cancerTypeId:c,alwaysVisible:!0},this.priorityCategories=[],this.map_node_meta=new Map,this.map_cancerTypeId_cancerType=new Map,this.map_studyId_cancerStudy=new Map,d=e.sortNodes(d);var C=g.map(function(e){if(e.data)return{allSampleCount:r.sumBy(e.data.studies,function(e){return e.samples.length}),studyId:e.id,name:e.data.name,description:e.data.description,cancerTypeId:u}}).filter(function(e){return e});for(var _ in y)this.priorityCategories.push({clinicalTrialKeywords:"",dedicatedColor:"",name:_,parent:l,shortName:_,cancerTypeId:_});0===S&&g.length>0&&(h=r.map(h,function(e){return e.cancerTypeId=s.physicalStudyCategory.cancerTypeId,e}));for(var T=0,E=[d=[this.virtualStudyCategory,this.physicalStudyCategory].concat(a(this.priorityCategories),[this.rootCancerType],a(d)),h=e.sortNodes([].concat(a(C),a(h)))];T<E.length;T++){n=E[T];var w=!0,O=!1,I=void 0;try{for(var k,P=n[Symbol.iterator]();!(w=(k=P.next()).done);w=!0){o=k.value;var A=n==d;A?this.map_cancerTypeId_cancerType.set(o.cancerTypeId,o):this.map_studyId_cancerStudy.set(o.studyId,o);var R=A?o.name:[o.name,o.description].join("\n");this.map_node_meta.set(o,{isCancerType:A,isPriorityCategory:!1,priorityCategories:[],childCancerTypes:[],childStudies:[],descendantStudies:[],descendantCancerTypes:[],ancestors:[],siblings:[],searchTerms:R})}}catch(e){O=!0,I=e}finally{try{w||null==P.return||P.return()}finally{if(O)throw I}}}var N=!0,D=!1,j=void 0;try{for(var x,M=this.priorityCategories[Symbol.iterator]();!(N=(x=M.next()).done);N=!0){var G=x.value;(i=this.map_node_meta.get(G)).isPriorityCategory=!0;var F=!0,L=!1,B=void 0;try{for(var V,U=y[G.cancerTypeId][Symbol.iterator]();!(F=(V=U.next()).done);F=!0){var q=V.value,K=this.map_studyId_cancerStudy.get(q);if(K)i.childStudies.push(K),i.descendantStudies.push(K),this.map_node_meta.get(K).priorityCategories.push(G)}}catch(e){L=!0,B=e}finally{try{F||null==U.return||U.return()}finally{if(L)throw B}}}}catch(e){D=!0,j=e}finally{try{N||null==M.return||M.return()}finally{if(D)throw j}}for(var H=0,Q=[d,h];H<Q.length;H++){n=Q[H];var W=!0,z=!1,Y=void 0;try{for(var J,Z=n[Symbol.iterator]();!(W=(J=Z.next()).done);W=!0){o=J.value,i=this.map_node_meta.get(o);var X=void 0;if(i.isCancerType){var $=o.alwaysVisible;X=this.map_cancerTypeId_cancerType.get(o.parent),$&&X&&(X.alwaysVisible=$)}else X=this.map_cancerTypeId_cancerType.get(o.cancerTypeId);var ee=X&&this.map_node_meta.get(X);for(ee&&(i.isCancerType?ee.childCancerTypes.push(o):ee.childStudies.push(o));X&&ee;)i.ancestors.push(X),i.isCancerType?ee.descendantCancerTypes.push(o):ee.descendantStudies.push(o),ee=(X=this.map_cancerTypeId_cancerType.get(X.parent))&&this.map_node_meta.get(X);var te=[].concat(a(i.ancestors),a(i.priorityCategories)).map(function(e){return e.name});i.searchTerms=[i.searchTerms].concat(a(te)).join("\n")}}catch(e){z=!0,Y=e}finally{try{W||null==Z.return||Z.return()}finally{if(z)throw Y}}}var ne=!0,re=!1,oe=void 0;try{for(var ie,ae=h[Symbol.iterator]();!(ne=(ie=ae.next()).done);ne=!0){o=ie.value;var se=(i=this.map_node_meta.get(o)).ancestors[i.ancestors.length-2];if(se){var le=this.map_node_meta.get(se);i.siblings=le.descendantStudies}}}catch(e){re=!0,oe=e}finally{try{ne||null==ae.return||ae.return()}finally{if(re)throw oe}}}var t,n,o;return t=e,o=[{key:"sortNodes",value:function(e){return r.sortBy(e,function(e){return e.name})}}],(n=null)&&s(t.prototype,n),o&&s(t,o),e}(),d=n(3),f=n(38),h=n(31),m=n(46),y=n(152),b=n.n(y),g=n(8),v=n(832),S=n(102),C=n.n(S),_=n(18),T=n(842),E=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};function w(e,t,n){return E(this,void 0,void 0,regeneratorRuntime.mark(function o(){var i,a;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return i=r.chunk(e,n),a=i.map(t),o.t0=r,o.next=5,Promise.all(a);case 5:return o.t1=o.sent,o.abrupt("return",o.t0.flatten.call(o.t0,o.t1));case 7:case"end":return o.stop()}},o)}))}var O=n(11);function I(e){var t=e.selectableSelectedStudyIds,n=e.asyncCustomCaseSet.result.map(function(e){return e.studyId+":"+e.sampleId}).join("+"),r=e.getSelectedProfileIdFromMolecularAlterationType("MUTATION_EXTENDED");e.alterationTypesInOQL.haveMutInQuery&&!r&&e.defaultMutationProfile&&(r=e.defaultMutationProfile.molecularProfileId);var o=e.getSelectedProfileIdFromMolecularAlterationType("COPY_NUMBER_ALTERATION");e.alterationTypesInOQL.haveCnaInQuery&&!o&&e.defaultCnaProfile&&(o=e.defaultCnaProfile.molecularProfileId);var i=e.getSelectedProfileIdFromMolecularAlterationType("MRNA_EXPRESSION");e.alterationTypesInOQL.haveMrnaInQuery&&!i&&e.defaultMrnaProfile&&(i=e.defaultMrnaProfile.molecularProfileId);var a=e.getSelectedProfileIdFromMolecularAlterationType("PROTEIN_LEVEL");e.alterationTypesInOQL.haveProtInQuery&&!a&&e.defaultProtProfile&&(a=e.defaultProtProfile.molecularProfileId);var s={genetic_profile_ids_PROFILE_MUTATION_EXTENDED:r,genetic_profile_ids_PROFILE_COPY_NUMBER_ALTERATION:o,genetic_profile_ids_PROFILE_MRNA_EXPRESSION:i,genetic_profile_ids_PROFILE_METHYLATION:e.getSelectedProfileIdFromMolecularAlterationType("METHYLATION")||e.getSelectedProfileIdFromMolecularAlterationType("METHYLATION_BINARY"),genetic_profile_ids_PROFILE_PROTEIN_EXPRESSION:a,genetic_profile_ids_PROFILE_GENESET_SCORE:e.getSelectedProfileIdFromMolecularAlterationType("GENESET_SCORE"),genetic_profile_ids_PROFILE_GENERIC_ASSAY:e.getSelectedProfileIdFromMolecularAlterationType("GENERIC_ASSAY"),cancer_study_id:1===t.length?t[0]:"all",cancer_study_list:void 0,Z_SCORE_THRESHOLD:e.zScoreThreshold,RPPA_SCORE_THRESHOLD:e.rppaScoreThreshold,data_priority:e.dataTypePriorityCode,profileFilter:e.dataTypePriorityCode,case_set_id:e.selectedSampleListId||"-1",case_ids:n,gene_list:ae(e.geneQuery)||" ",geneset_list:ae(e.genesetQuery)||" ",tab_index:e.forDownloadTab?"tab_download":"tab_visualize",transpose_matrix:e.transposeDataMatrix?"on":void 0,Action:"Submit"};return 1!==t.length&&(s.cancer_study_list=t.join(",")),{query:s}}function k(e){var t=!1,n=!1,r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;if(l.showProfileInAnalysisTab){switch(l.molecularAlterationType){case O.a.MUTATION_EXTENDED:t=!0;break;case O.a.COPY_NUMBER_ALTERATION:n=!0}if(t&&n)break}}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return{mutation:t,cna:n}}function P(e,t,n){var o={},i={},a={},s={},l={},u={},c={},p={};r.each(e,function(e){switch(e.category){case"all_cases_with_mutation_and_cna_data":a[e.studyId]=r.keyBy(e.sampleIds);break;case"all_cases_with_mutation_data":o[e.studyId]=r.keyBy(e.sampleIds);break;case"all_cases_with_cna_data":i[e.studyId]=r.keyBy(e.sampleIds);break;case"all_cases_in_study":s[e.studyId]=r.keyBy(e.sampleIds);break;default:e.sampleListId===e.studyId+"_all"&&(s[e.studyId]=r.keyBy(e.sampleIds))}});var d=r.map(n,function(e){return e.id}),f=t.filter(function(e){return!r.includes(d,e)});return r.forEach(f,function(e){l[e]=o[e]||{},u[e]=i[e]||{},c[e]=a[e]||{},p[e]=s[e]||{}}),r.forEach(n,function(e){r.forEach(e.data.studies,function(e){r.includes(f,e.id)||(l[e.id]=l[e.id]||{},u[e.id]=u[e.id]||{},c[e.id]=c[e.id]||{},p[e.id]=p[e.id]||{},r.forEach(e.samples,function(t){o[e.id]&&o[e.id][t]&&(l[e.id][t]=t),i[e.id]&&i[e.id][t]&&(u[e.id][t]=t),a[e.id]&&a[e.id][t]&&(c[e.id][t]=t),s[e.id]&&s[e.id][t]&&(p[e.id][t]=t)}))})}),{w_mut:r.reduce(l,function(e,t){return e+Object.keys(t).length},0),w_cna:r.reduce(u,function(e,t){return e+Object.keys(t).length},0),w_mut_cna:r.reduce(c,function(e,t){return e+Object.keys(t).length},0),all:r.reduce(p,function(e,t){return e+Object.keys(t).length},0)}}var A=n(41);function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var x=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};function M(e){return e}function G(e,t){return t}function F(e){return x(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.fetchMolecularProfilesUsingPOST({molecularProfileFilter:{studyIds:e}});case 2:return n=t.sent,i=r.groupBy(n,function(e){return e.studyId}),t.abrupt("return",e.map(function(e){return{data:[i[e]||[]],meta:e}}));case 5:case"end":return t.stop()}},t)}))}var L=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),N(this,D(t).call(this,M,G,F))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,A["a"]),t}(),B=n(21),V=n(122);function U(e){var t=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value;r.has(l,"genesets")&&l.genesets.forEach(function(e){return t.push(e)})}}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return t}var q=n(104);function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){return!t||"object"!==K(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var z=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};var Y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),H(this,Q(t).call(this,function(e){return{invoke:function(){return function(e){return z(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.getAllSampleListsInStudyUsingGET({studyId:e,projection:"DETAILED"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}))}(e)}}},function(e){return e}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(t,q["a"]),t}();var J=n(234),Z=n(173);function X(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",function(){return oe}),n.d(t,"e",function(){return ae}),n.d(t,"b",function(){return se}),n.d(t,"c",function(){return ue}),n.d(t,"d",function(){return ce});var ne=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":te(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},re=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},oe="-1";function ie(e){return Number.isInteger(Number(e))}function ae(e){return e.trim().replace(/^\s+|\s+$/g,"").replace(/[ \+]+/g," ").toUpperCase()}var se,le=["searchText","selectableSelectedStudyIds","dataTypePriority","selectedProfileIds","zScoreThreshold","rppaScoreThreshold","selectedSampleListId","caseIds","caseIdsMode","geneQuery","genesetQuery"];!function(e){e[e.Unfocused=0]="Unfocused",e[e.ShouldFocus=1]="ShouldFocus",e[e.Focused=2]="Focused"}(se||(se={}));var ue=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.studiesHaveChangedSinceInitialization=!1,this.deletedVirtualStudies=[],this.forDownloadTab=!1,this.transposeDataMatrix=!1,this.searchText="",this._allSelectedStudyIds=i.observable.map(),this._defaultSelectedIds=i.observable.map(),this.dataTypePriority={mutation:!0,cna:!0},this._selectedProfileIds=void 0,this.zScoreThreshold="2.0",this.rppaScoreThreshold="2.0",this._selectedSampleListId=void 0,this.caseIds="",this._defaultStudySampleMap={},this._caseIdsMode="sample",this._geneQuery="",this.rawGenesetQuery="",this.geneQueryErrorDisplayStatus=se.Unfocused,this.genesetQueryErrorDisplayStatus=se.Unfocused,this.showMutSigPopup=!1,this.showGisticPopup=!1,this.showGenesetsHierarchyPopup=!1,this.showGenesetsVolcanoPopup=!1,this.priorityStudies=g.a.parseConfigFormat(g.b.serverConfig.priority_studies),this.showSelectedStudiesOnly=!1,this.selectedCancerTypeIds=[],this.clickAgainToDeselectSingle=!0,this.searchExampleMessage="",this.volcanoPlotSelectedPercentile={label:"75%",value:"75"},this._maxTreeDepth=parseInt(g.b.serverConfig.skin_query_max_tree_depth,10),this.cancerTypes=Object(d.T)({invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.a.getAllCancerTypesUsingGET({}).then(function(e){return e.filter(function(e){return"null"!==e.parent})}));case 1:case"end":return e.stop()}},e)}))}},[]),this.cancerStudies=Object(d.T)(o.a.getAllStudiesUsingGET({projection:"SUMMARY"}),[]),this.cancerStudyIdsSet=Object(d.T)({await:function(){return[n.cancerStudies]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(d.Z)(this.cancerStudies.result.map(function(e){return e.studyId})));case 1:case"end":return e.stop()}},e,this)}))},default:{}}),this.physicalStudiesIdsSet=Object(d.T)({await:function(){return[n.cancerStudies]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.cancerStudies.result.reduce(function(e,t){return e[t.studyId]=[t.studyId],e},{}));case 1:case"end":return e.stop()}},e,this)}))},default:{}}),this.virtualStudiesIdsSet=Object(d.T)({await:function(){return[n.userVirtualStudies]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.userVirtualStudies.result.reduce(function(e,t){return e[t.id]=[t.id],e},{}));case 1:case"end":return e.stop()}},e,this)}))},default:{}}),this.sharedQueriedStudiesSet=Object(d.T)({await:function(){return[n.physicalStudiesIdsSet,n.virtualStudiesIdsSet]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,o,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.physicalStudiesIdsSet.result,n=this.virtualStudiesIdsSet.result,o=Object.assign({},t,n),i=this._defaultSelectedIds.keys().filter(function(e){return!o[e]}),a={},e.next=7,Promise.all(i.map(function(e){return new Promise(function(n,o){V.a.getVirtualStudy(e).then(function(o){var i=o.data.studies.map(function(e){return e.id}),s=i.filter(function(e){return!t[e]});r.isEmpty(s)&&(a[e]=i),n()}).catch(function(){n()})})}));case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}},e,this)}))},default:{}}),this.physicalStudiesSet=Object(d.T)({await:function(){return[n.cancerStudies]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.cancerStudies.result.reduce(function(e,t){return e[t.studyId]=t,e},{}));case 1:case"end":return e.stop()}},e,this)}))},default:{}}),this.userVirtualStudies=Object(d.T)(function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!g.a.sessionServiceIsEnabled()||!this.userLoggedIn){e.next=13;break}return e.prev=1,e.next=4,V.a.getUserVirtualStudies();case 4:return t=e.sent,e.abrupt("return",t);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",[]);case 11:e.next=14;break;case 13:return e.abrupt("return",[]);case 14:case"end":return e.stop()}},e,this,[[1,8]])}))},[]),this.userVirtualStudiesSet=Object(d.T)({await:function(){return[n.userVirtualStudies]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.userVirtualStudies.result.reduce(function(e,t){return e[t.id]=t,e},{}));case 1:case"end":return e.stop()}},e,this)}))},default:{}}),this.sharedVirtualStudiesSet=Object(d.T)({await:function(){return[n.physicalStudiesSet,n.userVirtualStudiesSet]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,o,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.physicalStudiesSet.result,n=this.userVirtualStudiesSet.result,o=Object.assign([],Object.keys(t),Object.keys(n)),i=this._defaultSelectedIds.keys().filter(function(e){return!r.includes(o,e)}),a={},e.next=7,Promise.all(i.map(function(e){return new Promise(function(n,r){V.a.getVirtualStudy(e).then(function(r){0===r.data.studies.map(function(e){return e.id}).filter(function(e){return!t[e]}).length&&(a[e]=r),n()}).catch(function(){n()})})}));case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}},e,this)}))},default:{}}),this.selectedStudyToSampleSet=Object(d.T)({await:function(){return[n.userVirtualStudiesSet,n.sharedVirtualStudiesSet]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,i,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={},n=r.filter(this.allSelectedStudyIds,function(e){return a.physicalStudiesSet.result[e]}),this._allSelectedStudyIds.keys().length===n.length){e.next=9;break}return e.next=5,Promise.all(r.map(n,function(e){return o.a.getAllSamplesInStudyUsingGET({studyId:e}).then(function(n){t[e]=Object(d.Z)(n.map(function(e){return e.sampleId}))})}));case 5:i=Object.assign(Object.assign({},this.userVirtualStudiesSet.result),this.sharedVirtualStudiesSet.result),this._allSelectedStudyIds.keys().forEach(function(e){i[e]&&i[e].data.studies.forEach(function(e){void 0===t[e.id]&&(t[e.id]=Object(d.Z)(e.samples))})}),e.next=10;break;case 9:n.forEach(function(e){t[e]={}});case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}},e,this)}))},default:{}}),this.selectableStudiesSet=Object(d.T)({await:function(){return[n.physicalStudiesSet,n.selectedStudyToSampleSet]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},r.each(this.physicalStudiesSet.result,function(e,n){t[n]=[n]}),r.each(this.userVirtualStudiesSet.result,function(e,n){t[n]=[n]}),r.each(this.sharedVirtualStudiesSet.result,function(e,n){t[n]=e.data.studies.map(function(e){return e.id})}),e.abrupt("return",t);case 5:case"end":return e.stop()}},e,this)}))},default:{},onResult:function(){if(n.selectedSampleListId!==oe){var e=n.sharedVirtualStudiesSet.result,t=r.filter(n._allSelectedStudyIds.keys(),function(t){return void 0!==e[t]});if(r.isEmpty(t))n.caseIds="";else{var o=n._defaultStudySampleMap;(void 0===o||r.isEmpty(o))&&(o=r.reduce(n.selectedStudyToSampleSet.result,function(e,t,n){return e[n]=r.keys(t),e},{})),r.some(o,function(e){return e.length>0})&&n.setCaseIds(o)}}}}),this.unknownStudyIds=Object(d.T)({await:function(){return[n.selectableStudiesSet]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.selectableStudiesSet.result,n=this._allSelectedStudyIds.keys(),e.abrupt("return",n.filter(function(e){return!(e in t)}));case 3:case"end":return e.stop()}},e,this)}))},default:[]}),this.molecularProfiles=Object(d.T)({invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==this.physicalStudyIdsInSelection.length){e.next=6;break}return e.next=3,o.a.getAllMolecularProfilesInStudyUsingGET({studyId:this.physicalStudyIdsInSelection[0]});case 3:return e.abrupt("return",e.sent);case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}},e,this)}))},default:[],onResult:function(){n.initiallySelected.profileIds&&!n.studiesHaveChangedSinceInitialization||(n._selectedProfileIds=void 0)}}),this.molecularProfilesInSelectedStudies=Object(d.T)({invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.molecularProfilesInStudyCache.getPromise(this.physicalStudyIdsInSelection,!0);case 2:return t=e.sent,e.abrupt("return",r.flatten(t.map(function(e){return e.data?e.data:[]})));case 4:case"end":return e.stop()}},e,this)}))},default:[]}),this.sampleListInSelectedStudies=Object(d.T)({await:function(){return n.physicalStudyIdsInSelection.map(function(e){return n.sampleListsInStudyCache.get(e)})},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.reduce(this.physicalStudyIdsInSelection,function(e,n){var o=t.sampleListsInStudyCache.get(n).result;return r.isUndefined(o)||(e=e.concat(o)),e},[]));case 1:case"end":return e.stop()}},e,this)}))},default:[],onResult:function(){n.initiallySelected.sampleListId&&!n.studiesHaveChangedSinceInitialization||(n._selectedSampleListId=void 0)}}),this.profileAvailability=Object(d.T)({await:function(){return[n.molecularProfilesInSelectedStudies]},invoke:function(){return Promise.resolve(k(n.molecularProfilesInSelectedStudies.result))},default:{mutation:!1,cna:!1},onResult:function(){n.initiallySelected.sampleListId&&!n.studiesHaveChangedSinceInitialization||(n.dataTypePriority=k(n.molecularProfilesInSelectedStudies.result))}}),this.profiledSamplesCount=Object(d.T)({await:function(){return[n.sampleListInSelectedStudies]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P(this.sampleListInSelectedStudies.result,this.selectableSelectedStudyIds,this.selectedVirtualStudies));case 1:case"end":return e.stop()}},e,this)}))},default:{w_mut:0,w_cna:0,w_mut_cna:0,all:0}}),this.sampleLists=Object(d.T)({invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isSingleNonVirtualStudySelected){e.next=2;break}return e.abrupt("return",[]);case 2:return this.sampleListsInStudyCache.get(this.selectableSelectedStudyIds[0]).result,e.next=5,this.sampleListsInStudyCache.get(this.selectableSelectedStudyIds[0]).result;case 5:return t=e.sent,e.abrupt("return",r.sortBy(t,function(e){return e.name}));case 7:case"end":return e.stop()}},e,this)}))},default:[],onResult:function(){n.initiallySelected.sampleListId&&!n.studiesHaveChangedSinceInitialization||(n._selectedSampleListId=void 0)}}),this.mutSigForSingleStudy=Object(d.T)({invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isSingleNonVirtualStudySelected){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,h.a.getSignificantlyMutatedGenesUsingGET({studyId:this.selectableSelectedStudyIds[0]});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}))},default:[]}),this.gisticForSingleStudy=Object(d.T)({invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isSingleNonVirtualStudySelected){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,h.a.getSignificantCopyNumberRegionsUsingGET({studyId:this.selectableSelectedStudyIds[0]});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}))},default:[]}),this.genes=Object(d.T)({invoke:function(){return n.invokeGenesLater(n.geneIds)},default:{found:[],suggestions:[]}}),this.genesets=Object(d.T)({invoke:function(){return n.invokeGenesetsLater(n.genesetIds)},default:{found:[],invalid:[]}}),this.invokeGenesLater=Object(f.debounceAsync)(function(e){return re(n,void 0,void 0,regeneratorRuntime.mark(function t(){var n,i,a,s,l,u,c,p,d,f,h=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.partition(r.uniq(e),ie),i=$(n,2),a=i[0],s=i[1],l=function(){return re(h,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,i,s,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.length){e.next=6;break}return e.next=3,o.a.fetchGenesUsingPOST({geneIdType:"ENTREZ_GENE_ID",geneIds:a});case 3:t=e.sent,e.next=7;break;case 6:t=[];case 7:return n=r.difference(a,t.map(function(e){return e.entrezGeneId+""})),i=n.map(function(e){return{alias:e,genes:[]}}),s=t.map(function(e){return{alias:e.entrezGeneId+"",genes:[e]}}),l=[].concat(X(i),X(s)),e.abrupt("return",{found:t,suggestions:l});case 12:case"end":return e.stop()}},e)}))},u=function(){return re(h,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,i,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.length){e.next=6;break}return e.next=3,o.a.fetchGenesUsingPOST({geneIdType:"HUGO_GENE_SYMBOL",geneIds:s});case 3:t=e.sent,e.next=7;break;case 6:t=[];case 7:return n=r.difference(s,t.map(function(e){return e.hugoGeneSymbol})),e.next=10,Promise.all(n.map(function(e){return a.getGeneSuggestions(e)}));case 10:return i=e.sent,e.abrupt("return",{found:t,suggestions:i});case 12:case"end":return e.stop()}},e)}))},t.next=5,Promise.all([l(),u()]);case 5:return c=t.sent,p=$(c,2),d=p[0],f=p[1],t.abrupt("return",{found:[].concat(X(d.found),X(f.found)),suggestions:[].concat(X(d.suggestions),X(f.suggestions))});case 10:case"end":return t.stop()}},t)}))},500),this.invokeGenesetsLater=Object(f.debounceAsync)(function(e){return re(n,void 0,void 0,regeneratorRuntime.mark(function t(){var n,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.length>0)){t.next=8;break}return t.next=3,h.a.fetchGenesetsUsingPOST({genesetIds:e});case 3:return n=t.sent,o=r.difference(e,n.map(function(e){return e.genesetId})),t.abrupt("return",{found:n,invalid:o});case 8:return t.abrupt("return",Promise.resolve({found:[],invalid:[]}));case 9:case"end":return t.stop()}},t)}))},500),this.asyncCustomCaseSet=Object(d.T)({invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.selectedSampleListId===oe&&0!==this.caseIds.trim().length){e.next=2;break}return e.abrupt("return",[]);case 2:return e.abrupt("return",this.invokeCustomCaseSetLater({isVirtualStudySelected:this.isVirtualStudySelected,caseIds:this.caseIds,caseIdsMode:this.caseIdsMode}));case 3:case"end":return e.stop()}},e,this)}))},default:[]}),this.invokeCustomCaseSetLater=Object(f.debounceAsync)(function(e){return re(n,void 0,void 0,regeneratorRuntime.mark(function t(){var n,i,a,s,l,u,c,p,f,h,m,y,b,g,v,S,C,_,T,E,O,I,k,P,A,R,N=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n="",this.isSingleNonVirtualStudySelected&&(n=this.selectableSelectedStudyIds[0]),i=e.caseIds.trim().split(/\s+/g),a=Object(d.Z)(this.physicalStudyIdsInSelection),s=i.map(function(e){var t=e.split(":");if(1===t.length){if(n)return{id:e,study:n};throw new Error("No study specified for ".concat(N.caseIdsMode," id: ").concat(e,", and more than one study selected for query."))}if(2===t.length){var r=t[0],o=t[1];if(!a[r]){var i="";throw N.isVirtualStudySelected&&(i=", nor part of a selected Saved Study"),new Error("Study ".concat(r," is not selected").concat(i,"."))}return{id:o,study:r}}throw new Error("Input error for entity: ".concat(e,"."))}),l=Object(d.X)(s.map(function(e){return"".concat(e.study,":").concat(e.id)})),u=[],c={},p=[],"sample"!==e.caseIdsMode){t.next=37;break}if(!(f=s.map(function(e){return{studyId:e.study,sampleId:e.id}})).length){t.next=35;break}return t.next=14,w(f,function(e){return o.a.fetchSamplesUsingPOST({sampleFilter:{sampleIdentifiers:e},projection:"SUMMARY"})},990);case 14:for(h=t.sent,h=r.sortBy(h,function(e){return l["".concat(e.studyId,":").concat(e.sampleId)]}),m=!0,y=!1,b=void 0,t.prev=19,g=h[Symbol.iterator]();!(m=(v=g.next()).done);m=!0)S=v.value,u.push({studyId:S.studyId,sampleId:S.sampleId}),c["".concat(S.studyId,":").concat(S.sampleId)]=!0;t.next=27;break;case 23:t.prev=23,t.t0=t.catch(19),y=!0,b=t.t0;case 27:t.prev=27,t.prev=28,m||null==g.return||g.return();case 30:if(t.prev=30,!y){t.next=33;break}throw b;case 33:return t.finish(30);case 34:return t.finish(27);case 35:t.next=61;break;case 37:return C=s.map(function(e){return N.getSamplesForStudyAndPatient(e.study,e.id)}),t.next=40,Promise.all(C);case 40:for(_=t.sent,_=r.sortBy(_,function(e){return l["".concat(e.studyId,":").concat(e.patientId)]}),T=!0,E=!1,O=void 0,t.prev=45,I=_[Symbol.iterator]();!(T=(k=I.next()).done);T=!0)P=k.value,P.studyId,P.patientId,A=P.samples,!P.error&&A.length&&(u=u.concat(A.map(function(e){return c["".concat(e.studyId,":").concat(e.patientId)]=!0,{studyId:e.studyId,sampleId:e.sampleId}})));t.next=53;break;case 49:t.prev=49,t.t1=t.catch(45),E=!0,O=t.t1;case 53:t.prev=53,t.prev=54,T||null==I.return||I.return();case 56:if(t.prev=56,!E){t.next=59;break}throw O;case 59:return t.finish(56);case 60:return t.finish(53);case 61:if(p=p.concat(s.filter(function(e){return!c["".concat(e.study,":").concat(e.id)]})),R=this.selectedStudyToSampleSet.result,u.forEach(function(e){R[e.studyId]&&!r.isEmpty(R[e.studyId])&&(R[e.studyId][e.sampleId]||p.push({id:e.sampleId,study:e.studyId}))}),!p.length){t.next=70;break}if(!this.isSingleNonVirtualStudySelected){t.next=69;break}throw new Error("Invalid ".concat(e.caseIdsMode).concat(p.length>1?"s":""," for the selected cancer study: ").concat(p.map(function(e){return e.id}).join(", ")));case 69:throw new Error("Invalid (study, ".concat(e.caseIdsMode,") pair").concat(p.length>1?"s":"",": ").concat(p.map(function(e){return"(".concat(e.study,", ").concat(e.id,")")}).join(", "),"\n\t\t\t\t\t\t"));case 70:return t.abrupt("return",u);case 71:case"end":return t.stop()}},t,this,[[19,23,27,35],[28,,30,34],[45,49,53,61],[54,,56,60]])}))},500),this.studyListLogic=new T.b(this),this.hierarchyData=Object(d.T)({invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(B.X)(this.getFilteredProfiles("GENESET_SCORE")[0].molecularProfileId,Number(this.volcanoPlotSelectedPercentile.value),0,1,this.defaultSelectedSampleListId);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e,this)}))}}),this.volcanoPlotTableData=Object(d.T)({await:function(){return[n.hierarchyData]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U(this.hierarchyData.result));case 1:case"end":return e.stop()}},e,this)}))}}),this.map_genesets_selected_volcano=new i.ObservableMap,this.dict_molecularAlterationType_filenameSuffix={MUTATION_EXTENDED:"mutations",COPY_NUMBER_ALTERATION:"cna",MRNA_EXPRESSION:"mrna",METHYLATION:"methylation",METHYLATION_BINARY:"methylation",PROTEIN_LEVEL:"rppa"},this.asyncUrlParams=Object(d.T)({await:function(){return[n.asyncCustomCaseSet]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",I(this));case 1:case"end":return e.stop()}},e,this)}))}}),this.initiallySelected={profileIds:!1,sampleListId:!1},this.initialize(t)}var t,n,a;return t=e,(n=[{key:"initialize",value:function(e){var t=this;Object(f.labelMobxPromises)(this),e&&this.setParamsFromUrl(e);var n=localStorage.getItem("legacyStudySubmission");if(localStorage.removeItem("legacyStudySubmission"),n)try{this.setParamsFromLocalStorage(JSON.parse(n))}catch(e){throw"error parseing/setting legacyStudySubmission"}Object(i.reaction)(function(){return t.allSelectedStudyIds},function(){t.studiesHaveChangedSinceInitialization=!0})}},{key:"deleteVirtualStudy",value:function(e){var t=this;V.a.deleteVirtualStudy(e).then(Object(i.action)(function(){t.deletedVirtualStudies.push(e),-1!==t.selectableSelectedStudyIds.indexOf(e)&&(t.selectableSelectedStudyIds=r.difference(t.selectableSelectedStudyIds,[e]))}),Object(i.action)(function(e){}))}},{key:"restoreVirtualStudy",value:function(e){var t=this;V.a.addVirtualStudy(e).then(Object(i.action)(function(){t.deletedVirtualStudies=t.deletedVirtualStudies.filter(function(t){return t!==e})}),Object(i.action)(function(e){}))}},{key:"setStudyIdSelected",value:function(e,t){if(this.forDownloadTab){var n={};t&&(n[e]=t),this._allSelectedStudyIds=i.observable.map(n)}else t?this._allSelectedStudyIds.set(e,!0):this._allSelectedStudyIds.delete(e)}},{key:"setCaseIds",value:function(e){this.selectedSampleListId=oe,this.caseIdsMode="sample",this.caseIds=r.flatten(Object.keys(e).map(function(t){return e[t].map(function(e){return"".concat(t,":").concat(e)})})).join("\n")}},{key:"getGeneSuggestions",value:function(e){return re(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,o.a.getAllGenesUsingGET({alias:e});case 3:return t.t1=t.sent,t.abrupt("return",{alias:t.t0,genes:t.t1});case 5:case"end":return t.stop()}},t)}))}},{key:"getSamplesForStudyAndPatient",value:function(e,t){return o.a.getAllSamplesOfPatientInStudyUsingGET({studyId:e,patientId:t}).then(function(n){return{studyId:e,patientId:t,samples:n,error:void 0}},function(n){return{studyId:e,patientId:t,samples:[],error:n}})}},{key:"isVirtualStudy",value:function(e){return!this.cancerStudyIdsSet.result[e]}},{key:"isDeletedVirtualStudy",value:function(e){return!!(this.isVirtualStudy(e)&&this.deletedVirtualStudies.indexOf(e)>-1)}},{key:"isSingleStudySelected",value:function(e){if(1!==this.selectableSelectedStudyIds.length)return!1;var t=this.selectableSelectedStudyIds[0];return this.isVirtualStudy(t)===e}},{key:"calculateDataTypePriorityCode",value:function(e){var t=e.mutation,n=e.cna;return t&&n?"0":t?"1":n?"2":"0"}},{key:"getFilteredProfiles",value:function(e){var t=this;return this.molecularProfiles.result.filter(function(n){return n.molecularAlterationType==e&&(n.showProfileInAnalysisTab||t.forDownloadTab)})}},{key:"isProfileSelected",value:function(e){return r.includes(this.selectedProfileIds,e)}},{key:"getSelectedProfileIdFromMolecularAlterationType",value:function(e,t){var n=!0,r=!1,o=void 0;try{for(var i,a=(t||this.selectedProfileIds)[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value,l=this.dict_molecularProfileId_molecularProfile[s];if(l&&l.molecularAlterationType===e)return l.molecularProfileId}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return""}},{key:"sanitizeQueryParams",value:function(e){return e?decodeURIComponent(e).replace(/\+/g,"\n"):""}},{key:"setParamsFromUrl",value:function(e){var t;"string"==typeof e?t=C.a.parse(e,!0).query:t=e;var n=[t.genetic_profile_ids_PROFILE_MUTATION_EXTENDED,t.genetic_profile_ids_PROFILE_COPY_NUMBER_ALTERATION,t.genetic_profile_ids_PROFILE_MRNA_EXPRESSION,t.genetic_profile_ids_PROFILE_METHYLATION,t.genetic_profile_ids_PROFILE_PROTEIN_EXPRESSION,t.genetic_profile_ids_PROFILE_GENESET_SCORE,t.genetic_profile_ids_PROFILE_GENERIC_ASSAY],o=t.cancer_study_list?t.cancer_study_list.split(","):t.cancer_study_id?[t.cancer_study_id]:[];this.selectableSelectedStudyIds=o,this._defaultSelectedIds=i.observable.map(Object(d.Z)(o)),this._selectedProfileIds=n.every(function(e){return void 0===e})?void 0:n.filter(r.identity),this.zScoreThreshold=t.Z_SCORE_THRESHOLD||"2.0",this.rppaScoreThreshold=t.RPPA_SCORE_THRESHOLD||"2.0",this.dataTypePriorityCode=t.data_priority||t.profileFilter||"0",this.selectedSampleListId=t.case_set_id?t.case_set_id.toString():"",this.caseIds=this.sanitizeQueryParams(t.case_ids),this.caseIdsMode="sample",this.geneQuery=ae(decodeURIComponent(t.gene_list||"")),this.genesetQuery=ae(decodeURIComponent(t[J.a.geneset_list]||"")),this.forDownloadTab="tab_download"===t.tab_index,this.initiallySelected.profileIds=!0,this.initiallySelected.sampleListId=!0}},{key:"setParamsFromLocalStorage",value:function(e){var t=e.case_ids;if(t&&e.case_set_id==oe&&(this.selectedSampleListId=oe,this.caseIdsMode="sample",this.caseIds=t.replace(/\+/g,"\n"),this.initiallySelected.sampleListId=!0),e.cancer_study_list){var n=!0,r=!1,o=void 0;try{for(var i,a=e.cancer_study_list.split(",")[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;"null"!==s&&(this.setStudyIdSelected(s,!0),this._defaultSelectedIds.set(s,!0))}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}}}},{key:"selectCancerType",value:function(e,t){var n=e.cancerTypeId;t?r.includes(this.selectedCancerTypeIds,n)?this.selectedCancerTypeIds=r.difference(this.selectedCancerTypeIds,[n]):this.selectedCancerTypeIds=r.union(this.selectedCancerTypeIds,[n]):this.clickAgainToDeselectSingle&&r.isEqual(Object(i.toJS)(this.selectedCancerTypeIds),[n])?this.selectedCancerTypeIds=[]:this.selectedCancerTypeIds=[n]}},{key:"setSearchText",value:function(e){this.clearSelectedCancerType(),this.searchText=e}},{key:"clearSelectedCancerType",value:function(){this.selectedCancerTypeIds=[]}},{key:"selectMolecularProfile",value:function(e,t){var n=this.getFilteredProfiles(e.molecularAlterationType).map(function(e){return e.molecularProfileId});if(this.forDownloadTab)this._selectedProfileIds=[e.molecularProfileId];else{var o=r.difference(this.selectedProfileIds,n);this._selectedProfileIds=t?r.union(o,[e.molecularProfileId]):o}}},{key:"replaceGene",value:function(e,t){this.geneQuery=ae(this.geneQuery.toUpperCase().replace(new RegExp("\\b".concat(e.toUpperCase(),"\\b"),"g"),function(){return t.toUpperCase()}))}},{key:"replaceGeneset",value:function(e,t){this.genesetQuery=ae(this.genesetQuery.toUpperCase().replace(new RegExp("\\b".concat(e.toUpperCase(),"\\b"),"g"),function(){return t.toUpperCase()}))}},{key:"applyGeneSelection",value:function(e){var t=$(r.partition(e.keys(),function(t){return e.get(t)}),2),n=t[0],o=t[1];n=r.difference(n,this.geneIds),o=r.intersection(o,this.geneIds);var i=!0,a=!1,s=void 0;try{for(var l,u=o[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value;this.replaceGene(c,"")}}catch(e){a=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw s}}this.geneQuery=ae([this.geneQuery].concat(X(n)).join(" "))}},{key:"addToGenesetSelection",value:function(e){var t=$(r.partition(e.keys(),function(t){return e.get(t)}),2),n=t[0],o=(t[1],r.union(n,this.genesetIds).join(" "));this.genesetQuery=ae(o)}},{key:"applyGenesetSelection",value:function(e){var t=$(r.partition(e.keys(),function(t){return e.get(t)}),2),n=t[0],o=t[1],i=this.genesetQuery;if(n.length>0){var a=[],s=!0,l=!1,u=void 0;try{for(var c,p=n[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){var d=c.value;a.push(d)}}catch(e){l=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw u}}i=a.join(" ")}if(o.length>0){var f=i.split(" "),h=!0,m=!1,y=void 0;try{for(var b,g=o[Symbol.iterator]();!(h=(b=g.next()).done);h=!0){var v=b.value,S=!0,C=!1,_=void 0;try{for(var T,E=f[Symbol.iterator]();!(S=(T=E.next()).done);S=!0){var w=T.value;if(v===w){var O=f.indexOf(w);O>=0&&f.splice(O,1)}}}catch(e){C=!0,_=e}finally{try{S||null==E.return||E.return()}finally{if(C)throw _}}}}catch(e){m=!0,y=e}finally{try{h||null==g.return||g.return()}finally{if(m)throw y}}i=f.join(" ")}i=ae(i),this.genesetQuery=i}},{key:"submit",value:function(){if(this.oql.error)return this.geneQueryErrorDisplayStatus=se.ShouldFocus,this.genesetQueryErrorDisplayStatus=se.ShouldFocus,!1;if(!this.submitEnabled||!this.asyncUrlParams.isComplete)return!1;var e=this.asyncUrlParams.result;return this.forDownloadTab?function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"post",o=document.createElement("form"),i=r;"smart"===r&&(i=Object(_.b)(e,t).length>1800?"post":"get"),o.setAttribute("method",i),o.setAttribute("action",e),n&&o.setAttribute("target",n);for(var a=0,s=Object.keys(t);a<s.length;a++){var l=s[a],u=document.createElement("input");u.setAttribute("type","hidden"),u.setAttribute("name",l),u.setAttribute("value",t[l]),o.appendChild(u)}document.body.appendChild(o),o.submit()}(Object(_.b)("data_download"),e.query,void 0,"smart"):this.singlePageAppSubmitRoutine(e.query),!0}},{key:"openSummary",value:function(){this.summaryEnabled&&Object(_.E)(this.selectableSelectedStudyIds)}},{key:"virtualStudiesMap",get:function(){return r.keyBy(this.userVirtualStudies.result,function(e){return e.id})}},{key:"selectedVirtualStudies",get:function(){var e=this;return r.reduce(this.selectableSelectedStudies,function(t,n){return e.isVirtualStudy(n.studyId)&&void 0!==e.virtualStudiesMap&&e.virtualStudiesMap[n.studyId]&&t.push(e.virtualStudiesMap[n.studyId]),t},[])}},{key:"physicalStudyIdsInSelection",get:function(){var e={},t=!0,n=!1,r=void 0;try{for(var o,i=this.selectableSelectedStudyIds[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value,s=this.virtualStudiesMap[a];s?s.data.studies.forEach(function(t){return e[t.id]=!0}):e[a]=!0}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return Object.keys(e)}},{key:"stateToSerialize",get:function(){return r.pick(this,le)}},{key:"onlyOneReferenceGenome",get:function(){return 1===r.uniq(this.selectableSelectedStudies.map(function(e){return e.referenceGenome})).length}},{key:"allSelectedStudyIds",get:function(){return this._allSelectedStudyIds.keys()}},{key:"selectableSelectedStudyIds",get:function(){var e=this._allSelectedStudyIds.keys(),t=this.selectableStudiesSet.result;return e=e.reduce(function(e,n){return t[n]?e.concat(t[n]):e},[]),e=r.uniq(e),this.forDownloadTab?e.slice(-1):e},set:function(e){this._allSelectedStudyIds=i.observable.map(Object(d.Z)(e))}},{key:"defaultSelectedIds",get:function(){return this._defaultSelectedIds}},{key:"selectedProfileIds",get:function(){var e,t=this;if(void 0!==this._selectedProfileIds)e=this._selectedProfileIds;else{e=[];for(var n=0,r=["MUTATION_EXTENDED","COPY_NUMBER_ALTERATION"];n<r.length;n++){var o=r[n],i=this.getFilteredProfiles(o);i.length&&e.push(i[0].molecularProfileId)}}return this.forDownloadTab?e.slice(0,1):e.filter(function(e){var n=t.dict_molecularProfileId_molecularProfile[e];return n&&n.showProfileInAnalysisTab})},set:function(e){this._selectedProfileIds=e}},{key:"selectedSampleListId",get:function(){return void 0!==this._selectedSampleListId?this._selectedSampleListId:this.defaultSelectedSampleListId},set:function(e){this._selectedSampleListId=e}},{key:"caseIdsMode",get:function(){return this.selectedSampleListId===oe?this._caseIdsMode:"sample"},set:function(e){this._caseIdsMode=e}},{key:"geneQuery",get:function(){return this._geneQuery},set:function(e){this.geneQueryErrorDisplayStatus=se.Unfocused,this._geneQuery=e}},{key:"genesetQuery",get:function(){return this.rawGenesetQuery.toUpperCase()},set:function(e){this.genesetQueryErrorDisplayStatus=se.Unfocused,this.rawGenesetQuery=e}},{key:"maxTreeDepth",get:function(){return this.forDownloadTab&&this._maxTreeDepth>0?1:this._maxTreeDepth},set:function(e){this._maxTreeDepth=e}},{key:"userLoggedIn",get:function(){return Object(d.C)().globalStores.appStore.isLoggedIn}},{key:"treeData",get:function(){return new p({cancerTypes:this.cancerTypes.result,studies:this.cancerStudies.result,priorityStudies:this.priorityStudies,virtualStudies:this.forDownloadTab?[]:this.userVirtualStudies.result,maxTreeDepth:this.maxTreeDepth})}},{key:"selectedCancerTypes",get:function(){var e=this;return this.selectedCancerTypeIds.map(function(t){return e.treeData.map_cancerTypeId_cancerType.get(t)}).filter(r.identity)}},{key:"selectableSelectedStudies",get:function(){var e=this;return this.selectableSelectedStudyIds.map(function(t){return e.treeData.map_studyId_cancerStudy.get(t)}).filter(r.identity)}},{key:"isSingleVirtualStudySelected",get:function(){return this.isSingleStudySelected(!0)}},{key:"isSingleNonVirtualStudySelected",get:function(){return this.isSingleStudySelected(!1)}},{key:"isMultipleNonVirtualStudiesSelected",get:function(){var e=this;return this.selectableSelectedStudyIds.filter(function(t){return!e.isVirtualStudy(t)}).length>1}},{key:"getOverlappingStudiesMap",get:function(){var e,t,n=(e=this.selectableSelectedStudies,t=r.reduce(e,function(e,t){if(/_tcga/.test(t.studyId)){var n=t.studyId.replace(/(_\d\d\d\d|_pub|(_pub\d\d\d\d)|_pan_can_atlas_\d\d\d\d)$/g,"");n&&(n in e?e[n].push(t):e[n]=[t])}return e},{}),r.filter(t,function(e){return e.length>1}));return r.chain(n).flatten().keyBy(function(e){return e.studyId}).value()}},{key:"isVirtualStudySelected",get:function(){var e=!1,t=!0,n=!1,r=void 0;try{for(var o,i=this.selectableSelectedStudyIds[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;if(this.virtualStudiesMap[a]){e=!0;break}}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return e}},{key:"isVirtualStudyQuery",get:function(){return 0!==this.selectableSelectedStudyIds.length&&(this.selectableSelectedStudyIds.length>1||this.isSingleVirtualStudySelected)}},{key:"dataTypePriorityCode",set:function(e){switch(e){default:case"0":this.dataTypePriority={mutation:!0,cna:!0};break;case"1":this.dataTypePriority={mutation:!0,cna:!1};break;case"2":this.dataTypePriority={mutation:!1,cna:!0}}},get:function(){return this.calculateDataTypePriorityCode(this.dataTypePriority)}},{key:"dict_molecularProfileId_molecularProfile",get:function(){return r.keyBy(this.molecularProfiles.result,function(e){return e.molecularProfileId})}},{key:"isGenesetProfileSelected",get:function(){var e=!1;if(this.getFilteredProfiles("GENESET_SCORE")[0])for(var t in this.selectedProfileIds)this.selectedProfileIds[t]===this.getFilteredProfiles("GENESET_SCORE")[0].molecularProfileId&&(e=!0);return e}},{key:"defaultProfilesForOql",get:function(){if(this.molecularProfilesInSelectedStudies.isComplete)return Object(B.V)(this.molecularProfilesInSelectedStudies.result)}},{key:"defaultMutationProfile",get:function(){return this.defaultProfilesForOql&&this.defaultProfilesForOql[O.a.MUTATION_EXTENDED]}},{key:"defaultCnaProfile",get:function(){return this.defaultProfilesForOql&&this.defaultProfilesForOql[O.a.COPY_NUMBER_ALTERATION]}},{key:"defaultMrnaProfile",get:function(){return this.defaultProfilesForOql&&this.defaultProfilesForOql[O.a.MRNA_EXPRESSION]}},{key:"defaultProtProfile",get:function(){return this.defaultProfilesForOql&&this.defaultProfilesForOql[O.a.PROTEIN_LEVEL]}},{key:"defaultSelectedSampleListId",get:function(){if(this.isVirtualStudyQuery)return"all";if(1===this.selectableSelectedStudyIds.length){var e=this.selectableSelectedStudyIds[0],t=this.getSelectedProfileIdFromMolecularAlterationType("MUTATION_EXTENDED"),n=this.getSelectedProfileIdFromMolecularAlterationType("COPY_NUMBER_ALTERATION"),r=this.getSelectedProfileIdFromMolecularAlterationType("MRNA_EXPRESSION"),o=this.getSelectedProfileIdFromMolecularAlterationType("PROTEIN_LEVEL"),i=e+"_all";return t&&n&&!r&&!o?i=e+"_cnaseq":!t||n||r||o?t||!n||r||o?t||n||!r||o?(t||n)&&r&&!o?i=e+"_3way_complete":t||n||r||!o||(i=e+"_rppa"):this.isProfileSelected(e+"_mrna_median_Zscores")?i=e+"_mrna":this.isProfileSelected(e+"_rna_seq_mrna_median_Zscores")?i=e+"_rna_seq_mrna":this.isProfileSelected(e+"_rna_seq_v2_mrna_median_Zscores")&&(i=e+"_rna_seq_v2_mrna"):i=e+"_cna":i=e+"_sequenced",this.dict_sampleListId_sampleList[i]||(i===e+"_cnaseq"?i=e+"_cna_seq":i===e+"_3way_complete"&&(i=e+"_complete")),this.dict_sampleListId_sampleList[i]||(i=e+"_all"),i}}},{key:"dict_sampleListId_sampleList",get:function(){return r.keyBy(this.sampleLists.result,function(e){return e.sampleListId})}},{key:"oql",get:function(){try{return{query:this.geneQuery?Object(m.g)(this.geneQuery.trim().toUpperCase()):[],error:void 0}}catch(o){if("SyntaxError"!==o.name)return{query:[],error:{start:0,end:0,message:"Unexpected ".concat(o)}};var e,t,n,r=o.location.start.offset;return r===this.geneQuery.length?(e="after",t=r-1,n=r):0===r?(e="before",t=r,n=r+1):(e="at",t=r,n=r+1),{query:[],error:{start:t,end:n,message:"OQL syntax error ".concat(e," selected character; please fix and submit again.")}}}}},{key:"geneIds",get:function(){try{return this.oql.query.map(function(e){return e.gene})}catch(e){return[]}}},{key:"genesetIdsQuery",get:function(){try{return{query:this.genesetQuery?this.genesetQuery.split(/[ \n]+/):[],error:void 0}}catch(o){if("SyntaxError"!==o.name)return{query:[],error:{start:0,end:0,message:"Unexpected ".concat(o)}};var e,t,n,r=o.location.start.offset;return r===this.geneQuery.length?(e="after",t=r-1,n=r):0===r?(e="before",t=r,n=r+1):(e="at",t=r,n=r+1),{query:[],error:{start:t,end:n,message:"OQL syntax error ".concat(e," selected character; please fix and submit again.")}}}}},{key:"genesetIds",get:function(){return this.genesetIdsQuery.query}},{key:"minYVolcanoPlot",get:function(){return this.volcanoPlotTableData.result&&(e=this.volcanoPlotTableData.result).length>0?r.minBy(e,function(e){return e.representativePvalue}).representativePvalue:void 0;var e}},{key:"volcanoPlotGraphData",get:function(){return this.volcanoPlotTableData.result?(e=this.volcanoPlotTableData.result,t=this.map_genesets_selected_volcano,e.length>0?e.map(function(e){var n=e.representativeScore,r=e.representativePvalue,o=e.name;return{x:n,y:-Math.log(r)/Math.log(10),fill:t.get(o)?"tomato":"3786C2"}}):void 0):void 0;var e,t}},{key:"submitEnabled",get:function(){return!this.submitError&&(this.genes.isComplete||this.genesets.isComplete)&&this.asyncUrlParams.isComplete||!!this.oql.error||!!this.genesetIdsQuery.error}},{key:"summaryEnabled",get:function(){return this.selectableSelectedStudyIds.length>0}},{key:"hasSelectedStudies",get:function(){return this.selectableSelectedStudyIds.length>0}},{key:"oqlMessages",get:function(){return Object(B.Y)(this.oql.query)}},{key:"approxSampleCount",get:function(){var e=this.selectedSampleListId;if(!e)return this.profiledSamplesCount.result.all;if(e===oe)return this.caseIds?Math.max(this.caseIds.trim().split(/\s+/g).length,1):1;var t=this.sampleLists.result.find(function(t){return t.sampleListId===e});return t?t.sampleCount:e in this.profiledSamplesCount.result?this.profiledSamplesCount.result[e]:this.profiledSamplesCount.result.all}},{key:"isQueryLimitReached",get:function(){return this.oql.query.length*this.approxSampleCount>g.b.serverConfig.query_product_limit}},{key:"geneLimit",get:function(){return Math.floor(g.b.serverConfig.query_product_limit/this.approxSampleCount)}},{key:"isMixedReferenceGenome",get:function(){var e=this;if(this.physicalStudyIdsInSelection&&this.physicalStudiesSet.result){var t=r.map(this.physicalStudyIdsInSelection,function(t){return e.physicalStudiesSet.result[t]});return Object(Z.c)(t)}}},{key:"alterationTypesInOQL",get:function(){return Object(B.T)(this.oql.query)}},{key:"submitError",get:function(){if(!this.selectableSelectedStudyIds.length)return"Please select one or more cancer studies.";if(this.isSingleNonVirtualStudySelected){if(!this.selectedProfileIds.length)return"Please select one or more molecular profiles.";if(this.alterationTypesInOQL.haveMutInQuery&&!this.defaultMutationProfile)return"Mutation data query specified in OQL, but no mutation profile is available for the selected study.";if(this.alterationTypesInOQL.haveCnaInQuery&&!this.defaultCnaProfile)return"CNA data query specified in OQL, but no CNA profile is available in the selected study.";if(this.alterationTypesInOQL.haveMrnaInQuery&&!this.defaultMrnaProfile)return"mRNA expression data query specified in OQL, but no mRNA profile is available in the selected study.";if(this.alterationTypesInOQL.haveProtInQuery&&!this.defaultProtProfile)return"Protein level data query specified in OQL, but no protein level profile is available in the selected study."}else if(!this.dataTypePriority.mutation&&!this.dataTypePriority.cna)return"Please select one or more molecular profiles.";if(this.selectableSelectedStudyIds.length&&this.selectedSampleListId===oe){if(this.asyncCustomCaseSet.isComplete&&!this.asyncCustomCaseSet.result.length)return"Please enter at least one ID in your custom case set.";if(this.asyncCustomCaseSet.error)return"Error in custom case set."}else{if(this.alterationTypesInOQL.haveMrnaInQuery&&this.selectableSelectedStudyIds.length>1)return"Expression filtering in the gene list (the EXP command) is not supported when doing cross cancer queries.";if(this.alterationTypesInOQL.haveProtInQuery&&this.selectableSelectedStudyIds.length>1)return"Protein level filtering in the gene list (the PROT command) is not supported when doing cross cancer queries."}if(0!==this.selectedProfileIds.length){if(1===this.selectedProfileIds.length){if(this.isGenesetProfileSelected){if(!this.genesetQuery.length&&!this.oql.query.length)return"Please enter one or more gene symbols and gene sets.";if(!this.genesetQuery.length)return"Please enter one or more gene sets or deselect gene set profiles.";if(!this.oql.query.length)return"Please enter one or more gene symbols."}else if(!this.oql.query.length)return"Please enter one or more gene symbols."}else if(this.isGenesetProfileSelected){if(!this.genesetQuery.length&&!this.oql.query.length)return"Please enter one or more gene symbols and gene sets.";if(!this.oql.query.length)return"Please enter one or more gene symbols."}else if(!this.oql.query.length)return"Please enter one or more gene symbols."}else if(!this.oql.query.length)return"Please enter one or more gene symbols.";if(this.isQueryLimitReached)return"Please limit your queries to ".concat(this.geneLimit," genes or fewer.");if(this.genes.result.suggestions.length)return"Please edit the gene symbols.";var e=r.groupBy(this.genes.result.found,function(e){return e.hugoGeneSymbol});return r.some(e,function(e){return e.length>1})?"Please edit the gene symbols.":void 0}},{key:"downloadDataFilename",get:function(){var e=1===this.selectableSelectedStudyIds.length&&this.treeData.map_studyId_cancerStudy.get(this.selectableSelectedStudyIds[0]),t=this.dict_molecularProfileId_molecularProfile[this.selectedProfileIds[0]];if(!this.forDownloadTab||!e||!t)return"cbioportal-data.txt";var n=this.dict_molecularAlterationType_filenameSuffix[t.molecularAlterationType]||t.molecularAlterationType.toLowerCase();return"cbioportal-".concat(e.studyId,"-").concat(n,".txt")}},{key:"molecularProfilesInStudyCache",get:function(){return new L}},{key:"sampleListsInStudyCache",get:function(){return new Y}}])&&ee(t.prototype,n),a&&ee(t,a),e}();ne([i.observable],ue.prototype,"studiesHaveChangedSinceInitialization",void 0),ne([i.observable],ue.prototype,"deletedVirtualStudies",void 0),ne([i.computed],ue.prototype,"virtualStudiesMap",null),ne([i.computed],ue.prototype,"selectedVirtualStudies",null),ne([i.computed],ue.prototype,"physicalStudyIdsInSelection",null),ne([i.computed],ue.prototype,"stateToSerialize",null),ne([i.computed],ue.prototype,"onlyOneReferenceGenome",null),ne([i.observable],ue.prototype,"forDownloadTab",void 0),ne([i.observable],ue.prototype,"transposeDataMatrix",void 0),ne([i.observable],ue.prototype,"searchText",void 0),ne([i.observable],ue.prototype,"_allSelectedStudyIds",void 0),ne([i.computed],ue.prototype,"allSelectedStudyIds",null),ne([i.computed],ue.prototype,"selectableSelectedStudyIds",null),ne([i.action],ue.prototype,"setStudyIdSelected",null),ne([i.computed],ue.prototype,"defaultSelectedIds",null),ne([i.observable],ue.prototype,"dataTypePriority",void 0),ne([i.observable.ref],ue.prototype,"_selectedProfileIds",void 0),ne([i.computed],ue.prototype,"selectedProfileIds",null),ne([i.observable],ue.prototype,"zScoreThreshold",void 0),ne([i.observable],ue.prototype,"rppaScoreThreshold",void 0),ne([i.observable],ue.prototype,"_selectedSampleListId",void 0),ne([i.computed],ue.prototype,"selectedSampleListId",null),ne([i.observable],ue.prototype,"caseIds",void 0),ne([i.observable],ue.prototype,"_defaultStudySampleMap",void 0),ne([i.observable],ue.prototype,"_caseIdsMode",void 0),ne([i.computed],ue.prototype,"caseIdsMode",null),ne([i.observable],ue.prototype,"_geneQuery",void 0),ne([i.observable],ue.prototype,"rawGenesetQuery",void 0),ne([i.observable],ue.prototype,"geneQueryErrorDisplayStatus",void 0),ne([i.observable],ue.prototype,"genesetQueryErrorDisplayStatus",void 0),ne([i.observable],ue.prototype,"showMutSigPopup",void 0),ne([i.observable],ue.prototype,"showGisticPopup",void 0),ne([i.observable],ue.prototype,"showGenesetsHierarchyPopup",void 0),ne([i.observable],ue.prototype,"showGenesetsVolcanoPopup",void 0),ne([i.observable],ue.prototype,"priorityStudies",void 0),ne([i.observable],ue.prototype,"showSelectedStudiesOnly",void 0),ne([i.observable.shallow],ue.prototype,"selectedCancerTypeIds",void 0),ne([i.observable],ue.prototype,"clickAgainToDeselectSingle",void 0),ne([i.observable],ue.prototype,"searchExampleMessage",void 0),ne([i.observable],ue.prototype,"volcanoPlotSelectedPercentile",void 0),ne([i.observable],ue.prototype,"_maxTreeDepth",void 0),ne([i.computed],ue.prototype,"maxTreeDepth",null),ne([i.computed],ue.prototype,"userLoggedIn",null),ne([i.action],ue.prototype,"setCaseIds",null),ne([b.a],ue.prototype,"getGeneSuggestions",null),ne([b.a],ue.prototype,"getSamplesForStudyAndPatient",null),ne([f.cached],ue.prototype,"treeData",null),ne([i.computed],ue.prototype,"selectedCancerTypes",null),ne([i.computed],ue.prototype,"selectableSelectedStudies",null),ne([i.computed],ue.prototype,"isSingleVirtualStudySelected",null),ne([i.computed],ue.prototype,"isSingleNonVirtualStudySelected",null),ne([i.computed],ue.prototype,"isMultipleNonVirtualStudiesSelected",null),ne([i.computed],ue.prototype,"getOverlappingStudiesMap",null),ne([i.computed],ue.prototype,"isVirtualStudySelected",null),ne([i.computed],ue.prototype,"isVirtualStudyQuery",null),ne([i.computed],ue.prototype,"dataTypePriorityCode",null),ne([i.computed],ue.prototype,"dict_molecularProfileId_molecularProfile",null),ne([i.computed],ue.prototype,"defaultProfilesForOql",null),ne([i.computed],ue.prototype,"defaultMutationProfile",null),ne([i.computed],ue.prototype,"defaultCnaProfile",null),ne([i.computed],ue.prototype,"defaultMrnaProfile",null),ne([i.computed],ue.prototype,"defaultProtProfile",null),ne([i.computed],ue.prototype,"defaultSelectedSampleListId",null),ne([i.computed],ue.prototype,"dict_sampleListId_sampleList",null),ne([i.computed],ue.prototype,"oql",null),ne([i.computed],ue.prototype,"geneIds",null),ne([i.computed],ue.prototype,"genesetIdsQuery",null),ne([i.computed],ue.prototype,"genesetIds",null),ne([i.computed],ue.prototype,"minYVolcanoPlot",null),ne([i.observable],ue.prototype,"map_genesets_selected_volcano",void 0),ne([i.computed],ue.prototype,"volcanoPlotGraphData",null),ne([i.computed],ue.prototype,"submitEnabled",null),ne([i.computed],ue.prototype,"summaryEnabled",null),ne([i.computed],ue.prototype,"hasSelectedStudies",null),ne([i.computed],ue.prototype,"oqlMessages",null),ne([i.computed],ue.prototype,"approxSampleCount",null),ne([i.computed],ue.prototype,"isQueryLimitReached",null),ne([i.computed],ue.prototype,"geneLimit",null),ne([i.computed],ue.prototype,"isMixedReferenceGenome",null),ne([i.computed],ue.prototype,"alterationTypesInOQL",null),ne([i.computed],ue.prototype,"submitError",null),ne([i.computed],ue.prototype,"downloadDataFilename",null),ne([i.action],ue.prototype,"setParamsFromUrl",null),ne([i.action],ue.prototype,"setParamsFromLocalStorage",null),ne([i.action],ue.prototype,"selectCancerType",null),ne([i.action],ue.prototype,"setSearchText",null),ne([i.action],ue.prototype,"clearSelectedCancerType",null),ne([i.action],ue.prototype,"selectMolecularProfile",null),ne([i.action],ue.prototype,"replaceGene",null),ne([i.action],ue.prototype,"replaceGeneset",null),ne([i.action],ue.prototype,"applyGeneSelection",null),ne([i.action],ue.prototype,"addToGenesetSelection",null),ne([i.action],ue.prototype,"applyGenesetSelection",null),ne([i.action],ue.prototype,"submit",null),ne([i.action],ue.prototype,"openSummary",null),ne([f.cached],ue.prototype,"molecularProfilesInStudyCache",null),ne([f.cached],ue.prototype,"sampleListsInStudyCache",null);var ce=Object(v.a)(ue)},792:function(e,t,n){"use strict";n.d(t,"a",function(){return _}),n.d(t,"b",function(){return T});var r=n(0),o=n(1),i=n(5),a=n.n(i),s=(n(828),n(6)),l=n(66),u=n(2),c=n(9),p=n(819);function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}function m(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var S=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":v(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},C=function(e){function t(){var e;return d(this,t),(e=m(this,y(t).apply(this,arguments))).renderedOnce=!1,e}return b(t,r["Component"]),h(t,[{key:"render",value:function(){var e=this;return this.renderedOnce||setTimeout(function(){return e.renderedOnce=!0}),r.createElement("div",{className:this.props.className},this.renderedOnce&&this.props.children,!this.renderedOnce&&(this.props.loadingState||null))}}]),t}();S([u.observable],C.prototype,"renderedOnce",void 0),C=S([c.observer],C);var _=function(e){function t(){return d(this,t),m(this,y(t).apply(this,arguments))}return b(t,r["Component"]),h(t,[{key:"componentDidMount",value:function(){this.props.onTabDidMount&&this.props.onTabDidMount(this.div)}},{key:"componentWillUnmount",value:function(){this.props.onTabUnmount&&this.props.onTabUnmount(this.div)}},{key:"assignRef",value:function(e){this.div=e}},{key:"render",value:function(){var e=this;return r.createElement("div",{ref:function(t){return e.div=t},className:a()({"msk-tab":!0,hiddenByPosition:!!this.props.inactive},this.props.className)},this.props.children)}}]),t}();S([s.default],_.prototype,"assignRef",null);var T=function(e){function t(e){var n;return d(this,t),(n=m(this,y(t).call(this,e))).shownTabs=[],n.tabRefs=[],n.tabIdToNavTabWidth={},n.needToRecomputeNavTabWidths=!0,n.tabClickHandlers=Object(p.a)(function(e,t){e.preventDefault(),n.setActiveTab(t.id,t.datum)}),n.state={currentPage:1,pageBreaks:[]},n}return b(t,r["Component"]),h(t,[{key:"cloneTab",value:function(e,t,n){return n?r.cloneElement(e,{inactive:t},this.props.loadingComponent):r.cloneElement(e,{inactive:t})}},{key:"setActiveTab",value:function(e,t){this.props.onTabClick&&this.props.onTabClick(e,t)}},{key:"navTabsRefHandler",value:function(e){this.navTabsRef=e}},{key:"tabRefHandler",value:function(e,t){e&&t&&this.tabRefs.push({id:e,element:t})}},{key:"nextPage",value:function(){this.setState({currentPage:this.state.currentPage+1})}},{key:"prevPage",value:function(){this.setState({currentPage:this.state.currentPage-1})}},{key:"render",value:function(){var e=this;if(this.props.children&&r.Children.count(this.props.children)){var t,n=this.props.children,i=r.Children.toArray(n),s=e.props.activeTabId&&o.some(i,function(t){return t.props.id===e.props.activeTabId})?e.props.activeTabId:i[0].props.id;return t=o.reduce(i,function(t,n){return n.props.hide||(n.props.id===s?(e.shownTabs.push(n.props.id),t.push(e.cloneTab(n,!1))):(!1===n.props.unmountOnHide||void 0===n.props.unmountOnHide&&!1===e.props.unmountOnHide)&&o.includes(e.shownTabs,n.props.id)&&t.push(e.cloneTab(n,!0))),t},[]),r.createElement("div",{id:this.props.id?this.props.id:"",className:a()("msk-tabs","posRelative",this.props.className)},this.navTabs(n,s),r.createElement(C,{className:"tab-content",loadingState:r.createElement(l.a,{isLoading:!0,center:!0,size:"big"})},t))}return null}},{key:"navTabs",value:function(e,t){this.tabRefs=[];var n=this.tabPages(e,t),o=this.state.pageBreaks.length+1,i=this.state.currentPage>1?r.createElement("li",{key:"prevPage",style:{cursor:"pointer"}},r.createElement("a",{onClick:this.prevPage.bind(this)},r.createElement("i",{className:"fa fa-chevron-left",style:this.props.arrowStyle}))):null,s=this.state.currentPage<o?r.createElement("li",{key:"nextPage",style:{cursor:"pointer"}},r.createElement("a",{onClick:this.nextPage.bind(this)},r.createElement("i",{className:"fa fa-chevron-right",style:this.props.arrowStyle}))):null,l=this.props.tabButtonStyle||"tabs";return r.createElement("ul",{ref:this.navTabsRefHandler.bind(this),className:a()("nav","nav-".concat(l))},i,n[this.state.currentPage-1],s)}},{key:"tabPages",value:function(e,t){var n=this,o=[[]],i=1;return r.Children.forEach(e,function(e){if(e&&!e.props.hide){var s=t===e.props.id?"active":"";n.props.getPaginationWidth&&n.state.pageBreaks.length>0&&n.state.pageBreaks[i-1]===e.props.id&&(o[++i-1]=[]);var l=null;if(e.props.onClickClose){var u=e.props.onClickClose;l=r.createElement("div",{className:"closeButton",onClick:function(t){t.stopPropagation(),u(e.props.id)}},r.createElement("i",{className:"fa fa-md fa-times-circle"}))}o[i-1].push(r.createElement("li",{key:e.props.id,style:{cursor:"pointer"},ref:n.tabRefHandler.bind(n,e.props.id),className:s},r.createElement("a",{className:a()("tabAnchor","tabAnchor_".concat(e.props.id),e.props.anchorClassName),onClick:n.tabClickHandlers(e.props),href:n.props.getTabHref&&n.props.getTabHref(e.props.id),style:e.props.anchorStyle},e.props.linkText,l)))}}),o}},{key:"componentWillReceiveProps",value:function(e){o.isEqual(t.getVisibleTabIds(e.children),t.getVisibleTabIds(this.props.children))||(this.needToRecomputeNavTabWidths=!0)}},{key:"componentDidMount",value:function(){var e=this;this.computeNavTabWidths(),this.needToRecomputeNavTabWidths=!1,this.widthReaction=Object(u.autorun)(function(){e.props.getPaginationWidth&&(e.props.getPaginationWidth(),e.initPaging())})}},{key:"componentWillUnmount",value:function(){this.widthReaction()}},{key:"componentDidUpdate",value:function(){this.needToRecomputeNavTabWidths&&(this.computeNavTabWidths(),this.needToRecomputeNavTabWidths=!1,this.initPaging())}},{key:"computeNavTabWidths",value:function(){var e=this;o.each(this.tabRefs,function(t){e.tabIdToNavTabWidth[t.id]=t.element.offsetWidth}),window.test=this.tabIdToNavTabWidth}},{key:"initPaging",value:function(){if(this.props.getPaginationWidth){var e=this.findPageBreaks(),t=this.findCurrentPage(e);this.setState({currentPage:t,pageBreaks:e})}}},{key:"findCurrentPage",value:function(e){var t=this,n=1,r=!1;return this.props.activeTabId&&e.length>0&&o.each(this.tabRefs,function(o){if(o.id===e[n-1]&&n++,o.id===t.props.activeTabId)return r=!0,!1}),r?n:1}},{key:"findPageBreaks",value:function(){var e=this,t=[];if(this.needToRecomputeNavTabWidths)return[];var n=this.props.getPaginationWidth&&this.props.getPaginationWidth()||0;if(n>0){var o=0;r.Children.forEach(this.props.children,function(r,i){if(r&&r.props.id in e.tabIdToNavTabWidth&&(o+=e.tabIdToNavTabWidth[r.props.id],0!==i)){o>n-50&&(t.push(r.props.id),o=e.tabIdToNavTabWidth[r.props.id])}})}return t}}],[{key:"getVisibleTabIds",value:function(e){return r.Children.map(e,function(e){return e&&!e.props.hide?e.props.id:null}).filter(function(e){return null!==e})}}]),t}();T.defaultProps={unmountOnHide:!0,loadingComponent:r.createElement(l.a,{isLoading:!0,center:!0,size:"big"})},S([s.default],T.prototype,"initPaging",null)},796:function(e,t,n){e.exports={portalWidth:"tables-module__portalWidth__2u2eA",framedImage:"tables-module__framedImage__2sdMG",studyViewTablesTable:"tables-module__studyViewTablesTable__29Y2_",tableSearchInput:"tables-module__tableSearchInput__2uOMk",labelContent:"tables-module__labelContent__2FLsJ",labelContentSVG:"tables-module__labelContentSVG__2v71D",controls:"tables-module__controls__2KTG_",controlsAtTop:"tables-module__controlsAtTop__czH5v",controlsBtn:"tables-module__controlsBtn__24B4k",geneSymbol:"tables-module__geneSymbol__1OUGZ",cancerGene:"tables-module__cancerGene__CqmRo",headerColumn:"tables-module__headerColumn__WCJTO",headerRow:"tables-module__headerRow__3Ckx0",row:"tables-module__row__20ZyT",oddRow:"tables-module__oddRow__3vz4c",evenRow:"tables-module__evenRow__KCskI",highlightedEvenRow:"tables-module__highlightedEvenRow__2EYSy",highlightedRow:"tables-module__highlightedRow__1wuhn",highlightedOddRow:"tables-module__highlightedOddRow__1RWUf",cancerGeneIcon:"tables-module__cancerGeneIcon__1Zp6i",gistic:"tables-module__gistic__1d6Gl",mutsig:"tables-module__mutsig__3Q3o0",cancerGenesRow:"tables-module__cancerGenesRow__1crxh",amp:"tables-module__amp__yRy0o",del:"tables-module__del__PLU6Y",displayFlex:"tables-module__displayFlex__7WOab",headerSortingIcon:"tables-module__headerSortingIcon__1aRye",autoMarginCheckbox:"tables-module__autoMarginCheckbox__3tMQV",union:"tables-module__union__3dOlj",intersection:"tables-module__intersection__2qPMu"}},799:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__1kueS",framedImage:"styles-module__framedImage__1ndwn",SurvivalTable:"styles-module__SurvivalTable__2NKCT",Tooltip:"styles-module__Tooltip__1I-Ty",NotAvailable:"styles-module__NotAvailable__1Zx5R",XmaxNumberInput:"styles-module__XmaxNumberInput__SQsf6"}},801:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__2znIn",framedImage:"styles-module__framedImage__O2nI5",comparisonGroupManager:"styles-module__comparisonGroupManager__1QgCD",groupCheckboxes:"styles-module__groupCheckboxes__3LVqM",markedForDeletion:"styles-module__markedForDeletion__pyY8L",groupRow:"styles-module__groupRow__3thKt",groupItem:"styles-module__groupItem__20g60",groupButtons:"styles-module__groupButtons__YPSq0",buttonUnselected:"styles-module__buttonUnselected__bzlCr",buttonExcludedFromAnalysis:"styles-module__buttonExcludedFromAnalysis__3YbrM",groupLineItemActionButtons:"styles-module__groupLineItemActionButtons__17aPl",sharedGroup:"styles-module__sharedGroup__3pyAe",headerControls:"styles-module__headerControls__2C_RI",survivalPlotHeaderContainer:"styles-module__survivalPlotHeaderContainer__3I3YW",survivalPlotHeader:"styles-module__survivalPlotHeader__qqK6C",survivalTypeOptions:"styles-module__survivalTypeOptions__1iLz-"}},803:function(e,t,n){"use strict";var r=n(0),o=n(1),i=n(9),a=n(5),s=n.n(a),l=n(822),u=n.n(l),c=n(787),p=n.n(c),d=n(2),f=n(788),h=n(46);function m(e){try{return{query:e?Object(h.g)(e.trim().toUpperCase()):[],error:void 0}}catch(i){if("SyntaxError"!==i.name)return{query:[],error:{start:0,end:0,message:"Unexpected ".concat(i)}};var t,n,r,o=i.location.start.offset;return o===e.length?(t="after",n=o-1,r=o):0===o?(t="before",n=o,r=o+1):(t="at",n=o,r=o+1),{query:[],error:{start:n,end:r,message:"OQL syntax error ".concat(t," selected character; please fix and submit again.")}}}}n(830);var y=n(3),b=n(13),g=n(152),v=n.n(g),S=n(794),C=n.n(S),_=n(15);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var k=function(e){if(0==e.genes.length){return r.createElement("div",{className:u.a.suggestionBubble,title:"Could not find gene symbol. Click to remove it from the gene list.",onClick:function(){return e.replaceGene(e.alias,"")}},r.createElement(C.a,{className:u.a.icon,name:"times-circle"}),r.createElement("span",{className:u.a.noChoiceLabel},e.alias))}if(1==e.genes.length){var t=e.genes[0].hugoGeneSymbol,n="'".concat(e.alias,"' is a synonym for '").concat(t,"'. Click here to replace it with the official symbol.");return r.createElement("div",{className:u.a.suggestionBubble,title:n,onClick:function(){return e.replaceGene(e.alias,t)}},r.createElement(C.a,{className:u.a.icon,name:"question"}),r.createElement("span",{className:u.a.singleChoiceLabel},e.alias),r.createElement("span",null,": ".concat(t)))}var o="Ambiguous gene symbol. Click on one of the alternatives to replace it.",i=e.genes.map(function(e){return{label:e.hugoGeneSymbol,value:e.hugoGeneSymbol}});return r.createElement("div",{className:u.a.suggestionBubble,title:o},r.createElement(C.a,{className:u.a.icon,name:"question"}),r.createElement("span",{className:u.a.multiChoiceLabel},e.alias),r.createElement("span",null,":",""),r.createElement(_.DropdownButton,{bsStyle:o.toLowerCase(),bsSize:"xsmall",title:"Select symbol",id:"geneReplace_".concat(e.alias)},i.map(function(t,n){return r.createElement(_.MenuItem,{onClick:function(){e.replaceGene(e.alias,t.value)},eventKey:n+1},t.label)})))},P=function(e){if(e.oql instanceof Error)return r.createElement("div",{className:u.a.GeneSymbolValidator},r.createElement("span",{className:u.a.errorMessage},"Cannot validate gene symbols because of invalid OQL.","",r.createElement("a",{className:"underline",onMouseDown:function(t){t.preventDefault(),e.highlightError()}},"Click to highlight error")));if(0===e.oql.query.length)return null;if(!e.errorMessageOnly&&e.validatingGenes)return r.createElement("div",{className:u.a.GeneSymbolValidator},r.createElement("span",{className:u.a.pendingMessage},"Validating gene symbols..."));if(e.genes instanceof Error)return r.createElement("div",{className:u.a.GeneSymbolValidator},r.createElement("span",{className:u.a.pendingMessage},"Unable to validate gene symbols."));if(e.genes.suggestions.length>0)return r.createElement("div",{className:u.a.GeneSymbolValidator},r.createElement("div",{className:u.a.invalidBubble,title:"Please edit the gene symbols."},r.createElement(C.a,{className:u.a.icon,name:"exclamation-circle"}),r.createElement("span",null,"Invalid gene symbols.")),e.genes.suggestions.map(function(t,n){return r.createElement(k,{key:n,genes:t.genes,alias:t.alias,replaceGene:e.replaceGene})}));var t,n,i,a=o.groupBy(e.genes.found,function(e){return e.hugoGeneSymbol}),l=o.reduce(a,function(e,t,n){return t.length>1&&e.push(n),e},[]);return l.length>0?r.createElement("div",{className:u.a.GeneSymbolValidator},r.createElement("div",{className:u.a.invalidBubble,title:"Please edit the gene symbols."},r.createElement(C.a,{className:u.a.icon,name:"exclamation-circle"}),r.createElement("span",null,"The portal does not currently support the following gene(s):")),l.map(function(t,n){return r.createElement(k,{key:n,genes:[],alias:t,replaceGene:e.replaceGene})})):e.errorMessageOnly?null:r.createElement("div",{className:s()(u.a.GeneSymbolValidator,(t={},n=u.a.nowrap,i=!e.wrapTheContent,n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t))},r.createElement("div",{className:u.a.validBubble,title:"You can now submit the list."},r.createElement(C.a,{className:u.a.icon,name:"check-circle"}),r.createElement("span",null,"All gene symbols are valid.")))},A=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),w(this,O(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return this.props.children?r.createElement("div",{id:"wideGeneBoxValidationStatus"},this.props.children):r.createElement("div",{id:"geneBoxValidationStatus"},r.createElement(P,this.props))}}])&&E(n.prototype,o),i&&E(n,i),t}();function R(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var F=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":G(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},L=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};function B(e){return Number.isInteger(Number(e))}var V=function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=j(t).apply(this,arguments),(e=!r||"object"!==G(r)&&"function"!=typeof r?x(n):r).genes=Object(y.T)({invoke:function(){return L(x(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,i,a,s,l,u,c,p,d=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.geneIds.length){e.next=2;break}return e.abrupt("return",{found:[],suggestions:[]});case 2:return t=o.partition(o.uniq(this.geneIds),B),n=N(t,2),r=n[0],i=n[1],a=function(){return L(d,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,i,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.length){e.next=6;break}return e.next=3,b.a.fetchGenesUsingPOST({geneIdType:"ENTREZ_GENE_ID",geneIds:r});case 3:t=e.sent,e.next=7;break;case 6:t=[];case 7:return n=o.difference(r,t.map(function(e){return e.entrezGeneId+""})),i=n.map(function(e){return{alias:e,genes:[]}}),a=t.map(function(e){return{alias:e.entrezGeneId+"",genes:[e]}}),s=[].concat(R(i),R(a)),e.abrupt("return",{found:t,suggestions:s});case 12:case"end":return e.stop()}},e)}))},s=function(){return L(d,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.length){e.next=6;break}return e.next=3,b.a.fetchGenesUsingPOST({geneIdType:"HUGO_GENE_SYMBOL",geneIds:i});case 3:t=e.sent,e.next=7;break;case 6:t=[];case 7:return n=o.difference(i,t.map(function(e){return e.hugoGeneSymbol})),e.next=10,Promise.all(n.map(function(e){return a.getGeneSuggestions(e)}));case 10:return r=e.sent,e.abrupt("return",{found:t,suggestions:r});case 12:case"end":return e.stop()}},e)}))},e.next=7,Promise.all([a(),s()]);case 7:return l=e.sent,u=N(l,2),c=u[0],p=u[1],e.abrupt("return",{found:[].concat(R(c.found),R(p.found)),suggestions:[].concat(R(c.suggestions),R(p.suggestions))});case 12:case"end":return e.stop()}},e,this)}))},onResult:function(t){e.props.afterValidation&&e.props.afterValidation(0===t.suggestions.length,e.genes.result,e.oql)},default:{found:[],suggestions:[]}}),e}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(t,r["Component"]),n=t,(i=[{key:"getGeneSuggestions",value:function(e){return L(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,b.a.getAllGenesUsingGET({alias:e});case 3:return t.t1=t.sent,t.abrupt("return",{alias:t.t0,genes:t.t1});case 5:case"end":return t.stop()}},t)}))}},{key:"render",value:function(){var e=this;return this.props.skipGeneValidation&&this.props.afterValidation&&this.props.afterValidation(!0,{found:[],suggestions:[]},this.oql),r.createElement(A,{genes:this.props.skipGeneValidation?{found:[],suggestions:[]}:this.genes.isError?new Error("ERROR"):this.genes.result,highlightError:function(){e.props.highlightError&&e.props.highlightError(e.oql)},oql:this.oqlOrError,validatingGenes:!this.props.skipGeneValidation&&this.genes.isPending,errorMessageOnly:this.props.errorMessageOnly,wrapTheContent:this.props.wrap,replaceGene:this.props.replaceGene},this.props.children)}},{key:"oql",get:function(){return m(this.props.geneQuery)}},{key:"geneIds",get:function(){return this.oql.error?[]:this.oql.query.map(function(e){return e.gene})}},{key:"oqlOrError",get:function(){return this.oql.error?new Error("OQL error at character ".concat(this.oql.error.start)):this.oql}}])&&D(n.prototype,i),a&&D(n,a),t}();V.defaultProps={errorMessageOnly:!1},F([v.a],V.prototype,"getGeneSuggestions",null),F([d.computed],V.prototype,"oql",null),F([d.computed],V.prototype,"geneIds",null),F([d.computed],V.prototype,"oqlOrError",null);var U=V=F([i.observer],V),q=n(6),K=n(35),H=n.n(K);function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e,t){return!t||"object"!==J(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",function(){return Z});var Z,X=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":J(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.STUDY_VIEW_PAGE=1]="STUDY_VIEW_PAGE",e[e.ONCOPRINT_HEATMAP=2]="ONCOPRINT_HEATMAP"}(Z||(Z={}));var $=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=W(this,z(t).call(this,e))).currentTextAreaValue="",n._geneQuery="",n.geneQueryIsValid=!0,n.queryToBeValidated="",n.isFocused=!1,n.skipGenesValidation=!1,n.updateQueryToBeValidateDebounce=o.debounce(function(){n.queryToBeValidated=n.currentTextAreaValue,n.skipGenesValidation=!1,""===n.currentTextAreaValue&&(n.geneQuery="",n.props.callback&&n.props.callback(m(""),{found:[],suggestions:[]},n.geneQuery))},500),n.geneQuery=n.props.inputGeneQuery||"",n.queryToBeValidated=n.geneQuery,n.props.validateInputGeneQuery||(n.skipGenesValidation=!0),n.textAreaRef=r.createRef(),n}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(t,r["Component"]),n=t,(i=[{key:"componentDidMount",value:function(){var e=this;this.disposers=[Object(d.reaction)(function(){return e.props.inputGeneQuery},function(t){(t||"").toUpperCase()!==e.geneQuery.toUpperCase()&&(e.props.validateInputGeneQuery||(e.skipGenesValidation=!0),e.geneQuery=(t||"").trim(),e.queryToBeValidated=e.geneQuery),e.updateTextAreaRefValue()}),Object(d.reaction)(function(){return e.showFullText},function(){e.updateTextAreaRefValue()})]}},{key:"componentWillUnmount",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,o=this.disposers[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){(0,r.value)()}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}}},{key:"updateGeneQuery",value:function(e){this.geneQuery=e,this.queryToBeValidated=e,this.isFocused=!0,this.updateTextAreaRefValue()}},{key:"getTextAreaValue",value:function(){return this.showFullText?this.geneQuery:this.getFocusOutValue()}},{key:"updateTextAreaRefValue",value:function(){this.textAreaRef.current.value=this.getTextAreaValue()}},{key:"getFocusOutValue",value:function(){return function(e){var t="";if(e.length>0){t=e[0];for(var n=1;n<e.length;n++){if(t.length>13||t.length+e[n].length>13){t+=" and "+(e.length-n)+" more";break}t+=" "+e[n]}}return t}(m(this.geneQuery).query.map(function(e){return e.gene}))}},{key:"afterGeneSymbolValidation",value:function(e,t,n){this.geneQueryIsValid=e,this.props.callback&&this.props.callback(n,t,this.geneQuery)}},{key:"highlightError",value:function(e){this.textAreaRef.current.focus(),this.textAreaRef.current.setSelectionRange(e.error.start,e.error.end)}},{key:"onChange",value:function(e){this.currentTextAreaValue=e.currentTarget.value,this.geneQuery=this.currentTextAreaValue,this.updateQueryToBeValidateDebounce()}},{key:"onFocus",value:function(){this.isFocused=!0}},{key:"onBlur",value:function(){this.isFocused=!1}},{key:"replaceGene",value:function(e,t){var n=Object(f.e)(this.getTextAreaValue().toUpperCase().replace(new RegExp("\\b".concat(e.toUpperCase(),"\\b"),"g"),function(){return t.toUpperCase()}));this.updateGeneQuery(n)}},{key:"render",value:function(){return r.createElement("div",{className:u.a.genesSelection},r.createElement("div",{className:u.a.topRow},r.createElement("textarea",{ref:this.textAreaRef,onFocus:this.onFocus,onBlur:this.onBlur,className:s()(this.textAreaClasses),rows:5,cols:80,placeholder:this.promptText,title:this.promptText,defaultValue:this.getTextAreaValue(),onChange:this.onChange,"data-test":"geneSet",style:{height:this.props.textAreaHeight}}),this.props.submitButton),r.createElement("div",{className:"oqlValidationContainer"},r.createElement(U,{focus:this.props.focus,geneQuery:this.queryToBeValidated,skipGeneValidation:this.skipGenesValidation,updateGeneQuery:this.updateGeneQuery,afterValidation:this.afterGeneSymbolValidation,replaceGene:this.replaceGene,errorMessageOnly:this.props.location===Z.STUDY_VIEW_PAGE,highlightError:this.highlightError},this.props.children)),r.createElement("div",null,this.showErrorsAndMessages&&this.props.error&&r.createElement("span",{className:p.a.errorMessage,"data-test":"oqlErrorMessage"},this.props.error),this.showErrorsAndMessages&&this.props.messages&&this.props.messages.map(function(e){return r.createElement("span",{className:p.a.oqlMessage},r.createElement("i",{className:"fa fa-info-circle",style:{marginRight:5}}),e)})))}},{key:"geneQuery",get:function(){return this.queryStore?this.queryStore.geneQuery:this._geneQuery},set:function(e){this.queryStore?this.queryStore.geneQuery=e:this._geneQuery=e}},{key:"textAreaClasses",get:function(){var e=[];switch(this.props.location){case Z.STUDY_VIEW_PAGE:e.push(u.a.studyView),!this.isFocused&&this.geneQueryIsValid||e.push(u.a.studyViewFocus);break;case Z.ONCOPRINT_HEATMAP:e.push(u.a.oncoprintHeatmap);break;default:e.push(u.a.default)}return this.geneQuery||e.push(u.a.empty),e}},{key:"showFullText",get:function(){return!this.geneQueryIsValid||this.isFocused||this.props.location!==Z.STUDY_VIEW_PAGE}},{key:"promptText",get:function(){return this.props.textBoxPrompt?this.props.textBoxPrompt:"Click gene symbols below or enter here"}},{key:"showErrorsAndMessages",get:function(){return this.props.location!==Z.STUDY_VIEW_PAGE||this.isFocused}}])&&Q(n.prototype,i),a&&Q(n,a),t}();$.defaultProps={validateInputGeneQuery:!0},X([d.observable],$.prototype,"_geneQuery",void 0),X([d.computed],$.prototype,"geneQuery",null),X([d.observable],$.prototype,"geneQueryIsValid",void 0),X([d.observable],$.prototype,"queryToBeValidated",void 0),X([d.observable],$.prototype,"isFocused",void 0),X([d.observable],$.prototype,"skipGenesValidation",void 0),X([q.default,d.action],$.prototype,"updateGeneQuery",null),X([q.default,d.action],$.prototype,"updateTextAreaRefValue",null),X([d.computed],$.prototype,"textAreaClasses",null),X([d.computed],$.prototype,"showFullText",null),X([q.default,d.action],$.prototype,"afterGeneSymbolValidation",null),X([q.default],$.prototype,"highlightError",null),X([d.computed],$.prototype,"promptText",null),X([H.a],$.prototype,"onChange",null),X([H.a],$.prototype,"onFocus",null),X([H.a],$.prototype,"onBlur",null),X([H.a],$.prototype,"replaceGene",null),X([d.computed],$.prototype,"showErrorsAndMessages",null),$=X([i.observer],$);t.b=$},807:function(e,t,n){"use strict";function r(e){return new Promise(function(t){return setTimeout(t,e)})}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3;return new Promise(function(r){var o=0,i=setInterval(function(){if(o+=t,e())clearInterval(i),r();else if(o>n)throw clearInterval(i),new Error("sleepUntil timeout")},t)})}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o})},810:function(e,t,n){"use strict";var r=n(0),o=n(20),i=(n(891),"https://oncokb.org");function a(){return r.createElement("a",{href:"".concat(i,"/cancerGenes"),target:"_blank"},"OncoKB Cancer Gene List")}var s,l,u=n(796),c=n.n(u),p=n(5),d=n.n(p),f=n(3),h=n(16),m=n(30),y=n(850);function b(e,t){return[e,Object(m.x)(t)].join(":")}function g(e){return e.split(":")[0]}function v(e,t,n,o,i){return r.createElement("div",{style:{marginLeft:e},className:c.a.displayFlex,"data-test":"gene-column-header"},n&&r.createElement(f.d,{mouseEnterDelay:0,placement:"top",overlay:C(o)},r.createElement("div",{onClick:i,className:c.a.displayFlex},function(e){return r.createElement("span",{"data-test":"cancer-gene-filter",className:d()(c.a.cancerGeneIcon,c.a.displayFlex),style:{color:e?h.o:h.n}},r.createElement("i",{className:"fa fa-filter"}))}(o))),t)}function S(e,t,n,s,l,u){return r.createElement("div",{style:{display:"flex",flexDirection:"column",maxWidth:300,fontSize:12}},r.createElement("span",null,function(e,t,n,s,l){if(t){var u="";if(s||l){u=" as a ";var c=[];s&&c.push("oncogene"),l&&c.push("tumor suppressor gene"),u="".concat(u," ").concat(c.join(" and "))}return r.createElement("span",null,r.createElement(o.If,{condition:n},r.createElement(o.Then,null,r.createElement("a",{href:"".concat(i,"/gene/").concat(e),target:"_blank"},e)),r.createElement(o.Else,null,r.createElement("span",null,e))),r.createElement("span",null," is included in the "),a(),(s||l)&&r.createElement("span",null,u),".")}}(e,n,s,l,u)))}function C(e){return e?r.createElement("span",null,"Filtered by ",a(),". Click to show all genes."):r.createElement("span",null,"Showing all genes. Click to filter by"," ",a(),".")}function _(e,t,n,o,i,a){var s="# of samples profiled";"data"!==e&&(s+=" for ".concat(e," in this gene: ").concat(t.toLocaleString()));return r.createElement(f.d,{placement:"right",overlay:function(){return r.createElement("span",{style:{display:"flex",flexDirection:"column"},"data-test":"freq-cell-tooltip"},r.createElement("span",null,s),r.createElement(y.a,{genePanelIds:o,toggleModal:i}))},destroyTooltipOnHide:!0},r.createElement("span",{"data-test":"freq-cell",style:a},Object(m.O)(n/t*100)))}function T(e,t){var n="".concat(t?"Percentage":"Number"," of samples");return"data"!==e&&(n+=" with one or more ".concat(e)),n}n.d(t,"d",function(){return b}),n.d(t,"g",function(){return g}),n.d(t,"f",function(){return v}),n.d(t,"e",function(){return S}),n.d(t,"a",function(){return s}),n.d(t,"b",function(){return l}),n.d(t,"c",function(){return _}),n.d(t,"h",function(){return T}),function(e){e.MUTATION="mutations",e.FUSION="fusions",e.CNA="copy number alterations",e.DATA="data"}(s||(s={})),function(e){e.INTERSECTION="Intersection",e.UNION="Union"}(l||(l={}))},813:function(e,t,n){"use strict";var r,o=n(0),i=n(96),a=n(1085),s=(n(1011),n(2)),l=n(796),u=n.n(l),c=n(1),p=n(9),d=n(5),f=n.n(d),h=n(20),m=n(6),y=n(303),b=n(3),g=n(151),v=n(810),S=n(15);function C(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t,n){return t&&T(e.prototype,t),n&&T(e,n),e}function w(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var R=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},N=(P(r={},"desc",a.b.DESC),P(r,"asc",a.b.ASC),r),D=function(e){function t(e,n){var r;return _(this,t),(r=w(this,O(t).call(this,e))).fixedTopRowsData=n,r}return I(t,g["a"]),E(t,[{key:"sortedData",get:function(){var e=this.sortMetric||function(){return 0},t=void 0===this.sortAscending||this.sortAscending;return[].concat(C(this.fixedTopRowsData),C(Object(i.c)(this.allData,e,t)))}}]),t}();R([s.computed],D.prototype,"sortedData",null);var j=function(e){function t(e){var n;_(this,t),(n=w(this,O(t).call(this,e)))._sortBy=e.sortBy;var r=c.find(n.props.columns,function(e){return e.name===n._sortBy});return n._sortDirection=void 0===e.sortDirection?c.isUndefined(r)?"desc":r.defaultSortDirection||"desc":e.sortDirection,n.initDataStore(),n}return I(t,o["Component"]),E(t,[{key:"componentWillReceiveProps",value:function(e){this.updateDataStore(e)}},{key:"updateDataStore",value:function(e){var t=this,n=new D(function(){return t.props.data},this.props.fixedTopRowsData||[]),r=Object(s.toJS)(this._store.filterString);this._store.setProps({columns:e.columns,dataStore:n,initialSortColumn:this._sortBy,initialSortDirection:this._sortDirection}),void 0!==r&&this._store.setFilterString(r)}},{key:"initDataStore",value:function(){var e=this,t=new D(function(){return e.props.data},this.props.fixedTopRowsData||[]);this._store=new i.a({columns:this.props.columns,dataStore:t,initialSortColumn:this._sortBy,initialSortDirection:this._sortDirection})}},{key:"rowClassName",value:function(e){var t=e.index;if(t>-1&&this.isSelectedRow(this._store.dataStore.sortedFilteredData[t])){var n=[u.a.row];if(this.props.highlightedRowClassName){var r=this.props.highlightedRowClassName(this._store.dataStore.sortedFilteredData[t]);n.push(r)}else n.push(u.a.highlightedRow);return f()(n)}return t<0?u.a.headerRow:f()(u.a.row,t%2==0?u.a.evenRow:u.a.oddRow)}},{key:"rowGetter",value:function(e){var t=e.index;return this._store.dataStore.sortedFilteredData[t]}},{key:"getColumn",value:function(e){return c.keyBy(this.props.columns,function(e){return e.name})[e]}},{key:"sort",value:function(e){var t=e.sortBy;this._store.defaultHeaderClick(this.getColumn(t)),this._sortBy=t,this._sortDirection=this._store.dataStore.sortAscending?"asc":"desc",this.props.afterSorting&&this.props.afterSorting(this._sortBy,this._sortDirection)}},{key:"onFilterTextChange",value:function(){var e=this;return Object(y.a)(function(t){e._store.setFilterString(t)},400)}},{key:"afterSelectingRows",value:function(){this.props.afterSelectingRows&&this.props.afterSelectingRows()}},{key:"changeSelectionType",value:function(e){this.props.toggleSelectionOperator&&this.props.defaultSelectionOperator!==e&&this.props.toggleSelectionOperator()}},{key:"isSelectedRow",value:function(e){return!!c.isFunction(this.props.isSelectedRow)&&this.props.isSelectedRow(e)}},{key:"onAddAll",value:function(){this.props.addAll&&this.props.addAll(this._store.dataStore.sortedFilteredData)}},{key:"onRemoveAll",value:function(){this.props.removeAll&&this.props.removeAll(this._store.dataStore.sortedFilteredData)}},{key:"setInputRef",value:function(e){this.inputElement=e}},{key:"componentDidMount",value:function(){!this.props.hideControls&&this.props.autoFocusSearchAfterRendering&&this.inputElement.focus()}},{key:"getSelectionOptions",value:function(){var e=this;return Object.keys(v.b).map(function(t){var n=v.b[t];return o.createElement(S.MenuItem,{onClick:function(){return e.changeSelectionType(n)},active:e.props.defaultSelectionOperator===t},o.createElement(b.d,{overlay:"".concat(n," of samples in the newly selected rows")},o.createElement("div",null,n," ",o.createElement("i",{className:u.a[n.toLowerCase()]}))))})}},{key:"getAddRemoveAllButton",value:function(){var e,t,n,r=!1;return this.props.numberOfSelectedRows===this.props.data.length&&this.props.removeAll?(e="fixed-header-table-remove-all",t=this.onRemoveAll,n="Deselect all",r=!0):this.props.addAll&&(e="fixed-header-table-add-all",t=this.onAddAll,n="Select all".concat(this.props.showSelectableNumber?" (".concat(this._store.dataStore.sortedFilteredData.length,")"):""),r=!0),r?o.createElement("button",{className:"btn btn-default btn-xs","data-test":e,onClick:t},n):null}},{key:"getControls",value:function(){return o.createElement("div",{className:f()(u.a.controls,P({},u.a.controlsAtTop,!!this.props.showControlsAtTop))},!this.props.showControlsAtTop&&o.createElement("input",{placeholder:"Search...",type:"text",onInput:this.onFilterTextChange(),className:f()("form-control",u.a.tableSearchInput)}),this.props.showAddRemoveAllButton&&this.getAddRemoveAllButton(),o.createElement(h.If,{condition:this.props.showSetOperationsButton&&this.props.numberOfSelectedRows>0},o.createElement("div",{className:"btn-group"},o.createElement("button",{className:"btn btn-default btn-xs",onClick:this.afterSelectingRows},"Select Samples"," ",o.createElement(h.If,{condition:this.props.numberOfSelectedRows>1},o.createElement("i",{style:{marginTop:"-2px"},className:this.props.defaultSelectionOperator===v.b.INTERSECTION?u.a.intersection:u.a.union}))),o.createElement(h.If,{condition:this.props.numberOfSelectedRows>1},o.createElement(S.DropdownButton,{bsSize:"xsmall",title:"",id:"selectButton",pullRight:!0},this.getSelectionOptions())))),this.props.extraButtons&&this.props.extraButtons.map(function(e){return o.createElement("button",{className:"btn btn-default btn-xs",onClick:e.onClick,disabled:e.isDisabled()},e.content)}),this.props.showControlsAtTop&&o.createElement("input",{placeholder:"Search...",type:"text",onInput:this.onFilterTextChange(),ref:this.setInputRef,"data-test":"fixed-header-table-search-input",className:f()("form-control",u.a.tableSearchInput)}))}},{key:"render",value:function(){var e=this;return o.createElement("div",{className:u.a.studyViewTablesTable},!this.props.hideControls&&this.props.showControlsAtTop&&this.getControls(),o.createElement(p.Observer,null,function(){return o.createElement(a.c,{width:e.props.width,height:e.props.height,headerHeight:e.props.headerHeight,rowHeight:e.props.rowHeight,rowCount:e._store.dataStore.sortedFilteredData.length,rowGetter:e.rowGetter,rowClassName:e.rowClassName,headerClassName:u.a.headerColumn,sort:e.sort,sortDirection:N[e._sortDirection],sortBy:e._sortBy},e.props.columns.map(function(t,n){return o.createElement(a.a,{key:t.name,label:t.name,dataKey:t.name,width:Number(t.width),headerRenderer:e.columnHeaders[n],cellRenderer:function(e){return t.render(e.rowData)}})}))}),!this.props.hideControls&&!this.props.showControlsAtTop&&this.getControls())}},{key:"columnHeaders",get:function(){var e=this;return this.props.columns.map(function(t){return function(n){var r=[];t.headerRender?r.push(t.headerRender(t.name)):r.push(o.createElement("span",{key:t.name},t.name)),t.name===e._sortBy&&r.push(o.createElement("i",{className:f()(u.a.headerSortingIcon,"fa","desc"===e._sortDirection?"fa-sort-desc":"fa-sort-asc")}));var i=o.createElement("div",{style:{display:"flex"}},r);return t.tooltip?o.createElement(b.d,{placement:"top",overlay:t.tooltip},i):i}})}}]),t}();j.defaultProps={showControlsAtTop:!1,showAddRemoveAllButton:!1,autoFocusSearchAfterRendering:!1,width:398,height:350,headerHeight:25,rowHeight:25,showSelectableNumber:!1,sortBy:"",numberOfSelectedRows:0,hideControls:!1},R([s.observable],j.prototype,"_sortBy",void 0),R([s.observable],j.prototype,"_sortDirection",void 0),R([m.default],j.prototype,"rowClassName",null),R([m.default],j.prototype,"rowGetter",null),R([m.default],j.prototype,"getColumn",null),R([m.default,s.action],j.prototype,"sort",null),R([m.default,s.action],j.prototype,"onFilterTextChange",null),R([m.default,s.action],j.prototype,"afterSelectingRows",null),R([m.default,s.action],j.prototype,"changeSelectionType",null),R([m.default],j.prototype,"isSelectedRow",null),R([m.default],j.prototype,"onAddAll",null),R([m.default],j.prototype,"onRemoveAll",null),R([s.computed],j.prototype,"columnHeaders",null),R([m.default],j.prototype,"setInputRef",null),j=R([p.observer],j),t.a=j},816:function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(2),a=n(6),s=n(15),l=n(5),u=n.n(l),c=n(799),p=n.n(c),d=n(3),f=n(418);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var S=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":v(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},C=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},_=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=y(this,b(t).apply(this,arguments))).mousePosition={x:0,y:0},e.tooltipOpen=!1,e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,r["Component"]),n=t,(o=[{key:"onMouseOver",value:function(){this.tooltipOpen=!0}},{key:"onMouseOut",value:function(){this.tooltipOpen=!1}},{key:"onMouseMove",value:function(e){this.mousePosition.x=e.pageX,this.mousePosition.y=e.pageY}},{key:"render",value:function(){var e=this.props,t=(e.text,e.maxWidth,e.datum,e.suffix,e.tooltip,e.prefixTspans,e.alwaysShowTooltip,e.renderTruncatedText,e.transform),n=e.tooltipPlacement,o=e.textRef,i=C(e,["text","maxWidth","datum","suffix","tooltip","prefixTspans","alwaysShowTooltip","renderTruncatedText","transform","tooltipPlacement","textRef"]),a=void 0;return t&&void 0!==this.props.x&&void 0!==this.props.y&&(a=t(this.props.x,this.props.y)),r.createElement(r.Fragment,null,r.createElement("text",h({onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,onMouseMove:this.onMouseMove,ref:o,transform:a},i),this.props.prefixTspans,this.truncatedText),(this.textReport.isTruncated||this.props.alwaysShowTooltip)&&this.tooltipOpen&&r.createElement(f.a,{isOpened:!0,node:document.body},r.createElement(s.Popover,{arrowOffsetTop:17,className:u()("cbioportal-frontend","cbioTooltip",p.a.Tooltip),positionLeft:this.mousePosition.x+("left"===n?-8:8),positionTop:this.mousePosition.y-17,style:{transform:"left"===n?"translate(-100%,0%)":void 0},placement:n},this.tooltipElt)))}},{key:"tooltipElt",get:function(){return this.props.tooltip?this.props.tooltip(this.props.datum):r.createElement("span",null,this.props.text)}},{key:"fontFamily",get:function(){var e="Arial";return this.props.style&&this.props.style.fontFamily&&(e=this.props.style.fontFamily.split(", ")[0]),e}},{key:"fontSize",get:function(){var e="13px";return this.props.style&&this.props.style.fontSize&&(e=this.props.style.fontSize+"px"),e}},{key:"textReport",get:function(){return Object(d.eb)(this.props.text||"",this.props.maxWidth,this.fontFamily,this.fontSize)}},{key:"truncatedText",get:function(){return this.props.renderTruncatedText?this.props.renderTruncatedText(this.textReport.text):r.createElement("tspan",null,this.textReport.text)}}])&&m(n.prototype,o),i&&m(n,i),t}();_.defaultProps={maxWidth:100,suffix:"..."},S([i.observable],_.prototype,"mousePosition",void 0),S([i.observable],_.prototype,"tooltipOpen",void 0),S([i.computed],_.prototype,"tooltipElt",null),S([a.default,i.action],_.prototype,"onMouseOver",null),S([a.default,i.action],_.prototype,"onMouseOut",null),S([a.default],_.prototype,"onMouseMove",null),S([i.computed],_.prototype,"fontFamily",null),S([i.computed],_.prototype,"fontSize",null),S([i.computed],_.prototype,"textReport",null),S([i.computed],_.prototype,"truncatedText",null),_=S([o.observer],_),t.a=_},819:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.inputToKey=t,this.inputToOutput=n,this.memo={}}var t,n,o;return t=e,(n=[{key:"get",value:function(e){var t=this.inputToKey(e);return this.memo[t]=this.memo[t]||this.inputToOutput(e),this.memo[t]}},{key:"has",value:function(e){return this.inputToKey(e)in this.memo}}])&&r(t.prototype,n),o&&r(t,o),e}();function i(e){return JSON.stringify(e,Object.keys(e).sort())}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,n=new o(t,function(t){return function(n){return e(n,t)}});return function(e){return n.get(e)}}n.d(t,"a",function(){return a})},822:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__3xfuL",framedImage:"styles-module__framedImage__3MWaq",validationBubbleBase:"styles-module__validationBubbleBase__1bQNI",genesSelection:"styles-module__genesSelection__17BpH",GeneSymbolValidator:"styles-module__GeneSymbolValidator__1K2q1",validBubble:"styles-module__validBubble__2iAqd",invalidBubble:"styles-module__invalidBubble__3Hs4P",suggestionBubble:"styles-module__suggestionBubble__1TnzN",topRow:"styles-module__topRow__2F7H0",default:"styles-module__default__3ZAms",oncoprintHeatmap:"styles-module__oncoprintHeatmap__lvPrO",studyView:"styles-module__studyView__3TtjM",studyViewFocus:"styles-module__studyViewFocus__1CfEf",nowrap:"styles-module__nowrap__1GVDf",icon:"styles-module__icon__2RDD6",pendingMessage:"styles-module__pendingMessage__1gVAe",oqlNotice:"styles-module__oqlNotice__3naFJ",errorMessage:"styles-module__errorMessage__3pZ_v",noChoiceLabel:"styles-module__noChoiceLabel__2sdit",singleChoiceLabel:"styles-module__singleChoiceLabel__178JA",multiChoiceLabel:"styles-module__multiChoiceLabel__1PPmp"}},823:function(e,t,n){e.exports=n(25)(132)},824:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),o=n(3);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,l(t).apply(this,arguments))}var n,i,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["Component"]),n=t,(i=[{key:"render",value:function(){return r.createElement(o.d,{overlay:this.props.tooltip},r.createElement("i",{className:"fa fa-md fa-exclamation-triangle",style:Object.assign({},{color:"#BB1700",cursor:"pointer"},this.props.style||{})}))}}])&&a(n.prototype,i),c&&a(n,c),t}()},825:function(e,t,n){"use strict";var r=n(1),o=n.n(r);function i(e,t){for(var n,r=0,o=e.length;r<o;)switch(t(e[n=Math.floor((r+o)/2)],n)){case 1:o=n;break;case-1:r=n+1;break;case 0:return n}}var a=n(105),s=n.n(a),l=n(1070),u=n.n(l);function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",function(){return C});var p=u()(),d=(p.Vector,p.Matrix),f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.events=t,this.deathEvents=o.a.sortBy(t.filter(function(e){return e.status}),function(e){return e.months}),this.deathsByMonth=o.a.groupBy(this.deathEvents,function(e){return e.months}),this.censorEvents=o.a.sortBy(t.filter(function(e){return!e.status}),function(e){return e.months}),this.censorsByMonth=o.a.groupBy(this.censorEvents,function(e){return e.months})}var t,n,r;return t=e,(n=[{key:"getTotalEventsAtStartOf",value:function(e,t){return 0===e.length||t<=e[0].months?0:i(e,function(n,r){return n.months<t?r===e.length-1||e[r+1].months>=t?0:-1:1})+1}},{key:"getTotalDeathsAtStartOf",value:function(e){return this.getTotalEventsAtStartOf(this.deathEvents,e)}},{key:"getTotalCensorsAtStartOf",value:function(e){return this.getTotalEventsAtStartOf(this.censorEvents,e)}},{key:"getDeathsExactlyAt",value:function(e){return(this.deathsByMonth[e]||[]).length}},{key:"getCensorsExactlyAt",value:function(e){return(this.censorsByMonth[e]||[]).length}},{key:"getTotalAtRiskAtStartOf",value:function(e){return this.events.length-this.getTotalDeathsAtStartOf(e)-this.getTotalCensorsAtStartOf(e)}}])&&c(t.prototype,n),r&&c(t,r),e}(),h=o.a.map,m=o.a.sortBy,y=o.a.groupBy,b=o.a.reduce,g=o.a.last,v=o.a.filter;function S(e,t,n){var r,i,a,l,u,c,p,f,S,C,_,T=null,E=[],w=[],O=[];for(o.a.each(t,function(t,r){var i,a,s,l,u,c,p,d={tte:t,ev:n[r]},f=(i=e,a=d.ev,s=m(h(d.tte,function(e,t){return{tte:e,ev:a[t]}}),"tte"),l=o.a.uniq(h(s,"tte")),u=y(s,function(e){return e.tte}),c=b(l,function(e,t){var n=u[t],r=g(e)||{n:s.length,e:0},o=v(n,function(e){return e.ev});return e.push({n:r.n-r.e,e:n.length,d:o.length,t:n[0].tte}),e},[]),p=[],i=i.filter(function(e){return!!e.d}),{expected:b(i,function(e,t){var n=o.a.find(c,function(e){return e.t===t.t||e.t>t.t});if(n){var r=n.n*t.rate;return p.push(n),e+r}return e},0),observed:v(a,function(e){return 1===e}).length,dataByTimeTable:p,timeNumber:p.length});f.expected&&(E.push(f),w.push(f.observed-f.expected))}),i=E.length-1,a=0;a<E.length;a++)for(O.push([]),l=0;l<E.length;l++)O[a].push(0);for(a=0;a<E.length;a++)for(l=a;l<E.length;l++)for(u=0;u<e.length;u++)f=e[u].n,_=e[u].d,u<E[a].timeNumber&&u<E[l].timeNumber&&(S=E[a].dataByTimeTable[u].n,C=E[l].dataByTimeTable[u].n,a!==l&&1!==f?(O[a][l]-=_*S*C*(f-_)/(f*f*(f-1)),O[l][a]=O[a][l]):1!==f&&(O[a][a]+=_*S*(f-S)*(f-_)/(f*f*(f-1))));for(c=w.slice(0,w.length-1),p=O.slice(0,O.length-1),a=0;a<p.length;a++)p[a]=p[a].slice(0,p[a].length-1);var I=p.slice(0,p.length);for(a=0;a<p.length;a++)I[a]=p[a].slice(0,p[a].length);if(i>0){var k=new d([c]),P=new d([c]).trans(),A=new d(s.a.inv(I));r=k.dot(A).dot(P).data[0][0],T=1-s.a.chisquare.cdf(r,i)}return{dof:i,KM_stats:r,pValue:T}}function C(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=o.a.sortBy(o.a.flatten(t),function(e){return e.months}),i=new f(r),a=t.map(function(e){return o.a.sortBy(e,function(e){return e.months})}),s=a.map(function(e){return e.map(function(e){return e.months})}),l=a.map(function(e){return e.map(function(e){return+e.status})});return S(o.a.uniqBy(r,function(e){return e.months}).map(function(e){return{t:e.months,d:i.getDeathsExactlyAt(e.months),n:i.getTotalAtRiskAtStartOf(e.months),rate:i.getDeathsExactlyAt(e.months)/i.getTotalAtRiskAtStartOf(e.months)}}).filter(function(e){return e.d>0}),s,l).pValue}},826:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),o=n(3);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,l(t).apply(this,arguments))}var n,i,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["Component"]),n=t,(i=[{key:"render",value:function(){var e=r.createElement("svg",{width:"12",height:"12"},r.createElement("circle",{r:"5",cx:"6",cy:"6",stroke:this.props.stroke,fill:this.props.circleFill}),r.createElement("text",{x:"3",y:"8.5",fontSize:this.props.fontSize,fill:this.props.textFill},this.props.text.slice(0,1)));return this.props.tooltip&&(e=r.createElement(o.d,{placement:"right",overlay:this.props.tooltip,arrowContent:r.createElement("div",{className:"rc-tooltip-arrow-inner"})},e)),e}}])&&a(n.prototype,i),c&&a(n,c),t}();c.defaultProps={stroke:"#55C",circleFill:"none",fontSize:7,textFill:"#66C"}},828:function(e,t,n){},829:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(0),o=n(20),i=n(66);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p={marginTop:0},d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,u(t).apply(this,arguments))}var n,a,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){return r.createElement(o.If,{condition:this.props.isHidden},r.createElement(o.Else,null,r.createElement("h2",{style:this.props.style||p,className:this.props.className||""},this.props.title,r.createElement(i.a,{isLoading:this.props.isLoading,small:!0}))))}}])&&s(n.prototype,a),d&&s(n,d),t}()},832:function(e,t,n){"use strict";n.d(t,"b",function(){return d}),n.d(t,"a",function(){return f});var r=n(0),o=n(872),i=n.n(o);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return function(t,n,r){return n in t&&t[n]instanceof e?null:new Error("Expecting ".concat(r," to receive {").concat(JSON.stringify(n),": ").concat(e.name,"} from context"))}}function d(e){return i()({store:p(e)},function(e){return{store:e.store}})}function f(e){var t;return(t=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,u(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r["Component"]),n=t,(o=[{key:"store",get:function(){return this.context.store}}])&&s(n.prototype,o),i&&s(n,i),t}()).contextTypes={store:p(e)},t}},833:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"c",function(){return s}),n.d(t,"g",function(){return l}),n.d(t,"f",function(){return u}),n.d(t,"e",function(){return c}),n.d(t,"d",function(){return p}),n.d(t,"b",function(){return d});var r=n(1),o=n(12);function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var a="all";function s(){return{name:"CNA",type:"seg",displayMode:"FILL",features:[]}}function l(e){return r.keyBy(e||[],"name")}function u(e,t){var n=l(e),o=l(t),a=t.filter(function(e){return!r.isEqual(o[e.name],n[e.name])}).map(function(e){return e.name}),s=r.difference(e.map(function(e){return e.name}),t.map(function(e){return e.name}));return[].concat(i(a),i(s))}function c(e){var t=e.map(function(e){return[e.sampleId,e.chromosome,e.start,e.end,e.numberOfProbes,e.segmentMean]});return[["ID","chrom","loc.start","loc.end","num.mark","seg.mean"]].concat(i(t)).map(function(e){return e.join("\t")}).join("\n")}function p(e){return e.map(function(e){return{chr:Object(o.S)(e.chromosome),start:e.start,end:e.end,value:e.segmentMean,sample:e.sampleId,patient:e.patientId,study:e.studyId,numberOfProbes:e.numberOfProbes,sampleKey:e.uniqueSampleKey}})}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:600,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return Math.max(Math.min(t,r.uniq(e.map(function(e){return e.sampleKey})).length*o),n)}},842:function(e,t,n){"use strict";var r=n(1),o=n(2);function i(e,t){return t.toLowerCase().indexOf(e.toLowerCase())>-1}function a(e,t,n){n||(n=i);var r=!1,o=!1,a=!1,s=!0,l=!1,u=void 0;try{for(var c,p=e[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){if("not"!==c.value.type){o=!0;break}}}catch(e){l=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw u}}o||(r=!0);var d=!0,f=!1,h=void 0;try{for(var m,y=e[Symbol.iterator]();!(d=(m=y.next()).done);d=!0){var b=m.value;if("not"===b.type){if(n(b.data,t)){r=!1,a=!0;break}}else if("and"===b.type){o=!0;var g=!0,v=!0,S=!1,C=void 0;try{for(var _,T=b.data[Symbol.iterator]();!(v=(_=T.next()).done);v=!0){var E=_.value;g=g&&n(E,t)}}catch(e){S=!0,C=e}finally{try{v||null==T.return||T.return()}finally{if(S)throw C}}r=r||g}}}catch(e){f=!0,h=e}finally{try{d||null==y.return||y.return()}finally{if(f)throw h}}return{match:r,forced:a}}var s=n(38),l=n(8),u=n(152),c=n.n(u);function p(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",function(){return g}),n.d(t,"b",function(){return v});var b=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":y(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},g="pan_can_atlas",v=function(){function e(t){f(this,e),this.store=t}return m(e,[{key:"getMetadata",value:function(e){return this.store.treeData.map_node_meta.get(e)}},{key:"cancerTypeContainsSelectedStudies",value:function(e){var t=this.getMetadata(e).descendantStudies;return r.intersection(this.store.selectableSelectedStudies,t).length>0}},{key:"getDepth",value:function(e){return this.getMetadata(e).ancestors.length}},{key:"isHighlighted",value:function(e){return!!this.store.searchText&&!!this.map_node_filterBySearchText.get(e)}},{key:"map_node_filterByDepth",get:function(){var e=new Map,t=!0,n=!1,r=void 0;try{for(var o,i=this.store.treeData.map_node_meta.entries()[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=d(o.value,2),s=a[0],l=a[1],u=!0;l.isCancerType&&(!l.descendantStudies.length||l.ancestors.length>this.store.maxTreeDepth&&!s.alwaysVisible)&&(u=!1),e.set(s,u)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return e}},{key:"map_node_filterBySearchText",get:function(){var e=function(e){e=e.toLowerCase().trim().split(/\s+/g).join(" ");for(var t,n,r=[],o=0;o<e.length;)'"'===e[o]?-1===(n=e.indexOf('"',o+1))?(r.push(e.substring(o+1)),o=e.length):(r.push(e.substring(o+1,n)),o=n+1):" "===e[o]?o+=1:"-"===e[o]?(r.push("-"),o+=1):-1===(t=e.indexOf(" ",o))?(r.push(e.substring(o)),o=e.length):(r.push(e.substring(o,t)),o=t+1);var i,a,s=[];for(o=0;o<r.length;)"-"===r[o]?(o<r.length-1&&s.push({type:"not",data:r[o+1]}),o+=2):(i=r.indexOf("or",o),a=r.indexOf("-",o),-1===i&&-1===a?(s.push({type:"and",data:r.slice(o)}),o=r.length):-1===i&&a>0?(s.push({type:"and",data:r.slice(o,a)}),o=a):i>0&&-1===a?(s.push({type:"and",data:r.slice(o,i)}),o=i+1):i<a?(s.push({type:"and",data:r.slice(o,i)}),o=i+1):(s.push({type:"and",data:r.slice(o,a)}),o=a));return s}(this.store.searchText),t=new Map,n=!0,r=!1,o=void 0;try{for(var i,s=this.store.treeData.map_node_meta.entries()[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var l=d(i.value,2),u=l[0],c=(S=l[1]).searchTerms;u.hasOwnProperty("studyId")&&(c+=u.studyId?u.studyId:""),t.set(u,a(e,c))}}catch(e){r=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}var f=new Map,h=!0,m=!1,y=void 0;try{for(var b,g=this.store.treeData.map_node_meta.entries()[Symbol.iterator]();!(h=(b=g.next()).done);h=!0){var v=d(b.value,2),S=(u=v[0],v[1]);if(!f.has(u)){for(var C=!1,_=0,T=[u].concat(p(S.ancestors),p(S.priorityCategories));_<T.length;_++){var E=T[_],w=t.get(E);if(!w.match&&w.forced){C=!1;break}C=C||w.match}if(f.set(u,C),C&&!S.isCancerType)for(var O=0,I=[S.ancestors,S.priorityCategories];O<I.length;O++){var k=I[O],P=!0,A=!1,R=void 0;try{for(var N,D=k[Symbol.iterator]();!(P=(N=D.next()).done);P=!0){var j=N.value;f.set(j,!0)}}catch(e){A=!0,R=e}finally{try{P||null==D.return||D.return()}finally{if(A)throw R}}}}}}catch(e){m=!0,y=e}finally{try{h||null==g.return||g.return()}finally{if(m)throw y}}return f}},{key:"map_node_filterBySelectedCancerTypes",get:function(){var e=new Map;if(this.store.selectedCancerTypes.length){var t=!0,n=!1,r=void 0;try{for(var o,i=this.store.selectedCancerTypes[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value,s=this.getMetadata(a);e.set(a,!0);for(var l=0,u=[s.ancestors,s.descendantCancerTypes,s.descendantStudies];l<u.length;l++){var c=u[l],p=!0,d=!1,f=void 0;try{for(var h,m=c[Symbol.iterator]();!(p=(h=m.next()).done);p=!0){var y=h.value;e.set(y,!0)}}catch(e){d=!0,f=e}finally{try{p||null==m.return||m.return()}finally{if(d)throw f}}}}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}else{var b=!0,g=!1,v=void 0;try{for(var S,C=this.store.treeData.map_node_meta.keys()[Symbol.iterator]();!(b=(S=C.next()).done);b=!0){var _=S.value;e.set(_,!0)}}catch(e){g=!0,v=e}finally{try{b||null==C.return||C.return()}finally{if(g)throw v}}}return e}},{key:"map_node_filterBySelectedStudies",get:function(){var e=new Map;if(this.store.selectableSelectedStudies.length){var t=!0,n=!1,r=void 0;try{for(var o,i=this.store.selectableSelectedStudies[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value,s=this.store.treeData.map_node_meta.get(a);e.set(a,!0);for(var l=0,u=[s.descendantStudies,s.ancestors,s.priorityCategories];l<u.length;l++){var c=u[l],p=!0,d=!1,f=void 0;try{for(var h,m=c[Symbol.iterator]();!(p=(h=m.next()).done);p=!0){var y=h.value;e.set(y,!0)}}catch(e){d=!0,f=e}finally{try{p||null==m.return||m.return()}finally{if(d)throw f}}}}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}return e}},{key:"mainView",get:function(){return new S(this.store,[this.map_node_filterByDepth,this.map_node_filterBySearchText,this.map_node_filterBySelectedCancerTypes])}},{key:"cancerTypeListView",get:function(){return new S(this.store,[this.map_node_filterByDepth,this.map_node_filterBySearchText])}},{key:"selectedStudiesView",get:function(){var e=this;return new S(this.store,[this.map_node_filterByDepth,this.map_node_filterBySelectedStudies,{get:function(t){return!e.getMetadata(t).isPriorityCategory}}])}}]),e}();b([s.cached],v.prototype,"map_node_filterByDepth",null),b([s.cached],v.prototype,"map_node_filterBySearchText",null),b([s.cached],v.prototype,"map_node_filterBySelectedCancerTypes",null),b([s.cached],v.prototype,"map_node_filterBySelectedStudies",null),b([o.computed],v.prototype,"mainView",null),b([o.computed],v.prototype,"cancerTypeListView",null),b([o.computed],v.prototype,"selectedStudiesView",null);var S=function(){function e(t,n){var r=this;f(this,e),this.store=t,this.filters=n,this.nodeFilter=function(e){return r.filters.every(function(t){return!!t.get(e)})}}return m(e,[{key:"getMetadata",value:function(e){return this.store.treeData.map_node_meta.get(e)}},{key:"getChildCancerTypes",value:function(e,t){var n=this.getMetadata(e);return(n.ancestors.length<this.store.maxTreeDepth||!t&&e.alwaysVisible?n.childCancerTypes:[]).filter(this.nodeFilter)}},{key:"getChildCancerStudies",value:function(e){var t=this.getMetadata(e),n=[];if(t.ancestors.length<this.store.maxTreeDepth)n=t.childStudies;else if(n=t.descendantStudies,e.alwaysVisible){var o=r.chain(t.descendantCancerTypes).filter(function(e){return e.alwaysVisible}).map(function(e){return e.cancerTypeId}).value();n=r.filter(n,function(e){return!o.includes(e.cancerTypeId)})}return n.filter(this.nodeFilter)}},{key:"getDescendantCancerStudies",value:function(e){return this.getMetadata(e).descendantStudies.filter(this.nodeFilter)}},{key:"getCheckboxProps",value:function(e){var t=this;if(this.getMetadata(e).isCancerType){var n=(this.store.selectableSelectedStudyIds||[]).map(function(e){return t.store.treeData.map_studyId_cancerStudy.get(e)}),o=this.getDescendantCancerStudies(e),i=r.intersection(o,n),a=i.length>0;return{checked:a,indeterminate:a&&i.length!=o.length}}var s=e;return{checked:!!this.store.selectableSelectedStudyIds.find(function(e){return e==s.studyId}),disabled:this.store.isDeletedVirtualStudy(s.studyId)}}},{key:"isCheckBoxDisabled",value:function(e){if(this.getMetadata(e).isCancerType)return!1;var t=e;return!!this.store.isDeletedVirtualStudy(t.studyId)}},{key:"clearAllSelection",value:function(){this.store.selectableSelectedStudyIds=[]}},{key:"onCheck",value:function(e,t){var n;this.getMetadata(e).isCancerType?this.store.forDownloadTab||(n=this.getDescendantCancerStudies(e).map(function(e){return e.studyId})):n=[e.studyId],n&&this.handleCheckboxStudyIds(n,t)}},{key:"getSelectionReport",value:function(){var e=this,t=this.store.selectableSelectedStudyIds||[],n=t.map(function(t){return e.store.treeData.map_studyId_cancerStudy.get(t)}),o=this.getDescendantCancerStudies(this.store.treeData.rootCancerType);return{selectableSelectedStudyIds:t,selectableSelectedStudies:n,shownStudies:o,shownAndSelectedStudies:r.intersection(o,n)}}},{key:"quickSelectButtons",value:function(e){if(!e)return{};try{return l.a.parseConfigFormat(e)}catch(e){return{}}}},{key:"toggleAllFiltered",value:function(){var e=this,t=this.getSelectionReport(),n=(t.selectableSelectedStudyIds,t.selectableSelectedStudies,t.shownStudies),o=t.shownAndSelectedStudies,i=[];i=n.length===o.length?r.without.apply(r,[this.store.selectableSelectedStudyIds].concat(p(n.map(function(e){return e.studyId})))):r.union(this.store.selectableSelectedStudyIds,n.map(function(e){return e.studyId})),this.store.selectableSelectedStudyIds=i.filter(function(t){return!r.includes(e.store.deletedVirtualStudies,t)})}},{key:"selectAllMatchingStudies",value:function(e){var t=this.getSelectionReport(),n=(t.selectableSelectedStudyIds,t.selectableSelectedStudies,t.shownStudies);t.shownAndSelectedStudies;this.store.selectableSelectedStudyIds=n.map(function(e){return e.studyId}).filter(function(t){return r.isArray(e)?e.includes(t):t.includes(e)})}},{key:"handleCheckboxStudyIds",value:function(e,t){var n=this,o=this.store.selectableSelectedStudyIds;o=t?r.union(o,e):r.difference(o,e),this.store.selectableSelectedStudyIds=o.filter(function(e){return!r.includes(n.store.deletedVirtualStudies,e)})}},{key:"isFiltered",get:function(){return this.store.selectedCancerTypeIds.length>0||this.store.searchText.length>0}}]),e}();b([o.action],S.prototype,"clearAllSelection",null),b([o.action],S.prototype,"onCheck",null),b([o.computed],S.prototype,"isFiltered",null),b([c.a],S.prototype,"quickSelectButtons",null),b([o.action],S.prototype,"toggleAllFiltered",null),b([o.action],S.prototype,"selectAllMatchingStudies",null)},844:function(e,t,n){"use strict";var r=n(0),o=n(15),i=n(9),a=n(66),s=n(6);function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":d(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,c(t).apply(this,arguments))}var n,i,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,r["Component"]),n=t,(i=[{key:"handleClose",value:function(){this.props.onHide()}},{key:"render",value:function(){return r.createElement(o.Modal,{show:this.props.show,onHide:this.handleClose,keyboard:!0,className:this.props.className},r.createElement(o.Modal.Header,{closeButton:!0},r.createElement(o.Modal.Title,{"data-test":"gene-panel-modal-title"},this.props.panelName)),r.createElement(o.Modal.Body,{style:{maxHeight:"calc(100vh - 210px)",overflowY:"auto"}},this.props.show&&this.props.isLoading&&r.createElement(a.a,{isLoading:!0}),this.props.show&&!this.props.isLoading&&r.createElement("div",{"data-test":"gene-panel-modal-body"},this.props.children)),r.createElement(o.Modal.Footer,null,r.createElement(o.Button,{"data-test":"modal-button",onClick:this.handleClose},"Close")))}}])&&l(n.prototype,i),s&&l(n,s),t}();f([s.default],h.prototype,"handleClose",null),h=f([i.observer],h),t.a=h},846:function(e,t,n){"use strict";function r(e){setTimeout(function(){window.requestAnimationFrame(e)},0)}n.d(t,"a",function(){return r})},847:function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(973),a=n.n(i),s=n(5),l=n.n(s),u=n(2),c=n(1),p=n.n(c),d=n(289),f=n(272),h=n.n(f),m=n(12),y=n(6);function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var T=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":_(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};function E(e){return e.promises?0===e.promises.length?"complete":m.H.apply(void 0,C(e.promises)):"pending"}var w=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=g(this,v(t).apply(this,arguments))).timeShown=0,e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentWillMount",value:function(){var e=this;this.timeShownInterval=setInterval(function(){e.props.show?e.timeShown+=1:e.timeShown>0&&(e.timeShown=0)},1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timeShownInterval)}},{key:"makeItem",value:function(e,t){var n,o,i,s=null,u=this.props.sequential&&t>this.firstIncompleteIndex;if(!u&&!e.hideIcon)switch(E(e)){case"complete":s=r.createElement("i",{className:l()("fa fa-sm fa-check",a.a["fa-check"])});break;case"pending":s=r.createElement(h.a,{name:"double-bounce",fadeIn:!1,className:a.a["pulse-spinner"]});break;case"error":s=r.createElement("i",{className:l()("fa fa-sm fa-exclamation-triangle",a.a["fa-exclamation-triangle"])})}return r.createElement("span",{className:l()(a.a["item-row"],(n={},o=a.a["not-invoked-item"],i=u,o in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i,n)),style:e.style},e.label,r.createElement("span",{style:{marginLeft:7}},s))}},{key:"render",value:function(){return this.props.show?r.createElement("div",{className:a.a.container},r.createElement("div",{className:a.a["items-container"]},this.items.map(this.makeItem)),p.a.some(this.items,function(e){return"error"===E(e)})&&r.createElement(d.a,null)):null}},{key:"items",get:function(){return this.props.getItems(this.timeShown)}},{key:"firstIncompleteIndex",get:function(){return this.items.findIndex(function(e){return"complete"!==E(e)})}}])&&b(n.prototype,o),i&&b(n,i),t}();T([u.observable],w.prototype,"timeShown",void 0),T([u.computed],w.prototype,"items",null),T([u.computed],w.prototype,"firstIncompleteIndex",null),T([y.default],w.prototype,"makeItem",null),w=T([o.observer],w),t.a=w},848:function(e,t,n){e.exports=n(25)(166)},849:function(e,t,n){e.exports=n(25)(101)},850:function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"b",function(){return f});var r=n(0),o=n(9),i=n(844);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},d=function(e){var t=e.genePanelIds,n=e.toggleModal;return t.length>0?r.createElement("span",{style:{maxWidth:400}},"Gene panels:"," ",t.map(function(e,t){return[t>0&&", ",r.createElement("a",{key:e,"data-test":"gene-panel-linkout-".concat(e),href:"#",onClick:function(){n(e)}},e)]})):r.createElement("span",null)},f=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=s(this,l(t).apply(this,arguments))).getGenesList=function(e){return e&&e.genes?e.genes.map(function(e){return r.createElement("p",{key:e.entrezGeneId},e.hugoGeneSymbol)}):null},e}var n,o,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=this.props.genePanelCache.get({genePanelId:this.props.panelName});return r.createElement(i.a,{panelName:this.props.panelName,show:this.props.show,onHide:this.props.onHide,isLoading:e.isPending},e.isComplete&&this.getGenesList(e.result))}}])&&a(n.prototype,o),c&&a(n,c),t}();f=p([o.observer],f)},857:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),o=n(826);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,l(t).apply(this,arguments))}var n,i,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["Component"]),n=t,(i=[{key:"render",value:function(){var e=this;return r.createElement("span",{style:{cursor:"default"}},r.createElement(o.a,{text:"M",tooltip:function(){return e.getToolTip(e.props.qValue)}}))}},{key:"getToolTip",value:function(e){return r.createElement("div",null,"Candidate driver gene, as determined by the ",r.createElement("b",null,"MutSig"),r.createElement("br",null),"algorithm.",r.createElement("p",null),"MutSig identifies likely driver genes by evaluating the",r.createElement("br",null),"frequency of observed mutations within the entire study.",r.createElement("p",null),"Note that not all mutations in this gene are necessarily",r.createElement("br",null),"functional/driver events.",r.createElement("p",null),r.createElement("span",null," Q-value: ",(e||0).toExponential(3)))}}])&&a(n.prototype,i),c&&a(n,c),t}()},870:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return i});var r=/.+\.(.+)/;function o(e){var t=new URL(e).pathname;if(t){var n=t.match(r);if(n)return n[1].toLowerCase()}}function i(e){return"https://docs.google.com/viewerng/viewer?url=".concat(e,"?pid=explorer&efh=false&a=v&chrome=false&embedded=true")}},885:function(e,t,n){"use strict";var r=n(0),o=n(2),i=n(9),a=n(886),s=n.n(a),l=n(1),u=n(172),c=n(30),p=n(66),d=n(813),f=n(6),h=n(5),m=n.n(h),y=n(3),b=n(50);function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var w=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":E(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},O=function(e){function t(){return v(this,t),S(this,C(t).apply(this,arguments))}return _(t,d["a"]),t}(),I=function(e){function t(){var e;return v(this,t),(e=S(this,C(t).apply(this,arguments)))._columns=[{name:e.props.firstColumnHeaderName,render:function(t){return r.createElement(i.Observer,null,function(){return r.createElement("div",{className:m()(s.a.option,"add-chart-option"),"data-test":"add-chart-option-".concat(t.label.toLowerCase().replace(/\s/g,"-"))},r.createElement(u.a,{checked:t.selected,disabled:t.disabled,labelProps:{className:m()(s.a.label,t.disabled?s.a.labelDisabled:"")},inputProps:{className:s.a.input},onChange:function(){return e.onOptionChange(t)}},r.createElement(y.g,{text:t.label})))})},filter:function(e,t,n){return e.label.toUpperCase().includes(n)},sortBy:function(e){return e.label},width:320,defaultSortDirection:"asc"},{name:"Freq",tooltip:r.createElement("span",null,Object(b.a)(e.props.frequencyHeaderTooltip,"% samples with data")),render:function(t){return r.createElement("span",{style:{display:"flex",flexDirection:"row-reverse"},className:m()(t.disabled?s.a.labelDisabled:"")},e.props.freqPromise.isComplete?Object(c.O)(t.freq):"")},sortBy:function(e){return e.freq},headerRender:function(){return r.createElement("span",{style:{display:"flex",flexDirection:"row-reverse",flexGrow:1}},"Freq")},defaultSortDirection:"desc",width:60}],e}var n,o,a;return _(t,r["Component"]),n=t,(o=[{key:"getCurrentSelectedRows",value:function(){return this.options.filter(function(e){return e.selected})}},{key:"getCurrentSelectedRowKeys",value:function(){return this.getCurrentSelectedRows().map(function(e){return e.key})}},{key:"addAll",value:function(e){this.props.onAddAll(l.filter(e,function(e){return!e.disabled}).map(function(e){return e.key}))}},{key:"removeAll",value:function(e){this.props.onClearAll(e.map(function(e){return e.key}))}},{key:"onOptionChange",value:function(e){this.props.onToggleOption(e.key)}},{key:"render",value:function(){return r.createElement("div",{style:{display:"flex",flexDirection:"column"},"data-test":"add-by-type"},this.props.freqPromise.isComplete&&r.createElement(O,{width:380,height:this.tableHeight,columns:this._columns,data:this.options,showControlsAtTop:!0,addAll:this.addAll,removeAll:this.removeAll,showSelectableNumber:!0,showAddRemoveAllButton:!0,autoFocusSearchAfterRendering:!0,numberOfSelectedRows:this.getCurrentSelectedRows().length,hideControls:this.props.hideControls}),this.props.freqPromise.isPending&&r.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:100}},r.createElement(p.a,{isLoading:!0}),r.createElement("br",null),"Calculating data availability..."))}},{key:"options",get:function(){var e=this;if(this.props.freqPromise.isComplete){var t=l.reduce(this.props.options,function(t,n){var r=0===e.props.freqPromise.result[n.key];return t.push({label:n.label,key:n.key,disabled:r,selected:n.selected,freq:r?0:e.props.freqPromise.result[n.key]}),t},[]);return this.props.optionsGivenInSortedOrder?t:t.sort(function(e,t){return t.freq-e.freq||e.label.localeCompare(t.label)})}var n=this.props.options.map(function(e){return Object.assign({freq:100},e)});return this.props.optionsGivenInSortedOrder?n:n.sort(function(e,t){return e.label.localeCompare(t.label)})}},{key:"tableHeight",get:function(){return this.options.length>15?375:25*(this.options.length+1)}}])&&g(n.prototype,o),a&&g(n,a),t}();I.defaultProps={firstColumnHeaderName:"Name",hideControls:!1},w([o.computed],I.prototype,"options",null),w([o.computed],I.prototype,"tableHeight",null),w([f.default],I.prototype,"getCurrentSelectedRows",null),w([f.default],I.prototype,"getCurrentSelectedRowKeys",null),w([f.default,o.action],I.prototype,"addAll",null),w([f.default,o.action],I.prototype,"removeAll",null),w([f.default,o.action],I.prototype,"onOptionChange",null),I=w([i.observer],I),t.a=I},886:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__1Knza",framedImage:"styles-module__framedImage__p1p-k",main:"styles-module__main__2V5AI",operations:"styles-module__operations__2tHBt",options:"styles-module__options__2V0tE",option:"styles-module__option__dhLVt",footer:"styles-module__footer__8u68Z",input:"styles-module__input__2Zk8R",label:"styles-module__label__YKqSs",labelDisabled:"styles-module__labelDisabled__3jDaR"}},887:function(e,t,n){e.exports=n(25)(452)},888:function(e,t,n){e.exports=n(25)(835)},889:function(e,t,n){e.exports=n(25)(358)},890:function(e,t,n){e.exports=n(25)(824)},891:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0ZWQgYnkgSWNvTW9vbi5pbyAtLT4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIxNCIgaGVpZ2h0PSIxNCI+CiAgPCEtLU5vIGxldmVsIGljb25zLS0+CiAgICAgIDxnICB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3LCA3KSI+CiAgICAgICAgPGNpcmNsZSByPSI2IiBmaWxsPSJub25lIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZT0iIzAwN0ZGRiI+PC9jaXJjbGU+CiAgICAgICAgPGNpcmNsZSByPSIzIiBmaWxsPSJub25lIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZT0iIzAwN0ZGRiI+PC9jaXJjbGU+CiAgICAgICAgPGNpcmNsZSByPSIxLjUiIGZpbGw9IiMwMDdGRkYiIHN0cm9rZT0ibm9uZSI+PC9jaXJjbGU+CiAgICAgIDwvZz4KPC9zdmc+"},908:function(e,t,n){"use strict";var r=n(0),o=n(9);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,s(t).apply(this,arguments))}var n,o,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement("div",{className:"checkbox",style:Object.assign({display:"flex",alignItems:"center"},this.props.style)},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:this.props.value,checked:this.props.checked,onClick:this.props.onClick,style:{marginTop:1}})),"function"==typeof this.props.label?this.props.label():this.props.label)}}])&&i(n.prototype,o),u&&i(n,u),t}();p=c([o.observer],p),t.a=p},915:function(e,t,n){"use strict";n.d(t,"a",function(){return N});var r=n(0),o=n(9),i=n(2),a=n(296),s=n.n(a),l=n(15),u=n(799),c=n.n(u),p=(n(916),n(807)),d=n(1),f=n(14),h=n(93),m=n(54),y=n(18),b=n(3),g=n(6),v=n(30),S=n(5),C=n.n(S),_=n(816),T=n(825),E=n(8);function w(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var N,D=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":R(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},j=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};!function(e){e.TOOLTIP="tooltip",e.CHART="chart"}(N||(N={}));var x=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=k(t).call(this,e),(n=!o||"object"!==R(o)&&"function"!=typeof o?P(r):o).highlightedCurve="",n.sliderValue=n.getInitialSliderValue(),n.isTooltipHovered=!1,n.tooltipCounter=0,n.styleOptsDefaultProps={width:900,height:500,padding:{top:20,bottom:50,left:60,right:20},tooltipXOffset:20,tooltipYOffset:-47,axis:{x:{axisLabel:{padding:35},grid:{opacity:0}},y:{axisLabel:{padding:45,fill:"black"},grid:{opacity:0}}},pValue:{x:610,y:30,textAnchor:"start"},legend:{x:600,y:50}},n.events=[{target:"data",eventHandlers:{onMouseOver:function(){return[{target:"data",mutation:function(e){return n.tooltipModel=e,n.tooltipCounter++,{active:!0}}}]},onMouseOut:function(){return[{target:"data",mutation:function(){return j(P(n),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.a)(100);case 2:return this.isTooltipHovered||1!==this.tooltipCounter||(this.tooltipModel=null),this.tooltipCounter--,e.abrupt("return",{active:!1});case 5:case"end":return e.stop()}},e,this)}))}}]}}}],n.tooltipMouseEnter=n.tooltipMouseEnter.bind(P(n)),n.tooltipMouseLeave=n.tooltipMouseLeave.bind(P(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,r["Component"]),n=t,(o=[{key:"getInitialSliderValue",value:function(){return E.b.serverConfig.survival_initial_x_axis_limit?Math.min(E.b.serverConfig.survival_initial_x_axis_limit,this.maximumDataMonthValue):this.maximumDataMonthValue}},{key:"toSVGDOMNode",value:function(){return Object(v.tb)(this.svgContainer.firstChild,{legendGroupSelector:".survivalChartDownloadLegend",selectorToHide:".survivalChartLegendHideForDownload"})}},{key:"tooltipMouseEnter",value:function(){this.isTooltipHovered=!0}},{key:"tooltipMouseLeave",value:function(){this.isTooltipHovered=!1,this.tooltipModel=null}},{key:"getSvg",value:function(){return this.toSVGDOMNode()}},{key:"getData",value:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var o,i=this.analysisGroupsWithData[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;e.push({scatterData:Object(h.i)(this.props.sortedGroupedSurvivals[a.value],this.estimates[a.value],a.value),title:void 0!==a.name?a.name:a.value})}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return Object(h.e)(e,this.props.title)}},{key:"hoverCircleFillOpacity",value:function(e,t){return t||this.isTooltipHovered&&this.tooltipModel&&this.tooltipModel.datum.studyId===e.studyId&&this.tooltipModel.datum.patientId===e.patientId?.3:0}},{key:"getAxisTickCount",value:function(e){return 5*Math.ceil(e/200)}},{key:"onSliderChange",value:function(e){this.sliderValue=e}},{key:"onSliderTextChange",value:function(e){this.sliderValue=Number.parseFloat(e)}},{key:"render",value:function(){return 0===d.flatten(d.values(this.props.sortedGroupedSurvivals)).length?r.createElement("div",{className:"alert alert-info"},"No data to plot."):r.createElement("div",{style:{position:"relative"}},this.props.legendLocation===N.TOOLTIP?r.createElement(b.d,{mouseLeaveDelay:.2,placement:"rightBottom",overlay:this.chartTooltip},this.chart):this.chart,this.tooltipModel&&r.createElement(l.Popover,O({arrowOffsetTop:56,className:C()("cbioportal-frontend","cbioTooltip",c.a.Tooltip),positionLeft:this.tooltipModel.x+this.styleOpts.tooltipXOffset},{container:this},{positionTop:this.tooltipModel.y+this.styleOpts.tooltipYOffset,onMouseEnter:this.tooltipMouseEnter,onMouseLeave:this.tooltipMouseLeave}),r.createElement("div",null,"Patient ID:"," ",r.createElement("a",{href:Object(y.w)(this.tooltipModel.datum.studyId,this.tooltipModel.datum.patientId),target:"_blank"},this.tooltipModel.datum.patientId),r.createElement("br",null),!!this.props.showCurveInTooltip&&["Curve: ".concat(this.tooltipModel.datum.group),r.createElement("br",null)],this.props.yLabelTooltip,":"," ",this.tooltipModel.datum.y.toFixed(2),"%",r.createElement("br",null),this.tooltipModel.datum.status?this.props.xLabelWithEventTooltip:this.props.xLabelWithoutEventTooltip,": ",this.tooltipModel.datum.x.toFixed(2)," months"," ",this.tooltipModel.datum.status?"":"(censored)",r.createElement("br",null),this.props.analysisClinicalAttribute&&r.createElement("span",null,this.props.analysisClinicalAttribute.displayName,":"," ",this.props.patientToAnalysisGroups[this.tooltipModel.datum.uniquePatientKey]))),this.props.showTable&&r.createElement("table",{className:"table table-striped",style:{marginTop:20,width:"100%"}},r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",null),r.createElement("td",null,this.props.totalCasesHeader),r.createElement("td",null,this.props.statusCasesHeader),r.createElement("td",null,this.props.medianMonthsHeader)),this.tableRows)))}},{key:"styleOpts",get:function(){var e=d.merge({},this.styleOptsDefaultProps,this.props.styleOpts);return e.padding.right=this.props.legendLocation===N.CHART?300:e.padding.right,this.props.styleOpts&&this.props.styleOpts.legend&&void 0!==this.props.styleOpts.legend.x||(e.legend.x=e.width-e.padding.right),e}},{key:"downSamplingDenominators",get:function(){return{x:this.styleOpts.width-this.styleOpts.padding.left-this.styleOpts.padding.right,y:this.styleOpts.height-this.styleOpts.padding.top-this.styleOpts.padding.bottom}}},{key:"estimates",get:function(){return d.mapValues(this.props.sortedGroupedSurvivals,function(e){return Object(h.f)(e)})}},{key:"unfilteredScatterData",get:function(){var e=this;return d.mapValues(this.props.sortedGroupedSurvivals,function(t,n){var r=e.estimates[n],o=e.analysisGroupsMap[n].name;return{numOfCases:t.length,line:Object(h.g)(t,r),scatterWithOpacity:Object(h.j)(t,r,o),scatter:Object(h.i)(t,r,o)}})}},{key:"scatterData",get:function(){return Object(h.b)(this.unfilteredScatterData,this.scatterFilter,{xDenominator:this.downSamplingDenominators.x,yDenominator:this.downSamplingDenominators.y,threshold:1e3})}},{key:"analysisGroupsMap",get:function(){return d.keyBy(this.props.analysisGroups,function(e){return e.value})}},{key:"logRankTestPVal",get:function(){var e=this;return this.analysisGroupsWithData.length>1?T.a.apply(void 0,w(this.analysisGroupsWithData.map(function(t){return e.props.sortedGroupedSurvivals[t.value]}))):null}},{key:"victoryLegendData",get:function(){var e=[];if(this.props.legendLocation===N.CHART){var t=!0,n=!1,r=void 0;try{for(var o,i=this.analysisGroupsWithData[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;e.push({name:a.legendText||a.name||a.value,symbol:{fill:a.color,strokeOpacity:0,type:"square",size:6}})}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}return e}},{key:"pValueText",get:function(){return null!==this.props.pValue&&void 0!==this.props.pValue?r.createElement(f.VictoryLabel,{x:this.styleOpts.pValue.x,y:this.styleOpts.pValue.y,style:b.w,textAnchor:this.styleOpts.pValue.textAnchor,text:"Logrank Test P-Value: ".concat(Object(m.b)(this.props.pValue,3,.01))}):null}},{key:"legendDataForDownload",get:function(){var e=this.analysisGroupsWithData.map(function(e){return{name:e.name?e.name:e.value,symbol:{fill:e.color,strokeOpacity:0,type:"square",size:6}}});return this.props.naPatientsHiddenInSurvival&&e.push({name:"* Patients with NA for any of the selected attributes are excluded",symbol:{opacity:0}}),e}},{key:"analysisGroupsWithData",get:function(){var e=this,t=this.props.analysisGroups;return t=t.filter(function(t){return t.value in e.scatterData&&e.scatterData[t.value].numOfCases>0})}},{key:"scattersAndLines",get:function(){var e=this,t=this.analysisGroupsWithData,n=(t=d.sortBy(t,function(t){return e.highlightedCurve===t.value?1:0})).map(function(t){return r.createElement(f.VictoryLine,{key:t.value,interpolation:"stepAfter",data:e.scatterData[t.value].line,style:{data:{stroke:t.color,strokeWidth:e.highlightedCurve===t.value?4:1,fill:"#000000",fillOpacity:0}}})}),o=t.map(function(t){return r.createElement(f.VictoryScatter,{key:t.value,data:e.scatterData[t.value].scatterWithOpacity,symbol:"plus",style:{data:{fill:t.color,opacity:function(e){return e.opacity}}},size:3})}),i=t.map(function(t){return r.createElement(f.VictoryScatter,{key:t.value,data:e.scatterData[t.value].scatter,symbol:"circle",style:{data:{fill:t.color,fillOpacity:e.hoverCircleFillOpacity}},size:10,events:e.events})});return n.concat(o).concat(i)}},{key:"legendForDownload",get:function(){var e=d.cloneDeep(b.a);return e.legend.style.data={type:"square",size:5,strokeWidth:0,stroke:"black"},r.createElement(f.VictoryLegend,{x:0,y:this.styleOpts.height+1,style:Object.assign(Object.assign({},e.legend.style),{title:{fontWeight:"bold"}}),title:this.props.title,rowGutter:-10,data:this.legendDataForDownload,groupComponent:r.createElement("g",{className:"survivalChartDownloadLegend"})})}},{key:"xAxisTickCount",get:function(){return this.props.xAxisTickCount||this.getAxisTickCount(this.showLegend?this.styleOpts.legend.x:this.styleOpts.width)}},{key:"showLegend",get:function(){return this.victoryLegendData.length>0}},{key:"maximumDataMonthValue",get:function(){return d.chain(this.props.sortedGroupedSurvivals).map(function(e){return e[e.length-1].months}).max().ceil().value()}},{key:"chart",get:function(){var e=this;return r.createElement("div",{className:this.props.className,"data-test":"SurvivalChart"},this.props.showDownloadButtons&&r.createElement(b.e,{dontFade:!0,filename:this.props.fileName,buttons:["SVG","PNG","PDF","Data"],getSvg:this.getSvg,getData:this.getData,style:{position:"absolute",zIndex:10,right:10},type:"button"}),this.props.showSlider&&r.createElement("div",{className:"small",style:{display:"flex",alignItems:"center",marginLeft:60}},r.createElement("span",null,"X-Axis Max:"),r.createElement("div",{className:"RangeSliderContainer",style:{width:300,marginLeft:10,marginRight:10}},r.createElement(s.a,{min:0,max:this.maximumDataMonthValue,value:this.sliderValue,onChange:this.onSliderChange,tooltip:!1,step:1})),r.createElement(b.f,{className:c.a.XmaxNumberInput,value:this.sliderValue.toString(),setValue:this.onSliderTextChange,numericOnly:!0}),r.createElement("span",null,Object(b.S)("Month",this.sliderValue)," Survival")),r.createElement(f.VictoryChart,{containerComponent:r.createElement(f.VictoryZoomContainer,{responsive:!1,disable:!0,zoomDomain:this.props.showSlider?{x:[0,this.sliderValue]}:void 0,onZoomDomainChange:d.debounce(function(t){e.scatterFilter=t},1e3),containerRef:function(t){return e.svgContainer=t}}),height:this.styleOpts.height,width:this.styleOpts.width,padding:this.styleOpts.padding,theme:b.a,domainPadding:{x:[10,50],y:[20,20]}},r.createElement(f.VictoryAxis,{style:this.styleOpts.axis.x,crossAxis:!1,tickCount:this.xAxisTickCount,label:this.props.xAxisLabel}),r.createElement(f.VictoryAxis,{label:this.props.yAxisLabel,dependentAxis:!0,tickFormat:function(e){return"".concat(e,"%")},tickCount:this.props.yAxisTickCount,style:this.styleOpts.axis.y,domain:[0,100],crossAxis:!1}),this.scattersAndLines,this.showLegend&&r.createElement(f.VictoryLegend,{x:this.styleOpts.legend.x,y:this.styleOpts.legend.y,data:this.victoryLegendData,labelComponent:this.props.legendLabelComponent||r.createElement(_.a,{dy:"0.3em",maxWidth:256}),groupComponent:r.createElement("g",{className:"survivalChartLegendHideForDownload"})}),this.legendForDownload,this.pValueText))}},{key:"chartTooltip",get:function(){var e=this;return r.createElement("div",{style:{maxWidth:250}},this.analysisGroupsWithData.map(function(t){return r.createElement("span",{key:t.value,style:{display:"inline-block",marginRight:12,fontWeight:e.highlightedCurve===t.value?"bold":"initial",cursor:"pointer"},onClick:function(){e.highlightedCurve=e.highlightedCurve===t.value?"":t.value}},r.createElement("div",{style:{width:10,height:10,display:"inline-block",backgroundColor:t.color,marginRight:5}}),t.name?t.name:t.value)}),this.props.showNaPatientsHiddenToggle&&r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",checked:this.props.naPatientsHiddenInSurvival,onClick:this.props.toggleSurvivalHideNAPatients})," ","Exclude patients with NA for any of the selected attributes.")))}},{key:"tableRows",get:function(){var e=this;return this.props.analysisGroups.map(function(t){return r.createElement("tr",null,r.createElement("td",null,t.name?t.name:t.value),Object(h.k)(e.props.sortedGroupedSurvivals[t.value],e.estimates[t.value]).map(function(e){return r.createElement("td",null,r.createElement("b",null,e))}))})}}])&&I(n.prototype,o),i&&I(n,i),t}();x.defaultProps={showTable:!0,showSlider:!0,legendLocation:N.CHART,showNaPatientsHiddenToggle:!1,showDownloadButtons:!0,yAxisTickCount:11},D([i.observable.ref],x.prototype,"tooltipModel",void 0),D([i.observable],x.prototype,"scatterFilter",void 0),D([i.observable],x.prototype,"highlightedCurve",void 0),D([i.observable],x.prototype,"sliderValue",void 0),D([i.computed],x.prototype,"styleOpts",null),D([i.computed],x.prototype,"downSamplingDenominators",null),D([i.computed],x.prototype,"estimates",null),D([i.computed],x.prototype,"unfilteredScatterData",null),D([i.computed],x.prototype,"scatterData",null),D([i.computed],x.prototype,"analysisGroupsMap",null),D([i.computed],x.prototype,"logRankTestPVal",null),D([i.computed],x.prototype,"victoryLegendData",null),D([i.computed],x.prototype,"legendDataForDownload",null),D([g.default],x.prototype,"getSvg",null),D([g.default],x.prototype,"getData",null),D([g.default],x.prototype,"hoverCircleFillOpacity",null),D([i.computed],x.prototype,"analysisGroupsWithData",null),D([i.computed],x.prototype,"scattersAndLines",null),D([i.computed],x.prototype,"legendForDownload",null),D([i.computed],x.prototype,"xAxisTickCount",null),D([i.computed],x.prototype,"showLegend",null),D([i.computed],x.prototype,"maximumDataMonthValue",null),D([g.default,i.action],x.prototype,"onSliderChange",null),D([g.default,i.action],x.prototype,"onSliderTextChange",null),D([i.computed],x.prototype,"chart",null),D([i.computed],x.prototype,"chartTooltip",null),D([i.computed],x.prototype,"tableRows",null),x=D([o.observer],x),t.b=x},916:function(e,t,n){},923:function(e,t,n){"use strict";var r=n(0),o=n(66),i=n(9),a=n(2),s=n(6);function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":d(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},h=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=u(this,c(t).apply(this,arguments))).iframeLoaded=!1,e}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,r["Component"]),n=t,(i=[{key:"onLoad",value:function(){this.iframeLoaded=!0}},{key:"render",value:function(){return r.createElement("div",{style:{position:"relative"}},r.createElement(o.a,{center:!0,size:"big",isLoading:!this.iframeLoaded}),r.createElement("iframe",{id:this.props.iframeId||"",className:this.props.className||"",style:{width:"100%",position:"relative",zIndex:100,height:this.props.height,border:"none"},src:this.props.url,onLoad:this.onLoad}))}}])&&l(n.prototype,i),a&&l(n,a),t}();f([a.observable],h.prototype,"iframeLoaded",void 0),f([s.default],h.prototype,"onLoad",null),h=f([i.observer],h),t.a=h},927:function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(2),a=n(870),s=n(6);function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":d(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,c(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,r["Component"]),n=t,(o=[{key:"openResource",value:function(){this.props.openResource(this.props.resource)}},{key:"render",value:function(){return r.createElement("div",null,r.createElement("a",{onClick:this.openResource},this.icon,this.props.resource.resourceDefinition.displayName||this.props.resource.url),r.createElement("a",{href:this.props.resource.url,style:{marginLeft:16,fontSize:10},target:"_blank"},r.createElement("i",{className:"fa fa-external-link fa-sm",style:{marginRight:5,color:"black"}}),"Open in new window"))}},{key:"icon",get:function(){var e="";switch(Object(a.b)(this.props.resource.url)){case"pdf":e="fa fa-file-pdf-o";break;case"png":case"jpeg":case"jpg":case"gif":e="fa fa-file-image-o";break;case"m4a":case"flac":case"mp3":case"mp4":case"wav":e="fa fa-file-audio-o"}return e?r.createElement("i",{className:"".concat(e," fa-sm"),style:{marginRight:5,color:"black"}}):null}}])&&l(n.prototype,o),i&&l(n,i),t}();f([i.computed],h.prototype,"icon",null),f([s.default],h.prototype,"openResource",null),h=f([o.observer],h),t.a=h},928:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n(192),o=n(0),i=n(2),a=n(9);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":d(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,c(t).apply(this,arguments))}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,o["Component"]),n=t,(i=[{key:"render",value:function(){var e=this;return o.createElement("div",s({className:this.props.className||""},this.props,{ref:function(t){return e.wrapper=t},style:this.style}),this.props.children)}},{key:"offset",get:function(){return this.props.offset||0}},{key:"style",get:function(){return{width:r.a.size.width-this.offset,overflowX:"auto"}}}])&&l(n.prototype,i),a&&l(n,a),t}();f([i.computed],h.prototype,"offset",null),f([i.computed],h.prototype,"style",null),h=f([a.observer],h)},929:function(e,t,n){e.exports=n(25)(367)},930:function(e,t,n){e.exports=n(25)(329)},931:function(e,t,n){e.exports=n(25)(878)},932:function(e,t,n){e.exports=n(25)(167)},933:function(e,t,n){e.exports=n(25)(877)},934:function(e,t,n){e.exports=n(25)(360)},949:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(0),o=n(826),i=n(20);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,u(t).apply(this,arguments))}var n,a,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this;return r.createElement("span",{style:{cursor:"default"}},r.createElement(o.a,{text:"G",tooltip:function(){return e.getToolTip(e.props.qValue,e.props.peakGeneCount)}}))}},{key:"getToolTip",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r.createElement("div",null,"Candidate driver gene, as determined by the ",r.createElement("b",null,"GISTIC"),r.createElement("br",null),"algorithm.",r.createElement("p",null),"The GISTIC algorithm identifies likely driver copy number",r.createElement("br",null),"alterations by evaluating the frequency and amplitude of",r.createElement("br",null),"observed CNA events within the entire study.",r.createElement("p",null),r.createElement("span",null," Q-value: ",(e||0).toExponential(3)),r.createElement(i.If,{condition:t>0},r.createElement(i.Then,null,r.createElement("br",null),r.createElement("span",null," ","Number of genes in the peak: ",t))))}}])&&s(n.prototype,a),p&&s(n,p),t}()},963:function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(829),a=n(192),s=n(2),l=n(964),u=n.n(l),c=n(5),p=n.n(c),d=n(6),f=n(3),h=n(870);function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var C=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":S(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},_=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),b(this,g(t).apply(this,arguments))}var n,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,r["Component"]),n=t,(o=[{key:"goToNextDatum",value:function(){this.isLastDatum||this.props.urlWrapper.setResourceUrl(this.props.resourceData[this.currentResourceIndex+1].url)}},{key:"goToPrevDatum",value:function(){this.isFirstDatum||this.props.urlWrapper.setResourceUrl(this.props.resourceData[this.currentResourceIndex-1].url)}},{key:"render",value:function(){var e=this.props.resourceData.length>1;return r.createElement("div",null,r.createElement(i.a,{title:this.currentResourceDatum.resourceDefinition.displayName,isLoading:!1,className:"pull-left",style:{marginBottom:10}}),r.createElement("div",{style:{width:"100%",height:this.iframeHeight,display:"flex",alignItems:"center"}},e&&r.createElement("div",{className:p()(u.a.carouselButton,m({},u.a.active,!this.isFirstDatum)),onClick:this.goToPrevDatum},r.createElement("i",{style:{marginRight:15},className:"fa fa-4x fa-chevron-left"})),this.httpIframeWithHttpsPortal?r.createElement("div",null,r.createElement("span",null,"We can't show this URL in the portal. Please use the link below:"),r.createElement("br",null),r.createElement("a",{href:this.currentResourceDatum.url},this.currentResourceDatum.url)):r.createElement("iframe",{src:this.iframeUrl,style:{width:"100%",height:"100%"}}),e&&r.createElement("div",{className:p()(u.a.carouselButton,m({},u.a.active,!this.isLastDatum)),onClick:this.goToNextDatum},r.createElement("i",{style:{marginLeft:15},className:"fa fa-4x fa-chevron-right"}))))}},{key:"iframeHeight",get:function(){return a.a.size.height-275}},{key:"currentResourceIndex",get:function(){var e=this;if(this.props.urlWrapper.query.resourceUrl){var t=this.props.resourceData.findIndex(function(t){return t.url===e.props.urlWrapper.query.resourceUrl});return-1===t?0:t}return 0}},{key:"currentResourceDatum",get:function(){return this.props.resourceData[this.currentResourceIndex]}},{key:"isFirstDatum",get:function(){return 0===this.currentResourceIndex}},{key:"isLastDatum",get:function(){return this.currentResourceIndex===this.props.resourceData.length-1}},{key:"httpIframeWithHttpsPortal",get:function(){return"https:"===Object(f.C)().location.protocol&&"http:"===new URL(this.currentResourceDatum.url).protocol}},{key:"iframeUrl",get:function(){var e=Object(h.b)(this.currentResourceDatum.url),t=this.currentResourceDatum.url;switch(e){case"pdf":t=Object(h.a)(this.currentResourceDatum.url)}return t}}])&&y(n.prototype,o),s&&y(n,s),t}();C([s.computed],_.prototype,"iframeHeight",null),C([s.computed],_.prototype,"currentResourceIndex",null),C([s.computed],_.prototype,"currentResourceDatum",null),C([d.default,s.action],_.prototype,"goToNextDatum",null),C([d.default,s.action],_.prototype,"goToPrevDatum",null),C([s.computed],_.prototype,"isFirstDatum",null),C([s.computed],_.prototype,"isLastDatum",null),C([s.computed],_.prototype,"httpIframeWithHttpsPortal",null),C([s.computed],_.prototype,"iframeUrl",null),_=C([o.observer],_),t.a=_},964:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__3mtfh",framedImage:"styles-module__framedImage__24LeD",carouselButton:"styles-module__carouselButton__35zgJ",active:"styles-module__active__xJZuN"}},965:function(e,t,n){"use strict";n.d(t,"b",function(){return y}),n.d(t,"a",function(){return b});var r=n(0),o=n(2),i=n(15),a=n(5),s=n.n(a),l=n(30),u=n(9);function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var m=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":h(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},y=17,b=8,g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,d(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return this.props.model?r.createElement(i.Popover,{arrowOffsetTop:y,className:s()("cbioportal-frontent","cbioTooltip"),positionLeft:this.positionLeft,positionTop:this.props.mousePosition.y-y,style:{width:150},placement:this.placement},r.createElement("div",null,r.createElement("div",null,"Number of samples:"," ",r.createElement("strong",null,this.props.model.sampleCount)),r.createElement("div",null,"Range:"," ",r.createElement("strong",null,Object(l.s)(this.props.model.start,this.props.model.end,this.props.model.special))))):null}},{key:"placement",get:function(){return this.props.totalBars<2*this.props.currentBarIndex?"left":"right"}},{key:"positionLeft",get:function(){return"left"===this.placement?this.props.mousePosition.x-(b+150):this.props.mousePosition.x+b}},{key:"transform",get:function(){return"left"===this.placement?"translate(-100%,0%)":void 0}}])&&c(n.prototype,o),a&&c(n,a),t}();m([o.computed],g.prototype,"placement",null),m([o.computed],g.prototype,"positionLeft",null),m([o.computed],g.prototype,"transform",null),g=m([u.observer],g),t.c=g},970:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var r=n(1),o=n(0),i=n(17),a=n.n(i),s=n(971),l=n.n(s),u=n(6),c=n(846),p=n(833);function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var b=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":y(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},g=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,h(t).call(this,e))}var n,i,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,o["Component"]),n=t,(i=[{key:"render",value:function(){return o.createElement("div",null,o.createElement("div",{ref:this.igvDivRefHandler,className:"igvContainer"}))}},{key:"componentDidMount",value:function(){var e=this;this.props.onRenderingStart&&this.props.onRenderingStart();var t={genome:this.props.genome,locus:this.props.locus};l.a.createBrowser(this.igvDiv,t).then(function(t){e.igvBrowser=t,e.igvDiv&&e.updateSearch(e.igvDiv,e.props.disableSearch),e.loadTrackList(t,r.cloneDeep(e.props.tracks)),e.lastRenderedTracks=e.props.tracks,e.props.onRenderingComplete&&e.props.onRenderingComplete()})}},{key:"shouldComponentUpdate",value:function(e){var t=!1;if(!1!==e.isVisible){var n=Object(p.f)(this.lastRenderedTracks||[],e.tracks||[]),r=this.props.genome!==e.genome,o=this.props.locus!==e.locus,i=this.props.disableSearch!==e.disableSearch;(t=r||n.length>0||o||i)&&(this.modifiedTrackNames=n)}return t}},{key:"componentDidUpdate",value:function(){this.igvBrowser&&this.props.locus&&this.igvBrowser.search(this.props.locus),this.igvBrowser&&this.modifiedTrackNames&&this.modifiedTrackNames.length>0&&(this.updateTracks(this.igvBrowser,this.modifiedTrackNames,this.tracksByName),this.modifiedTrackNames=void 0,this.lastRenderedTracks=this.props.tracks),this.igvDiv&&this.updateSearch(this.igvDiv,this.props.disableSearch)}},{key:"loadTrackList",value:function(e,t){var n=this;e.loadTrackList(t).then(function(){n.props.onRenderingComplete&&n.props.onRenderingComplete()}).catch(function(){n.props.onRenderingComplete&&n.props.onRenderingComplete()})}},{key:"updateTracks",value:function(e,t,n){var o=this;t.forEach(function(t){return e.removeTrackByName(t)});var i=t.map(function(e){return r.cloneDeep(n[e])}).filter(function(e){return void 0!==e});i.length>0&&(this.props.onRenderingStart&&this.props.onRenderingStart(),Object(c.a)(function(){o.loadTrackList(e,i)}))}},{key:"updateSearch",value:function(e,t){var n=a()(e).find(".igv-chromosome-select-widget-container select"),r=a()(e).find(".igv-search-container input");t?(r.attr("disabled","true"),n.attr("disabled","true")):(r.attr("disabled",null),n.attr("disabled",null))}},{key:"igvDivRefHandler",value:function(e){this.igvDiv=e}},{key:"tracksByName",get:function(){return Object(p.g)(this.props.tracks)}}])&&d(n.prototype,i),s&&d(n,s),t}();g.defaultProps={genome:"hg19",locus:"all",disableSearch:!1},b([u.default],g.prototype,"igvDivRefHandler",null)},971:function(e,t,n){e.exports=n(25)(1038)},972:function(e,t,n){"use strict";var r=n(0),o=n(2),i=n(9),a=n(15),s=n(5),l=n.n(s),u=n(3),c=n(833),p=n(193),d=n(76),f=n.n(d),h=n(6);function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var S=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":v(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},C=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=y(this,b(t).apply(this,arguments))).downloading=!1,e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement(u.d,{overlay:r.createElement("span",null,"Download a copy number segment file for the selected samples"),placement:this.props.tooltipPlacement},r.createElement(a.Button,{className:this.props.buttonClassName,onClick:this.handleDownload,disabled:this.downloading},r.createElement("i",{className:l()({fa:!0,"fa-cloud-download":!this.downloading,"fa-spinner fa-pulse":this.downloading})})))}},{key:"handleDownload",value:function(){var e=this;this.downloading=!0,Object(p.a)(this.props.promise,function(t){f()(Object(c.e)(t),e.props.filename),e.downloading=!1})}}])&&m(n.prototype,o),i&&m(n,i),t}();C.defaultProps={filename:"segments.seg",buttonClassName:"btn btn-sm pull-right",tooltipPlacement:"left"},S([o.observable],C.prototype,"downloading",void 0),S([h.default],C.prototype,"handleDownload",null),C=S([i.observer],C),t.a=C},973:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__voGSg",framedImage:"styles-module__framedImage__1XH6x",container:"styles-module__container__16NQq","items-container":"styles-module__items-container__2byHQ","fa-check":"styles-module__fa-check__l2mEf","fa-exclamation-triangle":"styles-module__fa-exclamation-triangle__1RHoj","not-invoked-item":"styles-module__not-invoked-item__2JY4J","item-row":"styles-module__item-row__2FhJM","pulse-spinner":"styles-module__pulse-spinner__16rgL"}},991:function(e,t,n){e.exports=n(25)(834)},993:function(e,t,n){e.exports=n(25)(200)},994:function(e,t,n){e.exports=n(25)(420)},996:function(e,t,n){e.exports=n(25)(202)},997:function(e,t,n){e.exports=n(25)(846)},998:function(e,t,n){e.exports=n(25)(244)},999:function(e,t,n){e.exports=n(25)(874)}}]);