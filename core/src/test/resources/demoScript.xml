<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">


	<!-- 
		The principle here is a simple one: it's initialized with a list of lists of strings. Each starts with
	    a class name and set of string arguments, which are then mapped to a call to a static main(String[] args)
	    method in that class. However, we run then all within a single VM and with a transactional system set up
	    for data access. 
	    
	    We also have used Maven variables here for testing, but in reality, these will need to be real file 
	    names. 
	    
	    A script can generate a file like this, and pass it with a DAO context file to the 
	    TransactionalScriptRunner class to run all the steps in one go. 
	-->
	<bean class="org.mskcc.cbio.portal.util.TransactionalScripts">
		<constructor-arg>
			<list>
				<!-- Script 1 - load a study -->
				<list>
					<value>org.mskcc.cbio.portal.scripts.ImportCancerStudy</value>
					<value>#{systemEnvironment['PORTAL_HOME']}/core/src/test/resources/cancer_study.txt</value>
				</list>
				
				<!-- Script 2 - load clinical data - needed to set up patients and samples -->
				<list>
					<value>org.mskcc.cbio.portal.scripts.ImportClinicalData</value>
					<value>#{systemEnvironment['PORTAL_HOME']}/core/src/test/resources/clinical_data.txt</value>
					<value>test_brca</value>
				</list>
			</list>
		</constructor-arg>
	</bean>

</beans>