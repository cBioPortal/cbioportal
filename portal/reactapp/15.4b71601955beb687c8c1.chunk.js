(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{1015:function(e,t,n){"use strict";(function(e){var r=n(1),o=n(0),a=n(23),i=n.n(a),l=n(797),s=n(787),c=n.n(s),u=n(5),p=n.n(u),f=n(1096),d=n(9),y=n(2),m=n(152),h=n.n(m),b=n(20),g=n(798),v=n(15),_=n(1026),S=n.n(_),E=n(8),w=n(6),P=n(842),O=n(1033),C=n(897),T=n(192);function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var I=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":R(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},x=function(t){function n(e){var t,a=this;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=j(this,A(n).call(this,e))).handlers={onSummaryClick:function(){t.store.openSummary()},onCheckAllFiltered:function(){t.logic.mainView.toggleAllFiltered()},onClearFilter:function(){t.store.setSearchText("")}},t.CancerTypeList=Object(d.observer)(function(){var e=t.logic.cancerTypeListView.getChildCancerTypes(t.store.treeData.rootCancerType);return o.createElement("ul",{className:c.a.cancerTypeList},e.map(function(e,t){return o.createElement(a.CancerTypeListItem,{key:t,cancerType:e})}))}),t.CancerTypeListItem=Object(d.observer)(function(e){var n,a=e.cancerType,i=Object(y.expr)(function(){return t.logic.cancerTypeListView.getDescendantCancerStudies(a).length}),l=r.includes(t.store.selectedCancerTypeIds,a.cancerTypeId),s=t.logic.isHighlighted(a),u=p()((k(n={},c.a.selectable,!0),k(n,c.a.selected,l),k(n,c.a.matchingNodeText,!!t.store.searchText&&s),k(n,c.a.nonMatchingNodeText,!!t.store.searchText&&!s),k(n,c.a.containsSelectedStudies,Object(y.expr)(function(){return t.logic.cancerTypeContainsSelectedStudies(a)})),n));return o.createElement("li",{className:u,onMouseDown:t.getCancerTypeListClickHandler(a)},o.createElement("span",{className:c.a.cancerTypeListItemLabel},a.name),o.createElement("span",{className:c.a.cancerTypeListItemCount},i))}),t.store=t.props.queryStore,t}var a,s,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(n,o["Component"]),a=n,(s=[{key:"getCancerTypeListClickHandler",value:function(e){var t=this;return function(n){return t.store.selectCancerType(e,n.ctrlKey)}}},{key:"selectTCGAPanAtlas",value:function(){this.logic.mainView.selectAllMatchingStudies(P.a)}},{key:"selectMatchingStudies",value:function(e){e&&(1===e.length&&/^\*.*\*$/.test(e[0])?this.logic.mainView.selectAllMatchingStudies(e[0].replace(/\*/g,"")):this.logic.mainView.selectAllMatchingStudies(e))}},{key:"componentDidMount",value:function(){var e,t=this;this.windowSizeDisposer=Object(y.reaction)(function(){return T.a.size},function(){t.props.forkedMode&&(clearTimeout(e),e=setTimeout(function(){return t.setListHeight()},200))},{fireImmediately:!0})}},{key:"componentWillUnmount",value:function(){this.windowSizeDisposer()}},{key:"setListHeight",value:function(){var t=e(i.a.findDOMNode(this)),n=T.a.size.height-t.offset().top;n=n<200?200:n,t.css("height",n-75)}},{key:"render",value:function(){var e=this,t=this.logic.mainView.getSelectionReport(),n=t.shownStudies,a=t.shownAndSelectedStudies,i=this.logic.mainView.quickSelectButtons(E.b.serverConfig.skin_quick_select_buttons);return o.createElement(l.a,{overflow:!0,"data-test":"studyList",className:c.a.CancerStudySelector},o.createElement(l.b,{overflow:!0,className:c.a.CancerStudySelectorHeader},o.createElement(g.a,{promises:[this.store.cancerTypes,this.store.cancerStudies]},"Select Studies for Visualization & Analysis:"),this.store.selectableStudiesSet.isComplete&&o.createElement("div",null,o.createElement(C.a,{store:this.store})),o.createElement(d.Observer,null,function(){var t=E.a.skin_example_study_queries(E.b.serverConfig.skin_example_study_queries||"");e.store.searchText&&t.indexOf(e.store.searchText)<0&&(t=[e.store.searchText].concat(t));var n=null,r=t.map(function(e,t){return{value:e,sortKey:t}});return o.createElement("div",{style:{display:"flex",alignItems:"center"}},e.store.searchText&&o.createElement("span",{"data-test":"clearStudyFilter",onClick:function(t){e.autosuggest.setState({inputValue:""}),e.handlers.onClearFilter()},style:{fontSize:18,cursor:"pointer",color:"#999999",position:"relative",left:164,zIndex:10}},"x"),o.createElement(S.a,{datalist:r,ref:function(t){return e.autosuggest=t},placeholder:"Search...",bsSize:"small",onChange:function(t){null!==n&&(window.clearTimeout(n),n=null),n=window.setTimeout(function(){e.store.setSearchText(t)},400)},onFocus:function(t){0===t.length&&setTimeout(function(){e.autosuggest.setState({open:!0})},400)}}))})),o.createElement(b.If,{condition:this.studiesDataComplete},o.createElement(l.b,{className:c.a.cancerStudySelectorBody},o.createElement(b.If,{condition:this.store.maxTreeDepth>0},o.createElement(b.Then,null,o.createElement("div",{className:c.a.cancerTypeListContainer},o.createElement(this.CancerTypeList,null)))),o.createElement("div",{className:c.a.cancerStudyListContainer,"data-test":"cancerTypeListContainer"},o.createElement("div",{className:"checkbox",style:{marginLeft:19}},o.createElement(b.If,{condition:n.length>0},o.createElement(b.If,{condition:!this.logic.mainView.isFiltered&&!r.isEmpty(i)},o.createElement(b.Then,null,o.createElement("div",{className:c.a.quickSelect},o.createElement(O.a,{onSelect:this.selectMatchingStudies,buttonsConfig:i}))),o.createElement(b.Else,null,o.createElement("label",null,o.createElement("input",{type:"checkbox","data-test":"selectAllStudies",style:{top:-2},onClick:this.handlers.onCheckAllFiltered,checked:a.length===n.length}),o.createElement("strong",null,a.length===n.length?"Deselect all listed studies ".concat(n.length<this.store.cancerStudies.result.length?"matching filter":""," (").concat(n.length,")"):"Select all listed studies ".concat(n.length<this.store.cancerStudies.result.length?"matching filter":"","  (").concat(n.length,")")))))),o.createElement(b.If,{condition:this.store.cancerStudies.isComplete&&this.store.cancerTypes.isComplete&&0===n.length},o.createElement("p",null,"There are no studies matching your filter."))),o.createElement(f.a,null)))),o.createElement(v.Modal,{className:p()(c.a.SelectedStudiesWindow,"cbioportal-frontend"),show:this.store.showSelectedStudiesOnly,onHide:function(){return e.store.showSelectedStudiesOnly=!1}},o.createElement(v.Modal.Header,{closeButton:!0},o.createElement(v.Modal.Title,null,"Selected Studies")),o.createElement(v.Modal.Body,null,o.createElement(f.a,{showSelectedStudiesOnly:!0}))))}},{key:"studiesDataComplete",get:function(){return this.store.cancerTypes.isComplete&&this.store.cancerStudies.isComplete&&this.store.userVirtualStudies.isComplete}},{key:"logic",get:function(){return this.store.studyListLogic}}])&&D(a.prototype,s),u&&D(a,u),n}();I([y.computed],x.prototype,"studiesDataComplete",null),I([h.a],x.prototype,"getCancerTypeListClickHandler",null),I([w.default,y.action],x.prototype,"selectTCGAPanAtlas",null),I([w.default,y.action],x.prototype,"selectMatchingStudies",null),x=I([d.observer],x),t.a=x}).call(this,n(17))},1016:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__3uFIJ",framedImage:"styles-module__framedImage__3chnD",padded:"styles-module__padded__3vpqj",column:"styles-module__column__2pa-R",row:"styles-module__row__3l99O"}},1017:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__agNQJ",framedImage:"styles-module__framedImage__JjRC-",selectAllStudies:"styles-module__selectAllStudies__2gWhF",SelectedStudyList:"styles-module__SelectedStudyList__27Hpt",StudyList:"styles-module__StudyList__2mxsz",deselectAll:"styles-module__deselectAll__26p-l",Level0:"styles-module__Level0__1RUPZ",Level1:"styles-module__Level1__2R0IW",Level3:"styles-module__Level3__1vXaT",Level4:"styles-module__Level4__3ZJ1g",Level2:"styles-module__Level2__3AEJ-",CancerType:"styles-module__CancerType__Zm_qX",Study:"styles-module__Study__398QL",indentArrow:"styles-module__indentArrow__32udx",SelectAll:"styles-module__SelectAll__3SSsJ",StudyName:"styles-module__StudyName__3IA_4",DeletedStudy:"styles-module__DeletedStudy__2axOg",StudySamples:"styles-module__StudySamples__3_cjf",StudyMeta:"styles-module__StudyMeta__3UFnp",StudyLinks:"styles-module__StudyLinks__cMCHs",summaryIcon:"styles-module__summaryIcon__WR75I",iconWithTooltip:"styles-module__iconWithTooltip__2yBW3",icon:"styles-module__icon__1ZBlQ",trashIcon:"styles-module__trashIcon__1z-wJ",infoCircleIcon:"styles-module__infoCircleIcon__27xSR",tooltip:"styles-module__tooltip__b54B6",fadein:"styles-module__fadein__2G2-B"}},1023:function(e,t,n){},1024:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__1fCuf",framedImage:"styles-module__framedImage__1w-Q4",SectionHeader:"styles-module__SectionHeader__3RwOA",error:"styles-module__error__1QyPg"}},1025:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__3FkcF",framedImage:"styles-module__framedImage__Jd87U",error:"styles-module__error__19z3B",icon:"styles-module__icon__1tBLC"}},1033:function(e,t,n){"use strict";var r=n(0),o=n(1),a=n(9),i=n(3);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":f(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,u(t).apply(this,arguments))}var n,a,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this;return r.createElement("div",null,"Quick select: ",o.map(this.props.buttonsConfig,function(t,n){var o=l(n.split("|"),2),a=o[0],s=o[1],c=r.createElement("button",{"data-test":"selectPanCan",className:"btn btn-default btn-xs",onClick:function(){return e.props.onSelect(t)}},a),u=r.createElement("span",{style:{display:"inline-block",width:"300px"}},s||"");return s?r.createElement(i.d,{overlay:u},c):c}))}}])&&s(n.prototype,a),f&&s(n,f),t}();y=d([a.observer],y),t.a=y},1035:function(e,t,n){},1045:function(e,t,n){},1056:function(e,t,n){},1057:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__3ybLz",framedImage:"styles-module__framedImage__1LRLJ",optionGroup:"styles-module__optionGroup__2f4nW",groupHeader:"styles-module__groupHeader__1pzK0",optionWrapper:"styles-module__optionWrapper__10YFL",optionLabelWrapper:"styles-module__optionLabelWrapper__Nj0Ws"}},1073:function(e,t,n){e.exports=n(25)(388)},1096:function(e,t,n){"use strict";var r=n(0),o=n(1017),a=n(5),i=n.n(a),l=n(794),s=n.n(l),c=n(172),u=n(9),p=n(2),f=n(1),d=n.n(f),y=n(18),m=n(788),h=n(3),b=n(805),g=n(1018),v=(n(1023),n(13)),_=n(66);function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t,n){return t&&E(e.prototype,t),n&&E(e,n),e}function P(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?C(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var j=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":D(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},A=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,l)}s((r=r.apply(e,t||[])).next())})},N=function(e){function t(){var e;return S(this,t),(e=P(this,O(t).apply(this,arguments))).studyMetadata=Object(h.T)({invoke:function(){return A(C(e),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.a.getTagsUsingGET({studyId:this.props.studyId}));case 1:case"end":return e.stop()}},e,this)}))},onError:function(e){console.error("Error on getting study tags.",e)}}),e}return T(t,r["Component"]),w(t,[{key:"addHTMLDescription",value:function(e){return{__html:e}}},{key:"render",value:function(){var e="";if(this.props.isVirtualStudy)e=r.createElement("div",{dangerouslySetInnerHTML:this.addHTMLDescription(this.props.studyDescription)});else if(this.studyMetadata.isPending)e=r.createElement(_.a,{isLoading:!0});else if(this.studyMetadata.isComplete){var t=Object.keys(this.studyMetadata.result).length,n=r.createElement("div",{dangerouslySetInnerHTML:this.addHTMLDescription(this.props.studyDescription)});e=t>0?[n,r.createElement("br",null),r.createElement("div",{className:"studyTagsTooltip"}," ",r.createElement(g.JsonToTable,{json:this.studyMetadata.result}))]:n}else this.studyMetadata.isError&&(e="error");return e}}]),t}();j([p.observable],N.prototype,"studyMetadata",void 0),N=j([u.observer],N);var R=function(e){function t(){return S(this,t),P(this,O(t).apply(this,arguments))}return T(t,r["Component"]),w(t,[{key:"renderTooltip",value:function(){return r.createElement(h.d,{key:this.props.key,mouseEnterDelay:this.props.mouseEnterDelay,placement:this.props.placement,overlay:r.createElement(N,{studyDescription:this.props.studyDescription,studyId:this.props.studyId,isVirtualStudy:this.props.isVirtualStudy}),children:this.props.children})}},{key:"render",value:function(){return this.renderTooltip()}}]),t}(),I=R=j([u.observer],R),x=n(173);function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t,n){return t&&B(e.prototype,t),n&&B(e,n),e}function V(e,t){return!t||"object"!==U(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var q=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":U(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},W=Object.assign(Object.assign({},o),{Level:function(e){return o["Level".concat(e)]}}),Y=function(e){function t(){var e;return G(this,t),(e=V(this,H(t).apply(this,arguments))).renderCancerType=function(t){var n,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=e.logic.getDepth(t),c=e.view.getChildCancerTypes(t),u=e.view.getChildCancerStudies(t),p=e.logic.cancerTypeListView.getDescendantCancerStudies(t).map(function(e){return e.studyId});if(t!=e.rootCancerType){var f=i()(W.CancerType,W.Level(l));3===l&&(o=r.createElement(s.a,{className:W.indentArrow,name:"long-arrow-right"})),n=r.createElement("li",{className:f},r.createElement(z,{view:e.view,node:t},o,r.createElement("span",null,t.name),!e.store.forDownloadTab&&r.createElement("span",{className:W.SelectAll},d.a.intersection(p,e.store.selectableSelectedStudyIds).length?"Deselect All":"Select All")))}var y=i()(W.StudyList,W.Level(l));return r.createElement("ul",{key:a,className:y},n,u.map(e.renderCancerStudy),c.map(e.renderCancerType))},e.renderCancerStudy=function(t,n){var o=i()(W.Study),a=t.studyId in e.store.getOverlappingStudiesMap,l=a?r.createElement(h.d,{mouseEnterDelay:0,placement:"top",overlay:r.createElement("div",null,"This study has overlapping data with another selected study.")},r.createElement("i",{className:"fa fa-exclamation-triangle"})):null,s=d.a.includes(e.store.selectableSelectedStudyIds,t.studyId)&&e.store.isMixedReferenceGenome,c=s?r.createElement(h.d,{mouseEnterDelay:0,placement:"top",overlay:r.createElement("div",null,"You are combining studies with molecular data based on both GRCh37/hg19 and GRCh38/hg38. This is not fully supported yet. Please double check your findings")},r.createElement("span",null,r.createElement("i",{className:"fa fa-exclamation-triangle"})," ",Object(x.b)(t.referenceGenome))):null;return r.createElement("li",{key:n,className:o,"data-test":e.store.isVirtualStudy(t.studyId)?"VirtualStudySelect":"StudySelect"},r.createElement(u.Observer,null,function(){var n,o=i()((L(n={},W.StudyName,!0),L(n,"overlappingStudy",a||s),L(n,W.DeletedStudy,e.store.isDeletedVirtualStudy(t.studyId)),L(n,"studyItem_".concat(t.studyId),!0),n));return r.createElement(z,{view:e.view,node:t},r.createElement("span",{className:o},t.name,l,c))}),r.createElement(u.Observer,null,function(){return r.createElement("div",{className:W.StudyMeta},!e.store.isDeletedVirtualStudy(t.studyId)&&e.renderSamples(t),e.renderStudyLinks(t))}))},e.renderSamples=function(e){return r.createElement("span",{className:W.StudySamples},"".concat(e.allSampleCount," samples"))},e.renderStudyLinks=function(t){if(e.store.isDeletedVirtualStudy(t.studyId))return r.createElement(h.d,{mouseEnterDelay:0,placement:"top",overlay:r.createElement("div",{className:W.tooltip},"Restore study"),children:r.createElement("button",{className:"btn btn-default btn-xs",onClick:function(){return e.store.restoreVirtualStudy(t.studyId)},style:{lineHeight:"80%"},"data-test":"virtualStudyRestore"},"Restore")});var n=[{icon:"info-circle",tooltip:""}];return e.store.isVirtualStudy(t.studyId)?n.push({icon:"trash",tooltip:"Delete this virtual study.",onClick:function(){return e.store.deleteVirtualStudy(t.studyId)}}):n.push({icon:"book",onClick:t.pmid&&Object(y.x)(t.pmid),tooltip:t.pmid&&"PubMed"}),r.createElement("span",{className:W.StudyLinks},n.map(function(n,o){var a,l=r.createElement(s.a,{key:o,name:n.icon,className:i()((a={},L(a,W.icon,!0),L(a,W.iconWithTooltip,!!n.tooltip),L(a,W.trashIcon,"trash"===n.icon),L(a,W.infoCircleIcon,"info-circle"===n.icon),a))});if(n.onClick){var c={key:o};"string"==typeof n.onClick?(c.href=n.onClick,c.target="_blank"):c.onClick=n.onClick,l=r.createElement("a",c,l)}if(n.tooltip){var u=r.createElement("div",{className:W.tooltip,dangerouslySetInnerHTML:{__html:n.tooltip}});l=r.createElement(h.d,{key:o,mouseEnterDelay:0,placement:"top",overlay:u,children:l})}return"info-circle"===n.icon&&(l=r.createElement(I,{key:o,studyDescription:e.store.isVirtualStudy(t.studyId)?t.description.replace(/\r?\n/g,"<br />"):t.description,studyId:t.studyId,isVirtualStudy:e.store.isVirtualStudy(t.studyId),mouseEnterDelay:0,placement:"top"},r.createElement("a",null,l))),l}),t.studyId&&r.createElement(h.d,{mouseEnterDelay:0,placement:"top",overlay:r.createElement("div",{className:W.tooltip},"View clinical and genomic data of this study")},r.createElement("span",null,r.createElement(b.a,{studyId:t.studyId,className:i()(W.summaryIcon,"ci ci-pie-chart")}))))},e}return Q(t,m["d"]),F(t,[{key:"componentDidMount",value:function(){this.props.showSelectedStudiesOnly&&(this._view=this.view)}},{key:"render",value:function(){var e=this,t=this.renderCancerType(this.rootCancerType);return this.props.showSelectedStudiesOnly?r.createElement("div",{className:W.SelectedStudyList},r.createElement("span",{className:W.deselectAll,onClick:function(){e.view.onCheck(e.store.treeData.rootCancerType,!1),e.store.showSelectedStudiesOnly=!1}},"Deselect all"),t):t}},{key:"view",get:function(){return this._view||(this.props.showSelectedStudiesOnly?this.logic.selectedStudiesView:this.logic.mainView)}},{key:"logic",get:function(){return this.store.studyListLogic}},{key:"rootCancerType",get:function(){return this.store.treeData.rootCancerType}}]),t}();Y=q([u.observer],Y);t.a=Y;var z=function(e){function t(){return G(this,t),V(this,H(t).apply(this,arguments))}return Q(t,m["d"]),F(t,[{key:"render",value:function(){var e=this;return r.createElement(c.a,M({},this.checkboxProps,{onChange:function(t){e.props.view.onCheck(e.props.node,t.target.checked)}}),this.props.children)}},{key:"checkboxProps",get:function(){return this.props.view.getCheckboxProps(this.props.node)}}]),t}();q([p.computed.struct],z.prototype,"checkboxProps",null),z=q([u.observer],z)},1116:function(e,t,n){e.exports=n(25)(55)},1117:function(e,t,n){e.exports=n(25)(115)},1118:function(e,t,n){e.exports=n(25)(379)},1119:function(e,t,n){e.exports=n(25)(919)},1212:function(e,t,n){e.exports=n(25)(901)},1215:function(e,t,n){e.exports=n(25)(651)},1217:function(e,t,n){e.exports=n(25)(650)},1219:function(e,t,n){e.exports=n(25)(374)},1222:function(e,t,n){e.exports=n(25)(649)},1224:function(e,t,n){e.exports=n(25)(102)},1225:function(e,t,n){e.exports=n(25)(1009)},1227:function(e,t,n){e.exports=n(25)(656)},1229:function(e,t,n){e.exports=n(25)(993)},1230:function(e,t,n){e.exports=n(25)(966)},1231:function(e,t,n){e.exports=n(25)(992)},1234:function(e,t,n){e.exports=n(25)(964)},1238:function(e,t,n){e.exports=n(25)(205)},1241:function(e,t,n){e.exports=n(25)(755)},1242:function(e,t,n){e.exports=n(25)(687)},1243:function(e,t,n){e.exports=n(25)(254)},1244:function(e,t,n){e.exports=n(25)(70)},1245:function(e,t,n){e.exports=n(25)(377)},1248:function(e,t,n){e.exports=n(25)(50)},1256:function(e,t,n){},785:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(9),a=n(2),i=n(1212),l=n.n(i),s=n(8),c=(n(830),n(918)),u=n(290),p=n(1),f=n(362),d=n(19),y=n(66),m=n(18),h=n(64);function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var E=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":S(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},w=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=g(this,v(t).call(this,e))).state={twitterLoading:!0},n}var o,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,r["Component"]),o=t,(a=[{key:"CancerTypeList",value:function(){return this.logic.cancerTypeListView.getChildCancerTypes(this.studyStore.treeData.rootCancerType,!0)}},{key:"CancerTypeDescendantStudy",value:function(e){var t=e.cancerType;return this.logic.cancerTypeListView.getDescendantCancerStudies(t)}},{key:"CancerTypeDescendantStudies",value:function(e){var t=this;return e.filter(function(e){return"other"!==e.cancerTypeId&&"mixed"!==e.cancerTypeId}).map(function(e){return{shortName:e.name,color:e.dedicatedColor,studies:t.CancerTypeDescendantStudy({cancerType:e})}})}},{key:"getWhatsNew",value:function(){var e=this;if(s.b.serverConfig.skin_right_nav_show_whats_new){if(p.isEmpty(s.b.serverConfig.skin_right_nav_whats_new_blurb)){var t=n(1213).Timeline;return r.createElement("div",{className:"rightBarSection",style:{paddingBottom:20}},r.createElement("h3",{style:{borderBottom:0}},"What's New",r.createElement("a",{href:"http://www.twitter.com/cbioportal",className:"pull-right"},"@cbioportal"," ",r.createElement("i",{className:"fa fa-twitter","aria-hidden":"true"}))),r.createElement("div",{style:{marginTop:3}},r.createElement(t,{dataSource:{sourceType:"profile",screenName:"cbioportal"},options:{username:"cbioportal",height:"200",chrome:"noheader%20nofooter"},onLoad:function(){return e.setState({twitterLoading:!1})}})),r.createElement("div",null,this.state.twitterLoading&&r.createElement("span",{style:{textAlign:"center"}},r.createElement(y.a,{isLoading:!0,small:!0}))||r.createElement("div",{style:{paddingTop:5}},r.createElement("p",{style:{textAlign:"center"}},"Sign up for low-volume email news alerts"),r.createElement("a",{target:"_blank",className:"btn btn-default btn-sm",href:"http://groups.google.com/group/cbioportal-news/boxsubscribe",style:{width:"100%"}},"Subscribe"))))}return r.createElement("div",{className:"rightBarSection"},r.createElement("h3",null,"What's New"),r.createElement("div",{dangerouslySetInnerHTML:{__html:s.b.serverConfig.skin_right_nav_whats_new_blurb}}))}return null}},{key:"getInstallationMap",value:function(){var e=s.b.serverConfig.installation_map_url;return e?r.createElement("div",{className:"rightBarSection"},r.createElement("h3",{style:{paddingBottom:8}},"Local Installations"," ",r.createElement("a",{className:"btn btn-link btn-xs pull-right",target:"_blank",href:Object(m.b)("/visualize")},"Host your own")),r.createElement("a",{href:Object(m.b)("/installations"),target:"_blank",style:{display:"block"}},r.createElement("iframe",{frameBorder:"0",height:200,width:300,scrolling:"no",src:"".concat(e,"?small=1"),style:{pointerEvents:"none"}})),r.createElement("p",null,"Are you running a local instance of cBioPortal, public or private?"," ",r.createElement("a",{target:"_blank",href:"https://docs.google.com/forms/d/e/1FAIpQLSflQdN956q7Xh5caO8z8jIaF6uMLBkKrSxFvPi8OhNBWB247w/viewform"},"Complete the survey here")," ","to add your installation to the map.")):null}},{key:"getExampleSection",value:function(){return s.b.serverConfig.skin_right_nav_show_examples?p.isEmpty(s.b.serverConfig.skin_examples_right_column_html)?r.createElement("div",{className:"rightBarSection exampleQueries"},r.createElement("h3",null,"Example Queries"),r.createElement("ul",null,r.createElement("li",null,r.createElement(d.b,{to:"/comparison/mutations?sessionId=5cf89323e4b0ab413787436c"},"Primary vs. metastatic prostate cancer")),r.createElement("li",null,r.createElement(d.b,{to:"/results?cancer_study_list=coadread_tcga_pub&cancer_study_id=coadread_tcga_pub&genetic_profile_ids_PROFILE_MUTATION_EXTENDED=coadread_tcga_pub_mutations&genetic_profile_ids_PROFILE_COPY_NUMBER_ALTERATION=coadread_tcga_pub_gistic&Z_SCORE_THRESHOLD=2.0&case_set_id=coadread_tcga_pub_nonhypermut&gene_list=KRAS+NRAS+BRAF&gene_set_choice=user-defined-list"},"RAS/RAF alterations in colorectal cancer")),r.createElement("li",null,r.createElement(d.b,{to:"/results/".concat(h.b.MUTATIONS,"?cancer_study_list=ov_tcga_pub&cancer_study_id=ov_tcga_pub&genetic_profile_ids_PROFILE_MUTATION_EXTENDED=ov_tcga_pub_mutations&Z_SCORE_THRESHOLD=2.0&case_set_id=ov_tcga_pub_3way_complete&gene_list=BRCA1+BRCA2&gene_set_choice=user-defined-list")},"BRCA1 and BRCA2 mutations in ovarian cancer")),r.createElement("li",null,r.createElement(d.b,{to:"/results?cancer_study_list=ucec_tcga_pub&cancer_study_id=ucec_tcga_pub&genetic_profile_ids_PROFILE_MUTATION_EXTENDED=ucec_tcga_pub_mutations&Z_SCORE_THRESHOLD=2.0&RPPA_SCORE_THRESHOLD=2.0&data_priority=0&case_set_id=ucec_tcga_pub_sequenced&gene_set_choice=user-defined-list&gene_list=POLE%3A+MUT+%3D+P286+MUT+%3D+V411+MUT+%3D+L424+MUT+%3D+S297F&clinical_param_selection=null"},"POLE hotspot mutations in endometrial cancer")),r.createElement("li",null,r.createElement(d.b,{to:"/results?case_set_id=gbm_tcga_pub_sequenced&Action=Submit&genetic_profile_ids_PROFILE_MUTATION_EXTENDED=gbm_tcga_pub_mutations&genetic_profile_ids_PROFILE_COPY_NUMBER_ALTERATION=gbm_tcga_pub_cna_rae&Z_SCORE_THRESHOLD=1.0&cancer_study_list=gbm_tcga_pub&cancer_study_id=gbm_tcga_pub&gene_list=TP53+MDM2+MDM4&gene_set_choice=user-defined_list"},"TP53 and MDM2/4 alterations in GBM")),r.createElement("li",null,r.createElement(d.b,{to:"/results/".concat(h.b.DOWNLOAD,"?case_set_id=gbm_tcga_pub_sequenced&Action=Submit&genetic_profile_ids_PROFILE_MUTATION_EXTENDED=gbm_tcga_pub_mutations&cancer_study_list=gbm_tcga_pub&cancer_study_id=gbm_tcga_pub&gene_list=PTEN&gene_set_choice=user-defined_list&transpose_matrix=on")},"PTEN mutations in GBM in text format")),r.createElement("li",null,r.createElement(d.b,{to:"/patient?studyId=ucec_tcga_pub&caseId=TCGA-BK-A0CC"},"Patient view of an endometrial cancer case")),r.createElement("li",null,r.createElement(d.b,{to:"/study?id=laml_tcga_pan_can_atlas_2018,acc_tcga_pan_can_atlas_2018,blca_tcga_pan_can_atlas_2018,lgg_tcga_pan_can_atlas_2018,brca_tcga_pan_can_atlas_2018,cesc_tcga_pan_can_atlas_2018,chol_tcga_pan_can_atlas_2018,coadread_tcga_pan_can_atlas_2018,dlbc_tcga_pan_can_atlas_2018,esca_tcga_pan_can_atlas_2018,gbm_tcga_pan_can_atlas_2018,hnsc_tcga_pan_can_atlas_2018,kich_tcga_pan_can_atlas_2018,kirc_tcga_pan_can_atlas_2018,kirp_tcga_pan_can_atlas_2018,lihc_tcga_pan_can_atlas_2018,luad_tcga_pan_can_atlas_2018,lusc_tcga_pan_can_atlas_2018,meso_tcga_pan_can_atlas_2018,ov_tcga_pan_can_atlas_2018,paad_tcga_pan_can_atlas_2018,pcpg_tcga_pan_can_atlas_2018,prad_tcga_pan_can_atlas_2018,sarc_tcga_pan_can_atlas_2018,skcm_tcga_pan_can_atlas_2018,stad_tcga_pan_can_atlas_2018,tgct_tcga_pan_can_atlas_2018,thym_tcga_pan_can_atlas_2018,thca_tcga_pan_can_atlas_2018,ucs_tcga_pan_can_atlas_2018,ucec_tcga_pan_can_atlas_2018,uvm_tcga_pan_can_atlas_2018"},"All TCGA Pan-Cancer")),r.createElement("li",null,r.createElement(d.b,{to:"/study?id=msk_impact_2017"},"MSK-IMPACT clinical cohort, Zehir et al. 2017")),r.createElement("li",null,r.createElement(d.b,{to:"/study?id=5c26a970e4b05228701f9fa9"},"Histone mutations across cancer types")))):r.createElement("div",{className:"rightBarSection exampleQueries",dangerouslySetInnerHTML:{__html:"<h3>Example Queries</h3>"+s.b.serverConfig.skin_examples_right_column_html}}):null}},{key:"getTestimonialsSection",value:function(){return s.b.serverConfig.skin_right_nav_show_testimonials?r.createElement("div",{className:"rightBarSection",style:{minHeight:"300px"}},r.createElement("h3",null,"Testimonials"),r.createElement(f.b,null)):null}},{key:"render",value:function(){return r.createElement("div",null,this.getWhatsNew(),this.getExampleSection(),this.getInstallationMap(),this.getTestimonialsSection())}},{key:"studyStore",get:function(){return this.props.queryStore}},{key:"logic",get:function(){return this.studyStore.studyListLogic}}])&&b(o.prototype,a),i&&b(o,i),t}(),P=w=E([o.observer],w),O=(n(1256),n(6)),C=n(905);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){return(N="function"==typeof Symbol&&"symbol"===T(Symbol.iterator)?function(e){return T(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":T(e)})(e)}var R=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":N(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};l.a.plugins.register({beforeDraw:function(e){var t=e.chart.ctx;t.fillStyle="white",t.fillRect(0,0,e.chart.width,e.chart.height)}});var I=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=D(this,j(t).call(this,e))).showQuerySelector=!0,n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentWillMount",value:function(){this.queryStore=Object(C.a)()}},{key:"handleTabChange",value:function(e){this.props.routing.updateRoute({tab:e})}},{key:"getQueryStore",value:function(){return this.queryStore}},{key:"render",value:function(){return r.createElement(u.a,{className:"homePageLayout",noMargin:!0,rightBar:r.createElement(P,{queryStore:this.queryStore})},r.createElement("div",{className:"headBlock",dangerouslySetInnerHTML:{__html:s.b.serverConfig.skin_blurb}}),r.createElement(c.a,{getQueryStore:this.getQueryStore,showQuickSearchTab:s.b.serverConfig.quick_search_enabled,showDownloadTab:!0}))}}])&&k(n.prototype,o),a&&k(n,a),t}();R([a.observable],I.prototype,"showQuerySelector",void 0),R([O.default],I.prototype,"getQueryStore",null),I=R([Object(o.inject)("routing"),o.observer],I);t.default=I},797:function(e,t,n){"use strict";n.d(t,"b",function(){return v}),n.d(t,"a",function(){return _});var r=n(0),o=n(1016),a=n.n(o),i=n(5),l=n.n(i);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function f(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var b=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function g(e,t){var n=e.padded,o=e.overflow,i=e.flex,s=b(e,["padded","overflow","flex"]),c=Object.assign(Object.assign({flex:i,display:"flex",overflow:o?"visible":"auto"},e.style),{flexDirection:t}),u=l()(e.className,a.a[t],n&&a.a.padded);return r.createElement("div",h({},s,{style:c,className:u}))}var v=function(e){function t(){return c(this,t),f(this,d(t).apply(this,arguments))}return y(t,r["Component"]),p(t,[{key:"render",value:function(){return g(this.props,"row")}}]),t}(),_=function(e){function t(){return c(this,t),f(this,d(t).apply(this,arguments))}return y(t,r["Component"]),p(t,[{key:"render",value:function(){return g(this.props,"column")}}]),t}()},798:function(e,t,n){"use strict";var r=n(0),o=n(9),a=n(1024),i=n.n(a),l=n(5),s=n.n(l),c=n(794),u=n.n(c),p=n(1025),f=n.n(p);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},_=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,b(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.error,n=e.children,o=e.className,a=v(e,["error","children","className"]);return r.createElement("div",y({className:s()(o,f.a.error)},a),r.createElement("span",{className:f.a.message},r.createElement(u.a,{className:f.a.icon,name:"exclamation-circle"}),t.message+""),n)}}])&&m(n.prototype,o),a&&m(n,a),t}(),S=n(66);function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var k=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":T(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},D=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},j=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),P(this,O(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.promises,n=e.children,o=e.className,a=e.secondaryComponent,l=D(e,["promises","children","className","secondaryComponent"]);return r.createElement("div",E({className:s()(o,i.a.SectionHeader)},l),r.createElement("h2",null,n,!(!t||!t.some(function(e){return e.isPending}))&&r.createElement(S.a,{isLoading:!0,size:"small"})),!!a&&a,t&&t.map(function(e){return!!e.error&&r.createElement(_,{className:i.a.error,error:e.error})}))}}])&&w(n.prototype,o),a&&w(n,a),t}();j=k([o.observer],j);t.a=j},805:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(0),o=n(19);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,s(t).apply(this,arguments))}var n,a,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){return r.createElement(o.b,{to:"/study?id=".concat(this.props.studyId),className:this.props.className},this.props.children)}}])&&i(n.prototype,a),u&&i(n,u),t}()},807:function(e,t,n){"use strict";function r(e){return new Promise(function(t){return setTimeout(t,e)})}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3;return new Promise(function(r){var o=0,a=setInterval(function(){if(o+=t,e())clearInterval(a),r();else if(o>n)throw clearInterval(a),new Error("sleepUntil timeout")},t)})}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o})},894:function(e,t,n){e.exports=n(25)(77)},897:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(0),o=n(9),a=n(2),i=n(66),l=Object(o.observer)(function(e){return e.store.cancerTypes.isPending||e.store.cancerStudies.isPending||e.store.profiledSamplesCount.isPending?r.createElement(i.a,{isLoading:!0,size:"small",center:!1}):r.createElement(o.Observer,null,function(){var t=Object(a.expr)(function(){return e.store.selectableSelectedStudyIds.length});return r.createElement(r.Fragment,null,r.createElement("a",{onClick:function(){t&&(e.store.showSelectedStudiesOnly=!e.store.showSelectedStudiesOnly)}},r.createElement("b",null,t)," ",1===t?"study":"studies"," ","selected (",r.createElement("b",null,e.store.profiledSamplesCount.result.all)," ","samples)"),e.store.selectableSelectedStudies.length>0&&r.createElement("a",{"data-test":"globalDeselectAllStudiesButton",style:{marginLeft:10},onClick:function(){return e.store.studyListLogic.mainView.clearAllSelection()}},"Deselect all"))})})},903:function(e,t,n){"use strict";var r=n(0),o=n(9);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,l(t).apply(this,arguments))}var n,o,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement("span",null,"Queries are limited by gene and sample count. The product of the query's gene and sample count must be less than"," ",this.props.queryProductLimit.toLocaleString(),". You have selected ",this.props.sampleCount.toLocaleString()," samples, so you can have no more than"," ",Math.floor(this.props.queryProductLimit/this.props.sampleCount).toLocaleString()," ","genes in your query. Please"," ",r.createElement("a",{style:{color:"#ccc"},href:"mailto:".concat(this.props.email)},"let us know")," ","your use case(s) if you need to query more than that.")}}])&&a(n.prototype,o),c&&a(n,c),t}();p=u([o.observer],p),t.a=p},905:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(788),o=n(64),a=n(234),i=n(50);function l(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],l=window,s=new r.c(e);return s.singlePageAppSubmitRoutine=function(r){(r.cancer_study_list=r.cancer_study_list||r.cancer_study_id,delete r.cancer_study_id,e)&&((e.cancer_study_id!==r.cancer_study_id||e.cancer_study_list!==r.cancer_study_list||Object(i.a)(e.case_ids,"")!==Object(i.a)(r.case_ids,"")||e.case_set_id!==r.case_set_id)&&(r.comparison_createdGroupsSessionId=void 0,r.plots_horz_selection=void 0,r.plots_vert_selection=void 0,r.plots_coloring_selection=void 0));var c=s.physicalStudyIdsInSelection.length>1&&1===s.geneIds.length?o.b.CANCER_TYPES_SUMMARY:o.b.ONCOPRINT,u=t||new a.b(l.routingStore);u.updateURL(r,"results/".concat(c),n,!1),void 0===t&&u.destroy()},s}},918:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(787),i=n.n(a),l=n(9),s=n(1015),c=n(797),u=n(1),p=n(794),f=n.n(p),d=n(788),y=n(3),m=n(798),h=n(8);function b(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var w=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":E(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},P=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=v(this,_(t).apply(this,arguments))).ProfileToggle=function(t){var n=t.profile,o=t.type,a=t.label,l=t.checked,s=t.isGroupToggle;return r.createElement("label",null,r.createElement("input",{type:o,checked:l,onChange:function(t){return e.store.selectMolecularProfile(n,t.target.checked)},"data-test":n.molecularAlterationType}),r.createElement("span",{className:s?i.a.groupName:i.a.profileName},a),!s&&r.createElement(y.d,{mouseEnterDelay:0,placement:"right",overlay:r.createElement("div",{className:i.a.tooltip},n.description)},r.createElement(f.a,{className:i.a.infoIcon,name:"question-circle"})))},e}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,d["d"]),n=t,(o=[{key:"render",value:function(){return 1!==this.store.selectableSelectedStudyIds.length?null:r.createElement(c.b,{padded:!0,className:i.a.MolecularProfileSelector},r.createElement(m.a,{className:"sectionLabel",promises:[this.store.molecularProfiles]},"Select Genomic Profiles:"),r.createElement("div",{className:i.a.group,"data-test":"molecularProfileSelector"},this.renderGroup("MUTATION_EXTENDED","Mutation"),this.renderGroup("COPY_NUMBER_ALTERATION","Copy Number"),this.showGSVA&&this.renderGroup("GENESET_SCORE","GSVA scores"),this.renderGroup("MRNA_EXPRESSION","mRNA Expression"),this.renderGroup("METHYLATION","DNA Methylation"),this.renderGroup("METHYLATION_BINARY","DNA Methylation"),this.renderGroup("PROTEIN_LEVEL","Protein/phosphoprotein level"),!(!this.store.molecularProfiles.isComplete||this.store.molecularProfiles.result.length)&&r.createElement("strong",null,"No Genomic Profiles available for this Cancer Study")))}},{key:"renderGroup",value:function(e,t){var n=this,o=this.store.getFilteredProfiles(e);if(!o.length)return null;var a=o.map(function(e){return e.molecularProfileId}),l=u.intersection(this.store.selectedProfileIds,a).length>0,s=[];o.length>1&&!this.store.forDownloadTab&&s.push(r.createElement(this.ProfileToggle,{key:"altTypeCheckbox:"+e,profile:o[0],type:"checkbox",label:"".concat(t,". Select one of the profiles below:"),checked:l,isGroupToggle:!0}));var c=o.map(function(e){return r.createElement(n.ProfileToggle,{key:"profile:"+e.molecularProfileId,profile:e,type:n.store.forDownloadTab||o.length>1?"radio":"checkbox",label:e.name,checked:u.includes(n.store.selectedProfileIds,e.molecularProfileId),isGroupToggle:!1})});return this.store.forDownloadTab||1==o.length?s.push.apply(s,b(c)):s.push(r.createElement("div",{key:"group:"+e,className:i.a.group},c)),this.store.forDownloadTab?s:(l&&"MRNA_EXPRESSION"==e&&s.push(r.createElement("div",{key:s.length,className:i.a.zScore},"Enter a z-score threshold"," ",r.createElement("span",{dangerouslySetInnerHTML:{__html:["&","plusmn;"].join("")}}),r.createElement("input",{type:"text",value:this.store.zScoreThreshold,onChange:function(e){n.store.zScoreThreshold=e.target.value}}))),l&&"PROTEIN_LEVEL"==e&&s.push(r.createElement("div",{key:s.length,className:i.a.zScore},"Enter a z-score threshold"," ",r.createElement("span",{dangerouslySetInnerHTML:{__html:["&","plusmn;"].join("")}}),r.createElement("input",{type:"text",value:this.store.rppaScoreThreshold,onChange:function(e){n.store.rppaScoreThreshold=e.target.value}}))),s)}},{key:"showGSVA",get:function(){return h.b.serverConfig.skin_show_gsva}}])&&g(n.prototype,o),a&&g(n,a),t}(),O=P=w([l.observer],P),C=n(66);function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var N=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},R=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),k(this,D(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,d["d"]),n=t,(o=[{key:"render",value:function(){if(!this.store.isVirtualStudyQuery)return null;var e=[];return e.push(r.createElement(C.a,{key:"loading",isLoading:this.store.profileAvailability.isPending})),this.store.profileAvailability.isError?e.push(r.createElement("span",{key:"error"},"Error loading profiles for selected studies.")):this.store.profileAvailability.isComplete&&(e=e.concat(function(e,t){var n=[];e.mutation&&n.push(r.createElement(x,{key:"M",label:"Mutation",state:"mutation",store:t,dataTest:"M"}));e.cna&&n.push(r.createElement(x,{key:"C",label:"Copy number alterations",state:"cna",store:t,dataTest:"C"}));return n}(this.store.profileAvailability.result,this.store))),r.createElement(c.b,{padded:!0,className:i.a.DataTypePrioritySelector,"data-test":"dataTypePrioritySelector"},r.createElement(m.a,{className:"sectionLabel"},"Select Molecular Profiles:"),r.createElement(c.b,null,e))}}])&&T(n.prototype,o),a&&T(n,a),t}(),I=R=N([l.observer],R),x=Object(l.observer)(function(e){return r.createElement("label",{className:i.a.DataTypePriorityLabel},r.createElement("input",{type:"checkbox",checked:e.store.dataTypePriority[e.state]||!1,onChange:function(t){e.store.dataTypePriority[e.state]=t.currentTarget.checked},"data-test":e.dataTest}),e.label)});var M=n(15),L=n(2),G=[{id:"Prostate Cancer: AR Signaling",genes:["SOX9","RAN","TNK2","EP300","PXN","NCOA2","AR","NRIP1","NCOR1","NCOR2"]},{id:"Prostate Cancer: AR and steroid synthesis enzymes",genes:["AKR1C3","AR","CYB5A","CYP11A1","CYP11B1","CYP11B2","CYP17A1","CYP19A1","CYP21A2","HSD17B1","HSD17B10","HSD17B11","HSD17B12","HSD17B13","HSD17B14","HSD17B2","HSD17B3","HSD17B4","HSD17B6","HSD17B7","HSD17B8","HSD3B1","HSD3B2","HSD3B7","RDH5","SHBG","SRD5A1","SRD5A2","SRD5A3","STAR"]},{id:"Prostate Cancer: Steroid inactivating genes",genes:["AKR1C1","AKR1C2","AKR1C4","CYP3A4","CYP3A43","CYP3A5","CYP3A7","UGT2B15","UGT2B17","UGT2B7"]},{id:"Prostate Cancer: Down-regulated by androgen",genes:["BCHE","CDK8","CTBP1","ACKR3","DDC","DPH1","FN1","HES6","MMP16","MYC","PEG3","PIK3R3","PRKD1","SCNN1A","SDC4","SERPINI1","SLC29A1","ST7","TULP4"]},{id:"Glioblastoma: TP53 Pathway",genes:["CDKN2A","MDM2","MDM4","TP53"]},{id:"Glioblastoma: RTK/Ras/PI3K/AKT Signaling",genes:["EGFR","ERBB2","PDGFRA","MET","KRAS","NRAS","HRAS","NF1","SPRY2","FOXO1","FOXO3","AKT1","AKT2","AKT3","PIK3R1","PIK3CA","PTEN"]},{id:"Glioblastoma: RB Pathway",genes:["CDKN2A","CDKN2B","CDKN2C","CDK4","CDK6","CCND2","RB1"]},{id:"Ovarian Cancer: Oncogenes associated with epithelial ovarian cancer",genes:["RAB25","MECOM","EIF5A2","PRKCI","PIK3CA","KIT","FGF1","MYC","EGFR","NOTCH3","KRAS","AKT1","ERBB2","PIK3R1","CCNE1","AKT2","AURKA"]},{id:"Ovarian Cancer: Putative tumor-suppressor genes in epithelial ovarian cancer",genes:["DIRAS3","RASSF1","DLEC1","SPARC","DAB2","PLAGL1","RPS6KA2","PTEN","OPCML","BRCA2","ARL11","WWOX","TP53","DPH1","BRCA1","PEG3"]},{id:"General: Cell Cycle Control",genes:["RB1","RBL1","RBL2","CCNA1","CCNB1","CDK1","CCNE1","CDK2","CDC25A","CCND1","CDK4","CDK6","CCND2","CDKN2A","CDKN2B","MYC","CDKN1A","CDKN1B","E2F1","E2F2","E2F3","E2F4","E2F5","E2F6","E2F7","E2F8","SRC","JAK1","JAK2","STAT1","STAT2","STAT3","STAT5A","STAT5B"]},{id:"General: p53 signaling",genes:["TP53","MDM2","MDM4","CDKN2A","CDKN2B","TP53BP1"]},{id:"General: Notch signaling",genes:["ADAM10","ADAM17","APH1A","APH1B","ARRDC1","CIR1","CTBP1","CTBP2","CUL1","DLL1","DLL3","DLL4","DTX1","DTX2","DTX3","DTX3L","DTX4","EP300","FBXW7","HDAC1","HDAC2","HES1","HES5","HEYL","ITCH","JAG1","JAG2","KDM5A","LFNG","MAML1","MAML2","MAML3","MFNG","NCOR2","NCSTN","NOTCH1","NOTCH2","NOTCH3","NOTCH4","NRARP","NUMB","NUMBL","PSEN1","PSEN2","PSENEN","RBPJ","RBPJL","RFNG","SNW1","SPEN","HES2","HES4","HES7","HEY1","HEY2"]},{id:"General: DNA Damage Response",genes:["CHEK1","CHEK2","RAD51","BRCA1","BRCA2","MLH1","MSH2","ATM","ATR","MDC1","PARP1","FANCF"]},{id:"General: Other growth / proliferation signaling",genes:["CSF1","CSF1R","IGF1","IGF1R","FGF1","FGFR1","AURKA","DLEC1","PLAGL1","OPCML","DPH1"]},{id:"General: Survival / cell death regulation signaling",genes:["NFKB1","NFKB2","CHUK","DIRAS3","FAS","HLA-G","BAD","BCL2","BCL2L1","APAF1","CASP9","CASP8","CASP10","CASP3","CASP6","CASP7","GSK3B","ARL11","WWOX","PEG3","TGFB1","TGFBR1","TGFBR2"]},{id:"General: Telomere maintenance",genes:["TERC","TERT"]},{id:"General: RTK signaling family",genes:["EGFR","ERBB2","ERBB3","ERBB4","PDGFA","PDGFB","PDGFRA","PDGFRB","KIT","FGF1","FGFR1","IGF1","IGF1R","VEGFA","VEGFB","KDR"]},{id:"General: PI3K-AKT-mTOR signaling",genes:["PIK3CA","PIK3R1","PIK3R2","PTEN","PDPK1","AKT1","AKT2","FOXO1","FOXO3","MTOR","RICTOR","TSC1","TSC2","RHEB","AKT1S1","RPTOR","MLST8"]},{id:"General: Ras-Raf-MEK-Erk/JNK signaling",genes:["KRAS","HRAS","BRAF","RAF1","MAP3K1","MAP3K2","MAP3K3","MAP3K4","MAP3K5","MAP2K1","MAP2K2","MAP2K3","MAP2K4","MAP2K5","MAPK1","MAPK3","MAPK4","MAPK6","MAPK7","MAPK8","MAPK9","MAPK12","MAPK14","DAB2","RASSF1","RAB25"]},{id:"General: Regulation of ribosomal protein synthesis and cell growth",genes:["RPS6KA1","RPS6KA2","RPS6KB1","RPS6KB2","EIF5A2","EIF4E","EIF4EBP1","RPS6","HIF1A"]},{id:"General: Angiogenesis",genes:["VEGFA","VEGFB","KDR","CXCL8","CXCR1","CXCR2"]},{id:"General: Folate transport",genes:["SLC19A1","FOLR1","FOLR2","FOLR3","IZUMO1R"]},{id:"General: Invasion and metastasis",genes:["MMP1","MMP2","MMP3","MMP7","MMP9","MMP10","MMP11","MMP12","MMP13","MMP14","MMP15","MMP16","MMP17","MMP19","MMP21","MMP23B","MMP24","MMP25","MMP26","MMP27","MMP28","ITGB3","ITGAV","PTK2","CDH1","SPARC","WFDC2"]},{id:"General: TGF-β Pathway",genes:["TGFB1","TGFB2","TGFB3","TGFBR1","TGFBR2","TGFBR3","BMP2","BMP3","BMP4","BMP5","BMP6","BMP7","GDF2","BMP10","BMP15","BMPR1A","BMPR1B","BMPR2","ACVR1","ACVR1B","ACVR1C","ACVR2A","ACVR2B","ACVRL1","Nodal","GDF1","GDF11","INHA","INHBA","INHBB","INHBC","INHBE","SMAD2","SMAD3","SMAD1","SMAD5","SMAD4","SMAD9","SMAD6","SMAD7","SPTBN1","TGFBRAP1","ZFYVE9"]}],B=n(5),F=n.n(B),V=n(17),H=n.n(V),Q=n(21);n(1034),n(1035);function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e,t){return!t||"object"!==Y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var z=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Y(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},X=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,l)}s((r=r.apply(e,t||[])).next())})},J=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=U(this,q(t).call(this,e))).isLoading=!0,n.map_geneSets_selected=new L.ObservableMap,n.map_geneSets_selected.replace(e.initialSelection.map(function(e){return[e,!0]})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(t,o.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){var e=this;this.promisedTree=this.initTree(this.tree),this.promisedTree.then(function(t){return e.isLoading=!1,t})}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.scoreThreshold===e.scoreThreshold&&this.props.pvalueThreshold===e.pvalueThreshold&&this.props.percentile===e.percentile||(this.promisedTree=this.promisedTree.then(function(e){return t.isLoading=!0,t.replaceTree(e)}).then(function(e){return t.isLoading=!1,e})),this.props.searchValue!==e.searchValue&&(this.promisedTree=this.promisedTree.then(function(e){return t.searchTree(e,t.props.searchValue)}))}},{key:"transformHierarchyData",value:function(e){var t=e,n=[],r=0,o=!0,a=!1,i=void 0;try{for(var l,s=t[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var c=l.value,p=c.nodeName,f=c.parentNodeName?c.parentNodeName:"#";if(n.push({id:p,parent:f,text:p,li_attr:{name:p},geneset:!1,state:{opened:!0,selected:!1}}),u.has(c,"genesets")){var d=!0,y=!1,m=void 0;try{for(var h,b=c.genesets[Symbol.iterator]();!(d=(h=b.next()).done);d=!0){var g=h.value,v=r++,_=g.genesetId,S=g.description,E=g.representativeScore,w=g.representativePvalue,P=g.refLink,O="",C=_+'<span style="font-weight:normal;font-style:italic;"> '+(O=(O=O+"score = "+E.toFixed(2))+", p-value = "+(w=w<.005?w.toExponential(0):w.toFixed(2)))+"</span>";n.push({id:v.toString(),parent:p,text:C,state:{selected:!1},li_attr:{name:_},description:S,representativeScore:E,representativePvalue:w,refLink:P,geneset:!0})}}catch(e){y=!0,m=e}finally{try{d||null==b.return||b.return()}finally{if(y)throw m}}}}}catch(e){a=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw i}}return n}},{key:"initTree",value:function(e){return X(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Q.X)(this.props.gsvaProfile,this.props.percentile,this.props.scoreThreshold,this.props.pvalueThreshold,this.props.sampleListId);case 2:return n=t.sent,H()(e).jstree({search:{show_only_matches:!0,show_only_matches_children:!0},checkbox:{cascade_to_disabled:!1,cascade_to_hidden:!1},core:{themes:{icons:!1},check_callback:!0,data:this.transformHierarchyData(n)},plugins:["checkbox","search"]}),t.abrupt("return",e);case 5:case"end":return t.stop()}},t,this)}))}},{key:"destroyTree",value:function(e){H()(e).jstree(!0).destroy()}},{key:"replaceTree",value:function(e){return X(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.destroyTree(e),t.next=3,this.initTree(e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t,this)}))}},{key:"submitGeneSets",value:function(e){if(e){var t=H()(e).jstree("get_selected",!0),n=!0,r=!1,o=void 0;try{for(var a,i=t[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var l=a.value;l.original.geneset&&this.map_geneSets_selected.set(l.original.description,!0)}}catch(e){r=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}}return this.map_geneSets_selected}},{key:"searchTree",value:function(e,t){return H()(e).jstree(!0).search(t),e}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(C.a,{isLoading:this.isLoading}),o.a.createElement("div",{ref:function(t){return e.tree=t},style:{maxHeight:"380px",overflowY:"scroll"},"data-test":"gsva-tree-container"}),o.a.createElement("div",{style:{padding:"30px 0px"}},o.a.createElement("button",{className:"btn btn-primary btn-sm pull-right",style:{margin:"2px"},disabled:this.isLoading,onClick:function(){var t=e.submitGeneSets(e.tree);e.props.onSelect(t)}},"Select")))}}])&&K(n.prototype,r),a&&K(n,a),t}();z([L.observable],J.prototype,"isLoading",void 0);var Z=J=z([l.observer],J),$=n(149);function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ae=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":oe(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},ie=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=te(t).call(this,e))||"object"!==oe(o)&&"function"!=typeof o?ne(r):o).percentile=n.props.percentile,n.pvalueThreshold=String(n.props.pvalueThreshold),n.scoreThreshold=String(n.props.scoreThreshold),n.percentileOptions=[{label:"50%",value:50},{label:"75%",value:75},{label:"100%",value:100}],n.percentileChange=n.percentileChange.bind(ne(n)),n.applyFilter=n.applyFilter.bind(ne(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(t,r["Component"]),n=t,(o=[{key:"percentileChange",value:function(e){this.percentile=e?e.value:75}},{key:"applyFilter",value:function(){var e=this.pvalueThreshold?Number(this.pvalueThreshold):NaN,t=this.scoreThreshold?Number(this.scoreThreshold):NaN;Number.isNaN(e)||Number.isNaN(t)||this.props.onApply(this.percentile,e,t)}},{key:"render",value:function(){var e=this;return r.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center",width:"100%",background:"#eee",padding:"10px 10px"}},r.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.createElement("label",{htmlFor:"GSVAScore"},"GSVA score"),r.createElement("input",{id:"GSVAScore",type:"string",value:this.scoreThreshold,style:{width:160,height:36,padding:10},onChange:function(t){return e.scoreThreshold=t.target.value},step:"0.1"})),r.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.createElement("label",{htmlFor:"Pvalue"},"P-value"),r.createElement("input",{id:"Pvalue",type:"string",value:this.pvalueThreshold,style:{width:160,height:36,padding:10},onChange:function(t){return e.pvalueThreshold=t.target.value},step:"0.01",min:"0"})),r.createElement("div",null,r.createElement("label",{htmlFor:"PercentileScoreCalculation"},"Percentile for score calculation"),r.createElement($.default,{addLabelText:"Percentile for score calculation",style:{width:160,borderRadius:"2px"},clearable:!1,name:"PercentileScoreCalculation",value:this.percentile,options:this.percentileOptions,onChange:this.percentileChange})),r.createElement("div",null,r.createElement("button",{id:"filterButton",className:"btn btn-primary btn-sm",style:{padding:"20px 18px"},onClick:this.applyFilter},"Apply Filter")))}}])&&ee(n.prototype,o),a&&ee(n,a),t}();ae([L.observable],ie.prototype,"percentile",void 0),ae([L.observable],ie.prototype,"pvalueThreshold",void 0),ae([L.observable],ie.prototype,"scoreThreshold",void 0);var le=ie=ae([l.observer],ie);function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pe(e,t){return(pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var de=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":fe(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},ye=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=ce(t).call(this,e))||"object"!==fe(o)&&"function"!=typeof o?ue(r):o).percentile=75,n.pvalueThreshold=.05,n.scoreThreshold=.5,n.searchValue="",n.updateSelectionParameters=n.updateSelectionParameters.bind(ue(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pe(e,t)}(t,r["Component"]),n=t,(o=[{key:"updateSelectionParameters",value:function(e,t,n){this.percentile=e,this.pvalueThreshold=t,this.scoreThreshold=n}},{key:"render",value:function(){var e=this;return r.createElement("div",null,r.createElement("text",null,"Search hierarchy"),r.createElement("div",{className:"form-group has-feedback input-group-sm",style:{display:"inline-block"}},r.createElement("input",{type:"text",id:"geneset-hierarchy-search",className:"form-control tableSearchInput",style:{width:768},value:this.searchValue,onChange:function(t){return e.searchValue=t.target.value}}),r.createElement("span",{className:"fa fa-search form-control-feedback","aria-hidden":"true"})),r.createElement(le,{percentile:this.percentile,pvalueThreshold:this.pvalueThreshold,scoreThreshold:this.scoreThreshold,onApply:this.updateSelectionParameters}),r.createElement(Z,{initialSelection:this.props.initialSelection,scoreThreshold:this.scoreThreshold,pvalueThreshold:this.pvalueThreshold,percentile:this.percentile,gsvaProfile:this.props.gsvaProfile,sampleListId:this.props.sampleListId,searchValue:this.searchValue,onSelect:this.props.onSelect}))}}])&&se(n.prototype,o),a&&se(n,a),t}();de([L.observable],ye.prototype,"percentile",void 0),de([L.observable],ye.prototype,"pvalueThreshold",void 0),de([L.observable],ye.prototype,"scoreThreshold",void 0),de([L.observable],ye.prototype,"searchValue",void 0);var me=ye=de([l.observer],ye),he=n(172),be=n(96),ge=n(49),ve=n(14);function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ee(e,t){return!t||"object"!==Te(t)&&"function"!=typeof t?we(e):t}function we(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pe(e){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Oe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ce(e,t)}function Ce(e,t){return(Ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Te(e){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ke=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Te(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},De=function(e){function t(){return Se(this,t),Ee(this,Pe(t).apply(this,arguments))}return Oe(t,be["b"]),t}(),je=function(e){function t(e){var n;return Se(this,t),(n=Ee(this,Pe(t).call(this,e))).percentileOptions=[{label:"50%",value:"50"},{label:"75%",value:"75"},{label:"100%",value:"100"}],n.percentileChange=n.percentileChange.bind(we(n)),n.updateSelectionFromPlot=n.updateSelectionFromPlot.bind(we(n)),n}var n,o,a;return Oe(t,d["d"]),n=t,(o=[{key:"percentileChange",value:function(e){this.store.volcanoPlotSelectedPercentile=e||{label:"75%",value:"75"}}},{key:"updateSelectionFromPlot",value:function(e,t){var n=this,r=e&&e[0].data?e[0].data:[];this.store.volcanoPlotTableData.result.map(function(e){var t=e.representativeScore,o=e.representativePvalue,a=e.name,i=t,l=-Math.log(o)/Math.log(10),s=!0,c=!1,u=void 0;try{for(var p,f=r[Symbol.iterator]();!(s=(p=f.next()).done);s=!0){var d=p.value;d.x===i&&d.y===l&&n.store.map_genesets_selected_volcano.set(a,!0)}}catch(e){c=!0,u=e}finally{try{s||null==f.return||f.return()}finally{if(c)throw u}}})}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:i.a.GenesetsVolcanoSelectorWindow,style:{height:"400px"}},r.createElement("div",{style:{float:"left"},className:"form-inline"},r.createElement("label",{htmlFor:"PercentileScoreCalculation"},"Percentile for score calculation:"),r.createElement("span",{style:{display:"inline-block",verticalAlign:"middle",marginLeft:"1em"}},r.createElement($.default,{addLabelText:"Percentile for score calculation",style:{width:160,borderRadius:"2px"},clearable:!1,name:"PercentileScoreCalculation",value:this.store.volcanoPlotSelectedPercentile,options:this.percentileOptions,onChange:this.percentileChange})),r.createElement(C.a,{isLoading:!(this.props.plotData&&this.props.maxY&&this.store.volcanoPlotTableData.isComplete&&this.props.data)}),this.store.volcanoPlotGraphData&&this.store.minYVolcanoPlot&&this.props.plotData&&this.props.maxY&&this.store.volcanoPlotTableData.isComplete&&this.props.data&&r.createElement(ve.VictoryChart,{theme:y.a,width:510,height:350,containerComponent:r.createElement(ve.VictorySelectionContainer,{onSelection:this.updateSelectionFromPlot,selectionStyle:{fill:"tomato",fillOpacity:.5,stroke:"tomato",strokeWidth:2}})},r.createElement(ve.VictoryAxis,{crossAxis:!0,domain:[this.xAxisMinValue,this.xAxisMaxValue],tickValues:this.xAxisTickValues,style:{axisLabel:{padding:35}},label:"GSVA score",offsetY:50,standalone:!1}),r.createElement(ve.VictoryAxis,{dependentAxis:!0,crossAxis:!0,domain:[0,this.props.maxY],style:{axisLabel:{padding:35},stroke:"none"},label:"-log10 p-value",offsetX:50,standalone:!1}),r.createElement(ve.VictoryLabel,{text:"significance",datum:{x:this.xAxisTickValues[this.xAxisTickValues.length-1],y:1.3},textAnchor:"start"}),r.createElement(ve.VictoryLine,{style:{data:{stroke:"black",strokeDasharray:5},parent:{border:"dotted 1px #f00"}},data:[{x:this.xAxisMinValue,y:1.3},{x:this.xAxisTickValues[this.xAxisTickValues.length-1],y:1.3}]}),r.createElement(ve.VictoryLine,{style:{data:{stroke:"rgb(144, 164, 174)"},parent:{border:"1px dashed solid"}},data:[{x:0,y:0},{x:0,y:this.props.maxY}]}),r.createElement(ve.VictoryScatter,{style:{data:{fill:function(e){return e?e.fill:""},fillOpacity:.3}},size:3,data:this.props.plotData}))),r.createElement("div",{style:{float:"right",height:"356.5px",overflowY:"scroll",width:"650px"}},r.createElement(C.a,{isLoading:!(this.store.volcanoPlotTableData.isComplete&&this.props.data)}),this.store.volcanoPlotTableData.isComplete&&this.props.data&&r.createElement(De,{data:this.props.data,columns:[{name:"Gene Sets",render:function(e){return r.createElement("span",null,e.name)},sortBy:function(e){return e.name},filter:function(e,t,n){return e.name.toUpperCase().indexOf(n)>-1}},{name:"GSVA Score",render:function(e){return r.createElement("span",null,e.representativeScore.toFixed(2))},sortBy:function(e){return e.representativeScore}},{name:"P Value",render:function(e){return r.createElement("span",null,Object(ge.g)(e.representativePvalue,2,.1))},sortBy:function(e){return e.representativePvalue}},{name:"Selected",render:function(t){return r.createElement(he.a,{checked:!!e.store.map_genesets_selected_volcano.get(t.name),onChange:function(n){return e.store.map_genesets_selected_volcano.set(t.name,n.target.checked)}})}}],initialSortColumn:"P Value",initialSortDirection:"asc",showPagination:!0,initialItemsPerPage:100,showColumnVisibility:!1,showFilter:!0,showCopyDownload:!1})),r.createElement("div",{style:{float:"right"}},this.store.volcanoPlotTableData.isComplete&&this.props.data&&r.createElement("button",{style:{marginTop:15,float:"right"},className:"btn btn-primary btn-sm pull-right",onClick:function(){return e.props.onSelect(e.store.map_genesets_selected_volcano)}},"Add selection to the query"),this.store.volcanoPlotTableData.isComplete&&this.props.data&&r.createElement("button",{style:{marginRight:15,marginTop:15,float:"right"},className:"btn btn-primary btn-sm pull-right",onClick:function(){return e.store.map_genesets_selected_volcano.replace(e.props.initialSelection.map(function(e){return[e,!0]}))}},"Clear selection")))}},{key:"xAxisTickSize",get:function(){if(this.props.plotData&&this.props.plotData.length>0){var e=u.maxBy(this.props.plotData,function(e){return e.x}).x,t=u.minBy(this.props.plotData,function(e){return e.x}).x,n=Math.max(e,Math.abs(t));return(n=Math.round(n))/2}return.5}},{key:"xAxisTickValues",get:function(){return[-2*this.xAxisTickSize,-this.xAxisTickSize,0,this.xAxisTickSize,2*this.xAxisTickSize]}},{key:"xAxisMaxValue",get:function(){return 2.5*this.xAxisTickSize}},{key:"xAxisMinValue",get:function(){return-2.5*this.xAxisTickSize}}])&&_e(n.prototype,o),a&&_e(n,a),t}();ke([L.action],je.prototype,"updateSelectionFromPlot",null),ke([L.computed],je.prototype,"xAxisTickSize",null),ke([L.computed],je.prototype,"xAxisTickValues",null),ke([L.computed],je.prototype,"xAxisMaxValue",null),ke([L.computed],je.prototype,"xAxisMinValue",null);var Ae=je=ke([l.observer],je);function Ne(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ie(e,t){return!t||"object"!==Le(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xe(e){return(xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Me(e,t){return(Me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Le(e){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ge=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Le(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},Be=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ie(this,xe(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Me(e,t)}(t,d["d"]),n=t,(o=[{key:"render",value:function(){var e=this;return r.createElement(c.b,{padded:!0,overflow:!0,className:i.a.GeneSetSelector},r.createElement(m.a,{className:"sectionLabel"},"Enter Gene Sets:"),r.createElement(c.a,{overflow:!0},r.createElement(c.b,{padded:!0,className:i.a.buttonRow},r.createElement("button",{className:"btn btn-default btn-sm","data-test":"GENESET_HIERARCHY_BUTTON",onClick:function(){return e.store.showGenesetsHierarchyPopup=!0}},"Select Gene Sets from Hierarchy"),r.createElement("button",{className:"btn btn-default btn-sm","data-test":"GENESET_VOLCANO_BUTTON",onClick:function(){return e.store.showGenesetsVolcanoPopup=!0}},"Select Gene Sets from Volcano Plot")),r.createElement("textarea",{ref:this.textAreaRef,className:F()(i.a.geneSet,this.store.genesetQuery?i.a.notEmpty:i.a.empty),rows:5,cols:80,placeholder:"Enter Gene Sets",title:"Enter Gene Sets",value:this.store.genesetQuery,onChange:function(t){return e.store.genesetQuery=t.currentTarget.value},"data-test":"GENESETS_TEXT_AREA"}),r.createElement(M.Modal,{className:F()("cbioportal-frontend",i.a.GenesetsSelectorWindow),show:this.store.showGenesetsHierarchyPopup,onHide:function(){return e.store.showGenesetsHierarchyPopup=!1}},r.createElement(M.Modal.Header,{closeButton:!0},r.createElement(M.Modal.Title,null,"Select Gene Sets From Hierarchy")),r.createElement(M.Modal.Body,null,r.createElement(me,{initialSelection:this.store.genesetIds,gsvaProfile:this.store.getFilteredProfiles("GENESET_SCORE")[0].molecularProfileId,sampleListId:this.store.defaultSelectedSampleListId,onSelect:function(t){e.store.applyGenesetSelection(t),e.store.showGenesetsHierarchyPopup=!1}}))),r.createElement(M.Modal,{className:F()("cbioportal-frontend",i.a.GenesetsVolcanoSelectorWindow),show:this.store.showGenesetsVolcanoPopup,onHide:function(){return e.store.showGenesetsVolcanoPopup=!1},onShow:function(){return e.store.map_genesets_selected_volcano.replace(e.store.genesetIds.map(function(e){return[e,!0]}))}},r.createElement(M.Modal.Header,{closeButton:!0},r.createElement(M.Modal.Title,null,"Select Gene Sets From Volcano Plot")),r.createElement(M.Modal.Body,null,r.createElement(Ae,{initialSelection:this.store.genesetIds,data:this.store.volcanoPlotTableData.result,plotData:this.store.volcanoPlotGraphData,maxY:this.store.minYVolcanoPlot?-Math.log(this.store.minYVolcanoPlot)/Math.log(10):void 0,onSelect:function(t){e.store.addToGenesetSelection(t),e.store.showGenesetsVolcanoPopup=!1}})))))}},{key:"selectedGeneListOption",get:function(){var e=this,t=this.geneListOptions.find(function(t){return t.value===e.store.geneQuery});return t?t.value:""}},{key:"geneListOptions",get:function(){var e=G;if(h.b.serverConfig.query_sets_of_genes){var t=h.a.parseQuerySetsOfGenes(h.b.serverConfig.query_sets_of_genes);t&&(e=t)}return[{label:"User-defined List",value:""}].concat(Ne(e.map(function(e){return{label:"".concat(e.id," (").concat(e.genes.length," genes)"),value:e.genes.join(" ")}})))}},{key:"textAreaRef",get:function(){var e=this;if(this.store.geneQueryErrorDisplayStatus===d.b.ShouldFocus)return function(t){var n=e.store.oql.error;t&&n&&(t.focus(),t.setSelectionRange(n.start,n.end),e.store.geneQueryErrorDisplayStatus=d.b.Focused)}}}])&&Re(n.prototype,o),a&&Re(n,a),t}();Ge([L.computed],Be.prototype,"selectedGeneListOption",null),Ge([L.computed],Be.prototype,"geneListOptions",null),Ge([L.computed],Be.prototype,"textAreaRef",null);var Fe=Be=Ge([l.observer],Be),Ve=n(18),He=n(1036),Qe=n(838),Ke=n(76),Ue=n.n(Ke),qe=n(127),We=n(20),Ye=n(310);function ze(e){return(ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xe(){return(Xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ze(e){return(Ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function et(e,t){return(et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n(1044);var tt=n(194);function nt(e,t){var n=[];return t||(Object.keys(e[0]).forEach(function(e){return n.push(e,",")}),n.pop(),n.push("\r\n")),e.forEach(function(e){u.each(e,function(e){n.push(e,",")}),n.pop(),n.push("\r\n")}),n.join("")}var rt=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=Ze(t).call(this,e),(n=!o||"object"!==ze(o)&&"function"!=typeof o?$e(r):o).downloadData=function(){n.props.downloadDataGenerator?Ue()(nt(n.props.downloadDataGenerator()||[],n.props.downloadDataContainsHeader),n.props.downloadFilename):Ue()(nt(n.props.tableData||[],n.props.downloadDataContainsHeader),n.props.downloadFilename)},n.handleInput=n.handleInput.bind($e(n)),n.getText=n.getText.bind($e(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&et(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){this.props.showCopyAndDownload&&this._copyButton&&this.bindCopyButton()}},{key:"bindCopyButton",value:function(){new tt(this._copyButton,{text:function(){return this.getText()}.bind(this)})}},{key:"handleInput",value:function(e){var t=this;null!==this.searchTimeout&&(clearTimeout(this.searchTimeout),this.searchTimeout=null);var n=e.currentTarget.value;this.searchTimeout=setTimeout(function(){t.props.handleInput&&t.props.handleInput(n)},this.props.searchDelayMs)}},{key:"render",value:function(){var e=this,t=r.createElement("div",{className:"rc-tooltip-arrow-inner"});return r.createElement("div",{className:(this.props.className||"")+""},r.createElement(M.ButtonToolbar,null,r.createElement(We.If,{condition:this.props.showPagination},r.createElement(qe.a,Xe({className:"pull-left"},this.props.paginationProps))),r.createElement(We.If,{condition:this.props.showHideShowColumnButton},r.createElement(Ye.a,this.props.columnVisibilityProps)),r.createElement(We.If,{condition:this.props.showCopyAndDownload},r.createElement(M.ButtonGroup,{className:this.props.copyDownloadClassName,style:{marginLeft:10}},r.createElement(y.d,{overlay:r.createElement("span",null,"Copy"),placement:"top",mouseLeaveDelay:0,mouseEnterDelay:.5,arrowContent:t},r.createElement("button",{ref:function(t){e._copyButton=t},className:"btn btn-sm btn-default","option-text":this.getText},r.createElement("i",{className:"fa fa-clipboard"}))),r.createElement(y.d,{overlay:r.createElement("span",null,"Download CSV"),mouseLeaveDelay:0,mouseEnterDelay:.5,placement:"top",arrowContent:t},r.createElement(M.Button,{className:"btn-sm",onClick:this.downloadData},r.createElement("i",{className:"fa fa-cloud-download"}))))),r.createElement(We.If,{condition:this.props.showSearch},r.createElement("div",{className:"".concat(this.props.searchClassName," form-group has-feedback input-group-sm"),style:{display:"inline-block",marginLeft:10}},r.createElement("input",{type:"text",onInput:this.handleInput,className:"form-control tableSearchInput",style:{width:200}}),r.createElement("span",{className:"fa fa-search form-control-feedback","aria-hidden":"true"})))))}},{key:"getText",value:function(){return this.props.downloadDataGenerator?nt(this.props.downloadDataGenerator()||[],this.props.downloadDataContainsHeader):nt(this.props.tableData||[],this.props.downloadDataContainsHeader)}}])&&Je(n.prototype,o),a&&Je(n,a),t}();rt.defaultProps={showSearch:!1,showCopyAndDownload:!0,showPagination:!1,searchClassName:"",copyDownloadClassName:"",downloadFilename:"patient-clinical-attributes.tsv",downloadDataContainsHeader:!1,paginationProps:{},columnVisibilityProps:{},searchDelayMs:400};n(1045);function ot(e){return(ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function at(){return(at=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function it(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lt(e){return(lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function st(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ct(e,t){return(ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ut=function(e){function t(e){var n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=lt(t).call(this,e),(n=!o||"object"!==ot(o)&&"function"!=typeof o?st(r):o).rawDataSelector=function(e,t){return t.rawData},n.columnsSelector=function(e,t){return t.columns},n.columnVisibilitySelector=function(e){return e.columnVisibility},n.visibleColsSelector=Object(He.createSelector)(n.columnsSelector,n.columnVisibilitySelector,function(e,t){return n.resolveVisible(e,t)}),n.sortedVisibleColsSelector=Object(He.createSelector)(n.visibleColsSelector,function(e){return n.resolveOrder(e)}),n.sortedColsSelector=Object(He.createSelector)(n.columnsSelector,function(e){return n.resolveOrder(e)}),n.columnVisibilityArraySelector=Object(He.createSelector)(n.sortedColsSelector,n.columnVisibilitySelector,function(e,t){return n.resolveColumnVisibility(n.colNameToId,e,t)}),n.downloadDataSelector=Object(He.createSelector)(n.sortedColsSelector,n.columnVisibilitySelector,n.rawDataSelector,function(e,t,r){return n.generateDownloadData(e,t,r)}),n.headersSelector=Object(He.createSelector)(n.sortedVisibleColsSelector,function(e){return n.generateHeaders(e)}),n.rowsSelector=Object(He.createSelector)(n.sortedColsSelector,n.rawDataSelector,function(e,t){return n.generateRows(e,t)}),n.colNameToId=n.mapColNameToId(e.columns),n.state={columnVisibility:t.resolveVisibility(e.columns,e.rawData),sortableColumns:n.resolveSortable(n.props.columns||{}),filterableColumns:n.resolveFilterable(n.props.columns||{}),filter:"",itemsPerPage:n.props.initItemsPerPage||25,currentPage:n.props.initPage||0},n.filteredDataLength=e.rawData.length,n.shouldSetState=!1;var a=Qe.Table.prototype.applyFilter;Qe.Table.prototype.applyFilter=function(){var e,t=a.apply(this,arguments);return(e=t.length)!==n.filteredDataLength&&(n.filteredDataLength=e,n.shouldSetState=!0),t};var i=Qe.Table.prototype.render;return Qe.Table.prototype.render=function(){var e,t=i.apply(this,arguments);return e=t.props.children.find(function(e){return"tbody"===e.type}).props.children||[],n.props.onVisibleRowsChange&&n.props.onVisibleRowsChange(e.map(function(e){return e.props.rowData})),t},n.handleDownload=n.handleDownload.bind(st(n)),n.handleFilterInput=n.handleFilterInput.bind(st(n)),n.handleVisibilityToggle=n.handleVisibilityToggle.bind(st(n)),n.handleChangeItemsPerPage=n.handleChangeItemsPerPage.bind(st(n)),n.handlePreviousPageClick=n.handlePreviousPageClick.bind(st(n)),n.handleNextPageClick=n.handleNextPageClick.bind(st(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ct(e,t)}(t,r["Component"]),n=t,a=[{key:"resolveVisibility",value:function(e,t){var n={};return e?(u.each(u.keys(e),function(r){var o=e[r],a="visible";o.visible&&(a=u.isFunction(o.visible)?o.visible(t,o.columnProps):o.visible),"excluded"!==a&&(n[r]=a)}),n):n}},{key:"columnSort",value:function(e,t){return e.priority&&t.priority?e.priority-t.priority:e.priority?-1:t.priority?1:e.name>t.name?1:-1}}],(o=[{key:"render",value:function(){var e=this.props,t=e.className,n=e.reactTableProps,o=e.headerControlsProps,a=(this.columnVisibilityArraySelector(this.state,this.props),this.headersSelector(this.state,this.props)),i=this.rowsSelector(this.state,this.props),l=this.rowIndexesOnPage(),s=l.firstIndex,c=l.numIndexes;return r.createElement("div",{className:t},r.createElement(rt,at({showCopyAndDownload:!0,showHideShowColumnButton:!0,handleInput:this.handleFilterInput,downloadDataGenerator:this.handleDownload,downloadDataContainsHeader:!0,downloadFilename:"mutations.csv",showSearch:!0,columnVisibilityProps:{className:"pull-right",onColumnToggled:this.handleVisibilityToggle},paginationProps:{className:"pull-right",itemsPerPage:this.state.itemsPerPage,currentPage:this.state.currentPage,onChangeItemsPerPage:this.handleChangeItemsPerPage,onPreviousPageClick:this.handlePreviousPageClick,onNextPageClick:this.handleNextPageClick,textBetweenButtons:"".concat(this.filteredDataLength?s+1:0,"-").concat(s+c," of ").concat(this.filteredDataLength),previousPageDisabled:0===this.state.currentPage,nextPageDisabled:this.state.currentPage>=this.numPages()-1}},o)),r.createElement(Qe.Table,at({sortable:this.state.sortableColumns,filterable:this.state.filterableColumns,filterBy:this.state.filter,itemsPerPage:-1===this.state.itemsPerPage?void 0:this.state.itemsPerPage,currentPage:this.state.currentPage},n),a,i))}},{key:"componentWillUpdate",value:function(e,t){0===t.filter.length&&(this.filteredDataLength=this.props.rawData.length)}},{key:"componentDidUpdate",value:function(){this.shouldSetState&&(this.shouldSetState=!1,this.setState({currentPage:Math.max(0,Math.min(this.state.currentPage,this.numPages()-1))}))}},{key:"rowIndexesOnPage",value:function(){var e,t;return-1===this.state.itemsPerPage?(e=0,t=this.filteredDataLength):(e=this.state.itemsPerPage*this.state.currentPage,t=Math.min(this.filteredDataLength-e,this.state.itemsPerPage)),{firstIndex:e,numIndexes:t}}},{key:"numPages",value:function(e){return-1===(e=e||this.state.itemsPerPage)?1:Math.ceil(this.filteredDataLength/e)}},{key:"mapColNameToId",value:function(e){var t={};return e&&u.each(e,function(e,n){e.name&&(t[e.name],t[e.name]=n)}),t}},{key:"resolveOrder",value:function(e){return e?u.values(e).sort(t.columnSort):[]}},{key:"resolveColumnVisibility",value:function(e,t,n){var r=[];return u.each(t,function(t){var o=e[t.name];n[o]&&r.push({id:o,name:t.name,visibility:n[o]})}),r}},{key:"generateHeaders",value:function(e){var t=[];return u.each(e,function(e){var n=e.header||r.createElement("span",null,e.name);if(e.description){var o=r.createElement("div",{className:"rc-tooltip-arrow-inner"});n=r.createElement(y.d,{overlay:r.createElement("span",null,e.description),placement:"top",arrowContent:o},n)}t.push(r.createElement(Qe.Th,{key:e.name,column:e.name},n))}),t}},{key:"generateDownloadData",value:function(e,t,n){var r=this,o=[];return o[0]=[],u.each(e,function(e){var n=r.colNameToId[e.name];n in t&&"excluded"!==t[n]&&o[0].push(e.name)}),u.each(n,function(a,i){var l=[];u.each(e,function(e){var o=r.colNameToId[e.name];if(o in t&&"excluded"!==t[o]){var i=r.getColumnData(e,n,a);e.downloader?l.push(e.downloader(i,e.columnProps)):l.push((i.columnData||"").toString())}}),o.push(l)}),o}},{key:"getColumnData",value:function(e,t,n){var r={name:e.name,tableData:t,rowData:n,columnData:null};if(e.columnDataFunction)r.columnData=e.columnDataFunction(r);else if(e.dataField){var o=null;(o=u.isArray(r.rowData)&&r.rowData.length>0?r.rowData[0]:r.rowData)&&(r.columnData=o[e.dataField])}return r}},{key:"generateRows",value:function(e,t){var n=this,o=[];return u.each(t,function(a,i){var l=n.generateColumns(e,t,a);o.push(r.createElement(Qe.Tr,{key:i,rowData:a},l))}),o}},{key:"generateColumns",value:function(e,t,n){var r=this,o=[];return u.each(e,function(e){var a=r.getColumnData(e,t,n);o.push(r.generateColumn(a,e))}),o}},{key:"generateColumn",value:function(e,t){return t.formatter?t.formatter(e,t.columnProps):r.createElement(Qe.Td,{key:t.name,column:t.name,value:e.columnData},e.columnData)}},{key:"resolveVisible",value:function(e,t){var n={};return u.each(u.keys(t),function(r){"visible"===t[r]&&(n[r]=e[r])}),n}},{key:"resolveSortable",value:function(e){var t=[];return u.each(e,function(e){u.isFunction(e.sortable)?t.push({column:e.name,sortFunction:e.sortable}):e.sortable&&t.push(e.name)}),t}},{key:"resolveFilterable",value:function(e){var t=[];return u.each(e,function(e){u.isFunction(e.filterable)?t.push({column:e.name,filterFunction:e.filterable}):e.filterable&&t.push(e.name)}),t}},{key:"handleFilterInput",value:function(e){this.setState({filter:e})}},{key:"handleDownload",value:function(){return this.downloadDataSelector(this.state,this.props)}},{key:"handleVisibilityToggle",value:function(e){var t=e,n=this.state.columnVisibility[t],r=Object.assign({},this.state.columnVisibility);"hidden"===n?n="visible":"visible"===n&&(n="hidden"),r[t]=n,this.setState({columnVisibility:r})}},{key:"handleChangeItemsPerPage",value:function(e){this.setState({itemsPerPage:e,currentPage:Math.min(this.state.currentPage,this.numPages(e)-1)})}},{key:"handlePreviousPageClick",value:function(){this.setState({currentPage:Math.max(0,this.state.currentPage-1)})}},{key:"handleNextPageClick",value:function(){this.setState({currentPage:Math.min(this.state.currentPage+1,this.numPages()-1)})}}])&&it(n.prototype,o),a&&it(n,a),t}();function pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ft(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dt(e,t){return!t||"object"!==bt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yt(e){return(yt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ht(e,t)}function ht(e,t){return(ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bt(e){return(bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var gt=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":bt(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},vt=function(e){function t(){return ft(this,t),dt(this,yt(t).apply(this,arguments))}return mt(t,ut),t}(),_t=function(e){function t(e){var n;return ft(this,t),(n=dt(this,yt(t).call(this,e))).map_geneSymbol_selected=L.observable.map(),n.columns={hugoGeneSymbol:{priority:1,dataField:"hugoGeneSymbol",name:"Gene Symbol",sortable:!0,filterable:!0},numberOfMutations:{priority:2,dataField:"numberOfMutations",name:"Num Mutations",sortable:!0,filterable:!0},qValue:{priority:3,dataField:"qValue",name:"Q-Value",sortable:!0,filterable:!0,formatter:function(e){var t=e.name,n=e.columnData;return r.createElement(Qe.Td,{key:t,column:t,value:n},Object(ge.g)(n,2,.1))}},selected:{name:"Selected",priority:4,sortable:!1,filterable:!1,header:r.createElement("div",{className:i.a.selectionColumnHeader},r.createElement("span",null,"All"),r.createElement(l.Observer,null,function(){return r.createElement(he.a,{checked:n.selectedGenes.length>0,indeterminate:n.selectedGenes.length>0&&n.selectedGenes.length<n.allGenes.length,onChange:function(e){return n.selectAll(e.target.checked)}})})),formatter:function(e){var t=e.name,o=e.rowData;return r.createElement(Qe.Td,{key:t,column:t},!!o&&r.createElement("div",{className:i.a.selectionColumnCell},r.createElement(l.Observer,null,function(){return r.createElement(he.a,{checked:!!n.map_geneSymbol_selected.get(o.hugoGeneSymbol),onChange:function(e){return n.map_geneSymbol_selected.set(o.hugoGeneSymbol,e.target.checked)}})})))}}},n.map_geneSymbol_selected.replace(e.initialSelection.map(function(e){return[e,!0]})),n}var n,o,a;return mt(t,r["Component"]),n=t,(o=[{key:"selectAll",value:function(e){var t=!0,n=!1,r=void 0;try{for(var o,a=this.allGenes[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value;this.map_geneSymbol_selected.set(i,e)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:i.a.MutSigGeneSelector},r.createElement(vt,{itemsName:"genes",initItemsPerPage:10,columns:this.columns,rawData:this.props.data,headerControlsProps:{showCopyAndDownload:!1,showHideShowColumnButton:!1,showPagination:!0},reactTableProps:{className:"table table-striped table-border-top",hideFilterInput:!0,defaultSort:this.columns.qValue.name}}),r.createElement("div",null,r.createElement("button",{style:{marginTop:20},className:"btn btn-primary btn-sm pull-right",onClick:function(){return e.props.onSelect(e.map_geneSymbol_selected)}},"Select")))}},{key:"allGenes",get:function(){return u.uniq(this.props.data.map(function(e){return e.hugoGeneSymbol}))}},{key:"selectedGenes",get:function(){var e=this;return this.allGenes.filter(function(t){return e.map_geneSymbol_selected.get(t)})}}])&&pt(n.prototype,o),a&&pt(n,a),t}();gt([L.computed],_t.prototype,"allGenes",null),gt([L.computed],_t.prototype,"selectedGenes",null),gt([L.action],_t.prototype,"selectAll",null);var St=_t=gt([l.observer],_t);function Et(e){return e?e.genes.map(function(e){return e.hugoGeneSymbol}):[]}var wt=new RegExp("^([0-9]{1,2})([pq])([0-9]{1,2})(?:.?)([0-9]{0,2})$");function Pt(e,t){var n=e.match(wt),r=t.match(wt);return n&&r?parseInt(n[1],10)-parseInt(r[1],10)!=0?parseInt(n[1],10)-parseInt(r[1],10):"p"===n[2]&&"q"===r[2]?-1:"q"===n[2]&&"p"===r[2]?1:n[2]===r[2]?parseInt(n[3],10)-parseInt(r[3],10):0:+!!n-+!!r}function Ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ct(e,t,n){return t&&Ot(e.prototype,t),n&&Ot(e,n),e}function Tt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kt(e,t){return!t||"object"!==Nt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dt(e){return(Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&At(e,t)}function At(e,t){return(At=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Nt(e){return(Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Rt=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Nt(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},It=function(e){function t(){return Tt(this,t),kt(this,Dt(t).apply(this,arguments))}return jt(t,ut),t}(),xt=function(e){function t(e){var n;return Tt(this,t),(n=kt(this,Dt(t).call(this,e))).map_geneSymbol_selected=L.observable.map(),n.columns={amp:{priority:1,columnDataFunction:function(e){var t=e.rowData;return t&&(t.amp?"Amp":"Del")},name:"Amp Del",sortable:!0,filterable:!0,header:r.createElement("div",{className:F()(i.a.header,i.a.amp,i.a.del)},r.createElement("span",{className:i.a.amp},"Amp"),r.createElement("span",{className:i.a.del},"Del")),formatter:function(e){var t=e.name,n=e.rowData,o=e.columnData;return r.createElement(Qe.Td,{key:t,column:t,value:o},!!n&&r.createElement("div",{className:n.amp?i.a.amp:i.a.del}))}},chromosome:{priority:2,dataField:"chromosome",name:"Chr",sortable:!0,filterable:!0},cytoband:{priority:3,dataField:"cytoband",name:"Cytoband",sortable:Pt,filterable:!0},"#":{priority:4,columnDataFunction:function(e){return Et(e.rowData).length},name:"#",sortable:!0,filterable:!0},genes:{priority:5,columnDataFunction:function(e){return Et(e.rowData).join(" ")},name:"Genes",sortable:function(e,t){return e.length-t.length||+(e>t)-+(e<t)},filterable:!0,formatter:function(e){var t=e.name,o=e.rowData,a=e.columnData;return r.createElement(Qe.Td,{key:t,column:t,value:a},r.createElement(Lt,{gistic:o,map_geneSymbol_selected:n.map_geneSymbol_selected}))}},qValue:{priority:6,dataField:"qValue",name:"Q-Value",sortable:!0,filterable:!0,formatter:function(e){var t=e.name,n=(e.rowData,e.columnData);return r.createElement(Qe.Td,{key:t,column:t,value:n},Object(ge.g)(n,2,.1))}}},n.map_geneSymbol_selected.replace(e.initialSelection.map(function(e){return[e,!0]})),n}return jt(t,r["Component"]),Ct(t,[{key:"render",value:function(){var e=this;return r.createElement("div",{className:i.a.GisticGeneSelector},r.createElement("span",null,"Click on a gene to ",r.createElement("span",{className:F()(i.a.geneToggle,i.a.selected,i.a.simulateHovered)},"select")," it."),r.createElement(It,{className:i.a.gisticTable,itemsName:"genes",initItemsPerPage:10,columns:this.columns,rawData:this.props.data,headerControlsProps:{showCopyAndDownload:!1,showHideShowColumnButton:!1,showPagination:!0},reactTableProps:{className:"table table-striped table-border-top",hideFilterInput:!0,defaultSort:this.columns.qValue.name}}),r.createElement("div",null,r.createElement("button",{style:{marginTop:20},className:"btn btn-primary btn-sm pull-right",onClick:function(){return e.props.onSelect(e.map_geneSymbol_selected)}},"Select")))}}]),t}(),Mt=xt=Rt([l.observer],xt),Lt=function(e){function t(){var e;return Tt(this,t),(e=kt(this,Dt(t).apply(this,arguments))).showAll=!1,e}return jt(t,r["Component"]),Ct(t,[{key:"renderGeneToggles",value:function(e){var t=this;return e.map(function(e){return r.createElement(l.Observer,null,function(){var n=!!t.props.map_geneSymbol_selected.get(e);return r.createElement("span",{key:e,className:F()(i.a.geneToggle,n?i.a.selected:i.a.notSelected),onClick:function(r){return t.props.map_geneSymbol_selected.set(e,!n)}},e)})})}},{key:"render",value:function(){var e=this,t=Et(this.props.gistic),n=t.slice(0,5),o=t.slice(5);return r.createElement("div",{className:i.a.GisticGeneToggles},r.createElement("div",{className:i.a.someGenes},this.renderGeneToggles(n),!!o.length&&r.createElement("a",{className:i.a.showMoreLess,onClick:function(){return e.showAll=!e.showAll}},this.showAll?"less":"+".concat(o.length," more"))),r.createElement("div",{className:i.a.moreGenes},this.showAll&&this.renderGeneToggles(o)))}}]),t}();Rt([L.observable],Lt.prototype,"showAll",void 0),Lt=Rt([l.observer],Lt);var Gt=n(803),Bt=n(35);function Ft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vt(e,t){return!t||"object"!==Kt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ht(e){return(Ht=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qt(e,t){return(Qt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Kt(e){return(Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ut=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Kt(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},qt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Vt(this,Ht(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qt(e,t)}(t,d["d"]),n=t,(o=[{key:"render",value:function(){return this.store.genesetIdsQuery.error?r.createElement("div",{className:i.a.GeneSymbolValidator},r.createElement("span",{className:i.a.errorMessage},"Cannot validate gene sets because of invalid OQL. ".concat(this.store.genesetQueryErrorDisplayStatus===d.b.Focused?"Please click 'Submit' to see location of error.":this.store.genesetIdsQuery.error.message))):this.store.genesetIdsQuery.query.length?this.store.genesets.isError?r.createElement("div",{className:i.a.GeneSymbolValidator},r.createElement("span",{className:i.a.pendingMessage},"Unable to validate gene sets.")):this.store.genesets.isPending&&0===this.store.genesets.result.invalid.length?r.createElement("div",{className:i.a.GeneSymbolValidator},r.createElement("span",{className:i.a.pendingMessage},"Validating gene sets...")):this.store.genesets.result.invalid.length?r.createElement("div",{className:i.a.GeneSymbolValidator},r.createElement("div",{className:i.a.invalidBubble,title:"Please edit the gene sets."},r.createElement(f.a,{className:i.a.icon,name:"exclamation-circle"}),r.createElement("span",null,"Invalid gene sets.")),this.store.genesets.result.invalid.map(this.renderSuggestion,this)):r.createElement("div",{className:i.a.GeneSymbolValidator},r.createElement("div",{className:i.a.validBubble,title:"You can now submit the list."},r.createElement(f.a,{className:i.a.icon,name:"check-circle"}),r.createElement("span",null,"All gene sets are valid."))):null}},{key:"renderSuggestion",value:function(e,t){var n=this;return r.createElement("div",{key:t,className:i.a.suggestionBubble,title:"Could not find gene set. Click to remove it from the gene list.",onClick:function(){return n.store.replaceGeneset(e,"")}},r.createElement(f.a,{className:i.a.icon,name:"times-circle"}),r.createElement("span",{className:i.a.noChoiceLabel},e))}}])&&Ft(n.prototype,o),a&&Ft(n,a),t}(),Wt=qt=Ut([l.observer],qt),Yt=n(903);function zt(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Xt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jt(e,t){return!t||"object"!==en(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zt(e){return(Zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $t(e,t){return($t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function en(e){return(en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var tn=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":en(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},nn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Jt(this,Zt(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$t(e,t)}(t,d["d"]),n=t,(o=[{key:"handleOQLUpdate",value:function(e,t,n){n!==this.store.geneQuery&&(this.store.geneQuery=n,this.store.oql.error=e.error)}},{key:"render",value:function(){var e=this;return r.createElement(c.b,{overflow:!0,padded:!0,className:i.a.GeneSetSelector},r.createElement(m.a,{className:"sectionLabel",secondaryComponent:r.createElement("a",{target:"_blank",className:i.a.learnOql,href:Object(Ve.v)()},r.createElement("strong",null,"Hint:")," Learn Onco Query Language (OQL)",r.createElement("br",null),"to write more powerful queries"," ",r.createElement("i",{className:"fa fa-external-link"}))},"Enter Genes:"),r.createElement(c.a,{overflow:!0},r.createElement($.default,{value:this.selectedGeneListOption,options:this.geneListOptions,onChange:function(t){return e.store.geneQuery=t?t.value:""}}),r.createElement(Gt.b,{focus:this.store.geneQueryErrorDisplayStatus,inputGeneQuery:this.store.geneQuery,validateInputGeneQuery:!0,location:Gt.a.DEFAULT,textBoxPrompt:"Enter HUGO Gene Symbols, Gene Aliases, or OQL",callback:this.handleOQLUpdate,error:this.store.submitError,messages:this.store.oqlMessages},this.customError),r.createElement(Wt,null),r.createElement(M.Modal,{className:F()("cbioportal-frontend",i.a.MutSigGeneSelectorWindow),show:this.store.showMutSigPopup,onHide:function(){return e.store.showMutSigPopup=!1}},r.createElement(M.Modal.Header,{closeButton:!0},r.createElement(M.Modal.Title,null,"Recently Mutated Genes")),r.createElement(M.Modal.Body,null,r.createElement(St,{initialSelection:this.store.geneIds,data:this.store.mutSigForSingleStudy.result,onSelect:function(t){e.store.applyGeneSelection(t),e.store.showMutSigPopup=!1}}))),r.createElement(M.Modal,{className:F()("cbioportal-frontend",i.a.GisticGeneSelectorWindow),show:this.store.showGisticPopup,onHide:function(){return e.store.showGisticPopup=!1}},r.createElement(M.Modal.Header,{closeButton:!0},r.createElement(M.Modal.Title,null,"Recurrent Copy Number Alterations (Gistic)")),r.createElement(M.Modal.Body,null,r.createElement(Mt,{initialSelection:this.store.geneIds,data:this.store.gisticForSingleStudy.result,onSelect:function(t){e.store.applyGeneSelection(t),e.store.showGisticPopup=!1}})))))}},{key:"selectedGeneListOption",get:function(){var e=this,t=this.geneListOptions.find(function(t){return t.value==e.store.geneQuery});return t?t.value:""}},{key:"geneListOptions",get:function(){var e=G;if(h.b.serverConfig.query_sets_of_genes){var t=h.a.parseQuerySetsOfGenes(h.b.serverConfig.query_sets_of_genes);t&&(e=t)}return[{label:"User-defined List",value:""}].concat(zt(e.map(function(e){return{label:"".concat(e.id," (").concat(e.genes.length," genes)"),value:e.genes.join(" ")}})))}},{key:"customError",get:function(){return this.store.isQueryLimitReached?r.createElement("div",{className:i.a.geneCount},r.createElement("div",{className:"",title:"Please limit your queries to ".concat(this.store.geneLimit," genes or fewer.")},r.createElement(f.a,{className:i.a.icon,name:"exclamation-circle"}),r.createElement(Yt.a,{sampleCount:this.store.approxSampleCount,queryProductLimit:h.b.serverConfig.query_product_limit,email:h.b.serverConfig.skin_email_contact}))):null}}])&&Xt(n.prototype,o),a&&Xt(n,a),t}();tn([L.computed],nn.prototype,"selectedGeneListOption",null),tn([L.computed],nn.prototype,"geneListOptions",null),tn([Bt.bind,L.action],nn.prototype,"handleOQLUpdate",null),tn([L.computed],nn.prototype,"customError",null);var rn,on=nn=tn([l.observer],nn),an=n(832);!function(e){e.custom="-1",e.mutation_cna="w_mut_cna",e.mutation="w_mut",e.cna="w_cna",e.all="all"}(rn||(rn={}));var ln=[{name:"All",description:"All cases in the selected cohorts",value:rn.all,isdefault:!1},{name:"Cases with mutations data",description:"All cases with mutations data",value:rn.mutation,isdefault:!1},{name:"Cases with copy number alterations data",description:"All cases with copy number alterations data",value:rn.cna,isdefault:!1},{name:"Cases with both mutations and copy number alterations data",description:"All cases with both mutations and copy number alterations data",value:rn.mutation_cna,isdefault:!1},{name:"User-defined Case List",description:"Specify your own case list",value:rn.custom,isdefault:!0}];function sn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cn(e,t){return!t||"object"!==fn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function un(e){return(un=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pn(e,t){return(pn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fn(e){return(fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var dn=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":fn(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};function yn(e,t){return u.includes(e.textLabel.toLowerCase(),t.toLowerCase())}var mn=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=cn(this,un(t).apply(this,arguments))).isQueryModified=!1,e.CaseIdsModeRadio=Object(l.observer)(function(t){return r.createElement("label",null,r.createElement("input",{type:"radio",checked:e.store.caseIdsMode==t.state,onChange:function(n){n.currentTarget.checked&&(e.store.caseIdsMode=t.state)}}),t.label)}),e}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pn(e,t)}(t,d["d"]),n=t,(o=[{key:"render",value:function(){var e=this;return!this.isQueryModified&&this.props.modifyQueryParams&&this.modifyQuery(),this.store.selectableSelectedStudyIds.length?r.createElement(c.b,{padded:!0,overflow:!0,className:i.a.CaseSetSelector,"data-test":"CaseSetSelector"},r.createElement("div",null,r.createElement(m.a,{className:"sectionLabel",secondaryComponent:r.createElement("a",{href:Object(Ve.B)(this.store.selectableSelectedStudyIds),target:"_blank"},"To build your own case set,",r.createElement("br",null),"try out our enhanced Study View."),promises:[this.store.sampleLists,this.store.asyncCustomCaseSet,this.store.profiledSamplesCount]},"Select Patient/Case Set:")),r.createElement("div",null,r.createElement($.default,{value:this.store.selectedSampleListId,options:this.caseSetOptions,filterOption:yn,onChange:function(t){return e.store.selectedSampleListId=t?t.value:void 0},"data-test":"caseSetSelector"}),!(this.store.selectedSampleListId!==d.a)&&r.createElement(c.a,{padded:!0},r.createElement("div",{className:i.a.radioRow},r.createElement(c.b,{padded:!0},r.createElement(this.CaseIdsModeRadio,{label:"By sample ID",state:"sample"}),r.createElement(this.CaseIdsModeRadio,{label:"By patient ID",state:"patient"}))),r.createElement("span",null,"Enter case IDs below:"),r.createElement("textarea",{title:"Enter case IDs",rows:6,cols:80,value:this.store.caseIds,onChange:function(t){return e.store.caseIds=t.currentTarget.value},"data-test":"CustomCaseSetInput"})))):null}},{key:"modifyQuery",value:function(){this.store.selectedSampleListId=this.props.modifyQueryParams.selectedSampleListId,this.store.caseIds=this.props.modifyQueryParams.selectedSampleIds.join("\n"),this.store.caseIdsMode=this.props.modifyQueryParams.caseIdsMode,this.isQueryModified=!0}},{key:"caseSetOptions",get:function(){var e,t,n,o=this.store.sampleLists.result.map(function(e){return{label:r.createElement(y.d,{placement:"right",mouseEnterDelay:0,overlay:r.createElement("div",{className:i.a.tooltip},e.description)},r.createElement("span",null,"".concat(e.name," (").concat(e.sampleCount,")"))),value:e.sampleListId,textLabel:e.name}}),a=(e=this.store.isVirtualStudySelected,t=this.store.isMultipleNonVirtualStudiesSelected,n=this.store.profiledSamplesCount.result,u.reduce(ln,function(r,o){if(o.isdefault)r.push(o);else if(t&&!e){var a=n[o.value];a>0&&r.push(Object.assign({},o,{name:"".concat(o.name," (").concat(a,")")}))}else if(e&&o.value===rn.all){var i=n[o.value];i>0&&r.push(Object.assign({},o,{name:"".concat(o.name," (").concat(i,")")}))}return r},[])).map(function(e){return{value:e.value,label:r.createElement(y.d,{placement:"right",mouseEnterDelay:0,overlay:r.createElement("div",{className:i.a.tooltip},e.description)},r.createElement("span",null,e.name)),textLabel:e.name}});return o.concat(a)}}])&&sn(n.prototype,o),a&&sn(n,a),t}();dn([L.computed],mn.prototype,"caseSetOptions",null),dn([L.action],mn.prototype,"modifyQuery",null);var hn=mn=dn([l.observer],mn);function bn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gn(e,t){return!t||"object"!==Sn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vn(e){return(vn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _n(e,t){return(_n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Sn(e){return(Sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var En=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Sn(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},wn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),gn(this,vn(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_n(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return this.props.ids.length>0?r.createElement("div",{className:"alert alert-danger","data-test":"unkown-study-warning",style:{marginBottom:0}},r.createElement("i",{className:"fa fa-exclamation-triangle"})," The following studies do not exist or you do not have access to them:",r.createElement("ul",{style:{margin:"10px 0"}},this.props.ids.map(function(e){return r.createElement("li",null,e)})),"Please resubmit your query below."):null}}])&&bn(n.prototype,o),a&&bn(n,a),t}(),Pn=wn=En([l.observer],wn),On=n(6),Cn=n(1046),Tn=n(897),kn=n(97);function Dn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jn(e){return(jn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function An(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nn(e,t){return(Nn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Rn(e){return(Rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var In=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Rn(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},xn=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=jn(t).call(this,e))||"object"!==Rn(o)&&"function"!=typeof o?An(r):o)._showQueryControls=!1,n.handleSubmit=n.handleSubmit.bind(An(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nn(e,t)}(t,r["Component"]),n=t,(o=[{key:"handleSubmit",value:function(){this.store.submit(),this.props.onSubmit&&this.props.onSubmit()}},{key:"toggleQueryControls",value:function(){H()(document).scrollTop(0),this._showQueryControls=!this._showQueryControls}},{key:"render",value:function(){var e=this;return r.createElement(c.a,{padded:!0,overflow:!0,className:F()("small",i.a.QueryContainer,{forkedMode:this.props.forkedMode})},this.props.showAlerts&&this.store.genes.isComplete&&this.store.genes.result.suggestions.length>0&&r.createElement("div",{className:"alert alert-danger","data-test":"invalidQueryAlert",style:{marginBottom:0}},r.createElement("i",{className:"fa fa-exclamation-triangle"})," Your query has invalid or out-dated gene symbols. Please correct below."),this.store.unknownStudyIds.isComplete&&r.createElement(Pn,{ids:this.store.unknownStudyIds.result}),this.store.forDownloadTab&&r.createElement("div",{className:"alert alert-danger",role:"alert"},"The Download interface has been removed. Enhanced download functionality is now available through the Query interface. Run a query with your gene(s) of interest and use the Download tab to download all available data types."),!this.store.forDownloadTab&&r.createElement(We.If,{condition:0===this.store.defaultSelectedIds.size||this.studiesDataReady},r.createElement(We.Then,null,r.createElement(We.If,{condition:this.props.forkedMode&&this.showQueryControls},r.createElement(c.b,{className:i.a.StudySelection},r.createElement(m.a,{className:"sectionLabel"},"Selected Studies:"," ",r.createElement("button",{"data-test":"modifyStudySelectionButton",className:"btn btn-default btn-xs",onClick:this.toggleQueryControls},"Modify")),r.createElement("div",{style:{marginLeft:8}},this.selectedStudySummary))),this.getWrappedCancerStudySelector,r.createElement(We.If,{condition:this.showQueryControls},r.createElement(r.Fragment,null,this.store.physicalStudyIdsInSelection.length>1?r.createElement(I,null):r.createElement(O,null),this.store.selectableSelectedStudyIds.length>0&&r.createElement(hn,{modifyQueryParams:this.props.modifyQueryParams}),r.createElement(on,null),!!this.store.isGenesetProfileSelected&&r.createElement(Fe,null),!!this.store.forDownloadTab&&r.createElement("span",{className:i.a.downloadSubmitExplanation},"Clicking submit will generate a tab-delimited file containing your requested data."),!!this.store.forDownloadTab&&r.createElement(he.a,{labelProps:{className:i.a.transposeDataMatrix},checked:this.store.transposeDataMatrix,onChange:function(t){return e.store.transposeDataMatrix=t.currentTarget.checked}},"Transpose data matrix"),r.createElement(c.b,{overflow:!0,padded:!0,className:F()(i.a.submitRow,"posRelative")},r.createElement("button",{style:{paddingLeft:50,paddingRight:50,marginRight:50},disabled:!this.store.submitEnabled,className:"btn btn-primary btn-lg",onClick:function(){return e.handleSubmit()},"data-test":"queryButton"},this.store.forDownloadTab?"Download":"Submit Query")))),r.createElement(We.If,{condition:!this.showQueryControls},r.createElement(c.b,{className:i.a.forkedButtons},r.createElement("div",{style:{width:330,textAlign:"right",marginRight:20}},r.createElement(Tn.a,{store:this.store})),r.createElement(y.d,{placement:"top",trigger:["hover"],destroyTooltipOnHide:!0,mouseEnterDelay:0,mouseLeaveDelay:0,disabled:this.store.selectableSelectedStudies.length>0,overlay:this.queryByGeneTooltipMessage},r.createElement("a",{"data-test":"queryByGeneButton",onClick:function(){return e.store.hasSelectedStudies&&e.toggleQueryControls()},"data-event":Object(kn.e)({action:"clickQueryByGeneButton",label:"",category:"homePage"}),className:F()("btn btn-primary btn-lg",{disabled:!this.store.hasSelectedStudies})},"Query By Gene")),"OR",r.createElement(y.d,{placement:"top",trigger:["hover"],destroyTooltipOnHide:!0,mouseEnterDelay:0,mouseLeaveDelay:0,disabled:!this.exploreCohortsButtonDisabled,overlay:this.exploreCohortsButtonTooltipMessage},r.createElement("a",{onClick:function(){return!e.exploreCohortsButtonDisabled&&e.store.openSummary()},"data-event":Object(kn.e)({action:"clickExploreStudiesButton",label:"",category:"homePage"}),className:F()("btn btn-primary btn-lg",{disabled:this.exploreCohortsButtonDisabled})},r.createElement("i",{style:{marginTop:5},className:"ci ci-pie-chart"})," ","Explore Selected Studies"))))),r.createElement(We.Else,null,r.createElement(C.a,{isLoading:!0,center:!0,size:"big"}))))}},{key:"store",get:function(){return this.props.store}},{key:"studiesDataReady",get:function(){return this.store.studiesHaveChangedSinceInitialization||this.store.selectableStudiesSet.isComplete&&this.store.initiallySelected.profileIds&&this.store.cancerTypes.isComplete&&this.store.cancerStudies.isComplete&&this.store.profiledSamplesCount.isComplete}},{key:"showQueryControls",get:function(){return!1===this.props.forkedMode||this._showQueryControls}},{key:"selectedStudySummary",get:function(){var e=this,t=null;if(this.store.selectableSelectedStudies.length>4){t=r.createElement("span",{className:"inlineBlock"},r.createElement(y.d,{overlay:function(){return e.store.selectableSelectedStudies.slice(4).map(function(e){return r.createElement("div",null,e.name)})}},r.createElement("a",null,"and"," ",this.store.selectableSelectedStudies.length-4," ","more")))}return r.createElement("span",{className:"inlineBlock"},this.store.selectableSelectedStudies.slice(0,4).reduce(function(e,t,n,o){return e.push(r.createElement("span",{className:i.a.studyName},t.name)),e},[]),t,t&&r.createElement("span",null," "),"(",r.createElement("b",null,this.store.profiledSamplesCount.result.all)," ",1===this.store.profiledSamplesCount.result.all?"sample":"total samples",")")}},{key:"getWrappedCancerStudySelector",get:function(){var e=r.createElement(s.a,{queryStore:this.store,forkedMode:this.props.forkedMode});return this.props.forkedMode?r.createElement("div",{style:{marginTop:0}},r.createElement(Cn.Fade,{duration:500,collapse:!1,className:"monkeys",unmountOnExit:!0,when:!this.showQueryControls},e)):e}},{key:"studyLimitedReached",get:function(){return this.store.selectableSelectedStudyIds.length>50}},{key:"exploreCohortsButtonDisabled",get:function(){return this.studyLimitedReached||!this.store.hasSelectedStudies}},{key:"exploreCohortsButtonTooltipMessage",get:function(){return 0===this.store.selectableSelectedStudyIds.length?"Please select at least one study above":this.studyLimitedReached?"Too many studies selected for study summary (limit: 50)":"Open summary of selected studies"}},{key:"queryByGeneTooltipMessage",get:function(){return 0===this.store.selectableSelectedStudies.length?"Please select at least one study above":"Continue to query configuration"}}])&&Dn(n.prototype,o),a&&Dn(n,a),t}();In([L.computed],xn.prototype,"studiesDataReady",null),In([L.observable],xn.prototype,"_showQueryControls",void 0),In([L.computed],xn.prototype,"showQueryControls",null),In([L.computed],xn.prototype,"selectedStudySummary",null),In([L.computed],xn.prototype,"getWrappedCancerStudySelector",null),In([On.default],xn.prototype,"toggleQueryControls",null),In([L.computed],xn.prototype,"studyLimitedReached",null),In([L.computed],xn.prototype,"exploreCohortsButtonDisabled",null),In([L.computed],xn.prototype,"exploreCohortsButtonTooltipMessage",null),In([L.computed],xn.prototype,"queryByGeneTooltipMessage",null);var Mn,Ln=xn=In([Object(an.b)(d.c),l.observer],xn),Gn=n(792),Bn=n(112),Fn=n(13);!function(e){e.STUDY="STUDY",e.STUDY_COUNT="studies",e.GENE="GENE",e.GENE_COUNT="genes",e.PATIENT="PATIENT",e.PATIENT_COUNT="patients",e.SAMPLE="SAMPLE",e.SAMPLE_COUNT="samples"}(Mn||(Mn={}));n(1056);var Vn=n(807),Hn=n(1057),Qn=n(129),Kn=n.n(Qn),Un=n(122),qn=n(175);function Wn(){return(Wn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Yn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zn(e){return(zn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jn(e,t){return(Jn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zn(e){return(Zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var $n,er=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Zn(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},tr=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,l)}s((r=r.apply(e,t||[])).next())})},nr=20,rr=3;!function(e){e[e.SESSION=0]="SESSION",e[e.STUDY_LIST=1]="STUDY_LIST"}($n||($n={}));var or=function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=zn(t).apply(this,arguments),(e=!r||"object"!==Zn(r)&&"function"!=typeof r?Xn(n):r).studyPageMultiplier=0,e.genePageMultiplier=0,e.patientPageMultiplier=0,e.samplePageMultiplier=0,e.inputValue="",e.isFocusing=!1,e.isLoading=!1,e.geneStudyQueryVirtualStudy=Object(y.T)(function(){return tr(Xn(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.b.serverConfig.default_cross_cancer_study_session_id,!h.a.sessionServiceIsEnabled()||!t){e.next=14;break}return e.prev=2,e.next=5,Un.a.getVirtualStudy(t);case 5:return n=e.sent,e.abrupt("return",n);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:e.next=15;break;case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}},e,null,[[2,9]])}))},null),e.geneStudyQuery=Object(y.T)({await:function(){return[e.geneStudyQueryVirtualStudy]},invoke:function(){return e.geneStudyQueryVirtualStudy.result?Promise.resolve({type:$n.SESSION,query:e.geneStudyQueryVirtualStudy.result.id,name:e.geneStudyQueryVirtualStudy.result.data.name}):Promise.resolve({type:$n.STUDY_LIST,query:h.b.serverConfig.default_cross_cancer_study_list,name:h.b.serverConfig.default_cross_cancer_study_list_name})}}),e.options=Object(y.T)({await:function(){return[e.geneStudyQuery]},invoke:function(){var t=e.inputValue,n=e.geneStudyQuery.result;return t.length>0?Promise.all([Fn.a.getAllStudiesUsingGETWithHttpInfo({keyword:t,pageSize:rr+nr*e.studyPageMultiplier}),Fn.a.getAllStudiesUsingGETWithHttpInfo({keyword:t,projection:"META"}),Fn.a.getAllGenesUsingGETWithHttpInfo({keyword:t,pageSize:rr+nr*e.genePageMultiplier}),Fn.a.getAllGenesUsingGETWithHttpInfo({keyword:t,projection:"META"}),Fn.a.getAllPatientsUsingGETWithHttpInfo({keyword:t,pageSize:rr+nr*e.patientPageMultiplier,projection:"DETAILED"}),Fn.a.getAllPatientsUsingGETWithHttpInfo({keyword:t,projection:"META"}),Fn.a.getSamplesByKeywordUsingGETWithHttpInfo({keyword:t,pageSize:rr+nr*e.samplePageMultiplier}),Fn.a.getSamplesByKeywordUsingGETWithHttpInfo({keyword:t,projection:"META"}),Object(Vn.a)(0)]).then(function(r){return tr(Xn(e),void 0,void 0,regeneratorRuntime.mark(function e(){var o,a,i,l,s,c,u,p,f,d,y,m=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=r[0].body.map(this.studyToOption),a={value:parseInt(r[1].headers["total-count"])-o.length,type:Mn.STUDY_COUNT},i=r[2].body.map(this.geneToOption),l={value:parseInt(r[3].headers["total-count"])-i.length,type:Mn.GENE_COUNT},s=r[4].body.map(this.patientToOption),c={value:parseInt(r[5].headers["total-count"])-s.length,type:Mn.PATIENT_COUNT},u=r[6].body.map(this.sampleToOption),p={value:parseInt(r[7].headers["total-count"])-u.length,type:Mn.SAMPLE_COUNT},!(i.length+s.length<2*rr&&a.value>0)){e.next=13;break}return f=2*rr-(i.length+s.length),e.next=12,Fn.a.getAllStudiesUsingGETWithHttpInfo({keyword:t,pageSize:f+rr+nr*this.studyPageMultiplier}).then(function(e){o=e.body.map(m.studyToOption)});case 12:a.value=a.value-f;case 13:return d=[],(y=[]).push({label:"Studies",options:o,groupData:a,instruction:"Click on a study to open its summary"}),a.value>0&&(o.push(a),d.push(a)),n&&(y.push({label:"Genes",options:i,groupData:l,instruction:"Click on a gene to query it across ".concat(n.name)}),l.value>0&&(i.push(l),d.push(l))),y.push({label:"Patients",options:s,groupData:c,instruction:"Click on a patient to see a summary"}),c.value>0&&(s.push(c),d.push(c)),y.push({label:"Samples",options:u,groupData:p,instruction:"Click on a sample to open its summary"}),p.value>0&&(u.push(p),d.push(p)),e.abrupt("return",y);case 23:case"end":return e.stop()}},e,this)}))}):Promise.resolve([])}}),e}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jn(e,t)}(t,r["Component"]),n=t,(o=[{key:"selectRef",value:function(e){this.select=e}},{key:"studyToOption",value:function(e,t){return{value:e.studyId,type:Mn.STUDY,studyId:e.studyId,name:e.name,allSampleCount:e.allSampleCount,index:t}}},{key:"geneToOption",value:function(e,t){return{value:e.entrezGeneId,type:Mn.GENE,hugoGeneSymbol:e.hugoGeneSymbol,cytoband:e.cytoband,index:t}}},{key:"patientToOption",value:function(e,t){return{value:e.uniquePatientKey,type:Mn.PATIENT,studyId:e.studyId,patientId:e.patientId,studyName:e.cancerStudy.name,index:t}}},{key:"sampleToOption",value:function(e,t){return{value:e.sampleId,type:Mn.SAMPLE,studyId:e.studyId,studyName:this.studies.get(e.studyId),patientId:e.patientId,sampleType:e.sampleType,index:t}}},{key:"handleChange",value:function(e){var t,n;if(e.type===Mn.STUDY)t={id:e.studyId},n=qn.a.Study,this.trackClick(qn.a.Study,this.inputValue);else if(e.type===Mn.GENE){var r=this.geneStudyQuery.isComplete&&this.geneStudyQuery.result.query;t={case_set_id:"all",gene_list:e.hugoGeneSymbol,cancer_study_list:r},n="results/cancerTypesSummary",this.trackClick("gene",this.inputValue)}else e.type===Mn.PATIENT?(t={studyId:e.studyId,caseId:e.patientId},n=qn.a.Patient,this.trackClick(qn.a.Patient,this.inputValue)):e.type===Mn.SAMPLE?(t={studyId:e.studyId,sampleId:e.value},n=qn.a.Patient,this.trackClick("sample",this.inputValue)):e.type===Mn.STUDY_COUNT?this.studyPageMultiplier++:e.type===Mn.GENE_COUNT?this.genePageMultiplier++:e.type===Mn.PATIENT_COUNT?this.patientPageMultiplier++:e.type===Mn.SAMPLE_COUNT&&this.samplePageMultiplier++;n&&Object(y.C)().routingStore.updateRoute(t,n)}},{key:"trackClick",value:function(e,t){Object(kn.f)({category:"quickSearch",action:e,label:t})}},{key:"handleInputChange",value:function(e,t){var n=t.action;"set-value"!==n&&(e!=this.inputValue&&(this.studyPageMultiplier=0,this.genePageMultiplier=0,this.patientPageMultiplier=0,this.samplePageMultiplier=0),"input-change"===n&&(this.inputValue=e)),"input-blur"===n&&(this.isFocusing=!1)}},{key:"onFocus",value:function(){this.isFocusing=!0}},{key:"renderInput",value:function(e){return delete e.value,console.log(e),r.createElement("div",{className:"Select-input"},r.createElement("input",Wn({placeholder:"e.g. Lung, EGFR, TCGA-OR-A5J2"},e)))}},{key:"render",value:function(){return r.createElement("div",{onFocusCapture:this.onFocus},r.createElement(Bn.default,{options:this.options.result||[],autoFocus:!0,onInputChange:this.handleInputChange,onChange:this.handleChange,components:{Group:ir,GroupHeading:lr},formatOptionLabel:sr,controlShouldRenderValue:!1,filterOption:!1,inputValue:this.inputValue,isLoading:this.options.isPending,placeholder:"e.g. Lung, EGFR, TCGA-OR-A5J2",noOptionsMessage:function(){return"No results"},blurInputOnSelect:!1,closeMenuOnSelect:!1,onSelectResetsInput:!1,menuIsOpen:this.menuIsOpen,maxMenuHeight:550,styles:{dropdownIndicator:function(){return{display:"none"}},control:function(e){return Object.assign(Object.assign({},e),{cursor:"text"})},option:function(e,t){return t.isSelected?Object.assign(Object.assign({},e),{backgroundColor:"inherit",color:"inherit",":hover":{backgroundColor:"#DEEBFF"}}):Object.assign({},e)}}}),r.createElement("p",{style:{fontSize:"x-small",textAlign:"center",paddingTop:15}},"We would love to hear what you think: ",r.createElement("a",{href:"mailto:cbioportal@googlegroups.com"},"cbioportal@googlegroups.com")))}},{key:"menuIsOpen",get:function(){return this.isFocusing&&this.inputValue.length>0}},{key:"studies",get:function(){return this.props.studies.reduce(function(e,t){return e.set(t.studyId,t.name),e},new Map)}}])&&Yn(n.prototype,o),a&&Yn(n,a),t}();er([L.observable],or.prototype,"studyPageMultiplier",void 0),er([L.observable],or.prototype,"genePageMultiplier",void 0),er([L.observable],or.prototype,"patientPageMultiplier",void 0),er([L.observable],or.prototype,"samplePageMultiplier",void 0),er([L.observable],or.prototype,"inputValue",void 0),er([L.observable],or.prototype,"isFocusing",void 0),er([L.observable],or.prototype,"isLoading",void 0),er([L.computed],or.prototype,"menuIsOpen",null),er([L.computed],or.prototype,"studies",null),er([On.default],or.prototype,"selectRef",null),er([On.default],or.prototype,"sampleToOption",null),er([On.default,L.action],or.prototype,"handleChange",null),er([On.default,L.action],or.prototype,"handleInputChange",null),er([On.default,L.action],or.prototype,"onFocus",null),er([On.default],or.prototype,"renderInput",null);var ar=or=er([l.observer],or),ir=function(e){var t=e.data.groupData;t.value,Kn()(t.type,t.value),t.value<nr&&t.value;return r.createElement("div",{className:Hn.optionGroup},r.createElement("div",{className:Hn.groupHeader},e.data.instruction),r.createElement(Bn.components.Group,e))},lr=function(e){return null};function sr(e){var t,n,o;return e.type===Mn.STUDY?(t=e.name,n="primary",o=e.allSampleCount+" samples","Select a study to open its summary"):e.type===Mn.GENE?(t=e.hugoGeneSymbol,n="success",o=e.cytoband||"-","Select a gene to query it across all TCGA PanCancer Atlas studies"):e.type===Mn.PATIENT?(t=e.patientId,n="danger",o=e.studyName,"Select a patient to see a summary"):e.type===Mn.SAMPLE?(t=e.value,n="warning",o="".concat(e.studyName?e.studyName:e.studyId),"Select a sample to open its summary"):t=e.value+" more "+Kn()(e.type,e.value)+" (click to load "+(e.value<nr?e.value:nr)+" more)",r.createElement("div",{className:Hn.optionWrapper},n&&r.createElement("div",{className:Hn.optionLabelWrapper},r.createElement(M.Label,{bsStyle:n},e.type)),r.createElement("div",null,r.createElement("div",null,r.createElement("strong",null,t)),o&&r.createElement("small",null,o)))}function cr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ur(e,t){return!t||"object"!==dr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pr(e){return(pr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fr(e,t){return(fr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dr(e){return(dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var yr=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":dr(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},mr="quickSearch",hr="defaultHomePageTab",br=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=ur(this,pr(t).call(this,e)),e.showQuickSearchTab&&Object(y.C)().localStorage.getItem(hr)===mr&&(n.activeTabId=Object(y.C)().localStorage.getItem(hr)),n.store=e.getQueryStore(),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fr(e,t)}(t,r["Component"]),n=t,(o=[{key:"setDefaultTab",value:function(e){this.props.showQuickSearchTab&&(Object(y.C)().localStorage.defaultHomePageTab=e===mr?mr:void 0)}},{key:"trackQuickSearch",value:function(){Object(kn.f)({category:"quickSearch",action:"quickSearchLoad"})}},{key:"onSelectTab",value:function(e){this.store.forDownloadTab="download"===e,this.activeTabId=e}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:i.a.QueryAndDownloadTabs},r.createElement(We.If,{condition:h.b.serverConfig.skin_citation_rule_text},r.createElement("div",{className:"citationRule",dangerouslySetInnerHTML:{__html:h.b.serverConfig.skin_citation_rule_text}})),r.createElement(Gn.b,{activeTabId:this.activeTabId,onTabClick:this.onSelectTab,className:"mainTabs"},r.createElement(Gn.a,{id:"advanced",linkText:"Query",onTabDidMount:function(){return e.setDefaultTab(void 0)}},r.createElement(Ln,{forkedMode:this.props.forkedMode,onSubmit:this.props.onSubmit,store:this.store,modifyQueryParams:this.props.modifyQueryParams,showAlerts:this.props.showAlerts})),r.createElement(Gn.a,{id:mr,linkText:r.createElement("span",null,"Quick Search"," ",r.createElement("strong",{className:"beta-text"},"Beta!")),hide:!this.props.showQuickSearchTab,onTabDidMount:function(){e.setDefaultTab(mr),e.trackQuickSearch()}},r.createElement("div",null,this.store.cancerStudies.isComplete&&r.createElement(ar,{studies:this.store.cancerStudies.result}))),r.createElement(Gn.a,{id:"download",linkText:"Download",hide:!this.props.showDownloadTab,onTabDidMount:function(){return e.setDefaultTab(void 0)}},r.createElement(Ln,{forkedMode:!1,onSubmit:this.props.onSubmit,store:this.store,showAlerts:this.props.showAlerts}))))}},{key:"quickSearchDefaulted",get:function(){return Object(y.C)().localStorage.getItem(hr)===mr}}])&&cr(n.prototype,o),a&&cr(n,a),t}();br.defaultProps={forkedMode:!0},yr([L.observable.ref],br.prototype,"store",void 0),yr([L.observable],br.prototype,"activeTabId",void 0),yr([On.default],br.prototype,"setDefaultTab",null),yr([On.default,L.action],br.prototype,"onSelectTab",null),br=yr([l.observer],br);t.a=br},938:function(e,t,n){e.exports=n(25)(910)}}]);