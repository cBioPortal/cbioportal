(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{1059:function(e,t,n){"use strict";(function(e){var r=n(0),o=n(66),i=n(9),a=n(2),l=n(1089),s=n(1),u=n.n(s),c=n(6),p=n(3),f=n(110),d=n(289),y=n(47),h=n(23),m=n(192),b=n(30),g=n(298),v=n(1088);function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var x,k=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":P(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},C="comparison-tab-overlap-svg";!function(e){e[e.Upset=0]="Upset",e[e.Venn=1]="Venn"}(x||(x={}));var j=function(t){function n(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(e=E(this,S(n).apply(this,arguments))).plotExists=!1,e.vennFailed=!1,e.tabUI=Object(f.a)({await:function(){return e.props.store._selectedGroups.isComplete&&e.props.store._selectedGroups.result.length<2?[e.props.store._selectedGroups]:[e.props.store._selectedGroups,e.overlapUI]},render:function(){var t=[];return e.props.store._selectedGroups.result.length<2?t.push(r.createElement("span",null,y.f)):(t.push(r.createElement(g.a,{overlapTabMode:!0,store:e.props.store})),e.vennFailed&&t.push(r.createElement("div",{className:"alert alert-info"},"We couldn't find a good Venn diagram layout, so showing UpSet diagram instead.")),t.push(e.overlapUI.component)),r.createElement("div",{"data-test":"ComparisonPageOverlapTabDiv"},t)},renderPending:function(){return r.createElement(o.a,{isLoading:!0,center:!0,size:"big"})},renderError:function(){return r.createElement(d.a,null)}}),e.plotType=Object(p.T)({await:function(){return[e.props.store._selectedGroups]},invoke:function(){return e.vennFailed||e.props.store._selectedGroups.result.length>3?Promise.resolve(x.Upset):Promise.resolve(x.Venn)}}),e.sampleGroupsWithCases=Object(p.T)({await:function(){return[e.props.store._selectedGroups,e.props.store.sampleMap]},invoke:function(){var t=e.props.store.sampleMap.result,n=u.a.map(e.props.store._selectedGroups.result,function(e){var n=Object(y.w)([e]).map(function(e){return t.get({studyId:e.studyId,sampleId:e.sampleId})});return{uid:e.uid,cases:u.a.map(n,function(e){return e.uniqueSampleKey})}});return Promise.resolve(n)}},[]),e.patientGroupsWithCases=Object(p.T)({await:function(){return[e.props.store._selectedGroups,e.props.store.sampleMap]},invoke:function(){var t=e.props.store.sampleMap.result,n=u.a.map(e.props.store._selectedGroups.result,function(e){var n=Object(y.w)([e]).map(function(e){return t.get({studyId:e.studyId,sampleId:e.sampleId})});return{uid:e.uid,cases:u.a.uniq(u.a.map(n,function(e){return e.uniquePatientKey}))}});return Promise.resolve(n)}},[]),e.activeSamples=Object(p.T)({await:function(){return[e.props.store._selectedGroups,e.props.store.sampleMap]},invoke:function(){var t=e.props.store.sampleMap.result,n=Object(y.w)(e.props.store._selectedGroups.result).map(function(e){return t.get(e)});return Promise.resolve(n)}}),e.samplesVennPartition=Object(p.T)({await:function(){return[e.props.store._selectedGroups,e.props.store.sampleMap,e.activeSamples]},invoke:function(){var t=e.props.store.sampleMap.result;return Promise.resolve(Object(y.C)(e.props.store._selectedGroups.result,function(e){return Object(y.w)([e])},function(e){return t.get({studyId:e.studyId,sampleId:e.sampleId}).uniqueSampleKey},e.activeSamples.result.map(function(e){return e.uniqueSampleKey})))}}),e.patientsVennPartition=Object(p.T)({await:function(){return[e.props.store._selectedGroups,e.props.store.patientToSamplesSet,e.activeSamples]},invoke:function(){var t=e.props.store.patientToSamplesSet.result;return Promise.resolve(Object(y.C)(e.props.store._selectedGroups.result,function(e){return Object(b.Y)([e])},function(e){return t.get({studyId:e.studyId,patientId:e.patientId})[0].uniquePatientKey},u.a.uniq(e.activeSamples.result.map(function(e){return e.uniquePatientKey}))))}}),e.uidToGroup=Object(p.T)({await:function(){return[e.props.store._selectedGroups]},invoke:function(){return Promise.resolve(u.a.keyBy(e.props.store._selectedGroups.result,function(e){return e.uid}))}}),e.plot=Object(f.a)({await:function(){return[e.plotType,e.samplesVennPartition,e.patientsVennPartition,e.sampleGroupsWithCases,e.patientGroupsWithCases,e.uidToGroup]},render:function(){var t=null;switch(e.plotType.result){case x.Upset:t=r.createElement(v.a,{store:e.props.store,sideBySide:e.areUpsetPlotsSidebySide,maxWidth:e.maxWidth,samplesVennPartition:e.samplesVennPartition.result,patientsVennPartition:e.patientsVennPartition.result,uidToGroup:e.uidToGroup.result});break;case x.Venn:t=r.createElement(l.a,{svgId:C,sampleGroups:e.sampleGroupsWithCases.result,patientGroups:e.patientGroupsWithCases.result,uidToGroup:e.uidToGroup.result,store:e.props.store,onLayoutFailure:e.onVennLayoutFailure});break;default:return r.createElement("span",null,"Not implemented yet")}return t},renderPending:function(){return r.createElement(o.a,{isLoading:!0,size:"big"})},renderError:function(){return r.createElement(d.a,null)}}),e.overlapUI=Object(f.a)({await:function(){return[e.plot]},render:function(){return r.createElement("div",{"data-test":"ComparisonPageOverlapTabContent",className:"borderedChart posRelative"},e.plotExists&&r.createElement(p.e,{getSvg:e.getSvg,getData:e.props.store.getGroupsDownloadDataPromise,buttons:["SVG","PNG","PDF","Data"],filename:"overlap",dontFade:!0,style:{position:"absolute",right:10,top:10},type:"button"}),r.createElement("div",{style:{position:"relative",display:"inline-block"}},e.plot.component))},renderPending:function(){return r.createElement(o.a,{isLoading:!0,centerRelativeToContainer:!0,size:"big"})},renderError:function(){return r.createElement(d.a,null)}}),e}var i,a,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(n,r["Component"]),i=n,(a=[{key:"componentDidUpdate",value:function(){this.plotExists=!!this.getSvg()}},{key:"onVennLayoutFailure",value:function(){this.vennFailed=!0}},{key:"getSvg",value:function(){if(this.plotType.result===x.Upset){var t=h.findDOMNode(this),n=document.createElementNS("http://www.w3.org/2000/svg","svg"),r=e(t).find("svg"),o=r[0].cloneNode(!0),i=r[1].cloneNode(!0);e(t).find("svg");var a=0,l=0;return n.appendChild(o),this.areUpsetPlotsSidebySide?(i.setAttribute("x","".concat(e(o).width())),a=Math.max(e(o).height(),e(i).height()),l=e(o).width()+e(i).width()):(i.setAttribute("y","".concat(e(o).height())),a=e(o).height()+e(i).height(),l=Math.max(e(o).width(),e(i).width())),e(n).attr("height",a),e(n).attr("width",l),e(n).css({height:a,width:l}),n.appendChild(i),n}return document.getElementById(C)}},{key:"render",value:function(){return r.createElement("div",{className:"inlineBlock"},this.tabUI.component)}},{key:"areUpsetPlotsSidebySide",get:function(){return!this.samplesVennPartition.isComplete||!this.patientsVennPartition.isComplete||this.samplesVennPartition.result.length+this.patientsVennPartition.result.length<=100}},{key:"maxWidth",get:function(){return m.a.size.width-80}}])&&O(i.prototype,a),s&&O(i,s),n}();k([a.observable],j.prototype,"plotExists",void 0),k([a.observable],j.prototype,"vennFailed",void 0),k([c.default,a.action],j.prototype,"onVennLayoutFailure",null),k([c.default],j.prototype,"getSvg",null),k([a.computed],j.prototype,"areUpsetPlotsSidebySide",null),k([a.computed],j.prototype,"maxWidth",null),j=k([i.observer],j),t.a=j}).call(this,n(17))},1062:function(e,t,n){e.exports=n(25)(792)},1063:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__quCC8",framedImage:"styles-module__framedImage__2pTmh",scrollbar:"styles-module__scrollbar__-BNTg",handle:"styles-module__handle__2PODi"}},1064:function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(66),a=n(289),l=n(800),s=n(919),u=n(6),c=n(110),p=n(47),f=n(111);function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var g=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},v=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=y(this,h(t).apply(this,arguments))).tabUI=Object(p.d)(function(){return e.props.store},function(){return e.enrichmentsUI},"mutation",!0,!0,!0),e.enrichmentsUI=Object(c.a)({await:function(){return[e.props.store.mutationEnrichmentData,e.props.store.selectedStudyMutationEnrichmentProfileMap,e.props.store.mutationEnrichmentAnalysisGroups,e.props.store.studies,e.props.store.mutationEnrichmentProfiles]},render:function(){var t="Mutation",n=Object.keys(e.props.store.selectedStudyMutationEnrichmentProfileMap.result);return 1===n.length&&(t=e.props.store.selectedStudyMutationEnrichmentProfileMap.result[n[0]].name),r.createElement("div",{"data-test":"GroupComparisonMutationEnrichments"},r.createElement(l.a,{dataSets:e.props.store.mutationEnrichmentProfiles.result,onChange:e.onChangeProfile,selectedProfileByStudyId:e.props.store.selectedStudyMutationEnrichmentProfileMap.result,studies:e.props.store.studies.result}),r.createElement(s.a,{data:e.props.store.mutationEnrichmentData.result,groups:e.props.store.mutationEnrichmentAnalysisGroups.result,alteredVsUnalteredMode:!1,headerName:t,containerType:f.a.MUTATION,patientLevelEnrichments:e.props.store.usePatientLevelEnrichments,onSetPatientLevelEnrichments:e.props.store.setUsePatientLevelEnrichments,store:e.props.resultsViewStore}))},renderPending:function(){return r.createElement(i.a,{center:!0,isLoading:!0,size:"big"})},renderError:function(){return r.createElement(a.a,null)}}),e}var n,o,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,r["Component"]),n=t,(o=[{key:"onChangeProfile",value:function(e){this.props.store.setMutationEnrichmentProfileMap(e)}},{key:"render",value:function(){return this.tabUI.component}}])&&d(n.prototype,o),u&&d(n,u),t}();g([u.default],v.prototype,"onChangeProfile",null),v=g([o.observer],v),t.a=v},1065:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__1mlqI",framedImage:"styles-module__framedImage__AkabG",wrapper:"styles-module__wrapper__29CoN",groupRow:"styles-module__groupRow__3Q2Y8",alterationRow:"styles-module__alterationRow__1G5NG",strike:"styles-module__strike__1ycDg"}},1066:function(e,t,n){e.exports={portalWidth:"frequencyPlotStyles-module__portalWidth__bPwxT",framedImage:"frequencyPlotStyles-module__framedImage__R6mzB",ChartControls:"frequencyPlotStyles-module__ChartControls__2YKR9"}},1067:function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(800),a=n(919),l=n(6),s=n(110),u=n(66),c=n(289),p=n(47),f=n(111);function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var g=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},v=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=y(this,h(t).apply(this,arguments))).tabUI=Object(p.d)(function(){return e.props.store},function(){return e.enrichmentsUI},"copy-number",!0,!0,!0),e.enrichmentsUI=Object(s.a)({await:function(){return[e.props.store.copyNumberEnrichmentData,e.props.store.copyNumberEnrichmentAnalysisGroups,e.props.store.selectedStudyCopyNumberEnrichmentProfileMap,e.props.store.studies,e.props.store.copyNumberEnrichmentProfiles]},render:function(){var t="Copy number",n=Object.keys(e.props.store.selectedStudyCopyNumberEnrichmentProfileMap.result);return 1===n.length&&(t=e.props.store.selectedStudyCopyNumberEnrichmentProfileMap.result[n[0]].name),r.createElement("div",{"data-test":"GroupComparisonCopyNumberEnrichments"},r.createElement(i.a,{dataSets:e.props.store.copyNumberEnrichmentProfiles.result,onChange:e.onChangeProfile,selectedProfileByStudyId:e.props.store.selectedStudyCopyNumberEnrichmentProfileMap.result,studies:e.props.store.studies.result}),r.createElement(a.a,{data:e.props.store.copyNumberEnrichmentData.result,groups:e.props.store.copyNumberEnrichmentAnalysisGroups.result,alteredVsUnalteredMode:!1,headerName:t,showCNAInTable:!0,containerType:f.a.COPY_NUMBER,patientLevelEnrichments:e.props.store.usePatientLevelEnrichments,onSetPatientLevelEnrichments:e.props.store.setUsePatientLevelEnrichments,store:e.props.resultsViewStore}))},renderPending:function(){return r.createElement(u.a,{center:!0,isLoading:!0,size:"big"})},renderError:function(){return r.createElement(c.a,null)}}),e}var n,o,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,r["Component"]),n=t,(o=[{key:"onChangeProfile",value:function(e){this.props.store.setCopyNumberEnrichmentProfileMap(e)}},{key:"render",value:function(){return this.tabUI.component}}])&&d(n.prototype,o),l&&d(n,l),t}();g([l.default],v.prototype,"onChangeProfile",null),v=g([o.observer],v),t.a=v},1068:function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(6),a=n(110),l=n(800),s=n(66),u=n(289),c=n(841),p=n(47),f=n(111);function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var g=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},v=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=y(this,h(t).apply(this,arguments))).tabUI=Object(p.d)(function(){return e.props.store},function(){return e.enrichmentsUI},"mRNA",!0,!0,!1),e.enrichmentsUI=Object(a.a)({await:function(){return[e.props.store.mRNAEnrichmentData,e.props.store.selectedmRNAEnrichmentProfileMap,e.props.store.mrnaEnrichmentAnalysisGroups,e.props.store.studies,e.props.store.sampleKeyToSample,e.props.store.mRNAEnrichmentProfiles]},render:function(){var t=Object.keys(e.props.store.selectedmRNAEnrichmentProfileMap.result),n=e.props.store.selectedmRNAEnrichmentProfileMap.result[t[0]];return r.createElement("div",{"data-test":"GroupComparisonMRNAEnrichments"},r.createElement(l.a,{dataSets:e.props.store.mRNAEnrichmentProfiles.result,onChange:e.onChangeProfile,selectedProfileByStudyId:e.props.store.selectedmRNAEnrichmentProfileMap.result,alwaysShow:!0,studies:e.props.store.studies.result}),r.createElement(c.a,{data:e.props.store.mRNAEnrichmentData.result,groups:e.props.store.mrnaEnrichmentAnalysisGroups.result,selectedProfile:n,alteredVsUnalteredMode:!1,sampleKeyToSample:e.props.store.sampleKeyToSample.result,isGeneCheckBoxEnabled:e.props.resultsViewMode,enrichmentType:f.e.MRNA_EXPRESSION}))},renderPending:function(){return r.createElement(s.a,{center:!0,isLoading:!0,size:"big"})},renderError:function(){return r.createElement(u.a,null)}}),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,r["Component"]),n=t,(o=[{key:"onChangeProfile",value:function(e){this.props.store.setMRNAEnrichmentProfileMap(e)}},{key:"render",value:function(){return this.tabUI.component}}])&&d(n.prototype,o),i&&d(n,i),t}();g([i.default],v.prototype,"onChangeProfile",null),v=g([o.observer],v),t.a=v},1069:function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(6),a=n(110),l=n(800),s=n(841),u=n(66),c=n(289),p=n(47),f=n(111);function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var g=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},v=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=y(this,h(t).apply(this,arguments))).tabUI=Object(p.d)(function(){return e.props.store},function(){return e.enrichmentsUI},"protein",!0,!0,!1),e.enrichmentsUI=Object(a.a)({await:function(){return[e.props.store.proteinEnrichmentData,e.props.store.selectedProteinEnrichmentProfileMap,e.props.store.proteinEnrichmentAnalysisGroups,e.props.store.studies,e.props.store.proteinEnrichmentProfiles]},render:function(){var t=Object.keys(e.props.store.selectedProteinEnrichmentProfileMap.result),n=e.props.store.selectedProteinEnrichmentProfileMap.result[t[0]];return r.createElement("div",{"data-test":"GroupComparisonProteinEnrichments"},r.createElement(l.a,{dataSets:e.props.store.proteinEnrichmentProfiles.result,onChange:e.onChangeProfile,selectedProfileByStudyId:e.props.store.selectedProteinEnrichmentProfileMap.result,alwaysShow:!0,studies:e.props.store.studies.result}),r.createElement(s.a,{data:e.props.store.proteinEnrichmentData.result,groups:e.props.store.proteinEnrichmentAnalysisGroups.result,selectedProfile:n,alteredVsUnalteredMode:!1,sampleKeyToSample:e.props.store.sampleKeyToSample.result,isGeneCheckBoxEnabled:e.props.resultsViewMode,enrichmentType:f.e.PROTEIN_EXPRESSION}))},renderPending:function(){return r.createElement(u.a,{center:!0,isLoading:!0,size:"big"})},renderError:function(){return r.createElement(c.a,null)}}),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,r["Component"]),n=t,(o=[{key:"onChangeProfile",value:function(e){this.props.store.setProteinEnrichmentProfileMap(e)}},{key:"render",value:function(){return this.tabUI.component}}])&&d(n.prototype,o),i&&d(n,i),t}();g([i.default],v.prototype,"onChangeProfile",null),v=g([o.observer],v),t.a=v},1071:function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(6),a=n(110),l=n(800),s=n(841),u=n(66),c=n(289),p=n(47),f=n(111);function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var g=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},v=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=y(this,h(t).apply(this,arguments))).tabUI=Object(p.d)(function(){return e.props.store},function(){return e.enrichmentsUI},"methylation",!0,!0,!1),e.enrichmentsUI=Object(a.a)({await:function(){return[e.props.store.methylationEnrichmentData,e.props.store.selectedMethylationEnrichmentProfileMap,e.props.store.methylationEnrichmentAnalysisGroups,e.props.store.studies,e.props.store.methylationEnrichmentProfiles]},render:function(){var t=Object.keys(e.props.store.selectedMethylationEnrichmentProfileMap.result),n=e.props.store.selectedMethylationEnrichmentProfileMap.result[t[0]];return r.createElement("div",{"data-test":"GroupComparisonMethylationEnrichments"},r.createElement(l.a,{dataSets:e.props.store.methylationEnrichmentProfiles.result,onChange:e.onChangeProfile,selectedProfileByStudyId:e.props.store.selectedMethylationEnrichmentProfileMap.result,alwaysShow:!0,studies:e.props.store.studies.result}),r.createElement(s.a,{data:e.props.store.methylationEnrichmentData.result,groups:e.props.store.methylationEnrichmentAnalysisGroups.result,selectedProfile:n,alteredVsUnalteredMode:!1,sampleKeyToSample:e.props.store.sampleKeyToSample.result,isGeneCheckBoxEnabled:e.props.resultsViewMode,enrichmentType:f.e.DNA_METHYLATION,groupsSelectorPlaceholder:"High methylation in ..."}))},renderPending:function(){return r.createElement(u.a,{center:!0,isLoading:!0,size:"big"})},renderError:function(){return r.createElement(c.a,null)}}),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,r["Component"]),n=t,(o=[{key:"onChangeProfile",value:function(e){this.props.store.setMethylationEnrichmentProfileMap(e)}},{key:"render",value:function(){return this.tabUI.component}}])&&d(n.prototype,o),i&&d(n,i),t}();g([i.default],v.prototype,"onChangeProfile",null),v=g([o.observer],v),t.a=v},1088:function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(14),a=n(2),l=n(1),s=n(3),u=n(6),c=n(103),p=n(130);function f(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return{x:e>0?[n(0),r?n(Math.max(1,e-1)):e]:[0,0],y:t>0?[n(0),o?n(Math.max(1,t-1)):t]:[0,0]}}var d=n(23),y=n(15),h=n(5),m=n.n(h),b=n(799),g=n.n(b),v=n(192);function O(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20,o=(n=n||function(e,t){for(var n=0,r=1;e(n)>t;){if(n<Number.MIN_SAFE_INTEGER)throw new Error("Couldnt find lower bound");n-=r,r*=2}r=1;for(var o=0;e(o)<t;){if(o>Number.MAX_SAFE_INTEGER)throw new Error("Couldnt find upper bound");o+=r,r*=2}return[n,o]}(e,t))[0],i=n[1],a=(o+i)/2,l=r;l>0&&e(a)!==t;)e(a)>t?i=a:o=a,a=(o+i)/2,l-=1;return a}var E=n(816);function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var j=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":C(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},T=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},_=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=P(this,x(t).apply(this,arguments))).textElt=null,e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,r["Component"]),n=t,(o=[{key:"ref",value:function(e){this.textElt=e}},{key:"render",value:function(){var e=this.props,t=(e.categoryCoordToGroup,e.dx),n=e.dy,o=e.maxLabelWidth,i=(e.datum,e.text,T(e,["categoryCoordToGroup","dx","dy","maxLabelWidth","datum","text"]));return r.createElement(r.Fragment,null,this.colorRectangle,r.createElement(E.a,S({text:this.group.name,textRef:this.ref,prefixTspans:this.group.ordinal.length>0?[r.createElement("tspan",null,"("),r.createElement("tspan",{fontWeight:"bold"},this.group.ordinal),r.createElement("tspan",null,")Â ")]:void 0,datum:this.group,tooltip:function(e){return r.createElement("div",null,Object(p.h)(e))},maxWidth:o,dy:n,dx:t},i)))}},{key:"group",get:function(){return this.props.categoryCoordToGroup(this.props.text)}},{key:"colorRectangle",get:function(){if(this.textElt){var e=this.textElt.getBBox();return r.createElement("rect",{x:e.x-10-5,y:e.y+(e.height-10)/2,fill:this.group.color,width:10,height:10})}return null}}])&&w(n.prototype,o),i&&w(n,i),t}();j([a.observable.ref],_.prototype,"textElt",void 0),j([a.computed],_.prototype,"group",null),j([u.default,a.action],_.prototype,"ref",null),j([a.computed],_.prototype,"colorRectangle",null);var G=_=j([o.observer],_);function A(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var V=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":N(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},B=function(e){return r.createElement(i.Bar,I({className:"".concat(e.caseType,"_").concat(l.sortBy(e.datum.groups).map(function(e){return e.replace(/ /g,"_")}).join("_"),"_bar")},e))},U=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=D(this,M(t).apply(this,arguments))).tooltipModel=null,e.mouseEvents=e.makeMouseEvents(),e.mousePosition={x:0,y:0},e}var n,a,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(t,r["Component"]),n=t,(a=[{key:"containerRef",value:function(e){this.container=e}},{key:"makeMouseEvents",value:function(){var e=this;return[{target:"data",eventHandlers:{onMouseOver:function(){return[{target:"data",mutation:function(t){return t.datum&&t.datum.dontShowTooltip||(e.tooltipModel=t),null}}]},onMouseOut:function(){return[{target:"data",mutation:function(){return e.tooltipModel=null,null}}]},onClick:function(){return[{target:"data",mutation:function(t){var n;return n=t.datum?t.datum.groups:t.data[0].groups,t.datum&&t.datum.notClickable||e.props.onChangeSelectedCombinations(Object(p.i)(n,e.props.selectedCombinations)),null}}]}}}]}},{key:"resetSelection",value:function(){this.props.onChangeSelectedCombinations([])}},{key:"barSeparation",value:function(){return.2*this.barWidth()}},{key:"barWidth",value:function(){return 10}},{key:"barChartHeight",value:function(){return 250}},{key:"domainPadding",value:function(){return 20}},{key:"categoryAxisDomainPadding",value:function(){return this.domainPadding()}},{key:"countAxisDomainPadding",value:function(){return this.domainPadding()}},{key:"chartDomainPadding",value:function(){return{y:this.countAxisDomainPadding(),x:this.categoryAxisDomainPadding()}}},{key:"categoryCoord",value:function(e){return e*(this.barWidth()+this.barSeparation())}},{key:"categoryCoordToGroup",value:function(e){var t=Math.round(O(this.categoryCoord,e,[0,this.usedGroups.length]));return this.usedGroups[t]}},{key:"formatNumericalTick",value:function(e,t,n){return Object(c.a)(e,n)}},{key:"groupTick",value:function(e,t){return this.groupLabels[t]}},{key:"tooltipFunction",value:function(e){var t=this,n=l.map(e.groups,function(e){return t.props.uidToGroup[e]}),o=e.cases.length;return r.createElement("div",{style:{width:300,whiteSpace:"normal"}},r.createElement("strong",null,o," ",Object(s.S)(this.props.caseType,o)),r.createElement("br",null),"in only ",Object(p.f)(n,"and"),".")}},{key:"onMouseMove",value:function(e){this.mousePosition.x=e.pageX,this.mousePosition.y=e.pageY}},{key:"lineStroke",value:function(e){return 0===e.length?"black":Object(p.g)(e[0].groups,this.props.selectedCombinations)?"yellow":"black"}},{key:"fill",value:function(e){return Object(p.g)(e.groups,this.props.selectedCombinations)&&!e.notClickable?"yellow":e.fill||"black"}},{key:"getChart",value:function(){return this.groupCombinationSets.length>0?r.createElement("div",{ref:this.containerRef,style:{width:this.svgWidth,height:this.svgHeight}},r.createElement("svg",{id:this.props.svgId||"",style:{width:this.svgWidth,height:this.svgHeight,pointerEvents:"all"},height:this.svgHeight,width:this.svgWidth,role:"img",viewBox:"0 0 ".concat(this.svgWidth," ").concat(this.svgHeight),onMouseMove:this.onMouseMove},r.createElement("g",null,this.title),r.createElement("g",{transform:"translate(".concat(this.leftPadding,", ").concat(this.topPadding,")")},r.createElement(i.VictoryChart,{theme:s.a,width:this.chartWidth,height:this.barChartHeight(),standalone:!1,domainPadding:this.chartDomainPadding(),domain:this.barPlotDomain,singleQuadrantDomainPadding:{y:!0,x:!1}},r.createElement(i.VictoryAxis,{orientation:"bottom",offsetY:50,crossAxis:!1,tickValues:this.categoryTickValues,style:{ticks:{size:0},tickLabels:{fontSize:0},grid:{stroke:0}}}),r.createElement(i.VictoryAxis,{orientation:"left",offsetX:50,dependentAxis:!0,label:"Overlap count",tickFormat:this.formatNumericalTick,style:{grid:{stroke:0}},axisLabelComponent:r.createElement(i.VictoryLabel,{dy:-40})}),r.createElement(i.VictoryBar,{style:{data:{fill:this.fill,width:this.barWidth()}},data:this.barPlotData}),r.createElement(i.VictoryBar,{style:{data:{fillOpacity:0,width:this.barWidth(),cursor:"pointer"}},data:this.barPlotHitzoneData,events:this.mouseEvents,dataComponent:r.createElement(B,{caseType:this.props.caseType})}))),r.createElement("g",{transform:"translate(".concat(this.leftPadding,", ").concat(this.scatterPlotTopPadding,")")},r.createElement(i.VictoryChart,{theme:s.a,width:this.chartWidth,height:this.scatterChartHeight,standalone:!1,domainPadding:this.chartDomainPadding(),domain:this.scatterPlotDomain,singleQuadrantDomainPadding:{y:!0,x:!1}},r.createElement(i.VictoryAxis,{orientation:"bottom",offsetY:50,crossAxis:!1,tickValues:this.categoryTickValues,style:{axis:{strokeWidth:0},ticks:{size:0,strokeWidth:0},tickLabels:{fill:"none"},grid:{stroke:0}}}),r.createElement(i.VictoryAxis,{orientation:"left",offsetX:50,dependentAxis:!0,crossAxis:!1,tickLabelComponent:r.createElement(G,{categoryCoordToGroup:this.categoryCoordToGroup,maxLabelWidth:200,dy:"0.4em"}),tickValues:this.groupTickValues,style:{axis:{strokeWidth:0},ticks:{size:0,strokeWidth:0},grid:{stroke:0}}}),r.createElement(i.VictoryScatter,{size:this.barWidth()/2,style:{data:{fill:this.fill,cursor:function(e){return e.cursor}}},data:this.scatterData,events:this.mouseEvents}),this.getGroupIntersectionLines)))):r.createElement("span",null,"No data to plot.")}},{key:"render",value:function(){return r.createElement("div",null,r.createElement(o.Observer,null,this.getChart),this.tooltipComponent)}},{key:"usedGroups",get:function(){var e=l.chain(this.groupCombinationSets).flatMap(function(e){return e.groups}).keyBy().value();return l.chain(this.props.uidToGroup).reduce(function(t,n,r){return r in e&&t.push(n),t},[]).orderBy(function(e){return e.nameWithOrdinal},"desc").value()}},{key:"groupLabels",get:function(){return l.map(this.usedGroups,function(e){return Object(s.db)(e.nameWithOrdinal,100,"Arial","13px")})}},{key:"chartWidth",get:function(){return this.barChartExtent}},{key:"scatterChartHeight",get:function(){return this.scatterChartExtent}},{key:"title",get:function(){return this.props.title?r.createElement(i.VictoryLabel,{style:{fontWeight:"bold",fontFamily:"Verdana,Arial,sans-serif",textAnchor:"middle"},x:this.svgWidth/2,y:"1.2em",text:this.props.title}):null}},{key:"scatterChartExtent",get:function(){return this.usedGroups.length>0?this.categoryCoord(this.usedGroups.length-1)+2*this.categoryAxisDomainPadding()+100:100}},{key:"barChartExtent",get:function(){return this.groupCombinationSets.length>0?this.categoryCoord(this.groupCombinationSets.length-1)+2*this.categoryAxisDomainPadding()+100:100}},{key:"biggestCategoryLabelSize",get:function(){var e=Math.max.apply(Math,A(l.map(this.usedGroups,function(e){return Object(s.K)(e.nameWithOrdinal,s.v.fontFamily,s.v.fontSize+"px")})));return Math.min(e,200)}},{key:"svgWidth",get:function(){return Math.max(this.leftPadding+this.chartWidth+this.rightPadding,320)}},{key:"svgHeight",get:function(){return this.topPadding+this.barChartHeight()+this.scatterChartHeight+this.bottomPadding-100}},{key:"leftPadding",get:function(){return this.biggestCategoryLabelSize}},{key:"rightPadding",get:function(){return 50}},{key:"topPadding",get:function(){return 0}},{key:"bottomPadding",get:function(){return 10}},{key:"groupCombinationSets",get:function(){return l.orderBy(this.props.groups.map(function(e){return{groups:Object.keys(e.key).filter(function(t){return e.key[t]}),cases:e.value}}),function(e){return e.cases.length},"desc")}},{key:"scatterData",get:function(){var e=this;return l.flatMap(this.groupCombinationSets,function(t,n){return l.map(e.usedGroups,function(r,o){var i=l.includes(t.groups,r.uid);return Object.assign({x:e.categoryCoord(n),y:e.categoryCoord(o),fill:i?"#000000":"#efefef",dontShowTooltip:!i,cursor:i?"pointer":"default",notClickable:!i},t)})})}},{key:"barPlotData",get:function(){var e=this;return l.map(this.groupCombinationSets,function(t,n){return Object.assign({x:e.categoryCoord(n),y:t.cases.length},t)})}},{key:"barPlotHitzoneData",get:function(){var e=this.barPlotDomain.y[1]/15;return this.barPlotData.map(function(t){return Object.assign({},t,{y:Math.max(t.y,e)})})}},{key:"getGroupIntersectionLines",get:function(){var e=this,t=l.map(this.usedGroups,function(e){return e.uid});return l.flatMap(this.groupCombinationSets,function(n,o){var a=l.map(n.groups,function(r){var i=l.indexOf(t,r);return Object.assign({x:e.categoryCoord(o),y:e.categoryCoord(i)},n)});return[r.createElement(i.VictoryLine,{style:{data:{stroke:e.lineStroke,strokeWidth:2,strokeLinecap:"round"}},data:a}),r.createElement(i.VictoryLine,{style:{data:{strokeOpacity:0,strokeWidth:e.barWidth(),strokeLinecap:"round",cursor:"pointer"}},data:a,events:e.mouseEvents})]})}},{key:"barPlotDomain",get:function(){var e=l.max(l.map(this.groupCombinationSets,function(e){return e.cases.length}))||0;return f(this.groupCombinationSets.length,e,this.categoryCoord,!0,!1)}},{key:"scatterPlotDomain",get:function(){return f(this.groupCombinationSets.length,l.keys(this.groupLabels).length,this.categoryCoord)}},{key:"categoryTickValues",get:function(){var e=this;return this.groupCombinationSets.map(function(t,n){return e.categoryCoord(n)})}},{key:"groupTickValues",get:function(){var e=this;return l.map(this.groupLabels,function(t,n){return e.categoryCoord(n)})}},{key:"scatterPlotTopPadding",get:function(){return this.barChartHeight()-100}},{key:"tooltipComponent",get:function(){if(this.tooltipModel){var e=this.mousePosition.x>v.a.size.width-400?"left":"right";return d.createPortal(r.createElement(y.Popover,{arrowOffsetTop:17,className:m()("cbioportal-frontend","cbioTooltip",g.a.Tooltip),positionLeft:this.mousePosition.x+("left"===e?-8:8),positionTop:this.mousePosition.y-17,style:{transform:"left"===e?"translate(-100%,0%)":void 0,maxWidth:400},placement:e},this.tooltipFunction(this.tooltipModel.datum||this.tooltipModel.data[0])),document.body)}return null}}])&&R(n.prototype,a),u&&R(n,u),t}();V([a.observable.ref],U.prototype,"tooltipModel",void 0),V([a.observable],U.prototype,"mousePosition",void 0),V([u.default],U.prototype,"containerRef",null),V([u.default],U.prototype,"resetSelection",null),V([a.computed],U.prototype,"usedGroups",null),V([a.computed],U.prototype,"groupLabels",null),V([a.computed],U.prototype,"chartWidth",null),V([a.computed],U.prototype,"scatterChartHeight",null),V([a.computed],U.prototype,"scatterChartExtent",null),V([a.computed],U.prototype,"barChartExtent",null),V([a.computed],U.prototype,"biggestCategoryLabelSize",null),V([a.computed],U.prototype,"svgWidth",null),V([a.computed],U.prototype,"svgHeight",null),V([a.computed],U.prototype,"leftPadding",null),V([a.computed],U.prototype,"rightPadding",null),V([a.computed],U.prototype,"topPadding",null),V([a.computed],U.prototype,"bottomPadding",null),V([u.default],U.prototype,"categoryCoord",null),V([u.default],U.prototype,"categoryCoordToGroup",null),V([a.computed],U.prototype,"groupCombinationSets",null),V([a.computed],U.prototype,"scatterData",null),V([a.computed],U.prototype,"barPlotData",null),V([a.computed],U.prototype,"barPlotHitzoneData",null),V([a.computed],U.prototype,"getGroupIntersectionLines",null),V([a.computed],U.prototype,"barPlotDomain",null),V([a.computed],U.prototype,"scatterPlotDomain",null),V([a.computed],U.prototype,"categoryTickValues",null),V([a.computed],U.prototype,"groupTickValues",null),V([u.default],U.prototype,"formatNumericalTick",null),V([u.default],U.prototype,"groupTick",null),V([a.computed],U.prototype,"scatterPlotTopPadding",null),V([a.computed],U.prototype,"tooltipComponent",null),V([u.default],U.prototype,"onMouseMove",null),V([u.default],U.prototype,"lineStroke",null),V([u.default],U.prototype,"fill",null),V([u.default],U.prototype,"getChart",null);var W=U=V([o.observer],U),F=n(907);function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e,t){return!t||"object"!==Y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Q=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Y(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},X=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=q(this,H(t).apply(this,arguments))).sampleSelection=[],e.patientSelection=[],e.sampleUpset=null,e.patientUpset=null,e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(t,r["Component"]),n=t,(o=[{key:"changeSelectedSampleRegions",value:function(e){this.sampleSelection=e}},{key:"changeSelectedPatientRegions",value:function(e){this.patientSelection=e}},{key:"sampleUpsetRef",value:function(e){this.sampleUpset=e}},{key:"patientUpsetRef",value:function(e){this.patientUpset=e}},{key:"submitSampleOverlapGroup",value:function(e,t){this.props.store.addGroup(e,t),this.sampleSelection=[]}},{key:"submitPatientOverlapGroup",value:function(e,t){this.props.store.addGroup(e,t),this.patientSelection=[]}},{key:"render",value:function(){return r.createElement("div",{style:{position:"relative",display:"".concat(this.props.sideBySide?"flex":"block"),maxWidth:this.props.maxWidth,overflow:"auto hidden"}},r.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",paddingBottom:20,marginRight:this.props.sideBySide?10:void 0}},r.createElement(W,{ref:this.sampleUpsetRef,groups:this.props.samplesVennPartition,uidToGroup:this.props.uidToGroup,caseType:"sample",title:"Samples overlap",onChangeSelectedCombinations:this.changeSelectedSampleRegions,selectedCombinations:this.sampleSelection}),this.sampleUpset&&this.props.samplesVennPartition.length>0&&r.createElement(F.a,{store:this.props.store,includedRegions:this.sampleSelection,submitGroup:this.submitSampleOverlapGroup,allGroupsInPlot:Object.keys(this.props.samplesVennPartition[0].key),caseType:"sample",width:this.sampleUpset.svgWidth})),r.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},r.createElement(W,{ref:this.patientUpsetRef,groups:this.props.patientsVennPartition,uidToGroup:this.props.uidToGroup,caseType:"patient",title:"Patients overlap",onChangeSelectedCombinations:this.changeSelectedPatientRegions,selectedCombinations:this.patientSelection}),this.patientUpset&&this.props.patientsVennPartition.length>0&&r.createElement(F.a,{store:this.props.store,includedRegions:this.patientSelection,submitGroup:this.submitPatientOverlapGroup,allGroupsInPlot:Object.keys(this.props.patientsVennPartition[0].key),caseType:"patient",width:this.patientUpset.svgWidth})))}}])&&z(n.prototype,o),i&&z(n,i),t}();Q([a.observable.shallow],X.prototype,"sampleSelection",void 0),Q([a.observable.shallow],X.prototype,"patientSelection",void 0),Q([a.observable.ref],X.prototype,"sampleUpset",void 0),Q([a.observable.ref],X.prototype,"patientUpset",void 0),Q([u.default,a.action],X.prototype,"changeSelectedSampleRegions",null),Q([u.default,a.action],X.prototype,"changeSelectedPatientRegions",null),Q([u.default],X.prototype,"sampleUpsetRef",null),Q([u.default],X.prototype,"patientUpsetRef",null),Q([u.default,a.action],X.prototype,"submitSampleOverlapGroup",null),Q([u.default,a.action],X.prototype,"submitPatientOverlapGroup",null),X=Q([o.observer],X);t.a=X},1089:function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(14),a=n(3),l=n(2),s=n(6),u=n(197),c=n(1),p=n.n(c),f=n(819),d=n(186),y=n.n(d),h=n(23),m=n(15),b=n(5),g=n.n(b),v=n(799),O=n.n(v),E=n(130),S=n(1060);function w(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function P(e){return e.xLength*e.yLength}function x(){for(var e=arguments.length<=0?void 0:arguments[0],t=1;t<arguments.length;t++){var n=t<0||arguments.length<=t?void 0:arguments[t],r=Math.max(e.x,n.x),o=Math.min(e.x+e.xLength,n.x+n.xLength),i=Math.max(e.y,n.y),a=Math.min(e.y+e.yLength,n.y+n.yLength);if(r>=o||i>=a)return{x:0,y:0,xLength:0,yLength:0};e={x:r,y:i,xLength:o-r,yLength:a-i}}return e}function k(e,t){var n=[e],r=!0,o=!1,i=void 0;try{for(var a,l=function(){var e=a.value;n=p.a.flatMap(n,function(t){return function(e,t){if(0===P(x(e,t)))return[e];var n=T([e,t]),r=[{x:n.xRange.min,y:t.y+t.yLength,xLength:n.xLength,yLength:n.yRange.max-(t.y+t.yLength)},{x:n.xRange.min,y:t.y,xLength:t.x-n.xRange.min,yLength:t.yLength},{x:n.xRange.min,y:n.yRange.min,xLength:n.xLength,yLength:t.y-n.yRange.min},{x:t.x+t.xLength,y:t.y,xLength:n.xRange.max-(t.x+t.xLength),yLength:t.yLength}].map(function(t){return x(t,e)});return r=r.filter(function(e){return P(e)>0})}(t,e)})},s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0)l()}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}function C(e){return p.a.sumBy(e,P)}function j(e,t){return k(x.apply(void 0,w(e.map(function(e){return t[e]}))),p.a.difference(Object.keys(t),e).map(function(e){return t[e]}))}function T(e){var t={xRange:{min:Math.min.apply(Math,w(e.map(function(e){return e.x}))),max:Math.max.apply(Math,w(e.map(function(e){return e.x+e.xLength})))},yRange:{min:Math.min.apply(Math,w(e.map(function(e){return e.y}))),max:Math.max.apply(Math,w(e.map(function(e){return e.y+e.yLength})))},xLength:0,yLength:0};return t.xLength=t.xRange.max-t.xRange.min,t.yLength=t.yRange.max-t.yRange.min,t}function _(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function G(e){var t=function(e){var t=[],n=p.a.values(e),r=!0,o=!1,i=void 0;try{for(var a,l=function(){for(var e=a.value,n=!1,r=0,o=t;r<o.length;r++){var i=o[r];p.a.some(i.rectangles,function(t){return P(x(e,t))>0})&&(i.rectangles.push(e),n=!0)}n||t.push({rectangles:[e]})},s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0)l()}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return t}(e);if(t.length>1){var n=(t=p.a.sortBy(t,function(e){return-P(T(e.rectangles))})).map(function(e){return T(e.rectangles)}),r=Math.max.apply(Math,_(n.map(function(e){return e.xRange.max-e.xRange.min})))/10,o=Math.max.apply(Math,_(n.map(function(e){return e.yRange.max-e.yRange.min})))/10,i=[];switch(n.length){case 2:i=[{x:0,y:0},{x:n[0].xLength+r,y:0}];break;case 3:i=[{x:0,y:0},{x:Math.max(n[0].xLength,n[2].xLength)+r,y:0},{x:0,y:Math.max(n[0].yLength,n[1].yLength)+o}]}for(var a=0;a<i.length;a++){var l=i[a].x-n[a].xRange.min,s=i[a].y-n[a].yRange.min,u=!0,c=!1,f=void 0;try{for(var d,y=t[a].rectangles[Symbol.iterator]();!(u=(d=y.next()).done);u=!0){var h=d.value;h.x+=l,h.y+=s}}catch(e){c=!0,f=e}finally{try{u||null==y.return||y.return()}finally{if(c)throw f}}}}}function A(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var R=n(1061);function D(e,t){var n=j(e,t);if(0===n.length)return null;var r=p.a.sortBy(n,function(e){return-P(e)})[0];return{x:r.x+r.xLength/2,y:r.y+r.yLength/2}}function M(e,t,n){var r,o,i,a,l=0,s=0,u=!0,c=!1,p=void 0;try{for(var f,d=t[Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var y=f.value,h=C(j(y.sets,e)),m=h-y.size;l+=m*m,2===y.sets.length&&0===h&&y.size>0&&(s+=(r=e[y.sets[0]],o=e[y.sets[1]],i=void 0,a=void 0,i=r.x-o.x,a=r.y-o.y,Math.sqrt(i*i+a*a)))}}catch(e){c=!0,p=e}finally{try{u||null==d.return||d.return()}finally{if(c)throw p}}var b=!0,g=!1,v=void 0;try{for(var O,E=n[Symbol.iterator]();!(b=(O=E.next()).done);b=!0){var S=O.value,w=P(e[S.uid])-S.size;l+=w*w}}catch(e){g=!0,v=e}finally{try{b||null==E.return||E.return()}finally{if(g)throw v}}return{areaError:l,otherPenalties:s}}function L(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t){return!t||"object"!==U(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var W=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":U(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};function F(e){e.target.setAttribute("fill",e.target.getAttribute("data-hover-fill"))}function z(e){e.target.setAttribute("fill",e.target.getAttribute("data-default-fill"))}var q=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=N(this,V(t).apply(this,arguments))).svg=null,e.tooltipModel=null,e.mousePosition={x:0,y:0},e.regionClickHandlers=Object(f.a)(function(t,n){e.props.onChangeSelectedRegions(Object(E.i)(n.combination,e.props.selection.regions))}),e.regionHoverHandlers=Object(f.a)(function(t,n){n.sizeOfRegion>0&&(e.tooltipModel=n,e.mousePosition.x=t.pageX,e.mousePosition.y=t.pageY)}),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(t,r["Component"]),n=t,(o=[{key:"svgRef",value:function(e){this.svg=e}},{key:"resetSelection",value:function(){this.props.onChangeSelectedRegions([])}},{key:"resetTooltip",value:function(){this.tooltipModel=null}},{key:"render",value:function(){return r.createElement("g",{transform:"translate(".concat(this.props.x,",").concat(this.props.y,")"),onMouseOut:this.resetTooltip},r.createElement("rect",{x:"0",y:"0",fill:"white",fillOpacity:0,width:this.props.width,height:this.props.height,onMouseMove:this.resetTooltip,onClick:this.resetSelection}),this.svgElements,!!this.tooltipModel&&h.createPortal(r.createElement(m.Popover,{arrowOffsetTop:17,className:g()("cbioportal-frontend","cbioTooltip",O.a.Tooltip),positionLeft:this.mousePosition.x+15,positionTop:this.mousePosition.y-17},this.tooltipContent),document.body))}},{key:"layoutParams",get:function(){var e,t=this;switch(this.props.groups.length){case 2:e=[[0],[1],[0,1]];break;case 3:default:e=[[0],[1],[2],[0,1],[0,2],[1,2],[0,1,2]]}var n=e.map(function(e){var n=p.a.intersection.apply(p.a,L(e.map(function(e){return t.props.groups[e].cases}))),r=n.length,o=!0,i=!1,a=void 0;try{for(var l,s=Object(E.b)(e,t.props.groups.length)[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var u=l.value;p.a.pullAll(n,t.props.groups[u].cases)}}catch(e){i=!0,a=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw a}}return{combination:e,sizeOfIntersectionOfSets:r,sizeOfRegion:n.length,color:Object(E.a)(e.map(function(e){return t.props.uidToGroup[t.props.groups[e].uid].color})),labelPosition:null}}),r=n.map(function(e){return{sets:e.combination.map(function(e){return t.props.groups[e].uid}),size:e.sizeOfRegion,sizeOfIntersectionOfSets:e.sizeOfIntersectionOfSets}}),o=this.props.groups.map(function(e){return{size:e.cases.length,uid:e.uid,color:t.props.uidToGroup[e.uid].color,disjoint:(n=r.find(function(t){return 1===t.sets.length&&t.sets[0]===e.uid}),n.size===n.sizeOfIntersectionOfSets)};var n}),i=function(e,t){var n=Math.max.apply(Math,_(t.map(function(e){return e.size})))/30;t=p.a.cloneDeep(t),e=p.a.cloneDeep(e);var r=p.a.keyBy(t,function(e){return e.uid}),o=!0,i=!1,a=void 0;try{for(var l,s=e[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var u=l.value;if(u.size>0&&u.size<n){var c=n-u.size;u.size+=c,u.sizeOfIntersectionOfSets+=c;var f=!0,d=!1,y=void 0;try{for(var h,m=u.sets[Symbol.iterator]();!(f=(h=m.next()).done);f=!0)r[h.value].size+=c}catch(e){d=!0,y=e}finally{try{f||null==m.return||m.return()}finally{if(d)throw y}}}}}catch(e){i=!0,a=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw a}}return{regions:e,sets:t}}(r,o),a=function(e,t,n){n=n||{};var r,o=R.bestInitialLayout(e.map(function(e){return{sets:e.sets,size:e.sizeOfIntersectionOfSets}}),n),i=p.a.mapValues(o,function(e){return{x:e.x-e.radius,y:e.y-e.radius,xLength:2*e.radius,yLength:2*e.radius}}),a=function(e,t,n){var r,o,i=t[6*e],a=t[6*e+1],l=Math.abs(t[6*e+2]),s=l+Math.abs(t[6*e+3]);return n?(r=l,o=s):o=(r=Math.abs(t[6*e+4]))+Math.abs(t[6*e+5]),{x:i-l,y:a-r,xLength:s,yLength:o}},l=[],s=!0,u=!1,c=void 0;try{for(var f,d=t[Symbol.iterator]();!(s=(f=d.next()).done);s=!0){var y=f.value;l.push.apply(l,A([(r=i[y.uid]).x+r.xLength/2,r.y+r.yLength/2,r.xLength/2,r.xLength/2,r.yLength/2,r.yLength/2]))}}catch(e){u=!0,c=e}finally{try{s||null==d.return||d.return()}finally{if(u)throw c}}for(var h={},m=Object(S.nelderMead)(function(n){for(var r={},o=0;o<t.length;o++)r[t[o].uid]=a(o,n,t[o].disjoint);var i=M(r,e,t);return i.areaError+i.otherPenalties},l,n).x,b=0;b<t.length;b++)h[t[b].uid]=a(b,m,t[b].disjoint);return G(h),{rectangles:h,finalErrorValue:M(h,e,t).areaError}}(i.regions,i.sets,{maxIterations:1e4}),l=function(e,t,n,r){var o=p.a.values(e),i=Object.keys(e);t-=2*r,n-=2*r;var a=T(o),l=a.xRange,s=a.yRange;if(l.max==l.min||s.max==s.min)return console.log("not scaling layout: zero size detected"),e;for(var u=t/(l.max-l.min),c=n/(s.max-s.min),f=Math.min(c,u),d=(t-(l.max-l.min)*f)/2,y=(n-(s.max-s.min)*f)/2,h={},m=0;m<o.length;++m){var b=o[m];h[i[m]]={xLength:f*b.xLength,yLength:f*b.yLength,x:r+d+(b.x-l.min)*f,y:r+y+(b.y-s.min)*f}}return h}(a.rectangles,this.props.width,this.props.height,20),s=!0,u=!1,c=void 0;try{for(var f,d=n[Symbol.iterator]();!(s=(f=d.next()).done);s=!0){var y=f.value;y.sizeOfRegion>0&&(y.labelPosition=D(y.combination.map(function(e){return t.props.groups[e].uid}),l))}}catch(e){u=!0,c=e}finally{try{s||null==d.return||d.return()}finally{if(u)throw c}}return a.finalErrorValue>=1&&setTimeout(this.props.onLayoutFailure,0),{rectangles:l,regions:n,sets:o}}},{key:"svgElements",get:function(){var e=this,t=this.layoutParams.rectangles,n=this.props.groups.map(function(n,o){return r.createElement("clipPath",{id:"".concat(e.props.uid,"_circle_").concat(o)},r.createElement("rect",{x:t[n.uid].x,y:t[n.uid].y,width:t[n.uid].xLength,height:t[n.uid].yLength,rx:8}))}),o=p.a.flattenDeep(this.layoutParams.regions.map(function(t){var n=t.combination,o=r.createElement("g",null,r.createElement("rect",{x:"0",y:"0",height:e.props.height,width:e.props.width,fill:t.color,style:{cursor:t.sizeOfRegion>0?"pointer":"default"},"data-default-fill":t.color,"data-hover-fill":u.hsl(t.color).brighter(1).rgb(),onMouseOver:t.sizeOfRegion>0?F:void 0,onMouseOut:t.sizeOfRegion>0?z:void 0,onMouseMove:e.regionHoverHandlers({combination:n,sizeOfRegion:t.sizeOfRegion}),onClick:t.sizeOfRegion>0?e.regionClickHandlers({combination:n}):void 0,"data-test":"".concat(e.props.caseType).concat(t.combination.join(","),"VennRegion")})),i=!0,a=!1,l=void 0;try{for(var s,c=n[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var p=s.value;o=r.createElement("g",{clipPath:"url(#".concat(e.props.uid,"_circle_").concat(p,")")},o)}}catch(e){a=!0,l=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw l}}return[o]})),i=p.a.sortBy(this.layoutParams.sets,function(e){return-e.size}).map(function(e){var n=e.uid;return r.createElement("rect",{x:t[n].x,y:t[n].y,width:t[n].xLength,height:t[n].yLength,fill:"none",stroke:e.color,strokeWidth:2,rx:8})}),a=p.a.flattenDeep(this.layoutParams.regions.map(function(t){if(0===t.sizeOfRegion||!t.labelPosition)return[];var n=Object(E.g)(t.combination,e.props.selection.regions),o="".concat(t.sizeOfRegion.toString()).concat(n?" "+String.fromCharCode(10004):""),i=y()({text:o,fontFamily:"Arial",fontSize:"13px",lineHeight:1}),a=t.labelPosition,l=null;return n&&(l=r.createElement("rect",{x:a.x-i.width.value/2-4,y:a.y-i.height.value+3,width:i.width.value+8,height:i.height.value+4,fill:"yellow",rx:3,ry:3,pointerEvents:"none"})),[l,r.createElement("text",{x:a.x,y:a.y,style:{userSelect:"none",color:n?"black":Object(E.e)(t.color)},fontWeight:t.sizeOfRegion>0?"bold":"normal",pointerEvents:"none",textAnchor:"middle",alignmentBaseline:"middle","data-test":"".concat(e.props.caseType).concat(t.combination.join(","),"VennLabel")},o)]}));return r.createElement(r.Fragment,null,n,o,i,a)}},{key:"tooltipContent",get:function(){var e=this;if(!this.tooltipModel)return null;var t=this.tooltipModel.combination.map(function(t){return e.props.groups[t].uid}).map(function(t){return e.props.uidToGroup[t]});return r.createElement("div",{style:{width:300,whiteSpace:"normal"}},r.createElement("strong",null,this.tooltipModel.sizeOfRegion," ",Object(a.S)(this.props.caseType,this.tooltipModel.sizeOfRegion)),r.createElement("br",null),"in only ",Object(E.f)(t,"and"),".")}}])&&I(n.prototype,o),i&&I(n,i),t}();W([l.observable.ref],q.prototype,"svg",void 0),W([l.observable.ref],q.prototype,"tooltipModel",void 0),W([l.observable],q.prototype,"mousePosition",void 0),W([s.default],q.prototype,"svgRef",null),W([l.computed],q.prototype,"layoutParams",null),W([l.computed],q.prototype,"svgElements",null),W([s.default],q.prototype,"resetSelection",null),W([s.default],q.prototype,"resetTooltip",null),W([l.computed],q.prototype,"tooltipContent",null);var H=q=W([o.observer],q),K=n(907),Y=n(909);function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function X(e,t){return!t||"object"!==$(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ee=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":$(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},te=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=X(this,J(t).apply(this,arguments))).sampleSelection={regions:[]},e.patientSelection={regions:[]},e}var n,o,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(t,r["Component"]),n=t,(o=[{key:"submitSampleOverlapGroup",value:function(e,t){this.props.store.addGroup(e,t),this.sampleSelection.regions=[]}},{key:"submitPatientOverlapGroup",value:function(e,t){this.props.store.addGroup(e,t),this.patientSelection.regions=[]}},{key:"changeSelectedSampleRegions",value:function(e){this.sampleSelection.regions=e}},{key:"changeSelectedPatientRegions",value:function(e){this.patientSelection.regions=e}},{key:"render",value:function(){return r.createElement("div",{style:{position:"relative",paddingBottom:"".concat(Math.max(this.sampleSelection.regions.length,this.patientSelection.regions.length)+1,"em")}},r.createElement("svg",{id:this.props.svgId||"",xmlns:"http://www.w3.org/2000/svg",width:this.chartWidth,height:this.chartHeight,role:"img",viewBox:"0 0 ".concat(this.chartWidth," ").concat(this.chartHeight)},r.createElement(i.VictoryLabel,{style:{fontWeight:"bold",fontFamily:"Verdana,Arial,sans-serif",textAnchor:"middle",userSelect:"none"},x:200,y:"1.2em",text:"Samples overlap"}),r.createElement(H,{uid:"samples",x:0,y:15,groups:this.props.sampleGroups,uidToGroup:this.props.uidToGroup,width:400,height:400,selection:this.sampleSelection,onChangeSelectedRegions:this.changeSelectedSampleRegions,caseType:"sample",onLayoutFailure:this.props.onLayoutFailure}),r.createElement(i.VictoryLabel,{style:{fontWeight:"bold",fontFamily:"Verdana,Arial,sans-serif",textAnchor:"middle",userSelect:"none"},x:200,dx:410,y:"1.2em",text:"Patients overlap"}),r.createElement(H,{uid:"patients",x:410,y:15,groups:this.props.patientGroups,uidToGroup:this.props.uidToGroup,width:400,height:400,selection:this.patientSelection,onChangeSelectedRegions:this.changeSelectedPatientRegions,caseType:"patient",onLayoutFailure:this.props.onLayoutFailure}),this.legendData.length>0&&r.createElement(i.VictoryLegend,{x:this.vennPlotAreaWidth+20,y:100,theme:a.a,labelComponent:r.createElement(Y.a,{maxLabelWidth:100,uidToGroup:this.props.uidToGroup,dy:"0.4em"}),standalone:!1,data:this.legendData})),[r.createElement(K.a,{store:this.props.store,includedRegions:this.sampleSelectedRegionsUids,style:{position:"absolute",left:0,top:420},submitGroup:this.submitSampleOverlapGroup,allGroupsInPlot:this.sampleGroupUids,caseType:"sample",width:400}),r.createElement(K.a,{store:this.props.store,includedRegions:this.patientSelectedRegionsUids,style:{position:"absolute",left:410,top:420},submitGroup:this.submitPatientOverlapGroup,allGroupsInPlot:this.patientGroupUids,caseType:"patient",width:400})])}},{key:"chartWidth",get:function(){return this.vennPlotAreaWidth+20+180}},{key:"chartHeight",get:function(){return 500}},{key:"sampleGroupUids",get:function(){return this.props.sampleGroups.map(function(e){return e.uid})}},{key:"patientGroupUids",get:function(){return this.props.patientGroups.map(function(e){return e.uid})}},{key:"legendData",get:function(){var e=this;return this.props.sampleGroups.map(function(t){return{name:t.uid,symbol:{fill:e.props.uidToGroup[t.uid].color,strokeOpacity:0,type:"square",size:6}}})}},{key:"vennPlotAreaWidth",get:function(){return 810}},{key:"sampleSelectedRegionsUids",get:function(){var e=this;return this.sampleSelection.regions.map(function(t){return t.map(function(t){return e.props.sampleGroups[t].uid})})}},{key:"patientSelectedRegionsUids",get:function(){var e=this;return this.patientSelection.regions.map(function(t){return t.map(function(t){return e.props.patientGroups[t].uid})})}}])&&Q(n.prototype,o),l&&Q(n,l),t}();ee([l.observable.shallow],te.prototype,"sampleSelection",void 0),ee([l.observable.shallow],te.prototype,"patientSelection",void 0),ee([l.computed],te.prototype,"chartWidth",null),ee([l.computed],te.prototype,"chartHeight",null),ee([s.default,l.action],te.prototype,"submitSampleOverlapGroup",null),ee([s.default,l.action],te.prototype,"submitPatientOverlapGroup",null),ee([s.default,l.action],te.prototype,"changeSelectedSampleRegions",null),ee([s.default,l.action],te.prototype,"changeSelectedPatientRegions",null),ee([l.computed],te.prototype,"sampleGroupUids",null),ee([l.computed],te.prototype,"patientGroupUids",null),ee([l.computed],te.prototype,"legendData",null),ee([l.computed],te.prototype,"vennPlotAreaWidth",null),ee([l.computed],te.prototype,"sampleSelectedRegionsUids",null),ee([l.computed],te.prototype,"patientSelectedRegionsUids",null),te=ee([o.observer],te);t.a=te},1091:function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(110),a=n(66),l=n(289),s=n(6),u=n(5),c=n.n(u),p=n(801),f=n.n(p),d=n(47),y=n(824),h=n(817),m=n(130),b=n(3),g=n(23),v=n(15),O=n(2);function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var C=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":k(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},j=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=w(this,P(t).apply(this,arguments))).hovered=!1,e.hoverTimeout=null,e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(t,r["Component"]),n=t,(o=[{key:"buttonRef",value:function(e){this.button=e}},{key:"onMouseClick",value:function(){this.hovered=!1}},{key:"onMouseEnter",value:function(){var e=this;this.hoverTimeout=setTimeout(function(){e.hovered=!0},b.n)}},{key:"onMouseLeave",value:function(){this.hovered=!1,clearTimeout(this.hoverTimeout),this.hoverTimeout=null}},{key:"onMouseDown",value:function(){this.hovered=!1}},{key:"render",value:function(){var e,t=this,n=this.props.group,o=this.props.isSelected(n.name),i=Object(d.w)([n]),a=Object(d.v)(i,this.props.sampleSet);return r.createElement("button",{ref:this.buttonRef,className:c()("btn btn-xs",(e={},E(e,f.a.buttonUnselected,!o),E(e,f.a.buttonExcludedFromAnalysis,this.props.excludedFromAnalysis),e)),onClick:this.onMouseClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseDown:this.onMouseDown,style:{backgroundColor:n.color},"data-test":"groupSelectorButton".concat(n.name)},r.createElement("span",{style:{display:"flex",alignItems:"center"}},r.createElement("div",{style:{display:"flex",alignItems:"center"},onClick:function(){return t.props.onClick(n.name)}},r.createElement("div",{className:"text-with-ellipsis",style:{display:"inline-block",color:Object(m.e)(n.color),maxWidth:200}},Object(m.h)(n)),"Â ",r.createElement("span",{style:{color:Object(m.e)(n.color)}},"(",i.length===a.length?i.length:"".concat(i.length,"/").concat(a.length),")")),n.nonExistentSamples.length>0&&r.createElement(y.a,{style:{marginLeft:7},tooltip:r.createElement(d.e,{samples:n.nonExistentSamples})}),this.props.deletable&&r.createElement("div",{style:{paddingLeft:2,marginLeft:5,marginRight:-3,borderLeft:"1px dashed white",cursor:"pointer"},"data-test":"deleteButton",onClick:function(){return t.props.onClickDelete(n.name)}},r.createElement("i",{className:"fa fa-times-circle"}))),this.button&&g.createPortal(r.createElement(v.Overlay,{rootClose:!0,placement:"top",show:this.hovered,target:this.button},r.createElement(v.Popover,{arrowOffsetTop:17,className:c()("cbioportal-frontend","cbioTooltip")},r.createElement("div",null,Object(m.h)(n)," ",Object(d.j)(i,a),n.description&&" - ".concat(n.description)),this.props.excludedFromAnalysis&&r.createElement("div",{style:{maxWidth:300,whiteSpace:"initial",marginTop:5}},"This group is a subset of the other selected groups, so it's excluded from analysis, and not considered in overlap calculations."))),document.body))}}])&&S(n.prototype,o),i&&S(n,i),t}();C([O.observable],j.prototype,"hovered",void 0),C([O.observable.ref],j.prototype,"button",void 0),C([s.default,O.action],j.prototype,"buttonRef",null),C([s.default,O.action],j.prototype,"onMouseClick",null),C([s.default,O.action],j.prototype,"onMouseEnter",null),C([s.default,O.action],j.prototype,"onMouseLeave",null),C([s.default,O.action],j.prototype,"onMouseDown",null),j=C([o.observer],j);var T=Object(h.SortableElement)(j);function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var M=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":D(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},L=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),G(this,A(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement("div",{className:f.a.groupButtons},r.createElement("div",null,this.props.buttons))}}])&&_(n.prototype,o),i&&_(n,i),t}();L=M([o.observer],L);var I=Object(h.SortableContainer)(L);function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t){return!t||"object"!==W(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var F=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":W(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},z=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),V(this,B(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement("div",{style:{display:"inline-flex",whiteSpace:"nowrap",paddingLeft:7,paddingRight:7}},r.createElement("a",{onClick:this.props.store.selectAllGroups},"Select all"),"Â |Â ",r.createElement("a",{onClick:this.props.store.deselectAllGroups},"Deselect all"))}}])&&N(n.prototype,o),i&&N(n,i),t}();z=F([o.observer],z);var q=Object(h.SortableElement)(z),H=n(174);function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Y(e,t){return!t||"object"!==J(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Z=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":J(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},$=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Y(this,Q(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement("button",{className:c()("btn btn-xs btn-default"),onClick:this.props.toggleCollapsedGroups,"data-test":"groupSelectorCollapseButton"},this.props.collapsed?"".concat(this.props.numCollapsedGroups," more groups ").concat(String.fromCharCode(9660)):"Show less ".concat(String.fromCharCode(9650)))}}])&&K(n.prototype,o),i&&K(n,i),t}();$=Z([o.observer],$);var ee=Object(h.SortableElement)($);function te(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e,t){return!t||"object"!==ae(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ae(e){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var le=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ae(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},se=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=re(this,oe(t).apply(this,arguments))).collapsedGroupsShown=!1,e.dragging=!1,e.tabUI=Object(i.a)({await:function(){return[e.props.store._originalGroups,e.props.store.sampleMap,e.props.store.overlapComputations]},render:function(){var t=e.props.store._originalGroups.result.length;if(0===t)return null;var n,o=[];if(void 0===e.props.groupCollapseThreshold||t<=e.props.groupCollapseThreshold||e.collapsedGroupsShown?o=e.props.store._originalGroups.result.map(e.makeGroupButton):(n=o).push.apply(n,te(e.props.store._originalGroups.result.slice(0,e.props.groupCollapseThreshold-1).map(e.makeGroupButton))),void 0!==e.props.groupCollapseThreshold&&t>e.props.groupCollapseThreshold){var i=t-e.props.groupCollapseThreshold+1;o.push(r.createElement(ee,{numCollapsedGroups:i,toggleCollapsedGroups:e.toggleCollapsedGroups,collapsed:!e.collapsedGroupsShown,disabled:!0,index:o.length}))}return o.push(r.createElement(q,{store:e.props.store,disabled:!0,index:o.length})),r.createElement("div",{style:{display:"flex",alignItems:"center",position:"relative"}},r.createElement("strong",{style:{marginRight:5}},"Groups: "),r.createElement("span",{style:{fontSize:12,marginRight:3}},"(drag to reorder)"),r.createElement(I,{buttons:o,axis:"xy",onSortStart:e.onSortStart,onSortEnd:e.onSortEnd,distance:6}))},renderPending:function(){return r.createElement(a.a,{isLoading:!0,size:"big",center:!0})},renderError:function(){return r.createElement(l.a,null)}}),e}var n,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}(t,r["Component"]),n=t,(o=[{key:"toggleCollapsedGroups",value:function(){this.collapsedGroupsShown=!this.collapsedGroupsShown}},{key:"isSelected",value:function(e){return!!this.props.store.isGroupSelected(e)}},{key:"onClick",value:function(e){this.dragging||this.props.store.toggleGroupSelected(e)}},{key:"onClickDelete",value:function(e){this.dragging||this.props.store.deleteGroup(e)}},{key:"onSortEnd",value:function(e){e.oldIndex!==e.newIndex&&this.props.store.updateGroupOrder(e.oldIndex,e.newIndex),this.dragging=!1}},{key:"onSortStart",value:function(){this.dragging=!0}},{key:"makeGroupButton",value:function(e,t){var n=this.props.store.overlapStrategy===H.a.EXCLUDE&&e.uid in this.props.store.overlapComputations.result.excludedFromAnalysis;return r.createElement(T,{isSelected:this.isSelected,deletable:this.props.isGroupDeletable(e),onClick:this.onClick,onClickDelete:this.onClickDelete,sampleSet:this.props.store.sampleMap.result,group:e,index:t,excludedFromAnalysis:n})}},{key:"render",value:function(){return this.tabUI.component}}])&&ne(n.prototype,o),s&&ne(n,s),t}();le([O.observable],se.prototype,"collapsedGroupsShown",void 0),le([s.default,O.action],se.prototype,"toggleCollapsedGroups",null),le([s.default],se.prototype,"isSelected",null),le([s.default],se.prototype,"onClick",null),le([s.default],se.prototype,"onClickDelete",null),le([s.default],se.prototype,"onSortEnd",null),le([s.default],se.prototype,"onSortStart",null),le([s.default],se.prototype,"makeGroupButton",null),se=le([o.observer],se);t.a=se},1092:function(e,t,n){"use strict";var r=n(0),o=n(915),i=(n(812),n(66)),a=n(9),l=n(3),s=n(110),u=n(47),c=n(289),p=n(130),f=n(298),d=n(30),y=n(1),h=n.n(y),m=n(96);function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var P=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":w(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},x=function(e){function t(){return g(this,t),v(this,O(t).apply(this,arguments))}return E(t,m["b"]),t}(),k=function(e){function t(){return g(this,t),v(this,O(t).apply(this,arguments))}var n,o,i;return E(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement(x,{data:this.props.survivalDescriptionData,columns:[{name:"Study",render:function(e){return r.createElement("span",null,e.studyName)},sortBy:function(e){return e.studyName}},{name:"Description",render:function(e){return r.createElement("span",null,e.description)},sortBy:function(e){return e.description}}],initialSortColumn:"Description",initialSortDirection:"desc",showPagination:!0,initialItemsPerPage:10,showColumnVisibility:!1,showFilter:!1,showCopyDownload:!1})}}])&&b(n.prototype,o),i&&b(n,i),t}(),C=k=P([a.observer],k),j=n(909),T=n(174),_=n(93),G=n(2),A=n(801),R=n.n(A),D=n(6),M=n(151),L=n(49),I=n(54),N=n(312),V=n(8);function B(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F(e,t){return!t||"object"!==K(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Y,Q=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":K(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},X=function(e){function t(e,n){var r;return W(this,t),(r=F(this,z(t).call(this,e))).dataHighlighter=function(e){return e.prefix===n()},r}return q(t,M["a"]),t}();function J(e){var t="# in ".concat(e);return{name:t,render:function(t){return r.createElement("span",null,t.numPatientsPerGroup[e])},sortBy:function(t){return t.numPatientsPerGroup[e]},filter:Object(N.a)(function(t){return t.numPatientsPerGroup[e]},t),download:function(t){return t.numPatientsPerGroup[e].toString()},visible:!1}}function Z(e){var t="Median survival in ".concat(e);return{name:t,render:function(t){return r.createElement("span",null,t.medianPerGroup[e])},sortBy:function(t){var n=parseFloat(t.medianPerGroup[e]);return isNaN(n)?Number.POSITIVE_INFINITY:n},filter:Object(N.a)(function(t){var n=parseFloat(t.medianPerGroup[e]);return isNaN(n)?Number.POSITIVE_INFINITY:n},t),download:function(t){return t.medianPerGroup[e]},visible:!1}}!function(e){e.P_VALUE="p-Value"}(Y||(Y={}));var $=[{name:"Survival Type",render:function(e){return r.createElement("span",null,e.displayText)},filter:function(e,t,n){return e.displayText.toUpperCase().indexOf(n)>-1},sortBy:function(e){return e.displayText},download:function(e){return e.displayText},visible:!0},{name:"# Patients With Data",render:function(e){return r.createElement("span",null,e.numPatients)},sortBy:function(e){return e.numPatients},filter:Object(N.a)(function(e){return e.numPatients},"# Patients With Data"),download:function(e){return e.numPatients.toString()},visible:!0}],ee=[{name:Y.P_VALUE,render:function(e){return r.createElement("span",null,null!==e.pValue?Object(L.e)(e.pValue,3,.01,-10):"N/A")},sortBy:function(e){return e.pValue},filter:Object(N.a)(function(e){return e.pValue},Y.P_VALUE),download:function(e){return null!==e.pValue?Object(I.b)(e.pValue,3,.01):"N/A"},tooltip:r.createElement("span",null,"Derived from Log Rank test."),visible:!0},{name:"q-Value",render:function(e){return r.createElement("span",null,null!==e.qValue?Object(L.e)(e.qValue,3,.01,-10):"N/A")},sortBy:function(e){return e.qValue},filter:Object(N.a)(function(e){return e.qValue},"q-Value"),download:function(e){return null!==e.qValue?Object(I.b)(e.qValue,3,.01):"N/A"},tooltip:r.createElement("span",null,"Derived from Benjamini-Hochberg FDR correction procedure."),visible:!0}],te=function(e){function t(e){var n;return W(this,t),(n=F(this,z(t).call(this,e))).dataStore=new X(function(){return n.props.survivalPrefixes},n.props.getSelectedPrefix),n.columnVisibility=n.initColumnVisibility(),n}var n,o,i;return q(t,r["Component"]),n=t,(o=[{key:"initColumnVisibility",value:function(){return h.a.mapValues(h.a.keyBy(this.columns,function(e){return e.name}),function(e){return e.visible})}},{key:"onRowClick",value:function(e){this.props.setSelectedPrefix(e.prefix)}},{key:"onColumnToggled",value:function(e,t){this.columnVisibility=Object(l.bb)(this.columnVisibility,e,t)}},{key:"render",value:function(){return r.createElement(m.b,{columns:this.columns,showColumnVisibility:!0,columnVisibility:this.columnVisibility,columnVisibilityProps:{onColumnToggled:this.onColumnToggled},initialFilterString:"patients>10",initialSortColumn:Y.P_VALUE,initialSortDirection:"asc",dataStore:this.dataStore,onRowClick:this.onRowClick,paginationProps:{itemsPerPageOptions:[15]},initialItemsPerPage:15,copyDownloadProps:{showCopy:!1}})}},{key:"columns",get:function(){var e=[].concat($,B(this.props.groupNames.map(J)),B(this.props.groupNames.map(Z)));return V.b.serverConfig.survival_show_p_q_values_in_survival_type_table&&e.push.apply(e,ee),e}}])&&U(n.prototype,o),i&&U(n,i),t}();Q([G.observable],te.prototype,"columnVisibility",void 0),Q([D.default],te.prototype,"onRowClick",null),Q([D.default],te.prototype,"onColumnToggled",null),Q([G.computed],te.prototype,"columns",null);var ne=te=Q([a.observer],te),re=n(158),oe=n(825);function ie(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function le(e,t){return!t||"object"!==ce(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ce(e){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var pe=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ce(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},fe=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=le(this,se(t).apply(this,arguments))).multipleDescriptionWarningMessageWithoutTooltip="The survival data on patients from different cohorts may have been defined by ",e.multipleDescriptionWarningMessageWithTooltip="different criteria.",e.differentDescriptionExistMessage="Different descriptions of survival data were used for different studies.",e.selectedSurvivalPlotPrefix=void 0,e.analysisGroupsComputations=Object(l.T)({await:function(){return[e.props.store.activeGroups,e.props.store.patientsVennPartition,e.props.store.uidToGroup,e.props.store.patientToSamplesSet]},invoke:function(){var t=h.a.reduce(e.props.store._activeGroupsNotOverlapRemoved.result,function(e,t,n){return e[t.uid]=n,e},{}),n=e.props.store.patientsVennPartition.result;n.sort(function(e,n){var r=Object.keys(e.key).filter(function(t){return e.key[t]}),o=Object.keys(n.key).filter(function(e){return n.key[e]});return r.length!==o.length?r.length-o.length:h.a.sumBy(r,function(e){return t[e]})-h.a.sumBy(o,function(e){return t[e]})});var r=e.props.store.uidToGroup.result,o=[],i={};if(e.props.store.overlapStrategy===T.a.INCLUDE){var a=!0,l=!1,s=void 0;try{for(var u,c=function(){var e=u.value,n=Object.keys(e.key).filter(function(t){return e.key[t]});if(n.sort(function(e,n){return t[e]-t[n]}),n.length>0){var a="Only ".concat(n.map(function(e){return r[e].nameWithOrdinal}).join(", ")),l=n.join(","),s=!0,c=!1,f=void 0;try{for(var d,y=e.value[Symbol.iterator]();!(s=(d=y.next()).done);s=!0){var h=d.value;i[h]=[l]}}catch(e){c=!0,f=e}finally{try{s||null==y.return||y.return()}finally{if(c)throw f}}o.push({name:a,color:Object(p.a)(n.map(function(e){return r[e].color})),value:l,legendText:JSON.stringify(n)})}},f=n[Symbol.iterator]();!(a=(u=f.next()).done);a=!0)c()}catch(e){l=!0,s=e}finally{try{a||null==f.return||f.return()}finally{if(l)throw s}}}else{var y=e.props.store.patientToSamplesSet.result,m=!0,b=!1,g=void 0;try{for(var v,O=e.props.store.activeGroups.result[Symbol.iterator]();!(m=(v=O.next()).done);m=!0){var E=v.value,S=E.nameWithOrdinal;o.push({name:S,color:E.color,value:E.uid,legendText:E.uid});var w=Object(d.Y)([E]),P=!0,x=!1,k=void 0;try{for(var C,j=w[Symbol.iterator]();!(P=(C=j.next()).done);P=!0){var _=C.value,G=y.get({studyId:_.studyId,patientId:_.patientId});G&&G.length&&(i[G[0].uniquePatientKey]=[E.uid])}}catch(e){x=!0,k=e}finally{try{P||null==j.return||j.return()}finally{if(x)throw k}}}}catch(e){b=!0,g=e}finally{try{m||null==O.return||O.return()}finally{if(b)throw g}}}return Promise.resolve({analysisGroups:o,patientToAnalysisGroups:i})}}),e.sortedGroupedSurvivals=Object(l.T)({await:function(){return[e.analysisGroupsComputations,e.props.store.patientSurvivals]},invoke:function(){var t=e.analysisGroupsComputations.result.patientToAnalysisGroups,n=h.a.mapValues(e.props.store.patientSurvivals.result,function(e){return h.a.reduce(e,function(e,n){n.uniquePatientKey in t&&t[n.uniquePatientKey].forEach(function(t){e[t]=e[t]||[],e[t].push(n)});return e},{})});return Promise.resolve(h.a.mapValues(n,function(e){return h.a.mapValues(e,function(e){return e.sort(function(e,t){return e.months-t.months})})}))}}),e.pValuesByPrefix=Object(l.T)({await:function(){return[e.sortedGroupedSurvivals,e.analysisGroupsComputations]},invoke:function(){var t=e.analysisGroupsComputations.result.analysisGroups;return Promise.resolve(h.a.mapValues(e.sortedGroupedSurvivals.result,function(e){var n=null;return t.length>1&&(n=oe.a.apply(void 0,ie(t.map(function(t){return e[t.value]||[]})))),n}))}}),e.qValuesByPrefix=Object(l.T)({await:function(){return[e.pValuesByPrefix]},invoke:function(){var t=h.a.map(e.pValuesByPrefix.result,function(e,t){return{pVal:e,prefix:t}}),n=h.a.sortBy(t.filter(function(e){return null!==e.pVal}),function(e){return e.pVal}),r=Object(re.a)(n.map(function(e){return e.pVal})),o=h.a.clone(e.pValuesByPrefix.result);return n.forEach(function(e,t){o[e.prefix]=r[t]}),Promise.resolve(o)}}),e.tabUI=Object(s.a)({await:function(){return e.props.store._activeGroupsNotOverlapRemoved.isComplete&&e.props.store._activeGroupsNotOverlapRemoved.result.length>10?[e.props.store._activeGroupsNotOverlapRemoved]:[e.props.store._activeGroupsNotOverlapRemoved,e.survivalUI,e.props.store.overlapComputations,e.survivalPrefixTable]},render:function(){var t=e.props.store._activeGroupsNotOverlapRemoved.result.length,n=[];return n=t>10?r.createElement("span",null,u.h):0===t?r.createElement("span",null,u.g):r.createElement(r.Fragment,null,r.createElement("div",{className:"tabMessageContainer",style:{paddingBottom:0}},r.createElement("div",{className:"alert alert-info"},r.createElement("i",{className:"fa fa-md fa-info-circle",style:{verticalAlign:"middle !important",marginRight:6,marginBottom:1}}),"Interpret all outcome results with caution, as they can be confounded by many different variables that are not controlled for in these analyses. Consider consulting a statistician."),r.createElement(f.a,{store:e.props.store,only:"patient",survivalTabMode:!0})),r.createElement("div",{style:{display:"flex"}},e.survivalPrefixTable.component&&r.createElement("div",{style:{marginRight:15,marginTop:15,minWidth:475,maxWidth:475,height:"fit-content",overflowX:"scroll"}},e.survivalPrefixTable.component),e.survivalUI.component)),r.createElement("div",{"data-test":"ComparisonPageSurvivalTabDiv"},n)},renderPending:function(){return r.createElement(i.a,{center:!0,isLoading:!0,size:"big"})},renderError:function(){return r.createElement(c.a,null)},showLastRenderWhenPending:!0}),e.survivalPrefixTable=Object(s.a)({await:function(){return[e.survivalTitleText,e.props.store.patientSurvivals,e.pValuesByPrefix,e.qValuesByPrefix,e.analysisGroupsComputations]},render:function(){var t=e.props.store.patientSurvivals.result,n=e.analysisGroupsComputations.result.analysisGroups,o=h.a.keyBy(n,function(e){return e.value}),i=e.analysisGroupsComputations.result.patientToAnalysisGroups,a=e.pValuesByPrefix.result,l=e.qValuesByPrefix.result,s=e.survivalTitleText.result;return Object.keys(s).length>1?r.createElement(ne,{groupNames:n.map(function(e){return e.name}),survivalPrefixes:h.a.map(e.survivalTitleText.result,function(e,r){var s=h.a.mapValues(h.a.keyBy(n,function(e){return e.name}),function(){return[]}),u=!0,c=!1,p=void 0;try{for(var f,d=t[r][Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var y=f.value,m=i[y.uniquePatientKey]||[],b=!0,g=!1,v=void 0;try{for(var O,E=m[Symbol.iterator]();!(b=(O=E.next()).done);b=!0){var S=O.value;s[o[S].name].push(y)}}catch(e){g=!0,v=e}finally{try{b||null==E.return||E.return()}finally{if(g)throw v}}}}catch(e){c=!0,p=e}finally{try{u||null==d.return||d.return()}finally{if(c)throw p}}return{prefix:r,displayText:e,numPatients:h.a.sumBy(t[r],function(e){return e.uniquePatientKey in i?1:0}),numPatientsPerGroup:h.a.mapValues(s,function(e){return e.length}),medianPerGroup:h.a.mapValues(s,function(e){var t=h.a.sortBy(e,function(e){return e.months});return Object(_.h)(t,Object(_.f)(t))}),pValue:a[r],qValue:l[r]}}),getSelectedPrefix:function(){return e.selectedSurvivalPlotPrefix},setSelectedPrefix:e.setSurvivalPlotPrefix}):null}}),e.survivalTitleText=Object(l.T)({await:function(){return[e.props.store.survivalClinicalAttributesPrefix,e.props.store.survivalDescriptions]},invoke:function(){return Promise.resolve(e.props.store.survivalClinicalAttributesPrefix.result.reduce(function(t,n){return t[n]=Object(_.d)(e.props.store.survivalDescriptions.result[n][0].displayName),t},{}))}}),e.survivalUI=Object(s.a)({await:function(){return[e.props.store.survivalDescriptions,e.props.store.survivalXAxisLabelGroupByPrefix,e.props.store.survivalClinicalAttributesPrefix,e.props.store.patientSurvivals,e.props.store.activeStudiesClinicalAttributes,e.analysisGroupsComputations,e.props.store.overlapComputations,e.props.store.uidToGroup,e.props.store.patientSurvivalUniqueStatusText,e.survivalTitleText,e.sortedGroupedSurvivals,e.pValuesByPrefix]},render:function(){var t=null,n=null,i=e.analysisGroupsComputations.result.analysisGroups,a=e.analysisGroupsComputations.result.patientToAnalysisGroups,s={},u=e.survivalTitleText.result;if(e.props.store.survivalClinicalAttributesPrefix.result.forEach(function(t){s[t]=1===e.props.store.survivalDescriptions.result[t].length?e.props.store.survivalDescriptions.result[t][0].description:""}),void 0!==e.selectedSurvivalPlotPrefix||h.a.isEmpty(e.props.store.patientSurvivals.result)||e.setSurvivalPlotPrefix(h.a.keys(e.props.store.patientSurvivals.result)[0]),e.selectedSurvivalPlotPrefix){var c=e.props.store.patientSurvivals.result[e.selectedSurvivalPlotPrefix],p=e.selectedSurvivalPlotPrefix;if(c.length>0){if(e.props.store.survivalDescriptions&&e.props.store.survivalDescriptions.result[p].length>1){var f=e.multipleDescriptionWarningMessageWithoutTooltip;h.a.uniq(h.a.map(e.props.store.survivalDescriptions.result[p],function(e){return e.description})).length>1&&(f="".concat(e.differentDescriptionExistMessage," ").concat(f)),n=r.createElement("div",{className:"tabMessageContainer"},r.createElement("div",{className:"alert alert-warning",role:"alert"},f,r.createElement(l.d,{placement:"bottom",overlay:r.createElement(C,{survivalDescriptionData:e.props.store.survivalDescriptions.result[p]})},r.createElement("a",{href:"javascript:void(0)"},e.multipleDescriptionWarningMessageWithTooltip))))}t=r.createElement("div",{style:{marginBottom:40}},r.createElement("h4",{className:"forceHeaderStyle h4"},u[p]),r.createElement("p",null,s[p]),r.createElement("div",{className:"borderedChart",style:{width:"920px"}},r.createElement(o.b,{key:p,sortedGroupedSurvivals:e.sortedGroupedSurvivals.result[e.selectedSurvivalPlotPrefix],analysisGroups:i,patientToAnalysisGroups:a,title:u[p],xAxisLabel:e.props.store.survivalXAxisLabelGroupByPrefix.result[p],yAxisLabel:u[p],totalCasesHeader:"Number of Cases, Total",statusCasesHeader:"Number of Cases, ".concat(Object(_.l)(p,e.props.store.patientSurvivalUniqueStatusText.result[p])),medianMonthsHeader:"Median Months ".concat(u[p]),yLabelTooltip:"".concat(h.a.startCase(h.a.toLower(u[p]))," estimate"),xLabelWithEventTooltip:_.p[p]||"Time of Death",xLabelWithoutEventTooltip:"Time of last observation",fileName:u[p].replace(" ","_"),showCurveInTooltip:!0,legendLabelComponent:e.props.store.overlapStrategy===T.a.INCLUDE?r.createElement(j.b,{maxLabelWidth:256,uidToGroup:e.props.store.uidToGroup.result,dy:"0.3em"}):r.createElement(j.a,{maxLabelWidth:256,uidToGroup:e.props.store.uidToGroup.result,dy:"0.3em"}),styleOpts:{tooltipYOffset:-28},pValue:e.pValuesByPrefix.result[e.selectedSurvivalPlotPrefix]})))}else t=r.createElement("div",{className:"alert alert-info"},u[p]," not available")}return r.createElement("div",null,r.createElement("div",{className:R.a.survivalPlotHeaderContainer},r.createElement("div",{className:R.a.survivalPlotHeader},r.createElement("ul",{className:"nav nav-pills"},n))),t)},renderPending:function(){return r.createElement(i.a,{center:!0,isLoading:!0,size:"big"})},renderError:function(){return r.createElement(c.a,null)}}),e}var n,a,y;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(t,r["Component"]),n=t,(a=[{key:"setSurvivalPlotPrefix",value:function(e){this.selectedSurvivalPlotPrefix=e}},{key:"render",value:function(){return this.tabUI.component}}])&&ae(n.prototype,a),y&&ae(n,y),t}();pe([G.observable],fe.prototype,"selectedSurvivalPlotPrefix",void 0),pe([D.default,G.action],fe.prototype,"setSurvivalPlotPrefix",null),fe=pe([a.observer],fe);t.a=fe},1093:function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(6),a=n(66),l=n(2),s=n(151),u=n(96),c=n(54),p=n(49);function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var b,g=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":m(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};!function(e){e.CLINICAL_ATTRIBUTE_NAME="Clinical Attribute",e.CLINICAL_ATTRIBUTE_TYPE="Attribute Type",e.STATISTICAL_TEST_NAME="Statistical Test",e.SCORE="Score",e.P_VALUE="p-Value",e.Q_VALUE="q-Value"}(b||(b={}));var v=[{name:b.CLINICAL_ATTRIBUTE_NAME,render:function(e){return r.createElement("span",{"data-test":e.clinicalAttribute.displayName,style:{fontWeight:e.qValue<.05?"bold":"normal"}},e.clinicalAttribute.displayName)},filter:function(e,t,n){return e.clinicalAttribute.displayName.toUpperCase().indexOf(n)>-1},sortBy:function(e){return e.clinicalAttribute.displayName},download:function(e){return e.clinicalAttribute.displayName},width:160},{name:b.CLINICAL_ATTRIBUTE_TYPE,render:function(e){return r.createElement("span",null,e.clinicalAttribute.patientAttribute?"Patient":"Sample")},filter:function(e,t,n){return(e.clinicalAttribute.patientAttribute?"Patient":"Sample").toUpperCase().indexOf(n)>-1},sortBy:function(e){return e.clinicalAttribute.patientAttribute?"Patient":"Sample"},download:function(e){return e.clinicalAttribute.patientAttribute?"Patient":"Sample"},width:100},{name:b.STATISTICAL_TEST_NAME,render:function(e){return r.createElement("span",{style:{whiteSpace:"nowrap"}},e.method)},filter:function(e,t,n){return e.method.toUpperCase().indexOf(n)>-1},sortBy:function(e){return e.method},download:function(e){return e.method},width:130},{name:b.P_VALUE,render:function(e){return r.createElement("span",{style:{whiteSpace:"nowrap",fontWeight:e.qValue<.05?"bold":"normal"}},Object(p.e)(e.pValue,3,.01,-10))},sortBy:function(e){return e.pValue},download:function(e){return Object(c.b)(e.pValue,3,.01)},width:100,tooltip:r.createElement("span",null,"p-value of null Hypothesis, derived from Chi-Squared test or Kruskal-Wallis test")},{name:b.Q_VALUE,render:function(e){return r.createElement("span",{style:{whiteSpace:"nowrap",fontWeight:e.qValue<.05?"bold":"normal"}},Object(p.e)(e.qValue,3,.01,-10))},sortBy:function(e){return e.qValue},download:function(e){return Object(c.b)(e.qValue,3,.01)},width:100,tooltip:r.createElement("span",null,"Derived from Benjamini-Hochberg FDR correction procedure.")}],O=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,y(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,r["Component"]),n=t,(o=[{key:"onRowClick",value:function(e){this.props.dataStore.setHighlighted(e)}},{key:"render",value:function(){return r.createElement(u.b,{columns:v,initialSortColumn:b.Q_VALUE,initialSortDirection:"asc",showColumnVisibility:!1,dataStore:this.props.dataStore,onRowClick:this.onRowClick,paginationProps:{itemsPerPageOptions:[20]},initialItemsPerPage:20,copyDownloadProps:{showCopy:!1}})}}])&&f(n.prototype,o),i&&f(n,i),t}();g([i.default],O.prototype,"onRowClick",null);var E=O=g([o.observer],O),S=n(1),w=n.n(S),P=n(3),x=n(12),k=n(13),C=n(7),j=n(845),T=n.n(j),_=n(1063),G=n.n(_);function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var I=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},N=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=R(this,D(t).apply(this,arguments))).visible=!1,e.handleWidth="10%",e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(t,r["Component"]),n=t,(o=[{key:"doScroll",value:function(e){this.overflow>0&&(this.scrollEl.style.left=e*this.overflow*-1+"px")}},{key:"componentDidMount",value:function(){this.updateScrollbar()}},{key:"componentDidUpdate",value:function(){this.updateScrollbar()}},{key:"updateScrollbar",value:function(){var e=this;setTimeout(function(){e.overflow>0&&Object(l.runInAction)(function(){e.visible=!0;var t=e.scrollEl.parentNode.offsetWidth/e.scrollEl.offsetWidth;e.handleWidth=75*t+"%"})},1)}},{key:"handleDragEvent",value:function(e,t){var n=t.node,r=t.x/(n.parentNode.offsetWidth-n.offsetWidth);r=(r=r>1?1:r)<0?0:r,this.props.onScroll&&this.props.onScroll({percentage:r}),this.doScroll(r)}},{key:"render",value:function(){var e=this,t=Object.assign({},{visibility:this.visible?"visible":"hidden"},this.props.style);return r.createElement("div",{className:G.a.scrollbar,style:t,ref:function(t){return e.scrollbarEl=t}},r.createElement(T.a,{bounds:"parent",onDrag:this.handleDragEvent},r.createElement("div",{className:G.a.handle,style:{width:this.handleWidth}})))}},{key:"scrollEl",get:function(){return this.props.getScrollEl()}},{key:"overflow",get:function(){return this.scrollEl.offsetWidth-this.scrollEl.parentNode.offsetWidth}}])&&A(n.prototype,o),i&&A(n,i),t}();I([l.observable],N.prototype,"visible",void 0),I([l.observable],N.prototype,"handleWidth",void 0),I([i.default],N.prototype,"handleDragEvent",null);var V=N=I([o.observer],N),B=n(299),U=n(26),W=n(47),F=n(300),z=n(149),q=n(110),H=n(298),K=n(16),Y=n(289),Q=n(74);function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e,t,n){return t&&X(e.prototype,t),n&&X(e,n),e}function Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $(e,t){return!t||"object"!==oe(t)&&"function"!=typeof t?ee(e):t}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ne(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ie,ae=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":oe(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},le=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function l(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,l)}s((r=r.apply(e,t||[])).next())})},se="clinical-plot-svg",ue=function(e){function t(){return Z(this,t),$(this,te(t).apply(this,arguments))}return ne(t,B["a"]),t}(),ce=function(e){function t(e,n,r){var o;return Z(this,t),(o=$(this,te(t).call(this,e))).setHighlighted=r,o.dataHighlighter=function(e){var t=n();return!(!t||e.clinicalAttribute.clinicalAttributeId!==t.clinicalAttribute.clinicalAttributeId)},o.reactionDisposer=Object(l.autorun)(function(){o.sortMetric&&o.sortedFilteredData.length>0&&!n()&&o.setHighlighted(o.sortedFilteredData[0])}),o}return ne(t,s["a"]),J(t,[{key:"destroy",value:function(){this.reactionDisposer()}}]),t}();!function(e){e.Bar="Bar",e.StackedBar="StackedBar",e.PercentageStackedBar="PercentageStackedBar"}(ie||(ie={}));var pe=[{value:ie.Bar,label:"Bar chart"},{value:ie.StackedBar,label:"Stacked bar chart"},{value:ie.PercentageStackedBar,label:"100% stacked bar chart"}],fe=function(e){function t(){var e;return Z(this,t),(e=$(this,te(t).apply(this,arguments))).tabUI=Object(q.a)({await:function(){var t=[e.props.store.activeGroups];return e.props.store.activeGroups.isComplete&&e.props.store.activeGroups.result.length<2||t.push(e.overlapUI),t},render:function(){var t=[];return e.props.store.activeGroups.result.length<2?t.push(r.createElement("span",null,Object(W.a)(e.props.store._activeGroupsNotOverlapRemoved.result.length))):(t.push(r.createElement(H.a,{store:e.props.store})),t.push(e.overlapUI.component)),r.createElement("div",{"data-test":"ComparisonPageClinicalTabDiv"},t)},renderPending:function(){return r.createElement(a.a,{isLoading:!0,center:!0,size:"big"})},renderError:function(){return r.createElement(Y.a,null)}}),e.overlapUI=Object(q.a)({await:function(){return[e.props.store.clinicalDataEnrichmentsWithQValues]},render:function(){return r.createElement("div",{className:"clearfix",style:{display:"flex"}},r.createElement("div",{style:{width:"600px"}},r.createElement(E,{dataStore:e.tableDataStore})),r.createElement("div",{style:{marginLeft:"10px"}},e.getUtilitiesMenu,e.plot))},renderPending:function(){return r.createElement(a.a,{isLoading:!0,centerRelativeToContainer:!0,size:"big"})},renderError:function(){return r.createElement(Y.a,null)}}),e.tableDataStore=new ce(function(){return e.props.store.clinicalDataEnrichmentsWithQValues.result},function(){return e.highlightedRow},function(t){e.highlightedRow=t,e.swapAxes=!1,e.logScale=!1}),e.logScale=!1,e.swapAxes=!1,e.horizontalBars=!1,e.clinicalDataPromise=Object(P.T)({await:function(){return[e.props.store.patientKeyToSamples,e.props.store.activeGroups]},invoke:function(){return le(ee(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,o,i,a,l,s,u,c,p,f,d,y,h,m,b,g,v,O,E,S,P,x,C,j,T,_,G,A,R,D,M,L,I,N,V,B,U,W;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={data:[],datatype:"string"},!this.highlightedRow){e.next=117;break}return n=this.highlightedRow.clinicalAttribute,r=this.props.store.patientKeyToSamples.result,o=w.a.flatMap(this.props.store.activeGroups.result,function(e){return w.a.flatMap(e.studies,function(e){return e.samples.map(function(t){return{studyId:e.id,entityId:t}})})}),i=w.a.flatMap(this.props.store.activeGroups.result,function(e){return w.a.flatMap(e.studies,function(e){return e.patients.map(function(t){return{studyId:e.id,entityId:t}})})}),e.next=8,k.a.fetchClinicalDataUsingPOST({clinicalDataType:n.patientAttribute?"PATIENT":"SAMPLE",clinicalDataMultiStudyFilter:{attributeIds:[n.clinicalAttributeId],identifiers:n.patientAttribute?i:o}});case 8:for(a=e.sent,l={},s=!0,u=!1,c=void 0,e.prev=13,p=a[Symbol.iterator]();!(s=(f=p.next()).done);s=!0)d=f.value,y=d.value.toLowerCase(),void 0===l[y]&&(l[y]=d.value);e.next=21;break;case 17:e.prev=17,e.t0=e.catch(13),u=!0,c=e.t0;case 21:e.prev=21,e.prev=22,s||null==p.return||p.return();case 24:if(e.prev=24,!u){e.next=27;break}throw c;case 27:return e.finish(24);case 28:return e.finish(21);case 29:if(t.datatype=n.datatype.toLowerCase(),h=t.data,!n.patientAttribute){e.next=78;break}m=!0,b=!1,g=void 0,e.prev=35,v=a[Symbol.iterator]();case 37:if(m=(O=v.next()).done){e.next=62;break}for(E=O.value,S=r[E.uniquePatientKey],P=!0,x=!1,C=void 0,e.prev=43,j=S[Symbol.iterator]();!(P=(T=j.next()).done);P=!0)_=T.value,h.push({uniqueSampleKey:_.uniqueSampleKey,value:l[E.value.toLowerCase()]});e.next=51;break;case 47:e.prev=47,e.t1=e.catch(43),x=!0,C=e.t1;case 51:e.prev=51,e.prev=52,P||null==j.return||j.return();case 54:if(e.prev=54,!x){e.next=57;break}throw C;case 57:return e.finish(54);case 58:return e.finish(51);case 59:m=!0,e.next=37;break;case 62:e.next=68;break;case 64:e.prev=64,e.t2=e.catch(35),b=!0,g=e.t2;case 68:e.prev=68,e.prev=69,m||null==v.return||v.return();case 71:if(e.prev=71,!b){e.next=74;break}throw g;case 74:return e.finish(71);case 75:return e.finish(68);case 76:e.next=97;break;case 78:for(G=!0,A=!1,R=void 0,e.prev=81,D=a[Symbol.iterator]();!(G=(M=D.next()).done);G=!0)L=M.value,h.push({uniqueSampleKey:L.uniqueSampleKey,value:l[L.value.toLowerCase()]});e.next=89;break;case 85:e.prev=85,e.t3=e.catch(81),A=!0,R=e.t3;case 89:e.prev=89,e.prev=90,G||null==D.return||D.return();case 92:if(e.prev=92,!A){e.next=95;break}throw R;case 95:return e.finish(92);case 96:return e.finish(89);case 97:if("number"!==n.datatype.toLowerCase()){e.next=117;break}for(I=!0,N=!1,V=void 0,e.prev=101,B=h[Symbol.iterator]();!(I=(U=B.next()).done);I=!0)(W=U.value).value=parseFloat(W.value);e.next=109;break;case 105:e.prev=105,e.t4=e.catch(101),N=!0,V=e.t4;case 109:e.prev=109,e.prev=110,I||null==B.return||B.return();case 112:if(e.prev=112,!N){e.next=115;break}throw V;case 115:return e.finish(112);case 116:return e.finish(109);case 117:return e.abrupt("return",Promise.resolve(t));case 118:case"end":return e.stop()}},e,this,[[13,17,21,29],[22,,24,28],[35,64,68,76],[43,47,51,59],[52,,54,58],[69,,71,75],[81,85,89,97],[90,,92,96],[101,105,109,117],[110,,112,116]])}))}}),e.groupMembershipAxisData=Object(P.T)({await:function(){return[e.props.store.sampleMap,e.props.store.activeGroups]},invoke:function(){return le(ee(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.a.map(this.props.store.activeGroups.result,function(e){return e.nameWithOrdinal}),n={data:[],datatype:"string",categoryOrder:t},r=this.props.store.sampleMap.result||new Q.a,o=w.a.reduce(this.props.store.activeGroups.result,function(e,t){return t.studies.forEach(function(n){n.samples.forEach(function(o){if(r.has({studyId:n.id,sampleId:o})){var i=r.get({studyId:n.id,sampleId:o}).uniqueSampleKey;void 0===e[i]&&(e[i]={uniqueSampleKey:i,value:[]}),e[i].value.push(t.nameWithOrdinal)}})}),e},{}),n.data=w.a.values(o),e.abrupt("return",Promise.resolve(n));case 6:case"end":return e.stop()}},e,this)}))}}),e.boxPlotData=Object(P.T)({await:function(){return[e.horzAxisDataPromise,e.vertAxisDataPromise,e.props.store.sampleKeyToSample]},invoke:function(){var t=e.horzAxisDataPromise.result,n=e.vertAxisDataPromise.result;if(t&&n){var r,o,i;if(Object(C.y)(t)&&Object(C.z)(n))r=n,o=t,i=!0;else{if(!Object(C.z)(t)||!Object(C.y)(n))return Promise.resolve({horizontal:!1,data:[]});r=t,o=n,i=!1}return Promise.resolve({horizontal:i,data:Object(C.F)(r,o,e.props.store.sampleKeyToSample.result,{},void 0,void 0)})}return new Promise(function(){return 0})}}),e.plotType=ie.PercentageStackedBar,e}return ne(t,r["Component"]),J(t,[{key:"getScrollPane",value:function(){return this.scrollPane}},{key:"onClickLogScale",value:function(){if(this.logScale=!this.logScale,this.logScale){this.logScaleFunction={label:"log2",fLogScale:function(e,t){return Math.log2(Math.max(e,.01))},fInvLogScale:function(e){return Math.pow(2,e)}}}else this.logScaleFunction=void 0}},{key:"onClickSwapAxes",value:function(){this.swapAxes=!this.swapAxes}},{key:"onClickhorizontalBars",value:function(){this.horizontalBars=!this.horizontalBars}},{key:"getSvg",value:function(){return document.getElementById(se)}},{key:"assignScrollPaneRef",value:function(e){this.scrollPane=e}},{key:"onPlotTypeSelect",value:function(e){this.plotType=e.value}},{key:"toolbar",value:function(){return r.createElement("div",{style:{textAlign:"center",position:"relative"}},r.createElement(P.e,{getSvg:this.getSvg,filename:se,dontFade:!0,type:"button",style:{position:"absolute",right:0,top:0}}))}},{key:"componentWillUnmount",value:function(){this.tableDataStore.destroy()}},{key:"render",value:function(){return this.tabUI.component}},{key:"showLogScaleControls",get:function(){return"number"===this.highlightedRow.clinicalAttribute.datatype.toLowerCase()}},{key:"vertAxisDataPromise",get:function(){return this.swapAxes?this.groupMembershipAxisData:this.clinicalDataPromise}},{key:"horzAxisDataPromise",get:function(){return this.swapAxes?this.clinicalDataPromise:this.groupMembershipAxisData}},{key:"horzLabel",get:function(){return this.swapAxes?"".concat(this.highlightedRow.clinicalAttribute.displayName).concat(this.logScale?" (log2)":""):"Group"}},{key:"vertLabel",get:function(){return this.swapAxes?"Group":"".concat(this.highlightedRow.clinicalAttribute.displayName).concat(this.logScale?" (log2)":"")}},{key:"scatterPlotTooltip",get:function(){var e=this;return function(t){var n=r.createElement("span",null);return e.boxPlotData.isComplete&&(n=Object(C.k)(t,e.props.store.activeStudyIdToStudy.result,e.boxPlotData.result.horizontal)),n}}},{key:"boxPlotTooltip",get:function(){var e=this;return function(t){return r.createElement("table",{className:"table table-striped"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{colSpan:2},e.boxPlotData.result.data[t.eventKey].label))),r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",null,"Maximum"),r.createElement("td",null,t.max)),r.createElement("tr",null,r.createElement("td",null,"75% (q3)"),r.createElement("td",null,t.q3)),r.createElement("tr",null,r.createElement("td",null,"Median"),r.createElement("td",null,t.median)),r.createElement("tr",null,r.createElement("td",null,"25% (q1)"),r.createElement("td",null,t.q1)),r.createElement("tr",null,r.createElement("td",null,"Minimum"),r.createElement("td",null,t.min))))}}},{key:"categoryToColor",get:function(){return w.a.reduce(this.props.store.uidToGroup.result,function(e,t){return e[t.nameWithOrdinal]=t.color,e},K.E)}},{key:"getUtilitiesMenu",get:function(){return this.highlightedRow?r.createElement("div",{style:{marginBottom:"10px"}},!this.showLogScaleControls&&r.createElement("div",{className:"form-group",style:{display:"flex",alignItems:"center"}},r.createElement("label",null,"Plot Type"),r.createElement("div",{style:{width:240,marginLeft:5},"data-test":"plotTypeSelector"},r.createElement(z.default,{name:"discrete-vs-discrete-plot-type",value:this.plotType,onChange:this.onPlotTypeSelect,options:pe,clearable:!1,searchable:!0}))),r.createElement("div",null,r.createElement("label",{className:"checkbox-inline"},r.createElement("input",{type:"checkbox",checked:this.swapAxes,onClick:this.onClickSwapAxes,"data-test":"SwapAxes"}),"Swap Axes"),!this.showLogScaleControls&&r.createElement("label",{className:"checkbox-inline"},r.createElement("input",{type:"checkbox",name:"horizontalBars",checked:this.horizontalBars,onClick:this.onClickhorizontalBars,"data-test":"HorizontalBars"}),"Horizontal Bars"),this.showLogScaleControls&&r.createElement("label",{className:"checkbox-inline"},r.createElement("input",{type:"checkbox",checked:this.logScale,onClick:this.onClickLogScale,"data-test":"logScale"}),"Log Scale"))):r.createElement("span",null)}},{key:"plot",get:function(){if(0===this.tableDataStore.allData.length||!this.highlightedRow)return r.createElement("span",null);var e=[this.horzAxisDataPromise,this.vertAxisDataPromise],t=x.H.apply(void 0,e),n=this.plotType===ie.PercentageStackedBar,i=n||this.plotType===ie.StackedBar;switch(t){case"pending":return r.createElement(a.a,{center:!0,isLoading:!0,size:"big"});case"error":return r.createElement("span",null,"Error loading plot data.");default:if(!this.horzAxisDataPromise.result||!this.vertAxisDataPromise.result)return r.createElement("span",null,"Error loading plot data.");var l=null;if("number"===this.highlightedRow.clinicalAttribute.datatype.toLowerCase()){if(!this.boxPlotData.isComplete)return this.boxPlotData.isError?r.createElement("span",null,"Error loading plot data."):r.createElement(a.a,{center:!0,isLoading:!0,size:"big"});l=r.createElement(ue,{svgId:se,domainPadding:75,boxWidth:this.boxPlotData.result.data.length>7?30:60,axisLabelX:this.horzLabel,axisLabelY:this.vertLabel,data:this.boxPlotData.result.data,chartBase:500,scatterPlotTooltip:this.scatterPlotTooltip,boxPlotTooltip:this.boxPlotTooltip,horizontal:this.boxPlotData.result.horizontal,logScale:this.logScaleFunction,size:U.j,fill:C.i.fill,stroke:C.i.stroke,strokeOpacity:C.i.strokeOpacity,symbol:"circle",useLogSpaceTicks:!0,legendLocationWidthThreshold:550})}else l=r.createElement(F.a,{svgId:se,horzData:this.horzAxisDataPromise.result.data,vertData:this.vertAxisDataPromise.result.data,horzCategoryOrder:this.horzAxisDataPromise.result.categoryOrder,vertCategoryOrder:this.vertAxisDataPromise.result.categoryOrder,categoryToColor:this.categoryToColor,barWidth:20,domainPadding:20,chartBase:500,axisLabelX:this.horzLabel,axisLabelY:this.vertLabel,legendLocationWidthThreshold:450,ticksCount:6,horizontalBars:this.horizontalBars,percentage:n,stacked:i});return r.createElement("div",{"data-test":"ClinicalTabPlotDiv",className:"borderedChart posRelative",style:{marginBottom:10}},r.createElement(V,{style:{position:"relative",top:-5},getScrollEl:this.getScrollPane}),r.createElement(o.Observer,null,this.toolbar),r.createElement("div",{ref:this.assignScrollPaneRef,style:{position:"relative",display:"inline-block"}},l))}}}]),t}();ae([l.observable.ref],fe.prototype,"highlightedRow",void 0),ae([i.default],fe.prototype,"getScrollPane",null),ae([l.computed],fe.prototype,"showLogScaleControls",null),ae([l.observable],fe.prototype,"logScale",void 0),ae([l.observable],fe.prototype,"logScaleFunction",void 0),ae([l.observable],fe.prototype,"swapAxes",void 0),ae([l.observable],fe.prototype,"horizontalBars",void 0),ae([i.default,l.action],fe.prototype,"onClickLogScale",null),ae([i.default,l.action],fe.prototype,"onClickSwapAxes",null),ae([i.default,l.action],fe.prototype,"onClickhorizontalBars",null),ae([l.computed],fe.prototype,"vertAxisDataPromise",null),ae([l.computed],fe.prototype,"horzAxisDataPromise",null),ae([l.computed],fe.prototype,"horzLabel",null),ae([l.computed],fe.prototype,"vertLabel",null),ae([i.default],fe.prototype,"getSvg",null),ae([i.default],fe.prototype,"assignScrollPaneRef",null),ae([l.computed],fe.prototype,"scatterPlotTooltip",null),ae([l.computed],fe.prototype,"boxPlotTooltip",null),ae([l.computed],fe.prototype,"categoryToColor",null),ae([l.observable],fe.prototype,"plotType",void 0),ae([i.default,l.action],fe.prototype,"onPlotTypeSelect",null),ae([l.computed],fe.prototype,"getUtilitiesMenu",null),ae([l.computed],fe.prototype,"plot",null),ae([i.default],fe.prototype,"toolbar",null),fe=ae([o.observer],fe);t.a=fe},1094:function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(6),a=n(110),l=n(66),s=n(289),u=n(47),c=n(2),p=n(56),f=n.n(p),d=n(111),y=n(1),h=n(3),m=n(166),b=n(151);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var S=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=v(this,O(t).call(this,e))).setHighlighted=r,o.dataHighlighter=function(e){var t=n();return!(!t||e.stableId!==t.stableId)},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,b["a"]),t}(),w=n(914),P=n(840);function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var _=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":T(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},G=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=k(this,C(t).apply(this,arguments))).significanceFilter=!1,e._enrichedGroups=e.props.groups.map(function(e){return e.name}),e.dataStore=new S(function(){return e.filteredData},function(){return e.highlightedRow},function(t){e.highlightedRow=t}),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,r["Component"]),n=t,(o=[{key:"filterByStableId",value:function(e){return!this.selectedStableIds||this.selectedStableIds.includes(e)}},{key:"toggleSignificanceFilter",value:function(){this.significanceFilter=!this.significanceFilter}},{key:"onEntityClick",value:function(e){this.clickedEntityStableId=e}},{key:"onSelection",value:function(e){this.selectedStableIds=e}},{key:"onSelectionCleared",value:function(){this.selectedStableIds=null}},{key:"onChange",value:function(e){this._enrichedGroups=y.map(e,function(e){return e.value})}},{key:"render",value:function(){if(0===this.props.data.length)return r.createElement("div",{className:"alert alert-info"},"No data/result available");var e=Object(d.t)(this.data),t=y.maxBy(e,function(e){return Math.ceil(Math.abs(e.x))});return r.createElement("div",{className:f.a.Container},r.createElement("div",{className:f.a.ChartsPanel},this.isTwoGroupAnalysis&&r.createElement(P.a,{data:e,selectedSet:this.selectedEntitiesSet,xAxisLeftLabel:this.group2.nameOfEnrichmentDirection||this.group2.name,xAxisRightLabel:this.group1.nameOfEnrichmentDirection||this.group1.name,xAxisDomain:Math.ceil(Math.abs(t.x)),xAxisTickValues:null,onGenericAssayEntityClick:this.onEntityClick,onSelection:this.onSelection,onSelectionCleared:this.onSelectionCleared}),r.createElement(w.a,{selectedProfile:this.props.selectedProfile,groups:this.props.groups,sampleKeyToSample:this.props.sampleKeyToSample,selectedRow:this.selectedRow,genericAssayType:this.props.genericAssayType})),r.createElement("div",{className:f.a.TableContainer},r.createElement("hr",{style:{marginTop:0,marginBottom:5,borderWidth:2}}),r.createElement("div",{className:f.a.Checkboxes},r.createElement("div",{style:{width:250,marginRight:7}},r.createElement(h.b,{name:"groupsSelector",placeholder:"High in ...",onChange:this.onChange,options:this.options,value:this.selectedValues})),r.createElement("div",{className:f.a.FlexCheckbox},r.createElement("label",null,r.createElement("input",{type:"checkbox",checked:this.significanceFilter,onClick:this.toggleSignificanceFilter}),"Significant only"))),r.createElement(m.b,{data:this.filteredData,onEntityClick:this.onEntityClick,dataStore:this.dataStore,mutexTendency:this.props.alteredVsUnalteredMode,visibleOrderedColumnNames:this.visibleOrderedColumnNames,customColumns:y.keyBy(this.customColumns,function(e){return e.uniqueName||e.name})})))}},{key:"data",get:function(){return Object(d.s)(this.props.data,this.props.groups)}},{key:"filteredData",get:function(){return Object(d.p)(this.data,this._enrichedGroups,this.significanceFilter,this.filterByStableId,!0)}},{key:"group1",get:function(){return this.props.groups[0]}},{key:"group2",get:function(){return this.props.groups[1]}},{key:"selectedEntitiesSet",get:function(){return y.keyBy(this.selectedStableIds||[])}},{key:"isTwoGroupAnalysis",get:function(){return 2==this.props.groups.length}},{key:"customColumns",get:function(){return Object(d.r)(this.props.groups,this.props.alteredVsUnalteredMode)}},{key:"visibleOrderedColumnNames",get:function(){var e=[];return e.push(m.a.ENTITY_ID),this.props.groups.forEach(function(t){e.push(t.name+" mean")}),this.props.groups.forEach(function(t){e.push(t.name+" standard deviation")}),this.isTwoGroupAnalysis&&e.push(m.a.LOG_RATIO),e.push(m.a.P_VALUE,m.a.Q_VALUE),this.isTwoGroupAnalysis&&this.props.alteredVsUnalteredMode?e.push(m.a.TENDENCY):e.push(m.a.EXPRESSED),e}},{key:"selectedValues",get:function(){return this._enrichedGroups.map(function(e){return{value:e}})}},{key:"options",get:function(){return y.map(this.props.groups,function(e){return{label:e.nameOfEnrichmentDirection?e.nameOfEnrichmentDirection:e.name,value:e.name}})}},{key:"selectedRow",get:function(){var e=this;if(this.clickedEntityStableId)return this.props.data.filter(function(t){return t.stableId===e.clickedEntityStableId})[0]}}])&&x(n.prototype,o),i&&x(n,i),t}();G.defaultProps={alteredVsUnalteredMode:!0},_([c.observable],G.prototype,"significanceFilter",void 0),_([c.observable],G.prototype,"clickedEntityStableId",void 0),_([c.observable.ref],G.prototype,"selectedStableIds",void 0),_([c.observable.ref],G.prototype,"highlightedRow",void 0),_([c.observable.ref],G.prototype,"_enrichedGroups",void 0),_([c.computed],G.prototype,"data",null),_([c.computed],G.prototype,"filteredData",null),_([i.default],G.prototype,"filterByStableId",null),_([i.default],G.prototype,"toggleSignificanceFilter",null),_([i.default],G.prototype,"onEntityClick",null),_([i.default],G.prototype,"onSelection",null),_([i.default],G.prototype,"onSelectionCleared",null),_([c.computed],G.prototype,"group1",null),_([c.computed],G.prototype,"group2",null),_([c.computed],G.prototype,"selectedEntitiesSet",null),_([c.computed],G.prototype,"isTwoGroupAnalysis",null),_([c.computed],G.prototype,"customColumns",null),_([c.computed],G.prototype,"visibleOrderedColumnNames",null),_([i.default,c.action],G.prototype,"onChange",null),_([c.computed],G.prototype,"selectedValues",null),_([c.computed],G.prototype,"options",null),_([c.computed],G.prototype,"selectedRow",null);var A=G=_([o.observer],G),R=n(800);function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var V=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":N(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},B=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=M(this,L(t).apply(this,arguments))).tabUI=Object(u.d)(function(){return e.props.store},function(){return e.enrichmentsUI},e.props.genericAssayType,!0,!0,!1),e.enrichmentsUI=Object(a.a)({await:function(){var t=[e.props.store.gaEnrichmentDataByAssayType,e.props.store.selectedGenericAssayEnrichmentProfileMapGroupByGenericAssayType,e.props.store.gaEnrichmentGroupsByAssayType,e.props.store.studies];return e.props.store.gaEnrichmentDataByAssayType.isComplete&&e.props.store.gaEnrichmentDataByAssayType.result[e.props.genericAssayType]&&t.push(e.props.store.gaEnrichmentDataByAssayType.result[e.props.genericAssayType]),t},render:function(){var t=Object.keys(e.props.store.selectedGenericAssayEnrichmentProfileMapGroupByGenericAssayType.result[e.props.genericAssayType])[0],n=e.props.store.selectedGenericAssayEnrichmentProfileMapGroupByGenericAssayType.result[e.props.genericAssayType][t];return r.createElement("div",{"data-test":"GroupComparisonGenericAssayEnrichments"},r.createElement(R.a,{dataSets:e.props.store.genericAssayEnrichmentProfilesGroupByGenericAssayType.result[e.props.genericAssayType],onChange:e.onChangeProfile,selectedProfileByStudyId:e.props.store.selectedGenericAssayEnrichmentProfileMapGroupByGenericAssayType.result[e.props.genericAssayType],alwaysShow:!0,studies:e.props.store.studies.result}),r.createElement(A,{data:e.props.store.gaEnrichmentDataByAssayType.result[e.props.genericAssayType].result,groups:e.props.store.gaEnrichmentGroupsByAssayType.result[e.props.genericAssayType],selectedProfile:n,alteredVsUnalteredMode:!1,sampleKeyToSample:e.props.store.sampleKeyToSample.result,genericAssayType:e.props.genericAssayType}))},renderPending:function(){return r.createElement(l.a,{center:!0,isLoading:!0,size:"big"})},renderError:function(){return r.createElement(s.a,null)}}),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,r["Component"]),n=t,(o=[{key:"onChangeProfile",value:function(e){this.props.store.setGenericAssayEnrichmentProfileMap(e,this.props.genericAssayType)}},{key:"render",value:function(){return this.tabUI.component}}])&&D(n.prototype,o),i&&D(n,i),t}();V([i.default],B.prototype,"onChangeProfile",null),B=V([o.observer],B);t.a=B},784:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(9),i=n(47),a=n(3),l=n(2),s=n(13),u=n(143),c=n(1),p=n.n(c),f=n(6),d=n(30),y=n(97),h=n(50),m=n(174),b=n(122);function g(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var P=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":w(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},x=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function l(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,l)}s((r=r.apply(e,t||[])).next())})},k=function(e){function t(e,n,r){var o,l,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l=this,c=O(t).call(this,n),(o=!c||"object"!==w(c)&&"function"!=typeof c?E(l):c).urlWrapper=r,o._currentTabId=void 0,o._session=Object(a.T)({invoke:function(){return u.a.getComparisonSession(o.sessionId)},onResult:function(e){try{var t=p.a.chain(e.groups).flatMap(function(e){return e.studies}).map(function(e){return e.id}).uniq().value();Object(y.f)({category:"groupComparison",action:"comparisonSessionViewed",label:t.join(",")+",",fieldsObject:(n={},r=y.a.GroupCount,o=e.groups.length,r in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,n)})}catch(e){throw"Failure to track comparisonSessionViewed"}var n,r,o}}),o._unsortedOriginalGroups=Object(a.T)({await:function(){return[o._session,o.sampleMap]},invoke:function(){var e=[],t=o.sampleMap.result,n=Object(d.ob)(p.a.map(o._session.result.groups,function(e){return{value:e.name}}));return o._session.result.groups.forEach(function(r,o){e.push(function(e,r){var o=e.color||n[e.name],a=Object(i.o)(e,t),l=a.nonExistentSamples,s=a.studies;return Object.assign({},e,{color:o,studies:s,nonExistentSamples:l,uid:e.name,nameWithOrdinal:"",ordinal:""})}(r))}),Promise.resolve(e)}}),o._originalGroups=Object(a.T)({await:function(){return[o._session,o._unsortedOriginalGroups]},invoke:function(){var e;if(o.groupOrder){var t=Object(a.X)(o.groupOrder);e=p.a.sortBy(o._unsortedOriginalGroups.result,function(e){return Object(h.a)(t[e.name],Number.POSITIVE_INFINITY)})}else if(o._session.result.groupNameOrder){var n=Object(a.X)(o._session.result.groupNameOrder);e=p.a.sortBy(o._unsortedOriginalGroups.result,function(e){return Object(h.a)(n[e.name],Number.POSITIVE_INFINITY)})}else e=Object(i.l)(o._unsortedOriginalGroups.result);var r=Object(i.t)(e.length,26);return e.forEach(function(e,t){var n=r[t];e.nameWithOrdinal="(".concat(n,") ").concat(e.name),e.ordinal=n}),Promise.resolve(e)}}),o.samples=Object(a.T)({await:function(){return[o._session]},invoke:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,a=o._session.result.groups[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var l=i.value,u=!0,c=!1,p=void 0;try{for(var f,d=l.studies[Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var y=f.value,h=y.id,m=!0,b=!1,g=void 0;try{for(var v,O=y.samples[Symbol.iterator]();!(m=(v=O.next()).done);m=!0){var E=v.value;e.push({studyId:h,sampleId:E})}}catch(e){b=!0,g=e}finally{try{m||null==O.return||O.return()}finally{if(b)throw g}}}}catch(e){c=!0,p=e}finally{try{u||null==d.return||d.return()}finally{if(c)throw p}}}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return s.a.fetchSamplesUsingPOST({sampleFilter:{sampleIdentifiers:e},projection:"DETAILED"})}}),o.allStudies=Object(a.T)({invoke:function(){return x(E(o),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.getAllStudiesUsingGET({projection:"SUMMARY"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))}},[]),o.allStudyIdToStudy=Object(a.T)({await:function(){return[o.allStudies]},invoke:function(){return Promise.resolve(p.a.keyBy(o.allStudies.result,function(e){return e.studyId}))}}),o.queriedPhysicalStudies=Object(a.T)({await:function(){return[o._session]},invoke:function(){return x(E(o),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._session.result.origin,n=this.allStudyIdToStudy.result,e.abrupt("return",p.a.reduce(t,function(e,t){return n[t]&&e.push(n[t]),e},[]));case 3:case"end":return e.stop()}},e,this)}))},default:[]}),o.queriedVirtualStudies=Object(a.T)({await:function(){return[o.queriedPhysicalStudies,o._session]},invoke:function(){return x(E(o),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._session.result.origin,this.queriedPhysicalStudies.result.length!==t.length){e.next=3;break}return e.abrupt("return",[]);case 3:return n=[],r=this.queriedPhysicalStudies.result.map(function(e){return e.studyId}),o=t.filter(function(e){return!r.includes(e)}),e.next=8,Promise.all(o.map(function(e){return b.a.getVirtualStudy(e).then(function(e){n.push(e)}).catch(function(e){})}));case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}},e,this)}))},default:[]}),o.displayedStudies=Object(a.T)({await:function(){return[o.queriedVirtualStudies,o.queriedPhysicalStudies]},invoke:function(){return x(E(o),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[].concat(g(this.queriedPhysicalStudies.result),g(this.queriedVirtualStudies.result.map(function(e){return{name:e.data.name,description:e.data.description,studyId:e.id}}))));case 1:case"end":return e.stop()}},e,this)}))},default:[]}),o.studies=Object(a.T)({await:function(){return[o._session,o.allStudyIdToStudy]},invoke:function(){var e=Object(i.x)(o._session.result.groups);return Promise.resolve(e.map(function(e){return o.allStudyIdToStudy.result[e]}))}},[]),o.sessionId=e,o}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,m["b"]),n=t,(r=[{key:"updateOverlapStrategy",value:function(e){this.urlWrapper.updateURL({overlapStrategy:e})}},{key:"setUsePatientLevelEnrichments",value:function(e){this.urlWrapper.updateURL({patientEnrichments:e.toString()})}},{key:"updateGroupOrder",value:function(e,t){var n=this.groupOrder;n||(n=this._originalGroups.result.map(function(e){return e.name}));var r=(n=n.slice()).splice(e,1)[0];n.splice(t,0,r),this.urlWrapper.updateURL({groupOrder:JSON.stringify(n)})}},{key:"updateUnselectedGroups",value:function(e){this.urlWrapper.updateURL({unselectedGroups:JSON.stringify(e)})}},{key:"toggleGroupSelected",value:function(e){var t=this.unselectedGroups.slice();t.includes(e)?t.splice(t.indexOf(e),1):t.push(e),this.updateUnselectedGroups(t)}},{key:"selectAllGroups",value:function(){this.updateUnselectedGroups([])}},{key:"deselectAllGroups",value:function(){var e=this._originalGroups.result;this.updateUnselectedGroups(e.map(function(e){return e.name}))}},{key:"isGroupSelected",value:function(e){return!this.unselectedGroups.includes(e)}},{key:"saveAndGoToSession",value:function(e){return x(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.addComparisonSession(e);case 2:n=t.sent,r=n.id,this.urlWrapper.updateURL({sessionId:r});case 5:case"end":return t.stop()}},t,this)}))}},{key:"overlapStrategy",get:function(){return this.urlWrapper.query.overlapStrategy||m.a.EXCLUDE}},{key:"usePatientLevelEnrichments",get:function(){return"true"===this.urlWrapper.query.patientEnrichments}},{key:"groupOrder",get:function(){var e=this.urlWrapper.query.groupOrder;return e?JSON.parse(e):void 0}},{key:"unselectedGroups",get:function(){var e=this.urlWrapper.query.unselectedGroups;return e?JSON.parse(e):[]}},{key:"sessionClinicalAttributeName",get:function(){return this._session.isComplete?this._session.result.clinicalAttributeName:void 0}}])&&v(n.prototype,r),o&&v(n,o),t}();P([l.observable],k.prototype,"_currentTabId",void 0),P([l.observable],k.prototype,"sessionId",void 0),P([l.action],k.prototype,"updateOverlapStrategy",null),P([l.computed],k.prototype,"overlapStrategy",null),P([l.computed],k.prototype,"usePatientLevelEnrichments",null),P([f.default,l.action],k.prototype,"setUsePatientLevelEnrichments",null),P([l.computed],k.prototype,"groupOrder",null),P([l.action],k.prototype,"updateGroupOrder",null),P([l.action],k.prototype,"updateUnselectedGroups",null),P([l.computed],k.prototype,"unselectedGroups",null),P([f.default,l.action],k.prototype,"toggleGroupSelected",null),P([f.default,l.action],k.prototype,"selectAllGroups",null),P([f.default,l.action],k.prototype,"deselectAllGroups",null),P([f.default],k.prototype,"isGroupSelected",null),P([l.action],k.prototype,"saveAndGoToSession",null),P([l.computed],k.prototype,"sessionClinicalAttributeName",null);var C=n(1064),j=n(792),T=n(290),_=n(1092),G=n(1059),A=n(1067),R=n(1068),D=n(1069),M=n(110),L=n(66),I=n(289),N=n(1091),V=n(43),B=n(805),U=n(1093),W=n(112),F=n(102),z=n.n(F),q=n(306);function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e,t){return!t||"object"!==X(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var J=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":X(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Z=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),K(this,Y(t).call(this,e,{sessionId:{isSessionProp:!1},groupOrder:{isSessionProp:!1},unselectedGroups:{isSessionProp:!1},overlapStrategy:{isSessionProp:!1},patientEnrichments:{isSessionProp:!1}}))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(t,q["a"]),n=t,(r=[{key:"setTabId",value:function(e,t){this.updateURL({},"comparison/".concat(e),!1,t)}},{key:"tabId",get:function(){return Object(i.y)(this.pathName)||V.a.OVERLAP}}])&&H(n.prototype,r),o&&H(n,o),t}();J([l.computed],Z.prototype,"tabId",null),J([f.default],Z.prototype,"setTabId",null);var $=n(801),ee=n.n($),te=n(18),ne=n(1071),re=n(1094),oe=n(7);function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function le(e){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ce(e){return(ce="function"==typeof Symbol&&"symbol"===ie(Symbol.iterator)?function(e){return ie(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ie(e)})(e)}var pe=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ce(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},fe=function(e){function t(e){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,i=le(t).call(this,e),(n=!i||"object"!==ce(i)&&"function"!=typeof i?se(o):i).tabs=Object(M.a)({await:function(){return[n.store._activeGroupsNotOverlapRemoved,n.store.activeGroups,n.store.mutationEnrichmentProfiles,n.store.copyNumberEnrichmentProfiles,n.store.mRNAEnrichmentProfiles,n.store.proteinEnrichmentProfiles,n.store.methylationEnrichmentProfiles,n.store.survivalClinicalDataExists,n.store.genericAssayEnrichmentProfilesGroupByGenericAssayType]},render:function(){return r.createElement(j.b,{unmountOnHide:!1,activeTabId:n.urlWrapper.tabId,onTabClick:n.urlWrapper.setTabId,className:"primaryTabs mainTabs",getTabHref:n.getTabHref},r.createElement(j.a,{id:V.a.OVERLAP,linkText:"Overlap"},r.createElement(G.a,{key:n.selectedGroupsKey,store:n.store})),n.store.showSurvivalTab&&r.createElement(j.a,{id:V.a.SURVIVAL,linkText:"Survival",anchorClassName:n.store.survivalTabUnavailable?"greyedOut":""},r.createElement(_.a,{store:n.store})),r.createElement(j.a,{id:V.a.CLINICAL,linkText:"Clinical",anchorClassName:n.store.clinicalTabUnavailable?"greyedOut":""},r.createElement(U.a,{store:n.store})),n.store.showMutationsTab&&r.createElement(j.a,{id:V.a.MUTATIONS,linkText:"Mutations",anchorClassName:n.store.mutationsTabUnavailable?"greyedOut":""},r.createElement(C.a,{store:n.store})),n.store.showCopyNumberTab&&r.createElement(j.a,{id:V.a.CNA,linkText:"Copy-number",anchorClassName:n.store.copyNumberUnavailable?"greyedOut":""},r.createElement(A.a,{store:n.store})),n.store.showMRNATab&&r.createElement(j.a,{id:V.a.MRNA,linkText:"mRNA",anchorClassName:n.store.mRNATabUnavailable?"greyedOut":""},r.createElement(R.a,{store:n.store})),n.store.showProteinTab&&r.createElement(j.a,{id:V.a.PROTEIN,linkText:"Protein",anchorClassName:n.store.proteinTabUnavailable?"greyedOut":""},r.createElement(D.a,{store:n.store})),n.store.showMethylationTab&&r.createElement(j.a,{id:V.a.DNAMETHYLATION,linkText:"DNA Methylation",anchorClassName:n.store.methylationTabUnavailable?"greyedOut":""},r.createElement(ne.a,{store:n.store})),n.store.showGenericAssayTab&&p.a.keys(n.store.genericAssayEnrichmentProfilesGroupByGenericAssayType.result).map(function(e){return r.createElement(j.a,{id:"".concat(V.a.GENERIC_ASSAY_PREFIX,"_").concat(e.toLowerCase()),linkText:Object(oe.n)(e),anchorClassName:n.store.genericAssayTabUnavailable?"greyedOut":""},r.createElement(re.a,{store:n.store,genericAssayType:e}))}))},renderPending:function(){return r.createElement(L.a,{center:!0,isLoading:!0,size:"big"})},renderError:function(){return r.createElement(I.a,null)}}),n.studyLink=Object(M.a)({await:function(){return[n.store.displayedStudies]},render:function(){var e=n.store.displayedStudies.result,t=r.createElement("span",null);switch(e.length){case 0:t=r.createElement("span",null);break;case 1:t=r.createElement("h3",null,r.createElement(B.a,{studyId:e[0].studyId},e[0].name));break;default:t=r.createElement("h4",null,r.createElement("a",{href:Object(te.b)("study",{id:e.map(function(e){return e.studyId}).join(",")}),target:"_blank"},"Multiple studies"))}return n.store.sessionClinicalAttributeName?r.createElement("span",null,t,"Groups from"," ",r.createElement("span",{style:{fontWeight:"bold",fontStyle:"italic"}},n.store.sessionClinicalAttributeName)):t}}),n.overlapStrategySelector=Object(M.a)({await:function(){return[n.store.overlapComputations]},render:function(){if(n.store.overlapComputations.result.totalSampleOverlap||n.store.overlapComputations.result.totalPatientOverlap){var e="Include overlapping samples and patients",t="Exclude overlapping samples and patients";return r.createElement("div",{style:{minWidth:355,width:355,zIndex:20}},r.createElement(W.default,{name:"select overlap strategy",onChange:function(e){e&&n.onOverlapStrategySelect(e)},options:[{label:e,value:m.a.INCLUDE},{label:t,value:m.a.EXCLUDE}],clearable:!1,searchable:!1,value:{label:n.store.overlapStrategy===m.a.EXCLUDE?t:e,value:n.store.overlapStrategy}}))}return null}}),n.urlWrapper=new Z(e.routing),n.queryReaction=Object(l.reaction)(function(){return n.urlWrapper.query.sessionId},function(t){e.routing.location.pathname.includes("/comparison")&&t&&(n.store&&n.store.destroy(),n.store=new k(t,n.props.appStore,n.urlWrapper),window.groupComparisonStore=n.store)},{fireImmediately:!0}),window.groupComparisonPage=se(n),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(t,r["Component"]),n=t,(o=[{key:"getTabHref",value:function(e){return z.a.format({pathname:e,query:this.props.routing.location.query,hash:this.props.routing.location.hash})}},{key:"componentWillUnmount",value:function(){this.queryReaction&&this.queryReaction(),this.store&&this.store.destroy(),this.urlWrapper.destroy()}},{key:"onOverlapStrategySelect",value:function(e){Object(y.f)({category:"groupComparison",action:"setOverlapStrategy",label:e.value}),this.store.updateOverlapStrategy(e.value)}},{key:"isGroupDeletable",value:function(){return this.store._originalGroups.isComplete&&this.store._originalGroups.result.length>2}},{key:"render",value:function(){return this.store?r.createElement(T.a,{noMargin:!0,hideFooter:!0,className:"subhead-dark"},r.createElement("div",null,r.createElement(L.a,{center:!0,isLoading:this.store.newSessionPending,size:"big"}),r.createElement("div",{className:"headBlock"},r.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},this.studyLink.component,this.overlapStrategySelector.component),r.createElement("div",null,r.createElement("div",{className:ee.a.headerControls},r.createElement(N.a,{store:this.store,isGroupDeletable:this.isGroupDeletable})))),r.createElement("div",null,this.tabs.component))):null}},{key:"selectedGroupsKey",get:function(){var e=this.store._selectedGroups.result||[];return JSON.stringify(e.map(function(e){return e.uid}))}}])&&ae(n.prototype,o),i&&ae(n,i),t}();pe([l.observable.ref],fe.prototype,"store",void 0),pe([f.default],fe.prototype,"getTabHref",null),pe([l.computed],fe.prototype,"selectedGroupsKey",null),pe([f.default,l.action],fe.prototype,"onOverlapStrategySelect",null),pe([f.default],fe.prototype,"isGroupDeletable",null),fe=pe([Object(o.inject)("routing","appStore"),o.observer],fe);t.default=fe},799:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__1kueS",framedImage:"styles-module__framedImage__1ndwn",SurvivalTable:"styles-module__SurvivalTable__2NKCT",Tooltip:"styles-module__Tooltip__1I-Ty",NotAvailable:"styles-module__NotAvailable__1Zx5R",XmaxNumberInput:"styles-module__XmaxNumberInput__SQsf6"}},800:function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(2),a=n(56),l=n.n(a),s=n(6),u=n(149),c=n(128);function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var m=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":h(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,d(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement(u.default,{name:this.props.name,value:this.props.value,onChange:this.props.onChange,options:Object(c.c)(this.props.molecularProfiles),searchable:!1,clearable:!1,className:this.props.className})}}])&&p(n.prototype,o),i&&p(n,i),t}(),g=b=m([o.observer],b),v=n(1),O=n.n(v);function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var k=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":x(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},C=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),S(this,w(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,r["Component"]),n=t,(o=[{key:"change",value:function(e,t){var n=this,r=O.a.mapValues(this.props.selectedProfileByStudyId,function(r,o){return e===o?n.molecularProfileMap[t.value]:n.molecularProfileMap[r.molecularProfileId]});O.a.isEqual(this.props.selectedProfileByStudyId,r)||this.props.onChange(r)}},{key:"render",value:function(){var e=this;if(this.showEnrichmentsDataSetDropdown||this.props.alwaysShow){var t=O.a.groupBy(this.props.dataSets,function(e){return e.studyId}),n=Object.keys(t).length>1;return O.a.map(t,function(t,o){return r.createElement("div",{className:l.a.DataSet},r.createElement("div",{style:{display:"flex",alignItems:"center"}},r.createElement("strong",null,n?e.studiesMap[o].name+" ":"","Data Set:"),r.createElement("div",{style:{display:"inline-block",marginLeft:5,width:400}},r.createElement(g,{value:e.props.selectedProfileByStudyId[o].molecularProfileId,molecularProfiles:t,onChange:function(t){return e.change(o,t)}}))))})}return null}},{key:"studiesMap",get:function(){return O.a.keyBy(this.props.studies,function(e){return e.studyId})}},{key:"molecularProfileMap",get:function(){return O.a.keyBy(this.props.dataSets,function(e){return e.molecularProfileId})}},{key:"showEnrichmentsDataSetDropdown",get:function(){var e=O.a.groupBy(this.props.dataSets,function(e){return e.studyId});return O.a.some(e,function(e){return e.length>1})}}])&&E(n.prototype,o),i&&E(n,i),t}();k([s.default],C.prototype,"change",null),k([i.computed],C.prototype,"studiesMap",null),k([i.computed],C.prototype,"molecularProfileMap",null),k([i.computed],C.prototype,"showEnrichmentsDataSetDropdown",null),C=k([o.observer],C);t.a=C},801:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__2znIn",framedImage:"styles-module__framedImage__O2nI5",comparisonGroupManager:"styles-module__comparisonGroupManager__1QgCD",groupCheckboxes:"styles-module__groupCheckboxes__3LVqM",markedForDeletion:"styles-module__markedForDeletion__pyY8L",groupRow:"styles-module__groupRow__3thKt",groupItem:"styles-module__groupItem__20g60",groupButtons:"styles-module__groupButtons__YPSq0",buttonUnselected:"styles-module__buttonUnselected__bzlCr",buttonExcludedFromAnalysis:"styles-module__buttonExcludedFromAnalysis__3YbrM",groupLineItemActionButtons:"styles-module__groupLineItemActionButtons__17aPl",sharedGroup:"styles-module__sharedGroup__3pyAe",headerControls:"styles-module__headerControls__2C_RI",survivalPlotHeaderContainer:"styles-module__survivalPlotHeaderContainer__3I3YW",survivalPlotHeader:"styles-module__survivalPlotHeader__qqK6C",survivalTypeOptions:"styles-module__survivalTypeOptions__1iLz-"}},805:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),o=n(19);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,s(t).apply(this,arguments))}var n,i,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["Component"]),n=t,(i=[{key:"render",value:function(){return r.createElement(o.b,{to:"/study?id=".concat(this.props.studyId),className:this.props.className},this.props.children)}}])&&a(n.prototype,i),c&&a(n,c),t}()},807:function(e,t,n){"use strict";function r(e){return new Promise(function(t){return setTimeout(t,e)})}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3;return new Promise(function(r){var o=0,i=setInterval(function(){if(o+=t,e())clearInterval(i),r();else if(o>n)throw clearInterval(i),new Error("sleepUntil timeout")},t)})}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o})},816:function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(2),a=n(6),l=n(15),s=n(5),u=n.n(s),c=n(799),p=n.n(c),f=n(3),d=n(418);function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var O=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":v(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},E=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},S=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=m(this,b(t).apply(this,arguments))).mousePosition={x:0,y:0},e.tooltipOpen=!1,e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,r["Component"]),n=t,(o=[{key:"onMouseOver",value:function(){this.tooltipOpen=!0}},{key:"onMouseOut",value:function(){this.tooltipOpen=!1}},{key:"onMouseMove",value:function(e){this.mousePosition.x=e.pageX,this.mousePosition.y=e.pageY}},{key:"render",value:function(){var e=this.props,t=(e.text,e.maxWidth,e.datum,e.suffix,e.tooltip,e.prefixTspans,e.alwaysShowTooltip,e.renderTruncatedText,e.transform),n=e.tooltipPlacement,o=e.textRef,i=E(e,["text","maxWidth","datum","suffix","tooltip","prefixTspans","alwaysShowTooltip","renderTruncatedText","transform","tooltipPlacement","textRef"]),a=void 0;return t&&void 0!==this.props.x&&void 0!==this.props.y&&(a=t(this.props.x,this.props.y)),r.createElement(r.Fragment,null,r.createElement("text",y({onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,onMouseMove:this.onMouseMove,ref:o,transform:a},i),this.props.prefixTspans,this.truncatedText),(this.textReport.isTruncated||this.props.alwaysShowTooltip)&&this.tooltipOpen&&r.createElement(d.a,{isOpened:!0,node:document.body},r.createElement(l.Popover,{arrowOffsetTop:17,className:u()("cbioportal-frontend","cbioTooltip",p.a.Tooltip),positionLeft:this.mousePosition.x+("left"===n?-8:8),positionTop:this.mousePosition.y-17,style:{transform:"left"===n?"translate(-100%,0%)":void 0},placement:n},this.tooltipElt)))}},{key:"tooltipElt",get:function(){return this.props.tooltip?this.props.tooltip(this.props.datum):r.createElement("span",null,this.props.text)}},{key:"fontFamily",get:function(){var e="Arial";return this.props.style&&this.props.style.fontFamily&&(e=this.props.style.fontFamily.split(", ")[0]),e}},{key:"fontSize",get:function(){var e="13px";return this.props.style&&this.props.style.fontSize&&(e=this.props.style.fontSize+"px"),e}},{key:"textReport",get:function(){return Object(f.eb)(this.props.text||"",this.props.maxWidth,this.fontFamily,this.fontSize)}},{key:"truncatedText",get:function(){return this.props.renderTruncatedText?this.props.renderTruncatedText(this.textReport.text):r.createElement("tspan",null,this.textReport.text)}}])&&h(n.prototype,o),i&&h(n,i),t}();S.defaultProps={maxWidth:100,suffix:"..."},O([i.observable],S.prototype,"mousePosition",void 0),O([i.observable],S.prototype,"tooltipOpen",void 0),O([i.computed],S.prototype,"tooltipElt",null),O([a.default,i.action],S.prototype,"onMouseOver",null),O([a.default,i.action],S.prototype,"onMouseOut",null),O([a.default],S.prototype,"onMouseMove",null),O([i.computed],S.prototype,"fontFamily",null),O([i.computed],S.prototype,"fontSize",null),O([i.computed],S.prototype,"textReport",null),O([i.computed],S.prototype,"truncatedText",null),S=O([o.observer],S),t.a=S},824:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),o=n(3);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,s(t).apply(this,arguments))}var n,i,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["Component"]),n=t,(i=[{key:"render",value:function(){return r.createElement(o.d,{overlay:this.props.tooltip},r.createElement("i",{className:"fa fa-md fa-exclamation-triangle",style:Object.assign({},{color:"#BB1700",cursor:"pointer"},this.props.style||{})}))}}])&&a(n.prototype,i),c&&a(n,c),t}()},825:function(e,t,n){"use strict";var r=n(1),o=n.n(r);function i(e,t){for(var n,r=0,o=e.length;r<o;)switch(t(e[n=Math.floor((r+o)/2)],n)){case 1:o=n;break;case-1:r=n+1;break;case 0:return n}}var a=n(105),l=n.n(a),s=n(1070),u=n.n(s);function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",function(){return E});var p=u()(),f=(p.Vector,p.Matrix),d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.events=t,this.deathEvents=o.a.sortBy(t.filter(function(e){return e.status}),function(e){return e.months}),this.deathsByMonth=o.a.groupBy(this.deathEvents,function(e){return e.months}),this.censorEvents=o.a.sortBy(t.filter(function(e){return!e.status}),function(e){return e.months}),this.censorsByMonth=o.a.groupBy(this.censorEvents,function(e){return e.months})}var t,n,r;return t=e,(n=[{key:"getTotalEventsAtStartOf",value:function(e,t){return 0===e.length||t<=e[0].months?0:i(e,function(n,r){return n.months<t?r===e.length-1||e[r+1].months>=t?0:-1:1})+1}},{key:"getTotalDeathsAtStartOf",value:function(e){return this.getTotalEventsAtStartOf(this.deathEvents,e)}},{key:"getTotalCensorsAtStartOf",value:function(e){return this.getTotalEventsAtStartOf(this.censorEvents,e)}},{key:"getDeathsExactlyAt",value:function(e){return(this.deathsByMonth[e]||[]).length}},{key:"getCensorsExactlyAt",value:function(e){return(this.censorsByMonth[e]||[]).length}},{key:"getTotalAtRiskAtStartOf",value:function(e){return this.events.length-this.getTotalDeathsAtStartOf(e)-this.getTotalCensorsAtStartOf(e)}}])&&c(t.prototype,n),r&&c(t,r),e}(),y=o.a.map,h=o.a.sortBy,m=o.a.groupBy,b=o.a.reduce,g=o.a.last,v=o.a.filter;function O(e,t,n){var r,i,a,s,u,c,p,d,O,E,S,w=null,P=[],x=[],k=[];for(o.a.each(t,function(t,r){var i,a,l,s,u,c,p,f={tte:t,ev:n[r]},d=(i=e,a=f.ev,l=h(y(f.tte,function(e,t){return{tte:e,ev:a[t]}}),"tte"),s=o.a.uniq(y(l,"tte")),u=m(l,function(e){return e.tte}),c=b(s,function(e,t){var n=u[t],r=g(e)||{n:l.length,e:0},o=v(n,function(e){return e.ev});return e.push({n:r.n-r.e,e:n.length,d:o.length,t:n[0].tte}),e},[]),p=[],i=i.filter(function(e){return!!e.d}),{expected:b(i,function(e,t){var n=o.a.find(c,function(e){return e.t===t.t||e.t>t.t});if(n){var r=n.n*t.rate;return p.push(n),e+r}return e},0),observed:v(a,function(e){return 1===e}).length,dataByTimeTable:p,timeNumber:p.length});d.expected&&(P.push(d),x.push(d.observed-d.expected))}),i=P.length-1,a=0;a<P.length;a++)for(k.push([]),s=0;s<P.length;s++)k[a].push(0);for(a=0;a<P.length;a++)for(s=a;s<P.length;s++)for(u=0;u<e.length;u++)d=e[u].n,S=e[u].d,u<P[a].timeNumber&&u<P[s].timeNumber&&(O=P[a].dataByTimeTable[u].n,E=P[s].dataByTimeTable[u].n,a!==s&&1!==d?(k[a][s]-=S*O*E*(d-S)/(d*d*(d-1)),k[s][a]=k[a][s]):1!==d&&(k[a][a]+=S*O*(d-O)*(d-S)/(d*d*(d-1))));for(c=x.slice(0,x.length-1),p=k.slice(0,k.length-1),a=0;a<p.length;a++)p[a]=p[a].slice(0,p[a].length-1);var C=p.slice(0,p.length);for(a=0;a<p.length;a++)C[a]=p[a].slice(0,p[a].length);if(i>0){var j=new f([c]),T=new f([c]).trans(),_=new f(l.a.inv(C));r=j.dot(_).dot(T).data[0][0],w=1-l.a.chisquare.cdf(r,i)}return{dof:i,KM_stats:r,pValue:w}}function E(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=o.a.sortBy(o.a.flatten(t),function(e){return e.months}),i=new d(r),a=t.map(function(e){return o.a.sortBy(e,function(e){return e.months})}),l=a.map(function(e){return e.map(function(e){return e.months})}),s=a.map(function(e){return e.map(function(e){return+e.status})});return O(o.a.uniqBy(r,function(e){return e.months}).map(function(e){return{t:e.months,d:i.getDeathsExactlyAt(e.months),n:i.getTotalAtRiskAtStartOf(e.months),rate:i.getDeathsExactlyAt(e.months)/i.getTotalAtRiskAtStartOf(e.months)}}).filter(function(e){return e.d>0}),l,s).pValue}},831:function(e,t,n){"use strict";function r(e,t){var n=t.indexOf(e);if(-1===n)return t.concat([e]);var r=t.slice();return r.splice(n,1),r}function o(e,t){for(var n=[],r=0;r<t.length;r++)n.push(t[r]),r<t.length-1&&n.push(e);return n}n.d(t,"b",function(){return r}),n.d(t,"a",function(){return o})},840:function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(14),a=n(2),l=n(15),s=n(49),u=n(54),c=n(6),p=n(910),f=n(911),d=n(3);function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var v=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":g(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},O=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=h(this,m(t).apply(this,arguments))).dragging=!1,e}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,r["Component"]),n=t,(a=[{key:"svgRef",value:function(e){this.svgContainer=e&&e.children?e.children[0]:null}},{key:"handleSelection",value:function(e,t,n){this.isGenericAssay?this.props.onSelection(e[0].data.map(function(e){return e.stableId})):this.props.onSelection(e[0].data.map(function(e){return e.hugoGeneSymbol}))}},{key:"handleSelectionCleared",value:function(){this.tooltipModel&&(this.isGenericAssay?this.props.onGenericAssayEntityClick(this.tooltipModel.stableId):this.props.onGeneNameClick&&this.props.onGeneNameClick(this.tooltipModel.hugoGeneSymbol,this.tooltipModel.entrezGeneId)),this.props.onSelectionCleared()}},{key:"onPointMouseOver",value:function(e,t,n){this.tooltipModel=e,this.tooltipModel.x=t,this.tooltipModel.y=n}},{key:"onPointMouseOut",value:function(){this.tooltipModel=null}},{key:"getTooltip",value:function(){return this.tooltipModel?r.createElement(l.Popover,{className:"cbioTooltip",positionLeft:this.tooltipModel.x+15,positionTop:this.tooltipModel.y-33},this.isGenericAssay?"Entity: ".concat(this.tooltipModel.entityName||this.tooltipModel.stableId):"Gene: ".concat(this.tooltipModel.hugoGeneSymbol),r.createElement("br",null),"Log Ratio: ",Object(s.a)(this.tooltipModel.logRatio),r.createElement("br",null),"p-Value:"," ",Object(u.b)(this.tooltipModel.pValue,3,.01),r.createElement("br",null),"q-Value:"," ",Object(u.b)(this.tooltipModel.qValue,3,.01)):r.createElement("span",null)}},{key:"onClick",value:function(){this.dragging||this.handleSelectionCleared(),this.dragging=!1}},{key:"onSelectionComponentRender",value:function(){this.dragging=!0}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:"posRelative"},r.createElement("div",{className:"borderedChart inlineBlock",style:{position:"relative"},onClick:this.onClick},r.createElement(i.VictoryChart,{containerComponent:r.createElement(i.VictorySelectionContainer,{containerRef:this.svgRef,activateSelectedData:!1,onSelection:function(t,n,r){return e.handleSelection(t,n,r)},responsive:!1,onSelectionCleared:this.handleSelectionCleared,selectionComponent:r.createElement(p.a,{onRender:this.onSelectionComponentRender})}),theme:d.a,domainPadding:{y:20},height:350,width:350,padding:{top:40,bottom:60,left:60,right:40},singleQuadrantDomainPadding:!1},r.createElement(i.VictoryAxis,{tickValues:this.props.xAxisTickValues,domain:[-this.props.xAxisDomain,this.props.xAxisDomain],label:"Log Ratio",tickFormat:function(e){return e>=1e3||e<=-1e3?"".concat(e/1e3,"k"):e},style:{tickLabels:{padding:20},axisLabel:{padding:40},ticks:{size:0},grid:{strokeOpacity:1}},crossAxis:!1,orientation:"bottom",offsetY:60}),r.createElement(i.VictoryAxis,{label:"-log10 p-Value",dependentAxis:!0,tickCount:4,style:{tickLabels:{padding:135},axisLabel:{padding:165},ticks:{size:0},grid:{strokeOpacity:1}}}),r.createElement(i.VictoryLabel,{style:d.u,text:"â "+this.xAxisLeftLabel,x:60,y:300}),r.createElement(i.VictoryLabel,{style:d.u,text:this.xAxisRightLabel+" â",textAnchor:"end",x:310,y:300}),r.createElement(i.VictoryLabel,{style:d.u,text:"Significance â",x:320,y:210,angle:-90}),r.createElement(i.VictoryScatter,{style:{data:{fillOpacity:.4}},data:this.props.data,dataComponent:r.createElement(f.a,{onMouseOver:this.onPointMouseOver,onMouseOut:this.onPointMouseOut,fill:function(t){return e.isGenericAssay&&t.stableId in e.props.selectedSet?"#FE9929":!e.isGenericAssay&&t.hugoGeneSymbol in e.props.selectedSet?"#FE9929":t.qValue<.05?"#58ACFA":"#D3D3D3"}})})),r.createElement(d.e,{getSvg:function(){return e.svgContainer},filename:"enrichments-volcano",dontFade:!0,type:"button",style:{position:"absolute",top:10,right:10,zIndex:0}})),r.createElement(o.Observer,null,this.getTooltip))}},{key:"isGenericAssay",get:function(){return!!this.props.onGenericAssayEntityClick}},{key:"totalLabelWidths",get:function(){return Object(d.K)(this.props.xAxisLeftLabel,"Arial","13px")+Object(d.K)(this.props.xAxisRightLabel,"Arial","13px")}},{key:"xAxisLeftLabel",get:function(){return this.totalLabelWidths>200?Object(d.db)(this.props.xAxisLeftLabel,90,"Arial","13px"):this.props.xAxisLeftLabel}},{key:"xAxisRightLabel",get:function(){return this.totalLabelWidths>180?Object(d.db)(this.props.xAxisRightLabel,90,"Arial","13px"):this.props.xAxisRightLabel}}])&&y(n.prototype,a),c&&y(n,c),t}();v([a.observable],O.prototype,"tooltipModel",void 0),v([a.observable],O.prototype,"svgContainer",void 0),v([c.default,a.action],O.prototype,"svgRef",null),v([a.computed],O.prototype,"isGenericAssay",null),v([c.default],O.prototype,"handleSelectionCleared",null),v([c.default,a.action],O.prototype,"onPointMouseOver",null),v([c.default,a.action],O.prototype,"onPointMouseOut",null),v([c.default],O.prototype,"getTooltip",null),v([c.default],O.prototype,"onClick",null),v([c.default],O.prototype,"onSelectionComponentRender",null),v([a.computed],O.prototype,"xAxisLeftLabel",null),v([a.computed],O.prototype,"xAxisRightLabel",null),O=v([o.observer],O),t.a=O},841:function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(2),a=n(148),l=n(56),s=n.n(l),u=n(111),c=n(912),p=n(840),f=n(1),d=n(6),y=n(913),h=n(3),m=n(914);function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var S=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":E(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},w=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=g(this,v(t).apply(this,arguments))).overExpressedFilter=!0,e.underExpressedFilter=!0,e.significanceFilter=!1,e.checkedGenes=[],e._expressedGroups=e.props.groups.map(function(e){return e.name}),e.dataStore=new y.a(function(){return e.filteredData},function(){return e.highlightedRow},function(t){e.highlightedRow=t}),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,r["Component"]),n=t,(o=[{key:"filterByGene",value:function(e){return!this.selectedGenes||this.selectedGenes.includes(e)}},{key:"toggleSignificanceFilter",value:function(){this.significanceFilter=!this.significanceFilter}},{key:"onCheckGene",value:function(e){var t=this.checkedGenes.indexOf(e);-1!==t?this.checkedGenes.splice(t,1):this.checkedGenes.push(e)}},{key:"onGeneNameClick",value:function(e,t){this.clickedGeneHugo=e,this.clickedGeneEntrez=t}},{key:"onSelection",value:function(e){this.selectedGenes=e}},{key:"onSelectionCleared",value:function(){this.selectedGenes=null}},{key:"onChange",value:function(e){this._expressedGroups=f.map(e,function(e){return e.value})}},{key:"render",value:function(){if(0===this.props.data.length)return r.createElement("div",{className:"alert alert-info"},"No data/result available");var e=Object(u.o)(this.data,this.props.queriedHugoGeneSymbols||[]),t=f.maxBy(e,function(e){return Math.ceil(Math.abs(e.x))});return r.createElement("div",{className:s.a.Container},r.createElement("div",{className:s.a.ChartsPanel},this.isTwoGroupAnalysis&&r.createElement(p.a,{data:e,selectedSet:this.selectedGenesSet,xAxisLeftLabel:this.group2.nameOfEnrichmentDirection||this.group2.name,xAxisRightLabel:this.group1.nameOfEnrichmentDirection||this.group1.name,xAxisDomain:Math.ceil(Math.abs(t.x)),xAxisTickValues:null,onGeneNameClick:this.onGeneNameClick,onSelection:this.onSelection,onSelectionCleared:this.onSelectionCleared}),r.createElement(m.a,{selectedProfile:this.props.selectedProfile,groups:this.props.groups,sampleKeyToSample:this.props.sampleKeyToSample,queriedHugoGeneSymbols:this.props.queriedHugoGeneSymbols,oqlFilteredCaseAggregatedData:this.props.oqlFilteredCaseAggregatedData,selectedRow:this.selectedRow,enrichmentType:this.props.enrichmentType})),r.createElement("div",{className:s.a.TableContainer},r.createElement("div",null,r.createElement("h3",null,this.props.selectedProfile.name),!!this.props.isGeneCheckBoxEnabled&&r.createElement(c.a,{checkedGenes:this.checkedGenes})),r.createElement("hr",{style:{marginTop:0,marginBottom:5,borderWidth:2}}),r.createElement("div",{className:s.a.Checkboxes},r.createElement("div",{style:{width:250,marginRight:7}},r.createElement(h.b,{name:"groupsSelector",placeholder:this.props.groupsSelectorPlaceholder,onChange:this.onChange,options:this.options,value:this.selectedValues})),r.createElement("div",{className:s.a.FlexCheckbox},r.createElement("label",null,r.createElement("input",{type:"checkbox",checked:this.significanceFilter,onClick:this.toggleSignificanceFilter}),"Significant only"))),r.createElement(a.b,{data:this.filteredData,onCheckGene:this.props.isGeneCheckBoxEnabled?this.onCheckGene:void 0,onGeneNameClick:this.onGeneNameClick,dataStore:this.dataStore,mutexTendency:this.props.alteredVsUnalteredMode,checkedGenes:this.props.isGeneCheckBoxEnabled?this.checkedGenes:void 0,visibleOrderedColumnNames:this.visibleOrderedColumnNames,customColumns:f.keyBy(this.customColumns,function(e){return e.uniqueName||e.name})})))}},{key:"data",get:function(){return Object(u.n)(this.props.data,this.props.queriedHugoGeneSymbols||[],this.props.groups)}},{key:"filteredData",get:function(){return Object(u.p)(this.data,this._expressedGroups,this.significanceFilter,this.filterByGene)}},{key:"group1",get:function(){return this.props.groups[0]}},{key:"group2",get:function(){return this.props.groups[1]}},{key:"group1CheckboxLabel",get:function(){return this.props.alteredVsUnalteredMode?"Over-expressed":r.createElement("span",{style:{display:"flex",alignItems:"center"}},"Enriched inÂ ",r.createElement(h.g,{text:this.group1.name}))}},{key:"group2CheckboxLabel",get:function(){return this.props.alteredVsUnalteredMode?"Under-expressed":r.createElement("span",{style:{display:"flex",alignItems:"center"}},"Enriched inÂ ",r.createElement(h.g,{text:this.group2.name}))}},{key:"selectedGenesSet",get:function(){return f.keyBy(this.selectedGenes||[])}},{key:"isTwoGroupAnalysis",get:function(){return 2==this.props.groups.length}},{key:"customColumns",get:function(){return Object(u.m)(this.props.groups,this.props.enrichmentType,this.props.alteredVsUnalteredMode)}},{key:"visibleOrderedColumnNames",get:function(){var e=[];return e.push(a.a.GENE,a.a.CYTOBAND),this.props.groups.forEach(function(t){e.push(t.name+" mean")}),this.props.groups.forEach(function(t){e.push(t.name+" standard deviation")}),this.isTwoGroupAnalysis&&e.push(a.a.LOG_RATIO),e.push(a.a.P_VALUE,a.a.Q_VALUE),this.isTwoGroupAnalysis&&this.props.alteredVsUnalteredMode?e.push(a.a.TENDENCY):this.props.enrichmentType===u.e.DNA_METHYLATION?e.push(a.a.METHYLATION):e.push(a.a.EXPRESSED),e}},{key:"selectedValues",get:function(){return this._expressedGroups.map(function(e){return{value:e}})}},{key:"options",get:function(){return f.map(this.props.groups,function(e){return{label:e.nameOfEnrichmentDirection?e.nameOfEnrichmentDirection:e.name,value:e.name}})}},{key:"selectedRow",get:function(){var e=this;if(this.clickedGeneHugo)return this.props.data.filter(function(t){return t.hugoGeneSymbol===e.clickedGeneHugo})[0]}}])&&b(n.prototype,o),i&&b(n,i),t}();w.defaultProps={alteredVsUnalteredMode:!0,isGeneCheckBoxEnabled:!1,groupsSelectorPlaceholder:"High expression in ..."},S([i.observable],w.prototype,"overExpressedFilter",void 0),S([i.observable],w.prototype,"underExpressedFilter",void 0),S([i.observable],w.prototype,"significanceFilter",void 0),S([i.observable.shallow],w.prototype,"checkedGenes",void 0),S([i.observable],w.prototype,"clickedGeneHugo",void 0),S([i.observable],w.prototype,"clickedGeneEntrez",void 0),S([i.observable.ref],w.prototype,"selectedGenes",void 0),S([i.observable.ref],w.prototype,"highlightedRow",void 0),S([i.observable.ref],w.prototype,"_expressedGroups",void 0),S([i.observable],w.prototype,"svgContainer",void 0),S([i.computed],w.prototype,"data",null),S([i.computed],w.prototype,"filteredData",null),S([d.default],w.prototype,"filterByGene",null),S([d.default],w.prototype,"toggleSignificanceFilter",null),S([d.default],w.prototype,"onCheckGene",null),S([d.default],w.prototype,"onGeneNameClick",null),S([d.default],w.prototype,"onSelection",null),S([d.default],w.prototype,"onSelectionCleared",null),S([i.computed],w.prototype,"group1",null),S([i.computed],w.prototype,"group2",null),S([i.computed],w.prototype,"group1CheckboxLabel",null),S([i.computed],w.prototype,"group2CheckboxLabel",null),S([i.computed],w.prototype,"selectedGenesSet",null),S([i.computed],w.prototype,"isTwoGroupAnalysis",null),S([i.computed],w.prototype,"customColumns",null),S([i.computed],w.prototype,"visibleOrderedColumnNames",null),S([d.default,i.action],w.prototype,"onChange",null),S([i.computed],w.prototype,"selectedValues",null),S([i.computed],w.prototype,"options",null),S([i.computed],w.prototype,"selectedRow",null),w=S([o.observer],w),t.a=w},906:function(e,t,n){e.exports=n(25)(346)},907:function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(3),a=n(6),l=n(2),s=n(47),u=n(110),c=n(66),p=n(130),f=n(176),d=n(908),y=n(97);function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var O=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":v(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};var E=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=m(this,b(t).apply(this,arguments))).inputGroupName="",e.saveGroupToUser=!0,e.enterNameInterface=Object(u.a)({await:function(){return[e.props.store.origin,e.props.store.sampleMap,e.props.store.existingGroupNames,e.props.store._originalGroups,e.props.store.patientToSamplesSet]},render:function(){return r.createElement("div",{style:{width:250}},e.props.store.isLoggedIn&&r.createElement(d.a,{checked:e.saveGroupToUser,onClick:e.toggleSaveGroupToUser,label:[r.createElement("span",{style:{marginRight:5}},"Save group to user account"),r.createElement(f.a,{divStyle:{display:"inline"},tooltip:r.createElement("span",null,"Selecting this will save the new group with the associated study in your user account.")})]}),r.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.createElement("input",{className:"form-control",style:{marginRight:5},type:"text",placeholder:"Enter a group name..",value:e.inputGroupName,onChange:e.onChangeInputGroupName,"data-test":e.props.caseType+"GroupNameInputField"}),r.createElement("button",{className:"btn btm-sm btn-primary",disabled:0===e.inputGroupName.length||e.isDuplicateName,onClick:e.submit,"data-test":e.props.caseType+"GroupNameSubmitButton"},"Submit")),e.isDuplicateName&&r.createElement("div",{style:{marginTop:4},"data-test":e.props.caseType+"DuplicateGroupNameMessage"},s.b))},renderPending:function(){return r.createElement(c.a,{isLoading:!0})}}),e.includedRegionsDescription=Object(u.a)({await:function(){return[e.props.store.uidToGroup]},render:function(){return r.createElement("div",null,e.props.includedRegions.map(function(t){return r.createElement("div",null,function(e,t,n,o){var i=e.map(function(e){return n[e]}),a=r.createElement("span",null,o[0].toUpperCase(),o.substring(1),"s only in"," ",Object(p.f)(i,"and"));return a=r.createElement("span",null,a,".")}(t,e.props.allGroupsInPlot,e.props.store.uidToGroup.result,e.props.caseType))}))}}),e}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,r["Component"]),n=t,(o=[{key:"toggleSaveGroupToUser",value:function(){this.saveGroupToUser=!this.saveGroupToUser}},{key:"onChangeInputGroupName",value:function(e){this.inputGroupName=e.target.value}},{key:"submit",value:function(){var e;e="sample"===this.props.caseType?Object(p.d)(this.props.store._originalGroups.result,this.props.includedRegions,this.props.allGroupsInPlot):Object(p.c)(this.props.store._originalGroups.result,this.props.includedRegions,this.props.allGroupsInPlot,this.props.store.patientToSamplesSet.result),this.props.submitGroup({name:this.inputGroupName,description:"",studies:e,origin:this.props.store.origin.result},this.saveGroupToUser)}},{key:"render",value:function(){return r.createElement("div",{style:Object.assign({width:this.props.width,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},this.props.style)},r.createElement(i.d,{trigger:["click"],overlay:this.enterNameInterface.component,placement:"top"},r.createElement("button",{className:"btn btn-md btn-primary",disabled:0===this.props.includedRegions.length,"data-event":Object(y.e)({action:"createGroupFromVenn",label:"",category:"groupComparison"}),"data-test":this.props.caseType+"GroupComparisonCreateGroupButton"},"Create Group From Selected Diagram Areas")),r.createElement("div",{style:{marginTop:20}},this.includedRegionsDescription.component))}},{key:"isDuplicateName",get:function(){var e=this.props.store.existingGroupNames.result,t=e.session;return this.saveGroupToUser&&(t=t.concat(e.user)),t.includes(this.inputGroupName.trim())}}])&&h(n.prototype,o),a&&h(n,a),t}();O([l.observable],E.prototype,"inputGroupName",void 0),O([l.observable],E.prototype,"saveGroupToUser",void 0),O([a.default,l.action],E.prototype,"toggleSaveGroupToUser",null),O([a.default,l.action],E.prototype,"onChangeInputGroupName",null),O([a.default,l.action],E.prototype,"submit",null),O([l.computed],E.prototype,"isDuplicateName",null),E=O([o.observer],E),t.a=E},908:function(e,t,n){"use strict";var r=n(0),o=n(9);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,l(t).apply(this,arguments))}var n,o,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement("div",{className:"checkbox",style:Object.assign({display:"flex",alignItems:"center"},this.props.style)},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:this.props.value,checked:this.props.checked,onClick:this.props.onClick,style:{marginTop:1}})),"function"==typeof this.props.label?this.props.label():this.props.label)}}])&&i(n.prototype,o),u&&i(n,u),t}();p=c([o.observer],p),t.a=p},909:function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return c});var r=n(0),o=n(816),i=n(130),a=n(831);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},u=function(e){var t=e.uidToGroup,n=e.dx,a=e.dy,u=(e.datum,e.text,s(e,["uidToGroup","dx","dy","datum","text"])),c=t[e.text];return r.createElement(o.a,l({text:c.name,prefixTspans:c.ordinal.length>0?[r.createElement("tspan",null,"("),r.createElement("tspan",{style:{fontWeight:"bold"}},c.ordinal),r.createElement("tspan",null,") ")]:void 0,tooltip:function(){return r.createElement("div",null,Object(i.h)(c))},maxWidth:e.maxLabelWidth,dy:a,dx:n},u))},c=function(e){var t=e.uidToGroup,n=e.dx,u=e.dy,c=(e.datum,e.text),p=s(e,["uidToGroup","dx","dy","datum","text"]),f=JSON.parse(c).map(function(e){return t[e]}),d=(f.map(function(e){return e.ordinal}),"Only ".concat(f.map(function(e){return e.ordinal?"(".concat(e.ordinal,")"):e.name}).join(", ")));return r.createElement(o.a,l({text:d,renderTruncatedText:function(e){for(var t=[],n=0;n<e.length;n++){n>0&&n<e.length-1&&"("===e[n-1]&&")"===e[n+1]?t.push(r.createElement("tspan",{style:{fontWeight:"bold"}},e[n])):t.push(r.createElement("tspan",null,e[n]))}return t},alwaysShowTooltip:!0,tooltip:function(){return r.createElement("div",null,"Only"," ",Object(a.a)(r.createElement("span",null,",Â "),f.map(function(e){return Object(i.h)(e)})))},maxWidth:e.maxLabelWidth,dy:u,dx:n},p))}},910:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,l(t).apply(this,arguments))}var n,o,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.onRender,n=u(e,["onRender"]);return(n.width>5||n.height>5)&&t(),r.createElement("rect",n)}}])&&i(n.prototype,o),c&&i(n,c),t}()},911:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(0),o=n(6);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,l(t).apply(this,arguments))}var n,o,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,r["Component"]),n=t,(o=[{key:"onMouseOver",value:function(e){e.target.setAttribute("r",10),this.props.onMouseOver(this.props.datum,this.props.x,this.props.y)}},{key:"onMouseOut",value:function(e){e.target.setAttribute("r",3),this.props.onMouseOut()}},{key:"render",value:function(){return r.createElement("circle",{cx:this.props.x,cy:this.props.y,r:"3",onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,style:Object.assign({},this.props.style,{fill:this.props.fill(this.props.datum)})})}}])&&i(n.prototype,o),u&&i(n,u),t}();c([o.default],p.prototype,"onMouseOver",null),c([o.default],p.prototype,"onMouseOut",null)},912:function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(15),a=n(6),l=n(3),s=n(64);function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var y=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":d(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,p(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,r["Component"]),n=t,(o=[{key:"onAddGenes",value:function(){Object(s.c)(window.urlWrapper,this.props.checkedGenes)}},{key:"render",value:function(){var e=this.props.checkedGenes.length>0?"(".concat(this.props.checkedGenes.join(", "),")"):"(none checked)";return r.createElement("div",{style:{marginBottom:15}},r.createElement(l.d,{overlay:"Check genes in table below"},r.createElement(i.Button,{style:{marginBottom:2},disabled:this.props.checkedGenes.length<1,onClick:this.onAddGenes,bsSize:"xsmall"},"Add checked genes to query ",e)))}}])&&u(n.prototype,o),a&&u(n,a),t}();y([a.default],h.prototype,"onAddGenes",null),h=y([o.observer],h),t.a=h},913:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(151);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=i(this,a(t).call(this,e))).setHighlighted=r,o.dataHighlighter=function(e){var t=n();return!(!t||e.entrezGeneId!==t.entrezGeneId)},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,r["a"]),t}()},914:function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(2),a=n(56),l=n.n(a),s=n(111),u=n(1),c=n(6),p=n(7),f=n(299),d=n(3),y=n(13),h=n(66),m=n(54),b=n(18),g=n(5),v=n.n(g),O=n(937);function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?P(e):t}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var T=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":j(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},_=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function l(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,l)}s((r=r.apply(e,t||[])).next())})},G=function(e){function t(){return S(this,t),w(this,x(t).apply(this,arguments))}return k(t,f["a"]),t}(),A=function(e){function t(){var e;return S(this,t),(e=w(this,x(t).apply(this,arguments))).horzAxisData=Object(d.T)({await:function(){return[]},invoke:function(){return _(P(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.map(this.props.groups,function(e){return e.name}),n={data:[],datatype:"string",categoryOrder:t},r=u.reduce(this.props.groups,function(e,t){return t.samples.forEach(function(n){var r=n.uniqueSampleKey;void 0===e[r]&&(e[r]={uniqueSampleKey:r,value:[]}),e[r].value.push(t.name)}),e},{}),n.data=u.values(r),e.abrupt("return",Promise.resolve(n));case 5:case"end":return e.stop()}},e,this)}))}}),e.vertAxisData=Object(d.T)({invoke:function(){return _(P(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,o,i,a,l,s,c,p,f,d,h,m,b,g,v,O,E;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={data:[],datatype:"number"},void 0===this.props.selectedRow){e.next=62;break}if(!this.isGenericAssay){e.next=39;break}return e.next=5,y.a.fetchGenericAssayDataInMolecularProfileUsingPOST({molecularProfileId:this.props.selectedProfile.molecularProfileId,genericAssayDataFilter:{genericAssayStableIds:[this.props.selectedRow.stableId],sampleIds:u.map(this.props.sampleKeyToSample,function(e){return e.sampleId})}});case 5:n=e.sent,r=t.data,o=!0,i=!1,a=void 0,e.prev=10,l=n[Symbol.iterator]();case 12:if(o=(s=l.next()).done){e.next=23;break}if(c=s.value,!/[<>]+/.test(c.value)){e.next=18;break}return e.abrupt("continue",20);case 18:p=parseFloat(c.value),r.push({uniqueSampleKey:c.uniqueSampleKey,value:p});case 20:o=!0,e.next=12;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(10),i=!0,a=e.t0;case 29:e.prev=29,e.prev=30,o||null==l.return||l.return();case 32:if(e.prev=32,!i){e.next=35;break}throw a;case 35:return e.finish(32);case 36:return e.finish(29);case 37:e.next=62;break;case 39:return e.next=41,y.a.fetchAllMolecularDataInMolecularProfileUsingPOST({molecularProfileId:this.props.selectedProfile.molecularProfileId,molecularDataFilter:{entrezGeneIds:[this.props.selectedRow.entrezGeneId],sampleIds:u.map(this.props.sampleKeyToSample,function(e){return e.sampleId})}});case 41:for(f=e.sent,d=t.data,h=!0,m=!1,b=void 0,e.prev=46,g=f[Symbol.iterator]();!(h=(v=g.next()).done);h=!0)O=v.value,E=this.logScale?Math.log(O.value+1)/Math.log(2):O.value,d.push({uniqueSampleKey:O.uniqueSampleKey,value:E});e.next=54;break;case 50:e.prev=50,e.t1=e.catch(46),m=!0,b=e.t1;case 54:e.prev=54,e.prev=55,h||null==g.return||g.return();case 57:if(e.prev=57,!m){e.next=60;break}throw b;case 60:return e.finish(57);case 61:return e.finish(54);case 62:return e.abrupt("return",Promise.resolve(t));case 63:case"end":return e.stop()}},e,this,[[10,25,29,37],[30,,32,36],[46,50,54,62],[55,,57,61]])}))}}),e.boxPlotData=Object(d.T)({await:function(){return[e.vertAxisData,e.horzAxisData]},invoke:function(){var t=e.horzAxisData.result,n=e.vertAxisData.result;if(t&&n){var r=t,o=n;return Promise.resolve(Object(p.F)(r,o,e.props.sampleKeyToSample,{},void 0,void 0))}return new Promise(function(){return 0})}}),e}var n,o,i;return k(t,r["Component"]),n=t,(o=[{key:"getData",value:function(){return void 0!==this.props.selectedRow?Object(p.q)(this.boxPlotData.result,"Group",this.axisLabelY,{}):""}},{key:"render",value:function(){var e=this,t=null;if(void 0===this.props.selectedRow)t=r.createElement("div",{className:v()("text-center",l.a.BoxEmpty)},"Click on ",this.isGenericAssay?"an entity":"gene"," in the table to render this plot.");else if(this.boxPlotData.isPending)t=r.createElement("div",{className:v()("text-center",l.a.BoxEmpty)},r.createElement(h.a,{isLoading:!0,size:"small",className:l.a.ChartLoader}));else if(this.boxPlotData.isComplete&&this.boxPlotData.result.length>0){var n="Group";this.isGenericAssay||void 0===this.props.queriedHugoGeneSymbols||(n="Query: ".concat(Object(O.b)(this.props.queriedHugoGeneSymbols)));var o="";o=this.isGenericAssay?"".concat(this.props.selectedProfile.genericAssayType,"_enrichment"):"".concat(this.props.enrichmentType===s.e.DNA_METHYLATION?"methylation":"expression","_enrichment"),t=r.createElement("div",{className:l.a.BoxPlot,"data-test":"MiniBoxPlot"},r.createElement(d.e,{buttons:["SVG","PNG","Data"],getSvg:function(){return e.svgContainer},getData:this.getData,filename:o,dontFade:!0,style:{position:"absolute",right:10,top:10},type:"button"}),r.createElement(G,{domainPadding:10,startDataAxisAtZero:!0,boxWidth:this.boxPlotData.result.length>7?30:60,axisLabelY:this.axisLabelY,axisLabelX:n,data:this.boxPlotData.result,chartBase:320,scatterPlotTooltip:this.scatterPlotTooltip,horizontal:!1,fill:"#00AAF8",symbol:"circle",useLogSpaceTicks:!0,svgRef:function(t){return e.svgContainer=t},compressXAxis:!0,legendData:[{name:"p-Value: ".concat(Object(m.b)(this.props.selectedRow.pValue,3,.01)),symbol:{fill:"none",strokeWidth:0}},{name:"q-Value: ".concat(Object(m.b)(this.props.selectedRow.qValue,3,.01)),symbol:{fill:"none",strokeWidth:0}}]}))}return r.createElement("div",{style:{position:"relative",display:"inline-block"},className:"borderedChart"},t)}},{key:"logScale",get:function(){return this.props.selectedProfile.molecularProfileId.includes("rna_seq")}},{key:"isGenericAssay",get:function(){return!!this.props.genericAssayType}},{key:"axisLabelY",get:function(){return void 0!==this.props.selectedRow?this.isGenericAssay?"".concat(this.props.selectedRow.stableId,", ").concat(this.props.selectedProfile.name):"".concat(this.props.selectedRow.hugoGeneSymbol,", ").concat(this.props.selectedProfile.name).concat(this.logScale?" (log2)":""):""}},{key:"scatterPlotTooltip",get:function(){var e=this;return function(t){var n=void 0;if(e.props.oqlFilteredCaseAggregatedData){var o=e.props.oqlFilteredCaseAggregatedData?e.props.oqlFilteredCaseAggregatedData[t.uniqueSampleKey]:[];n="Alteration(s): "+Object(s.k)(o)}var i=r.createElement("span",null,"Loading... (this shouldnt appear because the box plot shouldnt be visible)");return e.boxPlotData.isComplete&&(i=e.isGenericAssay?r.createElement("div",null,r.createElement("a",{href:Object(b.y)(t.studyId,t.sampleId),target:"_blank"},r.createElement("b",null,t.sampleId)),r.createElement("br",null),Object(p.n)(e.props.genericAssayType),": ",t.value.toFixed(3)):r.createElement("div",null,r.createElement("a",{href:Object(b.y)(t.studyId,t.sampleId),target:"_blank"},r.createElement("b",null,t.sampleId)),r.createElement("br",null),e.props.enrichmentType,e.logScale?" (log2)":"",":"," ",t.value.toFixed(3),!!n&&r.createElement("br",null),n)),i}}}])&&E(n.prototype,o),i&&E(n,i),t}();A.defaultProps={},T([i.observable],A.prototype,"svgContainer",void 0),T([c.default],A.prototype,"getData",null),T([i.computed],A.prototype,"logScale",null),T([i.computed],A.prototype,"isGenericAssay",null),T([i.computed],A.prototype,"axisLabelY",null),T([i.computed],A.prototype,"scatterPlotTooltip",null),A=T([o.observer],A),t.a=A},915:function(e,t,n){"use strict";n.d(t,"a",function(){return A});var r=n(0),o=n(9),i=n(2),a=n(296),l=n.n(a),s=n(15),u=n(799),c=n.n(u),p=(n(916),n(807)),f=n(1),d=n(14),y=n(93),h=n(54),m=n(18),b=n(3),g=n(6),v=n(30),O=n(5),E=n.n(O),S=n(816),w=n(825),P=n(8);function x(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var A,R=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":G(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},D=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function l(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,l)}s((r=r.apply(e,t||[])).next())})};!function(e){e.TOOLTIP="tooltip",e.CHART="chart"}(A||(A={}));var M=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=j(t).call(this,e),(n=!o||"object"!==G(o)&&"function"!=typeof o?T(r):o).highlightedCurve="",n.sliderValue=n.getInitialSliderValue(),n.isTooltipHovered=!1,n.tooltipCounter=0,n.styleOptsDefaultProps={width:900,height:500,padding:{top:20,bottom:50,left:60,right:20},tooltipXOffset:20,tooltipYOffset:-47,axis:{x:{axisLabel:{padding:35},grid:{opacity:0}},y:{axisLabel:{padding:45,fill:"black"},grid:{opacity:0}}},pValue:{x:610,y:30,textAnchor:"start"},legend:{x:600,y:50}},n.events=[{target:"data",eventHandlers:{onMouseOver:function(){return[{target:"data",mutation:function(e){return n.tooltipModel=e,n.tooltipCounter++,{active:!0}}}]},onMouseOut:function(){return[{target:"data",mutation:function(){return D(T(n),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.a)(100);case 2:return this.isTooltipHovered||1!==this.tooltipCounter||(this.tooltipModel=null),this.tooltipCounter--,e.abrupt("return",{active:!1});case 5:case"end":return e.stop()}},e,this)}))}}]}}}],n.tooltipMouseEnter=n.tooltipMouseEnter.bind(T(n)),n.tooltipMouseLeave=n.tooltipMouseLeave.bind(T(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,r["Component"]),n=t,(o=[{key:"getInitialSliderValue",value:function(){return P.b.serverConfig.survival_initial_x_axis_limit?Math.min(P.b.serverConfig.survival_initial_x_axis_limit,this.maximumDataMonthValue):this.maximumDataMonthValue}},{key:"toSVGDOMNode",value:function(){return Object(v.tb)(this.svgContainer.firstChild,{legendGroupSelector:".survivalChartDownloadLegend",selectorToHide:".survivalChartLegendHideForDownload"})}},{key:"tooltipMouseEnter",value:function(){this.isTooltipHovered=!0}},{key:"tooltipMouseLeave",value:function(){this.isTooltipHovered=!1,this.tooltipModel=null}},{key:"getSvg",value:function(){return this.toSVGDOMNode()}},{key:"getData",value:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var o,i=this.analysisGroupsWithData[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;e.push({scatterData:Object(y.i)(this.props.sortedGroupedSurvivals[a.value],this.estimates[a.value],a.value),title:void 0!==a.name?a.name:a.value})}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return Object(y.e)(e,this.props.title)}},{key:"hoverCircleFillOpacity",value:function(e,t){return t||this.isTooltipHovered&&this.tooltipModel&&this.tooltipModel.datum.studyId===e.studyId&&this.tooltipModel.datum.patientId===e.patientId?.3:0}},{key:"getAxisTickCount",value:function(e){return 5*Math.ceil(e/200)}},{key:"onSliderChange",value:function(e){this.sliderValue=e}},{key:"onSliderTextChange",value:function(e){this.sliderValue=Number.parseFloat(e)}},{key:"render",value:function(){return 0===f.flatten(f.values(this.props.sortedGroupedSurvivals)).length?r.createElement("div",{className:"alert alert-info"},"No data to plot."):r.createElement("div",{style:{position:"relative"}},this.props.legendLocation===A.TOOLTIP?r.createElement(b.d,{mouseLeaveDelay:.2,placement:"rightBottom",overlay:this.chartTooltip},this.chart):this.chart,this.tooltipModel&&r.createElement(s.Popover,k({arrowOffsetTop:56,className:E()("cbioportal-frontend","cbioTooltip",c.a.Tooltip),positionLeft:this.tooltipModel.x+this.styleOpts.tooltipXOffset},{container:this},{positionTop:this.tooltipModel.y+this.styleOpts.tooltipYOffset,onMouseEnter:this.tooltipMouseEnter,onMouseLeave:this.tooltipMouseLeave}),r.createElement("div",null,"Patient ID:"," ",r.createElement("a",{href:Object(m.w)(this.tooltipModel.datum.studyId,this.tooltipModel.datum.patientId),target:"_blank"},this.tooltipModel.datum.patientId),r.createElement("br",null),!!this.props.showCurveInTooltip&&["Curve: ".concat(this.tooltipModel.datum.group),r.createElement("br",null)],this.props.yLabelTooltip,":"," ",this.tooltipModel.datum.y.toFixed(2),"%",r.createElement("br",null),this.tooltipModel.datum.status?this.props.xLabelWithEventTooltip:this.props.xLabelWithoutEventTooltip,": ",this.tooltipModel.datum.x.toFixed(2)," months"," ",this.tooltipModel.datum.status?"":"(censored)",r.createElement("br",null),this.props.analysisClinicalAttribute&&r.createElement("span",null,this.props.analysisClinicalAttribute.displayName,":"," ",this.props.patientToAnalysisGroups[this.tooltipModel.datum.uniquePatientKey]))),this.props.showTable&&r.createElement("table",{className:"table table-striped",style:{marginTop:20,width:"100%"}},r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",null),r.createElement("td",null,this.props.totalCasesHeader),r.createElement("td",null,this.props.statusCasesHeader),r.createElement("td",null,this.props.medianMonthsHeader)),this.tableRows)))}},{key:"styleOpts",get:function(){var e=f.merge({},this.styleOptsDefaultProps,this.props.styleOpts);return e.padding.right=this.props.legendLocation===A.CHART?300:e.padding.right,this.props.styleOpts&&this.props.styleOpts.legend&&void 0!==this.props.styleOpts.legend.x||(e.legend.x=e.width-e.padding.right),e}},{key:"downSamplingDenominators",get:function(){return{x:this.styleOpts.width-this.styleOpts.padding.left-this.styleOpts.padding.right,y:this.styleOpts.height-this.styleOpts.padding.top-this.styleOpts.padding.bottom}}},{key:"estimates",get:function(){return f.mapValues(this.props.sortedGroupedSurvivals,function(e){return Object(y.f)(e)})}},{key:"unfilteredScatterData",get:function(){var e=this;return f.mapValues(this.props.sortedGroupedSurvivals,function(t,n){var r=e.estimates[n],o=e.analysisGroupsMap[n].name;return{numOfCases:t.length,line:Object(y.g)(t,r),scatterWithOpacity:Object(y.j)(t,r,o),scatter:Object(y.i)(t,r,o)}})}},{key:"scatterData",get:function(){return Object(y.b)(this.unfilteredScatterData,this.scatterFilter,{xDenominator:this.downSamplingDenominators.x,yDenominator:this.downSamplingDenominators.y,threshold:1e3})}},{key:"analysisGroupsMap",get:function(){return f.keyBy(this.props.analysisGroups,function(e){return e.value})}},{key:"logRankTestPVal",get:function(){var e=this;return this.analysisGroupsWithData.length>1?w.a.apply(void 0,x(this.analysisGroupsWithData.map(function(t){return e.props.sortedGroupedSurvivals[t.value]}))):null}},{key:"victoryLegendData",get:function(){var e=[];if(this.props.legendLocation===A.CHART){var t=!0,n=!1,r=void 0;try{for(var o,i=this.analysisGroupsWithData[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;e.push({name:a.legendText||a.name||a.value,symbol:{fill:a.color,strokeOpacity:0,type:"square",size:6}})}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}return e}},{key:"pValueText",get:function(){return null!==this.props.pValue&&void 0!==this.props.pValue?r.createElement(d.VictoryLabel,{x:this.styleOpts.pValue.x,y:this.styleOpts.pValue.y,style:b.w,textAnchor:this.styleOpts.pValue.textAnchor,text:"Logrank Test P-Value: ".concat(Object(h.b)(this.props.pValue,3,.01))}):null}},{key:"legendDataForDownload",get:function(){var e=this.analysisGroupsWithData.map(function(e){return{name:e.name?e.name:e.value,symbol:{fill:e.color,strokeOpacity:0,type:"square",size:6}}});return this.props.naPatientsHiddenInSurvival&&e.push({name:"* Patients with NA for any of the selected attributes are excluded",symbol:{opacity:0}}),e}},{key:"analysisGroupsWithData",get:function(){var e=this,t=this.props.analysisGroups;return t=t.filter(function(t){return t.value in e.scatterData&&e.scatterData[t.value].numOfCases>0})}},{key:"scattersAndLines",get:function(){var e=this,t=this.analysisGroupsWithData,n=(t=f.sortBy(t,function(t){return e.highlightedCurve===t.value?1:0})).map(function(t){return r.createElement(d.VictoryLine,{key:t.value,interpolation:"stepAfter",data:e.scatterData[t.value].line,style:{data:{stroke:t.color,strokeWidth:e.highlightedCurve===t.value?4:1,fill:"#000000",fillOpacity:0}}})}),o=t.map(function(t){return r.createElement(d.VictoryScatter,{key:t.value,data:e.scatterData[t.value].scatterWithOpacity,symbol:"plus",style:{data:{fill:t.color,opacity:function(e){return e.opacity}}},size:3})}),i=t.map(function(t){return r.createElement(d.VictoryScatter,{key:t.value,data:e.scatterData[t.value].scatter,symbol:"circle",style:{data:{fill:t.color,fillOpacity:e.hoverCircleFillOpacity}},size:10,events:e.events})});return n.concat(o).concat(i)}},{key:"legendForDownload",get:function(){var e=f.cloneDeep(b.a);return e.legend.style.data={type:"square",size:5,strokeWidth:0,stroke:"black"},r.createElement(d.VictoryLegend,{x:0,y:this.styleOpts.height+1,style:Object.assign(Object.assign({},e.legend.style),{title:{fontWeight:"bold"}}),title:this.props.title,rowGutter:-10,data:this.legendDataForDownload,groupComponent:r.createElement("g",{className:"survivalChartDownloadLegend"})})}},{key:"xAxisTickCount",get:function(){return this.props.xAxisTickCount||this.getAxisTickCount(this.showLegend?this.styleOpts.legend.x:this.styleOpts.width)}},{key:"showLegend",get:function(){return this.victoryLegendData.length>0}},{key:"maximumDataMonthValue",get:function(){return f.chain(this.props.sortedGroupedSurvivals).map(function(e){return e[e.length-1].months}).max().ceil().value()}},{key:"chart",get:function(){var e=this;return r.createElement("div",{className:this.props.className,"data-test":"SurvivalChart"},this.props.showDownloadButtons&&r.createElement(b.e,{dontFade:!0,filename:this.props.fileName,buttons:["SVG","PNG","PDF","Data"],getSvg:this.getSvg,getData:this.getData,style:{position:"absolute",zIndex:10,right:10},type:"button"}),this.props.showSlider&&r.createElement("div",{className:"small",style:{display:"flex",alignItems:"center",marginLeft:60}},r.createElement("span",null,"X-Axis Max:"),r.createElement("div",{className:"RangeSliderContainer",style:{width:300,marginLeft:10,marginRight:10}},r.createElement(l.a,{min:0,max:this.maximumDataMonthValue,value:this.sliderValue,onChange:this.onSliderChange,tooltip:!1,step:1})),r.createElement(b.f,{className:c.a.XmaxNumberInput,value:this.sliderValue.toString(),setValue:this.onSliderTextChange,numericOnly:!0}),r.createElement("span",null,Object(b.S)("Month",this.sliderValue)," Survival")),r.createElement(d.VictoryChart,{containerComponent:r.createElement(d.VictoryZoomContainer,{responsive:!1,disable:!0,zoomDomain:this.props.showSlider?{x:[0,this.sliderValue]}:void 0,onZoomDomainChange:f.debounce(function(t){e.scatterFilter=t},1e3),containerRef:function(t){return e.svgContainer=t}}),height:this.styleOpts.height,width:this.styleOpts.width,padding:this.styleOpts.padding,theme:b.a,domainPadding:{x:[10,50],y:[20,20]}},r.createElement(d.VictoryAxis,{style:this.styleOpts.axis.x,crossAxis:!1,tickCount:this.xAxisTickCount,label:this.props.xAxisLabel}),r.createElement(d.VictoryAxis,{label:this.props.yAxisLabel,dependentAxis:!0,tickFormat:function(e){return"".concat(e,"%")},tickCount:this.props.yAxisTickCount,style:this.styleOpts.axis.y,domain:[0,100],crossAxis:!1}),this.scattersAndLines,this.showLegend&&r.createElement(d.VictoryLegend,{x:this.styleOpts.legend.x,y:this.styleOpts.legend.y,data:this.victoryLegendData,labelComponent:this.props.legendLabelComponent||r.createElement(S.a,{dy:"0.3em",maxWidth:256}),groupComponent:r.createElement("g",{className:"survivalChartLegendHideForDownload"})}),this.legendForDownload,this.pValueText))}},{key:"chartTooltip",get:function(){var e=this;return r.createElement("div",{style:{maxWidth:250}},this.analysisGroupsWithData.map(function(t){return r.createElement("span",{key:t.value,style:{display:"inline-block",marginRight:12,fontWeight:e.highlightedCurve===t.value?"bold":"initial",cursor:"pointer"},onClick:function(){e.highlightedCurve=e.highlightedCurve===t.value?"":t.value}},r.createElement("div",{style:{width:10,height:10,display:"inline-block",backgroundColor:t.color,marginRight:5}}),t.name?t.name:t.value)}),this.props.showNaPatientsHiddenToggle&&r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",checked:this.props.naPatientsHiddenInSurvival,onClick:this.props.toggleSurvivalHideNAPatients})," ","Exclude patients with NA for any of the selected attributes.")))}},{key:"tableRows",get:function(){var e=this;return this.props.analysisGroups.map(function(t){return r.createElement("tr",null,r.createElement("td",null,t.name?t.name:t.value),Object(y.k)(e.props.sortedGroupedSurvivals[t.value],e.estimates[t.value]).map(function(e){return r.createElement("td",null,r.createElement("b",null,e))}))})}}])&&C(n.prototype,o),i&&C(n,i),t}();M.defaultProps={showTable:!0,showSlider:!0,legendLocation:A.CHART,showNaPatientsHiddenToggle:!1,showDownloadButtons:!0,yAxisTickCount:11},R([i.observable.ref],M.prototype,"tooltipModel",void 0),R([i.observable],M.prototype,"scatterFilter",void 0),R([i.observable],M.prototype,"highlightedCurve",void 0),R([i.observable],M.prototype,"sliderValue",void 0),R([i.computed],M.prototype,"styleOpts",null),R([i.computed],M.prototype,"downSamplingDenominators",null),R([i.computed],M.prototype,"estimates",null),R([i.computed],M.prototype,"unfilteredScatterData",null),R([i.computed],M.prototype,"scatterData",null),R([i.computed],M.prototype,"analysisGroupsMap",null),R([i.computed],M.prototype,"logRankTestPVal",null),R([i.computed],M.prototype,"victoryLegendData",null),R([i.computed],M.prototype,"legendDataForDownload",null),R([g.default],M.prototype,"getSvg",null),R([g.default],M.prototype,"getData",null),R([g.default],M.prototype,"hoverCircleFillOpacity",null),R([i.computed],M.prototype,"analysisGroupsWithData",null),R([i.computed],M.prototype,"scattersAndLines",null),R([i.computed],M.prototype,"legendForDownload",null),R([i.computed],M.prototype,"xAxisTickCount",null),R([i.computed],M.prototype,"showLegend",null),R([i.computed],M.prototype,"maximumDataMonthValue",null),R([g.default,i.action],M.prototype,"onSliderChange",null),R([g.default,i.action],M.prototype,"onSliderTextChange",null),R([i.computed],M.prototype,"chart",null),R([i.computed],M.prototype,"chartTooltip",null),R([i.computed],M.prototype,"tableRows",null),M=R([o.observer],M),t.b=M},916:function(e,t,n){},919:function(e,t,n){"use strict";var r=n(0),o=n(1),i=n.n(o),a=n(9),l=n(83),s=n.n(l),u=n(2),c=n(190),p=n(56),f=n.n(p),d=n(111),y=n(840),h=n(912),m=n(6),b=n(913),g=n(14),v=n(15),O=n(49),E=n(54),S=n(910),w=n(911),P=n(3);function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var G=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":_(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},A=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=C(this,j(t).apply(this,arguments))).dragging=!1,e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,r["Component"]),n=t,(o=[{key:"svgRef",value:function(e){this.svgContainer=e&&e.children?e.children[0]:null}},{key:"handleSelection",value:function(e,t,n){this.props.onSelection(e[0].data.map(function(e){return e.hugoGeneSymbol}))}},{key:"handleSelectionCleared",value:function(){this.tooltipModel&&this.props.onGeneNameClick(this.tooltipModel.datum.hugoGeneSymbol,this.tooltipModel.datum.entrezGeneId),this.props.onSelectionCleared()}},{key:"onMouseOver",value:function(e,t,n){this.tooltipModel={datum:e,x:t,y:n}}},{key:"onMouseOut",value:function(){this.tooltipModel=null}},{key:"getTooltip",value:function(){return this.tooltipModel?r.createElement(v.Popover,{className:"cbioTooltip",positionLeft:this.tooltipModel.x+15,positionTop:this.tooltipModel.y-44},"Gene: ",this.tooltipModel.datum.hugoGeneSymbol,r.createElement("br",null),"Log Ratio:"," ",Object(O.a)(this.tooltipModel.datum.logRatio),r.createElement("br",null),"Alteration Frequency in ",this.props.xGroupName,":"," ",this.tooltipModel.datum.x.toFixed(),"%",r.createElement("br",null),"Alteration Frequency in ",this.props.yGroupName,":"," ",this.tooltipModel.datum.y.toFixed(),"%",r.createElement("br",null),"p-Value:"," ",Object(E.b)(this.tooltipModel.datum.pValue,3,.01),r.createElement("br",null),"q-Value:"," ",Object(E.b)(this.tooltipModel.datum.qValue,3,.01)):r.createElement("span",null)}},{key:"onClick",value:function(){this.dragging||this.handleSelectionCleared(),this.dragging=!1}},{key:"onSelectionComponentRender",value:function(){this.dragging=!0}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:"posRelative"},r.createElement("div",{className:"borderedChart inlineBlock",style:{position:"relative"},onClick:this.onClick},r.createElement(g.VictoryChart,{containerComponent:this.containerComponent,theme:P.a,domainPadding:{x:[0,20],y:[0,20]},height:350,width:350,padding:{top:40,bottom:60,left:60,right:40}},r.createElement(g.VictoryAxis,x({domain:[0,this.plotDomainMax],label:this.xLabel,style:{tickLabels:{padding:5},axisLabel:{padding:27},ticks:{size:3},grid:{strokeOpacity:1}},crossAxis:!1,orientation:"bottom",offsetY:45},this.tickProps)),r.createElement(g.VictoryAxis,x({domain:[0,this.plotDomainMax],dependentAxis:!0,label:this.yLabel,style:{tickLabels:{padding:5},axisLabel:{padding:32},ticks:{size:3},grid:{strokeOpacity:1}},crossAxis:!1,orientation:"left",offsetX:45},this.tickProps)),r.createElement(g.VictoryLine,{style:{data:{stroke:"#cccccc",strokeWidth:1,strokeDasharray:"10,5"}},data:[{x:0,y:0},{x:this.plotDomainMax,y:this.plotDomainMax}]}),r.createElement(g.VictoryScatter,{style:{data:{fillOpacity:.4}},data:this.splitData.insignificant,dataComponent:r.createElement(w.a,{onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,fill:function(t){return t.hugoGeneSymbol in e.props.selectedGenesSet?"#FE9929":"#D3D3D3"}}),symbol:"circle",size:3}),r.createElement(g.VictoryScatter,{style:{data:{fillOpacity:.6}},data:this.splitData.significant,dataComponent:r.createElement(w.a,{onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,fill:function(t){return t.hugoGeneSymbol in e.props.selectedGenesSet?"#FE9929":"#58ACFA"}})})),r.createElement(P.e,{getSvg:function(){return e.svgContainer},filename:"enrichments-frequency-scatter",dontFade:!0,type:"button",style:{position:"absolute",top:10,right:10,zIndex:0}})),r.createElement(a.Observer,null,this.getTooltip))}},{key:"maxLabelWidth",get:function(){return Object(P.K)(this.props.xGroupName,"Arial","13px")+Object(P.K)(this.props.yGroupName,"Arial","13px")>150?75:90}},{key:"xLabel",get:function(){return"Altered Frequency in ".concat(Object(P.db)(this.props.xGroupName,this.maxLabelWidth,"Arial","13px")," (%)")}},{key:"yLabel",get:function(){return"Altered Frequency in ".concat(Object(P.db)(this.props.yGroupName,this.maxLabelWidth,"Arial","13px")," (%)")}},{key:"splitData",get:function(){var e=[],t=[],n=!0,r=!1,o=void 0;try{for(var i,a=this.props.data[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var l=i.value;l.qValue<.05?e.push(l):t.push(l)}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return{significant:e,insignificant:t}}},{key:"plotDomainMax",get:function(){var e=0,t=0,n=!0,r=!1,o=void 0;try{for(var i,a=this.props.data[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var l=i.value;e=Math.max(e,l.x),t=Math.max(t,l.y)}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return Math.max(e,t)}},{key:"containerComponent",get:function(){var e=this;return r.createElement(g.VictorySelectionContainer,{containerRef:this.svgRef,onSelection:function(t,n,r){return e.handleSelection(t,n,r)},responsive:!1,onSelectionCleared:this.handleSelectionCleared,activateSelectedData:!1,selectionComponent:r.createElement(S.a,{onRender:this.onSelectionComponentRender})})}},{key:"tickProps",get:function(){return this.plotDomainMax>40?{tickValues:[0,25,50,75]}:this.plotDomainMax>20?{tickValues:[0,10,20,30,40]}:this.plotDomainMax>10?{tickValues:[0,5,10,15,20]}:{tickCount:4}}}])&&k(n.prototype,o),i&&k(n,i),t}();G([u.observable],A.prototype,"tooltipModel",void 0),G([u.observable],A.prototype,"svgContainer",void 0),G([m.default,u.action],A.prototype,"svgRef",null),G([u.computed],A.prototype,"maxLabelWidth",null),G([u.computed],A.prototype,"xLabel",null),G([u.computed],A.prototype,"yLabel",null),G([u.computed],A.prototype,"splitData",null),G([u.computed],A.prototype,"plotDomainMax",null),G([m.default,u.action],A.prototype,"onMouseOver",null),G([m.default,u.action],A.prototype,"onMouseOut",null),G([m.default],A.prototype,"getTooltip",null),G([m.default],A.prototype,"onClick",null),G([m.default],A.prototype,"onSelectionComponentRender",null),G([u.computed],A.prototype,"tickProps",null);var R=A=G([a.observer],A),D=n(1065),M=n.n(D),L=function(e){e.height;return r.createElement("div",{className:M.a.wrapper,style:{width:e.width}},r.createElement("div",{className:M.a.groupRow},r.createElement("div",{style:{width:"".concat(e.group1Width,"%"),background:e.group1Color}}),r.createElement("div",{style:{width:"".concat(e.group2Width,"%"),background:e.group2Color}})),r.createElement("div",{className:M.a.alterationRow},r.createElement("div",{style:{width:"".concat(e.group1Unprofiled,"%"),background:"white",position:"relative"}},r.createElement("div",{className:M.a.strike})),r.createElement("div",{style:{width:"".concat(e.group1Unaltered,"%"),background:"transparent"}}),r.createElement("div",{style:{width:"".concat(e.group1Altered,"%"),background:"#3786C2"}}),r.createElement("div",{style:{width:"".concat(e.group2Altered,"%"),background:"#3786C2"}}),r.createElement("div",{style:{width:"".concat(e.group2Unprofiled,"%"),background:"white",position:"absolute",right:0}},r.createElement("div",{className:M.a.strike}))))},I=n(300),N=n(112),V=n(803),B=n(1066),U=n.n(B);function W(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e,t,n){return t&&F(e.prototype,t),n&&F(e,n),e}function q(e,t){return!t||"object"!==X(t)&&"function"!=typeof t?H(e):t}function H(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var J=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":X(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Z=["AMP","HOMDEL"],$=function(e){function t(){var e;return W(this,t),(e=q(this,K(t).apply(this,arguments))).isGeneSelectionPopupVisible=!1,e}return Y(t,r["Component"]),z(t,[{key:"getTooltip",value:function(e){var t=e.majorCategory;t=t.replace(/\*$/,"");var n=this.geneDataSet[t],o=i.a.map(this.props.groupOrder,function(t){var o=n.groupsSet[t],i={};return e.minorCategory===o.name&&(i={fontWeight:"bold"}),r.createElement("tr",{style:i},r.createElement("td",null,o.name),r.createElement("td",null,o.alteredPercentage.toFixed(2),"% (",o.alteredCount,"/",o.profiledCount,")"))});return r.createElement("div",null,r.createElement("strong",null,t," ",this.yAxislabel),r.createElement("br",null),r.createElement("table",{className:"table table-bordered"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{scope:"col"},"Group"),r.createElement("th",{scope:"col"},"Percentage Altered"))),r.createElement("tbody",null,o)),r.createElement("strong",null,"p-Value"),":"," ",n.pValue?Object(E.b)(n.pValue,3,.01):"-",r.createElement("br",null),r.createElement("strong",null,"q-Value"),":"," ",n.qValue?Object(E.b)(n.qValue,3,.01):"-")}},{key:"render",value:function(){var e=this;return r.createElement("div",{"data-test":"GeneBarPlotDiv",className:"borderedChart",style:{position:"relative",display:"inline-block"}},this.toolbar,r.createElement("div",{style:{overflow:"auto hidden",position:"relative"}},r.createElement(I.a,{barWidth:10,domainPadding:10,chartBase:300,legendLocationWidthThreshold:800,ticksCount:6,horizontalBars:!1,percentage:!1,stacked:!1,plotData:this.barPlotData,axisStyle:{tickLabels:{fontSize:10}},horzCategoryOrder:this.horzCategoryOrder,vertCategoryOrder:this.props.groupOrder,countAxisLabel:"".concat(this.yAxislabel," (%)"),tooltip:this.getTooltip,categoryToColor:this.props.categoryToColor,svgRef:function(t){return e.svgContainer=t}})))}},{key:"geneListOptions",get:function(){return Object(d.q)(this.props.data,this.props.showCNAInTable)}},{key:"defaultOption",get:function(){return this.geneListOptions.length>1?this.geneListOptions[1]:this.geneListOptions[0]}},{key:"geneDataSet",get:function(){var e=this;return i.a.keyBy(this.props.data,function(t){return e.props.showCNAInTable?t.hugoGeneSymbol+": ".concat(d.d[t.value]):t.hugoGeneSymbol})}},{key:"barPlotData",get:function(){return Object(d.l)(this.geneDataSet,this.barPlotOrderedGenes)}},{key:"barPlotOrderedGenes",get:function(){return this._label===d.f.SYNC_WITH_TABLE?this.tableSelectedGenes:this.selectedGenes?this.props.showCNAInTable?i.a.flatMap(this.selectedGenes,function(e){if(!1===e.alterations)return[e.gene+": AMP",e.gene+": HOMDEL"];var t=[];return i.a.each(e.alterations,function(n){"cna"===n.alteration_type&&"="===n.constr_rel&&Z.includes(n.constr_val)&&t.push(e.gene+": "+n.constr_val)}),t}):this.selectedGenes.map(function(e){return e.gene}):this.defaultOption.genes.slice(0,10)}},{key:"horzCategoryOrder",get:function(){return i.a.flatMap(this.barPlotOrderedGenes,function(e){return[e+"*",e]})}},{key:"selectedOption",get:function(){return this._label&&void 0!==this._geneQuery?{label:this._label,value:this._geneQuery}:{label:this.defaultOption.label,value:this.defaultOption.genes.slice(0,10).join("\n")}}},{key:"toolbar",get:function(){var e=this;return r.createElement(r.Fragment,null,r.createElement("div",{style:{zIndex:10,position:"absolute",top:"10px",left:"15px"}},r.createElement("strong",null,this.selectedOption.label)),r.createElement("div",{style:{zIndex:10,position:"absolute",top:"10px",right:"10px"}},r.createElement("div",{className:U.a.ChartControls},r.createElement(P.d,{trigger:["click"],destroyTooltipOnHide:!1,visible:this.isGeneSelectionPopupVisible,onVisibleChange:function(t){e.isGeneSelectionPopupVisible=t},overlay:r.createElement(te,{options:this.geneListOptions,selectedOption:this.selectedOption,onSelectedGenesChange:function(t,n,r){e._geneQuery=t,e.selectedGenes=n,e._label=r,e.isGeneSelectionPopupVisible=!1},defaultNumberOfGenes:10,containerType:this.props.containerType}),placement:"bottomLeft"},r.createElement("div",null,r.createElement("button",{"data-test":"selectGenes",className:"btn btn-default btn-xs"},"Select genes"))),r.createElement(P.e,{getSvg:function(){return e.svgContainer},filename:"GroupComparisonGeneFrequencyPlot",dontFade:!0,type:"button"}))))}},{key:"tableSelectedGenes",get:function(){return null!==this.props.dataStore.visibleData?this.props.dataStore.visibleData.map(function(e){return e.hugoGeneSymbol}).slice(0,100):[]}},{key:"yAxislabel",get:function(){return this.props.containerType===d.a.MUTATION?"Mutation frequency":"Copy-number alteration frequency"}}]),t}();J([u.observable],$.prototype,"tooltipModel",void 0),J([u.observable],$.prototype,"_geneQuery",void 0),J([u.observable],$.prototype,"selectedGenes",void 0),J([u.observable],$.prototype,"_label",void 0),J([u.observable],$.prototype,"isGeneSelectionPopupVisible",void 0),J([u.observable],$.prototype,"svgContainer",void 0),J([u.computed],$.prototype,"geneListOptions",null),J([u.computed],$.prototype,"defaultOption",null),J([u.computed],$.prototype,"geneDataSet",null),J([u.computed],$.prototype,"barPlotData",null),J([u.computed],$.prototype,"barPlotOrderedGenes",null),J([u.computed],$.prototype,"horzCategoryOrder",null),J([m.default],$.prototype,"getTooltip",null),J([u.computed],$.prototype,"selectedOption",null),J([u.computed],$.prototype,"toolbar",null),J([u.computed],$.prototype,"tableSelectedGenes",null),J([u.computed],$.prototype,"yAxislabel",null);var ee=$=J([a.observer],$),te=function(e){function t(e){var n;return W(this,t),(n=q(this,K(t).call(this,e))).selectedGenesHasError=!1,n.numberOfGenes=n.props.defaultNumberOfGenes,n.genesToPlot=[],window.genesSelection=H(n),n}return Y(t,r["Component"]),z(t,[{key:"onChangeGeneInput",value:function(e,t,n){var r=i.a.keyBy(t.found,function(e){return e.hugoGeneSymbol.toUpperCase()}),o=i.a.map(e.query,function(e){return e.gene.toUpperCase()});i.a.isEmpty(r)&&i.a.isEmpty(t.suggestions)||(this.selectedGenesHasError=!i.a.every(o,function(e){return e in r})),this.selectedGenesHasError||(this.genesToPlot=e.query),this.geneQuery!==n&&(this._selectedGeneListOption={label:d.f.USER_DEFINED_OPTION,genes:[],value:""}),this._geneQuery=n}},{key:"onGeneListOptionChange",value:function(e){if(this._selectedGeneListOption=e,""!==e.value){var t=this.geneOptionSet[e.label].genes;this._geneQuery=t.slice(0,this.numberOfGenes).join("\n")}else this._geneQuery=""}},{key:"handleTotalInputChange",value:function(e){var t=e.target.value.replace(/[^0-9]/g,"");t<=this.props.maxNumberOfGenes&&(this.numberOfGenes=t)}},{key:"handleTotalInputKeyPress",value:function(e){if(13===e.charCode){if(isNaN(this.numberOfGenes))return void(this.numberOfGenes=0);this.updateGeneQuery()}}},{key:"onBlur",value:function(){isNaN(this.numberOfGenes)?this.numberOfGenes=0:this.updateGeneQuery()}},{key:"updateGeneQuery",value:function(){if(this.numberOfGenes=Number(this.numberOfGenes),this.selectedGeneListOption){var e=this.selectedGeneListOption.label,t=this.geneOptionSet[e].genes;t.length>0&&(this._geneQuery=t.slice(0,this.numberOfGenes).join("\n"))}}},{key:"render",value:function(){var e=this;return r.createElement("div",{style:{width:300}},this.props.options.length>0&&r.createElement("div",{"data-test":"genesSelector"},r.createElement(N.default,{value:this.selectedGeneListOption,options:this.geneListOptions,onChange:this.onGeneListOptionChange,isClearable:!1,isSearchable:!1})),!this.inSyncMode&&!this.isCustomGeneSelection&&r.createElement("div",null,r.createElement("br",null),r.createElement("div",{style:{display:"table-row"}},r.createElement("label",{style:{display:"table-cell",whiteSpace:"nowrap"}},"Number of Genes (max."," ",this.props.maxNumberOfGenes,"): Â "),r.createElement(v.FormControl,{"data-test":"numberOfGenes",type:"text",value:this.numberOfGenes,onChange:this.handleTotalInputChange,onKeyPress:this.handleTotalInputKeyPress,onBlur:this.onBlur}))),r.createElement("div",null,r.createElement("br",null),!this.inSyncMode&&r.createElement("div",null,r.createElement(V.b,{inputGeneQuery:this.geneQuery,validateInputGeneQuery:!1,callback:this.onChangeGeneInput,location:V.a.ONCOPRINT_HEATMAP}),this.hasUnsupportedOQL&&r.createElement("strong",{style:{display:"block"}},r.createElement("span",{style:{color:"#a71111"}},"OQL ".concat(this.props.containerType===d.a.MUTATION?"":"except AMP and HOMDEL"," is not allowed"))),r.createElement("br",null)),r.createElement("button",{key:"addGenestoBarPlot","data-test":"addGenestoBarPlot",className:"btn btn-sm btn-default",onClick:function(){e.props.onSelectedGenesChange(e._geneQuery,e.genesToPlot,e.selectedGeneListOption.label)},disabled:this.addGenesButtonDisabled},"Submit")))}},{key:"geneListOptions",get:function(){return i.a.map(this.props.options,function(e){return{label:e.label,value:e.genes.join("\n")}})}},{key:"geneOptionSet",get:function(){return i.a.keyBy(this.props.options,function(e){return e.label})}},{key:"selectedGeneListOption",get:function(){if(void 0===this._selectedGeneListOption&&this.props.selectedOption){var e=this.props.selectedOption;return this.geneListOptions.find(function(t){return t.value.startsWith(e.value)})}return this._selectedGeneListOption}},{key:"isCustomGeneSelection",get:function(){return void 0===this.selectedGeneListOption||this.selectedGeneListOption.label===d.f.USER_DEFINED_OPTION}},{key:"geneQuery",get:function(){return void 0===this._geneQuery&&this.props.selectedOption?this.props.selectedOption.value:this._geneQuery||""}},{key:"hasUnsupportedOQL",get:function(){var e=this;return void 0!==i.a.find(this.genesToPlot,function(t){return!!(t.alterations&&t.alterations.length>0)&&(e.props.containerType!==d.a.COPY_NUMBER||void 0!==i.a.find(t.alterations,function(e){return"cna"!==e.alteration_type||"="!==e.constr_rel||!Z.includes(e.constr_val)}))})}},{key:"addGenesButtonDisabled",get:function(){return this.inSyncMode?void 0!==this.props.selectedOption&&this.props.selectedOption.label===d.f.SYNC_WITH_TABLE:this.hasUnsupportedOQL||this.props.selectedOption&&this.props.selectedOption.value===this._geneQuery||this.selectedGenesHasError||i.a.isEmpty(this._geneQuery)}},{key:"inSyncMode",get:function(){return this._selectedGeneListOption&&this._selectedGeneListOption.label===d.f.SYNC_WITH_TABLE}}]),t}();te.defaultProps={maxNumberOfGenes:100},J([u.observable],te.prototype,"_geneQuery",void 0),J([u.observable],te.prototype,"selectedGenesHasError",void 0),J([u.observable],te.prototype,"numberOfGenes",void 0),J([u.observable],te.prototype,"_selectedGeneListOption",void 0),J([u.observable.ref],te.prototype,"genesToPlot",void 0),J([u.computed],te.prototype,"geneListOptions",null),J([u.computed],te.prototype,"geneOptionSet",null),J([u.computed],te.prototype,"selectedGeneListOption",null),J([u.computed],te.prototype,"isCustomGeneSelection",null),J([u.computed],te.prototype,"geneQuery",null),J([m.default,u.action],te.prototype,"onChangeGeneInput",null),J([u.computed],te.prototype,"hasUnsupportedOQL",null),J([u.computed],te.prototype,"addGenesButtonDisabled",null),J([m.default,u.action],te.prototype,"onGeneListOptionChange",null),J([u.computed],te.prototype,"inSyncMode",null),J([m.default,u.action],te.prototype,"handleTotalInputChange",null),J([m.default,u.action],te.prototype,"handleTotalInputKeyPress",null),J([m.default,u.action],te.prototype,"onBlur",null),J([m.default,u.action],te.prototype,"updateGeneQuery",null),te=J([a.observer],te);var ne=n(192);function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oe(e,t){return!t||"object"!==le(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ae(e,t){return(ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var se=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":le(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ue=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=oe(this,ie(t).apply(this,arguments))).significanceFilter=!1,e.checkedGenes=[],e._enrichedGroups=e.props.groups.map(function(e){return e.name}),e.dataStore=new b.a(function(){return e.filteredData},function(){return e.highlightedRow},function(t){e.highlightedRow=t}),e}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ae(e,t)}(t,r["Component"]),n=t,(i=[{key:"filterByGene",value:function(e){return!this.selectedGenes||this.selectedGenes.includes(e)}},{key:"toggleSignificanceFilter",value:function(){this.significanceFilter=!this.significanceFilter}},{key:"onCheckGene",value:function(e){var t=this.checkedGenes.indexOf(e);-1!==t?this.checkedGenes.splice(t,1):this.checkedGenes.push(e)}},{key:"onGeneNameClick",value:function(e){}},{key:"onSelection",value:function(e){this.selectedGenes=e}},{key:"onSelectionCleared",value:function(){this.selectedGenes=null}},{key:"onChange",value:function(e){this._enrichedGroups=o.map(e,function(e){return e.value})}},{key:"render",value:function(){var e=this;return 0===this.props.data.length?r.createElement("div",{className:"alert alert-info"},"No data/result available"):r.createElement("div",{className:f.a.Container},r.createElement("div",{className:f.a.ChartsPanel,style:{maxWidth:ne.a.size.width-60}},this.isTwoGroupAnalysis&&r.createElement(y.a,{data:Object(d.j)(this.data,this.props.store?this.props.store.hugoGeneSymbols:[]),xAxisLeftLabel:this.group2.nameOfEnrichmentDirection||this.group2.name,xAxisRightLabel:this.group1.nameOfEnrichmentDirection||this.group1.name,xAxisDomain:15,xAxisTickValues:[-10,0,10],selectedSet:this.selectedGenesSet,onGeneNameClick:this.onGeneNameClick,onSelection:this.onSelection,onSelectionCleared:this.onSelectionCleared}),this.isTwoGroupAnalysis&&r.createElement(R,{data:Object(d.h)(this.data,this.props.store?this.props.store.hugoGeneSymbols:[],this.group1.name,this.group2.name),xGroupName:this.group1.name,yGroupName:this.group2.name,onGeneNameClick:this.onGeneNameClick,selectedGenesSet:this.selectedGenesSet,onSelection:this.onSelection,onSelectionCleared:this.onSelectionCleared}),r.createElement("div",{style:{maxWidth:this.genePlotMaxWidth}},r.createElement(ee,{data:this.data,isTwoGroupAnalysis:this.isTwoGroupAnalysis,groupOrder:this.props.groups.map(function(e){return e.name}),showCNAInTable:this.props.showCNAInTable,containerType:this.props.containerType,categoryToColor:this.categoryToColor,dataStore:this.dataStore}))),r.createElement("div",null,r.createElement("div",null,r.createElement("h3",null,this.props.headerName),this.props.store&&r.createElement(h.a,{checkedGenes:this.checkedGenes})),r.createElement("div",{className:f.a.Checkboxes},r.createElement("div",{style:{width:250,marginRight:7}},r.createElement(N.default,{name:"select enrichments level: sample or patient",onChange:function(t){t&&e.props.onSetPatientLevelEnrichments(t.value)},options:[{label:"Patient-level enrichments",value:!0},{label:"Sample-level enrichments",value:!1}],clearable:!1,searchable:!1,value:{label:this.props.patientLevelEnrichments?"Patient-level enrichments":"Sample-level enrichments",value:this.props.patientLevelEnrichments},styles:{control:function(e){return Object.assign(Object.assign({},e),{height:36,minHeight:36,border:"1px solid rgb(204,204,204)"})},menu:function(e){return Object.assign(Object.assign({},e),{maxHeight:400})},menuList:function(e){return Object.assign(Object.assign({},e),{maxHeight:400})},placeholder:function(e){return Object.assign(Object.assign({},e),{color:"#000000"})},dropdownIndicator:function(e){return Object.assign(Object.assign({},e),{color:"#000000"})},option:function(e,t){return Object.assign(Object.assign({},e),{cursor:"pointer"})}},theme:function(e){return Object.assign(Object.assign({},e),{colors:Object.assign(Object.assign({},e.colors),{neutral80:"black"})})}})),r.createElement("div",{style:{width:250,marginRight:7}},r.createElement(P.b,{name:"groupsSelector",placeholder:"Enriched in ...",onChange:this.onChange,options:this.options,value:this.selectedValues,height:36})),r.createElement("label",{className:"checkbox-inline"},r.createElement("input",{type:"checkbox",checked:this.significanceFilter,onClick:this.toggleSignificanceFilter,"data-test":"SwapAxes"}),"Significant only")),r.createElement(c.b,{key:this.props.patientLevelEnrichments.toString(),data:this.filteredData,onCheckGene:this.props.store?this.onCheckGene:void 0,checkedGenes:this.props.store?this.checkedGenes:void 0,dataStore:this.dataStore,visibleOrderedColumnNames:this.visibleOrderedColumnNames,customColumns:o.keyBy(this.customColumns,function(e){return e.name})})))}},{key:"isTwoGroupAnalysis",get:function(){return 2==this.props.groups.length}},{key:"group1",get:function(){return this.props.groups[0]}},{key:"group2",get:function(){return this.props.groups[1]}},{key:"data",get:function(){return Object(d.i)(this.props.data,this.props.store?this.props.store.hugoGeneSymbols:[],this.props.groups)}},{key:"filteredData",get:function(){return Object(d.p)(this.data,this._enrichedGroups,this.significanceFilter,this.filterByGene)}},{key:"customColumns",get:function(){var e=this,t=Object(d.g)(this.props.groups,this.props.alteredVsUnalteredMode);return this.isTwoGroupAnalysis&&t.push({name:"Alteration Overlap",headerRender:function(){return r.createElement("span",null,"Co-occurrence Pattern")},render:function(t){if(void 0===t.pValue)return r.createElement("span",null,"-");var n=o.map(t.groupsSet),i=e.props.groups[0],a=e.props.groups[1],l=n.find(function(t){return t.name===e.props.groups[0].name}),u=n.find(function(t){return t.name===e.props.groups[1].name});if(!l||!u)throw"No matching groups in Alteration Overlap Cell";var c=i.count+a.count,p=i.count/c*100,f=100-p,d=(i.count-l.profiledCount)/c*100,y=(l.profiledCount-l.alteredCount)/c*100,h=(a.count-u.profiledCount)/c*100,m=l.alteredCount/c*100,b=u.alteredCount/c*100,g=e.props.showCNAInTable?"copy number alterations":"mutations";return r.createElement(P.d,{destroyTooltipOnHide:!0,trigger:["hover"],overlay:function(){return r.createElement("div",null,r.createElement("h3",null,t.hugoGeneSymbol," ",g," ","in:"),r.createElement("table",{className:"table table-striped"},r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",null,r.createElement("strong",null,l.name,": ")),r.createElement("td",null,l.alteredCount," of"," ",l.profiledCount," of profiled"," ",e.props.patientLevelEnrichments?"patients":"samples"," ","(",s()(l.alteredPercentage).format("0.0"),"%)")),r.createElement("tr",null,r.createElement("td",null,r.createElement("strong",null,u.name,": ")),r.createElement("td",null,u.alteredCount," of"," ",u.profiledCount," of profiled"," ",e.props.patientLevelEnrichments?"patients":"samples"," ","(",s()(u.alteredPercentage).format("0.0"),"%)")))))}},r.createElement("div",{className:"inlineBlock",style:{padding:"3px 0"}},r.createElement(L,{group1Width:p,group2Width:f,group1Unaltered:y,group1Altered:m,group2Altered:b,group1Unprofiled:d,group2Unprofiled:h,group1Color:e.props.groups[0].color,group2Color:e.props.groups[1].color,width:150})))},tooltip:r.createElement("table",null,r.createElement("tr",null,r.createElement("td",null,"Upper row"),r.createElement("td",null,":"," ",this.props.patientLevelEnrichments?"Patients":"Samples"," ","colored according to group.")),r.createElement("tr",null,r.createElement("td",null,"Lower row"),r.createElement("td",null,":"," ",this.props.patientLevelEnrichments?"Patients":"Samples"," ","with"," ",this.props.showCNAInTable?"the listed alteration":"a mutation"," ","in the listed gene are highlighted.")))}),t}},{key:"visibleOrderedColumnNames",get:function(){var e=[];return e.push(c.a.GENE,c.a.CYTOBAND),this.props.showCNAInTable&&e.push(c.a.ALTERATION),this.props.groups.forEach(function(t){e.push(t.name)}),this.isTwoGroupAnalysis&&(e.push("Alteration Overlap"),e.push(c.a.LOG_RATIO)),e.push(c.a.P_VALUE,c.a.Q_VALUE),this.isTwoGroupAnalysis?e.push(this.props.alteredVsUnalteredMode?c.a.TENDENCY:c.a.ENRICHED):e.push(c.a.MOST_ENRICHED),e}},{key:"selectedGenesSet",get:function(){return o.keyBy(this.selectedGenes||[])}},{key:"selectedValues",get:function(){return this._enrichedGroups.map(function(e){return{value:e}})}},{key:"options",get:function(){return o.map(this.props.groups,function(e){return{label:e.nameOfEnrichmentDirection?e.nameOfEnrichmentDirection:e.name,value:e.name}})}},{key:"genePlotMaxWidth",get:function(){return ne.a.size.width-(this.isTwoGroupAnalysis?820:40)}},{key:"categoryToColor",get:function(){return o.reduce(this.props.groups,function(e,t){return t.color&&(e[t.name]=t.color),e},{})}}])&&re(n.prototype,i),a&&re(n,a),t}();ue.defaultProps={showCNAInTable:!1,alteredVsUnalteredMode:!0},se([u.observable],ue.prototype,"significanceFilter",void 0),se([u.observable.shallow],ue.prototype,"checkedGenes",void 0),se([u.observable.shallow],ue.prototype,"selectedGenes",void 0),se([u.observable.ref],ue.prototype,"highlightedRow",void 0),se([u.observable.ref],ue.prototype,"_enrichedGroups",void 0),se([u.computed],ue.prototype,"isTwoGroupAnalysis",null),se([u.computed],ue.prototype,"group1",null),se([u.computed],ue.prototype,"group2",null),se([u.computed],ue.prototype,"data",null),se([u.computed],ue.prototype,"filteredData",null),se([m.default],ue.prototype,"filterByGene",null),se([m.default],ue.prototype,"toggleSignificanceFilter",null),se([m.default],ue.prototype,"onCheckGene",null),se([m.default],ue.prototype,"onGeneNameClick",null),se([m.default,u.action],ue.prototype,"onSelection",null),se([m.default,u.action],ue.prototype,"onSelectionCleared",null),se([u.computed],ue.prototype,"customColumns",null),se([u.computed],ue.prototype,"visibleOrderedColumnNames",null),se([u.computed],ue.prototype,"selectedGenesSet",null),se([m.default,u.action],ue.prototype,"onChange",null),se([u.computed],ue.prototype,"selectedValues",null),se([u.computed],ue.prototype,"options",null),se([u.computed],ue.prototype,"genePlotMaxWidth",null),se([u.computed],ue.prototype,"categoryToColor",null),ue=se([a.observer],ue);t.a=ue},937:function(e,t,n){"use strict";n.d(t,"c",function(){return s}),n.d(t,"b",function(){return u}),n.d(t,"a",function(){return c}),n.d(t,"d",function(){return p});var r=n(49),o=n(0),i=n(1),a=n.n(i),l=n(18);function s(e,t){return e.length!==t.length?o.createElement("span",null,o.createElement("strong",null,t.length)," patients /"," ",o.createElement("strong",null,e.length)," samples"):o.createElement("span",null,o.createElement("strong",null,e.length)," patients/samples")}function u(e){switch(e.length){case 0:return"";case 1:return e[0];case 2:return e.join(" & ");default:return"".concat(e[0],", ").concat(e[1]," & ").concat(3===e.length?e[2]:"".concat(e.length-2," other genes"))}}function c(e,t,n,i,a){var l="Queried gene".concat(1!==a?"s are":" is"," altered in"),s="".concat(n," (").concat(Object(r.c)(n/e,0),") of queried");return e!==t?o.createElement("strong",{style:{display:"flex"}},o.createElement("span",{style:{marginRight:13}},l),o.createElement("table",null,o.createElement("tr",null,o.createElement("td",null,"â¢Â ","".concat(i," (").concat(Object(r.c)(i/t,0),") of queried patients"))),o.createElement("tr",null,o.createElement("td",null,"â¢Â ","".concat(s," samples"))))):o.createElement("strong",null,o.createElement("span",null,"".concat(l," ").concat(s," patients/samples")))}function p(e,t,n,r,o){var i=a.a.some(o,function(e){return"all_cases_in_study"===e.category}),s=[],u=r||n||!i;t.length>0&&u&&t.forEach(function(e){return s.push({sampleId:e.sampleId,studyId:e.studyId})});var c=window.open(Object(l.b)("study",{id:e.map(function(e){return e.studyId}).join(",")}),"_blank");s.length>0&&(c.studyPageFilter="filterJson=".concat(JSON.stringify({sampleIdentifiers:s})))}}}]);