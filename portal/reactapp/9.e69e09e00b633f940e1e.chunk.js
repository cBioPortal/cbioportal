(window.webpackJsonp=window.webpackJsonp||[]).push([[9,3,27],Array(563).concat([function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(4),i=n.n(o),a=n(11),s=n.n(a),l=n(50),u=n.n(l),c=n(7),p=n(2),d=n(570),f=n(1013),h=n(605),m=n(8),y=n(102),g=n(3),v=n(1008),b=n(670),S=n(573);function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var x=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":P(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};function T(e){return e.description?r.createElement("span",null,e.title,r.createElement(g.c,{placement:"right",overlay:r.createElement("span",null,e.description)},r.createElement("i",{className:"fa fa-info-circle",style:{marginLeft:"0.2rem"}}))):e.title}var k=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),E(this,O(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return void 0===this.props.germlineContent?r.createElement(r.Fragment,null,this.somaticInfo,this.germlinePlaceholder):r.createElement(y.r,_({badgeSelectorOptions:this.mutationStatusFilterOptions},this.props))}},{key:"mutationStatusFilterOptions",get:function(){var e=[{value:"Somatic",label:T(this.props.somaticContent),badgeStyleOverride:y.p,badgeStyleSelectedOverride:y.p}];return this.props.germlineContent&&e.push({value:"Germline",label:T(this.props.germlineContent),badgeStyleOverride:y.p,badgeStyleSelectedOverride:y.p}),e}},{key:"somaticInfo",get:function(){return this.props.rates?r.createElement(y.b,{label:T(this.props.somaticContent),badgeContent:"".concat(Object(y.M)(this.props.rates.Somatic),"%"),badgeStyleOverride:this.mutationStatusFilterOptions[0].badgeStyleOverride}):null}},{key:"germlinePlaceholder",get:function(){return r.createElement("div",{"data-test":"germlineMutationRate",className:"invisible"},"%")}}])&&w(n.prototype,o),i&&w(n,i),t}();x([p.computed],k.prototype,"mutationStatusFilterOptions",null);var A=k=x([c.observer],k);function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var R=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":N(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},L=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),D(this,M(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement("span",{"data-test":"mutation-rate-summary"},r.createElement(A,{filter:this.props.mutationStatusFilter,onSelect:this.props.onMutationStatusSelect,rates:{Germline:this.germlineMutationRate,Somatic:this.somaticMutationRate},somaticContent:{title:"Somatic Mutation Frequency",description:"Percentage of samples with a somatic mutation in ".concat(this.props.hugoGeneSymbol)},germlineContent:this.germlineMutationRate>0?{title:"Germline Mutation Frequency",description:"Percentage of samples with a germline mutation in ".concat(this.props.hugoGeneSymbol)}:void 0}))}},{key:"germlineMutationRate",get:function(){var e;return"pending"!==this.props.germlineConsentedSamples.status&&(e=this.props.germlineConsentedSamples&&this.props.germlineConsentedSamples.result&&this.props.germlineConsentedSamples.result.length>0?this.props.germlineConsentedSamples.result:this.props.samples),e?Object(S.g)(this.props.hugoGeneSymbol,this.props.mutations,this.props.molecularProfileIdToMolecularProfile.result,e):0}},{key:"somaticMutationRate",get:function(){return this.props.samples.length>0?Object(S.p)(this.props.hugoGeneSymbol,this.props.mutations,this.props.molecularProfileIdToMolecularProfile.result,this.props.samples):0}}])&&I(n.prototype,o),i&&I(n,i),t}();R([p.computed],L.prototype,"germlineMutationRate",null),R([p.computed],L.prototype,"somaticMutationRate",null);var G=L=R([c.observer],L),F=n(851),B=n(751),V=n(686),z=n(752);function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e,t){return!t||"object"!==$(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function H(e,t,n){return(H="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=W(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Q=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":$(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Y=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),U(this,W(t).call(this,e))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(t,F["b"]),n=t,(o=[{key:"componentWillUpdate",value:function(e){this._columns[F.a.STUDY].visible=!!(e.studyIdToStudy&&Object.keys(e.studyIdToStudy).length>1)}},{key:"generateColumns",value:function(){var e=this;H(W(t.prototype),"generateColumns",this).call(this),this._columns[F.a.CANCER_TYPE].visible=B.a.isVisible(this.props.dataStore?this.props.dataStore.allData:this.props.data,this.props.uniqueSampleKeyToTumorType),this._columns[F.a.TUMOR_ALLELE_FREQ].visible=V.a.isVisible(this.props.dataStore?this.props.dataStore.allData:this.props.data),this._columns[F.a.STUDY].order=0,this._columns[F.a.SAMPLE_ID].order=10,this._columns[F.a.CANCER_TYPE].order=15,this._columns[F.a.PROTEIN_CHANGE].order=20,this._columns[F.a.ANNOTATION].order=30,this._columns[F.a.FUNCTIONAL_IMPACT].order=38,this._columns[F.a.MUTATION_TYPE].order=40,this._columns[F.a.VARIANT_TYPE].order=45,this._columns[F.a.COPY_NUM].order=50,this._columns[F.a.COSMIC].order=60,this._columns[F.a.MUTATION_STATUS].order=70,this._columns[F.a.VALIDATION_STATUS].order=80,this._columns[F.a.CENTER].order=100,this._columns[F.a.CHROMOSOME].order=110,this._columns[F.a.START_POS].order=120,this._columns[F.a.END_POS].order=130,this._columns[F.a.REF_ALLELE].order=140,this._columns[F.a.VAR_ALLELE].order=150,this._columns[F.a.HGVSG].order=151,this._columns[F.a.HGVSC].order=152,this._columns[F.a.TUMOR_ALLELE_FREQ].order=160,this._columns[F.a.NORMAL_ALLELE_FREQ].order=170,this._columns[F.a.VAR_READS].order=180,this._columns[F.a.REF_READS].order=190,this._columns[F.a.VAR_READS_N].order=200,this._columns[F.a.REF_READS_N].order=210,this._columns[F.a.NUM_MUTATIONS].order=220,this._columns[F.a.EXON].order=230,this._columns[F.a.GNOMAD].order=260,this._columns[F.a.CLINVAR].order=270,this._columns[F.a.DBSNP].order=280,this._columns[F.a.CANCER_TYPE].shouldExclude=function(){return!e.props.uniqueSampleKeyToTumorType},this._columns[F.a.NUM_MUTATIONS].shouldExclude=function(){return!e.props.mutationCountCache},this._columns[F.a.EXON].render=function(t){return z.a.renderFunction(t,e.props.genomeNexusCache,!1)},this._columns[F.a.EXON].headerRender=function(){return r.createElement("span",{style:{display:"inline-block"}},"Exon",r.createElement("br",null),"(",e.props.totalNumberOfExons," in total)")}}}])&&q(n.prototype,o),i&&q(n,i),t}();Y.defaultProps=Object.assign(Object.assign({},F.b.defaultProps),{columns:[F.a.STUDY,F.a.SAMPLE_ID,F.a.COPY_NUM,F.a.ANNOTATION,F.a.HGVSG,F.a.FUNCTIONAL_IMPACT,F.a.REF_READS_N,F.a.VAR_READS_N,F.a.REF_READS,F.a.VAR_READS,F.a.START_POS,F.a.END_POS,F.a.REF_ALLELE,F.a.VAR_ALLELE,F.a.MUTATION_STATUS,F.a.VALIDATION_STATUS,F.a.CENTER,F.a.CHROMOSOME,F.a.PROTEIN_CHANGE,F.a.MUTATION_TYPE,F.a.VARIANT_TYPE,F.a.COSMIC,F.a.TUMOR_ALLELE_FREQ,F.a.NORMAL_ALLELE_FREQ,F.a.CANCER_TYPE,F.a.NUM_MUTATIONS,F.a.EXON,F.a.HGVSC,F.a.GNOMAD,F.a.CLINVAR,F.a.DBSNP]});var X=Y=Q([c.observer],Y);function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e,t){return!t||"object"!==ne(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ee(e){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function te(e,t){return(te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var re=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ne(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},oe=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),J(this,ee(t).call(this,e))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&te(e,t)}(t,v["a"]),n=t,(o=[{key:"onMutationStatusSelect",value:function(e,t){Object(y.ab)(e,t,this.store.dataStore,y.h.MUTATION_STATUS,b.a)}},{key:"mutationStatusFilter",get:function(){return this.store.dataStore.dataFilters.find(function(e){return e.id===b.a})}},{key:"mutationRateSummary",get:function(){return this.props.store.germlineConsentedSamples&&this.props.store.germlineConsentedSamples.result&&this.props.store.mutationData.isComplete&&this.props.store.mutationData.result.length>0?r.createElement(G,{hugoGeneSymbol:this.props.store.gene.hugoGeneSymbol,molecularProfileIdToMolecularProfile:this.props.store.molecularProfileIdToMolecularProfile,mutations:this.props.store.mutationData.result,samples:this.props.store.samples.result,germlineConsentedSamples:this.props.store.germlineConsentedSamples,onMutationStatusSelect:this.onMutationStatusSelect,mutationStatusFilter:this.mutationStatusFilter}):null}},{key:"isMutationTableDataLoading",get:function(){return"pending"===Object(g.E)(this.props.store.clinicalDataForSamples,this.props.store.studiesForSamplesWithoutCancerTypeClinicalData,this.props.store.canonicalTranscript)}},{key:"totalExonNumber",get:function(){var e=this.props.store.canonicalTranscript.result&&this.props.store.canonicalTranscript.result.transcriptId,t=this.props.store.activeTranscript&&this.props.store.activeTranscript===e?this.props.store.canonicalTranscript.result:this.props.store.transcriptsByTranscriptId[this.props.store.activeTranscript];return t&&t.exons&&t.exons.length>0?t.exons.length.toString():"None"}},{key:"mutationTableComponent",get:function(){return r.createElement(X,{uniqueSampleKeyToTumorType:this.props.store.uniqueSampleKeyToTumorType,oncoKbCancerGenes:this.props.store.oncoKbCancerGenes,discreteCNACache:this.props.discreteCNACache,studyIdToStudy:this.props.store.studyIdToStudy.result,molecularProfileIdToMolecularProfile:this.props.store.molecularProfileIdToMolecularProfile.result,pubMedCache:this.props.pubMedCache,mutationCountCache:this.props.mutationCountCache,genomeNexusCache:this.props.genomeNexusCache,genomeNexusMutationAssessorCache:this.props.genomeNexusMutationAssessorCache,dataStore:this.props.store.dataStore,itemsLabelPlural:this.itemsLabelPlural,downloadDataFetcher:this.props.store.downloadDataFetcher,myCancerGenomeData:this.props.store.myCancerGenomeData,hotspotData:this.props.store.indexedHotspotData,indexedVariantAnnotations:this.props.store.indexedVariantAnnotations,indexedMyVariantInfoAnnotations:this.props.store.indexedMyVariantInfoAnnotations,cosmicData:this.props.store.cosmicData.result,oncoKbData:this.props.store.oncoKbData,usingPublicOncoKbInstance:this.props.store.usingPublicOncoKbInstance,civicGenes:this.props.store.civicGenes,civicVariants:this.props.store.civicVariants,userEmailAddress:this.props.userEmailAddress,enableOncoKb:this.props.enableOncoKb,enableFunctionalImpact:this.props.enableGenomeNexus,enableHotspot:this.props.enableHotspot,enableMyCancerGenome:this.props.enableMyCancerGenome,enableCivic:this.props.enableCivic,totalNumberOfExons:this.totalExonNumber,generateGenomeNexusHgvsgUrl:this.props.store.generateGenomeNexusHgvsgUrl})}},{key:"mutationTable",get:function(){return r.createElement("span",null,!this.isMutationTableDataLoading&&this.mutationTableComponent)}}])&&Z(n.prototype,o),i&&Z(n,i),t}();re([p.computed],oe.prototype,"mutationStatusFilter",null),re([p.computed],oe.prototype,"mutationRateSummary",null),re([m.default,p.action],oe.prototype,"onMutationStatusSelect",null);var ie=oe=re([c.observer],oe),ae=n(889),se=n(890),le=n(6),ue=n(645),ce=(n(1147),n(646)),pe=n(15);function de(){return(de=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function he(e){return(he=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function me(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ye(e,t){return(ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ge(e){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ve=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ge(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},be=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=he(t).call(this,e))||"object"!==ge(o)&&"function"!=typeof o?me(r):o).handleTabChange.bind(me(n)),n.mutationsGeneTab=n.props.store.hugoGeneSymbols[0],n.userSelectionStore=new se.a,n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}(t,r["Component"]),n=t,(o=[{key:"onToggleOql",value:function(){this.props.store.mutationsTabFilteringSettings.useOql=!this.props.store.mutationsTabFilteringSettings.useOql}},{key:"onToggleVUS",value:function(){this.props.store.mutationsTabFilteringSettings.excludeVus=!this.props.store.mutationsTabFilteringSettings.excludeVus}},{key:"onToggleGermline",value:function(){this.props.store.mutationsTabFilteringSettings.excludeGermline=!this.props.store.mutationsTabFilteringSettings.excludeGermline}},{key:"render",value:function(){var e=this,t=this.props.routing?this.props.routing.location.query.mutationsGeneTab:this.mutationsGeneTab;return r.createElement("div",{"data-test":"mutationsTabDiv"},this.props.store.mutationMapperStores.isComplete&&r.createElement(h.b,{id:"mutationsPageTabs",activeTabId:t,onTabClick:function(t){return e.handleTabChange(t)},className:"pillTabs resultsPageMutationsGeneTabs",arrowStyle:{"line-height":.8},tabButtonStyle:"pills",unmountOnHide:!0},this.generateTabs(this.props.store.hugoGeneSymbols)))}},{key:"generateTabs",value:function(e){var t=this,n=[];return e.forEach(function(e){var o=t.props.store.getMutationMapperStore(e);if(o){var i=o.mutations.length>0?void 0:{color:"#bbb"};n.push(r.createElement(h.a,{key:e,id:e,linkText:e,anchorStyle:i},r.createElement("div",{className:"tabMessageContainer"},r.createElement(ue.a,{className:"mutations-oql-status-banner",store:t.props.store,tabReflectsOql:t.props.store.mutationsTabFilteringSettings.useOql,isUnaffected:!t.props.store.queryContainsMutationOql,onToggle:t.onToggleOql}),r.createElement(ce.a,{store:t.props.store,mutationsTabModeSettings:{excludeVUS:t.props.store.mutationsTabFilteringSettings.excludeVus,excludeGermline:t.props.store.mutationsTabFilteringSettings.excludeGermline,toggleExcludeVUS:t.onToggleVUS,toggleExcludeGermline:t.onToggleGermline,hugoGeneSymbol:e}})),r.createElement(ie,de({},Object(ae.a)(Object.assign(Object.assign({},le.b.serverConfig),{ensembl_transcript_url:t.props.store.ensemblLink})),{oncoKbPublicApiUrl:Object(pe.u)(),store:o,trackVisibility:t.userSelectionStore.trackVisibility,discreteCNACache:t.props.store.discreteCNACache,pubMedCache:t.props.store.pubMedCache,cancerTypeCache:t.props.store.cancerTypeCache,mutationCountCache:t.props.store.mutationCountCache,genomeNexusCache:t.props.store.genomeNexusCache,genomeNexusMutationAssessorCache:t.props.store.genomeNexusMutationAssessorCache,pdbHeaderCache:t.props.store.pdbHeaderCache,userEmailAddress:t.props.appStore.userName,generateGenomeNexusHgvsgUrl:t.props.store.generateGenomeNexusHgvsgUrl,mutationAlignerUrlTemplate:Object(pe.t)()}))))}}),n}},{key:"handleTabChange",value:function(e){this.props.routing?this.props.routing.updateRoute({mutationsGeneTab:e}):this.mutationsGeneTab=e}}])&&fe(n.prototype,o),i&&fe(n,i),t}();ve([p.observable],be.prototype,"mutationsGeneTab",void 0),ve([m.default],be.prototype,"onToggleOql",null),ve([m.default],be.prototype,"onToggleVUS",null),ve([m.default],be.prototype,"onToggleGermline",null);var Se=be=ve([c.observer],be),_e=n(876),we=n(126),Ee=n.n(we),Oe=n(585),Ce=n(736),Pe=n(700),xe=n(575),Te=n(748);function ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ie(e,t){return!t||"object"!==Ne(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function De(e){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Me(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&je(e,t)}function je(e,t){return(je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ne(e){return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Re=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Ne(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Le=function(e){function t(){return Ae(this,t),Ie(this,De(t).apply(this,arguments))}return Me(t,xe["b"]),t}(),Ge=function(e){function t(){return Ae(this,t),Ie(this,De(t).apply(this,arguments))}var n,o,i;return Me(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement(Le,{data:this.props.geneAlterationData,columns:[{name:"Gene Symbol",render:function(e){return r.createElement("span",null,e.gene)},download:function(e){return e.gene},sortBy:function(e){return e.gene},filter:function(e,t,n){return e.gene.toUpperCase().indexOf(n)>-1}},{name:"OQL Line",visible:!1,render:function(e){return r.createElement("span",null,e.oqlLine)},download:function(e){return e.oqlLine},sortBy:function(e){return e.oqlLine},filter:function(e,t,n){return e.oqlLine.toUpperCase().indexOf(n)>-1}},{name:"Num Samples Altered",render:function(e){return r.createElement("span",null,e.sequenced?e.altered:"Not Profiled")},download:function(e){return e.sequenced?"".concat(e.altered):"N/P"},sortBy:function(e){return e.altered}},{name:"Percent Samples Altered",render:function(e){return e.sequenced?r.createElement(Te.a,{barWidth:200,textWidth:45,counts:[e.altered],totalCount:e.sequenced}):r.createElement("span",null,"Not Profiled")},download:function(e){return e.percentAltered},sortBy:function(e){return e.altered/e.sequenced}}],initialSortColumn:"Percent Samples Altered",initialSortDirection:"desc",showPagination:!0,initialItemsPerPage:10,showColumnVisibility:!0,showFilter:!0,showCopyDownload:!0,copyDownloadProps:{downloadFilename:"gene_alteration_frequency.tsv"}})}}])&&ke(n.prototype,o),i&&ke(n,i),t}(),Fe=Ge=Re([c.observer],Ge),Be=n(688),Ve=n(1026),ze=n.n(Ve),qe=n(651),Ue=n(588);function He(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function We(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ke(e,t){return!t||"object"!==Xe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $e(e){return($e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ye(e,t)}function Ye(e,t){return(Ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xe(e){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ze=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Xe(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};function Je(e,t,n){if(!o.isEmpty(e)&&e[t])return function(e,t){var n,r=function(e){return e},o=function(e){return e.map(function(e){return e.type})},i=void 0;switch(0!==e.alterationTypes.length&&e.alterationTypes.includes(t)||(i={summaryContent:"no alteration",summaryClass:ze.a.noAlterationSpan,summaryAlteredStatus:qe.a.UNALTERED}),t){case"MUT":n={label:"MUT",getAlterationData:function(e){return e.mutation},isNotProfiled:function(e){return e.isMutationNotProfiled},getValues:r};break;case"FUSION":n={label:"FUSION",getAlterationData:function(e){return e.fusion},isNotProfiled:function(e){return e.isFusionNotProfiled},getValues:r};break;case"CNA":n={label:"CNA",getAlterationData:function(e){return e.cna},isNotProfiled:function(e){return e.isCnaNotProfiled},getValues:o};break;case"EXP":n={label:"EXP",getAlterationData:function(e){return e.mrnaExp},isNotProfiled:function(e){return e.isMrnaExpNotProfiled},getValues:o};break;case"PROT":n={label:"PROT",getAlterationData:function(e){return e.proteinLevel},isNotProfiled:function(e){return e.isProteinLevelNotProfiled},getValues:o}}if(n){var a=n.getAlterationData(e);a.length>0&&(i={summaryContent:n.getValues(a).join(", "),summaryClass:ze.a.alterationSpan,summaryAlteredStatus:qe.a.ALTERED}),n.isNotProfiled(e)&&(i={summaryContent:"not profiled",summaryClass:ze.a.notProfiledSpan,summaryAlteredStatus:qe.a.UNPROFILED})}return i||void 0}(e[t],n)}function et(e,t,n){var r=o.map(n,function(n){return Je(e,t,n)}),i=o.filter(r,function(e){return!!e&&e.summaryAlteredStatus===qe.a.UNPROFILED});if(i&&i.length===n.length)return{summaryContent:"not profiled",summaryClass:ze.a.notProfiledSpan,summaryAlteredStatus:qe.a.UNPROFILED};var a=o.filter(r,function(e){return!!e&&e.summaryAlteredStatus===qe.a.ALTERED}),s=o.map(a,function(e){return e.summaryContent}).join(", ");return a.length>0?{summaryContent:s,summaryClass:ze.a.alterationSpan,summaryAlteredStatus:qe.a.ALTERED}:{summaryContent:"no alteration",summaryClass:ze.a.noAlterationSpan,summaryAlteredStatus:qe.a.UNALTERED}}var tt=function(e){function t(){return We(this,t),Ke(this,$e(t).apply(this,arguments))}return Qe(t,xe["b"]),t}(),nt=function(e){function t(){return We(this,t),Ke(this,$e(t).apply(this,arguments))}var n,i,a;return Qe(t,r["Component"]),n=t,(i=[{key:"render",value:function(){var e=this,t=[{name:"Study ID",render:function(e){return r.createElement("span",{style:{whiteSpace:"nowrap"}},r.createElement(Be.a,{studyId:e.studyId},e.studyId))},download:function(e){return e.studyId},sortBy:function(e){return e.studyId},filter:function(e,t){return new RegExp(t,"i").test(e.studyId)}},{name:"Sample ID",render:function(e){return r.createElement("span",{style:{whiteSpace:"nowrap"}},r.createElement("a",{href:Object(pe.y)(e.studyId,e.sampleId),target:"_blank"},e.sampleId))},download:function(e){return"".concat(e.sampleId)},sortBy:function(e){return e.sampleId},filter:function(e,t){return new RegExp(t,"i").test(e.sampleId)}},{name:"Patient ID",render:function(e){return r.createElement("span",{style:{whiteSpace:"nowrap"}},r.createElement("a",{href:Object(pe.w)(e.studyId,e.patientId),target:"_blank"},e.patientId))},download:function(e){return"".concat(e.patientId)},sortBy:function(e){return e.patientId},filter:function(e,t){return new RegExp(t,"i").test(e.patientId)}},{name:"Altered",tooltip:r.createElement("span",null,"1 = Sample harbors alteration in one of the input genes"),render:function(e){return r.createElement("span",null,e.altered?"1":"0")},download:function(e){return e.altered?"1":"0"},sortBy:function(e){return e.altered?1:0}}];o.forEach(this.props.trackLabels,function(n){t.push({name:"".concat(n),headerDownload:function(e){return"".concat(n)},render:function(t){var o=et(t.oqlData,n,e.props.trackAlterationTypesMap[n]);return r.createElement("span",{className:o.summaryClass},o.summaryContent)},download:function(t){return et(t.oqlData,n,e.props.trackAlterationTypesMap[n]).summaryContent},sortBy:function(t){return et(t.oqlData,n,e.props.trackAlterationTypesMap[n]).summaryContent},filter:function(t,r){return new RegExp(r,"i").test(et(t.oqlData,n,e.props.trackAlterationTypesMap[n]).summaryContent)},visible:!0})});var n=o.uniq(o.map(this.props.oqls,function(e){return e.gene}));return o.forEach(n,function(n){e.props.geneAlterationTypesMap[n].forEach(function(e){var i=Object(Ue.h)(e),a=e.alteration_type.toUpperCase(),s="".concat(n,": ").concat(i);o.isEmpty(t.find(function(e){return e.name===s}))&&t.push({name:"".concat(n,": ").concat(i),headerDownload:function(e){return"".concat(n,": ").concat(i)},render:function(e){var t=Je(e.oqlDataByGene,n,a);return r.createElement("span",{className:t.summaryClass},t.summaryContent)},download:function(e){return Je(e.oqlDataByGene,n,a).summaryContent},sortBy:function(e){return Je(e.oqlDataByGene,n,a).summaryContent},filter:function(e,t){return new RegExp(t,"i").test(Je(e.oqlDataByGene,n,a).summaryContent)},visible:!1})})}),r.createElement(tt,{data:this.props.caseAlterationData,columns:t,initialSortColumn:"Altered",initialSortDirection:"desc",initialItemsPerPage:20,showPagination:!0,showColumnVisibility:!0,showFilter:!0,showCopyDownload:!0,enableHorizontalScroll:!0,copyDownloadProps:{downloadFilename:"alterations_across_samples.tsv"}})}}])&&He(n.prototype,i),a&&He(n,a),t}(),rt=nt=Ze([c.observer],nt),ot=n(708),it=n(9),at=n.n(it),st=n(859),lt=n(101),ut=n(615),ct=n(590),pt=n(594),dt=n(626),ft=n.n(dt);function ht(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function mt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yt(e){return(yt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vt(e,t){return(vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bt(e){return(bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var St=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":bt(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},_t=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,i=yt(t).call(this,e),(n=!i||"object"!==bt(i)&&"function"!=typeof i?gt(r):i).geneAlterationData=Object(g.S)({await:function(){return[n.props.store.oqlFilteredCaseAggregatedDataByOQLLine,n.props.store.sequencedSampleKeysByGene]},invoke:function(){return Promise.resolve(Object(ot.e)(n.props.store.oqlFilteredCaseAggregatedDataByOQLLine.result,n.props.store.sequencedSampleKeysByGene.result))}}),n.geneAlterationDataByGene=Object(g.S)({await:function(){return[n.geneAlterationData]},invoke:function(){return Promise.resolve(o.keyBy(n.geneAlterationData.result,"gene"))}}),n.caseAlterationData=Object(g.S)({await:function(){return[n.props.store.selectedMolecularProfiles,n.props.store.oqlFilteredCaseAggregatedDataByOQLLine,n.props.store.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine,n.props.store.coverageInformation,n.props.store.samples,n.geneAlterationDataByGene,n.props.store.molecularProfileIdToMolecularProfile]},invoke:function(){return Promise.resolve(Object(ot.b)(n.props.store.oqlText,n.props.store.selectedMolecularProfiles.result,n.props.store.oqlFilteredCaseAggregatedDataByOQLLine.result,n.props.store.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine.result,n.props.store.coverageInformation.result,n.props.store.samples.result,n.geneAlterationDataByGene.result,n.props.store.molecularProfileIdToMolecularProfile.result))}}),n.mutationData=Object(g.S)({await:function(){return[n.props.store.nonOqlFilteredCaseAggregatedData]},invoke:function(){return Promise.resolve(Object(ot.g)(n.props.store.nonOqlFilteredCaseAggregatedData.result))}}),n.mutationDownloadData=Object(g.S)({await:function(){return[n.mutationData,n.props.store.samples,n.props.store.genes]},invoke:function(){return Promise.resolve(Object(ot.h)(n.mutationData.result,n.props.store.samples.result,n.props.store.genes.result))}}),n.allOtherMolecularProfileDataGroupByProfileName=Object(g.S)({await:function(){return[n.props.store.nonSelectedDownloadableMolecularData,n.props.store.nonSelectedDownloadableMolecularProfilesGroupByName]},invoke:function(){var e=o.keys(n.props.store.nonSelectedDownloadableMolecularProfilesGroupByName.result);if(n.props.store.doNonSelectedDownloadableMolecularProfilesExist){var t={samples:o.groupBy(n.props.store.nonSelectedDownloadableMolecularData.result,function(e){return e.uniqueSampleKey})},r=o.reduce(e,function(e,r){return e[r]=Object(ot.i)(n.props.store.nonSelectedDownloadableMolecularProfilesGroupByName.result[r].map(function(e){return e.molecularProfileId}),t),e},{});return Promise.resolve(r)}return Promise.resolve({})}}),n.allOtherMolecularProfileDownloadDataGroupByProfileName=Object(g.S)({await:function(){return[n.allOtherMolecularProfileDataGroupByProfileName,n.props.store.samples,n.props.store.genes]},invoke:function(){return Promise.resolve(o.mapValues(n.allOtherMolecularProfileDataGroupByProfileName.result,function(e){return Object(ot.j)(e,n.props.store.samples.result,n.props.store.genes.result)}))}}),n.mrnaData=Object(g.S)({await:function(){return[n.props.store.nonOqlFilteredCaseAggregatedData]},invoke:function(){return Promise.resolve(Object(ot.f)(n.props.store.nonOqlFilteredCaseAggregatedData.result))}}),n.mrnaDownloadData=Object(g.S)({await:function(){return[n.mrnaData,n.props.store.samples,n.props.store.genes]},invoke:function(){return Promise.resolve(Object(ot.d)(n.mrnaData.result,n.props.store.samples.result,n.props.store.genes.result))}}),n.proteinData=Object(g.S)({await:function(){return[n.props.store.nonOqlFilteredCaseAggregatedData]},invoke:function(){return Promise.resolve(Object(ot.k)(n.props.store.nonOqlFilteredCaseAggregatedData.result))}}),n.proteinDownloadData=Object(g.S)({await:function(){return[n.proteinData,n.props.store.samples,n.props.store.genes]},invoke:function(){return Promise.resolve(Object(ot.d)(n.proteinData.result,n.props.store.samples.result,n.props.store.genes.result))}}),n.cnaData=Object(g.S)({await:function(){return[n.props.store.nonOqlFilteredCaseAggregatedData]},invoke:function(){return Promise.resolve(Object(ot.c)(n.props.store.nonOqlFilteredCaseAggregatedData.result))}}),n.cnaDownloadData=Object(g.S)({await:function(){return[n.cnaData,n.props.store.samples,n.props.store.genes]},invoke:function(){return Promise.resolve(Object(ot.d)(n.cnaData.result,n.props.store.samples.result,n.props.store.genes.result))}}),n.alteredCaseAlterationData=Object(g.S)({await:function(){return[n.caseAlterationData]},invoke:function(){return Promise.resolve(n.caseAlterationData.result.filter(function(e){return e.altered}))}}),n.unalteredCaseAlterationData=Object(g.S)({await:function(){return[n.caseAlterationData]},invoke:function(){return Promise.resolve(n.caseAlterationData.result.filter(function(e){return!e.altered}))}}),n.sampleMatrix=Object(g.S)({await:function(){return[n.caseAlterationData]},invoke:function(){var e=[];return o.map(n.caseAlterationData.result,function(t){if(o.isEmpty(e)){var n=o.keys(t.oqlDataByGene);e.push(["studyID:sampleId","Altered"].concat(ht(n)))}var r=o.map(t.oqlDataByGene,function(e){return o.isEmpty(e.alterationTypes)?"0":"1"});e.push(["".concat(t.studyId,":").concat(t.sampleId),t.altered?"1":"0"].concat(ht(r)))}),Promise.resolve(e)}}),n.sampleMatrixText=Object(g.S)({await:function(){return[n.sampleMatrix]},invoke:function(){return Promise.resolve(Object(ot.n)(n.sampleMatrix.result))}}),n.oqls=Object(g.S)({await:function(){return[n.props.store.oqlFilteredCaseAggregatedDataByOQLLine]},invoke:function(){return Promise.resolve(n.props.store.oqlFilteredCaseAggregatedDataByOQLLine.result.map(function(e){return e.oql}))}}),n.trackLabels=Object(g.S)({await:function(){return[n.props.store.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine]},invoke:function(){var e=[];return n.props.store.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine.result.forEach(function(t,r){void 0===t.mergedTrackOqlList?e.push(Object(Oe.r)(r,n.props.store.oqlText,t.oql)):e.push(Object(Oe.o)(t.oql))}),Promise.resolve(e)}}),n.trackAlterationTypesMap=Object(g.S)({await:function(){return[n.props.store.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine]},invoke:function(){var e={};return n.props.store.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine.result.forEach(function(t,r){if(void 0===t.mergedTrackOqlList){var i=t.oql,a=Object(Oe.r)(r,n.props.store.oqlText,t.oql);i.parsed_oql_line.alterations&&(e[a]=o.uniq(o.map(i.parsed_oql_line.alterations,function(e){return e.alteration_type.toUpperCase()})))}else{var s=t.oql,l=Object(Oe.o)(t.oql),u=[];o.forEach(s.list,function(e){if(e.parsed_oql_line.alterations){var t=o.map(e.parsed_oql_line.alterations,function(e){return e.alteration_type.toUpperCase()});u.push.apply(u,ht(t))}}),e[l]=o.uniq(u)}}),Promise.resolve(e)}}),n.geneAlterationMap=Object(g.S)({await:function(){return[n.props.store.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine]},invoke:function(){var e={};return n.props.store.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine.result.forEach(function(t,n){if(void 0===t.mergedTrackOqlList){var r=t.oql;r.parsed_oql_line.alterations&&(e[r.gene]=o.chain(r.parsed_oql_line.alterations).union(e[r.gene]).uniq().value())}else{var i=t.oql;o.forEach(i.list,function(t){if(t.parsed_oql_line.alterations){o.map(t.parsed_oql_line.alterations,function(e){return e.alteration_type});e[t.gene]=o.chain(t.parsed_oql_line.alterations).union(e[t.gene]).uniq().value()}})}}),Promise.resolve(e)}}),n.handleMutationDownload=n.handleMutationDownload.bind(gt(n)),n.handleTransposedMutationDownload=n.handleTransposedMutationDownload.bind(gt(n)),n.handleCnaDownload=n.handleCnaDownload.bind(gt(n)),n.handleTransposedCnaDownload=n.handleTransposedCnaDownload.bind(gt(n)),n.handleMrnaDownload=n.handleMrnaDownload.bind(gt(n)),n.handleTransposedMrnaDownload=n.handleTransposedMrnaDownload.bind(gt(n)),n.handleProteinDownload=n.handleProteinDownload.bind(gt(n)),n.handleTransposedProteinDownload=n.handleTransposedProteinDownload.bind(gt(n)),n}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vt(e,t)}(t,r["Component"]),n=t,(i=[{key:"render",value:function(){switch(Object(g.E)(this.geneAlterationData,this.caseAlterationData,this.oqls,this.trackLabels,this.trackAlterationTypesMap,this.geneAlterationMap,this.cnaData,this.mutationData,this.mrnaData,this.proteinData,this.unalteredCaseAlterationData,this.alteredCaseAlterationData,this.props.store.virtualStudyParams,this.sampleMatrixText,this.props.store.nonSelectedDownloadableMolecularProfilesGroupByName,this.props.store.studies,this.props.store.selectedMolecularProfiles)){case"pending":return r.createElement(lt.a,{isLoading:!0,center:!0,size:"big"});case"error":return r.createElement(ct.a,null);case"complete":return r.createElement(st.a,{"data-test":"downloadTabDiv",offset:60},r.createElement("div",{className:"tabMessageContainer"},r.createElement(ue.a,{className:"download-oql-status-banner",store:this.props.store,tabReflectsOql:!0}),r.createElement(ce.a,{store:this.props.store})),r.createElement("div",null,r.createElement(Ce.a,{title:"Downloadable Data Files",className:"forceHeaderStyle h4",isLoading:!1,style:{marginBottom:15}}),r.createElement("table",{className:at()("table","table-striped",ze.a.downloadCopyTable)},r.createElement("tbody",null,Object(ot.l)(this.cnaData.result)&&this.cnaDownloadControls(),Object(ot.m)(this.mutationData.result)&&this.mutationDownloadControls(),Object(ot.l)(this.mrnaData.result)&&this.mrnaExprDownloadControls(this.props.store.selectedMolecularProfiles.result.find(function(e){return e.molecularAlterationType===d.a.MRNA_EXPRESSION}).name),Object(ot.l)(this.proteinData.result)&&this.proteinExprDownloadControls(this.props.store.selectedMolecularProfiles.result.find(function(e){return e.molecularAlterationType===d.a.PROTEIN_LEVEL}).name),this.alteredSamplesDownloadControls(this.alteredCaseAlterationData.result,this.props.store.virtualStudyParams.result),this.unalteredSamplesDownloadControls(this.unalteredCaseAlterationData.result,this.props.store.virtualStudyParams.result),this.sampleMatrixDownloadControls(this.sampleMatrixText.result),this.props.store.doNonSelectedDownloadableMolecularProfilesExist&&this.nonSelectedProfileDownloadRow(this.props.store.nonSelectedDownloadableMolecularProfilesGroupByName.result)))),r.createElement("hr",null),r.createElement("div",{className:ze.a["tables-container"],"data-test":"dataDownloadGeneAlterationTable"},r.createElement(Ce.a,{title:"Gene Alteration Frequency",isLoading:!1,className:"pull-left forceHeaderStyle h4"}),r.createElement(Fe,{geneAlterationData:this.geneAlterationData.result})),r.createElement("hr",null),r.createElement("div",{className:ze.a["tables-container"]},r.createElement(Ce.a,{title:"Type of Genetic Alterations Across All Samples",isLoading:!1,className:"pull-left forceHeaderStyle h4"}),r.createElement(rt,{caseAlterationData:this.caseAlterationData.result,oqls:this.oqls.result,trackLabels:this.trackLabels.result,trackAlterationTypesMap:this.trackAlterationTypesMap.result,geneAlterationTypesMap:this.geneAlterationMap.result})));default:return r.createElement(ct.a,null)}}},{key:"cnaDownloadControls",value:function(){return this.downloadControlsRow("Copy-number Alterations (OQL is not in effect)",this.handleCnaDownload,this.handleTransposedCnaDownload)}},{key:"mutationDownloadControls",value:function(){return this.downloadControlsRow("Mutations (OQL is not in effect)",this.handleMutationDownload,this.handleTransposedMutationDownload)}},{key:"mrnaExprDownloadControls",value:function(e){return this.downloadControlsRow(e,this.handleMrnaDownload,this.handleTransposedMrnaDownload)}},{key:"proteinExprDownloadControls",value:function(e){return this.downloadControlsRow(e,this.handleProteinDownload,this.handleTransposedProteinDownload)}},{key:"downloadControlsRow",value:function(e,t,n){return r.createElement("tr",null,r.createElement("td",{style:{width:500}},e),r.createElement("td",null,r.createElement("a",{onClick:function(n){return t(e)}},r.createElement("i",{className:"fa fa-cloud-download",style:{marginRight:5}}),"Tab Delimited Format"),r.createElement("span",{style:{margin:"0px 10px"}},"|"),r.createElement("a",{onClick:function(t){return n(e)}},r.createElement("i",{className:"fa fa-cloud-download",style:{marginRight:5}}),"Transposed Matrix")))}},{key:"nonSelectedProfileDownloadRow",value:function(e){var t=this,n=o.map(e,function(e,n){return 1===t.props.store.studies.result.length?{name:n,description:e[0].description}:{name:n}});return o.map(n,function(e){return r.createElement("tr",null,r.createElement("td",{style:{width:500}},r.createElement("div",{style:{display:"flex",alignItems:"center"}},e.name,e.description&&r.createElement(g.c,{mouseEnterDelay:0,placement:"right",overlay:r.createElement("div",{className:ze.a.tooltip},e.description)},r.createElement(ft.a,{className:ze.a.infoIcon,name:"info-circle"})))),r.createElement("td",null,r.createElement("div",null,r.createElement("a",{onClick:function(n){return t.handleOtherMolecularProfileDownload(n,e.name)}},r.createElement("i",{className:"fa fa-cloud-download",style:{marginRight:5}}),"Tab Delimited Format"),r.createElement("span",{style:{margin:"0px 10px"}},"|"),r.createElement("a",{onClick:function(n){return t.handleTransposedOtherMolecularProfileDownload(n,e.name)}},r.createElement("i",{className:"fa fa-cloud-download",style:{marginRight:5}}),"Transposed Matrix"))))})}},{key:"copyDownloadControlsRow",value:function(e,t,n){return r.createElement("tr",null,r.createElement("td",null,e),r.createElement("td",null,r.createElement(Pe.a,{controlsStyle:"LINK",downloadData:t,downloadFilename:n})))}},{key:"copyDownloadQueryControlsRow",value:function(e,t,n,o,i){return r.createElement("tr",null,r.createElement("td",null,e),r.createElement("td",null,r.createElement(Pe.a,{controlsStyle:"QUERY",downloadData:t,downloadFilename:n,handleQuery:o,virtualStudyParams:i})))}},{key:"alteredSamplesDownloadControls",value:function(e,t){var n=this,r=o.map(e,function(e){return"".concat(e.studyId,":").concat(e.sampleId)}),i={user:t.user,name:t.name,description:t.description,studyWithSamples:t.studyWithSamples,selectedSamples:o.filter(t.selectedSamples,function(e){return r.includes("".concat(e.studyId,":").concat(e.sampleId))}),filter:t.filter,attributesMetaSet:t.attributesMetaSet};return this.copyDownloadQueryControlsRow("Altered samples: List of samples with alterations",function(){return r.join("\n")},"altered_samples.txt",function(){return n.handleQueryButtonClick(r)},i)}},{key:"unalteredSamplesDownloadControls",value:function(e,t){var n=this,r=o.map(e,function(e){return"".concat(e.studyId,":").concat(e.sampleId)}),i={user:t.user,name:t.name,description:t.description,studyWithSamples:t.studyWithSamples,selectedSamples:o.filter(t.selectedSamples,function(e){return r.includes("".concat(e.studyId,":").concat(e.sampleId))}),filter:t.filter,attributesMetaSet:t.attributesMetaSet};return this.copyDownloadQueryControlsRow("Unaltered samples: List of samples without any alteration",function(){return r.join("\n")},"unaltered_samples.txt",function(){return n.handleQueryButtonClick(r)},i)}},{key:"sampleMatrixDownloadControls",value:function(e){return this.copyDownloadControlsRow("Sample matrix: List of all samples where 1=altered and 0=unaltered",function(){return e},"sample_matrix.txt")}},{key:"handleMutationDownload",value:function(){var e=this;Object(ut.a)(this.mutationDownloadData,function(t){var n=e.downloadDataText(t);Ee()(n,"mutations.txt")})}},{key:"handleTransposedMutationDownload",value:function(){var e=this;Object(ut.a)(this.mutationDownloadData,function(t){var n=e.downloadDataText(e.unzipDownloadData(t));Ee()(n,"mutations_transposed.txt")})}},{key:"handleMrnaDownload",value:function(e){var t=this;Object(ut.a)(this.mrnaDownloadData,function(n){var r=t.downloadDataText(n);Ee()(r,"".concat(e,".txt"))})}},{key:"handleTransposedMrnaDownload",value:function(e){var t=this;Object(ut.a)(this.mrnaDownloadData,function(n){var r=t.downloadDataText(t.unzipDownloadData(n));Ee()(r,"".concat(e,".txt"))})}},{key:"handleProteinDownload",value:function(e){var t=this;Object(ut.a)(this.proteinDownloadData,function(n){var r=t.downloadDataText(n);Ee()(r,"".concat(e,".txt"))})}},{key:"handleTransposedProteinDownload",value:function(e){var t=this;Object(ut.a)(this.proteinDownloadData,function(n){var r=t.downloadDataText(t.unzipDownloadData(n));Ee()(r,"".concat(e,".txt"))})}},{key:"handleCnaDownload",value:function(){var e=this;Object(ut.a)(this.cnaDownloadData,function(t){var n=e.downloadDataText(t);Ee()(n,"cna.txt")})}},{key:"handleTransposedCnaDownload",value:function(){var e=this;Object(ut.a)(this.cnaDownloadData,function(t){var n=e.downloadDataText(e.unzipDownloadData(t));Ee()(n,"cna_transposed.txt")})}},{key:"handleOtherMolecularProfileDownload",value:function(e,t){var n=this;Object(ut.a)(this.allOtherMolecularProfileDownloadDataGroupByProfileName,function(e){var r=n.downloadDataTextGroupByProfileName(e);Ee()(r[t],"".concat(t,".txt"))})}},{key:"handleTransposedOtherMolecularProfileDownload",value:function(e,t){var n=this;Object(ut.a)(this.allOtherMolecularProfileDownloadDataGroupByProfileName,function(e){var r=n.downloadDataTextGroupByProfileName(n.unzipDownloadDataGroupByProfileName(e));Ee()(r[t],"".concat(t,".txt"))})}},{key:"handleQueryButtonClick",value:function(e){var t={selectedSampleListId:pt.a,selectedSampleIds:e,caseIdsMode:"sample"};this.props.store.modifyQueryParams=t,this.props.store.queryFormVisible=!0}},{key:"unzipDownloadDataGroupByProfileName",value:function(e){return o.mapValues(e,function(e){return o.unzip(e)})}},{key:"downloadDataTextGroupByProfileName",value:function(e){return o.mapValues(e,function(e){return Object(ot.n)(e)})}},{key:"unzipDownloadData",value:function(e){return o.unzip(e)}},{key:"downloadDataText",value:function(e){return Object(ot.n)(e)}}])&&mt(n.prototype,i),a&&mt(n,a),t}();St([m.default],_t.prototype,"handleOtherMolecularProfileDownload",null),St([m.default],_t.prototype,"handleTransposedOtherMolecularProfileDownload",null),St([p.action],_t.prototype,"handleQueryButtonClick",null);var wt=_t=St([c.observer],_t),Et=n(56),Ot=n(67),Ct=n(891),Pt=n(893),xt=n(584),Tt=n(759),kt=n(771);function At(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function It(e,t){return!t||"object"!==jt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dt(e){return(Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mt(e,t){return(Mt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jt(e){return(jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Nt=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":jt(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Rt=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=It(this,Dt(t).call(this,e))).renderingComplete=!1,n.chromosome=Object(g.S)({await:function(){return[n.props.store.hugoGeneSymbolToReferenceGene]},invoke:function(){return Promise.resolve(n.props.store.hugoGeneSymbolToReferenceGene.result[n.activeLocus].chromosome)}}),n.segmentTrackMaxHeight=.7*xt.a.size.height,n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mt(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=this;return r.createElement("div",{className:"pillTabs"},r.createElement(lt.a,{isLoading:this.isHidden,size:"big",center:!0},r.createElement(kt.a,{getItems:function(){return e.progressItems},show:this.isHidden,sequential:!0})),r.createElement(Pt.a,{promise:this.props.store.cnSegments,filename:this.filename}),r.createElement(Et.Nav,{bsStyle:"pills",activeKey:this.activeLocus,onSelect:this.onTabSelect},r.createElement(Et.NavItem,{eventKey:Tt.a},"Whole Genome"),this.props.store.genes.result&&this.props.store.genes.result.map(function(e){return r.createElement(Et.NavItem,{eventKey:e.hugoGeneSymbol},e.hugoGeneSymbol)})),r.createElement("div",{style:this.isHidden?{opacity:0}:void 0},r.createElement(Ct.a,{tracks:[Object.assign(Object.assign({},Object(Tt.c)()),{height:this.segmentTrackHeight,features:this.features})],genome:this.props.store.referenceGenome,locus:this.activeLocus,onRenderingStart:this.onIgvRenderingStart,onRenderingComplete:this.onIgvRenderingComplete,disableSearch:this.activeLocus!==Tt.a,isVisible:this.props.store.tabId===Ot.b.CN_SEGMENTS&&!this.isHidden})))}},{key:"onTabSelect",value:function(e){this.selectedLocus=e}},{key:"onIgvRenderingStart",value:function(){this.renderingComplete=!1}},{key:"onIgvRenderingComplete",value:function(){this.renderingComplete=!0}},{key:"segmentTrackHeight",get:function(){return Object(Tt.b)(this.features,this.segmentTrackMaxHeight)}},{key:"activeLocus",get:function(){var e=this.selectedLocus;return e||(e=this.props.store.genes.result?this.props.store.genes.result[0].hugoGeneSymbol:Tt.a),e}},{key:"features",get:function(){var e=this.activePromise&&this.activePromise.result||[];return Object(Tt.d)(e)}},{key:"filename",get:function(){return"".concat(this.props.store.downloadFilenamePrefix,"segments.seg")}},{key:"isHidden",get:function(){return this.isLoading||!this.renderingComplete}},{key:"isLoading",get:function(){return!this.activePromise||this.activePromise.isPending}},{key:"activePromise",get:function(){return this.activeLocus===Tt.a?this.props.store.cnSegments:this.props.store.cnSegmentsByChromosome.result&&this.chromosome?this.props.store.cnSegmentsByChromosome.result[this.chromosome.result]:void 0}},{key:"indicatorPromises",get:function(){var e=[this.props.store.studies,this.props.store.genes];return this.activeLocus!==Tt.a&&e.push(this.props.store.cnSegmentsByChromosome),this.activePromise&&e.push(this.activePromise),e}},{key:"progressItems",get:function(){return[{label:"Loading copy number segments data...",promises:this.indicatorPromises},{label:"Rendering"}]}}])&&At(n.prototype,o),i&&At(n,i),t}();Nt([p.observable],Rt.prototype,"renderingComplete",void 0),Nt([p.observable],Rt.prototype,"selectedLocus",void 0),Nt([p.observable],Rt.prototype,"segmentTrackMaxHeight",void 0),Nt([p.computed],Rt.prototype,"segmentTrackHeight",null),Nt([p.computed],Rt.prototype,"activeLocus",null),Nt([p.computed],Rt.prototype,"features",null),Nt([p.computed],Rt.prototype,"filename",null),Nt([p.computed],Rt.prototype,"isHidden",null),Nt([p.computed],Rt.prototype,"isLoading",null),Nt([p.computed],Rt.prototype,"activePromise",null),Nt([p.computed],Rt.prototype,"indicatorPromises",null),Nt([p.computed],Rt.prototype,"progressItems",null),Nt([m.default,p.action],Rt.prototype,"onTabSelect",null),Nt([m.default,p.action],Rt.prototype,"onIgvRenderingStart",null),Nt([m.default,p.action],Rt.prototype,"onIgvRenderingComplete",null);var Lt=Rt=Nt([c.observer],Rt),Gt=(n(1027),n(1148),n(595));function Ft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vt(e,t){return!t||"object"!==Ht(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zt(e){return(zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ut(e,t)}function Ut(e,t){return(Ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ht(e){return(Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Wt,Kt=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Ht(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};!function(e){e[e.NAME=0]="NAME",e[e.SCORE=1]="SCORE",e[e.GENES=2]="GENES"}(Wt||(Wt={}));var $t=function(e){function t(){return Bt(this,t),Vt(this,zt(t).apply(this,arguments))}return qt(t,xe["b"]),t}();var Qt=function(e){function t(e){var n;return Bt(this,t),(n=Vt(this,zt(t).call(this,e))).dataStore=new Gt.a(function(){return n.props.data}),n._columns={},n.generateColumns(),n}var n,i,a;return qt(t,r["Component"]),n=t,(i=[{key:"generateColumns",value:function(){var e=this;this._columns={},this._columns[Wt.NAME]={name:"Pathway name",render:function(t){var n=t.name,o=n.length<20;return r.createElement(Et.Radio,{style:{marginTop:0,marginBottom:0},checked:e.props.selectedPathway===t.name,onChange:function(n){e.props.changePathway(t.name)}},r.createElement(g.c,{overlay:n,disabled:o},r.createElement("b",null,o?n:n.substring(0,20)+"...")))},tooltip:r.createElement("span",null,"Pathway name"),filter:function(e,t,n){return e.name.toUpperCase().includes(n)},sortBy:function(e){return e.name},download:function(e){return e.name}},this._columns[Wt.SCORE]={name:"Score",render:function(e){return r.createElement("span",null,r.createElement("b",null,e.score.toFixed(2)))},tooltip:r.createElement("span",null,"Score"),filter:function(e,t,n){return(e.score+"").includes(n)},sortBy:function(e){return e.score},download:function(e){return e.score+""}},this._columns[Wt.GENES]={name:"Genes matched",render:function(e){var t=e.genes.join(" ").length;return r.createElement(g.c,{overlay:e.genes.join(" "),disabled:t<20},r.createElement("span",null,function(e,t){var n=0,r="",o=!0,i=!1,a=void 0;try{for(var s,l=e[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var u=s.value;if(!((n+=u.length)<t))return r+"...";r+=u+" ",n++}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}return r.trim()}(e.genes,20)))},tooltip:r.createElement("span",null,"Genes matched"),sortBy:function(e){return e.genes.length},download:function(e){return e.genes.toString()}}}},{key:"componentWillUpdate",value:function(e){var t,n,r,i,a,s;this.dataStore.page=(t=e.data,n=this.dataStore,r=e.selectedPathway,i=Object(Gt.c)(t,n.sortMetric,n.sortAscending),a=Object(Gt.d)(i,n.filterString,n.getFilter()),(s=o.findIndex(a,function(e){return e.name===r}))>=0?Math.floor(s/(n.itemsPerPage||10)):0)}},{key:"render",value:function(){var e=o.sortBy(this._columns);return r.createElement($t,{columns:e,dataStore:this.dataStore,initialItemsPerPage:10,initialSortColumn:this.props.initialSortColumn,initialSortDirection:"desc",paginationProps:{itemsPerPageOptions:[10]},showColumnVisibility:!1})}}])&&Ft(n.prototype,i),a&&Ft(n,a),t}();Qt.defaultProps={columns:[Wt.NAME,Wt.SCORE,Wt.GENES],initialSortColumn:"Score"},Kt([p.observable],Qt.prototype,"_columns",void 0),Kt([p.observable],Qt.prototype,"selectedPathway",void 0);var Yt=Qt=Kt([c.observer],Qt),Xt=n(572),Zt=n(624),Jt=(n(1028),n(1067)),en=n(742),tn=n(1009),nn=n(597);function rn(e,t,n,r,o,i,a,s,l){var u="sample"===s?"SAMPLE_DATA_":"PATIENT_DATA_";Ee()(function(e,t,n,r,o,i,a,s,l){function u(e,t){return"".concat(e," (").concat(t,")")}var c=i.map(a),p={CLINICAL:{},CNA:{},MUTATIONS:{},MRNA:{},PROTEIN:{},FUSION:{}},d={amp:"Amplification",gain:"Gain",hetloss:"Shallow Deletion",homdel:"Deep Deletion"},f={};f=l?{inframe:"Inframe Mutation (putative passenger)",inframe_rec:"Inframe Mutation (putative driver)",missense:"Missense Mutation (putative passenger)",missense_rec:"Missense Mutation (putative driver)",promoter:"Promoter Mutation",promoter_rec:"Promoter Mutation",trunc:"Truncating mutation (putative passenger)",trunc_rec:"Truncating mutation (putative driver)"}:{inframe:"Inframe Mutation",inframe_rec:"Inframe Mutation",missense:"Missense Mutation",missense_rec:"Missense Mutation",promoter:"Promoter Mutation",promoter_rec:"Promoter Mutation",trunc:"Truncating mutation",trunc_rec:"Truncating mutation"};var h={high:"mRNA High",low:"mRNA Low"},m={low:"Protein Low",high:"Protein High"},y={true:"Fusion"},g=!0,v=!1,b=void 0;try{for(var S,_=e[Symbol.iterator]();!(g=(S=_.next()).done);g=!0){var w=S.value.data,E=w[0].trackLabel;void 0===p.CNA[E]&&(p.CNA[E]={}),void 0===p.MUTATIONS[E]&&(p.MUTATIONS[E]={}),void 0===p.MRNA[E]&&(p.MRNA[E]={}),void 0===p.PROTEIN[E]&&(p.PROTEIN[E]={}),void 0===p.FUSION[E]&&(p.FUSION[E]={});var O=!0,C=!1,P=void 0;try{for(var x,T=w[Symbol.iterator]();!(O=(x=T.next()).done);O=!0){var k=x.value,A="sample"===s?k.sample:k.patient;p.CNA[E][A]="",p.MUTATIONS[E][A]="",p.MRNA[E][A]="",p.PROTEIN[E][A]="",p.FUSION[E][A]="",void 0!==k.disp_cna&&(p.CNA[E][A]=d[k.disp_cna]?d[k.disp_cna]:k.disp_cna),void 0!==k.disp_fusion&&(p.FUSION[E][A]=y[k.disp_fusion+""]?y[k.disp_fusion+""]:k.disp_fusion),void 0!==k.disp_mrna&&(p.MRNA[E][A]=h[k.disp_mrna]?h[k.disp_mrna]:k.disp_mrna),void 0!==k.disp_prot&&(p.PROTEIN[E][A]=m[k.disp_prot]?m[k.disp_prot]:k.disp_prot),void 0!==k.disp_mut&&(p.MUTATIONS[E][A]=f[k.disp_mut]?f[k.disp_mut]:k.disp_mut)}}catch(e){C=!0,P=e}finally{try{O||null==T.return||T.return()}finally{if(C)throw P}}}}catch(e){v=!0,b=e}finally{try{g||null==_.return||_.return()}finally{if(v)throw b}}var I=!0,D=!1,M=void 0;try{for(var j,N=t[Symbol.iterator]();!(I=(j=N.next()).done);I=!0){var R=j.value,L=R.data,G=R.label;if("counts"===R.datatype){var F=!0,B=!1,V=void 0;try{for(var z,q=R.countsCategoryLabels[Symbol.iterator]();!(F=(z=q.next()).done);F=!0){var U=u(G,z.value);p.CLINICAL[U]=p.CLINICAL[U]||{}}}catch(e){B=!0,V=e}finally{try{F||null==q.return||q.return()}finally{if(B)throw V}}}else void 0===p.CLINICAL[G]&&(p.CLINICAL[G]={});var H=!0,W=!1,K=void 0;try{for(var $,Q=L[Symbol.iterator]();!(H=($=Q.next()).done);H=!0){var Y=$.value,X="sample"===s?Y.sample:Y.patient;if("counts"===R.datatype){var Z=!0,J=!1,ee=void 0;try{for(var te,ne=R.countsCategoryLabels[Symbol.iterator]();!(Z=(te=ne.next()).done);Z=!0){var re=te.value;p.CLINICAL[u(G,re)][X]=Y.attr_val?Y.attr_val[re]:""}}catch(e){J=!0,ee=e}finally{try{Z||null==ne.return||ne.return()}finally{if(J)throw ee}}}else p.CLINICAL[G][X]="",p.CLINICAL[G][X]=Object(nn.a)(Y.attr_val,"")}}catch(e){W=!0,K=e}finally{try{H||null==Q.return||Q.return()}finally{if(W)throw K}}}}catch(e){D=!0,M=e}finally{try{I||null==N.return||N.return()}finally{if(D)throw M}}var oe=n.concat(r).concat(o),ie=!0,ae=!1,se=void 0;try{for(var le,ue=oe[Symbol.iterator]();!(ie=(le=ue.next()).done);ie=!0){var ce=le.value,pe=ce.label,de="HEATMAP "+ce.molecularAlterationType+" "+ce.datatype,fe=ce.data,he=!0,me=!1,ye=void 0;try{for(var ge,ve=fe[Symbol.iterator]();!(he=(ge=ve.next()).done);he=!0){var be=ge.value;void 0===p[de]&&(p[de]={}),void 0===p[de][pe]&&(p[de][pe]={});var Se="sample"===s?be.sample:be.patient;p[de][pe][Se]=null===be.profile_data?"":be.profile_data}}catch(e){me=!0,ye=e}finally{try{he||null==ve.return||ve.return()}finally{if(me)throw ye}}}}catch(e){ae=!0,se=e}finally{try{ie||null==ue.return||ue.return()}finally{if(ae)throw se}}for(var _e="track_name\ttrack_type",we=0;we<c.length;we++)_e+="\t"+c[we];return _e+="\n",Object.keys(p).forEach(function(e){Object.keys(p[e]).forEach(function(t){_e+=t+"\t"+e;for(var n=0;n<c.length;n++)_e+="\t"+p[e][t][c[n]];_e+="\n"})}),_e}(e,t,n,r,o,i,a,s,l),u+"oncoprint.tsv")}var on=n(592),an=n(664),sn=n(870),ln=n(619),un=n(598),cn=n(825),pn=n(611);function dn(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var fn={missense:d.a.MUTATION_EXTENDED,inframe:d.a.MUTATION_EXTENDED,fusion:d.a.FUSION,promoter:d.a.MUTATION_EXTENDED,trunc:d.a.MUTATION_EXTENDED,other:d.a.MUTATION_EXTENDED,amp:d.a.COPY_NUMBER_ALTERATION,homdel:d.a.COPY_NUMBER_ALTERATION,gain:d.a.COPY_NUMBER_ALTERATION,hetloss:d.a.COPY_NUMBER_ALTERATION,mrnaHigh:d.a.MRNA_EXPRESSION,mrnaLow:d.a.MRNA_EXPRESSION,protHigh:d.a.PROTEIN_LEVEL,protLow:d.a.PROTEIN_LEVEL};function hn(e,t){var n=function(e){var t=null;switch(e.molecularProfileAlterationType){case d.a.MUTATION_EXTENDED:t=Object(ln.b)(e);break;case d.a.COPY_NUMBER_ALTERATION:t=un.a[e.value];break;case d.a.MRNA_EXPRESSION:"high"===e.alterationSubType?t="mrnaHigh":"low"===e.alterationSubType&&(t="mrnaLow");break;case d.a.PROTEIN_LEVEL:"high"===e.alterationSubType?t="protHigh":"low"===e.alterationSubType&&(t="protLow")}return t}(e);if(n){var r={};return r.sampleId=t,r.hugoGeneSymbol=e.hugoGeneSymbol,r.alteration=n,r.proteinChange=e.proteinChange,r.isGermline=!Object(S.n)(e),r.isCustomDriver=e.driverFilter===pn.d,r}return{sampleId:t}}function mn(e){var t=[e.sampleId];if(Object(sn.l)(e))switch(t.push(e.hugoGeneSymbol),fn[e.alteration]){case d.a.MUTATION_EXTENDED:t.push(e.proteinChange||"mutation"),t.push(e.alteration.toUpperCase()+(e.isGermline?"_GERMLINE":"")+(e.isCustomDriver?"_DRIVER":""));break;case d.a.COPY_NUMBER_ALTERATION:t.push(e.alteration.toUpperCase()),t.push("CNA");break;case d.a.MRNA_EXPRESSION:t.push("mrnaHigh"===e.alteration?"HIGH":"LOW"),t.push("EXP");break;case d.a.PROTEIN_LEVEL:t.push("protHigh"===e.alteration?"HIGH":"LOW"),t.push("PROT");break;case d.a.FUSION:t.push(e.proteinChange||"fusion"),t.push("FUSION")}return t.join("  ")}function yn(e){return e.replace(/\s+/g,"_")}function gn(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function vn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bn(e){return(bn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _n(e,t){return(_n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wn(e){return(wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var En,On=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":wn(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Cn=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};!function(e){e.CASE_ID="case_id",e.CASE_LIST="case_list",e.NONE=""}(En||(En={}));var Pn=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t){return!t||"object"!==wn(t)&&"function"!=typeof t?Sn(e):t}(this,bn(t).call(this,e))).distinguishGermlineMutations=!0,n.distinguishMutationType=!0,n.showUnalteredColumns=!0,n.showWhitespaceBetweenColumns=!0,n.showClinicalTrackLegends=!0,n._onlyShowClinicalLegendForAlteredCases=!1,n.showOqlInLabels=!1,n.showMinimap=!1,n.selectedHeatmapProfileId="",n.heatmapGeneInputValue="",n.horzZoom=.5,n.mouseInsideBounds=!1,n.renderingComplete=!1,n.molecularProfileIdToHeatmapTrackGroupIndex={},n.expansionsByGeneticTrackKey=p.observable.map(),n.expansionsByGenesetHeatmapTrackKey=p.observable.map(),n.unalteredKeys=Object(g.S)({await:function(){return[n.geneticTracks]},invoke:function(){return Cn(Sn(n),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(Zt.i)(this.geneticTracks.result));case 1:case"end":return e.stop()}},e,this)}))}}),n.genericAssayEntitiesSelectOptionsGroupByGenericAssayType=Object(g.S)({await:function(){return[n.props.store.genericAssayEntitiesGroupByGenericAssayType]},invoke:function(){return Cn(Sn(n),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve(Object(an.c)(this.props.store.genericAssayEntitiesGroupByGenericAssayType.result)));case 1:case"end":return e.stop()}},e,this)}))}}),n.genericAssayEntitiesSelectOptionsGroupByMolecularProfileId=Object(g.S)({await:function(){return[n.props.store.genericAssayEntitiesGroupByMolecularProfileId]},invoke:function(){return Cn(Sn(n),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve(Object(an.c)(this.props.store.genericAssayEntitiesGroupByMolecularProfileId.result)));case 1:case"end":return e.stop()}},e,this)}))}}),n.alteredKeys=Object(g.S)({await:function(){return[n.geneticTracks]},invoke:function(){return Cn(Sn(n),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(Zt.d)(this.geneticTracks.result));case 1:case"end":return e.stop()}},e,this)}))},default:[]}),n.sampleGeneticTracks=Object(Zt.n)(Sn(n),!0),n.patientGeneticTracks=Object(Zt.n)(Sn(n),!1),n.sampleClinicalTracks=Object(Zt.j)(Sn(n),!0),n.patientClinicalTracks=Object(Zt.j)(Sn(n),!1),n.sampleHeatmapTracks=Object(Zt.o)(Sn(n),!0),n.patientHeatmapTracks=Object(Zt.o)(Sn(n),!1),n.samplegGenericAssayHeatmapTracks=Object(Zt.k)(Sn(n),!0),n.patientGenericAssayHeatmapTracks=Object(Zt.k)(Sn(n),!1),n.sampleGenesetHeatmapTracks=Object(Zt.m)(Sn(n),!0,Object(Zt.l)(Sn(n),!0)),n.patientGenesetHeatmapTracks=Object(Zt.m)(Sn(n),!1,Object(Zt.l)(Sn(n),!1)),n.heatmapTrackHeaders=Object(g.S)({await:function(){return[n.props.store.molecularProfileIdToMolecularProfile]},invoke:function(){var e=n.props.store.molecularProfileIdToMolecularProfile.result;return Promise.resolve(i.a.reduce(n.molecularProfileIdToHeatmapTracks,function(t,r){return t[r.trackGroupIndex]={label:{text:e[r.molecularProfileId].name},options:[{label:"Cluster",onClick:n.clusterHeatmapByIndex,weight:function(){return n.clusteredHeatmapTrackGroupIndex===r.trackGroupIndex?"bold":"normal"}},{label:"Don't cluster",onClick:function(){n.clusteredHeatmapTrackGroupIndex===r.trackGroupIndex&&n.sortByData()},weight:function(){return n.clusteredHeatmapTrackGroupIndex===r.trackGroupIndex?"normal":"bold"}},{separator:!0},{label:"Delete",onClick:n.removeHeatmapByIndex}]},t},{}))},default:{}}),n.alterationTypesInQuery=Object(g.S)({await:function(){return[n.props.store.selectedMolecularProfiles]},invoke:function(){return Promise.resolve(i.a.uniq(n.props.store.selectedMolecularProfiles.result.map(function(e){return e.molecularAlterationType})))}}),n.loadingGeneticDataDuringCurrentLoad=!1,n.loadingClinicalDataDuringCurrentLoad=!1,n.showOqlInLabels=e.store.queryContainsOql,window.resultsViewOncoprint=Sn(n);var r=Sn(n);return n.onChangeSelectedClinicalTracks=n.onChangeSelectedClinicalTracks.bind(Sn(n)),n.onDeleteClinicalTrack=n.onDeleteClinicalTrack.bind(Sn(n)),n.onMinimapClose=n.onMinimapClose.bind(Sn(n)),n.oncoprintRef=n.oncoprintRef.bind(Sn(n)),n.toggleColumnMode=n.toggleColumnMode.bind(Sn(n)),n.onTrackSortDirectionChange=n.onTrackSortDirectionChange.bind(Sn(n)),n.onSuppressRendering=n.onSuppressRendering.bind(Sn(n)),n.onReleaseRendering=n.onReleaseRendering.bind(Sn(n)),Object(ut.a)(n.props.store.heatmapMolecularProfiles,function(e){e.length&&(n.selectedHeatmapProfileId=e[0].molecularProfileId)}),n.heatmapGeneInputValueUpdater=Object(ut.a)(n.props.store.genes,function(e){n.heatmapGeneInputValue=e.map(function(e){return e.hugoGeneSymbol}).join(" ")},Number.POSITIVE_INFINITY),n.onMouseEnter=n.onMouseEnter.bind(Sn(n)),n.onMouseLeave=n.onMouseLeave.bind(Sn(n)),n.controlsHandlers=n.buildControlsHandlers(),n.controlsState=Object(p.observable)({get selectedClinicalAttributeIds(){return r.selectedClinicalAttributeIds.keys()},get selectedColumnType(){return r.oncoprintAnalysisCaseType},get showUnalteredColumns(){return r.showUnalteredColumns},get showWhitespaceBetweenColumns(){return r.showWhitespaceBetweenColumns},get showClinicalTrackLegends(){return r.showClinicalTrackLegends},get onlyShowClinicalLegendForAlteredCases(){return r.onlyShowClinicalLegendForAlteredCases},get showOqlInLabels(){return r.showOqlInLabels},get showMinimap(){return r.showMinimap},get hideHeatmapMenu(){return r.props.store.studies.result.length>1},get sortByMutationType(){return r.sortByMutationType},get sortByCaseListDisabled(){return!r.caseListSortPossible},get distinguishMutationType(){return r.distinguishMutationType},get distinguishDrivers(){return r.distinguishDrivers},get distinguishGermlineMutations(){return r.distinguishGermlineMutations},get annotateDriversOncoKb(){return r.props.store.driverAnnotationSettings.oncoKb},get annotateDriversOncoKbDisabled(){return!le.b.serverConfig.show_oncokb},get annotateDriversOncoKbError(){return r.props.store.didOncoKbFailInOncoprint},get annotateDriversHotspots(){return r.props.store.driverAnnotationSettings.hotspots},get annotateDriversHotspotsDisabled(){return!le.b.serverConfig.show_hotspot},get annotateDriversHotspotsError(){return r.props.store.didHotspotFailInOncoprint},get annotateDriversCBioPortal(){return r.props.store.driverAnnotationSettings.cbioportalCount},get annotateDriversCOSMIC(){return r.props.store.driverAnnotationSettings.cosmicCount},get hidePutativePassengers(){return r.props.store.driverAnnotationSettings.excludeVUS},get hideGermlineMutations(){return r.props.store.excludeGermlineMutations},get annotateCBioPortalInputValue(){return r.props.store.driverAnnotationSettings.cbioportalCountThreshold+""},get annotateCOSMICInputValue(){return r.props.store.driverAnnotationSettings.cosmicCountThreshold+""},get sortMode(){return r.sortMode},get sortByDrivers(){return r.sortByDrivers},get heatmapProfilesPromise(){return r.props.store.heatmapMolecularProfiles},get genericAssayEntitiesGroupByGenericAssayTypePromise(){return r.props.store.genericAssayEntitiesGroupByGenericAssayType},get selectedHeatmapProfileId(){return r.selectedHeatmapProfileId},get selectedHeatmapProfileAlterationType(){return r.selectedHeatmapProfileAlterationType},get selectedHeatmapProfileGenericAssayType(){return r.selectedHeatmapProfileGenericAssayType},get heatmapIsDynamicallyQueried(){return r.heatmapIsDynamicallyQueried},get ngchmButtonActive(){return!(!le.b.serverConfig.show_mdacc_heatmap||!r.props.store.remoteNgchmUrl.result||""==r.props.store.remoteNgchmUrl.result)},get heatmapGeneInputValue(){return r.heatmapGeneInputValue},get customDriverAnnotationBinaryMenuLabel(){var e=le.b.serverConfig.oncoprint_custom_driver_annotation_binary_menu_label,t=r.props.store.customDriverAnnotationReport.result;return e&&t&&t.hasBinary?e:void 0},get customDriverAnnotationTiersMenuLabel(){var e=le.b.serverConfig.oncoprint_custom_driver_annotation_tiers_menu_label,t=r.props.store.customDriverAnnotationReport.result;return e&&t&&t.tiers.length?e:void 0},get customDriverAnnotationTiers(){var e=r.props.store.customDriverAnnotationReport.result;return e&&e.tiers.length?e.tiers:void 0},get annotateCustomDriverBinary(){return r.props.store.driverAnnotationSettings.customBinary},get selectedCustomDriverAnnotationTiers(){return r.props.store.driverAnnotationSettings.driverTiers},get columnMode(){return r.oncoprintAnalysisCaseType},get horzZoom(){return isNaN(r.horzZoom)?1:r.horzZoom}}),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_n(e,t)}(t,r["Component"]),n=t,(o=[{key:"onMouseEnter",value:function(){this.mouseInsideBounds=!0}},{key:"onMouseLeave",value:function(){this.mouseInsideBounds=!1}},{key:"selectHeatmapProfile",value:function(e){var t=this;Object(ut.a)(this.props.store.heatmapMolecularProfiles,function(n){t.selectedHeatmapProfileId=t.props.store.heatmapMolecularProfiles.result[e].molecularProfileId})}},{key:"setAnnotateCBioPortalInputValue",value:function(e){this.controlsHandlers.onChangeAnnotateCBioPortalInputValue&&this.controlsHandlers.onChangeAnnotateCBioPortalInputValue(e)}},{key:"setAnnotateCOSMICInputValue",value:function(e){this.controlsHandlers.onChangeAnnotateCOSMICInputValue&&this.controlsHandlers.onChangeAnnotateCOSMICInputValue(e)}},{key:"buildControlsHandlers",value:function(){var e=this;return{onSelectColumnType:function(t){e.props.store.setOncoprintAnalysisCaseType(t)},onSelectShowUnalteredColumns:function(t){e.showUnalteredColumns=t},onSelectShowWhitespaceBetweenColumns:function(t){e.showWhitespaceBetweenColumns=t},onSelectShowClinicalTrackLegends:function(t){e.showClinicalTrackLegends=t},onSelectOnlyShowClinicalLegendForAlteredCases:function(t){e._onlyShowClinicalLegendForAlteredCases=t},onSelectShowOqlInLabels:function(t){e.showOqlInLabels=t},onSelectShowMinimap:function(t){e.showMinimap=t},onSelectDistinguishMutationType:function(t){e.distinguishMutationType=t},onSelectDistinguishDrivers:Object(p.action)(function(t){t?(e.controlsState.annotateDriversOncoKbDisabled||e.controlsState.annotateDriversOncoKbError||(e.props.store.driverAnnotationSettings.oncoKb=!0),e.controlsState.annotateDriversHotspotsDisabled||e.controlsState.annotateDriversHotspotsError||(e.props.store.driverAnnotationSettings.hotspots=!0),e.props.store.driverAnnotationSettings.cbioportalCount=!0,e.props.store.driverAnnotationSettings.cosmicCount=!0,e.props.store.driverAnnotationSettings.customBinary=!0,e.props.store.driverAnnotationSettings.driverTiers.forEach(function(t,n){e.props.store.driverAnnotationSettings.driverTiers.set(n,!0)})):(e.props.store.driverAnnotationSettings.oncoKb=!1,e.props.store.driverAnnotationSettings.hotspots=!1,e.props.store.driverAnnotationSettings.cbioportalCount=!1,e.props.store.driverAnnotationSettings.cosmicCount=!1,e.props.store.driverAnnotationSettings.customBinary=!1,e.props.store.driverAnnotationSettings.driverTiers.forEach(function(t,n){e.props.store.driverAnnotationSettings.driverTiers.set(n,!1)}),e.props.store.driverAnnotationSettings.excludeVUS=!1)}),onSelectDistinguishGermlineMutations:function(t){e.distinguishGermlineMutations=t},onSelectAnnotateOncoKb:Object(p.action)(function(t){e.props.store.driverAnnotationSettings.oncoKb=t}),onSelectAnnotateHotspots:Object(p.action)(function(t){e.props.store.driverAnnotationSettings.hotspots=t}),onSelectAnnotateCBioPortal:Object(p.action)(function(t){e.props.store.driverAnnotationSettings.cbioportalCount=t}),onSelectAnnotateCOSMIC:Object(p.action)(function(t){e.props.store.driverAnnotationSettings.cosmicCount=t}),onChangeAnnotateCBioPortalInputValue:Object(p.action)(function(t){e.props.store.driverAnnotationSettings.cbioportalCountThreshold=parseInt(t,10),e.controlsHandlers.onSelectAnnotateCBioPortal&&e.controlsHandlers.onSelectAnnotateCBioPortal(!0)}),onChangeAnnotateCOSMICInputValue:Object(p.action)(function(t){e.props.store.driverAnnotationSettings.cosmicCountThreshold=parseInt(t,10),e.controlsHandlers.onSelectAnnotateCOSMIC&&e.controlsHandlers.onSelectAnnotateCOSMIC(!0)}),onSelectCustomDriverAnnotationBinary:Object(p.action)(function(t){e.props.store.driverAnnotationSettings.customBinary=t}),onSelectCustomDriverAnnotationTier:Object(p.action)(function(t,n){e.props.store.driverAnnotationSettings.driverTiers.set(t,n)}),onSelectHidePutativePassengers:function(t){e.props.store.driverAnnotationSettings.excludeVUS=t},onSelectHideGermlineMutations:function(t){e.props.store.setExcludeGermlineMutations(t)},onSelectSortByMutationType:function(t){e.urlWrapper.updateURL({oncoprint_sort_by_mutation_type:t.toString()})},onClickSortAlphabetical:function(){e.urlWrapper.updateURL({oncoprint_sortby:"case_id",oncoprint_cluster_profile:""})},onClickSortCaseListOrder:function(){e.urlWrapper.updateURL({oncoprint_sortby:"case_list",oncoprint_cluster_profile:""})},onSelectSortByDrivers:function(t){e.urlWrapper.updateURL({oncoprint_sort_by_drivers:t.toString()})},onClickSortByData:function(){e.urlWrapper.updateURL({oncoprint_sortby:"",oncoprint_cluster_profile:""})},onChangeSelectedClinicalTracks:this.onChangeSelectedClinicalTracks,onChangeHeatmapGeneInputValue:Object(p.action)(function(t){e.heatmapGeneInputValue=t,e.heatmapGeneInputValueUpdater()}),onSelectHeatmapProfile:function(t){e.selectedHeatmapProfileId=t},onClickAddGenesToHeatmap:function(){var t=Object(Ue.g)(e.heatmapGeneInputValue.toUpperCase().trim()).map(function(e){return e.gene});e.addHeatmapTracks(e.selectedHeatmapProfileId,t)},onClickAddGenericAssaysToHeatmap:function(t){e.addHeatmapTracks(e.selectedHeatmapProfileId,t)},onClickNGCHM:function(){window.open(e.props.store.remoteNgchmUrl.result,"_blank")},onClickDownload:function(t){switch(t){case"pdf":Object(g.Z)("oncoprint.pdf",e.oncoprint.toSVG(!1));break;case"png":e.oncoprint.toCanvas(function(e,t){e.toBlob(function(n){t&&alert("Oncoprint too large - PNG truncated to ".concat(e.getAttribute("width"),"x").concat(e.getAttribute("height"))),Ee()(n,"oncoprint.png")})},2);break;case"svg":Ee()((new XMLSerializer).serializeToString(e.oncoprint.toSVG(!1)),"oncoprint.svg");break;case"order":var n=Object(g.s)(e.oncoprintAnalysisCaseType);Object(ut.a)([e.props.store.sampleKeyToSample,e.props.store.patientKeyToPatient],function(t,r){var o="".concat(n," order in the Oncoprint is:\n"),i=(e.oncoprintAnalysisCaseType,Oe.b.SAMPLE,e.oncoprint.getIdOrder().map(e.oncoprintAnalysisCaseType===Oe.b.SAMPLE?function(e){return t[e].sampleId}:function(e){return r[e].patientId})),a=!0,s=!1,l=void 0;try{for(var u,c=i[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var p=u.value;o+="".concat(p,"\n")}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}Ee()(o,"OncoPrint".concat(n,"s.txt"))});break;case"tabular":Object(ut.a)([e.props.store.sampleKeyToSample,e.props.store.patientKeyToPatient],function(t,n){rn(e.geneticTracks.result,e.clinicalTracks.result,e.heatmapTracks.result,e.genericAssayHeatmapTracks.result,e.genesetHeatmapTracks.result,e.oncoprint.getIdOrder(),e.oncoprintAnalysisCaseType===Oe.b.SAMPLE?function(e){return t[e].sampleId}:function(e){return n[e].patientId},e.oncoprintAnalysisCaseType,e.distinguishDrivers)});break;case"oncoprinter":Object(ut.a)([e.props.store.samples,e.props.store.patients,e.geneticTracks,e.clinicalTracks,e.heatmapTracks,e.props.store.clinicalAttributeIdToClinicalAttribute],function(t,n,r,o,a,s){var l=e.oncoprintAnalysisCaseType===Oe.b.SAMPLE?t.map(function(e){return e.sampleId}):n.map(function(e){return e.patientId}),u="";r.length>0&&(u=function(e,t,n){var r=[],o=!0,i=!1,a=void 0;try{for(var s,l=function(){var e=s.value;r.push.apply(r,dn(e.data.map(function(t){return hn(t,e[n])})))},u=e[Symbol.iterator]();!(o=(s=u.next()).done);o=!0)l()}catch(e){i=!0,a=e}finally{try{o||null==u.return||u.return()}finally{if(i)throw a}}return r.map(mn).concat(t).join("\n")}(i.a.flatMap(r,function(e){return e.data}),l,e.oncoprintAnalysisCaseType));var c="";o.length>0&&(c=function(e,t,n,r,o){var a=i.a.groupBy(e,function(e){return e[o]}),s=[];s.push(["Sample"].concat(n.map(function(e){var t=r[e],n=yn(t.displayName),o=t.datatype.toLowerCase();return"MUTATION_COUNT"===t.clinicalAttributeId&&(o=cn.a.LOG_NUMBER),t.clinicalAttributeId===on.c.MutationSpectrum&&(o=on.a.join("/")),"".concat(n,"(").concat(o,")")})));var l=!0,u=!1,c=void 0;try{for(var p,d=function(){var e=p.value;s.push([e].concat(n.map(function(t){var n=a[e]&&a[e].find(function(e){return e.attr_id===t});return n&&!n.na&&n.attr_val?t===on.c.MutationSpectrum?on.a.map(function(e){return n.attr_val[e]}).join("/"):yn(n.attr_val.toString()):cn.b})))},f=t[Symbol.iterator]();!(l=(p=f.next()).done);l=!0)d()}catch(e){u=!0,c=e}finally{try{l||null==f.return||f.return()}finally{if(u)throw c}}return s.map(function(e){return e.join("  ")}).join("\n")}(i.a.flatMap(o,function(e){return e.data}),l,o.map(function(e){return e.attributeId}),s,e.oncoprintAnalysisCaseType));e.heatmapTracks.result.length>0&&alert("Note: heatmap tracks are not currently supported in Oncoprinter."),window.open(Object(pe.b)("/oncoprinter")).clientPostedData={genetic:u,clinical:c}})}},onSetHorzZoom:function(t){e.oncoprint.setHorzZoomCentered(t)},onClickZoomIn:function(){e.oncoprint.setHorzZoomCentered(e.oncoprint.getHorzZoom()/.7)},onClickZoomOut:function(){e.oncoprint.setHorzZoomCentered(.7*e.oncoprint.getHorzZoom())}}}},{key:"sortByData",value:function(){this.urlWrapper.updateURL({oncoprint_sortby:"",oncoprint_cluster_profile:""})}},{key:"addHeatmapTracks",value:function(e,t){var n=i.a.cloneDeep(this.molecularProfileIdToHeatmapTracks),r=i.a.chain(t).keyBy(function(e){return e}).mapValues(function(){return!0}).value();delete n[e];var o=this.props.store.molecularProfileIdToMolecularProfile.result[e].molecularAlterationType;t&&t.length?n[e]={entities:r,molecularAlterationType:o,molecularProfileId:e}:delete n[e];var a=i.a.map(n,function(e,t){return"".concat(t,",").concat(i.a.keys(e.entities).join(","))}).join(";"),s=i.a.filter(n,function(e){return e.molecularAlterationType===d.a.GENERIC_ASSAY}).map(function(e){return"".concat(e.molecularProfileId,",").concat(i.a.keys(e.entities).join(","))}).join(";");this.urlWrapper.updateURL({heatmap_track_groups:a,generic_assay_groups:s})}},{key:"removeHeatmapTracksByProfileId",value:function(e){this.addHeatmapTracks}},{key:"toggleColumnMode",value:function(){switch(this.oncoprintAnalysisCaseType){case Oe.b.SAMPLE:this.controlsHandlers.onSelectColumnType&&this.controlsHandlers.onSelectColumnType(Oe.b.PATIENT);break;case Oe.b.PATIENT:this.controlsHandlers.onSelectColumnType&&this.controlsHandlers.onSelectColumnType(Oe.b.SAMPLE)}}},{key:"oncoprintRef",value:function(e){var t=this;this.oncoprint=e,this.props.addOnBecomeVisibleListener&&this.props.addOnBecomeVisibleListener(function(){return t.oncoprint.triggerPendingResizeAndOrganize(t.onReleaseRendering)}),this.oncoprint.onHorzZoom(function(e){return t.horzZoom=e}),this.horzZoom=this.oncoprint.getHorzZoom(),Object(ut.a)(this.alteredKeys,function(e){t.oncoprint.setHorzZoomToFit(e)})}},{key:"setColumnMode",value:function(e){this.urlWrapper.updateURL({show_samples:e===Oe.b.SAMPLE?"true":"false"})}},{key:"onMinimapClose",value:function(){this.showMinimap=!1}},{key:"onSuppressRendering",value:function(){this.renderingComplete=!1}},{key:"onReleaseRendering",value:function(){this.renderingComplete=!0}},{key:"clinicalTrackKeyToAttributeId",value:function(e){return e.substr("CLINICALTRACK_".length)}},{key:"clinicalAttributeIdToTrackKey",value:function(e){return"".concat("CLINICALTRACK_").concat(e)}},{key:"onChangeSelectedClinicalTracks",value:function(e){this.urlWrapper.updateURL({clinicallist:e.join(",")})}},{key:"onDeleteClinicalTrack",value:function(e){var t=this;if(!this.isHidden){var n=this.selectedClinicalAttributeIds.keys(),r=i.a.filter(n,function(n){return n!==t.clinicalTrackKeyToAttributeId(e)});this.urlWrapper.updateURL({clinicallist:r.join(",")})}}},{key:"onTrackSortDirectionChange",value:function(e,t){1!==t&&-1!==t||this.sortByData()}},{key:"clearSortDirectionsAndSortByData",value:function(){this.oncoprint&&(this.oncoprint.resetSortableTracksSortDirection(),this.sortByData())}},{key:"clusterHeatmapByIndex",value:function(e){this.oncoprint&&this.oncoprint.resetSortableTracksSortDirection();var t=i.a.values(this.molecularProfileIdToHeatmapTracks).find(function(t){return t.trackGroupIndex===e});t&&this.urlWrapper.updateURL({oncoprint_sortby:"cluster",oncoprint_cluster_profile:t.molecularProfileId})}},{key:"removeHeatmapByIndex",value:function(e){var t=i.a.values(this.molecularProfileIdToHeatmapTracks).find(function(t){return t.trackGroupIndex===e});t&&this.removeHeatmapByMolecularProfileId(t.molecularProfileId)}},{key:"removeHeatmapByMolecularProfileId",value:function(e){delete this.molecularProfileIdToHeatmapTrackGroupIndex[e],this.addHeatmapTracks(e,[])}},{key:"getControls",value:function(){return this.oncoprint&&!this.oncoprint.webgl_unavailable&&this.props.store.molecularProfileIdToMolecularProfile.result?r.createElement(g.h,{showByDefault:!0,show:!0},r.createElement(tn.a,{handlers:this.controlsHandlers,state:this.controlsState,store:this.props.store,molecularProfileIdToMolecularProfile:this.props.store.molecularProfileIdToMolecularProfile.result,genericAssayEntitiesSelectOptionsGroupByGenericAssayTypePromise:this.genericAssayEntitiesSelectOptionsGroupByGenericAssayType,genericAssayEntitiesSelectOptionsGroupByMolecularProfileIdPromise:this.genericAssayEntitiesSelectOptionsGroupByMolecularProfileId,selectedGenericAssayEntitiesGroupByGenericAssayTypeFromUrl:this.selectedGenericAssayEntitiesGroupByGenericAssayTypeFromUrl})):r.createElement("span",null)}},{key:"getProgressItems",value:function(e){0===e&&(this.loadingGeneticDataDuringCurrentLoad=!1,this.loadingClinicalDataDuringCurrentLoad=!1);var t=i.a.some(this.selectedClinicalAttributeIds.keys(),function(e){return!Object(on.e)({clinicalAttributeId:e})});this.geneticTracks.isPending&&(this.loadingGeneticDataDuringCurrentLoad=!0),t&&this.clinicalTracks.isPending&&(this.loadingClinicalDataDuringCurrentLoad=!0);var n,r=[];if(this.props.store.genes.isComplete&&this.props.store.samples.isComplete){var o=this.props.store.genes.result.length,a=this.props.store.samples.result.length;n="Querying ".concat(o," genes in ").concat(a," samples")}else n="Querying ... genes in ... samples";var s="";e>2&&(s=" - this can take several seconds"),r.push({label:"".concat(n).concat(s),promises:[],hideIcon:!0,style:{fontWeight:"bold"}});var l=[];this.loadingGeneticDataDuringCurrentLoad&&l.push("genetic"),this.loadingClinicalDataDuringCurrentLoad&&l.push("clinical"),r.push({label:"Loading ".concat(l.join(" and ")," data"),promises:[this.props.store.molecularData,this.props.store.mutations].concat(gn(t?[this.clinicalTracks]:[]))});var u=this.props.store.driverAnnotationSettings.oncoKb,c=this.props.store.driverAnnotationSettings.hotspots;return r.push({label:Object(an.d)(u,c),promises:[this.props.store.filteredAndAnnotatedMolecularData,this.props.store.filteredAndAnnotatedMutations]}),r.push({label:"Rendering"}),r}},{key:"render",value:function(){return r.createElement("div",{style:{position:"relative"}},r.createElement(lt.a,{isLoading:this.isHidden,size:"big",centerRelativeToContainer:!1,center:!0,className:"oncoprintLoadingIndicator"},r.createElement("div",null,r.createElement(kt.a,{getItems:this.getProgressItems,show:this.isHidden,sequential:!0}))),r.createElement("div",{className:"tabMessageContainer"},r.createElement(ue.a,{className:"oncoprint-oql-status-banner",store:this.props.store,tabReflectsOql:!0}),r.createElement(ce.a,{store:this.props.store})),r.createElement("div",{className:at()("oncoprintContainer",{fadeIn:!this.isHidden}),onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},r.createElement(c.Observer,null,this.getControls),r.createElement("div",{style:{position:"relative",marginTop:15}},r.createElement("div",null,r.createElement(en.c,{oncoprintRef:this.oncoprintRef,clinicalTracks:this.clinicalTracks.result,geneticTracks:this.geneticTracks.result,genesetHeatmapTracks:this.genesetHeatmapTracks.result,heatmapTracks:[].concat(this.genericAssayHeatmapTracks.result).concat(this.heatmapTracks.result),divId:this.props.divId,width:this.width,caseLinkOutInTooltips:!0,suppressRendering:this.isLoading,onSuppressRendering:this.onSuppressRendering,onReleaseRendering:this.onReleaseRendering,hiddenIds:this.showUnalteredColumns?void 0:this.unalteredKeys.result,molecularProfileIdToMolecularProfile:this.props.store.molecularProfileIdToMolecularProfile.result,alterationTypesInQuery:this.alterationTypesInQuery.result,showSublabels:this.showOqlInLabels,heatmapTrackHeaders:this.heatmapTrackHeaders.result,horzZoomToFitIds:this.alteredKeys.result,distinguishMutationType:this.distinguishMutationType,distinguishDrivers:this.distinguishDrivers,distinguishGermlineMutations:this.distinguishGermlineMutations,sortConfig:this.oncoprintLibrarySortConfig,showClinicalTrackLegends:this.showClinicalTrackLegends,showWhitespaceBetweenColumns:this.showWhitespaceBetweenColumns,showMinimap:this.showMinimap,onMinimapClose:this.onMinimapClose,onDeleteClinicalTrack:this.onDeleteClinicalTrack,onTrackSortDirectionChange:this.onTrackSortDirectionChange,initParams:{max_height:Number.POSITIVE_INFINITY}})))))}},{key:"columnMode",get:function(){return"true"===this.urlWrapper.query.show_samples?"sample":"patient"}},{key:"sortMode",get:function(){var e;switch(this.urlWrapper.query.oncoprint_sortby){case"case_id":e={type:"alphabetical"};break;case"case_list":e={type:"caseList"};break;case"cluster":e={type:"heatmap",clusteredHeatmapProfile:this.urlWrapper.query.oncoprint_cluster_profile};break;case"":default:e={type:"data"}}return e}},{key:"sortByMutationType",get:function(){return!this.urlWrapper.query.oncoprint_sort_by_mutation_type||"true"===this.urlWrapper.query.oncoprint_sort_by_mutation_type}},{key:"sortByDrivers",get:function(){return!this.urlWrapper.query.oncoprint_sort_by_drivers||"true"===this.urlWrapper.query.oncoprint_sort_by_drivers}},{key:"selectedGenericAssayEntitiesGroupByGenericAssayTypeFromUrl",get:function(){var e=this;return i.a.reduce(this.props.store.selectedGenericAssayEntities,function(t,n,r){if(e.props.store.molecularProfileIdToMolecularProfile.result[r]){var o=e.props.store.molecularProfileIdToMolecularProfile.result[r].genericAssayType;return t[o]=t[o]?i.a.union(n,t[o]):n,t}},{})}},{key:"onlyShowClinicalLegendForAlteredCases",get:function(){return this.showClinicalTrackLegends&&this._onlyShowClinicalLegendForAlteredCases}},{key:"selectedClinicalAttributeIds",get:function(){var e=this.urlWrapper.query.clinicallist?this.urlWrapper.query.clinicallist.split(","):[];return void 0===this.urlWrapper.query.clinicallist&&(this.props.store.studyIds.result&&this.props.store.studyIds.result.length>1&&e.push(on.c.StudyOfOrigin),this.props.store.samples.result&&this.props.store.patients.result&&this.props.store.samples.result.length>this.props.store.patients.result.length&&e.push(on.c.NumSamplesPerPatient),i.a.forEach(this.props.store.clinicalAttributes_profiledIn.result,function(t){e.push(t.clinicalAttributeId)})),e.reduce(function(e,t){return e.set(t,!0),e},p.observable.shallowMap())}},{key:"molecularProfileIdToHeatmapTracks",get:function(){var e,t=this,n=(this.urlWrapper.query.heatmap_track_groups?this.urlWrapper.query.heatmap_track_groups.split(";").map(function(e){return e.split(",")}):[]).reduce(function(e,t){return e[t[0]]=t.slice(1),e},{}),r={};return e=i.a.isEmpty(this.molecularProfileIdToHeatmapTrackGroupIndex)?2:Math.max.apply(Math,gn(i.a.values(this.molecularProfileIdToHeatmapTrackGroupIndex)))+1,i.a.forEach(n,function(n,o){var i=t.props.store.molecularProfileIdToMolecularProfile.result[o];if(i&&n&&n.length){i.molecularProfileId in t.molecularProfileIdToHeatmapTrackGroupIndex||(t.molecularProfileIdToHeatmapTrackGroupIndex[i.molecularProfileId]=e,e+=1);var a={trackGroupIndex:t.molecularProfileIdToHeatmapTrackGroupIndex[i.molecularProfileId],molecularProfileId:i.molecularProfileId,molecularAlterationType:i.molecularAlterationType,entities:{}};n.forEach(function(e){return a.entities[e]=!0}),r[o]=a}}),r}},{key:"urlWrapper",get:function(){return this.props.urlWrapper}},{key:"caseListSortPossible",get:function(){return!(!this.props.store.givenSampleOrder.isComplete||!this.props.store.givenSampleOrder.result.length)}},{key:"distinguishDrivers",get:function(){return this.props.store.driverAnnotationSettings.driversAnnotated}},{key:"heatmapIsDynamicallyQueried",get:function(){var e=this.props.store.molecularProfileIdToMolecularProfile.result;return e.hasOwnProperty(this.selectedHeatmapProfileId)&&e[this.selectedHeatmapProfileId].molecularAlterationType!==d.a.GENESET_SCORE}},{key:"clinicalTracksUrlParam",get:function(){return this.selectedClinicalAttributeIds.keys().join(",")}},{key:"selectedHeatmapProfileAlterationType",get:function(){var e=this.props.store.molecularProfileIdToMolecularProfile.result[this.selectedHeatmapProfileId];return e?e.molecularAlterationType:void 0}},{key:"selectedHeatmapProfileGenericAssayType",get:function(){if(this.props.store.molecularProfileIdToMolecularProfile.result&&this.selectedHeatmapProfileAlterationType===d.a.GENERIC_ASSAY)return this.props.store.molecularProfileIdToMolecularProfile.result[this.selectedHeatmapProfileId].genericAssayType}},{key:"oncoprintAnalysisCaseType",get:function(){return"true"===this.urlWrapper.query.show_samples?Oe.b.SAMPLE:Oe.b.PATIENT}},{key:"sortOrder",get:function(){return"alphabetical"===this.sortMode.type?this.oncoprintAnalysisCaseType===Oe.b.SAMPLE?this.alphabeticalSampleOrder:this.alphabeticalPatientOrder:"caseList"===this.sortMode.type?this.oncoprintAnalysisCaseType===Oe.b.SAMPLE&&this.props.store.givenSampleOrder.isComplete?this.props.store.givenSampleOrder.result.map(function(e){return e.uniqueSampleKey}):this.oncoprintAnalysisCaseType===Oe.b.PATIENT&&this.props.store.givenSampleOrder.isComplete?i.a.uniq(this.props.store.givenSampleOrder.result.map(function(e){return e.uniquePatientKey})):void 0:void 0}},{key:"alphabeticalSampleOrder",get:function(){return this.props.store.samples.isComplete?i.a.sortBy(this.props.store.samples.result,function(e){return e.sampleId}).map(function(e){return e.uniqueSampleKey}):void 0}},{key:"alphabeticalPatientOrder",get:function(){return this.props.store.patients.isComplete?i.a.sortBy(this.props.store.patients.result,function(e){return e.patientId}).map(function(e){return e.uniquePatientKey}):void 0}},{key:"geneticTracks",get:function(){return this.oncoprintAnalysisCaseType===Oe.b.SAMPLE?this.sampleGeneticTracks:this.patientGeneticTracks}},{key:"clinicalTracks",get:function(){return this.oncoprintAnalysisCaseType===Oe.b.SAMPLE?this.sampleClinicalTracks:this.patientClinicalTracks}},{key:"heatmapTracks",get:function(){return this.oncoprintAnalysisCaseType===Oe.b.SAMPLE?this.sampleHeatmapTracks:this.patientHeatmapTracks}},{key:"genericAssayHeatmapTracks",get:function(){return this.oncoprintAnalysisCaseType===Oe.b.SAMPLE?this.samplegGenericAssayHeatmapTracks:this.patientGenericAssayHeatmapTracks}},{key:"genesetHeatmapTrackGroup",get:function(){return 1+Math.max.apply(Math,[en.b].concat(gn(this.heatmapTracks.result.map(function(e){return e.trackGroupIndex})),gn(this.genericAssayHeatmapTracks.result.map(function(e){return e.trackGroupIndex}))))}},{key:"genesetHeatmapTracks",get:function(){return this.oncoprintAnalysisCaseType===Oe.b.SAMPLE?this.sampleGenesetHeatmapTracks:this.patientGenesetHeatmapTracks}},{key:"clusteredHeatmapTrackGroupIndex",get:function(){if("heatmap"===this.sortMode.type){var e=this.sortMode.clusteredHeatmapProfile;if(e===(this.props.store.genesetMolecularProfile.result&&this.props.store.genesetMolecularProfile.result.value&&this.props.store.genesetMolecularProfile.result.value.molecularProfileId))return this.genesetHeatmapTrackGroup;var t=this.molecularProfileIdToHeatmapTracks[e];return t&&t.trackGroupIndex}}},{key:"oncoprintLibrarySortConfig",get:function(){return{sortByMutationType:this.sortByMutationType,sortByDrivers:this.sortByDrivers,order:this.sortOrder,clusterHeatmapTrackGroupIndex:this.clusteredHeatmapTrackGroupIndex}}},{key:"isLoading",get:function(){return"pending"===Object(g.E)(this.clinicalTracks,this.geneticTracks,this.genesetHeatmapTracks,this.genericAssayHeatmapTracks,this.heatmapTracks,this.props.store.molecularProfileIdToMolecularProfile,this.alterationTypesInQuery,this.alteredKeys,this.heatmapTrackHeaders)}},{key:"isHidden",get:function(){return this.isLoading||!this.renderingComplete}},{key:"loadingIndicatorHeight",get:function(){return 300}},{key:"loadingIndicatorMessage",get:function(){return this.isLoading?"Downloading Oncoprint data...":this.renderingComplete?"":"Data downloaded. Rendering Oncoprint.."}},{key:"width",get:function(){return xt.a.size.width-75}}])&&vn(n.prototype,o),a&&vn(n,a),t}();On([p.computed],Pn.prototype,"columnMode",null),On([p.computed],Pn.prototype,"sortMode",null),On([p.computed],Pn.prototype,"sortByMutationType",null),On([p.computed],Pn.prototype,"sortByDrivers",null),On([p.computed],Pn.prototype,"selectedGenericAssayEntitiesGroupByGenericAssayTypeFromUrl",null),On([p.observable],Pn.prototype,"distinguishGermlineMutations",void 0),On([p.observable],Pn.prototype,"distinguishMutationType",void 0),On([p.observable],Pn.prototype,"showUnalteredColumns",void 0),On([p.observable],Pn.prototype,"showWhitespaceBetweenColumns",void 0),On([p.observable],Pn.prototype,"showClinicalTrackLegends",void 0),On([p.observable],Pn.prototype,"_onlyShowClinicalLegendForAlteredCases",void 0),On([p.observable],Pn.prototype,"showOqlInLabels",void 0),On([p.computed],Pn.prototype,"onlyShowClinicalLegendForAlteredCases",null),On([p.observable],Pn.prototype,"showMinimap",void 0),On([p.observable],Pn.prototype,"selectedHeatmapProfileId",void 0),On([p.observable],Pn.prototype,"heatmapGeneInputValue",void 0),On([p.observable],Pn.prototype,"horzZoom",void 0),On([p.observable],Pn.prototype,"mouseInsideBounds",void 0),On([p.observable],Pn.prototype,"renderingComplete",void 0),On([p.computed],Pn.prototype,"selectedClinicalAttributeIds",null),On([p.computed],Pn.prototype,"molecularProfileIdToHeatmapTracks",null),On([p.observable.ref],Pn.prototype,"oncoprint",void 0),On([p.computed],Pn.prototype,"caseListSortPossible",null),On([p.computed],Pn.prototype,"distinguishDrivers",null),On([p.action],Pn.prototype,"selectHeatmapProfile",null),On([p.action],Pn.prototype,"setAnnotateCBioPortalInputValue",null),On([p.action],Pn.prototype,"setAnnotateCOSMICInputValue",null),On([p.computed],Pn.prototype,"heatmapIsDynamicallyQueried",null),On([p.action],Pn.prototype,"sortByData",null),On([p.computed],Pn.prototype,"clinicalTracksUrlParam",null),On([p.computed],Pn.prototype,"selectedHeatmapProfileAlterationType",null),On([p.computed],Pn.prototype,"selectedHeatmapProfileGenericAssayType",null),On([p.action],Pn.prototype,"onMinimapClose",null),On([p.action],Pn.prototype,"onSuppressRendering",null),On([p.action],Pn.prototype,"onReleaseRendering",null),On([p.action],Pn.prototype,"onChangeSelectedClinicalTracks",null),On([m.default,p.action],Pn.prototype,"clearSortDirectionsAndSortByData",null),On([p.computed],Pn.prototype,"sortOrder",null),On([p.computed],Pn.prototype,"alphabeticalSampleOrder",null),On([p.computed],Pn.prototype,"alphabeticalPatientOrder",null),On([p.computed],Pn.prototype,"geneticTracks",null),On([p.computed],Pn.prototype,"clinicalTracks",null),On([p.computed],Pn.prototype,"heatmapTracks",null),On([p.computed],Pn.prototype,"genericAssayHeatmapTracks",null),On([p.computed],Pn.prototype,"genesetHeatmapTrackGroup",null),On([p.computed],Pn.prototype,"genesetHeatmapTracks",null),On([p.computed],Pn.prototype,"clusteredHeatmapTrackGroupIndex",null),On([p.computed],Pn.prototype,"oncoprintLibrarySortConfig",null),On([m.default,p.action],Pn.prototype,"clusterHeatmapByIndex",null),On([m.default,p.action],Pn.prototype,"removeHeatmapByIndex",null),On([m.default,p.action],Pn.prototype,"removeHeatmapByMolecularProfileId",null),On([p.computed],Pn.prototype,"isLoading",null),On([p.computed],Pn.prototype,"isHidden",null),On([p.computed],Pn.prototype,"loadingIndicatorMessage",null),On([m.default],Pn.prototype,"getControls",null),On([m.default],Pn.prototype,"getProgressItems",null),On([p.computed],Pn.prototype,"width",null);var xn,Tn=Pn=On([c.observer],Pn),kn=n(1034),An=(n(1179),n(612)),In=n(610),Dn=n(578),Mn=n(583);!function(e){e.circle="circle",e.diamond="diamond",e.plus="plus",e.square="square",e.star="star",e.triangleDown="triangleDown",e.triangleUp="triangleUp"}(xn||(xn={}));xn.circle,Dn.p,xn.circle,Dn.n,xn.circle,Dn.l,xn.circle,Dn.t,xn.circle,Dn.s,xn.circle,xn.circle,xn.circle,xn.circle,xn.circle;var jn=[{label:"RNA Seq V2",value:"rna_seq_v2_mrna"},{label:"RNA Seq",value:"rna_seq_mrna"}];function Nn(e){return(Nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ln(e,t){return!t||"object"!==Nn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gn(e){return(Gn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fn(e,t){return(Fn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Bn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ln(this,Gn(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fn(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement("div",{className:"borderedChart inlineBlock"},r.createElement(g.d,{filename:this.props.exportFileName||"chart-download",dontFade:!0,getSvg:this.props.getSVGElement,type:"button",style:{position:"absolute",top:10,right:10,zIndex:10}}),r.createElement("div",{style:{overflowX:"auto",overflowY:"hidden"}},this.props.children))}}])&&Rn(n.prototype,o),i&&Rn(n,i),t}(),Vn=n(17),zn=n(632),qn=n.n(zn),Un=n(714),Hn=n(747);function Wn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $n(e,t){return!t||"object"!==Jn(t)&&"function"!=typeof t?Qn(e):t}function Qn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yn(e){return(Yn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zn(e,t)}function Zn(e,t){return(Zn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Jn(e){return(Jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var er=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Jn(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},tr=function(e){function t(){return Kn(this,t),$n(this,Yn(t).apply(this,arguments))}return Xn(t,Un["a"]),t}(),nr="expression-tab-plot-svg",rr=function(e){function t(e){var n;return Kn(this,t),(n=$n(this,Yn(t).call(this,e))).tooltipModel=null,n.studySelectorModalVisible=!1,n.showMutations=!0,n.showCna=!1,n.selectedStudyIds={},n.height=700,n.logScale=!0,n.sortBy="alphabetic",n.isTooltipHovered=!1,n.showMutationType=[],n.tooltipCounter=0,n.sampleStudyData=Object(g.S)({await:function(){return[n.props.store.samples]},invoke:function(){return Promise.resolve({data:n.props.store.samples.result.reduce(function(e,t){return n.selectedStudyIds[t.studyId]&&e.push({uniqueSampleKey:t.uniqueSampleKey,value:n.props.studyMap[t.studyId].shortName}),e},[]),datatype:"string"})}}),n.selectedExpressionProfiles=Object(g.S)({await:function(){return[n.props.expressionProfiles]},invoke:function(){return Promise.resolve(o.filter(n.props.expressionProfiles.result,function(e){return RegExp("".concat(n.selectedRNASeqVersion,"$|pan_can_atlas_2018_").concat(n.selectedRNASeqVersion,"_median$")).test(e.molecularProfileId)}))}}),n.expressionData=Object(g.S)({await:function(){return n.props.numericGeneMolecularDataCache.await([n.selectedExpressionProfiles],function(e){return e.map(function(e){return{entrezGeneId:n.selectedGene.entrezGeneId,molecularProfileId:e.molecularProfileId}})})},invoke:function(){return Promise.resolve(o.flatten(n.props.numericGeneMolecularDataCache.getAll(n.selectedExpressionProfiles.result.map(function(e){return{entrezGeneId:n.selectedGene.entrezGeneId,molecularProfileId:e.molecularProfileId}})).map(function(e){return e.result})))}}),n.studiesWithExpressionData=Object(g.S)({await:function(){return[n.expressionData]},invoke:function(){var e=o.chain(n.expressionData.result).map(function(e){return e.studyId}).uniq().value();return Promise.resolve(Object(g.Y)(e))}}),n.mutationDataExists=Object(g.S)({await:function(){return[n.props.store.studyToMutationMolecularProfile]},invoke:function(){return Promise.resolve(!!o.values(n.props.store.studyToMutationMolecularProfile).length)}}),n.cnaDataExists=Object(g.S)({await:function(){return[n.props.store.studyToMolecularProfileDiscreteCna]},invoke:function(){return Promise.resolve(!!o.values(n.props.store.studyToMolecularProfileDiscreteCna).length)}}),n.cnaData=Object(g.S)({await:function(){return n.cnaDataShown&&void 0!==n.selectedGene?[n.props.store.annotatedCnaCache.get({entrezGeneId:n.selectedGene.entrezGeneId})]:[]},invoke:function(){return n.cnaDataShown&&void 0!==n.selectedGene?Promise.resolve(n.props.store.annotatedCnaCache.get({entrezGeneId:n.selectedGene.entrezGeneId}).result):Promise.resolve([])}}),n._unsortedBoxPlotData=Object(g.S)({await:function(){return[n.sampleStudyData,n.expressionData,n.props.store.sampleKeyToSample,n.props.store.studyToMutationMolecularProfile,n.props.store.studyToMolecularProfileDiscreteCna,n.cnaData]},invoke:function(){return Promise.resolve(Object(In.D)(n.sampleStudyData.result,{data:n.expressionData.result,datatype:"number",hugoGeneSymbol:n.selectedGene.hugoGeneSymbol},n.props.store.sampleKeyToSample.result,n.props.coverageInformation.samples,n.mutationDataExists.result?{molecularProfileIds:o.values(n.props.store.studyToMutationMolecularProfile.result).map(function(e){return e.molecularProfileId}),data:n.props.mutations.filter(function(e){return e.entrezGeneId===n.selectedGene.entrezGeneId})}:void 0,n.cnaDataShown?{molecularProfileIds:o.values(n.props.store.studyToMolecularProfileDiscreteCna.result).map(function(e){return e.molecularProfileId}),data:n.cnaData.result}:void 0))}}),n.boxPlotData=Object(g.S)({await:function(){return[n._unsortedBoxPlotData]},invoke:function(){var e=n._unsortedBoxPlotData.result;return"alphabetic"===n.sortBy?Promise.resolve(o.sortBy(e,function(e){return e.label})):Promise.resolve(o.sortBy(e,function(e){return qn.a.median(Array.prototype.slice.apply(e.data.map(function(e){return e.value})))}))}}),n.selectedGene=e.genes[0],window.box=Qn(n),n}var n,i,a;return Xn(t,r["Component"]),n=t,(i=[{key:"componentWillMount",value:function(){this.selectedStudyIds=o.mapValues(this.props.studyMap,function(e){return!0})}},{key:"handleStudySelection",value:function(e){this.selectedStudyIds[e.currentTarget.value]=!this.selectedStudyIds[e.currentTarget.value]}},{key:"handleRNASeqVersionChange",value:function(e){this._rnaSeqVersion=e.currentTarget.value}},{key:"handleSortByChange",value:function(e){this.sortBy=e.currentTarget.value}},{key:"handleSelectAllStudies",value:function(){var e=this;this.studiesWithExpressionData.isComplete&&this.applyStudyFilter(function(t){return t.studyId in e.studiesWithExpressionData.result})}},{key:"handleDeselectAllStudies",value:function(){this.applyStudyFilter(function(e){return!1})}},{key:"applyStudyFilter",value:function(e){this.selectedStudyIds=o.mapValues(this.props.studyMap,function(t,n){return e(t)})}},{key:"handleTabClick",value:function(e,t){this.selectedGene=t}},{key:"strokeOpacity",value:function(e){return this.scatterPlotAppearance(e).strokeOpacity}},{key:"stroke",value:function(e){return this.scatterPlotAppearance(e).stroke}},{key:"boxCalculationFilter",value:function(e){return 0!==e.value}},{key:"tooltip",value:function(e){return this.props.store.studyIdToStudy.isComplete?function(e,t){var n=null,o=null;e.mutations.length>0&&(n=Object(In.Q)(e.mutations));var i=e.copyNumberAlterations.filter(function(e){return 0!==e.value});return i.length>0&&(o=Object(In.P)(i)),r.createElement("div",null,r.createElement("span",null,r.createElement("b",null,"Study:")," ",r.createElement("a",{href:Object(pe.B)(e.studyId)},t[e.studyId].name)),r.createElement("br",null),r.createElement("span",null,r.createElement("b",null,"Sample ID:")," ",r.createElement("a",{href:Object(pe.y)(e.studyId,e.sampleId)},e.sampleId)),r.createElement("br",null),r.createElement("span",null,r.createElement("b",null,"Expression:")," ",e.value),r.createElement("br",null),!!n&&r.createElement("span",null,r.createElement("b",null,"Mutations:")," ",n),!!n&&r.createElement("br",null),!!o&&r.createElement("span",null,r.createElement("b",null,"CNA:")," ",o))}(e,this.props.store.studyIdToStudy.result):r.createElement("span",null,"Loading...")}},{key:"getChart",value:function(){return this.boxPlotData.isComplete?r.createElement(Bn,{getSVGElement:this.getSvg,exportFileName:this.exportFileName},r.createElement(tr,{svgId:nr,domainPadding:50,startDataAxisAtZero:!0,boxWidth:this.boxWidth,axisLabelY:this.yAxisLabel,data:this.boxPlotData.result,chartBase:550,scatterPlotTooltip:this.tooltip,horizontal:!1,logScale:this.axisLogScaleFunction,size:4,fill:this.fill,stroke:this.stroke,strokeOpacity:this.strokeOpacity,zIndexSortBy:this.zIndexSortBy,symbol:"circle",fillOpacity:this.fillOpacity,strokeWidth:this.strokeWidth,useLogSpaceTicks:!0,legendData:Object(In.J)(o.flatten(this.boxPlotData.result.map(function(e){return e.data})),this.viewType,Hn.f.BoxPlot,this.mutationDataExists,this.cnaDataExists,this.props.store.driverAnnotationSettings.driversAnnotated,[]),legendLocationWidthThreshold:900,boxCalculationFilter:this.boxCalculationFilter})):r.createElement("span",null)}},{key:"getSvg",value:function(){return document.getElementById(nr)}},{key:"render",value:function(){var e=this;return r.createElement("div",{"data-test":"expressionTabDiv"},r.createElement("div",{className:"tabMessageContainer"},r.createElement(ue.a,{className:"expression-oql-status-banner",store:this.props.store,tabReflectsOql:!1,style:{marginTop:-1,marginBottom:12}}),r.createElement(ce.a,{store:this.props.store})),this.studySelectorModalVisible&&this.studySelectionModal,r.createElement("div",{style:{marginBottom:15}},r.createElement(h.b,{onTabClick:this.handleTabClick,arrowStyle:{"line-height":.8},unmountOnHide:!0,tabButtonStyle:"pills",activeTabId:"summaryTab"+this.selectedGene.hugoGeneSymbol,className:"pillTabs"},this.props.genes.map(function(e){return r.createElement(h.a,{key:e.hugoGeneSymbol,datum:e,id:"summaryTab"+e.hugoGeneSymbol,linkText:e.hugoGeneSymbol})})),r.createElement("form",{className:"form-inline expression-controls",style:{marginBottom:10}},r.createElement("div",{className:"form-group"},r.createElement("h5",null,"Profile:"),r.createElement("select",{className:"form-control input-sm",value:this.selectedRNASeqVersion,onChange:this.handleRNASeqVersionChange,title:"Select profile"},this.possibleRNASeqVersions.map(function(e){return r.createElement("option",{value:e.value},e.label)}))),this.boxPlotData.isComplete&&this.boxPlotData.result.length>1&&r.createElement("div",{className:"form-group"},r.createElement("h5",null,"Sort By:"),r.createElement("select",{className:"form-control input-sm",value:this.sortBy,onChange:this.handleSortByChange,title:"Select profile"},r.createElement("option",{value:"alphabetic"},"Cancer Study"),r.createElement("option",{value:"median"},"Median"))),r.createElement("div",{className:"form-group"},r.createElement("label",{className:"checkbox-inline"},r.createElement("input",{type:"checkbox",checked:this.logScale,onChange:function(){return e.logScale=!e.logScale},title:"Log scale"}),"Log scale"),this.mutationDataExists.result&&r.createElement("label",{className:"checkbox-inline"},r.createElement("input",{type:"checkbox",checked:this.showMutations,onChange:function(){return e.showMutations=!e.showMutations},title:"Show mutations *"}),"Show mutations *"),this.cnaDataExists.result&&r.createElement("label",{className:"checkbox-inline"},r.createElement("input",{type:"checkbox",checked:this.showCna,onChange:function(){return e.showCna=!e.showCna},title:"Show copy number alterations"}),"Show copy number alterations"))),this.studiesWithExpressionData.isComplete&&r.createElement("div",null,r.createElement("label",null,"Select studies:"),"",r.createElement(Vn.If,{condition:this.studyTypeCounts.provisional.length>0},r.createElement("button",{className:"btn btn-default btn-xs",style:{marginRight:5},onClick:function(){return e.applyStudyFilter(function(e){return Object(Oe.w)(e.studyId)})}},"TCGA Provisional (",this.studyTypeCounts.provisional.length,")")),r.createElement(Vn.If,{condition:this.studyTypeCounts.panCancer.length>0},r.createElement("button",{className:"btn btn-default btn-xs",style:{marginRight:5},onClick:function(){return e.applyStudyFilter(function(e){return Object(Oe.u)(e.studyId)})}},"TCGA Pan-Can Atlas (",this.studyTypeCounts.panCancer.length,")")),r.createElement("button",{"data-test":"ExpressionStudyModalButton",className:"btn btn-default btn-xs",onClick:function(){return e.studySelectorModalVisible=!e.studySelectorModalVisible}},"Custom list")),r.createElement("div",{className:"collapse"},r.createElement("div",{className:"well"}))),r.createElement(lt.a,{center:!0,size:"big",isLoading:this.boxPlotData.isPending||this.studiesWithExpressionData.isPending}),this.boxPlotData.isComplete&&r.createElement(Vn.If,{condition:this.selectedStudies.length>0},r.createElement(Vn.Then,null,r.createElement(Vn.If,{condition:o.size(this.boxPlotData.result)>0},r.createElement(Vn.Then,null,r.createElement("div",{className:"posRelative"},r.createElement(c.Observer,null,this.getChart),this.mutationDataExists.result&&r.createElement("div",{style:{marginTop:20}},"* Driver annotation settings are located in the Mutation Color menu of the Oncoprint."))),r.createElement(Vn.Else,null,r.createElement("div",{className:"alert alert-info"},"No expression data for this query.")))),r.createElement(Vn.Else,null,r.createElement("div",{className:"alert alert-info"},"No studies selected."))))}},{key:"selectedStudies",get:function(){var e=this;return o.filter(this.props.studyMap,function(t){return!0===e.selectedStudyIds[t.studyId]})}},{key:"widthThreshold",get:function(){return this.selectedStudies.length>7}},{key:"boxWidth",get:function(){var e=-62/32;return Math.max(e*this.selectedStudies.length+81.9375,18)}},{key:"selectedRNASeqVersion",get:function(){return this._rnaSeqVersion?this._rnaSeqVersion:this.possibleRNASeqVersions[0].value}},{key:"possibleRNASeqVersions",get:function(){return this.props.expressionProfiles.isComplete?(e=this.props.expressionProfiles.result,(t={rna_seq_mrna:!1,rna_seq_v2_mrna:!1}).rna_seq_mrna=o.some(e,function(e){return RegExp("rna_seq_mrna$|pan_can_atlas_2018_rna_seq_mrna_median$").test(e.molecularProfileId)}),t.rna_seq_v2_mrna=o.some(e,function(e){return RegExp("rna_seq_v2_mrna$|pan_can_atlas_2018_rna_seq_v2_mrna_median$").test(e.molecularProfileId)}),jn.filter(function(e){return t[e.value]})):[];var e,t}},{key:"mutationDataShown",get:function(){return this.mutationDataExists.result&&this.showMutations}},{key:"cnaDataShown",get:function(){return this.cnaDataExists.result&&this.showCna}},{key:"studyTypeCounts",get:function(){var e=o.values(this.props.studyMap);return{provisional:e.filter(function(e){return Object(Oe.w)(e.studyId)}),panCancer:e.filter(function(e){return Object(Oe.u)(e.studyId)})}}},{key:"hasUnselectedStudies",get:function(){var e=this;return!!this.studiesWithExpressionData.isComplete&&void 0!==o.find(this.props.studyMap,function(t){var n=t.studyId in e.studiesWithExpressionData.result,r=e.selectedStudies.includes(t);return n&&!r})}},{key:"alphabetizedAndFilteredStudies",get:function(){var e=this;return o.chain(this.props.studyMap).values().filter(function(t){return t.studyId in(e.studiesWithExpressionData.result||{})}).sortBy(function(e){return e.name}).value()}},{key:"studySelectionModal",get:function(){var e=this;return r.createElement(Et.Modal,{"data-test":"ExpressionStudyModal",show:!0,onHide:function(){e.studySelectorModalVisible=!1},className:"cbioportal-frontend"},r.createElement(Et.Modal.Header,{closeButton:!0},r.createElement(Et.Modal.Title,null,"Select Studies")),r.createElement(Et.Modal.Body,null,r.createElement("div",null,r.createElement("div",null,r.createElement("a",{"data-test":"ExpressionStudySelectAll",className:at()({hidden:!this.hasUnselectedStudies}),onClick:this.handleSelectAllStudies},"Select all"),r.createElement("span",{className:at()({hidden:!this.hasUnselectedStudies||0===this.selectedStudies.length})},"|"),r.createElement("a",{"data-test":"ExpressionStudyUnselectAll",className:at()({hidden:0===this.selectedStudies.length}),onClick:this.handleDeselectAllStudies},"Deselect all")),o.map(this.alphabetizedAndFilteredStudies,function(t){return r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",checked:!0===e.selectedStudyIds[t.studyId],value:t.studyId,onChange:e.handleStudySelection}),t.name))}))))}},{key:"yAxisLabel",get:function(){var e=this.logScale?" (log2)":"",t="1";return"rna_seq_v2_mrna"===this.selectedRNASeqVersion&&(t="2"),"".concat(this.selectedGene.hugoGeneSymbol," Expression --- RNA Seq V").concat(t).concat(e)}},{key:"fill",get:function(){var e=this;return this.showCna||this.showMutations?function(t){return e.scatterPlotAppearance(t).fill}:In.i.fill}},{key:"fillOpacity",get:function(){return!this.showMutations&&this.showCna?0:.7}},{key:"strokeWidth",get:function(){return this.showCna?In.b:1}},{key:"scatterPlotAppearance",get:function(){return Object(In.G)(this.viewType,this.mutationDataExists,this.cnaDataExists,this.props.store.driverAnnotationSettings.driversAnnotated)}},{key:"viewType",get:function(){return this.showMutations&&this.showCna?Hn.a.MutationTypeAndCopyNumber:this.showMutations?Hn.a.MutationType:this.showCna?Hn.a.CopyNumber:Hn.a.None}},{key:"zIndexSortBy",get:function(){return Object(In.L)(this.viewType)}},{key:"axisLogScaleFunction",get:function(){if(this.logScale)return{label:"log2",fLogScale:function(e,t){return Math.log2(Math.max(e,.01))},fInvLogScale:function(e){return Math.pow(2,e)}}}},{key:"exportFileName",get:function(){return"Expression"}}])&&Wn(n.prototype,i),a&&Wn(n,a),t}();er([p.observable],rr.prototype,"_rnaSeqVersion",void 0),er([p.observable.ref],rr.prototype,"tooltipModel",void 0),er([p.observable.ref],rr.prototype,"selectedGene",void 0),er([p.observable],rr.prototype,"studySelectorModalVisible",void 0),er([p.observable],rr.prototype,"showMutations",void 0),er([p.observable],rr.prototype,"showCna",void 0),er([p.observable],rr.prototype,"selectedStudyIds",void 0),er([p.observable],rr.prototype,"height",void 0),er([p.observable],rr.prototype,"logScale",void 0),er([p.observable],rr.prototype,"sortBy",void 0),er([p.observable],rr.prototype,"isTooltipHovered",void 0),er([p.observable],rr.prototype,"showMutationType",void 0),er([p.computed],rr.prototype,"selectedStudies",null),er([p.computed],rr.prototype,"widthThreshold",null),er([p.computed],rr.prototype,"boxWidth",null),er([p.computed],rr.prototype,"selectedRNASeqVersion",null),er([p.computed],rr.prototype,"possibleRNASeqVersions",null),er([p.computed],rr.prototype,"mutationDataShown",null),er([p.computed],rr.prototype,"cnaDataShown",null),er([p.computed],rr.prototype,"studyTypeCounts",null),er([m.default],rr.prototype,"handleStudySelection",null),er([m.default],rr.prototype,"handleRNASeqVersionChange",null),er([m.default],rr.prototype,"handleSortByChange",null),er([m.default],rr.prototype,"handleSelectAllStudies",null),er([m.default],rr.prototype,"handleDeselectAllStudies",null),er([p.computed],rr.prototype,"hasUnselectedStudies",null),er([p.computed],rr.prototype,"alphabetizedAndFilteredStudies",null),er([p.computed],rr.prototype,"studySelectionModal",null),er([m.default],rr.prototype,"applyStudyFilter",null),er([m.default],rr.prototype,"handleTabClick",null),er([p.computed],rr.prototype,"yAxisLabel",null),er([p.computed],rr.prototype,"fill",null),er([p.computed],rr.prototype,"fillOpacity",null),er([p.computed],rr.prototype,"strokeWidth",null),er([m.default],rr.prototype,"strokeOpacity",null),er([m.default],rr.prototype,"stroke",null),er([p.computed],rr.prototype,"scatterPlotAppearance",null),er([p.computed],rr.prototype,"viewType",null),er([m.default],rr.prototype,"tooltip",null),er([p.computed],rr.prototype,"zIndexSortBy",null),er([p.computed],rr.prototype,"axisLogScaleFunction",null),er([m.default],rr.prototype,"getChart",null),er([m.default],rr.prototype,"getSvg",null),er([p.computed],rr.prototype,"exportFileName",null);var or=rr=er([c.observer],rr),ir=n(179),ar=n(609),sr=n(103),lr="rgb(41, 87, 41)",ur="rgb(180, 4, 4)";function cr(e){return e>0?lr:ur}function pr(e){return[Math.abs(e),e>0?1:0]}var dr=n(622),fr=n(710),hr=n(586),mr=n(641),yr=n(582),gr=n(580);function vr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function br(e,t){return!t||"object"!==wr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Sr(e){return(Sr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _r(e,t){return(_r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wr(e){return(wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Er=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":wr(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Or=[{name:"Correlated Gene",render:function(e){return r.createElement("span",{style:{fontWeight:"bold"}},e.geneticEntityName)},filter:function(e,t,n){return e.geneticEntityName.indexOf(n)>-1},download:function(e){return e.geneticEntityName},sortBy:function(e){return e.geneticEntityName},width:"30%"},{name:"Cytoband",render:function(e){return r.createElement("span",null,e.cytoband)},filter:mr.a,download:function(e){return e.cytoband},sortBy:function(e){return e.cytoband},width:"30%"},Cr("Spearman's Correlation","spearmansCorrelation",!0,!1),Object.assign(Cr("p-Value","pValue",!1,!1),{tooltip:r.createElement("span",null,"Derived from 2-sided t-test.")}),Object.assign(Cr("q-Value","qValue",!1,!0),{sortBy:function(e){return[e.qValue,e.pValue]},tooltip:r.createElement("span",null,"Derived from Benjamini-Hochberg FDR correction procedure.")})];function Cr(e,t,n,o){return{name:e,render:function(e){return r.createElement("span",{style:{color:n?cr(e[t]):"#000000",textAlign:"right",float:"right",whiteSpace:"nowrap"}},o?Object(gr.b)(e[t]):Object(yr.b)(e[t],3,.01))},download:function(e){return e[t].toString()+""},sortBy:function(e){return pr(e[t])},align:"right"}}var Pr=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=br(this,Sr(t).apply(this,arguments))).tableModeOptions=[{label:"Show Any Correlation",value:po.SHOW_ALL},{label:"Show Only Positively Correlated",value:po.SHOW_POSITIVE},{label:"Show Only Negatively Correlated",value:po.SHOW_NEGATIVE}],e.paginationProps={itemsPerPageOptions:[25]},e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_r(e,t)}(t,r["Component"]),n=t,(o=[{key:"onRowClick",value:function(e){this.props.dataStore.setHighlighted(e)}},{key:"onSelectTableMode",value:function(e){this.props.onSelectTableMode(e.value)}},{key:"render",value:function(){return r.createElement("div",null,r.createElement("div",{style:{float:"left",display:"flex",flexDirection:"row"}},r.createElement("div",{style:{width:180}},r.createElement(ar.default,{value:this.props.tableMode,onChange:this.onSelectTableMode,options:this.tableModeOptions,searchable:!1,clearable:!1,className:"coexpression-select-table-mode"})),r.createElement(fr.a,{style:{marginLeft:21,marginTop:"0.7em"},tooltip:r.createElement("div",{style:{maxWidth:200}},dr.e),tooltipPlacement:"left"})),r.createElement(xe.b,{initialSortColumn:"q-Value",initialSortDirection:"asc",columns:Or,showColumnVisibility:!1,dataStore:this.props.dataStore,onRowClick:this.onRowClick,filterPlaceholder:"Enter gene or cytoband..",paginationProps:this.paginationProps,initialItemsPerPage:25,copyDownloadProps:{showCopy:!1}}))}}])&&vr(n.prototype,o),i&&vr(n,i),t}();Er([hr.bind],Pr.prototype,"onRowClick",null),Er([hr.bind],Pr.prototype,"onSelectTableMode",null);var xr=Pr=Er([c.observer],Pr);function Tr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kr(e,t){return!t||"object"!==Dr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ar(e){return(Ar=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ir(e,t){return(Ir=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Dr(e){return(Dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Mr=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Dr(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},jr=[{name:"Correlated Gene Set",render:function(e){return r.createElement("span",{style:{fontWeight:"bold"}},e.geneticEntityName.length>28?e.geneticEntityName.substring(0,25)+"...":e.geneticEntityName)},filter:function(e,t,n){return e.geneticEntityName.indexOf(n)>-1},download:function(e){return e.geneticEntityName},sortBy:function(e){return e.geneticEntityName},width:"60%"},Nr("Spearman's Correlation","spearmansCorrelation",!0,!1),Nr("p-Value","pValue",!1,!1),Object.assign(Nr("q-Value","qValue",!1,!0),{sortBy:function(e){return[e.qValue,e.pValue]}})];function Nr(e,t,n,o){return{name:e,render:function(e){return r.createElement("span",{style:{color:n?cr(e[t]):"#000000",textAlign:"right",float:"right",whiteSpace:"nowrap"}},o?Object(gr.b)(e[t]):Object(yr.b)(e[t],3,.01))},download:function(e){return e[t].toString()+""},sortBy:function(e){return pr(e[t])},align:"right"}}var Rr=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=kr(this,Ar(t).apply(this,arguments))).tableModeOptions=[{label:"Show Any Correlation",value:po.SHOW_ALL},{label:"Show Only Positively Correlated",value:po.SHOW_POSITIVE},{label:"Show Only Negatively Correlated",value:po.SHOW_NEGATIVE}],e.paginationProps={itemsPerPageOptions:[25]},e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ir(e,t)}(t,r["Component"]),n=t,(o=[{key:"onRowClick",value:function(e){this.props.dataStore.setHighlighted(e)}},{key:"onSelectTableMode",value:function(e){this.props.onSelectTableMode(e.value)}},{key:"render",value:function(){return r.createElement("div",null,r.createElement("div",{style:{float:"left",display:"flex",flexDirection:"row"}},r.createElement("div",{style:{width:180}},r.createElement(ar.default,{value:this.props.tableMode,onChange:this.onSelectTableMode,options:this.tableModeOptions,searchable:!1,clearable:!1,className:"coexpression-select-table-mode"})),r.createElement(fr.a,{style:{marginLeft:21,marginTop:"0.7em"},tooltip:r.createElement("div",{style:{maxWidth:200}},dr.e),tooltipPlacement:"left"})),r.createElement(xe.b,{initialSortColumn:"q-Value",initialSortDirection:"asc",columns:jr,showColumnVisibility:!1,dataStore:this.props.dataStore,onRowClick:this.onRowClick,filterPlaceholder:"Enter gene set..",paginationProps:this.paginationProps,initialItemsPerPage:25,copyDownloadProps:{showCopy:!1}}))}}])&&Tr(n.prototype,o),i&&Tr(n,i),t}();Mr([hr.bind],Rr.prototype,"onRowClick",null),Mr([hr.bind],Rr.prototype,"onSelectTableMode",null);var Lr=Rr=Mr([c.observer],Rr),Gr=(n(1180),n(782));function Fr(e,t,n){return"".concat(n,": ").concat(e.geneticEntityName," ").concat(e.cytoband?"(".concat(e.cytoband,") "):"").concat(t?"(".concat(t.label,") "):"")}function Br(e){return!e.profiledX&&!e.profiledY}function Vr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qr(e,t){return!t||"object"!==Kr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ur(e){return(Ur=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wr(e,t)}function Wr(e,t){return(Wr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Kr(e){return(Kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var $r=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Kr(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Qr=function(e){function t(){return zr(this,t),qr(this,Ur(t).apply(this,arguments))}return Hr(t,Gr["a"]),t}();function Yr(){}var Xr=function(e){function t(){return zr(this,t),qr(this,Ur(t).apply(this,arguments))}var n,o,a;return Hr(t,r["Component"]),n=t,(o=[{key:"getSvg",value:function(){return document.getElementById("coexpression-plot-svg")}},{key:"plot",value:function(){return this.data.length?r.createElement(Qr,{svgId:"coexpression-plot-svg",title:this.title,data:this.data,size:Mn.k,chartWidth:this.props.width,chartHeight:this.props.height,stroke:this.stroke,fill:this.fill,strokeWidth:1.2,legendData:this.mutationLegendElements,showRegressionLine:this.props.showRegressionLine,logX:this.axisLogScaleFunction,logY:this.axisLogScaleFunction,useLogSpaceTicks:!0,axisLabelX:this.axisLabelX,axisLabelY:this.axisLabelY,tooltip:this.tooltip,fontFamily:"Arial,Helvetica"}):r.createElement("div",{className:"alert alert-info"},"No data to plot.")}},{key:"toolbar",value:function(){return r.createElement("div",{style:{textAlign:"center",position:"relative"}},r.createElement("div",{style:{display:"inline-block"}},this.props.showMutationControls&&r.createElement("div",{className:"checkbox coexpression-plot-toolbar-elt"},r.createElement("label",null,r.createElement("input",{type:"checkbox",checked:this.props.showMutations,onClick:this.props.handlers.onClickShowMutations||Yr,"data-test":"ShowMutations"}),"Show Mutations")),this.props.showLogScaleControls&&r.createElement("div",{className:"coexpression-plot-toolbar-elt"},r.createElement("div",{className:"checkbox coexpression-plot-toolbar-elt"},r.createElement("label",null,r.createElement("input",{type:"checkbox",checked:this.props.logScale,onClick:this.props.handlers.onClickLogScale||Yr,"data-test":"logScale"}),"Log Scale"))),r.createElement("div",{className:"checkbox coexpression-plot-toolbar-elt"},r.createElement("label",null,r.createElement("input",{type:"checkbox",checked:this.props.showRegressionLine,onClick:this.props.handlers.onClickShowRegressionLine,"data-test":"ShowRegressionLine"}),"Show Regression Line"))),r.createElement(g.d,{getSvg:this.getSvg,filename:"coexpression",dontFade:!0,type:"button",style:{position:"absolute",top:0,right:0}}))}},{key:"tooltip",value:function(e){return r.createElement("div",null,r.createElement("div",null,r.createElement("span",null,"Sample ID: "),r.createElement("a",{href:Object(pe.y)(e.studyId,e.sampleId)},e.sampleId)),r.createElement("div",null,r.createElement("span",null,this.props.xAxisGeneticEntity.geneticEntityName,":",r.createElement("b",null,e.x.toFixed(2)))),r.createElement("div",null,r.createElement("span",null,this.props.yAxisGeneticEntity.geneticEntityName,":",r.createElement("b",null,e.y.toFixed(2)))),e.mutationsX&&r.createElement("div",null,r.createElement("span",null,this.props.xAxisGeneticEntity.geneticEntityName," ","Mutation:",r.createElement("b",null,e.mutationsX))),e.mutationsY&&r.createElement("div",null,r.createElement("span",null,this.props.yAxisGeneticEntity.geneticEntityName," ","Mutation:",r.createElement("b",null,e.mutationsY))))}},{key:"render",value:function(){return r.createElement("div",{className:"borderedChart inlineBlock","data-test":"CoExpressionPlot"},r.createElement(c.Observer,null,this.toolbar),r.createElement(c.Observer,null,this.plot))}},{key:"stroke",get:function(){return this.props.showMutations?function(e){return Br(e)?"#d3d3d3":e.mutationsX&&e.mutationsY?"#B40404":e.mutationsX||e.mutationsY?e.mutationsX?"#886A08":"#F7819F":"#0174df"}:"#0174df"}},{key:"fill",get:function(){return this.props.showMutations?function(e){return Br(e)?"#ffffff":e.mutationsX&&e.mutationsY?"#FF0000":e.mutationsX||e.mutationsY?e.mutationsX?"#DBA901":"#F5A9F2":"#58acfa"}:"#58acfa"}},{key:"mutationLegendElements",get:function(){if(!this.props.showMutations)return[];var e=!1,t=!1,n=!1,r=!1,o=!1,i=!0,a=!1,s=void 0;try{for(var l,u=this.data[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value;Br(c)&&(o=!0),c.mutationsX&&c.mutationsY?e=!0:c.mutationsX||c.mutationsY?c.mutationsX?t=!0:n=!0:r=!0}}catch(e){a=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw s}}var p=[];return t&&p.push({name:[this.props.xAxisGeneticEntity.geneticEntityName,"mutated"],symbol:{fill:"#DBA901",stroke:"#886A08"}}),n&&p.push({name:[this.props.yAxisGeneticEntity.geneticEntityName,"mutated"],symbol:{fill:"#F5A9F2",stroke:"#F7819F"}}),e&&p.push({name:"Both mutated",symbol:{fill:"#FF0000",stroke:"#B40404"}}),r&&p.push({name:"Neither mutated",symbol:{fill:"#58acfa",stroke:"#0174df"}}),o&&p.push({name:"Not profiled for mutations",symbol:{fill:"#ffffff",stroke:"#d3d3d3"}}),p}},{key:"data",get:function(){return i.a.sortBy(this.props.data,function(e){return e.mutationsX&&e.mutationsY?3:e.mutationsX||e.mutationsY?2:Br(e)?0:1})}},{key:"title",get:function(){return"".concat(this.props.xAxisGeneticEntity.geneticEntityName," vs. ").concat(this.props.yAxisGeneticEntity.geneticEntityName)}},{key:"axisLabelX",get:function(){return Fr({geneticEntityName:this.props.xAxisGeneticEntity.geneticEntityName,cytoband:this.props.xAxisGeneticEntity.cytoband},this.axisLogScaleFunction,this.props.molecularProfileX.name)}},{key:"axisLabelY",get:function(){return Fr({geneticEntityName:this.props.yAxisGeneticEntity.geneticEntityName},this.axisLogScaleFunction,this.props.molecularProfileY.name)}},{key:"axisLogScaleFunction",get:function(){if(this.props.logScale)return{label:"log2",fLogScale:function(e,t){return Math.log2(Math.max(e,.01))},fInvLogScale:function(e){return Math.pow(2,e)}}}}])&&Vr(n.prototype,o),a&&Vr(n,a),t}();$r([hr.bind],Xr.prototype,"getSvg",null),$r([p.computed],Xr.prototype,"stroke",null),$r([p.computed],Xr.prototype,"fill",null),$r([p.computed],Xr.prototype,"mutationLegendElements",null),$r([p.computed],Xr.prototype,"data",null),$r([p.computed],Xr.prototype,"axisLabelX",null),$r([p.computed],Xr.prototype,"axisLabelY",null),$r([p.computed],Xr.prototype,"axisLogScaleFunction",null),$r([hr.bind],Xr.prototype,"plot",null),$r([hr.bind],Xr.prototype,"toolbar",null),$r([hr.bind],Xr.prototype,"tooltip",null);var Zr=Xr=$r([c.observer],Xr),Jr="";function eo(e){return e.map(function(e){return e.proteinChange}).filter(function(e){return!!e}).join(", ")}function to(e,t,n,r,o){var i=o[t];return!!i&&Object(An.a)(e,i.molecularProfileId,n,r)}var no=n(620);function ro(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function io(e,t,n){return t&&oo(e.prototype,t),n&&oo(e,n),e}function ao(e,t){return!t||"object"!==co(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function so(e){return(so=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lo(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uo(e,t)}function uo(e,t){return(uo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function co(e){return(co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var po,fo=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":co(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};!function(e){e[e.SHOW_ALL=0]="SHOW_ALL",e[e.SHOW_POSITIVE=1]="SHOW_POSITIVE",e[e.SHOW_NEGATIVE=2]="SHOW_NEGATIVE"}(po||(po={}));var ho=function(e){function t(e,n,r){var o;return ro(this,t),(o=ao(this,so(t).call(this,e))).setHighlighted=r,o.tableMode=po.SHOW_ALL,o.dataHighlighter=function(e){var t=n();return!(!t||e.geneticEntityId!==t.geneticEntityId)},o.dataSelector=function(e){var t;switch(o.tableMode){case po.SHOW_POSITIVE:t=e.spearmansCorrelation>=0;break;case po.SHOW_NEGATIVE:t=e.spearmansCorrelation<=0;break;default:t=!0}return t},o.reactionDisposer=Object(p.autorun)(function(){o.sortMetric&&o.sortedFilteredData.length>0&&!n()&&o.setHighlighted(o.sortedFilteredData[0])}),o}return lo(t,Gt["a"]),io(t,[{key:"destroy",value:function(){this.reactionDisposer()}}]),t}();fo([p.observable],ho.prototype,"tableMode",void 0);var mo=function(e){function t(){var e;return ro(this,t),(e=ao(this,so(t).apply(this,arguments))).allDataRequested=!0,e.coExpressionsWithQValues=Object(g.S)({await:function(){return[e.coExpressionDataPromise]},invoke:function(){var t=e.coExpressionDataPromise.result,n=i.a.sortBy(t,function(e){return e.pValue});return Object(no.a)(n.map(function(e){return e.pValue})).forEach(function(e,t){n[t].qValue=e}),Promise.resolve(n)}}),e.dataStore=new ho(function(){return e.props.hidden?e.lastCoExpressionData||[]:e.coExpressionsWithQValues.isComplete?(e.lastCoExpressionData=e.coExpressionsWithQValues.result,e.coExpressionsWithQValues.result):[]},function(){return e.highlightedCoExpression},function(t){e.highlightedCoExpression=t}),e.plotData=Object(g.S)({await:function(){if(e.props.hidden)return[];var t=e.getPlotDataPromises(e.highlightedCoExpression),n=[e.props.coverageInformation,e.props.studyToMutationMolecularProfile,t.molecularX];return t.mutationX&&n.push(t.mutationX),t.molecularY&&n.push(t.molecularY),t.mutationY&&n.push(t.mutationY),n},invoke:function(){if(e.props.hidden)return Promise.resolve([]);if(!e.highlightedCoExpression)return Promise.resolve([]);var t=e.getPlotDataPromises(e.highlightedCoExpression),n=[];t.molecularX&&t.molecularX.isComplete&&(n=n.concat(t.molecularX.result)),t.molecularY&&t.molecularY.isComplete&&(n=n.concat(t.molecularY.result));var r=[];return t.mutationX&&t.mutationX.isComplete&&(r=r.concat(t.mutationX.result)),t.mutationY&&t.mutationY.isComplete&&(r=r.concat(t.mutationY.result)),Promise.resolve(function(e,t,n,r,o,i,a,s){var l={},u={},c={},p={},d={},f=function(e){d[e.uniqueSampleKey]||(d[e.uniqueSampleKey]=e)};if("number"==typeof n){var h=!0,m=!1,y=void 0;try{for(var g,v=t[Symbol.iterator]();!(h=(g=v.next()).done);h=!0){var b=g.value;if(b.proteinChange){var S=b.entrezGeneId===n?c:p;S[b.uniqueSampleKey]=S[b.uniqueSampleKey]||[],S[b.uniqueSampleKey].push(b),f(b)}}}catch(e){m=!0,y=e}finally{try{h||null==v.return||v.return()}finally{if(m)throw y}}}if(e[0]&&void 0!==e[0].entrezGeneId){var _=!0,w=!1,E=void 0;try{for(var O,C=e[Symbol.iterator]();!(_=(O=C.next()).done);_=!0){var P=O.value;(P.entrezGeneId===n?l:u)[P.uniqueSampleKey]=P,f(P)}}catch(e){w=!0,E=e}finally{try{_||null==C.return||C.return()}finally{if(w)throw E}}}else{var x=!0,T=!1,k=void 0;try{for(var A,I=e[Symbol.iterator]();!(x=(A=I.next()).done);x=!0){var D=A.value;(D.genesetId===n.toString()?l:u)[D.uniqueSampleKey]=D,f(D)}}catch(e){T=!0,k=e}finally{try{x||null==I.return||I.return()}finally{if(T)throw k}}}for(var M=[],j=0,N=Object.keys(l);j<N.length;j++){var R=N[j],L=d[R].studyId,G=l[R],F=u[R];if(G&&F){var B=Number(G.value),V=Number(F.value);isNaN(B)||isNaN(V)||M.push({x:B,y:V,mutationsX:eo(c[R]||[]),mutationsY:eo(p[R]||[]),profiledX:"number"==typeof n&&to(R,L,o,a,s),profiledY:"number"==typeof r&&to(R,L,i,a,s),studyId:L,sampleId:d[R].sampleId})}}return M}(n,r,e.props.geneticEntity.geneticEntityId,isNaN(Number(e.highlightedCoExpression.geneticEntityId))?e.highlightedCoExpression.geneticEntityId:Number(e.highlightedCoExpression.geneticEntityId),e.props.geneticEntity.geneticEntityName,e.highlightedCoExpression.geneticEntityName,e.props.coverageInformation.result,e.props.studyToMutationMolecularProfile.result))}}),e}return lo(t,r["Component"]),io(t,[{key:"onSelectTableMode",value:function(e){this.dataStore.tableMode=e}},{key:"requestAllData",value:function(){this.allDataRequested=!0}},{key:"getPlotDataPromises",value:function(e){var t={molecularX:this.props.profileX.molecularAlterationType===d.a.GENESET_SCORE?this.props.numericGenesetMolecularDataCache.get({genesetId:this.props.geneticEntity.geneticEntityId.toString(),molecularProfileId:this.props.profileX.molecularProfileId}):this.props.numericGeneMolecularDataCache.get({entrezGeneId:parseInt(String(this.props.geneticEntity.geneticEntityId),10),molecularProfileId:this.props.profileX.molecularProfileId}),mutationX:void 0,molecularY:void 0,mutationY:void 0};return e&&(t.molecularY=this.props.profileY.molecularAlterationType===d.a.GENESET_SCORE?this.props.numericGenesetMolecularDataCache.get({genesetId:e.geneticEntityId,molecularProfileId:this.props.profileY.molecularProfileId}):this.props.numericGeneMolecularDataCache.get({entrezGeneId:parseInt(e.geneticEntityId,10),molecularProfileId:this.props.profileY.molecularProfileId})),this.props.mutationCache&&(t.mutationX=this.props.mutationCache.get({entrezGeneId:parseInt(String(this.props.geneticEntity.geneticEntityId),10)}),e&&(t.mutationY=this.props.mutationCache.get({entrezGeneId:parseInt(e.geneticEntityId,10)}))),t}},{key:"table",value:function(){return this.props.profileY.molecularAlterationType!==d.a.GENESET_SCORE?r.createElement("div",null,r.createElement(xr,{referenceGeneticEntity:this.props.geneticEntity.geneticEntityData,dataStore:this.dataStore,tableMode:this.dataStore.tableMode,onSelectTableMode:this.onSelectTableMode}),this.requestAllDataButton):r.createElement("div",null,r.createElement(Lr,{referenceGeneticEntity:this.props.geneticEntity.geneticEntityData,dataStore:this.dataStore,tableMode:this.dataStore.tableMode,onSelectTableMode:this.onSelectTableMode}),this.requestAllDataButton)}},{key:"plot",value:function(){if(this.props.hidden)return r.createElement("span",null);if(this.plotData.isError)return r.createElement("span",null,"Error fetching data. Please refresh the page and try again.");var e;if(this.highlightedCoExpression){e={geneticEntityName:this.highlightedCoExpression.geneticEntityName,geneticEntityType:this.highlightedCoExpression.geneticEntityType,geneticEntityId:this.highlightedCoExpression.geneticEntityId,cytoband:this.highlightedCoExpression.cytoband,geneticEntityData:{geneticEntityId:0,entrezGeneId:0,hugoGeneSymbol:"",type:""}}}return r.createElement("div",{style:{position:"relative"}},r.createElement(lt.a,{isLoading:this.dataStore.allData.length>0&&(this.plotData.isPending||!this.highlightedCoExpression),center:!0,size:"big"}),this.plotData.isComplete&&this.highlightedCoExpression&&r.createElement("div",{style:{marginLeft:10}},r.createElement(Zr,{xAxisGeneticEntity:this.props.geneticEntity,yAxisGeneticEntity:e,data:this.plotData.result,showLogScaleControls:this.showLogScaleControls,showMutationControls:this.showMutationControls,showMutations:this.plotShowMutations,showRegressionLine:this.props.plotState.plotShowRegressionLine,logScale:this.plotLogScale,handlers:this.props.plotHandlers,molecularProfileY:this.props.profileY,molecularProfileX:this.props.profileX,height:530,width:530})))}},{key:"componentWillUnmount",value:function(){this.dataStore.destroy()}},{key:"render",value:function(){var e=r.createElement("div",{style:{display:!this.props.hidden&&this.coExpressionsWithQValues.isComplete?"inherit":"none"},"data-test":"CoExpressionGeneTabContent"},r.createElement("div",{className:"clearfix"},this.dataStore.allData.length>0?[r.createElement("div",{style:{width:"40%",float:"left",marginTop:6}},r.createElement(c.Observer,null,this.table)),r.createElement("div",{style:{width:"60%",float:"right",marginTop:6}},r.createElement(c.Observer,null,this.plot))]:r.createElement("div",{style:{position:"absolute",top:200,left:"50%",transform:"translate(-50%, 0)"}},"There is no expression data for"," ",r.createElement("strong",null,this.props.geneticEntity.geneticEntityName)," ","with the selected samples in"," ",r.createElement("strong",null,this.props.profileX.name),".")));return r.createElement("div",{style:{display:this.props.hidden?"none":"inherit",minHeight:826,position:"relative"}},e,r.createElement(lt.a,{isLoading:!this.props.hidden&&this.coExpressionsWithQValues.isPending,center:!0,size:"big"}))}},{key:"coExpressionDataPromise",get:function(){return this.props.coExpressionCache.get({geneticEntityId:this.props.geneticEntity.geneticEntityId.toString(),geneticEntityType:this.props.geneticEntity.geneticEntityType,profileX:this.props.profileX,profileY:this.props.profileY,allData:this.allDataRequested})}},{key:"plotShowMutations",get:function(){return this.props.plotState.plotShowMutations&&this.showMutationControls}},{key:"plotLogScale",get:function(){return this.props.plotState.plotLogScale&&this.showLogScaleControls}},{key:"showMutationControls",get:function(){return!!this.props.mutationCache}},{key:"showLogScaleControls",get:function(){var e=this.props.profileX.molecularProfileId.toLowerCase(),t=this.props.profileY.molecularProfileId.toLowerCase();return Object(In.A)(e)||Object(In.A)(t)}},{key:"requestAllDataButton",get:function(){return!this.plotData.isComplete||this.dataStore.allData.length||this.allDataRequested?null:r.createElement("div",null,r.createElement("span",{style:{marginRight:5}},(e=this.props.geneticEntity.geneticEntityName,"There are no genes with a Pearson or Spearman correlation with ".concat(e," of").concat(Jr,">").concat(Jr,"0.3").concat(Jr,"or").concat(Jr,"<").concat(Jr,"-0.3."))),r.createElement(Et.Button,{onClick:this.requestAllData},"Load data for all genes."));var e}}]),t}();fo([p.observable.ref],mo.prototype,"highlightedCoExpression",void 0),fo([p.observable],mo.prototype,"allDataRequested",void 0),fo([hr.bind,p.action],mo.prototype,"onSelectTableMode",null),fo([hr.bind,p.action],mo.prototype,"requestAllData",null),fo([p.computed],mo.prototype,"plotShowMutations",null),fo([p.computed],mo.prototype,"plotLogScale",null),fo([p.computed],mo.prototype,"showMutationControls",null),fo([p.computed],mo.prototype,"showLogScaleControls",null),fo([hr.bind],mo.prototype,"table",null),fo([hr.bind],mo.prototype,"plot",null);var yo=mo=fo([c.observer],mo),go=n(616);function vo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function So(e,t){return!t||"object"!==Co(t)&&"function"!=typeof t?_o(e):t}function _o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wo(e){return(wo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Eo(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oo(e,t)}function Oo(e,t){return(Oo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Co(e){return(Co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Po=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Co(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},xo=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},To=function(e){function t(){return bo(this,t),So(this,wo(t).apply(this,arguments))}return Eo(t,go["a"]),t}(),ko=function(e){function t(e){var n;return bo(this,t),(n=So(this,wo(t).call(this,e))).selectedProfileX=Object(g.S)({await:function(){return[n.xProfileOptions]},invoke:function(){return!n._selectedProfileX&&n.xProfileOptions.result.length>0?Promise.resolve(n.xProfileOptions.result[0].value):Promise.resolve(n._selectedProfileX)}}),n.selectedProfileY=Object(g.S)({await:function(){return[n.yProfileOptions]},invoke:function(){return!n._selectedProfileY&&n.yProfileOptions.result.length>0?Promise.resolve(n.yProfileOptions.result[0].value):Promise.resolve(n._selectedProfileY)}}),n.selectedGeneticEntity=Object(g.S)({await:function(){return[n.props.store.geneticEntities]},invoke:function(){return n._selectedGeneticEntity?Promise.resolve(n._selectedGeneticEntity):Promise.resolve(n.props.store.geneticEntities.result[0])}}),n.isSelectedGeneticEntityAGeneSet=Object(g.S)({await:function(){return[n.props.store.geneticEntities]},invoke:function(){if(n._selectedGeneticEntity){var e=!0,t=!1,r=void 0;try{for(var o,i=n.props.store.geneticEntities.result[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var a=o.value;if(a.geneticEntityType===d.d.GENESET&&a.geneticEntityId===n._selectedGeneticEntity.geneticEntityId)return Promise.resolve(!0)}}catch(e){t=!0,r=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}}return Promise.resolve(!1)}}),n.plotState={plotLogScale:!1,plotShowMutations:!0,plotShowRegressionLine:!1},n.xProfileOptions=Object(g.S)({await:function(){return[n.props.store.coexpressionTabMolecularProfiles,n.isSelectedGeneticEntityAGeneSet,n.props.store.molecularProfileIdToProfiledSamples]},invoke:function(){var e=[];return e=n.isSelectedGeneticEntityAGeneSet.result?Object(dr.b)(n.props.store.coexpressionTabMolecularProfiles.result):Object(dr.a)(n.props.store.coexpressionTabMolecularProfiles.result),Promise.resolve(Object(dr.c)(e,n.props.store.molecularProfileIdToProfiledSamples.result))}}),n.yProfileOptions=Object(g.S)({await:function(){return[n.props.store.coexpressionTabMolecularProfiles,n.props.store.molecularProfileIdToProfiledSamples]},invoke:function(){return Promise.resolve(Object(dr.c)(n.props.store.coexpressionTabMolecularProfiles.result,n.props.store.molecularProfileIdToProfiledSamples.result))}}),n.coExpressionCache=new To(function(e){return{await:function(){return[n.props.store.entrezGeneIdToReferenceGene,n.props.store.molecularProfileIdToProfiledSamples]},invoke:function(){return xo(_o(n),void 0,void 0,regeneratorRuntime.mark(function t(){var n,r,o,a,s,l,u,c,p,f,h;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=.3,e.allData&&(n=0),r=this.props.store.molecularProfileIdToProfiledSamples.result[e.profileX.molecularProfileId],o=this.props.store.molecularProfileIdToProfiledSamples.result[e.profileY.molecularProfileId],a={},e.profileX.molecularProfileId===e.profileY.molecularProfileId?a=this.props.store.studyToDataQueryFilter.result[e.profileX.studyId]:(s=i.a.intersectionWith(r,o,function(e,t){return e.uniqueSampleKey===t.uniqueSampleKey}),a.sampleIds=s.map(function(e){return e.sampleId})),void 0!==a.sampleIds||void 0!==a.sampleListId){t.next=8;break}return t.abrupt("return",Promise.resolve([]));case 8:if(null==(l=this.createDataQueryFilterForCoExpression(a,e.geneticEntityId,e.geneticEntityType))){t.next=25;break}return void 0,t.next=13,sr.a.fetchCoExpressionsUsingPOST({molecularProfileIdA:e.profileX.molecularProfileId,molecularProfileIdB:e.profileY.molecularProfileId,coExpressionFilter:l,threshold:n,$domain:void 0});case 13:if(u=t.sent,c={},e.profileY.molecularAlterationType!==d.a.GENESET_SCORE){t.next=21;break}return p=i.a.chain(u).map(function(e){return e.geneticEntityId}).uniq().value(),t.next=19,sr.a.fetchGenesetsUsingPOST({genesetIds:p});case 19:f=t.sent,c=i.a.keyBy(f,function(e){return e.genesetId});case 21:return h=this.props.store.entrezGeneIdToReferenceGene.result||{},t.abrupt("return",Promise.resolve(i.a.reduce(u,function(t,n){var r=void 0,o="-";return e.profileY.molecularAlterationType===d.a.GENESET_SCORE?r=c[n.geneticEntityId].name:void 0!==h[n.geneticEntityId]&&(r=h[n.geneticEntityId].hugoGeneSymbol,o=h[n.geneticEntityId].cytoband),void 0!==r&&t.push(Object.assign(Object.assign({},n),{geneticEntityName:r,cytoband:o})),t},[])));case 25:return t.abrupt("return",Promise.resolve([]));case 26:case"end":return t.stop()}},t,this)}))}}},function(e){return"".concat(e.geneticEntityId,",").concat(e.profileX.molecularProfileId,",").concat(e.profileY.molecularProfileId)}),window.resultsViewCoExpressionTab=_o(n),n.plotHandlers={onClickLogScale:Object(p.action)(function(){n.plotState.plotLogScale=!n.plotState.plotLogScale}),onClickShowMutations:Object(p.action)(function(){n.plotState.plotShowMutations=!n.plotState.plotShowMutations}),onClickShowRegressionLine:Object(p.action)(function(){n.plotState.plotShowRegressionLine=!n.plotState.plotShowRegressionLine})},n}var n,o,a;return Eo(t,r["Component"]),n=t,(o=[{key:"onSelectProfileX",value:function(e){this._selectedProfileX=e.value}},{key:"onSelectProfileY",value:function(e){this._selectedProfileY=e.value}},{key:"onSelectGeneticEntity",value:function(e){if(!this.props.store.geneticEntities.isComplete)throw new Error("Invalid Genetic Entity");var t=!0,n=!1,r=void 0;try{for(var o,i=this.props.store.geneticEntities.result[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;a.geneticEntityId.toString()===e&&(this._selectedGeneticEntity=a)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}},{key:"createDataQueryFilterForCoExpression",value:function(e,t,n){var r=void 0;return n===d.d.GENE?r=Object.assign(Object.assign({},e),{entrezGeneId:parseFloat(t)}):n===d.d.GENESET&&(r=Object.assign(Object.assign({},e),{genesetId:t})),r}},{key:"header",value:function(){return r.createElement("div",{style:{marginBottom:20}},this.profilesSelector)}},{key:"geneTabs",value:function(){if(this.selectedGeneticEntity.isComplete&&this.selectedProfileX.isComplete&&this.selectedProfileY.isComplete&&this.props.store.geneticEntities.isComplete&&this.props.store.coexpressionTabMolecularProfiles.isComplete){var e=[],t=!0,n=!1,o=void 0;try{for(var i,a=this.props.store.geneticEntities.result[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value,l=!0,u=!1,p=void 0;try{for(var f,m=(s.geneticEntityType===d.d.GENE?Object(dr.a)(this.props.store.coexpressionTabMolecularProfiles.result):Object(dr.b)(this.props.store.coexpressionTabMolecularProfiles.result))[Symbol.iterator]();!(l=(f=m.next()).done);l=!0){var y=f.value,g=!0,v=!1,b=void 0;try{for(var S,_=this.props.store.coexpressionTabMolecularProfiles.result[Symbol.iterator]();!(g=(S=_.next()).done);g=!0){var w=S.value;e.push(r.createElement(yo,{key:"".concat(s.geneticEntityId,",").concat(y.molecularProfileId,",").concat(w.molecularProfileId),coExpressionCache:this.coExpressionCache,geneticEntity:s,profileX:y,profileY:w,numericGeneMolecularDataCache:this.props.store.numericGeneMolecularDataCache,numericGenesetMolecularDataCache:this.props.store.numericGenesetMolecularDataCache,mutationCache:this.hasMutationData?this.props.store.mutationCache:void 0,hidden:y.molecularProfileId!==this.selectedProfileX.result||w.molecularProfileId!==this.selectedProfileY.result||s.geneticEntityId!==this.selectedGeneticEntity.result.geneticEntityId,plotState:this.plotState,plotHandlers:this.plotHandlers,coverageInformation:this.props.store.coverageInformation,studyToMutationMolecularProfile:this.props.store.studyToMutationMolecularProfile}))}}catch(e){v=!0,b=e}finally{try{g||null==_.return||_.return()}finally{if(v)throw b}}}}catch(e){u=!0,p=e}finally{try{l||null==m.return||m.return()}finally{if(u)throw p}}}}catch(e){n=!0,o=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw o}}return r.createElement("div",null,r.createElement(h.b,{id:"coexpressionTabGeneTabs",activeTabId:this.selectedGeneticEntity.result.geneticEntityId.toString(),onTabClick:this.onSelectGeneticEntity,className:"coexpressionTabGeneTabs pillTabs",unmountOnHide:!0,tabButtonStyle:"pills",arrowStyle:{"line-height":.8}},this.props.store.geneticEntities.result.map(function(e,t){return r.createElement(h.a,{key:t,id:e.geneticEntityId.toString(),linkText:e.geneticEntityName})})),r.createElement(c.Observer,null,this.header),e)}return r.createElement(lt.a,{isLoading:!0,center:!0,size:"big"})}},{key:"render",value:function(){var e=null;e=this.props.store.coexpressionTabMolecularProfiles.isComplete&&this.props.store.coexpressionTabMolecularProfiles.result.length>0?r.createElement("div",null,r.createElement(c.Observer,null,this.geneTabs)):r.createElement("div",{className:"alert alert-info"},"There are no available profiles in the queried studies.");var t=Object(g.E)(this.props.store.genes,this.props.store.molecularProfileIdToProfiledSamples,this.props.store.coexpressionTabMolecularProfiles);return r.createElement("div",{"data-test":"coExpressionTabDiv"},r.createElement("div",{className:"tabMessageContainer"},r.createElement(ue.a,{className:"coexp-oql-status-banner",store:this.props.store,tabReflectsOql:!1}),r.createElement(ce.a,{store:this.props.store,isUnaffected:!0})),"complete"===t&&e,r.createElement(lt.a,{center:!0,size:"big",isLoading:"pending"===t}))}},{key:"hasMutationData",get:function(){return!!i.a.find(this.props.store.molecularProfilesWithData.result,function(e){return e.molecularAlterationType===d.a.MUTATION_EXTENDED})}},{key:"profilesSelector",get:function(){return this.selectedGeneticEntity.isComplete&&this.selectedProfileX.isComplete&&this.selectedProfileY.isComplete&&this.xProfileOptions.isComplete&&this.yProfileOptions.isComplete&&this.props.store.coexpressionTabMolecularProfiles.isComplete&&this.isSelectedGeneticEntityAGeneSet.isComplete?r.createElement("div",null,r.createElement("div",{style:{float:"left",width:"100%",display:"flex",alignItems:"center"}},r.createElement("span",null,"Find"," ",Object(dr.b)(this.props.store.coexpressionTabMolecularProfiles.result).length>0?"genes/genesets":"genes"," ","in"," "),r.createElement("div",{style:{display:"inline-block",width:376,marginLeft:4,marginRight:4,zIndex:10}},r.createElement(ar.default,{name:"query-profile-select",value:this.selectedProfileY.result,onChange:this.onSelectProfileY,options:this.yProfileOptions.result,searchable:!1,clearable:!1,className:"coexpression-select-query-profile"})),r.createElement("span",null," ","that are correlated with"," ",this.selectedGeneticEntity.result.geneticEntityName," ","in"," "),r.createElement("div",{style:{display:"inline-block",width:376,marginLeft:4,marginRight:4,zIndex:15}},r.createElement(ar.default,{name:"subject-profile-select",value:this.selectedProfileX.result,onChange:this.onSelectProfileX,options:this.xProfileOptions.result,searchable:!1,clearable:!1,disabled:this.isSelectedGeneticEntityAGeneSet.result,className:"coexpression-select-subject-profile"})))):r.createElement(lt.a,{isLoading:!0,center:!0,size:"big"})}}])&&vo(n.prototype,o),a&&vo(n,a),t}();Po([p.observable],ko.prototype,"_selectedProfileX",void 0),Po([p.observable],ko.prototype,"_selectedProfileY",void 0),Po([p.observable],ko.prototype,"_selectedGeneticEntity",void 0),Po([p.observable],ko.prototype,"plotState",void 0),Po([hr.bind],ko.prototype,"onSelectProfileX",null),Po([hr.bind],ko.prototype,"onSelectProfileY",null),Po([hr.bind],ko.prototype,"onSelectGeneticEntity",null),Po([p.computed],ko.prototype,"hasMutationData",null),Po([hr.bind],ko.prototype,"header",null),Po([hr.bind],ko.prototype,"geneTabs",null);var Ao=ko=Po([c.observer],ko),Io=n(181),Do=n.n(Io),Mo=n(857),jo=n(65),No=n(852),Ro=n(836),Lo=n(128);function Go(e,t){window&&(window[e]=t)}var Fo=n(838),Bo=n(49),Vo=n(579),zo=n(981),qo=n(1015),Uo=n(985),Ho=n(988),Wo=n(989),Ko=n(990),$o=n(88),Qo=n(630),Yo=n(577),Xo=n(668),Zo=n(643),Jo=n.n(Zo),ei="#dc3912",ti="#3366cc",ni="Altered group",ri="Unaltered group";function oi(e,t,n,r,o){var a=Jo.a.parse("DUMMYGENE:".concat(o,";"))[0].alterations,s=r.map(function(r,o){var s=function(e,t){return Object(Ue.f)(e)&&e.label?e.label:Object(Ue.f)(e)?e.list.map(function(e){return i.a.isEqual(e.parsed_oql_line.alterations,t)?e.gene:e.oql_line.replace(";","")}).join(" / "):i.a.isEqual(e.parsed_oql_line.alterations,t)?e.gene:e.oql_line.replace(";","")}(r.oql,a),l=n.filter(function(e){return r.cases.samples[e.uniqueSampleKey].length>0}),u=Object(Xo.d)(l,l);return{name:s,description:"Number (percentage) of ".concat(e?"patients":"samples"," in the following track: ").concat(s),studies:u,origin:t}});return i.a.uniqBy(s,function(e){return e.name})}var ii=n(627);function ai(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function si(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function li(e,t){return!t||"object"!==pi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ui(e){return(ui=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ci(e,t){return(ci=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pi(e){return(pi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var di=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":pi(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},fi=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},hi=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=li(this,ui(t).call(this,e,r))).urlWrapper=n,o.resultsViewStore=r,o._currentTabId=void 0,o._queryDerivedGroups=Object(g.S)({await:function(){return[o.resultsViewStore.studyIds,o.resultsViewStore.alteredSamples,o.resultsViewStore.unalteredSamples,o.resultsViewStore.alteredPatients,o.resultsViewStore.unalteredPatients,o.resultsViewStore.samples,o.resultsViewStore.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine,o.resultsViewStore.defaultOQLQuery]},invoke:function(){var e,t,n,r,i=[];return i.push.apply(i,ai((e=o.usePatientLevelEnrichments,t=o.resultsViewStore.studyIds.result,n=o.resultsViewStore.alteredSamples.result,r=o.resultsViewStore.unalteredSamples.result,[{name:ni,description:"Number (percentage) of ".concat(e?"patients":"samples"," that have alterations in the query gene(s) that also have a deep deletion in the listed gene."),studies:Object(Xo.d)(n,n),origin:t,color:ei},{name:ri,description:"Number (percentage) of ".concat(e?"patients":"samples"," that do not have alterations in the query gene(s) that have a deep deletion in the listed gene."),studies:Object(Xo.d)(r,r),origin:t,color:ti}]))),i.push.apply(i,ai(oi(o.usePatientLevelEnrichments,o.resultsViewStore.studyIds.result,o.resultsViewStore.samples.result,o.resultsViewStore.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine.result,o.resultsViewStore.defaultOQLQuery.result))),Promise.resolve(i)}}),o._session=Object(g.S)({await:function(){return[o.resultsViewStore.studyIds]},invoke:function(){var e=o.urlWrapper.query.comparison_createdGroupsSessionId;return e?ii.a.getComparisonSession(e):Promise.resolve({id:"",groups:[],origin:o.resultsViewStore.studyIds.result})}}),o._originalGroups=Object(g.S)({await:function(){return[o._queryDerivedGroups,o._session,o.sampleSet]},invoke:function(){var e=Object(Mn.j)([ei,ti]),t=o._queryDerivedGroups.result.concat(o._session.result.groups),n=function(e,t,n,r){return t.map(function(t){var o=t.color||r(),i=Object(Yo.o)(t,n),a=i.nonExistentSamples,s=i.studies;return Object.assign({},t,{color:o,studies:s,nonExistentSamples:a,uid:t.name,nameWithOrdinal:t.name,ordinal:"",nameOfEnrichmentDirection:"",count:e?Object(Yo.r)({studies:s}):Object(Yo.s)({studies:s})})})}(o.usePatientLevelEnrichments,t,o.sampleSet.result,e);if(o.groupOrder){var r=Object(g.W)(o.groupOrder);return Promise.resolve(i.a.sortBy(n,function(e){return Object(nn.a)(r[e.name],Number.POSITIVE_INFINITY)}))}return Promise.resolve(n)}}),o.nameToUserCreatedGroup=Object(g.S)({await:function(){return[o._session]},invoke:function(){return Promise.resolve(i.a.keyBy(o._session.result.groups,function(e){return e.name}))}}),o}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ci(e,t)}(t,Qo["b"]),n=t,(r=[{key:"updateOverlapStrategy",value:function(e){this.urlWrapper.updateURL({comparison_overlapStrategy:e})}},{key:"setUsePatientLevelEnrichments",value:function(e){this.urlWrapper.updateURL({patient_enrichments:e.toString()})}},{key:"isGroupDeletable",value:function(e){return!!this.nameToUserCreatedGroup.isComplete&&e.name in this.nameToUserCreatedGroup.result}},{key:"updateSelectedGroups",value:function(e){this.urlWrapper.updateURL({comparison_selectedGroups:JSON.stringify(e)})}},{key:"isGroupSelected",value:function(e){return this.selectedGroups.includes(e)}},{key:"toggleGroupSelected",value:function(e){var t=this.selectedGroups.slice();t.includes(e)?t.splice(t.indexOf(e),1):t.push(e),this.updateSelectedGroups(t)}},{key:"selectAllGroups",value:function(){var e=this._originalGroups.result;this.updateSelectedGroups(e.map(function(e){return e.name}))}},{key:"deselectAllGroups",value:function(){this.updateSelectedGroups([])}},{key:"updateGroupOrder",value:function(e,t){var n=this.groupOrder;n||(n=this._originalGroups.result.map(function(e){return e.name}));var r=(n=n.slice()).splice(e,1)[0];n.splice(t,0,r),this.urlWrapper.updateURL({comparison_groupOrder:JSON.stringify(n)})}},{key:"saveAndGoToSession",value:function(e){return fi(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ii.a.addComparisonSession(e);case 2:n=t.sent,r=n.id,this.urlWrapper.updateURL({comparison_createdGroupsSessionId:r});case 5:case"end":return t.stop()}},t,this)}))}},{key:"overlapStrategy",get:function(){return this.urlWrapper.query.comparison_overlapStrategy||Qo.a.EXCLUDE}},{key:"usePatientLevelEnrichments",get:function(){return"true"===this.urlWrapper.query.patient_enrichments}},{key:"selectedGroups",get:function(){var e=this.urlWrapper.query.comparison_selectedGroups;return e?JSON.parse(e):[ni,ri]}},{key:"groupOrder",get:function(){var e=this.urlWrapper.query.comparison_groupOrder;return e?JSON.parse(e):void 0}},{key:"samples",get:function(){return this.resultsViewStore.samples}},{key:"studies",get:function(){return this.resultsViewStore.studies}}])&&si(n.prototype,r),o&&si(n,o),t}();di([p.observable],hi.prototype,"_currentTabId",void 0),di([p.action],hi.prototype,"updateOverlapStrategy",null),di([p.computed],hi.prototype,"overlapStrategy",null),di([p.computed],hi.prototype,"usePatientLevelEnrichments",null),di([m.default,p.action],hi.prototype,"setUsePatientLevelEnrichments",null),di([m.default],hi.prototype,"isGroupDeletable",null),di([p.computed],hi.prototype,"selectedGroups",null),di([p.action],hi.prototype,"updateSelectedGroups",null),di([m.default],hi.prototype,"isGroupSelected",null),di([m.default,p.action],hi.prototype,"toggleGroupSelected",null),di([m.default,p.action],hi.prototype,"selectAllGroups",null),di([m.default,p.action],hi.prototype,"deselectAllGroups",null),di([p.computed],hi.prototype,"groupOrder",null),di([p.action],hi.prototype,"updateGroupOrder",null),di([p.action],hi.prototype,"saveAndGoToSession",null);var mi=n(185),yi=n(1014);function gi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vi(e,t){return!t||"object"!==_i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bi(e){return(bi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Si(e,t){return(Si=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _i(e){return(_i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var wi=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":_i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Ei=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=vi(this,bi(t).apply(this,arguments))).ui=Object(Vo.a)({await:function(){return[e.props.store.existUnsequencedSamplesInAGene,e.props.store.genes]},render:function(){if(e.props.store.existUnsequencedSamplesInAGene.result){var t="";return t=e.props.store.genes.result.length>1?"The results below do not reflect gene panel data. Samples which were not profiled for some or all of the queried genes are included in the analysis below.":"The results below do not reflect gene panel data. Samples which were not profiled for the queried gene are included in the analysis below.",r.createElement("div",{className:"alert alert-warning"},r.createElement("span",{style:{verticalAlign:"middle"}},r.createElement("i",{className:"fa fa-md fa-exclamation-triangle",style:{verticalAlign:"middle !important",marginRight:6,marginBottom:1}}),t))}return null}}),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Si(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return this.ui.component}}])&&gi(n.prototype,o),i&&gi(n,i),t}(),Oi=Ei=wi([c.observer],Ei),Ci=n(676),Pi=n.n(Ci),xi=n(1010);function Ti(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ki(e){return(ki=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ai(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ii(e,t){return(Ii=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Di(e){return(Di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Mi=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Di(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ji=function(e){function t(e){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,i=ki(t).call(this,e),(n=!i||"object"!==Di(i)&&"function"!=typeof i?Ai(o):i).overlapStrategySelector=Object(Vo.a)({await:function(){return[n.store.overlapComputations]},render:function(){if(n.store.overlapComputations.result.totalSampleOverlap||n.store.overlapComputations.result.totalPatientOverlap){var e="Include overlapping samples and patients",t="Exclude overlapping samples and patients";return r.createElement("div",{style:{minWidth:355,width:355,zIndex:20}},r.createElement($o.default,{name:"select overlap strategy",onChange:function(e){e&&n.onOverlapStrategySelect(e)},options:[{label:e,value:Qo.a.INCLUDE},{label:t,value:Qo.a.EXCLUDE}],clearable:!1,searchable:!1,value:{label:n.store.overlapStrategy===Qo.a.EXCLUDE?t:e,value:n.store.overlapStrategy}}))}return null}}),n.tabs=Object(Vo.a)({await:function(){return[n.store._activeGroupsNotOverlapRemoved,n.store.activeGroups,n.store.mutationEnrichmentProfiles,n.store.copyNumberEnrichmentProfiles,n.store.mRNAEnrichmentProfiles,n.store.proteinEnrichmentProfiles,n.store.survivalClinicalDataExists]},render:function(){return r.createElement(h.b,{unmountOnHide:!1,activeTabId:n.props.urlWrapper.comparisonSubTabId,onTabClick:n.props.urlWrapper.setComparisonSubTabId,className:"secondaryNavigation comparisonTabSubTabs"},r.createElement(h.a,{id:Ot.a.OVERLAP,linkText:"Overlap"},r.createElement(zo.a,{store:n.store})),n.store.showSurvivalTab&&r.createElement(h.a,{id:mi.a.SURVIVAL,linkText:"Survival",anchorClassName:n.store.survivalTabUnavailable?"greyedOut":""},r.createElement("div",{className:"tabMessageContainer"},r.createElement(Oi,{store:n.props.store})),r.createElement(yi.a,{store:n.store})),r.createElement(h.a,{id:Ot.a.CLINICAL,linkText:"Clinical",anchorClassName:n.store.clinicalTabUnavailable?"greyedOut":""},r.createElement(qo.a,{store:n.store})),n.store.showMutationsTab&&r.createElement(h.a,{id:Ot.a.MUTATIONS,linkText:"Mutations",anchorClassName:n.store.mutationsTabUnavailable?"greyedOut":""},r.createElement(Uo.a,{store:n.store,resultsViewStore:n.props.store})),n.store.showCopyNumberTab&&r.createElement(h.a,{id:Ot.a.CNA,linkText:"Copy-number",anchorClassName:n.store.copyNumberUnavailable?"greyedOut":""},r.createElement(Ho.a,{store:n.store,resultsViewStore:n.props.store})),n.store.showMRNATab&&r.createElement(h.a,{id:Ot.a.MRNA,linkText:"mRNA",anchorClassName:n.store.mRNATabUnavailable?"greyedOut":""},r.createElement(Wo.a,{store:n.store,resultsViewMode:!0})),n.store.showProteinTab&&r.createElement(h.a,{id:Ot.a.PROTEIN,linkText:"Protein",anchorClassName:n.store.proteinTabUnavailable?"greyedOut":""},r.createElement(Ko.a,{store:n.store,resultsViewMode:!0})))},renderPending:function(){return r.createElement(lt.a,{center:!0,isLoading:!0,size:"big"})},renderError:function(){return r.createElement(ct.a,null)}}),window.comparisonTab=Ai(n),n.store=new hi(n.props.appStore,n.props.urlWrapper,n.props.store),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ii(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentWillUnmount",value:function(){this.store&&this.store.destroy()}},{key:"onOverlapStrategySelect",value:function(e){Object(jo.f)({category:"resultsView",action:"setComparisonTabOverlapStrategy",label:e.value}),this.store.updateOverlapStrategy(e.value)}},{key:"render",value:function(){return this.store?r.createElement("div",{"data-test":"ComparisonTabDiv"},r.createElement(lt.a,{center:!0,isLoading:this.store.newSessionPending,size:"big"}),r.createElement("div",{style:{display:"flex",justifyContent:"space-between",paddingBottom:25}},r.createElement("div",{className:Pi.a.headerControls},r.createElement(xi.a,{store:this.store,groupCollapseThreshold:40,isGroupDeletable:this.store.isGroupDeletable})),r.createElement("div",null,this.overlapStrategySelector.component)),r.createElement("div",{className:"tabMessageContainer",style:{marginBottom:10}},r.createElement(ue.a,{className:"comparison-oql-status-banner",store:this.props.store,tabReflectsOql:!0}),r.createElement(ce.a,{store:this.props.store})),this.tabs.component):null}}])&&Ti(n.prototype,o),i&&Ti(n,i),t}();Mi([p.observable.ref],ji.prototype,"store",void 0),Mi([m.default,p.action],ji.prototype,"onOverlapStrategySelect",null);var Ni=ji=Mi([c.observer],ji),Ri=n(662),Li=n(131),Gi=n.n(Li);function Fi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bi(e,t){return!t||"object"!==qi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vi(e){return(Vi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zi(e,t){return(zi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qi(e){return(qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ui=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":qi(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};function Hi(e,t){var n=new d.e(e,t);return Go("resultsViewPageStore",n),Object(p.reaction)(function(){return[n.studyIds,n.oqlText]},function(){n.studyIds.isComplete&&n.oqlText&&Object(jo.h)(n.studyIds.result,n.oqlText,n.hugoGeneSymbols,n.queriedVirtualStudies.result.length>0)}),n}function Wi(e){s()("#oncoprint-result-tab").click(e)}var Ki=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Bi(this,Vi(t).call(this,e))).quickOQLQueryStore=null,n.showTabs=!0,n.urlWrapper=new Lo.b(e.routing),Object(Bo.d)(n.urlWrapper),Object(Bo.f)(n.urlWrapper),Go("urlWrapper",n.urlWrapper),n.urlWrapper.hasSessionId?Object(ut.a)(n.urlWrapper.remoteSessionData,function(){n.resultsViewPageStore=Hi(e.appStore,n.urlWrapper)}):n.resultsViewPageStore=Hi(e.appStore,n.urlWrapper),n}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zi(e,t)}(t,r["Component"]),n=t,(i=[{key:"handleTabChange",value:function(e,t){this.urlWrapper.updateURL({},"results/".concat(e),!1,t)}},{key:"customTabCallback",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(Mo.a)(e,t,Object(g.B)().location.href,this.resultsViewPageStore,n)}},{key:"componentWillUnmount",value:function(){this.resultsViewPageStore.destroy(),this.urlWrapper.destroy()}},{key:"evaluateTabInclusion",value:function(e){var t=le.b.serverConfig.disabled_tabs||"",n=Object(Ot.e)(t).includes(e.id),r=this.resultsViewPageStore.tabId===e.id,o=!!e.hide&&e.hide();return r||!n&&!o}},{key:"handleQuickOQLSubmission",value:function(){this.quickOQLQueryStore.submit(),this.showOQLEditor=!1}},{key:"toggleOQLEditor",value:function(){this.showOQLEditor=!this.showOQLEditor}},{key:"getTabHref",value:function(e){return u.a.format({pathname:e,query:this.props.routing.location.query,hash:this.props.routing.location.hash})}},{key:"render",value:function(){var e=this;return this.urlWrapper.isPendingSession||this.urlWrapper.isLoadingSession?r.createElement(lt.a,{isLoading:!0,center:!0,size:"big"}):this.resultsViewPageStore.studies.isComplete&&!this.resultsViewPageStore.tabId?(setTimeout(function(){e.handleTabChange(e.resultsViewPageStore.tabId,!0)}),null):r.createElement(ir.a,{noMargin:!0,hideFooter:!0,className:"subhead-dark"},this.pageContent)}},{key:"tabs",get:function(){var e=this,t=this.resultsViewPageStore,n=[{id:Ot.b.ONCOPRINT,getTab:function(){return r.createElement(h.a,{key:0,id:Ot.b.ONCOPRINT,linkText:"OncoPrint"},r.createElement(Tn,{divId:"oncoprintDiv",store:t,urlWrapper:t.urlWrapper,key:t.hugoGeneSymbols.join(","),addOnBecomeVisibleListener:Wi}))}},{id:Ot.b.CANCER_TYPES_SUMMARY,getTab:function(){return r.createElement(h.a,{key:1,id:Ot.b.CANCER_TYPES_SUMMARY,linkText:"Cancer Types Summary"},r.createElement(f.b,{store:t}))}},{id:Ot.b.MUTUAL_EXCLUSIVITY,getTab:function(){return r.createElement(h.a,{key:5,id:Ot.b.MUTUAL_EXCLUSIVITY,linkText:"Mutual Exclusivity"},r.createElement(_e.a,{store:t,isSampleAlteredMap:t.isSampleAlteredMap}))},hide:function(){return!e.resultsViewPageStore.isSampleAlteredMap.isComplete||o.size(e.resultsViewPageStore.isSampleAlteredMap.result)<2}},{id:Ot.b.PLOTS,hide:function(){return!e.resultsViewPageStore.studies.isComplete||e.resultsViewPageStore.studies.result.length>1},getTab:function(){return r.createElement(h.a,{key:12,id:Ot.b.PLOTS,linkText:"Plots"},r.createElement(Hn.g,{store:t,urlWrapper:e.urlWrapper}))}},{id:Ot.b.MUTATIONS,getTab:function(){return r.createElement(h.a,{key:3,id:Ot.b.MUTATIONS,linkText:"Mutations"},r.createElement(Se,{store:t,appStore:e.props.appStore}))}},{id:Ot.b.COEXPRESSION,hide:function(){if(e.resultsViewPageStore.isThereDataForCoExpressionTab.isComplete&&e.resultsViewPageStore.studies.isComplete){var t=e.resultsViewPageStore.studies.result.length>1,n=!e.resultsViewPageStore.isThereDataForCoExpressionTab.result;return t||n}return!0},getTab:function(){return r.createElement(h.a,{key:7,id:Ot.b.COEXPRESSION,linkText:"Co-expression"},r.createElement(Ao,{store:t}))}},{id:Ot.b.COMPARISON,hide:function(){return e.resultsViewPageStore.survivalClinicalDataExists.isPending},getTab:function(){var t=e.resultsViewPageStore.survivalClinicalDataExists.result?"Comparison/Survival":"Comparison";return r.createElement(h.a,{key:10,id:Ot.b.COMPARISON,linkText:t},r.createElement(Ni,{urlWrapper:e.urlWrapper,appStore:e.props.appStore,store:e.resultsViewPageStore}))}},{id:Ot.b.CN_SEGMENTS,hide:function(){return!(e.resultsViewPageStore.studies.isComplete&&e.resultsViewPageStore.genes.isComplete&&e.resultsViewPageStore.referenceGenes.isComplete&&Object(Oe.h)(e.resultsViewPageStore.samples.result))},getTab:function(){return r.createElement(h.a,{key:6,id:Ot.b.CN_SEGMENTS,linkText:"CN Segments"},r.createElement(Lt,{store:t}))}},{id:Ot.b.NETWORK,hide:function(){return!0},getTab:function(){return r.createElement(h.a,{key:9,id:Ot.b.NETWORK,linkText:"Network"},r.createElement("div",{className:"alert alert-info"},"The Network tab has been retired. For similar functionality, please visit"," ",r.createElement("a",{href:"http://www.pathwaycommons.org/pcviz/",target:"_blank"},"http://www.pathwaycommons.org/pcviz/")))}},{id:Ot.b.PATHWAY_MAPPER,hide:function(){return"Internet Explorer"===Gi.a.name||!le.b.serverConfig.show_pathway_mapper||!e.resultsViewPageStore.studies.isComplete},getTab:function(){var n=t.sequencedSampleKeysByGene.isComplete&&t.oqlFilteredCaseAggregatedDataByOQLLine.isComplete&&t.genes.isComplete&&t.samples.isComplete&&t.patients.isComplete&&t.coverageInformation.isComplete&&t.sequencedSampleKeysByGene.isComplete&&t.sequencedPatientKeysByGene.isComplete&&t.selectedMolecularProfiles.isComplete&&t.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine.isComplete;return r.createElement(h.a,{key:13,id:Ot.b.PATHWAY_MAPPER,linkText:"Pathways"},n?r.createElement(ia,{store:t,appStore:e.props.appStore,urlWrapper:e.urlWrapper}):r.createElement(lt.a,{isLoading:!0,size:"big",center:!0}))}},{id:Ot.b.EXPRESSION,hide:function(){return 0===e.resultsViewPageStore.expressionProfiles.result.length||e.resultsViewPageStore.studies.result.length<2},getTab:function(){return r.createElement(h.a,{key:8,id:Ot.b.EXPRESSION,linkText:"Expression"},t.studyIdToStudy.isComplete&&t.filteredAndAnnotatedMutations.isComplete&&t.genes.isComplete&&t.coverageInformation.isComplete&&r.createElement(or,{store:t,studyMap:t.studyIdToStudy.result,genes:t.genes.result,expressionProfiles:t.expressionProfiles,numericGeneMolecularDataCache:t.numericGeneMolecularDataCache,mutations:t.filteredAndAnnotatedMutations.result,coverageInformation:t.coverageInformation.result}))}},{id:Ot.b.DOWNLOAD,getTab:function(){return r.createElement(h.a,{key:11,id:Ot.b.DOWNLOAD,linkText:"Download"},r.createElement(wt,{store:t}))}}].filter(this.evaluateTabInclusion).map(function(e){return e.getTab()});if(le.b.serverConfig.custom_tabs){var i=le.b.serverConfig.custom_tabs.filter(function(e){return"RESULTS_PAGE"===e.location}).map(function(t,n){return r.createElement(h.a,{key:100+n,id:"customTab"+n,unmountOnHide:!0===t.unmountOnHide,onTabDidMount:function(n){e.customTabCallback(n,t)},onTabUnmount:function(n){e.customTabCallback(n,t,!0)},linkText:t.title})});n=n.concat(i)}return n}},{key:"quickOQLSubmitButton",get:function(){if(this.quickOQLQueryStore)return r.createElement(r.Fragment,null,r.createElement("button",{className:"btn btn-primary btn-sm","data-test":"oqlQuickEditSubmitButton",style:{marginLeft:10},onClick:this.handleQuickOQLSubmission,disabled:!this.quickOQLQueryStore.submitEnabled},"Submit Query"),"",r.createElement("button",{className:"btn btn-link btn-sm",onClick:this.toggleOQLEditor},"Cancel"))}},{key:"showOQLEditor",get:function(){return!!this.quickOQLQueryStore},set:function(e){this.quickOQLQueryStore=e?Object(Fo.a)(this.urlWrapper.query,this.urlWrapper,!1):null}},{key:"pageContent",get:function(){var e=this;return this.resultsViewPageStore.invalidStudyIds.result.length>0?r.createElement("div",null,r.createElement("div",{className:"headBlock"}),r.createElement(No.a,{forkedMode:!1,showQuickSearchTab:!1,showDownloadTab:!1,showAlerts:!0,getQueryStore:function(){return Object(Fo.a)(e.urlWrapper.query,e.urlWrapper)}})):r.createElement(r.Fragment,null,this.resultsViewPageStore.isQueryInvalid&&r.createElement("div",{className:"alert alert-danger queryInvalid",style:{marginBottom:"40px"},role:"alert"},r.createElement(Ro.a,{sampleCount:this.resultsViewPageStore.samples.result.length,queryProductLimit:le.b.serverConfig.query_product_limit,email:le.b.serverConfig.skin_email_contact})),this.resultsViewPageStore.studies.isPending&&r.createElement(lt.a,{isLoading:!0,center:!0,size:"big"}),this.resultsViewPageStore.studies.isComplete&&r.createElement(r.Fragment,null,r.createElement(Do.a,null,r.createElement("title",null,Object(Oe.d)(this.resultsViewPageStore.hugoGeneSymbols,this.resultsViewPageStore.studies.result))),r.createElement("div",null,r.createElement("div",{className:"headBlock"},r.createElement(kn.a,{routingStore:this.props.routing,store:this.resultsViewPageStore,onToggleQueryFormVisibility:function(t){Object(p.runInAction)(function(){e.showTabs=t,e.showOQLEditor=!1})},onToggleOQLEditUIVisibility:this.toggleOQLEditor}),this.showOQLEditor&&r.createElement("div",{className:"quick_oql_edit"},r.createElement(Ri.b,{validateInputGeneQuery:!0,inputGeneQuery:this.quickOQLQueryStore.geneQuery,callback:function(){e.quickOQLQueryStore.geneQuery=arguments.length<=2?void 0:arguments[2]},location:Ri.a.DEFAULT,submitButton:this.quickOQLSubmitButton,error:this.quickOQLQueryStore.submitError,messages:this.quickOQLQueryStore.oqlMessages}))),this.showTabs&&!this.resultsViewPageStore.genesInvalid&&!this.resultsViewPageStore.isQueryInvalid&&r.createElement(h.b,{key:this.urlWrapper.hash,activeTabId:this.resultsViewPageStore.tabId,unmountOnHide:!1,onTabClick:function(t){return e.handleTabChange(t)},className:"mainTabs",getTabHref:this.getTabHref},this.tabs))))}}])&&Fi(n.prototype,i),a&&Fi(n,a),t}();Ui([p.observable.ref],Ki.prototype,"quickOQLQueryStore",void 0),Ui([p.observable],Ki.prototype,"showTabs",void 0),Ui([m.default],Ki.prototype,"customTabCallback",null),Ui([p.computed],Ki.prototype,"tabs",null),Ui([m.default],Ki.prototype,"evaluateTabInclusion",null),Ui([p.computed],Ki.prototype,"quickOQLSubmitButton",null),Ui([p.computed],Ki.prototype,"showOQLEditor",null),Ui([m.default,p.action],Ki.prototype,"handleQuickOQLSubmission",null),Ui([m.default,p.action],Ki.prototype,"toggleOQLEditor",null),Ui([m.default],Ki.prototype,"getTabHref",null),Ui([p.computed],Ki.prototype,"pageContent",null);Ki=Ui([Object(c.inject)("appStore","routing"),c.observer],Ki),n(1181),n(1182);var $i=n(1183),Qi=n.n($i);function Yi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Xi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zi(e){return(Zi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ji(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ea(e,t){return(ea=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ta(e){return(ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var na=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ta(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ra=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},oa=function(e){function t(e){var r,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,i=Zi(t).call(this,e),(r=!i||"object"!==ta(i)&&"function"!=typeof i?Ji(o):i).selectedPathway="",r.validNonQueryGenes=Object(g.S)({invoke:function(){return ra(Ji(r),void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Xt.q)(this.newGenesFromPathway);case 2:return t=e.sent,e.abrupt("return",t.map(function(e){return e.hugoGeneSymbol}));case 4:case"end":return e.stop()}},e,this)}))},onResult:function(e){if(e.length>0){var t=Object(Jt.toast)("Loading alteration data...",{autoClose:!1,draggable:!1,position:"bottom-left",className:Qi.a.toast});r.activeToasts.push(t)}}}),r.PathwayMapperComponent=void 0,r.activeToasts=[],r.accumulatedValidGenes={},r.accumulatedAlterationFrequencyDataForNonQueryGenes=[],r.toastReaction=Object(p.reaction)(function(){return[e.store.tabId]},function(e){Yi(e,1)[0]!==Ot.b.PATHWAY_MAPPER&&(r.activeToasts.length=0,Jt.toast.dismiss())},{fireImmediately:!0}),Promise.all([n.e(6),n.e(8)]).then(n.t.bind(null,1404,7)).then(function(e){r.PathwayMapperComponent=e.default}),r}var o,a,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ea(e,t)}(t,r["Component"]),o=t,(a=[{key:"render",value:function(){return this.isNewStoreReady&&(this.addGenomicData(this.alterationFrequencyData),this.dismissActiveToasts()),this.PathwayMapperComponent?r.createElement("div",{className:"pathwayMapper"},r.createElement("div",{className:"tabMessageContainer"},r.createElement(ue.a,{className:"plots-oql-status-banner",store:this.props.store,tabReflectsOql:!0}),r.createElement(ce.a,{store:this.props.store})),r.createElement("div",{"data-test":"pathwayMapperTabDiv",className:"cBioMode",style:{width:"99%"}},r.createElement(Et.Row,null,r.createElement(r.Fragment,null,r.createElement(ue.a,{className:"coexp-oql-status-banner",store:this.props.store,tabReflectsOql:!0}),r.createElement(this.PathwayMapperComponent,{isCBioPortal:!0,isCollaborative:!1,genes:this.props.store.genes.result,cBioAlterationData:this.alterationFrequencyData,onAddGenes:this.handleAddGenes,changePathwayHandler:this.handlePathwayChange,addGenomicDataHandler:this.addGenomicDataHandler,tableComponent:this.renderTable,validGenes:this.validGenes,toast:Jt.toast}),r.createElement(Jt.ToastContainer,{closeButton:r.createElement("i",{className:"fa fa-times"})}))))):null}},{key:"componentWillUnmount",value:function(){this.toastReaction()}},{key:"addGenomicDataHandler",value:function(e){this.addGenomicData=e}},{key:"handlePathwayChange",value:function(e){this.newGenesFromPathway=e}},{key:"handleAddGenes",value:function(e){Object(Ot.c)(this.props.urlWrapper,e)}},{key:"dismissActiveToasts",value:function(){var e=this;setTimeout(function(){e.activeToasts.forEach(function(e){Jt.toast.dismiss(e)})},2e3)}},{key:"renderTable",value:function(e,t,n){return r.createElement(Yt,{data:e,selectedPathway:t,changePathway:n})}},{key:"alterationFrequencyData",get:function(){return this.alterationFrequencyDataForQueryGenes.concat(this.alterationFrequencyDataForNonQueryGenes)}},{key:"alterationFrequencyDataForQueryGenes",get:function(){var e=this,t=[];return this.props.store.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine.result.forEach(function(n){var r=Object(Zt.c)(e.props.store.samples.result,e.props.store.patients.result,e.props.store.coverageInformation.result,e.props.store.sequencedSampleKeysByGene.result,e.props.store.sequencedPatientKeysByGene.result,e.props.store.selectedMolecularProfiles.result,n,!0,e.props.store.genes.result);r&&t.push(r)}),t}},{key:"alterationFrequencyDataForNonQueryGenes",get:function(){var e=this,t=[];return this.isNewStoreReady&&this.storeForAllData.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine.result.forEach(function(n){var r=Object(Zt.c)(e.storeForAllData.samples.result,e.storeForAllData.patients.result,e.storeForAllData.coverageInformation.result,e.storeForAllData.sequencedSampleKeysByGene.result,e.storeForAllData.sequencedPatientKeysByGene.result,e.storeForAllData.selectedMolecularProfiles.result,n,!1,e.props.store.genes.result);r&&t.push(r)}),this.accumulatedAlterationFrequencyDataForNonQueryGenes=this.accumulatedAlterationFrequencyDataForNonQueryGenes.concat(t),this.accumulatedAlterationFrequencyDataForNonQueryGenes}},{key:"isNewStoreReady",get:function(){return this.storeForAllData&&this.storeForAllData.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine.isComplete&&this.storeForAllData.samples.isComplete&&this.storeForAllData.patients.isComplete&&this.storeForAllData.coverageInformation.isComplete&&this.storeForAllData.sequencedSampleKeysByGene.isComplete&&this.storeForAllData.sequencedPatientKeysByGene.isComplete&&this.storeForAllData.selectedMolecularProfiles.isComplete}},{key:"storeForAllData",get:function(){return!this.urlWrapperForAllGenes||this.urlWrapperForAllGenes.hasSessionId&&this.urlWrapperForAllGenes.remoteSessionData.isPending?void 0:Hi(this.props.appStore,this.urlWrapperForAllGenes)}},{key:"urlWrapperForAllGenes",get:function(){var e;if(this.validNonQueryGenes.isComplete&&this.validNonQueryGenes.result.length>0){var t=i.a.cloneDeep(this.props.urlWrapper.query);t.gene_list=this.validNonQueryGenes.result.join(" "),e={query:t}}return e}},{key:"validGenes",get:function(){var e=this;return this.validNonQueryGenes.isComplete&&this.validNonQueryGenes.result.forEach(function(t){e.accumulatedValidGenes[t]=!0}),this.accumulatedValidGenes}}])&&Xi(o.prototype,a),s&&Xi(o,s),t}();na([p.observable],oa.prototype,"selectedPathway",void 0),na([p.observable],oa.prototype,"newGenesFromPathway",void 0),na([p.observable],oa.prototype,"activeToasts",void 0),na([p.observable],oa.prototype,"addGenomicData",void 0),na([p.observable.ref],oa.prototype,"PathwayMapperComponent",void 0),na([p.computed],oa.prototype,"alterationFrequencyData",null),na([p.computed],oa.prototype,"alterationFrequencyDataForQueryGenes",null),na([p.computed],oa.prototype,"alterationFrequencyDataForNonQueryGenes",null),na([p.computed],oa.prototype,"isNewStoreReady",null),na([p.computed],oa.prototype,"storeForAllData",null),na([p.computed],oa.prototype,"urlWrapperForAllGenes",null),na([p.computed],oa.prototype,"validGenes",null),na([m.default,p.action],oa.prototype,"addGenomicDataHandler",null),na([m.default,p.action],oa.prototype,"handlePathwayChange",null),na([m.default,p.action],oa.prototype,"handleAddGenes",null),na([m.default],oa.prototype,"dismissActiveToasts",null),na([m.default],oa.prototype,"renderTable",null);var ia=oa=na([c.observer],oa);function aa(e){return(aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function la(e,t){return!t||"object"!==pa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ua(e){return(ua=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ca(e,t){return(ca=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pa(e){return(pa="function"==typeof Symbol&&"symbol"===aa(Symbol.iterator)?function(e){return aa(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":aa(e)})(e)}n.d(t,"initStore",function(){return fa});var da=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":pa(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};function fa(e,t){var n=new d.e(e,t);return Go("resultsViewPageStore",n),Object(p.reaction)(function(){return[n.studyIds,n.oqlText]},function(){n.studyIds.isComplete&&n.oqlText&&Object(jo.h)(n.studyIds.result,n.oqlText,n.hugoGeneSymbols,n.queriedVirtualStudies.result.length>0)}),n}function ha(e){s()("#oncoprint-result-tab").click(e)}var ma=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=la(this,ua(t).call(this,e))).quickOQLQueryStore=null,n.showTabs=!0,n.urlWrapper=new Lo.b(e.routing),Object(Bo.d)(n.urlWrapper),Object(Bo.f)(n.urlWrapper),Go("urlWrapper",n.urlWrapper),n.urlWrapper.hasSessionId?Object(ut.a)(n.urlWrapper.remoteSessionData,function(){n.resultsViewPageStore=fa(e.appStore,n.urlWrapper)}):n.resultsViewPageStore=fa(e.appStore,n.urlWrapper),n}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ca(e,t)}(t,r["Component"]),n=t,(i=[{key:"handleTabChange",value:function(e,t){this.urlWrapper.updateURL({},"results/".concat(e),!1,t)}},{key:"customTabCallback",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(Mo.a)(e,t,Object(g.B)().location.href,this.resultsViewPageStore,n)}},{key:"componentWillUnmount",value:function(){this.resultsViewPageStore.destroy(),this.urlWrapper.destroy()}},{key:"evaluateTabInclusion",value:function(e){var t=le.b.serverConfig.disabled_tabs||"",n=Object(Ot.e)(t).includes(e.id),r=this.resultsViewPageStore.tabId===e.id,o=!!e.hide&&e.hide();return r||!n&&!o}},{key:"handleQuickOQLSubmission",value:function(){this.quickOQLQueryStore.submit(),this.showOQLEditor=!1}},{key:"toggleOQLEditor",value:function(){this.showOQLEditor=!this.showOQLEditor}},{key:"getTabHref",value:function(e){return u.a.format({pathname:e,query:this.props.routing.location.query,hash:this.props.routing.location.hash})}},{key:"render",value:function(){var e=this;return this.urlWrapper.isPendingSession||this.urlWrapper.isLoadingSession?r.createElement(lt.a,{isLoading:!0,center:!0,size:"big"}):this.resultsViewPageStore.studies.isComplete&&!this.resultsViewPageStore.tabId?(setTimeout(function(){e.handleTabChange(e.resultsViewPageStore.tabId,!0)}),null):r.createElement(ir.a,{noMargin:!0,hideFooter:!0,className:"subhead-dark"},this.pageContent)}},{key:"tabs",get:function(){var e=this,t=this.resultsViewPageStore,n=[{id:Ot.b.ONCOPRINT,getTab:function(){return r.createElement(h.a,{key:0,id:Ot.b.ONCOPRINT,linkText:"OncoPrint"},r.createElement(Tn,{divId:"oncoprintDiv",store:t,urlWrapper:t.urlWrapper,key:t.hugoGeneSymbols.join(","),addOnBecomeVisibleListener:ha}))}},{id:Ot.b.CANCER_TYPES_SUMMARY,getTab:function(){return r.createElement(h.a,{key:1,id:Ot.b.CANCER_TYPES_SUMMARY,linkText:"Cancer Types Summary"},r.createElement(f.b,{store:t}))}},{id:Ot.b.MUTUAL_EXCLUSIVITY,getTab:function(){return r.createElement(h.a,{key:5,id:Ot.b.MUTUAL_EXCLUSIVITY,linkText:"Mutual Exclusivity"},r.createElement(_e.a,{store:t,isSampleAlteredMap:t.isSampleAlteredMap}))},hide:function(){return!e.resultsViewPageStore.isSampleAlteredMap.isComplete||o.size(e.resultsViewPageStore.isSampleAlteredMap.result)<2}},{id:Ot.b.PLOTS,hide:function(){return!e.resultsViewPageStore.studies.isComplete||e.resultsViewPageStore.studies.result.length>1},getTab:function(){return r.createElement(h.a,{key:12,id:Ot.b.PLOTS,linkText:"Plots"},r.createElement(Hn.g,{store:t,urlWrapper:e.urlWrapper}))}},{id:Ot.b.MUTATIONS,getTab:function(){return r.createElement(h.a,{key:3,id:Ot.b.MUTATIONS,linkText:"Mutations"},r.createElement(Se,{store:t,appStore:e.props.appStore}))}},{id:Ot.b.COEXPRESSION,hide:function(){if(e.resultsViewPageStore.isThereDataForCoExpressionTab.isComplete&&e.resultsViewPageStore.studies.isComplete){var t=e.resultsViewPageStore.studies.result.length>1,n=!e.resultsViewPageStore.isThereDataForCoExpressionTab.result;return t||n}return!0},getTab:function(){return r.createElement(h.a,{key:7,id:Ot.b.COEXPRESSION,linkText:"Co-expression"},r.createElement(Ao,{store:t}))}},{id:Ot.b.COMPARISON,hide:function(){return e.resultsViewPageStore.survivalClinicalDataExists.isPending},getTab:function(){var t=e.resultsViewPageStore.survivalClinicalDataExists.result?"Comparison/Survival":"Comparison";return r.createElement(h.a,{key:10,id:Ot.b.COMPARISON,linkText:t},r.createElement(Ni,{urlWrapper:e.urlWrapper,appStore:e.props.appStore,store:e.resultsViewPageStore}))}},{id:Ot.b.CN_SEGMENTS,hide:function(){return!(e.resultsViewPageStore.studies.isComplete&&e.resultsViewPageStore.genes.isComplete&&e.resultsViewPageStore.referenceGenes.isComplete&&Object(Oe.h)(e.resultsViewPageStore.samples.result))},getTab:function(){return r.createElement(h.a,{key:6,id:Ot.b.CN_SEGMENTS,linkText:"CN Segments"},r.createElement(Lt,{store:t}))}},{id:Ot.b.NETWORK,hide:function(){return!0},getTab:function(){return r.createElement(h.a,{key:9,id:Ot.b.NETWORK,linkText:"Network"},r.createElement("div",{className:"alert alert-info"},"The Network tab has been retired. For similar functionality, please visit"," ",r.createElement("a",{href:"http://www.pathwaycommons.org/pcviz/",target:"_blank"},"http://www.pathwaycommons.org/pcviz/")))}},{id:Ot.b.PATHWAY_MAPPER,hide:function(){return"Internet Explorer"===Gi.a.name||!le.b.serverConfig.show_pathway_mapper||!e.resultsViewPageStore.studies.isComplete},getTab:function(){var n=t.sequencedSampleKeysByGene.isComplete&&t.oqlFilteredCaseAggregatedDataByOQLLine.isComplete&&t.genes.isComplete&&t.samples.isComplete&&t.patients.isComplete&&t.coverageInformation.isComplete&&t.sequencedSampleKeysByGene.isComplete&&t.sequencedPatientKeysByGene.isComplete&&t.selectedMolecularProfiles.isComplete&&t.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine.isComplete;return r.createElement(h.a,{key:13,id:Ot.b.PATHWAY_MAPPER,linkText:"Pathways"},n?r.createElement(ia,{store:t,appStore:e.props.appStore,urlWrapper:e.urlWrapper}):r.createElement(lt.a,{isLoading:!0,size:"big",center:!0}))}},{id:Ot.b.EXPRESSION,hide:function(){return 0===e.resultsViewPageStore.expressionProfiles.result.length||e.resultsViewPageStore.studies.result.length<2},getTab:function(){return r.createElement(h.a,{key:8,id:Ot.b.EXPRESSION,linkText:"Expression"},t.studyIdToStudy.isComplete&&t.filteredAndAnnotatedMutations.isComplete&&t.genes.isComplete&&t.coverageInformation.isComplete&&r.createElement(or,{store:t,studyMap:t.studyIdToStudy.result,genes:t.genes.result,expressionProfiles:t.expressionProfiles,numericGeneMolecularDataCache:t.numericGeneMolecularDataCache,mutations:t.filteredAndAnnotatedMutations.result,coverageInformation:t.coverageInformation.result}))}},{id:Ot.b.DOWNLOAD,getTab:function(){return r.createElement(h.a,{key:11,id:Ot.b.DOWNLOAD,linkText:"Download"},r.createElement(wt,{store:t}))}}].filter(this.evaluateTabInclusion).map(function(e){return e.getTab()});if(le.b.serverConfig.custom_tabs){var i=le.b.serverConfig.custom_tabs.filter(function(e){return"RESULTS_PAGE"===e.location}).map(function(t,n){return r.createElement(h.a,{key:100+n,id:"customTab"+n,unmountOnHide:!0===t.unmountOnHide,onTabDidMount:function(n){e.customTabCallback(n,t)},onTabUnmount:function(n){e.customTabCallback(n,t,!0)},linkText:t.title})});n=n.concat(i)}return n}},{key:"quickOQLSubmitButton",get:function(){if(this.quickOQLQueryStore)return r.createElement(r.Fragment,null,r.createElement("button",{className:"btn btn-primary btn-sm","data-test":"oqlQuickEditSubmitButton",style:{marginLeft:10},onClick:this.handleQuickOQLSubmission,disabled:!this.quickOQLQueryStore.submitEnabled},"Submit Query"),"",r.createElement("button",{className:"btn btn-link btn-sm",onClick:this.toggleOQLEditor},"Cancel"))}},{key:"showOQLEditor",get:function(){return!!this.quickOQLQueryStore},set:function(e){this.quickOQLQueryStore=e?Object(Fo.a)(this.urlWrapper.query,this.urlWrapper,!1):null}},{key:"pageContent",get:function(){var e=this;return this.resultsViewPageStore.invalidStudyIds.result.length>0?r.createElement("div",null,r.createElement("div",{className:"headBlock"}),r.createElement(No.a,{forkedMode:!1,showQuickSearchTab:!1,showDownloadTab:!1,showAlerts:!0,getQueryStore:function(){return Object(Fo.a)(e.urlWrapper.query,e.urlWrapper)}})):r.createElement(r.Fragment,null,this.resultsViewPageStore.isQueryInvalid&&r.createElement("div",{className:"alert alert-danger queryInvalid",style:{marginBottom:"40px"},role:"alert"},r.createElement(Ro.a,{sampleCount:this.resultsViewPageStore.samples.result.length,queryProductLimit:le.b.serverConfig.query_product_limit,email:le.b.serverConfig.skin_email_contact})),this.resultsViewPageStore.studies.isPending&&r.createElement(lt.a,{isLoading:!0,center:!0,size:"big"}),this.resultsViewPageStore.studies.isComplete&&r.createElement(r.Fragment,null,r.createElement(Do.a,null,r.createElement("title",null,Object(Oe.d)(this.resultsViewPageStore.hugoGeneSymbols,this.resultsViewPageStore.studies.result))),r.createElement("div",null,r.createElement("div",{className:"headBlock"},r.createElement(kn.a,{routingStore:this.props.routing,store:this.resultsViewPageStore,onToggleQueryFormVisibility:function(t){Object(p.runInAction)(function(){e.showTabs=t,e.showOQLEditor=!1})},onToggleOQLEditUIVisibility:this.toggleOQLEditor}),this.showOQLEditor&&r.createElement("div",{className:"quick_oql_edit"},r.createElement(Ri.b,{validateInputGeneQuery:!0,inputGeneQuery:this.quickOQLQueryStore.geneQuery,callback:function(){e.quickOQLQueryStore.geneQuery=arguments.length<=2?void 0:arguments[2]},location:Ri.a.DEFAULT,submitButton:this.quickOQLSubmitButton,error:this.quickOQLQueryStore.submitError,messages:this.quickOQLQueryStore.oqlMessages}))),this.showTabs&&!this.resultsViewPageStore.genesInvalid&&!this.resultsViewPageStore.isQueryInvalid&&r.createElement(h.b,{key:this.urlWrapper.hash,activeTabId:this.resultsViewPageStore.tabId,unmountOnHide:!1,onTabClick:function(t){return e.handleTabChange(t)},className:"mainTabs",getTabHref:this.getTabHref},this.tabs))))}}])&&sa(n.prototype,i),a&&sa(n,a),t}();da([p.observable.ref],ma.prototype,"quickOQLQueryStore",void 0),da([p.observable],ma.prototype,"showTabs",void 0),da([m.default],ma.prototype,"customTabCallback",null),da([p.computed],ma.prototype,"tabs",null),da([m.default],ma.prototype,"evaluateTabInclusion",null),da([p.computed],ma.prototype,"quickOQLSubmitButton",null),da([p.computed],ma.prototype,"showOQLEditor",null),da([m.default,p.action],ma.prototype,"handleQuickOQLSubmission",null),da([m.default,p.action],ma.prototype,"toggleOQLEditor",null),da([m.default],ma.prototype,"getTabHref",null),da([p.computed],ma.prototype,"pageContent",null),ma=da([Object(c.inject)("appStore","routing"),c.observer],ma);t.default=ma},,,,,,,function(e,t,n){"use strict";var r=n(178),o=n(2),i=n(3),a=n(22),s=n(33),l=n(66),u=n(679),c=n(634),p=n(635),d=n(713),f=n(637),h=n(638),m=n(702),y=n(572),g=n(102),v=n(680),b=n(636),S=n(712);function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var P=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":C(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},x=function(e){function t(e,n,r,o,a,s,u,c,p,d,f,h,m,g,v,b,S,_,O,P,x,T){var k,A,I;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),A=this,I=w(t).call(this,e,n,r,s,S,_,a,O,x,T),(k=!I||"object"!==C(I)&&"function"!=typeof I?E(A):I).mutationMapperConfig=e,k.mutationMapperStoreConfig=n,k.gene=r,k.samples=o,k.oncoKbCancerGenes=a,k.getMutationCountCache=u,k.getGenomeNexusCache=c,k.getGenomeNexusMutationAssessorCache=p,k.getDiscreteCNACache=d,k.studyToMolecularProfileDiscrete=f,k.studyIdToStudy=h,k.molecularProfileIdToMolecularProfile=m,k.clinicalDataForSamples=g,k.studiesForSamplesWithoutCancerTypeClinicalData=v,k.germlineConsentedSamples=b,k.indexedHotspotData=S,k.indexedVariantAnnotations=_,k.uniqueSampleKeyToTumorType=O,k.generateGenomeNexusHgvsgUrl=P,k.genomenexusClient=x,k.genomenexusInternalClient=T,k.cosmicData=Object(i.S)({await:function(){return[k.mutationData]},invoke:function(){return Object(y.m)(k.mutationData)}}),Object(l.labelMobxPromises)(E(k)),k}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,S["a"]),n=t,(r=[{key:"downloadDataFetcher",get:function(){return new b.a(this.mutationData,this.studyToMolecularProfileDiscrete,this.getGenomeNexusCache,this.getGenomeNexusMutationAssessorCache,this.getMutationCountCache,this.getDiscreteCNACache)}}])&&_(n.prototype,r),o&&_(n,o),t}();P([l.cached],x.prototype,"downloadDataFetcher",null);var T=n(6),k=n(4),A=n.n(k),I=n(654),D=n(571);function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){return!t||"object"!==M(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var L=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};function G(e,t){return"".concat(t)}function F(e){return"".concat(e.entrezGeneId)}function B(e,t,n){return L(this,void 0,void 0,regeneratorRuntime.mark(function o(){var i,a,s,l,u,c,p,d,f,h,m,y,g,v;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return i=Object.keys(t),o.next=3,Promise.all(i.map(function(o){var i=n[o],a=t[o],s=e.map(function(e){return e.entrezGeneId});return i&&a&&s.length>0?r.a.fetchMutationsInMolecularProfileUsingPOST({molecularProfileId:a.molecularProfileId,mutationFilter:Object.assign(Object.assign({},i),{entrezGeneIds:s}),projection:"DETAILED"}):Promise.resolve([])}));case 3:for(a=o.sent,s=A.a.keyBy(e,function(e){return e.entrezGeneId}),l=A.a.values(A.a.groupBy(A.a.flatten(a),"entrezGeneId")),u=[],c=!0,p=!1,d=void 0,o.prev=10,f=l[Symbol.iterator]();!(c=(h=f.next()).done);c=!0)(m=h.value).length&&(u.push({meta:m[0].entrezGeneId,data:[m]}),delete s[m[0].entrezGeneId]);o.next=18;break;case 14:o.prev=14,o.t0=o.catch(10),p=!0,d=o.t0;case 18:o.prev=18,o.prev=19,c||null==f.return||f.return();case 21:if(o.prev=21,!p){o.next=24;break}throw d;case 24:return o.finish(21);case 25:return o.finish(18);case 26:for(y=0,g=Object.keys(s);y<g.length;y++)v=g[y],u.push({meta:parseInt(v,10),data:[]});return o.abrupt("return",u);case 28:case"end":return o.stop()}},o,null,[[10,14,18,26],[19,,21,25]])}))}var V=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),j(this,N(t).call(this,F,G,B,e,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(t,D["a"]),t}(),z=n(598),q=n(588);function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){return!t||"object"!==U(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};function Q(e){return"".concat(e.molecularProfileId,"~").concat(e.entrezGeneId)}function Y(e,t){return"".concat(t.molecularProfileId,"~").concat(t.entrezGeneId)}function X(e,t){return $(this,void 0,void 0,regeneratorRuntime.mark(function n(){var o,i,a,s,l,u,c,p,d,f,h,m,y,g,v,b,S,_,w,E,O,C;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o=A.a.mapValues(A.a.groupBy(e,function(e){return e.molecularProfileId}),function(e){return e.map(function(e){return e.entrezGeneId})}),i=Object.keys(o).map(function(e){return{molecularProfileId:e,molecularDataFilter:Object.assign({entrezGeneIds:o[e]},t[e])}}),n.next=4,Promise.all(i.map(function(e){return r.a.fetchAllMolecularDataInMolecularProfileUsingPOST(e)}));case 4:for(a=n.sent,s={},l=!0,u=!1,c=void 0,n.prev=9,p=e[Symbol.iterator]();!(l=(d=p.next()).done);l=!0)f=d.value,s[Q(f)]={data:[[]],meta:f};n.next=17;break;case 13:n.prev=13,n.t0=n.catch(9),u=!0,c=n.t0;case 17:n.prev=17,n.prev=18,l||null==p.return||p.return();case 20:if(n.prev=20,!u){n.next=23;break}throw c;case 23:return n.finish(20);case 24:return n.finish(17);case 25:h=!0,m=!1,y=void 0,n.prev=28,g=a[Symbol.iterator]();case 30:if(h=(v=g.next()).done){n.next=54;break}for(b=v.value,S=!0,_=!1,w=void 0,n.prev=35,E=b[Symbol.iterator]();!(S=(O=E.next()).done);S=!0)C=O.value,s[Q(C)].data[0].push(C);n.next=43;break;case 39:n.prev=39,n.t1=n.catch(35),_=!0,w=n.t1;case 43:n.prev=43,n.prev=44,S||null==E.return||E.return();case 46:if(n.prev=46,!_){n.next=49;break}throw w;case 49:return n.finish(46);case 50:return n.finish(43);case 51:h=!0,n.next=30;break;case 54:n.next=60;break;case 56:n.prev=56,n.t2=n.catch(28),m=!0,y=n.t2;case 60:n.prev=60,n.prev=61,h||null==g.return||g.return();case 63:if(n.prev=63,!m){n.next=66;break}throw y;case 66:return n.finish(63);case 67:return n.finish(60);case 68:return n.abrupt("return",A.a.values(s));case 69:case"end":return n.stop()}},n,null,[[9,13,17,25],[18,,20,24],[28,56,60,68],[35,39,43,51],[44,,46,50],[61,,63,67]])}))}var Z=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=H(this,W(t).call(this,Q,Y,X,e))).molecularProfileIdToSampleFilter=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(t,D["a"]),t}(),J=n(103);function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e,t){return!t||"object"!==ee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var oe=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};function ie(e){return"".concat(e.molecularProfileId,"~").concat(e.genesetId)}function ae(e,t){return"".concat(t.molecularProfileId,"~").concat(t.genesetId)}function se(e,t){var n={},r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;n[ie(l)]={data:[[]],meta:l}}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}var u=!0,c=!1,p=void 0;try{for(var d,f=t[Symbol.iterator]();!(u=(d=f.next()).done);u=!0){var h=d.value,m=!0,y=!1,g=void 0;try{for(var v,b=h[Symbol.iterator]();!(m=(v=b.next()).done);m=!0){var S=v.value;n[ie({molecularProfileId:S.geneticProfileId,genesetId:S.genesetId})].data[0].push(S)}}catch(e){y=!0,g=e}finally{try{m||null==b.return||b.return()}finally{if(y)throw g}}}}catch(e){c=!0,p=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw p}}return A.a.values(n)}function le(e,t){return oe(this,void 0,void 0,regeneratorRuntime.mark(function n(){var r,o,i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=A.a.mapValues(A.a.groupBy(e,function(e){return e.molecularProfileId}),function(e){return e.map(function(e){return e.genesetId})}),o=Object.keys(r).map(function(e){return{geneticProfileId:e,genesetDataFilterCriteria:Object.assign({genesetIds:r[e]},t[e])}}),i=o.map(function(e){return J.a.fetchGeneticDataItemsUsingPOST(e)}),n.next=5,Promise.all(i);case 5:return a=n.sent,n.abrupt("return",se(e,a));case 7:case"end":return n.stop()}},n)}))}var ue=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),te(this,ne(t).call(this,ie,ae,le,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(t,D["a"]),t}();function ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function de(e,t,n){return t&&pe(e.prototype,t),n&&pe(e,n),e}var fe=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};function he(e,t){var n=e.genesetId,r=e.molecularProfileId;return fe(this,void 0,void 0,regeneratorRuntime.mark(function e(){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=Object.assign({genesetId:n,geneticProfileId:r},t[r]),e.abrupt("return",J.a.fetchCorrelatedGenesUsingPOST(o));case 2:case"end":return e.stop()}},e)}))}var me=function(){function e(t){ce(this,e),this.stateChain=Promise.resolve(t)}return de(e,[{key:"appendTransition",value:function(e){var t=this.stateChain.then(e);return this.stateChain=t.then(function(e){return e.newState}),t.then(function(e){return e.output})}}]),e}(),ye=function(){function e(t,n){ce(this,e),this.nextGeneIndexStateChain=new me(0),this.data=void 0,this.query=t,this.sampleFilterByProfile=n}return de(e,[{key:"next",value:function(e){return fe(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.nextGeneIndexStateChain.appendTransition(function(t){return fe(n,void 0,void 0,regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0!==this.data){n.next=4;break}return n.next=3,he(this.query,this.sampleFilterByProfile);case 3:this.data=n.sent;case 4:return r=this.data.slice(t,t+e),n.abrupt("return",{newState:t+r.length,output:r});case 6:case"end":return n.stop()}},n,this)}))}));case 1:case"end":return t.stop()}},t,this)}))}},{key:"reset",value:function(){this.nextGeneIndexStateChain.appendTransition(function(e){return Promise.resolve({newState:0,output:void 0})})}}]),e}(),ge=function(){function e(t){ce(this,e),this.iterations={},this.sampleFilterByProfile=t}return de(e,[{key:"initIteration",value:function(e,t){Object.prototype.hasOwnProperty.call(this.iterations,e)||(this.iterations[e]=new ye(t,this.sampleFilterByProfile))}},{key:"next",value:function(e,t){return fe(this,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.iterations[e].next(t));case 1:case"end":return n.stop()}},n,this)}))}},{key:"reset",value:function(e){this.iterations[e].reset()}}]),e}(),ve=n(604);function be(e){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(e,t){return!t||"object"!==be(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _e(e){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ee=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};function Oe(e){return"".concat(e.molecularProfileId,"~").concat(e.stableId)}function Ce(e,t){return"".concat(t.molecularProfileId,"~").concat(t.stableId)}function Pe(e,t){var n={},r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;n[Oe(l)]={data:[[]],meta:l}}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}var u=!0,c=!1,p=void 0;try{for(var d,f=t[Symbol.iterator]();!(u=(d=f.next()).done);u=!0){var h=d.value,m=!0,y=!1,g=void 0;try{for(var v,b=h[Symbol.iterator]();!(m=(v=b.next()).done);m=!0){var S=v.value;n[Oe({molecularProfileId:(S=xe(S)).molecularProfileId,stableId:S.stableId})].data[0].push(S)}}catch(e){y=!0,g=e}finally{try{m||null==b.return||b.return()}finally{if(y)throw g}}}}catch(e){c=!0,p=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw p}}return A.a.values(n)}function xe(e){if(!e.thresholdType){var t=/([><]?)(.+)/.exec(e.value);e.thresholdType=void 0,t&&(e.value=t[2],t[1].length>0&&(">"===t[1]?e.thresholdType=t[1]:"<"===t[1]&&(e.thresholdType=t[1])))}return e}function Te(e,t){return Ee(this,void 0,void 0,regeneratorRuntime.mark(function n(){var r,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=A.a.mapValues(A.a.groupBy(e,function(e){return e.molecularProfileId}),function(e){return e.map(function(e){return e.stableId})}),n.next=3,Object(ve.b)(r,t);case 3:return o=n.sent,n.abrupt("return",Pe(e,o));case 5:case"end":return n.stop()}},n)}))}var ke=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Se(this,_e(t).call(this,Oe,Ce,Te,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}(t,D["a"]),t}();function Ae(e){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ie(e,t){return!t||"object"!==Ae(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function De(e){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Me(e,t){return(Me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var je=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};function Ne(e){return e.hugoGeneSymbol.toUpperCase()}function Re(e){return je(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",r.a.fetchGenesUsingPOST({geneIdType:"HUGO_GENE_SYMBOL",geneIds:e.map(function(e){return e.hugoGeneSymbol.toUpperCase()})}));case 1:case"end":return t.stop()}},t)}))}var Le=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ie(this,De(t).call(this,Ne,Ne,Re))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Me(e,t)}(t,D["a"]),t}();function Ge(e){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fe(e,t){return!t||"object"!==Ge(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Be(e){return(Be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ve(e,t){return(Ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ze=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};function qe(e){return e.genesetId.toUpperCase()}function Ue(e){return ze(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",J.a.fetchGenesetsUsingPOST({genesetIds:e.map(function(e){return e.genesetId.toUpperCase()})}));case 1:case"end":return t.stop()}},t)}))}var He,We=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Fe(this,Be(t).call(this,qe,qe,Ue))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ve(e,t)}(t,D["a"]),t}(),Ke=n(628),$e=n(104),Qe=n.n($e),Ye=n(14),Xe=n.n(Ye),Ze=n(671),Je=n(585),et=n(616),tt=n(612),nt=n(592);function rt(e,t){return k.flatMap(e,function(e){return function(e,t){var n=[];switch(t){case He.Mutation:n.push(it(e));break;case He.CNA:n.push(ot(e));break;case He.MutationAndCNA:n.push(it(e)),n.push(ot(e))}return k.compact(n)}(e,t)})}function ot(e){var t=e.filter(function(e){return e.molecularAlterationType===Mt.COPY_NUMBER_ALTERATION}).reduce(function(e,t){var n;return n=t.molecularProfileId,/GISTIC/i.test(n)?e.gistic.push(t):!function(e){return/RAE/i.test(e)}(t.molecularProfileId)?e.other.push(t):e.rae.push(t),e},{gistic:[],rae:[],other:[]});return t.gistic.length?t.gistic[0]:t.rae.length?t.rae[0]:t.other.length?k.find(t.other,function(e){return e.showProfileInAnalysisTab}):void 0}function it(e){return k.find(e,function(e){return e.molecularAlterationType===Mt.MUTATION_EXTENDED})}!function(e){e[e.MutationAndCNA=0]="MutationAndCNA",e[e.Mutation=1]="Mutation",e[e.CNA=2]="CNA"}(He||(He={}));var at,st=n(67),lt=n(622),ut=n(653),ct=n(707),pt=n(664),dt=n(658);!function(e){e.InvalidGenes="INVALID GENE SYMBOLS"}(at||(at={}));var ft,ht=n(127),mt=n(627),yt=n(577),gt=n(8),vt=n(574),bt=n(708),St=n(606),_t=n(621),wt=n(593),Et=n(15),Ot=n(602);function Ct(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tt(e){return(Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",function(){return Mt}),n.d(t,"c",function(){return jt}),n.d(t,"b",function(){return Nt}),n.d(t,"d",function(){return At}),n.d(t,"e",function(){return Lt});var kt,At,It=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Tt(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Dt=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},Mt={MUTATION_EXTENDED:"MUTATION_EXTENDED",COPY_NUMBER_ALTERATION:"COPY_NUMBER_ALTERATION",MRNA_EXPRESSION:"MRNA_EXPRESSION",PROTEIN_LEVEL:"PROTEIN_LEVEL",FUSION:"FUSION",GENESET_SCORE:"GENESET_SCORE",METHYLATION:"METHYLATION",GENERIC_ASSAY:"GENERIC_ASSAY",STRUCTURAL_VARIANT:"STRUCTURAL_VARIANT",MUTATION_UNCALLED:"MUTATION_UNCALLED"},jt={TREATMENT_RESPONSE:"TREATMENT_RESPONSE"},Nt={DISCRETE:"DISCRETE",CONTINUOUS:"CONTINUOUS",ZSCORE:"Z-SCORE",MAF:"MAF",LOGVALUE:"LOG-VALUE",LOG2VALUE:"LOG2-VALUE"};!function(e){e.w_mut="w_mut",e.w_cna="w_cna",e.w_mut_cna="w_mut_cna"}(kt||(kt={})),function(e){e.GENE="gene",e.GENESET="geneset"}(At||(At={}));var Rt=(xt(ft={},kt.w_mut,"all_cases_with_mutation_data"),xt(ft,kt.w_cna,"all_cases_with_cna_data"),xt(ft,kt.w_mut_cna,"all_cases_with_mutation_and_cna_data"),ft);var Lt=function(){function e(t,n){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.appStore=t,this.resultsPageSettingsVisible=!1,this.checkingVirtualStudies=!1,this.urlValidationError=null,this.ajaxErrors=[],this.sessionIdURL="",this.queryFormVisible=!1,this.modifyQueryParams=void 0,this.selectedMolecularProfiles=Object(i.S)({await:function(){return[s.studyToMolecularProfiles,s.studies]},invoke:function(){if(s.studies.result.length>1||0===s.selectedMolecularProfileIds.length)return Promise.resolve(rt(s.studyToMolecularProfiles.result,s.profileFilter));var e=k.keyBy(s.selectedMolecularProfileIds,function(e){return e});return Promise.resolve(s.molecularProfilesInStudies.result.filter(function(t){return t.molecularProfileId in e}))}}),this.clinicalAttributes_profiledIn=Object(i.S)({await:function(){return[s.coverageInformation,s.molecularProfileIdToMolecularProfile,s.selectedMolecularProfiles,s.studyIds]},invoke:function(){return Promise.resolve(Object(pt.f)(s.coverageInformation.result.samples,s.molecularProfileIdToMolecularProfile.result,s.selectedMolecularProfiles.result,1===s.studyIds.result.length))}}),this.comparisonGroups=Object(i.S)({await:function(){return[s.queriedStudies]},invoke:function(){return Dt(s,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,o,i,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],!this.appStore.isLoggedIn){e.next=12;break}return e.prev=2,e.t0=t,e.next=6,mt.a.getGroupsForStudies(this.queriedStudies.result.map(function(e){return e.studyId}));case 6:e.t1=e.sent,t=e.t0.concat.call(e.t0,e.t1),e.next=12;break;case 10:e.prev=10,e.t2=e.catch(2);case 12:n=!0,r=!1,o=void 0,e.prev=15,i=this.comparisonGroupsReferencedInURL[Symbol.iterator]();case 17:if(n=(a=i.next()).done){e.next=27;break}return s=a.value,e.t3=t,e.next=22,mt.a.getGroup(s);case 22:e.t4=e.sent,e.t3.push.call(e.t3,e.t4);case 24:n=!0,e.next=17;break;case 27:e.next=33;break;case 29:e.prev=29,e.t5=e.catch(15),r=!0,o=e.t5;case 33:e.prev=33,e.prev=34,n||null==i.return||i.return();case 36:if(e.prev=36,!r){e.next=39;break}throw o;case 39:return e.finish(36);case 40:return e.finish(33);case 41:return e.abrupt("return",t);case 42:case"end":return e.stop()}},e,this,[[2,10],[15,29,33,41],[34,,36,40]])}))}}),this.clinicalAttributes_comparisonGroupMembership=Object(i.S)({await:function(){return[s.comparisonGroups]},invoke:function(){return Promise.resolve(Object(pt.e)(s.comparisonGroups.result))}}),this.selectedMolecularProfileIdsByAlterationType=Object(i.S)({await:function(){return[s.selectedMolecularProfiles]},invoke:function(){var e=s.selectedMolecularProfiles.result;return Promise.resolve(k.groupBy(e,"molecularAlterationType"))}}),this.clinicalAttributes=Object(i.S)({await:function(){return[s.studyIds,s.clinicalAttributes_profiledIn,s.clinicalAttributes_comparisonGroupMembership,s.samples,s.patients]},invoke:function(){return Dt(s,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.fetchClinicalAttributesUsingPOST({studyIds:this.studyIds.result});case 2:return t=e.sent,n=[{clinicalAttributeId:nt.c.MutationSpectrum,datatype:"COUNTS_MAP",description:"Number of point mutations in the sample counted by different types of nucleotide changes.",displayName:"Mutation spectrum",patientAttribute:!1,studyId:"",priority:"0"}],this.studyIds.result.length>1&&n.push({clinicalAttributeId:nt.c.StudyOfOrigin,datatype:"STRING",description:"Study which the sample is a part of.",displayName:"Study of origin",patientAttribute:!1,studyId:"",priority:"0"}),this.samples.result.length!==this.patients.result.length&&n.push({clinicalAttributeId:nt.c.NumSamplesPerPatient,datatype:"NUMBER",description:"Number of queried samples for each patient.",displayName:"# Samples per Patient",patientAttribute:!0}),e.abrupt("return",t.concat(n).concat(this.clinicalAttributes_profiledIn.result).concat(this.clinicalAttributes_comparisonGroupMembership.result));case 7:case"end":return e.stop()}},e,this)}))}}),this.clinicalAttributeIdToClinicalAttribute=Object(i.S)({await:function(){return[s.clinicalAttributes]},invoke:function(){return Promise.resolve(k.keyBy(s.clinicalAttributes.result,"clinicalAttributeId"))}}),this.clinicalAttributeIdToAvailableSampleCount=Object(i.S)({await:function(){return[s.samples,s.sampleSet,s.studies,s.clinicalAttributes,s.studyToDataQueryFilter,s.clinicalAttributes_profiledIn,s.clinicalAttributes_comparisonGroupMembership]},invoke:function(){return Dt(s,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,o,i,a,s,l,u,c,p,d,f,h,m,y,g,v,b,S,_,w,E,O,C,P,x,T,A,I,D,M;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return 1===this.studies.result.length?(n=this.studies.result[0].studyId,o=this.studyToDataQueryFilter.result[n],t=o.sampleListId?{sampleListId:o.sampleListId}:{sampleIdentifiers:o.sampleIds.map(function(e){return{sampleId:e,studyId:n}})}):t={sampleIdentifiers:this.samples.result.map(function(e){return{sampleId:e.sampleId,studyId:e.studyId}})},e.next=3,r.a.getClinicalAttributeCountsUsingPOST({clinicalAttributeCountFilter:t});case 3:for(i=e.sent,a=k.reduce(i,function(e,t){return e[t.clinicalAttributeId]=e[t.clinicalAttributeId]||0,e[t.clinicalAttributeId]+=t.count,e},{}),s=!0,l=!1,u=void 0,e.prev=8,c=this.clinicalAttributes.result[Symbol.iterator]();!(s=(p=c.next()).done);s=!0)(d=p.value).clinicalAttributeId in a||(a[d.clinicalAttributeId]=0);e.next=16;break;case 12:e.prev=12,e.t0=e.catch(8),l=!0,u=e.t0;case 16:e.prev=16,e.prev=17,s||null==c.return||c.return();case 19:if(e.prev=19,!l){e.next=22;break}throw u;case 22:return e.finish(19);case 23:return e.finish(16);case 24:for(a[nt.c.NumSamplesPerPatient]=this.samples.result.length,a[nt.c.StudyOfOrigin]=this.samples.result.length,f=0,0,h=!0,m=!1,y=void 0,e.prev=30,g=this.samples.result[Symbol.iterator]();!(h=(v=g.next()).done);h=!0)b=v.value,f+=+!!b.sequenced,+!!b.copyNumberSegmentPresent;e.next=38;break;case 34:e.prev=34,e.t1=e.catch(30),m=!0,y=e.t1;case 38:e.prev=38,e.prev=39,h||null==g.return||g.return();case 41:if(e.prev=41,!m){e.next=44;break}throw y;case 44:return e.finish(41);case 45:return e.finish(38);case 46:for(a[nt.c.MutationSpectrum]=f,S=!0,_=!1,w=void 0,e.prev=50,E=this.clinicalAttributes_profiledIn.result[Symbol.iterator]();!(S=(O=E.next()).done);S=!0)C=O.value,a[C.clinicalAttributeId]=this.samples.result.length;e.next=58;break;case 54:e.prev=54,e.t2=e.catch(50),_=!0,w=e.t2;case 58:e.prev=58,e.prev=59,S||null==E.return||E.return();case 61:if(e.prev=61,!_){e.next=64;break}throw w;case 64:return e.finish(61);case 65:return e.finish(58);case 66:for(P=this.sampleSet.result,x=!0,T=!1,A=void 0,e.prev=70,I=this.clinicalAttributes_comparisonGroupMembership.result[Symbol.iterator]();!(x=(D=I.next()).done);x=!0)M=D.value,a[M.clinicalAttributeId]=Object(yt.s)(M.comparisonGroup.data,function(e,t){return P.has({studyId:e,sampleId:t})});e.next=78;break;case 74:e.prev=74,e.t3=e.catch(70),T=!0,A=e.t3;case 78:e.prev=78,e.prev=79,x||null==I.return||I.return();case 81:if(e.prev=81,!T){e.next=84;break}throw A;case 84:return e.finish(81);case 85:return e.finish(78);case 86:return e.abrupt("return",a);case 87:case"end":return e.stop()}},e,this,[[8,12,16,24],[17,,19,23],[30,34,38,46],[39,,41,45],[50,54,58,66],[59,,61,65],[70,74,78,86],[79,,81,85]])}))}}),this.cnSegments=Object(i.S)({await:function(){return[s.samples]},invoke:function(){return Object(y.l)(s.samples.result)}},[]),this.cnSegmentsByChromosome=Object(i.S)({await:function(){return[s.genes,s.samples,s.referenceGenes]},invoke:function(){var e=k.uniq(s.referenceGenes.result.map(function(e){return e.chromosome}));return Promise.resolve(e.reduce(function(e,t){return e[t]=Object(i.S)({invoke:function(){return Object(y.l)(s.samples.result,t)}}),e},{}))}},{}),this.molecularData=Object(i.S)({await:function(){return[s.studyToDataQueryFilter,s.genes,s.selectedMolecularProfiles,s.samples]},invoke:function(){var e=Object(Je.i)(s.selectedMolecularProfiles.result),t=s.genes.result;if(e.length&&null!=t&&t.length){var n=[];if(e.forEach(function(e){s.samples.result.forEach(function(t){t.studyId===e.studyId&&n.push({molecularProfileId:e.molecularProfileId,sampleId:t.sampleId})})}),n.length)return r.a.fetchMolecularDataInMultipleMolecularProfilesUsingPOST({projection:"DETAILED",molecularDataMultipleStudyFilter:{entrezGeneIds:k.map(s.genes.result,function(e){return e.entrezGeneId}),sampleMolecularIdentifiers:n}})}return Promise.resolve([])}}),this.nonSelectedDownloadableMolecularData=Object(i.S)({await:function(){return[s.studyToDataQueryFilter,s.genes,s.nonSelectedDownloadableMolecularProfiles,s.samples]},invoke:function(){var e=Object(Je.i)(s.nonSelectedDownloadableMolecularProfiles.result),t=s.genes.result;if(e.length&&null!=t&&t.length){var n=k.groupBy(e,function(e){return e.studyId}),o=s.samples.result.filter(function(e){return e.studyId in n}).reduce(function(e,t){return e=e.concat(n[t.studyId].map(function(e){return{molecularProfileId:e.molecularProfileId,sampleId:t.sampleId}}))},[]);if(o.length)return r.a.fetchMolecularDataInMultipleMolecularProfilesUsingPOST({projection:"DETAILED",molecularDataMultipleStudyFilter:{entrezGeneIds:k.map(s.genes.result,function(e){return e.entrezGeneId}),sampleMolecularIdentifiers:o}})}return Promise.resolve([])}}),this.coexpressionTabMolecularProfiles=Object(i.S)({await:function(){return[s.molecularProfilesInStudies]},invoke:function(){return Promise.resolve(Object(lt.d)(Object(lt.a)(s.molecularProfilesInStudies.result).concat(Object(lt.b)(s.molecularProfilesInStudies.result))))}}),this.isThereDataForCoExpressionTab=Object(i.S)({await:function(){return[s.molecularProfilesInStudies,s.genes,s.samples]},invoke:function(){var e=Object(lt.a)(s.molecularProfilesInStudies.result),t=k.groupBy(e,"studyId"),n=k.flatten(s.samples.result.map(function(e){var n=t[e.studyId];return n?n.map(function(t){return{molecularProfileId:t.molecularProfileId,sampleId:e.sampleId}}):[]})),o=s.genes.result.map(function(e){return e.entrezGeneId});return n.length>0&&o.length>0?r.a.fetchMolecularDataInMultipleMolecularProfilesUsingPOSTWithHttpInfo({molecularDataMultipleStudyFilter:{entrezGeneIds:o,sampleMolecularIdentifiers:n},projection:"META"}).then(function(e){return parseInt(e.header["total-count"],10)>0}):Promise.resolve(!1)}}),this.remoteNgchmUrl=Object(i.S)({await:function(){return[s.studyIds]},invoke:function(){return Dt(s,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t="",1!==this.studyIds.result.length){e.next=12;break}return n={studyid:this.studyIds.result[0],format:"json"},e.prev=3,e.next=6,Xe.a.get("https://bioinformatics.mdanderson.org/study2url").timeout(3e4).query(n);case 6:r=e.sent,e.next=11;break;case 9:e.prev=9,e.t0=e.catch(3);case 11:r&&r.body.fileContent&&(o=JSON.parse(r.body.fileContent.trimEnd())).length>=1&&(t="https://bioinformatics.mdanderson.org/TCGA/NGCHMPortal?"+o[0]);case 12:return e.abrupt("return",Promise.resolve(t));case 13:case"end":return e.stop()}},e,this,[[3,9]])}))}}),this.molecularProfilesWithData=Object(i.S)({await:function(){return[s.molecularProfilesInStudies,s.studyToDataQueryFilter,s.genes,s.genesets,s.genericAssayEntitiesGroupByGenericAssayType]},invoke:function(){return Dt(s,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,o,i,a,s,l,u,c,p=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=[],o=this.studyToDataQueryFilter.result,i=!0,a=!1,s=void 0,e.prev=6,l=function(){var e=c.value,i=o[e.studyId];if(!i||!i.sampleIds&&!i.sampleListId)return"continue";var a=e.molecularProfileId,s=Object.assign({entrezGeneIds:p.genes.result.map(function(e){return e.entrezGeneId})},i);e.molecularAlterationType===Mt.MUTATION_EXTENDED?n.push(r.a.fetchMutationsInMolecularProfileUsingPOSTWithHttpInfo({molecularProfileId:a,mutationFilter:s,projection:"META"}).then(function(n){parseInt(n.header["sample-count"],10)>0&&t.push(e)})):e.molecularAlterationType===Mt.MUTATION_UNCALLED||(e.molecularAlterationType===Mt.GENESET_SCORE||e.molecularAlterationType===Mt.GENERIC_ASSAY?t.push(e):n.push(r.a.fetchAllMolecularDataInMolecularProfileUsingPOSTWithHttpInfo({molecularProfileId:a,molecularDataFilter:s,projection:"META"}).then(function(n){parseInt(n.header["total-count"],10)>0&&t.push(e)})))},u=this.molecularProfilesInStudies.result[Symbol.iterator]();case 9:if(i=(c=u.next()).done){e.next=16;break}if("continue"!==l()){e.next=13;break}return e.abrupt("continue",13);case 13:i=!0,e.next=9;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(6),a=!0,s=e.t0;case 22:e.prev=22,e.prev=23,i||null==u.return||u.return();case 25:if(e.prev=25,!a){e.next=28;break}throw s;case 28:return e.finish(25);case 29:return e.finish(22);case 30:return e.next=32,Promise.all(n);case 32:return e.abrupt("return",t);case 33:case"end":return e.stop()}},e,this,[[6,18,22,30],[23,,25,29]])}))}}),this.nonOqlFilteredAlterations=Object(i.S)({await:function(){return[s.filteredAndAnnotatedMutations,s.filteredAndAnnotatedMolecularData,s.selectedMolecularProfiles,s.entrezGeneIdToGene]},invoke:function(){var e=new z.b(s.selectedMolecularProfiles.result),t=s.entrezGeneIdToGene.result,n=[];return n=(n=n.concat(s.filteredAndAnnotatedMutations.result)).concat(s.filteredAndAnnotatedMolecularData.result),Promise.resolve(n.map(function(n){var r=Object(dt.a)(n,e);return r.hugoGeneSymbol=t[n.entrezGeneId].hugoGeneSymbol,r.molecularProfileAlterationType=e.molecularAlterationType(n.molecularProfileId),r}))}}),this.oqlFilteredMutationsReport=Object(i.S)({await:function(){return[s._filteredAndAnnotatedMutationsReport,s.selectedMolecularProfiles,s.defaultOQLQuery]},invoke:function(){return Promise.resolve(k.mapValues(s._filteredAndAnnotatedMutationsReport.result,function(e){return Object(q.c)(s.oqlText,e,new z.b(s.selectedMolecularProfiles.result),s.defaultOQLQuery.result)}))}}),this.oqlFilteredMolecularDataReport=Object(i.S)({await:function(){return[s._filteredAndAnnotatedMolecularDataReport,s.selectedMolecularProfiles,s.defaultOQLQuery]},invoke:function(){return Promise.resolve(k.mapValues(s._filteredAndAnnotatedMolecularDataReport.result,function(e){return Object(q.c)(s.oqlText,e,new z.b(s.selectedMolecularProfiles.result),s.defaultOQLQuery.result)}))}}),this.oqlFilteredAlterations=Object(i.S)({await:function(){return[s.filteredAndAnnotatedMutations,s.filteredAndAnnotatedMolecularData,s.selectedMolecularProfiles,s.defaultOQLQuery]},invoke:function(){if(""!=s.oqlText.trim()){var e=[];return e=(e=e.concat(s.filteredAndAnnotatedMutations.result)).concat(s.filteredAndAnnotatedMolecularData.result),Promise.resolve(Object(q.c)(s.oqlText,e,new z.b(s.selectedMolecularProfiles.result),s.defaultOQLQuery.result))}return Promise.resolve([])}}),this.oqlFilteredCaseAggregatedData=Object(i.S)({await:function(){return[s.oqlFilteredAlterations,s.samples,s.patients]},invoke:function(){return Promise.resolve({samples:Object(y.W)(s.oqlFilteredAlterations.result,function(e){return e.uniqueSampleKey},s.samples.result.map(function(e){return e.uniqueSampleKey})),patients:Object(y.W)(s.oqlFilteredAlterations.result,function(e){return e.uniquePatientKey},s.patients.result.map(function(e){return e.uniquePatientKey}))})}}),this.nonOqlFilteredCaseAggregatedData=Object(i.S)({await:function(){return[s.nonOqlFilteredAlterations,s.samples,s.patients]},invoke:function(){return Promise.resolve({samples:Object(y.W)(s.nonOqlFilteredAlterations.result,function(e){return e.uniqueSampleKey},s.samples.result.map(function(e){return e.uniqueSampleKey})),patients:Object(y.W)(s.nonOqlFilteredAlterations.result,function(e){return e.uniquePatientKey},s.patients.result.map(function(e){return e.uniquePatientKey}))})}}),this.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine=Object(i.S)({await:function(){return[s.filteredAndAnnotatedMutations,s.filteredAndAnnotatedMolecularData,s.selectedMolecularProfiles,s.defaultOQLQuery,s.samples,s.patients]},invoke:function(){var e=[].concat(Ct(s.filteredAndAnnotatedMutations.result),Ct(s.filteredAndAnnotatedMolecularData.result)),t=new z.b(s.selectedMolecularProfiles.result),n=s.defaultOQLQuery.result,r=s.samples.result,o=s.patients.result;if(""===s.oqlText.trim())return Promise.resolve([]);var i=Object(q.e)(s.oqlText,e,t,n);return Promise.resolve(i.map(function(i){return{cases:Object(Je.s)(i,r,o),oql:i,mergedTrackOqlList:Object(Je.m)(i,n,e,t,r,o)}}))}}),this.isSampleAlteredMap=Object(i.S)({await:function(){return[s.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine,s.samples,s.coverageInformation,s.selectedMolecularProfiles,s.studyToMolecularProfiles]},invoke:function(){return Dt(s,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(Je.q)(this.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine.result,this.samples.result,this.oqlText,this.coverageInformation.result,this.selectedMolecularProfiles.result.map(function(e){return e.molecularProfileId}),this.studyToMolecularProfiles.result));case 1:case"end":return e.stop()}},e,this)}))}}),this.oqlFilteredCaseAggregatedDataByOQLLine=Object(i.S)({await:function(){return[s.filteredAndAnnotatedMutations,s.filteredAndAnnotatedMolecularData,s.selectedMolecularProfiles,s.defaultOQLQuery,s.samples,s.patients]},invoke:function(){if(""===s.oqlText.trim())return Promise.resolve([]);var e=Object(q.d)(s.oqlText,[].concat(Ct(s.filteredAndAnnotatedMutations.result),Ct(s.filteredAndAnnotatedMolecularData.result)),new z.b(s.selectedMolecularProfiles.result),s.defaultOQLQuery.result);return Promise.resolve(e.map(function(e){return{cases:Object(Je.s)(e,s.samples.result,s.patients.result),oql:e}}))}}),this.studyToMolecularProfiles=Object(i.S)({await:function(){return[s.molecularProfilesInStudies]},invoke:function(){return Promise.resolve(k.groupBy(s.molecularProfilesInStudies.result,function(e){return e.studyId}))}}),this.coverageInformation=Object(i.S)({await:function(){return[s.studyToMolecularProfiles,s.genes,s.samples,s.patients]},invoke:function(){return Dt(s,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,o,i,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],this.samples.result.forEach(function(e){var n=a.studyToMolecularProfiles.result[e.studyId];if(n){var r=e.sampleId,o=!0,i=!1,s=void 0;try{for(var l,u=n[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;t.push({molecularProfileId:c.molecularProfileId,sampleId:r})}}catch(e){i=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(i)throw s}}}}),!t.length||!this.genes.result.length){e.next=8;break}return e.next=5,r.a.fetchGenePanelDataInMultipleMolecularProfilesUsingPOST({sampleMolecularIdentifiers:t});case 5:n=e.sent,e.next=9;break;case 8:n=[];case 9:if(o=k.uniq(n.map(function(e){return e.genePanelId}).filter(function(e){return!!e})),i=[],!o.length){e.next=15;break}return e.next=14,r.a.fetchGenePanelsUsingPOST({genePanelIds:o,projection:"DETAILED"});case 14:i=e.sent;case 15:return e.abrupt("return",Object(Je.g)(n,i,this.samples.result,this.patients.result,this.genes.result));case 16:case"end":return e.stop()}},e,this)}))}},{samples:{},patients:{}}),this.sequencedSampleKeys=Object(i.S)({await:function(){return[s.samples,s.coverageInformation,s.selectedMolecularProfiles]},invoke:function(){var e=s.coverageInformation.result,t=s.selectedMolecularProfiles.result.map(function(e){return e.molecularProfileId});return Promise.resolve(k.chain(s.samples.result).filter(function(n){return k.some(Object(tt.b)(n.uniqueSampleKey,t,e))}).map(function(e){return e.uniqueSampleKey}).value())}}),this.sequencedPatientKeys=Object(i.S)({await:function(){return[s.sampleKeyToSample,s.sequencedSampleKeys]},invoke:function(){return Dt(s,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.sampleKeyToSample.result,e.abrupt("return",k.chain(this.sequencedSampleKeys.result).map(function(e){return t[e].uniquePatientKey}).uniq().value());case 2:case"end":return e.stop()}},e,this)}))}}),this.sequencedSampleKeysByGene=Object(i.S)({await:function(){return[s.samples,s.genes,s.coverageInformation,s.selectedMolecularProfiles]},invoke:function(){var e=s.coverageInformation.result,t=s.selectedMolecularProfiles.result.map(function(e){return e.molecularProfileId});return Promise.resolve(s.genes.result.reduce(function(n,r){return n[r.hugoGeneSymbol]=s.samples.result.map(function(e){return e.uniqueSampleKey}).filter(function(n){return k.some(Object(tt.b)(n,t,e,r.hugoGeneSymbol))}),n},{}))}}),this.existUnsequencedSamplesInAGene=Object(i.S)({await:function(){return[s.samples,s.sequencedSampleKeysByGene]},invoke:function(){var e=s.samples.result.length;return Promise.resolve(k.some(s.sequencedSampleKeysByGene.result,function(t){return t.length<e}))}}),this.sequencedPatientKeysByGene=Object(i.S)({await:function(){return[s.sampleKeyToSample,s.sequencedSampleKeysByGene]},invoke:function(){return Dt(s,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.sampleKeyToSample.result,e.abrupt("return",k.mapValues(this.sequencedSampleKeysByGene.result,function(e){return k.chain(e).map(function(e){return t[e].uniquePatientKey}).uniq().value()}));case 2:case"end":return e.stop()}},e,this)}))}}),this.alteredSampleKeys=Object(i.S)({await:function(){return[s.samples,s.oqlFilteredCaseAggregatedData]},invoke:function(){var e=s.oqlFilteredCaseAggregatedData.result.samples;return Promise.resolve(s.samples.result.map(function(e){return e.uniqueSampleKey}).filter(function(t){return e[t].length>0}))}}),this.alteredSamples=Object(i.S)({await:function(){return[s.sampleKeyToSample,s.alteredSampleKeys]},invoke:function(){return Promise.resolve(s.alteredSampleKeys.result.map(function(e){return s.sampleKeyToSample.result[e]}))}},[]),this.alteredPatients=Object(i.S)({await:function(){return[s.patients,s.oqlFilteredCaseAggregatedData]},invoke:function(){var e=s.oqlFilteredCaseAggregatedData.result;return Promise.resolve(s.patients.result.filter(function(t){return!!e.patients[t.uniquePatientKey].length}))}}),this.alteredPatientKeys=Object(i.S)({await:function(){return[s.alteredPatients]},invoke:function(){return Promise.resolve(s.alteredPatients.result.map(function(e){return e.uniquePatientKey}))}}),this.unalteredSampleKeys=Object(i.S)({await:function(){return[s.samples,s.oqlFilteredCaseAggregatedData]},invoke:function(){var e=s.oqlFilteredCaseAggregatedData.result;return Promise.resolve(s.samples.result.map(function(e){return e.uniqueSampleKey}).filter(function(t){return!e.samples[t].length}))}}),this.unalteredSamples=Object(i.S)({await:function(){return[s.sampleKeyToSample,s.unalteredSampleKeys]},invoke:function(){var e=[];return s.unalteredSampleKeys.result.forEach(function(t){return e.push(s.sampleKeyToSample.result[t])}),Promise.resolve(e)}},[]),this.unalteredPatientKeys=Object(i.S)({await:function(){return[s.unalteredPatients]},invoke:function(){return Promise.resolve(s.unalteredPatients.result.map(function(e){return e.uniquePatientKey}))}}),this.unalteredPatients=Object(i.S)({await:function(){return[s.patients,s.oqlFilteredCaseAggregatedData]},invoke:function(){var e=s.oqlFilteredCaseAggregatedData.result;return Promise.resolve(s.patients.result.filter(function(t){return!e.patients[t.uniquePatientKey].length}))}}),this.oqlFilteredAlterationsByGene=Object(i.S)({await:function(){return[s.genes,s.oqlFilteredAlterations]},invoke:function(){var e=k.groupBy(s.oqlFilteredAlterations.result,function(e){return e.gene.hugoGeneSymbol}),t=s.genes.result.reduce(function(t,n){return t[n.hugoGeneSymbol]=e[n.hugoGeneSymbol],t},{});return Promise.resolve(t)}}),this.defaultOQLQuery=Object(i.S)({await:function(){return[s.selectedMolecularProfiles]},invoke:function(){var e=k.uniq(k.map(s.selectedMolecularProfiles.result,function(e){return e.molecularAlterationType}));return Promise.resolve(function(e,t,n){for(var r={},o=0;o<e.length;o++)switch(e[o]){case"MUTATION_EXTENDED":r.MUT=!0,r.FUSION=!0;break;case"COPY_NUMBER_ALTERATION":r.AMP=!0,r.HOMDEL=!0;break;case"MRNA_EXPRESSION":r["EXP>="+t]=!0,r["EXP<=-"+t]=!0;break;case"PROTEIN_LEVEL":r["PROT>="+n]=!0,r["PROT<=-"+n]=!0}return Object.keys(r).join(" ")}(e,s.zScoreThreshold,s.rppaScoreThreshold))}}),this.survivalClinicalAttributesPrefix=Object(i.S)({await:function(){return[s.clinicalAttributes]},invoke:function(){return Promise.resolve(Object(y.V)(s.clinicalAttributes.result))}}),this.survivalClinicalDataExists=Object(i.S)({await:function(){return[s.samples,s.survivalClinicalAttributesPrefix]},invoke:function(){return Object(y.E)(s.samples.result,s.survivalClinicalAttributesPrefix.result)}}),this.samplesByDetailedCancerType=Object(i.S)({await:function(){return[s.samples,s.clinicalDataForSamples]},invoke:function(){var e=s.groupSamplesByCancerType(s.clinicalDataForSamples.result,s.samples.result,"CANCER_TYPE");return 1===k.size(e)&&(e=s.groupSamplesByCancerType(s.clinicalDataForSamples.result,s.samples.result,"CANCER_TYPE_DETAILED")),Promise.resolve(e)}}),this.samplesExtendedWithClinicalData=Object(i.S)({await:function(){return[s.samples,s.clinicalDataForSamples,s.studies]},invoke:function(){return Promise.resolve((e=s.samples.result,t=s.clinicalDataForSamples.result,n=s.studies.result,r=k.groupBy(t,function(e){return e.uniqueSampleKey}),o=e.map(function(e){var t=r[e.uniqueSampleKey];return t&&t.forEach(function(t){switch(t.clinicalAttributeId){case"CANCER_TYPE_DETAILED":e.cancerTypeDetailed=t.value;break;case"CANCER_TYPE":e.cancerType=t.value}}),e}),i=k.keyBy(n,function(e){return e.studyId}),o.forEach(function(e){if(!e.cancerType){var t=i[e.studyId];e.cancerType=t?t.cancerType.name:"Unknown"}e.cancerType&&!e.cancerTypeDetailed&&(e.cancerTypeDetailed=e.cancerType)}),o));var e,t,n,r,o,i}}),this.oqlFilteredAlterationsByGeneBySampleKey=Object(i.S)({await:function(){return[s.oqlFilteredAlterationsByGene,s.samples]},invoke:function(){return Dt(s,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k.mapValues(this.oqlFilteredAlterationsByGene.result,function(e){return k.groupBy(e,function(e){return e.uniqueSampleKey})}));case 1:case"end":return e.stop()}},e,this)}))}}),this.studyWithSamples=Object(i.S)({await:function(){return[s.samples,s.queriedStudies,s.queriedVirtualStudies]},invoke:function(){return Promise.resolve(Object(vt.L)(s.samples.result,s.queriedStudies.result,s.queriedVirtualStudies.result))},onError:function(e){},default:[]}),this.mutationProfiles=Object(i.S)({await:function(){return[s.selectedMolecularProfiles]},invoke:function(){return Dt(s,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.selectedMolecularProfiles.result.filter(function(e){return"MUTATION_EXTENDED"===e.molecularAlterationType}));case 1:case"end":return e.stop()}},e,this)}))},onError:function(e){},default:[]}),this.cnaProfiles=Object(i.S)({await:function(){return[s.selectedMolecularProfiles]},invoke:function(){return Dt(s,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.selectedMolecularProfiles.result.filter(function(e){return"COPY_NUMBER_ALTERATION"===e.molecularAlterationType&&"DISCRETE"===e.datatype}));case 1:case"end":return e.stop()}},e,this)}))},onError:function(e){},default:[]}),this.virtualStudyParams=Object(i.S)({await:function(){return[s.samples,s.studyIds,s.studyWithSamples,s.queriedVirtualStudies]},invoke:function(){return Promise.resolve({user:s.appStore.userName,name:1===s.queriedVirtualStudies.result.length?s.queriedVirtualStudies.result[0].data.name:void 0,description:1===s.queriedVirtualStudies.result.length?s.queriedVirtualStudies.result[0].data.description:void 0,studyWithSamples:s.studyWithSamples.result,selectedSamples:s.samples.result,filter:{studyIds:s.studyIds.result},attributesMetaSet:s.chartMetaSet})}}),this.givenSampleOrder=Object(i.S)({await:function(){return[s.samples,s.samplesSpecification]},invoke:function(){return Dt(s,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.samplesSpecification.result.find(function(e){return!e.sampleId})){e.next=2;break}return e.abrupt("return",[]);case 2:return t=k.reduce(this.samplesSpecification.result,function(e,t,n){return e[t.studyId]=e[t.studyId]||{},e[t.studyId][t.sampleId]=n,e},{}),e.abrupt("return",k.sortBy(this.samples.result,function(e){return t[e.studyId][e.sampleId]}));case 4:case"end":return e.stop()}},e,this)}))}}),this.studyToSampleIds=Object(i.S)({await:function(){return[s.samplesSpecification]},invoke:function(){return Dt(s,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,o,a,s,l,u,c,p,d,f,h,m,y,g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t=[],n={},o=!0,a=!1,s=void 0,e.prev=5,l=this.samplesSpecification.result[Symbol.iterator]();!(o=(u=l.next()).done);o=!0)(c=u.value).sampleId?(n[c.studyId]=n[c.studyId]||{},n[c.studyId][c.sampleId]=!0):c.sampleListId&&t.push(c);e.next=13;break;case 9:e.prev=9,e.t0=e.catch(5),a=!0,s=e.t0;case 13:e.prev=13,e.prev=14,o||null==l.return||l.return();case 16:if(e.prev=16,!a){e.next=19;break}throw s;case 19:return e.finish(16);case 20:return e.finish(13);case 21:if(!(t.length>0)){e.next=44;break}return e.next=24,r.a.fetchSampleListsUsingPOST({sampleListIds:t.map(function(e){return e.sampleListId}),projection:"DETAILED"});case 24:for(p=e.sent,d=!0,f=!1,h=void 0,e.prev=28,m=p[Symbol.iterator]();!(d=(y=m.next()).done);d=!0)g=y.value,n[g.studyId]=Object(i.Y)(g.sampleIds);e.next=36;break;case 32:e.prev=32,e.t1=e.catch(28),f=!0,h=e.t1;case 36:e.prev=36,e.prev=37,d||null==m.return||m.return();case 39:if(e.prev=39,!f){e.next=42;break}throw h;case 42:return e.finish(39);case 43:return e.finish(36);case 44:return e.abrupt("return",n);case 45:case"end":return e.stop()}},e,this,[[5,9,13,21],[14,,16,20],[28,32,36,44],[37,,39,43]])}))}},{}),this.studyToSampleListId=Object(i.S)({await:function(){return[s.samplesSpecification]},invoke:function(){return Dt(s,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.samplesSpecification.result.reduce(function(e,t){return t.sampleListId&&(e[t.studyId]=t.sampleListId),e},{}));case 1:case"end":return e.stop()}},e,this)}))}}),this.samplesSpecification=Object(i.S)({await:function(){return[s.queriedVirtualStudies]},invoke:function(){return Dt(s,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,o,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sampleListCategory){e.next=8;break}if(!(this.queriedVirtualStudies.result.length>0)){e.next=5;break}return e.abrupt("return",Object(st.g)(this.samplesSpecificationParams,this.queriedVirtualStudies.result));case 5:return e.abrupt("return",this.samplesSpecificationParams);case 6:e.next=17;break;case 8:return t=[],t=this.queriedVirtualStudies.result.length>0?Object(st.g)(this.samplesSpecificationParams,this.queriedVirtualStudies.result):this.samplesSpecificationParams,n=k.chain(t).map(function(e){return e.studyId}).uniq().value(),e.next=13,Promise.all(n.map(function(e){return r.a.getAllSampleListsInStudyUsingGET({studyId:e,projection:"SUMMARY"})}));case 13:return o=e.sent,i=Rt[this.sampleListCategory],a=o.reduce(function(e,t){var n=k.find(t,function(e){return e.category===i});return n&&e.push({studyId:n.studyId,sampleListId:n.sampleListId,sampleId:void 0}),e},[]),e.abrupt("return",a);case 17:case"end":return e.stop()}},e,this)}))}}),this.studyToMutationMolecularProfile=Object(i.S)({await:function(){return[s.molecularProfilesInStudies]},invoke:function(){var e={},t=!0,n=!1,r=void 0;try{for(var o,i=s.molecularProfilesInStudies.result[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value,l=a.studyId;!e[l]&&Object(y.Z)(a)&&(e[l]=a)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return Promise.resolve(e)}},{}),this.allStudies=Object(i.S)({invoke:function(){return Dt(s,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.getAllStudiesUsingGET({projection:"SUMMARY"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))}},[]),this.everyStudyIdToStudy=Object(i.S)({await:function(){return[s.allStudies]},invoke:function(){return Promise.resolve(k.keyBy(s.allStudies.result,function(e){return e.studyId}))}}),this.queriedVirtualStudies=Object(i.S)({await:function(){return[s.allStudies]},invoke:function(){return Dt(s,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,o,i,a,s,l,u,c,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.allStudies.result,n=this.cancerStudyIds,r=k.differenceWith(n,t,function(e,t){return e===t.studyId}),o=[],i=!0,a=!1,s=void 0,e.prev=7,l=r[Symbol.iterator]();case 9:if(i=(u=l.next()).done){e.next=24;break}return c=u.value,e.prev=11,e.next=14,ht.a.getVirtualStudy(c);case 14:p=e.sent,o=o.concat(p),e.next=21;break;case 18:return e.prev=18,e.t0=e.catch(11),e.abrupt("continue",21);case 21:i=!0,e.next=9;break;case 24:e.next=30;break;case 26:e.prev=26,e.t1=e.catch(7),a=!0,s=e.t1;case 30:e.prev=30,e.prev=31,i||null==l.return||l.return();case 33:if(e.prev=33,!a){e.next=36;break}throw s;case 36:return e.finish(33);case 37:return e.finish(30);case 38:return e.abrupt("return",Promise.resolve(o));case 39:case"end":return e.stop()}},e,this,[[7,26,30,38],[11,18],[31,,33,37]])}))},onError:function(){}},[]),this.studyIds=Object(i.S)({await:function(){return[s.queriedVirtualStudies]},invoke:function(){var e;return e=s.queriedVirtualStudies.result.length>0?Object(st.h)(s.cancerStudyIds,s.queriedVirtualStudies.result):s.cancerStudyIds.slice(),Promise.resolve(e)}},[]),this.invalidStudyIds=Object(i.S)({await:function(){return[s.allStudies,s.queriedVirtualStudies]},invoke:function(){var e=s.allStudies.result,t=s.cancerStudyIds,n=k.differenceWith(t,e,function(e,t){return e===t.studyId});return n.length&&0===s.queriedVirtualStudies.result.length?Promise.resolve(n):Promise.resolve([])}},[]),this.sampleLists=Object(i.S)({await:function(){return[s.studyToSampleListId]},invoke:function(){var e=k.values(s.studyToSampleListId.result);return e.length>0?r.a.fetchSampleListsUsingPOST({sampleListIds:e}):Promise.resolve([])}}),this.mutations=Object(i.S)({await:function(){return[s.genes,s.selectedMolecularProfiles,s.samples,s.studyIdToStudy]},invoke:function(){return Dt(s,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(t=k.filter(this.selectedMolecularProfiles.result,function(e){return"MUTATION_EXTENDED"===e.molecularAlterationType})).length){e.next=3;break}return e.abrupt("return",[]);case 3:return n=k.keyBy(t,function(e){return e.studyId}),o=this.samples.result.reduce(function(e,t){return t.studyId in n&&e.push({molecularProfileId:n[t.studyId].molecularProfileId,sampleId:t.sampleId}),e},[]),i={entrezGeneIds:k.map(this.genes.result,function(e){return e.entrezGeneId}),sampleMolecularIdentifiers:o},e.next=8,r.a.fetchMutationsInMultipleMolecularProfilesUsingPOST({projection:"DETAILED",mutationMultipleStudyFilter:i});case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e,this)}))}}),this.mutationsTabFilteringSettings=this.makeMutationsTabFilteringSettings(),this.mutationsReportByGene=Object(i.S)({await:function(){return[s._filteredAndAnnotatedMutationsReport,s.genes]},invoke:function(){var e=s._filteredAndAnnotatedMutationsReport.result,t={},n=!0,r=!1,o=void 0;try{for(var i,a=s.genes.result[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){t[i.value.hugoGeneSymbol]={data:[],vus:[],germline:[],vusAndGermline:[]}}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}var l=!0,u=!1,c=void 0;try{for(var p,d=e.data[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var f=p.value;t[f.gene.hugoGeneSymbol].data.push(f)}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}var h=!0,m=!1,y=void 0;try{for(var g,v=e.vus[Symbol.iterator]();!(h=(g=v.next()).done);h=!0){var b=g.value;t[b.gene.hugoGeneSymbol].vus.push(b)}}catch(e){m=!0,y=e}finally{try{h||null==v.return||v.return()}finally{if(m)throw y}}var S=!0,_=!1,w=void 0;try{for(var E,O=e.germline[Symbol.iterator]();!(S=(E=O.next()).done);S=!0){var C=E.value;t[C.gene.hugoGeneSymbol].germline.push(C)}}catch(e){_=!0,w=e}finally{try{S||null==O.return||O.return()}finally{if(_)throw w}}var P=!0,x=!1,T=void 0;try{for(var k,A=e.vusAndGermline[Symbol.iterator]();!(P=(k=A.next()).done);P=!0){var I=k.value;t[I.gene.hugoGeneSymbol].vusAndGermline.push(I)}}catch(e){x=!0,T=e}finally{try{P||null==A.return||A.return()}finally{if(x)throw T}}return Promise.resolve(t)}}),this.mutationsByGene=Object(i.S)({await:function(){return[s.selectedMolecularProfiles,s.defaultOQLQuery,s.mutationsReportByGene]},invoke:function(){return Promise.resolve(k.mapValues(s.mutationsReportByGene.result,function(e){return s.mutationsTabFilteringSettings.useOql&&s.queryContainsMutationOql&&(e=k.mapValues(e,function(e){return Object(q.c)(s.oqlText,e,new z.b(s.selectedMolecularProfiles.result),s.defaultOQLQuery.result)})),Object(Je.e)(e,s.mutationsTabFilteringSettings.excludeVus,s.mutationsTabFilteringSettings.excludeGermline)}))}}),this.mutationMapperStores=Object(i.S)({await:function(){return[s.genes,s.oncoKbCancerGenes,s.uniqueSampleKeyToTumorType,s.mutations,s.mutationsByGene]},invoke:function(){return s.genes.result?Promise.resolve(k.reduce(s.genes.result,function(e,t){return e[t.hugoGeneSymbol]=new x(T.b.serverConfig,{},t,s.samples,s.oncoKbCancerGenes,function(){return s.mutationsByGene.result[t.hugoGeneSymbol]||[]},function(){return s.mutationCountCache},function(){return s.genomeNexusCache},function(){return s.genomeNexusMutationAssessorCache},function(){return s.discreteCNACache},s.studyToMolecularProfileDiscreteCna.result,s.studyIdToStudy,s.molecularProfileIdToMolecularProfile,s.clinicalDataForSamples,s.studiesForSamplesWithoutCancerTypeClinicalData,s.germlineConsentedSamples,s.indexedHotspotData,s.indexedVariantAnnotations,s.uniqueSampleKeyToTumorType.result,s.generateGenomeNexusHgvsgUrl,s.genomeNexusClient,s.genomeNexusInternalClient),e},{})):Promise.resolve({})}},{}),this.oncoKbCancerGenes=Object(i.S)({invoke:function(){return T.b.serverConfig.show_oncokb?Object(y.x)():Promise.resolve([])}},[]),this.oncoKbAnnotatedGenes=Object(i.S)({await:function(){return[s.oncoKbCancerGenes]},invoke:function(){return T.b.serverConfig.show_oncokb?Promise.resolve(k.reduce(s.oncoKbCancerGenes.result,function(e,t){return t.oncokbAnnotated&&(e[t.entrezGeneId]=!0),e},{})):Promise.resolve({})}},{}),this.clinicalDataForSamples=Object(i.S)({await:function(){return[s.studies,s.samples]},invoke:function(){return s.getClinicalData("SAMPLE",s.studies.result,s.samples.result,["CANCER_TYPE","CANCER_TYPE_DETAILED"])}},[]),this.germlineConsentedSamples=Object(i.S)({await:function(){return[s.studyIds,s.samples]},invoke:function(){return Dt(s,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.r)(this.studyIds,T.b.serverConfig.studiesWithGermlineConsentedSamples);case 2:return t=e.sent,n=this.samples.result?this.samples.result.map(function(e){return e.sampleId}):[],e.abrupt("return",t.filter(function(e){return n.includes(e.sampleId)}));case 5:case"end":return e.stop()}},e,this)}))},onError:function(){}},[]),this.samples=Object(i.S)({await:function(){return[s.studyToDataQueryFilter]},invoke:function(){return Dt(s,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=[],k.each(this.studyToDataQueryFilter.result,function(e,r){e.sampleIds?t=t.concat(e.sampleIds.map(function(e){return{sampleId:e,studyId:r}})):e.sampleListId&&n.push(e.sampleListId)}),o=[],t.length&&o.push(r.a.fetchSamplesUsingPOST({sampleFilter:{sampleIdentifiers:t},projection:"DETAILED"})),n.length&&o.push(r.a.fetchSamplesUsingPOST({sampleFilter:{sampleListIds:n},projection:"DETAILED"})),e.t0=k,e.next=9,Promise.all(o);case 9:return e.t1=e.sent,e.abrupt("return",e.t0.flatten.call(e.t0,e.t1));case 11:case"end":return e.stop()}},e,this)}))}},[]),this.sampleSet=Object(i.S)({await:function(){return[s.samples]},invoke:function(){return Promise.resolve(_t.a.from(s.samples.result.map(function(e){return{studyId:e.studyId,sampleId:e.sampleId}})))}}),this.sampleKeyToSample=Object(i.S)({await:function(){return[s.samples]},invoke:function(){return Promise.resolve(k.keyBy(s.samples.result,function(e){return e.uniqueSampleKey}))}}),this.patientKeyToPatient=Object(i.S)({await:function(){return[s.patients]},invoke:function(){return Promise.resolve(k.keyBy(s.patients.result,function(e){return e.uniquePatientKey}))}}),this.patientKeyToSamples=Object(i.S)({await:function(){return[s.samples]},invoke:function(){return Promise.resolve(k.groupBy(s.samples.result,function(e){return e.uniquePatientKey}))}}),this.patients=Object(i.S)({await:function(){return[s.samples]},invoke:function(){return Object(Je.j)(s.samples.result)},default:[]}),this.samplesWithoutCancerTypeClinicalData=Object(i.S)({await:function(){return[s.samples,s.clinicalDataForSamples]},invoke:function(){var e={},t=!0,n=!1,r=void 0;try{for(var o,i=s.clinicalDataForSamples.result[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;e[Object(I.a)(a.studyId,a.sampleId)]=!0}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return Promise.resolve(s.samples.result.filter(function(t){return!e[Object(I.a)(t.studyId,t.sampleId)]}))}},[]),this.studiesForSamplesWithoutCancerTypeClinicalData=Object(i.S)({await:function(){return[s.samplesWithoutCancerTypeClinicalData]},invoke:function(){return Dt(s,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(y.D)(this.samplesWithoutCancerTypeClinicalData));case 1:case"end":return e.stop()}},e,this)}))}},[]),this.studies=Object(i.S)({await:function(){return[s.studyIds]},invoke:function(){return Dt(s,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.a.fetchStudiesUsingPOST({studyIds:this.studyIds.result,projection:"DETAILED"}));case 1:case"end":return e.stop()}},e,this)}))}},[]),this.queriedStudies=Object(i.S)({await:function(){return[s.everyStudyIdToStudy,s.queriedVirtualStudies]},invoke:function(){return Dt(s,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(k.isEmpty(this.cancerStudyIds)){e.next=4;break}return e.abrupt("return",Object(Je.k)(this.everyStudyIdToStudy.result,this.cancerStudyIds,this.queriedVirtualStudies.result?this.queriedVirtualStudies.result:[]));case 4:return e.abrupt("return",[]);case 5:case"end":return e.stop()}},e,this)}))},default:[]}),this.studyIdToStudy=Object(i.S)({await:function(){return[s.studies]},invoke:function(){return Promise.resolve(k.keyBy(s.studies.result,function(e){return e.studyId}))}},{}),this.molecularProfilesInStudies=Object(i.S)({await:function(){return[s.studyIds]},invoke:function(){return Dt(s,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.a.fetchMolecularProfilesUsingPOST({molecularProfileFilter:{studyIds:this.studyIds.result}}));case 1:case"end":return e.stop()}},e,this)}))}},[]),this.nonSelectedDownloadableMolecularProfiles=Object(i.S)({await:function(){return[s.molecularProfilesInStudies,s.selectedMolecularProfiles]},invoke:function(){return Promise.resolve(Object(Je.i)(k.difference(s.molecularProfilesInStudies.result,s.selectedMolecularProfiles.result)))}},[]),this.molecularProfileIdToMolecularProfile=Object(i.S)({await:function(){return[s.molecularProfilesInStudies]},invoke:function(){return Promise.resolve(s.molecularProfilesInStudies.result.reduce(function(e,t){return e[t.molecularProfileId]=t,e},{}))}},{}),this.nonSelectedDownloadableMolecularProfilesGroupByName=Object(i.S)({await:function(){return[s.nonSelectedDownloadableMolecularProfiles]},invoke:function(){var e=k.sortBy(s.nonSelectedDownloadableMolecularProfiles.result,function(e){return Object(bt.a)(e.molecularAlterationType)});return Promise.resolve(k.groupBy(e,function(e){return e.name}))}},{}),this.studyToMolecularProfileDiscreteCna=Object(i.S)({await:function(){return[s.molecularProfilesInStudies]},invoke:function(){return Dt(s,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,o,i,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t={},n=!0,r=!1,o=void 0,e.prev=4,i=this.molecularProfilesInStudies.result[Symbol.iterator]();!(n=(a=i.next()).done);n=!0)(s=a.value).datatype===Nt.DISCRETE&&s.molecularAlterationType===Mt.COPY_NUMBER_ALTERATION&&(t[s.studyId]=s);e.next=12;break;case 8:e.prev=8,e.t0=e.catch(4),r=!0,o=e.t0;case 12:e.prev=12,e.prev=13,n||null==i.return||i.return();case 15:if(e.prev=15,!r){e.next=18;break}throw o;case 18:return e.finish(15);case 19:return e.finish(12);case 20:return e.abrupt("return",t);case 21:case"end":return e.stop()}},e,this,[[4,8,12,20],[13,,15,19]])}))}},{}),this.heatmapMolecularProfiles=Object(i.S)({await:function(){return[s.molecularProfilesInStudies,s.selectedMolecularProfiles,s.genesetMolecularProfile]},invoke:function(){var e=Mt.MRNA_EXPRESSION,t=Mt.PROTEIN_LEVEL,n=Mt.METHYLATION,r=Mt.GENERIC_ASSAY,o=Object(i.Y)(s.selectedMolecularProfiles.result.map(function(e){return e.molecularProfileId})),a=k.sortBy(k.filter(s.molecularProfilesInStudies.result,function(o){return(o.molecularAlterationType===e||o.molecularAlterationType===t||o.molecularAlterationType===r)&&o.showProfileInAnalysisTab||o.molecularAlterationType===n}),function(i){if(i.molecularProfileId in o)switch(i.molecularAlterationType){case e:return 0;case t:return 1;case n:return 2;case r:return 3}else switch(i.molecularAlterationType){case e:return 4;case t:return 5;case n:return 6;case r:return 7}}),l=s.genesetMolecularProfile.result,u=l.isApplicable?[l.value]:[];return Promise.resolve(a.concat(u))}}),this.genesetMolecularProfile=Object(i.S)({await:function(){return[s.selectedMolecularProfiles]},invoke:function(){var e=k.filter(s.selectedMolecularProfiles.result,function(e){return e.molecularAlterationType===Mt.GENESET_SCORE&&e.showProfileInAnalysisTab});if(e.length>1)return Promise.reject(new Error("Queried more than one gene set score profile"));var t=e.pop(),n=t?{isApplicable:!0,value:t}:{isApplicable:!1};return Promise.resolve(n)}}),this.studyToDataQueryFilter=Object(i.S)({await:function(){return[s.studyToSampleIds,s.studyIds,s.studyToSampleListId]},invoke:function(){var e=s.studyIds.result,t={},n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var l=i.value;t[l]=Object(y.M)(s.studyToSampleListId.result[l]||null,Object.keys(s.studyToSampleIds.result[l]||{}))}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return Promise.resolve(t)}},{}),this.molecularProfileIdToDataQueryFilter=Object(i.S)({await:function(){return[s.molecularProfilesInStudies,s.studyToDataQueryFilter]},invoke:function(){var e={},t=!0,n=!1,r=void 0;try{for(var o,i=s.molecularProfilesInStudies.result[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;e[a.molecularProfileId]=s.studyToDataQueryFilter.result[a.studyId]}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return Promise.resolve(e)},default:{}}),this.genes=Object(i.S)({invoke:function(){return Dt(s,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.q)(this.hugoGeneSymbols);case 2:if(t=e.sent,!k.isEqual(k.sortBy(this.hugoGeneSymbols),k.sortBy(t.map(function(e){return e.hugoGeneSymbol})))){e.next=7;break}return e.abrupt("return",t);case 7:throw new Error(at.InvalidGenes);case 8:case"end":return e.stop()}},e,this)}))},onResult:function(e){s.geneCache.addData(e)},onError:function(e){throw e}}),this.referenceGenes=Object(i.S)({await:function(){return[s.studies]},invoke:function(){return s.studies.result.length>0?Object(y.e)(s.studies.result[0].referenceGenome):Promise.resolve([])}}),this.hugoGeneSymbolToReferenceGene=Object(i.S)({await:function(){return[s.referenceGenes]},invoke:function(){return Promise.resolve(k.keyBy(s.referenceGenes.result,function(e){return e.hugoGeneSymbol}))}}),this.entrezGeneIdToReferenceGene=Object(i.S)({await:function(){return[s.referenceGenes]},invoke:function(){return Promise.resolve(k.keyBy(s.referenceGenes.result,function(e){return e.entrezGeneId}))}}),this.genesets=Object(i.S)({invoke:function(){return s.genesetIds&&s.genesetIds.length>0?J.a.fetchGenesetsUsingPOST({genesetIds:s.genesetIds.slice()}):Promise.resolve([])},onResult:function(e){s.genesetCache.addData(e)}}),this.geneticEntities=Object(i.S)({await:function(){return[s.genes,s.genesets,s.hugoGeneSymbolToReferenceGene]},invoke:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var o,i=s.genes.result[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;e.push({geneticEntityName:a.hugoGeneSymbol,geneticEntityType:At.GENE,geneticEntityId:a.entrezGeneId,cytoband:s.hugoGeneSymbolToReferenceGene.result[a.hugoGeneSymbol].cytoband,geneticEntityData:a})}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}var l=!0,u=!1,c=void 0;try{for(var p,d=s.genesets.result[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var f=p.value;e.push({geneticEntityName:f.name,geneticEntityType:At.GENESET,geneticEntityId:f.genesetId,cytoband:"-",geneticEntityData:f})}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}return Promise.resolve(e)}}),this.genericAssayEntitiesGroupByGenericAssayType=Object(i.S)({await:function(){return[s.molecularProfilesInStudies]},invoke:function(){return Dt(s,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ve.c)(this.molecularProfilesInStudies.result);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}))}}),this.genericAssayEntitiesGroupByMolecularProfileId=Object(i.S)({await:function(){return[s.molecularProfilesInStudies]},invoke:function(){return Dt(s,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ve.d)(this.molecularProfilesInStudies.result);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}))}}),this.selectedGenericAssayEntitiesGroupByGenericAssayType=Object(i.S)({await:function(){return[s.genericAssayEntitiesGroupByGenericAssayType]},invoke:function(){return Promise.resolve(k.mapValues(s.genericAssayEntitiesGroupByGenericAssayType.result,function(e,t){var n=s.selectedGenericAssayEntities[t];return e.filter(function(e){return n.includes(e.stableId)})}))}}),this.entrezGeneIdToGene=Object(i.S)({await:function(){return[s.genes]},invoke:function(){return Promise.resolve(k.keyBy(s.genes.result,function(e){return e.entrezGeneId}))}}),this.genesetLinkMap=Object(i.S)({invoke:function(){return Dt(s,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.genesetIds||!this.genesetIds.length){e.next=9;break}return e.next=3,J.a.fetchGenesetsUsingPOST({genesetIds:this.genesetIds.slice()});case 3:return t=e.sent,n={},t.forEach(function(e){var t=e.genesetId,r=e.refLink;n[t]=r}),e.abrupt("return",n);case 9:return e.abrupt("return",{});case 10:case"end":return e.stop()}},e,this)}))}}),this.genericAssayEntitiesGroupByGenericAssayTypeLinkMap=Object(i.S)({await:function(){return[s.genericAssayEntitiesGroupByGenericAssayType]},invoke:function(){return Dt(s,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(k.isEmpty(this.genericAssayEntitiesGroupByGenericAssayType.result)){e.next=4;break}return e.abrupt("return",k.mapValues(this.genericAssayEntitiesGroupByGenericAssayType.result,function(e){var t={};return e.forEach(function(e){t[e.stableId]="URL"in e.genericEntityMetaProperties?e.genericEntityMetaProperties.URL:""}),t}));case 4:return e.abrupt("return",{});case 5:case"end":return e.stop()}},e,this)}))}}),this.customDriverAnnotationReport=Object(i.S)({await:function(){return[s.mutations]},invoke:function(){return Promise.resolve(Object(Je.f)(s.mutations.result))},onResult:function(e){Object(Je.t)(e,s.driverAnnotationSettings,s.driverAnnotationSettings.customTiersDefault,s.driverAnnotationSettings.oncoKb,s.driverAnnotationSettings.hotspots)}}),this._filteredAndAnnotatedMutationsReport=Object(i.S)({await:function(){return[s.mutations,s.getPutativeDriverInfo,s.entrezGeneIdToGene]},invoke:function(){return Promise.resolve(Object(Je.l)(s.mutations.result,s.getPutativeDriverInfo.result,s.entrezGeneIdToGene.result))}}),this.filteredAndAnnotatedMutations=Object(i.S)({await:function(){return[s._filteredAndAnnotatedMutationsReport]},invoke:function(){return Promise.resolve(Object(Je.e)(s._filteredAndAnnotatedMutationsReport.result,s.driverAnnotationSettings.excludeVUS,s.excludeGermlineMutations))}}),this.annotatedMutationCache=new et.a(function(e){return{await:function(){return[s.mutationCache.get(e),s.getPutativeDriverInfo,s.entrezGeneIdToGene]},invoke:function(){var t=Object(Je.l)(s.mutationCache.get(e).result,s.getPutativeDriverInfo.result,s.entrezGeneIdToGene.result),n=t.data.concat(t.vus).concat(t.germline);return Promise.resolve(n)}}}),this._filteredAndAnnotatedMolecularDataReport=Object(i.S)({await:function(){return[s.molecularData,s.entrezGeneIdToGene,s.getOncoKbCnaAnnotationForOncoprint,s.molecularProfileIdToMolecularProfile]},invoke:function(){var e,t=s.entrezGeneIdToGene.result;e=s.getOncoKbCnaAnnotationForOncoprint.result instanceof Error?function(){}:s.getOncoKbCnaAnnotationForOncoprint.result;var n=s.molecularProfileIdToMolecularProfile.result,r=[],o=s.molecularData.result.reduce(function(o,i){var a=Object(Je.c)(i,e,n,t);return a.oncoKbOncogenic?o.push(a):r.push(a),o},[]);return Promise.resolve({data:o,vus:r})}}),this.filteredAndAnnotatedMolecularData=Object(i.S)({await:function(){return[s._filteredAndAnnotatedMolecularDataReport]},invoke:function(){var e=s._filteredAndAnnotatedMolecularDataReport.result.data;return s.driverAnnotationSettings.excludeVUS||(e=e.concat(s._filteredAndAnnotatedMolecularDataReport.result.vus)),Promise.resolve(e)}}),this.annotatedCnaCache=new et.a(function(e){return{await:function(){return s.numericGeneMolecularDataCache.await([s.studyToMolecularProfileDiscreteCna,s.entrezGeneIdToGene,s.getOncoKbCnaAnnotationForOncoprint,s.molecularProfileIdToMolecularProfile],function(t){return k.values(t).map(function(t){return{entrezGeneId:e.entrezGeneId,molecularProfileId:t.molecularProfileId}})})},invoke:function(){var t,n=k.flatten(s.numericGeneMolecularDataCache.getAll(k.values(s.studyToMolecularProfileDiscreteCna.result).map(function(t){return{entrezGeneId:e.entrezGeneId,molecularProfileId:t.molecularProfileId}})).map(function(e){return e.result})),r=s.entrezGeneIdToGene.result;t=s.getOncoKbCnaAnnotationForOncoprint.result instanceof Error?function(){}:s.getOncoKbCnaAnnotationForOncoprint.result;var o=s.molecularProfileIdToMolecularProfile.result;return Promise.resolve(n.map(function(e){return Object(Je.c)(e,t,o,r)}))}}}),this.getPutativeDriverInfo=Object(i.S)({await:function(){var e=[];return s.driverAnnotationSettings.oncoKb&&e.push(s.getOncoKbMutationAnnotationForOncoprint),s.driverAnnotationSettings.hotspots&&e.push(s.isHotspotForOncoprint),s.driverAnnotationSettings.cbioportalCount&&e.push(s.getCBioportalCount),s.driverAnnotationSettings.cosmicCount&&e.push(s.getCosmicCount),e},invoke:function(){return Promise.resolve(function(e){var t=s.getOncoKbMutationAnnotationForOncoprint.result,n=s.driverAnnotationSettings.oncoKb&&t&&!(t instanceof Error)&&t(e),r="";return n&&(r=Object(Je.p)(n)),{oncoKb:r,hotspots:s.driverAnnotationSettings.hotspots&&!(s.isHotspotForOncoprint.result instanceof Error)&&s.isHotspotForOncoprint.result(e),cbioportalCount:s.driverAnnotationSettings.cbioportalCount&&s.getCBioportalCount.isComplete&&s.getCBioportalCount.result(e)>=s.driverAnnotationSettings.cbioportalCountThreshold,cosmicCount:s.driverAnnotationSettings.cosmicCount&&s.getCosmicCount.isComplete&&s.getCosmicCount.result(e)>=s.driverAnnotationSettings.cosmicCountThreshold,customDriverBinary:s.driverAnnotationSettings.customBinary&&"Putative_Driver"===e.driverFilter||!1,customDriverTier:e.driverTiersFilter&&s.driverAnnotationSettings.driverTiers.get(e.driverTiersFilter)?e.driverTiersFilter:void 0}})}}),this.indexedVariantAnnotations=Object(i.S)({await:function(){return[s.mutations]},invoke:function(){return Dt(s,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.mutations.result){e.next=6;break}return e.next=3,Object(y.G)(this.mutations.result,["annotation_summary","hotspots"],T.b.serverConfig.isoformOverrideSource,this.genomeNexusClient);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=void 0;case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}},e,this)}))},onError:function(e){}},void 0),this.hotspotData=Object(i.S)({await:function(){return[s.mutations]},invoke:function(){return Object(v.a)(s.mutations,void 0,s.genomeNexusInternalClient)}}),this.indexedHotspotData=Object(i.S)({await:function(){return[s.hotspotData]},invoke:function(){return Promise.resolve(Object(g.W)(s.hotspotData))}}),this.isHotspotForOncoprint=Object(i.S)({invoke:function(){if(s.indexedHotspotData.isComplete){var e=s.indexedHotspotData.result;return e?Promise.resolve(function(t){return Object(ut.a)(t,e)}):Promise.resolve(function(e){return!1})}return s.indexedHotspotData.isError?Promise.resolve(new Error):new Promise(function(){})}}),this.uniqueSampleKeyToTumorType=Object(i.S)({await:function(){return[s.clinicalDataForSamples,s.studiesForSamplesWithoutCancerTypeClinicalData,s.samplesWithoutCancerTypeClinicalData]},invoke:function(){return Promise.resolve(Object(y.O)(s.clinicalDataForSamples,s.studiesForSamplesWithoutCancerTypeClinicalData,s.samplesWithoutCancerTypeClinicalData))}}),this.oncoKbDataForOncoprint=Object(i.S)({await:function(){return[s.mutations,s.oncoKbAnnotatedGenes]},invoke:function(){return Dt(s,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!T.b.serverConfig.show_oncokb){e.next=13;break}return e.prev=1,e.next=4,Object(y.y)({},this.oncoKbAnnotatedGenes.result,this.mutations,"ONCOGENIC");case 4:t=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),t=new Error;case 10:return e.abrupt("return",t);case 13:return e.abrupt("return",y.b);case 14:case"end":return e.stop()}},e,this,[[1,7]])}))},onError:function(e){}},y.b),this.cnaOncoKbDataForOncoprint=Object(i.S)({await:function(){return[s.uniqueSampleKeyToTumorType,s.oncoKbAnnotatedGenes,s.molecularData,s.molecularProfileIdToMolecularProfile]},invoke:function(){return Dt(s,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!T.b.serverConfig.show_oncokb){e.next=13;break}return e.prev=1,e.next=4,Object(y.i)({},this.oncoKbAnnotatedGenes.result,this.molecularData,this.molecularProfileIdToMolecularProfile.result,"ONCOGENIC");case 4:t=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),t=new Error;case 10:return e.abrupt("return",t);case 13:return e.abrupt("return",y.b);case 14:case"end":return e.stop()}},e,this,[[1,7]])}))}},y.b),this.getOncoKbMutationAnnotationForOncoprint=Object(i.S)({await:function(){return[s.oncoKbDataForOncoprint]},invoke:function(){var e=s.oncoKbDataForOncoprint.result;return e instanceof Error?Promise.resolve(new Error):Promise.resolve(function(t){var n=Object(i.A)(t.entrezGeneId,Object(y.c)(t.uniqueSampleKey,{}),t.proteinChange,t.mutationType);return e.indicatorMap[n]})}}),this.getOncoKbCnaAnnotationForOncoprint=Object(i.S)({await:function(){return[s.cnaOncoKbDataForOncoprint]},invoke:function(){var e=s.cnaOncoKbDataForOncoprint.result;return e instanceof Error?Promise.resolve(new Error):Promise.resolve(function(t){if(s.driverAnnotationSettings.oncoKb){var n=Object(i.A)(t.entrezGeneId,Object(y.c)(t.uniqueSampleKey,{}),Object(Ke.a)(t.value));return e.indicatorMap[n]}})}}),this.cbioportalMutationCountData=Object(i.S)({await:function(){return[s.mutations]},invoke:function(){var e=k.values(Object(Ze.a)(s.mutations.result));return e.length>0?r.a.fetchMutationCountsByPositionUsingPOST({mutationPositionIdentifiers:e}):Promise.resolve([])}}),this.getCBioportalCount=Object(i.S)({await:function(){return[s.cbioportalMutationCountData]},invoke:function(){var e=k.groupBy(s.cbioportalMutationCountData.result,function(e){return Object(Ze.b)(e)});return Promise.resolve(function(t){var n=Object(Ze.b)(t),r=e[n];return r?r.reduce(function(e,t){return e+t.count},0):-1})}}),this.cosmicCountData=Object(i.S)({await:function(){return[s.mutations]},invoke:function(){var e=k.uniq(s.mutations.result.filter(function(e){return!!e.keyword}).map(function(e){return e.keyword}));return e.length>0?J.a.fetchCosmicCountsUsingPOST({keywords:e}):Promise.resolve([])}}),this.getCosmicCount=Object(i.S)({await:function(){return[s.cosmicCountData]},invoke:function(){var e=k.groupBy(s.cosmicCountData.result,function(e){return e.keyword});return Promise.resolve(function(t){var n=t.keyword,r=e[n],o=Object(a.k)(t.proteinChange);if(r&&o){var i=o.start;return r.reduce(function(e,t){var n=Object(a.k)(t.proteinChange);return n&&n.start===i?e+t.count:e},0)}return-1})}}),this.molecularProfileIdToProfiledSamples=Object(i.S)({await:function(){return[s.samples,s.coverageInformation,s.molecularProfilesInStudies]},invoke:function(){var e={},t=s.molecularProfilesInStudies.result.map(function(e){return e.molecularProfileId}),n=s.coverageInformation.result,r=!0,o=!1,i=void 0;try{for(var a,l=t[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){e[a.value]=[]}}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}var u=[],c=!0,p=!1,d=void 0;try{for(var f,h=s.samples.result[Symbol.iterator]();!(c=(f=h.next()).done);c=!0){var m=f.value;u=Object(tt.b)(m.uniqueSampleKey,t,n);for(var y=0;y<t.length;y++)u[y]&&e[t[y]].push(m)}}catch(e){p=!0,d=e}finally{try{c||null==h.return||h.return()}finally{if(p)throw d}}return Promise.resolve(e)}}),this.geneMolecularDataCache=Object(i.S)({await:function(){return[s.molecularProfileIdToDataQueryFilter]},invoke:function(){return Promise.resolve(new Z(s.molecularProfileIdToDataQueryFilter.result))}}),this.expressionProfiles=Object(i.S)({await:function(){return[s.molecularProfilesInStudies]},invoke:function(){return Promise.resolve(s.molecularProfilesInStudies.result.filter(function(e){return Object(Je.v)(e.molecularProfileId)}))}},[]),this.genesetMolecularDataCache=Object(i.S)({await:function(){return[s.molecularProfileIdToDataQueryFilter]},invoke:function(){return Promise.resolve(new ue(s.molecularProfileIdToDataQueryFilter.result))}}),this.numericGenesetMolecularDataCache=new et.a(function(e){return{await:function(){return[s.molecularProfileIdToDataQueryFilter]},invoke:function(){var t=s.molecularProfileIdToDataQueryFilter.result[e.molecularProfileId];return t?J.a.fetchGeneticDataItemsUsingPOST({geneticProfileId:e.molecularProfileId,genesetDataFilterCriteria:Object.assign({genesetIds:[e.genesetId]},t)}):Promise.resolve([])}}}),this.genesetCorrelatedGeneCache=Object(i.S)({await:function(){return[s.molecularProfileIdToDataQueryFilter]},invoke:function(){return Promise.resolve(new ge(s.molecularProfileIdToDataQueryFilter.result))}}),this.genericAssayMolecularDataCache=Object(i.S)({await:function(){return[s.molecularProfileIdToDataQueryFilter]},invoke:function(){return Promise.resolve(new ke(s.molecularProfileIdToDataQueryFilter.result))}}),this.geneCache=new Le,this.genesetCache=new We,this.numericGeneMolecularDataCache=new et.a(function(e){return{await:function(){return[s.molecularProfileIdToDataQueryFilter]},invoke:function(){var t=s.molecularProfileIdToDataQueryFilter.result[e.molecularProfileId];return t&&(t.sampleIds&&t.sampleIds.length||t.sampleListId)?r.a.fetchAllMolecularDataInMolecularProfileUsingPOST({molecularProfileId:e.molecularProfileId,molecularDataFilter:Object.assign({entrezGeneIds:[e.entrezGeneId]},t)}):Promise.resolve([])}}}),this.clinicalDataCache=new nt.g(this.samples,this.patients,this.studyToMutationMolecularProfile,this.studyIdToStudy,this.coverageInformation),this.mutationCache=new et.a(function(e){return{await:function(){return[s.studyToMutationMolecularProfile,s.studyToDataQueryFilter]},invoke:function(){return Dt(s,void 0,void 0,regeneratorRuntime.mark(function t(){var n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=k,t.next=3,Promise.all(Object.keys(this.studyToMutationMolecularProfile.result).map(function(t){var o=n.studyToMutationMolecularProfile.result[t].molecularProfileId,i=n.studyToDataQueryFilter.result[t];return i&&o?r.a.fetchMutationsInMolecularProfileUsingPOST({molecularProfileId:o,mutationFilter:Object.assign({entrezGeneIds:[e.entrezGeneId]},i),projection:"DETAILED"}):Promise.resolve([])}));case 3:return t.t1=t.sent,t.abrupt("return",t.t0.flatten.call(t.t0,t.t1));case 5:case"end":return t.stop()}},t,this)}))}}}),Object(l.labelMobxPromises)(this),this.urlWrapper=n,this.getURL();var u=this;this.driverAnnotationSettings=Object(o.observable)({cbioportalCount:!1,cbioportalCountThreshold:0,cosmicCount:!1,cosmicCountThreshold:0,driverTiers:o.observable.map(),_customBinary:void 0,_hotspots:!1,_oncoKb:!1,_excludeVUS:!1,set hotspots(e){this._hotspots=e},get hotspots(){return!!T.b.serverConfig.show_hotspot&&this._hotspots&&!u.didHotspotFailInOncoprint},set oncoKb(e){this._oncoKb=e},get oncoKb(){return T.b.serverConfig.show_oncokb&&this._oncoKb&&!u.didOncoKbFailInOncoprint},set excludeVUS(e){this._excludeVUS=e},get excludeVUS(){return this._excludeVUS&&this.driversAnnotated},get driversAnnotated(){return this.oncoKb||this.hotspots||this.cbioportalCount||this.cosmicCount||this.customBinary||this.driverTiers.entries().reduce(function(e,t){return e||t[1]},!1)},get customBinary(){return void 0===this._customBinary?T.b.serverConfig.oncoprint_custom_driver_annotation_binary_default:this._customBinary},get customTiersDefault(){return T.b.serverConfig.oncoprint_custom_driver_annotation_tiers_default}}),this.driverAnnotationsReactionDisposer=Object(o.reaction)(function(){return s.urlWrapper.query.cancer_study_list},function(){s.initDriverAnnotationSettings()},{fireImmediately:!0})}var t,n,b;return t=e,(n=[{key:"destroy",value:function(){this.driverAnnotationsReactionDisposer()}},{key:"setOncoprintAnalysisCaseType",value:function(e){this.urlWrapper.updateURL({show_samples:(e===Je.b.SAMPLE).toString()})}},{key:"setExcludeGermlineMutations",value:function(e){this.urlWrapper.updateURL({exclude_germline_mutations:e.toString()})}},{key:"initDriverAnnotationSettings",value:function(){this.driverAnnotationSettings.cbioportalCount=!1,this.driverAnnotationSettings.cbioportalCountThreshold=10,this.driverAnnotationSettings.cosmicCount=!1,this.driverAnnotationSettings.cosmicCountThreshold=10,this.driverAnnotationSettings.driverTiers=o.observable.map(),this.driverAnnotationSettings._oncoKb=!!T.b.serverConfig.oncoprint_oncokb_default,this.driverAnnotationSettings.hotspots=!!T.b.serverConfig.oncoprint_hotspots_default,this.driverAnnotationSettings._excludeVUS=!!T.b.serverConfig.oncoprint_hide_vus_default}},{key:"makeMutationsTabFilteringSettings",value:function(){var e=this,t=o.observable.box(void 0),n=o.observable.box(void 0);return Object(o.observable)({useOql:!0,get excludeVus(){return void 0===t.get()?e.driverAnnotationSettings.excludeVUS:t.get()},get excludeGermline(){return void 0===n.get()?e.excludeGermlineMutations:n.get()},set excludeVus(e){t.set(e)},set excludeGermline(e){n.set(e)}})}},{key:"getURL",value:function(){var e=window.location.href;if(e.includes("session_id")){var t=e.indexOf("&show");t>-1&&(this.sessionIdURL=e.slice(0,t))}}},{key:"groupSamplesByCancerType",value:function(e,t,n){var r=k.reduce(e,function(e,t){return t.clinicalAttributeId===n&&(e[t.uniqueSampleKey]=t.value),"CANCER_TYPE"===n&&(e[t.uniqueSampleKey]||"CANCER_TYPE_DETAILED"!==t.clinicalAttributeId||(e[t.uniqueSampleKey]=t.value)),e},{});return k.reduce(t,function(e,t){return t.uniqueSampleKey in r&&(e[r[t.uniqueSampleKey]]=e[r[t.uniqueSampleKey]]||[],e[r[t.uniqueSampleKey]].push(t)),e},{})}},{key:"getMutationMapperStore",value:function(e){return this.mutationMapperStores.result[e]}},{key:"getClinicalData",value:function(e,t,n,o){if(1===t.length){var i=this.studies.result[0],a={attributeIds:o,ids:k.map(n,"SAMPLE"===e?"sampleId":"patientId")};return r.a.fetchAllClinicalDataInStudyUsingPOST({studyId:i.studyId,clinicalDataSingleStudyFilter:a,clinicalDataType:e})}var s={attributeIds:o,identifiers:n.map(function(t){return"SAMPLE"===e?{entityId:t.sampleId,studyId:t.studyId}:{entityId:t.patientId,studyId:t.studyId}})};return r.a.fetchClinicalDataUsingPOST({clinicalDataType:e,clinicalDataMultiStudyFilter:s})}},{key:"generateGenomeNexusHgvsgUrl",value:function(e){return Object(Et.q)(e,this.referenceGenomeBuild)}},{key:"sortRnaSeqMolecularDataByStudy",value:function(e){return k.keyBy(e,function(e){return e[0].studyId})}},{key:"clearErrors",value:function(){this.ajaxErrors=[]}},{key:"oqlText",get:function(){return this.urlWrapper.query.gene_list}},{key:"genesetIds",get:function(){return this.urlWrapper.query.geneset_list&&this.urlWrapper.query.geneset_list.trim().length?this.urlWrapper.query.geneset_list.trim().split(/\s+/):[]}},{key:"selectedGenericAssayEntities",get:function(){return Object(Je.y)(this.urlWrapper.query.generic_assay_groups)}},{key:"cancerStudyIds",get:function(){return this.urlWrapper.query.cancer_study_list.split(",")}},{key:"rppaScoreThreshold",get:function(){return this.urlWrapper.query.RPPA_SCORE_THRESHOLD?parseFloat(this.urlWrapper.query.RPPA_SCORE_THRESHOLD):2}},{key:"zScoreThreshold",get:function(){return this.urlWrapper.query.Z_SCORE_THRESHOLD?parseFloat(this.urlWrapper.query.Z_SCORE_THRESHOLD):2}},{key:"selectedMolecularProfileIds",get:function(){return Object(Je.n)(this.urlWrapper.query)}},{key:"tabId",get:function(){return this.urlWrapper.tabId||st.b.ONCOPRINT}},{key:"profileFilter",get:function(){return this.urlWrapper.query.profileFilter?parseInt(this.urlWrapper.query.profileFilter,10):0}},{key:"doNonSelectedDownloadableMolecularProfilesExist",get:function(){return this.nonSelectedDownloadableMolecularProfilesGroupByName.result&&k.keys(this.nonSelectedDownloadableMolecularProfilesGroupByName.result).length>0}},{key:"excludeGermlineMutations",get:function(){return"true"===this.urlWrapper.query.exclude_germline_mutations}},{key:"hugoGeneSymbols",get:function(){return this.urlWrapper.query.gene_list.length>0?Object(q.i)(this.urlWrapper.query.gene_list):[]}},{key:"queryContainsOql",get:function(){return Object(q.b)(this.urlWrapper.query.gene_list)}},{key:"queryContainsMutationOql",get:function(){return Object(q.a)(this.urlWrapper.query.gene_list)}},{key:"sampleListCategory",get:function(){return this.urlWrapper.query.case_set_id&&[kt.w_mut,kt.w_cna,kt.w_mut_cna].includes(this.urlWrapper.query.case_set_id)?this.urlWrapper.query.case_set_id:void 0}},{key:"comparisonGroupsReferencedInURL",get:function(){var e=this.urlWrapper.query.clinicallist;return e?e.split(",").filter(function(e){return Object(nt.d)({clinicalAttributeId:e})}).map(function(e){return Object(pt.b)(e,!1)}):[]}},{key:"physicalStudySet",get:function(){return k.keyBy(this.studies.result,function(e){return e.studyId})}},{key:"chartMetaSet",get:function(){var e,t={};if(k.reduce(this.clinicalAttributes.result,function(e,t){var n=Object(vt.fb)(t);return e[n]={displayName:t.displayName,uniqueKey:n,dataType:Object(vt.A)(n),patientAttribute:t.patientAttribute,description:t.description,priority:Object(vt.Z)(t),renderWhenDataChange:!1,clinicalAttribute:t},e},t),!k.isEmpty(this.mutationProfiles.result)){var n=Object(vt.gb)(this.mutationProfiles.result.map(function(e){return e.molecularProfileId}));t[n]={uniqueKey:n,dataType:vt.a.GENOMIC,patientAttribute:!1,displayName:"Mutated Genes",priority:Object(vt.I)(St.a.MUTATED_GENES_TABLE),renderWhenDataChange:!1,description:""}}if(!k.isEmpty(this.cnaProfiles.result)){var r=Object(vt.gb)(this.cnaProfiles.result.map(function(e){return e.molecularProfileId}));t[r]={uniqueKey:r,dataType:vt.a.GENOMIC,patientAttribute:!1,displayName:"CNA Genes",renderWhenDataChange:!1,priority:Object(vt.I)(St.a.CNA_GENES_TABLE),description:""}}var o=k.reduce(this.clinicalAttributes.result,function(e,t){return vt.g.MUTATION_COUNT===t.clinicalAttributeId&&(e[vt.g.MUTATION_COUNT]=!0),vt.g.FRACTION_GENOME_ALTERED===t.clinicalAttributeId&&(e[vt.g.FRACTION_GENOME_ALTERED]=!0),e},(xt(e={},vt.g.MUTATION_COUNT,!1),xt(e,vt.g.FRACTION_GENOME_ALTERED,!1),e));return o[vt.g.MUTATION_COUNT]&&o[vt.g.FRACTION_GENOME_ALTERED]&&(t[vt.g.MUTATION_COUNT_CNA_FRACTION]={dataType:vt.a.GENOMIC,patientAttribute:!1,uniqueKey:vt.g.MUTATION_COUNT_CNA_FRACTION,displayName:"Mutation Count vs Fraction of Genome Altered",priority:Object(vt.I)(vt.g.MUTATION_COUNT_CNA_FRACTION),renderWhenDataChange:!1,description:""}),t}},{key:"samplesSpecificationParams",get:function(){return Object(st.f)(this.urlWrapper.query.case_ids,this.urlWrapper.query.sample_list_ids,this.urlWrapper.query.case_set_id,this.cancerStudyIds)}},{key:"downloadFilenamePrefix",get:function(){return Object(ct.a)(this.studies.result)}},{key:"referenceGenomeBuild",get:function(){if(!this.studies.isComplete)throw new Error("Failed to get studies");return Object(y.S)(this.studies.result)}},{key:"ensemblLink",get:function(){return this.referenceGenomeBuild===T.b.serverConfig.genomenexus_url_grch38?T.b.serverConfig.ensembl_transcript_grch38_url:T.b.serverConfig.ensembl_transcript_url}},{key:"genomeNexusClient",get:function(){return new s.b(this.referenceGenomeBuild)}},{key:"genomeNexusInternalClient",get:function(){return new s.c(this.referenceGenomeBuild)}},{key:"referenceGenome",get:function(){var e=this.studies.result?this.studies.result[0]:void 0;return e?e.referenceGenome:Je.a}},{key:"genesInvalid",get:function(){return this.genes.isError}},{key:"isQueryInvalid",get:function(){return this.hugoGeneSymbols.length*this.samples.result.length>T.b.serverConfig.query_product_limit}},{key:"geneLimit",get:function(){return Math.floor(T.b.serverConfig.query_product_limit/this.samples.result.length)}},{key:"didOncoKbFailInOncoprint",get:function(){return"complete"===this.getOncoKbMutationAnnotationForOncoprint.peekStatus&&this.getOncoKbMutationAnnotationForOncoprint.result instanceof Error}},{key:"didHotspotFailInOncoprint",get:function(){return"complete"===this.isHotspotForOncoprint.peekStatus&&this.isHotspotForOncoprint.result instanceof Error}},{key:"genomeNexusCache",get:function(){return new c.a(Object(wt.a)(["annotation_summary"],this.genomeNexusClient))}},{key:"genomeNexusMutationAssessorCache",get:function(){return new p.a(Object(wt.a)(["annotation_summary","mutation_assessor"],this.genomeNexusClient))}},{key:"pubMedCache",get:function(){return new u.a}},{key:"discreteCNACache",get:function(){return new h.a(this.studyToMolecularProfileDiscreteCna.result)}},{key:"cancerTypeCache",get:function(){return new d.a}},{key:"mutationCountCache",get:function(){return new f.a}},{key:"pdbHeaderCache",get:function(){return new m.a}},{key:"mutationDataCache",get:function(){return new V(this.studyToMutationMolecularProfile.result,this.studyToDataQueryFilter.result)}},{key:"isMixedReferenceGenome",get:function(){if(this.studies.result)return Object(Ot.c)(this.studies.result)}}])&&Pt(t.prototype,n),b&&Pt(t,b),e}();It([o.computed],Lt.prototype,"oqlText",null),It([o.computed],Lt.prototype,"genesetIds",null),It([o.computed],Lt.prototype,"selectedGenericAssayEntities",null),It([o.computed],Lt.prototype,"cancerStudyIds",null),It([o.computed],Lt.prototype,"rppaScoreThreshold",null),It([o.computed],Lt.prototype,"zScoreThreshold",null),It([o.computed],Lt.prototype,"selectedMolecularProfileIds",null),It([o.computed],Lt.prototype,"tabId",null),It([o.observable],Lt.prototype,"resultsPageSettingsVisible",void 0),It([o.observable],Lt.prototype,"checkingVirtualStudies",void 0),It([o.observable],Lt.prototype,"urlValidationError",void 0),It([o.computed],Lt.prototype,"profileFilter",null),It([o.observable],Lt.prototype,"ajaxErrors",void 0),It([o.observable],Lt.prototype,"sessionIdURL",void 0),It([o.observable],Lt.prototype,"queryFormVisible",void 0),It([o.computed],Lt.prototype,"doNonSelectedDownloadableMolecularProfilesExist",null),It([o.observable],Lt.prototype,"modifyQueryParams",void 0),It([gt.default,o.action],Lt.prototype,"setOncoprintAnalysisCaseType",null),It([o.computed],Lt.prototype,"excludeGermlineMutations",null),It([gt.default,o.action],Lt.prototype,"setExcludeGermlineMutations",null),It([o.computed],Lt.prototype,"hugoGeneSymbols",null),It([o.computed],Lt.prototype,"queryContainsOql",null),It([o.computed],Lt.prototype,"queryContainsMutationOql",null),It([o.computed],Lt.prototype,"sampleListCategory",null),It([o.computed.struct],Lt.prototype,"comparisonGroupsReferencedInURL",null),It([o.computed],Lt.prototype,"chartMetaSet",null),It([o.computed],Lt.prototype,"samplesSpecificationParams",null),It([o.computed],Lt.prototype,"downloadFilenamePrefix",null),It([o.computed],Lt.prototype,"referenceGenomeBuild",null),It([gt.default],Lt.prototype,"generateGenomeNexusHgvsgUrl",null),It([o.computed],Lt.prototype,"ensemblLink",null),It([o.computed],Lt.prototype,"genomeNexusClient",null),It([o.computed],Lt.prototype,"genomeNexusInternalClient",null),It([o.computed],Lt.prototype,"referenceGenome",null),It([o.computed],Lt.prototype,"genesInvalid",null),It([o.computed],Lt.prototype,"isQueryInvalid",null),It([o.computed],Lt.prototype,"geneLimit",null),It([o.computed],Lt.prototype,"didOncoKbFailInOncoprint",null),It([o.computed],Lt.prototype,"didHotspotFailInOncoprint",null),It([l.cached],Lt.prototype,"genomeNexusCache",null),It([l.cached],Lt.prototype,"genomeNexusMutationAssessorCache",null),It([l.cached],Lt.prototype,"pubMedCache",null),It([l.cached],Lt.prototype,"discreteCNACache",null),It([l.cached],Lt.prototype,"cancerTypeCache",null),It([l.cached],Lt.prototype,"mutationCountCache",null),It([l.cached],Lt.prototype,"pdbHeaderCache",null),It([l.cached],Lt.prototype,"mutationDataCache",null),It([Qe.a],Lt.prototype,"sortRnaSeqMolecularDataByStudy",null),It([o.action],Lt.prototype,"clearErrors",null),It([o.computed],Lt.prototype,"isMixedReferenceGenome",null)},function(e,t,n){"use strict";var r=n(187),o=n.n(r);var i=n(2);function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",function(){return d});var u=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},c=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};function p(e){return e.hasOwnProperty("meta")}var d=function(){function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.queryToKey=t,this.dataToKey=n,this.fetch=r,this.init();for(var a=arguments.length,s=new Array(a>3?a-3:0),l=3;l<a;l++)s[l-3]=arguments[l];this.staticDependencies=s,this.debouncedPopulate=function(e,t,n,r,o){var i,a,s;function l(){s=n(),a=!1,i=null}function u(){a?(e(s),l()):(a=!0,i=window.setTimeout(u,r)),o&&o()}return l(),Object.assign(function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];s=t.apply(void 0,[s].concat(n)),null===i?(a=!0,i=window.setTimeout(u,r)):a=!1},{isPending:function(){return null!==i},cancel:function(){null!==i&&window.clearTimeout(i),l()}})}(function(e){var t=Object.keys(e).map(function(t){return e[t]});o.populate(t)},function(e,t){return e[o.queryToKey(t)]=t,e},function(){return{}},0),Object(i.reaction)(function(){return o._cache},function(e){o.promises=o.promises.filter(function(e){return!o.tryTrigger(e)})})}var t,n,r;return t=e,(n=[{key:"init",value:function(){this.pending={},this._cache=o.a.from({}),this.promises=[]}},{key:"getPromise",value:function(e,t){var n=this;return new Promise(function(r,o){var i,a={keys:(i=Array.isArray(e)?e:[e]).map(function(e){return n.queryToKey(e)}),callback:r,error:o};n.tryTrigger(a)||(n.promises.push(a),t&&i.map(function(e){return n.debouncedPopulate(e)}))})}},{key:"tryTrigger",value:function(e){var t=this,n=!0,r=!1,o=e.keys.map(function(e){var o=t._cache[e];return o?"error"===o.status&&(n=!1,r=!0):n=!1,o});return r?(e.error(),!0):!!n&&(e.callback(o),!0)}},{key:"peek",value:function(e){var t=this.queryToKey(e);return this._cache[t]||null}},{key:"get",value:function(e){return this.debouncedPopulate(e),this.peek(e)}},{key:"getImmediately",value:function(e){return c(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.populate([e]);case 2:return t.abrupt("return",this.peek(e));case 3:case"end":return t.stop()}},t,this)}))}},{key:"addData",value:function(e){var t={},n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;t[this.dataToKey(s)]={status:"complete",data:s}}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}this.updateCache(t)}},{key:"populate",value:function(e){return c(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==(n=this.getMissing(e)).length){t.next=3;break}return t.abrupt("return");case 3:return this.markPending(n),t.prev=4,t.next=7,this.fetch.apply(this,[n].concat(a(this.staticDependencies)));case 7:return r=t.sent,this.putData(n,r),t.abrupt("return",!0);case 12:return t.prev=12,t.t0=t.catch(4),this.markError(n),t.abrupt("return",!1);case 16:return t.prev=16,this.unmarkPending(n),t.finish(16);case 19:case"end":return t.stop()}},t,this,[[4,12,16,19]])}))}},{key:"getMissing",value:function(e){var t=this,n=this._cache,r=this.pending;return e.filter(function(e){var o=t.queryToKey(e);return!n[o]&&!r[o]})}},{key:"markPending",value:function(e){var t=this.pending,n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;t[this.queryToKey(s)]=!0}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}}},{key:"unmarkPending",value:function(e){var t=this.pending,n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;t[this.queryToKey(s)]=!1}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}}},{key:"markError",value:function(e){var t={},n={status:"error",data:null},r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;t[this.queryToKey(l)]=n}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}this.updateCache(t)}},{key:"putData",value:function(e,t){var n={},r={},o=!0,i=!1,a=void 0;try{for(var s,l=t[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var u=s.value;if(p(u)){var c=u.meta,d=!0,f=!1,h=void 0;try{for(var m,y=u.data[Symbol.iterator]();!(d=(m=y.next()).done);d=!0){var g=m.value,v=this.dataToKey(g,c);n[v]={status:"complete",data:g,meta:c},r[v]=!0}}catch(e){f=!0,h=e}finally{try{d||null==y.return||y.return()}finally{if(f)throw h}}}else{var b=this.dataToKey(u);n[b]={status:"complete",data:u},r[b]=!0}}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}var S=!0,_=!1,w=void 0;try{for(var E,O=e[Symbol.iterator]();!(S=(E=O.next()).done);S=!0){var C=E.value,P=this.queryToKey(C);r[P]||(n[P]={status:"complete",data:null})}}catch(e){_=!0,w=e}finally{try{S||null==O.return||O.return()}finally{if(_)throw w}}this.updateCache(n)}},{key:"updateCache",value:function(e){Object.keys(e).length>0&&(this._cache=this._cache.merge(e,{deep:!0}))}},{key:"cache",get:function(){return this._cache}},{key:"activePromisesCount",get:function(){return this.promises.length}}])&&s(t.prototype,n),r&&s(t,r),e}();u([i.observable.ref],d.prototype,"_cache",void 0),u([i.action],d.prototype,"updateCache",null)},function(e,t,n){"use strict";n.d(t,"b",function(){return C}),n.d(t,"a",function(){return P}),n.d(t,"eb",function(){return x}),n.d(t,"u",function(){return T}),n.d(t,"F",function(){return k}),n.d(t,"G",function(){return A}),n.d(t,"q",function(){return I}),n.d(t,"B",function(){return D}),n.d(t,"e",function(){return M}),n.d(t,"A",function(){return j}),n.d(t,"Q",function(){return R}),n.d(t,"f",function(){return L}),n.d(t,"g",function(){return G}),n.d(t,"k",function(){return F}),n.d(t,"l",function(){return B}),n.d(t,"C",function(){return V}),n.d(t,"r",function(){return z}),n.d(t,"K",function(){return H}),n.d(t,"D",function(){return W}),n.d(t,"m",function(){return K}),n.d(t,"t",function(){return $}),n.d(t,"s",function(){return Q}),n.d(t,"j",function(){return Y}),n.d(t,"p",function(){return X}),n.d(t,"o",function(){return Z}),n.d(t,"v",function(){return J}),n.d(t,"w",function(){return ee}),n.d(t,"x",function(){return te}),n.d(t,"z",function(){return ne}),n.d(t,"y",function(){return re}),n.d(t,"h",function(){return oe}),n.d(t,"i",function(){return ie}),n.d(t,"c",function(){return ae}),n.d(t,"gb",function(){return le}),n.d(t,"fb",function(){return ue}),n.d(t,"n",function(){return ce}),n.d(t,"H",function(){return pe}),n.d(t,"Z",function(){return de}),n.d(t,"J",function(){return fe}),n.d(t,"L",function(){return he}),n.d(t,"I",function(){return me}),n.d(t,"O",function(){return ye}),n.d(t,"bb",function(){return ge}),n.d(t,"cb",function(){return ve}),n.d(t,"Y",function(){return be}),n.d(t,"db",function(){return Se}),n.d(t,"d",function(){return we}),n.d(t,"N",function(){return Oe}),n.d(t,"M",function(){return Ce}),n.d(t,"ab",function(){return Pe}),n.d(t,"X",function(){return xe}),n.d(t,"W",function(){return Te}),n.d(t,"T",function(){return ke}),n.d(t,"S",function(){return Ae}),n.d(t,"V",function(){return Ie}),n.d(t,"E",function(){return De}),n.d(t,"P",function(){return Me}),n.d(t,"U",function(){return je}),n.d(t,"R",function(){return Ne});var r=n(4),o=n(11),i=n.n(o),a=n(102),s=n(178),l=n(103),u=n(184),c=n(3),p=n(182),d=n(180),f=n(628),h=n(653),m=n(625),y=n(611),g=n(570),v=n(593),b=n(6),S=n(15),_=n(602),w=n(601);function E(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var O=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},C={indicatorMap:{}},P={UNKNOWN:void 0,WHOLE_EXOME_SEQ:"WES",WHOLE_GENOME_SEQ:"WGS"};function x(e){return e===P.UNKNOWN||e===P.WHOLE_EXOME_SEQ||e===P.WHOLE_GENOME_SEQ}function T(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.a;return O(this,void 0,void 0,regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!t){r.next=6;break}return r.next=3,n.fetchMutationsInMolecularProfileUsingPOST({molecularProfileId:t,mutationFilter:e,projection:"DETAILED"});case 3:return r.abrupt("return",r.sent);case 6:return r.abrupt("return",[]);case 7:case"end":return r.stop()}},r)}))}function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["annotation_summary"],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"uniprot",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d.a;return O(this,void 0,void 0,regeneratorRuntime.mark(function o(){return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(a.J)(Object(v.c)(e),t,n,r));case 1:case"end":return o.stop()}},o)}))}function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["annotation_summary"],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"uniprot",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d.a;return O(this,void 0,void 0,regeneratorRuntime.mark(function o(){return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(a.K)(Object(v.c)(e),t,n,r));case 1:case"end":return o.stop()}},o)}))}function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a;return O(this,void 0,void 0,regeneratorRuntime.mark(function n(){var o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e||!e.length){n.next=10;break}return o=Object(c.W)(e),n.t0=r,n.next=5,t.fetchGenesUsingPOST({geneIdType:"HUGO_GENE_SYMBOL",geneIds:e.slice(),projection:"SUMMARY"});case 5:return n.t1=n.sent,n.t2=function(e){return o[e.hugoGeneSymbol]},n.abrupt("return",n.t0.sortBy.call(n.t0,n.t1,n.t2));case 10:return n.abrupt("return",[]);case 11:case"end":return n.stop()}},n)}))}function D(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.a;return O(this,void 0,void 0,regeneratorRuntime.mark(function o(){var i;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!t||!t.length){o.next=10;break}return i=Object(c.W)(t),o.t0=r,o.next=5,n.fetchReferenceGenomeGenesUsingPOST({genomeName:e,geneIds:t.slice()});case 5:return o.t1=o.sent,o.t2=function(e){return i[e.hugoGeneSymbol]},o.abrupt("return",o.t0.sortBy.call(o.t0,o.t1,o.t2));case 10:return o.abrupt("return",[]);case 11:case"end":return o.stop()}},o)}))}function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a;return O(this,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if("public-portal"!==b.b.serverConfig.app_name){n.next=2;break}return n.abrupt("return",i.a.get(Object(S.n)("reactapp/reference_genome_hg19.json")));case 2:if(!e){n.next=8;break}return n.next=5,t.getAllReferenceGenomeGenesUsingGET({genomeName:e});case 5:return n.abrupt("return",n.sent);case 8:return n.abrupt("return",[]);case 9:case"end":return n.stop()}},n)}))}function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.a;return O(this,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=6;break}return n.next=3,t.getAlignmentUsingGET({idType:"ensembl",id:e});case 3:return n.abrupt("return",n.sent);case 6:return n.abrupt("return",[]);case 7:case"end":return n.stop()}},n)}))}function N(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d.a;return O(this,void 0,void 0,regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.fetchCanonicalEnsemblTranscriptsByHugoSymbolsPOST({hugoSymbols:e,isoformOverrideSource:t});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},r)}))}function R(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d.a;return O(this,void 0,void 0,regeneratorRuntime.mark(function o(){var i;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,N(e,t,n);case 2:return i=o.sent,o.abrupt("return",i?r.zipObject(e,i):void 0);case 4:case"end":return o.stop()}},o)}))}function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a;return O(this,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=6;break}return n.next=3,t.fetchClinicalDataUsingPOST({clinicalDataType:"SAMPLE",clinicalDataMultiStudyFilter:e,projection:"DETAILED"});case 3:return n.abrupt("return",n.sent);case 6:return n.abrupt("return",[]);case 7:case"end":return n.stop()}},n)}))}function G(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.a;return O(this,void 0,void 0,regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!e||!t){r.next=6;break}return r.next=3,n.getAllClinicalDataOfPatientInStudyUsingGET({projection:"DETAILED",studyId:e,patientId:t});case 3:return r.abrupt("return",r.sent);case 6:return r.abrupt("return",[]);case 7:case"end":return r.stop()}},r)}))}function F(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.a;return O(this,void 0,void 0,regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(e&&t.length>0)){r.next=6;break}return r.next=3,n.fetchCopyNumberSegmentsUsingPOST({sampleIdentifiers:t.map(function(t){return{sampleId:t,studyId:e}}),projection:"DETAILED"});case 3:return r.abrupt("return",r.sent);case 6:return r.abrupt("return",[]);case 7:case"end":return r.stop()}},r)}))}function B(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.a;return e.length>0?n.fetchCopyNumberSegmentsUsingPOST({sampleIdentifiers:e.map(function(e){return{sampleId:e.sampleId,studyId:e.studyId}}),chromosome:t,projection:"DETAILED"}):Promise.resolve([])}function V(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s.a;return O(this,void 0,void 0,regeneratorRuntime.mark(function o(){return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!e||!t){o.next=6;break}return o.next=3,r.getAllSamplesOfPatientInStudyUsingGET({studyId:e,patientId:t,projection:"DETAILED"});case 3:return o.abrupt("return",o.sent);case 6:if(!e||!n){o.next=12;break}return o.next=9,r.getSampleInStudyUsingGET({studyId:e,sampleId:n}).then(function(e){return[e]});case 9:return o.abrupt("return",o.sent);case 12:return o.abrupt("return",[]);case 13:case"end":return o.stop()}},o)}))}function z(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.a;return O(this,void 0,void 0,regeneratorRuntime.mark(function o(){var i,a;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(t&&e.result){o.next=2;break}return o.abrupt("return",[]);case 2:if(!((i=e.result.filter(function(e){return r.find(t,function(t){return t===e})})).length>0)){o.next=10;break}return o.next=6,Promise.all(i.map(function(e){return n.getAllSampleIdsInSampleListUsingGET({sampleListId:q(e)})}));case 6:return a=o.sent,o.abrupt("return",r.flatten(a.map(function(e,t){var n=i[t];return e.map(function(e){return{sampleId:e,studyId:n}})})));case 10:return o.abrupt("return",[]);case 11:case"end":return o.stop()}},o)}))}function q(e){return"".concat(e,"_germline")}function U(e){var t={};return e.result&&r.each(e.result,function(e){"CANCER_TYPE_DETAILED"!==e.clinicalAttributeId&&"CANCER_TYPE"!==e.clinicalAttributeId||(t[e.uniqueSampleKey]=!0)}),t}function H(e,t){if(e.result&&e.result.length>0&&t.result){var n=U(t);return r.filter(e.result,function(e){return!0!==n[e.uniqueSampleKey]})}return[]}function W(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a;return O(this,void 0,void 0,regeneratorRuntime.mark(function n(){var o,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(o=[],!(e.result&&e.result.length>0)){n.next=6;break}return i=r.uniq(e.result.map(function(e){return e.studyId})),n.next=5,t.fetchStudiesUsingPOST({studyIds:i,projection:"DETAILED"});case 5:o=n.sent;case 6:return n.abrupt("return",o);case 7:case"end":return n.stop()}},n)}))}function K(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.a;return O(this,void 0,void 0,regeneratorRuntime.mark(function o(){var i,a,s;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(0!==(i=we(e,t)).length){o.next=3;break}return o.abrupt("return",void 0);case 3:if(!((a=r.chain(i).filter(function(e){return e.hasOwnProperty("keyword")}).map(function(e){return e.keyword}).uniq().value()).length>0)){o.next=11;break}return o.next=7,n.fetchCosmicCountsUsingPOST({keywords:r.filter(a,function(e){return null!=e})});case 7:return s=o.sent,o.abrupt("return",Object(h.b)(s));case 11:return o.abrupt("return",void 0);case 12:case"end":return o.stop()}},o)}))}function $(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.a;return O(this,void 0,void 0,regeneratorRuntime.mark(function n(){var r,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.getSignificantlyMutatedGenesUsingGET({studyId:e});case 2:return r=n.sent,o=r.reduce(function(e,t){return e[t.entrezGeneId]={qValue:t.qValue},e},{}),n.abrupt("return",o);case 5:case"end":return n.stop()}},n)}))}function Q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.a;return O(this,void 0,void 0,regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=7;break}return n.next=3,t.getSignificantCopyNumberRegionsUsingGET({studyId:e});case 3:return r=n.sent,n.abrupt("return",r.reduce(function(e,t){return t.genes.forEach(function(n){void 0===e[n.entrezGeneId]&&(e[n.entrezGeneId]=[]),e[n.entrezGeneId].push({amp:t.amp,qValue:t.qValue,peakGeneCount:t.genes.length})}),e},{}));case 7:return n.abrupt("return",{});case 8:case"end":return n.stop()}},n)}))}function Y(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.a;return O(this,void 0,void 0,regeneratorRuntime.mark(function r(){var o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(o=e.result?e.result.map(function(e){return{alteration:e.alteration,entrezGeneId:e.entrezGeneId}}):[],!(t.result&&o.length>0)){r.next=7;break}return r.next=4,n.fetchCopyNumberCountsUsingPOST({molecularProfileId:t.result,copyNumberCountIdentifiers:o});case 4:return r.abrupt("return",r.sent);case 7:return r.abrupt("return",[]);case 8:case"end":return r.stop()}},r)}))}function X(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return O(this,void 0,void 0,regeneratorRuntime.mark(function o(){var i,a;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return i={},t.length>0&&(i.sampleIds=t),n.length>0&&(i.sampleListId=n),o.next=5,s.a.getGenePanelDataUsingPOST({molecularProfileId:e,genePanelDataFilter:i});case 5:return a=o.sent,o.abrupt("return",r.keyBy(a,function(e){return e.sampleId}));case 7:case"end":return o.stop()}},o)}))}function Z(e){return O(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,o,i=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return{},n=r.uniq(e),t.next=4,Promise.all(r.map(n,function(e){return O(i,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.getGenePanelUsingGET({genePanelId:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}))}));case 4:return o=t.sent,t.abrupt("return",r.keyBy(o,function(e){return e.genePanelId}));case 6:case"end":return t.stop()}},t)}))}function J(){return n(723)}function ee(){return n(724)}function te(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.a;return O(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.utilsCancerGeneListGetUsingGET_1({});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}))}function ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.a;return O(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.infoGetUsingGET_1({});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}))}function re(e,t,n,o,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:p.a;return O(this,void 0,void 0,regeneratorRuntime.mark(function o(){var s,l;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(s=we(n,i),!(t instanceof Error)){o.next=5;break}return o.abrupt("return",new Error);case 5:if(0!==s.length){o.next=7;break}return o.abrupt("return",C);case 7:return l=r.filter(s,function(e){return!!t[e.entrezGeneId]}),o.abrupt("return",le(l.map(function(t){return{entrezGeneId:t.entrezGeneId,alteration:t.proteinChange,proteinPosStart:t.proteinPosStart,proteinPosEnd:t.proteinPosEnd,mutationType:t.mutationType,tumorType:ae(t.uniqueSampleKey,e)}}),a));case 9:case"end":return o.stop()}},o)}))}function oe(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:p.a;return O(this,void 0,void 0,regeneratorRuntime.mark(function i(){var a,s;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(n.result&&0!==n.result.length){i.next=4;break}return i.abrupt("return",C);case 4:return a=r.filter(n.result,function(e){return!!t[e.gene.entrezGeneId]}),s=r.uniqBy(r.map(a,function(t){return Object(c.x)(t.gene.entrezGeneId,ae(t.uniqueSampleKey,e),Object(f.a)(t.alteration))}).filter(function(e){return e.copyNameAlterationType}),"id"),i.abrupt("return",ue(s,o));case 7:case"end":return i.stop()}},i)}))}function ie(e,t,n,o,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:p.a;return O(this,void 0,void 0,regeneratorRuntime.mark(function i(){var s,l;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(n.result&&0!==n.result.length){i.next=4;break}return i.abrupt("return",C);case 4:return s=r.filter(n.result,function(e){return o[e.molecularProfileId].molecularAlterationType===g.a.COPY_NUMBER_ALTERATION&&!!t[e.entrezGeneId]}),l=r.uniqBy(r.map(s,function(t){return Object(c.x)(t.entrezGeneId,ae(t.uniqueSampleKey,e),Object(f.a)(t.value))}).filter(function(e){return e.copyNameAlterationType}),function(e){return e.id}),i.abrupt("return",ue(l,a));case 7:case"end":return i.stop()}},i)}))}function ae(e,t){return t[e]||null}var se="Fusion";function le(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.a,n=arguments.length>2?arguments[2]:void 0;return O(this,void 0,void 0,regeneratorRuntime.mark(function o(){var i,a,s,l,u;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(i=r.uniqBy(r.map(e.filter(function(e){return e.mutationType!==se}),function(e){return Object(c.z)(e.entrezGeneId,e.tumorType,e.alteration,e.mutationType,e.proteinPosStart,e.proteinPosEnd,n)}),"id"),a=r.uniqBy(r.map(e.filter(function(e){return e.mutationType===se}),function(e){return Object(c.w)(e.entrezGeneId,e.tumorType,e.alteration,e.mutationType,n)}),"id"),0!==i.length){o.next=6;break}o.t0=[],o.next=9;break;case 6:return o.next=8,t.annotateMutationsByProteinChangePostUsingPOST_1({body:i});case 8:o.t0=o.sent;case 9:if(s=o.t0,0!==a.length){o.next=14;break}o.t1=[],o.next=17;break;case 14:return o.next=16,t.annotateStructuralVariantsPostUsingPOST_1({body:a});case 16:o.t1=o.sent;case 17:return l=o.t1,u={indicatorMap:Object(c.y)(s.concat(l))},o.abrupt("return",u);case 20:case"end":return o.stop()}},o)}))}function ue(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.a;return O(this,void 0,void 0,regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(0!==e.length){n.next=4;break}n.t0=[],n.next=7;break;case 4:return n.next=6,t.annotateCopyNumberAlterationsPostUsingPOST_1({body:e});case 6:n.t0=n.sent;case 7:return r=n.t0,n.abrupt("return",(o=r,{indicatorMap:Object(c.y)(o)}));case 9:case"end":return n.stop()}var o},n)}))}function ce(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.a;return O(this,void 0,void 0,regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!t.isComplete||!t.result){r.next=6;break}return r.next=3,n.fetchDiscreteCopyNumbersInMolecularProfileUsingPOST({projection:"DETAILED",discreteCopyNumberFilter:e,molecularProfileId:t.result});case 3:return r.abrupt("return",r.sent);case 6:return r.abrupt("return",[]);case 7:case"end":return r.stop()}},r)}))}function pe(e){if(e.result){var t=e.result.find(function(e){return"DISCRETE"===e.datatype});return t?t.molecularProfileId:void 0}}function de(e){return"MUTATION_EXTENDED"===e.molecularAlterationType}function fe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y.a;if(e.result)return e.result.find(function(e){return e.molecularProfileId==="".concat(t).concat(n)})}function he(e,t){var n=fe(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:y.b);return n?n.molecularProfileId:void 0}function me(e){if(!e.result)return null;var t=/^.+rna_seq.*_zscores$/,n=/^.*_zscores$/,r=e.result.find(function(e){return t.test(e.molecularProfileId.toLowerCase())});if(r)return r.molecularProfileId;var o=e.result.find(function(e){return n.test(e.molecularProfileId.toLowerCase())});return o?o.molecularProfileId:null}function ye(e,t,n){var o={};if(e.result&&r.each(e.result,function(e){"CANCER_TYPE_DETAILED"===e.clinicalAttributeId&&(o[e.uniqueSampleKey]=e.value)}),t&&t.result&&n&&n.result){var i=Pe(t.result);r.each(n.result,function(e){void 0===o[e.uniqueSampleKey]&&(o[e.uniqueSampleKey]=i[e.studyId])})}return o}function ge(e){var t={};if(e.result){var n=!0,r=!1,o=void 0;try{for(var i,a=e.result[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value,l="".concat(s.entrezGeneId,"_").concat(s.alteration);t[l]=t[l]||[],t[l].push(s)}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}}return Object.keys(t).map(function(e){return t[e]})}function ve(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Oe,n={};return _e(n,e,t,!1),Object.keys(n).map(function(e){return n[e]})}function be(e){return Object(m.d)(e.result||[])}function Se(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Oe,r={};return _e(r,e,n,!1),_e(r,t,n,!0),Object.keys(r).map(function(e){return r[e]})}function _e(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Oe,r=arguments.length>3?arguments[3]:void 0;if(t.result){var o=!0,i=!1,a=void 0;try{for(var s,l=t.result[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var u=s.value,c=n(u);(!r||c in e)&&(e[c]=e[c]||[],e[c].push(u))}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}}}function we(e,t){var n=e&&e.result?e.result:[],r=t&&t.result?t.result:[];return n.concat(r)}function Ee(e){return[e.chr,e.startPosition,e.endPosition,e.referenceAllele,e.variantAllele]}function Oe(e){return[e.gene.hugoGeneSymbol,e.proteinChange].concat(E(Ee(e))).join("_")}function Ce(e,t){var n={};return e?n={sampleListId:e}:t&&(n={sampleIds:t}),n}function Pe(e){return e.reduce(function(e,t){return e[t.studyId]=t.cancerType.name,e},{})}function xe(e,t){return r.map(e,function(e){return{id:e,clinicalData:t.filter(function(t){return t.sampleId===e})}})}function Te(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r={},o=!0,i=!1,a=void 0;try{for(var s,l=n[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){r[s.value]=[]}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}var u=!0,c=!1,p=void 0;try{for(var d,f=e[Symbol.iterator]();!(u=(d=f.next()).done);u=!0){var h=d.value,m=t(h);r[m]=r[m]||[],r[m].push(h)}}catch(e){c=!0,p=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw p}}return r}function ke(e,t,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:l.a;return O(this,void 0,void 0,regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.fetchGenesetHierarchyInfoUsingPOST({geneticProfileId:e,percentile:t,scoreThreshold:n,pvalueThreshold:r,sampleListId:o});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},a)}))}function Ae(e){return e&&r.every(e,function(e){return new RegExp(_.a.grch38.NCBI,"i").test(e.referenceGenome)||new RegExp(_.a.grch38.UCSC,"i").test(e.referenceGenome)})?b.b.serverConfig.genomenexus_url_grch38:b.b.serverConfig.genomenexus_url}function Ie(e){var t=Object(w.m)(e),n=r.reduce(t,function(e,n){var r=n.substring(0,n.indexOf("_STATUS"));return e.includes(r)||t.includes("".concat(r,"_MONTHS"))&&e.push(r),e},[]);return r.sortBy(n,function(e){return w.p[e]||w.a})}function De(e,t){return O(this,void 0,void 0,regeneratorRuntime.mark(function n(){var o,i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(0!==e.length){n.next=2;break}return n.abrupt("return",!1);case 2:if(0!==(o=r.reduce(t,function(e,t){return e.push(t+"_STATUS"),e.push(t+"_MONTHS"),e},[])).length){n.next=5;break}return n.abrupt("return",!1);case 5:return i={attributeIds:o,identifiers:e.map(function(e){return{entityId:e.patientId,studyId:e.studyId}})},n.next=8,s.a.fetchClinicalDataUsingPOSTWithHttpInfo({clinicalDataType:"PATIENT",clinicalDataMultiStudyFilter:i,projection:"META"}).then(function(e){return parseInt(e.header["total-count"],10)});case 8:return a=n.sent,n.abrupt("return",a>0);case 10:case"end":return n.stop()}},n)}))}function Me(e){var t=!1,n=!1,r=!1,o=!1,i=!0,a=!1,s=void 0;try{for(var l,u=e[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value,p=!0,d=!1,f=void 0;try{for(var h,m=(c.alterations||[])[Symbol.iterator]();!(p=(h=m.next()).done);p=!0){var y=h.value;t=t||"mut"===y.alteration_type,n=n||"cna"===y.alteration_type,r=r||"exp"===y.alteration_type,o=o||"prot"===y.alteration_type}}catch(e){d=!0,f=e}finally{try{p||null==m.return||m.return()}finally{if(d)throw f}}}}catch(e){a=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw s}}return{haveMutInQuery:t,haveCnaInQuery:n,haveMrnaInQuery:r,haveProtInQuery:o}}function je(e){return r.flatten(e.map(function(e){return(e.alterations||[]).filter(function(e){return"mut"===e.alteration_type&&e.info.unrecognized})})).map(function(e){return'Unrecognized input "'.concat(e.constr_val,'" is interpreted as a mutation code.')})}function Ne(e){return r.mapValues(r.keyBy([g.a.MUTATION_EXTENDED,g.a.COPY_NUMBER_ALTERATION,g.a.MRNA_EXPRESSION,g.a.PROTEIN_LEVEL]),function(t){return e.find(function(e){return e.showProfileInAnalysisTab&&e.molecularAlterationType===t})})}},function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"m",function(){return f}),n.d(t,"o",function(){return h}),n.d(t,"h",function(){return m}),n.d(t,"l",function(){return y}),n.d(t,"k",function(){return g}),n.d(t,"c",function(){return v}),n.d(t,"d",function(){return b}),n.d(t,"i",function(){return S}),n.d(t,"b",function(){return _}),n.d(t,"g",function(){return w}),n.d(t,"p",function(){return E}),n.d(t,"n",function(){return O}),n.d(t,"r",function(){return C}),n.d(t,"f",function(){return P}),n.d(t,"q",function(){return x}),n.d(t,"j",function(){return T}),n.d(t,"e",function(){return k});var r=n(4),o=n(102),i=n(3),a=n(22),s=n(611),l=n(654),u=n(578),c=n(593),p=n(598),d={missenseColor:u.p,inframeColor:u.n,truncatingColor:u.t,otherColor:u.r};function f(e){return"fusion"===Object(p.c)(e.mutationType)}function h(e){return new RegExp(s.b+"$").test(e)}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;return Object(o.P)(Object(c.c)(e),t)}function y(e){var t={},n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value,l=!0,u=!1,c=void 0;try{for(var p,d=s[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var f=p.value,h=f.proteinPosStart;null!=h&&(t[h]=t[h]||[],t[h].push(f))}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return t}function g(e){var t={},n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value,l="".concat(s.gene.hugoGeneSymbol,"_").concat(s.patientId,"_").concat(s.proteinChange);t[l]=t[l]||[],t[l].push(s)}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return t}function v(e){return r.values(e).map(function(e){return e.length>0?e.length-1:0}).reduce(function(e,t){return e+t},0)}function b(e){return Object.keys(g(e)).length}function S(e,t,n){var o=[];return e.forEach(function(e){var r=e[0];r.proteinPosStart>-1&&r.proteinPosStart>=t&&r.proteinPosStart<=n&&o.push(r.proteinPosStart),r.proteinPosEnd>r.proteinPosStart&&r.proteinPosEnd>=t&&r.proteinPosEnd<=n&&o.push(r.proteinPosEnd)}),r.uniq(o)}var _=new RegExp(s.c,"i");function w(e,t,n,o){if(t.length>0&&o.length>0){var a=Object(i.Y)(o.map(l.a));return 100*r.chain(t).filter(function(t){var r=n[t.molecularProfileId];return!!r&&(t.gene.hugoGeneSymbol===e&&_.test(t.mutationStatus)&&!!a[Object(l.a)(r.studyId,t.sampleId)])}).map(l.a).uniq().value().length/o.length}return 0}function E(e,t,n,o){if(t.length>0&&o.length>0){var a=Object(i.Y)(o.map(l.a));return 100*r.chain(t).filter(function(t){var r=n[t.molecularProfileId];return!!r&&(t.gene.hugoGeneSymbol===e&&!_.test(t.mutationStatus)&&!!a[Object(l.a)(r.studyId,t.sampleId)])}).map(l.a).uniq().value().length/o.length}return 0}function O(e){return!e.mutationStatus||!_.test(e.mutationStatus)}function C(e,t){e.forEach(function(e){if(e.gene&&e.gene.hugoGeneSymbol){var n=t[e.gene.hugoGeneSymbol];n&&(e.gene=r.merge({},n,e.gene),e.entrezGeneId=e.entrezGeneId||n.entrezGeneId)}})}function P(e){var t=e.chromosome;switch(e.chromosome.toUpperCase()){case"X":t="23";break;case"Y":t="24"}return"".concat(t,",").concat(e.start,",").concat(e.end,",").concat(e.referenceAllele,",").concat(e.variantAllele)}function x(e){var t={};return e.map(function(e){var n=Object(a.d)(e);n&&(t[P(n)]=n)}),r.values(t)}function T(e){if(Number.isInteger(e.tumorRefCount)&&Number.isInteger(e.tumorAltCount)){var t=e.tumorAltCount/(e.tumorAltCount+e.tumorRefCount);return isNaN(t)?null:t}return null}function k(e){return function(e){if(e.chr&&e.startPosition&&-1!==e.startPosition&&e.endPosition&&-1!==e.endPosition&&e.referenceAllele&&"NA"!==e.referenceAllele&&e.variantAllele&&"NA"!==e.variantAllele)return"-"!==e.referenceAllele||"-"!==e.variantAllele;return!1}(e)?"-"===e.referenceAllele?"".concat(e.chr,":g.").concat(e.startPosition,"_").concat(e.endPosition,"ins").concat(e.variantAllele):"-"===e.variantAllele?e.startPosition===e.endPosition?"".concat(e.chr,":g.").concat(e.startPosition,"del"):"".concat(e.chr,":g.").concat(e.startPosition,"_").concat(e.endPosition,"del"):1===e.referenceAllele.length&&1===e.variantAllele.length?"".concat(e.chr,":g.").concat(e.startPosition).concat(e.referenceAllele,">").concat(e.variantAllele):1===e.referenceAllele.length&&e.variantAllele.length>1?"".concat(e.chr,":g.").concat(e.startPosition,"delins").concat(e.variantAllele):"".concat(e.chr,":g.").concat(e.startPosition,"_").concat(e.endPosition,"delins").concat(e.variantAllele):null}},function(e,t,n){"use strict";(function(e){n.d(t,"b",function(){return S}),n.d(t,"e",function(){return _}),n.d(t,"c",function(){return w}),n.d(t,"g",function(){return O}),n.d(t,"a",function(){return C}),n.d(t,"f",function(){return x}),n.d(t,"d",function(){return A}),n.d(t,"C",function(){return D}),n.d(t,"tb",function(){return M}),n.d(t,"s",function(){return j}),n.d(t,"mb",function(){return N}),n.d(t,"v",function(){return R}),n.d(t,"fb",function(){return L}),n.d(t,"P",function(){return G}),n.d(t,"gb",function(){return V}),n.d(t,"U",function(){return z}),n.d(t,"G",function(){return q}),n.d(t,"hb",function(){return U}),n.d(t,"kb",function(){return H}),n.d(t,"sb",function(){return W}),n.d(t,"H",function(){return K}),n.d(t,"q",function(){return $}),n.d(t,"p",function(){return Q}),n.d(t,"nb",function(){return Z}),n.d(t,"u",function(){return J}),n.d(t,"t",function(){return ee}),n.d(t,"pb",function(){return ne}),n.d(t,"lb",function(){return oe}),n.d(t,"r",function(){return ae}),n.d(t,"jb",function(){return ue}),n.d(t,"A",function(){return de}),n.d(t,"M",function(){return fe}),n.d(t,"N",function(){return he}),n.d(t,"n",function(){return me}),n.d(t,"m",function(){return ye}),n.d(t,"O",function(){return ge}),n.d(t,"x",function(){return be}),n.d(t,"y",function(){return Se}),n.d(t,"i",function(){return _e}),n.d(t,"I",function(){return we}),n.d(t,"Z",function(){return Ee}),n.d(t,"ib",function(){return Oe}),n.d(t,"T",function(){return Ce}),n.d(t,"eb",function(){return Pe}),n.d(t,"ab",function(){return xe}),n.d(t,"E",function(){return Te}),n.d(t,"h",function(){return ke}),n.d(t,"X",function(){return Ae}),n.d(t,"ob",function(){return Ie}),n.d(t,"K",function(){return Me}),n.d(t,"cb",function(){return je}),n.d(t,"bb",function(){return Ne}),n.d(t,"o",function(){return Re}),n.d(t,"qb",function(){return Le}),n.d(t,"L",function(){return Ge}),n.d(t,"k",function(){return Ve}),n.d(t,"j",function(){return ze}),n.d(t,"rb",function(){return qe}),n.d(t,"F",function(){return Ue}),n.d(t,"db",function(){return He}),n.d(t,"Y",function(){return We}),n.d(t,"B",function(){return Ke}),n.d(t,"R",function(){return Ye}),n.d(t,"S",function(){return Xe}),n.d(t,"w",function(){return Ze}),n.d(t,"J",function(){return Je}),n.d(t,"D",function(){return et}),n.d(t,"ub",function(){return tt}),n.d(t,"V",function(){return nt}),n.d(t,"l",function(){return rt}),n.d(t,"Q",function(){return ot}),n.d(t,"z",function(){return it}),n.d(t,"W",function(){return at});var r=n(4),o=n.n(r),i=n(0),a=n(15),s=n(103),l=n(178),u=n(606),c=n(3),p=n(578),d=n(667),f=n.n(d),h=n(668),m=n(600),y=n(589),g=n(642);function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var S,_,w,E,O,C,P=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};!function(e){e.SAMPLE="SAMPLE",e.PATIENT="PATIENT"}(S||(S={})),function(e){e.QUARTILES="QUARTILES",e.MEDIAN="MEDIAN",e.BINS="BINS"}(_||(_={})),function(e){e.STRING="STRING",e.NUMBER="NUMBER"}(w||(w={})),function(e){e.cna="cna",e.gistic="gistic",e.rae="rae",e.cna_consensus="cna_consensus"}(E||(E={})),function(e){e.CUSTOM_SELECT="CUSTOM_SELECT",e.SELECTED_COMPARISON_GROUPS="SELECTED_COMPARISON_GROUPS",e.MUTATION_COUNT_CNA_FRACTION="MUTATION_COUNT_CNA_FRACTION",e.CANCER_STUDIES="CANCER_STUDIES",e.MUTATION_COUNT="MUTATION_COUNT",e.FRACTION_GENOME_ALTERED="FRACTION_GENOME_ALTERED",e.GENOMIC_PROFILES_SAMPLE_COUNT="GENOMIC_PROFILES_SAMPLE_COUNT",e.CASE_LISTS_SAMPLE_COUNT="CASE_LISTS_SAMPLE_COUNT"}(O||(O={})),function(e){e.CUSTOM_DATA="Custom_Data",e.CLINICAL="Clinical",e.GENOMIC="Genomic",e.GENE_SPECIFIC="Gene_Specific"}(C||(C={}));var x=[{uniqueKey:O.CANCER_STUDIES,displayName:"Cancer Studies",description:"Cancer Studies",dataType:C.CLINICAL,patientAttribute:!1,chartType:u.a.PIE_CHART,dimension:{w:1,h:1},renderWhenDataChange:!1,priority:70},{uniqueKey:O.GENOMIC_PROFILES_SAMPLE_COUNT,displayName:"Genomic Profile Sample Counts",description:"",chartType:u.a.GENOMIC_PROFILES_TABLE,dataType:C.GENOMIC,patientAttribute:!1,dimension:{w:2,h:2},priority:70,renderWhenDataChange:!1},{uniqueKey:O.CASE_LISTS_SAMPLE_COUNT,displayName:"Case Lists",description:"",chartType:u.a.CASE_LIST_TABLE,dataType:C.CLINICAL,patientAttribute:!1,dimension:{w:2,h:2},priority:70,renderWhenDataChange:!1}],T=[u.d.colors.theme.primary,u.d.colors.theme.secondary,u.d.colors.theme.tertiary,u.d.colors.theme.quaternary,"#990099","#0099c6","#dd4477","#66aa00","#b82e2e","#316395","#994499","#22aa99","#aaaa11","#6633cc","#e67300","#8b0707","#651067","#329262","#5574a6","#3b3eac","#b77322","#16d620","#b91383","#f4359e","#9c5935","#a9c413","#2a778d","#668d1c","#bea413","#0c5922","#743411","#743440","#9986e2","#6c3912","#788508","#609618","#790099","#5099c6","#2d4477","#76aa00","#882e2e","#916395","#794499","#92aa99","#2aaa11","#5633cc","#667300","#100707","#751067","#229262","#4574a6","#103eac","#177322","#66d620","#291383","#94359e","#5c5935","#29c413","#6a778d","#868d1c","#5ea413","#6c5922","#243411","#103440","#2886e2","#d93912","#f28508","#110618","#970099","#0109c6","#d10477","#68aa00","#b12e2e","#310395","#944499","#24aa99","#a4aa11","#6333cc","#e77300","#820707","#610067","#339262","#5874a6","#313eac","#b67322","#13d620","#b81383","#f8359e","#935935","#a10413","#29778d","#678d1c","#b2a413","#075922","#763411","#773440","#2996e2","#dc4912","#f81508","#104618","#991099","#0049c6","#dd2477","#663a00","#b84e2e","#312395","#993499","#223a99","#aa1a11","#6673cc","#e66300","#8b5707","#656067","#323262","#5514a6","#3b8eac","#b71322","#165620","#b99383","#f4859e","#9c4935","#a91413","#2a978d","#669d1c","#be1413","#0c8922","#742411","#744440","#2983e2","#dc3612","#f88808","#109518","#990599","#0092c6","#dd4977","#66a900","#b8282e","#316295","#994199","#22a499","#aaa101","#66310c","#e67200","#8b0907","#651167","#329962","#5573a6","#3b37ac","#b77822","#16d120","#b91783","#f4339e","#9c5105","#a9c713","#2a710d","#66841c","#bea913","#0c5822","#743911","#743740","#298632","#dc3922","#f88588","#109658","#990010","#009916","#dd4447","#66aa60","#b82e9e","#316365","#994489","#22aa69","#aaaa51","#66332c","#e67390","#8b0777","#651037","#329232","#557486","#3b3e4c","#b77372","#16d690","#b91310","#f4358e","#9c5910","#a9c493","#2a773d","#668d5c","#bea463","#0c5952","#743471","#743450","#2986e3","#dc3914","#f88503","#109614","#990092","#0099c8","#dd4476","#66aa04","#b82e27","#316397","#994495","#22aa93","#aaaa14","#6633c1","#e67303","#8b0705","#651062","#329267","#5574a1","#3b3ea5"],k=3,A=52,I={"<=":"","<":"<",">=":"",">":">"};function D(e,t,n){var r=e.toLowerCase().trim(),o=t.toLowerCase().trim().replace(/.&/,"");return i.createElement("div",{style:{maxWidth:"300px"}},i.createElement("div",null,i.createElement("b",null,e)," ",!!n&&i.createElement("span",{className:f.a.titleMeta},"ID: ",n)),o!==r&&i.createElement("div",null,t))}function M(e,t){var n=o.a.filter(e,function(e){return e.gene!==t});return n.length===e.length&&n.push({gene:t,alterations:!1}),n}function j(e,t,n){var r;return n=(r=n)?">="===r?"":"<="===r?"":r:"",void 0===e?void 0===t?n:"".concat(n).concat(t.toLocaleString()):void 0===t?"".concat(n).concat(e.toLocaleString()):e!==t?"".concat(n).concat(e.toLocaleString(),"-").concat(t.toLocaleString()):"".concat(n).concat(e.toLocaleString())}function N(e){var t=function(e){return{mutRange:j(e.minY,e.maxY,void 0),fgaRange:e.maxX.toFixed(2)!==e.minX.toFixed(2)?"".concat(e.minX.toFixed(2),"-").concat(e.maxX.toFixed(2)):e.minX.toFixed(2)}}(e);return i.createElement("div",null,i.createElement("div",null,"Number of Samples: ",i.createElement("b",null,e.count.toLocaleString())),i.createElement("div",null,"Mutation Count: ",i.createElement("b",null,t.mutRange)),i.createElement("div",null,"Fraction Genome Altered: ",i.createElement("b",null,t.fgaRange)))}function R(e,t,n,r){var i,a=["Cancer Study","Patient ID","Sample ID","Mutation Count","CNA Fraction"];void 0!==n&&void 0!==t&&(a.push(n.displayName),void 0!==r&&(a.push("Color"),i=o.a.keyBy(r,"value")));var s=e.map(function(e){var o=["".concat(e.studyId),"".concat(e.patientId),"".concat(e.sampleId),"".concat(e.y),"".concat(e.x)];if(void 0!==n&&void 0!==t){var a=t[e.uniqueSampleKey];o.push(void 0!==a?"".concat(a):g.a.NA),void 0!==r&&void 0!==a&&o.push(void 0!==i[a]?i[a].color:g.a.NA)}return o});return[a].concat(s).map(function(e){return e.join("\t")}).join("\n")}function L(e){return e.clinicalAttributeId}function G(e,t){return e+"_"+t}var F,B=":";function V(e){return o.a.sortBy(e).join(B)}function z(e){return e.split(B)}function q(){return(new Date).toISOString().slice(0,10)}function U(e,t,n,r,i,a,s){var l=[];if(e){var u=new RegExp("".concat("Created on",".*"));l.push(e.replace(u,""))}else{var c=o.a.uniq(o.a.flatMap(t,function(e){return e.uniqueSampleKeys}));l.push("".concat(c.length," sample").concat(c.length>1?"s":""," from ").concat(t.length," ").concat(t.length>1?"studies:":"study:")),t.forEach(function(e){l.push("- ".concat(e.name," (").concat(e.uniqueSampleKeys.length," sample").concat(c.length>1?"s":"",")"))});var p=[];o.a.isEmpty(n)||(o.a.each(n.geneFilters||[],function(e){var t=r[V(e.molecularProfileIds)];p.push("- ".concat(t,":")),p=p.concat(e.geneQueries.map(function(e){return e.join(", ").trim()}).map(function(e){return"  - "+e}))}),o.a.isEmpty(n.genomicProfiles)||(p.push("- Genomic Profile Sample Counts:"),p=p.concat(n.genomicProfiles.map(function(e){return e.map(function(e){return i[e]}).join(", ").trim()}).map(function(e){return"  - "+e}))),o.a.isEmpty(n.caseLists)||(p.push("- Case List Sample Counts:"),p=p.concat(n.caseLists.map(function(e){return e.map(function(e){return a[e]}).join(", ").trim()}).map(function(e){return"  - "+e}))),o.a.each(n.clinicalDataFilters||[],function(e){var t=r[e.attributeId];p.push("- ".concat(t,": ").concat(ue(e.values)))}),o.a.each(n.genomicDataFilters||[],function(e){var t=G(e.hugoGeneSymbol,e.profileType),n=r[t];p.push("- ".concat(n,": ").concat(ue(e.values)))}),o.a.each(n.sampleIdentifiersSet||{},function(e,t){var n=r[t]||t;p.push("- ".concat(n,": ").concat(e.length," samples"))})),p.length>0&&(l.push(""),l.push("Filters:"),l=l.concat(p)),l.push("")}return l.push("".concat("Created on"," ")+q()+(s?" by "+s:"")),l.join("\n")}function H(e){var t=!(o.a.isEmpty(e)||o.a.isEmpty(e.clinicalDataFilters)&&o.a.isEmpty(e.geneFilters)&&o.a.isEmpty(e.genomicProfiles)&&o.a.isEmpty(e.genomicDataFilters)&&o.a.isEmpty(e.caseLists));return e.sampleIdentifiersSet?t||!o.a.isEmpty(e.sampleIdentifiersSet):t}function W(t,n){var r=t.cloneNode(!0),o=e(t).find(n.legendGroupSelector).get(0).getBoundingClientRect();n.selectorToHide&&e(r).find(n.selectorToHide).remove();var i=+e(t).height()+o.height,a=Math.max(e(t).width(),o.width);if(e(r).attr("height",i+5),e(r).attr("width",a),e(r).css({height:i+5,width:a}),n.centerLegend){var s=Math.abs(e(t).width()-o.width),l="translate(".concat(s/2,", 0)");e(t).width()>o.width?e(r).find(n.legendGroupSelector).attr("transform",l):n.chartGroupSelector&&e(r).find(n.chartGroupSelector).attr("transform",l)}return r}function K(e){return e.map(function(e){return{start:e.start,end:e.end,value:void 0===e.start&&void 0===e.end?e.specialValue:void 0}})}function $(e){return e.filter(function(e){return void 0!==e.start||void 0!==e.end})}function Q(e){return e.filter(function(e){return void 0===e.start&&void 0===e.end})}function Y(e){return e.filter(function(e){return void 0!==e.start&&void 0!==e.end})}function X(e){var t=e.map(function(e){return e.start});if(e.length>0){var n=e[e.length-1];n.start!==n.end&&t.push(n.end)}return t}function Z(e){return oe(e)&&void 0!==e[0].start&&0!==e[0].start&&!se(e[0].start)}function J(e){var t=Z(e)?2:1;return e.map(function(n,r){var o;return 0===r&&void 0===n.start?o=r:r===e.length-1&&void 0===n.end?(o=r,r-1>-1&&e[r-1].start!==e[r-1].end&&o++):o=n.start===n.end?r:r+.5,{x:o+t,y:n.count,dataBin:n}})}function ee(e,t){return e.map(function(e,n){return{x:t+n+1,y:e.count,dataBin:e}})}function te(e){return e.length>0&&void 0===e.find(function(e){return 0!==e&&-1<e&&e<1||0!==e&&ve(e)%.5!=0})}function ne(e,t,n){return H(e)||t>=2||1===n}function re(e){return e&&e.length>0&&void 0===e.find(function(e){return e.start!==e.end})}function oe(e){if(!e)return!1;var t=Y($(e)),n=X(t);return!re(t)&&te(n)}function ie(e){return 0!==e&&-.001<=e&&e<=.001}function ae(e){if(0===e.length)return[];var t,n=e[0],r=e[e.length-1],o=Y(e),i=X(o),a=!re(o)&&te(i);return void 0===n.start?i=[n.end].concat(b(i)):a&&0!==n.start&&(se(n.start)||(i=[le(n.start,F.LEADING)].concat(b(i)))),void 0===r.end?i.push(r.start):a&&0!==r.end&&(se(r.end)||i.push(le(r.end,F.TRAILING))),t=a?function(e){return e.map(function(e){var t;if(-10===e||-1===e||0===e||1===e||10===e)t="".concat(e);else{var n=ve(e);(t=Number.isInteger(n)?"10^".concat(n.toFixed(0)):n%.5==0?"":"".concat(e))&&e<0&&(t="-".concat(t))}return t})}(i):o.length>0&&ie(o[Math.floor(o.length/2)].end)?i.map(function(e){return e.toExponential(0)}):function(e){return e.map(function(e){return ie(e)?e.toExponential(0):pe(e)})}(i),void 0===n.start&&(t[0]="".concat(I[n.specialValue]||n.specialValue).concat(t[0])),void 0===r.end&&(t[t.length-1]="".concat(I[r.specialValue]||r.specialValue).concat(t[t.length-1])),t}function se(e){var t=!1;if(e){var n=Math.log10(Math.abs(e));Number.isInteger(n)&&(t=!0)}return t}function le(e,t){if(e){var n=Math.log10(Math.abs(e)),r=e*t>0?Math.floor(n):Math.ceil(n),o=Math.pow(10,r);return Math.sign(e)*o}return 1}function ue(e){var t=e.filter(function(e){return void 0===e.start&&void 0===e.end}).map(function(e){return e.value}),n=e.filter(function(e){return void 0!==e.start||void 0!==e.end}),r=n.length>0?n[0].start:void 0,o=n.length>0?n[n.length-1].end:void 0,i=[];return n.length>0&&(void 0===r&&void 0===o?i.push("All Numbers"):void 0===r?i.push(" ".concat(ce(o))):void 0===o?i.push("> ".concat(ce(r))):r===o?i.push("".concat(ce(r))):n[0].start===n[0].end?i.push("".concat(ce(r),"  x  ").concat(ce(o))):i.push("".concat(ce(r)," < x  ").concat(ce(o)))),t.length>0&&(i=i.concat(t)),i.length>0?i.join(", "):""}function ce(e){var t;return void 0!==e&&(t=ie(e)?e.toExponential(0):pe(e)),t}function pe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(!e)return"".concat(e);var n=Math.abs(e);if(Number.isInteger(n))return"".concat(e);var r=t;if(e<1&&e>-1){var o=Math.abs(Math.log10(n%1));r+=Number.isInteger(o)?Math.floor(o)-1:Math.floor(o)}return"".concat(Number(e.toFixed(r)))}function de(e){var t=[O.MUTATION_COUNT_CNA_FRACTION,O.MUTATION_COUNT,O.FRACTION_GENOME_ALTERED,O.GENOMIC_PROFILES_SAMPLE_COUNT];return o.a.includes(t,e)?C.GENOMIC:C.CLINICAL}function fe(e,t){return Math.floor((e-10-he(t))/2)}function he(e){return Math.floor(Object(c.L)(e,"Helvetica Neue","13px"))}function me(e){return e>0?e:0}function ye(e){return Math.ceil(e)}function ge(e){var t="";return e<0?g.a.NA:(t=0===e?"0":e<100&&e>=99.9?"99.9":e>=.1?e.toFixed(1).toString():"<0.1","".concat(t,"%"))}function ve(e){var t=Math.abs(e)<50?1:2;return Number(Math.log10(Math.abs(e)).toFixed(t))}function be(e){return m.b[e]||""}function Se(e){switch(e){case"HOMDEL":return p.d;case"AMP":return p.a;default:return}}function _e(e,t,n,r,i,a){var s=[],l={},u=[new Array(t).fill("")];if(e.sort(ze),r.length>0)if(i&&a){var c=r.find(function(e){return e.i===i.uniqueKey});if(!c)throw new Error("cannot find matching unique key in the grid layout");var p=function(e,t,n,r){var o=e.x,i=e.y,a=r.w,s=o,l=i;u={w:e.w,h:e.h},c=r,u.w+u.h>c.w+c.h?s=o+e.w-a:o+a>=n&&o-a>=0&&(s=n-a);var u,c;return{i:t.uniqueKey,x:s,y:l,w:r.w,h:r.h,isResizable:!1}}(c,i,t,a);s.push(p),l[i.uniqueKey]=!0,u=function(e,t){var n=[new Array(t).fill("")],r=e.x+e.w,o=e.y+e.h;for(;o>=n.length;)n.push(new Array(t).fill(""));for(var i=e.y;i<o;i++)for(var a=e.x;a<r;a++)n[i][a]=e.i;return n}(p,t)}else{var d=o.a.keyBy(r,function(e){return e.i});e.sort(function(e,t){var n=d[e.uniqueKey],r=d[t.uniqueKey];return n||r?r?n?n.y===r.y?n.x-r.x:n.y-r.y:1:-1:0})}return o.a.forEach(o.a.filter(e,function(e){return!l[e.uniqueKey]}),function(e){for(var r=n[e.uniqueKey]||{w:1,h:1},i=function(e,t){if(0===e.length)return{x:0,y:0};var n=void 0;return o.a.each(e,function(r,i){if(o.a.each(r,function(r,o){if(!r&&!function(e,t,n){var r=!1;if(0===e.length)return!1;if(n.w>1&&t.x%2!=0&&(r=!0),n.h>1&&t.y%2!=0&&(r=!0),!r)for(var o=t.x+n.w,i=t.y+n.h,a=t.y;a<i&&!(a>=e.length);a++){for(var s=t.x;s<o;s++)if(s>=e[0].length||e[a][s]){r=!0;break}if(r)break}return r}(e,{x:o,y:i},t))return n={x:o,y:i},!1}),n)return!1}),n||{x:0,y:e.length}}(u,r);i.y+r.h>=u.length;)u.push(new Array(t).fill(""));s.push({i:e.uniqueKey,x:i.x,y:i.y,w:r.w,h:r.h,isResizable:!1});for(var a=i.x+r.w,l=i.y+r.h,c=i.y;c<l;c++)for(var p=i.x;p<a;p++)u[c][p]=e.uniqueKey}),s}function we(e){return void 0===u.d.priority[e]?1:u.d.priority[e]}function Ee(e){var t=Number(e.priority);if(t===u.d.defaultPriority){var n=L(e);return void 0===u.d.priority[n]?u.d.defaultPriority:u.d.priority[n]}return t}function Oe(e,t){return u.d.layout.grid.w*e.w+(e.w-1)*u.d.layout.gridMargin.x-2*t}function Ce(e,t){return u.d.layout.grid.h*e.h+(e.h-1)*u.d.layout.gridMargin.y-t}function Pe(e,t){return Ce(e,t)-30}function xe(e){return 0===e?"0":e.toExponential(k)}function Te(e){e.sort(Fe);var t=Ie(e),n=o.a.sumBy(e,function(e){return e.count});return e.map(function(e){var r=e.count/n;return Object.assign(Object.assign({},e),{color:t[e.value],percentage:r,freq:ge(100*r)})})}function ke(e,t){return o.a.reduce(e,function(e,n,r){return e[r]=100*n/t,e},{})}function Ae(e,t,n){return o.a.map(e,function(e){return{label:e.displayName,key:e.uniqueKey,chartType:n[e.uniqueKey],disabled:!1,selected:t.includes(e.uniqueKey),freq:100}})}function Ie(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T,n=o.a.cloneDeep(t),r=function(e){return o.a.reduce(e,function(e,t){var n=De(t.value)?p.f:Object(p.y)(t.value);return n&&(e[t.value]=n),e},{})}(e);return n=o.a.difference(n,o.a.values(r)),Object.assign(Object.assign({},function(e,t){var n=0;return o.a.reduce(e,function(e,r){return De(r.value)||Object(p.y)(r.value)||(e[r.value]=t[n%t.length],n++),e},{})}(e,n)),r)}function De(e){return"na"===e.toLowerCase().trim()}function Me(e,t){return o.a.reduce(e,function(e,n){return(void 0===t||t(n))&&e.push({sampleId:n.sampleId,studyId:n.studyId}),e},[])}function je(e,t,n,r,i){var a={clinicalDataFilters:t.clinicalDataFilters,geneFilters:t.geneFilters},l=o.a.reduce(n,function(t,n,r){return e!==r&&(t=0===t.length?n:o.a.intersectionWith(t,n,o.a.isEqual)),t},[]);return l&&l.length>0?a.sampleIdentifiers=l:o.a.isEmpty(r)?a.studyIds=i:a.sampleIdentifiers=r,s.a.fetchFilteredSamplesUsingPOST({studyViewFilter:a})}function Ne(e,t,n,r,o,i,a){return t&&e&&!r?[a]:e||n?r?[]:[o]:[i]}function Re(e){return 0!==e.length&&!o.a.some(e,function(e){return isNaN(Number(e))})}function Le(e,t){return 0===e.length&&1===t.length}function Ge(e,t,n){var r=[],i=o.a.groupBy(e,function(e){return e.studyId});return o.a.each(t,function(e){var t=i[e.studyId];t&&t.length>0&&r.push(Object.assign(Object.assign({},e),{uniqueSampleKeys:o.a.map(t,function(e){return e.uniqueSampleKey})}))}),o.a.each(n,function(e){var t=[];if(e.data.studies.forEach(function(e){var n=i[e.id];n&&n.length>0&&(t=t.concat(n))}),t.length>0){var n={name:e.data.name,description:e.data.description,studyId:e.id};r.push(Object.assign(Object.assign({},n),{uniqueSampleKeys:o.a.map(t,function(e){return e.uniqueSampleKey})}))}}),r}function Fe(e,t){return De(e.value)?De(t.value)?0:1:De(t.value)?-1:t.count-e.count}function Be(e,t){return t.priority-e.priority||e.displayName.localeCompare(t.displayName)}function Ve(e,t){return Be({priority:Number(e.priority),displayName:e.displayName},{priority:Number(t.priority),displayName:t.displayName})}function ze(e,t){return Be({priority:e.priority,displayName:e.displayName},{priority:t.priority,displayName:t.displayName})}function qe(e,t,n){try{window.localStorage.setItem("legacyStudySubmission",JSON.stringify(t)),window.open(Object(a.b)(e),n)}catch(r){window.localStorage.clear();try{window.localStorage.setItem("legacyStudySubmission",JSON.stringify(t)),window.open(Object(a.b)(e),n)}catch(e){alert("Sorry, the query is too large to submit")}}}function Ue(e){return e.replace(/\\,/g,"$@$").split(",").map(function(e){return e.trim().replace(/\$@\$/g,",")})}function He(e){return e.length<=2?e.map(function(e){return e.name}).join(" and "):"".concat(e[0].name," and ").concat(e.length-1," other groups")}function We(e){return o.a.uniqWith(o.a.flattenDeep(e.map(function(e){return e.studies.map(function(e){var t=e.id;return e.patients.map(function(e){return{studyId:t,patientId:e}})})})),function(e,t){return e.patientId===t.patientId&&e.studyId===t.studyId})}function Ke(e,t,n,r,i,a,s){var l=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],c=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],p=!(arguments.length>9&&void 0!==arguments[9])||arguments[9],d=arguments.length>10?arguments[10]:void 0;d||(d=_e(e,t,n,[]));var f={};return e.forEach(function(e){var t=e.uniqueKey,n=r[t]||"NONE";f[e.uniqueKey]={id:e.uniqueKey,chartType:n,patientAttribute:e.patientAttribute},n===u.a.MUTATED_GENES_TABLE?f[e.uniqueKey].filterByCancerGenes=l:n===u.a.FUSION_GENES_TABLE?f[e.uniqueKey].filterByCancerGenes=c:n===u.a.CNA_GENES_TABLE&&(f[e.uniqueKey].filterByCancerGenes=p);var d=i[t];d&&(f[t].groups=d.groups,f[t].name=e.displayName);var h=a[t];h&&(f[t].name=h.name,f[t].description=h.description,f[t].hugoGeneSymbol=h.hugoGeneSymbol,f[t].profileType=h.profileType),s[t]&&(s[t].disableLogScale&&(f[t].disableLogScale=!0),o.a.isEmpty(s[t].customBins)||(f[t].customBins=s[t].customBins))}),d.forEach(function(e){e.i&&f[e.i]&&(f[e.i].layout={x:e.x,y:e.y,w:e.w,h:e.h})}),f}function $e(e){return Number.isInteger(e)?e.toFixed(0):e.toFixed(2)}function Qe(e){return void 0!==e.specialValue?void 0!==e.start?e.specialValue+$e(e.start):void 0!==e.end?e.specialValue+$e(e.end):e.specialValue:void 0!==e.start&&void 0!==e.end?"".concat($e(e.start),"-").concat($e(e.end)):""}function Ye(e,t,n,r,i){var a={};t&&(a=o.a.groupBy(e,function(e){return e.uniquePatientKey}));var s=function(e,t){var n=t.filter(function(e){return void 0===e.specialValue}),r=t.filter(function(e){return void 0!==e.specialValue});return o.a.reduce(e,function(e,t){var i;if(isNaN(t.value)||(i=o.a.find(n,function(e){return parseFloat(t.value)>e.start&&parseFloat(t.value)<=e.end})),void 0===i&&(i=o.a.find(r,function(e){if(!isNaN(t.value)){if(void 0!==e.end)return parseFloat(t.value)<=e.end;if(void 0!==e.start)return parseFloat(t.value)>e.start}return e.specialValue===t.value})),i){var a=Qe(i);void 0===e[a]&&(e[a]=[]),e[a].push(t)}return e},{})}(n,r),l=r.map(function(e){return Qe(e)}),u=Object(c.W)(l);return o.a.reduce(s,function(e,n,r){if(0!==n.length){var s=[];s=t?o.a.flatMapDeep(n,function(e){return a[e.uniquePatientKey].map(function(e){return{studyId:e.studyId,sampleId:e.sampleId}})}):n.map(function(e){return{studyId:e.studyId,sampleId:e.sampleId}}),e.push(Object(h.b)(r,s,i))}return e},[]).sort(function(e,t){return u[e.name]-u[t.name]})}function Xe(e,t,n,r){var i={};return t&&(i=o.a.groupBy(e,function(e){return e.uniquePatientKey})),n.map(function(e){var n=[];return n=t?o.a.flatMapDeep(e,function(e){return i[e.uniquePatientKey].map(function(e){return{studyId:e.studyId,sampleId:e.sampleId}})}):e.map(function(e){return{studyId:e.studyId,sampleId:e.sampleId}}),Object(h.b)("".concat($e(parseFloat(e[0].value)),"-").concat($e(parseFloat(e[e.length-1].value))),n,r)})}function Ze(e){return e+" "+String.fromCharCode(9662)}function Je(e){var t=e.filter(function(e){return void 0!==e.start||void 0!==e.end});return{start:t.length>0?t[0].start:void 0,end:t.length>0?t[t.length-1].end:void 0}}function et(e){return P(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,r,i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={},t.next=3,l.a.fetchClinicalDataUsingPOST({clinicalDataType:"SAMPLE",clinicalDataMultiStudyFilter:{identifiers:o.a.map(e,function(e){return{entityId:e.sampleId,studyId:e.studyId}})}});case 3:return r=t.sent,o.a.forEach(r,function(e){n[e.uniqueSampleKey]=Object.assign(Object.assign({},n[e.uniqueSampleKey]||{}),v({},e.clinicalAttributeId,e.value))}),t.next=7,l.a.fetchClinicalDataUsingPOST({clinicalDataType:S.PATIENT,clinicalDataMultiStudyFilter:{identifiers:o.a.map(e,function(e){return{entityId:e.patientId,studyId:e.studyId}})}});case 7:return i=t.sent,a=o.a.groupBy(e,function(e){return e.uniquePatientKey}),o.a.forEach(i,function(e){(a[e.uniquePatientKey]||[]).forEach(function(t){n[t.uniqueSampleKey]=Object.assign(Object.assign({},n[t.uniqueSampleKey]||{}),v({},e.clinicalAttributeId,e.value))})}),t.abrupt("return",n);case 11:case"end":return t.stop()}},t)}))}function tt(e){var t=/^CUSTOM_FILTERS_\d+/i,n=/^(?:PATIENT_|SAMPLE_)([a-zA-Z0-9_]+)/i,r=0,i=0,a=o.a.reduce(O,function(e,t){return e[t]=!0,e},{});return e.forEach(function(e){e.id.match(t)||void 0!==a[e.id]||(r++,e.id.match(n)&&i++)}),r===i?e.map(function(e){var t=e.id.match(n);return t?Object.assign(Object.assign({},e),{id:t[1]}):e}):e}function nt(e,t,n){return o.a.chain(e).filter(function(e){return!n||n(e)}).groupBy(function(e){return e.molecularProfileId.replace(e.studyId+"_","")}).map(function(e,n){var r=o.a.chain(e).flatMap(function(e){return t[e.molecularProfileId]||[]}).uniq().value();return{value:n,count:r.length,label:e[0].name,description:e[0].description,sampleUniqueKeys:r}}).filter(function(e){return e.count>0}).value()}function rt(e){return e.map(function(e){return{attributeId:G(e.hugoGeneSymbol,e.profileType),count:e.count,end:e.end,specialValue:e.specialValue,start:e.start}})}function ot(e,t,n){return P(this,void 0,void 0,regeneratorRuntime.mark(function r(){var i,a,s,u,c,p;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,l.a.getGeneUsingGET({geneId:e.hugoGeneSymbol});case 2:if(i=r.sent,a=t[e.profileType],!o.a.isEmpty(a)){r.next=6;break}return r.abrupt("return",[]);case 6:return s=o.a.keyBy(a,function(e){return e.studyId}),u=n.map(function(e){return{sampleId:e.sampleId,molecularProfileId:s[e.studyId].molecularProfileId}}),r.next=10,l.a.fetchMolecularDataInMultipleMolecularProfilesUsingPOST({projection:"DETAILED",molecularDataMultipleStudyFilter:{entrezGeneIds:[i.entrezGeneId],sampleMolecularIdentifiers:u}});case 10:return c=r.sent,p=new y.a,c.forEach(function(e){return p.set({sampleId:e.sampleId,molecularProfileId:e.molecularProfileId},e)}),r.abrupt("return",n.map(function(e){var t=s[e.studyId].molecularProfileId,n=p.get({sampleId:e.sampleId,molecularProfileId:t}),r={clinicalAttributeId:i.entrezGeneId+"-"+t,patientId:e.patientId,sampleId:e.sampleId,studyId:e.studyId,uniquePatientKey:e.uniquePatientKey,uniqueSampleKey:e.uniqueSampleKey};return r.value=n?"".concat(n.value):g.a.NA,r}));case 14:case"end":return r.stop()}},r)}))}function it(e){return e[E.cna]||e[E.gistic]||e[E.rae]||e[E.cna_consensus]||0}function at(e,t){var n=o.a.keyBy(e,function(e){return e.uniqueSampleKey});return o.a.reduce(t,function(e,t){return void 0!==n[t.uniqueSampleKey]&&(void 0===e[t.molecularProfileId]&&(e[t.molecularProfileId]=[]),e[t.molecularProfileId].push(t.uniqueSampleKey)),e},{})}!function(e){e[e.LEADING=1]="LEADING",e[e.TRAILING=-1]="TRAILING"}(F||(F={}))}).call(this,n(11))},function(e,t,n){"use strict";(function(e){n.d(t,"c",function(){return k}),n.d(t,"a",function(){return A});var r=n(703),o=n(0),i=n(2),a=n(7),s=(n(716),n(603)),l=n(681),u=n(718),c=n(3),p=n(700),d=n(706),f=n(56),h=n(785),m=n.n(h),y=n(595),g=n(721),v=n(669);function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t,n){return t&&O(e.prototype,t),n&&O(e,n),e}function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var x=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":P(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};function T(e,t,n){var r=0;return e!==t&&(null===e?r=1:null===t?r=-1:"number"==typeof e?r=e<t?n?-1:1:n?1:-1:"string"==typeof e&&(r=(n?1:-1)*e.localeCompare(t))),r}function k(e,t){for(var n,r,o,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=[],s=0;s<e.length;s++){var l=e[s];a.push({data:l,initialPosition:s,sortBy:[].concat(t(l))})}return a.sort(function(e,t){return 0===(n=function(e,t,n){for(var r=0,o=Math.min(e.length,t.length),i=0;i<o&&0===(r=T(e[i],t[i],n));i++);return 0===r&&(e.length<t.length?r=n?-1:1:e.length>t.length&&(r=n?1:-1)),r}(e.sortBy,t.sortBy,i))&&(r=e.initialPosition,o=t.initialPosition,n=r<o?-1:1),n}),a.map(function(e){return e.data})}var A=function(){function t(e){var n=this;E(this,t),this.sortColumn=e.initialSortColumn||"",this.sortAscending="desc"!==e.initialSortDirection,this.setProps(e),Object(i.reaction)(function(){return n.displayData.length},function(){n.page=n.clampPage(n.page)})}return C(t,[{key:"clampPage",value:function(e){return e=Math.max(e,0),e=Math.min(e,this.maxPage)}},{key:"getNextSortAscending",value:function(e){return this.sortColumn===e.name?!this.sortAscending:"asc"===(e.defaultSortDirection||"asc")}},{key:"defaultHeaderClick",value:function(e){this.sortAscending=this.getNextSortAscending(e),this.dataStore.sortAscending=this.sortAscending,this.sortColumn=e.name,this.dataStore.sortMetric=this.sortMetric,this.page=0}},{key:"pageToRowIndex",value:function(e){this.page=Math.floor(e/this.itemsPerPage)}},{key:"setFilterString",value:function(e){var t=this;this.filterString=e,this.dataStore.filterString=e,this.page=0,this.dataStore.setFilter(function(e,n,r,o){if(!n)return!0;var i=!1,a=!0,s=!1,l=void 0;try{for(var u,c=t.visibleColumns[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var p=u.value;if(i=p.filter&&p.filter(e,n,r,o)||!1)break}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}return i})}},{key:"setProps",value:function(e){this.columns=e.columns,this._itemsLabel=e.itemsLabel,this._itemsLabelPlural=e.itemsLabelPlural,this._columnVisibility=e.columnVisibility,this.downloadDataFetcher=e.downloadDataFetcher,this.onRowClick=e.onRowClick,this.onRowMouseEnter=e.onRowMouseEnter,this.onRowMouseLeave=e.onRowMouseLeave,e.dataStore?this.dataStore=e.dataStore:this.dataStore=new y.b(e.data||[]),void 0===this.dataStore.page&&(this.dataStore.page=0),void 0===this.itemsPerPage&&(this.itemsPerPage=e.initialItemsPerPage||50),void 0===this.dataStore.sortAscending?this.dataStore.sortAscending=this.sortAscending:this.sortAscending=this.dataStore.sortAscending,void 0===this.dataStore.sortMetric&&(this.dataStore.sortMetric=this.sortMetric),!e.dataStore&&this.filterString&&this.setFilterString(this.filterString)}},{key:"updateColumnVisibility",value:function(e,t){void 0===this._columnVisibilityOverride&&(this._columnVisibilityOverride=Object(c.T)(this.columnVisibilityByColumnDefinition,this._columnVisibility)),void 0!==this._columnVisibilityOverride[e]&&(this._columnVisibilityOverride[e]=t)}},{key:"isVisible",value:function(e){return this.columnVisibility[e.name]||!1}},{key:"itemsPerPage",get:function(){return this.dataStore.itemsPerPage},set:function(e){this.dataStore.itemsPerPage=e,this.page=this.page}},{key:"firstHighlightedRowIndex",get:function(){for(var e=-1,t=0;t<this.displayData.length;t++)if(this.dataStore.isHighlighted(this.displayData[t])){e=t;break}return e}},{key:"displayData",get:function(){return this.dataStore.tableData}},{key:"showingAllRows",get:function(){return this.displayData.length<=this.itemsPerPage||-1===this.itemsPerPage}},{key:"page",get:function(){return this.dataStore.page},set:function(e){this.dataStore.page=this.clampPage(e)}},{key:"maxPage",get:function(){return Object(g.a)(this.displayData.length,this.itemsPerPage)}},{key:"columnVisibility",get:function(){return Object(c.T)(this.columnVisibilityByColumnDefinition,this._columnVisibility,this._columnVisibilityOverride)}},{key:"columnVisibilityByColumnDefinition",get:function(){return Object(c.U)(this.columns)}},{key:"downloadData",get:function(){var e=this,t=[];return t[0]=[],this.columns.forEach(function(e){t[0].push(e.headerDownload?e.headerDownload(e.name):e.name)}),this.dataStore.sortedData.forEach(function(n){var r,o,i,a=function(e,t){var n={data:[],maxColLength:1};return e.forEach(function(e){if(e.download){var r=e.download(t);r instanceof Array?(n.data.push(r),r.length>n.maxColLength&&(n.maxColLength=r.length)):n.data.push(r)}else n.data.push("")}),n}(e.columns,n),s=(r=a.data,o=a.maxColLength,i=[],r.forEach(function(e){if(e instanceof Array){if(o!=e.length)throw new Error("Not all the arrays returned from the download functions are from the same length.");i.push(e)}else{for(var t=[],n=0;n<o;n++)t=t.concat(e);i.push(t)}}),i);s[0].map(function(e,t){return s.map(function(e){return e[t]})}).forEach(function(e){t.push(e)})}),t}},{key:"sortColumnObject",get:function(){var e=this;return this.columns.find(function(t){return e.isVisible(t)&&t.name===e.sortColumn})}},{key:"visibleData",get:function(){return this.dataStore.visibleData}},{key:"sortMetric",get:function(){var e=this.sortColumnObject;return e&&e.sortBy?e.sortBy:function(){return 0}}},{key:"headers",get:function(){var t=this;return this.visibleColumns.map(function(n,r){var i,a,s={};n.sortBy&&(s.role="button",s.onClick=function(r){var o=r.target,i=e(o).closest(".multilineHeader");i&&i.length>0&&t.defaultHeaderClick(n)}),t.sortColumn===n.name&&(s.className=t.sortAscending?"multilineHeader sort-asc":"multilineHeader sort-des"),i=n.headerRender?n.headerRender(n.name):o.createElement("span",null,n.name),a=n.tooltip?o.createElement(c.c,{placement:"top",overlay:n.tooltip},i):i;var l={};return n.align&&(l.textAlign=n.align),n.width&&(l.width=n.width),o.createElement(o.Fragment,{key:r},o.createElement("th",w({className:"multilineHeader"},s,{style:l}),a),n.resizable&&o.createElement(m.a,{className:"multilineHeader columnResizer",minWidth:0}))})}},{key:"visibleColumns",get:function(){var e=this;return this.columns.filter(function(t){return e.isVisible(t)})}},{key:"colVisProp",get:function(){var e=this,t=[];return this.columns.forEach(function(n){t.push({id:n.name,name:n.name,visible:e.columnVisibility[n.name],togglable:!n.hasOwnProperty("togglable")||n.togglable})}),t}},{key:"paginationStatusText",get:function(){var e,t;0===this.rows.length?(e=0,t=0):(e=this.itemsPerPage===s.b?1:this.page*this.itemsPerPage+1,t=this.itemsPerPage===s.b?this.rows.length:e+this.rows.length-1);var n=this.itemsLabel;return n.length&&(n=" ".concat(n)),"Showing ".concat(e,"-").concat(t," of ").concat(this.displayData.length).concat(n)}},{key:"tds",get:function(){var e=this;return this.visibleData.map(function(t){return e.visibleColumns.map(function(e){var n=o.createElement("td",{key:e.name},e.render(t));return e.resizable?o.createElement(o.Fragment,null,n,o.createElement(m.a,{className:"columnResizer",minWidth:0})):n})})}},{key:"rows",get:function(){for(var e=this,t=[],n=function(n){var r={},i=[];if(e.dataStore.isHighlighted(e.visibleData[n])&&i.push("highlighted"),e.onRowClick){i.push("clickable");var a=e.onRowClick;r.onClick=function(){a(e.visibleData[n])}}if(e.onRowMouseEnter){var s=e.onRowMouseEnter;r.onMouseEnter=function(){s(e.visibleData[n])}}if(e.onRowMouseLeave){var l=e.onRowMouseLeave;r.onMouseLeave=function(){l(e.visibleData[n])}}i.length&&(r.className=i.join(" ")),t.push(o.createElement("tr",w({key:n},r),e.tds[n]))},r=0;r<this.visibleData.length;r++)n(r);return t}},{key:"itemsLabel",get:function(){return this._itemsLabel?this._itemsLabelPlural&&1!==this.displayData.length?this._itemsLabelPlural:this._itemsLabel:""}}]),t}();x([i.observable],A.prototype,"_itemsLabel",void 0),x([i.observable],A.prototype,"_itemsLabelPlural",void 0),x([i.observable],A.prototype,"sortColumn",void 0),x([i.observable],A.prototype,"sortAscending",void 0),x([i.observable.ref],A.prototype,"columns",void 0),x([i.observable],A.prototype,"dataStore",void 0),x([i.observable],A.prototype,"downloadDataFetcher",void 0),x([i.observable],A.prototype,"onRowClick",void 0),x([i.observable],A.prototype,"onRowMouseEnter",void 0),x([i.observable],A.prototype,"onRowMouseLeave",void 0),x([i.observable],A.prototype,"_columnVisibility",void 0),x([i.observable],A.prototype,"_columnVisibilityOverride",void 0),x([i.computed],A.prototype,"itemsPerPage",null),x([i.computed],A.prototype,"firstHighlightedRowIndex",null),x([i.computed],A.prototype,"displayData",null),x([i.computed],A.prototype,"showingAllRows",null),x([i.computed],A.prototype,"page",null),x([i.computed],A.prototype,"maxPage",null),x([i.computed],A.prototype,"columnVisibility",null),x([i.computed],A.prototype,"columnVisibilityByColumnDefinition",null),x([i.computed],A.prototype,"downloadData",null),x([i.computed],A.prototype,"sortColumnObject",null),x([i.computed],A.prototype,"visibleData",null),x([i.computed],A.prototype,"sortMetric",null),x([i.action],A.prototype,"defaultHeaderClick",null),x([i.computed],A.prototype,"headers",null),x([i.computed],A.prototype,"visibleColumns",null),x([i.computed],A.prototype,"colVisProp",null),x([i.computed],A.prototype,"paginationStatusText",null),x([i.computed],A.prototype,"tds",null),x([i.computed],A.prototype,"rows",null),x([i.action],A.prototype,"pageToRowIndex",null),x([i.action],A.prototype,"setFilterString",null),x([i.computed],A.prototype,"itemsLabel",null),x([i.action],A.prototype,"setProps",null),x([i.action],A.prototype,"updateColumnVisibility",null);var I=function(e){function t(e){var n,r,o;return E(this,t),r=this,o=b(t).call(this,e),(n=!o||"object"!==P(o)&&"function"!=typeof o?S(r):o).store=new A(e),n.handlers={onFilterTextChange:Object(v.a)(function(e){n.store.setFilterString(e)},400),visibilityToggle:function(e){n.updateColumnVisibility(e,!n.store.columnVisibility[e])},changeItemsPerPage:function(e){n.store.itemsPerPage=e},incPage:function(){n.store.page+=1},decPage:function(){n.store.page-=1},filterInputRef:function(e){n.filterInput=e}},n.getDownloadData=n.getDownloadData.bind(S(n)),n.getDownloadDataPromise=n.getDownloadDataPromise.bind(S(n)),n.getTopToolbar=n.getTopToolbar.bind(S(n)),n.getBottomToolbar=n.getBottomToolbar.bind(S(n)),n.getTable=n.getTable.bind(S(n)),n.getPaginationControls=n.getPaginationControls.bind(S(n)),n.filterInputReaction=Object(i.reaction)(function(){return n.store.dataStore.filterString},function(e){n.filterInput&&(n.filterInput.value=e)}),n.pageToHighlightReaction=Object(i.reaction)(function(){return n.store.firstHighlightedRowIndex},function(e){n.props.pageToHighlight&&n.store.pageToRowIndex(n.store.firstHighlightedRowIndex)}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,o["Component"]),C(t,[{key:"getDownloadData",value:function(){return Object(d.a)(this.store.downloadData)}},{key:"getDownloadDataPromise",value:function(){var e=this;return new Promise(function(t){e.store.downloadDataFetcher?e.store.downloadDataFetcher.fetchAndCacheAllLazyData().then(function(n){t({status:"complete",text:e.getDownloadData()})}).catch(function(){t({status:"incomplete",text:e.getDownloadData()})}):t({status:"complete",text:e.getDownloadData()})})}},{key:"updateColumnVisibility",value:function(e,t){void 0!==this.store.columnVisibility[e]&&this.store.updateColumnVisibility(e,t)}},{key:"componentWillUnmount",value:function(){this.filterInputReaction(),this.pageToHighlightReaction()}},{key:"componentWillReceiveProps",value:function(e){this.store.setProps(e)}},{key:"getPaginationControls",value:function(){var e={className:"text-center topPagination",itemsPerPage:this.store.itemsPerPage,totalItems:this.store.displayData.length,currentPage:this.store.page,onChangeItemsPerPage:this.handlers.changeItemsPerPage,showItemsPerPageSelector:!1,onPreviousPageClick:this.handlers.decPage,onNextPageClick:this.handlers.incPage,previousPageDisabled:0===this.store.page,nextPageDisabled:this.store.page===this.store.maxPage,textBeforeButtons:this.store.paginationStatusText,groupButtons:!1,bsStyle:"primary"};return this.props.paginationProps&&(!1===this.props.paginationProps.showMoreButton&&(delete e.textBeforeButtons,e.textBetweenButtons=this.store.paginationStatusText),e=Object.assign(e,this.props.paginationProps)),o.createElement(s.a,e)}},{key:"getTopToolbar",value:function(){return o.createElement("div",null,this.props.showCountHeader&&this.countHeader,o.createElement(f.ButtonToolbar,{style:{marginLeft:0},className:"tableMainToolbar"},this.props.showFilter?o.createElement("div",{className:"pull-right form-group has-feedback input-group-sm tableFilter",style:{display:"inline-block",marginLeft:5}},o.createElement("input",{ref:this.handlers.filterInputRef,placeholder:this.props.filterPlaceholder||"",type:"text",onInput:this.handlers.onFilterTextChange,className:"form-control tableSearchInput",style:{width:200}}),o.createElement("span",{className:"fa fa-search form-control-feedback","aria-hidden":"true",style:{zIndex:0}})):"",this.props.showColumnVisibility?o.createElement(l.a,w({className:"pull-right",columnVisibility:this.store.colVisProp,onColumnToggled:this.handlers.visibilityToggle},this.props.columnVisibilityProps)):"",this.props.showCopyDownload?this.props.downloadDataFetcher?o.createElement(u.a,w({className:"pull-right",downloadData:this.getDownloadDataPromise,downloadFilename:"table.tsv"},this.props.copyDownloadProps)):o.createElement(p.a,w({className:"pull-right",downloadData:this.getDownloadData,downloadFilename:"table.tsv",controlsStyle:"BUTTON"},this.props.copyDownloadProps)):"",this.props.showPagination&&this.props.showPaginationAtTop?o.createElement(a.Observer,null,this.getPaginationControls):null))}},{key:"getBottomToolbar",value:function(){return o.createElement(f.ButtonToolbar,{style:{marginLeft:0,float:"none"},className:"tableMainToolbar center"},this.props.showPagination&&o.createElement(a.Observer,null,this.getPaginationControls))}},{key:"getTable",value:function(){return o.createElement("div",{style:{overflowX:this.props.enableHorizontalScroll?"auto":"visible"}},o.createElement(r.a,{headers:this.store.headers,rows:this.store.rows,className:this.props.className}))}},{key:"render",value:function(){return o.createElement("div",{className:"lazy-mobx-table","data-test":"LazyMobXTable"},o.createElement(a.Observer,null,this.getTopToolbar),o.createElement(a.Observer,null,this.getTable),!this.props.showPaginationAtTop&&o.createElement(a.Observer,null,this.getBottomToolbar))}},{key:"dataStore",get:function(){return this.store.dataStore}},{key:"countHeader",get:function(){return o.createElement("span",{"data-test":"LazyMobXTable_CountHeader",style:{float:"left",color:"black",fontSize:"16px",fontWeight:"bold"}},this.store.displayData.length," ",this.store.itemsLabel," (page"," ",this.store.page+1," of ",this.store.maxPage+1,")")}}]),t}();I.defaultProps={showFilter:!0,showCopyDownload:!0,showPagination:!0,showColumnVisibility:!0,showPaginationAtTop:!1,showCountHeader:!1},x([i.action],I.prototype,"componentWillReceiveProps",null),I=x([a.observer],I),t.b=I}).call(this,n(11))},function(e,t,n){"use strict";n.d(t,"c",function(){return a}),n.d(t,"a",function(){return l}),n.d(t,"b",function(){return u}),n.d(t,"e",function(){return c});var r=n(4),o=["#F4511E","#FFF59D","#DCE775","#8BC34A","#00796B","#006064"],i={fontFamily:"Arial, Helvetica",width:350,height:350,padding:50},a={fontFamily:"Arial, Helvetica",fontSize:13,letterSpacing:"normal",padding:8,stroke:"transparent",strokeWidth:0},s=Object(r.assign)({textAnchor:"middle"},a),l=Object(r.assign)({},a,{fontSize:13,padding:8}),u=Object(r.assign)({},a,{fill:"black",padding:2}),c=Object(r.assign)({},a),p={area:Object(r.assign)({style:{data:{fill:"#212121"},labels:s}},i),axis:Object(r.assign)({style:{axis:{fill:"transparent",stroke:"black",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round"},axisLabel:Object(r.assign)({},s,l),grid:{fill:"none",stroke:"#ECEFF1",strokeOpacity:function(e){return 0===e?0:1},strokeDasharray:"10, 5",strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"visible"},ticks:{fill:"transparent",size:4,stroke:"black",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round"},tickLabels:u}},i),bar:Object(r.assign)({style:{data:{fill:"#455A64",padding:8,strokeWidth:0},labels:a}},i),boxplot:Object(r.assign)({style:{max:{padding:8,stroke:"#455A64",strokeWidth:1},maxLabels:a,median:{padding:8,stroke:"#455A64",strokeWidth:1},medianLabels:a,min:{padding:8,stroke:"#455A64",strokeWidth:1},minLabels:a,q1:{padding:8,fill:"#455A64"},q1Labels:a,q3:{padding:8,fill:"#455A64"},q3Labels:a},boxWidth:20},i),candlestick:Object(r.assign)({style:{data:{stroke:"#455A64"},labels:s},candleColors:{positive:"#ffffff",negative:"#455A64"}},i),chart:i,errorbar:Object(r.assign)({borderWidth:8,style:{data:{fill:"transparent",opacity:1,stroke:"#455A64",strokeWidth:2},labels:s}},i),group:Object(r.assign)({colorScale:o},i),line:Object(r.assign)({style:{data:{fill:"transparent",opacity:1,stroke:"#455A64",strokeWidth:2},labels:s}},i),pie:Object(r.assign)({colorScale:o,style:{data:{padding:8,stroke:"#ECEFF1",strokeWidth:1},labels:Object(r.assign)({},a,{padding:20})}},i),scatter:Object(r.assign)({style:{data:{fill:"#455A64",opacity:1,stroke:"transparent",strokeWidth:0},labels:s}},i),stack:Object(r.assign)({colorScale:o},i),tooltip:{style:Object(r.assign)({},s,{padding:5,pointerEvents:"none"}),flyoutStyle:{stroke:"#212121",strokeWidth:1,fill:"#f0f0f0",pointerEvents:"none"},cornerRadius:5,pointerLength:10},voronoi:Object(r.assign)({style:{data:{fill:"transparent",stroke:"transparent",strokeWidth:0},labels:Object(r.assign)({},s,{padding:5,pointerEvents:"none"}),flyout:{stroke:"#212121",strokeWidth:1,fill:"#f0f0f0",pointerEvents:"none"}}},i),legend:{colorScale:o,gutter:10,orientation:"vertical",titleOrientation:"top",style:{data:{type:"circle",size:3,strokeWidth:1,stroke:"black"},labels:c,title:Object(r.assign)({},a,{padding:5})}}};t.d=p},function(e,t,n){"use strict";var r=n(4),o=n.n(r),i=n(0),a=n(621),s=n(589);function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.map=new s.a}var t,n,r;return t=e,(n=[{key:"increment",value:function(e){this.map.set(e,(this.map.get(e)||0)+1)}},{key:"get",value:function(e){return this.map.get(e)||0}},{key:"clear",value:function(){this.map.clear()}},{key:"entries",value:function(){return this.map.entries()}}])&&l(t.prototype,n),r&&l(t,r),e}(),c=n(657),p=n(579),d=n(639),f=n(101),h=n(590),m=n(3),y=n(574);function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function v(e){var t=o.a.partition(e,function(e){return"na"===e.name.toLowerCase()});return o.a.sortBy(t[1],function(e){return e.name.toLowerCase()}).concat(t[0])}n.d(t,"l",function(){return v}),n.d(t,"c",function(){return b}),n.d(t,"t",function(){return _}),n.d(t,"j",function(){return w}),n.d(t,"i",function(){return E}),n.d(t,"v",function(){return O}),n.d(t,"B",function(){return x}),n.d(t,"x",function(){return T}),n.d(t,"w",function(){return k}),n.d(t,"s",function(){return A}),n.d(t,"r",function(){return I}),n.d(t,"o",function(){return D}),n.d(t,"d",function(){return j}),n.d(t,"g",function(){return N}),n.d(t,"h",function(){return R}),n.d(t,"b",function(){return L}),n.d(t,"f",function(){return G}),n.d(t,"a",function(){return F}),n.d(t,"p",function(){return B}),n.d(t,"y",function(){return V}),n.d(t,"e",function(){return z}),n.d(t,"D",function(){return q}),n.d(t,"A",function(){return U}),n.d(t,"n",function(){return H}),n.d(t,"F",function(){return W}),n.d(t,"z",function(){return K}),n.d(t,"m",function(){return $}),n.d(t,"E",function(){return Q}),n.d(t,"k",function(){return Y}),n.d(t,"C",function(){return X}),n.d(t,"u",function(){return Z}),n.d(t,"q",function(){return J});var b=20,S="-ABCDEFGHIJKLMNOPQRSTUVWXYZ";function _(e,t){if(e<=0)return[];for(var n,r,i=[[1]],a=1;a<e;a++){n=i[a-1],(r=o.a.clone(n))[r.length-1]+=1;for(var s=r.length-1;s>=0;s--)r[s]>t&&(r[s]-=t,s>0?r[s-1]+=1:r.unshift(1));i.push(r)}return i.map(function(e){return e.map(function(e){return S[e]}).join("")})}function w(e,t){var n="";if((Array.isArray(e)||e.isComplete)&&(Array.isArray(t)||t.isComplete)){var r=Array.isArray(e)?e:e.result,o=Array.isArray(t)?t:t.result;if(r.length===o.length)n="(".concat(r.length,")");else{var i=1!==r.length,a=1!==o.length;n="(".concat(r.length," sample").concat(i?"s":"","/").concat(o.length," patient").concat(a?"s":"",")")}}return n}function E(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:" ";if(e===t){var o=1!==e;return"".concat(e).concat(r,"sample").concat(o?"s":"").concat(n,"patient").concat(o?"s":"")}var i=1!==e,a=1!==t;return"".concat(e).concat(r,"sample").concat(i?"s":"").concat(n).concat(t).concat(r,"patient").concat(a?"s":"")}function O(e,t){var n={},r=!0,i=!1,a=void 0;try{for(var s,l=e[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value,c=t.get({studyId:u.studyId,sampleId:u.sampleId});!c||c.uniquePatientKey in n||(n[c.uniquePatientKey]={patientId:c.patientId,studyId:c.studyId})}}catch(e){i=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw a}}return o.a.values(n)}function C(e){var t=new u,n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value,l=!0,c=!1,p=void 0;try{for(var d,f=s.studies[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var h=d.value,m=h.id,y=!0,g=!1,v=void 0;try{for(var b,S=h.samples[Symbol.iterator]();!(y=(b=S.next()).done);y=!0){var _=b.value;t.increment({studyId:m,sampleId:_})}}catch(e){g=!0,v=e}finally{try{y||null==S.return||S.return()}finally{if(g)throw v}}}}catch(e){c=!0,p=e}finally{try{l||null==f.return||f.return()}finally{if(c)throw p}}}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}var w=[],E=!0,O=!1,C=void 0;try{for(var P,x=t.entries()[Symbol.iterator]();!(E=(P=x.next()).done);E=!0){var T=P.value;T.value>1&&w.push(T.key)}}catch(e){O=!0,C=e}finally{try{E||null==x.return||x.return()}finally{if(O)throw C}}return w}function P(e){var t=new u,n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value,l=!0,c=!1,p=void 0;try{for(var d,f=s.studies[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var h=d.value,m=h.id,y=!0,g=!1,v=void 0;try{for(var b,S=h.patients[Symbol.iterator]();!(y=(b=S.next()).done);y=!0){var _=b.value;t.increment({studyId:m,patientId:_})}}catch(e){g=!0,v=e}finally{try{y||null==S.return||S.return()}finally{if(g)throw v}}}}catch(e){c=!0,p=e}finally{try{l||null==f.return||f.return()}finally{if(c)throw p}}}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}var w=[],E=!0,O=!1,C=void 0;try{for(var P,x=t.entries()[Symbol.iterator]();!(E=(P=x.next()).done);E=!0){var T=P.value;T.value>1&&w.push(T.key)}}catch(e){O=!0,C=e}finally{try{E||null==x.return||x.return()}finally{if(O)throw C}}return w}function x(e){return!o.a.some(e.studies,function(e){return e.samples.length>0||e.patients.length>0})}function T(e){return o.a.uniq(o.a.flattenDeep(e.map(function(e){return e.studies.map(function(e){return e.id})})))}function k(e){return o.a.uniqWith(o.a.flattenDeep(e.map(function(e){return e.studies.map(function(e){var t=e.id;return e.samples.map(function(e){return{studyId:t,sampleId:e}})})})),function(e,t){return e.sampleId===t.sampleId&&e.studyId===t.studyId})}function A(e,t){return o.a.sum(e.studies.map(function(e){if(t){var n=e.id,r=0,o=!0,i=!1,a=void 0;try{for(var s,l=e.samples[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var u=s.value;t(n,u)&&(r+=1)}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}return r}return e.samples.length}))}function I(e){return o.a.sum(e.studies.map(function(e){return e.patients.length}))}function D(e,t){var n=[],r=[],i=!0,a=!1,s=void 0;try{for(var l,u=e.studies[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value,p=c.id,d=[],f=[],h=!0,m=!1,y=void 0;try{for(var g,v=c.samples[Symbol.iterator]();!(h=(g=v.next()).done);h=!0){var b=g.value,S=t.get({studyId:p,sampleId:b});S?(d.push(b),f.push(S.patientId)):n.push({studyId:p,sampleId:b})}}catch(e){m=!0,y=e}finally{try{h||null==v.return||v.return()}finally{if(m)throw y}}f=o.a.uniq(f),(d.length>0||f.length>0)&&r.push({id:p,samples:d,patients:f})}}catch(e){a=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw s}}return{nonExistentSamples:n,studies:r}}function M(e,t){var n=t.overlappingSamplesSet,r=t.overlappingPatientsSet;return e.map(function(e){var t=[],o=!0,i=!1,a=void 0;try{for(var s,l=function(){var e=s.value,o=e.id,i=e.samples.filter(function(e){return!n.has({studyId:o,sampleId:e})}),a=e.patients.filter(function(e){return!r.has({studyId:o,patientId:e})});(i.length>0||a.length>0)&&t.push({id:o,samples:i,patients:a})},u=e.studies[Symbol.iterator]();!(o=(s=u.next()).done);o=!0)l()}catch(e){i=!0,a=e}finally{try{o||null==u.return||u.return()}finally{if(i)throw a}}return Object.assign({},e,{studies:t})})}function j(e,t,n,r,o,a){return Object(p.a)({await:function(){var n=e(),r=[n._activeGroupsNotOverlapRemoved,n.activeGroups,n.activeStudyIds];return n.activeGroups.isComplete&&2!==n.activeGroups.result.length||n.activeStudyIds.isComplete&&n.activeStudyIds.result.length>1||r.push(t()),r},render:function(){var s=e(),l=s.activeGroups.result.length;if(!r&&2!==l||r&&l<2)return i.createElement("span",null,function(e,t,n){if(t<2)return"Please select more groups - we need ".concat(n?"at least":"exactly"," 2 selected groups to show enrichments.");if(e<2)return"Due to excluded overlapping cases, there are less than 2 selected nonempty groups - we need exactly 2 nonempty selected groups to show enrichments.";if(e>2)return"Please deselect groups - we need exactly 2 selected groups to show enrichments."}(s.activeGroups.result.length,s._activeGroupsNotOverlapRemoved.result.length,r));if(s.activeStudyIds.result.length>1&&!a)return i.createElement("span",null,"The selected comparison groups span more than one study, so we can't show ".concat(n," enrichments. Please change your selection in the Groups section so that all samples only come from one study."));var u=[];return u.push(i.createElement(d.a,{store:s,only:o&&s.usePatientLevelEnrichments?"patient":"sample"})),u.push(t().component),u},renderPending:function(){return i.createElement(f.a,{center:!0,isLoading:!0,size:"big"})},renderError:function(){return i.createElement(h.a,null)}})}var N="We need at least 1 group to show survival. Please select more groups from the Groups section above.",R="We can't show survival for more than 10 groups. Please deselect groups in the Groups section.",L="Another group already has this name.",G="We need at least 2 groups to show overlap. Please select more groups from the Groups section above.";function F(e){return e>=2?"Due to excluded overlapping cases, there are less than 2 selected nonempty groups - we need at least 2.":"We need at least 2 groups to show clinical data enrichments. Please select more groups from the Groups section above."}function B(e,t,n){var r=o.a.chain(e.clinicalDataFilters||[]).filter(function(e){return n[e.attributeId]===y.c.STRING}).sortBy(function(e){return e.attributeId}).map(function(e){return o.a.flatMap(e.values,function(e){return e.value}).join("+")}).value(),i=o()(t).keys().sortBy().map(function(e){return t[e].join("+")}).value(),a=o.a.chain(e.geneFilters||[]).flatMapDeep(function(e){return e.geneQueries}).value(),s=o.a.chain(e.caseLists||[]).flatMapDeep(function(e){return e}).value(),l=o.a.flatMapDeep(e.genomicProfiles||[]);return a.concat(r).concat(i).concat(l).concat(s).join(", ")}function V(e){var t=e.match(/comparison\/([^\/]+)/);return t?t[1]:void 0}function z(e){return i.createElement("div",{style:{width:380}},i.createElement("div",{style:{marginBottom:7}},"The following samples cannot be found in our database. They might have been removed or changed since this group was created:"," "),i.createElement("div",{style:{maxHeight:200,overflowY:"scroll"}},e.samples.map(function(e){return i.createElement("div",null,"".concat(e.studyId,":").concat(e.sampleId))})))}function q(e,t){for(var n=(e=o.a.chain(e).filter(function(e){return!isNaN(e.value)}).sortBy(function(e){return parseFloat(e.value)}).value()).length/t,r=[],i=0;i<t;i++){var a=e.slice(n*i,n*(i+1));a.length>0&&r.push(a)}return r}function U(e,t){var n=o.a.keyBy(e,function(e){return e.id}),r=o.a.keyBy(t,function(e){return e.id}),i=o.a.mapValues(n,function(e,t){return{id:e.id,samples:o.a.intersection(e.samples,t in r?r[t].samples:[])}});return o.a.values(i).filter(function(e){return e.samples.length>0})}function H(e,t){var n=o.a.keyBy(e,function(e){return e.id}),r=o.a.keyBy(t,function(e){return e.id}),i=o.a.mapValues(n,function(e,t){return{id:e.id,samples:t in r?o.a.difference(e.samples,r[t].samples):e.samples}});return o.a.values(i).filter(function(e){return e.samples.length>0})}function W(e,t){var n=o.a.keyBy(e,function(e){return e.id}),r=o.a.keyBy(t,function(e){return e.id});return o.a.union(o.a.keys(n),o.a.keys(r)).map(function(e){var t=n[e],i=r[e];return t&&i?{id:e,samples:o.a.union(t.samples,i.samples)}:t||i})}function K(e,t){var n=o.a.keyBy(e,function(e){return e.id}),r=o.a.keyBy(t,function(e){return e.id}),i=o.a.mapValues(n,function(e,t){return{id:e.id,patients:o.a.intersection(e.patients,t in r?r[t].patients:[])}});return o.a.values(i).filter(function(e){return e.patients.length>0})}function $(e,t){var n=o.a.keyBy(e,function(e){return e.id}),r=o.a.keyBy(t,function(e){return e.id}),i=o.a.mapValues(n,function(e,t){return{id:e.id,patients:t in r?o.a.difference(e.patients,r[t].patients):e.patients}});return o.a.values(i).filter(function(e){return e.patients.length>0})}function Q(e,t){var n=o.a.keyBy(e,function(e){return e.id}),r=o.a.keyBy(t,function(e){return e.id});return o.a.union(o.a.keys(n),o.a.keys(r)).map(function(e){var t=n[e],i=r[e];return t&&i?{id:e,patients:o.a.union(t.patients,i.patients)}:t||i})}function Y(e,t){return e.map(function(e){return{id:e.id,samples:o.a.flatten(e.patients.map(function(n){return(t.get({patientId:n,studyId:e.id})||[]).map(function(e){return e.sampleId})}))}})}function X(e,t,n,r){var i=new c.a,a=e.reduce(function(e,r){return e[r.uid]=o.a.keyBy(t(r).map(function(e){return n(e)})),e},{}),s=!0,l=!1,u=void 0;try{for(var p,d=r[Symbol.iterator]();!(s=(p=d.next()).done);s=!0){var f=p.value,h={},m=!0,y=!1,g=void 0;try{for(var v,b=e[Symbol.iterator]();!(m=(v=b.next()).done);m=!0){var S=v.value;h[S.uid]=f in a[S.uid]}}catch(e){y=!0,g=e}finally{try{m||null==b.return||b.return()}finally{if(y)throw g}}i.add(h,f)}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}return i.entries()}function Z(e,t){var n=e.filter(function(e){return t(e.name)}),r=new a.a,i=new a.a,s=[],l=[],u=new a.a,c=new a.a,p={};if(n.length>0)for(;;){s=C(n),l=P(n),u=new a.a,c=new a.a;var d=void 0,f=!0,h=!1,y=void 0;try{for(var v,b=s[Symbol.iterator]();!(f=(v=b.next()).done);f=!0){var S=v.value;d={studyId:S.studyId,sampleId:S.sampleId},u.add(d),r.add(d)}}catch(e){h=!0,y=e}finally{try{f||null==b.return||b.return()}finally{if(h)throw y}}var _=void 0,w=!0,E=!1,O=void 0;try{for(var T,k=l[Symbol.iterator]();!(w=(T=k.next()).done);w=!0){var A=T.value;_={studyId:A.studyId,patientId:A.patientId},c.add(_),i.add(_)}}catch(e){E=!0,O=e}finally{try{w||null==k.return||k.return()}finally{if(E)throw O}}var I=g(o.a.partition(M(n,{overlappingSamplesSet:u,overlappingPatientsSet:c}),function(e){return x(e)}),2),D=I[0],j=I[1];if(D.length>0){var N=D.pop();p[N.uid]=N}if(j.length===n.length)break;n=n.filter(function(e){return!(e.uid in p)})}var R=Object(m.W)(e.map(function(e){return e.uid})),L=M(n,{overlappingSamplesSet:u,overlappingPatientsSet:c}).concat(o.a.values(p));return{groups:L=o.a.sortBy(L,function(e){return R[e.uid]}),overlappingSamples:s,overlappingPatients:l,overlappingSamplesSet:u,overlappingPatientsSet:c,totalSampleOverlap:r.keys().length,totalPatientOverlap:i.keys().length,excludedFromAnalysis:o.a.mapValues(p,function(e){return!0})}}function J(e,t,n){var r=[],o=["Sample ID","Patient ID","Study ID"].concat(t.map(function(e){return e.name}));r.push(o);var i=!0,a=!1,s=void 0;try{for(var l,u=function(){var e=l.value,o=n[e.uniqueSampleKey],i=[e.sampleId,e.patientId,e.studyId].concat(t.map(function(e){return o[e.uid]?"Yes":"No"}));r.push(i)},c=e[Symbol.iterator]();!(i=(l=c.next()).done);i=!0)u()}catch(e){a=!0,s=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw s}}return r.map(function(e){return e.join("\t")}).join("\n")}},function(e,t,n){"use strict";n.d(t,"i",function(){return o}),n.d(t,"e",function(){return i}),n.d(t,"h",function(){return a}),n.d(t,"g",function(){return s}),n.d(t,"p",function(){return l}),n.d(t,"q",function(){return u}),n.d(t,"n",function(){return c}),n.d(t,"o",function(){return p}),n.d(t,"t",function(){return d}),n.d(t,"u",function(){return f}),n.d(t,"l",function(){return h}),n.d(t,"s",function(){return m}),n.d(t,"r",function(){return y}),n.d(t,"j",function(){return g}),n.d(t,"k",function(){return v}),n.d(t,"m",function(){return b}),n.d(t,"v",function(){return S}),n.d(t,"w",function(){return _}),n.d(t,"a",function(){return w}),n.d(t,"b",function(){return E}),n.d(t,"c",function(){return O}),n.d(t,"d",function(){return C}),n.d(t,"f",function(){return P}),n.d(t,"x",function(){return x}),n.d(t,"y",function(){return T});var r=n(4),o="#D3D3D3",i="#BEBEBE",a="#000000",s=i,l="#008000",u="#53D400",c="#993404",p="#a68028",d="#000000",f="#708090",h="#8B00C9",m="#00B7CE",y="#cf58bc",g="#ff9999",v="#6699cc",b="#FFFFFF",S="#ff3df8",_="#00E1FF",w="#ff0000",E="#ffb6c1",O="#8fd8d8",C="#0000ff",P=o,x={true:"#1b9e77",yes:"#1b9e77",positive:"#1b9e77","disease free":"#1b9e77","tumor free":"#1b9e77",living:"#1b9e77",alive:"#1b9e77","not progressed":"#1b9e77",false:"#d95f02",no:"#d95f02",negative:"#d95f02",recurred:"#d95f02",progressed:"#d95f02","recurred/progressed":"#d95f02","with tumor":"#d95f02",deceased:"#d95f02",female:"#E0699E",f:"#E0699E",male:"#2986E2",m:"#2986E2",other:"#A9A9A9",unknown:P,na:P,missense:l,inframe:c,truncating:d,fusion:h,promoter:m,"1:deceased":"#d95f02","1:recurred/progressed":"#d95f02","1:recurred":"#d95f02","1:progressed":"#d95f02","1:yes":"#d95f02","1:1":"#d95f02","1:progression":"#d95f02","1:event":"#d95f02","1:dead of melanoma":"#d95f02","1:dead with tumor":"#d95f02","1:metastatic relapse":"#d95f02","1:localized relapse":"#d95f02","0:living":"#1b9e77","0:alive":"#1b9e77","0:diseasefree":"#1b9e77","0:no":"#1b9e77","0:0":"#1b9e77","0:progressionfree":"#1b9e77","0:no progression":"#1b9e77","0:not progressed":"#1b9e77","0:censored":"#1b9e77","0:censor":"#1b9e77","0:alive or censored":"#1b9e77","0:alive or dead tumor free":"#1b9e77","0:no relapse":"#1b9e77","0:progression free":"#1b9e77","0:censure":"#1b9e77","0:ned":"#1b9e77","wild type":i,amplification:w,gain:E,diploid:i,"shallow deletion":O,"deep deletion":C};function T(e){return x[e.replace(/\s/g,"").toLowerCase()]}r.forEach(x,function(e,t){x[t.toLowerCase()]=e,x[t.toUpperCase()]=e;var n=t.replace(/\s/g,"");x[n]=e,x[n.toLowerCase()]=e,x[n.toUpperCase()]=e,x[t[0].toUpperCase()+t.slice(1).toLowerCase()]=e,x[t.split(" ").map(function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()}).join(" ")]=e})},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(2),o=n(3);function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(e){var t,n=!1;return Object(r.observable)({get status(){var t=e.await();return o.E.apply(void 0,i(t))},get isComplete(){return"complete"===this.status},get isError(){return"error"===this.status},get isPending(){return"pending"===this.status},get component(){var r=null;switch(this.status){case"complete":r=e.render(),n=!0,t=r;break;case"pending":e.showLastRenderWhenPending&&n?r=t:e.renderPending&&(r=e.renderPending());break;case"error":e.renderError&&(r=e.renderError())}return r}})}},function(e,t,n){"use strict";n.d(t,"g",function(){return l}),n.d(t,"f",function(){return u}),n.d(t,"c",function(){return p}),n.d(t,"b",function(){return d}),n.d(t,"a",function(){return f}),n.d(t,"d",function(){return h}),n.d(t,"e",function(){return m});var r=n(0),o=n(4),i=n(582),a=n(640),s=n.n(a);function l(e,t,n){return 1e-6<=e&&e<n?e.toExponential(t):e.toPrecision(t)}function u(e,t){e.toFixed(t);for(var n="",r=0;r<t;r++)n+="0";return s()(e).format("0[.][".concat(n,"]"))}function c(e,t){var n=e.toFixed(t);if(0!==e&&0===parseFloat(n)){var r=t>1?o.fill(Array(t-1),"0"):[];n="".concat(e>0?"<":">-","0.").concat(r.join(""),"1")}return n}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return"".concat(c(100*e,t),"%")}function d(e){var t=r.createElement("span",null,Object(i.b)(e,3,.01));return e<.05&&(t=r.createElement("b",null,t)),t}function f(e){return e<-10?"<-10":e>10?">10":e.toFixed(2)}function h(e,t){return e>t?t:e<-t?-t:Number(e.toFixed(2))}function m(e,t,n,o){return 0===e||Math.log10(e)<o?r.createElement("span",null,"< 10",r.createElement("sup",null,o)):Object(i.b)(e,t,n)}},function(e,t,n){e.exports=n(16)(903)},function(e,t,n){"use strict";function r(e,t,n){return 1e-6<=e&&e<n?e.toExponential(t):e.toPrecision(t)}function o(e,t,n){return Math.min(n,Math.max(t,e))}n.d(t,"b",function(){return r}),n.d(t,"a",function(){return o})},function(e,t,n){"use strict";n.d(t,"c",function(){return d}),n.d(t,"g",function(){return f}),n.d(t,"f",function(){return h}),n.d(t,"d",function(){return m}),n.d(t,"e",function(){return y}),n.d(t,"h",function(){return g}),n.d(t,"i",function(){return v}),n.d(t,"k",function(){return b}),n.d(t,"j",function(){return _}),n.d(t,"l",function(){return w}),n.d(t,"a",function(){return E}),n.d(t,"b",function(){return O});var r=n(4),o=n.n(r),i=n(632),a=n.n(i),s=n(3),l=n(576),u=n(582);function c(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(e){if("gradient"===e.symbol.type)return 100;var t=[].concat(e.name);return o.a.sumBy(t,function(e){return Object(s.K)(e,l.d.legend.style.labels.fontFamily,l.d.legend.style.labels.fontSize+"px")})}function d(e,t,n){var r=Math.ceil(t.length/e),i=Math.max.apply(Math,c(t.map(p)))*r;i+=20*(r-1);var a=0;if(n){var u=[].concat(n);a=o.a.sumBy(u,function(e){return Object(s.K)(e,l.d.legend.style.title.fontFamily,l.d.legend.style.title.fontSize+"px")}),a+=10*(u.length-1)}return Math.max(i,a)}function f(e){return Math.max.apply(Math,c(e.map(function(e){return Object(s.L)(Array.isArray(e.name)?e.name.join(" "):e.name,l.e.fontFamily,l.e.fontSize+"px")})))}function h(e,t,n,r){var o=e+50+n,i=t;if(r){var a=[].concat(r);i-=Math.max.apply(Math,c(a.map(function(e){return Object(s.L)(e,l.d.legend.style.title.fontFamily,l.d.legend.style.title.fontSize+"px")}))),i-=l.d.legend.gutter}return Object(u.a)(Math.floor(i/o),1,5)}function m(e,t){var n=(e=1e4*Math.sin(e))-Math.floor(e);return t&&(n=n*(t[1]-t[0])+t[0]),n}function y(e){return m(function(e){var t,n=0;if(0===e.length)return n;for(t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return n}(e),[-1,1])}function g(e){var t=null;return[{target:"data",eventHandlers:{onMouseOver:function(){return[{target:"data",mutation:function(n){return e.tooltipModel=n,e.pointHovered=!0,null!==t&&(clearTimeout(t),t=null),{active:!0}}}]},onMouseOut:function(){return[{target:"data",mutation:function(){return null!==t&&clearTimeout(t),t=setTimeout(function(){e.pointHovered=!1},250),{active:!1}}}]}}}]}function v(e,t){return t?e&&"function"==typeof t?function(n,r){return t(n,r,e(n))}:t:function(t,n){return n||e&&e(t)?6:3}}function b(e,t,n){return n?8:t?6:4}function S(e){var t=parseInt(e,16);return t*=.95,1===(e=(t=Math.round(t)).toString(16)).length&&(e="0"+e),e}function _(e){e=e||[];var t=["#3366cc","#dc3912","#ff9900","#109618","#990099","#0099c6","#dd4477","#66aa00","#b82e2e","#316395","#994499","#22aa99","#aaaa11","#6633cc","#e67300","#8b0707","#651067","#329262","#5574a6","#3b3eac","#b77322","#16d620","#b91383","#f4359e","#9c5935","#a9c413","#2a778d","#668d1c","#bea413","#0c5922","#743411"],n=0,r={},o=!0,i=!1,a=void 0;try{for(var s,l=e[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var u=s.value;r[u]=!0}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}return function(){for(var e,o,i,a,s=t[n%t.length];r[s];)if(n<t.length)s=t[(n+=1)%t.length];else{var l=(o=void 0,i=void 0,a=void 0,o=(e=s)[1]+e[2],i=e[3]+e[4],a=e[5]+e[6],"#"+(o=S(o))+(i=S(i))+(a=S(a)));if(l===s)break;s=l}return r[s]=!0,n+=1,s}}function w(e,t,n,r,i,a,s,l){var u,c,p,d,f,h,m,y,g=[],v=!0,b=!1,S=void 0;try{for(var _,w=function(){var e=_.value;u="function"==typeof t?t(e):t,c="function"==typeof n?n(e):n,p="function"==typeof r?r(e):r,d="function"==typeof i?i(e):i,f="function"==typeof a?a(e):a,h="function"==typeof s?s(e):s,m=l?l.map(function(t){return t(e)}):[1],y=!1;for(var v=0,b=g;v<b.length;v++){var S=b[v];if(S.fill===u&&S.stroke===c&&S.strokeWidth===p&&S.strokeOpacity===d&&S.fillOpacity===f&&S.symbol===h&&o.a.isEqual(S.sortBy,m)){S.data.push(e),y=!0;break}}y||g.push({data:[e],fill:u,stroke:c,strokeWidth:p,strokeOpacity:d,fillOpacity:f,symbol:h,sortBy:m})},E=e[Symbol.iterator]();!(v=(_=E.next()).done);v=!0)w()}catch(e){b=!0,S=e}finally{try{v||null==E.return||E.return()}finally{if(b)throw S}}if(l){var O=l.map(function(e,t){return function(e){return e.sortBy[t]}});g=o.a.sortBy(g,O)}return g}function E(e,t){var n=e;if(1===Math.abs(n))return 0;var r=t;if(r>2){var o=Math.abs(n)*Math.sqrt((r-2)/(1-n*n));return a.a.ttest(o,r-1,2)}return null}function O(e){return function(e){return"thresholdType"in e}(e)?!!e.thresholdType:!!function(e){return"xThresholdType"in e||"yThresholdType"in e}(e)&&(!!e.xThresholdType||!!e.yThresholdType)}},function(e,t,n){"use strict";var r=n(3);t.a=new r.p},function(e,t,n){"use strict";n.d(t,"f",function(){return _}),n.d(t,"b",function(){return b}),n.d(t,"a",function(){return w}),n.d(t,"t",function(){return E}),n.d(t,"l",function(){return C}),n.d(t,"e",function(){return P}),n.d(t,"p",function(){return T}),n.d(t,"g",function(){return k}),n.d(t,"c",function(){return A}),n.d(t,"k",function(){return I}),n.d(t,"s",function(){return D}),n.d(t,"m",function(){return M}),n.d(t,"v",function(){return j}),n.d(t,"w",function(){return N}),n.d(t,"u",function(){return R}),n.d(t,"d",function(){return L}),n.d(t,"n",function(){return G}),n.d(t,"h",function(){return F}),n.d(t,"q",function(){return B}),n.d(t,"r",function(){return V}),n.d(t,"o",function(){return z}),n.d(t,"x",function(){return q}),n.d(t,"j",function(){return H}),n.d(t,"i",function(){return W}),n.d(t,"y",function(){return K});var r=n(2),o=n(598),i=n(588),a=n(643),s=n.n(a),l=n(572),u=n(570),c=n(3),p=n(4),d=n.n(p),f=n(178),h=n(620),m=n(612),y=n(651),g=n(573);function v(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var b,S=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};function _(e){var t=!1,n={},r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;t=t||!!l.driverFilter,l.driverTiersFilter&&(n[l.driverTiersFilter]=!0)}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return{hasBinary:t,tiers:Object.keys(n)}}!function(e){e.SAMPLE="sample",e.PATIENT="patient"}(b||(b={}));var w="hg19",E=Object(r.action)(function(e,t,n,r,o){var i=!0,a=!1,s=void 0;try{for(var l,u=e.tiers[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value;t.driverTiers.set(c,n)}}catch(e){a=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw s}}r&&(t.oncoKb=!0),o&&(t.hotspots=!0)});function O(e,t){var n=!!(t.oncoKb||t.hotspots||t.cbioportalCount||t.cosmicCount||t.customDriverBinary||t.customDriverTier);return Object.assign({putativeDriver:n,isHotspot:t.hotspots,oncoKbOncogenic:t.oncoKb,simplifiedMutationType:Object(o.c)(e.mutationType)},e)}function C(e,t,n){var r=[],o=[],i=[],a=[],s=!0,l=!1,u=void 0;try{for(var c,p=e[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){var d=c.value,f=O(d,t(d));f.hugoGeneSymbol=n[d.entrezGeneId].hugoGeneSymbol;var h=!Object(g.n)(d),m=!f.putativeDriver;h&&m?i.push(f):h?o.push(f):m?r.push(f):a.push(f)}}catch(e){l=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw u}}return{data:a,vus:r,germline:o,vusAndGermline:i}}function P(e,t,n){var r=e.data;return t||(r=r.concat(e.vus)),n||(r=r.concat(e.germline)),t||n||(r=r.concat(e.vusAndGermline)),r}var x=["likely oncogenic","predicted oncogenic","oncogenic"];function T(e){return x.indexOf((e.oncogenic||"").toLowerCase())>-1?e.oncogenic:""}function k(e,t,n,r,o){var i=d.a.keyBy(o,function(e){return e.entrezGeneId}),a=d.a.mapValues(d.a.keyBy(t,function(e){return e.genePanelId}),function(e){return e.genes.filter(function(e){return!!i[e.entrezGeneId]})}),s=d.a.reduce(n,function(e,t){return e[t.uniqueSampleKey]={byGene:{},allGenes:[],notProfiledByGene:{},notProfiledAllGenes:[]},e},{}),l=d.a.reduce(r,function(e,t){return e[t.uniquePatientKey]={byGene:{},allGenes:[],notProfiledByGene:{},notProfiledAllGenes:[]},e},{}),u=[],c=!0,p=!1,f=void 0;try{for(var h,m=e[Symbol.iterator]();!(c=(h=m.next()).done);c=!0){var y=h.value,g=s[y.uniqueSampleKey],v=l[y.uniquePatientKey],b=y.genePanelId;if(y.profiled)if(b){if(a[b]){var S=!0,_=!1,w=void 0;try{for(var E,O=a[b][Symbol.iterator]();!(S=(E=O.next()).done);S=!0){var C=E.value;g.byGene[C.hugoGeneSymbol]=g.byGene[C.hugoGeneSymbol]||[],g.byGene[C.hugoGeneSymbol].push(y),v.byGene[C.hugoGeneSymbol]=v.byGene[C.hugoGeneSymbol]||[],v.byGene[C.hugoGeneSymbol].push(y)}}catch(e){_=!0,w=e}finally{try{S||null==O.return||O.return()}finally{if(_)throw w}}u.push(y)}}else g.allGenes.push(y),v.allGenes.push(y);else g.notProfiledAllGenes.push(y),v.notProfiledAllGenes.push(y)}}catch(e){p=!0,f=e}finally{try{c||null==m.return||m.return()}finally{if(p)throw f}}for(var P=0,x=u;P<x.length;P++){var T=x[P],k=s[T.uniqueSampleKey],A=l[T.uniquePatientKey],I=!0,D=!1,M=void 0;try{for(var j,N=o[Symbol.iterator]();!(I=(j=N.next()).done);I=!0){var R=j.value;k.byGene[R.hugoGeneSymbol]||(k.notProfiledByGene[R.hugoGeneSymbol]=k.notProfiledByGene[R.hugoGeneSymbol]||[],k.notProfiledByGene[R.hugoGeneSymbol].push(T)),A.byGene[R.hugoGeneSymbol]||(A.notProfiledByGene[R.hugoGeneSymbol]=A.notProfiledByGene[R.hugoGeneSymbol]||[],A.notProfiledByGene[R.hugoGeneSymbol].push(T))}}catch(e){D=!0,M=e}finally{try{I||null==N.return||N.return()}finally{if(D)throw M}}}return{samples:s,patients:l}}function A(e,t,n,r){var o=r[e.entrezGeneId].hugoGeneSymbol,i="";if("COPY_NUMBER_ALTERATION"===n[e.molecularProfileId].molecularAlterationType){var a=t(e);a&&(i=T(a))}return Object.assign({oncoKbOncogenic:i,hugoGeneSymbol:o},e)}function I(e,t,n){return S(this,void 0,void 0,regeneratorRuntime.mark(function r(){var o,i,a,s,l,u,c,p;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:for(o=[],i={},a=!0,s=!1,l=void 0,r.prev=5,u=t[Symbol.iterator]();!(a=(c=u.next()).done);a=!0)p=c.value,e[p]?o.push(e[p]):i[p]=!0;r.next=13;break;case 9:r.prev=9,r.t0=r.catch(5),s=!0,l=r.t0;case 13:r.prev=13,r.prev=14,a||null==u.return||u.return();case 16:if(r.prev=16,!s){r.next=19;break}throw l;case 19:return r.finish(16);case 20:return r.finish(13);case 21:return d.a.isEmpty(i)||n.filter(function(e){return i[e.id]}).forEach(function(e){var t={allSampleCount:d.a.sumBy(e.data.studies,function(e){return e.samples.length}),studyId:e.id,name:e.data.name,description:e.data.description,cancerTypeId:"My Virtual Studies"};o.push(t)}),r.abrupt("return",o);case 23:case"end":return r.stop()}},r,null,[[5,9,13,21],[14,,16,20]])}))}function D(e,t,n){var r=Object(i.f)(e)?d.a.flatMap(e.list,function(e){return e.data}):e.data;return{samples:Object(l.W)(r,function(e){return e.uniqueSampleKey},t.map(function(e){return e.uniqueSampleKey})),patients:Object(l.W)(r,function(e){return e.uniquePatientKey},n.map(function(e){return e.uniquePatientKey}))}}function M(e,t,n,r,o,a){return Object(i.f)(e)?e.list.map(function(e){return s=e.oql_line,{cases:D(l=Object(i.e)(s,n,r,t)[0],o,a),oql:l};var s,l}):void 0}function j(e){return RegExp("rna_seq_mrna$|rna_seq_v2_mrna$|pan_can_atlas_2018_rna_seq_mrna_median$|pan_can_atlas_2018_rna_seq_v2_mrna_median$").test(e)}function N(e){return/tcga$/.test(e)}function R(e){return/tcga_pan_can_atlas/.test(e)}function L(e,t){var n=["cBioPortal for Cancer Genomics: "];return e.length&&(n.push(e[0]),e.length>1&&(n.push(", "),n.push(e[1])),e.length>2&&(n.push(" and "),n.push((e.length-2).toString()),n.push(" other "),n.push(e.length-2>1?"genes":"gene")),t.length&&(n.push(" in "),n.push(t[0].shortName),t.length>1&&(n.push(" and "),n.push((t.length-1).toString()),n.push(" other "),n.push(t.length-1>1?"studies":"study")))),n.join("")}function G(e){var t=[e.genetic_profile_ids_PROFILE_MUTATION_EXTENDED,e.genetic_profile_ids_PROFILE_COPY_NUMBER_ALTERATION,e.genetic_profile_ids_PROFILE_MRNA_EXPRESSION,e.genetic_profile_ids_PROFILE_PROTEIN_EXPRESSION,e.genetic_profile_ids_PROFILE_GENESET_SCORE,e.genetic_profile_ids_GENERIC_ASSAY].filter(function(e){return!!e});return t=t.concat(e.genetic_profile_ids||[]),t=d.a.uniq(t)}function F(e){if(0===e.length)return!1;if("copyNumberSegmentPresent"in e[0])return d.a.some(e,function(e){return!!e.copyNumberSegmentPresent});throw"Passed non-detailed sample projection when detailed expected."}function B(e,t,n,r,o,i){var a={};return e.forEach(function(e,s){if(void 0===e.mergedTrackOqlList){var l=e.oql,u=d.a.keyBy(d.a.map(l.data,function(e){return e.uniqueSampleKey})),c=d.a.keyBy(t.filter(function(e){var t=i[e.studyId]?d.a.intersection(i[e.studyId].map(function(e){return e.molecularProfileId}),o):o;return d.a.some(d.a.map(t,function(t){return Object(m.a)(e.uniqueSampleKey,t,l.gene,r)}),function(e){return!1===e})}).map(function(e){return e.uniqueSampleKey}));a[V(s,n,l)]=t.map(function(e){return e.uniqueSampleKey in c?y.a.UNPROFILED:e.uniqueSampleKey in u?y.a.ALTERED:y.a.UNALTERED})}else{var p=e.oql,f=d.a.keyBy(d.a.map(d.a.flatten(d.a.map(p.list,function(e){return e.data})),function(e){return e.uniqueSampleKey})),h=d.a.map(p.list,function(e){return e.gene}),g=d.a.keyBy(t.filter(function(e){var t=i[e.studyId]?d.a.intersection(i[e.studyId].map(function(e){return e.molecularProfileId}),o):o;return d.a.some(d.a.map(t,function(t){return d.a.every(d.a.map(h,function(n){return Object(m.a)(e.uniqueSampleKey,t,n,r)}),function(e){return!1===e})}),function(e){return!0===e})}).map(function(e){return e.uniqueSampleKey}));a[z(p)]=t.map(function(e){return e.uniqueSampleKey in g?y.a.UNPROFILED:e.uniqueSampleKey in f?y.a.ALTERED:y.a.UNALTERED})}}),a}function V(e,t,n){return!1===s.a.parse(t)[e].alterations?n.gene:n.oql_line.slice(0,-1)}function z(e){return e.label?e.label:d.a.map(e.list,function(e){return e.gene}).join(" / ")}function q(e){var t=this;return Object(c.S)({await:function(){var t=e.await();return e.storeForExcludingQueryGenes&&t.push(e.storeForExcludingQueryGenes.selectedMolecularProfiles),t.push(e.referenceGenesPromise),t},invoke:function(){return S(t,void 0,void 0,regeneratorRuntime.mark(function t(){var n,r,o,i,a,s,l,u,c,p,f,m,y,g;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.getSelectedProfileMap())){t.next=35;break}return t.next=4,e.fetchData();case 4:for(r=t.sent,e.storeForExcludingQueryGenes&&e.storeForExcludingQueryGenes.selectedMolecularProfiles.result.findIndex(function(e){return void 0!==n[e.studyId]})>-1&&(o=d.a.keyBy(e.storeForExcludingQueryGenes.hugoGeneSymbols,function(e){return e.toUpperCase()}),r=r.filter(function(e){return!(e.hugoGeneSymbol.toUpperCase()in o)})),i=e.referenceGenesPromise.result,a=!0,s=!1,l=void 0,t.prev=10,u=r[Symbol.iterator]();!(a=(c=u.next()).done);a=!0)p=c.value,(f=i[p.hugoGeneSymbol])&&(p.cytoband=f.cytoband);t.next=18;break;case 14:t.prev=14,t.t0=t.catch(10),s=!0,l=t.t0;case 18:t.prev=18,t.prev=19,a||null==u.return||u.return();case 21:if(t.prev=21,!s){t.next=24;break}throw l;case 24:return t.finish(21);case 25:return t.finish(18);case 26:return m=[],y=[],r.forEach(function(e){void 0===e.pValue?y.push(e):m.push(e)}),g=d.a.sortBy(m,function(e){return e.pValue}),Object(h.a)(g.map(function(e){return e.pValue})).forEach(function(e,t){g[t].qValue=e}),t.abrupt("return",U([].concat(v(g),y)));case 35:return t.abrupt("return",[]);case 36:case"end":return t.stop()}},t,null,[[10,14,18,26],[19,,21,25]])}))}})}function U(e){return d.a.sortBy(e,["pValue","hugoGeneSymbol"])}function H(e){var t={},n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;t[s.uniquePatientKey]={patientId:s.patientId,studyId:s.studyId}}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}var l={uniquePatientKeys:d.a.uniq(e.map(function(e){return e.uniquePatientKey}))};return f.a.fetchPatientsUsingPOST({patientFilter:l})}function W(e){var t=[u.a.MUTATION_EXTENDED,u.a.MUTATION_UNCALLED,u.a.FUSION,u.a.STRUCTURAL_VARIANT];return e.filter(function(e){return!t.includes(e.molecularAlterationType)})}function K(e){return(e?e.split(";").map(function(e){return e.split(",")}):[]).reduce(function(e,t){return e[t[0]]=t.slice(1),e},{})}},,function(e,t,n){},function(e,t,n){"use strict";(function(e){n.d(t,"f",function(){return u}),n.d(t,"g",function(){return p}),n.d(t,"b",function(){return d}),n.d(t,"a",function(){return f}),n.d(t,"h",function(){return m}),n.d(t,"j",function(){return y}),n.d(t,"c",function(){return _}),n.d(t,"d",function(){return w}),n.d(t,"e",function(){return E}),n.d(t,"i",function(){return O});var r=n(4),o=n(643),i=n.n(o),a=n(658),s=n(597);function l(e){return void 0!==e.list}function u(e){return void 0!==e.list}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";function n(e,t){return e.reduce(function(e,t){var o=e.dt_state,i=e.query,a=function(e,t){if(function(e){return void 0!==e.gene&&"DATATYPES"===e.gene.toUpperCase()}(t))return{dt_state:t.alterations,query_line:[]};if(l(t)){var o=n(t.list,e);return{dt_state:e,query_line:[r.assign({},t,{list:o})]}}var i=t.alterations||e;return{dt_state:e,query_line:[r.assign({},t,{alterations:i})]}}(o,t),s=a.dt_state,u=a.query_line;return{dt_state:s,query:i.concat(u)}},{dt_state:t,query:[]}).query}var o=n(i.a.parse(e),!1);t.length>0&&(o=n(o,i.a.parse("DUMMYGENE:".concat(t,";"))[0].alterations));return o}function p(e,t){var n=c(e,t);return r.flatMap(n,function(e){return function(e){return!!e.list}(e)?e.list:[e]})}function d(e){var t=p(e),n=!1,r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){if(!1!==a.value.alterations){n=!0;break}}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}function f(e){var t=p(e),n=!1,r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;if(!1!==l.alterations){var u=!0,c=!1,d=void 0;try{for(var f,h=l.alterations[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var m=f.value;if("mut"===m.alteration_type&&(void 0!==m.constr_rel||m.modifiers.length>0)){n=!0;break}if("any"===m.alteration_type&&m.modifiers.find(function(e){return"DRIVER"===e.type})){n=!0;break}}}catch(e){c=!0,d=e}finally{try{u||null==h.return||h.return()}finally{if(c)throw d}}if(n)break}}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}function h(e){switch(e.type){case"RANGE":return"(".concat(Object(s.a)(e.start,""),"-").concat(Object(s.a)(e.end,"")).concat(e.completeOverlapOnly?"*":"",")");default:return e.type}}function m(e){var t;switch(e.alteration_type){case"cna":return t="="===e.constr_rel?e.constr_val:["CNA",e.constr_rel,e.constr_val].join(""),e.modifiers.length>0&&(t+="_",t+=e.modifiers.map(function(e){return e.type}).join("_")),t;case"mut":var n=!0;return e.constr_rel?"position"===e.constr_type?t=["MUT",e.constr_rel,e.info.amino_acid,e.constr_val].join(""):(t=["MUT",e.constr_rel,e.constr_val].join(""),e.constr_val||(n=!1)):t="MUT",n&&e.modifiers.length>0&&(t+="_"),t+=e.modifiers.map(h).join("_");case"exp":return"EXP"+e.constr_rel+e.constr_val;case"prot":return"PROT"+e.constr_rel+e.constr_val;case"fusion":return"FUSION"+e.modifiers.map(function(e){return"_"+e.type}).join("");case"any":return e.modifiers.map(function(e){return e.type}).join("_")}}function y(e){var t=e.gene,n=e.alterations;return n&&n.length>0&&(t+=": "+n.map(m).join(" "),t+=";"),t}function g(e,t,n,r){return e.gene.toUpperCase()===n&&(!e.alterations||1===e.alterations.map(function(e){return function(e,t,n){switch(e.alteration_type){case"cna":return function(e,t,n){var r=n.cna(t);if(r){var o=!0;switch(e.constr_rel){case"=":o=r===e.constr_val.toLowerCase();break;case void 0:break;default:var i={amp:2,gain:1,hetloss:-1,homdel:-2},a=i[r],s=i[e.constr_val.toLowerCase()];">"===e.constr_rel?o=a>s:">="===e.constr_rel?o=a>=s:"<"===e.constr_rel?o=a<s:"<="===e.constr_rel&&(o=a<=s)}for(var l=0;l<e.modifiers.length;l++){var u=b(e.modifiers[l],t,n);null!==u&&(o=o&&u)}return 2*+o-1}return 0}(e,t,n);case"mut":return function(e,t,n){var r=n.mut_type(t);if(r){r=r.toLowerCase();var o=!1;if(e.constr_rel&&e.constr_type||(o=!0),"class"===e.constr_type){var i=e.constr_val.toLowerCase();o=r===i||"trunc"===i&&"missense"!==r&&"inframe"!==r,"!="===e.constr_rel&&(o=!o)}else if("position"===e.constr_type){var a=n.mut_position(t);if(!a)return-1;var s=e.constr_val;o=s>=a[0]&&s<=a[1],"!="===e.constr_rel&&(o=!o)}else if("name"===e.constr_type){var l=n.mut_amino_acid_change(t);if(!l)return-1;l=l.toLowerCase();var u=e.constr_val.toLowerCase();o=u===l,"!="===e.constr_rel&&(o=!o)}for(var c=0;c<e.modifiers.length;c++){var p=v(e.modifiers[c],t,n);null!==p&&(o=o&&p)}return 2*+o-1}return 0}(e,t,n);case"exp":case"prot":return function(e,t,n){var r=n["exp"===e.alteration_type?"exp":"prot"](t);if(null===r)return 0;var o,i=e.constr_val,a=e.constr_rel,s=void 0;return"<"===a&&r<i||"<="===a&&r<=i?(o=1,s=-1):">"===a&&r>i||">="===a&&r>=i?(o=1,s=1):o=-1,o>0&&(t.alterationSubType=s&&s>0?"high":"low"),o}(e,t,n);case"fusion":return function(e,t,n){if(null===n.fusion(t))return 0;for(var r=!0,o=0;o<e.modifiers.length;o++){var i=b(e.modifiers[o],t,n);null!==i&&(r=r&&i)}return 2*+r-1}(e,t,n);case"any":return function(e,t,n){for(var r=!1,o=!1,i=0;i<e.modifiers.length;i++){var a=e.modifiers[i],s=null;switch(a.type){case"DRIVER":var l=n.cna(t);s="gain"!==l&&"hetloss"!==l&&b(a,t,n)}if(!0===s)r=!0;else if(!1===s){o=!0;break}}return o?-1:r?1:0}(e,t,n)}return 0}(e,t,r)}).reduce(function(e,t){return 1===t?1:0===t?e:-1===t?1===e?1:-1:void 0},-1))}function v(e,t,n){switch(e.type){case"GERMLINE":case"SOMATIC":return n.mut_status(t)===e.type.toLowerCase();case"RANGE":var r=n.mut_position(t);if(!r)return!1;var o=[Object(s.a)(e.start,Number.NEGATIVE_INFINITY),Object(s.a)(e.end,Number.POSITIVE_INFINITY)];return e.completeOverlapOnly?o[0]<=r[0]&&o[1]>=r[1]:o[0]<=r[1]&&r[0]<=o[1];default:return b(e,t,n)}}function b(e,t,n){switch(e.type){case"DRIVER":return n.is_driver(t);default:return!1}}function S(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4?arguments[4]:void 0;n=e.extend(!0,[],n);for(var s=r,u=0;u<n.length;u++)n[u].molecularProfileAlterationType=s.molecularAlterationType(n[u].molecularProfileId),Object(a.a)(n[u],s);function d(e){return function(t){return l(t)?Object.assign(Object.assign({},t),{list:t.list.map(d(e))}):e(t)}}var f=("mergedtrack"===i?c:p)(t,o).map(d(function(e){return Object.assign(Object.assign({},e),{gene:e.gene.toUpperCase()})}));return i?f.map(d(function(e){return{gene:e.gene,parsed_oql_line:e,oql_line:y(e),data:n.filter(function(t){return g(e,t,s.gene(t).toUpperCase(),s)})}})):n.filter(function(e){return function(e,t,n){var r=n.gene(t).toUpperCase();return!!r&&e.map(function(e){return g(e,t,r,n)}).reduce(function(e,t){return e||t},!1)}(f,e,s)})}function _(e,t,n,r){return S(e,t,n,r)}function w(e,t,n,r){return S(e,t,n,r,"gene")}function E(e,t,n,r){return S(e,t,n,r,"mergedtrack")}function O(e){for(var t=p(e).filter(function(e){return"datatypes"!==e.gene.toLowerCase()}).map(function(e){return e.gene.toUpperCase()}),n={},r=0;r<t.length;r++)n[t[r]]=!0;return Object.keys(n)}}).call(this,n(11))},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(4),o=n.n(r);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){if(t){var n={},r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;n[l]=e[l]}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}return e}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.map={}}var t,n,r;return t=e,r=[{key:"from",value:function(t,n){var r=new e,o=!0,i=!1,a=void 0;try{for(var s,l=t[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var u=s.value;r.set(n(u),u)}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}return r}}],(n=[{key:"entries",value:function(){return o.a.flatten(o.a.values(this.map))}},{key:"set",value:function(e,t,n){e=a(e,n);var r=this.getEntry(e);return r?(r.value=t,!1):(this.getEntriesWithStringKey(e).push({key:e,value:t}),!0)}},{key:"get",value:function(e,t){e=a(e,t);var n=this.getEntry(e);return n?n.value:void 0}},{key:"has",value:function(e,t){return e=a(e,t),!!this.getEntry(e)}},{key:"clear",value:function(){this.map={}}},{key:"getEntriesWithStringKey",value:function(e){var t=function(e){var t=o.a.keys(e);return o.a.sortBy(t).map(function(t){return"".concat(e,":").concat(e[t])}).join(",")}(e);return this.map[t]=this.map[t]||[],this.map[t]}},{key:"getEntry",value:function(e){return this.getEntriesWithStringKey(e).find(function(t){return n=t.key,r=e,o.a.isEqual(n,r);var n,r})}}])&&i(t.prototype,n),r&&i(t,r),e}()},function(e,t,n){"use strict";var r=n(0),o=n(7),i=n(6);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,l(t).apply(this,arguments))}var n,o,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement("span",null,r.createElement("i",{className:"fa fa-md fa-exclamation-triangle",style:{color:"#BB1700",cursor:"pointer",marginRight:7}}),this.props.message," Please let us know about this error and how you got here at"," ",r.createElement("b",{style:{whiteSpace:"nowrap"}},r.createElement("a",{href:"mailto:".concat(i.b.serverConfig.skin_email_contact)},i.b.serverConfig.skin_email_contact)))}}])&&a(n.prototype,o),c&&a(n,c),t}();d.defaultProps={message:"Error encountered."},d=p([o.observer],d),t.a=d},function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__1P_Zv",framedImage:"styles-module__framedImage__1iqVk",QueryAndDownloadTabs:"styles-module__QueryAndDownloadTabs__ivykJ",QueryContainer:"styles-module__QueryContainer__2cy7B",forkedButtons:"styles-module__forkedButtons__2ctM7",errorMessage:"styles-module__errorMessage__32yZg",oqlMessage:"styles-module__oqlMessage__3xhe8",CancerStudySelector:"styles-module__CancerStudySelector__1FU50",MolecularProfileSelector:"styles-module__MolecularProfileSelector__rlomm",DataTypePrioritySelector:"styles-module__DataTypePrioritySelector__1_VUf",CaseSetSelector:"styles-module__CaseSetSelector__YteFo",StudySelection:"styles-module__StudySelection__3booh",GeneSetSelector:"styles-module__GeneSetSelector__2DY1b",icon:"styles-module__icon__1E8Oh",geneCount:"styles-module__geneCount__3cB9u",SelectedStudiesWindow:"styles-module__SelectedStudiesWindow__NAG6X",CancerStudySelectorHeader:"styles-module__CancerStudySelectorHeader__D2N40",selectAll:"styles-module__selectAll__sQO_b",noData:"styles-module__noData__3J5xx",selectedCount:"styles-module__selectedCount__TRoaE",selectionsExist:"styles-module__selectionsExist__1icpM",cancerStudySelectorBody:"styles-module__cancerStudySelectorBody__2BfDm",cancerTypeListContainer:"styles-module__cancerTypeListContainer__rnSbV",cancerStudyListContainer:"styles-module__cancerStudyListContainer__356jB",cancerTypeList:"styles-module__cancerTypeList__ouFgb",cancerTypeListItemLabel:"styles-module__cancerTypeListItemLabel__31N8Y",cancerTypeListItemCount:"styles-module__cancerTypeListItemCount__1HB2c",selectable:"styles-module__selectable__3NCiW",selected:"styles-module__selected__Zy9_9",matchingNodeText:"styles-module__matchingNodeText__3lV9e",nonMatchingNodeText:"styles-module__nonMatchingNodeText__1l5PU",containsSelectedStudies:"styles-module__containsSelectedStudies__20v-B",searchTextInput:"styles-module__searchTextInput__1VIxV",group:"styles-module__group__Cs8DR",zScore:"styles-module__zScore__23rtN",infoIcon:"styles-module__infoIcon__zMiog",profileName:"styles-module__profileName__1fbIy",DataTypePriorityLabel:"styles-module__DataTypePriorityLabel__21k9z",radioRow:"styles-module__radioRow__1G_fF",buttonRow:"styles-module__buttonRow__51RtG",geneSet:"styles-module__geneSet__Ra6KD",notEmpty:"styles-module__notEmpty__23mDp",GeneSymbolValidator:"styles-module__GeneSymbolValidator__ZK8rf",pendingMessage:"styles-module__pendingMessage__2jgIM",oqlNotice:"styles-module__oqlNotice__1tycm",validBubble:"styles-module__validBubble__QCGq3",invalidBubble:"styles-module__invalidBubble__1gB6Z",suggestionBubble:"styles-module__suggestionBubble__aRL1R",noChoiceLabel:"styles-module__noChoiceLabel__2GF5_",singleChoiceLabel:"styles-module__singleChoiceLabel__2wdqL",multiChoiceLabel:"styles-module__multiChoiceLabel__19sFa",MutSigGeneSelectorWindow:"styles-module__MutSigGeneSelectorWindow__1Uiku",MutSigGeneSelector:"styles-module__MutSigGeneSelector__25hKH",selectionColumnHeader:"styles-module__selectionColumnHeader__2MSUO",selectionColumnCell:"styles-module__selectionColumnCell__3RJ8f",selectButton:"styles-module__selectButton__2dXHK",GisticGeneSelectorWindow:"styles-module__GisticGeneSelectorWindow__1J2UG",GisticGeneSelector:"styles-module__GisticGeneSelector__U5Lb9",header:"styles-module__header__3cqyY",amp:"styles-module__amp__1zeIe",del:"styles-module__del__1_otl",gisticTable:"styles-module__gisticTable__2fquv",GisticGeneToggles:"styles-module__GisticGeneToggles__1aR6k",someGenes:"styles-module__someGenes__J-RhD",moreGenes:"styles-module__moreGenes__2gVF_",geneToggle:"styles-module__geneToggle__EGiaB",simulateHovered:"styles-module__simulateHovered__3IL_G",notSelected:"styles-module__notSelected__3-Rmx",showMoreLess:"styles-module__showMoreLess__3Ef4J",GenesetsSelectorWindow:"styles-module__GenesetsSelectorWindow__NTbph",GenesetsFormGroup:"styles-module__GenesetsFormGroup__1uJYh",GenesetsVolcanoSelectorWindow:"styles-module__GenesetsVolcanoSelectorWindow__w4nHP",GenesetsSelectionArea:"styles-module__GenesetsSelectionArea__3ebp-",transposeDataMatrix:"styles-module__transposeDataMatrix__YP_NR",submitRow:"styles-module__submitRow__k2sC8",genomeSpace:"styles-module__genomeSpace__2augo",tooltip:"styles-module__tooltip__ux3KI",learnOql:"styles-module__learnOql__1Aj5I",quickSelect:"styles-module__quickSelect__3ZhaC",studyName:"styles-module__studyName__2iQkr"}},function(e,t,n){"use strict";var r=n(616),o=n(4),i=n.n(o),a=n(178),s=n(103),l=n(621),u=n(583),c=n(578),p=n(781);function d(e,t){var n,r,o,a;switch(t){case"STRING":var s=Object(u.j)(i.a.values(c.x));n=i.a.cloneDeep(c.x);var l=!0,d=!1,f=void 0;try{for(var h,m=e[Symbol.iterator]();!(l=(h=m.next()).done);l=!0){var y=h.value;y.value in n||(n[y.value]=s())}}catch(e){d=!0,f=e}finally{try{l||null==m.return||m.return()}finally{if(d)throw f}}break;case"NUMBER":var g=e.reduce(function(e,t){return t.value&&!isNaN(t.value)&&e.push(parseFloat(t.value)),e},[]),v=i.a.min(g),b=i.a.max(g);if(void 0!==v&&void 0!==b){if(r=function(e){return Object(p.b)((e-v)/(b-v))},v>=0){var S=function(e){return Math.log(Math.max(.01,e))},_=S(v),w=S(b);o=function(e){return Object(p.b)((S(e)-_)/(w-_))}}a=[v,b]}else r=function(e){return"#000000"}}return{categoryToColor:n,numericalValueToColor:r,numericalValueRange:a,logScaleNumericalValueToColor:o}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"c",function(){return g}),n.d(t,"a",function(){return b}),n.d(t,"b",function(){return S}),n.d(t,"f",function(){return w}),n.d(t,"d",function(){return E}),n.d(t,"e",function(){return O}),n.d(t,"g",function(){return T});var g,v=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};!function(e){e.MutationSpectrum="NO_CONTEXT_MUTATION_SIGNATURE",e.StudyOfOrigin="CANCER_STUDY",e.ProfiledInPrefix="PROFILED_IN",e.ComparisonGroupPrefix="IN_COMPARISON_GROUP",e.NumSamplesPerPatient="NUM_SAMPLES_PER_PATIENT"}(g||(g={}));var b=["C>A","C>G","C>T","T>A","T>C","T>G"],S=["#3D6EB1","#8EBFDC","#DFF1F8","#FCE08E","#F78F5E","#D62B23"],_=[g.StudyOfOrigin,g.NumSamplesPerPatient];function w(e){return e.clinicalAttributeId.startsWith(g.ProfiledInPrefix)}function E(e){return e.clinicalAttributeId.startsWith(g.ComparisonGroupPrefix)}function O(e){return w(e)||E(e)||_.indexOf(e.clinicalAttributeId)>-1}function C(e,t){var n=[],r=new l.a,o=!0,i=!1,a=void 0;try{for(var s,u=e.comparisonGroup.data.studies[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var c=s.value,p=c.id,d=!0,f=!1,h=void 0;try{for(var m,y=c.samples[Symbol.iterator]();!(d=(m=y.next()).done);d=!0){var g=m.value;r.add({studyId:p,sampleId:g})}}catch(e){f=!0,h=e}finally{try{d||null==y.return||y.return()}finally{if(f)throw h}}}}catch(e){i=!0,a=e}finally{try{o||null==u.return||u.return()}finally{if(i)throw a}}var v=!0,b=!1,S=void 0;try{for(var _,w=t[Symbol.iterator]();!(v=(_=w.next()).done);v=!0){var E=_.value;n.push({clinicalAttribute:e,clinicalAttributeId:e.clinicalAttributeId,patientId:E.patientId,sampleId:E.sampleId,studyId:E.studyId,uniquePatientKey:E.uniquePatientKey,uniqueSampleKey:E.uniqueSampleKey,value:r.has({studyId:E.studyId,sampleId:E.sampleId})?"Yes":"No"})}}catch(e){b=!0,S=e}finally{try{v||null==w.return||w.return()}finally{if(b)throw S}}return n}function P(e,t,n){var r=e.molecularProfileIds,o=[],a=!0,s=!1,l=void 0;try{for(var u,c=function(){var t=u.value,a=n.samples[t.uniqueSampleKey];if(!a)return"continue";var s=i.a.flatten(i.a.values(a.byGene)).concat(a.allGenes),l=i.a.keyBy(s,"molecularProfileId");i.a.some(r,function(e){return e in l})&&o.push({clinicalAttribute:e,clinicalAttributeId:e.clinicalAttributeId,patientId:t.patientId,sampleId:t.sampleId,studyId:t.studyId,uniquePatientKey:t.uniquePatientKey,uniqueSampleKey:t.uniqueSampleKey,value:"Yes"})},p=t[Symbol.iterator]();!(a=(u=p.next()).done);a=!0)c()}catch(e){s=!0,l=e}finally{try{a||null==p.return||p.return()}finally{if(s)throw l}}return o}function x(e,t,n,r,o,l){return v(this,void 0,void 0,regeneratorRuntime.mark(function u(){var c,p,d,f;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:u.t0=e.clinicalAttributeId,u.next=u.t0===g.MutationSpectrum?3:u.t0===g.StudyOfOrigin?10:u.t0===g.NumSamplesPerPatient?12:16;break;case 3:return p=i.a.groupBy(t,function(e){return e.studyId}),u.t1=i.a,u.next=7,Promise.all(Object.keys(r).map(function(e){var t=p[e];return t.length?s.a.fetchMutationSpectrumsUsingPOST({molecularProfileId:r[e].molecularProfileId,mutationSpectrumFilter:{sampleIds:t.map(function(e){return e.sampleId})}}):Promise.resolve([])}));case 7:return u.t2=u.sent,c=u.t1.flatten.call(u.t1,u.t2),u.abrupt("break",28);case 10:return c=t.map(function(t){return{clinicalAttribute:e,clinicalAttributeId:e.clinicalAttributeId,patientId:t.patientId,sampleId:t.sampleId,studyId:t.studyId,uniquePatientKey:t.uniquePatientKey,uniqueSampleKey:t.uniqueSampleKey,value:o[t.studyId].name}}),u.abrupt("break",28);case 12:return d=i.a.groupBy(t,"uniquePatientKey"),f=i.a.keyBy(n,"uniquePatientKey"),c=i.a.map(d,function(t,n){var r=f[n];return{clinicalAttribute:e,clinicalAttributeId:e.clinicalAttributeId,patientId:r.patientId,uniquePatientKey:n,studyId:r.studyId,value:t.length}}),u.abrupt("break",28);case 16:if(!w(e)){u.next=20;break}c=P(e,t,l),u.next=27;break;case 20:if(!E(e)){u.next=24;break}c=C(e,t),u.next=27;break;case 24:return u.next=26,a.a.fetchClinicalDataUsingPOST({clinicalDataType:e.patientAttribute?"PATIENT":"SAMPLE",clinicalDataMultiStudyFilter:{attributeIds:[e.clinicalAttributeId],identifiers:e.patientAttribute?n.map(function(e){return{entityId:e.patientId,studyId:e.studyId}}):t.map(function(e){return{entityId:e.sampleId,studyId:e.studyId}})}});case 26:c=u.sent;case 27:return u.abrupt("break",28);case 28:return u.abrupt("return",c);case 29:case"end":return u.stop()}},u)}))}var T=function(e){function t(e,n,r,o,i){var a,s,l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s=this,l=h(t).call(this,function(t){return{await:function(){return[e,n,r,o,i]},invoke:function(){return v(m(a),void 0,void 0,regeneratorRuntime.mark(function a(){var s;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,x(t,e.result,n.result,r.result,o.result,i.result);case 2:return s=a.sent,a.abrupt("return",Object.assign({data:s},d(s,t.datatype)));case 4:case"end":return a.stop()}},a)}))}}},function(e){return"".concat(e.clinicalAttributeId,",").concat((e.molecularProfileIds||[]).join("-"),",").concat(e.patientAttribute)}),a=!l||"object"!==f(l)&&"function"!=typeof l?m(s):l}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,r["a"]),t}()},function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"c",function(){return a}),n.d(t,"a",function(){return s});var r=n(102),o=n(6);function i(e){return Object.assign({chromosome:e.chr},e)}function a(e){return e.map(i)}function s(e,t){return function(n){return n.length>0?Object(r.J)(n,e,o.b.serverConfig.isoformOverrideSource,t):Promise.resolve([])}}},function(e,t,n){"use strict";var r=n(4),o=n(178),i=n(2);function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l="tissue",u="My Virtual Studies",c="Studies",p=function(){function e(t){var n,o,i,s=this,p=t.cancerTypes,d=void 0===p?[]:p,f=t.studies,h=void 0===f?[]:f,m=t.priorityStudies,y=void 0===m?{}:m,g=t.virtualStudies,v=void 0===g?[]:g,b=t.maxTreeDepth,S=void 0===b?0:b;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootCancerType={clinicalTrialKeywords:"",dedicatedColor:"",name:"All",parent:"",shortName:"All",cancerTypeId:l},this.virtualStudyCategory={clinicalTrialKeywords:"",dedicatedColor:"",name:u,parent:l,shortName:u,cancerTypeId:u,alwaysVisible:!0},this.physicalStudyCategory={clinicalTrialKeywords:"",dedicatedColor:"",name:c,parent:l,shortName:c,cancerTypeId:c,alwaysVisible:!0},this.priorityCategories=[],this.map_node_meta=new Map,this.map_cancerTypeId_cancerType=new Map,this.map_studyId_cancerStudy=new Map,d=e.sortNodes(d);var _=v.map(function(e){if(e.data)return{allSampleCount:r.sumBy(e.data.studies,function(e){return e.samples.length}),studyId:e.id,name:e.data.name,description:e.data.description,cancerTypeId:u}}).filter(function(e){return e});for(var w in y)this.priorityCategories.push({clinicalTrialKeywords:"",dedicatedColor:"",name:w,parent:l,shortName:w,cancerTypeId:w});0===S&&v.length>0&&(h=r.map(h,function(e){return e.cancerTypeId=s.physicalStudyCategory.cancerTypeId,e}));for(var E=0,O=[d=[this.virtualStudyCategory,this.physicalStudyCategory].concat(a(this.priorityCategories),[this.rootCancerType],a(d)),h=e.sortNodes([].concat(a(_),a(h)))];E<O.length;E++){n=O[E];var C=!0,P=!1,x=void 0;try{for(var T,k=n[Symbol.iterator]();!(C=(T=k.next()).done);C=!0){o=T.value;var A=n==d;A?this.map_cancerTypeId_cancerType.set(o.cancerTypeId,o):this.map_studyId_cancerStudy.set(o.studyId,o);var I=A?o.name:[o.name,o.description].join("\n");this.map_node_meta.set(o,{isCancerType:A,isPriorityCategory:!1,priorityCategories:[],childCancerTypes:[],childStudies:[],descendantStudies:[],descendantCancerTypes:[],ancestors:[],siblings:[],searchTerms:I})}}catch(e){P=!0,x=e}finally{try{C||null==k.return||k.return()}finally{if(P)throw x}}}var D=!0,M=!1,j=void 0;try{for(var N,R=this.priorityCategories[Symbol.iterator]();!(D=(N=R.next()).done);D=!0){var L=N.value;(i=this.map_node_meta.get(L)).isPriorityCategory=!0;var G=!0,F=!1,B=void 0;try{for(var V,z=y[L.cancerTypeId][Symbol.iterator]();!(G=(V=z.next()).done);G=!0){var q=V.value,U=this.map_studyId_cancerStudy.get(q);if(U)i.childStudies.push(U),i.descendantStudies.push(U),this.map_node_meta.get(U).priorityCategories.push(L)}}catch(e){F=!0,B=e}finally{try{G||null==z.return||z.return()}finally{if(F)throw B}}}}catch(e){M=!0,j=e}finally{try{D||null==R.return||R.return()}finally{if(M)throw j}}for(var H=0,W=[d,h];H<W.length;H++){n=W[H];var K=!0,$=!1,Q=void 0;try{for(var Y,X=n[Symbol.iterator]();!(K=(Y=X.next()).done);K=!0){o=Y.value,i=this.map_node_meta.get(o);var Z=void 0;if(i.isCancerType){var J=o.alwaysVisible;Z=this.map_cancerTypeId_cancerType.get(o.parent),J&&Z&&(Z.alwaysVisible=J)}else Z=this.map_cancerTypeId_cancerType.get(o.cancerTypeId);var ee=Z&&this.map_node_meta.get(Z);for(ee&&(i.isCancerType?ee.childCancerTypes.push(o):ee.childStudies.push(o));Z&&ee;)i.ancestors.push(Z),i.isCancerType?ee.descendantCancerTypes.push(o):ee.descendantStudies.push(o),ee=(Z=this.map_cancerTypeId_cancerType.get(Z.parent))&&this.map_node_meta.get(Z);var te=[].concat(a(i.ancestors),a(i.priorityCategories)).map(function(e){return e.name});i.searchTerms=[i.searchTerms].concat(a(te)).join("\n")}}catch(e){$=!0,Q=e}finally{try{K||null==X.return||X.return()}finally{if($)throw Q}}}var ne=!0,re=!1,oe=void 0;try{for(var ie,ae=h[Symbol.iterator]();!(ne=(ie=ae.next()).done);ne=!0){o=ie.value;var se=(i=this.map_node_meta.get(o)).ancestors[i.ancestors.length-2];if(se){var le=this.map_node_meta.get(se);i.siblings=le.descendantStudies}}}catch(e){re=!0,oe=e}finally{try{ne||null==ae.return||ae.return()}finally{if(re)throw oe}}}var t,n,o;return t=e,o=[{key:"sortNodes",value:function(e){return r.sortBy(e,function(e){return e.name})}}],(n=null)&&s(t.prototype,n),o&&s(t,o),e}(),d=n(3),f=n(66),h=n(103),m=n(588),y=n(104),g=n.n(y),v=n(6),b=n(692),S=n(50),_=n.n(S),w=n(15),E=n(701),O=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};function C(e,t,n){return O(this,void 0,void 0,regeneratorRuntime.mark(function o(){var i,a;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return i=r.chunk(e,n),a=i.map(t),o.t0=r,o.next=5,Promise.all(a);case 5:return o.t1=o.sent,o.abrupt("return",o.t0.flatten.call(o.t0,o.t1));case 7:case"end":return o.stop()}},o)}))}var P=n(570);function x(e){var t=e.selectableSelectedStudyIds,n=e.asyncCustomCaseSet.result.map(function(e){return e.studyId+":"+e.sampleId}).join("+"),r=e.getSelectedProfileIdFromMolecularAlterationType("MUTATION_EXTENDED");e.alterationTypesInOQL.haveMutInQuery&&!r&&e.defaultMutationProfile&&(r=e.defaultMutationProfile.molecularProfileId);var o=e.getSelectedProfileIdFromMolecularAlterationType("COPY_NUMBER_ALTERATION");e.alterationTypesInOQL.haveCnaInQuery&&!o&&e.defaultCnaProfile&&(o=e.defaultCnaProfile.molecularProfileId);var i=e.getSelectedProfileIdFromMolecularAlterationType("MRNA_EXPRESSION");e.alterationTypesInOQL.haveMrnaInQuery&&!i&&e.defaultMrnaProfile&&(i=e.defaultMrnaProfile.molecularProfileId);var a=e.getSelectedProfileIdFromMolecularAlterationType("PROTEIN_LEVEL");e.alterationTypesInOQL.haveProtInQuery&&!a&&e.defaultProtProfile&&(a=e.defaultProtProfile.molecularProfileId);var s={genetic_profile_ids_PROFILE_MUTATION_EXTENDED:r,genetic_profile_ids_PROFILE_COPY_NUMBER_ALTERATION:o,genetic_profile_ids_PROFILE_MRNA_EXPRESSION:i,genetic_profile_ids_PROFILE_METHYLATION:e.getSelectedProfileIdFromMolecularAlterationType("METHYLATION")||e.getSelectedProfileIdFromMolecularAlterationType("METHYLATION_BINARY"),genetic_profile_ids_PROFILE_PROTEIN_EXPRESSION:a,genetic_profile_ids_PROFILE_GENESET_SCORE:e.getSelectedProfileIdFromMolecularAlterationType("GENESET_SCORE"),genetic_profile_ids_PROFILE_GENERIC_ASSAY:e.getSelectedProfileIdFromMolecularAlterationType("GENERIC_ASSAY"),cancer_study_id:1===t.length?t[0]:"all",cancer_study_list:void 0,Z_SCORE_THRESHOLD:e.zScoreThreshold,RPPA_SCORE_THRESHOLD:e.rppaScoreThreshold,data_priority:e.dataTypePriorityCode,profileFilter:e.dataTypePriorityCode,case_set_id:e.selectedSampleListId||"-1",case_ids:n,gene_list:ae(e.geneQuery)||" ",geneset_list:ae(e.genesetQuery)||" ",tab_index:e.forDownloadTab?"tab_download":"tab_visualize",transpose_matrix:e.transposeDataMatrix?"on":void 0,Action:"Submit"};return 1!==t.length&&(s.cancer_study_list=t.join(",")),{query:s}}function T(e){var t=!1,n=!1,r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;if(l.showProfileInAnalysisTab){switch(l.molecularAlterationType){case P.a.MUTATION_EXTENDED:t=!0;break;case P.a.COPY_NUMBER_ALTERATION:n=!0}if(t&&n)break}}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return{mutation:t,cna:n}}function k(e,t,n){var o={},i={},a={},s={},l={},u={},c={},p={};r.each(e,function(e){switch(e.category){case"all_cases_with_mutation_and_cna_data":a[e.studyId]=r.keyBy(e.sampleIds);break;case"all_cases_with_mutation_data":o[e.studyId]=r.keyBy(e.sampleIds);break;case"all_cases_with_cna_data":i[e.studyId]=r.keyBy(e.sampleIds);break;case"all_cases_in_study":s[e.studyId]=r.keyBy(e.sampleIds);break;default:e.sampleListId===e.studyId+"_all"&&(s[e.studyId]=r.keyBy(e.sampleIds))}});var d=r.map(n,function(e){return e.id}),f=t.filter(function(e){return!r.includes(d,e)});return r.forEach(f,function(e){l[e]=o[e]||{},u[e]=i[e]||{},c[e]=a[e]||{},p[e]=s[e]||{}}),r.forEach(n,function(e){r.forEach(e.data.studies,function(e){r.includes(f,e.id)||(l[e.id]=l[e.id]||{},u[e.id]=u[e.id]||{},c[e.id]=c[e.id]||{},p[e.id]=p[e.id]||{},r.forEach(e.samples,function(t){o[e.id]&&o[e.id][t]&&(l[e.id][t]=t),i[e.id]&&i[e.id][t]&&(u[e.id][t]=t),a[e.id]&&a[e.id][t]&&(c[e.id][t]=t),s[e.id]&&s[e.id][t]&&(p[e.id][t]=t)}))})}),{w_mut:r.reduce(l,function(e,t){return e+Object.keys(t).length},0),w_cna:r.reduce(u,function(e,t){return e+Object.keys(t).length},0),w_mut_cna:r.reduce(c,function(e,t){return e+Object.keys(t).length},0),all:r.reduce(p,function(e,t){return e+Object.keys(t).length},0)}}var A=n(571);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var N=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};function R(e){return e}function L(e,t){return t}function G(e){return N(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.fetchMolecularProfilesUsingPOST({molecularProfileFilter:{studyIds:e}});case 2:return n=t.sent,i=r.groupBy(n,function(e){return e.studyId}),t.abrupt("return",e.map(function(e){return{data:[i[e]||[]],meta:e}}));case 5:case"end":return t.stop()}},t)}))}var F=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),D(this,M(t).call(this,R,L,G))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,A["a"]),t}(),B=n(572),V=n(127);function z(e){var t=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value;r.has(l,"genesets")&&l.genesets.forEach(function(e){return t.push(e)})}}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return t}var q=n(616);function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){return!t||"object"!==U(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};var Q=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),H(this,W(t).call(this,function(e){return{invoke:function(){return function(e){return $(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.getAllSampleListsInStudyUsingGET({studyId:e,projection:"DETAILED"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}))}(e)}}},function(e){return e}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(t,q["a"]),t}();var Y=n(128),X=n(602);function Z(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",function(){return oe}),n.d(t,"e",function(){return ae}),n.d(t,"b",function(){return se}),n.d(t,"c",function(){return ue}),n.d(t,"d",function(){return ce});var ne=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":te(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},re=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},oe="-1";function ie(e){return Number.isInteger(Number(e))}function ae(e){return e.trim().replace(/^\s+|\s+$/g,"").replace(/[ \+]+/g," ").toUpperCase()}var se,le=["searchText","selectableSelectedStudyIds","dataTypePriority","selectedProfileIds","zScoreThreshold","rppaScoreThreshold","selectedSampleListId","caseIds","caseIdsMode","geneQuery","genesetQuery"];!function(e){e[e.Unfocused=0]="Unfocused",e[e.ShouldFocus=1]="ShouldFocus",e[e.Focused=2]="Focused"}(se||(se={}));var ue=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.studiesHaveChangedSinceInitialization=!1,this.deletedVirtualStudies=[],this.forDownloadTab=!1,this.transposeDataMatrix=!1,this.searchText="",this._allSelectedStudyIds=i.observable.map(),this._defaultSelectedIds=i.observable.map(),this.dataTypePriority={mutation:!0,cna:!0},this._selectedProfileIds=void 0,this.zScoreThreshold="2.0",this.rppaScoreThreshold="2.0",this._selectedSampleListId=void 0,this.caseIds="",this._defaultStudySampleMap={},this._caseIdsMode="sample",this._geneQuery="",this.rawGenesetQuery="",this.geneQueryErrorDisplayStatus=se.Unfocused,this.genesetQueryErrorDisplayStatus=se.Unfocused,this.showMutSigPopup=!1,this.showGisticPopup=!1,this.showGenesetsHierarchyPopup=!1,this.showGenesetsVolcanoPopup=!1,this.priorityStudies=v.a.parseConfigFormat(v.b.serverConfig.priority_studies),this.showSelectedStudiesOnly=!1,this.selectedCancerTypeIds=[],this.clickAgainToDeselectSingle=!0,this.searchExampleMessage="",this.volcanoPlotSelectedPercentile={label:"75%",value:"75"},this._maxTreeDepth=parseInt(v.b.serverConfig.skin_query_max_tree_depth,10),this.cancerTypes=Object(d.S)({invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.a.getAllCancerTypesUsingGET({}).then(function(e){return e.filter(function(e){return"null"!==e.parent})}));case 1:case"end":return e.stop()}},e)}))}},[]),this.cancerStudies=Object(d.S)(o.a.getAllStudiesUsingGET({projection:"SUMMARY"}),[]),this.cancerStudyIdsSet=Object(d.S)({await:function(){return[n.cancerStudies]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(d.Y)(this.cancerStudies.result.map(function(e){return e.studyId})));case 1:case"end":return e.stop()}},e,this)}))},default:{}}),this.physicalStudiesIdsSet=Object(d.S)({await:function(){return[n.cancerStudies]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.cancerStudies.result.reduce(function(e,t){return e[t.studyId]=[t.studyId],e},{}));case 1:case"end":return e.stop()}},e,this)}))},default:{}}),this.virtualStudiesIdsSet=Object(d.S)({await:function(){return[n.userVirtualStudies]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.userVirtualStudies.result.reduce(function(e,t){return e[t.id]=[t.id],e},{}));case 1:case"end":return e.stop()}},e,this)}))},default:{}}),this.sharedQueriedStudiesSet=Object(d.S)({await:function(){return[n.physicalStudiesIdsSet,n.virtualStudiesIdsSet]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,o,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.physicalStudiesIdsSet.result,n=this.virtualStudiesIdsSet.result,o=Object.assign({},t,n),i=this._defaultSelectedIds.keys().filter(function(e){return!o[e]}),a={},e.next=7,Promise.all(i.map(function(e){return new Promise(function(n,o){V.a.getVirtualStudy(e).then(function(o){var i=o.data.studies.map(function(e){return e.id}),s=i.filter(function(e){return!t[e]});r.isEmpty(s)&&(a[e]=i),n()}).catch(function(){n()})})}));case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}},e,this)}))},default:{}}),this.physicalStudiesSet=Object(d.S)({await:function(){return[n.cancerStudies]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.cancerStudies.result.reduce(function(e,t){return e[t.studyId]=t,e},{}));case 1:case"end":return e.stop()}},e,this)}))},default:{}}),this.userVirtualStudies=Object(d.S)(function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v.a.sessionServiceIsEnabled()||!this.userLoggedIn){e.next=13;break}return e.prev=1,e.next=4,V.a.getUserVirtualStudies();case 4:return t=e.sent,e.abrupt("return",t);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",[]);case 11:e.next=14;break;case 13:return e.abrupt("return",[]);case 14:case"end":return e.stop()}},e,this,[[1,8]])}))},[]),this.userVirtualStudiesSet=Object(d.S)({await:function(){return[n.userVirtualStudies]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.userVirtualStudies.result.reduce(function(e,t){return e[t.id]=t,e},{}));case 1:case"end":return e.stop()}},e,this)}))},default:{}}),this.sharedVirtualStudiesSet=Object(d.S)({await:function(){return[n.physicalStudiesSet,n.userVirtualStudiesSet]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,o,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.physicalStudiesSet.result,n=this.userVirtualStudiesSet.result,o=Object.assign([],Object.keys(t),Object.keys(n)),i=this._defaultSelectedIds.keys().filter(function(e){return!r.includes(o,e)}),a={},e.next=7,Promise.all(i.map(function(e){return new Promise(function(n,r){V.a.getVirtualStudy(e).then(function(r){0===r.data.studies.map(function(e){return e.id}).filter(function(e){return!t[e]}).length&&(a[e]=r),n()}).catch(function(){n()})})}));case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}},e,this)}))},default:{}}),this.selectedStudyToSampleSet=Object(d.S)({await:function(){return[n.userVirtualStudiesSet,n.sharedVirtualStudiesSet]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,i,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={},n=r.filter(this.allSelectedStudyIds,function(e){return a.physicalStudiesSet.result[e]}),this._allSelectedStudyIds.keys().length===n.length){e.next=9;break}return e.next=5,Promise.all(r.map(n,function(e){return o.a.getAllSamplesInStudyUsingGET({studyId:e}).then(function(n){t[e]=Object(d.Y)(n.map(function(e){return e.sampleId}))})}));case 5:i=Object.assign(Object.assign({},this.userVirtualStudiesSet.result),this.sharedVirtualStudiesSet.result),this._allSelectedStudyIds.keys().forEach(function(e){i[e]&&i[e].data.studies.forEach(function(e){void 0===t[e.id]&&(t[e.id]=Object(d.Y)(e.samples))})}),e.next=10;break;case 9:n.forEach(function(e){t[e]={}});case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}},e,this)}))},default:{}}),this.selectableStudiesSet=Object(d.S)({await:function(){return[n.physicalStudiesSet,n.selectedStudyToSampleSet]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},r.each(this.physicalStudiesSet.result,function(e,n){t[n]=[n]}),r.each(this.userVirtualStudiesSet.result,function(e,n){t[n]=[n]}),r.each(this.sharedVirtualStudiesSet.result,function(e,n){t[n]=e.data.studies.map(function(e){return e.id})}),e.abrupt("return",t);case 5:case"end":return e.stop()}},e,this)}))},default:{},onResult:function(){if(n.selectedSampleListId!==oe){var e=n.sharedVirtualStudiesSet.result,t=r.filter(n._allSelectedStudyIds.keys(),function(t){return void 0!==e[t]});if(r.isEmpty(t))n.caseIds="";else{var o=n._defaultStudySampleMap;(void 0===o||r.isEmpty(o))&&(o=r.reduce(n.selectedStudyToSampleSet.result,function(e,t,n){return e[n]=r.keys(t),e},{})),r.some(o,function(e){return e.length>0})&&n.setCaseIds(o)}}}}),this.unknownStudyIds=Object(d.S)({await:function(){return[n.selectableStudiesSet]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.selectableStudiesSet.result,n=this._allSelectedStudyIds.keys(),e.abrupt("return",n.filter(function(e){return!(e in t)}));case 3:case"end":return e.stop()}},e,this)}))},default:[]}),this.molecularProfiles=Object(d.S)({invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==this.physicalStudyIdsInSelection.length){e.next=6;break}return e.next=3,o.a.getAllMolecularProfilesInStudyUsingGET({studyId:this.physicalStudyIdsInSelection[0]});case 3:return e.abrupt("return",e.sent);case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}},e,this)}))},default:[],onResult:function(){n.initiallySelected.profileIds&&!n.studiesHaveChangedSinceInitialization||(n._selectedProfileIds=void 0)}}),this.molecularProfilesInSelectedStudies=Object(d.S)({invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.molecularProfilesInStudyCache.getPromise(this.physicalStudyIdsInSelection,!0);case 2:return t=e.sent,e.abrupt("return",r.flatten(t.map(function(e){return e.data?e.data:[]})));case 4:case"end":return e.stop()}},e,this)}))},default:[]}),this.sampleListInSelectedStudies=Object(d.S)({await:function(){return n.physicalStudyIdsInSelection.map(function(e){return n.sampleListsInStudyCache.get(e)})},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.reduce(this.physicalStudyIdsInSelection,function(e,n){var o=t.sampleListsInStudyCache.get(n).result;return r.isUndefined(o)||(e=e.concat(o)),e},[]));case 1:case"end":return e.stop()}},e,this)}))},default:[],onResult:function(){n.initiallySelected.sampleListId&&!n.studiesHaveChangedSinceInitialization||(n._selectedSampleListId=void 0)}}),this.profileAvailability=Object(d.S)({await:function(){return[n.molecularProfilesInSelectedStudies]},invoke:function(){return Promise.resolve(T(n.molecularProfilesInSelectedStudies.result))},default:{mutation:!1,cna:!1},onResult:function(){n.initiallySelected.sampleListId&&!n.studiesHaveChangedSinceInitialization||(n.dataTypePriority=T(n.molecularProfilesInSelectedStudies.result))}}),this.profiledSamplesCount=Object(d.S)({await:function(){return[n.sampleListInSelectedStudies]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k(this.sampleListInSelectedStudies.result,this.selectableSelectedStudyIds,this.selectedVirtualStudies));case 1:case"end":return e.stop()}},e,this)}))},default:{w_mut:0,w_cna:0,w_mut_cna:0,all:0}}),this.sampleLists=Object(d.S)({invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isSingleNonVirtualStudySelected){e.next=2;break}return e.abrupt("return",[]);case 2:return this.sampleListsInStudyCache.get(this.selectableSelectedStudyIds[0]).result,e.next=5,this.sampleListsInStudyCache.get(this.selectableSelectedStudyIds[0]).result;case 5:return t=e.sent,e.abrupt("return",r.sortBy(t,function(e){return e.name}));case 7:case"end":return e.stop()}},e,this)}))},default:[],onResult:function(){n.initiallySelected.sampleListId&&!n.studiesHaveChangedSinceInitialization||(n._selectedSampleListId=void 0)}}),this.mutSigForSingleStudy=Object(d.S)({invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isSingleNonVirtualStudySelected){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,h.a.getSignificantlyMutatedGenesUsingGET({studyId:this.selectableSelectedStudyIds[0]});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}))},default:[]}),this.gisticForSingleStudy=Object(d.S)({invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isSingleNonVirtualStudySelected){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,h.a.getSignificantCopyNumberRegionsUsingGET({studyId:this.selectableSelectedStudyIds[0]});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}))},default:[]}),this.genes=Object(d.S)({invoke:function(){return n.invokeGenesLater(n.geneIds)},default:{found:[],suggestions:[]}}),this.genesets=Object(d.S)({invoke:function(){return n.invokeGenesetsLater(n.genesetIds)},default:{found:[],invalid:[]}}),this.invokeGenesLater=Object(f.debounceAsync)(function(e){return re(n,void 0,void 0,regeneratorRuntime.mark(function t(){var n,i,a,s,l,u,c,p,d,f,h=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.partition(r.uniq(e),ie),i=J(n,2),a=i[0],s=i[1],l=function(){return re(h,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,i,s,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.length){e.next=6;break}return e.next=3,o.a.fetchGenesUsingPOST({geneIdType:"ENTREZ_GENE_ID",geneIds:a});case 3:t=e.sent,e.next=7;break;case 6:t=[];case 7:return n=r.difference(a,t.map(function(e){return e.entrezGeneId+""})),i=n.map(function(e){return{alias:e,genes:[]}}),s=t.map(function(e){return{alias:e.entrezGeneId+"",genes:[e]}}),l=[].concat(Z(i),Z(s)),e.abrupt("return",{found:t,suggestions:l});case 12:case"end":return e.stop()}},e)}))},u=function(){return re(h,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,i,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.length){e.next=6;break}return e.next=3,o.a.fetchGenesUsingPOST({geneIdType:"HUGO_GENE_SYMBOL",geneIds:s});case 3:t=e.sent,e.next=7;break;case 6:t=[];case 7:return n=r.difference(s,t.map(function(e){return e.hugoGeneSymbol})),e.next=10,Promise.all(n.map(function(e){return a.getGeneSuggestions(e)}));case 10:return i=e.sent,e.abrupt("return",{found:t,suggestions:i});case 12:case"end":return e.stop()}},e)}))},t.next=5,Promise.all([l(),u()]);case 5:return c=t.sent,p=J(c,2),d=p[0],f=p[1],t.abrupt("return",{found:[].concat(Z(d.found),Z(f.found)),suggestions:[].concat(Z(d.suggestions),Z(f.suggestions))});case 10:case"end":return t.stop()}},t)}))},500),this.invokeGenesetsLater=Object(f.debounceAsync)(function(e){return re(n,void 0,void 0,regeneratorRuntime.mark(function t(){var n,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.length>0)){t.next=8;break}return t.next=3,h.a.fetchGenesetsUsingPOST({genesetIds:e});case 3:return n=t.sent,o=r.difference(e,n.map(function(e){return e.genesetId})),t.abrupt("return",{found:n,invalid:o});case 8:return t.abrupt("return",Promise.resolve({found:[],invalid:[]}));case 9:case"end":return t.stop()}},t)}))},500),this.asyncCustomCaseSet=Object(d.S)({invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.selectedSampleListId===oe&&0!==this.caseIds.trim().length){e.next=2;break}return e.abrupt("return",[]);case 2:return e.abrupt("return",this.invokeCustomCaseSetLater({isVirtualStudySelected:this.isVirtualStudySelected,caseIds:this.caseIds,caseIdsMode:this.caseIdsMode}));case 3:case"end":return e.stop()}},e,this)}))},default:[]}),this.invokeCustomCaseSetLater=Object(f.debounceAsync)(function(e){return re(n,void 0,void 0,regeneratorRuntime.mark(function t(){var n,i,a,s,l,u,c,p,f,h,m,y,g,v,b,S,_,w,E,O,P,x,T,k,A,I,D=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n="",this.isSingleNonVirtualStudySelected&&(n=this.selectableSelectedStudyIds[0]),i=e.caseIds.trim().split(/\s+/g),a=Object(d.Y)(this.physicalStudyIdsInSelection),s=i.map(function(e){var t=e.split(":");if(1===t.length){if(n)return{id:e,study:n};throw new Error("No study specified for ".concat(D.caseIdsMode," id: ").concat(e,", and more than one study selected for query."))}if(2===t.length){var r=t[0],o=t[1];if(!a[r]){var i="";throw D.isVirtualStudySelected&&(i=", nor part of a selected Saved Study"),new Error("Study ".concat(r," is not selected").concat(i,"."))}return{id:o,study:r}}throw new Error("Input error for entity: ".concat(e,"."))}),l=Object(d.W)(s.map(function(e){return"".concat(e.study,":").concat(e.id)})),u=[],c={},p=[],"sample"!==e.caseIdsMode){t.next=37;break}if(!(f=s.map(function(e){return{studyId:e.study,sampleId:e.id}})).length){t.next=35;break}return t.next=14,C(f,function(e){return o.a.fetchSamplesUsingPOST({sampleFilter:{sampleIdentifiers:e},projection:"SUMMARY"})},990);case 14:for(h=t.sent,h=r.sortBy(h,function(e){return l["".concat(e.studyId,":").concat(e.sampleId)]}),m=!0,y=!1,g=void 0,t.prev=19,v=h[Symbol.iterator]();!(m=(b=v.next()).done);m=!0)S=b.value,u.push({studyId:S.studyId,sampleId:S.sampleId}),c["".concat(S.studyId,":").concat(S.sampleId)]=!0;t.next=27;break;case 23:t.prev=23,t.t0=t.catch(19),y=!0,g=t.t0;case 27:t.prev=27,t.prev=28,m||null==v.return||v.return();case 30:if(t.prev=30,!y){t.next=33;break}throw g;case 33:return t.finish(30);case 34:return t.finish(27);case 35:t.next=61;break;case 37:return _=s.map(function(e){return D.getSamplesForStudyAndPatient(e.study,e.id)}),t.next=40,Promise.all(_);case 40:for(w=t.sent,w=r.sortBy(w,function(e){return l["".concat(e.studyId,":").concat(e.patientId)]}),E=!0,O=!1,P=void 0,t.prev=45,x=w[Symbol.iterator]();!(E=(T=x.next()).done);E=!0)k=T.value,k.studyId,k.patientId,A=k.samples,!k.error&&A.length&&(u=u.concat(A.map(function(e){return c["".concat(e.studyId,":").concat(e.patientId)]=!0,{studyId:e.studyId,sampleId:e.sampleId}})));t.next=53;break;case 49:t.prev=49,t.t1=t.catch(45),O=!0,P=t.t1;case 53:t.prev=53,t.prev=54,E||null==x.return||x.return();case 56:if(t.prev=56,!O){t.next=59;break}throw P;case 59:return t.finish(56);case 60:return t.finish(53);case 61:if(p=p.concat(s.filter(function(e){return!c["".concat(e.study,":").concat(e.id)]})),I=this.selectedStudyToSampleSet.result,u.forEach(function(e){I[e.studyId]&&!r.isEmpty(I[e.studyId])&&(I[e.studyId][e.sampleId]||p.push({id:e.sampleId,study:e.studyId}))}),!p.length){t.next=70;break}if(!this.isSingleNonVirtualStudySelected){t.next=69;break}throw new Error("Invalid ".concat(e.caseIdsMode).concat(p.length>1?"s":""," for the selected cancer study: ").concat(p.map(function(e){return e.id}).join(", ")));case 69:throw new Error("Invalid (study, ".concat(e.caseIdsMode,") pair").concat(p.length>1?"s":"",": ").concat(p.map(function(e){return"(".concat(e.study,", ").concat(e.id,")")}).join(", "),"\n\t\t\t\t\t\t"));case 70:return t.abrupt("return",u);case 71:case"end":return t.stop()}},t,this,[[19,23,27,35],[28,,30,34],[45,49,53,61],[54,,56,60]])}))},500),this.studyListLogic=new E.b(this),this.hierarchyData=Object(d.S)({invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(B.T)(this.getFilteredProfiles("GENESET_SCORE")[0].molecularProfileId,Number(this.volcanoPlotSelectedPercentile.value),0,1,this.defaultSelectedSampleListId);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e,this)}))}}),this.volcanoPlotTableData=Object(d.S)({await:function(){return[n.hierarchyData]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",z(this.hierarchyData.result));case 1:case"end":return e.stop()}},e,this)}))}}),this.map_genesets_selected_volcano=new i.ObservableMap,this.dict_molecularAlterationType_filenameSuffix={MUTATION_EXTENDED:"mutations",COPY_NUMBER_ALTERATION:"cna",MRNA_EXPRESSION:"mrna",METHYLATION:"methylation",METHYLATION_BINARY:"methylation",PROTEIN_LEVEL:"rppa"},this.asyncUrlParams=Object(d.S)({await:function(){return[n.asyncCustomCaseSet]},invoke:function(){return re(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x(this));case 1:case"end":return e.stop()}},e,this)}))}}),this.initiallySelected={profileIds:!1,sampleListId:!1},this.initialize(t)}var t,n,a;return t=e,(n=[{key:"initialize",value:function(e){var t=this;Object(f.labelMobxPromises)(this),e&&this.setParamsFromUrl(e);var n=localStorage.getItem("legacyStudySubmission");if(localStorage.removeItem("legacyStudySubmission"),n)try{this.setParamsFromLocalStorage(JSON.parse(n))}catch(e){throw"error parseing/setting legacyStudySubmission"}Object(i.reaction)(function(){return t.allSelectedStudyIds},function(){t.studiesHaveChangedSinceInitialization=!0})}},{key:"deleteVirtualStudy",value:function(e){var t=this;V.a.deleteVirtualStudy(e).then(Object(i.action)(function(){t.deletedVirtualStudies.push(e),-1!==t.selectableSelectedStudyIds.indexOf(e)&&(t.selectableSelectedStudyIds=r.difference(t.selectableSelectedStudyIds,[e]))}),Object(i.action)(function(e){}))}},{key:"restoreVirtualStudy",value:function(e){var t=this;V.a.addVirtualStudy(e).then(Object(i.action)(function(){t.deletedVirtualStudies=t.deletedVirtualStudies.filter(function(t){return t!==e})}),Object(i.action)(function(e){}))}},{key:"setStudyIdSelected",value:function(e,t){if(this.forDownloadTab){var n={};t&&(n[e]=t),this._allSelectedStudyIds=i.observable.map(n)}else t?this._allSelectedStudyIds.set(e,!0):this._allSelectedStudyIds.delete(e)}},{key:"setCaseIds",value:function(e){this.selectedSampleListId=oe,this.caseIdsMode="sample",this.caseIds=r.flatten(Object.keys(e).map(function(t){return e[t].map(function(e){return"".concat(t,":").concat(e)})})).join("\n")}},{key:"getGeneSuggestions",value:function(e){return re(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,o.a.getAllGenesUsingGET({alias:e});case 3:return t.t1=t.sent,t.abrupt("return",{alias:t.t0,genes:t.t1});case 5:case"end":return t.stop()}},t)}))}},{key:"getSamplesForStudyAndPatient",value:function(e,t){return o.a.getAllSamplesOfPatientInStudyUsingGET({studyId:e,patientId:t}).then(function(n){return{studyId:e,patientId:t,samples:n,error:void 0}},function(n){return{studyId:e,patientId:t,samples:[],error:n}})}},{key:"isVirtualStudy",value:function(e){return!this.cancerStudyIdsSet.result[e]}},{key:"isDeletedVirtualStudy",value:function(e){return!!(this.isVirtualStudy(e)&&this.deletedVirtualStudies.indexOf(e)>-1)}},{key:"isSingleStudySelected",value:function(e){if(1!==this.selectableSelectedStudyIds.length)return!1;var t=this.selectableSelectedStudyIds[0];return this.isVirtualStudy(t)===e}},{key:"calculateDataTypePriorityCode",value:function(e){var t=e.mutation,n=e.cna;return t&&n?"0":t?"1":n?"2":"0"}},{key:"getFilteredProfiles",value:function(e){var t=this;return this.molecularProfiles.result.filter(function(n){return n.molecularAlterationType==e&&(n.showProfileInAnalysisTab||t.forDownloadTab)})}},{key:"isProfileSelected",value:function(e){return r.includes(this.selectedProfileIds,e)}},{key:"getSelectedProfileIdFromMolecularAlterationType",value:function(e,t){var n=!0,r=!1,o=void 0;try{for(var i,a=(t||this.selectedProfileIds)[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value,l=this.dict_molecularProfileId_molecularProfile[s];if(l&&l.molecularAlterationType===e)return l.molecularProfileId}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return""}},{key:"sanitizeQueryParams",value:function(e){return e?decodeURIComponent(e).replace(/\+/g,"\n"):""}},{key:"setParamsFromUrl",value:function(e){var t;"string"==typeof e?t=_.a.parse(e,!0).query:t=e;var n=[t.genetic_profile_ids_PROFILE_MUTATION_EXTENDED,t.genetic_profile_ids_PROFILE_COPY_NUMBER_ALTERATION,t.genetic_profile_ids_PROFILE_MRNA_EXPRESSION,t.genetic_profile_ids_PROFILE_METHYLATION,t.genetic_profile_ids_PROFILE_PROTEIN_EXPRESSION,t.genetic_profile_ids_PROFILE_GENESET_SCORE,t.genetic_profile_ids_PROFILE_GENERIC_ASSAY],o=t.cancer_study_list?t.cancer_study_list.split(","):t.cancer_study_id?[t.cancer_study_id]:[];this.selectableSelectedStudyIds=o,this._defaultSelectedIds=i.observable.map(Object(d.Y)(o)),this._selectedProfileIds=n.every(function(e){return void 0===e})?void 0:n.filter(r.identity),this.zScoreThreshold=t.Z_SCORE_THRESHOLD||"2.0",this.rppaScoreThreshold=t.RPPA_SCORE_THRESHOLD||"2.0",this.dataTypePriorityCode=t.data_priority||t.profileFilter||"0",this.selectedSampleListId=t.case_set_id?t.case_set_id.toString():"",this.caseIds=this.sanitizeQueryParams(t.case_ids),this.caseIdsMode="sample",this.geneQuery=ae(decodeURIComponent(t.gene_list||"")),this.genesetQuery=ae(decodeURIComponent(t[Y.a.geneset_list]||"")),this.forDownloadTab="tab_download"===t.tab_index,this.initiallySelected.profileIds=!0,this.initiallySelected.sampleListId=!0}},{key:"setParamsFromLocalStorage",value:function(e){var t=e.case_ids;if(t&&e.case_set_id==oe&&(this.selectedSampleListId=oe,this.caseIdsMode="sample",this.caseIds=t.replace(/\+/g,"\n"),this.initiallySelected.sampleListId=!0),e.cancer_study_list){var n=!0,r=!1,o=void 0;try{for(var i,a=e.cancer_study_list.split(",")[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;"null"!==s&&(this.setStudyIdSelected(s,!0),this._defaultSelectedIds.set(s,!0))}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}}}},{key:"selectCancerType",value:function(e,t){var n=e.cancerTypeId;t?r.includes(this.selectedCancerTypeIds,n)?this.selectedCancerTypeIds=r.difference(this.selectedCancerTypeIds,[n]):this.selectedCancerTypeIds=r.union(this.selectedCancerTypeIds,[n]):this.clickAgainToDeselectSingle&&r.isEqual(Object(i.toJS)(this.selectedCancerTypeIds),[n])?this.selectedCancerTypeIds=[]:this.selectedCancerTypeIds=[n]}},{key:"setSearchText",value:function(e){this.clearSelectedCancerType(),this.searchText=e}},{key:"clearSelectedCancerType",value:function(){this.selectedCancerTypeIds=[]}},{key:"selectMolecularProfile",value:function(e,t){var n=this.getFilteredProfiles(e.molecularAlterationType).map(function(e){return e.molecularProfileId});if(this.forDownloadTab)this._selectedProfileIds=[e.molecularProfileId];else{var o=r.difference(this.selectedProfileIds,n);this._selectedProfileIds=t?r.union(o,[e.molecularProfileId]):o}}},{key:"replaceGene",value:function(e,t){this.geneQuery=ae(this.geneQuery.toUpperCase().replace(new RegExp("\\b".concat(e.toUpperCase(),"\\b"),"g"),function(){return t.toUpperCase()}))}},{key:"replaceGeneset",value:function(e,t){this.genesetQuery=ae(this.genesetQuery.toUpperCase().replace(new RegExp("\\b".concat(e.toUpperCase(),"\\b"),"g"),function(){return t.toUpperCase()}))}},{key:"applyGeneSelection",value:function(e){var t=J(r.partition(e.keys(),function(t){return e.get(t)}),2),n=t[0],o=t[1];n=r.difference(n,this.geneIds),o=r.intersection(o,this.geneIds);var i=!0,a=!1,s=void 0;try{for(var l,u=o[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value;this.replaceGene(c,"")}}catch(e){a=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw s}}this.geneQuery=ae([this.geneQuery].concat(Z(n)).join(" "))}},{key:"addToGenesetSelection",value:function(e){var t=J(r.partition(e.keys(),function(t){return e.get(t)}),2),n=t[0],o=(t[1],r.union(n,this.genesetIds).join(" "));this.genesetQuery=ae(o)}},{key:"applyGenesetSelection",value:function(e){var t=J(r.partition(e.keys(),function(t){return e.get(t)}),2),n=t[0],o=t[1],i=this.genesetQuery;if(n.length>0){var a=[],s=!0,l=!1,u=void 0;try{for(var c,p=n[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){var d=c.value;a.push(d)}}catch(e){l=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw u}}i=a.join(" ")}if(o.length>0){var f=i.split(" "),h=!0,m=!1,y=void 0;try{for(var g,v=o[Symbol.iterator]();!(h=(g=v.next()).done);h=!0){var b=g.value,S=!0,_=!1,w=void 0;try{for(var E,O=f[Symbol.iterator]();!(S=(E=O.next()).done);S=!0){var C=E.value;if(b===C){var P=f.indexOf(C);P>=0&&f.splice(P,1)}}}catch(e){_=!0,w=e}finally{try{S||null==O.return||O.return()}finally{if(_)throw w}}}}catch(e){m=!0,y=e}finally{try{h||null==v.return||v.return()}finally{if(m)throw y}}i=f.join(" ")}i=ae(i),this.genesetQuery=i}},{key:"submit",value:function(){if(this.oql.error)return this.geneQueryErrorDisplayStatus=se.ShouldFocus,this.genesetQueryErrorDisplayStatus=se.ShouldFocus,!1;if(!this.submitEnabled||!this.asyncUrlParams.isComplete)return!1;var e=this.asyncUrlParams.result;return this.forDownloadTab?function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"post",o=document.createElement("form"),i=r;"smart"===r&&(i=Object(w.b)(e,t).length>1800?"post":"get"),o.setAttribute("method",i),o.setAttribute("action",e),n&&o.setAttribute("target",n);for(var a=0,s=Object.keys(t);a<s.length;a++){var l=s[a],u=document.createElement("input");u.setAttribute("type","hidden"),u.setAttribute("name",l),u.setAttribute("value",t[l]),o.appendChild(u)}document.body.appendChild(o),o.submit()}(Object(w.b)("data_download"),e.query,void 0,"smart"):this.singlePageAppSubmitRoutine(e.query),!0}},{key:"openSummary",value:function(){this.summaryEnabled&&Object(w.E)(this.selectableSelectedStudyIds)}},{key:"virtualStudiesMap",get:function(){return r.keyBy(this.userVirtualStudies.result,function(e){return e.id})}},{key:"selectedVirtualStudies",get:function(){var e=this;return r.reduce(this.selectableSelectedStudies,function(t,n){return e.isVirtualStudy(n.studyId)&&void 0!==e.virtualStudiesMap&&e.virtualStudiesMap[n.studyId]&&t.push(e.virtualStudiesMap[n.studyId]),t},[])}},{key:"physicalStudyIdsInSelection",get:function(){var e={},t=!0,n=!1,r=void 0;try{for(var o,i=this.selectableSelectedStudyIds[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value,s=this.virtualStudiesMap[a];s?s.data.studies.forEach(function(t){return e[t.id]=!0}):e[a]=!0}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return Object.keys(e)}},{key:"stateToSerialize",get:function(){return r.pick(this,le)}},{key:"onlyOneReferenceGenome",get:function(){return 1===r.uniq(this.selectableSelectedStudies.map(function(e){return e.referenceGenome})).length}},{key:"allSelectedStudyIds",get:function(){return this._allSelectedStudyIds.keys()}},{key:"selectableSelectedStudyIds",get:function(){var e=this._allSelectedStudyIds.keys(),t=this.selectableStudiesSet.result;return e=e.reduce(function(e,n){return t[n]?e.concat(t[n]):e},[]),e=r.uniq(e),this.forDownloadTab?e.slice(-1):e},set:function(e){this._allSelectedStudyIds=i.observable.map(Object(d.Y)(e))}},{key:"defaultSelectedIds",get:function(){return this._defaultSelectedIds}},{key:"selectedProfileIds",get:function(){var e,t=this;if(void 0!==this._selectedProfileIds)e=this._selectedProfileIds;else{e=[];for(var n=0,r=["MUTATION_EXTENDED","COPY_NUMBER_ALTERATION"];n<r.length;n++){var o=r[n],i=this.getFilteredProfiles(o);i.length&&e.push(i[0].molecularProfileId)}}return this.forDownloadTab?e.slice(0,1):e.filter(function(e){var n=t.dict_molecularProfileId_molecularProfile[e];return n&&n.showProfileInAnalysisTab})},set:function(e){this._selectedProfileIds=e}},{key:"selectedSampleListId",get:function(){return void 0!==this._selectedSampleListId?this._selectedSampleListId:this.defaultSelectedSampleListId},set:function(e){this._selectedSampleListId=e}},{key:"caseIdsMode",get:function(){return this.selectedSampleListId===oe?this._caseIdsMode:"sample"},set:function(e){this._caseIdsMode=e}},{key:"geneQuery",get:function(){return this._geneQuery},set:function(e){this.geneQueryErrorDisplayStatus=se.Unfocused,this._geneQuery=e}},{key:"genesetQuery",get:function(){return this.rawGenesetQuery.toUpperCase()},set:function(e){this.genesetQueryErrorDisplayStatus=se.Unfocused,this.rawGenesetQuery=e}},{key:"maxTreeDepth",get:function(){return this.forDownloadTab&&this._maxTreeDepth>0?1:this._maxTreeDepth},set:function(e){this._maxTreeDepth=e}},{key:"userLoggedIn",get:function(){return Object(d.B)().globalStores.appStore.isLoggedIn}},{key:"treeData",get:function(){return new p({cancerTypes:this.cancerTypes.result,studies:this.cancerStudies.result,priorityStudies:this.priorityStudies,virtualStudies:this.forDownloadTab?[]:this.userVirtualStudies.result,maxTreeDepth:this.maxTreeDepth})}},{key:"selectedCancerTypes",get:function(){var e=this;return this.selectedCancerTypeIds.map(function(t){return e.treeData.map_cancerTypeId_cancerType.get(t)}).filter(r.identity)}},{key:"selectableSelectedStudies",get:function(){var e=this;return this.selectableSelectedStudyIds.map(function(t){return e.treeData.map_studyId_cancerStudy.get(t)}).filter(r.identity)}},{key:"isSingleVirtualStudySelected",get:function(){return this.isSingleStudySelected(!0)}},{key:"isSingleNonVirtualStudySelected",get:function(){return this.isSingleStudySelected(!1)}},{key:"isMultipleNonVirtualStudiesSelected",get:function(){var e=this;return this.selectableSelectedStudyIds.filter(function(t){return!e.isVirtualStudy(t)}).length>1}},{key:"getOverlappingStudiesMap",get:function(){var e,t,n=(e=this.selectableSelectedStudies,t=r.reduce(e,function(e,t){if(/_tcga/.test(t.studyId)){var n=t.studyId.replace(/(_\d\d\d\d|_pub|(_pub\d\d\d\d)|_pan_can_atlas_\d\d\d\d)$/g,"");n&&(n in e?e[n].push(t):e[n]=[t])}return e},{}),r.filter(t,function(e){return e.length>1}));return r.chain(n).flatten().keyBy(function(e){return e.studyId}).value()}},{key:"isVirtualStudySelected",get:function(){var e=!1,t=!0,n=!1,r=void 0;try{for(var o,i=this.selectableSelectedStudyIds[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;if(this.virtualStudiesMap[a]){e=!0;break}}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return e}},{key:"isVirtualStudyQuery",get:function(){return 0!==this.selectableSelectedStudyIds.length&&(this.selectableSelectedStudyIds.length>1||this.isSingleVirtualStudySelected)}},{key:"dataTypePriorityCode",set:function(e){switch(e){default:case"0":this.dataTypePriority={mutation:!0,cna:!0};break;case"1":this.dataTypePriority={mutation:!0,cna:!1};break;case"2":this.dataTypePriority={mutation:!1,cna:!0}}},get:function(){return this.calculateDataTypePriorityCode(this.dataTypePriority)}},{key:"dict_molecularProfileId_molecularProfile",get:function(){return r.keyBy(this.molecularProfiles.result,function(e){return e.molecularProfileId})}},{key:"isGenesetProfileSelected",get:function(){var e=!1;if(this.getFilteredProfiles("GENESET_SCORE")[0])for(var t in this.selectedProfileIds)this.selectedProfileIds[t]===this.getFilteredProfiles("GENESET_SCORE")[0].molecularProfileId&&(e=!0);return e}},{key:"defaultProfilesForOql",get:function(){if(this.molecularProfilesInSelectedStudies.isComplete)return Object(B.R)(this.molecularProfilesInSelectedStudies.result)}},{key:"defaultMutationProfile",get:function(){return this.defaultProfilesForOql&&this.defaultProfilesForOql[P.a.MUTATION_EXTENDED]}},{key:"defaultCnaProfile",get:function(){return this.defaultProfilesForOql&&this.defaultProfilesForOql[P.a.COPY_NUMBER_ALTERATION]}},{key:"defaultMrnaProfile",get:function(){return this.defaultProfilesForOql&&this.defaultProfilesForOql[P.a.MRNA_EXPRESSION]}},{key:"defaultProtProfile",get:function(){return this.defaultProfilesForOql&&this.defaultProfilesForOql[P.a.PROTEIN_LEVEL]}},{key:"defaultSelectedSampleListId",get:function(){if(this.isVirtualStudyQuery)return"all";if(1===this.selectableSelectedStudyIds.length){var e=this.selectableSelectedStudyIds[0],t=this.getSelectedProfileIdFromMolecularAlterationType("MUTATION_EXTENDED"),n=this.getSelectedProfileIdFromMolecularAlterationType("COPY_NUMBER_ALTERATION"),r=this.getSelectedProfileIdFromMolecularAlterationType("MRNA_EXPRESSION"),o=this.getSelectedProfileIdFromMolecularAlterationType("PROTEIN_LEVEL"),i=e+"_all";return t&&n&&!r&&!o?i=e+"_cnaseq":!t||n||r||o?t||!n||r||o?t||n||!r||o?(t||n)&&r&&!o?i=e+"_3way_complete":t||n||r||!o||(i=e+"_rppa"):this.isProfileSelected(e+"_mrna_median_Zscores")?i=e+"_mrna":this.isProfileSelected(e+"_rna_seq_mrna_median_Zscores")?i=e+"_rna_seq_mrna":this.isProfileSelected(e+"_rna_seq_v2_mrna_median_Zscores")&&(i=e+"_rna_seq_v2_mrna"):i=e+"_cna":i=e+"_sequenced",this.dict_sampleListId_sampleList[i]||(i===e+"_cnaseq"?i=e+"_cna_seq":i===e+"_3way_complete"&&(i=e+"_complete")),this.dict_sampleListId_sampleList[i]||(i=e+"_all"),i}}},{key:"dict_sampleListId_sampleList",get:function(){return r.keyBy(this.sampleLists.result,function(e){return e.sampleListId})}},{key:"oql",get:function(){try{return{query:this.geneQuery?Object(m.g)(this.geneQuery.trim().toUpperCase()):[],error:void 0}}catch(o){if("SyntaxError"!==o.name)return{query:[],error:{start:0,end:0,message:"Unexpected ".concat(o)}};var e,t,n,r=o.location.start.offset;return r===this.geneQuery.length?(e="after",t=r-1,n=r):0===r?(e="before",t=r,n=r+1):(e="at",t=r,n=r+1),{query:[],error:{start:t,end:n,message:"OQL syntax error ".concat(e," selected character; please fix and submit again.")}}}}},{key:"geneIds",get:function(){try{return this.oql.query.map(function(e){return e.gene})}catch(e){return[]}}},{key:"genesetIdsQuery",get:function(){try{return{query:this.genesetQuery?this.genesetQuery.split(/[ \n]+/):[],error:void 0}}catch(o){if("SyntaxError"!==o.name)return{query:[],error:{start:0,end:0,message:"Unexpected ".concat(o)}};var e,t,n,r=o.location.start.offset;return r===this.geneQuery.length?(e="after",t=r-1,n=r):0===r?(e="before",t=r,n=r+1):(e="at",t=r,n=r+1),{query:[],error:{start:t,end:n,message:"OQL syntax error ".concat(e," selected character; please fix and submit again.")}}}}},{key:"genesetIds",get:function(){return this.genesetIdsQuery.query}},{key:"minYVolcanoPlot",get:function(){return this.volcanoPlotTableData.result&&(e=this.volcanoPlotTableData.result).length>0?r.minBy(e,function(e){return e.representativePvalue}).representativePvalue:void 0;var e}},{key:"volcanoPlotGraphData",get:function(){return this.volcanoPlotTableData.result?(e=this.volcanoPlotTableData.result,t=this.map_genesets_selected_volcano,e.length>0?e.map(function(e){var n=e.representativeScore,r=e.representativePvalue,o=e.name;return{x:n,y:-Math.log(r)/Math.log(10),fill:t.get(o)?"tomato":"3786C2"}}):void 0):void 0;var e,t}},{key:"submitEnabled",get:function(){return!this.submitError&&(this.genes.isComplete||this.genesets.isComplete)&&this.asyncUrlParams.isComplete||!!this.oql.error||!!this.genesetIdsQuery.error}},{key:"summaryEnabled",get:function(){return this.selectableSelectedStudyIds.length>0}},{key:"hasSelectedStudies",get:function(){return this.selectableSelectedStudyIds.length>0}},{key:"oqlMessages",get:function(){return Object(B.U)(this.oql.query)}},{key:"approxSampleCount",get:function(){var e=this.selectedSampleListId;if(!e)return this.profiledSamplesCount.result.all;if(e===oe)return this.caseIds?Math.max(this.caseIds.trim().split(/\s+/g).length,1):1;var t=this.sampleLists.result.find(function(t){return t.sampleListId===e});return t?t.sampleCount:e in this.profiledSamplesCount.result?this.profiledSamplesCount.result[e]:this.profiledSamplesCount.result.all}},{key:"isQueryLimitReached",get:function(){return this.oql.query.length*this.approxSampleCount>v.b.serverConfig.query_product_limit}},{key:"geneLimit",get:function(){return Math.floor(v.b.serverConfig.query_product_limit/this.approxSampleCount)}},{key:"isMixedReferenceGenome",get:function(){var e=this;if(this.physicalStudyIdsInSelection&&this.physicalStudiesSet.result){var t=r.map(this.physicalStudyIdsInSelection,function(t){return e.physicalStudiesSet.result[t]});return Object(X.c)(t)}}},{key:"alterationTypesInOQL",get:function(){return Object(B.P)(this.oql.query)}},{key:"submitError",get:function(){if(!this.selectableSelectedStudyIds.length)return"Please select one or more cancer studies.";if(this.isSingleNonVirtualStudySelected){if(!this.selectedProfileIds.length)return"Please select one or more molecular profiles.";if(this.alterationTypesInOQL.haveMutInQuery&&!this.defaultMutationProfile)return"Mutation data query specified in OQL, but no mutation profile is available for the selected study.";if(this.alterationTypesInOQL.haveCnaInQuery&&!this.defaultCnaProfile)return"CNA data query specified in OQL, but no CNA profile is available in the selected study.";if(this.alterationTypesInOQL.haveMrnaInQuery&&!this.defaultMrnaProfile)return"mRNA expression data query specified in OQL, but no mRNA profile is available in the selected study.";if(this.alterationTypesInOQL.haveProtInQuery&&!this.defaultProtProfile)return"Protein level data query specified in OQL, but no protein level profile is available in the selected study."}else if(!this.dataTypePriority.mutation&&!this.dataTypePriority.cna)return"Please select one or more molecular profiles.";if(this.selectableSelectedStudyIds.length&&this.selectedSampleListId===oe){if(this.asyncCustomCaseSet.isComplete&&!this.asyncCustomCaseSet.result.length)return"Please enter at least one ID in your custom case set.";if(this.asyncCustomCaseSet.error)return"Error in custom case set."}else{if(this.alterationTypesInOQL.haveMrnaInQuery&&this.selectableSelectedStudyIds.length>1)return"Expression filtering in the gene list (the EXP command) is not supported when doing cross cancer queries.";if(this.alterationTypesInOQL.haveProtInQuery&&this.selectableSelectedStudyIds.length>1)return"Protein level filtering in the gene list (the PROT command) is not supported when doing cross cancer queries."}if(0!==this.selectedProfileIds.length){if(1===this.selectedProfileIds.length){if(this.isGenesetProfileSelected){if(!this.genesetQuery.length&&!this.oql.query.length)return"Please enter one or more gene symbols and gene sets.";if(!this.genesetQuery.length)return"Please enter one or more gene sets or deselect gene set profiles.";if(!this.oql.query.length)return"Please enter one or more gene symbols."}else if(!this.oql.query.length)return"Please enter one or more gene symbols."}else if(this.isGenesetProfileSelected){if(!this.genesetQuery.length&&!this.oql.query.length)return"Please enter one or more gene symbols and gene sets.";if(!this.oql.query.length)return"Please enter one or more gene symbols."}else if(!this.oql.query.length)return"Please enter one or more gene symbols."}else if(!this.oql.query.length)return"Please enter one or more gene symbols.";if(this.isQueryLimitReached)return"Please limit your queries to ".concat(this.geneLimit," genes or fewer.");if(this.genes.result.suggestions.length)return"Please edit the gene symbols.";var e=r.groupBy(this.genes.result.found,function(e){return e.hugoGeneSymbol});return r.some(e,function(e){return e.length>1})?"Please edit the gene symbols.":void 0}},{key:"downloadDataFilename",get:function(){var e=1===this.selectableSelectedStudyIds.length&&this.treeData.map_studyId_cancerStudy.get(this.selectableSelectedStudyIds[0]),t=this.dict_molecularProfileId_molecularProfile[this.selectedProfileIds[0]];if(!this.forDownloadTab||!e||!t)return"cbioportal-data.txt";var n=this.dict_molecularAlterationType_filenameSuffix[t.molecularAlterationType]||t.molecularAlterationType.toLowerCase();return"cbioportal-".concat(e.studyId,"-").concat(n,".txt")}},{key:"molecularProfilesInStudyCache",get:function(){return new F}},{key:"sampleListsInStudyCache",get:function(){return new Q}}])&&ee(t.prototype,n),a&&ee(t,a),e}();ne([i.observable],ue.prototype,"studiesHaveChangedSinceInitialization",void 0),ne([i.observable],ue.prototype,"deletedVirtualStudies",void 0),ne([i.computed],ue.prototype,"virtualStudiesMap",null),ne([i.computed],ue.prototype,"selectedVirtualStudies",null),ne([i.computed],ue.prototype,"physicalStudyIdsInSelection",null),ne([i.computed],ue.prototype,"stateToSerialize",null),ne([i.computed],ue.prototype,"onlyOneReferenceGenome",null),ne([i.observable],ue.prototype,"forDownloadTab",void 0),ne([i.observable],ue.prototype,"transposeDataMatrix",void 0),ne([i.observable],ue.prototype,"searchText",void 0),ne([i.observable],ue.prototype,"_allSelectedStudyIds",void 0),ne([i.computed],ue.prototype,"allSelectedStudyIds",null),ne([i.computed],ue.prototype,"selectableSelectedStudyIds",null),ne([i.action],ue.prototype,"setStudyIdSelected",null),ne([i.computed],ue.prototype,"defaultSelectedIds",null),ne([i.observable],ue.prototype,"dataTypePriority",void 0),ne([i.observable.ref],ue.prototype,"_selectedProfileIds",void 0),ne([i.computed],ue.prototype,"selectedProfileIds",null),ne([i.observable],ue.prototype,"zScoreThreshold",void 0),ne([i.observable],ue.prototype,"rppaScoreThreshold",void 0),ne([i.observable],ue.prototype,"_selectedSampleListId",void 0),ne([i.computed],ue.prototype,"selectedSampleListId",null),ne([i.observable],ue.prototype,"caseIds",void 0),ne([i.observable],ue.prototype,"_defaultStudySampleMap",void 0),ne([i.observable],ue.prototype,"_caseIdsMode",void 0),ne([i.computed],ue.prototype,"caseIdsMode",null),ne([i.observable],ue.prototype,"_geneQuery",void 0),ne([i.observable],ue.prototype,"rawGenesetQuery",void 0),ne([i.observable],ue.prototype,"geneQueryErrorDisplayStatus",void 0),ne([i.observable],ue.prototype,"genesetQueryErrorDisplayStatus",void 0),ne([i.observable],ue.prototype,"showMutSigPopup",void 0),ne([i.observable],ue.prototype,"showGisticPopup",void 0),ne([i.observable],ue.prototype,"showGenesetsHierarchyPopup",void 0),ne([i.observable],ue.prototype,"showGenesetsVolcanoPopup",void 0),ne([i.observable],ue.prototype,"priorityStudies",void 0),ne([i.observable],ue.prototype,"showSelectedStudiesOnly",void 0),ne([i.observable.shallow],ue.prototype,"selectedCancerTypeIds",void 0),ne([i.observable],ue.prototype,"clickAgainToDeselectSingle",void 0),ne([i.observable],ue.prototype,"searchExampleMessage",void 0),ne([i.observable],ue.prototype,"volcanoPlotSelectedPercentile",void 0),ne([i.observable],ue.prototype,"_maxTreeDepth",void 0),ne([i.computed],ue.prototype,"maxTreeDepth",null),ne([i.computed],ue.prototype,"userLoggedIn",null),ne([i.action],ue.prototype,"setCaseIds",null),ne([g.a],ue.prototype,"getGeneSuggestions",null),ne([g.a],ue.prototype,"getSamplesForStudyAndPatient",null),ne([f.cached],ue.prototype,"treeData",null),ne([i.computed],ue.prototype,"selectedCancerTypes",null),ne([i.computed],ue.prototype,"selectableSelectedStudies",null),ne([i.computed],ue.prototype,"isSingleVirtualStudySelected",null),ne([i.computed],ue.prototype,"isSingleNonVirtualStudySelected",null),ne([i.computed],ue.prototype,"isMultipleNonVirtualStudiesSelected",null),ne([i.computed],ue.prototype,"getOverlappingStudiesMap",null),ne([i.computed],ue.prototype,"isVirtualStudySelected",null),ne([i.computed],ue.prototype,"isVirtualStudyQuery",null),ne([i.computed],ue.prototype,"dataTypePriorityCode",null),ne([i.computed],ue.prototype,"dict_molecularProfileId_molecularProfile",null),ne([i.computed],ue.prototype,"defaultProfilesForOql",null),ne([i.computed],ue.prototype,"defaultMutationProfile",null),ne([i.computed],ue.prototype,"defaultCnaProfile",null),ne([i.computed],ue.prototype,"defaultMrnaProfile",null),ne([i.computed],ue.prototype,"defaultProtProfile",null),ne([i.computed],ue.prototype,"defaultSelectedSampleListId",null),ne([i.computed],ue.prototype,"dict_sampleListId_sampleList",null),ne([i.computed],ue.prototype,"oql",null),ne([i.computed],ue.prototype,"geneIds",null),ne([i.computed],ue.prototype,"genesetIdsQuery",null),ne([i.computed],ue.prototype,"genesetIds",null),ne([i.computed],ue.prototype,"minYVolcanoPlot",null),ne([i.observable],ue.prototype,"map_genesets_selected_volcano",void 0),ne([i.computed],ue.prototype,"volcanoPlotGraphData",null),ne([i.computed],ue.prototype,"submitEnabled",null),ne([i.computed],ue.prototype,"summaryEnabled",null),ne([i.computed],ue.prototype,"hasSelectedStudies",null),ne([i.computed],ue.prototype,"oqlMessages",null),ne([i.computed],ue.prototype,"approxSampleCount",null),ne([i.computed],ue.prototype,"isQueryLimitReached",null),ne([i.computed],ue.prototype,"geneLimit",null),ne([i.computed],ue.prototype,"isMixedReferenceGenome",null),ne([i.computed],ue.prototype,"alterationTypesInOQL",null),ne([i.computed],ue.prototype,"submitError",null),ne([i.computed],ue.prototype,"downloadDataFilename",null),ne([i.action],ue.prototype,"setParamsFromUrl",null),ne([i.action],ue.prototype,"setParamsFromLocalStorage",null),ne([i.action],ue.prototype,"selectCancerType",null),ne([i.action],ue.prototype,"setSearchText",null),ne([i.action],ue.prototype,"clearSelectedCancerType",null),ne([i.action],ue.prototype,"selectMolecularProfile",null),ne([i.action],ue.prototype,"replaceGene",null),ne([i.action],ue.prototype,"replaceGeneset",null),ne([i.action],ue.prototype,"applyGeneSelection",null),ne([i.action],ue.prototype,"addToGenesetSelection",null),ne([i.action],ue.prototype,"applyGenesetSelection",null),ne([i.action],ue.prototype,"submit",null),ne([i.action],ue.prototype,"openSummary",null),ne([f.cached],ue.prototype,"molecularProfilesInStudyCache",null),ne([f.cached],ue.prototype,"sampleListsInStudyCache",null);var ce=Object(b.a)(ue)},function(e,t,n){"use strict";n.d(t,"c",function(){return f}),n.d(t,"d",function(){return h}),n.d(t,"a",function(){return m}),n.d(t,"b",function(){return y});var r=n(2),o=n(575),i=n(603);function a(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":p(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return 0},n=arguments.length>2?arguments[2]:void 0,r=void 0===n||n;return Object(o.c)(e,t,r)}function h(e,t,n){var r=t.toUpperCase(),o=t.toLowerCase();return e.filter(function(e){return n(e,t,r,o)})}var m=function(){function e(t){u(this,e),this.getData=t,this.filterString="",this.dataHighlighter=function(){return!1},this.dataSelector=function(){return!1},this.dataFilter=function(){return!0}}var t,n,r;return t=e,(n=[{key:"setFilter",value:function(e){this.dataFilter=e}},{key:"getFilter",value:function(){return this.dataFilter}},{key:"resetFilter",value:function(){this.dataFilter=function(){return!0},this.filterString=""}},{key:"isHighlighted",value:function(e){return this.dataHighlighter(e)}},{key:"allData",get:function(){return this.getData()}},{key:"sortedData",get:function(){return f(this.allData,this.sortMetric,this.sortAscending)}},{key:"sortedFilteredData",get:function(){return h(this.sortedData,this.filterString,this.dataFilter)}},{key:"sortedFilteredSelectedData",get:function(){return this.sortedFilteredData.filter(this.dataSelector)}},{key:"tableData",get:function(){return e=this.sortedFilteredData,(t=this.sortedFilteredSelectedData).length?t:e;var e,t}},{key:"visibleData",get:function(){return e=this.tableData,t=this.itemsPerPage,n=this.page,t===i.b?e:e.slice(n*t,(n+1)*t);var e,t,n}},{key:"showingAllData",get:function(){return this.tableData.length===this.allData.length}}])&&c(t.prototype,n),r&&c(t,r),e}();d([r.observable],m.prototype,"dataFilter",void 0),d([r.observable],m.prototype,"dataSelector",void 0),d([r.observable],m.prototype,"dataHighlighter",void 0),d([r.observable],m.prototype,"filterString",void 0),d([r.observable],m.prototype,"sortMetric",void 0),d([r.observable],m.prototype,"sortAscending",void 0),d([r.observable],m.prototype,"page",void 0),d([r.observable],m.prototype,"itemsPerPage",void 0),d([r.computed],m.prototype,"allData",null),d([r.computed],m.prototype,"sortedData",null),d([r.computed],m.prototype,"sortedFilteredData",null),d([r.computed],m.prototype,"sortedFilteredSelectedData",null),d([r.computed],m.prototype,"tableData",null),d([r.computed],m.prototype,"visibleData",null),d([r.computed],m.prototype,"showingAllData",null),d([r.action],m.prototype,"setFilter",null),d([r.action],m.prototype,"resetFilter",null);var y=function(e){function t(e){return u(this,t),a(this,s(t).call(this,function(){return e}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,m),t}()},function(e,t,n){"use strict";n.d(t,"g",function(){return l}),n.d(t,"i",function(){return u}),n.d(t,"b",function(){return c}),n.d(t,"h",function(){return p}),n.d(t,"f",function(){return d}),n.d(t,"a",function(){return f}),n.d(t,"e",function(){return h}),n.d(t,"d",function(){return m}),n.d(t,"c",function(){return y});var r=n(0),o=n(652),i=n(4),a=n.n(i),s=n(577);function l(e,t){return t.find(function(t){return a.a.isEqual(t,e)})}function u(e,t){var n=t.filter(function(t){return!a.a.isEqual(t,e)});return n.length===t.length?t.concat([e]):n}function c(e,t){for(var n=[],r=0;r<t;r++)e.includes(r)||n.push(r);return n}function p(e){return r.createElement("span",null,e.ordinal.length>0&&r.createElement(r.Fragment,null,"(",r.createElement("strong",null,e.ordinal),")"),e.name)}function d(e,t){var n=e.map(p);switch(n.length){case 0:return r.createElement("span",null);case 1:return n[0];case 2:return r.createElement("span",null,n[0]," ",t," ",n[1]);default:var o=n.slice(0,n.length-1);return r.createElement("span",null,o.map(function(e){return[e,", "]}),t," ",n[n.length-1])}}function f(e){return 1==e.length?e[0]:a.a.reduce(e.slice(2),function(e,t){return o.interpolateLab(e,t)(.5)},o.interpolateLab(e[0],e[1])(.5))}function h(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=1,r=o.rgb(e);return.299*r.r+.587*r.g+.114*r.b>186&&(n=0),t&&(n+=1),["black","white"][n%2]}function m(e,t,n){var r=a.a.keyBy(e,function(e){return e.uid}),o=[],i=!0,l=!1,u=void 0;try{for(var c,p=t[Symbol.iterator]();!(i=(c=p.next()).done);i=!0){for(var d=c.value,f=r[d[0]].studies,h=1;h<d.length;h++)f=Object(s.A)(f,r[d[h]].studies);var m=!0,y=!1,g=void 0;try{for(var v,b=n[Symbol.iterator]();!(m=(v=b.next()).done);m=!0){var S=v.value;d.includes(S)||(f=Object(s.n)(f,r[S].studies))}}catch(e){y=!0,g=e}finally{try{m||null==b.return||b.return()}finally{if(y)throw g}}o=Object(s.F)(o,f)}}catch(e){l=!0,u=e}finally{try{i||null==p.return||p.return()}finally{if(l)throw u}}return o}function y(e,t,n,r){var o=a.a.keyBy(e,function(e){return e.uid}),i=[],l=!0,u=!1,c=void 0;try{for(var p,d=t[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){for(var f=p.value,h=o[f[0]].studies,m=1;m<f.length;m++)h=Object(s.z)(h,o[f[m]].studies);var y=!0,g=!1,v=void 0;try{for(var b,S=n[Symbol.iterator]();!(y=(b=S.next()).done);y=!0){var _=b.value;f.includes(_)||(h=Object(s.m)(h,o[_].studies))}}catch(e){g=!0,v=e}finally{try{y||null==S.return||S.return()}finally{if(g)throw v}}i=Object(s.E)(i,h)}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}return Object(s.k)(i,r)}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",function(){return i});var o="undefined";function i(e,t){return r(e)===o?t:e}},function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"c",function(){return l}),n.d(t,"b",function(){return u});var r=n(4),o=n(570),i=n(573);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s={"-2":"homdel","-1":"hetloss",0:null,1:"gain",2:"amp"};function l(e){var t;switch(e="string"==typeof e?e.toLowerCase():""){case"missense_mutation":case"missense":case"missense_variant":t="missense";break;case"frame_shift_ins":case"frame_shift_del":case"frameshift":case"frameshift_deletion":case"frameshift_insertion":case"de_novo_start_outofframe":case"frameshift_variant":t="frameshift";break;case"nonsense_mutation":case"nonsense":case"stopgain_snv":t="nonsense";break;case"splice_site":case"splice":case"splice site":case"splicing":case"splice_site_snp":case"splice_site_del":case"splice_site_indel":case"splice_region":t="splice";break;case"translation_start_site":case"start_codon_snp":case"start_codon_del":t="nonstart";break;case"nonstop_mutation":t="nonstop";break;case"fusion":t="fusion";break;case"in_frame_del":case"in_frame_ins":case"in_frame_deletion":case"in_frame_insertion":case"indel":case"nonframeshift_deletion":case"nonframeshift":case"nonframeshift insertion":case"nonframeshift_insertion":t="inframe";break;default:t="other"}return t}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.molecularProfileIdToMolecularProfile=r.keyBy(t,function(e){return e.molecularProfileId})}var t,n,u;return t=e,(n=[{key:"isMutation",value:function(e){return this.molecularAlterationType(e.molecularProfileId)===o.a.MUTATION_EXTENDED}},{key:"gene",value:function(e){return e.gene.hugoGeneSymbol}},{key:"molecularAlterationType",value:function(e){var t=this.molecularProfileIdToMolecularProfile[e];return t&&t.molecularAlterationType}},{key:"cna",value:function(e){return this.molecularAlterationType(e.molecularProfileId)===o.a.COPY_NUMBER_ALTERATION?s[e.value]:null}},{key:"mut_type",value:function(e){return this.isMutation(e)?e.mutationType&&"fusion"===e.mutationType.toLowerCase()?null:e.proteinChange&&"promoter"===e.proteinChange.toLowerCase()?"promoter":l(e.mutationType):null}},{key:"mut_status",value:function(e){return this.isMutation(e)?Object(i.n)(e)?"somatic":"germline":null}},{key:"mut_position",value:function(e){if(this.isMutation(e)){var t=e.proteinPosStart,n=e.proteinPosEnd;return!isNaN(t)&&!isNaN(n)&&-1!==t&&-1!==n&&t<=n?[t,n]:null}return null}},{key:"mut_amino_acid_change",value:function(e){return this.isMutation(e)?e.proteinChange:null}},{key:"exp",value:function(e){return this.molecularAlterationType(e.molecularProfileId)===o.a.MRNA_EXPRESSION?e.value:null}},{key:"prot",value:function(e){return this.molecularAlterationType(e.molecularProfileId)===o.a.PROTEIN_LEVEL?e.value:null}},{key:"fusion",value:function(e){return this.isMutation(e)&&"fusion"===l(e.mutationType)||null}},{key:"is_driver",value:function(e){return this.molecularAlterationType(e.molecularProfileId)===o.a.MUTATION_EXTENDED?!!e.putativeDriver:this.molecularAlterationType(e.molecularProfileId)===o.a.COPY_NUMBER_ALTERATION?!!e.oncoKbOncogenic:null}}])&&a(t.prototype,n),u&&a(t,u),e}()},function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__39rg3",framedImage:"styles-module__framedImage__3ikaJ",Container:"styles-module__Container__2Drra",ChartsPanel:"styles-module__ChartsPanel__1kFpX",Checkboxes:"styles-module__Checkboxes__3JkxF",TableContainer:"styles-module__TableContainer__3OVxd",Checkbox:"styles-module__Checkbox__w95Pc",GeneName:"styles-module__GeneName__1qAkS",DataSet:"styles-module__DataSet__7fRDD",ScatterTooltip:"styles-module__ScatterTooltip__3EYSa",BarTooltip:"styles-module__BarTooltip__1hGLv",BoxTooltip:"styles-module__BoxTooltip__2FA6X",Tendency:"styles-module__Tendency__rxjNz",Significant:"styles-module__Significant__1CIHn",ColoredBackground:"styles-module__ColoredBackground__hGi2k",FlexCheckbox:"styles-module__FlexCheckbox__3iqpB",ChartLoader:"styles-module__ChartLoader__IBVBT",BoxEmpty:"styles-module__BoxEmpty__2g857",BoxPlot:"styles-module__BoxPlot__3hhKs"}},function(e,t,n){"use strict";n.d(t,"b",function(){return S}),n.d(t,"c",function(){return v}),n.d(t,"a",function(){return b}),n.d(t,"g",function(){return P}),n.d(t,"e",function(){return x}),n.d(t,"l",function(){return T}),n.d(t,"f",function(){return k}),n.d(t,"k",function(){return A}),n.d(t,"m",function(){return I}),n.d(t,"h",function(){return D}),n.d(t,"q",function(){return M}),n.d(t,"o",function(){return j}),n.d(t,"p",function(){return N}),n.d(t,"r",function(){return R}),n.d(t,"d",function(){return L}),n.d(t,"j",function(){return G}),n.d(t,"i",function(){return F}),n.d(t,"n",function(){return B});var r=n(0),o=n(580),i=n(4),a=n(570),s=n(622),l=n(684),u=n(599),c=n.n(u),p=n(9),d=n.n(p),f=n(596),h=n(614),m=n(685),y=n(642);function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v,b,S={2:"AMP","-2":"HOMDEL"};function _(e){return r.createElement("div",{style:{display:"flex",alignItems:"center"}},r.createElement(h.a,{text:e,maxLength:20,addTooltip:"never"}))}function w(e,t){return r.createElement("div",{style:{display:"flex",alignItems:"center"}},e,"in",r.createElement(h.a,{text:t,maxLength:20,addTooltip:"never"}))}function E(e){return r.createElement(h.a,{text:e,maxLength:20})}function O(e,t){var n=t.groupsSet[e];return n.alteredCount+" ("+n.alteredPercentage.toFixed(2)+"%)"}function C(e){return 0===e||Math.log10(e)<-10?10:-Math.log10(e)}function P(e,t){return e.filter(function(e){return void 0!==e.pValue&&void 0!==e.qValue&&!t.includes(e.hugoGeneSymbol)}).map(function(e){return{x:Object(o.d)(Number(e.logRatio),10),y:C(e.pValue),hugoGeneSymbol:e.hugoGeneSymbol,pValue:e.pValue,qValue:e.qValue,logRatio:e.logRatio,hovered:!1}})}function x(e,t,n,r){return e.filter(function(e){return void 0!==e.pValue&&void 0!==e.qValue&&!t.includes(e.hugoGeneSymbol)}).map(function(e){return{x:e.groupsSet[n].alteredPercentage,y:e.groupsSet[r].alteredPercentage,hugoGeneSymbol:e.hugoGeneSymbol,pValue:e.pValue,qValue:e.qValue,logRatio:e.logRatio}})}function T(e,t){return e.filter(function(e){return!t.includes(e.hugoGeneSymbol)}).map(function(e){return{x:e.logRatio,y:C(e.pValue),hugoGeneSymbol:e.hugoGeneSymbol,entrezGeneId:e.entrezGeneId,pValue:e.pValue,qValue:e.qValue,logRatio:e.logRatio,hovered:!1}})}function k(e,t,n){return e.map(function(e){var r=i.map(e.counts,function(e){var t=e.alteredCount>0&&e.profiledCount>0?e.alteredCount/e.profiledCount*100:0;return Object.assign(Object.assign({},e),{alteredPercentage:t})}),o=i.keyBy(r,function(e){return e.name}),a=void 0,s=void 0;if(2===n.length){var l=o[n[0].name],u=o[n[1].name];if(void 0!==e.pValue){s=Math.log2(l.alteredPercentage/u.alteredPercentage);var c=n[0].nameOfEnrichmentDirection||n[0].name,p=n[1].nameOfEnrichmentDirection||n[1].name;a=s>0?c:p}}else void 0!==e.pValue&&(r.sort(function(e,t){return t.alteredPercentage-e.alteredPercentage}),a=r[0].name);return{checked:t.includes(e.hugoGeneSymbol),disabled:t.includes(e.hugoGeneSymbol),hugoGeneSymbol:e.hugoGeneSymbol,entrezGeneId:e.entrezGeneId,cytoband:e.cytoband,pValue:e.pValue,qValue:e.qValue,enrichedGroup:a,groupsSet:o,logRatio:s,value:e.value}})}function A(e,t,n){return e.map(function(e){var r="",o=void 0,a=i.keyBy(e.groupsStatistics,function(e){return e.name});if(2===n.length){var s=a[n[0].name],l=a[n[1].name];o=s.meanExpression-l.meanExpression;var u=n[0].nameOfEnrichmentDirection||n[0].name,c=n[1].nameOfEnrichmentDirection||n[1].name;r=o>0?u:c}else r=e.groupsStatistics.sort(function(e,t){return t.meanExpression-e.meanExpression})[0].name;return{checked:t.includes(e.hugoGeneSymbol),disabled:t.includes(e.hugoGeneSymbol),hugoGeneSymbol:e.hugoGeneSymbol,entrezGeneId:e.entrezGeneId,cytoband:e.cytoband,pValue:e.pValue,qValue:e.qValue,enrichedGroup:r,groupsSet:a,logRatio:o}})}function I(e,t,n,r){return e.filter(function(e){var o=!1;return t.forEach(function(t){var n=e.groupsSet[t];if(!n)return!1;var r=n.meanExpression||n.alteredPercentage,a=i.reduce(e.groupsSet,function(e,n,o){if(t!==o){var i=n.meanExpression||n.alteredPercentage;e=e&&r>=i}return e},!0);return a?(o=a,!1):void 0}),n&&e.qValue&&(o=o&&e.qValue<.05),r&&(o=o&&r.includes(e.hugoGeneSymbol)),o})}function D(e){var t,n="";return e.forEach(function(e){var r=e.gene.hugoGeneSymbol;r!=t&&(n+=r+": "),"MUTATION_EXTENDED"===e.alterationType?n+="MUT":"PROTEIN_LEVEL"===e.alterationType?n+="RPPA-"+e.alterationSubType.toUpperCase():n+=e.alterationSubType.toUpperCase(),n+="; ",t=r}),n}function M(e){return i.filter(e,function(e){return e.molecularAlterationType===a.a.MUTATION_EXTENDED})}function j(e){return i.filter(e,function(e){return e.molecularAlterationType===a.a.COPY_NUMBER_ALTERATION&&"DISCRETE"===e.datatype})}function N(e){var t=e.filter(function(e){return e.molecularAlterationType===a.a.MRNA_EXPRESSION});return Object(s.a)(t)}function R(e){var t=e.filter(function(e){return e.molecularAlterationType===a.a.PROTEIN_LEVEL});return Object(s.a)(t)}function L(e,t){var n=[],a=i.keyBy(e,function(e){return e.name}),s={name:t?l.a.TENDENCY:2===e.length?l.a.ENRICHED:l.a.MOST_ENRICHED,render:function(e){var n;if(void 0===e.enrichedGroup||void 0===e.qValue)return r.createElement("span",null,"-");var o=void 0,i=e.qValue<.05;return!t&&i&&(o=a[e.enrichedGroup].color),r.createElement("div",{className:d()(c.a.Tendency,(n={},g(n,c.a.Significant,i),g(n,c.a.ColoredBackground,!!o),n)),style:{backgroundColor:o,color:o&&Object(f.e)(o)}},t?e.enrichedGroup:E(e.enrichedGroup))},filter:function(e,t,n){return(e.enrichedGroup||"").toUpperCase().includes(n)},sortBy:function(e){return e.enrichedGroup||"-"},download:function(e){return e.enrichedGroup||"-"},tooltip:r.createElement("span",null,"The group with the highest alteration frequency")};if(e.length<2)return[];if(2===e.length){var u=e[0],p=e[1];n.push({name:l.a.LOG_RATIO,render:function(e){return r.createElement("span",null,e.logRatio?Object(o.a)(e.logRatio):"-")},tooltip:r.createElement("span",null,"Log2 based ratio of (pct in ",u.name,"/ pct in"," ",p.name,")"),sortBy:function(e){return Number(e.logRatio)},download:function(e){return Object(o.a)(e.logRatio)}}),s.tooltip=r.createElement("table",null,r.createElement("tr",null,r.createElement("td",null,"Log ratio > 0"),r.createElement("td",null,": Enriched in ",u.name)),r.createElement("tr",null,r.createElement("td",null,"Log ratio <= 0"),r.createElement("td",null,": Enriched in ",p.name)),r.createElement("tr",null,r.createElement("td",null,"q-Value < 0.05"),r.createElement("td",null,": Significant association")))}return n.push(s),e.forEach(function(e){n.push({name:e.name,headerRender:_,render:function(t){return r.createElement("span",null,O(e.name,t))},tooltip:r.createElement("span",null,r.createElement("strong",null,e.name,":")," ",e.description),sortBy:function(t){return function(e,t){return t.groupsSet[e].alteredCount}(e.name,t)},download:function(t){return O(e.name,t)}})}),n}function G(e,t){if(e.length<2)return[];var n=[],a=i.keyBy(e,function(e){return e.name}),s={name:t?m.a.TENDENCY:m.a.EXPRESSED,render:function(e){var n;if(void 0===e.pValue)return r.createElement("span",null,"-");var o=void 0,i=e.qValue<.05;return!t&&i&&(o=a[e.enrichedGroup].color),r.createElement("div",{className:d()(c.a.Tendency,(n={},g(n,c.a.Significant,i),g(n,c.a.ColoredBackground,!!o),n)),style:{backgroundColor:o,color:o&&Object(f.e)(o)}},t?e.enrichedGroup:E(e.enrichedGroup))},filter:function(e,t,n){return e.enrichedGroup.toUpperCase().includes(n)},sortBy:function(e){return e.enrichedGroup},download:function(e){return e.enrichedGroup},tooltip:r.createElement("span",null,"The group with the highest expression frequency")};if(2===e.length){var l=e[0],u=e[1];n.push({name:m.a.LOG_RATIO,render:function(e){return r.createElement("span",null,Object(o.a)(e.logRatio))},tooltip:r.createElement("span",null,"Log2 of ratio of (unlogged) mean in ",l.name," to (unlogged) mean in ",u.name),sortBy:function(e){return Number(e.logRatio)},download:function(e){return Object(o.a)(e.logRatio)}}),s.tooltip=r.createElement("table",null,r.createElement("tr",null,r.createElement("td",null,"Log ratio > 0"),r.createElement("td",null,": Enriched in ",l.name)),r.createElement("tr",null,r.createElement("td",null,"Log ratio <= 0"),r.createElement("td",null,": Enriched in ",u.name)),r.createElement("tr",null,r.createElement("td",null,"q-Value < 0.05"),r.createElement("td",null,": Significant association")))}return n.push(s),e.forEach(function(e){n.push({name:e.name,headerRender:function(e){return w("",e)},render:function(t){return r.createElement("span",null,t.groupsSet[e.name]?t.groupsSet[e.name].meanExpression.toFixed(2):y.a.NA)},tooltip:r.createElement("span",null,"Mean log2 expression of the listed gene in"," ",e.description),sortBy:function(t){return t.groupsSet[e.name].meanExpression},download:function(t){return t.groupsSet[e.name].meanExpression.toFixed(2)},uniqueName:e.name+m.a.MEAN_SUFFIX}),n.push({name:e.name,headerRender:function(e){return w("",e)},render:function(t){return r.createElement("span",null,t.groupsSet[e.name]?t.groupsSet[e.name].standardDeviation.toFixed(2):"NA")},tooltip:r.createElement("span",null,"Standard deviation of log2 expression of the listed gene in"," ",e.description),sortBy:function(t){return t.groupsSet[e.name].standardDeviation},download:function(t){return t.groupsSet[e.name].standardDeviation.toFixed(2)},uniqueName:e.name+m.a.STANDARD_DEVIATION_SUFFIX})}),n}function F(e,t){var n={};if(i.isEmpty(t))return[];var r=i.reduce(t,function(t,r){var o=e[r];return o&&i.each(o.groupsSet,function(e){var i=e.name;t[i]||(t[i]={});var a=r+(o.qValue&&o.qValue<.05?"*":"");t[i][a]=e.alteredPercentage,n[a]=!0}),t},{}),o={};return i.forEach(n,function(e,t){var n=0;i.forEach(r,function(e){e[t]=e[t]||0,n+=e[t]}),o[t]=n}),i.map(r,function(e,t){return{minorCategory:t,counts:i.map(e,function(e,t){var n=e/o[t]*100;return{majorCategory:t,count:e,percentage:parseFloat(n.toFixed(2))}})}})}function B(e,t){if(i.isEmpty(e))return[{label:v.USER_DEFINED_OPTION,genes:[]}];var n=e;t&&(n=i.map(n,function(e){return Object.assign(Object.assign({},e),{optionName:e.hugoGeneSymbol+": ".concat(S[e.value])})}));var r=i.clone(n).sort(function(e,t){var n=i.reduce(e.groupsSet,function(e,t){return e=t.alteredPercentage>e?t.alteredPercentage:e},0);return i.reduce(t.groupsSet,function(e,t){return e=t.alteredPercentage>e?t.alteredPercentage:e},0)-n}),o=i.clone(n).sort(function(e,t){var n=i.sumBy(i.values(e.groupsSet),function(e){return e.alteredPercentage})/i.keys(e.groupsSet).length;return i.sumBy(i.values(t.groupsSet),function(e){return e.alteredPercentage})/i.keys(t.groupsSet).length-n}),a=i.clone(n).sort(function(e,t){return void 0!==e.pValue&&void 0!==t.pValue?0:void 0!==e.pValue?1:void 0!==t.pValue?-1:Number(e.pValue)-Number(t.pValue)});return[{label:v.USER_DEFINED_OPTION,genes:[]},{label:v.HIGHEST_FREQUENCY,genes:i.map(r,function(e){return e.optionName||e.hugoGeneSymbol})},{label:v.AVERAGE_FREQUENCY,genes:i.map(o,function(e){return e.optionName||e.hugoGeneSymbol})},{label:v.SIGNIFICANT_P_VALUE,genes:i.map(a,function(e){return e.optionName||e.hugoGeneSymbol})},{label:v.SYNC_WITH_TABLE,genes:[]}]}!function(e){e.USER_DEFINED_OPTION="User-defined genes",e.HIGHEST_FREQUENCY="Genes with highest frequency in any group",e.AVERAGE_FREQUENCY="Genes with highest average frequency",e.SIGNIFICANT_P_VALUE="Genes with most significant p-value",e.SYNC_WITH_TABLE="Sync with table (up to 100 genes)"}(v||(v={})),function(e){e.MUTATION="MUTATION",e.COPY_NUMBER="COPY_NUMBER"}(b||(b={}))},function(e,t,n){"use strict";n.d(t,"q",function(){return l}),n.d(t,"p",function(){return u}),n.d(t,"a",function(){return p}),n.d(t,"g",function(){return d}),n.d(t,"n",function(){return f}),n.d(t,"l",function(){return h}),n.d(t,"o",function(){return m}),n.d(t,"h",function(){return g}),n.d(t,"i",function(){return v}),n.d(t,"j",function(){return b}),n.d(t,"k",function(){return S}),n.d(t,"b",function(){return _}),n.d(t,"f",function(){return w}),n.d(t,"c",function(){return C}),n.d(t,"e",function(){return x}),n.d(t,"d",function(){return T}),n.d(t,"m",function(){return k});var r=n(854),o=n(632),i=n.n(o),a=n(4),s={OS:"DECEASED",PFS:"Progressed",DFS:"Recurred/Progressed",DSS:"DECEASED"},l={OS:"Time of Death",PFS:"Time of Death",DFS:"Time of relapse",DSS:"Time of Death"},u={OS:1,DFS:2,PFS:3,DSS:4},c=new Set(["[not applicable]","[not available]","[pending]","[discrepancy]","[completed]","[null]","","na"]),p=999;function d(e){var t=[],n=1;return e.forEach(function(r,o){if(r.status){var i=e.length-o,a=n*((i-1)/i);n=a,t.push(a)}else t.push(n)}),t}function f(e,t){var n=function(e){var t=e.split(":").map(function(e){return e.trim()}),n=void 0,r=void 0;return 2===t.length?(n=t[0],r=t[1]):r=t[0],{status:n,label:r}}(e);return!!n.status&&"1"===n.status}function h(e,t){var n="Event";return e in s?n=s[e]:a.forEach(t,function(e){var t=e.split(":");if(2==t.length&&"1"===t[0])return n=t[1],!1}),a.startCase(a.toLower(n))}function m(e){return c.has(e.trim().toLowerCase())}function y(e,t){for(var n="NA",r=0;r<t.length;r++)if(t[r]<=.5){n=e[r].months.toFixed(2);break}return n}function g(e,t){var n=[];return n.push({x:0,y:100}),e.forEach(function(e,r){n.push({x:e.months,y:100*t[r]})}),n}function v(e,t,n){return e.map(function(e,r){var o={x:e.months,y:100*t[r],patientId:e.patientId,studyId:e.studyId,uniquePatientKey:e.uniquePatientKey,status:e.status};return n&&(o.group=n),o})}function b(e,t,n){var r,o=v(e,t,n),i=[];return e.forEach(function(e,n){var a=t[n],s=1;r&&a!==r&&(s=0),r=a,i.push(Object.assign(Object.assign({},o[n]),{opacity:s}))}),i}function S(e,t){return e&&t?[e.length,e.filter(function(e){return!0===e.status}).length,y(e,t)]:[0,0,"N/A"]}function _(e,t){for(var n=0,r=0,o=0,a=0,s=0;n<e.length&&r<t.length;){var l=0,u=0,c=e.length-n,p=t.length-r,d=e[n],f=t[r];(d.months<f.months||d.months===f.months)&&(d.status&&(l=1),n+=1),(d.months>f.months||d.months===f.months)&&(f.status&&(u=1),r+=1);var h=l+u,m=c+p;o+=l,a+=c/m*h,s+=h*(m-h)*c*p/(m*m*(m-1))}var y=(o-a)*(o-a)/s;return 1-i.a.chisquare.cdf(y,1)}function w(e,t){var n=t,o=!0,i=!1,a=void 0;try{for(var s,l=e[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var u=s.value;n+="\n\n",n+=u.title,n+="\n",n+=Object(r.a)(E(u.scatterData))}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}return n}function E(e){var t=[];return e.map(function(n,r){t.push({"Case ID":n.patientId,"Study ID":n.studyId,"Number at Risk":e.length-r,Status:n.status?"deceased":"censored","Survival Rate":n.y/100,"Time (months)":n.x})}),t}function O(e,t){var n=a.maxBy(e,"x"),r=a.minBy(e,"x"),o=a.maxBy(e,"y"),i=a.minBy(e,"y");if(t.xDenominator<=0||t.yDenominator<=0)return e;var s=((n?n.x:0)-(r?r.x:0))/t.xDenominator,l=((o?o.y:0)-(i?i.y:0))/t.yDenominator,u=Math.hypot(s,l),c={x:0,y:0},p={x:0,y:0};return e.filter(function(e,t){var n=a.isUndefined(e.opacity)||e.opacity>0;if(0==t)return p.x=e.x,p.y=e.y,c.x=e.x,c.y=e.y,!0;return(n?Math.hypot(e.x-c.x,e.y-c.y):Math.hypot(e.x-p.x,e.y-p.y))>u&&(p.x=e.x,p.y=e.y,n&&(c.x=e.x,c.y=e.y),!0)})}function C(e,t,n){var r=a.cloneDeep(e);return a.forEach(r,function(e){e.numOfCases>n.threshold&&(t&&(e.scatter=e.scatter.filter(function(e){return P(t,e)}),e.scatterWithOpacity=e.scatterWithOpacity.filter(function(e){return P(t,e)})),e.scatter=O(e.scatter,n),e.scatterWithOpacity=O(e.scatterWithOpacity,n),e.numOfCases=e.scatter.length)}),r}function P(e,t){return t.x<=e.x[1]&&t.x>=e.x[0]&&t.y<=e.y[1]&&t.y>=e.y[0]}function x(e){return e.replace(/status|survival/gi,"")}function T(e){var t=e.replace(/status/gi,"");return/survival/i.test(t)?t:"".concat(t," Survival")}function k(e){return a.chain(e).map(function(e){return e.clinicalAttributeId}).filter(function(e){return/_STATUS$/i.test(e)||/_MONTHS$/i.test(e)}).uniq().value()}},function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"c",function(){return u}),n.d(t,"d",function(){return c}),n.d(t,"b",function(){return f});var r=n(0),o=n.n(r),i=n(4),a=n.n(i),s=n(3),l={grch37:{NCBI:"GRCh37",UCSC:"hg19"},grch38:{NCBI:"GRCh38",UCSC:"hg38"}};function u(e){var t=a.a.every(e,function(e){return p(e.referenceGenome)}),n=a.a.every(e,function(e){return d(e.referenceGenome)});return!(t||n)}function c(){return o.a.createElement(s.c,{placement:"right",overlay:o.a.createElement("div",null,"You are combining studies with molecular data based on both GRCh37/hg19 and GRCh38/hg38. This is not fully supported yet. Please double check your findings"),destroyTooltipOnHide:!0},o.a.createElement("i",{className:"banner-icon fa fa-md fa-exclamation-triangle",style:{verticalAlign:"middle !important",marginLeft:6}}))}function p(e){return l.grch37.NCBI.match(new RegExp(e,"i"))||l.grch37.UCSC.match(new RegExp(e,"i"))}function d(e){return l.grch38.NCBI.match(new RegExp(e,"i"))||l.grch38.UCSC.match(new RegExp(e,"i"))}function f(e){return p(e)?l.grch37.NCBI+"/"+l.grch37.UCSC:d(e)?l.grch38.NCBI+"/"+l.grch38.UCSC:void 0}},function(e,t,n){"use strict";n.d(t,"b",function(){return v}),n.d(t,"a",function(){return b});var r=n(0),o=n(56),i=n(717),a=n.n(i),s=n(17),l=n(7),u=n(9),c=n.n(u),p=n(3);function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var g=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":y(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},v=-1,b=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=f(t).call(this,e))||"object"!==y(o)&&"function"!=typeof o?h(r):o).handleChangeItemsPerPage=n.handleChangeItemsPerPage.bind(h(n)),n.resetItemsPerPage=n.resetItemsPerPage.bind(h(n)),n.jumpToPage=n.jumpToPage.bind(h(n)),n.handleShowMore=n.handleShowMore.bind(h(n)),n.getSectionBetweenPaginationButtons=n.getSectionBetweenPaginationButtons.bind(h(n)),n}var n,i,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,r["Component"]),n=t,(i=[{key:"jumpToPage",value:function(e){this.props.onChangeCurrentPage&&this.props.onChangeCurrentPage(parseInt(e,10))}},{key:"handleChangeItemsPerPage",value:function(e){this.props.onChangeItemsPerPage&&this.props.onChangeItemsPerPage(parseInt(e.target.value,10))}},{key:"handleShowMore",value:function(){if(this.props.itemsPerPageOptions&&this.props.itemsPerPageOptions.length>0&&this.props.itemsPerPage&&this.props.onChangeItemsPerPage){var e=this.props.itemsPerPageOptions.indexOf(this.props.itemsPerPage);e>-1&&e<this.props.itemsPerPageOptions.length-1?this.props.onChangeItemsPerPage(this.props.itemsPerPageOptions[e+1]):this.props.onChangeItemsPerPage(this.props.itemsPerPage+this.props.itemsPerPageOptions[this.props.itemsPerPageOptions.length-1])}}},{key:"resetItemsPerPage",value:function(){this.props.onChangeItemsPerPage&&this.props.itemsPerPageOptions&&this.props.itemsPerPageOptions.length>0&&this.props.onChangeItemsPerPage(this.props.itemsPerPageOptions[0])}},{key:"getSectionBetweenPaginationButtons",value:function(){return this.props.showMoreButton?r.createElement(o.Button,{id:"showMoreButton",bsSize:"sm",disabled:!this.props.itemsPerPageOptions||!this.props.itemsPerPage||!this.props.totalItems||this.props.itemsPerPage>=this.props.totalItems,onClick:this.handleShowMore,style:{width:200},bsStyle:this.props.bsStyle},"Show more"):r.createElement("span",{key:"textBetweenButtons",className:c()("btn","btn-sm","btn-default","textBetweenButtons","disabled",a.a["default-cursor"]),style:{cursor:"default",color:"black"}},r.createElement(s.If,{condition:this.props.pageNumberEditable},r.createElement(p.e,{className:a.a["page-number-input"],value:this.props.currentPage+"",setValue:this.jumpToPage,maxChars:6,numericOnly:!0})),this.props.textBetweenButtons)}},{key:"render",value:function(){var e=(this.props.itemsPerPageOptions||[]).map(function(e){return r.createElement("option",{key:e,value:e+""},e)});this.props.showAllOption&&e.push(r.createElement("option",{key:"all",value:v+""},"all"));var t=[r.createElement(s.If,{condition:!!this.props.showFirstPage},r.createElement(o.Button,{key:"firstPageBtn",bsSize:"sm",disabled:!!this.props.firstPageDisabled,onClick:this.props.onFirstPageClick,className:c()(this.props.groupButtons?void 0:a.a["margin-right-button"]),bsStyle:this.props.bsStyle},this.props.firstButtonContent)),r.createElement(o.Button,{className:c()("prevPageBtn",this.props.groupButtons?void 0:a.a["margin-right-button"]),key:"prevPageBtn",bsSize:"sm",disabled:!!this.props.previousPageDisabled,onClick:this.props.onPreviousPageClick,bsStyle:this.props.bsStyle},this.props.previousButtonContent),this.getSectionBetweenPaginationButtons(),r.createElement(o.Button,{className:c()("nextPageBtn",this.props.groupButtons?void 0:a.a["margin-left-button"]),key:"nextPageBtn",bsSize:"sm",disabled:!!this.props.nextPageDisabled,onClick:this.props.onNextPageClick,bsStyle:this.props.bsStyle},this.props.nextButtonContent),r.createElement(s.If,{condition:!!this.props.showLastPage},r.createElement(o.Button,{key:"lastPageBtn",bsSize:"sm",disabled:!!this.props.lastPageDisabled,onClick:this.props.onLastPageClick,className:c()(this.props.groupButtons?void 0:a.a["margin-left-button"]),bsStyle:this.props.bsStyle},this.props.lastButtonContent)),r.createElement(s.If,{condition:!!this.props.showMoreButton},r.createElement(o.Button,{id:"resetItemsPerPageButton",bsStyle:"link",bsSize:"sm",className:this.props.itemsPerPage&&this.props.itemsPerPageOptions&&this.props.itemsPerPageOptions.length>0&&this.props.itemsPerPage>this.props.itemsPerPageOptions[0]?void 0:a.a["hidden-button"],onClick:this.resetItemsPerPage},"Reset"))];return t=this.props.groupButtons?r.createElement(o.ButtonGroup,{style:{float:"none"}},t):r.createElement("div",{style:{float:"none"}},t),this.shouldHidePaginationControls&&(t=null),r.createElement("div",{className:c()(a.a.paginationControls,this.props.className),style:this.props.style},r.createElement("span",{style:{fontSize:12,marginRight:10}},this.props.textBeforeButtons),t,r.createElement(s.If,{condition:!!this.props.showItemsPerPageSelector&&!this.shouldHidePaginationControls},r.createElement(o.FormGroup,{bsSize:"sm",className:a.a["form-select"]},r.createElement(o.FormControl,{className:"itemsPerPageSelector",componentClass:"select",value:this.props.itemsPerPage,onChange:this.handleChangeItemsPerPage},e))))}},{key:"shouldHidePaginationControls",get:function(){return this.props.hidePaginationIfOnePage&&this.props.itemsPerPageOptions&&void 0!==this.props.totalItems&&this.props.itemsPerPageOptions[0]>=this.props.totalItems}}])&&d(n.prototype,i),l&&d(n,l),t}();b.defaultProps={itemsPerPage:v,itemsPerPageOptions:[10,25,50,100],showAllOption:!0,textBeforeButtons:"",textBetweenButtons:"text btwn buttons",firstButtonContent:r.createElement("i",{className:"fa fa-angle-double-left"}),previousButtonContent:r.createElement("i",{className:"fa fa-angle-left"}),nextButtonContent:r.createElement("i",{className:"fa fa-angle-right"}),lastButtonContent:r.createElement("i",{className:"fa fa-angle-double-right"}),showItemsPerPageSelector:!0,showFirstPage:!1,showLastPage:!1,className:"",style:{},previousPageDisabled:!1,nextPageDisabled:!1,pageNumberEditable:!1,showMoreButton:!0,groupButtons:!0,hidePaginationIfOnePage:!0,bsStyle:"default"};b=g([l.observer],b)},function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"c",function(){return u}),n.d(t,"d",function(){return c}),n.d(t,"b",function(){return d});var r=n(570),o=n(178),i=n(4),a=n.n(i),s=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},l="NA";function u(e){return s(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,o,i,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.filter(function(e){return e.molecularAlterationType===r.a.GENERIC_ASSAY}),o=a.a.groupBy(n,"genericAssayType"),i=a.a.keys(o),s={},t.next=6,Promise.all(i.map(function(e){return p(a.a.map(o[e],function(e){return e.molecularProfileId})).then(function(t){s[e]=t})}));case 6:return t.abrupt("return",s);case 7:case"end":return t.stop()}},t)}))}function c(e){return s(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.filter(function(e){return e.molecularAlterationType===r.a.GENERIC_ASSAY}),o={},t.next=4,Promise.all(n.map(function(e){return p([e.molecularProfileId]).then(function(t){o[e.molecularProfileId]=t})}));case 4:return t.abrupt("return",o);case 5:case"end":return t.stop()}},t)}))}function p(e){return e.length>0?o.a.fetchGenericAssayMetaDataUsingPOST({genericAssayMetaFilter:{molecularProfileIds:e}}):Promise.resolve([])}function d(e,t){return s(this,void 0,void 0,regeneratorRuntime.mark(function n(){var r,i,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.a.map(e,function(e,n){return{molecularProfileId:n,genericAssayDataFilter:Object.assign({genericAssayStableIds:e},t[n])}}),i=r.map(function(e){return o.a.fetchGenericAssayDataInMolecularProfileUsingPOST(e)}),n.next=4,Promise.all(i);case 4:return s=n.sent,n.abrupt("return",s);case 6:case"end":return n.stop()}},n)}))}},function(e,t,n){"use strict";n.d(t,"a",function(){return w}),n.d(t,"b",function(){return E});var r=n(0),o=n(4),i=n(9),a=n.n(i),s=(n(666),n(8)),l=n(101),u=n(2),c=n(7),p=n(649);function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}function m(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var S=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},_=function(e){function t(){var e;return d(this,t),(e=m(this,y(t).apply(this,arguments))).renderedOnce=!1,e}return g(t,r["Component"]),h(t,[{key:"render",value:function(){var e=this;return this.renderedOnce||setTimeout(function(){return e.renderedOnce=!0}),r.createElement("div",{className:this.props.className},this.renderedOnce&&this.props.children,!this.renderedOnce&&(this.props.loadingState||null))}}]),t}();S([u.observable],_.prototype,"renderedOnce",void 0),_=S([c.observer],_);var w=function(e){function t(){return d(this,t),m(this,y(t).apply(this,arguments))}return g(t,r["Component"]),h(t,[{key:"componentDidMount",value:function(){this.props.onTabDidMount&&this.props.onTabDidMount(this.div)}},{key:"componentWillUnmount",value:function(){this.props.onTabUnmount&&this.props.onTabUnmount(this.div)}},{key:"assignRef",value:function(e){this.div=e}},{key:"render",value:function(){var e=this;return r.createElement("div",{ref:function(t){return e.div=t},className:a()({"msk-tab":!0,hiddenByPosition:!!this.props.inactive},this.props.className)},this.props.children)}}]),t}();S([s.default],w.prototype,"assignRef",null);var E=function(e){function t(e){var n;return d(this,t),(n=m(this,y(t).call(this,e))).shownTabs=[],n.tabRefs=[],n.tabIdToNavTabWidth={},n.needToRecomputeNavTabWidths=!0,n.tabClickHandlers=Object(p.a)(function(e,t){e.preventDefault(),n.setActiveTab(t.id,t.datum)}),n.state={currentPage:1,pageBreaks:[]},n}return g(t,r["Component"]),h(t,[{key:"cloneTab",value:function(e,t,n){return n?r.cloneElement(e,{inactive:t},this.props.loadingComponent):r.cloneElement(e,{inactive:t})}},{key:"setActiveTab",value:function(e,t){this.props.onTabClick&&this.props.onTabClick(e,t)}},{key:"navTabsRefHandler",value:function(e){this.navTabsRef=e}},{key:"tabRefHandler",value:function(e,t){e&&t&&this.tabRefs.push({id:e,element:t})}},{key:"nextPage",value:function(){this.setState({currentPage:this.state.currentPage+1})}},{key:"prevPage",value:function(){this.setState({currentPage:this.state.currentPage-1})}},{key:"render",value:function(){var e=this;if(this.props.children&&r.Children.count(this.props.children)){var t,n=this.props.children,i=r.Children.toArray(n),s=e.props.activeTabId&&o.some(i,function(t){return t.props.id===e.props.activeTabId})?e.props.activeTabId:i[0].props.id;return t=o.reduce(i,function(t,n){return n.props.hide||(n.props.id===s?(e.shownTabs.push(n.props.id),t.push(e.cloneTab(n,!1))):(!1===n.props.unmountOnHide||void 0===n.props.unmountOnHide&&!1===e.props.unmountOnHide)&&o.includes(e.shownTabs,n.props.id)&&t.push(e.cloneTab(n,!0))),t},[]),r.createElement("div",{id:this.props.id?this.props.id:"",className:a()("msk-tabs","posRelative",this.props.className)},this.navTabs(n,s),r.createElement(_,{className:"tab-content",loadingState:r.createElement(l.a,{isLoading:!0,center:!0,size:"big"})},t))}return null}},{key:"navTabs",value:function(e,t){this.tabRefs=[];var n=this.tabPages(e,t),o=this.state.pageBreaks.length+1,i=this.state.currentPage>1?r.createElement("li",{key:"prevPage",style:{cursor:"pointer"}},r.createElement("a",{onClick:this.prevPage.bind(this)},r.createElement("i",{className:"fa fa-chevron-left",style:this.props.arrowStyle}))):null,s=this.state.currentPage<o?r.createElement("li",{key:"nextPage",style:{cursor:"pointer"}},r.createElement("a",{onClick:this.nextPage.bind(this)},r.createElement("i",{className:"fa fa-chevron-right",style:this.props.arrowStyle}))):null,l=this.props.tabButtonStyle||"tabs";return r.createElement("ul",{ref:this.navTabsRefHandler.bind(this),className:a()("nav","nav-".concat(l))},i,n[this.state.currentPage-1],s)}},{key:"tabPages",value:function(e,t){var n=this,o=[[]],i=1;return r.Children.forEach(e,function(e){if(e&&!e.props.hide){var s=t===e.props.id?"active":"";n.props.getPaginationWidth&&n.state.pageBreaks.length>0&&n.state.pageBreaks[i-1]===e.props.id&&(o[++i-1]=[]);var l=null;if(e.props.onClickClose){var u=e.props.onClickClose;l=r.createElement("div",{className:"closeButton",onClick:function(t){t.stopPropagation(),u(e.props.id)}},r.createElement("i",{className:"fa fa-md fa-times-circle"}))}o[i-1].push(r.createElement("li",{key:e.props.id,style:{cursor:"pointer"},ref:n.tabRefHandler.bind(n,e.props.id),className:s},r.createElement("a",{className:a()("tabAnchor","tabAnchor_".concat(e.props.id),e.props.anchorClassName),onClick:n.tabClickHandlers(e.props),href:n.props.getTabHref&&n.props.getTabHref(e.props.id),style:e.props.anchorStyle},e.props.linkText,l)))}}),o}},{key:"componentWillReceiveProps",value:function(e){o.isEqual(t.getVisibleTabIds(e.children),t.getVisibleTabIds(this.props.children))||(this.needToRecomputeNavTabWidths=!0)}},{key:"componentDidMount",value:function(){var e=this;this.computeNavTabWidths(),this.needToRecomputeNavTabWidths=!1,this.widthReaction=Object(u.autorun)(function(){e.props.getPaginationWidth&&(e.props.getPaginationWidth(),e.initPaging())})}},{key:"componentWillUnmount",value:function(){this.widthReaction()}},{key:"componentDidUpdate",value:function(){this.needToRecomputeNavTabWidths&&(this.computeNavTabWidths(),this.needToRecomputeNavTabWidths=!1,this.initPaging())}},{key:"computeNavTabWidths",value:function(){var e=this;o.each(this.tabRefs,function(t){e.tabIdToNavTabWidth[t.id]=t.element.offsetWidth}),window.test=this.tabIdToNavTabWidth}},{key:"initPaging",value:function(){if(this.props.getPaginationWidth){var e=this.findPageBreaks(),t=this.findCurrentPage(e);this.setState({currentPage:t,pageBreaks:e})}}},{key:"findCurrentPage",value:function(e){var t=this,n=1,r=!1;return this.props.activeTabId&&e.length>0&&o.each(this.tabRefs,function(o){if(o.id===e[n-1]&&n++,o.id===t.props.activeTabId)return r=!0,!1}),r?n:1}},{key:"findPageBreaks",value:function(){var e=this,t=[];if(this.needToRecomputeNavTabWidths)return[];var n=this.props.getPaginationWidth&&this.props.getPaginationWidth()||0;if(n>0){var o=0;r.Children.forEach(this.props.children,function(r,i){if(r&&r.props.id in e.tabIdToNavTabWidth&&(o+=e.tabIdToNavTabWidth[r.props.id],0!==i)){o>n-50&&(t.push(r.props.id),o=e.tabIdToNavTabWidth[r.props.id])}})}return t}}],[{key:"getVisibleTabIds",value:function(e){return r.Children.map(e,function(e){return e&&!e.props.hide?e.props.id:null}).filter(function(e){return null!==e})}}]),t}();E.defaultProps={unmountOnHide:!0,loadingComponent:r.createElement(l.a,{isLoading:!0,center:!0,size:"big"})},S([s.default],E.prototype,"initPaging",null)},function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return u}),n.d(t,"d",function(){return p});var r,o,i,a=n(6),s=n(4);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e.PIE_CHART="PIE_CHART",e.BAR_CHART="BAR_CHART",e.SURVIVAL="SURVIVAL",e.TABLE="TABLE",e.SCATTER="SCATTER",e.MUTATED_GENES_TABLE="MUTATED_GENES_TABLE",e.FUSION_GENES_TABLE="FUSION_GENES_TABLE",e.CNA_GENES_TABLE="CNA_GENES_TABLE",e.GENOMIC_PROFILES_TABLE="GENOMIC_PROFILES_TABLE",e.CASE_LIST_TABLE="CASE_LIST_TABLE",e.NONE="NONE"}(o||(o={})),function(e){e.PIE_CHART="pie chart",e.BAR_CHART="bar chart",e.SURVIVAL="survival plot",e.TABLE="table",e.SCATTER="density plot",e.MUTATED_GENES_TABLE="table",e.FUSION_GENES_TABLE="table",e.CNA_GENES_TABLE="table",e.GENOMIC_PROFILES_TABLE="table",e.CASE_LIST_TABLE="table",e.NONE="none"}(i||(i={}));var u="Freq",c={alwaysShownClinicalAttributes:["CANCER_TYPE","CANCER_TYPE_DETAILED"],defaultPriority:1,tableAttrs:["CANCER_TYPE","CANCER_TYPE_DETAILED"],initialBins:{MSI_SCORE:[1,2,5,10,30]},priority:{CANCER_TYPE:3e3,CANCER_TYPE_DETAILED:2e3,GENOMIC_PROFILES_SAMPLE_COUNT:1e3,CASE_LISTS_SAMPLE_COUNT:1e3,OS_SURVIVAL:400,DFS_SURVIVAL:300,DSS_SURVIVAL:250,PFS_SURVIVAL:250,MUTATION_COUNT_CNA_FRACTION:200,MUTATED_GENES_TABLE:90,FUSION_GENES_TABLE:85,CNA_GENES_TABLE:80,CANCER_STUDIES:70,SEQUENCED:60,HAS_CNA_DATA:50,SAMPLE_COUNT:40,MUTATION_COUNT:30,FRACTION_GENOME_ALTERED:20,GENDER:9,SEX:9,AGE:9,RACE:8,ETHNICITY:8,SAMPLE_TYPE:8,HISTOLOGY:8,TUMOR_TYPE:8,SUBTYPE:8,TUMOR_SITE:8},thresholds:{pieToTable:20,piePadding:20,barRatio:.8,rowsInTableForOneGrid:4,clinicalCharts:20,chartHighlight:1e4},layout:{layout:[],cols:6,grid:{w:195,h:170},gridMargin:{x:5,y:5},dimensions:(r={},l(r,o.PIE_CHART,{w:1,h:1}),l(r,o.BAR_CHART,{w:2,h:1}),l(r,o.SCATTER,{w:2,h:2}),l(r,o.TABLE,{w:2,h:2}),l(r,o.SURVIVAL,{w:1,h:1}),l(r,o.MUTATED_GENES_TABLE,{w:2,h:2}),l(r,o.FUSION_GENES_TABLE,{w:2,h:2}),l(r,o.CNA_GENES_TABLE,{w:2,h:2}),l(r,o.GENOMIC_PROFILES_TABLE,{w:2,h:2}),l(r,o.CASE_LIST_TABLE,{w:2,h:2}),l(r,o.NONE,{w:0,h:0}),r)},colors:{theme:{primary:"#2986E2",secondary:"#DC3912",tertiary:"#f88508",quaternary:"#109618",unselectedGroup:"#2986E2",selectedGroup:"#DC3912",clinicalFilterTitle:"#A9A9A9",clinicalFilterContent:"#2986E2"}}},p=s.assign(c,a.b.serverConfig.study_view)},function(e,t,n){"use strict";n.d(t,"b",function(){return u}),n.d(t,"a",function(){return d});var r=n(4),o=n.n(r),i=n(640),a=n.n(i),s=n(3),l=n(576);function u(e,t){return Object(s.fb)(e,t,l.b.fontFamily,l.b.fontSize+"px")}function c(e){for(var t="",n=0;n<e;n++)t+="0";return t}function p(e,t){for(var n=0,r="";n<3;){if(r=t(n),o.a.uniq(e.map(function(e){return a()(e).format(r)})).length===e.length)break;n++}return r}function d(e,t,n){return n&&(e=n(e),t=t.map(n)),e>=1e3?a()(e).format(function(e){return p(e=e.filter(function(e){return Math.abs(e)>=1e3}),function(e){return"0.[".concat(c(e),"]a")})}(t)):a()(e).format(function(e){return p(e=e.filter(function(e){return Math.abs(e)<1e3}),function(e){return"0.[".concat(c(e),"]")})}(t))}},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n(0),o=n(691),i=n.n(o),a=n(9),s=n.n(a);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=p(this,d(t).apply(this,arguments))).handleInputRef=function(t){e.input=t,e.props.inputProps&&"function"==typeof e.props.inputProps.ref&&e.props.inputProps.ref(t)},e}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){this.input.indeterminate=!!this.props.indeterminate}},{key:"componentDidUpdate",value:function(){this.input.indeterminate=!!this.props.indeterminate}},{key:"render",value:function(){var e=this.props.labelProps&&this.props.labelProps.className,t=s()(i.a.labeledCheckbox,e);return r.createElement("label",u({className:t},this.props.labelProps),r.createElement("input",u({type:this.props.inputProps&&this.props.inputProps.type||"checkbox",checked:this.props.checked,onChange:this.props.onChange,disabled:this.props.disabled},this.props.inputProps,{ref:this.handleInputRef})),this.props.children)}}])&&c(n.prototype,o),a&&c(n,a),t}()},function(e,t,n){e.exports=n(16)(1037)},function(e,t,n){"use strict";n.d(t,"a",function(){return O}),n.d(t,"c",function(){return C}),n.d(t,"m",function(){return P}),n.d(t,"l",function(){return T}),n.d(t,"n",function(){return k}),n.d(t,"N",function(){return A}),n.d(t,"b",function(){return I}),n.d(t,"d",function(){return D}),n.d(t,"f",function(){return M}),n.d(t,"e",function(){return j}),n.d(t,"g",function(){return N}),n.d(t,"x",function(){return q}),n.d(t,"w",function(){return U}),n.d(t,"r",function(){return H}),n.d(t,"L",function(){return X}),n.d(t,"J",function(){return Z}),n.d(t,"B",function(){return re}),n.d(t,"O",function(){return oe}),n.d(t,"o",function(){return ie}),n.d(t,"i",function(){return ae}),n.d(t,"I",function(){return he}),n.d(t,"y",function(){return ge}),n.d(t,"S",function(){return ve}),n.d(t,"G",function(){return Ae}),n.d(t,"Q",function(){return De}),n.d(t,"P",function(){return Me}),n.d(t,"R",function(){return Re}),n.d(t,"K",function(){return Le}),n.d(t,"k",function(){return Ge}),n.d(t,"A",function(){return Fe}),n.d(t,"z",function(){return Be}),n.d(t,"D",function(){return Ve}),n.d(t,"F",function(){return ze}),n.d(t,"H",function(){return qe}),n.d(t,"q",function(){return We}),n.d(t,"t",function(){return Ke}),n.d(t,"M",function(){return $e}),n.d(t,"j",function(){return Qe}),n.d(t,"u",function(){return Ye}),n.d(t,"v",function(){return Xe}),n.d(t,"p",function(){return Ze}),n.d(t,"E",function(){return Je}),n.d(t,"C",function(){return et}),n.d(t,"h",function(){return tt}),n.d(t,"s",function(){return nt});var r,o=n(747),i=n(3),a=n(15),s=n(4),l=n.n(s),u=n(0),c=n(619),p=n(578),d=n(570),f=n(640),h=n.n(f),m=n(583),y=n(612),g=n(711),v=n.n(g),b=n(6),S=n(574),_=n(580);function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},O="clinical_attribute",C="GENESET_SCORE",P=(w(r={},d.a.MUTATION_EXTENDED,"Mutation"),w(r,d.a.COPY_NUMBER_ALTERATION,"Copy Number"),w(r,d.a.MRNA_EXPRESSION,"mRNA"),w(r,d.a.PROTEIN_LEVEL,"Protein Level"),w(r,d.a.METHYLATION,"DNA Methylation"),w(r,O,"Clinical Attribute"),w(r,C,"Gene Sets"),r),x=(o.d,{missense:"Missense",inframe:"Inframe",fusion:"Fusion",promoter:"Promoter",trunc:"Truncating",other:"Other"}),T=[O,d.a.MUTATION_EXTENDED,d.a.COPY_NUMBER_ALTERATION,d.a.MRNA_EXPRESSION,C,d.a.PROTEIN_LEVEL,d.a.METHYLATION];function k(e,t){var n="",r=b.b.serverConfig.generic_assay_display_text.split(","),o=l.a.reduce(r,function(e,t){var n=t.split(":");return 2==n.length&&(e[n[0]]=n[1]),e},{});e in o?n=o[e]:n=e.split("_").map(function(e){return Object(i.s)(e.toLowerCase())}).join(" ");return t?v.a.plural(n):n}function A(e){if(!e.length)return[];var t;switch(e[0].molecularAlterationType){case d.a.COPY_NUMBER_ALTERATION:t=function(e){return"DISCRETE"===e.datatype?0:1};break;default:t=function(e){return e.name}}return l.a.sortBy(e,t)}var I=1.8,D=650,M=500,j=480,N=1.6,R=["Not profiled","for mutations"],L=["Not profiled","for CNA"],G="No data",F="not_profiled_mutation",B="not_mutated",V="not_profiled_cna",z="not_profiled_cna";function q(e){return"string"===e.datatype}function U(e){return"number"===e.datatype}function H(e){return"".concat(e.info.entrezGeneId,"_").concat(JSON.stringify(e.info.clinicalAttribute))}function W(e){return void 0!==e.dispClinicalValue}function K(e){return!!e.dispMutationType}function $(e){return!!e.dispCna}function Q(e){return!!e.profiledMutations}function Y(e){return!!e.profiledCna}function X(e,t){var n,r=t?function(e){return t(e)?1:0}:function(e){return 0},i=function(e){return e.profiledMutations?e.dispMutationType?e.dispMutationType in he?-he[e.dispMutationType]:Number.NEGATIVE_INFINITY:-he[B]:-he[F]},a=function(e){return e.profiledCna?e.dispCna?e.dispCna.value in Pe?-Pe[e.dispCna.value]:Number.NEGATIVE_INFINITY:-Pe[z]:-Pe[V]};switch(e){case o.a.ClinicalData:n=[r,function(e){return void 0===e.dispClinicalValue?Number.NEGATIVE_INFINITY:1}];break;case o.a.MutationTypeAndCopyNumber:n=[r,i,a];break;case o.a.MutationType:n=[r,i];break;case o.a.CopyNumber:n=[r,a]}return n}function Z(e,t,n,r,i,a,s,u,c,p,d,f){var h=r.isComplete&&r.result,m=i.isComplete&&i.result,y=[];switch(t){case o.a.ClinicalData:p&&p.categoryToColor?y=function(e,t,n){var r=t===o.f.WaterfallPlot?"square":"circle",i=l.a.sortBy(l.a.uniq(e.data.map(function(e){return e.value}))).map(function(t){return{name:t,symbol:{stroke:"#000000",strokeOpacity:se,fill:e.categoryToColor[t],type:r},highlighting:n&&{uid:t,isDatumHighlighted:function(e){return e.dispClinicalValue===t},onClick:n}}});i.push({name:G,symbol:{stroke:"#000000",strokeOpacity:se,fill:de.fill,type:r},highlighting:n&&{uid:G,isDatumHighlighted:function(e){return!W(e)},onClick:n}});return i}(p,n,f):p&&p.numericalValueToColor&&(y=function(e,t,n){var r=e.numericalValueRange;if(!r)return[];var i=t===o.f.WaterfallPlot?"square":"circle",a=[];a.push({name:"",symbol:{type:"gradient",range:r,colorFn:n?e.logScaleNumericalValueToColor:e.numericalValueToColor,gradientUid:"gradient"}}),a.push({name:G,symbol:{stroke:"#000000",strokeOpacity:se,fill:de.fill,type:i},margin:125});return a}(p,n,d));break;case o.a.CopyNumber:m&&(y=te(e,n,f));break;case o.a.LimitValCopyNumber:m&&(y=te(e,n,f).concat(ee(n,s,f)));break;case o.a.LimitValMutationType:h&&(y=J(e,a,!0,n,f).concat(ee(n,s,f)));break;case o.a.MutationType:h&&(y=J(e,a,!0,n,f));break;case o.a.MutationTypeAndCopyNumber:h&&m&&(y=J(e,a,!1,n,f).concat(te(e,n,f)));break;case o.a.LimitValMutationTypeAndCopyNumber:h&&i&&(y=J(e,a,!1,n,f).concat(te(e,n,f)).concat(ee(n,s,f)));break;case o.a.LimitVal:y=ee(n,s,f)}var g=function(e,t,n){if(t===o.f.WaterfallPlot&&n&&l.a.some(e,function(e){return n(e)}))return{name:ve.legendLabel,symbol:{fill:ve.fill,fillOpacity:ve.fillOpacity,stroke:ve.stroke,strokeOpacity:ve.strokeOpacity,type:ve.symbol}};return}(e,n,c);return g&&(y=y.concat(g)),u&&y.forEach(function(e){var t={};e.highlighting&&(t.cursor="pointer",e.symbol.cursor="pointer",u.has(e.highlighting.uid)&&(t.fontWeight="bold")),e.labels=t}),y}function J(e,t,n,r,i){var a=t?le:ue,s=!1,u=!1,c=l.a.chain(e).map(function(e){var t=e.dispMutationType?e.dispMutationType:null;return Q(e)||(u=!0),t}).uniq().filter(function(e){var t=!!e;return t||(s=!0),t}).keyBy(function(e){return e}).value(),p=l.a.chain(fe).filter(function(e){return!!c[e]}).map(function(e){var t=a[e],s=r===o.f.WaterfallPlot?"square":t.symbol,l=r===o.f.WaterfallPlot?t.fill:t.stroke;return{name:t.legendLabel,symbol:{stroke:l,strokeOpacity:n?t.strokeOpacity:0,fill:t.fill,type:s},highlighting:i&&{uid:t.legendLabel,isDatumHighlighted:function(t){return t.dispMutationType===e},onClick:i}}}).value();if(s){var d=r===o.f.WaterfallPlot?"square":me.symbol,f=r===o.f.WaterfallPlot?me.fill:me.stroke;p.push({name:me.legendLabel,symbol:{stroke:f,strokeOpacity:n?me.strokeOpacity:0,fill:me.fill,type:d},highlighting:i&&{uid:me.legendLabel,isDatumHighlighted:function(e){return Q(e)&&!K(e)},onClick:i}})}if(u){var h=r===o.f.WaterfallPlot?"square":"circle",m=pe.stroke;p.push({name:R,symbol:{stroke:m,strokeOpacity:pe.strokeOpacity,fill:pe.fill,type:h},highlighting:i&&{uid:JSON.stringify(R),isDatumHighlighted:function(e){return!Q(e)},onClick:i}})}return p}function ee(e,t,n){var r=[];if(t&&t.length>0){var i=e===o.f.WaterfallPlot?0:1,a=e===o.f.WaterfallPlot?"#000000":"#999",s="value ".concat(t.join(" or "));r.push({name:s,symbol:{fill:"#999",fillOpacity:i,stroke:a,strokeOpacity:1,type:ge.symbol},highlighting:n&&{uid:s,isDatumHighlighted:function(e){return Object(m.b)(e)},onClick:n}})}return r}function te(e,t,n){var r=!1,i=t===o.f.WaterfallPlot?"square":"circle",a=t===o.f.WaterfallPlot?1:0,s=l.a.chain(e).map(function(e){var t=e.dispCna?e.dispCna.value:null;return Y(e)||(r=!0),t}).uniq().filter(function(e){return null===e&&(r=!0),null!==e}).sortBy(function(e){return-e}).value().map(function(e){var t=ye[e];return{name:t.legendLabel,symbol:{stroke:t.stroke,fillOpacity:a,fill:t.stroke,type:i,strokeWidth:I},highlighting:n&&{uid:t.legendLabel,isDatumHighlighted:function(t){return!(!t.dispCna||t.dispCna.value!==e)},onClick:n}}});return r&&s.push({name:L,symbol:{stroke:ce.stroke,fillOpacity:a,fill:ce.stroke,type:i,strokeWidth:I},highlighting:n&&{uid:G,isDatumHighlighted:function(e){return!Y(e)||!$(e)},onClick:n}}),s}function ne(e,t,n,r,a,s,u,p,f){var h;return Object(i.S)({await:function(){var o=[];return s.isComplete?(s.result[t].molecularAlterationType===d.a.MUTATION_EXTENDED?(h=n.get({entrezGeneId:e}),o.push(p),o.push(f)):h=r.get({entrezGeneId:e,molecularProfileId:t}),o.push(h)):o.push(s),o.push(a),o},invoke:function(){var n=s.result[t],r=a.result[e].hugoGeneSymbol;if(n.molecularAlterationType===d.a.MUTATION_EXTENDED){var i=h.result;return Promise.resolve(function(e,t,n,r,i,a){var s=l.a.mapValues(l.a.groupBy(n,function(e){return e.uniqueSampleKey}),function(e){return l.a.uniq(e.map(function(e){return x[Object(c.b)(e)]}))}),u=a.map(function(n){var a,l=s[n.uniqueSampleKey];if(l)switch(i){case o.b.MutationType:a=l.length>1?_e:l;break;case o.b.MutatedVsWildType:default:a=Se}else a=Object(y.a)(n.uniqueSampleKey,e,t,r)?we:Ee;return{uniqueSampleKey:n.uniqueSampleKey,value:a}}),p=[];switch(i){case o.b.MutationType:p=Oe;break;case o.b.MutatedVsWildType:default:p=Ce}return{data:u,hugoGeneSymbol:t,datatype:"string",categoryOrder:p}}(t,r,i,p.result,u,f.result))}var m=n.molecularAlterationType===d.a.COPY_NUMBER_ALTERATION&&"DISCRETE"===n.datatype,g=h.result;return Promise.resolve({data:g.map(function(e){var t=e.value;if(m){var n=ye[e.value];n&&(t=n.legendLabel)}return{uniqueSampleKey:e.uniqueSampleKey,value:t}}),hugoGeneSymbol:r,datatype:m?"string":"number",categoryOrder:m?be:void 0})}})}function re(e,t,n,r,a,s,l,u,c,p,d,f){var h=Object(i.S)(function(){return new Promise(function(){return 0})});if(e.dataType&&e.isGenericAssayType&&void 0!==e.genericAssayEntityId&&void 0!==e.dataSourceId)return h=function(e,t,n,r){var o=this;return Object(i.S)({await:function(){return[n,r]},invoke:function(){return E(o,void 0,void 0,regeneratorRuntime.mark(function o(){var i;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return r.result[t],o.next=4,n.result.getPromise({stableId:e,molecularProfileId:t},!0);case 4:return i=n.result.get({molecularProfileId:t,stableId:e}).data,o.abrupt("return",Promise.resolve({data:i.map(function(e){return{uniqueSampleKey:e.uniqueSampleKey,value:parseFloat(e.value),thresholdType:e.thresholdType}}),datatype:"number",genericAssayEntityId:e}));case 6:case"end":return o.stop()}},o)}))}})}(e.genericAssayEntityId,e.dataSourceId,f,n);switch(e.dataType){case void 0:break;case o.e:h=Object(i.S)(function(){return Promise.resolve({data:[],datatype:"none"})});break;case O:if(void 0!==e.dataSourceId&&t.isComplete)h=function(e,t,n){var r=t.get(e);return Object(i.S)({await:function(){return[r,n]},invoke:function(){var t=n.result,o=r.result.data,i={data:[],datatype:e.datatype.toLowerCase()},a="number"===e.datatype.toLowerCase(),s=i.data;if(e.patientAttribute){var l=!0,u=!1,c=void 0;try{for(var p,d=o[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var f=p.value,h=t[f.uniquePatientKey],m=!0,y=!1,g=void 0;try{for(var v,b=h[Symbol.iterator]();!(m=(v=b.next()).done);m=!0){var S=v.value;s.push({uniqueSampleKey:S.uniqueSampleKey,value:f.value})}}catch(e){y=!0,g=e}finally{try{m||null==b.return||b.return()}finally{if(y)throw g}}}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}}else{var _=!0,w=!1,E=void 0;try{for(var O,C=o[Symbol.iterator]();!(_=(O=C.next()).done);_=!0){var P=O.value;s.push({uniqueSampleKey:P.uniqueSampleKey,value:P.value})}}catch(e){w=!0,E=e}finally{try{_||null==C.return||C.return()}finally{if(w)throw E}}}if(a){var x=!0,T=!1,k=void 0;try{for(var A,I=s[Symbol.iterator]();!(x=(A=I.next()).done);x=!0){var D=A.value;D.value=parseFloat(D.value)}}catch(e){T=!0,k=e}finally{try{x||null==I.return||I.return()}finally{if(T)throw k}}}return Promise.resolve(i)}})}(t.result[e.dataSourceId],s,r);break;case C:void 0!==e.genesetId&&void 0!==e.dataSourceId&&(h=function(e,t,n,r){var o=this;return Object(i.S)({await:function(){return[n,r]},invoke:function(){return E(o,void 0,void 0,regeneratorRuntime.mark(function o(){var i;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return r.result[t],o.next=4,n.result.getPromise({genesetId:e,molecularProfileId:t},!0);case 4:return i=n.result.get({molecularProfileId:t,genesetId:e}).data,o.abrupt("return",Promise.resolve({data:i.map(function(e){var t=e.value;return{uniqueSampleKey:e.uniqueSampleKey,value:Number(t)}}),genesetId:e,datatype:"number"}));case 6:case"end":return o.stop()}},o)}))}})}(e.genesetId,e.dataSourceId,d,n));break;default:void 0!==e.entrezGeneId&&void 0!==e.dataSourceId&&(h=ne(e.entrezGeneId,e.dataSourceId,l,u,a,n,e.mutationCountBy,c,p))}return h}function oe(e,t,n){return e>(n+t)/2?"rgb(255,255,255)":"rgb(0,0,0)"}function ie(e,t,n,r,i){var a="",s=t[e.dataSourceId],l="";switch(i&&(l=i.label),e.dataType){case o.e:break;case O:var u=r[e.dataSourceId];u&&(a=u.displayName);break;case C:s&&void 0!==e.genesetId&&(a="".concat(e.genesetId,": ").concat(s.name));break;default:s&&void 0!==e.entrezGeneId&&e.entrezGeneId!==o.d&&(a="".concat(n[e.entrezGeneId].hugoGeneSymbol,": ").concat(s.name))}if(e.dataType&&e.isGenericAssayType&&s&&e.selectedGenericAssayOption&&e.selectedGenericAssayOption.label){var c=e.selectedGenericAssayOption.label;a="".concat(c,": ").concat(s.name)}return l&&(a+=" (".concat(l,")")),a}var ae={fill:"#00AAF8",stroke:"#0089C6",strokeOpacity:1},se=.5,le={inframe:{symbol:"circle",fill:p.o,stroke:"#000000",strokeOpacity:se,legendLabel:"Inframe (VUS)"},"inframe.driver":{symbol:"circle",fill:p.n,stroke:"#000000",strokeOpacity:se,legendLabel:"Inframe (Driver)"},missense:{symbol:"circle",fill:p.q,stroke:"#000000",strokeOpacity:se,legendLabel:"Missense (VUS)"},"missense.driver":{symbol:"circle",fill:p.p,stroke:"#000000",strokeOpacity:se,legendLabel:"Missense (Driver)"},fusion:{symbol:"circle",fill:p.l,stroke:"#000000",strokeOpacity:se,legendLabel:"Fusion"},trunc:{symbol:"circle",fill:p.u,stroke:"#000000",strokeOpacity:se,legendLabel:"Truncating (VUS)"},"trunc.driver":{symbol:"circle",fill:p.t,stroke:"#000000",strokeOpacity:se,legendLabel:"Truncating (Driver)"},promoter:{symbol:"circle",fill:p.s,stroke:"#000000",strokeOpacity:se,legendLabel:"Promoter"},other:{symbol:"circle",fill:p.r,stroke:"#000000",strokeOpacity:se,legendLabel:"Other"}},ue={inframe:{symbol:"circle",fill:p.n,stroke:"#000000",strokeOpacity:se,legendLabel:"Inframe"},missense:{symbol:"circle",fill:p.p,stroke:"#000000",strokeOpacity:se,legendLabel:"Missense"},fusion:{symbol:"circle",fill:p.l,stroke:"#000000",strokeOpacity:se,legendLabel:"Fusion"},trunc:{symbol:"circle",fill:p.t,stroke:"#000000",strokeOpacity:se,legendLabel:"Truncating"},promoter:{symbol:"circle",fill:p.s,stroke:"#000000",strokeOpacity:se,legendLabel:"Promoter"},other:{symbol:"circle",fill:p.r,stroke:"#000000",strokeOpacity:se,legendLabel:"Other"}},ce={symbol:"circle",stroke:"#000000",strokeOpacity:.3},pe=Object.assign({},{fill:"#ffffff"},ce),de=Object.assign({},pe,{fill:p.i}),fe=["fusion","promoter.driver","promoter","trunc.driver","trunc","inframe.driver","inframe","missense.driver","missense","other"],he=Object(i.W)(["fusion","promoter.driver","trunc.driver","inframe.driver","missense.driver","promoter","trunc","inframe","missense","other",B,F]),me={symbol:"circle",fill:"#c4e5f5",stroke:"#000000",strokeOpacity:.3,legendLabel:"Not mutated"},ye={"-2":{legendLabel:"Deep Deletion",stroke:p.d,strokeOpacity:1},"-1":{legendLabel:"Shallow Deletion",stroke:"#2aced4",strokeOpacity:1},0:{legendLabel:"Diploid",stroke:p.e,strokeOpacity:1},1:{legendLabel:"Gain",stroke:"#ff8c9f",strokeOpacity:1},2:{legendLabel:"Amplification",stroke:p.a,strokeOpacity:1}},ge={legendLabel:"Limit value",symbol:"diamond"},ve={legendLabel:"Sample match",symbol:"plus",fill:"white",fillOpacity:1,stroke:"red",strokeWidth:1,strokeOpacity:1,size:3},be=["-2","-1","0","1","2"].map(function(e){return ye[e].legendLabel}),Se="Mutated",_e="Multiple",we="Wild type",Ee="Not profiled",Oe=[x.missense,x.inframe,x.trunc,x.fusion,x.promoter,x.other,_e,we,Ee],Ce=[Se,we,Ee],Pe=Object(i.W)(["-2","2","-1","1","0",V]);function xe(e,t){return Q(e)?K(e)?t[e.dispMutationType]:me:pe}function Te(e){return $(e)&&Y(e)?ye[e.dispCna.value]:ce}function ke(e){return Object(m.b)(e)?ge:{}}function Ae(e,t,n,r,i,a,s){var l=r?le:ue;switch(e){case o.a.ClinicalData:if(!i||!a)break;var u=a.get(i.info.clinicalAttribute);if(u.isComplete){if("STRING"===i.info.clinicalAttribute.datatype){var c=u.result.categoryToColor;return function(e){return W(e)?{stroke:"#000000",strokeOpacity:se,fill:c[e.dispClinicalValue],fillOpacity:1,symbol:"circle"}:de}}var p;if("NUMBER"===i.info.clinicalAttribute.datatype)return p=s&&u.result.logScaleNumericalValueToColor?u.result.logScaleNumericalValueToColor:u.result.numericalValueToColor,function(e){return W(e)?{stroke:"#000000",strokeOpacity:se,fill:p(e.dispClinicalValue),fillOpacity:1,symbol:"circle"}:de}}break;case o.a.MutationTypeAndCopyNumber:if(n.isComplete&&n.result&&t.isComplete&&t.result)return function(e){var t=Te(e),n=xe(e,l);return Object.assign({},n,t)};break;case o.a.CopyNumber:if(n.isComplete&&n.result)return Te;break;case o.a.MutationType:if(t.isComplete&&t.result)return function(e){return xe(e,l)};break;case o.a.LimitValMutationTypeAndCopyNumber:if(n.isComplete&&n.result&&t.isComplete&&t.result)return function(e){var t=ke(e),n=Te(e),r=xe(e,l);return Object.assign({},r,n,t)};break;case o.a.LimitValCopyNumber:if(n.isComplete&&n.result)return function(e){var t=ke(e),n=Te(e);return Object.assign({},n,t)};break;case o.a.LimitValMutationType:if(t.isComplete&&t.result)return function(e){var t=ke(e),n=xe(e,l);return Object.assign({},n,t)};break;case o.a.LimitVal:return function(e){var t=ke(e),n=ae;return Object.assign({},n,t)}}return function(){return ae}}function Ie(e,t){var n=l.a.groupBy(e,function(e){return t[e.entrezGeneId].hugoGeneSymbol});return l.a.chain(n).entries().sortBy(function(e){return e[0]}).value().map(function(e){return"".concat(e[0],": ").concat(e[1].filter(function(e){return!!e.proteinChange}).map(function(e){return e.proteinChange}).join(", "))})}function De(e){var t=function(e){return u.createElement("img",{src:n(673),title:e.oncoKbOncogenic,style:{height:11,width:11,marginLeft:2,marginBottom:2}})},r=u.createElement("img",{src:n(690),title:"Hotspot",style:{height:11,width:11,marginLeft:2,marginBottom:3}}),o=l.a.groupBy(e.filter(function(e){return!!e.proteinChange}),function(e){return e.hugoGeneSymbol}),i=l.a.chain(o).entries().sortBy(function(e){return e[0]}).value();return u.createElement("span",null,i.map(function(e){var n=[],o=!0,i=!1,a=void 0;try{for(var s,l=e[1][Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var c=s.value;n.push(u.createElement("span",{key:c.proteinChange},c.proteinChange,u.createElement("span",{style:{marginLeft:1}},c.isHotspot?r:null,c.oncoKbOncogenic?t(c):null))),n.push(u.createElement("span",null,", "))}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}return n.pop(),u.createElement("span",null,e[0],": ",n)}))}function Me(e){var t=function(e){return u.createElement("img",{src:n(673),title:e.oncoKbOncogenic,style:{height:11,width:11,marginLeft:2,marginBottom:2}})},r=l.a.groupBy(e,function(e){return e.hugoGeneSymbol}),o=l.a.chain(r).entries().sortBy(function(e){return e[0]}).value();return u.createElement("span",null,o.map(function(e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[1][Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;l.value in ye&&(n.push(u.createElement("span",{key:l.value},ye[l.value].legendLabel,u.createElement("span",{style:{marginLeft:1}},l.oncoKbOncogenic?t(l):null))),n.push(u.createElement("span",null,", ")))}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n.pop(),u.createElement("span",null,e[0],": ",n)}))}function je(e,t){return t?u.createElement("span",null,t.displayName,":"," ",u.createElement("b",null,void 0===e?G:"string"==typeof e?e:e.toFixed(2))):null}function Ne(e,t,n,r,o,i){var s=null;e.mutations.length>0&&(s=De(e.mutations));var l=null;e.copyNumberAlterations.length>0&&(l=Me(e.copyNumberAlterations));var c=null;i&&(c=je(e.dispClinicalValue,i));var p=t(e),d=n(e);"number"==typeof p&&(p=Object(_.f)(p,2)),"number"==typeof d&&(d=Object(_.f)(d,2));var f=r?"".concat(e[r]).concat(p):p,h=o?"".concat(e[o]).concat(d):d;return u.createElement("div",null,u.createElement("a",{href:Object(a.y)(e.studyId,e.sampleId),target:"_blank"},e.sampleId),u.createElement("div",null,"Horizontal:"," ",u.createElement("span",{style:{fontWeight:"bold"}}," ",f)),u.createElement("div",null,"Vertical:"," ",u.createElement("span",{style:{fontWeight:"bold"}}," ",h)),s,!!s&&u.createElement("br",null),l,!!l&&u.createElement("br",null),c)}function Re(e,t){return function(e,t,n,r){var o=null;e.mutations.length>0&&(o=De(e.mutations));var i=null;e.copyNumberAlterations.length>0&&(i=Me(e.copyNumberAlterations));var s=null;r&&(s=je(e.dispClinicalValue,r));var l=e[t];l=l.toFixed(4);var c=n&&e[n]?e[n]:"";return u.createElement("div",null,u.createElement("a",{href:Object(a.y)(e.studyId,e.sampleId),target:"_blank",style:{whiteSpace:"pre-line",wordBreak:"break-word"}},e.sampleId),u.createElement("div",null,"Value:"," ",u.createElement("span",{style:{fontWeight:"bold"}}," ",c,l," ")),o,!!o&&u.createElement("br",null),i,!!i&&u.createElement("br",null),s)}(e,"value","thresholdType",t)}function Le(e,t,n,r){return Ne(e,t?function(e){return t.fLogScale(e.x)}:function(e){return e.x},n?function(e){return n.fLogScale(e.y)}:function(e){return e.y},"xThresholdType","yThresholdType",r)}function Ge(e,t,n,r){var o=t?"value":"category",i=t?"category":"value";return Ne(e,n&&t?function(e){return n.fLogScale(e.value)}:function(e){return e[o]},n&&!t?function(e){return n.fLogScale(e.value)}:function(e){return e[i]},t?"thresholdType":void 0,t?void 0:"thresholdType",r)}function Fe(e){return!/zscore/i.test(e)&&/rna_seq/i.test(e)}function Be(e){return e.dataType!==O?!(!e.dataType||!e.isGenericAssayType)||!(!e.dataSourceId||!Fe(e.dataSourceId)):e.dataSourceId===S.g.MUTATION_COUNT}function Ve(e,t,n,r,o,i,a,s){var u=ze(e,t,n,r,o,i,a,s),c=l.a.groupBy(u,function(e){return e.category}),p=l.a.entries(c).map(function(e){return{label:e[0],data:e[1]}}),d=e.categoryOrder;return d&&(p=l.a.sortBy(p,function(e){return d.indexOf(e.label)})),p}function ze(e,t,n,r,o,i,a,s){var u=o?l.a.groupBy(o.data,function(e){return e.uniqueSampleKey}):{},p=i?l.a.groupBy(i.data,function(e){return e.uniqueSampleKey}):{},d={};s&&(d=s.clinicalAttribute.patientAttribute?l.a.keyBy(s.data,function(e){return e.uniquePatientKey}):l.a.keyBy(s.data,function(e){return e.uniqueSampleKey}));var f={},h=!0,y=!1,g=void 0;try{for(var v,b=e.data[Symbol.iterator]();!(h=(v=b.next()).done);h=!0){var S=v.value,_=n[S.uniqueSampleKey],w=p[S.uniqueSampleKey],E=void 0;if(w&&w.length){E=w[0];var O=!0,C=!1,P=void 0;try{for(var x,T=w[Symbol.iterator]();!(O=(x=T.next()).done);O=!0){var k=x.value;Math.abs(k.value)>Math.abs(E.value)&&(E=k)}}catch(e){C=!0,P=e}finally{try{O||null==T.return||T.return()}finally{if(C)throw P}}}var A=void 0,I=u[S.uniqueSampleKey];if(I&&I.length){var D=l.a.chain(I).groupBy(function(e){var t=Object(c.b)(e),n="fusion"!==t&&"promoter"!==t&&"other"!==t&&e.putativeDriver?".driver":"";return"".concat(t).concat(n)}).mapValues(function(e){return e.length}).value();A=Object(c.f)(D,he)}var M=r[S.uniqueSampleKey],j=void 0,N=void 0;if(o||i){var R=Ue(a?a.hugoGeneSymbol:e.hugoGeneSymbol,a?a.hugoGeneSymbol:t.hugoGeneSymbol,M);if(o){j=!1;var L=!0,G=!1,F=void 0;try{for(var B,V=o.molecularProfileIds[Symbol.iterator]();!(L=(B=V.next()).done);L=!0){var z=B.value;j=j||!!R[z]}}catch(e){G=!0,F=e}finally{try{L||null==V.return||V.return()}finally{if(G)throw F}}}if(i){N=!1;var q=!0,U=!1,H=void 0;try{for(var W,K=i.molecularProfileIds[Symbol.iterator]();!(q=(W=K.next()).done);q=!0){var $=W.value;N=N||!!R[$]}}catch(e){U=!0,H=e}finally{try{q||null==K.return||K.return()}finally{if(U)throw H}}}}var Q=void 0,Y=void 0;(Y=s&&s.clinicalAttribute.patientAttribute?d[n[S.uniqueSampleKey].uniquePatientKey]:d[S.uniqueSampleKey])&&(Q=Y.value),f[S.uniqueSampleKey]={uniqueSampleKey:S.uniqueSampleKey,sampleId:_.sampleId,studyId:_.studyId,horzValues:[].concat(S.value),horzThresholdTypes:[].concat(S.thresholdType||""),mutations:I||[],copyNumberAlterations:w||[],dispCna:E,dispMutationType:A,dispClinicalValue:Q,profiledCna:N,profiledMutations:j}}}catch(e){y=!0,g=e}finally{try{h||null==b.return||b.return()}finally{if(y)throw g}}var X=[],Z=!0,J=!1,ee=void 0;try{for(var te,ne=t.data[Symbol.iterator]();!(Z=(te=ne.next()).done);Z=!0){var re=te.value,oe=f[re.uniqueSampleKey];oe&&(oe.vertValues=[].concat(re.value),oe.vertThresholdTypes=[].concat(re.thresholdType||""),oe.jitter=Object(m.e)(re.uniqueSampleKey),X.push(oe))}}catch(e){J=!0,ee=e}finally{try{Z||null==ne.return||ne.return()}finally{if(J)throw ee}}for(var ie=[],ae=0,se=X;ae<se.length;ae++)for(var le=se[ae],ue=0;ue<le.horzValues.length;ue++)for(var ce=le.horzValues[ue],pe=0;pe<le.vertValues.length;pe++){var de=le.vertValues[pe];if(!Number.isNaN(ce)&&!Number.isNaN(de)){var fe=le.horzThresholdTypes[ue],me=le.vertThresholdTypes[pe];ie.push(Object.assign({},le,{x:ce,xThresholdType:fe,category:ce,y:de,yThresholdType:me,value:de,thresholdType:me}))}}return ie}function qe(e,t,n,r,o,i,a){var s=o?l.a.groupBy(o.data,function(e){return e.uniqueSampleKey}):{},u=i?l.a.groupBy(i.data,function(e){return e.uniqueSampleKey}):{},p={};a&&(p=a.clinicalAttribute.patientAttribute?l.a.keyBy(a.data,function(e){return e.uniquePatientKey}):l.a.keyBy(a.data,function(e){return e.uniqueSampleKey}));var d=[],f=!0,h=!1,y=void 0;try{for(var g,v=e.data[Symbol.iterator]();!(f=(g=v.next()).done);f=!0){var b=g.value,S=t[b.uniqueSampleKey],_=u[b.uniqueSampleKey],w=void 0,E=void 0,O=s[b.uniqueSampleKey];if(_&&_.length&&r&&(w=l()(_).filter(function(e){return e.entrezGeneId===r.entrezGeneId}).maxBy("value")),O&&O.length&&r){var C=l()(O).filter(function(e){return e.entrezGeneId===r.entrezGeneId}).groupBy(function(e){var t=Object(c.b)(e),n="fusion"!==t&&"promoter"!==t&&"other"!==t&&e.putativeDriver?".driver":"";return"".concat(t).concat(n)}).mapValues(function(e){return e.length}).value();E=Object(c.f)(C,he)}var P=n[b.uniqueSampleKey],x=void 0,T=void 0;if((o||i)&&r){var k=He(r.hugoGeneSymbol,P);if(o){x=!1;var A=!0,I=!1,D=void 0;try{for(var M,j=o.molecularProfileIds[Symbol.iterator]();!(A=(M=j.next()).done);A=!0){var N=M.value;x=x||!!k[N]}}catch(e){I=!0,D=e}finally{try{A||null==j.return||j.return()}finally{if(I)throw D}}}if(i){T=!1;var R=!0,L=!1,G=void 0;try{for(var F,B=i.molecularProfileIds[Symbol.iterator]();!(R=(F=B.next()).done);R=!0){var V=F.value;T=T||!!k[V]}}catch(e){L=!0,G=e}finally{try{R||null==B.return||B.return()}finally{if(L)throw G}}}}var z=void 0,q=void 0;(q=a&&a.clinicalAttribute.patientAttribute?p[t[b.uniqueSampleKey].uniquePatientKey]:p[b.uniqueSampleKey])&&(z=q.value),d.push({uniqueSampleKey:b.uniqueSampleKey,sampleId:S.sampleId,studyId:S.studyId,values:[].concat(b.value),thresholdTypes:[].concat(b.thresholdType||void 0),mutations:O||[],copyNumberAlterations:_||[],jitter:Object(m.e)(b.uniqueSampleKey),dispCna:w,dispMutationType:E,dispClinicalValue:z,profiledCna:T,profiledMutations:x})}}catch(e){h=!0,y=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw y}}for(var U=[],H=0,W=d;H<W.length;H++)for(var K=W[H],$=0;$<K.values.length;$++){var Q=K.values[$];if(!Number.isNaN(Q)){var Y=K.thresholdTypes[$];U.push(Object.assign({},K,{value:Q,thresholdType:Y,category:Q}))}}return U}function Ue(e,t,n){var r={};if(e){var o=!0,i=!1,a=void 0;try{for(var s,l=(n.byGene[e]||[])[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){r[s.value.molecularProfileId]=!0}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}}if(t){var u=!0,c=!1,p=void 0;try{for(var d,f=(n.byGene[t]||[])[Symbol.iterator]();!(u=(d=f.next()).done);u=!0){r[d.value.molecularProfileId]=!0}}catch(e){c=!0,p=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw p}}}var h=!0,m=!1,y=void 0;try{for(var g,v=n.allGenes[Symbol.iterator]();!(h=(g=v.next()).done);h=!0){r[g.value.molecularProfileId]=!0}}catch(e){m=!0,y=e}finally{try{h||null==v.return||v.return()}finally{if(m)throw y}}return r}function He(e,t){var n={};if(e){var r=!0,o=!1,i=void 0;try{for(var a,s=(t.byGene[e]||[])[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){n[a.value.molecularProfileId]=!0}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}}var l=!0,u=!1,c=void 0;try{for(var p,d=t.allGenes[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){n[p.value.molecularProfileId]=!0}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}return n}function We(e){var t=[];return void 0!==e.selectedOption&&e.selectedOption.info.entrezGeneId!==o.d&&void 0!==e.selectedOption.info.entrezGeneId&&t.push({entrezGeneId:e.selectedOption.info.entrezGeneId}),l.a.uniqBy(t,"entrezGeneId")}function Ke(e){var t=[];return void 0!==e.selectedOption&&e.selectedOption.info.entrezGeneId!==o.d&&void 0!==e.selectedOption.info.entrezGeneId&&t.push({entrezGeneId:e.selectedOption.info.entrezGeneId}),l.a.uniqBy(t,"entrezGeneId")}function $e(e,t){return void 0!==t.dataType&&!!t.isGenericAssayType&&e.dataType===o.e||void 0!==e.dataType&&!!e.isGenericAssayType&&t.dataType===o.e}function Qe(e,t){var n=[O,o.e],r=e.dataType||"",i=t.dataType||"";return(n.includes(r)||!!e.isGenericAssayType)&&(n.includes(i)||!!t.isGenericAssayType)}function Ye(e,t,n,r,o,i,a){var s=[],l=!0,u=!1,c=void 0;try{for(var p,d=e[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var f=p.value,m=[];if(m.push(f.sampleId),m.push(h()(f.x).format("0[.][000000]")),m.push(h()(f.y).format("0[.][000000]")),o&&(f.mutations.length?m.push(Ie(f.mutations,r).join("; ")):!1===f.profiledMutations?m.push("Not Profiled"):m.push("-")),i)if(f.dispCna){var y=ye[f.dispCna.value];m.push("".concat(f.dispCna.hugoGeneSymbol,": ").concat(y.legendLabel))}else!1===f.profiledCna?m.push("Not Profiled"):m.push("-");a&&m.push(f.dispClinicalValue||"-"),s.push(m.join("\t"))}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}var g=["Sample Id",t,n];return o&&g.push("Mutations"),i&&g.push("Copy Number Alterations"),a&&g.push(a.displayName),g.join("\t")+"\n"+s.join("\n")}function Xe(e,t,n,r,o,i,a,s){var u=l.a.cloneDeep(e);u=l.a.sortBy(u,function(e){return e.value}),"DESC"===t&&(u=l.a.reverse(u));var c=[],p=!0,d=!1,f=void 0;try{for(var m,y=u[Symbol.iterator]();!(p=(m=y.next()).done);p=!0){var g=m.value,v=[];if(v.push(g.sampleId),v.push(h()(g.value).format("0[.][000000]")),v.push(h()(n).format("0[.][000000]")),v.push(t||""),i&&(g.mutations.length?v.push(Ie(g.mutations,o).join("; ")):!1===g.profiledMutations?v.push("Not Profiled"):v.push("-")),a)if(g.dispCna){var b=ye[g.dispCna.value];v.push("".concat(g.dispCna.hugoGeneSymbol,": ").concat(b.legendLabel))}else!1===g.profiledCna?v.push("Not Profiled"):v.push("-");s&&v.push(g.dispClinicalValue||"-"),c.push(v.join("\t"))}}catch(e){d=!0,f=e}finally{try{p||null==y.return||y.return()}finally{if(d)throw f}}var S=["Sample Id","".concat(r),"pivot threshold","sort order"];return i&&S.push("Mutations"),a&&S.push("Copy Number Alterations"),s&&S.push(s.displayName),S.join("\t")+"\n"+c.join("\n")}function Ze(e,t,n,r,o,i,a){var s=[],l=!0,u=!1,c=void 0;try{for(var p,d=e[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var f=p.value,m=f.label,y=!0,g=!1,v=void 0;try{for(var b,S=f.data[Symbol.iterator]();!(y=(b=S.next()).done);y=!0){var _=b.value,w=[];if(w.push(_.sampleId),w.push(m),w.push(h()(_.value).format("0[.][000000]")),o&&(_.mutations.length?w.push(Ie(_.mutations,r).join("; ")):!1===_.profiledMutations?w.push("Not Profiled"):w.push("-")),i)if(_.dispCna){var E=ye[_.dispCna.value];w.push("".concat(_.dispCna.hugoGeneSymbol,": ").concat(E.legendLabel))}else!1===_.profiledCna?w.push("Not Profiled"):w.push("-");a&&w.push(_.dispClinicalValue||"-"),s.push(w.join("\t"))}}catch(e){g=!0,v=e}finally{try{y||null==S.return||S.return()}finally{if(g)throw v}}}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}var O=["Sample Id",t,n];return o&&O.push("Mutations"),i&&O.push("Copy Number Alterations"),a&&O.push(a.displayName),O.join("\t")+"\n"+s.join("\n")}function Je(e){var t=["number","string"],n=e.filter(function(e){return t.indexOf(e.datatype.toLowerCase())>-1});return l.a.sortBy(n.map(function(e){return{value:e.clinicalAttributeId,label:e.displayName,priority:parseFloat(e.priority||"-1")}}),[function(e){return-e.priority},function(e){return e.label}])}function et(e){var t,n,r;if(e.logScale)return void 0!==e.dataType&&e.isGenericAssayType?(t="log10",n=function(e,t){return t||(t=0),e+t===0?0:Math.log10(e+t)},r=function(e,t){return t||(t=0),Math.pow(10,e-t)}):(t="log2",n=function(e){return Math.log2(Math.max(e,.01))},r=function(e){return Math.pow(2,e)}),{label:t,fLogScale:n,fInvLogScale:r}}function tt(e){return!!U(e)&&l()(e.data).filter(function(e){return e.value<0}).size()>0}function nt(e){return l()(e).filter(function(e){return void 0!==e.thresholdType&&""!==e.thresholdType&&!Array.isArray(e.value)}).map(function(e){return"".concat(e.thresholdType).concat(e.value.toFixed(2))}).uniq().value()}},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return i}),n.d(t,"d",function(){return a});var r="_mutations",o="".concat(r,"_uncalled"),i="Germline",a="Putative_Driver"},function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return a});var r=n(4);function o(e,t,n,r){return!!i(e,r,n)[t]}function i(e,t,n){var o=t.samples[e];if(!o)return{};var i=n?o.byGene[n]:r.flatten(r.values(o.byGene));if(!i&&0===o.allGenes.length)return{};var a={},s=!0,l=!1,u=void 0;try{for(var c,p=(i||[])[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){a[c.value.molecularProfileId]=!0}}catch(e){l=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw u}}var d=!0,f=!1,h=void 0;try{for(var m,y=o.allGenes[Symbol.iterator]();!(d=(m=y.next()).done);d=!0){a[m.value.molecularProfileId]=!0}}catch(e){f=!0,h=e}finally{try{d||null==y.return||y.return()}finally{if(f)throw h}}return a}function a(e,t,n,r){var o=i(e,n,r);return t.map(function(e){return!!o[e]})}},,function(e,t,n){"use strict";var r=n(0),o=n(9),i=n.n(o),a=n(7),s=n(2),l=n(3);function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var h,m=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":f(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};function y(e,t,n){return null!=e&&e.length>t+(n||0)}var g=h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,p(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=this,t=r.createElement("span",{style:{whiteSpace:"nowrap"},className:i()(this.props.className)},this.truncatedText);return this.needsTooltip&&(t=r.createElement(l.c,{overlay:function(){return e.props.tooltip||r.createElement("div",{style:{maxWidth:500}},e.props.text)},placement:"right",destroyTooltipOnHide:!0},t)),t}},{key:"needsTooltip",get:function(){return"never"!==this.props.addTooltip&&("always"===this.props.addTooltip||"truncated"===this.props.addTooltip&&this.isTooLong)}},{key:"isTooLong",get:function(){return y(this.props.text,this.props.maxLength||h.defaultProps.maxLength,this.props.buffer)}},{key:"truncatedText",get:function(){return e=this.props.text,t=this.props.suffix||h.defaultProps.suffix,n=this.props.maxLength||h.defaultProps.maxLength,r=this.props.buffer,y(e,n,r)?e.substring(0,n)+t:e;var e,t,n,r}}])&&u(n.prototype,o),a&&u(n,a),t}();g.defaultProps={maxLength:50,buffer:2,suffix:"...",addTooltip:"truncated"},m([s.computed],g.prototype,"needsTooltip",null),m([s.computed],g.prototype,"isTooLong",null),m([s.computed],g.prototype,"truncatedText",null),g=h=m([a.observer],g),t.a=g},function(e,t,n){"use strict";var r=n(2);function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t.a=function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3?arguments[3]:void 0,s=0;return n=e instanceof Array?e:[e],Object(r.autorun)(function(e){n.reduce(function(e,t){return e&&t.isComplete},!0)&&(t.apply(void 0,o(n.map(function(e){return e.result}))),s+=1),s>=i&&(e.dispose(),a&&a())})}},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(66),o=n(631);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e){var t=Object.keys(e);return t.sort(),"{".concat(t.map(function(t){var n=e[t];if(a(n)===a({}))throw new Error("Warning: keys in cache may not be unique because query contains nested objects. Specify queryToKey init. param. to be safe.");return'"'.concat(t,'":"').concat(n,'"')}).join(","),"}")}var l=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.queryToMobxPromiseInput=t,this.queryToKey=n,this.cache={}}var t,n,a;return t=e,(n=[{key:"get",value:function(e){var t=this.queryToKey(e);return this.cache[t]||(this.cache[t]=new r.MobxPromise(this.queryToMobxPromiseInput(e))),this.cache[t]}},{key:"getAll",value:function(e){var t=this;return e.map(function(e){return t.get(e)})}},{key:"await",value:function(e,t){var n=e;return Object(o.a)(e.map(function(e){return e.isComplete}))&&(n=n.concat(this.getAll(t.apply(null,e.map(function(e){return e.result}))))),n}}])&&i(t.prototype,n),a&&i(t,a),e}()},function(e,t,n){"use strict";function r(e){try{return h.insertRule(e,h.cssRules.length)}catch(e){console.warn("react-reveal - animation failed")}}function o(){c||(t.globalHide=c=!0,window.removeEventListener("scroll",o,!0),r("."+i+" { opacity: 0; }"),window.removeEventListener("orientationchange",o,!0),window.document.removeEventListener("visibilitychange",o))}Object.defineProperty(t,"__esModule",{value:!0}),t.insertRule=r,t.cascade=function(e,t,n,r,o){var i=Math.log(r),a=(Math.log(o)-i)/(n-t);return Math.exp(i+a*(e-t))},t.animation=function(e){if(!h)return"";var t="@keyframes "+(m+d)+"{"+e+"}",n=f[e];return n?""+m+n:(h.insertRule(t,h.cssRules.length),f[e]=d,""+m+d++)},t.hideAll=o,t.default=function(e){var n=e.ssrFadeout;t.fadeOutEnabled=n};var i=t.namespace="react-reveal",a=(t.defaults={duration:1e3,delay:0,count:1},t.ssr=!0),s=t.observerMode=!1,l=t.raf=function(e){return window.setTimeout(e,66)},u=t.disableSsr=function(){return t.ssr=a=!1},c=(t.fadeOutEnabled=!1,t.ssrFadeout=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t.fadeOutEnabled=e},t.globalHide=!1),p=(t.ie10=!1,t.collapseend=void 0),d=1,f={},h=!1,m=i+"-"+Math.floor(1e15*Math.random())+"-";if("undefined"!=typeof window&&"nodejs"!==window.name&&window.document&&"undefined"!=typeof navigator){t.observerMode=s="IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype&&/\{\s*\[native code\]\s*\}/.test(""+IntersectionObserver),t.raf=l=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||l,t.ssr=a=window.document.querySelectorAll("div[data-reactroot]").length>0,-1!==navigator.appVersion.indexOf("MSIE 10")&&(t.ie10=!0),a&&"performance"in window&&"timing"in window.performance&&"domContentLoadedEventEnd"in window.performance.timing&&window.performance.timing.domLoading&&Date.now()-window.performance.timing.domLoading<300&&(t.ssr=a=!1),a&&window.setTimeout(u,1500),s||(t.collapseend=p=document.createEvent("Event"),p.initEvent("collapseend",!0,!0));var y=document.createElement("style");document.head.appendChild(y),y.sheet&&y.sheet.cssRules&&y.sheet.insertRule&&(h=y.sheet,window.addEventListener("scroll",o,!0),window.addEventListener("orientationchange",o,!0),window.document.addEventListener("visibilitychange",o))}},function(e,t,n){"use strict";n.r(t);var r="http://www.w3.org/1999/xhtml",o={svg:"http://www.w3.org/2000/svg",xhtml:r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},i=function(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),o.hasOwnProperty(t)?{space:o[t],local:e}:e};var a=function(e){var t=i(e);return(t.local?function(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}:function(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===r&&t.documentElement.namespaceURI===r?t.createElement(e):t.createElementNS(n,e)}})(t)};function s(){}var l=function(e){return null==e?s:function(){return this.querySelector(e)}};function u(){return[]}var c=function(e){return null==e?u:function(){return this.querySelectorAll(e)}},p=function(e){return function(){return this.matches(e)}},d=function(e){return new Array(e.length)};function f(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}f.prototype={constructor:f,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var h="$";function m(e,t,n,r,o,i){for(var a,s=0,l=t.length,u=i.length;s<u;++s)(a=t[s])?(a.__data__=i[s],r[s]=a):n[s]=new f(e,i[s]);for(;s<l;++s)(a=t[s])&&(o[s]=a)}function y(e,t,n,r,o,i,a){var s,l,u,c={},p=t.length,d=i.length,m=new Array(p);for(s=0;s<p;++s)(l=t[s])&&(m[s]=u=h+a.call(l,l.__data__,s,t),u in c?o[s]=l:c[u]=l);for(s=0;s<d;++s)(l=c[u=h+a.call(e,i[s],s,i)])?(r[s]=l,l.__data__=i[s],c[u]=null):n[s]=new f(e,i[s]);for(s=0;s<p;++s)(l=t[s])&&c[m[s]]===l&&(o[s]=l)}function g(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}var v=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView};function b(e,t){return e.style.getPropertyValue(t)||v(e).getComputedStyle(e,null).getPropertyValue(t)}function S(e){return e.trim().split(/^|\s+/)}function _(e){return e.classList||new w(e)}function w(e){this._node=e,this._names=S(e.getAttribute("class")||"")}function E(e,t){for(var n=_(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function O(e,t){for(var n=_(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}w.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function C(){this.textContent=""}function P(){this.innerHTML=""}function x(){this.nextSibling&&this.parentNode.appendChild(this)}function T(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function k(){return null}function A(){var e=this.parentNode;e&&e.removeChild(this)}function I(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function D(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}var M={},j=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(M={mouseenter:"mouseover",mouseleave:"mouseout"}));function N(e,t,n){return e=R(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function R(e,t,n){return function(r){var o=j;j=r;try{e.call(this,this.__data__,t,n)}finally{j=o}}}function L(e){return function(){var t=this.__on;if(t){for(var n,r=0,o=-1,i=t.length;r<i;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++o]=n:this.removeEventListener(n.type,n.listener,n.capture);++o?t.length=o:delete this.__on}}}function G(e,t,n){var r=M.hasOwnProperty(e.type)?N:R;return function(o,i,a){var s,l=this.__on,u=r(t,i,a);if(l)for(var c=0,p=l.length;c<p;++c)if((s=l[c]).type===e.type&&s.name===e.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=u,s.capture=n),void(s.value=t);this.addEventListener(e.type,u,n),s={type:e.type,name:e.name,value:t,listener:u,capture:n},l?l.push(s):this.__on=[s]}}function F(e,t,n,r){var o=j;e.sourceEvent=j,j=e;try{return t.apply(n,r)}finally{j=o}}function B(e,t,n){var r=v(e),o=r.CustomEvent;"function"==typeof o?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}var V=[null];function z(e,t){this._groups=e,this._parents=t}function q(){return new z([[document.documentElement]],V)}z.prototype=q.prototype={constructor:z,select:function(e){"function"!=typeof e&&(e=l(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i,a,s=t[o],u=s.length,c=r[o]=new Array(u),p=0;p<u;++p)(i=s[p])&&(a=e.call(i,i.__data__,p,s))&&("__data__"in i&&(a.__data__=i.__data__),c[p]=a);return new z(r,this._parents)},selectAll:function(e){"function"!=typeof e&&(e=c(e));for(var t=this._groups,n=t.length,r=[],o=[],i=0;i<n;++i)for(var a,s=t[i],l=s.length,u=0;u<l;++u)(a=s[u])&&(r.push(e.call(a,a.__data__,u,s)),o.push(a));return new z(r,o)},filter:function(e){"function"!=typeof e&&(e=p(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i,a=t[o],s=a.length,l=r[o]=[],u=0;u<s;++u)(i=a[u])&&e.call(i,i.__data__,u,a)&&l.push(i);return new z(r,this._parents)},data:function(e,t){if(!e)return h=new Array(this.size()),c=-1,this.each(function(e){h[++c]=e}),h;var n,r=t?y:m,o=this._parents,i=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var a=i.length,s=new Array(a),l=new Array(a),u=new Array(a),c=0;c<a;++c){var p=o[c],d=i[c],f=d.length,h=e.call(p,p&&p.__data__,c,o),g=h.length,v=l[c]=new Array(g),b=s[c]=new Array(g);r(p,d,v,b,u[c]=new Array(f),h,t);for(var S,_,w=0,E=0;w<g;++w)if(S=v[w]){for(w>=E&&(E=w+1);!(_=b[E])&&++E<g;);S._next=_||null}}return(s=new z(s,o))._enter=l,s._exit=u,s},enter:function(){return new z(this._enter||this._groups.map(d),this._parents)},exit:function(){return new z(this._exit||this._groups.map(d),this._parents)},join:function(e,t,n){var r=this.enter(),o=this,i=this.exit();return r="function"==typeof e?e(r):r.append(e+""),null!=t&&(o=t(o)),null==n?i.remove():n(i),r&&o?r.merge(o).order():o},merge:function(e){for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),a=new Array(r),s=0;s<i;++s)for(var l,u=t[s],c=n[s],p=u.length,d=a[s]=new Array(p),f=0;f<p;++f)(l=u[f]||c[f])&&(d[f]=l);for(;s<r;++s)a[s]=t[s];return new z(a,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,o=e[t],i=o.length-1,a=o[i];--i>=0;)(r=o[i])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=g);for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var a,s=n[i],l=s.length,u=o[i]=new Array(l),c=0;c<l;++c)(a=s[c])&&(u[c]=a);u.sort(t)}return new z(o,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length;o<i;++o){var a=r[o];if(a)return a}return null},size:function(){var e=0;return this.each(function(){++e}),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o,i=t[n],a=0,s=i.length;a<s;++a)(o=i[a])&&e.call(o,o.__data__,a,i);return this},attr:function(e,t){var n=i(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}}:"function"==typeof t?n.local?function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}:function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}:n.local?function(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}:function(e,t){return function(){this.setAttribute(e,t)}})(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?function(e){return function(){this.style.removeProperty(e)}}:"function"==typeof t?function(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}:function(e,t,n){return function(){this.style.setProperty(e,t,n)}})(e,t,null==n?"":n)):b(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?function(e){return function(){delete this[e]}}:"function"==typeof t?function(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}:function(e,t){return function(){this[e]=t}})(e,t)):this.node()[e]},classed:function(e,t){var n=S(e+"");if(arguments.length<2){for(var r=_(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each(("function"==typeof t?function(e,t){return function(){(t.apply(this,arguments)?E:O)(this,e)}}:t?function(e){return function(){E(this,e)}}:function(e){return function(){O(this,e)}})(n,t))},text:function(e){return arguments.length?this.each(null==e?C:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(e){return function(){this.textContent=e}})(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?P:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(e){return function(){this.innerHTML=e}})(e)):this.node().innerHTML},raise:function(){return this.each(x)},lower:function(){return this.each(T)},append:function(e){var t="function"==typeof e?e:a(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:a(e),r=null==t?k:"function"==typeof t?t:l(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(A)},clone:function(e){return this.select(e?D:I)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,o,i=function(e){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}(e+""),a=i.length;if(!(arguments.length<2)){for(s=t?G:L,null==n&&(n=!1),r=0;r<a;++r)this.each(s(i[r],t,n));return this}var s=this.node().__on;if(s)for(var l,u=0,c=s.length;u<c;++u)for(r=0,l=s[u];r<a;++r)if((o=i[r]).type===l.type&&o.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?function(e,t){return function(){return B(this,e,t.apply(this,arguments))}}:function(e,t){return function(){return B(this,e,t)}})(e,t))}};var U=q,H=function(e){return"string"==typeof e?new z([[document.querySelector(e)]],[document.documentElement]):new z([[e]],V)},W=function(e){return H(a(e).call(document.documentElement))},K=0;function $(){return new Q}function Q(){this._="@"+(++K).toString(36)}Q.prototype=$.prototype={constructor:Q,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};var Y=function(){for(var e,t=j;e=t.sourceEvent;)t=e;return t},X=function(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}var o=e.getBoundingClientRect();return[t.clientX-o.left-e.clientLeft,t.clientY-o.top-e.clientTop]},Z=function(e){var t=Y();return t.changedTouches&&(t=t.changedTouches[0]),X(e,t)},J=function(e){return"string"==typeof e?new z([document.querySelectorAll(e)],[document.documentElement]):new z([null==e?[]:e],V)},ee=function(e,t,n){arguments.length<3&&(n=t,t=Y().changedTouches);for(var r,o=0,i=t?t.length:0;o<i;++o)if((r=t[o]).identifier===n)return X(e,r);return null},te=function(e,t){null==t&&(t=Y().touches);for(var n=0,r=t?t.length:0,o=new Array(r);n<r;++n)o[n]=X(e,t[n]);return o};n.d(t,"create",function(){return W}),n.d(t,"creator",function(){return a}),n.d(t,"local",function(){return $}),n.d(t,"matcher",function(){return p}),n.d(t,"mouse",function(){return Z}),n.d(t,"namespace",function(){return i}),n.d(t,"namespaces",function(){return o}),n.d(t,"clientPoint",function(){return X}),n.d(t,"select",function(){return H}),n.d(t,"selectAll",function(){return J}),n.d(t,"selection",function(){return U}),n.d(t,"selector",function(){return l}),n.d(t,"selectorAll",function(){return c}),n.d(t,"style",function(){return b}),n.d(t,"touch",function(){return ee}),n.d(t,"touches",function(){return te}),n.d(t,"window",function(){return v}),n.d(t,"event",function(){return j}),n.d(t,"customEvent",function(){return F})},function(e,t,n){"use strict";function r(e){return e.hasOwnProperty("sampleId")}function o(e){return!e.length||r(e[0])}var i=n(598),a=n(4),s=n.n(a),l=n(611),u=n(592),c=n(3);n.d(t,"b",function(){return y}),n.d(t,"f",function(){return g}),n.d(t,"a",function(){return v}),n.d(t,"d",function(){return b}),n.d(t,"e",function(){return w}),n.d(t,"c",function(){return C});var p={"-2":"homdel","-1":"hetloss",0:void 0,1:"gain",2:"amp"},d=Object(c.W)(["trunc_rec","inframe_rec","promoter_rec","missense_rec","other_rec","trunc","inframe","promoter","missense","other"]),f={amp:0,homdel:0,gain:1,hetloss:1},h={high:0,low:0},m={high:0,low:0};function y(e){if("promoter"===(e.proteinChange||"").toLowerCase())return"promoter";var t=Object(i.c)(e.mutationType);switch(t){case"missense":case"inframe":case"fusion":case"other":return t;default:return"trunc"}}function g(e,t){var n=Object.keys(e).map(function(t){return{key:t,value:e[t]}});return n.length>0?(n.sort(function(e,n){var r=t[e.key]-t[n.key];return r<0?-1:r>0?1:e.value<n.value?1:e.value>n.value?-1:0}),n[0].key):void 0}function v(e,t,n){e.trackLabel=t,e.data=n;var r=!1,o={},i={},a={},s={},u={},c=new RegExp(l.c,"i"),v=!0,b=!1,S=void 0;try{for(var _,w=n[Symbol.iterator]();!(v=(_=w.next()).done);v=!0){var E=_.value;switch(E.molecularProfileAlterationType){case"COPY_NUMBER_ALTERATION":var O=p[E.value];O&&(o[O]=o[O]||0,o[O]+=1);break;case"MRNA_EXPRESSION":if(E.alterationSubType){var C=E.alterationSubType;i[C]=i[C]||0,i[C]+=1}break;case"PROTEIN_LEVEL":if(E.alterationSubType){var P=E.alterationSubType;a[P]=a[P]||0,a[P]+=1}break;case"MUTATION_EXTENDED":var x=y(E);"fusion"===x?r=!0:(E.putativeDriver&&(x+="_rec"),u[x]=u[x]||c.test(E.mutationStatus),s[x]=s[x]||0,s[x]+=1)}}}catch(e){b=!0,S=e}finally{try{v||null==w.return||w.return()}finally{if(b)throw S}}return r&&(e.disp_fusion=!0),e.disp_cna=g(o,f),e.disp_mrna=g(i,h),e.disp_prot=g(a,m),e.disp_mut=g(s,d),e.disp_germ=e.disp_mut?u[e.disp_mut]:void 0,e}function b(e,t,n,r,i){if(!n.length)return[];var a=t instanceof Array?t:[t],l=s.a.keyBy(i,function(e){return e.molecularProfileId}),u=[];if(o(n)){var c=!0,p=!1,d=void 0;try{for(var f,h=function(){var t=f.value,n={};n.sample=t.sampleId,n.patient=t.patientId,n.study_id=t.studyId,n.uid=t.uniqueSampleKey;var o=r.samples[t.uniqueSampleKey];n.profiled_in=s.a.flatMap(a,function(e){return o.byGene[e]||[]}),n.profiled_in=n.profiled_in.concat(o.allGenes).filter(function(e){return!!l[e.molecularProfileId]}),n.profiled_in.length||(n.na=!0),n.not_profiled_in=s.a.flatMap(a,function(e){return o.notProfiledByGene[e]||[]}),n.not_profiled_in=n.not_profiled_in.concat(o.notProfiledAllGenes).filter(function(e){return!!l[e.molecularProfileId]});var i=e[t.uniqueSampleKey];u.push(v(n,a.join(" / "),i))},m=n[Symbol.iterator]();!(c=(f=m.next()).done);c=!0)h()}catch(e){p=!0,d=e}finally{try{c||null==m.return||m.return()}finally{if(p)throw d}}}else{var y=!0,g=!1,b=void 0;try{for(var S,_=function(){var t=S.value,n={};n.patient=t.patientId,n.study_id=t.studyId,n.uid=t.uniquePatientKey;var o=r.patients[t.uniquePatientKey];n.profiled_in=s.a.flatMap(a,function(e){return o.byGene[e]||[]}),n.profiled_in=n.profiled_in.concat(o.allGenes).filter(function(e){return!!l[e.molecularProfileId]}),n.profiled_in.length||(n.na=!0),n.not_profiled_in=s.a.flatMap(a,function(e){return o.notProfiledByGene[e]||[]}),n.not_profiled_in=n.not_profiled_in.concat(o.notProfiledAllGenes).filter(function(e){return!!l[e.molecularProfileId]});var i=e[t.uniquePatientKey];u.push(v(n,a.join(" / "),i))},w=n[Symbol.iterator]();!(y=(S=w.next()).done);y=!0)_()}catch(e){g=!0,b=e}finally{try{y||null==w.return||w.return()}finally{if(g)throw b}}}return u}function S(e,t,n,o,i,a){e[t]=n,e.study_id=o.studyId;var l=s.a.filter(i,function(e){return!isNaN(e.value)});if(l&&l.length)if(1===l.length)e.profile_data=l[0].value,l[0].thresholdType&&(e.thresholdType=l[0].thresholdType,e.category=e.profile_data&&e.thresholdType?"".concat(e.thresholdType).concat(e.profile_data.toFixed(2)):void 0);else{if(r(o))throw Error("Unexpectedly received multiple heatmap profile data for one sample");var u;switch(a){case"ASC":var c=s()(l).map(function(e){return e.value}).min();u=_(c,l,!1);break;case"DESC":u=_(c=s()(l).map(function(e){return e.value}).max(),l,!1);break;default:u=_(c=s.a.maxBy(l,function(e){return Math.abs(e.value)}).value,l,!0)}void 0===u&&(u=l[0]),e.profile_data=u.value,u.thresholdType&&(e.thresholdType=u.thresholdType,e.category=e.thresholdType?"".concat(e.thresholdType).concat(e.profile_data.toFixed(2)):void 0)}else e.profile_data=null,e.na=!0;return e}function _(e,t,n){var r=n?function(t){return Math.abs(t.value)===e}:function(t){return t.value===e},o=s.a.filter(t,r),i=s.a.filter(o,function(e){return!e.thresholdType});return i.length>0?i[0]:o[0]}function w(e,t,n,r,i){if(!n.length)return[];var a,l;o(n);return o(n)?(a=s.a.groupBy(r,function(e){return e.uniqueSampleKey}),l=n.map(function(n){var r={};r.sample=n.sampleId,r.uid=n.uniqueSampleKey;var o=a[n.uniqueSampleKey];return S(r,e,t,n,o),r})):(a=s.a.groupBy(r,function(e){return e.uniquePatientKey}),l=n.map(function(n){var r={};r.patient=n.patientId,r.uid=n.uniquePatientKey;var o=a[n.uniquePatientKey];return S(r,e,t,n,o,i),r})),l}function E(e,t){"MUTATION_COUNT"===t.clinicalAttributeId?e.attr_val=0:e.na=!0}function O(e,t,n,r){if(e.attr_id=t.clinicalAttributeId,e.study_id=n.studyId,e.attr_val_counts={},r&&r.length){if("number"===t.datatype.toLowerCase()){var o=[],i=!0,a=!1,s=void 0;try{for(var l,c=r[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var p=l.value,d=parseFloat(p.value+"");isNaN(d)||o.push(d)}}catch(e){a=!0,s=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw s}}if(0===o.length)E(e,t);else{switch(t.clinicalAttributeId){case"MUTATION_COUNT":e.attr_val=o.reduce(function(e,t){return Math.max(e,t)},Number.NEGATIVE_INFINITY);break;default:e.attr_val=o.reduce(function(e,t){return e+t},0)/o.length}e.attr_val_counts[e.attr_val]=1}}else if("string"===t.datatype.toLowerCase()){var f=e.attr_val_counts,h=!0,m=!1,y=void 0;try{for(var g,v=r[Symbol.iterator]();!(h=(g=v.next()).done);h=!0){var b=g.value;f[b.value]=f[b.value]||0,f[b.value]+=1}}catch(e){m=!0,y=e}finally{try{h||null==v.return||v.return()}finally{if(m)throw y}}var S=Object.keys(f);S.length>1?e.attr_val="Mixed":e.attr_val=S[0]}else if(t.clinicalAttributeId===u.c.MutationSpectrum){var _=r,w=e.attr_val_counts;w["C>A"]=0,w["C>G"]=0,w["C>T"]=0,w["T>A"]=0,w["T>C"]=0,w["T>G"]=0;var O=!0,C=!1,P=void 0;try{for(var x,T=_[Symbol.iterator]();!(O=(x=T.next()).done);O=!0){var k=x.value;w["C>A"]+=k.CtoA,w["C>G"]+=k.CtoG,w["C>T"]+=k.CtoT,w["T>A"]+=k.TtoA,w["T>C"]+=k.TtoC,w["T>G"]+=k.TtoG}}catch(e){C=!0,P=e}finally{try{O||null==T.return||T.return()}finally{if(C)throw P}}0===w["C>A"]&&0===w["C>G"]&&0===w["C>T"]&&0===w["T>A"]&&0===w["T>C"]&&0===w["T>G"]&&E(e,t),e.attr_val=e.attr_val_counts}}else E(e,t);return e}function C(e,t,n){s.a.groupBy(n,o(t)?function(e){return e.uniqueSampleKey}:function(e){return e.uniquePatientKey});var r=function(e,t,n){if(e.patientAttribute){var r=s.a.groupBy(n,function(e){return e.uniquePatientKey});return function(e){return r[e.uniquePatientKey]}}var o="sample"===t?function(e){return e.uniqueSampleKey}:function(e){return e.uniquePatientKey},i=s.a.groupBy(n,o);return function(e){return i[o(e)]}}(e,o(t)?"sample":"patient",n);return o(t)?t.map(function(t){var n={};return n.uid=t.uniqueSampleKey,n.sample=t.sampleId,O(n,e,t,r(t)),n}):t.map(function(t){var n={};return n.uid=t.uniquePatientKey,n.patient=t.patientId,O(n,e,t,r(t)),n})}},function(e,t,n){"use strict";function r(e){var t,n=e.length;return e.reverse().map(function(e,r){if(t){var o=Math.min(t,e*n/(n-r));return t=o,o}return t=e,e}).reverse()}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(589);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.map=new r.a}var t,n,i;return t=e,i=[{key:"from",value:function(t){var n=new e,r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;n.add(l)}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}}],(n=[{key:"keys",value:function(){return this.map.entries().filter(function(e){return e.value}).map(function(e){return e.key})}},{key:"add",value:function(e){this.map.set(e,!0)}},{key:"delete",value:function(e){this.map.set(e,!1)}},{key:"has",value:function(e,t){return!!this.map.get(e,t)}},{key:"isEmpty",value:function(){return 0===this.keys().length}},{key:"clear",value:function(){this.map.clear()}}])&&o(t.prototype,n),i&&o(t,i),e}()},function(e,t,n){"use strict";n.d(t,"e",function(){return i}),n.d(t,"d",function(){return a}),n.d(t,"a",function(){return s}),n.d(t,"b",function(){return l}),n.d(t,"c",function(){return u});var r=n(4),o=n(570),i="Coexpression data can be filtered by gene, or by cytoband. To exclude all genes from a cytoband, prefix with a dash -. For example, to exclude all genes on 1p, search '-1p'.";function a(e){return r.sortBy(e,function(e){return e.molecularProfileId.toLowerCase().indexOf("rna_seq")>-1?0:1})}function s(e){return a(e.filter(function(e){var t=!1;if(e.molecularAlterationType===o.a.MRNA_EXPRESSION||e.molecularAlterationType===o.a.PROTEIN_LEVEL){var n=e.molecularProfileId.toLowerCase();t=n.indexOf("merged_median_zscores")>-1||-1===n.indexOf("zscores")}return t}))}function l(e){return e.filter(function(e){var t=!1;e.molecularAlterationType===o.a.GENESET_SCORE&&(t=-1===e.molecularProfileId.toLowerCase().indexOf("gsva_pvalues"));return t})}function u(e,t){return e.map(function(e){var n=e.name;if(t){var r=t[e.molecularProfileId].length;n+=" (".concat(r," sample").concat(1!==r?"s":"",")")}return{label:n,value:e.molecularProfileId}})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(e,t,n,r){return"in"in e&&(e.when=e.in),i.default.Children.count(r)<2?i.default.createElement(a.default,o({},e,{inEffect:t,outEffect:n,children:r})):(r=i.default.Children.map(r,function(r){return i.default.createElement(a.default,o({},e,{inEffect:t,outEffect:n,children:r}))}),"Fragment"in i.default?i.default.createElement(i.default.Fragment,null,r):i.default.createElement("span",null,r))};var i=r(n(0)),a=r(n(970));e.exports=t.default},function(e,t,n){"use strict";var r,o=n(665),i=n(578),a=n(4),s=n.n(a);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u;!function(e){e.defaultGrayRectangle="defaultGrayRectangle",e.ampRectangle="ampRectangle",e.gainRectangle="gainRectangle",e.homdelRectangle="homdelRectangle",e.hetlossRectangle="hetlossRectangle",e.mrnaHighRectangle="mrnaHighRectangle",e.mrnaLowRectangle="mrnaLowRectangle",e.protHighRectangle="protHighRectangle",e.protLowRectangle="protLowRectangle",e.fusionRectangle="fusionRectangle",e.germlineRectangle="germlineRectangle",e.missenseMutationDriverRectangle="missenseMutationDriverRectangle",e.missenseMutationVUSRectangle="missenseMutationVUSRectangle",e.otherMutationRectangle="otherMutationRectangle",e.promoterMutationRectangle="promoterMutationRectangle",e.truncatingMutationDriverRectangle="truncatingMutationDriverRectangle",e.truncatingMutationVUSRectangle="truncatingMutationVUSRectangle",e.inframeMutationDriverRectangle="inframeMutationDriverRectangle",e.inframeMutationVUSRectangle="inframeMutationVUSRectangle"}(u||(u={}));var c=(l(r={},u.defaultGrayRectangle,{type:"rectangle",fill:i.e,z:1}),l(r,u.ampRectangle,{type:"rectangle",fill:i.a,x:0,y:0,width:100,height:100,z:2}),l(r,u.gainRectangle,{type:"rectangle",fill:i.b,x:0,y:0,width:100,height:100,z:2}),l(r,u.homdelRectangle,{type:"rectangle",fill:i.d,x:0,y:0,width:100,height:100,z:2}),l(r,u.hetlossRectangle,{type:"rectangle",fill:i.c,x:0,y:0,width:100,height:100,z:2}),l(r,u.mrnaHighRectangle,{type:"rectangle",fill:"rgba(0, 0, 0, 0)",stroke:i.j,"stroke-width":2,x:0,y:0,width:100,height:100,z:3}),l(r,u.mrnaLowRectangle,{type:"rectangle",fill:"rgba(0, 0, 0, 0)",stroke:i.k,"stroke-width":2,x:0,y:0,width:100,height:100,z:3}),l(r,u.protHighRectangle,{type:"rectangle",fill:i.v,x:0,y:0,width:100,height:20,z:4}),l(r,u.protLowRectangle,{type:"rectangle",fill:i.w,x:0,y:80,width:100,height:20,z:4}),l(r,u.fusionRectangle,{type:"rectangle",fill:i.l,x:0,y:20,width:100,height:60,z:5}),l(r,u.germlineRectangle,{type:"rectangle",fill:i.m,x:0,y:46,width:100,height:8,z:7}),l(r,u.missenseMutationDriverRectangle,{type:"rectangle",fill:i.p,x:0,y:33.33,width:100,height:33.33,z:6}),l(r,u.missenseMutationVUSRectangle,{type:"rectangle",fill:i.q,x:0,y:33.33,width:100,height:33.33,z:6}),l(r,u.otherMutationRectangle,{type:"rectangle",fill:i.r,x:0,y:33.33,width:100,height:33.33,z:6}),l(r,u.promoterMutationRectangle,{type:"rectangle",fill:i.s,x:0,y:33.33,width:100,height:33.33,z:6}),l(r,u.truncatingMutationDriverRectangle,{type:"rectangle",fill:i.t,x:0,y:33.33,width:100,height:33.33,z:6}),l(r,u.truncatingMutationVUSRectangle,{type:"rectangle",fill:i.u,x:0,y:33.33,width:100,height:33.33,z:6}),l(r,u.inframeMutationDriverRectangle,{type:"rectangle",fill:i.n,x:0,y:33.33,width:100,height:33.33,z:6}),l(r,u.inframeMutationVUSRectangle,{type:"rectangle",fill:i.o,x:0,y:33.33,width:100,height:33.33,z:6}),r),p={always:{shapes:[c[u.defaultGrayRectangle]],legend_label:"No alterations",legend_order:Number.POSITIVE_INFINITY},conditional:{disp_cna:{amp:{shapes:[c[u.ampRectangle]],legend_label:"Amplification",legend_order:10},gain:{shapes:[c[u.gainRectangle]],legend_label:"Gain",legend_order:11},homdel:{shapes:[c[u.homdelRectangle]],legend_label:"Deep Deletion",legend_order:12},hetloss:{shapes:[c[u.hetlossRectangle]],legend_label:"Shallow Deletion",legend_order:13}},disp_mrna:{high:{shapes:[c[u.mrnaHighRectangle]],legend_label:"mRNA High",legend_order:20},low:{shapes:[c[u.mrnaLowRectangle]],legend_label:"mRNA Low",legend_order:21}},disp_prot:{high:{shapes:[c[u.protHighRectangle]],legend_label:"Protein High",legend_order:31},low:{shapes:[c[u.protLowRectangle]],legend_label:"Protein Low",legend_order:32}},disp_fusion:{true:{shapes:[c[u.fusionRectangle]],legend_label:"Fusion",legend_order:1}}}},d={disp_germ:{true:{shapes:[{type:"rectangle",fill:i.m,x:0,y:46,width:100,height:8,z:7}],legend_label:"Germline Mutation",legend_order:2}}},f={type:o.RuleSetType.GENE,legend_label:"Genetic Alteration",na_legend_label:"Not profiled",legend_base_color:i.e},h=s.a.assign({},f,{rule_params:{always:p.always,conditional:s.a.assign({},p.conditional,{disp_mut:{"trunc,inframe,missense,promoter,other,trunc_rec,inframe_rec,missense_rec,promoter_rec,other_rec":{shapes:[c[u.missenseMutationDriverRectangle]],legend_label:"Mutation",legend_order:0}}})}}),m=s.a.assign({},f,{rule_params:{always:p.always,conditional:s.a.assign({},p.conditional,{disp_mut:{"missense_rec,inframe_rec,trunc_rec,promoter_rec,other_rec":{shapes:[c[u.missenseMutationDriverRectangle]],legend_label:"Mutation (putative driver)",legend_order:0},"missense,inframe,trunc,promoter,other":{shapes:[c[u.missenseMutationVUSRectangle]],legend_label:"Mutation (unknown significance)",legend_order:0}}})}}),y=s.a.assign({},f,{rule_params:{always:p.always,conditional:s.a.assign({},p.conditional,{disp_mut:{"other,other_rec":{shapes:[c[u.otherMutationRectangle]],legend_label:"Other Mutation",legend_order:0},"promoter,promoter_rec":{shapes:[c[u.promoterMutationRectangle]],legend_label:"Promoter Mutation",legend_order:0},"trunc,trunc_rec":{shapes:[c[u.truncatingMutationDriverRectangle]],legend_label:"Truncating Mutation",legend_order:0},"inframe,inframe_rec":{shapes:[c[u.inframeMutationDriverRectangle]],legend_label:"Inframe Mutation",legend_order:0},"missense,missense_rec":{shapes:[c[u.missenseMutationDriverRectangle]],legend_label:"Missense Mutation",legend_order:0}}})}}),g=s.a.assign({},f,{rule_params:{always:p.always,conditional:s.a.assign({},p.conditional,{disp_mut:{"other,other_rec":{shapes:[c[u.otherMutationRectangle]],legend_label:"Other Mutation",legend_order:0},"promoter,promoter_rec":{shapes:[c[u.promoterMutationRectangle]],legend_label:"Promoter Mutation",legend_order:0},trunc_rec:{shapes:[c[u.truncatingMutationDriverRectangle]],legend_label:"Truncating Mutation (putative driver)",legend_order:0},trunc:{shapes:[c[u.truncatingMutationVUSRectangle]],legend_label:"Truncating Mutation (unknown significance)",legend_order:0},inframe_rec:{shapes:[c[u.inframeMutationDriverRectangle]],legend_label:"Inframe Mutation (putative driver)",legend_order:0},inframe:{shapes:[c[u.inframeMutationVUSRectangle]],legend_label:"Inframe Mutation (unknown significance)",legend_order:0},missense_rec:{shapes:[c[u.missenseMutationDriverRectangle]],legend_label:"Missense Mutation (putative driver)",legend_order:0},missense:{shapes:[c[u.missenseMutationVUSRectangle]],legend_label:"Missense Mutation (unknown significance)",legend_order:0}}})}}),v=n(570),b=n(3),S=n(619),_=n(2),w=n(588),E=n(592),O=n(604);function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(t,"h",function(){return I}),n.d(t,"f",function(){return D}),n.d(t,"g",function(){return M}),n.d(t,"e",function(){return j}),n.d(t,"p",function(){return N}),n.d(t,"a",function(){return G}),n.d(t,"d",function(){return B}),n.d(t,"c",function(){return V}),n.d(t,"i",function(){return z}),n.d(t,"n",function(){return U}),n.d(t,"j",function(){return H}),n.d(t,"o",function(){return W}),n.d(t,"k",function(){return K}),n.d(t,"l",function(){return $}),n.d(t,"m",function(){return Q}),n.d(t,"b",function(){return Y});var P=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};function x(e,t,n,r){var o=this;return r.initIteration(t,n),function(){return P(o,void 0,void 0,regeneratorRuntime.mark(function n(){var o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.next(t,5);case 2:n.t0=function(e){return{entrezGeneId:e.entrezGeneId,hugoGeneSymbol:e.hugoGeneSymbol,correlationValue:e.correlationValue,molecularProfileId:e.zScoreGeneticProfileId}},o=n.sent.map(n.t0),Object(_.runInAction)("genesetHeatmapExpansion",function(){var n=e.expansionsByGenesetHeatmapTrackKey.get(t)||[];e.expansionsByGenesetHeatmapTrackKey.set(t,n.concat(o))});case 5:case"end":return n.stop()}},n)}))}}function T(e,t,n,r,o){return Object(_.action)("genesetHeatmapUnexpansion",function(){var i=e.expansionsByGenesetHeatmapTrackKey.get(t);if(!i)throw new Error("Track '".concat(t,"' has no expansions to remove."));if(r===e.genesetHeatmapTrackGroup){var a=i.findIndex(function(e){return e.entrezGeneId===n});-1!==a&&(i.splice(a,1),i.length||o())}})}function k(e){return Object(w.f)(e)?"":e.oql_line.substring(e.gene.length).replace(";","")}function A(e){return Object(w.f)(e)?"[".concat(e.list.map(function(e){return e.oql_line}).join(" "),"]"):e.oql_line}function I(e){var t,n,r,i,a="",l="";switch(e.molecularAlterationType){case v.a.GENERIC_ASSAY:return function(e){var t,n,r,i,a;n="".concat(e.molecularProfileName);var l=e.data,u=e.pivotThreshold,c=e.sortOrder,p=[0,114,178,1],d=[204,236,255,1],f=["rgba(240,228,66,1)","rgba(0,158,115,1)","rgba(204,121,167,1)","rgba(0,0,0,1)"],h=e.maxProfileValue,m=e.minProfileValue;void 0!==u&&(h=Math.max(h,u),m=Math.min(m,u));var y=u&&(h===u||m===u),g=Math.max(0,h),v=Math.min(0,m);t=[v,g],void 0===u||y?(r=[p,d],i=[v,g]):(r=[p,d,[255,226,204,1],[213,94,0,1]],i=u<=v?[u-(g-u),u,u,g]:u>=g?[v,u,u,u+(u-v)]:[v,u,u,g]);"DESC"===c&&(t=s.a.reverse(t),i=s.a.reverse(i));var b=0;return s()(l).filter(function(e){return!!e.category}).map(function(e){return e.category}).uniq().value().forEach(function(e){void 0===a&&(a={}),a[e]=f[b++],b===f.length&&(b=0)}),{type:o.RuleSetType.GRADIENT_AND_CATEGORICAL,legend_label:n,value_key:"profile_data",value_range:t,colors:r,value_stop_points:i,null_color:"rgba(224,224,224,1)",category_key:"category",category_to_color:a}}(e);case v.a.METHYLATION:t=[0,1],n="Methylation Heatmap",i=[0,.35,1],r=[[0,0,255,1],[255,255,255,1],[255,0,0,1]];break;case v.a.MUTATION_EXTENDED:t=[0,1],n="VAF Heatmap",a="Not mutated/no VAF data",l="Not sequenced",i=[0,1],r=[[241,242,181,1],[19,80,88,1]];break;default:t=[-3,3],n="Expression Heatmap",i=[-3,0,3],r=[[0,0,255,1],[0,0,0,1],[255,0,0,1]]}return{type:o.RuleSetType.GRADIENT,legend_label:n,value_key:"profile_data",value_range:t,colors:r,value_stop_points:i,null_color:"rgba(224,224,224,1)",null_legend_label:a,na_legend_label:l,na_shapes:e.customNaShapes}}function D(){return{type:o.RuleSetType.GRADIENT,legend_label:"Gene Set Heatmap",value_key:"profile_data",value_range:[-1,1],colors:[[39,100,25,1],[77,146,33,1],[127,188,65,1],[184,225,134,1],[230,245,208,1],[247,247,247,1],[253,224,239,1],[241,182,218,1],[222,119,174,1],[197,27,125,1],[142,1,82,1]],value_stop_points:[-1,-.8,-.6,-.4,-.2,0,.2,.4,.6,.8,1],null_color:"rgba(224,224,224,1)"}}function M(e,t,n){var r;return r=e||t?!e&&t?m:e&&!t?y:g:h,r=s.a.cloneDeep(r),n&&Object.assign(r.rule_params.conditional,d),r}function j(e){var t;switch(e.datatype){case"number":t={type:o.RuleSetType.BAR,value_key:"attr_val",value_range:e.numberRange,log_scale:e.numberLogScale};break;case"counts":t={type:o.RuleSetType.STACKED_BAR,value_key:"attr_val",categories:e.countsCategoryLabels,fills:e.countsCategoryFills};break;case"string":default:t={type:o.RuleSetType.CATEGORICAL,category_key:"attr_val",category_to_color:Object.assign({},e.category_to_color,i.x)}}return t}function N(e,t){if(0===t)return"N/P";var n,r=e/t,o=100*r;return r<.03?"0"===(n=o.toFixed(1))[n.length-1]&&(n=o.toFixed()):n=o.toFixed(),n+"%"}function R(e,t,n,r){var o=t instanceof Array?t:[t.gene];return e?s.a.uniq(s.a.flatMap(o,function(e){return n[e]})).length:s.a.uniq(s.a.flatMap(o,function(e){return r[e]})).length}function L(e,t,n,r){var o=R(e,t.oql,n,r),i=s.a.sumBy(t.trackData,function(e){return+F(e)});return{sequenced:o,altered:i,percent:N(i,o)}}function G(e,t,n,r){var o=R(e,t.oql,n,r),i=e?Object.keys(t.cases.samples).filter(function(e){return!!t.cases.samples[e].length}).length:Object.keys(t.cases.patients).filter(function(e){return!!t.cases.patients[e].length}).length;return{sequenced:o,altered:i,percent:N(i,o)}}function F(e){return e.data.length>0}function B(e){var t={},n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value,l=!0,u=!1,c=void 0;try{for(var p,d=s.data[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var f=p.value;F(f)&&(t[f.uid]=!0)}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return Object.keys(t)}function V(e,t,n,r,o,i,a,s,l){var u=a.oql,c=Object(w.f)(u)?u.list.map(function(e){return e.gene}):[u.gene],p=a.cases,d=L(!1,{trackData:Object(S.d)(p.patients,c,t,n,i),oql:c},r,o);return s||!l.map(function(e){return e.hugoGeneSymbol}).includes(u.gene)?{gene:u.gene,altered:d.altered,sequenced:d.sequenced,percentAltered:d.percent}:void 0}function z(e){var t=s.a.chain(e).map(function(e){return e.data.map(function(e){return e.uid})}).flatten().uniq().value();return s.a.difference(t,B(e))}function q(e){var t=e.sampleMode,n=e.oncoprint,r=e.samples,o=e.patients,i=e.coverageInformation,a=e.sequencedSampleKeysByGene,l=e.sequencedPatientKeysByGene,u=e.selectedMolecularProfiles,c=e.expansionIndexMap;return function e(p,d,f){var h=p.oql,m=Object(w.f)(h)?h.list.map(function(e){return e.gene}):[h.gene],y=p.cases,g=t?Object(S.d)(y.samples,m,r,i,u):Object(S.d)(y.patients,m,o,i,u),v=L(t,{trackData:g,oql:m},a,l),b=void 0===f?"GENETICTRACK_".concat(d):"".concat(f,"_EXPANSION_").concat(d),_=Object(w.f)(h)?function(){c.set(b,s.a.range(h.list.length))}:void 0,E=void 0!==f?function(){c.get(f).remove(d)}:void 0,O=[];if(p.mergedTrackOqlList){var C=p.mergedTrackOqlList;O=(c.get(b)||[]).map(function(t){return e(C[t],t,b)})}var P,x=v.percent,T=void 0;return 0!==v.sequenced&&(T="altered / profiled = ".concat(v.altered," / ").concat(v.sequenced)),v.sequenced>0&&v.sequenced<(t?r:o).length&&(x="".concat(x,"*")),{key:b,label:(void 0!==f?"  ":"")+(P=h,Object(w.f)(P)?P.label||P.list.map(function(e){return e.gene}).join(" / "):P.gene),sublabel:k(h),labelColor:void 0!==f?"grey":void 0,oql:A(h),info:x,infoTooltip:T,data:g,expansionCallback:_,removeCallback:E,expansionTrackList:O.length?O:void 0,customOptions:[{separator:!0},{label:"Sort by genes",onClick:n.clearSortDirectionsAndSortByData}]}}}function U(e,t){var n=this;return Object(b.S)({await:function(){return[e.props.store.samples,e.props.store.patients,e.props.store.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine,e.props.store.coverageInformation,e.props.store.sequencedSampleKeysByGene,e.props.store.sequencedPatientKeysByGene,e.props.store.selectedMolecularProfiles]},invoke:function(){return P(n,void 0,void 0,regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=q({sampleMode:t,oncoprint:e,samples:e.props.store.samples.result,patients:e.props.store.patients.result,coverageInformation:e.props.store.coverageInformation.result,sequencedSampleKeysByGene:e.props.store.sequencedSampleKeysByGene.result,sequencedPatientKeysByGene:e.props.store.sequencedPatientKeysByGene.result,selectedMolecularProfiles:e.props.store.selectedMolecularProfiles.result,expansionIndexMap:e.expansionsByGeneticTrackKey}),n.abrupt("return",e.props.store.oqlFilteredCaseAggregatedDataByUnflattenedOQLLine.result.map(function(e,t){return r(e,t,void 0)}));case 2:case"end":return n.stop()}},n)}))},default:[]})}function H(e,t){var n=this;return Object(b.S)({await:function(){var t=[e.props.store.samples,e.props.store.patients,e.props.store.clinicalAttributeIdToClinicalAttribute,e.alteredKeys];if(e.props.store.clinicalAttributeIdToClinicalAttribute.isComplete){var n=e.selectedClinicalAttributeIds.keys().map(function(t){return e.props.store.clinicalAttributeIdToClinicalAttribute.result[t]}).filter(function(e){return!!e});t=t.concat(e.props.store.clinicalDataCache.getAll(n))}return t},invoke:function(){return P(n,void 0,void 0,regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(0!==e.selectedClinicalAttributeIds.keys().length){n.next=2;break}return n.abrupt("return",[]);case 2:return r=e.selectedClinicalAttributeIds.keys().map(function(t){return e.props.store.clinicalAttributeIdToClinicalAttribute.result[t]}).filter(function(e){return!!e}),n.abrupt("return",r.map(function(n){var r=e.props.store.clinicalDataCache.get(n).result,o=void 0;e.onlyShowClinicalLegendForAlteredCases&&(o=e.alteredKeys.result);var i={key:e.clinicalAttributeIdToTrackKey(n.clinicalAttributeId),attributeId:n.clinicalAttributeId,label:n.displayName,description:n.description,data:Object(S.c)(n,t?e.props.store.samples.result:e.props.store.patients.result,r.data),altered_uids:o};return Object(E.f)(n)&&(i.na_tooltip_value="No",i.na_legend_label="No"),"NUMBER"===n.datatype?(i.datatype="number","FRACTION_GENOME_ALTERED"===n.clinicalAttributeId?i.numberRange=[0,1]:"MUTATION_COUNT"===n.clinicalAttributeId?i.numberLogScale=!0:n.clinicalAttributeId===E.c.NumSamplesPerPatient&&(i.numberRange=[0,void 0],i.custom_options=t?[{label:"Show one column per patient.",onClick:function(){return e.controlsHandlers.onSelectColumnType("patient")}}]:[{label:"Show one column per sample.",onClick:function(){return e.controlsHandlers.onSelectColumnType("sample")}}])):"STRING"===n.datatype?(i.datatype="string",i.category_to_color=r.categoryToColor):n.clinicalAttributeId===E.c.MutationSpectrum&&(i.datatype="counts",i.countsCategoryLabels=E.a,i.countsCategoryFills=E.b),i}));case 4:case"end":return n.stop()}},n)}))},default:[]})}function W(e,t){var n=this;return Object(b.S)({await:function(){return[e.props.store.samples,e.props.store.patients,e.props.store.molecularProfileIdToMolecularProfile,e.props.store.geneMolecularDataCache]},invoke:function(){return P(n,void 0,void 0,regeneratorRuntime.mark(function n(){var r,o,i,a,l,u,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.store.molecularProfileIdToMolecularProfile.result,o=e.molecularProfileIdToHeatmapTracks,i=s.a.filter(s.a.values(o),function(e){return e.molecularAlterationType!==v.a.GENERIC_ASSAY}),a=s.a.flatten(i.map(function(e){return s.a.keys(e.entities)})),n.next=6,e.props.store.geneCache.getPromise(a.map(function(e){return{hugoGeneSymbol:e}}),!0);case 6:return l=s.a.flatten(i.map(function(t){return s.a.keys(t.entities).map(function(n){return{molecularProfileId:t.molecularProfileId,entrezGeneId:e.props.store.geneCache.get({hugoGeneSymbol:n}).data.entrezGeneId,hugoGeneSymbol:n.toUpperCase()}})})),n.next=9,e.props.store.geneMolecularDataCache.result.getPromise(l,!0);case 9:return u=e.props.store.samples.result,c=e.props.store.patients.result,n.abrupt("return",l.map(function(n){var i=n.molecularProfileId,a=n.hugoGeneSymbol,l=e.props.store.geneMolecularDataCache.result.get(n).data;return{key:"HEATMAPTRACK_".concat(i,",").concat(a),label:a,molecularProfileId:i,molecularAlterationType:r[i].molecularAlterationType,datatype:r[i].datatype,data:Object(S.e)("hugo_gene_symbol",a,t?u:c,l),trackGroupIndex:o[i].trackGroupIndex,onClickRemoveInTrackMenu:Object(_.action)(function(){var t=e.molecularProfileIdToHeatmapTracks[i];if(t){var n=s.a.keys(t.entities).filter(function(e){return e!==a});0===n.length?e.removeHeatmapByMolecularProfileId(i):e.addHeatmapTracks(i,n)}void 0===t&&"heatmap"===e.sortMode.type&&e.sortMode.clusteredHeatmapProfile===i&&e.sortByData()})}}));case 12:case"end":return n.stop()}},n)}))},default:[]})}function K(e,t){var n=this;return Object(b.S)({await:function(){return[e.props.store.samples,e.props.store.patients,e.props.store.molecularProfileIdToMolecularProfile,e.props.store.genericAssayMolecularDataCache,e.props.store.genericAssayEntitiesGroupByGenericAssayTypeLinkMap,e.props.store.genericAssayEntitiesGroupByGenericAssayType]},invoke:function(){return P(n,void 0,void 0,regeneratorRuntime.mark(function n(){var r,o,i,a,l,u,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.store.molecularProfileIdToMolecularProfile.result,o=e.molecularProfileIdToHeatmapTracks,i=s.a.filter(o,function(e){return e.molecularAlterationType===v.a.GENERIC_ASSAY}),a=s.a.flatten(i.map(function(t){var n=r[t.molecularProfileId].genericAssayType,o=s.a.keyBy(e.props.store.genericAssayEntitiesGroupByGenericAssayType.result[n],function(e){return e.stableId});return s.a.keys(t.entities).map(function(e){var n=o[e];return{molecularProfileId:t.molecularProfileId,stableId:e,entityName:"NAME"in n.genericEntityMetaProperties?n.genericEntityMetaProperties.NAME:O.a}})})),n.next=6,e.props.store.genericAssayMolecularDataCache.result.getPromise(a.map(function(e){return{molecularProfileId:e.molecularProfileId,stableId:e.stableId}}),!0);case 6:return l=e.props.store.samples.result,u=e.props.store.patients.result,c=a.map(function(n){var i=n.molecularProfileId,a=r[i],c=e.props.store.genericAssayMolecularDataCache.result,p=n.stableId,d=a.pivotThreshold,f=a.sortOrder,h=e.props.store.genericAssayEntitiesGroupByGenericAssayTypeLinkMap.result[a.genericAssayType];return{key:"GENERICASSAYHEATMAPTRACK_".concat(i,",").concat(p),label:n.entityName,molecularProfileId:n.molecularProfileId,molecularProfileName:r[i].name,molecularAlterationType:r[i].molecularAlterationType,datatype:r[i].datatype,data:Object(S.e)("entityId",p,t?l:u,c.get(n).data.map(function(e){return Object.assign(Object.assign({},e),{value:parseFloat(e.value)})}),f),pivotThreshold:d,sortOrder:f,trackLinkUrl:h[p],trackGroupIndex:o[i].trackGroupIndex,onClickRemoveInTrackMenu:Object(_.action)(function(){var t=e.molecularProfileIdToHeatmapTracks[i];if(t){var n=s.a.keys(t.entities).filter(function(e){return e!==p});e.addHeatmapTracks(i,n)}void 0===t&&"heatmap"===e.sortMode.type&&e.sortMode.clusteredHeatmapProfile===i&&e.sortByData()})}}),n.abrupt("return",c);case 10:case"end":return n.stop()}},n)}))},default:[]})}function $(e,t){var n=this;return Object(b.S)({await:function(){return[e.props.store.samples,e.props.store.patients,e.props.store.molecularProfileIdToMolecularProfile,e.props.store.geneMolecularDataCache,e.props.store.genesetCorrelatedGeneCache]},invoke:function(){return P(n,void 0,void 0,regeneratorRuntime.mark(function n(){var r,o,i,a,l,u,c,p,d;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.store.samples.result,o=e.props.store.patients.result,i=e.props.store.molecularProfileIdToMolecularProfile.result,a=e.props.store.geneMolecularDataCache.result,l=e.props.store.genesetCorrelatedGeneCache.result,u=e.genesetHeatmapTrackGroup,c=e.expansionsByGenesetHeatmapTrackKey,p=s.a.flatten(c.values().map(function(e){return e.slice()})).map(function(e){return{entrezGeneId:e.entrezGeneId,molecularProfileId:e.molecularProfileId}}),n.next=10,a.getPromise(p,!0);case 10:return d={},c.entries().forEach(function(n){var s=C(n,2),c=s[0],p=s[1];d[c]=p.map(function(n){var s=n.entrezGeneId,p=n.hugoGeneSymbol,d=n.molecularProfileId,f=n.correlationValue,h=a.get({entrezGeneId:s,molecularProfileId:d}).data,m=i[d];return{key:"EXPANSIONTRACK_".concat(c,",").concat(p,",GROUP").concat(u),label:"  "+p,labelColor:"grey",info:f.toFixed(2),molecularProfileId:d,molecularAlterationType:m.molecularAlterationType,datatype:m.datatype,data:Object(S.e)("hugo_gene_symbol",p,t?r:o,h),trackGroupIndex:u,onRemove:T(e,c,s,u,l.reset.bind(l,c))}})}),n.abrupt("return",d);case 13:case"end":return n.stop()}},n)}))},default:{}})}function Q(e,t,n){var r=this;return Object(b.S)({await:function(){return[e.props.store.samples,e.props.store.patients,e.props.store.genesetMolecularProfile,e.props.store.genesetMolecularDataCache,e.props.store.genesetLinkMap,e.props.store.genesetCorrelatedGeneCache,n]},invoke:function(){return P(r,void 0,void 0,regeneratorRuntime.mark(function r(){var o,i,a,s,l,u,c,p,d,f,h;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(o=e.props.store.samples.result,i=e.props.store.patients.result,a=e.props.store.genesetMolecularProfile.result,s=e.props.store.genesetMolecularDataCache.result,l=e.props.store.genesetLinkMap.result,u=e.props.store.genesetCorrelatedGeneCache.result,c=n.result,p=e.genesetHeatmapTrackGroup,a.isApplicable){r.next=10;break}return r.abrupt("return",[]);case 10:return d=a.value.molecularProfileId,f=e.props.store.genesetIds,h=f.map(function(e){return{molecularProfileId:d,genesetId:e}}),r.next=15,s.getPromise(h,!0);case 15:return r.abrupt("return",f.map(function(n){var r="GENESETHEATMAPTRACK_".concat(d,",").concat(n);return{key:"GENESETHEATMAPTRACK_".concat(d,",").concat(n,",GROUP").concat(p),label:n,molecularProfileId:d,molecularAlterationType:a.value.molecularAlterationType,datatype:a.value.datatype,trackLinkUrl:l[n],data:Object(S.e)("geneset_id",n,t?o:i,s.get({molecularProfileId:d,genesetId:n}).data.map(function(e){return Object.assign(Object.assign({},e),{value:parseFloat(e.value)})})),trackGroupIndex:p,expansionCallback:x(e,r,{molecularProfileId:d,genesetId:n},u),expansionTrackList:c[r]}}));case 16:case"end":return r.stop()}},r)}))},default:[]})}function Y(e,t,n){var r=function(e){return e=e.replace(/[,\s\n]+/g," ").trim(),s.a.uniq(e.split(/[,\s\n]+/))}(e),o=[];return s.a.each(r,function(e){e in n&&(o.push(e),t.includes(e)||t.push(e))}),o.length>0&&s.a.each(o,function(t){e=e.replace(t,"")}),e.trim().replace("\t+","\t").replace(" +"," ")}},function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"c",function(){return a}),n.d(t,"d",function(){return s}),n.d(t,"e",function(){return l}),n.d(t,"b",function(){return d});var r=n(4),o=n(678),i=["5xzc"];function a(e,t){var n={pdbInfo:e.title};return r.find(e.compound,function(e){if(e.molecule&&-1!==r.indexOf(e.chain,t.toLowerCase()))return n.moleculeInfo=e.molecule,e}),n}function s(e){return function(e){var t={};return e.forEach(function(e){t[e.pdbId]||(t[e.pdbId]={}),t[e.pdbId][e.chain]||(t[e.pdbId][e.chain]=[]),t[e.pdbId][e.chain].push(e)}),t}(e)}function l(e){var t=[];return r.each(e,function(e){r.each(e,function(e){var n=function(e){var t,n="";if(!(e.length>0))return;t=e[0].seqFrom;return e.forEach(function(e){var r=function(e){var t,n=e.midlineAlign,r=e.seqAlign,o=e.pdbAlign;if(n.length===r.length&&n.length===o.length){for(var i=[],a=0;a<n.length;a++)"-"!==r[a]&&("-"===o[a]?i.push("-"):i.push(n[a]));t=i.join("")}return t}(e)||"",o=Math.abs(e.seqFrom-t);if(e.seqFrom<t){var i=Math.abs(r.length-o);n=r.length>=o?r+n.substr(i):r+u(i)+n}else if(e.seqFrom>=t){var a=Math.abs(n.length-o);n=n.length>=o?n.substr(0,n.length-a)+r+n.substr(n.length-a+r.length):n+u(a)+r}t=Math.min(t,e.seqFrom)}),{pdbId:e[0].pdbId,chain:e[0].chain,uniprotStart:t,uniprotEnd:t+n.length-1,alignment:n,identityPerc:c(n),identity:p(n)}}(e);n&&t.push(n)})}),t}function u(e){for(var t=[],n=0;n<e;n++)t.push(o.a);return t.join("")}function c(e){for(var t=0,n=0,r=0;r<e.length;r++){var i=e[r];i===o.a?t++:i!==o.b&&i!==o.c&&i!==o.d||n++}return 1-n/(e.length-t)}function p(e){e=e.toLowerCase();for(var t=0,n=0;n<e.length;n++)e[n].match(/[a-z]/)&&t++;return t}function d(e,t){for(var n=[0,0,0,0],r=t?-1:1,o=0;o<e.length||o<5;o++)n.push(r*e.charCodeAt(o));return n}},,function(e,t,n){"use strict";var r=n(14),o=n(15),i=n(2);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":s(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},u=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._promise=t,Object(i.runInAction)(function(){n._status="pending",t.then(Object(i.action)(function(e){n._status="complete",n._result=e}),Object(i.action)(function(e){n._status="error",n._error=e}))})}var t,n,r;return t=e,(n=[{key:"status",get:function(){return this._status}},{key:"result",get:function(){return this._result}},{key:"error",get:function(){return this._error}},{key:"promise",get:function(){return this._promise}}])&&a(t.prototype,n),r&&a(t,r),e}();function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}l([i.observable],u.prototype,"_status",void 0),l([i.observable],u.prototype,"_result",void 0),l([i.observable],u.prototype,"_error",void 0),l([i.computed],u.prototype,"status",null),l([i.computed],u.prototype,"result",null),l([i.computed],u.prototype,"error",null),l([i.computed],u.prototype,"promise",null);var p=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},d=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._pendingDeletions=[]}var t,n,i;return t=e,(n=[{key:"getPendingDeletions",value:function(){return this._pendingDeletions=this._pendingDeletions.filter(function(e){return"pending"!==e.status}),this._pendingDeletions.map(function(e){return e.promise})}},{key:"addGroup",value:function(e){return r.post(Object(o.e)()).send(e).then(function(e){return{id:e.body.id}})}},{key:"updateGroup",value:function(e,t){return r.post("".concat(Object(o.e)(),"/").concat(e)).send(t)}},{key:"getGroup",value:function(e){return r.get("".concat(Object(o.e)(),"/").concat(e)).then(function(e){return e.body})}},{key:"getGroupsForStudies",value:function(e){return p(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(this.getPendingDeletions());case 2:return t.abrupt("return",r.post(Object(o.c)()).send(e).then(function(e){return e.body}));case 3:case"end":return t.stop()}},t,this)}))}},{key:"deleteGroup",value:function(e){var t=r.get("".concat(Object(o.e)(),"/delete/").concat(e)).then(function(){});return this._pendingDeletions.push(new u(t)),t}},{key:"addComparisonSession",value:function(e){return r.post(Object(o.g)()).send(e).then(function(e){return{id:e.body.id}})}},{key:"getComparisonSession",value:function(e){return p(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.get("".concat(Object(o.g)(),"/").concat(e)).then(function(e){return e.body});case 2:return n=t.sent,t.abrupt("return",Object.assign(n.data,{id:n.id}));case 4:case"end":return t.stop()}},t)}))}}])&&c(t.prototype,n),i&&c(t,i),e}());t.a=d},function(e,t,n){"use strict";var r;function o(e){return r[e]||""}n.d(t,"a",function(){return o}),function(e){e[e.Deletion=-2]="Deletion",e[e.Loss=-1]="Loss",e[e.Gain=1]="Gain",e[e.Amplification=2]="Amplification"}(r||(r={}))},,function(e,t,n){"use strict";n.d(t,"a",function(){return C}),n.d(t,"b",function(){return T});var r=n(577),o=n(185),i=n(3),a=n(2),s=n(178),l=n(627),u=n(4),c=n.n(u),p=n(600),d=n(585),f=n(103),h=n(8),m=n(705),y=n(574),g=n(620),v=n(589),b=n(657),S=n(572),_=n(601),w=n(615);function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var C,P=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":O(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},x=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};!function(e){e.INCLUDE="Include",e.EXCLUDE="Exclude"}(C||(C={}));var T=function(){function e(t,n){var u=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.appStore=t,this.resultsViewStore=n,this.tabHasBeenShown=a.observable.map(),this.newSessionPending=!1,this.origin=Object(i.S)({await:function(){return[u._session]},invoke:function(){return Promise.resolve(u._session.result.origin)}}),this.existingGroupNames=Object(i.S)({await:function(){return[u._originalGroups,u.origin]},invoke:function(){return x(u,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={session:this._originalGroups.result.map(function(e){return e.name}),user:[]},!this.isLoggedIn){e.next=6;break}return e.next=4,l.a.getGroupsForStudies(this.origin.result);case 4:e.t0=function(e){return e.data.name},t.user=e.sent.map(e.t0);case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}},e,this)}))}}),this.overlapComputations=Object(i.S)({await:function(){return[u._originalGroups]},invoke:function(){return Promise.resolve(Object(r.u)(u._originalGroups.result,u.isGroupSelected))}}),this.availableGroups=Object(i.S)({await:function(){return[u._originalGroups,u._originalGroupsOverlapRemoved]},invoke:function(){var e;switch(u.overlapStrategy){case C.INCLUDE:e=u._originalGroups.result;break;case C.EXCLUDE:default:e=u._originalGroupsOverlapRemoved.result}return Promise.resolve(e)}}),this.activeGroups=Object(i.S)({await:function(){return[u.availableGroups]},invoke:function(){return Promise.resolve(u.availableGroups.result.filter(function(e){return u.isGroupSelected(e.name)&&!Object(r.B)(e)}))}}),this.enrichmentAnalysisGroups=Object(i.S)({await:function(){return[u.activeGroups,u.sampleSet]},invoke:function(){var e=u.sampleSet.result||new v.a,t=u.activeGroups.result.map(function(t){var n=[];return t.studies.forEach(function(t){var r=t.id;t.samples.forEach(function(t){if(e.has({studyId:r,sampleId:t})){var o=e.get({studyId:r,sampleId:t});n.push(o)}})}),{name:t.nameWithOrdinal,description:"",count:Object(r.s)(t),color:t.color,samples:n,nameOfEnrichmentDirection:t.nameOfEnrichmentDirection}});return Promise.resolve(t)}}),this._originalGroupsOverlapRemoved=Object(i.S)({await:function(){return[u.overlapComputations,u._originalGroups]},invoke:function(){return Promise.resolve(u.overlapComputations.result.groups)}}),this._activeGroupsOverlapRemoved=Object(i.S)({await:function(){return[u._originalGroupsOverlapRemoved]},invoke:function(){return Promise.resolve(u._originalGroupsOverlapRemoved.result.filter(function(e){return u.isGroupSelected(e.name)&&!Object(r.B)(e)}))}}),this._activeGroupsNotOverlapRemoved=Object(i.S)({await:function(){return[u._originalGroups,u.overlapComputations]},invoke:function(){var e=u.overlapComputations.result.excludedFromAnalysis;return u.overlapStrategy===C.INCLUDE&&(e={}),Promise.resolve(u._originalGroups.result.filter(function(t){return u.isGroupSelected(t.name)&&!(t.uid in e)}))}}),this._selectedGroups=Object(i.S)({await:function(){return[u._originalGroups]},invoke:function(){return Promise.resolve(u._originalGroups.result.filter(function(e){return u.isGroupSelected(e.name)}))}}),this.activeSamplesNotOverlapRemoved=Object(i.S)({await:function(){return[u.sampleSet,u._activeGroupsNotOverlapRemoved]},invoke:function(){var e=Object(r.w)(u._activeGroupsNotOverlapRemoved.result),t=u.sampleSet.result;return Promise.resolve(e.map(function(e){return t.get(e)}))}}),this.activePatientKeysNotOverlapRemoved=Object(i.S)({await:function(){return[u.activeSamplesNotOverlapRemoved]},invoke:function(){return Promise.resolve(c.a.uniq(u.activeSamplesNotOverlapRemoved.result.map(function(e){return e.uniquePatientKey})))}}),this.activeStudyIds=Object(i.S)({await:function(){return[u.activeGroups]},invoke:function(){return Promise.resolve(Object(r.x)(u.activeGroups.result))}}),this.molecularProfilesInActiveStudies=Object(i.S)({await:function(){return[u.activeStudyIds]},invoke:function(){return x(u,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.activeStudyIds.result.length>0)){e.next=4;break}return e.abrupt("return",s.a.fetchMolecularProfilesUsingPOST({molecularProfileFilter:{studyIds:this.activeStudyIds.result}}));case 4:return e.abrupt("return",Promise.resolve([]));case 5:case"end":return e.stop()}},e,this)}))}},[]),this.referenceGenes=Object(i.S)({await:function(){return[u.studies]},invoke:function(){return u.studies.result.length>0?Object(S.e)(u.studies.result[0].referenceGenome):Promise.resolve([])}}),this.hugoGeneSymbolToReferenceGene=Object(i.S)({await:function(){return[u.referenceGenes]},invoke:function(){return Promise.resolve(c.a.keyBy(u.referenceGenes.result,function(e){return e.hugoGeneSymbol}))}}),this.mutationEnrichmentProfiles=Object(i.S)({await:function(){return[u.molecularProfilesInActiveStudies]},invoke:function(){return Promise.resolve(Object(p.q)(u.molecularProfilesInActiveStudies.result))}}),this.copyNumberEnrichmentProfiles=Object(i.S)({await:function(){return[u.molecularProfilesInActiveStudies]},invoke:function(){return Promise.resolve(Object(p.o)(u.molecularProfilesInActiveStudies.result))}}),this.mRNAEnrichmentProfiles=Object(i.S)({await:function(){return[u.molecularProfilesInActiveStudies]},invoke:function(){return Promise.resolve(Object(p.p)(u.molecularProfilesInActiveStudies.result))}}),this.proteinEnrichmentProfiles=Object(i.S)({await:function(){return[u.molecularProfilesInActiveStudies]},invoke:function(){return Promise.resolve(Object(p.r)(u.molecularProfilesInActiveStudies.result))}}),this._mutationEnrichmentProfileMap={},this._copyNumberEnrichmentProfileMap={},this._mRNAEnrichmentProfileMap={},this._proteinEnrichmentProfileMap={},this.selectedStudyMutationEnrichmentProfileMap=Object(i.S)({await:function(){return[u.mutationEnrichmentProfiles]},invoke:function(){if(c.a.isEmpty(u._mutationEnrichmentProfileMap)){var e=c.a.groupBy(u.mutationEnrichmentProfiles.result,function(e){return e.studyId});return Promise.resolve(c.a.mapValues(e,function(e){return e[0]}))}return Promise.resolve(u._mutationEnrichmentProfileMap)}}),this.selectedStudyCopyNumberEnrichmentProfileMap=Object(i.S)({await:function(){return[u.copyNumberEnrichmentProfiles]},invoke:function(){if(c.a.isEmpty(u._copyNumberEnrichmentProfileMap)){var e=c.a.groupBy(u.copyNumberEnrichmentProfiles.result,function(e){return e.studyId});return Promise.resolve(c.a.mapValues(e,function(e){return e[0]}))}return Promise.resolve(u._copyNumberEnrichmentProfileMap)}}),this.selectedmRNAEnrichmentProfileMap=Object(i.S)({await:function(){return[u.mRNAEnrichmentProfiles]},invoke:function(){if(c.a.isEmpty(u._mRNAEnrichmentProfileMap)){var e=c.a.groupBy(u.mRNAEnrichmentProfiles.result,function(e){return e.studyId});return Promise.resolve(c.a.mapValues(e,function(e){return e[0]}))}return Promise.resolve(u._mRNAEnrichmentProfileMap)}}),this.selectedProteinEnrichmentProfileMap=Object(i.S)({await:function(){return[u.proteinEnrichmentProfiles]},invoke:function(){if(c.a.isEmpty(u._proteinEnrichmentProfileMap)){var e=c.a.groupBy(u.proteinEnrichmentProfiles.result,function(e){return e.studyId});return Promise.resolve(c.a.mapValues(e,function(e){return e[0]}))}return Promise.resolve(u._proteinEnrichmentProfileMap)}}),this.mutationEnrichmentAnalysisGroups=Object(i.S)({await:function(){return[u.enrichmentAnalysisGroups,u.selectedStudyMutationEnrichmentProfileMap]},invoke:function(){return Promise.resolve(u.enrichmentAnalysisGroups.result.reduce(function(e,t){var n=t.samples.filter(function(e){return void 0!==u.selectedStudyMutationEnrichmentProfileMap.result[e.studyId]});return n.length>0&&e.push(Object.assign(Object.assign({},t),{count:n.length,samples:n,description:"Number (percentage) of ".concat(u.usePatientLevelEnrichments?"patients":"samples"," in ").concat(t.name," that have a mutation in the listed gene.")})),e},[]))}}),this.mutationEnrichmentDataRequestGroups=Object(i.S)({await:function(){return[u.mutationEnrichmentAnalysisGroups,u.selectedStudyMutationEnrichmentProfileMap]},invoke:function(){return Promise.resolve(u.mutationEnrichmentAnalysisGroups.result.map(function(e){var t=e.samples.map(function(e){return{caseId:u.usePatientLevelEnrichments?e.patientId:e.sampleId,molecularProfileId:u.selectedStudyMutationEnrichmentProfileMap.result[e.studyId].molecularProfileId}});return{name:e.name,molecularProfileCaseIdentifiers:t}}))}}),this.mutationEnrichmentData=Object(d.x)({storeForExcludingQueryGenes:this.resultsViewStore,await:function(){return[u.mutationEnrichmentDataRequestGroups]},referenceGenesPromise:this.hugoGeneSymbolToReferenceGene,getSelectedProfileMap:function(){return u.selectedStudyMutationEnrichmentProfileMap.result},fetchData:function(){return u.mutationEnrichmentDataRequestGroups.result&&u.mutationEnrichmentDataRequestGroups.result.length>1?f.a.fetchMutationEnrichmentsUsingPOST({enrichmentType:u.usePatientLevelEnrichments?"PATIENT":"SAMPLE",groups:u.mutationEnrichmentDataRequestGroups.result}):Promise.resolve([])}}),this.copyNumberEnrichmentAnalysisGroups=Object(i.S)({await:function(){return[u.selectedStudyCopyNumberEnrichmentProfileMap,u.enrichmentAnalysisGroups]},invoke:function(){return Promise.resolve(u.enrichmentAnalysisGroups.result.reduce(function(e,t){var n=t.samples.filter(function(e){return void 0!==u.selectedStudyCopyNumberEnrichmentProfileMap.result[e.studyId]});return n.length>0&&e.push(Object.assign(Object.assign({},t),{count:n.length,samples:n,description:"Number (percentage) of ".concat(u.usePatientLevelEnrichments?"patients":"samples"," in ").concat(t.name," that have the listed alteration in the listed gene.")})),e},[]))}}),this.copyNumberEnrichmentDataRequestGroups=Object(i.S)({await:function(){return[u.copyNumberEnrichmentAnalysisGroups,u.selectedStudyCopyNumberEnrichmentProfileMap]},invoke:function(){return Promise.resolve(u.copyNumberEnrichmentAnalysisGroups.result.map(function(e){var t=e.samples.map(function(e){return{caseId:u.usePatientLevelEnrichments?e.patientId:e.sampleId,molecularProfileId:u.selectedStudyCopyNumberEnrichmentProfileMap.result[e.studyId].molecularProfileId}});return{name:e.name,molecularProfileCaseIdentifiers:t}}))}}),this.copyNumberHomdelEnrichmentData=Object(i.S)({await:function(){return[u.copyNumberEnrichmentDataRequestGroups]},invoke:function(){return u.copyNumberEnrichmentDataRequestGroups.result&&u.copyNumberEnrichmentDataRequestGroups.result.length>1?u.getCopyNumberEnrichmentData(u.copyNumberEnrichmentDataRequestGroups.result,"HOMDEL"):Promise.resolve([])}}),this.copyNumberAmpEnrichmentData=Object(i.S)({await:function(){return[u.copyNumberEnrichmentDataRequestGroups]},invoke:function(){return u.copyNumberEnrichmentDataRequestGroups.result&&u.copyNumberEnrichmentDataRequestGroups.result.length>1?u.getCopyNumberEnrichmentData(u.copyNumberEnrichmentDataRequestGroups.result,"AMP"):Promise.resolve([])}}),this.copyNumberEnrichmentData=Object(d.x)({storeForExcludingQueryGenes:this.resultsViewStore,await:function(){return[u.copyNumberHomdelEnrichmentData,u.copyNumberAmpEnrichmentData,u.selectedStudyCopyNumberEnrichmentProfileMap]},getSelectedProfileMap:function(){return u.selectedStudyCopyNumberEnrichmentProfileMap.result},referenceGenesPromise:this.hugoGeneSymbolToReferenceGene,fetchData:function(){var e=u.copyNumberAmpEnrichmentData.result.map(function(e){return e.value=2,e}),t=u.copyNumberHomdelEnrichmentData.result.map(function(e){return e.value=-2,e});return Promise.resolve(e.concat(t))}}),this.mrnaEnrichmentAnalysisGroups=Object(i.S)({await:function(){return[u.selectedmRNAEnrichmentProfileMap,u.enrichmentAnalysisGroups]},invoke:function(){return 1===Object.keys(u.selectedmRNAEnrichmentProfileMap.result).length?Promise.resolve(u.enrichmentAnalysisGroups.result.reduce(function(e,t){var n=t.samples.filter(function(e){return void 0!==u.selectedmRNAEnrichmentProfileMap.result[e.studyId]});return n.length>0&&e.push(Object.assign(Object.assign({},t),{count:n.length,samples:n,description:"samples in ".concat(t.name)})),e},[])):Promise.resolve([])}}),this.mrnaEnrichmentDataRequestGroups=Object(i.S)({await:function(){return[u.mrnaEnrichmentAnalysisGroups,u.selectedmRNAEnrichmentProfileMap]},invoke:function(){return Promise.resolve(u.mrnaEnrichmentAnalysisGroups.result.map(function(e){var t=e.samples.map(function(e){return{caseId:e.sampleId,molecularProfileId:u.selectedmRNAEnrichmentProfileMap.result[e.studyId].molecularProfileId}});return{name:e.name,molecularProfileCaseIdentifiers:t}}))}}),this.mRNAEnrichmentData=Object(d.x)({await:function(){return[u.mrnaEnrichmentDataRequestGroups]},getSelectedProfileMap:function(){return u.selectedmRNAEnrichmentProfileMap.result},referenceGenesPromise:this.hugoGeneSymbolToReferenceGene,fetchData:function(){return u.mrnaEnrichmentDataRequestGroups.result&&u.mrnaEnrichmentDataRequestGroups.result.length>1?f.a.fetchExpressionEnrichmentsUsingPOST({enrichmentType:"SAMPLE",groups:u.mrnaEnrichmentDataRequestGroups.result}):Promise.resolve([])}}),this.proteinEnrichmentAnalysisGroups=Object(i.S)({await:function(){return[u.selectedProteinEnrichmentProfileMap,u.enrichmentAnalysisGroups]},invoke:function(){return 1===Object.keys(u.selectedProteinEnrichmentProfileMap.result).length?Promise.resolve(u.enrichmentAnalysisGroups.result.reduce(function(e,t){var n=t.samples.filter(function(e){return void 0!==u.selectedProteinEnrichmentProfileMap.result[e.studyId]});return n.length>0&&e.push(Object.assign(Object.assign({},t),{count:n.length,samples:n,description:"samples in ".concat(t.name)})),e},[])):Promise.resolve([])}}),this.proteinEnrichmentDataRequestGroups=Object(i.S)({await:function(){return[u.proteinEnrichmentAnalysisGroups,u.selectedProteinEnrichmentProfileMap]},invoke:function(){return Promise.resolve(u.proteinEnrichmentAnalysisGroups.result.map(function(e){var t=e.samples.map(function(e){return{caseId:e.sampleId,molecularProfileId:u.selectedProteinEnrichmentProfileMap.result[e.studyId].molecularProfileId}});return{name:e.name,molecularProfileCaseIdentifiers:t}}))}}),this.proteinEnrichmentData=Object(d.x)({await:function(){return[u.proteinEnrichmentDataRequestGroups]},referenceGenesPromise:this.hugoGeneSymbolToReferenceGene,getSelectedProfileMap:function(){return u.selectedProteinEnrichmentProfileMap.result},fetchData:function(){return u.proteinEnrichmentDataRequestGroups.result&&u.proteinEnrichmentDataRequestGroups.result.length>1?f.a.fetchExpressionEnrichmentsUsingPOST({enrichmentType:"SAMPLE",groups:u.proteinEnrichmentDataRequestGroups.result}):Promise.resolve([])}}),this.sampleSet=Object(i.S)({await:function(){return[u.samples]},invoke:function(){var e=new v.a,t=!0,n=!1,r=void 0;try{for(var o,i=u.samples.result[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;e.set({studyId:a.studyId,sampleId:a.sampleId},a)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return Promise.resolve(e)}}),this.patientKeys=Object(i.S)({await:function(){return[u.samples]},invoke:function(){return Promise.resolve(c.a.uniq(u.samples.result.map(function(e){return e.uniquePatientKey})))}}),this.patientToSamplesSet=Object(i.S)({await:function(){return[u.samples]},invoke:function(){var e=new b.a,t=!0,n=!1,r=void 0;try{for(var o,i=u.samples.result[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;e.add({studyId:a.studyId,patientId:a.patientId},a)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return Promise.resolve(e)}}),this.patientKeyToSamples=Object(i.S)({await:function(){return[u.samples]},invoke:function(){return Promise.resolve(c.a.groupBy(u.samples.result,function(e){return e.uniquePatientKey}))}}),this.sampleKeyToSample=Object(i.S)({await:function(){return[u.samples]},invoke:function(){var e=c.a.reduce(u.samples.result,function(e,t){return e[t.uniqueSampleKey]=t,e},{});return Promise.resolve(e)}}),this.sampleKeyToGroups=Object(i.S)({await:function(){return[u._originalGroups,u.sampleSet]},invoke:function(){var e=u.sampleSet.result,t=u._originalGroups.result,n={},r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value,c=!0,p=!1,d=void 0;try{for(var f,h=l.studies[Symbol.iterator]();!(c=(f=h.next()).done);c=!0){var m=f.value,y=m.id,g=!0,v=!1,b=void 0;try{for(var S,_=m.samples[Symbol.iterator]();!(g=(S=_.next()).done);g=!0){var w=S.value,E=e.get({sampleId:w,studyId:y});E&&(n[E.uniqueSampleKey]=n[E.uniqueSampleKey]||{},n[E.uniqueSampleKey][l.uid]=!0)}}catch(e){v=!0,b=e}finally{try{g||null==_.return||_.return()}finally{if(v)throw b}}}}catch(e){p=!0,d=e}finally{try{c||null==h.return||h.return()}finally{if(p)throw d}}}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return Promise.resolve(n)}}),this.patientsVennPartition=Object(i.S)({await:function(){return[u._activeGroupsNotOverlapRemoved,u.patientToSamplesSet,u.activePatientKeysNotOverlapRemoved]},invoke:function(){var e=u.patientToSamplesSet.result;return Promise.resolve(Object(r.C)(u._activeGroupsNotOverlapRemoved.result,function(e){return Object(y.Y)([e])},function(t){return e.get({studyId:t.studyId,patientId:t.patientId})[0].uniquePatientKey},u.activePatientKeysNotOverlapRemoved.result))}}),this.survivalClinicalDataExists=Object(i.S)({await:function(){return[u.activeSamplesNotOverlapRemoved,u.survivalClinicalAttributesPrefix]},invoke:function(){return Object(S.E)(u.activeSamplesNotOverlapRemoved.result,u.survivalClinicalAttributesPrefix.result)}}),this.survivalClinicalData=Object(i.S)({await:function(){return[u.activeSamplesNotOverlapRemoved,u.survivalClinicalAttributesPrefix]},invoke:function(){if(0===u.activeSamplesNotOverlapRemoved.result.length)return Promise.resolve([]);var e=c.a.reduce(u.survivalClinicalAttributesPrefix.result,function(e,t){return e.push(t+"_STATUS"),e.push(t+"_MONTHS"),e},[]);if(0===e.length)return Promise.resolve([]);var t={attributeIds:e,identifiers:u.activeSamplesNotOverlapRemoved.result.map(function(e){return{entityId:e.patientId,studyId:e.studyId}})};return s.a.fetchClinicalDataUsingPOST({clinicalDataType:"PATIENT",clinicalDataMultiStudyFilter:t})}},[]),this.activeStudiesClinicalAttributes=Object(i.S)({await:function(){return[u.activeStudyIds]},invoke:function(){return 0===u.activeStudyIds.result.length?Promise.resolve([]):s.a.fetchClinicalAttributesUsingPOST({studyIds:u.activeStudyIds.result})}},[]),this.survivalClinicalAttributesPrefix=Object(i.S)({await:function(){return[u.activeStudiesClinicalAttributes]},invoke:function(){return Promise.resolve(Object(S.V)(u.activeStudiesClinicalAttributes.result))}}),this.survivalClinicalDataGroupByUniquePatientKey=Object(i.S)({await:function(){return[u.survivalClinicalData]},invoke:function(){return x(u,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.a.groupBy(this.survivalClinicalData.result,"uniquePatientKey"));case 1:case"end":return e.stop()}},e,this)}))}}),this.patientSurvivals=Object(i.S)({await:function(){return[u.survivalClinicalDataGroupByUniquePatientKey,u.activePatientKeysNotOverlapRemoved,u.survivalClinicalAttributesPrefix]},invoke:function(){return Promise.resolve(c.a.reduce(u.survivalClinicalAttributesPrefix.result,function(e,t){return e[t]=Object(m.b)(u.survivalClinicalDataGroupByUniquePatientKey.result,u.activePatientKeysNotOverlapRemoved.result,"".concat(t,"_STATUS"),"".concat(t,"_MONTHS"),function(e){return Object(_.n)(e,t)}),e},{}))}}),this.patientSurvivalUniqueStatusText=Object(i.S)({await:function(){return[u.survivalClinicalDataGroupByUniquePatientKey,u.activePatientKeysNotOverlapRemoved,u.survivalClinicalAttributesPrefix]},invoke:function(){return Promise.resolve(c.a.reduce(u.survivalClinicalAttributesPrefix.result,function(e,t){var n=Object(m.a)(u.survivalClinicalDataGroupByUniquePatientKey.result,u.activePatientKeysNotOverlapRemoved.result,"".concat(t,"_STATUS"),"".concat(t,"_MONTHS"));return e[t]=c.a.chain(n).map(function(e){return e.value}).uniq().value(),e},{}))}}),this.uidToGroup=Object(i.S)({await:function(){return[u._originalGroups]},invoke:function(){return Promise.resolve(c.a.keyBy(u._originalGroups.result,function(e){return e.uid}))}}),this.clinicalDataEnrichments=Object(i.S)({await:function(){return[u.activeGroups]},invoke:function(){if(u.clinicalTabUnavailable)return Promise.resolve([]);var e=c.a.map(u.activeGroups.result,function(e){var t=[],n=!0,r=!1,o=void 0;try{for(var i,a=e.studies[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value,l=s.id,u=!0,c=!1,p=void 0;try{for(var d,f=s.samples[Symbol.iterator]();!(u=(d=f.next()).done);u=!0){var h=d.value;t.push({studyId:l,sampleId:h})}}catch(e){c=!0,p=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw p}}}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return{name:e.nameWithOrdinal||e.uid,sampleIdentifiers:t}});return e.length>1?f.a.fetchClinicalEnrichmentsUsingPOST({groupFilter:{groups:e}}):Promise.resolve([])},onError:function(){}},[]),this.clinicalDataEnrichmentsWithQValues=Object(i.S)({await:function(){return[u.clinicalDataEnrichments]},invoke:function(){var e=u.clinicalDataEnrichments.result,t=c.a.sortBy(e,function(e){return e.pValue});return Object(g.a)(t.map(function(e){return e.pValue})).forEach(function(e,n){t[n].qValue=e}),Promise.resolve(t)},onError:function(){}},[]),this.activeStudyIdToStudy=Object(i.S)({await:function(){return[u.studies,u.activeStudyIds]},invoke:function(){return Promise.resolve(c.a.keyBy(c.a.filter(u.studies.result,function(e){return u.activeStudyIds.result.includes(e.studyId)}),function(e){return e.studyId}))}},{}),this.survivalDescriptions=Object(i.S)({await:function(){return[u.activeStudiesClinicalAttributes,u.activeStudyIdToStudy,u.survivalClinicalAttributesPrefix]},invoke:function(){var e=c.a.reduce(u.survivalClinicalAttributesPrefix.result,function(e,t){var n="".concat(t,"_STATUS"),r=c.a.groupBy(u.activeStudiesClinicalAttributes.result,"clinicalAttributeId"),o=u.activeStudyIdToStudy.result;return r&&r[n]&&r[n].length>0&&r[n].map(function(n){e[t]||(e[t]=[]),e[t].push({studyName:o[n.studyId].name,description:n.description,displayName:n.displayName})}),e},{});return Promise.resolve(e)}}),setTimeout(function(){u.tabHasBeenShownReactionDisposer=Object(a.autorun)(function(){u.tabHasBeenShown.set(o.a.SURVIVAL,!!u.tabHasBeenShown.get(o.a.SURVIVAL)||u.showSurvivalTab),u.tabHasBeenShown.set(o.a.MUTATIONS,!!u.tabHasBeenShown.get(o.a.MUTATIONS)||u.showMutationsTab),u.tabHasBeenShown.set(o.a.CNA,!!u.tabHasBeenShown.get(o.a.CNA)||u.showCopyNumberTab),u.tabHasBeenShown.set(o.a.MRNA,!!u.tabHasBeenShown.get(o.a.MRNA)||u.showMRNATab),u.tabHasBeenShown.set(o.a.PROTEIN,!!u.tabHasBeenShown.get(o.a.PROTEIN)||u.showProteinTab)})})}var t,n,u;return t=e,(n=[{key:"destroy",value:function(){this.tabHasBeenShownReactionDisposer&&this.tabHasBeenShownReactionDisposer()}},{key:"isGroupSelected",value:function(e){throw new Error("isGroupSelected must be implemented in subclass")}},{key:"setUsePatientLevelEnrichments",value:function(e){throw new Error("setUsePatientLevelEnrichments must be implemented in subclass")}},{key:"toggleGroupSelected",value:function(e){throw new Error("toggleGroupSelected must be implemented in subclass")}},{key:"updateGroupOrder",value:function(e,t){throw new Error("updateGroupOrder must be implemented in subclass")}},{key:"selectAllGroups",value:function(){throw new Error("selectAllGroups must be implemented in subclass")}},{key:"deselectAllGroups",value:function(){throw new Error("deselectAllGroups must be implemented in subclass")}},{key:"saveAndGoToSession",value:function(e){return x(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("saveAndGoToSession must be implemented in subclass");case 1:case"end":return e.stop()}},e)}))}},{key:"addGroup",value:function(e,t){return x(this,void 0,void 0,regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(this.newSessionPending=!0,!t||!this.isLoggedIn){n.next=4;break}return n.next=4,l.a.addGroup(e);case 4:(r=c.a.cloneDeep(this._session.result)).groups.push(e),this.saveAndGoToSession(r);case 7:case"end":return n.stop()}},n,this)}))}},{key:"deleteGroup",value:function(e){return x(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.newSessionPending=!0,(n=c.a.cloneDeep(this._session.result)).groups=n.groups.filter(function(t){return t.name!==e}),this.saveAndGoToSession(n);case 4:case"end":return t.stop()}},t,this)}))}},{key:"setMutationEnrichmentProfileMap",value:function(e){this._mutationEnrichmentProfileMap=e}},{key:"setCopyNumberEnrichmentProfileMap",value:function(e){this._copyNumberEnrichmentProfileMap=e}},{key:"setMRNAEnrichmentProfileMap",value:function(e){this._mRNAEnrichmentProfileMap=e}},{key:"setProteinEnrichmentProfileMap",value:function(e){this._proteinEnrichmentProfileMap=e}},{key:"getCopyNumberEnrichmentData",value:function(e,t){return f.a.fetchCopyNumberEnrichmentsUsingPOST({copyNumberEventType:t,enrichmentType:this.usePatientLevelEnrichments?"PATIENT":"SAMPLE",groups:e})}},{key:"getGroupsDownloadDataPromise",value:function(){var e=this;return new Promise(function(t){Object(w.a)([e._originalGroups,e.samples,e.sampleKeyToGroups],function(e,n,o){t(Object(r.q)(n,e,o))})})}},{key:"isLoggedIn",get:function(){return this.appStore.isLoggedIn}},{key:"survivalTabShowable",get:function(){return this.survivalClinicalDataExists.isComplete&&this.survivalClinicalDataExists.result}},{key:"showSurvivalTab",get:function(){return this.survivalTabShowable||this.activeGroups.isComplete&&0===this.activeGroups.result.length&&this.tabHasBeenShown.get(o.a.SURVIVAL)}},{key:"survivalTabUnavailable",get:function(){return this.activeGroups.isComplete&&this.activeGroups.result.length>10||!this.survivalTabShowable}},{key:"mutationsTabShowable",get:function(){return this.mutationEnrichmentProfiles.isComplete&&this.mutationEnrichmentProfiles.result.length>0}},{key:"showMutationsTab",get:function(){return this.mutationsTabShowable||this.activeGroups.isComplete&&0===this.activeGroups.result.length&&this.tabHasBeenShown.get(o.a.MUTATIONS)}},{key:"mutationsTabUnavailable",get:function(){return this.activeGroups.isComplete&&this.activeGroups.result.length<2||!this.mutationsTabShowable}},{key:"clinicalTabUnavailable",get:function(){return this.activeGroups.isComplete&&this.activeGroups.result.length<2}},{key:"copyNumberTabShowable",get:function(){return this.copyNumberEnrichmentProfiles.isComplete&&this.copyNumberEnrichmentProfiles.result.length>0}},{key:"showCopyNumberTab",get:function(){return this.copyNumberTabShowable||this.activeGroups.isComplete&&0===this.activeGroups.result.length&&this.tabHasBeenShown.get(o.a.CNA)}},{key:"copyNumberUnavailable",get:function(){return this.activeGroups.isComplete&&this.activeGroups.result.length<2||!this.copyNumberTabShowable}},{key:"mRNATabShowable",get:function(){return this.mRNAEnrichmentProfiles.isComplete&&this.mRNAEnrichmentProfiles.result.length>0}},{key:"showMRNATab",get:function(){return this.mRNATabShowable||this.activeGroups.isComplete&&0===this.activeGroups.result.length&&this.tabHasBeenShown.get(o.a.MRNA)}},{key:"mRNATabUnavailable",get:function(){return this.activeGroups.isComplete&&this.activeGroups.result.length<2||this.activeStudyIds.isComplete&&this.activeStudyIds.result.length>1||!this.mRNATabShowable}},{key:"proteinTabShowable",get:function(){return this.proteinEnrichmentProfiles.isComplete&&this.proteinEnrichmentProfiles.result.length>0}},{key:"showProteinTab",get:function(){return this.proteinTabShowable||this.activeGroups.isComplete&&0===this.activeGroups.result.length&&this.tabHasBeenShown.get(o.a.PROTEIN)}},{key:"proteinTabUnavailable",get:function(){return this.activeGroups.isComplete&&this.activeGroups.result.length<2||this.activeStudyIds.isComplete&&this.activeStudyIds.result.length>1||!this.proteinTabShowable}}])&&E(t.prototype,n),u&&E(t,u),e}();P([a.observable],T.prototype,"newSessionPending",void 0),P([a.observable.ref],T.prototype,"_mutationEnrichmentProfileMap",void 0),P([a.observable.ref],T.prototype,"_copyNumberEnrichmentProfileMap",void 0),P([a.observable.ref],T.prototype,"_mRNAEnrichmentProfileMap",void 0),P([a.observable.ref],T.prototype,"_proteinEnrichmentProfileMap",void 0),P([a.action],T.prototype,"setMutationEnrichmentProfileMap",null),P([a.action],T.prototype,"setCopyNumberEnrichmentProfileMap",null),P([a.action],T.prototype,"setMRNAEnrichmentProfileMap",null),P([a.action],T.prototype,"setProteinEnrichmentProfileMap",null),P([a.computed],T.prototype,"survivalTabShowable",null),P([a.computed],T.prototype,"showSurvivalTab",null),P([a.computed],T.prototype,"survivalTabUnavailable",null),P([a.computed],T.prototype,"mutationsTabShowable",null),P([a.computed],T.prototype,"showMutationsTab",null),P([a.computed],T.prototype,"mutationsTabUnavailable",null),P([a.computed],T.prototype,"clinicalTabUnavailable",null),P([a.computed],T.prototype,"copyNumberTabShowable",null),P([a.computed],T.prototype,"showCopyNumberTab",null),P([a.computed],T.prototype,"copyNumberUnavailable",null),P([a.computed],T.prototype,"mRNATabShowable",null),P([a.computed],T.prototype,"showMRNATab",null),P([a.computed],T.prototype,"mRNATabUnavailable",null),P([a.computed],T.prototype,"proteinTabShowable",null),P([a.computed],T.prototype,"showProteinTab",null),P([a.computed],T.prototype,"proteinTabUnavailable",null),P([h.default],T.prototype,"getGroupsDownloadDataPromise",null)},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(4),o=n.n(r);function i(e,t){var n=t||function(e){return!!e};return o.a.reduce(e,function(e,t){return e&&n(t)},!0)}},,function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__1w8-Y",framedImage:"styles-module__framedImage__bM7JH","integer-data":"styles-module__integer-data__1Bn0H"}},function(e,t,n){"use strict";n.d(t,"b",function(){return d}),n.d(t,"a",function(){return f});var r=n(572),o=n(573),i=n(22),a=n(571),s=n(6);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){return e.length>0?Object(r.F)(e,["annotation_summary"],s.b.serverConfig.isoformOverrideSource):Promise.resolve([])}var f=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,c(t).call(this,function(e){return function(e){var t=Object(i.d)(e);return t?Object(o.f)(t):""}(e)},function(e){return Object(o.f)(e.annotation_summary.genomicLocation)},e||d))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,a["a"]),t}()},function(e,t,n){"use strict";n.d(t,"b",function(){return d}),n.d(t,"a",function(){return f});var r=n(572),o=n(573),i=n(571),a=n(6),s=n(22);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){return e.length>0?Object(r.F)(e,["annotation_summary","mutation_assessor"],a.b.serverConfig.isoformOverrideSource):Promise.resolve([])}var f=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,c(t).call(this,function(e){return function(e){var t=Object(s.d)(e);return t?Object(o.f)(t):""}(e)},function(e){return Object(o.f)(e.annotation_summary.genomicLocation)},e||d))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,i["a"]),t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(637),o=n(634),i=n(638),a=n(4),s=n.n(a),l=n(635);function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},p=function(){function e(t,n,r,o,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mutationData=t,this.studyToMolecularProfileDiscrete=n,this.genomeNexusCache=r,this.genomeNexusMutationAssessorCache=o,this.mutationCountCache=i,this.discreteCNACache=a,this.allData=void 0}var t,n,a;return t=e,(n=[{key:"fetchAndCacheAllLazyData",value:function(){var e=this;return this.allData?Promise.resolve(this.allData):new Promise(function(t,n){var r=e.availablePromiseCachePairs();Promise.all(r.promises).then(function(n){e.allData=n;for(var o=0;o<n.length;o++)r.caches[o].addData(n[o]);t(n)}).catch(n)})}},{key:"availablePromiseCachePairs",value:function(){var e=[],t=[];return this.genomeNexusCache&&this.mutationData.result&&(e.push(Object(o.b)(this.mutationData.result)),t.push(this.genomeNexusCache())),this.genomeNexusMutationAssessorCache&&this.mutationData.result&&(e.push(Object(l.b)(this.mutationData.result)),t.push(this.genomeNexusMutationAssessorCache())),this.mutationCountCache&&(e.push(this.fetchAllMutationCountData()),t.push(this.mutationCountCache())),this.discreteCNACache&&(e.push(this.fetchAllDiscreteCNAData()),t.push(this.discreteCNACache())),{promises:e,caches:t}}},{key:"fetchAllMutationCountData",value:function(){return c(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.mutationData.result){e.next=7;break}return t=this.mutationData.result.map(function(e){return{sampleId:e.sampleId,studyId:e.studyId}}),e.next=4,Object(r.b)(t);case 4:return e.abrupt("return",e.sent);case 7:return e.abrupt("return",void 0);case 8:case"end":return e.stop()}},e,this)}))}},{key:"fetchAllDiscreteCNAData",value:function(){return c(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.mutationData.result){e.next=9;break}return t=this.mutationData.result.map(function(e){return{sampleId:e.sampleId,studyId:e.studyId,entrezGeneId:e.entrezGeneId}}),e.next=4,Object(i.b)(t,this.studyToMolecularProfileDiscrete);case 4:return n=e.sent,r=s.a.flatten(s.a.map(n,function(e){return s.a.map(s.a.flatten(e.data),function(t){return Object.assign(Object.assign({},t),{studyId:e.meta})})})),e.abrupt("return",r);case 9:return e.abrupt("return",void 0);case 10:case"end":return e.stop()}},e,this)}))}}])&&u(t.prototype,n),a&&u(t,a),e}()},function(e,t,n){"use strict";n.d(t,"b",function(){return p}),n.d(t,"a",function(){return d});var r=n(178),o=n(571);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};function c(e){return"".concat(e.studyId,"~").concat(e.sampleId)}function p(e){return u(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.length>0)){t.next=5;break}return n={attributeIds:["MUTATION_COUNT"],identifiers:e.map(function(e){return{entityId:e.sampleId,studyId:e.studyId}})},t.abrupt("return",r.a.fetchClinicalDataUsingPOST({clinicalDataType:"SAMPLE",clinicalDataMultiStudyFilter:n}));case 5:return t.abrupt("return",Promise.resolve([]));case 6:case"end":return t.stop()}},t)}))}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,s(t).call(this,c,c,p))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,o["a"]),t}()},function(e,t,n){"use strict";n.d(t,"b",function(){return d}),n.d(t,"a",function(){return h});var r=n(4),o=n(571),i=n(178);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};function d(e,t){if(t){var n=r.groupBy(e,"studyId");return Promise.all(Object.keys(n).map(function(e){var o=t[e];return o?function(e,t,n){return p(this,void 0,void 0,regeneratorRuntime.mark(function o(){var a,s,l,u,c,p,d,f,h,m,y,g,v,b,S,_,w,E;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(o.prev=0,a=r.uniq(e.map(function(e){return e.sampleId})),s=r.uniq(e.map(function(e){return e.entrezGeneId})),!(a.length<s.length)){o.next=27;break}for(u={},c=!0,p=!1,d=void 0,o.prev=8,f=e[Symbol.iterator]();!(c=(h=f.next()).done);c=!0)m=h.value,u[m.sampleId]=u[m.sampleId]||[],u[m.sampleId].push(m.entrezGeneId);o.next=16;break;case 12:o.prev=12,o.t0=o.catch(8),p=!0,d=o.t0;case 16:o.prev=16,o.prev=17,c||null==f.return||f.return();case 19:if(o.prev=19,!p){o.next=22;break}throw d;case 22:return o.finish(19);case 23:return o.finish(16);case 24:l=Object.keys(u).map(function(e){return{sampleIds:[e],entrezGeneIds:u[e]}}),o.next=48;break;case 27:for(y={},g=!0,v=!1,b=void 0,o.prev=31,S=e[Symbol.iterator]();!(g=(_=S.next()).done);g=!0)w=_.value,y[w.entrezGeneId]=y[w.entrezGeneId]||[],y[w.entrezGeneId].push(w.sampleId);o.next=39;break;case 35:o.prev=35,o.t1=o.catch(31),v=!0,b=o.t1;case 39:o.prev=39,o.prev=40,g||null==S.return||S.return();case 42:if(o.prev=42,!v){o.next=45;break}throw b;case 45:return o.finish(42);case 46:return o.finish(39);case 47:l=Object.keys(y).map(function(e){return{sampleIds:y[e],entrezGeneIds:[parseInt(e,10)]}});case 48:return o.next=50,Promise.all(l.map(function(e){return void 0===n?Promise.reject("No molecular profile id given."):i.a.fetchDiscreteCopyNumbersInMolecularProfileUsingPOST({projection:"DETAILED",molecularProfileId:n,discreteCopyNumberFilter:e,discreteCopyNumberEventType:"ALL"})}));case 50:return E=o.sent,o.abrupt("return",{data:r.flatten(E),meta:t});case 54:throw o.prev=54,o.t2=o.catch(0),o.t2;case 57:case"end":return o.stop()}},o,null,[[0,54],[8,12,16,24],[17,,19,23],[31,35,39,47],[40,,42,46]])}))}(n[e],e,o.molecularProfileId):Promise.resolve({data:[],meta:e})}))}throw"No study to molecular profile id map given"}function f(e,t){var n=e.studyId?e.studyId:t;return"".concat(n,"~").concat(e.sampleId,"~").concat(e.entrezGeneId)}var h=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=l(this,u(t).call(this,f,f,d,e))).studyToMolecularProfileDiscrete=e,n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,o["a"]),n=t,(r=[{key:"isActive",get:function(){return!!(this.studyToMolecularProfileDiscrete&&Object.keys(this.studyToMolecularProfileDiscrete).length>0)}}])&&s(n.prototype,r),i&&s(n,i),t}()},function(e,t,n){"use strict";var r=n(0),o=n(7),i=n(596),a=n(2),s=n(579),l=n(630);function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var h=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":f(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};var m=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=c(this,p(t).apply(this,arguments))).excludedGroupsSummary=Object(s.a)({await:function(){return[e.props.store.overlapComputations]},render:function(){var t,n=e.props.store.overlapComputations.result,o=n.groups.filter(function(e){return e.uid in n.excludedFromAnalysis}),a=Object(i.f)(o,"and"),s=1===o.length?"is":"are";return o.length>0&&(t=r.createElement("span",null,a," ".concat(s," completely overlapping with other selected groups, so "),e.props.overlapTabMode?"".concat(s," excluded from analysis in other tabs."):"".concat(1===o.length?"has":"have"," been excluded from this analysis."))),t?r.createElement("div",null,r.createElement("i",{className:"fa fa-md ".concat(e.classNames.icon),style:{color:"#000000",marginRight:5}}),t):null}}),e}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r["Component"]),n=t,(o=[{key:"makeOverlappingCasesMessage",value:function(e,t){var n,o="sample"===e?t.overlappingSamples.length:t.overlappingPatients.length;if(0===o)return null;if(this.props.survivalTabMode&&t.totalPatientOverlap>0&&this.props.store.overlapStrategy===l.a.INCLUDE)n=function(e){return r.createElement("span",null,"Overlapping patients (",e,") are plotted as distinct groups below.")}(o);else{var a,s=t.groups.filter(function(e){return!(e.uid in t.excludedFromAnalysis)});a=s.length<t.groups.length?r.createElement("span",null,"between ",Object(i.f)(s,"and")):r.createElement("span",null,"in the selected groups"),n=r.createElement("span",null,"".concat("sample"===e?"Samples":"Patients"," (").concat(o,") that overlap "),a," are ".concat(this.props.store.overlapStrategy===l.a.INCLUDE?"included in":"excluded from"),this.props.overlapTabMode?" ".concat(e,"-level analysis in other tabs."):" ".concat(e,"-level analysis below."))}return r.createElement("div",null,r.createElement("i",{className:"fa fa-md ".concat(this.classNames.icon),style:{color:"#000000",marginRight:5}}),n)}},{key:"render",value:function(){if(this.props.store.overlapComputations.isComplete){var e=this.props.store.overlapComputations.result;return!e.totalSampleOverlap&&!e.totalPatientOverlap||"sample"===this.props.only&&!e.totalSampleOverlap||"patient"===this.props.only&&!e.totalPatientOverlap?null:r.createElement("div",{className:"alert ".concat(this.classNames.alert)},this.excludedGroupsSummary.component,"patient"!==this.props.only&&this.makeOverlappingCasesMessage("sample",e),"sample"!==this.props.only&&this.makeOverlappingCasesMessage("patient",e))}return null}},{key:"classNames",get:function(){var e="",t="";switch(this.props.store.overlapStrategy){case l.a.INCLUDE:this.props.survivalTabMode?(e="fa-info-circle",t="alert-info"):(e="fa-exclamation-triangle",t="alert-warning");break;case l.a.EXCLUDE:e="fa-info-circle",t="alert-info"}return{icon:e,alert:t}}}])&&u(n.prototype,o),a&&u(n,a),t}();m.defaultProps={overlapTabMode:!1,survivalTabMode:!1},h([a.computed],m.prototype,"classNames",null),m=h([o.observer],m),t.a=m},,function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(631),o=n(4),i=n.n(o);function a(e,t){if(t.length){var n,r=!1;return"-"===t[0]&&(t=t.substring(1),r=!0),t.length?(n=!(!e.cytoband||0!==e.cytoband.indexOf(t)),r?!n:n):!0}return!0}function s(e,t){if((t=t.trim()).length){var n=t.split(/\s+/g),o=[],s=[],l=!0,u=!1,c=void 0;try{for(var p,d=n[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var f=p.value;"-"===f[0]?s.push(f):o.push(f)}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}var h=!o.length||i.a.some(o,function(t){return a(e,t)}),m=!s.length||Object(r.a)(s.map(function(t){return a(e,t)}));return h&&m}return!0}},function(e,t,n){"use strict";var r;n.d(t,"a",function(){return r}),function(e){e.YES="YES",e.NO="NO",e.NA="NA"}(r||(r={}))},function(e,t,n){"use strict";function r(e,t,n,o){this.message=e,this.expected=t,this.found=n,this.location=o,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,r)}!function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(r,Error),r.buildMessage=function(e,t){var n={literal:function(e){return'"'+o(e.text)+'"'},class:function(e){var t,n="";for(t=0;t<e.parts.length;t++)n+=e.parts[t]instanceof Array?i(e.parts[t][0])+"-"+i(e.parts[t][1]):i(e.parts[t]);return"["+(e.inverted?"^":"")+n+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function o(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function i(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}return"Expected "+function(e){var t,r,o,i=new Array(e.length);for(t=0;t<e.length;t++)i[t]=(o=e[t],n[o.type](o));if(i.sort(),i.length>0){for(t=1,r=1;t<i.length;t++)i[t-1]!==i[t]&&(i[r]=i[t],r++);i.length=r}switch(i.length){case 1:return i[0];case 2:return i[0]+" or "+i[1];default:return i.slice(0,-1).join(", ")+", or "+i[i.length-1]}}(e)+" but "+function(e){return e?'"'+o(e)+'"':"end of input"}(t)+" found."},e.exports={SyntaxError:r,parse:function(e,t){t=void 0!==t?t:{};var n,o={},i={start:In},a=In,s=function(){return!1},l=/^[0-9]/,u=Pn([["0","9"]],!1,!1),c=function(e){return e.join("")},p="-",d=Cn("-",!1),f=function(e){return"-"+e},h=".",m=Cn(".",!1),y=function(e,t){return e+"."+t},g=function(e){return"."+e},v=function(e){return e},b=/^[\-_.@\/a-zA-Z0-9*]/,S=Pn(["-","_",".","@","/",["a","z"],["A","Z"],["0","9"],"*"],!1,!1),_=function(e){return e.join("")},w=/^[\-_.\/a-zA-Z0-9*]/,E=Pn(["-","_",".","/",["a","z"],["A","Z"],["0","9"],"*"],!1,!1),O=function(e){return e},C=/^[GPAVLIMCFYWHKRQNEDST]/,P=Pn(["G","P","A","V","L","I","M","C","F","Y","W","H","K","R","Q","N","E","D","S","T"],!1,!1),x=function(e){return e},T=/^[^"]/,k=Pn(['"'],!0,!1),A=function(e){return e.join("")},I=/^[ \t\r]/,D=Pn([" ","\t","\r"],!1,!1),M=/^[,; \t\r\n]/,j=Pn([",",";"," ","\t","\r","\n"],!1,!1),N="[",R=Cn("[",!1),L='"',G=Cn('"',!1),F=function(e){return{label:e,list:[]}},B=function(){return{label:void 0,list:[]}},V="amp",z=Cn("AMP",!0),q="homdel",U=Cn("HOMDEL",!0),H="gain",W=Cn("GAIN",!0),K="hetloss",$=Cn("HETLOSS",!0),Q="mut",Y=Cn("MUT",!0),X=(Cn("EXP",!0),Cn("PROT",!0),function(e,t){return e.concat(t)}),Z=function(e,t){return e.concat(t)},J=function(e){return e},ee=function(e){return e},te="]",ne=Cn("]",!1),re=function(e,t,n){return e.list=t,[e].concat(n)},oe=function(e,t){return e.list=t,[e]},ie=function(e,t){return[e].concat(t)},ae=function(e){return[e]},se=":",le=Cn(":",!1),ue=function(e,t){return{gene:e,alterations:t}},ce=function(e){return{gene:e,alterations:!1}},pe=function(e,t){return[e].concat(t)},de=function(e){return[e]},fe=function(e){return e},he="_",me=Cn("_",!1),ye=function(e){return{alteration_type:"any",modifiers:[e]}},ge=function(){return"AMP"},ve=function(){return"HOMDEL"},be=function(){return"GAIN"},Se=function(){return"HETLOSS"},_e="cna",we=Cn("CNA",!0),Ee=function(e,t){return{alteration_type:"cna",constr_rel:e,constr_val:t,modifiers:[]}},Oe="CNA_",Ce=Cn("CNA_",!1),Pe=function(e){return{alteration_type:"cna",modifiers:[e]}},xe=function(e,t){return{alteration_type:"cna",constr_rel:"=",constr_val:e,modifiers:[t]}},Te="_CNA",ke=Cn("_CNA",!1),Ae=function(e,t){return{alteration_type:"cna",constr_rel:"=",constr_val:t,modifiers:[e]}},Ie=function(e){return{alteration_type:"cna",constr_rel:"=",constr_val:e,modifiers:[]}},De="MUT",Me=Cn("MUT",!1),je="=",Ne=Cn("=",!1),Re=function(e){return{alteration_type:"mut",constr_rel:"=",constr_type:e.type,constr_val:e.value,info:e.info,modifiers:e.modifiers}},Le="!=",Ge=Cn("!=",!1),Fe=function(e){return{alteration_type:"mut",constr_rel:"!=",constr_type:e.type,constr_val:e.value,info:e.info,modifiers:e.modifiers}},Be=function(e){return e.type?{alteration_type:"mut",constr_rel:"=",constr_type:e.type,constr_val:e.value,info:e.info,modifiers:e.modifiers}:{alteration_type:"mut",info:{},modifiers:e.modifiers}},Ve="EXP",ze=Cn("EXP",!1),qe=function(e,t){return{alteration_type:"exp",constr_rel:e,constr_val:parseFloat(t)}},Ue="fusion",He=Cn("FUSION",!0),We=function(e){return{alteration_type:"fusion",modifiers:[e]}},Ke="_fusion",$e=Cn("_FUSION",!0),Qe=function(){return{alteration_type:"fusion",modifiers:[]}},Ye="PROT",Xe=Cn("PROT",!1),Ze=function(e,t){return{alteration_type:"prot",constr_rel:e,constr_val:parseFloat(t)}},Je=">=",et=Cn(">=",!1),tt=function(){return">="},nt="<=",rt=Cn("<=",!1),ot=function(){return"<="},it=">",at=Cn(">",!1),st=function(){return">"},lt="<",ut=Cn("<",!1),ct=function(){return"<"},pt=function(e,t){return t.modifiers.unshift(e),t},dt=function(e,t){return e.modifiers=t,e},ft=function(e){return{info:{},modifiers:[e]}},ht=function(e){return e.modifiers=[],e},mt=function(e,t){return[e].concat(t)},yt=function(e){return[e]},gt=function(){return{info:{}}},vt="missense",bt=Cn("MISSENSE",!0),St=function(){return{type:"class",value:"MISSENSE",info:{}}},_t="nonsense",wt=Cn("NONSENSE",!0),Et=function(){return{type:"class",value:"NONSENSE",info:{}}},Ot="nonstart",Ct=Cn("NONSTART",!0),Pt=function(){return{type:"class",value:"NONSTART",info:{}}},xt="nonstop",Tt=Cn("NONSTOP",!0),kt=function(){return{type:"class",value:"NONSTOP",info:{}}},At="frameshift",It=Cn("FRAMESHIFT",!0),Dt=function(){return{type:"class",value:"FRAMESHIFT",info:{}}},Mt="inframe",jt=Cn("INFRAME",!0),Nt=function(){return{type:"class",value:"INFRAME",info:{}}},Rt="splice",Lt=Cn("SPLICE",!0),Gt=function(){return{type:"class",value:"SPLICE",info:{}}},Ft="trunc",Bt=Cn("TRUNC",!0),Vt=function(){return{type:"class",value:"TRUNC",info:{}}},zt="promoter",qt=Cn("PROMOTER",!0),Ut=function(){return{type:"class",value:"PROMOTER",info:{}}},Ht=function(e,t,n){return{type:"name",value:e+t+n,info:{}}},Wt=function(e,t){return{type:"position",value:parseInt(t),info:{amino_acid:e.toUpperCase()}}},Kt=function(e){return{type:"name",value:e,info:{unrecognized:!0}}},$t=function(e,t){return e+t},Qt=function(e){return e},Yt=function(e){return e},Xt="germline",Zt=Cn("GERMLINE",!0),Jt=function(){return{type:"GERMLINE"}},en="somatic",tn=Cn("SOMATIC",!0),nn=function(){return{type:"SOMATIC"}},rn=function(e){return e},on=function(e){return e},an="driver",sn=Cn("DRIVER",!0),ln=function(){return{type:"DRIVER"}},un="(",cn=Cn("(",!1),pn=/^[*]/,dn=Pn(["*"],!1,!1),fn=")",hn=Cn(")",!1),mn=function(e,t,n){return{type:"RANGE",start:parseInt(e,10),end:parseInt(t,10),completeOverlapOnly:!!n}},yn="(-",gn=Cn("(-",!1),vn=function(e,t){return{type:"RANGE",end:parseInt(e,10),completeOverlapOnly:!!t}},bn=function(e,t){return{type:"RANGE",start:parseInt(e,10),completeOverlapOnly:!!t}},Sn=0,_n=[{line:1,column:1}],wn=0,En=[],On=0;if("startRule"in t){if(!(t.startRule in i))throw new Error("Can't start parsing from rule \""+t.startRule+'".');a=i[t.startRule]}function Cn(e,t){return{type:"literal",text:e,ignoreCase:t}}function Pn(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function xn(t){var n,r=_n[t];if(r)return r;for(n=t-1;!_n[n];)n--;for(r={line:(r=_n[n]).line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return _n[t]=r,r}function Tn(e,t){var n=xn(e),r=xn(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function kn(e){Sn<wn||(Sn>wn&&(wn=Sn,En=[]),En.push(e))}function An(e,t,n){return new r(r.buildMessage(e,t),e,t,n)}function In(){var e,t;return(e=function e(){var t,n,r;return t=Sn,(n=zn())!==o&&Bn()!==o&&(r=e())!==o?(n=X(n,r),t=n):(Sn=t,t=o),t===o&&(t=Sn,(n=qn())!==o&&Bn()!==o&&(r=e())!==o?(n=Z(n,r),t=n):(Sn=t,t=o),t===o&&(t=Sn,(n=zn())!==o&&Fn()!==o?(n=J(n),t=n):(Sn=t,t=o),t===o&&(t=Sn,(n=qn())!==o&&Fn()!==o?(n=ee(n),t=n):(Sn=t,t=o)))),t}())===o&&(e=Sn,(t=Ln())!==o&&(t=s()),e=t),e}function Dn(){var t,n;if(Sn,t=[],l.test(e.charAt(Sn))?(n=e.charAt(Sn),Sn++):(n=o,0===On&&kn(u)),n!==o)for(;n!==o;)t.push(n),l.test(e.charAt(Sn))?(n=e.charAt(Sn),Sn++):(n=o,0===On&&kn(u));else t=o;return t!==o&&(t=c(t)),t}function Mn(){var t,n,r,i;return t=Sn,45===e.charCodeAt(Sn)?(n=p,Sn++):(n=o,0===On&&kn(d)),n!==o&&(r=Mn())!==o?t=n=f(r):(Sn=t,t=o),t===o&&(t=Sn,(n=Dn())!==o?(46===e.charCodeAt(Sn)?(r=h,Sn++):(r=o,0===On&&kn(m)),r!==o&&(i=Dn())!==o?t=n=y(n,i):(Sn=t,t=o)):(Sn=t,t=o),t===o&&(t=Sn,46===e.charCodeAt(Sn)?(n=h,Sn++):(n=o,0===On&&kn(m)),n!==o&&(r=Dn())!==o?t=n=g(r):(Sn=t,t=o),t===o&&(t=Sn,(n=Dn())!==o&&(n=v(n)),t=n))),t}function jn(){var t,n;if(Sn,t=[],b.test(e.charAt(Sn))?(n=e.charAt(Sn),Sn++):(n=o,0===On&&kn(S)),n!==o)for(;n!==o;)t.push(n),b.test(e.charAt(Sn))?(n=e.charAt(Sn),Sn++):(n=o,0===On&&kn(S));else t=o;return t!==o&&(t=_(t)),t}function Nn(){var t;return Sn,w.test(e.charAt(Sn))?(t=e.charAt(Sn),Sn++):(t=o,0===On&&kn(E)),t!==o&&(t=O(t)),t}function Rn(){var t;return Sn,C.test(e.charAt(Sn))?(t=e.charAt(Sn),Sn++):(t=o,0===On&&kn(P)),t!==o&&(t=x(t)),t}function Ln(){var t,n;if(t=[],I.test(e.charAt(Sn))?(n=e.charAt(Sn),Sn++):(n=o,0===On&&kn(D)),n!==o)for(;n!==o;)t.push(n),I.test(e.charAt(Sn))?(n=e.charAt(Sn),Sn++):(n=o,0===On&&kn(D));else t=o;return t}function Gn(){var t,n;for(t=[],I.test(e.charAt(Sn))?(n=e.charAt(Sn),Sn++):(n=o,0===On&&kn(D));n!==o;)t.push(n),I.test(e.charAt(Sn))?(n=e.charAt(Sn),Sn++):(n=o,0===On&&kn(D));return t}function Fn(){var t,n;for(t=[],M.test(e.charAt(Sn))?(n=e.charAt(Sn),Sn++):(n=o,0===On&&kn(j));n!==o;)t.push(n),M.test(e.charAt(Sn))?(n=e.charAt(Sn),Sn++):(n=o,0===On&&kn(j));return t}function Bn(){var t,n;if(t=[],M.test(e.charAt(Sn))?(n=e.charAt(Sn),Sn++):(n=o,0===On&&kn(j)),n!==o)for(;n!==o;)t.push(n),M.test(e.charAt(Sn))?(n=e.charAt(Sn),Sn++):(n=o,0===On&&kn(j));else t=o;return t}function Vn(){var t,n,r,i,a;return t=Sn,91===e.charCodeAt(Sn)?(n=N,Sn++):(n=o,0===On&&kn(R)),n!==o&&Fn()!==o?(34===e.charCodeAt(Sn)?(r=L,Sn++):(r=o,0===On&&kn(G)),r!==o&&(i=function(){var t,n;if(Sn,t=[],T.test(e.charAt(Sn))?(n=e.charAt(Sn),Sn++):(n=o,0===On&&kn(k)),n!==o)for(;n!==o;)t.push(n),T.test(e.charAt(Sn))?(n=e.charAt(Sn),Sn++):(n=o,0===On&&kn(k));else t=o;return t!==o&&(t=A(t)),t}())!==o?(34===e.charCodeAt(Sn)?(a=L,Sn++):(a=o,0===On&&kn(G)),a!==o?t=n=F(i):(Sn=t,t=o)):(Sn=t,t=o)):(Sn=t,t=o),t===o&&(t=Sn,91===e.charCodeAt(Sn)?(n=N,Sn++):(n=o,0===On&&kn(R)),n!==o&&Fn()!==o?t=n=B():(Sn=t,t=o)),t}function zn(){var t,n,r,i,a;return t=Sn,Fn()!==o&&(n=Vn())!==o&&(r=qn())!==o&&Fn()!==o?(93===e.charCodeAt(Sn)?(i=te,Sn++):(i=o,0===On&&kn(ne)),i!==o&&Fn()!==o&&(a=zn())!==o?t=re(n,r,a):(Sn=t,t=o)):(Sn=t,t=o),t===o&&(t=Sn,Fn()!==o&&(n=Vn())!==o&&(r=qn())!==o&&Fn()!==o?(93===e.charCodeAt(Sn)?(i=te,Sn++):(i=o,0===On&&kn(ne)),i!==o?t=oe(n,r):(Sn=t,t=o)):(Sn=t,t=o)),t}function qn(){var e,t,n;return e=Sn,Fn()!==o&&(t=Un())!==o&&Bn()!==o&&(n=qn())!==o?e=ie(t,n):(Sn=e,e=o),e===o&&(e=Sn,Fn()!==o&&(t=Un())!==o?e=ae(t):(Sn=e,e=o)),e}function Un(){var t,n,r,i;return t=Sn,(n=jn())!==o&&Gn()!==o?(58===e.charCodeAt(Sn)?(r=se,Sn++):(r=o,0===On&&kn(le)),r!==o&&Gn()!==o&&(i=function e(){var t,n,r;return t=Sn,(n=Hn())!==o&&Ln()!==o&&(r=e())!==o?(n=pe(n,r),t=n):(Sn=t,t=o),t===o&&(t=Sn,(n=Hn())!==o&&(n=de(n)),t=n),t}())!==o?t=n=ue(n,i):(Sn=t,t=o)):(Sn=t,t=o),t===o&&(t=Sn,(n=jn())!==o&&(n=ce(n)),t=n),t}function Hn(){var t,n;return t=Sn,(n=function(){var t,n,r,i;return t=Sn,(n=tr())!==o?(r=Sn,On++,95===e.charCodeAt(Sn)?(i=he,Sn++):(i=o,0===On&&kn(me)),On--,i===o?r=void 0:(Sn=r,r=o),r!==o?(n=ye(n),t=n):(Sn=t,t=o)):(Sn=t,t=o),t}())!==o&&(n=fe(n)),(t=n)===o&&(t=Sn,(n=function(){var t,n,r,i,a;return t=Sn,e.substr(Sn,3).toLowerCase()===_e?(n=e.substr(Sn,3),Sn+=3):(n=o,0===On&&kn(we)),n!==o&&(r=Gn())!==o&&(i=Kn())!==o&&Gn()!==o&&(a=Wn())!==o?(n=Ee(i,a),t=n):(Sn=t,t=o),t===o&&(t=Sn,e.substr(Sn,4)===Oe?(n=Oe,Sn+=4):(n=o,0===On&&kn(Ce)),n!==o&&(r=Jn())!==o?(n=Pe(r),t=n):(Sn=t,t=o),t===o&&(t=Sn,(n=Wn())!==o?(95===e.charCodeAt(Sn)?(r=he,Sn++):(r=o,0===On&&kn(me)),r!==o&&(i=Jn())!==o?(n=xe(n,i),t=n):(Sn=t,t=o)):(Sn=t,t=o),t===o&&(t=Sn,(n=Jn())!==o?(e.substr(Sn,4)===Te?(r=Te,Sn+=4):(r=o,0===On&&kn(ke)),r!==o?(n=Pe(n),t=n):(Sn=t,t=o)):(Sn=t,t=o),t===o&&(t=Sn,(n=Jn())!==o?(95===e.charCodeAt(Sn)?(r=he,Sn++):(r=o,0===On&&kn(me)),r!==o&&(i=Wn())!==o?(n=Ae(n,i),t=n):(Sn=t,t=o)):(Sn=t,t=o),t===o&&(t=Sn,(n=Wn())!==o&&(n=Ie(n)),t=n))))),t}())!==o&&(n=fe(n)),(t=n)===o&&(t=Sn,(n=function(){var t,n,r,i;return t=Sn,e.substr(Sn,3)===Ve?(n=Ve,Sn+=3):(n=o,0===On&&kn(ze)),n!==o&&Gn()!==o&&(r=Kn())!==o&&Gn()!==o&&(i=Mn())!==o?(n=qe(r,i),t=n):(Sn=t,t=o),t}())!==o&&(n=fe(n)),(t=n)===o&&(t=Sn,(n=function(){var t,n,r,i;return t=Sn,e.substr(Sn,4)===Ye?(n=Ye,Sn+=4):(n=o,0===On&&kn(Xe)),n!==o&&Gn()!==o&&(r=Kn())!==o&&Gn()!==o&&(i=Mn())!==o?(n=Ze(r,i),t=n):(Sn=t,t=o),t}())!==o&&(n=fe(n)),(t=n)===o&&(t=Sn,(n=function(){var t,n,r,i;return t=Sn,e.substr(Sn,6).toLowerCase()===Ue?(n=e.substr(Sn,6),Sn+=6):(n=o,0===On&&kn(He)),n!==o?(95===e.charCodeAt(Sn)?(r=he,Sn++):(r=o,0===On&&kn(me)),r!==o&&(i=er())!==o?(n=We(i),t=n):(Sn=t,t=o)):(Sn=t,t=o),t===o&&(t=Sn,(n=er())!==o?(e.substr(Sn,7).toLowerCase()===Ke?(r=e.substr(Sn,7),Sn+=7):(r=o,0===On&&kn($e)),r!==o?(n=We(n),t=n):(Sn=t,t=o)):(Sn=t,t=o),t===o&&(t=Sn,e.substr(Sn,6).toLowerCase()===Ue?(n=e.substr(Sn,6),Sn+=6):(n=o,0===On&&kn(He)),n!==o&&(n=Qe()),t=n)),t}())!==o&&(n=fe(n)),(t=n)===o&&(t=Sn,(n=function(){var t,n,r,i;return t=Sn,e.substr(Sn,3)===De?(n=De,Sn+=3):(n=o,0===On&&kn(Me)),n!==o&&Gn()!==o?(61===e.charCodeAt(Sn)?(r=je,Sn++):(r=o,0===On&&kn(Ne)),r!==o&&Gn()!==o&&(i=$n())!==o?(n=Re(i),t=n):(Sn=t,t=o)):(Sn=t,t=o),t===o&&(t=Sn,e.substr(Sn,3)===De?(n=De,Sn+=3):(n=o,0===On&&kn(Me)),n!==o&&Gn()!==o?(e.substr(Sn,2)===Le?(r=Le,Sn+=2):(r=o,0===On&&kn(Ge)),r!==o&&Gn()!==o&&(i=$n())!==o?(n=Fe(i),t=n):(Sn=t,t=o)):(Sn=t,t=o),t===o&&(t=Sn,(n=$n())!==o&&(n=Be(n)),t=n)),t}())!==o&&(n=fe(n)),t=n))))),t}function Wn(){var t,n;return t=Sn,e.substr(Sn,3).toLowerCase()===V?(n=e.substr(Sn,3),Sn+=3):(n=o,0===On&&kn(z)),n!==o&&(n=ge()),(t=n)===o&&(t=Sn,e.substr(Sn,6).toLowerCase()===q?(n=e.substr(Sn,6),Sn+=6):(n=o,0===On&&kn(U)),n!==o&&(n=ve()),(t=n)===o&&(t=Sn,e.substr(Sn,4).toLowerCase()===H?(n=e.substr(Sn,4),Sn+=4):(n=o,0===On&&kn(W)),n!==o&&(n=be()),(t=n)===o&&(t=Sn,e.substr(Sn,7).toLowerCase()===K?(n=e.substr(Sn,7),Sn+=7):(n=o,0===On&&kn($)),n!==o&&(n=Se()),t=n))),t}function Kn(){var t,n;return t=Sn,e.substr(Sn,2)===Je?(n=Je,Sn+=2):(n=o,0===On&&kn(et)),n!==o&&(n=tt()),(t=n)===o&&(t=Sn,e.substr(Sn,2)===nt?(n=nt,Sn+=2):(n=o,0===On&&kn(rt)),n!==o&&(n=ot()),(t=n)===o&&(t=Sn,62===e.charCodeAt(Sn)?(n=it,Sn++):(n=o,0===On&&kn(at)),n!==o&&(n=st()),(t=n)===o&&(t=Sn,60===e.charCodeAt(Sn)?(n=lt,Sn++):(n=o,0===On&&kn(ut)),n!==o&&(n=ct()),t=n))),t}function $n(){var t,n,r,i;return t=Sn,(n=Zn())!==o?(95===e.charCodeAt(Sn)?(r=he,Sn++):(r=o,0===On&&kn(me)),r!==o&&(i=$n())!==o?t=n=pt(n,i):(Sn=t,t=o)):(Sn=t,t=o),t===o&&(t=Sn,(n=Qn())!==o?(95===e.charCodeAt(Sn)?(r=he,Sn++):(r=o,0===On&&kn(me)),r!==o&&(i=function t(){var n,r,i,a;return n=Sn,(r=Zn())!==o?(95===e.charCodeAt(Sn)?(i=he,Sn++):(i=o,0===On&&kn(me)),i!==o&&(a=t())!==o?(r=mt(r,a),n=r):(Sn=n,n=o)):(Sn=n,n=o),n===o&&(n=Sn,(r=Zn())!==o&&(r=yt(r)),n=r),n}())!==o?t=n=dt(n,i):(Sn=t,t=o)):(Sn=t,t=o),t===o&&(t=Sn,(n=Zn())!==o&&(n=ft(n)),(t=n)===o&&(t=Sn,(n=Qn())!==o&&(n=ht(n)),t=n))),t}function Qn(){var t,n,r,i;return t=Sn,e.substr(Sn,3).toLowerCase()===Q?(n=e.substr(Sn,3),Sn+=3):(n=o,0===On&&kn(Y)),n!==o&&(n=gt()),(t=n)===o&&(t=Sn,e.substr(Sn,8).toLowerCase()===vt?(n=e.substr(Sn,8),Sn+=8):(n=o,0===On&&kn(bt)),n!==o&&(n=St()),(t=n)===o&&(t=Sn,e.substr(Sn,8).toLowerCase()===_t?(n=e.substr(Sn,8),Sn+=8):(n=o,0===On&&kn(wt)),n!==o&&(n=Et()),(t=n)===o&&(t=Sn,e.substr(Sn,8).toLowerCase()===Ot?(n=e.substr(Sn,8),Sn+=8):(n=o,0===On&&kn(Ct)),n!==o&&(n=Pt()),(t=n)===o&&(t=Sn,e.substr(Sn,7).toLowerCase()===xt?(n=e.substr(Sn,7),Sn+=7):(n=o,0===On&&kn(Tt)),n!==o&&(n=kt()),(t=n)===o&&(t=Sn,e.substr(Sn,10).toLowerCase()===At?(n=e.substr(Sn,10),Sn+=10):(n=o,0===On&&kn(It)),n!==o&&(n=Dt()),(t=n)===o&&(t=Sn,e.substr(Sn,7).toLowerCase()===Mt?(n=e.substr(Sn,7),Sn+=7):(n=o,0===On&&kn(jt)),n!==o&&(n=Nt()),(t=n)===o&&(t=Sn,e.substr(Sn,6).toLowerCase()===Rt?(n=e.substr(Sn,6),Sn+=6):(n=o,0===On&&kn(Lt)),n!==o&&(n=Gt()),(t=n)===o&&(t=Sn,e.substr(Sn,5).toLowerCase()===Ft?(n=e.substr(Sn,5),Sn+=5):(n=o,0===On&&kn(Bt)),n!==o&&(n=Vt()),(t=n)===o&&(t=Sn,e.substr(Sn,8).toLowerCase()===zt?(n=e.substr(Sn,8),Sn+=8):(n=o,0===On&&kn(qt)),n!==o&&(n=Ut()),(t=n)===o&&(t=Sn,(n=Rn())!==o&&(r=Dn())!==o&&(i=Yn())!==o?t=n=Ht(n,r,i):(Sn=t,t=o),t===o&&(t=Sn,(n=Rn())!==o&&(r=Dn())!==o?t=n=Wt(n,r):(Sn=t,t=o),t===o&&(t=Sn,(n=Yn())!==o&&(n=Kt(n)),t=n)))))))))))),t}function Yn(){var e,t,n,r,i;return e=Sn,t=Sn,On++,n=Xn(),On--,n===o?t=void 0:(Sn=t,t=o),t!==o&&(n=Nn())!==o?(r=Sn,On++,i=Xn(),On--,i===o?r=void 0:(Sn=r,r=o),r!==o&&(i=Yn())!==o?e=t=$t(n,i):(Sn=e,e=o)):(Sn=e,e=o),e===o&&(e=Sn,t=Sn,On++,n=Xn(),On--,n===o?t=void 0:(Sn=t,t=o),t!==o&&(n=Nn())!==o?e=t=Qt(n):(Sn=e,e=o)),e}function Xn(){var t,n,r;return t=Sn,95===e.charCodeAt(Sn)?(n=he,Sn++):(n=o,0===On&&kn(me)),n!==o&&(r=Zn())!==o?t=n=Yt(r):(Sn=t,t=o),t}function Zn(){var t,n;return t=Sn,e.substr(Sn,8).toLowerCase()===Xt?(n=e.substr(Sn,8),Sn+=8):(n=o,0===On&&kn(Zt)),n!==o&&(n=Jt()),(t=n)===o&&(t=Sn,e.substr(Sn,7).toLowerCase()===en?(n=e.substr(Sn,7),Sn+=7):(n=o,0===On&&kn(tn)),n!==o&&(n=nn()),(t=n)===o&&(t=Sn,(n=tr())!==o&&(n=Yt(n)),(t=n)===o&&(t=Sn,(n=function(){var t,n,r,i,a,s,l;return t=Sn,40===e.charCodeAt(Sn)?(n=un,Sn++):(n=o,0===On&&kn(cn)),n!==o&&(r=Dn())!==o?(45===e.charCodeAt(Sn)?(i=p,Sn++):(i=o,0===On&&kn(d)),i!==o&&(a=Dn())!==o?(pn.test(e.charAt(Sn))?(s=e.charAt(Sn),Sn++):(s=o,0===On&&kn(dn)),s===o&&(s=null),s!==o?(41===e.charCodeAt(Sn)?(l=fn,Sn++):(l=o,0===On&&kn(hn)),l!==o?(n=mn(r,a,s),t=n):(Sn=t,t=o)):(Sn=t,t=o)):(Sn=t,t=o)):(Sn=t,t=o),t===o&&(t=Sn,e.substr(Sn,2)===yn?(n=yn,Sn+=2):(n=o,0===On&&kn(gn)),n!==o&&(r=Dn())!==o?(pn.test(e.charAt(Sn))?(i=e.charAt(Sn),Sn++):(i=o,0===On&&kn(dn)),i===o&&(i=null),i!==o?(41===e.charCodeAt(Sn)?(a=fn,Sn++):(a=o,0===On&&kn(hn)),a!==o?(n=vn(r,i),t=n):(Sn=t,t=o)):(Sn=t,t=o)):(Sn=t,t=o),t===o&&(t=Sn,40===e.charCodeAt(Sn)?(n=un,Sn++):(n=o,0===On&&kn(cn)),n!==o&&(r=Dn())!==o?(45===e.charCodeAt(Sn)?(i=p,Sn++):(i=o,0===On&&kn(d)),i!==o?(pn.test(e.charAt(Sn))?(a=e.charAt(Sn),Sn++):(a=o,0===On&&kn(dn)),a===o&&(a=null),a!==o?(41===e.charCodeAt(Sn)?(s=fn,Sn++):(s=o,0===On&&kn(hn)),s!==o?(n=bn(r,a),t=n):(Sn=t,t=o)):(Sn=t,t=o)):(Sn=t,t=o)):(Sn=t,t=o))),t}())!==o&&(n=rn(n)),t=n))),t}function Jn(){var e;return Sn,(e=tr())!==o&&(e=on(e)),e}function er(){var e;return Sn,(e=tr())!==o&&(e=on(e)),e}function tr(){var t;return Sn,e.substr(Sn,6).toLowerCase()===an?(t=e.substr(Sn,6),Sn+=6):(t=o,0===On&&kn(sn)),t!==o&&(t=ln()),t}if((n=a())!==o&&Sn===e.length)return n;throw n!==o&&Sn<e.length&&kn({type:"end"}),An(En,wn<e.length?e.charAt(wn):null,wn<e.length?Tn(wn,wn+1):Tn(wn,wn))}}},function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__1kueS",framedImage:"styles-module__framedImage__1ndwn",SurvivalTable:"styles-module__SurvivalTable__2NKCT",Tooltip:"styles-module__Tooltip__1I-Ty",NotAvailable:"styles-module__NotAvailable__1Zx5R",XmaxNumberInput:"styles-module__XmaxNumberInput__SQsf6"}},function(e,t,n){"use strict";var r=n(0),o=n(7),i=n(9),a=n.n(i),s=n(2);n(802);function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":d(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,c(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e,t,n,o;return this.props.store.queryContainsOql?(this.props.isUnaffected?(e="alert alert-unaffected",t="Your OQL specification does not affect the results below because you have not specified any filters for mutations in this gene.",n="fa fa-md fa-info-circle",o="OqlStatusBannerUnaffected"):this.props.tabReflectsOql?(e="alert alert-success",t="The results below are filtered by the OQL specification from your query.",n="fa fa-md fa-check",o="OqlStatusBannerYes"):(e="alert alert-info",t="The results below are not filtered by the OQL specification from your query.",n="fa fa-md fa-exclamation-triangle",o="OqlStatusBannerNo"),r.createElement("div",{"data-test":o,className:a()("oql-status-banner",e,this.props.className),style:Object.assign({},this.props.style||{})},r.createElement("span",{style:{verticalAlign:"middle"}},r.createElement("i",{className:a()("banner-icon",n),style:{verticalAlign:"middle !important",marginRight:6,marginBottom:1}}),t,this.toggleButton))):null}},{key:"toggleButton",get:function(){return this.props.onToggle&&!this.props.isUnaffected?r.createElement("span",null,r.createElement("button",{onClick:this.props.onToggle,className:"btn btn-default btn-xs",style:{marginLeft:5}},this.props.tabReflectsOql?"Do not filter by OQL":"Filter by OQL")):null}}])&&l(n.prototype,o),i&&l(n,i),t}();f([s.computed],h.prototype,"toggleButton",null),h=f([o.observer],h),t.a=h},function(e,t,n){"use strict";var r=n(0),o=n(7),i=n(2),a=n(579);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":p(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};function f(e,t){var n=[];return e.mutation&&n.push("mutation".concat(t?"s":"")),e.cna&&n.push("copy number alteration".concat(t?"s":"")),"".concat(n.join(" and ")," of unknown significance")}var h=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=l(this,u(t).apply(this,arguments))).vusWarning=Object(a.a)({await:function(){return e.props.mutationsTabModeSettings?[e.props.store.mutationsReportByGene]:[e.props.store.oqlFilteredMutationsReport,e.props.store.oqlFilteredMolecularDataReport]},render:function(){var t=0,o={mutation:!1,cna:!1};if(e.props.mutationsTabModeSettings){var i=e.props.store.mutationsReportByGene.result[e.props.mutationsTabModeSettings.hugoGeneSymbol];(t=i.vus.length+i.vusAndGermline.length)>0&&(o.mutation=!0)}else{var a=e.props.store.oqlFilteredMutationsReport.result,s=a.vus.length+a.vusAndGermline.length,l=e.props.store.oqlFilteredMolecularDataReport.result.vus.length;t=s+l,s>0&&(o.mutation=!0),l>0&&(o.cna=!0)}if(!(t>0))return null;var u=1===t?"is":"are",c=1===t?"does":"do",p=1===t?"an alteration":"alterations";return e.props.isUnaffected&&e.excludeVUS?r.createElement("div",{className:"alert alert-unaffected"},r.createElement("i",{className:"fa fa-md fa-info-circle",style:{verticalAlign:"middle !important",marginRight:6,marginBottom:1}}),"".concat(t," ").concat(f(o,1!==t)," ").concat(u," included in analysis.")):e.excludeVUS||e.vusToggleable?r.createElement("div",{className:"alert alert-info"},r.createElement("img",{src:n(744),style:{marginRight:6,width:15,marginTop:-2}}),e.excludeVUS?"".concat(t," ").concat(f(o,1!==t)," ").concat(e.props.mutationsTabModeSettings?"".concat(u," hidden below."):"".concat(c," not count as ").concat(p," for this analysis.")):"".concat(t," ").concat(f(o,1!==t)," ").concat(u," ").concat(e.props.mutationsTabModeSettings?"shown below.":"included in analysis."),e.vusToggleable&&r.createElement("button",{onClick:e.props.mutationsTabModeSettings.toggleExcludeVUS,className:"btn btn-default btn-xs",style:{marginLeft:5}},e.excludeVUS?e.props.mutationsTabModeSettings?"Show":"Include":e.props.mutationsTabModeSettings?"Hide":"Exclude")):void 0}}),e.germlineWarning=Object(a.a)({await:function(){return e.props.mutationsTabModeSettings?[e.props.store.mutationsReportByGene]:[e.props.store.oqlFilteredMutationsReport]},render:function(){var t,o=(t=e.props.mutationsTabModeSettings?e.props.store.mutationsReportByGene.result[e.props.mutationsTabModeSettings.hugoGeneSymbol]:e.props.store.oqlFilteredMutationsReport.result).germline.length+t.vusAndGermline.length;if(!(o>0))return null;var i=1===o?"is":"are",a=1===o?"does":"do",s=1===o?"an alteration":"alterations";return e.props.isUnaffected&&e.excludeGermline?r.createElement("div",{className:"alert alert-unaffected"},r.createElement("i",{className:"fa fa-md fa-info-circle",style:{verticalAlign:"middle !important",marginRight:6,marginBottom:1}}),"".concat(o," germline mutations ").concat(i," included in analysis.")):e.excludeGermline||e.germlineToggleable?r.createElement("div",{className:"alert alert-info"},r.createElement("img",{src:n(744),style:{marginRight:6,width:15,marginTop:-2}}),e.excludeGermline?"".concat(o," germline mutations ").concat(e.props.mutationsTabModeSettings?"".concat(i," hidden below."):"".concat(a," not count as ").concat(s," for this analysis.")):"".concat(o," germline mutations ").concat(i," ").concat(e.props.mutationsTabModeSettings?"shown below.":"included in analysis."),e.germlineToggleable&&r.createElement("button",{onClick:e.props.mutationsTabModeSettings.toggleExcludeGermline,className:"btn btn-default btn-xs",style:{marginLeft:5}},e.excludeGermline?e.props.mutationsTabModeSettings?"Show":"Include":e.props.mutationsTabModeSettings?"Hide":"Exclude")):void 0}}),e}var o,i,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r["Component"]),o=t,(i=[{key:"render",value:function(){return r.createElement(r.Fragment,null,this.vusWarning.component,this.germlineWarning.component)}},{key:"excludeVUS",get:function(){return this.props.mutationsTabModeSettings?this.props.mutationsTabModeSettings.excludeVUS:this.props.store.driverAnnotationSettings.excludeVUS}},{key:"excludeGermline",get:function(){return this.props.mutationsTabModeSettings?this.props.mutationsTabModeSettings.excludeGermline:this.props.store.excludeGermlineMutations}},{key:"vusToggleable",get:function(){return this.props.mutationsTabModeSettings&&this.props.store.driverAnnotationSettings.excludeVUS}},{key:"germlineToggleable",get:function(){return this.props.mutationsTabModeSettings&&this.props.store.excludeGermlineMutations}}])&&s(o.prototype,i),p&&s(o,p),t}();d([i.computed],h.prototype,"excludeVUS",null),d([i.computed],h.prototype,"excludeGermline",null),d([i.computed],h.prototype,"vusToggleable",null),d([i.computed],h.prototype,"germlineToggleable",null),h=d([o.observer],h),t.a=h},,function(e,t,n){"use strict";n.d(t,"b",function(){return b}),n.d(t,"a",function(){return S});var r=n(0),o=n(938),i=n.n(o),a=n(9),s=n.n(a);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function d(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var g=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function v(e,t){var n=e.padded,o=e.overflow,a=e.flex,l=g(e,["padded","overflow","flex"]),u=Object.assign(Object.assign({flex:a,display:"flex",overflow:o?"visible":"auto"},e.style),{flexDirection:t}),c=s()(e.className,i.a[t],n&&i.a.padded);return r.createElement("div",y({},l,{style:u,className:c}))}var b=function(e){function t(){return u(this,t),d(this,f(t).apply(this,arguments))}return h(t,r["Component"]),p(t,[{key:"render",value:function(){return v(this.props,"row")}}]),t}(),S=function(e){function t(){return u(this,t),d(this,f(t).apply(this,arguments))}return h(t,r["Component"]),p(t,[{key:"render",value:function(){return v(this.props,"column")}}]),t}()},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.inputToKey=t,this.inputToOutput=n,this.memo={}}var t,n,o;return t=e,(n=[{key:"get",value:function(e){var t=this.inputToKey(e);return this.memo[t]=this.memo[t]||this.inputToOutput(e),this.memo[t]}},{key:"has",value:function(e){return this.inputToKey(e)in this.memo}}])&&r(t.prototype,n),o&&r(t,o),e}();function i(e){return JSON.stringify(e,Object.keys(e).sort())}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,n=new o(t,function(t){return function(n){return e(n,t)}});return function(e){return n.get(e)}}n.d(t,"a",function(){return a})},function(e,t,n){"use strict";var r=n(0),o=n(7),i=n(946),a=n.n(i),s=n(9),l=n.n(s),u=n(626),c=n.n(u),p=n(947),d=n.n(p);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},S=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),y(this,g(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.error,n=e.children,o=e.className,i=b(e,["error","children","className"]);return r.createElement("div",h({className:l()(o,d.a.error)},i),r.createElement("span",{className:d.a.message},r.createElement(c.a,{className:d.a.icon,name:"exclamation-circle"}),t.message+""),n)}}])&&m(n.prototype,o),i&&m(n,i),t}(),_=n(101);function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var T=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":x(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},k=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},A=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),O(this,C(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.promises,n=e.children,o=e.className,i=e.secondaryComponent,s=k(e,["promises","children","className","secondaryComponent"]);return r.createElement("div",w({className:l()(o,a.a.SectionHeader)},s),r.createElement("h2",null,n,!(!t||!t.some(function(e){return e.isPending}))&&r.createElement(_.a,{isLoading:!0,size:"small"})),!!i&&i,t&&t.map(function(e){return!!e.error&&r.createElement(S,{className:a.a.error,error:e.error})}))}}])&&E(n.prototype,o),i&&E(n,i),t}();A=T([o.observer],A);t.a=A},function(e,t,n){"use strict";var r=n(0);function o(e,t,n,r,o){var i=e+t+n+r,a=o[e+t]+o[n+r]+o[e+n]+o[t+r]-(o[e]+o[t]+o[n]+o[r]+o[i]);return Math.exp(a)}var i,a=n(620),s=n(784),l=n.n(s),u=n(4);function c(e,t,n,r){return function(e,t,n,r){var i,a,s=e+t+n+r,l=0,u=new Array(s+1);u[0]=0;for(var c=1;c<=s;c++)u[c]=u[c-1]+Math.log(c);if(l+=o(e,t,n,r,u),e*r>=t*n)for(i=n<t?n:t,a=0;a<i;a++)l+=o(++e,--t,--n,++r,u);if(e*r<t*n)for(i=e<r?e:r,a=0;a<i;a++)l+=o(--e,++t,++n,--r,u);return l}(e,t,n,r)}function p(e,t){var n=u.size(e),o=n>1?"pairs":"pair";return r.createElement("p",null,"The analysis tested ",r.createElement("b",null,n)," ",o," between the"," ",r.createElement("b",null,t)," tracks in the OncoPrint.")}function d(e){var t=[];l.a.bigCombination(Object.keys(e),2).toArray().forEach(function(n){var r,o,a,s,l,u,p,d,f,h,m=n[0],y=n[1],g=(r=e[m],o=e[y],a=0,s=0,l=0,u=0,r.forEach(function(e,t){if(e===i.UNPROFILED||o[t]===i.UNPROFILED)return!0;var n=o[t];e===i.UNALTERED&&n===i.UNALTERED?a++:e===i.UNALTERED&&n===i.ALTERED?s++:e===i.ALTERED&&n===i.UNALTERED?l++:u++}),[a,s,l,u]),v=c(g[0],g[1],g[2],g[3]),b=(d=g[1],f=g[2],(p=g[0])*(h=g[3])==0&&d*f==0?1/0:Math.log2(p*h/(d*f))),S=function(e){return e>0?"Co-occurrence":"Mutual exclusivity"}(b);t.push({trackA:m,trackB:y,neitherCount:g[0],bNotACount:g[1],aNotBCount:g[2],bothCount:g[3],logOddsRatio:b,pValue:v,qValue:0,association:S})}),t=u.sortBy(t,["pValue"]);var n=Object(a.a)(u.map(t,function(e){return e.pValue}));return t.forEach(function(e,t){e.qValue=n[t]}),t}function f(e,t,n,r){return e.filter(function(e){var o=!1;return t&&(o=o||e.logOddsRatio<=0),n&&(o=o||e.logOddsRatio>0),r&&(o=o&&e.qValue<.05),o})}function h(e){return e<.001?"<0.001":e.toFixed(3)}function m(e){var t=r.createElement("span",null,h(e));return e<.05&&(t=r.createElement("b",null,t)),t}function y(e){return e<-3?"<-3":e>3?">3":e.toFixed(3)}function g(e){var t={};return u.forIn(e,function(e,n){e&&e.length>0&&e.filter(function(e){return e!=i.UNPROFILED}).length>0&&(t[n]=e)}),t}n.d(t,"a",function(){return i}),n.d(t,"h",function(){return p}),n.d(t,"e",function(){return d}),n.d(t,"f",function(){return f}),n.d(t,"c",function(){return h}),n.d(t,"d",function(){return m}),n.d(t,"b",function(){return y}),n.d(t,"g",function(){return g}),function(e){e.UNPROFILED="unprofiled",e.ALTERED="altered",e.UNALTERED="unaltered"}(i||(i={}))},function(e,t,n){e.exports=n(16)(1031)},function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return s});var r=n(102),o=n(593);function i(e){var t={};return e.forEach(function(e){e.keyword in t||(t[e.keyword]=[]),t[e.keyword].push(e)}),t}function a(e){return e.type.toLowerCase().includes("single")||e.type.toLowerCase().includes("indel")}function s(e,t){return Object(r.Y)(Object(o.b)(e),t,a)}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=":";function o(e,t){return"".concat(e).concat(r).concat(t)}function i(e,t){if("string"==typeof e){if(t)return o(e,t);throw"no sampleId given"}return o(e.studyId,e.sampleId)}},function(e,t,n){e.exports={portalWidth:"copyDownloadControls-module__portalWidth__wDcH_",framedImage:"copyDownloadControls-module__framedImage__1bvsU",downloadTabLinksGroup:"copyDownloadControls-module__downloadTabLinksGroup__-hkGB"}},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(0),o=n(17),i=n(56),a=n(3);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,p(t).apply(this,arguments))}var n,s,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r["Component"]),n=t,(s=[{key:"copyButton",value:function(){var e=r.createElement("button",{ref:this.props.copyButtonRef,className:"btn btn-sm btn-default","data-clipboard-text":"NA",id:"copyButton",onClick:this.props.handleCopy},this.props.copyLabel," ",r.createElement("i",{className:"fa fa-clipboard"}));return r.createElement(a.c,l({overlay:r.createElement("span",{className:"alert-success"},"Copied!"),visible:this.props.showCopyMessage},this.baseTooltipProps,{overlayClassName:this.props.className}),r.createElement(a.c,l({overlay:r.createElement("span",null,"Copy"),visible:!this.props.showCopyMessage&&void 0},this.baseTooltipProps,{overlayClassName:this.props.className}),e))}},{key:"downloadButton",value:function(){return r.createElement(a.c,l({overlay:r.createElement("span",null,"Download TSV")},this.baseTooltipProps,{overlayClassName:this.props.className}),r.createElement(i.Button,{className:"btn-sm",onClick:this.props.handleDownload},this.props.downloadLabel," ",r.createElement("i",{className:"fa fa-cloud-download"})))}},{key:"render",value:function(){return r.createElement("span",{className:this.props.className},r.createElement(i.ButtonGroup,{className:this.props.className},r.createElement(o.If,{condition:this.props.showCopy},this.copyButton()),r.createElement(o.If,{condition:this.props.showDownload},this.downloadButton())))}},{key:"baseTooltipProps",get:function(){return{placement:"top",mouseLeaveDelay:0,mouseEnterDelay:.5}}}])&&u(n.prototype,s),f&&u(n,f),t}();f.defaultProps={className:"",copyLabel:"",downloadLabel:"",showCopy:!0,showDownload:!0,showCopyMessage:!1}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(589);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.map=new r.a}var t,n,i;return t=e,(n=[{key:"add",value:function(e,t){var n=[];this.map.has(e)?n=this.map.get(e):this.map.set(e,n),n.push(t)}},{key:"get",value:function(e){return this.map.get(e)}},{key:"clear",value:function(){this.map.clear()}},{key:"entries",value:function(){return this.map.entries()}}])&&o(t.prototype,n),i&&o(t,i),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(570);function o(e,t){var n=t.molecularAlterationType(e.molecularProfileId);switch(n){case r.a.MUTATION_EXTENDED:case r.a.FUSION:null!==t.fusion(e)?(e.alterationType=r.a.FUSION,e.alterationSubType=""):(e.alterationType=r.a.MUTATION_EXTENDED,e.alterationSubType=t.mut_type(e));break;case r.a.COPY_NUMBER_ALTERATION:e.alterationType=r.a.COPY_NUMBER_ALTERATION,e.alterationSubType=t.cna(e);break;case r.a.MRNA_EXPRESSION:case r.a.PROTEIN_LEVEL:e.alterationType=n}return e}},function(e,t,n){e.exports=n(16)(68)},function(e,t,n){e.exports={portalWidth:"annotation-module__portalWidth__1ONSd",framedImage:"annotation-module__framedImage__3aREl","annotation-item-text":"annotation-module__annotation-item-text__2FRXN","annotation-item-error":"annotation-module__annotation-item-error__1XUY_","annotation-item":"annotation-module__annotation-item__1YzCz"}},function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__3xfuL",framedImage:"styles-module__framedImage__3MWaq",validationBubbleBase:"styles-module__validationBubbleBase__1bQNI",genesSelection:"styles-module__genesSelection__17BpH",GeneSymbolValidator:"styles-module__GeneSymbolValidator__1K2q1",validBubble:"styles-module__validBubble__2iAqd",invalidBubble:"styles-module__invalidBubble__3Hs4P",suggestionBubble:"styles-module__suggestionBubble__1TnzN",topRow:"styles-module__topRow__2F7H0",default:"styles-module__default__3ZAms",oncoprintHeatmap:"styles-module__oncoprintHeatmap__lvPrO",studyView:"styles-module__studyView__3TtjM",studyViewFocus:"styles-module__studyViewFocus__1CfEf",nowrap:"styles-module__nowrap__1GVDf",icon:"styles-module__icon__2RDD6",pendingMessage:"styles-module__pendingMessage__1gVAe",oqlNotice:"styles-module__oqlNotice__3naFJ",errorMessage:"styles-module__errorMessage__3pZ_v",noChoiceLabel:"styles-module__noChoiceLabel__2sdit",singleChoiceLabel:"styles-module__singleChoiceLabel__178JA",multiChoiceLabel:"styles-module__multiChoiceLabel__1PPmp"}},function(e,t,n){"use strict";var r=n(0),o=n(4),i=n(7),a=n(9),s=n.n(a),l=n(661),u=n.n(l),c=n(591),p=n.n(c),d=n(2),f=n(594),h=n(588);function m(e){try{return{query:e?Object(h.g)(e.trim().toUpperCase()):[],error:void 0}}catch(i){if("SyntaxError"!==i.name)return{query:[],error:{start:0,end:0,message:"Unexpected ".concat(i)}};var t,n,r,o=i.location.start.offset;return o===e.length?(t="after",n=o-1,r=o):0===o?(t="before",n=o,r=o+1):(t="at",n=o,r=o+1),{query:[],error:{start:n,end:r,message:"OQL syntax error ".concat(t," selected character; please fix and submit again.")}}}}n(728);var y=n(3),g=n(178),v=n(104),b=n.n(v),S=n(626),_=n.n(S),w=n(56);function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var k=function(e){if(0==e.genes.length){return r.createElement("div",{className:u.a.suggestionBubble,title:"Could not find gene symbol. Click to remove it from the gene list.",onClick:function(){return e.replaceGene(e.alias,"")}},r.createElement(_.a,{className:u.a.icon,name:"times-circle"}),r.createElement("span",{className:u.a.noChoiceLabel},e.alias))}if(1==e.genes.length){var t=e.genes[0].hugoGeneSymbol,n="'".concat(e.alias,"' is a synonym for '").concat(t,"'. Click here to replace it with the official symbol.");return r.createElement("div",{className:u.a.suggestionBubble,title:n,onClick:function(){return e.replaceGene(e.alias,t)}},r.createElement(_.a,{className:u.a.icon,name:"question"}),r.createElement("span",{className:u.a.singleChoiceLabel},e.alias),r.createElement("span",null,": ".concat(t)))}var o="Ambiguous gene symbol. Click on one of the alternatives to replace it.",i=e.genes.map(function(e){return{label:e.hugoGeneSymbol,value:e.hugoGeneSymbol}});return r.createElement("div",{className:u.a.suggestionBubble,title:o},r.createElement(_.a,{className:u.a.icon,name:"question"}),r.createElement("span",{className:u.a.multiChoiceLabel},e.alias),r.createElement("span",null,":",""),r.createElement(w.DropdownButton,{bsStyle:o.toLowerCase(),bsSize:"xsmall",title:"Select symbol",id:"geneReplace_".concat(e.alias)},i.map(function(t,n){return r.createElement(w.MenuItem,{onClick:function(){e.replaceGene(e.alias,t.value)},eventKey:n+1},t.label)})))},A=function(e){if(e.oql instanceof Error)return r.createElement("div",{className:u.a.GeneSymbolValidator},r.createElement("span",{className:u.a.errorMessage},"Cannot validate gene symbols because of invalid OQL.","",r.createElement("a",{className:"underline",onMouseDown:function(t){t.preventDefault(),e.highlightError()}},"Click to highlight error")));if(0===e.oql.query.length)return null;if(!e.errorMessageOnly&&e.validatingGenes)return r.createElement("div",{className:u.a.GeneSymbolValidator},r.createElement("span",{className:u.a.pendingMessage},"Validating gene symbols..."));if(e.genes instanceof Error)return r.createElement("div",{className:u.a.GeneSymbolValidator},r.createElement("span",{className:u.a.pendingMessage},"Unable to validate gene symbols."));if(e.genes.suggestions.length>0)return r.createElement("div",{className:u.a.GeneSymbolValidator},r.createElement("div",{className:u.a.invalidBubble,title:"Please edit the gene symbols."},r.createElement(_.a,{className:u.a.icon,name:"exclamation-circle"}),r.createElement("span",null,"Invalid gene symbols.")),e.genes.suggestions.map(function(t,n){return r.createElement(k,{key:n,genes:t.genes,alias:t.alias,replaceGene:e.replaceGene})}));var t,n,i,a=o.groupBy(e.genes.found,function(e){return e.hugoGeneSymbol}),l=o.reduce(a,function(e,t,n){return t.length>1&&e.push(n),e},[]);return l.length>0?r.createElement("div",{className:u.a.GeneSymbolValidator},r.createElement("div",{className:u.a.invalidBubble,title:"Please edit the gene symbols."},r.createElement(_.a,{className:u.a.icon,name:"exclamation-circle"}),r.createElement("span",null,"The portal does not currently support the following gene(s):")),l.map(function(t,n){return r.createElement(k,{key:n,genes:[],alias:t,replaceGene:e.replaceGene})})):e.errorMessageOnly?null:r.createElement("div",{className:s()(u.a.GeneSymbolValidator,(t={},n=u.a.nowrap,i=!e.wrapTheContent,n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t))},r.createElement("div",{className:u.a.validBubble,title:"You can now submit the list."},r.createElement(_.a,{className:u.a.icon,name:"check-circle"}),r.createElement("span",null,"All gene symbols are valid.")))},I=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),P(this,x(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return this.props.children?r.createElement("div",{id:"wideGeneBoxValidationStatus"},this.props.children):r.createElement("div",{id:"geneBoxValidationStatus"},r.createElement(A,O({replaceGene:this.props.replaceGene},this.props)))}}])&&C(n.prototype,o),i&&C(n,i),t}();function D(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var F=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":G(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},B=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};function V(e){return Number.isInteger(Number(e))}var z=function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=N(t).apply(this,arguments),(e=!r||"object"!==G(r)&&"function"!=typeof r?R(n):r).genes=Object(y.S)({invoke:function(){return B(R(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,i,a,s,l,u,c,p,d=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.geneIds.length){e.next=2;break}return e.abrupt("return",{found:[],suggestions:[]});case 2:return t=o.partition(o.uniq(this.geneIds),V),n=M(t,2),r=n[0],i=n[1],a=function(){return B(d,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,i,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.length){e.next=6;break}return e.next=3,g.a.fetchGenesUsingPOST({geneIdType:"ENTREZ_GENE_ID",geneIds:r});case 3:t=e.sent,e.next=7;break;case 6:t=[];case 7:return n=o.difference(r,t.map(function(e){return e.entrezGeneId+""})),i=n.map(function(e){return{alias:e,genes:[]}}),a=t.map(function(e){return{alias:e.entrezGeneId+"",genes:[e]}}),s=[].concat(D(i),D(a)),e.abrupt("return",{found:t,suggestions:s});case 12:case"end":return e.stop()}},e)}))},s=function(){return B(d,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.length){e.next=6;break}return e.next=3,g.a.fetchGenesUsingPOST({geneIdType:"HUGO_GENE_SYMBOL",geneIds:i});case 3:t=e.sent,e.next=7;break;case 6:t=[];case 7:return n=o.difference(i,t.map(function(e){return e.hugoGeneSymbol})),e.next=10,Promise.all(n.map(function(e){return a.getGeneSuggestions(e)}));case 10:return r=e.sent,e.abrupt("return",{found:t,suggestions:r});case 12:case"end":return e.stop()}},e)}))},e.next=7,Promise.all([a(),s()]);case 7:return l=e.sent,u=M(l,2),c=u[0],p=u[1],e.abrupt("return",{found:[].concat(D(c.found),D(p.found)),suggestions:[].concat(D(c.suggestions),D(p.suggestions))});case 12:case"end":return e.stop()}},e,this)}))},onResult:function(t){e.props.afterValidation&&e.props.afterValidation(0===t.suggestions.length,e.genes.result,e.oql)},default:{found:[],suggestions:[]}}),e}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(t,r["Component"]),n=t,(i=[{key:"getGeneSuggestions",value:function(e){return B(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,g.a.getAllGenesUsingGET({alias:e});case 3:return t.t1=t.sent,t.abrupt("return",{alias:t.t0,genes:t.t1});case 5:case"end":return t.stop()}},t)}))}},{key:"render",value:function(){var e=this;return this.props.skipGeneValidation&&this.props.afterValidation&&this.props.afterValidation(!0,{found:[],suggestions:[]},this.oql),r.createElement(I,{genes:this.props.skipGeneValidation?{found:[],suggestions:[]}:this.genes.isError?new Error("ERROR"):this.genes.result,highlightError:function(){e.props.highlightError&&e.props.highlightError(e.oql)},oql:this.oqlOrError,validatingGenes:!this.props.skipGeneValidation&&this.genes.isPending,errorMessageOnly:this.props.errorMessageOnly,wrapTheContent:this.props.wrap,replaceGene:this.props.replaceGene},this.props.children)}},{key:"oql",get:function(){return m(this.props.geneQuery)}},{key:"geneIds",get:function(){return this.oql.error?[]:this.oql.query.map(function(e){return e.gene})}},{key:"oqlOrError",get:function(){return this.oql.error?new Error("OQL error at character ".concat(this.oql.error.start)):this.oql}}])&&j(n.prototype,i),a&&j(n,a),t}();z.defaultProps={errorMessageOnly:!1},F([b.a],z.prototype,"getGeneSuggestions",null),F([d.computed],z.prototype,"oql",null),F([d.computed],z.prototype,"geneIds",null),F([d.computed],z.prototype,"oqlOrError",null);var q=z=F([i.observer],z),U=n(8),H=n(586),W=n.n(H);function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $(e,t){return!t||"object"!==X(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",function(){return Z});var Z,J=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":X(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.STUDY_VIEW_PAGE=1]="STUDY_VIEW_PAGE",e[e.ONCOPRINT_HEATMAP=2]="ONCOPRINT_HEATMAP"}(Z||(Z={}));var ee=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=$(this,Q(t).call(this,e))).currentTextAreaValue="",n._geneQuery="",n.geneQueryIsValid=!0,n.queryToBeValidated="",n.isFocused=!1,n.skipGenesValidation=!1,n.updateQueryToBeValidateDebounce=o.debounce(function(){n.queryToBeValidated=n.currentTextAreaValue,n.skipGenesValidation=!1,""===n.currentTextAreaValue&&(n.geneQuery="",n.props.callback&&n.props.callback(m(""),{found:[],suggestions:[]},n.geneQuery))},500),n.geneQuery=n.props.inputGeneQuery||"",n.queryToBeValidated=n.geneQuery,n.props.validateInputGeneQuery||(n.skipGenesValidation=!0),n.textAreaRef=r.createRef(),n}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(t,r["Component"]),n=t,(i=[{key:"componentDidMount",value:function(){var e=this;this.disposers=[Object(d.reaction)(function(){return e.props.inputGeneQuery},function(t){(t||"").toUpperCase()!==e.geneQuery.toUpperCase()&&(e.props.validateInputGeneQuery||(e.skipGenesValidation=!0),e.geneQuery=(t||"").trim(),e.queryToBeValidated=e.geneQuery),e.updateTextAreaRefValue()}),Object(d.reaction)(function(){return e.showFullText},function(){e.updateTextAreaRefValue()})]}},{key:"componentWillUnmount",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,o=this.disposers[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){(0,r.value)()}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}}},{key:"updateGeneQuery",value:function(e){this.geneQuery=e,this.queryToBeValidated=e,this.isFocused=!0,this.updateTextAreaRefValue()}},{key:"getTextAreaValue",value:function(){return this.showFullText?this.geneQuery:this.getFocusOutValue()}},{key:"updateTextAreaRefValue",value:function(){this.textAreaRef.current.value=this.getTextAreaValue()}},{key:"getFocusOutValue",value:function(){return function(e){var t="";if(e.length>0){t=e[0];for(var n=1;n<e.length;n++){if(t.length>13||t.length+e[n].length>13){t+=" and "+(e.length-n)+" more";break}t+=" "+e[n]}}return t}(m(this.geneQuery).query.map(function(e){return e.gene}))}},{key:"afterGeneSymbolValidation",value:function(e,t,n){this.geneQueryIsValid=e,this.props.callback&&this.props.callback(n,t,this.geneQuery)}},{key:"highlightError",value:function(e){this.textAreaRef.current.focus(),this.textAreaRef.current.setSelectionRange(e.error.start,e.error.end)}},{key:"onChange",value:function(e){this.currentTextAreaValue=e.currentTarget.value,this.geneQuery=this.currentTextAreaValue,this.updateQueryToBeValidateDebounce()}},{key:"onFocus",value:function(){this.isFocused=!0}},{key:"onBlur",value:function(){this.isFocused=!1}},{key:"replaceGene",value:function(e,t){var n=Object(f.e)(this.getTextAreaValue().toUpperCase().replace(new RegExp("\\b".concat(e.toUpperCase(),"\\b"),"g"),function(){return t.toUpperCase()}));this.updateGeneQuery(n)}},{key:"render",value:function(){return r.createElement("div",{className:u.a.genesSelection},r.createElement("div",{className:u.a.topRow},r.createElement("textarea",{ref:this.textAreaRef,onFocus:this.onFocus,onBlur:this.onBlur,className:s()(this.textAreaClasses),rows:5,cols:80,placeholder:this.promptText,title:this.promptText,defaultValue:this.getTextAreaValue(),onChange:this.onChange,"data-test":"geneSet",style:{height:this.props.textAreaHeight}}),this.props.submitButton),r.createElement("div",{className:"oqlValidationContainer"},r.createElement(q,{focus:this.props.focus,geneQuery:this.queryToBeValidated,skipGeneValidation:this.skipGenesValidation,updateGeneQuery:this.updateGeneQuery,afterValidation:this.afterGeneSymbolValidation,replaceGene:this.replaceGene,errorMessageOnly:this.props.location===Z.STUDY_VIEW_PAGE,highlightError:this.highlightError},this.props.children)),r.createElement("div",null,this.showErrorsAndMessages&&this.props.error&&r.createElement("span",{className:p.a.errorMessage,"data-test":"oqlErrorMessage"},this.props.error),this.showErrorsAndMessages&&this.props.messages&&this.props.messages.map(function(e){return r.createElement("span",{className:p.a.oqlMessage},r.createElement("i",{className:"fa fa-info-circle",style:{marginRight:5}}),e)})))}},{key:"geneQuery",get:function(){return this.queryStore?this.queryStore.geneQuery:this._geneQuery},set:function(e){this.queryStore?this.queryStore.geneQuery=e:this._geneQuery=e}},{key:"textAreaClasses",get:function(){var e=[];switch(this.props.location){case Z.STUDY_VIEW_PAGE:e.push(u.a.studyView),!this.isFocused&&this.geneQueryIsValid||e.push(u.a.studyViewFocus);break;case Z.ONCOPRINT_HEATMAP:e.push(u.a.oncoprintHeatmap);break;default:e.push(u.a.default)}return this.geneQuery||e.push(u.a.empty),e}},{key:"showFullText",get:function(){return!this.geneQueryIsValid||this.isFocused||this.props.location!==Z.STUDY_VIEW_PAGE}},{key:"promptText",get:function(){return this.props.textBoxPrompt?this.props.textBoxPrompt:"Click gene symbols below or enter here"}},{key:"showErrorsAndMessages",get:function(){return this.props.location!==Z.STUDY_VIEW_PAGE||this.isFocused}}])&&K(n.prototype,i),a&&K(n,a),t}();ee.defaultProps={validateInputGeneQuery:!0},J([d.observable],ee.prototype,"_geneQuery",void 0),J([d.computed],ee.prototype,"geneQuery",null),J([d.observable],ee.prototype,"geneQueryIsValid",void 0),J([d.observable],ee.prototype,"queryToBeValidated",void 0),J([d.observable],ee.prototype,"isFocused",void 0),J([d.observable],ee.prototype,"skipGenesValidation",void 0),J([U.default,d.action],ee.prototype,"updateGeneQuery",null),J([U.default,d.action],ee.prototype,"updateTextAreaRefValue",null),J([d.computed],ee.prototype,"textAreaClasses",null),J([d.computed],ee.prototype,"showFullText",null),J([U.default,d.action],ee.prototype,"afterGeneSymbolValidation",null),J([U.default],ee.prototype,"highlightError",null),J([d.computed],ee.prototype,"promptText",null),J([W.a],ee.prototype,"onChange",null),J([W.a],ee.prototype,"onFocus",null),J([W.a],ee.prototype,"onBlur",null),J([W.a],ee.prototype,"replaceGene",null),J([d.computed],ee.prototype,"showErrorsAndMessages",null),ee=J([i.observer],ee);t.b=ee},,function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"d",function(){return p}),n.d(t,"b",function(){return d}),n.d(t,"e",function(){return f}),n.d(t,"f",function(){return h}),n.d(t,"c",function(){return m});var r=n(592),o=n(4),i=n.n(o),a=n(672),s=n.n(a),l=n(0),u=n(604),c={MUTATION_EXTENDED:"mutations",COPY_NUMBER_ALTERATION:"copy number alterations",MRNA_EXPRESSION:"mRNA expression",PROTEIN_LEVEL:"protein expression"};function p(e,t){var n;return n=e&&t?"Annotating with OncoKB and Cancer Hotspots":e?"Annotating with OncoKB":t?"Annotating with Cancer Hotspots":"Processing data",l.createElement("span",{style:{whiteSpace:"nowrap"}},n)}function d(e,t){return t?"".concat(r.c.ComparisonGroupPrefix,"_").concat(e):e.substring(r.c.ComparisonGroupPrefix.length+1)}function f(e){return e.map(function(e){return{clinicalAttributeId:d(e.id,!0),datatype:"STRING",description:"Membership in ".concat(e.data.name),displayName:"In group: ".concat(e.data.name),comparisonGroup:e,patientAttribute:!1}})}function h(e,t,n,o){var a=i.a.groupBy(n,"molecularAlterationType"),l=i.a.keyBy(n,function(e){return e.molecularProfileId}),u=i.a.mapValues(a,function(e){return!0}),p=i.a.reduce(e,function(e,n){var r=i.a.clone(u),o=!0,a=!1,s=void 0;try{for(var c,p=n.notProfiledAllGenes[Symbol.iterator]();!(o=(c=p.next()).done);o=!0){var d=c.value;d.molecularProfileId in l&&(r[t[d.molecularProfileId].molecularAlterationType]=!0)}}catch(e){a=!0,s=e}finally{try{o||null==p.return||p.return()}finally{if(a)throw s}}i.a.forEach(n.notProfiledByGene,function(e){var n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value;u.molecularProfileId in l&&(r[t[u.molecularProfileId].molecularAlterationType]=!0)}}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}});var f=!0,h=!1,m=void 0;try{for(var y,g=n.allGenes[Symbol.iterator]();!(f=(y=g.next()).done);f=!0){var v=y.value;v.molecularProfileId in l&&(r[t[v.molecularProfileId].molecularAlterationType]=!1)}}catch(e){h=!0,m=e}finally{try{f||null==g.return||g.return()}finally{if(h)throw m}}return i.a.forEach(n.byGene,function(e){var n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value;u.molecularProfileId in l&&(r[t[u.molecularProfileId].molecularAlterationType]=!1)}}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}}),i.a.forEach(r,function(t,n){t&&(e[n]=e[n]||0,e[n]+=1)}),e},{}),d=Object.keys(p).filter(function(e){return p[e]>0}).map(function(e){var t=a[e];if(t){if(1===t.length&&o){var n=t[0];return{clinicalAttributeId:"".concat(r.c.ProfiledInPrefix,"_").concat(n.molecularProfileId),datatype:"STRING",description:"Profiled in ".concat(n.name,": ").concat(n.description),displayName:"Profiled in ".concat(n.name),molecularProfileIds:[n.molecularProfileId],patientAttribute:!1}}return{clinicalAttributeId:"".concat(r.c.ProfiledInPrefix,"_").concat(e),datatype:"STRING",description:"",displayName:"Profiled for ".concat(c[e]),molecularProfileIds:t.map(function(e){return e.molecularProfileId}),patientAttribute:!1}}return null}).filter(function(e){return!!e});return d.sort(function(e,t){return s()(e.displayName,t.displayName)}),d}function m(e){return i.a.mapValues(e,function(e){return i.a.map(e,function(e){var t="NAME"in e.genericEntityMetaProperties?e.genericEntityMetaProperties.NAME:u.a,n="DESCRIPTION"in e.genericEntityMetaProperties?e.genericEntityMetaProperties.DESCRIPTION:u.a,r=t!==e.stableId,o=n!==e.stableId&&n!==t,i="";return i=r||o?r?o?"".concat(t," (").concat(e.stableId,"): ").concat(n):"".concat(t," (").concat(e.stableId,")"):"".concat(e.stableId,": ").concat(n):e.stableId,{id:e.stableId,value:i,label:i}})})}},,function(e,t,n){},function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__3H61V",framedImage:"styles-module__framedImage__3vt8Y",absolutePanel:"styles-module__absolutePanel__3vVTX",selectedInfoLoadingIndicator:"styles-module__selectedInfoLoadingIndicator__lMgyy",selectedInfo:"styles-module__selectedInfo__1Vuvh",selectedInfoCheckbox:"styles-module__selectedInfoCheckbox__1dPUi",mainTabs:"styles-module__mainTabs__3BkVf",studyViewSurvivalPlot:"styles-module__studyViewSurvivalPlot__2J73a",studyViewSurvivalPlotTitle:"styles-module__studyViewSurvivalPlotTitle__3oyYN",studyViewSurvivalPlotBody:"styles-module__studyViewSurvivalPlotBody__38PYq",studyViewAutoMargin:"styles-module__studyViewAutoMargin__ST9aM",studyViewLoadingIndicator:"styles-module__studyViewLoadingIndicator__3qAeE",userSelections:"styles-module__userSelections__2SV9k",parentGroupLogic:"styles-module__parentGroupLogic__3_MlA",summaryClearAllBtn:"styles-module__summaryClearAllBtn__2ZLVo",filterClinicalAttrName:"styles-module__filterClinicalAttrName__1bFhQ",summary:"styles-module__summary___VCN0",description:"styles-module__description__2DLbO",actionButtons:"styles-module__actionButtons__3xgw0",studyFilterResult:"styles-module__studyFilterResult__2WKz_",titleMeta:"styles-module__titleMeta__2ZbFA",bookmarkButton:"styles-module__bookmarkButton__2q-0U"}},function(e,t,n){"use strict";n.d(t,"c",function(){return a}),n.d(t,"d",function(){return s}),n.d(t,"b",function(){return l}),n.d(t,"a",function(){return u});var r=n(4),o=n.n(r),i=n(577);function a(e,t){return e.filter(function(e){return t.isComparisonGroupSelected(e.uid)})}function s(e,t){var n=o.a.groupBy(e,function(e){return e.studyId}),r=t?o.a.groupBy(t,function(e){return e.studyId}):{};return o.a.uniq(Object.keys(n).concat(Object.keys(r))).map(function(e){var i={id:e,samples:o.a.uniq((n[e]||[]).map(function(e){return e.sampleId}))};return t&&(i.patients=o.a.uniq((r[e]||[]).map(function(e){return e.patientId}))),i})}function l(e,t,n,r){return{name:e,description:"",studies:s(t),origin:n,color:r}}function u(e,t){e=Object.assign({},e);var n=Object(i.w)([e]),r=o.a.uniqWith(n.concat(t),function(e,t){return e.studyId===t.studyId&&e.sampleId===t.sampleId});return e.studies=s(r),e}},function(e,t,n){"use strict";function r(e,t){var n=null;return function(r){null!==n&&(window.clearTimeout(n),n=null);var o=r.currentTarget.value;n=window.setTimeout(function(){e(o)},t||400)}}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"b",function(){return y}),n.d(t,"a",function(){return g}),n.d(t,"d",function(){return v}),n.d(t,"c",function(){return b});var r=n(4),o=n(2),i=n(8),a=n(102),s=n(595),l=n(573);function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e,t,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var m=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":h(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},y="_cBioPortalProteinImpactTypeFilter_",g="_cBioPortalMutationStatusFilter_";function v(e){return e.find(function(e){return e.id===y})}var b=function(e){function t(e,n){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=c(this,d(t).call(this,e))).dataFilters=[],r.selectionFilters=[],r.highlightFilters=[],r.dataFilters=o,r.selectionFilters=i,r.highlightFilters=a,r.groupFilters=s,r.dataSelector=function(e){return r.dataSelectFilter(e)},r.dataHighlighter=function(e){return r.dataHighlightFilter(e)},r.customFilterApplier=n,r.setFilter(),r}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,s["b"]),n=t,(o=[{key:"clearDataFilters",value:function(){this.dataFilters=[]}},{key:"clearHighlightFilters",value:function(){this.highlightFilters=[]}},{key:"clearSelectionFilters",value:function(){this.selectionFilters=[]}},{key:"setDataFilters",value:function(e){this.dataFilters=e}},{key:"setHighlightFilters",value:function(e){this.highlightFilters=e}},{key:"setSelectionFilters",value:function(e){this.selectionFilters=e}},{key:"setGroupFilters",value:function(e){this.groupFilters=e}},{key:"isPositionSelected",value:function(e){return!!this.selectedPositions[e+""]}},{key:"isPositionHighlighted",value:function(e){return!!this.highlightedPositions[e+""]}},{key:"setFilter",value:function(e){var n=this;p(d(t.prototype),"setFilter",this).call(this,function(t,r,o,i){return(!e||e(t,r,o,i))&&(0===n.dataFilters.length||n.dataMainFilter(t))}),this.lazyMobXTableFilter=e}},{key:"resetFilter",value:function(){var e=this;p(d(t.prototype),"resetFilter",this).call(this),this.dataFilter=function(t){return 0===e.dataFilters.length||e.dataMainFilter(t)},this.lazyMobXTableFilter=void 0}},{key:"resetFilters",value:function(){this.resetFilter(),this.resetDataFilters()}},{key:"resetDataFilters",value:function(){this.clearDataFilters(),this.clearHighlightFilters(),this.clearSelectionFilters()}},{key:"dataMainFilter",value:function(e){return Object(a.z)(e,this.dataFilters,this.applyFilter)}},{key:"dataSelectFilter",value:function(e){return Object(a.z)(e,this.selectionFilters,this.applyFilter)}},{key:"dataHighlightFilter",value:function(e){return Object(a.z)(e,this.highlightFilters,this.applyFilter)}},{key:"applyFilter",value:function(e,t){var n=r.flatten([t])[0];return this.customFilterApplier?this.customFilterApplier.applyFilter(e,n):e.type!==a.h.POSITION||e.values.includes(n.proteinPosStart)}},{key:"applyLazyMobXTableFilter",value:function(e){return!this.filterString||!this.lazyMobXTableFilter||this.lazyMobXTableFilter([r.flatten([e])[0]],this.filterString.toLowerCase(),this.filterString.toUpperCase())}},{key:"sortedFilteredGroupedData",get:function(){return Object(a.T)(this.groupFilters,this.sortedFilteredData,this.applyFilter)}},{key:"selectedPositions",get:function(){return r.keyBy(Object(a.L)(this.selectionFilters).map(function(e){return{position:e}}),"position")}},{key:"highlightedPositions",get:function(){return r.keyBy(Object(a.L)(this.highlightFilters).map(function(e){return{position:e}}),"position")}},{key:"tableDataGroupedByPatients",get:function(){return Object(l.k)(r.flatten(this.tableData))}},{key:"duplicateMutationCountInMultipleSamples",get:function(){return Object(l.c)(this.tableDataGroupedByPatients)}}])&&u(n.prototype,o),i&&u(n,i),t}();m([o.observable],b.prototype,"dataFilters",void 0),m([o.observable],b.prototype,"selectionFilters",void 0),m([o.observable],b.prototype,"highlightFilters",void 0),m([o.observable],b.prototype,"groupFilters",void 0),m([o.computed],b.prototype,"sortedFilteredGroupedData",null),m([o.computed],b.prototype,"selectedPositions",null),m([o.computed],b.prototype,"highlightedPositions",null),m([o.action],b.prototype,"clearDataFilters",null),m([o.action],b.prototype,"clearHighlightFilters",null),m([o.action],b.prototype,"clearSelectionFilters",null),m([o.action],b.prototype,"setDataFilters",null),m([o.action],b.prototype,"setHighlightFilters",null),m([o.action],b.prototype,"setSelectionFilters",null),m([o.action],b.prototype,"setGroupFilters",null),m([o.action],b.prototype,"setFilter",null),m([o.action],b.prototype,"resetFilter",null),m([o.action],b.prototype,"resetFilters",null),m([o.action],b.prototype,"resetDataFilters",null),m([o.computed],b.prototype,"tableDataGroupedByPatients",null),m([o.computed],b.prototype,"duplicateMutationCountInMultipleSamples",null),m([i.default],b.prototype,"dataMainFilter",null),m([i.default],b.prototype,"dataSelectFilter",null),m([i.default],b.prototype,"dataHighlightFilter",null),m([i.default],b.prototype,"applyFilter",null),m([i.default],b.prototype,"applyLazyMobXTableFilter",null)},function(e,t,n){"use strict";function r(e){var t={},n=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value;t[o(l)]={entrezGeneId:l.entrezGeneId,proteinPosStart:l.proteinPosStart,proteinPosEnd:l.proteinPosEnd}}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return t}function o(e){return"".concat(e.entrezGeneId,"_").concat(e.proteinPosStart,"_").concat(e.proteinPosEnd)}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o})},,function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgICB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgdmlld0JveD0iMCAwIDE5NC4wMDAwMDAgMTk0LjAwMDAwMCIKICAgICBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWlkWU1pZCBtZWV0Ij4KIDxtZXRhZGF0YT4KICBDcmVhdGVkIGJ5IHBvdHJhY2UgMS4xMCwgd3JpdHRlbiBieSBQZXRlciBTZWxpbmdlciAyMDAxLTIwMTEKIDwvbWV0YWRhdGE+CiA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjAwMDAwMCwxOTQuMDAwMDAwKSBzY2FsZSgwLjA1MDAwMCwtMC4wNTAwMDApIgogICAgZmlsbD0iIzM2NmJjYyIgc3Ryb2tlPSJub25lIj4KICA8cGF0aCBkPSJNMTc0NiAzODU4IGMtMTYwNSAtMTQ5IC0yMzEyIC0yMTM1IC0xMTY4IC0zMjgwIDEyMTIgLTEyMTIgMzI4NQotMzUzIDMyODUgMTM2MiAwIDExNDkgLTk2NyAyMDI1IC0yMTE3IDE5MTh6IG00OTAgLTQ4OSBjOTIyIC0xODcgMTQyNyAtMTIxMQoxMDE0IC0yMDU5IC01MzggLTExMDUgLTIwODIgLTExMDUgLTI2MjAgMCAtNTI2IDEwODAgNDI0IDIyOTggMTYwNiAyMDU5eiIvPgogIDxwYXRoIGQ9Ik0xNjcwIDMxMTEgYy0xODEgLTU0IC0xOTkgLTYwIC0zMjUgLTEyOSAtNjc2IC0zNjYgLTgwNSAtMTMzNiAtMjUyCi0xODg5IDU1MiAtNTUzIDE1MjQgLTQyNCAxODg5IDI1MiAzMTggNTkwIDExNiAxMzMzIC00NDcgMTYzNyAtMjY0IDE0MiAtNjMxCjE5NyAtODY1IDEyOXogbTU0MyAtNDk0IGMxNjIgLTYwIDM0MyAtMjQxIDQwNyAtNDA3IDI4NSAtNzM1IC02MzUgLTEzMzkKLTExOTIgLTc4MiAtNTYxIDU2MSAzOCAxNDY4IDc4NSAxMTg5eiIvPgogIDxwYXRoIGQ9Ik0xODIwIDI0MDIgYy01MzIgLTE3NCAtNDM1IC05MzEgMTIwIC05MzEgNDk5IDAgNjU3IDY2NCAyMTIgODkzIC04Ngo0NCAtMjU1IDY0IC0zMzIgMzh6Ii8+CiA8L2c+Cjwvc3ZnPgo="},function(e,t,n){e.exports=n(16)(483)},function(e,t,n){e.exports=n(16)(39)},function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__2znIn",framedImage:"styles-module__framedImage__O2nI5",comparisonGroupManager:"styles-module__comparisonGroupManager__1QgCD",groupCheckboxes:"styles-module__groupCheckboxes__3LVqM",markedForDeletion:"styles-module__markedForDeletion__pyY8L",groupRow:"styles-module__groupRow__3thKt",groupItem:"styles-module__groupItem__20g60",groupButtons:"styles-module__groupButtons__YPSq0",buttonUnselected:"styles-module__buttonUnselected__bzlCr",buttonExcludedFromAnalysis:"styles-module__buttonExcludedFromAnalysis__3YbrM",groupLineItemActionButtons:"styles-module__groupLineItemActionButtons__17aPl",headerControls:"styles-module__headerControls__2C_RI",survivalPlotHeaderContainer:"styles-module__survivalPlotHeaderContainer__3I3YW",survivalPlotHeader:"styles-module__survivalPlotHeader__qqK6C",survivalTypeOptions:"styles-module__survivalTypeOptions__1iLz-"}},,function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"b",function(){return i}),n.d(t,"d",function(){return a});var r="*",o="+",i="-",a=" "},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(571),o=n(14),i=n.n(o);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};function p(e){return c(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,r,o,a,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise(function(t,n){i.a.post("https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esummary.fcgi?db=pubmed&retmode=json").type("form").send({id:e.join(",")}).end(function(e,r){if(!e&&r.ok){var o=JSON.parse(r.text).result,i=o.uids,a={},s=!0,l=!1,u=void 0;try{for(var c,p=i[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){var d=c.value;a[d]=o[d]}}catch(e){l=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw u}}t(a)}else n(e)})});case 2:for(n=t.sent,r=[],o=0,a=Object.keys(n);o<a.length;o++)s=a[o],r.push({data:[n[s]],meta:s});return t.abrupt("return",r);case 6:case"end":return t.stop()}},t)}))}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,l(t).call(this,function(e){return e+""},function(e,t){return t},p))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["a"]),t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(183),o=n(572),i=n(573),a=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.a;return a(this,void 0,void 0,regeneratorRuntime.mark(function r(){var a,s;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(0!==(a=l(Object(o.d)(e,t))).length){r.next=3;break}return r.abrupt("return",[]);case 3:return s=Object(i.q)(a),r.next=6,n.fetchHotspotAnnotationByGenomicLocationPOST({genomicLocations:s});case 6:return r.abrupt("return",r.sent);case 7:case"end":return r.stop()}},r)}))}function l(e){var t=n(715);return e.filter(function(e){return!e.gene.hugoGeneSymbol||t.includes(e.gene.hugoGeneSymbol)})}},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(0),o=n(4),i=n(56);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=u(t).call(this,e))||"object"!==a(o)&&"function"!=typeof o?c(r):o).handleSelect=n.handleSelect.bind(c(n)),n}var n,d,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,r["Component"]),n=t,(d=[{key:"render",value:function(){var e=this;return r.createElement(i.Dropdown,{className:this.props.className,id:"dropdown-custom-1"},r.createElement(i.Dropdown.Toggle,s({rootCloseEvent:"click"},{className:"btn-sm"}),this.props.buttonText),r.createElement(i.Dropdown.Menu,s({bsRole:"menu"},{style:{paddingLeft:10,overflow:"auto",maxHeight:300,whiteSpace:"nowrap"}}),r.createElement("ul",{className:"list-unstyled"},this.props.columnVisibility&&o.map(this.props.columnVisibility,function(t){return t.togglable?r.createElement("li",{key:t.id},r.createElement(i.Checkbox,{"data-id":t.id,onChange:e.handleSelect,checked:t.visible,inline:!0},t.name)):null}))))}},{key:"handleSelect",value:function(e){var t=e.currentTarget.getAttribute("data-id");this.props.onColumnToggled&&t&&this.props.onColumnToggled(t,this.props.columnVisibility)}}])&&l(n.prototype,d),f&&l(n,f),t}();d.defaultProps={className:"",buttonText:"Columns"}},,function(e,t,n){"use strict";n.d(t,"a",function(){return I});var r=n(0),o=n(4),i=n(720),a=n.n(i),s=n(7),l=n(2),u=n(9),c=n.n(u),p=n(3),d=n(127),f=n(17),h=n(15),m=n(574),y=n(8),g=n(65);function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}function _(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var x=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":P(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},T=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},k=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},A=n(613),I=function(e){function t(){var e;return v(this,t),(e=_(this,E(t).apply(this,arguments))).showDescription=!1,e}return O(t,r["Component"]),S(t,[{key:"render",value:function(){var e=this;return r.createElement("div",{className:a.a.studySummary},r.createElement("div",{className:"panel panel-default"},r.createElement("div",{className:"panel-heading"},r.createElement("span",{className:a.a.studyName},r.createElement("i",{className:"fa fa-".concat(this.showDescription?"minus":"plus","-circle"),onClick:function(){return e.showDescription=!e.showDescription}}),this.props.name),r.createElement("a",{target:"_blank",href:Object(h.B)(this.props.studyId)},r.createElement("i",{className:"fa fa-external-link","aria-hidden":"true"}))),r.createElement("div",{className:a.a.studyDescription,style:{display:this.showDescription?"block":"none"}},r.createElement("span",{dangerouslySetInnerHTML:{__html:"".concat(this.props.description.replace(/\r?\n/g,"<br/>"))}}))))}}]),t}();x([l.observable],I.prototype,"showDescription",void 0),I=x([s.observer],I);var D=function(e){function t(e){var n;return v(this,t),(n=_(this,E(t).call(this,e))).saving=!1,n.sharing=!1,n.copied=!1,n.virtualStudy=Object(p.S)({invoke:function(){return T(w(n),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.saving&&!this.sharing){e.next=8;break}return t=o.groupBy(this.props.selectedSamples,function(e){return e.studyId}),n=o.reduce(t,function(e,t,n){return e.push({id:n,samples:t.map(function(e){return e.sampleId})}),e},[]),r=this.props.filter,r.sampleIdentifiersSet,i=k(r,["sampleIdentifiersSet"]),a={name:this.name||this.namePlaceHolder,description:this.description,studyViewFilter:i,origin:this.props.studyWithSamples.map(function(e){return e.studyId}),studies:n},e.next=7,d.a.saveVirtualStudy(a,this.saving);case 7:return e.abrupt("return",e.sent);case 8:return e.abrupt("return",void 0);case 9:case"end":return e.stop()}},e,this)}))}},void 0),n.name=e.name||"",n.description=e.description||Object(m.hb)(n.props.description,n.props.studyWithSamples,n.props.filter,n.attributeNamesSet,n.props.molecularProfileNameSet,n.props.caseListNameSet,n.props.user),n}return O(t,r["Component"]),S(t,[{key:"copyLinkRef",value:function(e){var t=this;e&&new A(e,{text:function(){return t.virtualStudyUrl}})}},{key:"onCopyClick",value:function(){this.copied=!0}},{key:"onTooltipVisibleChange",value:function(e){this.copied=!e}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:a.a.virtualStudy},r.createElement(f.If,{condition:this.virtualStudy.isError},r.createElement(f.Then,null,r.createElement("div",{style:{textAlign:"center"}},r.createElement("i",{className:"fa fa-exclamation-triangle","aria-hidden":"true",style:{color:"orange"}}),r.createElement("span",{style:{marginLeft:"5px"}},"Failed to ".concat(this.saving?"save":"share"," virtual study, please try again later.")))),r.createElement(f.Else,null,r.createElement(f.If,{condition:this.virtualStudy.isPending||o.isUndefined(this.virtualStudy.result)},r.createElement(f.Then,null,r.createElement("div",null,r.createElement("div",{className:c()(a.a.virtualStudyForm,this.virtualStudy.isPending?a.a.disabled:void 0)},r.createElement("div",{className:"input-group"},r.createElement("input",{type:"text",className:"form-control",value:this.name,placeholder:this.namePlaceHolder||"Virtual study name",onInput:function(t){return e.name=t.currentTarget.value}}),r.createElement("div",{className:"input-group-btn"},this.showSaveButton&&r.createElement("button",{className:c()("btn btn-default",a.a.saveButton),"data-event":Object(g.e)({category:"studyPage",action:"saveVirtualStudy"}),type:"button",disabled:this.buttonsDisabled,onClick:function(t){e.saving=!0}},this.saving?r.createElement("i",{className:"fa fa-spinner fa-spin","aria-hidden":"true"}):"Save"),r.createElement("button",{className:c()("btn btn-default",a.a.saveButton),type:"button",disabled:this.buttonsDisabled,"data-event":Object(g.e)({category:"studyPage",action:"shareVirtualStudy"}),onClick:function(t){e.sharing=!0}},this.sharing?r.createElement("i",{className:"fa fa-spinner fa-spin","aria-hidden":"true"}):"Share"))),r.createElement("textarea",{className:"form-control",rows:10,placeholder:"Virtual study description (Optional)",value:this.description,onChange:function(t){return e.description=t.currentTarget.value}})),r.createElement("span",{style:{display:"block",fontWeight:"bold"}},"This virtual study was derived from:"),r.createElement("div",{className:a.a.studiesSummaryInfo},this.props.studyWithSamples.map(function(e){return r.createElement(I,e)})))),r.createElement(f.Else,null,r.createElement("div",{className:c()(a.a.result)},r.createElement("div",{className:a.a.name},r.createElement("a",{target:"_blank",href:"".concat(this.virtualStudyUrl),style:{width:"220px"}},this.virtualStudyUrl)),r.createElement("div",{className:c()("btn-group btn-group-xs",a.a.controls)},r.createElement(p.c,{overlay:r.createElement(f.If,{condition:this.copied},r.createElement(f.Then,null,r.createElement("span",{className:"alert-success"},"Copied!")),r.createElement(f.Else,null,r.createElement("span",null,"Copy"))),placement:"top",onVisibleChange:this.onTooltipVisibleChange},r.createElement("span",{className:"btn btn-default",ref:this.copyLinkRef,onClick:this.onCopyClick},"Copy")),r.createElement("span",{className:"btn btn-default",onClick:function(t){return window.open(e.virtualStudyUrl,"_blank")}},"View"),this.saving&&r.createElement("span",{className:"btn btn-default",onClick:function(t){e.virtualStudy.result&&window.open(Object(h.b)("results",{cancer_study_id:e.virtualStudy.result.id}),"_blank")}},"Query"))))))))}},{key:"namePlaceHolder",get:function(){return"Selected sample".concat(this.props.selectedSamples.length>1?"s":""," (").concat(Object(m.G)(),")")}},{key:"buttonsDisabled",get:function(){return o.isEmpty(this.namePlaceHolder)&&o.isEmpty(this.name)}},{key:"virtualStudyUrl",get:function(){return Object(h.b)({pathname:"study",query:{id:this.virtualStudy.result?this.virtualStudy.result.id:""}})}},{key:"showSaveButton",get:function(){return!(o.isUndefined(this.props.user)||o.isEmpty(this.props.user)||o.isEqual(this.props.user.toLowerCase(),"anonymoususer"))}},{key:"attributeNamesSet",get:function(){return o.reduce(this.props.attributesMetaSet,function(e,t,n){return e[n]=t.displayName,e},{})}}]),t}();x([l.observable],D.prototype,"name",void 0),x([l.observable],D.prototype,"description",void 0),x([l.observable],D.prototype,"saving",void 0),x([l.observable],D.prototype,"sharing",void 0),x([l.observable],D.prototype,"copied",void 0),x([l.computed],D.prototype,"namePlaceHolder",null),x([l.computed],D.prototype,"buttonsDisabled",null),x([l.computed],D.prototype,"virtualStudyUrl",null),x([y.default],D.prototype,"copyLinkRef",null),x([y.default,l.action],D.prototype,"onCopyClick",null),x([y.default,l.action],D.prototype,"onTooltipVisibleChange",null),x([l.computed],D.prototype,"showSaveButton",null),x([l.computed],D.prototype,"attributeNamesSet",null),D=x([s.observer],D),t.b=D},function(e,t,n){"use strict";n.d(t,"a",function(){return _});var r=n(0),o=n(4),i=n(575),a=n(7),s=n(2),l=n(56),u=n(580),c=n(582),p=n(599),d=n.n(p),f=n(641),h=n(8),m=n(578);function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var _,w=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":S(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};!function(e){e.GENE="GENE",e.CYTOBAND="CYTOBAND",e.ALTERATION="ALTERATION",e.P_VALUE="P_VALUE",e.Q_VALUE="Q_VALUE",e.LOG_RATIO="Log Ratio",e.TENDENCY="Tendency",e.ENRICHED="Enriched in",e.MOST_ENRICHED="Most enriched in"}(_||(_={}));var E={2:"Amp","-2":"DeepDel"},O=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),g(this,v(t).apply(this,arguments))}var n,a,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,r["Component"]),n=t,(a=[{key:"checkboxChange",value:function(e){var t=o.find(this.props.data,{hugoGeneSymbol:e});t.checked=!t.checked,this.props.onCheckGene(e)}},{key:"onRowClick",value:function(e){this.props.onGeneNameClick(e.hugoGeneSymbol),this.props.dataStore.setHighlighted(e)}},{key:"render",value:function(){var e=this,t=o.sortBy(this.props.visibleOrderedColumnNames.map(function(t){return e.columns[t]}),function(e){return e.order});return r.createElement(i.b,{initialItemsPerPage:20,paginationProps:{itemsPerPageOptions:[20]},columns:t,data:this.props.data,initialSortColumn:this.props.initialSortColumn,onRowClick:this.props.onGeneNameClick?this.onRowClick:void 0,dataStore:this.props.dataStore})}},{key:"columns",get:function(){var e=this,t=this.props.customColumns||{};return t[_.GENE]={name:"Gene",render:function(t){return r.createElement("div",{style:{display:"flex"}},e.props.onCheckGene&&e.props.checkedGenes&&r.createElement(l.Checkbox,{checked:e.props.checkedGenes.includes(t.hugoGeneSymbol),disabled:t.disabled,key:t.hugoGeneSymbol,className:d.a.Checkbox,onChange:function(){e.checkboxChange(t.hugoGeneSymbol)},onClick:function(e){e.stopPropagation()},title:t.disabled?"This is one of the query genes":""}),r.createElement("span",{className:d.a.GeneName},r.createElement("b",null,t.hugoGeneSymbol)))},tooltip:r.createElement("span",null,"Gene"),filter:function(e,t,n){return e.hugoGeneSymbol.toUpperCase().includes(n)},sortBy:function(e){return e.hugoGeneSymbol},download:function(e){return e.hugoGeneSymbol}},t[_.CYTOBAND]={name:"Cytoband",render:function(e){return r.createElement("span",null,e.cytoband)},tooltip:r.createElement("span",null,"Cytoband"),filter:f.a,sortBy:function(e){return e.cytoband},download:function(e){return e.cytoband}},t[_.ALTERATION]={name:"Alteration",render:function(e){return r.createElement("span",{style:{color:2===e.value?m.a:m.d}},E[e.value])},tooltip:r.createElement("span",null,"Copy number alteration"),filter:function(e,t,n){return E[e.value].toUpperCase().includes(n)},sortBy:function(e){return E[e.value]},download:function(e){return E[e.value]}},t[_.P_VALUE]={name:"p-Value",render:function(e){return r.createElement("span",{style:{whiteSpace:"nowrap",fontWeight:e.qValue<.05?"bold":"normal"}},void 0!==e.pValue?Object(u.e)(e.pValue,3,.01,-10):"-")},tooltip:this.props.data.length>0?r.createElement("span",null,"Derived from"," ",o.values(this.props.data[0].groupsSet).length>2?"Chi-squared test":"one-sided Fisher Exact test"):void 0,sortBy:function(e){return Number(e.pValue)},download:function(e){return void 0!==e.pValue?Object(c.b)(e.pValue,3,.01):"-"}},t[_.Q_VALUE]={name:"q-Value",render:function(e){return r.createElement("span",{style:{whiteSpace:"nowrap",fontWeight:e.qValue<.05?"bold":"normal"}},void 0!==e.qValue?Object(u.e)(e.qValue,3,.01,-10):"-")},tooltip:r.createElement("span",null,"Derived from Benjamini-Hochberg procedure"),sortBy:function(e){return Number(e.qValue)},download:function(e){return void 0!==e.qValue?Object(c.b)(e.qValue,3,.01):"-"}},t}}])&&y(n.prototype,a),s&&y(n,s),t}();O.defaultProps={columns:[_.GENE,_.CYTOBAND,_.P_VALUE,_.Q_VALUE],initialSortColumn:"q-Value"},w([h.default],O.prototype,"onRowClick",null),w([s.computed],O.prototype,"columns",null),O=w([a.observer],O),t.b=O},function(e,t,n){"use strict";n.d(t,"a",function(){return S});var r=n(0),o=n(4),i=n(575),a=n(7),s=n(2),l=n(56),u=n(580),c=n(582),p=n(599),d=n.n(p),f=n(641),h=n(8);function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var S,_=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};!function(e){e.GENE="GENE",e.CYTOBAND="CYTOBAND",e.LOG_RATIO="Log Ratio",e.P_VALUE="P_VALUE",e.Q_VALUE="Q_VALUE",e.TENDENCY="Tendency",e.EXPRESSED="Higher expression in",e.MEAN_SUFFIX=" mean",e.STANDARD_DEVIATION_SUFFIX=" standard deviation"}(S||(S={}));var w=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),y(this,g(t).apply(this,arguments))}var n,a,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,r["Component"]),n=t,(a=[{key:"checkboxChange",value:function(e){var t=o.find(this.props.data,{hugoGeneSymbol:e});t.checked=!t.checked,this.props.onCheckGene(e)}},{key:"onRowClick",value:function(e){this.props.onGeneNameClick(e.hugoGeneSymbol,e.entrezGeneId),this.props.dataStore.setHighlighted(e)}},{key:"render",value:function(){var e=this,t=o.sortBy(this.props.visibleOrderedColumnNames.map(function(t){return e.columns[t]}),function(e){return e.order});return r.createElement(i.b,{initialItemsPerPage:20,paginationProps:{itemsPerPageOptions:[20]},columns:t,data:this.props.data,initialSortColumn:this.props.initialSortColumn,onRowClick:this.props.onGeneNameClick?this.onRowClick:void 0,dataStore:this.props.dataStore})}},{key:"columns",get:function(){var e=this,t=this.props.customColumns||{};return t[S.GENE]={name:"Gene",render:function(t){return r.createElement("div",{style:{display:"flex"}},e.props.onCheckGene&&e.props.checkedGenes&&r.createElement(l.Checkbox,{checked:e.props.checkedGenes.includes(t.hugoGeneSymbol),disabled:t.disabled,key:t.hugoGeneSymbol,className:d.a.Checkbox,onChange:function(){e.checkboxChange(t.hugoGeneSymbol)},onClick:function(e){e.stopPropagation()},title:t.disabled?"This is one of the query genes":""}),r.createElement("span",{className:d.a.GeneName},r.createElement("b",null,t.hugoGeneSymbol)))},tooltip:r.createElement("span",null,"Gene"),filter:function(e,t,n){return e.hugoGeneSymbol.toUpperCase().includes(n)},sortBy:function(e){return e.hugoGeneSymbol},download:function(e){return e.hugoGeneSymbol}},t[S.CYTOBAND]={name:"Cytoband",render:function(e){return r.createElement("span",null,e.cytoband)},tooltip:r.createElement("span",null,"Cytoband"),filter:f.a,sortBy:function(e){return e.cytoband},download:function(e){return e.cytoband}},t[S.P_VALUE]={name:"p-Value",render:function(e){return r.createElement("span",{style:{whiteSpace:"nowrap"}},Object(c.b)(e.pValue,3,.01))},tooltip:r.createElement("span",null,"Derived from Student's t-test"),sortBy:function(e){return e.pValue},download:function(e){return Object(c.b)(e.pValue,3,.01)}},t[S.Q_VALUE]={name:"q-Value",render:function(e){return r.createElement("span",{style:{whiteSpace:"nowrap"}},Object(u.b)(e.qValue))},tooltip:r.createElement("span",null,"Derived from Benjamini-Hochberg procedure"),sortBy:function(e){return e.qValue},download:function(e){return Object(c.b)(e.qValue,3,.01)}},t}}])&&m(n.prototype,a),s&&m(n,s),t}();w.defaultProps={columns:[S.GENE,S.CYTOBAND,S.P_VALUE,S.Q_VALUE],initialSortColumn:"q-Value",mutexTendency:!0},_([h.default],w.prototype,"onRowClick",null),_([s.computed],w.prototype,"columns",null),w=_([a.observer],w),t.b=w},function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return s});var r=n(0),o=n(3);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e){return e<.01?e.toFixed(4):e.toFixed(2)}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,s;return t=e,s=[{key:"mainContent",value:function(e,t,n){var i=r.createElement("span",null,r.createElement("b",null,t)," variant reads out of"," ",r.createElement("b",null,t+n)," total");return r.createElement(o.c,{placement:"left",overlay:i,arrowContent:r.createElement("div",{className:"rc-tooltip-arrow-inner"}),destroyTooltipOnHide:!0},r.createElement("span",null,a(e)))}},{key:"renderFunction",value:function(t){var n=e.getSortValue(t);if(n){var i=t[0].tumorAltCount,a=t[0].tumorRefCount;return e.mainContent(n,i,a)}return r.createElement(o.o,{status:o.n.NA})}},{key:"getTextValue",value:function(t){var n=e.getSortValue(t);return n?a(n):""}},{key:"getSortValue",value:function(e){var t=e[0];if(!t)return null;var n=t.tumorAltCount,r=t.tumorRefCount;return n<0||r<0?null:n/(n+r)}},{key:"isVisible",value:function(e){if(e){var t=!0,n=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;if(this.getSortValue(a))return!0}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}return!1}}],(n=null)&&i(t.prototype,n),s&&i(t,s),e}()},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFsAAABJCAIAAADdSs1eAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAdMSURBVHhe7VpdTFdlGA/jS5AARUTDkC/RIlfQ5mbkFisuaH2MNusit6Zrulbroq1uWhdetNVNX5vTNb2xC7rQlW2skcMiZrilFTKQDwEVFJAiFRAFpR97Dw8P53/+5z3nPe/5/4/bOTsXcM778by/9/k9v+d9zj9hbm7ugfBiCCwL0TAhECJidokQkRARWZgIfcSMUEIctab90uS+oxfJoj3PrX2qOCMzLTHaLp7pu3ni3PiZvgnRYOf2NS9WrrJsPHBt+oNv++jVhy+vryzKkDmH8T6ePsLhgDkHT1xt7rweze6xGzOf/nCZ4ECzI80j16dmLdu39tzgz4GjQzjQLJ6IRFqJRU7dvmtpfdfVqcjnM7MWyRRGOHZ6jDcGjvAah6AEApHnt2STuX0j1qZ/2TAk2tRtzbFfW+eQgV1l0QpqeWH41v2ESF5WMoKCsPj3pQ4vHtIOY5Hl+en2azvbbwSaqk2ZBB8o6RARr5F19L/pr453tg84Iur3H1dzs3Z83iH+BRyPP5JOsfCbPRtN8bX+1Kggwnu1D2cuT6QAtH93ac5DSXxMRJa3DnaLJ1+8WTwxffej+gHx72dvFG1YnSrFxStrDjR0OYTD3hRua+9SD+dxoWxtmv041BfetC47JX9lilvieEJkfOKOFjiE0VBf8YdJGiguINyYPCISHU4ZvE1LeZATJ1rY5uN4QqSlfeTO7D0MV74hG4yQ3vbbW5y3XDSANFwZv02NaZEVhYuR0nIo9Pq5zeBvYa5BEN5r8N/FYaMZ4wmRprZhMW71ljwpP6UNOHH6Rw3F4YssWYAs2lDUS1BGNOPEIXBtjFFHpH/4Jm4MnZy4bOum1dIFO2lAxCGt7Rw0pBTOb5POisFbzhsJHlSGpuPEQXiWEkcdEXIQwJGeGjX1dgIEtSHi4IlQXFJNJ5ShjBZ6hByX7vWrFuOrlDiKiCB8IIiIlTyrgzJiKBCH0qpzlya7WZ7Knd8SZaIM3kKe3z7UQzd5HF5JiaOIyJ+9/0BoMEH2iuSKEuvjlivvoMbk8Mjof+0wWICEBc5vPyBRxr4ZiBPtNCQ6KiLS0jEq+lc/YUim2voje5FG4BUJB/I3+/FBMaIMIg4QNN38oGDKd0wjqyAyOT17+vy1BcpoRgQawc8jxCZ7RPix5fVtuagSmO4XKlbSCPbEUUHkt4U0pCw/Mz9HkkQq+A5XCnQnAbIZigIwnY9MjTnQcD0b4qggcnIhDdEYU/kCOHHwfHO+BHR+0i9bZ6R5kfBxoG2I4xqRwbGprsH5gIc05Jly48Cq4AjoQuxIS15iBvaTaM9zLTFLclICTZeUOP/3xC2jpILGNpLEz0RXxudlwfJyffY90nThaMt8KRBwvF/3mBoWQe7l2kea/jIKDVWP5gZ5Ycq2uUPkLEtDntSahigvQHtHd4hQGlJVvgZxRLs1QRjQxap45q7lsBuE9Ufa4AIRqoYU5mXgDuZ6vFvlAhG91RDvpvs0glNEUGEWBUSEDwQRn6wJwrBOEWn62xBdSAzOu0Ew3ScbXCMSwJgK/31lXxPuHZ/8ImoUXi5HiIAvmBXTwDsCmIbkZqWi9A3zuBoqg+IIEV5ADGYaQgk0ZUw+IgLgWTVEQ81d2Vabjjhkia3CKRRnUS9TyH0EcKBEhDlQCkFBxMtk/vVF6Zu+B5xsc/qJ19IeOSKsGqK5XKYXICrW0FlUbXwJIgjdON2JobWXVNUsjtYLBXCRFnCbFaaQIEJ403wKc8SsC+0Z+bXC1BJEeOgW0eS+uEgKFKyVIELpKbjzzv5WLzMpGOe8CyQG5oniHq4sD1m1pKoIvzjU2MNjFejz7kubg5PIw8L65v4fWy8TfLBwb20Z0jbngPKWjuqscJDDjT2k85C6um0Fr1YVqE2psRcM+/p4J2XuMGx3TalHBXCECNaAPO275n5ySzxBbrK3dmO8CiVAAViQDgop3Fld7N15nSIiNhY/jzjQ0C2+TogLnvLa9sIYp/Y//TGETwIU6YECiKzr87M7RAQK8BT4i/h1ES7ksrtqSnUZZM8pMBeu4euWqCACoy2dFhzW9UOSSFwEbRFBaSdAWNBW+8FCERFhMT4AI+LqDWyWPoJyBH4USaEdJAVVfQrtnhCB9Zby7EX8TIhYjg+S+vEFXkztFRExik97GDMf5NugBxGMGCnPXnjun7jaR25tPkLTWGoB0jlXEdekZcg+QcPYaJl+REiej526qJAvQFYPN/b6Kq6x9hGaL9LtUfhDRIyWU1rmxLtqSrSLa9wQcSXPSMYhrqLcj8tXcY0zIpbyjG1H0i3kE66EfNx0ttYo3tL1RzbQpjX2cyM0IPvmKVbd0wVZ6cn8eKLl5KoAgalLjBAheeZpODcFJ1dfDwHOkYodIsKmSHmOsbhKoYk1IsIgeAoKX5DnuBQT7EGJDyKCRDOz91xlbtLt1dIgbohosd6PQeTf9PyYNchjhoiYdydEJERExtjQR0IfCX1EhkDoIzKE/gco765KHggW0QAAAABJRU5ErkJggg=="},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),o=n(10);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,l(t).apply(this,arguments))}var n,i,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["Component"]),n=t,(i=[{key:"render",value:function(){return r.createElement(o.b,{to:"/study?id=".concat(this.props.studyId),className:this.props.className},this.props.children)}}])&&a(n.prototype,i),c&&a(n,c),t}()},function(e,t,n){"use strict";var r=n(0),o=n(7),i=n(2),a=n(8),s=n(56),l=n(9),u=n.n(l),c=n(644),p=n.n(c),d=n(3),f=n(550);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var S=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},_=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},w=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=y(this,g(t).apply(this,arguments))).mousePosition={x:0,y:0},e.tooltipOpen=!1,e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,r["Component"]),n=t,(o=[{key:"onMouseOver",value:function(){this.tooltipOpen=!0}},{key:"onMouseOut",value:function(){this.tooltipOpen=!1}},{key:"onMouseMove",value:function(e){this.mousePosition.x=e.pageX,this.mousePosition.y=e.pageY}},{key:"render",value:function(){var e=this.props,t=(e.text,e.maxWidth,e.datum,e.suffix,e.tooltip,e.prefixTspans,e.alwaysShowTooltip,e.renderTruncatedText,e.transform),n=e.tooltipPlacement,o=e.textRef,i=_(e,["text","maxWidth","datum","suffix","tooltip","prefixTspans","alwaysShowTooltip","renderTruncatedText","transform","tooltipPlacement","textRef"]),a=void 0;return t&&void 0!==this.props.x&&void 0!==this.props.y&&(a=t(this.props.x,this.props.y)),r.createElement(r.Fragment,null,r.createElement("text",h({onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,onMouseMove:this.onMouseMove,ref:o,transform:a},i),this.props.prefixTspans,this.truncatedText),(this.textReport.isTruncated||this.props.alwaysShowTooltip)&&this.tooltipOpen&&r.createElement(f.a,{isOpened:!0,node:document.body},r.createElement(s.Popover,{arrowOffsetTop:17,className:u()("cbioportal-frontend","cbioTooltip",p.a.Tooltip),positionLeft:this.mousePosition.x+("left"===n?-8:8),positionTop:this.mousePosition.y-17,style:{transform:"left"===n?"translate(-100%,0%)":void 0},placement:n},this.tooltipElt)))}},{key:"tooltipElt",get:function(){return this.props.tooltip?this.props.tooltip(this.props.datum):r.createElement("span",null,this.props.text)}},{key:"fontFamily",get:function(){var e="Arial";return this.props.style&&this.props.style.fontFamily&&(e=this.props.style.fontFamily.split(", ")[0]),e}},{key:"fontSize",get:function(){var e="13px";return this.props.style&&this.props.style.fontSize&&(e=this.props.style.fontSize+"px"),e}},{key:"textReport",get:function(){return Object(d.db)(this.props.text||"",this.props.maxWidth,this.fontFamily,this.fontSize)}},{key:"truncatedText",get:function(){return this.props.renderTruncatedText?this.props.renderTruncatedText(this.textReport.text):r.createElement("tspan",null,this.textReport.text)}}])&&m(n.prototype,o),i&&m(n,i),t}();w.defaultProps={maxWidth:100,suffix:"..."},S([i.observable],w.prototype,"mousePosition",void 0),S([i.observable],w.prototype,"tooltipOpen",void 0),S([i.computed],w.prototype,"tooltipElt",null),S([a.default,i.action],w.prototype,"onMouseOver",null),S([a.default,i.action],w.prototype,"onMouseOut",null),S([a.default],w.prototype,"onMouseMove",null),S([i.computed],w.prototype,"fontFamily",null),S([i.computed],w.prototype,"fontSize",null),S([i.computed],w.prototype,"textReport",null),S([i.computed],w.prototype,"truncatedText",null),w=S([o.observer],w),t.a=w},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0ZWQgYnkgSWNvTW9vbi5pbyAtLT4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIxMDI0IiBoZWlnaHQ9IjEwMjQiIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiPgogICAgPGcgaWQ9Imljb21vb24taWdub3JlIj4KICAgIDwvZz4KICAgIDxwYXRoIGZpbGw9IiNmZjk5MDAiIGQ9Ik0zMjEuMDA4IDEwNDUuMzMzYy02OC4yNDUtMTQyLjAwOC0zMS45MDEtMjIzLjM3OSAyMC41NTEtMzAwLjA0NCA1Ny40NC04My45NTYgNzIuMjQ0LTE2Ny4wNjUgNzIuMjQ0LTE2Ny4wNjVzNDUuMTUzIDU4LjcgMjcuMDkyIDE1MC41MDhjNzkuNzcyLTg4LjggOTQuODI0LTIzMC4yOCA4Mi43ODMtMjg0LjQ2NCAxODAuMzE1IDEyNi4wMTIgMjU3LjM3NiAzOTguODU2IDE1My41MjMgNjAxLjA2NSA1NTIuMzcyLTMxMi41MzIgMTM3LjM5OS03ODAuMTcyIDY1LjE1NS04MzIuODUxIDI0LjA4MSA1Mi42NzYgMjguNjQ4IDE0MS44NTEtMjAgMTg1LjEyNy04Mi4zNTItMzEyLjI3Ni0yODUuOTcyLTM3Ni4yNzYtMjg1Ljk3Mi0zNzYuMjc2IDI0LjA4MyAxNjEuMDQ0LTg3LjI5NiAzMzcuMTQ0LTE5NC42OTYgNDY4LjczMS0zLjc3NS02NC4yMTYtNy43ODMtMTA4LjUyOC00MS41NDktMTY5Ljk4LTcuNTggMTE2LjY1Ni05Ni43MzIgMjExLjc0OC0xMjAuODczIDMyOC42MjgtMzIuNzAxIDE1OC4yODcgMjQuNDk2IDI3NC4xOCAyNDEuNzQ4IDM5Ni42MjN6Ij48L3BhdGg+Cjwvc3ZnPgo="},function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__-Qj7G",framedImage:"styles-module__framedImage__TmznI",labeledCheckbox:"styles-module__labeledCheckbox__jTAe1"}},function(e,t,n){"use strict";n.d(t,"b",function(){return d}),n.d(t,"a",function(){return f});var r=n(0),o=n(758),i=n.n(o);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return function(t,n,r){return n in t&&t[n]instanceof e?null:new Error("Expecting ".concat(r," to receive {").concat(JSON.stringify(n),": ").concat(e.name,"} from context"))}}function d(e){return i()({store:p(e)},function(e){return{store:e.store}})}function f(e){var t;return(t=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,u(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r["Component"]),n=t,(o=[{key:"store",get:function(){return this.context.store}}])&&s(n.prototype,o),i&&s(n,i),t}()).contextTypes={store:p(e)},t}},function(e,t,n){e.exports={portalWidth:"tables-module__portalWidth__2u2eA",framedImage:"tables-module__framedImage__2sdMG",studyViewTablesTable:"tables-module__studyViewTablesTable__29Y2_",tableSearchInput:"tables-module__tableSearchInput__2uOMk",labelContent:"tables-module__labelContent__2FLsJ",labelContentSVG:"tables-module__labelContentSVG__2v71D",controls:"tables-module__controls__2KTG_",controlsBtn:"tables-module__controlsBtn__24B4k",geneSymbol:"tables-module__geneSymbol__1OUGZ",cancerGene:"tables-module__cancerGene__CqmRo",headerColumn:"tables-module__headerColumn__WCJTO",headerRow:"tables-module__headerRow__3Ckx0",row:"tables-module__row__20ZyT",oddRow:"tables-module__oddRow__3vz4c",evenRow:"tables-module__evenRow__KCskI",highlightedEvenRow:"tables-module__highlightedEvenRow__2EYSy",highlightedRow:"tables-module__highlightedRow__1wuhn",highlightedOddRow:"tables-module__highlightedOddRow__1RWUf",cancerGeneIcon:"tables-module__cancerGeneIcon__1Zp6i",gistic:"tables-module__gistic__1d6Gl",mutsig:"tables-module__mutsig__3Q3o0",cancerGenesRow:"tables-module__cancerGenesRow__1crxh",amp:"tables-module__amp__yRy0o",del:"tables-module__del__PLU6Y",displayFlex:"tables-module__displayFlex__7WOab",headerSortingIcon:"tables-module__headerSortingIcon__1aRye",autoMarginCheckbox:"tables-module__autoMarginCheckbox__3tMQV",union:"tables-module__union__3dOlj",intersection:"tables-module__intersection__2qPMu"}},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(0),o=n(581),i=n(580);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,u(t).apply(this,arguments))}var n,a,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e="horizontal"===this.props.orientation;if("gradient"===this.props.datum.symbol.type){for(var t=this.props.datum.symbol.colorFn,n=this.props.datum.symbol.range,a=this.props.datum.symbol.gradientUid,s=[],l=0;l<30;l++){var u=l/30;s.push(r.createElement("stop",{offset:"".concat((100*u).toFixed(0),"%"),stopColor:t(u*n[1]+(1-u)*n[0])}))}var c,p,d,f,h,m,y=r.createElement("linearGradient",{id:a,key:a,x1:"0",y1:e?"0":"1",x2:e?"1":"0",y2:"0"},s),g=n[1]-n[0]>5,v=g?90:50;e?(c=v,p=25,d=this.props.x,f=this.props.y-p/2,h="-0.5em",m="1em"):(c=25,p=v,d=this.props.x,f=this.props.y,h="0em",m="0.5em");var b=r.createElement("rect",{fill:"url(#".concat(a,")"),x:d,y:f,width:c,height:p}),S=[r.createElement("text",{fontSize:11,x:e?d+c:d+c+4,y:e?f+p+4:f,dx:h,dy:m},Object(i.f)(n[1],2)),r.createElement("text",{fontSize:11,x:e?d:d+c+4,y:e?f+p+4:f+p,dx:h,dy:m},Object(i.f)(n[0],2))];return g&&S.push(r.createElement("text",{fontSize:11,x:e?d+c/2:d+c+4,y:e?f+p+4:f+p/2,dx:h,dy:m},Object(i.f)((n[0]+n[1])/2,2))),r.createElement("g",null,y,b,S)}var _=r.createElement(o.Point,this.props);if(void 0!==this.props.datum.margin){var w=e?this.props.datum.margin:0,E=e?0:this.props.datum.margin;return r.createElement("g",{transform:"translate(".concat(w,",").concat(E,")")},_)}return _}}])&&s(n.prototype,a),p&&s(n,p),t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(0),o=n(581);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,u(t).apply(this,arguments))}var n,i,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r["Component"]),n=t,(i=[{key:"render",value:function(){var e="horizontal"===this.props.orientation,t=r.createElement(o.VictoryLabel,a({className:"legendLabel_".concat(this.props.text)},this.props));if(void 0!==this.props.datum.margin){var n=e?this.props.datum.margin:0,i=e?0:this.props.datum.margin;return r.createElement("g",{transform:"translate(".concat(n,",").concat(i,")")},t)}return t}}])&&s(n.prototype,i),p&&s(n,p),t}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterPropsFrom=function(e){e=e||{};var t={};for(var n in e)n in r||(t[n]=e[n]);return t};var r={hideTableHeader:!0,column:!0,columns:!0,sortable:!0,filterable:!0,filtering:!0,onFilter:!0,filterPlaceholder:!0,filterClassName:!0,currentFilter:!0,sort:!0,sortBy:!0,sortableColumns:!0,onSort:!0,defaultSort:!0,defaultSortDescending:!0,itemsPerPage:!0,filterBy:!0,hideFilterInput:!0,noDataText:!0,currentPage:!0,onPageChange:!0,previousPageLabel:!0,nextPageLabel:!0,pageButtonLimit:!0,childNode:!0,data:!0,children:!0}},function(e,t,n){"use strict";function r(e){return new Promise(function(t){return setTimeout(t,e)})}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3;return new Promise(function(r){var o=0,i=setInterval(function(){if(o+=t,e())clearInterval(i),r();else if(o>n)throw clearInterval(i),new Error("sleepUntil timeout")},t)})}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o})},,,function(e,t,n){"use strict";var r=n(0),o=n(126),i=n.n(o),a=n(7),s=n(2);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,p(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement("span",{className:this.props.className},this.props.showCopy&&r.createElement("a",{onClick:this.props.handleCopy,ref:this.props.copyLinkRef},r.createElement("i",{className:"fa fa-clipboard",style:{marginRight:5}}),this.props.copyLabel),this.props.showCopy&&this.props.showDownload&&r.createElement("span",{style:{margin:"0px 10px"}},"|"),this.props.showDownload&&r.createElement("a",{onClick:this.props.handleDownload,style:{marginRight:10}},r.createElement("i",{className:"fa fa-cloud-download",style:{marginRight:5}}),this.props.downloadLabel),this.props.showCopyMessage&&r.createElement("span",{className:"alert-success"},"Copied!"))}}])&&u(n.prototype,o),i&&u(n,i),t}();f.defaultProps={className:"",copyButtonLabel:"Copy",downloadButtonLabel:"Download",showCopy:!0,showDownload:!0};var h=n(656),m=n(9),y=n.n(m),g=n(655),v=n.n(g),b=n(3),S=n(683);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var P=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),E(this,O(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement("span",{className:y()(v.a.downloadTabLinksGroup,this.props.className)},this.props.showCopy&&r.createElement("a",{onClick:this.props.handleCopy,ref:this.props.copyLinkRef},r.createElement("i",{className:"fa fa-clipboard"}),this.props.copyLabel),this.props.showCopy&&this.props.showDownload&&r.createElement("span",null,"|"),this.props.showDownload&&r.createElement("a",{onClick:this.props.handleDownload},r.createElement("i",{className:"fa fa-cloud-download"}),this.props.downloadLabel),this.props.showDownload&&this.props.showQuery&&r.createElement("span",null,"|"),this.props.showQuery&&r.createElement("a",{onClick:this.props.handleQuery},r.createElement("i",{className:"fa fa-external-link-square"}),this.props.queryButtonLabel),this.props.showQuery&&this.props.showVirtualStudy&&r.createElement("span",null,"|"),this.props.showVirtualStudy&&r.createElement(b.c,{trigger:["click"],destroyTooltipOnHide:!0,overlay:this.props.virtualStudyParams&&r.createElement(S.b,{user:this.props.virtualStudyParams.user,name:this.props.virtualStudyParams.name,description:this.props.virtualStudyParams.description,studyWithSamples:this.props.virtualStudyParams.studyWithSamples,selectedSamples:this.props.virtualStudyParams.selectedSamples,filter:this.props.virtualStudyParams.filter,attributesMetaSet:this.props.virtualStudyParams.attributesMetaSet,molecularProfileNameSet:this.props.virtualStudyParams.molecularProfileNameSet,caseListNameSet:this.props.virtualStudyParams.caseListNameSet}),placement:"bottom"},r.createElement("a",null,r.createElement("i",{className:"fa fa-pie-chart"}),this.props.virtualStudyButtonLabel)),this.props.showCopyMessage&&r.createElement("span",{className:"alert-success"},"Copied!"))}}])&&w(n.prototype,o),i&&w(n,i),t}();function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}P.defaultProps={className:"",copyButtonLabel:"Copy",downloadButtonLabel:"Download",queryButtonLabel:"Query",virtualStudyButtonLabel:"Virtual Study",showCopy:!0,showDownload:!0,showQuery:!1,showVirtualStudy:!1},n.d(t,"a",function(){return j});var D=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":I(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},M=n(613),j=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=T(t).call(this,e))||"object"!==I(o)&&"function"!=typeof o?k(r):o).showCopyMessage=!1,n.handleDownload=n.handleDownload.bind(k(n)),n.copyLinkRef=n.copyLinkRef.bind(k(n)),n.copyButtonRef=n.copyButtonRef.bind(k(n)),n.handleAfterCopy=n.handleAfterCopy.bind(k(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return"LINK"===this.props.controlsStyle?r.createElement(f,{className:this.props.className,handleDownload:this.handleDownload,copyLinkRef:this.copyLinkRef,handleCopy:this.handleAfterCopy,copyLabel:this.props.copyLabel,downloadLabel:this.props.downloadLabel,showCopyMessage:this.showCopyMessage}):"QUERY"===this.props.controlsStyle?r.createElement(P,{className:this.props.className,handleDownload:this.handleDownload,copyLinkRef:this.copyLinkRef,handleCopy:this.handleAfterCopy,copyLabel:this.props.copyLabel,downloadLabel:this.props.downloadLabel,showCopyMessage:this.showCopyMessage,showQuery:this.props.showQuery,handleQuery:this.props.handleQuery,showVirtualStudy:this.props.showVirtualStudy,virtualStudyParams:this.props.virtualStudyParams}):r.createElement(h.a,{className:this.props.className,handleDownload:this.handleDownload,copyButtonRef:this.copyButtonRef,handleCopy:this.handleAfterCopy,showCopyMessage:this.showCopyMessage,showCopy:this.props.showCopy,showDownload:this.props.showDownload})}},{key:"handleDownload",value:function(){this.props.downloadData&&i()(this.props.downloadData(),this.props.downloadFilename)}},{key:"copyLinkRef",value:function(e){this.handleCopyRef(e)}},{key:"copyButtonRef",value:function(e){this.handleCopyRef(e)}},{key:"handleCopyRef",value:function(e){if(e){var t=this.props,n=t.downloadData,r=t.containerId,o=r?{text:n,container:document.getElementById(r)}:{text:n};new M(e,o)}}},{key:"handleAfterCopy",value:function(){var e=this;this.showCopyMessage=!0,setTimeout(function(){e.showCopyMessage=!1},this.props.copyMessageDuration)}}])&&x(n.prototype,o),a&&x(n,a),t}();j.defaultProps={className:"",showCopy:!0,copyMessageDuration:3e3,showDownload:!0,showQuery:!0,showVirtualStudy:!0,copyLabel:"Copy",downloadLabel:"Download",downloadFilename:"data.tsv",controlsStyle:"LINK"},D([s.observable],j.prototype,"showCopyMessage",void 0),j=D([a.observer],j)},function(e,t,n){"use strict";var r=n(4),o=n(2);function i(e,t){return t.toLowerCase().indexOf(e.toLowerCase())>-1}function a(e,t,n){n||(n=i);var r=!1,o=!1,a=!1,s=!0,l=!1,u=void 0;try{for(var c,p=e[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){if("not"!==c.value.type){o=!0;break}}}catch(e){l=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw u}}o||(r=!0);var d=!0,f=!1,h=void 0;try{for(var m,y=e[Symbol.iterator]();!(d=(m=y.next()).done);d=!0){var g=m.value;if("not"===g.type){if(n(g.data,t)){r=!1,a=!0;break}}else if("and"===g.type){o=!0;var v=!0,b=!0,S=!1,_=void 0;try{for(var w,E=g.data[Symbol.iterator]();!(b=(w=E.next()).done);b=!0){var O=w.value;v=v&&n(O,t)}}catch(e){S=!0,_=e}finally{try{b||null==E.return||E.return()}finally{if(S)throw _}}r=r||v}}}catch(e){f=!0,h=e}finally{try{d||null==y.return||y.return()}finally{if(f)throw h}}return{match:r,forced:a}}var s=n(66),l=n(6),u=n(104),c=n.n(u);function p(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",function(){return v}),n.d(t,"b",function(){return b});var g=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":y(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},v="pan_can_atlas",b=function(){function e(t){f(this,e),this.store=t}return m(e,[{key:"getMetadata",value:function(e){return this.store.treeData.map_node_meta.get(e)}},{key:"cancerTypeContainsSelectedStudies",value:function(e){var t=this.getMetadata(e).descendantStudies;return r.intersection(this.store.selectableSelectedStudies,t).length>0}},{key:"getDepth",value:function(e){return this.getMetadata(e).ancestors.length}},{key:"isHighlighted",value:function(e){return!!this.store.searchText&&!!this.map_node_filterBySearchText.get(e)}},{key:"map_node_filterByDepth",get:function(){var e=new Map,t=!0,n=!1,r=void 0;try{for(var o,i=this.store.treeData.map_node_meta.entries()[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=d(o.value,2),s=a[0],l=a[1],u=!0;l.isCancerType&&(!l.descendantStudies.length||l.ancestors.length>this.store.maxTreeDepth&&!s.alwaysVisible)&&(u=!1),e.set(s,u)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return e}},{key:"map_node_filterBySearchText",get:function(){var e=function(e){e=e.toLowerCase().trim().split(/\s+/g).join(" ");for(var t,n,r=[],o=0;o<e.length;)'"'===e[o]?-1===(n=e.indexOf('"',o+1))?(r.push(e.substring(o+1)),o=e.length):(r.push(e.substring(o+1,n)),o=n+1):" "===e[o]?o+=1:"-"===e[o]?(r.push("-"),o+=1):-1===(t=e.indexOf(" ",o))?(r.push(e.substring(o)),o=e.length):(r.push(e.substring(o,t)),o=t+1);var i,a,s=[];for(o=0;o<r.length;)"-"===r[o]?(o<r.length-1&&s.push({type:"not",data:r[o+1]}),o+=2):(i=r.indexOf("or",o),a=r.indexOf("-",o),-1===i&&-1===a?(s.push({type:"and",data:r.slice(o)}),o=r.length):-1===i&&a>0?(s.push({type:"and",data:r.slice(o,a)}),o=a):i>0&&-1===a?(s.push({type:"and",data:r.slice(o,i)}),o=i+1):i<a?(s.push({type:"and",data:r.slice(o,i)}),o=i+1):(s.push({type:"and",data:r.slice(o,a)}),o=a));return s}(this.store.searchText),t=new Map,n=!0,r=!1,o=void 0;try{for(var i,s=this.store.treeData.map_node_meta.entries()[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var l=d(i.value,2),u=l[0],c=(S=l[1]).searchTerms;u.hasOwnProperty("studyId")&&(c+=u.studyId?u.studyId:""),t.set(u,a(e,c))}}catch(e){r=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}var f=new Map,h=!0,m=!1,y=void 0;try{for(var g,v=this.store.treeData.map_node_meta.entries()[Symbol.iterator]();!(h=(g=v.next()).done);h=!0){var b=d(g.value,2),S=(u=b[0],b[1]);if(!f.has(u)){for(var _=!1,w=0,E=[u].concat(p(S.ancestors),p(S.priorityCategories));w<E.length;w++){var O=E[w],C=t.get(O);if(!C.match&&C.forced){_=!1;break}_=_||C.match}if(f.set(u,_),_&&!S.isCancerType)for(var P=0,x=[S.ancestors,S.priorityCategories];P<x.length;P++){var T=x[P],k=!0,A=!1,I=void 0;try{for(var D,M=T[Symbol.iterator]();!(k=(D=M.next()).done);k=!0){var j=D.value;f.set(j,!0)}}catch(e){A=!0,I=e}finally{try{k||null==M.return||M.return()}finally{if(A)throw I}}}}}}catch(e){m=!0,y=e}finally{try{h||null==v.return||v.return()}finally{if(m)throw y}}return f}},{key:"map_node_filterBySelectedCancerTypes",get:function(){var e=new Map;if(this.store.selectedCancerTypes.length){var t=!0,n=!1,r=void 0;try{for(var o,i=this.store.selectedCancerTypes[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value,s=this.getMetadata(a);e.set(a,!0);for(var l=0,u=[s.ancestors,s.descendantCancerTypes,s.descendantStudies];l<u.length;l++){var c=u[l],p=!0,d=!1,f=void 0;try{for(var h,m=c[Symbol.iterator]();!(p=(h=m.next()).done);p=!0){var y=h.value;e.set(y,!0)}}catch(e){d=!0,f=e}finally{try{p||null==m.return||m.return()}finally{if(d)throw f}}}}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}else{var g=!0,v=!1,b=void 0;try{for(var S,_=this.store.treeData.map_node_meta.keys()[Symbol.iterator]();!(g=(S=_.next()).done);g=!0){var w=S.value;e.set(w,!0)}}catch(e){v=!0,b=e}finally{try{g||null==_.return||_.return()}finally{if(v)throw b}}}return e}},{key:"map_node_filterBySelectedStudies",get:function(){var e=new Map;if(this.store.selectableSelectedStudies.length){var t=!0,n=!1,r=void 0;try{for(var o,i=this.store.selectableSelectedStudies[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value,s=this.store.treeData.map_node_meta.get(a);e.set(a,!0);for(var l=0,u=[s.descendantStudies,s.ancestors,s.priorityCategories];l<u.length;l++){var c=u[l],p=!0,d=!1,f=void 0;try{for(var h,m=c[Symbol.iterator]();!(p=(h=m.next()).done);p=!0){var y=h.value;e.set(y,!0)}}catch(e){d=!0,f=e}finally{try{p||null==m.return||m.return()}finally{if(d)throw f}}}}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}return e}},{key:"mainView",get:function(){return new S(this.store,[this.map_node_filterByDepth,this.map_node_filterBySearchText,this.map_node_filterBySelectedCancerTypes])}},{key:"cancerTypeListView",get:function(){return new S(this.store,[this.map_node_filterByDepth,this.map_node_filterBySearchText])}},{key:"selectedStudiesView",get:function(){var e=this;return new S(this.store,[this.map_node_filterByDepth,this.map_node_filterBySelectedStudies,{get:function(t){return!e.getMetadata(t).isPriorityCategory}}])}}]),e}();g([s.cached],b.prototype,"map_node_filterByDepth",null),g([s.cached],b.prototype,"map_node_filterBySearchText",null),g([s.cached],b.prototype,"map_node_filterBySelectedCancerTypes",null),g([s.cached],b.prototype,"map_node_filterBySelectedStudies",null),g([o.computed],b.prototype,"mainView",null),g([o.computed],b.prototype,"cancerTypeListView",null),g([o.computed],b.prototype,"selectedStudiesView",null);var S=function(){function e(t,n){var r=this;f(this,e),this.store=t,this.filters=n,this.nodeFilter=function(e){return r.filters.every(function(t){return!!t.get(e)})}}return m(e,[{key:"getMetadata",value:function(e){return this.store.treeData.map_node_meta.get(e)}},{key:"getChildCancerTypes",value:function(e,t){var n=this.getMetadata(e);return(n.ancestors.length<this.store.maxTreeDepth||!t&&e.alwaysVisible?n.childCancerTypes:[]).filter(this.nodeFilter)}},{key:"getChildCancerStudies",value:function(e){var t=this.getMetadata(e),n=[];if(t.ancestors.length<this.store.maxTreeDepth)n=t.childStudies;else if(n=t.descendantStudies,e.alwaysVisible){var o=r.chain(t.descendantCancerTypes).filter(function(e){return e.alwaysVisible}).map(function(e){return e.cancerTypeId}).value();n=r.filter(n,function(e){return!o.includes(e.cancerTypeId)})}return n.filter(this.nodeFilter)}},{key:"getDescendantCancerStudies",value:function(e){return this.getMetadata(e).descendantStudies.filter(this.nodeFilter)}},{key:"getCheckboxProps",value:function(e){var t=this;if(this.getMetadata(e).isCancerType){var n=(this.store.selectableSelectedStudyIds||[]).map(function(e){return t.store.treeData.map_studyId_cancerStudy.get(e)}),o=this.getDescendantCancerStudies(e),i=r.intersection(o,n),a=i.length>0;return{checked:a,indeterminate:a&&i.length!=o.length}}var s=e;return{checked:!!this.store.selectableSelectedStudyIds.find(function(e){return e==s.studyId}),disabled:this.store.isDeletedVirtualStudy(s.studyId)}}},{key:"isCheckBoxDisabled",value:function(e){if(this.getMetadata(e).isCancerType)return!1;var t=e;return!!this.store.isDeletedVirtualStudy(t.studyId)}},{key:"clearAllSelection",value:function(){this.store.selectableSelectedStudyIds=[]}},{key:"onCheck",value:function(e,t){var n;this.getMetadata(e).isCancerType?this.store.forDownloadTab||(n=this.getDescendantCancerStudies(e).map(function(e){return e.studyId})):n=[e.studyId],n&&this.handleCheckboxStudyIds(n,t)}},{key:"getSelectionReport",value:function(){var e=this,t=this.store.selectableSelectedStudyIds||[],n=t.map(function(t){return e.store.treeData.map_studyId_cancerStudy.get(t)}),o=this.getDescendantCancerStudies(this.store.treeData.rootCancerType);return{selectableSelectedStudyIds:t,selectableSelectedStudies:n,shownStudies:o,shownAndSelectedStudies:r.intersection(o,n)}}},{key:"quickSelectButtons",value:function(e){if(!e)return{};try{return l.a.parseConfigFormat(e)}catch(e){return{}}}},{key:"toggleAllFiltered",value:function(){var e=this,t=this.getSelectionReport(),n=(t.selectableSelectedStudyIds,t.selectableSelectedStudies,t.shownStudies),o=t.shownAndSelectedStudies,i=[];i=n.length===o.length?r.without.apply(r,[this.store.selectableSelectedStudyIds].concat(p(n.map(function(e){return e.studyId})))):r.union(this.store.selectableSelectedStudyIds,n.map(function(e){return e.studyId})),this.store.selectableSelectedStudyIds=i.filter(function(t){return!r.includes(e.store.deletedVirtualStudies,t)})}},{key:"selectAllMatchingStudies",value:function(e){var t=this.getSelectionReport(),n=(t.selectableSelectedStudyIds,t.selectableSelectedStudies,t.shownStudies);t.shownAndSelectedStudies;this.store.selectableSelectedStudyIds=n.map(function(e){return e.studyId}).filter(function(t){return r.isArray(e)?e.includes(t):t.includes(e)})}},{key:"handleCheckboxStudyIds",value:function(e,t){var n=this,o=this.store.selectableSelectedStudyIds;o=t?r.union(o,e):r.difference(o,e),this.store.selectableSelectedStudyIds=o.filter(function(e){return!r.includes(n.store.deletedVirtualStudies,e)})}},{key:"isFiltered",get:function(){return this.store.selectedCancerTypeIds.length>0||this.store.searchText.length>0}}]),e}();g([o.action],S.prototype,"clearAllSelection",null),g([o.action],S.prototype,"onCheck",null),g([o.computed],S.prototype,"isFiltered",null),g([c.a],S.prototype,"quickSelectButtons",null),g([o.action],S.prototype,"toggleAllFiltered",null),g([o.action],S.prototype,"selectAllMatchingStudies",null)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(180),o=n(571);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return 0===e.length?Promise.reject("No pdb ids given"):r.a.fetchPdbHeaderPOST({pdbIds:e})}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,s(t).call(this,function(e){return e},function(e){return e.pdbId},u))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,o["a"]),t}()},function(e,t,n){"use strict";var r=n(0),o=(n(704),n(9)),i=n.n(o),a=n(7);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":p(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,u(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.headers,n=e.rows,o=e.className,a=e.noRowsText,s=n.length>0?n:[r.createElement("tr",{key:"0"},r.createElement("td",{style:{textAlign:"center"},colSpan:t.length},a||"There are no results."))];return r.createElement("table",{className:i()("simple-table table table-striped table-border-top",o)},r.createElement("thead",null,r.createElement("tr",null,t)),r.createElement("tbody",null,s))}}])&&s(n.prototype,o),a&&s(n,a),t}();f=d([a.observer],f),t.a=f},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return i});var r=n(601);function o(e,t,n,o,i){return t?t.reduce(function(t,a){var s=e[a];if(s){var l=s.find(function(e){return e.clinicalAttributeId===n}),u=s.find(function(e){return e.clinicalAttributeId===o});!l||!u||Object(r.o)(l.value)||Object(r.o)(u.value)||Number.isNaN(Number(u.value))||t.push({uniquePatientKey:a,patientId:s[0].patientId,studyId:s[0].studyId,status:i(l.value),months:parseFloat(u.value)})}return t},[]):[]}function i(e,t,n,o){return t?t.reduce(function(t,i){var a=e[i];if(a){var s=a.find(function(e){return e.clinicalAttributeId===n}),l=a.find(function(e){return e.clinicalAttributeId===o});!s||!l||Object(r.o)(s.value)||Object(r.o)(l.value)||Number.isNaN(Number(l.value))||t.push(s)}return t},[]):[]}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(4);function o(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\t",o=[];return t&&(Object.keys(e[0]).forEach(function(e){return o.push(e,n)}),o.pop(),o.push("\r\n")),e.forEach(function(e){r.each(e,function(e){o.push(e,n)}),o.pop(),o.push("\r\n")}),o.join("")}},function(e,t,n){"use strict";function r(e){return function(e){var t="";e&&(e.length>1?t="combined_study_":1===e.length&&(t="".concat(e[0],"_")));return t}(e?e.map(function(e){return e.studyId}):void 0)}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"e",function(){return c}),n.d(t,"n",function(){return p}),n.d(t,"g",function(){return d}),n.d(t,"h",function(){return f}),n.d(t,"f",function(){return h}),n.d(t,"k",function(){return m}),n.d(t,"c",function(){return y}),n.d(t,"i",function(){return g}),n.d(t,"j",function(){return v}),n.d(t,"d",function(){return S}),n.d(t,"b",function(){return _}),n.d(t,"l",function(){return E}),n.d(t,"m",function(){return O}),n.d(t,"a",function(){return P});var r=n(4),o=n(570),i=n(624),a=n(619),s=n(585);function l(e,t,n){var r=[],i=[],a=[],s=[],l=[],u=[],c=!0,p=!1,d=void 0;try{for(var f,h=e.data[Symbol.iterator]();!(c=(f=h.next()).done);c=!0){var m=f.value,y=m.molecularProfileAlterationType,g=m.alterationSubType.toUpperCase();switch(y){case o.a.COPY_NUMBER_ALTERATION:g.length>0&&(a.push({type:g,value:m.value}),u.push("CNA"));break;case o.a.MRNA_EXPRESSION:g.length>0&&(l.push({type:g,value:m.value}),u.push("EXP"));break;case o.a.PROTEIN_LEVEL:g.length>0&&(s.push({type:g,value:m.value}),u.push("PROT"));break;case o.a.MUTATION_EXTENDED:m.mutationType.toLowerCase().includes("fusion")?(i.push(m.proteinChange),u.push("FUSION")):(r.push(m.proteinChange),u.push("MUT"))}}}catch(e){p=!0,d=e}finally{try{c||null==h.return||h.return()}finally{if(p)throw d}}return{sequenced:!t||!t[e.trackLabel]||t[e.trackLabel].sequenced>0,geneSymbol:e.trackLabel,mutation:r,fusion:i,cna:a,mrnaExp:l,proteinLevel:s,isMutationNotProfiled:!1,isFusionNotProfiled:!1,isCnaNotProfiled:!1,isMrnaExpNotProfiled:!1,isProteinLevelNotProfiled:!1,alterationTypes:u}}function u(e,t,n){var r=!0,i=!0,a=!0,s=!0,l=!0;if(e.profiled_in){var u=!0,c=!1,p=void 0;try{for(var d,f=e.profiled_in[Symbol.iterator]();!(u=(d=f.next()).done);u=!0){var h=d.value;if(n)switch(n[h.molecularProfileId].molecularAlterationType){case o.a.COPY_NUMBER_ALTERATION:a=!1;break;case o.a.MRNA_EXPRESSION:s=!1;break;case o.a.PROTEIN_LEVEL:l=!1;break;case o.a.MUTATION_EXTENDED:r=!1;case o.a.FUSION:i=!1}}}catch(e){c=!0,p=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw p}}}return t.isMutationNotProfiled=r,t.isFusionNotProfiled=i,t.isCnaNotProfiled=a,t.isMrnaExpNotProfiled=s,t.isProteinLevelNotProfiled=l,t}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e&&!r.isEmpty(t)?e.map(function(e){var n=Object(i.a)(!0,e,t,{});return{gene:e.oql.gene,oqlLine:e.oql.oql_line,altered:n.altered,sequenced:n.sequenced,percentAltered:n.percent}}):[]}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\t",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\n";return e.map(function(e){return e.join(t)}).join(n)}function d(e){return e?b(e,function(e){return e.molecularProfileAlterationType===o.a.MUTATION_EXTENDED||e.molecularProfileAlterationType===o.a.FUSION}):{}}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e?S(e,t,n,C):[]}function h(e){return e?b(e,function(e){return e.molecularProfileAlterationType===o.a.MRNA_EXPRESSION}):{}}function m(e){return e?b(e,function(e){return e.molecularProfileAlterationType===o.a.PROTEIN_LEVEL}):{}}function y(e){return e?b(e,function(e){return e.molecularProfileAlterationType===o.a.COPY_NUMBER_ALTERATION}):{}}function g(e,t){return t?b(t,function(t){return e.includes(t.molecularProfileId)}):{}}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e?S(e,t,n):[]}function b(e,t){var n={};return r.values(e.samples).forEach(function(e){e.forEach(function(e){var r="".concat(e.gene.hugoGeneSymbol,"_").concat(e.uniqueSampleKey);n[r]=n[r]||[],t&&!t(e)||n[r].push(e)})}),n}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,a=n.map(function(e){return e.hugoGeneSymbol}),s=r.keyBy(t,"uniqueSampleKey"),l=t.map(function(e){return e.uniqueSampleKey}),u=function(e,t,n,r,o){var i={};return r.forEach(function(r){var a=n[r],s=i[r]||{studyId:a.studyId,sampleId:a.sampleId,patientId:a.patientId,alterationData:{}};i[r]=s,t.forEach(function(t){s.alterationData[t]=s.alterationData[t]||[];var n="".concat(t,"_").concat(r);e[n]&&e[n].forEach(function(e){var n=o?o(e):String(e.value);s.alterationData[t].push(n)})})}),i}(e,a,s,l,o),c=[];return c.push(["STUDY_ID","SAMPLE_ID"].concat(a)),l.forEach(function(e){var t=u[e],n=[];n.push(t.studyId),n.push(t.sampleId),a.forEach(function(e){var r=i?i(t.alterationData[e]):t.alterationData[e].join(" ")||"NA";n.push(r)}),c.push(n)}),c}function _(e,t,n,o,i){var c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],p=arguments.length>6?arguments[6]:void 0,d=arguments.length>7?arguments[7]:void 0,f={};if(n&&i){var h=r.keyBy(c,"uniqueSampleKey");n.forEach(function(e){Object(a.d)(e.cases.samples,e.oql.gene,c,i,t).forEach(function(t){var n=t.study_id+":"+t.uid;w(f,t,h);var o=l(t,p);void 0!==f[n].oqlDataByGene[e.oql.gene]?f[n].oqlDataByGene[e.oql.gene]=r.merge(o,f[n].oqlDataByGene[e.oql.gene]):f[n].oqlDataByGene[e.oql.gene]=o,u(t,f[n].oqlDataByGene[e.oql.gene],d)})})}if(o&&i){var m=r.keyBy(c,"uniqueSampleKey");o.forEach(function(n,r){var o,h;void 0===n.mergedTrackOqlList?(o=n.oql.gene,h=Object(s.r)(r,e,n.oql)):(o=n.oql.list.map(function(e){return e.gene}),h=Object(s.o)(n.oql)),Object(a.d)(n.cases.samples,o,c,i,t).forEach(function(e){var t=e.study_id+":"+e.uid;w(f,e,m);var n=l(e,p);f[t].oqlData[h]=n,u(e,f[t].oqlData[h],d)})})}return r.values(f)}function w(e,t,n){var r=t.study_id,o=t.sample||(n[t.uid]?n[t.uid].sampleId:""),i=r+":"+t.uid;e[i]=e[i]||{studyId:r,sampleId:o,patientId:n[t.uid]?n[t.uid].patientId:"",altered:!1,oqlData:{},oqlDataByGene:{}},e[i].altered=e[i].altered||t.data.length>0}function E(e,t){var n=!0,o=!1,i=void 0;try{for(var a,s=r.values(e)[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value,u=!0,c=!1,p=void 0;try{for(var d,f=l[Symbol.iterator]();!(u=(d=f.next()).done);u=!0){var h=d.value,m=t?t(h):h.value;if(m&&String(m).length>0)return!0}}catch(e){c=!0,p=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw p}}}}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return!1}function O(e){return E(e,C)}function C(e){return e.proteinChange}function P(e){switch(e){case"MUTATION_EXTENDED":return 1;case"COPY_NUMBER_ALTERATION":return 2;case"GENESET_SCORE":return 3;case"MRNA_EXPRESSION":return 4;case"METHYLATION":return 5;case"METHYLATION_BINARY":return 6;case"PROTEIN_LEVEL":return 7;default:return Number.MAX_VALUE}}},function(e,t,n){"use strict";var r=n(7),o=n(0),i=n(2),a=n(56),s=n(586),l=n.n(s),u=n(9),c=n.n(u),p=n(674),d=n(11),f=n.n(d);function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var b=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":v(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},S=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=m(this,y(t).apply(this,arguments))).isHovered=!1,e}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,o["Component"]),n=t,(r=[{key:"onMouseEnter",value:function(){this.isHovered=!0}},{key:"onMouseLeave",value:function(){this.isHovered=!1}},{key:"render",value:function(){var e=void 0===this.props.arrowOffsetTop?30:this.props.arrowOffsetTop,t=!this.props.placement||"left"===this.props.placement||"right"===this.props.placement,n=f()(this.props.container).offset();return n&&(this.props.targetHovered||this.isHovered)?o.createElement(p,{container:document.body},o.createElement(a.Popover,{className:c()("cbioportal-frontend","cbioTooltip",this.props.className),positionLeft:this.props.targetCoords.x+n.left+5-(t?0:30),positionTop:this.props.targetCoords.y+n.top-(t?e:-5),onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,arrowOffsetTop:t?e:void 0,arrowOffsetLeft:t?void 0:24,placement:this.props.placement},this.props.overlay)):null}}])&&h(n.prototype,r),i&&h(n,i),t}();b([i.observable],S.prototype,"isHovered",void 0),b([l.a],S.prototype,"onMouseEnter",null),b([l.a],S.prototype,"onMouseLeave",null),S=b([r.observer],S),t.a=S},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),o=n(3);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,l(t).apply(this,arguments))}var n,i,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["Component"]),n=t,(i=[{key:"render",value:function(){return r.createElement(o.c,{overlay:this.props.tooltip,placement:this.props.tooltipPlacement||"right"},r.createElement("div",{style:this.props.divStyle},r.createElement("i",{className:"fa fa-info-circle",style:Object.assign({},{color:"#000000",cursor:"pointer"},this.props.style||{})})))}}])&&a(n.prototype,i),c&&a(n,c),t}()},function(e,t,n){e.exports=n(16)(1035)},function(e,t,n){"use strict";var r=n(4),o=n(2),i=n(66),a=n(102),s=n(22),l=n(180),u=n(183),c=n(182),p=n(3),d=n(184);function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};function m(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:d.a;return h(this,void 0,void 0,regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!(e.length>0)){i.next=6;break}return i.next=3,o.postResidueMappingByPDBUsingPOST({idType:"uniprot",id:t,pdbId:n,chainId:r,positionList:e.map(function(e){return"".concat(e)})});case 3:return i.abrupt("return",i.sent);case 6:return i.abrupt("return",[]);case 7:case"end":return i.stop()}},i)}))}var y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.queries={}}var t,n,r;return t=e,(n=[{key:"get",value:function(e){var t=this,n=this.generateQueryKey(e);return this.queries[n]||(this.queries[n]=Object(p.S)({invoke:function(){return h(t,void 0,void 0,regeneratorRuntime.mark(function t(){var n,r,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],r=[],t.next=4,m(e.uniprotPositions,e.uniprotId,e.pdbId,e.chainId);case 4:return(o=t.sent).length>0&&(o.forEach(function(e){r=r.concat(e.residueMapping)}),n=r.map(function(e){return{status:"complete",data:e}})),t.abrupt("return",n);case 7:case"end":return t.stop()}},t)}))},onError:function(e){}},this.defaultData(e))),this.queries[n]}},{key:"generateQueryKey",value:function(e){return"".concat(e.uniprotId,"_").concat(e.pdbId,"_").concat(e.chainId,"_").concat(e.uniprotPositions.join(","))}},{key:"defaultData",value:function(e){return[null]}}])&&f(t.prototype,n),r&&f(t,r),e}(),g=n(572),v=n(625),b=n(575),S=n(636),_=n(595);function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var x=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":P(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},T=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=E(this,O(t).call(this,e))).selectedUid="",n.dataSelector=function(e){return n.getChainUid(e)===n.selectedUid},n.dataHighlighter=n.dataSelector,n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(t,_["b"]),n=t,(r=[{key:"getChainUid",value:function(e){return e.pdbId+e.chain}},{key:"selectUid",value:function(e){this.selectedUid=e||""}},{key:"selectFirstChain",value:function(){this.allData.length>0?this.selectedUid=this.getChainUid(this.allData[0]):this.selectedUid=""}},{key:"getPdbChain",value:function(e){var t=this;return this.allData.find(function(n){return t.getChainUid(n)===e})}},{key:"selectedChain",get:function(){return this.getPdbChain(this.selectedUid)}},{key:"tableData",get:function(){return this.sortedFilteredData}}])&&w(n.prototype,r),o&&w(n,o),t}();x([o.observable],T.prototype,"selectedUid",void 0),x([o.action],T.prototype,"selectUid",null),x([o.computed],T.prototype,"selectedChain",null),x([o.action],T.prototype,"selectFirstChain",null),x([o.computed],T.prototype,"tableData",null);var k=n(670),A=n(573),I=n(8),D=n(593),M=n(15);function j(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",function(){return z});var B=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":F(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},V=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},z=function(e){function t(e,n,r,o,s,l,u,c,d,f){var h,m,y;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),m=this,y=R(t).call(this,r,{isoformOverrideSource:e.isoformOverrideSource,filterMutationsBySelectedTranscript:n.filterMutationsBySelectedTranscript,enableCivic:e.show_civic,enableOncoKb:e.show_oncokb},o),(h=!y||"object"!==F(y)&&"function"!=typeof y?L(m):y).mutationMapperConfig=e,h.mutationMapperStoreConfig=n,h.gene=r,h.getMutations=o,h.indexedHotspotData=s,h.indexedVariantAnnotations=l,h.oncoKbCancerGenes=u,h.uniqueSampleKeyToTumorType=c,h.genomenexusClient=d,h.genomenexusInternalClient=f,h.oncoKbInfo=Object(p.S)({invoke:function(){return h.dataFetcher.fetchOncoKbInfo()},onError:function(){return a.s}},a.s),h.mutationData=Object(p.S)({await:function(){return h.mutationMapperStoreConfig.filterMutationsBySelectedTranscript?[h.canonicalTranscript,h.indexedVariantAnnotations]:[h.canonicalTranscript]},invoke:function(){return V(L(h),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.mutations);case 1:case"end":return e.stop()}},e,this)}))}},[]),h.alignmentData=Object(p.S)({await:function(){return[h.mutationData]},invoke:function(){return V(L(h),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.activeTranscript){e.next=4;break}return e.abrupt("return",Object(g.A)(this.activeTranscript));case 4:return e.abrupt("return",[]);case 5:case"end":return e.stop()}},e,this)}))},onError:function(e){}},[]);var v=h.getMutations;return h.getMutations=function(){return Object(D.c)(v())},Object(i.labelMobxPromises)(L(h)),h}var n,o,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(t,a["k"]),n=t,(o=[{key:"countUniqueMutations",value:function(e){return Object(A.d)(e)}},{key:"getDefaultTumorType",value:function(e){return this.uniqueSampleKeyToTumorType[e.uniqueSampleKey]}},{key:"getDefaultEntrezGeneId",value:function(e){return e.gene.entrezGeneId}},{key:"dataFetcher",get:function(){return new a.j({myGeneUrlTemplate:this.mutationMapperConfig.mygene_info_url||void 0,uniprotIdUrlTemplate:this.mutationMapperConfig.uniprot_id_url||void 0,genomeNexusUrl:this.mutationMapperConfig.genomenexus_url||void 0,oncoKbUrl:Object(M.u)()||void 0},this.genomenexusClient||l.a,this.genomenexusInternalClient||u.a,c.a)}},{key:"usingPublicOncoKbInstance",get:function(){return this.oncoKbInfo.result?this.oncoKbInfo.result.publicInstance:a.w}},{key:"unfilteredMutationsByPosition",get:function(){return Object(A.l)(this.dataStore.sortedData)}},{key:"oncoKbDataByProteinPosStart",get:function(){return!this.oncoKbData.result||this.oncoKbData.result instanceof Error?{}:Object(a.V)(this.unfilteredMutationsByPosition,this.oncoKbData.result,this.getDefaultTumorType,this.getDefaultEntrezGeneId,p.u)}},{key:"mutationsGroupedByProteinImpactType",get:function(){var e=this,t=this.dataStore.dataFilters.filter(function(e){return e.type!==a.h.PROTEIN_IMPACT_TYPE}),n=Object(a.y)(this.dataStore.allData,t,this.dataStore.applyFilter);return n=n.filter(function(t){return e.dataStore.applyLazyMobXTableFilter(t)}),Object(a.U)(n)}},{key:"processedMutationData",get:function(){return(this.mutationData.result||[]).map(function(e){return[e]})}},{key:"mergedAlignmentData",get:function(){return Object(v.e)(this.indexedAlignmentData)}},{key:"indexedAlignmentData",get:function(){return Object(g.Y)(this.alignmentData)}},{key:"sortedMergedAlignmentData",get:function(){return Object(b.c)(this.mergedAlignmentData,function(e){return[e.identity,e.alignment.length,e.identityPerc].concat(j(Object(v.b)(e.pdbId,!0)),[-1*e.chain.charCodeAt(0)])},!1)}},{key:"transcriptsByTranscriptId",get:function(){return r.keyBy(this.allTranscripts.result,function(e){return e.transcriptId})}},{key:"mutationsByTranscriptId",get:function(){var e=this;return this.indexedVariantAnnotations.result&&this.transcriptsWithAnnotations.result?r.fromPairs(this.transcriptsWithAnnotations.result.map(function(t){return[t,Object(s.h)(e.getMutations(),t,e.indexedVariantAnnotations.result)]})):{}}},{key:"numberOfMutationsTotal",get:function(){return this.getMutations().length}},{key:"dataStore",get:function(){return new k.c(this.processedMutationData,this.filterApplier,this.config.dataFilters,this.config.selectionFilters,this.config.highlightFilters,this.config.groupFilters)}},{key:"downloadDataFetcher",get:function(){return new S.a(this.mutationData)}},{key:"pdbChainDataStore",get:function(){return new T(this.sortedMergedAlignmentData.filter(function(e){return!v.a.includes(e.pdbId.toLowerCase())}))}},{key:"residueMappingCache",get:function(){return new y}}])&&N(n.prototype,o),d&&N(n,d),t}();B([o.computed],z.prototype,"dataFetcher",null),B([o.computed],z.prototype,"usingPublicOncoKbInstance",null),B([I.default],z.prototype,"getDefaultTumorType",null),B([I.default],z.prototype,"getDefaultEntrezGeneId",null),B([o.computed],z.prototype,"unfilteredMutationsByPosition",null),B([o.computed],z.prototype,"oncoKbDataByProteinPosStart",null),B([o.computed],z.prototype,"mutationsGroupedByProteinImpactType",null),B([o.computed],z.prototype,"processedMutationData",null),B([o.computed],z.prototype,"mergedAlignmentData",null),B([o.computed],z.prototype,"indexedAlignmentData",null),B([o.computed],z.prototype,"sortedMergedAlignmentData",null),B([o.computed],z.prototype,"transcriptsByTranscriptId",null),B([o.computed],z.prototype,"mutationsByTranscriptId",null),B([o.computed],z.prototype,"numberOfMutationsTotal",null),B([i.cached],z.prototype,"dataStore",null),B([i.cached],z.prototype,"downloadDataFetcher",null),B([i.cached],z.prototype,"pdbChainDataStore",null),B([i.cached],z.prototype,"residueMappingCache",null)},function(e,t,n){"use strict";var r=n(178),o=n(571),i=n(4),a=n.n(i);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};function d(e,t){var n=e.studyId?e.studyId:t;return"".concat(n,"~").concat(e.entityId)}function f(e,t,n,o){return p(this,void 0,void 0,regeneratorRuntime.mark(function i(){var s,l,u;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return s=a.a.groupBy(e,"studyId"),l=Object.keys(s),i.next=4,Promise.all(l.map(function(e){return r.a.fetchClinicalDataUsingPOST({clinicalDataType:n,clinicalDataMultiStudyFilter:{attributeIds:t,identifiers:s[e]},projection:o})}));case 4:return u=i.sent,i.abrupt("return",u.map(function(e,t){return{data:e,meta:l[t]}}));case 6:case"end":return i.stop()}},i)}))}var h=function(e){function t(e,n,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,u(t).call(this,d,function(e){return"".concat(e.studyId,"~").concat(e.sampleId)},f,e,n,r))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,o["a"]),t}();function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",function(){return b});var b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),y(this,g(t).call(this,["CANCER_TYPE_DETAILED"],"SAMPLE","SUMMARY"))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,h),t}()},function(e,t,n){"use strict";var r=n(0),o=n(7),i=n(2),a=n(586),s=n(576),l=n(597),u=n(632),c=n.n(u),p=n(4),d=n.n(p),f=1.5,h=3;var m=n(709),y=n(581),g=n(583),v=n(631),b=n(607),S=n(3),_=n(8),w=n(56),E=n(21),O=n(9),C=n.n(O),P=n(584),x=n(694),T=n(695);function k(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var R=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":N(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},L=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},G={min:{stroke:"#999999"},max:{stroke:"#999999"},q1:{fill:"#eeeeee"},q3:{fill:"#eeeeee"},median:{stroke:"#999999",strokeWidth:1}},F=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=D(this,M(t).apply(this,arguments))).scatterPlotTooltipModel=null,e.pointHovered=!1,e.mouseEvents=e.makeMouseEvents(),e.mousePosition={x:0,y:0},e}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,r["Component"]),n=t,(i=[{key:"containerRef",value:function(e){this.container=e}},{key:"makeMouseEvents",value:function(){var e=this,t=null;return[{target:"data",eventHandlers:{onMouseOver:function(){return[{target:"data",mutation:function(n){return e.scatterPlotTooltipModel=n,e.pointHovered=!0,null!==t&&(clearTimeout(t),t=null),{active:!0}}}]},onMouseOut:function(){return[{target:"data",mutation:function(){return null!==t&&clearTimeout(t),t=setTimeout(function(){e.pointHovered=!1},250),{active:!1}}}]}}}]}},{key:"jitter",value:function(e,t){return.2*this.boxWidth*t}},{key:"scatterPlotX",value:function(e){if(this.props.logScale&&this.props.horizontal)return this.props.logScale.fLogScale(e.x,0);var t=0;if(!this.props.horizontal){var n=e.jitter;void 0===n&&(n=Object(g.d)(e.y,[-1,1])),t=this.jitter(e,n)}return e.x+t}},{key:"scatterPlotY",value:function(e){if(this.props.logScale&&!this.props.horizontal)return this.props.logScale.fLogScale(e.y,0);var t=0;if(this.props.horizontal){var n=e.jitter;void 0===n&&(n=Object(g.d)(e.x,[-1,1])),t=this.jitter(e,n)}return e.y+t}},{key:"formatCategoryTick",value:function(e,t){return this.labels[t]}},{key:"formatNumericalTick",value:function(e,t,n){return Object(b.a)(e,n,this.props.logScale&&!this.props.useLogSpaceTicks?this.props.logScale.fInvLogScale:void 0)}},{key:"categoryCoord",value:function(e){return e*(this.boxWidth+this.boxSeparation)}},{key:"onMouseMove",value:function(e){null!==this.boxPlotTooltipModel&&(this.mousePosition.x=e.pageX,this.mousePosition.y=e.pageY)}},{key:"getChart",value:function(){var e,t=this;return r.createElement("div",{ref:this.containerRef,style:{width:this.svgWidth,height:this.svgHeight}},r.createElement("svg",{id:this.props.svgId||"",style:{width:this.svgWidth,height:this.svgHeight,pointerEvents:"all"},height:this.svgHeight,width:this.svgWidth,role:"img",viewBox:"0 0 ".concat(this.svgWidth," ").concat(this.svgHeight),onMouseMove:this.onMouseMove,ref:function(e){t.props.containerRef&&t.props.containerRef(e)}},r.createElement("g",{transform:"translate(".concat(this.leftPadding,", ").concat(this.topPadding,")")},r.createElement(y.VictoryChart,{theme:s.d,width:this.chartWidth,height:this.chartHeight,standalone:!1,domainPadding:this.chartDomainPadding,domain:this.plotDomain,singleQuadrantDomainPadding:(e={},A(e,this.dataAxis,!!this.props.startDataAxisAtZero),A(e,this.categoryAxis,!1),e)},this.title,this.legend,this.horzAxis,this.vertAxis,r.createElement(y.VictoryBoxPlot,{boxWidth:this.boxWidth,style:G,data:this.boxPlotData,horizontal:this.props.horizontal,events:this.boxPlotEvents}),this.scatterPlotData.map(function(e){return r.createElement(y.VictoryScatter,{key:"".concat(e.fill,",").concat(e.stroke,",").concat(e.strokeWidth,",").concat(e.strokeOpacity,",").concat(e.fillOpacity,",").concat(e.symbol),style:{data:{fill:e.fill,stroke:e.stroke,strokeWidth:e.strokeWidth,strokeOpacity:e.strokeOpacity,fillOpacity:e.fillOpacity}},size:t.scatterPlotSize,symbol:e.symbol,data:e.data,events:t.mouseEvents,x:t.scatterPlotX,y:t.scatterPlotY})})))))}},{key:"getScatterPlotTooltip",value:function(){return this.container&&this.scatterPlotTooltipModel&&this.props.scatterPlotTooltip?r.createElement(m.a,{placement:this.props.horizontal?"bottom":"right",container:this.container,targetHovered:this.pointHovered,targetCoords:{x:this.scatterPlotTooltipModel.x+this.leftPadding,y:this.scatterPlotTooltipModel.y+this.topPadding},overlay:this.props.scatterPlotTooltip(this.scatterPlotTooltipModel.datum)}):r.createElement("span",null)}},{key:"getBoxPlotTooltipComponent",value:function(){if(this.container&&this.boxPlotTooltipModel&&this.props.boxPlotTooltip){var e=this.mousePosition.x>P.a.size.width-400?"left":"right";return E.createPortal(r.createElement(w.Popover,{arrowOffsetTop:17,className:C()("cbioportal-frontend","cbioTooltip"),positionLeft:this.mousePosition.x+("left"===e?-8:8),positionTop:this.mousePosition.y-17,style:{transform:"left"===e?"translate(-100%,0%)":void 0,maxWidth:400},placement:e},r.createElement("div",null,this.props.boxPlotTooltip(this.boxPlotTooltipModel.datum))),document.body)}return null}},{key:"render",value:function(){return this.props.data.length?r.createElement("div",null,r.createElement(o.Observer,null,this.getChart),r.createElement(o.Observer,null,this.getScatterPlotTooltip),r.createElement(o.Observer,null,this.getBoxPlotTooltipComponent)):r.createElement("div",{className:"alert alert-info"},"No data to plot.")}},{key:"boxPlotEvents",get:function(){if(this.props.boxPlotTooltip){var e=this;return[{target:["min","max","media","q1","q3"],eventHandlers:{onMouseEnter:function(){return[{mutation:function(t){e.boxPlotTooltipModel=t}}]},onMouseLeave:function(){return[{mutation:function(){e.boxPlotTooltipModel=null}}]}}}]}return[]}},{key:"title",get:function(){if(this.props.title){var e=Object(S.fb)(this.props.title,this.chartWidth,s.b.fontFamily,"".concat(s.b.fontSize,"px"));return r.createElement(y.VictoryLabel,{style:{fontWeight:"bold",fontFamily:s.b.fontFamily,textAnchor:"middle"},x:this.chartWidth/2,y:"1.2em",text:e})}return null}},{key:"chartWidth",get:function(){return this.props.horizontal?this.props.chartBase:this.chartExtent}},{key:"chartHeight",get:function(){return this.props.horizontal?this.chartExtent:this.props.chartBase}},{key:"sideLegendX",get:function(){return this.chartWidth-20}},{key:"legendLocation",get:function(){return void 0!==this.props.legendLocationWidthThreshold&&this.chartWidth>this.props.legendLocationWidthThreshold||this.props.legendData&&this.props.legendData.length>7?"bottom":"right"}},{key:"bottomLegendHeight",get:function(){return this.props.legendData&&this.props.legendData.length&&"bottom"===this.legendLocation?Object(g.c)(this.legendItemsPerRow,this.props.legendData,this.props.legendTitle):0}},{key:"maxLegendLabelWidth",get:function(){return this.props.legendData?Object(g.g)(this.props.legendData):0}},{key:"legendItemsPerRow",get:function(){return Object(g.f)(this.maxLegendLabelWidth,this.svgWidth,45,this.props.legendTitle)}},{key:"legend",get:function(){if(this.props.legendData&&this.props.legendData.length){var e=this.props.legendData;"bottom"===this.legendLocation&&(e=e.map(function(e){var t=e.name,n=L(e,["name"]);return Array.isArray(t)&&(t=t.join(" ")),Object.assign({name:t},n)}));var t="right"===this.legendLocation?"vertical":"horizontal";return r.createElement(y.VictoryLegend,{dataComponent:r.createElement(x.a,{orientation:t}),labelComponent:r.createElement(T.a,{orientation:t}),events:[{childName:"all",target:["data","labels"],eventHandlers:{onClick:function(){return[{target:"data",mutation:function(e){var t=e.data[e.index];t.highlighting&&t.highlighting.onClick(t)}}]}}}],orientation:t,itemsPerRow:"right"===this.legendLocation?void 0:this.legendItemsPerRow,rowGutter:"right"===this.legendLocation?void 0:-5,gutter:"right"===this.legendLocation?void 0:45,data:e,x:"right"===this.legendLocation?this.sideLegendX:0,y:"right"===this.legendLocation?100:this.svgHeight-this.bottomLegendHeight,title:this.props.legendTitle,titleOrientation:"right"===this.legendLocation?"top":"left",style:{title:{fontSize:15,fontWeight:"bold"}},titleComponent:r.createElement(y.VictoryLabel,{dx:"right"===this.legendLocation?0:-10})})}return null}},{key:"plotDomain",get:function(){var e,t,n=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY,o=!0,i=!1,a=void 0;try{for(var s,l=this.props.data[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var u=s.value,c=!0,p=!1,d=void 0;try{for(var f,h=u.data[Symbol.iterator]();!(c=(f=h.next()).done);c=!0){var m=f.value;n=Math.max(m.value,n),r=Math.min(m.value,r)}}catch(e){p=!0,d=e}finally{try{c||null==h.return||h.return()}finally{if(p)throw d}}}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}this.props.logScale&&(r=this.props.logScale.fLogScale(r,0),n=this.props.logScale.fLogScale(n,0)),this.props.startDataAxisAtZero&&(r=Math.min(0,r));var y=[r,n],g=[this.categoryCoord(0),this.categoryCoord(Math.max(1,this.props.data.length-1))];return this.props.horizontal?(e=y,t=g):(e=g,t=y),{x:e,y:t}}},{key:"categoryAxisDomainPadding",get:function(){return Math.max(this.boxWidth/2+30,this.domainPadding)}},{key:"dataAxisDomainPadding",get:function(){return this.domainPadding}},{key:"domainPadding",get:function(){return void 0===this.props.domainPadding?100:this.props.domainPadding}},{key:"dataAxis",get:function(){return this.props.horizontal?"x":"y"}},{key:"categoryAxis",get:function(){return this.props.horizontal?"y":"x"}},{key:"chartDomainPadding",get:function(){var e;return A(e={},this.dataAxis,this.dataAxisDomainPadding),A(e,this.categoryAxis,this.categoryAxisDomainPadding),e}},{key:"chartExtent",get:function(){var e=this.props.data.length;return this.categoryCoord(e-1)+2*this.categoryAxisDomainPadding+100}},{key:"svgWidth",get:function(){return this.leftPadding+this.chartWidth+this.rightPadding}},{key:"svgHeight",get:function(){return this.topPadding+this.chartHeight+this.bottomPadding}},{key:"boxSeparation",get:function(){return.5*this.boxWidth}},{key:"boxWidth",get:function(){return this.props.boxWidth||10}},{key:"scatterPlotSize",get:function(){var e=this.props.highlight,t=this.props.size;return Object(g.i)(e,t)}},{key:"labels",get:function(){var e=this;return this.props.data.map(function(t){return e.props.compressXAxis?Object(S.cb)(t.label,50,s.b.fontFamily,s.b.fontSize+"px"):t.label})}},{key:"horzAxis",get:function(){return r.createElement(y.VictoryAxis,{style:{grid:{strokeOpacity:1}},orientation:"bottom",offsetY:50,crossAxis:!1,label:this.props.axisLabelX,tickValues:this.props.horizontal?void 0:this.categoryTickValues,tickCount:this.props.horizontal?8:void 0,tickFormat:this.props.horizontal?this.formatNumericalTick:this.formatCategoryTick,tickLabelComponent:r.createElement(y.VictoryLabel,{angle:this.props.compressXAxis||this.props.horizontal?void 0:50,verticalAnchor:this.props.compressXAxis||this.props.horizontal?void 0:"start",textAnchor:this.props.compressXAxis||this.props.horizontal?void 0:"start"}),axisLabelComponent:r.createElement(y.VictoryLabel,{dy:this.props.compressXAxis||this.props.horizontal?35:this.biggestCategoryLabelSize+24})})}},{key:"yAxisLabel",get:function(){return this.props.axisLabelY?Object(S.fb)(this.props.axisLabelY,this.chartHeight-20,s.b.fontFamily,"".concat(s.b.fontSize,"px")):[]}},{key:"yAxisLabelVertOffset",get:function(){return this.props.horizontal?-1*this.biggestCategoryLabelSize-24:this.yAxisLabel.length>1?-30:-50}},{key:"vertAxis",get:function(){return r.createElement(y.VictoryAxis,{orientation:"left",offsetX:50,crossAxis:!1,label:this.yAxisLabel,dependentAxis:!0,tickValues:this.props.horizontal?this.categoryTickValues:void 0,tickCount:this.props.horizontal?void 0:8,tickFormat:this.props.horizontal?this.formatCategoryTick:this.formatNumericalTick,axisLabelComponent:r.createElement(y.VictoryLabel,{dy:this.yAxisLabelVertOffset})})}},{key:"scatterPlotData",get:function(){for(var e=this.props.horizontal?"x":"y",t=this.props.horizontal?"y":"x",n=[],r=0;r<this.props.data.length;r++){var o=this.categoryCoord(r),i=!0,a=!1,s=void 0;try{for(var u,c=this.props.data[r].data[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var p,d=u.value;n.push(Object.assign({},d,(A(p={},e,d.value),A(p,t,o),p)))}}catch(e){a=!0,s=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw s}}}return Object(g.l)(n,Object(l.a)(this.props.fill,"0x000000"),Object(l.a)(this.props.stroke,"0x000000"),Object(l.a)(this.props.strokeWidth,0),Object(l.a)(this.props.strokeOpacity,1),Object(l.a)(this.props.fillOpacity,1),Object(l.a)(this.props.symbol,"circle"),this.props.zIndexSortBy)}},{key:"leftPadding",get:function(){return this.props.horizontal?this.biggestCategoryLabelSize:25}},{key:"topPadding",get:function(){return 0}},{key:"rightPadding",get:function(){return this.props.legendData&&this.props.legendData.length>0&&"right"===this.legendLocation?Math.max(130,this.maxLegendLabelWidth+50):130}},{key:"bottomPadding",get:function(){var e=10,t=0;return this.props.horizontal||(e=this.props.compressXAxis?20:this.biggestCategoryLabelSize),"bottom"===this.legendLocation&&(t=this.bottomLegendHeight+15),e+t}},{key:"biggestCategoryLabelSize",get:function(){var e=Math.max.apply(Math,k(this.labels.map(function(e){return Object(S.L)(e,s.b.fontFamily,s.b.fontSize+"px")})));return this.props.compressXAxis||this.props.horizontal?e:e*Math.abs(Math.sin(Math.PI/180*50))}},{key:"categoryTickValues",get:function(){var e=this;return this.props.data.map(function(t,n){return e.categoryCoord(n)})}},{key:"boxPlotData",get:function(){var e=this,t=this.props.boxCalculationFilter,n=d.a.cloneDeep(this.props.data);return this.props.excludeLimitValuesFromBoxPlot&&d.a.each(n,function(e){e.data=d.a.filter(e.data,function(e){return!Object(g.b)(e)})}),n.map(function(n){return r=n.data.reduce(function(n,r){return(!t||t&&t(r))&&(e.props.logScale?n.push(e.props.logScale.fLogScale(r.value,0)):n.push(r.value)),n},[]),o=p.sortBy(r,[function(e){return e}]),i=c.a.quartiles(o),a=c.a.median(o),s=i[0],l=i[1],u=i[2],d=u-s,m=o[o.length-1],y=o[0],b=function(e,t,n,r,o){return e.reduce(function(e,i){return i>=t&&(i<n?e.upper.suspectedOutliers.push(i):e.upper.outliers.push(i)),i<=r&&(i>o?e.lower.suspectedOutliers.push(i):e.lower.outliers.push(i)),e},{upper:{outliers:[],suspectedOutliers:[]},lower:{outliers:[],suspectedOutliers:[]}})}(o,v=u+f*d,u+h*d,g=s-f*d,s-h*d),S=b.lower.suspectedOutliers.length>0||b.lower.outliers.length>0?g:o[0],{q1:s,q2:l,q3:u,IQR:d,median:a,whiskerUpper:b.upper.suspectedOutliers.length>0||b.upper.outliers.length>0?v:o[o.length-1],whiskerLower:S,max:m,min:y,outliersUpper:b.upper,outliersLower:b.lower};var r,o,i,a,s,l,u,d,m,y,g,v,b,S}).map(function(t,n){var r={min:t.whiskerLower,max:t.whiskerUpper,median:t.median,q1:t.q1,q3:t.q3};return e.props.horizontal?r.y=e.categoryCoord(n):r.x=e.categoryCoord(n),r}).filter(function(e){return Object(v.a)(["min","max","median","q1","q3"].map(function(t){return!isNaN(e[t])}))})}}])&&I(n.prototype,i),a&&I(n,a),t}();R([i.observable.ref],F.prototype,"scatterPlotTooltipModel",void 0),R([i.observable],F.prototype,"pointHovered",void 0),R([i.observable.ref],F.prototype,"container",void 0),R([i.observable.ref],F.prototype,"boxPlotTooltipModel",void 0),R([i.observable],F.prototype,"mousePosition",void 0),R([a.bind],F.prototype,"containerRef",null),R([i.computed],F.prototype,"chartWidth",null),R([i.computed],F.prototype,"chartHeight",null),R([i.computed],F.prototype,"sideLegendX",null),R([i.computed],F.prototype,"legendLocation",null),R([i.computed],F.prototype,"bottomLegendHeight",null),R([i.computed],F.prototype,"maxLegendLabelWidth",null),R([i.computed],F.prototype,"legendItemsPerRow",null),R([i.computed],F.prototype,"plotDomain",null),R([i.computed],F.prototype,"categoryAxisDomainPadding",null),R([i.computed],F.prototype,"dataAxisDomainPadding",null),R([i.computed],F.prototype,"domainPadding",null),R([i.computed],F.prototype,"dataAxis",null),R([i.computed],F.prototype,"categoryAxis",null),R([i.computed],F.prototype,"chartDomainPadding",null),R([i.computed],F.prototype,"chartExtent",null),R([i.computed],F.prototype,"svgWidth",null),R([i.computed],F.prototype,"svgHeight",null),R([i.computed],F.prototype,"boxSeparation",null),R([i.computed],F.prototype,"boxWidth",null),R([a.bind],F.prototype,"scatterPlotX",null),R([a.bind],F.prototype,"scatterPlotY",null),R([i.computed],F.prototype,"scatterPlotSize",null),R([i.computed],F.prototype,"labels",null),R([a.bind],F.prototype,"formatCategoryTick",null),R([a.bind],F.prototype,"formatNumericalTick",null),R([i.computed],F.prototype,"horzAxis",null),R([i.computed],F.prototype,"yAxisLabel",null),R([i.computed],F.prototype,"yAxisLabelVertOffset",null),R([i.computed],F.prototype,"vertAxis",null),R([i.computed],F.prototype,"scatterPlotData",null),R([i.computed],F.prototype,"leftPadding",null),R([i.computed],F.prototype,"topPadding",null),R([i.computed],F.prototype,"rightPadding",null),R([i.computed],F.prototype,"bottomPadding",null),R([i.computed],F.prototype,"biggestCategoryLabelSize",null),R([i.computed],F.prototype,"categoryTickValues",null),R([i.computed],F.prototype,"boxPlotData",null),R([_.default,i.action],F.prototype,"onMouseMove",null),R([_.default],F.prototype,"getChart",null),R([_.default],F.prototype,"getScatterPlotTooltip",null),R([_.default],F.prototype,"getBoxPlotTooltipComponent",null),F=R([o.observer],F);t.a=F},function(e){e.exports=["ABCB1","ABCB6","ACACA","ACAT1","ACE","ACLY","ACOT4","ACP1","ACTA2","ACVR1","ACVR1B","ADAM19","ADCY5","ADGRB2","ADSSL1","AHSA1","AIFM3","AKR7L","AKT1","AKT2","AKT3","ALK","ALOX15B","AMT","AMY1A","AMY1C","AMY2A","ANK1","ANKLE2","ANKRD11","ANKRD30B","ANOS1","ANXA6","AOC1","AP5B1","APCS","APLP1","APOC1","AR","ARAF","ARHGAP32","ARID1A","ARID1B","ARID2","ARNTL","ASMT","ASXL2","ATM","ATP1A2","ATP1A3","ATP4A","ATP7A","ATRX","ATXN1","AXIN1","AXL","B2M","BACH2","BAP1","BAX","BCL10","BCL2","BCL2L11","BCL6","BCOR","BRAF","BRCA2","BRD4","BTNL3","C10ORF71","C2","C2ORF16","C3","CABP1","CACNA1B","CACNA1E","CALM1","CAMK1","CAMK2D","CAND1","CAPN1","CAPNS1","CARD11","CARM1","CASP1","CASP6","CASP7","CASP8","CBFB","CBL","CCL7","CCND1","CCND3","CCT3","CD300C","CD79B","CD81","CDH1","CDK12","CDK2","CDK4","CDK6","CDK8","CDK9","CDKN1A","CDKN1B","CDKN2A","CDKN2C","CEBPA","CENPA","CENPE","CEP164","CFH","CFHR3","CFL1","CHEK2","CHN2","CIAO1","CIC","CLASP1","CLTC","CLTCL1","CNTN2","COL22A1","COL3A1","COLEC11","COPE","CPB2","CR1","CR1L","CRABP2","CREBBP","CRLF2","CRY1","CSF1","CSF3","CSNK1G1","CST6","CTCF","CTCFL","CTLA4","CTNNB1","CTPS1","CTSD","CTSL","CUL1","CUL3","CUL5","CYP2A6","CYSLTR2","DAXX","DCC","DCLRE1B","DCN","DDC","DDX19A","DDX39B","DDX3X","DICER1","DIS3","DLC1","DLG4","DLX5","DNAJB1","DNAJC6","DNM2","DNMT1","DNMT3A","DNMT3B","DOCK6","DOCK8","DOT1L","DPP4","DPP6","DPYSL3","DUSP8","DUSP9","E2F5","ECHDC3","ECT2L","EEF1A1","EEF1G","EGFR","EGR3","EHMT1","EIF1AX","EIF2AK2","EIF4A2","ENPP6","EP300","EPAS1","EPHA1","EPHA7","EPHB1","EPHB2","EPS15L1","ERBB2","ERBB2IP","ERBB3","ERBB4","ERCC2","ERCC3","ERG","ERRFI1","ESR1","ESYT2","ETS2","ETV6","EZH2","F11R","F7","FAM58A","FAT1","FBXO44","FBXW7","FDX1","FGF1","FGF9","FGFR1","FGFR2","FGFR3","FGFR4","FGG","FH","FHL5","FKBP14","FKBP5","FLNA","FLNB","FLT1","FLT3","FMNL3","FOXA1","FOXL2","FOXO1","FOXP1","FUBP1","GABPA","GAS2L3","GATA1","GATA2","GATA3","GCSH","GGA2","GLI1","GLRX2","GNA11","GNAI3","GNAQ","GNAS","GOLGA2","GPAM","GPS2","GPT2","GRB2","GRIA2","GRM1","GSG2","GSK3B","GTF2I","GUCA1A","GUCY1B3","H2AFJ","H3F3A","HBA2","HDAC1","HDAC3","HDAC6","HDAC8","HES1","HGF","HGFAC","HIC2","HIST1H1C","HIST1H2AE","HIST1H2AH","HIST1H2BB","HIST1H2BC","HIST1H2BD","HIST1H2BE","HIST1H2BH","HIST1H2BI","HIST1H2BL","HIST1H3B","HIST1H3C","HIST1H3E","HIST1H3G","HIST1H3H","HIST1H4E","HIST1H4J","HIST1H4K","HIST1H4L","HIST2H3D","HIST4H4","HLA-A","HLA-B","HLA-DQA1","HNF1A","HNRNPH2","HRAS","HSD17B10","IDH1","IDH2","IFIT1","IFNLR1","IGF1R","IGFBP3","IKZF1","IL13RA2","IL18R1","IL21R","IL6ST","IL7R","ING2","INHBA","INPP4A","INPPL1","IQUB","IRF3","IRF4","IRS2","ISPD","ITFG1","ITGA1","ITGA4","ITGAM","ITGB1","ITGB2","ITPR2","JAK1","JPH2","JUN","KCNA3","KCNH5","KDM4B","KDM5C","KDM6A","KDR","KEAP1","KIAA0586","KIF1A","KIFC1","KIT","KLF4","KLHL3","KMT2C","KMT2D","KNSTRN","KPNB1","KRAS","KRT5","LATS2","LCAT","LCMT1","LDB1","LDB2","LDLRAP1","LGALS1","LGALS9","LHX6","LILRB2","LRRC3B","LRRC55","LYN","MAGIX","MAP1B","MAP2K1","MAP2K2","MAP2K4","MAP2K5","MAP3K1","MAP3K13","MAPK1","MASP1","MASP2","MATN3","MAX","MCF2","MDC1","MDFIC","MDGA2","MECOM","MED12","MEF2B","MET","MGAT1","MKI67","MKX","MLST8","MMEL1","MNDA","MOB1B","MRPL11","MRPL3","MST1","MTOR","MYC","MYCN","MYD88","MYO10","MYOD1","MYOM1","MZF1","NCF1","NCKAP1L","NCOA3","NCS1","NDST3","NEBL","NEDD8","NEIL1","NF1","NFE2L2","NGFR","NME3","NMT1","NONO","NOTCH1","NOTCH2","NRAS","NSD1","NUF2","NUP93","OXSM","OXSR1","PACSIN1","PACSIN3","PAK7","PARD3","PARP1","PAX5","PAXIP1","PBRM1","PCBD2","PCBP1","PCDH15","PCDHA4","PCDHB13","PCDHB8","PDE11A","PDGFRA","PDPK1","PDXP","PECR","PGR","PIK3CA","PIK3CB","PIK3CD","PIK3R1","PIK3R2","PIM1","PIWIL2","PLEK","PLEKHA6","PLEKHH1","PLEKHH2","PLG","PLK2","PLXNB1","PMS2","POLE","POLH","POLI","POLM","POR","POTEE","POTEF","PPARG","PPFIA3","PPIP5K2","PPP2R1A","PPP3CA","PPP4R2","PPP6C","PRDM14","PRELID1","PREX2","PRKCB","PRKCI","PRLR","PROCR","PRPF31","PRUNE2","PSAP","PSMB3","PTBP2","PTEN","PTK2B","PTP4A1","PTPN1","PTPN11","PTPRD","PTPRF","PTPRR","PTPRS","PTPRT","PUM1","PYGM","RAB30","RAB33B","RABGAP1L","RAC1","RAD50","RAD51C","RAD52","RAF1","RALYL","RANBP6","RARA","RB1","RBBP7","RBM10","RBM46","RBMS3","RBP2","RBP4","RBP7","RECQL","RECQL4","RELA","RET","RGAG4","RGPD3","RGS6","RHCG","RHEB","RHOA","RICTOR","RIT1","RNF111","RNF41","RNF43","RNF7","RORC","RPRD1B","RPS6KA3","RPS6KA4","RPS6KB1","RPTOR","RQCD1","RRAS2","RUNX1","RXRA","RYR2","S100A14","S100A2","S100A3","SALL3","SDC3","SDHA","SDHAF2","SDR39U1","SELE","SERPINB3","SESN2","SETBP1","SETD2","SF3B1","SH3GL1","SH3GLB2","SHROOM4","SIRT3","SLC12A2","SLC25A11","SLC25A4","SLC25A5","SLFNL1","SLIT2","SMAD2","SMAD3","SMAD4","SMARCA4","SMARCB1","SMARCC2","SMARCD1","SMC1A","SMG7","SMO","SMURF2","SNAP29","SNRNP200","SNRPD3","SNRPN","SNX17","SOCS1","SOCS5","SORL1","SOS1","SOX17","SOX6","SOX9","SPEG","SPON2","SPOP","SPRED1","SRM","SRP9","SRSF2","SSBP1","STARD5","STAT3","STIM1","STK11","STK19","STK24","SUMO3","SUPT5H","SYK","SYT14","SYT7","TAF4B","TBK1","TBL1XR1","TCEB1","TCEB2","TCF21","TCF3","TCF7L2","TDRD7","TEAD2","TET1","TF","TGFBI","TGFBR1","TGFBR2","TH","THADA","THBS2","THRA","THRB","TICAM1","TIGD1","TMPRSS11E","TNFRSF14","TNFSF18","TNR","TOPBP1","TOX","TP53","TP53I3","TP63","TRAF2","TRAF7","TRAP1","TRIM24","TRIM9","TRPV1","TSC1","TSG101","TTC14","TTK","TUBA3D","TUBB2A","TUBB2B","TUBB4A","TXNL4A","U2AF1","UBE2E2","UGP2","UNC5C","UNC79","UQCRFS1","USH1C","USP5","UVSSA","VCL","VHL","VIM","WDR75","WHSC1","WRN","XPO1","ZEB2","ZIC1","ZNF320","ZNF443","ZNF484","ZNF548","ZNF572","ZNF658","ZNF664","ZNF777","ZNF98","ZSCAN16"]},function(e,t,n){},function(e,t,n){e.exports={portalWidth:"paginationControls-module__portalWidth__2gIaM",framedImage:"paginationControls-module__framedImage__2QU5w","default-cursor":"paginationControls-module__default-cursor__3qNcu","form-select":"paginationControls-module__form-select__3-BhF","page-number-input":"paginationControls-module__page-number-input__2DGhO",paginationControls:"paginationControls-module__paginationControls__MF0uG","margin-right-button":"paginationControls-module__margin-right-button__3tzhL","margin-left-button":"paginationControls-module__margin-left-button__1rLFR","hidden-button":"paginationControls-module__hidden-button__2mt4l"}},function(e,t,n){"use strict";n.d(t,"a",function(){return S});var r=n(0),o=n(56),i=n(629),a=n(126),s=n.n(a),l=n(2),u=n(7),c=n(655),p=n.n(c),d=n(656);function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var v=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":g(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},b=n(613),S=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=h(t).call(this,e))||"object"!==g(o)&&"function"!=typeof o?m(r):o).downloadingData=!1,n.copyingData=!1,n.showErrorMessage=!1,n.showTooltipCopyMessage=!1,n._copyButton=null,n._modalCopyButton=null,n._modalCopyButtonContainer=null,n._copyText=null,n.handleDownload=n.handleDownload.bind(m(n)),n.handleCopy=n.handleCopy.bind(m(n)),n.handleModalClose=n.handleModalClose.bind(m(n)),n}var n,a,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){this.props.showCopy&&this.bindCopyButton(this._copyButton)}},{key:"bindCopyButton",value:function(e,t){e&&new b(e,{text:this.getText.bind(this),container:t})}},{key:"render",value:function(){var e=this;return r.createElement("span",null,r.createElement(d.a,{className:this.props.className,showCopy:this.props.showCopy,showCopyMessage:this.showTooltipCopyMessage,showDownload:this.props.showDownload,copyLabel:this.props.copyLabel,downloadLabel:this.props.downloadLabel,handleDownload:this.handleDownload,handleCopy:this.handleCopy,copyButtonRef:function(t){e._copyButton=t}}),this.downloadIndicatorModal(),this.copyIndicatorModal(),this.downloadErrorModal())}},{key:"downloadIndicatorModal",value:function(){return r.createElement(o.Modal,{show:this.downloadingData,onHide:function(){},bsSize:"sm",className:"".concat(p.a["centered-modal-dialog"])},r.createElement(o.Modal.Body,null,r.createElement(i.ThreeBounce,{style:{display:"inline-block",marginRight:10}}),r.createElement("span",null,"Downloading Table Data...")))}},{key:"copyIndicatorModal",value:function(){var e=this;return r.createElement(o.Modal,{show:this.copyingData,onHide:function(){},onEntered:function(){e.bindCopyButton(e._modalCopyButton,e._modalCopyButtonContainer)},bsSize:"sm",className:"".concat(p.a["centered-modal-dialog"])},r.createElement(o.Modal.Header,null,this.showErrorMessage?"Copy Error!":"Copy Ready!"),r.createElement(o.Modal.Body,null,this.showErrorMessage&&"An error occurred while copying the data. Data may be incomplete.","Please click on Copy to copy the data to clipboard."),r.createElement(o.Modal.Footer,null,r.createElement("span",{ref:function(t){e._modalCopyButtonContainer=t}},r.createElement("button",{ref:function(t){e._modalCopyButton=t},onClick:this.handleModalClose,className:"btn btn-primary","data-clipboard-text":"NA",id:"modalCopyButton"},"Copy"))))}},{key:"downloadErrorModal",value:function(){return r.createElement(o.Modal,{show:!this.copyingData&&this.showErrorMessage,onHide:this.handleModalClose,bsSize:"sm",className:"".concat(p.a["centered-modal-dialog"])},r.createElement(o.Modal.Header,null,"Download Error!"),r.createElement(o.Modal.Body,null,"An error occurred while downloading the data. Downloaded file may contain incomplete data."),r.createElement(o.Modal.Footer,null,r.createElement(o.Button,{onClick:this.handleModalClose,className:"btn btn-primary"},"Close")))}},{key:"getText",value:function(){return this._copyText||""}},{key:"handleCopy",value:function(){this.initCopyProcess()}},{key:"initCopyProcess",value:function(){var e=this;this.initDownloadProcess(function(t){e._copyText!==t?(e._copyText=t,e.copyingData=!0):e.showSimpleCopyMessage()})}},{key:"handleDownload",value:function(){var e=this;this.initDownloadProcess(function(t){e._copyText=t,e.download(t)})}},{key:"initDownloadProcess",value:function(e){var t=this;this.props.downloadData&&(this.downloadingData=!0,this.props.downloadData().then(function(n){"complete"===n.status?t.downloadingData=!1:t.triggerDownloadError(),e(n.text)}).catch(function(){t.triggerDownloadError()}))}},{key:"download",value:function(e){s()(e,this.props.downloadFilename)}},{key:"handleModalClose",value:function(){this.copyingData=!1,this.showErrorMessage=!1}},{key:"triggerDownloadError",value:function(){this.downloadingData=!1,this.showErrorMessage=!0}},{key:"showSimpleCopyMessage",value:function(){var e=this;this.showTooltipCopyMessage=!0,setTimeout(function(){e.showTooltipCopyMessage=!1},this.props.copyMessageDuration)}}])&&f(n.prototype,a),l&&f(n,l),t}();S.defaultProps={className:"",copyMessageDuration:3e3,showCopy:!0,showDownload:!0,downloadFilename:"data.tsv"},v([l.observable],S.prototype,"downloadingData",void 0),v([l.observable],S.prototype,"copyingData",void 0),v([l.observable],S.prototype,"showErrorMessage",void 0),v([l.observable],S.prototype,"showTooltipCopyMessage",void 0),v([l.action],S.prototype,"handleModalClose",null),v([l.action],S.prototype,"triggerDownloadError",null),v([l.action],S.prototype,"showSimpleCopyMessage",null),S=v([u.observer],S)},,function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__QOSi2",framedImage:"styles-module__framedImage__1dzkM",virtualStudy:"styles-module__virtualStudy__U7f0-",virtualStudyForm:"styles-module__virtualStudyForm__24Vwu",saveButton:"styles-module__saveButton__272LI",studiesSummaryInfo:"styles-module__studiesSummaryInfo__3ewzF",result:"styles-module__result__1BQ9F",name:"styles-module__name__3bVye",controls:"styles-module__controls__31KcC",disabled:"styles-module__disabled__M8SEC",studySummary:"styles-module__studySummary__3Tls0",studyName:"styles-module__studyName__3U1tn",studyDescription:"styles-module__studyDescription__1tQcY"}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(603);function o(e,t){return t===r.b?0:Math.floor(Math.max(e-1,0)/t)}},function(e,t,n){e.exports=n(16)(41)},function(e){e.exports=[{sampleId:"P-0004910-T01-IM5",uniqueSampleKey:"P-0004910-T01-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_1",value:.341339866,confidence:.863,numberOfMutationsForSample:28},{sampleId:"P-0004910-T01-IM5",uniqueSampleKey:"P-0004910-T01-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_2",value:972538e-9,confidence:.004,numberOfMutationsForSample:28},{sampleId:"P-0004910-T01-IM5",uniqueSampleKey:"P-0004910-T01-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_3",value:.001913222,confidence:.0155,numberOfMutationsForSample:28},{sampleId:"P-0004910-T01-IM5",uniqueSampleKey:"P-0004910-T01-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_4",value:.003620254,confidence:.0335,numberOfMutationsForSample:28},{sampleId:"P-0004910-T01-IM5",uniqueSampleKey:"P-0004910-T01-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_5",value:.001418568,confidence:.005,numberOfMutationsForSample:28},{sampleId:"P-0004910-T01-IM5",uniqueSampleKey:"P-0004910-T01-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_6",value:.006080752,confidence:.059,numberOfMutationsForSample:28},{sampleId:"P-0004910-T01-IM5",uniqueSampleKey:"P-0004910-T01-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_7",value:.00451735,confidence:.043,numberOfMutationsForSample:28},{sampleId:"P-0004910-T01-IM5",uniqueSampleKey:"P-0004910-T01-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_8",value:.001704592,confidence:.017,numberOfMutationsForSample:28},{sampleId:"P-0004910-T01-IM5",uniqueSampleKey:"P-0004910-T01-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_9",value:951258e-9,confidence:.0055,numberOfMutationsForSample:28},{sampleId:"P-0004910-T01-IM5",uniqueSampleKey:"P-0004910-T01-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_10",value:.001870896,confidence:.0145,numberOfMutationsForSample:28},{sampleId:"P-0004910-T01-IM5",uniqueSampleKey:"P-0004910-T01-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_11",value:.005068029,confidence:.0485,numberOfMutationsForSample:28},{sampleId:"P-0004910-T01-IM5",uniqueSampleKey:"P-0004910-T01-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_12",value:982892e-9,confidence:.003,numberOfMutationsForSample:28},{sampleId:"P-0004910-T01-IM5",uniqueSampleKey:"P-0004910-T01-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_13",value:.002622727,confidence:.024,numberOfMutationsForSample:28},{sampleId:"P-0004910-T01-IM5",uniqueSampleKey:"P-0004910-T01-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_14",value:.084106761,confidence:.702,numberOfMutationsForSample:28},{sampleId:"P-0004910-T01-IM5",uniqueSampleKey:"P-0004910-T01-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_15",value:826186e-9,confidence:.0025,numberOfMutationsForSample:28},{sampleId:"P-0004910-T01-IM5",uniqueSampleKey:"P-0004910-T01-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_16",value:.001429341,confidence:.0085,numberOfMutationsForSample:28},{sampleId:"P-0004910-T01-IM5",uniqueSampleKey:"P-0004910-T01-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_17",value:823673e-9,confidence:.004,numberOfMutationsForSample:28},{sampleId:"P-0004910-T01-IM5",uniqueSampleKey:"P-0004910-T01-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_18",value:.002915391,confidence:.028,numberOfMutationsForSample:28},{sampleId:"P-0004910-T01-IM5",uniqueSampleKey:"P-0004910-T01-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_19",value:.007484683,confidence:.0715,numberOfMutationsForSample:28},{sampleId:"P-0004910-T01-IM5",uniqueSampleKey:"P-0004910-T01-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_20",value:572061e-9,confidence:0,numberOfMutationsForSample:28},{sampleId:"P-0004910-T01-IM5",uniqueSampleKey:"P-0004910-T01-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_21",value:.00198798,confidence:.0145,numberOfMutationsForSample:28},{sampleId:"P-0004910-T01-IM5",uniqueSampleKey:"P-0004910-T01-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_22",value:.001096651,confidence:.008,numberOfMutationsForSample:28},{sampleId:"P-0004910-T01-IM5",uniqueSampleKey:"P-0004910-T01-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_23",value:.004016701,confidence:.0425,numberOfMutationsForSample:28},{sampleId:"P-0004910-T01-IM5",uniqueSampleKey:"P-0004910-T01-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_24",value:.001632676,confidence:.01,numberOfMutationsForSample:28},{sampleId:"P-0004910-T01-IM5",uniqueSampleKey:"P-0004910-T01-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_25",value:997686e-9,confidence:.0045,numberOfMutationsForSample:28},{sampleId:"P-0004910-T01-IM5",uniqueSampleKey:"P-0004910-T01-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_26",value:.00308292,confidence:.033,numberOfMutationsForSample:28},{sampleId:"P-0004910-T01-IM5",uniqueSampleKey:"P-0004910-T01-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_27",value:.503912181,confidence:.9955,numberOfMutationsForSample:28},{sampleId:"P-0004910-T01-IM5",uniqueSampleKey:"P-0004910-T01-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_28",value:.003044077,confidence:.027,numberOfMutationsForSample:28},{sampleId:"P-0004910-T01-IM5",uniqueSampleKey:"P-0004910-T01-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_29",value:.007111733,confidence:.075,numberOfMutationsForSample:28},{sampleId:"P-0004910-T01-IM5",uniqueSampleKey:"P-0004910-T01-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_30",value:.001896354,confidence:.0155,numberOfMutationsForSample:28},{sampleId:"P-0004910-T02-IM5",uniqueSampleKey:"P-0004910-T02-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_1",value:.151243448,confidence:.27,numberOfMutationsForSample:6},{sampleId:"P-0004910-T02-IM5",uniqueSampleKey:"P-0004910-T02-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_2",value:.003879945,confidence:.0325,numberOfMutationsForSample:6},{sampleId:"P-0004910-T02-IM5",uniqueSampleKey:"P-0004910-T02-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_3",value:.005419738,confidence:.047,numberOfMutationsForSample:6},{sampleId:"P-0004910-T02-IM5",uniqueSampleKey:"P-0004910-T02-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_4",value:.008507836,confidence:.055,numberOfMutationsForSample:6},{sampleId:"P-0004910-T02-IM5",uniqueSampleKey:"P-0004910-T02-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_5",value:.00363819,confidence:.033,numberOfMutationsForSample:6},{sampleId:"P-0004910-T02-IM5",uniqueSampleKey:"P-0004910-T02-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_6",value:.010844139,confidence:.061,numberOfMutationsForSample:6},{sampleId:"P-0004910-T02-IM5",uniqueSampleKey:"P-0004910-T02-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_7",value:.034512153,confidence:.1245,numberOfMutationsForSample:6},{sampleId:"P-0004910-T02-IM5",uniqueSampleKey:"P-0004910-T02-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_8",value:.009953293,confidence:.0745,numberOfMutationsForSample:6},{sampleId:"P-0004910-T02-IM5",uniqueSampleKey:"P-0004910-T02-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_9",value:.003466513,confidence:.025,numberOfMutationsForSample:6},{sampleId:"P-0004910-T02-IM5",uniqueSampleKey:"P-0004910-T02-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_10",value:.007610197,confidence:.0585,numberOfMutationsForSample:6},{sampleId:"P-0004910-T02-IM5",uniqueSampleKey:"P-0004910-T02-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_11",value:.012576643,confidence:.0695,numberOfMutationsForSample:6},{sampleId:"P-0004910-T02-IM5",uniqueSampleKey:"P-0004910-T02-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_12",value:.003347933,confidence:.0305,numberOfMutationsForSample:6},{sampleId:"P-0004910-T02-IM5",uniqueSampleKey:"P-0004910-T02-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_13",value:.018327265,confidence:.0885,numberOfMutationsForSample:6},{sampleId:"P-0004910-T02-IM5",uniqueSampleKey:"P-0004910-T02-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_14",value:.008894914,confidence:.0565,numberOfMutationsForSample:6},{sampleId:"P-0004910-T02-IM5",uniqueSampleKey:"P-0004910-T02-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_15",value:.003358317,confidence:.0285,numberOfMutationsForSample:6},{sampleId:"P-0004910-T02-IM5",uniqueSampleKey:"P-0004910-T02-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_16",value:.008302825,confidence:.062,numberOfMutationsForSample:6},{sampleId:"P-0004910-T02-IM5",uniqueSampleKey:"P-0004910-T02-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_17",value:.006159875,confidence:.052,numberOfMutationsForSample:6},{sampleId:"P-0004910-T02-IM5",uniqueSampleKey:"P-0004910-T02-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_18",value:.006076796,confidence:.0505,numberOfMutationsForSample:6},{sampleId:"P-0004910-T02-IM5",uniqueSampleKey:"P-0004910-T02-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_19",value:.014221547,confidence:.088,numberOfMutationsForSample:6},{sampleId:"P-0004910-T02-IM5",uniqueSampleKey:"P-0004910-T02-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_20",value:.004388324,confidence:.034,numberOfMutationsForSample:6},{sampleId:"P-0004910-T02-IM5",uniqueSampleKey:"P-0004910-T02-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_21",value:.003052651,confidence:.0285,numberOfMutationsForSample:6},{sampleId:"P-0004910-T02-IM5",uniqueSampleKey:"P-0004910-T02-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_22",value:.00959173,confidence:.0665,numberOfMutationsForSample:6},{sampleId:"P-0004910-T02-IM5",uniqueSampleKey:"P-0004910-T02-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_23",value:.006974826,confidence:.0525,numberOfMutationsForSample:6},{sampleId:"P-0004910-T02-IM5",uniqueSampleKey:"P-0004910-T02-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_24",value:.004176428,confidence:.0355,numberOfMutationsForSample:6},{sampleId:"P-0004910-T02-IM5",uniqueSampleKey:"P-0004910-T02-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_25",value:.00535034,confidence:.0445,numberOfMutationsForSample:6},{sampleId:"P-0004910-T02-IM5",uniqueSampleKey:"P-0004910-T02-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_26",value:.009369821,confidence:.0615,numberOfMutationsForSample:6},{sampleId:"P-0004910-T02-IM5",uniqueSampleKey:"P-0004910-T02-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_27",value:.617882475,confidence:.812,numberOfMutationsForSample:6},{sampleId:"P-0004910-T02-IM5",uniqueSampleKey:"P-0004910-T02-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_28",value:.0036165,confidence:.031,numberOfMutationsForSample:6},{sampleId:"P-0004910-T02-IM5",uniqueSampleKey:"P-0004910-T02-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_29",value:.008800631,confidence:.059,numberOfMutationsForSample:6},{sampleId:"P-0004910-T02-IM5",uniqueSampleKey:"P-0004910-T02-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_30",value:.006454707,confidence:.052,numberOfMutationsForSample:6},{sampleId:"P-0004910-T03-IM5",uniqueSampleKey:"P-0004910-T03-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_1",value:.063649069,confidence:.2365,numberOfMutationsForSample:28},{sampleId:"P-0004910-T03-IM5",uniqueSampleKey:"P-0004910-T03-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_2",value:.001628188,confidence:.0125,numberOfMutationsForSample:28},{sampleId:"P-0004910-T03-IM5",uniqueSampleKey:"P-0004910-T03-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_3",value:.046902463,confidence:.4155,numberOfMutationsForSample:28},{sampleId:"P-0004910-T03-IM5",uniqueSampleKey:"P-0004910-T03-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_4",value:.006882923,confidence:.054,numberOfMutationsForSample:28},{sampleId:"P-0004910-T03-IM5",uniqueSampleKey:"P-0004910-T03-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_5",value:.00361478,confidence:.021,numberOfMutationsForSample:28},{sampleId:"P-0004910-T03-IM5",uniqueSampleKey:"P-0004910-T03-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_6",value:.014863187,confidence:.083,numberOfMutationsForSample:28},{sampleId:"P-0004910-T03-IM5",uniqueSampleKey:"P-0004910-T03-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_7",value:.010484074,confidence:.0695,numberOfMutationsForSample:28},{sampleId:"P-0004910-T03-IM5",uniqueSampleKey:"P-0004910-T03-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_8",value:.003026287,confidence:.0245,numberOfMutationsForSample:28},{sampleId:"P-0004910-T03-IM5",uniqueSampleKey:"P-0004910-T03-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_9",value:.002453355,confidence:.023,numberOfMutationsForSample:28},{sampleId:"P-0004910-T03-IM5",uniqueSampleKey:"P-0004910-T03-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_10",value:.002392524,confidence:.022,numberOfMutationsForSample:28},{sampleId:"P-0004910-T03-IM5",uniqueSampleKey:"P-0004910-T03-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_11",value:.014476329,confidence:.1205,numberOfMutationsForSample:28},{sampleId:"P-0004910-T03-IM5",uniqueSampleKey:"P-0004910-T03-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_12",value:.007135648,confidence:.0805,numberOfMutationsForSample:28},{sampleId:"P-0004910-T03-IM5",uniqueSampleKey:"P-0004910-T03-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_13",value:.002942895,confidence:.0235,numberOfMutationsForSample:28},{sampleId:"P-0004910-T03-IM5",uniqueSampleKey:"P-0004910-T03-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_14",value:.163993342,confidence:.896,numberOfMutationsForSample:28},{sampleId:"P-0004910-T03-IM5",uniqueSampleKey:"P-0004910-T03-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_15",value:686919e-9,confidence:.001,numberOfMutationsForSample:28},{sampleId:"P-0004910-T03-IM5",uniqueSampleKey:"P-0004910-T03-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_16",value:.008949491,confidence:.0915,numberOfMutationsForSample:28},{sampleId:"P-0004910-T03-IM5",uniqueSampleKey:"P-0004910-T03-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_17",value:.001079462,confidence:.0065,numberOfMutationsForSample:28},{sampleId:"P-0004910-T03-IM5",uniqueSampleKey:"P-0004910-T03-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_18",value:.002625438,confidence:.024,numberOfMutationsForSample:28},{sampleId:"P-0004910-T03-IM5",uniqueSampleKey:"P-0004910-T03-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_19",value:.017866136,confidence:.1115,numberOfMutationsForSample:28},{sampleId:"P-0004910-T03-IM5",uniqueSampleKey:"P-0004910-T03-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_20",value:671284e-9,confidence:.0025,numberOfMutationsForSample:28},{sampleId:"P-0004910-T03-IM5",uniqueSampleKey:"P-0004910-T03-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_21",value:.0020471,confidence:.0165,numberOfMutationsForSample:28},{sampleId:"P-0004910-T03-IM5",uniqueSampleKey:"P-0004910-T03-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_22",value:.002319558,confidence:.022,numberOfMutationsForSample:28},{sampleId:"P-0004910-T03-IM5",uniqueSampleKey:"P-0004910-T03-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_23",value:.003747207,confidence:.036,numberOfMutationsForSample:28},{sampleId:"P-0004910-T03-IM5",uniqueSampleKey:"P-0004910-T03-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_24",value:.009046077,confidence:.084,numberOfMutationsForSample:28},{sampleId:"P-0004910-T03-IM5",uniqueSampleKey:"P-0004910-T03-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_25",value:.001463008,confidence:.009,numberOfMutationsForSample:28},{sampleId:"P-0004910-T03-IM5",uniqueSampleKey:"P-0004910-T03-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_26",value:.003301589,confidence:.033,numberOfMutationsForSample:28},{sampleId:"P-0004910-T03-IM5",uniqueSampleKey:"P-0004910-T03-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_27",value:.581148247,confidence:.945,numberOfMutationsForSample:28},{sampleId:"P-0004910-T03-IM5",uniqueSampleKey:"P-0004910-T03-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_28",value:.013454741,confidence:.141,numberOfMutationsForSample:28},{sampleId:"P-0004910-T03-IM5",uniqueSampleKey:"P-0004910-T03-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_29",value:.003818527,confidence:.034,numberOfMutationsForSample:28},{sampleId:"P-0004910-T03-IM5",uniqueSampleKey:"P-0004910-T03-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_30",value:.003330149,confidence:.032,numberOfMutationsForSample:28},{sampleId:"P-0004910-T04-IM5",uniqueSampleKey:"P-0004910-T04-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_1",value:.008049382,confidence:.0675,numberOfMutationsForSample:26},{sampleId:"P-0004910-T04-IM5",uniqueSampleKey:"P-0004910-T04-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_2",value:.001105177,confidence:.0045,numberOfMutationsForSample:26},{sampleId:"P-0004910-T04-IM5",uniqueSampleKey:"P-0004910-T04-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_3",value:.0036538,confidence:.0365,numberOfMutationsForSample:26},{sampleId:"P-0004910-T04-IM5",uniqueSampleKey:"P-0004910-T04-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_4",value:.004620752,confidence:.041,numberOfMutationsForSample:26},{sampleId:"P-0004910-T04-IM5",uniqueSampleKey:"P-0004910-T04-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_5",value:.003782088,confidence:.0255,numberOfMutationsForSample:26},{sampleId:"P-0004910-T04-IM5",uniqueSampleKey:"P-0004910-T04-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_6",value:.003749777,confidence:.0355,numberOfMutationsForSample:26},{sampleId:"P-0004910-T04-IM5",uniqueSampleKey:"P-0004910-T04-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_7",value:.003365869,confidence:.029,numberOfMutationsForSample:26},{sampleId:"P-0004910-T04-IM5",uniqueSampleKey:"P-0004910-T04-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_8",value:.004632342,confidence:.043,numberOfMutationsForSample:26},{sampleId:"P-0004910-T04-IM5",uniqueSampleKey:"P-0004910-T04-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_9",value:.001719043,confidence:.011,numberOfMutationsForSample:26},{sampleId:"P-0004910-T04-IM5",uniqueSampleKey:"P-0004910-T04-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_10",value:.001231342,confidence:.0085,numberOfMutationsForSample:26},{sampleId:"P-0004910-T04-IM5",uniqueSampleKey:"P-0004910-T04-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_11",value:.003583696,confidence:.0345,numberOfMutationsForSample:26},{sampleId:"P-0004910-T04-IM5",uniqueSampleKey:"P-0004910-T04-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_12",value:.002815642,confidence:.0235,numberOfMutationsForSample:26},{sampleId:"P-0004910-T04-IM5",uniqueSampleKey:"P-0004910-T04-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_13",value:.004149477,confidence:.038,numberOfMutationsForSample:26},{sampleId:"P-0004910-T04-IM5",uniqueSampleKey:"P-0004910-T04-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_14",value:.129747639,confidence:.78,numberOfMutationsForSample:26},{sampleId:"P-0004910-T04-IM5",uniqueSampleKey:"P-0004910-T04-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_15",value:734112e-9,confidence:.002,numberOfMutationsForSample:26},{sampleId:"P-0004910-T04-IM5",uniqueSampleKey:"P-0004910-T04-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_16",value:.00228644,confidence:.021,numberOfMutationsForSample:26},{sampleId:"P-0004910-T04-IM5",uniqueSampleKey:"P-0004910-T04-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_17",value:.001002355,confidence:.005,numberOfMutationsForSample:26},{sampleId:"P-0004910-T04-IM5",uniqueSampleKey:"P-0004910-T04-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_18",value:.003832217,confidence:.0375,numberOfMutationsForSample:26},{sampleId:"P-0004910-T04-IM5",uniqueSampleKey:"P-0004910-T04-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_19",value:.031776993,confidence:.2185,numberOfMutationsForSample:26},{sampleId:"P-0004910-T04-IM5",uniqueSampleKey:"P-0004910-T04-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_20",value:.001557096,confidence:.0105,numberOfMutationsForSample:26},{sampleId:"P-0004910-T04-IM5",uniqueSampleKey:"P-0004910-T04-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_21",value:.003556415,confidence:.0335,numberOfMutationsForSample:26},{sampleId:"P-0004910-T04-IM5",uniqueSampleKey:"P-0004910-T04-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_22",value:.001487606,confidence:.0115,numberOfMutationsForSample:26},{sampleId:"P-0004910-T04-IM5",uniqueSampleKey:"P-0004910-T04-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_23",value:.003237267,confidence:.0265,numberOfMutationsForSample:26},{sampleId:"P-0004910-T04-IM5",uniqueSampleKey:"P-0004910-T04-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_24",value:.008425291,confidence:.0805,numberOfMutationsForSample:26},{sampleId:"P-0004910-T04-IM5",uniqueSampleKey:"P-0004910-T04-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_25",value:.00114451,confidence:.0065,numberOfMutationsForSample:26},{sampleId:"P-0004910-T04-IM5",uniqueSampleKey:"P-0004910-T04-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_26",value:.003196741,confidence:.0245,numberOfMutationsForSample:26},{sampleId:"P-0004910-T04-IM5",uniqueSampleKey:"P-0004910-T04-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_27",value:.754802788,confidence:1,numberOfMutationsForSample:26},{sampleId:"P-0004910-T04-IM5",uniqueSampleKey:"P-0004910-T04-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_28",value:.001975817,confidence:.0145,numberOfMutationsForSample:26},{sampleId:"P-0004910-T04-IM5",uniqueSampleKey:"P-0004910-T04-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_29",value:.001780031,confidence:.013,numberOfMutationsForSample:26},{sampleId:"P-0004910-T04-IM5",uniqueSampleKey:"P-0004910-T04-IM5",patientId:"P-0004910",uniquePatientKey:"P-0004910",studyId:"msk_impact_2017",mutationalSignatureId:"mutational_signature_30",value:.002998294,confidence:.0285,numberOfMutationsForSample:26}]},function(e){e.exports=[{mutationalSignatureId:"mutational_signature_1",description:"Mutational Signature 1",confidenceStatement:"Signature 1, the aging signature, is detected in this case."},{mutationalSignatureId:"mutational_signature_2",description:"Mutational Signature 2",confidenceStatement:"Signature 2, the APOBEC signature, is detected in this case.  This signature often coccurs with signature 13, the other APOBEC signature"},{mutationalSignatureId:"mutational_signature_3",description:"Mutational Signature 3",confidenceStatement:"Signature 3, the signature of Homologous Recombination Repair deficiency is detected in this case.  This signature is most commonly associated with BRCA mutations"},{mutationalSignatureId:"mutational_signature_4",description:"Mutational Signature 4",confidenceStatement:"Signature 4, the smoking signature is detected in this case"},{mutationalSignatureId:"mutational_signature_5",description:"Mutational Signature 5",confidenceStatement:"Signature 5 is detected in this case.  We are not confident that we are able to detect signature 5 in the IMPACT cohort.  It is a 'flat' signature--when it is detected it is more likely to be an artefact. In the literature it is associated with age"},{mutationalSignatureId:"mutational_signature_6",description:"Mutational Signature 6",confidenceStatement:"Signature 6, a MMR signature, is detected in this case.  It is usually associated with high mutational burden.  This signature often co-occurs with other MMR signatures (14, 15, 20, 21 26)"},{mutationalSignatureId:"mutational_signature_7",description:"Mutational Signature 7",confidenceStatement:"Signature 7, the UV light signature, is detected in this case."},{mutationalSignatureId:"mutational_signature_8",description:"Mutational Signature 8",confidenceStatement:"Signature 8 is detected in this case. We are not confident that we are able to detect signature 8 in the IMPACT cohort. It is a 'flat' signature--when it is detected it is more likely to be an artefact. In the literature it is associated with HRD defects"},{mutationalSignatureId:"mutational_signature_9",description:"Mutational Signature 9",confidenceStatement:"Signature 9 is detected in this case.  We are not confident that we are able to detect signature 9 in the IMPACT cohort.  In the literature it is associated with POLH."},{mutationalSignatureId:"mutational_signature_10",description:"Mutational Signature 10",confidenceStatement:"Signature 10, the POLE signature, is detected in this case.  It is associated with functions to the exonucleus domain of the POLE gene and enormous mutational burden.  Oftentimes MMR signatures 6, 14,16, 20,21 and 26 co-occur with the POLE signature."},{mutationalSignatureId:"mutational_signature_11",description:"Mutational Signature 11",confidenceStatement:"Signature 11, the Temozolomide (TMZ) signature, is detected in this case."},{mutationalSignatureId:"mutational_signature_12",description:"Mutational Signature 12",confidenceStatement:"Signature 12 is detected in this case.  We are not confident that we are able to detect signature 9 in the IMPACT cohort.  In the literature it is found in liver cancer."},{mutationalSignatureId:"mutational_signature_13",description:"Mutational Signature 13",confidenceStatement:"Signature 13, the APOBEC signature, is detected in this case.  This signature often coccurs with signature 2, the other APOBEC signature."},{mutationalSignatureId:"mutational_signature_14",description:"Mutational Signature 14",confidenceStatement:"Signature 14, the signature of simultaneous MMR and POLE dysfunction is detected in this case.  This signature usually occurs in cases with the POLE signature (signature 10) and other MMR signatures (6, 15, 20, 21 26)."},{mutationalSignatureId:"mutational_signature_15",description:"Mutational Signature 15",confidenceStatement:"Signature 15, a MMR signature, is detected in this case.  It is usually associated with high mutational burden."},{mutationalSignatureId:"mutational_signature_16",description:"Mutational Signature 16",confidenceStatement:"Signature 16 is detected in this case. We are not confident that we are able to detect signature 16 in the IMPACT cohort.  In the literature it is associated with Liver cancer and alcohol consumption."},{mutationalSignatureId:"mutational_signature_17",description:"Mutational Signature 17",confidenceStatement:"Signature 17 is detected in this case.  The aetiology of this signature is unknown.  It is predominantly found in gastric cancers."},{mutationalSignatureId:"mutational_signature_18",description:"Mutational Signature 18",confidenceStatement:"Signature 18 is detected in this case.  This signature is associated with MUTYH dysfunction and neuroblastoma."},{mutationalSignatureId:"mutational_signature_19",description:"Mutational Signature 19",confidenceStatement:"Signature 19 is detected in this case. We are not confident that we are able to detect signature 19 in the IMPACT cohort."},{mutationalSignatureId:"mutational_signature_20",description:"Mutational Signature 20",confidenceStatements:"Signature 20 is detected in this case. This signature is associated with MMR and usually occurs in cases with the POLE signature (signature 10) and other MMR signatures (6, 14, 15, 21, 26)."},{mutationalSignatureId:"mutational_signature_21",description:"Mutational Signature 21",confidenceStatement:"Signature 21 is detected in this case. This signature is associated with MMR and usually co-occurs with other MMR signatures (6, 14, 15, 21, 26)."},{mutationalSignatureId:"mutational_signature_22",description:"Mutational Signature 22",confidenceStatement:"Signature 22 is detected in this case. We are not confident that we are able to detect signature 22 in the IMPACT cohort. In the literature it is associated with exposure to Aristolochic Acid."},{mutationalSignatureId:"mutational_signature_23",description:"Mutational Signature 23",confidenceStatement:"Signature 23 is detected in this case. We are not confident that we are able to detect signature 23 in the IMPACT cohort."},{mutationalSignatureId:"mutational_signature_24",description:"Mutational Signature 24",confidenceStatement:"Signature 24 is detected in this case. We are not confident that we are able to detect signature 24 in the IMPACT cohort.  In the literature it is associated with aflatoxin exposure.  In our cohort we believe it is detected by accident in cases with the smoking signature (signature 4)."},{mutationalSignatureId:"mutational_signature_25",description:"Mutational Signature 25",confidenceStatement:"Signature 25 is detected in this case. We are not confident that we are able to detect signature 25 in the IMPACT cohort."},{mutationalSignatureId:"mutational_signature_26",description:"Mutational Signature 26",confidenceStatement:"Signature 26 is detected in this case.  This signature is associated with MMR and usually co-occurs with other MMR signatures (6, 14, 15, 20, 21)."},{mutationalSignatureId:"mutational_signature_27",description:"Mutational Signature 27",confidenceStatement:"Signature 27 is detected in this case. We are not confident that we are able to detect signature 27 in the IMPACT cohort."},{mutationalSignatureId:"mutational_signature_28",description:"Mutational Signature 28",confidenceStatement:"Signature 28 is detected in this case. We are not confident that we are able to detect signature 28 in the IMPACT cohort.  It often co-occurs with signature 28."},{mutationalSignatureId:"mutational_signature_29",description:"Mutational Signature 29",confidenceStatement:"Signature 29, the mutational signature of chewing tobacco is detected in this case."},{mutationalSignatureId:"mutational_signature_30",description:"Mutational Signature 30",confidenceStatement:"Signature 30 is detected in this case. We are not confident that we are able to detect signature 30 in the IMPACT cohort."}]},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),o=n(3);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,l(t).apply(this,arguments))}var n,i,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["Component"]),n=t,(i=[{key:"render",value:function(){var e=r.createElement("svg",{width:"12",height:"12"},r.createElement("circle",{r:"5",cx:"6",cy:"6",stroke:this.props.stroke,fill:this.props.circleFill}),r.createElement("text",{x:"3",y:"8.5",fontSize:this.props.fontSize,fill:this.props.textFill},this.props.text.slice(0,1)));return this.props.tooltip&&(e=r.createElement(o.c,{placement:"right",overlay:this.props.tooltip,arrowContent:r.createElement("div",{className:"rc-tooltip-arrow-inner"})},e)),e}}])&&a(n.prototype,i),c&&a(n,c),t}();c.defaultProps={stroke:"#55C",circleFill:"none",fontSize:7,textFill:"#66C"}},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"b",function(){return m}),n.d(t,"a",function(){return y});var r=n(4),o=n.n(r);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}var h=function(){function e(){p(this,e),this.map={}}return f(e,[{key:"entries",value:function(){for(var e=[],t=0,n=Object.keys(this.map);t<n.length;t++){var r=n[t],o=!0,i=!1,a=void 0;try{for(var s,l=this.map[r][Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var u=s.value;e.push(u)}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}}return e}},{key:"set",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=this.getEntry(n);return o?(o.value=e,!1):(this.getFolder(n).push({key:n,value:e}),!0)}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=this.getEntry(t);return r?r.value:void 0}},{key:"has",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!!this.getEntry(t)}},{key:"getEntry",value:function(e){return this.getFolder(e).find(function(t){return o.a.isEqual(t.key,e)})}},{key:"getFolder",value:function(e){var t=function(e){return e.join(",")}(e);return this.map[t]=this.map[t]||[],this.map[t]}}],[{key:"from",value:function(t,n){var r=new e,o=!0,i=!1,a=void 0;try{for(var s,l=t[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var u=s.value;r.set.apply(r,[u].concat(c(n(u))))}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}return r}}]),e}(),m=function(e){function t(){return p(this,t),a(this,s(t).apply(this,arguments))}return l(t,h),t}(),y=function(e){function t(){return p(this,t),a(this,s(t).apply(this,arguments))}return l(t,h),f(t,[{key:"increment",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.has.apply(this,t)?this.set.apply(this,[this.get.apply(this,t)+1].concat(t)):this.set.apply(this,[1].concat(t))}}]),t}()},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(828);(r=i)&&r.__esModule;var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return o(e,[{key:"receiveProps",value:function(e,t){this.props=e,this.itemAdapter=t}},{key:"isEmpty",value:function(e){return!this.getLength(e)}},{key:"filter",value:function(e,t){return this.toArray(e).filter(t)}},{key:"find",value:function(e,t){return this.toArray(e).find(t)}},{key:"findMatching",value:function(e,t){var n=this,r=this.itemAdapter.foldValue(t);return this.find(e,function(e){return n.itemAdapter.itemMatchesInput(e,r)})}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.unsafe=function(e){return new o(e)},t.isUnsafe=function(e){return e instanceof o};var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.content=t}return r(e,[{key:"toString",value:function(){return this.content}}]),e}()},function(e,t,n){!function(e,t,n,r){"use strict";function o(e,t){return e(t={exports:{}},t.exports),t.exports}n=n&&n.hasOwnProperty("default")?n.default:n;var i=o(function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t.apply(this,arguments)}e.exports=t}),a=function(e){if(Array.isArray(e))return e},s=function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n},l=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")},u=function(e,t){return a(e)||s(e,t)||l()},c=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},p=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){c(e,t,n[t])})}return e},d=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h=function(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e},m=o(function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(r){return"function"==typeof Symbol&&"symbol"===t(Symbol.iterator)?e.exports=n=function(e){return t(e)}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":t(e)},n(r)}e.exports=n}),y=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},g=function(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?y(e):t},v=o(function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(n)}e.exports=t}),b=o(function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(n,r)}e.exports=t}),S=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)},_=function(e,t,n,r,o,i,a,s){if(void 0===t)throw new Error("invariant requires an error message argument");if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,o,i,a,s],c=0;(l=new Error(t.replace(/%s/g,function(){return u[c++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}},w=function(){function e(){d(this,e),c(this,"refs",{})}return h(e,[{key:"add",value:function(e,t){this.refs[e]||(this.refs[e]=[]),this.refs[e].push(t)}},{key:"remove",value:function(e,t){var n=this.getIndex(e,t);-1!==n&&this.refs[e].splice(n,1)}},{key:"isActive",value:function(){return this.active}},{key:"getActive",value:function(){var e=this;return this.refs[this.active.collection].find(function(t){var n=t.node;return n.sortableInfo.index==e.active.index})}},{key:"getIndex",value:function(e,t){return this.refs[e].indexOf(t)}},{key:"getOrderedRefs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.active.collection;return this.refs[e].sort(E)}}]),e}();function E(e,t){var n=e.node.sortableInfo.index,r=t.node.sortableInfo.index;return n-r}var O=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}},C=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)},P=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")},x=function(e){return O(e)||C(e)||P()};function T(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Object.keys(e).reduce(function(t,r){return-1===n.indexOf(r)&&(t[r]=e[r]),t},{})}var k={end:["touchend","touchcancel","mouseup"],move:["touchmove","mousemove"],start:["touchstart","mousedown"]},A=function(){if("undefined"==typeof window||"undefined"==typeof document)return"";var e=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||""===e.OLink&&["","o"])[1];switch(t){case"ms":return"ms";default:return t&&t.length?t[0].toUpperCase()+t.substr(1):""}}();function I(e,t){Object.keys(t).forEach(function(n){e.style[n]=t[n]})}function D(e,t){e.style["".concat(A,"Transform")]=null==t?"":"translate3d(".concat(t.x,"px,").concat(t.y,"px,0)")}function M(e,t){e.style["".concat(A,"TransitionDuration")]=null==t?"":"".concat(t,"ms")}function j(e,t){for(;e;){if(t(e))return e;e=e.parentNode}return null}function N(e,t,n){return Math.max(e,Math.min(n,t))}function R(e){return"px"===e.substr(-2)?parseFloat(e):0}function L(e,t){var n=t.displayName||t.name;return n?"".concat(e,"(").concat(n,")"):e}function G(e,t){var n=e.getBoundingClientRect();return{top:n.top+t.top,left:n.left+t.left}}function F(e){return e.touches&&e.touches.length?{x:e.touches[0].pageX,y:e.touches[0].pageY}:e.changedTouches&&e.changedTouches.length?{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY}:{x:e.pageX,y:e.pageY}}function B(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{left:0,top:0};if(e){var r={left:n.left+e.offsetLeft,top:n.top+e.offsetTop};return e.parentNode===t?r:B(e.parentNode,t,r)}}function V(e){var t=e.lockOffset,n=e.width,r=e.height,o=t,i=t,a="px";if("string"==typeof t){var s=/^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(t);_(null!==s,'lockOffset value should be a number or a string of a number followed by "px" or "%". Given %s',t),o=parseFloat(t),i=parseFloat(t),a=s[1]}return _(isFinite(o)&&isFinite(i),"lockOffset value should be a finite. Given %s",t),"%"===a&&(o=o*n/100,i=i*r/100),{x:o,y:i}}function z(e){return e instanceof HTMLElement?function(e){var t=window.getComputedStyle(e),n=/(auto|scroll)/;return["overflow","overflowX","overflowY"].find(function(e){return n.test(t[e])})}(e)?e:z(e.parentNode):null}var q={TAB:9,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40},U={Anchor:"A",Button:"BUTTON",Canvas:"CANVAS",Input:"INPUT",Option:"OPTION",Textarea:"TEXTAREA",Select:"SELECT"};function H(e){var n,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return o=n=function(n){function o(){return d(this,o),g(this,v(o).apply(this,arguments))}return S(o,n),h(o,[{key:"componentDidMount",value:function(){var e=r.findDOMNode(this);e.sortableHandle=!0}},{key:"getWrappedInstance",value:function(){return _(a.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableHandle() call"),this.refs.wrappedInstance}},{key:"render",value:function(){var n=a.withRef?"wrappedInstance":null;return t.createElement(e,i({ref:n},this.props))}}]),o}(t.Component),c(n,"displayName",L("sortableHandle",e)),o}function W(e){return null!=e.sortableHandle}var K=function(){function e(t,n){d(this,e),this.container=t,this.onScrollCallback=n}return h(e,[{key:"clear",value:function(){clearInterval(this.interval),this.interval=null}},{key:"update",value:function(e){var t=this,n=e.translate,r=e.minTranslate,o=e.maxTranslate,i=e.width,a=e.height,s={x:0,y:0},l={x:1,y:1},u={x:10,y:10},c=this.container,p=c.scrollTop,d=c.scrollLeft,f=c.scrollHeight,h=c.scrollWidth,m=c.clientHeight,y=c.clientWidth,g=0===p,v=f-p-m==0,b=0===d,S=h-d-y==0;n.y>=o.y-a/2&&!v?(s.y=1,l.y=u.y*Math.abs((o.y-a/2-n.y)/a)):n.x>=o.x-i/2&&!S?(s.x=1,l.x=u.x*Math.abs((o.x-i/2-n.x)/i)):n.y<=r.y+a/2&&!g?(s.y=-1,l.y=u.y*Math.abs((n.y-a/2-r.y)/a)):n.x<=r.x+i/2&&!b&&(s.x=-1,l.x=u.x*Math.abs((n.x-i/2-r.x)/i)),this.interval&&(this.clear(),this.isAutoScrolling=!1),0===s.x&&0===s.y||(this.interval=setInterval(function(){t.isAutoScrolling=!0;var e={left:l.x*s.x,top:l.y*s.y};t.container.scrollTop+=e.top,t.container.scrollLeft+=e.left,t.onScrollCallback(e)},5))}}]),e}(),$={axis:n.oneOf(["x","y","xy"]),contentWindow:n.any,disableAutoscroll:n.bool,distance:n.number,getContainer:n.func,getHelperDimensions:n.func,helperClass:n.string,helperContainer:n.oneOfType([n.func,"undefined"==typeof HTMLElement?n.any:n.instanceOf(HTMLElement)]),hideSortableGhost:n.bool,keyboardSortingTransitionDuration:n.number,lockAxis:n.string,lockOffset:n.oneOfType([n.number,n.string,n.arrayOf(n.oneOfType([n.number,n.string]))]),lockToContainerEdges:n.bool,onSortEnd:n.func,onSortMove:n.func,onSortOver:n.func,onSortStart:n.func,pressDelay:n.number,pressThreshold:n.number,shouldCancelStart:n.func,transitionDuration:n.number,updateBeforeSortStart:n.func,useDragHandle:n.bool,useWindowAsScrollContainer:n.bool},Q={axis:"y",disableAutoscroll:!1,distance:0,getHelperDimensions:function(e){var t=e.node;return{height:t.offsetHeight,width:t.offsetWidth}},hideSortableGhost:!0,lockOffset:"50%",lockToContainerEdges:!1,pressDelay:0,pressThreshold:5,shouldCancelStart:function(e){return-1!==[U.Input,U.Textarea,U.Select,U.Option,U.Button].indexOf(e.target.tagName)||!!j(e.target,function(e){return"true"===e.contentEditable})},transitionDuration:300,useWindowAsScrollContainer:!1},Y=Object.keys($);function X(e){var o,a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return a=o=function(n){function o(e){var t;return d(this,o),t=g(this,v(o).call(this,e)),c(y(y(t)),"handleStart",function(e){var n=t.props,r=n.distance,o=n.shouldCancelStart;if(2!==e.button&&!o(e)){t.touched=!0,t.position=F(e);var i=j(e.target,function(e){return null!=e.sortableInfo});if(i&&i.sortableInfo&&t.nodeIsChild(i)&&!t.state.sorting){var a=t.props.useDragHandle,s=i.sortableInfo,l=s.index,u=s.collection,c=s.disabled;if(c)return;if(a&&!j(e.target,W))return;t.manager.active={collection:u,index:l},function(e){return e.touches&&e.touches.length||e.changedTouches&&e.changedTouches.length}(e)||e.target.tagName!==U.Anchor||e.preventDefault(),r||(0===t.props.pressDelay?t.handlePress(e):t.pressTimer=setTimeout(function(){return t.handlePress(e)},t.props.pressDelay))}}}),c(y(y(t)),"nodeIsChild",function(e){return e.sortableInfo.manager===t.manager}),c(y(y(t)),"handleMove",function(e){var n=t.props,r=n.distance,o=n.pressThreshold;if(!t.state.sorting&&t.touched&&!t._awaitingUpdateBeforeSortStart){var i=F(e),a={x:t.position.x-i.x,y:t.position.y-i.y},s=Math.abs(a.x)+Math.abs(a.y);t.delta=a,r||o&&!(s>=o)?r&&s>=r&&t.manager.isActive()&&t.handlePress(e):(clearTimeout(t.cancelTimer),t.cancelTimer=setTimeout(t.cancel,0))}}),c(y(y(t)),"handleEnd",function(){t.touched=!1,t.cancel()}),c(y(y(t)),"cancel",function(){var e=t.props.distance,n=t.state.sorting;n||(e||clearTimeout(t.pressTimer),t.manager.active=null)}),c(y(y(t)),"handlePress",function(e){try{var n=t.manager.getActive(),r=function(){if(n){var r=function(){var n,r,o,u,y,g,v=f.sortableInfo.index,b=(n=f,{bottom:R((r=window.getComputedStyle(n)).marginBottom),left:R(r.marginLeft),right:R(r.marginRight),top:R(r.marginTop)}),S=t.scrollContainer.getBoundingClientRect(),_=a({collection:h,index:v,node:f});if(t.node=f,t.margin=b,t.width=_.width,t.height=_.height,t.marginOffset={x:t.margin.left+t.margin.right,y:Math.max(t.margin.top,t.margin.bottom)},t.boundingClientRect=f.getBoundingClientRect(),t.containerBoundingRect=S,t.index=v,t.newIndex=v,t.axis={x:i.indexOf("x")>=0,y:i.indexOf("y")>=0},t.offsetEdge=B(f,t.container),t.initialOffset=F(m?p({},e,{pageX:t.boundingClientRect.left,pageY:t.boundingClientRect.top}):e),t.initialScroll={left:t.scrollContainer.scrollLeft,top:t.scrollContainer.scrollTop},t.initialWindowScroll={left:window.pageXOffset,top:window.pageYOffset},t.helper=t.helperContainer.appendChild((u="input, textarea, select, canvas, [contenteditable]",y=(o=f).querySelectorAll(u),g=o.cloneNode(!0),x(g.querySelectorAll(u)).forEach(function(e,t){"file"!==e.type&&(e.value=y[t].value),"radio"===e.type&&e.name&&(e.name="__sortableClone__".concat(e.name)),e.tagName===U.Canvas&&y[t].width>0&&y[t].height>0&&e.getContext("2d").drawImage(y[t],0,0)}),g)),I(t.helper,{boxSizing:"border-box",height:"".concat(t.height,"px"),left:"".concat(t.boundingClientRect.left-b.left,"px"),pointerEvents:"none",position:"fixed",top:"".concat(t.boundingClientRect.top-b.top,"px"),width:"".concat(t.width,"px")}),m&&t.helper.focus(),l&&(t.sortableGhost=f,I(f,{opacity:0,visibility:"hidden"})),t.minTranslate={},t.maxTranslate={},m){var w=d?{top:0,left:0,width:t.contentWindow.innerWidth,height:t.contentWindow.innerHeight}:t.containerBoundingRect,E=w.top,O=w.left,C=w.width,P=w.height,T=E+P,A=O+C;t.axis.x&&(t.minTranslate.x=O-t.boundingClientRect.left,t.maxTranslate.x=A-(t.boundingClientRect.left+t.width)),t.axis.y&&(t.minTranslate.y=E-t.boundingClientRect.top,t.maxTranslate.y=T-(t.boundingClientRect.top+t.height))}else t.axis.x&&(t.minTranslate.x=(d?0:S.left)-t.boundingClientRect.left-t.width/2,t.maxTranslate.x=(d?t.contentWindow.innerWidth:S.left+S.width)-t.boundingClientRect.left-t.width/2),t.axis.y&&(t.minTranslate.y=(d?0:S.top)-t.boundingClientRect.top-t.height/2,t.maxTranslate.y=(d?t.contentWindow.innerHeight:S.top+S.height)-t.boundingClientRect.top-t.height/2);s&&s.split(" ").forEach(function(e){return t.helper.classList.add(e)}),t.listenerNode=e.touches?f:t.contentWindow,m?(t.listenerNode.addEventListener("wheel",t.handleKeyEnd,!0),t.listenerNode.addEventListener("mousedown",t.handleKeyEnd,!0),t.listenerNode.addEventListener("keydown",t.handleKeyDown)):(k.move.forEach(function(e){return t.listenerNode.addEventListener(e,t.handleSortMove,!1)}),k.end.forEach(function(e){return t.listenerNode.addEventListener(e,t.handleSortEnd,!1)})),t.setState({sorting:!0,sortingIndex:v}),c&&c({node:f,index:v,collection:h,isKeySorting:m},e),m&&t.keyMove(0)},o=t.props,i=o.axis,a=o.getHelperDimensions,s=o.helperClass,l=o.hideSortableGhost,u=o.updateBeforeSortStart,c=o.onSortStart,d=o.useWindowAsScrollContainer,f=n.node,h=n.collection,m=t.manager.isKeySorting,y=function(){if("function"==typeof u){t._awaitingUpdateBeforeSortStart=!0;var n=function(e,t){try{var n=e()}catch(e){return t(!0,e)}return n&&n.then?n.then(t.bind(null,!1),t.bind(null,!0)):t(!1,value)}(function(){var t=f.sortableInfo.index;return Promise.resolve(u({collection:h,index:t,node:f,isKeySorting:m},e)).then(function(){})},function(e,n){if(t._awaitingUpdateBeforeSortStart=!1,e)throw n;return n});if(n&&n.then)return n.then(function(){})}}();return y&&y.then?y.then(r):r()}}();return Promise.resolve(r&&r.then?r.then(function(){}):void 0)}catch(e){return Promise.reject(e)}}),c(y(y(t)),"handleSortMove",function(e){var n=t.props.onSortMove;"function"==typeof e.preventDefault&&e.preventDefault(),t.updateHelperPosition(e),t.animateNodes(),t.autoscroll(),n&&n(e)}),c(y(y(t)),"handleSortEnd",function(e){var n=t.props,r=n.hideSortableGhost,o=n.onSortEnd,i=t.manager,a=i.active.collection,s=i.isKeySorting,l=t.manager.refs[a];t.listenerNode&&(s?(t.listenerNode.removeEventListener("wheel",t.handleKeyEnd,!0),t.listenerNode.removeEventListener("mousedown",t.handleKeyEnd,!0),t.listenerNode.removeEventListener("keydown",t.handleKeyDown)):(k.move.forEach(function(e){return t.listenerNode.removeEventListener(e,t.handleSortMove)}),k.end.forEach(function(e){return t.listenerNode.removeEventListener(e,t.handleSortEnd)}))),t.helper.parentNode.removeChild(t.helper),r&&t.sortableGhost&&I(t.sortableGhost,{opacity:"",visibility:""});for(var u=0,c=l.length;u<c;u++){var p=l[u],d=p.node;p.edgeOffset=null,p.boundingClientRect=null,D(d,null),M(d,null),p.translate=null}t.autoScroller.clear(),t.manager.active=null,t.manager.isKeySorting=!1,t.setState({sorting:!1,sortingIndex:null}),"function"==typeof o&&o({collection:a,newIndex:t.newIndex,oldIndex:t.index,isKeySorting:s},e),t.touched=!1}),c(y(y(t)),"autoscroll",function(){var e=t.props.disableAutoscroll,n=t.manager.isKeySorting;if(!e){if(n){var r=p({},t.translate),o=0,i=0;return t.axis.x&&(r.x=Math.min(t.maxTranslate.x,Math.max(t.minTranslate.x,t.translate.x)),o=t.translate.x-r.x),t.axis.y&&(r.y=Math.min(t.maxTranslate.y,Math.max(t.minTranslate.y,t.translate.y)),i=t.translate.y-r.y),t.translate=r,D(t.helper,t.translate),t.scrollContainer.scrollLeft+=o,void(t.scrollContainer.scrollTop+=i)}t.autoScroller.update({height:t.height,maxTranslate:t.maxTranslate,minTranslate:t.minTranslate,translate:t.translate,width:t.width})}}),c(y(y(t)),"onAutoScroll",function(e){t.translate.x+=e.left,t.translate.y+=e.top,t.animateNodes()}),c(y(y(t)),"handleKeyDown",function(e){var n=e.keyCode,r=t.props.shouldCancelStart;if((!t.manager.active||t.manager.isKeySorting)&&(t.manager.active||n===q.SPACE&&!r(e)&&t.isValidSortingTarget(e)))switch(e.stopPropagation(),e.preventDefault(),n){case q.SPACE:t.manager.active?t.keyDrop(e):t.keyLift(e);break;case q.DOWN:case q.RIGHT:t.keyMove(1);break;case q.UP:case q.LEFT:t.keyMove(-1);break;case q.ESC:t.newIndex=t.manager.active.index,t.keyDrop(e)}}),c(y(y(t)),"keyLift",function(e){var n=e.target,r=j(n,function(e){return null!=e.sortableInfo}),o=r.sortableInfo,i=o.index,a=o.collection;t.initialFocusedNode=n,t.manager.isKeySorting=!0,t.manager.active={index:i,collection:a},t.handlePress(e)}),c(y(y(t)),"keyMove",function(e){var n=t.manager.getOrderedRefs(),r=n[n.length-1].node.sortableInfo.index,o=t.newIndex+e,i=t.newIndex;if(!(o<0||o>r)){t.prevIndex=i,t.newIndex=o;var a=function(e,t,n){return e<n&&e>t?e-1:e>n&&e<t?e+1:e}(t.newIndex,t.prevIndex,t.index),s=n.find(function(e){var t=e.node;return t.sortableInfo.index===a}),l=s.node,u=t.containerScrollDelta,c=s.boundingClientRect||G(l,u),p=s.translate||{x:0,y:0},d={top:c.top+p.y-u.top,left:c.left+p.x-u.left},f=i<o,h={x:f&&t.axis.x?l.offsetWidth-t.width:0,y:f&&t.axis.y?l.offsetHeight-t.height:0};t.handleSortMove({pageX:d.left+h.x,pageY:d.top+h.y,ignoreTransition:0===e})}}),c(y(y(t)),"keyDrop",function(e){t.handleSortEnd(e),t.initialFocusedNode&&t.initialFocusedNode.focus()}),c(y(y(t)),"handleKeyEnd",function(e){t.manager.active&&t.keyDrop(e)}),c(y(y(t)),"isValidSortingTarget",function(e){var n=t.props.useDragHandle,r=e.target,o=j(r,function(e){return null!=e.sortableInfo});return o&&o.sortableInfo&&!o.sortableInfo.disabled&&(n?W(r):r.sortableInfo)}),function(e){_(!(e.distance&&e.pressDelay),"Attempted to set both `pressDelay` and `distance` on SortableContainer, you may only use one or the other, not both at the same time.")}(e),t.state={},t.manager=new w,t.events={end:t.handleEnd,move:t.handleMove,start:t.handleStart},t}return S(o,n),h(o,[{key:"getChildContext",value:function(){return{manager:this.manager}}},{key:"componentDidMount",value:function(){var e=this,t=this.props.useWindowAsScrollContainer,n=this.getContainer();Promise.resolve(n).then(function(n){e.container=n,e.document=e.container.ownerDocument||document;var r=e.props.contentWindow||e.document.defaultView||window;e.contentWindow="function"==typeof r?r():r,e.scrollContainer=t?e.document.scrollingElement||e.document.documentElement:z(e.container)||e.container,e.autoScroller=new K(e.scrollContainer,e.onAutoScroll),Object.keys(e.events).forEach(function(t){return k[t].forEach(function(n){return e.container.addEventListener(n,e.events[t],!1)})}),e.container.addEventListener("keydown",e.handleKeyDown)})}},{key:"componentWillUnmount",value:function(){var e=this;this.helper&&this.helper.parentNode&&this.helper.parentNode.removeChild(this.helper),this.container&&(Object.keys(this.events).forEach(function(t){return k[t].forEach(function(n){return e.container.removeEventListener(n,e.events[t])})}),this.container.removeEventListener("keydown",this.handleKeyDown))}},{key:"updateHelperPosition",value:function(e){var t=this.props,n=t.lockAxis,r=t.lockOffset,o=t.lockToContainerEdges,i=t.transitionDuration,a=t.keyboardSortingTransitionDuration,s=void 0===a?i:a,l=this.manager.isKeySorting,c=e.ignoreTransition,p=F(e),d={x:p.x-this.initialOffset.x,y:p.y-this.initialOffset.y};if(d.y-=window.pageYOffset-this.initialWindowScroll.top,d.x-=window.pageXOffset-this.initialWindowScroll.left,this.translate=d,o){var f=function(e){var t=e.height,n=e.width,r=e.lockOffset,o=Array.isArray(r)?r:[r,r];_(2===o.length,"lockOffset prop of SortableContainer should be a single value or an array of exactly two values. Given %s",r);var i=u(o,2),a=i[0],s=i[1];return[V({height:t,lockOffset:a,width:n}),V({height:t,lockOffset:s,width:n})]}({height:this.height,lockOffset:r,width:this.width}),h=u(f,2),m=h[0],y=h[1],g={x:this.width/2-m.x,y:this.height/2-m.y},v={x:this.width/2-y.x,y:this.height/2-y.y};d.x=N(this.minTranslate.x+g.x,this.maxTranslate.x-v.x,d.x),d.y=N(this.minTranslate.y+g.y,this.maxTranslate.y-v.y,d.y)}"x"===n?d.y=0:"y"===n&&(d.x=0),l&&s&&!c&&M(this.helper,s),D(this.helper,d)}},{key:"animateNodes",value:function(){var e=this.props,t=e.transitionDuration,n=e.hideSortableGhost,r=e.onSortOver,o=this.containerScrollDelta,i=this.windowScrollDelta,a=this.manager.getOrderedRefs(),s={left:this.offsetEdge.left+this.translate.x+o.left,top:this.offsetEdge.top+this.translate.y+o.top},l=this.manager.isKeySorting,u=this.newIndex;this.newIndex=null;for(var c=0,p=a.length;c<p;c++){var d=a[c].node,f=d.sortableInfo.index,h=d.offsetWidth,m=d.offsetHeight,y={height:this.height>m?m/2:this.height/2,width:this.width>h?h/2:this.width/2},g=l&&f>this.index&&f<=u,v=l&&f<this.index&&f>=u,b={x:0,y:0},S=a[c].edgeOffset;S||(S=B(d,this.container),a[c].edgeOffset=S,l&&(a[c].boundingClientRect=G(d,o)));var _=c<a.length-1&&a[c+1],w=c>0&&a[c-1];_&&!_.edgeOffset&&(_.edgeOffset=B(_.node,this.container),l&&(_.boundingClientRect=G(_.node,o))),f!==this.index?(t&&M(d,t),this.axis.x?this.axis.y?v||f<this.index&&(s.left+i.left-y.width<=S.left&&s.top+i.top<=S.top+y.height||s.top+i.top+y.height<=S.top)?(b.x=this.width+this.marginOffset.x,S.left+b.x>this.containerBoundingRect.width-y.width&&_&&(b.x=_.edgeOffset.left-S.left,b.y=_.edgeOffset.top-S.top),null===this.newIndex&&(this.newIndex=f)):(g||f>this.index&&(s.left+i.left+y.width>=S.left&&s.top+i.top+y.height>=S.top||s.top+i.top+y.height>=S.top+m))&&(b.x=-(this.width+this.marginOffset.x),S.left+b.x<this.containerBoundingRect.left+y.width&&w&&(b.x=w.edgeOffset.left-S.left,b.y=w.edgeOffset.top-S.top),this.newIndex=f):g||f>this.index&&s.left+i.left+y.width>=S.left?(b.x=-(this.width+this.marginOffset.x),this.newIndex=f):(v||f<this.index&&s.left+i.left<=S.left+y.width)&&(b.x=this.width+this.marginOffset.x,null==this.newIndex&&(this.newIndex=f)):this.axis.y&&(g||f>this.index&&s.top+i.top+y.height>=S.top?(b.y=-(this.height+this.marginOffset.y),this.newIndex=f):(v||f<this.index&&s.top+i.top<=S.top+y.height)&&(b.y=this.height+this.marginOffset.y,null==this.newIndex&&(this.newIndex=f))),D(d,b),a[c].translate=b):n&&(this.sortableGhost=d,I(d,{opacity:0,visibility:"hidden"}))}null==this.newIndex&&(this.newIndex=this.index),l&&(this.newIndex=u);var E=l?this.prevIndex:u;r&&this.newIndex!==E&&r({collection:this.manager.active.collection,index:this.index,newIndex:this.newIndex,oldIndex:E,isKeySorting:l})}},{key:"getWrappedInstance",value:function(){return _(s.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableContainer() call"),this.refs.wrappedInstance}},{key:"getContainer",value:function(){var e=this.props.getContainer;return"function"!=typeof e?r.findDOMNode(this):e(s.withRef?this.getWrappedInstance():void 0)}},{key:"render",value:function(){var n=s.withRef?"wrappedInstance":null;return t.createElement(e,i({ref:n},T(this.props,Y)))}},{key:"helperContainer",get:function(){var e=this.props.helperContainer;return"function"==typeof e?e():this.props.helperContainer||this.document.body}},{key:"containerScrollDelta",get:function(){var e=this.props.useWindowAsScrollContainer;return e?{left:0,top:0}:{left:this.scrollContainer.scrollLeft-this.initialScroll.left,top:this.scrollContainer.scrollTop-this.initialScroll.top}}},{key:"windowScrollDelta",get:function(){return{left:this.contentWindow.pageXOffset-this.initialWindowScroll.left,top:this.contentWindow.pageYOffset-this.initialWindowScroll.top}}}]),o}(t.Component),c(o,"displayName",L("sortableList",e)),c(o,"defaultProps",Q),c(o,"propTypes",$),c(o,"childContextTypes",{manager:n.object.isRequired}),a}var Z={index:n.number.isRequired,collection:n.oneOfType([n.number,n.string]),disabled:n.bool},J=Object.keys(Z);function ee(e){var o,a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return a=o=function(n){function o(){return d(this,o),g(this,v(o).apply(this,arguments))}return S(o,n),h(o,[{key:"componentDidMount",value:function(){this.register()}},{key:"componentDidUpdate",value:function(e){this.node&&(e.index!==this.props.index&&(this.node.sortableInfo.index=this.props.index),e.disabled!==this.props.disabled&&(this.node.sortableInfo.disabled=this.props.disabled)),e.collection!==this.props.collection&&(this.unregister(e.collection),this.register())}},{key:"componentWillUnmount",value:function(){this.unregister()}},{key:"register",value:function(){var e=this.props,t=e.collection,n=e.disabled,o=e.index,i=r.findDOMNode(this);i.sortableInfo={collection:t,disabled:n,index:o,manager:this.context.manager},this.node=i,this.ref={node:i},this.context.manager.add(t,this.ref)}},{key:"unregister",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.collection;this.context.manager.remove(e,this.ref)}},{key:"getWrappedInstance",value:function(){return _(s.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableElement() call"),this.refs.wrappedInstance}},{key:"render",value:function(){var n=s.withRef?"wrappedInstance":null;return t.createElement(e,i({ref:n},T(this.props,J)))}}]),o}(t.Component),c(o,"displayName",L("sortableElement",e)),c(o,"contextTypes",{manager:n.object.isRequired}),c(o,"propTypes",Z),c(o,"defaultProps",{collection:0}),a}e.SortableContainer=X,e.sortableContainer=X,e.SortableElement=ee,e.sortableElement=ee,e.SortableHandle=H,e.sortableHandle=H,e.arrayMove=function(e,t,n){return"undefined"!=typeof console&&console.warn("Deprecation warning: arrayMove will no longer be exported by 'react-sortable-hoc' in the next major release. Please install the `array-move` package locally instead. https://www.npmjs.com/package/array-move"),(e=e.slice()).splice(n<0?e.length+n:n,0,e.splice(t,1)[0]),e},Object.defineProperty(e,"__esModule",{value:!0})}(t,n(0),n(1),n(21))},,function(e,t,n){"use strict";var r=n(0),o=n(7),i=n(2),a=n(599),s=n.n(a),l=n(8),u=n(609),c=n(622);function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var y=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":m(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,f(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement(u.default,{name:this.props.name,value:this.props.value,onChange:this.props.onChange,options:Object(c.c)(this.props.molecularProfiles),searchable:!1,clearable:!1,className:this.props.className})}}])&&p(n.prototype,o),i&&p(n,i),t}(),v=g=y([o.observer],g),b=n(4),S=n(101);function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var P=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":C(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},x=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),w(this,E(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,r["Component"]),n=t,(o=[{key:"change",value:function(e,t){var n=this,r=b.mapValues(this.props.selectedProfileByStudyId,function(r,o){return e===o?n.molecularProfileMap[t.value]:n.molecularProfileMap[r.molecularProfileId]});b.isEqual(this.props.selectedProfileByStudyId,r)||this.props.onChange(r)}},{key:"render",value:function(){var e=this;if(this.props.dataSets.isPending)return r.createElement(S.a,{isLoading:!0});if(this.showEnrichmentsDataSetDropdown||this.props.alwaysShow){var t=b.groupBy(this.props.dataSets.result,function(e){return e.studyId}),n=Object.keys(t).length>1;return b.map(t,function(t,o){return r.createElement("div",{className:s.a.DataSet},r.createElement("div",{style:{display:"flex",alignItems:"center"}},r.createElement("strong",null,n?e.studiesMap[o].name+" ":"","Data Set:"),r.createElement("div",{style:{display:"inline-block",marginLeft:5,width:400}},r.createElement(v,{value:e.props.selectedProfileByStudyId[o].molecularProfileId,molecularProfiles:t,onChange:function(t){return e.change(o,t)}}))))})}return null}},{key:"molecularProfileMap",get:function(){return this.props.dataSets.isComplete?b.keyBy(this.props.dataSets.result,function(e){return e.molecularProfileId}):{}}},{key:"studiesMap",get:function(){return b.keyBy(this.props.studies,function(e){return e.studyId})}},{key:"showEnrichmentsDataSetDropdown",get:function(){if(this.props.dataSets.isComplete){var e=b.groupBy(this.props.dataSets.result,function(e){return e.studyId});return!!b.find(e,function(e){return e.length>1})}return!1}}])&&_(n.prototype,o),i&&_(n,i),t}();P([l.default],x.prototype,"change",null),P([i.computed],x.prototype,"molecularProfileMap",null),P([i.computed],x.prototype,"studiesMap",null),P([i.computed],x.prototype,"showEnrichmentsDataSetDropdown",null),x=P([o.observer],x);t.a=x},function(e,t,n){"use strict";var r=n(0),o=n(7),i=n(2),a=n(586),s=n(576),l=n(3),u=n(8),c=n(4),p=n.n(c),d=n(581),f=n(607),h=n(583);function m(e,t,n){return p.a.sortBy(e,function(e){var r=t(e);return n?r in n?n[r]:Number.POSITIVE_INFINITY:r})}var y=n(21),g=n(56),v=n(9),b=n.n(v),S=n(584);function _(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var T=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":x(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},k=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=O(this,C(t).apply(this,arguments))).tooltipModel=null,e.mouseEvents=e.makeMouseEvents(),e.legendClassName="stacked-bar-plot-legend-".concat(Math.random()),e.computedLegendWidth=0,e.mousePosition={x:0,y:0},e}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,r["Component"]),n=t,(i=[{key:"containerRef",value:function(e){this.container=e,this.updateLegendWidth()}},{key:"makeMouseEvents",value:function(){var e=this;return[{target:"data",eventHandlers:{onMouseOver:function(){return[{target:"data",mutation:function(t){return e.tooltipModel=t,null}}]},onMouseOut:function(){return[{target:"data",mutation:function(){return e.tooltipModel=null,null}}]}}}]}},{key:"formatCategoryTick",value:function(e,t){return this.labels[t]}},{key:"formatNumericalTick",value:function(e,t,n){return Object(f.a)(e,n)}},{key:"categoryCoord",value:function(e){return e*(this.barWidth+this.barSeparation)}},{key:"tooltipFunction",value:function(e){return this.props.tooltip?this.props.tooltip(e):r.createElement("div",null,r.createElement("span",null,e.majorCategory),r.createElement("br",null),r.createElement("strong",null,e.minorCategory,":",e.count,"sample",1===e.count?"":"s","(",e.percentage,"%)"))}},{key:"getChart",value:function(){var e,t=this;return this.data.length>0?r.createElement("div",{ref:this.containerRef,style:{width:this.svgWidth,height:this.svgHeight}},r.createElement("svg",{id:this.props.svgId||"",style:{width:this.svgWidth,height:this.svgHeight,pointerEvents:"all"},height:this.svgHeight,width:this.svgWidth,role:"img",viewBox:"0 0 ".concat(this.svgWidth," ").concat(this.svgHeight),onMouseMove:this.onMouseMove,ref:function(e){t.props.containerRef&&t.props.containerRef(e)}},r.createElement("g",{transform:"translate(".concat(this.leftPadding,", ").concat(this.topPadding,")")},r.createElement(d.VictoryChart,{theme:s.d,width:this.chartWidth,height:this.chartHeight,standalone:!1,domainPadding:this.chartDomainPadding,domain:this.plotDomain,singleQuadrantDomainPadding:(e={},w(e,this.countAxis,!0),w(e,this.categoryAxis,!1),e)},this.legend,this.horzAxis,this.vertAxis,this.chartEtl)))):r.createElement("span",null,"No data to plot.")}},{key:"onMouseMove",value:function(e){this.mousePosition.x=e.pageX,this.mousePosition.y=e.pageY}},{key:"updateLegendWidth",value:function(){if(this.container){var e=this.container.getElementsByClassName(this.legendClassName).item(0);e&&(this.computedLegendWidth=e.getBoundingClientRect().width)}}},{key:"componentDidUpdate",value:function(){this.updateLegendWidth()}},{key:"render",value:function(){return this.data.length?r.createElement("div",null,r.createElement(o.Observer,null,this.getChart),this.tooltipComponent):r.createElement("div",{className:"alert alert-info"},"No data to plot.")}},{key:"getColor",get:function(){var e=Object(h.j)(p.a.values(this.props.categoryToColor)),t={};return p.a.forEach(this.props.categoryToColor,function(e,n){t[n.toLowerCase()]=e}),function(n){return(n=n.toLowerCase())in t||(t[n]=e()),t[n]}}},{key:"chartWidth",get:function(){var e;return e=this.props.horizontalBars?this.props.chartBase:this.chartExtent,Math.max(e,Object(l.L)(this.props.axisLabelX||"",s.c.fontFamily,s.c.fontSize+"px"))}},{key:"chartHeight",get:function(){var e;return e=this.props.horizontalBars?this.chartExtent:this.props.chartBase,Math.max(e,Object(l.L)(this.props.axisLabelY||"",s.c.fontFamily,s.c.fontSize+"px"))}},{key:"sideLegendX",get:function(){return this.chartWidth-20}},{key:"legendLocation",get:function(){return void 0!==this.props.legendLocationWidthThreshold&&this.chartWidth>this.props.legendLocationWidthThreshold||this.legendData.length>15?"bottom":"right"}},{key:"bottomLegendHeight",get:function(){return 0===this.legendData.length?0:23.7*Math.ceil(this.legendData.length/4)}},{key:"legendData",get:function(){var e=this;return m(this.data,function(e){return e.minorCategory},this.minorCategoryOrder).map(function(t){return{name:t.minorCategory,symbol:{type:"square",fill:e.getColor(t.minorCategory),strokeOpacity:0,size:5}}})}},{key:"legend",get:function(){return this.legendData.length>0?r.createElement(d.VictoryLegend,{orientation:"right"===this.legendLocation?"vertical":"horizontal",itemsPerRow:"right"===this.legendLocation?void 0:4,rowGutter:"right"===this.legendLocation?void 0:-5,gutter:30,data:this.legendData,x:"right"===this.legendLocation?this.sideLegendX:0,y:"right"===this.legendLocation?100:this.svgHeight-this.bottomLegendHeight,groupComponent:r.createElement("g",{className:this.legendClassName})}):null}},{key:"data",get:function(){var e=[];return this.props.horzData&&this.props.vertData?e=function(e,t,n){var r,o;n?(r=t,o=e):(r=e,o=t);var i=p.a.chain(o).keyBy("uniqueSampleKey").mapValues(function(e){return[].concat(e.value)}).value(),a={},s={},l=!0,u=!1,c=void 0;try{for(var d,f=r[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var h=d.value,m=i[h.uniqueSampleKey];if(m){var y=[].concat(h.value),g=!0,v=!1,b=void 0;try{for(var S,_=m[Symbol.iterator]();!(g=(S=_.next()).done);g=!0){var w=S.value;s[w]=s[w]||{};var E=!0,O=!1,C=void 0;try{for(var P,x=y[Symbol.iterator]();!(E=(P=x.next()).done);E=!0){var T=P.value;a[T]=!0,s[w][T]=s[w][T]||0,s[w][T]+=1}}catch(e){O=!0,C=e}finally{try{E||null==x.return||x.return()}finally{if(O)throw C}}}}catch(e){v=!0,b=e}finally{try{g||null==_.return||_.return()}finally{if(v)throw b}}}}}catch(e){u=!0,c=e}finally{try{l||null==f.return||f.return()}finally{if(u)throw c}}var k={};return p.a.forEach(a,function(e,t){var n=0;p.a.forEach(s,function(e){e[t]=e[t]||0,n+=e[t]}),k[t]=n}),p.a.map(s,function(e,t){return{minorCategory:t,counts:p.a.map(e,function(e,t){var n=e/k[t]*100;return{majorCategory:t,count:e,percentage:parseFloat(n.toFixed(2))}})}})}(this.props.horzData,this.props.vertData,!!this.props.horizontalBars):this.props.plotData&&(e=this.props.plotData),e}},{key:"maxMajorCount",get:function(){if(this.props.percentage)return 100;var e={},t=!0,n=!1,r=void 0;try{for(var o,i=this.data[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value,s=!0,l=!1,u=void 0;try{for(var c,d=a.counts[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var f=c.value;e[f.majorCategory]=e[f.majorCategory]||0,this.props.stacked?e[f.majorCategory]+=f.count:e[f.majorCategory]=Math.max(f.count,e[f.majorCategory])}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return p.a.chain(e).values().max().value()}},{key:"plotDomain",get:function(){var e,t,n,r=[0,this.maxMajorCount];return n=this.data.length>0?[this.categoryCoord(0),this.categoryCoord(Math.max(1,this.data[0].counts.length-1))]:[0,0],this.props.horizontalBars?(e=r,t=n):(e=n,t=r),{x:e,y:t}}},{key:"offset",get:function(){return this.barWidth}},{key:"categoryAxisDomainPadding",get:function(){return this.domainPadding}},{key:"countAxisDomainPadding",get:function(){return this.domainPadding}},{key:"domainPadding",get:function(){return void 0===this.props.domainPadding?100:this.props.domainPadding}},{key:"countAxis",get:function(){return this.props.horizontalBars?"x":"y"}},{key:"categoryAxis",get:function(){return this.props.horizontalBars?"y":"x"}},{key:"chartDomainPadding",get:function(){var e;return w(e={},this.countAxis,this.props.percentage?0:this.countAxisDomainPadding),w(e,this.categoryAxis,this.categoryAxisDomainPadding+this.additionalPadding),e}},{key:"additionalPadding",get:function(){return this.props.stacked?0:this.categoryCoord(this.data.length/2)+this.data.length}},{key:"chartExtent",get:function(){var e=100;if(this.data.length>0){var t=0;return this.props.stacked?t=this.data[0].counts.length:(t=this.data[0].counts.length*this.data.length,e+=this.categoryCoord(this.data[0].counts.length)),this.categoryCoord(t-1)+2*this.categoryAxisDomainPadding+e}return e}},{key:"svgWidth",get:function(){return this.leftPadding+this.chartWidth+this.rightPadding}},{key:"svgHeight",get:function(){return this.topPadding+this.chartHeight+this.bottomPadding}},{key:"barSeparation",get:function(){return this.props.stacked?.2*this.barWidth:0}},{key:"barWidth",get:function(){var e=this.props.barWidth||10;return this.props.stacked||this.data.length<=10?e:e/2}},{key:"labels",get:function(){return this.data.length>0?m(this.data[0].counts.map(function(e){return e.majorCategory}),function(e){return e},this.majorCategoryOrder):[]}},{key:"numberOfTicks",get:function(){return void 0!==this.props.ticksCount?this.props.ticksCount:8}},{key:"zeroCountOffset",get:function(){var e=!1,t=!0,n=!1,r=void 0;try{for(var o,i=this.data[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value,s=!0,l=!1,u=void 0;try{for(var c,p=a.counts[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){if(0===c.value.count){e=!0;break}}}catch(e){l=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw u}}if(e)break}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return this.props.stacked?0:e?this.maxMajorCount/this.numberOfTicks*.01:0}},{key:"axisStyle",get:function(){return this.props.stacked?this.props.axisStyle||{}:{axis:{stroke:"#b3b3b3"}}}},{key:"categoryAxisStyle",get:function(){var e=this.axisStyle;if(!this.props.stacked){var t=this.categoryCoord(this.data.length)-this.data.length*this.barSeparation;e=Object.assign(Object.assign(Object.assign({},this.axisStyle),{axis:{strokeWidth:0}}),{ticks:{stroke:"black",size:1,strokeLinecap:"butt",strokeLinejoin:"butt",strokeWidth:t}})}return e}},{key:"horzAxis",get:function(){var e=[this.props.axisLabelX];this.props.horizontalBars&&e.unshift("".concat(this.props.countAxisLabel).concat(this.props.percentage?" (%)":""));var t=this.props.horizontalBars?this.axisStyle:this.categoryAxisStyle;return r.createElement(d.VictoryAxis,{orientation:"bottom",offsetY:50,crossAxis:!1,label:e,tickValues:this.props.horizontalBars?void 0:this.categoryTickValues,tickCount:this.props.horizontalBars?this.numberOfTicks:void 0,tickFormat:this.props.horizontalBars?this.formatNumericalTick:this.formatCategoryTick,tickLabelComponent:r.createElement(d.VictoryLabel,{angle:this.props.horizontalBars?void 0:50,verticalAnchor:this.props.horizontalBars?void 0:"start",textAnchor:this.props.horizontalBars?void 0:"start"}),axisLabelComponent:r.createElement(d.VictoryLabel,{dy:this.props.horizontalBars?35:this.biggestCategoryLabelSize+24}),style:t})}},{key:"vertAxis",get:function(){var e=[];this.props.axisLabelY&&e.push(this.props.axisLabelY),this.props.horizontalBars||e.push("".concat(this.props.countAxisLabel).concat(this.props.percentage?" (%)":""));var t=this.props.horizontalBars?this.categoryAxisStyle:this.axisStyle;return r.createElement(d.VictoryAxis,{orientation:"left",offsetX:50,crossAxis:!1,label:e,dependentAxis:!0,tickValues:this.props.horizontalBars?this.categoryTickValues:void 0,tickCount:this.props.horizontalBars?void 0:this.numberOfTicks,tickFormat:this.props.horizontalBars?this.formatCategoryTick:this.formatNumericalTick,axisLabelComponent:r.createElement(d.VictoryLabel,{dy:this.props.horizontalBars?-1*this.biggestCategoryLabelSize-24:-40}),style:t})}},{key:"leftPadding",get:function(){return this.props.horizontalBars?this.biggestCategoryLabelSize:25}},{key:"topPadding",get:function(){return 0}},{key:"rightPadding",get:function(){return this.legendData.length>0&&"right"===this.legendLocation?this.biggestLegendLabelWidth+20:Math.max(50,this.computedLegendWidth-this.chartWidth)}},{key:"bottomPadding",get:function(){var e=10,t=0;return this.props.horizontalBars||(e=this.biggestCategoryLabelSize),"bottom"===this.legendLocation&&(t=this.bottomLegendHeight+15),e+t}},{key:"biggestLegendLabelWidth",get:function(){return Math.max.apply(Math,_(this.legendData.map(function(e){return Object(l.L)(e.name,s.c.fontFamily,s.c.fontSize+"px")})))}},{key:"biggestCategoryLabelSize",get:function(){var e=Math.max.apply(Math,_(this.labels.map(function(e){return Object(l.L)(e,s.b.fontFamily,s.b.fontSize+"px")})));return this.props.horizontalBars?e:e*Math.abs(Math.sin(Math.PI/180*50))}},{key:"minorCategoryOrder",get:function(){var e;return(e=this.props.horizontalBars?this.props.horzCategoryOrder:this.props.vertCategoryOrder)?Object(l.W)(e):void 0}},{key:"majorCategoryOrder",get:function(){var e;return(e=this.props.horizontalBars?this.props.vertCategoryOrder:this.props.horzCategoryOrder)?Object(l.W)(e):void 0}},{key:"categoryTickValues",get:function(){var e=this;return this.data.length>0?this.data[0].counts.map(function(t,n){return e.categoryCoord(n)}):[]}},{key:"bars",get:function(){var e,t,n,o,i,a,s,l,u=this;return(e=this.data,t=this.minorCategoryOrder,n=this.majorCategoryOrder,o=this.getColor,i=this.categoryCoord,a=!!this.props.horizontalBars,s=!!this.props.stacked,l=!!this.props.percentage,e=m(e,function(e){return e.minorCategory},t),(!a&&s||a&&!s)&&(e=p.a.reverse(e)),e.map(function(e){var t=e.minorCategory,r=e.counts;return{fill:o(t),data:m(r,function(e){return e.majorCategory},n).map(function(e,n){return{x:i(n),y:l?e.percentage:e.count,majorCategory:e.majorCategory,minorCategory:t,count:e.count,percentage:e.percentage}})}})).map(function(e){return r.createElement(d.VictoryBar,{style:{data:{fill:e.fill,width:u.barWidth}},data:p.a.map(e.data,function(e){return Object.assign(Object.assign({},e),{y:e.y+u.zeroCountOffset})}),events:u.mouseEvents})})}},{key:"tooltipComponent",get:function(){if(this.tooltipModel){var e="",t=0,n=0,o="";return this.props.horizontalBars?(e="bottom",n=10,o="translate(-50%,0%)"):(n=-17,this.mousePosition.x>S.a.size.width-400?(e="left",t=-8,o="translate(-100%,0%)"):(e="right",t=8)),y.createPortal(r.createElement(g.Popover,{arrowOffsetTop:-n,className:b()("cbioportal-frontend","cbioTooltip"),positionLeft:this.mousePosition.x+t,positionTop:this.mousePosition.y+n,style:{transform:o,maxWidth:400},placement:e},this.tooltipFunction(this.tooltipModel.datum||this.tooltipModel.data[0])),document.body)}return null}},{key:"chartEtl",get:function(){return this.props.stacked?r.createElement(d.VictoryStack,{horizontal:this.props.horizontalBars},this.bars):r.createElement(d.VictoryGroup,{offset:this.offset,horizontal:this.props.horizontalBars},this.bars)}}])&&E(n.prototype,i),a&&E(n,a),t}();k.defaultProps={countAxisLabel:"# samples"},T([i.observable.ref],k.prototype,"tooltipModel",void 0),T([i.observable],k.prototype,"computedLegendWidth",void 0),T([i.observable],k.prototype,"mousePosition",void 0),T([i.observable.ref],k.prototype,"container",void 0),T([a.bind],k.prototype,"containerRef",null),T([i.computed],k.prototype,"getColor",null),T([i.computed],k.prototype,"chartWidth",null),T([i.computed],k.prototype,"chartHeight",null),T([i.computed],k.prototype,"sideLegendX",null),T([i.computed],k.prototype,"legendLocation",null),T([i.computed],k.prototype,"bottomLegendHeight",null),T([i.computed],k.prototype,"legendData",null),T([i.computed],k.prototype,"data",null),T([i.computed],k.prototype,"maxMajorCount",null),T([i.computed],k.prototype,"plotDomain",null),T([i.computed],k.prototype,"offset",null),T([i.computed],k.prototype,"categoryAxisDomainPadding",null),T([i.computed],k.prototype,"countAxisDomainPadding",null),T([i.computed],k.prototype,"domainPadding",null),T([i.computed],k.prototype,"countAxis",null),T([i.computed],k.prototype,"categoryAxis",null),T([i.computed],k.prototype,"chartDomainPadding",null),T([i.computed],k.prototype,"additionalPadding",null),T([i.computed],k.prototype,"chartExtent",null),T([i.computed],k.prototype,"svgWidth",null),T([i.computed],k.prototype,"svgHeight",null),T([i.computed],k.prototype,"barSeparation",null),T([i.computed],k.prototype,"barWidth",null),T([i.computed],k.prototype,"labels",null),T([a.bind],k.prototype,"formatCategoryTick",null),T([a.bind],k.prototype,"formatNumericalTick",null),T([i.computed],k.prototype,"numberOfTicks",null),T([i.computed],k.prototype,"zeroCountOffset",null),T([i.computed],k.prototype,"axisStyle",null),T([i.computed],k.prototype,"categoryAxisStyle",null),T([i.computed],k.prototype,"horzAxis",null),T([i.computed],k.prototype,"vertAxis",null),T([i.computed],k.prototype,"leftPadding",null),T([i.computed],k.prototype,"topPadding",null),T([i.computed],k.prototype,"rightPadding",null),T([i.computed],k.prototype,"bottomPadding",null),T([i.computed],k.prototype,"biggestLegendLabelWidth",null),T([i.computed],k.prototype,"biggestCategoryLabelSize",null),T([i.computed],k.prototype,"minorCategoryOrder",null),T([i.computed],k.prototype,"majorCategoryOrder",null),T([u.default],k.prototype,"categoryCoord",null),T([i.computed],k.prototype,"categoryTickValues",null),T([i.computed],k.prototype,"tooltipComponent",null),T([i.computed],k.prototype,"chartEtl",null),T([u.default],k.prototype,"getChart",null),T([u.default],k.prototype,"onMouseMove",null),k=T([o.observer],k);t.a=k},function(e,t,n){"use strict";var r=n(0),o=n(17),i=(n(822),"https://oncokb.org");function a(){return r.createElement("a",{href:"".concat(i,"/cancerGenes"),target:"_blank"},"OncoKB Cancer Gene List")}var s,l,u=n(693),c=n.n(u),p=n(9),d=n.n(p),f=n(3),h=n(578),m=n(574),y=n(774);function g(e,t){return[e,Object(m.x)(t)].join(":")}function v(e,t,n,o,i){return r.createElement("div",{style:{marginLeft:e},className:c.a.displayFlex,"data-test":"gene-column-header"},n&&r.createElement(f.c,{mouseEnterDelay:0,placement:"top",overlay:S(o)},r.createElement("div",{onClick:i,className:c.a.displayFlex},function(e){return r.createElement("span",{"data-test":"cancer-gene-filter",className:d()(c.a.cancerGeneIcon,c.a.displayFlex),style:{color:e?h.h:h.g}},r.createElement("i",{className:"fa fa-filter"}))}(o))),t)}function b(e,t,n,s,l,u){return r.createElement("div",{style:{display:"flex",flexDirection:"column",maxWidth:300,fontSize:12}},r.createElement("span",null,function(e,t,n,s,l){if(t){var u="";if(s||l){u=" as a ";var c=[];s&&c.push("oncogene"),l&&c.push("tumor suppressor gene"),u="".concat(u," ").concat(c.join(" and "))}return r.createElement("span",null,r.createElement(o.If,{condition:n},r.createElement(o.Then,null,r.createElement("a",{href:"".concat(i,"/gene/").concat(e),target:"_blank"},e)),r.createElement(o.Else,null,r.createElement("span",null,e))),r.createElement("span",null," is included in the "),a(),(s||l)&&r.createElement("span",null,u),".")}}(e,n,s,l,u)))}function S(e){return e?r.createElement("span",null,"Filtered by ",a(),". Click to show all genes."):r.createElement("span",null,"Showing all genes. Click to filter by"," ",a(),".")}function _(e,t,n,o,i,a){var s="# of samples profiled";"data"!==e&&(s+=" for ".concat(e," in this gene: ").concat(t.toLocaleString()));return r.createElement(f.c,{placement:"right",overlay:function(){return r.createElement("span",{style:{display:"flex",flexDirection:"column"},"data-test":"freq-cell-tooltip"},r.createElement("span",null,s),r.createElement(y.a,{genePanelIds:o,toggleModal:i}))},destroyTooltipOnHide:!0},r.createElement("span",{"data-test":"freq-cell",style:a},Object(m.O)(n/t*100)))}function w(e,t){var n="".concat(t?"Percentage":"Number"," of samples");return"data"!==e&&(n+=" with one or more ".concat(e)),n}n.d(t,"d",function(){return g}),n.d(t,"f",function(){return v}),n.d(t,"e",function(){return b}),n.d(t,"a",function(){return s}),n.d(t,"b",function(){return l}),n.d(t,"c",function(){return _}),n.d(t,"g",function(){return w}),function(e){e.MUTATION="mutations",e.FUSION="fusions",e.CNA="copy number alterations",e.DATA="data"}(s||(s={})),function(e){e.INTERSECTION="Intersection",e.UNION="Union"}(l||(l={}))},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(0),o=n(17),i=n(101);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p={marginTop:0},d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,u(t).apply(this,arguments))}var n,a,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){return r.createElement(o.If,{condition:this.props.isHidden},r.createElement(o.Else,null,r.createElement("h2",{style:this.props.style||p,className:this.props.className||""},this.props.title,r.createElement(i.a,{isLoading:this.props.isLoading,small:!0}))))}}])&&s(n.prototype,a),d&&s(n,d),t}()},function(e,t,n){e.exports={portalWidth:"mutationAssessorColumn-module__portalWidth__3YkFm",framedImage:"mutationAssessorColumn-module__framedImage__1asWn","ma-high":"mutationAssessorColumn-module__ma-high__gHJA0","ma-medium":"mutationAssessorColumn-module__ma-medium__3fKlP","ma-low":"mutationAssessorColumn-module__ma-low__VwQXC","ma-neutral":"mutationAssessorColumn-module__ma-neutral__2oq-W"}},function(e,t,n){e.exports={portalWidth:"siftTooltip-module__portalWidth__24Oa2",framedImage:"siftTooltip-module__framedImage__1C_nb","sift-deleterious":"siftTooltip-module__sift-deleterious__1aA2Z","sift-deleterious_low_confidence":"siftTooltip-module__sift-deleterious_low_confidence__2fL6l","sift-tolerated_low_confidence":"siftTooltip-module__sift-tolerated_low_confidence__1u4Hk","sift-tolerated":"siftTooltip-module__sift-tolerated__xqt6g","sift-tooltip-table":"siftTooltip-module__sift-tooltip-table__2KTtP"}},function(e,t,n){e.exports={portalWidth:"polyPhen2Tooltip-module__portalWidth__CFsKD",framedImage:"polyPhen2Tooltip-module__framedImage__kQY7t","polyPhen2-probably_damaging":"polyPhen2Tooltip-module__polyPhen2-probably_damaging__EBbPS","polyPhen2-possibly_damaging":"polyPhen2Tooltip-module__polyPhen2-possibly_damaging__1fyF8","polyPhen2-benign":"polyPhen2Tooltip-module__polyPhen2-benign__36nqJ","polyPhen2-unknown":"polyPhen2Tooltip-module__polyPhen2-unknown__3KRAw","polyPhen2-tooltip-table":"polyPhen2Tooltip-module__polyPhen2-tooltip-table__2WGNf"}},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAT5QTFRF/Pz8/////P396urqzMzMxsbGxsbGxsbGxsbGxsbGycnJ19fX9vb2/v7+2NjYwsLC+Pr69Pf38PT18fT19ff4+fr79PT0p7GzZ4CGXnuCYX+GZIWNaYqSbo+XZYWNZIKJYXyDbYWLs7m7SHiEAERVcpag+vv7gqavFFhpIWJytsvQgKeyLW5/IWd4Qn2Mv9PYfLTDKoOZKoWbTJqt9/r79Pj5c7zOM5u2MZq0WrDE5/H00+zyodfkVrjPRbHMRbHLULXOm9TjyOfv1OzypNjlndXkz+rx+vz8rdzopNjl7Pb56vX45/T36/b45vT36/b45/T36vX45PP3AENUAEBQAD1MADtKADpIDVJjCU5fB0xdBktcCExdDlJjIWd4KH6TJ3yRJ3qPJ3uQKHyRKYCVMJixMJawMJavMJex////SLEDvgAAAFN0Uk5TAAAAEzVMYW51e0l7fn57Z4OHi4qHggdcu9zu+Pr8+OvXtFC1/YwDhfjrS47u/ddHmv391gcKq/z9yxozdeX9/e19Q0KUo0oGqr0kPEc6SjhGPk2mXRMZAAAAAWJLR0QB/wIt3gAAAAlwSFlzAAAASAAAAEgARslrPgAAALpJREFUGNNjYGBmYWVj5+Dk5GBnY2VhZmDg4ubhhQMePi4GfhBfQFBIWEQUJMLPICYuISklLSMrKyMnr6CoJMbAoKwSHBIaFh4eFhoSrKLKyMCopq4RERkVHR0TGaupxQAUYNTWiYMAXT19RpAAg4FhfEJiUnKKkbEJWIDR1Mw8NS09w8LSihEiwGhtY2tn7+DoxAQTYGRydnF1YwIzIQKM7h6eXozIAozePoyoAr5+aAL+AWgCgUFQBgBUGxvs9K2IRwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNy0wOS0xNFQwMDoxMTowNSswMzowMPy1TyEAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTctMDktMTRUMDA6MTE6MDQrMDM6MDArn/wpAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAklQTFRF+/z+////dJ7j///+9Pv/a5TdqL7k4+v6eKDjsMnvtM75X5Hkp77ou9H33+j4vtT4wdf7cp/p3u3/ja/oaaP2ytjsZ47V/f//0N71wc3jKnft0OH8GmbeO3fcQHTSMW7VkbbyuNX/FWDcc5TS///6////2+X4z9zs1NviPoLihbT4/f7+bJ/umLLWyNTnNHzt/P3+1OP7wM7o0dznVoPMob3sY4zVR4jukLb0/v7+SILhz9vr//z0pb7gM3rlzeD9E17aWY/q/f3+R4Lhztnq///2jrfxG2rozd35RYHlgaHX0Nzw///+4+39cZrgtMXjqsn1GGjnf6nwkbTvd53iwtDjXIbOq8Pt/v39obrkN3PXLXnvfaju/v//8/j+gajrk7Hl//72sMTiPnrdt9D5+/z+qcz7AE/dcZzn8ff+iari9vf0+vnxTIfjZprvSo71QHradZjT4en2YIrV+fn03+jxOH/qeqnzKG7eY4rNVH/PiLPzxd37mbHe///3x9ToMWfIpL3roLjiT33PNnzrjLX1ibX04er1+vj18/PvXorWU4be9fj+8/X5NnfiGmjn5/D9+fv+WJTv3OLo5eru7e/vhazoL3Pk2ub6s8/6K3buPnTSm7Tja5zpQnDH7fH1/Pz6///4ga/xM3np4Or6SIboYJPmvszjRnXLp8LvlLvzLmnRydjs///8+Pr6UIjkSYTmwNX3LnLhrcXtjKnZS33V2eb70+P8gaLW///5pMj4CmHqnr31Lm7dztvu9/fy4unwQHTSe6HnW+6dZAAAACF0Uk5T+/7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+EjK2AQAAAAFiS0dEAf8CLd4AAAAJcEhZcwAAAEgAAABIAEbJaz4AAAEOSURBVBjTDcyDQkRRFAXQc7Nta6fJtt3Ltm3brsl2k227vqzWBywiZmhkbAKYCpmZW1iCR8IiVqLWYgziEjaStlLMjmAv7eDo5AzIuLi6Ae4EWQ9PL28fX8j5+QMBIMgHBgWHhIZBITwiEhyPEBUdExsXzyEhMSk5BRylIi09IzML2Tm5efkFhaAiVlxSCqBMsbyisqoaxCnV1NbVg4NyQ2NTcwuIqbSqtqmpg2m0a3ZoaYM6dbq6e3r7wLH+gcGh/3RYd2R0bHyCDzY5NT2DWZrTm19YXFpeAVtdW98AaHNre0ewu7eP7IPDo+MT0OnZ+cXl1TUfN7d3gvuHR3rSf355fXsHDD4+v75/fv8AgKdToRrTqZIAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTctMDktMTRUMDA6MjI6NDErMDM6MDD+ZbjKAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE3LTA5LTE0VDAwOjIyOjI2KzAzOjAwjPA3fwAAAABJRU5ErkJggg=="},function(e,t,n){"use strict";n.d(t,"b",function(){return g}),n.d(t,"a",function(){return v});var r=n(0),o=n(665),i=n.n(o),a=n(7),s=n(2),l=n(798),u=n(4),c=n.n(u);n(743);function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var y=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":m(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},g=1,v=0,b=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=d(t).call(this,e))||"object"!==m(o)&&"function"!=typeof o?f(r):o).trackSpecKeyToTrackId={},n.divRefHandler=n.divRefHandler.bind(f(n)),n.refreshOncoprint=c.a.debounce(n.refreshOncoprint.bind(f(n)),0),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,r["Component"]),n=t,(o=[{key:"divRefHandler",value:function(e){this.div=e}},{key:"getTrackSpecKey",value:function(e){var t=null;return c.a.forEach(this.trackSpecKeyToTrackId,function(n,r){if(n===e)return t=r,!1}),t}},{key:"refreshOncoprint",value:function(e){var t=this;this.oncoprint||(this.oncoprint=new i.a("#".concat(e.divId),e.width,e.initParams),this.oncoprint.setTrackGroupLegendOrder([g,v]),window.frontendOnc=this.oncoprint,e.oncoprintRef&&e.oncoprintRef(this.oncoprint)),this.oncoprint.webgl_unavailable||(Object(l.a)(e,this.lastTransitionProps||{},this.oncoprint,function(){return t.trackSpecKeyToTrackId},function(){return t.props.molecularProfileIdToMolecularProfile}),this.lastTransitionProps=c.a.clone(e))}},{key:"componentWillReceiveProps",value:function(e){this.refreshOncoprint(e)}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"componentDidMount",value:function(){this.refreshOncoprint(this.props)}},{key:"componentWillUnmount",value:function(){this.oncoprint&&(this.oncoprint.destroy(),this.oncoprint=void 0)}},{key:"render",value:function(){return r.createElement("div",{id:this.props.divId,ref:this.divRefHandler})}},{key:"sortByMutationType",get:function(){return this.props.distinguishMutationType&&this.props.sortConfig&&this.props.sortConfig.sortByMutationType}},{key:"sortByDrivers",get:function(){return this.props.distinguishDrivers&&this.props.sortConfig&&this.props.sortConfig.sortByDrivers}}])&&p(n.prototype,o),a&&p(n,a),t}();y([s.computed],b.prototype,"sortByMutationType",null),y([s.computed],b.prototype,"sortByDrivers",null),b=y([a.observer],b),t.c=b},function(e,t,n){},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjQsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iMzguOTI0cHgiIGhlaWdodD0iMzguNjI1cHgiIHZpZXdCb3g9IjAgMCAzOC45MjQgMzguNjI1IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAzOC45MjQgMzguNjI1IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxlbGxpcHNlIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGN4PSIxOS4zOTkiIGN5PSI3LjE4OCIgcng9IjE3Ljg4NiIgcnk9IjUuODEyIi8+DQo8cGF0aCBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTM4LjA5MSw4LjU2NUwyMi43NDIsMjcuNjkzVjM3Ljc1bC03LjgyMy0zLjEyNGwtMC4wMzItNi44MjFMMC43MzcsOC41NjUNCgljMCwwLDMuNzQ3LDQuMTE5LDE4LjUzOCwzLjgyMUMzNC4wNjMsMTIuMDg5LDM4LjA5MSw4LjU2NSwzOC4wOTEsOC41NjV6Ii8+DQo8L3N2Zz4NCg=="},function(e,t,n){e.exports=n(16)(132)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),o=n(3);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,l(t).apply(this,arguments))}var n,i,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["Component"]),n=t,(i=[{key:"render",value:function(){return r.createElement(o.c,{overlay:this.props.tooltip},r.createElement("i",{className:"fa fa-md fa-exclamation-triangle",style:Object.assign({},{color:"#BB1700",cursor:"pointer"},this.props.style||{})}))}}])&&a(n.prototype,i),c&&a(n,c),t}()},function(e,t,n){"use strict";var r=n(0),o=n(2),i=n(7),a=(n(823),n(570)),s=n(56),l=n(609),u=n(88),c=n(4),p=n.n(c),d=n(610),f=n(782),h=n(586),m=n.n(h),y=n(576),g=n(581),v=n(583),b=n(9),S=n.n(b),_=n(674),w=n(11),E=n.n(w);function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var k=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":T(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},A=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=C(this,P(t).apply(this,arguments))).isHovered=!1,e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(t,r["Component"]),n=t,(o=[{key:"onMouseEnter",value:function(){this.isHovered=!0}},{key:"onMouseLeave",value:function(){this.isHovered=!1}},{key:"render",value:function(){var e=!this.props.placement||"left"===this.props.placement||"right"===this.props.placement,t=E()(this.props.container).offset();return t&&(this.props.targetHovered||this.isHovered)?r.createElement(_,{container:document.body},r.createElement(s.Popover,{className:S()("cbioportal-frontend","cbioTooltip",this.props.className),positionLeft:this.props.targetCoords.x+t.left+5-(e?0:30),positionTop:this.props.targetCoords.y+t.top-(e?30:-5),onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,arrowOffsetTop:e?30:void 0,arrowOffsetLeft:e?void 0:24,placement:this.props.placement},this.props.overlay)):null}}])&&O(n.prototype,o),i&&O(n,i),t}();k([o.observable],A.prototype,"isHovered",void 0),k([m.a],A.prototype,"onMouseEnter",null),k([m.a],A.prototype,"onMouseLeave",null);var I=A=k([i.observer],A),D=n(607),M=n(3),j=n(694),N=n(695);function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t){return!t||"object"!==B(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var V=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":B(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},z=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},q="#ffffff",U="#000000",H=1,W=1,K=3,$=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=L(this,G(t).apply(this,arguments))).tooltipModel=null,e.pointHovered=!1,e.mouseEvents=e.makeMouseEvents(),e}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(t,r["Component"]),n=t,(o=[{key:"containerRef",value:function(e){this.container=e}},{key:"makeMouseEvents",value:function(){var e=this,t=null;return[{target:"data",eventHandlers:{onMouseOver:function(){return[{target:"data",mutation:function(n){if(e.props.horizontal&&!n.datum.searchLabel){var r=n.x;n.x=n.y+-5,n.y=r+28.5}else e.props.horizontal||(n.x+=-5);return e.tooltipModel=n,e.pointHovered=!0,null!==t&&(clearTimeout(t),t=null),{active:!0}}}]},onMouseOut:function(){return[{target:"data",mutation:function(){return null!==t&&clearTimeout(t),t=setTimeout(function(){e.pointHovered=!1},250),{active:!1}}}]}}}]}},{key:"datumAccessorY",value:function(e){return e.value}},{key:"datumAccessorBaseLine",value:function(e){return e.offset}},{key:"datumAccessorX",value:function(e){return e.order}},{key:"datumAccessorLabelY",value:function(e){return e.labely}},{key:"datumAccessorLabelX",value:function(e){return e.labelx}},{key:"datumAccessorSearchIndicatorY",value:function(e){return e.searchindicatory}},{key:"datumAccessorSearchIndicatorX",value:function(e){return e.searchindicatorx}},{key:"tickFormat",value:function(e,t,n){return n&&!this.props.useLogSpaceTicks&&(e=n.fInvLogScale(e),t=t.map(function(e){return n.fInvLogScale(e)})),Object(D.a)(e,t)}},{key:"tickFormatX",value:function(e,t,n){if(this.props.horizontal)return this.tickFormat(e,n,this.props.log)}},{key:"tickFormatY",value:function(e,t,n){if(!this.props.horizontal)return this.tickFormat(e,n,this.props.log)}},{key:"resolveStyleOptionType",value:function(e,t){return"function"==typeof t?t(e):t}},{key:"getChart",value:function(){return r.createElement("div",{ref:this.containerRef,style:{width:this.svgWidth,height:this.svgHeight}},r.createElement("svg",{id:this.props.svgId||"",style:{width:this.svgWidth,height:this.svgHeight,pointerEvents:"all"},height:this.svgHeight,width:this.svgWidth,role:"img",viewBox:"0 0 ".concat(this.svgWidth," ").concat(this.svgHeight)},r.createElement("g",null,this.title),r.createElement("g",{transform:"translate(".concat(25,",").concat(this.props.horizontal?30:0,")")},r.createElement(g.VictoryChart,{theme:y.d,width:this.props.chartWidth,height:this.props.chartHeight,standalone:!1,domainPadding:this.plotPaddingInPixels,singleQuadrantDomainPadding:this.props.horizontal},this.legend,this.props.horizontal&&r.createElement(g.VictoryAxis,{domain:this.plotDomainX,orientation:"top",crossAxis:!1,tickCount:8,tickFormat:this.tickFormatX,axisLabelComponent:r.createElement(g.VictoryLabel,{dy:-20}),label:this.axisLabel}),this.props.horizontal&&r.createElement(g.VictoryAxis,{orientation:"left",dependentAxis:!0,tickFormat:function(){return""},style:{axis:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{stroke:"none"}}}),!this.props.horizontal&&r.createElement(g.VictoryAxis,{domain:this.plotDomainY,offsetX:50,orientation:"left",crossAxis:!1,tickCount:8,tickFormat:this.tickFormatY,dependentAxis:!0,axisLabelComponent:r.createElement(g.VictoryLabel,{dy:-35}),label:this.axisLabel}),r.createElement(g.VictoryBar,{style:{data:{fill:function(e){return e.fill},stroke:function(e){return e.stroke},strokeWidth:function(e){return e.strokeWidth},strokeOpacity:function(e){return e.strokeOpacity},fillOpacity:function(e){return e.fillOpacity}}},horizontal:this.props.horizontal,data:this.styledWaterfallPlotData,size:this.size,events:this.mouseEvents,x:this.datumAccessorX,y:this.datumAccessorY,y0:this.datumAccessorBaseLine}),r.createElement(g.VictoryScatter,{style:{data:{fill:q,stroke:U,strokeWidth:H,strokeOpacity:W}},symbol:d.y.symbol,size:K,data:this.limitLabels,x:this.datumAccessorLabelX,y:this.datumAccessorLabelY}),r.createElement(g.VictoryScatter,{style:{data:{fill:d.S.fill,stroke:d.S.stroke,strokeWidth:1.5*d.S.strokeWidth,strokeOpacity:d.S.strokeOpacity}},symbol:d.S.symbol,size:1.5*d.S.size,data:this.searchLabels,events:this.mouseEvents,x:this.datumAccessorSearchIndicatorX,y:this.datumAccessorSearchIndicatorY})))))}},{key:"render",value:function(){return this.props.data.length?r.createElement("div",null,r.createElement(i.Observer,null,this.getChart),this.container&&this.tooltipModel&&this.props.tooltip&&r.createElement(I,{container:this.container,targetHovered:this.pointHovered,targetCoords:{x:this.tooltipModel.x+25,y:this.tooltipModel.y},overlay:this.props.tooltip(this.tooltipModel.datum)})):r.createElement("div",{className:"alert alert-info"},"No data to plot.")}},{key:"fontFamily",get:function(){return this.props.fontFamily||"Verdana,Arial,sans-serif"}},{key:"title",get:function(){if(this.props.title){var e=Object(M.fb)(this.props.title,this.props.chartWidth,this.fontFamily,"13px");return r.createElement(g.VictoryLabel,{style:{fontWeight:"bold",fontFamily:this.fontFamily,textAnchor:"middle"},x:this.svgWidth/2,y:"1.2em",text:e})}return null}},{key:"axisLabel",get:function(){if(this.props.axisLabel){var e=this.props.horizontal?this.props.chartWidth:this.props.chartHeight;return Object(M.fb)(this.props.axisLabel,e,this.fontFamily,"13px")}return""}},{key:"legendX",get:function(){return this.props.chartWidth-20}},{key:"bottomLegendHeight",get:function(){return this.props.legendData&&this.props.legendData.length&&"bottom"===this.legendLocation?Object(v.c)(this.legendItemsPerRow,this.props.legendData,this.props.legendTitle)+50:0}},{key:"maxLegendLabelWidth",get:function(){return this.props.legendData?Object(v.g)(this.props.legendData):0}},{key:"legendItemsPerRow",get:function(){return Object(v.f)(this.maxLegendLabelWidth,this.svgWidth,45,this.props.legendTitle)}},{key:"legend",get:function(){if(this.props.legendData&&this.props.legendData.length){var e=this.props.legendData;"bottom"===this.legendLocation&&(e=e.map(function(e){var t=e.name,n=z(e,["name"]);return Array.isArray(t)&&(t=t.join(" ")),Object.assign({name:t},n)}));var t="right"===this.legendLocation?"vertical":"horizontal";return r.createElement(g.VictoryLegend,{dataComponent:r.createElement(j.a,{orientation:t}),labelComponent:r.createElement(N.a,{orientation:t}),events:[{childName:"all",target:["data","labels"],eventHandlers:{onClick:function(){return[{target:"data",mutation:function(e){var t=e.data[e.index];t.highlighting&&t.highlighting.onClick(t)}}]}}}],orientation:t,itemsPerRow:"right"===this.legendLocation?void 0:this.legendItemsPerRow,rowGutter:"right"===this.legendLocation?void 0:-5,gutter:"right"===this.legendLocation?void 0:45,data:e,x:"right"===this.legendLocation?this.legendX:0,y:"right"===this.legendLocation?100:this.svgHeight-this.bottomLegendHeight+3,title:this.props.legendTitle,titleOrientation:"right"===this.legendLocation?"top":"left",style:{title:{fontSize:15,fontWeight:"bold"}},titleComponent:r.createElement(g.VictoryLabel,{dx:"right"===this.legendLocation?0:-10})})}return null}},{key:"plotDomain",get:function(){var e=p()(this.waterfallPlotData).map("value").max()||0;return{value:[p()(this.waterfallPlotData).map("value").min()||0,e],order:[1,this.waterfallPlotData.length]}}},{key:"plotDomainX",get:function(){return this.props.horizontal?this.plotDomain.value:this.plotDomain.order}},{key:"plotDomainY",get:function(){return this.props.horizontal?this.plotDomain.order:this.plotDomain.value}},{key:"svgWidth",get:function(){return 25+this.props.chartWidth+this.rightPadding}},{key:"svgHeight",get:function(){return"bottom"===this.legendLocation?this.props.chartHeight+this.bottomLegendHeight:this.props.chartHeight}},{key:"rightPadding",get:function(){return this.props.legendData&&this.props.legendData.length>0&&"right"===this.legendLocation?Math.max(130,this.maxLegendLabelWidth+50):130}},{key:"legendLocation",get:function(){return void 0!==this.props.legendLocationWidthThreshold&&this.props.chartWidth>this.props.legendLocationWidthThreshold||this.props.legendData&&this.props.legendData.length>7?"bottom":"right"}},{key:"size",get:function(){var e=this.props.highlight,t=this.props.size;return Object(v.i)(e,t)}},{key:"waterfallPlotData",get:function(){var e=this.props.log,t=p.a.cloneDeep(this.props.data);t=p.a.sortBy(t,function(e){return e.value}),(this.props.horizontal&&"ASC"===this.props.sortOrder||!this.props.horizontal&&"DESC"===this.props.sortOrder)&&(t=p.a.reverse(t)),p.a.each(t,function(e,t){return e.order=t+1});var n=this.props.pivotThreshold||0,r=p.a.map(t,"value").concat([n]),o=p.a.min(r)||0,i=o<0?Math.abs(o)+1e-4:0;return p.a.each(t,function(t){t.offset=e?e.fLogScale(n,i):n,t.value=e?e.fLogScale(t.value,i):t.value}),t}},{key:"styledWaterfallPlotData",get:function(){var e=this,t=p.a.cloneDeep(this.waterfallPlotData);return p.a.each(t,function(t){t.fill=e.resolveStyleOptionType(t,e.props.fill),t.fillOpacity=e.resolveStyleOptionType(t,e.props.fillOpacity),t.stroke=e.resolveStyleOptionType(t,e.props.stroke),t.strokeOpacity=e.resolveStyleOptionType(t,e.props.strokeOpacity),t.strokeWidth=e.resolveStyleOptionType(t,e.props.strokeWidth),t.symbol=e.resolveStyleOptionType(t,e.props.symbol)}),t}},{key:"limitLabels",get:function(){var e=this,t=p.a.filter(this.waterfallPlotData,function(t){return e.resolveStyleOptionType(t,e.props.labelVisibility)}),n=p.a.cloneDeep(t),r=this.props.horizontal?this.plotDomainX:this.plotDomainY,o=r[0],i=r[1],a=this.props.pivotThreshold||0,s=.02*(i-o);return p.a.each(n,function(t){var n=t.value>=a?s:-s,r=t.value+n;e.props.horizontal?(t.labelx=r,t.labely=t.order):(t.labelx=t.order,t.labely=r)}),n}},{key:"searchLabels",get:function(){var e=this;if(!this.props.highlight)return[];var t=p.a.filter(this.waterfallPlotData,function(t){return e.props.highlight(t)}),n=p.a.cloneDeep(t);p.a.each(n,function(e){return e.searchLabel=!0});var r=this.props.horizontal?this.plotDomainX:this.plotDomainY,o=r[0],i=.02*(r[1]-o);return p.a.each(n,function(t){var n=t.value<=t.offset?i:-i,r=t.offset+n;e.props.horizontal?(t.searchindicatorx=r,t.searchindicatory=t.order):(t.searchindicatorx=t.order,t.searchindicatory=r)}),n}},{key:"plotPaddingInPixels",get:function(){return this.props.horizontal?{y:30,x:3}:{y:3,x:30}}}])&&R(n.prototype,o),a&&R(n,a),t}();V([o.observable.ref],$.prototype,"tooltipModel",void 0),V([o.observable],$.prototype,"pointHovered",void 0),V([o.observable.ref],$.prototype,"container",void 0),V([m.a],$.prototype,"containerRef",null),V([o.computed],$.prototype,"fontFamily",null),V([o.computed],$.prototype,"title",null),V([o.computed],$.prototype,"axisLabel",null),V([o.computed],$.prototype,"legendX",null),V([o.computed],$.prototype,"bottomLegendHeight",null),V([o.computed],$.prototype,"maxLegendLabelWidth",null),V([o.computed],$.prototype,"legendItemsPerRow",null),V([o.computed],$.prototype,"plotDomain",null),V([o.computed],$.prototype,"plotDomainX",null),V([o.computed],$.prototype,"plotDomainY",null),V([o.computed],$.prototype,"svgWidth",null),V([o.computed],$.prototype,"svgHeight",null),V([o.computed],$.prototype,"rightPadding",null),V([o.computed],$.prototype,"legendLocation",null),V([m.a],$.prototype,"datumAccessorY",null),V([m.a],$.prototype,"datumAccessorBaseLine",null),V([m.a],$.prototype,"datumAccessorX",null),V([m.a],$.prototype,"datumAccessorLabelY",null),V([m.a],$.prototype,"datumAccessorLabelX",null),V([m.a],$.prototype,"datumAccessorSearchIndicatorY",null),V([m.a],$.prototype,"datumAccessorSearchIndicatorX",null),V([o.computed],$.prototype,"size",null),V([m.a],$.prototype,"tickFormatX",null),V([m.a],$.prototype,"tickFormatY",null),V([o.computed],$.prototype,"waterfallPlotData",null),V([o.computed],$.prototype,"styledWaterfallPlotData",null),V([o.computed],$.prototype,"limitLabels",null),V([o.computed],$.prototype,"searchLabels",null),V([o.computed],$.prototype,"plotPaddingInPixels",null),V([m.a],$.prototype,"getChart",null);var Q=$=V([i.observer],$),Y=n(727),X=n(672),Z=n.n(X),J=n(1007),ee=n(129),te=n.n(ee),ne=regeneratorRuntime.mark(oe);function re(e,t){var n={},r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;n[l.uniqueSampleKey]=n[l.uniqueSampleKey]||{},n[l.uniqueSampleKey].horz=l.value}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}var u=!0,c=!1,p=void 0;try{for(var d,f=t[Symbol.iterator]();!(u=(d=f.next()).done);u=!0){var h=d.value;n[h.uniqueSampleKey]=n[h.uniqueSampleKey]||{},n[h.uniqueSampleKey].vert=h.value}}catch(e){c=!0,p=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw p}}return n}function oe(e,t){var n,r,o,i,a,s,l,u,c,p,d,f,h,m,y,g,v,b,S;return regeneratorRuntime.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:n=re(e,t),r=0,o=Object.keys(n);case 2:if(!(r<o.length)){_.next=61;break}if(i=o[r],!(a=n[i]).horz||!a.vert){_.next=58;break}s=Array.isArray(a.horz)?a.horz:[a.horz],l=Array.isArray(a.vert)?a.vert:[a.vert],u=!0,c=!1,p=void 0,_.prev=11,d=s[Symbol.iterator]();case 13:if(u=(f=d.next()).done){_.next=44;break}h=f.value,m=!0,y=!1,g=void 0,_.prev=18,v=l[Symbol.iterator]();case 20:if(m=(b=v.next()).done){_.next=27;break}return S=b.value,_.next=24,{uniqueSampleKey:i,horz:h,vert:S};case 24:m=!0,_.next=20;break;case 27:_.next=33;break;case 29:_.prev=29,_.t0=_.catch(18),y=!0,g=_.t0;case 33:_.prev=33,_.prev=34,m||null==v.return||v.return();case 36:if(_.prev=36,!y){_.next=39;break}throw g;case 39:return _.finish(36);case 40:return _.finish(33);case 41:u=!0,_.next=13;break;case 44:_.next=50;break;case 46:_.prev=46,_.t1=_.catch(11),c=!0,p=_.t1;case 50:_.prev=50,_.prev=51,u||null==d.return||d.return();case 53:if(_.prev=53,!c){_.next=56;break}throw p;case 56:return _.finish(53);case 57:return _.finish(50);case 58:r++,_.next=2;break;case 61:case"end":return _.stop()}},ne,null,[[11,46,50,58],[18,29,33,41],[34,,36,40],[51,,53,57]])}function ie(){return(ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function le(e,t,n){return t&&se(e.prototype,t),n&&se(e,n),e}function ue(e,t){return!t||"object"!==fe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&de(e,t)}function de(e,t){return(de=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var he=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":fe(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},me=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},ye="middle",ge="Verdana, Arial, sans-serif",ve=12,be=function(e){function t(){return ae(this,t),ue(this,ce(t).apply(this,arguments))}return pe(t,r["Component"]),le(t,[{key:"render",value:function(){var e=this.props,t=e.maxWidth,n=e.style,o=e.text,i=me(e,["maxWidth","style","text"]),a=Object(D.b)(o,t);return n.fontSize=12-.5*(a.length-1),r.createElement(g.VictoryLabel,ie({text:a,style:n},i))}}]),t}(),Se=function(e){function t(){return ae(this,t),ue(this,ce(t).apply(this,arguments))}return pe(t,r["Component"]),le(t,[{key:"render",value:function(){if(!this.props.scale)return null;var e=this.props.rectWidth,t=this.props.rectHeight,n=this.props.scale.y(this.props.y)-t/2,o=this.props.scale.x(this.props.x)-e/2;return r.createElement("g",null,r.createElement("rect",{width:e,height:t,x:o,y:n,style:{fill:this.props.cellFill,stroke:"rgb(208,208,208)"}}),r.createElement("text",{x:o+e/2,y:n+t/2,dy:"0.3em",textAnchor:this.props.textAnchor,fill:this.props.textColor,fontFamily:this.props.fontFamily,fontSize:this.props.fontSize},this.props.label))}}]),t}(),_e=function(e){function t(){return ae(this,t),ue(this,ce(t).apply(this,arguments))}return pe(t,r["Component"]),le(t,[{key:"containerRef",value:function(e){this.container=e}},{key:"getCellCoordinates",value:function(e,t){return{x:this.horzTickValueMap[e],y:this.vertTickValueMap[t]}}},{key:"formatTickHorz",value:function(e,t){return this.formatTickHelper(!0,t)}},{key:"formatTickVert",value:function(e,t){return this.formatTickHelper(!1,t)}},{key:"formatTickHelper",value:function(e,t){return(e?this.tableData.horzCategories:this.tableData.vertCategories)[t]}},{key:"render",value:function(){var e=this;if(!this.tableData.data.length)return r.createElement("div",{className:"alert alert-info"},"No data to plot.");var t=this.tableData.data.map(function(t){var n=t.horzCategory,o=t.vertCategory,i=t.count,a=e.getCellCoordinates(n,o);return r.createElement(Se,{key:"".concat(n,",").concat(o,",rect"),rectWidth:e.cellWidth,rectHeight:e.cellHeight,x:a.x,y:a.y,label:"".concat(i),cellFill:e.getCellColor(i),textColor:e.getTextColor(i),textAnchor:ye,fontFamily:ge,fontSize:ve})});return r.createElement("div",null,r.createElement("div",{ref:this.containerRef,style:{width:this.svgWidth,height:this.svgHeight}},r.createElement("svg",{id:this.props.svgId||"",style:{width:this.svgWidth,height:this.svgHeight,pointerEvents:"all"},height:this.svgHeight,width:this.svgWidth,role:"img",viewBox:"0 0 ".concat(this.svgWidth," ").concat(this.svgHeight)},r.createElement("g",{transform:"translate(".concat(150,", 0)")},r.createElement(g.VictoryChart,{theme:y.d,width:this.chartWidth,height:this.chartHeight,standalone:!1,domain:this.domain,domainPadding:{x:this.cellWidth,y:this.cellHeight}},this.horzAxis,this.vertAxis,t)))))}},{key:"tableData",get:function(){var e=new Y.b,t=!0,n=!1,r=void 0;try{for(var o,i=oe(this.props.horzData,this.props.vertData)[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;void 0!==a.horz&&void 0!==a.vert&&e.set((e.get(a.horz,a.vert)||0)+1,a.horz,a.vert)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}var s,l,u={},c={},p=e.entries().map(function(e){var t=e.key[0],n=e.key[1];return u[t]=!0,c[n]=!0,{horzCategory:t,vertCategory:n,count:e.value}});this.props.horzCategoryOrder?s=this.props.horzCategoryOrder.filter(function(e){return!!u[e]}):(s=Object.keys(u)).sort(Z.a),this.props.vertCategoryOrder?l=this.props.vertCategoryOrder.filter(function(e){return!!c[e]}):(l=Object.keys(c)).sort(Z.a);var d=!0,f=!1,h=void 0;try{for(var m,y=s[Symbol.iterator]();!(d=(m=y.next()).done);d=!0){var g=m.value,v=!0,b=!1,S=void 0;try{for(var _,w=l[Symbol.iterator]();!(v=(_=w.next()).done);v=!0){var E=_.value;e.has(g,E)||p.push({horzCategory:g,vertCategory:E,count:0})}}catch(e){b=!0,S=e}finally{try{v||null==w.return||w.return()}finally{if(b)throw S}}}}catch(e){f=!0,h=e}finally{try{d||null==y.return||y.return()}finally{if(f)throw h}}return{horzCategories:s,vertCategories:l.reverse(),data:p}}},{key:"dataRange",get:function(){var e=Number.POSITIVE_INFINITY,t=Number.NEGATIVE_INFINITY,n=!0,r=!1,o=void 0;try{for(var i,a=this.tableData.data[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;e=Math.min(e,s.count),t=Math.max(t,s.count)}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return{min:e,max:t}}},{key:"getCellColor",get:function(){return this.tableData.data.length?J.a().domain([this.dataRange.min,this.dataRange.max]).range(["rgb(255,255,255)","rgb(0, 102, 204)"]):function(){return"rgb(255,255,255)"}}},{key:"getTextColor",get:function(){if(!this.tableData.data.length)return function(){return"rgb(0,0,0)"};var e=this.dataRange;return function(t){return Object(d.O)(t,e.min,e.max)}}},{key:"chartWidth",get:function(){return Math.max(this.tableData.horzCategories.length*this.cellWidth+150+2*this.cellWidth,this.props.minChartWidth)}},{key:"chartHeight",get:function(){return Math.max(this.tableData.vertCategories.length*this.cellHeight+150+2*this.cellHeight,this.props.minChartHeight)}},{key:"svgWidth",get:function(){return 150+this.chartWidth}},{key:"svgHeight",get:function(){return this.chartHeight+150}},{key:"horzAxis",get:function(){return r.createElement(g.VictoryAxis,{orientation:"bottom",offsetY:50,crossAxis:!1,label:this.props.axisLabelX,tickValues:this.horzTickValues,tickFormat:this.formatTickHorz,tickLabelComponent:r.createElement(be,{angle:-70,verticalAnchor:"middle",textAnchor:"end",maxWidth:120}),axisLabelComponent:r.createElement(g.VictoryLabel,{dy:130})})}},{key:"vertAxis",get:function(){return r.createElement(g.VictoryAxis,{orientation:"left",offsetX:50,crossAxis:!1,label:this.props.axisLabelY,dependentAxis:!0,tickValues:this.vertTickValues,tickFormat:this.formatTickVert,tickLabelComponent:r.createElement(be,{maxWidth:120}),axisLabelComponent:r.createElement(g.VictoryLabel,{dy:-150})})}},{key:"horzTickValueMap",get:function(){return Object(M.X)(this.tableData.horzCategories,function(e,t){return t+1})}},{key:"vertTickValueMap",get:function(){return Object(M.X)(this.tableData.vertCategories,function(e,t){return t+1})}},{key:"horzTickValues",get:function(){var e=this;return this.tableData.horzCategories.map(function(t){return e.horzTickValueMap[t]})}},{key:"vertTickValues",get:function(){var e=this;return this.tableData.vertCategories.map(function(t){return e.vertTickValueMap[t]})}},{key:"cellHeight",get:function(){return Math.max(20,this.props.minCellHeight)}},{key:"cellWidth",get:function(){var e=te()({text:this.dataRange.max+"",fontFamily:ge,fontSize:ve,lineHeight:1}).width.value+20;return Math.max(e,this.props.minCellWidth)}},{key:"domain",get:function(){return{x:[0,this.tableData.horzCategories.length+1],y:[0,this.tableData.vertCategories.length+1]}}}]),t}();he([o.observable.ref],_e.prototype,"container",void 0),he([h.bind],_e.prototype,"containerRef",null),he([o.computed],_e.prototype,"tableData",null),he([o.computed],_e.prototype,"dataRange",null),he([o.computed],_e.prototype,"getCellColor",null),he([o.computed],_e.prototype,"getTextColor",null),he([o.computed],_e.prototype,"chartWidth",null),he([o.computed],_e.prototype,"chartHeight",null),he([o.computed],_e.prototype,"svgWidth",null),he([o.computed],_e.prototype,"svgHeight",null),he([h.bind],_e.prototype,"formatTickHorz",null),he([h.bind],_e.prototype,"formatTickVert",null),he([o.computed],_e.prototype,"horzAxis",null),he([o.computed],_e.prototype,"vertAxis",null),he([o.computed],_e.prototype,"horzTickValueMap",null),he([o.computed],_e.prototype,"vertTickValueMap",null),he([o.computed],_e.prototype,"horzTickValues",null),he([o.computed],_e.prototype,"vertTickValues",null),he([o.computed],_e.prototype,"cellHeight",null),he([o.computed],_e.prototype,"cellWidth",null),he([o.computed],_e.prototype,"domain",null);var we=_e=he([i.observer],_e),Ee=n(101),Oe=n(710),Ce=n(714),Pe=n(8),xe=n(126),Te=n.n(xe),ke=n(645),Ae=n(764),Ie=n(734),De=n(578),Me=n(615),je=n(646);function Ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Re(e){return(Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Le=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Re(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Ge=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.horizontal=new Map,this.vertical=new Map}var t,n,r;return t=e,r=[{key:"updateSelection",value:function(e,t){return e.gene=t.selectedGeneOption,e.geneSet=t.selectedGenesetOption,e.source=t.selectedDataSourceOption,e.genericAssay=t.selectedGenericAssayOption,e}},{key:"runSelectionUpdaters",value:function(e,t,n,r,o,i){e.get(t)&&[{saved:e.get(t).gene,updater:n},{saved:e.get(t).geneSet,updater:r},{saved:e.get(t).source,updater:o},{saved:e.get(t).genericAssay,updater:i}].filter(function(e){return void 0!==e.saved}).forEach(function(e){return e.updater(e.saved)})}}],(n=[{key:"updateHorizontalFromSelection",value:function(e){this.updateAxisWithSelection(this.horizontal,e)}},{key:"updateVerticalFromSelection",value:function(e){this.updateAxisWithSelection(this.vertical,e)}},{key:"updateAxisWithSelection",value:function(t,n){if(void 0!==n.dataType){var r=t.get(n.dataType);void 0===r&&(r={}),t.set(n.dataType,e.updateSelection(r,n))}}},{key:"runHorizontalUpdaters",value:function(t,n,r,o,i){e.runSelectionUpdaters(this.horizontal,t,n,r,o,i)}},{key:"runVerticalUpdaters",value:function(t,n,r,o,i){e.runSelectionUpdaters(this.vertical,t,n,r,o,i)}}])&&Ne(t.prototype,n),r&&Ne(t,r),e}();Le([Pe.default],Ge.prototype,"updateHorizontalFromSelection",null),Le([Pe.default],Ge.prototype,"updateVerticalFromSelection",null),Le([Pe.default],Ge.prototype,"runHorizontalUpdaters",null),Le([Pe.default],Ge.prototype,"runVerticalUpdaters",null);var Fe=[{isApplicableToQuery:function(e,t,n){var r=t.clinical_attribute;return void 0!==e.find(function(e){return"clinical_attribute"===e.value})&&void 0!==r.find(function(e){return"MUTATION_COUNT"===e.value})&&void 0!==r.find(function(e){return"CANCER_TYPE_DETAILED"===e.value})&&n.length>1&&n.length<16},toButtonInfo:function(e,t,n,r){return{selected:"clinical_attribute"===e.type&&"MUTATION_COUNT"===e.source&&"clinical_attribute"===t.type&&"CANCER_TYPE_DETAILED"===t.source,display:"Mut# vs Dx",plotModel:{vertical:{dataType:n.find(function(e){return"clinical_attribute"===e.value}),dataSource:r.clinical_attribute.find(function(e){return"MUTATION_COUNT"===e.value})},horizontal:{dataType:n.find(function(e){return"clinical_attribute"===e.value}),dataSource:r.clinical_attribute.find(function(e){return"CANCER_TYPE_DETAILED"===e.value})}}}}},{isApplicableToQuery:function(e,t,n){var r=t.clinical_attribute;return void 0!==e.find(function(e){return"clinical_attribute"===e.value})&&void 0!==r.find(function(e){return"MUTATION_COUNT"===e.value})&&void 0!==r.find(function(e){return"CANCER_TYPE"===e.value})&&n.length>15},toButtonInfo:function(e,t,n,r){return{selected:"clinical_attribute"===e.type&&"MUTATION_COUNT"===e.source&&"clinical_attribute"===t.type&&"CANCER_TYPE_DETAILED"===t.source,display:"Mut# vs Dx",plotModel:{vertical:{dataType:n.find(function(e){return"clinical_attribute"===e.value}),dataSource:r.clinical_attribute.find(function(e){return"MUTATION_COUNT"===e.value})},horizontal:{dataType:n.find(function(e){return"clinical_attribute"===e.value}),dataSource:r.clinical_attribute.find(function(e){return"CANCER_TYPE"===e.value})}}}}},{isApplicableToQuery:function(e,t,n){var r=t.clinical_attribute;return void 0!==e.find(function(e){return"clinical_attribute"===e.value})&&void 0!==r.find(function(e){return"FRACTION_GENOME_ALTERED"===e.value})&&void 0!==r.find(function(e){return"CANCER_TYPE_DETAILED"===e.value})&&n.length>1&&n.length<16},toButtonInfo:function(e,t,n,r){return{selected:"clinical_attribute"===e.type&&"FRACTION_GENOME_ALTERED"===e.source&&"clinical_attribute"===t.type&&"CANCER_TYPE_DETAILED"===t.source,display:"FGA vs Dx",plotModel:{vertical:{dataType:n.find(function(e){return"clinical_attribute"===e.value}),dataSource:r.clinical_attribute.find(function(e){return"FRACTION_GENOME_ALTERED"===e.value})},horizontal:{dataType:n.find(function(e){return"clinical_attribute"===e.value}),dataSource:r.clinical_attribute.find(function(e){return"CANCER_TYPE_DETAILED"===e.value})}}}}},{isApplicableToQuery:function(e,t,n){var r=t.clinical_attribute;return void 0!==e.find(function(e){return"clinical_attribute"===e.value})&&void 0!==r.find(function(e){return"FRACTION_GENOME_ALTERED"===e.value})&&void 0!==r.find(function(e){return"CANCER_TYPE"===e.value})&&n.length>15},toButtonInfo:function(e,t,n,r){return{selected:"clinical_attribute"===e.type&&"FRACTION_GENOME_ALTERED"===e.source&&"clinical_attribute"===t.type&&"CANCER_TYPE_DETAILED"===t.source,display:"FGA vs Dx",plotModel:{vertical:{dataType:n.find(function(e){return"clinical_attribute"===e.value}),dataSource:r.clinical_attribute.find(function(e){return"FRACTION_GENOME_ALTERED"===e.value})},horizontal:{dataType:n.find(function(e){return"clinical_attribute"===e.value}),dataSource:r.clinical_attribute.find(function(e){return"CANCER_TYPE"===e.value})}}}}},{isApplicableToQuery:function(e,t){var n=t.clinical_attribute;return void 0!==e.find(function(e){return"clinical_attribute"===e.value})&&void 0!==n.find(function(e){return"MUTATION_COUNT"===e.value})&&void 0!==n.find(function(e){return"FRACTION_GENOME_ALTERED"===e.value})},toButtonInfo:function(e,t,n,r){return{selected:"clinical_attribute"===e.type&&"MUTATION_COUNT"===e.source&&"clinical_attribute"===t.type&&"FRACTION_GENOME_ALTERED"===t.source,display:"Mut# vs FGA",plotModel:{vertical:{dataType:n.find(function(e){return"clinical_attribute"===e.value}),dataSource:r.clinical_attribute.find(function(e){return"MUTATION_COUNT"===e.value})},horizontal:{dataType:n.find(function(e){return"clinical_attribute"===e.value}),dataSource:r.clinical_attribute.find(function(e){return"FRACTION_GENOME_ALTERED"===e.value})}}}}},{isApplicableToQuery:function(e,t,n){var r=t.clinical_attribute;return void 0!==e.find(function(e){return"clinical_attribute"===e.value})&&void 0!==e.find(function(e){return"MRNA_EXPRESSION"===e.value})&&void 0!==r.find(function(e){return"CANCER_TYPE_DETAILED"===e.value})&&n.length>1},toButtonInfo:function(e,t,n,r){return{selected:"MRNA_EXPRESSION"===e.type&&"clinical_attribute"===t.type&&"CANCER_TYPE_DETAILED"===t.source,display:"mRNA vs Dx",plotModel:{vertical:{dataType:n.find(function(e){return"MRNA_EXPRESSION"===e.value}),dataSource:void 0},horizontal:{dataType:n.find(function(e){return"clinical_attribute"===e.value}),dataSource:r.clinical_attribute.find(function(e){return"CANCER_TYPE_DETAILED"===e.value})}}}}},{isApplicableToQuery:function(e,t,n,r){return void 0!==e.find(function(e){return"MUTATION_EXTENDED"===e.value})&&void 0!==e.find(function(e){return"MRNA_EXPRESSION"===e.value})&&r>0},toButtonInfo:function(e,t,n){return{selected:"MRNA_EXPRESSION"===e.type&&"MUTATION_EXTENDED"===t.type,display:"mRNA vs mut type",plotModel:{vertical:{dataType:n.find(function(e){return"MRNA_EXPRESSION"===e.value}),dataSource:void 0,useSameGene:!0},horizontal:{dataType:n.find(function(e){return"MUTATION_EXTENDED"===e.value}),dataSource:void 0}}}}},{isApplicableToQuery:function(e){return void 0!==e.find(function(e){return"COPY_NUMBER_ALTERATION"===e.value})&&void 0!==e.find(function(e){return"MRNA_EXPRESSION"===e.value})},toButtonInfo:function(e,t,n){return{selected:"MRNA_EXPRESSION"===e.type&&"COPY_NUMBER_ALTERATION"===t.type,display:"mRNA vs CNA",plotModel:{vertical:{dataType:n.find(function(e){return"MRNA_EXPRESSION"===e.value}),dataSource:void 0,useSameGene:!0},horizontal:{dataType:n.find(function(e){return"COPY_NUMBER_ALTERATION"===e.value}),dataSource:void 0}}}}},{isApplicableToQuery:function(e){return void 0!==e.find(function(e){return"METHYLATION"===e.value})&&void 0!==e.find(function(e){return"MRNA_EXPRESSION"===e.value})},toButtonInfo:function(e,t,n){return{selected:"MRNA_EXPRESSION"===e.type&&"METHYLATION"===t.type,display:"mRNA vs methyl",plotModel:{vertical:{dataType:n.find(function(e){return"MRNA_EXPRESSION"===e.value}),dataSource:void 0,useSameGene:!0},horizontal:{dataType:n.find(function(e){return"METHYLATION"===e.value}),dataSource:void 0}}}}},{isApplicableToQuery:function(e){return void 0!==e.find(function(e){return"PROTEIN_LEVEL"===e.value})&&void 0!==e.find(function(e){return"MRNA_EXPRESSION"===e.value})},toButtonInfo:function(e,t,n,r){return{selected:"PROTEIN_LEVEL"===e.type&&"MRNA_EXPRESSION"===t.type,display:"Protein vs mRNA",plotModel:{vertical:{dataType:n.find(function(e){return"PROTEIN_LEVEL"===e.value}),dataSource:r.PROTEIN_LEVEL.find(function(e){return"brca_tcga_protein_quantification"===e.value}),useSameGene:!0},horizontal:{dataType:n.find(function(e){return"MRNA_EXPRESSION"===e.value}),dataSource:void 0}}}}},{isApplicableToQuery:function(e){return void 0!==e.find(function(e){return e.value===a.c.TREATMENT_RESPONSE})},toButtonInfo:function(e,t,n){return{selected:e.type===a.c.TREATMENT_RESPONSE&&t.type===lt,display:"Tx Waterfall",plotModel:{horizontal:{dataType:{value:lt,label:ct},dataSource:void 0},vertical:{dataType:n.find(function(e){return e.value===a.c.TREATMENT_RESPONSE}),dataSource:void 0}}}}}];var Be=n(592),Ve=n(608);function ze(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function He(e,t){return!t||"object"!==Ye(t)&&"function"!=typeof t?We(e):t}function We(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ke(e){return(Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $e(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qe(e,t)}function Qe(e,t){return(Qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ye(e){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",function(){return Ze}),n.d(t,"f",function(){return et}),n.d(t,"b",function(){return nt}),n.d(t,"e",function(){return lt}),n.d(t,"d",function(){return ut}),n.d(t,"c",function(){return ct});var Xe,Ze,Je,et,tt,nt,rt=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Ye(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};!function(e){e[e.horz_logScale=0]="horz_logScale",e[e.vert_logScale=1]="vert_logScale",e[e.utilities_horizontalBars=2]="utilities_horizontalBars",e[e.utilities_showRegressionLine=3]="utilities_showRegressionLine",e[e.utilities_viewLimitValues=4]="utilities_viewLimitValues"}(Xe||(Xe={})),function(e){e[e.ClinicalData=0]="ClinicalData",e[e.MutationType=1]="MutationType",e[e.MutationTypeAndCopyNumber=2]="MutationTypeAndCopyNumber",e[e.CopyNumber=3]="CopyNumber",e[e.LimitVal=4]="LimitVal",e[e.LimitValMutationType=5]="LimitValMutationType",e[e.LimitValCopyNumber=6]="LimitValCopyNumber",e[e.LimitValMutationTypeAndCopyNumber=7]="LimitValMutationTypeAndCopyNumber",e[e.None=8]="None"}(Ze||(Ze={})),function(e){e[e.MutationTypeAndCopyNumber=0]="MutationTypeAndCopyNumber",e[e.None=1]="None",e[e.LimitValMutationTypeAndCopyNumber=2]="LimitValMutationTypeAndCopyNumber",e[e.LimitVal=3]="LimitVal"}(Je||(Je={})),function(e){e[e.ScatterPlot=0]="ScatterPlot",e[e.WaterfallPlot=1]="WaterfallPlot",e[e.BoxPlot=2]="BoxPlot",e[e.DiscreteVsDiscrete=3]="DiscreteVsDiscrete",e[e.Table=4]="Table"}(et||(et={})),function(e){e.Bar="Bar",e.StackedBar="StackedBar",e.PercentageStackedBar="PercentageStackedBar",e.Table="Table"}(tt||(tt={})),function(e){e.MutationType="MutationType",e.MutatedVsWildType="MutatedVsWildType"}(nt||(nt={}));var ot=function(e){function t(){return Ue(this,t),He(this,Ke(t).apply(this,arguments))}return $e(t,f["a"]),t}(),it=function(e){function t(){return Ue(this,t),He(this,Ke(t).apply(this,arguments))}return $e(t,Ce["a"]),t}(),at=function(e){function t(){return Ue(this,t),He(this,Ke(t).apply(this,arguments))}return $e(t,Q),t}(),st="plots-tab-plot-svg",lt="none",ut=-1,ct="Ordered samples",pt="same",dt=-2,ft=[{value:nt.MutationType,label:"Mutation Type"},{value:nt.MutatedVsWildType,label:"Mutated vs Wild-type"}],ht=[{value:tt.Bar,label:"Bar chart"},{value:tt.StackedBar,label:"Stacked bar chart"},{value:tt.PercentageStackedBar,label:"100% stacked bar chart"},{value:tt.Table,label:"Table"}],mt=function(e){function t(e){var n;return Ue(this,t),(n=He(this,Ke(t).call(this,e))).selectionHistory=new Ge,n.showRegressionLine=!1,n.discreteVsDiscretePlotType=tt.StackedBar,n.horizontalBars=!1,n.percentageBar=!1,n.stackedBar=!1,n.viewLimitValues=!0,n._waterfallPlotSortOrder=void 0,n.searchCase="",n.searchMutation="",n.plotExists=!1,n.highlightedLegendItems=o.observable.shallowMap(),n.downloadFilename="plot",n.horzDatatypeOptions=Object(M.S)({await:function(){return[n.dataTypeOptions]},invoke:function(){var e=void 0;n.dataTypeOptions.result&&n.vertSelection.dataType&&n.vertSelection.isGenericAssayType&&(e=[{value:lt,label:ct}]);var t=(e||[]).concat(n.dataTypeOptions.result||[]);return Promise.resolve(t)}}),n.vertDatatypeOptions=Object(M.S)({await:function(){return[n.dataTypeOptions]},invoke:function(){var e=void 0;return n.dataTypeOptions.result&&n.horzSelection.dataType&&n.horzSelection.isGenericAssayType&&(e=[{value:lt,label:ct}]),Promise.resolve((e||[]).concat(n.dataTypeOptions.result||[]))}}),n.horzGeneOptions=Object(M.S)({await:function(){return[n.props.store.genes]},invoke:function(){return Promise.resolve(n.props.store.genes.result.map(function(e){return{value:e.entrezGeneId,label:e.hugoGeneSymbol}}))}}),n.vertGeneOptions=Object(M.S)({await:function(){return[n.horzGeneOptions]},invoke:function(){var e=void 0;return n.horzSelection.dataType&&n.showGeneSelectBox(n.horzSelection.dataType,n.horzSelection.isGenericAssayType)&&n.horzSelection.selectedGeneOption&&n.horzSelection.selectedGeneOption.value!==ut&&(e=[{value:dt,label:"Same gene (".concat(n.horzSelection.selectedGeneOption.label,")")}]),Promise.resolve((e||[]).concat(n.horzGeneOptions.result||[]))}}),n.coloringMenuOmnibarOptions=Object(M.S)({await:function(){return[n.props.store.genes,n.props.store.clinicalAttributes]},invoke:function(){var e=[];return e.push({label:"Genes",options:n.props.store.genes.result.map(function(e){return{label:e.hugoGeneSymbol,info:{entrezGeneId:e.entrezGeneId}}})}),e.push({label:"Clinical Attributes",options:n.props.store.clinicalAttributes.result.filter(function(e){return e.clinicalAttributeId!==Be.c.MutationSpectrum}).map(function(e){return{label:e.displayName,info:{clinicalAttribute:e}}})}),e.length>0&&e.unshift({label:"None",info:{entrezGeneId:ut}}),e.forEach(function(e){e.options?e.options.forEach(function(e){e.value=Object(d.r)(e)}):e.value=Object(d.r)(e)}),Promise.resolve(e)}}),n.horzGenesetOptions=Object(M.S)({await:function(){return[n.props.store.genesets]},invoke:function(){return Promise.resolve(n.props.store.genesets.result.map(function(e){return{value:e.genesetId,label:e.name}}))}}),n.vertGenesetOptions=Object(M.S)({await:function(){return[n.horzGenesetOptions]},invoke:function(){var e=void 0;return(n.horzGenesetOptions||n.horzSelection.dataType)&&n.horzSelection.dataType&&n.showGenesetSelectBox(n.horzSelection.dataType)&&n.horzSelection.selectedGenesetOption&&n.horzSelection.selectedGenesetOption.value!==lt&&(e=[{value:pt,label:"Same gene set (".concat(n.horzSelection.selectedGenesetOption.label,")")}]),Promise.resolve((e||[]).concat(n.horzGenesetOptions.result||[]))}}),n.genericEntitiesGroupByEntityId=Object(M.S)({await:function(){return[n.props.store.genericAssayEntitiesGroupByMolecularProfileId]},invoke:function(){var e=p.a.chain(n.props.store.genericAssayEntitiesGroupByMolecularProfileId.result).values().flatten().groupBy(function(e){return e.stableId}).mapValues(function(e){return e[0]}).value();return Promise.resolve(e)}}),n.horzGenericAssayOptions=Object(M.S)({await:function(){return[n.props.store.genericAssayEntitiesGroupByMolecularProfileId]},invoke:function(){return n.horzSelection.dataSourceId&&n.props.store.genericAssayEntitiesGroupByMolecularProfileId.result&&n.props.store.genericAssayEntitiesGroupByMolecularProfileId.result[n.horzSelection.dataSourceId]?Promise.resolve(n.props.store.genericAssayEntitiesGroupByMolecularProfileId.result[n.horzSelection.dataSourceId].map(function(e){return{value:e.stableId,label:"NAME"in e.genericEntityMetaProperties?e.genericEntityMetaProperties.NAME:""}})):Promise.resolve([])}}),n.vertGenericAssayOptions=Object(M.S)({await:function(){return[n.props.store.genericAssayEntitiesGroupByMolecularProfileId]},invoke:function(){var e=void 0,t=void 0;return n.vertSelection.dataType&&n.showGenericAssaySelectBox(n.vertSelection.dataType,n.vertSelection.isGenericAssayType)&&(n.vertSelection.dataSourceId&&n.props.store.genericAssayEntitiesGroupByMolecularProfileId.result&&n.props.store.genericAssayEntitiesGroupByMolecularProfileId.result[n.vertSelection.dataSourceId]&&(t=n.props.store.genericAssayEntitiesGroupByMolecularProfileId.result[n.vertSelection.dataSourceId].map(function(e){return{value:e.stableId,label:"NAME"in e.genericEntityMetaProperties?e.genericEntityMetaProperties.NAME:""}})),n.horzSelection.dataType&&n.horzSelection.dataType===n.vertSelection.dataType&&n.showGenericAssaySelectBox(n.horzSelection.dataType,n.horzSelection.isGenericAssayType)&&n.horzSelection.selectedGenericAssayOption&&n.horzSelection.selectedGenericAssayOption.value!==lt&&(e=[{value:pt,label:"Same ".concat(d.m[n.horzSelection.dataType]," (").concat(n.horzSelection.selectedGenericAssayOption.label,")")}])),Promise.resolve((e||[]).concat(t||[]))}}),n.clinicalAttributeIdToClinicalAttribute=Object(M.S)({await:function(){return[n.props.store.clinicalAttributes,n.props.store.studyIds]},invoke:function(){var e=p.a.keyBy(n.props.store.clinicalAttributes.result,function(e){return e.clinicalAttributeId});return Promise.resolve(e)}}),n.clinicalAttributeOptions=Object(M.S)({await:function(){return[n.props.store.clinicalAttributes]},invoke:function(){return Promise.resolve(Object(d.E)(n.props.store.clinicalAttributes.result))}}),n.dataTypeOptions=Object(M.S)({await:function(){return[n.props.store.molecularProfilesWithData,n.clinicalAttributeOptions,n.props.store.molecularProfilesInStudies]},invoke:function(){var e=n.props.store.molecularProfilesWithData.result,t=p.a.uniq(e.map(function(e){return e.molecularAlterationType})).filter(function(e){return!!d.m[e]});0===n.props.store.genesets.result.length&&t.includes(a.a.GENESET_SCORE)&&p.a.remove(t,function(e){return e===a.a.GENESET_SCORE}),n.clinicalAttributeOptions.result.length&&t.push(d.a),n.props.store.molecularProfilesInStudies.result.length&&n.horzGenesetOptions.result&&n.horzGenesetOptions.result.length>0&&n.props.store.molecularProfilesInStudies.result.filter(function(e){e.molecularAlterationType===a.a[d.c]&&-1===t.indexOf(d.c)&&t.push(d.c)});var r=p.a.chain(e).filter(function(e){return e.molecularAlterationType===a.a.GENERIC_ASSAY}).uniqBy(function(e){return e.genericAssayType}).map(function(e){return{value:e.genericAssayType,label:Object(d.n)(e.genericAssayType),isGenericAssayType:!0}}).value();return Promise.resolve(p.a.concat(p.a.sortBy(t,function(e){return d.l.indexOf(e)}).map(function(e){return{value:e,label:d.m[e]}}),r))}}),n.dataTypeToDataSourceOptions=Object(M.S)({await:function(){return[n.props.store.molecularProfilesInStudies,n.clinicalAttributeOptions]},invoke:function(){var e=n.props.store.molecularProfilesInStudies.result,t=p.a.filter(e,function(e){return e.molecularAlterationType!==a.a.GENERIC_ASSAY||e.molecularAlterationType===a.a.GENERIC_ASSAY&&e.showProfileInAnalysisTab}),r=p.a.mapValues(p.a.groupBy(t,function(e){return e.molecularAlterationType===a.a.GENERIC_ASSAY?e.genericAssayType:e.molecularAlterationType}),function(e){return Object(d.N)(e).map(function(e){return{value:e.molecularProfileId,label:e.name}})});return n.clinicalAttributeOptions.result.length&&(r[d.a]=n.clinicalAttributeOptions.result),Promise.resolve(r)}}),n.cnaPromise=Object(M.S)({await:function(){return n.props.store.annotatedCnaCache.getAll(Object(d.q)(n.coloringMenuSelection))},invoke:function(){var e=Object(d.q)(n.coloringMenuSelection);return e.length>0?Promise.resolve(p.a.flatten(n.props.store.annotatedCnaCache.getAll(e).map(function(e){return e.result}))):Promise.resolve([])}}),n.mutationPromise=Object(M.S)({await:function(){return n.props.store.annotatedMutationCache.getAll(Object(d.t)(n.coloringMenuSelection))},invoke:function(){return Promise.resolve(p.a.flatten(n.props.store.annotatedMutationCache.getAll(Object(d.t)(n.coloringMenuSelection)).map(function(e){return e.result})).filter(function(e){return!!e}))}}),n.mutationDataExists=Object(M.S)({await:function(){return[n.props.store.studyToMutationMolecularProfile]},invoke:function(){return Promise.resolve(!!p.a.values(n.props.store.studyToMutationMolecularProfile).length)}}),n.cnaDataExists=Object(M.S)({await:function(){return[n.props.store.studyToMolecularProfileDiscreteCna]},invoke:function(){return Promise.resolve(!!p.a.values(n.props.store.studyToMolecularProfileDiscreteCna).length)}}),n.horzLabel=Object(M.S)({await:function(){return[n.props.store.molecularProfileIdToMolecularProfile,n.props.store.entrezGeneIdToGene,n.clinicalAttributeIdToClinicalAttribute,n.plotType]},invoke:function(){return Promise.resolve(Object(d.o)(n.horzSelection,n.props.store.molecularProfileIdToMolecularProfile.result,n.props.store.entrezGeneIdToGene.result,n.clinicalAttributeIdToClinicalAttribute.result,n.horzLogScaleFunction))}}),n.vertLabel=Object(M.S)({await:function(){return[n.props.store.molecularProfileIdToMolecularProfile,n.props.store.entrezGeneIdToGene,n.clinicalAttributeIdToClinicalAttribute]},invoke:function(){return Promise.resolve(Object(d.o)(n.vertSelection,n.props.store.molecularProfileIdToMolecularProfile.result,n.props.store.entrezGeneIdToGene.result,n.clinicalAttributeIdToClinicalAttribute.result,n.vertLogScaleFunction))}}),n.waterfallLabel=Object(M.S)({await:function(){return[n.props.store.molecularProfileIdToMolecularProfile,n.props.store.entrezGeneIdToGene,n.clinicalAttributeIdToClinicalAttribute,n.plotType]},invoke:function(){var e=n.isHorizontalWaterfallPlot?n.horzSelection:n.vertSelection,t=n.isHorizontalWaterfallPlot?n.horzLogScaleFunction:n.vertLogScaleFunction;return Promise.resolve(Object(d.o)(e,n.props.store.molecularProfileIdToMolecularProfile.result,n.props.store.entrezGeneIdToGene.result,n.clinicalAttributeIdToClinicalAttribute.result,t))}}),n.fDatumHasMutation=function(e,t){var n=new RegExp(t,"i");return!!t&&!!e.mutations.find(function(e){return!(!e.proteinChange||!n.test(e.proteinChange))})},n.plotType=Object(M.S)({await:function(){return[n.horzAxisDataPromise,n.vertAxisDataPromise]},invoke:function(){var e=n.horzAxisDataPromise.result,t=n.vertAxisDataPromise.result,r=n.horzSelection.dataType===lt,o=n.vertSelection.dataType===lt;return e&&t?o&&e||r&&t?Promise.resolve(et.WaterfallPlot):Object(d.x)(e)&&Object(d.x)(t)?Promise.resolve(et.DiscreteVsDiscrete):Object(d.w)(e)&&Object(d.w)(t)?Promise.resolve(et.ScatterPlot):Promise.resolve(et.BoxPlot):new Promise(function(){return 0})}}),n.scatterPlotData=Object(M.S)({await:function(){var e=[n.horzAxisDataPromise,n.vertAxisDataPromise,n.props.store.sampleKeyToSample,n.props.store.coverageInformation,n.mutationPromise,n.props.store.studyToMutationMolecularProfile,n.cnaPromise,n.props.store.studyToMolecularProfileDiscreteCna];return n.coloringMenuSelection.selectedOption&&n.coloringMenuSelection.selectedOption.info.clinicalAttribute&&e.push(n.props.store.clinicalDataCache.get(n.coloringMenuSelection.selectedOption.info.clinicalAttribute)),e},invoke:function(){var e;n.coloringMenuSelection.selectedOption&&n.coloringMenuSelection.selectedOption.info.clinicalAttribute&&(e=n.props.store.clinicalDataCache.get(n.coloringMenuSelection.selectedOption.info.clinicalAttribute).result.data);var t=n.horzAxisDataPromise.result,r=n.vertAxisDataPromise.result;return t&&r?Object(d.w)(t)&&Object(d.w)(r)?Promise.resolve(Object(d.F)(t,r,n.props.store.sampleKeyToSample.result,n.props.store.coverageInformation.result.samples,n.mutationDataExists.result?{molecularProfileIds:p.a.values(n.props.store.studyToMutationMolecularProfile.result).map(function(e){return e.molecularProfileId}),data:n.mutationPromise.result}:void 0,n.cnaDataExists.result?{molecularProfileIds:p.a.values(n.props.store.studyToMolecularProfileDiscreteCna.result).map(function(e){return e.molecularProfileId}),data:n.cnaPromise.result}:void 0,n.selectedGeneForStyling,e&&{clinicalAttribute:n.coloringMenuSelection.selectedOption.info.clinicalAttribute,data:e})):Promise.resolve([]):new Promise(function(){return 0})}}),n.waterfallPlotData=Object(M.S)({await:function(){var e=[n.horzAxisDataPromise,n.vertAxisDataPromise,n.props.store.sampleKeyToSample,n.props.store.coverageInformation,n.mutationPromise,n.props.store.studyToMutationMolecularProfile,n.cnaPromise,n.props.store.studyToMolecularProfileDiscreteCna];return n.coloringMenuSelection.selectedOption&&n.coloringMenuSelection.selectedOption.info.clinicalAttribute&&e.push(n.props.store.clinicalDataCache.get(n.coloringMenuSelection.selectedOption.info.clinicalAttribute)),e},invoke:function(){var e;n.coloringMenuSelection.selectedOption&&n.coloringMenuSelection.selectedOption.info.clinicalAttribute&&(e=n.props.store.clinicalDataCache.get(n.coloringMenuSelection.selectedOption.info.clinicalAttribute).result.data);var t=n.horzAxisDataPromise.result,r=n.vertAxisDataPromise.result;if(t||r){var o=n.isHorizontalWaterfallPlot?t:r,i=n.coloringMenuSelection.selectedOption?n.coloringMenuSelection.selectedOption.info.entrezGeneId:null,a=i?n.props.store.entrezGeneIdToGene.result[i]:null;return Object(d.w)(o)?Promise.resolve({data:Object(d.H)(o,n.props.store.sampleKeyToSample.result,n.props.store.coverageInformation.result.samples,a,n.mutationDataExists.result?{molecularProfileIds:p.a.values(n.props.store.studyToMutationMolecularProfile.result).map(function(e){return e.molecularProfileId}),data:n.mutationPromise.result}:void 0,n.cnaDataShown?{molecularProfileIds:p.a.values(n.props.store.studyToMolecularProfileDiscreteCna.result).map(function(e){return e.molecularProfileId}),data:n.cnaPromise.result}:void 0,e&&{clinicalAttribute:n.coloringMenuSelection.selectedOption.info.clinicalAttribute,data:e})}):Promise.resolve({data:[]})}return new Promise(function(){return 0})}}),n.boxPlotData=Object(M.S)({await:function(){var e=[n.horzAxisDataPromise,n.vertAxisDataPromise,n.props.store.sampleKeyToSample,n.props.store.coverageInformation,n.mutationPromise,n.props.store.studyToMutationMolecularProfile,n.cnaPromise,n.props.store.studyToMolecularProfileDiscreteCna];return n.coloringMenuSelection.selectedOption&&n.coloringMenuSelection.selectedOption.info.clinicalAttribute&&e.push(n.props.store.clinicalDataCache.get(n.coloringMenuSelection.selectedOption.info.clinicalAttribute)),e},invoke:function(){var e;n.coloringMenuSelection.selectedOption&&n.coloringMenuSelection.selectedOption.info.clinicalAttribute&&(e=n.props.store.clinicalDataCache.get(n.coloringMenuSelection.selectedOption.info.clinicalAttribute).result.data);var t=n.horzAxisDataPromise.result,r=n.vertAxisDataPromise.result;if(t&&r){var o,i,a;if(Object(d.w)(t)&&Object(d.x)(r))o=r,i=t,a=!0;else{if(!Object(d.x)(t)||!Object(d.w)(r))return Promise.resolve({horizontal:!1,data:[]});o=t,i=r,a=!1}return Promise.resolve({horizontal:a,data:Object(d.D)(o,i,n.props.store.sampleKeyToSample.result,n.props.store.coverageInformation.result.samples,n.mutationDataExists.result?{molecularProfileIds:p.a.values(n.props.store.studyToMutationMolecularProfile.result).map(function(e){return e.molecularProfileId}),data:n.mutationPromise.result}:void 0,n.cnaDataExists.result?{molecularProfileIds:p.a.values(n.props.store.studyToMolecularProfileDiscreteCna.result).map(function(e){return e.molecularProfileId}),data:n.cnaPromise.result}:void 0,n.selectedGeneForStyling,e&&{clinicalAttribute:n.coloringMenuSelection.selectedOption.info.clinicalAttribute,data:e})})}return new Promise(function(){return 0})}}),n.horzSelection=n.initAxisMenuSelection(!1),n.vertSelection=n.initAxisMenuSelection(!0),n.coloringMenuSelection=n.initColoringMenuSelection(),n.searchCaseInput="",n.searchMutationInput="",window.resultsViewPlotsTab=We(n),n}var n,c,f;return $e(t,r["Component"]),n=t,(c=[{key:"onClickLegendItem",value:function(e){this.highlightedLegendItems.has(e.highlighting.uid)?this.highlightedLegendItems.delete(e.highlighting.uid):this.highlightedLegendItems.set(e.highlighting.uid,e)}},{key:"onClickColorByCopyNumber",value:function(){this.plotType.result===et.WaterfallPlot?(this.coloringMenuSelection.colorByMutationType=!1,this.coloringMenuSelection.colorByCopyNumber=!0):this.coloringMenuSelection.colorByCopyNumber=!this.coloringMenuSelection.colorByCopyNumber}},{key:"onClickColorByMutationType",value:function(){this.plotType.result===et.WaterfallPlot?(this.coloringMenuSelection.colorByCopyNumber=!1,this.coloringMenuSelection.colorByMutationType=!0):this.coloringMenuSelection.colorByMutationType=!this.coloringMenuSelection.colorByMutationType}},{key:"getScrollPane",value:function(){return this.scrollPane}},{key:"getSvg",value:function(){return document.getElementById(st)}},{key:"initAxisMenuSelection",value:function(e){var t=this;return Object(o.observable)({get entrezGeneId(){return t.showGeneSelectBox(this.dataType,this.isGenericAssayType)&&this.selectedGeneOption?e&&this.selectedGeneOption.value===dt?t.horzSelection.entrezGeneId:this.selectedGeneOption.value:void 0},get selectedGeneOption(){var n=(e?t.vertGeneOptions.result:t.horzGeneOptions.result)||[];return void 0===this._selectedGeneOption&&n.length?n[0]:e&&this._selectedGeneOption&&this._selectedGeneOption.value===dt&&t.horzSelection.dataType&&!t.showGeneSelectBox(t.horzSelection.dataType,t.horzSelection.isGenericAssayType)?t.horzSelection.selectedGeneOption:this._selectedGeneOption},set selectedGeneOption(e){this._selectedGeneOption=e},get dataType(){if(!t.dataTypeOptions.isComplete)return this._dataType;var n=t.dataTypeOptions.result;return void 0===this._dataType&&n.length?e&&n.find(function(e){return e.value===a.a.MRNA_EXPRESSION})?a.a.MRNA_EXPRESSION:!e&&n.find(function(e){return e.value===a.a.COPY_NUMBER_ALTERATION})?a.a.COPY_NUMBER_ALTERATION:n[0].value:this._dataType===lt&&(e&&t.vertDatatypeOptions.result||!e&&t.horzDatatypeOptions.result)?(e?t.vertDatatypeOptions.result[0]:t.horzDatatypeOptions.result[0]).value===lt?this._dataType:n[0].value:this._dataType},set dataType(e){this._dataType!==e&&(this._selectedDataSourceOption=void 0),this._dataType=e},get selectedDataSourceOption(){if(!t.dataTypeToDataSourceOptions.isComplete)return this._selectedDataSourceOption;var e=t.dataTypeToDataSourceOptions.result;return void 0===this._selectedDataSourceOption&&this.dataType&&e[this.dataType]&&e[this.dataType].length?e[this.dataType][0]:this._selectedDataSourceOption},set selectedDataSourceOption(e){this._selectedDataSourceOption=e},get dataSourceId(){if(this.selectedDataSourceOption)return this.selectedDataSourceOption.value},get mutationCountBy(){return void 0===this._mutationCountBy?nt.MutationType:this._mutationCountBy},set mutationCountBy(e){this._mutationCountBy=e},get logScale(){return this._logScale&&Object(d.z)(this)},set logScale(e){this._logScale=e},get genesetId(){return this.selectedGenesetOption?this.selectedGenesetOption.value===pt?t.horzSelection.genesetId:this.selectedGenesetOption.value:void 0},get selectedGenesetOption(){var n=(e?t.vertGenesetOptions.result:t.horzGenesetOptions.result)||[];return void 0===this._selectedGenesetOption&&n.length?n[0]:e&&this._selectedGenesetOption&&this._selectedGenesetOption.value===pt&&t.horzSelection.dataType===d.a?t.horzSelection.selectedGenesetOption:this._selectedGenesetOption},set selectedGenesetOption(e){this._selectedGenesetOption=e},get genericAssayEntityId(){return t.showGenericAssaySelectBox(this.dataType,this.isGenericAssayType)&&this.selectedGenericAssayOption?this.selectedGenericAssayOption.value===pt?t.horzSelection.genericAssayEntityId:this.selectedGenericAssayOption.value:void 0},get selectedGenericAssayOption(){var n=(e?t.vertGenericAssayOptions.result:t.horzGenericAssayOptions.result)||[];return void 0===this._selectedGenericAssayOption&&n.length?n[0]:e&&this._selectedGenericAssayOption&&this._selectedGenericAssayOption.value===pt&&t.horzSelection.dataType===d.a?t.horzSelection.selectedGenericAssayOption:this._selectedGenericAssayOption},set selectedGenericAssayOption(e){this._selectedGenericAssayOption=e},get isGenericAssayType(){if(!t.dataTypeOptions.isComplete)return this._isGenericAssayType;var n=t.dataTypeOptions.result;if(e&&t.vertSelection.dataType){var r=p.a.find(n,function(e){return e.value===t.vertSelection.dataType});return r&&r.isGenericAssayType}if(!e&&t.horzSelection.dataType){var o=p.a.find(n,function(e){return e.value===t.horzSelection.dataType});return o&&o.isGenericAssayType}return this._isGenericAssayType},set isGenericAssayType(e){this._isGenericAssayType=e},get _selectedGeneOption(){var n=((e?t.props.urlWrapper.query.plots_vert_selection:t.props.urlWrapper.query.plots_horz_selection)||{}).selectedGeneOption;if(n){var r=parseFloat(n);return((e?t.vertGeneOptions.result:t.horzGeneOptions.result)||[]).find(function(e){return e.value===r})}},set _selectedGeneOption(n){t.props.urlWrapper.updateURL(function(t){return e?t.plots_vert_selection.selectedGeneOption=n&&n.value:t.plots_horz_selection.selectedGeneOption=n&&n.value,t})},get _selectedGenesetOption(){var n=((e?t.props.urlWrapper.query.plots_vert_selection:t.props.urlWrapper.query.plots_horz_selection)||{}).selectedGenesetOption;return n?((e?t.vertGenesetOptions.result:t.horzGenesetOptions.result)||[]).find(function(e){return e.value===n}):void 0},set _selectedGenesetOption(n){t.props.urlWrapper.updateURL(function(t){return e?t.plots_vert_selection.selectedGenesetOption=n&&n.value:t.plots_horz_selection.selectedGenesetOption=n&&n.value,t})},get _selectedGenericAssayOption(){var n=((e?t.props.urlWrapper.query.plots_vert_selection:t.props.urlWrapper.query.plots_horz_selection)||{}).selectedGenericAssayOption;return n?((e?t.vertGenericAssayOptions.result:t.horzGenericAssayOptions.result)||[]).find(function(e){return e.value===n}):void 0},set _selectedGenericAssayOption(n){t.props.urlWrapper.updateURL(function(t){return e?t.plots_vert_selection.selectedGenericAssayOption=n&&n.value:t.plots_horz_selection.selectedGenericAssayOption=n&&n.value,t})},get _selectedDataSourceOption(){var n=((e?t.props.urlWrapper.query.plots_vert_selection:t.props.urlWrapper.query.plots_horz_selection)||{}).selectedDataSourceOption;if(n){var r=t.dataTypeToDataSourceOptions.result;return this.dataType&&r&&r[this.dataType]&&r[this.dataType].length?r[this.dataType].find(function(e){return e.value===n}):void 0}},set _selectedDataSourceOption(n){t.props.urlWrapper.updateURL(function(t){return e?t.plots_vert_selection.selectedDataSourceOption=n&&n.value:t.plots_horz_selection.selectedDataSourceOption=n&&n.value,t})},get _dataType(){return((e?t.props.urlWrapper.query.plots_vert_selection:t.props.urlWrapper.query.plots_horz_selection)||{}).dataType},set _dataType(n){t.props.urlWrapper.updateURL(function(t){return e?t.plots_vert_selection.dataType=n:t.plots_horz_selection.dataType=n,t})},get _mutationCountBy(){return((e?t.props.urlWrapper.query.plots_vert_selection:t.props.urlWrapper.query.plots_horz_selection)||{}).mutationCountBy},set _mutationCountBy(n){t.props.urlWrapper.updateURL(function(t){return e?t.plots_vert_selection.mutationCountBy=n:t.plots_horz_selection.mutationCountBy=n,t})},get _logScale(){return"true"===((e?t.props.urlWrapper.query.plots_vert_selection:t.props.urlWrapper.query.plots_horz_selection)||{}).logScale},set _logScale(n){t.props.urlWrapper.updateURL(function(t){return e?t.plots_vert_selection.logScale=n.toString():t.plots_horz_selection.logScale=n.toString(),t})},_isGenericAssayType:void 0})}},{key:"initColoringMenuSelection",value:function(){var e=this;return Object(o.observable)({get selectedOption(){var t=this,n=e.coloringMenuOmnibarOptions.isComplete?p.a.flatMap(e.coloringMenuOmnibarOptions.result,function(e){return e.options?e.options:e}):[];if(void 0===this._selectedOptionValue&&n.length){var r=void 0;return(r=n.find(function(e){return void 0!==e.info.entrezGeneId&&e.info.entrezGeneId!==ut&&e.info.entrezGeneId===t.default.entrezGeneId}))||(r=n.find(function(e){return void 0!==e.info.entrezGeneId&&e.info.entrezGeneId!==ut})),r}return n.find(function(e){return e.value===t._selectedOptionValue})},set selectedOption(e){this._selectedOptionValue=e&&e.value},get _selectedOptionValue(){return e.props.urlWrapper.query.plots_coloring_selection.selectedOption},set _selectedOptionValue(t){Object(o.runInAction)(function(){e.props.urlWrapper.updateURL(function(e){return e.plots_coloring_selection.selectedOption=t,e}),e.highlightedLegendItems.clear()})},get logScale(){return"true"===e.props.urlWrapper.query.plots_coloring_selection.logScale},set logScale(t){e.props.urlWrapper.updateURL(function(e){return e.plots_coloring_selection.logScale=t.toString(),e})},get colorByMutationType(){return"false"!==e.props.urlWrapper.query.plots_coloring_selection.colorByMutationType},set colorByMutationType(t){Object(o.runInAction)(function(){e.props.urlWrapper.updateURL(function(e){return e.plots_coloring_selection.colorByMutationType=t.toString(),e}),e.highlightedLegendItems.clear()})},get colorByCopyNumber(){return e.plotType.result===et.WaterfallPlot?this._colorByCopyNumber&&!this.colorByMutationType:this._colorByCopyNumber},get _colorByCopyNumber(){return"false"!==e.props.urlWrapper.query.plots_coloring_selection.colorByCopyNumber},set colorByCopyNumber(t){Object(o.runInAction)(function(){e.props.urlWrapper.updateURL(function(e){return e.plots_coloring_selection.colorByCopyNumber=t.toString(),e}),e.highlightedLegendItems.clear()})},default:{entrezGeneId:void 0}})}},{key:"updateColoringMenuGene",value:function(e){this.coloringMenuSelection.selectedOption=void 0,this.coloringMenuSelection.default.entrezGeneId=e}},{key:"onInputClick",value:function(e){this.plotType.result;switch(parseInt(e.target.value,10)){case Xe.horz_logScale:this.horzSelection.logScale=!this.horzSelection.logScale;break;case Xe.vert_logScale:this.vertSelection.logScale=!this.vertSelection.logScale;break;case Xe.utilities_showRegressionLine:this.showRegressionLine=!this.showRegressionLine;break;case Xe.utilities_horizontalBars:this.horizontalBars=!this.horizontalBars;break;case Xe.utilities_viewLimitValues:this.viewLimitValues=!this.viewLimitValues}}},{key:"downloadData",value:function(){var e=this;Object(Me.a)([this.props.store.entrezGeneIdToGene,this.props.store.sampleKeyToSample,this.horzLabel,this.vertLabel],function(t,n,r,o){var i="".concat(e.downloadFilename,".txt");switch(e.plotType.result){case et.ScatterPlot:Te()(Object(d.u)(e.scatterPlotData.result,r,o,t,e.coloringMenuSelection.colorByMutationType,e.coloringMenuSelection.colorByCopyNumber,e.coloringMenuSelection.selectedOption&&e.coloringMenuSelection.selectedOption.info.clinicalAttribute),i);break;case et.WaterfallPlot:Te()(Object(d.v)(e.waterfallPlotData.result.data,e.waterfallPlotSortOrder,e.waterfallPlotPivotThreshold,e.waterfallLabel.result,t,e.coloringMenuSelection.colorByMutationType,e.coloringMenuSelection.colorByCopyNumber,e.coloringMenuSelection.selectedOption&&e.coloringMenuSelection.selectedOption.info.clinicalAttribute),i);break;case et.BoxPlot:var a=e.boxPlotData.result.horizontal?o:r,s=e.boxPlotData.result.horizontal?r:o;Te()(Object(d.p)(e.boxPlotData.result.data,a,s,t,e.coloringMenuSelection.colorByMutationType,e.coloringMenuSelection.colorByCopyNumber,e.coloringMenuSelection.selectedOption&&e.coloringMenuSelection.selectedOption.info.clinicalAttribute),i);break;case et.DiscreteVsDiscrete:Te()(function(e,t,n,r,o){var i=[],a=!0,s=!1,l=void 0;try{for(var u,c=oe(e,t)[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var p=u.value,d=[];d.push(n[p.uniqueSampleKey].sampleId),d.push(p.horz||"n/a"),d.push(p.vert||"n/a"),i.push(d.join("\t"))}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}return["Sample Id",r,o].join("\t")+"\n"+i.join("\n")}(e.horzAxisDataPromise.result.data,e.vertAxisDataPromise.result.data,n,r,o),i)}})}},{key:"setSearchCaseInput",value:function(e){var t=this;this.searchCaseInput=e.target.value,clearTimeout(this.searchCaseTimeout),this.searchCaseTimeout=setTimeout(function(){return t.executeSearchCase(t.searchCaseInput)},600)}},{key:"setSearchMutationInput",value:function(e){var t=this;this.searchMutationInput=e.target.value,clearTimeout(this.searchMutationTimeout),this.searchMutationTimeout=setTimeout(function(){return t.executeSearchMutation(t.searchMutationInput)},600)}},{key:"executeSearchCase",value:function(e){this.searchCase=e}},{key:"executeSearchMutation",value:function(e){this.searchMutation=e}},{key:"getHorizontalAxisMenu",value:function(){return this.dataTypeOptions.isComplete&&this.dataTypeToDataSourceOptions.isComplete?this.getAxisMenu(!1,this.dataTypeToDataSourceOptions.result):r.createElement("span",null)}},{key:"getVerticalAxisMenu",value:function(){return this.dataTypeOptions.isComplete&&this.dataTypeToDataSourceOptions.isComplete?this.getAxisMenu(!0,this.dataTypeToDataSourceOptions.result):r.createElement("span",null)}},{key:"onVerticalAxisGeneSelect",value:function(e){this.vertSelection.selectedGeneOption=e,this.viewLimitValues=!0,this.selectionHistory.updateVerticalFromSelection(this.vertSelection),this.autoChooseColoringMenuGene()}},{key:"onHorizontalAxisGeneSelect",value:function(e){this.horzSelection.selectedGeneOption=e,this.viewLimitValues=!0,this.selectionHistory.updateHorizontalFromSelection(this.horzSelection),this.autoChooseColoringMenuGene()}},{key:"selectSameGeneOptionForVerticalAxis",value:function(){if(this.vertGeneOptions.result){var e=this.vertGeneOptions.result.find(function(e){return e.value===dt});e&&this.onVerticalAxisGeneSelect(e)}}},{key:"onVerticalAxisGenesetSelect",value:function(e){this.vertSelection.selectedGenesetOption=e,this.viewLimitValues=!0,this.selectionHistory.updateVerticalFromSelection(this.vertSelection)}},{key:"onHorizontalAxisGenesetSelect",value:function(e){this.horzSelection.selectedGenesetOption=e,this.viewLimitValues=!0,this.selectionHistory.updateHorizontalFromSelection(this.horzSelection)}},{key:"onVerticalAxisGenericAssaySelect",value:function(e){this.vertSelection.selectedGenericAssayOption=e,this.viewLimitValues=!0,this.selectionHistory.updateVerticalFromSelection(this.vertSelection)}},{key:"onHorizontalAxisGenericAssaySelect",value:function(e){this.horzSelection.selectedGenericAssayOption=e,this.viewLimitValues=!0,this.selectionHistory.updateHorizontalFromSelection(this.horzSelection)}},{key:"onColoringMenuOptionSelect",value:function(e){this.coloringMenuSelection.selectedOption=e}},{key:"test__selectGeneOption",value:function(e,t){var n=(e?this.vertGeneOptions.result||[]:this.horzGeneOptions.result||[]).find(function(e){return e.value===t});if(!n)throw"Option not found";e?this.onVerticalAxisGeneSelect(n):this.onHorizontalAxisGeneSelect(n)}},{key:"showGeneSelectBox",value:function(e,t){return e!==lt&&e!==d.c&&e!==d.a&&!t}},{key:"showGenesetSelectBox",value:function(e){return e!==lt&&e===d.c}},{key:"showGenericAssaySelectBox",value:function(e,t){return e!==lt&&!!t}},{key:"showDatasourceBox",value:function(e){return e!==lt}},{key:"showSortOrderButton",value:function(e){return!!this.waterfallPlotIsShown&&(e?!this.isHorizontalWaterfallPlot:this.isHorizontalWaterfallPlot)}},{key:"onVerticalAxisDataTypeSelect",value:function(e){var t=this.vertSelection.selectedGeneOption,n=this.horzSelection.selectedGeneOption;this.vertSelection.dataType=e.value,e.isGenericAssayType&&(this.vertSelection.isGenericAssayType=!0),this.viewLimitValues=!0,this.selectionHistory.runVerticalUpdaters(e.value,this.onVerticalAxisGeneSelect,this.onVerticalAxisGenesetSelect,this.onVerticalAxisDataSourceSelect,this.onVerticalAxisGenericAssaySelect),this.vertSelection.dataType&&!this.showGeneSelectBox(this.vertSelection.dataType,this.vertSelection.isGenericAssayType)&&n&&n.value==dt&&this.onHorizontalAxisGeneSelect(t),this.autoChooseColoringMenuGene()}},{key:"onHorizontalAxisDataTypeSelect",value:function(e){var t=this.horzSelection.selectedGeneOption,n=this.vertSelection.selectedGeneOption;this.horzSelection.dataType=e.value,e.isGenericAssayType&&(this.horzSelection.isGenericAssayType=!0),this.viewLimitValues=!0,this.selectionHistory.runHorizontalUpdaters(e.value,this.onHorizontalAxisGeneSelect,this.onHorizontalAxisGenesetSelect,this.onHorizontalAxisDataSourceSelect,this.onHorizontalAxisGenericAssaySelect),this.horzSelection.dataType&&!this.showGeneSelectBox(this.horzSelection.dataType,this.horzSelection.isGenericAssayType)&&n&&n.value==dt&&this.onVerticalAxisGeneSelect(t),this.autoChooseColoringMenuGene()}},{key:"onVerticalAxisDataSourceSelect",value:function(e){this.vertSelection.selectedDataSourceOption=e,this.vertSelection.selectedGenericAssayOption=void 0,this.viewLimitValues=!0,this.selectionHistory.updateVerticalFromSelection(this.vertSelection),this.autoChooseColoringMenuGene()}},{key:"onHorizontalAxisDataSourceSelect",value:function(e){this.horzSelection.selectedDataSourceOption=e,this.horzSelection.selectedGenericAssayOption=void 0,this.viewLimitValues=!0,this.selectionHistory.updateHorizontalFromSelection(this.horzSelection),this.autoChooseColoringMenuGene()}},{key:"autoChooseColoringMenuGene",value:function(){var e=this.coloringMenuSelection.selectedOption?this.coloringMenuSelection.selectedOption.info.entrezGeneId:void 0;if(this.oneAxisMolecularProfile){var t=this.hasMolecularProfile(this.horzSelection.dataType)?this.horzSelection.selectedGeneOption:this.vertSelection.selectedGeneOption;this.updateColoringMenuGene(t.value)}else this.bothAxesMolecularProfile&&e!==this.horzSelection.selectedGeneOption.value&&e!==this.vertSelection.selectedGeneOption.value&&this.updateColoringMenuGene(this.horzSelection.selectedGeneOption.value);!this.coloringMenuSelection.selectedOption||this.coloringMenuSelection.selectedOption.info.entrezGeneId===ut||this.coloringMenuSelection.colorByCopyNumber||this.coloringMenuSelection.colorByMutationType||(this.coloringMenuSelection.colorByMutationType=!0,this.coloringMenuSelection.colorByCopyNumber=!0)}},{key:"onVerticalAxisMutationCountBySelect",value:function(e){this.vertSelection.mutationCountBy=e.value,this.viewLimitValues=!0,this.autoChooseColoringMenuGene()}},{key:"onHorizontalAxisMutationCountBySelect",value:function(e){this.horzSelection.mutationCountBy=e.value,this.viewLimitValues=!0,this.autoChooseColoringMenuGene()}},{key:"onDiscreteVsDiscretePlotTypeSelect",value:function(e){this.discreteVsDiscretePlotType=e.value}},{key:"onSortOrderButtonPressed",value:function(){this._waterfallPlotSortOrder="ASC"===this.waterfallPlotSortOrder?"DESC":"ASC"}},{key:"swapHorzVertSelections",value:function(){var e=this,t=["dataType","selectedDataSourceOption","logScale","mutationCountBy"];this.vertSelection.selectedGeneOption&&this.vertSelection.selectedGeneOption.value===dt||t.push("selectedGeneOption"),this.vertSelection.selectedGenesetOption&&this.vertSelection.selectedGenesetOption.value===pt||t.push("selectedGenesetOption"),this.vertSelection.selectedGenericAssayOption&&this.vertSelection.selectedGenericAssayOption.value===pt||t.push("selectedGenericAssayOption");for(var n=t.map(function(t){return e.horzSelection[t]}),r=t.map(function(t){return e.vertSelection[t]}),o=0;o<t.length;o++)this.horzSelection[t[o]]=r[o],this.vertSelection[t[o]]=n[o]}},{key:"isAxisMolecularProfile",value:function(e){return void 0!==e.dataType&&e.dataType!==lt&&e.dataType!==d.a&&e.dataType!==d.c&&!e.isGenericAssayType}},{key:"scatterPlotStroke",value:function(e){return this.scatterPlotAppearance(e).stroke}},{key:"scatterPlotStrokeOpacity",value:function(e){return this.scatterPlotAppearance(e).strokeOpacity}},{key:"scatterPlotSymbol",value:function(e){return this.scatterPlotAppearance(e).symbol||"circle"}},{key:"waterfallPlotColor",value:function(e){switch(this.coloringType){case Ze.CopyNumber:case Ze.LimitValCopyNumber:return this.scatterPlotStroke(e);case Ze.MutationType:case Ze.LimitValMutationType:case Ze.ClinicalData:return this.scatterPlotAppearance(e).fill;case Ze.LimitVal:case Ze.None:default:return d.i.fill}}},{key:"waterfallPlotLimitValueSymbolVisibility",value:function(e){switch(this.coloringType){case Ze.LimitVal:case Ze.LimitValMutationType:case Ze.LimitValCopyNumber:case Ze.LimitValMutationTypeAndCopyNumber:return Object(v.b)(e);default:return!1}}},{key:"scatterPlotTooltip",value:function(e){return Object(d.K)(e,this.horzLogScaleFunction,this.vertLogScaleFunction,this.coloringMenuSelection.selectedOption&&this.coloringMenuSelection.selectedOption.info.clinicalAttribute)}},{key:"waterfallPlotTooltip",value:function(e){return Object(d.R)(e,this.coloringMenuSelection.selectedOption&&this.coloringMenuSelection.selectedOption.info.clinicalAttribute)}},{key:"isDisabledAxisLogCheckbox",value:function(e){return e?this.vertAxisDataHasNegativeNumbers:this.horzAxisDataHasNegativeNumbers}},{key:"getAxisMenu",value:function(e,t){var n=e?this.vertSelection:this.horzSelection;if(n.dataType===d.a&&!this.clinicalAttributeIdToClinicalAttribute.isComplete||n.dataType!==d.a&&n.dataType!==a.a.MUTATION_EXTENDED&&!this.props.store.molecularProfileIdToMolecularProfile.isComplete||n.dataType&&n.isGenericAssayType&&!this.horzGenericAssayOptions.isComplete)return r.createElement(Ee.a,{isLoading:!0});var o=e?"Vertical":"Horizontal",i="Profile",c=n.dataSourceId,p=(n.dataType?t[n.dataType]:[])||[],f=e?this.onVerticalAxisDataSourceSelect:this.onHorizontalAxisDataSourceSelect;switch(n.dataType){case d.a:i="Clinical Attribute";break;case a.a.MUTATION_EXTENDED:i="Group Mutations by",c=n.mutationCountBy,p=ft,f=e?this.onVerticalAxisMutationCountBySelect:this.onHorizontalAxisMutationCountBySelect;break;case void 0:break;default:i="".concat(n.isGenericAssayType?Object(d.n)(n.dataType):d.m[n.dataType]," Profile")}var h="";c&&n.dataType!==a.a.MUTATION_EXTENDED&&(h=n.dataType===d.a?this.clinicalAttributeIdToClinicalAttribute.result[c].description:this.props.store.molecularProfileIdToMolecularProfile.result[c].description);var m="";if(n.dataType===lt){var y=e?this.horzSelection.dataSourceId:this.vertSelection.dataSourceId,g=this.props.store.molecularProfileIdToMolecularProfile.result[y].name;m="Sample order determined by values on the '".concat(g,"' axis")}var v="",b="",S=e?this.vertSelection.genericAssayEntityId:this.horzSelection.genericAssayEntityId;if(n.dataType&&n.isGenericAssayType&&S){var _=this.genericEntitiesGroupByEntityId.result[S];v="DESCRIPTION"in _.genericEntityMetaProperties?_.genericEntityMetaProperties.DESCRIPTION:"",b="URL"in _.genericEntityMetaProperties?_.genericEntityMetaProperties.URL:""}var w=[],E=[];return n.dataType&&this.selectedGenericAssayEntitiesGroupByGenericAssayTypeFromUrl&&this.selectedGenericAssayEntitiesGroupByGenericAssayTypeFromUrl[n.dataType]&&(E=this.selectedGenericAssayEntitiesGroupByGenericAssayTypeFromUrl[n.dataType]),e&&this.vertGenericAssayOptions.result?w=this.makeGenericAssayGroupOptions(this.vertGenericAssayOptions.result,E)||[]:!e&&this.horzGenericAssayOptions.result&&(w=this.makeGenericAssayGroupOptions(this.horzGenericAssayOptions.result,E)||[]),r.createElement("form",{className:"main-form"},r.createElement("h4",{className:"tab-title"},e?"Vertical":"Horizontal"," Axis"),r.createElement("div",null,r.createElement("div",{style:{marginBottom:"5px"},className:"form-group"},r.createElement("label",{className:"label-text"},"Data Type"),r.createElement("div",{style:{display:"flex",alignItems:"center"}},r.createElement(l.default,{name:"".concat(e?"v":"h","-profile-type-selector"),value:n.dataType,onChange:e?this.onVerticalAxisDataTypeSelect:this.onHorizontalAxisDataTypeSelect,options:(e?this.vertDatatypeOptions.result:this.horzDatatypeOptions.result)||[],clearable:!1,searchable:!1}),m&&r.createElement(Oe.a,{tooltip:r.createElement("span",null,m),tooltipPlacement:"right",style:{marginLeft:7}}))),this.showSortOrderButton(!e)&&r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement(s.Button,{className:"btn btn-default sort-order","data-test":"changeSortOrderButton",type:"button",onClick:this.onSortOrderButtonPressed},r.createElement("i",{className:this.sortOrderImageClassName})),"Sort Order")),n.dataType&&this.showDatasourceBox(n.dataType)&&r.createElement("div",{style:{marginBottom:"5px"},className:"form-group"},r.createElement("label",{className:"label-text"},i),r.createElement("div",{style:{display:"flex",alignItems:"center"}},r.createElement(l.default,{className:"data-source-id",name:"".concat(e?"v":"h","-profile-name-selector"),value:c,onChange:f,options:p,clearable:!1,searchable:!0}),h&&r.createElement(Oe.a,{tooltip:r.createElement("span",null,h),tooltipPlacement:"right",style:{marginLeft:7}}))),Object(d.z)(n)&&r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{"data-test":"".concat(o,"LogCheckbox"),type:"checkbox",name:"vert_logScale",value:e?Xe.vert_logScale:Xe.horz_logScale,checked:n.logScale&&!this.isDisabledAxisLogCheckbox(e),disabled:this.isDisabledAxisLogCheckbox(e),onClick:this.onInputClick}),"Log Scale")),(e&&this.vertLimitValuesCanBeShown||!e&&this.horzLimitValuesCanBeShown)&&r.createElement("div",{className:"checkbox color-samples-toolbar-elt"},r.createElement("label",{className:"limit-value-label"},r.createElement("input",{"data-test":"ViewLimitValues",type:"checkbox",name:"utilities_viewLimitValues",value:Xe.utilities_viewLimitValues,checked:this.viewLimitValues,onClick:this.onInputClick,disabled:e&&!this.vertLimitValuesCanBeShown||!e&&!this.horzLimitValuesCanBeShown}),e?this.vertMenuLimitValueLabel:this.horzMenuLimitValueLabel)),n.dataType&&this.showGeneSelectBox(n.dataType,n.isGenericAssayType)&&r.createElement("div",{className:"form-group",style:{display:n.dataType===d.a?"none":"block"}},r.createElement("label",null,"Gene"),r.createElement("div",{style:{display:"flex"}},r.createElement(l.default,{name:"".concat(e?"v":"h","-gene-selector"),value:n.selectedGeneOption?n.selectedGeneOption.value:void 0,onChange:e?this.onVerticalAxisGeneSelect:this.onHorizontalAxisGeneSelect,isLoading:this.horzGeneOptions.isPending,options:(e?this.vertGeneOptions.result:this.horzGeneOptions.result)||[],clearable:!1,searchable:!1,disabled:n.dataType===d.a||n.dataType===d.c}))),n.dataType&&this.showGenesetSelectBox(n.dataType)&&r.createElement("div",{className:"form-group",style:{opacity:1}},r.createElement("label",null,"Gene Set"),r.createElement("div",{style:{display:"flex"}},r.createElement(l.default,{name:"".concat(e?"v":"h","-geneset-selector"),value:n.selectedGenesetOption?n.selectedGenesetOption.value:void 0,onChange:e?this.onVerticalAxisGenesetSelect:this.onHorizontalAxisGenesetSelect,isLoading:this.horzGenesetOptions.isPending,options:(e?this.vertGenesetOptions.result:this.horzGenesetOptions.result)||[],clearable:!1,searchable:!1,disabled:n.dataType!==d.c}))),n.dataType&&this.showGenericAssaySelectBox(n.dataType,n.isGenericAssayType)&&r.createElement("div",{className:"form-group",style:{opacity:1}},r.createElement("label",null,Object(d.n)(n.dataType,!0)),r.createElement("div",{style:{display:"flex",alignItems:"center"}},r.createElement(u.default,{name:"".concat(e?"v":"h","-generic-assay-selector"),className:"genericAssaySelectBox",value:n.selectedGenericAssayOption?n.selectedGenericAssayOption:void 0,onChange:e?this.onVerticalAxisGenericAssaySelect:this.onHorizontalAxisGenericAssaySelect,isLoading:this.horzGenericAssayOptions.isPending||this.props.store.genericAssayEntitiesGroupByMolecularProfileId.isPending,options:w,formatGroupLabel:function(e){return r.createElement("div",null,r.createElement("span",null,e.label))},clearable:!1,searchable:!0,disabled:void 0===n.dataType||n.dataType===d.a||!n.isGenericAssayType}),v&&r.createElement("div",{"data-test":"generic-assay-info-icon"},r.createElement(Oe.a,{tooltip:r.createElement("div",null,b&&n.selectedGenericAssayOption&&r.createElement("a",{target:"_blank",href:b},r.createElement("b",null,n.selectedGenericAssayOption.value)),r.createElement("div",null,v)),tooltipPlacement:"right",style:{marginLeft:7}}))))))}},{key:"makeGenericAssayGroupOptions",value:function(e,t){if(e){var n=e.filter(function(e){return t.includes(e.value)}),r=p.a.difference(e,n);return 0===n.length?e:[{label:"Selected entities",options:n},{label:"Other entities",options:r}]}}},{key:"getUtilitiesMenu",value:function(){var e=this.plotType.isComplete&&this.plotType.result!==et.DiscreteVsDiscrete,t=this.plotType.isComplete&&this.plotType.result===et.DiscreteVsDiscrete,n=t&&this.discreteVsDiscretePlotType!==tt.Table,o=this.mutationDataCanBeShown||this.cnaDataCanBeShown,i=this.plotType.isComplete&&this.plotType.result===et.ScatterPlot;return e||o||t||n||i?r.createElement("div",{style:{marginTop:10}},r.createElement("div",null,e&&r.createElement("div",null,r.createElement("div",{className:"form-group"},r.createElement("label",null,"Search Case(s)"),r.createElement(s.FormControl,{type:"text",value:this.searchCaseInput,onChange:this.setSearchCaseInput,placeholder:"Case ID.."})),this.mutationDataCanBeShown&&r.createElement("div",{className:"form-group"},r.createElement("label",null,"Search Mutation(s)"),r.createElement(s.FormControl,{type:"text",value:this.searchMutationInput,onChange:this.setSearchMutationInput,placeholder:"Protein Change.."}),this.showMutationNotFoundMessage&&r.createElement("span",{className:"mutation-message"},"Mutation not found for selected gene"))),t&&r.createElement("div",{className:"form-group"},r.createElement("label",null,"Plot Type"),r.createElement("div",{style:{display:"flex"}},r.createElement(l.default,{name:"discrete-vs-discrete-plot-type",value:this.discreteVsDiscretePlotType,onChange:this.onDiscreteVsDiscretePlotTypeSelect,options:ht,clearable:!1,searchable:!0}))),n&&r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{"data-test":"horizontalBars",type:"checkbox",name:"utilities_horizontalBars",value:Xe.utilities_horizontalBars,checked:this.horizontalBars,onClick:this.onInputClick})," ","Horizontal Bars")),i&&r.createElement("div",{className:"checkbox",style:{marginTop:14}},r.createElement("label",null,r.createElement("input",{"data-test":"ShowRegressionline",type:"checkbox",name:"utilities_showRegressionLine",value:Xe.utilities_showRegressionLine,checked:this.showRegressionLine,onClick:this.onInputClick})," ","Show Regression Line")))):r.createElement("span",null)}},{key:"assignScrollPaneRef",value:function(e){this.scrollPane=e}},{key:"controls",value:function(){return r.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.createElement("div",{className:"axisBlock"},r.createElement(i.Observer,null,this.getHorizontalAxisMenu)),r.createElement("div",{className:"swapAxes"},r.createElement("button",{className:"btn btn-link btn-xs","data-test":"swapHorzVertButton",onClick:this.swapHorzVertSelections},r.createElement("i",{className:"fa fa-arrow-up"})," Swap Axes"," ",r.createElement("i",{className:"fa fa-arrow-down"}))),r.createElement("div",{className:"axisBlock"},r.createElement(i.Observer,null,this.getVerticalAxisMenu)),r.createElement("div",null,r.createElement(i.Observer,null,this.getUtilitiesMenu)))}},{key:"componentDidUpdate",value:function(){this.plotExists=!!this.getSvg()}},{key:"render",value:function(){return r.createElement("div",{"data-test":"PlotsTabEntireDiv"},r.createElement("div",{className:"tabMessageContainer"},r.createElement(ke.a,{className:"plots-oql-status-banner",store:this.props.store,tabReflectsOql:!1}),r.createElement(je.a,{store:this.props.store,isUnaffected:!0})),r.createElement("div",{className:"plotsTab"},r.createElement("div",{className:"quickPlotsContainer"},r.createElement("strong",{className:"quickPlotsTitle"},"Examples: "),this.quickPlotButtons),r.createElement("div",{style:{display:"flex"}},r.createElement("div",{className:"leftColumn"},this.dataTypeOptions.isComplete&&this.dataTypeToDataSourceOptions.isComplete?r.createElement(i.Observer,null,this.controls):r.createElement(Ee.a,{isLoading:!0,center:!0,size:"big"})),r.createElement("div",{className:"chartWrapper"},this.plot))))}},{key:"coloringType",get:function(){if(this.coloringMenuSelection.selectedOption&&this.coloringMenuSelection.selectedOption.info.clinicalAttribute)return Ze.ClinicalData;var e=Ze.None,t=this.coloringMenuSelection.colorByMutationType,n=this.coloringMenuSelection.colorByCopyNumber;switch(this.potentialColoringType){case Je.MutationTypeAndCopyNumber:e=t&&n?Ze.MutationTypeAndCopyNumber:t?Ze.MutationType:n?Ze.CopyNumber:Ze.None;break;case Je.LimitValMutationTypeAndCopyNumber:e=t&&n&&this.viewLimitValues?Ze.LimitValMutationTypeAndCopyNumber:t&&n?Ze.MutationTypeAndCopyNumber:t&&this.viewLimitValues?Ze.LimitValMutationType:n&&this.viewLimitValues?Ze.LimitValCopyNumber:t?Ze.MutationType:n?Ze.CopyNumber:this.viewLimitValues?Ze.LimitVal:Ze.None;break;case Je.LimitVal:this.viewLimitValues&&(e=Ze.LimitVal)}return e}},{key:"quickPlotButtons",get:function(){var e=this;if(!(this.dataTypeOptions.isComplete&&this.dataTypeToDataSourceOptions.isComplete&&this.props.store.samplesByDetailedCancerType.isComplete&&this.props.store.mutations.isComplete))return r.createElement(Ee.a,{isLoading:!0,size:"small"});var t=Object.keys(this.props.store.samplesByDetailedCancerType.result),n=this.props.store.mutations.result.length,i=this.horzSelection.selectedDataSourceOption?this.horzSelection.selectedDataSourceOption.value:void 0,a=this.vertSelection.selectedDataSourceOption?this.vertSelection.selectedDataSourceOption.value:void 0,s=function(e,t,n,r,o,i){return Fe.filter(function(o){return o.isApplicableToQuery(e,t,n,r)}).map(function(n){return n.toButtonInfo(i,o,e,t)})}(this.dataTypeOptions.result,this.dataTypeToDataSourceOptions.result,t,n,{type:this.horzSelection.dataType,source:i},{type:this.vertSelection.dataType,source:a});return r.createElement("div",{className:"pillTabs"},r.createElement("ul",{className:"nav nav-pills"},s.map(function(t){return r.createElement("li",{className:"plots-tab-pills "+(t.selected?"active":""),onClick:Object(o.action)(function(){t.plotModel.horizontal.dataType&&e.onHorizontalAxisDataTypeSelect(t.plotModel.horizontal.dataType),t.plotModel.horizontal.dataSource&&e.onHorizontalAxisDataSourceSelect(t.plotModel.horizontal.dataSource),t.plotModel.vertical.dataType&&e.onVerticalAxisDataTypeSelect(t.plotModel.vertical.dataType),t.plotModel.vertical.dataSource&&e.onVerticalAxisDataSourceSelect(t.plotModel.vertical.dataSource),t.plotModel.vertical.useSameGene&&e.selectSameGeneOptionForVerticalAxis()})},r.createElement("a",null,t.display))})))}},{key:"potentialColoringType",get:function(){return this.plotType.result===et.DiscreteVsDiscrete?Je.None:this.limitValuesCanBeShown?Je.LimitValMutationTypeAndCopyNumber:Je.MutationTypeAndCopyNumber}},{key:"bothAxesNoMolecularProfile",get:function(){return Object(d.j)(this.horzSelection,this.vertSelection)}},{key:"waterfallPlotIsShown",get:function(){return Object(d.M)(this.horzSelection,this.vertSelection)}},{key:"hasMolecularProfile",get:function(){return function(e){return e!==d.a&&e!==a.a.GENERIC_ASSAY}}},{key:"bothAxesMolecularProfile",get:function(){return this.isAxisMolecularProfile(this.horzSelection)&&this.isAxisMolecularProfile(this.vertSelection)}},{key:"oneAxisMolecularProfile",get:function(){return this.isAxisMolecularProfile(this.horzSelection)!==this.isAxisMolecularProfile(this.vertSelection)}},{key:"sameGeneInBothAxes",get:function(){return this.bothAxesMolecularProfile&&this.horzSelection.entrezGeneId===this.vertSelection.entrezGeneId}},{key:"cnaDataCanBeShown",get:function(){return!(!this.cnaDataExists.result||this.potentialColoringType!==Je.MutationTypeAndCopyNumber&&this.potentialColoringType!==Je.LimitValMutationTypeAndCopyNumber)}},{key:"limitValuesCanBeShown",get:function(){return this.limitValueTypes.length>0}},{key:"limitValueTypes",get:function(){return p.a.uniq(this.horzLimitValueTypes.concat(this.vertLimitValueTypes))}},{key:"horzLimitValueTypes",get:function(){return this.horzAxisDataPromise.result&&this.horzSelection.dataType&&this.horzSelection.isGenericAssayType?Object(d.s)(this.horzAxisDataPromise.result.data):[]}},{key:"horzLimitValuesCanBeShown",get:function(){return this.horzLimitValueTypes.length>0}},{key:"vertLimitValueTypes",get:function(){return this.vertAxisDataPromise.result&&this.vertSelection.dataType&&this.vertSelection.isGenericAssayType?Object(d.s)(this.vertAxisDataPromise.result.data):[]}},{key:"vertLimitValuesCanBeShown",get:function(){return this.vertLimitValueTypes.length>0}},{key:"legendLimitValueLabel",get:function(){return"value ".concat(this.limitValueTypes.join(" or ")).concat(this.isWaterfallPlot?"":" **")}},{key:"vertMenuLimitValueLabel",get:function(){return"Value ".concat(this.vertLimitValueTypes.join(" or ")," Labels").concat(this.isWaterfallPlot?"":" **")}},{key:"horzMenuLimitValueLabel",get:function(){return"Value ".concat(this.horzLimitValueTypes.join(" or ")," Labels").concat(this.isWaterfallPlot?"":" **")}},{key:"cnaDataShown",get:function(){return!(!this.cnaDataExists.result||this.coloringType!==Ze.CopyNumber&&this.coloringType!==Ze.MutationTypeAndCopyNumber&&this.coloringType!==Ze.LimitValCopyNumber&&this.coloringType!==Ze.LimitValMutationTypeAndCopyNumber)}},{key:"mutationDataCanBeShown",get:function(){return!(!this.mutationDataExists.result||this.potentialColoringType===Je.None||this.potentialColoringType===Je.LimitVal)}},{key:"mutationDataShown",get:function(){return!(!this.mutationDataExists.result||this.coloringType!==Ze.MutationType&&this.coloringType!==Ze.MutationTypeAndCopyNumber)}},{key:"plotDataExistsForTwoAxes",get:function(){return this.horzAxisDataPromise.isComplete&&this.horzAxisDataPromise.result.data.length>0&&this.vertAxisDataPromise.isComplete&&this.vertAxisDataPromise.result.data.length>0}},{key:"horzAxisDataPromise",get:function(){return Object(d.B)(this.horzSelection,this.clinicalAttributeIdToClinicalAttribute,this.props.store.molecularProfileIdToMolecularProfile,this.props.store.patientKeyToSamples,this.props.store.entrezGeneIdToGene,this.props.store.clinicalDataCache,this.props.store.mutationCache,this.props.store.numericGeneMolecularDataCache,this.props.store.coverageInformation,this.props.store.samples,this.props.store.genesetMolecularDataCache,this.props.store.genericAssayMolecularDataCache)}},{key:"vertAxisDataPromise",get:function(){return Object(d.B)(this.vertSelection,this.clinicalAttributeIdToClinicalAttribute,this.props.store.molecularProfileIdToMolecularProfile,this.props.store.patientKeyToSamples,this.props.store.entrezGeneIdToGene,this.props.store.clinicalDataCache,this.props.store.mutationCache,this.props.store.numericGeneMolecularDataCache,this.props.store.coverageInformation,this.props.store.samples,this.props.store.genesetMolecularDataCache,this.props.store.genericAssayMolecularDataCache)}},{key:"vertAxisDataHasNegativeNumbers",get:function(){return!(!this.vertAxisDataPromise.isComplete||!this.vertAxisDataPromise.result)&&Object(d.h)(this.vertAxisDataPromise.result)}},{key:"horzAxisDataHasNegativeNumbers",get:function(){return!(!this.horzAxisDataPromise.isComplete||!this.horzAxisDataPromise.result)&&Object(d.h)(this.horzAxisDataPromise.result)}},{key:"waterfallPlotWidth",get:function(){var e=this.waterfallPlotData.isComplete?this.waterfallPlotData.result.data.length:0;return this.isHorizontalWaterfallPlot?d.f:d.e+Math.round(e*d.g)}},{key:"waterfallPlotHeigth",get:function(){var e=this.waterfallPlotData.isComplete?this.waterfallPlotData.result.data.length:0;return this.isHorizontalWaterfallPlot?d.e+Math.round(e*d.g):d.f}},{key:"scatterPlotAppearance",get:function(){return Object(d.G)(this.coloringType,this.mutationDataExists,this.cnaDataExists,this.props.store.driverAnnotationSettings.driversAnnotated,this.coloringMenuSelection.selectedOption,this.props.store.clinicalDataCache,this.coloringLogScale)}},{key:"scatterPlotFill",get:function(){var e=this;switch(this.coloringType){case Ze.CopyNumber:return"#000000";case Ze.ClinicalData:case Ze.MutationTypeAndCopyNumber:case Ze.MutationType:case Ze.LimitVal:case Ze.LimitValMutationType:case Ze.LimitValMutationTypeAndCopyNumber:return function(t){return e.scatterPlotAppearance(t).fill};case Ze.None:return d.i.fill}}},{key:"scatterPlotFillOpacity",get:function(){return this.coloringType===Ze.CopyNumber||this.coloringType===Ze.LimitValCopyNumber?0:1}},{key:"scatterPlotStrokeWidth",get:function(){return this.coloringType===Ze.CopyNumber||this.coloringType===Ze.MutationTypeAndCopyNumber||this.coloringType===Ze.LimitValCopyNumber||this.coloringType===Ze.LimitValMutationTypeAndCopyNumber?d.b:1}},{key:"boxPlotTooltip",get:function(){var e=this;return function(t){return e.boxPlotData.isComplete?Object(d.k)(t,e.boxPlotData.result.horizontal,e.boxPlotData.result.horizontal?e.horzLogScaleFunction:e.vertLogScaleFunction,e.coloringMenuSelection.selectedOption&&e.coloringMenuSelection.selectedOption.info.clinicalAttribute):r.createElement("span",null,"Loading... (this shouldnt appear because the box plot shouldnt be visible)")}}},{key:"searchMutationWords",get:function(){return this.searchMutation.trim().split(/\s+/g).filter(function(e){return!!e.length})}},{key:"scatterPlotHighlight",get:function(){var e=this,t=this.searchCase.trim().split(/\s+/g),n=this.searchMutationWords,r=[function(r){var o=!1,i=!0,a=!1,s=void 0;try{for(var l,u=t[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value;if(o=o||!!c.length&&r.sampleId.indexOf(c)>-1)break}}catch(e){a=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw s}}var p=!1,d=!0,f=!1,h=void 0;try{for(var m,y=n[Symbol.iterator]();!(d=(m=y.next()).done);d=!0){var g=m.value;if(p=p||e.fDatumHasMutation(r,g))break}}catch(e){f=!0,h=e}finally{try{d||null==y.return||y.return()}finally{if(f)throw h}}return o||p}].concat(ze(this.highlightedLegendItems.values().map(function(e){return e.highlighting.isDatumHighlighted})));return function(e){return p.a.some(r,function(t){return t(e)})}}},{key:"showMutationNotFoundMessage",get:function(){var e=this,t=!1;return this.searchMutationWords.length>0&&this.waterfallPlotIsShown&&this.waterfallPlotData.isComplete&&(t=!0,p.a.each(this.searchMutationWords,function(n){var r=e.waterfallPlotData.result.data;p.a.some(r,function(t){return e.fDatumHasMutation(t,n)})&&(t=!1)})),t}},{key:"selectedGenericAssayEntitiesGroupByGenericAssayTypeFromUrl",get:function(){var e=this;return p.a.reduce(this.props.store.selectedGenericAssayEntities,function(t,n,r){if(e.props.store.molecularProfileIdToMolecularProfile.result[r]){var o=e.props.store.molecularProfileIdToMolecularProfile.result[r].genericAssayType;return t[o]=t[o]?p.a.union(n,t[o]):n,t}},{})}},{key:"selectedGeneForStyling",get:function(){if(!this.noGeneSelectedForStyling&&this.coloringMenuSelection.selectedOption){var e=this.coloringMenuSelection.selectedOption.info.entrezGeneId;return void 0===e&&(e=ut),this.props.store.entrezGeneIdToGene.result[e]}}},{key:"legendTitle",get:function(){return this.selectedGeneForStyling?this.selectedGeneForStyling.hugoGeneSymbol:this.coloringMenuSelection.selectedOption&&this.coloringMenuSelection.selectedOption.info.clinicalAttribute?Object(M.fb)(this.coloringMenuSelection.selectedOption.info.clinicalAttribute.displayName,100,y.d.legend.style.title.fontFamily,y.d.legend.style.title.fontSize+"px"):""}},{key:"waterfallPlotPivotThreshold",get:function(){var e=this.isHorizontalWaterfallPlot?this.horzSelection.dataSourceId:this.vertSelection.dataSourceId;return this.props.store.molecularProfileIdToMolecularProfile.result[e].pivotThreshold}},{key:"waterfallPlotSortOrder",get:function(){if(void 0===this._waterfallPlotSortOrder&&this.isWaterfallPlot){var e=this.horzSelection.dataSourceId||this.vertSelection.dataSourceId;return this.props.store.molecularProfileIdToMolecularProfile.result[e].sortOrder}return this._waterfallPlotSortOrder}},{key:"isHorizontalWaterfallPlot",get:function(){return this.isWaterfallPlot&&!!this.vertAxisDataPromise.result&&this.vertAxisDataPromise.result.datatype===lt}},{key:"isWaterfallPlot",get:function(){return!!this.plotType.result&&this.plotType.result===et.WaterfallPlot}},{key:"sortOrderImageClassName",get:function(){var e=this.isHorizontalWaterfallPlot?"horz":"vert",t=!this.isHorizontalWaterfallPlot&&"ASC"===this.waterfallPlotSortOrder||this.isHorizontalWaterfallPlot&&"DESC"===this.waterfallPlotSortOrder?"ascending":"descending";return"".concat("fa fa-signal"," ").concat(e,"-").concat(t)}},{key:"zIndexSortBy",get:function(){return Object(d.L)(this.coloringType,this.scatterPlotHighlight)}},{key:"boxPlotBoxWidth",get:function(){return this.boxPlotData.isComplete?this.boxPlotData.result.data.length>7?30:60:30}},{key:"horzLogScaleFunction",get:function(){return Object(d.C)(this.horzSelection)}},{key:"vertLogScaleFunction",get:function(){return Object(d.C)(this.vertSelection)}},{key:"showNoGenericAssaySelectedWarning",get:function(){return this.vertSelection.dataType&&this.vertSelection.isGenericAssayType&&this.vertGenericAssayOptions.isComplete&&0===this.vertGenericAssayOptions.result.length||this.horzSelection.dataType&&this.horzSelection.isGenericAssayType&&this.horzGenericAssayOptions.isComplete&&0===this.horzGenericAssayOptions.result.length}},{key:"showUtilitiesMenu",get:function(){return(this.plotDataExistsForTwoAxes||this.waterfallPlotIsShown)&&(this.mutationDataCanBeShown||this.cnaDataCanBeShown)}},{key:"noGeneSelectedForStyling",get:function(){return!!this.coloringMenuSelection.selectedOption&&this.coloringMenuSelection.selectedOption.info.entrezGeneId===ut}},{key:"coloringClinicalDataPromise",get:function(){return this.coloringMenuSelection.selectedOption&&this.coloringMenuSelection.selectedOption.info.clinicalAttribute?this.props.store.clinicalDataCache.get(this.coloringMenuSelection.selectedOption.info.clinicalAttribute):void 0}},{key:"coloringLogScalePossible",get:function(){return!!(this.coloringClinicalDataPromise&&this.coloringClinicalDataPromise.isComplete&&this.coloringClinicalDataPromise.result.logScaleNumericalValueToColor)}},{key:"coloringLogScale",get:function(){return!(!this.coloringLogScalePossible||!this.coloringMenuSelection.logScale)}},{key:"coloringByGene",get:function(){return!(!this.coloringMenuSelection.selectedOption||void 0===this.coloringMenuSelection.selectedOption.info.entrezGeneId)}},{key:"plot",get:function(){var e=this,t=[this.plotType,this.horzAxisDataPromise,this.vertAxisDataPromise,this.horzLabel,this.vertLabel,this.genericEntitiesGroupByEntityId,this.horzGenericAssayOptions];this.coloringClinicalDataPromise&&t.push(this.coloringClinicalDataPromise);var n=M.E.apply(void 0,t),i=this.discreteVsDiscretePlotType===tt.PercentageStackedBar,a=i||this.discreteVsDiscretePlotType===tt.StackedBar;if(this.showNoGenericAssaySelectedWarning)return r.createElement("div",null,r.createElement("i",{className:"fa fa-exclamation-triangle text-danger"}),"",r.createElement("span",null,"To visualize selected generic assay data, you must ensure you have already imported related data and select an entity."));switch(n){case"pending":return r.createElement(Ee.a,{isLoading:!0,center:!0,size:"big"});case"error":return r.createElement("span",null,"Error loading plot data.");default:var s=null;switch(this.plotType.result){case et.DiscreteVsDiscrete:s=this.discreteVsDiscretePlotType===tt.Table?r.createElement(we,{svgId:st,horzData:this.horzAxisDataPromise.result.data,vertData:this.vertAxisDataPromise.result.data,horzCategoryOrder:this.horzAxisDataPromise.result.categoryOrder,vertCategoryOrder:this.vertAxisDataPromise.result.categoryOrder,minCellWidth:35,minCellHeight:35,minChartWidth:d.d,minChartHeight:d.d,axisLabelX:this.horzLabel.result,axisLabelY:this.vertLabel.result}):r.createElement(Ie.a,{svgId:st,horzData:this.horzAxisDataPromise.result.data,vertData:this.vertAxisDataPromise.result.data,categoryToColor:De.x,horzCategoryOrder:this.horzAxisDataPromise.result.categoryOrder,vertCategoryOrder:this.vertAxisDataPromise.result.categoryOrder,barWidth:20,domainPadding:20,chartBase:d.d,axisLabelX:this.horzLabel.result,axisLabelY:this.vertLabel.result,legendLocationWidthThreshold:550,horizontalBars:this.horizontalBars,percentage:i,stacked:a});break;case et.ScatterPlot:if(this.scatterPlotData.isComplete){s=r.createElement(ot,{svgId:st,axisLabelX:this.horzLabel.result,axisLabelY:this.vertLabel.result,data:this.scatterPlotData.result,size:v.k,chartWidth:d.d,chartHeight:d.d,tooltip:this.scatterPlotTooltip,highlight:this.scatterPlotHighlight,showRegressionLine:this.showRegressionLine,logX:this.horzLogScaleFunction,logY:this.vertLogScaleFunction,fill:this.scatterPlotFill,stroke:this.scatterPlotStroke,strokeOpacity:this.scatterPlotStrokeOpacity,zIndexSortBy:this.zIndexSortBy,symbol:this.scatterPlotSymbol,fillOpacity:this.scatterPlotFillOpacity,strokeWidth:this.scatterPlotStrokeWidth,useLogSpaceTicks:!0,excludeLimitValuesFromCorrelation:this.limitValuesCanBeShown&&this.viewLimitValues,legendData:Object(d.J)(this.scatterPlotData.result,this.coloringType,et.ScatterPlot,this.mutationDataExists,this.cnaDataExists,this.props.store.driverAnnotationSettings.driversAnnotated,this.limitValueTypes,this.highlightedLegendItems,this.scatterPlotHighlight,this.coloringClinicalDataPromise&&this.coloringClinicalDataPromise.result,this.coloringLogScale,this.onClickLegendItem),legendTitle:this.legendTitle});break}return this.scatterPlotData.isError?r.createElement("span",null,"Error loading plot data."):r.createElement(Ee.a,{isLoading:!0,center:!0,size:"big"});case et.WaterfallPlot:if(this.waterfallPlotData.isComplete){var l=this.isHorizontalWaterfallPlot;s=r.createElement(at,{svgId:st,axisLabel:this.waterfallLabel.result,data:this.waterfallPlotData.result.data,size:v.k,chartWidth:this.waterfallPlotWidth,chartHeight:this.waterfallPlotHeigth,tooltip:this.waterfallPlotTooltip,highlight:this.scatterPlotHighlight,log:l?this.horzLogScaleFunction:this.vertLogScaleFunction,horizontal:l,fill:this.waterfallPlotColor,fillOpacity:1,stroke:this.waterfallPlotColor,strokeOpacity:1,strokeWidth:this.scatterPlotStrokeWidth,symbol:this.scatterPlotSymbol,labelVisibility:this.waterfallPlotLimitValueSymbolVisibility,zIndexSortBy:this.zIndexSortBy,useLogSpaceTicks:!0,legendLocationWidthThreshold:550,sortOrder:this.waterfallPlotSortOrder,pivotThreshold:this.waterfallPlotPivotThreshold,legendData:Object(d.J)(this.waterfallPlotData.result.data,this.coloringType,et.WaterfallPlot,this.mutationDataExists,this.cnaDataExists,this.props.store.driverAnnotationSettings.driversAnnotated,this.limitValueTypes,this.highlightedLegendItems,this.scatterPlotHighlight,this.coloringClinicalDataPromise&&this.coloringClinicalDataPromise.result,this.coloringLogScale,this.onClickLegendItem),legendTitle:this.legendTitle});break}return this.waterfallPlotData.isError?r.createElement("span",null,"Error loading plot data."):r.createElement(Ee.a,{isLoading:!0,center:!0,size:"big"});case et.BoxPlot:if(this.boxPlotData.isComplete){var c=this.boxPlotData.result.horizontal;s=r.createElement(it,{svgId:st,domainPadding:75,boxWidth:this.boxPlotBoxWidth,axisLabelX:this.horzLabel.result,axisLabelY:this.vertLabel.result,data:this.boxPlotData.result.data,chartBase:550,scatterPlotTooltip:this.boxPlotTooltip,highlight:this.scatterPlotHighlight,horizontal:c,logScale:c?this.horzLogScaleFunction:this.vertLogScaleFunction,size:v.k,fill:this.scatterPlotFill,stroke:this.scatterPlotStroke,strokeOpacity:this.scatterPlotStrokeOpacity,zIndexSortBy:this.zIndexSortBy,symbol:this.scatterPlotSymbol,fillOpacity:this.scatterPlotFillOpacity,strokeWidth:this.scatterPlotStrokeWidth,useLogSpaceTicks:!0,excludeLimitValuesFromBoxPlot:this.limitValuesCanBeShown&&this.viewLimitValues,legendData:Object(d.J)(p.a.flatten(this.boxPlotData.result.data.map(function(e){return e.data})),this.coloringType,et.BoxPlot,this.mutationDataExists,this.cnaDataExists,this.props.store.driverAnnotationSettings.driversAnnotated,this.limitValueTypes,this.highlightedLegendItems,this.scatterPlotHighlight,this.coloringClinicalDataPromise&&this.coloringClinicalDataPromise.result,this.coloringLogScale,this.onClickLegendItem),legendLocationWidthThreshold:550,legendTitle:this.legendTitle});break}return this.boxPlotData.isError?r.createElement("span",null,"Error loading plot data."):r.createElement(Ee.a,{isLoading:!0,center:!0,size:"big"});default:return r.createElement("span",null,"Not implemented yet")}return r.createElement("div",null,r.createElement("div",{"data-test":"PlotsTabPlotDiv",className:"borderedChart posRelative"},r.createElement(Ae.a,{style:{position:"relative",top:-5},getScrollEl:this.getScrollPane}),this.showUtilitiesMenu&&r.createElement("div",{style:{textAlign:"left",position:"relative",zIndex:1,marginTop:"-6px",marginBottom:this.isWaterfallPlot?"9px":"-16px",minWidth:this.mutationDataCanBeShown&&this.cnaDataCanBeShown?600:0}},r.createElement("div",{style:{display:"inline-flex",position:"relative",alignItems:"center"},className:"coloring-menu"},r.createElement("label",{className:"legend-label"},"Color samples by:"),"",r.createElement("div",{style:{display:"inline-block"},className:"gene-select-background"},r.createElement("div",{className:"checkbox gene-select-container"},r.createElement(u.default,{className:"color-samples-toolbar-elt gene-select",name:"utilities_geneSelectionBox",value:this.coloringMenuSelection.selectedOption,onChange:this.onColoringMenuOptionSelect,isLoading:this.horzGeneOptions.isPending,options:this.coloringMenuOmnibarOptions.result,clearable:!1,searchable:!0,disabled:!this.coloringMenuOmnibarOptions.isComplete}))),this.coloringLogScalePossible&&r.createElement(Ve.a,{checked:this.coloringMenuSelection.logScale,onChange:function(){return e.coloringMenuSelection.logScale=!e.coloringMenuSelection.logScale},inputProps:{style:{marginTop:4},className:"coloringLogScale"}},"Log Scale"),this.coloringByGene&&this.mutationDataCanBeShown&&r.createElement(Ve.a,{checked:this.coloringMenuSelection.colorByMutationType,onChange:this.onClickColorByMutationType,inputProps:{type:this.waterfallPlotIsShown?"radio":"checkbox",style:{marginTop:4},"data-test":"ViewMutationType"}},"Mutation Type *"),this.coloringByGene&&this.cnaDataCanBeShown&&r.createElement(Ve.a,{checked:this.coloringMenuSelection.colorByCopyNumber,onChange:this.onClickColorByCopyNumber,inputProps:{type:this.waterfallPlotIsShown?"radio":"checkbox",style:{marginTop:4},"data-test":"ViewCopyNumber"}},"Copy Number"),this.coloringByGene&&this.waterfallPlotIsShown&&(this.mutationDataCanBeShown||this.cnaDataCanBeShown)&&r.createElement(Ve.a,{checked:!this.coloringMenuSelection.colorByCopyNumber&&!this.coloringMenuSelection.colorByMutationType,onChange:Object(o.action)(function(){e.coloringMenuSelection.colorByMutationType=!1,e.coloringMenuSelection.colorByCopyNumber=!1}),inputProps:{type:"radio",style:{marginTop:4}}},"None"))),this.plotExists&&r.createElement(M.d,{getSvg:this.getSvg,filename:this.downloadFilename,additionalRightButtons:[{key:"Data",content:r.createElement("span",null,"Data"," ",r.createElement("i",{className:"fa fa-cloud-download","aria-hidden":"true"})),onClick:this.downloadData,disabled:!this.props.store.entrezGeneIdToGene.isComplete}],dontFade:!0,style:{position:"absolute",right:10,top:10},type:"button"}),r.createElement("div",{ref:this.assignScrollPaneRef,style:{position:"relative",display:"inline-block"}},s)),this.mutationDataCanBeShown&&r.createElement("div",{style:{marginTop:5}},"* Driver annotation settings are located in the settings menu"," ",r.createElement("i",{className:"fa fa-sliders fa-sm"})," at the top of the page."),this.limitValuesCanBeShown&&this.plotType.result===et.ScatterPlot&&r.createElement("div",{style:{marginTop:5}},r.createElement("div",null,"** Labeling of threshold values (e.g. >8.00) excludes threshold values from correlation coefficient calculation.")),this.limitValuesCanBeShown&&this.plotType.result===et.BoxPlot&&r.createElement("div",{style:{marginTop:5}},r.createElement("div",null,"** Labeling of threshold values (e.g. >8.00) excludes threshold values from box plot calculation.")))}}}])&&qe(n.prototype,c),f&&qe(n,f),t}();rt([o.observable],mt.prototype,"searchCaseInput",void 0),rt([o.observable],mt.prototype,"searchMutationInput",void 0),rt([o.observable],mt.prototype,"showRegressionLine",void 0),rt([o.observable],mt.prototype,"discreteVsDiscretePlotType",void 0),rt([o.observable],mt.prototype,"horizontalBars",void 0),rt([o.observable],mt.prototype,"percentageBar",void 0),rt([o.observable],mt.prototype,"stackedBar",void 0),rt([o.observable],mt.prototype,"viewLimitValues",void 0),rt([o.observable],mt.prototype,"_waterfallPlotSortOrder",void 0),rt([o.observable],mt.prototype,"searchCase",void 0),rt([o.observable],mt.prototype,"searchMutation",void 0),rt([o.observable],mt.prototype,"plotExists",void 0),rt([o.observable],mt.prototype,"highlightedLegendItems",void 0),rt([Pe.default,o.action],mt.prototype,"onClickLegendItem",null),rt([Pe.default,o.action],mt.prototype,"onClickColorByCopyNumber",null),rt([Pe.default,o.action],mt.prototype,"onClickColorByMutationType",null),rt([Pe.default],mt.prototype,"getScrollPane",null),rt([o.computed],mt.prototype,"coloringType",null),rt([o.computed],mt.prototype,"quickPlotButtons",null),rt([o.computed],mt.prototype,"potentialColoringType",null),rt([o.computed],mt.prototype,"bothAxesNoMolecularProfile",null),rt([Pe.default],mt.prototype,"getSvg",null),rt([Pe.default,o.action],mt.prototype,"updateColoringMenuGene",null),rt([Pe.default,o.action],mt.prototype,"onInputClick",null),rt([Pe.default],mt.prototype,"downloadData",null),rt([Pe.default,o.action],mt.prototype,"setSearchCaseInput",null),rt([Pe.default,o.action],mt.prototype,"setSearchMutationInput",null),rt([Pe.default,o.action],mt.prototype,"executeSearchCase",null),rt([Pe.default,o.action],mt.prototype,"executeSearchMutation",null),rt([Pe.default],mt.prototype,"getHorizontalAxisMenu",null),rt([Pe.default],mt.prototype,"getVerticalAxisMenu",null),rt([Pe.default,o.action],mt.prototype,"onVerticalAxisGeneSelect",null),rt([Pe.default,o.action],mt.prototype,"onHorizontalAxisGeneSelect",null),rt([Pe.default,o.action],mt.prototype,"selectSameGeneOptionForVerticalAxis",null),rt([Pe.default,o.action],mt.prototype,"onVerticalAxisGenesetSelect",null),rt([Pe.default,o.action],mt.prototype,"onHorizontalAxisGenesetSelect",null),rt([Pe.default,o.action],mt.prototype,"onVerticalAxisGenericAssaySelect",null),rt([Pe.default,o.action],mt.prototype,"onHorizontalAxisGenericAssaySelect",null),rt([Pe.default,o.action],mt.prototype,"onColoringMenuOptionSelect",null),rt([o.computed],mt.prototype,"waterfallPlotIsShown",null),rt([Pe.default,o.action],mt.prototype,"onVerticalAxisDataTypeSelect",null),rt([Pe.default,o.action],mt.prototype,"onHorizontalAxisDataTypeSelect",null),rt([Pe.default,o.action],mt.prototype,"onVerticalAxisDataSourceSelect",null),rt([Pe.default,o.action],mt.prototype,"onHorizontalAxisDataSourceSelect",null),rt([o.computed],mt.prototype,"hasMolecularProfile",null),rt([Pe.default,o.action],mt.prototype,"autoChooseColoringMenuGene",null),rt([Pe.default,o.action],mt.prototype,"onVerticalAxisMutationCountBySelect",null),rt([Pe.default,o.action],mt.prototype,"onHorizontalAxisMutationCountBySelect",null),rt([Pe.default,o.action],mt.prototype,"onDiscreteVsDiscretePlotTypeSelect",null),rt([Pe.default,o.action],mt.prototype,"onSortOrderButtonPressed",null),rt([Pe.default,o.action],mt.prototype,"swapHorzVertSelections",null),rt([o.computed],mt.prototype,"bothAxesMolecularProfile",null),rt([o.computed],mt.prototype,"oneAxisMolecularProfile",null),rt([o.computed],mt.prototype,"sameGeneInBothAxes",null),rt([o.computed],mt.prototype,"cnaDataCanBeShown",null),rt([o.computed],mt.prototype,"limitValuesCanBeShown",null),rt([o.computed],mt.prototype,"limitValueTypes",null),rt([o.computed],mt.prototype,"horzLimitValueTypes",null),rt([o.computed],mt.prototype,"horzLimitValuesCanBeShown",null),rt([o.computed],mt.prototype,"vertLimitValueTypes",null),rt([o.computed],mt.prototype,"vertLimitValuesCanBeShown",null),rt([o.computed],mt.prototype,"legendLimitValueLabel",null),rt([o.computed],mt.prototype,"vertMenuLimitValueLabel",null),rt([o.computed],mt.prototype,"horzMenuLimitValueLabel",null),rt([o.computed],mt.prototype,"cnaDataShown",null),rt([o.computed],mt.prototype,"mutationDataCanBeShown",null),rt([o.computed],mt.prototype,"mutationDataShown",null),rt([o.computed],mt.prototype,"plotDataExistsForTwoAxes",null),rt([o.computed],mt.prototype,"horzAxisDataPromise",null),rt([o.computed],mt.prototype,"vertAxisDataPromise",null),rt([o.computed],mt.prototype,"vertAxisDataHasNegativeNumbers",null),rt([o.computed],mt.prototype,"horzAxisDataHasNegativeNumbers",null),rt([o.computed],mt.prototype,"waterfallPlotWidth",null),rt([o.computed],mt.prototype,"waterfallPlotHeigth",null),rt([o.computed],mt.prototype,"scatterPlotAppearance",null),rt([o.computed],mt.prototype,"scatterPlotFill",null),rt([o.computed],mt.prototype,"scatterPlotFillOpacity",null),rt([Pe.default],mt.prototype,"scatterPlotStroke",null),rt([o.computed],mt.prototype,"scatterPlotStrokeWidth",null),rt([Pe.default],mt.prototype,"scatterPlotStrokeOpacity",null),rt([Pe.default],mt.prototype,"scatterPlotSymbol",null),rt([Pe.default],mt.prototype,"waterfallPlotColor",null),rt([Pe.default],mt.prototype,"waterfallPlotLimitValueSymbolVisibility",null),rt([Pe.default],mt.prototype,"scatterPlotTooltip",null),rt([Pe.default],mt.prototype,"waterfallPlotTooltip",null),rt([o.computed],mt.prototype,"boxPlotTooltip",null),rt([o.computed],mt.prototype,"searchMutationWords",null),rt([o.computed],mt.prototype,"scatterPlotHighlight",null),rt([o.computed],mt.prototype,"showMutationNotFoundMessage",null),rt([o.computed],mt.prototype,"selectedGenericAssayEntitiesGroupByGenericAssayTypeFromUrl",null),rt([Pe.default],mt.prototype,"getUtilitiesMenu",null),rt([Pe.default],mt.prototype,"assignScrollPaneRef",null),rt([Pe.default],mt.prototype,"controls",null),rt([o.computed],mt.prototype,"selectedGeneForStyling",null),rt([o.computed],mt.prototype,"legendTitle",null),rt([o.computed],mt.prototype,"waterfallPlotPivotThreshold",null),rt([o.computed],mt.prototype,"waterfallPlotSortOrder",null),rt([o.computed],mt.prototype,"isHorizontalWaterfallPlot",null),rt([o.computed],mt.prototype,"isWaterfallPlot",null),rt([o.computed],mt.prototype,"sortOrderImageClassName",null),rt([o.computed],mt.prototype,"zIndexSortBy",null),rt([o.computed],mt.prototype,"boxPlotBoxWidth",null),rt([o.computed],mt.prototype,"horzLogScaleFunction",null),rt([o.computed],mt.prototype,"vertLogScaleFunction",null),rt([o.computed],mt.prototype,"showNoGenericAssaySelectedWarning",null),rt([o.computed],mt.prototype,"showUtilitiesMenu",null),rt([o.computed],mt.prototype,"noGeneSelectedForStyling",null),rt([o.computed],mt.prototype,"coloringClinicalDataPromise",null),rt([o.computed],mt.prototype,"coloringLogScalePossible",null),rt([o.computed],mt.prototype,"coloringLogScale",null),rt([o.computed],mt.prototype,"coloringByGene",null),rt([o.computed],mt.prototype,"plot",null),mt=rt([i.observer],mt);t.g=mt},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(0),o=n(3),i=n(580);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,u(t).call(this,e))}var n,a,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r["Component"]),n=t,(a=[{key:"mainContent",value:function(){var e=this,n=this.props,o=n.barWidth,a=n.barHeight,s=n.barColor,l=n.totalCount,u=n.counts,c=n.textMargin,p=n.textWidth,d=this.props.freqColors||t.defaultProps.freqColors,f=u[this.props.mainCountIndex&&this.props.mainCountIndex>=0&&this.props.mainCountIndex<u.length?this.props.mainCountIndex:0]/l,h=(o||0)+(c||0),m=h+(p||0),y=[];return u.forEach(function(t,n){var r=n%d.length,o=r>=0?d[r]:d[0];y.push(e.frequencyRectangle(t,l,o))}),r.createElement("svg",{width:m,height:"12"},r.createElement("text",{x:h,y:"9.5",textAnchor:"start",fontSize:"10"},Object(i.c)(f)),r.createElement("rect",{y:"2",width:o,height:a,fill:s}),y)}},{key:"frequencyRectangle",value:function(e,t,n){var o=e/t,i=this.props,a=i.barWidth,s=i.barHeight;return r.createElement("rect",{y:"2",width:o*(a||0),height:s,fill:n})}},{key:"render",value:function(){var e=this.mainContent();return this.props.tooltip&&(e=r.createElement(o.c,{placement:"left",overlay:this.props.tooltip,arrowContent:r.createElement("div",{className:"rc-tooltip-arrow-inner"})},e)),e}}])&&s(n.prototype,a),p&&s(n,p),t}();p.defaultProps={freqColors:["lightgreen","green"],barColor:"#ccc",textMargin:6,textWidth:35,barWidth:30,barHeight:8}},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),o=n(725);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,l(t).apply(this,arguments))}var n,i,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["Component"]),n=t,(i=[{key:"render",value:function(){var e=this;return r.createElement("span",{style:{cursor:"default"}},r.createElement(o.a,{text:"M",tooltip:function(){return e.getToolTip(e.props.qValue)}}))}},{key:"getToolTip",value:function(e){return r.createElement("div",null,"Candidate driver gene, as determined by the ",r.createElement("b",null,"MutSig"),r.createElement("br",null),"algorithm.",r.createElement("p",null),"MutSig identifies likely driver genes by evaluating the",r.createElement("br",null),"frequency of observed mutations within the entire study.",r.createElement("p",null),"Note that not all mutations in this gene are necessarily",r.createElement("br",null),"functional/driver events.",r.createElement("p",null),r.createElement("span",null," Q-value: ",(e||0).toExponential(3)))}}])&&a(n.prototype,i),c&&a(n,c),t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(0),o=n(3);function i(e,t,n){return function(i){var a=e(i);return null===a?r.createElement(o.o,{status:o.n.LOADING}):"error"===a.status?r.createElement(o.o,{status:o.n.ERROR}):null===a.data?r.createElement(o.o,{status:o.n.NA,naAlt:n}):t(a.data,i)}}},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(0),o=n(4),i=n(3),a=n(614);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,l;return t=e,l=[{key:"getData",value:function(e,t){var n=null;return t&&(n=t[e[0].uniqueSampleKey]||null),n}},{key:"sortBy",value:function(t,n){var r=e.getData(t,n);return r||null}},{key:"filter",value:function(t,n,r){var o=e.getData(t,r);return null!==o&&o.toUpperCase().indexOf(n)>-1}},{key:"isVisible",value:function(t,n){if(!t||!n)return!1;var r={};return t.forEach(function(t){var o=e.getData(t,n);o&&(r[o]=t[0].sampleId)}),o.keys(r).length>1}},{key:"download",value:function(t,n){return e.getData(t,n)||""}},{key:"render",value:function(t,n){var o=e.getData(t,n);return o?r.createElement(a.a,{maxLength:30,text:o||"",tooltip:r.createElement("div",{style:{maxWidth:300}},o)}):r.createElement(i.o,{status:i.n.NA,naAlt:"Cancer type not available for this sample."})}}],(n=null)&&s(t.prototype,n),l&&s(t,l),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(0),o=n(629),i=(n(587),n(3)),a=n(793),s=n.n(a);function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"renderFunction",value:function(t,n,o){var i=e.getGenomeNexusDataFromCache(t,n);return r.createElement("div",{className:s.a["exon-table"]},r.createElement("span",null,e.getExonDataViz(i,o)))}},{key:"getGenomeNexusDataFromCache",value:function(e,t){return 0!==e.length&&t?t.get(e[0]):null}},{key:"getExonDataViz",value:function(t,n){var a=null;if(null===t)a=i.n.LOADING;else if("error"===t.status)a=i.n.ERROR;else{if(null!==t.data){var s=e.getData(t.data);return null==s?s:r.createElement("span",{style:{display:"inline-block",float:"right"}},r.createElement("span",{style:{float:"left",width:"24px",textAlign:"right"}}," ",s.split("/")[0]," "),n&&r.createElement("span",{style:{float:"left",width:"34px",textAlign:"left",marginLeft:"4px"}}," ","/ ".concat(s.split("/")[1])," "))}a=i.n.NA}if(null!==a)return a===i.n.LOADING?r.createElement(o.Circle,{size:18,scaleEnd:.5,scaleStart:.2,color:"#aaa",className:"pull-right"}):r.createElement(i.o,{status:a})}},{key:"getData",value:function(e){if(!e)return null;var t=e.annotation_summary.transcriptConsequenceSummary.exon;if(t)return t;var n=e.transcript_consequences.filter(function(t){return t.transcript_id===e.annotation_summary.transcriptConsequenceSummary.transcriptId&&t.exon})[0];return n?n.exon:null}},{key:"download",value:function(t,n){var r=e.getGenomeNexusDataFromCache(t,n),o=r&&e.getData(r.data);return o||""}},{key:"getSortValue",value:function(t,n){var r=e.getGenomeNexusDataFromCache(t,n);if(r){var o=e.getData(r.data);return null==o?null:parseInt(o.split("/")[0])}return null}}],(n=null)&&l(t.prototype,n),a&&l(t,a),e}()},function(e,t,n){e.exports=n.p+"reactapp/images/58335fa45d1c6a16c7d06eabd2ecee93.png"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZMAAAG2CAYAAAC6fWvkAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAABOvAAATrwFj5o7DAAAAB3RJTUUH4QgXDAozoFc2mAAAIABJREFUeNrt3Xl8VPW9//FvkpkhC4SQsAkuuKHiVisTCrZel1ttq17rQ6xttdd7r7a/3uq97eNhtFbbCiQh20Cxtra9Uu21rUKAAGEnFAKYEJiETXYhk5nJrJlMkklmYeacOb8/6u/XWlmSkGTOmXk9/8QwOef9PfLOJ3O+Z9IURREAzq/oT61Lq566+rm0tDTCAM4jnQiA81t/yD/3/br2Z//Y4P1P0gDOL43JBDg3RVHEnNf2f2x1BK+bUJDpNFcapxp0TCcAkwkwAH/Y7X3B6gheJ4QQHZ2RKW/WOV4nFYDJBOi3SEwWhS+3uHz+yOT/92ejR+u7zFXG/LHZOgICmEyAi3tzq6v474tECCH6+mLjKtbZf006AJMJcFHdISndWLSvMxiU8v7xvxn0GcEGk3HG1DyDjaQAJhPgvMpqbW+dq0iEECIak3OKV7ZVkRJAmQDnZeuMTFu2zfmdC33N+gb3Y8ccodtJC6BMgHMqrrGZYrF49oW+Jh4X+nkr2haTFkCZAJ9xpD10x8YG96P9+doPD/juazgVuJ/UAMoE+JR51a2LFUXo+v/1FhOpAZQJ8P/tOtnz5cZD/nsG8neOftzzuTUtnd8mPYAyAYQQQsxfNrgpo2yFpUSWub0eoEyQ8lY1+54+3hq4bTB/1+4KXf3ubs+PSBGpjk2LSGmSrIjZP2mxODyhaYN9jfw8g3dflXFStiGDQMFkAqSipfXuokspEiGE8HdHJ76xxVlGmmAyAVJQMCqLwiKzt6snOuFSXys7SxdoqjJeMX6MPkCyYDIBUsiSjY7KoSgSIYQIhaXc8rV2NjKCMgFSSUdvLP+dTe3/Zyhfs3qH89ttvsh1pAvKBEgRC9fYFoUjUu5QvqYkxbPmr7QuIl1QJkAKsHgj16/a4XpyOF57a5Pn4QO2YCEpgzIBkty8VW2LJDmeNRyvrSgifV51K++dgDIBktl+a+8Xtu31PjSc38P8Uddd2452P0TaoEyAJPX68rbFijL81/2C5a2VpA3KBEhCdUe6/6XlaNfskfhep619M5Y3dfwHqYMyAZLMguWtFSP5/SpWts2PSWwKBmUCJI0P9nQ8d8bWd+NIfk93R/jy3+1w/YT0kQp4nAqSXlRSxKwfN7d7fOGpI/29c8foO5tNxvGjM3UsBJhMAC377XbXa4koEiGECPTGCkwbHL9gFcBkAmhYICyJwpfMnYHeWH6ijmHUqIy+PVXGGyaPNThZETCZABpk2uB4I5FFIoQQZ8/Ko0tW27hVGJQJoEWunujU97a0P6uGY1mz0/nEKXd4BqsCygTQmNIaW2U0Kueo4VjicWGYt6KNx6yAMgG05KQ7fPOaXc65ajqm+uaOB5rO9N7N6oAyATRifnXb4nhcGFR2WGnzlluYTkCZAFqw53TgnvqWji+r8dgOn+y+c8Mh/+OsEigTQOXmLbeYhBBpaj2+kuWWcm7JB2UCqNj6Q/65H53quVPNx2h1BK/73w+9z7NaSCZsWkTSkGVF3PWz/adtjuC1aj/W8fmZ7n2Vd16Wqc9g4cBkAqjJew3eF7RQJEII4fNHJv9qq2sBqwYmE0BFwjFZFL7U4u7sikzSyjHn5Oi6zabCgrxsXZwVBJMJoAK/2uoq1lKRCCFEMCjlldfaf83qgckEUIGuoKQvfGmfNxiU8rR27Hp9emh3xcybryzIbGMlwWQCJFD5OtubWiwSIYSIxeLZxTU2E6sIygRIIFtnZNqyOud3tHwOGxvcjx5pD93BaoIyARKkuMZmiknxbC2fg6II3bwVbYtYTVAmQAJ8ZA9+fmOD+9FkOJfGg757d57oeZBVBWUCjLD5KyyLFEUkzYerz19mqWJVQZkAI6j+RM9XGg/570mmczphCdy6qtn3NKsLygQYIQuWWZLyY3DLq9uKJZnb9UGZAMNuVbPv6ROWwK3JeG4OT2ja0np3EasMrWHTIjRFkhXxhZ+0tDk9oauS9RzHjTV07DMZJ+YYeAgkmEyAYbG03l2UzEUihBBdPdEJSzY6KlltMJkAwyAYlUVhkdnb1ROdkOznmpWZ0dtkKpw2YYzez8qDyQQYQks2OipToUiEECIckceUreExK6BMgCHVEYgVvLPJ/v1UOueVO1zfbO0IT2f1QZkAQ6Rsra0qHJHHpNI5S3I8a/5KK9MJKBNgKLR2hKev3OH6Ziqe+7a93odaLL1zuApAmQCXaP5Kq0mS41mpeO6KItLnrWhjOgFlAlyKFkvvnG17vQ+ldAZHu2Zv/aj7Ua4GUCbAIM1b0WZSFK7T4urWCm7jB2UCDMLWj7ofbTnaNZskhDhj67thWZPvOZKAWrFpEaqkKIq4++cHTpyx9d1AGn81sSDTua/SONWgSyMMMJkA/bGsyfccRfJp3s7IlN9ud71GEmAyAfohKili1o+b2z2+8FTS+LQxo/VdZpMxPzdLRxhgMgEu5LfbXa9RJOfW2xcbZ9rgeIMkwGQCXEAgLAljkdnf2xcbRxrnZjBkBBurjDdNyTPYSQNMJsA5mDY43qBILiwalXNKV9sqSAKUCXAOzu7oFe9taX+WJC5u7S7n3OOO0G0kAcoE+AcLV9vKo1E5hyQuLh4X+gWreAgkKBPgU467Qres2eWcSxL9t7Ol48sNpwL3kQQoE+ATxSusi+JxYSCJgZlXbWE6AWUCCCFE4+nAvfUtHQ+QxMAd/bjnjnUH/N8gCVAm4Kfr5fx0fSlKq1vLZJlb/EGZIIWtP+Sfe+RUz+dJYvBsztA17zV4/oskkEhsWkTCyLIi7vrp/tM2Z/Ba0rg0+eMMHnOVcXKWPoMwwGSC1PJeg/cFimRo+Luik97c4iwhCTCZIKWEY7IwvmR2+7uik0hjaORk6XqaFhmnFuTog6QBJhOkhF9tdRVTJEMrGJbGVtTaF5MEmEyQErqCkr7wxX0dwbA0ljSGlk6XHt5dMfPWq8ZnniENMJkgqVWss/+SIhkekhTPKq6xVpEEKBMkNWtn5JoP6hz/ShLDZ1Oj55GDtqCRJECZIGmV1NgqY1I8mySGj6II3YIVbAQFZYIkddgenLmxwf0oSQy/psP+u7cf7fkaSYAyQdJZsMJSpSiCDy8fIfOrz/DeCSgTJJcdx3u+2njIfw9JjJyP2/pmrDD7niEJUCZInqlkuaWSFEZeebWlOCZx+z8oEySBVc2+p09aAreQxMhzecNXvF3vfpkkMNzYtIhhJcmKmPVKs9XlDV9JGokxNlff2VxVOD4nk4dAgskEGrW03l1EkSRWTyBWsHiTg1uFwWQCbQpGZGF82dzR3RMdTxqJlTkqo7fJVHj9xFy9hzTAZAJNWbLZUUmRqEPkrDymdI2NmyBAmUBbOgKxgnc22b9PEupRU+968mNP+CaSAGUCzShba6sKR+QxJKEeshwftWAVD4EEZQKNOO0J37hih+vbJKE+f9nr/dq+1t4vkgQoE6hecY21Upbjo0hCldIWVLcxnYAygbo1W3rvqmvyPkwS6rX/eNcXNhzyP04SoEygWvNXtFUJIdJIQt1Kqy1lbAsAZQJV2nzY/1jL0a7ZJKF+be3B6//U4OVuOwwZNi1iSCiKIr70swMnW+1900lDGybkZ7r2Vt45JVPPY1bAZAKVWNbke44i0ZYOf+Syt7a5fk4SYDKBKkQlRRS+bHZ4OyNTSENbcnJ03WZTYUFeti5OGmAyQUL9drvrNYpEm4JBKc+03v4GSYDJBAnVE5KE8SWzv68vNo40tEmvTw81VBbOuDzfYCUNMJkgIRZvciyhSLQtFotnl65pqyAJXAodEWCwfL2x+w+eCXzv9hvyCEPjbN7IE23eiHnaxMxFpIHB4NdcAIBLxq+5AACUCQCAMgEAUCYAAFAmAADKBABAmQAAKBMAACgTAABlAgCgTAAAlAkAAJQJAIAyAQBQJgAAygQAAMoEAECZAAAoEwAAZQIAAGUCAKBMAACUCQCAMgEAgDIBAFAmAADKBABAmQAAQJkAACgTAABlAgCgTAAAoEwAAJQJAEB9dESQWt7Z5a5d8aH3EZLAcLr/9vyGoocu/yJJpI40RVFIIUU4uqNX3lVkPhaNyTmkgWH9hyVNSJuK75x92xU5zaSRGvg1VwopW20ro0gwEhRF6IpXWitJgjJBkjnmCN2+ZpfzCZLASGk46Lt3x/Ger5IEZYIkUrLKWhmPCz1JYCQtWG5hOqFMkDQ/IZ4K3F/f0vEASWCknbQEblnd3PkUSVAmSAKvL7MsIgUkbCpe3rpQkrnRhzKBpq0/5J977EzP7SSBRHF5w1f+fpf7RZJIbtwanMRkWRFzXmtptbtCV5MGEilvrMFnrjROyMnMIAwmE2jNew3eFygSqEF3T3T8G1uc5STBZAKNCUVlUfiS2ePvjk4kDahB5qiM3r2mwqsn5Oo7SYPJBBrxVp1rAUUCNYmclceUr7NxqzBlAq3w9cZyf7vO9kOSgNpU/8X11GlP+EaSoEygAaYN7RWhsJRLElAbWY6PKqnhMSuUCVTP6otc+36d4xmSgFptbfI+3GzpvYskKBOoWMlqW4UkxbNIAiqWtmBFG9MJZQK1OmgLGjc2uB8jCahd89GuOZsP+7lWKROocipZaalUFNYU2lBcbSlnawJlApXZdrT7ocZD/ntIAlphsQenL9/re5YkKBOo6qe8Vn4HDc0pq7YsiEpMJ5QJVGFVs+/pj9v6ZpAEtKajMzLld9tdr5KE9vE4FY2LSYqY9Uqz3d0Rvpw0oEWjR+u7zFXG/LHZOsJgMkGi/H6nu4gigZb19cXGLd7kWEISTCZIkGBEFncW7fMFemMFpAEtM+gzgg0m44ypeQYbaTCZYIQt2eKooEiQDKIxOadsta2MJCgTjDBvIDZp6Qb7D0gCyWLNLucTxxwhPhWUMsFIKl9rKzt7Vh5NEkgW8bjQl6ziIZCUCUbMx57wTSt2uL5NEkg29S0dDzScCtxPEpQJRkBJjbVCluOjSALJ6PVllkWkQJlgmO090/uluibvwySBZHXsTM/t6w/555IEZYLhnEpWtVUIIdJIAsms+IPWSllm2wJlgmGx4ZD/8ZajXbNJAsnO7gpd/V6D9wWS0A42LWqEoijirp/uP9XWHryeNJAK8vMM3n1VxknZhgzCYDLBUFnW5HuOIkEq8XdHJ/66zlVMEkwmGCKRmCxmvdzi7PBHLiMNpJLsLF2gqcp4xfgx+gBpMJngEr29w/MqRYJUFApLuVUb7GxkZDLBpeoOSenGon2dwaCURxpIRTpdenhXxczbpo3PPE0aTCYYpF9sciymSJDKJCmeVVJjrSAJygSD1O6PXvWHTfbvkgRS3aZGz9cP2IKFJEGZYBDK19oWxmLxbJJAqlMUkV6y0sJ7J5QJBupoe+hza3Y5nyAJ4K/2HPL/U92Rbh4lRJlgIEprrBXxuNCTBPA3xdWtvHdCmaC/dp8M/HN9S8cDJAF82mlr34yVZt93SIIyQT/Mr27lEdzA+ab25ZaFMYktDZQJLmj9If/cY6cDt5EEcG6ejvDlS3e6XyIJdWHToorIsiJmv9ZiaXeFppEGcH65Y/SdzSbj+NGZOsJgMsE/eq/B+wJFAlxcoDdWsGSzs4okmEzwD0JRWRhfMnu6uqMTSQO4uFGjMvr2VBlvmDzW4CQNJhN84q061wKKBOi/s2fl0RW19lKSYDLBJ3y9sdxZRWZ7OCLlkgYwgJ+G00V0e5nxjumTs46RBpNJyjNtaK+gSICBi8eFoaTGWk4SlEnKa/NFrnu/zvEMSQCDs22v9+GmM713kwRlktJKV9vKJSmeRRLAoKWVrmxjOqFMUtcBW7BwY4P7MZIALk3Lsa7Z6w74v0ESlElqTiUrLRWKwhoAQ2HhCkspNxRRJimn7kj3w42H/PeQBDA0rI7gdX/e4/seSSQGtwYnyN0/33/stLXvJpIAhs74/Ez3vso7L8vUZxAGk0nyW9Xse5oiAYaezx+Z/Lu/eH5KEkwmSS8mKaLwlWa7pyN8OWkAQy8nR9dtNhUW5GXr4qTBZJK03tntfpEiAYZPMCjlLdroWEISTCZJqy8iiZlFZl+gN1ZAGsDw0evSQ7srZ958ZUFmG2kwmSSdN7Y4KygSYPjFpHh2+VpbGUlQJknH3ROdsnSD/QckAYyMtbvcc4+0h+4gCcokqVTW2kvOnpVHkwQwMhRF6EpWtVWSBGWSNE65wzOqtzueIglgZO3a7/vnnSd6HiQJyiQplK62lsfjwkASwMibv8zCx/tSJtq390zvl+qavA+TBJAYJyyBW2sPdD5JEpSJtqeSVW3lQog0kgASZ8EHlgpJZhsEZaJR6w/55zYf7ZpDEkBiOT2hq9770PPfJDF82LQ4TBRFEXNe2/+x1RG8jjSAxMsba/CZTcYJOQYeAslkoiHLmnzPUSSAenT3RMf/aquzlCSYTDQjEpNF4cstLp8/Mpk0APXIyszobTIVTpswRu8nDSYT1Xt7h+dVigRQn3BEHlO5zs7nxTOZaGCUDknpxqJ9ncGglEcagProMtLD9RV3fu6aCVmnSIPJRLV+scmxmCIB1EuS41mlNbYKkqBMVKvdH73qD5vs3yUJQN02NXoebbH0cts+ZaJO5WttC2OxeDZJAKqXVlJj5b0TykR9jraHPrd6p/MbJAFow97D/i9t+aj76yRBmahKaY21QlGEjiQA7Sipbi3nJiTKRDV2nez5cn1LxwMkAWjLGVvfDSv2df4bSVAmqjB/mcVECoA2LVzeWhqVmE4okwRbf8g/93hr4DaSALTJ2xmZsrTe/WOSuDRsWrwEsqyIL/ykxeLwhKaRBqBdY0bru8wmY35uFm97MpkkwB8bvc9TJID29fbFxi3Z5FxEEkwmIy4UlYWxyOzt6olOIA1A+wz6jGCjyXjTlDyDnTSYTEbMW3WuBRQJkDyiMTmnfK2NR9RTJiOnozeW/5ta2w9JAkguNfXObx53hLihhjIZGYs2tJeGI1IuSQDJJR4X+tLVPGaFMhkBFm/k+ve3Op4hCSA5bTd3fLXhVOA+kqBMhtXCtbYySY5nkQSQvMpq2haSAmUybPZbg7M2NrgfIwkgyf9fP949a21L57dIgjIZnqmkxlqmKGQGpMR0stJSIstsnaBMhljdke5/aTzou5ckgNRgc4au+fMe73+SRP+wabGfvvSz/cfP2PpuJAkgdeTnGbxmk3FSlj6DMJhMLt2qZt/TFAmQevzd0YlvbXO9ThJMJpcsJimi8JVmu6cjfDlpAKknO0sX2LvIOKUgRx8kDSaTQXtnt/tFigRIXaGwlLt4Q3sFSTCZDFpfRBIzi8ydgd5YPmkAqUunSw/vrph561XjM8+QBpPJgL2xxVlBkQCQpHhW2RobGxkpk4Fz90SnvL3e/jxJABBCiHUfuucetAWNJEGZDEhlrb0kGpVzSAKAEEIoikhfWMNDICmTATjpDt9cvd3xFEkA+HsfHvDdt/1oz9dI4rP4wONzWLW3491br88zkASAz/z7sM/z1n03j51GEp/G3VwAgEvGr7kAAJQJAIAyAQBQJgAAUCYAAMoEAECZAAAoEwAAKBMAAGUCAKBMAACUCQAAlAkAgDIBAFAmAADKBAAAygQAQJkAACgTAABlAgAAZQIAoEwAAJQJAIAyAQCAMgEAUCYAAMoEAECZAABAmQAAKBMAAGUCAKBMAACgTAAAlAkAQH10yXAS1s7Ij37w9qlF8TjlCEBbSr51ddmdV495VevnkaYoiuYX499+c6J2a5P3ES5LAFpz7ZWjT+wu/vxNWj8Pzf8kv+d04B6KBIBWnbH13biq2fc0ZZJgZTXWUi5HAFpW8oGlPCZp+7dEmi6T2gOdTzYf7ZrDpQhAyzy+8NTf73QXafkcNPueiaIoYvar+0/bnMFruRQBaN2Y0fous8mYn5ulzfuiNDuZLN/re5YiAZAsevti497c6qxgMhlB4ZgsjC+Z3f6u6CQuQQDJwmDICO4xGW+4bKzBwWQyApbu8LxKkQBINtGonFNVay9mMhkBXUFJX/jivo5gWBrLpQcg2aSni1jdwpmfv+my7CNMJsNoyWZHFUUCIFnF40Jfvsa2UHMlqKWDtXVGpv1ho/27XG4Aklldk/eRPacD91Amw6Sytr00JsWzudQAJLuFNVZNTSeaKZOP7MHPr97p/AaXGIBU0HK0a3btgc4nKZMhVrbGtlBRkuMpxwDQr+mkuq1UKzdJaaJM6k/0fKW+ueNBLi0AqcTmDF67rMn3nBaOVRO3Bt877+BHJy2BW7i0AKSa/HEGj7nKODlLn8Fkcik2HPI/TpEASFX+ruikt3d4XmMyuQSSrIhZrzRbXd7wlVxSAFJVTpauZ9+iwgnjcnQxJpNB+FOj93mKBECqC4alsb/Y5DAxmQwmvKgsjEXmju6e6HguJQCpTq9LD+2qnHnrVQWZrUwmA/CbOtcCigQA/iomxbMra9tL1Hp8qiyTjkCs4K211h9x+QDA36zZ6XzysD04kzLpp0Ub20siZ+UxXDoA8DeKItLLVqvzIZCqK5PWjvD0P291/DuXDQB81s6Wji/vON7zVcrkIsrX2EtlOT6KSwYAzm3+MksVZXIBLZbeOes/dD/OpQIA53eqLXDzugN+VT34VlVlUrbGXiKESONSAYALm/f+GZMkq2drh2rKZMtH3V9vPOi7l0sEAC7O5Q1f8ccGz3+p5XhUs2nxiz/df7LV3jedSwQA+mdsrr6zuapwfE5m4h8CqYrJZHVz51MUCQAMTE8gVvDrbU5VbGRM+GQSlRRR+LLZ4e2MTOHSAICByRyV0bvXVHj1hFx9Z0pPJu/udr9IkQDA4ETOymOqNtgTvpExoZNJICyJmUVmf19fbByXBAAMTkZG+tkdZXd+7rpJWSdScjJ5c6uzgiIBgEsjy/FR5WsT+5iVhJWJszt6xdvr7M9zGQDApdvY4Pl6s6X3rpQrE9M6+/xoTM7hEgCAIZG2sMaasOkkIWVy3BW6pXq742nWHgCGTtNh/92bD/sfS5kyqVhjWxiPCz1LDwBDq7jaUp6IG6tGvEwaTwfu3drkfYQlB4ChZ7EHp69s7nwm6cukvMZawnIDwPApeb+1LCqN7HQyomVSu7/zm81Hu+aw1AAwfDr8kcuW1rtfHsnvOWKbFhVFEbNfbTljc4auYakBYHjl5Oi6m02F48Zm65JrMlm+1/csRQIAIyMYlPJ+ucVpSqrJJByThfEls9vfFZ3EEgPAyNDr00ONpsKbpuYZbEkxmSzd4XmVIgGAkRWLxbMra+3FSTGZdAUlvfHFfb5QWMplaQFgZKWlCamudObMGVOzD2l6Mlmy2VFFkQBAYiiK0JWttZUO9/cZ1jKxdkaueXej/XssJwAkzl/2eh9qOBW4X7NlUrWufYEkxbNYSgBIrLJh3jA+bGVy2B6cubre+S2WEAASb//xri+sbu58SnNlUr7GVqIoif9YYADAJ9PJSkuJLA/PTVfD8o/9juM9X61v7niQpQMA9Wh3haa9v8f7/eF47WG5Nfie1w8eOdUWuJmlAwB1GZdn8JqrjJOyDRnqnkw2HPI/TpEAgDp1dUcn/s92z89UPZlIsiJmvdJsc3nDV7BkAKBOWZm6wF6T8YrxY/QBVU4mf2r0Pk+RAIC6hSNS7pJN7UO6kXHIJpNgVBYzX9zn6wnEClgqAFA3XUZ6eFflzNumjc88rarJ5Dd1rgUUCQBogyTHsypqbUO2kXFIyqQjECt4a631RywPAGhH7S73EwdswULVlMmije0lkbPyGJYGALRDUUR6+WrrQlWUyWlP+MY/b3X8O8sCANqze7/v/roj3Q8nvEwqa+3FshwfxZIAgDYVV7dWJrRMmi29d63/0P04SwEA2nXa2ndT7f7ObyasTMrX2IuFEGksBQBo2+vvt1bFpMFvFRl0mWw+7H+s8aDvXpYAALTP0xG+/L0Gzw8H+/cHvWnxrp+2nLTYg9NZAgBIDrlj9P5mk7FgdKZuZCaT1c2dT1EkAJBcAr2x/F/VuQZ1q/CAJ5OopAjjy2ZHR2dkCtEDQHIxGDKCTSbj9MljDc5hnUze3e1+kSIBgOQUjco5pg3t84d1MgmEJTGzyOzv64uNI3IASE7p6SK6vcx4x/TJWceGZTJ5c6uzgiIBgOQWjwtD+VrbgN476XeZOLujV/zPOtsLxAwAyW9zo+fRpjO9dw95mSzaYJ8Xi8WziRgAUkN5jbXfH6DVrzI57gjdtnyb4ztECwCpY98R/xfXHfB/Y8jKpKLWVhKPCz3RAkBqKV1hWdifG7UuWiYNpwL3bW3yPkKkAJB6bI7gtdX7Oi/6MSMXLZOKNdZi4gSA1FXyQWtZJCYPvkzWtnR+q/lo1xyiBIDU1dkVmfT7eu8rF/qa825alGVFzHmtpdXuCl1NlACQ2nKydD3mxYX5edm6+IAmkxVm37MUCQBACCGCYWnsG5sdpgFNJuGYLIxFZo+/OzqRCAEAQgih16WHdlfOvPnKgsy2fk0mS3d4XqVIAAB/LybFs6vWtxf3azLpDMZyZr1odobCUi7RAQA+VRppQtpSMrPwlsuzD1xwMvnlZmcpRQIAOBdFEbqFq62feQjkp8rE6otc++5G+/eICwBwPvXNHV/ZeaLnwfOWSdX69vmSFM8iKgDAhVSuti44Z5kctAWNq+ud3yIiAMDFHDjRXbjC7HvmM2VSudZWrCgD/xhfAEBqKq+2LJBk5W9lsv1oz9fqmzseJBoAQH+5vOEr/9zo/YEQn9wafPfP9x89be2bQTQAgIHIG2vwmU3GCRnGx/778f/d3P48kQAABipyVs42ZOvTdE0f9/7TnNvz64kEADAYx9uDt6b15xO0AAC4EO7eAgBQJgAAygQAQJkAAECZAAAoEwAAZQIAoEwAAKBMAACUCQCAMgEAUCYAAFAmAADKBABAmQAAKBMAACgTAABlAgCgTAAAlAkAAJQJAIAyAQBQJgAAygQAAMoEAECZAAAk0Gq+AAAAlUlEQVQoEwAAZQIAAGUCAKBMAACUCQCAMgEAgDIBAFAmAADKBABAmQAAQJkAACgTAABlAgCgTAAAoEwAAJQJAIAyAQBQJgAAUCYAAMoEAECZAAAoEwAAKBMAAGUCAKBMAACUCQAAlAkAgDIBAFAmAADKBAAAygQAQJkAACgTAABlAgAAZQIAoEwAAJQJAIAyAQDgYv4vMVxnuxH2/TUAAAAASUVORK5CYII="},,function(e,t,n){"use strict";var r=n(0),o=n(56),i=n(7),a=n(101),s=n(8);function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":d(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,c(t).apply(this,arguments))}var n,i,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,r["Component"]),n=t,(i=[{key:"handleClose",value:function(){this.props.onHide()}},{key:"render",value:function(){return r.createElement(o.Modal,{show:this.props.show,onHide:this.handleClose,keyboard:!0,className:this.props.className},r.createElement(o.Modal.Header,{closeButton:!0},r.createElement(o.Modal.Title,{"data-test":"gene-panel-modal-title"},this.props.panelName)),r.createElement(o.Modal.Body,{style:{maxHeight:"calc(100vh - 210px)",overflowY:"auto"}},this.props.show&&this.props.isLoading&&r.createElement(a.a,{isLoading:!0}),this.props.show&&!this.props.isLoading&&r.createElement("div",{"data-test":"gene-panel-modal-body"},this.props.children)),r.createElement(o.Modal.Footer,null,r.createElement(o.Button,{"data-test":"modal-button",onClick:this.handleClose},"Close")))}}])&&l(n.prototype,i),s&&l(n,s),t}();f([s.default],h.prototype,"handleClose",null),h=f([i.observer],h),t.a=h},,,function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"c",function(){return s}),n.d(t,"g",function(){return l}),n.d(t,"f",function(){return u}),n.d(t,"e",function(){return c}),n.d(t,"d",function(){return p}),n.d(t,"b",function(){return d});var r=n(4),o=n(22);function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var a="all";function s(){return{name:"CNA",type:"seg",displayMode:"FILL",features:[]}}function l(e){return r.keyBy(e||[],"name")}function u(e,t){var n=l(e),o=l(t),a=t.filter(function(e){return!r.isEqual(o[e.name],n[e.name])}).map(function(e){return e.name}),s=r.difference(e.map(function(e){return e.name}),t.map(function(e){return e.name}));return[].concat(i(a),i(s))}function c(e){var t=e.map(function(e){return[e.sampleId,e.chromosome,e.start,e.end,e.numberOfProbes,e.segmentMean]});return[["ID","chrom","loc.start","loc.end","num.mark","seg.mean"]].concat(i(t)).map(function(e){return e.join("\t")}).join("\n")}function p(e){return e.map(function(e){return{chr:Object(o.o)(e.chromosome),start:e.start,end:e.end,value:e.segmentMean,sample:e.sampleId,patient:e.patientId,study:e.studyId,numberOfProbes:e.numberOfProbes,sampleKey:e.uniqueSampleKey}})}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:600,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return Math.max(Math.min(t,r.uniq(e.map(function(e){return e.sampleKey})).length*o),n)}},function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){e.exports=n(16)(486)},function(e,t,n){"use strict";var r,o=n(0),i=n(575),a=n(1005),s=(n(932),n(2)),l=n(693),u=n.n(l),c=n(4),p=n(7),d=n(9),f=n.n(d),h=n(17),m=n(8),y=n(669),g=n(3),v=n(595),b=n(735),S=n(56);function _(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t,n){return t&&E(e.prototype,t),n&&E(e,n),e}function C(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var I=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},D=(k(r={},"desc",a.b.DESC),k(r,"asc",a.b.ASC),r),M=function(e){function t(e,n){var r;return w(this,t),(r=C(this,P(t).call(this,e))).fixedTopRowsData=n,r}return x(t,v["a"]),O(t,[{key:"sortedData",get:function(){var e=this.sortMetric||function(){return 0},t=void 0===this.sortAscending||this.sortAscending;return[].concat(_(this.fixedTopRowsData),_(Object(i.c)(this.allData,e,t)))}}]),t}();I([s.computed],M.prototype,"sortedData",null);var j=function(e){function t(e){var n;w(this,t),(n=C(this,P(t).call(this,e)))._sortBy=e.sortBy;var r=c.find(n.props.columns,function(e){return e.name===n._sortBy});return n._sortDirection=void 0===e.sortDirection?c.isUndefined(r)?"desc":r.defaultSortDirection||"desc":e.sortDirection,n.initDataStore(),n}return x(t,o["Component"]),O(t,[{key:"componentWillReceiveProps",value:function(e){this.updateDataStore(e)}},{key:"updateDataStore",value:function(e){var t=this,n=new M(function(){return t.props.data},this.props.fixedTopRowsData||[]),r=Object(s.toJS)(this._store.filterString);this._store.setProps({columns:e.columns,dataStore:n,initialSortColumn:this._sortBy,initialSortDirection:this._sortDirection}),void 0!==r&&this._store.setFilterString(r)}},{key:"initDataStore",value:function(){var e=this,t=new M(function(){return e.props.data},this.props.fixedTopRowsData||[]);this._store=new i.a({columns:this.props.columns,dataStore:t,initialSortColumn:this._sortBy,initialSortDirection:this._sortDirection})}},{key:"rowClassName",value:function(e){var t=e.index;if(t>-1&&this.isSelectedRow(this._store.dataStore.sortedFilteredData[t])){var n=[u.a.row];if(this.props.highlightedRowClassName){var r=this.props.highlightedRowClassName(this._store.dataStore.sortedFilteredData[t]);n.push(r)}else n.push(u.a.highlightedRow);return f()(n)}return t<0?u.a.headerRow:f()(u.a.row,t%2==0?u.a.evenRow:u.a.oddRow)}},{key:"rowGetter",value:function(e){var t=e.index;return this._store.dataStore.sortedFilteredData[t]}},{key:"getColumn",value:function(e){return c.keyBy(this.props.columns,function(e){return e.name})[e]}},{key:"sort",value:function(e){var t=e.sortBy;this._store.defaultHeaderClick(this.getColumn(t)),this._sortBy=t,this._sortDirection=this._store.dataStore.sortAscending?"asc":"desc",this.props.afterSorting&&this.props.afterSorting(this._sortBy,this._sortDirection)}},{key:"onFilterTextChange",value:function(){var e=this;return Object(y.a)(function(t){e._store.setFilterString(t)},400)}},{key:"afterSelectingRows",value:function(){this.props.afterSelectingRows&&this.props.afterSelectingRows()}},{key:"changeSelectionType",value:function(e){this.props.toggleSelectionOperator&&this.props.defaultSelectionOperator!==e&&this.props.toggleSelectionOperator()}},{key:"isSelectedRow",value:function(e){return!!c.isFunction(this.props.isSelectedRow)&&this.props.isSelectedRow(e)}},{key:"onAddAll",value:function(){this.props.addAll&&this.props.addAll(this._store.dataStore.sortedFilteredData)}},{key:"onRemoveAll",value:function(){this.props.removeAll&&this.props.removeAll(this._store.dataStore.sortedFilteredData)}},{key:"setInputRef",value:function(e){this.inputElement=e}},{key:"componentDidMount",value:function(){!this.props.hideControls&&this.props.autoFocusSearchAfterRendering&&this.inputElement.focus()}},{key:"getSelectionOptions",value:function(){var e=this;return Object.keys(b.b).map(function(t){var n=b.b[t];return o.createElement(S.MenuItem,{onClick:function(){return e.changeSelectionType(n)},active:e.props.defaultSelectionOperator===t},o.createElement(g.c,{overlay:"".concat(n," of samples in the newly selected rows")},o.createElement("div",null,n," ",o.createElement("i",{className:u.a[n.toLowerCase()]}))))})}},{key:"getControls",value:function(){return o.createElement("div",{className:f()(u.a.controls)},!this.props.showControlsAtTop&&o.createElement("input",{placeholder:"Search...",type:"text",onInput:this.onFilterTextChange(),className:f()("form-control",u.a.tableSearchInput)}),o.createElement(h.If,{condition:this.props.showAddRemoveAllButtons},o.createElement("div",{className:"btn-group",role:"group"},this.props.addAll&&o.createElement("button",{className:"btn btn-default btn-xs",onClick:this.onAddAll,"data-test":"fixed-header-table-add-all"},"Select all".concat(this.props.showSelectableNumber?" (".concat(this._store.dataStore.sortedFilteredData.length,")"):"")),this.props.removeAll&&o.createElement("button",{className:"btn btn-default btn-xs","data-test":"fixed-header-table-remove-all",onClick:this.onRemoveAll,disabled:this.props.removeAllDisabled},"Deselect all"))),o.createElement(h.If,{condition:this.props.numberOfSelectedRows>0},o.createElement("div",{className:"btn-group"},o.createElement("button",{className:"btn btn-default btn-xs",onClick:this.afterSelectingRows},"Select Samples"," ",o.createElement(h.If,{condition:this.props.numberOfSelectedRows>1},o.createElement("i",{style:{marginTop:"-2px"},className:this.props.defaultSelectionOperator===b.b.INTERSECTION?u.a.intersection:u.a.union}))),o.createElement(h.If,{condition:this.props.numberOfSelectedRows>1},o.createElement(S.DropdownButton,{bsSize:"xsmall",title:"",id:"selectButton",pullRight:!0},this.getSelectionOptions())))),this.props.showControlsAtTop&&o.createElement("input",{placeholder:"Search...",type:"text",onInput:this.onFilterTextChange(),ref:this.setInputRef,"data-test":"fixed-header-table-search-input",className:f()("form-control",u.a.tableSearchInput)}))}},{key:"render",value:function(){var e=this;return o.createElement("div",{className:u.a.studyViewTablesTable},!this.props.hideControls&&this.props.showControlsAtTop&&this.getControls(),o.createElement(p.Observer,null,function(){return o.createElement(a.c,{width:e.props.width,height:e.props.height,headerHeight:e.props.headerHeight,rowHeight:e.props.rowHeight,rowCount:e._store.dataStore.sortedFilteredData.length,rowGetter:e.rowGetter,rowClassName:e.rowClassName,headerClassName:u.a.headerColumn,sort:e.sort,sortDirection:D[e._sortDirection],sortBy:e._sortBy},e.props.columns.map(function(t,n){return o.createElement(a.a,{key:t.name,label:t.name,dataKey:t.name,width:Number(t.width),headerRenderer:e.columnHeaders[n],cellRenderer:function(e){return t.render(e.rowData)}})}))}),!this.props.hideControls&&!this.props.showControlsAtTop&&this.getControls())}},{key:"columnHeaders",get:function(){var e=this;return this.props.columns.map(function(t){return function(n){var r=[];t.headerRender?r.push(t.headerRender(t.name)):r.push(o.createElement("span",{key:t.name},t.name)),t.name===e._sortBy&&r.push(o.createElement("i",{className:f()(u.a.headerSortingIcon,"fa","desc"===e._sortDirection?"fa-sort-desc":"fa-sort-asc")}));var i=o.createElement("div",{style:{display:"flex"}},r);return t.tooltip?o.createElement(g.c,{placement:"top",overlay:t.tooltip},i):i}})}}]),t}();j.defaultProps={showControlsAtTop:!1,showAddRemoveAllButtons:!1,autoFocusSearchAfterRendering:!1,width:398,height:350,headerHeight:25,rowHeight:25,showSelectableNumber:!1,sortBy:"",numberOfSelectedRows:0,hideControls:!1},I([s.observable],j.prototype,"_sortBy",void 0),I([s.observable],j.prototype,"_sortDirection",void 0),I([m.default],j.prototype,"rowClassName",null),I([m.default],j.prototype,"rowGetter",null),I([m.default],j.prototype,"getColumn",null),I([m.default,s.action],j.prototype,"sort",null),I([m.default,s.action],j.prototype,"onFilterTextChange",null),I([m.default,s.action],j.prototype,"afterSelectingRows",null),I([m.default,s.action],j.prototype,"changeSelectionType",null),I([m.default],j.prototype,"isSelectedRow",null),I([m.default],j.prototype,"onAddAll",null),I([m.default],j.prototype,"onRemoveAll",null),I([s.computed],j.prototype,"columnHeaders",null),I([m.default],j.prototype,"setInputRef",null),j=I([p.observer],j),t.a=j},,function(e,t,n){"use strict";var r=n(0),o=n(757),i=n.n(o),a=n(7),s=n(2),l=n(824),u=n.n(l),c=n(8);function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var y=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":m(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},g=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=d(this,f(t).apply(this,arguments))).visible=!1,e.handleWidth="10%",e}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,r["Component"]),n=t,(o=[{key:"doScroll",value:function(e){this.overflow>0&&(this.scrollEl.style.left=e*this.overflow*-1+"px")}},{key:"componentDidMount",value:function(){this.updateScrollbar()}},{key:"componentDidUpdate",value:function(){this.updateScrollbar()}},{key:"updateScrollbar",value:function(){var e=this;setTimeout(function(){e.overflow>0&&Object(s.runInAction)(function(){e.visible=!0;var t=e.scrollEl.parentNode.offsetWidth/e.scrollEl.offsetWidth;e.handleWidth=75*t+"%"})},1)}},{key:"handleDragEvent",value:function(e,t){var n=t.node,r=t.x/(n.parentNode.offsetWidth-n.offsetWidth);r=(r=r>1?1:r)<0?0:r,this.props.onScroll&&this.props.onScroll({percentage:r}),this.doScroll(r)}},{key:"render",value:function(){var e=this,t=Object.assign({},{visibility:this.visible?"visible":"hidden"},this.props.style);return r.createElement("div",{className:u.a.scrollbar,style:t,ref:function(t){return e.scrollbarEl=t}},r.createElement(i.a,{bounds:"parent",onDrag:this.handleDragEvent},r.createElement("div",{className:u.a.handle,style:{width:this.handleWidth}})))}},{key:"scrollEl",get:function(){return this.props.getScrollEl()}},{key:"overflow",get:function(){return this.scrollEl.offsetWidth-this.scrollEl.parentNode.offsetWidth}}])&&p(n.prototype,o),a&&p(n,a),t}();y([s.observable],g.prototype,"visible",void 0),y([s.observable],g.prototype,"handleWidth",void 0),y([c.default],g.prototype,"handleDragEvent",null),g=y([a.observer],g),t.a=g},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty;function o(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}e.exports=function(e,t){if(o(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(var a=0;a<n.length;a++)if(!r.call(t,n[a])||!o(e[n[a]],t[n[a]]))return!1;return!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(0),i=(r=o)&&r.__esModule?r:{default:r},a=n(959),s=n(833),l=n(834),u=n(767),c=n(835),p=n(832),d=n(965),f=n(730);i.default.Children.children=function(e){return i.default.Children.map(e,function(e){return e})||[]},Array.prototype.find||Object.defineProperty(Array.prototype,"find",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),r=n.length>>>0,o=arguments[1],i=0;i<r;i++)if(i in n&&(t=n[i],e.call(o,t,i,n)))return t}});var h={Table:a.Table,Tr:s.Tr,Td:l.Td,Th:u.Th,Tfoot:c.Tfoot,Thead:p.Thead,Sort:d.Sort,unsafe:f.unsafe};t.default=h,"undefined"!=typeof window&&(window.Reactable=h),e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}};var a,s=n(0),l=(a=s)&&a.__esModule?a:{default:a},u=n(730),c=n(696),p=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l["default"].Component),o(t,[{key:"render",value:function(){return(0,u.isUnsafe)(this.props.children)?l.default.createElement("th",r({},(0,c.filterPropsFrom)(this.props),{dangerouslySetInnerHTML:{__html:this.props.children.toString()}})):l.default.createElement("th",(0,c.filterPropsFrom)(this.props),this.props.children)}}]),t}();t.Th=p},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(0),o=n(3);n(587);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"getCircleX",value:function(e,t,n){var r=e/100;return t*(1-r)+n*r}},{key:"getCircleFill",value:function(e){return e<25?"blue":e>75?"red":"gray"}},{key:"getTooltipContents",value:function(e){return e&&"complete"===e.status&&null!==e.data?r.createElement("div",null,r.createElement("span",null,"mRNA level of the gene in this tumor"),r.createElement("br",null),r.createElement("span",null,r.createElement("b",null,"mRNA z-score: "),e.data.zScore),r.createElement("br",null),r.createElement("span",null,r.createElement("b",null,"Percentile: "),e.data.percentile),r.createElement("br",null)):e&&"complete"===e.status&&null===e.data?r.createElement("span",null,"mRNA data is not available for this gene."):e&&"error"===e.status?r.createElement("span",null,"Error retrieving data."):r.createElement("span",null,"Querying server for data.")}},{key:"getTdContents",value:function(t){var n=null;return t&&"complete"===t.status&&null!==t.data?r.createElement("svg",{width:63,height:12},r.createElement("text",{x:33,y:11,textAnchor:"start",fontSize:10},Math.round(t.data.percentile)+"%"),r.createElement("g",null,r.createElement("line",{x1:0,y1:8,x2:30,y2:8,style:{stroke:"gray",strokeWidth:2}}),r.createElement("circle",{cx:e.getCircleX(t.data.percentile,3,27),cy:8,r:3,fill:e.getCircleFill(t.data.percentile)}))):null!==(n=t&&"complete"===t.status&&null===t.data?o.n.NA:t&&"error"===t.status?o.n.ERROR:o.n.LOADING)?r.createElement(o.o,{status:n,naAlt:"mRNA data is not available for this gene."}):void 0}},{key:"getData",value:function(e,t){if(0===e.length)return null;var n=e[0].sampleId,r=e[0].entrezGeneId;return t.get({sampleId:n,entrezGeneId:r})}},{key:"getDataFromCNA",value:function(e,t){var n=e[0].sampleId,r=e[0].entrezGeneId;return t.get({sampleId:n,entrezGeneId:r})}},{key:"renderFromCacheDatum",value:function(t){return r.createElement(o.c,{placement:"left",overlay:e.getTooltipContents(t),arrowContent:r.createElement("div",{className:"rc-tooltip-arrow-inner"})},e.getTdContents(t))}},{key:"renderFunction",value:function(t,n){var r=e.getData(t,n);return e.renderFromCacheDatum(r)}},{key:"cnaRenderFunction",value:function(t,n){var r=e.getDataFromCNA(t,n);return e.renderFromCacheDatum(r)}}],(n=null)&&i(t.prototype,n),a&&i(t,a),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),o=n(633),i=n.n(o);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"getValues",value:function(e,t,n){var r={},o=!0,i=!1,a=void 0;try{for(var s,l=e[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var u=s.value;r[u.sampleId]=u[n]}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}var c=t.filter(function(e){return r[e]&&r[e]>0&&r[e].toString().length>0});return 1===c.length?[r[c[0]].toString()]:c.map(function(e){return"".concat(e,": ").concat(r[e])})}},{key:"getTextValue",value:function(t,n,r){return e.getValues(t,n,r).join(";")}},{key:"getDisplayValue",value:function(t,n,r){return e.getValues(t,n,r).join("\n")}},{key:"renderFunction",value:function(t,n,o){return r.createElement("div",{className:i.a["integer-data"]},e.getDisplayValue(t,n,o))}},{key:"getReads",value:function(e,t){var n=[];if(e){var r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;n.push(l[t])}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}}return 1==n.length?n[0]:n}}],(n=null)&&a(t.prototype,n),o&&a(t,o),e}()},function(e,t,n){"use strict";function r(e){setTimeout(function(){window.requestAnimationFrame(e)},0)}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";var r=n(0),o=n(7),i=n(894),a=n.n(i),s=n(9),l=n.n(s),u=n(2),c=n(4),p=n.n(c),d=n(590),f=n(167),h=n.n(f),m=n(3),y=n(8);function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var E=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":w(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};function O(e){return e.promises?0===e.promises.length?"complete":m.E.apply(void 0,_(e.promises)):"pending"}var C=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=v(this,b(t).apply(this,arguments))).timeShown=0,e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentWillMount",value:function(){var e=this;this.timeShownInterval=setInterval(function(){e.props.show?e.timeShown+=1:e.timeShown>0&&(e.timeShown=0)},1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timeShownInterval)}},{key:"makeItem",value:function(e,t){var n,o,i,s=null,u=this.props.sequential&&t>this.firstIncompleteIndex;if(!u&&!e.hideIcon)switch(O(e)){case"complete":s=r.createElement("i",{className:l()("fa fa-sm fa-check",a.a["fa-check"])});break;case"pending":s=r.createElement(h.a,{name:"double-bounce",fadeIn:!1,className:a.a["pulse-spinner"]});break;case"error":s=r.createElement("i",{className:l()("fa fa-sm fa-exclamation-triangle",a.a["fa-exclamation-triangle"])})}return r.createElement("span",{className:l()(a.a["item-row"],(n={},o=a.a["not-invoked-item"],i=u,o in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i,n)),style:e.style},e.label,r.createElement("span",{style:{marginLeft:7}},s))}},{key:"render",value:function(){return this.props.show?r.createElement("div",{className:a.a.container},r.createElement("div",{className:a.a["items-container"]},this.items.map(this.makeItem)),p.a.some(this.items,function(e){return"error"===O(e)})&&r.createElement(d.a,null)):null}},{key:"items",get:function(){return this.props.getItems(this.timeShown)}},{key:"firstIncompleteIndex",get:function(){return this.items.findIndex(function(e){return"complete"!==O(e)})}}])&&g(n.prototype,o),i&&g(n,i),t}();E([u.observable],C.prototype,"timeShown",void 0),E([u.computed],C.prototype,"items",null),E([u.computed],C.prototype,"firstIncompleteIndex",null),E([y.default],C.prototype,"makeItem",null),C=E([o.observer],C),t.a=C},function(e,t,n){e.exports=n(16)(166)},function(e,t,n){e.exports=n(16)(101)},function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"b",function(){return f});var r=n(0),o=n(7),i=n(756);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},d=function(e){var t=e.genePanelIds,n=e.toggleModal;return t.length>0?r.createElement("span",{style:{maxWidth:400}},"Gene panels:"," ",t.map(function(e,t){return[t>0&&", ",r.createElement("a",{key:e,"data-test":"gene-panel-linkout-".concat(e),href:"#",onClick:function(){n(e)}},e)]})):r.createElement("span",null)},f=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=s(this,l(t).apply(this,arguments))).getGenesList=function(e){return e&&e.genes?e.genes.map(function(e){return r.createElement("p",{key:e.entrezGeneId},e.hugoGeneSymbol)}):null},e}var n,o,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=this.props.genePanelCache.get({genePanelId:this.props.panelName});return r.createElement(i.a,{panelName:this.props.panelName,show:this.props.show,onHide:this.props.onHide,isLoading:e.isPending},e.isComplete&&this.getGenesList(e.result))}}])&&a(n.prototype,o),c&&a(n,c),t}();f=p([o.observer],f)},function(e,t,n){"use strict";function r(e,t){var n=t.indexOf(e);if(-1===n)return t.concat([e]);var r=t.slice();return r.splice(n,1),r}function o(e,t){for(var n=[],r=0;r<t.length;r++)n.push(t[r]),r<t.length-1&&n.push(e);return n}n.d(t,"b",function(){return r}),n.d(t,"a",function(){return o})},,,,,,,function(e,t,n){"use strict";var r=n(4),o=n.n(r),i=n(0),a=n(7),s=n(586),l=n.n(s),u=n(2),c=n(576),p=n(581),d=n(632),f=n.n(d),h=n(709),m=n(607),y=n(583),g=n(582),v=n(934),b=n.n(v);var S=n(597),_=n(3),w=n(694),E=n(695);function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var k=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":T(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},A=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},I={fontFamily:c.c.fontFamily,fontSize:c.c.fontSize},D=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=C(this,P(t).apply(this,arguments))).tooltipModel=null,e.pointHovered=!1,e.mouseEvents=e.makeMouseEvents(),e}var n,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(t,i["Component"]),n=t,(r=[{key:"containerRef",value:function(e){this.container=e}},{key:"makeMouseEvents",value:function(){var e=this,t=null;return[{target:"data",eventHandlers:{onMouseOver:function(){return[{target:"data",mutation:function(n){return e.tooltipModel=n,e.pointHovered=!0,null!==t&&(clearTimeout(t),t=null),{active:!0}}}]},onMouseOut:function(){return[{target:"data",mutation:function(){return null!==t&&clearTimeout(t),t=setTimeout(function(){e.pointHovered=!1},250),{active:!1}}}]}}}]}},{key:"x",value:function(e){return this.props.logX?this.props.logX.fLogScale(e.x,0):e.x}},{key:"y",value:function(e){return this.props.logY?this.props.logY.fLogScale(e.y,0):e.y}},{key:"tickFormat",value:function(e,t,n){return n&&!this.props.useLogSpaceTicks&&(e=n.fInvLogScale(e),t=t.map(function(e){return n.fInvLogScale(e)})),Object(m.a)(e,t)}},{key:"tickFormatX",value:function(e,t,n){return this.tickFormat(e,n,this.props.logX)}},{key:"tickFormatY",value:function(e,t,n){return this.tickFormat(e,n,this.props.logY)}},{key:"getChart",value:function(){var e=this;return i.createElement("div",{ref:this.containerRef,style:{width:this.svgWidth,height:this.svgHeight}},i.createElement("svg",{id:this.props.svgId||"",style:{width:this.svgWidth,height:this.svgHeight,pointerEvents:"all"},height:this.svgHeight,width:this.svgWidth,role:"img",viewBox:"0 0 ".concat(this.svgWidth," ").concat(this.svgHeight)},i.createElement("g",{transform:"translate(".concat(25,",0)")},i.createElement(p.VictoryChart,{theme:c.d,width:this.props.chartWidth,height:this.props.chartHeight,standalone:!1,domainPadding:50,singleQuadrantDomainPadding:!1},this.title,this.legend,i.createElement(p.VictoryAxis,{domain:this.plotDomain.x,orientation:"bottom",offsetY:50,crossAxis:!1,tickCount:8,tickFormat:this.tickFormatX,axisLabelComponent:i.createElement(p.VictoryLabel,{dy:25}),label:this.props.axisLabelX}),i.createElement(p.VictoryAxis,{domain:this.plotDomain.y,offsetX:50,orientation:"left",crossAxis:!1,tickCount:8,tickFormat:this.tickFormatY,dependentAxis:!0,axisLabelComponent:i.createElement(p.VictoryLabel,{dy:-35}),label:this.props.axisLabelY}),this.data.map(function(t){return i.createElement(p.VictoryScatter,{key:"".concat(t.fill,",").concat(t.stroke,",").concat(t.strokeWidth,",").concat(t.strokeOpacity,",").concat(t.fillOpacity,",").concat(t.symbol),style:{data:{fill:t.fill,stroke:t.stroke,strokeWidth:t.strokeWidth,strokeOpacity:t.strokeOpacity,fillOpacity:t.fillOpacity}},size:e.size,symbol:t.symbol,data:t.data,events:e.mouseEvents,x:e.x,y:e.y})}),this.regressionLine),this.correlationInfo,this.regressionLineEquation)))}},{key:"render",value:function(){return this.props.data.length?i.createElement("div",null,i.createElement(a.Observer,null,this.getChart),this.container&&this.tooltipModel&&this.props.tooltip&&i.createElement(h.a,{container:this.container,targetHovered:this.pointHovered,targetCoords:{x:this.tooltipModel.x+25,y:this.tooltipModel.y},overlay:this.props.tooltip(this.tooltipModel.datum)})):i.createElement("div",{className:"alert alert-info"},"No data to plot.")}},{key:"fontFamily",get:function(){return this.props.fontFamily||"Verdana,Arial,sans-serif"}},{key:"title",get:function(){if(this.props.title){var e=Object(_.fb)(this.props.title,this.props.chartWidth,this.fontFamily,"14px");return i.createElement(p.VictoryLabel,{style:{fontWeight:"bold",fontFamily:this.fontFamily,textAnchor:"middle"},x:this.props.chartWidth/2,y:"1.2em",text:e})}return null}},{key:"sideLegendX",get:function(){return this.props.chartWidth-20}},{key:"sideLegendY",get:function(){return this.props.showRegressionLine?235:190}},{key:"legendLocation",get:function(){return this.props.legendData&&this.props.legendData.length>7?"bottom":"right"}},{key:"bottomLegendHeight",get:function(){return this.props.legendData&&this.props.legendData.length&&"bottom"===this.legendLocation?Object(y.c)(this.legendItemsPerRow,this.props.legendData,this.props.legendTitle):0}},{key:"maxLegendLabelWidth",get:function(){return this.props.legendData?Object(y.g)(this.props.legendData):0}},{key:"legendItemsPerRow",get:function(){return Object(y.f)(this.maxLegendLabelWidth,this.svgWidth,45,this.props.legendTitle)}},{key:"legend",get:function(){if(this.props.legendData&&this.props.legendData.length){var e=this.props.legendData;"bottom"===this.legendLocation&&(e=e.map(function(e){var t=e.name,n=A(e,["name"]);return Array.isArray(t)&&(t=t.join(" ")),Object.assign({name:t},n)}));var t="right"===this.legendLocation?"vertical":"horizontal";return i.createElement(p.VictoryLegend,{dataComponent:i.createElement(w.a,{orientation:t}),labelComponent:i.createElement(E.a,{orientation:t}),events:[{childName:"all",target:["data","labels"],eventHandlers:{onClick:function(){return[{target:"data",mutation:function(e){var t=e.data[e.index];t.highlighting&&t.highlighting.onClick(t)}}]}}}],orientation:t,itemsPerRow:"right"===this.legendLocation?void 0:this.legendItemsPerRow,rowGutter:"right"===this.legendLocation?void 0:-5,gutter:"right"===this.legendLocation?void 0:45,data:e,x:"right"===this.legendLocation?this.sideLegendX:0,y:"right"===this.legendLocation?this.sideLegendY:this.svgHeight-this.bottomLegendHeight,title:this.props.legendTitle,titleOrientation:"right"===this.legendLocation?"top":"left",style:{title:{fontSize:15,fontWeight:"bold"}},titleComponent:i.createElement(p.VictoryLabel,{dx:"right"===this.legendLocation?0:-10})})}return null}},{key:"correlationInfo",get:function(){var e=this.sideLegendX;return i.createElement("g",null,i.createElement(p.VictoryLabel,{x:e+107,y:100,textAnchor:"end",text:"Spearman: ".concat(this.spearmanCorr.toFixed(2)),style:I}),null!==this.spearmanPval&&i.createElement(p.VictoryLabel,{x:e+107,y:100,textAnchor:"end",dy:"2",text:"(p = ".concat(Object(g.b)(this.spearmanPval,3,.01),")"),style:I}),i.createElement(p.VictoryLabel,{x:e+107,y:100,textAnchor:"end",dy:"5",text:"Pearson: ".concat(this.pearsonCorr.toFixed(2)),style:I}),null!==this.pearsonPval&&i.createElement(p.VictoryLabel,{x:e+107,y:100,textAnchor:"end",dy:"7",text:"(p = ".concat(Object(g.b)(this.pearsonPval,3,.01),")"),style:I}))}},{key:"regressionLineEquation",get:function(){if(!this.props.showRegressionLine)return null;var e=this.regressionLineComputations.string,t="R = ".concat(this.regressionLineComputations.r2);return i.createElement("g",null,i.createElement("line",{stroke:"#c43a31",strokeWidth:2,x1:this.sideLegendX+10,y1:195,x2:this.sideLegendX+10+10,y2:195,dy:"0"}),i.createElement(p.VictoryLabel,{x:this.sideLegendX+10+10+7,y:195,dy:"0",textAnchor:"start",text:e,style:I}),i.createElement(p.VictoryLabel,{x:this.sideLegendX+10+10+7,y:195,dy:"2",textAnchor:"start",text:t,style:I}))}},{key:"splitData",get:function(){var e=this.props.excludeLimitValuesFromCorrelation?o.a.filter(this.props.data,function(e){return!Object(y.b)(e)}):this.props.data,t=[],n=[],r=!0,i=!1,a=void 0;try{for(var s,l=e[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;t.push(u.x),n.push(u.y)}}catch(e){i=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw a}}return{x:t,y:n}}},{key:"plotDomain",get:function(){var e={x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY},t={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},n=!0,r=!1,o=void 0;try{for(var i,a=this.props.data[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;e.x=Math.max(s.x,e.x),e.y=Math.max(s.y,e.y),t.x=Math.min(s.x,t.x),t.y=Math.min(s.y,t.y)}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return this.props.logX&&(t.x=this.props.logX.fLogScale(t.x,0),e.x=this.props.logX.fLogScale(e.x,0)),this.props.logY&&(t.y=this.props.logY.fLogScale(t.y,0),e.y=this.props.logY.fLogScale(e.y,0)),{x:[t.x,e.x],y:[t.y,e.y]}}},{key:"pearsonCorr",get:function(){var e=this;if(this.props.correlation)return this.props.correlation.pearson;var t=this.splitData.x,n=this.splitData.y;return this.props.logX&&(t=t.map(function(t){return e.props.logX.fLogScale(t,0)})),this.props.logY&&(n=n.map(function(t){return e.props.logY.fLogScale(t,0)})),f.a.corrcoeff(t,n)}},{key:"spearmanCorr",get:function(){return this.props.correlation?this.props.correlation.spearman:f.a.spearmancoeff(this.splitData.x,this.splitData.y)}},{key:"spearmanPval",get:function(){return Object(y.a)(this.spearmanCorr,this.splitData.x.length)}},{key:"pearsonPval",get:function(){return Object(y.a)(this.pearsonCorr,this.splitData.x.length)}},{key:"rightPadding",get:function(){return this.props.legendData&&this.props.legendData.length>0&&"right"===this.legendLocation?Math.max(120,this.maxLegendLabelWidth+50):120}},{key:"svgWidth",get:function(){return 25+this.props.chartWidth+this.rightPadding}},{key:"svgHeight",get:function(){return this.props.chartHeight+this.bottomLegendHeight}},{key:"size",get:function(){var e=this.props.highlight,t=this.props.size;return Object(y.i)(e,t)}},{key:"data",get:function(){return Object(y.l)(this.props.data,Object(S.a)(this.props.fill,"0x000000"),Object(S.a)(this.props.stroke,"0x000000"),Object(S.a)(this.props.strokeWidth,0),Object(S.a)(this.props.strokeOpacity,1),Object(S.a)(this.props.fillOpacity,1),Object(S.a)(this.props.symbol,"circle"),this.props.zIndexSortBy)}},{key:"regressionLineComputations",get:function(){var e=this;return function(e){return b.a.linear(e)}(this.props.data.map(function(t){return[e.x(t),e.y(t)]}))}},{key:"regressionLine",get:function(){var e=this.props.excludeLimitValuesFromCorrelation?o.a.filter(this.props.data,function(e){return!Object(y.b)(e)}):this.props.data;if(this.props.showRegressionLine&&e.length>=2){var t=this.regressionLineComputations,n=function(e){return t.predict(e)[1]},r=[this.plotDomain.x[0],this.plotDomain.x[0]*(1-.7)+.7*this.plotDomain.x[1],this.plotDomain.x[1]].map(function(e){return{x:e,y:n(e),label:""}});return[i.createElement(p.VictoryLine,{style:{data:{stroke:"#c43a31",strokeWidth:2},labels:{fontSize:15,fill:"#000000",stroke:"#ffffff",strokeWidth:6,fontWeight:"bold",paintOrder:"stroke"}},data:r,labelComponent:i.createElement(p.VictoryLabel,{lineHeight:1.3})})]}return null}}])&&O(n.prototype,r),s&&O(n,s),t}();k([u.observable.ref],D.prototype,"tooltipModel",void 0),k([u.observable],D.prototype,"pointHovered",void 0),k([u.observable.ref],D.prototype,"container",void 0),k([l.a],D.prototype,"containerRef",null),k([u.computed],D.prototype,"fontFamily",null),k([u.computed],D.prototype,"sideLegendX",null),k([u.computed],D.prototype,"sideLegendY",null),k([u.computed],D.prototype,"legendLocation",null),k([u.computed],D.prototype,"bottomLegendHeight",null),k([u.computed],D.prototype,"maxLegendLabelWidth",null),k([u.computed],D.prototype,"legendItemsPerRow",null),k([u.computed],D.prototype,"splitData",null),k([u.computed],D.prototype,"plotDomain",null),k([u.computed],D.prototype,"pearsonCorr",null),k([u.computed],D.prototype,"spearmanCorr",null),k([u.computed],D.prototype,"spearmanPval",null),k([u.computed],D.prototype,"pearsonPval",null),k([u.computed],D.prototype,"rightPadding",null),k([u.computed],D.prototype,"svgWidth",null),k([u.computed],D.prototype,"svgHeight",null),k([l.a],D.prototype,"x",null),k([l.a],D.prototype,"y",null),k([u.computed],D.prototype,"size",null),k([l.a],D.prototype,"tickFormatX",null),k([l.a],D.prototype,"tickFormatY",null),k([u.computed],D.prototype,"data",null),k([u.computed],D.prototype,"regressionLineComputations",null),k([l.a],D.prototype,"getChart",null),D=k([a.observer],D);t.a=D},,,,function(e,t,n){e.exports={portalWidth:"mutationStatus-module__portalWidth__2s2Qx",framedImage:"mutationStatus-module__framedImage__mbMeM",germline:"mutationStatus-module__germline__3PooJ",somatic:"mutationStatus-module__somatic__1ieJL",unknown:"mutationStatus-module__unknown__mbYor"}},function(e,t,n){e.exports={portalWidth:"proteinChange-module__portalWidth__1U76x",framedImage:"proteinChange-module__framedImage___DDUH",proteinChange:"proteinChange-module__proteinChange__2xJ_V",germline:"proteinChange-module__germline__1c0ww"}},function(e,t,n){e.exports={portalWidth:"mutationType-module__portalWidth__2MF0M",framedImage:"mutationType-module__framedImage__2Mkp8",missenseMutation:"mutationType-module__missenseMutation__1TVMD",truncMutation:"mutationType-module__truncMutation__LbUPB",inframeMutation:"mutationType-module__inframeMutation__3O1fU",otherMutation:"mutationType-module__otherMutation__12WiG",defaultMutation:"mutationType-module__defaultMutation__K_gPQ",fusion:"mutationType-module__fusion__1Auq-"}},function(e,t,n){e.exports={portalWidth:"variantType-module__portalWidth__3507N",framedImage:"variantType-module__framedImage__1_Tun",variantTypeSnp:"variantType-module__variantTypeSnp__2Cxot",variantTypeIns:"variantType-module__variantTypeIns__3b3Bu",variantTypeDel:"variantType-module__variantTypeDel__29irc",variantTypeOther:"variantType-module__variantTypeOther__2ZJz2"}},function(e,t,n){e.exports={portalWidth:"mutationAssessorTooltip-module__portalWidth__15gd3",framedImage:"mutationAssessorTooltip-module__framedImage__1LzrF","ma-link":"mutationAssessorTooltip-module__ma-link__3QpML","mutation-assessor-link":"mutationAssessorTooltip-module__mutation-assessor-link__3XLsB","ma-icon":"mutationAssessorTooltip-module__ma-icon__GqjUA","ma-msa-icon":"mutationAssessorTooltip-module__ma-msa-icon__2yT6h","ma-3d-icon":"mutationAssessorTooltip-module__ma-3d-icon__166M3","mutation-assessor-main-img":"mutationAssessorTooltip-module__mutation-assessor-main-img__2QlLP","ma-tooltip-table":"mutationAssessorTooltip-module__ma-tooltip-table__3tyG8"}},function(e,t,n){e.exports={portalWidth:"cosmic-module__portalWidth__3eF_t",framedImage:"cosmic-module__framedImage__1OwYD","cosmic-table":"cosmic-module__cosmic-table__2ms15"}},function(e,t,n){e.exports={portalWidth:"validationStatus-module__portalWidth__yrVHU",framedImage:"validationStatus-module__framedImage___YpeK",unknown:"validationStatus-module__unknown__1XsWI",valid:"validationStatus-module__valid__Ziu-a",wildtype:"validationStatus-module__wildtype__14GJI",other:"validationStatus-module__other__3oLt_"}},function(e,t,n){e.exports={portalWidth:"exon-module__portalWidth__1GWC2",framedImage:"exon-module__framedImage__2Xs1J","exon-table":"exon-module__exon-table__6cnBD"}},function(e,t,n){e.exports={portalWidth:"hgvsg-module__portalWidth__70K9W",framedImage:"hgvsg-module__framedImage__2Yrs7","hgvsg-data":"hgvsg-module__hgvsg-data__mrt6T","genome-nexus-logo":"hgvsg-module__genome-nexus-logo__2zJ74"}},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";function r(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20,o=(n=n||function(e,t){for(var n=0,r=1;e(n)>t;){if(n<Number.MIN_SAFE_INTEGER)throw new Error("Couldnt find lower bound");n-=r,r*=2}r=1;for(var o=0;e(o)<t;){if(o>Number.MAX_SAFE_INTEGER)throw new Error("Couldnt find upper bound");o+=r,r*=2}return[n,o]}(e,t))[0],i=n[1],a=(o+i)/2,s=r;s>0&&e(a)!==t;)e(a)>t?i=a:o=a,a=(o+i)/2,s-=1;return a}function o(e,t,n){return r(function(t){return-e(t)},-t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:20)}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o})},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return p});var r=n(742),o=n(4),i=n.n(o),a=n(624),s=n(799),l=n(800),u=n(570),c=n(597);function p(e,t,n,o,a){var s=function(e,t){return function(e,t){if(m(e.geneticTracks||[],t.geneticTracks||[]))return!0;return _(e)!==_(t)||w(e)!==w(t)}(e,t)||function(e,t){if(m(e.clinicalTracks||[],t.clinicalTracks||[]))return!0}(e,t)||function(e,t){if(m(e.heatmapTracks,t.heatmapTracks||[])||m(e.genesetHeatmapTracks,t.genesetHeatmapTracks||[]))return!0}(e,t)}(e,t),l=function(e,t){return!e.suppressRendering&&(b(e,t)||h(y(e),y(t))>1)}(e,t);l&&d(e,n),s&&n.keepSorted(!1),function(e,t,n){e.suppressRendering&&!t.suppressRendering&&d(e,n)}(e,t,n),function(e,t,n){e.width!==t.width&&n.setWidth(e.width)}(e,t,n),function(e,t,n){i.a.isEqual(e.columnLabels,t.columnLabels)||n.setColumnLabels(e.columnLabels||{})}(e,t,n),function(e,t,n){e.showWhitespaceBetweenColumns!==t.showWhitespaceBetweenColumns&&n.setCellPaddingOn(!!e.showWhitespaceBetweenColumns)}(e,t,n),function(e,t,n){e.showMinimap!==t.showMinimap&&n.setMinimapVisible(!!e.showMinimap)}(e,t,n),function(e,t,n){e.onMinimapClose&&e.onMinimapClose!==t.onMinimapClose&&n.onMinimapClose(e.onMinimapClose)}(e,t,n),function(e,t,n){e.showTrackLabels!==t.showTrackLabels&&n.setShowTrackLabels(!!e.showTrackLabels)}(e,t,n),function(e,t,n){e.showSublabels!==t.showSublabels&&n.setShowTrackSublabels(!!e.showSublabels)}(e,t,n),function(e,t,n){if(!i.a.isEqual(e.heatmapTrackHeaders,t.heatmapTrackHeaders)){var r=e.heatmapTrackHeaders||{},o=t.heatmapTrackHeaders||{},a=Object.keys(r).map(function(e){return parseInt(e,10)}),s=Object.keys(o).map(function(e){return parseInt(e,10)}),l=!0,u=!1,c=void 0;try{for(var p,d=a[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var f=p.value;n.setTrackGroupHeader(f,r[f])}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}var h=!0,m=!1,y=void 0;try{for(var g,v=s[Symbol.iterator]();!(h=(g=v.next()).done);h=!0){var b=g.value;b in r||n.setTrackGroupHeader(b,void 0)}}catch(e){m=!0,y=e}finally{try{h||null==v.return||v.return()}finally{if(m)throw y}}}}(e,t,n),function(e,t,n,o,a){var s={genetic:void 0,genesetHeatmap:void 0,heatmap:void 0,heatmap01:void 0,genericAssay:{}},l=o();t.geneticTracks&&t.geneticTracks.length&&!b(e,t)&&(s.genetic=l[t.geneticTracks[0].key]);t.genesetHeatmapTracks&&t.genesetHeatmapTracks.length&&(s.genesetHeatmap=l[t.genesetHeatmapTracks[0].key]);if(t.heatmapTracks&&t.heatmapTracks.length){var c,p,d=!0,f=!1,h=void 0;try{for(var m,y=t.heatmapTracks[Symbol.iterator]();!(d=(m=y.next()).done);d=!0){var g=m.value;if(void 0===c&&g.molecularAlterationType===u.a.METHYLATION?c=l[g.key]:void 0===p&&g.molecularAlterationType!==u.a.METHYLATION&&g.molecularAlterationType!==u.a.GENERIC_ASSAY&&(p=l[g.key]),void 0!==c&&void 0!==p)break}}catch(e){f=!0,h=e}finally{try{d||null==y.return||y.return()}finally{if(f)throw h}}s.heatmap=p,s.heatmap01=c}else if(t.genesetHeatmapTracks){var v=!0,S=!1,_=void 0;try{for(var w,E=t.genesetHeatmapTracks[Symbol.iterator]();!(v=(w=E.next()).done);v=!0){var T=w.value;if(T.expansionTrackList&&T.expansionTrackList.length){s.heatmap=l[T.expansionTrackList[0].key];break}}}catch(e){S=!0,_=e}finally{try{v||null==E.return||E.return()}finally{if(S)throw _}}}s.genericAssay=i.a.chain(t.heatmapTracks).filter(function(e){return e.molecularAlterationType===u.a.GENERIC_ASSAY}).groupBy(function(e){return e.molecularProfileId}).mapValues(function(e){return i.a.last(e)}).mapValues(function(e){return l[e.key]}).value();var k=i.a.chain(e.heatmapTracks).filter(function(e){return e.molecularAlterationType===u.a.GENERIC_ASSAY}).groupBy(function(e){return e.molecularProfileId}).mapValues(function(e){return i()(e).flatMap(function(e){return e.data}).filter(function(e){return!e.category}).map(function(e){return e.profile_data}).value()}).value(),A=i.a.mapValues(k,function(e){return i.a.max(e)}),I=i.a.mapValues(k,function(e){return i.a.min(e)}),D=i.a.keyBy(t.geneticTracks||[],function(e){return e.key}),M=!0,j=!1,N=void 0;try{for(var R,L=e.geneticTracks[Symbol.iterator]();!(M=(R=L.next()).done);M=!0){var G=R.value;O(G,D[G.key],o,a,n,e,t,s),delete D[G.key]}}catch(e){j=!0,N=e}finally{try{M||null==L.return||L.return()}finally{if(j)throw N}}var F=!0,B=!1,V=void 0;try{for(var z,q=(t.geneticTracks||[])[Symbol.iterator]();!(F=(z=q.next()).done);F=!0){var U=z.value;D.hasOwnProperty(U.key)&&O(void 0,D[U.key],o,a,n,e,t,s)}}catch(e){B=!0,V=e}finally{try{F||null==q.return||q.return()}finally{if(B)throw V}}!function(e,t,n,o){var a=i.a.keyBy(e.geneticTracks,"key"),s=i.a.keyBy(t.geneticTracks||[],"key"),l=(e.geneticTracksOrder||e.geneticTracks.map(function(e){return e.key})).filter(function(e){return e in a}),u=(t.geneticTracksOrder||(t.geneticTracks||[]).map(function(e){return e.key})).filter(function(e){return e in s});if(!i.a.isEqual(l,u)){var c=o();n.setTrackGroupOrder(r.b,l.map(function(e){return c[e]}))}}(e,t,n,o);var H=i.a.keyBy(t.clinicalTracks||[],function(e){return e.key}),W=!0,K=!1,$=void 0;try{for(var Q,Y=e.clinicalTracks[Symbol.iterator]();!(W=(Q=Y.next()).done);W=!0){var X=Q.value;C(X,H[X.key],o,n,e),delete H[X.key]}}catch(e){K=!0,$=e}finally{try{W||null==Y.return||Y.return()}finally{if(K)throw $}}var Z=!0,J=!1,ee=void 0;try{for(var te,ne=(t.clinicalTracks||[])[Symbol.iterator]();!(Z=(te=ne.next()).done);Z=!0){var re=te.value;H.hasOwnProperty(re.key)&&C(void 0,H[re.key],o,n,e)}}catch(e){J=!0,ee=e}finally{try{Z||null==ne.return||ne.return()}finally{if(J)throw ee}}var oe=i.a.keyBy(t.genesetHeatmapTracks||[],function(e){return e.key}),ie=!0,ae=!1,se=void 0;try{for(var le,ue=e.genesetHeatmapTracks[Symbol.iterator]();!(ie=(le=ue.next()).done);ie=!0){var ce=le.value;P(ce,oe[ce.key],o,n,e,s),delete oe[ce.key]}}catch(e){ae=!0,se=e}finally{try{ie||null==ue.return||ue.return()}finally{if(ae)throw se}}var pe=!0,de=!1,fe=void 0;try{for(var he,me=(t.genesetHeatmapTracks||[])[Symbol.iterator]();!(pe=(he=me.next()).done);pe=!0){var ye=he.value;oe.hasOwnProperty(ye.key)&&P(void 0,oe[ye.key],o,n,e,s)}}catch(e){de=!0,fe=e}finally{try{pe||null==me.return||me.return()}finally{if(de)throw fe}}var ge=i.a.keyBy(t.heatmapTracks||[],function(e){return e.key}),ve=!0,be=!1,Se=void 0;try{for(var _e,we=e.heatmapTracks[Symbol.iterator]();!(ve=(_e=we.next()).done);ve=!0){var Ee=_e.value;Ee.maxProfileValue=A[Ee.molecularProfileId],Ee.minProfileValue=I[Ee.molecularProfileId],x(Ee,ge[Ee.key],o,function(){},n,e,{},s,void 0),delete ge[Ee.key]}}catch(e){be=!0,Se=e}finally{try{ve||null==we.return||we.return()}finally{if(be)throw Se}}var Oe=!0,Ce=!1,Pe=void 0;try{for(var xe,Te=(t.heatmapTracks||[])[Symbol.iterator]();!(Oe=(xe=Te.next()).done);Oe=!0){var ke=xe.value;ge.hasOwnProperty(ke.key)&&(ke.maxProfileValue=A[ke.molecularProfileId],ke.minProfileValue=I[ke.molecularProfileId],x(void 0,ge[ke.key],o,function(){},n,e,{},s,void 0))}}catch(e){Ce=!0,Pe=e}finally{try{Oe||null==Te.return||Te.return()}finally{if(Ce)throw Pe}}!function(e,t,n,r){var o=i.a.keyBy(e.heatmapTracks,"key"),a=i.a.keyBy(t.heatmapTracks||[],"key");i.a.forEach(e.heatmapTracksOrder||{},function(e,s){var l=e.filter(function(e){return e in o}),u=((t.heatmapTracksOrder||{})[s]||[]).filter(function(e){return e in a});if(!i.a.isEqual(l,u)){var c=r();n.setTrackGroupOrder(parseInt(s,10),l.map(function(e){return c[e]}))}})}(e,t,n,o)}(e,t,n,o,a),function(e,t,n){var r=v(t),o=v(e);("order"===r.type&&"order"===o.type&&r.order!==o.order||!i.a.isEqual(r,o))&&n.setSortConfig(o)}(e,t,n),function(e,t,n){var o=i.a.sortBy(i.a.uniq((t.heatmapTracks||[]).concat(t.genesetHeatmapTracks||[]).map(function(e){return e.trackGroupIndex}))),a=i.a.sortBy(i.a.uniq(e.heatmapTracks.concat(e.genesetHeatmapTracks).map(function(e){return e.trackGroupIndex})));i.a.xor(a,o).length&&n.setTrackGroupSortPriority([r.a].concat(a).concat(r.b))}(e,t,n),function(e,t,n){e.hiddenIds!==t.hiddenIds&&n.hideIds(e.hiddenIds||[],!0)}(e,t,n),function(e,t,n){i.a.isEqual(e.horzZoomToFitIds,t.horzZoomToFitIds)||n.updateHorzZoomToFitIds(e.horzZoomToFitIds||[])}(e,t,n),function(e,t,n,r){var o=r(),i=e.clinicalTracks.map(function(e){return o[e.key]});e.showClinicalTrackLegends&&!t.showClinicalTrackLegends?n.showTrackLegends(i):!e.showClinicalTrackLegends&&t.showClinicalTrackLegends&&n.hideTrackLegends(i)}(e,t,n,o),function(e,t,n){e.highlightedIds!==t.highlightedIds&&n.setHighlightedIds(e.highlightedIds||[])}(e,t,n),function(e,t,n,r){if(e.highlightedTracks!==t.highlightedTracks){var o=e.highlightedTracks||[],i=r();n.setHighlightedTracks(o.map(function(e){return i[e]}))}}(e,t,n,o),function(e,t,n){!e.suppressRendering&&t.suppressRendering&&f(e,n)}(e,t,n),s&&n.keepSorted(!0),l&&f(e,n)}function d(e,t){t.suppressRendering(),e.onSuppressRendering&&e.onSuppressRendering()}function f(e,t){t.releaseRendering(e.onReleaseRendering)}function h(e,t){var n=i.a.keyBy(t,function(e){return e.key}),r=0,o=0,a=0,s=!0,l=!1,u=void 0;try{for(var c,p=e[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){var d=c.value,f=n[d.key];f?(o+=1,f.data!==d.data&&(a+=1)):r+=1}}catch(e){l=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw u}}return r+(t.length-o)+a}function m(e,t){return e.length!==t.length||h(e,t)>0}function y(e){return(e.geneticTracks||[]).concat(e.genesetHeatmapTracks||[]).concat(e.clinicalTracks||[]).concat(e.heatmapTracks||[])}function g(e){return e.profile_data}function v(e){var t={},n=function(e){return e.sortConfig&&e.sortConfig.order}(e);return n?t={type:"order",order:n}:e.sortConfig&&void 0!==e.sortConfig.clusterHeatmapTrackGroupIndex&&(t={type:"cluster",track_group_index:e.sortConfig.clusterHeatmapTrackGroupIndex,clusterValueFn:g}),t}function b(e,t){return e.distinguishMutationType!==t.distinguishMutationType||e.distinguishDrivers!==t.distinguishDrivers||e.distinguishGermlineMutations!==t.distinguishGermlineMutations}function S(e,t,n,r){if(!e&&t){var o=n[t.key];return void 0!==o&&(r.getTracks().includes(o)&&r.removeTrack(o),delete n[t.key]),!0}return!1}function _(e){return e.distinguishMutationType&&e.sortConfig&&e.sortConfig.sortByMutationType}function w(e){return e.distinguishDrivers&&e.sortConfig&&e.sortConfig.sortByDrivers}function E(e,t,n,r,o,a,s,l,u){var c=t&&t.expansionTrackList?t.expansionTrackList:[],p=e&&e.expansionTrackList?e.expansionTrackList:[],d=i.a.keyBy(c,function(e){return e.key}),f=!0,h=!1,m=void 0;try{for(var y,g=p[Symbol.iterator]();!(f=(y=g.next()).done);f=!0){var v=y.value;u(v,d[v.key],n,r,o,a,s,l,e.key),delete d[v.key]}}catch(e){h=!0,m=e}finally{try{f||null==g.return||g.return()}finally{if(h)throw m}}var b=!0,S=!1,_=void 0;try{for(var w,E=c[Symbol.iterator]();!(b=(w=E.next()).done);b=!0){var O=w.value;d.hasOwnProperty(O.key)&&u(void 0,d[O.key],n,r,o,a,s,l)}}catch(e){S=!0,_=e}finally{try{b||null==E.return||E.return()}finally{if(S)throw _}}}function O(t,n,o,i,u,c,p,d,f){var h=o();if(!S(t,n,h,u))if(t&&!n){var m={rule_set_params:Object(a.g)(c.distinguishMutationType,c.distinguishDrivers,c.distinguishGermlineMutations),label:t.label,sublabel:t.sublabel,track_label_color:t.labelColor||void 0,target_group:r.b,sortCmpFn:Object(s.b)(_(c),w(c)),description:t.oql,data_id_key:"uid",data:t.data,tooltipFn:Object(l.c)(c.caseLinkOutInTooltips,i,c.alterationTypesInQuery),track_info:t.info,$track_info_tooltip_elt:t.infoTooltip?e("<div>"+t.infoTooltip+"</div>"):void 0,removeCallback:function(){delete o()[t.key],t.removeCallback&&t.removeCallback()},expandCallback:t.expansionCallback||void 0,expandButtonTextGetter:function(){return"Expand"},expansion_of:f?h[f]:void 0,custom_track_options:t.customOptions},y=u.addTracks([m])[0];h[t.key]=y,void 0!==d.genetic&&u.shareRuleSet(d.genetic,y),d.genetic=y}else if(t&&n){var g=h[t.key],v=_(c),C=w(c);v===_(p)&&C===w(p)||u.setTrackSortComparator(g,Object(s.b)(v,C)),t.data!==n.data&&u.setTrackData(g,t.data,"uid"),function(e,t){return e.caseLinkOutInTooltips!==t.caseLinkOutInTooltips||e.alterationTypesInQuery!==t.alterationTypesInQuery}(c,p)&&u.setTrackTooltipFn(g,Object(l.c)(c.caseLinkOutInTooltips,i,c.alterationTypesInQuery)),t.info!==n.info&&u.setTrackInfo(g,t.info),t.infoTooltip!==n.infoTooltip&&u.setTrackInfoTooltip(g,t.infoTooltip?e("<div>"+t.infoTooltip+"</div>"):void 0),b(c,p)&&(void 0!==d.genetic?u.shareRuleSet(d.genetic,g):u.setRuleSet(g,Object(a.g)(c.distinguishMutationType,c.distinguishDrivers,c.distinguishGermlineMutations))),d.genetic=g,t.expansionTrackList&&t.expansionTrackList.length>0?u.disableTrackExpansion(g):t.expansionCallback&&u.enableTrackExpansion(g),E(t,n,o,i,u,c,p,d,O)}}function C(e,t,n,o,i){var u=n();if(!S(e,t,u,o))if(e&&!t){var c=Object(a.e)(e);c.legend_label=e.label,c.exclude_from_legend=!i.showClinicalTrackLegends,c.na_legend_label=e.na_legend_label;var p={rule_set_params:c,data:e.data,data_id_key:"uid",label:e.label,description:(e.label||"").trim()===(e.description||"").trim()?void 0:e.description,removable:!0,removeCallback:function(){delete n()[e.key]},onClickRemoveInTrackMenu:function(){i.onDeleteClinicalTrack&&i.onDeleteClinicalTrack(e.key)},sort_direction_changeable:!0,tooltipFn:Object(l.b)(e,i.caseLinkOutInTooltips),important_ids:e.altered_uids,sortCmpFn:Object(s.a)(e),init_sort_direction:0,target_group:r.a,onSortDirectionChange:i.onTrackSortDirectionChange,custom_track_options:e.custom_options,track_can_show_gaps:"string"===e.datatype};u[e.key]=o.addTracks([p])[0]}else if(e&&t){var d=u[e.key];e.data!==t.data&&o.setTrackData(d,e.data,"uid"),e.altered_uids!==t.altered_uids&&o.setTrackImportantIds(d,e.altered_uids),o.setTrackTooltipFn(d,Object(l.b)(e,i.caseLinkOutInTooltips)),t.custom_options!==e.custom_options&&o.setTrackCustomOptions(d,e.custom_options)}}function P(e,t,n,r,o,i){var u=n();if(S(e,t,u,r))E(void 0,t,n,function(){},r,o,{},i,x);else if(e&&!t){var c={rule_set_params:Object(a.f)(),data:e.data,data_id_key:"uid",has_column_spacing:!1,track_padding:0,label:e.label,html_label:Object(l.a)(e.label),target_group:e.trackGroupIndex,sort_direction_changeable:!0,sortCmpFn:s.c,init_sort_direction:0,description:"Gene set scores from ".concat(e.molecularProfileId),link_url:e.trackLinkUrl,tooltipFn:Object(l.d)(e.molecularAlterationType,!0),onSortDirectionChange:o.onTrackSortDirectionChange,expandCallback:e.expansionCallback,expandButtonTextGetter:function(e){return"".concat(e?"More":"Show","  genes")}},p=r.addTracks([c])[0];u[e.key]=p,void 0!==i.genesetHeatmap&&r.shareRuleSet(i.genesetHeatmap,p),i.genesetHeatmap=p,E(e,void 0,n,function(){},r,o,{},i,x)}else if(e&&t){var d=u[e.key];e.data!==t.data&&r.setTrackData(d,e.data,"uid"),r.setTrackTooltipFn(d,Object(l.d)(e.molecularAlterationType,!0)),E(e,t,n,function(){},r,o,{},i,x)}}function x(e,t,n,r,o,i,p,d,f){var h=n();if(!S(e,t,h,o))if(e&&!t){var m={rule_set_params:Object(a.h)(e),data:e.data,data_id_key:"uid",has_column_spacing:Object(c.a)(e.hasColumnSpacing,!1),track_padding:0,label:e.label,track_label_color:e.labelColor,track_label_circle_color:e.labelCircleColor,track_label_font_weight:e.labelFontWeight,track_label_left_padding:e.labelLeftPadding,target_group:e.trackGroupIndex,removable:!!e.onRemove||!!e.onClickRemoveInTrackMenu,movable:e.movable,na_legend_label:e.naLegendLabel,removeCallback:function(){delete n()[e.key],e.onRemove&&e.onRemove()},onClickRemoveInTrackMenu:function(){e.onClickRemoveInTrackMenu&&e.onClickRemoveInTrackMenu()},sort_direction_changeable:Object(c.a)(e.sortDirectionChangeable,!0),sortCmpFn:s.c,init_sort_direction:Object(c.a)(e.initSortDirection,0),link_url:e.trackLinkUrl,description:Object(c.a)(e.description,"".concat(e.label," data from ").concat(e.molecularProfileId)),tooltipFn:e.tooltip||Object(l.d)(e.molecularAlterationType,!0),track_info:e.info||"",onSortDirectionChange:i.onTrackSortDirectionChange,expansion_of:f?h[f]:void 0},y=o.addTracks([m])[0];if(h[e.key]=y,e.molecularAlterationType!==u.a.GENERIC_ASSAY){var g="heatmap";"METHYLATION"===e.molecularAlterationType&&(g="heatmap01"),void 0!==d[g]&&o.shareRuleSet(d[g],y),d[g]=y}else d.genericAssay[e.molecularProfileId]=y}else if(e&&t){var v=h[e.key];if(e.data!==t.data&&o.setTrackData(v,e.data,"uid"),e.info!==t.info&&void 0!==e.info&&o.setTrackInfo(v,e.info),e.movable!==t.movable&&void 0!==e.movable&&o.setTrackMovable(v,e.movable),e.molecularAlterationType===u.a.GENERIC_ASSAY&&void 0!==d.genericAssay[e.molecularProfileId]){var b=d.genericAssay[e.molecularProfileId];o.shareRuleSet(b,v)}o.setTrackTooltipFn(v,e.tooltip||Object(l.d)(e.molecularAlterationType,!0))}}}).call(this,n(11))},function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return c}),n.d(t,"c",function(){return d});var r=n(672),o=n.n(r);function i(e){for(var t={},n=0;n<e.length;n++)for(var r=[].concat(e[n]),o=0;o<r.length;o++)t[r[o]]=n;return t}function a(e,t){var n,r=i(["amp","homdel","gain","hetloss","diploid",void 0]),o=e||t?(!e&&t?n=i([["inframe_rec","missense_rec","promoter_rec","trunc_rec","other_rec"],["inframe","missense","promoter","trunc","other"],void 0]):e&&!t?n=i([["trunc","trunc_rec"],["inframe","inframe_rec"],["promoter","promoter_rec"],["missense","missense_rec"],["other","other_rec"],void 0,!0,!1]):e&&t&&(n=i(["trunc_rec","inframe_rec","promoter_rec","missense_rec","other_rec","trunc","inframe","promoter","missense","other",void 0,!0,!1])),function(e){return n[e]}):function(e){return{true:1,false:2}[!!e+""]},a=i(["high","low",void 0]),s=i([!0,!1,void 0]);function l(e){var t=[];return e.disp_fusion?t.push(0):t.push(1),t.push(r[e.disp_cna+""]),t.push(o(e.disp_mut)),t.push(s[e.disp_germ+""]),t.push(a[e.disp_mrna+""]),t.push(a[e.disp_prot+""]),t}return{preferred:function(e){return[+!!e.na].concat(l(e)).concat([e.sample?e.sample:e.patient])},mandatory:function(e){return l(e)},isVector:!0}}function s(e){return function(t,n){return t.na&&n.na?0:t.na&&!n.na?2:!t.na&&n.na?-2:t[e]<n[e]?-1:t[e]===n[e]?0:1}}function l(e,t){return e.na&&t.na?0:e.na&&!t.na?2:!e.na&&t.na?-2:o()(e.attr_val,t.attr_val)}function u(e){return function(t,n){var r=e(t,n);return 0===r?t.sample?o()(t.sample,n.sample):o()(t.patient,n.patient):r}}function c(e){var t,n;switch(e.datatype){case"number":t=s("attr_val");break;case"counts":n=e.countsCategoryLabels,t=function(e,t){if(e.na&&t.na)return 0;if(e.na&&!t.na)return 2;if(!e.na&&t.na)return-2;for(var r=0,o=0,i=0;i<n.length;i++)r+=e.attr_val[n[i]]||0,o+=t.attr_val[n[i]]||0;if(0===r&&0===o)return 0;if(0===r)return 1;if(0===o)return-1;var a=0,s=0;for(i=0;i<n.length;i++)e.attr_val[n[i]]>e.attr_val[n[a]]&&(a=i),t.attr_val[n[i]]>t.attr_val[n[s]]&&(s=i);if(a<s)return-1;if(a>s)return 1;var l,u=n[a],c=e.attr_val[u]/r,p=t.attr_val[u]/o;return(l=c-p)>0?1:l<0?-1:0};break;case"string":default:t=l}return{preferred:u(t),mandatory:t}}var p,d={preferred:u(p=s("profile_data")),mandatory:p}},function(e,t,n){"use strict";n.d(t,"a",function(){return w}),n.d(t,"b",function(){return E}),n.d(t,"d",function(){return O}),n.d(t,"c",function(){return x});var r=n(15),o=n(11),i=n.n(o),a=n(178),s=n(570),l=n(4),u=n.n(l),c=n(664),p=n(573),d=n(727);n(743);function f(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var m=n(690),y=n(673),g=n(753),v=n(754),b="oncoprint__tooltip",S="N/A";function _(e,t,n){var r=i()('<span class="nobreak"><a href="#" '.concat(t?"":'style="color:red;"',' oncontextmenu="return false;">').concat(e,"</a>").concat(n?" (".concat(n,")"):"","</span>"));return r.ready(function(){r.click(function(){a.a.getGenePanelUsingGET({genePanelId:e}).then(function(t){var n=t.genes.map(function(e){return e.hugoGeneSymbol}).sort(),r=open("","_blank","width=500,height=500");if(r){var o=r.document.createElement("div");r.document.body.appendChild(o),i()('<h3 style="text-align:center;">'.concat(e,"</h3><br>")).appendTo(o),i()("<span>".concat(n.join("<br>"),"</span>")).appendTo(o)}})})}),r}function w(e){return i()("<div>").text(e).html().replace(/_/g,"_&#8203;").replace(/\./g,".&#8203;")}function E(e,t){return function(n){var r="";if("counts"===e.datatype)for(var o=n[0],a=0;a<e.countsCategoryLabels.length;a++)r+='<span class="nobreak" style="color:'+e.countsCategoryFills[a]+';font-weight:bold;">'+e.countsCategoryLabels[a]+"</span>: "+o.attr_val_counts[e.countsCategoryLabels[a]]+"<br>";else{var s={},l=!0,u=!1,c=void 0;try{for(var p,d=n[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var f=p.value;if(f.attr_val_counts)for(var h=0,m=Object.keys(f.attr_val_counts);h<m.length;h++){var y=m[h];s[y]=s[y]||0,s[y]+=f.attr_val_counts[y]}}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}var g=Object.keys(s);if("number"===e.datatype){for(var v=0,S=0,_=0,w=g;_<w.length;_++){var E=w[_],O=s[E];v+=O*parseFloat(E),S+=O}var C=(v/S).toFixed(2);".00"===C.substring(C.length-3)&&(C=C.substring(0,C.length-3)),r+=e.label+': <span class="nobreak"><b>'+C+"".concat(S>1?" (average of ".concat(S," values)"):"","</b></span><br>")}else if(g.length>1){r+=e.label+":<br>";for(var x=0;x<g.length;x++){var T=g[x];r+='<span class="nobreak"><b>'+T+"</b>: "+s[T]+" sample".concat(1===s[T]?"":"s","</span><br>")}}else if(1===g.length){var k=g[0];r+=e.label+': <span class="nobreak"><b>'+k+"</b>".concat(n.length>1?" (".concat(s[g[0]]," samples)"):"","</span><br>")}}var A=0,I=!0,D=!1,M=void 0;try{for(var j,N=n[Symbol.iterator]();!(I=(j=N.next()).done);I=!0){j.value.na&&(A+=1)}}catch(e){D=!0,M=e}finally{try{I||null==N.return||N.return()}finally{if(D)throw M}}return A>0&&e.na_tooltip_value&&(r+="".concat(e.label,": <b>").concat(e.na_tooltip_value,"</b>").concat(n.length>1?" (".concat(A," samples)"):"","<br/>")),i()("<div>").addClass(b).append(P(n,!!t)).append("<br/>").append(r)}}function O(e,t){return function(n){var r="",o=S,a="";switch(e){case s.a.MRNA_EXPRESSION:r="MRNA: ";break;case s.a.PROTEIN_LEVEL:r="PROT: ";break;case s.a.METHYLATION:r="METHYLATION: ";break;case s.a.GENERIC_ASSAY:r="GENERIC ASSAY: "}var l=0,c=[],p=0,d=0,f=!0,h=!1,m=void 0;try{for(var y,g=n[Symbol.iterator]();!(f=(y=g.next()).done);f=!0){var v=y.value;null!==v.profile_data&&void 0!==v.profile_data&&(e===s.a.GENERIC_ASSAY&&v.category?(c.push(v.category),d+=1):(l+=v.profile_data,p+=1))}}catch(e){h=!0,m=e}finally{try{f||null==g.return||g.return()}finally{if(h)throw m}}if(p>0){var _=(l/p).toFixed(2);o=1===p?_:"".concat(_," (average of ").concat(p," values)")}d>0&&(a=0===p&&1===d?c[0]:p>0&&1===d?"".concat(c[0]):"".concat(u.a.uniq(c).join(", ")," (").concat(d," data points)"));var w=r;return o===S&&0!==d||(w+="<b>"+o+"</b>"),o!==S&&d>0&&(w+=" and "),d>0&&(w+="<b>"+a+"</b>"),w+="<br />",i()("<div>").addClass(b).append(P(n,!!t)).append("<br/>").append(w)}}function C(e,t,n,r){var o=[],i={},a=void 0,s={},l=void 0,p=[],d=void 0;if(e&&(o=u.a.uniq(e.map(function(e){return e.genePanelId}).filter(function(e){return!!e})),a=u.a.uniq(e.map(function(e){return e.molecularProfileId})),r&&(d=u.a.keyBy(a,function(e){return r[e].molecularAlterationType})),s=u.a.keyBy(a),i=u.a.keyBy(o)),t){if(l=u.a.uniq(t.map(function(e){return e.molecularProfileId})).filter(function(e){return!s[e]}),d&&n&&r){var f=u.a.keyBy(l,function(e){return r[e].molecularAlterationType});l=l.concat(n.filter(function(e){return!d[e]&&!f[e]}).map(function(e){return c.a[e]}))}p=u.a.uniq(t.map(function(e){return e.genePanelId})).filter(function(e){return!!e&&!i[e]})}return{dispProfiledGenePanelIds:o,dispNotProfiledGenePanelIds:p,dispProfiledIn:a,dispNotProfiledIn:l,dispAllProfiled:!(!(a&&a.length&&l)||l.length),dispNotProfiled:!(!(l&&l.length&&a)||a.length)}}function P(e,t){return e.length?e[0].sample?e.length>1?t?'<a class="nobreak" href='.concat(Object(r.y)(e[0].study_id,e[0].sample,e.map(function(e){return{studyId:e.study_id,patientId:e.patient}})),' target="_blank">View these ').concat(e.length," samples<a/>"):'<span class="nobreak">'.concat(e.length," samples</span>"):t?(n=e[0].study_id,o=e[0].sample,'<a class="nobreak" href="'.concat(Object(r.y)(n,o),'" target="_blank">').concat(o,"</a>")):'<span class="nobreak">'.concat(e[0].sample,"</span>"):e[0].patient?e.length>1?t?'<a class="nobreak" href='.concat(Object(r.w)(e[0].study_id,e[0].patient,e.map(function(e){return{studyId:e.study_id,patientId:e.patient}})),' target="_blank">View these ').concat(e.length," patients<a/>"):'<span class="nobreak">'.concat(e.length," patients</span>"):t?function(e,t){return'<a class="nobreak" href="'.concat(Object(r.w)(e,t),'" target="_blank">').concat(t,"</a>")}(e[0].study_id,e[0].patient):'<span class="nobreak">'.concat(e[0].patient,"</span>"):"":"";var n,o}function x(e,t,n){function r(e,t){var n=new d.a,r=!0,o=!1,a=void 0;try{for(var s,l=e[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;n.increment(u.hugo_gene_symbol,u.amino_acid_change,u.cancer_hotspots_hotspot,u.oncokb_oncogenic,u.driver_filter,u.driver_filter_annotation,u.driver_tiers_filter,u.driver_tiers_filter_annotation,u.germline)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n.entries().map(function(e){var n=h(e.key,9),r=n[0],o=n[1],a=n[2],s=n[3],l=n[4],u=n[5],c=n[6],p=n[7],d=n[8],f=e.value,b=i()("<span>").addClass("nobreak");return b.append('<b class="nobreak">'.concat(r," ").concat(o,"</b>")),a&&b.append('<img src="'.concat(m,'" title="Hotspot" style="height:11px; width:11px; margin-left:3px"/>')),s&&b.append('<img src="'.concat(y,'" title="').concat(s,'" style="height:11px; width:11px;margin-left:3px"/>')),l&&"Putative_Driver"===l&&b.append('<img src="'.concat(g,'" title="').concat(l,": ").concat(u,'" alt="driver filter" style="height:11px; width:11px;margin-left:3px"/>')),c&&b.append('<img src="'.concat(v,'" title="').concat(c,": ").concat(p,'" alt="driver tiers filter" style="height:11px; width:11px;margin-left:3px"/>')),d&&b.append(function(){var e=i()('<small style="color: #ff0000">');return e.append("&nbsp;Germline"),e}()),t&&b.append("&nbsp;(".concat(f,")")),b})}function o(e,t){var n=new d.a,r=!0,o=!1,a=void 0;try{for(var s,l=e[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;n.increment(u.hugo_gene_symbol,u.direction)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n.entries().map(function(e){var n=h(e.key,2),r=n[0],o=n[1],a=e.value,s=i()("<span>").addClass("nobreak");return s.append('<b class="nobreak">'.concat(r," ").concat(o,"</b>")),t&&s.append("&nbsp;(".concat(a,")")),s})}var a={"-2":"HOMODELETED","-1":"HETLOSS",1:"GAIN",2:"AMPLIFIED"};return function(s){var l=i()("<div>").addClass(b);l.append(P(s,e)).append("<br/>");var u=[],c=[],m=[],g=[],v=[],S=!0,w=!1,E=void 0;try{for(var O,x=s[Symbol.iterator]();!(S=(O=x.next()).done);S=!0)for(var T=O.value,k=0;k<T.data.length;k++){var A=T.data[k],I=A.molecularProfileAlterationType,D=A.hugoGeneSymbol;switch(I){case"MUTATION_EXTENDED":var M={};M.hugo_gene_symbol=D,M.amino_acid_change=A.proteinChange,M.driver_filter=A.driverFilter,M.driver_filter_annotation=A.driverFilterAnnotation,M.driver_tiers_filter=A.driverTiersFilter,M.driver_tiers_filter_annotation=A.driverTiersFilterAnnotation,A.isHotspot&&(M.cancer_hotspots_hotspot=!0),Object(p.n)(A)||(M.germline=!0);var j=A.oncoKbOncogenic;j&&(M.oncokb_oncogenic=j),("fusion"===A.alterationSubType?v:u).push(M);break;case"COPY_NUMBER_ALTERATION":if(a.hasOwnProperty(A.value)){var N={cna:a[A.value],hugo_gene_symbol:D},R=A.oncoKbOncogenic;R&&(N.oncokb_oncogenic=R),c.push(N)}break;case"MRNA_EXPRESSION":case"PROTEIN_LEVEL":var L=A.alterationSubType,G="MRNA_EXPRESSION"===I?m:g;"high"===L?G.push({hugo_gene_symbol:D,direction:"HIGH"}):"low"===L&&G.push({hugo_gene_symbol:D,direction:"LOW"})}}}catch(e){w=!0,E=e}finally{try{S||null==x.return||x.return()}finally{if(w)throw E}}if(v.length>0){l.append("Fusion: "),v=r(v,s.length>1);for(var F=0;F<v.length;F++)F>0&&l.append(","),l.append(v[F]);l.append("<br>")}if(u.length>0){l.append("Mutation: "),u=r(u,s.length>1);for(F=0;F<u.length;F++)F>0&&l.append(", "),l.append(u[F]);l.append("<br>")}if(c.length>0){l.append("Copy Number Alteration: "),c=function(e,t){var n=new d.a,r=!0,o=!1,a=void 0;try{for(var s,l=e[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;n.increment(u.hugo_gene_symbol,u.cna,u.oncokb_oncogenic)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n.entries().map(function(e){var n=h(e.key,3),r=n[0],o=n[1],a=n[2],s=e.value,l=i()("<span>").addClass("nobreak");return l.append('<b class="nobreak">'.concat(r," ").concat(o,"</b>")),a&&l.append("<img src=".concat(y,' title="').concat(a,'" style="height:11px; width:11px;margin-left:3px"/>')),t&&l.append("&nbsp;(".concat(s,")")),l})}(c,s.length>1);for(F=0;F<c.length;F++)F>0&&l.append(", "),l.append(c[F]);l.append("<br>")}if(m.length>0){l.append("MRNA: "),m=o(m,s.length>1);for(F=0;F<m.length;F++)F>0&&l.append(", "),l.append(m[F]);l.append("<br>")}if(g.length>0){l.append("PROT: "),g=o(g,s.length>1);for(F=0;F<g.length;F++)F>0&&l.append(", "),l.append(g[F]);l.append("<br>")}var B=t&&t(),V=new d.a,z=new d.a,q=new d.a,U=new d.a,H=0,W=0,K=!0,$=!1,Q=void 0;try{for(var Y,X=s[Symbol.iterator]();!(K=(Y=X.next()).done);K=!0){var Z=Y.value,J=C(Z.profiled_in,Z.not_profiled_in,n,B),ee=!0,te=!1,ne=void 0;try{for(var re,oe=J.dispProfiledGenePanelIds[Symbol.iterator]();!(ee=(re=oe.next()).done);ee=!0){var ie=re.value;V.increment(ie)}}catch(e){te=!0,ne=e}finally{try{ee||null==oe.return||oe.return()}finally{if(te)throw ne}}var ae=!0,se=!1,le=void 0;try{for(var ue,ce=J.dispNotProfiledGenePanelIds[Symbol.iterator]();!(ae=(ue=ce.next()).done);ae=!0){var pe=ue.value;z.increment(pe)}}catch(e){se=!0,le=e}finally{try{ae||null==ce.return||ce.return()}finally{if(se)throw le}}if(J.dispProfiledIn){var de=!0,fe=!1,he=void 0;try{for(var me,ye=J.dispProfiledIn[Symbol.iterator]();!(de=(me=ye.next()).done);de=!0){var ge=me.value;q.increment(ge)}}catch(e){fe=!0,he=e}finally{try{de||null==ye.return||ye.return()}finally{if(fe)throw he}}}if(J.dispNotProfiledIn){var ve=!0,be=!1,Se=void 0;try{for(var _e,we=J.dispNotProfiledIn[Symbol.iterator]();!(ve=(_e=we.next()).done);ve=!0){var Ee=_e.value;U.increment(Ee)}}catch(e){be=!0,Se=e}finally{try{ve||null==we.return||we.return()}finally{if(be)throw Se}}}J.dispAllProfiled?H+=1:J.dispNotProfiled&&(W+=1)}}catch(e){$=!0,Q=e}finally{try{K||null==X.return||X.return()}finally{if($)throw Q}}var Oe=V.entries(),Ce=z.entries();if(Oe.length||Ce.length){l.append("Gene Panels: ");var Pe=!1,xe=!0,Te=!1,ke=void 0;try{for(var Ae,Ie=Oe[Symbol.iterator]();!(xe=(Ae=Ie.next()).done);xe=!0){var De=Ae.value;Pe&&l.append(",&nbsp;"),Pe=!0,l.append(_(De.key[0],!0,s.length>1?De.value:void 0))}}catch(e){Te=!0,ke=e}finally{try{xe||null==Ie.return||Ie.return()}finally{if(Te)throw ke}}var Me=!0,je=!1,Ne=void 0;try{for(var Re,Le=Ce[Symbol.iterator]();!(Me=(Re=Le.next()).done);Me=!0){var Ge=Re.value;V.has.apply(V,f(Ge.key))||(Pe&&l.append(",&nbsp;"),Pe=!0,l.append(_(Ge.key[0],!1,s.length>1?Ge.value:void 0)))}}catch(e){je=!0,Ne=e}finally{try{Me||null==Le.return||Le.return()}finally{if(je)throw Ne}}l.append("<br>")}var Fe=q.entries(),Be=U.entries();return H===s.length?(l.append("Profiled in all selected molecular profiles."+(s.length>1?" (".concat(H,")"):"")),l.append("<br>")):W===s.length?(l.append("Not profiled in selected molecular profiles."+(s.length>1?" (".concat(W,")"):"")),l.append("<br>")):(Fe.length&&(l.append("Profiled in: "+Fe.map(function(e){var t=e.key[0],n=t;return B&&t in B&&(n=B[t].name),'<span class="nobreak">'.concat(n).concat(s.length>1?" (".concat(e.value,")"):"","</span>")}).join(", ")),l.append("<br>")),Be.length&&(l.append("<span class=\"nobreak\" style='color:red; font-weight:bold'>Not profiled in: "+Be.map(function(e){var t=e.key[0],n=t;return B&&t in B&&(n=B[t].name),'<span class="nobreak">'.concat(n).concat(s.length>1?" (".concat(e.value,")"):"","</span>")}).join(", ")+"</span>"),l.append("<br>")),H>0&&(l.append("Profiled in all selected molecular profiles."+(s.length>1?" (".concat(H,")"):"")),l.append("<br>")),W>0&&(l.append("Not profiled in selected molecular profiles."+(s.length>1?" (".concat(W,")"):"")),l.append("<br>"))),l}}},,function(e,t,n){},function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__22mhB",framedImage:"styles-module__framedImage__-4l6t",Checkboxes:"styles-module__Checkboxes__2oyZv",Tendency:"styles-module__Tendency__2Y46X",Significant:"styles-module__Significant__34YnP"}},,,,,,,function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=g(n(9)),i=g(n(896)),a=g(n(761)),s=g(n(898)),l=g(n(899)),u=g(n(811)),c=g(n(1)),p=g(n(0)),d=g(n(21)),f=g(n(812)),h=g(n(813)),m=g(n(814)),y=g(n(815));function g(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));return o.onWindowScroll=function(){o.onUpdate()},o.onDocumentClick=function(){(0,u.default)(function(){return o.onUpdate()})},o.onUpdate=function(){if(o._isMounted){var e=o.props,t=e.offsetTop,n=e.viewportOffsetTop,r=(0,l.default)((0,y.default)(o))+(n||0);r<=t?o.updateState("top",null,null):r>o.getPositionTopMax()?"bottom"===o.state.affixed?o.updateStateAtBottom():o.setState({affixed:"bottom",position:"absolute",top:null},function(){o._isMounted&&o.updateStateAtBottom()}):o.updateState("affix","fixed",n)}},o.getPositionTopMax=function(){return(0,h.default)((0,m.default)(o))-(0,i.default)(d.default.findDOMNode(o))-o.props.offsetBottom},o.updateState=function(e,t,n){if(e!==o.state.affixed||t!==o.state.position||n!==o.state.top){var r="affix"===e?"":e.charAt(0).toUpperCase()+e.substr(1);o.props["onAffix"+r]&&o.props["onAffix"+r](),o.setState({affixed:e,position:t,top:n},function(){o.props["onAffixed"+r]&&o.props["onAffixed"+r]()})}},o.updateStateAtBottom=function(){var e=o.getPositionTopMax(),t=(0,s.default)(d.default.findDOMNode(o)),n=(0,a.default)(t).top;o.updateState("bottom","absolute",e-n)},o.state={affixed:"top",position:null,top:null},o._needPositionUpdate=!1,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){var e=this;this._isMounted=!0,this._windowScrollListener=(0,f.default)((0,y.default)(this),"scroll",function(){return e.onWindowScroll()}),this._documentClickListener=(0,f.default)((0,m.default)(this),"click",function(){return e.onDocumentClick()}),this.onUpdate()},t.prototype.componentWillReceiveProps=function(){this._needPositionUpdate=!0},t.prototype.componentDidUpdate=function(){this._needPositionUpdate&&(this._needPositionUpdate=!1,this.onUpdate())},t.prototype.componentWillUnmount=function(){this._isMounted=!1,this._windowScrollListener&&this._windowScrollListener.remove(),this._documentClickListener&&this._documentClickListener.remove()},t.prototype.render=function(){var e=p.default.Children.only(this.props.children),t=e.props,n=t.className,i=t.style,a=this.state,s=a.affixed,l={position:a.position,top:a.top},u=void 0,c=void 0;return"top"===s?(u=this.props.topClassName,c=this.props.topStyle):"bottom"===s?(u=this.props.bottomClassName,c=this.props.bottomStyle):(u=this.props.affixClassName,c=this.props.affixStyle),p.default.cloneElement(e,{className:(0,o.default)(u,n),style:r({},l,c,i)})},t}(p.default.Component);v.propTypes={offsetTop:c.default.number,viewportOffsetTop:c.default.number,offsetBottom:c.default.number,topClassName:c.default.string,topStyle:c.default.object,affixClassName:c.default.string,affixStyle:c.default.object,bottomClassName:c.default.string,bottomStyle:c.default.object,onAffix:c.default.func,onAffixed:c.default.func,onAffixTop:c.default.func,onAffixedTop:c.default.func,onAffixBottom:c.default.func,onAffixedBottom:c.default.func},v.defaultProps={offsetTop:0,viewportOffsetTop:null,offsetBottom:0},t.default=v,e.exports=t.default},function(e,t,n){"use strict";var r=n(760);t.__esModule=!0,t.default=void 0;var o,i=r(n(900)),a="clearTimeout",s=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-u)),r=setTimeout(e,n);return u=t,r},l=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};i.default&&["","webkit","moz","o","ms"].some(function(e){var t=l(e,"request");if(t in window)return a=l(e,"cancel"),s=function(e){return window[t](e)}});var u=(new Date).getTime();(o=function(e){return s(e)}).cancel=function(e){window[a]&&"function"==typeof window[a]&&window[a](e)};var c=o;t.default=c,e.exports=t.default},function(e,t,n){e.exports=n(16)(469)},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return Math.max(e.documentElement.offsetHeight||0,e.height||0,e.body.scrollHeight||0,e.body.offsetHeight||0)},e.exports=t.default},function(e,t,n){e.exports=n(16)(169)},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return(0,o.default)(r.default.findDOMNode(e))};var r=i(n(21)),o=i(n(901));function i(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},function(e,t,n){"use strict";var r=n(0),o=n(2),i=n(7),a=n(817),s=n.n(a),l=n(4),u=n(608),c=n(574),p=n(101),d=n(762),f=n(8),h=n(9),m=n.n(h),y=n(3),g=n(597);function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var C=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":O(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},P=function(e){function t(){return b(this,t),S(this,_(t).apply(this,arguments))}return w(t,d["a"]),t}(),x=function(e){function t(){var e;return b(this,t),(e=S(this,_(t).apply(this,arguments)))._columns=[{name:e.props.firstColumnHeaderName,render:function(t){return r.createElement(i.Observer,null,function(){return r.createElement("div",{className:m()(s.a.option,"add-chart-option"),"data-test":"add-chart-option-".concat(t.label.toLowerCase().replace(/\s/g,"-"))},r.createElement(u.a,{checked:t.selected,disabled:t.disabled,labelProps:{className:m()(s.a.label,t.disabled?s.a.labelDisabled:"")},inputProps:{className:s.a.input},onChange:function(){return e.onOptionChange(t)}},r.createElement(y.f,{text:t.label})))})},filter:function(e,t,n){return e.label.toUpperCase().includes(n)},sortBy:function(e){return e.label},width:320,defaultSortDirection:"asc"},{name:"Freq",tooltip:r.createElement("span",null,Object(g.a)(e.props.frequencyHeaderTooltip,"% samples with data")),render:function(t){return r.createElement("span",{style:{display:"flex",flexDirection:"row-reverse"},className:m()(t.disabled?s.a.labelDisabled:"")},e.props.freqPromise.isComplete?Object(c.O)(t.freq):"")},sortBy:function(e){return e.freq},headerRender:function(){return r.createElement("span",{style:{display:"flex",flexDirection:"row-reverse",flexGrow:1}},"Freq")},defaultSortDirection:"desc",width:60}],e}var n,o,a;return w(t,r["Component"]),n=t,(o=[{key:"getCurrentSelectedRows",value:function(){return this.options.filter(function(e){return e.selected})}},{key:"getCurrentSelectedRowKeys",value:function(){return this.getCurrentSelectedRows().map(function(e){return e.key})}},{key:"addAll",value:function(e){this.props.onAddAll(l.filter(e,function(e){return!e.disabled}).map(function(e){return e.key}))}},{key:"removeAll",value:function(e){this.props.onClearAll(e.map(function(e){return e.key}))}},{key:"onOptionChange",value:function(e){this.props.onToggleOption(e.key)}},{key:"render",value:function(){return r.createElement("div",{style:{display:"flex",flexDirection:"column"},"data-test":"add-by-type"},this.props.freqPromise.isComplete&&r.createElement(P,{width:380,height:this.tableHeight,columns:this._columns,data:this.options,showControlsAtTop:!0,addAll:this.addAll,removeAll:this.removeAll,showSelectableNumber:!0,showAddRemoveAllButtons:!0,autoFocusSearchAfterRendering:!0,removeAllDisabled:!l.some(this.options,function(e){return e.selected}),hideControls:this.props.hideControls}),this.props.freqPromise.isPending&&r.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:100}},r.createElement(p.a,{isLoading:!0}),r.createElement("br",null),"Calculating data availability..."))}},{key:"options",get:function(){var e=this;if(this.props.freqPromise.isComplete){var t=l.reduce(this.props.options,function(t,n){var r=0===e.props.freqPromise.result[n.key];return t.push({label:n.label,key:n.key,disabled:r,selected:n.selected,freq:r?0:e.props.freqPromise.result[n.key]}),t},[]);return this.props.optionsGivenInSortedOrder?t:t.sort(function(e,t){return t.freq-e.freq||e.label.localeCompare(t.label)})}var n=this.props.options.map(function(e){return Object.assign({freq:100},e)});return this.props.optionsGivenInSortedOrder?n:n.sort(function(e,t){return e.label.localeCompare(t.label)})}},{key:"tableHeight",get:function(){return this.options.length>15?375:25*(this.options.length+1)}}])&&v(n.prototype,o),a&&v(n,a),t}();x.defaultProps={firstColumnHeaderName:"Name",hideControls:!1},C([o.computed],x.prototype,"options",null),C([o.computed],x.prototype,"tableHeight",null),C([f.default],x.prototype,"getCurrentSelectedRows",null),C([f.default],x.prototype,"getCurrentSelectedRowKeys",null),C([f.default,o.action],x.prototype,"addAll",null),C([f.default,o.action],x.prototype,"removeAll",null),C([f.default,o.action],x.prototype,"onOptionChange",null),x=C([i.observer],x),t.a=x},function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__1Knza",framedImage:"styles-module__framedImage__p1p-k",main:"styles-module__main__2V5AI",operations:"styles-module__operations__2tHBt",options:"styles-module__options__2V0tE",option:"styles-module__option__dhLVt",footer:"styles-module__footer__8u68Z",input:"styles-module__input__2Zk8R",label:"styles-module__label__YKqSs",labelDisabled:"styles-module__labelDisabled__3jDaR"}},function(e,t,n){e.exports=n(16)(452)},function(e,t,n){e.exports=n(16)(835)},function(e,t,n){e.exports=n(16)(358)},function(e,t,n){e.exports=n(16)(824)},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0ZWQgYnkgSWNvTW9vbi5pbyAtLT4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIxNCIgaGVpZ2h0PSIxNCI+CiAgPCEtLU5vIGxldmVsIGljb25zLS0+CiAgICAgIDxnICB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3LCA3KSI+CiAgICAgICAgPGNpcmNsZSByPSI2IiBmaWxsPSJub25lIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZT0iIzAwN0ZGRiI+PC9jaXJjbGU+CiAgICAgICAgPGNpcmNsZSByPSIzIiBmaWxsPSJub25lIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZT0iIzAwN0ZGRiI+PC9jaXJjbGU+CiAgICAgICAgPGNpcmNsZSByPSIxLjUiIGZpbGw9IiMwMDdGRkYiIHN0cm9rZT0ibm9uZSI+PC9jaXJjbGU+CiAgICAgIDwvZz4KPC9zdmc+"},function(e,t,n){},function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__quCC8",framedImage:"styles-module__framedImage__2pTmh",scrollbar:"styles-module__scrollbar__-BNTg",handle:"styles-module__handle__2PODi"}},function(e,t,n){"use strict";n.d(t,"b",function(){return u}),n.d(t,"a",function(){return l}),n.d(t,"d",function(){return d}),n.d(t,"c",function(){return f});var r=n(4),o=n.n(r),i=n(583),a=n(592);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l,u="N/A",c=/^((?:[^\(\)])+)(?:\(([^\(\)]+)\))?$/,p=/^(?:[^\/]+\/)+[^\/]+$/;function d(e){var t=e.trim().split("\n").map(function(e){return e.trim().split(/\s+/)});if(0===t.length)return{status:"complete",result:{headers:[],data:[]},error:void 0};try{var n=function(e){e.shift();var t="Clinical data input error in line 1 (header): ",n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value,d=u.match(c);if(!d)throw new Error("".concat(t,"misformatted attribute name ").concat(u));var f=d[2]||l.STRING,h=void 0;if(f!==l.NUMBER&&f!==l.LOG_NUMBER&&f!==l.STRING){if(!p.test(f))throw new Error("".concat(t,"invalid track data type ").concat(f));h=f.split("/"),f=l.COUNTS}n.push({clinicalAttributeName:d[1],datatype:f,countsCategories:h})}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(t.shift()),r=t.map(function(e,t){var r="Clinical data input error on line ".concat(t+2,": \n").concat(e.join("\t"),"\n\n");if(e.length===n.length+1)return{sampleId:e[0],orderedValues:e.slice(1)};throw new Error("".concat(r,"data lines must have ").concat(n.length+1," columns, the same number as in the header."))});return{status:"complete",result:{headers:n,data:r.filter(function(e){return!!e})},error:void 0}}catch(e){return{status:"error",result:void 0,error:e.message}}}function f(e,t,n){var r=function(e,t){var n={},r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var p=a.value;n[p.clinicalAttributeName]=[]}}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return t.forEach(function(t,r){for(var o="Clinical data input error on line ".concat(r+2,": \n\n"),i=0;i<e.length;i++){var a=t.orderedValues[i];if(a===u)n[e[i].clinicalAttributeName].push({sample:t.sampleId,attr_id:e[i].clinicalAttributeName,attr_val_counts:{},attr_val:"",uid:t.sampleId,na:!0});else{var c=void 0,p=void 0;!function(){switch(e[i].datatype){case l.STRING:c=s({},a,1),p=a;break;case l.NUMBER:case l.LOG_NUMBER:var t=parseFloat(a);if(isNaN(t))throw new Error("".concat(o," input ").concat(a," is not valid for numerical track ").concat(e[i].clinicalAttributeName));c=s({},t,1),p=t;break;case l.COUNTS:var n=a.split("/").map(parseFloat);if(n.length!==e[i].countsCategories.length)throw new Error("".concat(o," input ").concat(a," is not valid - must have ").concat(e[i].countsCategories.length," values to match with header, but only has ").concat(n.length));c=e[i].countsCategories.reduce(function(e,t,r){return e[t]=n[r],e},{}),p=c}}(),n[e[i].clinicalAttributeName].push({sample:t.sampleId,attr_id:e[i].clinicalAttributeName,attr_val_counts:c,attr_val:p,uid:t.sampleId,na:a===u})}}}),n}(e,t),c=o.a.keyBy(n||[]);r=o.a.mapValues(r,function(e){return e.filter(function(e){return!(e.sample in c)})});Object(i.j)();return e.map(function(e){var t,n,o,i,s=r[e.clinicalAttributeName];switch(e.datatype){case l.STRING:t="string";break;case l.NUMBER:case l.LOG_NUMBER:t="number",n=function(e){var t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;isNaN(l.attr_val)||(t=Math.min(t,l.attr_val),n=Math.max(n,l.attr_val))}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return[t,n]}(s);break;case l.COUNTS:t="counts","mutation_spectrum"===e.clinicalAttributeName.toLowerCase()&&e.countsCategories.length===a.b.length&&(o=a.b)}return{key:(i=e.clinicalAttributeName,"clinicalTrack_".concat(i)),attributeId:e.clinicalAttributeName,label:e.clinicalAttributeName,data:s,datatype:t,description:"",numberRange:n,numberLogScale:e.datatype===l.LOG_NUMBER||void 0,countsCategoryLabels:e.countsCategories,countsCategoryFills:o}})}!function(e){e.NUMBER="number",e.LOG_NUMBER="lognumber",e.STRING="string",e.COUNTS="counts"}(l||(l={}))},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Array=0]="Array",e[e.ObjectWithNonNumericKeys=1]="ObjectWithNonNumericKeys",e[e.Object=2]="Object",e[e.Primitive=3]="Primitive"}(r=t.JSONObjectType||(t.JSONObjectType={}));var o=function(){function e(){}return e.getObjectType=function(e){return null!==e&&"object"==typeof e?Array.isArray(e)?r.Array:Object.keys(e).length?r.ObjectWithNonNumericKeys:r.Object:r.Primitive},e.checkLabelTypes=function(e){return"number"==typeof e.reduce(function(e,t){return e+(isNaN(Number(t))?t:Number(t))},0)?"number":"string"},e.getUniqueObjectKeys=function(e){var t=[],n=r.Object;return e.forEach(function(e){t=t.concat(Object.keys(e)).filter(function(e,t,n){return n.indexOf(e)===t})}),{labels:t,type:n}},e}();t.default=o},function(e,t,n){e.exports=n(16)(77)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function o(e){return"number"==typeof e?e:e.toString()}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"receiveProps",value:function(e){this.props=e}},{key:"getReactKey",value:function(e){var t=this.props.itemReactKeyPropName;if(t){var n=e[t];if(null!=n)return n}return o(this.getRawValue(e))}},{key:"getSortKey",value:function(e){var t=this.props.itemSortKeyPropName;if(t){var n=e[t];if(null!=n)return n}return o(this.getRawValue(e))}},{key:"getInputValue",value:function(e){return this.getRawValue(e).toString()}},{key:"getRawValue",value:function(e){var t=this.props.itemValuePropName;if(t){var n=e[t];if(null!=n)return n}return e}},{key:"getTextRepresentations",value:function(e){return[this.foldValue(this.getInputValue(e))]}},{key:"foldValue",value:function(e){return e.toLowerCase()}},{key:"newFromValue",value:function(e){return e}},{key:"itemIncludedByInput",value:function(e,t){var n=!0,r=!1,o=void 0;try{for(var i,a=this.getTextRepresentations(e)[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){if(i.value.indexOf(t)>=0)return!0}}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return!1}},{key:"itemMatchesInput",value:function(e,t){var n=!0,r=!1,o=void 0;try{for(var i,a=this.getTextRepresentations(e)[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){if(i.value===t)return!0}}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return!1}},{key:"sortItems",value:function(e,t){var n=this;return e.sort(function(e,r){return n.compareItemsWithValue(e,r,t)}),e}},{key:"compareItemsWithValue",value:function(e,t,n){var r=this.itemMatchesInput(e,n);if(r!=this.itemMatchesInput(t,n))return r?-1:1;var o=this.itemInclusionRankForInput(e,n),i=this.itemInclusionRankForInput(t,n);return o!=i?o-i:this.compareItems(e,t)}},{key:"itemInclusionRankForInput",value:function(e,t){var n=!1,r=!0,o=!1,i=void 0;try{for(var a,s=this.getTextRepresentations(e)[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value.indexOf(t);if(0===l)return 0;l>0&&(n=!0)}}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n?1:2}},{key:"compareItems",value:function(e,t){var n=this.getSortKey(e),r=this.getSortKey(t);return n<r?-1:n==r?0:1}},{key:"renderItem",value:function(e){return this.getInputValue(e)}},{key:"renderSuggested",value:function(e){return this.renderItem(e)}},{key:"renderSelected",value:function(e){return this.renderItem(e)}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(729),s=(r=a)&&r.__esModule?r:{default:r};function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"key";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.itemKeyPropName=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["default"]),i(t,[{key:"_getKeyValueItem",value:function(e,t){var n,r=this.itemKeyPropName,i=this.props.itemValuePropName,a=void 0===i?"value":i;return"object"==typeof t&&a in t?t[r]===e?t:o(l({},r,e),t):(l(n={},r,e),l(n,a,t),n)}}]),t}();t.default=u},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),o=n(7),i=n(2),a=n(101),s=Object(o.observer)(function(e){return e.store.cancerTypes.isPending||e.store.cancerStudies.isPending||e.store.profiledSamplesCount.isPending?r.createElement(a.a,{isLoading:!0,size:"small",center:!1}):r.createElement(o.Observer,null,function(){var t=Object(i.expr)(function(){return e.store.selectableSelectedStudyIds.length});return r.createElement(r.Fragment,null,r.createElement("a",{onClick:function(){t&&(e.store.showSelectedStudiesOnly=!e.store.showSelectedStudiesOnly)}},r.createElement("b",null,t)," ",1===t?"study":"studies"," ","selected (",r.createElement("b",null,e.store.profiledSamplesCount.result.all)," ","samples)"),e.store.selectableSelectedStudies.length>0&&r.createElement("a",{"data-test":"globalDeselectAllStudiesButton",style:{marginLeft:10},onClick:function(){return e.store.studyListLogic.mainView.clearAllSelection()}},"Deselect all"))})})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringable=function(e){return null!=e&&typeof("function"===e.toString)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}};var a,s=n(0),l=(a=s)&&a.__esModule?a:{default:a},u=n(767),c=n(961),p=n(696),d=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l["default"].Component),o(t,[{key:"handleClickTh",value:function(e){this.props.onSort(e.key)}},{key:"handleKeyDownTh",value:function(e,t){13===t.keyCode&&this.props.onSort(e.key)}},{key:"render",value:function(){for(var e=[],t=0;t<this.props.columns.length;t++){var n=this.props.columns[t],o="reactable-th-"+n.key.replace(/\s+/g,"-").toLowerCase(),i="",a=null;this.props.sortableColumns[n.key]&&(i+="reactable-header-sortable ",a="button"),this.props.sort.column===n.key&&(i+="reactable-header-sort",1===this.props.sort.direction?i+="-asc":i+="-desc"),i.length>0&&(o+=" "+i),"object"==typeof n.props&&"string"==typeof n.props.className&&(o+=" "+n.props.className),e.push(l.default.createElement(u.Th,r({},n.props,{className:o,key:t,onClick:this.handleClickTh.bind(this,n),onKeyDown:this.handleKeyDownTh.bind(this,n),role:a,tabIndex:"0"}),n.label))}var s=(0,p.filterPropsFrom)(this.props);return l.default.createElement("thead",s,!0===this.props.filtering?l.default.createElement(c.Filterer,{colSpan:this.props.columns.length,onFilter:this.props.onFilter,placeholder:this.props.filterPlaceholder,value:this.props.currentFilter,className:this.props.filterClassName}):null,l.default.createElement("tr",{className:"reactable-column-header"},e))}}],[{key:"getColumns",value:function(e){var t=[];return l.default.Children.forEach(e.props.children,function(e){var n={};if(void 0!==e.props&&(n.props=(0,p.filterPropsFrom)(e.props),void 0!==e.props.children&&(n.label=e.props.children,n.key=n.label),"string"==typeof e.props.column&&(n.key=e.props.column,void 0===n.label&&(n.label=n.key))),void 0===n.key)throw new TypeError('<th> must have either a "column" property or a string child');t.push(n)}),t}}]),t}();t.Thead=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}};var a,s=n(0),l=(a=s)&&a.__esModule?a:{default:a},u=n(834),c=n(963),p=n(696),d=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l["default"].Component),o(t,[{key:"render",value:function(){var e=(0,c.toArray)(l.default.Children.children(this.props.children));this.props.data&&this.props.columns&&"function"==typeof this.props.columns.map&&(void 0===e.concat&&console.log(e),e=e.concat(this.props.columns.map(function(e,t){var n=e.props,o=void 0===n?{}:n,i=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["props"]);if(this.props.data.hasOwnProperty(i.key)){var a=this.props.data[i.key];return null!=a&&!0===a.__reactableMeta&&(o=a.props,a=a.value),l.default.createElement(u.Td,r({column:i,key:i.key},o),a)}return l.default.createElement(u.Td,{column:i,key:i.key})}.bind(this))));var t=(0,p.filterPropsFrom)(this.props);return l.default.DOM.tr(t,e)}}]),t}();t.Tr=d,d.childNode=u.Td,d.dataType="object"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}};var a,s=n(0),l=(a=s)&&a.__esModule?a:{default:a},u=n(962),c=n(831),p=n(730),d=n(696),f=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l["default"].Component),o(t,[{key:"stringifyIfNotReactComponent",value:function(e){return!(0,u.isReactComponent)(e)&&(0,c.stringable)(e)&&void 0!==e?e.toString():null}},{key:"render",value:function(){var e,t=(0,d.filterPropsFrom)(this.props);if("object"==typeof this.props.column)for(var n in this.props.column)"key"!==n&&"name"!==n&&(t[n]=this.props.column[n]);return t.onClick=this.props.handleClick,void 0===this.props.data&&(e=this.stringifyIfNotReactComponent(this.props.children)),(0,p.isUnsafe)(this.props.children)?l.default.createElement("td",r({},t,{dangerouslySetInnerHTML:{__html:this.props.children.toString()}})):l.default.createElement("td",t,e||this.props.children)}}]),t}();t.Td=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}};var i,a=n(0),s=(i=a)&&i.__esModule?i:{default:i},l=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["default"].Component),r(t,[{key:"render",value:function(){return s.default.createElement("tfoot",this.props)}}]),t}();t.Tfoot=l},function(e,t,n){"use strict";var r=n(0),o=n(7);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,s(t).apply(this,arguments))}var n,o,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement("span",null,"Queries are limited by gene and sample count. The product of the query's gene and sample count must be less than"," ",this.props.queryProductLimit.toLocaleString(),". You have selected ",this.props.sampleCount.toLocaleString()," samples, so you can have no more than"," ",Math.floor(this.props.queryProductLimit/this.props.sampleCount).toLocaleString()," ","genes in your query. Please"," ",r.createElement("a",{style:{color:"#ccc"},href:"mailto:".concat(this.props.email)},"let us know")," ","your use case(s) if you need to query more than that.")}}])&&i(n.prototype,o),u&&i(n,u),t}();p=c([o.observer],p),t.a=p},function(e,t,n){"use strict";function r(e,t){var n=t.distance,r=t.left,o=t.right,i=t.up,a=t.down,l=t.top,u=t.bottom,c=t.big,d=t.mirror,f=t.opposite,h=(n?n.toString():0)+((r?1:0)|(o?2:0)|(l||a?4:0)|(u||i?8:0)|(d?16:0)|(f?32:0)|(e?64:0)|(c?128:0));if(p.hasOwnProperty(h))return p[h];var m=r||o||i||a||l||u,y=void 0,g=void 0;if(m){if(!d!=!(e&&f)){var v=[o,r,u,l,a,i];r=v[0],o=v[1],l=v[2],u=v[3],i=v[4],a=v[5]}var b=n||(c?"2000px":"100%");y=r?"-"+b:o?b:"0",g=a||l?"-"+b:i||u?b:"0"}return p[h]=(0,s.animation)((e?"to":"from")+" {opacity: 0;"+(m?" transform: translate3d("+y+", "+g+", 0);":"")+"}\n     "+(e?"from":"to")+" {opacity: 1;transform: none;} "),p[h]}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.defaults,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.children,o=(e.out,e.forever),i=e.timeout,a=e.duration,l=void 0===a?s.defaults.duration:a,c=e.delay,p=void 0===c?s.defaults.delay:c,d=e.count,f=void 0===d?s.defaults.count:d,h=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children","out","forever","timeout","duration","delay","count"]),m={make:r,duration:void 0===i?l:i,delay:p,forever:o,count:f,style:{animationFillMode:"both"},reverse:h.left};return t?(0,u.default)(h,m,m,n):m}Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(1),s=n(617),l=n(623),u=(i=l)&&i.__esModule?i:{default:i},c={out:a.bool,left:a.bool,right:a.bool,top:a.bool,bottom:a.bool,big:a.bool,mirror:a.bool,opposite:a.bool,duration:a.number,timeout:a.number,distance:a.string,delay:a.number,count:a.number,forever:a.bool},p={};o.propTypes=c,t.default=o,e.exports=t.default},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(594),o=n(67),i=n(128),a=n(597);function s(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=window,l=new r.c(e);return l.singlePageAppSubmitRoutine=function(r){(r.cancer_study_list=r.cancer_study_list||r.cancer_study_id,delete r.cancer_study_id,e)&&((e.cancer_study_id!==r.cancer_study_id||e.cancer_study_list!==r.cancer_study_list||Object(a.a)(e.case_ids,"")!==Object(a.a)(r.case_ids,"")||e.case_set_id!==r.case_set_id)&&(r.comparison_createdGroupsSessionId=void 0));var u=l.physicalStudyIdsInSelection.length>1&&1===l.geneIds.length?o.b.CANCER_TYPES_SUMMARY:o.b.ONCOPRINT,c=t||new i.b(s.routingStore);c.updateURL(r,"results/".concat(u),n,!1),void 0===t&&c.destroy()},l}},function(e,t,n){e.exports=n(16)(346)},function(e,t,n){"use strict";var r=n(0),o=n(7),i=n(3),a=n(8),s=n(2),l=n(577),u=n(579),c=n(101),p=n(596),d=n(710),f=n(841),h=n(65);function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var S=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};var _=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=y(this,g(t).apply(this,arguments))).inputGroupName="",e.saveGroupToUser=!0,e.enterNameInterface=Object(u.a)({await:function(){return[e.props.store.origin,e.props.store.sampleSet,e.props.store.existingGroupNames,e.props.store._originalGroups,e.props.store.patientToSamplesSet]},render:function(){return r.createElement("div",{style:{width:250}},e.props.store.isLoggedIn&&r.createElement(f.a,{checked:e.saveGroupToUser,onClick:e.toggleSaveGroupToUser,label:[r.createElement("span",{style:{marginRight:5}},"Save group to user account"),r.createElement(d.a,{divStyle:{display:"inline"},tooltip:r.createElement("span",null,"Selecting this will save the new group with the associated study in your user account.")})]}),r.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.createElement("input",{className:"form-control",style:{marginRight:5},type:"text",placeholder:"Enter a group name..",value:e.inputGroupName,onChange:e.onChangeInputGroupName,"data-test":e.props.caseType+"GroupNameInputField"}),r.createElement("button",{className:"btn btm-sm btn-primary",disabled:0===e.inputGroupName.length||e.isDuplicateName,onClick:e.submit,"data-test":e.props.caseType+"GroupNameSubmitButton"},"Submit")),e.isDuplicateName&&r.createElement("div",{style:{marginTop:4},"data-test":e.props.caseType+"DuplicateGroupNameMessage"},l.b))},renderPending:function(){return r.createElement(c.a,{isLoading:!0})}}),e.includedRegionsDescription=Object(u.a)({await:function(){return[e.props.store.uidToGroup]},render:function(){return r.createElement("div",null,e.props.includedRegions.map(function(t){return r.createElement("div",null,function(e,t,n,o){var i=e.map(function(e){return n[e]}),a=r.createElement("span",null,o[0].toUpperCase(),o.substring(1),"s only in"," ",Object(p.f)(i,"and"));return a=r.createElement("span",null,a,".")}(t,e.props.allGroupsInPlot,e.props.store.uidToGroup.result,e.props.caseType))}))}}),e}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,r["Component"]),n=t,(o=[{key:"toggleSaveGroupToUser",value:function(){this.saveGroupToUser=!this.saveGroupToUser}},{key:"onChangeInputGroupName",value:function(e){this.inputGroupName=e.target.value}},{key:"submit",value:function(){var e;e="sample"===this.props.caseType?Object(p.d)(this.props.store._originalGroups.result,this.props.includedRegions,this.props.allGroupsInPlot):Object(p.c)(this.props.store._originalGroups.result,this.props.includedRegions,this.props.allGroupsInPlot,this.props.store.patientToSamplesSet.result),this.props.submitGroup({name:this.inputGroupName,description:"",studies:e,origin:this.props.store.origin.result},this.saveGroupToUser)}},{key:"render",value:function(){return r.createElement("div",{style:Object.assign({width:this.props.width,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},this.props.style)},r.createElement(i.c,{trigger:["click"],overlay:this.enterNameInterface.component,placement:"top"},r.createElement("button",{className:"btn btn-md btn-primary",disabled:0===this.props.includedRegions.length,"data-event":Object(h.e)({action:"createGroupFromVenn",label:"",category:"groupComparison"}),"data-test":this.props.caseType+"GroupComparisonCreateGroupButton"},"Create Group From Selected Diagram Areas")),r.createElement("div",{style:{marginTop:20}},this.includedRegionsDescription.component))}},{key:"isDuplicateName",get:function(){var e=this.props.store.existingGroupNames.result,t=e.session;return this.saveGroupToUser&&(t=t.concat(e.user)),t.includes(this.inputGroupName.trim())}}])&&m(n.prototype,o),a&&m(n,a),t}();S([s.observable],_.prototype,"inputGroupName",void 0),S([s.observable],_.prototype,"saveGroupToUser",void 0),S([a.default,s.action],_.prototype,"toggleSaveGroupToUser",null),S([a.default,s.action],_.prototype,"onChangeInputGroupName",null),S([a.default,s.action],_.prototype,"submit",null),S([s.computed],_.prototype,"isDuplicateName",null),_=S([o.observer],_),t.a=_},function(e,t,n){"use strict";var r=n(0),o=n(7);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,s(t).apply(this,arguments))}var n,o,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement("div",{className:"checkbox",style:Object.assign({display:"flex",alignItems:"center"},this.props.style)},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:this.props.value,checked:this.props.checked,onClick:this.props.onClick,style:{marginTop:1}})),"function"==typeof this.props.label?this.props.label():this.props.label)}}])&&i(n.prototype,o),u&&i(n,u),t}();p=c([o.observer],p),t.a=p},function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return c});var r=n(0),o=n(689),i=n(596),a=n(775);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var l=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},u=function(e){var t=e.uidToGroup,n=e.dx,a=e.dy,u=(e.datum,e.text,l(e,["uidToGroup","dx","dy","datum","text"])),c=t[e.text];return r.createElement(o.a,s({text:c.name,prefixTspans:c.ordinal.length>0?[r.createElement("tspan",null,"("),r.createElement("tspan",{style:{fontWeight:"bold"}},c.ordinal),r.createElement("tspan",null,") ")]:void 0,tooltip:function(){return r.createElement("div",null,Object(i.h)(c))},maxWidth:e.maxLabelWidth,dy:a,dx:n},u))},c=function(e){var t=e.uidToGroup,n=e.dx,u=e.dy,c=(e.datum,e.text),p=l(e,["uidToGroup","dx","dy","datum","text"]),d=JSON.parse(c).map(function(e){return t[e]}),f=(d.map(function(e){return e.ordinal}),"Only ".concat(d.map(function(e){return e.ordinal?"(".concat(e.ordinal,")"):e.name}).join(", ")));return r.createElement(o.a,s({text:f,renderTruncatedText:function(e){for(var t=[],n=0;n<e.length;n++){n>0&&n<e.length-1&&"("===e[n-1]&&")"===e[n+1]?t.push(r.createElement("tspan",{style:{fontWeight:"bold"}},e[n])):t.push(r.createElement("tspan",null,e[n]))}return t},alwaysShowTooltip:!0,tooltip:function(){return r.createElement("div",null,"Only"," ",Object(a.a)(r.createElement("span",null,","),d.map(function(e){return Object(i.h)(e)})))},maxWidth:e.maxLabelWidth,dy:u,dx:n},p))}},function(e,t,n){"use strict";var r=n(0),o=n(7),i=n(581),a=n(2),s=n(56),l=n(576),u=n(580),c=n(582),p=n(8),d=n(844),f=n(845),h=n(3);function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var S=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},_=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=y(this,g(t).apply(this,arguments))).dragging=!1,e}var n,a,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,r["Component"]),n=t,(a=[{key:"svgRef",value:function(e){this.svgContainer=e&&e.children?e.children[0]:null}},{key:"handleSelection",value:function(e,t,n){this.props.onSelection(e[0].data.map(function(e){return e.hugoGeneSymbol}))}},{key:"handleSelectionCleared",value:function(){this.tooltipModel&&this.props.onGeneNameClick(this.tooltipModel.hugoGeneSymbol,this.tooltipModel.entrezGeneId),this.props.onSelectionCleared()}},{key:"onGenePointMouseOver",value:function(e,t,n){this.tooltipModel=e,this.tooltipModel.x=t,this.tooltipModel.y=n}},{key:"onGenePointMouseOut",value:function(){this.tooltipModel=null}},{key:"getTooltip",value:function(){return this.tooltipModel?r.createElement(s.Popover,{className:"cbioTooltip",positionLeft:this.tooltipModel.x+15,positionTop:this.tooltipModel.y-33},"Gene: ",this.tooltipModel.hugoGeneSymbol,r.createElement("br",null),"Log Ratio: ",Object(u.a)(this.tooltipModel.logRatio),r.createElement("br",null),"p-Value:"," ",Object(c.b)(this.tooltipModel.pValue,3,.01),r.createElement("br",null),"q-Value:"," ",Object(c.b)(this.tooltipModel.qValue,3,.01)):r.createElement("span",null)}},{key:"onClick",value:function(){this.dragging||this.handleSelectionCleared(),this.dragging=!1}},{key:"onSelectionComponentRender",value:function(){this.dragging=!0}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:"posRelative"},r.createElement("div",{className:"borderedChart inlineBlock",style:{position:"relative"},onClick:this.onClick},r.createElement(i.VictoryChart,{containerComponent:r.createElement(i.VictorySelectionContainer,{containerRef:this.svgRef,activateSelectedData:!1,onSelection:function(t,n,r){return e.handleSelection(t,n,r)},responsive:!1,onSelectionCleared:this.handleSelectionCleared,selectionComponent:r.createElement(d.a,{onRender:this.onSelectionComponentRender})}),theme:l.d,domainPadding:{y:20},height:350,width:350,padding:{top:40,bottom:60,left:60,right:40},singleQuadrantDomainPadding:!1},r.createElement(i.VictoryAxis,{tickValues:this.props.xAxisTickValues,domain:[-this.props.xAxisDomain,this.props.xAxisDomain],label:"Log Ratio",tickFormat:function(e){return e>=1e3||e<=-1e3?"".concat(e/1e3,"k"):e},style:{tickLabels:{padding:20},axisLabel:{padding:40},ticks:{size:0},grid:{strokeOpacity:1}},crossAxis:!1,orientation:"bottom",offsetY:60}),r.createElement(i.VictoryAxis,{label:"-log10 p-Value",dependentAxis:!0,tickCount:4,style:{tickLabels:{padding:135},axisLabel:{padding:165},ticks:{size:0},grid:{strokeOpacity:1}}}),r.createElement(i.VictoryLabel,{style:l.a,text:" "+this.xAxisLeftLabel,x:60,y:300}),r.createElement(i.VictoryLabel,{style:l.a,text:this.xAxisRightLabel+" ",textAnchor:"end",x:310,y:300}),r.createElement(i.VictoryLabel,{style:l.a,text:"Significance ",x:320,y:210,angle:-90}),r.createElement(i.VictoryScatter,{style:{data:{fillOpacity:.4}},data:this.props.data,dataComponent:r.createElement(f.a,{onMouseOver:this.onGenePointMouseOver,onMouseOut:this.onGenePointMouseOut,fill:function(t){return t.hugoGeneSymbol in e.props.selectedGenesSet?"#FE9929":t.qValue<.05?"#58ACFA":"#D3D3D3"}})})),r.createElement(h.d,{getSvg:function(){return e.svgContainer},filename:"enrichments-volcano",dontFade:!0,type:"button",style:{position:"absolute",top:10,right:10,zIndex:0}})),r.createElement(o.Observer,null,this.getTooltip))}},{key:"totalLabelWidths",get:function(){return Object(h.L)(this.props.xAxisLeftLabel,"Arial","13px")+Object(h.L)(this.props.xAxisRightLabel,"Arial","13px")}},{key:"xAxisLeftLabel",get:function(){return this.totalLabelWidths>200?Object(h.cb)(this.props.xAxisLeftLabel,90,"Arial","13px"):this.props.xAxisLeftLabel}},{key:"xAxisRightLabel",get:function(){return this.totalLabelWidths>180?Object(h.cb)(this.props.xAxisRightLabel,90,"Arial","13px"):this.props.xAxisRightLabel}}])&&m(n.prototype,a),p&&m(n,p),t}();S([a.observable],_.prototype,"tooltipModel",void 0),S([a.observable],_.prototype,"svgContainer",void 0),S([p.default,a.action],_.prototype,"svgRef",null),S([p.default],_.prototype,"handleSelectionCleared",null),S([p.default,a.action],_.prototype,"onGenePointMouseOver",null),S([p.default,a.action],_.prototype,"onGenePointMouseOut",null),S([p.default],_.prototype,"getTooltip",null),S([p.default],_.prototype,"onClick",null),S([p.default],_.prototype,"onSelectionComponentRender",null),S([a.computed],_.prototype,"xAxisLeftLabel",null),S([a.computed],_.prototype,"xAxisRightLabel",null),_=S([o.observer],_),t.a=_},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,s(t).apply(this,arguments))}var n,o,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.onRender,n=u(e,["onRender"]);return(n.width>5||n.height>5)&&t(),r.createElement("rect",n)}}])&&i(n.prototype,o),c&&i(n,c),t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(0),o=n(8);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,s(t).apply(this,arguments))}var n,o,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,r["Component"]),n=t,(o=[{key:"onMouseOver",value:function(e){e.target.setAttribute("r",10),this.props.onMouseOver(this.props.datum,this.props.x,this.props.y)}},{key:"onMouseOut",value:function(e){e.target.setAttribute("r",3),this.props.onMouseOut()}},{key:"render",value:function(){return r.createElement("circle",{cx:this.props.x,cy:this.props.y,r:"3",onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,style:Object.assign({},this.props.style,{fill:this.props.fill(this.props.datum)})})}}])&&i(n.prototype,o),u&&i(n,u),t}();c([o.default],p.prototype,"onMouseOver",null),c([o.default],p.prototype,"onMouseOut",null)},function(e,t,n){"use strict";var r=n(0),o=n(7),i=n(56),a=n(8),s=n(3),l=n(67);function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var h=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":f(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,p(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r["Component"]),n=t,(o=[{key:"onAddGenes",value:function(){Object(l.c)(window.urlWrapper,this.props.checkedGenes)}},{key:"render",value:function(){var e=this.props.checkedGenes.length>0?"(".concat(this.props.checkedGenes.join(", "),")"):"(none checked)";return r.createElement("div",{style:{marginBottom:15}},r.createElement(s.c,{overlay:"Check genes in table below"},r.createElement(i.Button,{style:{marginBottom:2},disabled:this.props.checkedGenes.length<1,onClick:this.onAddGenes,bsSize:"xsmall"},"Add checked genes to query ",e)))}}])&&u(n.prototype,o),a&&u(n,a),t}();h([a.default],m.prototype,"onAddGenes",null),m=h([o.observer],m),t.a=m},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(595);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=i(this,a(t).call(this,e))).setHighlighted=r,o.dataHighlighter=function(e){var t=n();return!(!t||e.entrezGeneId!==t.entrezGeneId)},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,r["a"]),t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return A});var r=n(0),o=n(7),i=n(2),a=n(186),s=n.n(a),l=n(56),u=n(644),c=n.n(u),p=(n(849),n(697)),d=n(4),f=n(581),h=n(601),m=n(576),y=n(582),g=n(15),v=n(3),b=n(8),S=n(574),_=n(9),w=n.n(_),E=n(689);function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var A,I=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":k(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},D=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};!function(e){e.TOOLTIP="tooltip",e.CHART="chart"}(A||(A={}));var M=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=P(t).call(this,e),(n=!o||"object"!==k(o)&&"function"!=typeof o?x(r):o).highlightedCurve="",n.sliderValue=n.maximumDataMonthValue,n.isTooltipHovered=!1,n.tooltipCounter=0,n.styleOptsDefaultProps={width:900,height:500,padding:{top:20,bottom:50,left:60,right:20},tooltipXOffset:20,tooltipYOffset:-47,axis:{x:{axisLabel:{padding:35},grid:{opacity:0}},y:{axisLabel:{padding:45,fill:"black"},grid:{opacity:0}}},pValue:{x:610,y:30,textAnchor:"start"},legend:{x:600,y:50}},n.events=[{target:"data",eventHandlers:{onMouseOver:function(){return[{target:"data",mutation:function(e){return n.tooltipModel=e,n.tooltipCounter++,{active:!0}}}]},onMouseOut:function(){return[{target:"data",mutation:function(){return D(x(n),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.a)(100);case 2:return this.isTooltipHovered||1!==this.tooltipCounter||(this.tooltipModel=null),this.tooltipCounter--,e.abrupt("return",{active:!1});case 5:case"end":return e.stop()}},e,this)}))}}]}}}],n.tooltipMouseEnter=n.tooltipMouseEnter.bind(x(n)),n.tooltipMouseLeave=n.tooltipMouseLeave.bind(x(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,r["Component"]),n=t,(o=[{key:"toSVGDOMNode",value:function(){return Object(S.sb)(this.svgContainer.firstChild,{legendGroupSelector:".survivalChartDownloadLegend",selectorToHide:".survivalChartLegendHideForDownload"})}},{key:"tooltipMouseEnter",value:function(){this.isTooltipHovered=!0}},{key:"tooltipMouseLeave",value:function(){this.isTooltipHovered=!1,this.tooltipModel=null}},{key:"getSvg",value:function(){return this.toSVGDOMNode()}},{key:"getData",value:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var o,i=this.analysisGroupsWithData[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;e.push({scatterData:Object(h.i)(this.sortedGroupedSurvivals[a.value],this.estimates[a.value],a.value),title:void 0!==a.name?a.name:a.value})}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return Object(h.f)(e,this.props.title)}},{key:"hoverCircleFillOpacity",value:function(e,t){return t||this.isTooltipHovered&&this.tooltipModel&&this.tooltipModel.datum.studyId===e.studyId&&this.tooltipModel.datum.patientId===e.patientId?.3:0}},{key:"getAxisTickCount",value:function(e){return 5*Math.ceil(e/200)}},{key:"onSliderChange",value:function(e){this.sliderValue=e}},{key:"onSliderTextChange",value:function(e){this.sliderValue=Number.parseFloat(e)}},{key:"render",value:function(){return 0===this.props.patientSurvivals.length?r.createElement("div",{className:"alert alert-info"},"No data to plot."):r.createElement("div",{style:{position:"relative"}},this.props.legendLocation===A.TOOLTIP?r.createElement(v.c,{mouseLeaveDelay:.2,placement:"rightBottom",overlay:this.chartTooltip},this.chart):this.chart,this.tooltipModel&&r.createElement(l.Popover,O({arrowOffsetTop:56,className:w()("cbioportal-frontend","cbioTooltip",c.a.Tooltip),positionLeft:this.tooltipModel.x+this.styleOpts.tooltipXOffset},{container:this},{positionTop:this.tooltipModel.y+this.styleOpts.tooltipYOffset,onMouseEnter:this.tooltipMouseEnter,onMouseLeave:this.tooltipMouseLeave}),r.createElement("div",null,"Patient ID:"," ",r.createElement("a",{href:Object(g.w)(this.tooltipModel.datum.studyId,this.tooltipModel.datum.patientId),target:"_blank"},this.tooltipModel.datum.patientId),r.createElement("br",null),!!this.props.showCurveInTooltip&&["Curve: ".concat(this.tooltipModel.datum.group),r.createElement("br",null)],this.props.yLabelTooltip,":"," ",this.tooltipModel.datum.y.toFixed(2),"%",r.createElement("br",null),this.tooltipModel.datum.status?this.props.xLabelWithEventTooltip:this.props.xLabelWithoutEventTooltip,": ",this.tooltipModel.datum.x.toFixed(2)," months"," ",this.tooltipModel.datum.status?"":"(censored)",r.createElement("br",null),this.props.analysisClinicalAttribute&&r.createElement("span",null,this.props.analysisClinicalAttribute.displayName,":"," ",this.props.patientToAnalysisGroups[this.tooltipModel.datum.uniquePatientKey]))),this.props.showTable&&r.createElement("table",{className:"table table-striped",style:{marginTop:20,width:"100%"}},r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",null),r.createElement("td",null,this.props.totalCasesHeader),r.createElement("td",null,this.props.statusCasesHeader),r.createElement("td",null,this.props.medianMonthsHeader)),this.tableRows)))}},{key:"styleOpts",get:function(){var e=d.merge({},this.styleOptsDefaultProps,this.props.styleOpts);return e.padding.right=this.props.legendLocation===A.CHART?300:e.padding.right,this.props.styleOpts&&this.props.styleOpts.legend&&void 0!==this.props.styleOpts.legend.x||(e.legend.x=e.width-e.padding.right),e}},{key:"downSamplingDenominators",get:function(){return{x:this.styleOpts.width-this.styleOpts.padding.left-this.styleOpts.padding.right,y:this.styleOpts.height-this.styleOpts.padding.top-this.styleOpts.padding.bottom}}},{key:"sortedGroupedSurvivals",get:function(){var e=this.props.patientToAnalysisGroups,t=d.reduce(this.props.patientSurvivals,function(t,n){n.uniquePatientKey in e&&e[n.uniquePatientKey].forEach(function(e){t[e]=t[e]||[],t[e].push(n)});return t},{});return d.mapValues(t,function(e){return e.sort(function(e,t){return e.months-t.months})})}},{key:"estimates",get:function(){return d.mapValues(this.sortedGroupedSurvivals,function(e){return Object(h.g)(e)})}},{key:"unfilteredScatterData",get:function(){var e=this;return d.mapValues(this.sortedGroupedSurvivals,function(t,n){var r=e.estimates[n],o=e.analysisGroupsMap[n].name;return{numOfCases:t.length,line:Object(h.h)(t,r),scatterWithOpacity:Object(h.j)(t,r,o),scatter:Object(h.i)(t,r,o)}})}},{key:"scatterData",get:function(){return Object(h.c)(this.unfilteredScatterData,this.scatterFilter,{xDenominator:this.downSamplingDenominators.x,yDenominator:this.downSamplingDenominators.y,threshold:1e3})}},{key:"analysisGroupsMap",get:function(){return d.keyBy(this.props.analysisGroups,function(e){return e.value})}},{key:"logRankTestPVal",get:function(){return 2===this.analysisGroupsWithData.length?Object(h.b)(this.sortedGroupedSurvivals[this.analysisGroupsWithData[0].value],this.sortedGroupedSurvivals[this.analysisGroupsWithData[1].value]):null}},{key:"victoryLegendData",get:function(){var e=[];if(this.props.legendLocation===A.CHART){var t=!0,n=!1,r=void 0;try{for(var o,i=this.analysisGroupsWithData[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;e.push({name:a.legendText||a.name||a.value,symbol:{fill:a.color,strokeOpacity:0,type:"square",size:6}})}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}return e}},{key:"pValueText",get:function(){return this.props.showLogRankPVal&&null!==this.logRankTestPVal?r.createElement(f.VictoryLabel,{x:this.styleOpts.pValue.x,y:this.styleOpts.pValue.y,style:m.c,textAnchor:this.styleOpts.pValue.textAnchor,text:"Logrank Test P-Value: ".concat(Object(y.b)(this.logRankTestPVal,3,.01))}):null}},{key:"legendDataForDownload",get:function(){var e=this.analysisGroupsWithData.map(function(e){return{name:e.name?e.name:e.value,symbol:{fill:e.color,strokeOpacity:0,type:"square",size:6}}});return this.props.naPatientsHiddenInSurvival&&e.push({name:"* Patients with NA for any of the selected attributes are excluded",symbol:{opacity:0}}),e}},{key:"analysisGroupsWithData",get:function(){var e=this,t=this.props.analysisGroups;return t=t.filter(function(t){return t.value in e.scatterData&&e.scatterData[t.value].numOfCases>0})}},{key:"scattersAndLines",get:function(){var e=this,t=this.analysisGroupsWithData,n=(t=d.sortBy(t,function(t){return e.highlightedCurve===t.value?1:0})).map(function(t){return r.createElement(f.VictoryLine,{key:t.value,interpolation:"stepAfter",data:e.scatterData[t.value].line,style:{data:{stroke:t.color,strokeWidth:e.highlightedCurve===t.value?4:1,fill:"#000000",fillOpacity:0}}})}),o=t.map(function(t){return r.createElement(f.VictoryScatter,{key:t.value,data:e.scatterData[t.value].scatterWithOpacity,symbol:"plus",style:{data:{fill:t.color,opacity:function(e){return e.opacity}}},size:3})}),i=t.map(function(t){return r.createElement(f.VictoryScatter,{key:t.value,data:e.scatterData[t.value].scatter,symbol:"circle",style:{data:{fill:t.color,fillOpacity:e.hoverCircleFillOpacity}},size:10,events:e.events})});return n.concat(o).concat(i)}},{key:"legendForDownload",get:function(){var e=d.cloneDeep(m.d);return e.legend.style.data={type:"square",size:5,strokeWidth:0,stroke:"black"},r.createElement(f.VictoryLegend,{x:0,y:this.styleOpts.height+1,style:Object.assign(Object.assign({},e.legend.style),{title:{fontWeight:"bold"}}),title:this.props.title,rowGutter:-10,data:this.legendDataForDownload,groupComponent:r.createElement("g",{className:"survivalChartDownloadLegend"})})}},{key:"xAxisTickCount",get:function(){return this.props.xAxisTickCount||this.getAxisTickCount(this.showLegend?this.styleOpts.legend.x:this.styleOpts.width)}},{key:"showLegend",get:function(){return this.victoryLegendData.length>0}},{key:"maximumDataMonthValue",get:function(){return d.chain(this.sortedGroupedSurvivals).map(function(e){return e[e.length-1].months}).max().ceil().value()}},{key:"chart",get:function(){var e=this;return r.createElement("div",{className:this.props.className,"data-test":"SurvivalChart"},this.props.showDownloadButtons&&r.createElement(v.d,{dontFade:!0,filename:this.props.fileName,buttons:["SVG","PNG","PDF","Data"],getSvg:this.getSvg,getData:this.getData,style:{position:"absolute",zIndex:10,right:10},type:"button"}),this.props.showSlider&&r.createElement("div",{className:"small",style:{display:"flex",alignItems:"center",marginLeft:60}},r.createElement("span",null,"X-Axis Max:"),r.createElement("div",{className:"RangeSliderContainer",style:{width:300,marginLeft:10,marginRight:10}},r.createElement(s.a,{min:0,max:this.maximumDataMonthValue,value:this.sliderValue,onChange:this.onSliderChange,tooltip:!1,step:1})),r.createElement(v.e,{className:c.a.XmaxNumberInput,value:this.sliderValue.toString(),setValue:this.onSliderTextChange,numericOnly:!0}),r.createElement("span",null,Object(v.R)("Month",this.sliderValue)," Survival")),r.createElement(f.VictoryChart,{containerComponent:r.createElement(f.VictoryZoomContainer,{responsive:!1,disable:!0,zoomDomain:this.props.showSlider?{x:[0,this.sliderValue]}:void 0,onZoomDomainChange:d.debounce(function(t){e.scatterFilter=t},1e3),containerRef:function(t){return e.svgContainer=t}}),height:this.styleOpts.height,width:this.styleOpts.width,padding:this.styleOpts.padding,theme:m.d,domainPadding:{x:[10,50],y:[20,20]}},r.createElement(f.VictoryAxis,{style:this.styleOpts.axis.x,crossAxis:!1,tickCount:this.xAxisTickCount,label:this.props.xAxisLabel}),r.createElement(f.VictoryAxis,{label:this.props.yAxisLabel,dependentAxis:!0,tickFormat:function(e){return"".concat(e,"%")},tickCount:this.props.yAxisTickCount,style:this.styleOpts.axis.y,domain:[0,100],crossAxis:!1}),this.scattersAndLines,this.showLegend&&r.createElement(f.VictoryLegend,{x:this.styleOpts.legend.x,y:this.styleOpts.legend.y,data:this.victoryLegendData,labelComponent:this.props.legendLabelComponent||r.createElement(E.a,{dy:"0.3em",maxWidth:256}),groupComponent:r.createElement("g",{className:"survivalChartLegendHideForDownload"})}),this.legendForDownload,this.pValueText))}},{key:"chartTooltip",get:function(){var e=this;return r.createElement("div",{style:{maxWidth:250}},this.analysisGroupsWithData.map(function(t){return r.createElement("span",{key:t.value,style:{display:"inline-block",marginRight:12,fontWeight:e.highlightedCurve===t.value?"bold":"initial",cursor:"pointer"},onClick:function(){e.highlightedCurve=e.highlightedCurve===t.value?"":t.value}},r.createElement("div",{style:{width:10,height:10,display:"inline-block",backgroundColor:t.color,marginRight:5}}),t.name?t.name:t.value)}),this.props.showNaPatientsHiddenToggle&&r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",checked:this.props.naPatientsHiddenInSurvival,onClick:this.props.toggleSurvivalHideNAPatients})," ","Exclude patients with NA for any of the selected attributes.")))}},{key:"tableRows",get:function(){var e=this;return this.props.analysisGroups.map(function(t){return r.createElement("tr",null,r.createElement("td",null,t.name?t.name:t.value),Object(h.k)(e.sortedGroupedSurvivals[t.value],e.estimates[t.value]).map(function(e){return r.createElement("td",null,r.createElement("b",null,e))}))})}}])&&C(n.prototype,o),i&&C(n,i),t}();M.defaultProps={showTable:!0,showSlider:!0,legendLocation:A.CHART,showLogRankPVal:!0,showNaPatientsHiddenToggle:!1,showDownloadButtons:!0,yAxisTickCount:11},I([i.observable.ref],M.prototype,"tooltipModel",void 0),I([i.observable],M.prototype,"scatterFilter",void 0),I([i.observable],M.prototype,"highlightedCurve",void 0),I([i.observable],M.prototype,"sliderValue",void 0),I([i.computed],M.prototype,"styleOpts",null),I([i.computed],M.prototype,"downSamplingDenominators",null),I([i.computed],M.prototype,"sortedGroupedSurvivals",null),I([i.computed],M.prototype,"estimates",null),I([i.computed],M.prototype,"unfilteredScatterData",null),I([i.computed],M.prototype,"scatterData",null),I([i.computed],M.prototype,"analysisGroupsMap",null),I([i.computed],M.prototype,"logRankTestPVal",null),I([i.computed],M.prototype,"victoryLegendData",null),I([i.computed],M.prototype,"legendDataForDownload",null),I([b.default],M.prototype,"getSvg",null),I([b.default],M.prototype,"getData",null),I([b.default],M.prototype,"hoverCircleFillOpacity",null),I([i.computed],M.prototype,"analysisGroupsWithData",null),I([i.computed],M.prototype,"scattersAndLines",null),I([i.computed],M.prototype,"legendForDownload",null),I([i.computed],M.prototype,"xAxisTickCount",null),I([i.computed],M.prototype,"showLegend",null),I([i.computed],M.prototype,"maximumDataMonthValue",null),I([b.default,i.action],M.prototype,"onSliderChange",null),I([b.default,i.action],M.prototype,"onSliderTextChange",null),I([i.computed],M.prototype,"chart",null),I([i.computed],M.prototype,"chartTooltip",null),I([i.computed],M.prototype,"tableRows",null),M=I([o.observer],M),t.b=M},function(e,t,n){},,function(e,t,n){"use strict";var r=n(0),o=n(7),i=n(2),a=n(4),s=n(575),l=n(614),u=n(15);function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"getTextValue",value:function(t){return e.getData(t)||""}},{key:"getData",value:function(e){return e.length>0?e[0].sampleId:null}},{key:"renderFunction",value:function(t,n){var o=e.getTextValue(t),i=r.createElement(l.a,{text:o,tooltip:r.createElement("div",{style:{maxWidth:300}},o),maxLength:16});if(n){var a=n[t[0].molecularProfileId],s=a&&a.studyId;s&&(i=r.createElement("a",{href:Object(u.y)(s,o),target:"_blank"},i))}return i}}],(n=null)&&c(t.prototype,n),o&&c(t,o),e}(),d=n(686),f=n(3);function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"renderFunction",value:function(t){var n=e.getSortValue(t);if(n){var o=t[0].normalAltCount,i=t[0].normalRefCount;return d.a.mainContent(n,o,i)}return r.createElement(f.o,{status:f.n.NA})}},{key:"getTextValue",value:function(t){var n=e.getSortValue(t);return n?Object(d.b)(n):""}},{key:"getSortValue",value:function(e){var t=e[0];if(!t)return null;var n=t.normalAltCount,r=t.normalRefCount;return n<0||r<0?null:n/(n+r)}}],(n=null)&&h(t.prototype,n),o&&h(t,o),e}(),y=n(768),g=(n(587),n(748)),v=n(580),b=n(17),S=n(749);function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var w=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"renderFunction",value:function(t,n,o){var i=e.getMutSigQValue(t,n),a=e.getVariantCountData(t,o),s=e.makeCohortFrequencyViz(a);return r.createElement("div",null,null!==s&&s,r.createElement(b.If,{condition:i>0},r.createElement(b.Then,null,r.createElement(S.a,{qValue:i}))))}},{key:"getSortValue",value:function(t,n){var r=e.getVariantCountData(t,n);return r&&r.data?r.data.numberOfSamplesWithMutationInGene:null}},{key:"getVariantCountData",value:function(e,t){if(0===e.length)return null;var n=e[0].entrezGeneId,r=e[0].keyword,o=t.get({entrezGeneId:n,keyword:r});return o?Object.assign({hugoGeneSymbol:e[0].gene.hugoGeneSymbol},o):null}},{key:"getMutSigQValue",value:function(e,t){if(!t||0===e.length)return-1;var n=t[e[0].entrezGeneId];return n?n.qValue:-1}},{key:"makeCohortFrequencyViz",value:function(t){var n=null;if(null===t)n=f.n.LOADING;else if("error"===t.status)n=f.n.ERROR;else{if(null!==t.data){var o=[t.data.numberOfSamplesWithMutationInGene];return t.data.keyword&&o.push(t.data.numberOfSamplesWithKeyword),r.createElement(g.a,{counts:o,totalCount:t.data.numberOfSamples,tooltip:e.getCohortFrequencyTooltip(t)})}n=f.n.NA}if(null!==n)return r.createElement(f.o,{status:n})}},{key:"getBoldPercentage",value:function(e){return r.createElement("b",null,Object(v.c)(e))}},{key:"getCohortFrequencyTooltip",value:function(t){return null===t?r.createElement("span",null,"Querying server for data."):"error"===t.status?r.createElement("span",null,"Error retrieving data."):null===t.data?r.createElement("span",null,"Count data is not available for this gene."):r.createElement("div",null,r.createElement("span",null,t.data.numberOfSamplesWithMutationInGene," ","samples (",e.getBoldPercentage(t.data.numberOfSamplesWithMutationInGene/t.data.numberOfSamples),") in this study have mutated"," ",t.hugoGeneSymbol,void 0!==t.data.keyword&&r.createElement("span",null,", out of which"," ",t.data.numberOfSamplesWithKeyword," (",e.getBoldPercentage(t.data.numberOfSamplesWithKeyword/t.data.numberOfSamples),") have ",t.data.keyword," mutations"),"."))}}],(n=null)&&_(t.prototype,n),o&&_(t,o),e}();function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var O=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"renderFunction",value:function(t,n,o){var i=e.getData(t,n,o);return r.createElement(f.c,{placement:"left",overlay:e.getTooltipContents(i),arrowContent:r.createElement("div",{className:"rc-tooltip-arrow-inner"})},e.getTdContents(i))}},{key:"getTextValue",value:function(t,n,r){var o=e.getTdValue(e.getData(t,n,r));return null!==o?e.altToFilterString[o]:""}},{key:"getSortValue",value:function(t,n,r){return e.getTdValue(e.getData(t,n,r))}},{key:"filter",value:function(t,n,r,o){var i=e.getData(t,n,r);return!(!i||!i.data)&&(!!e.altToFilterString[i.data.alteration]&&e.altToFilterString[i.data.alteration].indexOf(o.toLowerCase())>-1)}},{key:"getData",value:function(e,t,n){if(!e||0===e.length||!n.isActive)return null;var r=e[0].sampleId,o=e[0].entrezGeneId,i=t[e[0].molecularProfileId];return i?n.get({sampleId:r,entrezGeneId:o,studyId:i.studyId}):null}},{key:"getTdValue",value:function(e){return null!==e&&"complete"===e.status&&null!==e.data?e.data.alteration:null}},{key:"getTdContents",value:function(e){var t=null;if(null!==e&&"complete"===e.status&&null!==e.data){var n=e.data.alteration;return 2===n?r.createElement("span",{style:{color:"red",textAlign:"center",fontSize:"12px"}},r.createElement("b",null,"Amp")):1===n?r.createElement("span",{style:{color:"red",textAlign:"center",fontSize:"smaller"}},r.createElement("b",null,"Gain")):0===n?r.createElement("span",{style:{color:"black",textAlign:"center",fontSize:"xx-small"}},"Diploid"):-1===n?r.createElement("span",{style:{color:"blue",textAlign:"center",fontSize:"smaller"}},r.createElement("b",null,"ShallowDel")):r.createElement("span",{style:{color:"blue",textAlign:"center",fontSize:"12px"}},r.createElement("b",null,"DeepDel"))}if(null!==(t=e&&"complete"===e.status&&null===e.data?f.n.NA:e&&"error"===e.status?f.n.ERROR:f.n.NA))return r.createElement(f.o,{status:t,naAlt:"CNA data is not available for this gene."})}},{key:"getTooltipContents",value:function(e){return e&&"complete"===e.status&&null!==e.data?r.createElement("div",null,r.createElement("span",null,{"-2":"Deep deletion","-1":"Shallow deletion",0:"Diploid / normal",1:"Low-level gain",2:"High-level amplification"}[e.data.alteration])):e&&"complete"===e.status&&null===e.data?r.createElement("span",null,"CNA data is not available for this gene."):e&&"error"===e.status?r.createElement("span",null,"Error retrieving data."):r.createElement("span",null,"Querying server for data.")}},{key:"isVisible",value:function(e){return e&&e.isActive}}],(n=null)&&E(t.prototype,n),o&&E(t,o),e}();O.altToFilterString={2:"amp",1:"gain",0:"diploid","-1":"shallowdel","-2":"deepdel"};var C=n(769);function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var x=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"getTextValue",value:function(t){return e.getData(t)||""}},{key:"getDisplayValue",value:function(t){return e.getTextValue(t)}},{key:"getData",value:function(e){return e.length>0?e[0].gene.hugoGeneSymbol:null}},{key:"getSortValue",value:function(t){return e.getTextValue(t)}},{key:"renderFunction",value:function(t){var n=e.getDisplayValue(t);return r.createElement("span",{"data-test":"mutation-table-gene-column"},n)}}],(n=null)&&P(t.prototype,n),o&&P(t,o),e}();function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var k=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getSortValue",value:function(t){var n=e.getData(t);return n?e.extractSortValue(n):null}},{key:"extractSortValue",value:function(e){var t=e.match(/[0-9]+/g),n=-1;return t?n=parseInt(t[0]):e.toLowerCase().indexOf("x")>-1?n=23:e.toLowerCase().indexOf("y")>-1&&(n=24),n}},{key:"getData",value:function(e){return e.length>0?e[0].chr:null}}],(n=null)&&T(t.prototype,n),r&&T(t,r),e}(),A=n(22),I=n(786),D=n.n(I);function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var j=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"getData",value:function(e){var t=null;return e.length>0&&(t=e[0].mutationStatus),t}},{key:"sortValue",value:function(t){return e.getData(t)}},{key:"download",value:function(t){return e.getData(t)||""}},{key:"renderFunction",value:function(t){var n,o=e.getData(t),i=!1;return o?o.toLowerCase().indexOf("somatic")>-1?(n=r.createElement("span",{className:D.a.somatic},"S"),i=!0):o.toLowerCase().indexOf("germline")>-1?(n=r.createElement("span",{className:D.a.germline},"G"),i=!0):n=r.createElement("span",{className:D.a.unknown},o):n=r.createElement("span",null),i&&(n=r.createElement(f.c,{overlay:r.createElement("span",null,o),placement:"right"},n)),n}}],(n=null)&&M(t.prototype,n),o&&M(t,o),e}(),N=n(787),R=n.n(N);function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var G=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"getSortValue",value:function(t){return Object(A.b)(e.getTextValue(t))}},{key:"getTextValue",value:function(t){var n="",r=e.getData(t);return r&&(n=r.toString()),n}},{key:"getFilterValue",value:function(t,n,r){var o=e.getDisplayValue(t),i=j.getData(t);return i&&i.toLowerCase().includes("germline")&&(o="".concat(o).concat(i)),o.toUpperCase().indexOf(r)>-1}},{key:"getDisplayValue",value:function(t){return e.getTextValue(t)}},{key:"getData",value:function(e){return e.length>0?e[0].proteinChange:null}},{key:"renderPlainText",value:function(t){var n=e.getDisplayValue(t);return r.createElement("span",null,n)}},{key:"renderWithMutationStatus",value:function(t){var n=e.getDisplayValue(t),o=j.getData(t),i=r.createElement(l.a,{text:n,tooltip:r.createElement("span",null,n),className:R.a.proteinChange,maxLength:40});return o&&o.toLowerCase().indexOf("germline")>-1&&(i=r.createElement("span",null,i,r.createElement("span",{className:R.a.germline},"Germline"))),i}}],(n=null)&&L(t.prototype,n),o&&L(t,o),e}();function F(e,t){return e=r.createElement(f.c,{overlay:r.createElement("span",null,t),placement:"left"},e)}var B=n(788),V=n.n(B);function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var q=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"getDisplayValue",value:function(t){var n=e.getMapEntry(t);return n&&n.displayValue?n.displayValue:e.getTextValue(t)}},{key:"getTextValue",value:function(t){var n="",r=e.getData(t);return r&&(n=r.toString()),n}},{key:"getClassName",value:function(t){var n=e.getMapEntry(t);return n&&n.className?n.className:e.MAIN_MUTATION_TYPE_MAP.other.className}},{key:"getMapEntry",value:function(t){var n=e.getData(t);return n?e.MAIN_MUTATION_TYPE_MAP[Object(f.C)(n)]:void 0}},{key:"getData",value:function(e){return e.length>0?e[0].mutationType:null}},{key:"renderFunction",value:function(t){var n=e.getDisplayValue(t),o=e.getClassName(t),i=e.getTextValue(t),a=r.createElement("span",{className:o},n);return i.toLowerCase()!==n.toLowerCase()&&(a=F(a,i)),a}},{key:"MAIN_MUTATION_TYPE_MAP",get:function(){return{missense:{displayValue:"Missense",className:V.a.missenseMutation},inframe:{displayValue:"IF",className:V.a.inframeMutation},truncating:{displayValue:"Truncating",className:V.a.truncMutation},nonsense:{displayValue:"Nonsense",className:V.a.truncMutation},nonstop:{displayValue:"Nonstop",className:V.a.truncMutation},nonstart:{displayValue:"Nonstart",className:V.a.truncMutation},frameshift:{displayValue:"FS",className:V.a.truncMutation},frame_shift_del:{displayValue:"FS del",className:V.a.truncMutation},frame_shift_ins:{displayValue:"FS ins",className:V.a.truncMutation},in_frame_ins:{displayValue:"IF ins",className:V.a.inframeMutation},in_frame_del:{displayValue:"IF del",className:V.a.inframeMutation},splice_site:{displayValue:"Splice",className:V.a.truncMutation},fusion:{displayValue:"Fusion",className:V.a.fusion},silent:{displayValue:"Silent",className:V.a.otherMutation},other:{displayValue:"Other",className:V.a.otherMutation}}}}],(n=null)&&z(t.prototype,n),o&&z(t,o),e}(),U=n(789),H=n.n(U);function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var K=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"getDisplayValue",value:function(t){return e.getTextValue(t)}},{key:"getTextValue",value:function(t){var n="",r=e.getData(t);return r&&(n=r.toString().toUpperCase()),n}},{key:"getData",value:function(e){return e.length>0?e[0].variantType:null}},{key:"getMapEntry",value:function(t){var n=e.getData(t);return n?e.MAIN_VARIANT_TYPE_MAP[n.toUpperCase()]:void 0}},{key:"getTooltip",value:function(t){var n=e.getMapEntry(t);return n&&n.toolTip?n.toolTip:void 0}},{key:"getClassName",value:function(t){var n=e.getMapEntry(t);return n&&n.className?n.className:e.MAIN_VARIANT_TYPE_MAP.OTHER.className}},{key:"renderFunction",value:function(t){var n=e.getDisplayValue(t),o=e.getClassName(t),i=e.getTooltip(t),a=r.createElement("span",{className:o},n);return i&&(a=F(a,i)),a}},{key:"MAIN_VARIANT_TYPE_MAP",get:function(){return{SNP:{toolTip:"Single Nucleotide Polymorphism",className:H.a.variantTypeSnp},DNP:{toolTip:"Di-Nucleotide Polymorphism",className:H.a.variantTypeSnp},TNP:{toolTip:"Tri-Nucleotide Polymorphism",className:H.a.variantTypeSnp},ONP:{toolTip:"Oligo-Nucleotide Polymorphism",className:H.a.variantTypeSnp},INS:{toolTip:"Insertion",className:H.a.variantTypeIns},DEL:{toolTip:"Deletion",className:H.a.variantTypeDel},CONSOLIDATED:{className:H.a.variantTypeOther},OTHER:{className:H.a.variantTypeOther}}}}],(n=null)&&W(t.prototype,n),o&&W(t,o),e}(),$=n(629),Q=n(9),Y=n.n(Q),X=n(660),Z=n.n(X),J=n(790),ee=n.n(J),te=n(737),ne=n.n(te);function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function le(e){e.querySelector(".rc-tooltip-arrow").style.display="none"}var ue=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=ie(t).call(this,e))||"object"!==re(o)&&"function"!=typeof o?ae(r):o).tooltipContent=n.tooltipContent.bind(ae(n)),n}var o,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&se(e,t)}(t,r["Component"]),o=t,a=[{key:"download",value:function(e){return e?"impact: ".concat(e.functionalImpact,", score: ").concat(e.functionalImpactScore):"NA"}},{key:"maLink",value:function(e){var t=null;return e&&0!==(t=e.replace("getma.org","mutationassessor.org/r3")).indexOf("http://")&&(t="http://".concat(t)),t}}],(i=[{key:"render",value:function(){var e=r.createElement("span",{className:"".concat(Z.a["annotation-item-text"])});if(this.props.mutationAssessor&&null!==this.props.mutationAssessor.functionalImpact){var t=this.props.mutationAssessor;e=r.createElement("span",{className:Y()(Z.a["annotation-item-text"],ne.a["ma-".concat(t.functionalImpact)])},r.createElement("i",{className:"fa fa-circle","aria-hidden":"true"}));var n=r.createElement("div",{className:"rc-tooltip-arrow-inner"});e=r.createElement(f.c,{overlay:this.tooltipContent,placement:"right",trigger:["hover","focus"],arrowContent:n,onPopupAlign:le,destroyTooltipOnHide:!1},e)}return e}},{key:"tooltipContent",value:function(){if(this.props.mutationAssessor){var e=this.props.mutationAssessor,o=t.maLink("http://mutationassessor.org/r3/?cm=var&p=".concat(e.uniprotId,"&var=").concat(e.variant)),i=t.maLink(e.msaLink),a=t.maLink(e.pdbLink),s=e.functionalImpact?r.createElement("div",null,r.createElement("table",{className:ee.a["ma-tooltip-table"]},r.createElement("tr",null,r.createElement("td",null,"Source"),r.createElement("td",null,r.createElement("a",{href:"http://mutationassessor.org/r3"},"MutationAssessor"))),r.createElement("tr",null,r.createElement("td",null,"Impact"),r.createElement("td",null,r.createElement("span",{className:ne.a["ma-".concat(e.functionalImpact)]},e.functionalImpact))),(e.functionalImpactScore||0===e.functionalImpactScore)&&r.createElement("tr",null,r.createElement("td",null,"Score"),r.createElement("td",null,r.createElement("b",null,e.functionalImpactScore.toFixed(2)))))):null,l=o?r.createElement("div",{className:ee.a["mutation-assessor-link"]},r.createElement("a",{href:o,target:"_blank"},r.createElement("img",{height:"15",width:"19",src:n(687),className:ee.a["mutation-assessor-main-img"],alt:"Mutation Assessor"}),"Go to Mutation Assessor")):null,u=i?r.createElement("div",{className:ee.a["mutation-assessor-link"]},r.createElement("a",{href:i,target:"_blank"},r.createElement("span",{className:"".concat(ee.a["ma-icon"]," ").concat(ee.a["ma-msa-icon"])},"msa"),"Multiple Sequence Alignment")):null,c=a?r.createElement("div",{className:ee.a["mutation-assessor-link"]},r.createElement("a",{href:a,target:"_blank"},r.createElement("span",{className:"".concat(ee.a["ma-icon"]," ").concat(ee.a["ma-3d-icon"])},"3D"),"Mutation Assessor 3D View")):null;return r.createElement("span",null,s,u,c,l)}}}])&&oe(o.prototype,i),a&&oe(o,a),t}();ue.MUTATION_ASSESSOR_URL="http://mutationassessor.org/r3/";var ce=n(738),pe=n.n(ce);function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function he(e){return(he=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function me(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ye(e,t){return(ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ge(e){e.querySelector(".rc-tooltip-arrow").style.display="none"}var ve=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=he(t).call(this,e))||"object"!==de(o)&&"function"!=typeof o?me(r):o).tooltipContent=n.tooltipContent.bind(me(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}(t,r["Component"]),n=t,i=[{key:"download",value:function(e,t){return e||t?"impact: ".concat(t,", score: ").concat(e):"NA"}}],(o=[{key:"render",value:function(){var e=r.createElement("span",{className:"".concat(Z.a["annotation-item-text"])});if(this.props.siftPrediction&&this.props.siftPrediction.length>0){e=r.createElement("span",{className:Y()(Z.a["annotation-item-text"],pe.a["sift-".concat(this.props.siftPrediction)])},r.createElement("i",{className:"fa fa-circle","aria-hidden":"true"}));var t=r.createElement("div",{className:"rc-tooltip-arrow-inner"});e=r.createElement(f.c,{overlay:this.tooltipContent,placement:"right",trigger:["hover","focus"],arrowContent:t,onPopupAlign:ge,destroyTooltipOnHide:!1},e)}return e}},{key:"tooltipContent",value:function(){var e=this.props.siftPrediction?r.createElement("div",null,r.createElement("table",{className:pe.a["sift-tooltip-table"]},r.createElement("tr",null,r.createElement("td",null,"Source"),r.createElement("td",null,r.createElement("a",{href:"http://sift.bii.a-star.edu.sg/"},"SIFT"))),r.createElement("tr",null,r.createElement("td",null,"Impact"),r.createElement("td",null,r.createElement("span",{className:pe.a["sift-".concat(this.props.siftPrediction)]},this.props.siftPrediction))),(this.props.siftScore||0===this.props.siftScore)&&r.createElement("tr",null,r.createElement("td",null,"Score"),r.createElement("td",null,r.createElement("b",null,this.props.siftScore.toFixed(2)))))):null;return r.createElement("span",null,e)}}])&&fe(n.prototype,o),i&&fe(n,i),t}();ve.SIFT_URL="http://sift.bii.a-star.edu.sg/";var be=n(739),Se=n.n(be);function _e(e){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function we(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ee(e){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ce(e,t){return(Ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pe(e){e.querySelector(".rc-tooltip-arrow").style.display="none"}var xe,Te=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=Ee(t).call(this,e))||"object"!==_e(o)&&"function"!=typeof o?Oe(r):o).tooltipContent=n.tooltipContent.bind(Oe(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ce(e,t)}(t,r["Component"]),n=t,i=[{key:"download",value:function(e,t){return e||t?"impact: ".concat(t,", score: ").concat(e):"NA"}}],(o=[{key:"render",value:function(){var e=r.createElement("span",{className:"".concat(Z.a["annotation-item-text"])});if(this.props.polyPhenPrediction&&this.props.polyPhenPrediction.length>0){e=r.createElement("span",{className:Y()(Z.a["annotation-item-text"],Se.a["polyPhen2-".concat(this.props.polyPhenPrediction)])},r.createElement("i",{className:"fa fa-circle","aria-hidden":"true"}));var t=r.createElement("div",{className:"rc-tooltip-arrow-inner"});e=r.createElement(f.c,{overlay:this.tooltipContent,placement:"right",trigger:["hover","focus"],arrowContent:t,onPopupAlign:Pe,destroyTooltipOnHide:!1},e)}return e}},{key:"tooltipContent",value:function(){var e=this.props.polyPhenPrediction?r.createElement("div",null,r.createElement("table",{className:Se.a["polyPhen2-tooltip-table"]},r.createElement("tr",null,r.createElement("td",null,"Source"),r.createElement("td",null,r.createElement("a",{href:"http://genetics.bwh.harvard.edu/pph2/"},"PolyPhen-2"))),r.createElement("tr",null,r.createElement("td",null,"Impact"),r.createElement("td",null,r.createElement("span",{className:Se.a["polyPhen2-".concat(this.props.polyPhenPrediction)]},this.props.polyPhenPrediction))),(this.props.polyPhenScore||0===this.props.polyPhenScore)&&r.createElement("tr",null,r.createElement("td",null,"Score"),r.createElement("td",null,r.createElement("b",null,this.props.polyPhenScore.toFixed(2)))))):null;return r.createElement("span",null,e)}}])&&we(n.prototype,o),i&&we(n,i),t}();function ke(e){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function De(e,t,n){return t&&Ie(e.prototype,t),n&&Ie(e,n),e}function Me(e,t){return!t||"object"!==ke(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function je(e){return(je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ne(e,t){return(Ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Te.POLYPHEN2_URL="http://genetics.bwh.harvard.edu/pph2/",function(e){e[e.MUTATION_ASSESSOR=0]="MUTATION_ASSESSOR",e[e.SIFT=1]="SIFT",e[e.POLYPHEN2=2]="POLYPHEN2"}(xe||(xe={}));var Re=function(e){function t(e){var n;return Ae(this,t),(n=Me(this,je(t).call(this,e))).state={active:n.props.active},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ne(e,t)}(t,r["Component"]),De(t,[{key:"legend",value:function(){var e=this;return r.createElement("div",null,r.createElement("table",{className:"table table-striped table-border-top"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"Legend"),r.createElement("th",null,r.createElement("span",{style:{display:"inline-block",width:22},title:"Mutation Asessor",onMouseOver:function(){return e.setState({active:"mutationAssessor"})}},r.createElement("img",{height:14,width:14,src:n(687),alt:"Mutation Assessor"}))),r.createElement("th",null,r.createElement("span",{style:{display:"inline-block",width:22},title:"SIFT",onMouseOver:function(){return e.setState({active:"sift"})}},r.createElement("img",{height:14,width:14,src:n(740),alt:"SIFT"}))),r.createElement("th",null,r.createElement("span",{style:{display:"inline-block",width:22},title:"PolyPhen-2",onMouseOver:function(){return e.setState({active:"polyPhen2"})}},r.createElement("img",{height:14,width:14,src:n(741),alt:"PolyPhen-2"}))))),r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",null,r.createElement("span",{className:Y()(Z.a["annotation-item-text"],ne.a["ma-high"])},r.createElement("i",{className:"fa fa-circle","aria-hidden":"true"}))),r.createElement("td",{className:ne.a["ma-high"]},"high"),r.createElement("td",{className:pe.a["sift-deleterious"]},"deleterious"),r.createElement("td",{className:Se.a["polyPhen2-probably_damaging"]},"probably_damaging")),r.createElement("tr",null,r.createElement("td",null,r.createElement("span",{className:Y()(Z.a["annotation-item-text"],ne.a["ma-medium"])},r.createElement("i",{className:"fa fa-circle","aria-hidden":"true"}))),r.createElement("td",{className:ne.a["ma-medium"]},"medium"),r.createElement("td",null,"-"),r.createElement("td",null,"-")),r.createElement("tr",null,r.createElement("td",null,r.createElement("span",{className:Y()(Z.a["annotation-item-text"],ne.a["ma-low"])},r.createElement("i",{className:"fa fa-circle","aria-hidden":"true"}))),r.createElement("td",{className:ne.a["ma-low"]},"low"),r.createElement("td",{className:pe.a["sift-deleterious_low_confidence"]},"deleterious_low_confidence"),r.createElement("td",{className:Se.a["polyPhen2-possibly_damaging"]},"possibly_damaging")),r.createElement("tr",null,r.createElement("td",null,r.createElement("span",{className:Y()(Z.a["annotation-item-text"],ne.a["ma-neutral"])},r.createElement("i",{className:"fa fa-circle","aria-hidden":"true"}))),r.createElement("td",{className:ne.a["ma-neutral"]},"neutral"),r.createElement("td",{className:pe.a["sift-tolerated_low_confidence"]},"tolerated_low_confidence"),r.createElement("td",{className:Se.a["polyPhen2-benign"]},"benign")),r.createElement("tr",null,r.createElement("td",null,r.createElement("span",{className:Y()(Z.a["annotation-item-text"],ne.a["ma-neutral"])},r.createElement("i",{className:"fa fa-circle","aria-hidden":"true"}))),r.createElement("td",null,"-"),r.createElement("td",{className:pe.a["sift-tolerated"]},"tolerated"),r.createElement("td",null,"-")))))}},{key:"render",value:function(){return r.createElement("div",null,"mutationAssessor"===this.state.active&&t.mutationAssessorText(),"sift"===this.state.active&&t.siftText(),"polyPhen2"===this.state.active&&t.polyPhen2Text(),this.legend())}}],[{key:"mutationAssessorText",value:function(){return r.createElement("div",{style:{width:450,height:100}},r.createElement("a",{href:ue.MUTATION_ASSESSOR_URL,target:"_blank"},"Mutation Assessor")," ","predicts the functional impact of amino-acid substitutions in proteins, such as mutations discovered in cancer or missense polymorphisms. The functional impact is assessed based on evolutionary conservation of the affected amino acid in protein homologs. The method has been validated on a large set (60k) of disease associated (OMIM) and polymorphic variants.")}},{key:"siftText",value:function(){return r.createElement("div",{style:{width:450,height:100}},r.createElement("a",{href:ve.SIFT_URL,target:"_blank"},"SIFT")," ","predicts whether an amino acid substitution affects protein function based on sequence homology and the physical properties of amino acids. SIFT can be applied to naturally occurring nonsynonymous polymorphisms and laboratory-induced missense mutations.")}},{key:"polyPhen2Text",value:function(){return r.createElement("div",{style:{width:450,height:100}},r.createElement("a",{href:Te.POLYPHEN2_URL,target:"_blank"},"PolyPhen-2")," ","(Polymorphism Phenotyping v2) is a tool which predicts possible impact of an amino acid substitution on the structure and function of a human protein using straightforward physical and comparative considerations.")}}]),t}();function Le(e){e.querySelector(".rc-tooltip-arrow").style.left="10px"}var Ge=function(){function e(){Ae(this,e)}return De(e,null,[{key:"headerRender",value:function(e){var t=r.createElement("div",{className:"rc-tooltip-arrow-inner"});return r.createElement("div",null,e,r.createElement("br",null),r.createElement("div",{style:{height:14}},r.createElement(f.c,{overlay:r.createElement(Re,{active:"mutationAssessor"}),placement:"topLeft",trigger:["hover","focus"],arrowContent:t,destroyTooltipOnHide:!0,onPopupAlign:Le},r.createElement("span",{style:{display:"inline-block",width:22}},r.createElement("img",{height:14,width:14,src:n(687),alt:"Sift"}))),r.createElement(f.c,{overlay:r.createElement(Re,{active:"sift"}),placement:"topLeft",trigger:["hover","focus"],arrowContent:t,destroyTooltipOnHide:!0,onPopupAlign:Le},r.createElement("span",{style:{display:"inline-block",width:22}},r.createElement("img",{height:14,width:14,src:n(740),alt:"SIFT"}))),r.createElement(f.c,{overlay:r.createElement(Re,{active:"polyPhen2"}),placement:"topLeft",trigger:["hover","focus"],arrowContent:t,destroyTooltipOnHide:!0,onPopupAlign:Le},r.createElement("span",{style:{display:"inline-block",width:22}},r.createElement("img",{height:14,width:14,src:n(741),alt:"PolyPhen-2"})))))}},{key:"getData",value:function(t,n,r){var o=e.getDataFromCache(t,n),i=e.getDataFromCache(t,r),a=o?this.getSiftData(o.data):void 0,s=o?this.getPolyphenData(o.data):void 0;return{mutationAssessor:i?this.getMutationAssessorData(i.data):void 0,siftScore:a&&a.siftScore,siftPrediction:a&&a.siftPrediction,polyPhenScore:s&&s.polyPhenScore,polyPhenPrediction:s&&s.polyPhenPrediction}}},{key:"getSiftData",value:function(e){var t=void 0,n=void 0;return e&&!a.isEmpty(e.transcript_consequences)&&(t=e.transcript_consequences[0].sift_score,n=e.transcript_consequences[0].sift_prediction),{siftScore:t,siftPrediction:n}}},{key:"getPolyphenData",value:function(e){var t=void 0,n=void 0;return e&&!a.isEmpty(e.transcript_consequences)&&(t=e.transcript_consequences[0].polyphen_score,n=e.transcript_consequences[0].polyphen_prediction),{polyPhenScore:t,polyPhenPrediction:n}}},{key:"getMutationAssessorData",value:function(e){return e&&e.mutation_assessor?e.mutation_assessor.annotation:void 0}},{key:"renderFunction",value:function(t,n,o){var i=e.getDataFromCache(t,n),a=e.getDataFromCache(t,o);return r.createElement("div",null,e.makeFunctionalImpactViz(a,xe.MUTATION_ASSESSOR),e.makeFunctionalImpactViz(i,xe.SIFT),e.makeFunctionalImpactViz(i,xe.POLYPHEN2))}},{key:"download",value:function(t,n,r){if(n||r){var o=e.getData(t,n,r);if(o)return["MutationAssessor: ".concat(ue.download(o.mutationAssessor)),"SIFT: ".concat(ve.download(o.siftScore,o.siftPrediction)),"Polyphen-2: ".concat(Te.download(o.polyPhenScore,o.polyPhenPrediction))].join(";")}return""}},{key:"getDataFromCache",value:function(e,t){return 0!==e.length&&t?t.get(e[0]):null}},{key:"makeFunctionalImpactViz",value:function(t,n){var o=null;if(null===t)o=f.n.LOADING;else if("error"===t.status)o=f.n.ERROR;else if(null===t.data)o=f.n.NA;else{var i;switch(n){case xe.MUTATION_ASSESSOR:return i=e.getMutationAssessorData(t.data),r.createElement(ue,{mutationAssessor:i});case xe.SIFT:return i=e.getSiftData(t.data),r.createElement(ve,{siftScore:i.siftScore,siftPrediction:i.siftPrediction});case xe.POLYPHEN2:return i=e.getPolyphenData(t.data),r.createElement(Te,{polyPhenScore:i.polyPhenScore,polyPhenPrediction:i.polyPhenPrediction})}}if(null!==o)return o===f.n.LOADING?r.createElement($.Circle,{size:22,scaleEnd:.5,scaleStart:.2,color:"#aaa",className:"pull-left"}):r.createElement(f.o,{status:o})}}]),e}();function Fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Be(e){return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ze(e,t){return!t||"object"!==Be(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qe(e){return(qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ue(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&He(e,t)}function He(e,t){return(He=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var We=function(e){function t(){return Ve(this,t),ze(this,qe(t).apply(this,arguments))}return Ue(t,s["b"]),t}(),Ke=function(e){function t(e){var n;return Ve(this,t),(n=ze(this,qe(t).call(this,e))).state={},n}var n,o,i;return Ue(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=this.props,n=e.data,o=e.columns,i=e.initialSortColumn,a=e.initialSortDirection,s=e.initialItemsPerPage,l=n.length>(this.props.initialItemsPerPage||t.defaultProps.initialItemsPerPage);return r.createElement("div",{className:"cbioportal-frontend"},r.createElement(We,{data:n,columns:o||t.defaultProps.columns,initialSortColumn:i,initialSortDirection:a,initialItemsPerPage:s,showCopyDownload:!1,showColumnVisibility:!1,showFilter:!1,showPagination:l,showPaginationAtTop:!0,paginationProps:{showMoreButton:!1}}))}}])&&Fe(n.prototype,o),i&&Fe(n,i),t}();Ke.defaultProps={data:[],columns:[{name:"COSMIC ID",order:1,render:function(e){return r.createElement("span",null,r.createElement("a",{href:"http://cancer.sanger.ac.uk/cosmic/mutation/overview?id=".concat(e.cosmicMutationId),target:"_blank"},e.cosmicMutationId))},sortBy:function(e){return e.cosmicMutationId}},{name:"Protein Change",order:2,render:function(e){return r.createElement("span",null,e.proteinChange)},sortBy:function(e){return Object(A.b)(e.proteinChange)}},{name:"Occurrence",order:3,render:function(e){return r.createElement("span",null,e.count)},sortBy:function(e){return e.count}}],initialSortColumn:"Occurrence",initialSortDirection:"desc",initialItemsPerPage:10};var $e=n(791),Qe=n.n($e),Ye=n(633),Xe=n.n(Ye);function Ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Je(e){e.querySelector(".rc-tooltip-arrow").style.left="10px"}var et=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"getData",value:function(t,n){var r=null;if(t&&n){var o=t[0],i=n[o.keyword];if(i){var a=e.extractPosition(o.proteinChange);r=i.filter(function(t){var n=e.extractPosition(t.proteinChange);return a&&n&&a===n})}}return r}},{key:"extractPosition",value:function(e){var t=Object(A.k)(e);return t?t.start:null}},{key:"getSortValue",value:function(t,n){var r=e.getData(t,n),o=null;return r&&(o=r.length>0?a.reduce(a.map(r,"count"),function(e,t){return e+t},0):0),0===o&&(o=null),o}},{key:"getDownloadValue",value:function(t,n){var r=e.getSortValue(t,n);return r?"".concat(r):""}},{key:"renderFunction",value:function(t,n){var o,i=e.getData(t,n),s=-1,l="",u=null;return i&&i.length>0&&(u=function(){return r.createElement("span",{className:Qe.a["cosmic-table"]},r.createElement("b",null,s)," occurrences of ",r.createElement("b",null,i[0].keyword)," ","mutations in COSMIC",r.createElement(Ke,{data:i}))},l=(s=a.reduce(a.map(i,"count"),function(e,t){return e+t},0)).toString()),o=r.createElement("div",{className:Xe.a["integer-data"]},l),u&&(o=r.createElement(f.c,{overlay:u,placement:"topLeft",onPopupAlign:Je,trigger:["hover","focus"],destroyTooltipOnHide:!0},o)),o}}],(n=null)&&Ze(t.prototype,n),o&&Ze(t,o),e}(),tt=n(750);function nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var rt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"makeRenderFunction",value:function(e){return Object(tt.a)(function(t){var n=e.props.mutationCountCache;return n?n.get({sampleId:t[0].sampleId,studyId:t[0].studyId}):{status:"error",data:null}},function(e){return r.createElement("div",{className:Xe.a["integer-data"]},e.value)},"Mutation count not available for this sample.")}},{key:"sortBy",value:function(e,t){var n=null;if(t){var r=t.get({sampleId:e[0].sampleId,studyId:e[0].studyId});n=r&&r.data?parseInt(r.data.value):null}else n=null;return n}},{key:"download",value:function(t,n){var r=e.sortBy(t,n);return r?"".concat(r):""}}],(n=null)&&nt(t.prototype,n),o&&nt(t,o),e}(),ot=n(751),it=n(792),at=n.n(it);function st(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var lt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"getData",value:function(e){var t=null;return e.length>0&&(t=e[0].validationStatus),t}},{key:"sortValue",value:function(t){return e.getData(t)}},{key:"download",value:function(t){return e.getData(t)||""}},{key:"renderFunction",value:function(t){var n,o=e.getData(t),i=!1;if(o){var a=e.VALIDATION_STATUS_FORMAT[o.toLowerCase()];a?(n=r.createElement("span",{className:at.a[a.className]},a.text),i=!0):n=r.createElement("span",{className:at.a.other},o)}else n=r.createElement("span",null);return i&&(n=r.createElement(f.c,{overlay:r.createElement("span",null,o),placement:"right"},n)),n}},{key:"VALIDATION_STATUS_FORMAT",get:function(){var e={text:"U",className:"unknown",tooltip:"Unknown"},t={text:"V",className:"valid",tooltip:"Valid"};return{valid:t,validated:t,wildtype:{text:"W",className:"wildtype",tooltip:"Wildtype"},unknown:e,not_tested:e,"not tested":e,none:e,na:e,"n/a":e}}}],(n=null)&&st(t.prototype,n),o&&st(t,o),e}();function ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ct=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"getStudy",value:function(e,t,n){if(!t||!n)return null;var r=t[e[0].molecularProfileId];return r&&n[r.studyId]||null}},{key:"renderFunction",value:function(t,n,o){var i=e.getStudy(t,n,o);return i?r.createElement("a",{href:Object(u.B)(i.studyId),target:"_blank"},r.createElement(l.a,{text:i.name,tooltip:r.createElement("div",{style:{maxWidth:300},dangerouslySetInnerHTML:{__html:"".concat(i.name,": ").concat(i.description)}}),maxLength:16})):r.createElement("span",null)}},{key:"getTextValue",value:function(t,n,r){var o=e.getStudy(t,n,r);return o?o.name:""}},{key:"filter",value:function(t,n,r,o){var i=e.getStudy(t,r,o);return!!i&&i.name.toUpperCase().indexOf(n)>-1}}],(n=null)&&ut(t.prototype,n),o&&ut(t,o),e}(),pt=n(102);function dt(){return(dt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ht=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"sortValue",value:function(e,t,n,r,o,i,a,s,l){var u=Object(pt.N)(e?e[0]:void 0,t,n,r,o,i,a,s,l);return Object(pt.x)(u)}},{key:"download",value:function(e,t,n,r,o,i,a,s,l){var u=Object(pt.N)(e?e[0]:void 0,t,n,r,o,i,a,s,l);return["OncoKB: ".concat(Object(pt.bb)(u.oncoKbIndicator)),"CIViC: ".concat(Object(pt.B)(u.civicEntry)),"MyCancerGenome: ".concat(Object(pt.Z)(u.myCancerGenomeLinks)),"CancerHotspot: ".concat(u.isHotspot?"yes":"no"),"3DHotspot: ".concat(u.is3dHotspot?"yes":"no")].join(";")}},{key:"renderFunction",value:function(e,t){return r.createElement(pt.a,dt({mutation:e?e[0]:void 0},t))}}],(n=null)&&ft(t.prototype,n),o&&ft(t,o),e}(),mt=n(752);function yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var gt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"renderFunction",value:function(t,n){var o=e.getGenomeNexusDataFromCache(t,n);return r.createElement("div",null,r.createElement("span",null,e.getHgvscDataViz(o)))}},{key:"getGenomeNexusDataFromCache",value:function(e,t){return 0!==e.length&&t?t.get(e[0]):null}},{key:"getHgvscDataViz",value:function(t){var n=null;if(null===t)n=f.n.LOADING;else if("error"===t.status)n=f.n.ERROR;else{if(null!==t.data){var o=e.getData(t.data);return null==o?o:r.createElement("span",{style:{display:"inline-block",float:"right"}},o)}n=f.n.NA}if(null!==n)return n===f.n.LOADING?r.createElement($.Circle,{size:18,scaleEnd:.5,scaleStart:.2,color:"#aaa",className:"pull-right"}):r.createElement(f.o,{status:n})}},{key:"getData",value:function(e){return e?e.annotation_summary.transcriptConsequenceSummary.hgvsc:null}},{key:"download",value:function(t,n){var r=e.getGenomeNexusDataFromCache(t,n),o=r&&e.getData(r.data);return o||""}},{key:"getSortValue",value:function(t,n){var r=e.getGenomeNexusDataFromCache(t,n);if(r){var o=e.getData(r.data);return null==o?null:parseInt(o.split("c.")[1])}return null}}],(n=null)&&yt(t.prototype,n),o&&yt(t,o),e}(),vt=n(573),bt=n(794),St=n.n(bt);function _t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var wt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"renderFunction",value:function(t,n){return e.getHgvsgDataViz(t[0],n)}},{key:"getHgvsgDataViz",value:function(t,n){var o=e.getData(t);if(o){var i=n(o);return r.createElement(f.c,{placement:"topLeft",overlay:r.createElement("div",null,o,r.createElement("br",null),"Click to see this variant on ",r.createElement("a",{href:i,target:"_blank",rel:"noopener noreferrer"},"Genome Nexus",r.createElement("div",{className:St.a["genome-nexus-logo"]})))},r.createElement("span",{className:St.a["hgvsg-data"]},r.createElement("a",{href:i,target:"_blank",rel:"noopener noreferrer"},o,"",r.createElement("i",{className:"fa fa-external-link"}))))}return r.createElement("span",null)}},{key:"getData",value:function(e){return Object(vt.e)(e)}},{key:"download",value:function(t){var n=e.getData(t[0]);return n||""}},{key:"getSortValue",value:function(t){return e.getData(t[0])}}],(n=null)&&_t(t.prototype,n),o&&_t(t,o),e}();function Et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ot=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"renderFunction",value:function(e,t,n){return r.createElement("span",{"data-test":"gnomad-column","data-test2":e[0].sampleId},r.createElement(pt.n,{className:"",mutation:e[0],indexedVariantAnnotations:t,indexedMyVariantInfoAnnotations:n}))}},{key:"getData",value:function(e,t){return Object(A.i)(e[0],t?t.result:void 0)}},{key:"getSortValue",value:function(t,n){var r=e.getData(t,n);return Object(pt.S)(r)}},{key:"download",value:function(t,n){var r=e.getData(t,n);return Object(pt.R)(r)}}],(n=null)&&Et(t.prototype,n),o&&Et(t,o),e}();function Ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Pt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"renderFunction",value:function(e,t,n){return r.createElement("div",{"data-test":"clinvar-data"},r.createElement(pt.e,{className:Xe.a["integer-data"],mutation:e[0],indexedVariantAnnotations:t,indexedMyVariantInfoAnnotations:n}))}},{key:"getData",value:function(e,t){return Object(A.i)(e[0],t?t.result:void 0)}},{key:"download",value:function(t,n){var r=e.getData(t,n);return Object(pt.D)(r)}},{key:"getSortValue",value:function(t,n){var r=e.getData(t,n);return Object(pt.E)(r)}}],(n=null)&&Ct(t.prototype,n),o&&Ct(t,o),e}(),xt=n(8);function Tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var kt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"renderFunction",value:function(e,t,n){return r.createElement("div",{"data-test":"dbsnp-data"},r.createElement(pt.i,{className:"",mutation:e[0],indexedVariantAnnotations:t,indexedMyVariantInfoAnnotations:n}))}},{key:"getData",value:function(e,t){return Object(A.i)(e[0],t?t.result:void 0)}},{key:"download",value:function(t,n){var r=e.getData(t,n);return Object(pt.F)(r)}},{key:"getSortValue",value:function(t,n){var r=e.getData(t,n);return Object(pt.G)(r)}},{key:"filter",value:function(t,n,r){var o=e.getSortValue(t,r);return null!==o&&o.toUpperCase().includes(n)}}],(n=null)&&Tt(t.prototype,n),o&&Tt(t,o),e}();function At(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function It(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dt(e,t){return!t||"object"!==Rt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Mt(e){return(Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nt(e,t)}function Nt(e,t){return(Nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Rt(e){return(Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",function(){return Lt});var Lt,Gt=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Rt(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};!function(e){e[e.STUDY=0]="STUDY",e[e.SAMPLE_ID=1]="SAMPLE_ID",e[e.SAMPLES=2]="SAMPLES",e[e.GENE=3]="GENE",e[e.PROTEIN_CHANGE=4]="PROTEIN_CHANGE",e[e.CHROMOSOME=5]="CHROMOSOME",e[e.START_POS=6]="START_POS",e[e.END_POS=7]="END_POS",e[e.REF_ALLELE=8]="REF_ALLELE",e[e.VAR_ALLELE=9]="VAR_ALLELE",e[e.MUTATION_STATUS=10]="MUTATION_STATUS",e[e.VALIDATION_STATUS=11]="VALIDATION_STATUS",e[e.MUTATION_TYPE=12]="MUTATION_TYPE",e[e.VARIANT_TYPE=13]="VARIANT_TYPE",e[e.CENTER=14]="CENTER",e[e.TUMOR_ALLELE_FREQ=15]="TUMOR_ALLELE_FREQ",e[e.NORMAL_ALLELE_FREQ=16]="NORMAL_ALLELE_FREQ",e[e.FUNCTIONAL_IMPACT=17]="FUNCTIONAL_IMPACT",e[e.ANNOTATION=18]="ANNOTATION",e[e.HGVSG=19]="HGVSG",e[e.COSMIC=20]="COSMIC",e[e.COPY_NUM=21]="COPY_NUM",e[e.MRNA_EXPR=22]="MRNA_EXPR",e[e.COHORT=23]="COHORT",e[e.REF_READS_N=24]="REF_READS_N",e[e.VAR_READS_N=25]="VAR_READS_N",e[e.REF_READS=26]="REF_READS",e[e.VAR_READS=27]="VAR_READS",e[e.CANCER_TYPE=28]="CANCER_TYPE",e[e.NUM_MUTATIONS=29]="NUM_MUTATIONS",e[e.EXON=30]="EXON",e[e.HGVSC=31]="HGVSC",e[e.GNOMAD=32]="GNOMAD",e[e.CLINVAR=33]="CLINVAR",e[e.SELECTED=34]="SELECTED",e[e.DBSNP=35]="DBSNP",e[e.GENE_PANEL=36]="GENE_PANEL"}(Lt||(Lt={}));var Ft=function(e){function t(){return It(this,t),Dt(this,Mt(t).apply(this,arguments))}return jt(t,s["b"]),t}();function Bt(e,t,n){var o=Vt(e,t);return r.createElement("div",{className:Y()(n?Xe.a["integer-data"]:void 0)},o)}function Vt(e,t){var n="";return e.length>0&&e[0].hasOwnProperty(t)&&(n=e[0][t]),n}function zt(e,t,n){return e.length>0&&e.reduce(function(e,r){var o=r[t];return o?e||o.toUpperCase().includes(n):e},!1)}var qt=function(e){function t(e){var n;return It(this,t),(n=Dt(this,Mt(t).call(this,e))).table=null,n._columns={},n.generateColumns(),n}var n,o,i;return jt(t,r["Component"]),n=t,(o=[{key:"tableRef",value:function(e){this.table=e}},{key:"resolveTumorType",value:function(e){if(this.props.uniqueSampleKeyToTumorType)return this.props.uniqueSampleKeyToTumorType[e.uniqueSampleKey];if(this.props.studyIdToStudy){var t=this.props.studyIdToStudy[e.studyId];if("mixed"!==t.cancerTypeId)return t.cancerType.name}return"Unknown"}},{key:"generateColumns",value:function(){var e=this;this._columns={},this._columns[Lt.STUDY]={name:"Study",render:function(t){return ct.renderFunction(t,e.props.molecularProfileIdToMolecularProfile,e.props.studyIdToStudy)},download:function(t){return ct.getTextValue(t,e.props.molecularProfileIdToMolecularProfile,e.props.studyIdToStudy)},sortBy:function(t){return ct.getTextValue(t,e.props.molecularProfileIdToMolecularProfile,e.props.studyIdToStudy)},filter:function(t,n,r){return ct.filter(t,r,e.props.molecularProfileIdToMolecularProfile,e.props.studyIdToStudy)},visible:!1},this._columns[Lt.SAMPLE_ID]={name:"Sample ID",render:function(t){return p.renderFunction(t,e.props.molecularProfileIdToMolecularProfile)},download:p.getTextValue,sortBy:p.getTextValue,filter:function(e,t,n){return zt(e,"sampleId",n)},visible:!0},this._columns[Lt.TUMOR_ALLELE_FREQ]={name:"Allele Freq (T)",render:d.a.renderFunction,headerRender:function(e){return r.createElement("span",{style:{display:"inline-block",maxWidth:55}},e)},download:d.a.getTextValue,sortBy:d.a.getSortValue,tooltip:r.createElement("span",null,"Variant allele frequency in the tumor sample"),visible:!0},this._columns[Lt.NORMAL_ALLELE_FREQ]={name:"Allele Freq (N)",render:m.renderFunction,headerRender:function(e){return r.createElement("span",{style:{display:"inline-block",maxWidth:55}},e)},download:m.getTextValue,sortBy:m.getSortValue,tooltip:r.createElement("span",null,"Variant allele frequency in the normal sample"),visible:!1},this._columns[Lt.MRNA_EXPR]={name:"mRNA Expr.",render:function(t){return e.props.mrnaExprRankCache?y.a.renderFunction(t,e.props.mrnaExprRankCache):r.createElement("span",null)}},this._columns[Lt.COHORT]={name:"Cohort",render:function(t){return e.props.variantCountCache?w.renderFunction(t,e.props.mutSigData,e.props.variantCountCache):r.createElement("span",null)},sortBy:function(t){var n=e.props.variantCountCache;return n?w.getSortValue(t,n):0},tooltip:r.createElement("span",null,"Mutation frequency in cohort"),defaultSortDirection:"desc"},this._columns[Lt.COPY_NUM]={name:"Copy #",render:function(t){return e.props.discreteCNACache&&e.props.molecularProfileIdToMolecularProfile?O.renderFunction(t,e.props.molecularProfileIdToMolecularProfile,e.props.discreteCNACache):r.createElement("span",null)},sortBy:function(t){return e.props.discreteCNACache&&e.props.molecularProfileIdToMolecularProfile?O.getSortValue(t,e.props.molecularProfileIdToMolecularProfile,e.props.discreteCNACache):0},download:function(t){return e.props.discreteCNACache&&e.props.molecularProfileIdToMolecularProfile?O.getTextValue(t,e.props.molecularProfileIdToMolecularProfile,e.props.discreteCNACache):""},filter:function(t,n){return!(!e.props.discreteCNACache||!e.props.molecularProfileIdToMolecularProfile)&&O.filter(t,e.props.molecularProfileIdToMolecularProfile,e.props.discreteCNACache,n)},visible:O.isVisible(this.props.discreteCNACache)},this._columns[Lt.REF_READS_N]={name:"Ref Reads (Normal)",render:function(e){return C.a.renderFunction(e,[e[0].sampleId],"normalRefCount")},download:function(e){return C.a.getTextValue(e,[e[0].sampleId],"normalRefCount")},sortBy:function(e){return e.map(function(e){return e.normalRefCount})},visible:!1,align:"right"},this._columns[Lt.VAR_READS_N]={name:"Variant Reads (Normal)",render:function(e){return C.a.renderFunction(e,[e[0].sampleId],"normalAltCount")},download:function(e){return C.a.getTextValue(e,[e[0].sampleId],"normalAltCount")},sortBy:function(e){return e.map(function(e){return e.normalAltCount})},visible:!1,align:"right"},this._columns[Lt.REF_READS]={name:"Ref Reads",render:function(e){return C.a.renderFunction(e,[e[0].sampleId],"tumorRefCount")},download:function(e){return C.a.getTextValue(e,[e[0].sampleId],"tumorRefCount")},sortBy:function(e){return e.map(function(e){return e.tumorRefCount})},visible:!1,align:"right"},this._columns[Lt.VAR_READS]={name:"Variant Reads",render:function(e){return C.a.renderFunction(e,[e[0].sampleId],"tumorAltCount")},download:function(e){return C.a.getTextValue(e,[e[0].sampleId],"tumorAltCount")},sortBy:function(e){return e.map(function(e){return e.tumorAltCount})},visible:!1,align:"right"},this._columns[Lt.START_POS]={name:"Start Pos",render:function(e){return Bt(e,"startPosition",!0)},download:function(e){return Vt(e,"startPosition")},sortBy:function(e){return e.map(function(e){return e.startPosition})},visible:!1,align:"right"},this._columns[Lt.END_POS]={name:"End Pos",render:function(e){return Bt(e,"endPosition",!0)},download:function(e){return Vt(e,"endPosition")},sortBy:function(e){return e.map(function(e){return e.endPosition})},visible:!1,align:"right"},this._columns[Lt.REF_ALLELE]={name:"Ref",render:function(e){return Bt(e,"referenceAllele")},download:function(e){return Vt(e,"referenceAllele")},sortBy:function(e){return e.map(function(e){return e.referenceAllele})},visible:!1},this._columns[Lt.VAR_ALLELE]={name:"Var",render:function(e){return Bt(e,"variantAllele")},download:function(e){return Vt(e,"variantAllele")},sortBy:function(e){return e.map(function(e){return e.variantAllele})},visible:!1},this._columns[Lt.MUTATION_STATUS]={name:"MS",tooltip:r.createElement("span",null,"Mutation Status"),render:j.renderFunction,download:j.download,sortBy:j.sortValue,filter:function(e,t,n){return zt(e,"mutationStatus",n)},visible:!1},this._columns[Lt.VALIDATION_STATUS]={name:"VS",tooltip:r.createElement("span",null,"Validation Status"),render:lt.renderFunction,download:lt.download,sortBy:lt.sortValue,filter:function(e,t,n){return zt(e,"validationStatus",n)},visible:!1},this._columns[Lt.CENTER]={name:"Center",render:function(e){return Bt(e,"center")},download:function(e){return Vt(e,"center")},sortBy:function(e){return e.map(function(e){return e.center})},filter:function(e,t,n){return zt(e,"center",n)},visible:!1},this._columns[Lt.GENE]={name:"Gene",render:function(e){return x.renderFunction(e)},download:function(e){return x.getTextValue(e)},sortBy:function(e){return x.getSortValue(e)},filter:function(e,t,n){return x.getTextValue(e).toUpperCase().includes(n)}},this._columns[Lt.CHROMOSOME]={name:"Chromosome",render:function(e){return r.createElement("div",{className:Xe.a["integer-data"]},k.getData(e))},download:function(e){return k.getData(e)||""},sortBy:function(e){return k.getSortValue(e)},filter:function(e,t,n){return(k.getData(e)+"").toUpperCase().includes(n)},visible:!1,align:"right"},this._columns[Lt.PROTEIN_CHANGE]={name:"Protein Change",render:G.renderWithMutationStatus,download:G.getTextValue,sortBy:function(e){return G.getSortValue(e)},filter:G.getFilterValue},this._columns[Lt.MUTATION_TYPE]={name:"Mutation Type",render:q.renderFunction,download:q.getTextValue,sortBy:function(e){return q.getDisplayValue(e)},filter:function(e,t,n){return q.getDisplayValue(e).toUpperCase().includes(n)}},this._columns[Lt.VARIANT_TYPE]={name:"Variant Type",render:K.renderFunction,download:K.getTextValue,sortBy:function(e){return K.getDisplayValue(e)},filter:function(e,t,n){return K.getDisplayValue(e).toUpperCase().includes(n)},visible:!1},this._columns[Lt.FUNCTIONAL_IMPACT]={name:"Functional Impact",render:function(t){return e.props.genomeNexusCache||e.props.genomeNexusMutationAssessorCache?Ge.renderFunction(t,e.props.genomeNexusCache,e.props.genomeNexusMutationAssessorCache):r.createElement("span",null)},download:function(t){return Ge.download(t,e.props.genomeNexusCache,e.props.genomeNexusMutationAssessorCache)},headerRender:Ge.headerRender,visible:!1,shouldExclude:function(){return!e.props.enableFunctionalImpact}},this._columns[Lt.COSMIC]={name:"COSMIC",render:function(t){return et.renderFunction(t,e.props.cosmicData)},sortBy:function(t){return et.getSortValue(t,e.props.cosmicData)},download:function(t){return et.getDownloadValue(t,e.props.cosmicData)},tooltip:r.createElement("span",null,"COSMIC occurrences"),defaultSortDirection:"desc",align:"right"},this._columns[Lt.ANNOTATION]={name:"Annotation",render:function(t){return ht.renderFunction(t,{hotspotData:e.props.hotspotData,myCancerGenomeData:e.props.myCancerGenomeData,oncoKbData:e.props.oncoKbData,oncoKbCancerGenes:e.props.oncoKbCancerGenes,usingPublicOncoKbInstance:e.props.usingPublicOncoKbInstance,pubMedCache:e.props.pubMedCache,civicGenes:e.props.civicGenes,civicVariants:e.props.civicVariants,enableCivic:e.props.enableCivic,enableOncoKb:e.props.enableOncoKb,enableMyCancerGenome:e.props.enableMyCancerGenome,enableHotspot:e.props.enableHotspot,userEmailAddress:e.props.userEmailAddress,resolveTumorType:e.resolveTumorType})},filter:function(t,n,r){var o=!1;switch(r){case"HOTSPOT":o=Object(pt.N)(t?t[0]:void 0,e.props.oncoKbCancerGenes,e.props.hotspotData,e.props.myCancerGenomeData,e.props.oncoKbData,e.props.usingPublicOncoKbInstance,e.props.civicGenes,e.props.civicVariants,e.resolveTumorType).isHotspot;break;case"ONCOGENIC":if(e.props.oncoKbData&&e.props.oncoKbData.result&&!(e.props.oncoKbData.result instanceof Error)&&e.props.oncoKbData.result.indicatorMap){var i=Object(f.A)(t[0].entrezGeneId,null,t[0].proteinChange,t[0].mutationType),a=e.props.oncoKbData.result.indicatorMap[i];a&&(o=a.oncogenic.toLowerCase().trim().includes("oncogenic"))}}return o},download:function(t){return ht.download(t,e.props.oncoKbCancerGenes,e.props.hotspotData,e.props.myCancerGenomeData,e.props.oncoKbData,e.props.usingPublicOncoKbInstance,e.props.civicGenes,e.props.civicVariants,e.resolveTumorType)},sortBy:function(t){return ht.sortValue(t,e.props.oncoKbCancerGenes,e.props.hotspotData,e.props.myCancerGenomeData,e.props.oncoKbData,e.props.usingPublicOncoKbInstance,e.props.civicGenes,e.props.civicVariants,e.resolveTumorType)}},this._columns[Lt.HGVSG]={name:"HGVSg",render:function(t){return wt.renderFunction(t,e.props.generateGenomeNexusHgvsgUrl)},download:function(e){return wt.download(e)},sortBy:function(e){return wt.getSortValue(e)},visible:!1,align:"left"},this._columns[Lt.CANCER_TYPE]={name:"Cancer Type",render:function(t){return ot.a.render(t,e.props.uniqueSampleKeyToTumorType)},download:function(t){return ot.a.download(t,e.props.uniqueSampleKeyToTumorType)},sortBy:function(t){return ot.a.sortBy(t,e.props.uniqueSampleKeyToTumorType)},filter:function(t,n,r){return ot.a.filter(t,r,e.props.uniqueSampleKeyToTumorType)},tooltip:r.createElement("span",null,"Cancer Type")},this._columns[Lt.NUM_MUTATIONS]={name:"# Mut in Sample",render:rt.makeRenderFunction(this),headerRender:function(e){return r.createElement("span",{style:{display:"inline-block",maxWidth:55}},e)},sortBy:function(t){return rt.sortBy(t,e.props.mutationCountCache)},download:function(t){return rt.download(t,e.props.mutationCountCache)},tooltip:r.createElement("span",null,"Total number of nonsynonymous mutations in the sample"),align:"right"},this._columns[Lt.EXON]={name:"Exon",render:function(t){return e.props.genomeNexusCache?mt.a.renderFunction(t,e.props.genomeNexusCache):r.createElement("span",null)},download:function(t){return mt.a.download(t,e.props.genomeNexusCache)},sortBy:function(t){return mt.a.getSortValue(t,e.props.genomeNexusCache)},visible:!1,align:"right"},this._columns[Lt.HGVSC]={name:"HGVSc",render:function(t){return e.props.genomeNexusCache?gt.renderFunction(t,e.props.genomeNexusCache):r.createElement("span",null)},download:function(t){return gt.download(t,e.props.genomeNexusCache)},sortBy:function(t){return gt.getSortValue(t,e.props.genomeNexusCache)},visible:!1,align:"right"},this._columns[Lt.GNOMAD]={name:"gnomAD",render:function(t){return Ot.renderFunction(t,e.props.indexedVariantAnnotations,e.props.indexedMyVariantInfoAnnotations)},sortBy:function(t){return Ot.getSortValue(t,e.props.indexedMyVariantInfoAnnotations)},download:function(t){return Ot.download(t,e.props.indexedMyVariantInfoAnnotations)},tooltip:r.createElement("span",null,r.createElement("a",{href:"https://gnomad.broadinstitute.org/"},"gnomAD")," ","population allele frequencies. Overall population allele frequency is shown. Hover over a frequency to see the frequency for each specific population."),defaultSortDirection:"desc",visible:!1,align:"left"},this._columns[Lt.CLINVAR]={name:"ClinVar ID",render:function(t){return Pt.renderFunction(t,e.props.indexedVariantAnnotations,e.props.indexedMyVariantInfoAnnotations)},sortBy:function(t){return Pt.getSortValue(t,e.props.indexedMyVariantInfoAnnotations)},download:function(t){return Pt.download(t,e.props.indexedMyVariantInfoAnnotations)},tooltip:r.createElement("span",null,r.createElement("a",{href:"https://www.ncbi.nlm.nih.gov/clinvar/",target:"_blank"},"ClinVar"),"aggregates information about genomic variation and its relationship to human health."),defaultSortDirection:"desc",visible:!1,align:"right"},this._columns[Lt.DBSNP]={name:"dbSNP",render:function(t){return kt.renderFunction(t,e.props.indexedVariantAnnotations,e.props.indexedMyVariantInfoAnnotations)},sortBy:function(t){return kt.getSortValue(t,e.props.indexedMyVariantInfoAnnotations)},download:function(t){return kt.download(t,e.props.indexedMyVariantInfoAnnotations)},filter:function(t,n,r){return kt.filter(t,r,e.props.indexedMyVariantInfoAnnotations)},tooltip:r.createElement("span",{style:{maxWidth:370,display:"block",textAlign:"left"}},"The Single Nucleotide Polymorphism Database (",r.createElement("a",{href:"https://www.ncbi.nlm.nih.gov/snp/",target:"_blank"},"dbSNP"),") is a free public archive for genetic variation within and across different species.",r.createElement("br",null),"NOTE: Currently only SNPs, single base deletions and insertions are supported."),defaultSortDirection:"desc",visible:!1,align:"right"}}},{key:"render",value:function(){return r.createElement(Ft,{ref:this.tableRef,columns:this.columns,data:this.props.data,dataStore:this.props.dataStore,downloadDataFetcher:this.props.downloadDataFetcher,initialItemsPerPage:this.props.initialItemsPerPage,initialSortColumn:this.props.initialSortColumn,initialSortDirection:this.props.initialSortDirection,itemsLabel:this.props.itemsLabel,itemsLabelPlural:this.props.itemsLabelPlural,paginationProps:this.props.paginationProps,showCountHeader:this.props.showCountHeader,columnVisibility:this.props.columnVisibility,columnVisibilityProps:this.props.columnVisibilityProps,onRowClick:this.props.onRowClick,onRowMouseEnter:this.props.onRowMouseEnter,onRowMouseLeave:this.props.onRowMouseLeave})}},{key:"orderedColumns",get:function(){var e=this,t=this.props.columns||[];return a.sortBy(t,function(t){var n=-1;return e._columns[t]&&e._columns[t].order&&(n=e._columns[t].order),n})}},{key:"columns",get:function(){var e=this;return this.orderedColumns.reduce(function(t,n){var r=e._columns[n];return!r||r.shouldExclude&&r.shouldExclude()||t.push(r),t},[])}}])&&At(n.prototype,o),i&&At(n,i),t}();qt.defaultProps={initialItemsPerPage:25,showCountHeader:!0,paginationProps:{itemsPerPageOptions:[25,50,100]},initialSortColumn:"Annotation",initialSortDirection:"desc",itemsLabel:"Mutation",itemsLabelPlural:"Mutations",enableOncoKb:!0,enableMyCancerGenome:!0,enableHotspot:!0,enableCivic:!1},Gt([i.observable],qt.prototype,"_columns",void 0),Gt([i.observable.ref],qt.prototype,"table",void 0),Gt([xt.default],qt.prototype,"tableRef",null),Gt([xt.default],qt.prototype,"resolveTumorType",null),Gt([i.computed],qt.prototype,"orderedColumns",null),Gt([i.computed],qt.prototype,"columns",null),qt=Gt([o.observer],qt);t.b=qt},function(e,t,n){"use strict";var r=n(0),o=n.n(r),i=n(591),a=n.n(i),s=n(7),l=n(937),u=n(648),c=n(4),p=n(626),d=n.n(p),f=n(594),h=n(3),m=n(650),y=n(6);function g(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var E=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":w(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},O=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=b(this,S(t).apply(this,arguments))).ProfileToggle=function(t){var n=t.profile,o=t.type,i=t.label,s=t.checked,l=t.isGroupToggle;return r.createElement("label",null,r.createElement("input",{type:o,checked:s,onChange:function(t){return e.store.selectMolecularProfile(n,t.target.checked)},"data-test":n.molecularAlterationType}),r.createElement("span",{className:l?a.a.groupName:a.a.profileName},i),!l&&r.createElement(h.c,{mouseEnterDelay:0,placement:"right",overlay:r.createElement("div",{className:a.a.tooltip},n.description)},r.createElement(d.a,{className:a.a.infoIcon,name:"question-circle"})))},e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,f["d"]),n=t,(o=[{key:"render",value:function(){return 1!==this.store.selectableSelectedStudyIds.length?null:r.createElement(u.b,{padded:!0,className:a.a.MolecularProfileSelector},r.createElement(m.a,{className:"sectionLabel",promises:[this.store.molecularProfiles]},"Select Genomic Profiles:"),r.createElement("div",{className:a.a.group,"data-test":"molecularProfileSelector"},this.renderGroup("MUTATION_EXTENDED","Mutation"),this.renderGroup("COPY_NUMBER_ALTERATION","Copy Number"),this.showGSVA&&this.renderGroup("GENESET_SCORE","GSVA scores"),this.renderGroup("MRNA_EXPRESSION","mRNA Expression"),this.renderGroup("METHYLATION","DNA Methylation"),this.renderGroup("METHYLATION_BINARY","DNA Methylation"),this.renderGroup("PROTEIN_LEVEL","Protein/phosphoprotein level"),!(!this.store.molecularProfiles.isComplete||this.store.molecularProfiles.result.length)&&r.createElement("strong",null,"No Genomic Profiles available for this Cancer Study")))}},{key:"renderGroup",value:function(e,t){var n=this,o=this.store.getFilteredProfiles(e);if(!o.length)return null;var i=o.map(function(e){return e.molecularProfileId}),s=c.intersection(this.store.selectedProfileIds,i).length>0,l=[];o.length>1&&!this.store.forDownloadTab&&l.push(r.createElement(this.ProfileToggle,{key:"altTypeCheckbox:"+e,profile:o[0],type:"checkbox",label:"".concat(t,". Select one of the profiles below:"),checked:s,isGroupToggle:!0}));var u=o.map(function(e){return r.createElement(n.ProfileToggle,{key:"profile:"+e.molecularProfileId,profile:e,type:n.store.forDownloadTab||o.length>1?"radio":"checkbox",label:e.name,checked:c.includes(n.store.selectedProfileIds,e.molecularProfileId),isGroupToggle:!1})});return this.store.forDownloadTab||1==o.length?l.push.apply(l,g(u)):l.push(r.createElement("div",{key:"group:"+e,className:a.a.group},u)),this.store.forDownloadTab?l:(s&&"MRNA_EXPRESSION"==e&&l.push(r.createElement("div",{key:l.length,className:a.a.zScore},"Enter a z-score threshold"," ",r.createElement("span",{dangerouslySetInnerHTML:{__html:["&","plusmn;"].join("")}}),r.createElement("input",{type:"text",value:this.store.zScoreThreshold,onChange:function(e){n.store.zScoreThreshold=e.target.value}}))),s&&"PROTEIN_LEVEL"==e&&l.push(r.createElement("div",{key:l.length,className:a.a.zScore},"Enter a z-score threshold"," ",r.createElement("span",{dangerouslySetInnerHTML:{__html:["&","plusmn;"].join("")}}),r.createElement("input",{type:"text",value:this.store.rppaScoreThreshold,onChange:function(e){n.store.rppaScoreThreshold=e.target.value}}))),l)}},{key:"showGSVA",get:function(){return y.b.serverConfig.skin_show_gsva}}])&&v(n.prototype,o),i&&v(n,i),t}(),C=O=E([s.observer],O),P=n(101);function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var D=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":I(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},M=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),T(this,k(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,f["d"]),n=t,(o=[{key:"render",value:function(){if(!this.store.isVirtualStudyQuery)return null;var e=[];return e.push(r.createElement(P.a,{key:"loading",isLoading:this.store.profileAvailability.isPending})),this.store.profileAvailability.isError?e.push(r.createElement("span",{key:"error"},"Error loading profiles for selected studies.")):this.store.profileAvailability.isComplete&&(e=e.concat(function(e,t){var n=[];e.mutation&&n.push(r.createElement(N,{key:"M",label:"Mutation",state:"mutation",store:t,dataTest:"M"}));e.cna&&n.push(r.createElement(N,{key:"C",label:"Copy number alterations",state:"cna",store:t,dataTest:"C"}));return n}(this.store.profileAvailability.result,this.store))),r.createElement(u.b,{padded:!0,className:a.a.DataTypePrioritySelector,"data-test":"dataTypePrioritySelector"},r.createElement(m.a,{className:"sectionLabel"},"Select Molecular Profiles:"),r.createElement(u.b,null,e))}}])&&x(n.prototype,o),i&&x(n,i),t}(),j=M=D([s.observer],M),N=Object(s.observer)(function(e){return r.createElement("label",{className:a.a.DataTypePriorityLabel},r.createElement("input",{type:"checkbox",checked:e.store.dataTypePriority[e.state]||!1,onChange:function(t){e.store.dataTypePriority[e.state]=t.currentTarget.checked},"data-test":e.dataTest}),e.label)});var R=n(56),L=n(2),G=[{id:"Prostate Cancer: AR Signaling",genes:["SOX9","RAN","TNK2","EP300","PXN","NCOA2","AR","NRIP1","NCOR1","NCOR2"]},{id:"Prostate Cancer: AR and steroid synthesis enzymes",genes:["AKR1C3","AR","CYB5A","CYP11A1","CYP11B1","CYP11B2","CYP17A1","CYP19A1","CYP21A2","HSD17B1","HSD17B10","HSD17B11","HSD17B12","HSD17B13","HSD17B14","HSD17B2","HSD17B3","HSD17B4","HSD17B6","HSD17B7","HSD17B8","HSD3B1","HSD3B2","HSD3B7","RDH5","SHBG","SRD5A1","SRD5A2","SRD5A3","STAR"]},{id:"Prostate Cancer: Steroid inactivating genes",genes:["AKR1C1","AKR1C2","AKR1C4","CYP3A4","CYP3A43","CYP3A5","CYP3A7","UGT2B15","UGT2B17","UGT2B7"]},{id:"Prostate Cancer: Down-regulated by androgen",genes:["BCHE","CDK8","CTBP1","ACKR3","DDC","DPH1","FN1","HES6","MMP16","MYC","PEG3","PIK3R3","PRKD1","SCNN1A","SDC4","SERPINI1","SLC29A1","ST7","TULP4"]},{id:"Glioblastoma: TP53 Pathway",genes:["CDKN2A","MDM2","MDM4","TP53"]},{id:"Glioblastoma: RTK/Ras/PI3K/AKT Signaling",genes:["EGFR","ERBB2","PDGFRA","MET","KRAS","NRAS","HRAS","NF1","SPRY2","FOXO1","FOXO3","AKT1","AKT2","AKT3","PIK3R1","PIK3CA","PTEN"]},{id:"Glioblastoma: RB Pathway",genes:["CDKN2A","CDKN2B","CDKN2C","CDK4","CDK6","CCND2","RB1"]},{id:"Ovarian Cancer: Oncogenes associated with epithelial ovarian cancer",genes:["RAB25","MECOM","EIF5A2","PRKCI","PIK3CA","KIT","FGF1","MYC","EGFR","NOTCH3","KRAS","AKT1","ERBB2","PIK3R1","CCNE1","AKT2","AURKA"]},{id:"Ovarian Cancer: Putative tumor-suppressor genes in epithelial ovarian cancer",genes:["DIRAS3","RASSF1","DLEC1","SPARC","DAB2","PLAGL1","RPS6KA2","PTEN","OPCML","BRCA2","ARL11","WWOX","TP53","DPH1","BRCA1","PEG3"]},{id:"General: Cell Cycle Control",genes:["RB1","RBL1","RBL2","CCNA1","CCNB1","CDK1","CCNE1","CDK2","CDC25A","CCND1","CDK4","CDK6","CCND2","CDKN2A","CDKN2B","MYC","CDKN1A","CDKN1B","E2F1","E2F2","E2F3","E2F4","E2F5","E2F6","E2F7","E2F8","SRC","JAK1","JAK2","STAT1","STAT2","STAT3","STAT5A","STAT5B"]},{id:"General: p53 signaling",genes:["TP53","MDM2","MDM4","CDKN2A","CDKN2B","TP53BP1"]},{id:"General: Notch signaling",genes:["ADAM10","ADAM17","APH1A","APH1B","ARRDC1","CIR1","CTBP1","CTBP2","CUL1","DLL1","DLL3","DLL4","DTX1","DTX2","DTX3","DTX3L","DTX4","EP300","FBXW7","HDAC1","HDAC2","HES1","HES5","HEYL","ITCH","JAG1","JAG2","KDM5A","LFNG","MAML1","MAML2","MAML3","MFNG","NCOR2","NCSTN","NOTCH1","NOTCH2","NOTCH3","NOTCH4","NRARP","NUMB","NUMBL","PSEN1","PSEN2","PSENEN","RBPJ","RBPJL","RFNG","SNW1","SPEN","HES2","HES4","HES7","HEY1","HEY2"]},{id:"General: DNA Damage Response",genes:["CHEK1","CHEK2","RAD51","BRCA1","BRCA2","MLH1","MSH2","ATM","ATR","MDC1","PARP1","FANCF"]},{id:"General: Other growth / proliferation signaling",genes:["CSF1","CSF1R","IGF1","IGF1R","FGF1","FGFR1","AURKA","DLEC1","PLAGL1","OPCML","DPH1"]},{id:"General: Survival / cell death regulation signaling",genes:["NFKB1","NFKB2","CHUK","DIRAS3","FAS","HLA-G","BAD","BCL2","BCL2L1","APAF1","CASP9","CASP8","CASP10","CASP3","CASP6","CASP7","GSK3B","ARL11","WWOX","PEG3","TGFB1","TGFBR1","TGFBR2"]},{id:"General: Telomere maintenance",genes:["TERC","TERT"]},{id:"General: RTK signaling family",genes:["EGFR","ERBB2","ERBB3","ERBB4","PDGFA","PDGFB","PDGFRA","PDGFRB","KIT","FGF1","FGFR1","IGF1","IGF1R","VEGFA","VEGFB","KDR"]},{id:"General: PI3K-AKT-mTOR signaling",genes:["PIK3CA","PIK3R1","PIK3R2","PTEN","PDPK1","AKT1","AKT2","FOXO1","FOXO3","MTOR","RICTOR","TSC1","TSC2","RHEB","AKT1S1","RPTOR","MLST8"]},{id:"General: Ras-Raf-MEK-Erk/JNK signaling",genes:["KRAS","HRAS","BRAF","RAF1","MAP3K1","MAP3K2","MAP3K3","MAP3K4","MAP3K5","MAP2K1","MAP2K2","MAP2K3","MAP2K4","MAP2K5","MAPK1","MAPK3","MAPK4","MAPK6","MAPK7","MAPK8","MAPK9","MAPK12","MAPK14","DAB2","RASSF1","RAB25"]},{id:"General: Regulation of ribosomal protein synthesis and cell growth",genes:["RPS6KA1","RPS6KA2","RPS6KB1","RPS6KB2","EIF5A2","EIF4E","EIF4EBP1","RPS6","HIF1A"]},{id:"General: Angiogenesis",genes:["VEGFA","VEGFB","KDR","CXCL8","CXCR1","CXCR2"]},{id:"General: Folate transport",genes:["SLC19A1","FOLR1","FOLR2","FOLR3","IZUMO1R"]},{id:"General: Invasion and metastasis",genes:["MMP1","MMP2","MMP3","MMP7","MMP9","MMP10","MMP11","MMP12","MMP13","MMP14","MMP15","MMP16","MMP17","MMP19","MMP21","MMP23B","MMP24","MMP25","MMP26","MMP27","MMP28","ITGB3","ITGAV","PTK2","CDH1","SPARC","WFDC2"]},{id:"General: TGF- Pathway",genes:["TGFB1","TGFB2","TGFB3","TGFBR1","TGFBR2","TGFBR3","BMP2","BMP3","BMP4","BMP5","BMP6","BMP7","GDF2","BMP10","BMP15","BMPR1A","BMPR1B","BMPR2","ACVR1","ACVR1B","ACVR1C","ACVR2A","ACVR2B","ACVRL1","Nodal","GDF1","GDF11","INHA","INHBA","INHBB","INHBC","INHBE","SMAD2","SMAD3","SMAD1","SMAD5","SMAD4","SMAD9","SMAD6","SMAD7","SPTBN1","TGFBRAP1","ZFYVE9"]}],F=n(9),B=n.n(F),V=n(11),z=n.n(V),q=n(572);n(956),n(957);function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e,t){return!t||"object"!==$(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Q=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":$(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Y=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},X=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=H(this,W(t).call(this,e))).isLoading=!0,n.map_geneSets_selected=new L.ObservableMap,n.map_geneSets_selected.replace(e.initialSelection.map(function(e){return[e,!0]})),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(t,o.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){var e=this;this.promisedTree=this.initTree(this.tree),this.promisedTree.then(function(t){return e.isLoading=!1,t})}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.scoreThreshold===e.scoreThreshold&&this.props.pvalueThreshold===e.pvalueThreshold&&this.props.percentile===e.percentile||(this.promisedTree=this.promisedTree.then(function(e){return t.isLoading=!0,t.replaceTree(e)}).then(function(e){return t.isLoading=!1,e})),this.props.searchValue!==e.searchValue&&(this.promisedTree=this.promisedTree.then(function(e){return t.searchTree(e,t.props.searchValue)}))}},{key:"transformHierarchyData",value:function(e){var t=e,n=[],r=0,o=!0,i=!1,a=void 0;try{for(var s,l=t[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var u=s.value,p=u.nodeName,d=u.parentNodeName?u.parentNodeName:"#";if(n.push({id:p,parent:d,text:p,li_attr:{name:p},geneset:!1,state:{opened:!0,selected:!1}}),c.has(u,"genesets")){var f=!0,h=!1,m=void 0;try{for(var y,g=u.genesets[Symbol.iterator]();!(f=(y=g.next()).done);f=!0){var v=y.value,b=r++,S=v.genesetId,_=v.description,w=v.representativeScore,E=v.representativePvalue,O=v.refLink,C="",P=S+'<span style="font-weight:normal;font-style:italic;"> '+(C=(C=C+"score = "+w.toFixed(2))+", p-value = "+(E=E<.005?E.toExponential(0):E.toFixed(2)))+"</span>";n.push({id:b.toString(),parent:p,text:P,state:{selected:!1},li_attr:{name:S},description:_,representativeScore:w,representativePvalue:E,refLink:O,geneset:!0})}}catch(e){h=!0,m=e}finally{try{f||null==g.return||g.return()}finally{if(h)throw m}}}}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}return n}},{key:"initTree",value:function(e){return Y(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(q.T)(this.props.gsvaProfile,this.props.percentile,this.props.scoreThreshold,this.props.pvalueThreshold,this.props.sampleListId);case 2:return n=t.sent,z()(e).jstree({search:{show_only_matches:!0,show_only_matches_children:!0},checkbox:{cascade_to_disabled:!1,cascade_to_hidden:!1},core:{themes:{icons:!1},check_callback:!0,data:this.transformHierarchyData(n)},plugins:["checkbox","search"]}),t.abrupt("return",e);case 5:case"end":return t.stop()}},t,this)}))}},{key:"destroyTree",value:function(e){z()(e).jstree(!0).destroy()}},{key:"replaceTree",value:function(e){return Y(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.destroyTree(e),t.next=3,this.initTree(e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t,this)}))}},{key:"submitGeneSets",value:function(e){if(e){var t=z()(e).jstree("get_selected",!0),n=!0,r=!1,o=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;s.original.geneset&&this.map_geneSets_selected.set(s.original.description,!0)}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}}return this.map_geneSets_selected}},{key:"searchTree",value:function(e,t){return z()(e).jstree(!0).search(t),e}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(P.a,{isLoading:this.isLoading}),o.a.createElement("div",{ref:function(t){return e.tree=t},style:{maxHeight:"380px",overflowY:"scroll"},"data-test":"gsva-tree-container"}),o.a.createElement("div",{style:{padding:"30px 0px"}},o.a.createElement("button",{className:"btn btn-primary btn-sm pull-right",style:{margin:"2px"},disabled:this.isLoading,onClick:function(){var t=e.submitGeneSets(e.tree);e.props.onSelect(t)}},"Select")))}}])&&U(n.prototype,r),i&&U(n,i),t}();Q([L.observable],X.prototype,"isLoading",void 0);var Z=X=Q([s.observer],X),J=n(609);function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ie=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":oe(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ae=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=te(t).call(this,e))||"object"!==oe(o)&&"function"!=typeof o?ne(r):o).percentile=n.props.percentile,n.pvalueThreshold=String(n.props.pvalueThreshold),n.scoreThreshold=String(n.props.scoreThreshold),n.percentileOptions=[{label:"50%",value:50},{label:"75%",value:75},{label:"100%",value:100}],n.percentileChange=n.percentileChange.bind(ne(n)),n.applyFilter=n.applyFilter.bind(ne(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(t,r["Component"]),n=t,(o=[{key:"percentileChange",value:function(e){this.percentile=e?e.value:75}},{key:"applyFilter",value:function(){var e=this.pvalueThreshold?Number(this.pvalueThreshold):NaN,t=this.scoreThreshold?Number(this.scoreThreshold):NaN;Number.isNaN(e)||Number.isNaN(t)||this.props.onApply(this.percentile,e,t)}},{key:"render",value:function(){var e=this;return r.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center",width:"100%",background:"#eee",padding:"10px 10px"}},r.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.createElement("label",{htmlFor:"GSVAScore"},"GSVA score"),r.createElement("input",{id:"GSVAScore",type:"string",value:this.scoreThreshold,style:{width:160,height:36,padding:10},onChange:function(t){return e.scoreThreshold=t.target.value},step:"0.1"})),r.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.createElement("label",{htmlFor:"Pvalue"},"P-value"),r.createElement("input",{id:"Pvalue",type:"string",value:this.pvalueThreshold,style:{width:160,height:36,padding:10},onChange:function(t){return e.pvalueThreshold=t.target.value},step:"0.01",min:"0"})),r.createElement("div",null,r.createElement("label",{htmlFor:"PercentileScoreCalculation"},"Percentile for score calculation"),r.createElement(J.default,{addLabelText:"Percentile for score calculation",style:{width:160,borderRadius:"2px"},clearable:!1,name:"PercentileScoreCalculation",value:this.percentile,options:this.percentileOptions,onChange:this.percentileChange})),r.createElement("div",null,r.createElement("button",{id:"filterButton",className:"btn btn-primary btn-sm",style:{padding:"20px 18px"},onClick:this.applyFilter},"Apply Filter")))}}])&&ee(n.prototype,o),i&&ee(n,i),t}();ie([L.observable],ae.prototype,"percentile",void 0),ie([L.observable],ae.prototype,"pvalueThreshold",void 0),ie([L.observable],ae.prototype,"scoreThreshold",void 0);var se=ae=ie([s.observer],ae);function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pe(e,t){return(pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var fe=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":de(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},he=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=ue(t).call(this,e))||"object"!==de(o)&&"function"!=typeof o?ce(r):o).percentile=75,n.pvalueThreshold=.05,n.scoreThreshold=.5,n.searchValue="",n.updateSelectionParameters=n.updateSelectionParameters.bind(ce(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pe(e,t)}(t,r["Component"]),n=t,(o=[{key:"updateSelectionParameters",value:function(e,t,n){this.percentile=e,this.pvalueThreshold=t,this.scoreThreshold=n}},{key:"render",value:function(){var e=this;return r.createElement("div",null,r.createElement("text",null,"Search hierarchy"),r.createElement("div",{className:"form-group has-feedback input-group-sm",style:{display:"inline-block"}},r.createElement("input",{type:"text",id:"geneset-hierarchy-search",className:"form-control tableSearchInput",style:{width:768},value:this.searchValue,onChange:function(t){return e.searchValue=t.target.value}}),r.createElement("span",{className:"fa fa-search form-control-feedback","aria-hidden":"true"})),r.createElement(se,{percentile:this.percentile,pvalueThreshold:this.pvalueThreshold,scoreThreshold:this.scoreThreshold,onApply:this.updateSelectionParameters}),r.createElement(Z,{initialSelection:this.props.initialSelection,scoreThreshold:this.scoreThreshold,pvalueThreshold:this.pvalueThreshold,percentile:this.percentile,gsvaProfile:this.props.gsvaProfile,sampleListId:this.props.sampleListId,searchValue:this.searchValue,onSelect:this.props.onSelect}))}}])&&le(n.prototype,o),i&&le(n,i),t}();fe([L.observable],he.prototype,"percentile",void 0),fe([L.observable],he.prototype,"pvalueThreshold",void 0),fe([L.observable],he.prototype,"scoreThreshold",void 0),fe([L.observable],he.prototype,"searchValue",void 0);var me=he=fe([s.observer],he),ye=n(608),ge=n(575),ve=n(580),be=n(581),Se=n(576);function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function we(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ee(e,t){return!t||"object"!==Te(t)&&"function"!=typeof t?Oe(e):t}function Oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ce(e){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xe(e,t)}function xe(e,t){return(xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Te(e){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ke=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Te(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Ae=function(e){function t(){return we(this,t),Ee(this,Ce(t).apply(this,arguments))}return Pe(t,ge["b"]),t}(),Ie=function(e){function t(e){var n;return we(this,t),(n=Ee(this,Ce(t).call(this,e))).percentileOptions=[{label:"50%",value:"50"},{label:"75%",value:"75"},{label:"100%",value:"100"}],n.percentileChange=n.percentileChange.bind(Oe(n)),n.updateSelectionFromPlot=n.updateSelectionFromPlot.bind(Oe(n)),n}var n,o,i;return Pe(t,f["d"]),n=t,(o=[{key:"percentileChange",value:function(e){this.store.volcanoPlotSelectedPercentile=e||{label:"75%",value:"75"}}},{key:"updateSelectionFromPlot",value:function(e,t){var n=this,r=e&&e[0].data?e[0].data:[];this.store.volcanoPlotTableData.result.map(function(e){var t=e.representativeScore,o=e.representativePvalue,i=e.name,a=t,s=-Math.log(o)/Math.log(10),l=!0,u=!1,c=void 0;try{for(var p,d=r[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var f=p.value;f.x===a&&f.y===s&&n.store.map_genesets_selected_volcano.set(i,!0)}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}})}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:a.a.GenesetsVolcanoSelectorWindow,style:{height:"400px"}},r.createElement("div",{style:{float:"left"},className:"form-inline"},r.createElement("label",{htmlFor:"PercentileScoreCalculation"},"Percentile for score calculation:"),r.createElement("span",{style:{display:"inline-block",verticalAlign:"middle",marginLeft:"1em"}},r.createElement(J.default,{addLabelText:"Percentile for score calculation",style:{width:160,borderRadius:"2px"},clearable:!1,name:"PercentileScoreCalculation",value:this.store.volcanoPlotSelectedPercentile,options:this.percentileOptions,onChange:this.percentileChange})),r.createElement(P.a,{isLoading:!(this.props.plotData&&this.props.maxY&&this.store.volcanoPlotTableData.isComplete&&this.props.data)}),this.store.volcanoPlotGraphData&&this.store.minYVolcanoPlot&&this.props.plotData&&this.props.maxY&&this.store.volcanoPlotTableData.isComplete&&this.props.data&&r.createElement(be.VictoryChart,{theme:Se.d,width:510,height:350,containerComponent:r.createElement(be.VictorySelectionContainer,{onSelection:this.updateSelectionFromPlot,selectionStyle:{fill:"tomato",fillOpacity:.5,stroke:"tomato",strokeWidth:2}})},r.createElement(be.VictoryAxis,{crossAxis:!0,domain:[-1,1.25],tickValues:[-1,-.5,0,.5,1],style:{axisLabel:{padding:35}},label:"GSVA score",offsetY:50,standalone:!1}),r.createElement(be.VictoryAxis,{dependentAxis:!0,crossAxis:!0,domain:[0,this.props.maxY],style:{axisLabel:{padding:35},stroke:"none"},label:"-log10 p-value",offsetX:50,standalone:!1}),r.createElement(be.VictoryLabel,{text:"significance",datum:{x:1,y:1.3},textAnchor:"start"}),r.createElement(be.VictoryLine,{style:{data:{stroke:"black",strokeDasharray:5},parent:{border:"dotted 1px #f00"}},data:[{x:-1.2,y:1.3},{x:1,y:1.3}]}),r.createElement(be.VictoryLine,{style:{data:{stroke:"rgb(144, 164, 174)"},parent:{border:"1px dashed solid"}},data:[{x:0,y:0},{x:0,y:this.props.maxY}]}),r.createElement(be.VictoryScatter,{style:{data:{fill:function(e){return e?e.fill:""},fillOpacity:.3}},size:3,data:this.props.plotData}))),r.createElement("div",{style:{float:"right",height:"356.5px",overflowY:"scroll",width:"650px"}},r.createElement(P.a,{isLoading:!(this.store.volcanoPlotTableData.isComplete&&this.props.data)}),this.store.volcanoPlotTableData.isComplete&&this.props.data&&r.createElement(Ae,{data:this.props.data,columns:[{name:"Gene Sets",render:function(e){return r.createElement("span",null,e.name)},sortBy:function(e){return e.name},filter:function(e,t,n){return e.name.toUpperCase().indexOf(n)>-1}},{name:"GSVA Score",render:function(e){return r.createElement("span",null,e.representativeScore.toFixed(2))},sortBy:function(e){return e.representativeScore}},{name:"P Value",render:function(e){return r.createElement("span",null,Object(ve.g)(e.representativePvalue,2,.1))},sortBy:function(e){return e.representativePvalue}},{name:"Selected",render:function(t){return r.createElement(ye.a,{checked:!!e.store.map_genesets_selected_volcano.get(t.name),onChange:function(n){return e.store.map_genesets_selected_volcano.set(t.name,n.target.checked)}})}}],initialSortColumn:"P Value",initialSortDirection:"asc",showPagination:!0,initialItemsPerPage:100,showColumnVisibility:!1,showFilter:!0,showCopyDownload:!1})),r.createElement("div",{style:{float:"right"}},this.store.volcanoPlotTableData.isComplete&&this.props.data&&r.createElement("button",{style:{marginTop:15,float:"right"},className:"btn btn-primary btn-sm pull-right",onClick:function(){return e.props.onSelect(e.store.map_genesets_selected_volcano)}},"Add selection to the query"),this.store.volcanoPlotTableData.isComplete&&this.props.data&&r.createElement("button",{style:{marginRight:15,marginTop:15,float:"right"},className:"btn btn-primary btn-sm pull-right",onClick:function(){return e.store.map_genesets_selected_volcano.replace(e.props.initialSelection.map(function(e){return[e,!0]}))}},"Clear selection")))}}])&&_e(n.prototype,o),i&&_e(n,i),t}();ke([L.action],Ie.prototype,"updateSelectionFromPlot",null);var De=Ie=ke([s.observer],Ie);function Me(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ne(e,t){return!t||"object"!==Ge(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Re(e){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Le(e,t){return(Le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ge(e){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Fe=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Ge(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Be=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ne(this,Re(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Le(e,t)}(t,f["d"]),n=t,(o=[{key:"render",value:function(){var e=this;return r.createElement(u.b,{padded:!0,overflow:!0,className:a.a.GeneSetSelector},r.createElement(m.a,{className:"sectionLabel"},"Enter Gene Sets:"),r.createElement(u.a,{overflow:!0},r.createElement(u.b,{padded:!0,className:a.a.buttonRow},r.createElement("button",{className:"btn btn-default btn-sm","data-test":"GENESET_HIERARCHY_BUTTON",onClick:function(){return e.store.showGenesetsHierarchyPopup=!0}},"Select Gene Sets from Hierarchy"),r.createElement("button",{className:"btn btn-default btn-sm","data-test":"GENESET_VOLCANO_BUTTON",onClick:function(){return e.store.showGenesetsVolcanoPopup=!0}},"Select Gene Sets from Volcano Plot")),r.createElement("textarea",{ref:this.textAreaRef,className:B()(a.a.geneSet,this.store.genesetQuery?a.a.notEmpty:a.a.empty),rows:5,cols:80,placeholder:"Enter Gene Sets",title:"Enter Gene Sets",value:this.store.genesetQuery,onChange:function(t){return e.store.genesetQuery=t.currentTarget.value},"data-test":"GENESETS_TEXT_AREA"}),r.createElement(R.Modal,{className:B()("cbioportal-frontend",a.a.GenesetsSelectorWindow),show:this.store.showGenesetsHierarchyPopup,onHide:function(){return e.store.showGenesetsHierarchyPopup=!1}},r.createElement(R.Modal.Header,{closeButton:!0},r.createElement(R.Modal.Title,null,"Select Gene Sets From Hierarchy")),r.createElement(R.Modal.Body,null,r.createElement(me,{initialSelection:this.store.genesetIds,gsvaProfile:this.store.getFilteredProfiles("GENESET_SCORE")[0].molecularProfileId,sampleListId:this.store.defaultSelectedSampleListId,onSelect:function(t){e.store.applyGenesetSelection(t),e.store.showGenesetsHierarchyPopup=!1}}))),r.createElement(R.Modal,{className:B()("cbioportal-frontend",a.a.GenesetsVolcanoSelectorWindow),show:this.store.showGenesetsVolcanoPopup,onHide:function(){return e.store.showGenesetsVolcanoPopup=!1},onShow:function(){return e.store.map_genesets_selected_volcano.replace(e.store.genesetIds.map(function(e){return[e,!0]}))}},r.createElement(R.Modal.Header,{closeButton:!0},r.createElement(R.Modal.Title,null,"Select Gene Sets From Volcano Plot")),r.createElement(R.Modal.Body,null,r.createElement(De,{initialSelection:this.store.genesetIds,data:this.store.volcanoPlotTableData.result,plotData:this.store.volcanoPlotGraphData,maxY:this.store.minYVolcanoPlot?-Math.log(this.store.minYVolcanoPlot)/Math.log(10):void 0,onSelect:function(t){e.store.addToGenesetSelection(t),e.store.showGenesetsVolcanoPopup=!1}})))))}},{key:"selectedGeneListOption",get:function(){var e=this,t=this.geneListOptions.find(function(t){return t.value===e.store.geneQuery});return t?t.value:""}},{key:"geneListOptions",get:function(){var e=G;if(y.b.serverConfig.query_sets_of_genes){var t=y.a.parseQuerySetsOfGenes(y.b.serverConfig.query_sets_of_genes);t&&(e=t)}return[{label:"User-defined List",value:""}].concat(Me(e.map(function(e){return{label:"".concat(e.id," (").concat(e.genes.length," genes)"),value:e.genes.join(" ")}})))}},{key:"textAreaRef",get:function(){var e=this;if(this.store.geneQueryErrorDisplayStatus===f.b.ShouldFocus)return function(t){var n=e.store.oql.error;t&&n&&(t.focus(),t.setSelectionRange(n.start,n.end),e.store.geneQueryErrorDisplayStatus=f.b.Focused)}}}])&&je(n.prototype,o),i&&je(n,i),t}();Fe([L.computed],Be.prototype,"selectedGeneListOption",null),Fe([L.computed],Be.prototype,"geneListOptions",null),Fe([L.computed],Be.prototype,"textAreaRef",null);var Ve=Be=Fe([s.observer],Be),ze=n(15),qe=n(958),Ue=n(766),He=n(126),We=n.n(He),Ke=n(603),$e=n(17),Qe=n(681);function Ye(e){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xe(){return(Xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Je(e){return(Je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function et(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tt(e,t){return(tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n(966);var nt=n(613);function rt(e,t){var n=[];return t||(Object.keys(e[0]).forEach(function(e){return n.push(e,",")}),n.pop(),n.push("\r\n")),e.forEach(function(e){c.each(e,function(e){n.push(e,",")}),n.pop(),n.push("\r\n")}),n.join("")}var ot=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=Je(t).call(this,e),(n=!o||"object"!==Ye(o)&&"function"!=typeof o?et(r):o).downloadData=function(){n.props.downloadDataGenerator?We()(rt(n.props.downloadDataGenerator()||[],n.props.downloadDataContainsHeader),n.props.downloadFilename):We()(rt(n.props.tableData||[],n.props.downloadDataContainsHeader),n.props.downloadFilename)},n.handleInput=n.handleInput.bind(et(n)),n.getText=n.getText.bind(et(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tt(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){this.props.showCopyAndDownload&&this._copyButton&&this.bindCopyButton()}},{key:"bindCopyButton",value:function(){new nt(this._copyButton,{text:function(){return this.getText()}.bind(this)})}},{key:"handleInput",value:function(e){var t=this;null!==this.searchTimeout&&(clearTimeout(this.searchTimeout),this.searchTimeout=null);var n=e.currentTarget.value;this.searchTimeout=setTimeout(function(){t.props.handleInput&&t.props.handleInput(n)},this.props.searchDelayMs)}},{key:"render",value:function(){var e=this,t=r.createElement("div",{className:"rc-tooltip-arrow-inner"});return r.createElement("div",{className:(this.props.className||"")+""},r.createElement(R.ButtonToolbar,null,r.createElement($e.If,{condition:this.props.showPagination},r.createElement(Ke.a,Xe({className:"pull-left"},this.props.paginationProps))),r.createElement($e.If,{condition:this.props.showHideShowColumnButton},r.createElement(Qe.a,this.props.columnVisibilityProps)),r.createElement($e.If,{condition:this.props.showCopyAndDownload},r.createElement(R.ButtonGroup,{className:this.props.copyDownloadClassName,style:{marginLeft:10}},r.createElement(h.c,{overlay:r.createElement("span",null,"Copy"),placement:"top",mouseLeaveDelay:0,mouseEnterDelay:.5,arrowContent:t},r.createElement("button",{ref:function(t){e._copyButton=t},className:"btn btn-sm btn-default","option-text":this.getText},r.createElement("i",{className:"fa fa-clipboard"}))),r.createElement(h.c,{overlay:r.createElement("span",null,"Download CSV"),mouseLeaveDelay:0,mouseEnterDelay:.5,placement:"top",arrowContent:t},r.createElement(R.Button,{className:"btn-sm",onClick:this.downloadData},r.createElement("i",{className:"fa fa-cloud-download"}))))),r.createElement($e.If,{condition:this.props.showSearch},r.createElement("div",{className:"".concat(this.props.searchClassName," form-group has-feedback input-group-sm"),style:{display:"inline-block",marginLeft:10}},r.createElement("input",{type:"text",onInput:this.handleInput,className:"form-control tableSearchInput",style:{width:200}}),r.createElement("span",{className:"fa fa-search form-control-feedback","aria-hidden":"true"})))))}},{key:"getText",value:function(){return this.props.downloadDataGenerator?rt(this.props.downloadDataGenerator()||[],this.props.downloadDataContainsHeader):rt(this.props.tableData||[],this.props.downloadDataContainsHeader)}}])&&Ze(n.prototype,o),i&&Ze(n,i),t}();ot.defaultProps={showSearch:!1,showCopyAndDownload:!0,showPagination:!1,searchClassName:"",copyDownloadClassName:"",downloadFilename:"patient-clinical-attributes.tsv",downloadDataContainsHeader:!1,paginationProps:{},columnVisibilityProps:{},searchDelayMs:400};n(967);function it(e){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function at(){return(at=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function st(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lt(e){return(lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ut(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ct(e,t){return(ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pt=function(e){function t(e){var n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=lt(t).call(this,e),(n=!o||"object"!==it(o)&&"function"!=typeof o?ut(r):o).rawDataSelector=function(e,t){return t.rawData},n.columnsSelector=function(e,t){return t.columns},n.columnVisibilitySelector=function(e){return e.columnVisibility},n.visibleColsSelector=Object(qe.createSelector)(n.columnsSelector,n.columnVisibilitySelector,function(e,t){return n.resolveVisible(e,t)}),n.sortedVisibleColsSelector=Object(qe.createSelector)(n.visibleColsSelector,function(e){return n.resolveOrder(e)}),n.sortedColsSelector=Object(qe.createSelector)(n.columnsSelector,function(e){return n.resolveOrder(e)}),n.columnVisibilityArraySelector=Object(qe.createSelector)(n.sortedColsSelector,n.columnVisibilitySelector,function(e,t){return n.resolveColumnVisibility(n.colNameToId,e,t)}),n.downloadDataSelector=Object(qe.createSelector)(n.sortedColsSelector,n.columnVisibilitySelector,n.rawDataSelector,function(e,t,r){return n.generateDownloadData(e,t,r)}),n.headersSelector=Object(qe.createSelector)(n.sortedVisibleColsSelector,function(e){return n.generateHeaders(e)}),n.rowsSelector=Object(qe.createSelector)(n.sortedColsSelector,n.rawDataSelector,function(e,t){return n.generateRows(e,t)}),n.colNameToId=n.mapColNameToId(e.columns),n.state={columnVisibility:t.resolveVisibility(e.columns,e.rawData),sortableColumns:n.resolveSortable(n.props.columns||{}),filterableColumns:n.resolveFilterable(n.props.columns||{}),filter:"",itemsPerPage:n.props.initItemsPerPage||25,currentPage:n.props.initPage||0},n.filteredDataLength=e.rawData.length,n.shouldSetState=!1;var i=Ue.Table.prototype.applyFilter;Ue.Table.prototype.applyFilter=function(){var e,t=i.apply(this,arguments);return(e=t.length)!==n.filteredDataLength&&(n.filteredDataLength=e,n.shouldSetState=!0),t};var a=Ue.Table.prototype.render;return Ue.Table.prototype.render=function(){var e,t=a.apply(this,arguments);return e=t.props.children.find(function(e){return"tbody"===e.type}).props.children||[],n.props.onVisibleRowsChange&&n.props.onVisibleRowsChange(e.map(function(e){return e.props.rowData})),t},n.handleDownload=n.handleDownload.bind(ut(n)),n.handleFilterInput=n.handleFilterInput.bind(ut(n)),n.handleVisibilityToggle=n.handleVisibilityToggle.bind(ut(n)),n.handleChangeItemsPerPage=n.handleChangeItemsPerPage.bind(ut(n)),n.handlePreviousPageClick=n.handlePreviousPageClick.bind(ut(n)),n.handleNextPageClick=n.handleNextPageClick.bind(ut(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ct(e,t)}(t,r["Component"]),n=t,i=[{key:"resolveVisibility",value:function(e,t){var n={};return e?(c.each(c.keys(e),function(r){var o=e[r],i="visible";o.visible&&(i=c.isFunction(o.visible)?o.visible(t,o.columnProps):o.visible),"excluded"!==i&&(n[r]=i)}),n):n}},{key:"columnSort",value:function(e,t){return e.priority&&t.priority?e.priority-t.priority:e.priority?-1:t.priority?1:e.name>t.name?1:-1}}],(o=[{key:"render",value:function(){var e=this.props,t=e.className,n=e.reactTableProps,o=e.headerControlsProps,i=(this.columnVisibilityArraySelector(this.state,this.props),this.headersSelector(this.state,this.props)),a=this.rowsSelector(this.state,this.props),s=this.rowIndexesOnPage(),l=s.firstIndex,u=s.numIndexes;return r.createElement("div",{className:t},r.createElement(ot,at({showCopyAndDownload:!0,showHideShowColumnButton:!0,handleInput:this.handleFilterInput,downloadDataGenerator:this.handleDownload,downloadDataContainsHeader:!0,downloadFilename:"mutations.csv",showSearch:!0,columnVisibilityProps:{className:"pull-right",onColumnToggled:this.handleVisibilityToggle},paginationProps:{className:"pull-right",itemsPerPage:this.state.itemsPerPage,currentPage:this.state.currentPage,onChangeItemsPerPage:this.handleChangeItemsPerPage,onPreviousPageClick:this.handlePreviousPageClick,onNextPageClick:this.handleNextPageClick,textBetweenButtons:"".concat(this.filteredDataLength?l+1:0,"-").concat(l+u," of ").concat(this.filteredDataLength),previousPageDisabled:0===this.state.currentPage,nextPageDisabled:this.state.currentPage>=this.numPages()-1}},o)),r.createElement(Ue.Table,at({sortable:this.state.sortableColumns,filterable:this.state.filterableColumns,filterBy:this.state.filter,itemsPerPage:-1===this.state.itemsPerPage?void 0:this.state.itemsPerPage,currentPage:this.state.currentPage},n),i,a))}},{key:"componentWillUpdate",value:function(e,t){0===t.filter.length&&(this.filteredDataLength=this.props.rawData.length)}},{key:"componentDidUpdate",value:function(){this.shouldSetState&&(this.shouldSetState=!1,this.setState({currentPage:Math.max(0,Math.min(this.state.currentPage,this.numPages()-1))}))}},{key:"rowIndexesOnPage",value:function(){var e,t;return-1===this.state.itemsPerPage?(e=0,t=this.filteredDataLength):(e=this.state.itemsPerPage*this.state.currentPage,t=Math.min(this.filteredDataLength-e,this.state.itemsPerPage)),{firstIndex:e,numIndexes:t}}},{key:"numPages",value:function(e){return-1===(e=e||this.state.itemsPerPage)?1:Math.ceil(this.filteredDataLength/e)}},{key:"mapColNameToId",value:function(e){var t={};return e&&c.each(e,function(e,n){e.name&&(t[e.name],t[e.name]=n)}),t}},{key:"resolveOrder",value:function(e){return e?c.values(e).sort(t.columnSort):[]}},{key:"resolveColumnVisibility",value:function(e,t,n){var r=[];return c.each(t,function(t){var o=e[t.name];n[o]&&r.push({id:o,name:t.name,visibility:n[o]})}),r}},{key:"generateHeaders",value:function(e){var t=[];return c.each(e,function(e){var n=e.header||r.createElement("span",null,e.name);if(e.description){var o=r.createElement("div",{className:"rc-tooltip-arrow-inner"});n=r.createElement(h.c,{overlay:r.createElement("span",null,e.description),placement:"top",arrowContent:o},n)}t.push(r.createElement(Ue.Th,{key:e.name,column:e.name},n))}),t}},{key:"generateDownloadData",value:function(e,t,n){var r=this,o=[];return o[0]=[],c.each(e,function(e){var n=r.colNameToId[e.name];n in t&&"excluded"!==t[n]&&o[0].push(e.name)}),c.each(n,function(i,a){var s=[];c.each(e,function(e){var o=r.colNameToId[e.name];if(o in t&&"excluded"!==t[o]){var a=r.getColumnData(e,n,i);e.downloader?s.push(e.downloader(a,e.columnProps)):s.push((a.columnData||"").toString())}}),o.push(s)}),o}},{key:"getColumnData",value:function(e,t,n){var r={name:e.name,tableData:t,rowData:n,columnData:null};if(e.columnDataFunction)r.columnData=e.columnDataFunction(r);else if(e.dataField){var o=null;(o=c.isArray(r.rowData)&&r.rowData.length>0?r.rowData[0]:r.rowData)&&(r.columnData=o[e.dataField])}return r}},{key:"generateRows",value:function(e,t){var n=this,o=[];return c.each(t,function(i,a){var s=n.generateColumns(e,t,i);o.push(r.createElement(Ue.Tr,{key:a,rowData:i},s))}),o}},{key:"generateColumns",value:function(e,t,n){var r=this,o=[];return c.each(e,function(e){var i=r.getColumnData(e,t,n);o.push(r.generateColumn(i,e))}),o}},{key:"generateColumn",value:function(e,t){return t.formatter?t.formatter(e,t.columnProps):r.createElement(Ue.Td,{key:t.name,column:t.name,value:e.columnData},e.columnData)}},{key:"resolveVisible",value:function(e,t){var n={};return c.each(c.keys(t),function(r){"visible"===t[r]&&(n[r]=e[r])}),n}},{key:"resolveSortable",value:function(e){var t=[];return c.each(e,function(e){c.isFunction(e.sortable)?t.push({column:e.name,sortFunction:e.sortable}):e.sortable&&t.push(e.name)}),t}},{key:"resolveFilterable",value:function(e){var t=[];return c.each(e,function(e){c.isFunction(e.filterable)?t.push({column:e.name,filterFunction:e.filterable}):e.filterable&&t.push(e.name)}),t}},{key:"handleFilterInput",value:function(e){this.setState({filter:e})}},{key:"handleDownload",value:function(){return this.downloadDataSelector(this.state,this.props)}},{key:"handleVisibilityToggle",value:function(e){var t=e,n=this.state.columnVisibility[t],r=Object.assign({},this.state.columnVisibility);"hidden"===n?n="visible":"visible"===n&&(n="hidden"),r[t]=n,this.setState({columnVisibility:r})}},{key:"handleChangeItemsPerPage",value:function(e){this.setState({itemsPerPage:e,currentPage:Math.min(this.state.currentPage,this.numPages(e)-1)})}},{key:"handlePreviousPageClick",value:function(){this.setState({currentPage:Math.max(0,this.state.currentPage-1)})}},{key:"handleNextPageClick",value:function(){this.setState({currentPage:Math.min(this.state.currentPage+1,this.numPages()-1)})}}])&&st(n.prototype,o),i&&st(n,i),t}();function dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ft(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ht(e,t){return!t||"object"!==vt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mt(e){return(mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gt(e,t)}function gt(e,t){return(gt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vt(e){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var bt=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":vt(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},St=function(e){function t(){return ft(this,t),ht(this,mt(t).apply(this,arguments))}return yt(t,pt),t}(),_t=function(e){function t(e){var n;return ft(this,t),(n=ht(this,mt(t).call(this,e))).map_geneSymbol_selected=L.observable.map(),n.columns={hugoGeneSymbol:{priority:1,dataField:"hugoGeneSymbol",name:"Gene Symbol",sortable:!0,filterable:!0},numberOfMutations:{priority:2,dataField:"numberOfMutations",name:"Num Mutations",sortable:!0,filterable:!0},qValue:{priority:3,dataField:"qValue",name:"Q-Value",sortable:!0,filterable:!0,formatter:function(e){var t=e.name,n=e.columnData;return r.createElement(Ue.Td,{key:t,column:t,value:n},Object(ve.g)(n,2,.1))}},selected:{name:"Selected",priority:4,sortable:!1,filterable:!1,header:r.createElement("div",{className:a.a.selectionColumnHeader},r.createElement("span",null,"All"),r.createElement(s.Observer,null,function(){return r.createElement(ye.a,{checked:n.selectedGenes.length>0,indeterminate:n.selectedGenes.length>0&&n.selectedGenes.length<n.allGenes.length,onChange:function(e){return n.selectAll(e.target.checked)}})})),formatter:function(e){var t=e.name,o=e.rowData;return r.createElement(Ue.Td,{key:t,column:t},!!o&&r.createElement("div",{className:a.a.selectionColumnCell},r.createElement(s.Observer,null,function(){return r.createElement(ye.a,{checked:!!n.map_geneSymbol_selected.get(o.hugoGeneSymbol),onChange:function(e){return n.map_geneSymbol_selected.set(o.hugoGeneSymbol,e.target.checked)}})})))}}},n.map_geneSymbol_selected.replace(e.initialSelection.map(function(e){return[e,!0]})),n}var n,o,i;return yt(t,r["Component"]),n=t,(o=[{key:"selectAll",value:function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=this.allGenes[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;this.map_geneSymbol_selected.set(a,e)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:a.a.MutSigGeneSelector},r.createElement(St,{itemsName:"genes",initItemsPerPage:10,columns:this.columns,rawData:this.props.data,headerControlsProps:{showCopyAndDownload:!1,showHideShowColumnButton:!1,showPagination:!0},reactTableProps:{className:"table table-striped table-border-top",hideFilterInput:!0,defaultSort:this.columns.qValue.name}}),r.createElement("div",null,r.createElement("button",{style:{marginTop:20},className:"btn btn-primary btn-sm pull-right",onClick:function(){return e.props.onSelect(e.map_geneSymbol_selected)}},"Select")))}},{key:"allGenes",get:function(){return c.uniq(this.props.data.map(function(e){return e.hugoGeneSymbol}))}},{key:"selectedGenes",get:function(){var e=this;return this.allGenes.filter(function(t){return e.map_geneSymbol_selected.get(t)})}}])&&dt(n.prototype,o),i&&dt(n,i),t}();bt([L.computed],_t.prototype,"allGenes",null),bt([L.computed],_t.prototype,"selectedGenes",null),bt([L.action],_t.prototype,"selectAll",null);var wt=_t=bt([s.observer],_t);function Et(e){return e?e.genes.map(function(e){return e.hugoGeneSymbol}):[]}var Ot=new RegExp("^([0-9]{1,2})([pq])([0-9]{1,2})(?:.?)([0-9]{0,2})$");function Ct(e,t){var n=e.match(Ot),r=t.match(Ot);return n&&r?parseInt(n[1],10)-parseInt(r[1],10)!=0?parseInt(n[1],10)-parseInt(r[1],10):"p"===n[2]&&"q"===r[2]?-1:"q"===n[2]&&"p"===r[2]?1:n[2]===r[2]?parseInt(n[3],10)-parseInt(r[3],10):0:+!!n-+!!r}function Pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xt(e,t,n){return t&&Pt(e.prototype,t),n&&Pt(e,n),e}function Tt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kt(e,t){return!t||"object"!==Mt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function At(e){return(At=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function It(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dt(e,t)}function Dt(e,t){return(Dt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mt(e){return(Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var jt=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Mt(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Nt=function(e){function t(){return Tt(this,t),kt(this,At(t).apply(this,arguments))}return It(t,pt),t}(),Rt=function(e){function t(e){var n;return Tt(this,t),(n=kt(this,At(t).call(this,e))).map_geneSymbol_selected=L.observable.map(),n.columns={amp:{priority:1,columnDataFunction:function(e){var t=e.rowData;return t&&(t.amp?"Amp":"Del")},name:"Amp Del",sortable:!0,filterable:!0,header:r.createElement("div",{className:B()(a.a.header,a.a.amp,a.a.del)},r.createElement("span",{className:a.a.amp},"Amp"),r.createElement("span",{className:a.a.del},"Del")),formatter:function(e){var t=e.name,n=e.rowData,o=e.columnData;return r.createElement(Ue.Td,{key:t,column:t,value:o},!!n&&r.createElement("div",{className:n.amp?a.a.amp:a.a.del}))}},chromosome:{priority:2,dataField:"chromosome",name:"Chr",sortable:!0,filterable:!0},cytoband:{priority:3,dataField:"cytoband",name:"Cytoband",sortable:Ct,filterable:!0},"#":{priority:4,columnDataFunction:function(e){return Et(e.rowData).length},name:"#",sortable:!0,filterable:!0},genes:{priority:5,columnDataFunction:function(e){return Et(e.rowData).join(" ")},name:"Genes",sortable:function(e,t){return e.length-t.length||+(e>t)-+(e<t)},filterable:!0,formatter:function(e){var t=e.name,o=e.rowData,i=e.columnData;return r.createElement(Ue.Td,{key:t,column:t,value:i},r.createElement(Gt,{gistic:o,map_geneSymbol_selected:n.map_geneSymbol_selected}))}},qValue:{priority:6,dataField:"qValue",name:"Q-Value",sortable:!0,filterable:!0,formatter:function(e){var t=e.name,n=(e.rowData,e.columnData);return r.createElement(Ue.Td,{key:t,column:t,value:n},Object(ve.g)(n,2,.1))}}},n.map_geneSymbol_selected.replace(e.initialSelection.map(function(e){return[e,!0]})),n}return It(t,r["Component"]),xt(t,[{key:"render",value:function(){var e=this;return r.createElement("div",{className:a.a.GisticGeneSelector},r.createElement("span",null,"Click on a gene to ",r.createElement("span",{className:B()(a.a.geneToggle,a.a.selected,a.a.simulateHovered)},"select")," it."),r.createElement(Nt,{className:a.a.gisticTable,itemsName:"genes",initItemsPerPage:10,columns:this.columns,rawData:this.props.data,headerControlsProps:{showCopyAndDownload:!1,showHideShowColumnButton:!1,showPagination:!0},reactTableProps:{className:"table table-striped table-border-top",hideFilterInput:!0,defaultSort:this.columns.qValue.name}}),r.createElement("div",null,r.createElement("button",{style:{marginTop:20},className:"btn btn-primary btn-sm pull-right",onClick:function(){return e.props.onSelect(e.map_geneSymbol_selected)}},"Select")))}}]),t}(),Lt=Rt=jt([s.observer],Rt),Gt=function(e){function t(){var e;return Tt(this,t),(e=kt(this,At(t).apply(this,arguments))).showAll=!1,e}return It(t,r["Component"]),xt(t,[{key:"renderGeneToggles",value:function(e){var t=this;return e.map(function(e){return r.createElement(s.Observer,null,function(){var n=!!t.props.map_geneSymbol_selected.get(e);return r.createElement("span",{key:e,className:B()(a.a.geneToggle,n?a.a.selected:a.a.notSelected),onClick:function(r){return t.props.map_geneSymbol_selected.set(e,!n)}},e)})})}},{key:"render",value:function(){var e=this,t=Et(this.props.gistic),n=t.slice(0,5),o=t.slice(5);return r.createElement("div",{className:a.a.GisticGeneToggles},r.createElement("div",{className:a.a.someGenes},this.renderGeneToggles(n),!!o.length&&r.createElement("a",{className:a.a.showMoreLess,onClick:function(){return e.showAll=!e.showAll}},this.showAll?"less":"+".concat(o.length," more"))),r.createElement("div",{className:a.a.moreGenes},this.showAll&&this.renderGeneToggles(o)))}}]),t}();jt([L.observable],Gt.prototype,"showAll",void 0),Gt=jt([s.observer],Gt);var Ft=n(662),Bt=n(586);function Vt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zt(e,t){return!t||"object"!==Ht(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qt(e){return(qt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ut(e,t){return(Ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ht(e){return(Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Wt=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Ht(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Kt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),zt(this,qt(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ut(e,t)}(t,f["d"]),n=t,(o=[{key:"render",value:function(){return this.store.genesetIdsQuery.error?r.createElement("div",{className:a.a.GeneSymbolValidator},r.createElement("span",{className:a.a.errorMessage},"Cannot validate gene sets because of invalid OQL. ".concat(this.store.genesetQueryErrorDisplayStatus===f.b.Focused?"Please click 'Submit' to see location of error.":this.store.genesetIdsQuery.error.message))):this.store.genesetIdsQuery.query.length?this.store.genesets.isError?r.createElement("div",{className:a.a.GeneSymbolValidator},r.createElement("span",{className:a.a.pendingMessage},"Unable to validate gene sets.")):this.store.genesets.isPending&&0===this.store.genesets.result.invalid.length?r.createElement("div",{className:a.a.GeneSymbolValidator},r.createElement("span",{className:a.a.pendingMessage},"Validating gene sets...")):this.store.genesets.result.invalid.length?r.createElement("div",{className:a.a.GeneSymbolValidator},r.createElement("div",{className:a.a.invalidBubble,title:"Please edit the gene sets."},r.createElement(d.a,{className:a.a.icon,name:"exclamation-circle"}),r.createElement("span",null,"Invalid gene sets.")),this.store.genesets.result.invalid.map(this.renderSuggestion,this)):r.createElement("div",{className:a.a.GeneSymbolValidator},r.createElement("div",{className:a.a.validBubble,title:"You can now submit the list."},r.createElement(d.a,{className:a.a.icon,name:"check-circle"}),r.createElement("span",null,"All gene sets are valid."))):null}},{key:"renderSuggestion",value:function(e,t){var n=this;return r.createElement("div",{key:t,className:a.a.suggestionBubble,title:"Could not find gene set. Click to remove it from the gene list.",onClick:function(){return n.store.replaceGeneset(e,"")}},r.createElement(d.a,{className:a.a.icon,name:"times-circle"}),r.createElement("span",{className:a.a.noChoiceLabel},e))}}])&&Vt(n.prototype,o),i&&Vt(n,i),t}(),$t=Kt=Wt([s.observer],Kt),Qt=n(836);function Yt(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Xt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zt(e,t){return!t||"object"!==tn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Jt(e){return(Jt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function en(e,t){return(en=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tn(e){return(tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var nn=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":tn(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},rn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Zt(this,Jt(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&en(e,t)}(t,f["d"]),n=t,(o=[{key:"handleOQLUpdate",value:function(e,t,n){n!==this.store.geneQuery&&(this.store.geneQuery=n,this.store.oql.error=e.error)}},{key:"render",value:function(){var e=this;return r.createElement(u.b,{overflow:!0,padded:!0,className:a.a.GeneSetSelector},r.createElement(m.a,{className:"sectionLabel",secondaryComponent:r.createElement("a",{target:"_blank",className:a.a.learnOql,href:Object(ze.v)()},r.createElement("strong",null,"Hint:")," Learn Onco Query Language (OQL)",r.createElement("br",null),"to write more powerful queries"," ",r.createElement("i",{className:"fa fa-external-link"}))},"Enter Genes:"),r.createElement(u.a,{overflow:!0},r.createElement(J.default,{value:this.selectedGeneListOption,options:this.geneListOptions,onChange:function(t){return e.store.geneQuery=t?t.value:""}}),r.createElement(Ft.b,{focus:this.store.geneQueryErrorDisplayStatus,inputGeneQuery:this.store.geneQuery,validateInputGeneQuery:!0,location:Ft.a.DEFAULT,textBoxPrompt:"Enter HUGO Gene Symbols, Gene Aliases, or OQL",callback:this.handleOQLUpdate,error:this.store.submitError,messages:this.store.oqlMessages},this.customError),r.createElement($t,null),r.createElement(R.Modal,{className:B()("cbioportal-frontend",a.a.MutSigGeneSelectorWindow),show:this.store.showMutSigPopup,onHide:function(){return e.store.showMutSigPopup=!1}},r.createElement(R.Modal.Header,{closeButton:!0},r.createElement(R.Modal.Title,null,"Recently Mutated Genes")),r.createElement(R.Modal.Body,null,r.createElement(wt,{initialSelection:this.store.geneIds,data:this.store.mutSigForSingleStudy.result,onSelect:function(t){e.store.applyGeneSelection(t),e.store.showMutSigPopup=!1}}))),r.createElement(R.Modal,{className:B()("cbioportal-frontend",a.a.GisticGeneSelectorWindow),show:this.store.showGisticPopup,onHide:function(){return e.store.showGisticPopup=!1}},r.createElement(R.Modal.Header,{closeButton:!0},r.createElement(R.Modal.Title,null,"Recurrent Copy Number Alterations (Gistic)")),r.createElement(R.Modal.Body,null,r.createElement(Lt,{initialSelection:this.store.geneIds,data:this.store.gisticForSingleStudy.result,onSelect:function(t){e.store.applyGeneSelection(t),e.store.showGisticPopup=!1}})))))}},{key:"selectedGeneListOption",get:function(){var e=this,t=this.geneListOptions.find(function(t){return t.value==e.store.geneQuery});return t?t.value:""}},{key:"geneListOptions",get:function(){var e=G;if(y.b.serverConfig.query_sets_of_genes){var t=y.a.parseQuerySetsOfGenes(y.b.serverConfig.query_sets_of_genes);t&&(e=t)}return[{label:"User-defined List",value:""}].concat(Yt(e.map(function(e){return{label:"".concat(e.id," (").concat(e.genes.length," genes)"),value:e.genes.join(" ")}})))}},{key:"customError",get:function(){return this.store.isQueryLimitReached?r.createElement("div",{className:a.a.geneCount},r.createElement("div",{className:"",title:"Please limit your queries to ".concat(this.store.geneLimit," genes or fewer.")},r.createElement(d.a,{className:a.a.icon,name:"exclamation-circle"}),r.createElement(Qt.a,{sampleCount:this.store.approxSampleCount,queryProductLimit:y.b.serverConfig.query_product_limit,email:y.b.serverConfig.skin_email_contact}))):null}}])&&Xt(n.prototype,o),i&&Xt(n,i),t}();nn([L.computed],rn.prototype,"selectedGeneListOption",null),nn([L.computed],rn.prototype,"geneListOptions",null),nn([Bt.bind,L.action],rn.prototype,"handleOQLUpdate",null),nn([L.computed],rn.prototype,"customError",null);var on,an=rn=nn([s.observer],rn),sn=n(692);!function(e){e.custom="-1",e.mutation_cna="w_mut_cna",e.mutation="w_mut",e.cna="w_cna",e.all="all"}(on||(on={}));var ln=[{name:"All",description:"All cases in the selected cohorts",value:on.all,isdefault:!1},{name:"Cases with mutations data",description:"All cases with mutations data",value:on.mutation,isdefault:!1},{name:"Cases with copy number alterations data",description:"All cases with copy number alterations data",value:on.cna,isdefault:!1},{name:"Cases with both mutations and copy number alterations data",description:"All cases with both mutations and copy number alterations data",value:on.mutation_cna,isdefault:!1},{name:"User-defined Case List",description:"Specify your own case list",value:on.custom,isdefault:!0}];function un(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cn(e,t){return!t||"object"!==fn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pn(e){return(pn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dn(e,t){return(dn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fn(e){return(fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var hn=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":fn(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};function mn(e,t){return c.includes(e.textLabel.toLowerCase(),t.toLowerCase())}var yn=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=cn(this,pn(t).apply(this,arguments))).isQueryModified=!1,e.CaseIdsModeRadio=Object(s.observer)(function(t){return r.createElement("label",null,r.createElement("input",{type:"radio",checked:e.store.caseIdsMode==t.state,onChange:function(n){n.currentTarget.checked&&(e.store.caseIdsMode=t.state)}}),t.label)}),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dn(e,t)}(t,f["d"]),n=t,(o=[{key:"render",value:function(){var e=this;return!this.isQueryModified&&this.props.modifyQueryParams&&this.modifyQuery(),this.store.selectableSelectedStudyIds.length?r.createElement(u.b,{padded:!0,overflow:!0,className:a.a.CaseSetSelector,"data-test":"CaseSetSelector"},r.createElement("div",null,r.createElement(m.a,{className:"sectionLabel",secondaryComponent:r.createElement("a",{href:Object(ze.B)(this.store.selectableSelectedStudyIds),target:"_blank"},"To build your own case set,",r.createElement("br",null),"try out our enhanced Study View."),promises:[this.store.sampleLists,this.store.asyncCustomCaseSet,this.store.profiledSamplesCount]},"Select Patient/Case Set:")),r.createElement("div",null,r.createElement(J.default,{value:this.store.selectedSampleListId,options:this.caseSetOptions,filterOption:mn,onChange:function(t){return e.store.selectedSampleListId=t?t.value:void 0},"data-test":"caseSetSelector"}),!(this.store.selectedSampleListId!==f.a)&&r.createElement(u.a,{padded:!0},r.createElement("div",{className:a.a.radioRow},r.createElement(u.b,{padded:!0},r.createElement(this.CaseIdsModeRadio,{label:"By sample ID",state:"sample"}),r.createElement(this.CaseIdsModeRadio,{label:"By patient ID",state:"patient"}))),r.createElement("span",null,"Enter case IDs below:"),r.createElement("textarea",{title:"Enter case IDs",rows:6,cols:80,value:this.store.caseIds,onChange:function(t){return e.store.caseIds=t.currentTarget.value},"data-test":"CustomCaseSetInput"})))):null}},{key:"modifyQuery",value:function(){this.store.selectedSampleListId=this.props.modifyQueryParams.selectedSampleListId,this.store.caseIds=this.props.modifyQueryParams.selectedSampleIds.join("\n"),this.store.caseIdsMode=this.props.modifyQueryParams.caseIdsMode,this.isQueryModified=!0}},{key:"caseSetOptions",get:function(){var e,t,n,o=this.store.sampleLists.result.map(function(e){return{label:r.createElement(h.c,{placement:"right",mouseEnterDelay:0,overlay:r.createElement("div",{className:a.a.tooltip},e.description)},r.createElement("span",null,"".concat(e.name," (").concat(e.sampleCount,")"))),value:e.sampleListId,textLabel:e.name}}),i=(e=this.store.isVirtualStudySelected,t=this.store.isMultipleNonVirtualStudiesSelected,n=this.store.profiledSamplesCount.result,c.reduce(ln,function(r,o){if(o.isdefault)r.push(o);else if(t&&!e){var i=n[o.value];i>0&&r.push(Object.assign({},o,{name:"".concat(o.name," (").concat(i,")")}))}else if(e&&o.value===on.all){var a=n[o.value];a>0&&r.push(Object.assign({},o,{name:"".concat(o.name," (").concat(a,")")}))}return r},[])).map(function(e){return{value:e.value,label:r.createElement(h.c,{placement:"right",mouseEnterDelay:0,overlay:r.createElement("div",{className:a.a.tooltip},e.description)},r.createElement("span",null,e.name)),textLabel:e.name}});return o.concat(i)}}])&&un(n.prototype,o),i&&un(n,i),t}();hn([L.computed],yn.prototype,"caseSetOptions",null),hn([L.action],yn.prototype,"modifyQuery",null);var gn=yn=hn([s.observer],yn);function vn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bn(e,t){return!t||"object"!==wn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Sn(e){return(Sn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _n(e,t){return(_n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wn(e){return(wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var En=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":wn(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},On=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),bn(this,Sn(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_n(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return this.props.ids.length>0?r.createElement("div",{className:"alert alert-danger","data-test":"unkown-study-warning",style:{marginBottom:0}},r.createElement("i",{className:"fa fa-exclamation-triangle"})," The following studies do not exist or you do not have access to them:",r.createElement("ul",{style:{margin:"10px 0"}},this.props.ids.map(function(e){return r.createElement("li",null,e)})),"Please resubmit your query below."):null}}])&&vn(n.prototype,o),i&&vn(n,i),t}(),Cn=On=En([s.observer],On),Pn=n(8),xn=n(968),Tn=n(830),kn=n(65);function An(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function In(e){return(In=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Dn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mn(e,t){return(Mn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jn(e){return(jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Nn=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":jn(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Rn=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=In(t).call(this,e))||"object"!==jn(o)&&"function"!=typeof o?Dn(r):o)._showQueryControls=!1,n.handleSubmit=n.handleSubmit.bind(Dn(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mn(e,t)}(t,r["Component"]),n=t,(o=[{key:"handleSubmit",value:function(){this.store.submit(),this.props.onSubmit&&this.props.onSubmit()}},{key:"toggleQueryControls",value:function(){z()(document).scrollTop(0),this._showQueryControls=!this._showQueryControls}},{key:"render",value:function(){var e=this;return r.createElement(u.a,{padded:!0,overflow:!0,className:B()("small",a.a.QueryContainer,{forkedMode:this.props.forkedMode})},this.props.showAlerts&&this.store.genes.isComplete&&this.store.genes.result.suggestions.length>0&&r.createElement("div",{className:"alert alert-danger","data-test":"invalidQueryAlert",style:{marginBottom:0}},r.createElement("i",{className:"fa fa-exclamation-triangle"})," Your query has invalid or out-dated gene symbols. Please correct below."),this.store.unknownStudyIds.isComplete&&r.createElement(Cn,{ids:this.store.unknownStudyIds.result}),this.store.forDownloadTab&&r.createElement("div",{className:"alert alert-danger",role:"alert"},"The Download interface has been removed. Enhanced download functionality is now available through the Query interface. Run a query with your gene(s) of interest and use the Download tab to download all available data types."),!this.store.forDownloadTab&&r.createElement($e.If,{condition:0===this.store.defaultSelectedIds.size||this.studiesDataReady},r.createElement($e.Then,null,r.createElement($e.If,{condition:this.props.forkedMode&&this.showQueryControls},r.createElement(u.b,{className:a.a.StudySelection},r.createElement(m.a,{className:"sectionLabel"},"Selected Studies:"," ",r.createElement("button",{"data-test":"modifyStudySelectionButton",className:"btn btn-default btn-xs",onClick:this.toggleQueryControls},"Modify")),r.createElement("div",{style:{marginLeft:8}},this.selectedStudySummary))),this.getWrappedCancerStudySelector,r.createElement($e.If,{condition:this.showQueryControls},r.createElement(r.Fragment,null,this.store.physicalStudyIdsInSelection.length>1?r.createElement(j,null):r.createElement(C,null),this.store.selectableSelectedStudyIds.length>0&&r.createElement(gn,{modifyQueryParams:this.props.modifyQueryParams}),r.createElement(an,null),!!this.store.isGenesetProfileSelected&&r.createElement(Ve,null),!!this.store.forDownloadTab&&r.createElement("span",{className:a.a.downloadSubmitExplanation},"Clicking submit will generate a tab-delimited file containing your requested data."),!!this.store.forDownloadTab&&r.createElement(ye.a,{labelProps:{className:a.a.transposeDataMatrix},checked:this.store.transposeDataMatrix,onChange:function(t){return e.store.transposeDataMatrix=t.currentTarget.checked}},"Transpose data matrix"),r.createElement(u.b,{overflow:!0,padded:!0,className:B()(a.a.submitRow,"posRelative")},r.createElement("button",{style:{paddingLeft:50,paddingRight:50,marginRight:50},disabled:!this.store.submitEnabled,className:"btn btn-primary btn-lg",onClick:function(){return e.handleSubmit()},"data-test":"queryButton"},this.store.forDownloadTab?"Download":"Submit Query")))),r.createElement($e.If,{condition:!this.showQueryControls},r.createElement(u.b,{className:a.a.forkedButtons},r.createElement("div",{style:{width:330,textAlign:"right",marginRight:20}},r.createElement(Tn.a,{store:this.store})),r.createElement(h.c,{placement:"top",trigger:["hover"],destroyTooltipOnHide:!0,mouseEnterDelay:0,mouseLeaveDelay:0,disabled:this.store.selectableSelectedStudies.length>0,overlay:this.queryByGeneTooltipMessage},r.createElement("a",{"data-test":"queryByGeneButton",onClick:function(){return e.store.hasSelectedStudies&&e.toggleQueryControls()},"data-event":Object(kn.e)({action:"clickQueryByGeneButton",label:"",category:"homePage"}),className:B()("btn btn-primary btn-lg",{disabled:!this.store.hasSelectedStudies})},"Query By Gene")),"OR",r.createElement(h.c,{placement:"top",trigger:["hover"],destroyTooltipOnHide:!0,mouseEnterDelay:0,mouseLeaveDelay:0,disabled:!this.exploreCohortsButtonDisabled,overlay:this.exploreCohortsButtonTooltipMessage},r.createElement("a",{onClick:function(){return!e.exploreCohortsButtonDisabled&&e.store.openSummary()},"data-event":Object(kn.e)({action:"clickExploreStudiesButton",label:"",category:"homePage"}),className:B()("btn btn-primary btn-lg",{disabled:this.exploreCohortsButtonDisabled})},r.createElement("i",{style:{marginTop:5},className:"ci ci-pie-chart"})," ","Explore Selected Studies"))))),r.createElement($e.Else,null,r.createElement(P.a,{isLoading:!0,center:!0,size:"big"}))))}},{key:"store",get:function(){return this.props.store}},{key:"studiesDataReady",get:function(){return this.store.studiesHaveChangedSinceInitialization||this.store.selectableStudiesSet.isComplete&&this.store.initiallySelected.profileIds&&this.store.cancerTypes.isComplete&&this.store.cancerStudies.isComplete&&this.store.profiledSamplesCount.isComplete}},{key:"showQueryControls",get:function(){return!1===this.props.forkedMode||this._showQueryControls}},{key:"selectedStudySummary",get:function(){var e=this,t=null;if(this.store.selectableSelectedStudies.length>4){t=r.createElement("span",{className:"inlineBlock"},r.createElement(h.c,{overlay:function(){return e.store.selectableSelectedStudies.slice(4).map(function(e){return r.createElement("div",null,e.name)})}},r.createElement("a",null,"and"," ",this.store.selectableSelectedStudies.length-4," ","more")))}return r.createElement("span",{className:"inlineBlock"},this.store.selectableSelectedStudies.slice(0,4).reduce(function(e,t,n,o){return e.push(r.createElement("span",{className:a.a.studyName},t.name)),e},[]),t,t&&r.createElement("span",null,""),"(",r.createElement("b",null,this.store.profiledSamplesCount.result.all)," ",1===this.store.profiledSamplesCount.result.all?"sample":"total samples",")")}},{key:"getWrappedCancerStudySelector",get:function(){var e=r.createElement(l.a,{queryStore:this.store,forkedMode:this.props.forkedMode});return this.props.forkedMode?r.createElement("div",{style:{marginTop:0}},r.createElement(xn.Fade,{duration:500,collapse:!1,className:"monkeys",unmountOnExit:!0,when:!this.showQueryControls},e)):e}},{key:"studyLimitedReached",get:function(){return this.store.selectableSelectedStudyIds.length>50}},{key:"exploreCohortsButtonDisabled",get:function(){return this.studyLimitedReached||!this.store.hasSelectedStudies}},{key:"exploreCohortsButtonTooltipMessage",get:function(){return 0===this.store.selectableSelectedStudyIds.length?"Please select at least one study above":this.studyLimitedReached?"Too many studies selected for study summary (limit: 50)":"Open summary of selected studies"}},{key:"queryByGeneTooltipMessage",get:function(){return 0===this.store.selectableSelectedStudies.length?"Please select at least one study above":"Continue to query configuration"}}])&&An(n.prototype,o),i&&An(n,i),t}();Nn([L.computed],Rn.prototype,"studiesDataReady",null),Nn([L.observable],Rn.prototype,"_showQueryControls",void 0),Nn([L.computed],Rn.prototype,"showQueryControls",null),Nn([L.computed],Rn.prototype,"selectedStudySummary",null),Nn([L.computed],Rn.prototype,"getWrappedCancerStudySelector",null),Nn([Pn.default],Rn.prototype,"toggleQueryControls",null),Nn([L.computed],Rn.prototype,"studyLimitedReached",null),Nn([L.computed],Rn.prototype,"exploreCohortsButtonDisabled",null),Nn([L.computed],Rn.prototype,"exploreCohortsButtonTooltipMessage",null),Nn([L.computed],Rn.prototype,"queryByGeneTooltipMessage",null);var Ln,Gn=Rn=Nn([Object(sn.b)(f.c),s.observer],Rn),Fn=n(605),Bn=n(88),Vn=n(178);!function(e){e.STUDY="STUDY",e.STUDY_COUNT="studies",e.GENE="GENE",e.GENE_COUNT="genes",e.PATIENT="PATIENT",e.PATIENT_COUNT="patients",e.SAMPLE="SAMPLE",e.SAMPLE_COUNT="samples"}(Ln||(Ln={}));n(978);var zn=n(697),qn=n(979),Un=n(711),Hn=n.n(Un),Wn=n(127),Kn=n(89);function $n(){return($n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Qn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yn(e){return(Yn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zn(e,t){return(Zn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Jn(e){return(Jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var er,tr=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Jn(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},nr=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},rr=20,or=3;!function(e){e[e.SESSION=0]="SESSION",e[e.STUDY_LIST=1]="STUDY_LIST"}(er||(er={}));var ir=function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=Yn(t).apply(this,arguments),(e=!r||"object"!==Jn(r)&&"function"!=typeof r?Xn(n):r).studyPageMultiplier=0,e.genePageMultiplier=0,e.patientPageMultiplier=0,e.samplePageMultiplier=0,e.inputValue="",e.isFocusing=!1,e.isLoading=!1,e.geneStudyQueryVirtualStudy=Object(h.S)(function(){return nr(Xn(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=y.b.serverConfig.default_cross_cancer_study_session_id,!y.a.sessionServiceIsEnabled()||!t){e.next=14;break}return e.prev=2,e.next=5,Wn.a.getVirtualStudy(t);case 5:return n=e.sent,e.abrupt("return",n);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:e.next=15;break;case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}},e,null,[[2,9]])}))},null),e.geneStudyQuery=Object(h.S)({await:function(){return[e.geneStudyQueryVirtualStudy]},invoke:function(){return e.geneStudyQueryVirtualStudy.result?Promise.resolve({type:er.SESSION,query:e.geneStudyQueryVirtualStudy.result.id,name:e.geneStudyQueryVirtualStudy.result.data.name}):Promise.resolve({type:er.STUDY_LIST,query:y.b.serverConfig.default_cross_cancer_study_list,name:y.b.serverConfig.default_cross_cancer_study_list_name})}}),e.options=Object(h.S)({await:function(){return[e.geneStudyQuery]},invoke:function(){var t=e.inputValue,n=e.geneStudyQuery.result;return t.length>0?Promise.all([Vn.a.getAllStudiesUsingGETWithHttpInfo({keyword:t,pageSize:or+rr*e.studyPageMultiplier}),Vn.a.getAllStudiesUsingGETWithHttpInfo({keyword:t,projection:"META"}),Vn.a.getAllGenesUsingGETWithHttpInfo({keyword:t,pageSize:or+rr*e.genePageMultiplier}),Vn.a.getAllGenesUsingGETWithHttpInfo({keyword:t,projection:"META"}),Vn.a.getAllPatientsUsingGETWithHttpInfo({keyword:t,pageSize:or+rr*e.patientPageMultiplier,projection:"DETAILED"}),Vn.a.getAllPatientsUsingGETWithHttpInfo({keyword:t,projection:"META"}),Vn.a.getSamplesByKeywordUsingGETWithHttpInfo({keyword:t,pageSize:or+rr*e.samplePageMultiplier}),Vn.a.getSamplesByKeywordUsingGETWithHttpInfo({keyword:t,projection:"META"}),Object(zn.a)(0)]).then(function(r){return nr(Xn(e),void 0,void 0,regeneratorRuntime.mark(function e(){var o,i,a,s,l,u,c,p,d,f,h,m=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=r[0].body.map(this.studyToOption),i={value:parseInt(r[1].headers["total-count"])-o.length,type:Ln.STUDY_COUNT},a=r[2].body.map(this.geneToOption),s={value:parseInt(r[3].headers["total-count"])-a.length,type:Ln.GENE_COUNT},l=r[4].body.map(this.patientToOption),u={value:parseInt(r[5].headers["total-count"])-l.length,type:Ln.PATIENT_COUNT},c=r[6].body.map(this.sampleToOption),p={value:parseInt(r[7].headers["total-count"])-c.length,type:Ln.SAMPLE_COUNT},!(a.length+l.length<2*or&&i.value>0)){e.next=13;break}return d=2*or-(a.length+l.length),e.next=12,Vn.a.getAllStudiesUsingGETWithHttpInfo({keyword:t,pageSize:d+or+rr*this.studyPageMultiplier}).then(function(e){o=e.body.map(m.studyToOption)});case 12:i.value=i.value-d;case 13:return f=[],(h=[]).push({label:"Studies",options:o,groupData:i,instruction:"Click on a study to open its summary"}),i.value>0&&(o.push(i),f.push(i)),n&&(h.push({label:"Genes",options:a,groupData:s,instruction:"Click on a gene to query it across ".concat(n.name)}),s.value>0&&(a.push(s),f.push(s))),h.push({label:"Patients",options:l,groupData:u,instruction:"Click on a patient to see a summary"}),u.value>0&&(l.push(u),f.push(u)),h.push({label:"Samples",options:c,groupData:p,instruction:"Click on a sample to open its summary"}),p.value>0&&(c.push(p),f.push(p)),e.abrupt("return",h);case 23:case"end":return e.stop()}},e,this)}))}):Promise.resolve([])}}),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zn(e,t)}(t,r["Component"]),n=t,(o=[{key:"selectRef",value:function(e){this.select=e}},{key:"studyToOption",value:function(e,t){return{value:e.studyId,type:Ln.STUDY,studyId:e.studyId,name:e.name,allSampleCount:e.allSampleCount,index:t}}},{key:"geneToOption",value:function(e,t){return{value:e.entrezGeneId,type:Ln.GENE,hugoGeneSymbol:e.hugoGeneSymbol,cytoband:e.cytoband,index:t}}},{key:"patientToOption",value:function(e,t){return{value:e.uniquePatientKey,type:Ln.PATIENT,studyId:e.studyId,patientId:e.patientId,studyName:e.cancerStudy.name,index:t}}},{key:"sampleToOption",value:function(e,t){return{value:e.sampleId,type:Ln.SAMPLE,studyId:e.studyId,studyName:this.studies.get(e.studyId),patientId:e.patientId,sampleType:e.sampleType,index:t}}},{key:"handleChange",value:function(e){var t,n;if(e.type===Ln.STUDY)t={id:e.studyId},n=Kn.a.Study,this.trackClick(Kn.a.Study,this.inputValue);else if(e.type===Ln.GENE){var r=this.geneStudyQuery.isComplete&&this.geneStudyQuery.result.query;t={case_set_id:"all",gene_list:e.hugoGeneSymbol,cancer_study_list:r},n="results/cancerTypesSummary",this.trackClick("gene",this.inputValue)}else e.type===Ln.PATIENT?(t={studyId:e.studyId,caseId:e.patientId},n=Kn.a.Patient,this.trackClick(Kn.a.Patient,this.inputValue)):e.type===Ln.SAMPLE?(t={studyId:e.studyId,sampleId:e.value},n=Kn.a.Patient,this.trackClick("sample",this.inputValue)):e.type===Ln.STUDY_COUNT?this.studyPageMultiplier++:e.type===Ln.GENE_COUNT?this.genePageMultiplier++:e.type===Ln.PATIENT_COUNT?this.patientPageMultiplier++:e.type===Ln.SAMPLE_COUNT&&this.samplePageMultiplier++;n&&Object(h.B)().routingStore.updateRoute(t,n)}},{key:"trackClick",value:function(e,t){Object(kn.f)({category:"quickSearch",action:e,label:t})}},{key:"handleInputChange",value:function(e,t){var n=t.action;"set-value"!==n&&(e!=this.inputValue&&(this.studyPageMultiplier=0,this.genePageMultiplier=0,this.patientPageMultiplier=0,this.samplePageMultiplier=0),"input-change"===n&&(this.inputValue=e)),"input-blur"===n&&(this.isFocusing=!1)}},{key:"onFocus",value:function(){this.isFocusing=!0}},{key:"renderInput",value:function(e){return delete e.value,console.log(e),r.createElement("div",{className:"Select-input"},r.createElement("input",$n({placeholder:"e.g. Lung, EGFR, TCGA-OR-A5J2"},e)))}},{key:"render",value:function(){return r.createElement("div",{onFocusCapture:this.onFocus},r.createElement(Bn.default,{options:this.options.result||[],autoFocus:!0,onInputChange:this.handleInputChange,onChange:this.handleChange,components:{Group:sr,GroupHeading:lr},formatOptionLabel:ur,controlShouldRenderValue:!1,filterOption:!1,inputValue:this.inputValue,isLoading:this.options.isPending,placeholder:"e.g. Lung, EGFR, TCGA-OR-A5J2",noOptionsMessage:function(){return"No results"},blurInputOnSelect:!1,closeMenuOnSelect:!1,onSelectResetsInput:!1,menuIsOpen:this.menuIsOpen,maxMenuHeight:550,styles:{dropdownIndicator:function(){return{display:"none"}},control:function(e){return Object.assign(Object.assign({},e),{cursor:"text"})},option:function(e,t){return t.isSelected?Object.assign(Object.assign({},e),{backgroundColor:"inherit",color:"inherit",":hover":{backgroundColor:"#DEEBFF"}}):Object.assign({},e)}}}),r.createElement("p",{style:{fontSize:"x-small",textAlign:"center",paddingTop:15}},"We would love to hear what you think:",r.createElement("a",{href:"mailto:cbioportal@googlegroups.com"},"cbioportal@googlegroups.com")))}},{key:"menuIsOpen",get:function(){return this.isFocusing&&this.inputValue.length>0}},{key:"studies",get:function(){return this.props.studies.reduce(function(e,t){return e.set(t.studyId,t.name),e},new Map)}}])&&Qn(n.prototype,o),i&&Qn(n,i),t}();tr([L.observable],ir.prototype,"studyPageMultiplier",void 0),tr([L.observable],ir.prototype,"genePageMultiplier",void 0),tr([L.observable],ir.prototype,"patientPageMultiplier",void 0),tr([L.observable],ir.prototype,"samplePageMultiplier",void 0),tr([L.observable],ir.prototype,"inputValue",void 0),tr([L.observable],ir.prototype,"isFocusing",void 0),tr([L.observable],ir.prototype,"isLoading",void 0),tr([L.computed],ir.prototype,"menuIsOpen",null),tr([L.computed],ir.prototype,"studies",null),tr([Pn.default],ir.prototype,"selectRef",null),tr([Pn.default],ir.prototype,"sampleToOption",null),tr([Pn.default,L.action],ir.prototype,"handleChange",null),tr([Pn.default,L.action],ir.prototype,"handleInputChange",null),tr([Pn.default,L.action],ir.prototype,"onFocus",null),tr([Pn.default],ir.prototype,"renderInput",null);var ar=ir=tr([s.observer],ir),sr=function(e){var t=e.data.groupData;t.value,Hn()(t.type,t.value),t.value<rr&&t.value;return r.createElement("div",{className:qn.optionGroup},r.createElement("div",{className:qn.groupHeader},e.data.instruction),r.createElement(Bn.components.Group,e))},lr=function(e){return null};function ur(e){var t,n,o;return e.type===Ln.STUDY?(t=e.name,n="primary",o=e.allSampleCount+" samples","Select a study to open its summary"):e.type===Ln.GENE?(t=e.hugoGeneSymbol,n="success",o=e.cytoband||"-","Select a gene to query it across all TCGA PanCancer Atlas studies"):e.type===Ln.PATIENT?(t=e.patientId,n="danger",o=e.studyName,"Select a patient to see a summary"):e.type===Ln.SAMPLE?(t=e.value,n="warning",o="".concat(e.studyName?e.studyName:e.studyId),"Select a sample to open its summary"):t=e.value+" more "+Hn()(e.type,e.value)+" (click to load "+(e.value<rr?e.value:rr)+" more)",r.createElement("div",{className:qn.optionWrapper},n&&r.createElement("div",{className:qn.optionLabelWrapper},r.createElement(R.Label,{bsStyle:n},e.type)),r.createElement("div",null,r.createElement("div",null,r.createElement("strong",null,t)),o&&r.createElement("small",null,o)))}function cr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pr(e,t){return!t||"object"!==hr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dr(e){return(dr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fr(e,t){return(fr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hr(e){return(hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var mr=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":hr(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},yr="quickSearch",gr="defaultHomePageTab",vr=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=pr(this,dr(t).call(this,e)),e.showQuickSearchTab&&Object(h.B)().localStorage.getItem(gr)===yr&&(n.activeTabId=Object(h.B)().localStorage.getItem(gr)),n.store=e.getQueryStore(),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fr(e,t)}(t,r["Component"]),n=t,(o=[{key:"setDefaultTab",value:function(e){this.props.showQuickSearchTab&&(Object(h.B)().localStorage.defaultHomePageTab=e===yr?yr:void 0)}},{key:"trackQuickSearch",value:function(){Object(kn.f)({category:"quickSearch",action:"quickSearchLoad"})}},{key:"onSelectTab",value:function(e){this.store.forDownloadTab="download"===e,this.activeTabId=e}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:a.a.QueryAndDownloadTabs},r.createElement($e.If,{condition:y.b.serverConfig.skin_citation_rule_text},r.createElement("div",{className:"citationRule",dangerouslySetInnerHTML:{__html:y.b.serverConfig.skin_citation_rule_text}})),r.createElement(Fn.b,{activeTabId:this.activeTabId,onTabClick:this.onSelectTab,className:"mainTabs"},r.createElement(Fn.a,{id:"advanced",linkText:"Query",onTabDidMount:function(){return e.setDefaultTab(void 0)}},r.createElement(Gn,{forkedMode:this.props.forkedMode,onSubmit:this.props.onSubmit,store:this.store,modifyQueryParams:this.props.modifyQueryParams,showAlerts:this.props.showAlerts})),r.createElement(Fn.a,{id:yr,linkText:r.createElement("span",null,"Quick Search"," ",r.createElement("strong",{className:"beta-text"},"Beta!")),hide:!this.props.showQuickSearchTab,onTabDidMount:function(){e.setDefaultTab(yr),e.trackQuickSearch()}},r.createElement("div",null,this.store.cancerStudies.isComplete&&r.createElement(ar,{studies:this.store.cancerStudies.result}))),r.createElement(Fn.a,{id:"download",linkText:"Download",hide:!this.props.showDownloadTab,onTabDidMount:function(){return e.setDefaultTab(void 0)}},r.createElement(Gn,{forkedMode:!1,onSubmit:this.props.onSubmit,store:this.store,showAlerts:this.props.showAlerts}))))}},{key:"quickSearchDefaulted",get:function(){return Object(h.B)().localStorage.getItem(gr)===yr}}])&&cr(n.prototype,o),i&&cr(n,i),t}();vr.defaultProps={forkedMode:!0},mr([L.observable.ref],vr.prototype,"store",void 0),mr([L.observable],vr.prototype,"activeTabId",void 0),mr([Pn.default],vr.prototype,"setDefaultTab",null),mr([Pn.default,L.action],vr.prototype,"onSelectTab",null),vr=mr([s.observer],vr);t.a=vr},function(e,t,n){"use strict";var r=n(0),o=n(4),i=n.n(o),a=n(7),s=n(640),l=n.n(s),u=n(2),c=n(684),p=n(599),d=n.n(p),f=n(600),h=n(843),m=n(846),y=n(8),g=n(847),v=n(581),b=n(576),S=n(56),_=n(580),w=n(582),E=n(844),O=n(845),C=n(3);function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var D=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":I(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},M=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=T(this,k(t).apply(this,arguments))).dragging=!1,e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,r["Component"]),n=t,(o=[{key:"svgRef",value:function(e){this.svgContainer=e&&e.children?e.children[0]:null}},{key:"handleSelection",value:function(e,t,n){this.props.onSelection(e[0].data.map(function(e){return e.hugoGeneSymbol}))}},{key:"handleSelectionCleared",value:function(){this.tooltipModel&&this.props.onGeneNameClick(this.tooltipModel.datum.hugoGeneSymbol,this.tooltipModel.datum.entrezGeneId),this.props.onSelectionCleared()}},{key:"onMouseOver",value:function(e,t,n){this.tooltipModel={datum:e,x:t,y:n}}},{key:"onMouseOut",value:function(){this.tooltipModel=null}},{key:"getTooltip",value:function(){return this.tooltipModel?r.createElement(S.Popover,{className:"cbioTooltip",positionLeft:this.tooltipModel.x+15,positionTop:this.tooltipModel.y-44},"Gene: ",this.tooltipModel.datum.hugoGeneSymbol,r.createElement("br",null),"Log Ratio:"," ",Object(_.a)(this.tooltipModel.datum.logRatio),r.createElement("br",null),"Alteration Frequency in ",this.props.xGroupName,":"," ",this.tooltipModel.datum.x.toFixed(),"%",r.createElement("br",null),"Alteration Frequency in ",this.props.yGroupName,":"," ",this.tooltipModel.datum.y.toFixed(),"%",r.createElement("br",null),"p-Value:"," ",Object(w.b)(this.tooltipModel.datum.pValue,3,.01),r.createElement("br",null),"q-Value:"," ",Object(w.b)(this.tooltipModel.datum.qValue,3,.01)):r.createElement("span",null)}},{key:"onClick",value:function(){this.dragging||this.handleSelectionCleared(),this.dragging=!1}},{key:"onSelectionComponentRender",value:function(){this.dragging=!0}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:"posRelative"},r.createElement("div",{className:"borderedChart inlineBlock",style:{position:"relative"},onClick:this.onClick},r.createElement(v.VictoryChart,{containerComponent:this.containerComponent,theme:b.d,domainPadding:{x:[0,20],y:[0,20]},height:350,width:350,padding:{top:40,bottom:60,left:60,right:40}},r.createElement(v.VictoryAxis,P({domain:[0,this.plotDomainMax],label:this.xLabel,style:{tickLabels:{padding:5},axisLabel:{padding:27},ticks:{size:3},grid:{strokeOpacity:1}},crossAxis:!1,orientation:"bottom",offsetY:45},this.tickProps)),r.createElement(v.VictoryAxis,P({domain:[0,this.plotDomainMax],dependentAxis:!0,label:this.yLabel,style:{tickLabels:{padding:5},axisLabel:{padding:32},ticks:{size:3},grid:{strokeOpacity:1}},crossAxis:!1,orientation:"left",offsetX:45},this.tickProps)),r.createElement(v.VictoryLine,{style:{data:{stroke:"#cccccc",strokeWidth:1,strokeDasharray:"10,5"}},data:[{x:0,y:0},{x:this.plotDomainMax,y:this.plotDomainMax}]}),r.createElement(v.VictoryScatter,{style:{data:{fillOpacity:.4}},data:this.splitData.insignificant,dataComponent:r.createElement(O.a,{onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,fill:function(t){return t.hugoGeneSymbol in e.props.selectedGenesSet?"#FE9929":"#D3D3D3"}}),symbol:"circle",size:3}),r.createElement(v.VictoryScatter,{style:{data:{fillOpacity:.6}},data:this.splitData.significant,dataComponent:r.createElement(O.a,{onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,fill:function(t){return t.hugoGeneSymbol in e.props.selectedGenesSet?"#FE9929":"#58ACFA"}})})),r.createElement(C.d,{getSvg:function(){return e.svgContainer},filename:"enrichments-frequency-scatter",dontFade:!0,type:"button",style:{position:"absolute",top:10,right:10,zIndex:0}})),r.createElement(a.Observer,null,this.getTooltip))}},{key:"maxLabelWidth",get:function(){return Object(C.L)(this.props.xGroupName,"Arial","13px")+Object(C.L)(this.props.yGroupName,"Arial","13px")>150?75:90}},{key:"xLabel",get:function(){return"Altered Frequency in ".concat(Object(C.cb)(this.props.xGroupName,this.maxLabelWidth,"Arial","13px")," (%)")}},{key:"yLabel",get:function(){return"Altered Frequency in ".concat(Object(C.cb)(this.props.yGroupName,this.maxLabelWidth,"Arial","13px")," (%)")}},{key:"splitData",get:function(){var e=[],t=[],n=!0,r=!1,o=void 0;try{for(var i,a=this.props.data[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;s.qValue<.05?e.push(s):t.push(s)}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return{significant:e,insignificant:t}}},{key:"plotDomainMax",get:function(){var e=0,t=0,n=!0,r=!1,o=void 0;try{for(var i,a=this.props.data[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;e=Math.max(e,s.x),t=Math.max(t,s.y)}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return Math.max(e,t)}},{key:"containerComponent",get:function(){var e=this;return r.createElement(v.VictorySelectionContainer,{containerRef:this.svgRef,onSelection:function(t,n,r){return e.handleSelection(t,n,r)},responsive:!1,onSelectionCleared:this.handleSelectionCleared,activateSelectedData:!1,selectionComponent:r.createElement(E.a,{onRender:this.onSelectionComponentRender})})}},{key:"tickProps",get:function(){return this.plotDomainMax>40?{tickValues:[0,25,50,75]}:this.plotDomainMax>20?{tickValues:[0,10,20,30,40]}:this.plotDomainMax>10?{tickValues:[0,5,10,15,20]}:{tickCount:4}}}])&&x(n.prototype,o),i&&x(n,i),t}();D([u.observable],M.prototype,"tooltipModel",void 0),D([u.observable],M.prototype,"svgContainer",void 0),D([y.default,u.action],M.prototype,"svgRef",null),D([u.computed],M.prototype,"maxLabelWidth",null),D([u.computed],M.prototype,"xLabel",null),D([u.computed],M.prototype,"yLabel",null),D([u.computed],M.prototype,"splitData",null),D([u.computed],M.prototype,"plotDomainMax",null),D([y.default,u.action],M.prototype,"onMouseOver",null),D([y.default,u.action],M.prototype,"onMouseOut",null),D([y.default],M.prototype,"getTooltip",null),D([y.default],M.prototype,"onClick",null),D([y.default],M.prototype,"onSelectionComponentRender",null),D([u.computed],M.prototype,"tickProps",null);var j=M=D([a.observer],M),N=n(986),R=n.n(N),L=function(e){e.height;return r.createElement("div",{className:R.a.wrapper,style:{width:e.width}},r.createElement("div",{className:R.a.groupRow},r.createElement("div",{style:{width:"".concat(e.group1Width,"%"),background:e.group1Color}}),r.createElement("div",{style:{width:"".concat(e.group2Width,"%"),background:e.group2Color}})),r.createElement("div",{className:R.a.alterationRow},r.createElement("div",{style:{width:"".concat(e.group1Unprofiled,"%"),background:"white",position:"relative"}},r.createElement("div",{className:R.a.strike})),r.createElement("div",{style:{width:"".concat(e.group1Unaltered,"%"),background:"transparent"}}),r.createElement("div",{style:{width:"".concat(e.group1Altered,"%"),background:"#3786C2"}}),r.createElement("div",{style:{width:"".concat(e.group2Altered,"%"),background:"#3786C2"}}),r.createElement("div",{style:{width:"".concat(e.group2Unprofiled,"%"),background:"white",position:"absolute",right:0}},r.createElement("div",{className:R.a.strike}))))},G=n(734),F=n(88),B=n(662),V=n(987),z=n.n(V);function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e,t,n){return t&&U(e.prototype,t),n&&U(e,n),e}function W(e,t){return!t||"object"!==X(t)&&"function"!=typeof t?K(e):t}function K(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Z=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":X(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},J=["AMP","HOMDEL"],ee=function(e){function t(){var e;return q(this,t),(e=W(this,$(t).apply(this,arguments))).isGeneSelectionPopupVisible=!1,e}return Q(t,r["Component"]),H(t,[{key:"getTooltip",value:function(e){var t=e.majorCategory;t=t.replace(/\*$/,"");var n=this.geneDataSet[t],o=i.a.map(this.props.groupOrder,function(t){var o=n.groupsSet[t],i={};return e.minorCategory===o.name&&(i={fontWeight:"bold"}),r.createElement("tr",{style:i},r.createElement("td",null,o.name),r.createElement("td",null,o.alteredPercentage.toFixed(2),"% (",o.alteredCount,"/",o.profiledCount,")"))});return r.createElement("div",null,r.createElement("strong",null,t," ",this.yAxislabel),r.createElement("br",null),r.createElement("table",{className:"table table-bordered"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{scope:"col"},"Group"),r.createElement("th",{scope:"col"},"Percentage Altered"))),r.createElement("tbody",null,o)),r.createElement("strong",null,"p-Value"),":"," ",n.pValue?Object(w.b)(n.pValue,3,.01):"-",r.createElement("br",null),r.createElement("strong",null,"q-Value"),":"," ",n.qValue?Object(w.b)(n.qValue,3,.01):"-")}},{key:"render",value:function(){var e=this;return r.createElement("div",{"data-test":"GeneBarPlotDiv",className:"borderedChart",style:{position:"relative",display:"inline-block"}},this.toolbar,r.createElement("div",{style:{overflow:"auto hidden",position:"relative"}},r.createElement(G.a,{barWidth:10,domainPadding:10,chartBase:300,legendLocationWidthThreshold:800,ticksCount:6,horizontalBars:!1,percentage:!1,stacked:!1,plotData:this.barPlotData,axisStyle:{tickLabels:{fontSize:10}},horzCategoryOrder:this.horzCategoryOrder,vertCategoryOrder:this.props.groupOrder,countAxisLabel:"".concat(this.yAxislabel," (%)"),tooltip:this.getTooltip,categoryToColor:this.props.categoryToColor,containerRef:function(t){return e.svgContainer=t}})))}},{key:"geneListOptions",get:function(){return Object(f.n)(this.props.data,this.props.showCNAInTable)}},{key:"defaultOption",get:function(){return this.geneListOptions.length>1?this.geneListOptions[1]:this.geneListOptions[0]}},{key:"geneDataSet",get:function(){var e=this;return i.a.keyBy(this.props.data,function(t){return e.props.showCNAInTable?t.hugoGeneSymbol+": ".concat(f.b[t.value]):t.hugoGeneSymbol})}},{key:"barPlotData",get:function(){return Object(f.i)(this.geneDataSet,this.barPlotOrderedGenes)}},{key:"barPlotOrderedGenes",get:function(){return this._label===f.c.SYNC_WITH_TABLE?this.tableSelectedGenes:this.selectedGenes?this.props.showCNAInTable?i.a.flatMap(this.selectedGenes,function(e){if(!1===e.alterations)return[e.gene+": AMP",e.gene+": HOMDEL"];var t=[];return i.a.each(e.alterations,function(n){"cna"===n.alteration_type&&"="===n.constr_rel&&J.includes(n.constr_val)&&t.push(e.gene+": "+n.constr_val)}),t}):this.selectedGenes.map(function(e){return e.gene}):this.defaultOption.genes.slice(0,10)}},{key:"horzCategoryOrder",get:function(){return i.a.flatMap(this.barPlotOrderedGenes,function(e){return[e+"*",e]})}},{key:"selectedOption",get:function(){return this._label&&void 0!==this._geneQuery?{label:this._label,value:this._geneQuery}:{label:this.defaultOption.label,value:this.defaultOption.genes.slice(0,10).join("\n")}}},{key:"toolbar",get:function(){var e=this;return r.createElement(r.Fragment,null,r.createElement("div",{style:{zIndex:10,position:"absolute",top:"10px",left:"15px"}},r.createElement("strong",null,this.selectedOption.label)),r.createElement("div",{style:{zIndex:10,position:"absolute",top:"10px",right:"10px"}},r.createElement("div",{className:z.a.ChartControls},r.createElement(C.c,{trigger:["click"],destroyTooltipOnHide:!1,visible:this.isGeneSelectionPopupVisible,onVisibleChange:function(t){e.isGeneSelectionPopupVisible=t},overlay:r.createElement(ne,{options:this.geneListOptions,selectedOption:this.selectedOption,onSelectedGenesChange:function(t,n,r){e._geneQuery=t,e.selectedGenes=n,e._label=r,e.isGeneSelectionPopupVisible=!1},defaultNumberOfGenes:10,containerType:this.props.containerType}),placement:"bottomLeft"},r.createElement("div",null,r.createElement("button",{"data-test":"selectGenes",className:"btn btn-default btn-xs"},"Select genes"))),r.createElement(C.d,{getSvg:function(){return e.svgContainer},filename:"GroupComparisonGeneFrequencyPlot",dontFade:!0,type:"button"}))))}},{key:"tableSelectedGenes",get:function(){return null!==this.props.dataStore.visibleData?this.props.dataStore.visibleData.map(function(e){return e.hugoGeneSymbol}).slice(0,100):[]}},{key:"yAxislabel",get:function(){return this.props.containerType===f.a.MUTATION?"Mutation frequency":"Copy-number alteration frequency"}}]),t}();Z([u.observable],ee.prototype,"tooltipModel",void 0),Z([u.observable],ee.prototype,"_geneQuery",void 0),Z([u.observable],ee.prototype,"selectedGenes",void 0),Z([u.observable],ee.prototype,"_label",void 0),Z([u.observable],ee.prototype,"isGeneSelectionPopupVisible",void 0),Z([u.observable],ee.prototype,"svgContainer",void 0),Z([u.computed],ee.prototype,"geneListOptions",null),Z([u.computed],ee.prototype,"defaultOption",null),Z([u.computed],ee.prototype,"geneDataSet",null),Z([u.computed],ee.prototype,"barPlotData",null),Z([u.computed],ee.prototype,"barPlotOrderedGenes",null),Z([u.computed],ee.prototype,"horzCategoryOrder",null),Z([y.default],ee.prototype,"getTooltip",null),Z([u.computed],ee.prototype,"selectedOption",null),Z([u.computed],ee.prototype,"toolbar",null),Z([u.computed],ee.prototype,"tableSelectedGenes",null),Z([u.computed],ee.prototype,"yAxislabel",null);var te=ee=Z([a.observer],ee),ne=function(e){function t(e){var n;return q(this,t),(n=W(this,$(t).call(this,e))).selectedGenesHasError=!1,n.numberOfGenes=n.props.defaultNumberOfGenes,n.genesToPlot=[],window.genesSelection=K(n),n}return Q(t,r["Component"]),H(t,[{key:"onChangeGeneInput",value:function(e,t,n){var r=i.a.keyBy(t.found,function(e){return e.hugoGeneSymbol.toUpperCase()}),o=i.a.map(e.query,function(e){return e.gene.toUpperCase()});i.a.isEmpty(r)&&i.a.isEmpty(t.suggestions)||(this.selectedGenesHasError=!i.a.every(o,function(e){return e in r})),this.selectedGenesHasError||(this.genesToPlot=e.query),this.geneQuery!==n&&(this._selectedGeneListOption={label:f.c.USER_DEFINED_OPTION,genes:[],value:""}),this._geneQuery=n}},{key:"onGeneListOptionChange",value:function(e){if(this._selectedGeneListOption=e,""!==e.value){var t=this.geneOptionSet[e.label].genes;this._geneQuery=t.slice(0,this.numberOfGenes).join("\n")}else this._geneQuery=""}},{key:"handleTotalInputChange",value:function(e){var t=e.target.value.replace(/[^0-9]/g,"");t<=this.props.maxNumberOfGenes&&(this.numberOfGenes=t)}},{key:"handleTotalInputKeyPress",value:function(e){if(13===e.charCode){if(isNaN(this.numberOfGenes))return void(this.numberOfGenes=0);this.updateGeneQuery()}}},{key:"onBlur",value:function(){isNaN(this.numberOfGenes)?this.numberOfGenes=0:this.updateGeneQuery()}},{key:"updateGeneQuery",value:function(){if(this.numberOfGenes=Number(this.numberOfGenes),this.selectedGeneListOption){var e=this.selectedGeneListOption.label,t=this.geneOptionSet[e].genes;t.length>0&&(this._geneQuery=t.slice(0,this.numberOfGenes).join("\n"))}}},{key:"render",value:function(){var e=this;return r.createElement("div",{style:{width:300}},this.props.options.length>0&&r.createElement("div",{"data-test":"genesSelector"},r.createElement(F.default,{value:this.selectedGeneListOption,options:this.geneListOptions,onChange:this.onGeneListOptionChange,isClearable:!1,isSearchable:!1})),!this.inSyncMode&&!this.isCustomGeneSelection&&r.createElement("div",null,r.createElement("br",null),r.createElement("div",{style:{display:"table-row"}},r.createElement("label",{style:{display:"table-cell",whiteSpace:"nowrap"}},"Number of Genes (max."," ",this.props.maxNumberOfGenes,"): "),r.createElement(S.FormControl,{"data-test":"numberOfGenes",type:"text",value:this.numberOfGenes,onChange:this.handleTotalInputChange,onKeyPress:this.handleTotalInputKeyPress,onBlur:this.onBlur}))),r.createElement("div",null,r.createElement("br",null),!this.inSyncMode&&r.createElement("div",null,r.createElement(B.b,{inputGeneQuery:this.geneQuery,validateInputGeneQuery:!1,callback:this.onChangeGeneInput,location:B.a.ONCOPRINT_HEATMAP}),this.hasUnsupportedOQL&&r.createElement("strong",{style:{display:"block"}},r.createElement("span",{style:{color:"#a71111"}},"OQL ".concat(this.props.containerType===f.a.MUTATION?"":"except AMP and HOMDEL"," is not allowed"))),r.createElement("br",null)),r.createElement("button",{key:"addGenestoBarPlot","data-test":"addGenestoBarPlot",className:"btn btn-sm btn-default",onClick:function(){e.props.onSelectedGenesChange(e._geneQuery,e.genesToPlot,e.selectedGeneListOption.label)},disabled:this.addGenesButtonDisabled},"Submit")))}},{key:"geneListOptions",get:function(){return i.a.map(this.props.options,function(e){return{label:e.label,value:e.genes.join("\n")}})}},{key:"geneOptionSet",get:function(){return i.a.keyBy(this.props.options,function(e){return e.label})}},{key:"selectedGeneListOption",get:function(){if(void 0===this._selectedGeneListOption&&this.props.selectedOption){var e=this.props.selectedOption;return this.geneListOptions.find(function(t){return t.value.startsWith(e.value)})}return this._selectedGeneListOption}},{key:"isCustomGeneSelection",get:function(){return void 0===this.selectedGeneListOption||this.selectedGeneListOption.label===f.c.USER_DEFINED_OPTION}},{key:"geneQuery",get:function(){return void 0===this._geneQuery&&this.props.selectedOption?this.props.selectedOption.value:this._geneQuery||""}},{key:"hasUnsupportedOQL",get:function(){var e=this;return void 0!==i.a.find(this.genesToPlot,function(t){return!!(t.alterations&&t.alterations.length>0)&&(e.props.containerType!==f.a.COPY_NUMBER||void 0!==i.a.find(t.alterations,function(e){return"cna"!==e.alteration_type||"="!==e.constr_rel||!J.includes(e.constr_val)}))})}},{key:"addGenesButtonDisabled",get:function(){return this.inSyncMode?void 0!==this.props.selectedOption&&this.props.selectedOption.label===f.c.SYNC_WITH_TABLE:this.hasUnsupportedOQL||this.props.selectedOption&&this.props.selectedOption.value===this._geneQuery||this.selectedGenesHasError||i.a.isEmpty(this._geneQuery)}},{key:"inSyncMode",get:function(){return this._selectedGeneListOption&&this._selectedGeneListOption.label===f.c.SYNC_WITH_TABLE}}]),t}();ne.defaultProps={maxNumberOfGenes:100},Z([u.observable],ne.prototype,"_geneQuery",void 0),Z([u.observable],ne.prototype,"selectedGenesHasError",void 0),Z([u.observable],ne.prototype,"numberOfGenes",void 0),Z([u.observable],ne.prototype,"_selectedGeneListOption",void 0),Z([u.observable.ref],ne.prototype,"genesToPlot",void 0),Z([u.computed],ne.prototype,"geneListOptions",null),Z([u.computed],ne.prototype,"geneOptionSet",null),Z([u.computed],ne.prototype,"selectedGeneListOption",null),Z([u.computed],ne.prototype,"isCustomGeneSelection",null),Z([u.computed],ne.prototype,"geneQuery",null),Z([y.default,u.action],ne.prototype,"onChangeGeneInput",null),Z([u.computed],ne.prototype,"hasUnsupportedOQL",null),Z([u.computed],ne.prototype,"addGenesButtonDisabled",null),Z([y.default,u.action],ne.prototype,"onGeneListOptionChange",null),Z([u.computed],ne.prototype,"inSyncMode",null),Z([y.default,u.action],ne.prototype,"handleTotalInputChange",null),Z([y.default,u.action],ne.prototype,"handleTotalInputKeyPress",null),Z([y.default,u.action],ne.prototype,"onBlur",null),Z([y.default,u.action],ne.prototype,"updateGeneQuery",null),ne=Z([a.observer],ne);var re=n(584);function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ie(e,t){return!t||"object"!==le(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ue=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":le(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ce=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=ie(this,ae(t).apply(this,arguments))).significanceFilter=!1,e.checkedGenes=[],e._enrichedGroups=e.props.groups.map(function(e){return e.name}),e.dataStore=new g.a(function(){return e.filteredData},function(){return e.highlightedRow},function(t){e.highlightedRow=t}),e}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&se(e,t)}(t,r["Component"]),n=t,(i=[{key:"toggleSignificanceFilter",value:function(){this.significanceFilter=!this.significanceFilter}},{key:"onCheckGene",value:function(e){var t=this.checkedGenes.indexOf(e);-1!==t?this.checkedGenes.splice(t,1):this.checkedGenes.push(e)}},{key:"onGeneNameClick",value:function(e){}},{key:"onSelection",value:function(e){this.selectedGenes=e}},{key:"onSelectionCleared",value:function(){this.selectedGenes=null}},{key:"onChange",value:function(e){this._enrichedGroups=o.map(e,function(e){return e.value})}},{key:"render",value:function(){var e=this;return 0===this.props.data.length?r.createElement("div",{className:"alert alert-info"},"No data/result available"):r.createElement("div",{className:d.a.Container},r.createElement("div",{className:d.a.ChartsPanel,style:{maxWidth:re.a.size.width-60}},this.isTwoGroupAnalysis&&r.createElement(h.a,{data:Object(f.g)(this.data,this.props.store?this.props.store.hugoGeneSymbols:[]),xAxisLeftLabel:this.group2.nameOfEnrichmentDirection||this.group2.name,xAxisRightLabel:this.group1.nameOfEnrichmentDirection||this.group1.name,xAxisDomain:15,xAxisTickValues:[-10,0,10],selectedGenesSet:this.selectedGenesSet,onGeneNameClick:this.onGeneNameClick,onSelection:this.onSelection,onSelectionCleared:this.onSelectionCleared}),this.isTwoGroupAnalysis&&r.createElement(j,{data:Object(f.e)(this.data,this.props.store?this.props.store.hugoGeneSymbols:[],this.group1.name,this.group2.name),xGroupName:this.group1.name,yGroupName:this.group2.name,onGeneNameClick:this.onGeneNameClick,selectedGenesSet:this.selectedGenesSet,onSelection:this.onSelection,onSelectionCleared:this.onSelectionCleared}),r.createElement("div",{style:{maxWidth:this.genePlotMaxWidth}},r.createElement(te,{data:this.data,isTwoGroupAnalysis:this.isTwoGroupAnalysis,groupOrder:this.props.groups.map(function(e){return e.name}),showCNAInTable:this.props.showCNAInTable,containerType:this.props.containerType,categoryToColor:this.categoryToColor,dataStore:this.dataStore}))),r.createElement("div",null,r.createElement("div",null,r.createElement("h3",null,this.props.headerName),this.props.store&&r.createElement(m.a,{checkedGenes:this.checkedGenes})),r.createElement("div",{className:d.a.Checkboxes},r.createElement("div",{style:{width:250,marginRight:7}},r.createElement(F.default,{name:"select enrichments level: sample or patient",onChange:function(t){t&&e.props.onSetPatientLevelEnrichments(t.value)},options:[{label:"Patient-level enrichments",value:!0},{label:"Sample-level enrichments",value:!1}],clearable:!1,searchable:!1,value:{label:this.props.patientLevelEnrichments?"Patient-level enrichments":"Sample-level enrichments",value:this.props.patientLevelEnrichments},styles:{control:function(e){return Object.assign(Object.assign({},e),{height:36,minHeight:36,border:"1px solid rgb(204,204,204)"})},menu:function(e){return Object.assign(Object.assign({},e),{maxHeight:400})},menuList:function(e){return Object.assign(Object.assign({},e),{maxHeight:400})},placeholder:function(e){return Object.assign(Object.assign({},e),{color:"#000000"})},dropdownIndicator:function(e){return Object.assign(Object.assign({},e),{color:"#000000"})},option:function(e,t){return Object.assign(Object.assign({},e),{cursor:"pointer"})}},theme:function(e){return Object.assign(Object.assign({},e),{colors:Object.assign(Object.assign({},e.colors),{neutral80:"black"})})}})),r.createElement("div",{style:{width:250,marginRight:7}},r.createElement(C.a,{name:"enrichedGroupsSelector",placeholder:"Select enriched groups",onChange:this.onChange,options:this.options,value:this.selectedValues,height:36})),r.createElement("label",{className:"checkbox-inline"},r.createElement("input",{type:"checkbox",checked:this.significanceFilter,onClick:this.toggleSignificanceFilter,"data-test":"SwapAxes"}),"Significant only")),r.createElement(c.b,{key:this.props.patientLevelEnrichments.toString(),data:this.filteredData,onCheckGene:this.props.store?this.onCheckGene:void 0,checkedGenes:this.props.store?this.checkedGenes:void 0,dataStore:this.dataStore,visibleOrderedColumnNames:this.visibleOrderedColumnNames,customColumns:o.keyBy(this.customColumns,function(e){return e.name})})))}},{key:"isTwoGroupAnalysis",get:function(){return 2==this.props.groups.length}},{key:"group1",get:function(){return this.props.groups[0]}},{key:"group2",get:function(){return this.props.groups[1]}},{key:"data",get:function(){return Object(f.f)(this.props.data,this.props.store?this.props.store.hugoGeneSymbols:[],this.props.groups)}},{key:"filteredData",get:function(){return Object(f.m)(this.data,this._enrichedGroups,this.significanceFilter,this.selectedGenes)}},{key:"customColumns",get:function(){var e=this,t=Object(f.d)(this.props.groups,this.props.alteredVsUnalteredMode);return this.isTwoGroupAnalysis&&t.push({name:"Alteration Overlap",headerRender:function(){return r.createElement("span",null,"Co-occurrence Pattern")},render:function(t){if(void 0===t.pValue)return r.createElement("span",null,"-");var n=o.map(t.groupsSet),i=e.props.groups[0],a=e.props.groups[1],s=n.find(function(t){return t.name===e.props.groups[0].name}),u=n.find(function(t){return t.name===e.props.groups[1].name});if(!s||!u)throw"No matching groups in Alteration Overlap Cell";var c=i.count+a.count,p=i.count/c*100,d=100-p,f=(i.count-s.profiledCount)/c*100,h=(s.profiledCount-s.alteredCount)/c*100,m=(a.count-u.profiledCount)/c*100,y=s.alteredCount/c*100,g=u.alteredCount/c*100,v=e.props.showCNAInTable?"copy number alterations":"mutations";return r.createElement(C.c,{destroyTooltipOnHide:!0,trigger:["hover"],overlay:function(){return r.createElement("div",null,r.createElement("h3",null,t.hugoGeneSymbol," ",v," ","in:"),r.createElement("table",{className:"table table-striped"},r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",null,r.createElement("strong",null,s.name,": ")),r.createElement("td",null,s.alteredCount," of"," ",s.profiledCount," of profiled"," ",e.props.patientLevelEnrichments?"patients":"samples"," ","(",l()(s.alteredPercentage).format("0.0"),"%)")),r.createElement("tr",null,r.createElement("td",null,r.createElement("strong",null,u.name,": ")),r.createElement("td",null,u.alteredCount," of"," ",u.profiledCount," of profiled"," ",e.props.patientLevelEnrichments?"patients":"samples"," ","(",l()(u.alteredPercentage).format("0.0"),"%)")))))}},r.createElement("div",{className:"inlineBlock",style:{padding:"3px 0"}},r.createElement(L,{group1Width:p,group2Width:d,group1Unaltered:h,group1Altered:y,group2Altered:g,group1Unprofiled:f,group2Unprofiled:m,group1Color:e.props.groups[0].color,group2Color:e.props.groups[1].color,width:150})))},tooltip:r.createElement("table",null,r.createElement("tr",null,r.createElement("td",null,"Upper row"),r.createElement("td",null,":"," ",this.props.patientLevelEnrichments?"Patients":"Samples"," ","colored according to group.")),r.createElement("tr",null,r.createElement("td",null,"Lower row"),r.createElement("td",null,":"," ",this.props.patientLevelEnrichments?"Patients":"Samples"," ","with"," ",this.props.showCNAInTable?"the listed alteration":"a mutation"," ","in the listed gene are highlighted.")))}),t}},{key:"visibleOrderedColumnNames",get:function(){var e=[];return e.push(c.a.GENE,c.a.CYTOBAND),this.props.showCNAInTable&&e.push(c.a.ALTERATION),this.props.groups.forEach(function(t){e.push(t.name)}),this.isTwoGroupAnalysis&&(e.push("Alteration Overlap"),e.push(c.a.LOG_RATIO)),e.push(c.a.P_VALUE,c.a.Q_VALUE),this.isTwoGroupAnalysis?e.push(this.props.alteredVsUnalteredMode?c.a.TENDENCY:c.a.ENRICHED):e.push(c.a.MOST_ENRICHED),e}},{key:"selectedGenesSet",get:function(){return o.keyBy(this.selectedGenes||[])}},{key:"selectedValues",get:function(){return this._enrichedGroups.map(function(e){return{value:e}})}},{key:"options",get:function(){return o.map(this.props.groups,function(e){return{label:e.nameOfEnrichmentDirection?e.nameOfEnrichmentDirection:e.name,value:e.name}})}},{key:"genePlotMaxWidth",get:function(){return re.a.size.width-(this.isTwoGroupAnalysis?820:40)}},{key:"categoryToColor",get:function(){return o.reduce(this.props.groups,function(e,t){return t.color&&(e[t.name]=t.color),e},{})}}])&&oe(n.prototype,i),a&&oe(n,a),t}();ce.defaultProps={showCNAInTable:!1,alteredVsUnalteredMode:!0},ue([u.observable],ce.prototype,"significanceFilter",void 0),ue([u.observable.shallow],ce.prototype,"checkedGenes",void 0),ue([u.observable.shallow],ce.prototype,"selectedGenes",void 0),ue([u.observable.ref],ce.prototype,"highlightedRow",void 0),ue([u.observable.ref],ce.prototype,"_enrichedGroups",void 0),ue([u.computed],ce.prototype,"isTwoGroupAnalysis",null),ue([u.computed],ce.prototype,"group1",null),ue([u.computed],ce.prototype,"group2",null),ue([u.computed],ce.prototype,"data",null),ue([u.computed],ce.prototype,"filteredData",null),ue([y.default],ce.prototype,"toggleSignificanceFilter",null),ue([y.default],ce.prototype,"onCheckGene",null),ue([y.default],ce.prototype,"onGeneNameClick",null),ue([y.default,u.action],ce.prototype,"onSelection",null),ue([y.default,u.action],ce.prototype,"onSelectionCleared",null),ue([u.computed],ce.prototype,"customColumns",null),ue([u.computed],ce.prototype,"visibleOrderedColumnNames",null),ue([u.computed],ce.prototype,"selectedGenesSet",null),ue([y.default,u.action],ce.prototype,"onChange",null),ue([u.computed],ce.prototype,"selectedValues",null),ue([u.computed],ce.prototype,"options",null),ue([u.computed],ce.prototype,"genePlotMaxWidth",null),ue([u.computed],ce.prototype,"categoryToColor",null),ce=ue([a.observer],ce);t.a=ce},,function(e,t,n){"use strict";var r=n(0),o=n(7),i=n(2),a=n(685),s=n(599),l=n.n(s),u=n(600),c=n(846),p=n(843),d=n(4),f=n(8),h=n(847),m=n(3),y=n(610),g=n(714),v=n(178),b=n(101),S=n(582),_=n(15),w=n(9),E=n.n(w),O=n(871);function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var M=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":D(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},j=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},N=function(e){function t(){return P(this,t),x(this,k(t).apply(this,arguments))}return A(t,g["a"]),t}(),R=function(e){function t(){var e;return P(this,t),(e=x(this,k(t).apply(this,arguments))).horzAxisData=Object(m.S)({await:function(){return[]},invoke:function(){return j(T(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.map(this.props.groups,function(e){return e.name}),n={data:[],datatype:"string",categoryOrder:t},r=d.reduce(this.props.groups,function(e,t){return t.samples.forEach(function(n){var r=n.uniqueSampleKey;void 0===e[r]&&(e[r]={uniqueSampleKey:r,value:[]}),e[r].value.push(t.name)}),e},{}),n.data=d.values(r),e.abrupt("return",Promise.resolve(n));case 5:case"end":return e.stop()}},e,this)}))}}),e.vertAxisData=Object(m.S)({invoke:function(){return j(T(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,o,i,a,s,l,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={data:[],datatype:"number"},void 0===this.props.selectedRow){e.next=25;break}return e.next=4,v.a.fetchAllMolecularDataInMolecularProfileUsingPOST({molecularProfileId:this.props.selectedProfile.molecularProfileId,molecularDataFilter:{entrezGeneIds:[this.props.selectedRow.entrezGeneId],sampleIds:d.map(this.props.sampleKeyToSample,function(e){return e.sampleId})}});case 4:for(n=e.sent,r=t.data,o=!0,i=!1,a=void 0,e.prev=9,s=n[Symbol.iterator]();!(o=(l=s.next()).done);o=!0)u=l.value,c=this.logScale?Math.log(u.value+1)/Math.log(2):u.value,r.push({uniqueSampleKey:u.uniqueSampleKey,value:c});e.next=17;break;case 13:e.prev=13,e.t0=e.catch(9),i=!0,a=e.t0;case 17:e.prev=17,e.prev=18,o||null==s.return||s.return();case 20:if(e.prev=20,!i){e.next=23;break}throw a;case 23:return e.finish(20);case 24:return e.finish(17);case 25:return e.abrupt("return",Promise.resolve(t));case 26:case"end":return e.stop()}},e,this,[[9,13,17,25],[18,,20,24]])}))}}),e.boxPlotData=Object(m.S)({await:function(){return[e.vertAxisData,e.horzAxisData]},invoke:function(){var t=e.horzAxisData.result,n=e.vertAxisData.result;if(t&&n){var r=t,o=n;return Promise.resolve(Object(y.D)(r,o,e.props.sampleKeyToSample,{},void 0,void 0))}return new Promise(function(){return 0})}}),e}var n,o,i;return A(t,r["Component"]),n=t,(o=[{key:"getData",value:function(){return void 0!==this.props.selectedRow?Object(y.p)(this.boxPlotData.result,"Group",this.axisLabelY,{}):""}},{key:"render",value:function(){var e=this,t=null;if(void 0===this.props.selectedRow)t=r.createElement("div",{className:E()("text-center",l.a.BoxEmpty)},"Click on a gene in the table to render this plot.");else if(this.boxPlotData.isPending)t=r.createElement("div",{className:E()("text-center",l.a.BoxEmpty)},r.createElement(b.a,{isLoading:!0,size:"small",className:l.a.ChartLoader}));else if(this.props.selectedRow.hugoGeneSymbol&&this.boxPlotData.isComplete&&this.boxPlotData.result.length>0){var n="group";void 0!==this.props.queriedHugoGeneSymbols&&(n="Query: ".concat(Object(O.b)(this.props.queriedHugoGeneSymbols))),t=r.createElement("div",{className:l.a.BoxPlot,"data-test":"MiniBoxPlot"},r.createElement(m.d,{buttons:["SVG","PNG","Data"],getSvg:function(){return e.svgContainer},getData:this.getData,filename:"expression_enrichment",dontFade:!0,style:{position:"absolute",right:10,top:10},type:"button"}),r.createElement(N,{domainPadding:10,startDataAxisAtZero:!0,boxWidth:this.boxPlotData.result.length>7?30:60,axisLabelY:this.axisLabelY,axisLabelX:n,data:this.boxPlotData.result,chartBase:320,scatterPlotTooltip:this.scatterPlotTooltip,horizontal:!1,fill:"#00AAF8",symbol:"circle",useLogSpaceTicks:!0,containerRef:function(t){return e.svgContainer=t},compressXAxis:!0,legendData:[{name:"p-Value: ".concat(Object(S.b)(this.props.selectedRow.pValue,3,.01)),symbol:{fill:"none",strokeWidth:0}},{name:"q-Value: ".concat(Object(S.b)(this.props.selectedRow.qValue,3,.01)),symbol:{fill:"none",strokeWidth:0}}]}))}return r.createElement("div",{style:{position:"relative",display:"inline-block"},className:"borderedChart"},t)}},{key:"logScale",get:function(){return this.props.selectedProfile.molecularProfileId.includes("rna_seq")}},{key:"axisLabelY",get:function(){return void 0!==this.props.selectedRow?"".concat(this.props.selectedRow.hugoGeneSymbol,", ").concat(this.props.selectedProfile.name).concat(this.logScale?" (log2)":""):""}},{key:"scatterPlotTooltip",get:function(){var e=this;return function(t){var n=void 0;if(e.props.oqlFilteredCaseAggregatedData){var o=e.props.oqlFilteredCaseAggregatedData?e.props.oqlFilteredCaseAggregatedData[t.uniqueSampleKey]:[];n="Alteration(s): "+Object(u.h)(o)}var i=r.createElement("span",null,"Loading... (this shouldnt appear because the box plot shouldnt be visible)");return e.boxPlotData.isComplete&&(i=r.createElement("div",null,r.createElement("a",{href:Object(_.y)(t.studyId,t.sampleId),target:"_blank"},r.createElement("b",null,t.sampleId)),r.createElement("br",null),"mRNA expression",e.logScale?" (log2)":"",":"," ",t.value.toFixed(3),!!n&&r.createElement("br",null),n)),i}}}])&&C(n.prototype,o),i&&C(n,i),t}();R.defaultProps={},M([i.observable],R.prototype,"svgContainer",void 0),M([f.default],R.prototype,"getData",null),M([i.computed],R.prototype,"logScale",null),M([i.computed],R.prototype,"axisLabelY",null),M([i.computed],R.prototype,"scatterPlotTooltip",null);var L=R=M([o.observer],R);function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t){return!t||"object"!==z(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var q=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":z(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},U=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=F(this,B(t).apply(this,arguments))).overExpressedFilter=!0,e.underExpressedFilter=!0,e.significanceFilter=!1,e.checkedGenes=[],e._expressedGroups=e.props.groups.map(function(e){return e.name}),e.dataStore=new h.a(function(){return e.filteredData},function(){return e.highlightedRow},function(t){e.highlightedRow=t}),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(t,r["Component"]),n=t,(o=[{key:"toggleSignificanceFilter",value:function(){this.significanceFilter=!this.significanceFilter}},{key:"onCheckGene",value:function(e){var t=this.checkedGenes.indexOf(e);-1!==t?this.checkedGenes.splice(t,1):this.checkedGenes.push(e)}},{key:"onGeneNameClick",value:function(e,t){this.clickedGeneHugo=e,this.clickedGeneEntrez=t}},{key:"onSelection",value:function(e){this.selectedGenes=e}},{key:"onSelectionCleared",value:function(){this.selectedGenes=null}},{key:"onChange",value:function(e){this._expressedGroups=d.map(e,function(e){return e.value})}},{key:"render",value:function(){if(0===this.props.data.length)return r.createElement("div",{className:"alert alert-info"},"No data/result available");var e=Object(u.l)(this.data,this.props.queriedHugoGeneSymbols||[]),t=d.maxBy(e,function(e){return Math.ceil(Math.abs(e.x))});return r.createElement("div",{className:l.a.Container},r.createElement("div",{className:l.a.ChartsPanel},this.isTwoGroupAnalysis&&r.createElement(p.a,{data:e,selectedGenesSet:this.selectedGenesSet,xAxisLeftLabel:this.group2.nameOfEnrichmentDirection||this.group2.name,xAxisRightLabel:this.group1.nameOfEnrichmentDirection||this.group1.name,xAxisDomain:Math.ceil(Math.abs(t.x)),xAxisTickValues:null,onGeneNameClick:this.onGeneNameClick,onSelection:this.onSelection,onSelectionCleared:this.onSelectionCleared}),r.createElement(L,{selectedProfile:this.props.selectedProfile,groups:this.props.groups,sampleKeyToSample:this.props.sampleKeyToSample,queriedHugoGeneSymbols:this.props.queriedHugoGeneSymbols,oqlFilteredCaseAggregatedData:this.props.oqlFilteredCaseAggregatedData,selectedRow:this.selectedRow})),r.createElement("div",{className:l.a.TableContainer},r.createElement("div",null,r.createElement("h3",null,this.props.selectedProfile.name),!!this.props.isGeneCheckBoxEnabled&&r.createElement(c.a,{checkedGenes:this.checkedGenes})),r.createElement("hr",{style:{marginTop:0,marginBottom:5,borderWidth:2}}),r.createElement("div",{className:l.a.Checkboxes},r.createElement("div",{style:{width:250,marginRight:7}},r.createElement(m.a,{name:"enrichedGroupsSelector",placeholder:"Select enriched groups",onChange:this.onChange,options:this.options,value:this.selectedValues})),r.createElement("div",{className:l.a.FlexCheckbox},r.createElement("label",null,r.createElement("input",{type:"checkbox",checked:this.significanceFilter,onClick:this.toggleSignificanceFilter}),"Significant only"))),r.createElement(a.b,{data:this.filteredData,onCheckGene:this.props.isGeneCheckBoxEnabled?this.onCheckGene:void 0,onGeneNameClick:this.onGeneNameClick,dataStore:this.dataStore,mutexTendency:this.props.alteredVsUnalteredMode,checkedGenes:this.props.isGeneCheckBoxEnabled?this.checkedGenes:void 0,visibleOrderedColumnNames:this.visibleOrderedColumnNames,customColumns:d.keyBy(this.customColumns,function(e){return e.uniqueName||e.name})})))}},{key:"data",get:function(){return Object(u.k)(this.props.data,this.props.queriedHugoGeneSymbols||[],this.props.groups)}},{key:"filteredData",get:function(){return Object(u.m)(this.data,this._expressedGroups,this.significanceFilter,this.selectedGenes)}},{key:"group1",get:function(){return this.props.groups[0]}},{key:"group2",get:function(){return this.props.groups[1]}},{key:"group1CheckboxLabel",get:function(){return this.props.alteredVsUnalteredMode?"Over-expressed":r.createElement("span",{style:{display:"flex",alignItems:"center"}},"Enriched in",r.createElement(m.f,{text:this.group1.name}))}},{key:"group2CheckboxLabel",get:function(){return this.props.alteredVsUnalteredMode?"Under-expressed":r.createElement("span",{style:{display:"flex",alignItems:"center"}},"Enriched in",r.createElement(m.f,{text:this.group2.name}))}},{key:"selectedGenesSet",get:function(){return d.keyBy(this.selectedGenes||[])}},{key:"isTwoGroupAnalysis",get:function(){return 2==this.props.groups.length}},{key:"customColumns",get:function(){return Object(u.j)(this.props.groups,this.props.alteredVsUnalteredMode)}},{key:"visibleOrderedColumnNames",get:function(){var e=[];return e.push(a.a.GENE,a.a.CYTOBAND),this.props.groups.forEach(function(t){e.push(t.name+" mean")}),this.props.groups.forEach(function(t){e.push(t.name+" standard deviation")}),this.isTwoGroupAnalysis&&e.push(a.a.LOG_RATIO),e.push(a.a.P_VALUE,a.a.Q_VALUE),this.isTwoGroupAnalysis&&this.props.alteredVsUnalteredMode?e.push(a.a.TENDENCY):e.push(a.a.EXPRESSED),e}},{key:"selectedValues",get:function(){return this._expressedGroups.map(function(e){return{value:e}})}},{key:"options",get:function(){return d.map(this.props.groups,function(e){return{label:e.nameOfEnrichmentDirection?e.nameOfEnrichmentDirection:e.name,value:e.name}})}},{key:"selectedRow",get:function(){var e=this;if(this.clickedGeneHugo)return this.props.data.filter(function(t){return t.hugoGeneSymbol===e.clickedGeneHugo})[0]}}])&&G(n.prototype,o),i&&G(n,i),t}();U.defaultProps={alteredVsUnalteredMode:!0,isGeneCheckBoxEnabled:!1},q([i.observable],U.prototype,"overExpressedFilter",void 0),q([i.observable],U.prototype,"underExpressedFilter",void 0),q([i.observable],U.prototype,"significanceFilter",void 0),q([i.observable.shallow],U.prototype,"checkedGenes",void 0),q([i.observable],U.prototype,"clickedGeneHugo",void 0),q([i.observable],U.prototype,"clickedGeneEntrez",void 0),q([i.observable.ref],U.prototype,"selectedGenes",void 0),q([i.observable.ref],U.prototype,"highlightedRow",void 0),q([i.observable.ref],U.prototype,"_expressedGroups",void 0),q([i.observable],U.prototype,"svgContainer",void 0),q([i.computed],U.prototype,"data",null),q([i.computed],U.prototype,"filteredData",null),q([f.default],U.prototype,"toggleSignificanceFilter",null),q([f.default],U.prototype,"onCheckGene",null),q([f.default],U.prototype,"onGeneNameClick",null),q([f.default],U.prototype,"onSelection",null),q([f.default],U.prototype,"onSelectionCleared",null),q([i.computed],U.prototype,"group1",null),q([i.computed],U.prototype,"group2",null),q([i.computed],U.prototype,"group1CheckboxLabel",null),q([i.computed],U.prototype,"group2CheckboxLabel",null),q([i.computed],U.prototype,"selectedGenesSet",null),q([i.computed],U.prototype,"isTwoGroupAnalysis",null),q([i.computed],U.prototype,"customColumns",null),q([i.computed],U.prototype,"visibleOrderedColumnNames",null),q([f.default,i.action],U.prototype,"onChange",null),q([i.computed],U.prototype,"selectedValues",null),q([i.computed],U.prototype,"options",null),q([i.computed],U.prototype,"selectedRow",null),U=q([o.observer],U);t.a=U},,function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return s});var r=n(881),o=n.n(r),i=n(3),a=n(2);function s(t,n,r,s){var l=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n.dependencyPromise=n.dependencyPromise||function(t){if(t.pathsToCSS&&t.pathsToCSS.forEach(function(t){e("head").append('<link rel="stylesheet" href='.concat(t,' type="text/css" />'))}),t.pathsToJs){var n=[];return t.pathsToJs.forEach(function(e){var t=new Promise(function(t,n){o()(e,function(e){e?n(e):t()})});n.push(t)}),Promise.all(n)}}(n);n.dependencyPromise.then(function(){!function(e){Object(i.B)()[e.mountCallbackName]?Object(i.B)()[e.mountCallbackName](t,e,r,s,a.autorun,l):alert("Callback for tab ".concat(e.title," not found"))}(n)})}}).call(this,n(11))},,function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n(584),o=n(0),i=n(2),a=n(7);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":d(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,c(t).apply(this,arguments))}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,o["Component"]),n=t,(i=[{key:"render",value:function(){var e=this;return o.createElement("div",s({className:this.props.className||""},this.props,{ref:function(t){return e.wrapper=t},style:this.style}),this.props.children)}},{key:"offset",get:function(){return this.props.offset||0}},{key:"style",get:function(){return{width:r.a.size.width-this.offset,overflowX:"auto"}}}])&&l(n.prototype,i),a&&l(n,a),t}();f([i.computed],h.prototype,"offset",null),f([i.computed],h.prototype,"style",null),h=f([a.observer],h)},function(e,t,n){e.exports=n(16)(367)},function(e,t,n){e.exports=n(16)(329)},function(e,t,n){e.exports=n(16)(878)},function(e,t,n){e.exports=n(16)(167)},function(e,t,n){e.exports=n(16)(877)},function(e,t,n){e.exports=n(16)(360)},function(e,t,n){"use strict";var r=n(0),o=n(7),i=n(746),a=n(8),s=n(3);n(587);function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f,h=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":d(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};!function(e){e.distinguishDrivers="0",e.annotateOncoKb="1",e.annotateHotspots="2",e.annotateCBioPortal="3",e.annotateCOSMIC="4",e.customDriverBinaryAnnotation="5"}(f||(f={}));var m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,c(t).apply(this,arguments))}var o,a,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,r["Component"]),o=t,(a=[{key:"onInputClick",value:function(e){switch(e.target.value){case f.distinguishDrivers:this.props.handlers.onSelectDistinguishDrivers(!this.props.state.distinguishDrivers);break;case f.annotateOncoKb:this.props.handlers.onSelectAnnotateOncoKb(!this.props.state.annotateDriversOncoKb);break;case f.annotateHotspots:this.props.handlers.onSelectAnnotateHotspots&&this.props.handlers.onSelectAnnotateHotspots(!this.props.state.annotateDriversHotspots);break;case f.annotateCBioPortal:this.props.handlers.onSelectAnnotateCBioPortal(!this.props.state.annotateDriversCBioPortal);break;case f.annotateCOSMIC:this.props.handlers.onSelectAnnotateCOSMIC&&this.props.handlers.onSelectAnnotateCOSMIC(!this.props.state.annotateDriversCOSMIC);break;case f.customDriverBinaryAnnotation:this.props.handlers.onSelectCustomDriverAnnotationBinary&&this.props.handlers.onSelectCustomDriverAnnotationBinary(!this.props.state.annotateCustomDriverBinary)}}},{key:"render",value:function(){var e=this;return r.createElement("div",null,r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{"data-test":"ColorByDriver",type:"checkbox",value:f.distinguishDrivers,checked:this.props.state.distinguishDrivers,onClick:this.onInputClick})," ","Putative drivers vs VUS:")),r.createElement("div",{style:{marginLeft:"20px"}},!this.props.state.annotateDriversOncoKbDisabled&&r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:f.annotateOncoKb,checked:this.props.state.annotateDriversOncoKb,onClick:this.onInputClick,"data-test":"annotateOncoKb",disabled:this.props.state.annotateDriversOncoKbError}),this.props.state.annotateDriversOncoKbError&&r.createElement(i.a,{style:{marginRight:4},tooltip:r.createElement("span",null,"Error loading OncoKb data. Please refresh the page or try again later.")}),r.createElement(s.c,{overlay:r.createElement("span",null,"Oncogenicity from OncoKB"),placement:"top"},r.createElement("img",{src:n(933),style:{maxHeight:"12px",cursor:"pointer",marginRight:"5px"}})),"driver annotation")),this.props.handlers.onSelectAnnotateHotspots&&!this.props.state.annotateDriversHotspotsDisabled&&r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:f.annotateHotspots,checked:this.props.state.annotateDriversHotspots,onClick:this.onInputClick,"data-test":"annotateHotspots",disabled:this.props.state.annotateDriversHotspotsError}),this.props.state.annotateDriversHotspotsError&&r.createElement(i.a,{style:{marginRight:4},tooltip:r.createElement("span",null,"Error loading Hotspots data. Please refresh the page or try again later.")}),"Hotspots",r.createElement(s.c,{overlay:r.createElement("div",{style:{maxWidth:"400px"}},"Identified as a recurrent hotspot (statistically significant) in a population-scale cohort of tumor samples of various cancer types using methodology based in part on"," ",r.createElement("a",{href:Object(s.F)("/pubmed/26619011"),target:"_blank"},"Chang et al., Nat Biotechnol, 2016."),"Explore all mutations at"," ",r.createElement("a",{href:"https://www.cancerhotspots.org",target:"_blank"},"https://cancerhotspots.org")),placement:"top"},r.createElement("img",{src:n(690),style:{height:"15px",width:"15px",cursor:"pointer",marginLeft:"5px"}})))),this.props.handlers.onChangeAnnotateCBioPortalInputValue&&r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:f.annotateCBioPortal,checked:this.props.state.annotateDriversCBioPortal,onClick:this.onInputClick,"data-test":"annotateCBioPortalCount"}),"cBioPortal >="),r.createElement(s.e,{value:this.props.state.annotateCBioPortalInputValue||"",setValue:this.props.handlers.onChangeAnnotateCBioPortalInputValue,numericOnly:!0,textFieldAppearance:!0,maxChars:10})),this.props.handlers.onChangeAnnotateCOSMICInputValue&&r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:f.annotateCOSMIC,checked:this.props.state.annotateDriversCOSMIC,onClick:this.onInputClick,"data-test":"annotateCOSMICCount"}),"COSMIC >="),r.createElement(s.e,{value:this.props.state.annotateCOSMICInputValue||"",setValue:this.props.handlers.onChangeAnnotateCOSMICInputValue,numericOnly:!0,textFieldAppearance:!0,maxChars:10})),!!this.props.state.customDriverAnnotationBinaryMenuLabel&&r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",checked:this.props.state.annotateCustomDriverBinary,value:f.customDriverBinaryAnnotation,onClick:this.onInputClick,"data-test":"annotateCustomBinary"})," ",this.props.state.customDriverAnnotationBinaryMenuLabel,r.createElement("img",{src:n(753),alt:"driver filter",style:{height:"15px",width:"15px",cursor:"pointer",marginLeft:"5px"}}))),!!this.props.state.customDriverAnnotationTiersMenuLabel&&r.createElement("span",null,r.createElement("span",{className:"caret"}),"",r.createElement("span",null,this.props.state.customDriverAnnotationTiersMenuLabel),"",r.createElement("img",{src:n(754),alt:"driver tiers filter",style:{height:"15px",width:"15px",cursor:"pointer",marginLeft:"5px"}}),r.createElement("div",{style:{marginLeft:"30px"}},(this.props.state.customDriverAnnotationTiers||[]).map(function(t){return r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:t,checked:!(!e.props.state.selectedCustomDriverAnnotationTiers||!e.props.state.selectedCustomDriverAnnotationTiers.get(t)),onClick:e.props.handlers.onCustomDriverTierCheckboxClick})," ",t))})))))}}])&&l(o.prototype,a),d&&l(o,d),t}();h([a.default],m.prototype,"onInputClick",null),m=h([o.observer],m),t.a=m},function(e,t,n){e.exports=n(16)(128)},function(e,t,n){e.exports=n(16)(26)},function(e,t,n){e.exports=n(16)(335)},function(e,t,n){"use strict";n.d(t,"l",function(){return w}),n.d(t,"j",function(){return E}),n.d(t,"i",function(){return O}),n.d(t,"d",function(){return C}),n.d(t,"c",function(){return P}),n.d(t,"b",function(){return x}),n.d(t,"k",function(){return k}),n.d(t,"h",function(){return I}),n.d(t,"e",function(){return D}),n.d(t,"f",function(){return M}),n.d(t,"g",function(){return j}),n.d(t,"a",function(){return N}),n.d(t,"m",function(){return R});var r=n(2),o=n(6),i=n(4),a=n.n(i),s=n(624),l=n(570),u=n(598),c=n(619),p=n(3),d=n(22),f=n(572),h=n(182),m=n(585),y=n(671),g=n(628),v=n(573),b=n(588),S=n(611),_=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};function w(e){return e.hasOwnProperty("alteration")}function E(e){var t,n,i;return e.existCustomDrivers?(t=!1,n=!1,i=!0):(t=!0,n=!1,i=!1),Object(r.observable)({cbioportalCountThreshold:0,_oncoKb:t,_cbioportalCount:n,_customBinary:i,_excludeVUS:!1,hotspots:!1,get customBinary(){return this._customBinary},set customBinary(t){this._customBinary=t,e.customDriverWarningHidden=!0},get cbioportalCount(){return this._cbioportalCount},set cbioportalCount(t){this._cbioportalCount=t,e.customDriverWarningHidden=!0},set oncoKb(t){this._oncoKb=t,e.customDriverWarningHidden=!0},get oncoKb(){return!(!o.b.serverConfig.show_oncokb||!this._oncoKb||e.didOncoKbFail)},set excludeVUS(e){this._excludeVUS=e},get excludeVUS(){return this._excludeVUS&&this.driversAnnotated},get driversAnnotated(){return this.oncoKb||this.cbioportalCount||this.hotspots||e.existCustomDrivers&&this.customBinary}})}function O(e){return a.a.chain(e).map(function(e){return e.sampleId}).uniq().value()}function C(e){return a.a.chain(e).filter(function(e){return w(e)}).map(function(e){return e.hugoGeneSymbol}).uniq().value()}function P(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.a;return _(this,void 0,void 0,regeneratorRuntime.mark(function r(){var o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(e instanceof Error)){r.next=2;break}return r.abrupt("return",new Error);case 2:if(0!==(o=a.a.chain(t).filter(function(t){return!!e[t.entrezGeneId]}).filter(function(e){return void 0!==e.proteinPosStart&&void 0!==e.proteinPosEnd}).value()).length){r.next=5;break}return r.abrupt("return",f.b);case 5:return r.abrupt("return",Object(f.gb)(o.map(function(e){return{entrezGeneId:e.entrezGeneId,alteration:e.proteinChange,proteinPosStart:e.proteinPosStart,proteinPosEnd:e.proteinPosEnd,mutationType:e.mutationType,tumorType:null}}),n,[p.g.ONCOGENIC]));case 6:case"end":return r.stop()}},r)}))}function x(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.a;return _(this,void 0,void 0,regeneratorRuntime.mark(function r(){var o,i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(e instanceof Error)){r.next=2;break}return r.abrupt("return",new Error);case 2:if(0!==(o=a.a.chain(t).filter(function(t){return!!e[t.entrezGeneId]}).filter(function(e){return e.molecularProfileAlterationType===l.a.COPY_NUMBER_ALTERATION}).value()).length){r.next=5;break}return r.abrupt("return",f.b);case 5:return i=a.a.chain(o).map(function(e){return Object(p.x)(e.entrezGeneId,null,Object(g.a)(e.value),[p.g.ONCOGENIC])}).uniqBy("id").value(),r.abrupt("return",Object(f.fb)(i,n));case 7:case"end":return r.stop()}},r)}))}function T(e,t){var n={driverTiersFilter:"",driverTiersFilterAnnotation:"",oncoKbOncogenic:"",isHotspot:!1,putativeDriver:!1,hugoGeneSymbol:e.hugoGeneSymbol,proteinChange:e.proteinChange,mutationStatus:e.isGermline?S.c:"",driverFilter:e.isCustomDriver?S.d:"",driverFilterAnnotation:e.isCustomDriver?"You indicated that this mutation is a driver.":"",molecularProfileAlterationType:void 0,alterationSubType:"",value:void 0,mutationType:"",entrezGeneId:0,proteinPosStart:void 0,proteinPosEnd:void 0},r=t[e.hugoGeneSymbol];if(r&&(n.entrezGeneId=r.entrezGeneId),n.proteinChange){var o=Object(d.k)(n.proteinChange);o&&(n.proteinPosStart=o.start,n.proteinPosEnd=o.end)}switch(e.alteration){case"missense":n=Object.assign(n,{molecularProfileAlterationType:l.a.MUTATION_EXTENDED,alterationSubType:"missense",mutationType:"missense_mutation"});break;case"inframe":n=Object.assign(n,{molecularProfileAlterationType:l.a.MUTATION_EXTENDED,alterationSubType:"inframe",mutationType:"indel"});break;case"fusion":n=Object.assign(n,{molecularProfileAlterationType:l.a.MUTATION_EXTENDED,mutationType:"fusion"});break;case"promoter":n=Object.assign(n,{molecularProfileAlterationType:l.a.MUTATION_EXTENDED,proteinChange:"promoter"});break;case"trunc":n=Object.assign(n,{molecularProfileAlterationType:l.a.MUTATION_EXTENDED,alterationSubType:"nonsense",mutationType:"nonsense"});break;case"other":n=Object.assign(n,{molecularProfileAlterationType:l.a.MUTATION_EXTENDED,alterationSubType:"other"});break;case"amp":n=Object.assign(n,{molecularProfileAlterationType:l.a.COPY_NUMBER_ALTERATION,alterationSubType:u.a[2],value:2});break;case"homdel":n=Object.assign(n,{molecularProfileAlterationType:l.a.COPY_NUMBER_ALTERATION,alterationSubType:u.a[-2],value:-2});break;case"gain":n=Object.assign(n,{molecularProfileAlterationType:l.a.COPY_NUMBER_ALTERATION,alterationSubType:u.a[1],value:1});break;case"hetloss":n=Object.assign(n,{molecularProfileAlterationType:l.a.COPY_NUMBER_ALTERATION,alterationSubType:u.a[-1],value:-1});break;case"mrnaHigh":n=Object.assign(n,{molecularProfileAlterationType:l.a.MRNA_EXPRESSION,alterationSubType:"high"});break;case"mrnaLow":n=Object.assign(n,{molecularProfileAlterationType:l.a.MRNA_EXPRESSION,alterationSubType:"low"});break;case"protHigh":n=Object.assign(n,{molecularProfileAlterationType:l.a.PROTEIN_LEVEL,alterationSubType:"high"});break;case"protLow":n=Object.assign(n,{molecularProfileAlterationType:l.a.PROTEIN_LEVEL,alterationSubType:"low"})}return n}function k(e){return e.disp_mut||e.disp_cna||e.disp_mrna||e.disp_prot||e.disp_fusion}function A(e){var t=a.a.chain(e).filter(k).size().value();return Object(s.p)(t,e.length)}function I(e,t,n){var r={},o=e.filter(function(e){return w(e)}),i=!0,s=!1,l=void 0;try{for(var u,c=o[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var p=u.value;p.hugoGeneSymbol in r||(r[p.hugoGeneSymbol]={});var d=r[p.hugoGeneSymbol];p.sampleId in d||(d[p.sampleId]=[]);var f=T(p,t);n&&v.b.test(f.mutationStatus)||d[p.sampleId].push(f)}}catch(e){s=!0,l=e}finally{try{i||null==c.return||c.return()}finally{if(s)throw l}}var h=!0,m=!1,y=void 0;try{for(var g,b=function(){var e=g.value;a.a.forEach(r,function(t,n){e.sampleId in t||(t[e.sampleId]=[])})},S=e[Symbol.iterator]();!(h=(g=S.next()).done);h=!0)b()}catch(e){m=!0,y=e}finally{try{h||null==S.return||S.return()}finally{if(m)throw y}}return a.a.mapValues(r,function(e){return a.a.chain(e).map(function(e,t){return{sampleId:t,data:e}}).value()})}function D(e){return a.a.mapValues(e,function(e,t){return e.map(function(e){return Object(c.a)({sample:e.sampleId,patient:e.sampleId,study_id:"",uid:e.sampleId},t,e.data)})})}function M(e){return"geneticTrack_".concat(e)}function j(e,t,n){var r=a.a.keyBy(n||[]);e=a.a.mapValues(e,function(e){return e.filter(function(e){return!(e.sample in r)})});var o=a.a.mapValues(e,A);return(t?t.filter(function(t){return t in e}):Object.keys(e)).map(function(t){return{key:M(t),label:t,info:o[t],data:e[t]}})}function N(e,t,n,r){var o=function(e){return""};if(t.oncoKbCna.isComplete&&!(t.oncoKbCna.result instanceof Error)){var i=t.oncoKbCna.result.indicatorMap;o=function(e){var t=Object(p.A)(e.entrezGeneId,null,Object(g.a)(e.value)),n=i[t];return n?Object(m.p)(n):""}}var s=function(e){return""};if(t.oncoKb&&t.oncoKb.isComplete&&!(t.oncoKb.result instanceof Error)){var u=t.oncoKb.result.indicatorMap;s=function(e){var t=Object(p.A)(e.entrezGeneId,null,e.proteinChange,e.mutationType),n=u[t];return n?Object(m.p)(n):""}}var c=function(e){return!1};if(t.cbioportalCount&&t.cbioportalCount.isComplete){var d=t.cbioportalCount.result,f=n.cbioportalCountThreshold;c=function(e){if(e.molecularProfileAlterationType===l.a.MUTATION_EXTENDED){var t=Object(y.b)(e),n=d[t];return f<=n}return!1}}return a.a.mapValues(e,function(e,t){return e.map(function(e){var t=a.a.clone(e);return t.data=t.data.filter(function(e){switch(delete e.oncoKbOncogenic,delete e.putativeDriver,e.molecularProfileAlterationType){case l.a.COPY_NUMBER_ALTERATION:e.oncoKbOncogenic=o(e);break;case l.a.MUTATION_EXTENDED:e.oncoKbOncogenic=s(e)}return e.molecularProfileAlterationType!==l.a.MUTATION_EXTENDED||(e.putativeDriver=!!(e.oncoKbOncogenic||n.useHotspots&&e.isHotspot||c(e)||n.useCustomBinary&&e.driverFilter===S.d),!r||e.putativeDriver)}),t},[])})}function R(e){var t=e.trim().split("\n").map(function(e){return e.trim().split(/\s+/)});try{return{status:"complete",result:t.map(function(e,n){if(0===n&&a.a.isEqual(t[0].map(function(e){return e.toLowerCase()}),["sample","gene","alteration","type"]))return null;var r="Genetic data input error on line ".concat(n+1,": \n").concat(e.join("\t"),"\n\n");if(1===e.length)return{sampleId:e[0]};if(4===e.length){var o=e[0],i=e[1],s=e[2],l=s.toLowerCase(),u=e[3],c=u.toLowerCase(),p={sampleId:o,hugoGeneSymbol:i};switch(c){case"cna":if(-1===["amp","gain","hetloss","homdel"].indexOf(l))throw new Error("".concat(r,'Alteration "').concat(s,'" is not valid - it must be "AMP", "GAIN" ,"HETLOSS", or "HOMDEL" since Type is "CNA"'));p.alteration=l;break;case"exp":if("high"===l)p.alteration="mrnaHigh";else{if("low"!==l)throw new Error("".concat(r,'Alteration "').concat(s,'" is not valid - it must be "HIGH" or "LOW" if Type is "EXP"'));p.alteration="mrnaLow"}break;case"prot":if("high"===l)p.alteration="protHigh";else{if("low"!==l)throw new Error("".concat(r,'Alteration "').concat(s,'" is not valid - it must be "HIGH" or "LOW" if Type is "PROT"'));p.alteration="protLow"}break;case"fusion":if("fusion"!==c)throw new Error("".concat(r,'Type "').concat(u,'" is not valid - it must be "FUSION" if Alteration is "FUSION"'));p.alteration=c,p.proteinChange=s;break;default:var d;try{d=Object(b.g)("GENE: ".concat(c))[0].alterations[0]}catch(e){throw new Error("".concat(r,"Mutation type ").concat(u," is not valid."))}var f=!0,h=!1,m=void 0;try{for(var y,g=d.modifiers[Symbol.iterator]();!(f=(y=g.next()).done);f=!0){switch(y.value.type){case"GERMLINE":p.isGermline=!0;break;case"DRIVER":p.isCustomDriver=!0;break;default:throw new Error("".concat(r,"Only allowed mutation modifiers are GERMLINE and DRIVER"))}}}catch(e){h=!0,m=e}finally{try{f||null==g.return||g.return()}finally{if(h)throw m}}var v=d.constr_val.toLowerCase();if(-1===["missense","inframe","promoter","trunc","other"].indexOf(v))throw new Error("".concat(r,'Type "').concat(u,'" is not valid - it must be "MISSENSE", "INFRAME", "TRUNC", "PROMOTER", or "OTHER" for a mutation alteration.'));p.alteration=v,p.proteinChange=s}return p}throw new Error("".concat(r,"input lines must have either 1 or 4 columns."))}).filter(function(e){return!!e}),error:void 0}}catch(e){return{status:"error",result:void 0,error:e.message}}}},function(e,t,n){"use strict";n.d(t,"c",function(){return l}),n.d(t,"b",function(){return u}),n.d(t,"a",function(){return c}),n.d(t,"d",function(){return p});var r=n(580),o=n(0),i=n(4),a=n.n(i),s=n(15);function l(e,t){return e.length!==t.length?o.createElement("span",null,o.createElement("strong",null,t.length)," patients /"," ",o.createElement("strong",null,e.length)," samples"):o.createElement("span",null,o.createElement("strong",null,e.length)," patients/samples")}function u(e){switch(e.length){case 0:return"";case 1:return e[0];case 2:return e.join(" & ");default:return"".concat(e[0],", ").concat(e[1]," & ").concat(3===e.length?e[2]:"".concat(e.length-2," other genes"))}}function c(e,t,n,i,a){var s="Queried gene".concat(1!==a?"s are":" is"," altered in"),l="".concat(n," (").concat(Object(r.c)(n/e,0),") of queried");return e!==t?o.createElement("strong",{style:{display:"flex"}},o.createElement("span",{style:{marginRight:13}},s),o.createElement("table",null,o.createElement("tr",null,o.createElement("td",null,"","".concat(i," (").concat(Object(r.c)(i/t,0),") of queried patients"))),o.createElement("tr",null,o.createElement("td",null,"","".concat(l," samples"))))):o.createElement("strong",null,o.createElement("span",null,"".concat(s," ").concat(l," patients/samples")))}function p(e,t,n,r){var o=a.a.some(r,function(e){return"all_cases_in_study"===e.category}),i=[];t.length>0&&(n||!o)&&t.forEach(function(e){return i.push({sampleId:e.sampleId,studyId:e.studyId})});var l=window.open(Object(s.b)("study",{id:e.map(function(e){return e.studyId}).join(",")}),"_blank");i.length>0&&(l.studyPageFilter="filterJson=".concat(JSON.stringify({sampleIdentifiers:i})))}},,,,,function(e,t,n){"use strict";var r=n(0),o=n(4),i=n(575),a=n(7),s=n(2),l=n(651),u=n(803),c=n.n(u),p=n(9),d=n.n(p);function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var S,_=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};!function(e){e[e.TRACK_A=0]="TRACK_A",e[e.TRACK_B=1]="TRACK_B",e[e.NEITHER=2]="NEITHER",e[e.A_NOT_B=3]="A_NOT_B",e[e.B_NOT_A=4]="B_NOT_A",e[e.BOTH=5]="BOTH",e[e.LOG_ODDS_RATIO=6]="LOG_ODDS_RATIO",e[e.P_VALUE=7]="P_VALUE",e[e.Q_VALUE=8]="Q_VALUE",e[e.ASSOCIATION=9]="ASSOCIATION"}(S||(S={}));var w=function(e){function t(){return h(this,t),m(this,y(t).apply(this,arguments))}return g(t,i["b"]),t}(),E=function(e){function t(e){var n;return h(this,t),(n=m(this,y(t).call(this,e)))._columns={},n.generateColumns(),n}var n,i,a;return g(t,r["Component"]),n=t,(i=[{key:"generateColumns",value:function(){this._columns={},this._columns[S.TRACK_A]={name:"A",render:function(e){return r.createElement("span",null,r.createElement("b",null,e.trackA))},tooltip:r.createElement("span",null,"A"),filter:function(e,t,n){return e.trackA.toUpperCase().includes(n)},sortBy:function(e){return e.trackA},download:function(e){return e.trackA}},this._columns[S.TRACK_B]={name:"B",render:function(e){return r.createElement("span",null,r.createElement("b",null,e.trackB))},tooltip:r.createElement("span",null,"B"),filter:function(e,t,n){return e.trackB.toUpperCase().includes(n)},sortBy:function(e){return e.trackB},download:function(e){return e.trackB}},this._columns[S.NEITHER]={name:"Neither",render:function(e){return r.createElement("span",null,e.neitherCount)},tooltip:r.createElement("span",null,"Number of samples with alterations in neither A nor B"),sortBy:function(e){return e.neitherCount},download:function(e){return e.neitherCount.toString()}},this._columns[S.A_NOT_B]={name:"A Not B",render:function(e){return r.createElement("span",null,e.aNotBCount)},tooltip:r.createElement("span",null,"Number of samples with alterations in A but not in B"),sortBy:function(e){return e.aNotBCount},download:function(e){return e.aNotBCount.toString()}},this._columns[S.B_NOT_A]={name:"B Not A",render:function(e){return r.createElement("span",null,e.bNotACount)},tooltip:r.createElement("span",null,"Number of samples with alterations in B but not in A"),sortBy:function(e){return e.bNotACount},download:function(e){return e.bNotACount.toString()}},this._columns[S.BOTH]={name:"Both",render:function(e){return r.createElement("span",null,e.bothCount)},tooltip:r.createElement("span",null,"Number of samples with alterations in both A and B"),sortBy:function(e){return e.bothCount},download:function(e){return e.bothCount.toString()}},this._columns[S.LOG_ODDS_RATIO]={name:"Log2 Odds Ratio",render:function(e){return r.createElement("span",null,Object(l.b)(e.logOddsRatio))},tooltip:r.createElement("span",{style:{display:"inline-block",maxWidth:300}},"Quantifies how strongly the presence or absence of alterations in A are associated with the presence or absence of alterations in B in the selected samples. OR = (Neither * Both) / (A Not B * B Not A)"),sortBy:function(e){return e.logOddsRatio},download:function(e){return Object(l.b)(e.logOddsRatio)}},this._columns[S.P_VALUE]={name:"p-Value",render:function(e){return r.createElement("span",null,Object(l.c)(e.pValue))},tooltip:r.createElement("span",null,"Derived from one-sided Fisher Exact Test"),sortBy:function(e){return e.pValue},download:function(e){return Object(l.c)(e.pValue)}},this._columns[S.Q_VALUE]={name:"q-Value",render:function(e){return Object(l.d)(e.qValue)},tooltip:r.createElement("span",null,"Derived from Benjamini-Hochberg FDR correction procedure"),sortBy:function(e){return e.qValue},download:function(e){return Object(l.c)(e.qValue)}},this._columns[S.ASSOCIATION]={name:"Tendency",render:function(e){return r.createElement("div",{className:d()(c.a.Tendency,(t={},n=c.a.Significant,o=e.qValue<.05,n in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,t))},e.association);var t,n,o},tooltip:r.createElement("table",null,r.createElement("tr",null,r.createElement("td",null,"Log2 ratio > 0"),r.createElement("td",null,": Tendency towards co-occurrence")),r.createElement("tr",null,r.createElement("td",null,"Log2 ratio <= 0"),r.createElement("td",null,": Tendency towards mutual exclusivity")),r.createElement("tr",null,r.createElement("td",null,"q-Value < 0.05"),r.createElement("td",null,": Significant association"))),filter:function(e,t,n){return e.association.toUpperCase().includes(n)},sortBy:function(e){return e.association},download:function(e){return e.association}}}},{key:"render",value:function(){var e=o.sortBy(this._columns,function(e){return e.order});return r.createElement(w,{columns:e,data:this.props.data,initialItemsPerPage:50,initialSortColumn:this.props.initialSortColumn,paginationProps:{itemsPerPageOptions:[50]}})}}])&&f(n.prototype,i),a&&f(n,a),t}();E.defaultProps={columns:[S.TRACK_A,S.TRACK_B,S.NEITHER,S.A_NOT_B,S.B_NOT_A,S.BOTH,S.LOG_ODDS_RATIO,S.P_VALUE,S.Q_VALUE,S.ASSOCIATION],initialSortColumn:"q-Value"},_([s.observable],E.prototype,"_columns",void 0);var O=E=_([a.observer],E),C=n(56),P=n(101),x=n(645),T=n(646);function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var j=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":M(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},N=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=A(t).call(this,e))||"object"!==M(o)&&"function"!=typeof o?I(r):o).mutualExclusivityFilter=!0,n.coOccurenceFilter=!0,n.significantPairsFilter=!1,n.mutualExclusivityFilterChange=n.mutualExclusivityFilterChange.bind(I(n)),n.coOccurenceFilterChange=n.coOccurenceFilterChange.bind(I(n)),n.significantPairsFilterChange=n.significantPairsFilterChange.bind(I(n)),n}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,r["Component"]),n=t,(i=[{key:"mutualExclusivityFilterChange",value:function(){this.mutualExclusivityFilter=!this.mutualExclusivityFilter}},{key:"coOccurenceFilterChange",value:function(){this.coOccurenceFilter=!this.coOccurenceFilter}},{key:"significantPairsFilterChange",value:function(){this.significantPairsFilter=!this.significantPairsFilter}},{key:"render",value:function(){return this.props.isSampleAlteredMap.isPending?r.createElement(P.a,{isLoading:!0}):this.props.isSampleAlteredMap.isComplete?this.notEnoughDataError?r.createElement("div",{className:"tabMessageContainer"},r.createElement("div",{className:"alert alert-info"},this.notEnoughDataError),this.filteredTrackOqls.length>0&&r.createElement("div",{className:"alert alert-warning",role:"alert"},this.filteredTrackOqlsMessage),this.props.store&&r.createElement(T.a,{store:this.props.store})):r.createElement("div",{"data-test":"mutualExclusivityTabDiv"},this.props.store&&r.createElement("div",{className:"tabMessageContainer"},r.createElement(x.a,{className:"mutex-oql-status-banner",store:this.props.store,tabReflectsOql:!0}),this.filteredTrackOqls.length>0&&r.createElement("div",{className:"alert alert-warning",role:"alert"},this.filteredTrackOqlsMessage),r.createElement(T.a,{store:this.props.store})),Object(l.h)(this.data,o.size(this.isSampleAlteredFilteredMap)),r.createElement("div",{className:c.a.Checkboxes},r.createElement(C.Checkbox,{checked:this.mutualExclusivityFilter,onChange:this.mutualExclusivityFilterChange},"Mutual exclusivity"),r.createElement(C.Checkbox,{checked:this.coOccurenceFilter,onChange:this.coOccurenceFilterChange},"Co-occurrence"),r.createElement(C.Checkbox,{checked:this.significantPairsFilter,onChange:this.significantPairsFilterChange},"Significant only")),r.createElement(O,{data:this.filteredData})):null}},{key:"data",get:function(){return Object(l.e)(this.isSampleAlteredFilteredMap)}},{key:"filteredData",get:function(){return Object(l.f)(this.data,this.mutualExclusivityFilter,this.coOccurenceFilter,this.significantPairsFilter)}},{key:"isSampleAlteredFilteredMap",get:function(){return Object(l.g)(this.props.isSampleAlteredMap.result)}},{key:"filteredTrackOqls",get:function(){return o.difference(Object.keys(this.props.isSampleAlteredMap.result),Object.keys(this.isSampleAlteredFilteredMap))}},{key:"filteredTrackOqlsMessage",get:function(){return 1==this.filteredTrackOqls.length?"".concat(this.filteredTrackOqls[0]," is not profiled in any queried samples and therefore is excluded from this analysis."):this.filteredTrackOqls.length>1?"".concat(this.filteredTrackOqls.slice(0,-1).join(", ")," and ").concat(this.filteredTrackOqls.slice(-1)," are not profiled in any queried samples and therefore are excluded from this analysis."):""}},{key:"notEnoughDataError",get:function(){return o.size(this.props.isSampleAlteredMap.result)<2?"Mutual exclusivity analysis can only be performed when data from at least two genes is provided.":o.size(this.isSampleAlteredFilteredMap)<2?"Mutual exclusivity analysis can only be performed when at least two of the queried genes have been profiled in the queried samples.":null}}])&&k(n.prototype,i),a&&k(n,a),t}();j([s.observable],N.prototype,"mutualExclusivityFilter",void 0),j([s.observable],N.prototype,"coOccurenceFilter",void 0),j([s.observable],N.prototype,"significantPairsFilter",void 0),j([s.computed],N.prototype,"data",null),j([s.computed],N.prototype,"filteredData",null),j([s.computed],N.prototype,"isSampleAlteredFilteredMap",null),j([s.computed],N.prototype,"filteredTrackOqls",null),j([s.computed],N.prototype,"filteredTrackOqlsMessage",null),j([s.computed],N.prototype,"notEnoughDataError",null),N=j([a.observer],N);t.a=N},,,,,function(e,t,n){var r,o,i;r={},o=0,i=function(e){var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)},e.exports=function(e,t,n){var a;t&&"function"!=typeof t&&(n=t.context||n,a=t.setup,t=t.callback);var s,l,u=document.createElement("script"),c=!1,p=function(){c||(c=!0,l(),t&&t.call(n,s))},d=function(){s=new Error(e||"EMPTY"),p()};if(!u.readyState||"async"in u)l=function(){u.onload=u.onerror=null},u.onerror=d,u.onload=p,u.async=!0,u.charset="utf-8",a&&a.call(n,u),u.src=e,i(u);else{var f=o++,h={loaded:!0,complete:!0},m=!1;l=function(){u.onreadystatechange=u.onerror=null,r[f]=void 0},u.onreadystatechange=function(){var e=u.readyState;if(!s){if(!m&&h[e]&&(m=!0,i(u)),"loaded"===e&&(u.children,"loading"===u.readyState))return d();"complete"===u.readyState&&p()}},u.onerror=d,r[f]=u,a&&a.call(n,u),u.src=e}}},,,function(e,t,n){"use strict";n.d(t,"b",function(){return y}),n.d(t,"a",function(){return g});var r=n(0),o=n(2),i=n(56),a=n(9),s=n.n(a),l=n(574),u=n(7);function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var m=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":h(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},y=17,g=8,v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,d(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return this.props.model?r.createElement(i.Popover,{arrowOffsetTop:y,className:s()("cbioportal-frontent","cbioTooltip"),positionLeft:this.positionLeft,positionTop:this.props.mousePosition.y-y,style:{width:150},placement:this.placement},r.createElement("div",null,r.createElement("div",null,"Number of samples:"," ",r.createElement("strong",null,this.props.model.sampleCount)),r.createElement("div",null,"Range:"," ",r.createElement("strong",null,Object(l.s)(this.props.model.start,this.props.model.end,this.props.model.special))))):null}},{key:"placement",get:function(){return this.props.totalBars<2*this.props.currentBarIndex?"left":"right"}},{key:"positionLeft",get:function(){return"left"===this.placement?this.props.mousePosition.x-(g+150):this.props.mousePosition.x+g}},{key:"transform",get:function(){return"left"===this.placement?"translate(-100%,0%)":void 0}}])&&c(n.prototype,o),a&&c(n,a),t}();m([o.computed],v.prototype,"placement",null),m([o.computed],v.prototype,"positionLeft",null),m([o.computed],v.prototype,"transform",null),v=m([u.observer],v),t.c=v},function(module,exports,__webpack_require__){(function(global,$){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,require,require,__WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(){var $jscomp=$jscomp||{},n,C;$jscomp.scope={},$jscomp.findInternal=function(e,t,n){e instanceof String&&(e=String(e));for(var r=e.length,o=0;o<r;o++){var i=e[o];if(t.call(n,i,o,e))return{i:o,v:i}}return{i:-1,v:void 0}},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:void 0!==global&&null!=global?global:e},$jscomp.global=$jscomp.getGlobal(this),$jscomp.polyfill=function(e,t,n,r){if(t){for(n=$jscomp.global,e=e.split("."),r=0;r<e.length-1;r++){var o=e[r];o in n||(n[o]={}),n=n[o]}(t=t(r=n[e=e[e.length-1]]))!=r&&null!=t&&$jscomp.defineProperty(n,e,{configurable:!0,writable:!0,value:t})}},$jscomp.polyfill("Array.prototype.find",function(e){return e||function(e,t){return $jscomp.findInternal(this,e,t).v}},"es6","es3"),n="undefined"!=typeof window?window:this,C=function(e,t){function n(e,t){var n=(t=t||K).createElement("script");n.text=e,t.head.appendChild(n).parentNode.removeChild(n)}function r(e){var t=!!e&&"length"in e&&e.length,n=ie.type(e);return"function"!==n&&!ie.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}function o(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}function i(e,t,n){return ie.isFunction(t)?ie.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?ie.grep(e,function(e){return e===t!==n}):"string"!=typeof t?ie.grep(e,function(e){return-1<Z.call(t,e)!==n}):me.test(t)?ie.filter(t,e,n):(t=ie.filter(t,e),ie.grep(e,function(e){return-1<Z.call(t,e)!==n&&1===e.nodeType}))}function a(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function s(e){return e}function l(e){throw e}function u(e,t,n,r){var o;try{e&&ie.isFunction(o=e.promise)?o.call(e).done(t).fail(n):e&&ie.isFunction(o=e.then)?o.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}function c(){K.removeEventListener("DOMContentLoaded",c),e.removeEventListener("load",c),ie.ready()}function p(){this.expando=ie.expando+p.uid++}function d(e,t,n){if(void 0===n&&1===e.nodeType)if(n="data-"+t.replace(Te,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(n))){try{var r=n;n="true"===r||"false"!==r&&("null"===r?null:r===+r+""?+r:xe.test(r)?JSON.parse(r):r)}catch(e){}Pe.set(e,t,n)}else n=void 0;return n}function f(e,t,n,r){var o=1,i=20,a=r?function(){return r.cur()}:function(){return ie.css(e,t,"")},s=a(),l=n&&n[3]||(ie.cssNumber[t]?"":"px"),u=(ie.cssNumber[t]||"px"!==l&&+s)&&Ae.exec(ie.css(e,t));if(u&&u[3]!==l){l=l||u[3],n=n||[],u=+s||1;do{u/=o=o||".5",ie.style(e,t,u+l)}while(o!==(o=a()/s)&&1!==o&&--i)}if(n){u=+u||+s||0;var c=n[1]?u+(n[1]+1)*n[2]:+n[2];r&&(r.unit=l,r.start=u,r.end=c)}return c}function h(e,t){for(var n,r,o=[],i=0,a=e.length;i<a;i++)if((r=e[i]).style)if(n=r.style.display,t){if("none"===n&&(o[i]=Ce.get(r,"display")||null,o[i]||(r.style.display="")),""===r.style.display&&De(r)){n=i;var s=r.ownerDocument;r=r.nodeName;var l=je[r];l||(s=s.body.appendChild(s.createElement(r)),l=ie.css(s,"display"),s.parentNode.removeChild(s),"none"===l&&(l="block"),je[r]=l),s=l,o[n]=s}}else"none"!==n&&(o[i]="none",Ce.set(r,"display",n));for(i=0;i<a;i++)null!=o[i]&&(e[i].style.display=o[i]);return e}function m(e,t){var n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&o(e,t)?ie.merge([e],n):n}function y(e,t){for(var n=0,r=e.length;n<r;n++)Ce.set(e[n],"globalEval",!t||Ce.get(t[n],"globalEval"))}function g(e,t,n,r,o){for(var i,a,s,l=t.createDocumentFragment(),u=[],c=0,p=e.length;c<p;c++)if((i=e[c])||0===i)if("object"===ie.type(i))ie.merge(u,i.nodeType?[i]:i);else if(Ve.test(i)){for(a=a||l.appendChild(t.createElement("div")),s=(Re.exec(i)||["",""])[1].toLowerCase(),s=Ge[s]||Ge._default,a.innerHTML=s[1]+ie.htmlPrefilter(i)+s[2],s=s[0];s--;)a=a.lastChild;ie.merge(u,a.childNodes),(a=l.firstChild).textContent=""}else u.push(t.createTextNode(i));for(l.textContent="",c=0;i=u[c++];)if(r&&-1<ie.inArray(i,r))o&&o.push(i);else if(e=ie.contains(i.ownerDocument,i),a=m(l.appendChild(i),"script"),e&&y(a),n)for(s=0;i=a[s++];)Le.test(i.type||"")&&n.push(i);return l}function v(){return!0}function b(){return!1}function S(){try{return K.activeElement}catch(e){}}function _(e,t,n,r,o,i){var a;if("object"==typeof t){for(a in"string"!=typeof n&&(r=r||n,n=void 0),t)_(e,a,n,r,t[a],i);return e}if(null==r&&null==o?(o=n,r=n=void 0):null==o&&("string"==typeof n?(o=r,r=void 0):(o=r,r=n,n=void 0)),!1===o)o=b;else if(!o)return e;if(1===i){var s=o;(o=function(e){return ie().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=ie.guid++)}return e.each(function(){ie.event.add(this,t,o,r,n)})}function w(e,t){return o(e,"table")&&o(11!==t.nodeType?t:t.firstChild,"tr")&&ie(">tbody",e)[0]||e}function E(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function O(e){var t=Qe.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function C(e,t){var n,r;if(1===t.nodeType){if(Ce.hasData(e)){var o=Ce.access(e),i=Ce.set(t,o);if(o=o.events)for(r in delete i.handle,i.events={},o)for(i=0,n=o[r].length;i<n;i++)ie.event.add(t,r,o[r][i])}Pe.hasData(e)&&(e=Pe.access(e),e=ie.extend({},e),Pe.set(t,e))}}function P(e,t,r,o){t=Y.apply([],t);var i,a=0,s=e.length,l=s-1,u=t[0],c=ie.isFunction(u);if(c||1<s&&"string"==typeof u&&!oe.checkClone&&$e.test(u))return e.each(function(n){var i=e.eq(n);c&&(t[0]=u.call(this,n,i.html())),P(i,t,r,o)});if(s){var p=g(t,e[0].ownerDocument,!1,e,o),d=p.firstChild;if(1===p.childNodes.length&&(p=d),d||o){for(i=(d=ie.map(m(p,"script"),E)).length;a<s;a++){var f=p;a!==l&&(f=ie.clone(f,!0,!0),i&&ie.merge(d,m(f,"script"))),r.call(e[a],f,a)}if(i)for(p=d[d.length-1].ownerDocument,ie.map(d,O),a=0;a<i;a++)f=d[a],Le.test(f.type||"")&&!Ce.access(f,"globalEval")&&ie.contains(p,f)&&(f.src?ie._evalUrl&&ie._evalUrl(f.src):n(f.textContent.replace(Ye,""),p))}}return e}function x(e,t,n){for(var r=t?ie.filter(t,e):e,o=0;null!=(t=r[o]);o++)n||1!==t.nodeType||ie.cleanData(m(t)),t.parentNode&&(n&&ie.contains(t.ownerDocument,t)&&y(m(t,"script")),t.parentNode.removeChild(t));return e}function T(e,t,n){var r=e.style;if(n=n||Je(e)){var o=n.getPropertyValue(t)||n[t];if(""!==o||ie.contains(e.ownerDocument,e)||(o=ie.style(e,t)),!oe.pixelMarginRight()&&Ze.test(o)&&Xe.test(t)){e=r.width,t=r.minWidth;var i=r.maxWidth;r.minWidth=r.maxWidth=r.width=o,o=n.width,r.width=e,r.minWidth=t,r.maxWidth=i}}return void 0!==o?o+"":o}function k(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}function A(e){var t=ie.cssProps[e];if(!t){t=ie.cssProps;e:{var n=e;if(!(n in it)){for(var r=n[0].toUpperCase()+n.slice(1),o=ot.length;o--;)if((n=ot[o]+r)in it)break e;n=void 0}}t=t[e]=n||e}return t}function I(e,t,n){return(e=Ae.exec(t))?Math.max(0,e[2]-(n||0))+(e[3]||"px"):t}function D(e,t,n,r,o){var i=0;for(t=n===(r?"border":"content")?4:"width"===t?1:0;4>t;t+=2)"margin"===n&&(i+=ie.css(e,n+Ie[t],!0,o)),r?("content"===n&&(i-=ie.css(e,"padding"+Ie[t],!0,o)),"margin"!==n&&(i-=ie.css(e,"border"+Ie[t]+"Width",!0,o))):(i+=ie.css(e,"padding"+Ie[t],!0,o),"padding"!==n&&(i+=ie.css(e,"border"+Ie[t]+"Width",!0,o)));return i}function M(e,t,n){var r=Je(e),o=T(e,t,r),i="border-box"===ie.css(e,"boxSizing",!1,r);if(Ze.test(o))return o;var a=i&&(oe.boxSizingReliable()||o===e.style[t]);return"auto"===o&&(o=e["offset"+t[0].toUpperCase()+t.slice(1)]),(o=parseFloat(o)||0)+D(e,t,n||(i?"border":"content"),a,r)+"px"}function j(e,t,n,r,o){return new j.prototype.init(e,t,n,r,o)}function N(){st&&(!1===K.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(N):e.setTimeout(N,ie.fx.interval),ie.fx.tick())}function R(){return e.setTimeout(function(){at=void 0}),at=ie.now()}function L(e,t){var n=0,r={height:e};for(t=t?1:0;4>n;n+=2-t){var o=Ie[n];r["margin"+o]=r["padding"+o]=e}return t&&(r.opacity=r.width=e),r}function G(e,t,n){for(var r,o=(F.tweeners[t]||[]).concat(F.tweeners["*"]),i=0,a=o.length;i<a;i++)if(r=o[i].call(n,t,e))return r}function F(e,t,n){var r,o=0,i=F.prefilters.length,a=ie.Deferred().always(function(){delete s.elem}),s=function(){if(r)return!1;for(var t=at||R(),n=1-((t=Math.max(0,l.startTime+l.duration-t))/l.duration||0),o=0,i=l.tweens.length;o<i;o++)l.tweens[o].run(n);return a.notifyWith(e,[l,n,t]),1>n&&i?t:(i||a.notifyWith(e,[l,1,0]),a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:ie.extend({},t),opts:ie.extend(!0,{specialEasing:{},easing:ie.easing._default},n),originalProperties:t,originalOptions:n,startTime:at||R(),duration:n.duration,tweens:[],createTween:function(t,n){return t=ie.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing),l.tweens.push(t),t},stop:function(t){var n=0,o=t?l.tweens.length:0;if(r)return this;for(r=!0;n<o;n++)l.tweens[n].run(1);return t?(a.notifyWith(e,[l,1,0]),a.resolveWith(e,[l,t])):a.rejectWith(e,[l,t]),this}});for(function(e,t){var n,r;for(n in e){var o=ie.camelCase(n),i=t[o],a=e[n];if(Array.isArray(a)&&(i=a[1],a=e[n]=a[0]),n!==o&&(e[o]=a,delete e[n]),(r=ie.cssHooks[o])&&"expand"in r)for(n in a=r.expand(a),delete e[o],a)n in e||(e[n]=a[n],t[n]=i);else t[o]=i}}(n=l.props,l.opts.specialEasing);o<i;o++)if(t=F.prefilters[o].call(l,e,n,l.opts))return ie.isFunction(t.stop)&&(ie._queueHooks(l.elem,l.opts.queue).stop=ie.proxy(t.stop,t)),t;return ie.map(n,G,l),ie.isFunction(l.opts.start)&&l.opts.start.call(e,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),ie.fx.timer(ie.extend(s,{elem:e,anim:l,queue:l.opts.queue})),l}function B(e){return(e.match(Se)||[]).join(" ")}function V(e){return e.getAttribute&&e.getAttribute("class")||""}function z(e,t,n,r){var o;if(Array.isArray(t))ie.each(t,function(t,o){n||bt.test(e)?r(e,o):z(e+"["+("object"==typeof o&&null!=o?t:"")+"]",o,n,r)});else if(n||"object"!==ie.type(t))r(e,t);else for(o in t)z(e+"["+o+"]",t[o],n,r)}function q(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r=0,o=t.toLowerCase().match(Se)||[];if(ie.isFunction(n))for(;t=o[r++];)"+"===t[0]?(t=t.slice(1)||"*",(e[t]=e[t]||[]).unshift(n)):(e[t]=e[t]||[]).push(n)}}function U(e,t,n,r){function o(s){var l;return i[s]=!0,ie.each(e[s]||[],function(e,s){return"string"!=typeof(e=s(t,n,r))||a||i[e]?a?!(l=e):void 0:(t.dataTypes.unshift(e),o(e),!1)}),l}var i={},a=e===At;return o(t.dataTypes[0])||!i["*"]&&o("*")}function H(e,t){var n,r,o=ie.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((o[n]?e:r||(r={}))[n]=t[n]);return r&&ie.extend(!0,e,r),e}var W=[],K=e.document,$=Object.getPrototypeOf,Q=W.slice,Y=W.concat,X=W.push,Z=W.indexOf,J={},ee=J.toString,te=J.hasOwnProperty,ne=te.toString,re=ne.call(Object),oe={},ie=function(e,t){return new ie.fn.init(e,t)},ae=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,se=/^-ms-/,le=/-([a-z])/g,ue=function(e,t){return t.toUpperCase()};ie.fn=ie.prototype={jquery:"3.2.1",constructor:ie,length:0,toArray:function(){return Q.call(this)},get:function(e){return null==e?Q.call(this):0>e?this[e+this.length]:this[e]},pushStack:function(e){return(e=ie.merge(this.constructor(),e)).prevObject=this,e},each:function(e){return ie.each(this,e)},map:function(e){return this.pushStack(ie.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(Q.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length;return e=+e+(0>e?t:0),this.pushStack(0<=e&&e<t?[this[e]]:[])},end:function(){return this.prevObject||this.constructor()},push:X,sort:W.sort,splice:W.splice},ie.extend=ie.fn.extend=function(){var e,t,n,r=arguments[0]||{},o=1,i=arguments.length,a=!1;for("boolean"==typeof r&&(a=r,r=arguments[o]||{},o++),"object"==typeof r||ie.isFunction(r)||(r={}),o===i&&(r=this,o--);o<i;o++)if(null!=(e=arguments[o]))for(t in e){var s=r[t],l=e[t];r!==l&&(a&&l&&(ie.isPlainObject(l)||(n=Array.isArray(l)))?(n?(n=!1,s=s&&Array.isArray(s)?s:[]):s=s&&ie.isPlainObject(s)?s:{},r[t]=ie.extend(a,s,l)):void 0!==l&&(r[t]=l))}return r},ie.extend({expando:"jQuery"+("3.2.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw Error(e)},noop:function(){},isFunction:function(e){return"function"===ie.type(e)},isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=ie.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},isPlainObject:function(e){return!(!e||"[object Object]"!==ee.call(e))&&(!(e=$(e))||"function"==typeof(e=te.call(e,"constructor")&&e.constructor)&&ne.call(e)===re)},isEmptyObject:function(e){for(var t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?J[ee.call(e)]||"object":typeof e},globalEval:function(e){n(e)},camelCase:function(e){return e.replace(se,"ms-").replace(le,ue)},each:function(e,t){var n,o=0;if(r(e))for(n=e.length;o<n&&!1!==t.call(e[o],o,e[o]);o++);else for(o in e)if(!1===t.call(e[o],o,e[o]))break;return e},trim:function(e){return null==e?"":(e+"").replace(ae,"")},makeArray:function(e,t){return t=t||[],null!=e&&(r(Object(e))?ie.merge(t,"string"==typeof e?[e]:e):X.call(t,e)),t},inArray:function(e,t,n){return null==t?-1:Z.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,o=e.length;r<n;r++)e[o++]=t[r];return e.length=o,e},grep:function(e,t,n){for(var r=[],o=0,i=e.length,a=!n;o<i;o++)(n=!t(e[o],o))!==a&&r.push(e[o]);return r},map:function(e,t,n){var o,i=0,a=[];if(r(e))for(o=e.length;i<o;i++){var s=t(e[i],i,n);null!=s&&a.push(s)}else for(i in e)null!=(s=t(e[i],i,n))&&a.push(s);return Y.apply([],a)},guid:1,proxy:function(e,t){if("string"==typeof t){var n=e[t];t=e,e=n}if(ie.isFunction(e)){var r=Q.call(arguments,2);return(n=function(){return e.apply(t||this,r.concat(Q.call(arguments)))}).guid=e.guid=e.guid||ie.guid++,n}},now:Date.now,support:oe}),"function"==typeof Symbol&&(ie.fn[Symbol.iterator]=W[Symbol.iterator]),ie.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){J["[object "+t+"]"]=t.toLowerCase()});var ce=function(e){function t(e,t,n,r){var o,i,a,s,l=t&&t.ownerDocument,u=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==u&&9!==u&&11!==u)return n;if(!r&&((t?t.ownerDocument||t:D)!==O&&fe(t),t=t||O,P)){if(11!==u&&(s=re.exec(e)))if(o=s[1]){if(9===u){if(!(i=t.getElementById(o)))return n;if(i.id===o)return n.push(i),n}else if(l&&(i=l.getElementById(o))&&A(t,i)&&i.id===o)return n.push(i),n}else{if(s[2])return q.apply(n,t.getElementsByTagName(e)),n;if((o=s[3])&&pe.getElementsByClassName&&t.getElementsByClassName)return q.apply(n,t.getElementsByClassName(o)),n}if(!(!pe.qsa||L[e+" "]||x&&x.test(e))){if(1!==u){l=t;var c=e}else if("object"!==t.nodeName.toLowerCase()){for((a=t.getAttribute("id"))?a=a.replace(se,le):t.setAttribute("id",a=I),o=(i=ye(e)).length;o--;)i[o]="#"+a+" "+f(i[o]);c=i.join(","),l=oe.test(e)&&p(t.parentNode)||t}if(c)try{return q.apply(n,l.querySelectorAll(c)),n}catch(e){}finally{a===I&&t.removeAttribute("id")}}}return ve(e.replace(K,"$1"),t,n,r)}function n(){var e=[];return function t(n,r){return e.push(n+" ")>me.cacheLength&&delete t[e.shift()],t[n+" "]=r}}function r(e){return e[I]=!0,e}function o(e){var t=O.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t)}}function i(e,t){for(var n=(e=e.split("|")).length;n--;)me.attrHandle[e[n]]=t}function a(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function u(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ce(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function c(e){return r(function(t){return t=+t,r(function(n,r){for(var o,i=e([],n.length,t),a=i.length;a--;)n[o=i[a]]&&(n[o]=!(r[o]=n[o]))})})}function p(e){return e&&void 0!==e.getElementsByTagName&&e}function d(){}function f(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function h(e,t,n){var r=t.dir,o=t.next,i=o||r,a=n&&"parentNode"===i,s=j++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||a)return e(t,n,o);return!1}:function(t,n,l){var u,c=[M,s];if(l){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,n,l))return!0}else for(;t=t[r];)if(1===t.nodeType||a){var p=t[I]||(t[I]={});if(p=p[t.uniqueID]||(p[t.uniqueID]={}),o&&o===t.nodeName.toLowerCase())t=t[r]||t;else{if((u=p[i])&&u[0]===M&&u[1]===s)return c[2]=u[2];if(p[i]=c,c[2]=e(t,n,l))return!0}}return!1}}function m(e){return 1<e.length?function(t,n,r){for(var o=e.length;o--;)if(!e[o](t,n,r))return!1;return!0}:e[0]}function y(e,t,n,r,o){for(var i,a=[],s=0,l=e.length,u=null!=t;s<l;s++)(i=e[s])&&(n&&!n(i,r,o)||(a.push(i),u&&t.push(s)));return a}function g(e,n,o,i,a,s){return i&&!i[I]&&(i=g(i)),a&&!a[I]&&(a=g(a,s)),r(function(r,s,l,u){var c,p,d=[],f=[],h=s.length;if(!(p=r)){p=n||"*";for(var m=l.nodeType?[l]:l,g=[],v=0,b=m.length;v<b;v++)t(p,m[v],g);p=g}if(p=!e||!r&&n?p:y(p,d,e,l,u),m=o?a||(r?e:h||i)?[]:s:p,o&&o(p,m,l,u),i){var S=y(m,f);for(i(S,[],l,u),l=S.length;l--;)(c=S[l])&&(m[f[l]]=!(p[f[l]]=c))}if(r){if(a||e){if(a){for(S=[],l=m.length;l--;)(c=m[l])&&S.push(p[l]=c);a(null,m=[],S,u)}for(l=m.length;l--;)(c=m[l])&&-1<(S=a?H(r,c):d[l])&&(r[S]=!(s[S]=c))}}else m=y(m===s?m.splice(h,m.length):m),a?a(null,s,m,u):q.apply(s,m)})}function v(e){for(var t,n,r=e.length,o=me.relative[e[0].type],i=o||me.relative[" "],a=o?1:0,s=h(function(e){return e===t},i,!0),l=h(function(e){return-1<H(t,e)},i,!0),u=[function(e,n,r){return e=!o&&(r||n!==_)||((t=n).nodeType?s(e,n,r):l(e,n,r)),t=null,e}];a<r;a++)if(i=me.relative[e[a].type])u=[h(m(u),i)];else{if((i=me.filter[e[a].type].apply(null,e[a].matches))[I]){for(n=++a;n<r&&!me.relative[e[n].type];n++);return g(1<a&&m(u),1<a&&f(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(K,"$1"),i,a<n&&v(e.slice(a,n)),n<r&&v(e=e.slice(n)),n<r&&f(e))}u.push(i)}return m(u)}function b(e,n){var o=0<n.length,i=0<e.length,a=function(r,a,s,l,u){var c,p,d=0,f="0",h=r&&[],m=[],g=_,v=r||i&&me.find.TAG("*",u),b=M+=null==g?1:Math.random()||.1,S=v.length;for(u&&(_=a===O||a||u);f!==S&&null!=(c=v[f]);f++){if(i&&c){var w=0;for(a||c.ownerDocument===O||(fe(c),s=!P);p=e[w++];)if(p(c,a||O,s)){l.push(c);break}u&&(M=b)}o&&((c=!p&&c)&&d--,r&&h.push(c))}if(d+=f,o&&f!==d){for(w=0;p=n[w++];)p(h,m,a,s);if(r){if(0<d)for(;f--;)h[f]||m[f]||(m[f]=V.call(l));m=y(m)}q.apply(l,m),u&&!r&&0<m.length&&1<d+n.length&&t.uniqueSort(l)}return u&&(M=b,_=g),h};return o?r(a):a}var S,_,w,E,O,C,P,x,T,k,A,I="sizzle"+1*new Date,D=e.document,M=0,j=0,N=n(),R=n(),L=n(),G=function(e,t){return e===t&&(E=!0),0},F={}.hasOwnProperty,B=[],V=B.pop,z=B.push,q=B.push,U=B.slice,H=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},W=/[\x20\t\r\n\f]+/g,K=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,$=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,Q=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,Y=/=[\x20\t\r\n\f]*([^\]'"]*?)[\x20\t\r\n\f]*\]/g,X=/:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,Z=/^(?:\\.|[\w-]|[^\x00-\xa0])+$/,J={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:/^((?:\\.|[\w-]|[^\x00-\xa0])+|[*])/,ATTR:/^\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\]/,PSEUDO:/^:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},ee=/^(?:input|select|textarea|button)$/i,te=/^h\d$/i,ne=/^[^{]+\{\s*\[native \w/,re=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,oe=/[+~]/,ie=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/gi,ae=function(e,t,n){return(e="0x"+t-65536)!=e||n?t:0>e?String.fromCharCode(e+65536):String.fromCharCode(e>>10|55296,1023&e|56320)},se=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,le=function(e,t){return t?"\0"===e?"":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ue=function(){fe()},ce=h(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{q.apply(B=U.call(D.childNodes),D.childNodes),B[D.childNodes.length].nodeType}catch(e){q={apply:B.length?function(e,t){z.apply(e,U.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}var pe=t.support={},de=t.isXML=function(e){return!!(e=e&&(e.ownerDocument||e).documentElement)&&"HTML"!==e.nodeName},fe=t.setDocument=function(e){var t;return(e=e?e.ownerDocument||e:D)!==O&&9===e.nodeType&&e.documentElement?(C=(O=e).documentElement,P=!de(O),D!==O&&(t=O.defaultView)&&t.top!==t&&(t.addEventListener?t.addEventListener("unload",ue,!1):t.attachEvent&&t.attachEvent("onunload",ue)),pe.attributes=o(function(e){return e.className="i",!e.getAttribute("className")}),pe.getElementsByTagName=o(function(e){return e.appendChild(O.createComment("")),!e.getElementsByTagName("*").length}),pe.getElementsByClassName=ne.test(O.getElementsByClassName),pe.getById=o(function(e){return C.appendChild(e).id=I,!O.getElementsByName||!O.getElementsByName(I).length}),pe.getById?(me.filter.ID=function(e){var t=e.replace(ie,ae);return function(e){return e.getAttribute("id")===t}},me.find.ID=function(e,t){if(void 0!==t.getElementById&&P)return(e=t.getElementById(e))?[e]:[]}):(me.filter.ID=function(e){var t=e.replace(ie,ae);return function(e){return(e=void 0!==e.getAttributeNode&&e.getAttributeNode("id"))&&e.value===t}},me.find.ID=function(e,t){if(void 0!==t.getElementById&&P){var n,r=t.getElementById(e);if(r){if((n=r.getAttributeNode("id"))&&n.value===e)return[r];var o=t.getElementsByName(e);for(t=0;r=o[t++];)if((n=r.getAttributeNode("id"))&&n.value===e)return[r]}return[]}}),me.find.TAG=pe.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):pe.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n=[],r=0;if(t=t.getElementsByTagName(e),"*"===e){for(;e=t[r++];)1===e.nodeType&&n.push(e);return n}return t},me.find.CLASS=pe.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&P)return t.getElementsByClassName(e)},T=[],x=[],(pe.qsa=ne.test(O.querySelectorAll))&&(o(function(e){C.appendChild(e).innerHTML="<a id='"+I+"'></a><select id='"+I+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&x.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll("[selected]").length||x.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)"),e.querySelectorAll("[id~="+I+"-]").length||x.push("~="),e.querySelectorAll(":checked").length||x.push(":checked"),e.querySelectorAll("a#"+I+"+*").length||x.push(".#.+[+~]")}),o(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=O.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&x.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&x.push(":enabled",":disabled"),C.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&x.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),x.push(",.*:")})),(pe.matchesSelector=ne.test(k=C.matches||C.webkitMatchesSelector||C.mozMatchesSelector||C.oMatchesSelector||C.msMatchesSelector))&&o(function(e){pe.disconnectedMatch=k.call(e,"*"),k.call(e,"[s!='']:x"),T.push("!=",":((?:\\\\.|[\\w-]|[^\0-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\0-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\0-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)")}),x=x.length&&new RegExp(x.join("|")),T=T.length&&new RegExp(T.join("|")),A=(t=ne.test(C.compareDocumentPosition))||ne.test(C.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e;return e===(t=t&&t.parentNode)||!(!t||1!==t.nodeType||!(n.contains?n.contains(t):e.compareDocumentPosition&&16&e.compareDocumentPosition(t)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},G=t?function(e,t){if(e===t)return E=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!pe.sortDetached&&t.compareDocumentPosition(e)===n?e===O||e.ownerDocument===D&&A(D,e)?-1:t===O||t.ownerDocument===D&&A(D,t)?1:w?H(w,e)-H(w,t):0:4&n?-1:1)}:function(e,t){if(e===t)return E=!0,0;var n=0,r=e.parentNode,o=t.parentNode,i=[e],s=[t];if(!r||!o)return e===O?-1:t===O?1:r?-1:o?1:w?H(w,e)-H(w,t):0;if(r===o)return a(e,t);for(;e=e.parentNode;)i.unshift(e);for(e=t;e=e.parentNode;)s.unshift(e);for(;i[n]===s[n];)n++;return n?a(i[n],s[n]):i[n]===D?-1:s[n]===D?1:0},O):O};t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==O&&fe(e),n=n.replace(Y,"='$1']"),!(!pe.matchesSelector||!P||L[n+" "]||T&&T.test(n)||x&&x.test(n)))try{var r=k.call(e,n);if(r||pe.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return 0<t(n,O,null,[e]).length},t.contains=function(e,t){return(e.ownerDocument||e)!==O&&fe(e),A(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==O&&fe(e);var n=me.attrHandle[t.toLowerCase()];return void 0!==(n=n&&F.call(me.attrHandle,t.toLowerCase())?n(e,t,!P):void 0)?n:pe.attributes||!P?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},t.escape=function(e){return(e+"").replace(se,le)},t.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,o=0;if(E=!pe.detectDuplicates,w=!pe.sortStable&&e.slice(0),e.sort(G),E){for(;t=e[o++];)t===e[o]&&(r=n.push(o));for(;r--;)e.splice(n[r],1)}return w=null,e};var he=t.getText=function(e){var t="",n=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)t+=he(e)}else if(3===r||4===r)return e.nodeValue}else for(;r=e[n++];)t+=he(r);return t},me=t.selectors={cacheLength:50,createPseudo:r,match:J,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ie,ae),e[3]=(e[3]||e[4]||e[5]||"").replace(ie,ae),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return J.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=ye(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ie,ae).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=N[e+" "];return t||(t=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+e+"([\\x20\\t\\r\\n\\f]|$)"),N(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,n,r){return function(o){return null==(o=t.attr(o,e))?"!="===n:!n||(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&-1<o.indexOf(r):"$="===n?r&&o.slice(-r.length)===r:"~="===n?-1<(" "+o.replace(W," ")+" ").indexOf(r):"|="===n&&(o===r||o.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,n,r,o){var i="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===o?function(e){return!!e.parentNode}:function(t,n,l){var u,c;n=i!==a?"nextSibling":"previousSibling";var p=t.parentNode,d=s&&t.nodeName.toLowerCase();l=!l&&!s;var f=!1;if(p){if(i){for(;n;){for(u=t;u=u[n];)if(s?u.nodeName.toLowerCase()===d:1===u.nodeType)return!1;var h=n="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?p.firstChild:p.lastChild],a&&l){var m=(u=p)[I]||(u[I]={});for(f=(c=(f=(m=m[u.uniqueID]||(m[u.uniqueID]={}))[e]||[])[0]===M&&f[1])&&f[2],u=c&&p.childNodes[c];u=++c&&u&&u[n]||(f=c=0)||h.pop();)if(1===u.nodeType&&++f&&u===t){m[e]=[M,c,f];break}}else if(l&&(f=c=(f=(m=(m=(u=t)[I]||(u[I]={}))[u.uniqueID]||(m[u.uniqueID]={}))[e]||[])[0]===M&&f[1]),!1===f)for(;(u=++c&&u&&u[n]||(f=c=0)||h.pop())&&((s?u.nodeName.toLowerCase()!==d:1!==u.nodeType)||!++f||(l&&((m=(m=u[I]||(u[I]={}))[u.uniqueID]||(m[u.uniqueID]={}))[e]=[M,f]),u!==t)););return(f-=o)===r||0==f%r&&0<=f/r}}},PSEUDO:function(e,n){var o=me.pseudos[e]||me.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);if(o[I])return o(n);if(1<o.length){var i=[e,e,"",n];return me.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,i=o(e,n),a=i.length;a--;)e[r=H(e,i[a])]=!(t[r]=i[a])}):function(e){return o(e,0,i)}}return o}},pseudos:{not:r(function(e){var t=[],n=[],o=ge(e.replace(K,"$1"));return o[I]?r(function(e,t,n,r){r=o(e,null,r,[]);for(var i=e.length;i--;)(n=r[i])&&(e[i]=!(t[i]=n))}):function(e,r,i){return t[0]=e,o(t,null,i,n),t[0]=null,!n.pop()}}),has:r(function(e){return function(n){return 0<t(e,n).length}}),contains:r(function(e){return e=e.replace(ie,ae),function(t){return-1<(t.textContent||t.innerText||he(t)).indexOf(e)}}),lang:r(function(e){return Z.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(ie,ae).toLowerCase(),function(t){var n;do{if(n=P?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===C},focus:function(e){return e===O.activeElement&&(!O.hasFocus||O.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:u(!1),disabled:u(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(6>e.nodeType)return!1;return!0},parent:function(e){return!me.pseudos.empty(e)},header:function(e){return te.test(e.nodeName)},input:function(e){return ee.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,n){return[0>n?n+t:n]}),even:c(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:c(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:c(function(e,t,n){for(t=0>n?n+t:n;0<=--t;)e.push(t);return e}),gt:c(function(e,t,n){for(n=0>n?n+t:n;++n<t;)e.push(n);return e})}};for(S in me.pseudos.nth=me.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})me.pseudos[S]=s(S);for(S in{submit:!0,reset:!0})me.pseudos[S]=l(S);d.prototype=me.filters=me.pseudos,me.setFilters=new d;var ye=t.tokenize=function(e,n){var r,o,i,a,s;if(a=R[e+" "])return n?0:a.slice(0);a=e;var l=[];for(s=me.preFilter;a;){u&&!(r=$.exec(a))||(r&&(a=a.slice(r[0].length)||a),l.push(o=[]));var u=!1;for(i in(r=Q.exec(a))&&(u=r.shift(),o.push({value:u,type:r[0].replace(K," ")}),a=a.slice(u.length)),me.filter)!(r=J[i].exec(a))||s[i]&&!(r=s[i](r))||(u=r.shift(),o.push({value:u,type:i,matches:r}),a=a.slice(u.length));if(!u)break}return n?a.length:a?t.error(e):R(e,l).slice(0)},ge=t.compile=function(e,t){var n,r=[],o=[],i=L[e+" "];if(!i){for(t||(t=ye(e)),n=t.length;n--;)(i=v(t[n]))[I]?r.push(i):o.push(i);(i=L(e,b(o,r))).selector=e}return i},ve=t.select=function(e,t,n,r){var o,i,a,s="function"==typeof e&&e,l=!r&&ye(e=s.selector||e);if(n=n||[],1===l.length){var u=l[0]=l[0].slice(0);if(2<u.length&&"ID"===(i=u[0]).type&&9===t.nodeType&&P&&me.relative[u[1].type]){if(!(t=(me.find.ID(i.matches[0].replace(ie,ae),t)||[])[0]))return n;s&&(t=t.parentNode),e=e.slice(u.shift().value.length)}for(o=J.needsContext.test(e)?0:u.length;o--&&(i=u[o],!me.relative[a=i.type]);)if((a=me.find[a])&&(r=a(i.matches[0].replace(ie,ae),oe.test(u[0].type)&&p(t.parentNode)||t))){if(u.splice(o,1),!(e=r.length&&f(u)))return q.apply(n,r),n;break}}return(s||ge(e,l))(r,t,!P,n,!t||oe.test(e)&&p(t.parentNode)||t),n};return pe.sortStable=I.split("").sort(G).join("")===I,pe.detectDuplicates=!!E,fe(),pe.sortDetached=o(function(e){return 1&e.compareDocumentPosition(O.createElement("fieldset"))}),o(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||i("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),pe.attributes&&o(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||i("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),o(function(e){return null==e.getAttribute("disabled")})||i("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(e);ie.find=ce,ie.expr=ce.selectors,ie.expr[":"]=ie.expr.pseudos,ie.uniqueSort=ie.unique=ce.uniqueSort,ie.text=ce.getText,ie.isXMLDoc=ce.isXML,ie.contains=ce.contains,ie.escapeSelector=ce.escape;var pe=function(e,t,n){for(var r=[],o=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&ie(e).is(n))break;r.push(e)}return r},de=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},fe=ie.expr.match.needsContext,he=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,me=/^.[^:#\[\.,]*$/;ie.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?ie.find.matchesSelector(r,e)?[r]:[]:ie.find.matches(e,ie.grep(t,function(e){return 1===e.nodeType}))},ie.fn.extend({find:function(e){var t,n=this.length,r=this;if("string"!=typeof e)return this.pushStack(ie(e).filter(function(){for(t=0;t<n;t++)if(ie.contains(r[t],this))return!0}));var o=this.pushStack([]);for(t=0;t<n;t++)ie.find(e,r[t],o);return 1<n?ie.uniqueSort(o):o},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&fe.test(e)?ie(e):e||[],!1).length}});var ye=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(ie.fn.init=function(e,t,n){if(!e)return this;if(n=n||ge,"string"==typeof e){var r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:ye.exec(e);if(!r||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof ie?t[0]:t,ie.merge(this,ie.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:K,!0)),he.test(r[1])&&ie.isPlainObject(t))for(r in t)ie.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r])}else(e=K.getElementById(r[2]))&&(this[0]=e,this.length=1);return this}return e.nodeType?(this[0]=e,this.length=1,this):ie.isFunction(e)?void 0!==n.ready?n.ready(e):e(ie):ie.makeArray(e,this)}).prototype=ie.fn;var ge=ie(K),ve=/^(?:parents|prev(?:Until|All))/,be={children:!0,contents:!0,next:!0,prev:!0};ie.fn.extend({has:function(e){var t=ie(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(ie.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,o=this.length,i=[],a="string"!=typeof e&&ie(e);if(!fe.test(e))for(;r<o;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(11>n.nodeType&&(a?-1<a.index(n):1===n.nodeType&&ie.find.matchesSelector(n,e))){i.push(n);break}return this.pushStack(1<i.length?ie.uniqueSort(i):i)},index:function(e){return e?"string"==typeof e?Z.call(ie(e),this[0]):Z.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ie.uniqueSort(ie.merge(this.get(),ie(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ie.each({parent:function(e){return(e=e.parentNode)&&11!==e.nodeType?e:null},parents:function(e){return pe(e,"parentNode")},parentsUntil:function(e,t,n){return pe(e,"parentNode",n)},next:function(e){return a(e,"nextSibling")},prev:function(e){return a(e,"previousSibling")},nextAll:function(e){return pe(e,"nextSibling")},prevAll:function(e){return pe(e,"previousSibling")},nextUntil:function(e,t,n){return pe(e,"nextSibling",n)},prevUntil:function(e,t,n){return pe(e,"previousSibling",n)},siblings:function(e){return de((e.parentNode||{}).firstChild,e)},children:function(e){return de(e.firstChild)},contents:function(e){return o(e,"iframe")?e.contentDocument:(o(e,"template")&&(e=e.content||e),ie.merge([],e.childNodes))}},function(e,t){ie.fn[e]=function(n,r){var o=ie.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(o=ie.filter(r,o)),1<this.length&&(be[e]||ie.uniqueSort(o),ve.test(e)&&o.reverse()),this.pushStack(o)}});var Se=/[^\x20\t\r\n\f]+/g;ie.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return ie.each(e.match(Se)||[],function(e,n){t[n]=!0}),t}(e):ie.extend({},e);var t,n,r,o,i=[],a=[],s=-1,l=function(){for(o=o||e.once,r=t=!0;a.length;s=-1)for(n=a.shift();++s<i.length;)!1===i[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=i.length,n=!1);e.memory||(n=!1),t=!1,o&&(i=n?[]:"")},u={add:function(){return i&&(n&&!t&&(s=i.length-1,a.push(n)),function t(n){ie.each(n,function(n,r){ie.isFunction(r)?e.unique&&u.has(r)||i.push(r):r&&r.length&&"string"!==ie.type(r)&&t(r)})}(arguments),n&&!t&&l()),this},remove:function(){return ie.each(arguments,function(e,t){for(var n;-1<(n=ie.inArray(t,i,n));)i.splice(n,1),n<=s&&s--}),this},has:function(e){return e?-1<ie.inArray(e,i):0<i.length},empty:function(){return i&&(i=[]),this},disable:function(){return o=a=[],i=n="",this},disabled:function(){return!i},lock:function(){return o=a=[],n||t||(i=n=""),this},locked:function(){return!!o},fireWith:function(e,n){return o||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||l()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!r}};return u},ie.extend({Deferred:function(t){var n=[["notify","progress",ie.Callbacks("memory"),ie.Callbacks("memory"),2],["resolve","done",ie.Callbacks("once memory"),ie.Callbacks("once memory"),0,"resolved"],["reject","fail",ie.Callbacks("once memory"),ie.Callbacks("once memory"),1,"rejected"]],r="pending",o={state:function(){return r},always:function(){return i.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var e=arguments;return ie.Deferred(function(t){ie.each(n,function(n,r){var o=ie.isFunction(e[r[4]])&&e[r[4]];i[r[1]](function(){var e=o&&o.apply(this,arguments);e&&ie.isFunction(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+"With"](this,o?[e]:arguments)})}),e=null}).promise()},then:function(t,r,o){function i(t,n,r,o){return function(){var u=this,c=arguments,p=function(){if(!(t<a)){var e=r.apply(u,c);if(e===n.promise())throw new TypeError("Thenable self-resolution");var p=e&&("object"==typeof e||"function"==typeof e)&&e.then;ie.isFunction(p)?o?p.call(e,i(a,n,s,o),i(a,n,l,o)):(a++,p.call(e,i(a,n,s,o),i(a,n,l,o),i(a,n,s,n.notifyWith))):(r!==s&&(u=void 0,c=[e]),(o||n.resolveWith)(u,c))}},d=o?p:function(){try{p()}catch(e){ie.Deferred.exceptionHook&&ie.Deferred.exceptionHook(e,d.stackTrace),t+1>=a&&(r!==l&&(u=void 0,c=[e]),n.rejectWith(u,c))}};t?d():(ie.Deferred.getStackHook&&(d.stackTrace=ie.Deferred.getStackHook()),e.setTimeout(d))}}var a=0;return ie.Deferred(function(e){n[0][3].add(i(0,e,ie.isFunction(o)?o:s,e.notifyWith)),n[1][3].add(i(0,e,ie.isFunction(t)?t:s)),n[2][3].add(i(0,e,ie.isFunction(r)?r:l))}).promise()},promise:function(e){return null!=e?ie.extend(e,o):o}},i={};return ie.each(n,function(e,t){var a=t[2],s=t[5];o[t[1]]=a.add,s&&a.add(function(){r=s},n[3-e][2].disable,n[0][2].lock),a.add(t[3].fire),i[t[0]]=function(){return i[t[0]+"With"](this===i?void 0:this,arguments),this},i[t[0]+"With"]=a.fireWith}),o.promise(i),t&&t.call(i,i),i},when:function(e){var t=arguments.length,n=t,r=Array(n),o=Q.call(arguments),i=ie.Deferred(),a=function(e){return function(n){r[e]=this,o[e]=1<arguments.length?Q.call(arguments):n,--t||i.resolveWith(r,o)}};if(1>=t&&(u(e,i.done(a(n)).resolve,i.reject,!t),"pending"===i.state()||ie.isFunction(o[n]&&o[n].then)))return i.then();for(;n--;)u(o[n],a(n),i.reject);return i.promise()}});var _e=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;ie.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&_e.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},ie.readyException=function(t){e.setTimeout(function(){throw t})};var we=ie.Deferred();ie.fn.ready=function(e){return we.then(e).catch(function(e){ie.readyException(e)}),this},ie.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--ie.readyWait:ie.isReady)||(ie.isReady=!0,!0!==e&&0<--ie.readyWait||we.resolveWith(K,[ie]))}}),ie.ready.then=we.then,"complete"===K.readyState||"loading"!==K.readyState&&!K.documentElement.doScroll?e.setTimeout(ie.ready):(K.addEventListener("DOMContentLoaded",c),e.addEventListener("load",c));var Ee=function(e,t,n,r,o,i,a){var s=0,l=e.length,u=null==n;if("object"===ie.type(n))for(s in o=!0,n)Ee(e,t,s,n[s],!0,i,a);else if(void 0!==r&&(o=!0,ie.isFunction(r)||(a=!0),u&&(a?(t.call(e,r),t=null):(u=t,t=function(e,t,n){return u.call(ie(e),n)})),t))for(;s<l;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return o?e:u?t.call(e):l?t(e[0],n):i},Oe=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};p.uid=1,p.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Oe(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r;if(e=this.cache(e),"string"==typeof t)e[ie.camelCase(t)]=n;else for(r in t)e[ie.camelCase(r)]=t[r];return e},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][ie.camelCase(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t)for((Array.isArray(t)?t=t.map(ie.camelCase):t=(t=ie.camelCase(t))in r?[t]:t.match(Se)||[],n=t.length);n--;)delete r[t[n]];(void 0===t||ie.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){return void 0!==(e=e[this.expando])&&!ie.isEmptyObject(e)}};var Ce=new p,Pe=new p,xe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Te=/[A-Z]/g;ie.extend({hasData:function(e){return Pe.hasData(e)||Ce.hasData(e)},data:function(e,t,n){return Pe.access(e,t,n)},removeData:function(e,t){Pe.remove(e,t)},_data:function(e,t,n){return Ce.access(e,t,n)},_removeData:function(e,t){Ce.remove(e,t)}}),ie.fn.extend({data:function(e,t){var n,r=this[0],o=r&&r.attributes;if(void 0===e){if(this.length){var i=Pe.get(r);if(1===r.nodeType&&!Ce.get(r,"hasDataAttrs")){for(n=o.length;n--;)if(o[n]){var a=o[n].name;0===a.indexOf("data-")&&(a=ie.camelCase(a.slice(5)),d(r,a,i[a]))}Ce.set(r,"hasDataAttrs",!0)}}return i}return"object"==typeof e?this.each(function(){Pe.set(this,e)}):Ee(this,function(t){if(r&&void 0===t){var n=Pe.get(r,e);if(void 0!==n)return n;if(void 0!==(n=d(r,e)))return n}else this.each(function(){Pe.set(this,e,t)})},null,t,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){Pe.remove(this,e)})}}),ie.extend({queue:function(e,t,n){if(e){t=(t||"fx")+"queue";var r=Ce.get(e,t);return n&&(!r||Array.isArray(n)?r=Ce.access(e,t,ie.makeArray(n)):r.push(n)),r||[]}},dequeue:function(e,t){t=t||"fx";var n=ie.queue(e,t),r=n.length,o=n.shift(),i=ie._queueHooks(e,t);"inprogress"===o&&(o=n.shift(),r--),o&&("fx"===t&&n.unshift("inprogress"),delete i.stop,o.call(e,function(){ie.dequeue(e,t)},i)),!r&&i&&i.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Ce.get(e,n)||Ce.access(e,n,{empty:ie.Callbacks("once memory").add(function(){Ce.remove(e,[t+"queue",n])})})}}),ie.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?ie.queue(this[0],e):void 0===t?this:this.each(function(){var n=ie.queue(this,e,t);ie._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&ie.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ie.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,o=ie.Deferred(),i=this,a=this.length,s=function(){--r||o.resolveWith(i,[i])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=Ce.get(i[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),o.promise(t)}});var ke=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ae=new RegExp("^(?:([+-])=|)("+ke+")([a-z%]*)$","i"),Ie=["Top","Right","Bottom","Left"],De=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ie.contains(e.ownerDocument,e)&&"none"===ie.css(e,"display")},Me=function(e,t,n,r){var o,i={};for(o in t)i[o]=e.style[o],e.style[o]=t[o];for(o in n=n.apply(e,r||[]),t)e.style[o]=i[o];return n},je={};ie.fn.extend({show:function(){return h(this,!0)},hide:function(){return h(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){De(this)?ie(this).show():ie(this).hide()})}});var Ne=/^(?:checkbox|radio)$/i,Re=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Le=/^$|\/(?:java|ecma)script/i,Ge={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ge.optgroup=Ge.option,Ge.tbody=Ge.tfoot=Ge.colgroup=Ge.caption=Ge.thead,Ge.th=Ge.td;var Fe,Be,Ve=/<|&#?\w+;/;Fe=K.createDocumentFragment().appendChild(K.createElement("div")),(Be=K.createElement("input")).setAttribute("type","radio"),Be.setAttribute("checked","checked"),Be.setAttribute("name","t"),Fe.appendChild(Be),oe.checkClone=Fe.cloneNode(!0).cloneNode(!0).lastChild.checked,Fe.innerHTML="<textarea>x</textarea>",oe.noCloneChecked=!!Fe.cloneNode(!0).lastChild.defaultValue;var ze=K.documentElement,qe=/^key/,Ue=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,He=/^([^.]*)(?:\.(.+)|)/;ie.event={global:{},add:function(e,t,n,r,o){var i,a,s,l,u;if(s=Ce.get(e)){if(n.handler){var c=n;n=c.handler,o=c.selector}for(o&&ie.find.matchesSelector(ze,o),n.guid||(n.guid=ie.guid++),(a=s.events)||(a=s.events={}),(i=s.handle)||(i=s.handle=function(t){return void 0!==ie&&ie.event.triggered!==t.type?ie.event.dispatch.apply(e,arguments):void 0}),s=(t=(t||"").match(Se)||[""]).length;s--;){var p=He.exec(t[s])||[],d=l=p[1],f=(p[2]||"").split(".").sort();d&&(p=ie.event.special[d]||{},d=(o?p.delegateType:p.bindType)||d,p=ie.event.special[d]||{},l=ie.extend({type:d,origType:l,data:r,handler:n,guid:n.guid,selector:o,needsContext:o&&ie.expr.match.needsContext.test(o),namespace:f.join(".")},c),(u=a[d])||((u=a[d]=[]).delegateCount=0,p.setup&&!1!==p.setup.call(e,r,f,i)||e.addEventListener&&e.addEventListener(d,i)),p.add&&(p.add.call(e,l),l.handler.guid||(l.handler.guid=n.guid)),o?u.splice(u.delegateCount++,0,l):u.push(l),ie.event.global[d]=!0)}}},remove:function(e,t,n,r,o){var i,a,s,l,u,c=Ce.hasData(e)&&Ce.get(e);if(c&&(s=c.events)){for(l=(t=(t||"").match(Se)||[""]).length;l--;){var p=He.exec(t[l])||[],d=u=p[1],f=(p[2]||"").split(".").sort();if(d){var h=ie.event.special[d]||{},m=s[d=(r?h.delegateType:h.bindType)||d]||[];for(p=p[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=i=m.length;i--;){var y=m[i];!o&&u!==y.origType||n&&n.guid!==y.guid||p&&!p.test(y.namespace)||r&&r!==y.selector&&("**"!==r||!y.selector)||(m.splice(i,1),y.selector&&m.delegateCount--,h.remove&&h.remove.call(e,y))}a&&!m.length&&(h.teardown&&!1!==h.teardown.call(e,f,c.handle)||ie.removeEvent(e,d,c.handle),delete s[d])}else for(d in s)ie.event.remove(e,d+t[l],n,r,!0)}ie.isEmptyObject(s)&&Ce.remove(e,"handle events")}},dispatch:function(e){var t,n,r,o=ie.event.fix(e),i=Array(arguments.length),a=(Ce.get(this,"events")||{})[o.type]||[],s=ie.event.special[o.type]||{};for(i[0]=o,t=1;t<arguments.length;t++)i[t]=arguments[t];if(o.delegateTarget=this,!s.preDispatch||!1!==s.preDispatch.call(this,o)){var l=ie.event.handlers.call(this,o,a);for(t=0;(r=l[t++])&&!o.isPropagationStopped();)for(o.currentTarget=r.elem,a=0;(n=r.handlers[a++])&&!o.isImmediatePropagationStopped();)o.rnamespace&&!o.rnamespace.test(n.namespace)||(o.handleObj=n,o.data=n.data,void 0!==(n=((ie.event.special[n.origType]||{}).handle||n.handler).apply(r.elem,i))&&!1===(o.result=n)&&(o.preventDefault(),o.stopPropagation()));return s.postDispatch&&s.postDispatch.call(this,o),o.result}},handlers:function(e,t){var n,r=[],o=t.delegateCount,i=e.target;if(o&&i.nodeType&&!("click"===e.type&&1<=e.button))for(;i!==this;i=i.parentNode||this)if(1===i.nodeType&&("click"!==e.type||!0!==i.disabled)){var a=[],s={};for(n=0;n<o;n++){var l=t[n],u=l.selector+" ";void 0===s[u]&&(s[u]=l.needsContext?-1<ie(u,this).index(i):ie.find(u,this,null,[i]).length),s[u]&&a.push(l)}a.length&&r.push({elem:i,handlers:a})}return o<t.length&&r.push({elem:this,handlers:t.slice(o)}),r},addProp:function(e,t){Object.defineProperty(ie.Event.prototype,e,{enumerable:!0,configurable:!0,get:ie.isFunction(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[ie.expando]?e:new ie.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==S()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===S()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&o(this,"input"))return this.click(),!1},_default:function(e){return o(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},ie.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},ie.Event=function(e,t){if(!(this instanceof ie.Event))return new ie.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?v:b,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&ie.extend(this,t),this.timeStamp=e&&e.timeStamp||ie.now(),this[ie.expando]=!0},ie.Event.prototype={constructor:ie.Event,isDefaultPrevented:b,isPropagationStopped:b,isImmediatePropagationStopped:b,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=v,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=v,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=v,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},ie.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&qe.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Ue.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},ie.event.addProp),ie.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){ie.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n=e.relatedTarget,r=e.handleObj;if(!n||n!==this&&!ie.contains(this,n)){e.type=r.origType;var o=r.handler.apply(this,arguments);e.type=t}return o}}}),ie.fn.extend({on:function(e,t,n,r){return _(this,e,t,n,r)},one:function(e,t,n,r){return _(this,e,t,n,r,1)},off:function(e,t,n){if(e&&e.preventDefault&&e.handleObj){var r=e.handleObj;return ie(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this}if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=b),this.each(function(){ie.event.remove(this,e,n,t)})}});var We=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Ke=/<script|<style|<link/i,$e=/checked\s*(?:[^=]|=\s*.checked.)/i,Qe=/^true\/(.*)/,Ye=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;ie.extend({htmlPrefilter:function(e){return e.replace(We,"<$1></$2>")},clone:function(e,t,n){var r,o=e.cloneNode(!0),i=ie.contains(e.ownerDocument,e);if(!(oe.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ie.isXMLDoc(e))){var a=m(o),s=m(e),l=0;for(r=s.length;l<r;l++){var u=s[l],c=a[l],p=c.nodeName.toLowerCase();"input"===p&&Ne.test(u.type)?c.checked=u.checked:"input"!==p&&"textarea"!==p||(c.defaultValue=u.defaultValue)}}if(t)if(n)for(s=s||m(e),a=a||m(o),l=0,r=s.length;l<r;l++)C(s[l],a[l]);else C(e,o);return 0<(a=m(o,"script")).length&&y(a,!i&&m(e,"script")),o},cleanData:function(e){for(var t,n,r,o=ie.event.special,i=0;void 0!==(n=e[i]);i++)if(Oe(n)){if(t=n[Ce.expando]){if(t.events)for(r in t.events)o[r]?ie.event.remove(n,r):ie.removeEvent(n,r,t.handle);n[Ce.expando]=void 0}n[Pe.expando]&&(n[Pe.expando]=void 0)}}}),ie.fn.extend({detach:function(e){return x(this,e,!0)},remove:function(e){return x(this,e)},text:function(e){return Ee(this,function(e){return void 0===e?ie.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return P(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||w(this,e).appendChild(e)})},prepend:function(){return P(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=w(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return P(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return P(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(ie.cleanData(m(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ie.clone(this,e,t)})},html:function(e){return Ee(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ke.test(e)&&!Ge[(Re.exec(e)||["",""])[1].toLowerCase()]){e=ie.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(ie.cleanData(m(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return P(this,arguments,function(t){var n=this.parentNode;0>ie.inArray(this,e)&&(ie.cleanData(m(this)),n&&n.replaceChild(t,this))},e)}}),ie.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ie.fn[e]=function(e){for(var n=[],r=ie(e),o=r.length-1,i=0;i<=o;i++)e=i===o?this:this.clone(!0),ie(r[i])[t](e),X.apply(n,e.get());return this.pushStack(n)}});var Xe=/^margin/,Ze=new RegExp("^("+ke+")(?!px)[a-z%]+$","i"),Je=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)};!function(){function t(){if(s){s.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",s.innerHTML="",ze.appendChild(a);var t=e.getComputedStyle(s);n="1%"!==t.top,i="2px"===t.marginLeft,r="4px"===t.width,s.style.marginRight="50%",o="4px"===t.marginRight,ze.removeChild(a),s=null}}var n,r,o,i,a=K.createElement("div"),s=K.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",oe.clearCloneStyle="content-box"===s.style.backgroundClip,a.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",a.appendChild(s),ie.extend(oe,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return t(),r},pixelMarginRight:function(){return t(),o},reliableMarginLeft:function(){return t(),i}}))}();var et=/^(none|table(?!-c[ea]).+)/,tt=/^--/,nt={position:"absolute",visibility:"hidden",display:"block"},rt={letterSpacing:"0",fontWeight:"400"},ot=["Webkit","Moz","ms"],it=K.createElement("div").style;ie.extend({cssHooks:{opacity:{get:function(e,t){if(t)return""===(e=T(e,"opacity"))?"1":e}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,i=ie.camelCase(t),a=tt.test(t),s=e.style;a||(t=A(i));var l=ie.cssHooks[t]||ie.cssHooks[i];if(void 0===n)return l&&"get"in l&&void 0!==(o=l.get(e,!1,r))?o:s[t];var u=typeof n;"string"===u&&(o=Ae.exec(n))&&o[1]&&(n=f(e,t,o),u="number"),null!=n&&n==n&&("number"===u&&(n+=o&&o[3]||(ie.cssNumber[i]?"":"px")),oe.clearCloneStyle||""!==n||0!==t.indexOf("background")||(s[t]="inherit"),l&&"set"in l&&void 0===(n=l.set(e,n,r))||(a?s.setProperty(t,n):s[t]=n))}},css:function(e,t,n,r){var o,i=ie.camelCase(t);return tt.test(t)||(t=A(i)),(i=ie.cssHooks[t]||ie.cssHooks[i])&&"get"in i&&(o=i.get(e,!0,n)),void 0===o&&(o=T(e,t,r)),"normal"===o&&t in rt&&(o=rt[t]),""===n||n?(e=parseFloat(o),!0===n||isFinite(e)?e||0:o):o}}),ie.each(["height","width"],function(e,t){ie.cssHooks[t]={get:function(e,n,r){if(n)return!et.test(ie.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?M(e,t,r):Me(e,nt,function(){return M(e,t,r)})},set:function(e,n,r){var o,i=r&&Je(e);return(r=r&&D(e,t,r,"border-box"===ie.css(e,"boxSizing",!1,i),i))&&(o=Ae.exec(n))&&"px"!==(o[3]||"px")&&(e.style[t]=n,n=ie.css(e,t)),I(e,n,r)}}}),ie.cssHooks.marginLeft=k(oe.reliableMarginLeft,function(e,t){if(t)return(parseFloat(T(e,"marginLeft"))||e.getBoundingClientRect().left-Me(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),ie.each({margin:"",padding:"",border:"Width"},function(e,t){ie.cssHooks[e+t]={expand:function(n){var r=0,o={};for(n="string"==typeof n?n.split(" "):[n];4>r;r++)o[e+Ie[r]+t]=n[r]||n[r-2]||n[0];return o}},Xe.test(e)||(ie.cssHooks[e+t].set=I)}),ie.fn.extend({css:function(e,t){return Ee(this,function(e,t,n){var r,o={},i=0;if(Array.isArray(t)){for(n=Je(e),r=t.length;i<r;i++)o[t[i]]=ie.css(e,t[i],!1,n);return o}return void 0!==n?ie.style(e,t,n):ie.css(e,t)},e,t,1<arguments.length)}}),ie.Tween=j,j.prototype={constructor:j,init:function(e,t,n,r,o,i){this.elem=e,this.prop=n,this.easing=o||ie.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=i||(ie.cssNumber[n]?"":"px")},cur:function(){var e=j.propHooks[this.prop];return e&&e.get?e.get(this):j.propHooks._default.get(this)},run:function(e){var t,n=j.propHooks[this.prop];return this.pos=t=this.options.duration?ie.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):j.propHooks._default.set(this),this}},j.prototype.init.prototype=j.prototype,j.propHooks={_default:{get:function(e){return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(e=ie.css(e.elem,e.prop,""))&&"auto"!==e?e:0},set:function(e){ie.fx.step[e.prop]?ie.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[ie.cssProps[e.prop]]&&!ie.cssHooks[e.prop]?e.elem[e.prop]=e.now:ie.style(e.elem,e.prop,e.now+e.unit)}}},j.propHooks.scrollTop=j.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ie.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},ie.fx=j.prototype.init,ie.fx.step={};var at,st,lt=/^(?:toggle|show|hide)$/,ut=/queueHooks$/;ie.Animation=ie.extend(F,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return f(n.elem,e,Ae.exec(t),n),n}]},tweener:function(e,t){ie.isFunction(e)?(t=e,e=["*"]):e=e.match(Se);for(var n,r=0,o=e.length;r<o;r++)n=e[r],F.tweeners[n]=F.tweeners[n]||[],F.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,o="width"in t||"height"in t,i=this,a={},s=e.style,l=e.nodeType&&De(e),u=Ce.get(e,"fxshow");if(!n.queue){var c=ie._queueHooks(e,"fx");if(null==c.unqueued){c.unqueued=0;var p=c.empty.fire;c.empty.fire=function(){c.unqueued||p()}}c.unqueued++,i.always(function(){i.always(function(){c.unqueued--,ie.queue(e,"fx").length||c.empty.fire()})})}for(r in t){var d=t[r];if(lt.test(d)){delete t[r];var f=f||"toggle"===d;if(d===(l?"hide":"show")){if("show"!==d||!u||void 0===u[r])continue;l=!0}a[r]=u&&u[r]||ie.style(e,r)}}if((t=!ie.isEmptyObject(t))||!ie.isEmptyObject(a)){if(o&&1===e.nodeType){n.overflow=[s.overflow,s.overflowX,s.overflowY];var m=u&&u.display;null==m&&(m=Ce.get(e,"display")),"none"===(o=ie.css(e,"display"))&&(m?o=m:(h([e],!0),m=e.style.display||m,o=ie.css(e,"display"),h([e]))),("inline"===o||"inline-block"===o&&null!=m)&&"none"===ie.css(e,"float")&&(t||(i.done(function(){s.display=m}),null==m&&(o=s.display,m="none"===o?"":o)),s.display="inline-block")}for(r in n.overflow&&(s.overflow="hidden",i.always(function(){s.overflow=n.overflow[0],s.overflowX=n.overflow[1],s.overflowY=n.overflow[2]})),t=!1,a)t||(u?"hidden"in u&&(l=u.hidden):u=Ce.access(e,"fxshow",{display:m}),f&&(u.hidden=!l),l&&h([e],!0),i.done(function(){for(r in l||h([e]),Ce.remove(e,"fxshow"),a)ie.style(e,r,a[r])})),t=G(l?u[r]:0,r,i),r in u||(u[r]=t.start,l&&(t.end=t.start,t.start=0))}}],prefilter:function(e,t){t?F.prefilters.unshift(e):F.prefilters.push(e)}}),ie.speed=function(e,t,n){var r=e&&"object"==typeof e?ie.extend({},e):{complete:n||!n&&t||ie.isFunction(e)&&e,duration:e,easing:n&&t||t&&!ie.isFunction(t)&&t};return ie.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration=r.duration in ie.fx.speeds?ie.fx.speeds[r.duration]:ie.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){ie.isFunction(r.old)&&r.old.call(this),r.queue&&ie.dequeue(this,r.queue)},r},ie.fn.extend({fadeTo:function(e,t,n,r){return this.filter(De).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var o=ie.isEmptyObject(e),i=ie.speed(t,n,r);return(t=function(){var t=F(this,ie.extend({},e),i);(o||Ce.get(this,"finish"))&&t.stop(!0)}).finish=t,o||!1===i.queue?this.each(t):this.queue(i.queue,t)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,o=null!=e&&e+"queueHooks",i=ie.timers,a=Ce.get(this);if(o)a[o]&&a[o].stop&&r(a[o]);else for(o in a)a[o]&&a[o].stop&&ut.test(o)&&r(a[o]);for(o=i.length;o--;)i[o].elem!==this||null!=e&&i[o].queue!==e||(i[o].anim.stop(n),t=!1,i.splice(o,1));!t&&n||ie.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t=Ce.get(this),n=t[e+"queue"],r=t[e+"queueHooks"],o=ie.timers,i=n?n.length:0;for(t.finish=!0,ie.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),r=o.length;r--;)o[r].elem===this&&o[r].queue===e&&(o[r].anim.stop(!0),o.splice(r,1));for(r=0;r<i;r++)n[r]&&n[r].finish&&n[r].finish.call(this);delete t.finish})}}),ie.each(["toggle","show","hide"],function(e,t){var n=ie.fn[t];ie.fn[t]=function(e,r,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(L(t,!0),e,r,o)}}),ie.each({slideDown:L("show"),slideUp:L("hide"),slideToggle:L("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ie.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),ie.timers=[],ie.fx.tick=function(){var e=0,t=ie.timers;for(at=ie.now();e<t.length;e++){var n=t[e];n()||t[e]!==n||t.splice(e--,1)}t.length||ie.fx.stop(),at=void 0},ie.fx.timer=function(e){ie.timers.push(e),ie.fx.start()},ie.fx.interval=13,ie.fx.start=function(){st||(st=!0,N())},ie.fx.stop=function(){st=null},ie.fx.speeds={slow:600,fast:200,_default:400},ie.fn.delay=function(t,n){return t=ie.fx&&ie.fx.speeds[t]||t,this.queue(n||"fx",function(n,r){var o=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(o)}})},function(){var e=K.createElement("input"),t=K.createElement("select").appendChild(K.createElement("option"));e.type="checkbox",oe.checkOn=""!==e.value,oe.optSelected=t.selected,(e=K.createElement("input")).value="t",e.type="radio",oe.radioValue="t"===e.value}();var ct=ie.expr.attrHandle;ie.fn.extend({attr:function(e,t){return Ee(this,ie.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){ie.removeAttr(this,e)})}}),ie.extend({attr:function(e,t,n){var r,o,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return void 0===e.getAttribute?ie.prop(e,t,n):(1===i&&ie.isXMLDoc(e)||(o=ie.attrHooks[t.toLowerCase()]||(ie.expr.match.bool.test(t)?pt:void 0)),void 0!==n?null===n?void ie.removeAttr(e,t):o&&"set"in o&&void 0!==(r=o.set(e,n,t))?r:(e.setAttribute(t,n+""),n):o&&"get"in o&&null!==(r=o.get(e,t))?r:null==(r=ie.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!oe.radioValue&&"radio"===t&&o(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n=0,r=t&&t.match(Se);if(r&&1===e.nodeType)for(;t=r[n++];)e.removeAttribute(t)}});var pt={set:function(e,t,n){return!1===t?ie.removeAttr(e,n):e.setAttribute(n,n),n}};ie.each(ie.expr.match.bool.source.match(/\w+/g),function(e,t){var n=ct[t]||ie.find.attr;ct[t]=function(e,t,r){var o=t.toLowerCase();if(!r){var i=ct[o];ct[o]=a;var a=null!=n(e,t,r)?o:null;ct[o]=i}return a}});var dt=/^(?:input|select|textarea|button)$/i,ft=/^(?:a|area)$/i;ie.fn.extend({prop:function(e,t){return Ee(this,ie.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[ie.propFix[e]||e]})}}),ie.extend({prop:function(e,t,n){var r,o=e.nodeType;if(3!==o&&8!==o&&2!==o){if(1!==o||!ie.isXMLDoc(e)){t=ie.propFix[t]||t;var i=ie.propHooks[t]}return void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]}},propHooks:{tabIndex:{get:function(e){var t=ie.find.attr(e,"tabindex");return t?parseInt(t,10):dt.test(e.nodeName)||ft.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),oe.optSelected||(ie.propHooks.selected={get:function(e){return(e=e.parentNode)&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(e){(e=e.parentNode)&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),ie.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){ie.propFix[this.toLowerCase()]=this}),ie.fn.extend({addClass:function(e){var t,n,r,o,i,a=0;if(ie.isFunction(e))return this.each(function(t){ie(this).addClass(e.call(this,t,V(this)))});if("string"==typeof e&&e)for(t=e.match(Se)||[];n=this[a++];){var s=V(n);if(r=1===n.nodeType&&" "+B(s)+" "){for(i=0;o=t[i++];)0>r.indexOf(" "+o+" ")&&(r+=o+" ");s!==(r=B(r))&&n.setAttribute("class",r)}}return this},removeClass:function(e){var t,n,r,o,i,a=0;if(ie.isFunction(e))return this.each(function(t){ie(this).removeClass(e.call(this,t,V(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(Se)||[];n=this[a++];){var s=V(n);if(r=1===n.nodeType&&" "+B(s)+" "){for(i=0;o=t[i++];)for(;-1<r.indexOf(" "+o+" ");)r=r.replace(" "+o+" "," ");s!==(r=B(r))&&n.setAttribute("class",r)}}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):ie.isFunction(e)?this.each(function(n){ie(this).toggleClass(e.call(this,n,V(this),t),t)}):this.each(function(){var t,r;if("string"===n){var o=0,i=ie(this);for(r=e.match(Se)||[];t=r[o++];)i.hasClass(t)?i.removeClass(t):i.addClass(t)}else void 0!==e&&"boolean"!==n||((t=V(this))&&Ce.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Ce.get(this,"__className__")||""))})},hasClass:function(e){var t,n=0;for(e=" "+e+" ";t=this[n++];)if(1===t.nodeType&&-1<(" "+B(V(t))+" ").indexOf(e))return!0;return!1}});var ht=/\r/g;ie.fn.extend({val:function(e){var t,n,r=this[0];if(arguments.length){var o=ie.isFunction(e);return this.each(function(n){1===this.nodeType&&(null==(n=o?e.call(this,n,ie(this).val()):e)?n="":"number"==typeof n?n+="":Array.isArray(n)&&(n=ie.map(n,function(e){return null==e?"":e+""})),(t=ie.valHooks[this.type]||ie.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,n,"value")||(this.value=n))})}if(r)return(t=ie.valHooks[r.type]||ie.valHooks[r.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(ht,""):null==n?"":n}}),ie.extend({valHooks:{option:{get:function(e){var t=ie.find.attr(e,"value");return null!=t?t:B(ie.text(e))}},select:{get:function(e){var t=e.options,n=e.selectedIndex,r="select-one"===e.type,i=r?null:[],a=r?n+1:t.length;for(e=0>n?a:r?n:0;e<a;e++){var s=t[e];if(!(!s.selected&&e!==n||s.disabled||s.parentNode.disabled&&o(s.parentNode,"optgroup"))){if(s=ie(s).val(),r)return s;i.push(s)}}return i},set:function(e,t){for(var n,r=e.options,o=ie.makeArray(t),i=r.length;i--;)((t=r[i]).selected=-1<ie.inArray(ie.valHooks.option.get(t),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),ie.each(["radio","checkbox"],function(){ie.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<ie.inArray(ie(e).val(),t)}},oe.checkOn||(ie.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var mt=/^(?:focusinfocus|focusoutblur)$/;ie.extend(ie.event,{trigger:function(t,n,r,o){var i,a,s=[r||K],l=te.call(t,"type")?t.type:t,u=te.call(t,"namespace")?t.namespace.split("."):[],c=i=r=r||K;if(3!==r.nodeType&&8!==r.nodeType&&!mt.test(l+ie.event.triggered)){-1<l.indexOf(".")&&(u=l.split("."),l=u.shift(),u.sort());var p=0>l.indexOf(":")&&"on"+l;if((t=t[ie.expando]?t:new ie.Event(l,"object"==typeof t&&t)).isTrigger=o?2:3,t.namespace=u.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+u.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:ie.makeArray(n,[t]),u=ie.event.special[l]||{},o||!u.trigger||!1!==u.trigger.apply(r,n)){if(!o&&!u.noBubble&&!ie.isWindow(r)){var d=u.delegateType||l;for(mt.test(d+l)||(c=c.parentNode);c;c=c.parentNode)s.push(c),i=c;i===(r.ownerDocument||K)&&s.push(i.defaultView||i.parentWindow||e)}for(i=0;(c=s[i++])&&!t.isPropagationStopped();)t.type=1<i?d:u.bindType||l,(a=(Ce.get(c,"events")||{})[t.type]&&Ce.get(c,"handle"))&&a.apply(c,n),(a=p&&c[p])&&a.apply&&Oe(c)&&(t.result=a.apply(c,n),!1===t.result&&t.preventDefault());return t.type=l,o||t.isDefaultPrevented()||u._default&&!1!==u._default.apply(s.pop(),n)||!Oe(r)||!p||!ie.isFunction(r[l])||ie.isWindow(r)||((i=r[p])&&(r[p]=null),ie.event.triggered=l,r[l](),ie.event.triggered=void 0,i&&(r[p]=i)),t.result}}},simulate:function(e,t,n){e=ie.extend(new ie.Event,n,{type:e,isSimulated:!0}),ie.event.trigger(e,null,t)}}),ie.fn.extend({trigger:function(e,t){return this.each(function(){ie.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return ie.event.trigger(e,t,n,!0)}}),ie.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){ie.fn[t]=function(e,n){return 0<arguments.length?this.on(t,null,e,n):this.trigger(t)}}),ie.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),oe.focusin="onfocusin"in e,oe.focusin||ie.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){ie.event.simulate(t,e.target,ie.event.fix(e))};ie.event.special[t]={setup:function(){var r=this.ownerDocument||this,o=Ce.access(r,t);o||r.addEventListener(e,n,!0),Ce.access(r,t,(o||0)+1)},teardown:function(){var r=this.ownerDocument||this,o=Ce.access(r,t)-1;o?Ce.access(r,t,o):(r.removeEventListener(e,n,!0),Ce.remove(r,t))}}});var yt=e.location,gt=ie.now(),vt=/\?/;ie.parseXML=function(t){if(!t||"string"!=typeof t)return null;try{var n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||ie.error("Invalid XML: "+t),n};var bt=/\[\]$/,St=/\r?\n/g,_t=/^(?:submit|button|image|reset|file)$/i,wt=/^(?:input|select|textarea|keygen)/i;ie.param=function(e,t){var n,r=[],o=function(e,t){t=ie.isFunction(t)?t():t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==t?"":t)};if(Array.isArray(e)||e.jquery&&!ie.isPlainObject(e))ie.each(e,function(){o(this.name,this.value)});else for(n in e)z(n,e[n],t,o);return r.join("&")},ie.fn.extend({serialize:function(){return ie.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ie.prop(this,"elements");return e?ie.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ie(this).is(":disabled")&&wt.test(this.nodeName)&&!_t.test(e)&&(this.checked||!Ne.test(e))}).map(function(e,t){return null==(e=ie(this).val())?null:Array.isArray(e)?ie.map(e,function(e){return{name:t.name,value:e.replace(St,"\r\n")}}):{name:t.name,value:e.replace(St,"\r\n")}}).get()}});var Et=/%20/g,Ot=/#.*$/,Ct=/([?&])_=[^&]*/,Pt=/^(.*?):[ \t]*([^\r\n]*)$/gm,xt=/^(?:GET|HEAD)$/,Tt=/^\/\//,kt={},At={},It="*/".concat("*"),Dt=K.createElement("a");Dt.href=yt.href,ie.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:yt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(yt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":It,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":ie.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?H(H(e,ie.ajaxSettings),t):H(ie.ajaxSettings,e)},ajaxPrefilter:q(kt),ajaxTransport:q(At),ajax:function(t,n){function r(t,n,r,a){var u=n;if(!_){if(_=!0,s&&e.clearTimeout(s),o=void 0,i=a||"",b.readyState=0<t?4:0,a=200<=t&&300>t||304===t,r){for(var y,g,v,w,E=c,O=b,C=E.contents,P=E.dataTypes;"*"===P[0];)P.shift(),void 0===y&&(y=E.mimeType||O.getResponseHeader("Content-Type"));if(y)for(g in C)if(C[g]&&C[g].test(y)){P.unshift(g);break}if(P[0]in r)v=P[0];else{for(g in r){if(!P[0]||E.converters[g+" "+P[0]]){v=g;break}w||(w=g)}v=v||w}v?(v!==P[0]&&P.unshift(v),E=r[v]):E=void 0}e:{var x;if(y=E,g=b,v=a,O={},(C=(r=c).dataTypes.slice())[1])for(k in r.converters)O[k.toLowerCase()]=r.converters[k];for(w=C.shift();w;){r.responseFields[w]&&(g[r.responseFields[w]]=y),!T&&v&&r.dataFilter&&(y=r.dataFilter(y,r.dataType));var T=w;if(w=C.shift())if("*"===w)w=T;else if("*"!==T&&T!==w){var k=O[T+" "+w]||O["* "+w];if(!k)for(x in O)if((E=x.split(" "))[1]===w&&(k=O[T+" "+E[0]]||O["* "+E[0]])){!0===k?k=O[x]:!0!==O[x]&&(w=E[0],C.unshift(E[1]));break}if(!0!==k)if(k&&r.throws)y=k(y);else try{y=k(y)}catch(e){E={state:"parsererror",error:k?e:"No conversion from "+T+" to "+w};break e}}}E={state:"success",data:y}}if(a)if(c.ifModified&&((u=b.getResponseHeader("Last-Modified"))&&(ie.lastModified[S]=u),(u=b.getResponseHeader("etag"))&&(ie.etag[S]=u)),204===t||"HEAD"===c.type)u="nocontent";else if(304===t)u="notmodified";else{u=E.state;var A=E.data,I=E.error;a=!I}else I=u,(t||!u)&&(u="error",0>t&&(t=0));b.status=t,b.statusText=(n||u)+"",a?f.resolveWith(p,[A,u,b]):f.rejectWith(p,[b,u,I]),b.statusCode(m),m=void 0,l&&d.trigger(a?"ajaxSuccess":"ajaxError",[b,c,a?A:I]),h.fireWith(p,[b,u]),l&&(d.trigger("ajaxComplete",[b,c]),--ie.active||ie.event.trigger("ajaxStop"))}}"object"==typeof t&&(n=t,t=void 0),n=n||{};var o,i,a,s,l,u,c=ie.ajaxSetup({},n),p=c.context||c,d=c.context&&(p.nodeType||p.jquery)?ie(p):ie.event,f=ie.Deferred(),h=ie.Callbacks("once memory"),m=c.statusCode||{},y={},g={},v="canceled",b={readyState:0,getResponseHeader:function(e){var t;if(_){if(!a)for(a={};t=Pt.exec(i);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return _?i:null},setRequestHeader:function(e,t){return null==_&&(e=g[e.toLowerCase()]=g[e.toLowerCase()]||e,y[e]=t),this},overrideMimeType:function(e){return null==_&&(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(_)b.always(e[b.status]);else for(t in e)m[t]=[m[t],e[t]];return this},abort:function(e){return e=e||v,o&&o.abort(e),r(0,e),this}};if(f.promise(b),c.url=((t||c.url||yt.href)+"").replace(Tt,yt.protocol+"//"),c.type=n.method||n.type||c.method||c.type,c.dataTypes=(c.dataType||"*").toLowerCase().match(Se)||[""],null==c.crossDomain){t=K.createElement("a");try{t.href=c.url,t.href=t.href,c.crossDomain=Dt.protocol+"//"+Dt.host!=t.protocol+"//"+t.host}catch(e){c.crossDomain=!0}}if(c.data&&c.processData&&"string"!=typeof c.data&&(c.data=ie.param(c.data,c.traditional)),U(kt,c,n,b),_)return b;(l=ie.event&&c.global)&&0==ie.active++&&ie.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!xt.test(c.type);var S=c.url.replace(Ot,"");for(u in c.hasContent?c.data&&c.processData&&0===(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&(c.data=c.data.replace(Et,"+")):(t=c.url.slice(S.length),c.data&&(S+=(vt.test(S)?"&":"?")+c.data,delete c.data),!1===c.cache&&(S=S.replace(Ct,"$1"),t=(vt.test(S)?"&":"?")+"_="+gt+++t),c.url=S+t),c.ifModified&&(ie.lastModified[S]&&b.setRequestHeader("If-Modified-Since",ie.lastModified[S]),ie.etag[S]&&b.setRequestHeader("If-None-Match",ie.etag[S])),(c.data&&c.hasContent&&!1!==c.contentType||n.contentType)&&b.setRequestHeader("Content-Type",c.contentType),b.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+It+"; q=0.01":""):c.accepts["*"]),c.headers)b.setRequestHeader(u,c.headers[u]);if(c.beforeSend&&(!1===c.beforeSend.call(p,b,c)||_))return b.abort();if(v="abort",h.add(c.complete),b.done(c.success),b.fail(c.error),o=U(At,c,n,b)){if(b.readyState=1,l&&d.trigger("ajaxSend",[b,c]),_)return b;c.async&&0<c.timeout&&(s=e.setTimeout(function(){b.abort("timeout")},c.timeout));try{var _=!1;o.send(y,r)}catch(e){if(_)throw e;r(-1,e)}}else r(-1,"No Transport");return b},getJSON:function(e,t,n){return ie.get(e,t,n,"json")},getScript:function(e,t){return ie.get(e,void 0,t,"script")}}),ie.each(["get","post"],function(e,t){ie[t]=function(e,n,r,o){return ie.isFunction(n)&&(o=o||r,r=n,n=void 0),ie.ajax(ie.extend({url:e,type:t,dataType:o,data:n,success:r},ie.isPlainObject(e)&&e))}}),ie._evalUrl=function(e){return ie.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},ie.fn.extend({wrapAll:function(e){return this[0]&&(ie.isFunction(e)&&(e=e.call(this[0])),e=ie(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return ie.isFunction(e)?this.each(function(t){ie(this).wrapInner(e.call(this,t))}):this.each(function(){var t=ie(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=ie.isFunction(e);return this.each(function(n){ie(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){ie(this).replaceWith(this.childNodes)}),this}}),ie.expr.pseudos.hidden=function(e){return!ie.expr.pseudos.visible(e)},ie.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},ie.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Mt={0:200,1223:204},jt=ie.ajaxSettings.xhr();oe.cors=!!jt&&"withCredentials"in jt,oe.ajax=jt=!!jt,ie.ajaxTransport(function(t){var n,r;if(oe.cors||jt&&!t.crossDomain)return{send:function(o,i){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];for(a in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest"),o)s.setRequestHeader(a,o[a]);n=function(e){return function(){n&&(n=r=s.onload=s.onerror=s.onabort=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?i(0,"error"):i(s.status,s.statusText):i(Mt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),r=s.onerror=n("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&r()})},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}}),ie.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),ie.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return ie.globalEval(e),e}}}),ie.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),ie.ajaxTransport("script",function(e){var t,n;if(e.crossDomain)return{send:function(r,o){t=ie("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&o("error"===e.type?404:200,e.type)}),K.head.appendChild(t[0])},abort:function(){n&&n()}}});var Nt=[],Rt=/(=)\?(?=&|$)|\?\?/;ie.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Nt.pop()||ie.expando+"_"+gt++;return this[e]=!0,e}}),ie.ajaxPrefilter("json jsonp",function(t,n,r){var o,i=!1!==t.jsonp&&(Rt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Rt.test(t.data)&&"data");if(i||"jsonp"===t.dataTypes[0]){var a=t.jsonpCallback=ie.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback;i?t[i]=t[i].replace(Rt,"$1"+a):!1!==t.jsonp&&(t.url+=(vt.test(t.url)?"&":"?")+t.jsonp+"="+a),t.converters["script json"]=function(){return o||ie.error(a+" was not called"),o[0]},t.dataTypes[0]="json";var s=e[a];return e[a]=function(){o=arguments},r.always(function(){void 0===s?ie(e).removeProp(a):e[a]=s,t[a]&&(t.jsonpCallback=n.jsonpCallback,Nt.push(a)),o&&ie.isFunction(s)&&s(o[0]),o=s=void 0}),"script"}}),oe.createHTMLDocument=function(){var e=K.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),ie.parseHTML=function(e,t,n){if("string"!=typeof e)return[];if("boolean"==typeof t&&(n=t,t=!1),!t)if(oe.createHTMLDocument){var r=(t=K.implementation.createHTMLDocument("")).createElement("base");r.href=K.location.href,t.head.appendChild(r)}else t=K;return n=!n&&[],(r=he.exec(e))?[t.createElement(r[1])]:(r=g([e],t,n),n&&n.length&&ie(n).remove(),ie.merge([],r.childNodes))},ie.fn.load=function(e,t,n){var r,o,i=this,a=e.indexOf(" ");if(-1<a){var s=B(e.slice(a));e=e.slice(0,a)}return ie.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),0<i.length&&ie.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){o=arguments,i.html(s?ie("<div>").append(ie.parseHTML(e)).find(s):e)}).always(n&&function(e,t){i.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},ie.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){ie.fn[t]=function(e){return this.on(t,e)}}),ie.expr.pseudos.animated=function(e){return ie.grep(ie.timers,function(t){return e===t.elem}).length},ie.offset={setOffset:function(e,t,n){var r=ie.css(e,"position"),o=ie(e),i={};"static"===r&&(e.style.position="relative");var a=o.offset(),s=ie.css(e,"top"),l=ie.css(e,"left");("absolute"===r||"fixed"===r)&&-1<(s+l).indexOf("auto")?(s=(l=o.position()).top,l=l.left):(s=parseFloat(s)||0,l=parseFloat(l)||0),ie.isFunction(t)&&(t=t.call(e,n,ie.extend({},a))),null!=t.top&&(i.top=t.top-a.top+s),null!=t.left&&(i.left=t.left-a.left+l),"using"in t?t.using.call(e,i):o.css(i)}},ie.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){ie.offset.setOffset(this,e,t)});var t;if(t=this[0]){if(!t.getClientRects().length)return{top:0,left:0};var n=t.getBoundingClientRect(),r=t.ownerDocument;return t=r.documentElement,r=r.defaultView,{top:n.top+r.pageYOffset-t.clientTop,left:n.left+r.pageXOffset-t.clientLeft}}},position:function(){if(this[0]){var e=this[0],t={top:0,left:0};if("fixed"===ie.css(e,"position"))var n=e.getBoundingClientRect();else{var r=this.offsetParent();n=this.offset(),o(r[0],"html")||(t=r.offset()),t={top:t.top+ie.css(r[0],"borderTopWidth",!0),left:t.left+ie.css(r[0],"borderLeftWidth",!0)}}return{top:n.top-t.top-ie.css(e,"marginTop",!0),left:n.left-t.left-ie.css(e,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===ie.css(e,"position");)e=e.offsetParent;return e||ze})}}),ie.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;ie.fn[e]=function(r){return Ee(this,function(e,r,o){if(ie.isWindow(e))var i=e;else 9===e.nodeType&&(i=e.defaultView);if(void 0===o)return i?i[t]:e[r];i?i.scrollTo(n?i.pageXOffset:o,n?o:i.pageYOffset):e[r]=o},e,r,arguments.length)}}),ie.each(["top","left"],function(e,t){ie.cssHooks[t]=k(oe.pixelPosition,function(e,n){if(n)return n=T(e,t),Ze.test(n)?ie(e).position()[t]+"px":n})}),ie.each({Height:"height",Width:"width"},function(e,t){ie.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){ie.fn[r]=function(o,i){var a=arguments.length&&(n||"boolean"!=typeof o),s=n||(!0===o||!0===i?"margin":"border");return Ee(this,function(t,n,o){return ie.isWindow(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(n=t.documentElement,Math.max(t.body["scroll"+e],n["scroll"+e],t.body["offset"+e],n["offset"+e],n["client"+e])):void 0===o?ie.css(t,n,s):ie.style(t,n,o,s)},t,a?o:void 0,a)}})}),ie.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),ie.holdReady=function(e){e?ie.readyWait++:ie.ready(!0)},ie.isArray=Array.isArray,ie.parseJSON=JSON.parse,ie.nodeName=o,void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return ie}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__=[]))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__);var Lt=e.jQuery,Gt=e.$;return ie.noConflict=function(t){return e.$===ie&&(e.$=Gt),t&&e.jQuery===ie&&(e.jQuery=Lt),ie},t||(e.jQuery=e.$=ie),ie},"object"==typeof module.exports?module.exports=n.document?C(n,!0):function(e){if(!e.document)throw Error("jQuery requires a window with a document");return C(e)}:C(n);var $jscomp=$jscomp||{},g;$jscomp.scope={},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:void 0!==global&&null!=global?global:e},$jscomp.global=$jscomp.getGlobal(this),$jscomp.SYMBOL_PREFIX="jscomp_symbol_",$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){},$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)},$jscomp.symbolCounter_=0,$jscomp.Symbol=function(e){return $jscomp.SYMBOL_PREFIX+(e||"")+$jscomp.symbolCounter_++},$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var e=$jscomp.global.Symbol.iterator;e||(e=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator")),"function"!=typeof Array.prototype[e]&&$jscomp.defineProperty(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}}),$jscomp.initSymbolIterator=function(){}},$jscomp.arrayIterator=function(e){var t=0;return $jscomp.iteratorPrototype(function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}})},$jscomp.iteratorPrototype=function(e){return $jscomp.initSymbolIterator(),(e={next:e})[$jscomp.global.Symbol.iterator]=function(){return this},e},$jscomp.iteratorFromArray=function(e,t){$jscomp.initSymbolIterator(),e instanceof String&&(e+="");var n=0,r={next:function(){if(n<e.length){var o=n++;return{value:t(o,e[o]),done:!1}}return r.next=function(){return{done:!0,value:void 0}},r.next()}};return r[Symbol.iterator]=function(){return r},r},$jscomp.polyfill=function(e,t,n,r){if(t){for(n=$jscomp.global,e=e.split("."),r=0;r<e.length-1;r++){var o=e[r];o in n||(n[o]={}),n=n[o]}(t=t(r=n[e=e[e.length-1]]))!=r&&null!=t&&$jscomp.defineProperty(n,e,{configurable:!0,writable:!0,value:t})}},$jscomp.polyfill("Array.prototype.keys",function(e){return e||function(){return $jscomp.iteratorFromArray(this,function(e){return e})}},"es6","es3"),g=this,function(e){function t(e,t,n){for(var r=0,o=n.length;r<o;r++){var i=n.charCodeAt(r);if(128>i)e.setUint8(t++,i>>>0&127|0);else if(2048>i)e.setUint8(t++,i>>>6&31|192),e.setUint8(t++,i>>>0&63|128);else if(65536>i)e.setUint8(t++,i>>>12&15|224),e.setUint8(t++,i>>>6&63|128),e.setUint8(t++,i>>>0&63|128);else{if(!(1114112>i))throw Error("bad codepoint "+i);e.setUint8(t++,i>>>18&7|240),e.setUint8(t++,i>>>12&63|128),e.setUint8(t++,i>>>6&63|128),e.setUint8(t++,i>>>0&63|128)}}}function n(e){for(var t=0,n=0,r=e.length;n<r;n++){var o=e.charCodeAt(n);if(128>o)t+=1;else if(2048>o)t+=2;else if(65536>o)t+=3;else{if(!(1114112>o))throw Error("bad codepoint "+o);t+=4}}return t}function r(e){var r=new ArrayBuffer(function e(t){var r=typeof t;if("string"===r){var o=n(t);if(32>o)return 1+o;if(256>o)return 2+o;if(65536>o)return 3+o;if(4294967296>o)return 5+o}if(t instanceof Uint8Array){if(256>(o=t.byteLength))return 2+o;if(65536>o)return 3+o;if(4294967296>o)return 5+o}if("number"===r){if(Math.floor(t)!==t)return 9;if(0<=t){if(128>t)return 1;if(256>t)return 2;if(65536>t)return 3;if(4294967296>t)return 5;throw Error("Number too big 0x"+t.toString(16))}if(-32<=t)return 1;if(-128<=t)return 2;if(-32768<=t)return 3;if(-2147483648<=t)return 5;throw Error("Number too small -0x"+t.toString(16).substr(1))}if("boolean"===r||null===t)return 1;if("object"===r){if(r=0,Array.isArray(t)){o=t.length;for(var i=0;i<o;i++)r+=e(t[i])}else{var a=Object.keys(t);for(o=a.length,i=0;i<o;i++){var s=a[i];r+=e(s)+e(t[s])}}if(16>o)return 1+r;if(65536>o)return 3+r;if(4294967296>o)return 5+r;throw Error("Array or object too long 0x"+o.toString(16))}throw Error("Unknown type "+r)}(e)),o=new DataView(r);return function e(r,o,i){var a=typeof r;if("string"===a){var s=n(r);if(32>s)return o.setUint8(i,160|s),t(o,i+1,r),1+s;if(256>s)return o.setUint8(i,217),o.setUint8(i+1,s),t(o,i+2,r),2+s;if(65536>s)return o.setUint8(i,218),o.setUint16(i+1,s),t(o,i+3,r),3+s;if(4294967296>s)return o.setUint8(i,219),o.setUint32(i+1,s),t(o,i+5,r),5+s}if(r instanceof Uint8Array){s=r.byteLength;var l=new Uint8Array(o.buffer);if(256>s)return o.setUint8(i,196),o.setUint8(i+1,s),l.set(r,i+2),2+s;if(65536>s)return o.setUint8(i,197),o.setUint16(i+1,s),l.set(r,i+3),3+s;if(4294967296>s)return o.setUint8(i,198),o.setUint32(i+1,s),l.set(r,i+5),5+s}if("number"===a){if(!isFinite(r))throw Error("Number not finite: "+r);if(Math.floor(r)!==r)return o.setUint8(i,203),o.setFloat64(i+1,r),9;if(0<=r){if(128>r)return o.setUint8(i,r),1;if(256>r)return o.setUint8(i,204),o.setUint8(i+1,r),2;if(65536>r)return o.setUint8(i,205),o.setUint16(i+1,r),3;if(4294967296>r)return o.setUint8(i,206),o.setUint32(i+1,r),5;throw Error("Number too big 0x"+r.toString(16))}if(-32<=r)return o.setInt8(i,r),1;if(-128<=r)return o.setUint8(i,208),o.setInt8(i+1,r),2;if(-32768<=r)return o.setUint8(i,209),o.setInt16(i+1,r),3;if(-2147483648<=r)return o.setUint8(i,210),o.setInt32(i+1,r),5;throw Error("Number too small -0x"+(-r).toString(16).substr(1))}if(null===r)return o.setUint8(i,192),1;if("boolean"===a)return o.setUint8(i,r?195:194),1;if("object"===a){if(a=0,l=Array.isArray(r))s=r.length;else{var u=Object.keys(r);s=u.length}if(16>s?(o.setUint8(i,s|(l?144:128)),a=1):65536>s?(o.setUint8(i,l?220:222),o.setUint16(i+1,s),a=3):4294967296>s&&(o.setUint8(i,l?221:223),o.setUint32(i+1,s),a=5),l)for(l=0;l<s;l++)a+=e(r[l],o,i+a);else for(l=0;l<s;l++){var c=u[l];a+=e(c,o,i+a),a+=e(r[c],o,i+a)}return a}throw Error("Unknown type "+a)}(e,o,0),new Uint8Array(r)}function o(e,t,n){return t?new e(t.buffer,t.byteOffset,t.byteLength/(n||1)):void 0}function i(e,t){var n=e.length/2;t||(t=new Int16Array(n));for(var r=0,o=0;r<n;++r,o+=2)t[r]=e[o]<<8^e[o+1]<<0;return t}function a(e,t){var n=e.length/4;t||(t=new Int32Array(n));for(var r=0,o=0;r<n;++r,o+=4)t[r]=e[o]<<24^e[o+1]<<16^e[o+2]<<8^e[o+3]<<0;return t}function s(e,t){var n=e.length;t||(t=new Uint8Array(4*n));for(var r=o(DataView,t),i=0;i<n;++i)r.setInt32(4*i,e[i]);return o(Uint8Array,t)}function l(e,t,n){var r=e.length;t=1/t,n||(n=new Float32Array(r));for(var o=0;o<r;++o)n[o]=e[o]*t;return n}function u(e,t,n){var r=e.length;n||(n=new Int32Array(r));for(var o=0;o<r;++o)n[o]=Math.round(e[o]*t);return n}function c(e,t){var n;if(!t){var r=t=0;for(n=e.length;r<n;r+=2)t+=e[r+1];t=new e.constructor(t)}var o=0;for(r=0,n=e.length;r<n;r+=2)for(var i=e[r],a=e[r+1],s=0;s<a;++s)t[o]=i,++o;return t}function p(e){if(0===e.length)return new Int32Array;var t,n=2,r=1;for(t=e.length;r<t;++r)e[r-1]!==e[r]&&(n+=2);n=new Int32Array(n);var o=0,i=1;for(r=1,t=e.length;r<t;++r)e[r-1]!==e[r]?(n[o]=e[r-1],n[o+1]=i,i=1,o+=2):++i;return n[o]=e[e.length-1],n[o+1]=i,n}function d(e,t){var n=e.length;t||(t=new e.constructor(n)),n&&(t[0]=e[0]);for(var r=1;r<n;++r)t[r]=e[r]+t[r-1];return t}function f(e,t){var n=e.length;t||(t=new e.constructor(n)),t[0]=e[0];for(var r=1;r<n;++r)t[r]=e[r]-e[r-1];return t}function h(e,t){var n,r,o=e instanceof Int8Array?127:32767,i=-o-1,a=e.length;if(!t){for(n=t=0;n<a;++n)e[n]<o&&e[n]>i&&++t;t=new Int32Array(t)}for(r=n=0;n<a;){for(var s=0;e[n]===o||e[n]===i;)s+=e[n],++n;s+=e[n],++n,t[r]=s,++r}return t}function m(e,t,n,r){var o=new ArrayBuffer(12+r.byteLength),i=new Uint8Array(o);return(o=new DataView(o)).setInt32(0,e),o.setInt32(4,t),n&&i.set(n,8),i.set(r,12),i}function y(e){var t=e.length;return e=o(Uint8Array,e),m(2,t,void 0,e)}function g(e){var t=e.length;return e=s(e),m(4,t,void 0,e)}function v(e,t){var n=e.length/t;return t=s([t]),e=o(Uint8Array,e),m(5,n,t,e)}function b(e){var t=e.length;return e=s(p(e)),m(6,t,void 0,e)}function S(e){var t=e.length;return e=s(p(f(e))),m(8,t,void 0,e)}function _(e,t){var n,r=e.length,i=s([t]),a=(t=f(u(e,t),void 0)).length;for(n=e=0;n<a;++n){var l=t[n];0===l?++e:e=32767===l||-32768===l?e+2:0<l?e+Math.ceil(l/32767):e+Math.ceil(l/-32768)}e=new Int16Array(e);var c=0;for(n=0;n<a;++n){if(0<=(l=t[n]))for(;32767<=l;)e[c]=32767,++c,l-=32767;else for(;-32768>=l;)e[c]=-32768,++c,l-=-32768;e[c]=l,++c}for(t=void 0,l=e.length,t||(t=new Uint8Array(2*l)),n=o(DataView,t),a=0;a<l;++a)n.setInt16(2*a,e[a]);return e=o(Uint8Array,t),m(10,r,i,e)}function w(e){var t={};return x.forEach(function(n){void 0!==e[n]&&(t[n]=e[n])}),e.bondAtomList&&(t.bondAtomList=g(e.bondAtomList)),e.bondOrderList&&(t.bondOrderList=y(e.bondOrderList)),t.xCoordList=_(e.xCoordList,1e3),t.yCoordList=_(e.yCoordList,1e3),t.zCoordList=_(e.zCoordList,1e3),e.bFactorList&&(t.bFactorList=_(e.bFactorList,100)),e.atomIdList&&(t.atomIdList=S(e.atomIdList)),e.altLocList&&(t.altLocList=b(e.altLocList)),e.occupancyList&&(t.occupancyList=function(e,t){var n=e.length,r=s([t]);return e=s(p(u(e,t))),m(9,n,r,e)}(e.occupancyList,100)),t.groupIdList=S(e.groupIdList),t.groupTypeList=g(e.groupTypeList),e.secStructList&&(t.secStructList=y(e.secStructList)),e.insCodeList&&(t.insCodeList=b(e.insCodeList)),e.sequenceIndexList&&(t.sequenceIndexList=S(e.sequenceIndexList)),t.chainIdList=v(e.chainIdList,4),e.chainNameList&&(t.chainNameList=v(e.chainNameList,4)),t}function E(e){function t(e){for(var t={},n=0;n<e;n++){var r=i();t[r]=i()}return t}function n(t){var n=e.subarray(a,a+t);return a+=t,n}function r(t){var n=e.subarray(a,a+t);if(a+=t,65535<t){t=[];for(var r=0;r<n.length;r+=65535)t.push(String.fromCharCode.apply(null,n.subarray(r,r+65535)));return t.join("")}return String.fromCharCode.apply(null,n)}function o(e){for(var t=Array(e),n=0;n<e;n++)t[n]=i();return t}function i(){var i=e[a];if(0==(128&i))return a++,i;if(128==(240&i))return a++,t(15&i);if(144==(240&i))return a++,o(15&i);if(160==(224&i))return a++,r(31&i);if(224==(224&i))return i=s.getInt8(a),a++,i;switch(i){case 192:return a++,null;case 194:return a++,!1;case 195:return a++,!0;case 196:return i=s.getUint8(a+1),a+=2,n(i);case 197:return i=s.getUint16(a+1),a+=3,n(i);case 198:return i=s.getUint32(a+1),a+=5,n(i);case 202:return i=s.getFloat32(a+1),a+=5,i;case 203:return i=s.getFloat64(a+1),a+=9,i;case 204:return i=e[a+1],a+=2,i;case 205:return i=s.getUint16(a+1),a+=3,i;case 206:return i=s.getUint32(a+1),a+=5,i;case 208:return i=s.getInt8(a+1),a+=2,i;case 209:return i=s.getInt16(a+1),a+=3,i;case 210:return i=s.getInt32(a+1),a+=5,i;case 217:return i=s.getUint8(a+1),a+=2,r(i);case 218:return i=s.getUint16(a+1),a+=3,r(i);case 219:return i=s.getUint32(a+1),a+=5,r(i);case 220:return i=s.getUint16(a+1),a+=3,o(i);case 221:return i=s.getUint32(a+1),a+=5,o(i);case 222:return i=s.getUint16(a+1),a+=3,t(i);case 223:return i=s.getUint32(a+1),a+=5,t(i)}throw Error("Unknown type 0x"+i.toString(16))}var a=0,s=new DataView(e.buffer);return i()}function O(e,t){var n=(t=t||{}).ignoreFields,r={};return T.forEach(function(t){var s=!!n&&-1!==n.indexOf(t),u=e[t];s||void 0===u||(r[t]=u instanceof Uint8Array?function(e,t,n,r){switch(e){case 1:r=void 0,n=t.length,r||(r=new Float32Array(n/4)),e=o(DataView,r),t=o(DataView,t);var s=0,u=0;for(n/=4;s<n;++s,u+=4)e.setFloat32(u,t.getFloat32(u),!0);return r;case 2:return o(Int8Array,t);case 3:return i(t);case 4:return a(t);case 5:return o(Uint8Array,t);case 6:return c(a(t),new Uint8Array(n));case 7:return c(a(t));case 8:return d(c(r=a(t)),void 0);case 9:return e=a(t),r=a(r)[0],l(c(e,o(Int32Array,void 0,4)),r,void 0);case 10:return e=i(t),r=a(r)[0],e=h(e,o(Int32Array,void 0,4)),t=o(Float32Array,e,4),l(d(e,o(Int32Array,t,4)),r,t);case 11:return l(i(t),a(r)[0]);case 12:return e=i(t),r=a(r)[0],l(h(e,o(Int32Array,void 0,4)),r,void 0);case 13:return e=o(Int8Array,t),r=a(r)[0],l(h(e,o(Int32Array,void 0,4)),r,void 0);case 14:return h(i(t));case 15:return h(o(Int8Array,t))}}.apply(null,function(e){var t=o(DataView,e),n=t.getInt32(0);t=t.getInt32(4);var r=e.subarray(8,12);return e=e.subarray(12),[n,e,t,r]}(u)):u)}),r}function C(e,t){return e instanceof ArrayBuffer&&(e=new Uint8Array(e)),O(e=e instanceof Uint8Array?E(e):e,t)}function P(e,t,n,r){var o=new XMLHttpRequest;o.addEventListener("load",function(){try{var e=C(o.response);n(e)}catch(e){r(e)}},!0),o.addEventListener("error",r,!0),o.responseType="arraybuffer",o.open("GET",t+e.toUpperCase()),o.send()}var x="mmtfVersion mmtfProducer unitCell spaceGroup structureId title depositionDate releaseDate experimentalMethods resolution rFree rWork bioAssemblyList ncsOperatorList entityList groupList numBonds numAtoms numGroups numChains numModels groupsPerChain chainsPerModel".split(" "),T=x.concat("xCoordList yCoordList zCoordList groupIdList groupTypeList chainIdList bFactorList atomIdList altLocList occupancyList secStructList insCodeList sequenceIndexList chainNameList bondAtomList bondOrderList".split(" "));e.encode=function(e){return r(w(e))},e.decode=C,e.traverse=function(e,t,n){n=(n=n||{}).firstModelOnly;var r=t.onModel,o=t.onChain,i=t.onGroup,a=t.onAtom;t=t.onBond;var s,l,u=0,c=0,p=0,d=0,f=-1,h=e.chainNameList,m=e.secStructList,y=e.insCodeList,g=e.sequenceIndexList,v=e.atomIdList,b=e.bFactorList,S=e.altLocList,_=e.occupancyList,w=e.bondAtomList,E=e.bondOrderList,O=0;for(l=e.chainsPerModel.length;O<l&&!(n&&0<u);++O){var C=e.chainsPerModel[u];for(r&&r({chainCount:C,modelIndex:u}),s=0;s<C;++s){var P=e.groupsPerChain[c];if(o){var x=String.fromCharCode.apply(null,e.chainIdList.subarray(4*c,4*c+4)).replace(/\0/g,""),T=null;h&&(T=String.fromCharCode.apply(null,h.subarray(4*c,4*c+4)).replace(/\0/g,"")),o({groupCount:P,chainIndex:c,modelIndex:u,chainId:x,chainName:T})}for(x=0;x<P;++x){var k=e.groupList[e.groupTypeList[p]],A=k.atomNameList.length;if(i){T=null,m&&(T=m[p]);var I=null;e.insCodeList&&(I=String.fromCharCode(y[p]));var D=null;g&&(D=g[p]),i({atomCount:A,groupIndex:p,chainIndex:c,modelIndex:u,groupId:e.groupIdList[p],groupType:e.groupTypeList[p],groupName:k.groupName,singleLetterCode:k.singleLetterCode,chemCompType:k.chemCompType,secStruct:T,insCode:I,sequenceIndex:D})}for(T=0;T<A;++T){if(a){I=null,v&&(I=v[d]),D=null,b&&(D=b[d]);var M=null;S&&(M=String.fromCharCode(S[d]));var j=null;_&&(j=_[d]),a({atomIndex:d,groupIndex:p,chainIndex:c,modelIndex:u,atomId:I,element:k.elementList[T],atomName:k.atomNameList[T],formalCharge:k.formalChargeList[T],xCoord:e.xCoordList[d],yCoord:e.yCoordList[d],zCoord:e.zCoordList[d],bFactor:D,altLoc:M,occupancy:j})}d+=1}if(t)for(D=k.bondAtomList,T=0,I=k.bondOrderList.length;T<I;++T)t({atomIndex1:d-A+D[2*T],atomIndex2:d-A+D[2*T+1],bondOrder:k.bondOrderList[T]});p+=1}c+=1}if(s=f+1,f=d-1,t&&w)for(T=0,I=w.length;T<I;T+=2)C=w[T],P=w[T+1],(C>=s&&C<=f||P>=s&&P<=f)&&t({atomIndex1:C,atomIndex2:P,bondOrder:E?E[T/2]:null});u+=1}},e.fetch=function(e,t,n){P(e,"http://mmtf.rcsb.org/v1.0/full/",t,n)},e.fetchReduced=function(e,t,n){P(e,"http://mmtf.rcsb.org/v1.0/reduced/",t,n)},e.version="v1.0.0",e.fetchUrl="http://mmtf.rcsb.org/v1.0/full/",e.fetchReducedUrl="http://mmtf.rcsb.org/v1.0/reduced/",e.encodeMsgpack=r,e.encodeMmtf=w,e.decodeMsgpack=E,e.decodeMmtf=O,Object.defineProperty(e,"__esModule",{value:!0})}(g.MMTF=g.MMTF||{}),module.exports=function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return require(a,!0);if(i)return i(a,!0);throw(s=Error("Cannot find module '"+a+"'")).code="MODULE_NOT_FOUND",s}s=n[a]={exports:{}},t[a][0].call(s.exports,function(e){var n=t[a][1][e];return o(n||e)},s,s.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){e="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array,n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var r={arraySet:function(e,t,n,r,o){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),o);else for(var i=0;i<r;i++)e[o+i]=t[n+i]},flattenChunks:function(e){var t,n,r=n=0;for(t=e.length;r<t;r++)n+=e[r].length;var o=new Uint8Array(n);for(r=n=0,t=e.length;r<t;r++){var i=e[r];o.set(i,n),n+=i.length}return o}},o={arraySet:function(e,t,n,r,o){for(var i=0;i<r;i++)e[o+i]=t[n+i]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,r)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(e)},{}],2:[function(e,t,n){function r(e,t){if(65537>t&&(e.subarray&&a||!e.subarray&&i))return String.fromCharCode.apply(null,o.shrinkBuf(e,t));for(var n="",r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n}var o=e("./common"),i=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){a=!1}var s=new o.Buf8(256);for(e=0;256>e;e++)s[e]=252<=e?6:248<=e?5:240<=e?4:224<=e?3:192<=e?2:1;s[254]=s[254]=1,n.string2buf=function(e){var t,n,r=e.length,i=0;for(t=0;t<r;t++){var a=e.charCodeAt(t);if(55296==(64512&a)&&t+1<r){var s=e.charCodeAt(t+1);56320==(64512&s)&&(a=65536+(a-55296<<10)+(s-56320),t++)}i+=128>a?1:2048>a?2:65536>a?3:4}var l=new o.Buf8(i);for(t=n=0;n<i;t++)55296==(64512&(a=e.charCodeAt(t)))&&t+1<r&&56320==(64512&(s=e.charCodeAt(t+1)))&&(a=65536+(a-55296<<10)+(s-56320),t++),128>a?l[n++]=a:(2048>a?l[n++]=192|a>>>6:(65536>a?l[n++]=224|a>>>12:(l[n++]=240|a>>>18,l[n++]=128|a>>>12&63),l[n++]=128|a>>>6&63),l[n++]=128|63&a);return l},n.buf2binstring=function(e){return r(e,e.length)},n.binstring2buf=function(e){for(var t=new o.Buf8(e.length),n=0,r=t.length;n<r;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,o=t||e.length,i=Array(2*o);for(t=n=0;t<o;){var a=e[t++];if(128>a)i[n++]=a;else{var l=s[a];if(4<l)i[n++]=65533,t+=l-1;else{for(a&=2===l?31:3===l?15:7;1<l&&t<o;)a=a<<6|63&e[t++],l--;1<l?i[n++]=65533:65536>a?i[n++]=a:(a-=65536,i[n++]=55296|a>>10&1023,i[n++]=56320|1023&a)}}}return r(i,n)},n.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return 0>n||0===n?t:n+s[e[n]]>t?n:t}},{"./common":1}],3:[function(e,t,n){t.exports=function(e,t,n,r){var o,i=65535&e|0;for(e=e>>>16&65535|0;0!==n;){n-=o=2e3<n?2e3:n;do{i=i+t[r++]|0,e=e+i|0}while(--o);i%=65521,e%=65521}return i|e<<16|0}},{}],4:[function(e,t,n){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],5:[function(e,t,n){var r=function(){for(var e,t=[],n=0;256>n;n++){e=n;for(var r=0;8>r;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t,n,o){for(n=o+n,e^=-1;o<n;o++)e=e>>>8^r[255&(e^t[o])];return-1^e}},{}],6:[function(e,t,n){t.exports=function(){this.os=this.xflags=this.time=this.text=0,this.extra=null,this.extra_len=0,this.comment=this.name="",this.hcrc=0,this.done=!1}},{}],7:[function(e,t,n){t.exports=function(e,t){var n=e.state,r=e.next_in,o=e.input,i=r+(e.avail_in-5),a=e.next_out,s=e.output;t=a-(t-e.avail_out);var l=a+(e.avail_out-257),u=n.dmax,c=n.wsize,p=n.whave,d=n.wnext,f=n.window,h=n.hold,m=n.bits,y=n.lencode,g=n.distcode,v=(1<<n.lenbits)-1,b=(1<<n.distbits)-1;e:do{15>m&&(h+=o[r++]<<m,m+=8,h+=o[r++]<<m,m+=8);var S=y[h&v];t:for(;;){var _=S>>>24;if(h>>>=_,m-=_,0==(_=S>>>16&255))s[a++]=65535&S;else{if(!(16&_)){if(0==(64&_)){S=y[(65535&S)+(h&(1<<_)-1)];continue t}32&_?n.mode=12:(e.msg="invalid literal/length code",n.mode=30);break e}var w=65535&S;(_&=15)&&(m<_&&(h+=o[r++]<<m,m+=8),w+=h&(1<<_)-1,h>>>=_,m-=_),15>m&&(h+=o[r++]<<m,m+=8,h+=o[r++]<<m,m+=8),S=g[h&b];n:for(;;){if(h>>>=_=S>>>24,m-=_,!(16&(_=S>>>16&255))){if(0==(64&_)){S=g[(65535&S)+(h&(1<<_)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(S&=65535,m<(_&=15)&&(h+=o[r++]<<m,(m+=8)<_&&(h+=o[r++]<<m,m+=8)),(S+=h&(1<<_)-1)>u){e.msg="invalid distance too far back",n.mode=30;break e}if(h>>>=_,m-=_,S>(_=a-t)){if((_=S-_)>p&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}var E=0,O=f;if(0===d){if(E+=c-_,_<w){w-=_;do{s[a++]=f[E++]}while(--_);E=a-S,O=s}}else if(d<_){if(E+=c+d-_,(_-=d)<w){w-=_;do{s[a++]=f[E++]}while(--_);if(E=0,d<w){w-=_=d;do{s[a++]=f[E++]}while(--_);E=a-S,O=s}}}else if(E+=d-_,_<w){w-=_;do{s[a++]=f[E++]}while(--_);E=a-S,O=s}for(;2<w;)s[a++]=O[E++],s[a++]=O[E++],s[a++]=O[E++],w-=3;w&&(s[a++]=O[E++],1<w&&(s[a++]=O[E++]))}else{E=a-S;do{s[a++]=s[E++],s[a++]=s[E++],s[a++]=s[E++],w-=3}while(2<w);w&&(s[a++]=s[E++],1<w&&(s[a++]=s[E++]))}break}}break}}while(r<i&&a<l);r-=w=m>>3,m-=w<<3,e.next_in=r,e.next_out=a,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=a<l?l-a+257:257-(a-l),n.hold=h&(1<<m)-1,n.bits=m}},{}],8:[function(e,t,n){function r(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function o(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.total=this.check=this.dmax=this.flags=0,this.head=null,this.wnext=this.whave=this.wsize=this.wbits=0,this.window=null,this.extra=this.offset=this.length=this.bits=this.hold=0,this.distcode=this.lencode=null,this.have=this.ndist=this.nlen=this.ncode=this.distbits=this.lenbits=0,this.next=null,this.lens=new p.Buf16(320),this.work=new p.Buf16(288),this.distdyn=this.lendyn=null,this.was=this.back=this.sane=0}function i(e){if(!e||!e.state)return-2;var t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new p.Buf32(852),t.distcode=t.distdyn=new p.Buf32(592),t.sane=1,t.back=-1,0}function a(e){if(!e||!e.state)return-2;var t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,i(e)}function s(e,t){if(!e||!e.state)return-2;var n=e.state;if(0>t){var r=0;t=-t}else r=1+(t>>4),48>t&&(t&=15);return t&&(8>t||15<t)?-2:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,a(e))}function l(e,t){if(!e)return-2;var n=new o;return e.state=n,n.window=null,0!==(t=s(e,t))&&(e.state=null),t}var u,c,p=e("../utils/common"),d=e("./adler32"),f=e("./crc32"),h=e("./inffast"),m=e("./inftrees"),y=!0;n.inflateReset=a,n.inflateReset2=s,n.inflateResetKeep=i,n.inflateInit=function(e){return l(e,15)},n.inflateInit2=l,n.inflate=function(e,t){var n,o=new p.Buf8(4),i=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return-2;var a=e.state;12===a.mode&&(a.mode=13);var s=e.next_out,l=e.output,g=e.avail_out,v=e.next_in,b=e.input,S=e.avail_in,_=a.hold,w=a.bits,E=S,O=g,C=0;e:for(;;)switch(a.mode){case 1:if(0===a.wrap){a.mode=13;break}for(;16>w;){if(0===S)break e;S--,_+=b[v++]<<w,w+=8}if(2&a.wrap&&35615===_){a.check=0,o[0]=255&_,o[1]=_>>>8&255,a.check=f(a.check,o,2,0),w=_=0,a.mode=2;break}if(a.flags=0,a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&_)<<8)+(_>>8))%31){e.msg="incorrect header check",a.mode=30;break}if(8!=(15&_)){e.msg="unknown compression method",a.mode=30;break}w-=4;var P=8+(15&(_>>>=4));if(0===a.wbits)a.wbits=P;else if(P>a.wbits){e.msg="invalid window size",a.mode=30;break}a.dmax=1<<P,e.adler=a.check=1,a.mode=512&_?10:12,w=_=0;break;case 2:for(;16>w;){if(0===S)break e;S--,_+=b[v++]<<w,w+=8}if(a.flags=_,8!=(255&a.flags)){e.msg="unknown compression method",a.mode=30;break}if(57344&a.flags){e.msg="unknown header flags set",a.mode=30;break}a.head&&(a.head.text=_>>8&1),512&a.flags&&(o[0]=255&_,o[1]=_>>>8&255,a.check=f(a.check,o,2,0)),w=_=0,a.mode=3;case 3:for(;32>w;){if(0===S)break e;S--,_+=b[v++]<<w,w+=8}a.head&&(a.head.time=_),512&a.flags&&(o[0]=255&_,o[1]=_>>>8&255,o[2]=_>>>16&255,o[3]=_>>>24&255,a.check=f(a.check,o,4,0)),w=_=0,a.mode=4;case 4:for(;16>w;){if(0===S)break e;S--,_+=b[v++]<<w,w+=8}a.head&&(a.head.xflags=255&_,a.head.os=_>>8),512&a.flags&&(o[0]=255&_,o[1]=_>>>8&255,a.check=f(a.check,o,2,0)),w=_=0,a.mode=5;case 5:if(1024&a.flags){for(;16>w;){if(0===S)break e;S--,_+=b[v++]<<w,w+=8}a.length=_,a.head&&(a.head.extra_len=_),512&a.flags&&(o[0]=255&_,o[1]=_>>>8&255,a.check=f(a.check,o,2,0)),w=_=0}else a.head&&(a.head.extra=null);a.mode=6;case 6:if(1024&a.flags){var x=a.length;if(x>S&&(x=S),x&&(a.head&&(P=a.head.extra_len-a.length,a.head.extra||(a.head.extra=Array(a.head.extra_len)),p.arraySet(a.head.extra,b,v,x,P)),512&a.flags&&(a.check=f(a.check,b,x,v)),S-=x,v+=x,a.length-=x),a.length)break e}a.length=0,a.mode=7;case 7:if(2048&a.flags){if(0===S)break e;x=0;do{P=b[v+x++],a.head&&P&&65536>a.length&&(a.head.name+=String.fromCharCode(P))}while(P&&x<S);if(512&a.flags&&(a.check=f(a.check,b,x,v)),S-=x,v+=x,P)break e}else a.head&&(a.head.name=null);a.length=0,a.mode=8;case 8:if(4096&a.flags){if(0===S)break e;x=0;do{P=b[v+x++],a.head&&P&&65536>a.length&&(a.head.comment+=String.fromCharCode(P))}while(P&&x<S);if(512&a.flags&&(a.check=f(a.check,b,x,v)),S-=x,v+=x,P)break e}else a.head&&(a.head.comment=null);a.mode=9;case 9:if(512&a.flags){for(;16>w;){if(0===S)break e;S--,_+=b[v++]<<w,w+=8}if(_!==(65535&a.check)){e.msg="header crc mismatch",a.mode=30;break}w=_=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),e.adler=a.check=0,a.mode=12;break;case 10:for(;32>w;){if(0===S)break e;S--,_+=b[v++]<<w,w+=8}e.adler=a.check=r(_),w=_=0,a.mode=11;case 11:if(0===a.havedict)return e.next_out=s,e.avail_out=g,e.next_in=v,e.avail_in=S,a.hold=_,a.bits=w,2;e.adler=a.check=1,a.mode=12;case 12:if(5===t||6===t)break e;case 13:if(a.last){_>>>=7&w,w-=7&w,a.mode=27;break}for(;3>w;){if(0===S)break e;S--,_+=b[v++]<<w,w+=8}switch(a.last=1&_,--w,3&(_>>>=1)){case 0:a.mode=14;break;case 1:if(P=a,y){for(u=new p.Buf32(512),c=new p.Buf32(32),x=0;144>x;)P.lens[x++]=8;for(;256>x;)P.lens[x++]=9;for(;280>x;)P.lens[x++]=7;for(;288>x;)P.lens[x++]=8;for(m(1,P.lens,0,288,u,0,P.work,{bits:9}),x=0;32>x;)P.lens[x++]=5;m(2,P.lens,0,32,c,0,P.work,{bits:5}),y=!1}if(P.lencode=u,P.lenbits=9,P.distcode=c,P.distbits=5,a.mode=20,6===t){_>>>=2,w-=2;break e}break;case 2:a.mode=17;break;case 3:e.msg="invalid block type",a.mode=30}_>>>=2,w-=2;break;case 14:for(_>>>=7&w,w-=7&w;32>w;){if(0===S)break e;S--,_+=b[v++]<<w,w+=8}if((65535&_)!=(_>>>16^65535)){e.msg="invalid stored block lengths",a.mode=30;break}if(a.length=65535&_,w=_=0,a.mode=15,6===t)break e;case 15:a.mode=16;case 16:if(x=a.length){if(x>S&&(x=S),x>g&&(x=g),0===x)break e;p.arraySet(l,b,v,x,s),S-=x,v+=x,g-=x,s+=x,a.length-=x;break}a.mode=12;break;case 17:for(;14>w;){if(0===S)break e;S--,_+=b[v++]<<w,w+=8}if(a.nlen=257+(31&_),_>>>=5,w-=5,a.ndist=1+(31&_),_>>>=5,w-=5,a.ncode=4+(15&_),_>>>=4,w-=4,286<a.nlen||30<a.ndist){e.msg="too many length or distance symbols",a.mode=30;break}a.have=0,a.mode=18;case 18:for(;a.have<a.ncode;){for(;3>w;){if(0===S)break e;S--,_+=b[v++]<<w,w+=8}a.lens[i[a.have++]]=7&_,_>>>=3,w-=3}for(;19>a.have;)a.lens[i[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,x={bits:a.lenbits},C=m(0,a.lens,0,19,a.lencode,0,a.work,x),a.lenbits=x.bits,C){e.msg="invalid code lengths set",a.mode=30;break}a.have=0,a.mode=19;case 19:for(;a.have<a.nlen+a.ndist;){for(;;){var T=a.lencode[_&(1<<a.lenbits)-1];if(x=T>>>24,T&=65535,x<=w)break;if(0===S)break e;S--,_+=b[v++]<<w,w+=8}if(16>T)_>>>=x,w-=x,a.lens[a.have++]=T;else{if(16===T){for(P=x+2;w<P;){if(0===S)break e;S--,_+=b[v++]<<w,w+=8}if(_>>>=x,w-=x,0===a.have){e.msg="invalid bit length repeat",a.mode=30;break}P=a.lens[a.have-1],x=3+(3&_),_>>>=2,w-=2}else if(17===T){for(P=x+3;w<P;){if(0===S)break e;S--,_+=b[v++]<<w,w+=8}w-=x,P=0,x=3+(7&(_>>>=x)),_>>>=3,w-=3}else{for(P=x+7;w<P;){if(0===S)break e;S--,_+=b[v++]<<w,w+=8}w-=x,P=0,x=11+(127&(_>>>=x)),_>>>=7,w-=7}if(a.have+x>a.nlen+a.ndist){e.msg="invalid bit length repeat",a.mode=30;break}for(;x--;)a.lens[a.have++]=P}}if(30===a.mode)break;if(0===a.lens[256]){e.msg="invalid code -- missing end-of-block",a.mode=30;break}if(a.lenbits=9,x={bits:a.lenbits},C=m(1,a.lens,0,a.nlen,a.lencode,0,a.work,x),a.lenbits=x.bits,C){e.msg="invalid literal/lengths set",a.mode=30;break}if(a.distbits=6,a.distcode=a.distdyn,x={bits:a.distbits},C=m(2,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,x),a.distbits=x.bits,C){e.msg="invalid distances set",a.mode=30;break}if(a.mode=20,6===t)break e;case 20:a.mode=21;case 21:if(6<=S&&258<=g){e.next_out=s,e.avail_out=g,e.next_in=v,e.avail_in=S,a.hold=_,a.bits=w,h(e,O),s=e.next_out,l=e.output,g=e.avail_out,v=e.next_in,b=e.input,S=e.avail_in,_=a.hold,w=a.bits,12===a.mode&&(a.back=-1);break}for(a.back=0;T=a.lencode[_&(1<<a.lenbits)-1],x=T>>>24,P=T>>>16&255,T&=65535,!(x<=w);){if(0===S)break e;S--,_+=b[v++]<<w,w+=8}if(P&&0==(240&P)){var k=x,A=P;for(n=T;T=a.lencode[n+((_&(1<<k+A)-1)>>k)],x=T>>>24,P=T>>>16&255,T&=65535,!(k+x<=w);){if(0===S)break e;S--,_+=b[v++]<<w,w+=8}_>>>=k,w-=k,a.back+=k}if(_>>>=x,w-=x,a.back+=x,a.length=T,0===P){a.mode=26;break}if(32&P){a.back=-1,a.mode=12;break}if(64&P){e.msg="invalid literal/length code",a.mode=30;break}a.extra=15&P,a.mode=22;case 22:if(a.extra){for(P=a.extra;w<P;){if(0===S)break e;S--,_+=b[v++]<<w,w+=8}a.length+=_&(1<<a.extra)-1,_>>>=a.extra,w-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=23;case 23:for(;T=a.distcode[_&(1<<a.distbits)-1],x=T>>>24,P=T>>>16&255,T&=65535,!(x<=w);){if(0===S)break e;S--,_+=b[v++]<<w,w+=8}if(0==(240&P)){for(k=x,A=P,n=T;T=a.distcode[n+((_&(1<<k+A)-1)>>k)],x=T>>>24,P=T>>>16&255,T&=65535,!(k+x<=w);){if(0===S)break e;S--,_+=b[v++]<<w,w+=8}_>>>=k,w-=k,a.back+=k}if(_>>>=x,w-=x,a.back+=x,64&P){e.msg="invalid distance code",a.mode=30;break}a.offset=T,a.extra=15&P,a.mode=24;case 24:if(a.extra){for(P=a.extra;w<P;){if(0===S)break e;S--,_+=b[v++]<<w,w+=8}a.offset+=_&(1<<a.extra)-1,_>>>=a.extra,w-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){e.msg="invalid distance too far back",a.mode=30;break}a.mode=25;case 25:if(0===g)break e;if(x=O-g,a.offset>x){if((x=a.offset-x)>a.whave&&a.sane){e.msg="invalid distance too far back",a.mode=30;break}x>a.wnext?(x-=a.wnext,P=a.wsize-x):P=a.wnext-x,x>a.length&&(x=a.length),k=a.window}else k=l,P=s-a.offset,x=a.length;x>g&&(x=g),g-=x,a.length-=x;do{l[s++]=k[P++]}while(--x);0===a.length&&(a.mode=21);break;case 26:if(0===g)break e;l[s++]=a.length,g--,a.mode=21;break;case 27:if(a.wrap){for(;32>w;){if(0===S)break e;S--,_|=b[v++]<<w,w+=8}if(O-=g,e.total_out+=O,a.total+=O,O&&(e.adler=a.check=a.flags?f(a.check,l,O,s-O):d(a.check,l,O,s-O)),O=g,(a.flags?_:r(_))!==a.check){e.msg="incorrect data check",a.mode=30;break}w=_=0}a.mode=28;case 28:if(a.wrap&&a.flags){for(;32>w;){if(0===S)break e;S--,_+=b[v++]<<w,w+=8}if(_!==(4294967295&a.total)){e.msg="incorrect length check",a.mode=30;break}w=_=0}a.mode=29;case 29:C=1;break e;case 30:C=-3;break e;case 31:return-4;default:return-2}return e.next_out=s,e.avail_out=g,e.next_in=v,e.avail_in=S,a.hold=_,a.bits=w,(a.wsize||O!==e.avail_out&&30>a.mode&&(27>a.mode||4!==t))&&(b=e.output,v=e.next_out,s=O-e.avail_out,null===(g=e.state).window&&(g.wsize=1<<g.wbits,g.wnext=0,g.whave=0,g.window=new p.Buf8(g.wsize)),s>=g.wsize?(p.arraySet(g.window,b,v-g.wsize,g.wsize,0),g.wnext=0,g.whave=g.wsize):((S=g.wsize-g.wnext)>s&&(S=s),p.arraySet(g.window,b,v-s,S,g.wnext),(s-=S)?(p.arraySet(g.window,b,v-s,s,0),g.wnext=s,g.whave=g.wsize):(g.wnext+=S,g.wnext===g.wsize&&(g.wnext=0),g.whave<g.wsize&&(g.whave+=S)))),E-=e.avail_in,O-=e.avail_out,e.total_in+=E,e.total_out+=O,a.total+=O,a.wrap&&O&&(e.adler=a.check=a.flags?f(a.check,l,O,e.next_out-O):d(a.check,l,O,e.next_out-O)),e.data_type=a.bits+(a.last?64:0)+(12===a.mode?128:0)+(20===a.mode||15===a.mode?256:0),(0===E&&0===O||4===t)&&0===C&&(C=-5),C},n.inflateEnd=function(e){if(!e||!e.state)return-2;var t=e.state;return t.window&&(t.window=null),e.state=null,0},n.inflateGetHeader=function(e,t){return e&&e.state?0==(2&(e=e.state).wrap)?-2:(e.head=t,t.done=!1,0):-2},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":5,"./inffast":7,"./inftrees":9}],9:[function(e,t,n){var r=e("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,n,l,u,c,p,d){var f,h,m,y,g,v,b,S=d.bits,_=0,w=new r.Buf16(16),E=new r.Buf16(16),O=0;for(f=0;15>=f;f++)w[f]=0;for(h=0;h<l;h++)w[t[n+h]]++;var C=S;for(m=15;1<=m&&0===w[m];m--);if(C>m&&(C=m),0===m)return u[c++]=20971520,u[c++]=20971520,d.bits=1,0;for(S=1;S<m&&0===w[S];S++);for(C<S&&(C=S),f=y=1;15>=f;f++)if(y<<=1,0>(y-=w[f]))return-1;if(0<y&&(0===e||1!==m))return-1;for(E[1]=0,f=1;15>f;f++)E[f+1]=E[f]+w[f];for(h=0;h<l;h++)0!==t[n+h]&&(p[E[t[n+h]]++]=h);if(0===e)var P=b=p,x=19;else 1===e?(P=o,_-=257,b=i,O-=257,x=256):(P=a,b=s,x=-1);h=g=0,f=S;var T=c;l=C,E=0;var k=-1,A=1<<C,I=A-1;if(1===e&&852<A||2===e&&592<A)return 1;for(;;){var D=f-E;if(p[h]<x)var M=0,j=p[h];else p[h]>x?(M=b[O+p[h]],j=P[_+p[h]]):(M=96,j=0);y=1<<f-E,S=v=1<<l;do{u[T+(g>>E)+(v-=y)]=D<<24|M<<16|j|0}while(0!==v);for(y=1<<f-1;g&y;)y>>=1;if(0!==y?(g&=y-1,g+=y):g=0,h++,0==--w[f]){if(f===m)break;f=t[n+p[h]]}if(f>C&&(g&I)!==k){for(0===E&&(E=C),T+=S,y=1<<(l=f-E);l+E<m&&!(0>=(y-=w[l+E]));)l++,y<<=1;if(A+=1<<l,1===e&&852<A||2===e&&592<A)return 1;u[k=g&I]=C<<24|l<<16|T-c|0}}return 0!==g&&(u[T+g]=f-E<<24|4194304),d.bits=C,0}},{"../utils/common":1}],10:[function(e,t,n){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],11:[function(e,t,n){t.exports=function(){this.input=null,this.total_in=this.avail_in=this.next_in=0,this.output=null,this.total_out=this.avail_out=this.next_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],"/lib/inflate.js":[function(e,t,n){function r(e,t){if((t=new d(t)).push(e,!0),t.err)throw t.msg;return t.result}var o=e("./zlib/inflate.js"),i=e("./utils/common"),a=e("./utils/strings"),s=e("./zlib/constants"),l=e("./zlib/messages"),u=e("./zlib/zstream"),c=e("./zlib/gzheader"),p=Object.prototype.toString,d=function(e){var t=this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});if(t.raw&&0<=t.windowBits&&16>t.windowBits&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&16>t.windowBits)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&48>t.windowBits&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0,(e=o.inflateInit2(this.strm,t.windowBits))!==s.Z_OK)throw Error(l[e]);this.header=new c,o.inflateGetHeader(this.strm,this.header)};d.prototype.push=function(e,t){var n=this.strm,r=this.options.chunkSize;if(this.ended)return!1;t=t===~~t?t:!0===t?s.Z_FINISH:s.Z_NO_FLUSH,"string"==typeof e?n.input=a.binstring2buf(e):"[object ArrayBuffer]"===p.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;do{if(0===n.avail_out&&(n.output=new i.Buf8(r),n.next_out=0,n.avail_out=r),(e=o.inflate(n,s.Z_NO_FLUSH))!==s.Z_STREAM_END&&e!==s.Z_OK)return this.onEnd(e),this.ended=!0,!1;if(n.next_out&&(0===n.avail_out||e===s.Z_STREAM_END||0===n.avail_in&&(t===s.Z_FINISH||t===s.Z_SYNC_FLUSH)))if("string"===this.options.to){var l=a.utf8border(n.output,n.next_out),u=n.next_out-l,c=a.buf2string(n.output,l);n.next_out=u,n.avail_out=r-u,u&&i.arraySet(n.output,n.output,l,u,0),this.onData(c)}else this.onData(i.shrinkBuf(n.output,n.next_out))}while(0<n.avail_in&&e!==s.Z_STREAM_END);return e===s.Z_STREAM_END&&(t=s.Z_FINISH),t===s.Z_FINISH?(e=o.inflateEnd(this.strm),this.onEnd(e),this.ended=!0,e===s.Z_OK):(t===s.Z_SYNC_FLUSH&&(this.onEnd(s.Z_OK),n.avail_out=0),!0)},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===s.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=d,n.inflate=r,n.inflateRaw=function(e,t){return(t=t||{}).raw=!0,r(e,t)},n.ungzip=r},{"./utils/common":1,"./utils/strings":2,"./zlib/constants":4,"./zlib/gzheader":6,"./zlib/inflate.js":8,"./zlib/messages":10,"./zlib/zstream":11}]},{},[])("/lib/inflate.js");var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:void 0!==global&&null!=global?global:e},$jscomp.global=$jscomp.getGlobal(this),$jscomp.SYMBOL_PREFIX="jscomp_symbol_",$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){},$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)},$jscomp.symbolCounter_=0,$jscomp.Symbol=function(e){return $jscomp.SYMBOL_PREFIX+(e||"")+$jscomp.symbolCounter_++},$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var e=$jscomp.global.Symbol.iterator;e||(e=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator")),"function"!=typeof Array.prototype[e]&&$jscomp.defineProperty(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}}),$jscomp.initSymbolIterator=function(){}},$jscomp.arrayIterator=function(e){var t=0;return $jscomp.iteratorPrototype(function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}})},$jscomp.iteratorPrototype=function(e){return $jscomp.initSymbolIterator(),(e={next:e})[$jscomp.global.Symbol.iterator]=function(){return this},e},$jscomp.makeIterator=function(e){$jscomp.initSymbolIterator();var t=e[Symbol.iterator];return t?t.call(e):$jscomp.arrayIterator(e)},$jscomp.polyfill=function(e,t,n,r){if(t){for(n=$jscomp.global,e=e.split("."),r=0;r<e.length-1;r++){var o=e[r];o in n||(n[o]={}),n=n[o]}(t=t(r=n[e=e[e.length-1]]))!=r&&null!=t&&$jscomp.defineProperty(n,e,{configurable:!0,writable:!0,value:t})}},$jscomp.FORCE_POLYFILL_PROMISE=!1,$jscomp.polyfill("Promise",function(e){function t(){this.batch_=null}function n(e){return e instanceof o?e:new o(function(t,n){t(e)})}if(e&&!$jscomp.FORCE_POLYFILL_PROMISE)return e;t.prototype.asyncExecute=function(e){return null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_()),this.batch_.push(e),this},t.prototype.asyncExecuteBatch_=function(){var e=this;this.asyncExecuteFunction(function(){e.executeBatch_()})};var r=$jscomp.global.setTimeout;t.prototype.asyncExecuteFunction=function(e){r(e,0)},t.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var e=this.batch_;this.batch_=[];for(var t=0;t<e.length;++t){var n=e[t];delete e[t];try{n()}catch(e){this.asyncThrow_(e)}}}this.batch_=null},t.prototype.asyncThrow_=function(e){this.asyncExecuteFunction(function(){throw e})};var o=function(e){this.state_=0,this.result_=void 0,this.onSettledCallbacks_=[];var t=this.createResolveAndReject_();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}};o.prototype.createResolveAndReject_=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.resolveTo_),reject:e(this.reject_)}},o.prototype.resolveTo_=function(e){if(e===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof o)this.settleSameAsPromise_(e);else{e:switch(typeof e){case"object":var t=null!=e;break e;case"function":t=!0;break e;default:t=!1}t?this.resolveToNonPromiseObj_(e):this.fulfill_(e)}},o.prototype.resolveToNonPromiseObj_=function(e){var t=void 0;try{t=e.then}catch(e){return void this.reject_(e)}"function"==typeof t?this.settleSameAsThenable_(t,e):this.fulfill_(e)},o.prototype.reject_=function(e){this.settle_(2,e)},o.prototype.fulfill_=function(e){this.settle_(1,e)},o.prototype.settle_=function(e,t){if(0!=this.state_)throw Error("Cannot settle("+e+", "+t|"): Promise already settled in state"+this.state_);this.state_=e,this.result_=t,this.executeOnSettledCallbacks_()},o.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var e=this.onSettledCallbacks_,t=0;t<e.length;++t)e[t].call(),e[t]=null;this.onSettledCallbacks_=null}};var i=new t;return o.prototype.settleSameAsPromise_=function(e){var t=this.createResolveAndReject_();e.callWhenSettled_(t.resolve,t.reject)},o.prototype.settleSameAsThenable_=function(e,t){var n=this.createResolveAndReject_();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},o.prototype.then=function(e,t){function n(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(e){i(e)}}:t}var r,i,a=new o(function(e,t){r=e,i=t});return this.callWhenSettled_(n(e,r),n(t,i)),a},o.prototype.catch=function(e){return this.then(void 0,e)},o.prototype.callWhenSettled_=function(e,t){function n(){switch(r.state_){case 1:e(r.result_);break;case 2:t(r.result_);break;default:throw Error("Unexpected state: "+r.state_)}}var r=this;null==this.onSettledCallbacks_?i.asyncExecute(n):this.onSettledCallbacks_.push(function(){i.asyncExecute(n)})},o.resolve=n,o.reject=function(e){return new o(function(t,n){n(e)})},o.race=function(e){return new o(function(t,r){for(var o=$jscomp.makeIterator(e),i=o.next();!i.done;i=o.next())n(i.value).callWhenSettled_(t,r)})},o.all=function(e){var t=$jscomp.makeIterator(e),r=t.next();return r.done?n([]):new o(function(e,o){function i(t){return function(n){a[t]=n,0==--s&&e(a)}}var a=[],s=0;do{a.push(void 0),s++,n(r.value).callWhenSettled_(i(a.length-1),o),r=t.next()}while(!r.done)})},o},"es6","es3"),$jscomp.checkStringArgs=function(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""},$jscomp.polyfill("String.prototype.repeat",function(e){return e||function(e){var t=$jscomp.checkStringArgs(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var n="";e;)1&e&&(n+=t),(e>>>=1)&&(t+=t);return n}},"es6","es3"),$jscomp.polyfill("String.prototype.startsWith",function(e){return e||function(e,t){var n=$jscomp.checkStringArgs(this,e,"startsWith");e+="";var r=n.length,o=e.length;t=Math.max(0,Math.min(0|t,n.length));for(var i=0;i<o&&t<r;)if(n[t++]!=e[i++])return!1;return i>=o}},"es6","es3"),$jscomp.polyfill("String.prototype.endsWith",function(e){return e||function(e,t){var n=$jscomp.checkStringArgs(this,e,"endsWith");e+="",void 0===t&&(t=n.length),t=Math.max(0,Math.min(0|t,n.length));for(var r=e.length;0<r&&0<t;)if(n[--t]!=e[--r])return!1;return 0>=r}},"es6","es3"),$jscomp.polyfill("Array.prototype.fill",function(e){return e||function(e,t,n){var r=this.length||0;for(0>t&&(t=Math.max(0,r+t)),(null==n||n>r)&&(n=r),0>(n=Number(n))&&(n=Math.max(0,r+n)),t=Number(t||0);t<n;t++)this[t]=e;return this}},"es6","es3"),$jscomp.iteratorFromArray=function(e,t){$jscomp.initSymbolIterator(),e instanceof String&&(e+="");var n=0,r={next:function(){if(n<e.length){var o=n++;return{value:t(o,e[o]),done:!1}}return r.next=function(){return{done:!0,value:void 0}},r.next()}};return r[Symbol.iterator]=function(){return r},r},$jscomp.polyfill("Array.prototype.keys",function(e){return e||function(){return $jscomp.iteratorFromArray(this,function(e){return e})}},"es6","es3"),$jscomp.polyfill("Object.is",function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},"es6","es3"),$jscomp.polyfill("Array.prototype.includes",function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var r=n.length;for(t=t||0;t<r;t++)if(n[t]==e||Object.is(n[t],e))return!0;return!1}},"es7","es3"),$jscomp.polyfill("String.prototype.includes",function(e){return e||function(e,t){return-1!==$jscomp.checkStringArgs(this,e,"includes").indexOf(e,t||0)}},"es6","es3"),$jscomp.polyfill("Number.isFinite",function(e){return e||function(e){return"number"==typeof e&&(!isNaN(e)&&1/0!==e&&-1/0!==e)}},"es6","es3"),$jscomp.polyfill("Number.isInteger",function(e){return e||function(e){return!!Number.isFinite(e)&&e===Math.floor(e)}},"es6","es3"),$3Dmol=window.$3Dmol||{},"object"==typeof module.exports&&(module.exports=$3Dmol),$3Dmol.notrack||$.get("https://3dmol.csb.pitt.edu/track/report.cgi"),String.prototype.startsWith||(String.prototype.startsWith=function(e){return 0===this.lastIndexOf(e,0)}),String.prototype.endsWith||(String.prototype.endsWith=function(e){return-1!==this.indexOf(e,this.length-e.length)}),$.ajaxTransport("+binary",function(e,t,n){if(window.FormData&&(e.dataType&&"binary"==e.dataType||e.data&&(window.ArrayBuffer&&e.data instanceof ArrayBuffer||window.Blob&&e.data instanceof Blob)))return{send:function(t,n){var r=new XMLHttpRequest,o=e.url,i=e.type,a=e.async||!0,s=e.responseType||"blob",l=e.data||null,u=e.username||null,c=e.password||null,p=function(){var t={};t[e.dataType]=r.response,n(r.status,r.statusText,t,r.getAllResponseHeaders())};for(var d in r.addEventListener("load",p),r.addEventListener("error",p),r.addEventListener("abort",p),r.open(i,o,a,u,c),t)r.setRequestHeader(d,t[d]);r.responseType=s,r.send(l)},abort:function(){n.abort()}}}),$3Dmol.createViewer=function(e,t){if("string"===$.type(e)&&(e=$("#"+e)),e){t=t||{};try{return new $3Dmol.GLViewer(e,t)}catch(e){throw"error creating viewer: "+e}}},$3Dmol.createViewerGrid=function(e,t,n){if("string"===$.type(e)&&(e=$("#"+e)),e){t=t||{},n=n||{};var r=[],o=document.createElement("canvas");n.rows=t.rows,n.cols=t.cols,n.control_all=null!=t.control_all&&t.control_all,$(e).append($(o));try{for(var i=0;i<t.rows;i++){for(var a=[],s=0;s<t.cols;s++){n.row=i,n.col=s,n.canvas=o,n.viewers=r,n.control_all=t.control_all;var l=$3Dmol.createViewer(e,n);a.push(l)}r.unshift(a)}}catch(e){throw"error creating viewer grid: "+e}return r}},$3Dmol.viewers={},$3Dmol.getbin=function(e,t,n,r){var o=new Promise(function(t,o){n=null==n?"GET":n,$.ajax({url:e,dataType:"binary",method:n,data:r,responseType:"arraybuffer",processData:!1}).done(function(e,n,r){t(e)}).fail(function(e,t){console.log(t),o()})});return t?o.then(t):o},$3Dmol.base64ToArray=function(e){for(var t=(e=window.atob(e)).length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=e.charCodeAt(r);return n},$3Dmol.download=function(e,t,n,r){var o="",i="";i="";var a=t.addModel();if("mmtf:"===e.substr(0,5)){var s=(i=n&&n.pdbUri?n.pdbUri:"https://mmtf.rcsb.org/v1.0/full/")+(e=e.substr(5).toUpperCase());n&&void 0===n.noComputeSecondaryStructure&&(n.noComputeSecondaryStructure=!0),e=new Promise(function(e,r){$3Dmol.getbin(s).then(function(r){a.addMolData(r,"mmtf",n),t.zoomTo(),t.render(),e(a)})})}else{if("pdb:"===e.substr(0,4)){if(o="mmtf",n&&n.format&&(o=n.format),n&&void 0===n.noComputeSecondaryStructure&&(n.noComputeSecondaryStructure=!0),!(e=e.substr(4).toUpperCase()).match(/^[1-9][A-Za-z0-9]{3}$/))return void alert("Wrong PDB ID");"mmtf"==o?(i=n&&n.mmtfUri?n.mmtfUri:"https://mmtf.rcsb.org/v1.0/full/",s=i+e.toUpperCase()):(i=n&&n.pdbUri?n.pdbUri:"https://files.rcsb.org/view/",s=i+e+"."+o)}else if("cid:"==e.substr(0,4)){if(o="sdf",!(e=e.substr(4)).match(/^[0-9]+$/))return void alert("Wrong Compound ID");s="https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+e+"/SDF?record_type=3d"}else"url:"==e.substr(0,4)&&(o=s=e.substr(4));var l=function(e){a.addMolData(e,o,n),t.zoomTo(),t.render()};e=new Promise(function(e,t){"mmtf"==o?$3Dmol.getbin(s).then(function(t){l(t),e(a)}):$.get(s,function(t){l(t),e(a)}).fail(function(e){console.log("fetch of "+s+" failed: "+e.statusText)})})}return r?(e.then(function(e){r(e)}),a):e},$3Dmol.SurfaceType={VDW:1,MS:2,SAS:3,SES:4},$3Dmol.mergeGeos=function(e,t){void 0!==(t=t.geometry)&&e.geometryGroups.push(t.geometryGroups[0])},$3Dmol.multiLineString=function(e){return e.toString().replace(/^[^\/]+\/\*!?/,"").replace(/\*\/[^\/]+$/,"")},$3Dmol.syncSurface=!1,(0<=window.navigator.userAgent.indexOf("MSIE ")||0<=window.navigator.userAgent.indexOf("Trident/"))&&($3Dmol.syncSurface=!0),$3Dmol.specStringToObject=function(e){if("object"==typeof e||void 0===e||null==e)return e;var t=function(e){return $.isNumeric(e)?Math.floor(parseFloat(e))==parseInt(e)?parseFloat(e):0<=e.indexOf(".")?parseFloat(e):parseInt(e):"true"===e||"false"!==e&&e},n={};if("all"===(e=e.replace(/%7E/,"~")))return n;e=e.split(";");for(var r=0;r<e.length;r++){var o=e[r].split(":"),i=o[0],a={};if(o=o[1])if(-1!==(o=o.replace(/~/g,"=")).indexOf("=")){o=o.split(",");for(var s=0;s<o.length;s++){var l=o[s].split("=",2);a[l[0]]=t(l[1])}}else a=-1!==o.indexOf(",")?o.split(","):t(o);n[i]=a}return n},$3Dmol.getExtent=function(e,t){var n,r,o,i,a,s,l,u=!t;t=n=r=9999;var c=o=i=-9999,p=a=s=l=0;if(0===e.length)return[[0,0,0],[0,0,0],[0,0,0]];for(var d=0;d<e.length;d++){var f=e[d];if(void 0!==f&&isFinite(f.x)&&isFinite(f.y)&&isFinite(f.z)&&(l++,p+=f.x,a+=f.y,s+=f.z,t=t<f.x?t:f.x,n=n<f.y?n:f.y,r=r<f.z?r:f.z,c=c>f.x?c:f.x,o=o>f.y?o:f.y,i=i>f.z?i:f.z,f.symmetries&&u))for(var h=0;h<f.symmetries.length;h++)l++,p+=f.symmetries[h].x,a+=f.symmetries[h].y,s+=f.symmetries[h].z,t=t<f.symmetries[h].x?t:f.symmetries[h].x,n=n<f.symmetries[h].y?n:f.symmetries[h].y,r=r<f.symmetries[h].z?r:f.symmetries[h].z,c=c>f.symmetries[h].x?c:f.symmetries[h].x,o=o>f.symmetries[h].y?o:f.symmetries[h].y,i=i>f.symmetries[h].z?i:f.symmetries[h].z}return[[t,n,r],[c,o,i],[p/l,a/l,s/l]]},$3Dmol.getAtomProperty=function(e,t){var n=null;return e.properties&&void 0!==e.properties[t]?n=e.properties[t]:void 0!==e[t]&&(n=e[t]),n},$3Dmol.getPropertyRange=function(e,t){for(var n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,o=0,i=e.length;o<i;o++){var a=$3Dmol.getAtomProperty(e[o],t);null!=a&&(a<n&&(n=a),a>r&&(r=a))}return isFinite(n)||isFinite(r)?isFinite(n)?isFinite(r)||(r=n):n=r:n=r=0,[n,r]},__WEBPACK_AMD_DEFINE_FACTORY__=$3Dmol,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__,void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__),$3Dmol.createStereoViewer=function(e){var t=this;if("string"===$.type(e)&&(e=$("#"+e)),e){e=$3Dmol.createViewerGrid(e,{rows:1,cols:2,control_all:!0}),this.glviewer1=e[0][0],this.glviewer2=e[0][1],this.glviewer1.setAutoEyeSeparation(!1),this.glviewer2.setAutoEyeSeparation(!0),this.glviewer1.linkViewer(this.glviewer2),this.glviewer2.linkViewer(this.glviewer1),e=Object.getOwnPropertyNames(this.glviewer1).filter(function(e){return"function"==typeof t.glviewer1[e]});for(var n=0;n<e.length;n++)this[e[n]]=function(e){return function(){return[this.glviewer1[e].apply(this.glviewer1,arguments),this.glviewer2[e].apply(this.glviewer2,arguments)]}}(e[n]);this.setCoordinates=function(e,t,n){for(var r=0;r<e.length;r++)e[r].setCoordinates(t,n)},this.surfacesFinished=function(){return this.glviewer1.surfacesFinished()&&this.glviewer2.surfacesFinished()},this.isAnimated=function(){return this.glviewer1.isAnimated()||this.glviewer2.isAnimated()},this.render=function(e){this.glviewer1.render(),this.glviewer2.render(),e&&e(this)},this.getCanvas=function(){return this.glviewer1.getCanvas()}}};var $3Dmol=$3Dmol||{},b,c;$3Dmol.Math={clamp:function(e,t,n){return Math.min(Math.max(e,t),n)},degToRad:(b=Math.PI/180,function(e){return e*b})},$3Dmol.Quaternion=function(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1},$3Dmol.Quaternion.prototype={constructor:$3Dmol.Quaternion,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this},conjugate:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this},inverse:function(){return this.conjugate().normalize()},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},normalize:function(){var e=this.length();return 0===e?(this.z=this.y=this.x=0,this.w=1):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this},multiply:function(e){return this.multiplyQuaternions(this,e)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},multiplyQuaternions:function(e,t){var n=e.x,r=e.y,o=e.z;e=e.w;var i=t.x,a=t.y,s=t.z;return t=t.w,this.x=n*t+e*i+r*s-o*a,this.y=r*t+e*a+o*i-n*s,this.z=o*t+e*s+n*a-r*i,this.w=e*t-n*i-r*a-o*s,this},sub:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this},clone:function(){return new $3Dmol.Quaternion(this.x,this.y,this.z,this.w)},setFromEuler:function(e){var t=Math.cos(e.x/2),n=Math.cos(e.y/2),r=Math.cos(e.z/2),o=Math.sin(e.x/2),i=Math.sin(e.y/2);return e=Math.sin(e.z/2),this.x=o*n*r+t*i*e,this.y=t*i*r-o*n*e,this.z=t*n*e+o*i*r,this.w=t*n*r-o*i*e,this}},$3Dmol.Vector2=function(e,t){this.x=e||0,this.y=t||0},$3Dmol.Vector2.prototype={constructor:$3Dmol.Vector2,set:function(e,t){return this.x=e,this.y=t,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},copy:function(e){return this.x=e.x,this.y=e.y,this},clone:function(){return new $3Dmol.Vector2(this.x,this.y)}},$3Dmol.Vector3=function(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0},$3Dmol.Vector3.prototype={constructor:$3Dmol.Vector3,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},sub:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},divideScalar:function(e){return 0!==e?(this.x/=e,this.y/=e,this.z/=e):this.z=this.y=this.x=0,this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n+(e=this.z-e.z)*e},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z;return e=e.elements,this.x=e[0]*t+e[4]*n+e[8]*r+e[12],this.y=e[1]*t+e[5]*n+e[9]*r+e[13],this.z=e[2]*t+e[6]*n+e[10]*r+e[14],this},applyProjection:function(e){var t=this.x,n=this.y,r=this.z,o=(e=e.elements)[3]*t+e[7]*n+e[11]*r+e[15];return this.x=(e[0]*t+e[4]*n+e[8]*r+e[12])/o,this.y=(e[1]*t+e[5]*n+e[9]*r+e[13])/o,this.z=(e[2]*t+e[6]*n+e[10]*r+e[14])/o,this},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,o=e.x,i=e.y,a=e.z,s=2*(n*a-r*i),l=2*(r*o-t*a),u=2*(t*i-n*o);return this.x=t+e.w*s+(l*a-u*i),this.y=n+e.w*l+(u*o-s*a),this.z=r+e.w*u+(s*i-l*o),this},negate:function(){return this.multiplyScalar(-1)},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},normalize:function(){return this.divideScalar(this.length())},cross:function(e){var t=this.x,n=this.y,r=this.z;return this.x=n*e.z-r*e.y,this.y=r*e.x-t*e.z,this.z=t*e.y-n*e.x,this},crossVectors:function(e,t){return this.x=e.y*t.z-e.z*t.y,this.y=e.z*t.x-e.x*t.z,this.z=e.x*t.y-e.y*t.x,this},getPositionFromMatrix:function(e){return this.x=e.elements[12],this.y=e.elements[13],this.z=e.elements[14],this},setEulerFromRotationMatrix:function(e,t){var n=e.elements;e=n[0];var r=n[4],o=n[8],i=n[5],a=n[9],s=n[6];return n=n[10],void 0===t||"XYZ"===t?(this.y=Math.asin($3Dmol.Math.clamp(o,-1,1)),.99999>Math.abs(o)?(this.x=Math.atan2(-a,n),this.z=Math.atan2(-r,e)):(this.x=Math.atan2(s,i),this.z=0)):console.error("Error with vector's setEulerFromRotationMatrix: Unknown order: "+t),this},rotateAboutVector:function(e,t){e.normalize();var n=Math.cos(t),r=Math.sin(t);return t=this.clone().multiplyScalar(n),r=e.clone().cross(this).multiplyScalar(r),e=e.clone().multiplyScalar(e.clone().dot(this)).multiplyScalar(1-n),e=t.add(r).add(e),this.x=e.x,this.y=e.y,this.z=e.z,this},setFromMatrixPosition:function(e){return e=e.elements,this.x=e[12],this.y=e[13],this.z=e[14],this},transformDirection:function(e){var t=this.x,n=this.y,r=this.z;return e=e.elements,this.x=e[0]*t+e[4]*n+e[8]*r,this.y=e[1]*t+e[5]*n+e[9]*r,this.z=e[2]*t+e[6]*n+e[10]*r,this.normalize()},clone:function(){return new $3Dmol.Vector3(this.x,this.y,this.z)}},$3Dmol.Matrix3=function(e,t,n,r,o,i,a,s,l){this.elements=new Float32Array(9),this.set(void 0!==e?e:1,t||0,n||0,r||0,void 0!==o?o:1,i||0,a||0,s||0,void 0!==l?l:1)},$3Dmol.Matrix3.prototype={constructor:$3Dmol.Matrix3,set:function(e,t,n,r,o,i,a,s,l){var u=this.elements;return u[0]=e,u[3]=t,u[6]=n,u[1]=r,u[4]=o,u[7]=i,u[2]=a,u[5]=s,u[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},copy:function(e){e=e.elements,this.set(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8])},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},getInverse:function(e,t){e=e.elements;var n=this.elements;if(n[0]=e[10]*e[5]-e[6]*e[9],n[1]=-e[10]*e[1]+e[2]*e[9],n[2]=e[6]*e[1]-e[2]*e[5],n[3]=-e[10]*e[4]+e[6]*e[8],n[4]=e[10]*e[0]-e[2]*e[8],n[5]=-e[6]*e[0]+e[2]*e[4],n[6]=e[9]*e[4]-e[5]*e[8],n[7]=-e[9]*e[0]+e[1]*e[8],n[8]=e[5]*e[0]-e[1]*e[4],0===(e=e[0]*n[0]+e[1]*n[3]+e[2]*n[6])){if(t)throw Error("Matrix3.getInverse(): can't invert matrix, determinant is 0");return console.warn("Matrix3.getInverse(): can't invert matrix, determinant is 0"),this.identity(),this}return this.multiplyScalar(1/e),this},getDeterminant:function(){var e=this.elements;return e[0]*e[4]*e[8]+e[1]*e[5]*e[6]+e[2]*e[3]*e[7]-e[2]*e[4]*e[6]-e[1]*e[3]*e[8]-e[0]*e[5]*e[7]},transpose:function(){var e=this.elements,t=e[1];return e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},clone:function(){var e=this.elements;return new $3Dmol.Matrix3(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8])}},$3Dmol.Matrix4=function(e,t,n,r,o,i,a,s,l,u,c,p,d,f,h,m){if(void 0===t&&void 0!==e)this.elements=new Float32Array(e);else{var y=this.elements=new Float32Array(16);y[0]=void 0!==e?e:1,y[4]=t||0,y[8]=n||0,y[12]=r||0,y[1]=o||0,y[5]=void 0!==i?i:1,y[9]=a||0,y[13]=s||0,y[2]=l||0,y[6]=u||0,y[10]=void 0!==c?c:1,y[14]=p||0,y[3]=d||0,y[7]=f||0,y[11]=h||0,y[15]=void 0!==m?m:1}},$3Dmol.Matrix4.prototype={constructor:$3Dmol.Matrix4,set:function(e,t,n,r,o,i,a,s,l,u,c,p,d,f,h,m){var y=this.elements;return y[0]=e,y[4]=t,y[8]=n,y[12]=r,y[1]=o,y[5]=i,y[9]=a,y[13]=s,y[2]=l,y[6]=u,y[10]=c,y[14]=p,y[3]=d,y[7]=f,y[11]=h,y[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},copy:function(e){return e=e.elements,this.set(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15]),this},matrix3FromTopLeft:function(){var e=this.elements;return new $3Dmol.Matrix3(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10])},setRotationFromEuler:function(e,t){var n=this.elements,r=e.x,o=e.y,i=e.z;e=Math.cos(r),r=Math.sin(r);var a=Math.cos(o);o=Math.sin(o);var s=Math.cos(i);if(i=Math.sin(i),void 0===t||"XYZ"===t){t=e*s;var l=e*i,u=r*s,c=r*i;n[0]=a*s,n[4]=-a*i,n[8]=o,n[1]=l+u*o,n[5]=t-c*o,n[9]=-r*a,n[2]=c-t*o,n[6]=u+l*o,n[10]=e*a}else console.error("Error with matrix4 setRotationFromEuler. Order: "+t);return this},setRotationFromQuaternion:function(e){var t=this.elements,n=e.x,r=e.y,o=e.z,i=e.w,a=n+n,s=r+r,l=o+o;e=n*a;var u=n*s;n*=l;var c=r*s;return r*=l,o*=l,a*=i,s*=i,i*=l,t[0]=1-(c+o),t[4]=u-i,t[8]=n+s,t[1]=u+i,t[5]=1-(e+o),t[9]=r-a,t[2]=n-s,t[6]=r+a,t[10]=1-(e+c),this},lookAt:function(){var e=new $3Dmol.Vector3,t=new $3Dmol.Vector3,n=new $3Dmol.Vector3;return function(r,o,i){var a=this.elements;return n.subVectors(r,o).normalize(),0===n.length()&&(n.z=1),e.crossVectors(i,n).normalize(),0===e.length()&&(n.x+=1e-4,e.crossVectors(i,n).normalize()),t.crossVectors(n,e),a[0]=e.x,a[4]=t.x,a[8]=n.x,a[1]=e.y,a[5]=t.y,a[9]=n.y,a[2]=e.z,a[6]=t.z,a[10]=n.z,this}}(),multiplyMatrices:function(e,t){var n=e.elements,r=t.elements;t=this.elements,e=n[0];var o=n[4],i=n[8],a=n[12],s=n[1],l=n[5],u=n[9],c=n[13],p=n[2],d=n[6],f=n[10],h=n[14],m=n[3],y=n[7],g=n[11];n=n[15];var v=r[0],b=r[4],S=r[8],_=r[12],w=r[1],E=r[5],O=r[9],C=r[13],P=r[2],x=r[6],T=r[10],k=r[14],A=r[3],I=r[7],D=r[11];return r=r[15],t[0]=e*v+o*w+i*P+a*A,t[4]=e*b+o*E+i*x+a*I,t[8]=e*S+o*O+i*T+a*D,t[12]=e*_+o*C+i*k+a*r,t[1]=s*v+l*w+u*P+c*A,t[5]=s*b+l*E+u*x+c*I,t[9]=s*S+l*O+u*T+c*D,t[13]=s*_+l*C+u*k+c*r,t[2]=p*v+d*w+f*P+h*A,t[6]=p*b+d*E+f*x+h*I,t[10]=p*S+d*O+f*T+h*D,t[14]=p*_+d*C+f*k+h*r,t[3]=m*v+y*w+g*P+n*A,t[7]=m*b+y*E+g*x+n*I,t[11]=m*S+y*O+g*T+n*D,t[15]=m*_+y*C+g*k+n*r,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},transpose:function(){var e=this.elements,t=e[1];return e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},getPosition:function(){var e=new $3Dmol.Vector3;return function(){console.warn("DEPRECATED: Matrix4's .getPosition() has been removed. Use Vector3.getPositionFromMatrix( matrix ) instead.");var t=this.elements;return e.set(t[12],t[13],t[14])}}(),setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,r=(e=e.elements)[0],o=e[4],i=e[8],a=e[12],s=e[1],l=e[5],u=e[9],c=e[13],p=e[2],d=e[6],f=e[10],h=e[14],m=e[3],y=e[7],g=e[11],v=e[15];if(n[0]=u*h*y-c*f*y+c*d*g-l*h*g-u*d*v+l*f*v,n[4]=a*f*y-i*h*y-a*d*g+o*h*g+i*d*v-o*f*v,n[8]=i*c*y-a*u*y+a*l*g-o*c*g-i*l*v+o*u*v,n[12]=a*u*d-i*c*d-a*l*f+o*c*f+i*l*h-o*u*h,n[1]=c*f*m-u*h*m-c*p*g+s*h*g+u*p*v-s*f*v,n[5]=i*h*m-a*f*m+a*p*g-r*h*g-i*p*v+r*f*v,n[9]=a*u*m-i*c*m-a*s*g+r*c*g+i*s*v-r*u*v,n[13]=i*c*p-a*u*p+a*s*f-r*c*f-i*s*h+r*u*h,n[2]=l*h*m-c*d*m+c*p*y-s*h*y-l*p*v+s*d*v,n[6]=a*d*m-o*h*m-a*p*y+r*h*y+o*p*v-r*d*v,n[10]=o*c*m-a*l*m+a*s*y-r*c*y-o*s*v+r*l*v,n[14]=a*l*p-o*c*p-a*s*d+r*c*d+o*s*h-r*l*h,n[3]=u*d*m-l*f*m-u*p*y+s*f*y+l*p*g-s*d*g,n[7]=o*f*m-i*d*m+i*p*y-r*f*y-o*p*g+r*d*g,n[11]=i*l*m-o*u*m-i*s*y+r*u*y+o*s*g-r*l*g,n[15]=o*u*p-i*l*p+i*s*d-r*u*d-o*s*f+r*l*f,0===(n=e[0]*n[0]+e[1]*n[4]+e[2]*n[8]+e[3]*n[12])){if(t)throw Error("Matrix4.getInverse(): can't invert matrix, determinant is 0");return console.warn("Matrix4.getInverse(): can't invert matrix, determinant is 0"),this.identity(),this}return this.multiplyScalar(1/n),this},isReflected:function(){return 0>this.matrix3FromTopLeft().getDeterminant()},compose:function(){var e=new $3Dmol.Matrix4,t=new $3Dmol.Matrix4;return function(n,r,o){var i=this.elements;return e.identity(),e.setRotationFromQuaternion(r),t.makeScale(o.x,o.y,o.z),this.multiplyMatrices(e,t),i[12]=n.x,i[13]=n.y,i[14]=n.z,this}}(),decompose:function(){var e=new $3Dmol.Vector3,t=new $3Dmol.Vector3,n=new $3Dmol.Vector3,r=new $3Dmol.Matrix4;return function(o,i,a){var s=this.elements;return e.set(s[0],s[1],s[2]),t.set(s[4],s[5],s[6]),n.set(s[8],s[9],s[10]),o=o instanceof $3Dmol.Vector3?o:new $3Dmol.Vector3,i=i instanceof $3Dmol.Quaternion?i:new $3Dmol.Quaternion,(a=a instanceof $3Dmol.Vector3?a:new $3Dmol.Vector3).x=e.length(),a.y=t.length(),a.z=n.length(),o.x=s[12],o.y=s[13],o.z=s[14],r.copy(this),r.elements[0]/=a.x,r.elements[1]/=a.x,r.elements[2]/=a.x,r.elements[4]/=a.y,r.elements[5]/=a.y,r.elements[6]/=a.y,r.elements[8]/=a.z,r.elements[9]/=a.z,r.elements[10]/=a.z,i.setFromRotationMatrix(r),[o,i,a]}}(),scale:function(e){var t=this.elements,n=e.x,r=e.y;return e=e.z,t[0]*=n,t[4]*=r,t[8]*=e,t[1]*=n,t[5]*=r,t[9]*=e,t[2]*=n,t[6]*=r,t[10]*=e,t[3]*=n,t[7]*=r,t[11]*=e,this},getMaxScaleOnAxis:function(){var e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],Math.max(e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10])))},makeFrustum:function(e,t,n,r,o,i){var a=this.elements;return a[0]=2*o/(t-e),a[4]=0,a[8]=(t+e)/(t-e),a[12]=0,a[1]=0,a[5]=2*o/(r-n),a[9]=(r+n)/(r-n),a[13]=0,a[2]=0,a[6]=0,a[10]=-(i+o)/(i-o),a[14]=-2*i*o/(i-o),a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makePerspective:function(e,t,n,r){var o=-(e=n*Math.tan($3Dmol.Math.degToRad(.5*e)));return this.makeFrustum(o*t,e*t,o,e,n,r)},makeOrthographic:function(e,t,n,r,o,i){var a=this.elements,s=1/(t-e),l=1/(n-r),u=1/(i-o);return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-(t+e)*s,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-(n+r)*l,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-(i+o)*u,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},isEqual:function(e){e=e.elements;var t=this.elements;return t[0]==e[0]&&t[4]==e[4]&&t[8]==e[8]&&t[12]==e[12]&&t[1]==e[1]&&t[5]==e[5]&&t[9]==e[9]&&t[13]==e[13]&&t[2]==e[2]&&t[6]==e[6]&&t[10]==e[10]&&t[14]==e[14]&&t[3]==e[3]&&t[7]==e[7]&&t[11]==e[11]&&t[15]==e[15]},clone:function(){var e=this.elements;return new $3Dmol.Matrix4(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15])},isIdentity:function(){var e=this.elements;return 1==e[0]&&0==e[4]&&0==e[8]&&0==e[12]&&0==e[1]&&1==e[5]&&0==e[9]&&0==e[13]&&0==e[2]&&0==e[6]&&1==e[10]&&0==e[14]&&0==e[3]&&0==e[7]&&0==e[11]&&1==e[15]}},$3Dmol.Vector3.prototype.unproject=function(){var e=new $3Dmol.Matrix4;return function(t){return e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyMatrix4(e)}}(),$3Dmol.Ray=function(e,t){this.origin=void 0!==e?e:new $3Dmol.Vector3,this.direction=void 0!==t?t:new $3Dmol.Vector3},$3Dmol.Ray.prototype={constructor:$3Dmol.Ray,set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return(t||new $3Dmol.Vector3).copy(this.direction).multiplyScalar(e).add(this.origin)},recast:function(){var e=new $3Dmol.Vector3;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){return(t=t||new $3Dmol.Vector3).subVectors(e,this.origin),e=t.dot(this.direction),t.copy(this.direction).multiplyScalar(e).add(this.origin)},distanceToPoint:(c=new $3Dmol.Vector3,function(e){var t=c.subVectors(e,this.origin).dot(this.direction);return c.copy(this.direction).multiplyScalar(t).add(this.origin),c.distanceTo(e)}),isIntersectionCylinder:function(){},isIntersectionSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},isIntersectionPlane:function(e){return 0!==e.normal.dot(this.direction)||0===e.distanceToPoint(this.origin)},distanceToPlane:function(e){var t=e.normal.dot(this.direction);return 0!==t?-(this.origin.dot(e.normal)+e.constant)/t:0===e.distanceToPoint(this.origin)?0:void 0},intersectPlane:function(e,t){if(void 0!==(e=this.distanceToPlane(e)))return this.at(e,t)},applyMatrix4:function(e){return this.direction.add(this.origin).applyMatrix4(e),this.origin.applyMatrix4(e),this.direction.sub(this.origin),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)},clone:function(){return(new $3Dmol.Ray).copy(this)}},$3Dmol.Sphere=function(e,t){this.center=void 0!==e?e:new $3Dmol.Vector3,this.radius=void 0!==t?t:0},$3Dmol.Sphere.prototype={constructor:$3Dmol.Sphere,set:function(e,t){return this.center.copy(e),this.radius=t,this},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius*=e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius},clone:function(){return(new $3Dmol.Sphere).copy(this)}},$3Dmol.Cylinder=function(e,t,n){this.c1=void 0!==e?e:new $3Dmol.Vector3,this.c2=void 0!==t?t:new $3Dmol.Vector3,this.direction=(new $3Dmol.Vector3).subVectors(this.c2,this.c1).normalize(),this.radius=void 0!==n?n:0},$3Dmol.Cylinder.prototype={constructor:$3Dmol.Cylinder,copy:function(e){return this.c1.copy(e.c1),this.c2.copy(e.c2),this.direction.copy(e.direction),this.radius=e.radius,this},lengthSq:function(){var e=new $3Dmol.Vector3;return function(){return e.subVectors(this.c2,this.c1).lengthSq()}}(),applyMatrix4:function(e){return this.direction.add(this.c1).applyMatrix4(e),this.c1.applyMatrix4(e),this.c2.applyMatrix4(e),this.direction.sub(this.c1).normalize(),this.radius*=e.getMaxScaleOnAxis(),this}},$3Dmol.Triangle=function(e,t,n){this.a=void 0!==e?e:new $3Dmol.Vector3,this.b=void 0!==t?t:new $3Dmol.Vector3,this.c=void 0!==n?n:new $3Dmol.Vector3},$3Dmol.Triangle.prototype={constructor:$3Dmol.Triangle,copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},applyMatrix4:function(e){return this.a.applyMatrix4(e),this.b.applyMatrix4(e),this.c.applyMatrix4(e),this},getNormal:function(){var e=new $3Dmol.Vector3;return function(){var t=this.a.clone();return t.sub(this.b),e.subVectors(this.c,this.b),t.cross(e),t.normalize(),t}}()},$3Dmol.EventDispatcher=function(){var e={};this.addEventListener=function(t,n){void 0===e[t]&&(e[t]=[]),-1===e[t].indexOf(n)&&e[t].push(n)},this.removeEventListener=function(t,n){-1!==(n=e[t].indexOf(n))&&e[t].splice(n,1)},this.dispatchEvent=function(t){var n=e[t.type];if(void 0!==n){t.target=this;for(var r=0,o=n.length;r<o;r++)n[r].call(this,t)}}},$3Dmol.Color=function(e){return 1<arguments.length?(this.r=arguments[0]||0,this.g=arguments[1]||0,this.b=arguments[2]||0,this):this.set(e)},$3Dmol.Color.prototype={constructor:$3Dmol.Color,r:0,g:0,b:0,set:function(e){if(e instanceof $3Dmol.Color)return e.clone();"number"==typeof e?this.setHex(e):"object"==typeof e&&"r"in e&&"g"in e&&"b"in e&&(this.r=e.r,this.g=e.g,this.b=e.b)},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},getHex:function(){return Math.round(255*this.r)<<16|Math.round(255*this.g)<<8|Math.round(255*this.b)},clone:function(){return new $3Dmol.Color(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},scaled:function(){var e={};return e.r=Math.round(255*this.r),e.g=Math.round(255*this.g),e.b=Math.round(255*this.b),e.a=1,e}},$3Dmol.Object3D=function(){this.id=$3Dmol.Object3DIDCount++,this.name="",this.parent=void 0,this.children=[],this.position=new $3Dmol.Vector3,this.rotation=new $3Dmol.Vector3,this.matrix=new $3Dmol.Matrix4,this.matrixWorld=new $3Dmol.Matrix4,this.quaternion=new $3Dmol.Quaternion,this.eulerOrder="XYZ",this.up=new $3Dmol.Vector3(0,1,0),this.scale=new $3Dmol.Vector3(1,1,1),this.rotationAutoUpdate=this.matrixWorldNeedsUpdate=this.matrixAutoUpdate=!0,this.useQuaternion=!1,this.visible=!0},$3Dmol.Object3D.prototype={constructor:$3Dmol.Object3D,lookAt:function(e){this.matrix.lookAt(e,this.position,this.up),this.rotationAutoUpdate&&(!0===this.useQuaternion?this.quaternion.copy(this.matrix.decompose()[1]):this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder))},add:function(e){if(e===this)console.error("Can't add $3Dmol.Object3D to itself");else{e.parent=this,this.children.push(e);for(var t=this;void 0!==t.parent;)t=t.parent;void 0!==t&&t instanceof $3Dmol.Scene&&t.__addObject(e)}},remove:function(e){var t=this.children.indexOf(e);if(-1!==t){for(e.parent=void 0,this.children.splice(t,1),t=this;void 0!==t.parent;)t=t.parent;void 0!==t&&t instanceof $3Dmol.Scene&&t.__removeObject(e)}},updateMatrix:function(){this.matrix.setPosition(this.position),!1===this.useQuaternion?this.matrix.setRotationFromEuler(this.rotation,this.eulerOrder):this.matrix.setRotationFromQuaternion(this.quaternion),1===this.scale.x&&1===this.scale.y&&1===this.scale.z||this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){for(!0===this.matrixAutoUpdate&&this.updateMatrix(),!0!==this.matrixWorldNeedsUpdate&&!0!==e||(void 0===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=0;e<this.children.length;e++)this.children[e].updateMatrixWorld(!0)},clone:function(e){void 0===e&&(e=new $3Dmol.Object3D),e.name=this.name,e.up.copy(this.up),e.position.copy(this.position),e.rotation.copy(this.rotation),e.eulerOrder=this.eulerOrder,e.scale.copy(this.scale),e.rotationAutoUpdate=this.rotationAutoUpdate,e.matrix.copy(this.matrix),e.matrixWorld.copy(this.matrixWorld),e.quaternion.copy(this.quaternion),e.matrixAutoUpdate=this.matrixAutoUpdate,e.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,e.useQuaternion=this.useQuaternion,e.visible=this.visible;for(var t=0;t<this.children.length;t++)e.add(this.children[t].clone());return e},setVisible:function(e){this.visible=e;for(var t=0;t<this.children.length;t++)this.children[t].setVisible(e)}},$3Dmol.Object3DIDCount=0,$3Dmol.Geometry=function(){var e=function(e){this.id=e||0,this.lineArray=this.radiusArray=this.faceArray=this.normalArray=this.colorArray=this.vertexArray=null,this.lineidx=this.faceidx=this.vertices=0};e.prototype.setColors=function(e){var t=this.vertexArray,n=this.colorArray;if(t.length!=n.length)console.log("Cannot re-color geometry group due to mismatched lengths.");else for(var r=0;r<t.length;r+=3){var o=e(t[r],t[r+1],t[r+2]);o instanceof $3Dmol.Color||(o=$3Dmol.CC.color(o)),n[r]=o.r,n[r+1]=o.g,n[r+2]=o.b}},e.prototype.getNumVertices=function(){return this.vertices},e.prototype.getVertices=function(){return this.vertexArray},e.prototype.getCentroid=function(){for(var e,t,n,r=new $3Dmol.Vector3,o=0;o<this.vertices;++o)e=3*o,t=this.vertexArray[e],n=this.vertexArray[e+1],e=this.vertexArray[e+2],r.x+=t,r.y+=n,r.z+=e;return r.divideScalar(this.vertices),r},e.prototype.setNormals=function(){var e=this.faceArray,t=this.vertexArray,n=this.normalArray;if(this.vertices&&this.faceidx)for(var r,o,i,a,s,l,u=0;u<e.length/3;++u)r=3*e[3*u],o=3*e[3*u+1],i=3*e[3*u+2],a=new $3Dmol.Vector3(t[r],t[r+1],t[r+2]),s=new $3Dmol.Vector3(t[o],t[o+1],t[o+2]),l=new $3Dmol.Vector3(t[i],t[i+1],t[i+2]),a.subVectors(a,s),l.subVectors(l,s),l.cross(a),(a=l).normalize(),n[r]+=a.x,n[o]+=a.x,n[i]+=a.x,n[r+1]+=a.y,n[o+1]+=a.y,n[i+1]+=a.y,n[r+2]+=a.z,n[o+2]+=a.z,n[i+2]+=a.z},e.prototype.setLineIndices=function(){if(this.faceidx&&(!this.lineArray||this.lineArray.length!=2*this.faceidx||this.lineidx!=2*this.faceidx)){var e=this.faceArray,t=this.lineArray=new Uint16Array(2*this.faceidx);this.lineidx=2*this.faceidx;for(var n=0;n<this.faceidx/3;++n){var r=3*n,o=2*r,i=e[r],a=e[r+1];r=e[r+2],t[o]=i,t[o+1]=a,t[o+2]=i,t[o+3]=r,t[o+4]=a,t[o+5]=r}}},e.prototype.truncateArrayBuffers=function(e,t){e=!0===e;var n=this.colorArray,r=this.normalArray,o=this.faceArray,i=this.lineArray,a=this.radiusArray;this.vertexArray=this.vertexArray.subarray(0,3*this.vertices),this.colorArray=n.subarray(0,3*this.vertices),e?(this.normalArray=r.subarray(0,3*this.vertices),this.faceArray=o.subarray(0,this.faceidx),this.lineArray=0<this.lineidx?i.subarray(0,this.lineidx):new Uint16Array(0)):(this.normalArray=new Float32Array(0),this.faceArray=new Uint16Array(0),this.lineArray=new Uint16Array(0)),a&&(this.radiusArray=a.subarray(0,this.vertices)),t&&(this.normalArray&&(this.normalArray=new Float32Array(this.normalArray)),this.faceArray&&(this.faceArray=new Uint16Array(this.faceArray)),this.lineArray&&(this.lineArray=new Uint16Array(this.lineArray)),this.vertexArray&&(this.vertexArray=new Float32Array(this.vertexArray)),this.colorArray&&(this.colorArray=new Float32Array(this.colorArray)),this.radiusArray&&(this.radiusArray=new Float32Array(this.radiusArray))),this.__inittedArrays=!0};var t=function(t){var n=new e(t.geometryGroups.length);return t.geometryGroups.push(n),t.groups=t.geometryGroups.length,n.vertexArray=new Float32Array(196605),n.colorArray=new Float32Array(196605),t.mesh&&(n.normalArray=new Float32Array(196605),n.faceArray=new Uint16Array(393210),n.lineArray=new Uint16Array(393210)),t.radii&&(n.radiusArray=new Float32Array(65535)),n.useOffset=t.offset,n},n=function(e,t,n){$3Dmol.EventDispatcher.call(this),this.id=$3Dmol.GeometryIDCount++,this.name="",this.hasTangents=!1,this.dynamic=!0,this.mesh=!0===e,this.radii=t||!1,this.offset=n||!1,this.buffersNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.elementsNeedUpdate=this.verticesNeedUpdate=!1,this.geometryGroups=[],this.groups=0};return n.prototype={constructor:n,updateGeoGroup:function(e){var n=0<this.groups?this.geometryGroups[this.groups-1]:null;return(!n||n.vertices+(e||0)>n.vertexArray.length/3)&&(n=t(this)),n},addGeoGroup:function(){return t(this)},setUpNormals:function(e){e=e||!1;for(var t=0;t<this.groups;t++)this.geometryGroups[t].setNormals(e)},setColors:function(e){for(var t=this.geometryGroups.length,n=0;n<t;n++)this.geometryGroups[n].setColors(e)},setUpWireframe:function(){for(var e=0;e<this.groups;e++)this.geometryGroups[e].setLineIndices()},initTypedArrays:function(){for(var e=0;e<this.groups;e++){var t=this.geometryGroups[e];!0!==t.__inittedArrays&&t.truncateArrayBuffers(this.mesh,!1)}},dispose:function(){this.dispatchEvent({type:"dispose"})}},n}(),Object.defineProperty($3Dmol.Geometry.prototype,"vertices",{get:function(){for(var e=0,t=0;t<this.groups;t++)e+=this.geometryGroups[t].vertices;return e}}),$3Dmol.GeometryIDCount=0,$3Dmol.Raycaster=function(){var e=function(e,t,n,r){this.ray=new $3Dmol.Ray(e,t),0<this.ray.direction.lengthSq()&&this.ray.direction.normalize(),this.near=r||0,this.far=n||1/0},t=new $3Dmol.Sphere,n=new $3Dmol.Cylinder,r=new $3Dmol.Triangle,o=new $3Dmol.Vector3,i=new $3Dmol.Vector3,a=new $3Dmol.Vector3,s=new $3Dmol.Vector3;new $3Dmol.Ray,new $3Dmol.Vector3;var l=new $3Dmol.Vector3;new $3Dmol.Matrix4;var u=function(e,t){return e.distance-t.distance};return e.prototype.precision=1e-4,e.prototype.linePrecision=.2,e.prototype.set=function(e,t){this.ray.set(e,t)},e.prototype.setFromCamera=function(){var e=new $3Dmol.Matrix4;return function(t,n){n.ortho?(this.ray.origin.set(t.x,t.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld)):(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(t.x,t.y,t.z),n.projectionMatrixInverse.getInverse(n.projectionMatrix),e.multiplyMatrices(n.matrixWorld,n.projectionMatrixInverse),this.ray.direction.applyProjection(e),this.ray.direction.sub(this.ray.origin).normalize())}}(),e.prototype.intersectObjects=function(e,c){for(var p=[],d=0,f=c.length;d<f;d++)e:{var h=e,m=c[d],y=p;if(l.getPositionFromMatrix(h.matrixWorld),void 0!==m.intersectionShape){var g=m.intersectionShape,v=this.linePrecision,b=(v*=h.matrixWorld.getMaxScaleOnAxis())*v;if(void 0!==m.boundingSphere&&m.boundingSphere instanceof $3Dmol.Sphere&&(t.copy(m.boundingSphere),t.applyMatrix4(h.matrixWorld),!this.ray.isIntersectionSphere(t)))break e;var S=0;for(v=g.triangle.length;S<v;S++)if(g.triangle[S]instanceof $3Dmol.Triangle){r.copy(g.triangle[S]),r.applyMatrix4(h.matrixWorld);var _=r.getNormal(),w=this.ray.direction.dot(_);if(!(0<=w)){o.subVectors(r.a,this.ray.origin);var E=_.dot(o)/w;if(!(0>E)){i.copy(this.ray.direction).multiplyScalar(E).add(this.ray.origin),i.sub(r.a),a.copy(r.b).sub(r.a),s.copy(r.c).sub(r.a),w=a.dot(s);var O=a.lengthSq();_=s.lengthSq(),0>(_=(O*i.dot(s)-w*i.dot(a))/(O*_-w*w))||1<_||(0>(w=(i.dot(a)-_*w)/O)||1<w||1<w+_||y.push({clickable:m,distance:E}))}}}for(S=0,v=g.cylinder.length;S<v;S++)if(g.cylinder[S]instanceof $3Dmol.Cylinder){n.copy(g.cylinder[S]),n.applyMatrix4(h.matrixWorld),o.subVectors(n.c1,this.ray.origin);var C=o.dot(n.direction);if(O=o.dot(this.ray.direction),0!==(_=1-(w=Math.min(Math.max(this.ray.direction.dot(n.direction),-1),1))*w)){var P=(w*O-C)/_,x=(O-w*C)/_;i.copy(n.direction).multiplyScalar(P).add(n.c1),a.copy(this.ray.direction).multiplyScalar(x).add(this.ray.origin);var T=s.subVectors(i,a).lengthSq();T<=(P=n.radius*n.radius)&&(0>(w=w*(_=E=0>=(P=(w*C-O)*(w*C-O)-_*(o.lengthSq()-C*C-P))?Math.sqrt(T):(O-w*C-Math.sqrt(P))/_)-C)||w*w>n.lengthSq()||0>_||y.push({clickable:m,distance:E}))}}for(S=0,v=g.line.length;S<v;S+=2)i.copy(g.line[S]),i.applyMatrix4(h.matrixWorld),a.copy(g.line[S+1]),a.applyMatrix4(h.matrixWorld),s.subVectors(a,i),C=s.lengthSq(),s.normalize(),o.subVectors(i,this.ray.origin),T=o.dot(s),O=o.dot(this.ray.direction),0!==(_=1-(w=Math.min(Math.max(this.ray.direction.dot(s),-1),1))*w)&&(P=(w*O-T)/_,x=(O-w*T)/_,i.add(s.multiplyScalar(P)),a.copy(this.ray.direction).multiplyScalar(x).add(this.ray.origin),(T=s.subVectors(a,i).lengthSq())<b&&P*P<C&&y.push({clickable:m,distance:x}));for(S=0,v=g.sphere.length;S<v;S++)if(g.sphere[S]instanceof $3Dmol.Sphere&&(t.copy(g.sphere[S]),t.applyMatrix4(h.matrixWorld),this.ray.isIntersectionSphere(t))){if(i.subVectors(t.center,this.ray.origin),P=(h=i.dot(this.ray.direction))*h-(i.lengthSq()-t.radius*t.radius),0>h)break e;E=0>=P?h:h-Math.sqrt(P),y.push({clickable:m,distance:E});break e}}}return p.sort(u),p},e}(),$3Dmol.Projector=function(){new $3Dmol.Matrix4;var e=new $3Dmol.Matrix4;this.projectVector=function(t,n){return n.matrixWorldInverse.getInverse(n.matrixWorld),e.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),t.applyProjection(e)},this.unprojectVector=function(t,n){return n.projectionMatrixInverse.getInverse(n.projectionMatrix),e.multiplyMatrices(n.matrixWorld,n.projectionMatrixInverse),t.applyProjection(e)}},$3Dmol.Camera=function(e,t,n,r,o){$3Dmol.Object3D.call(this),this.fov=void 0!==e?e:50,this.aspect=void 0!==t?t:1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.projectionMatrix=new $3Dmol.Matrix4,this.projectionMatrixInverse=new $3Dmol.Matrix4,this.matrixWorldInverse=new $3Dmol.Matrix4,this.right=this.position.z*Math.tan(Math.PI/180*e),this.left=-this.right,this.top=this.right/this.aspect,this.bottom=-this.top,this.ortho=!!o,this.updateProjectionMatrix()},$3Dmol.Camera.prototype=Object.create($3Dmol.Object3D.prototype),$3Dmol.Camera.prototype.lookAt=function(e){this.matrix.lookAt(this.position,e,this.up),this.rotationAutoUpdate&&(!1===this.useQuaternion?this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder):this.quaternion.copy(this.matrix.decompose()[1]))},$3Dmol.Camera.prototype.updateProjectionMatrix=function(){this.ortho?this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far):this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},$3Dmol.SpritePlugin=function(){function e(e,t){return e.z!==t.z?t.z-e.z:t.id-e.id}var t,n,r,o,i,a,s,l,u,c;this.init=function(e){t=e.context,n=e,r=e.getPrecision(),o=new Float32Array(16),i=new Uint16Array(6),e=0,o[e++]=-1,o[e++]=-1,o[e++]=0,o[e++]=0,o[e++]=1,o[e++]=-1,o[e++]=1,o[e++]=0,o[e++]=1,o[e++]=1,o[e++]=1,o[e++]=1,o[e++]=-1,o[e++]=1,o[e++]=0,o[e++]=1,e=0,i[e++]=0,i[e++]=1,i[e++]=2,i[e++]=0,i[e++]=2,i[e++]=3,a=t.createBuffer(),s=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,o,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,s),t.bufferData(t.ELEMENT_ARRAY_BUFFER,i,t.STATIC_DRAW),e=$3Dmol.ShaderLib.sprite;var p=r,d=t.createProgram(),f=t.createShader(t.FRAGMENT_SHADER),h=t.createShader(t.VERTEX_SHADER);p="precision "+p+" float;\n",t.shaderSource(f,p+e.fragmentShader),t.shaderSource(h,p+e.vertexShader),t.compileShader(f),t.compileShader(h),t.getShaderParameter(f,t.COMPILE_STATUS)&&t.getShaderParameter(h,t.COMPILE_STATUS)?(t.attachShader(d,f),t.attachShader(d,h),t.linkProgram(d),t.getProgramParameter(d,t.LINK_STATUS)||console.error("Could not initialize shader"),e=d):(console.error(t.getShaderInfoLog(f)),console.error("could not initialize shader"),e=null),l=e,c={},(u={}).position=t.getAttribLocation(l,"position"),u.uv=t.getAttribLocation(l,"uv"),c.uvOffset=t.getUniformLocation(l,"uvOffset"),c.uvScale=t.getUniformLocation(l,"uvScale"),c.rotation=t.getUniformLocation(l,"rotation"),c.scale=t.getUniformLocation(l,"scale"),c.alignment=t.getUniformLocation(l,"alignment"),c.color=t.getUniformLocation(l,"color"),c.map=t.getUniformLocation(l,"map"),c.opacity=t.getUniformLocation(l,"opacity"),c.useScreenCoordinates=t.getUniformLocation(l,"useScreenCoordinates"),c.screenPosition=t.getUniformLocation(l,"screenPosition"),c.modelViewMatrix=t.getUniformLocation(l,"modelViewMatrix"),c.projectionMatrix=t.getUniformLocation(l,"projectionMatrix"),c.fogType=t.getUniformLocation(l,"fogType"),c.fogDensity=t.getUniformLocation(l,"fogDensity"),c.fogNear=t.getUniformLocation(l,"fogNear"),c.fogFar=t.getUniformLocation(l,"fogFar"),c.fogColor=t.getUniformLocation(l,"fogColor"),c.alphaTest=t.getUniformLocation(l,"alphaTest")},this.render=function(r,o,i,p){var d=r.__webglSprites,f=d.length;if(f){var h=u,m=c,y=.5*i,g=.5*p;if(t.useProgram(l),t.enableVertexAttribArray(h.position),t.enableVertexAttribArray(h.uv),t.disable(t.CULL_FACE),t.enable(t.BLEND),t.bindBuffer(t.ARRAY_BUFFER,a),t.vertexAttribPointer(h.position,2,t.FLOAT,!1,16,0),t.vertexAttribPointer(h.uv,2,t.FLOAT,!1,16,8),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,s),t.uniformMatrix4fv(m.projectionMatrix,!1,o.projectionMatrix.elements),t.activeTexture(t.TEXTURE0),t.uniform1i(m.map,0),h=r.fog){t.uniform3f(m.fogColor,h.color.r,h.color.g,h.color.b),t.uniform1f(m.fogNear,h.near),t.uniform1f(m.fogFar,h.far),t.uniform1i(m.fogType,1);var v=h=1}else t.uniform1i(m.fogType,0),v=h=0;var b,S=[];for(b=0;b<f;b++){var _=d[b],w=_.material;_.visible&&0!==w.opacity&&(w.useScreenCoordinates?_.z=-_.position.z:(_._modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,_.matrixWorld),_.z=-_._modelViewMatrix.elements[14]))}for(d.sort(e),b=0;b<f;b++)w=(_=d[b]).material,_.visible&&0!==w.opacity&&w.map&&w.map.image&&w.map.image.width&&(t.uniform1f(m.alphaTest,w.alphaTest),o=w.map.image.height,S[0]=w.map.image.width*n.devicePixelRatio/i,S[1]=o*n.devicePixelRatio/p,!0===w.useScreenCoordinates?(t.uniform1i(m.useScreenCoordinates,1),t.uniform3f(m.screenPosition,(_.position.x*n.devicePixelRatio-y)/y,(g-_.position.y*n.devicePixelRatio)/g,Math.max(0,Math.min(1,_.position.z)))):(t.uniform1i(m.useScreenCoordinates,0),t.uniformMatrix4fv(m.modelViewMatrix,!1,_._modelViewMatrix.elements)),h!==(o=r.fog&&w.fog?v:0)&&(t.uniform1i(m.fogType,o),h=o),o=1/(w.scaleByViewport?p:1),S[0]=S[0]*o*_.scale.x,S[1]=S[1]*o*_.scale.y,t.uniform2f(m.uvScale,w.uvScale.x,w.uvScale.y),t.uniform2f(m.uvOffset,w.uvOffset.x,w.uvOffset.y),t.uniform2f(m.alignment,w.alignment.x,w.alignment.y),t.uniform1f(m.opacity,w.opacity),t.uniform3f(m.color,w.color.r,w.color.g,w.color.b),t.uniform1f(m.rotation,_.rotation),t.uniform2fv(m.scale,S),n.setDepthTest(w.depthTest),n.setDepthWrite(w.depthWrite),n.setTexture(w.map,0),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0));t.enable(t.CULL_FACE)}}},$3Dmol.Light=function(e,t){$3Dmol.Object3D.call(this),this.color=new $3Dmol.Color(e),this.position=new $3Dmol.Vector3(0,1,0),this.target=new $3Dmol.Object3D,this.intensity=void 0!==t?t:1,this.onlyShadow=this.castShadow=!1},$3Dmol.Light.prototype=Object.create($3Dmol.Object3D.prototype),$3Dmol.Material=function(){$3Dmol.EventDispatcher.call(this),this.id=$3Dmol.MaterialIdCount++,this.name="",this.side=$3Dmol.FrontSide,this.opacity=1,this.transparent=!1,this.stencilTest=this.depthWrite=this.depthTest=!0,this.polygonOffset=!1,this.alphaTest=this.polygonOffsetUnits=this.polygonOffsetFactor=0,this.needsUpdate=this.visible=!0},$3Dmol.Material.prototype.setValues=function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0===n)console.warn("$3Dmol.Material: '"+t+"' parameter is undefined.");else if(t in this){var r=this[t];r instanceof $3Dmol.Color&&n instanceof $3Dmol.Color?r.copy(n):r instanceof $3Dmol.Color?r.set(n):r instanceof $3Dmol.Vector3&&n instanceof $3Dmol.Vector3?r.copy(n):this[t]=n}}},$3Dmol.Material.prototype.clone=function(e){return void 0===e&&(e=new $3Dmol.Material),e.name=this.name,e.side=this.side,e.opacity=this.opacity,e.transparent=this.transparent,e.depthTest=this.depthTest,e.depthWrite=this.depthWrite,e.stencilTest=this.stencilTest,e.polygonOffset=this.polygonOffset,e.polygonOffsetFactor=this.polygonOffsetFactor,e.polygonOffsetUnits=this.polygonOffsetUnits,e.alphaTest=this.alphaTest,e.overdraw=this.overdraw,e.visible=this.visible,e},$3Dmol.Material.prototype.dispose=function(){this.dispatchEvent({type:"dispose"})},$3Dmol.MaterialIdCount=0,$3Dmol.LineBasicMaterial=function(e){$3Dmol.Material.call(this),this.color=new $3Dmol.Color(16777215),this.linewidth=1,this.linejoin=this.linecap="round",this.vertexColors=!1,this.fog=!0,this.shaderID="basic",this.setValues(e)},$3Dmol.LineBasicMaterial.prototype=Object.create($3Dmol.Material.prototype),$3Dmol.LineBasicMaterial.prototype.clone=function(){var e=new $3Dmol.LineBasicMaterial;return $3Dmol.Material.prototype.clone.call(this,e),e.color.copy(this.color),e},$3Dmol.MeshLambertMaterial=function(e){$3Dmol.Material.call(this),this.color=new $3Dmol.Color(16777215),this.ambient=new $3Dmol.Color(1048575),this.emissive=new $3Dmol.Color(0),this.wrapAround=!1,this.wrapRGB=new $3Dmol.Vector3(1,1,1),this.envMap=this.specularMap=this.lightMap=this.map=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.shading=$3Dmol.SmoothShading,this.shaderID="lambert",this.vertexColors=$3Dmol.NoColors,this.skinning=!1,this.setValues(e)},$3Dmol.MeshLambertMaterial.prototype=Object.create($3Dmol.Material.prototype),$3Dmol.MeshLambertMaterial.prototype.clone=function(e){return void 0===e&&(e=new $3Dmol.MeshLambertMaterial),$3Dmol.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.ambient.copy(this.ambient),e.emissive.copy(this.emissive),e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.shaderID=this.shaderID,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},$3Dmol.MeshDoubleLambertMaterial=function(e){$3Dmol.MeshLambertMaterial.call(this,e),this.shaderID="lambertdouble",this.side=$3Dmol.DoubleSide},$3Dmol.MeshDoubleLambertMaterial.prototype=Object.create($3Dmol.MeshLambertMaterial.prototype),$3Dmol.MeshDoubleLambertMaterial.prototype.clone=function(){var e=new $3Dmol.MeshDoubleLambertMaterial;return $3Dmol.MeshLambertMaterial.prototype.clone.call(this,e),e},$3Dmol.MeshOutlineMaterial=function(e){$3Dmol.Material.call(this),e=e||{},this.fog=!0,this.shaderID="outline",this.wireframe=!1,this.outlineColor=e.color||new $3Dmol.Color(0,0,0),this.outlineWidth=e.width||.1,this.outlinePushback=e.pushback||1},$3Dmol.MeshOutlineMaterial.prototype=Object.create($3Dmol.Material.prototype),$3Dmol.MeshOutlineMaterial.prototype.clone=function(e){return void 0===e&&(e=new $3Dmol.MeshOutlineMaterial),$3Dmol.Material.prototype.clone.call(this,e),e.fog=this.fog,e.shaderID=this.shaderID,e.wireframe=this.wireframe,e},$3Dmol.ImposterMaterial=function(e){$3Dmol.Material.call(this),this.color=new $3Dmol.Color(16777215),this.ambient=new $3Dmol.Color(1048575),this.emissive=new $3Dmol.Color(0),this.imposter=!0,this.wrapAround=!1,this.wrapRGB=new $3Dmol.Vector3(1,1,1),this.envMap=this.specularMap=this.lightMap=this.map=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.shading=$3Dmol.SmoothShading,this.shaderID=null,this.vertexColors=$3Dmol.NoColors,this.skinning=!1,this.setValues(e)},$3Dmol.ImposterMaterial.prototype=Object.create($3Dmol.Material.prototype),$3Dmol.ImposterMaterial.prototype.clone=function(){var e=new $3Dmol.ImposterMaterial;return $3Dmol.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.ambient.copy(this.ambient),e.emissive.copy(this.emissive),e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.shaderID=this.shaderID,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},$3Dmol.SphereImposterMaterial=function(e){$3Dmol.ImposterMaterial.call(this),this.shaderID="sphereimposter",this.setValues(e)},$3Dmol.SphereImposterMaterial.prototype=Object.create($3Dmol.ImposterMaterial.prototype),$3Dmol.SphereImposterMaterial.prototype.clone=function(){var e=new $3Dmol.SphereImposterMaterial;return $3Dmol.ImposterMaterial.prototype.clone.call(this,e),e},$3Dmol.SphereImposterOutlineMaterial=function(e){$3Dmol.ImposterMaterial.call(this),e=e||{},this.shaderID="sphereimposteroutline",this.outlineColor=e.color||new $3Dmol.Color(0,0,0),this.outlineWidth=e.width||.1,this.outlinePushback=e.pushback||1,this.setValues(e)},$3Dmol.SphereImposterOutlineMaterial.prototype=Object.create($3Dmol.ImposterMaterial.prototype),$3Dmol.SphereImposterOutlineMaterial.prototype.clone=function(){var e=new $3Dmol.SphereImposterOutlineMaterial;return $3Dmol.ImposterMaterial.prototype.clone.call(this,e),e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.outlinePushback=this.outlinePushback,e},$3Dmol.StickImposterMaterial=function(e){$3Dmol.ImposterMaterial.call(this),this.shaderID="stickimposter",this.setValues(e)},$3Dmol.StickImposterMaterial.prototype=Object.create($3Dmol.ImposterMaterial.prototype),$3Dmol.StickImposterMaterial.prototype.clone=function(){var e=new $3Dmol.StickImposterMaterial;return $3Dmol.ImposterMaterial.prototype.clone.call(this,e),e},$3Dmol.StickImposterOutlineMaterial=function(e){$3Dmol.ImposterMaterial.call(this),e=e||{},this.shaderID="stickimposteroutline",this.outlineColor=e.color||new $3Dmol.Color(0,0,0),this.outlineWidth=e.width||.1,this.outlinePushback=e.pushback||1,this.setValues(e)},$3Dmol.StickImposterOutlineMaterial.prototype=Object.create($3Dmol.ImposterMaterial.prototype),$3Dmol.StickImposterOutlineMaterial.prototype.clone=function(){var e=new $3Dmol.StickImposterOutlineMaterial;return $3Dmol.ImposterMaterial.prototype.clone.call(this,e),e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.outlinePushback=this.outlinePushback,e},$3Dmol.InstancedMaterial=function(e){$3Dmol.Material.call(this),this.color=new $3Dmol.Color(16777215),this.ambient=new $3Dmol.Color(1048575),this.emissive=new $3Dmol.Color(0),this.wrapAround=!1,this.wrapRGB=new $3Dmol.Vector3(1,1,1),this.envMap=this.specularMap=this.lightMap=this.map=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.shading=$3Dmol.SmoothShading,this.shaderID="instanced",this.vertexColors=$3Dmol.NoColors,this.skinning=!1,this.sphere=null,this.setValues(e)},$3Dmol.InstancedMaterial.prototype=Object.create($3Dmol.Material.prototype),$3Dmol.InstancedMaterial.prototype.clone=function(){var e=new $3Dmol.InstancedMaterial;return $3Dmol.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.ambient.copy(this.ambient),e.emissive.copy(this.emissive),e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.shaderID=this.shaderID,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e.sphere=this.sphere,e},$3Dmol.SpriteMaterial=function(e){$3Dmol.Material.call(this),this.color=new $3Dmol.Color(16777215),this.map=new $3Dmol.Texture,this.useScreenCoordinates=!0,this.depthTest=!this.useScreenCoordinates,this.sizeAttenuation=!this.useScreenCoordinates,this.scaleByViewPort=!this.sizeAttenuation,this.alignment=$3Dmol.SpriteAlignment.center.clone(),this.fog=!1,this.uvOffset=new $3Dmol.Vector2(0,0),this.uvScale=new $3Dmol.Vector2(1,1),this.setValues(e),void 0===(e=e||{}).depthTest&&(this.depthTest=!this.useScreenCoordinates),void 0===e.sizeAttenuation&&(this.sizeAttenuation=!this.useScreenCoordinates),void 0===e.scaleByViewPort&&(this.scaleByViewPort=!this.sizeAttenuation)},$3Dmol.SpriteMaterial.prototype=Object.create($3Dmol.Material.prototype),$3Dmol.SpriteMaterial.prototype.clone=function(){var e=new $3Dmol.SpriteMaterial;return $3Dmol.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.useScreenCoordinates=useScreenCoordinates,e.sizeAttenuation=this.sizeAttenuation,e.scaleByViewport=this.scaleByViewPort,e.alignment.copy(this.alignment),e.uvOffset.copy(this.uvOffset),e},$3Dmol.SpriteAlignment={},$3Dmol.SpriteAlignment.topLeft=new $3Dmol.Vector2(1,-1),$3Dmol.SpriteAlignment.topCenter=new $3Dmol.Vector2(0,-1),$3Dmol.SpriteAlignment.topRight=new $3Dmol.Vector2(-1,-1),$3Dmol.SpriteAlignment.centerLeft=new $3Dmol.Vector2(1,0),$3Dmol.SpriteAlignment.center=new $3Dmol.Vector2(0,0),$3Dmol.SpriteAlignment.centerRight=new $3Dmol.Vector2(-1,0),$3Dmol.SpriteAlignment.bottomLeft=new $3Dmol.Vector2(1,1),$3Dmol.SpriteAlignment.bottomCenter=new $3Dmol.Vector2(0,1),$3Dmol.SpriteAlignment.bottomRight=new $3Dmol.Vector2(-1,1),$3Dmol.Texture=function(e){$3Dmol.EventDispatcher.call(this),this.id=$3Dmol.TextureIdCount++,this.name="",this.image=e,this.mipmaps=[],this.mapping=new $3Dmol.UVMapping,this.wrapT=this.wrapS=$3Dmol.ClampToEdgeWrapping,this.magFilter=$3Dmol.LinearFilter,this.minFilter=$3Dmol.LinearMipMapLinearFilter,this.anisotropy=1,this.format=$3Dmol.RGBAFormat,this.type=$3Dmol.UnsignedByteType,this.offset=new $3Dmol.Vector2(0,0),this.repeat=new $3Dmol.Vector2(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.needsUpdate=!1,this.onUpdate=null},$3Dmol.Texture.prototype={constructor:$3Dmol.Texture,clone:function(e){return void 0===e&&(e=new $3Dmol.Texture),e.image=this.image,e.mipmaps=this.mipmaps.slice(0),e.mapping=this.mapping,e.wrapS=this.wrapS,e.wrapT=this.wrapT,e.magFilter=this.magFilter,e.minFilter=this.minFilter,e.anisotropy=this.anisotropy,e.format=this.format,e.type=this.type,e.offset.copy(this.offset),e.repeat.copy(this.repeat),e.generateMipmaps=this.generateMipmaps,e.premultiplyAlpha=this.premultiplyAlpha,e.flipY=this.flipY,e.unpackAlignment=this.unpackAlignment,e},dispose:function(){this.dispatchEvent({type:"dispose"})}},$3Dmol.TextureIdCount=0,$3Dmol.FrontSide=0,$3Dmol.BackSide=1,$3Dmol.DoubleSide=2,$3Dmol.NoShading=0,$3Dmol.FlatShading=1,$3Dmol.SmoothShading=2,$3Dmol.NoColors=0,$3Dmol.FaceColors=1,$3Dmol.VertexColors=2,$3Dmol.MultiplyOperation=0,$3Dmol.MixOperation=1,$3Dmol.AddOperation=2,$3Dmol.UVMapping=function(){},$3Dmol.ClampToEdgeWrapping=1001,$3Dmol.LinearFilter=1006,$3Dmol.LinearMipMapLinearFilter=1008,$3Dmol.UnsignedByteType=1009,$3Dmol.RGBAFormat=1021,$3Dmol.Line=function(e,t,n){$3Dmol.Object3D.call(this),this.geometry=e,this.material=void 0!==t?t:new $3Dmol.LineBasicMaterial({color:16777215*Math.random()}),this.type=void 0!==n?n:$3Dmol.LineStrip},$3Dmol.LineStrip=0,$3Dmol.LinePieces=1,$3Dmol.Line.prototype=Object.create($3Dmol.Object3D.prototype),$3Dmol.Line.prototype.clone=function(e){return void 0===e&&(e=new $3Dmol.Line(this.geometry,this.material,this.type)),$3Dmol.Object3D.prototype.clone.call(this,e),e},$3Dmol.Mesh=function(e,t){$3Dmol.Object3D.call(this),this.geometry=e,this.material=void 0!==t?t:new $3Dmol.MeshBasicMaterial({color:16777215*Math.random(),wireframe:!0})},$3Dmol.Mesh.prototype=Object.create($3Dmol.Object3D.prototype),$3Dmol.Mesh.prototype.clone=function(e){return void 0===e&&(e=new $3Dmol.Mesh(this.geometry,this.material)),$3Dmol.Object3D.prototype.clone.call(this,e),e},$3Dmol.Sprite=function(e){$3Dmol.Object3D.call(this),this.material=void 0!==e?e:new $3Dmol.SpriteMaterial,this.rotation3d=this.rotation,this.rotation=0},$3Dmol.Sprite.prototype=Object.create($3Dmol.Object3D.prototype),$3Dmol.Sprite.prototype.updateMatrix=function(){this.matrix.setPosition(this.position),this.rotation3d.set(0,0,this.rotation),this.matrix.setRotationFromEuler(this.rotation3d),1===this.scale.x&&1===this.scale.y||this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0},$3Dmol.Sprite.prototype.clone=function(e){return void 0===e&&(e=new $3Dmol.Sprite(this.material)),$3Dmol.Object3D.prototype.clone.call(this,e),e},$3Dmol.Renderer=function(e){function t(e){L[e]||(b.enableVertexAttribArray(e),L[e]=!0)}function n(e,t){var n;return"fragment"===e?n=b.createShader(b.FRAGMENT_SHADER):"vertex"===e&&(n=b.createShader(b.VERTEX_SHADER)),b.shaderSource(n,t),b.compileShader(n),b.getShaderParameter(n,b.COMPILE_STATUS)?n:(console.error(b.getShaderInfoLog(n)),console.error("could not initialize shader"),null)}function r(e,t,n,r,o,i,a,s){if(t){var l=e.length-1;s=t=-1}else l=0,t=e.length,s=1;for(var u=l;u!==t;u+=s){var c=e[u];if(c.render){l=c.object;var p=c.buffer;if(c=c[n]){a&&S.setBlending(!0),S.setDepthTest(c.depthTest),S.setDepthWrite(c.depthWrite);var d=c.polygonOffset;null!==d&&(d?b.enable(b.POLYGON_OFFSET_FILL):b.disable(b.POLYGON_OFFSET_FILL)),d=l._modelViewMatrix.isReflected(),S.setMaterialFaces(c,d),S.renderBuffer(r,o,i,c,p,l),(v||c.outline)&&("sphereimposter"==c.shaderID?S.renderBuffer(r,o,i,y,p,l):"stickimposter"==c.shaderID?S.renderBuffer(r,o,i,g,p,l):c.wireframe||"basic"===c.shaderID||0===c.opacity||S.renderBuffer(r,o,i,m,p,l))}}}}function o(e){return 0==(e&e-1)}function i(e){return e===$3Dmol.UnsignedByteType?b.UNSIGNED_BYTE:e===$3Dmol.RGBAFormat?b.RGBA:0}e=e||{},this.row=e.row,this.col=e.col,this.rows=e.rows,this.cols=e.cols;var a=void 0!==e.canvas?e.canvas:document.createElement("canvas"),s=void 0!==e.precision?e.precision:"highp",l=void 0===e.alpha||e.alpha,u=void 0===e.premultipliedAlpha||e.premultipliedAlpha,c=void 0!==e.antialias&&e.antialias,p=void 0===e.stencil||e.stencil,d=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,f=void 0!==e.clearColor?new $3Dmol.Color(e.clearColor):new $3Dmol.Color(0),h=void 0!==e.clearAlpha?e.clearAlpha:0,m=new $3Dmol.MeshOutlineMaterial(e.outline),y=new $3Dmol.SphereImposterOutlineMaterial(e.outline),g=new $3Dmol.StickImposterOutlineMaterial(e.outline),v=!!e.outline;this.domElement=a,this.context=null,this.devicePixelRatio=void 0!==e.devicePixelRatio?e.devicePixelRatio:void 0!==self.devicePixelRatio?self.devicePixelRatio:1,a.id=e.id,this.autoUpdateScene=this.autoUpdateObjects=this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0,this.renderPluginsPost=[],this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}};var b,S=this,_=[],w=0,E=null,O=-1,C=null,P=null,x=0,T=-1,k=-1,A=-1,I=-1,D=null,M=0,j=0,N=0,R=0,L={},G=new $3Dmol.Matrix4,F=new $3Dmol.Vector3,B=new $3Dmol.Vector3,V=!0,z=[],q=[];try{if(!(b=a.getContext("experimental-webgl",{alpha:l,premultipliedAlpha:u,antialias:c,stencil:p,preserveDrawingBuffer:d}))&&!(b=a.getContext("webgl",{alpha:l,premultipliedAlpha:u,antialias:c,stencil:p,preserveDrawingBuffer:d})))throw"Error creating WebGL context."}catch(e){console.error(e)}b.clearColor(0,0,0,1),b.clearDepth(1),b.clearStencil(0),b.enable(b.DEPTH_TEST),b.depthFunc(b.LEQUAL),b.frontFace(b.CCW),b.cullFace(b.BACK),b.enable(b.CULL_FACE),b.enable(b.BLEND),b.blendEquation(b.FUNC_ADD),b.blendFunc(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA),b.clearColor(f.r,f.g,f.b,h),this.context=b;var U=b.getExtension("ANGLE_instanced_arrays"),H=b.getExtension("EXT_frag_depth");this.supportedExtensions=function(){return{supportsAIA:!!U,supportsImposters:!!H}},this.getContext=function(){return b},this.getPrecision=function(){return s},this.setClearColorHex=function(e,t){f.setHex(e),h=t,b.clearColor(f.r,f.g,f.b,h)},this.enableOutline=function(e){m=new $3Dmol.MeshOutlineMaterial(e),y=new $3Dmol.SphereImposterOutlineMaterial(e),g=new $3Dmol.StickImposterOutlineMaterial(e),v=!0},this.disableOutline=function(){v=!1},this.setViewport=function(){if(null!=this.rows&&null!=this.cols&&null!=this.row&&null!=this.col){var e=a.width/this.cols,t=a.height/this.rows;M=e*this.devicePixelRatio,j=t*this.devicePixelRatio,b.drawingBufferWidth=3*M,b.drawingBufferHeight=j,b.enable(b.SCISSOR_TEST),b.scissor(e*this.col,t*this.row,e,t),b.viewport(e*this.col,t*this.row,e,t)}},this.setSize=function(e,t){if(null!=this.rows&&null!=this.cols&&null!=this.row&&null!=this.col){var n=e/this.cols,r=t/this.rows;a.width=e*this.devicePixelRatio,a.height=t*this.devicePixelRatio,M=n*this.devicePixelRatio,j=r*this.devicePixelRatio,a.style.width=e+"px",a.style.height=t+"px",this.setViewport()}else M=a.width=e*this.devicePixelRatio,j=a.height=t*this.devicePixelRatio,a.style.width=e+"px",a.style.height=t+"px",b.viewport(0,0,b.drawingBufferWidth,b.drawingBufferHeight)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=b.COLOR_BUFFER_BIT),(void 0===t||t)&&(r|=b.DEPTH_BUFFER_BIT),(void 0===n||n)&&(r|=b.STENCIL_BUFFER_BIT),b.clear(r)},this.clearTarget=function(e,t,n){this.clear(e,t,n)},this.setMaterialFaces=function(e,t){var n=e.side===$3Dmol.DoubleSide;e=e.side===$3Dmol.BackSide,e=t?!e:e,T!==n&&(n?b.disable(b.CULL_FACE):b.enable(b.CULL_FACE),T=n),k!==e&&(e?b.frontFace(b.CW):b.frontFace(b.CCW),k=e)},this.setDepthTest=function(e){A!==e&&(e?b.enable(b.DEPTH_TEST):b.disable(b.DEPTH_TEST),A=e)},this.setDepthWrite=function(e){I!==e&&(b.depthMask(e),I=e)},this.setBlending=function(e){e?(b.enable(b.BLEND),b.blendEquationSeparate(b.FUNC_ADD,b.FUNC_ADD),b.blendFuncSeparate(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA,b.ONE,b.ONE_MINUS_SRC_ALPHA)):b.disable(b.BLEND)},this.addPostPlugin=function(e){e.init(this),this.renderPluginsPost.push(e)};var W=function(e){if((e=e.target).removeEventListener("dispose",W),e.__webglInit=void 0,void 0!==e.__webglVertexBuffer&&b.deleteBuffer(e.__webglVertexBuffer),void 0!==e.__webglColorBuffer&&b.deleteBuffer(e.__webglColorBuffer),void 0!==e.geometryGroups)for(var t=0,n=e.groups;t<n;t++){var r=e.geometryGroups[t];void 0!==r.__webglVertexBuffer&&b.deleteBuffer(r.__webglVertexBuffer),void 0!==r.__webglColorBuffer&&b.deleteBuffer(r.__webglColorBuffer),void 0!==r.__webglNormalBuffer&&b.deleteBuffer(r.__webglNormalBuffer),void 0!==r.__webglFaceBuffer&&b.deleteBuffer(r.__webglFaceBuffer),void 0!==r.__webglLineBuffer&&b.deleteBuffer(r.__webglLineBuffer)}S.info.memory.geometries--},K=function(e){(e=e.target).removeEventListener("dispose",K),e.image&&e.image.__webglTextureCube?b.deleteTexture(e.image.__webglTextureCube):e.__webglInit&&(e.__webglInit=!1,b.deleteTexture(e.__webglTexture)),S.info.memory.textures--},$=function(e){(e=e.target).removeEventListener("dispose",$),Q(e)},Q=function(e){var t=e.program;if(void 0!==t){e.program=void 0;var n,r=!1;for(e=0,n=_.length;e<n;e++){var o=_[e];if(o.program===t){o.usedTimes--,0===o.usedTimes&&(r=!0);break}}if(!0===r){for(r=[],e=0,n=_.length;e<n;e++)(o=_[e]).program!==t&&r.push(o);_=r,b.deleteProgram(t),S.info.memory.programs--}}};this.initMaterial=function(e,t,r,o){e.addEventListener("dispose",$),(t=e.shaderID)&&(t=$3Dmol.ShaderLib[t],e.vertexShader=t.vertexShader,e.fragmentShader=t.fragmentShader,e.uniforms=$3Dmol.ShaderUtils.clone(t.uniforms));e:{var i=e.fragmentShader;o=e.vertexShader,r=e.uniforms;var a,l={wireframe:e.wireframe,fragdepth:e.imposter};for(u in(t=[]).push(i),t.push(o),l)t.push(u),t.push(l[u]);t=t.join();var u=0;for(a=_.length;u<a;u++){var c=_[u];if(c.code===t){c.usedTimes++;var p=c.program;break e}}for(p in u=b.createProgram(),a=""+(c="precision "+s+" float;"),i=n("fragment",(l=[l.fragdepth?"#extension GL_EXT_frag_depth: enable":"",l.wireframe?"#define WIREFRAME 1":"",c].join("\n"))+i),o=n("vertex",a+o),b.attachShader(u,o),b.attachShader(u,i),b.linkProgram(u),b.getProgramParameter(u,b.LINK_STATUS)||console.error("Could not initialize shader"),u.uniforms={},u.attributes={},o=["viewMatrix","modelViewMatrix","projectionMatrix","normalMatrix"],r)o.push(p);for(p=0;p<o.length;p++)r=o[p],u.uniforms[r]=b.getUniformLocation(u,r);for(o="position normal color lineDistance offset radius".split(" "),p=0;p<o.length;p++)r=o[p],u.attributes[r]=b.getAttribLocation(u,r);u.id=w++,_.push({program:u,code:t,usedTimes:1}),S.info.memory.programs=_.length,p=u}e.program=p},this.renderBuffer=function(e,n,r,o,i,a){if(o.visible){o.needsUpdate&&(o.program&&Q(o),S.initMaterial(o,n,r,a),o.needsUpdate=!1);var s=!1,l=o.program,u=l.uniforms,c=o.uniforms;if(l!=E&&(b.useProgram(l),E=l,s=!0),o.id!=O&&(O=o.id,s=!0),e!=P&&(P=e,s=!0),b.uniformMatrix4fv(u.projectionMatrix,!1,e.projectionMatrix.elements),b.uniformMatrix4fv(u.modelViewMatrix,!1,a._modelViewMatrix.elements),b.uniformMatrix3fv(u.normalMatrix,!1,a._normalMatrix.elements),s){if(c.fogColor.value=r.color,c.fogNear.value=r.near,c.fogFar.value=r.far,o.shaderID.startsWith("lambert")||"instanced"===o.shaderID||o.shaderID.endsWith("imposter")){if(b.uniformMatrix4fv(u.viewMatrix,!1,e.matrixWorldInverse.elements),V){var p=0;for(e=0,r=n.length;e<r;e++){var d=(s=n[e]).color,f=s.intensity;s instanceof $3Dmol.Light&&(0,B.getPositionFromMatrix(s.matrixWorld),F.getPositionFromMatrix(s.target.matrixWorld),B.sub(F),B.normalize(),0!==B.x||0!==B.y||0!==B.z)&&(q[p]=B.x,q[p+1]=B.y,q[p+2]=B.z,z[p]=d.r*f,z[p+1]=d.g*f,z[p+2]=d.b*f,p+=3,0)}V=!1}c.directionalLightColor.value=z,c.directionalLightDirection.value=q}else o.shaderID.endsWith("outline")?(c.outlineColor.value=o.outlineColor,c.outlineWidth.value=o.outlineWidth,c.outlinePushback.value=o.outlinePushback):"sphereimposter"===o.shaderID&&(b.uniformMatrix4fv(u.viewMatrix,!1,e.matrixWorldInverse.elements),b.uniformMatrix3fv(u.normalMatrix,!1,a._normalMatrix.elements),c.directionalLightColor.value=z,c.directionalLightDirection.value=q);for(var h in c.opacity.value=o.opacity,c)u[h]&&(n=c[h].type,e=c[h].value,r=u[h],"f"===n?b.uniform1f(r,e):"fv"===n?b.uniform3fv(r,e):"c"===n?b.uniform3f(r,e.r,e.g,e.b):"f4"===n&&b.uniform4f(r,e[0],e[1],e[2],e[3]))}if(c=l.attributes,u=!1,(l=16777215*i.id+2*l.id+(o.wireframe?1:0))!==C&&(C=l,u=!0),u){for(var m in L)L[m]&&(b.disableVertexAttribArray(m),L[m]=!1);0<=c.position&&(b.bindBuffer(b.ARRAY_BUFFER,i.__webglVertexBuffer),t(c.position),b.vertexAttribPointer(c.position,3,b.FLOAT,!1,0,0)),0<=c.color&&(b.bindBuffer(b.ARRAY_BUFFER,i.__webglColorBuffer),t(c.color),b.vertexAttribPointer(c.color,3,b.FLOAT,!1,0,0)),0<=c.normal&&(b.bindBuffer(b.ARRAY_BUFFER,i.__webglNormalBuffer),t(c.normal),b.vertexAttribPointer(c.normal,3,b.FLOAT,!1,0,0)),0<=c.offset&&(b.bindBuffer(b.ARRAY_BUFFER,i.__webglOffsetBuffer),t(c.offset),b.vertexAttribPointer(c.offset,3,b.FLOAT,!1,0,0)),0<=c.radius&&(b.bindBuffer(b.ARRAY_BUFFER,i.__webglRadiusBuffer),t(c.radius),b.vertexAttribPointer(c.radius,1,b.FLOAT,!1,0,0))}if(a instanceof $3Dmol.Mesh){if("instanced"===o.shaderID){var y=o.sphere.geometryGroups[0];u&&(b.bindBuffer(b.ARRAY_BUFFER,i.__webglVertexBuffer),b.bufferData(b.ARRAY_BUFFER,y.vertexArray,b.STATIC_DRAW),b.bindBuffer(b.ARRAY_BUFFER,i.__webglNormalBuffer),b.bufferData(b.ARRAY_BUFFER,y.normalArray,b.STATIC_DRAW),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,i.__webglFaceBuffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,y.faceArray,b.STATIC_DRAW)),y=y.faceidx,U.vertexAttribDivisorANGLE(c.offset,1),U.vertexAttribDivisorANGLE(c.radius,1),U.vertexAttribDivisorANGLE(c.color,1),U.drawElementsInstancedANGLE(b.TRIANGLES,y,b.UNSIGNED_SHORT,0,i.radiusArray.length),U.vertexAttribDivisorANGLE(c.offset,0),U.vertexAttribDivisorANGLE(c.radius,0),U.vertexAttribDivisorANGLE(c.color,0)}else o.wireframe?(a=i.lineidx,(o=o.wireframeLinewidth)!==D&&(b.lineWidth(o),D=o),u&&b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,i.__webglLineBuffer),b.drawElements(b.LINES,a,b.UNSIGNED_SHORT,0)):(y=i.faceidx,u&&b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,i.__webglFaceBuffer),b.drawElements(b.TRIANGLES,y,b.UNSIGNED_SHORT,0));S.info.render.calls++,S.info.render.vertices+=y,S.info.render.faces+=y/3}else a instanceof $3Dmol.Line&&(a=i.vertices,(i=o.linewidth)!==D&&(b.lineWidth(i),D=i),b.drawArrays(b.LINES,0,a),S.info.render.calls++)}},this.render=function(e,t,n){if(!1==t instanceof $3Dmol.Camera)console.error("$3Dmol.Renderer.render: camera is not an instance of $3Dmol.Camera.");else{var o,i=e.__lights,a=e.fog;O=-1,V=!0,this.autoUpdateScene&&e.updateMatrixWorld(),void 0===t.parent&&t.updateMatrixWorld(),t.matrixWorldInverse.getInverse(t.matrixWorld),G.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this.autoUpdateObjects&&this.initWebGLObjects(e),S.info.render.calls=0,S.info.render.vertices=0,S.info.render.faces=0,S.info.render.points=0,N=M,R=j,this.setViewport(),(this.autoClear||n)&&(b.clearColor(f.r,f.g,f.b,h),this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil));var s=e.__webglObjects;for(n=0,o=s.length;n<o;n++){var l=s[n],u=l.object;if(l.render=!1,u.visible){u._modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,u.matrixWorld),u._normalMatrix.getInverse(u._modelViewMatrix),u._normalMatrix.transpose();var c=(u=l).object.material;c.transparent?(u.opaque=null,u.transparent=c,c.wireframe||((c=c.clone()).opacity=0,u.blank=c)):(u.opaque=c,u.transparent=null),l.render=!0}}if(this.setBlending(!1),r(e.__webglObjects,!0,"opaque",t,i,a,!1,null),r(e.__webglObjects,!0,"blank",t,i,a,!0,null),r(e.__webglObjects,!1,"transparent",t,i,a,!0,null),i=this.renderPluginsPost,C=-1,P=E=null,k=O=T=A=I=-1,i.length)for(a=0,n=i.length;a<n;a++)V=!0,i[a].render(e,t,N,R),C=-1,P=E=null,k=O=T=A=I=-1;this.setDepthTest(!0),this.setDepthWrite(!0)}},this.initWebGLObjects=function(e){if(e.__webglObjects||(e.__webglObjects=[],e.__webglObjectsImmediate=[],e.__webglSprites=[],e.__webglFlares=[]),e.__objectsAdded.length){for(;e.__objectsAdded.length;){var t,n=e.__objectsAdded[0],r=e;if(!n.__webglInit&&(n.__webglInit=!0,n._modelViewMatrix=new $3Dmol.Matrix4,n._normalMatrix=new $3Dmol.Matrix3,void 0!==n.geometry&&void 0===n.geometry.__webglInit&&(n.geometry.__webglInit=!0,n.geometry.addEventListener("dispose",W)),n instanceof $3Dmol.Mesh||n instanceof $3Dmol.Line)){var o=n.geometry,i=0;for(t=o.geometryGroups.length;i<t;i++){var a=o.geometryGroups[i];a.id=x++,a.__webglVertexBuffer||(n instanceof $3Dmol.Mesh?(a.radiusArray&&(a.__webglRadiusBuffer=b.createBuffer()),a.useOffset&&(a.__webglOffsetBuffer=b.createBuffer()),a.__webglVertexBuffer=b.createBuffer(),a.__webglNormalBuffer=b.createBuffer(),a.__webglColorBuffer=b.createBuffer(),a.__webglFaceBuffer=b.createBuffer(),a.__webglLineBuffer=b.createBuffer(),S.info.memory.geometries++,o.elementsNeedUpdate=!0,o.normalsNeedUpdate=!0):n instanceof $3Dmol.Line&&(a.__webglVertexBuffer=b.createBuffer(),a.__webglColorBuffer=b.createBuffer(),S.info.memory.geometries++),o.verticesNeedUpdate=!0,o.colorsNeedUpdate=!0)}}if(!n.__webglActive){if(n instanceof $3Dmol.Mesh||n instanceof $3Dmol.Line)for(i=0,t=(o=n.geometry).geometryGroups.length;i<t;i++)a=o.geometryGroups[i],r.__webglObjects.push({buffer:a,object:n,opaque:null,transparent:null});else n instanceof $3Dmol.Sprite&&r.__webglSprites.push(n);n.__webglActive=!0}e.__objectsAdded.splice(0,1)}C=-1}for(;e.__objectsRemoved.length;){if(t=e,(o=e.__objectsRemoved[0])instanceof $3Dmol.Mesh||o instanceof $3Dmol.Line)for(i=o,n=(t=t.__webglObjects).length-1;0<=n;--n)t[n].object===i&&t.splice(n,1);else if(o instanceof $3Dmol.Sprite)for(i=o,n=(t=t.__webglSprites).length-1;0<=n;--n)t[n]===i&&t.splice(n,1);o.__webglActive=!1,e.__objectsRemoved.splice(0,1)}for(o=0,t=e.__webglObjects.length;o<t;o++)if(i=(n=e.__webglObjects[o].object).geometry,n instanceof $3Dmol.Mesh||n instanceof $3Dmol.Line){for(n=0,r=i.geometryGroups.length;n<r;n++)if(a=i.geometryGroups[n],i.verticesNeedUpdate||i.elementsNeedUpdate||i.colorsNeedUpdate||i.normalsNeedUpdate){var s=b.STATIC_DRAW,l=a.vertexArray,u=a.colorArray;void 0!==a.__webglOffsetBuffer?b.bindBuffer(b.ARRAY_BUFFER,a.__webglOffsetBuffer):b.bindBuffer(b.ARRAY_BUFFER,a.__webglVertexBuffer),b.bufferData(b.ARRAY_BUFFER,l,s),b.bindBuffer(b.ARRAY_BUFFER,a.__webglColorBuffer),b.bufferData(b.ARRAY_BUFFER,u,s),a.normalArray&&void 0!==a.__webglNormalBuffer&&(l=a.normalArray,b.bindBuffer(b.ARRAY_BUFFER,a.__webglNormalBuffer),b.bufferData(b.ARRAY_BUFFER,l,s)),a.radiusArray&&void 0!==a.__webglRadiusBuffer&&(b.bindBuffer(b.ARRAY_BUFFER,a.__webglRadiusBuffer),b.bufferData(b.ARRAY_BUFFER,a.radiusArray,s)),a.faceArray&&void 0!==a.__webglFaceBuffer&&(l=a.faceArray,b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,a.__webglFaceBuffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,l,s)),a.lineArray&&void 0!==a.__webglLineBuffer&&(l=a.lineArray,b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,a.__webglLineBuffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,l,s))}i.verticesNeedUpdate=!1,i.elementsNeedUpdate=!1,i.normalsNeedUpdate=!1,i.colorsNeedUpdate=!1,i.buffersNeedUpdate=!1}},this.getXYRatio=function(){return null!=this.rows&&null!=this.cols&&null!=this.row&&null!=this.col?[this.cols,this.rows]:[1,1]},this.getAspect=function(e,t){null!=e&&null!=t||(e=a.width,t=a.height);var n=e/t;return null!=this.rows&&null!=this.cols&&null!=this.row&&null!=this.col&&(n=e/this.cols/(t/this.rows)),n},this.setTexture=function(e,t){if(e.needsUpdate){e.__webglInit||(e.__webglInit=!0,e.addEventListener("dispose",K),e.__webglTexture=b.createTexture(),S.info.memory.textures++),b.activeTexture(b.TEXTURE0+t),b.bindTexture(b.TEXTURE_2D,e.__webglTexture),b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,e.flipY),b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),b.pixelStorei(b.UNPACK_ALIGNMENT,e.unpackAlignment),t=o((t=e.image).width)&&o(t.height);var n=i(e.format),r=i(e.type),a=b.TEXTURE_2D;t?(b.texParameteri(a,b.TEXTURE_WRAP_S,i(e.wrapS)),b.texParameteri(a,b.TEXTURE_WRAP_T,i(e.wrapT)),b.texParameteri(a,b.TEXTURE_MAG_FILTER,i(e.magFilter)),b.texParameteri(a,b.TEXTURE_MIN_FILTER,i(e.minFilter))):(b.texParameteri(a,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(a,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texParameteri(a,b.TEXTURE_MAG_FILTER,b.LINEAR),b.texParameteri(a,b.TEXTURE_MIN_FILTER,b.LINEAR));var s=e.mipmaps;if(0<s.length&&t){for(var l=0,u=s.length;l<u;l++)a=s[l],b.texImage2D(b.TEXTURE_2D,l,n,n,r,a);e.generateMipmaps=!1}else b.texImage2D(b.TEXTURE_2D,0,n,n,r,e.image);e.generateMipmaps&&t&&b.generateMipmap(b.TEXTURE_2D),e.needsUpdate=!1,e.onUpdate&&e.onUpdate()}else b.activeTexture(b.TEXTURE0+t),b.bindTexture(b.TEXTURE_2D,e.__webglTexture)},this.addPostPlugin(new $3Dmol.SpritePlugin)},$3Dmol.Scene=function(){$3Dmol.Object3D.call(this),this.overrideMaterial=this.fog=null,this.matrixAutoUpdate=!1,this.__objects=[],this.__lights=[],this.__objectsAdded=[],this.__objectsRemoved=[]},$3Dmol.Scene.prototype=Object.create($3Dmol.Object3D.prototype),$3Dmol.Scene.prototype.__addObject=function(e){e instanceof $3Dmol.Light?(-1===this.__lights.indexOf(e)&&this.__lights.push(e),e.target&&void 0===e.target.parent&&this.add(e.target)):-1===this.__objects.indexOf(e)&&(this.__objects.push(e),this.__objectsAdded.push(e),-1!==this.__objectsRemoved.indexOf(e)&&this.__objectsRemoved.splice(t,1));for(var t=0;t<e.children.length;t++)this.__addObject(e.children[t])},$3Dmol.Scene.prototype.__removeObject=function(e){if(e instanceof $3Dmol.Light){var t=this.__lights.indexOf(e);-1!==t&&this.__lights.splice(t,1)}else-1!==(t=this.__objects.indexOf(e))&&(this.__objects.splice(t,1),this.__objectsRemoved.push(e),-1!==this.__objectsAdded.indexOf(e)&&this.__objectsAdded.splice(t,1));for(t=0;t<e.children.length;t++)this.__removeObject(e.children[t])},$3Dmol.Fog=function(e,t,n){this.name="",this.color=new $3Dmol.Color(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3},$3Dmol.Fog.prototype.clone=function(){return new $3Dmol.Fog(this.color.getHex(),this.near,this.far)},$3Dmol.ShaderUtils={clone:function(e){var t,n={};for(t in e){n[t]={},n[t].type=e[t].type;var r=e[t].value;r instanceof $3Dmol.Color?n[t].value=r.clone():"number"==typeof r?n[t].value=r:r instanceof Array?n[t].value=[]:console.error("Error copying shader uniforms from ShaderLib: unknown type for uniform")}return n},stickimposterFragmentShader:"uniform float opacity;\nuniform mat4 projectionMatrix;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\nvarying vec3 vLight;\nvarying vec3 vColor;\nvarying vec3 cposition;\nvarying vec3 p1;\nvarying vec3 p2;\nvarying float r;\nvoid main() {\n    vec3 color = abs(vColor);\n    vec3 pos = cposition;\n    vec3 p = pos;\n    vec3 v = normalize(pos);\n    vec3 pa = p1;\n    vec3 va = normalize(p2-p1);\n    vec3 tmp1 = v-(dot(v,va)*va);\n    vec3 deltap = p-pa;\n    float A = dot(tmp1,tmp1);\n    if(A == 0.0) discard;\n    vec3 tmp2 = deltap-(dot(deltap,va)*va);\n    float B = 2.0*dot(tmp1, tmp2);\n    float C = dot(tmp2,tmp2)-r*r;\n    float det = (B*B) - (4.0*A*C);\n    if(det < 0.0) discard;\n    float sqrtDet = sqrt(det);\n    float posT = (-B+sqrtDet)/(2.0*A);\n    float negT = (-B-sqrtDet)/(2.0*A);\n    float intersectionT = min(posT,negT);\n    vec3 qi = p+v*intersectionT;\n    float dotp1 = dot(va,qi-p1);\n    float dotp2 = dot(va,qi-p2);\n    vec3 norm;\n    if( dotp1 < 0.0 || dotp2 > 0.0) {\n       vec3 cp;\n       if( dotp1 < 0.0) {        cp = p1;\n       } else {\n          cp = p2;\n       }\n       vec3 diff = p-cp;\n       A = dot(v,v);\n       B = dot(diff,v)*2.0;\n       C = dot(diff,diff)-r*r;\n       det = (B*B) - (4.0*C);\n       if(det < 0.0) discard;\n       sqrtDet = sqrt(det);\n       posT = (-B+sqrtDet)/(2.0);\n       negT = (-B-sqrtDet)/(2.0);\n       float t = min(posT,negT);\n       qi = p+v*t;\n       norm = normalize(qi-cp);\n    } else {\n       norm = normalize(qi-(dotp1*va + p1));\n    }\n    vec4 clipPos = projectionMatrix * vec4(qi, 1.0);\n    float ndcDepth = clipPos.z / clipPos.w;\n    float depth = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;\n    gl_FragDepthEXT = depth;"},$3Dmol.ShaderLib={basic:{fragmentShader:"uniform mat4 viewMatrix;\nuniform float opacity;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\nvarying vec3 vColor;\nvoid main() {\n    gl_FragColor = vec4( vColor, opacity );\n    float depth = gl_FragCoord.z / gl_FragCoord.w;\n    float fogFactor = smoothstep( fogNear, fogFar, depth );\n    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}",vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nattribute vec3 position;\nattribute vec3 color;\nvarying vec3 vColor;\nvoid main() {\n    vColor = color;\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    gl_Position = projectionMatrix * mvPosition;\n}",uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new $3Dmol.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3}}},sphereimposter:{fragmentShader:"uniform mat4 viewMatrix;\nuniform float opacity;\nuniform mat4 projectionMatrix;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\nuniform float uDepth;\nuniform vec3 directionalLightColor[ 1 ];\nvarying vec3 vColor;\nvarying vec2 mapping;\nvarying float rval;\nvarying vec3 vLight;\nvarying vec3 center;\nvoid main() {\n    float lensqr = dot(mapping,mapping);\n    float rsqr = rval*rval;\n    if(lensqr > rsqr)\n       discard;\n    float z = sqrt(rsqr-lensqr);\n    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z);\n    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);\n    float ndcDepth = clipPos.z / clipPos.w;\n    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;\n    vec3 norm = normalize(vec3(mapping.x,mapping.y,z));\n    float dotProduct = dot( norm, vLight );\n    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n    vec3 vLight = directionalLightColor[ 0 ] * directionalLightWeighting;\n    gl_FragColor = vec4(vLight*vColor, opacity*opacity );\n    float fogFactor = smoothstep( fogNear, fogFar, gl_FragDepthEXT/gl_FragCoord.w );\n    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}",vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 directionalLightColor[ 1 ];\nuniform vec3 directionalLightDirection[ 1 ];\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec3 color;\nvarying vec2 mapping;\nvarying vec3 vColor;\nvarying float rval;\nvarying vec3 vLight;\nvarying vec3 center;\nvoid main() {\n    vColor = color;\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    center = mvPosition.xyz;\n    vec4 projPosition = projectionMatrix * mvPosition;\n    vec4 adjust = projectionMatrix* vec4(normal,0.0); adjust.z = 0.0; adjust.w = 0.0;\n    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );\n    vLight = normalize( lDirection.xyz );\n    mapping = normal.xy;\n    rval = abs(normal.x);\n    gl_Position = projPosition+adjust;\n}",uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new $3Dmol.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},lambert:{fragmentShader:"uniform mat4 viewMatrix;\nuniform float opacity;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\nvarying vec3 vLightFront;\nvarying vec3 vColor;\nvoid main() {\n    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );\n    #ifndef WIREFRAME\n    gl_FragColor.xyz *= vLightFront;\n    #endif\n    gl_FragColor = gl_FragColor * vec4( vColor, opacity );\n    float depth = gl_FragCoord.z / gl_FragCoord.w;\n    float fogFactor = smoothstep( fogNear, fogFar, depth );\n    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}",vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 directionalLightColor[ 1 ];\nuniform vec3 directionalLightDirection[ 1 ];\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec3 color;\nvarying vec3 vColor;\nvarying vec3 vLightFront;\nvoid main() {\n    vColor = color;\n    vec3 objectNormal = normal;\n    vec3 transformedNormal = normalMatrix * objectNormal;\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    vLightFront = vec3( 0.0 );\n    transformedNormal = normalize( transformedNormal );\n    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );\n    vec3 dirVector = normalize( lDirection.xyz );\n    float dotProduct = dot( transformedNormal, dirVector );\n    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;\n    gl_Position = projectionMatrix * mvPosition;\n}",uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new $3Dmol.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},instanced:{fragmentShader:"uniform mat4 viewMatrix;\nuniform float opacity;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\nvarying vec3 vLightFront;\nvarying vec3 vColor;\nvoid main() {\n    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );\n    #ifndef WIREFRAME\n    gl_FragColor.xyz *= vLightFront;\n    #endif\n    gl_FragColor = gl_FragColor * vec4( vColor, opacity );\n    float depth = gl_FragCoord.z / gl_FragCoord.w;\n    float fogFactor = smoothstep( fogNear, fogFar, depth );\n    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}",vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 directionalLightColor[ 1 ];\nuniform vec3 directionalLightDirection[ 1 ];\nattribute vec3 offset;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec3 color;\nattribute float radius;\nvarying vec3 vColor;\nvarying vec3 vLightFront;\nvoid main() {\n    vColor = color;\n    vec3 objectNormal = normal;\n    vec3 transformedNormal = normalMatrix * objectNormal;\n    vec4 mvPosition = modelViewMatrix * vec4( position * radius + offset, 1.0 );\n    vLightFront = vec3( 0.0 );\n    transformedNormal = normalize( transformedNormal );\n    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );\n    vec3 dirVector = normalize( lDirection.xyz );\n    float dotProduct = dot( transformedNormal, dirVector );\n    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;\n    gl_Position = projectionMatrix * mvPosition;\n}",uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new $3Dmol.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},outline:{fragmentShader:"uniform float opacity;\nuniform vec3 outlineColor;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\nvoid main() {\n    gl_FragColor = vec4( outlineColor, 1 );\n}",vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float outlineWidth;\nuniform float outlinePushback;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec3 color;\nvoid main() {\n    vec4 norm = modelViewMatrix*vec4(normalize(normal),0.0);\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    mvPosition.xy += norm.xy*outlineWidth;\n    gl_Position = projectionMatrix * mvPosition;\n    mvPosition.z -= outlinePushback;\n    vec4 pushpos = projectionMatrix*mvPosition;\n    gl_Position.z = gl_Position.w*pushpos.z/pushpos.w;\n}",uniforms:{opacity:{type:"f",value:1},outlineColor:{type:"c",value:new $3Dmol.Color(0,0,0)},fogColor:{type:"c",value:new $3Dmol.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1}}},sphereimposteroutline:{fragmentShader:"uniform float opacity;\nuniform vec3 outlineColor;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\nuniform mat4 projectionMatrix;\nvarying vec2 mapping;\nvarying float rval;\nvarying vec3 center;\nuniform float outlinePushback;\nvoid main() {\n    float lensqr = dot(mapping,mapping);\n    float rsqr = rval*rval;\n    if(lensqr > rsqr)\n       discard;\n    float z = sqrt(rsqr-lensqr);\n    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z-outlinePushback);\n    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);\n    float ndcDepth = clipPos.z / clipPos.w;\n    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;\n    gl_FragColor = vec4(outlineColor, 1 );\n}",vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float outlineWidth;\nuniform float outlinePushback;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec3 color;\nvarying vec2 mapping;\nvarying float rval;\nvarying vec3 center;\nvoid main() {\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    center = mvPosition.xyz;\n    vec4 projPosition = projectionMatrix * mvPosition;\n    vec2 norm = normal.xy + vec2(sign(normal.x)*outlineWidth,sign(normal.y)*outlineWidth);\n    vec4 adjust = projectionMatrix* vec4(norm,normal.z,0.0); adjust.z = 0.0; adjust.w = 0.0;\n    mapping = norm.xy;\n    rval = abs(norm.x);\n    gl_Position = projPosition+adjust;\n}",uniforms:{opacity:{type:"f",value:1},outlineColor:{type:"c",value:new $3Dmol.Color(0,0,0)},fogColor:{type:"c",value:new $3Dmol.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1}}},stickimposter:{fragmentShader:[$3Dmol.ShaderUtils.stickimposterFragmentShader,"    float dotProduct = dot( norm, vLight );\n    vec3 light = vec3( max( dotProduct, 0.0 ) );\n    gl_FragColor = vec4(light*color, opacity*opacity );\n    float fogFactor = smoothstep( fogNear, fogFar, depth );\n    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}"].join("\n"),vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 directionalLightColor[ 1 ];\nuniform vec3 directionalLightDirection[ 1 ];\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec3 color;\nattribute float radius;\nvarying vec3 vColor;\nvarying vec3 vLight;\nvarying vec3 cposition;\nvarying vec3 p1;\nvarying vec3 p2;\nvarying float r;\nvoid main() {\n    vColor = color; vColor.z = abs(vColor.z);\n    r = abs(radius);\n    vec4 to = modelViewMatrix*vec4(normal, 1.0);\n    vec4 pt = modelViewMatrix*vec4(position, 1.0);\n    vec4 mvPosition = pt;\n    p1 = pt.xyz; p2 = to.xyz;\n    vec3 norm = to.xyz-pt.xyz;\n    float mult = 1.1;\n    if(length(p1) > length(p2)) {\n       mvPosition = to;\n    }\n    vec3 n = normalize(mvPosition.xyz);\n    if(color.z >= 0.0) {\n       vec3 pnorm = normalize(p1);\n       float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);\n       mvPosition.xyz = p1+t*pnorm;\n    } else {\n       vec3 pnorm = normalize(p2);\n       float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);\n       mvPosition.xyz = p2+t*pnorm;\n       mult *= -1.0;\n    }\n    vec3 cr = normalize(cross(mvPosition.xyz,norm))*radius;\n    vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*radius;\n    mvPosition.xy +=  mult*(cr + doublecr).xy;\n    cposition = mvPosition.xyz;\n    gl_Position = projectionMatrix * mvPosition;\n    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );\n    vLight = normalize( lDirection.xyz )*directionalLightColor[0];\n}",uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new $3Dmol.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},stickimposteroutline:{fragmentShader:$3Dmol.ShaderUtils.stickimposterFragmentShader+"gl_FragColor = vec4(color,1.0);}",vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 directionalLightColor[ 1 ];\nuniform vec3 directionalLightDirection[ 1 ];\nuniform vec3 outlineColor;\nuniform float outlineWidth;\nuniform float outlinePushback;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec3 color;\nattribute float radius;\nvarying vec3 vColor;\nvarying vec3 vLight;\nvarying vec3 cposition;\nvarying vec3 p1;\nvarying vec3 p2;\nvarying float r;\nvoid main() {\n    vColor = outlineColor;\n    float rad = radius+sign(radius)*outlineWidth;\n    r = abs(rad);\n    vec4 to = modelViewMatrix*vec4(normal, 1.0);\n    vec4 pt = modelViewMatrix*vec4(position, 1.0);\n    to.xyz += normalize(to.xyz)*outlinePushback;\n    pt.xyz += normalize(pt.xyz)*outlinePushback;\n    vec4 mvPosition = pt;\n    p1 = pt.xyz; p2 = to.xyz;\n    vec3 norm = to.xyz-pt.xyz;\n    float mult = 1.1;\n    if(length(p1) > length(p2)) {\n       mvPosition = to;\n    }\n    vec3 n = normalize(mvPosition.xyz);\n    if(color.z >= 0.0) {\n       vec3 pnorm = normalize(p1);\n       float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);\n       mvPosition.xyz = p1+t*pnorm;\n    } else {\n       vec3 pnorm = normalize(p2);\n       float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);\n       mvPosition.xyz = p2+t*pnorm;\n       mult *= -1.0;\n    }\n    vec3 cr = normalize(cross(mvPosition.xyz,norm))*rad;\n    vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*rad;\n    mvPosition.xy +=  mult*(cr + doublecr).xy;\n    cposition = mvPosition.xyz;\n    gl_Position = projectionMatrix * mvPosition;\n    vLight = vec3(1.0,1.0,1.0);\n}",uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new $3Dmol.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineColor:{type:"c",value:new $3Dmol.Color(0,0,0)},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1}}},lambertdouble:{fragmentShader:"uniform mat4 viewMatrix;\nuniform float opacity;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\nvarying vec3 vLightFront;\nvarying vec3 vLightBack;\nvarying vec3 vColor;\nvoid main() {\n    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );\n    #ifndef WIREFRAME\n    if ( gl_FrontFacing )\n       gl_FragColor.xyz *= vLightFront;\n    else\n       gl_FragColor.xyz *= vLightBack;\n    #endif\n    gl_FragColor = gl_FragColor * vec4( vColor, opacity );\n    float depth = gl_FragCoord.z / gl_FragCoord.w;\n    float fogFactor = smoothstep( fogNear, fogFar, depth );\n    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}",vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 directionalLightColor[ 1 ];\nuniform vec3 directionalLightDirection[ 1 ];\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec3 color;\nvarying vec3 vColor;\nvarying vec3 vLightFront;\nvarying vec3 vLightBack;\nvoid main() {\n    vColor = color;\n    vec3 objectNormal = normal;\n    vec3 transformedNormal = normalMatrix * objectNormal;\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    vLightFront = vec3( 0.0 );\n    vLightBack = vec3( 0.0 );\n    transformedNormal = normalize( transformedNormal );\n    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );\n    vec3 dirVector = normalize( lDirection.xyz );\n    float dotProduct = dot( transformedNormal, dirVector );\n    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n    vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;\n    vLightBack += directionalLightColor[ 0 ] * directionalLightWeightingBack;\n    gl_Position = projectionMatrix * mvPosition;\n}",uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new $3Dmol.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},sprite:{fragmentShader:"uniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvoid main() {\n    vec4 texture = texture2D(map, vUV);\n    if (texture.a < alphaTest) discard;\n    gl_FragColor = vec4(color * texture.xyz, texture.a * opacity);\n    if (fogType > 0) {\n        float depth = gl_FragCoord.z / gl_FragCoord.w;\n        float fogFactor = 0.0;\n        if (fogType == 1) {\n            fogFactor = smoothstep(fogNear, fogFar, depth);\n        }\n        else {\n            const float LOG2 = 1.442695;\n            float fogFactor = exp2(- fogDensity * fogDensity * depth * depth * LOG2);\n            fogFactor = 1.0 - clamp(fogFactor, 0.0, 1.0);\n        }\n        gl_FragColor = mix(gl_FragColor, vec4(fogColor, gl_FragColor.w), fogFactor);\n    }\n}",vertexShader:"uniform int useScreenCoordinates;\nuniform vec3 screenPosition;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 alignment;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\n    vUV = uvOffset + uv * uvScale;\n    vec2 alignedPosition = position + alignment;\n    vec2 rotatedPosition;\n    rotatedPosition.x = ( cos(rotation) * alignedPosition.x - sin(rotation) * alignedPosition.y ) * scale.x;\n    rotatedPosition.y = ( sin(rotation) * alignedPosition.x + cos(rotation) * alignedPosition.y ) * scale.y;\n    vec4 finalPosition;\n    if(useScreenCoordinates != 0) {\n        finalPosition = vec4(screenPosition.xy + rotatedPosition, screenPosition.z, 1.0);\n    }\n    else {\n        finalPosition = projectionMatrix * modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0); finalPosition /= finalPosition.w;\n        finalPosition.xy += rotatedPosition; \n    }\n    gl_Position = finalPosition;\n}",uniforms:{}}},$3Dmol.autoload=function(b,c){if(void 0!==$(".viewer_3Dmoljs")[0]&&($3Dmol.autoinit=!0),$3Dmol.autoinit){b=null!=b?b:null,$3Dmol.viewers={};var d=0;$(".viewer_3Dmoljs").each(function(){var h,e,t=$(this),g=[],q=[];"static"==t.css("position")&&t.css("position","relative");var p=null;if(t.data("pdb"))g.push("https://files.rcsb.org/view/"+t.data("pdb")+".pdb"),q.push("pdb");else if(t.data("cid"))q.push("sdf"),g.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+t.data("cid")+"/SDF?record_type=3d");else if(t.data("href")||t.data("url")){var u=t.data("href");g.push(u),p=u.substr(u.lastIndexOf(".")+1),q.push(p)}for(h in p=t.data(),p)"pdb"===h.substring(0,3)&&"pdb"!==h?(g.push("https://files.rcsb.org/view/"+p[h]+".pdb"),q.push("pdb")):"href"===h.substring(0,4)&&"href"!==h?(u=p[h],g.push(u),q.push(u.substr(u.lastIndexOf(".")+1))):"cid"===h.substring(0,3)&&"cid"!==h&&(g.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+p[h]+"/SDF?record_type=3d"),q.push("sdf"));var m={};t.data("options")&&(m=$3Dmol.specStringToObject(t.data("options"))),p=$3Dmol.CC.color(t.data("backgroundcolor"));var l={line:{}};t.data("style")&&(l=$3Dmol.specStringToObject(t.data("style")));var n={};t.data("select")&&(n=$3Dmol.specStringToObject(t.data("select")));var y=[],f=[],x=[],w=t.data(),R=/style(.+)/,P=/surface(.*)/,A=/labelres(.*)/,T=[];for(G in w)w.hasOwnProperty(G)&&T.push(G);for(T.sort(),h=0;h<T.length;h++){var G=T[h];if(e=R.exec(G)){e="select"+e[1];var C=$3Dmol.specStringToObject(w[e]);e=$3Dmol.specStringToObject(w[G]),y.push([C,e])}(e=P.exec(G))&&(e="select"+e[1],C=$3Dmol.specStringToObject(w[e]),e=$3Dmol.specStringToObject(w[G]),f.push([C,e])),(e=A.exec(G))&&(e="select"+e[1],C=$3Dmol.specStringToObject(w[e]),e=$3Dmol.specStringToObject(w[G]),x.push([C,e]))}var z=function(e){e.setStyle(n,l);for(var t=0;t<y.length;t++){var r=y[t][0]||{},o=y[t][1]||{line:{}};e.setStyle(r,o)}for(t=0;t<f.length;t++)r=f[t][0]||{},o=f[t][1]||{},e.addSurface($3Dmol.SurfaceType.VDW,o,r,r);for(t=0;t<x.length;t++)r=x[t][0]||{},o=x[t][1]||{},e.addResLabels(r,o);e.zoomTo(),e.render()},D=b;try{null==D&&(D=$3Dmol.viewers[this.id||d++]=$3Dmol.createViewer(t,{defaultcolors:$3Dmol.rasmolElementColors})),D.setBackgroundColor(p)}catch(e){console.log(e),window.location="http://get.webgl.org"}if(0!=g.length){h=0;var I=function(b){u=g[h];var n=t.data("type")||t.data("datatype")||q[h];D.addModel(b,n,m),h+=1,h<g.length?$.get(g[h],I,"text"):(z(D),t.data("callback")&&(b=eval(t.data("callback")),"function"==typeof b&&b(D)),c&&c(D))};$.get(g[0],I,"text")}else t.data("element")&&(G=$("#"+t.data("element")).val()||"",p=t.data("type")||t.data("datatype"),p||(console.log("Warning: No type specified for embedded viewer with moldata from "+t.data("element")+"\n assuming type 'pdb'"),p="pdb"),D.addModel(G,p,m)),z(D),t.data("callback")&&(G=eval(t.data("callback")),"function"==typeof G&&G(D)),c&&c(D)})}},$(document).ready(function(){$3Dmol.autoload()});var htmlColors={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgrey:11119017,darkgreen:25600,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,grey:8421504,green:32768,greenyellow:11403055,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgrey:13882323,lightgreen:9498256,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};$3Dmol.CC={cache:{0:new $3Dmol.Color(0)},color:function e(t){if(!t)return this.cache[0];if(void 0!==this.cache[t])return this.cache[t];if(t&&t.constructor===Array)return t.map(e,this);if("number"==typeof(t=this.getHex(t))){var n=new $3Dmol.Color(t);return this.cache[t]=n}return t},getHex:function(e){return isNaN(parseInt(e))?"string"==typeof e?(4==(e=e.trim()).length&&"#"==e[0]&&(e="#"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),7==e.length&&"#"==e[0]?parseInt(e.substring(1),16):htmlColors[e.toLowerCase()]||0):e:parseInt(e)}},$3Dmol.CC=$3Dmol.CC,$3Dmol.CC.color=$3Dmol.CC.color,$3Dmol.ssColors=$3Dmol.ssColors||{},$3Dmol.ssColors.pyMol={h:16711680,s:16776960,c:65280},$3Dmol.ssColors.Jmol={h:16711808,s:16762880,c:16777215},$3Dmol.elementColors=$3Dmol.elementColors||{},$3Dmol.elementColors.defaultColor=16716947,$3Dmol.elementColors.Jmol={H:16777215,He:14286847,HE:14286847,Li:13402367,LI:13402367,Be:12779264,BE:12779264,B:16758197,C:9474192,N:3166456,O:16715021,F:9494608,Ne:11789301,NE:11789301,Na:11230450,NA:11230450,Mg:9109248,MG:9109248,Al:12560038,AL:12560038,Si:1578e4,SI:1578e4,P:16744448,S:16777008,Cl:2093087,CL:2093087,Ar:8442339,AR:8442339,K:9388244,Ca:4062976,CA:4062976,Sc:15132390,SC:15132390,Ti:12567239,TI:12567239,V:10921643,Cr:9083335,CR:9083335,Mn:10255047,MN:10255047,Fe:14706227,FE:14706227,Co:15765664,CO:15765664,Ni:5296208,NI:5296208,Cu:13140019,CU:13140019,Zn:8224944,ZN:8224944,Ga:12750735,GA:12750735,Ge:6721423,GE:6721423,As:12419299,AS:12419299,Se:16752896,SE:16752896,Br:10889513,BR:10889513,Kr:6076625,KR:6076625,Rb:7351984,RB:7351984,Sr:65280,SR:65280,Y:9764863,Zr:9756896,ZR:9756896,Nb:7586505,NB:7586505,Mo:5551541,MO:5551541,Tc:3907230,TC:3907230,Ru:2396047,RU:2396047,Rh:687500,RH:687500,Pd:27013,PD:27013,Ag:12632256,AG:12632256,Cd:16767375,CD:16767375,In:10909043,IN:10909043,Sn:6717568,SN:6717568,Sb:10380213,SB:10380213,Te:13924864,TE:13924864,I:9699476,Xe:4366e3,XE:4366e3,Cs:5707663,CS:5707663,Ba:51456,BA:51456,La:7394559,LA:7394559,Ce:16777159,CE:16777159,Pr:14286791,PR:14286791,Nd:13107143,ND:13107143,Pm:10747847,PM:10747847,Sm:9437127,SM:9437127,Eu:6422471,EU:6422471,Gd:4587463,GD:4587463,Tb:3211207,TB:3211207,Dy:2097095,DY:2097095,Ho:65436,HO:65436,Er:58997,ER:58997,Tm:54354,TM:54354,Yb:48952,YB:48952,Lu:43812,LU:43812,Hf:5096191,HF:5096191,Ta:5089023,TA:5089023,W:2200790,Re:2522539,RE:2522539,Os:2516630,OS:2516630,Ir:1528967,IR:1528967,Pt:13684960,PT:13684960,Au:16765219,AU:16765219,Hg:12105936,HG:12105936,Tl:10900557,TL:10900557,Pb:5724513,PB:5724513,Bi:10375093,BI:10375093,Po:11230208,PO:11230208,At:7688005,AT:7688005,Rn:4358806,RN:4358806,Fr:4325478,FR:4325478,Ra:32e3,RA:32e3,Ac:7384058,AC:7384058,Th:47871,TH:47871,Pa:41471,PA:41471,U:36863,Np:33023,NP:33023,Pu:27647,PU:27647,Am:5528818,AM:5528818,Cm:7888099,CM:7888099,Bk:9064419,BK:9064419,Cf:10565332,CF:10565332,Es:11739092,ES:11739092,Fm:11739066,FM:11739066,Md:11734438,MD:11734438,No:12389767,NO:12389767,Lr:13041766,LR:13041766,Rf:13369433,RF:13369433,Db:13697103,DB:13697103,Sg:14221381,SG:14221381,Bh:14680120,BH:14680120,Hs:15073326,HS:15073326,Mt:15400998,MT:15400998},$3Dmol.elementColors.rasmol={H:16777215,He:16761035,HE:16761035,Li:11674146,LI:11674146,B:65280,C:13158600,N:9408511,O:15728640,F:14329120,Na:255,NA:255,Mg:2263842,MG:2263842,Al:8421520,AL:8421520,Si:14329120,SI:14329120,P:16753920,S:16762930,Cl:65280,CL:65280,Ca:8421520,CA:8421520,Ti:8421520,TI:8421520,Cr:8421520,CR:8421520,Mn:8421520,MN:8421520,Fe:16753920,FE:16753920,Ni:10824234,NI:10824234,Cu:10824234,CU:10824234,Zn:10824234,ZN:10824234,Br:10824234,BR:10824234,Ag:8421520,AG:8421520,I:10494192,Ba:16753920,BA:16753920,Au:14329120,AU:14329120},$3Dmol.elementColors.defaultColors=$3Dmol.elementColors.rasmol,$3Dmol.elementColors.greenCarbon=$.extend({},$3Dmol.elementColors.defaultColors),$3Dmol.elementColors.greenCarbon.C=65280,$3Dmol.elementColors.cyanCarbon=$.extend({},$3Dmol.elementColors.defaultColors),$3Dmol.elementColors.cyanCarbon.C=65535,$3Dmol.elementColors.magentaCarbon=$.extend({},$3Dmol.elementColors.defaultColors),$3Dmol.elementColors.magentaCarbon.C=16711935,$3Dmol.elementColors.yellowCarbon=$.extend({},$3Dmol.elementColors.defaultColors),$3Dmol.elementColors.yellowCarbon.C=16776960,$3Dmol.elementColors.whiteCarbon=$.extend({},$3Dmol.elementColors.defaultColors),$3Dmol.elementColors.whiteCarbon.C=16777215,$3Dmol.elementColors.orangeCarbon=$.extend({},$3Dmol.elementColors.defaultColors),$3Dmol.elementColors.orangeCarbon.C=16753920,$3Dmol.elementColors.purpleCarbon=$.extend({},$3Dmol.elementColors.defaultColors),$3Dmol.elementColors.purpleCarbon.C=8388736,$3Dmol.elementColors.blueCarbon=$.extend({},$3Dmol.elementColors.defaultColors),$3Dmol.elementColors.blueCarbon.C=255,$3Dmol.residues={},$3Dmol.residues.amino={ALA:13158600,ARG:1334015,ASN:56540,ASP:15075850,CYS:15132160,GLN:56540,GLU:15075850,GLY:15461355,HIS:8553170,ILE:1016335,LEU:1016335,LYS:1334015,MET:15132160,PHE:3289770,PRO:14456450,SER:16422400,THR:16422400,TRP:11819700,TYR:3289770,VAL:1016335,ASX:16738740,GLX:16738740},$3Dmol.residues.shapely={ALA:9240460,ARG:124,ASN:16743536,ASP:10485826,CYS:16777072,GLN:16731212,GLU:6684672,GLY:16777215,HIS:7368959,ILE:19456,LEU:4546117,LYS:4671416,MET:12099650,PHE:5459026,PRO:5395026,SER:16740418,THR:12078080,TRP:5195264,TYR:9203788,VAL:16747775,ASX:16711935,GLX:16711935},$3Dmol.residues.nucleic={A:10526975,G:16740464,I:8454143,C:16747595,T:10551200,U:16744576},$3Dmol.chains={},$3Dmol.chains.atom={A:12636415,B:11599792,C:16761032,D:16777088,E:16761087,F:11596016,G:16765040,H:15761536,I:16113331,J:49151,K:13458524,L:6737322,M:10145074,N:15631086,O:52945,P:65407,Q:3978097,R:139,S:12433259,T:25600,U:8388608,V:8421376,W:8388736,X:32896,Y:12092939,Z:11674146},$3Dmol.chains.hetatm={A:9478351,B:8441752,C:13602992,D:13619056,E:13603023,F:8437952,G:13607008,H:12603504,I:12955267,J:42959,K:11881548,L:5682578,M:9090346,N:12481214,O:46753,P:53103,Q:3447649,R:187,S:10854235,T:37888,U:11534336,V:11579392,W:11534512,X:45232,Y:15250963,Z:12726834},$3Dmol.builtinColorSchemes={ssPyMol:{prop:"ss",map:$3Dmol.ssColors.pyMol},ssJmol:{prop:"ss",map:$3Dmol.ssColors.Jmol},Jmol:{prop:"elem",map:$3Dmol.elementColors.Jmol},greenCarbon:{prop:"elem",map:$3Dmol.elementColors.greenCarbon},default:{prop:"elem",map:$3Dmol.elementColors.defaultColors},amino:{prop:"resn",map:$3Dmol.residues.amino},shapely:{prop:"resn",map:$3Dmol.residues.shapely},nucleic:{prop:"resn",map:$3Dmol.residues.nucleic},chain:{prop:"chain",map:$3Dmol.chains.atom},chainHetatm:{prop:"chain",map:$3Dmol.chains.hetatm}},$3Dmol.getColorFromStyle=function(e,t){var n=t.colorscheme;if(void 0!==$3Dmol.builtinColorSchemes[n])n=$3Dmol.builtinColorSchemes[n];else if("string"==typeof n&&n.endsWith("Carbon")){var r=n.substring(0,n.lastIndexOf("Carbon")).toLowerCase();if(void 0!==htmlColors[r]){var o=$.extend({},$3Dmol.elementColors.defaultColors);o.C=htmlColors[r],$3Dmol.builtinColorSchemes[n]={prop:"elem",map:o},n=$3Dmol.builtinColorSchemes[n]}}return r=e.color,void 0!==t.color&&"spectrum"!=t.color&&(r=t.color),void 0!==n?void 0!==$3Dmol.elementColors[n]?void 0!==(n=$3Dmol.elementColors[n])[e[n.prop]]&&(r=n.map[e[n.prop]]):void 0!==n[e[n.prop]]?r=n.map[e[n.prop]]:void 0!==n.prop&&void 0!==n.gradient?(o=n.prop,t=n.gradient,void 0!==$3Dmol.Gradient.builtinGradients[t]&&(t=new $3Dmol.Gradient.builtinGradients[t](n.min,n.max,n.mid)),n=t.range()||[-1,1],null!=(e=$3Dmol.getAtomProperty(e,o))&&(r=t.valueToHex(e,n))):void 0!==n.prop&&void 0!==n.map?(o=n.prop,e=$3Dmol.getAtomProperty(e,o),void 0!==n.map[e]&&(r=n.map[e])):void 0!==t.colorscheme[e.elem]?r=t.colorscheme[e.elem]:console.log("Could not interpret colorscheme "+n):void 0!==t.colorfunc&&(r=t.colorfunc(e)),$3Dmol.CC.color(r)},$3Dmol=$3Dmol||{},$3Dmol.subdivide_spline=function(e,t){var n,r=[],o=[];o.push(e[0]);var i=1;for(n=e.length-1;i<n;i++){var a=e[i],s=e[i+1];a.smoothen?((s=new $3Dmol.Vector3((a.x+s.x)/2,(a.y+s.y)/2,(a.z+s.z)/2)).atom=a.atom,o.push(s)):o.push(a)}for(o.push(e[e.length-1]),i=-1,e=o.length;i<=e-3;i++){n=o[-1===i?0:i],a=o[i+1],s=o[i+2];var l=o[i===e-3?e-1:i+3];if(n=(new $3Dmol.Vector3).subVectors(s,n).multiplyScalar(.5),l=(new $3Dmol.Vector3).subVectors(l,a).multiplyScalar(.5),!s.skip)for(var u=0;u<t;u++){var c=1/t*u;(c=new $3Dmol.Vector3(a.x+c*n.x+c*c*(-3*a.x+3*s.x-2*n.x-l.x)+c*c*c*(2*a.x-2*s.x+n.x+l.x),a.y+c*n.y+c*c*(-3*a.y+3*s.y-2*n.y-l.y)+c*c*c*(2*a.y-2*s.y+n.y+l.y),a.z+c*n.z+c*c*(-3*a.z+3*s.z-2*n.z-l.z)+c*c*c*(2*a.z-2*s.z+n.z+l.z))).atom=u<t/2?a.atom:s.atom,r.push(c)}}return r.push(o[o.length-1]),r},$3Dmol.drawCartoon=function(){var e=function(e,t,n,r,o,i){for(o=0,i=t.length;o<i;o++){var a=Math.round(o*(r.length-1)/i),s=$3Dmol.CC.color(r[a]);geoGroup=e.updateGeoGroup(2);var l=geoGroup.vertexArray,u=geoGroup.colorArray;a=geoGroup.faceArray;var c=geoGroup.vertices,p=3*c;for(l[p]=t[o].x,l[p+1]=t[o].y,l[p+2]=t[o].z,l[p+3]=n[o].x,l[p+4]=n[o].y,l[p+5]=n[o].z,l=0;6>l;++l)u[p+3*l]=s.r,u[p+1+3*l]=s.g,u[p+2+3*l]=s.b;0<o&&(c=[c,c+1,c-1,c-2],a[p=geoGroup.faceidx]=c[0],a[p+1]=c[1],a[p+2]=c[3],a[p+3]=c[1],a[p+4]=c[2],a[p+5]=c[3],geoGroup.faceidx+=6),geoGroup.vertices+=2}},t=function(e,t,n,r,o){0!==t.length&&(o=void 0===o?5:o,r=new $3Dmol.Geometry,$3Dmol.subdivide_spline(t,o),(t=new $3Dmol.LineBasicMaterial({linewidth:n})).vertexColors=!0,(t=new $3Dmol.Line(r,t)).type=$3Dmol.LineStrip,e.add(t))},n=function(t,n,r,o,i,a,s){if(s&&"default"!==s||(s="rectangle"),"edged"===s){if(!(2>n.length)){var l=n[0];n=n[n.length-1];var u=o||axisDIV;if(l=$3Dmol.subdivide_spline(l,u),n=$3Dmol.subdivide_spline(n,u),i){var c,p,d,f,h;u=[],s=[[0,2,-6,-8],[-4,-2,6,4],[7,-1,-5,3],[-3,5,1,-7]];var m=0;for(h=l.length;m<h;m++){var y=Math.round(m*(r.length-1)/h);if(y=$3Dmol.CC.color(r[y]),u.push(c=l[m]),u.push(c),u.push(p=n[m]),u.push(p),m<h-1){var g=l[m+1].clone().sub(l[m]);g=n[m].clone().sub(l[m]).cross(g).normalize().multiplyScalar(i)}if(u.push(d=l[m].clone().add(g)),u.push(d),u.push(f=n[m].clone().add(g)),u.push(f),void 0!==c.atom)var v=c.atom;var b=(o=t.updateGeoGroup(8)).vertexArray,S=o.colorArray,_=o.faceArray,w=3*(a=o.vertices);for(b[w]=c.x,b[w+1]=c.y,b[w+2]=c.z,b[w+3]=c.x,b[w+4]=c.y,b[w+5]=c.z,b[w+6]=p.x,b[w+7]=p.y,b[w+8]=p.z,b[w+9]=p.x,b[w+10]=p.y,b[w+11]=p.z,b[w+12]=d.x,b[w+13]=d.y,b[w+14]=d.z,b[w+15]=d.x,b[w+16]=d.y,b[w+17]=d.z,b[w+18]=f.x,b[w+19]=f.y,b[w+20]=f.z,b[w+21]=f.x,b[w+22]=f.y,b[w+23]=f.z,b=0;8>b;++b)S[w+3*b]=y.r,S[w+1+3*b]=y.g,S[w+2+3*b]=y.b;if(0<m)for(S=void 0!==x&&void 0!==v&&x.serial!==v.serial,b=0;4>b;b++)if(w=[a+s[b][0],a+s[b][1],a+s[b][2],a+s[b][3]],_[p=o.faceidx]=w[0],_[p+1]=w[1],_[p+2]=w[3],_[p+3]=w[1],_[p+4]=w[2],_[p+5]=w[3],o.faceidx+=6,v.clickable||x.clickable||v.hoverable||x.hoverable){f=u[w[3]].clone(),p=u[w[0]].clone();var E=u[w[2]].clone();if(d=u[w[1]].clone(),f.atom=u[w[3]].atom||null,E.atom=u[w[2]].atom||null,p.atom=u[w[0]].atom||null,d.atom=u[w[1]].atom||null,S){var O=f.clone().add(p).multiplyScalar(.5),C=E.clone().add(d).multiplyScalar(.5),P=f.clone().add(d).multiplyScalar(.5);0==b%2?((x.clickable||x.hoverable)&&(w=new $3Dmol.Triangle(O,P,f),c=new $3Dmol.Triangle(C,E,P),f=new $3Dmol.Triangle(P,E,f),x.intersectionShape.triangle.push(w),x.intersectionShape.triangle.push(c),x.intersectionShape.triangle.push(f)),(v.clickable||v.hoverable)&&(w=new $3Dmol.Triangle(p,d,P),c=new $3Dmol.Triangle(d,C,P),f=new $3Dmol.Triangle(p,P,O),v.intersectionShape.triangle.push(w),v.intersectionShape.triangle.push(c),v.intersectionShape.triangle.push(f))):((v.clickable||v.hoverable)&&(w=new $3Dmol.Triangle(O,P,f),c=new $3Dmol.Triangle(C,E,P),f=new $3Dmol.Triangle(P,E,f),v.intersectionShape.triangle.push(w),v.intersectionShape.triangle.push(c),v.intersectionShape.triangle.push(f)),(x.clickable||x.hoverable)&&(w=new $3Dmol.Triangle(p,d,P),c=new $3Dmol.Triangle(d,C,P),f=new $3Dmol.Triangle(p,P,O),x.intersectionShape.triangle.push(w),x.intersectionShape.triangle.push(c),x.intersectionShape.triangle.push(f)))}else(v.clickable||v.hoverable)&&(w=new $3Dmol.Triangle(p,d,f),c=new $3Dmol.Triangle(d,E,f),v.intersectionShape.triangle.push(w),v.intersectionShape.triangle.push(c))}o.vertices+=8;var x=v}for(r=u.length-8,b=(o=t.updateGeoGroup(8)).vertexArray,S=o.colorArray,_=o.faceArray,w=3*(a=o.vertices),p=o.faceidx,m=0;4>m;m++)u.push(u[2*m]),u.push(u[r+2*m]),i=u[2*m],t=u[r+2*m],b[w+6*m]=i.x,b[w+1+6*m]=i.y,b[w+2+6*m]=i.z,b[w+3+6*m]=t.x,b[w+4+6*m]=t.y,b[w+5+6*m]=t.z,S[w+6*m]=y.r,S[w+1+6*m]=y.g,S[w+2+6*m]=y.b,S[w+3+6*m]=y.r,S[w+4+6*m]=y.g,S[w+5+6*m]=y.b;w=[a,a+2,a+6,a+4],c=[a+1,a+5,a+7,a+3],_[p]=w[0],_[p+1]=w[1],_[p+2]=w[3],_[p+3]=w[1],_[p+4]=w[2],_[p+5]=w[3],_[p+6]=c[0],_[p+7]=c[1],_[p+8]=c[3],_[p+9]=c[1],_[p+10]=c[2],_[p+11]=c[3],o.faceidx+=12,o.vertices+=8}else e(t,l,n,r,u,a)}}else if(!("rectangle"!==s&&"oval"!==s&&"parabola"!==s||(y=s,v=n.length,2>v||2>n[0].length))){for(o=o||axisDIV,x=0;x<v;x++)n[x]=$3Dmol.subdivide_spline(n[x],o);if(g=n[0].length,i){for(a=[],o=[],s=[],b=0;b<v;b++)a.push(.25+1.5*Math.sqrt((v-1)*b-Math.pow(b,2))/(v-1)),o.push(.5),s.push(2*(Math.pow(b/v,2)-b/v)+.6);for(h=[],b=0;b<2*v-1;b++)h[b]=[b,b+1,b+1-2*v,b-2*v];for(h[2*v-1]=[b,b+1-2*v,b+1-4*v,b-2*v],t=t.updateGeoGroup(2*v*g),x=0;x<g;x++){for(b=Math.round(x*(r.length-1)/g),c=$3Dmol.CC.color(r[b]),S=u,w=m,u=[],m=[],p=[],void 0!==n[0][x].atom&&(_=n[0][x].atom,"oval"===y?l=a:"rectangle"===y?l=o:"parabola"===y&&(l=s)),l||(l=o),b=0;b<v;b++)d=x<g-1?n[b][x+1].clone().sub(n[b][x]):n[b][x-1].clone().sub(n[b][x]).negate(),f=b<v-1?n[b+1][x].clone().sub(n[b][x]):n[b-1][x].clone().sub(n[b][x]).negate(),p[b]=f.cross(d).normalize().multiplyScalar(i*l[b]);for(b=0;b<v;b++)u[b]=n[b][x].clone().add(p[b].clone().negate());for(b=0;b<v;b++)m[b]=n[b][x].clone().add(p[b]);for(E=t.vertexArray,f=t.colorArray,p=t.faceArray,O=3*(d=t.vertices),b=0;b<v;b++)E[O+3*b+0]=u[b].x,E[O+3*b+1]=u[b].y,E[O+3*b+2]=u[b].z;for(b=0;b<v;b++)E[O+3*b+0+3*v]=m[v-1-b].x,E[O+3*b+1+3*v]=m[v-1-b].y,E[O+3*b+2+3*v]=m[v-1-b].z;for(b=0;b<2*v;++b)f[O+3*b+0]=c.r,f[O+3*b+1]=c.g,f[O+3*b+2]=c.b;if(0<x){for(b=0;b<2*v;b++)c=[d+h[b][0],d+h[b][1],d+h[b][2],d+h[b][3]],p[f=t.faceidx]=c[0],p[f+1]=c[1],p[f+2]=c[3],p[f+3]=c[1],p[f+4]=c[2],p[f+5]=c[3],t.faceidx+=6;if(_.clickable||_.hoverable)for(b in(c=[]).push(new $3Dmol.Triangle(S[0],u[0],u[v-1])),c.push(new $3Dmol.Triangle(S[0],u[v-1],S[v-1])),c.push(new $3Dmol.Triangle(S[v-1],u[v-1],m[v-1])),c.push(new $3Dmol.Triangle(S[v-1],m[v-1],w[v-1])),c.push(new $3Dmol.Triangle(m[0],w[0],w[v-1])),c.push(new $3Dmol.Triangle(m[v-1],m[0],w[v-1])),c.push(new $3Dmol.Triangle(u[0],S[0],w[0])),c.push(new $3Dmol.Triangle(m[0],u[0],w[0])),c)_.intersectionShape.triangle.push(c[b])}t.vertices+=2*v}for(p=t.faceArray,d=t.vertices,x=0;x<v-1;x++)c=[x,x+1,2*v-2-x,2*v-1-x],p[f=t.faceidx]=c[0],p[f+1]=c[1],p[f+2]=c[3],p[f+3]=c[1],p[f+4]=c[2],p[f+5]=c[3],t.faceidx+=6;for(x=0;x<v-1;x++)c=[d-1-x,d-2-x,d-2*v+x+1,d-2*v+x],p[f=t.faceidx]=c[0],p[f+1]=c[1],p[f+2]=c[3],p[f+3]=c[1],p[f+4]=c[2],p[f+5]=c[3],t.faceidx+=6}else e(t,n[0],n[v-1],r,o,a)}},r=function(e,t){if(e&&t&&e.chain===t.chain){if(e.reschain===t.reschain&&(e.resi===t.resi||e.resi===t.resi-1))return!0;if(e.resi<t.resi){var n=e.x-t.x,r=e.y-t.y;if(16>n*n+r*r+(e=e.z-t.z)*e)return!0}}return!1},o=function(e,t,n,r,o){null!=t&&0!=t.vertices&&(o&&(t.initTypedArrays(),t.setUpNormals()),(o=new $3Dmol.MeshDoubleLambertMaterial).vertexColors=$3Dmol.FaceColors,"number"==typeof n&&0<=n&&1>n&&(o.transparent=!0,o.opacity=n),o.outline=r,t=new $3Dmol.Mesh(t,o),e.add(t))},i={C:!0,CA:!0,O:!0,P:!0,OP2:!0,O2P:!0,"O5'":!0,"O3'":!0,"C5'":!0,"C2'":!0,"O5*":!0,"O3*":!0,"C5*":!0,"C2*":!0,N1:!0,N3:!0},a={DA:!0,DG:!0,A:!0,G:!0},s={DT:!0,DC:!0,U:!0,C:!0,T:!0},l={DA:!0,DG:!0,A:!0,G:!0,DT:!0,DC:!0,U:!0,C:!0,T:!0},u=function(e,u,p,d,f,h,m){h=h||5,m=m||5;var y,g,v=new $3Dmol.Geometry(!0),b=new $3Dmol.Geometry(!0),S=[],_=[],w=1,E=!1,O={};for(T in $3Dmol.Gradient.builtinGradients)$3Dmol.Gradient.builtinGradients.hasOwnProperty(T)&&(O[T]=new $3Dmol.Gradient.builtinGradients[T](p[1],p[0]));var C=function(e,t){return p&&"spectrum"===t.color?t.colorscheme in O?O[t.colorscheme].valueToHex(e.resi):O.sinebow.valueToHex(e.resi):$3Dmol.getColorFromStyle(e,t).getHex()};for(g=0;g<h;g++)_[g]=[];var P=y=!1;g=0;var x=[];for(g in u){var T=u[g];if("C"===T.elem&&"CA"===T.atom){var k=r(I,T);k&&"s"===T.ss?y=!0:y&&(I&&A&&I.style.cartoon.arrows&&A.style.cartoon.arrows&&(I.ss="arrow end",A.ss="arrow start"),y=!1),k&&("h"===I.ss||"tube start"==I.ss)&&I.style.cartoon.tubes?!P&&"tube start"!=I.ss&&T.style.cartoon.tubes&&(T.ss="tube start",P=!0):P&&("tube start"===I.ss?I.ss="tube end":A&&A.style.cartoon.tubes&&(A.ss="tube end"),P=!1);var A=I,I=T}T&&T.atom in i&&x.push(T)}for(P&&I.style.cartoon.tubes&&(I.ss="tube end",P=!1),u=function(r){for(var i,a,s=0;!M&&s<h;s++)t(e,_[s],1,S,m);if(d&&0<_[0].length&&n(b,_,S,m,M,w,_.style),r){for(a=[],s=0;s<h;s++)a[s]=_[s][_[s].length-1];i=S[S.length-1]}for(_=[],s=0;s<h;s++)_[s]=[];if(S=[],r){for(s=0;s<h;s++)_[s].push(a[s]);S.push(i)}o(e,b,w,E,!0),o(e,v,w,E,!1),b=new $3Dmol.Geometry(!0),v=new $3Dmol.Geometry(!0)},I=void 0,A=0;A<x.length;A++)if(P=(g=(T=x[A]).resn.trim())in l,w=1,y=T.style.cartoon,I&&I.style.cartoon&&(w=I.style.cartoon.opacity),I&&I.style.cartoon&&I.style.cartoon.outline&&(E=I.style.cartoon.outline),!I||!I.style.cartoon||T.style.cartoon&&I.style.cartoon.opacity==T.style.cartoon.opacity||u(I.chain==T.chain),_.length&&_[0].length>3e4/h/m/2&&u(!0),"trace"===y.style){if(!T.hetflag&&("C"===T.elem&&"CA"===T.atom||P&&"P"===T.atom)){var D=C(T,y),M=$.isNumeric(y.thickness)?y.thickness:.4;if(r(I,T))if(D==j){var j=$3Dmol.CC.color(D);$3Dmol.GLDraw.drawCylinder(v,I,T,M,j,2,2)}else y=(new $3Dmol.Vector3).addVectors(I,T).multiplyScalar(.5),j=$3Dmol.CC.color(j),g=$3Dmol.CC.color(D),$3Dmol.GLDraw.drawCylinder(v,I,y,M,j,2,0),$3Dmol.GLDraw.drawCylinder(v,y,T,M,g,0,2);I=T,j=D}}else{if(T&&"C"===T.elem&&"CA"===T.atom||P&&("P"===T.atom||0==T.atom.indexOf("O5"))){if(N)if("tube end"===T.ss){var N=!1;g=new $3Dmol.Vector3(T.x,T.y,T.z),$3Dmol.GLDraw.drawCylinder(v,R,g,2,$3Dmol.CC.color(j),1,1),T.ss="h"}else{if(I.chain==T.chain&&"tube end"!==I.ss)continue;N=!1,I.ss="h",g=new $3Dmol.Vector3(I.x,I.y,I.z),$3Dmol.GLDraw.drawCylinder(v,R,g,2,$3Dmol.CC.color(j),1,1)}if(I&&(!r(I,T)||"tube start"===I.ss)){if("tube start"===I.ss){N=!0;var R=new $3Dmol.Vector3(I.x,I.y,I.z);I.ss="h"}if(L){g=V?(new $3Dmol.Vector3).addVectors(I,V).multiplyScalar(.5):new $3Dmol.Vector3(I.x,I.y,I.z),$3Dmol.GLDraw.drawCylinder(v,g,L,.4,$3Dmol.CC.color(L.color),0,2),c(_,h,!f,V,B,z,I,x,A),S.push(D);var L=g=null}for(g=0;!M&&g<h;g++)t(e,_[g],1,S,m);for(d&&0<_[0].length&&n(b,_,S,m,M,w,_.style),_=[],g=0;g<h;g++)_[g]=[];S=[]}if(void 0===I||I.rescode!=T.rescode||I.resi!=T.resi){L&&(I=(g=(new $3Dmol.Vector3).addVectors(I,T).multiplyScalar(.5)).clone().sub(L).multiplyScalar(.02),g.add(I),$3Dmol.GLDraw.drawCylinder(v,g,L,.4,$3Dmol.CC.color(L.color),0,2),L=g=null),D=C(T,y),S.push(D),M=$.isNumeric(y.thickness)?y.thickness:.4,I=T;var G=new $3Dmol.Vector3(I.x,I.y,I.z);G.resi=I.resi,j=D}!0!==T.clickable&&!0!==T.hoverable||void 0!==T.intersectionShape&&void 0!==T.intersectionShape.triangle||(T.intersectionShape={sphere:null,cylinder:[],line:[],triangle:[]})}else if(I&&"C"===I.elem&&"CA"===I.atom&&"O"===T.atom||P&&"P"===I.atom&&("OP2"===T.atom||"O2P"===T.atom)||P&&0==I.atom.indexOf("O5")&&0==T.atom.indexOf("C5")){var F=new $3Dmol.Vector3(T.x,T.y,T.z);if(F.resi=T.resi,"OP2"===T.atom||"O2P"===T.atom)var B=new $3Dmol.Vector3(T.x,T.y,T.z)}else if(P&&0==T.atom.indexOf("O3"))var V=new $3Dmol.Vector3(T.x,T.y,T.z);else("N1"===T.atom&&g in a||"N3"===T.atom&&g in s)&&((L=new $3Dmol.Vector3(T.x,T.y,T.z)).color=$3Dmol.getColorFromStyle(T,y).getHex());if(F&&G&&F.resi===G.resi){c(_,h,!f,G,F,z,I,x,A);var z=F;F=G=null,S.push(D)}}L&&(g=V?(new $3Dmol.Vector3).addVectors(I,V).multiplyScalar(.5):new $3Dmol.Vector3(I.x,I.y,I.z),$3Dmol.GLDraw.drawCylinder(v,g,L,.4,$3Dmol.CC.color(L.color),0,2),c(_,h,!f,V,B,z,I,x,A),S.push(D)),u()},c=function(e,t,n,r,o,i,a,s,l){if(r&&o&&a){var u=o.sub(r);u.normalize();var c=s[l];for(l+=1;l<s.length&&(c=s[l]).atom!=a.atom;l++);if((c=c?new $3Dmol.Vector3(c.x,c.y,c.z):new $3Dmol.Vector3(0,0,0)).sub(r),"arrow start"===a.ss&&(l=c.clone().multiplyScalar(.3).cross(o),r.add(l),l=c.clone().cross(u).normalize(),u.rotateAboutVector(l,.43)),a.style.cartoon.ribbon)l=a.style.cartoon.thickness||.4;else if(a.style.cartoon.width)l=a.style.cartoon.width;else if("c"===a.ss)l="P"===a.atom?.8:.5;else if("arrow start"===a.ss){l=1.3;var p=!0}else l="arrow end"===a.ss?.5:"h"===a.ss&&a.style.cartoon.tubes||"tube start"===a.ss?.5:1.3;for(null!=i&&0>u.dot(i)&&u.negate(),u.multiplyScalar(l),l=0;l<t;l++)i=2*l/(t-1)-1,(i=new $3Dmol.Vector3(r.x+i*u.x,r.y+i*u.y,r.z+i*u.z)).atom=a,n&&"s"===a.ss&&(i.smoothen=!0),e[l].push(i);if(p)for(u.multiplyScalar(2),l=0;l<t;l++)i=2*l/(t-1)-1,(i=new $3Dmol.Vector3(r.x+i*u.x,r.y+i*u.y,r.z+i*u.z)).atom=a,i.smoothen=!1,i.skip=!0,e[l].push(i);return t=a.style.cartoon.style||"default",e.style?e.style!=t&&(console.log("Warning: a cartoon chain's strand-style is ambiguous"),e.style="default"):e.style=t,"arrow start"!==a.ss&&"arrow end"!==a.ss||(a.ss="s"),p}};return function(e,t,n,r){u(e,t,n,!0,!1,r=r||5,r)}}(),$3Dmol=$3Dmol||{},$3Dmol.CAP={NONE:0,FLAT:1,ROUND:2},$3Dmol.GLDraw=function(){var e={},t=function(){var e=new $3Dmol.Vector3;return function(t){e.set(t[0],t[1],t[2]);var n=e.x,r=e.y,o=e.z,i=Math.sqrt(n*n+r*r);return 1e-4>i?(t=0,i=1):(t=-n/i,i=r/i),r=-t*n+i*r,1e-4>(n=Math.sqrt(r*r+o*o))?(o=0,r=1):(o/=n,r/=n),(n=new Float32Array(9))[0]=i,n[1]=t,n[2]=0,n[3]=-t*r,n[4]=i*r,n[5]=o,n[6]=t*o,n[7]=-i*o,n[8]=r,n}}(),n=function(){var e,t,n=[],r=Math.pow(2,4),o=Math.pow(2,2),i=r/o;for(n[0]=new $3Dmol.Vector3(-1,0,0),n[i]=new $3Dmol.Vector3(0,0,1),n[2*i]=new $3Dmol.Vector3(1,0,0),n[3*i]=new $3Dmol.Vector3(0,0,-1),e=3;4>=e;e++){for(i=r/(o=Math.pow(2,e-1)),t=0;t<o-1;t++)n[i/2+t*i]=n[t*i].clone().add(n[(t+1)*i]).normalize();n[i/2+(t=o-1)*i]=n[t*i].clone().add(n[0]).normalize()}return n}(),r={cache:{},getVerticesForRadius:function(e,t,r){if(void 0!==this.cache[e]&&void 0!==this.cache[e][t+r])return this.cache[e][t+r];new $3Dmol.Vector3(0,1,0);for(var o,i=n.length,a=[],s=[],l=0;l<i;l++)a.push(n[l].clone().multiplyScalar(e)),a.push(n[l].clone().multiplyScalar(e)),o=n[l].clone().normalize(),s.push(o),s.push(o);l=[];var u,c,p=2*Math.PI,d=Math.PI;for(c=0;10>=c;c++){var f=0===c||10===c,h=5===c,m=[],y=[];for(u=0;u<=i;u++)if(h){var g=u<i?2*u:0;y.push(g+1),m.push(g)}else{o=u/i;var v=c/10;f&&0!==u?f&&m.push(a.length-1):u<i?((g=new $3Dmol.Vector3).x=-e*Math.cos(0+o*p)*Math.sin(0+v*d),g.y=1==t?0:e*Math.cos(0+v*d),g.z=e*Math.sin(0+o*p)*Math.sin(0+v*d),1e-5>Math.abs(g.x)&&(g.x=0),1e-5>Math.abs(g.y)&&(g.y=0),1e-5>Math.abs(g.z)&&(g.z=0),(o=t==$3Dmol.CAP.FLAT?new $3Dmol.Vector3(0,Math.cos(0+v*d),0):new $3Dmol.Vector3(g.x,g.y,g.z)).normalize(),a.push(g),s.push(o),m.push(a.length-1)):m.push(a.length-i)}h&&l.push(y),l.push(m)}return i={vertices:a,normals:s,verticesRows:l,w:i,h:10},e in this.cache||(this.cache[e]={}),this.cache[e][t+r]=i}};e.drawCylinder=function(e,n,o,i,a,s,l){if(n&&o){0;var u=l||s;a=a||{r:0,g:0,b:0};var c=[o.x,o.y,o.z];c[0]-=n.x,c[1]-=n.y,c[2]-=n.z,c=t(c);var p=r.getVerticesForRadius(i,l,"to"),d=p.w,f=p.h,h=u?f*d+2:2*d;e=e.updateGeoGroup(h);var m,y=p.vertices,g=p.normals,v=(p=p.verticesRows)[f/2],b=p[f/2+1],S=e.vertices,_=e.vertexArray,w=e.normalArray,E=e.colorArray,O=e.faceArray;for(m=0;m<d;++m){var C=2*m,P=c[0]*y[C].x+c[3]*y[C].y+c[6]*y[C].z,x=c[1]*y[C].x+c[4]*y[C].y+c[7]*y[C].z,T=c[5]*y[C].y+c[8]*y[C].z,k=3*(S+C);C=e.faceidx,_[k]=P+n.x,_[k+1]=x+n.y,_[k+2]=T+n.z,_[k+3]=P+o.x,_[k+4]=x+o.y,_[k+5]=T+o.z,w[k]=P,w[k+3]=P,w[k+1]=x,w[k+4]=x,w[k+2]=T,w[k+5]=T,E[k]=a.r,E[k+3]=a.r,E[k+1]=a.g,E[k+4]=a.g,E[k+2]=a.b,E[k+5]=a.b,O[C]=b[m]+S,O[C+1]=b[m+1]+S,O[C+2]=v[m]+S,O[C+3]=v[m]+S,O[C+4]=b[m+1]+S,O[C+5]=v[m+1]+S,e.faceidx+=6}if(u)for(u=s?f+1:f/2+1,x=l?0:f/2;x<u;x++)if(x!==f/2)for(v=x<=f/2?o:n,P=r.getVerticesForRadius(i,l,"to"),C=r.getVerticesForRadius(i,s,"from"),v===o?(y=P.vertices,g=P.normals,p=P.verticesRows):v==n&&(y=C.vertices,g=C.normals,p=C.verticesRows),P=0;P<d;P++){C=e.faceidx;var A=3*((b=p[x][P+1])+S),I=3*((m=p[x][P])+S),D=3*((T=p[x+1][P])+S),M=3*((k=p[x+1][P+1])+S),j=c[0]*y[b].x+c[3]*y[b].y+c[6]*y[b].z,N=c[0]*y[m].x+c[3]*y[m].y+c[6]*y[m].z,R=c[0]*y[T].x+c[3]*y[T].y+c[6]*y[T].z,L=c[0]*y[k].x+c[3]*y[k].y+c[6]*y[k].z,G=c[1]*y[b].x+c[4]*y[b].y+c[7]*y[b].z,F=c[1]*y[m].x+c[4]*y[m].y+c[7]*y[m].z,B=c[1]*y[T].x+c[4]*y[T].y+c[7]*y[T].z,V=c[1]*y[k].x+c[4]*y[k].y+c[7]*y[k].z,z=c[5]*y[b].y+c[8]*y[b].z,q=c[5]*y[m].y+c[8]*y[m].z,U=c[5]*y[T].y+c[8]*y[T].z,H=c[5]*y[k].y+c[8]*y[k].z;_[A]=j+v.x,_[I]=N+v.x,_[D]=R+v.x,_[M]=L+v.x,_[A+1]=G+v.y,_[I+1]=F+v.y,_[D+1]=B+v.y,_[M+1]=V+v.y,_[A+2]=z+v.z,_[I+2]=q+v.z,_[D+2]=U+v.z,_[M+2]=H+v.z,E[A]=a.r,E[I]=a.r,E[D]=a.r,E[M]=a.r,E[A+1]=a.g,E[I+1]=a.g,E[D+1]=a.g,E[M+1]=a.g,E[A+2]=a.b,E[I+2]=a.b,E[D+2]=a.b,E[M+2]=a.b,j=c[0]*g[b].x+c[3]*g[b].y+c[6]*g[b].z,N=c[0]*g[m].x+c[3]*g[m].y+c[6]*g[m].z,R=c[0]*g[T].x+c[3]*g[T].y+c[6]*g[T].z,L=c[0]*g[k].x+c[3]*g[k].y+c[6]*g[k].z,G=c[1]*g[b].x+c[4]*g[b].y+c[7]*g[b].z,F=c[1]*g[m].x+c[4]*g[m].y+c[7]*g[m].z,B=c[1]*g[T].x+c[4]*g[T].y+c[7]*g[T].z,V=c[1]*g[k].x+c[4]*g[k].y+c[7]*g[k].z,z=c[5]*g[b].y+c[8]*g[b].z,q=c[5]*g[m].y+c[8]*g[m].z,U=c[5]*g[T].y+c[8]*g[T].z,H=c[5]*g[k].y+c[8]*g[k].z,0===x?(w[A]=j,w[D]=R,w[M]=L,w[A+1]=G,w[D+1]=B,w[M+1]=V,w[A+2]=z,w[D+2]=U,w[M+2]=H,O[C]=b+S,O[C+1]=T+S,O[C+2]=k+S,e.faceidx+=3):x===u-1?(w[A]=j,w[I]=N,w[D]=R,w[A+1]=G,w[I+1]=F,w[D+1]=B,w[A+2]=z,w[I+2]=q,w[D+2]=U,O[C]=b+S,O[C+1]=m+S,O[C+2]=T+S,e.faceidx+=3):(w[A]=j,w[I]=N,w[M]=L,w[A+1]=G,w[I+1]=F,w[M+1]=V,w[A+2]=z,w[I+2]=q,w[M+2]=H,w[I]=N,w[D]=R,w[M]=L,w[I+1]=F,w[D+1]=B,w[M+1]=V,w[I+2]=q,w[D+2]=U,w[M+2]=H,O[C]=b+S,O[C+1]=m+S,O[C+2]=k+S,O[C+3]=m+S,O[C+4]=T+S,O[C+5]=k+S,e.faceidx+=6)}e.vertices+=h}},e.drawCone=function(e,r,o,i,a){if(r&&o){console.log(r),console.log(o),a=a||{r:0,g:0,b:0};var s=[o.x,o.y,o.z];s.x-=r.x,s.y-=r.y,s.z-=r.z;var l=t(s),u=n.length,c=(e=e.updateGeoGroup(u+2)).vertices,p=e.vertexArray,d=e.normalArray,f=e.colorArray,h=e.faceArray,m=3*c;for(s=new $3Dmol.Vector3(s[0],s[1],s[2]).normalize(),p[m]=r.x,p[m+1]=r.y,p[m+2]=r.z,d[m]=-s.x,d[m+1]=-s.y,d[m+2]=-s.z,f[m]=a.r,f[m+1]=a.g,f[m+2]=a.b,p[m+3]=o.x,p[m+4]=o.y,p[m+5]=o.z,d[m+3]=s.x,d[m+4]=s.y,d[m+5]=s.z,f[m+3]=a.r,f[m+4]=a.g,f[m+5]=a.b,m+=6,o=0;o<u;++o){var y=n[o].clone();y.multiplyScalar(i),s=l[0]*y.x+l[3]*y.y+l[6]*y.z;var g=l[1]*y.x+l[4]*y.y+l[7]*y.z;y=l[5]*y.y+l[8]*y.z,p[m]=s+r.x,p[m+1]=g+r.y,p[m+2]=y+r.z,d[m]=s,d[m+1]=g,d[m+2]=y,f[m]=a.r,f[m+1]=a.g,f[m+2]=a.b,m+=3}for(e.vertices+=u+2,r=e.faceidx,o=0;o<u;o++)i=c+2+o,a=c+2+(o+1)%u,h[r]=i,h[r+1]=a,h[r+2]=c,h[r+=3]=i,h[r+1]=a,h[r+2]=c+1,r+=3;e.faceidx+=6*u}};var o={cache:{},getVerticesForRadius:function(e){if(void 0!==this.cache[e])return this.cache[e];var t={vertices:[],verticesRows:[],normals:[]},n=16,r=10;1>e&&(n=10,r=8);var o,i,a=2*Math.PI,s=Math.PI;for(i=0;i<=r;i++){var l=[];for(o=0;o<=n;o++){var u=o/n,c=i/r,p={};p.x=-e*Math.cos(0+u*a)*Math.sin(0+c*s),p.y=e*Math.cos(0+c*s),p.z=e*Math.sin(0+u*a)*Math.sin(0+c*s),(u=new $3Dmol.Vector3(p.x,p.y,p.z)).normalize(),t.vertices.push(p),t.normals.push(u),l.push(t.vertices.length-1)}t.verticesRows.push(l)}return this.cache[e]=t}};return e.drawSphere=function(e,t,n,r){new $3Dmol.Vector3(t.x,t.y,t.z);for(var i=o.getVerticesForRadius(n),a=i.vertices,s=i.normals,l=(e=e.updateGeoGroup(a.length)).vertices,u=e.vertexArray,c=e.colorArray,p=e.faceArray,d=e.lineArray,f=e.normalArray,h=0,m=a.length;h<m;++h){var y=3*(l+h),g=a[h];u[y]=g.x+t.x,u[y+1]=g.y+t.y,u[y+2]=g.z+t.z,c[y]=r.r,c[y+1]=r.g,c[y+2]=r.b}for(e.vertices+=a.length,u=(i=i.verticesRows).length-1,r=0;r<u;r++)for(c=i[r].length-1,t=0;t<c;t++){h=e.faceidx,m=e.lineidx,g=3*(y=i[r][t+1]+l);var v=i[r][t]+l,b=3*v,S=i[r+1][t]+l,_=3*S,w=i[r+1][t+1]+l,E=3*w,O=s[y-l],C=s[v-l],P=s[S-l],x=s[w-l];Math.abs(a[y-l].y)===n?(f[g]=O.x,f[_]=P.x,f[E]=x.x,f[g+1]=O.y,f[_+1]=P.y,f[E+1]=x.y,f[g+2]=O.z,f[_+2]=P.z,f[E+2]=x.z,p[h]=y,p[h+1]=S,p[h+2]=w,d[m]=y,d[m+1]=S,d[m+2]=y,d[m+3]=w,d[m+4]=S,d[m+5]=w,e.faceidx+=3,e.lineidx+=6):Math.abs(a[S-l].y)===n?(f[g]=O.x,f[b]=C.x,f[_]=P.x,f[g+1]=O.y,f[b+1]=C.y,f[_+1]=P.y,f[g+2]=O.z,f[b+2]=C.z,f[_+2]=P.z,p[h]=y,p[h+1]=v,p[h+2]=S,d[m]=y,d[m+1]=v,d[m+2]=y,d[m+3]=S,d[m+4]=v,d[m+5]=S,e.faceidx+=3,e.lineidx+=6):(f[g]=O.x,f[b]=C.x,f[E]=x.x,f[g+1]=O.y,f[b+1]=C.y,f[E+1]=x.y,f[g+2]=O.z,f[b+2]=C.z,f[E+2]=x.z,f[b]=C.x,f[_]=P.x,f[E]=x.x,f[b+1]=C.y,f[_+1]=P.y,f[E+1]=x.y,f[b+2]=C.z,f[_+2]=P.z,f[E+2]=x.z,p[h]=y,p[h+1]=v,p[h+2]=w,p[h+3]=v,p[h+4]=S,p[h+5]=w,d[m]=y,d[m+1]=v,d[m+2]=y,d[m+3]=w,d[m+4]=v,d[m+5]=S,d[m+6]=S,d[m+7]=w,e.faceidx+=6,e.lineidx+=8)}},e}(),$3Dmol=$3Dmol||{},$3Dmol.GLModel=function(){function e(r,o){var s=[],l=[],u=null,c=null,p=!1,d=null,f=null,h=null,m={},y=new $3Dmol.Matrix4,g=!0,v=$3Dmol.elementColors.defaultColor,b=(o=o||{}).defaultcolors?o.defaultcolors:$3Dmol.elementColors.defaultColors,S=o.defaultSphereRadius?o.defaultSphereRadius:1.5,_=o.cartoonQuality?o.cartoonQuality:5,w=function(e,t){var r=S;return void 0!==t.radius?r=t.radius:n[e.elem]&&(r=n[e.elem]),void 0!==t.scale&&(r*=t.scale),r},E=function(e,t,n){var r=function(e,t){for(var n=null,r=-1,d=0,f=e.bonds.length;d<f;d++)if(e.bonds[d]!=t.index){l=e.bonds[d],u=s[l],c=new $3Dmol.Vector3(u.x,u.y,u.z),(p=c.clone()).sub(o),(a=p.clone()).cross(i);var h=a.lengthSq();if(h>r&&(n=a,.1<(r=h)))break}return n},o=new $3Dmol.Vector3(e.x,e.y,e.z),i=new $3Dmol.Vector3(t.x,t.y,t.z).clone(),a=null;if(i.sub(o),1===e.bonds.length)if(1===t.bonds.length)a=i.clone(),1e-4<Math.abs(a.x)?a.y+=1:a.x+=1;else{e=(n+1)%t.bonds.length;var l=t.bonds[e],u=s[l],c=new $3Dmol.Vector3(u.x,u.y,u.z),p=c.clone();p.sub(o),(a=p.clone()).cross(i)}else.01>(a=r(e,t)).lengthSq()&&(null!=(t=r(t,e))&&(a=t));return.01>a.lengthSq()&&(a=i.clone(),1e-4<Math.abs(a.x)?a.y+=1:a.x+=1),a.cross(i),a.normalize(),a},O=function(e,t,n,r,o,i){e[n]=r.x,e[n+1]=r.y,e[n+2]=r.z,t[n]=i.r,t[n+1]=i.g,t[n+2]=i.b,e[n+3]=o.x,e[n+4]=o.y,e[n+5]=o.z,t[n+3]=i.r,t[n+4]=i.g,t[n+5]=i.b},C=function(e,t){if(e.style.sphere){var n=e.style.sphere;if(!n.hidden){var r=$3Dmol.getColorFromStyle(e,n);if(n=w(e,n),(!0===e.clickable||e.hoverable)&&void 0!==e.intersectionShape){var o=new $3Dmol.Vector3(e.x,e.y,e.z);e.intersectionShape.sphere.push(new $3Dmol.Sphere(o,n))}$3Dmol.GLDraw.drawSphere(t,e,n,r)}}},P=function(e,t){if(e.style.sphere){var n=e.style.sphere;if(!n.hidden){var r=w(e,n);n=$3Dmol.getColorFromStyle(e,n);var o=(t=t.updateGeoGroup(1)).vertices,i=3*o,a=t.vertexArray,s=t.radiusArray;a[i]=e.x,a[i+1]=e.y,a[i+2]=e.z,(a=t.colorArray)[i]=n.r,a[i+1]=n.g,a[i+2]=n.b,s[o]=r,!0!==e.clickable&&!e.hoverable||void 0===e.intersectionShape||(n=new $3Dmol.Vector3(e.x,e.y,e.z),e.intersectionShape.sphere.push(new $3Dmol.Sphere(n,r))),t.vertices+=1}}},x=function(e,t,n,r){for(var o=(e=e.updateGeoGroup(4)).vertices,i=3*o,a=e.vertexArray,s=0;4>s;s++)a[i+3*s]=t.x,a[i+3*s+1]=t.y,a[i+3*s+2]=t.z;for(a=e.normalArray,t=e.colorArray,s=0;4>s;s++)t[i+3*s]=r.r,t[i+3*s+1]=r.g,t[i+3*s+2]=r.b;a[i+0]=-n,a[i+1]=n,a[i+2]=0,a[i+3]=-n,a[i+4]=-n,a[i+5]=0,a[i+6]=n,a[i+7]=-n,a[i+8]=0,a[i+9]=n,a[i+10]=n,a[i+11]=0,e.vertices+=4,(n=e.faceArray)[(r=e.faceidx)+0]=o,n[r+1]=o+1,n[r+2]=o+2,n[r+3]=o+2,n[r+4]=o+3,n[r+5]=o,e.faceidx+=6},T=function(e,t){if(e.style.sphere){var n=e.style.sphere;if(!n.hidden){var r=w(e,n);if(n=$3Dmol.getColorFromStyle(e,n),(!0===e.clickable||e.hoverable)&&void 0!==e.intersectionShape){var o=new $3Dmol.Vector3(e.x,e.y,e.z);e.intersectionShape.sphere.push(new $3Dmol.Sphere(o,r))}x(t,e,r,n)}}},k=function(e,t,n,r,o,i,a){i=(e=e.updateGeoGroup(4)).vertices,a=e.vertexArray;var s=e.colorArray,l=e.radiusArray,u=e.normalArray,c=o.r,p=o.g;o=o.b;for(var d=3*i,f=0;4>f;f++){if(a[d]=t.x,u[d]=n.x,s[d]=c,a[++d]=t.y,u[d]=n.y,s[d]=p,a[++d]=t.z,u[d]=n.z,2>f)s[d]=o;else{var h=-o;0==h&&(h=-1e-4),s[d]=h}d++}e.vertices+=4,l[i]=-r,l[i+1]=r,l[i+2]=-r,l[i+3]=r,(t=e.faceArray)[(n=e.faceidx)+0]=i,t[n+1]=i+1,t[n+2]=i+2,t[n+3]=i+2,t[n+4]=i+3,t[n+5]=i,e.faceidx+=6};this.getCrystData=function(){return m.cryst?m.cryst:null},this.getSymmetries=function(){return void 0===m.symmetries&&(m.symmetries=[y]),m.symmetries},this.setSymmetries=function(e){m.symmetries=void 0===e?[y]:e},this.getID=function(){return r},this.getNumFrames=function(){return null!=l.numFrames?l.numFrames:l.length};var A=function(e,t,n,r){return(e=t-e)<-n?t+r:e>n?t-r:t};this.setFrame=function(e){var t=this.getNumFrames();return new Promise(function(n,r){0==t&&n(),(0>e||e>=t)&&(e=t-1),null!=l.url?$3Dmol.getbin(l.url+"/traj/frame/"+e+"/"+l.path,null,"POST").then(function(e){e=new Float32Array(e,44);for(var t=0,r=0;r<s.length;r++)s[r].x=e[t++],s[r].y=e[t++],s[r].z=e[t++];if(u&&c&&u&&c)for(var o=.9*(e=u[0]),i=.9*(t=u[1]),a=.9*(r=u[2]),l=0;l<c.length;l++)for(var p=c[l],d=1;d<p.length;d++){var f=s[p[d][0]],h=s[p[d][1]];f.x=A(h.x,f.x,o,e),f.y=A(h.y,f.y,i,t),f.z=A(h.z,f.z,a,r)}n()}).catch(r):(s=l[e],n()),d=null})},this.addFrame=function(e){l.push(e)},this.vibrate=function(e,t){t=t||1,e=e||10,e--;for(var n=1;n<=e;n++){for(var r=[],o=0;o<s.length;o++){var i=new $3Dmol.Vector3($3Dmol.getAtomProperty(s[o],"dx"),$3Dmol.getAtomProperty(s[o],"dy"),$3Dmol.getAtomProperty(s[o],"dz")),a=new $3Dmol.Vector3(s[o].x,s[o].y,s[o].z);for(var u in i.multiplyScalar(n*t/e),a.add(i),i={},s[o])i[u]=s[o][u];i.x=a.x,i.y=a.y,i.z=a.z,r.push(i)}l.push(r)}l.unshift(s)},this.setAtomDefaults=function(e){for(var n=0;n<e.length;n++){var o=e[n];o&&(o.style=o.style||t,o.color=o.color||b[o.elem]||v,o.model=r,o.clickable||o.hoverable)&&(o.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]})}},this.addMolData=function(e,t,n){if(n=n||{},e=$3Dmol.GLModel.parseMolData(e,t,n),g=!n.duplicateAssemblyAtoms,(t=e.modelData)&&(m=Array.isArray(t)?t[0]:t),u=e.box?e.box:null,0==l.length){for(t=0;t<e.length;t++)0!=e[t].length&&l.push(e[t]);l[0]&&(s=l[0])}else if(n.frames)for(t=0;t<e.length;t++)l.push(e[t]);else for(t=0;t<e.length;t++)this.addAtoms(e[t]);for(t=0;t<l.length;t++)this.setAtomDefaults(l[t],r);n.vibrate&&n.vibrate.frames&&n.vibrate.amplitude&&this.vibrate(n.vibrate.frames,n.vibrate.amplitude),n.style&&this.setStyle({},n.style)},this.setDontDuplicateAtoms=function(e){g=e},this.setModelData=function(e){m=e};var I=function(e,t){if(e==t)return!0;if("string"==typeof t&&"number"==typeof e&&(t=t.match(/(-?\d+)\s*-\s*(-?\d+)/))){var n=parseInt(t[1]),r=parseInt(t[2]);if(t&&e>=n&&e<=r)return!0}return!1};this.atomIsSelected=function(e,t){var n;if(void 0===t)return!0;var r,o=!!t.invert,i=!0;for(r in t)if("and"==r||"or"==r||"not"==r){if("not"==r){if(this.atomIsSelected(e,t[r])){i=!1;break}}else if("and"==r){var a=t[r];for(n=0;n<a.length;n++)if(!this.atomIsSelected(e,a[n])){i=!1;break}}else if("or"==r){for(i=t[r],a=!0,n=0;n<i.length;n++){if(this.atomIsSelected(e,i[n])){a=!0;break}a=!1}i=a}}else if("predicate"===r){if(!t.predicate(e)){i=!1;break}}else if("properties"==r&&e[r])for(var s in t.properties){if(void 0===e.properties[s]){i=!1;break}if(e.properties[s]!=t.properties[s]){i=!1;break}}else if(t.hasOwnProperty(r)&&"props"!=r&&"invert"!=r&&"model"!=r&&"byres"!=r&&"expand"!=r&&"within"!=r&&"and"!=r&&"or"!=r&&"not"!=r){if(void 0===e[r]){i=!1;break}if(a=!1,"bonds"===r){if((n=t[r])!=e.bonds.length){i=!1;break}}else if($.isArray(t[r])){var l=t[r],u=e[r];for(n=0;n<l.length;n++)if(I(u,l[n])){a=!0;break}if(!a){i=!1;break}}else if(n=t[r],!I(e[r],n)){i=!1;break}}return o?!i:i},this.selectedAtoms=function(e,t){var n,r=[];e=e||{},t||(t=s);for(var o=t.length,i=0;i<o;i++)(n=t[i])&&this.atomIsSelected(n,e)&&r.push(n);if(e.hasOwnProperty("expand")){if(0>=(o=parseFloat(e.expand)))o=r;else{for(i=$3Dmol.getExtent(r),n=[[],[],[]],t=0;3>t;t++)n[0][t]=i[0][t]-o,n[1][t]=i[1][t]+o,n[2][t]=i[2][t];for(o=[],t=0;t<s.length;t++){var a=s[t].x,l=s[t].y,u=s[t].z;a>=n[0][0]&&a<=n[1][0]&&l>=n[0][1]&&l<=n[1][1]&&u>=n[0][2]&&u<=n[1][2]&&(a>=i[0][0]&&a<=i[1][0]&&l>=i[0][1]&&l<=i[1][1]&&u>=i[0][2]&&u<=i[1][2]||o.push(s[t]))}}for(a=r.length,i=0;i<o.length;i++)for(var c=0;c<a;c++)(t=D(o[i],r[c]))<(n=Math.pow(e.expand,2))&&0<t&&r.push(o[i])}if(e.hasOwnProperty("within")&&e.within.hasOwnProperty("sel")&&e.within.hasOwnProperty("distance")){for(a=this.selectedAtoms(e.within.sel,s),o={},i=0;i<a.length;i++)for(c=0;c<r.length;c++)(t=D(a[i],r[c]))<(n=Math.pow(parseFloat(e.within.distance),2))&&0<t&&(o[c]=1);if(i=[],e.within.invert)for(c=0;c<r.length;c++)o[c]||i.push(r[c]);else for(c in o)i.push(r[c]);r=i}if(e.hasOwnProperty("byres"))for(e={},t=[],o=[],i=0;i<r.length;i++)if(a=(n=r[i]).chain,l=n.resi,void 0===e[a]&&(e[a]={}),n.hasOwnProperty("resi")&&void 0===e[a][l])for(e[a][l]=!0,o.push(n);0<o.length;)if(a=(n=o.pop()).chain,l=n.resi,void 0===t[n.index])for(t[n.index]=!0,c=0;c<n.bonds.length;c++)void 0===t[(u=s[n.bonds[c]]).index]&&u.hasOwnProperty("resi")&&u.chain==a&&u.resi==l&&(o.push(u),r.push(u));return r};var D=function(e,t){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)+Math.pow(t.z-e.z,2)};this.addAtoms=function(e){d=null;var n,o=s.length,i=[];for(n=0;n<e.length;n++)void 0===e[n].index&&(e[n].index=n),void 0===e[n].serial&&(e[n].serial=n),i[e[n].index]=o+n;for(n=0;n<e.length;n++){var a=i[(o=e[n]).index],l=$.extend(!1,{},o);l.index=a,l.bonds=[],l.bondOrder=[],l.model=r,l.style=l.style||t,void 0===l.color&&(l.color=b[l.elem]||v),a=o.bonds?o.bonds.length:0;for(var u=0;u<a;u++){var c=i[o.bonds[u]];void 0!==c&&(l.bonds.push(c),l.bondOrder.push(o.bondOrder?o.bondOrder[u]:1))}s.push(l)}},this.removeAtoms=function(e){d=null;var t,n=[];for(t=0;t<e.length;t++)n[e[t].index]=!0;for(e=[],t=0;t<s.length;t++){var r=s[t];n[r.index]||e.push(r)}s=[],this.addAtoms(e)},this.setStyle=function(t,n,r){for(var o in void 0===n&&void 0===r&&(n=t,t={}),t)e.validAtomSelectionSpecs.hasOwnProperty(o)||console.log("Unknown selector "+o);for(o in n)e.validAtomStyleSpecs.hasOwnProperty(o)||console.log("Unknown style "+o);var i=!1,a=function(e){for(var a=u.selectedAtoms(t,e),s=0;s<e.length;s++)e[s]&&(e[s].capDrawn=!1);for(s=0;s<a.length;s++)for(o in i=!0,(a[s].clickable||a[s].hoverable)&&(a[s].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),r||(a[s].style={}),n)if(n.hasOwnProperty(o))for(var l in a[s].style[o]=a[s].style[o]||{},n[o])a[s].style[o][l]=n[o][l]},u=this;a(s);for(var c=0;c<l.length;c++)l[c]!==s&&a(l[c]);i&&(d=null)},this.setClickable=function(t,n,r){for(var o in t)e.validAtomSelectionSpecs.hasOwnProperty(o)||console.log("Unknown selector "+o);if(n=!!n,r&&"function"!=typeof r)console.log("Callback is not a function");else{var i=(o=this.selectedAtoms(t,s)).length;for(t=0;t<i;t++)o[t].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},o[t].clickable=n,r&&(o[t].callback=r);0<i&&(d=null)}},this.setHoverable=function(t,n,r,o){for(var i in t)e.validAtomSelectionSpecs.hasOwnProperty(i)||console.log("Unknown selector "+i);if(n=!!n,r&&"function"!=typeof r)console.log("Hover_callback is not a function");else if(o&&"function"!=typeof o)console.log("Unhover_callback is not a function");else{var a=(i=this.selectedAtoms(t,s)).length;for(t=0;t<a;t++)i[t].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},i[t].hoverable=n,r&&(i[t].hover_callback=r),o&&(i[t].unhover_callback=o);0<a&&(d=null)}},this.setColorByElement=function(e,t){var n;if((n=null!==d)&&(n=h,n=t&&n?JSON.stringify(t)==JSON.stringify(n):t==n),!n){h=t;var r=this.selectedAtoms(e,r);for(0<r.length&&(d=null),e=0;e<r.length;e++)void 0!==t[(n=r[e]).elem]&&(n.color=t[n.elem])}},this.setColorByProperty=function(e,t,n,r){var o=this.selectedAtoms(e,o);for(h=null,0<o.length&&(d=null),void 0!==$3Dmol.Gradient.builtinGradients[n]&&(n=new $3Dmol.Gradient.builtinGradients[n]),r||(r=n.range()),r||(r=$3Dmol.getPropertyRange(o,t)),e=0;e<o.length;e++){var i=o[e];null!=$3Dmol.getAtomProperty(i,t)&&(i.color=n.valueToHex(parseFloat(i.properties[t]),r))}},this.setColorByFunction=function(e,t){var n=this.selectedAtoms(e,n);if("function"==typeof t)for(h=null,0<n.length&&(d=null),i=0;i<n.length;i++)a=n[i],a.color=t(a)},this.toCDObject=function(e){var t={a:[],b:[]};e&&(t.s=[]);for(var n=0;n<s.length;n++){var r={},o=s[n];if(r.x=o.x,r.y=o.y,r.z=o.z,"C"!=o.elem&&(r.l=o.elem),e){for(var i=0;i<t.s.length&&JSON.stringify(o.style)!==JSON.stringify(t.s[i]);)i++;i===t.s.length&&t.s.push(o.style),0!==i&&(r.s=i)}for(t.a.push(r),r=0;r<o.bonds.length;r++){i=n;var a=o.bonds[r];i>=a||(i={b:i,e:a},1!=(a=o.bondOrder[r])&&(i.o=a),t.b.push(i))}}return t},this.globj=function(e,t){if(null===d){var n=s,r=t;r=r||{};var o=new $3Dmol.Object3D,i=[],a={},l={},u=C;if(r.supportsImposters){u=T;var c=new $3Dmol.Geometry(!0);c.imposter=!0;var h=new $3Dmol.Geometry(!0,!0);h.imposter=!0,h.sphereGeometry=new $3Dmol.Geometry(!0),h.sphereGeometry.imposter=!0,h.drawnCaps={}}else r.supportsAIA?(u=P,(c=new $3Dmol.Geometry(!1,!0,!0)).instanced=!0):c=new $3Dmol.Geometry(!0),h=new $3Dmol.Geometry(!0);var y,v,b={},S=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],A=0;for(v=n.length;A<v;A++){var I=n[A];if(I&&I.style){(I.clickable||I.hoverable)&&void 0===I.intersectionShape&&(I.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]});var D={line:void 0,cross:void 0,stick:void 0,sphere:void 0};for(y in D)D[y]=I.style[y]?I.style[y].opacity?parseFloat(I.style[y].opacity):1:void 0,b[y]?null!=D[y]&&b[y]!=D[y]&&(console.log("Warning: "+y+" opacity is ambiguous"),b[y]=1):b[y]=D[y];u(I,c);var M=I;if(M.style.clicksphere){var j=M.style.clicksphere;if(!j.hidden){var N=w(M,j);if((!0===M.clickable||M.hoverable)&&void 0!==M.intersectionShape){var R=new $3Dmol.Vector3(M.x,M.y,M.z);M.intersectionShape.sphere.push(new $3Dmol.Sphere(R,N))}}}var L=I,G=l;if(L.style.cross){var F=L.style.cross;if(!F.hidden){var B=F.linewidth||1;G[B]||(G[B]=new $3Dmol.Geometry);var V=G[B].updateGeoGroup(6),z=w(L,F),q=[[z,0,0],[-z,0,0],[0,z,0],[0,-z,0],[0,0,z],[0,0,-z]],U=L.clickable||L.hoverable;U&&void 0===L.intersectionShape&&(L.intersectionShape={sphere:[],cylinder:[],line:[]});for(var H=$3Dmol.getColorFromStyle(L,F),W=V.vertexArray,K=V.colorArray,$=0;6>$;$++){var Q=3*V.vertices;if(V.vertices++,W[Q]=L.x+q[$][0],W[Q+1]=L.y+q[$][1],W[Q+2]=L.z+q[$][2],K[Q]=H.r,K[Q+1]=H.g,K[Q+2]=H.b,U){var Y=new $3Dmol.Vector3(q[$][0],q[$][1],q[$][2]);Y.multiplyScalar(.1),Y.set(Y.x+L.x,Y.y+L.y,Y.z+L.z),L.intersectionShape.line.push(Y)}}}}var X=void 0,Z=void 0,J=void 0,ee=void 0,te=void 0,ne=void 0,re=I,oe=n,ie=a;if(re.style.line){var ae=re.style.line;if(!ae.hidden){var se=ae.linewidth||1;ie[se]||(ie[se]=new $3Dmol.Geometry);for(var le=ie[se].updateGeoGroup(6*re.bonds.length),ue=le.vertexArray,ce=le.colorArray,pe=0;pe<re.bonds.length;pe++){var de=oe[re.bonds[pe]];if(de.style.line&&!(re.serial>=de.serial)){var fe=new $3Dmol.Vector3(re.x,re.y,re.z),he=new $3Dmol.Vector3(de.x,de.y,de.z),me=fe.clone().add(he).multiplyScalar(.5),ye=!1,ge=re.clickable||re.hoverable,ve=de.clickable||de.hoverable;(ge||ve)&&(ge&&(void 0===re.intersectionShape&&(re.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),re.intersectionShape.line.push(fe),re.intersectionShape.line.push(me)),ve&&(void 0===de.intersectionShape&&(de.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),de.intersectionShape.line.push(me),de.intersectionShape.line.push(he)));var be=$3Dmol.getColorFromStyle(re,re.style.line),Se=$3Dmol.getColorFromStyle(de,de.style.line);if(re.bondStyles&&re.bondStyles[pe]){var _e=re.bondStyles[pe];if(!_e.iswire)continue;_e.radius&&(bondR=_e.radius),_e.singleBond&&(ye=!0),void 0!==_e.color1&&(be=$3Dmol.CC.color(_e.color1)),void 0!==_e.color2&&(Se=$3Dmol.CC.color(_e.color2))}var we=3*le.vertices;if(1<re.bondOrder[pe]&&4>re.bondOrder[pe]&&!ye){var Ee=E(re,de,pe),Oe=he.clone();Oe.sub(fe),2==re.bondOrder[pe]?(Ee.multiplyScalar(.1),(ee=fe.clone()).add(Ee),(J=fe.clone()).sub(Ee),(Z=ee.clone()).add(Oe),(X=J.clone()).add(Oe),be==Se?(le.vertices+=4,O(ue,ce,we,ee,Z,be),O(ue,ce,we+6,J,X,be)):(le.vertices+=8,Oe.multiplyScalar(.5),(te=ee.clone()).add(Oe),(ne=J.clone()).add(Oe),O(ue,ce,we,ee,te,be),O(ue,ce,we+6,te,Z,Se),O(ue,ce,we+12,J,ne,be),O(ue,ce,we+18,ne,X,Se))):3==re.bondOrder[pe]&&(Ee.multiplyScalar(.1),(ee=fe.clone()).add(Ee),(J=fe.clone()).sub(Ee),(Z=ee.clone()).add(Oe),(X=J.clone()).add(Oe),be==Se?(le.vertices+=6,O(ue,ce,we,fe,he,be),O(ue,ce,we+6,ee,Z,be),O(ue,ce,we+12,J,X,be)):(le.vertices+=12,Oe.multiplyScalar(.5),(te=ee.clone()).add(Oe),(ne=J.clone()).add(Oe),O(ue,ce,we,fe,me,be),O(ue,ce,we+6,me,he,Se),O(ue,ce,we+12,ee,te,be),O(ue,ce,we+18,te,Z,Se),O(ue,ce,we+24,J,ne,be),O(ue,ce,we+30,ne,X,Se)))}else be==Se?(le.vertices+=2,O(ue,ce,we,fe,he,be)):(le.vertices+=4,O(ue,ce,we,fe,me,be),O(ue,ce,we+6,me,he,Se))}}}}var Ce=void 0,Pe=void 0,xe=void 0,Te=void 0,ke=void 0,Ae=void 0,Ie=void 0,De=void 0,Me=void 0,je=void 0,Ne=void 0,Re=void 0,Le=void 0,Ge=I,Fe=n,Be=h;if(Ge.style.stick){var Ve=Ge.style.stick;if(!Ve.hidden){var ze=Ve.radius||.25,qe=Ve.singleBonds||!1,Ue=0,He=0,We=$3Dmol.getColorFromStyle(Ge,Ve);!Ge.capDrawn&&4>Ge.bonds.length&&(Ue=2);var Ke=$3Dmol.GLDraw.drawCylinder;Be.imposter&&(Ke=k);for(var $e=0;$e<Ge.bonds.length;$e++){var Qe=Fe[Ge.bonds[$e]];if(Ge.serial<Qe.serial){var Ye=Qe.style;if(Ye.stick&&!Ye.stick.hidden){var Xe=$3Dmol.getColorFromStyle(Qe,Ye.stick);if(xe=ze,Re=qe,Ge.bondStyles&&Ge.bondStyles[$e]){if((Le=Ge.bondStyles[$e]).iswire)continue;Le.radius&&(xe=Le.radius),Le.singleBond&&(Re=!0),void 0!==Le.color1&&(We=$3Dmol.CC.color(Le.color1)),void 0!==Le.color2&&(Xe=$3Dmol.CC.color(Le.color2))}var Ze=new $3Dmol.Vector3(Ge.x,Ge.y,Ge.z),Je=new $3Dmol.Vector3(Qe.x,Qe.y,Qe.z);if(1===Ge.bondOrder[$e]||Re){if(!Qe.capDrawn&&4>Qe.bonds.length&&(He=2),We!=Xe?(Ke(Be,Ze,Pe=(new $3Dmol.Vector3).addVectors(Ze,Je).multiplyScalar(.5),xe,We,Ue,0),Ke(Be,Pe,Je,xe,Xe,0,He)):Ke(Be,Ze,Je,xe,We,Ue,He),Ae=Ge.clickable||Ge.hoverable,Ie=Qe.clickable||Qe.hoverable,Ae||Ie){if(Pe||(Pe=(new $3Dmol.Vector3).addVectors(Ze,Je).multiplyScalar(.5)),Ae){var et=new $3Dmol.Cylinder(Ze,Pe,xe),tt=new $3Dmol.Sphere(Ze,xe);Ge.intersectionShape.cylinder.push(et),Ge.intersectionShape.sphere.push(tt)}if(Ie){var nt=new $3Dmol.Cylinder(Je,Pe,xe),rt=new $3Dmol.Sphere(Je,xe);Qe.intersectionShape.cylinder.push(nt),Qe.intersectionShape.sphere.push(rt)}}}else if(1<Ge.bondOrder[$e]){var ot=0,it=0;xe!=ze&&(it=ot=2);var at=Je.clone();if(at.sub(Ze),ke=E(Ge,Qe,$e),2==Ge.bondOrder[$e]){Te=xe/2.5,(ke=E(Ge,Qe,$e)).multiplyScalar(1.5*Te);var st=Ze.clone();st.add(ke);var lt=Ze.clone();lt.sub(ke);var ut=st.clone();ut.add(at);var ct=lt.clone();ct.add(at),We!=Xe?(Pe=(new $3Dmol.Vector3).addVectors(st,ut).multiplyScalar(.5),Ce=(new $3Dmol.Vector3).addVectors(lt,ct).multiplyScalar(.5),Ke(Be,st,Pe,Te,We,ot,0),Ke(Be,Pe,ut,Te,Xe,0,it),Ke(Be,lt,Ce,Te,We,ot,0),Ke(Be,Ce,ct,Te,Xe,0,it)):(Ke(Be,st,ut,Te,We,ot,it),Ke(Be,lt,ct,Te,We,ot,it)),Ae=Ge.clickable||Ge.hoverable,Ie=Qe.clickable||Qe.hoverable,(Ae||Ie)&&(Pe||(Pe=(new $3Dmol.Vector3).addVectors(st,ut).multiplyScalar(.5)),Ce||(Ce=(new $3Dmol.Vector3).addVectors(lt,ct).multiplyScalar(.5)),Ae&&(De=new $3Dmol.Cylinder(st,Pe,Te),Me=new $3Dmol.Cylinder(lt,Ce,Te),Ge.intersectionShape.cylinder.push(De),Ge.intersectionShape.cylinder.push(Me)),Ie&&(je=new $3Dmol.Cylinder(ut,Pe,Te),Ne=new $3Dmol.Cylinder(ct,Ce,Te),Qe.intersectionShape.cylinder.push(je),Qe.intersectionShape.cylinder.push(Ne)))}else if(3==Ge.bondOrder[$e]&&(Te=xe/4,ke.cross(at),ke.normalize(),ke.multiplyScalar(3*Te),(st=Ze.clone()).add(ke),(lt=Ze.clone()).sub(ke),(ut=st.clone()).add(at),(ct=lt.clone()).add(at),We!=Xe?(Pe=(new $3Dmol.Vector3).addVectors(st,ut).multiplyScalar(.5),Ce=(new $3Dmol.Vector3).addVectors(lt,ct).multiplyScalar(.5),mp3=(new $3Dmol.Vector3).addVectors(Ze,Je).multiplyScalar(.5),Ke(Be,st,Pe,Te,We,ot,0),Ke(Be,Pe,ut,Te,Xe,0,it),Ke(Be,Ze,mp3,Te,We,Ue,0),Ke(Be,mp3,Je,Te,Xe,0,He),Ke(Be,lt,Ce,Te,We,ot,0),Ke(Be,Ce,ct,Te,Xe,0,it)):(Ke(Be,st,ut,Te,We,ot,it),Ke(Be,Ze,Je,Te,We,Ue,He),Ke(Be,lt,ct,Te,We,ot,it)),Ae=Ge.clickable||Ge.hoverable,Ie=Qe.clickable||Qe.hoverable,Ae||Ie)){if(Pe||(Pe=(new $3Dmol.Vector3).addVectors(st,ut).multiplyScalar(.5)),Ce||(Ce=(new $3Dmol.Vector3).addVectors(lt,ct).multiplyScalar(.5)),mp3||(mp3=(new $3Dmol.Vector3).addVectors(Ze,Je).multiplyScalar(.5)),Ae){De=new $3Dmol.Cylinder(st.clone(),Pe.clone(),Te),Me=new $3Dmol.Cylinder(lt.clone(),Ce.clone(),Te);var pt=new $3Dmol.Cylinder(Ze.clone(),mp3.clone(),Te);Ge.intersectionShape.cylinder.push(De),Ge.intersectionShape.cylinder.push(Me),Ge.intersectionShape.cylinder.push(pt)}if(Ie){je=new $3Dmol.Cylinder(ut.clone(),Pe.clone(),Te),Ne=new $3Dmol.Cylinder(ct.clone(),Ce.clone(),Te);var dt=new $3Dmol.Cylinder(Je.clone(),mp3.clone(),Te);Qe.intersectionShape.cylinder.push(je),Qe.intersectionShape.cylinder.push(Ne),Qe.intersectionShape.cylinder.push(dt)}}}}}}var ft=!1,ht=0,mt=!1;for($e=0;$e<Ge.bonds.length;$e++)Re=qe,Ge.bondStyles&&Ge.bondStyles[$e]&&((Le=Ge.bondStyles[$e]).singleBond&&(Re=!0),Le.radius&&Le.radius!=ze&&(mt=!0)),(Re||1==Ge.bondOrder[$e])&&ht++;mt?0<ht&&(ft=!0):0==ht&&0<Ge.bonds.length&&(ft=!0),ft&&(xe=ze,Be.imposter?x(Be.sphereGeometry,Ge,xe,We):$3Dmol.GLDraw.drawSphere(Be,Ge,xe,We))}}void 0===I.style.cartoon||I.style.cartoon.hidden||("spectrum"!==I.style.cartoon.color||"number"!=typeof I.resi||I.hetflag||(I.resi<S[0]&&(S[0]=I.resi),I.resi>S[1]&&(S[1]=I.resi)),i.push(I))}}if(0<i.length&&$3Dmol.drawCartoon(o,i,S,_),c&&0<c.vertices){if(c.initTypedArrays(),c.imposter)var yt=new $3Dmol.SphereImposterMaterial({ambient:0,vertexColors:!0,reflectivity:0});else if(c.instanced){var gt=new $3Dmol.Geometry(!0);$3Dmol.GLDraw.drawSphere(gt,{x:0,y:0,z:0},1,new $3Dmol.Color(.5,.5,.5)),gt.initTypedArrays(),yt=new $3Dmol.InstancedMaterial({sphereMaterial:new $3Dmol.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),sphere:gt})}else yt=new $3Dmol.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0});1>b.sphere&&0<=b.sphere&&(yt.transparent=!0,yt.opacity=b.sphere),gt=new $3Dmol.Mesh(c,yt),o.add(gt)}if(0<h.vertices){var vt=h.sphereGeometry;vt&&void 0!==vt.vertices&&0!=vt.vertices||(vt=null),h.initTypedArrays(),vt&&vt.initTypedArrays();var bt={ambient:0,vertexColors:!0,reflectivity:0};if(h.imposter)var St=new $3Dmol.StickImposterMaterial(bt),_t=new $3Dmol.SphereImposterMaterial(bt);else St=new $3Dmol.MeshLambertMaterial(bt),_t=new $3Dmol.MeshLambertMaterial(bt),St.wireframe&&(h.setUpWireframe(),vt&&vt.setUpWireframe());1>b.stick&&0<=b.stick&&(St.transparent=!0,St.opacity=b.stick,_t.transparent=!0,_t.opacity=b.stick);var wt=new $3Dmol.Mesh(h,St);if(o.add(wt),vt){var Et=new $3Dmol.Mesh(vt,_t);o.add(Et)}}for(A in a)if(a.hasOwnProperty(A)){var Ot=A,Ct=new $3Dmol.LineBasicMaterial({linewidth:Ot,vertexColors:!0});1>b.line&&0<=b.line&&(Ct.transparent=!0,Ct.opacity=b.line),a[A].initTypedArrays();var Pt=new $3Dmol.Line(a[A],Ct,$3Dmol.LinePieces);o.add(Pt)}for(A in l)if(l.hasOwnProperty(A)){Ot=A;var xt=new $3Dmol.LineBasicMaterial({linewidth:Ot,vertexColors:!0});1>b.cross&&0<=b.cross&&(xt.transparent=!0,xt.opacity=b.cross),l[A].initTypedArrays();var Tt=new $3Dmol.Line(l[A],xt,$3Dmol.LinePieces);o.add(Tt)}if(g&&m.symmetries&&0<m.symmetries.length){var kt,At=new $3Dmol.Object3D;for(kt=0;kt<m.symmetries.length;kt++){new $3Dmol.Object3D;var It=o.clone();It.matrix.copy(m.symmetries[kt]),It.matrixAutoUpdate=!1,At.add(It)}d=At}else d=o;f&&(e.remove(f),f=null),f=d.clone(),p&&(f.setVisible(!1),d.setVisible(!1)),e.add(f)}},this.removegl=function(e){f&&(void 0!==f.geometry&&f.geometry.dispose(),void 0!==f.material&&f.material.dispose(),e.remove(f),f=null),d=null},this.hide=function(){p=!0,f&&f.setVisible(!1),d&&d.setVisible(!1)},this.show=function(){p=!1,f&&f.setVisible(!0),d&&d.setVisible(!0)},this.addPropertyLabels=function(e,t,n,r){var o=this.selectedAtoms(t,o);for(t=$.extend(!0,{},r),r=0;r<o.length;r++){var i=o[r],a=null;void 0!==i[e]?a=String(i[e]):(i.properties[e],a=String(i.properties[e])),null!=a&&(t.position=i,n.addLabel(a,t))}},this.addResLabels=function(e,t,n){for(var r=this.selectedAtoms(e,r),o={},i=0;i<r.length;i++){var a=(e=r[i]).chain,s=e.resn+""+e.resi;o[a]||(o[a]={}),o[a][s]||(o[a][s]=[]),o[a][s].push(e)}for(a in n=$.extend(!0,{},n),o)if(o.hasOwnProperty(a)){var l=o[a];for(s in l)if(l.hasOwnProperty(s)){r=l[s];var u=new $3Dmol.Vector3(0,0,0);for(i=0;i<r.length;i++)e=r[i],u.x+=e.x,u.y+=e.y,u.z+=e.z;u.divideScalar(r.length),n.position=u,t.addLabel(s,n)}}};this.setCoordinatesFromURL=function(e,t){l=[];var n=this;return u&&function(){c=[];var e=new Int8Array(s.length);e.fill(0);for(var t=function(n,r,o){o.push([n,r]),r=s[n],e[n]=1;for(var i=0;i<r.bonds.length;i++){var a=r.bonds[i];s[a]&&!e[a]&&t(a,n,o)}},n=0;n<s.length;n++)if(s[n]&&!e[n]){var r=[];t(n,-1,r),c.push(r)}}(),new Promise(function(r,o){e.startsWith("http://")||(e="http://"+e),$.get(e+"/traj/numframes/"+t,function(i){isNaN(parseInt(i))||(l.push(s),l.numFrames=i,l.url=e,l.path=t,n.setFrame(0).then(function(){r()}).catch(o))})})},this.setCoordinates=function(t,n){if(!t)return[];if(/\.gz$/.test(n=n||"")){n=n.replace(/\.gz$/,"");try{t=pako.inflate(t,{to:"string"})}catch(e){console.log(e)}}if({mdcrd:"",inpcrd:"",pdb:"",netcdf:""}.hasOwnProperty(n)){l=[];var r=s.length;for(t=e.parseCrd(t,n),n=0;n<t.length;){for(var o=[],i=0;i<r;i++){var a,u={};for(a in s[i])u[a]=s[i][a];o[i]=u,o[i].x=t[n++],o[i].y=t[n++],o[i].z=t[n++]}l.push(o)}return s=l[0],l}return[]},this.addAtomSpecs=function(t){for(var n=0;n<t.length;n++)e.validAtomSelectionSpecs.hasOwnProperty(t[n])&&e.validAtomSelectionSpecs.push(t[n])}}var t={line:{}},n={H:1.2,Li:1.82,LI:1.82,Na:2.27,NA:2.27,K:2.75,C:1.7,N:1.55,O:1.52,F:1.47,P:1.8,S:1.8,CL:1.75,Cl:1.75,BR:1.85,Br:1.85,SE:1.9,Se:1.9,ZN:1.39,Zn:1.39,CU:1.4,Cu:1.4,NI:1.63,Ni:1.63};e.validElements="H Li LI Na NA K C N O F P S CL Cl BR Br SE Se ZN Zn CU Cu NI Ni".split(" "),e.validAtomSpecs={resn:{type:"string",valid:!0},x:{type:"number",valid:!1,step:.1},y:{type:"number",valid:!1,step:.1},z:{type:"number",valid:!1,step:.1},color:{type:"color",gui:!0},surfaceColor:{type:"color",gui:!0},elem:{type:"element",gui:!0},hetflag:{type:"boolean",valid:!1},chain:{type:"string",gui:!0},resi:{type:"number",gui:!0},icode:{type:"number",valid:!1,step:.1},rescode:{type:"number",valid:!1,step:.1},serial:{type:"number",valid:!1,step:.1},atom:{type:"string",valid:!1},bonds:{type:"array",valid:!1},ss:{type:"string",valid:!1},singleBonds:{type:"boolean",valid:!1},bondOrder:{type:"array",valid:!1},properties:{type:"properties",valid:!1},b:{type:"number",valid:!1,step:.1},pdbline:{type:"string",valid:!1},clickable:{type:"boolean",valid:!1},callback:{type:"function",valid:!1},invert:{type:"boolean",valid:!1},reflectivity:{type:"number",gui:!0,step:.1},altLoc:{type:"invalid",valid:!1}},e.validAtomSelectionSpecs=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}(e.validAtomSpecs,{model:{type:"string",valid:!1},bonds:{type:"string",valid:!1},predicate:{type:"string",valid:!1},invert:{type:"string",valid:!1},byres:{type:"string",valid:!1},expand:{type:"string",valid:!1},within:{type:"string",valid:!1},and:{type:"string",valid:!1},or:{type:"string",valid:!1},not:{type:"string",valid:!1}});var r={hidden:{type:"boolean",gui:!0},singleBonds:{type:"boolean",gui:!0},colorscheme:{type:"colorscheme",gui:!0},color:{type:"color",gui:!0},radius:{type:"number",gui:!0,step:.1,default:1.5,min:0}};return e.validAtomStyleSpecs={line:{validItems:{hidden:{type:"boolean",gui:!0},linewidth:{type:"number",gui:!0,step:.1,default:1},colorscheme:{type:"colorscheme",gui:!0},color:{type:"color",gui:!0}},gui:!0},cross:{validItems:{hidden:{type:"boolean",gui:!0},linewidth:{type:"number",gui:!1,step:.1,default:1,min:0},colorscheme:{type:"colorscheme",gui:!0},color:{type:"color",gui:!0},radius:{type:"number",gui:!0,step:.1,default:1,min:.1},scale:{type:"number",gui:!0,step:.1,default:1,min:0}},gui:!0},stick:{validItems:{hidden:{type:"boolean",gui:!0},colorscheme:{type:"colorscheme",gui:!0},color:{type:"color",gui:!0},radius:{type:"number",gui:!0,step:.1,default:.25,min:.1},singleBonds:{type:"boolean",gui:!0}},gui:!0},sphere:{validItems:r,gui:!0},cartoon:{validItems:{style:{validItems:["trace","oval","rectangle","parabola","edged"],gui:!0},color:{type:"color",gui:!0},arrows:{type:"boolean",gui:!0},ribbon:{type:"boolean",gui:!0},hidden:{type:"boolean",gui:!0},tubes:{type:"boolean",gui:!0},thickness:{type:"number",gui:!0,step:.1,default:1,min:0},width:{type:"number",gui:!0,step:.1,default:1,min:0},opacity:{type:"number",gui:!0,step:.1,default:1,min:0,max:1}},gui:!0},colorfunc:{validItems:null,valid:!1},clicksphere:{validItems:r}},e.validSurfaceSpecs={opacity:{type:"number",gui:!0,step:.1,default:1,min:0,max:1},colorscheme:{type:"colorscheme",gui:!0},color:{type:"color",gui:!0},voldata:{type:"number",gui:!1},volscheme:{type:"number",gui:!1},map:{type:"number",gui:!1}},e.validLabelResSpecs={font:{type:"string",gui:!0},fontSize:{type:"number",gui:!0,step:1,default:12,min:1},fontColor:{type:"color",gui:!0},fontOpacity:{type:"number",gui:!0,step:.1,default:1,min:0,max:1},borderThickness:{type:"number",gui:!0,step:.1,default:1,min:0},borderColor:{type:"color",gui:!0},borderOpacity:{type:"number",gui:!0,step:.1,default:1,min:0,max:1},backgroundColor:{type:"color",gui:!0},backgroundOpacity:{type:"number",gui:!0,step:.1,default:1,min:0,max:1},position:{type:"array",valid:!1},inFront:{type:"boolean",gui:!0},showBackground:{type:"boolean",gui:!0},fixed:{type:"boolean",gui:!0},alignment:{validItems:"topLeft topCenter topRight centerLeft center centerRight bottomLeft bottomCenter bottomRight".split(" "),gui:!0},scale:{type:"boolean",gui:!1}},e.parseCrd=function(e,t){var n,r=[],o=0;if("pdb"==t)for(n=e.indexOf("\nATOM");-1!=n;){for(;"\nATOM"==e.slice(n,n+5)||"\nHETATM"==e.slice(n,n+7);)r[o++]=parseFloat(e.slice(n+31,n+39)),r[o++]=parseFloat(e.slice(n+39,n+47)),r[o++]=parseFloat(e.slice(n+47,n+55)),n=e.indexOf("\n",n+54),"\nTER"==e.slice(n,n+4)&&(n=e.indexOf("\n",n+5));n=e.indexOf("\nATOM",n)}else"netcdf"==t?(e=new netcdfjs(e),r=[].concat.apply([],e.getDataVariable("coordinates"))):(n=e.indexOf("\n"),"inpcrd"==t&&(n=e.indexOf("\n",n+1)),r=(e=e.slice(n+1)).match(/\S+/g).map(parseFloat));return r},e.parseMolData=function(e,t,n){if(!e)return[];if(/\.gz$/.test(t=t||"")){t=t.replace(/\.gz$/,"");try{e=pako.inflate(e,{to:"string"})}catch(e){console.log(e)}}return void 0===$3Dmol.Parsers[t]&&(t=t.split(".").pop(),void 0===$3Dmol.Parsers[t]&&(console.log("Unknown format: "+t),t=e instanceof Uint8Array?"mmtf":e.match(/^@<TRIPOS>MOLECULE/gm)?"mol2":e.match(/^HETATM/gm)||e.match(/^ATOM/gm)?"pdb":e.match(/ITEM: TIMESTEP/gm)?"lammpstrj":e.match(/^.*\n.*\n.\s*(\d+)\s+(\d+)/gm)?"sdf":e.match(/^%VERSION\s+\VERSION_STAMP/gm)?"prmtop":"xyz",console.log("Best guess: "+t))),(0,$3Dmol.Parsers[t])(e,n)},e.setAtomDefaults=function(e,n){for(var r=0;r<e.length;r++){var o=e[r];o&&(o.style=o.style||t,o.color=o.color||ElementColors[o.elem]||defaultColor,o.model=n,o.clickable||o.hoverable)&&(o.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]})}},e}(),$3Dmol.GLShape=function(){function e(e){e=e||{},$3Dmol.ShapeIDCount++,this.boundingSphere=new $3Dmol.Sphere,this.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},o(this,e);var i=[],a=null,s=null,l=new $3Dmol.Geometry(!0),u=new $3Dmol.Geometry(!0);this.updateStyle=function(t){for(var n in t)e[n]=t[n];o(this,e)},this.addCustom=function(e){e.vertexArr=e.vertexArr||[],e.faceArr=e.faceArr||[],e.normalArr=e.normalArr||[],n(this,l,e)},this.addSphere=function(e){e.center=e.center||{x:0,y:0,z:0},e.radius=e.radius?$3Dmol.Math.clamp(e.radius,0,1/0):1.5,e.color=$3Dmol.CC.color(e.color),this.intersectionShape.sphere.push(new $3Dmol.Sphere(e.center,e.radius)),$3Dmol.GLDraw.drawSphere(l,e.center,e.radius,e.color),i.push({centroid:new $3Dmol.Vector3(e.center.x,e.center.y,e.center.z)}),e=l.updateGeoGroup(0),r(this.boundingSphere,i,e.vertexArray,e.vertices)},this.addBox=function(e){var t=e.dimensions||{w:1,h:1,d:1},o=t.w;"number"==typeof t.w&&(o={x:t.w,y:0,z:0});var a=t.h;"number"==typeof t.h&&(a={x:0,y:t.h,z:0});var s=t.d;"number"==typeof t.d&&(s={x:0,y:0,z:t.d}),null==(t=e.corner)&&(t=void 0!==e.center?{x:e.center.x-.5*(o.x+a.x+s.x),y:e.center.y-.5*(o.y+a.y+s.y),z:e.center.z-.5*(o.z+a.z+s.z)}:{x:0,y:0,z:0}),o=[{x:t.x,y:t.y,z:t.z},{x:t.x+o.x,y:t.y+o.y,z:t.z+o.z},{x:t.x+a.x,y:t.y+a.y,z:t.z+a.z},{x:t.x+o.x+a.x,y:t.y+o.y+a.y,z:t.z+o.z+a.z},{x:t.x+s.x,y:t.y+s.y,z:t.z+s.z},{x:t.x+o.x+s.x,y:t.y+o.y+s.y,z:t.z+o.z+s.z},{x:t.x+a.x+s.x,y:t.y+a.y+s.y,z:t.z+a.z+s.z},{x:t.x+o.x+a.x+s.x,y:t.y+o.y+a.y+s.y,z:t.z+o.z+a.z+s.z}],s=[],(a=[]).splice(a.length,0,o[0],o[1],o[2],o[3]),s.splice(s.length,0,0,2,1,1,2,3),t=4,a.splice(a.length,0,o[2],o[3],o[6],o[7]),s.splice(s.length,0,t+0,t+2,t+1,t+1,t+2,t+3),t+=4,a.splice(a.length,0,o[4],o[5],o[0],o[1]),s.splice(s.length,0,t+0,t+2,t+1,t+1,t+2,t+3),t+=4,a.splice(a.length,0,o[6],o[7],o[4],o[5]),s.splice(s.length,0,t+0,t+2,t+1,t+1,t+2,t+3),t+=4,a.splice(a.length,0,o[3],o[1],o[7],o[5]),s.splice(s.length,0,t+0,t+2,t+1,t+1,t+2,t+3),t+=4,a.splice(a.length,0,o[2],o[0],o[6],o[4]),s.splice(s.length,0,t+0,t+2,t+1,t+1,t+2,t+3),(e=$.extend({},e)).vertexArr=a,e.faceArr=s,e.normalArr=[],n(this,l,e),e=new $3Dmol.Vector3,i.push({centroid:e.addVectors(o[0],o[7]).multiplyScalar(.5)}),e=l.updateGeoGroup(0),r(this.boundingSphere,i,e.vertexArray,e.vertices)},this.addCylinder=function(e){e.start=e.start||{},e.end=e.end||{};var t=new $3Dmol.Vector3(e.start.x||0,e.start.y||0,e.start.z||0),n=new $3Dmol.Vector3(e.end.x,e.end.y||0,e.end.z||0);void 0===n.x&&(n.x=3);var o=e.radius||.1,a=$3Dmol.CC.color(e.color);this.intersectionShape.cylinder.push(new $3Dmol.Cylinder(t,n,o)),$3Dmol.GLDraw.drawCylinder(l,t,n,o,a,e.fromCap,e.toCap),e=new $3Dmol.Vector3,i.push({centroid:e.addVectors(t,n).multiplyScalar(.5)}),t=l.updateGeoGroup(0),r(this.boundingSphere,i,t.vertexArray,t.vertices)},this.addDashedCylinder=function(e){e.start=e.start||{},e.end=e.end||{},e.dashLength=e.dashLength||.25,e.gapLength=e.gapLength||.25;var t=new $3Dmol.Vector3(e.start.x||0,e.start.y||0,e.start.z||0),n=new $3Dmol.Vector3(e.end.x,e.end.y||0,e.end.z||0);void 0===n.x&&(n.x=3);var o=e.radius||.1,a=$3Dmol.CC.color(e.color),s=Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2)+Math.pow(t.z-n.z,2)),u=s/(e.gapLength+e.dashLength),c=new $3Dmol.Vector3(e.start.x||0,e.start.y||0,e.start.z||0);new $3Dmol.Vector3(e.end.x,e.end.y||0,e.end.z||0);for(var p=new $3Dmol.Vector3((n.x-t.x)/(s/e.gapLength),(n.y-t.y)/(s/e.gapLength),(n.z-t.z)/(s/e.gapLength)),d=new $3Dmol.Vector3((n.x-t.x)/(s/e.dashLength),(n.y-t.y)/(s/e.dashLength),(n.z-t.z)/(s/e.dashLength)),f=0;f<u;f++)s=new $3Dmol.Vector3(c.x+d.x,c.y+d.y,c.z+d.z),this.intersectionShape.cylinder.push(new $3Dmol.Cylinder(c,s,o)),$3Dmol.GLDraw.drawCylinder(l,c,s,o,a,e.fromCap,e.toCap),c=new $3Dmol.Vector3(s.x+p.x,s.y+p.y,s.z+p.z);e=new $3Dmol.Vector3,i.push({centroid:e.addVectors(t,n).multiplyScalar(.5)}),t=l.updateGeoGroup(0),r(this.boundingSphere,i,t.vertexArray,t.vertices)},this.addCurve=function(e){e.points=e.points||[],e.smooth=e.smooth||10,void 0===e.fromCap&&(e.fromCap=2),void 0===e.toCap&&(e.toCap=2);var t=$3Dmol.subdivide_spline(e.points,e.smooth);if(3>t.length)console.log("Too few points in addCurve");else{var n=e.radius||.1,r=$3Dmol.CC.color(e.color),o=0,i=t.length-1,a=t[0].distanceTo(t[1]),s=Math.ceil(2*n/a);for(e.toArrow&&(a={start:t[i-=s],end:t[t.length-1],radius:n,color:r,mid:1e-4},this.addArrow(a)),e.fromArrow&&(a={start:t[o+=s],end:t[0],radius:n,color:r,mid:1e-4},this.addArrow(a)),e=Math.ceil(t.length/2),n={radius:n,color:r,fromCap:2,toCap:2};o<i;o++)n.start=t[o],n.end=t[o+1],n.fromCap=2,n.toCap=2,o<e?(n.fromCap=2,n.toCap=0):(n.fromCap=o>e?0:2,n.toCap=2),this.addCylinder(n)}},this.addLine=function(e){e.start=e.start||{},e.end=e.end||{};var t=new $3Dmol.Vector3(e.start.x||0,e.start.y||0,e.start.z||0);void 0===(e=new $3Dmol.Vector3(e.end.x,e.end.y||0,e.end.z||0)).x&&(e.x=3);var n=l.updateGeoGroup(2),o=n.vertices,a=3*o,s=n.vertexArray;s[a]=t.x,s[a+1]=t.y,s[a+2]=t.z,s[a+3]=e.x,s[a+4]=e.y,s[a+5]=e.z,n.vertices+=2,(a=n.lineArray)[s=n.lineidx]=o,a[s+1]=o+1,n.lineidx+=2,n=new $3Dmol.Vector3,i.push({centroid:n.addVectors(t,e).multiplyScalar(.5)}),n=l.updateGeoGroup(0),r(this.boundingSphere,i,n.vertexArray,n.vertices)},this.addArrow=function(e){if(e.start=e.start||{},e.end=e.end||{},e.start=new $3Dmol.Vector3(e.start.x||0,e.start.y||0,e.start.z||0),e.dir instanceof $3Dmol.Vector3&&e.length instanceof number){var t=e.dir.clone().multiplyScalar(e.length).add(start);e.end=t}else e.end=new $3Dmol.Vector3(e.end.x,e.end.y||0,e.end.z||0),void 0===e.end.x&&(e.end.x=3);e.radius=e.radius||.1,e.radiusRatio=e.radiusRatio||1.618034,e.mid=0<e.mid&&1>e.mid?e.mid:.618034;var n=e.start,o=e.end,a=e.radius,s=e.radiusRatio,u=e.mid;if(n&&o){t=l.updateGeoGroup(51);var c=o.clone();c.sub(n).multiplyScalar(u);var p=n.clone().add(c);u=c.clone().negate(),this.intersectionShape.cylinder.push(new $3Dmol.Cylinder(n.clone(),p.clone(),a)),this.intersectionShape.sphere.push(new $3Dmol.Sphere(n.clone(),a));var d=[];d[0]=c.clone(),1e-4<Math.abs(d[0].x)?d[0].y+=1:d[0].x+=1,d[0].cross(c),d[0].normalize(),d[0]=d[0],d[4]=d[0].clone(),d[4].crossVectors(d[0],c),d[4].normalize(),d[8]=d[0].clone().negate(),d[12]=d[4].clone().negate(),d[2]=d[0].clone().add(d[4]).normalize(),d[6]=d[4].clone().add(d[8]).normalize(),d[10]=d[8].clone().add(d[12]).normalize(),d[14]=d[12].clone().add(d[0]).normalize(),d[1]=d[0].clone().add(d[2]).normalize(),d[3]=d[2].clone().add(d[4]).normalize(),d[5]=d[4].clone().add(d[6]).normalize(),d[7]=d[6].clone().add(d[8]).normalize(),d[9]=d[8].clone().add(d[10]).normalize(),d[11]=d[10].clone().add(d[12]).normalize(),d[13]=d[12].clone().add(d[14]).normalize(),d[15]=d[14].clone().add(d[0]).normalize();var f,h=t.vertices,m=t.vertexArray,y=t.faceArray,g=t.normalArray,v=t.lineArray,b=0;for(f=d.length;b<f;++b){var S=3*(h+3*b),_=d[b].clone().multiplyScalar(a).add(n),w=d[b].clone().multiplyScalar(a).add(p),E=d[b].clone().multiplyScalar(a*s).add(p);m[S]=_.x,m[S+1]=_.y,m[S+2]=_.z,m[S+3]=w.x,m[S+4]=w.y,m[S+5]=w.z,m[S+6]=E.x,m[S+7]=E.y,m[S+8]=E.z,0<b&&(S=new $3Dmol.Vector3(m[S-3],m[S-2],m[S-1]),_=o.clone(),w=p.clone(),E=new $3Dmol.Vector3(E.x,E.y,E.z),this.intersectionShape.triangle.push(new $3Dmol.Triangle(E,_,S)),this.intersectionShape.triangle.push(new $3Dmol.Triangle(S.clone(),w,E.clone())))}t.vertices+=48,m[S=3*t.vertices]=n.x,m[S+1]=n.y,m[S+2]=n.z,m[S+3]=p.x,m[S+4]=p.y,m[S+5]=p.z,m[S+6]=o.x,m[S+7]=o.y,m[S+8]=o.z,t.vertices+=3;var O,C,P=t.vertices-3,x=t.vertices-2,T=t.vertices-1,k=3*P,A=3*x,I=3*T;for(b=0,f=d.length-1;b<f;++b){var D=h+3*b;n=t.faceidx,o=t.lineidx,S=3*(a=D),_=3*(s=D+1),w=3*(p=D+2);var M=3*(m=D+4),j=3*(E=D+5),N=3*(D+=3),R=O=d[b],L=C=d[b+1];g[S]=R.x,g[_]=O.x,g[N]=C.x,g[S+1]=R.y,g[_+1]=O.y,g[N+1]=C.y,g[S+2]=R.z,g[_+2]=O.z,g[N+2]=C.z,g[_]=O.x,g[M]=L.x,g[N]=C.x,g[_+1]=O.y,g[M+1]=L.y,g[N+1]=C.y,g[_+2]=O.z,g[M+2]=L.z,g[N+2]=C.z,g[w]=O.x,g[j]=L.x,g[w+1]=O.y,g[j+1]=L.y,g[w+2]=O.z,g[j+2]=L.z,y[n]=a,y[n+1]=s,y[n+2]=D,y[n+3]=s,y[n+4]=m,y[n+5]=D,y[n+6]=a,y[n+7]=D,y[n+8]=P,y[n+9]=p,y[n+10]=x,y[n+11]=E,y[n+12]=p,y[n+13]=T,y[n+14]=E,v[o]=a,v[o+1]=s,v[o+2]=a,v[o+3]=D,v[o+4]=m,v[o+5]=D,v[o+6]=a,v[o+7]=D,v[o+8]=p,v[o+9]=s,v[o+10]=p,v[o+11]=E,v[o+12]=m,v[o+13]=E,v[o+14]=p,v[o+15]=T,v[o+16]=p,v[o+17]=E,v[o+18]=T,v[o+19]=E,t.faceidx+=15,t.lineidx+=20}h=[h+45,h+46,h+1,h,h+47,h+2],n=t.faceidx,o=t.lineidx,S=3*(a=h[0]),_=3*(s=h[1]),w=3*(p=h[4]),M=3*(m=h[2]),j=3*(E=h[5]),N=3*(D=h[3]),R=O=d[15],L=C=d[0],g[S]=R.x,g[_]=O.x,g[N]=C.x,g[S+1]=R.y,g[_+1]=O.y,g[N+1]=C.y,g[S+2]=R.z,g[_+2]=O.z,g[N+2]=C.z,g[_]=O.x,g[M]=L.x,g[N]=C.x,g[_+1]=O.y,g[M+1]=L.y,g[N+1]=C.y,g[_+2]=O.z,g[M+2]=L.z,g[N+2]=C.z,g[w]=O.x,g[j]=L.x,g[w+1]=O.y,g[j+1]=L.y,g[w+2]=O.z,g[j+2]=L.z,c.normalize(),u.normalize(),g[k]=u.x,g[A]=g[I]=c.x,g[k+1]=u.y,g[A+1]=g[I+1]=c.y,g[k+2]=u.z,g[A+2]=g[I+2]=c.z,y[n]=a,y[n+1]=s,y[n+2]=D,y[n+3]=s,y[n+4]=m,y[n+5]=D,y[n+6]=a,y[n+7]=D,y[n+8]=P,y[n+9]=p,y[n+10]=x,y[n+11]=E,y[n+12]=p,y[n+13]=T,y[n+14]=E,v[o]=a,v[o+1]=s,v[o+2]=a,v[o+3]=D,v[o+4]=m,v[o+5]=D,v[o+6]=a,v[o+7]=D,v[o+8]=p,v[o+9]=s,v[o+10]=p,v[o+11]=E,v[o+12]=m,v[o+13]=E,v[o+14]=p,v[o+15]=T,v[o+16]=p,v[o+17]=E,v[o+18]=T,v[o+19]=E,t.faceidx+=15,t.lineidx+=20}t=new $3Dmol.Vector3,i.push({centroid:t.addVectors(e.start,e.end).multiplyScalar(.5)}),e=l.updateGeoGroup(0),r(this.boundingSphere,i,e.vertexArray,e.vertices)},this.addIsosurface=function(e,t,r){var o,i=void 0!==t.isoval&&"number"==typeof t.isoval?t.isoval:0,a=!!t.voxel,s=void 0===t.smoothness?1:t.smoothness,u=e.size.x,c=e.size.y,p=e.size.z,d=new Int16Array(u*c*p),f=e.data,h=0;for(o=d.length;h<o;++h)d[h]=-1;for(d=new Uint8Array(u*c*p),h=0,o=f.length;h<o;++h)0<(0<=i?f[h]-i:i-f[h])&&(d[h]|=2);if(i=[],f=[],$3Dmol.MarchingCube.march(d,i,f,{fulltable:!0,voxel:a,unitCube:e.unit,origin:e.origin,matrix:e.matrix,nX:u,nY:c,nZ:p}),!a&&0<s&&$3Dmol.MarchingCube.laplacianSmooth(s,i,f),a=[],s=[],u=[],t.selectedRegion&&void 0===t.coords&&(t.coords=t.selectedRegion),void 0!==t.coords){c=t.coords[0].x,p=t.coords[0].y,d=t.coords[0].z,o=t.coords[0].x;var m=t.coords[0].y,y=t.coords[0].z;for(h=0;h<t.coords.length;h++)t.coords[h].x>c?c=t.coords[h].x:t.coords[h].x<o&&(o=t.coords[h].x),t.coords[h].y>p?p=t.coords[h].y:t.coords[h].y<m&&(m=t.coords[h].y),t.coords[h].z>d?d=t.coords[h].z:t.coords[h].z<y&&(y=t.coords[h].z);var g=2;for(void 0!==t.radius&&(g=t.radius),void 0!==t.selectedOffset&&(g=t.selectedOffset),void 0!==t.seldist&&(g=t.seldist),o-=g,c+=g,m-=g,p+=g,y-=g,d+=g,h=0;h<i.length;h++){var v;if(v=i[h].x>o&&i[h].x<c&&i[h].y>m&&i[h].y<p&&i[h].z>y&&i[h].z<d)e:{v=i[h];for(var b=t.coords,S=g,_=0;_<b.length;_++){var w=b[_];if(Math.sqrt(Math.pow(w.x-v.x,2)+Math.pow(w.y-v.y,2)+Math.pow(w.z-v.z,2))<=S){v=!0;break e}}v=!1}v?(a.push(s.length),s.push(i[h])):a.push(-1)}for(h=0;h+2<f.length;h+=3)-1!==a[f[h]]&&-1!==a[f[h+1]]&&-1!==a[f[h+2]]&&(u.push(f[h]-(f[h]-a[f[h]])),u.push(f[h+1]-(f[h+1]-a[f[h+1]])),u.push(f[h+2]-(f[h+2]-a[f[h+2]])));i=s,f=u}for(n(this,l,{vertexArr:i,faceArr:f,normalArr:[],clickable:t.clickable,hoverable:t.hoverable}),this.updateStyle(t),h=new $3Dmol.Vector3(e.origin.x,e.origin.y,e.origin.z),f=new $3Dmol.Vector3(e.size.x*e.unit.x,e.size.y*e.unit.y,e.size.z*e.unit.z),e=new $3Dmol.Vector3(0,0,0),t=h.clone(),f=h.clone().add(f),h=0;h<i.length;h++)e.add(i[h]),t.max(i[h]),f.min(i[h]);e.divideScalar(i.length),h=e.distanceTo(f),i=e.distanceTo(t),this.boundingSphere.center=e,this.boundingSphere.radius=Math.max(h,i),"function"==typeof r&&r()},this.addVolumetricData=function(e,t,n){e=new $3Dmol.VolumeData(e,t),this.addIsosurface(e,n)},this.finalize=function(){t(l),l.initTypedArrays()},this.globj=function(e){var n;if(s&&(e.remove(s),s=null),!this.hidden){if(t(l),l.initTypedArrays(),this.wireframe&&l.setUpWireframe(),void 0!==this.color){if((n=this.color)||$3Dmol.CC.color(n),l.colorsNeedUpdate=!0,n.constructor!==Array)var r=n.r,o=n.g,i=n.b;for(var c in l.geometryGroups){var p=l.geometryGroups[c],d=p.colorArray,f=0;for(p=p.vertices;f<p;++f)n.constructor===Array&&(r=(i=n[f]).r,o=i.g,i=i.b),d[3*f]=r,d[3*f+1]=o,d[3*f+2]=i}}a=new $3Dmol.Object3D,n=this.side==$3Dmol.DoubleSide?new $3Dmol.MeshDoubleLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:1>this.opacity,opacity:this.opacity,wireframeLinewidth:this.linewidth}):new $3Dmol.MeshLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:1>this.opacity,opacity:this.opacity,wireframeLinewidth:this.linewidth}),n=new $3Dmol.Mesh(l,n),a.add(n),n=new $3Dmol.LineBasicMaterial({linewidth:this.linewidth,color:this.color}),n=new $3Dmol.Line(u,n,$3Dmol.LinePieces),a.add(n),s=a.clone(),e.add(s)}},this.removegl=function(e){s&&(void 0!==s.geometry&&s.geometry.dispose(),void 0!==s.material&&s.material.dispose(),e.remove(s),s=null),a=null}}var t=function(e){0<(e=e.updateGeoGroup(0)).vertices&&e.truncateArrayBuffers(!0,!0)},n=function(e,t,n){var o=n.faceArr;0!==n.vertexArr.length&&0!==o.length||console.warn("Error adding custom shape component: No vertices and/or face indices supplied!"),void 0===(o=n.color)&&(o=e.color),o=$3Dmol.CC.color(o);for(var i=$3Dmol.splitMesh(n),a=0,s=i.length;a<s;a++){var l,u=void 0,c=l=void 0,p=e,d=t,f=i[a],h=i[a].colorArr?i[a].colorArr:o,m=n.clickable,y=d.addGeoGroup(),g=f.vertexArr,v=f.normalArr,b=f.faceArr;y.vertices=g.length,y.faceidx=b.length;var S=y.vertexArray,_=y.colorArray;h.constructor!==Array&&(u=h.r,l=h.g,c=h.b);var w=0;for(f=y.vertices;w<f;++w){var E=3*w,O=g[w];S[E]=O.x,S[E+1]=O.y,S[E+2]=O.z,h.constructor===Array&&(u=(O=h[w]).r,l=O.g,c=O.b),_[E]=u,_[E+1]=l,_[E+2]=c}if(m)for(w=0,f=y.faceidx/3;w<f;++w)l=b[E=3*w],c=b[E+1],O=b[E+2],E=new $3Dmol.Vector3,u=new $3Dmol.Vector3,h=new $3Dmol.Vector3,p.intersectionShape.triangle.push(new $3Dmol.Triangle(E.copy(g[l]),u.copy(g[c]),h.copy(g[O])));if(m){for(f=new $3Dmol.Vector3(0,0,0),l=w=0;l<d.geometryGroups.length;l++)f.add(d.geometryGroups[l].getCentroid()),w++;f.divideScalar(w),r(p.boundingSphere,{centroid:f},S,y.vertices)}if(y.faceArray=new Uint16Array(b),y.truncateArrayBuffers(!0,!0),v.length<y.vertices)y.setNormals();else for(d=y.normalArray=new Float32Array(3*y.vertices),w=0,f=y.vertices;w<f;++w)E=3*w,p=v[w],d[E]=p.x,d[E+1]=p.y,d[E+2]=p.z;y.setLineIndices(),y.lineidx=y.lineArray.length}},r=function(e,t,n,r){var o;if(e.center.set(0,0,0),0<t.length){var i=0;for(o=t.length;i<o;++i)e.center.add(t[i].centroid);e.center.divideScalar(t.length)}for(t=e.radius*e.radius,n.length/3<r&&(r=n.length/3),i=0,o=r;i<o;i++)r=e.center.distanceToSquared({x:n[3*i],y:n[3*i+1],z:n[3*i+2]}),t=Math.max(t,r);e.radius=Math.sqrt(t)},o=function(e,t){void 0!==t.color?(e.color=t.color||new $3Dmol.Color,t.color instanceof $3Dmol.Color||(e.color=$3Dmol.CC.color(t.color))):e.color=$3Dmol.CC.color(0),e.wireframe=!!t.wireframe,e.opacity=t.alpha?$3Dmol.Math.clamp(t.alpha,0,1):1,void 0!==t.opacity&&(e.opacity=$3Dmol.Math.clamp(t.opacity,0,1)),e.side=void 0!==t.side?t.side:$3Dmol.DoubleSide,e.linewidth=void 0===t.linewidth?1:t.linewidth,e.clickable=!!t.clickable,e.callback="function"==typeof t.callback?t.callback:null,e.hoverable=!!t.hoverable,e.hover_callback="function"==typeof t.hover_callback?t.hover_callback:null,e.unhover_callback="function"==typeof t.unhover_callback?t.unhover_callback:null,e.hidden=t.hidden};return Object.defineProperty(e.prototype,"position",{get:function(){return this.boundingSphere.center}}),Object.defineProperty(e.prototype,"x",{get:function(){return this.boundingSphere.center.x}}),Object.defineProperty(e.prototype,"y",{get:function(){return this.boundingSphere.center.y}}),Object.defineProperty(e.prototype,"z",{get:function(){return this.boundingSphere.center.z}}),e}(),$3Dmol.ShapeIDCount=0,$3Dmol.splitMesh=function(e){if(64e3>e.vertexArr.length)return[e];var t=[{vertexArr:[],normalArr:[],faceArr:[]}];e.colorArr&&(t.colorArr=[]);for(var n=[],r=[],o=0,i=e.faceArr,a=0,s=i.length;a<s;a+=3){for(var l=t[o],u=0;3>u;u++){var c=i[a+u];n[c]!==o&&(n[c]=o,r[c]=l.vertexArr.length,l.vertexArr.push(e.vertexArr[c]),e.normalArr&&e.normalArr[c]&&l.normalArr.push(e.normalArr[c]),e.colorArr&&e.colorArr[c]&&l.colorArr.push(e.colorArr[c])),l.faceArr.push(r[c])}64e3<=l.vertexArr.length&&(t.push({vertexArr:[],normalArr:[],faceArr:[]}),e.colorArr&&(t.colorArr=[]),o++)}return t},$3Dmol.GLViewer=function(e,t){function n(e){var t=[];if(void 0===e.model)for(e=0;e<h.length;e++)h[e]&&t.push(h[e]);else for(t=e.model,$.isArray(t)||(t=[t]),e=0;e<t.length;e++)if("number"==typeof t[e]){var n=t[e];0>n&&(n+=h.length),t[e]=h[n]}return t}function r(e){var t=[];void 0===e&&(e={});for(var r=n(e),o=0;o<r.length;o++)t=t.concat(r[o].selectedAtoms(e));return t}function o(e,t,r,o,i){for(var a=n(t),s=0;s<a.length;s++)a[s][e](t,r,o,i)}function i(e){var t=new $3Dmol.MeshLambertMaterial;for(var n in t.vertexColors=$3Dmol.VertexColors,e)"color"!==n&&"map"!==n&&e.hasOwnProperty(n)&&(t[n]=e[n]);return void 0!==e.opacity&&(t.transparent=1!==e.opacity),t}var a=(t=t||{}).callback,s=t.defaultcolors;s||(s=$3Dmol.elementColors.defaultColors);var l,u=t.nomouse,c=0;t.backgroundColor=t.backgroundColor||"#ffffff",c=$3Dmol.CC.color(t.backgroundColor).getHex(),l=parseFloat(t.camerax);var p=this,d=e,f=null,h=[],m={},y=[],g=[],v=[],b=[],S=[],_=null,w=500;w=t.hoverDuration;var E=d.width(),O=d.height(),C=[],P=new $3Dmol.Renderer({antialias:!0,preserveDrawingBuffer:!0,premultipliedAlpha:!1,id:t.id,row:t.row,col:t.col,rows:t.rows,cols:t.cols,canvas:t.canvas});P.domElement.style.width="100%",P.domElement.style.height="100%",P.domElement.style.padding="0",P.domElement.style.position="absolute",P.domElement.style.top="0px",P.domElement.style.left="0px",P.domElement.style.zIndex="0";var x=t.row,T=t.col,k=t.cols,A=t.rows,I=t.viewers,D=t.control_all,M=P.getAspect(E,O),j=new $3Dmol.Camera(20,M,1,800,t.orthographic);j.position=new $3Dmol.Vector3(l,0,150);var N=new $3Dmol.Vector3;j.lookAt(N);var R=new $3Dmol.Raycaster(new $3Dmol.Vector3(0,0,0),new $3Dmol.Vector3(0,0,0)),L=new $3Dmol.Projector;new $3Dmol.Vector3(0,0,0);var G=null,F=null,B=null,V=-50,z=50,q=new $3Dmol.Quaternion(0,0,0,1),U=new $3Dmol.Quaternion(0,0,0,1),H=0,W=!1,K=0,Q=0,Y=0,X=0,Z=0,J=0,ee=0,te=function(){0>--H&&(H=0)},ne=function(){var e,t=0;for(e in m)if(m.hasOwnProperty(e)){var n=parseInt(e);isNaN(n)||(e=n),e>t&&(t=e)}return t+1},re=function(){var e=j.position.z-F.position.z;1>e&&(e=1),j.near=e+V,1>j.near&&(j.near=1),j.far=e+z,j.near+1>j.far&&(j.far=j.near+1),j.fov=20,j.right=e*Math.tan(Math.PI/180*20),j.left=-j.right,j.top=j.right/M,j.bottom=-j.top,j.updateProjectionMatrix(),G.fog.near=j.near+.4*(j.far-j.near),G.fog.far=j.far,t.disableFog&&(G.fog.near=G.fog.far)},oe=function(e){if(P.setViewport(),G&&(re(),P.render(G,j),!e&&0<C.length)){e=p.getView();for(var t=0;t<C.length;t++)C[t].setView(e,!0)}};!function(){(G=new $3Dmol.Scene).fog=new $3Dmol.Fog(c,100,200),B=new $3Dmol.Object3D,(F=new $3Dmol.Object3D).useQuaternion=!0,F.quaternion=new $3Dmol.Quaternion(0,0,0,1),F.add(B),G.add(F);var e=new $3Dmol.Light(16777215);e.position=new $3Dmol.Vector3(.2,.2,1).normalize(),e.intensity=1,G.add(e)}(),P.setClearColorHex(c,1),G.fog.color=$3Dmol.CC.color(c);var ie=function(e,t){_!=e&&(_&&_.unhover_callback(_,p,t,d),(_=e)&&void 0!==e.hover_callback&&"function"==typeof e.hover_callback&&e.hover_callback(e,p,t,d))},ae=function(e){var t=e.originalEvent.targetTouches[0].pageX-e.originalEvent.targetTouches[1].pageX;return e=e.originalEvent.targetTouches[0].pageY-e.originalEvent.targetTouches[1].pageY,Math.sqrt(t*t+e*e)},se=function(e){var t=e.pageX,n=e.pageY;return null==t&&(t=e.originalEvent.pageX),null==n&&(n=e.originalEvent.pageY),e.originalEvent.targetTouches&&e.originalEvent.targetTouches[0]?(t=e.originalEvent.targetTouches[0].pageX,n=e.originalEvent.targetTouches[0].pageY):e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(t=e.originalEvent.changedTouches[0].pageX,n=e.originalEvent.changedTouches[0].pageY),[t,n]},le=function(e,t){var n=d.width(),r=d.height();if(null!=I&&!D){n/=k,r/=A;var o=$("canvas",d).offset();if(e=Math.floor((e-o.left)/n),A-Math.floor((t-o.top)/r)-1!=x||e!=T)return!1}return!0};$("body").bind("mouseup touchend",function(e){if(W&&G){var t=se(e),n=t[0];if(t=t[1],n==K&&t==Q){var r=$("canvas",d).offset();0!=b.length&&(R.setFromCamera({x:(n-r.left)/E*2-1,y:-(t-r.top)/O*2+1,z:-1},j),(n=R.intersectObjects(B,b)).length&&void 0!==(n=n[0].clickable).callback&&"function"==typeof n.callback&&n.callback(n,p,e,d))}}W=!1});var ue=function(e){if(t.lowerZoomLimit&&0<t.lowerZoomLimit){var n=150-t.lowerZoomLimit;e>n&&(e=n)}return t.upperZoomLimit&&0<t.upperZoomLimit&&e<(n=150-t.upperZoomLimit)&&(e=n),150<e&&(e=149.85),e};this.setZoomLimits=function(e,n){void 0!==e&&(t.lowerZoomLimit=e),n&&(t.upperZoomLimit=n),F.position.z=ue(F.position.z),oe()};var ce,pe=this._handleMouseDown=function(e){if(e.preventDefault(),G){var t=se(e),n=t[0];t=t[1],void 0!==n&&(W=!0,ce=e.which,K=n,Q=t,Y=0,e.originalEvent.targetTouches&&2==e.originalEvent.targetTouches.length&&(Y=ae(e)),q=F.quaternion,Z=F.position.z,X=B.position.clone(),J=V,ee=z)}},de=this._handleMouseScroll=function(e){if(e.preventDefault(),G){var t=se(e),n=t[0];void 0!==n&&le(n,t[1])&&(t=.85*(150-F.position.z),n=1,e.originalEvent.ctrlKey&&(n=-1),e.originalEvent.detail?F.position.z+=n*t*e.originalEvent.detail/10:e.originalEvent.wheelDelta&&(F.position.z-=n*t*e.originalEvent.wheelDelta/400),F.position.z=ue(F.position.z),oe())}};this.pngURI=function(){return this.getCanvas().toDataURL("image/png")},this.getCanvas=function(){return f.get(0)},this.setHoverDuration=function(e){w=e};var fe,he=this._handleMouseMove=function(e){E=d.width(),O=d.height(),clearTimeout(fe);var t=$("canvas",d).offset(),n=(se(e)[0]-t.left)/E*2-1,r=-(se(e)[1]-t.top)/O*2+1;if(null!==_&&function(e,t,n){R.setFromCamera({x:e,y:t,z:-1},j),0!=(e=R.intersectObjects(B,S)).length&&void 0!==e[0]||ie(null),void 0!==e[0]&&e[0].clickable!==_&&ie(null)}(n,r),fe=setTimeout(function(){if(0!=S.length){R.setFromCamera({x:n,y:r,z:-1},j);var e=R.intersectObjects(B,S);e.length?(e=e[0].clickable,ie(e),_=e):ie(null)}},w),e.preventDefault(),G&&W){t=0;var o=se(e),i=o[0],a=o[1];if(void 0!==i&&le(i,a)){o=(i-K)/E;var s=(a-Q)/O;0!=Y&&e.originalEvent.targetTouches&&2==e.originalEvent.targetTouches.length?(t=2,s=2*((s=ae(e))-Y)/(E+O),console.log("pinch "+Y+" dy "+s)):e.originalEvent.targetTouches&&3==e.originalEvent.targetTouches.length&&(t=1);var l=P.getXYRatio(),u=l[0],c=l[1];o*=u,s*=c,l=Math.sqrt(o*o+s*s),3==t||3==ce&&e.ctrlKey?(V=J+100*o,z=ee-100*s):2==t||3==ce||e.shiftKey?(80>(e=.85*(150-F.position.z))&&(e=80),F.position.z=Z+s*e,F.position.z=ue(F.position.z)):1==t||2==ce||e.ctrlKey?(e=function(e,t){e/=E,t/=O;var n=F.quaternion,r=new $3Dmol.Vector3(0,0,F.position.z);return L.projectVector(r,j),r.x+=2*e,r.y-=2*t,L.unprojectVector(r,j),r.z=0,r.applyQuaternion(n),r}(u*(i-K),c*(a-Q)),B.position.addVectors(X,e)):0!==t&&1!=ce||0===l||(e=Math.sin(l*Math.PI)/l,U.x=Math.cos(l*Math.PI),U.y=0,U.z=e*o,U.w=-e*s,F.quaternion=new $3Dmol.Quaternion(1,0,0,0),F.quaternion.multiply(U),F.quaternion.multiply(q)),oe()}}},me=function(e){E=(d=e).width(),O=d.height(),M=P.getAspect(E,O),P.setSize(E,O),d.append(P.domElement),f=$(P.domElement),u||(f.bind("mousedown touchstart",pe),f.bind("DOMMouseScroll mousewheel",de),f.bind("mousemove touchmove",he),f.bind("contextmenu",function(e){e.preventDefault()}))};me(d),this.setContainer=function(e){return"string"===$.type(e)&&(e=$("#"+e)),e||(e=d),me(e),this},this.setBackgroundColor=function(e,t){return void 0===t?t=1:(0>t||1<t)&&(t=1),e=$3Dmol.CC.color(e),G.fog.color=e,c=e.getHex(),P.setClearColorHex(e.getHex(),t),oe(),this},this.setProjection=function(e){j.ortho="orthographic"===e,re()},this.setViewStyle=function(e){if("outline"===e.style){var t={};e.color&&(t.color=$3Dmol.CC.color(e.color)),e.width&&(t.width=e.width),P.enableOutline(t)}else P.disableOutline();return this},t.style&&this.setViewStyle(t),this.setWidth=function(e){return E=e||E,P.setSize(E,O),this},this.setHeight=function(e){return O=e||O,P.setSize(E,O),this},this.resize=function(){return E=d.width(),O=d.height(),M=P.getAspect(E,O),P.setSize(E,O),j.aspect=M,j.updateProjectionMatrix(),oe(),this},$(window).resize(this.resize),this.getModel=function(e){return e in h?h[e]:0==h.length?null:h[h.length-1]},this.rotate=function(e,t,n,r){n=void 0!==n?n:0,void 0===t&&(t="y"),"x"==t&&(t={x:1,y:0,z:0}),"y"==t&&(t={x:0,y:1,z:0}),"z"==t&&(t={x:0,y:0,z:1});var o=Math.PI*e/180;return e=Math.sin(o/2),o=Math.cos(o/2),t=new $3Dmol.Quaternion(t.x*e,t.y*e,t.z*e,o).normalize(),n?(t=(new $3Dmol.Quaternion).copy(F.quaternion).multiply(t),ve(n,r,B.position,F.position.z,t,N)):(F.quaternion.multiply(t),oe()),this},this.surfacesFinished=function(){for(var e in m)if(!m[e][0].done)return!1;return!0},this.getView=function(){if(!B)return[0,0,0,0,0,0,0,1];var e=B.position,t=F.quaternion;return[e.x,e.y,e.z,F.position.z,t.x,t.y,t.z,t.w]},this.setView=function(e,t){return void 0!==e&&(e instanceof Array||8!==e.length)&&B&&F?(B.position.x=e[0],B.position.y=e[1],B.position.z=e[2],F.position.z=e[3],F.quaternion.x=e[4],F.quaternion.y=e[5],F.quaternion.z=e[6],F.quaternion.w=e[7],void 0!==e[8]&&(F.position.x=e[8],F.position.y=e[9]),oe(t),this):this},this.render=function(e){var t;P.setViewport(),b.splice(0,b.length),S.splice(0,S.length);var n=0;for(t=h.length;n<t;n++){var r=h[n];if(r){var o=r.selectedAtoms({clickable:!0});r=r.selectedAtoms({hoverable:!0}),Array.prototype.push.apply(S,r),Array.prototype.push.apply(b,o)}}for(n=0,t=y.length;n<t;n++)(o=y[n])&&o.clickable&&b.push(o),o&&o.hoverable&&S.push(o);for(n=this.getView(),o=P.supportedExtensions(),t=0;t<h.length;t++)h[t]&&h[t].globj(B,o);for(t=0;t<y.length;t++)y[t]&&y[t].globj(B,o);for(t in m)if(m.hasOwnProperty(t))for(r=m[t],o=0;o<r.length;o++)if(r.hasOwnProperty(o)){var i=r[o].geo;if(!r[o].finished)if(i.verticesNeedUpdate=!0,i.elementsNeedUpdate=!0,i.normalsNeedUpdate=!0,i.colorsNeedUpdate=!0,i.buffersNeedUpdate=!0,i.boundingSphere=null,r[o].done&&(r[o].finished=!0),r[o].lastGL&&B.remove(r[o].lastGL),(i=r[o].mat instanceof $3Dmol.LineBasicMaterial?new $3Dmol.Line(i,r[o].mat):new $3Dmol.Mesh(i,r[o].mat)).visible=!r[o].mat.transparent||0!=r[o].mat.opacity,1<r[o].symmetries.length||1==r[o].symmetries.length&&!r[o].symmetries[o].isIdentity()){var a,s=new $3Dmol.Object3D;for(a=0;a<r[o].symmetries.length;a++){var l=i.clone();l.matrix=r[o].symmetries[a],l.matrixAutoUpdate=!1,s.add(l)}r[o].lastGL=s,B.add(s)}else r[o].lastGL=i,B.add(i)}return this.setView(n),"function"==typeof e&&e(this),this},this.selectedAtoms=function(e){return r(e)},this.getUniqueValues=function(e,t){void 0===t&&(t={}),t=r(t);var n,o={};for(n in t)t[n].hasOwnProperty(e)&&(o[t[n][e]]=!0);return Object.keys(o)},this.pdbData=function(e){for(var t="",n=0,o=(e=r(e)).length;n<o;++n)t+=e[n].pdbline+"\n";return t};var ye,ge=function(e,t,n){if(1==n)return t;if(0==n)return e;var r=e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w;return.9995<r?((e=new $3Dmol.Quaternion(e.x+n*(t.x-e.x),e.y+n*(t.y-e.y),e.z+n*(t.z-e.z),e.w+n*(t.w-e.w))).normalize(),e):(0>r&&(t=t.clone().multiplyScalar(-1),r=-r),1<r?r=1:-1>r&&(r=-1),n*=Math.acos(r),(t=t.clone()).sub(e.clone().multiplyScalar(r)),t.normalize(),r=Math.cos(n),n=Math.sin(n),(e=new $3Dmol.Quaternion(e.x*r+t.x*n,e.y*r+t.y*n,e.z*r+t.z*n,e.w*r+t.w*n)).normalize(),e)};this.spin=function(e){if(clearInterval(ye),void 0===e&&(e="y"),"boolean"==typeof e){if(!e)return;e="y"}Array.isArray(e)&&(e={x:e[0],y:e[1],z:e[2]});var t=this;ye=setInterval(function(){t.rotate(1,e)},25)};var ve=function(e,t,n,r,o,i){var a=Math.ceil(e/20);1>a&&(a=1),H++,e=B.position.clone();var s=F.position.z,l=F.quaternion.clone(),u=N.clone();if(t){for(var c=(a=Array(a)).length,p=0;p<c;p++){var d=(p+1)/c;t={mpos:e,rz:s,rot:l},n&&(t.mpos=n.clone().sub(e).multiplyScalar(d).add(e)),void 0!==r&&null!=r&&(t.rz=s+d*(r-s)),o&&(t.rot=ge(l,o,d)),i&&(t.cam=i.clone().sub(u).multiplyScalar(d).add(u)),a[p]=t}var f=0,h=function(){var e=a[f];f+=1,e.mpos&&(B.position=e.mpos),e.rz&&(F.position.z=e.rz),e.rot&&(F.quaternion=e.rot),e.cam&&j.lookAt(e.cam),f<a.length?setTimeout(h,20):te(),oe()}}else{var m,y,g;if(d=1/a,n&&(m=n.clone().sub(e).multiplyScalar(d)),void 0!==r&&null!=r&&(y=d*(r-s)),o){t=ge(l,o,d);var v=l.clone().inverse().multiply(t)}i&&(g=i.clone().sub(u).multiplyScalar(d)),f=0,h=function(){f+=1,m&&B.position.add(m),y&&(F.position.z+=y),v&&F.quaternion.multiply(v),g&&(N.add(g),j.lookAt(N)),f<a?setTimeout(h,20):te(),oe()}}setTimeout(h,20)};this.zoom=function(e,t,n){return t=void 0!==t?t:0,e=150-(150-F.position.z)/(e||2),0<t?ve(t,n,B.position,ue(e),F.quaternion,N):(F.position.z=ue(e),oe()),this},this.translate=function(e,t,n,r){n=void 0!==n?n:0,e/=E,t/=O;var o=new $3Dmol.Vector3(0,0,-150);return L.projectVector(o,j),o.x-=e,o.y-=t,L.unprojectVector(o,j),o.z=0,e=N.clone().add(o),0<n?ve(n,r,B.position,F.position.z,F.quaternion,e):(N=e,j.lookAt(N),oe()),this},this.fitSlab=function(e){e=r(e=e||{});var t=$3Dmol.getExtent(e);e=t[1][0]-t[0][0];var n=t[1][1]-t[0][1];return t=t[1][2]-t[0][2],5>(e=Math.sqrt(e*e+n*n+t*t))&&(e=5),V=-e/1.9,z=e/2,this},this.center=function(e,t,n){t=void 0!==t?t:0;var o=r(e=e||{}),i=$3Dmol.getExtent(o);if($.isEmptyObject(e)){$.each(y,function(e,t){t&&t.boundingSphere&&t.boundingSphere.center&&(e=t.boundingSphere.center,0<(t=t.boundingSphere.radius)?(o.push(new $3Dmol.Vector3(e.x+t,e.y,e.z)),o.push(new $3Dmol.Vector3(e.x-t,e.y,e.z)),o.push(new $3Dmol.Vector3(e.x,e.y+t,e.z)),o.push(new $3Dmol.Vector3(e.x,e.y-t,e.z)),o.push(new $3Dmol.Vector3(e.x,e.y,e.z+t)),o.push(new $3Dmol.Vector3(e.x,e.y,e.z-t))):o.push(e))}),i=$3Dmol.getExtent(o),e=o;var a=i}else e=r({}),a=$3Dmol.getExtent(e);e=new $3Dmol.Vector3(i[2][0],i[2][1],i[2][2]);var s=a[1][0]-a[0][0],l=a[1][1]-a[0][1];for(a=a[1][2]-a[0][2],5>(s=Math.sqrt(s*s+l*l+a*a))&&(s=5),V=-s/1.9,z=s/2,s=i[1][0]-i[0][0],l=i[1][1]-i[0][1],a=i[1][2]-i[0][2],5>(s=Math.sqrt(s*s+l*l+a*a))&&(s=5),i=25,s=0;s<o.length;s++)o[s]&&(l=e.distanceToSquared(o[s]))>i&&(i=l);return s=2*Math.sqrt(i),e=e.clone().multiplyScalar(-1),0<t?ve(t,n,e,F.position.z,F.quaternion,N):(B.position=e,oe()),this},this.zoomTo=function(e,t,n){t=void 0!==t?t:0;var o=r(e=e||{}),i=$3Dmol.getExtent(o);if($.isEmptyObject(e)){$.each(y,function(e,t){t&&t.boundingSphere&&t.boundingSphere.center&&(e=t.boundingSphere.center,0<(t=t.boundingSphere.radius)?(o.push(new $3Dmol.Vector3(e.x+t,e.y,e.z)),o.push(new $3Dmol.Vector3(e.x-t,e.y,e.z)),o.push(new $3Dmol.Vector3(e.x,e.y+t,e.z)),o.push(new $3Dmol.Vector3(e.x,e.y-t,e.z)),o.push(new $3Dmol.Vector3(e.x,e.y,e.z+t)),o.push(new $3Dmol.Vector3(e.x,e.y,e.z-t))):o.push(e))}),i=$3Dmol.getExtent(o);var a=o,s=i}else a=r({}),s=$3Dmol.getExtent(a);a=new $3Dmol.Vector3(i[2][0],i[2][1],i[2][2]);var l=s[1][0]-s[0][0],u=s[1][1]-s[0][1];for(s=s[1][2]-s[0][2],5>(l=Math.sqrt(l*l+u*u+s*s))&&(l=5),V=-l/1.9,z=l/2,0===Object.keys(e).length&&(V=-999999,z=999999),l=i[1][0]-i[0][0],u=i[1][1]-i[0][1],s=i[1][2]-i[0][2],5>(l=Math.sqrt(l*l+u*u+s*s))&&(l=5),e=25,i=0;i<o.length;i++)o[i]&&(l=a.distanceToSquared(o[i]))>e&&(e=l);return l=2*Math.sqrt(e),a=a.clone().multiplyScalar(-1),e=-(.5*l/Math.tan(Math.PI/180*j.fov/2)-150),e=ue(e),0<t?ve(t,n,a,e,F.quaternion,N):(B.position=a,F.position.z=e,oe()),this},this.setSlab=function(e,t){V=e,z=t},this.getSlab=function(e){return{near:V,far:z}},this.addLabel=function(e,t,n){return t=t||{},n&&(n=$3Dmol.getExtent(r(n)),t.position={x:n[2][0],y:n[2][1],z:n[2][2]}),(e=new $3Dmol.Label(e,t)).setContext(),B.add(e.sprite),t.fixed&&v.push(g.length),g.push(e),oe(),e},this.addResLabels=function(e,t){return o("addResLabels",e,this,t),oe(),this},this.addPropertyLabels=function(e,t,n){return o("addPropertyLabels",e,t,this,n),oe(),this},this.removeLabel=function(e){for(var t=0;t<g.length;t++)if(g[t]==e){g.splice(t,1),e.dispose(),B.remove(e.sprite);break}return oe(),this},this.removeAllLabels=function(){for(var e=0;e<g.length;e++)B.remove(g[e].sprite);return g.splice(0,g.length),oe(),this},this.setLabelStyle=function(e,t){return B.remove(e.sprite),e.dispose(),e.stylespec=t,e.setContext(),B.add(e.sprite),oe(),e},this.setLabelText=function(e,t){return B.remove(e.sprite),e.dispose(),e.text=t,e.setContext(),B.add(e.sprite),oe(),e},this.addShape=function(e){return e=e||{},(e=new $3Dmol.GLShape(e)).shapePosition=y.length,y.push(e),e},this.removeShape=function(e){if(!e)return this;for(e.removegl(B),delete y[e.shapePosition];0<y.length&&void 0===y[y.length-1];)y.pop();return this},this.removeAllShapes=function(){for(var e=0;e<y.length;e++)y[e].removegl(B);return y.splice(0,y.length),this};var be=function(e){return e.hasOwnProperty("x")&&e.hasOwnProperty("y")&&e.hasOwnProperty("z")?e:0==(e=r(e)).length?{x:0,y:0,z:0}:{x:(e=$3Dmol.getExtent(e))[0][0]+(e[1][0]-e[0][0])/2,y:e[0][1]+(e[1][1]-e[0][1])/2,z:e[0][2]+(e[1][2]-e[0][2])/2}};this.addSphere=function(e){(e=e||{}).center=be(e.center);var t=new $3Dmol.GLShape(e);return t.shapePosition=y.length,t.addSphere(e),y.push(t),t.finalize(),t},this.addBox=function(e){null!=(e=e||{}).corner&&(e.corner=be(e.corner)),null!=e.center&&(e.center=be(e.center));var t=new $3Dmol.GLShape(e);return t.shapePosition=y.length,t.addBox(e),y.push(t),t.finalize(),t},this.addArrow=function(e){(e=e||{}).start=be(e.start),e.end=be(e.end);var t=new $3Dmol.GLShape(e);return t.shapePosition=y.length,t.addArrow(e),y.push(t),t.finalize(),t},this.addCylinder=function(e){(e=e||{}).start=be(e.start),e.end=be(e.end);var t=new $3Dmol.GLShape(e);return t.shapePosition=y.length,e.dashed?t.addDashedCylinder(e):t.addCylinder(e),y.push(t),t.finalize(),t},this.addCurve=function(e){e=e||{};var t=new $3Dmol.GLShape(e);return t.shapePosition=y.length,t.addCurve(e),y.push(t),t.finalize(),t},this.addLine=function(e){(e=e||{}).start=be(e.start),e.end=be(e.end),e.wireframe=!0;var t=new $3Dmol.GLShape(e);if(t.shapePosition=y.length,e.dashed){e.dashLength=e.dashLength||.5,e.gapLength=e.gapLength||.5,e.start=e.start||{},e.end=e.end||{};var n=new $3Dmol.Vector3(e.start.x||0,e.start.y||0,e.start.z||0),r=new $3Dmol.Vector3(e.end.x,e.end.y||0,e.end.z||0),o=new $3Dmol.Vector3;new $3Dmol.Vector3,new $3Dmol.Vector3;var i,a=n.clone(),s=0;o.subVectors(r,n);var l=o.length();o.normalize();var u=o.clone();o=o.clone(),u.multiplyScalar(e.dashLength),o.multiplyScalar(e.gapLength);var c=u.length();for(i=o.length();s<l;){if(s+c>l){e.start=n,e.end=r,t.addLine(e);break}a.addVectors(n,u),e.start=n,e.end=a,t.addLine(e),n=a.clone(),s+=c,a.addVectors(n,o),n=a.clone(),s+=i}t.finalize()}else t.addLine(e);return y.push(t),t.finalize(),t},this.addUnitCell=function(e){e||(e=this.getModel());var t=new $3Dmol.GLShape({wireframe:!0});t.shapePosition=y.length;var n=e.getCrystData();if(n){if(n.matrix)e=n.matrix;else{e=n.a;var r=n.b,o=n.c,i=n.alpha,a=n.beta;n=n.gamma,i=i*Math.PI/180,a=a*Math.PI/180,n=n*Math.PI/180;var s=Math.cos(a);i=(Math.cos(i)-Math.cos(a)*Math.cos(n))/Math.sin(n),e=new $3Dmol.Matrix4(e,r*Math.cos(n),o*s,0,0,r*Math.sin(n),o*i,0,0,0,o*Math.sqrt(Math.max(0,1-s*s-i*i)),0,0,0,0,1)}for(r=[new $3Dmol.Vector3(0,0,0),new $3Dmol.Vector3(1,0,0),new $3Dmol.Vector3(0,1,0),new $3Dmol.Vector3(0,0,1),new $3Dmol.Vector3(1,1,0),new $3Dmol.Vector3(0,1,1),new $3Dmol.Vector3(1,0,1),new $3Dmol.Vector3(1,1,1)],o=0;o<r.length;o++)r[o]=r[o].applyMatrix4(e);t.addLine({start:r[0],end:r[1]}),t.addLine({start:r[0],end:r[2]}),t.addLine({start:r[1],end:r[4]}),t.addLine({start:r[2],end:r[4]}),t.addLine({start:r[0],end:r[3]}),t.addLine({start:r[3],end:r[5]}),t.addLine({start:r[2],end:r[5]}),t.addLine({start:r[1],end:r[6]}),t.addLine({start:r[4],end:r[7]}),t.addLine({start:r[6],end:r[7]}),t.addLine({start:r[3],end:r[6]}),t.addLine({start:r[5],end:r[7]})}return y.push(t),t.finalize(),t},this.addCustom=function(e){e=e||{};var t=new $3Dmol.GLShape(e);return t.shapePosition=y.length,t.addCustom(e),y.push(t),t.finalize(),t},this.addVolumetricData=function(e,t,n){n=n||{};var r=new $3Dmol.GLShape(n);return r.shapePosition=y.length,r.addVolumetricData(e,t,n),y.push(r),r},this.addIsosurface=function(e,t,n){t=t||{};var r=new $3Dmol.GLShape(t);return r.shapePosition=y.length,r.addIsosurface(e,t,n),y.push(r),r},this.enableFog=function(e){e?G.fog=new $3Dmol.Fog(c,100,200):(t.disableFog=!0,oe())},this.setFrame=function(e){return new Promise(function(t,n){n=h.map(function(t){return t.setFrame(e)}),Promise.all(n).then(function(){t()})})},this.getNumFrames=function(){for(var e=0,t=0;t<h.length;t++)h[t].getNumFrames()>e&&(e=h[t].getNumFrames());return e},this.animate=function(e){H++;var t=100,n="forward",r=0;(e=e||{}).interval&&(t=e.interval),e.loop&&(n=e.loop),e.reps&&(r=e.reps);var o=this.getNumFrames(),i=this,a=0,s=1;e.step&&(r/=s=e.step);var l=0,u=o*r,c=new Date,p=function(){if(i.render(),++l!=u&&i.isAnimated()){var e=t-(new Date-c);setTimeout(d,0<e?e:0,n)}else clearTimeout(f),te()},d=function(e){c=new Date,"forward"==e?i.setFrame(a).then(function(){a=(a+s)%o,p()}):"backward"==e?i.setFrame(o-1-a).then(function(){a=(a+s)%o,p()}):i.setFrame(a).then(function(){s*=0==(a+=s)%(o-1)?-1:1,p()})},f=setTimeout(d,0,n);return this},this.stopAnimate=function(){return H=0,this},this.isAnimated=function(){return 0<H},this.addModel=function(e,t,n){n&&!n.defaultcolors&&(n.defaultcolors=s);var r=new $3Dmol.GLModel(h.length,n);return r.addMolData(e,t,n),h.push(r),r},this.addModels=function(e,t,n){for((n=n||{}).multimodel=!0,n.frames=!0,e=$3Dmol.GLModel.parseMolData(e,t,n),t=0;t<e.length;t++){var r=new $3Dmol.GLModel(h.length,s);r.setAtomDefaults(e[t]),r.addFrame(e[t]),r.setFrame(0),e.modelData&&r.setModelData(e.modelData[t]),r.setDontDuplicateAtoms(!n.duplicateAssemblyAtoms),h.push(r)}return h},this.addModelsAsFrames=function(e,t,n){(n=n||{}).multimodel=!0,n.frames=!0;var r=new $3Dmol.GLModel(h.length,s);return r.addMolData(e,t,n),h.push(r),r},this.addAsOneMolecule=function(e,t,n){(n=n||{}).multimodel=!0,n.onemol=!0;var r=new $3Dmol.GLModel(h.length,s);return r.addMolData(e,t,n),h.push(r),r},this.removeModel=function(e){if(e){for(e.removegl(B),delete h[e.getID()];0<h.length&&void 0===h[h.length-1];)h.pop();return this}},this.removeAllModels=function(){for(var e=0;e<h.length;e++)h[e].removegl(B);return h.splice(0,h.length),this},this.exportJSON=function(e,t){var n={};return n.m=void 0===t?h.map(function(t){return t.toCDObject(e)}):[model[t].toCDObject()],JSON.stringify(n)},this.createModelFrom=function(e,t){for(var n=new $3Dmol.GLModel(h.length,s),r=0;r<h.length;r++)if(h[r]){var o=h[r].selectedAtoms(e);n.addAtoms(o),t&&h[r].removeAtoms(o)}return h.push(n),n},this.setStyle=function(e,t){return void 0===t&&(t=e,e={}),o("setStyle",e,t,!1),this},this.addStyle=function(e,t){return void 0===t&&(t=e,e={}),o("setStyle",e,t,!0),this},this.setClickable=function(e,t,n){return o("setClickable",e,t,n),this},this.setHoverable=function(e,t,n,r){return o("setHoverable",e,t,n,r),this},this.vibrate=function(e,t){return o("vibrate",e,t),this},this.setColorByProperty=function(e,t,n,r){return o("setColorByProperty",e,t,n,r),this},this.setColorByElement=function(e,t){return o("setColorByElement",e,t),this};var Se=function(e,t){for(var n=[],r=0;r<e.length;r++){var o=e[r];void 0!==o&&(o.x<t[0][0]||o.x>t[1][0]||o.y<t[0][1]||o.y>t[1][1]||o.z<t[0][2]||o.z>t[1][2]||n.push(o))}return n},_e=function(e){return(e[1][0]-e[0][0])*(e[1][1]-e[0][1])*(e[1][2]-e[0][2])},we=function(e,t,n){var r=new $3Dmol.Geometry(!0),o=r.updateGeoGroup(0),i=[],a=0;for(l=e.length;a<l;a++){var s=e[a];s&&(void 0!==s.surfaceColor?i[a]=s.surfaceColor:s.color&&(i[a]=$3Dmol.CC.color(s.color)))}var l,u=o.vertexArray;for(a=0,l=(s=t.vertices).length;a<l;a++)u[e=3*o.vertices]=s[a].x,u[e+1]=s[a].y,u[e+2]=s[a].z,o.vertices++;if(u=o.colorArray,n.voldata&&n.volscheme){i=n.volscheme;var c=n.voldata,p=i.range()||[-1,1];for(a=0,l=s.length;a<l;a++){e=c.getVal(s[a].x,s[a].y,s[a].z);var d=$3Dmol.CC.color(i.valueToHex(e,p));u[e=3*a]=d.r,u[e+1]=d.g,u[e+2]=d.b}}else if(0<i.length)for(a=0,l=s.length;a<l;a++)c=s[a].atomid,u[e=3*a]=i[c].r,u[e+1]=i[c].g,u[e+2]=i[c].b;for(t=t.faces,o.faceidx=t.length,r.initTypedArrays(),s=o.vertexArray,u=o.normalArray,a=0,l=t.length;a<l;a+=3){i=t[a+1],c=t[a+2],e=3*t[a],i*=3,c*=3,p=new $3Dmol.Vector3(s[e],s[e+1],s[e+2]),d=new $3Dmol.Vector3(s[i],s[i+1],s[i+2]);var f=new $3Dmol.Vector3(s[c],s[c+1],s[c+2]);f.subVectors(f,d),p.subVectors(p,d),f.cross(p),(p=f).normalize(),u[e]+=p.x,u[i]+=p.x,u[c]+=p.x,u[e+1]+=p.y,u[i+1]+=p.y,u[c+1]+=p.y,u[e+2]+=p.z,u[i+2]+=p.z,u[c+2]+=p.z}return o.faceArray=new Uint16Array(t),(n=new $3Dmol.Mesh(r,n)).doubleSided=!0,n};this.addMesh=function(e){e={geo:e.geometry,mat:e.material,done:!0,finished:!1};var t=ne();return m[t]=e,t};var Ee=function(e){var t=[];return $.each(e,function(e,n){t[e]=$.extend({},n)}),t},Oe={VDW:$3Dmol.SurfaceType.VDW,MS:$3Dmol.SurfaceType.MS,SAS:$3Dmol.SurfaceType.SAS,SES:$3Dmol.SurfaceType.SES};this.addSurface=function(e,t,n,o,a,s){var l=ne();"string"==typeof e?void 0!==Oe[e]?e=Oe[e]:console.log("Surface type : "+e+" is not recognized"):void 0===e&&(e=$3Dmol.SurfaceType.VDW);var u=null,c=null;n=Ee(r(n)),u=o?Ee(r(o)):n;var d=!1;for(o=0;o<h.length;o++)if(h[o]){var f=h[o].getSymmetries();if(1<f.length||1==f.length&&!f[0].isIdentity()){d=!0;break}}f=function(n,o,i){c=a?Ee(r(a)):i;var s=$3Dmol.getExtent(i,!0);if(t.map&&t.map.prop){var u=t.map.prop,d=t.map.scheme||t.map.gradient||new $3Dmol.Gradient.RWB,f=d.range();f||(f=$3Dmol.getPropertyRange(i,u)),t.colorscheme={prop:u,gradient:d}}var h=0;for(u=o.length;h<u;h++)(d=o[h]).surfaceColor=$3Dmol.getColorFromStyle(d,t);var m=_e(s),g=function(e,t,n){for(var r=[],o={},i=0,a=t.length;i<a;i++)o[t[i].index]=i;var s=function(e){for(var t=[],n=0,r=e.length;n<r;n++)e[n].index in o&&t.push(o[e[n].index]);return t},l=function(e){var t=[];return t[0]=[e[0][0],e[0][1],e[0][2]],t[1]=[e[1][0],e[1][1],e[1][2]],t},u=function(e){if(64e3>_e(e))return[e];var t=e[1][0]-e[0][0],n=e[1][1]-e[0][1],r=e[1][2]-e[0][2];return n=t>n&&t>r?0:n>t&&n>r?1:2,r=l(e),t=l(e),e=(e[1][n]-e[0][n])/2+e[0][n],r[1][n]=e,t[0][n]=e,e=u(r),t=u(t),e.concat(t)};for(i=0,a=(e=u(e)).length;i<a;i++){var c=l(e[i]);c[0][0]-=6,c[0][1]-=6,c[0][2]-=6,c[1][0]+=6,c[1][1]+=6,c[1][2]+=6,c=Se(t,c);var p=Se(n,e[i]);r.push({extent:e[i],atoms:s(c),toshow:s(p)})}return r}(s,o,i);if(c&&c.length&&0<c.length){var v=$3Dmol.getExtent(c,!0);g.sort(function(e,t){var n=function(e,t){var n=e.extent;e=n[1][0]-n[0][0]-t[2][0];var r=n[1][1]-n[0][1]-t[2][1];return e*e+r*r+(t=n[1][2]-n[0][2]-t[2][2])*t};return(e=n(e,v))-(t=n(t,v))})}var b=[];for(h=0,u=o.length;h<u;h++)d=o[h],b[h]={x:d.x,y:d.y,z:d.z,serial:h,elem:d.elem};if($3Dmol.syncSurface){for(i=function(t){return new Promise(function(r,i){i=e;var a=g[t].extent,s=g[t].atoms,l=g[t].toshow,u=new $3Dmol.ProteinSurface;for(u.initparm(a,1!==i,m),u.fillvoxels(b,s),u.buildboundary(),i!=$3Dmol.SurfaceType.SES&&i!=$3Dmol.SurfaceType.MS||(u.fastdistancemap(),u.boundingatom(!1),u.fillvoxelswaals(b,s)),u.marchingcube(i),l=u.getFacesAndVertices(l),a=0,s=(i=$3Dmol.splitMesh({vertexArr:l.vertices,faceArr:l.faces})).length;a<s;a++)l={vertices:i[a].vertexArr,faces:i[a].faceArr},l=we(o,l,y),$3Dmol.mergeGeos(n.geo,l);p.render(),r()})},s=[],h=0;h<g.length;h++)s.push(i(h));return Promise.all(s).then(function(){return n.done=!0,Promise.resolve(l)})}var S=[];for(0>e&&(e=0),h=0,u=4;h<u;h++)i=new Worker($3Dmol.SurfaceWorker),S.push(i),i.postMessage({type:-1,atoms:b,volume:m});return new Promise(function(t,r){var i=0,a=function(e){for(var r=0,a=(e=$3Dmol.splitMesh({vertexArr:e.data.vertices,faceArr:e.data.faces})).length;r<a;r++){var s=we(o,{vertices:e[r].vertexArr,faces:e[r].faceArr},y);$3Dmol.mergeGeos(n.geo,s)}p.render(),++i==g.length&&(n.done=!0,t(l))},s=function(e){console.log(e.message+" ("+e.filename+":"+e.lineno+")"),r(e)};for(h=0;h<g.length;h++){var u=S[h%S.length];u.onmessage=a,u.onerror=s,u.postMessage({type:e,expandedExtent:g[h].extent,extendedAtoms:g[h].atoms,atomsToShow:g[h].toshow})}})};var y=i(t=t||{}),g=[];if(o=null,d){d={};var v={};for(o=0;o<h.length;o++)d[o]=[],v[o]=[];for(o=0;o<u.length;o++)d[u[o].model].push(u[o]);for(o=0;o<n.length;o++)v[n[o].model].push(n[o]);for(u=[],o=0;o<h.length;o++)0<v[o].length&&(g.push({geo:new $3Dmol.Geometry(!0),mat:y,done:!1,finished:!1,symmetries:h[o].getSymmetries()}),u.append(f(g[o],d[o],v[o])));o=Promise.all(u)}else g.push({geo:new $3Dmol.Geometry(!0),mat:y,done:!1,finished:!1,symmetries:[new $3Dmol.Matrix4]}),o=f(g[g.length-1],u,n);return m[l]=g,o.surfid=l,s&&"function"==typeof s?(o.then(function(e){s(e)}),l):o},this.setSurfaceMaterialStyle=function(e,t){if(m[e]){e=m[e];for(var n=0;n<e.length;n++){var r=e[n].mat=i(t);if(e[n].mat.side=$3Dmol.FrontSide,t.color){e[n].mat.color=t.color,e[n].geo.colorsNeedUpdate=!0;var o=$3Dmol.CC.color(t.color);e[n].geo.setColors(function(){return o})}else if(r.voldata&&r.volscheme){var a=r.volscheme,s=r.voldata,l=a.range()||[-1,1];e[n].geo.setColors(function(e,t,n){return e=s.getVal(e,t,n),$3Dmol.CC.color(a.valueToHex(e,l))})}e[n].finished=!1}}return this},this.removeSurface=function(e){for(var t=m[e],n=0;n<t.length;n++)t[n]&&t[n].lastGL&&(void 0!==t[n].geo&&t[n].geo.dispose(),void 0!==t[n].mat&&t[n].mat.dispose(),B.remove(t[n].lastGL));return delete m[e],oe(),this},this.removeAllSurfaces=function(){for(var e in m)if(m.hasOwnProperty(e)){for(var t=m[e],n=0;n<t.length;n++)t[n]&&t[n].lastGL&&(void 0!==t[n].geo&&t[n].geo.dispose(),void 0!==t[n].mat&&t[n].mat.dispose(),B.remove(t[n].lastGL));delete m[e]}return oe(),this},this.jmolMoveTo=function(){var e=B.position;e="center { "+-e.x+" "+-e.y+" "+-e.z+" }; ";var t=F.quaternion;return e+"moveto .5 quaternion { "+t.x+" "+t.y+" "+t.z+" "+t.w+" };"},this.clear=function(){return this.removeAllSurfaces(),this.removeAllModels(),this.removeAllLabels(),this.removeAllShapes(),oe(),this},this.mapAtomProperties=function(e,t){var o=r(t=t||{});if("function"==typeof e)for(var i=0,a=o.length;i<a;i++)e(t=o[i]);else for(i=0,a=o.length;i<a;i++){t=o[i];for(var s=0,l=e.length;s<l;s++){var u=e[s];if(u.props)for(var c in u.props)if(u.props.hasOwnProperty(c)){e:{var p=t,d=u;void 0===d&&(d={});for(var f=n(d),h=0;h<f.length;h++)if(f[h].atomIsSelected(p,d)){p=!0;break e}p=!1}p&&(t.properties||(t.properties={}),t.properties[c]=u.props[c])}}}return this},this.linkViewer=function(e){return C.push(e),this};try{"function"==typeof a&&a(this)}catch(e){console.log("error with glviewer callback: "+e)}this.getPerceivedDistance=function(){return 150-F.position.z},this.setPerceivedDistance=function(e){F.position.z=150-e},this.setAutoEyeSeparation=function(e){var t=this.getPerceivedDistance();return j.position.x=e||0<j.position.x?t*Math.tan(Math.PI/180*5):-t*Math.tan(Math.PI/180*5),j.lookAt(new $3Dmol.Vector3(0,0,F.position.z)),j.position.x}},$3Dmol.glmolViewer=$3Dmol.GLViewer,$3Dmol=$3Dmol||{},$3Dmol.Gradient=function(e,t){},$3Dmol.Gradient.valueToHex=function(e,t){},$3Dmol.Gradient.range=function(){},$3Dmol.Gradient.normalizeValue=function(e,t,n){return t>=e?(n<e&&(n=e),n>t&&(n=t),{lo:e,hi:t,val:n}):(n>e&&(n=e),n<t&&(n=t),{lo:t,hi:e,val:e-n+t})},$3Dmol.Gradient.RWB=function(e,t,n){void 0===t&&$.isArray(e)&&2<=e.length&&(t=e[1],e=e[0]),this.valueToHex=function(r,o){if(r*=1,o)var i=o[0],a=o[1];else i=e,a=t;return void 0===r?16777215:(i=(r=$3Dmol.Gradient.normalizeValue(i,a,r)).lo,a=r.hi,(r=r.val)<=(o=o&&void 0!==o[2]?o[2]:void 0!==n?n:(i+a)/2)?16711680+256*(i=Math.floor(255*Math.sqrt((r-i)/(o-i))))+i:65536*(i=Math.floor(255*Math.sqrt(1-(r-o)/(a-o))))+256*i+255)},this.range=function(){return void 0!==e&&void 0!==t?[e,t]:null}},$3Dmol.Gradient.ROYGB=function(e,t){void 0===t&&$.isArray(e)&&2<=e.length&&(t=e[1],e=e[0]),this.valueToHex=function(n,r){if(n*=1,r){var o=r[0];r=r[1]}else o=e,r=t;if(void 0===n)return 16777215;var i=((o=(n=$3Dmol.Gradient.normalizeValue(o,r,n)).lo)+(r=n.hi))/2,a=(o+i)/2,s=(i+r)/2;return(n=n.val)<a?256*(o=Math.floor(255*Math.sqrt((n-o)/(a-o))))+16711680:n<i?65536*(o=Math.floor(255*Math.sqrt(1-(n-a)/(i-a))))+65280:n<s?65280+1*(o=Math.floor(255*Math.sqrt((n-i)/(s-i)))):256*(o=Math.floor(255*Math.sqrt(1-(n-s)/(r-s))))+255},this.range=function(){return void 0!==e&&void 0!==t?[e,t]:null}},$3Dmol.Gradient.Sinebow=function(e,t){var n=1;void 0===t&&$.isArray(e)&&2<=e.length&&(t=e[1],e=e[0]),t<e&&(n=-1,e*=-1,t*=-1),this.valueToHex=function(r,o){if(r*=n,o){var i=o[0];o=o[1]}else i=e,o=t;return void 0===r?16777215:(i=(r=$3Dmol.Gradient.normalizeValue(i,o,r)).lo,o=r.hi,o=((r=r.val)-i)/(o-i)*5/6+.5,i=Math.sin(Math.PI*o),r=Math.sin(Math.PI*(o+1/3)),o=Math.sin(Math.PI*(o+2/3)),65536*Math.floor(255*i*i)+256*Math.floor(255*o*o)+1*Math.floor(255*r*r))},this.range=function(){return void 0!==e&&void 0!==t?[e,t]:null}},$3Dmol.Gradient.builtinGradients={rwb:$3Dmol.Gradient.RWB,roygb:$3Dmol.Gradient.ROYGB,sinebow:$3Dmol.Gradient.Sinebow},$3Dmol.LabelCount=0,$3Dmol.Label=function(e,t){this.id=$3Dmol.LabelCount++,this.stylespec=t||{},this.canvas=document.createElement("canvas"),this.canvas.width=134,this.canvas.height=35,this.context=this.canvas.getContext("2d"),this.sprite=new $3Dmol.Sprite,this.text=e},$3Dmol.Label.prototype={constructor:$3Dmol.Label,getStyle:function(){return this.stylespec},setContext:function(){var e=function(e,t,n){return void 0!==e&&(n=e instanceof $3Dmol.Color?e.scaled():$3Dmol.CC.color(e).scaled()),void 0!==t&&(n.a=parseFloat(t)),n};return function(){var t=this.stylespec,n=void 0!==t.useScreen&&t.useScreen,r=t.showBackground;"0"!==r&&"false"!==r||(r=!1),void 0===r&&(r=!0);var o=t.font?t.font:"sans-serif",i=parseInt(t.fontSize)?parseInt(t.fontSize):18,a=e(t.fontColor,t.fontOpacity,{r:255,g:255,b:255,a:1}),s=t.padding?t.padding:4,l=t.borderThickness?t.borderThickness:0,u=e(t.backgroundColor,t.backgroundOpacity,{r:0,g:0,b:0,a:1}),c=e(t.borderColor,t.borderOpacity,u),p=t.position?t.position:{x:-10,y:1,z:1},d=void 0===t.inFront||t.inFront;"false"!==d&&"0"!==d||(d=!1);var f=t.alignment||$3Dmol.SpriteAlignment.topLeft;"string"==typeof f&&f in $3Dmol.SpriteAlignment&&(f=$3Dmol.SpriteAlignment[f]);var h="";t.bold&&(h="bold "),this.context.font=h+i+"px  "+o;var m=this.context.measureText(this.text).width;r||(l=0);var y=m+2.5*l+2*s,g=1.25*i+2*l+2*s;if(t.backgroundImage){var v=t.backgroundImage,b=t.backgroundWidth?t.backgroundWidth:v.width;b>y&&(y=b),(h=t.backgroundHeight?t.backgroundHeight:v.height)>g&&(g=h)}this.canvas.width=y,this.canvas.height=g,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),h="",t.bold&&(h="bold "),this.context.font=h+i+"px  "+o,this.context.fillStyle="rgba("+u.r+","+u.g+","+u.b+","+u.a+")",this.context.strokeStyle="rgba("+c.r+","+c.g+","+c.b+","+c.a+")",this.context.lineWidth=l,r&&(u=o=l,y-=2*l,g-=2*l,c=0<l,(r=this.context).beginPath(),r.moveTo(o+6,u),r.lineTo(o+y-6,u),r.quadraticCurveTo(o+y,u,o+y,u+6),r.lineTo(o+y,u+g-6),r.quadraticCurveTo(o+y,u+g,o+y-6,u+g),r.lineTo(o+6,u+g),r.quadraticCurveTo(o,u+g,o,u+g-6),r.lineTo(o,u+6),r.quadraticCurveTo(o,u,o+6,u),r.closePath(),r.fill(),c&&r.stroke()),t.backgroundImage&&(v=t.backgroundImage,b=t.backgroundWidth?t.backgroundWidth:v.width,h=t.backgroundHeight?t.backgroundHeight:v.height,this.context.drawImage(v,0,0,b,h)),this.context.fillStyle="rgba("+a.r+","+a.g+","+a.b+","+a.a+")",this.context.fillText(this.text,l+s,i+l+s,m),(t=new $3Dmol.Texture(this.canvas)).needsUpdate=!0,this.sprite.material=new $3Dmol.SpriteMaterial({map:t,useScreenCoordinates:n,alignment:f,depthTest:!d}),this.sprite.scale.set(1,1,1),this.sprite.position.set(p.x,p.y,p.z)}}(),dispose:function(){void 0!==this.sprite.material.map&&this.sprite.material.map.dispose(),void 0!==this.sprite.material&&this.sprite.material.dispose()}},$3Dmol=$3Dmol||{},$3Dmol.MarchingCubeInitializer=function(){var e={march:function(e,i,a,s){var l,u=!!s.fulltable,c=s.hasOwnProperty("origin")&&s.origin.hasOwnProperty("x")?s.origin:{x:0,y:0,z:0},p=!!s.voxel,d=s.matrix,f=s.nX||0,h=s.nY||0,m=s.nZ||0,y=s.scale||1;l=s.unitCube?s.unitCube:{x:y,y:y,z:y};var g=new Int32Array(f*h*m);for(s=0,y=g.length;s<y;++s)g[s]=-1;y=function(e,t,n,r,o,a){var s={x:0,y:0,z:0},u=o;return!(r&1<<o)&&r&1<<a&&(u=a),1&u&&n++,2&u&&t++,4&u&&e++,d?s={x:(s=(s=new $3Dmol.Vector3(e,t,n)).applyMatrix4(d)).x,y:s.y,z:s.z}:(s.x=c.x+l.x*e,s.y=c.y+l.y*t,s.z=c.z+l.z*n),e=(h*e+t)*m+n,p?(i.push(s),i.length-1):(0>g[e]&&(g[e]=i.length,i.push(s)),g[e])};var v=new Int32Array(12),b=u?r:t;for(u=u?o:n,s=0;s<f-1;++s)for(var S=0;S<h-1;++S)for(var _=0;_<m-1;++_){for(var w=0,E=0;8>E;++E)w|=!!(2&e[(h*(s+((4&E)>>2))+S+((2&E)>>1))*m+_+(1&E)])<<E;if(0!==w&&255!==w){var O=b[w];if(0!==O)for(E=u[w],1&O&&(v[0]=y(s,S,_,w,0,1)),2&O&&(v[1]=y(s,S,_,w,1,3)),4&O&&(v[2]=y(s,S,_,w,3,2)),8&O&&(v[3]=y(s,S,_,w,2,0)),16&O&&(v[4]=y(s,S,_,w,4,5)),32&O&&(v[5]=y(s,S,_,w,5,7)),64&O&&(v[6]=y(s,S,_,w,7,6)),128&O&&(v[7]=y(s,S,_,w,6,4)),256&O&&(v[8]=y(s,S,_,w,0,4)),512&O&&(v[9]=y(s,S,_,w,1,5)),1024&O&&(v[10]=y(s,S,_,w,3,7)),2048&O&&(v[11]=y(s,S,_,w,2,6)),w=0;w<E.length;w+=3){O=v[E[w]];var C=v[E[w+1]],P=v[E[w+2]];p&&3<=w&&(i.push(i[O]),O=i.length-1,i.push(i[C]),C=i.length-1,i.push(i[P]),P=i.length-1),a.push(O),a.push(C),a.push(P)}}}},laplacianSmooth:function(e,t,n){var r,o,i=Array(t.length),a=0;for(r=t.length;a<r;a++)i[a]={x:0,y:0,z:0};var s=Array(20);for(a=0;20>a;a++)s[a]=Array(t.length);for(a=0,r=t.length;a<r;a++)s[0][a]=0;for(a=0,r=n.length/3;a<r;a++){var l=3*a,u=3*a+1,c=3*a+2,p=!0,d=0;for(o=s[0][n[l]];d<o;d++)if(n[u]==s[d+1][n[l]]){p=!1;break}for(p&&(s[0][n[l]]++,s[s[0][n[l]]][n[l]]=n[u]),p=!0,d=0,o=s[0][n[l]];d<o;d++)if(n[c]==s[d+1][n[l]]){p=!1;break}for(p&&(s[0][n[l]]++,s[s[0][n[l]]][n[l]]=n[c]),p=!0,d=0,o=s[0][n[u]];d<o;d++)if(n[l]==s[d+1][n[u]]){p=!1;break}for(p&&(s[0][n[u]]++,s[s[0][n[u]]][n[u]]=n[l]),p=!0,d=0,o=s[0][n[u]];d<o;d++)if(n[c]==s[d+1][n[u]]){p=!1;break}for(p&&(s[0][n[u]]++,s[s[0][n[u]]][n[u]]=n[c]),p=!0,d=0;d<s[0][n[c]];d++)if(n[l]==s[d+1][n[c]]){p=!1;break}for(p&&(s[0][n[c]]++,s[s[0][n[c]]][n[c]]=n[l]),p=!0,d=0,o=s[0][n[c]];d<o;d++)if(n[u]==s[d+1][n[c]]){p=!1;break}p&&(s[0][n[c]]++,s[s[0][n[c]]][n[c]]=n[u])}for(n=0;n<e;n++){for(a=0,r=t.length;a<r;a++)if(3>s[0][a])i[a].x=t[a].x,i[a].y=t[a].y,i[a].z=t[a].z;else if(3==s[0][a]||4==s[0][a]){for(i[a].x=0,i[a].y=0,d=i[a].z=0,o=s[0][a];d<o;d++)i[a].x+=t[s[d+1][a]].x,i[a].y+=t[s[d+1][a]].y,i[a].z+=t[s[d+1][a]].z;i[a].x+=.5*t[a].x,i[a].y+=.5*t[a].y,i[a].z+=.5*t[a].z,i[a].x/=.5+s[0][a],i[a].y/=.5+s[0][a],i[a].z/=.5+s[0][a]}else{for(i[a].x=0,i[a].y=0,d=i[a].z=0,o=s[0][a];d<o;d++)i[a].x+=t[s[d+1][a]].x,i[a].y+=t[s[d+1][a]].y,i[a].z+=t[s[d+1][a]].z;i[a].x+=1*t[a].x,i[a].y+=1*t[a].y,i[a].z+=1*t[a].z,i[a].x/=1+s[0][a],i[a].y/=1+s[0][a],i[a].z/=1+s[0][a]}for(a=0,r=t.length;a<r;a++)t[a].x=i[a].x,t[a].y=i[a].y,t[a].z=i[a].z}},edgeTable:[0,0,0,0,0,0,0,2816,0,0,0,1792,0,3328,3584,3840,0,0,0,138,0,21,0,134,0,0,0,652,0,2067,3865,3600,0,0,0,42,0,0,0,294,0,0,21,28,0,3875,1049,3360,0,168,162,170,0,645,2475,2210,0,687,293,172,4010,3747,3497,3232,0,0,0,0,0,69,0,900,0,0,0,1792,138,131,1608,1920,0,81,0,2074,84,85,84,86,0,81,0,3676,330,1105,1881,1616,0,0,0,42,0,69,0,502,0,0,21,3580,138,2035,1273,1520,2816,104,2337,106,840,581,367,102,2816,3695,3429,3180,1898,1635,1385,1120,0,0,0,0,0,0,0,3910,0,0,69,588,42,2083,41,2880,0,0,0,1722,0,2293,4095,3830,0,255,757,764,2538,2291,3065,2800,0,0,81,338,0,3925,1119,3414,84,855,85,340,2130,2899,89,2384,1792,712,194,1162,4036,3781,3535,3270,708,719,197,204,3018,2755,2505,2240,0,0,0,0,168,420,168,1958,162,162,676,2988,170,163,680,928,3328,3096,3328,3642,52,53,1855,1590,2340,2111,2869,2620,298,51,825,560,3584,3584,3090,3482,1668,1941,1183,1430,146,2975,2069,2460,154,915,153,400,3840,3592,3329,3082,1796,1541,1295,1030,2818,2575,2309,2060,778,515,265,0]},t=new Uint32Array(e.edgeTable),n=e.triTable=[[],[],[],[],[],[],[],[11,9,8],[],[],[],[8,10,9],[],[10,8,11],[9,11,10],[8,10,9,8,11,10],[],[],[],[1,7,3],[],[4,2,0],[],[2,1,7],[],[],[],[2,7,3,2,9,7],[],[1,4,11,1,0,4],[3,8,0,11,9,4,11,10,9],[4,11,9,11,10,9],[],[],[],[5,3,1],[],[],[],[2,5,8,2,1,5],[],[],[2,4,0],[3,2,4],[],[0,9,1,8,10,5,8,11,10],[3,4,0,3,10,4],[5,8,10,8,11,10],[],[3,5,7],[7,1,5],[1,7,3,1,5,7],[],[9,2,0,9,7,2],[0,3,8,1,7,11,1,5,7],[11,1,7,1,5,7],[],[9,1,0,5,3,2,5,7,3],[8,2,5,8,0,2],[2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[],[],[],[],[],[0,6,2],[],[7,2,9,7,9,8],[],[],[],[8,10,9],[7,1,3],[7,1,0],[6,9,3,6,10,9],[7,10,8,10,9,8],[],[6,0,4],[],[11,1,4,11,3,1],[2,4,6],[2,0,4,2,4,6],[2,4,6],[1,4,2,4,6,2],[],[6,0,4],[],[2,11,3,6,9,4,6,10,9],[8,6,1,8,1,3],[10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[],[],[],[5,3,1],[],[0,6,2],[],[7,4,8,5,2,1,5,6,2],[],[],[2,4,0],[7,4,8,2,11,3,10,5,6],[7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[9,11,8],[3,5,6],[0,5,11,0,11,8],[6,3,5,3,1,5],[3,9,6,3,8,9],[9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[],[],[],[],[],[],[],[1,10,2,9,11,6,9,8,11],[],[],[6,0,2],[3,6,9,3,2,6],[3,5,1],[0,5,1,0,11,5],[0,3,5],[6,9,11,9,8,11],[],[],[],[4,5,9,7,1,10,7,3,1],[],[11,6,7,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[],[],[0,6,4],[8,6,4,8,1,6],[],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[4,2,6],[1,0,9,2,4,8,2,6,4],[2,4,0,2,6,4],[8,2,4,2,6,4],[11,4,1,11,6,4],[0,9,1,4,11,6,4,8,11],[3,6,0,6,4,0],[8,6,4,8,11,6],[10,8,9],[6,3,9,6,7,3],[6,7,1],[10,7,1,7,3,1],[7,11,6,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2],[1,0,9,3,6,7,3,2,6],[7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[],[],[],[],[5,3,7],[8,5,2,8,7,5],[5,3,7],[1,10,2,5,8,7,5,9,8],[1,7,5],[1,7,5],[9,2,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[0,7,1,7,5,1],[9,3,5,3,7,5],[9,7,5,9,8,7],[8,10,11],[3,4,10,3,10,11],[8,10,11],[5,9,4,1,11,3,1,10,11],[2,4,5],[5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[2,8,5,2,11,8],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[11,9,10],[11,9,10],[1,11,4,1,10,11],[8,7,4,11,1,10,11,3,1],[2,7,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[1,7,4],[3,2,11,4,8,7,9,1,0],[11,4,2,4,0,2],[2,11,3,7,4,8],[4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[3,9,11,9,10,11],[0,10,8,10,11,8],[10,3,1,10,11,3],[2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]],r=[0,265,515,778,2060,2309,2575,2822,1030,1295,1541,1804,3082,3331,3593,3840,400,153,915,666,2460,2197,2975,2710,1430,1183,1941,1692,3482,3219,3993,3728,560,825,51,314,2620,2869,2111,2358,1590,1855,1077,1340,3642,3891,3129,3376,928,681,419,170,2988,2725,2479,2214,1958,1711,1445,1196,4010,3747,3497,3232,2240,2505,2755,3018,204,453,719,966,3270,3535,3781,4044,1226,1475,1737,1984,2384,2137,2899,2650,348,85,863,598,3414,3167,3925,3676,1370,1107,1881,1616,2800,3065,2291,2554,764,1013,255,502,3830,4095,3317,3580,1786,2035,1273,1520,2912,2665,2403,2154,876,613,367,102,3942,3695,3429,3180,1898,1635,1385,1120,1120,1385,1635,1898,3180,3429,3695,3942,102,367,613,876,2154,2403,2665,2912,1520,1273,2035,1786,3580,3317,4095,3830,502,255,1013,764,2554,2291,3065,2800,1616,1881,1107,1370,3676,3925,3167,3414,598,863,85,348,2650,2899,2137,2384,1984,1737,1475,1226,4044,3781,3535,3270,966,719,453,204,3018,2755,2505,2240,3232,3497,3747,4010,1196,1445,1711,1958,2214,2479,2725,2988,170,419,681,928,3376,3129,3891,3642,1340,1077,1855,1590,2358,2111,2869,2620,314,51,825,560,3728,3993,3219,3482,1692,1941,1183,1430,2710,2975,2197,2460,666,915,153,400,3840,3593,3331,3082,1804,1541,1295,1030,2822,2575,2309,2060,778,515,265,0],o=[[],[8,3,0],[9,0,1],[8,3,1,8,1,9],[11,2,3],[11,2,0,11,0,8],[11,2,3,0,1,9],[2,1,11,1,9,11,11,9,8],[10,1,2],[8,3,0,1,2,10],[9,0,2,9,2,10],[3,2,8,2,10,8,8,10,9],[10,1,3,10,3,11],[1,0,10,0,8,10,10,8,11],[0,3,9,3,11,9,9,11,10],[8,10,9,8,11,10],[8,4,7],[3,0,4,3,4,7],[1,9,0,8,4,7],[9,4,1,4,7,1,1,7,3],[2,3,11,7,8,4],[7,11,4,11,2,4,4,2,0],[3,11,2,4,7,8,9,0,1],[2,7,11,2,1,7,1,4,7,1,9,4],[10,1,2,8,4,7],[2,10,1,0,4,7,0,7,3],[4,7,8,0,2,10,0,10,9],[2,7,3,2,9,7,7,9,4,2,10,9],[8,4,7,11,10,1,11,1,3],[11,4,7,1,4,11,1,11,10,1,0,4],[3,8,0,7,11,4,11,9,4,11,10,9],[7,11,4,4,11,9,11,10,9],[9,5,4],[3,0,8,4,9,5],[5,4,0,5,0,1],[4,8,5,8,3,5,5,3,1],[11,2,3,9,5,4],[9,5,4,8,11,2,8,2,0],[3,11,2,1,5,4,1,4,0],[8,5,4,2,5,8,2,8,11,2,1,5],[2,10,1,9,5,4],[0,8,3,5,4,9,10,1,2],[10,5,2,5,4,2,2,4,0],[3,4,8,3,2,4,2,5,4,2,10,5],[5,4,9,1,3,11,1,11,10],[0,9,1,4,8,5,8,10,5,8,11,10],[3,4,0,3,10,4,4,10,5,3,11,10],[4,8,5,5,8,10,8,11,10],[9,5,7,9,7,8],[0,9,3,9,5,3,3,5,7],[8,0,7,0,1,7,7,1,5],[1,7,3,1,5,7],[11,2,3,8,9,5,8,5,7],[9,2,0,9,7,2,2,7,11,9,5,7],[0,3,8,2,1,11,1,7,11,1,5,7],[2,1,11,11,1,7,1,5,7],[1,2,10,5,7,8,5,8,9],[9,1,0,10,5,2,5,3,2,5,7,3],[5,2,10,8,2,5,8,5,7,8,0,2],[10,5,2,2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[11,7,6],[0,8,3,11,7,6],[9,0,1,11,7,6],[7,6,11,3,1,9,3,9,8],[2,3,7,2,7,6],[8,7,0,7,6,0,0,6,2],[1,9,0,3,7,6,3,6,2],[7,6,2,7,2,9,2,1,9,7,9,8],[1,2,10,6,11,7],[2,10,1,7,6,11,8,3,0],[11,7,6,10,9,0,10,0,2],[7,6,11,3,2,8,8,2,10,8,10,9],[6,10,7,10,1,7,7,1,3],[6,10,1,6,1,7,7,1,0,7,0,8],[9,0,3,6,9,3,6,10,9,6,3,7],[6,10,7,7,10,8,10,9,8],[8,4,6,8,6,11],[11,3,6,3,0,6,6,0,4],[0,1,9,4,6,11,4,11,8],[1,9,4,11,1,4,11,3,1,11,4,6],[3,8,2,8,4,2,2,4,6],[2,0,4,2,4,6],[1,9,0,3,8,2,2,8,4,2,4,6],[9,4,1,1,4,2,4,6,2],[10,1,2,11,8,4,11,4,6],[10,1,2,11,3,6,6,3,0,6,0,4],[0,2,10,0,10,9,4,11,8,4,6,11],[2,11,3,6,9,4,6,10,9],[8,4,6,8,6,1,6,10,1,8,1,3],[1,0,10,10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[9,5,4,7,6,11],[4,9,5,3,0,8,11,7,6],[6,11,7,4,0,1,4,1,5],[6,11,7,4,8,5,5,8,3,5,3,1],[4,9,5,6,2,3,6,3,7],[9,5,4,8,7,0,0,7,6,0,6,2],[4,0,1,4,1,5,6,3,7,6,2,3],[7,4,8,5,2,1,5,6,2],[6,11,7,1,2,10,9,5,4],[11,7,6,8,3,0,1,2,10,9,5,4],[11,7,6,10,5,2,2,5,4,2,4,0],[7,4,8,2,11,3,10,5,6],[4,9,5,6,10,7,7,10,1,7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[5,6,9,6,11,9,9,11,8],[0,9,5,0,5,3,3,5,6,3,6,11],[0,1,5,0,5,11,5,6,11,0,11,8],[11,3,6,6,3,5,3,1,5],[9,5,6,3,9,6,3,8,9,3,6,2],[5,6,9,9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[1,2,10,5,6,9,9,6,11,9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[10,6,5],[8,3,0,10,6,5],[0,1,9,5,10,6],[10,6,5,9,8,3,9,3,1],[3,11,2,10,6,5],[6,5,10,2,0,8,2,8,11],[1,9,0,6,5,10,11,2,3],[1,10,2,5,9,6,9,11,6,9,8,11],[1,2,6,1,6,5],[0,8,3,2,6,5,2,5,1],[5,9,6,9,0,6,6,0,2],[9,6,5,3,6,9,3,9,8,3,2,6],[11,6,3,6,5,3,3,5,1],[0,5,1,0,11,5,5,11,6,0,8,11],[0,5,9,0,3,5,3,6,5,3,11,6],[5,9,6,6,9,11,9,8,11],[10,6,5,4,7,8],[5,10,6,7,3,0,7,0,4],[5,10,6,0,1,9,8,4,7],[4,5,9,6,7,10,7,1,10,7,3,1],[7,8,4,2,3,11,10,6,5],[11,6,7,10,2,5,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[7,8,4,5,1,2,5,2,6],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,8,0,7,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,4,5,8,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[10,6,4,10,4,9],[8,3,0,9,10,6,9,6,4],[1,10,0,10,6,0,0,6,4],[8,6,4,8,1,6,6,1,10,8,3,1],[2,3,11,6,4,9,6,9,10],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,11,6,3,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[9,1,4,1,2,4,4,2,6],[1,0,9,3,2,8,2,4,8,2,6,4],[2,4,0,2,6,4],[3,2,8,8,2,4,2,6,4],[1,4,9,11,4,1,11,1,3,11,6,4],[0,9,1,4,11,6,4,8,11],[11,6,3,3,6,0,6,4,0],[8,6,4,8,11,6],[6,7,10,7,8,10,10,8,9],[9,3,0,6,3,9,6,9,10,6,7,3],[6,1,10,6,7,1,7,0,1,7,8,0],[6,7,10,10,7,1,7,3,1],[7,11,6,3,8,2,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2,2,9,1,7,8,9],[1,0,9,3,6,7,3,2,6],[8,0,7,7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[11,7,5,11,5,10],[3,0,8,7,5,10,7,10,11],[9,0,1,10,11,7,10,7,5],[3,1,9,3,9,8,7,10,11,7,5,10],[10,2,5,2,3,5,5,3,7],[5,10,2,8,5,2,8,7,5,8,2,0],[9,0,1,10,2,5,5,2,3,5,3,7],[1,10,2,5,8,7,5,9,8],[2,11,1,11,7,1,1,7,5],[0,8,3,2,11,1,1,11,7,1,7,5],[9,0,2,9,2,7,2,11,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[8,7,0,0,7,1,7,5,1],[0,3,9,9,3,5,3,7,5],[9,7,5,9,8,7],[4,5,8,5,10,8,8,10,11],[3,0,4,3,4,10,4,5,10,3,10,11],[0,1,9,4,5,8,8,5,10,8,10,11],[5,9,4,1,11,3,1,10,11],[3,8,4,3,4,2,2,4,5,2,5,10],[10,2,5,5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[8,4,5,2,8,5,2,11,8,2,5,1],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[4,5,8,8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[7,4,11,4,9,11,11,9,10],[3,0,8,7,4,11,11,4,9,11,9,10],[11,7,4,1,11,4,1,10,11,1,4,0],[8,7,4,11,1,10,11,3,1],[2,3,7,2,7,9,7,4,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[2,11,7,2,7,1,1,7,4,1,4,9],[3,2,11,4,8,7,9,1,0],[7,4,11,11,4,2,4,0,2],[2,11,3,7,4,8],[9,1,4,4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[0,9,3,3,9,11,9,10,11],[1,10,0,0,10,8,10,11,8],[10,3,1,10,11,3],[3,8,2,2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[2,11,1,1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]];return e},$3Dmol.MarchingCube=$3Dmol.MarchingCubeInitializer(),$3Dmol.Parsers=function(){var e={},t=function(e){for(var t,n,r,o=0,a=e.length;o<a;o++)e[o].index||(e[o].index=o);a={};for(var s=0;s<e.length;s++)o=e[s],r=Math.floor(o.x/4.95),n=Math.floor(o.y/4.95),t=Math.floor(o.z/4.95),a[r]||(a[r]={}),a[r][n]||(a[r][n]={}),a[r][n][t]||(a[r][n][t]=[]),a[r][n][t].push(o);for(r in e=[{x:0,y:0,z:1},{x:0,y:1,z:-1},{x:0,y:1,z:0},{x:0,y:1,z:1},{x:1,y:-1,z:-1},{x:1,y:-1,z:0},{x:1,y:-1,z:1},{x:1,y:0,z:-1},{x:1,y:0,z:0},{x:1,y:0,z:1},{x:1,y:1,z:-1},{x:1,y:1,z:0},{x:1,y:1,z:1}],a)for(n in a[r=parseInt(r)])for(t in n=parseInt(n),a[r][n]){for(t=parseInt(t),s=a[r][n][t],o=0;o<s.length;o++)for(var l=s[o],u=o+1;u<s.length;u++){var c=s[u];i(l,c)&&-1==l.bonds.indexOf(c.index)&&(l.bonds.push(c.index),l.bondOrder.push(1),c.bonds.push(l.index),c.bondOrder.push(1))}for(o=0;o<e.length;o++)if(a[r+(u=e[o]).x]&&a[r+u.x][n+u.y]&&a[r+u.x][n+u.y][t+u.z])for(l=s,u=a[r+u.x][n+u.y][t+u.z],c=0;c<l.length;c++)for(var p=l[c],d=0;d<u.length;d++){var f=u[d];if(i(p,f)){var h=p.bonds.indexOf(f.index),m=f.bonds.indexOf(p.index);-1==h&&-1==m?(p.bonds.push(f.index),p.bondOrder.push(1),f.bonds.push(p.index),f.bondOrder.push(1)):-1==h?(p.bonds.push(f.index),p.bondOrder.push(f.bondOrder[m])):-1==m&&(f.bonds.push(p.index),f.bondOrder.push(p.bondOrder[h]))}}}},n=function(e){var n,r=[],o=[],a=0;for(n=e.length;a<n;a++){var s=e[a];s.index=a,s.hetflag?o.push(s):r.push(s)}for(t(o),r.sort(function(e,t){return e.chain!=t.chain?e.chain<t.chain?-1:1:e.resi-t.resi}),o=e=-1,a=0,n=r.length;a<n;a++){if((s=r[a]).resi!==e){e=s.resi,l||o++;var l=!1}s.reschain=o;for(var u=a+1;u<r.length;u++){var c=r[u];if(c.chain!=s.chain)break;if(1<c.resi-s.resi)break;i(s,c)&&(-1===s.bonds.indexOf(c.index)&&(s.bonds.push(c.index),s.bondOrder.push(1),c.bonds.push(s.index),c.bondOrder.push(1)),s.resi!==c.resi&&(l=!0))}}},r=function(e){var t;!function(e){var t,n=[],r=0;for(t=e.length;r<t;r++){e[r].index=r;var o=e[r];o.hetflag||"N"!==o.atom&&"O"!==o.atom||(n.push(o),o.hbondOther=null,o.hbondDistanceSq=Number.POSITIVE_INFINITY)}for(n.sort(function(e,t){return e.z-t.z}),r=0,t=n.length;r<t;r++)for(o=n[r],e=r+1;e<t;e++){var i=n[e],a=i.z-o.z;if(3.2<a)break;if(i.atom!=o.atom){var s=Math.abs(i.y-o.y);if(!(3.2<s)){var l=Math.abs(i.x-o.x);3.2<l||10.24<(a=l*l+s*s+a*a)||i.chain==o.chain&&4>Math.abs(i.resi-o.resi)||(a<o.hbondDistanceSq&&(o.hbondOther=i,o.hbondDistanceSq=a),a<i.hbondDistanceSq&&(i.hbondOther=o,i.hbondDistanceSq=a))}}}}(e);var n,r={},o=0;for(t=e.length;o<t;o++){var i=e[o];if(void 0===r[i.chain]&&(r[i.chain]=[]),isFinite(i.hbondDistanceSq)){var a=i.hbondOther;void 0===r[a.chain]&&(r[a.chain]=[]),4===Math.abs(a.resi-i.resi)&&(r[i.chain][i.resi]="h")}}for(n in r)for(i=1;i<r[n].length-1;i++)t=r[n][i-1],o=r[n][i+1],a=r[n][i],"h"==t&&t==o&&a!=t&&(r[n][i]=t);for(o=0,t=e.length;o<t;o++)i=e[o],isFinite(i.hbondDistanceSq)&&"h"!=r[i.chain][i.resi]&&"h"!=i.ss&&(r[i.chain][i.resi]="maybesheet");for(o=0,t=e.length;o<t;o++)if(i=e[o],isFinite(i.hbondDistanceSq)&&"maybesheet"==r[i.chain][i.resi]){var s=r[(a=i.hbondOther).chain][a.resi];"maybesheet"!=s&&"s"!=s||(r[i.chain][i.resi]="s",r[a.chain][a.resi]="s")}for(n in r){for(i=1;i<r[n].length-1;i++)t=r[n][i-1],o=r[n][i+1],a=r[n][i],"s"==t&&t==o&&a!=t&&(r[n][i]=t);for(i=0;i<r[n].length;i++)"h"!=(a=r[n][i])&&"s"!=a||r[n][i-1]==a||r[n][i+1]==a||delete r[n][i]}for(o=0,t=e.length;o<t;o++)void 0!==(a=r[(i=e[o]).chain][i.resi])&&"maybesheet"!=a&&(i.ss=a,r[i.chain][i.resi-1]!=a&&(i.ssbegin=!0),r[i.chain][i.resi+1]!=a&&(i.ssend=!0))};e.vasp=e.VASP=function(e,t){t=[[]];var n=e.replace(/^\s+/,"").split(/[\n\r]/);if(3>n.length)return t;if(!n[1].match(/\d+/))return console.log("Warning: second line of the vasp structure file must be a number"),t;if(0>(e=parseFloat(n[1])))return console.log("Warning: Vasp implementation for negative lattice lengths is not yet available"),t;var r=new Float32Array(n[2].replace(/^\s+/,"").split(/\s+/)),o=new Float32Array(n[3].replace(/^\s+/,"").split(/\s+/)),i=new Float32Array(n[4].replace(/^\s+/,"").split(/\s+/)),a=new $3Dmol.Matrix4(r[0],r[1],r[2],0,o[0],o[1],o[2],0,i[0],i[1],i[2],0,0,0,0,1);a.multiplyScalar(e),t.modelData=[{symmetries:[],cryst:{matrix:a}}],a=n[5].replace(/\s+/,"").replace(/\s+$/,"").split(/\s+/);var s=new Int16Array(n[6].replace(/^\s+/,"").split(/\s+/)),l=n[7].replace(/\s+/,"");if(l.match(/C/))l="cartesian";else{if(!l.match(/D/))return console.log("Warning: Unknown vasp mode in POSCAR file: mode must be either C(artesian) or D(irect)"),t;l="direct"}if(a.length!=s.length)return console.log("Warning: declaration of atomary species wrong:"),console.log(a),console.log(s),t;n.splice(0,8);for(var u=0,c=0,p=a.length;c<p;c++){for(var d=a[c],f=0,h=s[c];f<h;f++){var m=new Float32Array(n[u+f].replace(/^\s+/,"").split(/\s+/)),y={};y.elem=d,"cartesian"==l?(y.x=e*m[0],y.y=e*m[1],y.z=e*m[2]):(y.x=e*(m[0]*r[0]+m[1]*o[0]+m[2]*i[0]),y.y=e*(m[0]*r[1]+m[1]*o[1]+m[2]*i[1]),y.z=e*(m[0]*r[2]+m[1]*o[2]+m[2]*i[2])),y.bonds=[],t[0].push(y)}u+=s[c]}return t},e.cube=e.CUBE=function(e,n){if(n=[[]],6>(e=e.replace(/^\s+/,"").split(/\n\r|\r+/)).length)return n;var r=e[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),o=Math.abs(parseFloat(r[0]));r=e[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),r=0<parseFloat(r[0])?.529177:1,e=e.splice(6,o);for(var i=(o=n[n.length-1].length)+e.length,a=o;a<i;++a){var s={};s.serial=a;var l=e[a-o].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");6==l[0]?s.elem="C":1==l[0]?s.elem="H":8==l[0]?s.elem="O":17==l[0]&&(s.elem="Cl"),s.x=parseFloat(l[2])*r,s.y=parseFloat(l[3])*r,s.z=parseFloat(l[4])*r,s.hetflag=!0,s.bonds=[],s.bondOrder=[],s.properties={},n[n.length-1].push(s)}for(a=0;a<n.length;a++)t(n[a]);return n},e.xyz=e.XYZ=function(e,n){for(var r=[[]],o=e.split(/\r?\n|\r/);0<o.length&&!(3>o.length);){var i=parseInt(o[0]);if(isNaN(i)||0>=i)break;if(o.length<i+2)break;e=2;var a=r[r.length-1].length;for(i=a+i;a<i;a++){var s=o[e++].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),l={};l.serial=a;var u=s[0];l.atom=l.elem=u[0].toUpperCase()+u.substr(1).toLowerCase(),l.x=parseFloat(s[1]),l.y=parseFloat(s[2]),l.z=parseFloat(s[3]),l.hetflag=!0,l.bonds=[],l.bondOrder=[],l.properties={},r[r.length-1][a]=l,7<=s.length&&(l.dx=parseFloat(s[4]),l.dy=parseFloat(s[5]),l.dz=parseFloat(s[6]))}if(!n.multimodel)break;r.push([]),o.splice(0,e)}for(a=0;a<r.length;a++)t(r[a]);if(n.onemol)for(n=r,(r=[]).push(n[0]),a=1;a<n.length;a++)for(e=r[0].length,o=0;o<n[a].length;o++){for(i=n[a][o],s=0;s<i.bonds.length;s++)i.bonds[s]+=e;i.index=r[0].length,i.serial=r[0].length,r[0].push(i)}return r},e.sdf=e.SDF=function(e,t){var n=[[]],r=!1;for(void 0!==t.keepH&&(r=!t.keepH),e=e.split(/\r?\n|\r/);0<e.length&&!(4>e.length);){var o=parseInt(e[3].substr(0,3));if(isNaN(o)||0>=o)break;var i=parseInt(e[3].substr(3,3)),a=4;if(e.length<4+o+i)break;var s=[],l=n[n.length-1].length,u=l+o;for(o=l;o<u;o++,a++){var c=e[a],p={},d=c.substr(31,3).replace(/ /g,"");p.atom=p.elem=d[0].toUpperCase()+d.substr(1).toLowerCase(),"H"==p.elem&&r||(p.serial=o,s[o]=n[n.length-1].length,p.x=parseFloat(c.substr(0,10)),p.y=parseFloat(c.substr(10,10)),p.z=parseFloat(c.substr(20,10)),p.hetflag=!0,p.bonds=[],p.bondOrder=[],p.properties={},p.index=n[n.length-1].length,n[n.length-1].push(p))}for(o=0;o<i;o++,a++)c=e[a],u=s[parseInt(c.substr(0,3))-1+l],p=s[parseInt(c.substr(3,3))-1+l],c=parseInt(c.substr(6,3)),void 0!==u&&void 0!==p&&(n[n.length-1][u].bonds.push(p),n[n.length-1][u].bondOrder.push(c),n[n.length-1][p].bonds.push(u),n[n.length-1][p].bondOrder.push(c));if(!t.multimodel)break;for(t.onemol||n.push([]);"$$$$"!=e[a];)a++;e.splice(0,++a)}return n},e.cdjson=e.json=function(e,t){var n=[[]];"string"==typeof e&&(e=JSON.parse(e));var r=e.m,o=r[0].a;e=r[0].b;var i=r[0].s,a=void 0!==t&&void 0!==t.parseStyle?t.parseStyle:void 0!==i;for(t=n[n.length-1].length,r=0;r<o.length;r++){var s=o[r],l={};l.id=s.i,l.x=s.x,l.y=s.y,l.z=s.z||0,l.bonds=[],l.bondOrder=[];var u=s.l||"C";l.elem=u[0].toUpperCase()+u.substr(1).toLowerCase(),l.serial=n[n.length-1].length,a&&(l.style=i[s.s||0]),n[n.length-1].push(l)}for(r=0;r<e.length;r++)o=(a=e[r]).b+t,i=a.e+t,a=a.o||1,s=n[n.length-1][o],l=n[n.length-1][i],s.bonds.push(i),s.bondOrder.push(a),l.bonds.push(o),l.bondOrder.push(a);return n},e.mcif=e.cif=function(e,n){function o(e,t){for(var n=[],r=0,o=0;o<e.length;){for(;e.substr(o,t.length)!==t&&o<e.length;){if("'"===e[o])for(o++;o<e.length&&"'"!==e[o];)o++;else if('"'===e[o])for(o++;o<e.length&&'"'!==e[o];)o++;o++}n.push(e.substr(r,o-r)),r=o+=t.length}return n}var i=[],s=!n.doAssembly;n=!n.duplicateAssemblyAtoms;var l=i.modelData=[],u=e.split(/\r?\n|\r/);e=[];for(var c=!1,p=0;p<u.length;p++){var d=u[p].split("#")[0];if(c?";"===d[0]&&(c=!1):";"===d[0]&&(c=!0),c||""!==d){if(!c&&"_"===(d=d.trim())[0]){var f=d.split(/\s/)[0].indexOf(".");-1<f&&(d[f]="_",d=d.substr(0,f)+"_"+d.substr(f+1))}e.push(d)}}for(p=0;p<e.length;){for(u=function(e){var t=e.match("-"),n=void 0===(e=(e=e.replace(/[-xyz]/g,"")).split("/"))[1]?1:parseInt(e[1]);return(""===e[0]?1:parseInt(e[0]))/n*(t?-1:1)},f=function(e,t,n){return{x:O[0][0]*e+O[0][1]*t+O[0][2]*n,y:O[1][0]*e+O[1][1]*t+O[1][2]*n,z:O[2][0]*e+O[2][1]*t+O[2][2]*n}};!e[p].startsWith("data_")||"data_global"===e[p];)p++;for(p++,c={};p<e.length&&!e[p].startsWith("data_");)if(void 0===e[p][0])p++;else if("_"===e[p][0]){var h=e[p].split(/\s/)[0].toLowerCase();d=c[h]=c[h]||[];var m=e[p].substr(e[p].indexOf(h)+h.length);if(""===m)if(";"===e[++p][0]){for(m=e[p].substr(1),p++;";"!==e[p];)m=m+"\n"+e[p],p++;d.push(m)}else d.push(e[p]);else d.push(m.trim());p++}else if("loop_"===e[p].substr(0,5)){for(p++,m=[];""===e[p]||"_"===e[p][0];)""!==e[p]&&(d=c[h=e[p].split(/\s/)[0].toLowerCase()]=c[h]||[],m.push(d)),p++;for(h=0;p<e.length&&"_"!==e[p][0]&&!e[p].startsWith("loop_")&&!e[p].startsWith("data_");){d=o(e[p]," ");for(var y=0;y<d.length;y++)""!==d[y]&&(m[h].push(d[y]),h=(h+1)%m.length);p++}}else p++;if(l.push({symmetries:[]}),i.push([]),m=void 0!==c._atom_site_id?c._atom_site_id.length:c._atom_site_label.length,void 0!==c._cell_length_a){d=parseFloat(c._cell_length_a),h=parseFloat(c._cell_length_b),y=parseFloat(c._cell_length_c);var g=parseFloat(c._cell_angle_alpha)||90,v=parseFloat(c._cell_angle_beta)||90,b=parseFloat(c._cell_angle_gamma)||90,S=b*Math.PI/180,_=Math.cos(g*Math.PI/180),w=Math.cos(v*Math.PI/180),E=Math.cos(S),O=[[d,h*E,y*w],[0,h*(S=Math.sin(S)),y*(_-w*E)/S],[0,0,y*Math.sqrt(1-_*_-w*w-E*E+2*_*w*E)/S]];l[l.length-1].cryst={a:d,b:h,c:y,alpha:g,beta:v,gamma:b}}for(d=0;d<m;d++)void 0!==c._atom_site_group_pdb&&"TER"===c._atom_site_group_pdb[d]||(h={},void 0!==c._atom_site_cartn_x?(h.x=parseFloat(c._atom_site_cartn_x[d]),h.y=parseFloat(c._atom_site_cartn_y[d]),h.z=parseFloat(c._atom_site_cartn_z[d])):(y=f(parseFloat(c._atom_site_fract_x[d]),parseFloat(c._atom_site_fract_y[d]),parseFloat(c._atom_site_fract_z[d])),h.x=y.x,h.y=y.y,h.z=y.z),h.chain=c._atom_site_auth_asym_id?c._atom_site_auth_asym_id[d]:void 0,h.resi=c._atom_site_auth_seq_id?parseInt(c._atom_site_auth_seq_id[d]):void 0,h.resn=c._atom_site_auth_comp_id?c._atom_site_auth_comp_id[d].trim():void 0,h.atom=c._atom_site_auth_atom_id?c._atom_site_auth_atom_id[d].replace(/"/gm,""):void 0,h.hetflag=!c._atom_site_group_pdb||"HETA"===c._atom_site_group_pdb[d]||"HETATM"===c._atom_site_group_pdb[d],y=c._atom_site_type_symbol[d],h.elem=y[0].toUpperCase()+y.substr(1).toLowerCase(),h.bonds=[],h.ss="c",h.serial=d,h.bondOrder=[],h.properties={},i[i.length-1].push(h));if(void 0!==c._pdbx_struct_oper_list_id&&!s){for(d=0;d<c._pdbx_struct_oper_list_id.length;d++){f=parseFloat(c["_pdbx_struct_oper_list_matrix[1][1]"][d]),m=parseFloat(c["_pdbx_struct_oper_list_matrix[1][2]"][d]),h=parseFloat(c["_pdbx_struct_oper_list_matrix[1][3]"][d]),y=parseFloat(c["_pdbx_struct_oper_list_vector[1]"][d]),g=parseFloat(c["_pdbx_struct_oper_list_matrix[2][1]"][d]),v=parseFloat(c["_pdbx_struct_oper_list_matrix[2][2]"][d]),b=parseFloat(c["_pdbx_struct_oper_list_matrix[2][3]"][d]),_=parseFloat(c["_pdbx_struct_oper_list_vector[2]"][d]),w=parseFloat(c["_pdbx_struct_oper_list_matrix[3][1]"][d]),E=parseFloat(c["_pdbx_struct_oper_list_matrix[3][2]"][d]),S=parseFloat(c["_pdbx_struct_oper_list_matrix[3][3]"][d]);var C=parseFloat(c["_pdbx_struct_oper_list_vector[3]"][d]);f=new $3Dmol.Matrix4(f,m,h,y,g,v,b,_,w,E,S,C),l[l.length-1].symmetries.push(f)}for(d=0;d<i.length;d++)a(l[l.length-1].symmetries,n,i[d])}if(void 0!==c._symmetry_equiv_pos_as_xyz)for(d=0;d<c._symmetry_equiv_pos_as_xyz.length;d++){for(m=c._symmetry_equiv_pos_as_xyz[d].replace(/["' ]/g,"").split(",").map(function(e){return e.replace(/-/g,"+-")}),f=new $3Dmol.Matrix4(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1),h=0;3>h;h++)for(y=m[h].split("+"),g=0;g<y.length;g++)""!==(v=y[g])&&(b=u(v),v.match("x")?f.elements[h+0]=b:v.match("y")?f.elements[h+4]=b:v.match("z")?f.elements[h+8]=b:f.elements[h+12]=b);m=new $3Dmol.Matrix4(O[0][0],O[0][1],O[0][2],0,O[1][0],O[1][1],O[1][2],0,O[2][0],O[2][1],O[2][2],0),h=(new $3Dmol.Matrix4).getInverse(m,!0),f=(new $3Dmol.Matrix4).multiplyMatrices(f,h),f=(new $3Dmol.Matrix4).multiplyMatrices(m,f),l[l.length-1].symmetries.push(f)}}for(d=0;d<i.length;d++)t(i[d]),r(i[d]),a(l[d].symmetries,n,i[d]);return i},e.mol2=e.MOL2=function(e,t){var n=[[]],r=!1;void 0!==t.keepH&&(r=!t.keepH);var o=e.search(/@<TRIPOS>MOLECULE/),i=e.search(/@<TRIPOS>ATOM/);if(-1==o||-1==i)return n;for(e=e.substr(o,e.length).split(/\r?\n|\r/);0<e.length;){o=[];var a=e[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),s=parseInt(a[0]);i=0,1<a.length&&(i=parseInt(a[1]));var l,u=4;for(l=3;l<e.length;l++)if("@<TRIPOS>ATOM"==e[l]){u=l+1;break}for(s=(l=n[n.length-1].length)+s;l<s;l++){var c={},p=(a=(a=e[u++]).replace(/^\s+/,"").replace(/\s+/g," ").split(" "))[5].split(".")[0];if(c.atom=c.elem=p[0].toUpperCase()+p.substr(1).toLowerCase(),"H"!=c.elem||!r){p=n[n.length-1].length;var d=parseInt(a[0]);c.serial=d,c.x=parseFloat(a[2]),c.y=parseFloat(a[3]),c.z=parseFloat(a[4]),c.atom=a[5],a=parseFloat(a[8]),c.index=p,c.bonds=[],c.bondOrder=[],c.properties={charge:a,partialCharge:a},o[d]=p,n[n.length-1].push(c)}}for(l=!1;u<e.length;)if("@<TRIPOS>BOND"==e[u++]){l=!0;break}if(l&&i)for(l=0;l<i;l++)a=(a=e[u++]).replace(/^\s+/,"").replace(/\s+/g," ").split(" "),s=parseInt(a[1]),c=n[n.length-1][o[s]],p=parseInt(a[2]),d=n[n.length-1][o[p]],a=parseInt(a[3]),isNaN(a)&&(a=1),void 0!==c&&void 0!==d&&(c.bonds.push(o[p]),c.bondOrder.push(a),d.bonds.push(o[s]),d.bondOrder.push(a));if(!t.multimodel)break;t.onemol||n.push([]),e.splice(0,u),e.join("\n")}return n};var o={H:.37,He:.32,Li:1.34,Be:.9,B:.82,C:.77,N:.75,O:.73,F:.71,Ne:.69,Na:1.54,Mg:1.3,Al:1.18,Si:1.11,P:1.06,S:1.02,Cl:.99,Ar:.97,K:1.96,Ca:1.74,Sc:1.44,Ti:1.56,V:1.25,Mn:1.39,Fe:1.25,Co:1.26,Ni:1.21,Cu:1.38,Zn:1.31,Ga:1.26,Ge:1.22,Se:1.16,Br:1.14,Kr:1.1,Rb:2.11,Sr:1.92,Y:1.62,Zr:1.48,Nb:1.37,Mo:1.45,Tc:1.56,Ru:1.26,Rh:1.35,Pd:1.31,Ag:1.53,Cd:1.48,In:1.44,Sn:1.41,Sb:1.38,Te:1.35,I:1.33,Xe:1.3,Cs:2.25,Ba:1.98,Lu:1.6,Hf:1.5,Ta:1.38,W:1.46,Re:1.59,Os:1.44,Ir:1.37,Pt:1.28,Au:1.44,Hg:1.49,Tl:1.48,Pb:1.47,Bi:1.46,Rn:1.45},i=function(e,t){var n=(o[e.elem]||1.6)+(o[t.elem]||1.6);n+=.25,n*=n;var r=e.x-t.x;if((r*=r)>n)return!1;var i=e.y-t.y;if((i*=i)>n)return!1;var a=e.z-t.z;return!((a*=a)>n)&&(r=r+i+a,!isNaN(r)&&(!(.5>r)&&(!(r>n)&&(e.altLoc==t.altLoc||" "==e.altLoc||" "==t.altLoc))))},a=function(e,t,n){var r,o,i=n.length,a=i;if(t){if(1<e.length)for(t=0;t<n.length;t++){for(i=[],r=0;r<e.length;r++)e[r].isIdentity()||((a=new $3Dmol.Vector3).set(n[t].x,n[t].y,n[t].z),a.applyMatrix4(e[r]),i.push(a));n[t].symmetries=i}}else for(t=0;t<e.length;t++)if(!e[t].isIdentity()){var s=new $3Dmol.Vector3;for(o=0;o<i;o++){var l=[];for(r=0;r<n[o].bonds.length;r++)l.push(n[o].bonds[r]+a);for(var u in s.set(n[o].x,n[o].y,n[o].z),s.applyMatrix4(e[t]),r={},n[o])r[u]=n[o][u];r.x=s.x,r.y=s.y,r.z=s.z,r.bonds=l,n.push(r)}a=n.length}},s=function(e,t){return 0<(e=e.replace(/ /g,"")).length&&"H"==e[0]&&"Hg"!=e&&(e="H"),1<e.length&&(e=e[0].toUpperCase()+e.substr(1).toLowerCase(),void 0===o[e]?e=e[0]:t&&("Ca"==e?e="C":"Cd"==e&&(e="C"))),e};e.pdb=e.PDB=e.pdbqt=e.PDBQT=function(e,t){var i=[],l={};i.modelData=[];for(var u=e.split(/\r?\n|\r/);0<u.length;){var c,p=u;e=l,u=[];var d=!t.keepH,f=!!t.noSecondaryStructure,h=!t.noComputeSecondaryStructure,m=!t.doAssembly,y=!t.duplicateAssemblyAtoms,g=t.altLoc?t.altLoc:"A",v={symmetries:[]},b=[],S=[],_={};for(c=0;c<p.length;c++){var w=p[c].replace(/^\s*/,""),E=w.substr(0,6);if(0==E.indexOf("END")){if(b=p.slice(c+1),"END"==E)for(var O in e)e.hasOwnProperty(O)&&delete e[O];break}if("ATOM  "==E||"HETATM"==E){var C=w.substr(16,1);if(" "==C||C==g||"*"==g){var P=parseInt(w.substr(6,5)),x=w.substr(12,4).replace(/ /g,""),T=w.substr(17,3).replace(/ /g,""),k=w.substr(21,1),A=parseInt(w.substr(22,4)),I=w.substr(26,1),D=parseFloat(w.substr(30,8)),M=parseFloat(w.substr(38,8)),j=parseFloat(w.substr(46,8)),N=parseFloat(w.substr(60,8)),R=w.substr(76,2).replace(/ /g,"");"H"==(R=""===R||void 0===o[R]?s(w.substr(12,2),"A"==w[0]):R[0].toUpperCase()+R.substr(1).toLowerCase())&&d||(E="H"==E[0],S[P]=u.length,u.push({resn:T,x:D,y:M,z:j,elem:R,hetflag:E,altLoc:C,chain:k,resi:A,icode:I,rescode:A+(" "!=I?"^"+I:""),serial:P,atom:x,bonds:[],ss:"c",bondOrder:[],properties:{},b:N,pdbline:w}))}}else if("SHEET "==E){N=w.substr(21,1),x=parseInt(w.substr(22,4)),w.substr(32,1),w=parseInt(w.substr(33,4)),N in e||(e[N]={}),e[N][x]="s1";for(x+=1;x<w;x++)e[N][x]="s";e[N][w]="s2"}else if("CONECT"==E){for(P=u[x=S[N=parseInt(w.substr(6,5))]],T=[11,16,21,26],N=0;4>N;N++)if(A=u[k=S[k=parseInt(w.substr(T[N],5))]],void 0!==P&&void 0!==A)if(_[[x,k]])for(_[[x,k]]+=1,A=0;A<P.bonds.length;A++)P.bonds[A]==k&&(I=_[[x,k]],P.bondOrder[A]=4<=I?1:I);else _[[x,k]]=1,(0==P.bonds.length||P.bonds[P.bonds.length-1]!=k)&&(P.bonds.push(k),P.bondOrder.push(1))}else if("HELIX "==E){N=w.substr(19,1),x=parseInt(w.substr(21,4)),w.substr(31,1),w=parseInt(w.substr(33,4)),N in e||(e[N]={}),e[N][x]="h1";for(x+=1;x<w;x++)e[N][x]="h";e[N][w]="h2"}else if(m||"REMARK"!=E||"BIOMT"!=w.substr(13,5))"CRYST1"==E?(x=parseFloat(w.substr(7,8)),N=parseFloat(w.substr(16,8)),P=parseFloat(w.substr(25,8)),T=parseFloat(w.substr(34,6)),k=parseFloat(w.substr(41,6)),w=parseFloat(w.substr(48,6)),v.cryst={a:x,b:N,c:P,alpha:T,beta:k,gamma:w}):"ANISOU"==E&&(N=u[S[P=parseInt(w.substr(6,5))]])&&(w=w.substr(30).trim().split(/\s+/),w={u11:parseInt(w[0]),u22:parseInt(w[1]),u33:parseInt(w[2]),u12:parseInt(w[3]),u13:parseInt(w[4]),u23:parseInt(w[5])},N.uMat=w);else{for(x=new $3Dmol.Matrix4,N=1;3>=N;N++)if(w=p[c].replace(/^\s*/,""),parseInt(w.substr(18,1))==N)x.elements[N-1]=parseFloat(w.substr(23,10)),x.elements[N-1+4]=parseFloat(w.substr(33,10)),x.elements[N-1+8]=parseFloat(w.substr(43,10)),x.elements[N-1+12]=parseFloat(w.substr(53)),c++;else for(;"BIOMT"==w.substr(13,5);)w=p[++c].replace(/^\s*/,"");x.elements[3]=0,x.elements[7]=0,x.elements[11]=0,x.elements[15]=1,v.symmetries.push(x),c--}}for((new Date).getTime(),p=0,d=(c=u).length;p<d;p++)for(g=c[p],_=0;_<g.bonds.length;_++)w=c[g.bonds[_]],N=S[g.serial],w&&N&&0>w.bonds.indexOf(N)&&(w.bonds.push(N),w.bondOrder.push(g.bondOrder[_]));n(u),m||a(v.symmetries,y,u),h&&!f&&((new Date).getTime(),r(u)),(new Date).getTime();e:{for(f in f=void 0,h=e){f=!1;break e}f=!0}if(!f)for(c=0;c<u.length;c++)void 0!==(x=u[c])&&x.chain in e&&x.resi in e[x.chain]&&(f=e[x.chain][x.resi],x.ss=f[0],1<f.length&&("1"==f[1]?x.ssbegin=!0:"2"==f[1]&&(x.ssend=!0)));if(e=(u=[u,v,b])[0],v=u[1],u=u[2],0!=e.length){if(t.multimodel&&t.onemol&&0<i.length)for(v=i[0].length,b=0;b<e.length;b++){for((f=e[b]).index=b,h=0;h<f.bonds.length;h++)f.bonds[h]+=v;i[0].push(f)}else i.modelData.push(v),i.push(e);if(!t.multimodel)break}}return i},e.pqr=e.PQR=function(e,t){var o=[[]],i=!t.noSecondaryStructure;o.modelData=[{symmetries:[]}];var a,s=[];for(e=e.split(/\r?\n|\r/),a=0;a<e.length;a++){var l=e[a].replace(/^\s*/,""),u=l.substr(0,6);if(0==u.indexOf("END")){if(!t.multimodel)break;t.onemol||o.push([])}else if("ATOM  "==u||"HETATM"==u){var c=parseInt(l.substr(6,5));u=l.substr(12,4).replace(/ /g,"");var p=l.substr(17,3),d=l.substr(21,1),f=parseInt(l.substr(22,4)),h=l.substr(30).trim().split(/\s+/),m=parseFloat(h[0]),y=parseFloat(h[1]),g=parseFloat(h[2]),v=parseFloat(h[3]),b=parseFloat(h[4]),S=u[0];1<u.length&&u[1].toUpperCase()!=u[1]&&(S=u.substr(0,2)),h="H"==l[0],s[c]=o[o.length-1].length,o[o.length-1].push({resn:p,x:m,y:y,z:g,elem:S,hetflag:h,chain:d,resi:f,serial:c,atom:u,bonds:[],ss:"c",bondOrder:[],properties:{charge:v,partialCharge:v,radius:b},pdbline:l})}else if("CONECT"==u)for(u=parseInt(l.substr(6,5)),c=o[o.length-1][s[u]],u=0;4>u;u++)p=parseInt(l.substr([11,16,21,26][u],5)),d=o[o.length-1][s[p]],void 0!==c&&void 0!==d&&(c.bonds.push(s[p]),c.bondOrder.push(1))}for(a=0;a<o.length;a++)n(o[a]),i&&r(o[a]);return o};var l=function(e){return 0==e||2==e||4==e?"h":3==e?"s":"c"};return e.mmtf=e.MMTF=function(e,t){var n=!t.keepH,o=t.altLoc?t.altLoc:"A",i=!!t.noSecondaryStructure,s=!t.noComputeSecondaryStructure,u=!t.doAssembly,c=!t.duplicateAssemblyAtoms,p=t.assemblyIndex?t.assemblyIndex:0;"string"==typeof e&&(e=$3Dmol.base64ToArray(e)),e=MMTF.decode(e);var d=[[]],f=d.modelData=[],h=0,m=0,y=0,g=0,v=e.secStructList,b=e.insCodeList,S=e.bFactorList,_=e.altLocList,w=e.occupancyList,E=e.bondAtomList,O=e.bondOrderList,C=e.numModels;if(0==C)return d;t.multimodel||(C=1);var P,x=[];if(!u&&e.bioAssemblyList&&0<e.bioAssemblyList.length){var T=e.bioAssemblyList[p].transformList;for(p=0,P=T.length;p<P;p++){var k=new $3Dmol.Matrix4(T[p].matrix);k.transpose(),x.push(k)}}k=null,e.unitCell&&(k={a:(p=e.unitCell)[0],b:p[1],c:p[2],alpha:p[3],beta:p[4],gamma:p[5]});var A=0;for(T=0;T<C;T++){var I=e.chainsPerModel[T],D=d[d.length-1],M=[];for(f.push({symmetries:x,cryst:k}),p=0;p<I;++p){var j=e.groupsPerChain[m],N=String.fromCharCode.apply(null,e.chainIdList.subarray(4*m,4*m+4)).replace(/\0/g,"");e.chainNameList&&(N=String.fromCharCode.apply(null,e.chainNameList.subarray(4*m,4*m+4)).replace(/\0/g,""));var R=y,L="";for(P=0;P<j;++P){var G=e.groupList[e.groupTypeList[y]],F=G.atomNameList.length,B=0,V=!1,z=!1;if(v){B=v[y];var q=l(B);0!=y&&q==L||(V=!0),L=q;var U=y+1;(U>=v.length||l(v[U]!=q))&&(z=!0)}e.insCodeList&&String.fromCharCode(b[y]);var H=e.groupIdList[y],W=G.groupName;for(U=g,q=0;q<F;++q){var K=G.elementList[q];if(!n||"H"!=K){var $="";S&&($=S[g]);var Q="";_&&_[g]&&(Q=String.fromCharCode(_[g]));var Y="";if(w&&(Y=w[g]),""==Q||Q==o||"*"==o){var X=e.atomIdList[g],Z=G.atomNameList[q],J=0;G.atomChargeList&&(J=G.atomChargeList[q]);var ee=e.xCoordList[g],te=e.yCoordList[g],ne=e.zCoordList[g];M[g]=D.length,D.push({resn:W,x:ee,y:te,z:ne,elem:K,hetflag:0>B,chain:N,resi:H,icode:Q,rescode:H+(" "!=Q?"^"+Q:""),serial:X,altLoc:Q,index:g,atom:Z,bonds:[],ss:l(B),ssbegin:V,ssend:z,bondOrder:[],properties:{charge:J,occupancy:Y},b:$})}}g+=1}for(V=G.bondAtomList,q=0,B=G.bondOrderList.length;q<B;++q)z=U+V[2*q],H=U+V[2*q+1],F=G.bondOrderList[q],z=M[z],K=M[H],W=D[z],H=D[K],W&&H&&(W.bonds.push(K),W.bondOrder.push(F),H.bonds.push(z),H.bondOrder.push(F));y+=1}for(y=R,P=0;P<j;++P)y+=1;m+=1}if(E)for(q=A,B=E.length;q<B;q+=2){if(z=E[q],H=E[q+1],F=O?O[q/2]:1,z>=g){A=q;break}z=M[z],K=M[H],W=D[z],H=D[K],W&&H&&(W.bonds.push(K),W.bondOrder.push(F),H.bonds.push(z),H.bondOrder.push(F))}if(t.multimodel&&(t.onemol||d.push([])),!u)for(P=0;P<d.length;P++)a(f[h].symmetries,c,d[P]);h+=1}return s&&!i&&r(d),d},e.prmtop=e.PRMTOP=function(e,t){function n(e){var t=a.indexOf(s.filter(function(t){return t.includes(e)})[0]);if(Number.isInteger(t)&&0<t){for(;!a[t].includes("FORMAT");)t++;return t}return-1}function r(e){var t=a[e].match(/\((\d*)\S*/),n=a[e].match(/[a-zA-Z](\d*)\)\s*/);return null==n&&(n=a[e].match(/[a-zA-Z](\d*)\.\d*\)\s*/)),[t[1],n[1]]}var o;t=[];var i=0,a=e.split(/\r?\n|\r/);if(!(0<a.length&&a[0].includes("VERSION")))return[];var s=a.filter(function(e){return e.includes("POINTERS")||e.includes("ATOM_NAME")||e.includes("CHARGE")||e.includes("RADII")||e.includes("BONDS_INC_HYDROGEN")||e.includes("BONDS_WITHOUT_HYDROGEN")});if(-1==(e=n("POINTERS")))return[];var l=r(e),u=parseInt(a[e+1].slice(0,l[1]));if(isNaN(u)||0>=u)return[];if(-1==(e=n("ATOM_NAME")))return[];for(var c=(l=r(e))[0],p=0;p<u/l[0];p++){p==parseInt(u/l[0])&&(c=u%l[0]);for(var d=0;d<c;d++){var f={};f.serial=i,f.x=0,f.y=0,f.z=0,f.atom=a[e+1].slice(l[1]*d,l[1]*(d+1)),f.elem=a[e+1].slice(l[1]*d,l[1]*d+1),f.properties={charge:"",radii:""},f.bonds=[],f.bondOrder=[],t.push(f),i++}e++}if(-1!=(e=n("CHARGE")))for(i=0,c=(l=r(e))[0],p=0;p<u/l[0];p++){for(p==parseInt(u/l[0])&&(c=u%l[0]),d=0;d<c;d++)t[i].properties.charge=parseFloat(a[e+1].slice(l[1]*d,l[1]*(d+1))),i++;e++}if(-1!=(e=n("RADII")))for(i=0,c=(l=r(e))[0],p=0;p<u/l[0];p++){for(p==parseInt(u/l[0])&&(c=u%l[0]),d=0;d<c;d++)t[i].properties.radii=parseFloat(a[e+1].slice(l[1]*d,l[1]*(d+1))),i++;e++}if(-1!=(e=n("BONDS_WITHOUT_HYDROGEN")))for(i=0,c=(l=r(e))[0],e+=1;!a[e].match(/^%FLAG/);){for(a[e+1].match(/^%FLAG/)&&(c=u%l[0]),d=0;d<c;d++)0==i%3&&(o=parseInt(a[e].slice(l[1]*d,l[1]*(d+1))/3)),1==i%3&&t[o].bonds.push(parseInt(a[e].slice(l[1]*d,l[1]*(d+1))/3)),i++;e++}if(-1!=(e=n("BONDS_INC_HYDROGEN")))for(i=0,c=(l=r(e))[0],e+=1;!a[e].match(/^%FLAG/);){for(a[e+1].match(/^%FLAG/)&&(c=u%l[0]),d=0;d<c;d++)0==i%3&&(o=parseInt(a[e].slice(l[1]*d,l[1]*(d+1))/3)),1==i%3&&t[o].bonds.push(parseInt(a[e].slice(l[1]*d,l[1]*(d+1))/3)),i++;e++}return[t]},e.gro=e.GRO=function(e,t){for(t=[],e=e.split(/\r?\n|\r/);0<e.length&&!(3>e.length);){var r=parseInt(e[1]);if(isNaN(r)||0>=r)break;if(e.length<r+3)break;var o=[];t.push(o);var i=2,a=o.length;for(r=a+r;a<r;a++){var l=e[i++],u={};u.serial=a,u.atom=l.slice(10,15).trim(),u.elem=s(u.atom,!0),u.x=10*parseFloat(l.slice(20,28)),u.y=10*parseFloat(l.slice(28,36)),u.z=10*parseFloat(l.slice(36,44)),u.resi=parseInt(l.slice(0,5)),u.resn=l.slice(5,10).trim(),u.bonds=[],u.bondOrder=[],u.properties={},44<l.length&&(u.dx=10*parseFloat(l.slice(44,52)),u.dy=10*parseFloat(l.slice(52,60)),u.dz=10*parseFloat(l.slice(60,68))),o[a]=u}if(e.length<=i+3&&3==(o=e[i++].trim().split(/\s+/)).length){for(r=0;3>r;r++)o[r]=10*parseFloat(o[r]);t.box=o}e.splice(0,++i)}for(a=0;a<t.length;a++)n(t[a]);return t},e.lammpstrj=e.LAMMPSTRJ=function(e,n){var r=[],o={id:"serial",type:"atom",element:"elem",q:"charge",radius:"radius",x:"x",xu:"x",xs:"x",xsu:"x",y:"y",yu:"y",ys:"y",ysu:"y",z:"z",zu:"z",zs:"z",zsu:"z"};e=e.split(/\r?\n|\r/);for(var i=0,a=0,s=0;s<e.length-9;){for(;s<e.length;s++)if(e[s].match(/ITEM: NUMBER OF ATOMS/)&&(a=parseInt(e[s+1])),e[s].match(/ITEM: ATOMS/)){i=s+1;break}var l=e[i-1].replace("ITEM: ATOMS ","").split(" ");for(r.push([]),s=i;s<i+a;s++){for(var u={},c={},p=e[s].split(" "),d=0;d<p.length;d++){var f=o[l[d]];null!=f&&("serial"==f?u[f]=parseInt(p[d]):"x"==f||"y"==f||"z"===f?u[f]=parseFloat(p[d]):"charge"==f||"radius"==f?c[f]=parseFloat(p[d]):u[f]=p[d]),u.properties=c,u.bonds=[],u.bondOrder=[]}r[r.length-1][s-i]=u}s=i+a-1}if(n.assignbonds)for(n=0;n<r.length;n++)t(r[n]);return r},e}(),$3Dmol=$3Dmol||{},$3Dmol.partialCharges={"ALA:N":-.15,"ALA:CA":.1,"ALA:CB":0,"ALA:C":.6,"ALA:O":-.55,"ARG:N":-.15,"ARG:CA":.1,"ARG:CB":0,"ARG:CG":0,"ARG:CD":.1,"ARG:NE":-.1,"ARG:CZ":.5,"ARG:NH1":.25,"ARG:NH2":.25,"ARG:C":.6,"ARG:O":-.55,"ASN:N":-.15,"ASN:CA":.1,"ASN:CB":0,"ASN:CG":.55,"ASN:OD1":-.55,"ASN:ND2":0,"ASN:C":.6,"ASN:O":-.55,"ASP:N":-.15,"ASP:CA":.1,"ASP:CB":0,"ASP:CG":.14,"ASP:OD1":-.57,"ASP:OD2":-.57,"ASP:C":.6,"ASP:O":-.55,"CYS:N":-.15,"CYS:CA":.1,"CYS:CB":.19,"CYS:SG":-.19,"CYS:C":.6,"CYS:O":-.55,"GLN:N":-.15,"GLN:CA":.1,"GLN:CB":0,"GLN:CG":0,"GLN:CD":.55,"GLN:OE1":-.55,"GLN:NE2":0,"GLN:C":.6,"GLN:O":-.55,"GLU:N":-.15,"GLU:CA":.1,"GLU:CB":0,"GLU:CG":0,"GLU:CD":.14,"GLU:OE1":-.57,"GLU:OE2":-.57,"GLU:C":.6,"GLU:O":-.55,"GLY:N":-.15,"GLY:CA":.1,"GLY:C":.6,"GLY:O":-.55,"HIS:N":-.15,"HIS:CA":.1,"HIS:CB":0,"HIS:CG":.1,"HIS:ND1":-.1,"HIS:CD2":.1,"HIS:NE2":-.4,"HIS:CE1":.3,"HIS:C":.6,"HIS:O":-.55,"ILE:N":-.15,"ILE:CA":.1,"ILE:CB":0,"ILE:CG2":0,"ILE:CG1":0,"ILE:CD":0,"ILE:C":.6,"ILE:O":-.55,"LEU:N":-.15,"LEU:CA":.1,"LEU:CB":0,"LEU:CG":0,"LEU:CD1":0,"LEU:CD2":0,"LEU:C":.6,"LEU:O":-.55,"LYS:N":-.15,"LYS:CA":.1,"LYS:CB":0,"LYS:CG":0,"LYS:CD":0,"LYS:CE":.25,"LYS:NZ":.75,"LYS:C":.6,"LYS:O":-.55,"MET:N":-.15,"MET:CA":.1,"MET:CB":0,"MET:CG":.06,"MET:SD":-.12,"MET:CE":.06,"MET:C":.6,"MET:O":-.55,"PHE:N":-.15,"PHE:CA":.1,"PHE:CB":0,"PHE:CG":0,"PHE:CD1":0,"PHE:CD2":0,"PHE:CE1":0,"PHE:CE2":0,"PHE:CZ":0,"PHE:C":.6,"PHE:O":-.55,"PRO:N":-.25,"PRO:CD":.1,"PRO:CA":.1,"PRO:CB":0,"PRO:CG":0,"PRO:C":.6,"PRO:O":-.55,"SER:N":-.15,"SER:CA":.1,"SER:CB":.25,"SER:OG":-.25,"SER:C":.6,"SER:O":-.55,"THR:N":-.15,"THR:CA":.1,"THR:CB":.25,"THR:OG1":-.25,"THR:CG2":0,"THR:C":.6,"THR:O":-.55,"TRP:N":-.15,"TRP:CA":.1,"TRP:CB":0,"TRP:CG":-.03,"TRP:CD2":.1,"TRP:CE2":-.04,"TRP:CE3":-.03,"TRP:CD1":.06,"TRP:NE1":-.06,"TRP:CZ2":0,"TRP:CZ3":0,"TRP:CH2":0,"TRP:C":.6,"TRP:O":-.55,"TYR:N":-.15,"TYR:CA":.1,"TYR:CB":0,"TYR:CG":0,"TYR:CD1":0,"TYR:CE1":0,"TYR:CD2":0,"TYR:CE2":0,"TYR:CZ":.25,"TYR:OH":-.25,"TYR:C":.6,"TYR:O":-.55,"VAL:N":-.15,"VAL:CA":.1,"VAL:CB":0,"VAL:CG1":0,"VAL:CG2":0,"VAL:C":.6,"VAL:O":-.55},$3Dmol.applyPartialCharges=function(e,t){t&&void 0!==e.partialCharge||e.resn&&e.atom&&(e.properties.partialCharge=$3Dmol.partialCharges[e.resn+":"+e.atom])},"undefined"==typeof console&&(console={log:function(){}}),$3Dmol.ProteinSurface=function(){var e,t,n=0,r=0,o=0,a=2,s=0,l=0,u=0,c=0,p=null,d=null,f=null,h=0,m=0,y=0,g=0,v=0,b=0,S={H:1.2,Li:1.82,Na:2.27,K:2.75,C:1.7,N:1.55,O:1.52,F:1.47,P:1.8,S:1.8,CL:1.75,BR:1.85,SE:1.9,ZN:1.39,CU:1.4,NI:1.63,X:2},_=function(e){return e.elem&&void 0!==S[e.elem]?e.elem:"X"},w={},E={},O=[new Int32Array([1,0,0]),new Int32Array([-1,0,0]),new Int32Array([0,1,0]),new Int32Array([0,-1,0]),new Int32Array([0,0,1]),new Int32Array([0,0,-1]),new Int32Array([1,1,0]),new Int32Array([1,-1,0]),new Int32Array([-1,1,0]),new Int32Array([-1,-1,0]),new Int32Array([1,0,1]),new Int32Array([1,0,-1]),new Int32Array([-1,0,1]),new Int32Array([-1,0,-1]),new Int32Array([0,1,1]),new Int32Array([0,1,-1]),new Int32Array([0,-1,1]),new Int32Array([0,-1,-1]),new Int32Array([1,1,1]),new Int32Array([1,1,-1]),new Int32Array([1,-1,1]),new Int32Array([-1,1,1]),new Int32Array([1,-1,-1]),new Int32Array([-1,-1,1]),new Int32Array([-1,1,-1]),new Int32Array([-1,-1,-1])];this.getFacesAndVertices=function(i){var s,l={},u=0;for(s=i.length;u<s;u++)l[i[u]]=!0;for(u=0,s=(i=t).length;u<s;u++)i[u].x=i[u].x/a-n,i[u].y=i[u].y/a-r,i[u].z=i[u].z/a-o;var c=[];for(u=0,s=e.length;u<s;u+=3){var h=e[u],m=e[u+1],y=e[u+2],g=i[m].atomid,v=i[y].atomid,b=i[h].atomid;g<b&&(b=g),v<b&&(b=v),l[b]&&h!==m&&m!==y&&h!==y&&(c.push(h),c.push(m),c.push(y))}return f=d=p=null,{vertices:i,faces:c}},this.initparm=function(e,t,i){1e6<i&&(a=1),i=1/a*5.5,h=e[0][0],g=e[1][0],m=e[0][1],v=e[1][1],y=e[0][2],b=e[1][2],t?(h-=1.4+i,m-=1.4+i,y-=1.4+i,g+=1.4+i,v+=1.4+i,b+=1.4+i):(h-=i,m-=i,y-=i,g+=i,v+=i,b+=i),h=Math.floor(h*a)/a,m=Math.floor(m*a)/a,y=Math.floor(y*a)/a,g=Math.ceil(g*a)/a,v=Math.ceil(v*a)/a,b=Math.ceil(b*a)/a,n=-h,r=-m,o=-y,u=Math.ceil(a*(g-h))+1,l=Math.ceil(a*(v-m))+1,s=Math.ceil(a*(b-y))+1,this.boundingatom(t),c=1.4*a,p=new Uint8Array(u*l*s),d=new Float64Array(u*l*s),f=new Int32Array(u*l*s)},this.boundingatom=function(e){var t=[];for(var n in flagradius=e,S)if(S.hasOwnProperty(n)){var r=S[n];for(t[n]=e?(r+1.4)*a+.5:r*a+.5,r=t[n]*t[n],E[n]=Math.floor(t[n])+1,w[n]=new Int32Array(E[n]*E[n]),j=indx=0;j<E[n];j++)for(k=0;k<E[n];k++){var o=j*j+k*k;o>r?w[n][indx]=-1:(o=Math.sqrt(r-o),w[n][indx]=Math.floor(o)),indx++}}},this.fillvoxels=function(e,t){var n,r=0;for(n=p.length;r<n;r++)p[r]=0,d[r]=-1,f[r]=-1;for(r in t)void 0!==(n=e[t[r]])&&this.fillAtom(n,e);for(r=0,n=p.length;r<n;r++)1&p[r]&&(p[r]|=2)},this.fillAtom=function(e,t){var i,c,d,h,m,y,g=Math.floor(.5+a*(e.x+n)),v=Math.floor(.5+a*(e.y+r)),b=Math.floor(.5+a*(e.z+o)),S=_(e),O=0,C=l*s,P=0;for(y=E[S];P<y;P++)for(i=0;i<y;i++){if(-1!=w[S][O])for(d=-1;2>d;d++)for(h=-1;2>h;h++)for(m=-1;2>m;m++)if(0!==d&&0!==h&&0!==m){var x=d*P,T=m*i;for(c=0;c<=w[S][O];c++){var k=c*h,A=g+x,I=v+k,D=b+T;if(!(0>A||0>I||0>D||A>=u||I>=l||D>=s))if(1&p[D=A*C+I*s+D]){var M=t[f[D]];M.serial!=e.serial&&(x*x+k*k+T*T<(A=g+x-Math.floor(.5+a*(M.x+n)))*A+(I=v+k-Math.floor(.5+a*(M.y+r)))*I+(M=b+T-Math.floor(.5+a*(M.z+o)))*M&&(f[D]=e.serial))}else p[D]|=1,f[D]=e.serial}}O++}},this.fillvoxelswaals=function(e,t){var n,r=0;for(n=p.length;r<n;r++)p[r]&=-3;for(r in t)void 0!==(n=e[t[r]])&&this.fillAtomWaals(n,e)},this.fillAtomWaals=function(e,t){var i,c,d,h,m,y,g=0,v=Math.floor(.5+a*(e.x+n)),b=Math.floor(.5+a*(e.y+r)),S=Math.floor(.5+a*(e.z+o)),O=_(e),C=l*s,P=0;for(y=E[O];P<y;P++)for(i=0;i<y;i++){if(-1!=w[O][g])for(d=-1;2>d;d++)for(h=-1;2>h;h++)for(m=-1;2>m;m++)if(0!==d&&0!==h&&0!==m){var x=d*P,T=m*i;for(c=0;c<=w[O][g];c++){var k=c*h,A=v+x,I=b+k,D=S+T;if(!(0>A||0>I||0>D||A>=u||I>=l||D>=s))if(2&p[D=A*C+I*s+D]){var M=t[f[D]];M.serial!=e.serial&&(x*x+k*k+T*T<(A=v+x-Math.floor(.5+a*(M.x+n)))*A+(I=b+k-Math.floor(.5+a*(M.y+r)))*I+(M=S+T-Math.floor(.5+a*(M.z+o)))*M&&(f[D]=e.serial))}else p[D]|=2,f[D]=e.serial}}g++}},this.buildboundary=function(){var e=l*s;for(i=0;i<u;i++)for(j=0;j<s;j++)for(k=0;k<l;k++){var t=i*e+k*s+j;if(1&p[t])for(var n=0;26>n;){var r=i+O[n][0],o=j+O[n][2],a=k+O[n][1];if(-1<r&&r<u&&-1<a&&a<l&&-1<o&&o<s&&!(1&p[r*e+a*s+o])){p[t]|=4;break}n++}}};var C=function(e,t,n){var r=new Int32Array(e*t*n*3);this.set=function(e,o,i,a){r[e=3*((e*t+o)*n+i)]=a.ix,r[e+1]=a.iy,r[e+2]=a.iz},this.get=function(e,o,i){return{ix:r[e=3*((e*t+o)*n+i)],iy:r[e+1],iz:r[e+2]}}};this.fastdistancemap=function(){var e,t,n,r=new C(u,l,s),o=l*s,i=c*c,f=[];for(e=0;e<u;e++)for(t=0;t<l;t++)for(n=0;n<s;n++){var h=e*o+t*s+n;if(p[h]&=-3,1&p[h]&&4&p[h]){var m={ix:e,iy:t,iz:n};r.set(e,t,n,m),f.push(m),d[h]=0,p[h]|=2,p[h]&=-5}}do{for(n=this.fastoneshell(f,r),f=[],e=0,t=n.length;e<t;e++)h=o*n[e].ix+s*n[e].iy+n[e].iz,p[h]&=-5,d[h]<=1.0404*i&&f.push({ix:n[e].ix,iy:n[e].iy,iz:n[e].iz})}while(0!==f.length);for(0>(e=a-.5)&&(e=0),i-=.5/(.1+e),e=0;e<u;e++)for(t=0;t<l;t++)for(n=0;n<s;n++)p[h=e*o+t*s+n]&=-5,1&p[h]&&(!(2&p[h])||2&p[h]&&d[h]>=i)&&(p[h]|=4)},this.fastoneshell=function(e,t){var n,r,o=[];if(0===e.length)return o;tnv={ix:-1,iy:-1,iz:-1};var i=l*s,a=0;for(r=e.length;a<r;a++){var c=e[a].ix,f=e[a].iy,h=e[a].iz,m=t.get(c,f,h);for(n=0;6>n;n++)if(tnv.ix=c+O[n][0],tnv.iy=f+O[n][1],tnv.iz=h+O[n][2],tnv.ix<u&&-1<tnv.ix&&tnv.iy<l&&-1<tnv.iy&&tnv.iz<s&&-1<tnv.iz){var y=tnv.ix*i+s*tnv.iy+tnv.iz;if(1&p[y]&&!(2&p[y])){t.set(tnv.ix,tnv.iy,h+O[n][2],m);var g=tnv.ix-m.ix,v=tnv.iy-m.iy,b=tnv.iz-m.iz;g=g*g+v*v+b*b,d[y]=g,p[y]|=2,p[y]|=4,o.push({ix:tnv.ix,iy:tnv.iy,iz:tnv.iz})}else 1&p[y]&&2&p[y]&&((g=(g=tnv.ix-m.ix)*g+(v=tnv.iy-m.iy)*v+(b=tnv.iz-m.iz)*b)<d[y]&&(t.set(tnv.ix,tnv.iy,tnv.iz,m),d[y]=g,4&p[y]||(p[y]|=4,o.push({ix:tnv.ix,iy:tnv.iy,iz:tnv.iz}))))}}for(a=0,r=e.length;a<r;a++)for(c=e[a].ix,f=e[a].iy,h=e[a].iz,m=t.get(c,f,h),n=6;18>n;n++)tnv.ix=c+O[n][0],tnv.iy=f+O[n][1],tnv.iz=h+O[n][2],tnv.ix<u&&-1<tnv.ix&&tnv.iy<l&&-1<tnv.iy&&tnv.iz<s&&-1<tnv.iz&&(y=tnv.ix*i+s*tnv.iy+tnv.iz,1&p[y]&&!(2&p[y])?(t.set(tnv.ix,tnv.iy,h+O[n][2],m),g=(g=tnv.ix-m.ix)*g+(v=tnv.iy-m.iy)*v+(b=tnv.iz-m.iz)*b,d[y]=g,p[y]|=2,p[y]|=4,o.push({ix:tnv.ix,iy:tnv.iy,iz:tnv.iz})):1&p[y]&&2&p[y]&&((g=(g=tnv.ix-m.ix)*g+(v=tnv.iy-m.iy)*v+(b=tnv.iz-m.iz)*b)<d[y]&&(t.set(tnv.ix,tnv.iy,tnv.iz,m),d[y]=g,4&p[y]||(p[y]|=4,o.push({ix:tnv.ix,iy:tnv.iy,iz:tnv.iz})))));for(a=0,r=e.length;a<r;a++)for(c=e[a].ix,f=e[a].iy,h=e[a].iz,m=t.get(c,f,h),n=18;26>n;n++)tnv.ix=c+O[n][0],tnv.iy=f+O[n][1],tnv.iz=h+O[n][2],tnv.ix<u&&-1<tnv.ix&&tnv.iy<l&&-1<tnv.iy&&tnv.iz<s&&-1<tnv.iz&&(y=tnv.ix*i+s*tnv.iy+tnv.iz,1&p[y]&&!(2&p[y])?(t.set(tnv.ix,tnv.iy,h+O[n][2],m),g=(g=tnv.ix-m.ix)*g+(v=tnv.iy-m.iy)*v+(b=tnv.iz-m.iz)*b,d[y]=g,p[y]|=2,p[y]|=4,o.push({ix:tnv.ix,iy:tnv.iy,iz:tnv.iz})):1&p[y]&&2&p[y]&&((g=(g=tnv.ix-m.ix)*g+(v=tnv.iy-m.iy)*v+(b=tnv.iz-m.iz)*b)<d[y]&&(t.set(tnv.ix,tnv.iy,tnv.iz,m),d[y]=g,4&p[y]||(p[y]|=4,o.push({ix:tnv.ix,iy:tnv.iy,iz:tnv.iz})))));return o},this.marchingcubeinit=function(e){for(var t=0,n=p.length;t<n;t++)1==e?p[t]&=-5:4==e?(p[t]&=-3,4&p[t]&&(p[t]|=2),p[t]&=-5):2==e?4&p[t]&&2&p[t]?p[t]&=-5:4&p[t]&&!(2&p[t])&&(p[t]|=2):3==e&&(p[t]&=-5)},this.marchingcube=function(n){this.marchingcubeinit(n),t=[],e=[],$3Dmol.MarchingCube.march(p,t,e,{smooth:1,nX:u,nY:l,nZ:s}),n=l*s;for(var r=0,o=t.length;r<o;r++)t[r].atomid=f[t[r].x*n+s*t[r].y+t[r].z];$3Dmol.MarchingCube.laplacianSmooth(1,t,e)}},$3Dmol.VolumeData=function(e,t,n){if(this.unit={x:1,y:1,z:1},this.origin={x:0,y:0,z:0},this.size={x:0,y:0,z:0},this.data=new Float32Array([]),this.matrix=null,t=t.toLowerCase(),/\.gz$/.test(t)){t=t.replace(/\.gz$/,"");try{e=this[t]&&this[t].isbinary?pako.inflate(e):new TextDecoder("utf-8").decode(pako.inflate(e))}catch(e){console.log(e)}}if(this[t]&&this[t](e),n){if(n.negate)for(e=0,t=this.data.length;e<t;e++)this.data[e]=-this.data[e];if(n.normalize){var r=0;for(e=0,t=this.data.length;e<t;e++)r+=this.data[e];for(n=r/this.data.length,console.log("computed mean: "+n),e=r=0,t=this.data.length;e<t;e++){var o=this.data[e]-n;r+=o*o}for(r/=this.data.length,e=0,t=this.data.length;e<t;e++)this.data[e]=(this.data[e]-n)/r}}},$3Dmol.VolumeData.prototype.getVal=function(e,t,n){return this.matrix?(this.inversematrix||(this.inversematrix=(new $3Dmol.Matrix4).getInverse(this.matrix)),e=(n=(n=new $3Dmol.Vector3(e,t,n)).applyMatrix4(this.inversematrix)).x,t=n.y,n=n.z):(e-=this.origin.x,t-=this.origin.y,n-=this.origin.z,e/=this.unit.x,t/=this.unit.y,n/=this.unit.z),e=Math.round(e),t=Math.round(t),n=Math.round(n),0>e||e>=this.size.x||0>t||t>=this.size.y||0>n||n>=this.size.z?0:this.data[e*this.size.y*this.size.z+t*this.size.z+n]},$3Dmol.VolumeData.prototype.getCoordinates=function(e){var t=e/(this.size.y*this.size.z),n=e%(this.size.y*this.size.z);return e%=this.size.z,t*=this.unit.x,n*=this.unit.y,e*=this.unit.z,{x:t+=this.origin.x,y:n+=this.origin.y,z:e+=this.origin.z}},$3Dmol.VolumeData.prototype.vasp=function(e){var t=e.replace(/^\s+/,"").split(/[\n\r]/),n=$3Dmol.Parsers.vasp(e)[0].length;if(0==n)console.log("No good formating of CHG or CHGCAR file, not atomic information provided in the file."),this.data=[];else{var r=parseFloat(t[1]),o=t[2].replace(/^\s+/,"").split(/\s+/);e=new $3Dmol.Vector3(parseFloat(o[0]),parseFloat(o[1]),parseFloat(o[2])).multiplyScalar(1.889725992*r),o=t[3].replace(/^\s+/,"").split(/\s+/);var i=new $3Dmol.Vector3(parseFloat(o[0]),parseFloat(o[1]),parseFloat(o[2])).multiplyScalar(1.889725992*r);o=t[4].replace(/^\s+/,"").split(/\s+/),o=new $3Dmol.Vector3(parseFloat(o[0]),parseFloat(o[1]),parseFloat(o[2])).multiplyScalar(1.889725992*r),r=e.x*(i.y*o.z-o.y*i.z)-i.x*(e.y*o.z-o.y*e.z)+o.x*(e.y*i.z-i.y*e.z),r=1/(r=Math.abs(r)/Math.pow(1.889725992,3)),t.splice(0,8+n+1);var a=t[0].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");n=Math.abs(a[0]);var s=Math.abs(a[1]);a=Math.abs(a[2]);var l=this.origin=new $3Dmol.Vector3(0,0,0);for(this.size={x:n,y:s,z:a},this.unit=new $3Dmol.Vector3(e.x,i.y,o.z),e=e.multiplyScalar(1/(1.889725992*n)),i=i.multiplyScalar(1/(1.889725992*s)),o=o.multiplyScalar(1/(1.889725992*a)),0==e.y&&0==e.z&&0==i.x&&0==i.z&&0==o.x&&0==o.y||(this.matrix=new $3Dmol.Matrix4(e.x,i.x,o.x,0,e.y,i.y,o.y,0,e.z,i.z,o.z,0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,(new $3Dmol.Matrix4).makeTranslation(l.x,l.y,l.z)),this.origin=new $3Dmol.Vector3(0,0,0),this.unit=new $3Dmol.Vector3(1,1,1)),t.splice(0,1),(t=(t=(t=t.join(" ")).replace(/^\s+/,"")).split(/[\s\r]+/)).splice(n*s*a+1),t=new Float32Array(t),e=0;e<t.length;e++)t[e]=t[e]*r*.036749309;this.data=t}},$3Dmol.VolumeData.prototype.dx=function(e){e=e.split(/[\n\r]+/);var t,n,r=/gridpositions\s+counts\s+(\d+)\s+(\d+)\s+(\d+)/,o=/^origin\s+(\S+)\s+(\S+)\s+(\S+)/,i=/^delta\s+(\S+)\s+(\S+)\s+(\S+)/,a=/data follows/;for(t=0;t<e.length;t++){var s=e[t];if(n=r.exec(s)){var l=parseInt(n[1]),u=parseInt(n[2]);n=parseInt(n[3]),this.size={x:l,y:u,z:n}}else if(n=i.exec(s)){if(l=parseFloat(n[1]),0==parseFloat(n[2])&&0==parseFloat(n[3])||console.log("Non-orthogonal delta matrix not currently supported in dx format"),s=e[t+=1],null==(n=i.exec(s)))return void console.log("Parse error in dx delta matrix");if(u=parseFloat(n[2]),0==parseFloat(n[1])&&0==parseFloat(n[3])||console.log("Non-orthogonal delta matrix not currently supported in dx format"),s=e[t+=1],null==(n=i.exec(s)))return void console.log("Parse error in dx delta matrix");s=parseFloat(n[3]),0==parseFloat(n[1])&&0==parseFloat(n[2])||console.log("Non-orthogonal delta matrix not currently supported in dx format"),this.unit=new $3Dmol.Vector3(l,u,s)}else if(n=o.exec(s))l=parseFloat(n[1]),u=parseFloat(n[2]),n=parseFloat(n[3]),this.origin=new $3Dmol.Vector3(l,u,n);else if(a.exec(s))break}t+=1,this.size&&this.origin&&this.unit&&this.size?(e=(e=e.splice(t).join(" ")).split(/[\s\r]+/),this.data=new Float32Array(e)):console.log("Error parsing dx format")},$3Dmol.VolumeData.prototype.cube=function(e){if(!(6>(e=e.replace(/^\s+/,"").split(/[\n\r]+/)).length)){var t=e[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),n=parseFloat(t[0]),r=Math.abs(n),o=this.origin=new $3Dmol.Vector3(parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3])),i=0<(t=e[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" "))[0]?.529177:1;o.multiplyScalar(i);var a=Math.abs(t[0]),s=new $3Dmol.Vector3(parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3])).multiplyScalar(i);t=e[4].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var l=Math.abs(t[0]),u=new $3Dmol.Vector3(parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3])).multiplyScalar(i);t=e[5].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var c=Math.abs(t[0]);t=new $3Dmol.Vector3(parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3])).multiplyScalar(i),this.size={x:a,y:l,z:c},this.unit=new $3Dmol.Vector3(s.x,u.y,t.z),0==s.y&&0==s.z&&0==u.x&&0==u.z&&0==t.x&&0==t.y||(this.matrix=new $3Dmol.Matrix4(s.x,u.x,t.x,0,s.y,u.y,t.y,0,s.z,u.z,t.z,0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,(new $3Dmol.Matrix4).makeTranslation(o.x,o.y,o.z)),this.origin=new $3Dmol.Vector3(0,0,0),this.unit=new $3Dmol.Vector3(1,1,1)),o=6,0>n&&o++,e=(e=(e=e.splice(r+o).join(" ")).replace(/^\s+/,"")).split(/[\s\r]+/),this.data=new Float32Array(e)}},$3Dmol.VolumeData.prototype.ccp4=function(e){var t;e=new Int8Array(e);var n=new Int32Array(e.buffer,0,56),r=new Float32Array(e.buffer,0,56),o=new DataView(e.buffer);String.fromCharCode(o.getUint8(208),o.getUint8(209),o.getUint8(210),o.getUint8(211));var i=[o.getUint8(212),o.getUint8(213)];if(17===i[0]&&17===i[1])for(i=e.byteLength,t=0;t<i;t+=4)o.setFloat32(t,o.getFloat32(t),!0);o=n[0],i=n[1];var a=n[2];t=n[4];var s=n[5],l=n[6],u=n[7],c=n[8],p=n[9],d=r[10],f=r[11],h=r[12],m=r[13],y=r[14],g=r[15],v=n[16],b=n[17],S=n[18];n=n[23];var _=r[49],w=r[50];for(r=r[51],d=[d,0,0],f=[f*Math.cos(Math.PI/180*g),f*Math.sin(Math.PI/180*g),0],(m=[h*Math.cos(Math.PI/180*y),h*(Math.cos(Math.PI/180*m)-Math.cos(Math.PI/180*g)*Math.cos(Math.PI/180*y))/Math.sin(Math.PI/180*g),0])[2]=Math.sqrt(h*h*Math.sin(Math.PI/180*y)*Math.sin(Math.PI/180*y)-m[1]*m[1]),h=[0,d,f,m],u=[0,u,c,p],v=[0,v,b,S],this.matrix=new $3Dmol.Matrix4,this.matrix.set(h[v[1]][0]/u[v[1]],h[v[2]][0]/u[v[2]],h[v[3]][0]/u[v[3]],0,h[v[1]][1]/u[v[1]],h[v[2]][1]/u[v[2]],h[v[3]][1]/u[v[3]],0,h[v[1]][2]/u[v[1]],h[v[2]][2]/u[v[2]],h[v[3]][2]/u[v[3]],0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,(new $3Dmol.Matrix4).makeTranslation(t+_,s+w,l+r)),this.origin=new $3Dmol.Vector3(0,0,0),this.unit=new $3Dmol.Vector3(1,1,1),this.size={x:o,y:i,z:a},e=new Float32Array(e.buffer,1024+n),this.data=new Float32Array(o*i*a),t=0;t<o;t++)for(s=0;s<i;s++)for(l=0;l<a;l++)this.data[(t*i+s)*a+l]=e[(l*i+s)*o+t]},$3Dmol.VolumeData.prototype.ccp4.isbinary=!0,$3Dmol.workerString=function(){self.onmessage=function(e){var t=(e=e.data).type;if(0>t)self.atomData=e.atoms,self.volume=e.volume,self.ps=new ProteinSurface;else{var n=self.ps;n.initparm(e.expandedExtent,1!=t,self.volume),n.fillvoxels(self.atomData,e.extendedAtoms),n.buildboundary(),4!==t&&2!==t||(n.fastdistancemap(),n.boundingatom(!1),n.fillvoxelswaals(self.atomData,e.extendedAtoms)),n.marchingcube(t),e=n.getFacesAndVertices(e.atomsToShow),self.postMessage(e)}}}.toString().replace(/(^.*?\{|\}$)/g,""),$3Dmol.workerString+="; var ProteinSurface="+$3Dmol.ProteinSurface.toString().replace(/[a-zA-Z_$]{1}[0-9a-zA-Z_$]*.MarchingCube./g,"MarchingCube."),$3Dmol.workerString+=",MarchingCube=("+$3Dmol.MarchingCubeInitializer.toString()+")();",$3Dmol.SurfaceWorker=window.URL?window.URL.createObjectURL(new Blob([$3Dmol.workerString],{type:"text/javascript"})):{postMessage:function(){}},$3Dmol.workerString=$3Dmol.workerString,$3Dmol.SurfaceWorker=$3Dmol.SurfaceWorker}).call(window)}).call(this,__webpack_require__(81),__webpack_require__(11))},function(e,t,n){var r,o,i;o=[e,t,n(0),n(1)],void 0===(i="function"==typeof(r=function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(n),i=a(r);function a(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n=r,r.onResize=function(){r.rafId&&window.cancelAnimationFrame(r.rafId),r.rafId=window.requestAnimationFrame(r.update.bind(r))},r.update=function(){r.forceUpdate()},l(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"componentDidMount",value:function(){var e=document.createElement("canvas"),t=document.createDocumentFragment(),n=window.getComputedStyle(this.scope),r=[n["font-weight"],n["font-style"],n["font-size"],n["font-family"]].join(" ");t.appendChild(e),this.canvas=e.getContext("2d"),this.canvas.font=r,this.forceUpdate(),window.addEventListener("resize",this.onResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize),this.rafId&&window.cancelAnimationFrame(this.rafId)}},{key:"measureWidth",value:function(e){return this.canvas.measureText(e).width}},{key:"getRenderText",value:function(){var e=this.props,t=(e.containerClassName,e.line),n=e.text,r=e.textTruncateChild,i=e.truncateText,a=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["containerClassName","line","text","textTruncateChild","truncateText"]),s=this.scope.getBoundingClientRect().width;if(0===s)return null;if(s>=this.measureWidth(n))return o.default.createElement("div",a,n);var l="";if(r&&"string"==typeof r.type){var u=r.type;(u.indexOf("span")>=0||u.indexOf("a")>=0)&&(l=r.props.children)}for(var c=1,p=n.length,d="",f=0,h=0,m=t,y=0,g=!1,v=-1;m--;){for(var b=m?"":i+" "+l;c<=p;){if(d=n.substr(h,c),!((y=this.measureWidth(d+b))<s)){do{c--," "===(d=n.substr(h,c))[d.length-1]&&(d=n.substr(h,c-1)),g&&(v=d.lastIndexOf(" "))>-1&&(c=v,d=n.substr(h,c)),y=this.measureWidth(d+b)}while(y>=s&&d.length>0);h+=c;break}-1===(f=n.indexOf(" ",c+1))?(c+=1,g=!1):(g=!0,c=f)}if(c>=p){h=p;break}}return h===p?o.default.createElement("div",a,n):o.default.createElement("div",a,n.substr(0,h)+i+" ",r)}},{key:"render",value:function(){var e=this,t=this.props,n=t.text,r=t.containerClassName,i=n;return this.scope&&(i=this.getRenderText()),o.default.createElement("div",{ref:function(t){e.scope=t},className:r,style:{overflow:"hidden"}},i)}}]),t}(n.Component);u.propTypes={containerClassName:i.default.string,line:i.default.number,text:i.default.string,textTruncateChild:i.default.node,truncateText:i.default.string},u.defaultProps={line:1,text:"",truncateText:""},t.default=u,e.exports=t.default})?r.apply(t,o):r)||(e.exports=i)},function(e,t,n){e.exports={portalWidth:"structureViewer-module__portalWidth__250aJ",framedImage:"structureViewer-module__framedImage__3OjST","main-3d-panel":"structureViewer-module__main-3d-panel__2asbr",header:"structureViewer-module__header__243uA",body:"structureViewer-module__body__3BGGR","collapsed-panel":"structureViewer-module__collapsed-panel__3T7vs","increased-size-panel":"structureViewer-module__increased-size-panel__1nCD-","default-option-select":"structureViewer-module__default-option-select__3EsrF","alpha-helix":"structureViewer-module__alpha-helix__3U1NC","beta-sheet":"structureViewer-module__beta-sheet__2rza2",loop:"structureViewer-module__loop__25tQU",highlighted:"structureViewer-module__highlighted__9IwJz","uniform-mutation":"structureViewer-module__uniform-mutation__2nUW-","missense-mutation":"structureViewer-module__missense-mutation__3m1Or","trunc-mutation":"structureViewer-module__trunc-mutation__1VdGC","inframe-mutation":"structureViewer-module__inframe-mutation__bSE4n"}},function(e,t,n){e.exports={portalWidth:"mutationMapper-module__portalWidth__t9qnu",framedImage:"mutationMapper-module__framedImage__2WV_N",filterResetPanel:"mutationMapper-module__filterResetPanel__2aFDu"}},function(e,t,n){"use strict";function r(e){return{genomeNexusUrl:e.genomenexus_url||void 0,isoformOverrideSource:e.isoformOverrideSource,myGeneInfoUrlTemplate:e.mygene_info_url||void 0,uniprotIdUrlTemplate:e.uniprot_id_url||void 0,transcriptSummaryUrlTemplate:e.ensembl_transcript_url||void 0,enableOncoKb:e.show_oncokb,enableGenomeNexus:e.show_genomenexus,enableHotspot:e.show_hotspot,enableMyCancerGenome:e.mycancergenome_show,enableCivic:e.show_civic}}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(2),o=n(102);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.trackVisibility=Object(o.X)()};(function(e,t,n,r){var o,a=arguments.length,s=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(a<3?o(s):a>3?o(t,n,s):o(t,n))||s);a>3&&s&&Object.defineProperty(t,n,s)})([r.observable],a.prototype,"trackVisibility",void 0)},function(e,t,n){"use strict";n.d(t,"a",function(){return v});var r=n(4),o=n(0),i=n(11),a=n.n(i),s=n(892),l=n.n(s),u=n(8),c=n(770),p=n(759);function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var g=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":y(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},v=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,h(t).call(this,e))}var n,i,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,o["Component"]),n=t,(i=[{key:"render",value:function(){return o.createElement("div",null,o.createElement("div",{ref:this.igvDivRefHandler,className:"igvContainer"}))}},{key:"componentDidMount",value:function(){var e=this;this.props.onRenderingStart&&this.props.onRenderingStart();var t={genome:this.props.genome,locus:this.props.locus};l.a.createBrowser(this.igvDiv,t).then(function(t){e.igvBrowser=t,e.igvDiv&&e.updateSearch(e.igvDiv,e.props.disableSearch),e.loadTrackList(t,r.cloneDeep(e.props.tracks)),e.lastRenderedTracks=e.props.tracks,e.props.onRenderingComplete&&e.props.onRenderingComplete()})}},{key:"shouldComponentUpdate",value:function(e){var t=!1;if(!1!==e.isVisible){var n=Object(p.f)(this.lastRenderedTracks||[],e.tracks||[]),r=this.props.genome!==e.genome,o=this.props.locus!==e.locus,i=this.props.disableSearch!==e.disableSearch;(t=r||n.length>0||o||i)&&(this.modifiedTrackNames=n)}return t}},{key:"componentDidUpdate",value:function(){this.igvBrowser&&this.props.locus&&this.igvBrowser.search(this.props.locus),this.igvBrowser&&this.modifiedTrackNames&&this.modifiedTrackNames.length>0&&(this.updateTracks(this.igvBrowser,this.modifiedTrackNames,this.tracksByName),this.modifiedTrackNames=void 0,this.lastRenderedTracks=this.props.tracks),this.igvDiv&&this.updateSearch(this.igvDiv,this.props.disableSearch)}},{key:"loadTrackList",value:function(e,t){var n=this;e.loadTrackList(t).then(function(){n.props.onRenderingComplete&&n.props.onRenderingComplete()}).catch(function(){n.props.onRenderingComplete&&n.props.onRenderingComplete()})}},{key:"updateTracks",value:function(e,t,n){var o=this;t.forEach(function(t){return e.removeTrackByName(t)});var i=t.map(function(e){return r.cloneDeep(n[e])}).filter(function(e){return void 0!==e});i.length>0&&(this.props.onRenderingStart&&this.props.onRenderingStart(),Object(c.a)(function(){o.loadTrackList(e,i)}))}},{key:"updateSearch",value:function(e,t){var n=a()(e).find(".igv-chromosome-select-widget-container select"),r=a()(e).find(".igv-search-container input");t?(r.attr("disabled","true"),n.attr("disabled","true")):(r.attr("disabled",null),n.attr("disabled",null))}},{key:"igvDivRefHandler",value:function(e){this.igvDiv=e}},{key:"tracksByName",get:function(){return Object(p.g)(this.props.tracks)}}])&&d(n.prototype,i),s&&d(n,s),t}();v.defaultProps={genome:"hg19",locus:"all",disableSearch:!1},g([u.default],v.prototype,"igvDivRefHandler",null)},function(e,t,n){e.exports=n(16)(1038)},function(e,t,n){"use strict";var r=n(0),o=n(2),i=n(7),a=n(56),s=n(9),l=n.n(s),u=n(3),c=n(759),p=n(615),d=n(126),f=n.n(d),h=n(8);function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var S=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},_=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=y(this,g(t).apply(this,arguments))).downloading=!1,e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement(u.c,{overlay:r.createElement("span",null,"Download a copy number segment file for the selected samples"),placement:this.props.tooltipPlacement},r.createElement(a.Button,{className:this.props.buttonClassName,onClick:this.handleDownload,disabled:this.downloading},r.createElement("i",{className:l()({fa:!0,"fa-cloud-download":!this.downloading,"fa-spinner fa-pulse":this.downloading})})))}},{key:"handleDownload",value:function(){var e=this;this.downloading=!0,Object(p.a)(this.props.promise,function(t){f()(Object(c.e)(t),e.props.filename),e.downloading=!1})}}])&&m(n.prototype,o),i&&m(n,i),t}();_.defaultProps={filename:"segments.seg",buttonClassName:"btn btn-sm pull-right",tooltipPlacement:"left"},S([o.observable],_.prototype,"downloading",void 0),S([h.default],_.prototype,"handleDownload",null),_=S([i.observer],_),t.a=_},function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__voGSg",framedImage:"styles-module__framedImage__1XH6x",container:"styles-module__container__16NQq","items-container":"styles-module__items-container__2byHQ","fa-check":"styles-module__fa-check__l2mEf","fa-exclamation-triangle":"styles-module__fa-exclamation-triangle__1RHoj","not-invoked-item":"styles-module__not-invoked-item__2JY4J","item-row":"styles-module__item-row__2FhJM","pulse-spinner":"styles-module__pulse-spinner__16rgL"}},function(e,t,n){"use strict";t.__esModule=!0,t.RootCloseWrapper=t.Transition=t.Position=t.Portal=t.Overlay=t.Modal=t.AutoAffix=t.Affix=void 0;var r=p(n(810)),o=p(n(903)),i=p(n(906)),a=p(n(907)),s=p(n(674)),l=p(n(908)),u=p(n(909)),c=p(n(910));function p(e){return e&&e.__esModule?e:{default:e}}t.Affix=r.default,t.AutoAffix=o.default,t.Modal=i.default,t.Overlay=a.default,t.Portal=s.default,t.Position=l.default,t.Transition=u.default,t.RootCloseWrapper=c.default},function(e,t,n){"use strict";var r=n(760);t.__esModule=!0,t.default=function(e,t){var n=(0,i.default)(e);return n?n.innerHeight:t?e.clientHeight:(0,o.default)(e).height};var o=r(n(761)),i=r(n(897));e.exports=t.default},function(e,t,n){e.exports=n(16)(248)},function(e,t,n){e.exports=n(16)(896)},function(e,t,n){e.exports=n(16)(487)},function(e,t,n){e.exports=n(16)(116)},function(e,t,n){"use strict";var r=n(760);t.__esModule=!0,t.default=function(e){var t=(0,o.default)(e);return t&&t.defaultView||t.parentWindow};var o=r(n(902));e.exports=t.default},function(e,t,n){e.exports=n(16)(154)},function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=m(n(761)),i=m(n(811)),a=m(n(1)),s=m(n(904)),l=m(n(0)),u=m(n(810)),c=m(n(812)),p=m(n(905)),d=m(n(813)),f=m(n(814)),h=m(n(815));function m(e){return e&&e.__esModule?e:{default:e}}var y=r({},u.default.propTypes,{container:a.default.oneOfType([s.default,a.default.func]),autoWidth:a.default.bool}),g=function(e){function t(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));return a.onWindowScroll=function(){a.onUpdate()},a.onWindowResize=function(){a.props.autoWidth&&(0,i.default)(function(){return a.onUpdate()})},a.onDocumentClick=function(){(0,i.default)(function(){return a.onUpdate()})},a.onUpdate=function(){if(a._isMounted){var e=(0,o.default)(a.positioner),t=e.top,n=e.width,r=(0,p.default)(a.props.container),i=void 0;if(r){var s=(0,d.default)((0,f.default)(a)),l=(0,o.default)(r);i=s-l.top-l.height}else i=null;a.updateState(t,i,n)}},a.updateState=function(e,t,n){e===a.state.offsetTop&&t===a.state.offsetBottom&&n===a.state.width||a.setState({offsetTop:e,offsetBottom:t,width:n})},a.state={offsetTop:null,offsetBottom:null,width:null},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){var e=this;this._isMounted=!0,this._windowScrollListener=(0,c.default)((0,h.default)(this),"scroll",function(){return e.onWindowScroll()}),this._windowResizeListener=(0,c.default)((0,h.default)(this),"resize",function(){return e.onWindowResize()}),this._documentClickListener=(0,c.default)((0,f.default)(this),"click",function(){return e.onDocumentClick()}),this.onUpdate()},t.prototype.componentWillReceiveProps=function(){this._needPositionUpdate=!0},t.prototype.componentDidUpdate=function(){this._needPositionUpdate&&(this._needPositionUpdate=!1,this.onUpdate())},t.prototype.componentWillUnmount=function(){this._isMounted=!1,this._windowScrollListener&&this._windowScrollListener.remove(),this._documentClickListener&&this._documentClickListener.remove(),this._windowResizeListener&&this._windowResizeListener.remove()},t.prototype.render=function(){var e=this,t=this.props,n=t.autoWidth,o=t.viewportOffsetTop,i=t.children,a=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["autoWidth","viewportOffsetTop","children"]),s=this.state,c=s.offsetTop,p=s.offsetBottom,d=s.width;delete a.container;var f=Math.max(c,o||0),h=this.props,m=h.affixStyle,y=h.bottomStyle;return n&&(m=r({width:d},m),y=r({width:d},y)),l.default.createElement("div",null,l.default.createElement("div",{ref:function(t){e.positioner=t}}),l.default.createElement(u.default,r({},a,{offsetTop:f,viewportOffsetTop:o,offsetBottom:p,affixStyle:m,bottomStyle:y}),i))},t}(l.default.Component);g.displayName="AutoAffix",g.propTypes=y,g.defaultProps={viewportOffsetTop:0,autoWidth:!0},t.default=g,e.exports=t.default},function(e,t,n){e.exports=n(16)(247)},function(e,t,n){e.exports=n(16)(249)},function(e,t,n){e.exports=n(16)(197)},function(e,t,n){e.exports=n(16)(431)},function(e,t,n){e.exports=n(16)(892)},function(e,t,n){e.exports=n(16)(328)},function(e,t,n){e.exports=n(16)(422)},function(e,t,n){},function(e,t,n){e.exports=n(16)(834)},,function(e,t,n){e.exports=n(16)(200)},function(e,t,n){e.exports=n(16)(420)},,function(e,t,n){e.exports=n(16)(202)},function(e,t,n){e.exports=n(16)(846)},function(e,t,n){e.exports=n(16)(244)},function(e,t,n){e.exports=n(16)(874)},function(e,t,n){e.exports=n(16)(875)},function(e,t,n){e.exports=n(16)(451)},function(e,t,n){e.exports=n(16)(833)},function(e,t,n){e.exports=n(16)(448)},,function(e,t,n){e.exports=n(16)(165)},function(e,t,n){e.exports=n(16)(369)},function(e,t,n){e.exports=n(16)(879)},function(e,t,n){e.exports=n(16)(151)},function(e,t,n){e.exports=n(16)(456)},function(e,t,n){e.exports=n(16)(204)},,function(e,t,n){e.exports=n.p+"reactapp/images/ac30afc0653ff15c1ea9fd9cbae0414a.png"},,function(e,t,n){e.exports=n(16)(433)},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjQsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDIwIDIwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxsaW5lIGZpbGw9Im5vbmUiIHgxPSI2Ljc5MiIgeTE9IjUuNjY3IiB4Mj0iNi43OTIiIHkyPSIxMi4xMjUiLz4NCjxwb2x5Z29uIGZpbGw9IiMzMzMzMzMiIHBvaW50cz0iMCw1IDAsMCA1LDAgIi8+DQo8cG9seWdvbiBmaWxsPSIjMzMzMzMzIiBwb2ludHM9IjE0Ljk5OSwwIDIwLDAgMjAsNSAiLz4NCjxwb2x5Z29uIGZpbGw9IiMzMzMzMzMiIHBvaW50cz0iMjAsMTUgMjAsMjAgMTUsMjAgIi8+DQo8cG9seWdvbiBmaWxsPSIjMzMzMzMzIiBwb2ludHM9IjUsMjAgMCwyMCAwLDE1ICIvPg0KPHJlY3QgeD0iMy43NSIgeT0iNC43MDgiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzMzMzMyIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHdpZHRoPSIxMi41IiBoZWlnaHQ9IjEwLjU4MyIvPg0KPC9zdmc+DQo="},function(e,t,n){"use strict";(function(e){var r=n(4),o=n(0),i=n(21),a=n.n(i),s=n(648),l=n(591),u=n.n(l),c=n(9),p=n.n(c),d=n(1016),f=n(7),h=n(2),m=n(104),y=n.n(m),g=n(17),v=n(650),b=n(56),S=n(948),_=n.n(S),w=n(6),E=n(8),O=n(701),C=n(955),P=n(830),x=n(584);function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t){return!t||"object"!==M(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var j=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":M(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},N=function(t){function n(e){var t,i=this;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=A(this,I(n).call(this,e))).handlers={onSummaryClick:function(){t.store.openSummary()},onCheckAllFiltered:function(){t.logic.mainView.toggleAllFiltered()},onClearFilter:function(){t.store.setSearchText("")}},t.CancerTypeList=Object(f.observer)(function(){var e=t.logic.cancerTypeListView.getChildCancerTypes(t.store.treeData.rootCancerType);return o.createElement("ul",{className:u.a.cancerTypeList},e.map(function(e,t){return o.createElement(i.CancerTypeListItem,{key:t,cancerType:e})}))}),t.CancerTypeListItem=Object(f.observer)(function(e){var n,i=e.cancerType,a=Object(h.expr)(function(){return t.logic.cancerTypeListView.getDescendantCancerStudies(i).length}),s=r.includes(t.store.selectedCancerTypeIds,i.cancerTypeId),l=t.logic.isHighlighted(i),c=p()((T(n={},u.a.selectable,!0),T(n,u.a.selected,s),T(n,u.a.matchingNodeText,!!t.store.searchText&&l),T(n,u.a.nonMatchingNodeText,!!t.store.searchText&&!l),T(n,u.a.containsSelectedStudies,Object(h.expr)(function(){return t.logic.cancerTypeContainsSelectedStudies(i)})),n));return o.createElement("li",{className:c,onMouseDown:t.getCancerTypeListClickHandler(i)},o.createElement("span",{className:u.a.cancerTypeListItemLabel},i.name),o.createElement("span",{className:u.a.cancerTypeListItemCount},a))}),t.store=t.props.queryStore,t}var i,l,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(n,o["Component"]),i=n,(l=[{key:"getCancerTypeListClickHandler",value:function(e){var t=this;return function(n){return t.store.selectCancerType(e,n.ctrlKey)}}},{key:"selectTCGAPanAtlas",value:function(){this.logic.mainView.selectAllMatchingStudies(O.a)}},{key:"selectMatchingStudies",value:function(e){e&&(1===e.length&&/^\*.*\*$/.test(e[0])?this.logic.mainView.selectAllMatchingStudies(e[0].replace(/\*/g,"")):this.logic.mainView.selectAllMatchingStudies(e))}},{key:"componentDidMount",value:function(){var e,t=this;this.windowSizeDisposer=Object(h.reaction)(function(){return x.a.size},function(){t.props.forkedMode&&(clearTimeout(e),e=setTimeout(function(){return t.setListHeight()},200))},{fireImmediately:!0})}},{key:"componentWillUnmount",value:function(){this.windowSizeDisposer()}},{key:"setListHeight",value:function(){var t=e(a.a.findDOMNode(this)),n=x.a.size.height-t.offset().top;n=n<200?200:n,t.css("height",n-75)}},{key:"render",value:function(){var e=this,t=this.logic.mainView.getSelectionReport(),n=t.shownStudies,i=t.shownAndSelectedStudies,a=this.logic.mainView.quickSelectButtons(w.b.serverConfig.skin_quick_select_buttons);return o.createElement(s.a,{overflow:!0,"data-test":"studyList",className:u.a.CancerStudySelector},o.createElement(s.b,{overflow:!0,className:u.a.CancerStudySelectorHeader},o.createElement(v.a,{promises:[this.store.cancerTypes,this.store.cancerStudies]},"Select Studies for Visualization & Analysis:"),this.store.selectableStudiesSet.isComplete&&o.createElement("div",null,o.createElement(P.a,{store:this.store})),o.createElement(f.Observer,null,function(){var t=w.a.skin_example_study_queries(w.b.serverConfig.skin_example_study_queries||"");e.store.searchText&&t.indexOf(e.store.searchText)<0&&(t=[e.store.searchText].concat(t));var n=null,r=t.map(function(e,t){return{value:e,sortKey:t}});return o.createElement("div",{style:{display:"flex",alignItems:"center"}},e.store.searchText&&o.createElement("span",{"data-test":"clearStudyFilter",onClick:function(t){e.autosuggest.setState({inputValue:""}),e.handlers.onClearFilter()},style:{fontSize:18,cursor:"pointer",color:"#999999",position:"relative",left:164,zIndex:10}},"x"),o.createElement(_.a,{datalist:r,ref:function(t){return e.autosuggest=t},placeholder:"Search...",bsSize:"small",onChange:function(t){null!==n&&(window.clearTimeout(n),n=null),n=window.setTimeout(function(){e.store.setSearchText(t)},400)},onFocus:function(t){0===t.length&&setTimeout(function(){e.autosuggest.setState({open:!0})},400)}}))})),o.createElement(g.If,{condition:this.studiesDataComplete},o.createElement(s.b,{className:u.a.cancerStudySelectorBody},o.createElement(g.If,{condition:this.store.maxTreeDepth>0},o.createElement(g.Then,null,o.createElement("div",{className:u.a.cancerTypeListContainer},o.createElement(this.CancerTypeList,null)))),o.createElement("div",{className:u.a.cancerStudyListContainer,"data-test":"cancerTypeListContainer"},o.createElement("div",{className:"checkbox",style:{marginLeft:19}},o.createElement(g.If,{condition:n.length>0},o.createElement(g.If,{condition:!this.logic.mainView.isFiltered&&!r.isEmpty(a)},o.createElement(g.Then,null,o.createElement("div",{className:u.a.quickSelect},o.createElement(C.a,{onSelect:this.selectMatchingStudies,buttonsConfig:a}))),o.createElement(g.Else,null,o.createElement("label",null,o.createElement("input",{type:"checkbox","data-test":"selectAllStudies",style:{top:-2},onClick:this.handlers.onCheckAllFiltered,checked:i.length===n.length}),o.createElement("strong",null,i.length===n.length?"Deselect all listed studies ".concat(n.length<this.store.cancerStudies.result.length?"matching filter":""," (").concat(n.length,")"):"Select all listed studies ".concat(n.length<this.store.cancerStudies.result.length?"matching filter":"","  (").concat(n.length,")")))))),o.createElement(g.If,{condition:this.store.cancerStudies.isComplete&&this.store.cancerTypes.isComplete&&0===n.length},o.createElement("p",null,"There are no studies matching your filter."))),o.createElement(d.a,null)))),o.createElement(b.Modal,{className:p()(u.a.SelectedStudiesWindow,"cbioportal-frontend"),show:this.store.showSelectedStudiesOnly,onHide:function(){return e.store.showSelectedStudiesOnly=!1}},o.createElement(b.Modal.Header,{closeButton:!0},o.createElement(b.Modal.Title,null,"Selected Studies")),o.createElement(b.Modal.Body,null,o.createElement(d.a,{showSelectedStudiesOnly:!0}))))}},{key:"studiesDataComplete",get:function(){return this.store.cancerTypes.isComplete&&this.store.cancerStudies.isComplete&&this.store.userVirtualStudies.isComplete}},{key:"logic",get:function(){return this.store.studyListLogic}}])&&k(i.prototype,l),c&&k(i,c),n}();j([h.computed],N.prototype,"studiesDataComplete",null),j([y.a],N.prototype,"getCancerTypeListClickHandler",null),j([E.default,h.action],N.prototype,"selectTCGAPanAtlas",null),j([E.default,h.action],N.prototype,"selectMatchingStudies",null),N=j([f.observer],N),t.a=N}).call(this,n(11))},function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__3uFIJ",framedImage:"styles-module__framedImage__3chnD",padded:"styles-module__padded__3vpqj",column:"styles-module__column__2pa-R",row:"styles-module__row__3l99O"}},function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__agNQJ",framedImage:"styles-module__framedImage__JjRC-",selectAllStudies:"styles-module__selectAllStudies__2gWhF",SelectedStudyList:"styles-module__SelectedStudyList__27Hpt",StudyList:"styles-module__StudyList__2mxsz",deselectAll:"styles-module__deselectAll__26p-l",Level0:"styles-module__Level0__1RUPZ",Level1:"styles-module__Level1__2R0IW",Level3:"styles-module__Level3__1vXaT",Level4:"styles-module__Level4__3ZJ1g",Level2:"styles-module__Level2__3AEJ-",CancerType:"styles-module__CancerType__Zm_qX",Study:"styles-module__Study__398QL",indentArrow:"styles-module__indentArrow__32udx",SelectAll:"styles-module__SelectAll__3SSsJ",StudyName:"styles-module__StudyName__3IA_4",DeletedStudy:"styles-module__DeletedStudy__2axOg",StudySamples:"styles-module__StudySamples__3_cjf",StudyMeta:"styles-module__StudyMeta__3UFnp",StudyLinks:"styles-module__StudyLinks__cMCHs",summaryIcon:"styles-module__summaryIcon__WR75I",iconWithTooltip:"styles-module__iconWithTooltip__2yBW3",icon:"styles-module__icon__1ZBlQ",trashIcon:"styles-module__trashIcon__1z-wJ",infoCircleIcon:"styles-module__infoCircleIcon__27xSR",tooltip:"styles-module__tooltip__b54B6",fadein:"styles-module__fadein__2G2-B"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(941);var r=n(942);t.JsonToTable=r.default},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(943);t.default=r.default},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);n(944);var a=n(826),s=n(826),l=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.renderObject=function(e,t,n){var o,l=[];switch(t&&l.push(r.renderRowHeader(t)),s.default.getObjectType(e)){case a.JSONObjectType.ObjectWithNonNumericKeys:o=t?i.createElement("table",{key:"__j2t_tableObj"+n},i.createElement("tbody",{key:"__j2t_bObj"+n},r.renderRows(e))):r.renderRows(e);break;case a.JSONObjectType.Array:o=t?i.createElement("table",{key:"__j2t_tableArr"+n},i.createElement("tbody",{key:"__j2t_bArr"+n},r.parseArray(e))):r.parseArray(e)}l.push(o);var u=l.map(function(e){return e});return t?i.createElement("tr",{key:"__j2t_trObj"+n},r.renderCell({content:u,colspan:2})):u},r.renderCell=function(e){var t=e.content,n=e.colspan,r=e.isHeader?i.createElement("strong",null,t):t;return i.createElement("td",{colSpan:n||0,key:"__j2t_trObj"+r},r)},r.renderHeader=function(e){return i.createElement("tr",{key:"__j2t_trHeader"},e.map(function(e){return r.renderCell({content:e})}))},r.renderValues=function(e){return i.createElement("tr",{key:"__j2t_trArrString"},e.map(function(e){return r.renderCell({content:e})}))},r.renderRowValues=function(e,t){return e.map(function(e,n){return i.createElement("tr",{key:"__j2t_Arr"+n.toString()},t.map(function(t){return s.default.getObjectType(t)===a.JSONObjectType.Primitive?r.renderCell({content:e[t]}):r.renderObject(e[t],t,n)}))})},r.parseArray=function(e){var t=[],n=s.default.getUniqueObjectKeys(e);return"number"!==s.default.checkLabelTypes(n.labels)?(t.push(r.renderHeader(n.labels)),t.push(r.renderRowValues(e,n.labels))):t.push(r.renderValues(e)),t},r.renderRow=function(e,t,n){return i.createElement("tr",{key:"__j2t_tr"+n},i.createElement("td",{key:"__j2t_tdk"+n},i.createElement("strong",null,e)),i.createElement("td",{key:"__j2t_tdv"+n},t))},r.renderRowHeader=function(e){return i.createElement("div",{key:"__j2t_rw"+e},i.createElement("strong",null,e))},r.renderRows=function(e,t){return Object.keys(e).map(function(t,n){var o=e[t];return s.default.getObjectType(o)===a.JSONObjectType.Primitive?r.renderRow(t,o,n):r.renderObject(o,t,n)})},r}return o(t,e),t.prototype.render=function(){return i.createElement("div",{className:"json-to-table"},i.createElement("table",{key:"__j2t_root_table"},i.createElement("tbody",{key:"__j2t_root_tbody"},this.renderObject(this.props.json,void 0,0))))},t}(i.Component);t.default=l},function(e,t,n){},function(e,t,n){},function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__1fCuf",framedImage:"styles-module__framedImage__1w-Q4",SectionHeader:"styles-module__SectionHeader__3RwOA",error:"styles-module__error__1QyPg"}},function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__3FkcF",framedImage:"styles-module__framedImage__Jd87U",error:"styles-module__error__19z3B",icon:"styles-module__icon__1tBLC"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectListAdapter=t.MapListAdapter=t.ArrayListAdapter=t.EmptyListAdapter=t.ListAdapter=t.ItemAdapter=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=_(n(9)),a=_(n(765)),s=_(n(827)),l=_(n(1)),u=_(n(0)),c=n(56),p=_(n(21)),d=_(n(57)),f=_(n(949)),h=_(n(950)),m=_(n(828)),y=_(n(729)),g=_(n(951)),v=_(n(952)),b=_(n(953)),S=_(n(954));function _(e){return e&&e.__esModule?e:{default:e}}function w(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}t.ItemAdapter=m.default,t.ListAdapter=y.default,t.EmptyListAdapter=g.default,t.ArrayListAdapter=v.default,t.MapListAdapter=b.default,t.ObjectListAdapter=S.default;var E=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n=t.__proto__||Object.getPrototypeOf(t)).call.apply(n,[this,e].concat(w(o))));a._itemAdapter=e.itemAdapter||new m.default,a._itemAdapter.receiveProps(e),a._listAdapter=e.datalistAdapter||a._getListAdapter(e.datalist),a._listAdapter.receiveProps(e,a._itemAdapter);var s=a._getValueFromProps(e),l=s.inputValue,u=s.inputItem,c=s.inputItemEphemeral,p=s.selectedItems;a._setValueMeta(u,c,!0,!0),a._lastValidItem=u,a._lastValidValue=l,a._keyPressCount=0,a.state={open:!1,disableFilter:!1,inputValue:l,inputValueKeyPress:0,inputFocused:!1,selectedItems:p,searchValue:null},a._lastOnChangeValue=a._getCurrentValue(),a._lastOnSelectValue=u;var d=a;return d._renderSelected=a._renderSelected.bind(a),d._getItemKey=a._getItemKey.bind(a),d._isSelectedItem=a._isSelectedItem.bind(a),d._renderSuggested=a._renderSuggested.bind(a),d._handleToggleClick=a._handleToggleClick.bind(a),d._handleInputChange=a._handleInputChange.bind(a),d._handleItemSelect=a._handleItemSelect.bind(a),d._removeItem=a._removeItem.bind(a),d._handleShowAll=a._handleShowAll.bind(a),d._handleKeyDown=a._handleKeyDown.bind(a),d._handleKeyPress=a._handleKeyPress.bind(a),d._handleMenuClose=a._handleMenuClose.bind(a),d._handleInputFocus=a._handleInputFocus.bind(a),d._handleInputBlur=a._handleInputBlur.bind(a),d._handleFocus=a._handleFocus.bind(a),d._handleBlur=a._handleBlur.bind(a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u["default"].Component),o(t,null,[{key:"defaultInputSelect",value:function(e,t,n){switch(e.type){case"text":case"search":case"url":case"tel":case"password":if(e.setSelectionRange)e.setSelectionRange(t.length,n.length);else if(e.createTextRange){var r=e.createTextRange();r.moveEnd("character",n.length),r.moveStart("character",t.length),r.select()}}}}]),o(t,[{key:"_getListAdapter",value:function(e){if(null==e)return new g.default;if(Array.isArray(e))return new v.default;if(e instanceof Map)return new b.default;if("object"==typeof e)return new S.default;throw Error("Unexpected datalist type: datalistAdapter required")}},{key:"_getValueFromProps",value:function(e){var t="",n=null,r=!1,o=[],i=e.value||e.defaultValue;if(null!=i)if(e.multiple)Array.isArray(i)?o=this._filterItems(i,e):(0,d.default)(!i,"Array expected for value property");else if(e.valueIsItem){var a=this._itemAdapter.getInputValue(i);null!=e.datalist?null!=(n=this._listAdapter.findMatching(e.datalist,a))?t=n===i?a:this._itemAdapter.getInputValue(n):e.datalistOnly&&!e.datalistPartial?this._warnInvalidValue(i):(t=a,n=i):(t=a,n=i)}else i&&(null!=e.datalist?null!=(n=this._listAdapter.findMatching(e.datalist,i))?t=this._itemAdapter.getInputValue(n):e.datalistOnly&&!e.datalistPartial?this._warnInvalidValue(i):(t=i.toString(),n=this._itemAdapter.newFromValue(i),r=!0):(t=i.toString(),n=this._itemAdapter.newFromValue(i),r=!0));return{inputValue:t,inputItem:n,inputItemEphemeral:r,selectedItems:o}}},{key:"_filterItems",value:function(e,t){if(null!=t.datalist||!t.allowDuplicates){var n=[],r={},o=!1,i=!0,a=!1,s=void 0;try{for(var l,u=e[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value,p=this._itemAdapter.getInputValue(c);if(t.allowDuplicates||!r[p]){var d=this._listAdapter.findMatching(t.datalist,p);null!=d?(n.push(d),r[p]=!0,o=!0):t.datalistOnly&&!t.datalistPartial?(this._warnInvalidValue(p),o=!0):(n.push(c),r[p]=!0)}else o=!0}}catch(e){a=!0,s=e}finally{try{!i&&u.return&&u.return()}finally{if(a)throw s}}if(o)return n}return e}},{key:"_warnInvalidValue",value:function(e){(0,d.default)(!1,'Value "%s" does not match any datalist value',e)}},{key:"_setInputValue",value:function(e,t){this.setState({inputValue:e,inputValueKeyPress:this._keyPressCount},t)}},{key:"_setValueMeta",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null!=e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;this._inputItem=e,this._inputItemEphemeral=t,this._valueIsValid=n,this._valueWasValidated=r}},{key:"_clearInput",value:function(){this._setValueMeta(null,!1,!0,!0),this._setInputValue("")}},{key:"_getValueUsing",value:function(e,t,n,r){return e.multiple?r:e.valueIsItem?n:t}},{key:"_getCurrentValue",value:function(){return this._getValueUsing(this.props,this.state.inputValue,this._inputItem,this.state.selectedItems)}},{key:"componentDidMount",value:function(){this._autoCompleteAfterRender=!this.refs.input.setSelectionRange}},{key:"componentWillReceiveProps",value:function(e){if(e.itemAdapter!=this.props.itemAdapter&&(this._itemAdapter=e.itemAdapter||new m.default),this._itemAdapter.receiveProps(e),e.datalist!=this.props.datalist||e.datalistAdapter!=this.props.datalistAdapter)if(e.datalistAdapter)this._listAdapter=e.datalistAdapter;else{var t=this._getListAdapter(e.datalist);t.constructor!=this._listAdapter.constructor&&(this._listAdapter=t)}this._listAdapter.receiveProps(e,this._itemAdapter);var n=e.value,r=this.state.inputValue,o=n!==this.props.value&&n!==this._getValueUsing(e,r,this._inputItem,this.state.selectedItems),i=void 0,a=void 0,s=void 0,l=void 0;if(!o){if(e.datalistOnly){var u=!e.datalistPartial&&null!=e.datalist,c=!this.props.datalistOnly||!e.datalistPartial&&this.props.datalistPartial||e.datalist!=this.props.datalist;r?(null==(i=this._listAdapter.findMatching(e.datalist,r))&&(u||this._inputItemEphemeral?this._inputItemEphemeral&&n===r&&(s=!0):i=this._inputItem),(a=null==i&&c)&&this._focused&&(this._setValueMeta(null,!1,!1,!0),c&&u&&null!=this._lastValidItem&&(this._lastValidItem=this._listAdapter.findMatching(e.datalist,this._lastValidValue),null==this._lastValidItem&&(this._lastValidValue="")),a=!1)):(i=null,a=!1),l=e.multiple&&u&&c}e.multiple&&!e.allowDuplicates&&this.props.allowDuplicates&&(l=!0)}if(o||a){var p=void 0,d=void 0;if(s)r="",p=!1,d=[];else{var f=this._getValueFromProps(e);r=f.inputValue,i=f.inputItem,p=f.inputItemEphemeral,d=f.selectedItems}i===this._inputItem&&this._focused?o&&e.multiple&&this.setState({selectedItems:d}):(this._setValueMeta(i,p,!0,!0),this._setInputValue(r),this.setState({selectedItems:d}),l=!1,this._lastValidItem=i,this._lastValidValue=r,o&&(this._lastOnChangeValue=this._getValueUsing(e,r,i,d)))}else r&&e.datalist!=this.props.datalist&&this._focused&&this._checkAutoComplete(r,e);if(l){var h=this._filterItems(this.state.selectedItems,e);this.setState({selectedItems:h})}e.datalistMessage&&e.datalistMessage!=this.props.datalistMessage&&this._focused&&this._open("message",e)}},{key:"shouldComponentUpdate",value:function(e,t){return!(0,a.default)(this.props,e)||!(0,a.default)(this.state,t)}},{key:"componentWillUpdate",value:function(e,t){var n=this.refs.suggestions;this._menuFocusedBeforeUpdate=n&&n.isFocused();var r=t.inputValue;if(r!=this.state.inputValue){var o=void 0,i=void 0,a=void 0;if(this._valueWasValidated?(o=this._inputItem,a=this._valueIsValid):(r?null!=(o=this._listAdapter.findMatching(e.datalist,r))||e.datalistOnly?(i=!1,a=null!=o):(o=this._itemAdapter.newFromValue(r),i=!0,a=!0):(o=null,i=!1,a=!e.required),this._setValueMeta(o,i,a)),a&&(this._lastValidItem=o,this._lastValidValue=o&&!i?this._itemAdapter.getInputValue(o):r),a){var s=e.multiple,l=e.onChange;if(!s&&l){var u=this._getValueUsing(e,r,o,t.selectedItems);u!==this._lastOnChangeValue&&(this._lastOnChangeValue=u,l(u))}var c=e.onSelect;c&&o!==this._lastOnSelectValue&&(this._lastOnSelectValue=o,c(o))}}var p=e.onToggle;p&&t.open!=this.state.open&&p(t.open)}},{key:"componentDidUpdate",value:function(e,t){this.state.open&&!t.open&&"keydown"===this._lastOpenEventType||this.state.disableFilter&&!t.disableFilter&&this._menuFocusedBeforeUpdate?this.refs.suggestions.focusFirst():!this.state.open&&t.open&&this._menuFocusedBeforeUpdate&&(this._menuFocusedBeforeUpdate=!1,this._focusInput())}},{key:"componentWillUnmount",value:function(){clearTimeout(this._focusTimeoutId),this._focusTimeoutId=null,clearTimeout(this._searchTimeoutId),this._searchTimeoutId=null}},{key:"_focusInput",value:function(){var e=p.default.findDOMNode(this.refs.input);e instanceof HTMLElement&&e.focus()}},{key:"_open",value:function(e,t){this._lastOpenEventType=e;var n="autocomplete"!==e&&this._hasNoOrExactMatch(t);this.setState({open:!0,disableFilter:n});var r=t.onSearch,o=this.state,i=o.inputValue,a=o.searchValue;r&&a!==i&&(this.setState({searchValue:i}),r(i))}},{key:"_close",value:function(){this.setState({open:!1})}},{key:"_toggleOpen",value:function(e,t){this.state.open?this._close():this._open(e,t)}},{key:"_canOpen",value:function(){var e=this.props.datalist;return null==e&&this.props.onSearch||!this._listAdapter.isEmpty(e)||!!this.props.datalistMessage}},{key:"_hasNoOrExactMatch",value:function(e){var t=this;if(null!=this._inputItem&&!this._inputItemEphemeral)return!0;var n=this._itemAdapter.foldValue(this.state.inputValue);return null==this._listAdapter.find(e.datalist,function(e){return t._itemAdapter.itemIncludedByInput(e,n)})}},{key:"render",value:function(){var e=this.props.showToggle,t=this._canOpen(),n="auto"===e?t:e,r={autosuggest:!0,open:this.state.open,disabled:this.props.disabled,dropdown:n&&!this.props.dropup,dropup:n&&this.props.dropup};return u.default.createElement("div",{key:"dropdown",className:(0,i.default)(r),onFocus:this._handleFocus,onBlur:this._handleBlur},this._renderInputGroup(n,t),this._renderMenu())}},{key:"_renderInputGroup",value:function(e,t){var n=this.props.addonBefore?u.default.createElement("span",{className:"input-group-addon",key:"addonBefore"},this.props.addonBefore):null,r=this.props.addonAfter?u.default.createElement("span",{className:"input-group-addon",key:"addonAfter"},this.props.addonAfter):null,o=this.props.buttonBefore?u.default.createElement("span",{className:"input-group-btn"},this.props.buttonBefore):null,a=e&&this._renderToggle(t),s=a||this.props.buttonAfter?u.default.createElement("span",{className:"input-group-btn"},this.props.buttonAfter,a):null,l=(0,i.default)({"input-group":n||r||o||s,"input-group-sm":"small"===this.props.bsSize,"input-group-lg":"large"===this.props.bsSize,"input-group-toggle":!!a});return l?u.default.createElement("div",{className:l,key:"input-group"},n,o,this._renderChoices(),r,s):this._renderChoices()}},{key:"_renderToggle",value:function(e){return u.default.createElement(c.Dropdown.Toggle,{ref:"toggle",key:"toggle",id:this.props.toggleId,bsSize:this.props.bsSize,disabled:this.props.disabled||!e,open:this.state.open,onClick:this._handleToggleClick,onKeyDown:this._handleKeyDown})}},{key:"_renderChoices",value:function(){if(this.props.multiple){var e=this.props.choicesClass,t=void 0===e?f.default:e;return u.default.createElement(t,{ref:"choices",autoHeight:!(this.props.showToggle||this.props.addonAfter||this.props.addonBefore||this.props.buttonAfter||this.props.buttonBefore),disabled:this.props.disabled,focused:this.state.inputFocused,inputValue:this.state.inputValue,items:this.state.selectedItems,onKeyPress:this._handleKeyPress,onRemove:this._removeItem,renderItem:this._renderSelected},this._renderInput())}return this._renderInput()}},{key:"_renderSelected",value:function(e){return this._itemAdapter.renderSelected(e)}},{key:"_renderInput",value:function(){var e=this.context.$bs_formGroup,n=e&&e.controlId,o={},a=!0,s=!1,l=void 0;try{for(var c,p=Object.keys(this.props)[Symbol.iterator]();!(a=(c=p.next()).done);a=!0){var d=c.value;t.propTypes[d]||(o[d]=this.props[d])}}catch(e){s=!0,l=e}finally{try{!a&&p.return&&p.return()}finally{if(s)throw l}}var f=!this.props.multiple||!this.state.selectedItems.length;return u.default.createElement("input",r({autoComplete:"off"},o,{className:(0,i.default)(this.props.className,{"form-control":!this.props.multiple}),ref:"input",key:"input",id:n,disabled:this.props.disabled,required:this.props.required&&f,placeholder:f?this.props.placeholder:void 0,type:this.props.type,value:this.state.inputValue,onChange:this._handleInputChange,onKeyDown:this._handleKeyDown,onKeyPress:this._handleKeyPress,onFocus:this._handleInputFocus,onBlur:this._handleInputBlur}))}},{key:"_renderMenu",value:function(){var e=this;this._pseudofocusedItem=null;var t=this.state.open;if(!t)return null;var n=this.props.datalist,r=this._itemAdapter.foldValue(this.state.inputValue);this._foldedInputValue=r;var o=void 0;o=this.state.disableFilter?this._listAdapter.toArray(n):this._listAdapter.filter(n,function(t){return e._itemAdapter.itemIncludedByInput(t,r)&&e._allowItem(t)});var i=(o=this._itemAdapter.sortItems(o,r)).length<this._listAdapter.getLength(n),a=void 0;o.length>0&&this.state.inputFocused&&(!this.props.multiple||this.props.datalistOnly)&&(this._pseudofocusedItem=o[a=0]);var s=this.props,l=s.suggestionsClass,c=void 0===l?h.default:l,p=s.datalistMessage,d=s.onDatalistMessageSelect,f=s.toggleId;return u.default.createElement(c,{ref:"suggestions",datalistMessage:p,filtered:i,focusedIndex:a,getItemKey:this._getItemKey,isSelectedItem:this._isSelectedItem,items:o,labelledBy:f,onClose:this._handleMenuClose,onDatalistMessageSelect:d,onDisableFilter:this._handleShowAll,onSelect:this._handleItemSelect,open:t,renderItem:this._renderSuggested})}},{key:"_allowItem",value:function(e){var t=this;if(this.props.allowDuplicates)return!0;var n=this._itemAdapter.getInputValue(e);return!this.state.selectedItems.find(function(e){return t._itemAdapter.getInputValue(e)===n})}},{key:"_getItemKey",value:function(e){return this._itemAdapter.getReactKey(e)}},{key:"_isSelectedItem",value:function(e){return this._itemAdapter.itemMatchesInput(e,this._foldedInputValue)}},{key:"_renderSuggested",value:function(e){return this._itemAdapter.renderSuggested(e)}},{key:"_handleToggleClick",value:function(){this._toggleOpen("click",this.props)}},{key:"_handleInputChange",value:function(e){var t=this,n=e.target.value,r=this._keyPressCount>this.state.inputValueKeyPress;if(r&&n?this._autoCompleteAfterRender?(this._setValueMeta(),this._setInputValue(n,function(){t._checkAutoComplete(n,t.props)})):this._checkAutoComplete(n,this.props)||(this._setValueMeta(),this._setInputValue(n)):(this._setValueMeta(),this._setInputValue(n)),r||this.state.open){var o=this.props.onSearch;o&&(clearTimeout(this._searchTimeoutId),this._searchTimeoutId=setTimeout(function(){t._searchTimeoutId=null,n!=t.state.searchValue&&(t.setState({searchValue:n}),o(n))},this.props.searchDebounce))}}},{key:"_checkAutoComplete",value:function(e,t){var n=this,r=!1,o=t.datalist,i=this._itemAdapter.foldValue(e),a=this._listAdapter.filter(o,function(e){return n._itemAdapter.itemIncludedByInput(e,i)&&n._allowItem(e)});if(a.length>0){var s=t.datalistOnly,l=t.datalistPartial;if(1===a.length&&s&&!l){var u=a[0],c=this._itemAdapter.getInputValue(u),p=void 0,d=t.inputSelect;if(e!=c&&d&&this._itemAdapter.foldValue(c).startsWith(i)){var f=this.refs.input;p=function(){d(f,e,c)}}this._setValueMeta(u),this._setInputValue(c,p),r=!0,(this.state.open?t.closeOnCompletion:e!=c&&!t.closeOnCompletion)&&this._toggleOpen("autocomplete",t)}else{var h=a.find(function(e){return n._itemAdapter.itemMatchesInput(e,i)});h&&(this._setValueMeta(h),this._setInputValue(e),r=!0),this.state.open||h&&!(a.length>1)||this._open("autocomplete",t)}}return r}},{key:"_handleItemSelect",value:function(e){if(this.props.multiple)this._addItem(e);else{var t=this._itemAdapter.getInputValue(e);this._setValueMeta(e),this._setInputValue(t)}this._close()}},{key:"_addItem",value:function(e){if(this._allowItem(e)){var t=[].concat(w(this.state.selectedItems),[e]);this.setState({selectedItems:t});var n=this.props,r=n.onAdd,o=n.onChange;r&&r(e),o&&o(t)}this._clearInput(),this.state.open&&this._close()}},{key:"_removeItem",value:function(e){var t=this.state.selectedItems,n=t.slice(0,e).concat(t.slice(e+1));this.setState({selectedItems:n});var r=this.props,o=r.onRemove,i=r.onChange;o&&o(e),i&&i(n)}},{key:"_addInputValue",value:function(){return!!this._inputItem&&(this._addItem(this._inputItem),!0)}},{key:"_handleShowAll",value:function(){this.setState({disableFilter:!0})}},{key:"_handleKeyDown",value:function(e){if(!this.props.disabled)switch(e.keyCode||e.which){case s.default.codes.down:case s.default.codes["page down"]:this.state.open?this.refs.suggestions.focusFirst():this._canOpen()&&this._open("keydown",this.props),e.preventDefault();break;case s.default.codes.left:case s.default.codes.backspace:this.refs.choices&&this.refs.input&&0===this._getCursorPosition(this.refs.input)&&(this.refs.choices.focusLast(),e.preventDefault());break;case s.default.codes.right:this.refs.choices&&this.refs.input&&this._getCursorPosition(this.refs.input)===this.state.inputValue.length&&(this.refs.choices.focusFirst(),e.preventDefault());break;case s.default.codes.enter:if(this.props.multiple&&this.state.inputValue&&(e.preventDefault(),this._addInputValue()))break;this.state.open&&this.state.inputFocused&&(e.preventDefault(),this._pseudofocusedItem?this._handleItemSelect(this._pseudofocusedItem):this._close());break;case s.default.codes.esc:case s.default.codes.tab:this._handleMenuClose(e)}}},{key:"_getCursorPosition",value:function(e){var t=p.default.findDOMNode(e);if(t instanceof HTMLInputElement)return t.selectionStart}},{key:"_handleKeyPress",value:function(){++this._keyPressCount}},{key:"_handleMenuClose",value:function(){this.state.open&&this._close()}},{key:"_handleInputFocus",value:function(){this.setState({inputFocused:!0})}},{key:"_handleInputBlur",value:function(){this.setState({inputFocused:!1})}},{key:"_handleFocus",value:function(){if(this._focusTimeoutId)clearTimeout(this._focusTimeoutId),this._focusTimeoutId=null;else{this._focused=!0;var e=this.props.onFocus;if(e)e(this._getCurrentValue())}}},{key:"_handleBlur",value:function(){var e=this;this._focusTimeoutId=setTimeout(function(){e._focusTimeoutId=null,e._focused=!1;var t=e.state.inputValue,n=e.props.onBlur;if(e.props.multiple)t&&!e._addInputValue()&&e._clearInput();else if(t!=e._lastValidValue){var r=void 0;return n&&(r=function(){var t=e._getCurrentValue();n(t)}),e._setValueMeta(e._lastValidItem,!1,!0,!0),void e._setInputValue(e._lastValidValue,r)}if(n){var o=e._getCurrentValue();n(o)}},1)}}]),t}();E.propTypes={addonAfter:l.default.node,addonBefore:l.default.node,allowDuplicates:l.default.bool,bsSize:l.default.oneOf(["small","large"]),buttonAfter:l.default.node,buttonBefore:l.default.node,choicesClass:l.default.oneOfType([l.default.func,l.default.string]),closeOnCompletion:l.default.bool,datalist:l.default.any,datalistAdapter:l.default.object,datalistMessage:l.default.node,datalistOnly:l.default.bool,datalistPartial:l.default.bool,defaultValue:l.default.any,disabled:l.default.bool,dropup:l.default.bool,groupClassName:l.default.string,inputSelect:l.default.func,itemAdapter:l.default.object,itemReactKeyPropName:l.default.string,itemSortKeyPropName:l.default.string,itemValuePropName:l.default.string,multiple:l.default.bool,onAdd:l.default.func,onBlur:l.default.func,onChange:l.default.func,onDatalistMessageSelect:l.default.func,onFocus:l.default.func,onRemove:l.default.func,onSearch:l.default.func,onSelect:l.default.func,onToggle:l.default.func,placeholder:l.default.string,required:l.default.bool,searchDebounce:l.default.number,showToggle:l.default.oneOfType([l.default.bool,l.default.oneOf(["auto"])]),suggestionsClass:l.default.oneOfType([l.default.func,l.default.string]),toggleId:l.default.oneOfType([l.default.string,l.default.number]),type:l.default.string,value:l.default.any,valueIsItem:l.default.bool},E.contextTypes={$bs_formGroup:l.default.object},E.defaultProps={closeOnCompletion:!1,datalistOnly:!1,datalistPartial:!1,disabled:!1,dropup:!1,inputSelect:E.defaultInputSelect,multiple:!1,itemReactKeyPropName:"key",itemSortKeyPropName:"sortKey",itemValuePropName:"value",searchDebounce:250,showToggle:"auto",type:"text",valueIsItem:!1},t.default=E},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=c(n(9)),i=c(n(765)),a=c(n(827)),s=c(n(1)),l=c(n(0)),u=c(n(21));function c(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(r)))),a=i;return a._handleKeyDown=i._handleKeyDown.bind(i),a._handleKeyPress=i._handleKeyPress.bind(i),a._handleClose=i._handleClose.bind(i),a._handleClick=i._handleClick.bind(i),a._focusInput=i._focusInput.bind(i),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l["default"].Component),r(t,[{key:"shouldComponentUpdate",value:function(e){return!(0,i.default)(this.props,e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.autoHeight,r=t.disabled,i=t.focused,a=t.inputValue,s=t.items,u=t.renderItem,c=t.children,p=s.length>0,d=void 0;return p&&(d={width:.75*(a.length+1)+"em"}),l.default.createElement("ul",{className:(0,o.default)("form-control","autosuggest-choices",{focused:i,"has-items":p,"auto-height":n}),disabled:r,onClick:this._focusInput},s.map(function(t,n){return l.default.createElement("li",{key:n,"data-index":n,tabIndex:r?void 0:"-1",className:"autosuggest-choice",onKeyDown:e._handleKeyDown,onKeyPress:e._handleKeyPress},l.default.createElement("span",{className:"autosuggest-choice-close",onClick:e._handleClose}),l.default.createElement("span",{className:"autosuggest-choice-label",onClick:e._handleClick},u(t)))}),l.default.createElement("li",{className:"autosuggest-input-choice",style:d},c))}},{key:"_handleKeyDown",value:function(e){switch(e.keyCode){case a.default.codes.left:this._focusPrevious(),e.preventDefault();break;case a.default.codes.right:this._focusNext(),e.preventDefault();break;case a.default.codes.backspace:this._removeActive(-1),e.preventDefault();break;case a.default.codes.delete:this._removeActive(0),e.preventDefault()}}},{key:"_handleKeyPress",value:function(e){this._focusInput();var t=this.props.onKeyPress;t&&t(e)}},{key:"_handleClose",value:function(e){if(!this.props.disabled&&e.target instanceof HTMLElement){var t=e.target.parentNode;if(t instanceof Element){var n=Number(t.getAttribute("data-index"));this._remove(n)}}e.stopPropagation()}},{key:"_handleClick",value:function(e){e.stopPropagation()}},{key:"focusFirst",value:function(){var e=this._getFocusableMenuItems(!1);e.length>0&&e[0].focus()}},{key:"focusLast",value:function(){var e=this._getFocusableMenuItems(!1);e.length>0&&e[e.length-1].focus()}},{key:"_focusPrevious",value:function(){var e=this._getItemsAndActiveIndex(!0),t=e.items,n=e.activeIndex;n>0?t[n-1].focus():t.length>0&&t[t.length-1].focus()}},{key:"_focusNext",value:function(){var e=this._getItemsAndActiveIndex(!0),t=e.items,n=e.activeIndex;n<t.length-1?t[n+1].focus():t.length>0&&t[0].focus()}},{key:"_focusInput",value:function(){var e=u.default.findDOMNode(this);if(e instanceof Element){var t=e.querySelector("input");t&&t.focus()}}},{key:"_remove",value:function(e){var t=this.props.onRemove;t&&t(e)}},{key:"_removeActive",value:function(e){var t=this._getItemsAndActiveIndex(!1),n=t.items,r=t.activeIndex;if(r>=0){var o=r+e;o<0||o>=n.length-1?this._focusInput():0!=e&&n[o].focus(),this._remove(r)}}},{key:"_getItemsAndActiveIndex",value:function(e){var t=this._getFocusableMenuItems(e),n=document.activeElement,r=n?t.indexOf(n):-1;return{items:t,activeIndex:r}}},{key:"_getFocusableMenuItems",value:function(e){var t=u.default.findDOMNode(this);return t instanceof Element?Array.from(t.querySelectorAll(e?'[tabIndex="-1"],input':'[tabIndex="-1"]')):[]}}]),t}();p.propTypes={autoHeight:s.default.bool,disabled:s.default.bool,focused:s.default.bool,inputValue:s.default.string,items:s.default.arrayOf(s.default.any).isRequired,onKeyPress:s.default.func,onRemove:s.default.func,renderItem:s.default.func.isRequired},t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=u(n(765)),i=u(n(1)),a=u(n(0)),s=n(56),l=u(n(21));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["default"].Component),r(t,[{key:"shouldComponentUpdate",value:function(e){return!(0,o.default)(this.props,e)}},{key:"isFocused",value:function(){var e=l.default.findDOMNode(this.refs.menu);return null!=e&&document&&e.contains(document.activeElement)}},{key:"focusFirst",value:function(){this.refs.menu.focusNext()}},{key:"render",value:function(){var e=this.props,t=e.items,n=e.datalistMessage,r=e.onDatalistMessageSelect;return a.default.createElement(s.Dropdown.Menu,{labelledBy:this.props.labelledBy,onClose:this.props.onClose,open:this.props.open,ref:"menu"},t.map(this._renderItem,this),this.props.filtered&&a.default.createElement(s.MenuItem,{key:"show-all",onSelect:this.props.onDisableFilter},a.default.createElement("span",{className:"show-all"},0===t.length?a.default.createElement("span",{className:"no-matches"}):null)),n&&a.default.createElement(s.MenuItem,{key:"datalist-message",disabled:null==r,onSelect:r},n))}},{key:"_renderItem",value:function(e,t){var n=this.props.isSelectedItem(e);return a.default.createElement(s.MenuItem,{active:n,className:t!==this.props.focusedIndex||n?void 0:"pseudofocused",eventKey:e,key:this.props.getItemKey(e),onSelect:this.props.onSelect},this.props.renderItem(e))}}]),t}();c.propTypes={datalistMessage:i.default.node,filtered:i.default.bool,focusedIndex:i.default.number,getItemKey:i.default.func.isRequired,isSelectedItem:i.default.func.isRequired,items:i.default.arrayOf(i.default.any).isRequired,labelledBy:i.default.oneOfType([i.default.string,i.default.number]),onClose:i.default.func,onDatalistMessageSelect:i.default.func,onDisableFilter:i.default.func,onSelect:i.default.func.isRequired,open:i.default.bool,renderItem:i.default.func.isRequired},t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(729),a=(r=i)&&r.__esModule?r:{default:r};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["default"]),o(t,[{key:"getLength",value:function(){return 0}},{key:"filter",value:function(){return[]}},{key:"find",value:function(){}},{key:"toArray",value:function(){return[]}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(729),a=(r=i)&&r.__esModule?r:{default:r};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["default"]),o(t,[{key:"getLength",value:function(e){return e.length}},{key:"filter",value:function(e,t){return e.filter(t)}},{key:"find",value:function(e,t){return e.find(t)}},{key:"toArray",value:function(e){return e.slice()}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(829),a=(r=i)&&r.__esModule?r:{default:r};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["default"]),o(t,[{key:"getLength",value:function(e){return e.size}},{key:"filter",value:function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e.entries()[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value,u=this._getKeyValueItem(l[0],l[1]);t(u)&&n.push(u)}}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}},{key:"find",value:function(e,t){var n=!0,r=!1,o=void 0;try{for(var i,a=e.entries()[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value,l=this._getKeyValueItem(s[0],s[1]);if(t(l))return l}}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}}},{key:"toArray",value:function(e){var t=[],n=!0,r=!1,o=void 0;try{for(var i,a=e.entries()[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;t.push(this._getKeyValueItem(s[0],s[1]))}}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return t}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(829),a=(r=i)&&r.__esModule?r:{default:r};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["default"]),o(t,[{key:"getLength",value:function(e){return Object.keys(e).length}},{key:"filter",value:function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=Object.keys(e)[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value,u=this._getKeyValueItem(l,e[l]);t(u)&&n.push(u)}}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}},{key:"find",value:function(e,t){var n=!0,r=!1,o=void 0;try{for(var i,a=Object.keys(e)[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value,l=this._getKeyValueItem(s,e[s]);if(t(l))return l}}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}}},{key:"toArray",value:function(e){var t=[],n=!0,r=!1,o=void 0;try{for(var i,a=Object.keys(e)[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;t.push(this._getKeyValueItem(s,e[s]))}}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return t}}]),t}();t.default=s},function(e,t,n){"use strict";var r=n(0),o=n(4),i=n(7),a=n(3);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":d(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,c(t).apply(this,arguments))}var n,i,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,r["Component"]),n=t,(i=[{key:"render",value:function(){var e=this;return r.createElement("div",null,"Quick select:",o.map(this.props.buttonsConfig,function(t,n){var o=s(n.split("|"),2),i=o[0],l=o[1],u=r.createElement("button",{"data-test":"selectPanCan",className:"btn btn-default btn-xs",onClick:function(){return e.props.onSelect(t)}},i),c=r.createElement("span",{style:{display:"inline-block",width:"300px"}},l||"");return l?r.createElement(a.c,{overlay:c},u):u}))}}])&&l(n.prototype,i),d&&l(n,d),t}();h=f([i.observer],h),t.a=h},function(e,t,n){(function(r){var o,i,a;/*! jsTree - v3.3.7 - 2018-11-06 - (MIT) */!function(s){"use strict";i=[n(11)],void 0===(a="function"==typeof(o=function(e,t){if(!e.jstree){var n=0,o=!1,i=!1,a=!1,s=[],l=e("script:last").attr("src"),u=window.document;e.jstree={version:"3.3.7",defaults:{plugins:[]},plugins:{},path:l&&-1!==l.indexOf("/")?l.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%?`]/g,root:"#"},e.jstree.create=function(t,r){var o=new e.jstree.core(++n),i=r;return r=e.extend(!0,{},e.jstree.defaults,r),i&&i.plugins&&(r.plugins=i.plugins),e.each(r.plugins,function(e,t){"core"!==e&&(o=o.plugin(t,r[t]))}),e(t).data("jstree",o),o.init(t,r),o},e.jstree.destroy=function(){e(".jstree:jstree").jstree("destroy"),e(u).off(".jstree")},e.jstree.core=function(e){this._id=e,this._cnt=0,this._wrk=null,this._data={core:{themes:{name:!1,dots:!1,icons:!1,ellipsis:!1},selected:[],last_error:{},working:!1,worker_queue:[],focused:null}}},e.jstree.reference=function(t){var n=null,r=null;if(!t||!t.id||t.tagName&&t.nodeType||(t=t.id),!r||!r.length)try{r=e(t)}catch(e){}if(!r||!r.length)try{r=e("#"+t.replace(e.jstree.idregex,"\\$&"))}catch(e){}return r&&r.length&&(r=r.closest(".jstree")).length&&(r=r.data("jstree"))?n=r:e(".jstree").each(function(){var r=e(this).data("jstree");return r&&r._model.data[t]?(n=r,!1):void 0}),n},e.fn.jstree=function(n){var r="string"==typeof n,o=Array.prototype.slice.call(arguments,1),i=null;return!(!0===n&&!this.length)&&(this.each(function(){var a=e.jstree.reference(this),s=r&&a?a[n]:null;return i=r&&s?s.apply(a,o):null,a||r||n!==t&&!e.isPlainObject(n)||e.jstree.create(this,n),(a&&!r||!0===n)&&(i=a||!1),(null===i||i===t)&&void 0}),null!==i&&i!==t?i:this)},e.expr.pseudos.jstree=e.expr.createPseudo(function(n){return function(n){return e(n).hasClass("jstree")&&e(n).data("jstree")!==t}}),e.jstree.defaults.core={data:!1,strings:!1,check_callback:!1,error:e.noop,animation:200,multiple:!0,themes:{name:!1,url:!1,dir:!1,dots:!0,icons:!0,ellipsis:!1,stripes:!1,variant:!1,responsive:!1},expand_selected_onload:!0,worker:!0,force_text:!1,dblclick_toggle:!0,loaded_state:!1,restore_focus:!0,keyboard:{"ctrl-space":function(t){t.type="click",e(t.currentTarget).trigger(t)},enter:function(t){t.type="click",e(t.currentTarget).trigger(t)},left:function(t){if(t.preventDefault(),this.is_open(t.currentTarget))this.close_node(t.currentTarget);else{var n=this.get_parent(t.currentTarget);n&&n.id!==e.jstree.root&&this.get_node(n,!0).children(".jstree-anchor").focus()}},up:function(e){e.preventDefault();var t=this.get_prev_dom(e.currentTarget);t&&t.length&&t.children(".jstree-anchor").focus()},right:function(t){if(t.preventDefault(),this.is_closed(t.currentTarget))this.open_node(t.currentTarget,function(e){this.get_node(e,!0).children(".jstree-anchor").focus()});else if(this.is_open(t.currentTarget)){var n=this.get_node(t.currentTarget,!0).children(".jstree-children")[0];n&&e(this._firstChild(n)).children(".jstree-anchor").focus()}},down:function(e){e.preventDefault();var t=this.get_next_dom(e.currentTarget);t&&t.length&&t.children(".jstree-anchor").focus()},"*":function(e){this.open_all()},home:function(t){t.preventDefault();var n=this._firstChild(this.get_container_ul()[0]);n&&e(n).children(".jstree-anchor").filter(":visible").focus()},end:function(e){e.preventDefault(),this.element.find(".jstree-anchor").filter(":visible").last().focus()},f2:function(e){e.preventDefault(),this.edit(e.currentTarget)}}},e.jstree.core.prototype={plugin:function(t,n){var r=e.jstree.plugins[t];return r?(this._data[t]={},r.prototype=this,new r(n,this)):this},init:function(t,n){this._model={data:{},changed:[],force_full_redraw:!1,redraw_timeout:!1,default_state:{loaded:!0,opened:!1,selected:!1,disabled:!1}},this._model.data[e.jstree.root]={id:e.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this.element=e(t).addClass("jstree jstree-"+this._id),this.settings=n,this._data.core.ready=!1,this._data.core.loaded=!1,this._data.core.rtl="rtl"===this.element.css("direction"),this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl"),this.element.attr("role","tree"),this.settings.core.multiple&&this.element.attr("aria-multiselectable",!0),this.element.attr("tabindex")||this.element.attr("tabindex","0"),this.bind(),this.trigger("init"),this._data.core.original_container_html=this.element.find(" > ul > li").clone(!0),this._data.core.original_container_html.find("li").addBack().contents().filter(function(){return 3===this.nodeType&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove(),this.element.html("<ul class='jstree-container-ul jstree-children' role='group'><li id='j"+this._id+"_loading' class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='tree-item'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading"),this._data.core.li_height=this.get_container_ul().children("li").first().outerHeight()||24,this._data.core.node=this._create_prototype_node(),this.trigger("loading"),this.load_node(e.jstree.root)},destroy:function(e){if(this.trigger("destroy"),this._wrk)try{window.URL.revokeObjectURL(this._wrk),this._wrk=null}catch(e){}e||this.element.empty(),this.teardown()},_create_prototype_node:function(){var e,t,n=u.createElement("LI");return n.setAttribute("role","treeitem"),(e=u.createElement("I")).className="jstree-icon jstree-ocl",e.setAttribute("role","presentation"),n.appendChild(e),(e=u.createElement("A")).className="jstree-anchor",e.setAttribute("href","#"),e.setAttribute("tabindex","-1"),(t=u.createElement("I")).className="jstree-icon jstree-themeicon",t.setAttribute("role","presentation"),e.appendChild(t),n.appendChild(e),e=t=null,n},_kbevent_to_func:function(e){var t=[];e.ctrlKey&&t.push("ctrl"),e.altKey&&t.push("alt"),e.shiftKey&&t.push("shift"),t.push({8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock",16:"Shift",17:"Ctrl",18:"Alt",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*",173:"-"}[e.which]||e.which),t=t.sort().join("-").toLowerCase();var n,r,o=this.settings.core.keyboard;for(n in o)if(o.hasOwnProperty(n)&&("-"!==(r=n)&&"+"!==r&&(r=(r=r.replace("--","-MINUS").replace("+-","-MINUS").replace("++","-PLUS").replace("-+","-PLUS")).split(/-|\+/).sort().join("-").replace("MINUS","-").replace("PLUS","+").toLowerCase()),r===t))return o[n];return null},teardown:function(){this.unbind(),this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")}),this.element=null},bind:function(){var t="",n=null,r=0;this.element.on("dblclick.jstree",function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;if(u.selection&&u.selection.empty)u.selection.empty();else if(window.getSelection){var t=window.getSelection();try{t.removeAllRanges(),t.collapse()}catch(e){}}}).on("mousedown.jstree",e.proxy(function(e){e.target===this.element[0]&&(e.preventDefault(),r=+new Date)},this)).on("mousedown.jstree",".jstree-ocl",function(e){e.preventDefault()}).on("click.jstree",".jstree-ocl",e.proxy(function(e){this.toggle_node(e.target)},this)).on("dblclick.jstree",".jstree-anchor",e.proxy(function(e){return!(!e.target.tagName||"input"!==e.target.tagName.toLowerCase())||void(this.settings.core.dblclick_toggle&&this.toggle_node(e.target))},this)).on("click.jstree",".jstree-anchor",e.proxy(function(t){t.preventDefault(),t.currentTarget!==u.activeElement&&e(t.currentTarget).focus(),this.activate_node(t.currentTarget,t)},this)).on("keydown.jstree",".jstree-anchor",e.proxy(function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;this._data.core.rtl&&(37===e.which?e.which=39:39===e.which&&(e.which=37));var t=this._kbevent_to_func(e);if(t){var n=t.call(this,e);if(!1===n||!0===n)return n}},this)).on("load_node.jstree",e.proxy(function(t,n){n.status&&(n.node.id!==e.jstree.root||this._data.core.loaded||(this._data.core.loaded=!0,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.trigger("loaded")),this._data.core.ready||setTimeout(e.proxy(function(){if(this.element&&!this.get_container_ul().find(".jstree-loading").length){if(this._data.core.ready=!0,this._data.core.selected.length){if(this.settings.core.expand_selected_onload){var t,n,r=[];for(t=0,n=this._data.core.selected.length;n>t;t++)r=r.concat(this._model.data[this._data.core.selected[t]].parents);for(r=e.vakata.array_unique(r),t=0,n=r.length;n>t;t++)this.open_node(r[t],!1,0)}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}this.trigger("ready")}},this),0))},this)).on("keypress.jstree",e.proxy(function(r){if(r.target.tagName&&"input"===r.target.tagName.toLowerCase())return!0;n&&clearTimeout(n),n=setTimeout(function(){t=""},500);var o=String.fromCharCode(r.which).toLowerCase(),i=this.element.find(".jstree-anchor").filter(":visible"),a=i.index(u.activeElement)||0,s=!1;if((t+=o).length>1){if(i.slice(a).each(e.proxy(function(n,r){return 0===e(r).text().toLowerCase().indexOf(t)?(e(r).focus(),s=!0,!1):void 0},this)),s)return;if(i.slice(0,a).each(e.proxy(function(n,r){return 0===e(r).text().toLowerCase().indexOf(t)?(e(r).focus(),s=!0,!1):void 0},this)),s)return}if(new RegExp("^"+o.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+"+$").test(t)){if(i.slice(a+1).each(e.proxy(function(t,n){return e(n).text().toLowerCase().charAt(0)===o?(e(n).focus(),s=!0,!1):void 0},this)),s)return;if(i.slice(0,a+1).each(e.proxy(function(t,n){return e(n).text().toLowerCase().charAt(0)===o?(e(n).focus(),s=!0,!1):void 0},this)),s)return}},this)).on("init.jstree",e.proxy(function(){var e=this.settings.core.themes;this._data.core.themes.dots=e.dots,this._data.core.themes.stripes=e.stripes,this._data.core.themes.icons=e.icons,this._data.core.themes.ellipsis=e.ellipsis,this.set_theme(e.name||"default",e.url),this.set_theme_variant(e.variant)},this)).on("loading.jstree",e.proxy(function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"](),this[this._data.core.themes.icons?"show_icons":"hide_icons"](),this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"](),this[this._data.core.themes.ellipsis?"show_ellipsis":"hide_ellipsis"]()},this)).on("blur.jstree",".jstree-anchor",e.proxy(function(t){this._data.core.focused=null,e(t.currentTarget).filter(".jstree-hovered").mouseleave(),this.element.attr("tabindex","0")},this)).on("focus.jstree",".jstree-anchor",e.proxy(function(t){var n=this.get_node(t.currentTarget);n&&n.id&&(this._data.core.focused=n.id),this.element.find(".jstree-hovered").not(t.currentTarget).mouseleave(),e(t.currentTarget).mouseenter(),this.element.attr("tabindex","-1")},this)).on("focus.jstree",e.proxy(function(){if(+new Date-r>500&&!this._data.core.focused&&this.settings.core.restore_focus){r=0;var e=this.get_node(this.element.attr("aria-activedescendant"),!0);e&&e.find("> .jstree-anchor").focus()}},this)).on("mouseenter.jstree",".jstree-anchor",e.proxy(function(e){this.hover_node(e.currentTarget)},this)).on("mouseleave.jstree",".jstree-anchor",e.proxy(function(e){this.dehover_node(e.currentTarget)},this))},unbind:function(){this.element.off(".jstree"),e(u).off(".jstree-"+this._id)},trigger:function(e,t){t||(t={}),t.instance=this,this.element.triggerHandler(e.replace(".jstree","")+".jstree",t)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children(".jstree-children").first()},get_string:function(t){var n=this.settings.core.strings;return e.isFunction(n)?n.call(this,t):n&&n[t]?n[t]:t},_firstChild:function(e){for(e=e?e.firstChild:null;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},_nextSibling:function(e){for(e=e?e.nextSibling:null;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},_previousSibling:function(e){for(e=e?e.previousSibling:null;null!==e&&1!==e.nodeType;)e=e.previousSibling;return e},get_node:function(t,n){var o;t&&t.id&&(t=t.id),t instanceof r&&t.length&&t[0].id&&(t=t[0].id);try{if(this._model.data[t])t=this._model.data[t];else if("string"==typeof t&&this._model.data[t.replace(/^#/,"")])t=this._model.data[t.replace(/^#/,"")];else if("string"==typeof t&&(o=e("#"+t.replace(e.jstree.idregex,"\\$&"),this.element)).length&&this._model.data[o.closest(".jstree-node").attr("id")])t=this._model.data[o.closest(".jstree-node").attr("id")];else if((o=this.element.find(t)).length&&this._model.data[o.closest(".jstree-node").attr("id")])t=this._model.data[o.closest(".jstree-node").attr("id")];else{if(!(o=this.element.find(t)).length||!o.hasClass("jstree"))return!1;t=this._model.data[e.jstree.root]}return n&&(t=t.id===e.jstree.root?this.element:e("#"+t.id.replace(e.jstree.idregex,"\\$&"),this.element)),t}catch(e){return!1}},get_path:function(t,n,r){if(!(t=t.parents?t:this.get_node(t))||t.id===e.jstree.root||!t.parents)return!1;var o,i,a=[];for(a.push(r?t.id:t.text),o=0,i=t.parents.length;i>o;o++)a.push(r?t.parents[o]:this.get_text(t.parents[o]));return a=a.reverse().slice(1),n?a.join(n):a},get_next_dom:function(t,n){var r;if((t=this.get_node(t,!0))[0]===this.element[0]){for(r=this._firstChild(this.get_container_ul()[0]);r&&0===r.offsetHeight;)r=this._nextSibling(r);return!!r&&e(r)}if(!t||!t.length)return!1;if(n){r=t[0];do{r=this._nextSibling(r)}while(r&&0===r.offsetHeight);return!!r&&e(r)}if(t.hasClass("jstree-open")){for(r=this._firstChild(t.children(".jstree-children")[0]);r&&0===r.offsetHeight;)r=this._nextSibling(r);if(null!==r)return e(r)}r=t[0];do{r=this._nextSibling(r)}while(r&&0===r.offsetHeight);return null!==r?e(r):t.parentsUntil(".jstree",".jstree-node").nextAll(".jstree-node:visible").first()},get_prev_dom:function(t,n){var r;if((t=this.get_node(t,!0))[0]===this.element[0]){for(r=this.get_container_ul()[0].lastChild;r&&0===r.offsetHeight;)r=this._previousSibling(r);return!!r&&e(r)}if(!t||!t.length)return!1;if(n){r=t[0];do{r=this._previousSibling(r)}while(r&&0===r.offsetHeight);return!!r&&e(r)}r=t[0];do{r=this._previousSibling(r)}while(r&&0===r.offsetHeight);if(null!==r){for(t=e(r);t.hasClass("jstree-open");)t=t.children(".jstree-children").first().children(".jstree-node:visible:last");return t}return!(!(r=t[0].parentNode.parentNode)||!r.className||-1===r.className.indexOf("jstree-node"))&&e(r)},get_parent:function(t){return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&t.parent},get_children_dom:function(e){return(e=this.get_node(e,!0))[0]===this.element[0]?this.get_container_ul().children(".jstree-node"):!(!e||!e.length)&&e.children(".jstree-children").children(".jstree-node")},is_parent:function(e){return(e=this.get_node(e))&&(!1===e.state.loaded||e.children.length>0)},is_loaded:function(e){return(e=this.get_node(e))&&e.state.loaded},is_loading:function(e){return(e=this.get_node(e))&&e.state&&e.state.loading},is_open:function(e){return(e=this.get_node(e))&&e.state.opened},is_closed:function(e){return(e=this.get_node(e))&&this.is_parent(e)&&!e.state.opened},is_leaf:function(e){return!this.is_parent(e)},load_node:function(t,n){var r,o,i,a,s;if(e.isArray(t))return this._load_nodes(t.slice(),n),!0;if(!(t=this.get_node(t)))return n&&n.call(this,t,!1),!1;if(t.state.loaded){for(t.state.loaded=!1,i=0,a=t.parents.length;a>i;i++)this._model.data[t.parents[i]].children_d=e.vakata.array_filter(this._model.data[t.parents[i]].children_d,function(n){return-1===e.inArray(n,t.children_d)});for(r=0,o=t.children_d.length;o>r;r++)this._model.data[t.children_d[r]].state.selected&&(s=!0),delete this._model.data[t.children_d[r]];s&&(this._data.core.selected=e.vakata.array_filter(this._data.core.selected,function(n){return-1===e.inArray(n,t.children_d)})),t.children=[],t.children_d=[],s&&this.trigger("changed",{action:"load_node",node:t,selected:this._data.core.selected})}return t.state.failed=!1,t.state.loading=!0,this.get_node(t,!0).addClass("jstree-loading").attr("aria-busy",!0),this._load_node(t,e.proxy(function(e){(t=this._model.data[t.id]).state.loading=!1,t.state.loaded=e,t.state.failed=!t.state.loaded;var r=this.get_node(t,!0),o=0,i=0,a=this._model.data,s=!1;for(o=0,i=t.children.length;i>o;o++)if(a[t.children[o]]&&!a[t.children[o]].state.hidden){s=!0;break}t.state.loaded&&r&&r.length&&(r.removeClass("jstree-closed jstree-open jstree-leaf"),s?"#"!==t.id&&r.addClass(t.state.opened?"jstree-open":"jstree-closed"):r.addClass("jstree-leaf")),r.removeClass("jstree-loading").attr("aria-busy",!1),this.trigger("load_node",{node:t,status:e}),n&&n.call(this,t,e)},this)),!0},_load_nodes:function(e,t,n,r){var o,i,a=!0,s=function(){this._load_nodes(e,t,!0)},l=this._model.data,u=[];for(o=0,i=e.length;i>o;o++)l[e[o]]&&(!l[e[o]].state.loaded&&!l[e[o]].state.failed||!n&&r)&&(this.is_loading(e[o])||this.load_node(e[o],s),a=!1);if(a){for(o=0,i=e.length;i>o;o++)l[e[o]]&&l[e[o]].state.loaded&&u.push(e[o]);t&&!t.done&&(t.call(this,u),t.done=!0)}},load_all:function(t,n){if(t||(t=e.jstree.root),!(t=this.get_node(t)))return!1;var r,o,i=[],a=this._model.data,s=a[t.id].children_d;for(t.state&&!t.state.loaded&&i.push(t.id),r=0,o=s.length;o>r;r++)a[s[r]]&&a[s[r]].state&&!a[s[r]].state.loaded&&i.push(s[r]);i.length?this._load_nodes(i,function(){this.load_all(t,n)}):(n&&n.call(this,t),this.trigger("load_all",{node:t}))},_load_node:function(t,n){var r,o=this.settings.core.data,i=function(){return 3!==this.nodeType&&8!==this.nodeType};return o?e.isFunction(o)?o.call(this,t,e.proxy(function(r){!1===r?n.call(this,!1):this["string"==typeof r?"_append_html_data":"_append_json_data"](t,"string"==typeof r?e(e.parseHTML(r)).filter(i):r,function(e){n.call(this,e)})},this)):"object"==typeof o?o.url?(o=e.extend(!0,{},o),e.isFunction(o.url)&&(o.url=o.url.call(this,t)),e.isFunction(o.data)&&(o.data=o.data.call(this,t)),e.ajax(o).done(e.proxy(function(r,o,a){var s=a.getResponseHeader("Content-Type");return s&&-1!==s.indexOf("json")||"object"==typeof r?this._append_json_data(t,r,function(e){n.call(this,e)}):s&&-1!==s.indexOf("html")||"string"==typeof r?this._append_html_data(t,e(e.parseHTML(r)).filter(i),function(e){n.call(this,e)}):(this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:t.id,xhr:a})},this.settings.core.error.call(this,this._data.core.last_error),n.call(this,!1))},this)).fail(e.proxy(function(e){this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:t.id,xhr:e})},n.call(this,!1),this.settings.core.error.call(this,this._data.core.last_error)},this))):(r=e.isArray(o)?e.extend(!0,[],o):e.isPlainObject(o)?e.extend(!0,{},o):o,t.id===e.jstree.root?this._append_json_data(t,r,function(e){n.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:t.id})},this.settings.core.error.call(this,this._data.core.last_error),n.call(this,!1))):"string"==typeof o?t.id===e.jstree.root?this._append_html_data(t,e(e.parseHTML(o)).filter(i),function(e){n.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:t.id})},this.settings.core.error.call(this,this._data.core.last_error),n.call(this,!1)):n.call(this,!1):t.id===e.jstree.root?this._append_html_data(t,this._data.core.original_container_html.clone(!0),function(e){n.call(this,e)}):n.call(this,!1)},_node_changed:function(t){(t=this.get_node(t))&&-1===e.inArray(t.id,this._model.changed)&&this._model.changed.push(t.id)},_append_html_data:function(t,n,r){(t=this.get_node(t)).children=[],t.children_d=[];var o,i,a,s=n.is("ul")?n.children():n,l=t.id,u=[],c=[],p=this._model.data,d=p[l],f=this._data.core.selected.length;for(s.each(e.proxy(function(t,n){(o=this._parse_model_from_html(e(n),l,d.parents.concat()))&&(u.push(o),c.push(o),p[o].children_d.length&&(c=c.concat(p[o].children_d)))},this)),d.children=u,d.children_d=c,i=0,a=d.parents.length;a>i;i++)p[d.parents[i]].children_d=p[d.parents[i]].children_d.concat(c);this.trigger("model",{nodes:c,parent:l}),l!==e.jstree.root?(this._node_changed(l),this.redraw()):(this.get_container_ul().children(".jstree-initial-node").remove(),this.redraw(!0)),this._data.core.selected.length!==f&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),r.call(this,!0)},_append_json_data:function(t,n,r,o){if(null!==this.element){(t=this.get_node(t)).children=[],t.children_d=[],n.d&&("string"==typeof(n=n.d)&&(n=JSON.parse(n))),e.isArray(n)||(n=[n]);var i=null,a={df:this._model.default_state,dat:n,par:t.id,m:this._model.data,t_id:this._id,t_cnt:this._cnt,sel:this._data.core.selected},s=function(e,t){e.data&&(e=e.data);var n,r,o,i,a=e.dat,s=e.par,l=[],u=[],c=[],p=e.df,d=e.t_id,f=e.t_cnt,h=e.m,m=h[s],y=e.sel,g=function(e,n,r){r=r?r.concat():[],n&&r.unshift(n);var o,i,a,s,l=e.id.toString(),u={id:l,text:e.text||"",icon:e.icon===t||e.icon,parent:n,parents:r,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(o in p)p.hasOwnProperty(o)&&(u.state[o]=p[o]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(u.icon=e.data.jstree.icon),(u.icon===t||null===u.icon||""===u.icon)&&(u.icon=!0),e&&e.data&&(u.data=e.data,e.data.jstree))for(o in e.data.jstree)e.data.jstree.hasOwnProperty(o)&&(u.state[o]=e.data.jstree[o]);if(e&&"object"==typeof e.state)for(o in e.state)e.state.hasOwnProperty(o)&&(u.state[o]=e.state[o]);if(e&&"object"==typeof e.li_attr)for(o in e.li_attr)e.li_attr.hasOwnProperty(o)&&(u.li_attr[o]=e.li_attr[o]);if(u.li_attr.id||(u.li_attr.id=l),e&&"object"==typeof e.a_attr)for(o in e.a_attr)e.a_attr.hasOwnProperty(o)&&(u.a_attr[o]=e.a_attr[o]);for(e&&e.children&&!0===e.children&&(u.state.loaded=!1,u.children=[],u.children_d=[]),h[u.id]=u,o=0,i=u.children.length;i>o;o++)a=g(h[u.children[o]],u.id,r),s=h[a],u.children_d.push(a),s.children_d.length&&(u.children_d=u.children_d.concat(s.children_d));return delete e.data,delete e.children,h[u.id].original=e,u.state.selected&&c.push(u.id),u.id},v=function(e,n,r){r=r?r.concat():[],n&&r.unshift(n);var o,i,a,s,l,u=!1;do{u="j"+d+"_"+ ++f}while(h[u]);for(o in l={id:!1,text:"string"==typeof e?e:"",icon:"object"!=typeof e||e.icon===t||e.icon,parent:n,parents:r,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1},p)p.hasOwnProperty(o)&&(l.state[o]=p[o]);if(e&&e.id&&(l.id=e.id.toString()),e&&e.text&&(l.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(l.icon=e.data.jstree.icon),(l.icon===t||null===l.icon||""===l.icon)&&(l.icon=!0),e&&e.data&&(l.data=e.data,e.data.jstree))for(o in e.data.jstree)e.data.jstree.hasOwnProperty(o)&&(l.state[o]=e.data.jstree[o]);if(e&&"object"==typeof e.state)for(o in e.state)e.state.hasOwnProperty(o)&&(l.state[o]=e.state[o]);if(e&&"object"==typeof e.li_attr)for(o in e.li_attr)e.li_attr.hasOwnProperty(o)&&(l.li_attr[o]=e.li_attr[o]);if(l.li_attr.id&&!l.id&&(l.id=l.li_attr.id.toString()),l.id||(l.id=u),l.li_attr.id||(l.li_attr.id=l.id),e&&"object"==typeof e.a_attr)for(o in e.a_attr)e.a_attr.hasOwnProperty(o)&&(l.a_attr[o]=e.a_attr[o]);if(e&&e.children&&e.children.length){for(o=0,i=e.children.length;i>o;o++)a=v(e.children[o],l.id,r),s=h[a],l.children.push(a),s.children_d.length&&(l.children_d=l.children_d.concat(s.children_d));l.children_d=l.children_d.concat(l.children)}return e&&e.children&&!0===e.children&&(l.state.loaded=!1,l.children=[],l.children_d=[]),delete e.data,delete e.children,l.original=e,h[l.id]=l,l.state.selected&&c.push(l.id),l.id};if(a.length&&a[0].id!==t&&a[0].parent!==t){for(r=0,o=a.length;o>r;r++)a[r].children||(a[r].children=[]),a[r].state||(a[r].state={}),h[a[r].id.toString()]=a[r];for(r=0,o=a.length;o>r;r++)h[a[r].parent.toString()]?(h[a[r].parent.toString()].children.push(a[r].id.toString()),m.children_d.push(a[r].id.toString())):(this._data.core.last_error={error:"parse",plugin:"core",id:"core_07",reason:"Node with invalid parent",data:JSON.stringify({id:a[r].id.toString(),parent:a[r].parent.toString()})},this.settings.core.error.call(this,this._data.core.last_error));for(r=0,o=m.children.length;o>r;r++)n=g(h[m.children[r]],s,m.parents.concat()),u.push(n),h[n].children_d.length&&(u=u.concat(h[n].children_d));for(r=0,o=m.parents.length;o>r;r++)h[m.parents[r]].children_d=h[m.parents[r]].children_d.concat(u);i={cnt:f,mod:h,sel:y,par:s,dpc:u,add:c}}else{for(r=0,o=a.length;o>r;r++)(n=v(a[r],s,m.parents.concat()))&&(l.push(n),u.push(n),h[n].children_d.length&&(u=u.concat(h[n].children_d)));for(m.children=l,m.children_d=u,r=0,o=m.parents.length;o>r;r++)h[m.parents[r]].children_d=h[m.parents[r]].children_d.concat(u);i={cnt:f,mod:h,sel:y,par:s,dpc:u,add:c}}return"undefined"!=typeof window&&void 0!==window.document?i:void postMessage(i)},l=function(t,n){if(null!==this.element){this._cnt=t.cnt;var o,i=this._model.data;for(o in i)i.hasOwnProperty(o)&&i[o].state&&i[o].state.loading&&t.mod[o]&&(t.mod[o].state.loading=!0);if(this._model.data=t.mod,n){var a,s=t.add,l=t.sel,u=this._data.core.selected.slice();if(i=this._model.data,l.length!==u.length||e.vakata.array_unique(l.concat(u)).length!==l.length){for(o=0,a=l.length;a>o;o++)-1===e.inArray(l[o],s)&&-1===e.inArray(l[o],u)&&(i[l[o]].state.selected=!1);for(o=0,a=u.length;a>o;o++)-1===e.inArray(u[o],l)&&(i[u[o]].state.selected=!0)}}t.add.length&&(this._data.core.selected=this._data.core.selected.concat(t.add)),this.trigger("model",{nodes:t.dpc,parent:t.par}),t.par!==e.jstree.root?(this._node_changed(t.par),this.redraw()):this.redraw(!0),t.add.length&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),r.call(this,!0)}};if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker)try{null===this._wrk&&(this._wrk=window.URL.createObjectURL(new window.Blob(["self.onmessage = "+s.toString()],{type:"text/javascript"}))),!this._data.core.working||o?(this._data.core.working=!0,(i=new window.Worker(this._wrk)).onmessage=e.proxy(function(e){l.call(this,e.data,!0);try{i.terminate(),i=null}catch(e){}this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1},this),a.par?i.postMessage(a):this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1):this._data.core.worker_queue.push([t,n,r,!0])}catch(e){l.call(this,s(a),!1),this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}else l.call(this,s(a),!1)}},_parse_model_from_html:function(n,r,o){o=o?[].concat(o):[],r&&o.unshift(r);var i,a,s,l,u,c=this._model.data,p={id:!1,text:!1,icon:!0,parent:r,parents:o,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(s in this._model.default_state)this._model.default_state.hasOwnProperty(s)&&(p.state[s]=this._model.default_state[s]);if(l=e.vakata.attributes(n,!0),e.each(l,function(t,n){return!(n=e.trim(n)).length||(p.li_attr[t]=n,void("id"===t&&(p.id=n.toString())))}),(l=n.children("a").first()).length&&(l=e.vakata.attributes(l,!0),e.each(l,function(t,n){(n=e.trim(n)).length&&(p.a_attr[t]=n)})),(l=n.children("a").first().length?n.children("a").first().clone():n.clone()).children("ins, i, ul").remove(),l=l.html(),l=e("<div />").html(l),p.text=this.settings.core.force_text?l.text():l.html(),l=n.data(),p.data=l?e.extend(!0,{},l):null,p.state.opened=n.hasClass("jstree-open"),p.state.selected=n.children("a").hasClass("jstree-clicked"),p.state.disabled=n.children("a").hasClass("jstree-disabled"),p.data&&p.data.jstree)for(s in p.data.jstree)p.data.jstree.hasOwnProperty(s)&&(p.state[s]=p.data.jstree[s]);(l=n.children("a").children(".jstree-themeicon")).length&&(p.icon=!l.hasClass("jstree-themeicon-hidden")&&l.attr("rel")),p.state.icon!==t&&(p.icon=p.state.icon),(p.icon===t||null===p.icon||""===p.icon)&&(p.icon=!0),l=n.children("ul").children("li");do{u="j"+this._id+"_"+ ++this._cnt}while(c[u]);return p.id=p.li_attr.id?p.li_attr.id.toString():u,l.length?(l.each(e.proxy(function(t,n){i=this._parse_model_from_html(e(n),p.id,o),a=this._model.data[i],p.children.push(i),a.children_d.length&&(p.children_d=p.children_d.concat(a.children_d))},this)),p.children_d=p.children_d.concat(p.children)):n.hasClass("jstree-closed")&&(p.state.loaded=!1),p.li_attr.class&&(p.li_attr.class=p.li_attr.class.replace("jstree-closed","").replace("jstree-open","")),p.a_attr.class&&(p.a_attr.class=p.a_attr.class.replace("jstree-clicked","").replace("jstree-disabled","")),c[p.id]=p,p.state.selected&&this._data.core.selected.push(p.id),p.id},_parse_model_from_flat_json:function(e,n,r){r=r?r.concat():[],n&&r.unshift(n);var o,i,a,s,l=e.id.toString(),u=this._model.data,c=this._model.default_state,p={id:l,text:e.text||"",icon:e.icon===t||e.icon,parent:n,parents:r,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(o in c)c.hasOwnProperty(o)&&(p.state[o]=c[o]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(p.icon=e.data.jstree.icon),(p.icon===t||null===p.icon||""===p.icon)&&(p.icon=!0),e&&e.data&&(p.data=e.data,e.data.jstree))for(o in e.data.jstree)e.data.jstree.hasOwnProperty(o)&&(p.state[o]=e.data.jstree[o]);if(e&&"object"==typeof e.state)for(o in e.state)e.state.hasOwnProperty(o)&&(p.state[o]=e.state[o]);if(e&&"object"==typeof e.li_attr)for(o in e.li_attr)e.li_attr.hasOwnProperty(o)&&(p.li_attr[o]=e.li_attr[o]);if(p.li_attr.id||(p.li_attr.id=l),e&&"object"==typeof e.a_attr)for(o in e.a_attr)e.a_attr.hasOwnProperty(o)&&(p.a_attr[o]=e.a_attr[o]);for(e&&e.children&&!0===e.children&&(p.state.loaded=!1,p.children=[],p.children_d=[]),u[p.id]=p,o=0,i=p.children.length;i>o;o++)a=this._parse_model_from_flat_json(u[p.children[o]],p.id,r),s=u[a],p.children_d.push(a),s.children_d.length&&(p.children_d=p.children_d.concat(s.children_d));return delete e.data,delete e.children,u[p.id].original=e,p.state.selected&&this._data.core.selected.push(p.id),p.id},_parse_model_from_json:function(e,n,r){r=r?r.concat():[],n&&r.unshift(n);var o,i,a,s,l,u=!1,c=this._model.data,p=this._model.default_state;do{u="j"+this._id+"_"+ ++this._cnt}while(c[u]);for(o in l={id:!1,text:"string"==typeof e?e:"",icon:"object"!=typeof e||e.icon===t||e.icon,parent:n,parents:r,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1},p)p.hasOwnProperty(o)&&(l.state[o]=p[o]);if(e&&e.id&&(l.id=e.id.toString()),e&&e.text&&(l.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(l.icon=e.data.jstree.icon),(l.icon===t||null===l.icon||""===l.icon)&&(l.icon=!0),e&&e.data&&(l.data=e.data,e.data.jstree))for(o in e.data.jstree)e.data.jstree.hasOwnProperty(o)&&(l.state[o]=e.data.jstree[o]);if(e&&"object"==typeof e.state)for(o in e.state)e.state.hasOwnProperty(o)&&(l.state[o]=e.state[o]);if(e&&"object"==typeof e.li_attr)for(o in e.li_attr)e.li_attr.hasOwnProperty(o)&&(l.li_attr[o]=e.li_attr[o]);if(l.li_attr.id&&!l.id&&(l.id=l.li_attr.id.toString()),l.id||(l.id=u),l.li_attr.id||(l.li_attr.id=l.id),e&&"object"==typeof e.a_attr)for(o in e.a_attr)e.a_attr.hasOwnProperty(o)&&(l.a_attr[o]=e.a_attr[o]);if(e&&e.children&&e.children.length){for(o=0,i=e.children.length;i>o;o++)a=this._parse_model_from_json(e.children[o],l.id,r),s=c[a],l.children.push(a),s.children_d.length&&(l.children_d=l.children_d.concat(s.children_d));l.children_d=l.children_d.concat(l.children)}return e&&e.children&&!0===e.children&&(l.state.loaded=!1,l.children=[],l.children_d=[]),delete e.data,delete e.children,l.original=e,c[l.id]=l,l.state.selected&&this._data.core.selected.push(l.id),l.id},_redraw:function(){var t,n,r,o=this._model.force_full_redraw?this._model.data[e.jstree.root].children.concat([]):this._model.changed.concat([]),i=u.createElement("UL"),a=this._data.core.focused;for(n=0,r=o.length;r>n;n++)(t=this.redraw_node(o[n],!0,this._model.force_full_redraw))&&this._model.force_full_redraw&&i.appendChild(t);this._model.force_full_redraw&&(i.className=this.get_container_ul()[0].className,i.setAttribute("role","group"),this.element.empty().append(i)),null!==a&&this.settings.core.restore_focus&&((t=this.get_node(a,!0))&&t.length&&t.children(".jstree-anchor")[0]!==u.activeElement?t.children(".jstree-anchor").focus():this._data.core.focused=null),this._model.force_full_redraw=!1,this._model.changed=[],this.trigger("redraw",{nodes:o})},redraw:function(e){e&&(this._model.force_full_redraw=!0),this._redraw()},draw_children:function(t){var n=this.get_node(t),r=!1,o=!1,i=!1,a=u;if(!n)return!1;if(n.id===e.jstree.root)return this.redraw(!0);if(!(t=this.get_node(t,!0))||!t.length)return!1;if(t.children(".jstree-children").remove(),t=t[0],n.children.length&&n.state.loaded){for((i=a.createElement("UL")).setAttribute("role","group"),i.className="jstree-children",r=0,o=n.children.length;o>r;r++)i.appendChild(this.redraw_node(n.children[r],!0,!0));t.appendChild(i)}},redraw_node:function(t,n,r,o){var i=this.get_node(t),a=!1,s=!1,l=!1,c=!1,p=!1,d=!1,f="",h=u,m=this._model.data,y=!1,g=null,v=0,b=0,S=!1,_=!1;if(!i)return!1;if(i.id===e.jstree.root)return this.redraw(!0);if(n=n||0===i.children.length,t=u.querySelector?this.element[0].querySelector("#"+(-1!=="0123456789".indexOf(i.id[0])?"\\3"+i.id[0]+" "+i.id.substr(1).replace(e.jstree.idregex,"\\$&"):i.id.replace(e.jstree.idregex,"\\$&"))):u.getElementById(i.id))t=e(t),r||((a=t.parent().parent()[0])===this.element[0]&&(a=null),s=t.index()),n||!i.children.length||t.children(".jstree-children").length||(n=!0),n||(l=t.children(".jstree-children")[0]),y=t.children(".jstree-anchor")[0]===u.activeElement,t.remove();else if(n=!0,!r){if(!(null===(a=i.parent!==e.jstree.root?e("#"+i.parent.replace(e.jstree.idregex,"\\$&"),this.element)[0]:null)||a&&m[i.parent].state.opened))return!1;s=e.inArray(i.id,null===a?m[e.jstree.root].children:m[i.parent].children)}for(c in t=this._data.core.node.cloneNode(!0),f="jstree-node ",i.li_attr)if(i.li_attr.hasOwnProperty(c)){if("id"===c)continue;"class"!==c?t.setAttribute(c,i.li_attr[c]):f+=i.li_attr[c]}for(i.a_attr.id||(i.a_attr.id=i.id+"_anchor"),t.setAttribute("aria-selected",!!i.state.selected),t.setAttribute("aria-level",i.parents.length),t.setAttribute("aria-labelledby",i.a_attr.id),i.state.disabled&&t.setAttribute("aria-disabled",!0),c=0,p=i.children.length;p>c;c++)if(!m[i.children[c]].state.hidden){S=!0;break}if(null!==i.parent&&m[i.parent]&&!i.state.hidden&&(c=e.inArray(i.id,m[i.parent].children),_=i.id,-1!==c))for(c++,p=m[i.parent].children.length;p>c&&(m[m[i.parent].children[c]].state.hidden||(_=m[i.parent].children[c]),_===i.id);c++);for(p in i.state.hidden&&(f+=" jstree-hidden"),i.state.loading&&(f+=" jstree-loading"),i.state.loaded&&!S?f+=" jstree-leaf":(f+=i.state.opened&&i.state.loaded?" jstree-open":" jstree-closed",t.setAttribute("aria-expanded",i.state.opened&&i.state.loaded)),_===i.id&&(f+=" jstree-last"),t.id=i.id,t.className=f,f=(i.state.selected?" jstree-clicked":"")+(i.state.disabled?" jstree-disabled":""),i.a_attr)if(i.a_attr.hasOwnProperty(p)){if("href"===p&&"#"===i.a_attr[p])continue;"class"!==p?t.childNodes[1].setAttribute(p,i.a_attr[p]):f+=" "+i.a_attr[p]}if(f.length&&(t.childNodes[1].className="jstree-anchor "+f),(i.icon&&!0!==i.icon||!1===i.icon)&&(!1===i.icon?t.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden":-1===i.icon.indexOf("/")&&-1===i.icon.indexOf(".")?t.childNodes[1].childNodes[0].className+=" "+i.icon+" jstree-themeicon-custom":(t.childNodes[1].childNodes[0].style.backgroundImage='url("'+i.icon+'")',t.childNodes[1].childNodes[0].style.backgroundPosition="center center",t.childNodes[1].childNodes[0].style.backgroundSize="auto",t.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom")),this.settings.core.force_text?t.childNodes[1].appendChild(h.createTextNode(i.text)):t.childNodes[1].innerHTML+=i.text,n&&i.children.length&&(i.state.opened||o)&&i.state.loaded){for((d=h.createElement("UL")).setAttribute("role","group"),d.className="jstree-children",c=0,p=i.children.length;p>c;c++)d.appendChild(this.redraw_node(i.children[c],n,!0));t.appendChild(d)}if(l&&t.appendChild(l),!r){for(a||(a=this.element[0]),c=0,p=a.childNodes.length;p>c;c++)if(a.childNodes[c]&&a.childNodes[c].className&&-1!==a.childNodes[c].className.indexOf("jstree-children")){g=a.childNodes[c];break}g||((g=h.createElement("UL")).setAttribute("role","group"),g.className="jstree-children",a.appendChild(g)),s<(a=g).childNodes.length?a.insertBefore(t,a.childNodes[s]):a.appendChild(t),y&&(v=this.element[0].scrollTop,b=this.element[0].scrollLeft,t.childNodes[1].focus(),this.element[0].scrollTop=v,this.element[0].scrollLeft=b)}return i.state.opened&&!i.state.loaded&&(i.state.opened=!1,setTimeout(e.proxy(function(){this.open_node(i.id,!1,0)},this),0)),t},open_node:function(n,r,o){var i,a,s,l;if(e.isArray(n)){for(n=n.slice(),i=0,a=n.length;a>i;i++)this.open_node(n[i],r,o);return!0}return!(!(n=this.get_node(n))||n.id===e.jstree.root)&&(o=o===t?this.settings.core.animation:o,this.is_closed(n)?this.is_loaded(n)?(s=this.get_node(n,!0),l=this,s.length&&(o&&s.children(".jstree-children").length&&s.children(".jstree-children").stop(!0,!0),n.children.length&&!this._firstChild(s.children(".jstree-children")[0])&&this.draw_children(n),o?(this.trigger("before_open",{node:n}),s.children(".jstree-children").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded",!0).children(".jstree-children").stop(!0,!0).slideDown(o,function(){this.style.display="",l.element&&l.trigger("after_open",{node:n})})):(this.trigger("before_open",{node:n}),s[0].className=s[0].className.replace("jstree-closed","jstree-open"),s[0].setAttribute("aria-expanded",!0))),n.state.opened=!0,r&&r.call(this,n,!0),s.length||this.trigger("before_open",{node:n}),this.trigger("open_node",{node:n}),o&&s.length||this.trigger("after_open",{node:n}),!0):this.is_loading(n)?setTimeout(e.proxy(function(){this.open_node(n,r,o)},this),500):void this.load_node(n,function(e,t){return t?this.open_node(e,r,o):!!r&&r.call(this,e,!1)}):(r&&r.call(this,n,!1),!1))},_open_to:function(t){if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;var n,r,o=t.parents;for(n=0,r=o.length;r>n;n+=1)n!==e.jstree.root&&this.open_node(o[n],!1,0);return e("#"+t.id.replace(e.jstree.idregex,"\\$&"),this.element)},close_node:function(n,r){var o,i,a,s;if(e.isArray(n)){for(n=n.slice(),o=0,i=n.length;i>o;o++)this.close_node(n[o],r);return!0}return!(!(n=this.get_node(n))||n.id===e.jstree.root)&&(!this.is_closed(n)&&(r=r===t?this.settings.core.animation:r,a=this,s=this.get_node(n,!0),n.state.opened=!1,this.trigger("close_node",{node:n}),void(s.length?r?s.children(".jstree-children").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded",!1).children(".jstree-children").stop(!0,!0).slideUp(r,function(){this.style.display="",s.children(".jstree-children").remove(),a.element&&a.trigger("after_close",{node:n})}):(s[0].className=s[0].className.replace("jstree-open","jstree-closed"),s.attr("aria-expanded",!1).children(".jstree-children").remove(),this.trigger("after_close",{node:n})):this.trigger("after_close",{node:n}))))},toggle_node:function(t){var n,r;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;r>n;n++)this.toggle_node(t[n]);return!0}return this.is_closed(t)?this.open_node(t):this.is_open(t)?this.close_node(t):void 0},open_all:function(t,n,r){if(t||(t=e.jstree.root),!(t=this.get_node(t)))return!1;var o,i,a,s=t.id===e.jstree.root?this.get_container_ul():this.get_node(t,!0);if(!s.length){for(o=0,i=t.children_d.length;i>o;o++)this.is_closed(this._model.data[t.children_d[o]])&&(this._model.data[t.children_d[o]].state.opened=!0);return this.trigger("open_all",{node:t})}r=r||s,a=this,(s=this.is_closed(t)?s.find(".jstree-closed").addBack():s.find(".jstree-closed")).each(function(){a.open_node(this,function(e,t){t&&this.is_parent(e)&&this.open_all(e,n,r)},n||0)}),0===r.find(".jstree-closed").length&&this.trigger("open_all",{node:this.get_node(r)})},close_all:function(t,n){if(t||(t=e.jstree.root),!(t=this.get_node(t)))return!1;var r,o,i=t.id===e.jstree.root?this.get_container_ul():this.get_node(t,!0),a=this;for(i.length&&(i=this.is_open(t)?i.find(".jstree-open").addBack():i.find(".jstree-open"),e(i.get().reverse()).each(function(){a.close_node(this,n||0)})),r=0,o=t.children_d.length;o>r;r++)this._model.data[t.children_d[r]].state.opened=!1;this.trigger("close_all",{node:t})},is_disabled:function(e){return(e=this.get_node(e))&&e.state&&e.state.disabled},enable_node:function(t){var n,r;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;r>n;n++)this.enable_node(t[n]);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(t.state.disabled=!1,this.get_node(t,!0).children(".jstree-anchor").removeClass("jstree-disabled").attr("aria-disabled",!1),void this.trigger("enable_node",{node:t}))},disable_node:function(t){var n,r;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;r>n;n++)this.disable_node(t[n]);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(t.state.disabled=!0,this.get_node(t,!0).children(".jstree-anchor").addClass("jstree-disabled").attr("aria-disabled",!0),void this.trigger("disable_node",{node:t}))},is_hidden:function(e){return!0===(e=this.get_node(e)).state.hidden},hide_node:function(t,n){var r,o;if(e.isArray(t)){for(t=t.slice(),r=0,o=t.length;o>r;r++)this.hide_node(t[r],!0);return n||this.redraw(),!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&void(t.state.hidden||(t.state.hidden=!0,this._node_changed(t.parent),n||this.redraw(),this.trigger("hide_node",{node:t})))},show_node:function(t,n){var r,o;if(e.isArray(t)){for(t=t.slice(),r=0,o=t.length;o>r;r++)this.show_node(t[r],!0);return n||this.redraw(),!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&void(t.state.hidden&&(t.state.hidden=!1,this._node_changed(t.parent),n||this.redraw(),this.trigger("show_node",{node:t})))},hide_all:function(t){var n,r=this._model.data,o=[];for(n in r)r.hasOwnProperty(n)&&n!==e.jstree.root&&!r[n].state.hidden&&(r[n].state.hidden=!0,o.push(n));return this._model.force_full_redraw=!0,t||this.redraw(),this.trigger("hide_all",{nodes:o}),o},show_all:function(t){var n,r=this._model.data,o=[];for(n in r)r.hasOwnProperty(n)&&n!==e.jstree.root&&r[n].state.hidden&&(r[n].state.hidden=!1,o.push(n));return this._model.force_full_redraw=!0,t||this.redraw(),this.trigger("show_all",{nodes:o}),o},activate_node:function(e,n){if(this.is_disabled(e))return!1;if(n&&"object"==typeof n||(n={}),this._data.core.last_clicked=this._data.core.last_clicked&&this._data.core.last_clicked.id!==t?this.get_node(this._data.core.last_clicked.id):null,this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected&&(this._data.core.last_clicked=null),!this._data.core.last_clicked&&this._data.core.selected.length&&(this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1])),this.settings.core.multiple&&(n.metaKey||n.ctrlKey||n.shiftKey)&&(!n.shiftKey||this._data.core.last_clicked&&this.get_parent(e)&&this.get_parent(e)===this._data.core.last_clicked.parent))if(n.shiftKey){var r,o,i=this.get_node(e).id,a=this._data.core.last_clicked.id,s=this.get_node(this._data.core.last_clicked.parent).children,l=!1;for(r=0,o=s.length;o>r;r+=1)s[r]===i&&(l=!l),s[r]===a&&(l=!l),this.is_disabled(s[r])||!l&&s[r]!==i&&s[r]!==a?this.deselect_node(s[r],!0,n):this.is_hidden(s[r])||this.select_node(s[r],!0,!1,n);this.trigger("changed",{action:"select_node",node:this.get_node(e),selected:this._data.core.selected,event:n})}else this.is_selected(e)?this.deselect_node(e,!1,n):this.select_node(e,!1,!1,n);else!this.settings.core.multiple&&(n.metaKey||n.ctrlKey||n.shiftKey)&&this.is_selected(e)?this.deselect_node(e,!1,n):(this.deselect_all(!0),this.select_node(e,!1,!1,n),this._data.core.last_clicked=this.get_node(e));this.trigger("activate_node",{node:this.get_node(e),event:n})},hover_node:function(e){if(!(e=this.get_node(e,!0))||!e.length||e.children(".jstree-hovered").length)return!1;var t=this.element.find(".jstree-hovered"),n=this.element;t&&t.length&&this.dehover_node(t),e.children(".jstree-anchor").addClass("jstree-hovered"),this.trigger("hover_node",{node:this.get_node(e)}),setTimeout(function(){n.attr("aria-activedescendant",e[0].id)},0)},dehover_node:function(e){return!!((e=this.get_node(e,!0))&&e.length&&e.children(".jstree-hovered").length)&&(e.children(".jstree-anchor").removeClass("jstree-hovered"),void this.trigger("dehover_node",{node:this.get_node(e)}))},select_node:function(t,n,r,o){var i,a,s;if(e.isArray(t)){for(t=t.slice(),a=0,s=t.length;s>a;a++)this.select_node(t[a],n,r,o);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(i=this.get_node(t,!0),void(t.state.selected||(t.state.selected=!0,this._data.core.selected.push(t.id),r||(i=this._open_to(t)),i&&i.length&&i.attr("aria-selected",!0).children(".jstree-anchor").addClass("jstree-clicked"),this.trigger("select_node",{node:t,selected:this._data.core.selected,event:o}),n||this.trigger("changed",{action:"select_node",node:t,selected:this._data.core.selected,event:o}))))},deselect_node:function(t,n,r){var o,i,a;if(e.isArray(t)){for(t=t.slice(),o=0,i=t.length;i>o;o++)this.deselect_node(t[o],n,r);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(a=this.get_node(t,!0),void(t.state.selected&&(t.state.selected=!1,this._data.core.selected=e.vakata.array_remove_item(this._data.core.selected,t.id),a.length&&a.attr("aria-selected",!1).children(".jstree-anchor").removeClass("jstree-clicked"),this.trigger("deselect_node",{node:t,selected:this._data.core.selected,event:r}),n||this.trigger("changed",{action:"deselect_node",node:t,selected:this._data.core.selected,event:r}))))},select_all:function(t){var n,r,o=this._data.core.selected.concat([]);for(this._data.core.selected=this._model.data[e.jstree.root].children_d.concat(),n=0,r=this._data.core.selected.length;r>n;n++)this._model.data[this._data.core.selected[n]]&&(this._model.data[this._data.core.selected[n]].state.selected=!0);this.redraw(!0),this.trigger("select_all",{selected:this._data.core.selected}),t||this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:o})},deselect_all:function(e){var t,n,r=this._data.core.selected.concat([]);for(t=0,n=this._data.core.selected.length;n>t;t++)this._model.data[this._data.core.selected[t]]&&(this._model.data[this._data.core.selected[t]].state.selected=!1);this._data.core.selected=[],this.element.find(".jstree-clicked").removeClass("jstree-clicked").parent().attr("aria-selected",!1),this.trigger("deselect_all",{selected:this._data.core.selected,node:r}),e||this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:r})},is_selected:function(t){return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&t.state.selected},get_selected:function(t){return t?e.map(this._data.core.selected,e.proxy(function(e){return this.get_node(e)},this)):this._data.core.selected.slice()},get_top_selected:function(t){var n,r,o,i,a=this.get_selected(!0),s={};for(n=0,r=a.length;r>n;n++)s[a[n].id]=a[n];for(n=0,r=a.length;r>n;n++)for(o=0,i=a[n].children_d.length;i>o;o++)s[a[n].children_d[o]]&&delete s[a[n].children_d[o]];for(n in a=[],s)s.hasOwnProperty(n)&&a.push(n);return t?e.map(a,e.proxy(function(e){return this.get_node(e)},this)):a},get_bottom_selected:function(t){var n,r,o=this.get_selected(!0),i=[];for(n=0,r=o.length;r>n;n++)o[n].children.length||i.push(o[n].id);return t?e.map(i,e.proxy(function(e){return this.get_node(e)},this)):i},get_state:function(){var t,n={core:{open:[],loaded:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},selected:[]}};for(t in this._model.data)this._model.data.hasOwnProperty(t)&&t!==e.jstree.root&&(this._model.data[t].state.loaded&&this.settings.core.loaded_state&&n.core.loaded.push(t),this._model.data[t].state.opened&&n.core.open.push(t),this._model.data[t].state.selected&&n.core.selected.push(t));return n},set_state:function(n,r){if(n){if(n.core&&n.core.selected&&n.core.initial_selection===t&&(n.core.initial_selection=this._data.core.selected.concat([]).sort().join(",")),n.core){var o,i;if(n.core.loaded)return this.settings.core.loaded_state&&e.isArray(n.core.loaded)&&n.core.loaded.length?this._load_nodes(n.core.loaded,function(e){delete n.core.loaded,this.set_state(n,r)}):(delete n.core.loaded,this.set_state(n,r)),!1;if(n.core.open)return e.isArray(n.core.open)&&n.core.open.length?this._load_nodes(n.core.open,function(e){this.open_node(e,!1,0),delete n.core.open,this.set_state(n,r)}):(delete n.core.open,this.set_state(n,r)),!1;if(n.core.scroll)return n.core.scroll&&n.core.scroll.left!==t&&this.element.scrollLeft(n.core.scroll.left),n.core.scroll&&n.core.scroll.top!==t&&this.element.scrollTop(n.core.scroll.top),delete n.core.scroll,this.set_state(n,r),!1;if(n.core.selected)return o=this,(n.core.initial_selection===t||n.core.initial_selection===this._data.core.selected.concat([]).sort().join(","))&&(this.deselect_all(),e.each(n.core.selected,function(e,t){o.select_node(t,!1,!0)})),delete n.core.initial_selection,delete n.core.selected,this.set_state(n,r),!1;for(i in n)n.hasOwnProperty(i)&&"core"!==i&&-1===e.inArray(i,this.settings.plugins)&&delete n[i];if(e.isEmptyObject(n.core))return delete n.core,this.set_state(n,r),!1}return!e.isEmptyObject(n)||(n=null,r&&r.call(this),this.trigger("set_state"),!1)}return!1},refresh:function(t,n){this._data.core.state=!0===n?{}:this.get_state(),n&&e.isFunction(n)&&(this._data.core.state=n.call(this,this._data.core.state)),this._cnt=0,this._model.data={},this._model.data[e.jstree.root]={id:e.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this._data.core.selected=[],this._data.core.last_clicked=null,this._data.core.focused=null;var r=this.get_container_ul()[0].className;t||(this.element.html("<ul class='"+r+"' role='group'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='treeitem' id='j"+this._id+"_loading'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading")),this.load_node(e.jstree.root,function(t,n){n&&(this.get_container_ul()[0].className=r,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.set_state(e.extend(!0,{},this._data.core.state),function(){this.trigger("refresh")})),this._data.core.state=null})},refresh_node:function(t){if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;var n=[],r=[],o=this._data.core.selected.concat([]);r.push(t.id),!0===t.state.opened&&n.push(t.id),this.get_node(t,!0).find(".jstree-open").each(function(){r.push(this.id),n.push(this.id)}),this._load_nodes(r,e.proxy(function(e){this.open_node(n,!1,0),this.select_node(o),this.trigger("refresh_node",{node:t,nodes:e})},this),!1,!0)},set_id:function(t,n){if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;var r,o,i=this._model.data,a=t.id;for(n=n.toString(),i[t.parent].children[e.inArray(t.id,i[t.parent].children)]=n,r=0,o=t.parents.length;o>r;r++)i[t.parents[r]].children_d[e.inArray(t.id,i[t.parents[r]].children_d)]=n;for(r=0,o=t.children.length;o>r;r++)i[t.children[r]].parent=n;for(r=0,o=t.children_d.length;o>r;r++)i[t.children_d[r]].parents[e.inArray(t.id,i[t.children_d[r]].parents)]=n;return-1!==(r=e.inArray(t.id,this._data.core.selected))&&(this._data.core.selected[r]=n),(r=this.get_node(t.id,!0))&&(r.attr("id",n),this.element.attr("aria-activedescendant")===t.id&&this.element.attr("aria-activedescendant",n)),delete i[t.id],t.id=n,t.li_attr.id=n,i[n]=t,this.trigger("set_id",{node:t,new:t.id,old:a}),!0},get_text:function(t){return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&t.text},set_text:function(t,n){var r,o;if(e.isArray(t)){for(t=t.slice(),r=0,o=t.length;o>r;r++)this.set_text(t[r],n);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(t.text=n,this.get_node(t,!0).length&&this.redraw_node(t.id),this.trigger("set_text",{obj:t,text:n}),!0)},get_json:function(t,n,r){if(!(t=this.get_node(t||e.jstree.root)))return!1;n&&n.flat&&!r&&(r=[]);var o,i,a={id:t.id,text:t.text,icon:this.get_icon(t),li_attr:e.extend(!0,{},t.li_attr),a_attr:e.extend(!0,{},t.a_attr),state:{},data:(!n||!n.no_data)&&e.extend(!0,e.isArray(t.data)?[]:{},t.data)};if(n&&n.flat?a.parent=t.parent:a.children=[],n&&n.no_state)delete a.state;else for(o in t.state)t.state.hasOwnProperty(o)&&(a.state[o]=t.state[o]);if(n&&n.no_li_attr&&delete a.li_attr,n&&n.no_a_attr&&delete a.a_attr,n&&n.no_id&&(delete a.id,a.li_attr&&a.li_attr.id&&delete a.li_attr.id,a.a_attr&&a.a_attr.id&&delete a.a_attr.id),n&&n.flat&&t.id!==e.jstree.root&&r.push(a),!n||!n.no_children)for(o=0,i=t.children.length;i>o;o++)n&&n.flat?this.get_json(t.children[o],n,r):a.children.push(this.get_json(t.children[o],n));return n&&n.flat?r:t.id===e.jstree.root?a.children:a},create_node:function(n,r,o,i,a){if(null===n&&(n=e.jstree.root),!(n=this.get_node(n)))return!1;if(!(o=o===t?"last":o).toString().match(/^(before|after)$/)&&!a&&!this.is_loaded(n))return this.load_node(n,function(){this.create_node(n,r,o,i,!0)});var s,l,u,c;switch(r||(r={text:this.get_string("New node")}),(r="string"==typeof r?{text:r}:e.extend(!0,{},r)).text===t&&(r.text=this.get_string("New node")),n.id===e.jstree.root&&("before"===o&&(o="first"),"after"===o&&(o="last")),o){case"before":s=this.get_node(n.parent),o=e.inArray(n.id,s.children),n=s;break;case"after":s=this.get_node(n.parent),o=e.inArray(n.id,s.children)+1,n=s;break;case"inside":case"first":o=0;break;case"last":o=n.children.length;break;default:o||(o=0)}if(o>n.children.length&&(o=n.children.length),r.id||(r.id=!0),!this.check("create_node",r,n,o))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(!0===r.id&&delete r.id,!(r=this._parse_model_from_json(r,n.id,n.parents.concat())))return!1;for(s=this.get_node(r),(l=[]).push(r),l=l.concat(s.children_d),this.trigger("model",{nodes:l,parent:n.id}),n.children_d=n.children_d.concat(l),u=0,c=n.parents.length;c>u;u++)this._model.data[n.parents[u]].children_d=this._model.data[n.parents[u]].children_d.concat(l);for(r=s,s=[],u=0,c=n.children.length;c>u;u++)s[u>=o?u+1:u]=n.children[u];return s[o]=r.id,n.children=s,this.redraw_node(n,!0),this.trigger("create_node",{node:this.get_node(r),parent:n.id,position:o}),i&&i.call(this,this.get_node(r)),r.id},rename_node:function(t,n){var r,o,i;if(e.isArray(t)){for(t=t.slice(),r=0,o=t.length;o>r;r++)this.rename_node(t[r],n);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(i=t.text,this.check("rename_node",t,this.get_parent(t),n)?(this.set_text(t,n),this.trigger("rename_node",{node:t,text:n,old:i}),!0):(this.settings.core.error.call(this,this._data.core.last_error),!1))},delete_node:function(t){var n,r,o,i,a,s,l,u,c,p,d,f;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;r>n;n++)this.delete_node(t[n]);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;if(o=this.get_node(t.parent),i=e.inArray(t.id,o.children),p=!1,!this.check("delete_node",t,o,i))return this.settings.core.error.call(this,this._data.core.last_error),!1;for(-1!==i&&(o.children=e.vakata.array_remove(o.children,i)),(a=t.children_d.concat([])).push(t.id),s=0,l=t.parents.length;l>s;s++)this._model.data[t.parents[s]].children_d=e.vakata.array_filter(this._model.data[t.parents[s]].children_d,function(t){return-1===e.inArray(t,a)});for(u=0,c=a.length;c>u;u++)if(this._model.data[a[u]].state.selected){p=!0;break}for(p&&(this._data.core.selected=e.vakata.array_filter(this._data.core.selected,function(t){return-1===e.inArray(t,a)})),this.trigger("delete_node",{node:t,parent:o.id}),p&&this.trigger("changed",{action:"delete_node",node:t,selected:this._data.core.selected,parent:o.id}),u=0,c=a.length;c>u;u++)delete this._model.data[a[u]];return-1!==e.inArray(this._data.core.focused,a)&&(this._data.core.focused=null,d=this.element[0].scrollTop,f=this.element[0].scrollLeft,o.id===e.jstree.root?this._model.data[e.jstree.root].children[0]&&this.get_node(this._model.data[e.jstree.root].children[0],!0).children(".jstree-anchor").focus():this.get_node(o,!0).children(".jstree-anchor").focus(),this.element[0].scrollTop=d,this.element[0].scrollLeft=f),this.redraw_node(o,!0),!0},check:function(t,n,r,o,i){n=n&&n.id?n:this.get_node(n),r=r&&r.id?r:this.get_node(r);var a=t.match(/^move_node|copy_node|create_node$/i)?r:n,s=this.settings.core.check_callback;return"move_node"!==t&&"copy_node"!==t||i&&i.is_multi||n.id!==r.id&&("move_node"!==t||e.inArray(n.id,r.children)!==o)&&-1===e.inArray(r.id,n.children_d)?(a&&a.data&&(a=a.data),a&&a.functions&&(!1===a.functions[t]||!0===a.functions[t])?(!1===a.functions[t]&&(this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+t,data:JSON.stringify({chk:t,pos:o,obj:!(!n||!n.id)&&n.id,par:!(!r||!r.id)&&r.id})}),a.functions[t]):!(!1===s||e.isFunction(s)&&!1===s.call(this,t,n,r,o,i)||s&&!1===s[t])||(this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+t,data:JSON.stringify({chk:t,pos:o,obj:!(!n||!n.id)&&n.id,par:!(!r||!r.id)&&r.id})},!1)):(this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:t,pos:o,obj:!(!n||!n.id)&&n.id,par:!(!r||!r.id)&&r.id})},!1)},last_error:function(){return this._data.core.last_error},move_node:function(n,r,o,i,a,s,l){var u,c,p,d,f,h,m,y,g,v,b,S,_,w;if(r=this.get_node(r),o=o===t?0:o,!r)return!1;if(!o.toString().match(/^(before|after)$/)&&!a&&!this.is_loaded(r))return this.load_node(r,function(){this.move_node(n,r,o,i,!0,!1,l)});if(e.isArray(n)){if(1!==n.length){for(u=0,c=n.length;c>u;u++)(g=this.move_node(n[u],r,o,i,a,!1,l))&&(r=g,o="after");return this.redraw(),!0}n=n[0]}if(!(n=n&&n.id?n:this.get_node(n))||n.id===e.jstree.root)return!1;if(p=(n.parent||e.jstree.root).toString(),f=o.toString().match(/^(before|after)$/)&&r.id!==e.jstree.root?this.get_node(r.parent):r,h=l||(this._model.data[n.id]?this:e.jstree.reference(n.id)),m=!h||!h._id||this._id!==h._id,d=h&&h._id&&p&&h._model.data[p]&&h._model.data[p].children?e.inArray(n.id,h._model.data[p].children):-1,h&&h._id&&(n=h._model.data[n.id]),m)return!!(g=this.copy_node(n,r,o,i,a,!1,l))&&(h&&h.delete_node(n),g);switch(r.id===e.jstree.root&&("before"===o&&(o="first"),"after"===o&&(o="last")),o){case"before":o=e.inArray(r.id,f.children);break;case"after":o=e.inArray(r.id,f.children)+1;break;case"inside":case"first":o=0;break;case"last":o=f.children.length;break;default:o||(o=0)}if(o>f.children.length&&(o=f.children.length),!this.check("move_node",n,f,o,{core:!0,origin:l,is_multi:h&&h._id&&h._id!==this._id,is_foreign:!h||!h._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(n.parent===f.id){for(y=f.children.concat(),-1!==(g=e.inArray(n.id,y))&&(y=e.vakata.array_remove(y,g),o>g&&o--),g=[],v=0,b=y.length;b>v;v++)g[v>=o?v+1:v]=y[v];g[o]=n.id,f.children=g,this._node_changed(f.id),this.redraw(f.id===e.jstree.root)}else{for((g=n.children_d.concat()).push(n.id),v=0,b=n.parents.length;b>v;v++){for(y=[],w=h._model.data[n.parents[v]].children_d,S=0,_=w.length;_>S;S++)-1===e.inArray(w[S],g)&&y.push(w[S]);h._model.data[n.parents[v]].children_d=y}for(h._model.data[p].children=e.vakata.array_remove_item(h._model.data[p].children,n.id),v=0,b=f.parents.length;b>v;v++)this._model.data[f.parents[v]].children_d=this._model.data[f.parents[v]].children_d.concat(g);for(y=[],v=0,b=f.children.length;b>v;v++)y[v>=o?v+1:v]=f.children[v];for(y[o]=n.id,f.children=y,f.children_d.push(n.id),f.children_d=f.children_d.concat(n.children_d),n.parent=f.id,(g=f.parents.concat()).unshift(f.id),w=n.parents.length,n.parents=g,g=g.concat(),v=0,b=n.children_d.length;b>v;v++)this._model.data[n.children_d[v]].parents=this._model.data[n.children_d[v]].parents.slice(0,-1*w),Array.prototype.push.apply(this._model.data[n.children_d[v]].parents,g);(p===e.jstree.root||f.id===e.jstree.root)&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||(this._node_changed(p),this._node_changed(f.id)),s||this.redraw()}return i&&i.call(this,n,f,o),this.trigger("move_node",{node:n,parent:f.id,position:o,old_parent:p,old_position:d,is_multi:h&&h._id&&h._id!==this._id,is_foreign:!h||!h._id,old_instance:h,new_instance:this}),n.id},copy_node:function(n,r,o,i,a,s,l){var u,c,p,d,f,h,m,y,g,v;if(r=this.get_node(r),o=o===t?0:o,!r)return!1;if(!o.toString().match(/^(before|after)$/)&&!a&&!this.is_loaded(r))return this.load_node(r,function(){this.copy_node(n,r,o,i,!0,!1,l)});if(e.isArray(n)){if(1!==n.length){for(u=0,c=n.length;c>u;u++)(d=this.copy_node(n[u],r,o,i,a,!0,l))&&(r=d,o="after");return this.redraw(),!0}n=n[0]}if(!(n=n&&n.id?n:this.get_node(n))||n.id===e.jstree.root)return!1;switch(y=(n.parent||e.jstree.root).toString(),g=o.toString().match(/^(before|after)$/)&&r.id!==e.jstree.root?this.get_node(r.parent):r,v=l||(this._model.data[n.id]?this:e.jstree.reference(n.id)),!v||!v._id||this._id!==v._id,v&&v._id&&(n=v._model.data[n.id]),r.id===e.jstree.root&&("before"===o&&(o="first"),"after"===o&&(o="last")),o){case"before":o=e.inArray(r.id,g.children);break;case"after":o=e.inArray(r.id,g.children)+1;break;case"inside":case"first":o=0;break;case"last":o=g.children.length;break;default:o||(o=0)}if(o>g.children.length&&(o=g.children.length),!this.check("copy_node",n,g,o,{core:!0,origin:l,is_multi:v&&v._id&&v._id!==this._id,is_foreign:!v||!v._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(!(m=v?v.get_json(n,{no_id:!0,no_data:!0,no_state:!0}):n))return!1;if(!0===m.id&&delete m.id,!(m=this._parse_model_from_json(m,g.id,g.parents.concat())))return!1;for(d=this.get_node(m),n&&n.state&&!1===n.state.loaded&&(d.state.loaded=!1),(p=[]).push(m),p=p.concat(d.children_d),this.trigger("model",{nodes:p,parent:g.id}),f=0,h=g.parents.length;h>f;f++)this._model.data[g.parents[f]].children_d=this._model.data[g.parents[f]].children_d.concat(p);for(p=[],f=0,h=g.children.length;h>f;f++)p[f>=o?f+1:f]=g.children[f];return p[o]=d.id,g.children=p,g.children_d.push(d.id),g.children_d=g.children_d.concat(d.children_d),g.id===e.jstree.root&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||this._node_changed(g.id),s||this.redraw(g.id===e.jstree.root),i&&i.call(this,d,g,o),this.trigger("copy_node",{node:d,original:n,parent:g.id,position:o,old_parent:y,old_position:v&&v._id&&y&&v._model.data[y]&&v._model.data[y].children?e.inArray(n.id,v._model.data[y].children):-1,is_multi:v&&v._id&&v._id!==this._id,is_foreign:!v||!v._id,old_instance:v,new_instance:this}),d.id},cut:function(t){if(t||(t=this._data.core.selected.concat()),e.isArray(t)||(t=[t]),!t.length)return!1;var n,r,s,l=[];for(r=0,s=t.length;s>r;r++)(n=this.get_node(t[r]))&&n.id&&n.id!==e.jstree.root&&l.push(n);return!!l.length&&(o=l,a=this,i="move_node",void this.trigger("cut",{node:t}))},copy:function(t){if(t||(t=this._data.core.selected.concat()),e.isArray(t)||(t=[t]),!t.length)return!1;var n,r,s,l=[];for(r=0,s=t.length;s>r;r++)(n=this.get_node(t[r]))&&n.id&&n.id!==e.jstree.root&&l.push(n);return!!l.length&&(o=l,a=this,i="copy_node",void this.trigger("copy",{node:t}))},get_buffer:function(){return{mode:i,node:o,inst:a}},can_paste:function(){return!1!==i&&!1!==o},paste:function(e,t){return!!((e=this.get_node(e))&&i&&i.match(/^(copy_node|move_node)$/)&&o)&&(this[i](o,e,t,!1,!1,!1,a)&&this.trigger("paste",{parent:e.id,node:o,mode:i}),o=!1,i=!1,void(a=!1))},clear_buffer:function(){o=!1,i=!1,a=!1,this.trigger("clear_buffer")},edit:function(t,n,r){var o,i,a,s,l,c,p,d,f,h=!1;return!!(t=this.get_node(t))&&(this.check("edit",t,this.get_parent(t))?(f=t,n="string"==typeof n?n:t.text,this.set_text(t,""),t=this._open_to(t),f.text=n,o=this._data.core.rtl,i=this.element.width(),this._data.core.focused=f.id,a=t.children(".jstree-anchor").focus(),s=e("<span>"),l=n,c=e("<div />",{css:{position:"absolute",top:"-200px",left:o?"0px":"-1000px",visibility:"hidden"}}).appendTo(u.body),p=e("<input />",{value:l,class:"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:this._data.core.li_height+"px",lineHeight:this._data.core.li_height+"px",width:"150px"},blur:e.proxy(function(n){n.stopImmediatePropagation(),n.preventDefault();var o,i=s.children(".jstree-rename-input"),u=i.val(),d=this.settings.core.force_text;""===u&&(u=l),c.remove(),s.replaceWith(a),s.remove(),l=d?l:e("<div></div>").append(e.parseHTML(l)).html(),t=this.get_node(t),this.set_text(t,l),(o=!!this.rename_node(t,d?e("<div></div>").text(u).text():e("<div></div>").append(e.parseHTML(u)).html()))||this.set_text(t,l),this._data.core.focused=f.id,setTimeout(e.proxy(function(){var e=this.get_node(f.id,!0);e.length&&(this._data.core.focused=f.id,e.children(".jstree-anchor").focus())},this),0),r&&r.call(this,f,o,h),p=null},this),keydown:function(e){var t=e.which;27===t&&(h=!0,this.value=l),(27===t||13===t||37===t||38===t||39===t||40===t||32===t)&&e.stopImmediatePropagation(),(27===t||13===t)&&(e.preventDefault(),this.blur())},click:function(e){e.stopImmediatePropagation()},mousedown:function(e){e.stopImmediatePropagation()},keyup:function(e){p.width(Math.min(c.text("pW"+this.value).width(),i))},keypress:function(e){return 13!==e.which&&void 0}}),d={fontFamily:a.css("fontFamily")||"",fontSize:a.css("fontSize")||"",fontWeight:a.css("fontWeight")||"",fontStyle:a.css("fontStyle")||"",fontStretch:a.css("fontStretch")||"",fontVariant:a.css("fontVariant")||"",letterSpacing:a.css("letterSpacing")||"",wordSpacing:a.css("wordSpacing")||""},s.attr("class",a.attr("class")).append(a.contents().clone()).append(p),a.replaceWith(s),c.css(d),p.css(d).width(Math.min(c.text("pW"+p[0].value).width(),i))[0].select(),void e(u).one("mousedown.jstree touchstart.jstree dnd_start.vakata",function(t){p&&t.target!==p&&e(p).blur()})):(this.settings.core.error.call(this,this._data.core.last_error),!1))},set_theme:function(t,n){if(!t)return!1;if(!0===n){var r=this.settings.core.themes.dir;r||(r=e.jstree.path+"/themes"),n=r+"/"+t+"/style.css"}n&&-1===e.inArray(n,s)&&(e("head").append('<link rel="stylesheet" href="'+n+'" type="text/css" />'),s.push(n)),this._data.core.themes.name&&this.element.removeClass("jstree-"+this._data.core.themes.name),this._data.core.themes.name=t,this.element.addClass("jstree-"+t),this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+t+"-responsive"),this.trigger("set_theme",{theme:t})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(e){this._data.core.themes.variant&&this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant),this._data.core.themes.variant=e,e&&this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=!0,this.get_container_ul().addClass("jstree-striped"),this.trigger("show_stripes")},hide_stripes:function(){this._data.core.themes.stripes=!1,this.get_container_ul().removeClass("jstree-striped"),this.trigger("hide_stripes")},toggle_stripes:function(){this._data.core.themes.stripes?this.hide_stripes():this.show_stripes()},show_dots:function(){this._data.core.themes.dots=!0,this.get_container_ul().removeClass("jstree-no-dots"),this.trigger("show_dots")},hide_dots:function(){this._data.core.themes.dots=!1,this.get_container_ul().addClass("jstree-no-dots"),this.trigger("hide_dots")},toggle_dots:function(){this._data.core.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this._data.core.themes.icons=!0,this.get_container_ul().removeClass("jstree-no-icons"),this.trigger("show_icons")},hide_icons:function(){this._data.core.themes.icons=!1,this.get_container_ul().addClass("jstree-no-icons"),this.trigger("hide_icons")},toggle_icons:function(){this._data.core.themes.icons?this.hide_icons():this.show_icons()},show_ellipsis:function(){this._data.core.themes.ellipsis=!0,this.get_container_ul().addClass("jstree-ellipsis"),this.trigger("show_ellipsis")},hide_ellipsis:function(){this._data.core.themes.ellipsis=!1,this.get_container_ul().removeClass("jstree-ellipsis"),this.trigger("hide_ellipsis")},toggle_ellipsis:function(){this._data.core.themes.ellipsis?this.hide_ellipsis():this.show_ellipsis()},set_icon:function(n,r){var o,i,a,s;if(e.isArray(n)){for(n=n.slice(),o=0,i=n.length;i>o;o++)this.set_icon(n[o],r);return!0}return!(!(n=this.get_node(n))||n.id===e.jstree.root)&&(s=n.icon,n.icon=!0===r||null===r||r===t||""===r||r,a=this.get_node(n,!0).children(".jstree-anchor").children(".jstree-themeicon"),!1===r?(a.removeClass("jstree-themeicon-custom "+s).css("background","").removeAttr("rel"),this.hide_icon(n)):!0===r||null===r||r===t||""===r?(a.removeClass("jstree-themeicon-custom "+s).css("background","").removeAttr("rel"),!1===s&&this.show_icon(n)):-1===r.indexOf("/")&&-1===r.indexOf(".")?(a.removeClass(s).css("background",""),a.addClass(r+" jstree-themeicon-custom").attr("rel",r),!1===s&&this.show_icon(n)):(a.removeClass(s).css("background",""),a.addClass("jstree-themeicon-custom").css("background","url('"+r+"') center center no-repeat").attr("rel",r),!1===s&&this.show_icon(n)),!0)},get_icon:function(t){return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&t.icon},hide_icon:function(t){var n,r;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;r>n;n++)this.hide_icon(t[n]);return!0}return!(!(t=this.get_node(t))||t===e.jstree.root)&&(t.icon=!1,this.get_node(t,!0).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden"),!0)},show_icon:function(t){var n,r,o;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;r>n;n++)this.show_icon(t[n]);return!0}return!(!(t=this.get_node(t))||t===e.jstree.root)&&(o=this.get_node(t,!0),t.icon=!o.length||o.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"),t.icon||(t.icon=!0),o.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden"),!0)}},e.vakata={},e.vakata.attributes=function(t,n){t=e(t)[0];var r=n?{}:[];return t&&t.attributes&&e.each(t.attributes,function(t,o){-1===e.inArray(o.name.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])&&null!==o.value&&""!==e.trim(o.value)&&(n?r[o.name]=o.value:r.push(o.name))}),r},e.vakata.array_unique=function(e){var n,r,o=[],i={};for(n=0,r=e.length;r>n;n++)i[e[n]]===t&&(o.push(e[n]),i[e[n]]=!0);return o},e.vakata.array_remove=function(e,t){return e.splice(t,1),e},e.vakata.array_remove_item=function(t,n){var r=e.inArray(n,t);return-1!==r?e.vakata.array_remove(t,r):t},e.vakata.array_filter=function(e,t,n,r,o){if(e.filter)return e.filter(t,n);for(o in r=[],e)~~o+""==o+""&&o>=0&&t.call(n,e[o],+o,e)&&r.push(e[o]);return r},e.jstree.plugins.changed=function(e,t){var n=[];this.trigger=function(e,r){var o,i;if(r||(r={}),"changed"===e.replace(".jstree","")){r.changed={selected:[],deselected:[]};var a={};for(o=0,i=n.length;i>o;o++)a[n[o]]=1;for(o=0,i=r.selected.length;i>o;o++)a[r.selected[o]]?a[r.selected[o]]=2:r.changed.selected.push(r.selected[o]);for(o=0,i=n.length;i>o;o++)1===a[n[o]]&&r.changed.deselected.push(n[o]);n=r.selected.slice()}t.trigger.call(this,e,r)},this.refresh=function(e,r){return n=[],t.refresh.apply(this,arguments)}};var c,p,d=u.createElement("I");d.className="jstree-icon jstree-checkbox",d.setAttribute("role","presentation"),e.jstree.defaults.checkbox={visible:!0,three_state:!0,whole_node:!0,keep_selected_style:!0,cascade:"",tie_selection:!0,cascade_to_disabled:!0,cascade_to_hidden:!0},e.jstree.plugins.checkbox=function(n,r){this.bind=function(){r.bind.call(this),this._data.checkbox.uto=!1,this._data.checkbox.selected=[],this.settings.checkbox.three_state&&(this.settings.checkbox.cascade="up+down+undetermined"),this.element.on("init.jstree",e.proxy(function(){this._data.checkbox.visible=this.settings.checkbox.visible,this.settings.checkbox.keep_selected_style||this.element.addClass("jstree-checkbox-no-clicked"),this.settings.checkbox.tie_selection&&this.element.addClass("jstree-checkbox-selection")},this)).on("loading.jstree",e.proxy(function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()},this)),-1!==this.settings.checkbox.cascade.indexOf("undetermined")&&this.element.on("changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",e.proxy(function(){this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(e.proxy(this._undetermined,this),50)},this)),this.settings.checkbox.tie_selection||this.element.on("model.jstree",e.proxy(function(e,t){var n,r,o=this._model.data,i=(o[t.parent],t.nodes);for(n=0,r=i.length;r>n;n++)o[i[n]].state.checked=o[i[n]].state.checked||o[i[n]].original&&o[i[n]].original.state&&o[i[n]].original.state.checked,o[i[n]].state.checked&&this._data.checkbox.selected.push(i[n])},this)),(-1!==this.settings.checkbox.cascade.indexOf("up")||-1!==this.settings.checkbox.cascade.indexOf("down"))&&this.element.on("model.jstree",e.proxy(function(t,n){var r,o,i,a,s,l,u=this._model.data,c=u[n.parent],p=n.nodes,d=[],f=this.settings.checkbox.cascade,h=this.settings.checkbox.tie_selection;if(-1!==f.indexOf("down"))if(c.state[h?"selected":"checked"]){for(o=0,i=p.length;i>o;o++)u[p[o]].state[h?"selected":"checked"]=!0;this._data[h?"core":"checkbox"].selected=this._data[h?"core":"checkbox"].selected.concat(p)}else for(o=0,i=p.length;i>o;o++)if(u[p[o]].state[h?"selected":"checked"]){for(a=0,s=u[p[o]].children_d.length;s>a;a++)u[u[p[o]].children_d[a]].state[h?"selected":"checked"]=!0;this._data[h?"core":"checkbox"].selected=this._data[h?"core":"checkbox"].selected.concat(u[p[o]].children_d)}if(-1!==f.indexOf("up")){for(o=0,i=c.children_d.length;i>o;o++)u[c.children_d[o]].children.length||d.push(u[c.children_d[o]].parent);for(d=e.vakata.array_unique(d),a=0,s=d.length;s>a;a++)for(c=u[d[a]];c&&c.id!==e.jstree.root;){for(r=0,o=0,i=c.children.length;i>o;o++)r+=u[c.children[o]].state[h?"selected":"checked"];if(r!==i)break;c.state[h?"selected":"checked"]=!0,this._data[h?"core":"checkbox"].selected.push(c.id),(l=this.get_node(c,!0))&&l.length&&l.attr("aria-selected",!0).children(".jstree-anchor").addClass(h?"jstree-clicked":"jstree-checked"),c=this.get_node(c.parent)}}this._data[h?"core":"checkbox"].selected=e.vakata.array_unique(this._data[h?"core":"checkbox"].selected)},this)).on(this.settings.checkbox.tie_selection?"select_node.jstree":"check_node.jstree",e.proxy(function(t,n){var r,o,i,a,s=n.node,l=this._model.data,u=this.get_node(s.parent),c=this.settings.checkbox.cascade,p=this.settings.checkbox.tie_selection,d={},f=this._data[p?"core":"checkbox"].selected;for(r=0,o=f.length;o>r;r++)d[f[r]]=!0;if(-1!==c.indexOf("down")){var h=this._cascade_new_checked_state(s.id,!0),m=s.children_d.concat(s.id);for(r=0,o=m.length;o>r;r++)h.indexOf(m[r])>-1?d[m[r]]=!0:delete d[m[r]]}if(-1!==c.indexOf("up"))for(;u&&u.id!==e.jstree.root;){for(i=0,r=0,o=u.children.length;o>r;r++)i+=l[u.children[r]].state[p?"selected":"checked"];if(i!==o)break;u.state[p?"selected":"checked"]=!0,d[u.id]=!0,(a=this.get_node(u,!0))&&a.length&&a.attr("aria-selected",!0).children(".jstree-anchor").addClass(p?"jstree-clicked":"jstree-checked"),u=this.get_node(u.parent)}for(r in f=[],d)d.hasOwnProperty(r)&&f.push(r);this._data[p?"core":"checkbox"].selected=f},this)).on(this.settings.checkbox.tie_selection?"deselect_all.jstree":"uncheck_all.jstree",e.proxy(function(t,n){var r,o,i,a=this.get_node(e.jstree.root),s=this._model.data;for(r=0,o=a.children_d.length;o>r;r++)(i=s[a.children_d[r]])&&i.original&&i.original.state&&i.original.state.undetermined&&(i.original.state.undetermined=!1)},this)).on(this.settings.checkbox.tie_selection?"deselect_node.jstree":"uncheck_node.jstree",e.proxy(function(e,t){var n,r,o,i=t.node,a=(this.get_node(i,!0),this.settings.checkbox.cascade),s=this.settings.checkbox.tie_selection,l=this._data[s?"core":"checkbox"].selected,u=i.children_d.concat(i.id);if(-1!==a.indexOf("down")){var c=this._cascade_new_checked_state(i.id,!1);l=l.filter(function(e){return-1===u.indexOf(e)||c.indexOf(e)>-1})}if(-1!==a.indexOf("up")&&-1===l.indexOf(i.id)){for(n=0,r=i.parents.length;r>n;n++)(o=this._model.data[i.parents[n]]).state[s?"selected":"checked"]=!1,o&&o.original&&o.original.state&&o.original.state.undetermined&&(o.original.state.undetermined=!1),(o=this.get_node(i.parents[n],!0))&&o.length&&o.attr("aria-selected",!1).children(".jstree-anchor").removeClass(s?"jstree-clicked":"jstree-checked");l=l.filter(function(e){return-1===i.parents.indexOf(e)})}this._data[s?"core":"checkbox"].selected=l},this)),-1!==this.settings.checkbox.cascade.indexOf("up")&&this.element.on("delete_node.jstree",e.proxy(function(t,n){for(var r,o,i,a,s=this.get_node(n.parent),l=this._model.data,u=this.settings.checkbox.tie_selection;s&&s.id!==e.jstree.root&&!s.state[u?"selected":"checked"];){for(i=0,r=0,o=s.children.length;o>r;r++)i+=l[s.children[r]].state[u?"selected":"checked"];if(!(o>0&&i===o))break;s.state[u?"selected":"checked"]=!0,this._data[u?"core":"checkbox"].selected.push(s.id),(a=this.get_node(s,!0))&&a.length&&a.attr("aria-selected",!0).children(".jstree-anchor").addClass(u?"jstree-clicked":"jstree-checked"),s=this.get_node(s.parent)}},this)).on("move_node.jstree",e.proxy(function(t,n){var r,o,i,a,s,l=n.is_multi,u=n.old_parent,c=this.get_node(n.parent),p=this._model.data,d=this.settings.checkbox.tie_selection;if(!l)for(r=this.get_node(u);r&&r.id!==e.jstree.root&&!r.state[d?"selected":"checked"];){for(o=0,i=0,a=r.children.length;a>i;i++)o+=p[r.children[i]].state[d?"selected":"checked"];if(!(a>0&&o===a))break;r.state[d?"selected":"checked"]=!0,this._data[d?"core":"checkbox"].selected.push(r.id),(s=this.get_node(r,!0))&&s.length&&s.attr("aria-selected",!0).children(".jstree-anchor").addClass(d?"jstree-clicked":"jstree-checked"),r=this.get_node(r.parent)}for(r=c;r&&r.id!==e.jstree.root;){for(o=0,i=0,a=r.children.length;a>i;i++)o+=p[r.children[i]].state[d?"selected":"checked"];if(o===a)r.state[d?"selected":"checked"]||(r.state[d?"selected":"checked"]=!0,this._data[d?"core":"checkbox"].selected.push(r.id),(s=this.get_node(r,!0))&&s.length&&s.attr("aria-selected",!0).children(".jstree-anchor").addClass(d?"jstree-clicked":"jstree-checked"));else{if(!r.state[d?"selected":"checked"])break;r.state[d?"selected":"checked"]=!1,this._data[d?"core":"checkbox"].selected=e.vakata.array_remove_item(this._data[d?"core":"checkbox"].selected,r.id),(s=this.get_node(r,!0))&&s.length&&s.attr("aria-selected",!1).children(".jstree-anchor").removeClass(d?"jstree-clicked":"jstree-checked")}r=this.get_node(r.parent)}},this))},this.get_undetermined=function(n){if(-1===this.settings.checkbox.cascade.indexOf("undetermined"))return[];var r,o,i,a,s={},l=this._model.data,u=this.settings.checkbox.tie_selection,c=this._data[u?"core":"checkbox"].selected,p=[],d=this,f=[];for(r=0,o=c.length;o>r;r++)if(l[c[r]]&&l[c[r]].parents)for(i=0,a=l[c[r]].parents.length;a>i&&s[l[c[r]].parents[i]]===t;i++)l[c[r]].parents[i]!==e.jstree.root&&(s[l[c[r]].parents[i]]=!0,p.push(l[c[r]].parents[i]));for(this.element.find(".jstree-closed").not(":has(.jstree-children)").each(function(){var n,u=d.get_node(this);if(u)if(u.state.loaded){for(r=0,o=u.children_d.length;o>r;r++)if(!(n=l[u.children_d[r]]).state.loaded&&n.original&&n.original.state&&n.original.state.undetermined&&!0===n.original.state.undetermined)for(s[n.id]===t&&n.id!==e.jstree.root&&(s[n.id]=!0,p.push(n.id)),i=0,a=n.parents.length;a>i;i++)s[n.parents[i]]===t&&n.parents[i]!==e.jstree.root&&(s[n.parents[i]]=!0,p.push(n.parents[i]))}else if(u.original&&u.original.state&&u.original.state.undetermined&&!0===u.original.state.undetermined)for(s[u.id]===t&&u.id!==e.jstree.root&&(s[u.id]=!0,p.push(u.id)),i=0,a=u.parents.length;a>i;i++)s[u.parents[i]]===t&&u.parents[i]!==e.jstree.root&&(s[u.parents[i]]=!0,p.push(u.parents[i]))}),r=0,o=p.length;o>r;r++)l[p[r]].state[u?"selected":"checked"]||f.push(n?l[p[r]]:p[r]);return f},this._undetermined=function(){if(null!==this.element){var e,t,n,r=this.get_undetermined(!1);for(this.element.find(".jstree-undetermined").removeClass("jstree-undetermined"),e=0,t=r.length;t>e;e++)(n=this.get_node(r[e],!0))&&n.length&&n.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined")}},this.redraw_node=function(t,n,o,i){if(t=r.redraw_node.apply(this,arguments)){var a,s,l=null,u=null;for(a=0,s=t.childNodes.length;s>a;a++)if(t.childNodes[a]&&t.childNodes[a].className&&-1!==t.childNodes[a].className.indexOf("jstree-anchor")){l=t.childNodes[a];break}l&&(!this.settings.checkbox.tie_selection&&this._model.data[t.id].state.checked&&(l.className+=" jstree-checked"),u=d.cloneNode(!1),this._model.data[t.id].state.checkbox_disabled&&(u.className+=" jstree-checkbox-disabled"),l.insertBefore(u,l.childNodes[0]))}return o||-1===this.settings.checkbox.cascade.indexOf("undetermined")||(this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(e.proxy(this._undetermined,this),50)),t},this.show_checkboxes=function(){this._data.core.themes.checkboxes=!0,this.get_container_ul().removeClass("jstree-no-checkboxes")},this.hide_checkboxes=function(){this._data.core.themes.checkboxes=!1,this.get_container_ul().addClass("jstree-no-checkboxes")},this.toggle_checkboxes=function(){this._data.core.themes.checkboxes?this.hide_checkboxes():this.show_checkboxes()},this.is_undetermined=function(t){t=this.get_node(t);var n,r,o=this.settings.checkbox.cascade,i=this.settings.checkbox.tie_selection,a=this._data[i?"core":"checkbox"].selected,s=this._model.data;if(!t||!0===t.state[i?"selected":"checked"]||-1===o.indexOf("undetermined")||-1===o.indexOf("down")&&-1===o.indexOf("up"))return!1;if(!t.state.loaded&&!0===t.original.state.undetermined)return!0;for(n=0,r=t.children_d.length;r>n;n++)if(-1!==e.inArray(t.children_d[n],a)||!s[t.children_d[n]].state.loaded&&s[t.children_d[n]].original.state.undetermined)return!0;return!1},this.disable_checkbox=function(t){var n,r,o;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;r>n;n++)this.disable_checkbox(t[n]);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(o=this.get_node(t,!0),void(t.state.checkbox_disabled||(t.state.checkbox_disabled=!0,o&&o.length&&o.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-checkbox-disabled"),this.trigger("disable_checkbox",{node:t}))))},this.enable_checkbox=function(t){var n,r,o;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;r>n;n++)this.enable_checkbox(t[n]);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(o=this.get_node(t,!0),void(t.state.checkbox_disabled&&(t.state.checkbox_disabled=!1,o&&o.length&&o.children(".jstree-anchor").children(".jstree-checkbox").removeClass("jstree-checkbox-disabled"),this.trigger("enable_checkbox",{node:t}))))},this.activate_node=function(t,n){return!e(n.target).hasClass("jstree-checkbox-disabled")&&(this.settings.checkbox.tie_selection&&(this.settings.checkbox.whole_node||e(n.target).hasClass("jstree-checkbox"))&&(n.ctrlKey=!0),this.settings.checkbox.tie_selection||!this.settings.checkbox.whole_node&&!e(n.target).hasClass("jstree-checkbox")?r.activate_node.call(this,t,n):!this.is_disabled(t)&&(this.is_checked(t)?this.uncheck_node(t,n):this.check_node(t,n),void this.trigger("activate_node",{node:this.get_node(t)})))},this._cascade_new_checked_state=function(e,t){var n,r,o,i=this.settings.checkbox.tie_selection,a=this._model.data[e],s=[],l=[];if(!this.settings.checkbox.cascade_to_disabled&&a.state.disabled||!this.settings.checkbox.cascade_to_hidden&&a.state.hidden)o=this.get_checked_descendants(e),a.state[i?"selected":"checked"]&&o.push(a.id),s=s.concat(o);else{if(a.children)for(n=0,r=a.children.length;r>n;n++){var u=a.children[n];o=this._cascade_new_checked_state(u,t),s=s.concat(o),o.indexOf(u)>-1&&l.push(u)}var c=this.get_node(a,!0),p=l.length>0&&l.length<a.children.length;a.original&&a.original.state&&a.original.state.undetermined&&(a.original.state.undetermined=p),p?(a.state[i?"selected":"checked"]=!1,c.attr("aria-selected",!1).children(".jstree-anchor").removeClass(i?"jstree-clicked":"jstree-checked")):t&&l.length===a.children.length?(a.state[i?"selected":"checked"]=t,s.push(a.id),c.attr("aria-selected",!0).children(".jstree-anchor").addClass(i?"jstree-clicked":"jstree-checked")):(a.state[i?"selected":"checked"]=!1,c.attr("aria-selected",!1).children(".jstree-anchor").removeClass(i?"jstree-clicked":"jstree-checked"))}return s},this.get_checked_descendants=function(e){var t=this,n=t.settings.checkbox.tie_selection,r=t._model.data[e];return r.children_d.filter(function(e){return t._model.data[e].state[n?"selected":"checked"]})},this.check_node=function(t,n){if(this.settings.checkbox.tie_selection)return this.select_node(t,!1,!0,n);var r,o,i;if(e.isArray(t)){for(t=t.slice(),o=0,i=t.length;i>o;o++)this.check_node(t[o],n);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(r=this.get_node(t,!0),void(t.state.checked||(t.state.checked=!0,this._data.checkbox.selected.push(t.id),r&&r.length&&r.children(".jstree-anchor").addClass("jstree-checked"),this.trigger("check_node",{node:t,selected:this._data.checkbox.selected,event:n}))))},this.uncheck_node=function(t,n){if(this.settings.checkbox.tie_selection)return this.deselect_node(t,!1,n);var r,o,i;if(e.isArray(t)){for(t=t.slice(),r=0,o=t.length;o>r;r++)this.uncheck_node(t[r],n);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(i=this.get_node(t,!0),void(t.state.checked&&(t.state.checked=!1,this._data.checkbox.selected=e.vakata.array_remove_item(this._data.checkbox.selected,t.id),i.length&&i.children(".jstree-anchor").removeClass("jstree-checked"),this.trigger("uncheck_node",{node:t,selected:this._data.checkbox.selected,event:n}))))},this.check_all=function(){if(this.settings.checkbox.tie_selection)return this.select_all();var t,n;this._data.checkbox.selected.concat([]);for(this._data.checkbox.selected=this._model.data[e.jstree.root].children_d.concat(),t=0,n=this._data.checkbox.selected.length;n>t;t++)this._model.data[this._data.checkbox.selected[t]]&&(this._model.data[this._data.checkbox.selected[t]].state.checked=!0);this.redraw(!0),this.trigger("check_all",{selected:this._data.checkbox.selected})},this.uncheck_all=function(){if(this.settings.checkbox.tie_selection)return this.deselect_all();var e,t,n=this._data.checkbox.selected.concat([]);for(e=0,t=this._data.checkbox.selected.length;t>e;e++)this._model.data[this._data.checkbox.selected[e]]&&(this._model.data[this._data.checkbox.selected[e]].state.checked=!1);this._data.checkbox.selected=[],this.element.find(".jstree-checked").removeClass("jstree-checked"),this.trigger("uncheck_all",{selected:this._data.checkbox.selected,node:n})},this.is_checked=function(t){return this.settings.checkbox.tie_selection?this.is_selected(t):!(!(t=this.get_node(t))||t.id===e.jstree.root)&&t.state.checked},this.get_checked=function(t){return this.settings.checkbox.tie_selection?this.get_selected(t):t?e.map(this._data.checkbox.selected,e.proxy(function(e){return this.get_node(e)},this)):this._data.checkbox.selected},this.get_top_checked=function(t){if(this.settings.checkbox.tie_selection)return this.get_top_selected(t);var n,r,o,i,a=this.get_checked(!0),s={};for(n=0,r=a.length;r>n;n++)s[a[n].id]=a[n];for(n=0,r=a.length;r>n;n++)for(o=0,i=a[n].children_d.length;i>o;o++)s[a[n].children_d[o]]&&delete s[a[n].children_d[o]];for(n in a=[],s)s.hasOwnProperty(n)&&a.push(n);return t?e.map(a,e.proxy(function(e){return this.get_node(e)},this)):a},this.get_bottom_checked=function(t){if(this.settings.checkbox.tie_selection)return this.get_bottom_selected(t);var n,r,o=this.get_checked(!0),i=[];for(n=0,r=o.length;r>n;n++)o[n].children.length||i.push(o[n].id);return t?e.map(i,e.proxy(function(e){return this.get_node(e)},this)):i},this.load_node=function(t,n){var o,i,a;if(!e.isArray(t)&&!this.settings.checkbox.tie_selection&&((a=this.get_node(t))&&a.state.loaded))for(o=0,i=a.children_d.length;i>o;o++)this._model.data[a.children_d[o]].state.checked&&(!0,this._data.checkbox.selected=e.vakata.array_remove_item(this._data.checkbox.selected,a.children_d[o]));return r.load_node.apply(this,arguments)},this.get_state=function(){var e=r.get_state.apply(this,arguments);return this.settings.checkbox.tie_selection?e:(e.checkbox=this._data.checkbox.selected.slice(),e)},this.set_state=function(t,n){var o=r.set_state.apply(this,arguments);if(o&&t.checkbox){if(!this.settings.checkbox.tie_selection){this.uncheck_all();var i=this;e.each(t.checkbox,function(e,t){i.check_node(t)})}return delete t.checkbox,this.set_state(t,n),!1}return o},this.refresh=function(e,t){return this.settings.checkbox.tie_selection&&(this._data.checkbox.selected=[]),r.refresh.apply(this,arguments)}},e.jstree.defaults.conditionalselect=function(){return!0},e.jstree.plugins.conditionalselect=function(e,t){this.activate_node=function(e,n){return this.settings.conditionalselect.call(this,this.get_node(e),n)?t.activate_node.call(this,e,n):void 0}},e.jstree.defaults.contextmenu={select_node:!0,show_at_node:!0,items:function(t,n){return{create:{separator_before:!1,separator_after:!0,_disabled:!1,label:"Create",action:function(t){var n=e.jstree.reference(t.reference),r=n.get_node(t.reference);n.create_node(r,{},"last",function(e){try{n.edit(e)}catch(t){setTimeout(function(){n.edit(e)},0)}})}},rename:{separator_before:!1,separator_after:!1,_disabled:!1,label:"Rename",action:function(t){var n=e.jstree.reference(t.reference),r=n.get_node(t.reference);n.edit(r)}},remove:{separator_before:!1,icon:!1,separator_after:!1,_disabled:!1,label:"Delete",action:function(t){var n=e.jstree.reference(t.reference),r=n.get_node(t.reference);n.is_selected(r)?n.delete_node(n.get_selected()):n.delete_node(r)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(t){var n=e.jstree.reference(t.reference),r=n.get_node(t.reference);n.is_selected(r)?n.cut(n.get_top_selected()):n.cut(r)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(t){var n=e.jstree.reference(t.reference),r=n.get_node(t.reference);n.is_selected(r)?n.copy(n.get_top_selected()):n.copy(r)}},paste:{separator_before:!1,icon:!1,_disabled:function(t){return!e.jstree.reference(t.reference).can_paste()},separator_after:!1,label:"Paste",action:function(t){var n=e.jstree.reference(t.reference),r=n.get_node(t.reference);n.paste(r)}}}}}}},e.jstree.plugins.contextmenu=function(n,r){this.bind=function(){r.bind.call(this);var t,n,o=0,i=null;this.element.on("init.jstree loading.jstree ready.jstree",e.proxy(function(){this.get_container_ul().addClass("jstree-contextmenu")},this)).on("contextmenu.jstree",".jstree-anchor",e.proxy(function(e,t){"input"!==e.target.tagName.toLowerCase()&&(e.preventDefault(),o=e.ctrlKey?+new Date:0,(t||i)&&(o=+new Date+1e4),i&&clearTimeout(i),this.is_loading(e.currentTarget)||this.show_contextmenu(e.currentTarget,e.pageX,e.pageY,e))},this)).on("click.jstree",".jstree-anchor",e.proxy(function(t){this._data.contextmenu.visible&&(!o||+new Date-o>250)&&e.vakata.context.hide(),o=0},this)).on("touchstart.jstree",".jstree-anchor",function(r){r.originalEvent&&r.originalEvent.changedTouches&&r.originalEvent.changedTouches[0]&&(t=r.originalEvent.changedTouches[0].clientX,n=r.originalEvent.changedTouches[0].clientY,i=setTimeout(function(){e(r.currentTarget).trigger("contextmenu",!0)},750))}).on("touchmove.vakata.jstree",function(r){i&&r.originalEvent&&r.originalEvent.changedTouches&&r.originalEvent.changedTouches[0]&&(Math.abs(t-r.originalEvent.changedTouches[0].clientX)>10||Math.abs(n-r.originalEvent.changedTouches[0].clientY)>10)&&(clearTimeout(i),e.vakata.context.hide())}).on("touchend.vakata.jstree",function(e){i&&clearTimeout(i)}),e(u).on("context_hide.vakata.jstree",e.proxy(function(t,n){this._data.contextmenu.visible=!1,e(n.reference).removeClass("jstree-context")},this))},this.teardown=function(){this._data.contextmenu.visible&&e.vakata.context.hide(),r.teardown.call(this)},this.show_contextmenu=function(n,r,o,i){if(!(n=this.get_node(n))||n.id===e.jstree.root)return!1;var a=this.settings.contextmenu,s=this.get_node(n,!0),l=s.children(".jstree-anchor"),u=!1,c=!1;(a.show_at_node||r===t||o===t)&&(u=l.offset(),r=u.left,o=u.top+this._data.core.li_height),this.settings.contextmenu.select_node&&!this.is_selected(n)&&this.activate_node(n,i),c=a.items,e.isFunction(c)&&(c=c.call(this,n,e.proxy(function(e){this._show_contextmenu(n,r,o,e)},this))),e.isPlainObject(c)&&this._show_contextmenu(n,r,o,c)},this._show_contextmenu=function(t,n,r,o){var i=this.get_node(t,!0),a=i.children(".jstree-anchor");e(u).one("context_show.vakata.jstree",e.proxy(function(t,n){var r="jstree-contextmenu jstree-"+this.get_theme()+"-contextmenu";e(n.element).addClass(r),a.addClass("jstree-context")},this)),this._data.contextmenu.visible=!0,e.vakata.context.show(a,{x:n,y:r},o),this.trigger("show_contextmenu",{node:t,x:n,y:r})}},function(e){var t=!1,n={element:!1,reference:!1,position_x:0,position_y:0,items:[],html:"",is_visible:!1};e.vakata.context={settings:{hide_onmouseleave:0,icons:!0},_trigger:function(t){e(u).triggerHandler("context_"+t+".vakata",{reference:n.reference,element:n.element,position:{x:n.position_x,y:n.position_y}})},_execute:function(t){return!(!(t=n.items[t])||t._disabled&&(!e.isFunction(t._disabled)||t._disabled({item:t,reference:n.reference,element:n.element}))||!t.action)&&t.action.call(null,{item:t,reference:n.reference,element:n.element,position:{x:n.position_x,y:n.position_y}})},_parse:function(t,r){if(!t)return!1;r||(n.html="",n.items=[]);var o,i="",a=!1;return r&&(i+="<ul>"),e.each(t,function(t,r){return!r||(n.items.push(r),!a&&r.separator_before&&(i+="<li class='vakata-context-separator'><a href='#' "+(e.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>"),a=!1,i+="<li class='"+(r._class||"")+(!0===r._disabled||e.isFunction(r._disabled)&&r._disabled({item:r,reference:n.reference,element:n.element})?" vakata-contextmenu-disabled ":"")+"' "+(r.shortcut?" data-shortcut='"+r.shortcut+"' ":"")+">",i+="<a href='#' rel='"+(n.items.length-1)+"' "+(r.title?"title='"+r.title+"'":"")+">",e.vakata.context.settings.icons&&(i+="<i ",r.icon&&(i+=-1!==r.icon.indexOf("/")||-1!==r.icon.indexOf(".")?" style='background:url(\""+r.icon+"\") center center no-repeat' ":" class='"+r.icon+"' "),i+="></i><span class='vakata-contextmenu-sep'>&#160;</span>"),i+=(e.isFunction(r.label)?r.label({item:t,reference:n.reference,element:n.element}):r.label)+(r.shortcut?' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-'+r.shortcut+'">'+(r.shortcut_label||"")+"</span>":"")+"</a>",r.submenu&&((o=e.vakata.context._parse(r.submenu,!0))&&(i+=o)),i+="</li>",void(r.separator_after&&(i+="<li class='vakata-context-separator'><a href='#' "+(e.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>",a=!0)))}),i=i.replace(/<li class\='vakata-context-separator'\><\/li\>$/,""),r&&(i+="</ul>"),r||(n.html=i,e.vakata.context._trigger("parse")),i.length>10&&i},_show_submenu:function(n){if((n=e(n)).length&&n.children("ul").length){var r=n.children("ul"),o=n.offset().left,i=o+n.outerWidth(),a=n.offset().top,s=r.width(),l=r.height(),u=e(window).width()+e(window).scrollLeft(),c=e(window).height()+e(window).scrollTop();t?n[i-(s+10+n.outerWidth())<0?"addClass":"removeClass"]("vakata-context-left"):n[i+s>u&&o>u-i?"addClass":"removeClass"]("vakata-context-right"),a+l+10>c&&r.css("bottom","-1px"),n.hasClass("vakata-context-right")?s>o&&r.css("margin-right",o-s):s>u-i&&r.css("margin-left",u-i-s),r.show()}},show:function(r,o,i){var a,s,l,c,p,d,f,h;switch(n.element&&n.element.length&&n.element.width(""),!0){case!o&&!r:return!1;case!!o&&!!r:n.reference=r,n.position_x=o.x,n.position_y=o.y;break;case!o&&!!r:n.reference=r,a=r.offset(),n.position_x=a.left+r.outerHeight(),n.position_y=a.top;break;case!!o&&!r:n.position_x=o.x,n.position_y=o.y}r&&!i&&e(r).data("vakata_contextmenu")&&(i=e(r).data("vakata_contextmenu")),e.vakata.context._parse(i)&&n.element.html(n.html),n.items.length&&(n.element.appendTo(u.body),s=n.element,l=n.position_x,c=n.position_y,p=s.width(),d=s.height(),f=e(window).width()+e(window).scrollLeft(),h=e(window).height()+e(window).scrollTop(),t&&((l-=s.outerWidth()-e(r).outerWidth())<e(window).scrollLeft()+20&&(l=e(window).scrollLeft()+20)),l+p+20>f&&(l=f-(p+20)),c+d+20>h&&(c=h-(d+20)),n.element.css({left:l,top:c}).show().find("a").first().focus().parent().addClass("vakata-context-hover"),n.is_visible=!0,e.vakata.context._trigger("show"))},hide:function(){n.is_visible&&(n.element.hide().find("ul").hide().end().find(":focus").blur().end().detach(),n.is_visible=!1,e.vakata.context._trigger("hide"))}},e(function(){t="rtl"===e(u.body).css("direction");var r=!1;n.element=e("<ul class='vakata-context'></ul>"),n.element.on("mouseenter","li",function(t){t.stopImmediatePropagation(),e.contains(this,t.relatedTarget)||(r&&clearTimeout(r),n.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end(),e(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context","li").addBack().addClass("vakata-context-hover"),e.vakata.context._show_submenu(this))}).on("mouseleave","li",function(t){e.contains(this,t.relatedTarget)||e(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover")}).on("mouseleave",function(t){e(this).find(".vakata-context-hover").removeClass("vakata-context-hover"),e.vakata.context.settings.hide_onmouseleave&&(r=setTimeout(function(){e.vakata.context.hide()},e.vakata.context.settings.hide_onmouseleave))}).on("click","a",function(t){t.preventDefault(),e(this).blur().parent().hasClass("vakata-context-disabled")||!1===e.vakata.context._execute(e(this).attr("rel"))||e.vakata.context.hide()}).on("keydown","a",function(t){var r=null;switch(t.which){case 13:case 32:t.type="click",t.preventDefault(),e(t.currentTarget).trigger(t);break;case 37:n.is_visible&&(n.element.find(".vakata-context-hover").last().closest("li").first().find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 38:n.is_visible&&((r=n.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first()).length||(r=n.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last()),r.addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 39:n.is_visible&&(n.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 40:n.is_visible&&((r=n.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first()).length||(r=n.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first()),r.addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 27:e.vakata.context.hide(),t.preventDefault()}}).on("keydown",function(e){e.preventDefault();var t=n.element.find(".vakata-contextmenu-shortcut-"+e.which).parent();t.parent().not(".vakata-context-disabled")&&t.click()}),e(u).on("mousedown.vakata.jstree",function(t){n.is_visible&&n.element[0]!==t.target&&!e.contains(n.element[0],t.target)&&e.vakata.context.hide()}).on("context_show.vakata.jstree",function(e,r){n.element.find("li:has(ul)").children("a").addClass("vakata-context-parent"),t&&n.element.addClass("vakata-context-rtl").css("direction","rtl"),n.element.find("ul").hide().end()})})}(e),e.jstree.defaults.dnd={copy:!0,open_timeout:500,is_draggable:!0,check_while_dragging:!0,always_copy:!1,inside_pos:0,drag_selection:!0,touch:!0,large_drop_target:!1,large_drag_target:!1,use_html5:!1},e.jstree.plugins.dnd=function(t,n){this.init=function(e,t){n.init.call(this,e,t),this.settings.dnd.use_html5=this.settings.dnd.use_html5&&"draggable"in u.createElement("span")},this.bind=function(){n.bind.call(this),this.element.on(this.settings.dnd.use_html5?"dragstart.jstree":"mousedown.jstree touchstart.jstree",this.settings.dnd.large_drag_target?".jstree-node":".jstree-anchor",e.proxy(function(t){if(this.settings.dnd.large_drag_target&&e(t.target).closest(".jstree-node")[0]!==t.currentTarget)return!0;if("touchstart"===t.type&&(!this.settings.dnd.touch||"selected"===this.settings.dnd.touch&&!e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").hasClass("jstree-clicked")))return!0;var n=this.get_node(t.target),r=this.is_selected(n)&&this.settings.dnd.drag_selection?this.get_top_selected().length:1,o=r>1?r+" "+this.get_string("nodes"):this.get_text(t.currentTarget);if(this.settings.core.force_text&&(o=e.vakata.html.escape(o)),n&&n.id&&n.id!==e.jstree.root&&(1===t.which||"touchstart"===t.type||"dragstart"===t.type)&&(!0===this.settings.dnd.is_draggable||e.isFunction(this.settings.dnd.is_draggable)&&this.settings.dnd.is_draggable.call(this,r>1?this.get_top_selected(!0):[n],t))){if(c={jstree:!0,origin:this,obj:this.get_node(n,!0),nodes:r>1?this.get_top_selected():[n.id]},p=t.currentTarget,!this.settings.dnd.use_html5)return this.element.trigger("mousedown.jstree"),e.vakata.dnd.start(t,c,'<div id="jstree-dnd" class="jstree-'+this.get_theme()+" jstree-"+this.get_theme()+"-"+this.get_theme_variant()+" "+(this.settings.core.themes.responsive?" jstree-dnd-responsive":"")+'"><i class="jstree-icon jstree-er"></i>'+o+'<ins class="jstree-copy" style="display:none;">+</ins></div>');e.vakata.dnd._trigger("start",t,{helper:e(),element:p,data:c})}},this)),this.settings.dnd.use_html5&&this.element.on("dragover.jstree",function(t){return t.preventDefault(),e.vakata.dnd._trigger("move",t,{helper:e(),element:p,data:c}),!1}).on("drop.jstree",e.proxy(function(t){return t.preventDefault(),e.vakata.dnd._trigger("stop",t,{helper:e(),element:p,data:c}),!1},this))},this.redraw_node=function(e,t,r,o){if((e=n.redraw_node.apply(this,arguments))&&this.settings.dnd.use_html5)if(this.settings.dnd.large_drag_target)e.setAttribute("draggable",!0);else{var i,a,s=null;for(i=0,a=e.childNodes.length;a>i;i++)if(e.childNodes[i]&&e.childNodes[i].className&&-1!==e.childNodes[i].className.indexOf("jstree-anchor")){s=e.childNodes[i];break}s&&s.setAttribute("draggable",!0)}return e}},e(function(){var n=!1,r=!1,o=!1,i=!1,a=e('<div id="jstree-marker">&#160;</div>').hide();e(u).on("dragover.vakata.jstree",function(t){p&&e.vakata.dnd._trigger("move",t,{helper:e(),element:p,data:c})}).on("drop.vakata.jstree",function(t){p&&(e.vakata.dnd._trigger("stop",t,{helper:e(),element:p,data:c}),p=null,c=null)}).on("dnd_start.vakata.jstree",function(e,t){n=!1,o=!1,t&&t.data&&t.data.jstree&&a.appendTo(u.body)}).on("dnd_move.vakata.jstree",function(s,l){var u=l.event.target!==o.target;if(i&&(!l.event||"dragover"!==l.event.type||u)&&clearTimeout(i),l&&l.data&&l.data.jstree&&(!l.event.target.id||"jstree-marker"!==l.event.target.id)){o=l.event;var c,p,d,f,h,m,y,g,v,b,S,_,w,E,O,C,P=e.jstree.reference(l.event.target),x=!1,T=!1,k=!1;if(P&&P._data&&P._data.dnd)if(a.attr("class","jstree-"+P.get_theme()+(P.settings.core.themes.responsive?" jstree-dnd-responsive":"")),O=l.data.origin&&(l.data.origin.settings.dnd.always_copy||l.data.origin.settings.dnd.copy&&(l.event.metaKey||l.event.ctrlKey)),l.helper.children().attr("class","jstree-"+P.get_theme()+" jstree-"+P.get_theme()+"-"+P.get_theme_variant()+" "+(P.settings.core.themes.responsive?" jstree-dnd-responsive":"")).find(".jstree-copy").first()[O?"show":"hide"](),l.event.target!==P.element[0]&&l.event.target!==P.get_container_ul()[0]||0!==P.get_container_ul().children().length){if((x=P.settings.dnd.large_drop_target?e(l.event.target).closest(".jstree-node").children(".jstree-anchor"):e(l.event.target).closest(".jstree-anchor"))&&x.length&&x.parent().is(".jstree-closed, .jstree-open, .jstree-leaf")&&(T=x.offset(),k=(l.event.pageY!==t?l.event.pageY:l.event.originalEvent.pageY)-T.top,d=x.outerHeight(),m=d/3>k?["b","i","a"]:k>d-d/3?["a","i","b"]:k>d/2?["i","a","b"]:["i","b","a"],e.each(m,function(t,o){switch(o){case"b":c=T.left-6,p=T.top,f=P.get_parent(x),h=x.parent().index();break;case"i":w=P.settings.dnd.inside_pos,E=P.get_node(x.parent()),c=T.left-2,p=T.top+d/2+1,f=E.id,h="first"===w?0:"last"===w?E.children.length:Math.min(w,E.children.length);break;case"a":c=T.left-6,p=T.top+d,f=P.get_parent(x),h=x.parent().index()+1}for(y=!0,g=0,v=l.data.nodes.length;v>g;g++)if(b=l.data.origin&&(l.data.origin.settings.dnd.always_copy||l.data.origin.settings.dnd.copy&&(l.event.metaKey||l.event.ctrlKey))?"copy_node":"move_node",S=h,"move_node"===b&&"a"===o&&l.data.origin&&l.data.origin===P&&f===P.get_parent(l.data.nodes[g])&&(_=P.get_node(f),S>e.inArray(l.data.nodes[g],_.children)&&(S-=1)),!(y=y&&(P&&P.settings&&P.settings.dnd&&!1===P.settings.dnd.check_while_dragging||P.check(b,l.data.origin&&l.data.origin!==P?l.data.origin.get_node(l.data.nodes[g]):l.data.nodes[g],f,S,{dnd:!0,ref:P.get_node(x.parent()),pos:o,origin:l.data.origin,is_multi:l.data.origin&&l.data.origin!==P,is_foreign:!l.data.origin})))){P&&P.last_error&&(r=P.last_error());break}return"i"===o&&x.parent().is(".jstree-closed")&&P.settings.dnd.open_timeout&&(!l.event||"dragover"!==l.event.type||u)&&(i&&clearTimeout(i),i=setTimeout(function(e,t){return function(){e.open_node(t)}}(P,x),P.settings.dnd.open_timeout)),y?((C=P.get_node(f,!0)).hasClass(".jstree-dnd-parent")||(e(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),C.addClass("jstree-dnd-parent")),n={ins:P,par:f,pos:"i"!==o||"last"!==w||0!==h||P.is_loaded(E)?h:"last"},a.css({left:c+"px",top:p+"px"}).show(),l.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),l.event.originalEvent&&l.event.originalEvent.dataTransfer&&(l.event.originalEvent.dataTransfer.dropEffect=O?"copy":"move"),r={},m=!0,!1):void 0}),!0===m))return}else{for(y=!0,g=0,v=l.data.nodes.length;v>g&&(y=y&&P.check(l.data.origin&&(l.data.origin.settings.dnd.always_copy||l.data.origin.settings.dnd.copy&&(l.event.metaKey||l.event.ctrlKey))?"copy_node":"move_node",l.data.origin&&l.data.origin!==P?l.data.origin.get_node(l.data.nodes[g]):l.data.nodes[g],e.jstree.root,"last",{dnd:!0,ref:P.get_node(e.jstree.root),pos:"i",origin:l.data.origin,is_multi:l.data.origin&&l.data.origin!==P,is_foreign:!l.data.origin}));g++);if(y)return n={ins:P,par:e.jstree.root,pos:"last"},a.hide(),l.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),void(l.event.originalEvent&&l.event.originalEvent.dataTransfer&&(l.event.originalEvent.dataTransfer.dropEffect=O?"copy":"move"))}e(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),n=!1,l.helper.find(".jstree-icon").removeClass("jstree-ok").addClass("jstree-er"),l.event.originalEvent&&l.event.originalEvent.dataTransfer,a.hide()}}).on("dnd_scroll.vakata.jstree",function(e,t){t&&t.data&&t.data.jstree&&(a.hide(),n=!1,o=!1,t.helper.find(".jstree-icon").first().removeClass("jstree-ok").addClass("jstree-er"))}).on("dnd_stop.vakata.jstree",function(t,s){if(e(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),i&&clearTimeout(i),s&&s.data&&s.data.jstree){a.hide().detach();var l,u,c=[];if(n){for(l=0,u=s.data.nodes.length;u>l;l++)c[l]=s.data.origin?s.data.origin.get_node(s.data.nodes[l]):s.data.nodes[l];n.ins[s.data.origin&&(s.data.origin.settings.dnd.always_copy||s.data.origin.settings.dnd.copy&&(s.event.metaKey||s.event.ctrlKey))?"copy_node":"move_node"](c,n.par,n.pos,!1,!1,!1,s.data.origin)}else(l=e(s.event.target).closest(".jstree")).length&&r&&r.error&&"check"===r.error&&((l=l.jstree(!0))&&l.settings.core.error.call(this,r));o=!1,n=!1}}).on("keyup.jstree keydown.jstree",function(t,s){(s=e.vakata.dnd._get())&&s.data&&s.data.jstree&&("keyup"===t.type&&27===t.which?(i&&clearTimeout(i),n=!1,r=!1,o=!1,i=!1,a.hide().detach(),e.vakata.dnd._clean()):(s.helper.find(".jstree-copy").first()[s.data.origin&&(s.data.origin.settings.dnd.always_copy||s.data.origin.settings.dnd.copy&&(t.metaKey||t.ctrlKey))?"show":"hide"](),o&&(o.metaKey=t.metaKey,o.ctrlKey=t.ctrlKey,e.vakata.dnd._trigger("move",o))))})}),function(e){e.vakata.html={div:e("<div />"),escape:function(t){return e.vakata.html.div.text(t).html()},strip:function(t){return e.vakata.html.div.empty().append(e.parseHTML(t)).text()}};var n={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1};e.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,helper_left:5,helper_top:10,threshold:5,threshold_touch:10},_trigger:function(n,r,o){o===t&&(o=e.vakata.dnd._get()),o.event=r,e(u).triggerHandler("dnd_"+n+".vakata",o)},_get:function(){return{data:n.data,element:n.element,helper:n.helper}},_clean:function(){n.helper&&n.helper.remove(),n.scroll_i&&(clearInterval(n.scroll_i),n.scroll_i=!1),n={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1},e(u).off("mousemove.vakata.jstree touchmove.vakata.jstree",e.vakata.dnd.drag),e(u).off("mouseup.vakata.jstree touchend.vakata.jstree",e.vakata.dnd.stop)},_scroll:function(t){if(!n.scroll_e||!n.scroll_l&&!n.scroll_t)return n.scroll_i&&(clearInterval(n.scroll_i),n.scroll_i=!1),!1;if(!n.scroll_i)return n.scroll_i=setInterval(e.vakata.dnd._scroll,100),!1;if(!0===t)return!1;var r=n.scroll_e.scrollTop(),o=n.scroll_e.scrollLeft();n.scroll_e.scrollTop(r+n.scroll_t*e.vakata.dnd.settings.scroll_speed),n.scroll_e.scrollLeft(o+n.scroll_l*e.vakata.dnd.settings.scroll_speed),(r!==n.scroll_e.scrollTop()||o!==n.scroll_e.scrollLeft())&&e.vakata.dnd._trigger("scroll",n.scroll_e)},start:function(t,r,o){"touchstart"===t.type&&t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0]&&(t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,t.target=u.elementFromPoint(t.originalEvent.changedTouches[0].pageX-window.pageXOffset,t.originalEvent.changedTouches[0].pageY-window.pageYOffset)),n.is_drag&&e.vakata.dnd.stop({});try{t.currentTarget.unselectable="on",t.currentTarget.onselectstart=function(){return!1},t.currentTarget.style&&(t.currentTarget.style.touchAction="none",t.currentTarget.style.msTouchAction="none",t.currentTarget.style.MozUserSelect="none")}catch(e){}return n.init_x=t.pageX,n.init_y=t.pageY,n.data=r,n.is_down=!0,n.element=t.currentTarget,n.target=t.target,n.is_touch="touchstart"===t.type,!1!==o&&(n.helper=e("<div id='vakata-dnd'></div>").html(o).css({display:"block",margin:"0",padding:"0",position:"absolute",top:"-2000px",lineHeight:"16px",zIndex:"10000"})),e(u).on("mousemove.vakata.jstree touchmove.vakata.jstree",e.vakata.dnd.drag),e(u).on("mouseup.vakata.jstree touchend.vakata.jstree",e.vakata.dnd.stop),!1},drag:function(t){if("touchmove"===t.type&&t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0]&&(t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,t.target=u.elementFromPoint(t.originalEvent.changedTouches[0].pageX-window.pageXOffset,t.originalEvent.changedTouches[0].pageY-window.pageYOffset)),n.is_down){if(!n.is_drag){if(!(Math.abs(t.pageX-n.init_x)>(n.is_touch?e.vakata.dnd.settings.threshold_touch:e.vakata.dnd.settings.threshold)||Math.abs(t.pageY-n.init_y)>(n.is_touch?e.vakata.dnd.settings.threshold_touch:e.vakata.dnd.settings.threshold)))return;n.helper&&(n.helper.appendTo(u.body),n.helper_w=n.helper.outerWidth()),n.is_drag=!0,e(n.target).one("click.vakata",!1),e.vakata.dnd._trigger("start",t)}var r=!1,o=!1,i=!1,a=!1,s=!1,l=!1,c=!1,p=!1,d=!1,f=!1;return n.scroll_t=0,n.scroll_l=0,n.scroll_e=!1,e(e(t.target).parentsUntil("body").addBack().get().reverse()).filter(function(){return/^auto|scroll$/.test(e(this).css("overflow"))&&(this.scrollHeight>this.offsetHeight||this.scrollWidth>this.offsetWidth)}).each(function(){var r=e(this),o=r.offset();return this.scrollHeight>this.offsetHeight&&(o.top+r.height()-t.pageY<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_t=1),t.pageY-o.top<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_t=-1)),this.scrollWidth>this.offsetWidth&&(o.left+r.width()-t.pageX<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_l=1),t.pageX-o.left<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_l=-1)),n.scroll_t||n.scroll_l?(n.scroll_e=e(this),!1):void 0}),n.scroll_e||(r=e(u),o=e(window),i=r.height(),a=o.height(),s=r.width(),l=o.width(),c=r.scrollTop(),p=r.scrollLeft(),i>a&&t.pageY-c<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_t=-1),i>a&&a-(t.pageY-c)<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_t=1),s>l&&t.pageX-p<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_l=-1),s>l&&l-(t.pageX-p)<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_l=1),(n.scroll_t||n.scroll_l)&&(n.scroll_e=r)),n.scroll_e&&e.vakata.dnd._scroll(!0),n.helper&&(d=parseInt(t.pageY+e.vakata.dnd.settings.helper_top,10),f=parseInt(t.pageX+e.vakata.dnd.settings.helper_left,10),i&&d+25>i&&(d=i-50),s&&f+n.helper_w>s&&(f=s-(n.helper_w+2)),n.helper.css({left:f+"px",top:d+"px"})),e.vakata.dnd._trigger("move",t),!1}},stop:function(t){if("touchend"===t.type&&t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0]&&(t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,t.target=u.elementFromPoint(t.originalEvent.changedTouches[0].pageX-window.pageXOffset,t.originalEvent.changedTouches[0].pageY-window.pageYOffset)),n.is_drag)t.target!==n.target&&e(n.target).off("click.vakata"),e.vakata.dnd._trigger("stop",t);else if("touchend"===t.type&&t.target===n.target){var r=setTimeout(function(){e(t.target).click()},100);e(t.target).one("click",function(){r&&clearTimeout(r)})}return e.vakata.dnd._clean(),!1}}}(e),e.jstree.defaults.massload=null,e.jstree.plugins.massload=function(t,n){this.init=function(e,t){this._data.massload={},n.init.call(this,e,t)},this._load_nodes=function(t,r,o,i){var a,s,l,u=this.settings.massload,c=(JSON.stringify(t),[]),p=this._model.data;if(!o){for(a=0,s=t.length;s>a;a++)(!p[t[a]]||!p[t[a]].state.loaded&&!p[t[a]].state.failed||i)&&(c.push(t[a]),(l=this.get_node(t[a],!0))&&l.length&&l.addClass("jstree-loading").attr("aria-busy",!0));if(this._data.massload={},c.length){if(e.isFunction(u))return u.call(this,c,e.proxy(function(e){var a,s;if(e)for(a in e)e.hasOwnProperty(a)&&(this._data.massload[a]=e[a]);for(a=0,s=t.length;s>a;a++)(l=this.get_node(t[a],!0))&&l.length&&l.removeClass("jstree-loading").attr("aria-busy",!1);n._load_nodes.call(this,t,r,o,i)},this));if("object"==typeof u&&u&&u.url)return u=e.extend(!0,{},u),e.isFunction(u.url)&&(u.url=u.url.call(this,c)),e.isFunction(u.data)&&(u.data=u.data.call(this,c)),e.ajax(u).done(e.proxy(function(e,a,s){var u,c;if(e)for(u in e)e.hasOwnProperty(u)&&(this._data.massload[u]=e[u]);for(u=0,c=t.length;c>u;u++)(l=this.get_node(t[u],!0))&&l.length&&l.removeClass("jstree-loading").attr("aria-busy",!1);n._load_nodes.call(this,t,r,o,i)},this)).fail(e.proxy(function(e){n._load_nodes.call(this,t,r,o,i)},this))}}return n._load_nodes.call(this,t,r,o,i)},this._load_node=function(t,r){var o,i=this._data.massload[t.id],a=null;return i?(a=this["string"==typeof i?"_append_html_data":"_append_json_data"](t,"string"==typeof i?e(e.parseHTML(i)).filter(function(){return 3!==this.nodeType}):i,function(e){r.call(this,e)}),(o=this.get_node(t.id,!0))&&o.length&&o.removeClass("jstree-loading").attr("aria-busy",!1),delete this._data.massload[t.id],a):n._load_node.call(this,t,r)}},e.jstree.defaults.search={ajax:!1,fuzzy:!1,case_sensitive:!1,show_only_matches:!1,show_only_matches_children:!1,close_opened_onclear:!0,search_leaves_only:!1,search_callback:!1},e.jstree.plugins.search=function(n,r){this.bind=function(){r.bind.call(this),this._data.search.str="",this._data.search.dom=e(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=!1,this._data.search.smc=!1,this._data.search.hdn=[],this.element.on("search.jstree",e.proxy(function(t,n){if(this._data.search.som&&n.res.length){var r,o,i,a,s=this._model.data,l=[];for(r=0,o=n.res.length;o>r;r++)if(s[n.res[r]]&&!s[n.res[r]].state.hidden&&(l.push(n.res[r]),l=l.concat(s[n.res[r]].parents),this._data.search.smc))for(i=0,a=s[n.res[r]].children_d.length;a>i;i++)s[s[n.res[r]].children_d[i]]&&!s[s[n.res[r]].children_d[i]].state.hidden&&l.push(s[n.res[r]].children_d[i]);l=e.vakata.array_remove_item(e.vakata.array_unique(l),e.jstree.root),this._data.search.hdn=this.hide_all(!0),this.show_node(l,!0),this.redraw(!0)}},this)).on("clear_search.jstree",e.proxy(function(e,t){this._data.search.som&&t.res.length&&(this.show_node(this._data.search.hdn,!0),this.redraw(!0))},this))},this.search=function(n,r,o,i,a,s){if(!1===n||""===e.trim(n.toString()))return this.clear_search();i=(i=this.get_node(i))&&i.id?i.id:null,n=n.toString();var l,u,c=this.settings.search,p=!!c.ajax&&c.ajax,d=this._model.data,f=null,h=[],m=[];if(this._data.search.res.length&&!a&&this.clear_search(),o===t&&(o=c.show_only_matches),s===t&&(s=c.show_only_matches_children),!r&&!1!==p)return e.isFunction(p)?p.call(this,n,e.proxy(function(t){t&&t.d&&(t=t.d),this._load_nodes(e.isArray(t)?e.vakata.array_unique(t):[],function(){this.search(n,!0,o,i,a,s)})},this),i):((p=e.extend({},p)).data||(p.data={}),p.data.str=n,i&&(p.data.inside=i),this._data.search.lastRequest&&this._data.search.lastRequest.abort(),this._data.search.lastRequest=e.ajax(p).fail(e.proxy(function(){this._data.core.last_error={error:"ajax",plugin:"search",id:"search_01",reason:"Could not load search parents",data:JSON.stringify(p)},this.settings.core.error.call(this,this._data.core.last_error)},this)).done(e.proxy(function(t){t&&t.d&&(t=t.d),this._load_nodes(e.isArray(t)?e.vakata.array_unique(t):[],function(){this.search(n,!0,o,i,a,s)})},this)),this._data.search.lastRequest);if(a||(this._data.search.str=n,this._data.search.dom=e(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=o,this._data.search.smc=s),f=new e.vakata.search(n,!0,{caseSensitive:c.case_sensitive,fuzzy:c.fuzzy}),e.each(d[i||e.jstree.root].children_d,function(e,t){var r=d[t];r.text&&!r.state.hidden&&(!c.search_leaves_only||r.state.loaded&&0===r.children.length)&&(c.search_callback&&c.search_callback.call(this,n,r)||!c.search_callback&&f.search(r.text).isMatch)&&(h.push(t),m=m.concat(r.parents))}),h.length){for(m=e.vakata.array_unique(m),l=0,u=m.length;u>l;l++)m[l]!==e.jstree.root&&d[m[l]]&&!0===this.open_node(m[l],null,0)&&this._data.search.opn.push(m[l]);a?(this._data.search.dom=this._data.search.dom.add(e(this.element[0].querySelectorAll("#"+e.map(h,function(t){return-1!=="0123456789".indexOf(t[0])?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")}).join(", #")))),this._data.search.res=e.vakata.array_unique(this._data.search.res.concat(h))):(this._data.search.dom=e(this.element[0].querySelectorAll("#"+e.map(h,function(t){return-1!=="0123456789".indexOf(t[0])?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.res=h),this._data.search.dom.children(".jstree-anchor").addClass("jstree-search")}this.trigger("search",{nodes:this._data.search.dom,str:n,res:this._data.search.res,show_only_matches:o})},this.clear_search=function(){this.settings.search.close_opened_onclear&&this.close_node(this._data.search.opn,0),this.trigger("clear_search",{nodes:this._data.search.dom,str:this._data.search.str,res:this._data.search.res}),this._data.search.res.length&&(this._data.search.dom=e(this.element[0].querySelectorAll("#"+e.map(this._data.search.res,function(t){return-1!=="0123456789".indexOf(t[0])?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search")),this._data.search.str="",this._data.search.res=[],this._data.search.opn=[],this._data.search.dom=e()},this.redraw_node=function(t,n,o,i){if((t=r.redraw_node.apply(this,arguments))&&-1!==e.inArray(t.id,this._data.search.res)){var a,s,l=null;for(a=0,s=t.childNodes.length;s>a;a++)if(t.childNodes[a]&&t.childNodes[a].className&&-1!==t.childNodes[a].className.indexOf("jstree-anchor")){l=t.childNodes[a];break}l&&(l.className+=" jstree-search")}return t}},function(e){e.vakata.search=function(t,n,r){r=r||{},!1!==(r=e.extend({},e.vakata.search.defaults,r)).fuzzy&&(r.fuzzy=!0),t=r.caseSensitive?t:t.toLowerCase();var o,i,a,s,l=r.location,u=r.distance,c=r.threshold,p=t.length;return p>32&&(r.fuzzy=!1),r.fuzzy&&(o=1<<p-1,i=function(){var e={},n=0;for(n=0;p>n;n++)e[t.charAt(n)]=0;for(n=0;p>n;n++)e[t.charAt(n)]|=1<<p-n-1;return e}(),a=function(e,t){var n=e/p,r=Math.abs(l-t);return u?n+r/u:r?1:n}),s=function(e){if(e=r.caseSensitive?e:e.toLowerCase(),t===e||-1!==e.indexOf(t))return{isMatch:!0,score:0};if(!r.fuzzy)return{isMatch:!1,score:1};var n,s,u,d,f,h,m,y,g,v=e.length,b=c,S=e.indexOf(t,l),_=p+v,w=1,E=[];for(-1!==S&&(b=Math.min(a(0,S),b),-1!==(S=e.lastIndexOf(t,l+p))&&(b=Math.min(a(0,S),b))),S=-1,n=0;p>n;n++){for(u=0,d=_;d>u;)a(n,l+d)<=b?u=d:_=d,d=Math.floor((_-u)/2+u);for(_=d,h=Math.max(1,l-d+1),m=Math.min(l+d,v)+p,(y=new Array(m+2))[m+1]=(1<<n)-1,s=m;s>=h;s--)if(g=i[e.charAt(s-1)],y[s]=0===n?(y[s+1]<<1|1)&g:(y[s+1]<<1|1)&g|(f[s+1]|f[s])<<1|1|f[s+1],y[s]&o&&(w=a(n,s-1),b>=w)){if(b=w,S=s-1,E.push(S),!(S>l))break;h=Math.max(1,2*l-S)}if(a(n+1,l)>b)break;f=y}return{isMatch:S>=0,score:w}},!0===n?{search:s}:s(n)},e.vakata.search.defaults={location:0,distance:100,threshold:.6,fuzzy:!1,caseSensitive:!1}}(e),e.jstree.defaults.sort=function(e,t){return this.get_text(e)>this.get_text(t)?1:-1},e.jstree.plugins.sort=function(t,n){this.bind=function(){n.bind.call(this),this.element.on("model.jstree",e.proxy(function(e,t){this.sort(t.parent,!0)},this)).on("rename_node.jstree create_node.jstree",e.proxy(function(e,t){this.sort(t.parent||t.node.parent,!1),this.redraw_node(t.parent||t.node.parent,!0)},this)).on("move_node.jstree copy_node.jstree",e.proxy(function(e,t){this.sort(t.parent,!1),this.redraw_node(t.parent,!0)},this))},this.sort=function(t,n){var r,o;if((t=this.get_node(t))&&t.children&&t.children.length&&(t.children.sort(e.proxy(this.settings.sort,this)),n))for(r=0,o=t.children_d.length;o>r;r++)this.sort(t.children_d[r],!1)}};var f=!1;e.jstree.defaults.state={key:"jstree",events:"changed.jstree open_node.jstree close_node.jstree check_node.jstree uncheck_node.jstree",ttl:!1,filter:!1,preserve_loaded:!1},e.jstree.plugins.state=function(t,n){this.bind=function(){n.bind.call(this);var t=e.proxy(function(){this.element.on(this.settings.state.events,e.proxy(function(){f&&clearTimeout(f),f=setTimeout(e.proxy(function(){this.save_state()},this),100)},this)),this.trigger("state_ready")},this);this.element.on("ready.jstree",e.proxy(function(e,n){this.element.one("restore_state.jstree",t),this.restore_state()||t()},this))},this.save_state=function(){var t=this.get_state();this.settings.state.preserve_loaded||delete t.core.loaded;var n={state:t,ttl:this.settings.state.ttl,sec:+new Date};e.vakata.storage.set(this.settings.state.key,JSON.stringify(n))},this.restore_state=function(){var t=e.vakata.storage.get(this.settings.state.key);if(t)try{t=JSON.parse(t)}catch(e){return!1}return!(t&&t.ttl&&t.sec&&+new Date-t.sec>t.ttl)&&(t&&t.state&&(t=t.state),t&&e.isFunction(this.settings.state.filter)&&(t=this.settings.state.filter.call(this,t)),!!t&&(this.settings.state.preserve_loaded||delete t.core.loaded,this.element.one("set_state.jstree",function(n,r){r.instance.trigger("restore_state",{state:e.extend(!0,{},t)})}),this.set_state(t),!0))},this.clear_state=function(){return e.vakata.storage.del(this.settings.state.key)}},function(e,t){e.vakata.storage={set:function(e,t){return window.localStorage.setItem(e,t)},get:function(e){return window.localStorage.getItem(e)},del:function(e){return window.localStorage.removeItem(e)}}}(e),e.jstree.defaults.types={default:{}},e.jstree.defaults.types[e.jstree.root]={},e.jstree.plugins.types=function(n,r){this.init=function(n,o){var i,a;if(o&&o.types&&o.types.default)for(i in o.types)if("default"!==i&&i!==e.jstree.root&&o.types.hasOwnProperty(i))for(a in o.types.default)o.types.default.hasOwnProperty(a)&&o.types[i][a]===t&&(o.types[i][a]=o.types.default[a]);r.init.call(this,n,o),this._model.data[e.jstree.root].type=e.jstree.root},this.refresh=function(t,n){r.refresh.call(this,t,n),this._model.data[e.jstree.root].type=e.jstree.root},this.bind=function(){this.element.on("model.jstree",e.proxy(function(n,r){var o,i,a,s=this._model.data,l=r.nodes,u=this.settings.types,c="default";for(o=0,i=l.length;i>o;o++){if(c="default",s[l[o]].original&&s[l[o]].original.type&&u[s[l[o]].original.type]&&(c=s[l[o]].original.type),s[l[o]].data&&s[l[o]].data.jstree&&s[l[o]].data.jstree.type&&u[s[l[o]].data.jstree.type]&&(c=s[l[o]].data.jstree.type),s[l[o]].type=c,!0===s[l[o]].icon&&u[c].icon!==t&&(s[l[o]].icon=u[c].icon),u[c].li_attr!==t&&"object"==typeof u[c].li_attr)for(a in u[c].li_attr)if(u[c].li_attr.hasOwnProperty(a)){if("id"===a)continue;s[l[o]].li_attr[a]===t?s[l[o]].li_attr[a]=u[c].li_attr[a]:"class"===a&&(s[l[o]].li_attr.class=u[c].li_attr.class+" "+s[l[o]].li_attr.class)}if(u[c].a_attr!==t&&"object"==typeof u[c].a_attr)for(a in u[c].a_attr)if(u[c].a_attr.hasOwnProperty(a)){if("id"===a)continue;s[l[o]].a_attr[a]===t?s[l[o]].a_attr[a]=u[c].a_attr[a]:"href"===a&&"#"===s[l[o]].a_attr[a]?s[l[o]].a_attr.href=u[c].a_attr.href:"class"===a&&(s[l[o]].a_attr.class=u[c].a_attr.class+" "+s[l[o]].a_attr.class)}}s[e.jstree.root].type=e.jstree.root},this)),r.bind.call(this)},this.get_json=function(t,n,o){var i,a,s=this._model.data,l=n?e.extend(!0,{},n,{no_id:!1}):{},u=r.get_json.call(this,t,l,o);if(!1===u)return!1;if(e.isArray(u))for(i=0,a=u.length;a>i;i++)u[i].type=u[i].id&&s[u[i].id]&&s[u[i].id].type?s[u[i].id].type:"default",n&&n.no_id&&(delete u[i].id,u[i].li_attr&&u[i].li_attr.id&&delete u[i].li_attr.id,u[i].a_attr&&u[i].a_attr.id&&delete u[i].a_attr.id);else u.type=u.id&&s[u.id]&&s[u.id].type?s[u.id].type:"default",n&&n.no_id&&(u=this._delete_ids(u));return u},this._delete_ids=function(t){if(e.isArray(t)){for(var n=0,r=t.length;r>n;n++)t[n]=this._delete_ids(t[n]);return t}return delete t.id,t.li_attr&&t.li_attr.id&&delete t.li_attr.id,t.a_attr&&t.a_attr.id&&delete t.a_attr.id,t.children&&e.isArray(t.children)&&(t.children=this._delete_ids(t.children)),t},this.check=function(n,o,i,a,s){if(!1===r.check.call(this,n,o,i,a,s))return!1;o=o&&o.id?o:this.get_node(o),i=i&&i.id?i:this.get_node(i);var l,u,c,p,d=o&&o.id?s&&s.origin?s.origin:e.jstree.reference(o.id):null;switch(d=d&&d._model&&d._model.data?d._model.data:null,n){case"create_node":case"move_node":case"copy_node":if("move_node"!==n||-1===e.inArray(o.id,i.children)){if((l=this.get_rules(i)).max_children!==t&&-1!==l.max_children&&l.max_children===i.children.length)return this._data.core.last_error={error:"check",plugin:"types",id:"types_01",reason:"max_children prevents function: "+n,data:JSON.stringify({chk:n,pos:a,obj:!(!o||!o.id)&&o.id,par:!(!i||!i.id)&&i.id})},!1;if(l.valid_children!==t&&-1!==l.valid_children&&-1===e.inArray(o.type||"default",l.valid_children))return this._data.core.last_error={error:"check",plugin:"types",id:"types_02",reason:"valid_children prevents function: "+n,data:JSON.stringify({chk:n,pos:a,obj:!(!o||!o.id)&&o.id,par:!(!i||!i.id)&&i.id})},!1;if(d&&o.children_d&&o.parents){for(u=0,c=0,p=o.children_d.length;p>c;c++)u=Math.max(u,d[o.children_d[c]].parents.length);u=u-o.parents.length+1}(0>=u||u===t)&&(u=1);do{if(l.max_depth!==t&&-1!==l.max_depth&&l.max_depth<u)return this._data.core.last_error={error:"check",plugin:"types",id:"types_03",reason:"max_depth prevents function: "+n,data:JSON.stringify({chk:n,pos:a,obj:!(!o||!o.id)&&o.id,par:!(!i||!i.id)&&i.id})},!1;i=this.get_node(i.parent),l=this.get_rules(i),u++}while(i)}}return!0},this.get_rules=function(e){if(!(e=this.get_node(e)))return!1;var n=this.get_type(e,!0);return n.max_depth===t&&(n.max_depth=-1),n.max_children===t&&(n.max_children=-1),n.valid_children===t&&(n.valid_children=-1),n},this.get_type=function(t,n){return!!(t=this.get_node(t))&&(n?e.extend({type:t.type},this.settings.types[t.type]):t.type)},this.set_type=function(n,r){var o,i,a,s,l,u,c,p,d=this._model.data;if(e.isArray(n)){for(n=n.slice(),i=0,a=n.length;a>i;i++)this.set_type(n[i],r);return!0}if(o=this.settings.types,n=this.get_node(n),!o[r]||!n)return!1;if((c=this.get_node(n,!0))&&c.length&&(p=c.children(".jstree-anchor")),s=n.type,l=this.get_icon(n),n.type=r,(!0===l||!o[s]||o[s].icon!==t&&l===o[s].icon)&&this.set_icon(n,o[r].icon===t||o[r].icon),o[s]&&o[s].li_attr!==t&&"object"==typeof o[s].li_attr)for(u in o[s].li_attr)if(o[s].li_attr.hasOwnProperty(u)){if("id"===u)continue;"class"===u?(d[n.id].li_attr.class=(d[n.id].li_attr.class||"").replace(o[s].li_attr[u],""),c&&c.removeClass(o[s].li_attr[u])):d[n.id].li_attr[u]===o[s].li_attr[u]&&(d[n.id].li_attr[u]=null,c&&c.removeAttr(u))}if(o[s]&&o[s].a_attr!==t&&"object"==typeof o[s].a_attr)for(u in o[s].a_attr)if(o[s].a_attr.hasOwnProperty(u)){if("id"===u)continue;"class"===u?(d[n.id].a_attr.class=(d[n.id].a_attr.class||"").replace(o[s].a_attr[u],""),p&&p.removeClass(o[s].a_attr[u])):d[n.id].a_attr[u]===o[s].a_attr[u]&&("href"===u?(d[n.id].a_attr[u]="#",p&&p.attr("href","#")):(delete d[n.id].a_attr[u],p&&p.removeAttr(u)))}if(o[r].li_attr!==t&&"object"==typeof o[r].li_attr)for(u in o[r].li_attr)if(o[r].li_attr.hasOwnProperty(u)){if("id"===u)continue;d[n.id].li_attr[u]===t?(d[n.id].li_attr[u]=o[r].li_attr[u],c&&("class"===u?c.addClass(o[r].li_attr[u]):c.attr(u,o[r].li_attr[u]))):"class"===u&&(d[n.id].li_attr.class=o[r].li_attr[u]+" "+d[n.id].li_attr.class,c&&c.addClass(o[r].li_attr[u]))}if(o[r].a_attr!==t&&"object"==typeof o[r].a_attr)for(u in o[r].a_attr)if(o[r].a_attr.hasOwnProperty(u)){if("id"===u)continue;d[n.id].a_attr[u]===t?(d[n.id].a_attr[u]=o[r].a_attr[u],p&&("class"===u?p.addClass(o[r].a_attr[u]):p.attr(u,o[r].a_attr[u]))):"href"===u&&"#"===d[n.id].a_attr[u]?(d[n.id].a_attr.href=o[r].a_attr.href,p&&p.attr("href",o[r].a_attr.href)):"class"===u&&(d[n.id].a_attr.class=o[r].a_attr.class+" "+d[n.id].a_attr.class,p&&p.addClass(o[r].a_attr[u]))}return!0}},e.jstree.defaults.unique={case_sensitive:!1,trim_whitespace:!1,duplicate:function(e,t){return e+" ("+t+")"}},e.jstree.plugins.unique=function(n,r){this.check=function(t,n,o,i,a){if(!1===r.check.call(this,t,n,o,i,a))return!1;if(n=n&&n.id?n:this.get_node(n),!(o=o&&o.id?o:this.get_node(o))||!o.children)return!0;var s,l,u,c="rename_node"===t?i:n.text,p=[],d=this.settings.unique.case_sensitive,f=this.settings.unique.trim_whitespace,h=this._model.data;for(s=0,l=o.children.length;l>s;s++)u=h[o.children[s]].text,d||(u=u.toLowerCase()),f&&(u=u.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),p.push(u);switch(d||(c=c.toLowerCase()),f&&(c=c.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),t){case"delete_node":return!0;case"rename_node":return u=n.text||"",d||(u=u.toLowerCase()),f&&(u=u.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),(s=-1===e.inArray(c,p)||n.text&&u===c)||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_01",reason:"Child with name "+c+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:i,obj:!(!n||!n.id)&&n.id,par:!(!o||!o.id)&&o.id})}),s;case"create_node":return(s=-1===e.inArray(c,p))||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_04",reason:"Child with name "+c+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:i,obj:!(!n||!n.id)&&n.id,par:!(!o||!o.id)&&o.id})}),s;case"copy_node":return(s=-1===e.inArray(c,p))||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_02",reason:"Child with name "+c+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:i,obj:!(!n||!n.id)&&n.id,par:!(!o||!o.id)&&o.id})}),s;case"move_node":return(s=n.parent===o.id&&(!a||!a.is_multi)||-1===e.inArray(c,p))||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_03",reason:"Child with name "+c+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:i,obj:!(!n||!n.id)&&n.id,par:!(!o||!o.id)&&o.id})}),s}return!0},this.create_node=function(n,o,i,a,s){if(!o||o.text===t){if(null===n&&(n=e.jstree.root),!(n=this.get_node(n)))return r.create_node.call(this,n,o,i,a,s);if(!(i=i===t?"last":i).toString().match(/^(before|after)$/)&&!s&&!this.is_loaded(n))return r.create_node.call(this,n,o,i,a,s);o||(o={});var l,u,c,p,d,f,h=this._model.data,m=this.settings.unique.case_sensitive,y=this.settings.unique.trim_whitespace,g=this.settings.unique.duplicate;for(u=l=this.get_string("New node"),c=[],p=0,d=n.children.length;d>p;p++)f=h[n.children[p]].text,m||(f=f.toLowerCase()),y&&(f=f.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),c.push(f);for(p=1,f=u,m||(f=f.toLowerCase()),y&&(f=f.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""));-1!==e.inArray(f,c);)u=g.call(this,l,++p).toString(),f=u,m||(f=f.toLowerCase()),y&&(f=f.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""));o.text=u}return r.create_node.call(this,n,o,i,a,s)}};var h=u.createElement("DIV");if(h.setAttribute("unselectable","on"),h.setAttribute("role","presentation"),h.className="jstree-wholerow",h.innerHTML="&#160;",e.jstree.plugins.wholerow=function(t,n){this.bind=function(){n.bind.call(this),this.element.on("ready.jstree set_state.jstree",e.proxy(function(){this.hide_dots()},this)).on("init.jstree loading.jstree ready.jstree",e.proxy(function(){this.get_container_ul().addClass("jstree-wholerow-ul")},this)).on("deselect_all.jstree",e.proxy(function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")},this)).on("changed.jstree",e.proxy(function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");var n,r,o=!1;for(n=0,r=t.selected.length;r>n;n++)(o=this.get_node(t.selected[n],!0))&&o.length&&o.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("open_node.jstree",e.proxy(function(e,t){this.get_node(t.node,!0).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("hover_node.jstree dehover_node.jstree",e.proxy(function(e,t){"hover_node"===e.type&&this.is_disabled(t.node)||this.get_node(t.node,!0).children(".jstree-wholerow")["hover_node"===e.type?"addClass":"removeClass"]("jstree-wholerow-hovered")},this)).on("contextmenu.jstree",".jstree-wholerow",e.proxy(function(t){if(this._data.contextmenu){t.preventDefault();var n=e.Event("contextmenu",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,pageX:t.pageX,pageY:t.pageY});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(n)}},this)).on("click.jstree",".jstree-wholerow",function(t){t.stopImmediatePropagation();var n=e.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(n).focus()}).on("dblclick.jstree",".jstree-wholerow",function(t){t.stopImmediatePropagation();var n=e.Event("dblclick",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(n).focus()}).on("click.jstree",".jstree-leaf > .jstree-ocl",e.proxy(function(t){t.stopImmediatePropagation();var n=e.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(n).focus()},this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",e.proxy(function(e){return e.stopImmediatePropagation(),this.is_disabled(e.currentTarget)||this.hover_node(e.currentTarget),!1},this)).on("mouseleave.jstree",".jstree-node",e.proxy(function(e){this.dehover_node(e.currentTarget)},this))},this.teardown=function(){this.settings.wholerow&&this.element.find(".jstree-wholerow").remove(),n.teardown.call(this)},this.redraw_node=function(t,r,o,i){if(t=n.redraw_node.apply(this,arguments)){var a=h.cloneNode(!0);-1!==e.inArray(t.id,this._data.core.selected)&&(a.className+=" jstree-wholerow-clicked"),this._data.core.focused&&this._data.core.focused===t.id&&(a.className+=" jstree-wholerow-hovered"),t.insertBefore(a,t.childNodes[0])}return t}},window.customElements&&Object&&Object.create){var m=Object.create(HTMLElement.prototype);m.createdCallback=function(){var t,n={core:{},plugins:[]};for(t in e.jstree.plugins)e.jstree.plugins.hasOwnProperty(t)&&this.attributes[t]&&(n.plugins.push(t),this.getAttribute(t)&&JSON.parse(this.getAttribute(t))&&(n[t]=JSON.parse(this.getAttribute(t))));for(t in e.jstree.defaults.core)e.jstree.defaults.core.hasOwnProperty(t)&&this.attributes[t]&&(n.core[t]=JSON.parse(this.getAttribute(t))||this.getAttribute(t));e(this).jstree(n)};try{window.customElements.define("vakata-jstree",function(){},{prototype:m})}catch(e){}}}})?o.apply(t,i):o)||(e.exports=a)}()}).call(this,n(11))},function(e,t,n){},function(e,t,n){"use strict";function r(e,t){return e===t}function o(e){var t=arguments.length<=1||void 0===arguments[1]?r:arguments[1],n=null,o=null;return function(){for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return null!==n&&n.length===i.length&&i.every(function(e,r){return t(e,n[r])})||(o=e.apply(void 0,i)),n=i,o}}function i(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];var i=0,a=r.pop(),s=function(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(e){return"function"==typeof e})){var n=t.map(function(e){return typeof e}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return t}(r),l=e.apply(void 0,[function(){return i++,a.apply(void 0,arguments)}].concat(n)),u=function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];var i=s.map(function(n){return n.apply(void 0,[e,t].concat(r))});return l.apply(void 0,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(i))};return u.resultFunc=a,u.recomputations=function(){return i},u.resetRecomputations=function(){return i=0},u}}t.__esModule=!0,t.defaultMemoize=o,t.createSelectorCreator=i,t.createStructuredSelector=function(e){var t=arguments.length<=1||void 0===arguments[1]?a:arguments[1];if("object"!=typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var n=Object.keys(e);return t(n.map(function(t){return e[t]}),function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(function(e,t,r){return e[n[r]]=t,e},{})})};var a=t.createSelector=i(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}};var a,s=n(0),l=(a=s)&&a.__esModule?a:{default:a},u=n(696),c=n(960),p=n(730),d=n(832),f=(n(767),n(833)),h=n(835),m=n(964),y=function(e){function t(e){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={currentPage:this.props.currentPage?this.props.currentPage:0,currentSort:{column:null,direction:this.props.defaultSortDescending?-1:1},filter:""},!1!==e.sortBy||!1!==e.defaultSort){var n=e.sortBy||e.defaultSort;this.state.currentSort=this.getCurrentSort(n)}}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l["default"].Component),o(t,[{key:"filterBy",value:function(e){this.setState({filter:e})}},{key:"translateColumnsArray",value:function(e){return e.map(function(e,t){if("string"==typeof e)return{key:e,label:e};if(void 0!==e.sortable){var n=!0===e.sortable?"default":e.sortable;this._sortable[e.key]=n}return e}.bind(this))}},{key:"parseChildData",value:function(e){var t=[],n=void 0;return void 0!==e.children&&l.default.Children.forEach(e.children,function(e){if(null!=e)switch(e.type){case d.Thead:break;case h.Tfoot:void 0!==n&&console.warn("You can only have one <Tfoot>, but more than one was specified.Ignoring all but the last one"),n=e;break;case f.Tr:var r=e.props.data||{};l.default.Children.forEach(e.props.children,function(e){if("object"==typeof e&&null!=e)if(void 0!==e.props.column){var t=void 0;if(void 0!==e.props.data)t=e.props.data;else{if(void 0===e.props.children)return void console.warn("exports.Td specified without a `data` property or children, ignoring");t=e.props.children}r[e.props.column]={value:t,props:(0,u.filterPropsFrom)(e.props),__reactableMeta:!0}}else console.warn("exports.Td specified without a `column` property, ignoring")}),t.push({data:r,props:(0,u.filterPropsFrom)(e.props),__reactableMeta:!0});break;default:console.warn("The only possible children of <Table> are <Thead>, <Tr>, or one <Tfoot>.")}}.bind(this)),{data:t,tfoot:n}}},{key:"initialize",value:function(e){this.data=e.data||[];var t=this.parseChildData(e),n=t.data,r=t.tfoot;this.data=this.data.concat(n),this.tfoot=r,this.initializeSorts(e),this.initializeFilters(e)}},{key:"initializeFilters",value:function(e){for(var t in this._filterable={},e.filterable){var n=e.filterable[t],r=void 0,o=void 0;if(n instanceof Object){if(void 0===n.column){console.warn("Filterable column specified without column name");continue}r=n.column,o="function"==typeof n.filterFunction?n.filterFunction:"default"}else r=n,o="default";this._filterable[r]=o}}},{key:"initializeSorts",value:function(e){for(var t in this._sortable={},e.sortable){var n=e.sortable[t],r=void 0,o=void 0;if(n instanceof Object){if(void 0===n.column)return void console.warn("Sortable column specified without column name");r=n.column,o="function"==typeof n.sortFunction?n.sortFunction:"default"}else r=n,o="default";this._sortable[r]=o}}},{key:"getCurrentSort",value:function(e){var t=void 0,n=void 0;if(e instanceof Object){if(void 0===e.column)return void console.warn("Default column specified without column name");if(t=e.column,void 0!==e.direction)if(1===e.direction||"asc"===e.direction)n=1;else if(-1===e.direction||"desc"===e.direction)n=-1;else{var r=this.props.defaultSortDescending?"descending":"ascending";console.warn("Invalid default sort specified. Defaulting to "+r),n=this.props.defaultSortDescending?-1:1}else n=this.props.defaultSortDescending?-1:1}else t=e,n=this.props.defaultSortDescending?-1:1;return{column:t,direction:n}}},{key:"updateCurrentSort",value:function(e){!1!==e&&e.column!==this.state.currentSort.column&&e.direction!==this.state.currentSort.direction&&this.setState({currentSort:this.getCurrentSort(e)})}},{key:"updateCurrentPage",value:function(e){void 0!==e&&e!==this.state.currentPage&&this.setState({currentPage:e})}},{key:"componentWillMount",value:function(){this.initialize(this.props),this.sortByCurrentSort(),this.filterBy(this.props.filterBy)}},{key:"componentWillReceiveProps",value:function(e){this.initialize(e),this.updateCurrentPage(e.currentPage),this.updateCurrentSort(e.sortBy),this.sortByCurrentSort(),this.filterBy(e.filterBy)}},{key:"applyFilter",value:function(e,t){e=e.toLowerCase();for(var n=[],r=0;r<t.length;r++){var o=t[r].props.data;for(var i in this._filterable)if(void 0!==o[i])if(void 0===this._filterable[i]||"default"===this._filterable[i]){if((0,c.extractDataFrom)(o,i).toString().toLowerCase().indexOf(e)>-1){n.push(t[r]);break}}else if(this._filterable[i]((0,c.extractDataFrom)(o,i).toString(),e)){n.push(t[r]);break}}return n}},{key:"sortByCurrentSort",value:function(){var e=this.state.currentSort;null!==e.column&&this.data.sort(function(t,n){var r=(0,c.extractDataFrom)(t,e.column);r=(0,p.isUnsafe)(r)?r.toString():r||"";var o=(0,c.extractDataFrom)(n,e.column);return o=(0,p.isUnsafe)(o)?o.toString():o||"",void 0===this._sortable[e.column]||"default"===this._sortable[e.column]?r<o?-1*e.direction:r>o?1*e.direction:0:1===e.direction?this._sortable[e.column](r,o):this._sortable[e.column](o,r)}.bind(this))}},{key:"onSort",value:function(e){if(void 0!==this._sortable[e]){var t=this.state.currentSort;t.column===e?t.direction*=-1:(t.column=e,t.direction=this.props.defaultSortDescending?-1:1),this.setState({currentSort:t}),this.sortByCurrentSort(),"function"==typeof this.props.onSort&&this.props.onSort(t)}}},{key:"render",value:function(){var e=this,t=[],n=void 0,o=!1,i=void 0===this.props.hideTableHeader,a=null;if(this.props.children&&(this.props.children.length>0&&this.props.children[0]&&this.props.children[0].type===d.Thead?a=this.props.children[0]:this.props.children.type===d.Thead&&(a=this.props.children)),(n=null!==a?d.Thead.getColumns(a):this.props.columns||[]).length>0&&(o=!0,n=this.translateColumnsArray(n)),this.data&&"function"==typeof this.data.map&&(t=t.concat(this.data.map(function(e,t){var i=e,a={};for(var s in!0===e.__reactableMeta&&(i=e.data,a=e.props),i)i.hasOwnProperty(s)&&!1===o&&function(){var e={key:s,label:s};void 0===n.find(function(t){return t.key===e.key})&&n.push(e)}();return l.default.createElement(f.Tr,r({columns:n,key:t,data:i},a))}.bind(this)))),!0===this.props.sortable)for(var s=0;s<n.length;s++)this._sortable[n[s].key]="default";var c=!1;this.props.filterable&&Array.isArray(this.props.filterable)&&this.props.filterable.length>0&&!this.props.hideFilterInput&&(c=!0);var p=t;""!==this.state.filter&&(p=this.applyFilter(this.state.filter,p));var h=0,y=!1,g=void 0,v=this.state.currentPage,b=this.props.pageButtonLimit||10,S=p;this.props.itemsPerPage>0&&(h=this.props.itemsPerPage,v>(g=Math.ceil(p.length/h))-1&&(v=g-1),y=!0,S=p.slice(v*h,(v+1)*h));var _=(0,u.filterPropsFrom)(this.props),w=this.props.noDataText?l.default.createElement("tr",{className:"reactable-no-data"},l.default.createElement("td",{colSpan:n.length},this.props.noDataText)):null,E=null;return n&&n.length>0&&i&&(E=l.default.createElement(d.Thead,{columns:n,filtering:c,onFilter:function(t){e.setState({filter:t}),e.props.onFilter&&e.props.onFilter(t)},filterPlaceholder:this.props.filterPlaceholder,filterClassName:this.props.filterClassName,currentFilter:this.state.filter,sort:this.state.currentSort,sortableColumns:this._sortable,onSort:this.onSort.bind(this),key:"thead"})),l.default.createElement("table",_,E,l.default.createElement("tbody",{className:"reactable-data",key:"tbody"},S.length>0?S:w),!0===y?l.default.createElement(m.Paginator,{colSpan:n.length,pageButtonLimit:b,numPages:g,currentPage:v,onPageChange:function(t){e.setState({currentPage:t}),e.props.onPageChange&&e.props.onPageChange(t)},previousPageLabel:this.props.previousPageLabel,nextPageLabel:this.props.nextPageLabel,key:"paginator"}):null,this.tfoot)}}]),t}();t.Table=y,y.defaultProps={sortBy:!1,defaultSort:!1,defaultSortDescending:!1,itemsPerPage:0,filterBy:"",hideFilterInput:!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractDataFrom=function(e,t){var n;n=null!=e&&!0===e.__reactableMeta?e.data[t]:e[t];null!=n&&!0===n.__reactableMeta&&(n=void 0!==n.props.value&&null!==n.props.value?n.props.value:n.value);return(0,r.stringable)(n)?n:""};var r=n(831)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=i(n(0)),u=i(n(21)),c=function(e){function t(){a(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return s(t,l["default"].Component),r(t,[{key:"onChange",value:function(){this.props.onFilter(u.default.findDOMNode(this).value)}},{key:"render",value:function(){return l.default.createElement("input",{type:"text",className:this.props.className,placeholder:this.props.placeholder,value:this.props.value,onKeyUp:this.onChange.bind(this),onChange:this.onChange.bind(this)})}}]),t}();t.FiltererInput=c;var p=function(e){function t(){a(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return s(t,l["default"].Component),r(t,[{key:"render",value:function(){if(void 0===this.props.colSpan)throw new TypeError("Must pass a colSpan argument to Filterer");return l.default.createElement("tr",{className:"reactable-filterer"},l.default.createElement("td",{colSpan:this.props.colSpan},l.default.createElement(c,{onFilter:this.props.onFilter,value:this.props.value,placeholder:this.props.placeholder,className:this.props.className?"reactable-filter-input "+this.props.className:"reactable-filter-input"})))}}]),t}();t.Filterer=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isReactComponent=function(e){return null!==e&&"object"==typeof e&&void 0!==e.props}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toArray=function(e){var t=[];for(var n in e)t[n]=e;return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}};var i,a=n(0),s=(i=a)&&i.__esModule?i:{default:i};function l(e){return"#page-"+(e+1)}var u=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["default"].Component),r(t,[{key:"handlePrevious",value:function(e){e.preventDefault(),this.props.onPageChange(this.props.currentPage-1)}},{key:"handleNext",value:function(e){e.preventDefault(),this.props.onPageChange(this.props.currentPage+1)}},{key:"handlePageButton",value:function(e,t){t.preventDefault(),this.props.onPageChange(e)}},{key:"renderPrevious",value:function(){if(this.props.currentPage>0)return s.default.createElement("a",{className:"reactable-previous-page",href:l(this.props.currentPage-1),onClick:this.handlePrevious.bind(this)},this.props.previousPageLabel||"Previous")}},{key:"renderNext",value:function(){if(this.props.currentPage<this.props.numPages-1)return s.default.createElement("a",{className:"reactable-next-page",href:l(this.props.currentPage+1),onClick:this.handleNext.bind(this)},this.props.nextPageLabel||"Next")}},{key:"renderPageButton",value:function(e,t){return s.default.createElement("a",{className:e,key:t,href:l(t),onClick:this.handlePageButton.bind(this,t)},t+1)}},{key:"render",value:function(){if(void 0===this.props.colSpan)throw new TypeError("Must pass a colSpan argument to Paginator");if(void 0===this.props.numPages)throw new TypeError("Must pass a non-zero numPages argument to Paginator");if(void 0===this.props.currentPage)throw new TypeError("Must pass a currentPage argument to Paginator");for(var e=[],t=this.props.pageButtonLimit,n=this.props.currentPage,r=this.props.numPages,o=Math.round(t/2),i=t-o,a=0;a<this.props.numPages;a++){var l=a,u="reactable-page-button";n===a&&(u+=" reactable-current-page"),e.push(this.renderPageButton(u,l))}return n-t+o>0&&(n>r-o?e.splice(0,r-t):e.splice(0,n-t+o)),r-n>i&&e.splice(t,e.length-t),s.default.createElement("tbody",{className:"reactable-pagination"},s.default.createElement("tr",null,s.default.createElement("td",{colSpan:this.props.colSpan},this.renderPrevious(),e,this.renderNext())))}}]),t}();t.Paginator=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={Numeric:function(e,t){var n=parseFloat(e.toString().replace(/,/g,"")),r=parseFloat(t.toString().replace(/,/g,""));if(isNaN(n)&&isNaN(r))n=e,r=t;else{if(isNaN(n))return 1;if(isNaN(r))return-1}return n<r?-1:n>r?1:0},NumericInteger:function(e,t){return isNaN(e)||isNaN(t)?e>t?1:-1:e-t},Currency:function(e,n){return e=e.replace(/[^0-9\.\-\,]+/g,""),n=n.replace(/[^0-9\.\-\,]+/g,""),t.Sort.Numeric(e,n)},Date:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,n){var r=Date.parse(e),o=Date.parse(n);return isNaN(r)||isNaN(o)?t.Sort.Numeric(e,n):r>o?1:o>r?-1:0}),CaseInsensitive:function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}};t.Sort=r},function(e,t,n){var r;"undefined"!=typeof self&&self,r=function(e,t,n){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=l(n(1)),s=l(n(2));function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),i(t,[{key:"propsWith",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={};return Object.keys(this.props).forEach(function(r){if(-1!==r.search(e)){var o=t?r.replace(e,""):r;n[o]=this.props[r]}},this),n}},{key:"componentWillUnmount",value:function(){this.clipboard&&this.clipboard.destroy()}},{key:"componentDidMount",value:function(){var e=this.props.options||this.propsWith(/^option-/,!0),t=a.default.version.match(/0\.13(.*)/)?this.refs.element.getDOMNode():this.element,r=n(3);this.clipboard=new r(t,e);var o=this.propsWith(/^on/,!0);Object.keys(o).forEach(function(e){this.clipboard.on(e.toLowerCase(),this.props["on"+e])},this)}},{key:"render",value:function(){var e=this,t=o({type:this.getType(),className:this.props.className||"",style:this.props.style||{},ref:function(t){e.element=t},onClick:this.props.onClick},this.propsWith(/^data-/),this.propsWith(/^button-/,!0));return a.default.createElement(this.getComponent(),t,this.props.children)}},{key:"getType",value:function(){return"button"===this.getComponent()||"input"===this.getComponent()?this.props.type||"button":void 0}},{key:"getComponent",value:function(){return this.props.component||"button"}}]),t}();u.propTypes={options:function(e,t,n){var o=e[t];if(o&&"object"!==(void 0===o?"undefined":r(o))||Array.isArray(o))return new Error("Invalid props '"+t+"' supplied to '"+n+"'. '"+t+"' is not an object.");if(void 0!==e["option-text"]&&"function"!=typeof e["option-text"])return new Error("Invalid props 'option-text' supplied to '"+n+"'. 'option-text' is not a function.")},type:s.default.string,className:s.default.string,style:s.default.object,component:s.default.string,children:s.default.oneOfType([s.default.element,s.default.string,s.default.number,s.default.object])},u.defaultProps={onClick:function(){}},t.default=u},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n}])},e.exports=r(n(0),n(1),n(613))},function(e,t,n){},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(969);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r(o).default}});var i=n(837);Object.defineProperty(t,"Fade",{enumerable:!0,get:function(){return r(i).default}});var a=n(971);Object.defineProperty(t,"Bounce",{enumerable:!0,get:function(){return r(a).default}});var s=n(972);Object.defineProperty(t,"Roll",{enumerable:!0,get:function(){return r(s).default}});var l=n(973);Object.defineProperty(t,"Slide",{enumerable:!0,get:function(){return r(l).default}});var u=n(974);Object.defineProperty(t,"Flip",{enumerable:!0,get:function(){return r(u).default}}),Object.defineProperty(t,"Reveal",{enumerable:!0,get:function(){return r(o).default}});var c=n(975);Object.defineProperty(t,"Rotate",{enumerable:!0,get:function(){return r(c).default}});var p=n(976);Object.defineProperty(t,"LightSpeed",{enumerable:!0,get:function(){return r(p).default}});var d=n(977);Object.defineProperty(t,"Zoom",{enumerable:!0,get:function(){return r(d).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){function t(e){return e?h?{duration:u,delay:c,count:p,forever:d,className:h,style:{}}:y:f?{duration:void 0===r?o:r,delay:i,count:a,forever:s,className:f,style:{}}:m}var n=e.children,r=e.timeout,o=e.duration,i=e.delay,a=e.count,s=e.forever,u=e.durationOut,c=e.delayOut,p=e.countOut,d=e.foreverOut,f=e.effect,h=e.effectOut,m=e.inEffect,y=e.outEffect,g=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children","timeout","duration","delay","count","forever","durationOut","delayOut","countOut","foreverOut","effect","effectOut","inEffect","outEffect"]);return(0,l.default)(g,t(!1),t(!0),n)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(1),s=n(617),l=r(n(623)),u=r(n(837)),c={in:a.object,out:(0,a.oneOfType)([a.object,(0,a.oneOf)([!1])]),effect:a.string,effectOut:a.string,duration:a.number,timeout:a.number,delay:a.number,count:a.number,forever:a.bool,durationOut:a.number,delayOut:a.number,countOut:a.number,foreverOut:a.bool},p=i({},s.defaults,{durationOut:s.defaults.duration,delayOut:s.defaults.delay,countOut:s.defaults.count,foreverOut:s.defaults.forever,inEffect:(0,u.default)(s.defaults),outEffect:(0,u.default)(i({out:!0},s.defaults))});o.propTypes=c,o.defaultProps=p,t.default=o,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=(r=l)&&r.__esModule?r:{default:r},c=n(1),p=n(617),d=(0,c.shape)({make:c.func,duration:c.number.isRequired,delay:c.number.isRequired,forever:c.bool,count:c.number.isRequired,style:c.object.isRequired,reverse:c.bool}),f={collapse:c.bool,collapseEl:c.element,cascade:c.bool,wait:c.number,force:c.bool,disabled:c.bool,appear:c.bool,enter:c.bool,exit:c.bool,fraction:c.number,refProp:c.string,innerRef:c.func,onReveal:c.func,unmountOnExit:c.bool,mountOnEnter:c.bool,inEffect:d.isRequired,outEffect:(0,c.oneOfType)([d,(0,c.oneOf)([!1])]).isRequired,ssrReveal:c.bool,collapseOnly:c.bool,ssrFadeout:c.bool},h={transitionGroup:c.object},m=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.isOn=void 0===e.when||!!e.when,r.state={collapse:e.collapse?t.getInitialCollapseStyle(e):void 0,style:{opacity:r.isOn&&!e.ssrReveal||!e.outEffect?void 0:0}},r.savedChild=!1,r.isShown=!1,p.observerMode?r.handleObserve=r.handleObserve.bind(r):(r.revealHandler=r.makeHandler(r.reveal),r.resizeHandler=r.makeHandler(r.resize)),r.saveRef=r.saveRef.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),s(t,[{key:"saveRef",value:function(e){this.childRef&&this.childRef(e),this.props.innerRef&&this.props.innerRef(e),this.el!==e&&(this.el=e&&"offsetHeight"in e?e:void 0,this.observe(this.props,!0))}},{key:"invisible",value:function(){this&&this.el&&(this.savedChild=!1,this.isShown||(this.setState({hasExited:!0,collapse:this.props.collapse?a({},this.state.collapse,{visibility:"hidden"}):null,style:{opacity:0}}),!p.observerMode&&this.props.collapse&&window.document.dispatchEvent(p.collapseend)))}},{key:"animationEnd",value:function(e,t,n){var r=this,o=n.forever,i=n.count,a=n.delay,s=n.duration;if(!o){this.animationEndTimeout=window.setTimeout(function(){r&&r.el&&(r.animationEndTimeout=void 0,e.call(r))},a+(s+(t?s:0)*i))}}},{key:"getDimensionValue",value:function(){return this.el.offsetHeight+parseInt(window.getComputedStyle(this.el,null).getPropertyValue("margin-top"),10)+parseInt(window.getComputedStyle(this.el,null).getPropertyValue("margin-bottom"),10)}},{key:"collapse",value:function(e,t,n){var r=n.duration+(t.cascade?n.duration:0),o=this.isOn?this.getDimensionValue():0,i=void 0,a=void 0;if(t.collapseOnly)i=n.duration/3,a=n.delay;else{var s=r>>2,l=s>>1;i=s,a=n.delay+(this.isOn?0:r-s-l),e.style.animationDuration=r-s+(this.isOn?l:-l)+"ms",e.style.animationDelay=n.delay+(this.isOn?s-l:0)+"ms"}return e.collapse={height:o,transition:"height "+i+"ms ease "+a+"ms",overflow:t.collapseOnly?"hidden":void 0},e}},{key:"animate",value:function(e){if(this&&this.el&&(this.unlisten(),this.isShown!==this.isOn)){this.isShown=this.isOn;var t=!this.isOn&&e.outEffect,n=e[t?"outEffect":"inEffect"],r="style"in n&&n.style.animationName||void 0,o=void 0;e.collapseOnly?o={hasAppeared:!0,hasExited:!1,style:{opacity:1}}:((e.outEffect||this.isOn)&&n.make&&(r=n.make),o={hasAppeared:!0,hasExited:!1,collapse:void 0,style:a({},n.style,{animationDuration:n.duration+"ms",animationDelay:n.delay+"ms",animationIterationCount:n.forever?"infinite":n.count,opacity:1,animationName:r}),className:n.className}),this.setState(e.collapse?this.collapse(o,e,n):o),t?(this.savedChild=u.default.cloneElement(this.getChild()),this.animationEnd(this.invisible,e.cascade,n)):this.savedChild=!1,this.onReveal(e)}}},{key:"onReveal",value:function(e){e.onReveal&&this.isOn&&(this.onRevealTimeout&&(this.onRevealTimeout=window.clearTimeout(this.onRevealTimeout)),e.wait?this.onRevealTimeout=window.setTimeout(e.onReveal,e.wait):e.onReveal())}},{key:"componentWillUnmount",value:function(){this.unlisten(),p.ssr&&(0,p.disableSsr)()}},{key:"handleObserve",value:function(e,t){i(e,1)[0].intersectionRatio>0&&(t.disconnect(),this.observer=null,this.reveal(this.props,!0))}},{key:"observe",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.el&&p.observerMode){if(this.observer){if(!t)return;this.observer.disconnect()}else if(t)return;this.observer=new IntersectionObserver(this.handleObserve,{threshold:e.fraction}),this.observer.observe(this.el)}}},{key:"reveal",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];p.globalHide||(0,p.hideAll)(),this&&this.el&&(e||(e=this.props),p.ssr&&(0,p.disableSsr)(),this.isOn&&this.isShown&&void 0!==e.spy?(this.isShown=!1,this.setState({style:{}}),window.setTimeout(function(){return t.reveal(e)},200)):n||this.inViewport(e)||e.force?this.animate(e):p.observerMode?this.observe(e):this.listen())}},{key:"componentDidMount",value:function(){var e=this;if(this.el&&!this.props.disabled){this.props.collapseOnly||("make"in this.props.inEffect&&this.props.inEffect.make(!1,this.props),void 0!==this.props.when&&this.props.outEffect&&"make"in this.props.outEffect&&this.props.outEffect.make(!0,this.props));var n=this.context.transitionGroup,r=n&&!n.isMounting?!("enter"in this.props&&!1===this.props.enter):this.props.appear;return this.isOn&&((void 0!==this.props.when||void 0!==this.props.spy)&&!r||p.ssr&&!p.fadeOutEnabled&&!this.props.ssrFadeout&&this.props.outEffect&&!this.props.ssrReveal&&t.getTop(this.el)<window.pageYOffset+window.innerHeight)?(this.isShown=!0,this.setState({hasAppeared:!0,collapse:this.props.collapse?{height:this.getDimensionValue()}:this.state.collapse,style:{opacity:1}}),void this.onReveal(this.props)):p.ssr&&(p.fadeOutEnabled||this.props.ssrFadeout)&&this.props.outEffect&&t.getTop(this.el)<window.pageYOffset+window.innerHeight?(this.setState({style:{opacity:0,transition:"opacity 1000ms 1000ms"}}),void window.setTimeout(function(){return e.reveal(e.props,!0)},2e3)):void(this.isOn&&(this.props.force?this.animate(this.props):this.reveal(this.props)))}}},{key:"cascade",value:function(e){var t=this,n=void 0;n="string"==typeof e?e.split("").map(function(e,t){return u.default.createElement("span",{key:t,style:{display:"inline-block",whiteSpace:"pre"}},e)}):u.default.Children.toArray(e);var r=this.props[this.isOn||!this.props.outEffect?"inEffect":"outEffect"],i=r.duration,s=r.reverse,l=n.length,c=2*i;this.props.collapse&&(c=parseInt(this.state.style.animationDuration,10),i=c/2);var d=s?l:0;return n.map(function(e){return"object"===(void 0===e?"undefined":o(e))&&e?u.default.cloneElement(e,{style:a({},e.props.style,t.state.style,{animationDuration:Math.round((0,p.cascade)(s?d--:d++,0,l,i,c))+"ms"})}):e})}},{key:"componentWillReceiveProps",value:function(e){void 0!==e.when&&(this.isOn=!!e.when),e.fraction!==this.props.fraction&&this.observe(e,!0),!this.isOn&&e.onExited&&"exit"in e&&!1===e.exit?e.onExited():e.disabled||(e.collapse&&!this.props.collapse&&(this.setState({style:{},collapse:t.getInitialCollapseStyle(e)}),this.isShown=!1),e.when===this.props.when&&e.spy===this.props.spy||this.reveal(e),this.onRevealTimeout&&!this.isOn&&(this.onRevealTimeout=window.clearTimeout(this.onRevealTimeout)))}},{key:"getChild",value:function(){if(this.savedChild&&!this.props.disabled)return this.savedChild;if("object"===o(this.props.children)){var e=u.default.Children.only(this.props.children);return"type"in e&&"string"==typeof e.type||"ref"!==this.props.refProp?e:u.default.createElement("div",null,e)}return u.default.createElement("div",null,this.props.children)}},{key:"render",value:function(){var e;e=this.state.hasAppeared?!this.props.unmountOnExit||!this.state.hasExited||this.isOn:!this.props.mountOnEnter||this.isOn;var t=this.getChild();"function"==typeof t.ref&&(this.childRef=t.ref);var n=!1,r=t.props,o=r.style,i=r.className,s=r.children,l=this.props.disabled?i:(this.props.outEffect?p.namespace:"")+(this.state.className?" "+this.state.className:"")+(i?" "+i:"")||void 0,c=void 0;"function"==typeof this.state.style.animationName&&(this.state.style.animationName=this.state.style.animationName(!this.isOn,this.props)),this.props.cascade&&!this.props.disabled&&s&&this.state.style.animationName?(n=this.cascade(s),c=a({},o,{opacity:1})):c=this.props.disabled?o:a({},o,this.state.style);var d=a({},this.props.props,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({className:l,style:c},this.props.refProp,this.saveRef)),f=u.default.cloneElement(t,d,e?n||s:void 0);return void 0!==this.props.collapse?this.props.collapseEl?u.default.cloneElement(this.props.collapseEl,{style:a({},this.props.collapseEl.style,this.props.disabled?void 0:this.state.collapse),children:f}):u.default.createElement("div",{style:this.props.disabled?void 0:this.state.collapse,children:f}):f}},{key:"makeHandler",value:function(e){var t=this,n=function(){e.call(t,t.props),t.ticking=!1};return function(){t.ticking||((0,p.raf)(n),t.ticking=!0)}}},{key:"inViewport",value:function(e){if(!this.el||window.document.hidden)return!1;var n=this.el.offsetHeight,r=window.pageYOffset-t.getTop(this.el),o=Math.min(n,window.innerHeight)*(p.globalHide?e.fraction:0);return r>o-window.innerHeight&&r<n-o}},{key:"resize",value:function(e){this&&this.el&&this.isOn&&this.inViewport(e)&&(this.unlisten(),this.isShown=this.isOn,this.setState({hasExited:!this.isOn,hasAppeared:!0,collapse:void 0,style:{opacity:this.isOn||!e.outEffect?1:0}}),this.onReveal(e))}},{key:"listen",value:function(){p.observerMode||this.isListener||(this.isListener=!0,window.addEventListener("scroll",this.revealHandler,{passive:!0}),window.addEventListener("orientationchange",this.revealHandler,{passive:!0}),window.document.addEventListener("visibilitychange",this.revealHandler,{passive:!0}),window.document.addEventListener("collapseend",this.revealHandler,{passive:!0}),window.addEventListener("resize",this.resizeHandler,{passive:!0}))}},{key:"unlisten",value:function(){!p.observerMode&&this.isListener&&(window.removeEventListener("scroll",this.revealHandler,{passive:!0}),window.removeEventListener("orientationchange",this.revealHandler,{passive:!0}),window.document.removeEventListener("visibilitychange",this.revealHandler,{passive:!0}),window.document.removeEventListener("collapseend",this.revealHandler,{passive:!0}),window.removeEventListener("resize",this.resizeHandler,{passive:!0}),this.isListener=!1),this.onRevealTimeout&&(this.onRevealTimeout=window.clearTimeout(this.onRevealTimeout)),this.animationEndTimeout&&(this.animationEndTimeout=window.clearTimeout(this.animationEndTimeout))}}],[{key:"getInitialCollapseStyle",value:function(e){return{height:0,visibility:e.when?void 0:"hidden"}}},{key:"getTop",value:function(e){for(;void 0===e.offsetTop;)e=e.parentNode;for(var t=e.offsetTop;e.offsetParent;t+=e.offsetTop)e=e.offsetParent;return t}}]),t}();m.propTypes=f,m.defaultProps={fraction:.2,refProp:"ref"},m.contextTypes=h,m.displayName="RevealBase",t.default=m,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){var n=t.left,r=t.right,o=t.up,i=t.down,a=t.top,s=t.bottom,l=t.mirror,c=t.opposite,d=(n?1:0)|(r?2:0)|(a||i?4:0)|(s||o?8:0)|(l?16:0)|(c?32:0)|(e?64:0);if(p.hasOwnProperty(d))return p[d];if(!l!=!(e&&c)){var f=[r,n,s,a,i,o];n=f[0],r=f[1],a=f[2],s=f[3],o=f[4],i=f[5]}var h,m=n||r,y=a||s||o||i,g=void 0,v=void 0,b=void 0,S=void 0,_=void 0,w=void 0,E=void 0,O=void 0,C=void 0,P=void 0,x=void 0,T=void 0,k=void 0;return e?(b=m?(r?"-":"")+"20px":0,S=y?(o||s?"":"-")+"10px":"0",_=(i||a?"":"-")+"20px",T=m?(n?"-":"")+"2000px":"0",k=y?(i||a?"-":"")+"2000px":"0"):(g=m?(n?"-":"")+"3000px":"0",v=y?(i||a?"-":"")+"3000px":"0",w=m?(r?"-":"")+"25px":"0",E=y?(o||s?"-":"")+"25px":"0",O=m?(n?"-":"")+"10px":"0",C=y?(i||a?"-":"")+"10px":"0",P=m?(r?"-":"")+"5px":"0",x=y?(o||s?"-":"")+"5px":"0"),h=m||y?e?"\n        20% {\n          transform: translate3d("+b+", "+S+", 0);\n          }\n        "+(y?"40%, 45% {\n            opacity: 1;\n            transform: translate3d(0, "+_+", 0);\n          }":"")+"\n          to {\n            opacity: 0;\n            transform: translate3d("+T+", "+k+", 0);\n        }\n      ":"from, 60%, 75%, 90%, to {\n        animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);\n      }\n      from {\n        opacity: 0;\n        transform: translate3d("+g+", "+v+", 0);\n      }\n      60% {\n        opacity: 1;\n        transform: translate3d("+w+", "+E+", 0);\n      }\n      75% {\n        transform: translate3d("+O+", "+C+", 0);\n      }\n      90% {\n        transform: translate3d("+P+", "+x+", 0);\n      }\n      to {\n        transform: none;\n      }":e?"20% {\n          transform: scale3d(.9, .9, .9);\n        }\n        50%, 55% {\n          opacity: 1;\n          transform: scale3d(1.1, 1.1, 1.1);\n        }\n        to {\n          opacity: 0;\n          transform: scale3d(.3, .3, .3);\n      }":"from, 20%, 40%, 60%, 80%, to {\n        animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);\n      }\n      0% {\n        opacity: 0;\n        transform: scale3d(.3, .3, .3);\n      }\n      20% {\n        transform: scale3d(1.1, 1.1, 1.1);\n      }\n      40% {\n        transform: scale3d(.9, .9, .9);\n      }\n      60% {\n        opacity: 1;\n        transform: scale3d(1.03, 1.03, 1.03);\n      }\n      80% {\n        transform: scale3d(.97, .97, .97);\n      }\n      to {\n        opacity: 1;\n        transform: scale3d(1, 1, 1);\n      }",p[d]=(0,u.animation)(h),p[d]}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.defaults,t=e.children,n=(e.out,e.forever),o=e.timeout,i=e.duration,a=void 0===i?u.defaults.duration:i,s=e.delay,c=void 0===s?u.defaults.delay:s,p=e.count,d=void 0===p?u.defaults.count:p,f=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children","out","forever","timeout","duration","delay","count"]),h={make:r,duration:void 0===o?a:o,delay:c,forever:n,count:d,style:{animationFillMode:"both"},reverse:f.left};return(0,l.default)(f,h,h,t)}Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(1),s=n(623),l=(i=s)&&i.__esModule?i:{default:i},u=n(617),c={out:a.bool,left:a.bool,right:a.bool,top:a.bool,bottom:a.bool,mirror:a.bool,opposite:a.bool,duration:a.number,timeout:a.number,delay:a.number,count:a.number,forever:a.bool},p={};o.propTypes=c,t.default=o,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){var n=t.left,r=t.right,o=t.up,i=t.down,a=t.top,s=t.bottom,l=t.big,c=t.mirror,d=t.opposite,f=(n?1:0)|(r?2:0)|(a||i?4:0)|(s||o?8:0)|(c?16:0)|(d?32:0)|(e?64:0)|(l?128:0);if(p.hasOwnProperty(f))return p[f];if(!c!=!(e&&d)){var h=[r,n,s,a,i,o];n=h[0],r=h[1],a=h[2],s=h[3],o=h[4],i=h[5]}var m=l?"2000px":"100%",y=n?"-"+m:r?m:"0",g=i||a?"-"+m:o||s?m:"0";return p[f]=(0,u.animation)("\n    "+(e?"to":"from")+" {opacity: 0;transform: translate3d("+y+", "+g+", 0) rotate3d(0, 0, 1, -120deg);}\n\t  "+(e?"from":"to")+" {opacity: 1;transform: none}\n  "),p[f]}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.defaults,t=e.children,n=(e.out,e.forever),o=e.timeout,i=e.duration,a=void 0===i?u.defaults.duration:i,l=e.delay,c=void 0===l?u.defaults.delay:l,p=e.count,d=void 0===p?u.defaults.count:p,f=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children","out","forever","timeout","duration","delay","count"]),h={make:r,duration:void 0===o?a:o,delay:c,forever:n,count:d,style:{animationFillMode:"both"}};return(0,s.default)(f,h,h,t)}Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(623),s=(i=a)&&i.__esModule?i:{default:i},l=n(1),u=n(617),c={out:l.bool,left:l.bool,right:l.bool,top:l.bool,bottom:l.bool,big:l.bool,mirror:l.bool,opposite:l.bool,duration:l.number,timeout:l.number,delay:l.number,count:l.number,forever:l.bool},p={};o.propTypes=c,t.default=o,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){var n=t.left,r=t.right,o=t.up,i=t.down,a=t.top,s=t.bottom,l=t.big,c=t.mirror,d=t.opposite,f=(n?1:0)|(r?2:0)|(a||i?4:0)|(s||o?8:0)|(c?16:0)|(d?32:0)|(e?64:0)|(l?128:0);if(p.hasOwnProperty(f))return p[f];var h=n||r||o||i||a||s,m=void 0,y=void 0;if(h){if(!c!=!(e&&d)){var g=[r,n,s,a,i,o];n=g[0],r=g[1],a=g[2],s=g[3],o=g[4],i=g[5]}var v=l?"2000px":"100%";m=n?"-"+v:r?v:"0",y=i||a?"-"+v:o||s?v:"0"}return p[f]=(0,u.animation)((e?"to":"from")+" {"+(h?" transform: translate3d("+m+", "+y+", 0);":"")+"}\n     "+(e?"from":"to")+" {transform: none;} "),p[f]}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.defaults,t=e.children,n=(e.out,e.forever),o=e.timeout,i=e.duration,a=void 0===i?u.defaults.duration:i,s=e.delay,c=void 0===s?u.defaults.delay:s,p=e.count,d=void 0===p?u.defaults.count:p,f=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children","out","forever","timeout","duration","delay","count"]),h={make:r,duration:void 0===o?a:o,delay:c,forever:n,count:d,style:{animationFillMode:"both"},reverse:f.left};return(0,l.default)(f,h,h,t)}Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(1),s=n(623),l=(i=s)&&i.__esModule?i:{default:i},u=n(617),c={out:a.bool,left:a.bool,right:a.bool,top:a.bool,bottom:a.bool,big:a.bool,mirror:a.bool,opposite:a.bool,duration:a.number,timeout:a.number,delay:a.number,count:a.number,forever:a.bool},p={};o.propTypes=c,t.default=o,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){var n=t.left,r=t.right,o=t.top,i=t.bottom,a=t.x,s=t.y,l=t.mirror,c=t.opposite,d=(n?1:0)|(r||s?2:0)|(o||a?4:0)|(i?8:0)|(l?16:0)|(c?32:0)|(e?64:0);if(p.hasOwnProperty(d))return p[d];if(!l!=!(e&&c)){var f=[r,n,i,o,s,a];n=f[0],r=f[1],o=f[2],i=f[3],a=f[4],s=f[5]}var h=void 0;if(a||s||n||r||o||i){var m=a||o||i?(i?"-":"")+"1":"0",y=s||r||n?(n?"-":"")+"1":"0";h=e?"from {\n          transform: perspective(400px);\n        }\n        30% {\n          transform: perspective(400px) rotate3d("+m+", "+y+", 0, -15deg);\n          opacity: 1;\n        }\n        to {\n          transform: perspective(400px) rotate3d("+m+", "+y+", 0, 90deg);\n          opacity: 0;\n        }":"from {\n          transform: perspective(400px) rotate3d("+m+", "+y+", 0, 90deg);\n          animation-timing-function: ease-in;\n          opacity: 0;\n        }\n        40% {\n          transform: perspective(400px) rotate3d("+m+", "+y+", 0, -20deg);\n          animation-timing-function: ease-in;\n        }\n        60% {\n          transform: perspective(400px) rotate3d("+m+", "+y+", 0, 10deg);\n          opacity: 1;\n        }\n        80% {\n          transform: perspective(400px) rotate3d("+m+", "+y+", 0, -5deg);\n        }\n        to {\n          transform: perspective(400px);\n        }"}else h="from {\n          transform: perspective(400px) rotate3d(0, 1, 0, -360deg);\n          animation-timing-function: ease-out;\n          opacity: "+(e?"1":"0")+";\n        }\n        40% {\n          transform: perspective(400px) translate3d(0, 0, 150px) rotate3d(0, 1, 0, -190deg);\n          animation-timing-function: ease-out;\n        }\n        50% {\n          transform: perspective(400px) translate3d(0, 0, 150px) rotate3d(0, 1, 0, -170deg);\n          animation-timing-function: ease-in;\n        }\n        to {\n          transform: perspective(400px);\n          animation-timing-function: ease-in;\n          opacity: "+(e?"0":"1")+";\n        }";return p[d]=(0,u.animation)(h),p[d]}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.defaults,t=e.children,n=(e.out,e.forever),o=e.timeout,i=e.duration,a=void 0===i?u.defaults.duration:i,s=e.delay,c=void 0===s?u.defaults.delay:s,p=e.count,d=void 0===p?u.defaults.count:p,f=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children","out","forever","timeout","duration","delay","count"]),h={make:r,duration:void 0===o?a:o,delay:c,forever:n,count:d,style:{animationFillMode:"both",backfaceVisibility:"visible"}};return(0,l.default)(f,h,h,t)}Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(1),s=n(623),l=(i=s)&&i.__esModule?i:{default:i},u=n(617),c={out:a.bool,left:a.bool,right:a.bool,top:a.bool,bottom:a.bool,mirror:a.bool,opposite:a.bool,duration:a.number,timeout:a.number,delay:a.number,count:a.number,forever:a.bool},p={};o.propTypes=c,t.default=o,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){var n=t.left,r=t.right,o=t.up,i=t.down,a=t.top,s=t.bottom,l=t.mirror,c=t.opposite,d=(n?1:0)|(r?2:0)|(a||i?4:0)|(s||o?8:0)|(l?16:0)|(c?32:0)|(e?64:0);if(p.hasOwnProperty(d))return p[d];if(!l!=!(e&&c)){var f=[r,n,s,a,i,o];n=f[0],r=f[1],a=f[2],s=f[3],o=f[4],i=f[5]}var h="-200deg",m="center";return(i||a)&&n&&(h="-45deg"),((i||a)&&r||(o||s)&&n)&&(h="45deg"),(o||s)&&r&&(h="-90deg"),(n||r)&&(m=(n?"left":"right")+" bottom"),p[d]=(0,u.animation)("\n    "+(e?"to":"from")+" { opacity: 0; transform-origin: "+m+"; transform: rotate3d(0, 0, 1, "+h+");}\n    "+(e?"from":"to")+" { opacity: 1; transform-origin: "+m+"; transform: none;}\n  "),p[d]}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.defaults,t=e.children,n=(e.out,e.forever),o=e.timeout,i=e.duration,a=void 0===i?u.defaults.duration:i,s=e.delay,c=void 0===s?u.defaults.delay:s,p=e.count,d=void 0===p?u.defaults.count:p,f=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children","out","forever","timeout","duration","delay","count"]),h={make:r,duration:void 0===o?a:o,delay:c,forever:n,count:d,style:{animationFillMode:"both"}};return(0,l.default)(f,h,h,t)}Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(1),s=n(623),l=(i=s)&&i.__esModule?i:{default:i},u=n(617),c={out:a.bool,left:a.bool,right:a.bool,top:a.bool,bottom:a.bool,mirror:a.bool,opposite:a.bool,duration:a.number,timeout:a.number,delay:a.number,count:a.number,forever:a.bool},p={};o.propTypes=c,t.default=o,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){var n=t.left,r=t.right,o=t.mirror,i=t.opposite,a=(n?1:0)|(r?2:0)|(o?16:0)|(i?32:0)|(e?64:0);if(p.hasOwnProperty(a))return p[a];if(!o!=!(e&&i)){var s=[r,n];n=s[0],r=s[1]}var l=n?"-100%":r?"100%":"0",c=e?"from {\n        opacity: 1;\n      }\n      to {\n        transform: translate3d("+l+", 0, 0) skewX(30deg);\n        opacity: 0;\n      }\n    ":"from {\n        transform: translate3d("+l+", 0, 0) skewX(-30deg);\n        opacity: 0;\n      }\n      60% {\n        transform: skewX(20deg);\n        opacity: 1;\n      }\n      80% {\n        transform: skewX(-5deg);\n        opacity: 1;\n      }\n      to {\n        transform: none;\n        opacity: 1;\n      }";return p[a]=(0,u.animation)(c),p[a]}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.defaults,t=e.children,n=(e.out,e.forever),o=e.timeout,i=e.duration,a=void 0===i?u.defaults.duration:i,l=e.delay,c=void 0===l?u.defaults.delay:l,p=e.count,d=void 0===p?u.defaults.count:p,f=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children","out","forever","timeout","duration","delay","count"]),h={make:r,duration:void 0===o?a:o,delay:c,forever:n,count:d,style:{animationFillMode:"both"}};return f.left,f.right,f.mirror,f.opposite,(0,s.default)(f,h,h,t)}Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(623),s=(i=a)&&i.__esModule?i:{default:i},l=n(1),u=n(617),c={out:l.bool,left:l.bool,right:l.bool,mirror:l.bool,opposite:l.bool,duration:l.number,timeout:l.number,delay:l.number,count:l.number,forever:l.bool},p={};o.propTypes=c,t.default=o,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){var n=t.left,r=t.right,o=t.up,i=t.down,a=t.top,s=t.bottom,l=t.mirror,c=t.opposite,d=(n?1:0)|(r?2:0)|(a||i?4:0)|(s||o?8:0)|(l?16:0)|(c?32:0)|(e?64:0);if(p.hasOwnProperty(d))return p[d];if(!l!=!(e&&c)){var f=[r,n,s,a,i,o];n=f[0],r=f[1],a=f[2],s=f[3],o=f[4],i=f[5]}var h=n||r,m=a||s||o||i,y=void 0;return h||m?e?y="40% {\n          opacity: 1;\n          transform: scale3d(.475, .475, .475) translate3d("+(h?(n?"":"-")+"42px":"0")+", "+(m?(i||a?"-":"")+"60px":"0")+", 0);\n        }\n        to {\n          opacity: 0;\n          transform: scale(.1) translate3d("+(h?(r?"":"-")+"2000px":"0")+", "+(m?(o||s?"":"-")+"2000px":"0")+", 0);\n          transform-origin: "+(m?"center bottom":(n?"left":"right")+" center")+";\n        }":y="from {\n          opacity: 0;\n          transform: scale3d(.1, .1, .1) translate3d("+(h?(n?"-":"")+"1000px":"0")+", "+(m?(i||a?"-":"")+"1000px":"0")+", 0);\n          animation-timing-function: cubic-bezier(0.550, 0.055, 0.675, 0.190);\n        }\n        60% {\n          opacity: 1;\n          transform: scale3d(.475, .475, .475) translate3d("+(h?(r?"-":"")+"10px":"0")+", "+(m?(o||s?"-":"")+"60px":"0")+", 0);\n          animation-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1);\n        }":y=(e?"to":"from")+" {opacity: 0; transform: scale3d(.1, .1, .1);} "+(e?"from":"to")+" { opacity: 1; transform: none;}",p[d]=(0,u.animation)(y),p[d]}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.defaults,t=e.children,n=(e.out,e.forever),o=e.timeout,i=e.duration,a=void 0===i?u.defaults.duration:i,s=e.delay,c=void 0===s?u.defaults.delay:s,p=e.count,d=void 0===p?u.defaults.count:p,f=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children","out","forever","timeout","duration","delay","count"]),h={make:r,duration:void 0===o?a:o,delay:c,forever:n,count:d,style:{animationFillMode:"both"},reverse:f.left};return(0,l.default)(f,h,h,t)}Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(1),s=n(623),l=(i=s)&&i.__esModule?i:{default:i},u=n(617),c={out:a.bool,left:a.bool,right:a.bool,top:a.bool,bottom:a.bool,mirror:a.bool,opposite:a.bool,duration:a.number,timeout:a.number,delay:a.number,count:a.number,forever:a.bool},p={};o.propTypes=c,t.default=o,e.exports=t.default},function(e,t,n){},function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__3ybLz",framedImage:"styles-module__framedImage__1LRLJ",optionGroup:"styles-module__optionGroup__2f4nW",groupHeader:"styles-module__groupHeader__1pzK0",optionWrapper:"styles-module__optionWrapper__10YFL",optionLabelWrapper:"styles-module__optionLabelWrapper__Nj0Ws"}},function(e,t,n){"use strict";n.d(t,"a",function(){return v});var r=n(0),o=n(7),i=n(56),a=n(2),s=n(9),l=n.n(s),u=n(8),c=n(101);function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var y=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":m(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},g=n(613),v=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=d(this,f(t).apply(this,arguments))).clipboards=[],e}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){var e=this;this.props.urlPromise.then(function(t){e.urlData=t,setTimeout(function(){e.initializeClipboards()},0)},function(){})}},{key:"showThumb",value:function(e){e.target.className="fa fa-thumbs-up"}},{key:"initializeClipboards",value:function(){this.clipboards.push(new g(this.sessionButton,{text:function(){return this.urlData.fullUrl}.bind(this),container:this.container})),this.urlData&&this.urlData.bitlyUrl&&this.clipboards.push(new g(this.bitlyButton,{text:function(){return this.urlData.bitlyUrl}.bind(this),container:this.container}))}},{key:"componentWillUnmount",value:function(){this.clipboards.forEach(function(e){return e.destroy()})}},{key:"render",value:function(){var e=this;return r.createElement(i.Modal,{show:!0,onHide:this.props.onHide},r.createElement(i.Modal.Header,{closeButton:!0},r.createElement(i.Modal.Title,null,this.props.title)),r.createElement(i.Modal.Body,{style:{minHeight:70}},r.createElement(c.a,{size:"big",center:!0,style:{top:32},isLoading:!this.urlData}),r.createElement("div",{className:l()({hidden:!this.urlData}),ref:function(t){return e.container=t}},r.createElement("form",null,r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"exampleInputAmount"},"Share link"),r.createElement("div",{className:"input-group"},r.createElement("input",{type:"text",className:"form-control",value:this.urlData?this.urlData.fullUrl:""}),r.createElement("div",{className:"input-group-addon"},r.createElement("a",{ref:function(t){return e.sessionButton=t},onClick:this.showThumb},r.createElement("i",{className:"fa fa-clipboard"}))))),this.urlData&&this.urlData.bitlyUrl&&r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"exampleInputAmount"},"Shortened URL"),r.createElement("div",{className:"input-group"},r.createElement("input",{type:"text",className:"form-control",value:this.urlData?this.urlData.bitlyUrl:""}),r.createElement("div",{className:"input-group-addon"},r.createElement("a",{onClick:this.showThumb,ref:function(t){return e.bitlyButton=t}},r.createElement("i",{className:"fa fa-clipboard"})))))))))}}])&&p(n.prototype,o),a&&p(n,a),t}();y([a.observable],v.prototype,"urlData",void 0),y([u.default],v.prototype,"showThumb",null),y([u.default],v.prototype,"initializeClipboards",null),v=y([o.observer],v)},function(e,t,n){"use strict";(function(e){var r=n(0),o=n(101),i=n(7),a=n(2),s=n(1011),l=n(4),u=n.n(l),c=n(8),p=n(3),d=n(579),f=n(590),h=n(577),m=n(21),y=n(584),g=n(574),v=n(639),b=n(1012);function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var C,P=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":O(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},x="comparison-tab-overlap-svg";!function(e){e[e.Upset=0]="Upset",e[e.Venn=1]="Venn"}(C||(C={}));var T=function(t){function n(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(e=_(this,w(n).apply(this,arguments))).plotExists=!1,e.vennFailed=!1,e.tabUI=Object(d.a)({await:function(){return e.props.store._selectedGroups.isComplete&&e.props.store._selectedGroups.result.length<2?[e.props.store._selectedGroups]:[e.props.store._selectedGroups,e.overlapUI]},render:function(){var t=[];return e.props.store._selectedGroups.result.length<2?t.push(r.createElement("span",null,h.f)):(t.push(r.createElement(v.a,{overlapTabMode:!0,store:e.props.store})),e.vennFailed&&t.push(r.createElement("div",{className:"alert alert-info"},"We couldn't find a good Venn diagram layout, so showing UpSet diagram instead.")),t.push(e.overlapUI.component)),r.createElement("div",{"data-test":"ComparisonPageOverlapTabDiv"},t)},renderPending:function(){return r.createElement(o.a,{isLoading:!0,center:!0,size:"big"})},renderError:function(){return r.createElement(f.a,null)}}),e.plotType=Object(p.S)({await:function(){return[e.props.store._selectedGroups]},invoke:function(){return e.vennFailed||e.props.store._selectedGroups.result.length>3?Promise.resolve(C.Upset):Promise.resolve(C.Venn)}}),e.sampleGroupsWithCases=Object(p.S)({await:function(){return[e.props.store._selectedGroups,e.props.store.sampleSet]},invoke:function(){var t=e.props.store.sampleSet.result,n=u.a.map(e.props.store._selectedGroups.result,function(e){var n=Object(h.w)([e]).map(function(e){return t.get({studyId:e.studyId,sampleId:e.sampleId})});return{uid:e.uid,cases:u.a.map(n,function(e){return e.uniqueSampleKey})}});return Promise.resolve(n)}},[]),e.patientGroupsWithCases=Object(p.S)({await:function(){return[e.props.store._selectedGroups,e.props.store.sampleSet]},invoke:function(){var t=e.props.store.sampleSet.result,n=u.a.map(e.props.store._selectedGroups.result,function(e){var n=Object(h.w)([e]).map(function(e){return t.get({studyId:e.studyId,sampleId:e.sampleId})});return{uid:e.uid,cases:u.a.uniq(u.a.map(n,function(e){return e.uniquePatientKey}))}});return Promise.resolve(n)}},[]),e.activeSamples=Object(p.S)({await:function(){return[e.props.store._selectedGroups,e.props.store.sampleSet]},invoke:function(){var t=e.props.store.sampleSet.result,n=Object(h.w)(e.props.store._selectedGroups.result).map(function(e){return t.get(e)});return Promise.resolve(n)}}),e.samplesVennPartition=Object(p.S)({await:function(){return[e.props.store._selectedGroups,e.props.store.sampleSet,e.activeSamples]},invoke:function(){var t=e.props.store.sampleSet.result;return Promise.resolve(Object(h.C)(e.props.store._selectedGroups.result,function(e){return Object(h.w)([e])},function(e){return t.get({studyId:e.studyId,sampleId:e.sampleId}).uniqueSampleKey},e.activeSamples.result.map(function(e){return e.uniqueSampleKey})))}}),e.patientsVennPartition=Object(p.S)({await:function(){return[e.props.store._selectedGroups,e.props.store.patientToSamplesSet,e.activeSamples]},invoke:function(){var t=e.props.store.patientToSamplesSet.result;return Promise.resolve(Object(h.C)(e.props.store._selectedGroups.result,function(e){return Object(g.Y)([e])},function(e){return t.get({studyId:e.studyId,patientId:e.patientId})[0].uniquePatientKey},u.a.uniq(e.activeSamples.result.map(function(e){return e.uniquePatientKey}))))}}),e.uidToGroup=Object(p.S)({await:function(){return[e.props.store._selectedGroups]},invoke:function(){return Promise.resolve(u.a.keyBy(e.props.store._selectedGroups.result,function(e){return e.uid}))}}),e.plot=Object(d.a)({await:function(){return[e.plotType,e.samplesVennPartition,e.patientsVennPartition,e.sampleGroupsWithCases,e.patientGroupsWithCases,e.uidToGroup]},render:function(){var t=null;switch(e.plotType.result){case C.Upset:t=r.createElement(b.a,{store:e.props.store,sideBySide:e.areUpsetPlotsSidebySide,maxWidth:e.maxWidth,samplesVennPartition:e.samplesVennPartition.result,patientsVennPartition:e.patientsVennPartition.result,uidToGroup:e.uidToGroup.result});break;case C.Venn:t=r.createElement(s.a,{svgId:x,sampleGroups:e.sampleGroupsWithCases.result,patientGroups:e.patientGroupsWithCases.result,uidToGroup:e.uidToGroup.result,store:e.props.store,onLayoutFailure:e.onVennLayoutFailure});break;default:return r.createElement("span",null,"Not implemented yet")}return t},renderPending:function(){return r.createElement(o.a,{isLoading:!0,size:"big"})},renderError:function(){return r.createElement(f.a,null)}}),e.overlapUI=Object(d.a)({await:function(){return[e.plot]},render:function(){return r.createElement("div",{"data-test":"ComparisonPageOverlapTabContent",className:"borderedChart posRelative"},e.plotExists&&r.createElement(p.d,{getSvg:e.getSvg,getData:e.props.store.getGroupsDownloadDataPromise,buttons:["SVG","PNG","PDF","Data"],filename:"overlap",dontFade:!0,style:{position:"absolute",right:10,top:10},type:"button"}),r.createElement("div",{style:{position:"relative",display:"inline-block"}},e.plot.component))},renderPending:function(){return r.createElement(o.a,{isLoading:!0,centerRelativeToContainer:!0,size:"big"})},renderError:function(){return r.createElement(f.a,null)}}),e}var i,a,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(n,r["Component"]),i=n,(a=[{key:"componentDidUpdate",value:function(){this.plotExists=!!this.getSvg()}},{key:"onVennLayoutFailure",value:function(){this.vennFailed=!0}},{key:"getSvg",value:function(){if(this.plotType.result===C.Upset){var t=m.findDOMNode(this),n=document.createElementNS("http://www.w3.org/2000/svg","svg"),r=e(t).find("svg"),o=r[0].cloneNode(!0),i=r[1].cloneNode(!0);e(t).find("svg");var a=0,s=0;return n.appendChild(o),this.areUpsetPlotsSidebySide?(i.setAttribute("x","".concat(e(o).width())),a=Math.max(e(o).height(),e(i).height()),s=e(o).width()+e(i).width()):(i.setAttribute("y","".concat(e(o).height())),a=e(o).height()+e(i).height(),s=Math.max(e(o).width(),e(i).width())),e(n).attr("height",a),e(n).attr("width",s),e(n).css({height:a,width:s}),n.appendChild(i),n}return document.getElementById(x)}},{key:"render",value:function(){return r.createElement("div",{className:"inlineBlock"},this.tabUI.component)}},{key:"areUpsetPlotsSidebySide",get:function(){return!this.samplesVennPartition.isComplete||!this.patientsVennPartition.isComplete||this.samplesVennPartition.result.length+this.patientsVennPartition.result.length<=100}},{key:"maxWidth",get:function(){return y.a.size.width-80}}])&&S(i.prototype,a),l&&S(i,l),n}();P([a.observable],T.prototype,"plotExists",void 0),P([a.observable],T.prototype,"vennFailed",void 0),P([c.default,a.action],T.prototype,"onVennLayoutFailure",null),P([c.default],T.prototype,"getSvg",null),P([a.computed],T.prototype,"areUpsetPlotsSidebySide",null),P([a.computed],T.prototype,"maxWidth",null),T=P([i.observer],T),t.a=T}).call(this,n(11))},function(e,t,n){!function(e){"use strict";function t(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=0;return t}function n(e,t){for(var n=0,r=0;r<e.length;++r)n+=e[r]*t[r];return n}function r(e){return Math.sqrt(n(e,e))}function o(e,t,n){for(var r=0;r<t.length;++r)e[r]=t[r]*n}function i(e,t,n,r,o){for(var i=0;i<e.length;++i)e[i]=t*n[i]+r*o[i]}function a(e,t,r,o,a,s,l){var u=r.fx,c=n(r.fxprime,t),p=u,d=u,f=c,h=0;function m(d,h,m){for(var y=0;y<16;++y)if(a=(d+h)/2,i(o.x,1,r.x,a,t),p=o.fx=e(o.x,o.fxprime),f=n(o.fxprime,t),p>u+s*a*c||p>=m)h=a;else{if(Math.abs(f)<=-l*c)return a;f*(h-d)>=0&&(h=d),d=a,m=p}return 0}a=a||1,s=s||1e-6,l=l||.1;for(var y=0;y<10;++y){if(i(o.x,1,r.x,a,t),p=o.fx=e(o.x,o.fxprime),f=n(o.fxprime,t),p>u+s*a*c||y&&p>=d)return m(h,a,d);if(Math.abs(f)<=-l*c)return a;if(f>=0)return m(a,h,p);d=p,h=a,a*=2}return a}e.bisect=function(e,t,n,r){var o=(r=r||{}).maxIterations||100,i=r.tolerance||1e-10,a=e(t),s=e(n),l=n-t;if(a*s>0)throw"Initial bisect points must have opposite signs";if(0===a)return t;if(0===s)return n;for(var u=0;u<o;++u){var c=t+(l/=2),p=e(c);if(p*a>=0&&(t=c),Math.abs(l)<i||0===p)return c}return t+l},e.nelderMead=function(e,t,n){var r,o=(n=n||{}).maxIterations||200*t.length,a=n.nonZeroDelta||1.05,s=n.zeroDelta||.001,l=n.minErrorDelta||1e-6,u=n.minErrorDelta||1e-5,c=void 0!==n.rho?n.rho:1,p=void 0!==n.chi?n.chi:2,d=void 0!==n.psi?n.psi:-.5,f=void 0!==n.sigma?n.sigma:.5,h=t.length,m=new Array(h+1);m[0]=t,m[0].fx=e(t),m[0].id=0;for(var y=0;y<h;++y){var g=t.slice();g[y]=g[y]?g[y]*a:s,m[y+1]=g,m[y+1].fx=e(g),m[y+1].id=y+1}function v(e){for(var t=0;t<e.length;t++)m[h][t]=e[t];m[h].fx=e.fx}for(var b=function(e,t){return e.fx-t.fx},S=t.slice(),_=t.slice(),w=t.slice(),E=t.slice(),O=0;O<o;++O){if(m.sort(b),n.history){var C=m.map(function(e){var t=e.slice();return t.fx=e.fx,t.id=e.id,t});C.sort(function(e,t){return e.id-t.id}),n.history.push({x:m[0].slice(),fx:m[0].fx,simplex:C})}for(r=0,y=0;y<h;++y)r=Math.max(r,Math.abs(m[0][y]-m[1][y]));if(Math.abs(m[0].fx-m[h].fx)<l&&r<u)break;for(y=0;y<h;++y){S[y]=0;for(var P=0;P<h;++P)S[y]+=m[P][y];S[y]/=h}var x=m[h];if(i(_,1+c,S,-c,x),_.fx=e(_),_.fx<m[0].fx)i(E,1+p,S,-p,x),E.fx=e(E),E.fx<_.fx?v(E):v(_);else if(_.fx>=m[h-1].fx){var T=!1;if(_.fx>x.fx?(i(w,1+d,S,-d,x),w.fx=e(w),w.fx<x.fx?v(w):T=!0):(i(w,1-d*c,S,d*c,x),w.fx=e(w),w.fx<_.fx?v(w):T=!0),T){if(f>=1)break;for(y=1;y<m.length;++y)i(m[y],1-f,m[0],f,m[y]),m[y].fx=e(m[y])}}else v(_)}return m.sort(b),{fx:m[0].fx,x:m[0]}},e.conjugateGradient=function(e,t,s){var l,u,c,p={x:t.slice(),fx:0,fxprime:t.slice()},d={x:t.slice(),fx:0,fxprime:t.slice()},f=t.slice(),h=1;c=(s=s||{}).maxIterations||20*t.length,p.fx=e(p.x,p.fxprime),o(l=p.fxprime.slice(),p.fxprime,-1);for(var m=0;m<c;++m){if(h=a(e,l,p,d,h),s.history&&s.history.push({x:p.x.slice(),fx:p.fx,fxprime:p.fxprime.slice(),alpha:h}),h){i(f,1,d.fxprime,-1,p.fxprime);var y=n(p.fxprime,p.fxprime),g=Math.max(0,n(f,d.fxprime)/y);i(l,g,l,-1,d.fxprime),u=p,p=d,d=u}else o(l,p.fxprime,-1);if(r(p.fxprime)<=1e-5)break}return s.history&&s.history.push({x:p.x.slice(),fx:p.fx,fxprime:p.fxprime.slice(),alpha:h}),p},e.gradientDescent=function(e,t,n){for(var o=(n=n||{}).maxIterations||100*t.length,a=n.learnRate||.001,s={x:t.slice(),fx:0,fxprime:t.slice()},l=0;l<o&&(s.fx=e(s.x,s.fxprime),n.history&&n.history.push({x:s.x.slice(),fx:s.fx,fxprime:s.fxprime.slice()}),i(s.x,1,s.x,-a,s.fxprime),!(r(s.fxprime)<=1e-5));++l);return s},e.gradientDescentLineSearch=function(e,t,n){n=n||{};var i,s={x:t.slice(),fx:0,fxprime:t.slice()},l={x:t.slice(),fx:0,fxprime:t.slice()},u=n.maxIterations||100*t.length,c=n.learnRate||1,p=t.slice(),d=n.c1||.001,f=n.c2||.1,h=[];if(n.history){var m=e;e=function(e,t){return h.push(e.slice()),m(e,t)}}s.fx=e(s.x,s.fxprime);for(var y=0;y<u&&(o(p,s.fxprime,-1),c=a(e,p,s,l,c,d,f),n.history&&(n.history.push({x:s.x.slice(),fx:s.fx,fxprime:s.fxprime.slice(),functionCalls:h,learnRate:c,alpha:c}),h=[]),i=s,s=l,l=i,!(0===c||r(s.fxprime)<1e-5));++y);return s},e.zeros=t,e.zerosM=function(e,n){return t(e).map(function(){return t(n)})},e.norm2=r,e.weightedSum=i,e.scale=o}(t)},function(e,t,n){!function(e,t,n){"use strict";var r=1e-10;function o(e,t){var n,o=function(e){for(var t=[],n=0;n<e.length;++n)for(var r=n+1;r<e.length;++r)for(var o=l(e[n],e[r]),i=0;i<o.length;++i){var a=o[i];a.parentIndex=[n,r],t.push(a)}return t}(e),s=o.filter(function(t){return function(e,t){for(var n=0;n<t.length;++n)if(a(e,t[n])>t[n].radius+r)return!1;return!0}(t,e)}),c=0,p=0,d=[];if(s.length>1){var f=u(s);for(n=0;n<s.length;++n){var h=s[n];h.angle=Math.atan2(h.x-f.x,h.y-f.y)}s.sort(function(e,t){return t.angle-e.angle});var m=s[s.length-1];for(n=0;n<s.length;++n){var y=s[n];p+=(m.x+y.x)*(y.y-m.y);for(var g={x:(y.x+m.x)/2,y:(y.y+m.y)/2},v=null,b=0;b<y.parentIndex.length;++b)if(m.parentIndex.indexOf(y.parentIndex[b])>-1){var S=e[y.parentIndex[b]],_=Math.atan2(y.x-S.x,y.y-S.y),w=Math.atan2(m.x-S.x,m.y-S.y),E=w-_;E<0&&(E+=2*Math.PI);var O=w-E/2,C=a(g,{x:S.x+S.radius*Math.sin(O),y:S.y+S.radius*Math.cos(O)});C>2*S.radius&&(C=2*S.radius),(null===v||v.width>C)&&(v={circle:S,width:C,p1:y,p2:m})}null!==v&&(d.push(v),c+=i(v.circle.radius,v.width),m=y)}}else{var P=e[0];for(n=1;n<e.length;++n)e[n].radius<P.radius&&(P=e[n]);var x=!1;for(n=0;n<e.length;++n)if(a(e[n],P)>Math.abs(P.radius-e[n].radius)){x=!0;break}x?c=p=0:(c=P.radius*P.radius*Math.PI,d.push({circle:P,p1:{x:P.x,y:P.y+P.radius},p2:{x:P.x-r,y:P.y+P.radius},width:2*P.radius}))}return p/=2,t&&(t.area=c+p,t.arcArea=c,t.polygonArea=p,t.arcs=d,t.innerPoints=s,t.intersectionPoints=o),c+p}function i(e,t){return e*e*Math.acos(1-t/e)-(e-t)*Math.sqrt(t*(2*e-t))}function a(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}function s(e,t,n){if(n>=e+t)return 0;if(n<=Math.abs(e-t))return Math.PI*Math.min(e,t)*Math.min(e,t);var r=e-(n*n-t*t+e*e)/(2*n),o=t-(n*n-e*e+t*t)/(2*n);return i(e,r)+i(t,o)}function l(e,t){var n=a(e,t),r=e.radius,o=t.radius;if(n>=r+o||n<=Math.abs(r-o))return[];var i=(r*r-o*o+n*n)/(2*n),s=Math.sqrt(r*r-i*i),l=e.x+i*(t.x-e.x)/n,u=e.y+i*(t.y-e.y)/n,c=-(t.y-e.y)*(s/n),p=-(t.x-e.x)*(s/n);return[{x:l+c,y:u-p},{x:l-c,y:u+p}]}function u(e){for(var t={x:0,y:0},n=0;n<e.length;++n)t.x+=e[n].x,t.y+=e[n].y;return t.x/=e.length,t.y/=e.length,t}function c(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=0;return t}function p(e,t){return c(e).map(function(){return c(t)})}function d(e,t){for(var n=0,r=0;r<e.length;++r)n+=e[r]*t[r];return n}function f(e){return Math.sqrt(d(e,e))}function h(e,t,n){for(var r=0;r<t.length;++r)e[r]=t[r]*n}function m(e,t,n,r,o){for(var i=0;i<e.length;++i)e[i]=t*n[i]+r*o[i]}function y(e,t,n){var r,o=(n=n||{}).maxIterations||200*t.length,i=n.nonZeroDelta||1.05,a=n.zeroDelta||.001,s=n.minErrorDelta||1e-6,l=n.minErrorDelta||1e-5,u=void 0!==n.rho?n.rho:1,c=void 0!==n.chi?n.chi:2,p=void 0!==n.psi?n.psi:-.5,d=void 0!==n.sigma?n.sigma:.5,f=t.length,h=new Array(f+1);h[0]=t,h[0].fx=e(t),h[0].id=0;for(var y=0;y<f;++y){var g=t.slice();g[y]=g[y]?g[y]*i:a,h[y+1]=g,h[y+1].fx=e(g),h[y+1].id=y+1}function v(e){for(var t=0;t<e.length;t++)h[f][t]=e[t];h[f].fx=e.fx}for(var b=function(e,t){return e.fx-t.fx},S=t.slice(),_=t.slice(),w=t.slice(),E=t.slice(),O=0;O<o;++O){if(h.sort(b),n.history){var C=h.map(function(e){var t=e.slice();return t.fx=e.fx,t.id=e.id,t});C.sort(function(e,t){return e.id-t.id}),n.history.push({x:h[0].slice(),fx:h[0].fx,simplex:C})}for(r=0,y=0;y<f;++y)r=Math.max(r,Math.abs(h[0][y]-h[1][y]));if(Math.abs(h[0].fx-h[f].fx)<s&&r<l)break;for(y=0;y<f;++y){S[y]=0;for(var P=0;P<f;++P)S[y]+=h[P][y];S[y]/=f}var x=h[f];if(m(_,1+u,S,-u,x),_.fx=e(_),_.fx<h[0].fx)m(E,1+c,S,-c,x),E.fx=e(E),E.fx<_.fx?v(E):v(_);else if(_.fx>=h[f-1].fx){var T=!1;if(_.fx>x.fx?(m(w,1+p,S,-p,x),w.fx=e(w),w.fx<x.fx?v(w):T=!0):(m(w,1-p*u,S,p*u,x),w.fx=e(w),w.fx<_.fx?v(w):T=!0),T){if(d>=1)break;for(y=1;y<h.length;++y)m(h[y],1-d,h[0],d,h[y]),h[y].fx=e(h[y])}}else v(_)}return h.sort(b),{fx:h[0].fx,x:h[0]}}function g(e,t,n,r,o,i,a){var s=n.fx,l=d(n.fxprime,t),u=s,c=s,p=l,f=0;function h(c,f,h){for(var y=0;y<16;++y)if(o=(c+f)/2,m(r.x,1,n.x,o,t),u=r.fx=e(r.x,r.fxprime),p=d(r.fxprime,t),u>s+i*o*l||u>=h)f=o;else{if(Math.abs(p)<=-a*l)return o;p*(f-c)>=0&&(f=c),c=o,h=u}return 0}o=o||1,i=i||1e-6,a=a||.1;for(var y=0;y<10;++y){if(m(r.x,1,n.x,o,t),u=r.fx=e(r.x,r.fxprime),p=d(r.fxprime,t),u>s+i*o*l||y&&u>=c)return h(f,o,c);if(Math.abs(p)<=-a*l)return o;if(p>=0)return h(o,f,u);c=u,f=o,o*=2}return o}function v(e,t,n){var r,o,i,a={x:t.slice(),fx:0,fxprime:t.slice()},s={x:t.slice(),fx:0,fxprime:t.slice()},l=t.slice(),u=1;i=(n=n||{}).maxIterations||20*t.length,a.fx=e(a.x,a.fxprime),h(r=a.fxprime.slice(),a.fxprime,-1);for(var c=0;c<i;++c){if(u=g(e,r,a,s,u),n.history&&n.history.push({x:a.x.slice(),fx:a.fx,fxprime:a.fxprime.slice(),alpha:u}),u){m(l,1,s.fxprime,-1,a.fxprime);var p=d(a.fxprime,a.fxprime),y=Math.max(0,d(l,s.fxprime)/p);m(r,y,r,-1,s.fxprime),o=a,a=s,s=o}else h(r,a.fxprime,-1);if(f(a.fxprime)<=1e-5)break}return n.history&&n.history.push({x:a.x.slice(),fx:a.fx,fxprime:a.fxprime.slice(),alpha:u}),a}function b(e,t){(t=t||{}).maxIterations=t.maxIterations||500;var n=t.initialLayout||w,r=t.lossFunction||O;e=function(e){e=e.slice();var t,n,r,o,i=[],a={};for(t=0;t<e.length;++t){var s=e[t];1==s.sets.length?i.push(s.sets[0]):2==s.sets.length&&(r=s.sets[0],o=s.sets[1],a[[r,o]]=!0,a[[o,r]]=!0)}for(i.sort(function(e,t){return e>t}),t=0;t<i.length;++t)for(r=i[t],n=t+1;n<i.length;++n)o=i[n],[r,o]in a||e.push({sets:[r,o],size:0});return e}(e);var o,i=n(e,t),a=[],s=[];for(o in i)i.hasOwnProperty(o)&&(a.push(i[o].x),a.push(i[o].y),s.push(o));for(var l=y(function(t){for(var n={},o=0;o<s.length;++o){var a=s[o];n[a]={x:t[2*o],y:t[2*o+1],radius:i[a].radius}}return r(n,e)},a,t),u=l.x,c=0;c<s.length;++c)o=s[c],i[o].x=u[2*c],i[o].y=u[2*c+1];return i}var S=1e-10;function _(e,t,n){return Math.min(e,t)*Math.min(e,t)*Math.PI<=n+S?Math.abs(e-t):function(e,t,n,r){var o=(r=r||{}).maxIterations||100,i=r.tolerance||1e-10,a=e(t),s=e(n),l=n-t;if(a*s>0)throw"Initial bisect points must have opposite signs";if(0===a)return t;if(0===s)return n;for(var u=0;u<o;++u){var c=t+(l/=2),p=e(c);if(p*a>=0&&(t=c),Math.abs(l)<i||0===p)return c}return t+l}(function(r){return s(e,t,r)-n},0,e+t)}function w(e,t){var n=E(e,t),r=t.lossFunction||O;if(e.length>=8){var o=function(e,t){var n,r=(t=t||{}).restarts||10,o=[],i={};for(n=0;n<e.length;++n){var a=e[n];1==a.sets.length&&(i[a.sets[0]]=o.length,o.push(a))}var s=function(e,t,n){var r=p(t.length,t.length),o=p(t.length,t.length);return e.filter(function(e){return 2==e.sets.length}).map(function(e){var i=n[e.sets[0]],a=n[e.sets[1]],s=_(Math.sqrt(t[i].size/Math.PI),Math.sqrt(t[a].size/Math.PI),e.size);r[i][a]=r[a][i]=s;var l=0;e.size+1e-10>=Math.min(t[i].size,t[a].size)?l=1:e.size<=1e-10&&(l=-1),o[i][a]=o[a][i]=l}),{distances:r,constraints:o}}(e,o,i),l=s.distances,u=s.constraints,d=f(l.map(f))/l.length;l=l.map(function(e){return e.map(function(e){return e/d})});var m,y,g=function(e,t){return function(e,t,n,r){var o,i=0;for(o=0;o<t.length;++o)t[o]=0;for(o=0;o<n.length;++o)for(var a=e[2*o],s=e[2*o+1],l=o+1;l<n.length;++l){var u=e[2*l],c=e[2*l+1],p=n[o][l],d=r[o][l],f=(u-a)*(u-a)+(c-s)*(c-s),h=Math.sqrt(f),m=f-p*p;d>0&&h<=p||d<0&&h>=p||(i+=2*m*m,t[2*o]+=4*m*(a-u),t[2*o+1]+=4*m*(s-c),t[2*l]+=4*m*(u-a),t[2*l+1]+=4*m*(c-s))}return i}(e,t,l,u)};for(n=0;n<r;++n){var b=c(2*l.length).map(Math.random);y=v(g,b,t),(!m||y.fx<m.fx)&&(m=y)}var S=m.x,w={};for(n=0;n<o.length;++n){var E=o[n];w[E.sets[0]]={x:S[2*n]*d,y:S[2*n+1]*d,radius:Math.sqrt(E.size/Math.PI)}}if(t.history)for(n=0;n<t.history.length;++n)h(t.history[n].x,d);return w}(e,t),i=r(o,e),a=r(n,e);i+1e-8<a&&(n=o)}return n}function E(e,t){for(var n,r=t&&t.lossFunction?t.lossFunction:O,o={},i={},a=0;a<e.length;++a){var s=e[a];1==s.sets.length&&(n=s.sets[0],o[n]={x:1e10,y:1e10,rowid:o.length,size:s.size,radius:Math.sqrt(s.size/Math.PI)},i[n]=[])}for(e=e.filter(function(e){return 2==e.sets.length}),a=0;a<e.length;++a){var u=e[a],c=u.hasOwnProperty("weight")?u.weight:1,p=u.sets[0],d=u.sets[1];u.size+S>=Math.min(o[p].size,o[d].size)&&(c=0),i[p].push({set:d,size:u.size,weight:c}),i[d].push({set:p,size:u.size,weight:c})}var f=[];for(n in i)if(i.hasOwnProperty(n)){var h=0;for(a=0;a<i[n].length;++a)h+=i[n][a].size*i[n][a].weight;f.push({set:n,size:h})}function m(e,t){return t.size-e.size}f.sort(m);var y={};function g(e){return e.set in y}function v(e,t){o[t].x=e.x,o[t].y=e.y,y[t]=!0}for(v({x:0,y:0},f[0].set),a=1;a<f.length;++a){var b=f[a].set,w=i[b].filter(g);if(n=o[b],w.sort(m),0===w.length)throw"ERROR: missing pairwise overlap information";for(var E=[],C=0;C<w.length;++C){var P=o[w[C].set],x=_(n.radius,P.radius,w[C].size);E.push({x:P.x+x,y:P.y}),E.push({x:P.x-x,y:P.y}),E.push({y:P.y+x,x:P.x}),E.push({y:P.y-x,x:P.x});for(var T=C+1;T<w.length;++T)for(var k=o[w[T].set],A=_(n.radius,k.radius,w[T].size),I=l({x:P.x,y:P.y,radius:x},{x:k.x,y:k.y,radius:A}),D=0;D<I.length;++D)E.push(I[D])}var M=1e50,j=E[0];for(C=0;C<E.length;++C){o[b].x=E[C].x,o[b].y=E[C].y;var N=r(o,e);N<M&&(M=N,j=E[C])}v(j,b)}return o}function O(e,t){for(var n=0,r=0;r<t.length;++r){var i,l=t[r];if(1!=l.sets.length){if(2==l.sets.length){var u=e[l.sets[0]],c=e[l.sets[1]];i=s(u.radius,c.radius,a(u,c))}else i=o(l.sets.map(function(t){return e[t]}));var p=l.hasOwnProperty("weight")?l.weight:1;n+=p*(i-l.size)*(i-l.size)}}return n}function C(e,t,n){var r;if(null===n?e.sort(function(e,t){return t.radius-e.radius}):e.sort(n),e.length>0){var o=e[0].x,i=e[0].y;for(r=0;r<e.length;++r)e[r].x-=o,e[r].y-=i}if(2==e.length){var s=a(e[0],e[1]);s<Math.abs(e[1].radius-e[0].radius)&&(e[1].x=e[0].x+e[0].radius-e[1].radius-1e-10,e[1].y=e[0].y)}if(e.length>1){var l,u,c=Math.atan2(e[1].x,e[1].y)-t,p=Math.cos(c),d=Math.sin(c);for(r=0;r<e.length;++r)l=e[r].x,u=e[r].y,e[r].x=p*l-d*u,e[r].y=d*l+p*u}if(e.length>2){for(var f=Math.atan2(e[2].x,e[2].y)-t;f<0;)f+=2*Math.PI;for(;f>2*Math.PI;)f-=2*Math.PI;if(f>Math.PI){var h=e[1].y/(1e-10+e[1].x);for(r=0;r<e.length;++r){var m=(e[r].x+h*e[r].y)/(1+h*h);e[r].x=2*m-e[r].x,e[r].y=2*m*h-e[r].y}}}}function P(e){function t(e){return e.parent!==e&&(e.parent=t(e.parent)),e.parent}e.map(function(e){e.parent=e});for(var n=0;n<e.length;++n)for(var r=n+1;r<e.length;++r){var o=e[n].radius+e[r].radius;a(e[n],e[r])+1e-10<o&&(i=e[r],s=e[n],l=void 0,u=void 0,l=t(i),u=t(s),l.parent=u)}var i,s,l,u,c,p={};for(n=0;n<e.length;++n)(c=t(e[n]).parent.setid)in p||(p[c]=[]),p[c].push(e[n]);e.map(function(e){delete e.parent});var d=[];for(c in p)p.hasOwnProperty(c)&&d.push(p[c]);return d}function x(e){var t=function(t){var n=Math.max.apply(null,e.map(function(e){return e[t]+e.radius})),r=Math.min.apply(null,e.map(function(e){return e[t]-e.radius}));return{max:n,min:r}};return{xRange:t("x"),yRange:t("y")}}function T(e,t,n){null===t&&(t=Math.PI/2);var r,o,i=[];for(o in e)if(e.hasOwnProperty(o)){var a=e[o];i.push({x:a.x,y:a.y,radius:a.radius,setid:o})}var s=P(i);for(r=0;r<s.length;++r){C(s[r],t,n);var l=x(s[r]);s[r].size=(l.xRange.max-l.xRange.min)*(l.yRange.max-l.yRange.min),s[r].bounds=l}s.sort(function(e,t){return t.size-e.size});var u=(i=s[0]).bounds,c=(u.xRange.max-u.xRange.min)/50;function p(e,t,n){if(e){var r,o,a,s=e.bounds;t?r=u.xRange.max-s.xRange.min+c:(r=u.xRange.max-s.xRange.max,(a=(s.xRange.max-s.xRange.min)/2-(u.xRange.max-u.xRange.min)/2)<0&&(r+=a)),n?o=u.yRange.max-s.yRange.min+c:(o=u.yRange.max-s.yRange.max,(a=(s.yRange.max-s.yRange.min)/2-(u.yRange.max-u.yRange.min)/2)<0&&(o+=a));for(var l=0;l<e.length;++l)e[l].x+=r,e[l].y+=o,i.push(e[l])}}for(var d=1;d<s.length;)p(s[d],!0,!1),p(s[d+1],!1,!0),p(s[d+2],!0,!0),d+=3,u=x(i);var f={};for(r=0;r<i.length;++r)f[i[r].setid]=i[r];return f}function k(e,t,n,r){var o=[],i=[];for(var a in e)e.hasOwnProperty(a)&&(i.push(a),o.push(e[a]));t-=2*r,n-=2*r;var s=x(o),l=s.xRange,u=s.yRange;if(l.max==l.min||u.max==u.min)return console.log("not scaling solution: zero size detected"),e;for(var c=t/(l.max-l.min),p=n/(u.max-u.min),d=Math.min(p,c),f=(t-(l.max-l.min)*d)/2,h=(n-(u.max-u.min)*d)/2,m={},y=0;y<o.length;++y){var g=o[y];m[i[y]]={radius:d*g.radius,x:r+f+(g.x-l.min)*d,y:r+h+(g.y-u.min)*d}}return m}function A(e,n){return function(){for(var r,o=t.select(this),i=o.datum(),a=e[i.sets[0]].radius||50,s=n(i)||"",l=s.split(/\s+/).reverse(),u=(s.length+l.length)/3,c=l.pop(),p=[c],d=0,f=o.text(null).append("tspan").text(c);c=l.pop();)p.push(c),r=p.join(" "),f.text(r),r.length>u&&f.node().getComputedTextLength()>a&&(p.pop(),f.text(p.join(" ")),p=[c],f=o.append("tspan").text(c),d++);var h=.35-1.1*d/2,m=o.attr("x"),y=o.attr("y");o.selectAll("tspan").attr("x",m).attr("y",y).attr("dy",function(e,t){return h+1.1*t+"em"})}}function I(e,t,n){var r,o,i=t[0].radius-a(t[0],e);for(r=1;r<t.length;++r)(o=t[r].radius-a(t[r],e))<=i&&(i=o);for(r=0;r<n.length;++r)(o=a(n[r],e)-n[r].radius)<=i&&(i=o);return i}function D(e,t){var n,r=[];for(n=0;n<e.length;++n){var i=e[n];r.push({x:i.x,y:i.y}),r.push({x:i.x+i.radius/2,y:i.y}),r.push({x:i.x-i.radius/2,y:i.y}),r.push({x:i.x,y:i.y+i.radius/2}),r.push({x:i.x,y:i.y-i.radius/2})}var s=r[0],l=I(r[0],e,t);for(n=1;n<r.length;++n){var c=I(r[n],e,t);c>=l&&(s=r[n],l=c)}var p=y(function(n){return-1*I({x:n[0],y:n[1]},e,t)},[s.x,s.y],{maxIterations:500,minErrorDelta:1e-10}).x,d={x:p[0],y:p[1]},f=!0;for(n=0;n<e.length;++n)if(a(d,e[n])>e[n].radius){f=!1;break}for(n=0;n<t.length;++n)if(a(d,t[n])<t[n].radius){f=!1;break}if(!f)if(1==e.length)d={x:e[0].x,y:e[0].y};else{var h={};o(e,h),d=0===h.arcs.length?{x:0,y:-1e3,disjoint:!0}:1==h.arcs.length?{x:h.arcs[0].circle.x,y:h.arcs[0].circle.y}:t.length?D(e,[]):u(h.arcs.map(function(e){return e.p1}))}return d}function M(e){var t={},n=[];for(var r in e)n.push(r),t[r]=[];for(var o=0;o<n.length;o++)for(var i=e[n[o]],s=o+1;s<n.length;++s){var l=e[n[s]],u=a(i,l);u+l.radius<=i.radius+1e-10?t[n[s]].push(n[o]):u+i.radius<=l.radius+1e-10&&t[n[o]].push(n[s])}return t}function j(e,t){for(var n={},r=M(e),o=0;o<t.length;++o){for(var i=t[o].sets,a={},s={},l=0;l<i.length;++l){a[i[l]]=!0;for(var u=r[i[l]],c=0;c<u.length;++c)s[u[c]]=!0}var p=[],d=[];for(var f in e)f in a?p.push(e[f]):f in s||d.push(e[f]);var h=D(p,d);n[i]=h,h.disjoint&&t[o].size>0&&console.log("WARNING: area "+i+" not represented on screen")}return n}function N(e,t,n){var r=[];return r.push("\nM",e,t),r.push("\nm",-n,0),r.push("\na",n,n,0,1,0,2*n,0),r.push("\na",n,n,0,1,0,2*-n,0),r.join(" ")}function R(e){var t=e.split(" ");return{x:parseFloat(t[1]),y:parseFloat(t[2]),radius:-parseFloat(t[4])}}function L(e){var t={};o(e,t);var n=t.arcs;if(0===n.length)return"M 0 0";if(1==n.length){var r=n[0].circle;return N(r.x,r.y,r.radius)}for(var i=["\nM",n[0].p2.x,n[0].p2.y],a=0;a<n.length;++a){var s=n[a],l=s.circle.radius,u=s.width>l;i.push("\nA",l,l,0,u?1:0,1,s.p1.x,s.p1.y)}return i.join(" ")}e.intersectionArea=o,e.circleCircleIntersection=l,e.circleOverlap=s,e.circleArea=i,e.distance=a,e.venn=b,e.greedyLayout=E,e.scaleSolution=k,e.normalizeSolution=T,e.bestInitialLayout=w,e.lossFunction=O,e.disjointCluster=P,e.distanceFromIntersectArea=_,e.VennDiagram=function(){var e=600,n=350,r=15,o=1e3,i=Math.PI/2,a=!0,s=!0,l=!0,u=null,c=null,p={},d=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],f=0,h=function(e){if(e in p)return p[e];var t=p[e]=d[f];return(f+=1)>=d.length&&(f=0),t},m=b,y=O;function g(p){var d=p.datum(),f={};d.forEach(function(e){0==e.size&&1==e.sets.length&&(f[e.sets[0]]=1)}),d=d.filter(function(e){return!e.sets.some(function(e){return e in f})});var g={},v={};if(d.length>0){var b=m(d,{lossFunction:y});a&&(b=T(b,i,c)),g=k(b,e,n,r),v=j(g,d)}var S={};function _(e){return e.sets in S?S[e.sets]:1==e.sets.length?""+e.sets[0]:void 0}d.forEach(function(e){e.label&&(S[e.sets]=e.label)}),p.selectAll("svg").data([g]).enter().append("svg");var w=p.select("svg").attr("width",e).attr("height",n),E={},O=!1;w.selectAll(".venn-area path").each(function(e){var n=t.select(this).attr("d");1==e.sets.length&&n&&(O=!0,E[e.sets[0]]=R(n))});var C=function(t){return function(r){var o=t.sets.map(function(t){var o=E[t],i=g[t];return o||(o={x:e/2,y:n/2,radius:1}),i||(i={x:e/2,y:n/2,radius:1}),{x:o.x*(1-r)+i.x*r,y:o.y*(1-r)+i.y*r,radius:o.radius*(1-r)+i.radius*r}});return L(o)}},P=w.selectAll(".venn-area").data(d,function(e){return e.sets}),x=P.enter().append("g").attr("class",function(e){return"venn-area venn-"+(1==e.sets.length?"circle":"intersection")}).attr("data-venn-sets",function(e){return e.sets.join("_")}),I=x.append("path"),D=x.append("text").attr("class","label").text(function(e){return _(e)}).attr("text-anchor","middle").attr("dy",".35em").attr("x",e/2).attr("y",n/2);l&&(I.style("fill-opacity","0").filter(function(e){return 1==e.sets.length}).style("fill",function(e){return h(e.sets)}).style("fill-opacity",".25"),D.style("fill",function(e){return 1==e.sets.length?h(e.sets):"#444"}));var M=p;O?(M=p.transition("venn").duration(o)).selectAll("path").attrTween("d",C):M.selectAll("path").attr("d",function(e){return L(e.sets.map(function(e){return g[e]}))});var N=M.selectAll("text").filter(function(e){return e.sets in v}).text(function(e){return _(e)}).attr("x",function(e){return Math.floor(v[e.sets].x)}).attr("y",function(e){return Math.floor(v[e.sets].y)});s&&(O?"on"in N?N.on("end",A(g,_)):N.each("end",A(g,_)):N.each(A(g,_)));var G=P.exit().transition("venn").duration(o).remove();G.selectAll("path").attrTween("d",C);var F=G.selectAll("text").attr("x",e/2).attr("y",n/2);return null!==u&&(D.style("font-size","0px"),N.style("font-size",u),F.style("font-size","0px")),{circles:g,textCentres:v,nodes:P,enter:x,update:M,exit:G}}return g.wrap=function(e){return arguments.length?(s=e,g):s},g.width=function(t){return arguments.length?(e=t,g):e},g.height=function(e){return arguments.length?(n=e,g):n},g.padding=function(e){return arguments.length?(r=e,g):r},g.colours=function(e){return arguments.length?(h=e,g):h},g.fontSize=function(e){return arguments.length?(u=e,g):u},g.duration=function(e){return arguments.length?(o=e,g):o},g.layoutFunction=function(e){return arguments.length?(m=e,g):m},g.normalize=function(e){return arguments.length?(a=e,g):a},g.styled=function(e){return arguments.length?(l=e,g):l},g.orientation=function(e){return arguments.length?(i=e,g):i},g.orientationOrder=function(e){return arguments.length?(c=e,g):c},g.lossFunction=function(e){return arguments.length?(y=e,g):y},g},e.wrapText=A,e.computeTextCentres=j,e.computeTextCentre=D,e.sortAreas=function(e,t){for(var n=M(e.selectAll("svg").datum()),r={},o=0;o<t.sets.length;++o){var i=t.sets[o];for(var a in n)for(var s=n[a],l=0;l<s.length;++l)if(s[l]==i){r[a]=!0;break}}function u(e){for(var t=0;t<e.length;++t)if(!(e[t]in r))return!1;return!0}e.selectAll("g").sort(function(e,n){return e.sets.length!=n.sets.length?e.sets.length-n.sets.length:e==t?u(n.sets)?-1:1:n==t?u(e.sets)?1:-1:n.size-e.size})},e.circlePath=N,e.circleFromPath=R,e.intersectionAreaPath=L,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(618),n(1006))},function(e,t,n){e.exports=n(16)(792)},function(e,t,n){"use strict";var r=n(0),o=n(7),i=n(101),a=n(590),s=n(733),l=n(853),u=n(8),c=n(579),p=n(577),d=n(600);function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var v=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":g(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},b=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=h(this,m(t).apply(this,arguments))).tabUI=Object(p.d)(function(){return e.props.store},function(){return e.enrichmentsUI},"mutation",!0,!0,!0),e.enrichmentsUI=Object(c.a)({await:function(){return[e.props.store.mutationEnrichmentData,e.props.store.selectedStudyMutationEnrichmentProfileMap,e.props.store.mutationEnrichmentAnalysisGroups,e.props.store.studies]},render:function(){var t="Mutation",n=Object.keys(e.props.store.selectedStudyMutationEnrichmentProfileMap.result);return 1===n.length&&(t=e.props.store.selectedStudyMutationEnrichmentProfileMap.result[n[0]].name),r.createElement("div",{"data-test":"GroupComparisonMutationEnrichments"},r.createElement(s.a,{dataSets:e.props.store.mutationEnrichmentProfiles,onChange:e.onChangeProfile,selectedProfileByStudyId:e.props.store.selectedStudyMutationEnrichmentProfileMap.result,studies:e.props.store.studies.result}),r.createElement(l.a,{data:e.props.store.mutationEnrichmentData.result,groups:e.props.store.mutationEnrichmentAnalysisGroups.result,alteredVsUnalteredMode:!1,headerName:t,containerType:d.a.MUTATION,patientLevelEnrichments:e.props.store.usePatientLevelEnrichments,onSetPatientLevelEnrichments:e.props.store.setUsePatientLevelEnrichments,store:e.props.resultsViewStore}))},renderPending:function(){return r.createElement(i.a,{center:!0,isLoading:!0,size:"big"})},renderError:function(){return r.createElement(a.a,null)}}),e}var n,o,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,r["Component"]),n=t,(o=[{key:"onChangeProfile",value:function(e){this.props.store.setMutationEnrichmentProfileMap(e)}},{key:"render",value:function(){return this.tabUI.component}}])&&f(n.prototype,o),u&&f(n,u),t}();v([u.default],b.prototype,"onChangeProfile",null),b=v([o.observer],b),t.a=b},function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__1mlqI",framedImage:"styles-module__framedImage__AkabG",wrapper:"styles-module__wrapper__29CoN",groupRow:"styles-module__groupRow__3Q2Y8",alterationRow:"styles-module__alterationRow__1G5NG",strike:"styles-module__strike__1ycDg"}},function(e,t,n){e.exports={portalWidth:"frequencyPlotStyles-module__portalWidth__bPwxT",framedImage:"frequencyPlotStyles-module__framedImage__R6mzB",ChartControls:"frequencyPlotStyles-module__ChartControls__2YKR9"}},function(e,t,n){"use strict";var r=n(0),o=n(7),i=n(733),a=n(853),s=n(8),l=n(579),u=n(101),c=n(590),p=n(577),d=n(600);function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var v=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":g(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},b=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=h(this,m(t).apply(this,arguments))).tabUI=Object(p.d)(function(){return e.props.store},function(){return e.enrichmentsUI},"copy-number",!0,!0,!0),e.enrichmentsUI=Object(l.a)({await:function(){return[e.props.store.copyNumberEnrichmentData,e.props.store.copyNumberEnrichmentAnalysisGroups,e.props.store.selectedStudyCopyNumberEnrichmentProfileMap,e.props.store.studies]},render:function(){var t="Copy number",n=Object.keys(e.props.store.selectedStudyCopyNumberEnrichmentProfileMap.result);return 1===n.length&&(t=e.props.store.selectedStudyCopyNumberEnrichmentProfileMap.result[n[0]].name),r.createElement("div",{"data-test":"GroupComparisonCopyNumberEnrichments"},r.createElement(i.a,{dataSets:e.props.store.copyNumberEnrichmentProfiles,onChange:e.onChangeProfile,selectedProfileByStudyId:e.props.store.selectedStudyCopyNumberEnrichmentProfileMap.result,studies:e.props.store.studies.result}),r.createElement(a.a,{data:e.props.store.copyNumberEnrichmentData.result,groups:e.props.store.copyNumberEnrichmentAnalysisGroups.result,alteredVsUnalteredMode:!1,headerName:t,showCNAInTable:!0,containerType:d.a.COPY_NUMBER,patientLevelEnrichments:e.props.store.usePatientLevelEnrichments,onSetPatientLevelEnrichments:e.props.store.setUsePatientLevelEnrichments,store:e.props.resultsViewStore}))},renderPending:function(){return r.createElement(u.a,{center:!0,isLoading:!0,size:"big"})},renderError:function(){return r.createElement(c.a,null)}}),e}var n,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,r["Component"]),n=t,(o=[{key:"onChangeProfile",value:function(e){this.props.store.setCopyNumberEnrichmentProfileMap(e)}},{key:"render",value:function(){return this.tabUI.component}}])&&f(n.prototype,o),s&&f(n,s),t}();v([s.default],b.prototype,"onChangeProfile",null),b=v([o.observer],b),t.a=b},function(e,t,n){"use strict";var r=n(0),o=n(7),i=n(8),a=n(579),s=n(733),l=n(101),u=n(590),c=n(855),p=n(577);function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var g=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":y(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},v=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=f(this,h(t).apply(this,arguments))).tabUI=Object(p.d)(function(){return e.props.store},function(){return e.enrichmentsUI},"mRNA",!0,!0,!1),e.enrichmentsUI=Object(a.a)({await:function(){return[e.props.store.mRNAEnrichmentData,e.props.store.selectedmRNAEnrichmentProfileMap,e.props.store.mrnaEnrichmentAnalysisGroups,e.props.store.studies,e.props.store.sampleKeyToSample]},render:function(){var t=Object.keys(e.props.store.selectedmRNAEnrichmentProfileMap.result),n=e.props.store.selectedmRNAEnrichmentProfileMap.result[t[0]];return r.createElement("div",{"data-test":"GroupComparisonMRNAEnrichments"},r.createElement(s.a,{dataSets:e.props.store.mRNAEnrichmentProfiles,onChange:e.onChangeProfile,selectedProfileByStudyId:e.props.store.selectedmRNAEnrichmentProfileMap.result,alwaysShow:!0,studies:e.props.store.studies.result}),r.createElement(c.a,{data:e.props.store.mRNAEnrichmentData.result,groups:e.props.store.mrnaEnrichmentAnalysisGroups.result,selectedProfile:n,alteredVsUnalteredMode:!1,sampleKeyToSample:e.props.store.sampleKeyToSample.result,isGeneCheckBoxEnabled:e.props.resultsViewMode}))},renderPending:function(){return r.createElement(l.a,{center:!0,isLoading:!0,size:"big"})},renderError:function(){return r.createElement(u.a,null)}}),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,r["Component"]),n=t,(o=[{key:"onChangeProfile",value:function(e){this.props.store.setMRNAEnrichmentProfileMap(e)}},{key:"render",value:function(){return this.tabUI.component}}])&&d(n.prototype,o),i&&d(n,i),t}();g([i.default],v.prototype,"onChangeProfile",null),v=g([o.observer],v),t.a=v},function(e,t,n){"use strict";var r=n(0),o=n(7),i=n(8),a=n(579),s=n(733),l=n(855),u=n(101),c=n(590),p=n(577);function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var g=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":y(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},v=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=f(this,h(t).apply(this,arguments))).tabUI=Object(p.d)(function(){return e.props.store},function(){return e.enrichmentsUI},"protein",!0,!0,!1),e.enrichmentsUI=Object(a.a)({await:function(){return[e.props.store.proteinEnrichmentData,e.props.store.selectedProteinEnrichmentProfileMap,e.props.store.proteinEnrichmentAnalysisGroups,e.props.store.studies]},render:function(){var t=Object.keys(e.props.store.selectedProteinEnrichmentProfileMap.result),n=e.props.store.selectedProteinEnrichmentProfileMap.result[t[0]];return r.createElement("div",{"data-test":"GroupComparisonProteinEnrichments"},r.createElement(s.a,{dataSets:e.props.store.proteinEnrichmentProfiles,onChange:e.onChangeProfile,selectedProfileByStudyId:e.props.store.selectedProteinEnrichmentProfileMap.result,alwaysShow:!0,studies:e.props.store.studies.result}),r.createElement(l.a,{data:e.props.store.proteinEnrichmentData.result,groups:e.props.store.proteinEnrichmentAnalysisGroups.result,selectedProfile:n,alteredVsUnalteredMode:!1,sampleKeyToSample:e.props.store.sampleKeyToSample.result,isGeneCheckBoxEnabled:e.props.resultsViewMode}))},renderPending:function(){return r.createElement(u.a,{center:!0,isLoading:!0,size:"big"})},renderError:function(){return r.createElement(c.a,null)}}),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,r["Component"]),n=t,(o=[{key:"onChangeProfile",value:function(e){this.props.store.setProteinEnrichmentProfileMap(e)}},{key:"render",value:function(){return this.tabUI.component}}])&&d(n.prototype,o),i&&d(n,i),t}();g([i.default],v.prototype,"onChangeProfile",null),v=g([o.observer],v),t.a=v},,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(618),o={value:function(){}};function i(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r)throw new Error("illegal type: "+e);r[e]=[]}return new a(r)}function a(e){this._=e}function s(e,t){for(var n,r=0,o=e.length;r<o;++r)if((n=e[r]).name===t)return n.value}function l(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=o,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}a.prototype=i.prototype={constructor:a,on:function(e,t){var n,r,o=this._,i=(r=o,(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}})),a=-1,u=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<u;)if(n=(e=i[a]).type)o[n]=l(o[n],e.name,t);else if(null==t)for(n in o)o[n]=l(o[n],e.name,null);return this}for(;++a<u;)if((n=(e=i[a]).type)&&(n=s(o[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new a(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,o=new Array(n),i=0;i<n;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,n=(r=this._[e]).length;i<n;++i)r[i].value.apply(t,o)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}};var u=i,c=n(839),p=u("start","end","cancel","interrupt"),d=[],f=0,h=1,m=2,y=3,g=4,v=5,b=6,S=function(e,t,n,r,o,i){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var r,o=e.__transition;function i(l){var u,p,d,f;if(n.state!==h)return s();for(u in o)if((f=o[u]).name===n.name){if(f.state===y)return Object(c.timeout)(i);f.state===g?(f.state=b,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete o[u]):+u<t&&(f.state=b,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete o[u])}if(Object(c.timeout)(function(){n.state===y&&(n.state=g,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=m,n.on.call("start",e,e.__data__,n.index,n.group),n.state===m){for(n.state=y,r=new Array(d=n.tween.length),u=0,p=-1;u<d;++u)(f=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(r[++p]=f);r.length=p+1}}function a(t){for(var o=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(s),n.state=v,1),i=-1,a=r.length;++i<a;)r[i].call(e,o);n.state===v&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){for(var r in n.state=b,n.timer.stop(),delete o[t],o)return;delete e.__transition}o[t]=n,n.timer=Object(c.timer)(function(e){n.state=h,n.timer.restart(i,n.delay,n.time),n.delay<=e&&i(e-n.delay)},0,n.time)}(e,n,{name:t,index:r,group:o,on:p,tween:d,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:f})};function _(e,t){var n=E(e,t);if(n.state>f)throw new Error("too late; already scheduled");return n}function w(e,t){var n=E(e,t);if(n.state>y)throw new Error("too late; already running");return n}function E(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}var O=function(e,t){var n,r,o,i=e.__transition,a=!0;if(i){for(o in t=null==t?null:t+"",i)(n=i[o]).name===t?(r=n.state>m&&n.state<v,n.state=b,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[o]):a=!1;a&&delete e.__transition}},C=n(659);function P(e,t,n){var r=e._id;return e.each(function(){var e=w(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return E(e,r).value[t]}}var x=n(722),T=function(e,t){var n;return("number"==typeof t?C.interpolateNumber:t instanceof x.color?C.interpolateRgb:(n=Object(x.color)(t))?(t=n,C.interpolateRgb):C.interpolateString)(e,t)};var k=r.selection.prototype.constructor;function A(e){return function(){this.style.removeProperty(e)}}var I=0;function D(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function M(e){return Object(r.selection)().transition(e)}function j(){return++I}var N=r.selection.prototype;D.prototype=M.prototype={constructor:D,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=Object(r.selector)(e));for(var o=this._groups,i=o.length,a=new Array(i),s=0;s<i;++s)for(var l,u,c=o[s],p=c.length,d=a[s]=new Array(p),f=0;f<p;++f)(l=c[f])&&(u=e.call(l,l.__data__,f,c))&&("__data__"in l&&(u.__data__=l.__data__),d[f]=u,S(d[f],t,n,f,d,E(l,n)));return new D(a,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=Object(r.selectorAll)(e));for(var o=this._groups,i=o.length,a=[],s=[],l=0;l<i;++l)for(var u,c=o[l],p=c.length,d=0;d<p;++d)if(u=c[d]){for(var f,h=e.call(u,u.__data__,d,c),m=E(u,n),y=0,g=h.length;y<g;++y)(f=h[y])&&S(f,t,n,y,h,m);a.push(h),s.push(u)}return new D(a,s,t,n)},filter:function(e){"function"!=typeof e&&(e=Object(r.matcher)(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a,s=t[i],l=s.length,u=o[i]=[],c=0;c<l;++c)(a=s[c])&&e.call(a,a.__data__,c,s)&&u.push(a);return new D(o,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),a=new Array(r),s=0;s<i;++s)for(var l,u=t[s],c=n[s],p=u.length,d=a[s]=new Array(p),f=0;f<p;++f)(l=u[f]||c[f])&&(d[f]=l);for(;s<r;++s)a[s]=t[s];return new D(a,this._parents,this._name,this._id)},selection:function(){return new k(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=j(),r=this._groups,o=r.length,i=0;i<o;++i)for(var a,s=r[i],l=s.length,u=0;u<l;++u)if(a=s[u]){var c=E(a,t);S(a,e,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new D(r,this._parents,e,n)},call:N.call,nodes:N.nodes,node:N.node,size:N.size,empty:N.empty,each:N.each,on:function(e,t){var n=this._id;return arguments.length<2?E(this.node(),n).on.on(e):this.each(function(e,t,n){var r,o,i=function(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}(t)?_:w;return function(){var a=i(this,e),s=a.on;s!==r&&(o=(r=s).copy()).on(t,n),a.on=o}}(n,e,t))},attr:function(e,t){var n=Object(r.namespace)(e),o="transform"===n?C.interpolateTransformSvg:T;return this.attrTween(e,"function"==typeof t?(n.local?function(e,t,n){var r,o,i;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:a===r&&s===o?i:(o=s,i=t(r=a,l));this.removeAttributeNS(e.space,e.local)}}:function(e,t,n){var r,o,i;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttribute(e))===(s=l+"")?null:a===r&&s===o?i:(o=s,i=t(r=a,l));this.removeAttribute(e)}})(n,o,P(this,"attr."+e,t)):null==t?(n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}})(n):(n.local?function(e,t,n){var r,o,i=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?o:o=t(r=a,n)}}:function(e,t,n){var r,o,i=n+"";return function(){var a=this.getAttribute(e);return a===i?null:a===r?o:o=t(r=a,n)}})(n,o,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var o=Object(r.namespace)(e);return this.tween(n,(o.local?function(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t(n))}}(e,o)),n}return o._value=t,o}:function(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(e,t){return function(n){this.setAttribute(e,t(n))}}(e,o)),n}return o._value=t,o})(o,t))},style:function(e,t,n){var o="transform"==(e+="")?C.interpolateTransformCss:T;return null==t?this.styleTween(e,function(e,t){var n,o,i;return function(){var a=Object(r.style)(this,e),s=(this.style.removeProperty(e),Object(r.style)(this,e));return a===s?null:a===n&&s===o?i:i=t(n=a,o=s)}}(e,o)).on("end.style."+e,A(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var o,i,a;return function(){var s=Object(r.style)(this,e),l=n(this),u=l+"";return null==l&&(this.style.removeProperty(e),u=l=Object(r.style)(this,e)),s===u?null:s===o&&u===i?a:(i=u,a=t(o=s,l))}}(e,o,P(this,"style."+e,t))).each(function(e,t){var n,r,o,i,a="style."+t,s="end."+a;return function(){var l=w(this,e),u=l.on,c=null==l.value[a]?i||(i=A(t)):void 0;u===n&&o===c||(r=(n=u).copy()).on(s,o=c),l.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var o,i,a=n+"";return function(){var s=Object(r.style)(this,e);return s===a?null:s===o?i:i=t(o=s,n)}}(e,o,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,function(e,t,n){var r,o;function i(){var i=t.apply(this,arguments);return i!==o&&(r=(o=i)&&function(e,t,n){return function(r){this.style.setProperty(e,t(r),n)}}(e,i,n)),r}return i._value=t,i}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(P(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},remove:function(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,o=E(this.node(),n).tween,i=0,a=o.length;i<a;++i)if((r=o[i]).name===e)return r.value;return null}return this.each((null==t?function(e,t){var n,r;return function(){var o=w(this,e),i=o.tween;if(i!==n)for(var a=0,s=(r=n=i).length;a<s;++a)if(r[a].name===t){(r=r.slice()).splice(a,1);break}o.tween=r}}:function(e,t,n){var r,o;if("function"!=typeof n)throw new Error;return function(){var i=w(this,e),a=i.tween;if(a!==r){o=(r=a).slice();for(var s={name:t,value:n},l=0,u=o.length;l<u;++l)if(o[l].name===t){o[l]=s;break}l===u&&o.push(s)}i.tween=o}})(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){_(this,e).delay=+t.apply(this,arguments)}}:function(e,t){return t=+t,function(){_(this,e).delay=t}})(t,e)):E(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){w(this,e).duration=+t.apply(this,arguments)}}:function(e,t){return t=+t,function(){w(this,e).duration=t}})(t,e)):E(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){w(this,e).ease=t}}(t,e)):E(this.node(),t).ease},end:function(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(i,a){var s={value:a},l={value:function(){0==--o&&i()}};n.each(function(){var n=w(this,r),o=n.on;o!==e&&((t=(e=o).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),n.on=t})})}};var R={time:null,delay:0,duration:250,ease:n(984).easeCubicInOut};function L(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))return R.time=Object(c.now)(),R;return n}r.selection.prototype.interrupt=function(e){return this.each(function(){O(this,e)})},r.selection.prototype.transition=function(e){var t,n;e instanceof D?(t=e._id,e=e._name):(t=j(),(n=R).time=Object(c.now)(),e=null==e?null:e+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var a,s=r[i],l=s.length,u=0;u<l;++u)(a=s[u])&&S(a,e,t,u,s,n||L(a,t));return new D(r,this._parents,e,t)};var G=[null],F=function(e,t){var n,r,o=e.__transition;if(o)for(r in t=null==t?null:t+"",o)if((n=o[r]).state>h&&n.name===t)return new D([[e]],G,t,+r);return null};n.d(t,"transition",function(){return M}),n.d(t,"active",function(){return F}),n.d(t,"interrupt",function(){return O})},,function(e,t,n){"use strict";var r,o,i,a,s=n(0),l=n(4),u=n.n(l),c=n(8),p=n(7),d=n(2),f=n(9),h=n.n(f),m=n(102),y=(n(795),n(726),n(796),n(101)),g=n(56),v=n(17),b=n(629),S=n(757),_=n.n(S),w=n(126),E=n.n(w),O=n(3),C=n(573),P=n(11),x=n.n(P);function T(e){var t={};return e.forEach(function(e){var n=function(e){for(var t=[],n=e.start.position,r=e.end.position,o=n;o<=r;o++)t.push({resi:o});return e.start.insertionCode&&(t[0].icode=e.start.insertionCode),t.length>1&&e.end.insertionCode&&(t[t.length-1].icode=e.end.insertionCode),t}(e.positionRange),r=l.groupBy(n,"resi");l.each(l.keys(r),function(n){t[n]||(t[n]=[]),l.each(r[n],function(r){t[n].push({selector:r,residue:e})})})}),t}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}!function(e){e[e.CARTOON=0]="CARTOON",e[e.SPACE_FILLING=1]="SPACE_FILLING",e[e.TRACE=2]="TRACE",e[e.BALL_AND_STICK=3]="BALL_AND_STICK",e[e.RIBBON=4]="RIBBON"}(r||(r={})),function(e){e[e.UNIFORM=0]="UNIFORM",e[e.SECONDARY_STRUCTURE=1]="SECONDARY_STRUCTURE",e[e.NC_RAINBOW=2]="NC_RAINBOW",e[e.ATOM_TYPE=3]="ATOM_TYPE"}(o||(o={})),function(e){e[e.ALL=0]="ALL",e[e.SELECTED=1]="SELECTED",e[e.NONE=2]="NONE"}(i||(i={})),function(e){e[e.UNIFORM=0]="UNIFORM",e[e.MUTATION_TYPE=1]="MUTATION_TYPE",e[e.NONE=2]="NONE"}(a||(a={}));var A=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"updateVisualStyle",value:function(e,t,n){var r=this.updateScheme(n);this.updateBaseVisualStyle(r,n),this.updateChainVisualStyle(t,r,n),this.updateResidueStyle(e,t,n,r),this.updateBoundMolecules(n)}},{key:"updateScheme",value:function(e){var t=this.selectAll();return this.setScheme(e.proteinScheme,t)}},{key:"updateBaseVisualStyle",value:function(t,n){var r=e.defaultProps,o=this.selectAll();this.setColor(n.baseColor||r.baseColor,o,t),this.setTransparency(n.baseTranslucency||r.baseTranslucency,o,t)}},{key:"updateChainVisualStyle",value:function(t,n,r){var i=e.defaultProps,a=this.selectChain(t);this.setColor(r.chainColor||i.chainColor,a,n),this.setTransparency(r.chainTranslucency||i.chainTranslucency,a,n),r.proteinColor===o.ATOM_TYPE?(a=this.selectChain(t),this.cpkColor(a,n)):r.proteinColor===o.SECONDARY_STRUCTURE?(a=this.selectAlphaHelix(t),this.setColor((r.structureColors||i.structureColors).alphaHelix,a,n),a=this.selectBetaSheet(t),this.setColor((r.structureColors||i.structureColors).betaSheet,a,n)):r.proteinColor===o.NC_RAINBOW&&(a=this.selectChain(t),this.rainbowColor(a,n))}},{key:"updateBoundMolecules",value:function(e){e.displayBoundMolecules||this.hideBoundMolecules()}},{key:"convertPositionsToResCode",value:function(e){var t=[];return e.forEach(function(e){t=t.concat(function(e){for(var t=[],n=e.start.position,r=e.end.position,o=n;o<=r;o++)t.push("".concat(o));return e.start.insertionCode&&(t[0]+="^"+e.start.insertionCode),t.length>1&&e.end.insertionCode&&(t[t.length-1]+="^"+e.end.insertionCode),t}(e))}),t}}])&&k(t.prototype,n),r&&k(t,r),e}();A.defaultProps={pdbUri:"https://files.rcsb.org/view/",proteinScheme:r.CARTOON,displayBoundMolecules:!0,backgroundColor:"#FFFFFF",baseColor:"#DDDDDD",structureColors:{alphaHelix:"#FFA500",betaSheet:"#0000FF",loop:"#DDDDDD"},baseTranslucency:5,chainColor:"#888888",chainTranslucency:0,proteinColor:o.UNIFORM,mutationColor:a.MUTATION_TYPE,uniformMutationColor:"#8A2BE2",highlightColor:"#FFDD00",sideChain:i.SELECTED};var I=A,D=n(885),M=n.n(D);function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e,t,n){return(R="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=L(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var B=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":F(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},V=function(e){function t(e,n,r){var o,i,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,a=L(t).call(this),(o=!a||"object"!==F(a)&&"function"!=typeof a?N(i):a)._loadingPdb=!1,o.stateChangeReaction=Object(d.reaction)(function(){return o.state},function(e){o.onStateChange(e)}),o._3dMol=r||M.a,o._3dMolDiv=e,o.props=Object.assign(Object.assign({},I.defaultProps),n),o.state={pdbId:"",chainId:"",residues:[]},o._prevState={pdbId:"",chainId:"",residues:[]},o.updateViewer=o.updateViewer.bind(N(o)),o}var n,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(t,I),n=t,s=[{key:"PROTEIN_SCHEME_PRESETS",get:function(){var e={};return e[r.CARTOON]={cartoon:{}},e[r.TRACE]={cartoon:{style:"trace"}},e[r.SPACE_FILLING]={sphere:{scale:.6}},e[r.BALL_AND_STICK]={stick:{},sphere:{scale:.25}},e[r.RIBBON]={cartoon:{style:"ribbon"}},e}},{key:"ALL_PROTEINS",get:function(){var e=["asp","glu","arg","lys","his","asn","thr","cys","gln","tyr","ser","gly","ala","leu","val","ile","met","trp","phe","pro"],t=e.map(function(e){return e.toUpperCase()});return e.concat(t)}}],(o=[{key:"setState",value:function(e){this._prevState=Object.assign({},this.state),this.state=Object.assign(Object.assign({},this.state),e)}},{key:"onStateChange",value:function(e){this._prevState&&!this._loadingPdb&&(this.updateVisualStyle(e.residues,e.chainId,this.props),this._3dMolViewer.render())}},{key:"setProps",value:function(e){this._prevProps=this.props,this.props=e}},{key:"init",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.residues,r=arguments.length>3?arguments[3]:void 0;if(r?this._3dMolViewer=r:this._3dMolDiv&&(this._3dMolViewer=this._3dMol.createViewer(x()(this._3dMolDiv),{defaultcolors:this._3dMol.elementColors.rasmol})),this._3dMolViewer){var o=this.formatColor(this.props.backgroundColor||I.defaultProps.backgroundColor);this._3dMolViewer.setBackgroundColor(o),this.loadPdb(e,t,n)}}},{key:"loadPdb",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.residues,o={doAssembly:!0,pdbUri:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.props).pdbUri};this._loadingPdb=!0,this.setState({pdbId:e,chainId:t,residues:r}),this._3dMolViewer?(this._3dMolViewer.clear(),this._3dMol.download("pdb:".concat(e.toUpperCase()),this._3dMolViewer,o,function(){n._loadingPdb=!1,n.onStateChange(n.state)})):this._loadingPdb=!1}},{key:"updateViewer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.residues,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props;this.setProps(n),this.setState({chainId:e,residues:t})}},{key:"resize",value:function(){this._3dMolViewer&&this._3dMolViewer.resize()}},{key:"selectAll",value:function(){return{}}},{key:"selectChain",value:function(e){return{chain:e}}},{key:"setScheme",value:function(e,n){var r=t.PROTEIN_SCHEME_PRESETS[e];return this.applyStyleForSelector(n,r),r}},{key:"setColor",value:function(e,t,n){var r=this.formatColor(e);n&&(l.each(n,function(e){e.color=r}),this.applyStyleForSelector(t,n))}},{key:"formatColor",value:function(e){return e.replace("#","0x")}},{key:"setTransparency",value:function(e,t,n){n&&(this.addTransparencyToStyle(e,n),this.applyStyleForSelector(t,n))}},{key:"addTransparencyToStyle",value:function(e,t){l.each(t,function(t,n){"sphere"!==n&&(t.opacity=(10-e)/10)})}},{key:"rainbowColor",value:function(e,t){this.setColor("spectrum",e,t)}},{key:"cpkColor",value:function(e,t){var n=this;t&&(l.each(t,function(e){delete e.color,e.colors=n._3dMol.elementColors.defaultColors}),this.applyStyleForSelector(e,t))}},{key:"selectAlphaHelix",value:function(e){return{chain:e,ss:"h"}}},{key:"selectBetaSheet",value:function(e){return{chain:e,ss:"s"}}},{key:"hideBoundMolecules",value:function(){var e={resn:t.ALL_PROTEINS,invert:!0};this._3dMolViewer.setStyle(e,{sphere:{hidden:!0}})}},{key:"enableBallAndStick",value:function(e,n,o){var i=Object.assign(Object.assign({},o),t.PROTEIN_SCHEME_PRESETS[r.BALL_AND_STICK]);if(e){var a=this.formatColor(e);i.sphere||(i.sphere={}),i.sphere.color=a,i.stick||(i.stick={}),i.stick.color=a}this._3dMolViewer.setStyle(n,i)}},{key:"updateResidueStyle",value:function(e,n){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props,s=arguments.length>3?arguments[3]:void 0,l=I.defaultProps;s||(s=t.PROTEIN_SCHEME_PRESETS[o.proteinScheme],this.addTransparencyToStyle(o.chainTranslucency||l.chainTranslucency,s)),this.residuesToUpdate.forEach(function(e){var t,u=e.residue,c=r.selectResidue(e.selector,n);t=u.highlighted?r.props.highlightColor||l.highlightColor:o.mutationColor===a.MUTATION_TYPE?u.color:o.mutationColor===a.UNIFORM?o.uniformMutationColor||l.uniformMutationColor:o.chainColor||l.chainColor,r.setColor(t,c,s),(o.sideChain===i.ALL||!0===u.highlighted&&o.sideChain===i.SELECTED)&&r.updateSideChain(n,e.selector,o.proteinScheme,t,s)})}},{key:"updateScheme",value:function(e){return this.needToUpdateResiduesOnly?void 0:R(L(t.prototype),"updateScheme",this).call(this,e)}},{key:"updateBaseVisualStyle",value:function(e,n){this.needToUpdateResiduesOnly||R(L(t.prototype),"updateBaseVisualStyle",this).call(this,e,n)}},{key:"updateChainVisualStyle",value:function(e,n,r){this.needToUpdateResiduesOnly||R(L(t.prototype),"updateChainVisualStyle",this).call(this,e,n,r)}},{key:"updateVisualStyle",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props;R(L(t.prototype),"updateVisualStyle",this).call(this,e,n,r)}},{key:"selectResidues",value:function(e,t){return{rescode:e,chain:t}}},{key:"selectResidue",value:function(e,t){return Object.assign({chain:t},e)}},{key:"selectSideChains",value:function(e,t){return this.selectResidue(e,t)}},{key:"updateSideChain",value:function(e,t,n,o,i){if(n!==r.SPACE_FILLING){var a=this.selectSideChains(t,e);this.enableBallAndStick(o,a,i)}}},{key:"applyStyleForSelector",value:function(e,t){this._3dMolViewer.setStyle(e,t)}},{key:"residuesToUpdate",get:function(){return this.needToUpdateResiduesOnly?(e=this.currentResidueToPositionMap,t=this.prevResidueToPositionMap,n=[],l.each(l.keys(e),function(r){l.isEqual(e[r],t[r])||(n=n.concat(e[r]))}),n):l.flatten(l.values(this.currentResidueToPositionMap));var e,t,n}},{key:"needToUpdateResiduesOnly",get:function(){return this._prevState.pdbId===this.state.pdbId&&this._prevState.chainId===this.state.chainId&&this.visualPropsUnchanged&&this.residuePositionsUnchanged}},{key:"residuePositionsUnchanged",get:function(){return l.isEqual(l.keys(this.currentResidueToPositionMap).sort(),l.keys(this.prevResidueToPositionMap).sort())}},{key:"currentResidueToPositionMap",get:function(){return T(this.state.residues)}},{key:"prevResidueToPositionMap",get:function(){return T(this._prevState.residues)}},{key:"visualPropsUnchanged",get:function(){return l.isEqual(l.omit(this.props,["pdbId","chainId","residues"]),l.omit(this._prevProps,["pdbId","chainId","residues"]))}}])&&j(n.prototype,o),s&&j(n,s),t}();function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}B([d.observable],V.prototype,"props",void 0),B([d.observable],V.prototype,"_prevProps",void 0),B([d.observable],V.prototype,"state",void 0),B([d.observable],V.prototype,"_prevState",void 0),B([d.action],V.prototype,"setState",null),B([d.computed],V.prototype,"residuesToUpdate",null),B([d.computed],V.prototype,"needToUpdateResiduesOnly",null),B([d.computed],V.prototype,"residuePositionsUnchanged",null),B([d.computed],V.prototype,"currentResidueToPositionMap",null),B([d.computed],V.prototype,"prevResidueToPositionMap",null),B([d.computed],V.prototype,"visualPropsUnchanged",null);var K=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":W(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},$=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=q(t).call(this,e))||"object"!==W(o)&&"function"!=typeof o?U(r):o).divHandler=n.divHandler.bind(U(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(t,s["Component"]),n=t,(r=[{key:"render",value:function(){return s.createElement("div",{ref:this.divHandler,style:{height:this.props.bounds.height,width:this.props.bounds.width,padding:0},className:"borderedChart"})}},{key:"componentDidMount",value:function(){this._3dMolDiv&&(this.wrapper=new V(this._3dMolDiv,this.props),this.wrapper.init(this.props.pdbId,this.props.chainId,this.props.residues),this._pdbId=this.props.pdbId)}},{key:"componentDidUpdate",value:function(e){this.wrapper&&(this.props.pdbId!==this._pdbId?(this._pdbId=this.props.pdbId,this.wrapper.loadPdb(this._pdbId,this.props.chainId,this.props.residues,this.props)):this.wrapper.updateViewer(this.props.chainId,this.props.residues,this.props),l.isEqual(this.props.bounds,e.bounds)||this.wrapper.resize())}},{key:"divHandler",value:function(e){this._3dMolDiv=e,this.props.containerRef&&this.props.containerRef(e)}}])&&z(n.prototype,r),o&&z(n,o),t}(),Q=$=K([p.observer],$),Y=n(625),X=n(886),Z=n.n(X);function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ee(e){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var oe=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":re(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ie=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=ee(t).call(this,e))||"object"!==re(o)&&"function"!=typeof o?te(r):o).isTextTruncated=!0,n.toggleText=n.toggleText.bind(te(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(t,s["Component"]),n=t,(r=[{key:"render",value:function(){var e=this.props.text;return"string"==typeof this.props.text&&(e=s.createElement(Z.a,{text:this.props.text,line:this.props.line,truncateText:this.props.truncateText,textTruncateChild:s.createElement("a",{onClick:this.toggleText,style:{cursor:"pointer"}},this.props.expandIndicator)})),s.createElement(v.If,{condition:this.isTextTruncated},s.createElement(v.Then,null,e),s.createElement(v.Else,null,s.createElement("span",null,s.createElement("span",null,this.props.text," "),s.createElement("span",null,s.createElement("a",{onClick:this.toggleText,style:{cursor:"pointer"}},this.props.collapseIndicator)))))}},{key:"toggleText",value:function(){this.isTextTruncated=!this.isTextTruncated}}])&&J(n.prototype,r),o&&J(n,o),t}();ie.defaultProps={line:1,expandIndicator:"[...]",collapseIndicator:"[^]",truncateText:" "},oe([d.observable],ie.prototype,"isTextTruncated",void 0);var ae=ie=oe([p.observer],ie);function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function le(e,t){return!t||"object"!==pe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pe(e){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var de=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":pe(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},fe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),le(this,ue(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}(t,s["Component"]),n=t,(r=[{key:"render",value:function(){var e=null,t=null;if(this.props.cache){var n=this.props.cache.get(this.props.pdbId);if(null===n)e=s.createElement(O.o,{status:O.n.LOADING}),t=s.createElement(O.o,{status:O.n.LOADING});else if("error"===n.status)e=s.createElement(O.o,{status:O.n.ERROR}),t=s.createElement(O.o,{status:O.n.ERROR});else if(null===n.data)e=s.createElement(O.o,{status:O.n.NA}),t=s.createElement(O.o,{status:O.n.NA});else{var r=Object(Y.c)(n.data,this.props.chainId);e=r.pdbInfo,t=r.moleculeInfo}}return s.createElement("div",{className:this.props.truncateText?"col col-sm-12":""},s.createElement("div",{className:this.props.truncateText?"row":""},s.createElement("div",{className:"pull-left",style:{paddingRight:5}},s.createElement("span",{style:{fontWeight:this.props.summaryFormat?"bold":"normal"}},s.createElement("span",null,this.props.summaryFormat?"pdb":"PDB"),!this.props.summaryFormat&&s.createElement("span",{style:{paddingLeft:5}},s.createElement("a",{href:"http://www.rcsb.org/pdb/explore/explore.do?structureId=".concat(this.props.pdbId),target:"_blank"},s.createElement("b",null,this.props.pdbId))),s.createElement("span",null,":"))),s.createElement("div",{"data-test":"pdbChainInfoText"},this.props.truncateText?s.createElement(ae,{text:e}):s.createElement("span",null,e))),s.createElement("div",{className:this.props.truncateText?"row":""},s.createElement("div",{className:"pull-left",style:{paddingRight:5}},s.createElement("span",{style:{fontWeight:this.props.summaryFormat?"bold":"normal"}},s.createElement("span",null,this.props.summaryFormat?"chain":"Chain"),!this.props.summaryFormat&&s.createElement("span",{style:{paddingLeft:3}},s.createElement("b",null,this.props.chainId)),s.createElement("span",null,":"))),s.createElement("div",null,this.props.truncateText?s.createElement(ae,{text:t}):s.createElement("span",null,t))))}}])&&se(n.prototype,r),o&&se(n,o),t}(),he=fe=de([p.observer],fe);function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ge(e,t){return!t||"object"!==me(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ve(e){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function be(e,t){return(be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Se=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=ge(this,ve(t).apply(this,arguments)))._script=[],e}var n,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&be(e,t)}(t,I),n=t,s=[{key:"PROTEIN_SCHEME_PRESETS",get:function(){var e={};return e[r.CARTOON]="hide everything; show cartoon;",e[r.SPACE_FILLING]="hide everything; show spheres;",e[r.BALL_AND_STICK]="hide everything; show spheres; show sticks; alter all, vdw=0.50",e[r.RIBBON]="hide everything; show ribbon;",e[r.TRACE]=e[r.RIBBON],e}}],(o=[{key:"generateScript",value:function(e,t,n,r){return this._script=[],this.reinitialize(),this.bgColor(r.backgroundColor||I.defaultProps.backgroundColor),this.loadPdb(e),this.updateVisualStyle(n,t,r),this.selectNone(),this._script.join("\n")}},{key:"reinitialize",value:function(){this._script.push("reinitialize;")}},{key:"bgColor",value:function(e){this._script.push("bg_color ".concat(this.formatColor(e),";"))}},{key:"loadPdb",value:function(e){this._script.push("fetch ".concat(e,", async=0;"))}},{key:"setScheme",value:function(e){this._script.push(t.PROTEIN_SCHEME_PRESETS[e])}},{key:"setColor",value:function(e){this._script.push("color ".concat(this.formatColor(e),", sele;"))}},{key:"selectChain",value:function(e){this._script.push("select chain ".concat(e,";"))}},{key:"selectAlphaHelix",value:function(e){this._script.push("select (chain ".concat(e,") and (ss h);"))}},{key:"selectBetaSheet",value:function(e){this._script.push("select (chain ".concat(e,") and (ss s);"))}},{key:"selectResidues",value:function(e,t){this._script.push("select (resi ".concat(e.join(","),") and (chain ").concat(t,");"))}},{key:"selectSideChains",value:function(e,t){this._script.push("select ((resi ".concat(e.join(","),") and (chain ").concat(t,") and (not name c+n+o));"))}},{key:"setTransparency",value:function(e){this._script.push("set transparency, ".concat(e/10,", sele;")),this._script.push("set cartoon_transparency, ".concat(e/10,", sele;")),this._script.push("set sphere_transparency, ".concat(e/10,", sele;")),this._script.push("set stick_transparency, ".concat(e/10,", sele;"))}},{key:"enableBallAndStick",value:function(){this._script.push("show spheres, sele; show sticks, sele; alter sele, vdw=0.50;")}},{key:"disableBallAndStick",value:function(){this._script.push("hide spheres, sele; hide sticks, sele;")}},{key:"rainbowColor",value:function(){return this._script.push("spectrum count, rainbow_rev, sele;")}},{key:"cpkColor",value:function(){this._script.push("util.cbaw sele;")}},{key:"hideBoundMolecules",value:function(){this._script.push("hide everything, not resn ".concat("asp+glu+arg+lys+his+asn+thr+cys+gln+tyr+ser+gly+ala+leu+val+ile+met+trp+phe+pro",";"))}},{key:"formatColor",value:function(e){return e.replace("#","0x")}},{key:"selectAll",value:function(){this._script.push("select all;")}},{key:"selectNone",value:function(){this._script.push("select none;")}},{key:"updateResidueStyle",value:function(e,t,n){var r=this,o=I.defaultProps,s=n.highlightColor||o.highlightColor,u=l.groupBy(e,function(e){return e.highlighted?s:e.color});l.each(l.keys(u),function(e){var s=u[e].map(function(e){return e.positionRange}),l=r.convertPositionsToResCode(s);u[e][0].highlighted?(r.selectResidues(l,t),r.setColor(n.highlightColor||o.highlightColor)):n.mutationColor===a.MUTATION_TYPE?(r.selectResidues(l,t),r.setColor(e)):n.mutationColor===a.UNIFORM&&(r.selectResidues(l,t),r.setColor(n.uniformMutationColor||o.uniformMutationColor));var c=n.sideChain===i.ALL||!0===u[e][0].highlighted&&n.sideChain===i.SELECTED;r.updateSideChains(t,l,c,n)})}},{key:"updateSideChains",value:function(e,t,n,o){n&&o.proteinScheme!==r.SPACE_FILLING&&(this.selectSideChains(t,e),this.enableBallAndStick())}}])&&ye(n.prototype,o),s&&ye(n,s),t}(),_e=n(887),we=n.n(_e);function Ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ce(e){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xe(e,t){return(xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Te(e){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ke=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Te(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Ae=function(e){function t(e){var n,s,l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s=this,(n=!(l=Ce(t).call(this,e))||"object"!==Te(l)&&"function"!=typeof l?Pe(s):l).isCollapsed=!1,n.isIncreasedSize=!1,n.proteinScheme=r.CARTOON,n.proteinColor=o.UNIFORM,n.sideChain=i.SELECTED,n.mutationColor=a.MUTATION_TYPE,n.displayBoundMolecules=!0,n.containerRefHandler=n.containerRefHandler.bind(Pe(n)),n.toggleCollapse=n.toggleCollapse.bind(Pe(n)),n.toggleDoubleSize=n.toggleDoubleSize.bind(Pe(n)),n.handleProteinSchemeChange=n.handleProteinSchemeChange.bind(Pe(n)),n.handleProteinColorChange=n.handleProteinColorChange.bind(Pe(n)),n.handleSideChainChange=n.handleSideChainChange.bind(Pe(n)),n.handleMutationColorChange=n.handleMutationColorChange.bind(Pe(n)),n.handleBoundMoleculeChange=n.handleBoundMoleculeChange.bind(Pe(n)),n.handlePyMolDownload=n.handlePyMolDownload.bind(Pe(n)),n}var n,u,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xe(e,t)}(t,s["Component"]),n=t,(u=[{key:"selectionTitle",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"top",r=null;return t&&(r=this.defaultInfoTooltip(t,n)),s.createElement("span",null,e," ",r,":")}},{key:"defaultInfoTooltip",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top";return s.createElement(O.c,{placement:t,overlay:function(){return e},arrowContent:s.createElement("div",{className:"rc-tooltip-arrow-inner"}),destroyTooltipOnHide:!0},s.createElement("i",{className:"fa fa-info-circle"}))}},{key:"proteinColorTooltipContent",value:function(){return s.createElement("div",{style:{maxWidth:400,maxHeight:200,overflowY:"auto"}},"Color options for the protein structure. ",s.createElement("br",null),s.createElement("br",null),s.createElement("b",null,"Uniform:")," Colors the entire protein structure with a",s.createElement("span",{className:we.a.loop}," single color"),". ",s.createElement("br",null),s.createElement("b",null,"Secondary structure:")," Colors the protein by secondary structure. Assigns different colors for"," ",s.createElement("span",{className:we.a["alpha-helix"]},"alpha helices"),",",s.createElement("span",{className:we.a["beta-sheet"]}," beta sheets"),", and",s.createElement("span",{className:we.a.loop}," loops"),". This color option is not available for the space-filling protein scheme."," ",s.createElement("br",null),s.createElement("b",null,"N-C rainbow:")," Colors the protein with a rainbow gradient from red (N-terminus) to blue (C-terminus). ",s.createElement("br",null),s.createElement("b",null,"Atom Type:")," Colors the structure with respect to the atom type (CPK color scheme). This color option is only available for the space-filling protein scheme. ",s.createElement("br",null),s.createElement("br",null),"The selected chain is always displayed with full opacity while the rest of the structure has some transparency to help better focusing on the selected chain.")}},{key:"sideChainTooltipContent",value:function(){return s.createElement("div",{style:{maxWidth:400,maxHeight:200,overflowY:"auto"}},"Display options for the side chain atoms. ",s.createElement("br",null),s.createElement("br",null),s.createElement("b",null,"All:")," Displays the side chain atoms for every mapped residue. ",s.createElement("br",null),s.createElement("b",null,"Selected:")," Displays the side chain atoms only for the selected mutations. ",s.createElement("br",null),s.createElement("b",null,"None:")," Hides the side chain atoms. ",s.createElement("br",null),s.createElement("br",null),"This option has no effect for the space-filling protein scheme.")}},{key:"mutationColorTooltipContent",value:function(){return s.createElement("div",{style:{maxWidth:400,maxHeight:200,overflowY:"auto"}},"Color options for the mapped mutations. ",s.createElement("br",null),s.createElement("br",null),s.createElement("b",null,"Uniform:")," Colors all mutated residues with a",s.createElement("span",{className:we.a["uniform-mutation"]}," ","single color"),". ",s.createElement("br",null),s.createElement("b",null,"Mutation type:")," Enables residue coloring by mutation type. Mutation types and corresponding color codes are as follows:",s.createElement("ul",null,s.createElement("li",null,s.createElement("span",{className:we.a["missense-mutation"]},"Missense Mutations")),s.createElement("li",null,s.createElement("span",{className:we.a["trunc-mutation"]},"Truncating Mutations"),s.createElement("span",null," (Nonsense, Nonstop, FS del, FS ins)")),s.createElement("li",null,s.createElement("span",{className:we.a["inframe-mutation"]},"Inframe Mutations"),s.createElement("span",null," (IF del, IF ins)"))),s.createElement("b",null,"None:")," Disables coloring of the mutated residues except for manually selected (highlighted) residues. ",s.createElement("br",null),s.createElement("br",null),"Highlighted residues are colored with"," ",s.createElement("span",{className:we.a.highlighted},"yellow"),".")}},{key:"boundMoleculesTooltipContent",value:function(){return s.createElement("div",{style:{maxWidth:400,maxHeight:200,overflowY:"auto"}},"Displays co-crystalized molecules. This option has no effect if the current structure does not contain any co-crystalized bound molecules.")}},{key:"helpTooltipContent",value:function(){return s.createElement("div",{style:{maxWidth:400,maxHeight:200,overflowY:"auto"}},s.createElement("b",null,"Zoom in/out:")," Press and hold the SHIFT key and the left mouse button, and then move the mouse backward/forward.",s.createElement("br",null),s.createElement("b",null,"Pan:")," Press and hold the CTRL key, click and hold the left mouse button, and then move the mouse in the desired direction.",s.createElement("br",null),s.createElement("b",null,"Rotate:")," Press and hold the left mouse button, and then move the mouse in the desired direction to rotate along the x and y axes.",s.createElement("br",null))}},{key:"proteinStyleMenu",value:function(){return s.createElement("span",null,s.createElement("div",{className:"row text-center"},s.createElement("span",null,"Protein Style")),s.createElement("div",{className:"row"},s.createElement("div",{className:"col col-sm-10 col-sm-offset-1"},s.createElement("hr",null))),s.createElement("div",{className:"row"},s.createElement(g.Checkbox,{checked:this.displayBoundMolecules,onChange:this.handleBoundMoleculeChange},"Display bound molecules"," ",this.defaultInfoTooltip(this.boundMoleculesTooltipContent()))),s.createElement("div",{className:"row"},s.createElement("div",{className:"col col-sm-6"},s.createElement("div",{className:"row"},this.selectionTitle("Scheme")),s.createElement("div",{className:"row"},s.createElement(g.FormControl,{className:we.a["default-option-select"],componentClass:"select",value:"".concat(this.proteinScheme),onChange:this.handleProteinSchemeChange},s.createElement("option",{value:r.CARTOON},"cartoon"),s.createElement("option",{value:r.SPACE_FILLING},"space-filling"),s.createElement("option",{value:r.TRACE},"trace")))),s.createElement("div",{className:"col col-sm-6"},s.createElement("div",{className:"row"},this.selectionTitle("Color",this.proteinColorTooltipContent())),s.createElement("div",{className:"row"},s.createElement(g.FormControl,{className:we.a["default-option-select"],componentClass:"select",value:"".concat(this.proteinColor),onChange:this.handleProteinColorChange},s.createElement("option",{value:o.UNIFORM},"uniform"),s.createElement("option",{value:o.SECONDARY_STRUCTURE,disabled:this.colorBySecondaryStructureDisabled},"secondary structure"),s.createElement("option",{value:o.NC_RAINBOW,disabled:this.colorByNCRainbowDisabled},"N-C rainbow"),s.createElement("option",{value:o.ATOM_TYPE,disabled:this.colorByAtomTypeDisabled},"atom type"))))))}},{key:"mutationStyleMenu",value:function(){return s.createElement("span",null,s.createElement("div",{className:"row text-center"},s.createElement("span",null,"Mutation Style")),s.createElement("div",{className:"row"},s.createElement("div",{className:"col col-sm-10 col-sm-offset-1"},s.createElement("hr",null))),s.createElement("div",{className:"row"},s.createElement("div",{className:"col col-sm-6"},s.createElement("div",{className:"row"},this.selectionTitle("Side Chain",this.sideChainTooltipContent())),s.createElement("div",{className:"row"},s.createElement(g.FormControl,{className:we.a["default-option-select"],componentClass:"select",value:"".concat(this.sideChain),onChange:this.handleSideChainChange},s.createElement("option",{value:i.ALL},"all"),s.createElement("option",{value:i.SELECTED},"selected"),s.createElement("option",{value:i.NONE},"none")))),s.createElement("div",{className:"col col-sm-6"},s.createElement("div",{className:"row"},this.selectionTitle("Color",this.mutationColorTooltipContent(),"left")),s.createElement("div",{className:"row"},s.createElement(g.FormControl,{className:we.a["default-option-select"],componentClass:"select",value:"".concat(this.mutationColor),onChange:this.handleMutationColorChange},s.createElement("option",{value:a.UNIFORM},"uniform"),s.createElement("option",{value:a.MUTATION_TYPE},"mutation type"),s.createElement("option",{value:a.NONE},"none"))))))}},{key:"topToolbar",value:function(){return s.createElement("div",{className:"row"},s.createElement("div",{className:"col col-sm-6"},s.createElement(g.ButtonGroup,null,s.createElement(O.c,{overlay:s.createElement("span",null,"Download PyMol script"),placement:"top"},s.createElement(g.Button,{className:"btn-sm",onClick:this.handlePyMolDownload},s.createElement("i",{className:"fa fa-cloud-download"})," PyMol")))),s.createElement("div",{className:"col col-sm-6"},s.createElement("span",{className:"pull-right"},"how to pan/zoom/rotate?"," ",this.defaultInfoTooltip(this.helpTooltipContent(),"left"))))}},{key:"header",value:function(){return s.createElement("div",{className:h()("row",we.a.header)},s.createElement("div",{className:"col col-sm-10"},s.createElement("span",null,"3D Structure")),s.createElement("div",{className:"col col-sm-2"},s.createElement("span",{className:"pull-right"},s.createElement("i",{className:h()("fa",{"fa-compress":this.isIncreasedSize,"fa-expand":!this.isIncreasedSize}),onClick:this.toggleDoubleSize,style:{marginRight:5,cursor:"pointer"}}),s.createElement("i",{className:"fa fa-minus-circle",onClick:this.toggleCollapse,style:{marginRight:5,cursor:"pointer"}}),s.createElement("i",{className:"fa fa-times-circle",onClick:this.props.onClose,style:{cursor:"pointer"}}))))}},{key:"mainContent",value:function(){return this.pdbId&&this.chainId&&this.residues?s.createElement("span",null,s.createElement("div",{className:"row"},s.createElement(he,{pdbId:this.pdbId,chainId:this.chainId,cache:this.props.pdbHeaderCache,truncateText:!0})),s.createElement(v.If,{condition:this.residueWarning.length>0},s.createElement("div",{className:"row"},s.createElement("div",{className:"col col-sm-12 text-center"},s.createElement("span",{className:"text-danger"},this.residueWarning)))),s.createElement("div",{className:"row",style:{paddingTop:5,paddingBottom:5}},s.createElement(Q,{displayBoundMolecules:this.displayBoundMolecules,proteinScheme:this.proteinScheme,proteinColor:this.proteinColor,sideChain:this.sideChain,mutationColor:this.mutationColor,pdbId:this.pdbId,chainId:this.chainId,residues:this.residues,bounds:this.structureViewerBounds,containerRef:this.containerRefHandler}))):s.createElement("div",{style:{textAlign:"center"}},s.createElement(b.ThreeBounce,{size:25,style:{display:"inline-block",padding:25}}))}},{key:"render",value:function(){return s.createElement(_.a,{handle:".structure-viewer-header"},s.createElement("div",{className:h()(we.a["main-3d-panel"],Ee({},we.a["increased-size-panel"],this.isIncreasedSize))},s.createElement("div",{className:"structure-viewer-header row"},this.header(),s.createElement("hr",{style:{borderTopColor:"#BBBBBB"}})),s.createElement("div",{className:h()(we.a.body,Ee({},we.a["collapsed-panel"],this.isCollapsed))},this.mainContent(),s.createElement("div",{className:"row"},this.topToolbar(),s.createElement("hr",null)),s.createElement("div",{className:"row"},s.createElement("div",{className:"col col-sm-6"},this.proteinStyleMenu()),s.createElement("div",{className:"col col-sm-6"},this.mutationStyleMenu())))))}},{key:"containerRefHandler",value:function(e){this._3dMolDiv=e}},{key:"toggleCollapse",value:function(){this.isCollapsed=!this.isCollapsed}},{key:"toggleDoubleSize",value:function(){this.isIncreasedSize=!this.isIncreasedSize}},{key:"handleProteinSchemeChange",value:function(e){this.proteinScheme=parseInt(e.target.value,10),(this.proteinScheme!==r.SPACE_FILLING||this.proteinColor!==o.NC_RAINBOW&&this.proteinColor!==o.SECONDARY_STRUCTURE)&&(this.proteinScheme!==r.TRACE&&this.proteinScheme!==r.CARTOON||this.proteinColor!==o.ATOM_TYPE)||(this.proteinColor=o.UNIFORM)}},{key:"handleProteinColorChange",value:function(e){this.proteinColor=parseInt(e.target.value,10)}},{key:"handleSideChainChange",value:function(e){this.sideChain=parseInt(e.target.value,10)}},{key:"handleMutationColorChange",value:function(e){this.mutationColor=parseInt(e.target.value,10)}},{key:"handleBoundMoleculeChange",value:function(){this.displayBoundMolecules=!this.displayBoundMolecules}},{key:"handlePyMolDownload",value:function(){if(this.pdbId&&this.chainId){var e="".concat(this.pdbId,"_").concat(this.chainId,".pml");E()(this.pyMolScript,e)}}},{key:"structureViewerBounds",get:function(){var e,t;return this.isIncreasedSize?(e=this._3dMolDiv?Math.floor(this._3dMolDiv.offsetWidth*(5/3)):698,t=this._3dMolDiv?2*this._3dMolDiv.offsetHeight:350):(e=this._3dMolDiv?Math.floor(this._3dMolDiv.offsetWidth/(5/3)):450,t=this._3dMolDiv?this._3dMolDiv.offsetHeight/2:350),{width:e,height:t}}},{key:"pdbId",get:function(){return this.pdbChain?this.pdbChain.pdbId:void 0}},{key:"chainId",get:function(){return this.pdbChain?this.pdbChain.chain:void 0}},{key:"pdbChain",get:function(){var e=this.props.pdbChainDataStore.sortedFilteredSelectedData;return 0===e.length&&(e=this.props.pdbChainDataStore.allData),0===e.length?void 0:e[0]}},{key:"residueWarning",get:function(){var e="";if(0===this.proteinPositions.length||this.residueMappingData&&0===this.residueMappingData.filter(function(e){return null===e||null!==e.data}).length)e="None of the mutations can be mapped onto this structure";else{var t=l.keys(this.selectedMutationsByPosition).length,n=t-this.mappedSelectedPositions.length;1===t&&1===n?e="Selected mutation cannot be mapped onto this structure":n>0&&(e="".concat(n," of the selections cannot be mapped onto this structure"))}return e}},{key:"residues",get:function(){var e=this;if(this.residueMappingData){var t=[];return this.residueMappingData.forEach(function(n){if(n&&n.data){var r=e.mutationsByPosition[n.data.queryPosition],o=e.props.mutationDataStore&&(e.props.mutationDataStore.isPositionSelected(n.data.queryPosition)||e.props.mutationDataStore.isPositionHighlighted(n.data.queryPosition))||!1;r&&r.length>0&&t.push({positionRange:{start:{position:n.data.pdbPosition},end:{position:n.data.pdbPosition}},color:Object(C.h)(r,e.props),highlighted:o})}}),l.uniq(t)}}},{key:"residueMappingData",get:function(){if(0!==this.alignmentIds.length){var e=[];if(this.props.residueMappingCache&&this.props.uniprotId&&this.pdbId&&this.chainId&&this.proteinPositions.length>0){var t=this.props.residueMappingCache.get({uniprotId:this.props.uniprotId,pdbId:this.pdbId,chainId:this.chainId,uniprotPositions:this.proteinPositions});t.result&&(e=t.result)}return e}}},{key:"mappedSelectedPositions",get:function(){var e=this;if(!this.residueMappingData)return[];var t=[];return this.residueMappingData.forEach(function(n){n&&n.data&&e.props.mutationDataStore&&e.props.mutationDataStore.isPositionSelected(n.data.queryPosition)&&t.push(n.data.queryPosition)}),l.uniq(t)}},{key:"alignmentIds",get:function(){var e=[];this.pdbChain&&this.props.pdbAlignmentIndex&&(e=void 0===this.props.pdbAlignmentIndex[this.pdbChain.pdbId][this.pdbChain.chain]?[]:this.props.pdbAlignmentIndex[this.pdbChain.pdbId][this.pdbChain.chain].map(function(e){return e.alignmentId}));return l.uniq(e)}},{key:"mutationsByPosition",get:function(){return this.props.mutationDataStore?Object(C.l)(this.props.mutationDataStore.sortedFilteredData):{}}},{key:"selectedMutationsByPosition",get:function(){return this.props.mutationDataStore?Object(C.l)(this.props.mutationDataStore.sortedFilteredSelectedData):{}}},{key:"proteinPositions",get:function(){var e=[];return this.props.mutationDataStore&&this.pdbChain&&(e=Object(C.i)(this.props.mutationDataStore.sortedFilteredData,this.pdbChain.uniprotStart,this.pdbChain.uniprotEnd)),e}},{key:"pyMolScript",get:function(){var e=new Se,t={displayBoundMolecules:this.displayBoundMolecules,proteinScheme:this.proteinScheme,proteinColor:this.proteinColor,sideChain:this.sideChain,mutationColor:this.mutationColor};return this.pdbId&&this.chainId?e.generateScript(this.pdbId,this.chainId,this.residues||[],t):""}},{key:"colorBySecondaryStructureDisabled",get:function(){return this.proteinScheme===r.SPACE_FILLING}},{key:"colorByNCRainbowDisabled",get:function(){return this.proteinScheme===r.SPACE_FILLING}},{key:"colorByAtomTypeDisabled",get:function(){return this.proteinScheme!==r.SPACE_FILLING}}])&&Oe(n.prototype,u),c&&Oe(n,c),t}();ke([d.observable],Ae.prototype,"isCollapsed",void 0),ke([d.observable],Ae.prototype,"isIncreasedSize",void 0),ke([d.observable],Ae.prototype,"proteinScheme",void 0),ke([d.observable],Ae.prototype,"proteinColor",void 0),ke([d.observable],Ae.prototype,"sideChain",void 0),ke([d.observable],Ae.prototype,"mutationColor",void 0),ke([d.observable],Ae.prototype,"displayBoundMolecules",void 0),ke([d.computed],Ae.prototype,"structureViewerBounds",null),ke([d.computed],Ae.prototype,"pdbId",null),ke([d.computed],Ae.prototype,"chainId",null),ke([d.computed],Ae.prototype,"pdbChain",null),ke([d.computed],Ae.prototype,"residueWarning",null),ke([d.computed],Ae.prototype,"residues",null),ke([d.computed],Ae.prototype,"residueMappingData",null),ke([d.computed],Ae.prototype,"mappedSelectedPositions",null),ke([d.computed],Ae.prototype,"alignmentIds",null),ke([d.computed],Ae.prototype,"mutationsByPosition",null),ke([d.computed],Ae.prototype,"selectedMutationsByPosition",null),ke([d.computed],Ae.prototype,"proteinPositions",null),ke([d.computed],Ae.prototype,"pyMolScript",null),ke([d.computed],Ae.prototype,"colorBySecondaryStructureDisabled",null),ke([d.computed],Ae.prototype,"colorByNCRainbowDisabled",null),ke([d.computed],Ae.prototype,"colorByAtomTypeDisabled",null);var Ie=Ae=ke([p.observer],Ae);function De(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Me=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.regions=t?je(t):[]}var t,n,r;return t=e,(n=[{key:"check",value:function(e,t){void 0===t&&(t=e);for(var n,r,o=this.regions,i=0,a=o.length,s=!1;i<a;)if((r=o[n=Math.floor((i+a)/2)])[0]>t)a=n;else{if(!(r[1]<e)){s=!0;break}i=n+1}return s}},{key:"add",value:function(e,t){this.regions.push([e,t]),this.regions=je(this.regions)}},{key:"_getHotspotRegions",value:function(){return this.regions}}])&&De(t.prototype,n),r&&De(t,r),e}();function je(e){if(0===e.length)return[];e.sort(function(e,t){return e[0]<t[0]?-1:1});for(var t,n=[],r=[e[0][0],e[0][1]],o=1;o<=e.length;)o===e.length?n.push(r):(t=e[o])[0]>r[1]?(n.push(r),r=[e[o][0],e[o][1]]):r[1]=Math.max(r[1],t[1]),o++;return n}function Ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Re(e,t){return!t||"object"!==Fe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Le(e){return(Le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ge(e,t){return(Ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fe(e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Be=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Fe(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Ve=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Re(this,Le(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ge(e,t)}(t,s["Component"]),n=t,(r=[{key:"render",value:function(){var e=this;return s.createElement("g",{key:this.props.uniqueHitZoneClassName},this.segmentsAndGaps.map(function(t){return t.gap?s.createElement("line",{stroke:"#666666",strokeWidth:"0.5",x1:e.props.positionToX(t.start),x2:e.props.positionToX(t.end),y1:e.props.y+e.props.height/2,y2:e.props.y+e.props.height/2}):s.createElement("rect",{fill:"#3366cc",fillOpacity:e.props.opacity,stroke:"#666666",strokeWidth:"0.5",x:e.props.positionToX(t.start),y:e.props.y,width:e.props.positionToX(t.end)-e.props.positionToX(t.start),height:e.props.height})}),s.createElement("rect",{stroke:"#FF9900",strokeWidth:"2",fillOpacity:"0",strokeOpacity:+!!this.props.highlighted,height:this.props.height,width:this.props.positionToX(this.props.end)-this.props.positionToX(this.props.start),x:this.props.positionToX(this.props.start),y:this.props.y,className:this.props.uniqueHitZoneClassName}))}},{key:"segmentsAndGaps",get:function(){var e=[],t=l.sortBy(this.props.gaps,function(e){return e.start});if(0===t.length)e.push({gap:!1,start:this.props.start,end:this.props.end});else{t[0].start>this.props.start&&e.push({gap:!1,start:this.props.start,end:t[0].start}),e.push({gap:!0,start:t[0].start,end:t[0].end});for(var n=1;n<t.length;n++)e.push({gap:!1,start:t[n-1].end,end:t[n].start}),e.push({gap:!0,start:t[n].start,end:t[n].end});var r=t[t.length-1];r.end<this.props.end&&e.push({gap:!1,start:r.end,end:this.props.end})}return e}}])&&Ne(n.prototype,r),o&&Ne(n,o),t}();Be([d.computed],Ve.prototype,"segmentsAndGaps",null);var ze=Ve=Be([p.observer],Ve);function qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ue(e){return(Ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function He(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function We(e,t){return(We=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ke(e){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var $e=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Ke(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Qe=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=Ue(t).call(this,e))||"object"!==Ke(o)&&"function"!=typeof o?He(r):o).rowHeight=6,n.rowPadding=3,n.chainComponents={},n.onMouseOver=n.onMouseOver.bind(He(n)),n.positionToX=n.positionToX.bind(He(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&We(e,t)}(t,s["Component"]),n=t,(r=[{key:"positionToX",value:function(e){return e*this.props.width/this.props.proteinLength}},{key:"makeChainIdClass",value:function(e){return"".concat("chain-").concat(e)}},{key:"getChainId",value:function(e){var t=e.split(/[\s]+/g).map(function(e){return e.match(new RegExp("^(".concat("chain-",".*)$")))}).find(function(e){return null!==e});return t&&t[1]||null}},{key:"chainY",value:function(e){return e*(this.rowHeight+this.rowPadding)}},{key:"onMouseOver",value:function(e){var t=e.target,n=t.getAttribute("class")||"",r=this.getChainId(n);if(null!==r){var o=this.chainComponents[r];o&&this.props.setHitZone&&this.props.setHitZone({x:parseInt(t.getAttribute("x")||"0",10),y:parseInt(t.getAttribute("y")||"0",10),width:parseInt(t.getAttribute("width")||"0",10),height:parseInt(t.getAttribute("height")||"0",10)},o.props.uid)}}},{key:"render",value:function(){return s.createElement("div",null,s.createElement("div",{onMouseOver:this.onMouseOver},s.createElement("svg",{width:this.props.width,height:this.svgHeight},this.rows)))}},{key:"rowSpecs",get:function(){var e=[[]],t=[new Me],n=!0,r=!1,o=void 0;try{for(var i,a=function(){var n=i.value,r=l.findIndex(t,function(e){return!e.check(n.start,n.end)});-1===r&&(r=e.length,e.push([]),t.push(new Me)),e[r].push(n),t[r].add(n.start,n.end)},s=this.props.chains[Symbol.iterator]();!(n=(i=s.next()).done);n=!0)a()}catch(e){r=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return e}},{key:"rows",get:function(){var e=this,t=0;this.chainComponents={};var n={},r=this.rowSpecs.map(function(r,o){return s.createElement("g",{key:o},r.map(function(r){var i=e.makeChainIdClass(t++),a=r.uid,l=e.chainY(o);return n[a]=l,s.createElement(ze,{ref:function(t){null!==t&&(e.chainComponents[i]=t)},positionToX:e.positionToX,y:l,height:e.rowHeight,uniqueHitZoneClassName:i,start:r.start,end:r.end,gaps:r.gaps,opacity:r.opacity,uid:a,highlighted:e.props.selectedChainUid===r.uid})}))});return this.props.setChainUidToY&&this.props.setChainUidToY(n),r}},{key:"svgHeight",get:function(){return this.rows.length*this.rowHeight+(this.rows.length-1)*this.rowPadding}}])&&qe(n.prototype,r),o&&qe(n,o),t}();$e([d.observable],Qe.prototype,"rowHeight",void 0),$e([d.observable],Qe.prototype,"rowPadding",void 0),$e([d.computed],Qe.prototype,"rowSpecs",null),$e([d.computed],Qe.prototype,"rows",null),$e([d.computed],Qe.prototype,"svgHeight",null);var Ye=Qe=$e([p.observer],Qe),Xe=n(575);function Ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Je=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getOrganism",value:function(e,t){var n="NA";return l.find(e.compound,function(r){if(-1!=l.indexOf(r.chain,t.toLowerCase())&&null!=e.source[r.mol_id])return n=e.source[r.mol_id].organism_scientific||n,r}),n}},{key:"getOrganismFromCache",value:function(t,n){if(!t)return"";var r=t.get(n.pdbId);return r&&r.data?e.getOrganism(r.data,n.chain):""}}],(n=null)&&Ze(t.prototype,n),r&&Ze(t,r),e}(),et=n(750);function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rt(e,t){return!t||"object"!==st(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ot(e){return(ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function it(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&at(e,t)}function at(e,t){return(at=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function st(e){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var lt=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":st(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ut=function(e){function t(){return nt(this,t),rt(this,ot(t).apply(this,arguments))}return it(t,Xe["b"]),t}(),ct=function(e){function t(){return nt(this,t),rt(this,ot(t).apply(this,arguments))}var n,r,o;return it(t,s["Component"]),n=t,(r=[{key:"render",value:function(){return s.createElement(ut,{showColumnVisibility:!1,showCopyDownload:!1,itemsLabel:"PDB chain",itemsLabelPlural:"PDB chains",paginationProps:{showItemsPerPageSelector:!1,showMoreButton:!1},initialItemsPerPage:6,columns:this.columns,dataStore:this.props.dataStore,pageToHighlight:!0})}},{key:"columns",get:function(){var e=this,t=[];return t.push({name:"PDB Id",render:function(e){return s.createElement("a",{href:"http://www.rcsb.org/pdb/explore/explore.do?structureId=".concat(e.pdbId),target:"_blank"},e.pdbId)},sortBy:function(e){return e.pdbId},filter:function(e,t,n){return e.pdbId.toUpperCase().indexOf(n)>-1}}),t.push({name:"Chain",render:function(t){return s.createElement("span",null,s.createElement("span",{style:{float:"left",fontWeight:"bold",fontStyle:"italic"}},t.chain),s.createElement("a",{style:{float:"right",fontWeight:"bold",cursor:"pointer"},onClick:function(){e.props.dataStore.selectUid(e.props.dataStore.getChainUid(t))}},"3D"))},sortBy:function(e){return e.chain},filter:function(e,t,n){return e.chain.toUpperCase().indexOf(n)>-1}}),t.push({name:"Uniprot Positions",render:function(e){return s.createElement("span",null,"".concat(e.uniprotStart,"-").concat(e.uniprotEnd))},sortBy:function(e){return[e.uniprotStart,e.uniprotEnd]},filter:function(e,t){return(e.uniprotStart+"").indexOf(t)>-1||(e.uniprotEnd+"").indexOf(t)>-1}}),t.push({name:"Organism",render:Object(et.a)(function(t){return e.props.cache?e.props.cache.get(t.pdbId):null},function(e,t){return s.createElement("span",null,Je.getOrganism(e,t.chain))}),sortBy:function(t){return Je.getOrganismFromCache(e.props.cache,t)},filter:function(t,n,r){return(Je.getOrganismFromCache(e.props.cache,t)||"").toUpperCase().indexOf(r)>-1},visible:!!this.props.cache}),t.push({name:"Summary",render:function(t){return s.createElement(he,{pdbId:t.pdbId,chainId:t.chain,cache:e.props.cache,truncateText:!1,summaryFormat:!0})},filter:function(t,n,r){if(!e.props.cache)return!1;var o=e.props.cache.get(t.pdbId);if(o&&o.data){var i=Object(Y.c)(o.data,t.chain);return i.pdbInfo.toUpperCase().indexOf(r)>-1||(i.moleculeInfo||"").toUpperCase().indexOf(r)>-1}return!1},visible:!!this.props.cache}),t}}])&&tt(n.prototype,r),o&&tt(n,o),t}();lt([d.computed],ct.prototype,"columns",null);var pt=ct=lt([p.observer],ct),dt=n(106),ft=n(678),ht=n(770);function mt(){return(mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gt(e,t){return!t||"object"!==St(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vt(e){return(vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bt(e,t){return(bt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function St(e){return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var _t=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":St(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},wt=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=gt(this,vt(t).call(this,e))).isExpanded=!1,n.pdbChainTableShown=!1,n.hitZoneConfig={x:0,y:0,width:0,height:0,onClick:function(){}},n._chainScrollY=0,n.collapseTimeout=null,n.expandTimeout=null,n.chainUidToY={},n.expandDelayMs=750,n.collapseDelayMs=3e3,n.handlers={onMouseEnter:Object(d.action)(function(){n.expandTimeout=window.setTimeout(function(){n.isExpanded=!0},n.expandDelayMs),n.collapseTimeout&&window.clearTimeout(n.collapseTimeout)}),onMouseLeave:Object(d.action)(function(){n.collapseTimeout=window.setTimeout(function(){n.isExpanded=!1},n.collapseDelayMs),n.expandTimeout&&window.clearTimeout(n.expandTimeout)}),chainDivRef:function(e){n.chainDiv=e},onChainScroll:function(){n.chainDiv&&n.isExpanded&&(n._chainScrollY=n.chainDiv.scrollTop)},togglePDBTable:Object(d.action)(function(){n.pdbChainTableShown=!n.pdbChainTableShown}),getTooltipContent:function(){return n.hoveredChain?s.createElement(he,{pdbId:n.hoveredChain.pdbId,chainId:n.hoveredChain.chain,cache:n.props.pdbHeaderCache}):null},setHitZone:function(e,t){n.hitZoneConfig.x=e.x,n.hitZoneConfig.y=e.y,n.hitZoneConfig.width=e.width,n.hitZoneConfig.height=e.height,n.hitZoneConfig.onClick=function(){n.selectChain(t)},n.hoveredChain=n.props.store.pdbChainDataStore.getPdbChain(t)},setChainUidToY:function(e){n.chainUidToY=e}},n.onChainSelectReaction=Object(d.reaction)(function(){return n.props.store.pdbChainDataStore.selectedUid},function(e){var t=n.chainUidToY[e];if(void 0!==t&&(t<n.chainDiv.scrollTop||t>n.chainDiv.scrollTop+n.props.maxChainsHeight)){var r=n.props.maxChainsHeight/2;n.chainDiv.scrollTop=t-r}}),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bt(e,t)}(t,s["Component"]),n=t,(r=[{key:"componentWillUnmount",value:function(){this.onChainSelectReaction()}},{key:"selectChain",value:function(e){this.props.store.pdbChainDataStore.selectUid(e)}},{key:"componentDidMount",value:function(){var e=this;Object(ht.a)(function(){return e.props.store.pdbChainDataStore.selectFirstChain()})}},{key:"componentDidUpdate",value:function(){var e=this;Object(ht.a)(function(){e.chainDiv&&(e.chainDiv.scrollTop=e.chainScrollY)})}},{key:"helpTooltipContent",value:function(){return s.createElement("div",{style:{maxWidth:400}},"This panel displays a list of PDB chains for the corresponding uniprot ID. PDB chains are ranked with respect to their sequence similarity ratio, and aligned to the y-axis of the mutation diagram. Highly ranked chains have darker color than the lowly ranked ones.",s.createElement("br",null),s.createElement("br",null),"Each chain is represented by a single rectangle. Gaps within the chains are represented by a thin line connecting the segments of the chain.",s.createElement("br",null),s.createElement("br",null),"By default, only a first few rows are displayed. To see more chains, use the scroll bar next to the panel. To see the detailed list of all available PDB chains in a table click on the link below the panel.",s.createElement("br",null),s.createElement("br",null),"To select a chain, simply click on it. Selected chain is highlighted with a different frame color. You can also select a chain by clicking on a row in the table. Selecting a chain reloads the PDB data for the 3D structure visualizer.")}},{key:"render",value:function(){var e={};return this.tooltipVisible||(e.visible=!1),s.createElement("div",{onMouseEnter:this.handlers.onMouseEnter,onMouseLeave:this.handlers.onMouseLeave},s.createElement(dt.Collapse,{isOpened:this.isOpen},s.createElement("div",{style:{position:"relative"}},s.createElement("div",{className:"small",style:{position:"absolute"}},s.createElement("span",{style:{marginLeft:16}},"PDB Chains"),s.createElement(O.c,{placement:"left",overlay:this.helpTooltipContent,destroyTooltipOnHide:!0},s.createElement("i",{className:"fa fa-info-circle",style:{paddingLeft:3}}))),s.createElement("div",{ref:this.handlers.chainDivRef,style:{overflowY:"scroll",maxHeight:this.props.maxChainsHeight,marginLeft:this.props.geneXOffset,position:"relative"},onScroll:this.handlers.onChainScroll},s.createElement(Ye,{width:this.props.geneWidth,chains:this.chains,proteinLength:this.proteinLength,setHitZone:this.handlers.setHitZone,selectedChainUid:this.props.store.pdbChainDataStore.selectedUid,setChainUidToY:this.handlers.setChainUidToY}),s.createElement(O.c,mt({placement:"top",overlay:this.handlers.getTooltipContent},e),this.hitZone)),s.createElement("br",null),s.createElement("div",{style:{display:this.isExpanded?"inherit":"none"}},s.createElement("button",{onClick:this.handlers.togglePDBTable,className:"btn btn-default"},this.pdbChainTableShown?"Hide PDB Chain Table":"Show PDB Chain Table"),s.createElement("div",{style:{display:this.pdbChainTableShown?"inherit":"none",maxWidth:this.props.geneWidth}},s.createElement(pt,{dataStore:this.props.store.pdbChainDataStore,cache:this.props.pdbHeaderCache}))),s.createElement("br",null))))}},{key:"chainScrollY",get:function(){return this.isExpanded?this._chainScrollY:0}},{key:"isOpen",get:function(){return!!this.props.store.pdbChainDataStore.selectedChain}},{key:"displayChains",get:function(){return this.props.store.pdbChainDataStore.selectedChain?this.isExpanded?this.props.store.pdbChainDataStore.allData:[this.props.store.pdbChainDataStore.selectedChain]:[]}},{key:"chains",get:function(){var e=this;return this.displayChains.map(function(t){for(var n=[],r=-1,o=t.alignment,i=0;i<o.length;i++)o[i]===ft.a?-1===r&&(r=i):-1!==r&&(n.push({start:t.uniprotStart+r,end:t.uniprotStart+i}),r=-1);return{start:t.uniprotStart,end:t.uniprotEnd+1,gaps:n,opacity:t.identityPerc,uid:e.props.store.pdbChainDataStore.getChainUid(t)}})}},{key:"proteinLength",get:function(){var e=this.props.store.canonicalTranscript.result&&this.props.store.canonicalTranscript.result.proteinLength||0;return Math.max(e,1)}},{key:"tooltipVisible",get:function(){return null!==this.handlers.getTooltipContent()}},{key:"hitZone",get:function(){return s.createElement(O.i,{x:this.hitZoneConfig.x,y:this.hitZoneConfig.y,width:this.hitZoneConfig.width,height:this.hitZoneConfig.height,onClick:this.hitZoneConfig.onClick,cursor:"pointer"})}}])&&yt(n.prototype,r),o&&yt(n,o),t}();_t([d.observable],wt.prototype,"isExpanded",void 0),_t([d.observable],wt.prototype,"pdbChainTableShown",void 0),_t([d.observable],wt.prototype,"hoveredChain",void 0),_t([d.observable],wt.prototype,"hitZoneConfig",void 0),_t([d.computed],wt.prototype,"chainScrollY",null),_t([d.action],wt.prototype,"selectChain",null),_t([d.computed],wt.prototype,"isOpen",null),_t([d.computed],wt.prototype,"displayChains",null),_t([d.computed],wt.prototype,"chains",null),_t([d.computed],wt.prototype,"proteinLength",null),_t([d.computed],wt.prototype,"tooltipVisible",null),_t([d.computed],wt.prototype,"hitZone",null);var Et=wt=_t([p.observer],wt),Ot=n(670),Ct=n(584),Pt=n(888),xt=n.n(Pt);function Tt(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function kt(){return(kt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function At(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function It(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dt(e,t){return!t||"object"!==Nt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Mt(e){return(Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jt(e,t){return(jt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Nt(e){return(Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Rt=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Nt(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Lt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Dt(this,Mt(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jt(e,t)}(t,m["q"]),n=t,(r=[{key:"render",value:function(){return s.createElement("div",null,this.structureViewerPanel,s.createElement(y.a,{center:!0,size:"big",isLoading:this.isLoading}),!this.isLoading&&s.createElement("div",null,s.createElement("div",{style:{display:"flex"}},s.createElement("div",{className:"borderedChart",style:{marginRight:10}},this.mutationPlot,this.proteinChainPanel),s.createElement("div",{className:"mutationMapperMetaColumn"},this.geneSummary,this.mutationRateSummary,this.mutationFilterPanel,this.view3dButton)),s.createElement("hr",{style:{marginTop:20}}),this.mutationTable))}},{key:"open3dPanel",value:function(){this.trackVisibility[m.u.PDB]="visible"}},{key:"close3dPanel",value:function(){this.trackVisibility[m.u.PDB]="hidden"}},{key:"toggle3dPanel",value:function(){this.is3dPanelOpen?this.close3dPanel():this.open3dPanel()}},{key:"onTrackVisibilityChange",value:function(e){var t=this;"hidden"===this.trackVisibility[m.u.PDB]&&e.includes(m.u.PDB)?this.open3dPanel():"visible"!==this.trackVisibility[m.u.PDB]||e.includes(m.u.PDB)||this.close3dPanel(),Object.keys(this.trackVisibility).forEach(function(e){return t.trackVisibility[e]="hidden"}),e.forEach(function(e){return t.trackVisibility[e]="visible"})}},{key:"onProteinImpactTypeSelect",value:function(e,t){Object(m.ab)(e.map(function(e){return e.toLowerCase()}),t,this.store.dataStore,m.h.PROTEIN_IMPACT_TYPE,Ot.b)}},{key:"trackDataStatus",get:function(){var e,t=this.props.store.oncoKbData.status;"complete"===t&&u.a.isEmpty(this.props.store.oncoKbDataByProteinPosStart)&&(t="empty");var n=this.props.store.indexedHotspotData.status;"complete"===n&&u.a.isEmpty(this.props.store.hotspotsByPosition)&&(n="empty");var r=this.props.store.alignmentData.status;"complete"===r&&0===this.props.store.pdbChainDataStore.allData.length&&(r="empty");var o=this.props.store.ptmData.status;return"complete"!==o||this.props.store.ptmData.result&&0!==this.props.store.ptmData.result.length||(o="empty"),At(e={},m.u.OncoKB,t),At(e,m.u.CancerHotspots,n),At(e,m.u.PTM,o),At(e,m.u.PDB,r),e}},{key:"windowWrapper",get:function(){return Ct.a}},{key:"is3dPanelOpen",get:function(){return"visible"===this.trackVisibility[m.u.PDB]}},{key:"mutationRateSummary",get:function(){return null}},{key:"multipleMutationInfo",get:function(){var e=this.props.store.dataStore.duplicateMutationCountInMultipleSamples,t=1===e?"mutation":"mutations";return e>0?": includes ".concat(e," duplicate ").concat(t," in patients with multiple samples"):""}},{key:"itemsLabelPlural",get:function(){return"Mutations".concat(this.multipleMutationInfo)}},{key:"proteinImpactTypeFilter",get:function(){return Object(Ot.d)(this.store.dataStore.dataFilters)}},{key:"mutationFilterPanel",get:function(){return s.createElement("div",null,s.createElement("div",{style:{paddingBottom:15,paddingTop:15}},s.createElement(m.t,{filter:this.proteinImpactTypeFilter,counts:this.store.mutationCountsByProteinImpactType,onSelect:this.onProteinImpactTypeSelect})))}},{key:"structureViewerPanel",get:function(){return this.is3dPanelOpen?s.createElement(Ie,kt({mutationDataStore:this.props.store.dataStore,pdbChainDataStore:this.props.store.pdbChainDataStore,pdbAlignmentIndex:this.props.store.indexedAlignmentData,pdbHeaderCache:this.props.pdbHeaderCache,residueMappingCache:this.props.store.residueMappingCache,uniprotId:this.props.store.uniprotId.result,onClose:this.close3dPanel},C.a)):null}},{key:"mutationPlot",get:function(){return s.createElement(m.o,{store:this.props.store,pubMedCache:this.props.pubMedCache,mutationAlignerCache:this.mutationAlignerCache,onXAxisOffset:this.onXAxisOffset,geneWidth:this.geneWidth,tracks:this.tracks,trackVisibility:this.trackVisibility,trackDataStatus:this.trackDataStatus,onTrackVisibilityChange:this.onTrackVisibilityChange,getLollipopColor:C.h,filterResetPanel:this.props.store.dataStore.showingAllData||null===this.filterResetPanel?void 0:this.filterResetPanel})}},{key:"tracks",get:function(){var e=m.v.defaultProps.tracks,t=[{name:m.u.OncoKB,enabled:this.props.enableOncoKb},{name:m.u.CancerHotspots,enabled:this.props.enableHotspot}];return u.a.without.apply(u.a,[e].concat(Tt(t.filter(function(e){return!e.enabled}).map(function(e){return e.name}))))}},{key:"proteinChainPanel",get:function(){return this.is3dPanelOpen?s.createElement(Et,{store:this.props.store,pdbHeaderCache:this.props.pdbHeaderCache,geneWidth:this.geneWidth,geneXOffset:this.lollipopPlotGeneX,maxChainsHeight:200}):null}},{key:"view3dButton",get:function(){return s.createElement("button",{className:"btn btn-default btn-sm",disabled:0===this.props.store.pdbChainDataStore.allData.length,onClick:this.toggle3dPanel,"data-test":"view3DStructure"},"View 3D Structure")}},{key:"filterResetPanel",get:function(){var e=this.props.store.dataStore;return s.createElement(m.l,{resetFilters:function(){return e.resetFilters()},filterInfo:"Showing ".concat(e.tableData.length," of ").concat(e.allData.length," mutations."),className:h()("alert","alert-success",xt.a.filterResetPanel),buttonClass:"btn btn-default btn-xs"})}},{key:"isMutationTableDataLoading",get:function(){return!1}},{key:"mutationTableComponent",get:function(){return null}}])&&It(n.prototype,r),o&&It(n,o),t}();Rt([d.computed],Lt.prototype,"trackDataStatus",null),Rt([d.computed],Lt.prototype,"windowWrapper",null),Rt([d.computed],Lt.prototype,"is3dPanelOpen",null),Rt([d.computed],Lt.prototype,"multipleMutationInfo",null),Rt([d.computed],Lt.prototype,"itemsLabelPlural",null),Rt([d.computed],Lt.prototype,"proteinImpactTypeFilter",null),Rt([d.computed],Lt.prototype,"tracks",null),Rt([d.action],Lt.prototype,"open3dPanel",null),Rt([c.default,d.action],Lt.prototype,"close3dPanel",null),Rt([c.default,d.action],Lt.prototype,"toggle3dPanel",null),Rt([c.default,d.action],Lt.prototype,"onTrackVisibilityChange",null),Rt([c.default,d.action],Lt.prototype,"onProteinImpactTypeSelect",null),Lt=Rt([p.observer],Lt);t.a=Lt},function(e,t,n){"use strict";var r=n(0),o=n(7),i=n(56),a=n(895),s=n(9),l=n.n(s),u=n(2);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}function h(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var b=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":v(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},S=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},_=function(e){function t(){return p(this,t),h(this,m(t).apply(this,arguments))}return y(t,r["Component"]),f(t,[{key:"render",value:function(){var e=this.props,t=(e.bsRole,e.title),n=S(e,["bsRole","title"]);return r.createElement(i.Button,c({className:"btn btn-default"},n),t," ",this.props.titleElement," ",r.createElement("span",{className:"caret"}))}}]),t}(),w=function(e){function t(){return p(this,t),h(this,m(t).apply(this,arguments))}return y(t,r["Component"]),f(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.children;return r.createElement("div",{className:l()("dropdown-menu",t),style:{padding:"6px"}},n)}}]),t}(),E=function(e){function t(e){var n;return p(this,t),(n=h(this,m(t).call(this,e))).open=!1,n.toggle=function(){n.open=!n.open},n.hide=function(){n.open=!1},n}return y(t,r["Component"]),f(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.id,o=e.className,s=(e.ref,S(e,["children","id","className","ref"]));return r.createElement(a.RootCloseWrapper,{onRootClose:this.hide},r.createElement(i.Dropdown,{id:n+"",open:this.open},r.createElement(_,c({bsStyle:"default",bsRole:"toggle",title:"Custom Toggle",onClick:this.toggle},s)),r.createElement(w,{bsRole:"menu",className:l()(o)},t)))}}]),t}();b([u.observable],E.prototype,"open",void 0);var O=E=b([o.observer],E);function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var A=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":k(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},I=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),P(this,x(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=this;return r.createElement(i.Modal,{show:this.props.show,onHide:this.props.onHide,animation:!1},r.createElement(i.Modal.Header,{closeButton:!0},r.createElement(i.Modal.Title,null,"Open new tab to MD Anderson NG-CHM?")),r.createElement(i.Modal.Body,null,r.createElement("div",{className:"oncoprint__controls__heatmap_menu mdacc-modal"},r.createElement("p",null,"Continue will open a tab or window to a different site (not cBioPortal)."),r.createElement("p",null,"You will be able to view this study as Next Generation Clustered Heatmaps (NG-CHM) developed by The University of Texas MD Anderson Cancer Center."),r.createElement("em",null,"Note: NG-CHM will not be limited to your selected samples and genes."))),r.createElement(i.Modal.Footer,null,r.createElement(i.Button,{onClick:function(){e.props.openNgchmWindow(),e.props.onHide()}},"Continue"),r.createElement(i.Button,{onClick:this.props.onHide},"Cancel")))}}])&&C(n.prototype,o),a&&C(n,a),t}(),D=I=A([o.observer],I),M=n(609),j=n(4),N=n.n(j),R=n(101),L=n(3),G=n(186),F=n.n(G),B=(n(755),n(911),n(570)),V=n(585),z=n(662),q=n(8),U=n(605),H=n(816),W=n(65),K=n(592),$=n(579),Q=n(775);function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function X(e,t){return!t||"object"!==ee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var te=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ee(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ne=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),X(this,Z(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return void 0===this.props.count?null:r.createElement("span",{className:"oncoprintDropdownCount"},this.props.count)}}])&&Y(n.prototype,o),i&&Y(n,i),t}(),re=ne=te([o.observer],ne);function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ie(e,t){return!t||"object"!==le(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ue,ce=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":le(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};!function(e){e.CLINICAL="Clinical",e.GROUPS="Groups"}(ue||(ue={}));var pe=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=ie(this,ae(t).apply(this,arguments))).open=!1,e.tabId=ue.CLINICAL,e.options=Object(L.S)({await:function(){return[e.props.store.clinicalAttributes,e.clinicalAttributeIdToAvailableFrequency]},invoke:function(){var t=j.uniqBy(e.props.store.clinicalAttributes.result,function(e){return e.clinicalAttributeId}),n=e.clinicalAttributeIdToAvailableFrequency.result,r={clinical:[],groups:[]},o=!0,i=!1,a=void 0;try{for(var s,l=t[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var u=s.value;Object(K.d)(u)?r.groups.push(u):r.clinical.push(u)}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}return r.clinical=j.sortBy(r.clinical,[function(e){return e.clinicalAttributeId===K.c.StudyOfOrigin?0:e.clinicalAttributeId===K.c.MutationSpectrum?1:Object(K.f)(e)?2:3},function(e){var t=n[e.clinicalAttributeId];return void 0===t&&(t=0),-t},function(e){return-e.priority},function(e){return e.displayName.toLowerCase()}]),r.groups=j.sortBy(r.groups,function(e){return e.displayName.toLowerCase()}),Promise.resolve(j.mapValues(r,function(t){return t.map(function(t){return{label:t.displayName,key:t.clinicalAttributeId,selected:t.clinicalAttributeId in e.selectedClinicalAttributeIds}})}))}}),e.clinicalAttributeIdToAvailableFrequency=Object(L.S)({await:function(){return[e.props.store.clinicalAttributeIdToAvailableSampleCount,e.props.store.samples]},invoke:function(){var t=e.props.store.samples.result.length;return Promise.resolve(j.mapValues(e.props.store.clinicalAttributeIdToAvailableSampleCount.result,function(e){return 100*e/t}))}}),e.addClinicalTracksMenu=Object($.a)({await:function(){return[e.options]},render:function(){return r.createElement(H.a,{options:e.options.result.clinical,freqPromise:e.clinicalAttributeIdToAvailableFrequency,onAddAll:e.addAll,onClearAll:e.clear,onToggleOption:e.toggleClinicalTrack,optionsGivenInSortedOrder:!0})},renderPending:function(){return r.createElement(R.a,{isLoading:!0,small:!0})},showLastRenderWhenPending:!0}),e.addGroupTracksMenu=Object($.a)({await:function(){return[e.options]},render:function(){return r.createElement(H.a,{options:e.options.result.groups,freqPromise:e.clinicalAttributeIdToAvailableFrequency,onAddAll:e.addAll,onClearAll:e.clear,onToggleOption:e.toggleClinicalTrack,optionsGivenInSortedOrder:!0,frequencyHeaderTooltip:"% samples in group"})},renderPending:function(){return r.createElement(R.a,{isLoading:!0,small:!0})},showLastRenderWhenPending:!0}),e}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&se(e,t)}(t,r["Component"]),n=t,(i=[{key:"updateTabId",value:function(e){this.tabId=e}},{key:"addAll",value:function(e){this.props.onChangeSelectedClinicalTracks(j.union(this.props.getSelectedClinicalAttributeIds(),e))}},{key:"clear",value:function(e){this.props.onChangeSelectedClinicalTracks(j.difference(this.props.getSelectedClinicalAttributeIds(),e))}},{key:"toggleClinicalTrack",value:function(e){this.props.onChangeSelectedClinicalTracks(Object(Q.b)(e,this.props.getSelectedClinicalAttributeIds()))}},{key:"getDropdown",value:function(){return this.props.store.comparisonGroups.isComplete&&this.props.store.comparisonGroups.result.length>0?r.createElement(U.b,{activeTabId:this.tabId,onTabClick:this.updateTabId,className:"mainTabs oncoprintAddClinicalTracks"},r.createElement(U.a,{key:0,id:ue.CLINICAL,linkText:ue.CLINICAL},this.addClinicalTracksMenu.component),r.createElement(U.a,{key:1,id:ue.GROUPS,linkText:ue.GROUPS,hide:!this.props.store.comparisonGroups.isComplete||0===this.props.store.comparisonGroups.result.length},this.addGroupTracksMenu.component)):r.createElement("div",{className:"tab-content"},r.createElement("div",{className:"msk-tab"},this.addClinicalTracksMenu.component))}},{key:"onDropdownChange",value:function(e){this.open=e}},{key:"render",value:function(){return r.createElement(L.c,{visible:this.open,trigger:["click"],onVisibleChange:this.onDropdownChange,placement:"bottomRight",destroyTooltipOnHide:!0,overlay:r.createElement(o.Observer,null,this.getDropdown),align:{overflow:{adjustX:!0,adjustY:!1}},arrowContent:r.createElement("span",null),overlayClassName:"oncoprintAddClinicalTracksDropdown"},r.createElement("button",{className:l()("btn btn-default btn-md",{active:this.open}),"data-event":Object(W.e)({category:"resultsView",action:"addClinicalTrackMenuOpen",label:this.props.store.studyIds.result.join(",")}),"data-test":"add-clinical-track-button"},"Add Clinical Tracks"," ",r.createElement(re,{count:this.options.isComplete?this.options.result.clinical.length:void 0}),"",r.createElement("span",{className:"caret"}),""))}},{key:"selectedClinicalAttributeIds",get:function(){return j.keyBy(this.props.getSelectedClinicalAttributeIds())}}])&&oe(n.prototype,i),a&&oe(n,a),t}();ce([u.observable],pe.prototype,"open",void 0),ce([u.observable],pe.prototype,"tabId",void 0),ce([q.default,u.action],pe.prototype,"updateTabId",null),ce([q.default,u.action],pe.prototype,"addAll",null),ce([q.default,u.action],pe.prototype,"clear",null),ce([q.default,u.action],pe.prototype,"toggleClinicalTrack",null),ce([u.computed],pe.prototype,"selectedClinicalAttributeIds",null),ce([q.default],pe.prototype,"getDropdown",null),ce([q.default,u.action],pe.prototype,"onDropdownChange",null);var de=pe=ce([o.observer],pe),fe=n(866),he=n(21),me=n.n(he);function ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ge(e){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function be(e,t){return(be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Se(e){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var _e=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Se(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},we=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=ge(t).call(this,e),(n=!o||"object"!==Se(o)&&"function"!=typeof o?ve(r):o).textAreaContent="",n.timeout=void 0,n.TIMEOUT_DELAY=750,n.itemRemovedByUser=function(e){n.props.onIconClicked&&e.target&&n.props.onIconClicked(e.target.id)},n.textUpdatedByUser=function(e){n.textAreaContent=e.currentTarget.value,n.props.onChangeTextArea&&n.startTimedSubmit()},n.onAreaClicked=function(e){me.a.findDOMNode(n.refs.textarea).focus()},n.textUpdatedByUser=n.textUpdatedByUser.bind(ve(n)),n.itemRemovedByUser=n.itemRemovedByUser.bind(ve(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&be(e,t)}(t,r["Component"]),n=t,(o=[{key:"startTimedSubmit",value:function(){this.stopTimedSubmit(),this.timeout=setTimeout(function(){this.textAreaContent=this.props.onChangeTextArea(this.textAreaContent),this.stopTimedSubmit()}.bind(this),this.TIMEOUT_DELAY)}},{key:"stopTimedSubmit",value:function(){this.timeout&&clearTimeout(this.timeout)}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:l()("text-icon-area",this.props.classNames),onClick:this.onAreaClicked},r.createElement("div",{className:l()("icon-area",this.props.classNames)},this.props.elements.map(function(t){return r.createElement("div",{className:l()(t.classNames,"icon")},t.label,"",r.createElement("div",{className:l()("fa","fa-times-circle","icon-button"),onClick:e.itemRemovedByUser,id:t.value}))})),r.createElement("textarea",{ref:"textarea",placeholder:this.props.placeholder,value:this.textAreaContent,onInput:this.textUpdatedByUser,className:l()("text-area",this.props.classNames)}))}}])&&ye(n.prototype,o),i&&ye(n,i),t}();_e([u.observable],we.prototype,"textAreaContent",void 0);var Ee=we=_e([o.observer],we),Oe=n(624),Ce=n(610);function Pe(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Te(e){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ke(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ae(e,t){return(Ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var De=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Ie(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Me="0",je="1",Ne="2",Re="3",Le="4",Ge="4.1",Fe="4.2",Be="5",Ve="5.1",ze="6",qe="7",Ue="8",He="9",We="10",Ke="13",$e="15",Qe="16",Ye="17",Xe="18",Ze="19",Je="20",et="21",tt="22",nt="22.1",rt="23",ot="25",it="26",at="27",st="28",lt="29",ut="29.1",ct="31",pt="32",dt=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=Te(t).call(this,e),(n=!o||"object"!==Ie(o)&&"function"!=typeof o?ke(r):o).heatmapGenesReady=!1,n.textareaGenericAssayEntityText="",n.genericAssayEntityFilter="",n.showConfirmNgchmModal=!1,n.getHeatmapMenu=n.getHeatmapMenu.bind(ke(n)),n.getClinicalTracksMenu=n.getClinicalTracksMenu.bind(ke(n)),n.getSortMenu=n.getSortMenu.bind(ke(n)),n.getViewMenu=n.getViewMenu.bind(ke(n)),n.getDownloadMenu=n.getDownloadMenu.bind(ke(n)),n.onInputClick=n.onInputClick.bind(ke(n)),n.getMutationColorMenu=n.getMutationColorMenu.bind(ke(n)),n.getHorzZoomControls=n.getHorzZoomControls.bind(ke(n)),n.onSelect=n.onSelect.bind(ke(n)),n.toggleShowMinimap=n.toggleShowMinimap.bind(ke(n)),n.onType=n.onType.bind(ke(n)),n.onHeatmapProfileSelect=n.onHeatmapProfileSelect.bind(ke(n)),n.onButtonClick=n.onButtonClick.bind(ke(n)),n.onZoomInClick=n.onZoomInClick.bind(ke(n)),n.onZoomOutClick=n.onZoomOutClick.bind(ke(n)),n.onCustomDriverTierCheckboxClick=n.onCustomDriverTierCheckboxClick.bind(ke(n)),n.onHorzZoomSliderChange=n.onHorzZoomSliderChange.bind(ke(n)),n.onHorzZoomSliderSet=n.onHorzZoomSliderSet.bind(ke(n)),n.onSetHorzZoomTextInput=n.onSetHorzZoomTextInput.bind(ke(n)),n.horzZoomSliderState=e.state.horzZoom,Object(u.reaction)(function(){return n.isGenericAssayDataComplete},function(e){return e&&n.initializeSelectedGenericAssayEntityIds()}),Object(u.reaction)(function(){return n.props.state.horzZoom},function(e){return n.horzZoomSliderState=e}),n}var a,s,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ae(e,t)}(t,r["Component"]),a=t,(s=[{key:"initializeSelectedGenericAssayEntityIds",value:function(){this._selectedGenericAssayEntityIds=this.props.selectedGenericAssayEntitiesGroupByGenericAssayTypeFromUrl&&this.props.state.selectedHeatmapProfileGenericAssayType&&this.props.selectedGenericAssayEntitiesGroupByGenericAssayTypeFromUrl[this.props.state.selectedHeatmapProfileGenericAssayType]&&!N.a.isEmpty(this.genericAssayEntitiesSelectOptionsInSelectedHeatmapProfile)?N.a.intersectionBy(this.props.selectedGenericAssayEntitiesGroupByGenericAssayTypeFromUrl[this.props.state.selectedHeatmapProfileGenericAssayType],N.a.map(this.genericAssayEntitiesSelectOptionsInSelectedHeatmapProfile,function(e){return e.id})):[]}},{key:"onZoomInClick",value:function(){this.props.handlers.onClickZoomIn()}},{key:"onZoomOutClick",value:function(){this.props.handlers.onClickZoomOut()}},{key:"onSetHorzZoomTextInput",value:function(e){var t=parseFloat(e)/100;this.props.handlers.onSetHorzZoom(t)}},{key:"onSelect",value:function(e){e===Be&&this.props.handlers.onSelectDistinguishMutationType&&this.props.handlers.onSelectDistinguishMutationType(!this.props.state.distinguishMutationType)}},{key:"onHeatmapProfileSelect",value:function(e){this.props.handlers.onSelectHeatmapProfile&&this.props.handlers.onSelectHeatmapProfile(e.value);var t=this.props.molecularProfileIdToMolecularProfile&&this.props.molecularProfileIdToMolecularProfile[e.value]?this.props.molecularProfileIdToMolecularProfile[e.value].genericAssayType:void 0;this.props.selectedGenericAssayEntitiesGroupByGenericAssayTypeFromUrl&&t&&this.props.selectedGenericAssayEntitiesGroupByGenericAssayTypeFromUrl[t]&&!N.a.isEmpty(this.genericAssayEntitiesSelectOptionsInSelectedHeatmapProfile)?this._selectedGenericAssayEntityIds=N.a.intersectionBy(this.props.selectedGenericAssayEntitiesGroupByGenericAssayTypeFromUrl[t],N.a.map(this.genericAssayEntitiesSelectOptionsInSelectedHeatmapProfile,function(e){return e.id})):this._selectedGenericAssayEntityIds=[]}},{key:"toggleShowMinimap",value:function(){this.props.handlers.onSelectShowMinimap&&this.props.handlers.onSelectShowMinimap(!this.props.state.showMinimap)}},{key:"onInputClick",value:function(e){switch(e.target.value){case Ne:this.props.handlers.onSelectShowUnalteredColumns&&this.props.handlers.onSelectShowUnalteredColumns(!this.props.state.showUnalteredColumns);break;case Re:this.props.handlers.onSelectShowWhitespaceBetweenColumns&&this.props.handlers.onSelectShowWhitespaceBetweenColumns(!this.props.state.showWhitespaceBetweenColumns);break;case Le:this.props.handlers.onSelectShowClinicalTrackLegends&&this.props.handlers.onSelectShowClinicalTrackLegends(!this.props.state.showClinicalTrackLegends);break;case Ge:this.props.handlers.onSelectOnlyShowClinicalLegendForAlteredCases&&this.props.handlers.onSelectOnlyShowClinicalLegendForAlteredCases(!this.props.state.onlyShowClinicalLegendForAlteredCases);break;case Fe:this.props.handlers.onSelectShowOqlInLabels&&this.props.handlers.onSelectShowOqlInLabels(!this.props.state.showOqlInLabels);break;case Me:this.props.handlers.onSelectColumnType&&this.props.handlers.onSelectColumnType("sample");break;case je:this.props.handlers.onSelectColumnType&&this.props.handlers.onSelectColumnType("patient");break;case He:this.props.handlers.onClickSortByData&&this.props.handlers.onClickSortByData();break;case qe:this.props.handlers.onClickSortAlphabetical&&this.props.handlers.onClickSortAlphabetical();break;case Ue:this.props.handlers.onClickSortCaseListOrder&&this.props.handlers.onClickSortCaseListOrder();break;case ze:this.props.handlers.onSelectSortByMutationType&&this.props.handlers.onSelectSortByMutationType(!this.props.state.sortByMutationType);break;case We:this.props.handlers.onSelectSortByDrivers&&this.props.handlers.onSelectSortByDrivers(!this.props.state.sortByDrivers);break;case $e:this.props.handlers.onSelectDistinguishDrivers&&this.props.handlers.onSelectDistinguishDrivers(!this.props.state.distinguishDrivers);break;case Be:this.props.handlers.onSelectDistinguishMutationType&&this.props.handlers.onSelectDistinguishMutationType(!this.props.state.distinguishMutationType);break;case Ve:this.props.handlers.onSelectDistinguishGermlineMutations(!this.props.state.distinguishGermlineMutations);break;case Qe:this.props.handlers.onSelectAnnotateOncoKb&&this.props.handlers.onSelectAnnotateOncoKb(!this.props.state.annotateDriversOncoKb);break;case Ye:this.props.handlers.onSelectAnnotateHotspots&&this.props.handlers.onSelectAnnotateHotspots(!this.props.state.annotateDriversHotspots);break;case Xe:this.props.handlers.onSelectAnnotateCBioPortal&&this.props.handlers.onSelectAnnotateCBioPortal(!this.props.state.annotateDriversCBioPortal);break;case Ze:this.props.handlers.onSelectAnnotateCOSMIC&&this.props.handlers.onSelectAnnotateCOSMIC(!this.props.state.annotateDriversCOSMIC);break;case tt:this.props.handlers.onSelectHidePutativePassengers&&this.props.handlers.onSelectHidePutativePassengers(!this.props.state.hidePutativePassengers);break;case nt:this.props.handlers.onSelectHideGermlineMutations(!this.props.state.hideGermlineMutations);break;case rt:this.props.handlers.onSelectCustomDriverAnnotationBinary&&this.props.handlers.onSelectCustomDriverAnnotationBinary(!this.props.state.annotateCustomDriverBinary)}}},{key:"onHorzZoomSliderChange",value:function(e){this.horzZoomSliderState=e}},{key:"onHorzZoomSliderSet",value:function(){this.props.handlers.onSetHorzZoom(this.horzZoomSliderState),this.horzZoomSliderState=this.props.state.horzZoom}},{key:"onCustomDriverTierCheckboxClick",value:function(e){this.props.handlers.onSelectCustomDriverAnnotationTier&&this.props.handlers.onSelectCustomDriverAnnotationTier(e.target.value,!(this.props.state.selectedCustomDriverAnnotationTiers&&this.props.state.selectedCustomDriverAnnotationTiers.get(e.target.value)))}},{key:"onButtonClick",value:function(e){switch(e.target.name){case Ke:this.props.handlers.onClickAddGenesToHeatmap&&this.props.handlers.onClickAddGenesToHeatmap();break;case pt:this.props.handlers.onClickAddGenericAssaysToHeatmap&&this.props.handlers.onClickAddGenericAssaysToHeatmap(this._selectedGenericAssayEntityIds);break;case at:this.props.handlers.onClickDownload&&this.props.handlers.onClickDownload("svg");break;case it:this.props.handlers.onClickDownload&&this.props.handlers.onClickDownload("png");break;case ot:this.props.handlers.onClickDownload&&this.props.handlers.onClickDownload("pdf");break;case st:this.props.handlers.onClickDownload&&this.props.handlers.onClickDownload("order");break;case lt:this.props.handlers.onClickDownload&&this.props.handlers.onClickDownload("tabular");break;case ut:this.props.handlers.onClickDownload&&this.props.handlers.onClickDownload("oncoprinter");break;case ct:this.props.state.ngchmButtonActive&&this.props.handlers.onClickNGCHM&&(this.showConfirmNgchmModal=!0)}}},{key:"onChangeHeatmapGeneInput",value:function(e,t,n){this.props.handlers.onChangeHeatmapGeneInputValue&&this.props.handlers.onChangeHeatmapGeneInputValue(n);var r=N.a.keyBy(t.found,function(e){return e.hugoGeneSymbol.toUpperCase()});this.heatmapGenesReady=N.a.every(e.query,function(e){return e.gene.toUpperCase()in r})}},{key:"onType",value:function(e){switch(e.target.name){case Je:this.props.handlers.onChangeAnnotateCBioPortalInputValue&&this.props.handlers.onChangeAnnotateCBioPortalInputValue(e.target.value);break;case et:this.props.handlers.onChangeAnnotateCOSMICInputValue&&this.props.handlers.onChangeAnnotateCOSMICInputValue(e.target.value)}}},{key:"onChangeGenericAssayTextArea",value:function(e){return Object(Oe.b)(e,this._selectedGenericAssayEntityIds,this.genericAssayEntitiesOptionsByValueMap)}},{key:"onAddAllGenericAssayRemoved",value:function(e){N.a.remove(this._selectedGenericAssayEntityIds,function(t){return t===e})}},{key:"onSelectGenericAssayEntities",value:function(e){this._selectedGenericAssayEntityIds=e.map(function(e){return e.id})}},{key:"onInputChange",value:function(e){this.genericAssayEntityFilter=e}},{key:"onAddAllGenericAssays",value:function(){this.filteredGenericAssayOptions&&this.onSelectGenericAssayEntities(N.a.uniqBy([].concat(Pe(this.selectedGenericAssaysJS),Pe(this.filteredGenericAssayOptions)),function(e){return e.value}))}},{key:"getSelectedClinicalAttributeIds",value:function(){return this.props.state.selectedClinicalAttributeIds}},{key:"getClinicalTracksMenu",value:function(){return this.props.store&&this.props.state.selectedClinicalAttributeIds&&this.props.handlers.onChangeSelectedClinicalTracks?r.createElement(de,{store:this.props.store,getSelectedClinicalAttributeIds:this.getSelectedClinicalAttributeIds,onChangeSelectedClinicalTracks:this.props.handlers.onChangeSelectedClinicalTracks}):null}},{key:"getHeatmapMenu",value:function(){var e=this.props.state.heatmapIsDynamicallyQueried,t=e&&this.props.state.selectedHeatmapProfileAlterationType!==B.a.GENERIC_ASSAY,n=e&&this.props.state.selectedHeatmapProfileAlterationType===B.a.GENERIC_ASSAY;if(this.props.oncoprinterMode||this.props.state.hideHeatmapMenu||!this.props.state.heatmapProfilesPromise)return null;var o=r.createElement(R.a,{isLoading:!0});if(this.props.state.heatmapProfilesPromise.isComplete){if(!this.props.state.heatmapProfilesPromise.result.length)return null;o=r.createElement("div",{className:"oncoprint__controls__heatmap_menu"},r.createElement(M.default,{clearable:!1,searchable:!1,isLoading:this.props.state.heatmapProfilesPromise.isPending,onChange:this.onHeatmapProfileSelect,value:this.props.state.selectedHeatmapProfileId,options:this.heatmapProfileOptions}),t&&[r.createElement(z.b,{inputGeneQuery:this.props.state.heatmapGeneInputValue||"",callback:this.onChangeHeatmapGeneInput,location:z.a.ONCOPRINT_HEATMAP}),r.createElement("button",{key:"addGenesToHeatmapButton",className:"btn btn-sm btn-default",name:Ke,onClick:this.onButtonClick,disabled:!this.heatmapGenesReady},"Add Genes to Heatmap")],n&&[r.createElement(Ee,{elements:this.textareaGenericAssayEntries,text:this.textareaGenericAssayEntityText,placeholder:"Type space- or comma-separated ".concat(Object(Ce.n)(this.props.state.selectedHeatmapProfileGenericAssayType)," here, then click 'Add ").concat(Object(Ce.n)(this.props.state.selectedHeatmapProfileGenericAssayType,!0)," to Heatmap'"),onChangeTextArea:this.onChangeGenericAssayTextArea,onIconClicked:this.onAddAllGenericAssayRemoved,classNames:["generic-assay-textarea"]}),this.isGenericAssayDataComplete?r.createElement("div",{className:l()("generic-assay-selector")},r.createElement(L.a,{name:"generic-assay-select",placeholder:"Search for ".concat(Object(Ce.n)(this.props.state.selectedHeatmapProfileGenericAssayType,!0),"..."),options:this.filteredGenericAssayOptions,onChange:this.onSelectGenericAssayEntities,value:this.selectedGenericAssaysJS,onInputChange:this.onInputChange,addAllLabel:this.addAllLabel,onAddAll:this.onAddAllGenericAssays,inputValue:this.genericAssayEntityFilter})):r.createElement(R.a,{isLoading:!0}),r.createElement("button",{key:"addGenericAssaysToHeatmapButton",className:"btn btn-sm btn-default",name:pt,onClick:this.onButtonClick,disabled:!this.isGenericAssayDataComplete},"Add ".concat(Object(Ce.n)(this.props.state.selectedHeatmapProfileGenericAssayType,!0)," to Heatmap"))],this.props.state.ngchmButtonActive&&[r.createElement("hr",null),r.createElement(L.c,{overlay:r.createElement("span",null,"Open a new tab to visualize this study as Next Generation Clustered Heatmaps from MD Anderson Cancer Center.")},r.createElement("button",{className:l()("btn","btn-sm","btn-default"),name:ct,onClick:this.onButtonClick},"Whole Study Heatmap (NG-CHM)"," ",r.createElement("i",{className:"fa fa-external-link","aria-hidden":"true"})))])}else this.props.state.heatmapProfilesPromise.isError&&(o=r.createElement("span",null,"Error loading heatmap profiles."));return r.createElement(O,{bsStyle:"default",title:"Add Heatmap Tracks",id:"heatmapDropdown",className:"heatmap",titleElement:r.createElement(re,{count:this.props.state.heatmapProfilesPromise.isComplete&&this.props.state.heatmapProfilesPromise.result?this.props.state.heatmapProfilesPromise.result.length:void 0})},o)}},{key:"getSortMenuOncoprinter",value:function(){return r.createElement(O,{bsStyle:"default",title:"Sort",id:"sortDropdown"},r.createElement("div",{className:"oncoprint__controls__sort_menu","data-test":"oncoprintSortDropdownMenu"},r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:ze,checked:this.props.state.sortByMutationType,onClick:this.onInputClick,disabled:!this.props.state.distinguishMutationType})," ","Mutation Type")),r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:We,checked:this.props.state.sortByDrivers,onClick:this.onInputClick,disabled:!this.props.state.distinguishDrivers})," ","Driver/Passenger"))))}},{key:"getSortMenuOncoprint",value:function(){return r.createElement(O,{bsStyle:"default",title:"Sort",id:"sortDropdown"},r.createElement("div",{className:"oncoprint__controls__sort_menu","data-test":"oncoprintSortDropdownMenu"},r.createElement("div",{className:"radio"},r.createElement("label",null,r.createElement("input",{"data-test":"sortByData",type:"radio",name:"sortBy",value:He,checked:"data"===this.props.state.sortMode.type,onClick:this.onInputClick})," ","Sort by data")),r.createElement("div",{style:{marginLeft:"10px"}},r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:ze,checked:this.props.state.sortByMutationType,onClick:this.onInputClick,disabled:"data"!==this.props.state.sortMode.type||!this.props.state.distinguishMutationType})," ","Mutation Type")),r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:We,checked:this.props.state.sortByDrivers,onClick:this.onInputClick,disabled:"data"!==this.props.state.sortMode.type||!this.props.state.distinguishDrivers})," ","Driver/Passenger"))),r.createElement("div",{className:"radio"},r.createElement("label",null,r.createElement("input",{type:"radio",name:"sortBy",value:qe,checked:"alphabetical"===this.props.state.sortMode.type,onClick:this.onInputClick})," ","Sort by case id (alphabetical)")),r.createElement("div",{className:"radio"},r.createElement("label",null,r.createElement("input",{type:"radio",name:"sortBy",value:Ue,checked:"caseList"===this.props.state.sortMode.type,onClick:this.onInputClick,"data-test":"caseList",disabled:!!this.props.state.sortByCaseListDisabled})," ","Sort by case list order")),this.props.state.heatmapProfilesPromise&&!(this.props.state.heatmapProfilesPromise.isComplete&&!this.props.state.heatmapProfilesPromise.result.length)&&r.createElement("div",{className:"radio"},r.createElement("label",null,r.createElement("input",{"data-test":"sortByHeatmapClustering",type:"radio",name:"sortBy",checked:"heatmap"===this.props.state.sortMode.type,disabled:!0})," ","Sorted by heatmap clustering order"))))}},{key:"getMutationColorMenu",value:function(){return r.createElement(O,{bsStyle:"default",title:"Mutations",id:"mutationColorDropdown"},r.createElement("div",{className:"oncoprint__controls__mutation_color_menu"},r.createElement("h5",null,"Color by"),r.createElement("div",{style:{marginLeft:"10px"}},r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{"data-test":"ColorByType",type:"checkbox",value:Be,checked:this.props.state.distinguishMutationType,onClick:this.onInputClick})," ","Type")),r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{"data-test":"ColorByGermline",type:"checkbox",value:Ve,checked:this.props.state.distinguishGermlineMutations,onClick:this.onInputClick})," ","Somatic vs Germline"))),this.driverAnnotationSection))}},{key:"getViewMenu",value:function(){return this.props.oncoprinterMode?this.getViewMenuOncoprinter():this.getViewMenuOncoprint()}},{key:"getViewMenuOncoprinter",value:function(){return r.createElement(O,{bsStyle:"default",title:"View",id:"viewDropdownButton"},r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:Ne,checked:this.props.state.showUnalteredColumns,onClick:this.onInputClick})," ","Show unaltered columns")),r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:Re,checked:this.props.state.showWhitespaceBetweenColumns,onClick:this.onInputClick})," ","Show whitespace between columns")),r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:Le,checked:this.props.state.showClinicalTrackLegends,onClick:this.onInputClick})," ","Show legends for clinical tracks")))}},{key:"getViewMenuOncoprint",value:function(){return r.createElement(O,{bsStyle:"default",title:"View",id:"viewDropdownButton"},r.createElement("strong",null,"Data type:"),r.createElement("div",{className:"radio"},r.createElement("label",null,r.createElement("input",{type:"radio",name:"columnType",value:Me,checked:this.props.state.columnMode===V.b.SAMPLE,onClick:this.onInputClick})," ","Events per sample")),r.createElement("div",{className:"radio"},r.createElement("label",null,r.createElement("input",{type:"radio",name:"columnType",value:je,checked:this.props.state.columnMode===V.b.PATIENT,onClick:this.onInputClick})," ","Events per patient")),r.createElement("hr",null),r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:Ne,checked:this.props.state.showUnalteredColumns,onClick:this.onInputClick})," ","Show unaltered columns")),r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:Re,checked:this.props.state.showWhitespaceBetweenColumns,onClick:this.onInputClick})," ","Show whitespace between columns")),r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:Le,checked:this.props.state.showClinicalTrackLegends,onClick:this.onInputClick})," ","Show legends for clinical tracks")),r.createElement("div",{className:"checkbox",style:{marginLeft:20,maxWidth:220}},r.createElement("label",null,r.createElement("input",{"data-test":"onlyShowClinicalLegendsForAltered",type:"checkbox",value:Ge,checked:this.props.state.onlyShowClinicalLegendForAlteredCases,onClick:this.onInputClick,disabled:!this.props.state.showClinicalTrackLegends})," ","Only show clinical track legends for altered"," ",this.props.state.columnMode===V.b.PATIENT?"patients":"samples",".")),r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",value:Fe,checked:this.props.state.showOqlInLabels,onClick:this.onInputClick})," ","Show OQL filters")))}},{key:"getDownloadMenu",value:function(){return r.createElement(O,{bsStyle:"default",title:"Download",id:"downloadDropdownButton"},r.createElement("button",{className:"btn btn-sm btn-default",name:ot,onClick:this.onButtonClick},"PDF"),r.createElement("button",{className:"btn btn-sm btn-default",name:it,onClick:this.onButtonClick},"PNG"),r.createElement("button",{className:"btn btn-sm btn-default",name:at,onClick:this.onButtonClick},"SVG"),r.createElement("button",{className:"btn btn-sm btn-default",name:st,onClick:this.onButtonClick},this.props.state.columnMode&&this.props.state.columnMode[0].toUpperCase()+this.props.state.columnMode.slice(1)||"Sample"," ","order"),!this.props.oncoprinterMode&&r.createElement("button",{className:"btn btn-sm btn-default",name:lt,onClick:this.onButtonClick},"Tabular"),!this.props.oncoprinterMode&&r.createElement("button",{className:"btn btn-sm btn-default",name:ut,onClick:this.onButtonClick},"Open in Oncoprinter"))}},{key:"getHorzZoomControls",value:function(){return r.createElement("div",{className:"btn btn-default oncoprint__zoom-controls"},r.createElement(L.c,{overlay:r.createElement("span",null,"Zoom out of oncoprint."),placement:"top"},r.createElement("div",{onClick:this.onZoomOutClick},r.createElement("i",{className:"fa fa-search-minus"}))),r.createElement(L.c,{overlay:r.createElement("span",null,"Zoom in/out of oncoprint."),placement:"top"},r.createElement("div",{style:{width:"90px"}},r.createElement(F.a,{value:this.horzZoomSliderState,onChange:this.onHorzZoomSliderChange,onChangeComplete:this.onHorzZoomSliderSet,step:.01,max:1,min:0,tooltip:!1}))),r.createElement(L.e,{value:(100*this.horzZoomSliderState).toFixed(),setValue:this.onSetHorzZoomTextInput,maxChars:3,numericOnly:!0,textFieldAppearance:!0,style:{background:"white",minWidth:"30px",fontSize:"14px",fontFamily:"arial",border:"none",padding:0,marginTop:0,marginBottom:0,marginRight:2}}),r.createElement("div",null,"%"),r.createElement(L.c,{overlay:r.createElement("span",null,"Zoom in to oncoprint."),placement:"top"},r.createElement("div",{onClick:this.onZoomInClick},r.createElement("i",{className:"fa fa-search-plus"}))))}},{key:"getSortMenu",value:function(){return this.props.oncoprinterMode?this.getSortMenuOncoprinter():this.getSortMenuOncoprint()}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:"oncoprint__controls"},r.createElement(i.ButtonGroup,null,r.createElement(o.Observer,null,this.getClinicalTracksMenu),r.createElement(o.Observer,null,this.getHeatmapMenu),r.createElement(o.Observer,null,this.getSortMenu),r.createElement(o.Observer,null,this.getMutationColorMenu),r.createElement(o.Observer,null,this.getViewMenu),r.createElement(o.Observer,null,this.getDownloadMenu),r.createElement(o.Observer,null,this.getHorzZoomControls),this.minimapButton,r.createElement(D,{show:this.showConfirmNgchmModal,onHide:function(){return e.showConfirmNgchmModal=!1},openNgchmWindow:this.props.handlers.onClickNGCHM})))}},{key:"genericAssayEntitiesSelectOptionsInSelectedHeatmapProfile",get:function(){return this.props.state.selectedHeatmapProfileId&&this.isGenericAssayDataComplete&&this.props.genericAssayEntitiesSelectOptionsGroupByMolecularProfileIdPromise.result&&this.props.genericAssayEntitiesSelectOptionsGroupByMolecularProfileIdPromise.result[this.props.state.selectedHeatmapProfileId]?this.props.genericAssayEntitiesSelectOptionsGroupByMolecularProfileIdPromise.result[this.props.state.selectedHeatmapProfileId]:[]}},{key:"isGenericAssayDataComplete",get:function(){return N.a.every([this.props.genericAssayEntitiesSelectOptionsGroupByMolecularProfileIdPromise,this.props.genericAssayEntitiesSelectOptionsGroupByGenericAssayTypePromise,this.props.state.genericAssayEntitiesGroupByGenericAssayTypePromise],function(e){return e&&e.isComplete})}},{key:"heatmapProfileOptions",get:function(){return this.props.state.heatmapProfilesPromise&&this.props.state.heatmapProfilesPromise.result?N.a.map(this.props.state.heatmapProfilesPromise.result,function(e){return{label:e.name,value:e.molecularProfileId,type:e.molecularAlterationType}}):[]}},{key:"genericAssayEntitiesOptionsByValueMap",get:function(){return this.props.state.selectedHeatmapProfileGenericAssayType&&this.isGenericAssayDataComplete&&this.props.genericAssayEntitiesSelectOptionsGroupByGenericAssayTypePromise.result&&this.props.genericAssayEntitiesSelectOptionsGroupByGenericAssayTypePromise.result[this.props.state.selectedHeatmapProfileGenericAssayType]?N.a.keyBy(this.props.genericAssayEntitiesSelectOptionsGroupByGenericAssayTypePromise.result[this.props.state.selectedHeatmapProfileGenericAssayType],"id"):{}}},{key:"selectedGenericAssayEntities",get:function(){var e=this;return N.a.intersection(this._selectedGenericAssayEntityIds,N.a.keys(this.genericAssayEntitiesOptionsByValueMap)).map(function(t){return e.genericAssayEntitiesOptionsByValueMap[t]})}},{key:"selectedGenericAssaysJS",get:function(){return Object(u.toJS)(this.selectedGenericAssayEntities)}},{key:"textareaGenericAssayEntries",get:function(){return N.a.map(this.selectedGenericAssayEntities,function(e){return{value:e.id,label:e.id}})}},{key:"filteredGenericAssayOptions",get:function(){var e=this.props.state.selectedHeatmapProfileId&&this.isGenericAssayDataComplete&&this.props.genericAssayEntitiesSelectOptionsGroupByMolecularProfileIdPromise.result?this.props.genericAssayEntitiesSelectOptionsGroupByMolecularProfileIdPromise.result[this.props.state.selectedHeatmapProfileId]:[];if(this.genericAssayEntityFilter){var t=new RegExp(this.genericAssayEntityFilter,"i");return e.filter(function(e){return t.test(e.label)||t.test(e.value)})}return e}},{key:"addAllLabel",get:function(){return this.filteredGenericAssayOptions?"Select all (".concat(this.filteredGenericAssayOptions.length,")"):"Select all"}},{key:"driverAnnotationSection",get:function(){if(this.props.oncoprinterMode||!this.props.store)return r.createElement(r.Fragment,null,r.createElement("h5",null,"Annotate"),r.createElement("div",{style:{marginLeft:10}},r.createElement(fe.a,{state:this.props.state,handlers:Object.assign({onCustomDriverTierCheckboxClick:this.onCustomDriverTierCheckboxClick},this.props.handlers)})),r.createElement("h5",null,"Filter"),r.createElement("div",{style:{marginLeft:10}},r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{"data-test":"HideVUS",type:"checkbox",value:tt,checked:this.props.state.hidePutativePassengers,onClick:this.onInputClick,disabled:!this.props.state.distinguishDrivers})," ","Hide mutations and copy number alterations of unknown significance")),r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{"data-test":"HideGermline",type:"checkbox",value:nt,checked:this.props.state.hideGermlineMutations,onClick:this.onInputClick,disabled:!this.props.state.distinguishGermlineMutations})," ","Hide germline mutations"))));var e=this.props.store;return r.createElement(r.Fragment,null,r.createElement("h5",null,"Annotate and Filter"),r.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",marginLeft:10}},"Please see the",r.createElement("button",{style:{marginLeft:5,marginRight:5,marginBottom:0,width:"auto",padding:"1px 5px 1px 5px"},className:"btn btn-primary",onClick:function(){e.resultsPageSettingsVisible=!e.resultsPageSettingsVisible}},r.createElement("i",{className:"fa fa-sliders"})),"menu."))}},{key:"showMinimap",get:function(){return this.props.state.showMinimap}},{key:"minimapButton",get:function(){return r.createElement("div",{className:"btn-group"},r.createElement(L.c,{overlay:r.createElement("span",null,"Toggle minimap panel.")},r.createElement(i.Button,{active:this.showMinimap,onClick:this.toggleShowMinimap},r.createElement("img",{"data-test":"ShowMinimapButton",src:n(936),alt:"icon",style:{width:15,height:15}}))))}}])&&xe(a.prototype,s),c&&xe(a,c),t}();De([u.observable],dt.prototype,"horzZoomSliderState",void 0),De([u.observable],dt.prototype,"heatmapGenesReady",void 0),De([u.observable],dt.prototype,"_selectedGenericAssayEntityIds",void 0),De([u.observable],dt.prototype,"genericAssayEntityFilter",void 0),De([u.observable],dt.prototype,"showConfirmNgchmModal",void 0),De([u.computed],dt.prototype,"genericAssayEntitiesSelectOptionsInSelectedHeatmapProfile",null),De([u.computed],dt.prototype,"isGenericAssayDataComplete",null),De([q.default,u.action],dt.prototype,"onChangeHeatmapGeneInput",null),De([q.default],dt.prototype,"onChangeGenericAssayTextArea",null),De([q.default],dt.prototype,"onAddAllGenericAssayRemoved",null),De([u.computed],dt.prototype,"heatmapProfileOptions",null),De([u.computed],dt.prototype,"genericAssayEntitiesOptionsByValueMap",null),De([q.default,u.action],dt.prototype,"onSelectGenericAssayEntities",null),De([u.computed],dt.prototype,"selectedGenericAssayEntities",null),De([u.computed],dt.prototype,"selectedGenericAssaysJS",null),De([u.computed],dt.prototype,"textareaGenericAssayEntries",null),De([u.computed],dt.prototype,"filteredGenericAssayOptions",null),De([q.default,u.action],dt.prototype,"onInputChange",null),De([q.default],dt.prototype,"onAddAllGenericAssays",null),De([u.computed],dt.prototype,"addAllLabel",null),De([q.default],dt.prototype,"getSelectedClinicalAttributeIds",null),De([u.computed],dt.prototype,"driverAnnotationSection",null),De([u.computed],dt.prototype,"showMinimap",null),dt=De([o.observer],dt);t.a=dt},function(e,t,n){"use strict";var r=n(0),o=n(7),i=n(579),a=n(101),s=n(590),l=n(8),u=n(9),c=n.n(u),p=n(676),d=n.n(p),f=n(577),h=n(746),m=n(731),y=n(596),g=n(3),v=n(21),b=n(56),S=n(2);function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var x=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":P(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},T=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=E(this,O(t).apply(this,arguments))).hovered=!1,e.hoverTimeout=null,e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(t,r["Component"]),n=t,(o=[{key:"buttonRef",value:function(e){this.button=e}},{key:"onMouseClick",value:function(){this.hovered=!1}},{key:"onMouseEnter",value:function(){var e=this;this.hoverTimeout=setTimeout(function(){e.hovered=!0},g.m)}},{key:"onMouseLeave",value:function(){this.hovered=!1,clearTimeout(this.hoverTimeout),this.hoverTimeout=null}},{key:"onMouseDown",value:function(){this.hovered=!1}},{key:"render",value:function(){var e,t=this,n=this.props.group,o=this.props.isSelected(n.name),i=Object(f.w)([n]),a=Object(f.v)(i,this.props.sampleSet);return r.createElement("button",{ref:this.buttonRef,className:c()("btn btn-xs",(e={},_(e,d.a.buttonUnselected,!o),_(e,d.a.buttonExcludedFromAnalysis,this.props.excludedFromAnalysis),e)),onClick:this.onMouseClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseDown:this.onMouseDown,style:{backgroundColor:n.color},"data-test":"groupSelectorButton".concat(n.name)},r.createElement("span",{style:{display:"flex",alignItems:"center"}},r.createElement("div",{style:{display:"flex",alignItems:"center"},onClick:function(){return t.props.onClick(n.name)}},r.createElement("div",{className:"text-with-ellipsis",style:{display:"inline-block",color:Object(y.e)(n.color),maxWidth:200}},Object(y.h)(n)),"",r.createElement("span",{style:{color:Object(y.e)(n.color)}},"(",i.length===a.length?i.length:"".concat(i.length,"/").concat(a.length),")")),n.nonExistentSamples.length>0&&r.createElement(h.a,{style:{marginLeft:7},tooltip:r.createElement(f.e,{samples:n.nonExistentSamples})}),this.props.deletable&&r.createElement("div",{style:{paddingLeft:2,marginLeft:5,marginRight:-3,borderLeft:"1px dashed white",cursor:"pointer"},"data-test":"deleteButton",onClick:function(){return t.props.onClickDelete(n.name)}},r.createElement("i",{className:"fa fa-times-circle"}))),this.button&&v.createPortal(r.createElement(b.Overlay,{rootClose:!0,placement:"top",show:this.hovered,target:this.button},r.createElement(b.Popover,{arrowOffsetTop:17,className:c()("cbioportal-frontend","cbioTooltip")},r.createElement("div",null,Object(y.h)(n),"",Object(f.j)(i,a)),this.props.excludedFromAnalysis&&r.createElement("div",{style:{maxWidth:300,whiteSpace:"initial",marginTop:5}},"This group is a subset of the other selected groups, so it's excluded from analysis, and not considered in overlap calculations."))),document.body))}}])&&w(n.prototype,o),i&&w(n,i),t}();x([S.observable],T.prototype,"hovered",void 0),x([S.observable.ref],T.prototype,"button",void 0),x([l.default,S.action],T.prototype,"buttonRef",null),x([l.default,S.action],T.prototype,"onMouseClick",null),x([l.default,S.action],T.prototype,"onMouseEnter",null),x([l.default,S.action],T.prototype,"onMouseLeave",null),x([l.default,S.action],T.prototype,"onMouseDown",null),T=x([o.observer],T);var k=Object(m.SortableElement)(T);function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var N=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":j(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},R=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),I(this,D(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement("div",{className:d.a.groupButtons},r.createElement("div",null,this.props.buttons))}}])&&A(n.prototype,o),i&&A(n,i),t}();R=N([o.observer],R);var L=Object(m.SortableContainer)(R);function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t){return!t||"object"!==z(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var q=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":z(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},U=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),F(this,B(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement("div",{style:{display:"inline-flex",whiteSpace:"nowrap",paddingLeft:7,paddingRight:7}},r.createElement("a",{onClick:this.props.store.selectAllGroups},"Select all"),"|",r.createElement("a",{onClick:this.props.store.deselectAllGroups},"Deselect all"))}}])&&G(n.prototype,o),i&&G(n,i),t}();U=q([o.observer],U);var H=Object(m.SortableElement)(U),W=n(630);function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $(e,t){return!t||"object"!==X(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Z=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":X(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},J=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),$(this,Q(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement("button",{className:c()("btn btn-xs btn-default"),onClick:this.props.toggleCollapsedGroups,"data-test":"groupSelectorCollapseButton"},this.props.collapsed?"".concat(this.props.numCollapsedGroups," more groups ").concat(String.fromCharCode(9660)):"Show less ".concat(String.fromCharCode(9650)))}}])&&K(n.prototype,o),i&&K(n,i),t}();J=Z([o.observer],J);var ee=Object(m.SortableElement)(J);function te(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e,t){return!t||"object"!==ae(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ae(e){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var se=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ae(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},le=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=re(this,oe(t).apply(this,arguments))).collapsedGroupsShown=!1,e.dragging=!1,e.tabUI=Object(i.a)({await:function(){return[e.props.store._originalGroups,e.props.store.sampleSet,e.props.store.overlapComputations]},render:function(){var t=e.props.store._originalGroups.result.length;if(0===t)return null;var n,o=[];if(void 0===e.props.groupCollapseThreshold||t<=e.props.groupCollapseThreshold||e.collapsedGroupsShown?o=e.props.store._originalGroups.result.map(e.makeGroupButton):(n=o).push.apply(n,te(e.props.store._originalGroups.result.slice(0,e.props.groupCollapseThreshold-1).map(e.makeGroupButton))),void 0!==e.props.groupCollapseThreshold&&t>e.props.groupCollapseThreshold){var i=t-e.props.groupCollapseThreshold+1;o.push(r.createElement(ee,{numCollapsedGroups:i,toggleCollapsedGroups:e.toggleCollapsedGroups,collapsed:!e.collapsedGroupsShown,disabled:!0,index:o.length}))}return o.push(r.createElement(H,{store:e.props.store,disabled:!0,index:o.length})),r.createElement("div",{style:{display:"flex",alignItems:"center",position:"relative"}},r.createElement("strong",{style:{marginRight:5}},"Groups: "),r.createElement("span",{style:{fontSize:12,marginRight:3}},"(drag to reorder)"),r.createElement(L,{buttons:o,axis:"xy",onSortStart:e.onSortStart,onSortEnd:e.onSortEnd,distance:6}))},renderPending:function(){return r.createElement(a.a,{isLoading:!0,size:"big",center:!0})},renderError:function(){return r.createElement(s.a,null)}}),e}var n,o,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}(t,r["Component"]),n=t,(o=[{key:"toggleCollapsedGroups",value:function(){this.collapsedGroupsShown=!this.collapsedGroupsShown}},{key:"isSelected",value:function(e){return!!this.props.store.isGroupSelected(e)}},{key:"onClick",value:function(e){this.dragging||this.props.store.toggleGroupSelected(e)}},{key:"onClickDelete",value:function(e){this.dragging||this.props.store.deleteGroup(e)}},{key:"onSortEnd",value:function(e){e.oldIndex!==e.newIndex&&this.props.store.updateGroupOrder(e.oldIndex,e.newIndex),this.dragging=!1}},{key:"onSortStart",value:function(){this.dragging=!0}},{key:"makeGroupButton",value:function(e,t){var n=this.props.store.overlapStrategy===W.a.EXCLUDE&&e.uid in this.props.store.overlapComputations.result.excludedFromAnalysis;return r.createElement(k,{isSelected:this.isSelected,deletable:this.props.isGroupDeletable(e),onClick:this.onClick,onClickDelete:this.onClickDelete,sampleSet:this.props.store.sampleSet.result,group:e,index:t,excludedFromAnalysis:n})}},{key:"render",value:function(){return this.tabUI.component}}])&&ne(n.prototype,o),l&&ne(n,l),t}();se([S.observable],le.prototype,"collapsedGroupsShown",void 0),se([l.default,S.action],le.prototype,"toggleCollapsedGroups",null),se([l.default],le.prototype,"isSelected",null),se([l.default],le.prototype,"onClick",null),se([l.default],le.prototype,"onClickDelete",null),se([l.default],le.prototype,"onSortEnd",null),se([l.default],le.prototype,"onSortStart",null),se([l.default],le.prototype,"makeGroupButton",null),le=se([o.observer],le);t.a=le},function(e,t,n){"use strict";var r=n(0),o=n(7),i=n(581),a=n(576),s=n(2),l=n(8),u=n(652),c=n(4),p=n.n(c),d=n(649),f=n(129),h=n.n(f),m=n(21),y=n(56),g=n(9),v=n.n(g),b=n(644),S=n.n(b),_=n(3),w=n(596),E=n(982);function O(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function C(e){return e.xLength*e.yLength}function P(){for(var e=arguments.length<=0?void 0:arguments[0],t=1;t<arguments.length;t++){var n=t<0||arguments.length<=t?void 0:arguments[t],r=Math.max(e.x,n.x),o=Math.min(e.x+e.xLength,n.x+n.xLength),i=Math.max(e.y,n.y),a=Math.min(e.y+e.yLength,n.y+n.yLength);if(r>=o||i>=a)return{x:0,y:0,xLength:0,yLength:0};e={x:r,y:i,xLength:o-r,yLength:a-i}}return e}function x(e,t){var n=[e],r=!0,o=!1,i=void 0;try{for(var a,s=function(){var e=a.value;n=p.a.flatMap(n,function(t){return function(e,t){if(0===C(P(e,t)))return[e];var n=A([e,t]),r=[{x:n.xRange.min,y:t.y+t.yLength,xLength:n.xLength,yLength:n.yRange.max-(t.y+t.yLength)},{x:n.xRange.min,y:t.y,xLength:t.x-n.xRange.min,yLength:t.yLength},{x:n.xRange.min,y:n.yRange.min,xLength:n.xLength,yLength:t.y-n.yRange.min},{x:t.x+t.xLength,y:t.y,xLength:n.xRange.max-(t.x+t.xLength),yLength:t.yLength}].map(function(t){return P(t,e)});return r=r.filter(function(e){return C(e)>0})}(t,e)})},l=t[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)s()}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}function T(e){return p.a.sumBy(e,C)}function k(e,t){return x(P.apply(void 0,O(e.map(function(e){return t[e]}))),p.a.difference(Object.keys(t),e).map(function(e){return t[e]}))}function A(e){var t={xRange:{min:Math.min.apply(Math,O(e.map(function(e){return e.x}))),max:Math.max.apply(Math,O(e.map(function(e){return e.x+e.xLength})))},yRange:{min:Math.min.apply(Math,O(e.map(function(e){return e.y}))),max:Math.max.apply(Math,O(e.map(function(e){return e.y+e.yLength})))},xLength:0,yLength:0};return t.xLength=t.xRange.max-t.xRange.min,t.yLength=t.yRange.max-t.yRange.min,t}function I(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function D(e){var t=function(e){var t=[],n=p.a.values(e),r=!0,o=!1,i=void 0;try{for(var a,s=function(){for(var e=a.value,n=!1,r=0,o=t;r<o.length;r++){var i=o[r];p.a.some(i.rectangles,function(t){return C(P(e,t))>0})&&(i.rectangles.push(e),n=!0)}n||t.push({rectangles:[e]})},l=n[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)s()}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return t}(e);if(t.length>1){var n=(t=p.a.sortBy(t,function(e){return-C(A(e.rectangles))})).map(function(e){return A(e.rectangles)}),r=Math.max.apply(Math,I(n.map(function(e){return e.xRange.max-e.xRange.min})))/10,o=Math.max.apply(Math,I(n.map(function(e){return e.yRange.max-e.yRange.min})))/10,i=[];switch(n.length){case 2:i=[{x:0,y:0},{x:n[0].xLength+r,y:0}];break;case 3:i=[{x:0,y:0},{x:Math.max(n[0].xLength,n[2].xLength)+r,y:0},{x:0,y:Math.max(n[0].yLength,n[1].yLength)+o}]}for(var a=0;a<i.length;a++){var s=i[a].x-n[a].xRange.min,l=i[a].y-n[a].yRange.min,u=!0,c=!1,d=void 0;try{for(var f,h=t[a].rectangles[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var m=f.value;m.x+=s,m.y+=l}}catch(e){c=!0,d=e}finally{try{u||null==h.return||h.return()}finally{if(c)throw d}}}}}function M(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var j=n(983);function N(e,t){var n=k(e,t),r=p.a.sortBy(n,function(e){return-C(e)})[0];return{x:r.x+r.xLength/2,y:r.y+r.yLength/2}}function R(e,t,n){var r,o,i,a,s=0,l=0,u=!0,c=!1,p=void 0;try{for(var d,f=t[Symbol.iterator]();!(u=(d=f.next()).done);u=!0){var h=d.value,m=T(k(h.sets,e)),y=m-h.size;s+=y*y,2===h.sets.length&&0===m&&h.size>0&&(l+=(r=e[h.sets[0]],o=e[h.sets[1]],i=void 0,a=void 0,i=r.x-o.x,a=r.y-o.y,Math.sqrt(i*i+a*a)))}}catch(e){c=!0,p=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw p}}var g=!0,v=!1,b=void 0;try{for(var S,_=n[Symbol.iterator]();!(g=(S=_.next()).done);g=!0){var w=S.value,E=C(e[w.uid])-w.size;s+=E*E}}catch(e){v=!0,b=e}finally{try{g||null==_.return||_.return()}finally{if(v)throw b}}return{areaError:s,otherPenalties:l}}function L(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t){return!t||"object"!==z(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var q=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":z(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};function U(e){e.target.setAttribute("fill",e.target.getAttribute("data-hover-fill"))}function H(e){e.target.setAttribute("fill",e.target.getAttribute("data-default-fill"))}var W=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=F(this,B(t).apply(this,arguments))).svg=null,e.tooltipModel=null,e.mousePosition={x:0,y:0},e.regionClickHandlers=Object(d.a)(function(t,n){e.props.onChangeSelectedRegions(Object(w.i)(n.combination,e.props.selection.regions))}),e.regionHoverHandlers=Object(d.a)(function(t,n){n.sizeOfRegion>0&&(e.tooltipModel=n,e.mousePosition.x=t.pageX,e.mousePosition.y=t.pageY)}),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(t,r["Component"]),n=t,(o=[{key:"svgRef",value:function(e){this.svg=e}},{key:"resetSelection",value:function(){this.props.onChangeSelectedRegions([])}},{key:"resetTooltip",value:function(){this.tooltipModel=null}},{key:"render",value:function(){return r.createElement("g",{transform:"translate(".concat(this.props.x,",").concat(this.props.y,")"),onMouseOut:this.resetTooltip},r.createElement("rect",{x:"0",y:"0",fill:"white",fillOpacity:0,width:this.props.width,height:this.props.height,onMouseMove:this.resetTooltip,onClick:this.resetSelection}),this.svgElements,!!this.tooltipModel&&m.createPortal(r.createElement(y.Popover,{arrowOffsetTop:17,className:v()("cbioportal-frontend","cbioTooltip",S.a.Tooltip),positionLeft:this.mousePosition.x+15,positionTop:this.mousePosition.y-17},this.tooltipContent),document.body))}},{key:"layoutParams",get:function(){var e,t=this;switch(this.props.groups.length){case 2:e=[[0],[1],[0,1]];break;case 3:default:e=[[0],[1],[2],[0,1],[0,2],[1,2],[0,1,2]]}var n=e.map(function(e){var n=p.a.intersection.apply(p.a,L(e.map(function(e){return t.props.groups[e].cases}))),r=n.length,o=!0,i=!1,a=void 0;try{for(var s,l=Object(w.b)(e,t.props.groups.length)[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var u=s.value;p.a.pullAll(n,t.props.groups[u].cases)}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}return{combination:e,sizeOfIntersectionOfSets:r,sizeOfRegion:n.length,color:Object(w.a)(e.map(function(e){return t.props.uidToGroup[t.props.groups[e].uid].color})),labelPosition:null}}),r=n.map(function(e){return{sets:e.combination.map(function(e){return t.props.groups[e].uid}),size:e.sizeOfRegion,sizeOfIntersectionOfSets:e.sizeOfIntersectionOfSets}}),o=this.props.groups.map(function(e){return{size:e.cases.length,uid:e.uid,color:t.props.uidToGroup[e.uid].color,disjoint:(n=r.find(function(t){return 1===t.sets.length&&t.sets[0]===e.uid}),n.size===n.sizeOfIntersectionOfSets)};var n}),i=function(e,t){var n=Math.max.apply(Math,I(t.map(function(e){return e.size})))/30;t=p.a.cloneDeep(t),e=p.a.cloneDeep(e);var r=p.a.keyBy(t,function(e){return e.uid}),o=!0,i=!1,a=void 0;try{for(var s,l=e[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var u=s.value;if(u.size>0&&u.size<n){var c=n-u.size;u.size+=c,u.sizeOfIntersectionOfSets+=c;var d=!0,f=!1,h=void 0;try{for(var m,y=u.sets[Symbol.iterator]();!(d=(m=y.next()).done);d=!0)r[m.value].size+=c}catch(e){f=!0,h=e}finally{try{d||null==y.return||y.return()}finally{if(f)throw h}}}}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}return{regions:e,sets:t}}(r,o),a=function(e,t,n){n=n||{};var r,o=j.bestInitialLayout(e.map(function(e){return{sets:e.sets,size:e.sizeOfIntersectionOfSets}}),n),i=p.a.mapValues(o,function(e){return{x:e.x-e.radius,y:e.y-e.radius,xLength:2*e.radius,yLength:2*e.radius}}),a=function(e,t,n){var r,o,i=t[6*e],a=t[6*e+1],s=Math.abs(t[6*e+2]),l=s+Math.abs(t[6*e+3]);return n?(r=s,o=l):o=(r=Math.abs(t[6*e+4]))+Math.abs(t[6*e+5]),{x:i-s,y:a-r,xLength:l,yLength:o}},s=[],l=!0,u=!1,c=void 0;try{for(var d,f=t[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var h=d.value;s.push.apply(s,M([(r=i[h.uid]).x+r.xLength/2,r.y+r.yLength/2,r.xLength/2,r.xLength/2,r.yLength/2,r.yLength/2]))}}catch(e){u=!0,c=e}finally{try{l||null==f.return||f.return()}finally{if(u)throw c}}for(var m={},y=Object(E.nelderMead)(function(n){for(var r={},o=0;o<t.length;o++)r[t[o].uid]=a(o,n,t[o].disjoint);var i=R(r,e,t);return i.areaError+i.otherPenalties},s,n).x,g=0;g<t.length;g++)m[t[g].uid]=a(g,y,t[g].disjoint);return D(m),{rectangles:m,finalErrorValue:R(m,e,t).areaError}}(i.regions,i.sets,{maxIterations:1e4}),s=function(e,t,n,r){var o=p.a.values(e),i=Object.keys(e);t-=2*r,n-=2*r;var a=A(o),s=a.xRange,l=a.yRange;if(s.max==s.min||l.max==l.min)return console.log("not scaling layout: zero size detected"),e;for(var u=t/(s.max-s.min),c=n/(l.max-l.min),d=Math.min(c,u),f=(t-(s.max-s.min)*d)/2,h=(n-(l.max-l.min)*d)/2,m={},y=0;y<o.length;++y){var g=o[y];m[i[y]]={xLength:d*g.xLength,yLength:d*g.yLength,x:r+f+(g.x-s.min)*d,y:r+h+(g.y-l.min)*d}}return m}(a.rectangles,this.props.width,this.props.height,20),l=!0,u=!1,c=void 0;try{for(var d,f=n[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var h=d.value;h.sizeOfRegion>0&&(h.labelPosition=N(h.combination.map(function(e){return t.props.groups[e].uid}),s))}}catch(e){u=!0,c=e}finally{try{l||null==f.return||f.return()}finally{if(u)throw c}}return a.finalErrorValue>=1&&setTimeout(this.props.onLayoutFailure,0),{rectangles:s,regions:n,sets:o}}},{key:"svgElements",get:function(){var e=this,t=this.layoutParams.rectangles,n=this.props.groups.map(function(n,o){return r.createElement("clipPath",{id:"".concat(e.props.uid,"_circle_").concat(o)},r.createElement("rect",{x:t[n.uid].x,y:t[n.uid].y,width:t[n.uid].xLength,height:t[n.uid].yLength,rx:8}))}),o=p.a.flattenDeep(this.layoutParams.regions.map(function(t){var n=t.combination,o=r.createElement("g",null,r.createElement("rect",{x:"0",y:"0",height:e.props.height,width:e.props.width,fill:t.color,style:{cursor:t.sizeOfRegion>0?"pointer":"default"},"data-default-fill":t.color,"data-hover-fill":u.hsl(t.color).brighter(1).rgb(),onMouseOver:t.sizeOfRegion>0?U:void 0,onMouseOut:t.sizeOfRegion>0?H:void 0,onMouseMove:e.regionHoverHandlers({combination:n,sizeOfRegion:t.sizeOfRegion}),onClick:t.sizeOfRegion>0?e.regionClickHandlers({combination:n}):void 0,"data-test":"".concat(e.props.caseType).concat(t.combination.join(","),"VennRegion")})),i=!0,a=!1,s=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var p=l.value;o=r.createElement("g",{clipPath:"url(#".concat(e.props.uid,"_circle_").concat(p,")")},o)}}catch(e){a=!0,s=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw s}}return[o]})),i=p.a.sortBy(this.layoutParams.sets,function(e){return-e.size}).map(function(e){var n=e.uid;return r.createElement("rect",{x:t[n].x,y:t[n].y,width:t[n].xLength,height:t[n].yLength,fill:"none",stroke:e.color,strokeWidth:2,rx:8})}),a=p.a.flattenDeep(this.layoutParams.regions.map(function(t){if(0===t.sizeOfRegion||!t.labelPosition)return[];var n=Object(w.g)(t.combination,e.props.selection.regions),o="".concat(t.sizeOfRegion.toString()).concat(n?" "+String.fromCharCode(10004):""),i=h()({text:o,fontFamily:"Arial",fontSize:"13px",lineHeight:1}),a=t.labelPosition,s=null;return n&&(s=r.createElement("rect",{x:a.x-i.width.value/2-4,y:a.y-i.height.value+3,width:i.width.value+8,height:i.height.value+4,fill:"yellow",rx:3,ry:3,pointerEvents:"none"})),[s,r.createElement("text",{x:a.x,y:a.y,style:{userSelect:"none",color:n?"black":Object(w.e)(t.color)},fontWeight:t.sizeOfRegion>0?"bold":"normal",pointerEvents:"none",textAnchor:"middle",alignmentBaseline:"middle","data-test":"".concat(e.props.caseType).concat(t.combination.join(","),"VennLabel")},o)]}));return r.createElement(r.Fragment,null,n,o,i,a)}},{key:"tooltipContent",get:function(){var e=this;if(!this.tooltipModel)return null;var t=this.tooltipModel.combination.map(function(t){return e.props.groups[t].uid}).map(function(t){return e.props.uidToGroup[t]});return r.createElement("div",{style:{width:300,whiteSpace:"normal"}},r.createElement("strong",null,this.tooltipModel.sizeOfRegion," ",Object(_.R)(this.props.caseType,this.tooltipModel.sizeOfRegion)),r.createElement("br",null),"in only ",Object(w.f)(t,"and"),".")}}])&&G(n.prototype,o),i&&G(n,i),t}();q([s.observable.ref],W.prototype,"svg",void 0),q([s.observable.ref],W.prototype,"tooltipModel",void 0),q([s.observable],W.prototype,"mousePosition",void 0),q([l.default],W.prototype,"svgRef",null),q([s.computed],W.prototype,"layoutParams",null),q([s.computed],W.prototype,"svgElements",null),q([l.default],W.prototype,"resetSelection",null),q([l.default],W.prototype,"resetTooltip",null),q([s.computed],W.prototype,"tooltipContent",null);var K=W=q([o.observer],W),$=n(840),Q=n(842);function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function X(e,t){return!t||"object"!==ee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var te=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ee(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ne=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=X(this,Z(t).apply(this,arguments))).sampleSelection={regions:[]},e.patientSelection={regions:[]},e}var n,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(t,r["Component"]),n=t,(o=[{key:"submitSampleOverlapGroup",value:function(e,t){this.props.store.addGroup(e,t),this.sampleSelection.regions=[]}},{key:"submitPatientOverlapGroup",value:function(e,t){this.props.store.addGroup(e,t),this.patientSelection.regions=[]}},{key:"changeSelectedSampleRegions",value:function(e){this.sampleSelection.regions=e}},{key:"changeSelectedPatientRegions",value:function(e){this.patientSelection.regions=e}},{key:"render",value:function(){return r.createElement("div",{style:{position:"relative",paddingBottom:"".concat(Math.max(this.sampleSelection.regions.length,this.patientSelection.regions.length)+1,"em")}},r.createElement("svg",{id:this.props.svgId||"",xmlns:"http://www.w3.org/2000/svg",width:this.chartWidth,height:this.chartHeight,role:"img",viewBox:"0 0 ".concat(this.chartWidth," ").concat(this.chartHeight)},r.createElement(i.VictoryLabel,{style:{fontWeight:"bold",fontFamily:"Verdana,Arial,sans-serif",textAnchor:"middle",userSelect:"none"},x:200,y:"1.2em",text:"Samples overlap"}),r.createElement(K,{uid:"samples",x:0,y:15,groups:this.props.sampleGroups,uidToGroup:this.props.uidToGroup,width:400,height:400,selection:this.sampleSelection,onChangeSelectedRegions:this.changeSelectedSampleRegions,caseType:"sample",onLayoutFailure:this.props.onLayoutFailure}),r.createElement(i.VictoryLabel,{style:{fontWeight:"bold",fontFamily:"Verdana,Arial,sans-serif",textAnchor:"middle",userSelect:"none"},x:200,dx:410,y:"1.2em",text:"Patients overlap"}),r.createElement(K,{uid:"patients",x:410,y:15,groups:this.props.patientGroups,uidToGroup:this.props.uidToGroup,width:400,height:400,selection:this.patientSelection,onChangeSelectedRegions:this.changeSelectedPatientRegions,caseType:"patient",onLayoutFailure:this.props.onLayoutFailure}),this.legendData.length>0&&r.createElement(i.VictoryLegend,{x:this.vennPlotAreaWidth+20,y:100,theme:a.d,labelComponent:r.createElement(Q.a,{maxLabelWidth:100,uidToGroup:this.props.uidToGroup,dy:"0.4em"}),standalone:!1,data:this.legendData})),[r.createElement($.a,{store:this.props.store,includedRegions:this.sampleSelectedRegionsUids,style:{position:"absolute",left:0,top:420},submitGroup:this.submitSampleOverlapGroup,allGroupsInPlot:this.sampleGroupUids,caseType:"sample",width:400}),r.createElement($.a,{store:this.props.store,includedRegions:this.patientSelectedRegionsUids,style:{position:"absolute",left:410,top:420},submitGroup:this.submitPatientOverlapGroup,allGroupsInPlot:this.patientGroupUids,caseType:"patient",width:400})])}},{key:"chartWidth",get:function(){return this.vennPlotAreaWidth+20+180}},{key:"chartHeight",get:function(){return 500}},{key:"sampleGroupUids",get:function(){return this.props.sampleGroups.map(function(e){return e.uid})}},{key:"patientGroupUids",get:function(){return this.props.patientGroups.map(function(e){return e.uid})}},{key:"legendData",get:function(){var e=this;return this.props.sampleGroups.map(function(t){return{name:t.uid,symbol:{fill:e.props.uidToGroup[t.uid].color,strokeOpacity:0,type:"square",size:6}}})}},{key:"vennPlotAreaWidth",get:function(){return 810}},{key:"sampleSelectedRegionsUids",get:function(){var e=this;return this.sampleSelection.regions.map(function(t){return t.map(function(t){return e.props.sampleGroups[t].uid})})}},{key:"patientSelectedRegionsUids",get:function(){var e=this;return this.patientSelection.regions.map(function(t){return t.map(function(t){return e.props.patientGroups[t].uid})})}}])&&Y(n.prototype,o),s&&Y(n,s),t}();te([s.observable.shallow],ne.prototype,"sampleSelection",void 0),te([s.observable.shallow],ne.prototype,"patientSelection",void 0),te([s.computed],ne.prototype,"chartWidth",null),te([s.computed],ne.prototype,"chartHeight",null),te([l.default,s.action],ne.prototype,"submitSampleOverlapGroup",null),te([l.default,s.action],ne.prototype,"submitPatientOverlapGroup",null),te([l.default,s.action],ne.prototype,"changeSelectedSampleRegions",null),te([l.default,s.action],ne.prototype,"changeSelectedPatientRegions",null),te([s.computed],ne.prototype,"sampleGroupUids",null),te([s.computed],ne.prototype,"patientGroupUids",null),te([s.computed],ne.prototype,"legendData",null),te([s.computed],ne.prototype,"vennPlotAreaWidth",null),te([s.computed],ne.prototype,"sampleSelectedRegionsUids",null),te([s.computed],ne.prototype,"patientSelectedRegionsUids",null),ne=te([o.observer],ne);t.a=ne},function(e,t,n){"use strict";var r=n(0),o=n(7),i=n(581),a=n(2),s=n(4),l=n(576),u=n(8),c=n(3),p=n(607),d=n(596);function f(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return{x:e>0?[n(0),r?n(Math.max(1,e-1)):e]:[0,0],y:t>0?[n(0),o?n(Math.max(1,t-1)):t]:[0,0]}}var h=n(21),m=n(56),y=n(9),g=n.n(y),v=n(644),b=n.n(v),S=n(584),_=n(797),w=n(689);function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var k=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":T(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},A=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},I=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=C(this,P(t).apply(this,arguments))).textElt=null,e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(t,r["Component"]),n=t,(o=[{key:"ref",value:function(e){this.textElt=e}},{key:"render",value:function(){var e=this.props,t=(e.categoryCoordToGroup,e.dx),n=e.dy,o=e.maxLabelWidth,i=(e.datum,e.text,A(e,["categoryCoordToGroup","dx","dy","maxLabelWidth","datum","text"]));return r.createElement(r.Fragment,null,this.colorRectangle,r.createElement(w.a,E({text:this.group.name,textRef:this.ref,prefixTspans:this.group.ordinal.length>0?[r.createElement("tspan",null,"("),r.createElement("tspan",{fontWeight:"bold"},this.group.ordinal),r.createElement("tspan",null,")")]:void 0,datum:this.group,tooltip:function(e){return r.createElement("div",null,Object(d.h)(e))},maxWidth:o,dy:n,dx:t},i)))}},{key:"group",get:function(){return this.props.categoryCoordToGroup(this.props.text)}},{key:"colorRectangle",get:function(){if(this.textElt){var e=this.textElt.getBBox();return r.createElement("rect",{x:e.x-10-5,y:e.y+(e.height-10)/2,fill:this.group.color,width:10,height:10})}return null}}])&&O(n.prototype,o),i&&O(n,i),t}();k([a.observable.ref],I.prototype,"textElt",void 0),k([a.computed],I.prototype,"group",null),k([u.default,a.action],I.prototype,"ref",null),k([a.computed],I.prototype,"colorRectangle",null);var D=I=k([o.observer],I);function M(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t){return!t||"object"!==F(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(){return(G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var B=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":F(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},V=function(e){return r.createElement(i.Bar,G({className:"".concat(e.caseType,"_").concat(s.sortBy(e.datum.groups).map(function(e){return e.replace(/ /g,"_")}).join("_"),"_bar")},e))},z=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=N(this,R(t).apply(this,arguments))).tooltipModel=null,e.mouseEvents=e.makeMouseEvents(),e.mousePosition={x:0,y:0},e}var n,a,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(t,r["Component"]),n=t,(a=[{key:"containerRef",value:function(e){this.container=e}},{key:"makeMouseEvents",value:function(){var e=this;return[{target:"data",eventHandlers:{onMouseOver:function(){return[{target:"data",mutation:function(t){return t.datum&&t.datum.dontShowTooltip||(e.tooltipModel=t),null}}]},onMouseOut:function(){return[{target:"data",mutation:function(){return e.tooltipModel=null,null}}]},onClick:function(){return[{target:"data",mutation:function(t){var n;return n=t.datum?t.datum.groups:t.data[0].groups,t.datum&&t.datum.notClickable||e.props.onChangeSelectedCombinations(Object(d.i)(n,e.props.selectedCombinations)),null}}]}}}]}},{key:"resetSelection",value:function(){this.props.onChangeSelectedCombinations([])}},{key:"barSeparation",value:function(){return.2*this.barWidth()}},{key:"barWidth",value:function(){return 10}},{key:"barChartHeight",value:function(){return 250}},{key:"domainPadding",value:function(){return 20}},{key:"categoryAxisDomainPadding",value:function(){return this.domainPadding()}},{key:"countAxisDomainPadding",value:function(){return this.domainPadding()}},{key:"chartDomainPadding",value:function(){return{y:this.countAxisDomainPadding(),x:this.categoryAxisDomainPadding()}}},{key:"categoryCoord",value:function(e){return e*(this.barWidth()+this.barSeparation())}},{key:"categoryCoordToGroup",value:function(e){var t=Math.round(Object(_.a)(this.categoryCoord,e,[0,this.usedGroups.length]));return this.usedGroups[t]}},{key:"formatNumericalTick",value:function(e,t,n){return Object(p.a)(e,n)}},{key:"groupTick",value:function(e,t){return this.groupLabels[t]}},{key:"tooltipFunction",value:function(e){var t=this,n=s.map(e.groups,function(e){return t.props.uidToGroup[e]}),o=e.cases.length;return r.createElement("div",{style:{width:300,whiteSpace:"normal"}},r.createElement("strong",null,o," ",Object(c.R)(this.props.caseType,o)),r.createElement("br",null),"in only ",Object(d.f)(n,"and"),".")}},{key:"onMouseMove",value:function(e){this.mousePosition.x=e.pageX,this.mousePosition.y=e.pageY}},{key:"lineStroke",value:function(e){return 0===e.length?"black":Object(d.g)(e[0].groups,this.props.selectedCombinations)?"yellow":"black"}},{key:"fill",value:function(e){return Object(d.g)(e.groups,this.props.selectedCombinations)&&!e.notClickable?"yellow":e.fill||"black"}},{key:"getChart",value:function(){return this.groupCombinationSets.length>0?r.createElement("div",{ref:this.containerRef,style:{width:this.svgWidth,height:this.svgHeight}},r.createElement("svg",{id:this.props.svgId||"",style:{width:this.svgWidth,height:this.svgHeight,pointerEvents:"all"},height:this.svgHeight,width:this.svgWidth,role:"img",viewBox:"0 0 ".concat(this.svgWidth," ").concat(this.svgHeight),onMouseMove:this.onMouseMove},r.createElement("g",null,this.title),r.createElement("g",{transform:"translate(".concat(this.leftPadding,", ").concat(this.topPadding,")")},r.createElement(i.VictoryChart,{theme:l.d,width:this.chartWidth,height:this.barChartHeight(),standalone:!1,domainPadding:this.chartDomainPadding(),domain:this.barPlotDomain,singleQuadrantDomainPadding:{y:!0,x:!1}},r.createElement(i.VictoryAxis,{orientation:"bottom",offsetY:50,crossAxis:!1,tickValues:this.categoryTickValues,style:{ticks:{size:0},tickLabels:{fontSize:0},grid:{stroke:0}}}),r.createElement(i.VictoryAxis,{orientation:"left",offsetX:50,dependentAxis:!0,label:"Overlap count",tickFormat:this.formatNumericalTick,style:{grid:{stroke:0}},axisLabelComponent:r.createElement(i.VictoryLabel,{dy:-40})}),r.createElement(i.VictoryBar,{style:{data:{fill:this.fill,width:this.barWidth()}},data:this.barPlotData}),r.createElement(i.VictoryBar,{style:{data:{fillOpacity:0,width:this.barWidth(),cursor:"pointer"}},data:this.barPlotHitzoneData,events:this.mouseEvents,dataComponent:r.createElement(V,{caseType:this.props.caseType})}))),r.createElement("g",{transform:"translate(".concat(this.leftPadding,", ").concat(this.scatterPlotTopPadding,")")},r.createElement(i.VictoryChart,{theme:l.d,width:this.chartWidth,height:this.scatterChartHeight,standalone:!1,domainPadding:this.chartDomainPadding(),domain:this.scatterPlotDomain,singleQuadrantDomainPadding:{y:!0,x:!1}},r.createElement(i.VictoryAxis,{orientation:"bottom",offsetY:50,crossAxis:!1,tickValues:this.categoryTickValues,style:{axis:{strokeWidth:0},ticks:{size:0,strokeWidth:0},tickLabels:{fill:"none"},grid:{stroke:0}}}),r.createElement(i.VictoryAxis,{orientation:"left",offsetX:50,dependentAxis:!0,crossAxis:!1,tickLabelComponent:r.createElement(D,{categoryCoordToGroup:this.categoryCoordToGroup,maxLabelWidth:200,dy:"0.4em"}),tickValues:this.groupTickValues,style:{axis:{strokeWidth:0},ticks:{size:0,strokeWidth:0},grid:{stroke:0}}}),r.createElement(i.VictoryScatter,{size:this.barWidth()/2,style:{data:{fill:this.fill,cursor:function(e){return e.cursor}}},data:this.scatterData,events:this.mouseEvents}),this.getGroupIntersectionLines)))):r.createElement("span",null,"No data to plot.")}},{key:"render",value:function(){return r.createElement("div",null,r.createElement(o.Observer,null,this.getChart),this.tooltipComponent)}},{key:"usedGroups",get:function(){var e=s.chain(this.groupCombinationSets).flatMap(function(e){return e.groups}).keyBy().value();return s.chain(this.props.uidToGroup).reduce(function(t,n,r){return r in e&&t.push(n),t},[]).orderBy(function(e){return e.nameWithOrdinal},"desc").value()}},{key:"groupLabels",get:function(){return s.map(this.usedGroups,function(e){return Object(c.cb)(e.nameWithOrdinal,100,"Arial","13px")})}},{key:"chartWidth",get:function(){return this.barChartExtent}},{key:"scatterChartHeight",get:function(){return this.scatterChartExtent}},{key:"title",get:function(){return this.props.title?r.createElement(i.VictoryLabel,{style:{fontWeight:"bold",fontFamily:"Verdana,Arial,sans-serif",textAnchor:"middle"},x:this.svgWidth/2,y:"1.2em",text:this.props.title}):null}},{key:"scatterChartExtent",get:function(){return this.usedGroups.length>0?this.categoryCoord(this.usedGroups.length-1)+2*this.categoryAxisDomainPadding()+100:100}},{key:"barChartExtent",get:function(){return this.groupCombinationSets.length>0?this.categoryCoord(this.groupCombinationSets.length-1)+2*this.categoryAxisDomainPadding()+100:100}},{key:"biggestCategoryLabelSize",get:function(){var e=Math.max.apply(Math,M(s.map(this.usedGroups,function(e){return Object(c.L)(e.nameWithOrdinal,l.b.fontFamily,l.b.fontSize+"px")})));return Math.min(e,200)}},{key:"svgWidth",get:function(){return Math.max(this.leftPadding+this.chartWidth+this.rightPadding,320)}},{key:"svgHeight",get:function(){return this.topPadding+this.barChartHeight()+this.scatterChartHeight+this.bottomPadding-100}},{key:"leftPadding",get:function(){return this.biggestCategoryLabelSize}},{key:"rightPadding",get:function(){return 50}},{key:"topPadding",get:function(){return 0}},{key:"bottomPadding",get:function(){return 10}},{key:"groupCombinationSets",get:function(){return s.orderBy(this.props.groups.map(function(e){return{groups:Object.keys(e.key).filter(function(t){return e.key[t]}),cases:e.value}}),function(e){return e.cases.length},"desc")}},{key:"scatterData",get:function(){var e=this;return s.flatMap(this.groupCombinationSets,function(t,n){return s.map(e.usedGroups,function(r,o){var i=s.includes(t.groups,r.uid);return Object.assign({x:e.categoryCoord(n),y:e.categoryCoord(o),fill:i?"#000000":"#efefef",dontShowTooltip:!i,cursor:i?"pointer":"default",notClickable:!i},t)})})}},{key:"barPlotData",get:function(){var e=this;return s.map(this.groupCombinationSets,function(t,n){return Object.assign({x:e.categoryCoord(n),y:t.cases.length},t)})}},{key:"barPlotHitzoneData",get:function(){var e=this.barPlotDomain.y[1]/15;return this.barPlotData.map(function(t){return Object.assign({},t,{y:Math.max(t.y,e)})})}},{key:"getGroupIntersectionLines",get:function(){var e=this,t=s.map(this.usedGroups,function(e){return e.uid});return s.flatMap(this.groupCombinationSets,function(n,o){var a=s.map(n.groups,function(r){var i=s.indexOf(t,r);return Object.assign({x:e.categoryCoord(o),y:e.categoryCoord(i)},n)});return[r.createElement(i.VictoryLine,{style:{data:{stroke:e.lineStroke,strokeWidth:2,strokeLinecap:"round"}},data:a}),r.createElement(i.VictoryLine,{style:{data:{strokeOpacity:0,strokeWidth:e.barWidth(),strokeLinecap:"round",cursor:"pointer"}},data:a,events:e.mouseEvents})]})}},{key:"barPlotDomain",get:function(){var e=s.max(s.map(this.groupCombinationSets,function(e){return e.cases.length}))||0;return f(this.groupCombinationSets.length,e,this.categoryCoord,!0,!1)}},{key:"scatterPlotDomain",get:function(){return f(this.groupCombinationSets.length,s.keys(this.groupLabels).length,this.categoryCoord)}},{key:"categoryTickValues",get:function(){var e=this;return this.groupCombinationSets.map(function(t,n){return e.categoryCoord(n)})}},{key:"groupTickValues",get:function(){var e=this;return s.map(this.groupLabels,function(t,n){return e.categoryCoord(n)})}},{key:"scatterPlotTopPadding",get:function(){return this.barChartHeight()-100}},{key:"tooltipComponent",get:function(){if(this.tooltipModel){var e=this.mousePosition.x>S.a.size.width-400?"left":"right";return h.createPortal(r.createElement(m.Popover,{arrowOffsetTop:17,className:g()("cbioportal-frontend","cbioTooltip",b.a.Tooltip),positionLeft:this.mousePosition.x+("left"===e?-8:8),positionTop:this.mousePosition.y-17,style:{transform:"left"===e?"translate(-100%,0%)":void 0,maxWidth:400},placement:e},this.tooltipFunction(this.tooltipModel.datum||this.tooltipModel.data[0])),document.body)}return null}}])&&j(n.prototype,a),u&&j(n,u),t}();B([a.observable.ref],z.prototype,"tooltipModel",void 0),B([a.observable],z.prototype,"mousePosition",void 0),B([u.default],z.prototype,"containerRef",null),B([u.default],z.prototype,"resetSelection",null),B([a.computed],z.prototype,"usedGroups",null),B([a.computed],z.prototype,"groupLabels",null),B([a.computed],z.prototype,"chartWidth",null),B([a.computed],z.prototype,"scatterChartHeight",null),B([a.computed],z.prototype,"scatterChartExtent",null),B([a.computed],z.prototype,"barChartExtent",null),B([a.computed],z.prototype,"biggestCategoryLabelSize",null),B([a.computed],z.prototype,"svgWidth",null),B([a.computed],z.prototype,"svgHeight",null),B([a.computed],z.prototype,"leftPadding",null),B([a.computed],z.prototype,"rightPadding",null),B([a.computed],z.prototype,"topPadding",null),B([a.computed],z.prototype,"bottomPadding",null),B([u.default],z.prototype,"categoryCoord",null),B([u.default],z.prototype,"categoryCoordToGroup",null),B([a.computed],z.prototype,"groupCombinationSets",null),B([a.computed],z.prototype,"scatterData",null),B([a.computed],z.prototype,"barPlotData",null),B([a.computed],z.prototype,"barPlotHitzoneData",null),B([a.computed],z.prototype,"getGroupIntersectionLines",null),B([a.computed],z.prototype,"barPlotDomain",null),B([a.computed],z.prototype,"scatterPlotDomain",null),B([a.computed],z.prototype,"categoryTickValues",null),B([a.computed],z.prototype,"groupTickValues",null),B([u.default],z.prototype,"formatNumericalTick",null),B([u.default],z.prototype,"groupTick",null),B([a.computed],z.prototype,"scatterPlotTopPadding",null),B([a.computed],z.prototype,"tooltipComponent",null),B([u.default],z.prototype,"onMouseMove",null),B([u.default],z.prototype,"lineStroke",null),B([u.default],z.prototype,"fill",null),B([u.default],z.prototype,"getChart",null);var q=z=B([o.observer],z),U=n(840);function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e,t){return!t||"object"!==Q(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $(e,t){return($=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Y=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Q(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},X=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=W(this,K(t).apply(this,arguments))).sampleSelection=[],e.patientSelection=[],e.sampleUpset=null,e.patientUpset=null,e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}(t,r["Component"]),n=t,(o=[{key:"changeSelectedSampleRegions",value:function(e){this.sampleSelection=e}},{key:"changeSelectedPatientRegions",value:function(e){this.patientSelection=e}},{key:"sampleUpsetRef",value:function(e){this.sampleUpset=e}},{key:"patientUpsetRef",value:function(e){this.patientUpset=e}},{key:"submitSampleOverlapGroup",value:function(e,t){this.props.store.addGroup(e,t),this.sampleSelection=[]}},{key:"submitPatientOverlapGroup",value:function(e,t){this.props.store.addGroup(e,t),this.patientSelection=[]}},{key:"render",value:function(){return r.createElement("div",{style:{position:"relative",display:"".concat(this.props.sideBySide?"flex":"block"),maxWidth:this.props.maxWidth,overflow:"auto hidden"}},r.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",paddingBottom:20,marginRight:this.props.sideBySide?10:void 0}},r.createElement(q,{ref:this.sampleUpsetRef,groups:this.props.samplesVennPartition,uidToGroup:this.props.uidToGroup,caseType:"sample",title:"Samples overlap",onChangeSelectedCombinations:this.changeSelectedSampleRegions,selectedCombinations:this.sampleSelection}),this.sampleUpset&&this.props.samplesVennPartition.length>0&&r.createElement(U.a,{store:this.props.store,includedRegions:this.sampleSelection,submitGroup:this.submitSampleOverlapGroup,allGroupsInPlot:Object.keys(this.props.samplesVennPartition[0].key),caseType:"sample",width:this.sampleUpset.svgWidth})),r.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},r.createElement(q,{ref:this.patientUpsetRef,groups:this.props.patientsVennPartition,uidToGroup:this.props.uidToGroup,caseType:"patient",title:"Patients overlap",onChangeSelectedCombinations:this.changeSelectedPatientRegions,selectedCombinations:this.patientSelection}),this.patientUpset&&this.props.patientsVennPartition.length>0&&r.createElement(U.a,{store:this.props.store,includedRegions:this.patientSelection,submitGroup:this.submitPatientOverlapGroup,allGroupsInPlot:Object.keys(this.props.patientsVennPartition[0].key),caseType:"patient",width:this.patientUpset.svgWidth})))}}])&&H(n.prototype,o),i&&H(n,i),t}();Y([a.observable.shallow],X.prototype,"sampleSelection",void 0),Y([a.observable.shallow],X.prototype,"patientSelection",void 0),Y([a.observable.ref],X.prototype,"sampleUpset",void 0),Y([a.observable.ref],X.prototype,"patientUpset",void 0),Y([u.default,a.action],X.prototype,"changeSelectedSampleRegions",null),Y([u.default,a.action],X.prototype,"changeSelectedPatientRegions",null),Y([u.default],X.prototype,"sampleUpsetRef",null),Y([u.default],X.prototype,"patientUpsetRef",null),Y([u.default,a.action],X.prototype,"submitSampleOverlapGroup",null),Y([u.default,a.action],X.prototype,"submitPatientOverlapGroup",null),X=Y([o.observer],X);t.a=X},function(e,t,n){"use strict";var r=n(0),o=n(4),i=n(2),a=n(7),s=n(605),l=n(1145),u=n(101),c=(n(1146),n(570)),p=n(612);function d(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function f(e,t,n,r,i){return o.mapValues(e,function(e,a){var s={mutated:0,amp:0,homdel:0,hetloss:0,gain:0,fusion:0,mrnaExpressionHigh:0,mrnaExpressionLow:0,protExpressionHigh:0,protExpressionLow:0,multiple:0},l={mutation:0,cna:0,expression:0,protein:0},u={mutation:0,cna:0,expression:0,protein:0},d={profiledSampleTotal:0,alterationTotal:0,alterationTypeCounts:s,alteredSampleCount:0,parentCancerType:e[0].cancerType,profiledSamplesCounts:l,notProfiledSamplesCounts:u};return o.forEach(e,function(e){var a=!1;if(o.forEach(n,function(t,n){var s=o.some(Object(p.b)(e.uniqueSampleKey,o.map(t,function(e){return e.molecularProfileId}),r,i));switch(a=a||s,n){case c.a.COPY_NUMBER_ALTERATION:s?l.cna++:u.cna++;break;case c.a.MRNA_EXPRESSION:s?l.expression++:u.expression++;break;case c.a.PROTEIN_LEVEL:s?l.protein++:u.protein++;break;case c.a.MUTATION_EXTENDED:s?l.mutation++:u.mutation++}}),a&&(d.profiledSampleTotal+=1),e.uniqueSampleKey in t){var f=t[e.uniqueSampleKey],h=o.uniqBy(f,function(e){return e.alterationType});d.alterationTotal+=h.length,h.length>0&&(d.alteredSampleCount+=1),h.length>1?s.multiple++:o.forEach(h,function(e){switch(e.alterationType){case c.a.COPY_NUMBER_ALTERATION:s[e.alterationSubType]++;break;case c.a.MRNA_EXPRESSION:"high"===e.alterationSubType&&s.mrnaExpressionHigh++,"low"===e.alterationSubType&&s.mrnaExpressionLow++;break;case c.a.PROTEIN_LEVEL:"high"===e.alterationSubType&&s.protExpressionHigh++,"low"===e.alterationSubType&&s.protExpressionLow++;break;case c.a.MUTATION_EXTENDED:s.mutated++;break;case c.a.FUSION:s.fusion++}})}}),d})}var h=n(645),m=n(3),y=n(646),g=n(128),v=n(15),b=n(8);function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",function(){return T});var x=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":P(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},T="all",k=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=E(t).call(this,e))||"object"!==P(o)&&"function"!=typeof o?O(r):o).activeTab=T,n.resultsViewPageWidth=1150,n.handleTabClick=n.handleTabClick.bind(O(n)),n.pivotData=n.pivotData.bind(O(n)),n.mapStudyIdToShortName=n.mapStudyIdToShortName.bind(O(n)),n}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(t,r["Component"]),n=t,(i=[{key:"handleTabClick",value:function(e){this.activeTab=e}},{key:"pivotData",value:function(e){this.groupAlterationsBy_userSelection=e}},{key:"mapStudyIdToShortName",value:function(e){return e in this.props.store.physicalStudySet?this.props.store.physicalStudySet[e].shortName:e}},{key:"handleStudyLinkout",value:function(e,t){var n,r=Object.assign({},this.props.store.urlWrapper.query,(_(n={},g.a.cancer_study_list,e),_(n,g.a.gene_list,t||this.props.store.urlWrapper.query.gene_list),n));window.open(Object(v.b)("/results")).clientPostedData=r}},{key:"render",value:function(){var e=this;switch(Object(m.E)(this.props.store.samplesExtendedWithClinicalData,this.props.store.oqlFilteredAlterationsByGeneBySampleKey,this.props.store.studies,this.props.store.sequencedSampleKeysByGene,this.props.store.selectedMolecularProfileIdsByAlterationType,this.props.store.coverageInformation)){case"pending":return r.createElement(u.a,{isLoading:!0,center:!0,size:"big"});case"error":return null;case"complete":return r.createElement("div",{ref:function(t){return e.resultsViewPageContent=t},"data-test":"cancerTypeSummaryWrapper"},r.createElement("div",{className:"tabMessageContainer"},r.createElement(h.a,{className:"cancer-types-summary-oql-status-banner",store:this.props.store,tabReflectsOql:!0}),r.createElement(y.a,{store:this.props.store})),r.createElement(s.b,{onTabClick:this.handleTabClick,unmountOnHide:!0,arrowStyle:{"line-height":.8},tabButtonStyle:"pills",activeTabId:this.activeTab,className:"pillTabs"},this.tabs))}}},{key:"defaultTabId",get:function(){return T}},{key:"groupAlterationsBy",get:function(){return void 0===this.groupAlterationsBy_userSelection?this.props.store.studies.result.length>1?"studyId":1===o.chain(this.props.store.samplesExtendedWithClinicalData.result).map(function(e){return e.cancerType}).uniq().value().length?"cancerTypeDetailed":"cancerType":this.groupAlterationsBy_userSelection}},{key:"tabs",get:function(){var e,t,n,i,a,u=this,c="studyId"===this.groupAlterationsBy?this.mapStudyIdToShortName:void 0,p=(e=this.props.store.oqlFilteredAlterationsByGeneBySampleKey.result,t=this.props.store.samplesExtendedWithClinicalData.result,n=this.groupAlterationsBy,i=this.props.store.selectedMolecularProfileIdsByAlterationType.result,a=this.props.store.coverageInformation.result,o.mapValues(e,function(e,r){return f(o.groupBy(t,function(e){return e[n]}),e,i,a,r)})),h=o.map(this.props.store.genes.result,function(e){var t=p[e.hugoGeneSymbol],n=0===o.reduce(t,function(e,t){return e+t.alterationTotal},0)?{color:"#bbb"}:void 0;return r.createElement(s.a,S({key:e.hugoGeneSymbol,id:"summaryTab"+e.hugoGeneSymbol,linkText:e.hugoGeneSymbol},{anchorStyle:n}),r.createElement(l.a,{groupedAlterationData:p[e.hugoGeneSymbol],handleStudyLinkout:u.handleStudyLinkout,groupAlterationsBy:u.groupAlterationsBy,gene:e.hugoGeneSymbol,labelTransformer:c,handlePivotChange:u.pivotData,width:u.resultsViewPageWidth}))});if(h.length>1){var m=function(e,t,n,r,i){var a=o.groupBy(t,function(e){return e[n]}),s=o.flatMap(e,function(e){return e});return f(a,o.mergeWith.apply(o,[{}].concat(d(s),[function(e,t){if(o.isArray(e))return e.concat(t)}])),r,i)}(this.props.store.oqlFilteredAlterationsByGeneBySampleKey.result,this.props.store.samplesExtendedWithClinicalData.result,this.groupAlterationsBy,this.props.store.selectedMolecularProfileIdsByAlterationType.result,this.props.store.coverageInformation.result);h.unshift(r.createElement(s.a,{key:T,id:"allGenes",linkText:"All Queried Genes"},r.createElement(l.a,{gene:T,width:this.resultsViewPageWidth,groupedAlterationData:m,handlePivotChange:this.pivotData,labelTransformer:c,groupAlterationsBy:this.groupAlterationsBy,handleStudyLinkout:this.handleStudyLinkout})))}return h}}])&&w(n.prototype,i),a&&w(n,a),t}();x([i.observable],k.prototype,"activeTab",void 0),x([i.observable],k.prototype,"resultsViewPageWidth",void 0),x([i.observable],k.prototype,"groupAlterationsBy_userSelection",void 0),x([i.computed],k.prototype,"tabs",null),x([b.default],k.prototype,"handleStudyLinkout",null),k=x([a.observer],k);t.b=k},function(e,t,n){"use strict";var r=n(0),o=n(848),i=(n(755),n(101)),a=n(7),s=n(3),l=n(579),u=n(577),c=n(590),p=n(596),d=n(639),f=n(574),h=n(4),m=n.n(h),y=n(575);function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var O=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":E(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},C=function(e){function t(){return v(this,t),b(this,S(t).apply(this,arguments))}return _(t,y["b"]),t}(),P=function(e){function t(){return v(this,t),b(this,S(t).apply(this,arguments))}var n,o,i;return _(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement(C,{data:this.props.survivalDescriptionData,columns:[{name:"Study",render:function(e){return r.createElement("span",null,e.studyName)},sortBy:function(e){return e.studyName}},{name:"Description",render:function(e){return r.createElement("span",null,e.description)},sortBy:function(e){return e.description}}],initialSortColumn:"Description",initialSortDirection:"desc",showPagination:!0,initialItemsPerPage:10,showColumnVisibility:!1,showFilter:!1,showCopyDownload:!1})}}])&&g(n.prototype,o),i&&g(n,i),t}(),x=P=O([a.observer],P),T=n(842),k=n(630),A=n(601),I=n(2),D=n(676),M=n.n(D);function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var F=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":G(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},B=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=N(this,R(t).apply(this,arguments))).multipleDescriptionWarningMessageWithoutTooltip="The survival data on patients from different cohorts may have been defined by ",e.multipleDescriptionWarningMessageWithTooltip="different criteria.",e.differentDescriptionExistMessage="Different descriptions of survival data were used for different studies.",e.selectedSurvivalPlotPrefix=void 0,e.analysisGroupsComputations=Object(s.S)({await:function(){return[e.props.store.activeGroups,e.props.store.patientsVennPartition,e.props.store.uidToGroup,e.props.store.patientToSamplesSet]},invoke:function(){var t=m.a.reduce(e.props.store._activeGroupsNotOverlapRemoved.result,function(e,t,n){return e[t.uid]=n,e},{}),n=e.props.store.patientsVennPartition.result;n.sort(function(e,n){var r=Object.keys(e.key).filter(function(t){return e.key[t]}),o=Object.keys(n.key).filter(function(e){return n.key[e]});return r.length!==o.length?r.length-o.length:m.a.sumBy(r,function(e){return t[e]})-m.a.sumBy(o,function(e){return t[e]})});var r=e.props.store.uidToGroup.result,o=[],i={};if(e.props.store.overlapStrategy===k.a.INCLUDE){var a=!0,s=!1,l=void 0;try{for(var u,c=function(){var e=u.value,n=Object.keys(e.key).filter(function(t){return e.key[t]});if(n.sort(function(e,n){return t[e]-t[n]}),n.length>0){var a="Only ".concat(n.map(function(e){return r[e].nameWithOrdinal}).join(", ")),s=n.join(","),l=!0,c=!1,d=void 0;try{for(var f,h=e.value[Symbol.iterator]();!(l=(f=h.next()).done);l=!0){var m=f.value;i[m]=[s]}}catch(e){c=!0,d=e}finally{try{l||null==h.return||h.return()}finally{if(c)throw d}}o.push({name:a,color:Object(p.a)(n.map(function(e){return r[e].color})),value:s,legendText:JSON.stringify(n)})}},d=n[Symbol.iterator]();!(a=(u=d.next()).done);a=!0)c()}catch(e){s=!0,l=e}finally{try{a||null==d.return||d.return()}finally{if(s)throw l}}}else{var h=e.props.store.patientToSamplesSet.result,y=!0,g=!1,v=void 0;try{for(var b,S=e.props.store.activeGroups.result[Symbol.iterator]();!(y=(b=S.next()).done);y=!0){var _=b.value,w=_.nameWithOrdinal;o.push({name:w,color:_.color,value:_.uid,legendText:_.uid});var E=Object(f.Y)([_]),O=!0,C=!1,P=void 0;try{for(var x,T=E[Symbol.iterator]();!(O=(x=T.next()).done);O=!0){var A=x.value,I=h.get({studyId:A.studyId,patientId:A.patientId});I&&I.length&&(i[I[0].uniquePatientKey]=[_.uid])}}catch(e){C=!0,P=e}finally{try{O||null==T.return||T.return()}finally{if(C)throw P}}}}catch(e){g=!0,v=e}finally{try{y||null==S.return||S.return()}finally{if(g)throw v}}}return Promise.resolve({analysisGroups:o,patientToAnalysisGroups:i})}}),e.tabUI=Object(l.a)({await:function(){return e.props.store._activeGroupsNotOverlapRemoved.isComplete&&e.props.store._activeGroupsNotOverlapRemoved.result.length>10?[e.props.store._activeGroupsNotOverlapRemoved]:[e.props.store._activeGroupsNotOverlapRemoved,e.survivalUI,e.props.store.overlapComputations]},render:function(){var t=[];return e.props.store._activeGroupsNotOverlapRemoved.result.length>10?t.push(r.createElement("span",null,u.h)):0===e.props.store._activeGroupsNotOverlapRemoved.result.length?t.push(r.createElement("span",null,u.g)):(t.push(r.createElement(d.a,{store:e.props.store,only:"patient",survivalTabMode:!0})),t.push(e.survivalUI.component)),r.createElement("div",{"data-test":"ComparisonPageSurvivalTabDiv"},t)},renderPending:function(){return r.createElement(i.a,{center:!0,isLoading:!0,size:"big"})},renderError:function(){return r.createElement(c.a,null)},showLastRenderWhenPending:!0}),e.survivalUI=Object(l.a)({await:function(){return[e.props.store.survivalDescriptions,e.props.store.survivalClinicalAttributesPrefix,e.props.store.patientSurvivals,e.props.store.activeStudiesClinicalAttributes,e.analysisGroupsComputations,e.props.store.overlapComputations,e.props.store.uidToGroup,e.props.store.patientSurvivalUniqueStatusText]},render:function(){var t=[],n=[],i=e.analysisGroupsComputations.result.analysisGroups,a=e.analysisGroupsComputations.result.patientToAnalysisGroups,l={},u={};if(e.props.store.survivalClinicalAttributesPrefix.result.forEach(function(t){l[t]=1===e.props.store.survivalDescriptions.result[t].length?e.props.store.survivalDescriptions.result[t][0].description:"",u[t]=Object(A.e)(e.props.store.survivalDescriptions.result[t][0].displayName)}),void 0!==e.selectedSurvivalPlotPrefix||m.a.isEmpty(e.props.store.patientSurvivals.result)||e.setSurvivalPlotPrefix(m.a.keys(e.props.store.patientSurvivals.result)[0]),e.selectedSurvivalPlotPrefix){var c=e.props.store.patientSurvivals.result[e.selectedSurvivalPlotPrefix],p=e.selectedSurvivalPlotPrefix;if(c.length>0){if(e.props.store.survivalDescriptions&&e.props.store.survivalDescriptions.result[p].length>1){var d=e.multipleDescriptionWarningMessageWithoutTooltip;m.a.uniq(m.a.map(e.props.store.survivalDescriptions.result[p],function(e){return e.description})).length>1&&(d="".concat(e.differentDescriptionExistMessage," ").concat(d)),n.push(r.createElement("div",{className:"tabMessageContainer"},r.createElement("div",{className:"alert alert-warning",role:"alert"},d,r.createElement(s.c,{placement:"bottom",overlay:r.createElement(x,{survivalDescriptionData:e.props.store.survivalDescriptions.result[p]})},r.createElement("a",{href:"javascript:void(0)"},e.multipleDescriptionWarningMessageWithTooltip)))))}t.push(r.createElement("div",{style:{marginBottom:40}},r.createElement("h4",{className:"forceHeaderStyle h4"},u[p]),r.createElement("p",null,l[p]),r.createElement("div",{style:{width:"920px"}},r.createElement(o.b,{className:"borderedChart",patientSurvivals:c,analysisGroups:i,patientToAnalysisGroups:a,title:u[p],xAxisLabel:"Months ".concat(u[p]),yAxisLabel:u[p],totalCasesHeader:"Number of Cases, Total",statusCasesHeader:"Number of Cases, ".concat(Object(A.l)(p,e.props.store.patientSurvivalUniqueStatusText.result[p])),medianMonthsHeader:"Median Months ".concat(u[p]),yLabelTooltip:"".concat(m.a.startCase(m.a.toLower(u[p]))," estimate"),xLabelWithEventTooltip:A.q[p]||"Time of Death",xLabelWithoutEventTooltip:"Time of last observation",fileName:u[p].replace(" ","_"),showCurveInTooltip:!0,legendLabelComponent:e.props.store.overlapStrategy===k.a.INCLUDE?r.createElement(T.b,{maxLabelWidth:256,uidToGroup:e.props.store.uidToGroup.result,dy:"0.3em"}):r.createElement(T.a,{maxLabelWidth:256,uidToGroup:e.props.store.uidToGroup.result,dy:"0.3em"}),styleOpts:{tooltipYOffset:-28}}))))}else t.push(r.createElement("div",{className:"alert alert-info"},u[p]," not available"))}return n.push(r.createElement("strong",{className:M.a.survivalTypeOptions},"Survival types:"," ")),m.a.forEach(u,function(t,o){n.push(r.createElement("li",{onClick:function(){return e.setSurvivalPlotPrefix(o)},className:"plots-tab-pills "+(o===e.selectedSurvivalPlotPrefix?"active":"")},r.createElement("a",null,t)))}),r.createElement("div",null,r.createElement("div",{className:M.a.survivalPlotHeaderContainer},r.createElement("div",{className:M.a.survivalPlotHeader},r.createElement("ul",{className:"nav nav-pills"},n))),t)},renderPending:function(){return r.createElement(i.a,{center:!0,isLoading:!0,size:"big"})},renderError:function(){return r.createElement(c.a,null)}}),e}var n,a,h;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(t,r["Component"]),n=t,(a=[{key:"setSurvivalPlotPrefix",value:function(e){this.selectedSurvivalPlotPrefix=e}},{key:"render",value:function(){return this.tabUI.component}}])&&j(n.prototype,a),h&&j(n,h),t}();F([I.observable],B.prototype,"selectedSurvivalPlotPrefix",void 0),F([I.action],B.prototype,"setSurvivalPlotPrefix",null),B=F([a.observer],B);t.a=B},function(e,t,n){"use strict";var r=n(0),o=n(7),i=n(8),a=n(101),s=n(2),l=n(595),u=n(575),c=n(582),p=n(580);function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var g,v=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":y(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};!function(e){e.CLINICAL_ATTRIBUTE_NAME="Clinical Attribute",e.CLINICAL_ATTRIBUTE_TYPE="Attribute Type",e.STATISTICAL_TEST_NAME="Statistical Test",e.SCORE="Score",e.P_VALUE="p-Value",e.Q_VALUE="q-Value"}(g||(g={}));var b=[{name:g.CLINICAL_ATTRIBUTE_NAME,render:function(e){return r.createElement("span",{"data-test":e.clinicalAttribute.displayName,style:{fontWeight:e.qValue<.05?"bold":"normal"}},e.clinicalAttribute.displayName)},filter:function(e,t,n){return e.clinicalAttribute.displayName.toUpperCase().indexOf(n)>-1},sortBy:function(e){return e.clinicalAttribute.displayName},download:function(e){return e.clinicalAttribute.displayName},width:160},{name:g.CLINICAL_ATTRIBUTE_TYPE,render:function(e){return r.createElement("span",null,e.clinicalAttribute.patientAttribute?"Patient":"Sample")},filter:function(e,t,n){return(e.clinicalAttribute.patientAttribute?"Patient":"Sample").toUpperCase().indexOf(n)>-1},sortBy:function(e){return e.clinicalAttribute.patientAttribute?"Patient":"Sample"},download:function(e){return e.clinicalAttribute.patientAttribute?"Patient":"Sample"},width:100},{name:g.STATISTICAL_TEST_NAME,render:function(e){return r.createElement("span",{style:{whiteSpace:"nowrap"}},e.method)},filter:function(e,t,n){return e.method.toUpperCase().indexOf(n)>-1},sortBy:function(e){return e.method},download:function(e){return e.method},width:130},{name:g.P_VALUE,render:function(e){return r.createElement("span",{style:{whiteSpace:"nowrap",fontWeight:e.qValue<.05?"bold":"normal"}},Object(p.e)(e.pValue,3,.01,-10))},sortBy:function(e){return e.pValue},download:function(e){return Object(c.b)(e.pValue,3,.01)},width:100,tooltip:r.createElement("span",null,"p-value of null Hypothesis, derived from Chi-Squared test or Kruskal-Wallis test")},{name:g.Q_VALUE,render:function(e){return r.createElement("span",{style:{whiteSpace:"nowrap",fontWeight:e.qValue<.05?"bold":"normal"}},Object(p.e)(e.qValue,3,.01,-10))},sortBy:function(e){return e.qValue},download:function(e){return Object(c.b)(e.qValue,3,.01)},width:100,tooltip:r.createElement("span",null,"Derived from Benjamini-Hochberg FDR correction procedure.")}],S=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,h(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,r["Component"]),n=t,(o=[{key:"onRowClick",value:function(e){this.props.dataStore.setHighlighted(e)}},{key:"render",value:function(){return r.createElement(u.b,{columns:b,initialSortColumn:g.Q_VALUE,initialSortDirection:"asc",showColumnVisibility:!1,dataStore:this.props.dataStore,onRowClick:this.onRowClick,paginationProps:{itemsPerPageOptions:[20]},initialItemsPerPage:20,copyDownloadProps:{showCopy:!1}})}}])&&d(n.prototype,o),i&&d(n,i),t}();v([i.default],S.prototype,"onRowClick",null);var _=S=v([o.observer],S),w=n(4),E=n.n(w),O=n(3),C=n(178),P=n(610),x=n(764),T=n(714),k=n(583),A=n(577),I=n(734),D=n(609),M=n(579),j=n(639),N=n(578),R=n(590),L=n(589);function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t,n){return t&&G(e.prototype,t),n&&G(e,n),e}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){return!t||"object"!==W(t)&&"function"!=typeof t?z(e):t}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var K,$=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":W(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Q=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},Y="clinical-plot-svg",X=function(e){function t(){return B(this,t),V(this,q(t).apply(this,arguments))}return U(t,T["a"]),t}(),Z=function(e){function t(e,n,r){var o;return B(this,t),(o=V(this,q(t).call(this,e))).setHighlighted=r,o.dataHighlighter=function(e){var t=n();return!(!t||e.clinicalAttribute.clinicalAttributeId!==t.clinicalAttribute.clinicalAttributeId)},o.reactionDisposer=Object(s.autorun)(function(){o.sortMetric&&o.sortedFilteredData.length>0&&!n()&&o.setHighlighted(o.sortedFilteredData[0])}),o}return U(t,l["a"]),F(t,[{key:"destroy",value:function(){this.reactionDisposer()}}]),t}();!function(e){e.Bar="Bar",e.StackedBar="StackedBar",e.PercentageStackedBar="PercentageStackedBar"}(K||(K={}));var J=[{value:K.Bar,label:"Bar chart"},{value:K.StackedBar,label:"Stacked bar chart"},{value:K.PercentageStackedBar,label:"100% stacked bar chart"}],ee=function(e){function t(){var e;return B(this,t),(e=V(this,q(t).apply(this,arguments))).tabUI=Object(M.a)({await:function(){var t=[e.props.store.activeGroups];return e.props.store.activeGroups.isComplete&&e.props.store.activeGroups.result.length<2||t.push(e.overlapUI),t},render:function(){var t=[];return e.props.store.activeGroups.result.length<2?t.push(r.createElement("span",null,Object(A.a)(e.props.store._activeGroupsNotOverlapRemoved.result.length))):(t.push(r.createElement(j.a,{store:e.props.store})),t.push(e.overlapUI.component)),r.createElement("div",{"data-test":"ComparisonPageClinicalTabDiv"},t)},renderPending:function(){return r.createElement(a.a,{isLoading:!0,center:!0,size:"big"})},renderError:function(){return r.createElement(R.a,null)}}),e.overlapUI=Object(M.a)({await:function(){return[e.props.store.clinicalDataEnrichmentsWithQValues]},render:function(){return r.createElement("div",{className:"clearfix",style:{display:"flex"}},r.createElement("div",{style:{width:"600px"}},r.createElement(_,{dataStore:e.tableDataStore})),r.createElement("div",{style:{marginLeft:"10px"}},e.getUtilitiesMenu,e.plot))},renderPending:function(){return r.createElement(a.a,{isLoading:!0,centerRelativeToContainer:!0,size:"big"})},renderError:function(){return r.createElement(R.a,null)}}),e.tableDataStore=new Z(function(){return e.props.store.clinicalDataEnrichmentsWithQValues.result},function(){return e.highlightedRow},function(t){e.highlightedRow=t,e.swapAxes=!1,e.logScale=!1}),e.logScale=!1,e.swapAxes=!1,e.horizontalBars=!1,e.clinicalDataPromise=Object(O.S)({await:function(){return[e.props.store.patientKeyToSamples,e.props.store.activeGroups]},invoke:function(){return Q(z(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,o,i,a,s,l,u,c,p,d,f,h,m,y,g,v,b,S,_,w,O,P,x,T,k,A,I,D,M,j,N,R,L,G,F,B,V,z;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={data:[],datatype:"string"},!this.highlightedRow){e.next=117;break}return n=this.highlightedRow.clinicalAttribute,r=this.props.store.patientKeyToSamples.result,o=E.a.flatMap(this.props.store.activeGroups.result,function(e){return E.a.flatMap(e.studies,function(e){return e.samples.map(function(t){return{studyId:e.id,entityId:t}})})}),i=E.a.flatMap(this.props.store.activeGroups.result,function(e){return E.a.flatMap(e.studies,function(e){return e.patients.map(function(t){return{studyId:e.id,entityId:t}})})}),e.next=8,C.a.fetchClinicalDataUsingPOST({clinicalDataType:n.patientAttribute?"PATIENT":"SAMPLE",clinicalDataMultiStudyFilter:{attributeIds:[n.clinicalAttributeId],identifiers:n.patientAttribute?i:o}});case 8:for(a=e.sent,s={},l=!0,u=!1,c=void 0,e.prev=13,p=a[Symbol.iterator]();!(l=(d=p.next()).done);l=!0)f=d.value,h=f.value.toLowerCase(),void 0===s[h]&&(s[h]=f.value);e.next=21;break;case 17:e.prev=17,e.t0=e.catch(13),u=!0,c=e.t0;case 21:e.prev=21,e.prev=22,l||null==p.return||p.return();case 24:if(e.prev=24,!u){e.next=27;break}throw c;case 27:return e.finish(24);case 28:return e.finish(21);case 29:if(t.datatype=n.datatype.toLowerCase(),m=t.data,!n.patientAttribute){e.next=78;break}y=!0,g=!1,v=void 0,e.prev=35,b=a[Symbol.iterator]();case 37:if(y=(S=b.next()).done){e.next=62;break}for(_=S.value,w=r[_.uniquePatientKey],O=!0,P=!1,x=void 0,e.prev=43,T=w[Symbol.iterator]();!(O=(k=T.next()).done);O=!0)A=k.value,m.push({uniqueSampleKey:A.uniqueSampleKey,value:s[_.value.toLowerCase()]});e.next=51;break;case 47:e.prev=47,e.t1=e.catch(43),P=!0,x=e.t1;case 51:e.prev=51,e.prev=52,O||null==T.return||T.return();case 54:if(e.prev=54,!P){e.next=57;break}throw x;case 57:return e.finish(54);case 58:return e.finish(51);case 59:y=!0,e.next=37;break;case 62:e.next=68;break;case 64:e.prev=64,e.t2=e.catch(35),g=!0,v=e.t2;case 68:e.prev=68,e.prev=69,y||null==b.return||b.return();case 71:if(e.prev=71,!g){e.next=74;break}throw v;case 74:return e.finish(71);case 75:return e.finish(68);case 76:e.next=97;break;case 78:for(I=!0,D=!1,M=void 0,e.prev=81,j=a[Symbol.iterator]();!(I=(N=j.next()).done);I=!0)R=N.value,m.push({uniqueSampleKey:R.uniqueSampleKey,value:s[R.value.toLowerCase()]});e.next=89;break;case 85:e.prev=85,e.t3=e.catch(81),D=!0,M=e.t3;case 89:e.prev=89,e.prev=90,I||null==j.return||j.return();case 92:if(e.prev=92,!D){e.next=95;break}throw M;case 95:return e.finish(92);case 96:return e.finish(89);case 97:if("number"!==n.datatype.toLowerCase()){e.next=117;break}for(L=!0,G=!1,F=void 0,e.prev=101,B=m[Symbol.iterator]();!(L=(V=B.next()).done);L=!0)(z=V.value).value=parseFloat(z.value);e.next=109;break;case 105:e.prev=105,e.t4=e.catch(101),G=!0,F=e.t4;case 109:e.prev=109,e.prev=110,L||null==B.return||B.return();case 112:if(e.prev=112,!G){e.next=115;break}throw F;case 115:return e.finish(112);case 116:return e.finish(109);case 117:return e.abrupt("return",Promise.resolve(t));case 118:case"end":return e.stop()}},e,this,[[13,17,21,29],[22,,24,28],[35,64,68,76],[43,47,51,59],[52,,54,58],[69,,71,75],[81,85,89,97],[90,,92,96],[101,105,109,117],[110,,112,116]])}))}}),e.groupMembershipAxisData=Object(O.S)({await:function(){return[e.props.store.sampleSet,e.props.store.activeGroups]},invoke:function(){return Q(z(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=E.a.map(this.props.store.activeGroups.result,function(e){return e.nameWithOrdinal}),n={data:[],datatype:"string",categoryOrder:t},r=this.props.store.sampleSet.result||new L.a,o=E.a.reduce(this.props.store.activeGroups.result,function(e,t){return t.studies.forEach(function(n){n.samples.forEach(function(o){if(r.has({studyId:n.id,sampleId:o})){var i=r.get({studyId:n.id,sampleId:o}).uniqueSampleKey;void 0===e[i]&&(e[i]={uniqueSampleKey:i,value:[]}),e[i].value.push(t.nameWithOrdinal)}})}),e},{}),n.data=E.a.values(o),e.abrupt("return",Promise.resolve(n));case 6:case"end":return e.stop()}},e,this)}))}}),e.boxPlotData=Object(O.S)({await:function(){return[e.horzAxisDataPromise,e.vertAxisDataPromise,e.props.store.sampleKeyToSample]},invoke:function(){var t=e.horzAxisDataPromise.result,n=e.vertAxisDataPromise.result;if(t&&n){var r,o,i;if(Object(P.w)(t)&&Object(P.x)(n))r=n,o=t,i=!0;else{if(!Object(P.x)(t)||!Object(P.w)(n))return Promise.resolve({horizontal:!1,data:[]});r=t,o=n,i=!1}return Promise.resolve({horizontal:i,data:Object(P.D)(r,o,e.props.store.sampleKeyToSample.result,{},void 0,void 0)})}return new Promise(function(){return 0})}}),e.plotType=K.PercentageStackedBar,e}return U(t,r["Component"]),F(t,[{key:"getScrollPane",value:function(){return this.scrollPane}},{key:"onClickLogScale",value:function(){if(this.logScale=!this.logScale,this.logScale){this.logScaleFunction={label:"log2",fLogScale:function(e,t){return Math.log2(Math.max(e,.01))},fInvLogScale:function(e){return Math.pow(2,e)}}}else this.logScaleFunction=void 0}},{key:"onClickSwapAxes",value:function(){this.swapAxes=!this.swapAxes}},{key:"onClickhorizontalBars",value:function(){this.horizontalBars=!this.horizontalBars}},{key:"getSvg",value:function(){return document.getElementById(Y)}},{key:"assignScrollPaneRef",value:function(e){this.scrollPane=e}},{key:"onPlotTypeSelect",value:function(e){this.plotType=e.value}},{key:"toolbar",value:function(){return r.createElement("div",{style:{textAlign:"center",position:"relative"}},r.createElement(O.d,{getSvg:this.getSvg,filename:Y,dontFade:!0,type:"button",style:{position:"absolute",right:0,top:0}}))}},{key:"componentWillUnmount",value:function(){this.tableDataStore.destroy()}},{key:"render",value:function(){return this.tabUI.component}},{key:"showLogScaleControls",get:function(){return"number"===this.highlightedRow.clinicalAttribute.datatype.toLowerCase()}},{key:"vertAxisDataPromise",get:function(){return this.swapAxes?this.groupMembershipAxisData:this.clinicalDataPromise}},{key:"horzAxisDataPromise",get:function(){return this.swapAxes?this.clinicalDataPromise:this.groupMembershipAxisData}},{key:"horzLabel",get:function(){return this.swapAxes?"".concat(this.highlightedRow.clinicalAttribute.displayName).concat(this.logScale?" (log2)":""):"Group"}},{key:"vertLabel",get:function(){return this.swapAxes?"Group":"".concat(this.highlightedRow.clinicalAttribute.displayName).concat(this.logScale?" (log2)":"")}},{key:"scatterPlotTooltip",get:function(){var e=this;return function(t){return e.boxPlotData.isComplete?Object(P.k)(t,e.boxPlotData.result.horizontal):r.createElement("span",null,"Loading... (this shouldnt appear because the box plot shouldnt be visible)")}}},{key:"boxPlotTooltip",get:function(){var e=this;return function(t){return r.createElement("table",{className:"table table-striped"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{colSpan:2},e.boxPlotData.result.data[t.eventKey].label))),r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",null,"Maximum"),r.createElement("td",null,t.max)),r.createElement("tr",null,r.createElement("td",null,"75% (q3)"),r.createElement("td",null,t.q3)),r.createElement("tr",null,r.createElement("td",null,"Median"),r.createElement("td",null,t.median)),r.createElement("tr",null,r.createElement("td",null,"25% (q1)"),r.createElement("td",null,t.q1)),r.createElement("tr",null,r.createElement("td",null,"Minimum"),r.createElement("td",null,t.min))))}}},{key:"categoryToColor",get:function(){return E.a.reduce(this.props.store.uidToGroup.result,function(e,t){return e[t.nameWithOrdinal]=t.color,e},N.x)}},{key:"getUtilitiesMenu",get:function(){return this.highlightedRow?r.createElement("div",{style:{marginBottom:"10px"}},!this.showLogScaleControls&&r.createElement("div",{className:"form-group",style:{display:"flex",alignItems:"center"}},r.createElement("label",null,"Plot Type"),r.createElement("div",{style:{width:240,marginLeft:5},"data-test":"plotTypeSelector"},r.createElement(D.default,{name:"discrete-vs-discrete-plot-type",value:this.plotType,onChange:this.onPlotTypeSelect,options:J,clearable:!1,searchable:!0}))),r.createElement("div",null,r.createElement("label",{className:"checkbox-inline"},r.createElement("input",{type:"checkbox",checked:this.swapAxes,onClick:this.onClickSwapAxes,"data-test":"SwapAxes"}),"Swap Axes"),!this.showLogScaleControls&&r.createElement("label",{className:"checkbox-inline"},r.createElement("input",{type:"checkbox",name:"horizontalBars",checked:this.horizontalBars,onClick:this.onClickhorizontalBars,"data-test":"HorizontalBars"}),"Horizontal Bars"),this.showLogScaleControls&&r.createElement("label",{className:"checkbox-inline"},r.createElement("input",{type:"checkbox",checked:this.logScale,onClick:this.onClickLogScale,"data-test":"logScale"}),"Log Scale"))):r.createElement("span",null)}},{key:"plot",get:function(){if(0===this.tableDataStore.allData.length||!this.highlightedRow)return r.createElement("span",null);var e=[this.horzAxisDataPromise,this.vertAxisDataPromise],t=O.E.apply(void 0,e),n=this.plotType===K.PercentageStackedBar,i=n||this.plotType===K.StackedBar;switch(t){case"pending":return r.createElement(a.a,{center:!0,isLoading:!0,size:"big"});case"error":return r.createElement("span",null,"Error loading plot data.");default:if(!this.horzAxisDataPromise.result||!this.vertAxisDataPromise.result)return r.createElement("span",null,"Error loading plot data.");var s=null;if("number"===this.highlightedRow.clinicalAttribute.datatype.toLowerCase()){if(!this.boxPlotData.isComplete)return this.boxPlotData.isError?r.createElement("span",null,"Error loading plot data."):r.createElement(a.a,{center:!0,isLoading:!0,size:"big"});s=r.createElement(X,{svgId:Y,domainPadding:75,boxWidth:this.boxPlotData.result.data.length>7?30:60,axisLabelX:this.horzLabel,axisLabelY:this.vertLabel,data:this.boxPlotData.result.data,chartBase:500,scatterPlotTooltip:this.scatterPlotTooltip,boxPlotTooltip:this.boxPlotTooltip,horizontal:this.boxPlotData.result.horizontal,logScale:this.logScaleFunction,size:k.k,fill:P.i.fill,stroke:P.i.stroke,strokeOpacity:P.i.strokeOpacity,symbol:"circle",useLogSpaceTicks:!0,legendLocationWidthThreshold:550})}else s=r.createElement(I.a,{svgId:Y,horzData:this.horzAxisDataPromise.result.data,vertData:this.vertAxisDataPromise.result.data,horzCategoryOrder:this.horzAxisDataPromise.result.categoryOrder,vertCategoryOrder:this.vertAxisDataPromise.result.categoryOrder,categoryToColor:this.categoryToColor,barWidth:20,domainPadding:20,chartBase:500,axisLabelX:this.horzLabel,axisLabelY:this.vertLabel,legendLocationWidthThreshold:450,ticksCount:6,horizontalBars:this.horizontalBars,percentage:n,stacked:i});return r.createElement("div",{"data-test":"ClinicalTabPlotDiv",className:"borderedChart posRelative",style:{marginBottom:10}},r.createElement(x.a,{style:{position:"relative",top:-5},getScrollEl:this.getScrollPane}),r.createElement(o.Observer,null,this.toolbar),r.createElement("div",{ref:this.assignScrollPaneRef,style:{position:"relative",display:"inline-block"}},s))}}}]),t}();$([s.observable.ref],ee.prototype,"highlightedRow",void 0),$([i.default],ee.prototype,"getScrollPane",null),$([s.computed],ee.prototype,"showLogScaleControls",null),$([s.observable],ee.prototype,"logScale",void 0),$([s.observable],ee.prototype,"logScaleFunction",void 0),$([s.observable],ee.prototype,"swapAxes",void 0),$([s.observable],ee.prototype,"horizontalBars",void 0),$([i.default,s.action],ee.prototype,"onClickLogScale",null),$([i.default,s.action],ee.prototype,"onClickSwapAxes",null),$([i.default,s.action],ee.prototype,"onClickhorizontalBars",null),$([s.computed],ee.prototype,"vertAxisDataPromise",null),$([s.computed],ee.prototype,"horzAxisDataPromise",null),$([s.computed],ee.prototype,"horzLabel",null),$([s.computed],ee.prototype,"vertLabel",null),$([i.default],ee.prototype,"getSvg",null),$([i.default],ee.prototype,"assignScrollPaneRef",null),$([s.computed],ee.prototype,"scatterPlotTooltip",null),$([s.computed],ee.prototype,"boxPlotTooltip",null),$([s.computed],ee.prototype,"categoryToColor",null),$([s.observable],ee.prototype,"plotType",void 0),$([i.default,s.action],ee.prototype,"onPlotTypeSelect",null),$([s.computed],ee.prototype,"getUtilitiesMenu",null),$([s.computed],ee.prototype,"plot",null),$([i.default],ee.prototype,"toolbar",null),ee=$([o.observer],ee);t.a=ee},function(e,t,n){"use strict";var r=n(0),o=n(939),i=n(9),a=n.n(i),s=n(626),l=n.n(s),u=n(608),c=n(7),p=n(2),d=n(4),f=n.n(d),h=n(15),m=n(594),y=n(3),g=n(688),v=n(940),b=(n(945),n(178)),S=n(101);function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t,n){return t&&w(e.prototype,t),n&&w(e,n),e}function O(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?P(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var A=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":k(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},I=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},D=function(e){function t(){var e;return _(this,t),(e=O(this,C(t).apply(this,arguments))).studyMetadata=Object(y.S)({invoke:function(){return I(P(e),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",b.a.getTagsUsingGET({studyId:this.props.studyId}));case 1:case"end":return e.stop()}},e,this)}))},onError:function(e){console.error("Error on getting study tags.",e)}}),e}return x(t,r["Component"]),E(t,[{key:"addHTMLDescription",value:function(e){return{__html:e}}},{key:"render",value:function(){var e="";if(this.props.isVirtualStudy)e=r.createElement("div",{dangerouslySetInnerHTML:this.addHTMLDescription(this.props.studyDescription)});else if(this.studyMetadata.isPending)e=r.createElement(S.a,{isLoading:!0});else if(this.studyMetadata.isComplete){var t=Object.keys(this.studyMetadata.result).length,n=r.createElement("div",{dangerouslySetInnerHTML:this.addHTMLDescription(this.props.studyDescription)});e=t>0?[n,r.createElement("br",null),r.createElement("div",{className:"studyTagsTooltip"}," ",r.createElement(v.JsonToTable,{json:this.studyMetadata.result}))]:n}else this.studyMetadata.isError&&(e="error");return e}}]),t}();A([p.observable],D.prototype,"studyMetadata",void 0),D=A([c.observer],D);var M=function(e){function t(){return _(this,t),O(this,C(t).apply(this,arguments))}return x(t,r["Component"]),E(t,[{key:"renderTooltip",value:function(){return r.createElement(y.c,{key:this.props.key,mouseEnterDelay:this.props.mouseEnterDelay,placement:this.props.placement,overlay:r.createElement(D,{studyDescription:this.props.studyDescription,studyId:this.props.studyId,isVirtualStudy:this.props.isVirtualStudy}),children:this.props.children})}},{key:"render",value:function(){return this.renderTooltip()}}]),t}(),j=M=A([c.observer],M),N=n(602);function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(e,t,n){return t&&F(e.prototype,t),n&&F(e,n),e}function V(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var W=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":H(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},K=Object.assign(Object.assign({},o),{Level:function(e){return o["Level".concat(e)]}}),$=function(e){function t(){var e;return G(this,t),(e=V(this,z(t).apply(this,arguments))).renderCancerType=function(t){var n,o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=e.logic.getDepth(t),u=e.view.getChildCancerTypes(t),c=e.view.getChildCancerStudies(t),p=e.logic.cancerTypeListView.getDescendantCancerStudies(t).map(function(e){return e.studyId});if(t!=e.rootCancerType){var d=a()(K.CancerType,K.Level(s));3===s&&(o=r.createElement(l.a,{className:K.indentArrow,name:"long-arrow-right"})),n=r.createElement("li",{className:d},r.createElement(Q,{view:e.view,node:t},o,r.createElement("span",null,t.name),!e.store.forDownloadTab&&r.createElement("span",{className:K.SelectAll},f.a.intersection(p,e.store.selectableSelectedStudyIds).length?"Deselect All":"Select All")))}var h=a()(K.StudyList,K.Level(s));return r.createElement("ul",{key:i,className:h},n,c.map(e.renderCancerStudy),u.map(e.renderCancerType))},e.renderCancerStudy=function(t,n){var o=a()(K.Study),i=t.studyId in e.store.getOverlappingStudiesMap,s=i?r.createElement(y.c,{mouseEnterDelay:0,placement:"top",overlay:r.createElement("div",null,"This study has overlapping data with another selected study.")},r.createElement("i",{className:"fa fa-exclamation-triangle"})):null,l=f.a.includes(e.store.selectableSelectedStudyIds,t.studyId)&&e.store.isMixedReferenceGenome,u=l?r.createElement(y.c,{mouseEnterDelay:0,placement:"top",overlay:r.createElement("div",null,"You are combining studies with molecular data based on both GRCh37/hg19 and GRCh38/hg38. This is not fully supported yet. Please double check your findings")},r.createElement("span",null,r.createElement("i",{className:"fa fa-exclamation-triangle"})," ",Object(N.b)(t.referenceGenome))):null;return r.createElement("li",{key:n,className:o,"data-test":e.store.isVirtualStudy(t.studyId)?"VirtualStudySelect":"StudySelect"},r.createElement(c.Observer,null,function(){var n,o=a()((L(n={},K.StudyName,!0),L(n,"overlappingStudy",i||l),L(n,K.DeletedStudy,e.store.isDeletedVirtualStudy(t.studyId)),L(n,"studyItem_".concat(t.studyId),!0),n));return r.createElement(Q,{view:e.view,node:t},r.createElement("span",{className:o},t.name,s,u))}),r.createElement(c.Observer,null,function(){return r.createElement("div",{className:K.StudyMeta},!e.store.isDeletedVirtualStudy(t.studyId)&&e.renderSamples(t),e.renderStudyLinks(t))}))},e.renderSamples=function(e){return r.createElement("span",{className:K.StudySamples},"".concat(e.allSampleCount," samples"))},e.renderStudyLinks=function(t){if(e.store.isDeletedVirtualStudy(t.studyId))return r.createElement(y.c,{mouseEnterDelay:0,placement:"top",overlay:r.createElement("div",{className:K.tooltip},"Restore study"),children:r.createElement("button",{className:"btn btn-default btn-xs",onClick:function(){return e.store.restoreVirtualStudy(t.studyId)},style:{lineHeight:"80%"},"data-test":"virtualStudyRestore"},"Restore")});var n=[{icon:"info-circle",tooltip:""}];return e.store.isVirtualStudy(t.studyId)?n.push({icon:"trash",tooltip:"Delete this virtual study.",onClick:function(){return e.store.deleteVirtualStudy(t.studyId)}}):n.push({icon:"book",onClick:t.pmid&&Object(h.x)(t.pmid),tooltip:t.pmid&&"PubMed"}),r.createElement("span",{className:K.StudyLinks},n.map(function(n,o){var i,s=r.createElement(l.a,{key:o,name:n.icon,className:a()((i={},L(i,K.icon,!0),L(i,K.iconWithTooltip,!!n.tooltip),L(i,K.trashIcon,"trash"===n.icon),L(i,K.infoCircleIcon,"info-circle"===n.icon),i))});if(n.onClick){var u={key:o};"string"==typeof n.onClick?(u.href=n.onClick,u.target="_blank"):u.onClick=n.onClick,s=r.createElement("a",u,s)}if(n.tooltip){var c=r.createElement("div",{className:K.tooltip,dangerouslySetInnerHTML:{__html:n.tooltip}});s=r.createElement(y.c,{key:o,mouseEnterDelay:0,placement:"top",overlay:c,children:s})}return"info-circle"===n.icon&&(s=r.createElement(j,{key:o,studyDescription:e.store.isVirtualStudy(t.studyId)?t.description.replace(/\r?\n/g,"<br />"):t.description,studyId:t.studyId,isVirtualStudy:e.store.isVirtualStudy(t.studyId),mouseEnterDelay:0,placement:"top"},r.createElement("a",null,s))),s}),t.studyId&&r.createElement(y.c,{mouseEnterDelay:0,placement:"top",overlay:r.createElement("div",{className:K.tooltip},"View clinical and genomic data of this study")},r.createElement("span",null,r.createElement(g.a,{studyId:t.studyId,className:a()(K.summaryIcon,"ci ci-pie-chart")}))))},e}return q(t,m["d"]),B(t,[{key:"componentDidMount",value:function(){this.props.showSelectedStudiesOnly&&(this._view=this.view)}},{key:"render",value:function(){var e=this,t=this.renderCancerType(this.rootCancerType);return this.props.showSelectedStudiesOnly?r.createElement("div",{className:K.SelectedStudyList},r.createElement("span",{className:K.deselectAll,onClick:function(){e.view.onCheck(e.store.treeData.rootCancerType,!1),e.store.showSelectedStudiesOnly=!1}},"Deselect all"),t):t}},{key:"view",get:function(){return this._view||(this.props.showSelectedStudiesOnly?this.logic.selectedStudiesView:this.logic.mainView)}},{key:"logic",get:function(){return this.store.studyListLogic}},{key:"rootCancerType",get:function(){return this.store.treeData.rootCancerType}}]),t}();$=W([c.observer],$);t.a=$;var Q=function(e){function t(){return G(this,t),V(this,z(t).apply(this,arguments))}return q(t,m["d"]),B(t,[{key:"render",value:function(){var e=this;return r.createElement(u.a,R({},this.checkboxProps,{onChange:function(t){e.props.view.onCheck(e.props.node,t.target.checked)}}),this.props.children)}},{key:"checkboxProps",get:function(){return this.props.view.getCheckboxProps(this.props.node)}}]),t}();W([p.computed.struct],Q.prototype,"checkboxProps",null),Q=W([c.observer],Q)},,,,,,,,,,function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__1Fjw6",framedImage:"styles-module__framedImage__3hqyk","tables-container":"styles-module__tables-container__1wDsF",downloadCopyTable:"styles-module__downloadCopyTable__1jMBv",noAlterationSpan:"styles-module__noAlterationSpan__1jy3D",notProfiledSpan:"styles-module__notProfiledSpan__2eZFJ",alterationSpan:"styles-module__alterationSpan__1oylB",tooltip:"styles-module__tooltip__2f1I5",infoIcon:"styles-module__infoIcon__2ZQ2T"}},function(e,t,n){},function(e,t,n){},,,,,,function(e,t,n){"use strict";(function(e){var r=n(0),o=n(7),i=n(9),a=n.n(i),s=(n(1175),n(3)),l=n(101),u=n(2),c=n(852),p=n(8),d=n(1176),f=n(6),h=n(688),m=n(871),y=n(579),g=n(65),v=n(15),b=n(1402),S=n(838),_=n(4),w=n.n(_),E=n(602);function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var k=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":T(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},A=function(t){function n(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(e=C(this,P(n).apply(this,arguments))).singleStudyUI=Object(y.a)({await:function(){return[e.props.store.queriedStudies,e.props.store.sampleLists,e.props.store.samples,e.props.store.patients]},render:function(){var t=e.props.store.sampleLists.result.length>0?r.createElement("span",null,e.props.store.sampleLists.result[0].name):r.createElement("span",null,"User-defined Patient List");return r.createElement("div",null,r.createElement("h3",null,r.createElement("a",{href:Object(v.b)("study",{id:e.props.store.queriedStudies.result.map(function(e){return e.studyId}).join(",")}),target:"_blank"},e.props.store.queriedStudies.result[0].name)),t,"(",e.studyPageFilteredCasesLink,") -",Object(m.b)(e.props.store.hugoGeneSymbols),"",r.createElement(s.c,{overlay:"Edit genes or OQL"},r.createElement("a",{"data-test":"oqlQuickEditButton",onClick:e.props.onToggleOQLEditUIVisibility},r.createElement("i",{className:"fa fa-pencil"}))))}}),e.multipleStudyUI=Object(y.a)({await:function(){return[e.props.store.samples,e.props.store.patients,e.props.store.queriedStudies,e.props.store.sampleLists]},render:function(){return r.createElement("div",null,r.createElement("h3",null,r.createElement("a",{href:Object(v.b)("study",{id:e.props.store.queriedStudies.result.map(function(e){return e.studyId}).join(",")}),target:"_blank"},"Combined Study (",w.a.sumBy(e.props.store.queriedStudies.result,function(e){return e.allSampleCount})," ","samples)"),e.props.store.isMixedReferenceGenome&&Object(E.d)()),r.createElement("span",null,"Querying ",e.studyPageFilteredCasesLink," in"," ",e.props.store.queriedStudies.result.length," studies -",Object(m.b)(e.props.store.hugoGeneSymbols),"",r.createElement(s.c,{placement:"bottom",overlay:e.studyList,destroyTooltipOnHide:!0},r.createElement("i",{className:"fa fa-info-circle"}))))}}),e.cohortAndGeneSummary=Object(y.a)({await:function(){return[e.singleStudyUI,e.multipleStudyUI,e.props.store.queriedStudies]},render:function(){return 1===e.props.store.queriedStudies.result.length?e.singleStudyUI.component:e.multipleStudyUI.component}}),e.alterationSummary=Object(y.a)({await:function(){return[e.props.store.samples,e.props.store.patients,e.props.store.alteredSampleKeys,e.props.store.alteredPatientKeys]},render:function(){return Object(m.a)(e.props.store.samples.result.length,e.props.store.patients.result.length,e.props.store.alteredSampleKeys.result.length,e.props.store.alteredPatientKeys.result.length,e.props.store.hugoGeneSymbols.length)}}),e}var o,i,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(n,r["Component"]),o=n,(i=[{key:"toggleQueryFormVisibility",value:function(){this.props.onToggleQueryFormVisibility(this.props.store.queryFormVisible),this.props.store.modifyQueryParams&&!0===this.props.store.queryFormVisible&&(this.props.store.modifyQueryParams=void 0),this.props.store.queryFormVisible=!this.props.store.queryFormVisible}},{key:"closeQueryForm",value:function(){!0===this.props.store.queryFormVisible&&(this.toggleQueryFormVisibility(),e(document).scrollTop(0))}},{key:"onSubmit",value:function(){this.closeQueryForm(),Object(g.b)()("send","event","resultsView","query modified")}},{key:"render",value:function(){var e=this;if(this.cohortAndGeneSummary.isError||this.alterationSummary.isError)return this.isQueryOrGeneInvalid?this.queryForm:null;var t=this.cohortAndGeneSummary.isComplete&&this.alterationSummary.isComplete;return r.createElement("div",null,r.createElement("div",{className:"query-summary"},r.createElement("div",{className:"query-summary__leftItems"},!this.isQueryOrGeneInvalid&&r.createElement("div",null,r.createElement("button",{id:"modifyQueryBtn",onClick:this.toggleQueryFormVisibility,className:a()("btn btn-primary",{disabled:!t})},this.queryFormVisible?"Cancel Modify Query":"Modify Query"),r.createElement(s.c,{trigger:["click"],placement:"bottomRight",overlay:r.createElement(b.a,{store:this.props.store}),visible:this.props.store.resultsPageSettingsVisible,onVisibleChange:function(t){e.props.store.resultsPageSettingsVisible=!!t},onPopupAlign:function(e){return Object(s.V)(e,"22px")}},r.createElement("button",{"data-test":"GlobalSettingsButton",style:{marginLeft:5},className:"btn btn-primary"},r.createElement("i",{className:"fa fa-sliders fa-lg"})))),r.createElement(l.a,{isLoading:!t,small:!0}),t&&this.cohortAndGeneSummary.component),r.createElement("div",{className:"query-summary__rightItems"},r.createElement("div",{className:"query-summary__alterationData"},t&&r.createElement("strong",null,this.alterationSummary.component)),r.createElement(d.a,{sessionEnabled:f.a.sessionServiceIsEnabled(),bitlyAccessToken:f.b.serverConfig.bitly_access_token,urlWrapper:this.props.store.urlWrapper}))),this.queryFormVisible&&this.queryForm)}},{key:"queryFormVisible",get:function(){return this.props.store.queryFormVisible||this.isQueryOrGeneInvalid}},{key:"studyPageFilteredCasesLink",get:function(){var e=this;return r.createElement("a",{onClick:function(){Object(m.d)(e.props.store.queriedStudies.result,e.props.store.samples.result,e.props.store.queriedVirtualStudies.result.length>0,e.props.store.sampleLists.result)}},Object(m.c)(this.props.store.samples.result,this.props.store.patients.result))}},{key:"studyList",get:function(){return r.createElement("div",{className:"cbioportal-frontend"},r.createElement("ul",{className:"list-unstyled",style:{marginBottom:0}},this.props.store.queriedStudies.result.map(function(e){return r.createElement("li",null,r.createElement(h.a,{studyId:e.studyId},e.name))})))}},{key:"queryForm",get:function(){var e=this;return r.createElement("div",{style:{margin:"10px -20px 0 -20px"}},r.createElement(c.a,{onSubmit:this.onSubmit,forkedMode:!1,showQuickSearchTab:!1,showDownloadTab:!1,showAlerts:!0,modifyQueryParams:this.props.store.modifyQueryParams,getQueryStore:function(){return Object(S.a)(e.props.store.urlWrapper.query,e.props.store.urlWrapper,!1)}}))}},{key:"isQueryOrGeneInvalid",get:function(){return this.props.store.genesInvalid||this.props.store.isQueryInvalid}}])&&O(o.prototype,i),u&&O(o,u),n}();k([p.default,u.action],A.prototype,"toggleQueryFormVisibility",null),k([u.computed],A.prototype,"queryFormVisible",null),k([u.computed],A.prototype,"studyPageFilteredCasesLink",null),k([p.default,u.action],A.prototype,"closeQueryForm",null),k([p.default],A.prototype,"onSubmit",null),k([u.computed],A.prototype,"queryForm",null),k([u.computed],A.prototype,"isQueryOrGeneInvalid",null),A=k([o.observer],A),t.a=A}).call(this,n(11))},function(e,t,n){"use strict";t.__esModule=!0,t.default=t.EXITING=t.ENTERED=t.ENTERING=t.EXITED=t.UNMOUNTED=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(1)),o=s(n(0)),i=s(n(21)),a=n(763);n(1036);function s(e){return e&&e.__esModule?e:{default:e}}var l="unmounted";t.UNMOUNTED=l;var u="exited";t.EXITED=u;var c="entering";t.ENTERING=c;var p="entered";t.ENTERED=p;t.EXITING="exiting";var d=function(e){var t,n;function r(t,n){var r;r=e.call(this,t,n)||this;var o,i=n.transitionGroup,a=i&&!i.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?a?(o=u,r.appearStatus=c):o=p:o=t.unmountOnExit||t.mountOnEnter?l:u,r.state={status:o},r.nextCallback=null,r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.getChildContext=function(){return{transitionGroup:null}},r.getDerivedStateFromProps=function(e,t){return e.in&&t.status===l?{status:u}:null},a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==c&&n!==p&&(t=c):n!==c&&n!==p||(t="exiting")}this.updateStatus(!1,t)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},a.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t){this.cancelNextCallback();var n=i.default.findDOMNode(this);t===c?this.performEnter(n,e):this.performExit(n)}else this.props.unmountOnExit&&this.state.status===u&&this.setState({status:l})},a.performEnter=function(e,t){var n=this,r=this.props.enter,o=this.context.transitionGroup?this.context.transitionGroup.isMounting:t,i=this.getTimeouts(),a=o?i.appear:i.enter;t||r?(this.props.onEnter(e,o),this.safeSetState({status:c},function(){n.props.onEntering(e,o),n.onTransitionEnd(e,a,function(){n.safeSetState({status:p},function(){n.props.onEntered(e,o)})})})):this.safeSetState({status:p},function(){n.props.onEntered(e)})},a.performExit=function(e){var t=this,n=this.props.exit,r=this.getTimeouts();n?(this.props.onExit(e),this.safeSetState({status:"exiting"},function(){t.props.onExiting(e),t.onTransitionEnd(e,r.exit,function(){t.safeSetState({status:u},function(){t.props.onExited(e)})})})):this.safeSetState({status:u},function(){t.props.onExited(e)})},a.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},a.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},a.onTransitionEnd=function(e,t,n){this.setNextCallback(n);var r=null==t&&!this.props.addEndListener;e&&!r?(this.props.addEndListener&&this.props.addEndListener(e,this.nextCallback),null!=t&&setTimeout(this.nextCallback,t)):setTimeout(this.nextCallback,0)},a.render=function(){var e=this.state.status;if(e===l)return null;var t=this.props,n=t.children,r=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(t,["children"]);if(delete r.in,delete r.mountOnEnter,delete r.unmountOnExit,delete r.appear,delete r.enter,delete r.exit,delete r.timeout,delete r.addEndListener,delete r.onEnter,delete r.onEntering,delete r.onEntered,delete r.onExit,delete r.onExiting,delete r.onExited,"function"==typeof n)return n(e,r);var i=o.default.Children.only(n);return o.default.cloneElement(i,r)},r}(o.default.Component);function f(){}d.contextTypes={transitionGroup:r.object},d.childContextTypes={transitionGroup:function(){}},d.propTypes={},d.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:f,onEntering:f,onEntered:f,onExit:f,onExiting:f,onExited:f},d.UNMOUNTED=0,d.EXITED=1,d.ENTERING=2,d.ENTERED=3,d.EXITING=4;var h=(0,a.polyfill)(d);t.default=h},function(e,t,n){"use strict";t.__esModule=!0,t.classNamesShape=t.timeoutsShape=void 0;var r;(r=n(1))&&r.__esModule;t.timeoutsShape=null;t.classNamesShape=null},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=s(n(1)),o=s(n(0)),i=n(763),a=n(1189);function s(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var c=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},p=function(e){var t,n;function r(t,n){var r,o=(r=e.call(this,t,n)||this).handleExited.bind(u(u(r)));return r.state={handleExited:o,firstRender:!0},r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.getChildContext=function(){return{transitionGroup:{isMounting:!this.appeared}}},i.componentDidMount=function(){this.appeared=!0,this.mounted=!0},i.componentWillUnmount=function(){this.mounted=!1},r.getDerivedStateFromProps=function(e,t){var n=t.children,r=t.handleExited;return{children:t.firstRender?(0,a.getInitialChildMapping)(e,r):(0,a.getNextChildMapping)(e,n,r),firstRender:!1}},i.handleExited=function(e,t){var n=(0,a.getChildMapping)(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState(function(t){var n=l({},t.children);return delete n[e.key],{children:n}}))},i.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,["component","childFactory"]),i=c(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?i:o.default.createElement(t,r,i)},r}(o.default.Component);p.childContextTypes={transitionGroup:r.default.object.isRequired},p.propTypes={},p.defaultProps={component:"div",childFactory:function(e){return e}};var d=(0,i.polyfill)(p);t.default=d,e.exports=t.default},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}n.r(t);var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(9),p=n.n(c),d=n(1184),f=n(21);n.d(t,"Bounce",function(){return I}),n.d(t,"Flip",function(){return j}),n.d(t,"Slide",function(){return D}),n.d(t,"ToastContainer",function(){return N}),n.d(t,"ToastPosition",function(){return h}),n.d(t,"ToastType",function(){return m}),n.d(t,"Zoom",function(){return M}),n.d(t,"cssTransition",function(){return C}),n.d(t,"toast",function(){return $});var h={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},m={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},y={SHOW:0,CLEAR:1,DID_MOUNT:2,WILL_UNMOUNT:3,ON_CHANGE:4},g=function(){},v="Toastify";function b(e){return"number"==typeof e&&!isNaN(e)&&e>0}function S(e){return Object.keys(e).map(function(t){return e[t]})}var _=!("undefined"==typeof window||!window.document||!window.document.createElement);var w,E=((w=function(e,t,n){var r=e[t];return!1===r||b(r)?null:new Error(n+" expect "+t+" \n      to be a valid Number > 0 or equal to false. "+r+" given.")}).isRequired=function(e,t,n){if(void 0===e[t])return new Error("The prop "+t+" is marked as required in \n      "+n+", but its value is undefined.");w(e,t,n)},w),O={list:new Map,emitQueue:new Map,on:function(e,t){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(t),this},off:function(e){return this.list.delete(e),this},cancelEmit:function(e){var t=this.emitQueue.get(e);return t&&(t.forEach(function(e){return clearTimeout(e)}),this.emitQueue.delete(e)),this},emit:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];this.list.has(e)&&this.list.get(e).forEach(function(n){var o=setTimeout(function(){n.apply(void 0,r)},0);t.emitQueue.has(e)||t.emitQueue.set(e,[]),t.emitQueue.get(e).push(o)})}};function C(e){var t=e.enter,n=e.exit,i=e.duration,a=void 0===i?750:i,l=e.appendPosition,u=void 0!==l&&l;return function(e){var i,l,c=e.children,p=e.position,f=e.preventExitTransition,h=o(e,["children","position","preventExitTransition"]),m=u?t+"--"+p:t,y=u?n+"--"+p:n;Array.isArray(a)&&2===a.length?(i=a[0],l=a[1]):i=l=a;return s.a.createElement(d.Transition,r({},h,{timeout:f?0:{enter:i,exit:l},onEnter:function(e){e.classList.add(m),e.style.animationFillMode="forwards",e.style.animationDuration=.001*i+"s"},onEntered:function(e){e.classList.remove(m),e.style.cssText=""},onExit:f?g:function(e){e.classList.add(y),e.style.animationFillMode="forwards",e.style.animationDuration=.001*l+"s"}}),c)}}function P(e){var t,n,o=e.delay,i=e.isRunning,a=e.closeToast,l=e.type,u=e.hide,c=e.className,d=e.style,f=e.controlledProgress,h=e.progress,m=e.rtl,y=r({},d,{animationDuration:o+"ms",animationPlayState:i?"running":"paused",opacity:u?0:1,transform:f?"scaleX("+h+")":null}),g=p()(v+"__progress-bar",f?v+"__progress-bar--controlled":v+"__progress-bar--animated",v+"__progress-bar--"+l,((t={})[v+"__progress-bar--rtl"]=m,t),c),b=((n={})[f&&h>=1?"onTransitionEnd":"onAnimationEnd"]=f&&h<1?null:a,n);return s.a.createElement("div",r({className:g,style:y},b))}function x(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}P.propTypes={delay:E.isRequired,isRunning:u.a.bool.isRequired,closeToast:u.a.func.isRequired,rtl:u.a.bool.isRequired,type:u.a.string,hide:u.a.bool,className:u.a.oneOfType([u.a.string,u.a.object]),progress:u.a.number,controlledProgress:u.a.bool},P.defaultProps={type:m.DEFAULT,hide:!1};var T=_&&/(msie|trident)/i.test(navigator.userAgent),k=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).state={isRunning:!0,preventExitTransition:!1},t.flag={canCloseOnClick:!0,canDrag:!1},t.drag={start:0,x:0,y:0,deltaX:0,removalDistance:0},t.boundingRect=null,t.ref=null,t.pauseToast=function(){t.props.autoClose&&t.setState({isRunning:!1})},t.playToast=function(){t.props.autoClose&&t.setState({isRunning:!0})},t.onDragStart=function(e){t.flag.canCloseOnClick=!0,t.flag.canDrag=!0,t.boundingRect=t.ref.getBoundingClientRect(),t.ref.style.transition="",t.drag.start=t.drag.x=x(e.nativeEvent),t.drag.removalDistance=t.ref.offsetWidth*(t.props.draggablePercent/100)},t.onDragMove=function(e){t.flag.canDrag&&(t.state.isRunning&&t.pauseToast(),t.drag.x=x(e),t.drag.deltaX=t.drag.x-t.drag.start,t.drag.y=function(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}(e),t.drag.start!==t.drag.x&&(t.flag.canCloseOnClick=!1),t.ref.style.transform="translateX("+t.drag.deltaX+"px)",t.ref.style.opacity=1-Math.abs(t.drag.deltaX/t.drag.removalDistance))},t.onDragEnd=function(e){if(t.flag.canDrag){if(t.flag.canDrag=!1,Math.abs(t.drag.deltaX)>t.drag.removalDistance)return void t.setState({preventExitTransition:!0},t.props.closeToast);t.ref.style.transition="transform 0.2s, opacity 0.2s",t.ref.style.transform="translateX(0)",t.ref.style.opacity=1}},t.onDragTransitionEnd=function(){if(t.boundingRect){var e=t.boundingRect,n=e.top,r=e.bottom,o=e.left,i=e.right;t.props.pauseOnHover&&t.drag.x>=o&&t.drag.x<=i&&t.drag.y>=n&&t.drag.y<=r?t.pauseToast():t.playToast()}},t.onExitTransitionEnd=function(){if(T)t.props.onExited();else{var e=t.ref.scrollHeight,n=t.ref.style;requestAnimationFrame(function(){n.minHeight="initial",n.height=e+"px",n.transition="all 0.4s ",requestAnimationFrame(function(){n.height=0,n.padding=0,n.margin=0}),setTimeout(function(){return t.props.onExited()},400)})}},t}i(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.onOpen(this.props.children.props),this.props.draggable&&this.bindDragEvents(),this.props.pauseOnFocusLoss&&this.bindFocusEvents()},n.componentDidUpdate=function(e){e.draggable!==this.props.draggable&&(this.props.draggable?this.bindDragEvents():this.unbindDragEvents()),e.pauseOnFocusLoss!==this.props.pauseOnFocusLoss&&(this.props.pauseOnFocusLoss?this.bindFocusEvents():this.unbindFocusEvents())},n.componentWillUnmount=function(){this.props.onClose(this.props.children.props),this.props.draggable&&this.unbindDragEvents(),this.props.pauseOnFocusLoss&&this.unbindFocusEvents()},n.bindFocusEvents=function(){window.addEventListener("focus",this.playToast),window.addEventListener("blur",this.pauseToast)},n.unbindFocusEvents=function(){window.removeEventListener("focus",this.playToast),window.removeEventListener("blur",this.pauseToast)},n.bindDragEvents=function(){document.addEventListener("mousemove",this.onDragMove),document.addEventListener("mouseup",this.onDragEnd),document.addEventListener("touchmove",this.onDragMove),document.addEventListener("touchend",this.onDragEnd)},n.unbindDragEvents=function(){document.removeEventListener("mousemove",this.onDragMove),document.removeEventListener("mouseup",this.onDragEnd),document.removeEventListener("touchmove",this.onDragMove),document.removeEventListener("touchend",this.onDragEnd)},n.render=function(){var e,t=this,n=this.props,o=n.closeButton,i=n.children,a=n.autoClose,l=n.pauseOnHover,u=n.onClick,c=n.closeOnClick,d=n.type,f=n.hideProgressBar,h=n.closeToast,m=n.transition,y=n.position,g=n.className,b=n.bodyClassName,S=n.progressClassName,_=n.progressStyle,w=n.updateId,E=n.role,O=n.progress,C=n.rtl,x={className:p()(v+"__toast",v+"__toast--"+d,(e={},e[v+"__toast--rtl"]=C,e),g)};a&&l&&(x.onMouseEnter=this.pauseToast,x.onMouseLeave=this.playToast),c&&(x.onClick=function(e){u&&u(e),t.flag.canCloseOnClick&&h()});var T=parseFloat(O)===O;return s.a.createElement(m,{in:this.props.in,appear:!0,onExited:this.onExitTransitionEnd,position:y,preventExitTransition:this.state.preventExitTransition},s.a.createElement("div",r({onClick:u},x,{ref:function(e){return t.ref=e},onMouseDown:this.onDragStart,onTouchStart:this.onDragStart,onMouseUp:this.onDragTransitionEnd,onTouchEnd:this.onDragTransitionEnd}),s.a.createElement("div",r({},this.props.in&&{role:E},{className:p()(v+"__toast-body",b)}),i),o&&o,(a||T)&&s.a.createElement(P,r({},w&&!T?{key:"pb-"+w}:{},{rtl:C,delay:a,isRunning:this.state.isRunning,closeToast:h,hide:f,type:d,style:_,className:S,controlledProgress:T,progress:O}))))},t}(a.Component);function A(e){var t=e.closeToast,n=e.type,r=e.ariaLabel;return s.a.createElement("button",{className:v+"__close-button "+v+"__close-button--"+n,type:"button",onClick:function(e){e.stopPropagation(),t(e)},"aria-label":r},"")}k.propTypes={closeButton:u.a.oneOfType([u.a.node,u.a.bool]).isRequired,autoClose:E.isRequired,children:u.a.node.isRequired,closeToast:u.a.func.isRequired,position:u.a.oneOf(S(h)).isRequired,pauseOnHover:u.a.bool.isRequired,pauseOnFocusLoss:u.a.bool.isRequired,closeOnClick:u.a.bool.isRequired,transition:u.a.func.isRequired,rtl:u.a.bool.isRequired,hideProgressBar:u.a.bool.isRequired,draggable:u.a.bool.isRequired,draggablePercent:u.a.number.isRequired,in:u.a.bool,onExited:u.a.func,onOpen:u.a.func,onClose:u.a.func,type:u.a.oneOf(S(m)),className:u.a.oneOfType([u.a.string,u.a.object]),bodyClassName:u.a.oneOfType([u.a.string,u.a.object]),progressClassName:u.a.oneOfType([u.a.string,u.a.object]),progressStyle:u.a.object,progress:u.a.number,updateId:u.a.oneOfType([u.a.string,u.a.number]),ariaLabel:u.a.string,containerId:u.a.oneOfType([u.a.string,u.a.number]),role:u.a.string},k.defaultProps={type:m.DEFAULT,in:!0,onOpen:g,onClose:g,className:null,bodyClassName:null,progressClassName:null,updateId:null},A.propTypes={closeToast:u.a.func,arialLabel:u.a.string},A.defaultProps={ariaLabel:"close"};var I=C({enter:v+"__bounce-enter",exit:v+"__bounce-exit",appendPosition:!0}),D=C({enter:v+"__slide-enter",exit:v+"__slide-exit",duration:[450,750],appendPosition:!0}),M=C({enter:v+"__zoom-enter",exit:v+"__zoom-exit"}),j=C({enter:v+"__flip-enter",exit:v+"__flip-exit"}),N=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).state={toast:[]},t.toastKey=1,t.collection={},t.isToastActive=function(e){return-1!==t.state.toast.indexOf(e)},t}i(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;O.cancelEmit(y.WILL_UNMOUNT).on(y.SHOW,function(t,n){return e.ref?e.buildToast(t,n):null}).on(y.CLEAR,function(t){return e.ref?null==t?e.clear():e.removeToast(t):null}).emit(y.DID_MOUNT,this)},n.componentWillUnmount=function(){O.emit(y.WILL_UNMOUNT,this)},n.removeToast=function(e){this.setState({toast:this.state.toast.filter(function(t){return t!==e})},this.dispatchChange)},n.dispatchChange=function(){O.emit(y.ON_CHANGE,this.state.toast.length,this.props.containerId)},n.makeCloseButton=function(e,t,n){var r=this,o=this.props.closeButton;return Object(a.isValidElement)(e)||!1===e?o=e:!0===e&&(o=this.props.closeButton&&"boolean"!=typeof this.props.closeButton?this.props.closeButton:s.a.createElement(A,null)),!1!==o&&Object(a.cloneElement)(o,{closeToast:function(){return r.removeToast(t)},type:n})},n.getAutoCloseDelay=function(e){return!1===e||b(e)?e:this.props.autoClose},n.canBeRendered=function(e){return Object(a.isValidElement)(e)||"string"==typeof e||"number"==typeof e||"function"==typeof e},n.parseClassName=function(e){return"string"==typeof e?e:null!==e&&"object"==typeof e&&"toString"in e?e.toString():null},n.belongToContainer=function(e){return e.containerId===this.props.containerId},n.buildToast=function(e,t){var n=this,r=t.delay,i=o(t,["delay"]);if(!this.canBeRendered(e))throw new Error("The element you provided cannot be rendered. You provided an element of type "+typeof e);var s=i.toastId,l=i.updateId;if(!(this.props.enableMultiContainer&&!this.belongToContainer(i)||this.isToastActive(s)&&null==l)){var u=function(){return n.removeToast(s)},c={id:s,key:i.key||this.toastKey++,type:i.type,closeToast:u,updateId:i.updateId,rtl:this.props.rtl,position:i.position||this.props.position,transition:i.transition||this.props.transition,className:this.parseClassName(i.className||this.props.toastClassName),bodyClassName:this.parseClassName(i.bodyClassName||this.props.bodyClassName),onClick:i.onClick||this.props.onClick,closeButton:this.makeCloseButton(i.closeButton,s,i.type),pauseOnHover:"boolean"==typeof i.pauseOnHover?i.pauseOnHover:this.props.pauseOnHover,pauseOnFocusLoss:"boolean"==typeof i.pauseOnFocusLoss?i.pauseOnFocusLoss:this.props.pauseOnFocusLoss,draggable:"boolean"==typeof i.draggable?i.draggable:this.props.draggable,draggablePercent:"number"!=typeof i.draggablePercent||isNaN(i.draggablePercent)?this.props.draggablePercent:i.draggablePercent,closeOnClick:"boolean"==typeof i.closeOnClick?i.closeOnClick:this.props.closeOnClick,progressClassName:this.parseClassName(i.progressClassName||this.props.progressClassName),progressStyle:this.props.progressStyle,autoClose:this.getAutoCloseDelay(i.autoClose),hideProgressBar:"boolean"==typeof i.hideProgressBar?i.hideProgressBar:this.props.hideProgressBar,progress:parseFloat(i.progress),role:"string"==typeof i.role?i.role:this.props.role};"function"==typeof i.onOpen&&(c.onOpen=i.onOpen),"function"==typeof i.onClose&&(c.onClose=i.onClose),Object(a.isValidElement)(e)&&"string"!=typeof e.type&&"number"!=typeof e.type?e=Object(a.cloneElement)(e,{closeToast:u}):"function"==typeof e&&(e=e({closeToast:u})),b(r)?setTimeout(function(){n.appendToast(c,e,i.staleToastId)},r):this.appendToast(c,e,i.staleToastId)}},n.appendToast=function(e,t,n){var o,i=e.id,a=e.updateId;this.collection=r({},this.collection,((o={})[i]={options:e,content:t,position:e.position},o)),this.setState({toast:(a?[].concat(this.state.toast):[].concat(this.state.toast,[i])).filter(function(e){return e!==n})},this.dispatchChange)},n.clear=function(){this.setState({toast:[]})},n.renderToast=function(){var e=this,t={},n=this.props,o=n.className,i=n.style;return(n.newestOnTop?Object.keys(this.collection).reverse():Object.keys(this.collection)).forEach(function(n){var o=e.collection[n],i=o.position,a=o.options,l=o.content;t[i]||(t[i]=[]),-1!==e.state.toast.indexOf(a.id)?t[i].push(s.a.createElement(k,r({},a,{isDocumentHidden:e.state.isDocumentHidden,key:"toast-"+a.key}),l)):(t[i].push(null),delete e.collection[n])}),Object.keys(t).map(function(n){var a,l=1===t[n].length&&null===t[n][0],u={className:p()(v+"__toast-container",v+"__toast-container--"+n,(a={},a[v+"__toast-container--rtl"]=e.props.rtl,a),e.parseClassName(o)),style:l?r({},i,{pointerEvents:"none"}):r({},i)};return s.a.createElement(d.TransitionGroup,r({},u,{key:"container-"+n}),t[n])})},n.render=function(){var e=this;return s.a.createElement("div",{ref:function(t){return e.ref=t},className:""+v},this.renderToast())},t}(a.Component);N.propTypes={position:u.a.oneOf(S(h)),autoClose:E,closeButton:u.a.oneOfType([u.a.node,u.a.bool]),hideProgressBar:u.a.bool,pauseOnHover:u.a.bool,closeOnClick:u.a.bool,newestOnTop:u.a.bool,className:u.a.oneOfType([u.a.string,u.a.object]),style:u.a.object,toastClassName:u.a.oneOfType([u.a.string,u.a.object]),bodyClassName:u.a.oneOfType([u.a.string,u.a.object]),progressClassName:u.a.oneOfType([u.a.string,u.a.object]),progressStyle:u.a.object,transition:u.a.func,rtl:u.a.bool,draggable:u.a.bool,draggablePercent:u.a.number,pauseOnFocusLoss:u.a.bool,enableMultiContainer:u.a.bool,containerId:u.a.oneOfType([u.a.string,u.a.number]),role:u.a.string,onClick:u.a.func},N.defaultProps={position:h.TOP_RIGHT,transition:I,rtl:!1,autoClose:5e3,hideProgressBar:!1,closeButton:s.a.createElement(A,null),pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,newestOnTop:!1,draggable:!0,draggablePercent:80,className:null,style:null,toastClassName:null,bodyClassName:null,progressClassName:null,progressStyle:null,role:"alert"};var R=new Map,L=null,G=null,F={},B=[],V=!1;function z(){return R.size>0}function q(e,t){var n=function(e){return z()?e?R.get(e):R.get(L):null}(t.containerId);if(!n)return null;var r=n.collection[e];return void 0===r?null:r}function U(e,t){return r({},e,{type:t,toastId:W(e)})}function H(){return(Math.random().toString(36)+Date.now().toString(36)).substr(2,10)}function W(e){return e&&("string"==typeof e.toastId||"number"==typeof e.toastId&&!isNaN(e.toastId))?e.toastId:H()}function K(e,t){return z()?O.emit(y.SHOW,e,t):(B.push({action:y.SHOW,content:e,options:t}),V&&_&&(V=!1,G=document.createElement("div"),document.body.appendChild(G),Object(f.render)(s.a.createElement(N,F),G))),t.toastId}var $=function(e,t){return K(e,U(t,t&&t.type||m.DEFAULT))},Q=function(e){m[e]!==m.DEFAULT&&($[m[e].toLowerCase()]=function(t,n){return K(t,U(n,n&&n.type||m[e]))})};for(var Y in m)Q(Y);$.warn=$.warning,$.dismiss=function(e){return void 0===e&&(e=null),z()&&O.emit(y.CLEAR,e)},$.isActive=function(e){var t=!1;return R.size>0&&R.forEach(function(n){n.isToastActive(e)&&(t=!0)}),t},$.update=function(e,t){void 0===t&&(t={}),setTimeout(function(){var n=q(e,t);if(n){var o=n.options,i=n.content,a=r({},o,{},t,{toastId:t.toastId||e});t.toastId&&t.toastId!==e?a.staleToastId=e:a.updateId=H();var s=void 0!==a.render?a.render:i;delete a.render,K(s,a)}},0)},$.done=function(e){$.update(e,{progress:1})},$.onChange=function(e){"function"==typeof e&&O.on(y.ON_CHANGE,e)},$.configure=function(e){V=!0,F=e},$.POSITION=h,$.TYPE=m,O.on(y.DID_MOUNT,function(e){L=e.props.containerId||e,R.set(L,e),B.forEach(function(e){O.emit(e.action,e.content,e.options)}),B=[]}).on(y.WILL_UNMOUNT,function(e){e?R.delete(e.props.containerId||e):R.clear(),0===R.size&&O.off(y.SHOW).off(y.CLEAR),_&&G&&document.body.removeChild(G)})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return x});var r=n(0),o=n(4),i=n(56),a=n(2),s=n(7),l=n(186),u=n.n(l),c=n(17),p=n(9),d=n.n(p),f=(n(728),n(755),n(1403)),h=n(859);function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var _=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":S(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},w={multiple:"Multiple Alterations",protExpressionLow:"Protein Low",protExpressionHigh:"Protein High",mrnaExpressionLow:"mRNA Low",mrnaExpressionHigh:"mRNA High",hetloss:"Shallow Deletion",homdel:"Deep Deletion",gain:"Gain",amp:"Amplification",fusion:"Fusion",mutated:"Mutation"},E={protein:"Protein data",expression:"mRNA data",cna:"CNA data",mutation:"Mutation data"},O={mutated:"#008000",amp:"#ff0000",homdel:"#0000ff",hetloss:"#8fd8d8",gain:"rgb(255,182,193)",fusion:"#8B00C9",mrnaExpressionHigh:"#FF989A",mrnaExpressionLow:"#529AC8",protExpressionHigh:"#FF989A",protExpressionLow:"#E0FFFF",multiple:"#666"},C=[{value:"studyId",label:"Cancer Study"},{value:"cancerType",label:"Cancer Type"},{value:"cancerTypeDetailed",label:"Cancer Type Detailed"}];function P(e,t){return e/t*100}var x=function(t){function n(e){var t,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),r=this,(t=!(o=g(n).call(this,e))||"object"!==S(o)&&"function"!=typeof o?v(r):o).totalCasesMinDefaultValue=10,t.tempAltCasesInputValue=0,t.tempTotalCasesInputValue=t.totalCasesMin,t.pngAnchor="",t.pdf={anchor:"",width:0,height:0},t.showControls=!0,t.hideGenomicAlterations=!1,t.yAxis="alt-freq",t.xAxis="y-axis",t.altCasesValue=0,t.totalCasesValue=t.totalCasesMin,t.tempTotalCasesValue=t.totalCasesMin,t.tempAltCasesValue=0,t.viewCountsByCancerSubType=!1,t.handleYAxisChange=t.handleYAxisChange.bind(v(t)),t.handleXAxisChange=t.handleXAxisChange.bind(v(t)),t.handleGenomicCheckboxChange=t.handleGenomicCheckboxChange.bind(v(t)),t.handleCancerTypeCheckboxChange=t.handleCancerTypeCheckboxChange.bind(v(t)),t.handleAltSliderChange=t.handleAltSliderChange.bind(v(t)),t.handleTotalSliderChange=t.handleTotalSliderChange.bind(v(t)),t.handleAltSliderChangeComplete=t.handleAltSliderChangeComplete.bind(v(t)),t.handleTotalSliderChangeComplete=t.handleTotalSliderChangeComplete.bind(v(t)),t.handleAltInputChange=t.handleAltInputChange.bind(v(t)),t.handleAltInputKeyPress=t.handleAltInputKeyPress.bind(v(t)),t.handleTotalInputChange=t.handleTotalInputChange.bind(v(t)),t.handleTotalInputKeyPress=t.handleTotalInputKeyPress.bind(v(t)),t.setPngAnchor=t.setPngAnchor.bind(v(t)),t}var a,s,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(n,r["Component"]),a=n,(s=[{key:"componentDidMount",value:function(){this.initializeSliderValue()}},{key:"getYValue",value:function(e,t){return"abs-count"===this.yAxis?e:e/t*100}},{key:"determineSorterAndDirection",value:function(){var e,t,n=this;return"x-axis"===this.xAxis?(e=function(e){return e},t="asc"):(e="abs-count"===this.yAxis?function(e){return n.countsData[e].alteredSampleCount}:function(e){var t=n.countsData[e];return t.alteredSampleCount/t.profiledSampleTotal},t="desc"),{sorter:e,dir:t}}},{key:"transformLabel",value:function(e){return this.props.labelTransformer?this.props.labelTransformer(e):e}},{key:"handleYAxisChange",value:function(e){this.yAxis=e.target.value,this.altCasesValue=0,this.handleAltSliderChange(0)}},{key:"handleXAxisChange",value:function(e){this.xAxis=e.target.value}},{key:"handleCancerTypeCheckboxChange",value:function(){this.viewCountsByCancerSubType=!1===this.viewCountsByCancerSubType}},{key:"handleGenomicCheckboxChange",value:function(){this.hideGenomicAlterations=!this.hideGenomicAlterations}},{key:"handleAltSliderChange",value:function(e){this.tempAltCasesValue=e,this.tempAltCasesInputValue=e}},{key:"handleTotalSliderChange",value:function(e){this.tempTotalCasesValue=e,this.tempTotalCasesInputValue=e}},{key:"handleAltInputKeyPress",value:function(e){if(13===e.charCode){if(isNaN(this.tempAltCasesInputValue))return void(this.tempAltCasesInputValue=0);this.tempAltCasesInputValue=Number(this.tempAltCasesInputValue),this.tempAltCasesValue=this.tempAltCasesInputValue,this.handleAltSliderChangeComplete()}}},{key:"handleTotalInputKeyPress",value:function(e){13===e.charCode&&(isNaN(this.tempTotalCasesInputValue)?this.tempTotalCasesInputValue=this.totalCasesMin:this.tempTotalCasesInputValue>this.totalCasesMax?(this.tempTotalCasesInputValue=this.totalCasesMax,this.tempTotalCasesValue=this.totalCasesMax):(this.tempTotalCasesInputValue=Number(this.tempTotalCasesInputValue),this.tempTotalCasesValue=this.tempTotalCasesInputValue),this.handleTotalSliderChangeComplete())}},{key:"handleAltInputChange",value:function(e){this.tempAltCasesInputValue=e.target.value.replace(/[^0-9\.]/g,"")}},{key:"handleTotalInputChange",value:function(e){this.tempTotalCasesInputValue=e.target.value.replace(/[^0-9\.]/g,"")}},{key:"handleAltSliderChangeComplete",value:function(){this.altCasesValue=this.tempAltCasesValue}},{key:"handleTotalSliderChangeComplete",value:function(){this.totalCasesValue=this.tempTotalCasesValue}},{key:"initializeSliderValue",value:function(){this.tempAltCasesValue=0,this.tempAltCasesInputValue=0,this.altCasesValue=0,this.tempTotalCasesValue=this.totalCasesMin,this.tempTotalCasesInputValue=this.totalCasesMin,this.totalCasesValue=this.totalCasesMin}},{key:"setPngAnchor",value:function(e){this.pngAnchor=e}},{key:"render",value:function(){var t=this;return r.createElement(h.a,{offset:60},r.createElement(c.If,{condition:this.hasAlterations},r.createElement(c.Then,null,r.createElement("div",{"data-test":"cancerTypesSummaryDiv"},r.createElement("div",{className:"cancer-summary--main-options"},r.createElement(i.ButtonGroup,null,C.map(function(n,o){return r.createElement(i.Radio,{checked:n.value===t.props.groupAlterationsBy,onChange:function(n){t.initializeSliderValue(),t.props.handlePivotChange(e(n.target).attr("data-value"))},inline:!0,"data-value":n.value},n.label)}))),r.createElement("div",{className:d()("inlineBlock",{hidden:!this.showControls},"cancer-summary-secondary-options")},this.controls),r.createElement("div",{className:d()("alert","alert-success",{hidden:!this.totalCaseChanged&&!this.altCaseChanged})},r.createElement("span",{style:{verticalAlign:"middle"}},"".concat(this.chartData.labels.length," of ").concat(this.groupKeysSorted.length," categories (").concat(o.keyBy(C,"value")[this.props.groupAlterationsBy].label,") are shown based on filtering."))),r.createElement(f.a,{gene:this.props.gene,key:Date.now(),data:this.chartData.data,alterationTypeDataCounts:this.chartData.alterationTypeDataCounts,ref:function(e){return t.chartComponent=e},countsByGroup:this.countsData,representedAlterations:this.chartData.representedAlterations,alterationTypes:w,isPercentage:"alt-freq"===this.yAxis,showLinks:this.showStudyTooltipLinks,colors:O,hideGenomicAlterations:this.hideGenomicAlterations,xLabels:this.chartData.labels,handleStudyLinkout:this.props.handleStudyLinkout}))),r.createElement(c.Else,null,r.createElement("div",{className:"alert alert-info"},"There are no alterations in this gene."))))}},{key:"countsData",get:function(){return this.props.groupedAlterationData}},{key:"groupKeysSorted",get:function(){var e=this.determineSorterAndDirection(),t=e.dir,n=e.sorter;return o.chain(this.countsData).keys().orderBy(n,[t]).value()}},{key:"alterationTypeDataCounts",get:function(){var e=this,t=[];return o.forEach(this.groupKeysSorted,function(n){var r,i=e.countsData[n],a=o.chain(i.profiledSamplesCounts).values().sum().value(),s=P(i.alteredSampleCount,i.profiledSampleTotal);r="abs-count"===e.yAxis?i.alteredSampleCount>=e.tempAltCasesValue:s>=e.tempAltCasesValue;var l=i.profiledSampleTotal>=e.totalCasesValue;a>0&&r&&l&&o.forEach(o.keys(E),function(r){var o=i.profiledSamplesCounts[r],a=i.notProfiledSamplesCounts[r];o+a>0&&t.push({x:e.props.labelTransformer?e.props.labelTransformer(n):n,y:E[r],profiledCount:o,notProfiledCount:a})})}),t}},{key:"chartData",get:function(){var e=this,t={},n=0,r=0,i=0,a=[],s=o.map(w,function(s,l){return o.reduce(e.groupKeysSorted,function(s,u){var c,p=e.countsData[u],d=o.chain(p.profiledSamplesCounts).values().sum().value(),f=P(p.alteredSampleCount,p.profiledSampleTotal);c="abs-count"===e.yAxis?p.alteredSampleCount>=e.tempAltCasesValue:f>=e.tempAltCasesValue;var h=p.profiledSampleTotal>=e.totalCasesValue;if(d>0&&c&&h){var m=e.props.labelTransformer?e.props.labelTransformer(u):u;a.push(m),n=f>n?f:n,r=p.alteredSampleCount>r?p.alteredSampleCount:r,i=p.profiledSampleTotal>i?p.profiledSampleTotal:i;var y=p.alterationTypeCounts[l];y>0&&(t[l]=!0),s.push({alterationType:l,x:m,xKey:u,y:e.getYValue(y,p.profiledSampleTotal)})}return s},[])});return{labels:o.uniq(a),data:s,alterationTypeDataCounts:this.alterationTypeDataCounts,representedAlterations:t,maxPercentage:n,maxAbsoluteCount:r,maxSampleCount:i}}},{key:"altCasesMax",get:function(){return"abs-count"===this.yAxis?this.chartData.maxAbsoluteCount:this.chartData.maxPercentage}},{key:"totalCasesMax",get:function(){return this.chartData.maxSampleCount}},{key:"totalCasesMin",get:function(){return this.totalCasesMax>10?this.totalCasesMinDefaultValue:0}},{key:"hasAlterations",get:function(){return o.reduce(this.countsData,function(e,t){return e+t.alterationTotal},0)>0}},{key:"totalCaseChanged",get:function(){return this.totalCasesValue>0}},{key:"altCaseChanged",get:function(){return this.altCasesValue>0}},{key:"showStudyTooltipLinks",get:function(){return"studyId"===this.props.groupAlterationsBy&&this.chartData.labels.length>1}},{key:"controls",get:function(){var e=this,t="alt-freq"===this.yAxis?"%":"";return r.createElement("div",{className:"cancer-summary--form-controls"},r.createElement("table",null,r.createElement("tr",null,r.createElement("td",null,r.createElement(i.ControlLabel,null,"Y-Axis Value:")),r.createElement("td",{className:"dashed-border-right"},r.createElement(i.FormControl,{componentClass:"select","data-test":"cancerSummaryYAxisSelect",onChange:this.handleYAxisChange,ref:function(t){return e.inputYAxisEl=t}},r.createElement("option",{value:"alt-freq"},"Alteration Frequency"),r.createElement("option",{value:"abs-count"},"Absolute Counts"))),r.createElement("td",null,r.createElement(i.ControlLabel,null,"Min. # Total Cases:")),r.createElement("td",null,r.createElement("div",{className:"slider-holder"},r.createElement("div",{className:"slider custom-labels"},r.createElement(u.a,{min:0,max:this.totalCasesMax,value:this.tempTotalCasesValue,labels:m({0:0},this.totalCasesMax,this.totalCasesMax),onChange:this.handleTotalSliderChange,onChangeComplete:this.handleTotalSliderChangeComplete})))),r.createElement("td",{className:d()(this.totalCaseChanged?"highlightInput":"","dashed-border-right","slider-input")},r.createElement(i.FormControl,{type:"text",value:this.tempTotalCasesInputValue,"data-test":"sampleTotalThresholdInput",onChange:this.handleTotalInputChange,onKeyPress:this.handleTotalInputKeyPress})),r.createElement("td",null,r.createElement(i.Checkbox,{checked:!this.hideGenomicAlterations,onChange:this.handleGenomicCheckboxChange},"Show Genomic Alteration Types"))),r.createElement("tr",null,r.createElement("td",null,r.createElement(i.ControlLabel,null,"Sort X-Axis By:")),r.createElement("td",{className:"dashed-border-right"},r.createElement(i.FormControl,{componentClass:"select","data-test":"cancerSummaryXAxisSelect",onChange:this.handleXAxisChange,ref:function(t){return e.inputXAxisEl=t}},r.createElement("option",{value:"y-axis"},"Y-Axis Values"),r.createElement("option",{value:"x-axis"},"Alphabetically"))),r.createElement("td",null,r.createElement(i.ControlLabel,null,"Min. ".concat("alt-freq"===this.yAxis?"%":"#"," Altered Cases:"))),r.createElement("td",null,r.createElement("div",{className:"slider-holder"},r.createElement("div",{className:"slider custom-labels"},r.createElement(u.a,{min:0,max:this.altCasesMax,value:this.tempAltCasesValue,labels:m({0:0+t},this.altCasesMax,Math.ceil(this.altCasesMax)+t),format:function(e){return e+t},onChange:this.handleAltSliderChange,onChangeComplete:this.handleAltSliderChangeComplete})))),r.createElement("td",{className:d()(this.altCaseChanged?"highlightInput":"","dashed-border-right","slider-input")},r.createElement(i.FormControl,{type:"text",value:this.tempAltCasesInputValue+t,onChange:this.handleAltInputChange,"data-test":"alterationThresholdInput",onKeyPress:this.handleAltInputKeyPress})))))}}])&&y(a.prototype,s),l&&y(a,l),n}();_([a.observable],x.prototype,"tempAltCasesInputValue",void 0),_([a.observable],x.prototype,"tempTotalCasesInputValue",void 0),_([a.observable],x.prototype,"pngAnchor",void 0),_([a.observable],x.prototype,"pdf",void 0),_([a.observable],x.prototype,"showControls",void 0),_([a.observable],x.prototype,"hideGenomicAlterations",void 0),_([a.observable],x.prototype,"yAxis",void 0),_([a.observable],x.prototype,"xAxis",void 0),_([a.observable],x.prototype,"altCasesValue",void 0),_([a.observable],x.prototype,"totalCasesValue",void 0),_([a.observable],x.prototype,"tempTotalCasesValue",void 0),_([a.observable],x.prototype,"tempAltCasesValue",void 0),_([a.observable],x.prototype,"viewCountsByCancerSubType",void 0),_([a.computed],x.prototype,"alterationTypeDataCounts",null),_([a.computed],x.prototype,"chartData",null),_([a.computed],x.prototype,"altCasesMax",null),_([a.computed],x.prototype,"totalCasesMax",null),_([a.computed],x.prototype,"totalCasesMin",null),_([a.computed],x.prototype,"hasAlterations",null),_([a.computed],x.prototype,"totalCaseChanged",null),_([a.computed],x.prototype,"altCaseChanged",null),_([a.computed],x.prototype,"showStudyTooltipLinks",null),_([a.action],x.prototype,"handleTotalInputKeyPress",null),_([a.action],x.prototype,"initializeSliderValue",null),_([a.computed],x.prototype,"controls",null),x=_([s.observer],x)}).call(this,n(11))},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",function(){return S});var r=n(3),o=n(7),i=n(0),a=n(1177),s=n.n(a),l=n(8),u=n(980),c=n(2),p=n(124);function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var g=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":y(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},v=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},b=Object(r.B)(),S=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=f(this,h(t).apply(this,arguments))).showBookmarkDialog=!1,e}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,i["Component"]),n=t,(o=[{key:"getUrls",value:function(){return v(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.location.href,e.next=3,Object(p.b)(t,this.props.bitlyAccessToken);case 3:return n=e.sent,e.abrupt("return",{bitlyUrl:n,fullUrl:t,sessionUrl:t});case 5:case"end":return e.stop()}},e,this)}))}},{key:"toggleBookmarkDialog",value:function(){this.showBookmarkDialog=!this.showBookmarkDialog}},{key:"render",value:function(){return i.createElement("div",{className:s.a.shareModule},i.createElement(r.c,{placement:"topLeft",overlay:i.createElement("div",null,"Get bookmark link")},i.createElement("a",{onClick:this.toggleBookmarkDialog},i.createElement("span",{className:"fa-stack fa-4x"},i.createElement("i",{className:"fa fa-circle fa-stack-2x"}),i.createElement("i",{className:"fa fa-link fa-stack-1x"})))),this.showBookmarkDialog&&i.createElement(u.a,{onHide:this.toggleBookmarkDialog,urlPromise:this.getUrls(),title:"Bookmark Query"}))}}])&&d(n.prototype,o),a&&d(n,a),t}();g([c.observable],S.prototype,"showBookmarkDialog",void 0),g([l.default,c.action],S.prototype,"toggleBookmarkDialog",null),S=g([o.observer],S)},function(e,t,n){e.exports={portalWidth:"shareUI-module__portalWidth__23kqI",framedImage:"shareUI-module__framedImage__2dQ1S",shareModule:"shareUI-module__shareModule__3FK_r"}},function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__16HAO",framedImage:"styles-module__framedImage__3CXfU",globalSettingsDropdown:"styles-module__globalSettingsDropdown__1vmly","fa-info-circle":"styles-module__fa-info-circle__-hvWa"}},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){e.exports={portalWidth:"pathwayMapper-module__portalWidth__S9aQK",framedImage:"pathwayMapper-module__framedImage__1wfha",toast:"pathwayMapper-module__toast__AJKP1"}},function(e,t,n){"use strict";var r=s(n(1185)),o=s(n(1188)),i=s(n(1037)),a=s(n(1035));function s(e){return e&&e.__esModule?e:{default:e}}e.exports={Transition:a.default,TransitionGroup:i.default,ReplaceTransition:o.default,CSSTransition:r.default}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(1));var r=s(n(1186)),o=s(n(1187)),i=s(n(0)),a=s(n(1035));n(1036);function s(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u=function(e,t){return e&&t&&t.split(" ").forEach(function(t){return(0,r.default)(e,t)})},c=function(e,t){return e&&t&&t.split(" ").forEach(function(t){return(0,o.default)(e,t)})},p=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).onEnter=function(e,n){var r=t.getClassNames(n?"appear":"enter").className;t.removeClasses(e,"exit"),u(e,r),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var r=t.getClassNames(n?"appear":"enter").activeClassName;t.reflowAndAddClass(e,r),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var r=t.getClassNames("enter").doneClassName;t.removeClasses(e,n?"appear":"enter"),u(e,r),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.getClassNames("exit").className;t.removeClasses(e,"appear"),t.removeClasses(e,"enter"),u(e,n),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.getClassNames("exit").activeClassName;t.reflowAndAddClass(e,n),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.getClassNames("exit").doneClassName;t.removeClasses(e,"exit"),u(e,n),t.props.onExited&&t.props.onExited(e)},t.getClassNames=function(e){var n=t.props.classNames,r="string"!=typeof n?n[e]:n+"-"+e;return{className:r,activeClassName:"string"!=typeof n?n[e+"Active"]:r+"-active",doneClassName:"string"!=typeof n?n[e+"Done"]:r+"-done"}},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.removeClasses=function(e,t){var n=this.getClassNames(t),r=n.className,o=n.activeClassName,i=n.doneClassName;r&&c(e,r),o&&c(e,o),i&&c(e,i)},o.reflowAndAddClass=function(e,t){t&&(e&&e.scrollTop,u(e,t))},o.render=function(){var e=l({},this.props);return delete e.classNames,i.default.createElement(a.default,l({},e,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},r}(i.default.Component);p.propTypes={};var d=p;t.default=d,e.exports=t.default},function(e,t,n){e.exports=n(16)(886)},function(e,t,n){e.exports=n(16)(887)},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;a(n(1));var r=a(n(0)),o=n(21),i=a(n(1037));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){var t,n;function a(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).handleEnter=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onEnter",0,n)},t.handleEntering=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onEntering",0,n)},t.handleEntered=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onEntered",0,n)},t.handleExit=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onExit",1,n)},t.handleExiting=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onExiting",1,n)},t.handleExited=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onExited",1,n)},t}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var s=a.prototype;return s.handleLifecycle=function(e,t,n){var i,a=this.props.children,s=r.default.Children.toArray(a)[t];s.props[e]&&(i=s.props)[e].apply(i,n),this.props[e]&&this.props[e]((0,o.findDOMNode)(this))},s.render=function(){var e=this.props,t=e.children,n=e.in,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,["children","in"]),a=r.default.Children.toArray(t),s=a[0],l=a[1];return delete o.onEnter,delete o.onEntering,delete o.onEntered,delete o.onExit,delete o.onExiting,delete o.onExited,r.default.createElement(i.default,o,n?r.default.cloneElement(s,{key:"first",onEnter:this.handleEnter,onEntering:this.handleEntering,onEntered:this.handleEntered}):r.default.cloneElement(l,{key:"second",onEnter:this.handleExit,onEntering:this.handleExiting,onEntered:this.handleExited}))},a}(r.default.Component);s.propTypes={};var l=s;t.default=l,e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.getChildMapping=o,t.mergeChildMappings=i,t.getInitialChildMapping=function(e,t){return o(e.children,function(n){return(0,r.cloneElement)(n,{onExited:t.bind(null,n),in:!0,appear:a(n,"appear",e),enter:a(n,"enter",e),exit:a(n,"exit",e)})})},t.getNextChildMapping=function(e,t,n){var s=o(e.children),l=i(t,s);return Object.keys(l).forEach(function(o){var i=l[o];if((0,r.isValidElement)(i)){var u=o in t,c=o in s,p=t[o],d=(0,r.isValidElement)(p)&&!p.props.in;!c||u&&!d?c||!u||d?c&&u&&(0,r.isValidElement)(p)&&(l[o]=(0,r.cloneElement)(i,{onExited:n.bind(null,i),in:p.props.in,exit:a(i,"exit",e),enter:a(i,"enter",e)})):l[o]=(0,r.cloneElement)(i,{in:!1}):l[o]=(0,r.cloneElement)(i,{onExited:n.bind(null,i),in:!0,exit:a(i,"exit",e),enter:a(i,"enter",e)})}}),l};var r=n(0);function o(e,t){var n=Object.create(null);return e&&r.Children.map(e,function(e){return e}).forEach(function(e){n[e.key]=function(e){return t&&(0,r.isValidElement)(e)?t(e):e}(e)}),n}function i(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,o=Object.create(null),i=[];for(var a in e)a in t?i.length&&(o[a]=i,i=[]):i.push(a);var s={};for(var l in t){if(o[l])for(r=0;r<o[l].length;r++){var u=o[l][r];s[o[l][r]]=n(u)}s[l]=n(l)}for(r=0;r<i.length;r++)s[i[r]]=n(i[r]);return s}function a(e,t,n){return null!=n[t]?n[t]:e.props[t]}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(0),o=n(7),i=n(8),a=n(866),s=n(2),l=n(6);function u(e){return r.createElement("span",null,e.map(function(t,n){return r.createElement("span",null,r.createElement("strong",null,t),n<e.length-1?", ":"")}))}var c=n(710),p=n(1178),d=n.n(p),f=n(9),h=n.n(f),m=n(585);function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var _,w=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":S(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};!function(e){e.hidePutativePassengers="0",e.showGermlineMutations="1",e.dataTypeSample="2",e.dataTypePatient="3"}(_||(_={}));var E=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=g(t).call(this,e))||"object"!==S(o)&&"function"!=typeof o?v(r):o).driverSettingsState=function(e){return Object(s.observable)({get distinguishDrivers(){return e.props.store.driverAnnotationSettings.driversAnnotated},get annotateDriversOncoKb(){return e.props.store.driverAnnotationSettings.oncoKb},get annotateDriversOncoKbDisabled(){return!l.b.serverConfig.show_oncokb},get annotateDriversOncoKbError(){return e.props.store.didOncoKbFailInOncoprint},get annotateDriversHotspots(){return e.props.store.driverAnnotationSettings.hotspots},get annotateDriversHotspotsDisabled(){return!l.b.serverConfig.show_hotspot},get annotateDriversHotspotsError(){return e.props.store.didHotspotFailInOncoprint},get annotateDriversCBioPortal(){return e.props.store.driverAnnotationSettings.cbioportalCount},get annotateDriversCOSMIC(){return e.props.store.driverAnnotationSettings.cosmicCount},get hidePutativePassengers(){return e.props.store.driverAnnotationSettings.excludeVUS},get annotateCBioPortalInputValue(){return e.props.store.driverAnnotationSettings.cbioportalCountThreshold+""},get annotateCOSMICInputValue(){return e.props.store.driverAnnotationSettings.cosmicCountThreshold+""},get customDriverAnnotationBinaryMenuLabel(){var t=l.b.serverConfig.oncoprint_custom_driver_annotation_binary_menu_label,n=e.props.store.customDriverAnnotationReport.result;return t&&n&&n.hasBinary?t:void 0},get customDriverAnnotationTiersMenuLabel(){var t=l.b.serverConfig.oncoprint_custom_driver_annotation_tiers_menu_label,n=e.props.store.customDriverAnnotationReport.result;return t&&n&&n.tiers.length?t:void 0},get customDriverAnnotationTiers(){var t=e.props.store.customDriverAnnotationReport.result;return t&&t.tiers.length?t.tiers:void 0},get annotateCustomDriverBinary(){return e.props.store.driverAnnotationSettings.customBinary},get selectedCustomDriverAnnotationTiers(){return e.props.store.driverAnnotationSettings.driverTiers}})}(v(n)),n.driverSettingsHandlers=function(e,t){var n={onSelectDistinguishDrivers:Object(s.action)(function(n){n?(t.annotateDriversOncoKbDisabled||t.annotateDriversOncoKbError||(e.props.store.driverAnnotationSettings.oncoKb=!0),t.annotateDriversHotspotsDisabled||t.annotateDriversHotspotsError||(e.props.store.driverAnnotationSettings.hotspots=!0),e.props.store.driverAnnotationSettings.cbioportalCount=!0,e.props.store.driverAnnotationSettings.cosmicCount=!0,e.props.store.driverAnnotationSettings.customBinary=!0,e.props.store.driverAnnotationSettings.driverTiers.forEach(function(t,n){e.props.store.driverAnnotationSettings.driverTiers.set(n,!0)})):(e.props.store.driverAnnotationSettings.oncoKb=!1,e.props.store.driverAnnotationSettings.hotspots=!1,e.props.store.driverAnnotationSettings.cbioportalCount=!1,e.props.store.driverAnnotationSettings.cosmicCount=!1,e.props.store.driverAnnotationSettings.customBinary=!1,e.props.store.driverAnnotationSettings.driverTiers.forEach(function(t,n){e.props.store.driverAnnotationSettings.driverTiers.set(n,!1)}),e.props.store.driverAnnotationSettings.excludeVUS=!1)}),onSelectAnnotateOncoKb:Object(s.action)(function(t){e.props.store.driverAnnotationSettings.oncoKb=t}),onSelectAnnotateHotspots:Object(s.action)(function(t){e.props.store.driverAnnotationSettings.hotspots=t}),onSelectAnnotateCBioPortal:Object(s.action)(function(t){e.props.store.driverAnnotationSettings.cbioportalCount=t}),onSelectAnnotateCOSMIC:Object(s.action)(function(t){e.props.store.driverAnnotationSettings.cosmicCount=t}),onChangeAnnotateCBioPortalInputValue:Object(s.action)(function(t){e.props.store.driverAnnotationSettings.cbioportalCountThreshold=parseInt(t,10),n.onSelectAnnotateCBioPortal&&n.onSelectAnnotateCBioPortal(!0)}),onChangeAnnotateCOSMICInputValue:Object(s.action)(function(t){e.props.store.driverAnnotationSettings.cosmicCountThreshold=parseInt(t,10),n.onSelectAnnotateCOSMIC&&n.onSelectAnnotateCOSMIC(!0)}),onSelectCustomDriverAnnotationBinary:Object(s.action)(function(t){e.props.store.driverAnnotationSettings.customBinary=t}),onSelectCustomDriverAnnotationTier:Object(s.action)(function(t,n){e.props.store.driverAnnotationSettings.driverTiers.set(t,n)}),onSelectHidePutativePassengers:function(t){e.props.store.driverAnnotationSettings.excludeVUS=t}};return n}(v(n),n.driverSettingsState),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,r["Component"]),n=t,(o=[{key:"onChange",value:function(e){this.props.store.setOncoprintAnalysisCaseType(e.value)}},{key:"onInputClick",value:function(e){switch(e.target.value){case _.hidePutativePassengers:this.props.store.driverAnnotationSettings.excludeVUS=!this.props.store.driverAnnotationSettings.excludeVUS;break;case _.showGermlineMutations:this.props.store.setExcludeGermlineMutations(!this.props.store.excludeGermlineMutations);break;case _.dataTypeSample:this.props.store.setOncoprintAnalysisCaseType(m.b.SAMPLE);break;case _.dataTypePatient:this.props.store.setOncoprintAnalysisCaseType(m.b.PATIENT)}}},{key:"render",value:function(){return r.createElement("div",{"data-test":"GlobalSettingsDropdown",className:h()("cbioportal-frontend",d.a.globalSettingsDropdown),style:{padding:5}},r.createElement("h5",{style:{marginTop:"auto",marginBottom:"auto"}},"Annotate Data"),r.createElement(c.a,{divStyle:{display:"inline-block",marginLeft:6},style:{color:"rgb(54, 134, 194)"},tooltip:r.createElement("span",null,"These settings affect every tab except"," ",u(["Co-expression","CN Segments"]))}),r.createElement("div",{style:{marginLeft:10}},r.createElement(a.a,{state:this.driverSettingsState,handlers:this.driverSettingsHandlers})),r.createElement("hr",null),r.createElement("h5",{style:{marginTop:"auto",marginBottom:"auto"}},"Filter Data"),r.createElement(c.a,{divStyle:{display:"inline-block",marginLeft:6},style:{color:"rgb(54, 134, 194)"},tooltip:r.createElement("span",null,"These settings affect every tab except"," ",u(["Plots","Co-expression","CN Segments"]))}),r.createElement("div",{style:{marginLeft:10}},r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{"data-test":"HideVUS",type:"checkbox",value:_.hidePutativePassengers,checked:this.props.store.driverAnnotationSettings.excludeVUS,onClick:this.onInputClick,disabled:!this.driverSettingsState.distinguishDrivers})," ","Exclude mutations and copy number alterations of unknown significance")),r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{"data-test":"HideGermline",type:"checkbox",value:_.showGermlineMutations,checked:this.props.store.excludeGermlineMutations,onClick:this.onInputClick})," ","Exclude germline mutations"))))}}])&&y(n.prototype,o),i&&y(n,i),t}();w([i.default],E.prototype,"onChange",null),w([i.default],E.prototype,"onInputClick",null),E=w([o.observer],E);t.a=E},function(e,t,n){"use strict";var r=n(0),o=n(4),i=n(581),a=n(2),s=n(7),l=n(576),u=n(8);var c=n(9),p=n.n(c),d=n(21),f=n(584),h=n(56),m=n(3),y=n(884),g=n(17),v=n(89),b=n(50),S=n.n(b),_=n(1013);function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",function(){return I});var x=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":P(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},T=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};function k(e){return o.round(100*e,2)}function A(e){var t=e[0].map(function(e){return e.x}),n=e.reduce(function(e,t){return t.forEach(function(t){e[t.x]=e[t.x]||0,e[t.x]+=t.y}),e},{});return t.map(function(e){return{x:e,y:n[e],alterationType:"whatever"}})}var I=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=E(this,O(t).call(this,e))).barToolTipCounter=0,n.isBarPlotTooltipHovered=!1,n.shouldUpdatePosition=!1,n.mousePosition={x:0,y:0},n}var n,a,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(t,r["Component"]),n=t,(a=[{key:"tooltipMouseEnter",value:function(){this.isBarPlotTooltipHovered=!0}},{key:"tooltipMouseLeave",value:function(){this.isBarPlotTooltipHovered=!1,this.barPlotTooltipModel=null}},{key:"queryStudy",value:function(e){return T(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.props.gene!=_.a&&(n=this.props.gene),this.props.handleStudyLinkout&&this.props.handleStudyLinkout(e,n);case 2:case"end":return t.stop()}},t,this)}))}},{key:"formatStudyLink",value:function(e){return S.a.format({pathname:"/"+v.a.Study,query:{id:e}})}},{key:"onMouseMove",value:function(e){this.shouldUpdatePosition&&(this.mousePosition.x=e.pageX,this.mousePosition.y=e.pageY)}},{key:"barWidth",value:function(){return 20}},{key:"barSeparation",value:function(){return 8}},{key:"tickFormat",value:function(){return this.props.isPercentage?function(e){return"".concat(e,"%")}:function(e){return e}}},{key:"domainPadding",value:function(){return 20}},{key:"categoryAxisDomainPadding",value:function(){return this.domainPadding()}},{key:"countAxisDomainPadding",value:function(){return this.domainPadding()}},{key:"chartDomainPadding",value:function(){return{y:this.countAxisDomainPadding(),x:this.categoryAxisDomainPadding()}}},{key:"barChartHeight",value:function(){return 400}},{key:"getChart",value:function(){var e=this;return r.createElement("div",{style:this.overflowStyle,className:"borderedChart"},r.createElement("div",{style:{overflowX:"auto",overflowY:"hidden"}},r.createElement("svg",{style:{width:this.svgWidth,height:this.svgHeight,pointerEvents:"all"},height:this.svgHeight,width:this.svgWidth,role:"img",viewBox:"0 0 ".concat(this.svgWidth," ").concat(this.svgHeight),ref:function(t){return e.svg=t},onMouseMove:this.onMouseMove},r.createElement("g",{transform:"translate(".concat(this.leftPadding,", 0)")},r.createElement(i.VictoryChart,{theme:l.d,width:this.chartWidth,height:this.barChartHeight(),standalone:!1,domainPadding:this.chartDomainPadding(),singleQuadrantDomainPadding:{y:!0,x:!1}},r.createElement(i.VictoryAxis,{dependentAxis:!0,axisLabelComponent:r.createElement(i.VictoryLabel,{dy:-50}),label:this.yAxisLabel,tickFormat:this.tickFormat,offsetX:50,orientation:"left"}),r.createElement(i.VictoryAxis,{tickValues:this.props.xLabels,style:{ticks:{size:0,strokeWidth:0},tickLabels:{fontSize:0},grid:{stroke:0}}}),r.createElement(i.VictoryStack,{colorScale:this.colorArray},this.barPlots),!this.props.hideGenomicAlterations&&r.createElement(i.VictoryLegend,{x:10,y:this.svgHeight-30,orientation:"horizontal",data:this.legendData}))),r.createElement("g",{transform:"translate(".concat(this.leftPadding,", ").concat(this.scatterPlotTopPadding,")")},r.createElement(i.VictoryChart,{theme:l.d,width:this.chartWidth,height:this.scatterChartHeight,standalone:!1,domainPadding:this.chartDomainPadding(),singleQuadrantDomainPadding:{y:!0,x:!1}},r.createElement(i.VictoryAxis,{orientation:"bottom",crossAxis:!1,tickValues:this.props.xLabels,style:{axis:{strokeWidth:0},ticks:{size:0,strokeWidth:0},grid:{stroke:0}},tickLabelComponent:r.createElement(i.VictoryLabel,{angle:50,verticalAnchor:"start",textAnchor:"start"})}),r.createElement(i.VictoryAxis,{orientation:"left",dependentAxis:!0,crossAxis:!1,style:{axis:{strokeWidth:0},ticks:{size:0,strokeWidth:0},grid:{stroke:0}}}),r.createElement(i.VictoryScatter,{size:this.barWidth()/5,style:{data:{fill:"black",cursor:function(e){return e.cursor}}},data:this.scatterData,events:this.scatterPlotMouseEvents}))))),r.createElement(m.d,{getSvg:function(){return e.svg},filename:"cancer_types_summary",dontFade:!0,type:"button",style:{position:"absolute",top:10,right:10}}))}},{key:"render",value:function(){return r.createElement("div",{"data-test":"cancerTypeSummaryChart"},r.createElement(s.Observer,null,this.getChart),this.scatterPlotTooltipComponent,this.barPlotTooltipComponent)}},{key:"scatterPlotTooltipComponent",get:function(){if(this.scatterPlotTooltipModel){var e=this.scatterPlotTooltipModel.datum.profiledCount,t="Not profiled";e>0&&(t="".concat(e," ").concat(Object(m.R)("sample",e),"  profiled"));var n=this.mousePosition.x>f.a.size.width-400?"left":"right";return d.createPortal(r.createElement(h.Popover,{arrowOffsetTop:y.b,className:p()("cbioportal-frontend","cbioTooltip"),positionLeft:this.mousePosition.x+("left"===n?-y.a:y.a),positionTop:this.mousePosition.y-y.b,style:{transform:"left"===n?"translate(-100%,0%)":void 0,maxWidth:400},placement:n},r.createElement("div",{style:{whiteSpace:"normal"}},t)),document.body)}return null}},{key:"barPlotTooltipComponent",get:function(){var e=this;if(this.barPlotTooltipModel){var t=this.barPlotTooltipModel,n=this.mousePosition.x>f.a.size.width-400?"left":"right";return d.createPortal(r.createElement(h.Popover,{onMouseLeave:this.tooltipMouseLeave,onMouseEnter:this.tooltipMouseEnter,arrowOffsetTop:y.b,className:p()("cbioportal-frontend","cbioTooltip"),positionLeft:this.mousePosition.x+("left"===n?-y.a:y.a),positionTop:this.mousePosition.y-y.b,style:{transform:"left"===n?"translate(-100%,0%)":void 0,maxWidth:400},placement:n},r.createElement("div",null,r.createElement(g.If,{condition:this.props.showLinks},r.createElement(g.Then,null,r.createElement("strong",null,r.createElement("a",{href:this.formatStudyLink(t.studyId),target:"_blank"},t.groupName,"",r.createElement("i",{className:"fa fa-external-link",style:{fontWeight:"bold"}})))),r.createElement(g.Else,null,r.createElement("strong",null,"Summary for ",t.groupName))),r.createElement("p",null,"Gene altered in"," ",k(t.alterationData.alteredSampleCount/t.alterationData.profiledSampleTotal),"% of"," ",t.alterationData.profiledSampleTotal," ","cases"),r.createElement("table",{className:"table table-striped"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"Alteration"),r.createElement("th",null,"Frequency"))),r.createElement("tbody",null,o.reduce(this.props.alterationTypes,function(e,n,o){if(o in t.alterationData.alterationTypeCounts&&t.alterationData.alterationTypeCounts[o]>0){var i=t.alterationData.alterationTypeCounts[o];e.push(r.createElement("tr",null,r.createElement("td",null,n),r.createElement("td",null,k(t.alterationData.alterationTypeCounts[o]/t.alterationData.profiledSampleTotal),"% (",i," ",Object(m.R)("case",i),")")))}return e},[]).reverse())),r.createElement(g.If,{condition:this.props.showLinks},r.createElement("div",{className:"btn btn-primary btn-xs",onClick:function(){e.queryStudy(t.studyId)}},"Query this study",this.props.gene==_.a?"":" for ".concat(this.props.gene))))),document.body)}return null}},{key:"svgWidth",get:function(){return this.chartWidth+this.rightPadding+this.leftPadding}},{key:"chartWidth",get:function(){return this.props.xLabels.length*(this.barWidth()+this.barSeparation())+100}},{key:"svgHeight",get:function(){return this.barChartHeight()+this.scatterChartHeight+this.bottomPadding-100}},{key:"rightPadding",get:function(){return Math.max(200,this.legendWidth-this.chartWidth+20)}},{key:"legendWidth",get:function(){var e=this.legendData.map(function(e){return e.name});return 6*e.join("").length+40*e.length}},{key:"leftPadding",get:function(){return 50}},{key:"bottomPadding",get:function(){return 5*(e=this.props.xLabels,t=e.map(function(e){var t=e.match(/[A-Z]/g)||[],n=e.match(/[a-z]/g)||[],r=e.match(/\s/g)||[],o=e.length-t.length-n.length-r.length;return 2*t.length+1*n.length+2*r.length+1*o}),o.max(t)||0)+40;var e,t}},{key:"colorArray",get:function(){var e=this;return o.map(this.props.alterationTypes,function(t,n){return e.props.colors[n]})}},{key:"legendData",get:function(){var e=this;return o.reduce(this.props.alterationTypes,function(t,n,r){return r in e.props.representedAlterations&&t.push({name:n,symbol:{fill:e.props.colors[r]}}),t},[]).reverse()}},{key:"yAxisLabel",get:function(){return this.props.isPercentage?"Alteration Frequency":"Absolute Counts"}},{key:"barPlotEvents",get:function(){var e=this;return[{target:"data",eventHandlers:{onMouseEnter:function(){return[{target:"data",mutation:function(t){e.shouldUpdatePosition=!0,t.datum.xKey in e.props.countsByGroup?(e.barPlotTooltipModel=Object.assign(Object.assign({},t),{groupName:t.datum.x,alterationData:e.props.countsByGroup[t.datum.xKey],studyId:t.datum.xKey}),e.barToolTipCounter++):e.barPlotTooltipModel=null}}]},onMouseLeave:function(){return[{target:"data",mutation:function(){e.shouldUpdatePosition=!1,setTimeout(function(){e.isBarPlotTooltipHovered||1!==e.barToolTipCounter||(e.barPlotTooltipModel=null),e.barToolTipCounter--},100)}}]}}}]}},{key:"scatterPlotMouseEvents",get:function(){var e=this;return[{target:"data",eventHandlers:{onMouseOver:function(){return[{target:"data",mutation:function(t){t.datum&&(e.scatterPlotTooltipModel=t)}}]},onMouseOut:function(){return[{target:"data",mutation:function(){e.scatterPlotTooltipModel=null}}]}}}]}},{key:"overflowStyle",get:function(){return{position:"relative",display:"inline-block",width:this.props.xLabels.length>37?"100%":"auto"}}},{key:"scatterChartHeight",get:function(){var e=o.uniqBy(this.scatterData,function(e){return e.y}).length;return e>0?e*(this.barWidth()+this.barSeparation())+100:100}},{key:"scatterPlotTopPadding",get:function(){return this.barChartHeight()-100}},{key:"scatterData",get:function(){return o.map(this.props.alterationTypeDataCounts,function(e){return Object.assign(Object.assign({},e),{symbol:e.profiledCount>0?"plus":"minus"})})}},{key:"barPlots",get:function(){var e=this;return(this.props.hideGenomicAlterations?[A(this.props.data)]:this.props.data).map(function(t,n){return r.createElement(i.VictoryBar,{style:{data:{width:e.barWidth}},events:e.barPlotEvents,data:t,key:n})})}}])&&w(n.prototype,a),u&&w(n,u),t}();x([a.observable.ref],I.prototype,"barPlotTooltipModel",void 0),x([a.observable.ref],I.prototype,"scatterPlotTooltipModel",void 0),x([a.observable],I.prototype,"barToolTipCounter",void 0),x([a.observable],I.prototype,"isBarPlotTooltipHovered",void 0),x([a.observable],I.prototype,"shouldUpdatePosition",void 0),x([a.observable],I.prototype,"mousePosition",void 0),x([u.default,a.action],I.prototype,"tooltipMouseEnter",null),x([u.default,a.action],I.prototype,"tooltipMouseLeave",null),x([a.computed],I.prototype,"scatterPlotTooltipComponent",null),x([a.computed],I.prototype,"barPlotTooltipComponent",null),x([u.default,a.action],I.prototype,"onMouseMove",null),x([u.default],I.prototype,"tickFormat",null),x([a.computed],I.prototype,"scatterChartHeight",null),x([a.computed],I.prototype,"scatterPlotTopPadding",null),x([a.computed],I.prototype,"scatterData",null),x([a.computed],I.prototype,"barPlots",null),x([u.default],I.prototype,"getChart",null),I=x([s.observer],I)}])]);