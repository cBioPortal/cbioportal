(self.webpackChunkcbioportal_frontend=self.webpackChunkcbioportal_frontend||[]).push([[295],{71082:(module,exports,__webpack_require__)=>{var $=__webpack_require__(77906),__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,__WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(){var $jscomp=$jscomp||{},n,C;$jscomp.scope={},$jscomp.findInternal=function(e,t,r){e instanceof String&&(e=String(e));for(var n=e.length,o=0;o<n;o++){var i=e[o];if(t.call(r,i,o,e))return{i:o,v:i}}return{i:-1,v:void 0}},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,r){e!=Array.prototype&&e!=Object.prototype&&(e[t]=r.value)},$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:void 0!==__webpack_require__.g&&null!=__webpack_require__.g?__webpack_require__.g:e},$jscomp.global=$jscomp.getGlobal(this),$jscomp.polyfill=function(e,t,r,n){if(t){for(r=$jscomp.global,e=e.split("."),n=0;n<e.length-1;n++){var o=e[n];o in r||(r[o]={}),r=r[o]}(t=t(n=r[e=e[e.length-1]]))!=n&&null!=t&&$jscomp.defineProperty(r,e,{configurable:!0,writable:!0,value:t})}},$jscomp.polyfill("Array.prototype.find",(function(e){return e||function(e,t){return $jscomp.findInternal(this,e,t).v}}),"es6","es3"),n="undefined"!=typeof window?window:this,C=function(e,t){function r(e,t){var r=(t=t||W).createElement("script");r.text=e,t.head.appendChild(r).parentNode.removeChild(r)}function n(e){var t=!!e&&"length"in e&&e.length,r=ie.type(e);return"function"!==r&&!ie.isWindow(e)&&("array"===r||0===t||"number"==typeof t&&0<t&&t-1 in e)}function o(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}function i(e,t,r){return ie.isFunction(t)?ie.grep(e,(function(e,n){return!!t.call(e,n,e)!==r})):t.nodeType?ie.grep(e,(function(e){return e===t!==r})):"string"!=typeof t?ie.grep(e,(function(e){return-1<Q.call(t,e)!==r})):me.test(t)?ie.filter(t,e,r):(t=ie.filter(t,e),ie.grep(e,(function(e){return-1<Q.call(t,e)!==r&&1===e.nodeType})))}function a(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function s(e){return e}function l(e){throw e}function c(e,t,r,n){var o;try{e&&ie.isFunction(o=e.promise)?o.call(e).done(t).fail(r):e&&ie.isFunction(o=e.then)?o.call(e,t,r):t.apply(void 0,[e].slice(n))}catch(e){r.apply(void 0,[e])}}function u(){W.removeEventListener("DOMContentLoaded",u),e.removeEventListener("load",u),ie.ready()}function h(){this.expando=ie.expando+h.uid++}function f(e,t,r){if(void 0===r&&1===e.nodeType)if(r="data-"+t.replace(Me,"-$&").toLowerCase(),"string"==typeof(r=e.getAttribute(r))){try{var n=r;r="true"===n||"false"!==n&&("null"===n?null:n===+n+""?+n:_e.test(n)?JSON.parse(n):n)}catch(e){}Ae.set(e,t,r)}else r=void 0;return r}function d(e,t,r,n){var o=1,i=20,a=n?function(){return n.cur()}:function(){return ie.css(e,t,"")},s=a(),l=r&&r[3]||(ie.cssNumber[t]?"":"px"),c=(ie.cssNumber[t]||"px"!==l&&+s)&&Te.exec(ie.css(e,t));if(c&&c[3]!==l){l=l||c[3],r=r||[],c=+s||1;do{c/=o=o||".5",ie.style(e,t,c+l)}while(o!==(o=a()/s)&&1!==o&&--i)}if(r){c=+c||+s||0;var u=r[1]?c+(r[1]+1)*r[2]:+r[2];n&&(n.unit=l,n.start=c,n.end=u)}return u}function p(e,t){for(var r,n,o=[],i=0,a=e.length;i<a;i++)if((n=e[i]).style)if(r=n.style.display,t){if("none"===r&&(o[i]=Se.get(n,"display")||null,o[i]||(n.style.display="")),""===n.style.display&&Ee(n)){r=i;var s=n.ownerDocument;n=n.nodeName;var l=ke[n];l||(s=s.body.appendChild(s.createElement(n)),l=ie.css(s,"display"),s.parentNode.removeChild(s),"none"===l&&(l="block"),ke[n]=l),s=l,o[r]=s}}else"none"!==r&&(o[i]="none",Se.set(n,"display",r));for(i=0;i<a;i++)null!=o[i]&&(e[i].style.display=o[i]);return e}function m(e,t){var r=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&o(e,t)?ie.merge([e],r):r}function v(e,t){for(var r=0,n=e.length;r<n;r++)Se.set(e[r],"globalEval",!t||Se.get(t[r],"globalEval"))}function g(e,t,r,n,o){for(var i,a,s,l=t.createDocumentFragment(),c=[],u=0,h=e.length;u<h;u++)if((i=e[u])||0===i)if("object"===ie.type(i))ie.merge(c,i.nodeType?[i]:i);else if(je.test(i)){for(a=a||l.appendChild(t.createElement("div")),s=(Oe.exec(i)||["",""])[1].toLowerCase(),s=Ne[s]||Ne._default,a.innerHTML=s[1]+ie.htmlPrefilter(i)+s[2],s=s[0];s--;)a=a.lastChild;ie.merge(c,a.childNodes),(a=l.firstChild).textContent=""}else c.push(t.createTextNode(i));for(l.textContent="",u=0;i=c[u++];)if(n&&-1<ie.inArray(i,n))o&&o.push(i);else if(e=ie.contains(i.ownerDocument,i),a=m(l.appendChild(i),"script"),e&&v(a),r)for(s=0;i=a[s++];)Pe.test(i.type||"")&&r.push(i);return l}function y(){return!0}function b(){return!1}function x(){try{return W.activeElement}catch(e){}}function w(e,t,r,n,o,i){var a;if("object"==typeof t){for(a in"string"!=typeof r&&(n=n||r,r=void 0),t)w(e,a,r,n,t[a],i);return e}if(null==n&&null==o?(o=r,n=r=void 0):null==o&&("string"==typeof r?(o=n,n=void 0):(o=n,n=r,r=void 0)),!1===o)o=b;else if(!o)return e;if(1===i){var s=o;(o=function(e){return ie().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=ie.guid++)}return e.each((function(){ie.event.add(this,t,o,n,r)}))}function D(e,t){return o(e,"table")&&o(11!==t.nodeType?t:t.firstChild,"tr")&&ie(">tbody",e)[0]||e}function C(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function $(e){var t=We.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function S(e,t){var r,n;if(1===t.nodeType){if(Se.hasData(e)){var o=Se.access(e),i=Se.set(t,o);if(o=o.events)for(n in delete i.handle,i.events={},o)for(i=0,r=o[n].length;i<r;i++)ie.event.add(t,n,o[n][i])}Ae.hasData(e)&&(e=Ae.access(e),e=ie.extend({},e),Ae.set(t,e))}}function A(e,t,n,o){t=X.apply([],t);var i,a=0,s=e.length,l=s-1,c=t[0],u=ie.isFunction(c);if(u||1<s&&"string"==typeof c&&!oe.checkClone&&He.test(c))return e.each((function(r){var i=e.eq(r);u&&(t[0]=c.call(this,r,i.html())),A(i,t,n,o)}));if(s){var h=g(t,e[0].ownerDocument,!1,e,o),f=h.firstChild;if(1===h.childNodes.length&&(h=f),f||o){for(i=(f=ie.map(m(h,"script"),C)).length;a<s;a++){var d=h;a!==l&&(d=ie.clone(d,!0,!0),i&&ie.merge(f,m(d,"script"))),n.call(e[a],d,a)}if(i)for(h=f[f.length-1].ownerDocument,ie.map(f,$),a=0;a<i;a++)d=f[a],Pe.test(d.type||"")&&!Se.access(d,"globalEval")&&ie.contains(h,d)&&(d.src?ie._evalUrl&&ie._evalUrl(d.src):r(d.textContent.replace(Ye,""),h))}}return e}function _(e,t,r){for(var n=t?ie.filter(t,e):e,o=0;null!=(t=n[o]);o++)r||1!==t.nodeType||ie.cleanData(m(t)),t.parentNode&&(r&&ie.contains(t.ownerDocument,t)&&v(m(t,"script")),t.parentNode.removeChild(t));return e}function M(e,t,r){var n=e.style;if(r=r||Ke(e)){var o=r.getPropertyValue(t)||r[t];if(""!==o||ie.contains(e.ownerDocument,e)||(o=ie.style(e,t)),!oe.pixelMarginRight()&&Xe.test(o)&&Ze.test(t)){e=n.width,t=n.minWidth;var i=n.maxWidth;n.minWidth=n.maxWidth=n.width=o,o=r.width,n.width=e,n.minWidth=t,n.maxWidth=i}}return void 0!==o?o+"":o}function z(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}function T(e){var t=ie.cssProps[e];if(!t){t=ie.cssProps;e:{var r=e;if(!(r in nt)){for(var n=r[0].toUpperCase()+r.slice(1),o=rt.length;o--;)if((r=rt[o]+n)in nt)break e;r=void 0}}t=t[e]=r||e}return t}function L(e,t,r){return(e=Te.exec(t))?Math.max(0,e[2]-(r||0))+(e[3]||"px"):t}function E(e,t,r,n,o){var i=0;for(t=r===(n?"border":"content")?4:"width"===t?1:0;4>t;t+=2)"margin"===r&&(i+=ie.css(e,r+Le[t],!0,o)),n?("content"===r&&(i-=ie.css(e,"padding"+Le[t],!0,o)),"margin"!==r&&(i-=ie.css(e,"border"+Le[t]+"Width",!0,o))):(i+=ie.css(e,"padding"+Le[t],!0,o),"padding"!==r&&(i+=ie.css(e,"border"+Le[t]+"Width",!0,o)));return i}function F(e,t,r){var n=Ke(e),o=M(e,t,n),i="border-box"===ie.css(e,"boxSizing",!1,n);if(Xe.test(o))return o;var a=i&&(oe.boxSizingReliable()||o===e.style[t]);return"auto"===o&&(o=e["offset"+t[0].toUpperCase()+t.slice(1)]),(o=parseFloat(o)||0)+E(e,t,r||(i?"border":"content"),a,n)+"px"}function k(e,t,r,n,o){return new k.prototype.init(e,t,r,n,o)}function I(){it&&(!1===W.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(I):e.setTimeout(I,ie.fx.interval),ie.fx.tick())}function O(){return e.setTimeout((function(){ot=void 0})),ot=ie.now()}function P(e,t){var r=0,n={height:e};for(t=t?1:0;4>r;r+=2-t){var o=Le[r];n["margin"+o]=n["padding"+o]=e}return t&&(n.opacity=n.width=e),n}function N(e,t,r){for(var n,o=(j.tweeners[t]||[]).concat(j.tweeners["*"]),i=0,a=o.length;i<a;i++)if(n=o[i].call(r,t,e))return n}function j(e,t,r){var n,o=0,i=j.prefilters.length,a=ie.Deferred().always((function(){delete s.elem})),s=function(){if(n)return!1;for(var t=ot||O(),r=1-((t=Math.max(0,l.startTime+l.duration-t))/l.duration||0),o=0,i=l.tweens.length;o<i;o++)l.tweens[o].run(r);return a.notifyWith(e,[l,r,t]),1>r&&i?t:(i||a.notifyWith(e,[l,1,0]),a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:ie.extend({},t),opts:ie.extend(!0,{specialEasing:{},easing:ie.easing._default},r),originalProperties:t,originalOptions:r,startTime:ot||O(),duration:r.duration,tweens:[],createTween:function(t,r){return t=ie.Tween(e,l.opts,t,r,l.opts.specialEasing[t]||l.opts.easing),l.tweens.push(t),t},stop:function(t){var r=0,o=t?l.tweens.length:0;if(n)return this;for(n=!0;r<o;r++)l.tweens[r].run(1);return t?(a.notifyWith(e,[l,1,0]),a.resolveWith(e,[l,t])):a.rejectWith(e,[l,t]),this}});for(function(e,t){var r,n;for(r in e){var o=ie.camelCase(r),i=t[o],a=e[r];if(Array.isArray(a)&&(i=a[1],a=e[r]=a[0]),r!==o&&(e[o]=a,delete e[r]),(n=ie.cssHooks[o])&&"expand"in n)for(r in a=n.expand(a),delete e[o],a)r in e||(e[r]=a[r],t[r]=i);else t[o]=i}}(r=l.props,l.opts.specialEasing);o<i;o++)if(t=j.prefilters[o].call(l,e,r,l.opts))return ie.isFunction(t.stop)&&(ie._queueHooks(l.elem,l.opts.queue).stop=ie.proxy(t.stop,t)),t;return ie.map(r,N,l),ie.isFunction(l.opts.start)&&l.opts.start.call(e,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),ie.fx.timer(ie.extend(s,{elem:e,anim:l,queue:l.opts.queue})),l}function R(e){return(e.match(xe)||[]).join(" ")}function V(e){return e.getAttribute&&e.getAttribute("class")||""}function B(e,t,r,n){var o;if(Array.isArray(t))ie.each(t,(function(t,o){r||gt.test(e)?n(e,o):B(e+"["+("object"==typeof o&&null!=o?t:"")+"]",o,r,n)}));else if(r||"object"!==ie.type(t))n(e,t);else for(o in t)B(e+"["+o+"]",t[o],r,n)}function U(e){return function(t,r){"string"!=typeof t&&(r=t,t="*");var n=0,o=t.toLowerCase().match(xe)||[];if(ie.isFunction(r))for(;t=o[n++];)"+"===t[0]?(t=t.slice(1)||"*",(e[t]=e[t]||[]).unshift(r)):(e[t]=e[t]||[]).push(r)}}function G(e,t,r,n){function o(s){var l;return i[s]=!0,ie.each(e[s]||[],(function(e,s){return"string"!=typeof(e=s(t,r,n))||a||i[e]?a?!(l=e):void 0:(t.dataTypes.unshift(e),o(e),!1)})),l}var i={},a=e===Mt;return o(t.dataTypes[0])||!i["*"]&&o("*")}function q(e,t){var r,n,o=ie.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((o[r]?e:n||(n={}))[r]=t[r]);return n&&ie.extend(!0,e,n),e}var H=[],W=e.document,Y=Object.getPrototypeOf,Z=H.slice,X=H.concat,K=H.push,Q=H.indexOf,J={},ee=J.toString,te=J.hasOwnProperty,re=te.toString,ne=re.call(Object),oe={},ie=function(e,t){return new ie.fn.init(e,t)},ae=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,se=/^-ms-/,le=/-([a-z])/g,ce=function(e,t){return t.toUpperCase()};ie.fn=ie.prototype={jquery:"3.2.1",constructor:ie,length:0,toArray:function(){return Z.call(this)},get:function(e){return null==e?Z.call(this):0>e?this[e+this.length]:this[e]},pushStack:function(e){return(e=ie.merge(this.constructor(),e)).prevObject=this,e},each:function(e){return ie.each(this,e)},map:function(e){return this.pushStack(ie.map(this,(function(t,r){return e.call(t,r,t)})))},slice:function(){return this.pushStack(Z.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length;return e=+e+(0>e?t:0),this.pushStack(0<=e&&e<t?[this[e]]:[])},end:function(){return this.prevObject||this.constructor()},push:K,sort:H.sort,splice:H.splice},ie.extend=ie.fn.extend=function(){var e,t,r,n=arguments[0]||{},o=1,i=arguments.length,a=!1;for("boolean"==typeof n&&(a=n,n=arguments[o]||{},o++),"object"==typeof n||ie.isFunction(n)||(n={}),o===i&&(n=this,o--);o<i;o++)if(null!=(e=arguments[o]))for(t in e){var s=n[t],l=e[t];n!==l&&(a&&l&&(ie.isPlainObject(l)||(r=Array.isArray(l)))?(r?(r=!1,s=s&&Array.isArray(s)?s:[]):s=s&&ie.isPlainObject(s)?s:{},n[t]=ie.extend(a,s,l)):void 0!==l&&(n[t]=l))}return n},ie.extend({expando:"jQuery"+("3.2.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw Error(e)},noop:function(){},isFunction:function(e){return"function"===ie.type(e)},isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=ie.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},isPlainObject:function(e){return!(!e||"[object Object]"!==ee.call(e)||(e=Y(e))&&("function"!=typeof(e=te.call(e,"constructor")&&e.constructor)||re.call(e)!==ne))},isEmptyObject:function(e){for(var t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?J[ee.call(e)]||"object":typeof e},globalEval:function(e){r(e)},camelCase:function(e){return e.replace(se,"ms-").replace(le,ce)},each:function(e,t){var r,o=0;if(n(e))for(r=e.length;o<r&&!1!==t.call(e[o],o,e[o]);o++);else for(o in e)if(!1===t.call(e[o],o,e[o]))break;return e},trim:function(e){return null==e?"":(e+"").replace(ae,"")},makeArray:function(e,t){return t=t||[],null!=e&&(n(Object(e))?ie.merge(t,"string"==typeof e?[e]:e):K.call(t,e)),t},inArray:function(e,t,r){return null==t?-1:Q.call(t,e,r)},merge:function(e,t){for(var r=+t.length,n=0,o=e.length;n<r;n++)e[o++]=t[n];return e.length=o,e},grep:function(e,t,r){for(var n=[],o=0,i=e.length,a=!r;o<i;o++)(r=!t(e[o],o))!==a&&n.push(e[o]);return n},map:function(e,t,r){var o,i=0,a=[];if(n(e))for(o=e.length;i<o;i++){var s=t(e[i],i,r);null!=s&&a.push(s)}else for(i in e)null!=(s=t(e[i],i,r))&&a.push(s);return X.apply([],a)},guid:1,proxy:function(e,t){if("string"==typeof t){var r=e[t];t=e,e=r}if(ie.isFunction(e)){var n=Z.call(arguments,2);return(r=function(){return e.apply(t||this,n.concat(Z.call(arguments)))}).guid=e.guid=e.guid||ie.guid++,r}},now:Date.now,support:oe}),"function"==typeof Symbol&&(ie.fn[Symbol.iterator]=H[Symbol.iterator]),ie.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){J["[object "+t+"]"]=t.toLowerCase()}));var ue=function(e){function t(e,t,r,n){var o,i,a,s,l=t&&t.ownerDocument,c=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==c&&9!==c&&11!==c)return r;if(!n&&((t?t.ownerDocument||t:E)!==$&&de(t),t=t||$,A)){if(11!==c&&(s=ne.exec(e)))if(o=s[1]){if(9===c){if(!(i=t.getElementById(o)))return r;if(i.id===o)return r.push(i),r}else if(l&&(i=l.getElementById(o))&&T(t,i)&&i.id===o)return r.push(i),r}else{if(s[2])return U.apply(r,t.getElementsByTagName(e)),r;if((o=s[3])&&he.getElementsByClassName&&t.getElementsByClassName)return U.apply(r,t.getElementsByClassName(o)),r}if(!(!he.qsa||P[e+" "]||_&&_.test(e))){if(1!==c){l=t;var u=e}else if("object"!==t.nodeName.toLowerCase()){for((a=t.getAttribute("id"))?a=a.replace(se,le):t.setAttribute("id",a=L),o=(i=ve(e)).length;o--;)i[o]="#"+a+" "+d(i[o]);u=i.join(","),l=oe.test(e)&&h(t.parentNode)||t}if(u)try{return U.apply(r,l.querySelectorAll(u)),r}catch(e){}finally{a===L&&t.removeAttribute("id")}}}return ye(e.replace(W,"$1"),t,r,n)}function r(){var e=[];return function t(r,n){return e.push(r+" ")>me.cacheLength&&delete t[e.shift()],t[r+" "]=n}}function n(e){return e[L]=!0,e}function o(e){var t=$.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t)}}function i(e,t){for(var r=(e=e.split("|")).length;r--;)me.attrHandle[e[r]]=t}function a(e,t){var r=t&&e,n=r&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(r)for(;r=r.nextSibling;)if(r===t)return-1;return e?1:-1}function s(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function l(e){return function(t){var r=t.nodeName.toLowerCase();return("input"===r||"button"===r)&&t.type===e}}function c(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ue(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function u(e){return n((function(t){return t=+t,n((function(r,n){for(var o,i=e([],r.length,t),a=i.length;a--;)r[o=i[a]]&&(r[o]=!(n[o]=r[o]))}))}))}function h(e){return e&&void 0!==e.getElementsByTagName&&e}function f(){}function d(e){for(var t=0,r=e.length,n="";t<r;t++)n+=e[t].value;return n}function p(e,t,r){var n=t.dir,o=t.next,i=o||n,a=r&&"parentNode"===i,s=k++;return t.first?function(t,r,o){for(;t=t[n];)if(1===t.nodeType||a)return e(t,r,o);return!1}:function(t,r,l){var c,u=[F,s];if(l){for(;t=t[n];)if((1===t.nodeType||a)&&e(t,r,l))return!0}else for(;t=t[n];)if(1===t.nodeType||a){var h=t[L]||(t[L]={});if(h=h[t.uniqueID]||(h[t.uniqueID]={}),o&&o===t.nodeName.toLowerCase())t=t[n]||t;else{if((c=h[i])&&c[0]===F&&c[1]===s)return u[2]=c[2];if(h[i]=u,u[2]=e(t,r,l))return!0}}return!1}}function m(e){return 1<e.length?function(t,r,n){for(var o=e.length;o--;)if(!e[o](t,r,n))return!1;return!0}:e[0]}function v(e,t,r,n,o){for(var i,a=[],s=0,l=e.length,c=null!=t;s<l;s++)(i=e[s])&&(r&&!r(i,n,o)||(a.push(i),c&&t.push(s)));return a}function g(e,r,o,i,a,s){return i&&!i[L]&&(i=g(i)),a&&!a[L]&&(a=g(a,s)),n((function(n,s,l,c){var u,h,f=[],d=[],p=s.length;if(!(h=n)){h=r||"*";for(var m=l.nodeType?[l]:l,g=[],y=0,b=m.length;y<b;y++)t(h,m[y],g);h=g}if(h=!e||!n&&r?h:v(h,f,e,l,c),m=o?a||(n?e:p||i)?[]:s:h,o&&o(h,m,l,c),i){var x=v(m,d);for(i(x,[],l,c),l=x.length;l--;)(u=x[l])&&(m[d[l]]=!(h[d[l]]=u))}if(n){if(a||e){if(a){for(x=[],l=m.length;l--;)(u=m[l])&&x.push(h[l]=u);a(null,m=[],x,c)}for(l=m.length;l--;)(u=m[l])&&-1<(x=a?q(n,u):f[l])&&(n[x]=!(s[x]=u))}}else m=v(m===s?m.splice(p,m.length):m),a?a(null,s,m,c):U.apply(s,m)}))}function y(e){for(var t,r,n=e.length,o=me.relative[e[0].type],i=o||me.relative[" "],a=o?1:0,s=p((function(e){return e===t}),i,!0),l=p((function(e){return-1<q(t,e)}),i,!0),c=[function(e,r,n){return e=!o&&(n||r!==w)||((t=r).nodeType?s(e,r,n):l(e,r,n)),t=null,e}];a<n;a++)if(i=me.relative[e[a].type])c=[p(m(c),i)];else{if((i=me.filter[e[a].type].apply(null,e[a].matches))[L]){for(r=++a;r<n&&!me.relative[e[r].type];r++);return g(1<a&&m(c),1<a&&d(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(W,"$1"),i,a<r&&y(e.slice(a,r)),r<n&&y(e=e.slice(r)),r<n&&d(e))}c.push(i)}return m(c)}function b(e,r){var o=0<r.length,i=0<e.length,a=function(n,a,s,l,c){var u,h,f=0,d="0",p=n&&[],m=[],g=w,y=n||i&&me.find.TAG("*",c),b=F+=null==g?1:Math.random()||.1,x=y.length;for(c&&(w=a===$||a||c);d!==x&&null!=(u=y[d]);d++){if(i&&u){var D=0;for(a||u.ownerDocument===$||(de(u),s=!A);h=e[D++];)if(h(u,a||$,s)){l.push(u);break}c&&(F=b)}o&&((u=!h&&u)&&f--,n&&p.push(u))}if(f+=d,o&&d!==f){for(D=0;h=r[D++];)h(p,m,a,s);if(n){if(0<f)for(;d--;)p[d]||m[d]||(m[d]=V.call(l));m=v(m)}U.apply(l,m),c&&!n&&0<m.length&&1<f+r.length&&t.uniqueSort(l)}return c&&(F=b,w=g),p};return o?n(a):a}var x,w,D,C,$,S,A,_,M,z,T,L="sizzle"+1*new Date,E=e.document,F=0,k=0,I=r(),O=r(),P=r(),N=function(e,t){return e===t&&(C=!0),0},j={}.hasOwnProperty,R=[],V=R.pop,B=R.push,U=R.push,G=R.slice,q=function(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},H=/[\x20\t\r\n\f]+/g,W=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,Y=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,Z=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,X=/=[\x20\t\r\n\f]*([^\]'"]*?)[\x20\t\r\n\f]*\]/g,K=/:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,Q=/^(?:\\.|[\w-]|[^\x00-\xa0])+$/,J={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:/^((?:\\.|[\w-]|[^\x00-\xa0])+|[*])/,ATTR:/^\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\]/,PSEUDO:/^:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},ee=/^(?:input|select|textarea|button)$/i,te=/^h\d$/i,re=/^[^{]+\{\s*\[native \w/,ne=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,oe=/[+~]/,ie=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/gi,ae=function(e,t,r){return(e="0x"+t-65536)!=e||r?t:0>e?String.fromCharCode(e+65536):String.fromCharCode(e>>10|55296,1023&e|56320)},se=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,le=function(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ce=function(){de()},ue=p((function(e){return!0===e.disabled&&("form"in e||"label"in e)}),{dir:"parentNode",next:"legend"});try{U.apply(R=G.call(E.childNodes),E.childNodes),R[E.childNodes.length].nodeType}catch(e){U={apply:R.length?function(e,t){B.apply(e,G.call(t))}:function(e,t){for(var r=e.length,n=0;e[r++]=t[n++];);e.length=r-1}}}var he=t.support={},fe=t.isXML=function(e){return!!(e=e&&(e.ownerDocument||e).documentElement)&&"HTML"!==e.nodeName},de=t.setDocument=function(e){var t;return(e=e?e.ownerDocument||e:E)!==$&&9===e.nodeType&&e.documentElement?(S=($=e).documentElement,A=!fe($),E!==$&&(t=$.defaultView)&&t.top!==t&&(t.addEventListener?t.addEventListener("unload",ce,!1):t.attachEvent&&t.attachEvent("onunload",ce)),he.attributes=o((function(e){return e.className="i",!e.getAttribute("className")})),he.getElementsByTagName=o((function(e){return e.appendChild($.createComment("")),!e.getElementsByTagName("*").length})),he.getElementsByClassName=re.test($.getElementsByClassName),he.getById=o((function(e){return S.appendChild(e).id=L,!$.getElementsByName||!$.getElementsByName(L).length})),he.getById?(me.filter.ID=function(e){var t=e.replace(ie,ae);return function(e){return e.getAttribute("id")===t}},me.find.ID=function(e,t){if(void 0!==t.getElementById&&A)return(e=t.getElementById(e))?[e]:[]}):(me.filter.ID=function(e){var t=e.replace(ie,ae);return function(e){return(e=void 0!==e.getAttributeNode&&e.getAttributeNode("id"))&&e.value===t}},me.find.ID=function(e,t){if(void 0!==t.getElementById&&A){var r,n=t.getElementById(e);if(n){if((r=n.getAttributeNode("id"))&&r.value===e)return[n];var o=t.getElementsByName(e);for(t=0;n=o[t++];)if((r=n.getAttributeNode("id"))&&r.value===e)return[n]}return[]}}),me.find.TAG=he.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):he.qsa?t.querySelectorAll(e):void 0}:function(e,t){var r=[],n=0;if(t=t.getElementsByTagName(e),"*"===e){for(;e=t[n++];)1===e.nodeType&&r.push(e);return r}return t},me.find.CLASS=he.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&A)return t.getElementsByClassName(e)},M=[],_=[],(he.qsa=re.test($.querySelectorAll))&&(o((function(e){S.appendChild(e).innerHTML="<a id='"+L+"'></a><select id='"+L+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&_.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll("[selected]").length||_.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)"),e.querySelectorAll("[id~="+L+"-]").length||_.push("~="),e.querySelectorAll(":checked").length||_.push(":checked"),e.querySelectorAll("a#"+L+"+*").length||_.push(".#.+[+~]")})),o((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=$.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&_.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&_.push(":enabled",":disabled"),S.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&_.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),_.push(",.*:")}))),(he.matchesSelector=re.test(z=S.matches||S.webkitMatchesSelector||S.mozMatchesSelector||S.oMatchesSelector||S.msMatchesSelector))&&o((function(e){he.disconnectedMatch=z.call(e,"*"),z.call(e,"[s!='']:x"),M.push("!=",":((?:\\\\.|[\\w-]|[^\0-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\0-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\0-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)")})),_=_.length&&new RegExp(_.join("|")),M=M.length&&new RegExp(M.join("|")),T=(t=re.test(S.compareDocumentPosition))||re.test(S.contains)?function(e,t){var r=9===e.nodeType?e.documentElement:e;return e===(t=t&&t.parentNode)||!(!t||1!==t.nodeType||!(r.contains?r.contains(t):e.compareDocumentPosition&&16&e.compareDocumentPosition(t)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},N=t?function(e,t){if(e===t)return C=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!he.sortDetached&&t.compareDocumentPosition(e)===r?e===$||e.ownerDocument===E&&T(E,e)?-1:t===$||t.ownerDocument===E&&T(E,t)?1:D?q(D,e)-q(D,t):0:4&r?-1:1)}:function(e,t){if(e===t)return C=!0,0;var r=0,n=e.parentNode,o=t.parentNode,i=[e],s=[t];if(!n||!o)return e===$?-1:t===$?1:n?-1:o?1:D?q(D,e)-q(D,t):0;if(n===o)return a(e,t);for(;e=e.parentNode;)i.unshift(e);for(e=t;e=e.parentNode;)s.unshift(e);for(;i[r]===s[r];)r++;return r?a(i[r],s[r]):i[r]===E?-1:s[r]===E?1:0},$):$};t.matches=function(e,r){return t(e,null,null,r)},t.matchesSelector=function(e,r){if((e.ownerDocument||e)!==$&&de(e),r=r.replace(X,"='$1']"),!(!he.matchesSelector||!A||P[r+" "]||M&&M.test(r)||_&&_.test(r)))try{var n=z.call(e,r);if(n||he.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return 0<t(r,$,null,[e]).length},t.contains=function(e,t){return(e.ownerDocument||e)!==$&&de(e),T(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==$&&de(e);var r=me.attrHandle[t.toLowerCase()];return void 0!==(r=r&&j.call(me.attrHandle,t.toLowerCase())?r(e,t,!A):void 0)?r:he.attributes||!A?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.escape=function(e){return(e+"").replace(se,le)},t.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,r=[],n=0,o=0;if(C=!he.detectDuplicates,D=!he.sortStable&&e.slice(0),e.sort(N),C){for(;t=e[o++];)t===e[o]&&(n=r.push(o));for(;n--;)e.splice(r[n],1)}return D=null,e};var pe=t.getText=function(e){var t="",r=0,n=e.nodeType;if(n){if(1===n||9===n||11===n){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)t+=pe(e)}else if(3===n||4===n)return e.nodeValue}else for(;n=e[r++];)t+=pe(n);return t},me=t.selectors={cacheLength:50,createPseudo:n,match:J,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ie,ae),e[3]=(e[3]||e[4]||e[5]||"").replace(ie,ae),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,r=!e[6]&&e[2];return J.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":r&&K.test(r)&&(t=ve(r,!0))&&(t=r.indexOf(")",r.length-t)-r.length)&&(e[0]=e[0].slice(0,t),e[2]=r.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ie,ae).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=I[e+" "];return t||(t=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+e+"([\\x20\\t\\r\\n\\f]|$)"),I(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})))},ATTR:function(e,r,n){return function(o){return null==(o=t.attr(o,e))?"!="===r:!r||(o+="","="===r?o===n:"!="===r?o!==n:"^="===r?n&&0===o.indexOf(n):"*="===r?n&&-1<o.indexOf(n):"$="===r?n&&o.slice(-n.length)===n:"~="===r?-1<(" "+o.replace(H," ")+" ").indexOf(n):"|="===r&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,r,n,o){var i="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===n&&0===o?function(e){return!!e.parentNode}:function(t,r,l){var c,u;r=i!==a?"nextSibling":"previousSibling";var h=t.parentNode,f=s&&t.nodeName.toLowerCase();l=!l&&!s;var d=!1;if(h){if(i){for(;r;){for(c=t;c=c[r];)if(s?c.nodeName.toLowerCase()===f:1===c.nodeType)return!1;var p=r="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?h.firstChild:h.lastChild],a&&l){var m=(c=h)[L]||(c[L]={});for(d=(u=(d=(m=m[c.uniqueID]||(m[c.uniqueID]={}))[e]||[])[0]===F&&d[1])&&d[2],c=u&&h.childNodes[u];c=++u&&c&&c[r]||(d=u=0)||p.pop();)if(1===c.nodeType&&++d&&c===t){m[e]=[F,u,d];break}}else if(l&&(d=u=(d=(m=(m=(c=t)[L]||(c[L]={}))[c.uniqueID]||(m[c.uniqueID]={}))[e]||[])[0]===F&&d[1]),!1===d)for(;(c=++u&&c&&c[r]||(d=u=0)||p.pop())&&((s?c.nodeName.toLowerCase()!==f:1!==c.nodeType)||!++d||(l&&((m=(m=c[L]||(c[L]={}))[c.uniqueID]||(m[c.uniqueID]={}))[e]=[F,d]),c!==t)););return(d-=o)===n||0==d%n&&0<=d/n}}},PSEUDO:function(e,r){var o=me.pseudos[e]||me.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);if(o[L])return o(r);if(1<o.length){var i=[e,e,"",r];return me.setFilters.hasOwnProperty(e.toLowerCase())?n((function(e,t){for(var n,i=o(e,r),a=i.length;a--;)e[n=q(e,i[a])]=!(t[n]=i[a])})):function(e){return o(e,0,i)}}return o}},pseudos:{not:n((function(e){var t=[],r=[],o=ge(e.replace(W,"$1"));return o[L]?n((function(e,t,r,n){n=o(e,null,n,[]);for(var i=e.length;i--;)(r=n[i])&&(e[i]=!(t[i]=r))})):function(e,n,i){return t[0]=e,o(t,null,i,r),t[0]=null,!r.pop()}})),has:n((function(e){return function(r){return 0<t(e,r).length}})),contains:n((function(e){return e=e.replace(ie,ae),function(t){return-1<(t.textContent||t.innerText||pe(t)).indexOf(e)}})),lang:n((function(e){return Q.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(ie,ae).toLowerCase(),function(t){var r;do{if(r=A?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(r=r.toLowerCase())===e||0===r.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var r=e.location&&e.location.hash;return r&&r.slice(1)===t.id},root:function(e){return e===S},focus:function(e){return e===$.activeElement&&(!$.hasFocus||$.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:c(!1),disabled:c(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(6>e.nodeType)return!1;return!0},parent:function(e){return!me.pseudos.empty(e)},header:function(e){return te.test(e.nodeName)},input:function(e){return ee.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:u((function(){return[0]})),last:u((function(e,t){return[t-1]})),eq:u((function(e,t,r){return[0>r?r+t:r]})),even:u((function(e,t){for(var r=0;r<t;r+=2)e.push(r);return e})),odd:u((function(e,t){for(var r=1;r<t;r+=2)e.push(r);return e})),lt:u((function(e,t,r){for(t=0>r?r+t:r;0<=--t;)e.push(t);return e})),gt:u((function(e,t,r){for(r=0>r?r+t:r;++r<t;)e.push(r);return e}))}};for(x in me.pseudos.nth=me.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})me.pseudos[x]=s(x);for(x in{submit:!0,reset:!0})me.pseudos[x]=l(x);f.prototype=me.filters=me.pseudos,me.setFilters=new f;var ve=t.tokenize=function(e,r){var n,o,i,a,s;if(a=O[e+" "])return r?0:a.slice(0);a=e;var l=[];for(s=me.preFilter;a;){c&&!(n=Y.exec(a))||(n&&(a=a.slice(n[0].length)||a),l.push(o=[]));var c=!1;for(i in(n=Z.exec(a))&&(c=n.shift(),o.push({value:c,type:n[0].replace(W," ")}),a=a.slice(c.length)),me.filter)!(n=J[i].exec(a))||s[i]&&!(n=s[i](n))||(c=n.shift(),o.push({value:c,type:i,matches:n}),a=a.slice(c.length));if(!c)break}return r?a.length:a?t.error(e):O(e,l).slice(0)},ge=t.compile=function(e,t){var r,n=[],o=[],i=P[e+" "];if(!i){for(t||(t=ve(e)),r=t.length;r--;)(i=y(t[r]))[L]?n.push(i):o.push(i);(i=P(e,b(o,n))).selector=e}return i},ye=t.select=function(e,t,r,n){var o,i,a,s="function"==typeof e&&e,l=!n&&ve(e=s.selector||e);if(r=r||[],1===l.length){var c=l[0]=l[0].slice(0);if(2<c.length&&"ID"===(i=c[0]).type&&9===t.nodeType&&A&&me.relative[c[1].type]){if(!(t=(me.find.ID(i.matches[0].replace(ie,ae),t)||[])[0]))return r;s&&(t=t.parentNode),e=e.slice(c.shift().value.length)}for(o=J.needsContext.test(e)?0:c.length;o--&&(i=c[o],!me.relative[a=i.type]);)if((a=me.find[a])&&(n=a(i.matches[0].replace(ie,ae),oe.test(c[0].type)&&h(t.parentNode)||t))){if(c.splice(o,1),!(e=n.length&&d(c)))return U.apply(r,n),r;break}}return(s||ge(e,l))(n,t,!A,r,!t||oe.test(e)&&h(t.parentNode)||t),r};return he.sortStable=L.split("").sort(N).join("")===L,he.detectDuplicates=!!C,de(),he.sortDetached=o((function(e){return 1&e.compareDocumentPosition($.createElement("fieldset"))})),o((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||i("type|href|height|width",(function(e,t,r){if(!r)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),he.attributes&&o((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||i("value",(function(e,t,r){if(!r&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),o((function(e){return null==e.getAttribute("disabled")}))||i("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",(function(e,t,r){var n;if(!r)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null})),t}(e);ie.find=ue,ie.expr=ue.selectors,ie.expr[":"]=ie.expr.pseudos,ie.uniqueSort=ie.unique=ue.uniqueSort,ie.text=ue.getText,ie.isXMLDoc=ue.isXML,ie.contains=ue.contains,ie.escapeSelector=ue.escape;var he=function(e,t,r){for(var n=[],o=void 0!==r;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&ie(e).is(r))break;n.push(e)}return n},fe=function(e,t){for(var r=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&r.push(e);return r},de=ie.expr.match.needsContext,pe=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,me=/^.[^:#\[\.,]*$/;ie.filter=function(e,t,r){var n=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?ie.find.matchesSelector(n,e)?[n]:[]:ie.find.matches(e,ie.grep(t,(function(e){return 1===e.nodeType})))},ie.fn.extend({find:function(e){var t,r=this.length,n=this;if("string"!=typeof e)return this.pushStack(ie(e).filter((function(){for(t=0;t<r;t++)if(ie.contains(n[t],this))return!0})));var o=this.pushStack([]);for(t=0;t<r;t++)ie.find(e,n[t],o);return 1<r?ie.uniqueSort(o):o},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&de.test(e)?ie(e):e||[],!1).length}});var ve=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(ie.fn.init=function(e,t,r){if(!e)return this;if(r=r||ge,"string"==typeof e){var n="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:ve.exec(e);if(!n||!n[1]&&t)return!t||t.jquery?(t||r).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof ie?t[0]:t,ie.merge(this,ie.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:W,!0)),pe.test(n[1])&&ie.isPlainObject(t))for(n in t)ie.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n])}else(e=W.getElementById(n[2]))&&(this[0]=e,this.length=1);return this}return e.nodeType?(this[0]=e,this.length=1,this):ie.isFunction(e)?void 0!==r.ready?r.ready(e):e(ie):ie.makeArray(e,this)}).prototype=ie.fn;var ge=ie(W),ye=/^(?:parents|prev(?:Until|All))/,be={children:!0,contents:!0,next:!0,prev:!0};ie.fn.extend({has:function(e){var t=ie(e,this),r=t.length;return this.filter((function(){for(var e=0;e<r;e++)if(ie.contains(this,t[e]))return!0}))},closest:function(e,t){var r,n=0,o=this.length,i=[],a="string"!=typeof e&&ie(e);if(!de.test(e))for(;n<o;n++)for(r=this[n];r&&r!==t;r=r.parentNode)if(11>r.nodeType&&(a?-1<a.index(r):1===r.nodeType&&ie.find.matchesSelector(r,e))){i.push(r);break}return this.pushStack(1<i.length?ie.uniqueSort(i):i)},index:function(e){return e?"string"==typeof e?Q.call(ie(e),this[0]):Q.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ie.uniqueSort(ie.merge(this.get(),ie(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ie.each({parent:function(e){return(e=e.parentNode)&&11!==e.nodeType?e:null},parents:function(e){return he(e,"parentNode")},parentsUntil:function(e,t,r){return he(e,"parentNode",r)},next:function(e){return a(e,"nextSibling")},prev:function(e){return a(e,"previousSibling")},nextAll:function(e){return he(e,"nextSibling")},prevAll:function(e){return he(e,"previousSibling")},nextUntil:function(e,t,r){return he(e,"nextSibling",r)},prevUntil:function(e,t,r){return he(e,"previousSibling",r)},siblings:function(e){return fe((e.parentNode||{}).firstChild,e)},children:function(e){return fe(e.firstChild)},contents:function(e){return o(e,"iframe")?e.contentDocument:(o(e,"template")&&(e=e.content||e),ie.merge([],e.childNodes))}},(function(e,t){ie.fn[e]=function(r,n){var o=ie.map(this,t,r);return"Until"!==e.slice(-5)&&(n=r),n&&"string"==typeof n&&(o=ie.filter(n,o)),1<this.length&&(be[e]||ie.uniqueSort(o),ye.test(e)&&o.reverse()),this.pushStack(o)}}));var xe=/[^\x20\t\r\n\f]+/g;ie.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return ie.each(e.match(xe)||[],(function(e,r){t[r]=!0})),t}(e):ie.extend({},e);var t,r,n,o,i=[],a=[],s=-1,l=function(){for(o=o||e.once,n=t=!0;a.length;s=-1)for(r=a.shift();++s<i.length;)!1===i[s].apply(r[0],r[1])&&e.stopOnFalse&&(s=i.length,r=!1);e.memory||(r=!1),t=!1,o&&(i=r?[]:"")},c={add:function(){return i&&(r&&!t&&(s=i.length-1,a.push(r)),function t(r){ie.each(r,(function(r,n){ie.isFunction(n)?e.unique&&c.has(n)||i.push(n):n&&n.length&&"string"!==ie.type(n)&&t(n)}))}(arguments),r&&!t&&l()),this},remove:function(){return ie.each(arguments,(function(e,t){for(var r;-1<(r=ie.inArray(t,i,r));)i.splice(r,1),r<=s&&s--})),this},has:function(e){return e?-1<ie.inArray(e,i):0<i.length},empty:function(){return i&&(i=[]),this},disable:function(){return o=a=[],i=r="",this},disabled:function(){return!i},lock:function(){return o=a=[],r||t||(i=r=""),this},locked:function(){return!!o},fireWith:function(e,r){return o||(r=[e,(r=r||[]).slice?r.slice():r],a.push(r),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},ie.extend({Deferred:function(t){var r=[["notify","progress",ie.Callbacks("memory"),ie.Callbacks("memory"),2],["resolve","done",ie.Callbacks("once memory"),ie.Callbacks("once memory"),0,"resolved"],["reject","fail",ie.Callbacks("once memory"),ie.Callbacks("once memory"),1,"rejected"]],n="pending",o={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var e=arguments;return ie.Deferred((function(t){ie.each(r,(function(r,n){var o=ie.isFunction(e[n[4]])&&e[n[4]];i[n[1]]((function(){var e=o&&o.apply(this,arguments);e&&ie.isFunction(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[n[0]+"With"](this,o?[e]:arguments)}))})),e=null})).promise()},then:function(t,n,o){function i(t,r,n,o){return function(){var c=this,u=arguments,h=function(){if(!(t<a)){var e=n.apply(c,u);if(e===r.promise())throw new TypeError("Thenable self-resolution");var h=e&&("object"==typeof e||"function"==typeof e)&&e.then;ie.isFunction(h)?o?h.call(e,i(a,r,s,o),i(a,r,l,o)):(a++,h.call(e,i(a,r,s,o),i(a,r,l,o),i(a,r,s,r.notifyWith))):(n!==s&&(c=void 0,u=[e]),(o||r.resolveWith)(c,u))}},f=o?h:function(){try{h()}catch(e){ie.Deferred.exceptionHook&&ie.Deferred.exceptionHook(e,f.stackTrace),t+1>=a&&(n!==l&&(c=void 0,u=[e]),r.rejectWith(c,u))}};t?f():(ie.Deferred.getStackHook&&(f.stackTrace=ie.Deferred.getStackHook()),e.setTimeout(f))}}var a=0;return ie.Deferred((function(e){r[0][3].add(i(0,e,ie.isFunction(o)?o:s,e.notifyWith)),r[1][3].add(i(0,e,ie.isFunction(t)?t:s)),r[2][3].add(i(0,e,ie.isFunction(n)?n:l))})).promise()},promise:function(e){return null!=e?ie.extend(e,o):o}},i={};return ie.each(r,(function(e,t){var a=t[2],s=t[5];o[t[1]]=a.add,s&&a.add((function(){n=s}),r[3-e][2].disable,r[0][2].lock),a.add(t[3].fire),i[t[0]]=function(){return i[t[0]+"With"](this===i?void 0:this,arguments),this},i[t[0]+"With"]=a.fireWith})),o.promise(i),t&&t.call(i,i),i},when:function(e){var t=arguments.length,r=t,n=Array(r),o=Z.call(arguments),i=ie.Deferred(),a=function(e){return function(r){n[e]=this,o[e]=1<arguments.length?Z.call(arguments):r,--t||i.resolveWith(n,o)}};if(1>=t&&(c(e,i.done(a(r)).resolve,i.reject,!t),"pending"===i.state()||ie.isFunction(o[r]&&o[r].then)))return i.then();for(;r--;)c(o[r],a(r),i.reject);return i.promise()}});var we=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;ie.Deferred.exceptionHook=function(t,r){e.console&&e.console.warn&&t&&we.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,r)},ie.readyException=function(t){e.setTimeout((function(){throw t}))};var De=ie.Deferred();ie.fn.ready=function(e){return De.then(e).catch((function(e){ie.readyException(e)})),this},ie.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--ie.readyWait:ie.isReady)||(ie.isReady=!0,!0!==e&&0<--ie.readyWait||De.resolveWith(W,[ie]))}}),ie.ready.then=De.then,"complete"===W.readyState||"loading"!==W.readyState&&!W.documentElement.doScroll?e.setTimeout(ie.ready):(W.addEventListener("DOMContentLoaded",u),e.addEventListener("load",u));var Ce=function(e,t,r,n,o,i,a){var s=0,l=e.length,c=null==r;if("object"===ie.type(r))for(s in o=!0,r)Ce(e,t,s,r[s],!0,i,a);else if(void 0!==n&&(o=!0,ie.isFunction(n)||(a=!0),c&&(a?(t.call(e,n),t=null):(c=t,t=function(e,t,r){return c.call(ie(e),r)})),t))for(;s<l;s++)t(e[s],r,a?n:n.call(e[s],s,t(e[s],r)));return o?e:c?t.call(e):l?t(e[0],r):i},$e=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};h.uid=1,h.prototype={cache:function(e){var t=e[this.expando];return t||(t={},$e(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,r){var n;if(e=this.cache(e),"string"==typeof t)e[ie.camelCase(t)]=r;else for(n in t)e[ie.camelCase(n)]=t[n];return e},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][ie.camelCase(t)]},access:function(e,t,r){return void 0===t||t&&"string"==typeof t&&void 0===r?this.get(e,t):(this.set(e,t,r),void 0!==r?r:t)},remove:function(e,t){var r,n=e[this.expando];if(void 0!==n){if(void 0!==t)for((t=Array.isArray(t)?t.map(ie.camelCase):(t=ie.camelCase(t))in n?[t]:t.match(xe)||[],r=t.length);r--;)delete n[t[r]];(void 0===t||ie.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){return void 0!==(e=e[this.expando])&&!ie.isEmptyObject(e)}};var Se=new h,Ae=new h,_e=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Me=/[A-Z]/g;ie.extend({hasData:function(e){return Ae.hasData(e)||Se.hasData(e)},data:function(e,t,r){return Ae.access(e,t,r)},removeData:function(e,t){Ae.remove(e,t)},_data:function(e,t,r){return Se.access(e,t,r)},_removeData:function(e,t){Se.remove(e,t)}}),ie.fn.extend({data:function(e,t){var r,n=this[0],o=n&&n.attributes;if(void 0===e){if(this.length){var i=Ae.get(n);if(1===n.nodeType&&!Se.get(n,"hasDataAttrs")){for(r=o.length;r--;)if(o[r]){var a=o[r].name;0===a.indexOf("data-")&&(a=ie.camelCase(a.slice(5)),f(n,a,i[a]))}Se.set(n,"hasDataAttrs",!0)}}return i}return"object"==typeof e?this.each((function(){Ae.set(this,e)})):Ce(this,(function(t){if(n&&void 0===t){var r=Ae.get(n,e);if(void 0!==r)return r;if(void 0!==(r=f(n,e)))return r}else this.each((function(){Ae.set(this,e,t)}))}),null,t,1<arguments.length,null,!0)},removeData:function(e){return this.each((function(){Ae.remove(this,e)}))}}),ie.extend({queue:function(e,t,r){if(e){t=(t||"fx")+"queue";var n=Se.get(e,t);return r&&(!n||Array.isArray(r)?n=Se.access(e,t,ie.makeArray(r)):n.push(r)),n||[]}},dequeue:function(e,t){t=t||"fx";var r=ie.queue(e,t),n=r.length,o=r.shift(),i=ie._queueHooks(e,t);"inprogress"===o&&(o=r.shift(),n--),o&&("fx"===t&&r.unshift("inprogress"),delete i.stop,o.call(e,(function(){ie.dequeue(e,t)}),i)),!n&&i&&i.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return Se.get(e,r)||Se.access(e,r,{empty:ie.Callbacks("once memory").add((function(){Se.remove(e,[t+"queue",r])}))})}}),ie.fn.extend({queue:function(e,t){var r=2;return"string"!=typeof e&&(t=e,e="fx",r--),arguments.length<r?ie.queue(this[0],e):void 0===t?this:this.each((function(){var r=ie.queue(this,e,t);ie._queueHooks(this,e),"fx"===e&&"inprogress"!==r[0]&&ie.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){ie.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var r,n=1,o=ie.Deferred(),i=this,a=this.length,s=function(){--n||o.resolveWith(i,[i])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(r=Se.get(i[a],e+"queueHooks"))&&r.empty&&(n++,r.empty.add(s));return s(),o.promise(t)}});var ze=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Te=new RegExp("^(?:([+-])=|)("+ze+")([a-z%]*)$","i"),Le=["Top","Right","Bottom","Left"],Ee=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ie.contains(e.ownerDocument,e)&&"none"===ie.css(e,"display")},Fe=function(e,t,r,n){var o,i={};for(o in t)i[o]=e.style[o],e.style[o]=t[o];for(o in r=r.apply(e,n||[]),t)e.style[o]=i[o];return r},ke={};ie.fn.extend({show:function(){return p(this,!0)},hide:function(){return p(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){Ee(this)?ie(this).show():ie(this).hide()}))}});var Ie=/^(?:checkbox|radio)$/i,Oe=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Pe=/^$|\/(?:java|ecma)script/i,Ne={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ne.optgroup=Ne.option,Ne.tbody=Ne.tfoot=Ne.colgroup=Ne.caption=Ne.thead,Ne.th=Ne.td;var je=/<|&#?\w+;/;!function(){var e=W.createDocumentFragment().appendChild(W.createElement("div")),t=W.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),oe.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",oe.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var Re=W.documentElement,Ve=/^key/,Be=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ue=/^([^.]*)(?:\.(.+)|)/;ie.event={global:{},add:function(e,t,r,n,o){var i,a,s,l,c;if(s=Se.get(e)){if(r.handler){var u=r;r=u.handler,o=u.selector}for(o&&ie.find.matchesSelector(Re,o),r.guid||(r.guid=ie.guid++),(a=s.events)||(a=s.events={}),(i=s.handle)||(i=s.handle=function(t){return void 0!==ie&&ie.event.triggered!==t.type?ie.event.dispatch.apply(e,arguments):void 0}),s=(t=(t||"").match(xe)||[""]).length;s--;){var h=Ue.exec(t[s])||[],f=l=h[1],d=(h[2]||"").split(".").sort();f&&(h=ie.event.special[f]||{},f=(o?h.delegateType:h.bindType)||f,h=ie.event.special[f]||{},l=ie.extend({type:f,origType:l,data:n,handler:r,guid:r.guid,selector:o,needsContext:o&&ie.expr.match.needsContext.test(o),namespace:d.join(".")},u),(c=a[f])||((c=a[f]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,n,d,i)||e.addEventListener&&e.addEventListener(f,i)),h.add&&(h.add.call(e,l),l.handler.guid||(l.handler.guid=r.guid)),o?c.splice(c.delegateCount++,0,l):c.push(l),ie.event.global[f]=!0)}}},remove:function(e,t,r,n,o){var i,a,s,l,c,u=Se.hasData(e)&&Se.get(e);if(u&&(s=u.events)){for(l=(t=(t||"").match(xe)||[""]).length;l--;){var h=Ue.exec(t[l])||[],f=c=h[1],d=(h[2]||"").split(".").sort();if(f){var p=ie.event.special[f]||{},m=s[f=(n?p.delegateType:p.bindType)||f]||[];for(h=h[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=i=m.length;i--;){var v=m[i];!o&&c!==v.origType||r&&r.guid!==v.guid||h&&!h.test(v.namespace)||n&&n!==v.selector&&("**"!==n||!v.selector)||(m.splice(i,1),v.selector&&m.delegateCount--,p.remove&&p.remove.call(e,v))}a&&!m.length&&(p.teardown&&!1!==p.teardown.call(e,d,u.handle)||ie.removeEvent(e,f,u.handle),delete s[f])}else for(f in s)ie.event.remove(e,f+t[l],r,n,!0)}ie.isEmptyObject(s)&&Se.remove(e,"handle events")}},dispatch:function(e){var t,r,n,o=ie.event.fix(e),i=Array(arguments.length),a=(Se.get(this,"events")||{})[o.type]||[],s=ie.event.special[o.type]||{};for(i[0]=o,t=1;t<arguments.length;t++)i[t]=arguments[t];if(o.delegateTarget=this,!s.preDispatch||!1!==s.preDispatch.call(this,o)){var l=ie.event.handlers.call(this,o,a);for(t=0;(n=l[t++])&&!o.isPropagationStopped();)for(o.currentTarget=n.elem,a=0;(r=n.handlers[a++])&&!o.isImmediatePropagationStopped();)o.rnamespace&&!o.rnamespace.test(r.namespace)||(o.handleObj=r,o.data=r.data,void 0!==(r=((ie.event.special[r.origType]||{}).handle||r.handler).apply(n.elem,i))&&!1===(o.result=r)&&(o.preventDefault(),o.stopPropagation()));return s.postDispatch&&s.postDispatch.call(this,o),o.result}},handlers:function(e,t){var r,n=[],o=t.delegateCount,i=e.target;if(o&&i.nodeType&&!("click"===e.type&&1<=e.button))for(;i!==this;i=i.parentNode||this)if(1===i.nodeType&&("click"!==e.type||!0!==i.disabled)){var a=[],s={};for(r=0;r<o;r++){var l=t[r],c=l.selector+" ";void 0===s[c]&&(s[c]=l.needsContext?-1<ie(c,this).index(i):ie.find(c,this,null,[i]).length),s[c]&&a.push(l)}a.length&&n.push({elem:i,handlers:a})}return o<t.length&&n.push({elem:this,handlers:t.slice(o)}),n},addProp:function(e,t){Object.defineProperty(ie.Event.prototype,e,{enumerable:!0,configurable:!0,get:ie.isFunction(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[ie.expando]?e:new ie.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==x()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===x()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&o(this,"input"))return this.click(),!1},_default:function(e){return o(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},ie.removeEvent=function(e,t,r){e.removeEventListener&&e.removeEventListener(t,r)},ie.Event=function(e,t){if(!(this instanceof ie.Event))return new ie.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?y:b,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&ie.extend(this,t),this.timeStamp=e&&e.timeStamp||ie.now(),this[ie.expando]=!0},ie.Event.prototype={constructor:ie.Event,isDefaultPrevented:b,isPropagationStopped:b,isImmediatePropagationStopped:b,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=y,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=y,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=y,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},ie.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Ve.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Be.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},ie.event.addProp),ie.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){ie.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r=e.relatedTarget,n=e.handleObj;if(!r||r!==this&&!ie.contains(this,r)){e.type=n.origType;var o=n.handler.apply(this,arguments);e.type=t}return o}}})),ie.fn.extend({on:function(e,t,r,n){return w(this,e,t,r,n)},one:function(e,t,r,n){return w(this,e,t,r,n,1)},off:function(e,t,r){if(e&&e.preventDefault&&e.handleObj){var n=e.handleObj;return ie(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this}if("object"==typeof e){for(n in e)this.off(n,t,e[n]);return this}return!1!==t&&"function"!=typeof t||(r=t,t=void 0),!1===r&&(r=b),this.each((function(){ie.event.remove(this,e,r,t)}))}});var Ge=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,qe=/<script|<style|<link/i,He=/checked\s*(?:[^=]|=\s*.checked.)/i,We=/^true\/(.*)/,Ye=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;ie.extend({htmlPrefilter:function(e){return e.replace(Ge,"<$1></$2>")},clone:function(e,t,r){var n,o=e.cloneNode(!0),i=ie.contains(e.ownerDocument,e);if(!(oe.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ie.isXMLDoc(e))){var a=m(o),s=m(e),l=0;for(n=s.length;l<n;l++){var c=s[l],u=a[l],h=u.nodeName.toLowerCase();"input"===h&&Ie.test(c.type)?u.checked=c.checked:"input"!==h&&"textarea"!==h||(u.defaultValue=c.defaultValue)}}if(t)if(r)for(s=s||m(e),a=a||m(o),l=0,n=s.length;l<n;l++)S(s[l],a[l]);else S(e,o);return 0<(a=m(o,"script")).length&&v(a,!i&&m(e,"script")),o},cleanData:function(e){for(var t,r,n,o=ie.event.special,i=0;void 0!==(r=e[i]);i++)if($e(r)){if(t=r[Se.expando]){if(t.events)for(n in t.events)o[n]?ie.event.remove(r,n):ie.removeEvent(r,n,t.handle);r[Se.expando]=void 0}r[Ae.expando]&&(r[Ae.expando]=void 0)}}}),ie.fn.extend({detach:function(e){return _(this,e,!0)},remove:function(e){return _(this,e)},text:function(e){return Ce(this,(function(e){return void 0===e?ie.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return A(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||D(this,e).appendChild(e)}))},prepend:function(){return A(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=D(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return A(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return A(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(ie.cleanData(m(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return ie.clone(this,e,t)}))},html:function(e){return Ce(this,(function(e){var t=this[0]||{},r=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!qe.test(e)&&!Ne[(Oe.exec(e)||["",""])[1].toLowerCase()]){e=ie.htmlPrefilter(e);try{for(;r<n;r++)1===(t=this[r]||{}).nodeType&&(ie.cleanData(m(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return A(this,arguments,(function(t){var r=this.parentNode;0>ie.inArray(this,e)&&(ie.cleanData(m(this)),r&&r.replaceChild(t,this))}),e)}}),ie.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){ie.fn[e]=function(e){for(var r=[],n=ie(e),o=n.length-1,i=0;i<=o;i++)e=i===o?this:this.clone(!0),ie(n[i])[t](e),K.apply(r,e.get());return this.pushStack(r)}}));var Ze=/^margin/,Xe=new RegExp("^("+ze+")(?!px)[a-z%]+$","i"),Ke=function(t){var r=t.ownerDocument.defaultView;return r&&r.opener||(r=e),r.getComputedStyle(t)};!function(){function t(){if(s){s.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",s.innerHTML="",Re.appendChild(a);var t=e.getComputedStyle(s);r="1%"!==t.top,i="2px"===t.marginLeft,n="4px"===t.width,s.style.marginRight="50%",o="4px"===t.marginRight,Re.removeChild(a),s=null}}var r,n,o,i,a=W.createElement("div"),s=W.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",oe.clearCloneStyle="content-box"===s.style.backgroundClip,a.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",a.appendChild(s),ie.extend(oe,{pixelPosition:function(){return t(),r},boxSizingReliable:function(){return t(),n},pixelMarginRight:function(){return t(),o},reliableMarginLeft:function(){return t(),i}}))}();var Qe=/^(none|table(?!-c[ea]).+)/,Je=/^--/,et={position:"absolute",visibility:"hidden",display:"block"},tt={letterSpacing:"0",fontWeight:"400"},rt=["Webkit","Moz","ms"],nt=W.createElement("div").style;ie.extend({cssHooks:{opacity:{get:function(e,t){if(t)return""===(e=M(e,"opacity"))?"1":e}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,r,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,i=ie.camelCase(t),a=Je.test(t),s=e.style;a||(t=T(i));var l=ie.cssHooks[t]||ie.cssHooks[i];if(void 0===r)return l&&"get"in l&&void 0!==(o=l.get(e,!1,n))?o:s[t];var c=typeof r;"string"===c&&(o=Te.exec(r))&&o[1]&&(r=d(e,t,o),c="number"),null!=r&&r==r&&("number"===c&&(r+=o&&o[3]||(ie.cssNumber[i]?"":"px")),oe.clearCloneStyle||""!==r||0!==t.indexOf("background")||(s[t]="inherit"),l&&"set"in l&&void 0===(r=l.set(e,r,n))||(a?s.setProperty(t,r):s[t]=r))}},css:function(e,t,r,n){var o,i=ie.camelCase(t);return Je.test(t)||(t=T(i)),(i=ie.cssHooks[t]||ie.cssHooks[i])&&"get"in i&&(o=i.get(e,!0,r)),void 0===o&&(o=M(e,t,n)),"normal"===o&&t in tt&&(o=tt[t]),""===r||r?(e=parseFloat(o),!0===r||isFinite(e)?e||0:o):o}}),ie.each(["height","width"],(function(e,t){ie.cssHooks[t]={get:function(e,r,n){if(r)return!Qe.test(ie.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?F(e,t,n):Fe(e,et,(function(){return F(e,t,n)}))},set:function(e,r,n){var o,i=n&&Ke(e);return(n=n&&E(e,t,n,"border-box"===ie.css(e,"boxSizing",!1,i),i))&&(o=Te.exec(r))&&"px"!==(o[3]||"px")&&(e.style[t]=r,r=ie.css(e,t)),L(e,r,n)}}})),ie.cssHooks.marginLeft=z(oe.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(M(e,"marginLeft"))||e.getBoundingClientRect().left-Fe(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),ie.each({margin:"",padding:"",border:"Width"},(function(e,t){ie.cssHooks[e+t]={expand:function(r){var n=0,o={};for(r="string"==typeof r?r.split(" "):[r];4>n;n++)o[e+Le[n]+t]=r[n]||r[n-2]||r[0];return o}},Ze.test(e)||(ie.cssHooks[e+t].set=L)})),ie.fn.extend({css:function(e,t){return Ce(this,(function(e,t,r){var n,o={},i=0;if(Array.isArray(t)){for(r=Ke(e),n=t.length;i<n;i++)o[t[i]]=ie.css(e,t[i],!1,r);return o}return void 0!==r?ie.style(e,t,r):ie.css(e,t)}),e,t,1<arguments.length)}}),ie.Tween=k,k.prototype={constructor:k,init:function(e,t,r,n,o,i){this.elem=e,this.prop=r,this.easing=o||ie.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=i||(ie.cssNumber[r]?"":"px")},cur:function(){var e=k.propHooks[this.prop];return e&&e.get?e.get(this):k.propHooks._default.get(this)},run:function(e){var t,r=k.propHooks[this.prop];return this.pos=t=this.options.duration?ie.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):k.propHooks._default.set(this),this}},k.prototype.init.prototype=k.prototype,k.propHooks={_default:{get:function(e){return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(e=ie.css(e.elem,e.prop,""))&&"auto"!==e?e:0},set:function(e){ie.fx.step[e.prop]?ie.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[ie.cssProps[e.prop]]&&!ie.cssHooks[e.prop]?e.elem[e.prop]=e.now:ie.style(e.elem,e.prop,e.now+e.unit)}}},k.propHooks.scrollTop=k.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ie.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},ie.fx=k.prototype.init,ie.fx.step={};var ot,it,at=/^(?:toggle|show|hide)$/,st=/queueHooks$/;ie.Animation=ie.extend(j,{tweeners:{"*":[function(e,t){var r=this.createTween(e,t);return d(r.elem,e,Te.exec(t),r),r}]},tweener:function(e,t){ie.isFunction(e)?(t=e,e=["*"]):e=e.match(xe);for(var r,n=0,o=e.length;n<o;n++)r=e[n],j.tweeners[r]=j.tweeners[r]||[],j.tweeners[r].unshift(t)},prefilters:[function(e,t,r){var n,o="width"in t||"height"in t,i=this,a={},s=e.style,l=e.nodeType&&Ee(e),c=Se.get(e,"fxshow");if(!r.queue){var u=ie._queueHooks(e,"fx");if(null==u.unqueued){u.unqueued=0;var h=u.empty.fire;u.empty.fire=function(){u.unqueued||h()}}u.unqueued++,i.always((function(){i.always((function(){u.unqueued--,ie.queue(e,"fx").length||u.empty.fire()}))}))}for(n in t){var f=t[n];if(at.test(f)){delete t[n];var d=d||"toggle"===f;if(f===(l?"hide":"show")){if("show"!==f||!c||void 0===c[n])continue;l=!0}a[n]=c&&c[n]||ie.style(e,n)}}if((t=!ie.isEmptyObject(t))||!ie.isEmptyObject(a)){if(o&&1===e.nodeType){r.overflow=[s.overflow,s.overflowX,s.overflowY];var m=c&&c.display;null==m&&(m=Se.get(e,"display")),"none"===(o=ie.css(e,"display"))&&(m?o=m:(p([e],!0),m=e.style.display||m,o=ie.css(e,"display"),p([e]))),("inline"===o||"inline-block"===o&&null!=m)&&"none"===ie.css(e,"float")&&(t||(i.done((function(){s.display=m})),null==m&&(o=s.display,m="none"===o?"":o)),s.display="inline-block")}for(n in r.overflow&&(s.overflow="hidden",i.always((function(){s.overflow=r.overflow[0],s.overflowX=r.overflow[1],s.overflowY=r.overflow[2]}))),t=!1,a)t||(c?"hidden"in c&&(l=c.hidden):c=Se.access(e,"fxshow",{display:m}),d&&(c.hidden=!l),l&&p([e],!0),i.done((function(){for(n in l||p([e]),Se.remove(e,"fxshow"),a)ie.style(e,n,a[n])}))),t=N(l?c[n]:0,n,i),n in c||(c[n]=t.start,l&&(t.end=t.start,t.start=0))}}],prefilter:function(e,t){t?j.prefilters.unshift(e):j.prefilters.push(e)}}),ie.speed=function(e,t,r){var n=e&&"object"==typeof e?ie.extend({},e):{complete:r||!r&&t||ie.isFunction(e)&&e,duration:e,easing:r&&t||t&&!ie.isFunction(t)&&t};return ie.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration=n.duration in ie.fx.speeds?ie.fx.speeds[n.duration]:ie.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){ie.isFunction(n.old)&&n.old.call(this),n.queue&&ie.dequeue(this,n.queue)},n},ie.fn.extend({fadeTo:function(e,t,r,n){return this.filter(Ee).css("opacity",0).show().end().animate({opacity:t},e,r,n)},animate:function(e,t,r,n){var o=ie.isEmptyObject(e),i=ie.speed(t,r,n);return(t=function(){var t=j(this,ie.extend({},e),i);(o||Se.get(this,"finish"))&&t.stop(!0)}).finish=t,o||!1===i.queue?this.each(t):this.queue(i.queue,t)},stop:function(e,t,r){var n=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each((function(){var t=!0,o=null!=e&&e+"queueHooks",i=ie.timers,a=Se.get(this);if(o)a[o]&&a[o].stop&&n(a[o]);else for(o in a)a[o]&&a[o].stop&&st.test(o)&&n(a[o]);for(o=i.length;o--;)i[o].elem!==this||null!=e&&i[o].queue!==e||(i[o].anim.stop(r),t=!1,i.splice(o,1));!t&&r||ie.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t=Se.get(this),r=t[e+"queue"],n=t[e+"queueHooks"],o=ie.timers,i=r?r.length:0;for(t.finish=!0,ie.queue(this,e,[]),n&&n.stop&&n.stop.call(this,!0),n=o.length;n--;)o[n].elem===this&&o[n].queue===e&&(o[n].anim.stop(!0),o.splice(n,1));for(n=0;n<i;n++)r[n]&&r[n].finish&&r[n].finish.call(this);delete t.finish}))}}),ie.each(["toggle","show","hide"],(function(e,t){var r=ie.fn[t];ie.fn[t]=function(e,n,o){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(P(t,!0),e,n,o)}})),ie.each({slideDown:P("show"),slideUp:P("hide"),slideToggle:P("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){ie.fn[e]=function(e,r,n){return this.animate(t,e,r,n)}})),ie.timers=[],ie.fx.tick=function(){var e=0,t=ie.timers;for(ot=ie.now();e<t.length;e++){var r=t[e];r()||t[e]!==r||t.splice(e--,1)}t.length||ie.fx.stop(),ot=void 0},ie.fx.timer=function(e){ie.timers.push(e),ie.fx.start()},ie.fx.interval=13,ie.fx.start=function(){it||(it=!0,I())},ie.fx.stop=function(){it=null},ie.fx.speeds={slow:600,fast:200,_default:400},ie.fn.delay=function(t,r){return t=ie.fx&&ie.fx.speeds[t]||t,this.queue(r||"fx",(function(r,n){var o=e.setTimeout(r,t);n.stop=function(){e.clearTimeout(o)}}))},function(){var e=W.createElement("input"),t=W.createElement("select").appendChild(W.createElement("option"));e.type="checkbox",oe.checkOn=""!==e.value,oe.optSelected=t.selected,(e=W.createElement("input")).value="t",e.type="radio",oe.radioValue="t"===e.value}();var lt=ie.expr.attrHandle;ie.fn.extend({attr:function(e,t){return Ce(this,ie.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each((function(){ie.removeAttr(this,e)}))}}),ie.extend({attr:function(e,t,r){var n,o,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return void 0===e.getAttribute?ie.prop(e,t,r):(1===i&&ie.isXMLDoc(e)||(o=ie.attrHooks[t.toLowerCase()]||(ie.expr.match.bool.test(t)?ct:void 0)),void 0!==r?null===r?void ie.removeAttr(e,t):o&&"set"in o&&void 0!==(n=o.set(e,r,t))?n:(e.setAttribute(t,r+""),r):o&&"get"in o&&null!==(n=o.get(e,t))?n:null==(n=ie.find.attr(e,t))?void 0:n)},attrHooks:{type:{set:function(e,t){if(!oe.radioValue&&"radio"===t&&o(e,"input")){var r=e.value;return e.setAttribute("type",t),r&&(e.value=r),t}}}},removeAttr:function(e,t){var r=0,n=t&&t.match(xe);if(n&&1===e.nodeType)for(;t=n[r++];)e.removeAttribute(t)}});var ct={set:function(e,t,r){return!1===t?ie.removeAttr(e,r):e.setAttribute(r,r),r}};ie.each(ie.expr.match.bool.source.match(/\w+/g),(function(e,t){var r=lt[t]||ie.find.attr;lt[t]=function(e,t,n){var o=t.toLowerCase();if(!n){var i=lt[o];lt[o]=a;var a=null!=r(e,t,n)?o:null;lt[o]=i}return a}}));var ut=/^(?:input|select|textarea|button)$/i,ht=/^(?:a|area)$/i;ie.fn.extend({prop:function(e,t){return Ce(this,ie.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each((function(){delete this[ie.propFix[e]||e]}))}}),ie.extend({prop:function(e,t,r){var n,o=e.nodeType;if(3!==o&&8!==o&&2!==o){if(1!==o||!ie.isXMLDoc(e)){t=ie.propFix[t]||t;var i=ie.propHooks[t]}return void 0!==r?i&&"set"in i&&void 0!==(n=i.set(e,r,t))?n:e[t]=r:i&&"get"in i&&null!==(n=i.get(e,t))?n:e[t]}},propHooks:{tabIndex:{get:function(e){var t=ie.find.attr(e,"tabindex");return t?parseInt(t,10):ut.test(e.nodeName)||ht.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),oe.optSelected||(ie.propHooks.selected={get:function(e){return(e=e.parentNode)&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(e){(e=e.parentNode)&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),ie.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),(function(){ie.propFix[this.toLowerCase()]=this})),ie.fn.extend({addClass:function(e){var t,r,n,o,i,a=0;if(ie.isFunction(e))return this.each((function(t){ie(this).addClass(e.call(this,t,V(this)))}));if("string"==typeof e&&e)for(t=e.match(xe)||[];r=this[a++];){var s=V(r);if(n=1===r.nodeType&&" "+R(s)+" "){for(i=0;o=t[i++];)0>n.indexOf(" "+o+" ")&&(n+=o+" ");s!==(n=R(n))&&r.setAttribute("class",n)}}return this},removeClass:function(e){var t,r,n,o,i,a=0;if(ie.isFunction(e))return this.each((function(t){ie(this).removeClass(e.call(this,t,V(this)))}));if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(xe)||[];r=this[a++];){var s=V(r);if(n=1===r.nodeType&&" "+R(s)+" "){for(i=0;o=t[i++];)for(;-1<n.indexOf(" "+o+" ");)n=n.replace(" "+o+" "," ");s!==(n=R(n))&&r.setAttribute("class",n)}}return this},toggleClass:function(e,t){var r=typeof e;return"boolean"==typeof t&&"string"===r?t?this.addClass(e):this.removeClass(e):ie.isFunction(e)?this.each((function(r){ie(this).toggleClass(e.call(this,r,V(this),t),t)})):this.each((function(){var t,n;if("string"===r){var o=0,i=ie(this);for(n=e.match(xe)||[];t=n[o++];)i.hasClass(t)?i.removeClass(t):i.addClass(t)}else void 0!==e&&"boolean"!==r||((t=V(this))&&Se.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Se.get(this,"__className__")||""))}))},hasClass:function(e){var t,r=0;for(e=" "+e+" ";t=this[r++];)if(1===t.nodeType&&-1<(" "+R(V(t))+" ").indexOf(e))return!0;return!1}});var ft=/\r/g;ie.fn.extend({val:function(e){var t,r,n=this[0];if(arguments.length){var o=ie.isFunction(e);return this.each((function(r){1===this.nodeType&&(null==(r=o?e.call(this,r,ie(this).val()):e)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=ie.map(r,(function(e){return null==e?"":e+""}))),(t=ie.valHooks[this.type]||ie.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))}))}if(n)return(t=ie.valHooks[n.type]||ie.valHooks[n.nodeName.toLowerCase()])&&"get"in t&&void 0!==(r=t.get(n,"value"))?r:"string"==typeof(r=n.value)?r.replace(ft,""):null==r?"":r}}),ie.extend({valHooks:{option:{get:function(e){var t=ie.find.attr(e,"value");return null!=t?t:R(ie.text(e))}},select:{get:function(e){var t=e.options,r=e.selectedIndex,n="select-one"===e.type,i=n?null:[],a=n?r+1:t.length;for(e=0>r?a:n?r:0;e<a;e++){var s=t[e];if(!(!s.selected&&e!==r||s.disabled||s.parentNode.disabled&&o(s.parentNode,"optgroup"))){if(s=ie(s).val(),n)return s;i.push(s)}}return i},set:function(e,t){for(var r,n=e.options,o=ie.makeArray(t),i=n.length;i--;)((t=n[i]).selected=-1<ie.inArray(ie.valHooks.option.get(t),o))&&(r=!0);return r||(e.selectedIndex=-1),o}}}}),ie.each(["radio","checkbox"],(function(){ie.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<ie.inArray(ie(e).val(),t)}},oe.checkOn||(ie.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}));var dt=/^(?:focusinfocus|focusoutblur)$/;ie.extend(ie.event,{trigger:function(t,r,n,o){var i,a,s=[n||W],l=te.call(t,"type")?t.type:t,c=te.call(t,"namespace")?t.namespace.split("."):[],u=i=n=n||W;if(3!==n.nodeType&&8!==n.nodeType&&!dt.test(l+ie.event.triggered)){-1<l.indexOf(".")&&(c=l.split("."),l=c.shift(),c.sort());var h=0>l.indexOf(":")&&"on"+l;if((t=t[ie.expando]?t:new ie.Event(l,"object"==typeof t&&t)).isTrigger=o?2:3,t.namespace=c.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+c.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),r=null==r?[t]:ie.makeArray(r,[t]),c=ie.event.special[l]||{},o||!c.trigger||!1!==c.trigger.apply(n,r)){if(!o&&!c.noBubble&&!ie.isWindow(n)){var f=c.delegateType||l;for(dt.test(f+l)||(u=u.parentNode);u;u=u.parentNode)s.push(u),i=u;i===(n.ownerDocument||W)&&s.push(i.defaultView||i.parentWindow||e)}for(i=0;(u=s[i++])&&!t.isPropagationStopped();)t.type=1<i?f:c.bindType||l,(a=(Se.get(u,"events")||{})[t.type]&&Se.get(u,"handle"))&&a.apply(u,r),(a=h&&u[h])&&a.apply&&$e(u)&&(t.result=a.apply(u,r),!1===t.result&&t.preventDefault());return t.type=l,o||t.isDefaultPrevented()||c._default&&!1!==c._default.apply(s.pop(),r)||!$e(n)||!h||!ie.isFunction(n[l])||ie.isWindow(n)||((i=n[h])&&(n[h]=null),ie.event.triggered=l,n[l](),ie.event.triggered=void 0,i&&(n[h]=i)),t.result}}},simulate:function(e,t,r){e=ie.extend(new ie.Event,r,{type:e,isSimulated:!0}),ie.event.trigger(e,null,t)}}),ie.fn.extend({trigger:function(e,t){return this.each((function(){ie.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var r=this[0];if(r)return ie.event.trigger(e,t,r,!0)}}),ie.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){ie.fn[t]=function(e,r){return 0<arguments.length?this.on(t,null,e,r):this.trigger(t)}})),ie.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),oe.focusin="onfocusin"in e,oe.focusin||ie.each({focus:"focusin",blur:"focusout"},(function(e,t){var r=function(e){ie.event.simulate(t,e.target,ie.event.fix(e))};ie.event.special[t]={setup:function(){var n=this.ownerDocument||this,o=Se.access(n,t);o||n.addEventListener(e,r,!0),Se.access(n,t,(o||0)+1)},teardown:function(){var n=this.ownerDocument||this,o=Se.access(n,t)-1;o?Se.access(n,t,o):(n.removeEventListener(e,r,!0),Se.remove(n,t))}}}));var pt=e.location,mt=ie.now(),vt=/\?/;ie.parseXML=function(t){if(!t||"string"!=typeof t)return null;try{var r=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){r=void 0}return r&&!r.getElementsByTagName("parsererror").length||ie.error("Invalid XML: "+t),r};var gt=/\[\]$/,yt=/\r?\n/g,bt=/^(?:submit|button|image|reset|file)$/i,xt=/^(?:input|select|textarea|keygen)/i;ie.param=function(e,t){var r,n=[],o=function(e,t){t=ie.isFunction(t)?t():t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==t?"":t)};if(Array.isArray(e)||e.jquery&&!ie.isPlainObject(e))ie.each(e,(function(){o(this.name,this.value)}));else for(r in e)B(r,e[r],t,o);return n.join("&")},ie.fn.extend({serialize:function(){return ie.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=ie.prop(this,"elements");return e?ie.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!ie(this).is(":disabled")&&xt.test(this.nodeName)&&!bt.test(e)&&(this.checked||!Ie.test(e))})).map((function(e,t){return null==(e=ie(this).val())?null:Array.isArray(e)?ie.map(e,(function(e){return{name:t.name,value:e.replace(yt,"\r\n")}})):{name:t.name,value:e.replace(yt,"\r\n")}})).get()}});var wt=/%20/g,Dt=/#.*$/,Ct=/([?&])_=[^&]*/,$t=/^(.*?):[ \t]*([^\r\n]*)$/gm,St=/^(?:GET|HEAD)$/,At=/^\/\//,_t={},Mt={},zt="*/".concat("*"),Tt=W.createElement("a");Tt.href=pt.href,ie.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:pt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(pt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":zt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":ie.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?q(q(e,ie.ajaxSettings),t):q(ie.ajaxSettings,e)},ajaxPrefilter:U(_t),ajaxTransport:U(Mt),ajax:function(t,r){function n(t,r,n,a){var c=r;if(!w){if(w=!0,s&&e.clearTimeout(s),o=void 0,i=a||"",b.readyState=0<t?4:0,a=200<=t&&300>t||304===t,n){for(var v,g,y,D,C=u,$=b,S=C.contents,A=C.dataTypes;"*"===A[0];)A.shift(),void 0===v&&(v=C.mimeType||$.getResponseHeader("Content-Type"));if(v)for(g in S)if(S[g]&&S[g].test(v)){A.unshift(g);break}if(A[0]in n)y=A[0];else{for(g in n){if(!A[0]||C.converters[g+" "+A[0]]){y=g;break}D||(D=g)}y=y||D}y?(y!==A[0]&&A.unshift(y),C=n[y]):C=void 0}e:{var _;if(v=C,g=b,y=a,$={},(S=(n=u).dataTypes.slice())[1])for(z in n.converters)$[z.toLowerCase()]=n.converters[z];for(D=S.shift();D;){n.responseFields[D]&&(g[n.responseFields[D]]=v),!M&&y&&n.dataFilter&&(v=n.dataFilter(v,n.dataType));var M=D;if(D=S.shift())if("*"===D)D=M;else if("*"!==M&&M!==D){var z=$[M+" "+D]||$["* "+D];if(!z)for(_ in $)if((C=_.split(" "))[1]===D&&(z=$[M+" "+C[0]]||$["* "+C[0]])){!0===z?z=$[_]:!0!==$[_]&&(D=C[0],S.unshift(C[1]));break}if(!0!==z)if(z&&n.throws)v=z(v);else try{v=z(v)}catch(e){C={state:"parsererror",error:z?e:"No conversion from "+M+" to "+D};break e}}}C={state:"success",data:v}}if(a)if(u.ifModified&&((c=b.getResponseHeader("Last-Modified"))&&(ie.lastModified[x]=c),(c=b.getResponseHeader("etag"))&&(ie.etag[x]=c)),204===t||"HEAD"===u.type)c="nocontent";else if(304===t)c="notmodified";else{c=C.state;var T=C.data,L=C.error;a=!L}else L=c,(t||!c)&&(c="error",0>t&&(t=0));b.status=t,b.statusText=(r||c)+"",a?d.resolveWith(h,[T,c,b]):d.rejectWith(h,[b,c,L]),b.statusCode(m),m=void 0,l&&f.trigger(a?"ajaxSuccess":"ajaxError",[b,u,a?T:L]),p.fireWith(h,[b,c]),l&&(f.trigger("ajaxComplete",[b,u]),--ie.active||ie.event.trigger("ajaxStop"))}}"object"==typeof t&&(r=t,t=void 0),r=r||{};var o,i,a,s,l,c,u=ie.ajaxSetup({},r),h=u.context||u,f=u.context&&(h.nodeType||h.jquery)?ie(h):ie.event,d=ie.Deferred(),p=ie.Callbacks("once memory"),m=u.statusCode||{},v={},g={},y="canceled",b={readyState:0,getResponseHeader:function(e){var t;if(w){if(!a)for(a={};t=$t.exec(i);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return w?i:null},setRequestHeader:function(e,t){return null==w&&(e=g[e.toLowerCase()]=g[e.toLowerCase()]||e,v[e]=t),this},overrideMimeType:function(e){return null==w&&(u.mimeType=e),this},statusCode:function(e){var t;if(e)if(w)b.always(e[b.status]);else for(t in e)m[t]=[m[t],e[t]];return this},abort:function(e){return e=e||y,o&&o.abort(e),n(0,e),this}};if(d.promise(b),u.url=((t||u.url||pt.href)+"").replace(At,pt.protocol+"//"),u.type=r.method||r.type||u.method||u.type,u.dataTypes=(u.dataType||"*").toLowerCase().match(xe)||[""],null==u.crossDomain){t=W.createElement("a");try{t.href=u.url,t.href=t.href,u.crossDomain=Tt.protocol+"//"+Tt.host!=t.protocol+"//"+t.host}catch(e){u.crossDomain=!0}}if(u.data&&u.processData&&"string"!=typeof u.data&&(u.data=ie.param(u.data,u.traditional)),G(_t,u,r,b),w)return b;(l=ie.event&&u.global)&&0==ie.active++&&ie.event.trigger("ajaxStart"),u.type=u.type.toUpperCase(),u.hasContent=!St.test(u.type);var x=u.url.replace(Dt,"");for(c in u.hasContent?u.data&&u.processData&&0===(u.contentType||"").indexOf("application/x-www-form-urlencoded")&&(u.data=u.data.replace(wt,"+")):(t=u.url.slice(x.length),u.data&&(x+=(vt.test(x)?"&":"?")+u.data,delete u.data),!1===u.cache&&(x=x.replace(Ct,"$1"),t=(vt.test(x)?"&":"?")+"_="+mt+++t),u.url=x+t),u.ifModified&&(ie.lastModified[x]&&b.setRequestHeader("If-Modified-Since",ie.lastModified[x]),ie.etag[x]&&b.setRequestHeader("If-None-Match",ie.etag[x])),(u.data&&u.hasContent&&!1!==u.contentType||r.contentType)&&b.setRequestHeader("Content-Type",u.contentType),b.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+("*"!==u.dataTypes[0]?", "+zt+"; q=0.01":""):u.accepts["*"]),u.headers)b.setRequestHeader(c,u.headers[c]);if(u.beforeSend&&(!1===u.beforeSend.call(h,b,u)||w))return b.abort();if(y="abort",p.add(u.complete),b.done(u.success),b.fail(u.error),o=G(Mt,u,r,b)){if(b.readyState=1,l&&f.trigger("ajaxSend",[b,u]),w)return b;u.async&&0<u.timeout&&(s=e.setTimeout((function(){b.abort("timeout")}),u.timeout));try{var w=!1;o.send(v,n)}catch(e){if(w)throw e;n(-1,e)}}else n(-1,"No Transport");return b},getJSON:function(e,t,r){return ie.get(e,t,r,"json")},getScript:function(e,t){return ie.get(e,void 0,t,"script")}}),ie.each(["get","post"],(function(e,t){ie[t]=function(e,r,n,o){return ie.isFunction(r)&&(o=o||n,n=r,r=void 0),ie.ajax(ie.extend({url:e,type:t,dataType:o,data:r,success:n},ie.isPlainObject(e)&&e))}})),ie._evalUrl=function(e){return ie.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},ie.fn.extend({wrapAll:function(e){return this[0]&&(ie.isFunction(e)&&(e=e.call(this[0])),e=ie(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return ie.isFunction(e)?this.each((function(t){ie(this).wrapInner(e.call(this,t))})):this.each((function(){var t=ie(this),r=t.contents();r.length?r.wrapAll(e):t.append(e)}))},wrap:function(e){var t=ie.isFunction(e);return this.each((function(r){ie(this).wrapAll(t?e.call(this,r):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){ie(this).replaceWith(this.childNodes)})),this}}),ie.expr.pseudos.hidden=function(e){return!ie.expr.pseudos.visible(e)},ie.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},ie.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Lt={0:200,1223:204},Et=ie.ajaxSettings.xhr();oe.cors=!!Et&&"withCredentials"in Et,oe.ajax=Et=!!Et,ie.ajaxTransport((function(t){var r,n;if(oe.cors||Et&&!t.crossDomain)return{send:function(o,i){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];for(a in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest"),o)s.setRequestHeader(a,o[a]);r=function(e){return function(){r&&(r=n=s.onload=s.onerror=s.onabort=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?i(0,"error"):i(s.status,s.statusText):i(Lt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=r(),n=s.onerror=r("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout((function(){r&&n()}))},r=r("abort");try{s.send(t.hasContent&&t.data||null)}catch(e){if(r)throw e}},abort:function(){r&&r()}}})),ie.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),ie.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return ie.globalEval(e),e}}}),ie.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),ie.ajaxTransport("script",(function(e){var t,r;if(e.crossDomain)return{send:function(n,o){t=ie("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",r=function(e){t.remove(),r=null,e&&o("error"===e.type?404:200,e.type)}),W.head.appendChild(t[0])},abort:function(){r&&r()}}}));var Ft=[],kt=/(=)\?(?=&|$)|\?\?/;ie.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ft.pop()||ie.expando+"_"+mt++;return this[e]=!0,e}}),ie.ajaxPrefilter("json jsonp",(function(t,r,n){var o,i=!1!==t.jsonp&&(kt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&kt.test(t.data)&&"data");if(i||"jsonp"===t.dataTypes[0]){var a=t.jsonpCallback=ie.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback;i?t[i]=t[i].replace(kt,"$1"+a):!1!==t.jsonp&&(t.url+=(vt.test(t.url)?"&":"?")+t.jsonp+"="+a),t.converters["script json"]=function(){return o||ie.error(a+" was not called"),o[0]},t.dataTypes[0]="json";var s=e[a];return e[a]=function(){o=arguments},n.always((function(){void 0===s?ie(e).removeProp(a):e[a]=s,t[a]&&(t.jsonpCallback=r.jsonpCallback,Ft.push(a)),o&&ie.isFunction(s)&&s(o[0]),o=s=void 0})),"script"}})),oe.createHTMLDocument=function(){var e=W.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),ie.parseHTML=function(e,t,r){if("string"!=typeof e)return[];if("boolean"==typeof t&&(r=t,t=!1),!t)if(oe.createHTMLDocument){var n=(t=W.implementation.createHTMLDocument("")).createElement("base");n.href=W.location.href,t.head.appendChild(n)}else t=W;return r=!r&&[],(n=pe.exec(e))?[t.createElement(n[1])]:(n=g([e],t,r),r&&r.length&&ie(r).remove(),ie.merge([],n.childNodes))},ie.fn.load=function(e,t,r){var n,o,i=this,a=e.indexOf(" ");if(-1<a){var s=R(e.slice(a));e=e.slice(0,a)}return ie.isFunction(t)?(r=t,t=void 0):t&&"object"==typeof t&&(n="POST"),0<i.length&&ie.ajax({url:e,type:n||"GET",dataType:"html",data:t}).done((function(e){o=arguments,i.html(s?ie("<div>").append(ie.parseHTML(e)).find(s):e)})).always(r&&function(e,t){i.each((function(){r.apply(this,o||[e.responseText,t,e])}))}),this},ie.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),(function(e,t){ie.fn[t]=function(e){return this.on(t,e)}})),ie.expr.pseudos.animated=function(e){return ie.grep(ie.timers,(function(t){return e===t.elem})).length},ie.offset={setOffset:function(e,t,r){var n=ie.css(e,"position"),o=ie(e),i={};"static"===n&&(e.style.position="relative");var a=o.offset(),s=ie.css(e,"top"),l=ie.css(e,"left");("absolute"===n||"fixed"===n)&&-1<(s+l).indexOf("auto")?(s=(l=o.position()).top,l=l.left):(s=parseFloat(s)||0,l=parseFloat(l)||0),ie.isFunction(t)&&(t=t.call(e,r,ie.extend({},a))),null!=t.top&&(i.top=t.top-a.top+s),null!=t.left&&(i.left=t.left-a.left+l),"using"in t?t.using.call(e,i):o.css(i)}},ie.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){ie.offset.setOffset(this,e,t)}));var t;if(t=this[0]){if(!t.getClientRects().length)return{top:0,left:0};var r=t.getBoundingClientRect(),n=t.ownerDocument;return t=n.documentElement,n=n.defaultView,{top:r.top+n.pageYOffset-t.clientTop,left:r.left+n.pageXOffset-t.clientLeft}}},position:function(){if(this[0]){var e=this[0],t={top:0,left:0};if("fixed"===ie.css(e,"position"))var r=e.getBoundingClientRect();else{var n=this.offsetParent();r=this.offset(),o(n[0],"html")||(t=n.offset()),t={top:t.top+ie.css(n[0],"borderTopWidth",!0),left:t.left+ie.css(n[0],"borderLeftWidth",!0)}}return{top:r.top-t.top-ie.css(e,"marginTop",!0),left:r.left-t.left-ie.css(e,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===ie.css(e,"position");)e=e.offsetParent;return e||Re}))}}),ie.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var r="pageYOffset"===t;ie.fn[e]=function(n){return Ce(this,(function(e,n,o){if(ie.isWindow(e))var i=e;else 9===e.nodeType&&(i=e.defaultView);if(void 0===o)return i?i[t]:e[n];i?i.scrollTo(r?i.pageXOffset:o,r?o:i.pageYOffset):e[n]=o}),e,n,arguments.length)}})),ie.each(["top","left"],(function(e,t){ie.cssHooks[t]=z(oe.pixelPosition,(function(e,r){if(r)return r=M(e,t),Xe.test(r)?ie(e).position()[t]+"px":r}))})),ie.each({Height:"height",Width:"width"},(function(e,t){ie.each({padding:"inner"+e,content:t,"":"outer"+e},(function(r,n){ie.fn[n]=function(o,i){var a=arguments.length&&(r||"boolean"!=typeof o),s=r||(!0===o||!0===i?"margin":"border");return Ce(this,(function(t,r,o){return ie.isWindow(t)?0===n.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===o?ie.css(t,r,s):ie.style(t,r,o,s)}),t,a?o:void 0,a)}}))})),ie.fn.extend({bind:function(e,t,r){return this.on(e,null,t,r)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,r,n){return this.on(t,e,r,n)},undelegate:function(e,t,r){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",r)}}),ie.holdReady=function(e){e?ie.readyWait++:ie.ready(!0)},ie.isArray=Array.isArray,ie.parseJSON=JSON.parse,ie.nodeName=o,void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return ie}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__=[]))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__);var It=e.jQuery,Ot=e.$;return ie.noConflict=function(t){return e.$===ie&&(e.$=Ot),t&&e.jQuery===ie&&(e.jQuery=It),ie},t||(e.jQuery=e.$=ie),ie},"object"==typeof module.exports?module.exports=n.document?C(n,!0):function(e){if(!e.document)throw Error("jQuery requires a window with a document");return C(e)}:C(n);var $jscomp=$jscomp||{},g;$jscomp.scope={},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,r){e!=Array.prototype&&e!=Object.prototype&&(e[t]=r.value)},$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:void 0!==__webpack_require__.g&&null!=__webpack_require__.g?__webpack_require__.g:e},$jscomp.global=$jscomp.getGlobal(this),$jscomp.SYMBOL_PREFIX="jscomp_symbol_",$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){},$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)},$jscomp.symbolCounter_=0,$jscomp.Symbol=function(e){return $jscomp.SYMBOL_PREFIX+(e||"")+$jscomp.symbolCounter_++},$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var e=$jscomp.global.Symbol.iterator;e||(e=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator")),"function"!=typeof Array.prototype[e]&&$jscomp.defineProperty(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}}),$jscomp.initSymbolIterator=function(){}},$jscomp.arrayIterator=function(e){var t=0;return $jscomp.iteratorPrototype((function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}))},$jscomp.iteratorPrototype=function(e){return $jscomp.initSymbolIterator(),(e={next:e})[$jscomp.global.Symbol.iterator]=function(){return this},e},$jscomp.iteratorFromArray=function(e,t){$jscomp.initSymbolIterator(),e instanceof String&&(e+="");var r=0,n={next:function(){if(r<e.length){var o=r++;return{value:t(o,e[o]),done:!1}}return n.next=function(){return{done:!0,value:void 0}},n.next()}};return n[Symbol.iterator]=function(){return n},n},$jscomp.polyfill=function(e,t,r,n){if(t){for(r=$jscomp.global,e=e.split("."),n=0;n<e.length-1;n++){var o=e[n];o in r||(r[o]={}),r=r[o]}(t=t(n=r[e=e[e.length-1]]))!=n&&null!=t&&$jscomp.defineProperty(r,e,{configurable:!0,writable:!0,value:t})}},$jscomp.polyfill("Array.prototype.keys",(function(e){return e||function(){return $jscomp.iteratorFromArray(this,(function(e){return e}))}}),"es6","es3"),g=this,function(e){function t(e,t,r){for(var n=0,o=r.length;n<o;n++){var i=r.charCodeAt(n);if(128>i)e.setUint8(t++,i>>>0&127|0);else if(2048>i)e.setUint8(t++,i>>>6&31|192),e.setUint8(t++,i>>>0&63|128);else if(65536>i)e.setUint8(t++,i>>>12&15|224),e.setUint8(t++,i>>>6&63|128),e.setUint8(t++,i>>>0&63|128);else{if(!(1114112>i))throw Error("bad codepoint "+i);e.setUint8(t++,i>>>18&7|240),e.setUint8(t++,i>>>12&63|128),e.setUint8(t++,i>>>6&63|128),e.setUint8(t++,i>>>0&63|128)}}}function r(e){for(var t=0,r=0,n=e.length;r<n;r++){var o=e.charCodeAt(r);if(128>o)t+=1;else if(2048>o)t+=2;else if(65536>o)t+=3;else{if(!(1114112>o))throw Error("bad codepoint "+o);t+=4}}return t}function n(e,o,i){var a=typeof e;if("string"===a){var s=r(e);if(32>s)return o.setUint8(i,160|s),t(o,i+1,e),1+s;if(256>s)return o.setUint8(i,217),o.setUint8(i+1,s),t(o,i+2,e),2+s;if(65536>s)return o.setUint8(i,218),o.setUint16(i+1,s),t(o,i+3,e),3+s;if(4294967296>s)return o.setUint8(i,219),o.setUint32(i+1,s),t(o,i+5,e),5+s}if(e instanceof Uint8Array){s=e.byteLength;var l=new Uint8Array(o.buffer);if(256>s)return o.setUint8(i,196),o.setUint8(i+1,s),l.set(e,i+2),2+s;if(65536>s)return o.setUint8(i,197),o.setUint16(i+1,s),l.set(e,i+3),3+s;if(4294967296>s)return o.setUint8(i,198),o.setUint32(i+1,s),l.set(e,i+5),5+s}if("number"===a){if(!isFinite(e))throw Error("Number not finite: "+e);if(Math.floor(e)!==e)return o.setUint8(i,203),o.setFloat64(i+1,e),9;if(0<=e){if(128>e)return o.setUint8(i,e),1;if(256>e)return o.setUint8(i,204),o.setUint8(i+1,e),2;if(65536>e)return o.setUint8(i,205),o.setUint16(i+1,e),3;if(4294967296>e)return o.setUint8(i,206),o.setUint32(i+1,e),5;throw Error("Number too big 0x"+e.toString(16))}if(-32<=e)return o.setInt8(i,e),1;if(-128<=e)return o.setUint8(i,208),o.setInt8(i+1,e),2;if(-32768<=e)return o.setUint8(i,209),o.setInt16(i+1,e),3;if(-2147483648<=e)return o.setUint8(i,210),o.setInt32(i+1,e),5;throw Error("Number too small -0x"+(-e).toString(16).substr(1))}if(null===e)return o.setUint8(i,192),1;if("boolean"===a)return o.setUint8(i,e?195:194),1;if("object"===a){if(a=0,l=Array.isArray(e))s=e.length;else{var c=Object.keys(e);s=c.length}if(16>s?(o.setUint8(i,s|(l?144:128)),a=1):65536>s?(o.setUint8(i,l?220:222),o.setUint16(i+1,s),a=3):4294967296>s&&(o.setUint8(i,l?221:223),o.setUint32(i+1,s),a=5),l)for(l=0;l<s;l++)a+=n(e[l],o,i+a);else for(l=0;l<s;l++){var u=c[l];a+=n(u,o,i+a),a+=n(e[u],o,i+a)}return a}throw Error("Unknown type "+a)}function o(e){var t=typeof e;if("string"===t){var n=r(e);if(32>n)return 1+n;if(256>n)return 2+n;if(65536>n)return 3+n;if(4294967296>n)return 5+n}if(e instanceof Uint8Array){if(256>(n=e.byteLength))return 2+n;if(65536>n)return 3+n;if(4294967296>n)return 5+n}if("number"===t){if(Math.floor(e)!==e)return 9;if(0<=e){if(128>e)return 1;if(256>e)return 2;if(65536>e)return 3;if(4294967296>e)return 5;throw Error("Number too big 0x"+e.toString(16))}if(-32<=e)return 1;if(-128<=e)return 2;if(-32768<=e)return 3;if(-2147483648<=e)return 5;throw Error("Number too small -0x"+e.toString(16).substr(1))}if("boolean"===t||null===e)return 1;if("object"===t){if(t=0,Array.isArray(e)){n=e.length;for(var i=0;i<n;i++)t+=o(e[i])}else{var a=Object.keys(e);for(n=a.length,i=0;i<n;i++){var s=a[i];t+=o(s)+o(e[s])}}if(16>n)return 1+t;if(65536>n)return 3+t;if(4294967296>n)return 5+t;throw Error("Array or object too long 0x"+n.toString(16))}throw Error("Unknown type "+t)}function i(e){var t=new ArrayBuffer(o(e));return n(e,new DataView(t),0),new Uint8Array(t)}function a(e,t,r){return t?new e(t.buffer,t.byteOffset,t.byteLength/(r||1)):void 0}function s(e,t){var r=e.length/2;t||(t=new Int16Array(r));for(var n=0,o=0;n<r;++n,o+=2)t[n]=e[o]<<8^e[o+1]<<0;return t}function l(e,t){var r=e.length/4;t||(t=new Int32Array(r));for(var n=0,o=0;n<r;++n,o+=4)t[n]=e[o]<<24^e[o+1]<<16^e[o+2]<<8^e[o+3]<<0;return t}function c(e,t){var r=e.length;t||(t=new Uint8Array(4*r));for(var n=a(DataView,t),o=0;o<r;++o)n.setInt32(4*o,e[o]);return a(Uint8Array,t)}function u(e,t,r){var n=e.length;t=1/t,r||(r=new Float32Array(n));for(var o=0;o<n;++o)r[o]=e[o]*t;return r}function h(e,t,r){var n=e.length;r||(r=new Int32Array(n));for(var o=0;o<n;++o)r[o]=Math.round(e[o]*t);return r}function f(e,t){var r;if(!t){var n=t=0;for(r=e.length;n<r;n+=2)t+=e[n+1];t=new e.constructor(t)}var o=0;for(n=0,r=e.length;n<r;n+=2)for(var i=e[n],a=e[n+1],s=0;s<a;++s)t[o]=i,++o;return t}function d(e){if(0===e.length)return new Int32Array;var t,r=2,n=1;for(t=e.length;n<t;++n)e[n-1]!==e[n]&&(r+=2);r=new Int32Array(r);var o=0,i=1;for(n=1,t=e.length;n<t;++n)e[n-1]!==e[n]?(r[o]=e[n-1],r[o+1]=i,i=1,o+=2):++i;return r[o]=e[e.length-1],r[o+1]=i,r}function p(e,t){var r=e.length;t||(t=new e.constructor(r)),r&&(t[0]=e[0]);for(var n=1;n<r;++n)t[n]=e[n]+t[n-1];return t}function m(e,t){var r=e.length;t||(t=new e.constructor(r)),t[0]=e[0];for(var n=1;n<r;++n)t[n]=e[n]-e[n-1];return t}function v(e,t){var r,n,o=e instanceof Int8Array?127:32767,i=-o-1,a=e.length;if(!t){for(r=t=0;r<a;++r)e[r]<o&&e[r]>i&&++t;t=new Int32Array(t)}for(n=r=0;r<a;){for(var s=0;e[r]===o||e[r]===i;)s+=e[r],++r;s+=e[r],++r,t[n]=s,++n}return t}function g(e){var t=a(DataView,e),r=t.getInt32(0);t=t.getInt32(4);var n=e.subarray(8,12);return[r,e=e.subarray(12),t,n]}function y(e,t,r,n){var o=new ArrayBuffer(12+n.byteLength),i=new Uint8Array(o);return(o=new DataView(o)).setInt32(0,e),o.setInt32(4,t),r&&i.set(r,8),i.set(n,12),i}function b(e){return y(2,e.length,void 0,e=a(Uint8Array,e))}function x(e){return y(4,e.length,void 0,e=c(e))}function w(e,t){return y(5,e.length/t,t=c([t]),e=a(Uint8Array,e))}function D(e){return y(6,e.length,void 0,e=c(d(e)))}function C(e){return y(8,e.length,void 0,e=c(d(m(e))))}function $(e,t){return y(9,e.length,c([t]),e=c(d(h(e,t))))}function S(e,t){var r,n=e.length,o=c([t]),i=(t=m(h(e,t),void 0)).length;for(r=e=0;r<i;++r){var s=t[r];0===s?++e:e=32767===s||-32768===s?e+2:0<s?e+Math.ceil(s/32767):e+Math.ceil(s/-32768)}e=new Int16Array(e);var l=0;for(r=0;r<i;++r){if(0<=(s=t[r]))for(;32767<=s;)e[l]=32767,++l,s-=32767;else for(;-32768>=s;)e[l]=-32768,++l,s-=-32768;e[l]=s,++l}for(t=void 0,s=e.length,t||(t=new Uint8Array(2*s)),r=a(DataView,t),i=0;i<s;++i)r.setInt16(2*i,e[i]);return y(10,n,o,e=a(Uint8Array,t))}function A(e){var t={};return E.forEach((function(r){void 0!==e[r]&&(t[r]=e[r])})),e.bondAtomList&&(t.bondAtomList=x(e.bondAtomList)),e.bondOrderList&&(t.bondOrderList=b(e.bondOrderList)),t.xCoordList=S(e.xCoordList,1e3),t.yCoordList=S(e.yCoordList,1e3),t.zCoordList=S(e.zCoordList,1e3),e.bFactorList&&(t.bFactorList=S(e.bFactorList,100)),e.atomIdList&&(t.atomIdList=C(e.atomIdList)),e.altLocList&&(t.altLocList=D(e.altLocList)),e.occupancyList&&(t.occupancyList=$(e.occupancyList,100)),t.groupIdList=C(e.groupIdList),t.groupTypeList=x(e.groupTypeList),e.secStructList&&(t.secStructList=b(e.secStructList,1)),e.insCodeList&&(t.insCodeList=D(e.insCodeList)),e.sequenceIndexList&&(t.sequenceIndexList=C(e.sequenceIndexList)),t.chainIdList=w(e.chainIdList,4),e.chainNameList&&(t.chainNameList=w(e.chainNameList,4)),t}function _(e){function t(e){for(var t={},r=0;r<e;r++)t[i()]=i();return t}function r(t){var r=e.subarray(a,a+t);return a+=t,r}function n(t){var r=e.subarray(a,a+t);if(a+=t,65535<t){t=[];for(var n=0;n<r.length;n+=65535)t.push(String.fromCharCode.apply(null,r.subarray(n,n+65535)));return t.join("")}return String.fromCharCode.apply(null,r)}function o(e){for(var t=Array(e),r=0;r<e;r++)t[r]=i();return t}function i(){var i=e[a];if(0==(128&i))return a++,i;if(128==(240&i))return a++,t(15&i);if(144==(240&i))return a++,o(15&i);if(160==(224&i))return a++,n(31&i);if(224==(224&i))return i=s.getInt8(a),a++,i;switch(i){case 192:return a++,null;case 194:return a++,!1;case 195:return a++,!0;case 196:return i=s.getUint8(a+1),a+=2,r(i);case 197:return i=s.getUint16(a+1),a+=3,r(i);case 198:return i=s.getUint32(a+1),a+=5,r(i);case 202:return i=s.getFloat32(a+1),a+=5,i;case 203:return i=s.getFloat64(a+1),a+=9,i;case 204:return i=e[a+1],a+=2,i;case 205:return i=s.getUint16(a+1),a+=3,i;case 206:return i=s.getUint32(a+1),a+=5,i;case 208:return i=s.getInt8(a+1),a+=2,i;case 209:return i=s.getInt16(a+1),a+=3,i;case 210:return i=s.getInt32(a+1),a+=5,i;case 217:return i=s.getUint8(a+1),a+=2,n(i);case 218:return i=s.getUint16(a+1),a+=3,n(i);case 219:return i=s.getUint32(a+1),a+=5,n(i);case 220:return i=s.getUint16(a+1),a+=3,o(i);case 221:return i=s.getUint32(a+1),a+=5,o(i);case 222:return i=s.getUint16(a+1),a+=3,t(i);case 223:return i=s.getUint32(a+1),a+=5,t(i)}throw Error("Unknown type 0x"+i.toString(16))}var a=0,s=new DataView(e.buffer);return i()}function M(e,t,r,n){switch(e){case 1:n=void 0,r=t.length,n||(n=new Float32Array(r/4)),e=a(DataView,n),t=a(DataView,t);var o=0,i=0;for(r/=4;o<r;++o,i+=4)e.setFloat32(i,t.getFloat32(i),!0);return n;case 2:return a(Int8Array,t);case 3:return s(t);case 4:return l(t);case 5:return a(Uint8Array,t);case 6:return f(l(t),new Uint8Array(r));case 7:return f(l(t));case 8:return p(f(n=l(t)),void 0);case 9:return e=l(t),n=l(n)[0],u(f(e,a(Int32Array,void 0,4)),n,void 0);case 10:return e=s(t),n=l(n)[0],e=v(e,a(Int32Array,void 0,4)),t=a(Float32Array,e,4),u(p(e,a(Int32Array,t,4)),n,t);case 11:return u(s(t),l(n)[0]);case 12:return e=s(t),n=l(n)[0],u(v(e,a(Int32Array,void 0,4)),n,void 0);case 13:return e=a(Int8Array,t),n=l(n)[0],u(v(e,a(Int32Array,void 0,4)),n,void 0);case 14:return v(s(t));case 15:return v(a(Int8Array,t))}}function z(e,t){var r=(t=t||{}).ignoreFields,n={};return F.forEach((function(t){var o=!!r&&-1!==r.indexOf(t),i=e[t];o||void 0===i||(n[t]=i instanceof Uint8Array?M.apply(null,g(i)):i)})),n}function T(e,t){return e instanceof ArrayBuffer&&(e=new Uint8Array(e)),z(e=e instanceof Uint8Array?_(e):e,t)}function L(e,t,r,n){var o=new XMLHttpRequest;o.addEventListener("load",(function(){try{var e=T(o.response);r(e)}catch(e){n(e)}}),!0),o.addEventListener("error",n,!0),o.responseType="arraybuffer",o.open("GET",t+e.toUpperCase()),o.send()}var E="mmtfVersion mmtfProducer unitCell spaceGroup structureId title depositionDate releaseDate experimentalMethods resolution rFree rWork bioAssemblyList ncsOperatorList entityList groupList numBonds numAtoms numGroups numChains numModels groupsPerChain chainsPerModel".split(" "),F=E.concat("xCoordList yCoordList zCoordList groupIdList groupTypeList chainIdList bFactorList atomIdList altLocList occupancyList secStructList insCodeList sequenceIndexList chainNameList bondAtomList bondOrderList".split(" "));e.encode=function(e){return i(A(e))},e.decode=T,e.traverse=function(e,t,r){r=(r=r||{}).firstModelOnly;var n=t.onModel,o=t.onChain,i=t.onGroup,a=t.onAtom;t=t.onBond;var s,l,c=0,u=0,h=0,f=0,d=-1,p=e.chainNameList,m=e.secStructList,v=e.insCodeList,g=e.sequenceIndexList,y=e.atomIdList,b=e.bFactorList,x=e.altLocList,w=e.occupancyList,D=e.bondAtomList,C=e.bondOrderList,$=0;for(l=e.chainsPerModel.length;$<l&&!(r&&0<c);++$){var S=e.chainsPerModel[c];for(n&&n({chainCount:S,modelIndex:c}),s=0;s<S;++s){var A=e.groupsPerChain[u];if(o){var _=String.fromCharCode.apply(null,e.chainIdList.subarray(4*u,4*u+4)).replace(/\0/g,""),M=null;p&&(M=String.fromCharCode.apply(null,p.subarray(4*u,4*u+4)).replace(/\0/g,"")),o({groupCount:A,chainIndex:u,modelIndex:c,chainId:_,chainName:M})}for(_=0;_<A;++_){var z=e.groupList[e.groupTypeList[h]],T=z.atomNameList.length;if(i){M=null,m&&(M=m[h]);var L=null;e.insCodeList&&(L=String.fromCharCode(v[h]));var E=null;g&&(E=g[h]),i({atomCount:T,groupIndex:h,chainIndex:u,modelIndex:c,groupId:e.groupIdList[h],groupType:e.groupTypeList[h],groupName:z.groupName,singleLetterCode:z.singleLetterCode,chemCompType:z.chemCompType,secStruct:M,insCode:L,sequenceIndex:E})}for(M=0;M<T;++M){if(a){L=null,y&&(L=y[f]),E=null,b&&(E=b[f]);var F=null;x&&(F=String.fromCharCode(x[f]));var k=null;w&&(k=w[f]),a({atomIndex:f,groupIndex:h,chainIndex:u,modelIndex:c,atomId:L,element:z.elementList[M],atomName:z.atomNameList[M],formalCharge:z.formalChargeList[M],xCoord:e.xCoordList[f],yCoord:e.yCoordList[f],zCoord:e.zCoordList[f],bFactor:E,altLoc:F,occupancy:k})}f+=1}if(t)for(E=z.bondAtomList,M=0,L=z.bondOrderList.length;M<L;++M)t({atomIndex1:f-T+E[2*M],atomIndex2:f-T+E[2*M+1],bondOrder:z.bondOrderList[M]});h+=1}u+=1}if(s=d+1,d=f-1,t&&D)for(M=0,L=D.length;M<L;M+=2)S=D[M],A=D[M+1],(S>=s&&S<=d||A>=s&&A<=d)&&t({atomIndex1:S,atomIndex2:A,bondOrder:C?C[M/2]:null});c+=1}},e.fetch=function(e,t,r){L(e,"http://mmtf.rcsb.org/v1.0/full/",t,r)},e.fetchReduced=function(e,t,r){L(e,"http://mmtf.rcsb.org/v1.0/reduced/",t,r)},e.version="v1.0.0",e.fetchUrl="http://mmtf.rcsb.org/v1.0/full/",e.fetchReducedUrl="http://mmtf.rcsb.org/v1.0/reduced/",e.encodeMsgpack=i,e.encodeMmtf=A,e.decodeMsgpack=_,e.decodeMmtf=z,Object.defineProperty(e,"__esModule",{value:!0})}(g.MMTF=g.MMTF||{}),module.exports=function e(t,r,n){function o(a,s){if(!r[a]){if(!t[a]){if(i)return i(a,!0);throw(s=Error("Cannot find module '"+a+"'")).code="MODULE_NOT_FOUND",s}s=r[a]={exports:{}},t[a][0].call(s.exports,(function(e){var r=t[a][1][e];return o(r||e)}),s,s.exports,e,t,r,n)}return r[a].exports}for(var i=void 0,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,t,r){e="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array,r.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}}return e},r.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var n={arraySet:function(e,t,r,n,o){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),o);else for(var i=0;i<n;i++)e[o+i]=t[r+i]},flattenChunks:function(e){var t,r,n=r=0;for(t=e.length;n<t;n++)r+=e[n].length;var o=new Uint8Array(r);for(n=r=0,t=e.length;n<t;n++){var i=e[n];o.set(i,r),r+=i.length}return o}},o={arraySet:function(e,t,r,n,o){for(var i=0;i<n;i++)e[o+i]=t[r+i]},flattenChunks:function(e){return[].concat.apply([],e)}};r.setTyped=function(e){e?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,n)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,o))},r.setTyped(e)},{}],2:[function(e,t,r){function n(e,t){if(65537>t&&(e.subarray&&a||!e.subarray&&i))return String.fromCharCode.apply(null,o.shrinkBuf(e,t));for(var r="",n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r}var o=e("./common"),i=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){a=!1}var s=new o.Buf8(256);for(e=0;256>e;e++)s[e]=252<=e?6:248<=e?5:240<=e?4:224<=e?3:192<=e?2:1;s[254]=s[254]=1,r.string2buf=function(e){var t,r,n=e.length,i=0;for(t=0;t<n;t++){var a=e.charCodeAt(t);if(55296==(64512&a)&&t+1<n){var s=e.charCodeAt(t+1);56320==(64512&s)&&(a=65536+(a-55296<<10)+(s-56320),t++)}i+=128>a?1:2048>a?2:65536>a?3:4}var l=new o.Buf8(i);for(t=r=0;r<i;t++)55296==(64512&(a=e.charCodeAt(t)))&&t+1<n&&56320==(64512&(s=e.charCodeAt(t+1)))&&(a=65536+(a-55296<<10)+(s-56320),t++),128>a?l[r++]=a:(2048>a?l[r++]=192|a>>>6:(65536>a?l[r++]=224|a>>>12:(l[r++]=240|a>>>18,l[r++]=128|a>>>12&63),l[r++]=128|a>>>6&63),l[r++]=128|63&a);return l},r.buf2binstring=function(e){return n(e,e.length)},r.binstring2buf=function(e){for(var t=new o.Buf8(e.length),r=0,n=t.length;r<n;r++)t[r]=e.charCodeAt(r);return t},r.buf2string=function(e,t){var r,o=t||e.length,i=Array(2*o);for(t=r=0;t<o;){var a=e[t++];if(128>a)i[r++]=a;else{var l=s[a];if(4<l)i[r++]=65533,t+=l-1;else{for(a&=2===l?31:3===l?15:7;1<l&&t<o;)a=a<<6|63&e[t++],l--;1<l?i[r++]=65533:65536>a?i[r++]=a:(a-=65536,i[r++]=55296|a>>10&1023,i[r++]=56320|1023&a)}}}return n(i,r)},r.utf8border=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;0<=r&&128==(192&e[r]);)r--;return 0>r||0===r?t:r+s[e[r]]>t?r:t}},{"./common":1}],3:[function(e,t,r){t.exports=function(e,t,r,n){var o,i=65535&e|0;for(e=e>>>16&65535|0;0!==r;){r-=o=2e3<r?2e3:r;do{e=e+(i=i+t[n++]|0)|0}while(--o);i%=65521,e%=65521}return i|e<<16|0}},{}],4:[function(e,t,r){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],5:[function(e,t,r){var n=function(){for(var e,t=[],r=0;256>r;r++){e=r;for(var n=0;8>n;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();t.exports=function(e,t,r,o){for(r=o+r,e^=-1;o<r;o++)e=e>>>8^n[255&(e^t[o])];return-1^e}},{}],6:[function(e,t,r){t.exports=function(){this.os=this.xflags=this.time=this.text=0,this.extra=null,this.extra_len=0,this.comment=this.name="",this.hcrc=0,this.done=!1}},{}],7:[function(e,t,r){t.exports=function(e,t){var r=e.state,n=e.next_in,o=e.input,i=n+(e.avail_in-5),a=e.next_out,s=e.output;t=a-(t-e.avail_out);var l=a+(e.avail_out-257),c=r.dmax,u=r.wsize,h=r.whave,f=r.wnext,d=r.window,p=r.hold,m=r.bits,v=r.lencode,g=r.distcode,y=(1<<r.lenbits)-1,b=(1<<r.distbits)-1;e:do{15>m&&(p+=o[n++]<<m,m+=8,p+=o[n++]<<m,m+=8);var x=v[p&y];t:for(;;){var w=x>>>24;if(p>>>=w,m-=w,0==(w=x>>>16&255))s[a++]=65535&x;else{if(!(16&w)){if(0==(64&w)){x=v[(65535&x)+(p&(1<<w)-1)];continue t}32&w?r.mode=12:(e.msg="invalid literal/length code",r.mode=30);break e}var D=65535&x;(w&=15)&&(m<w&&(p+=o[n++]<<m,m+=8),D+=p&(1<<w)-1,p>>>=w,m-=w),15>m&&(p+=o[n++]<<m,m+=8,p+=o[n++]<<m,m+=8),x=g[p&b];r:for(;;){if(p>>>=w=x>>>24,m-=w,!(16&(w=x>>>16&255))){if(0==(64&w)){x=g[(65535&x)+(p&(1<<w)-1)];continue r}e.msg="invalid distance code",r.mode=30;break e}if(x&=65535,m<(w&=15)&&(p+=o[n++]<<m,(m+=8)<w&&(p+=o[n++]<<m,m+=8)),(x+=p&(1<<w)-1)>c){e.msg="invalid distance too far back",r.mode=30;break e}if(p>>>=w,m-=w,x>(w=a-t)){if((w=x-w)>h&&r.sane){e.msg="invalid distance too far back",r.mode=30;break e}var C=0,$=d;if(0===f){if(C+=u-w,w<D){D-=w;do{s[a++]=d[C++]}while(--w);C=a-x,$=s}}else if(f<w){if(C+=u+f-w,(w-=f)<D){D-=w;do{s[a++]=d[C++]}while(--w);if(C=0,f<D){D-=w=f;do{s[a++]=d[C++]}while(--w);C=a-x,$=s}}}else if(C+=f-w,w<D){D-=w;do{s[a++]=d[C++]}while(--w);C=a-x,$=s}for(;2<D;)s[a++]=$[C++],s[a++]=$[C++],s[a++]=$[C++],D-=3;D&&(s[a++]=$[C++],1<D&&(s[a++]=$[C++]))}else{C=a-x;do{s[a++]=s[C++],s[a++]=s[C++],s[a++]=s[C++],D-=3}while(2<D);D&&(s[a++]=s[C++],1<D&&(s[a++]=s[C++]))}break}}break}}while(n<i&&a<l);n-=D=m>>3,m-=D<<3,e.next_in=n,e.next_out=a,e.avail_in=n<i?i-n+5:5-(n-i),e.avail_out=a<l?l-a+257:257-(a-l),r.hold=p&(1<<m)-1,r.bits=m}},{}],8:[function(e,t,r){function n(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function o(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.total=this.check=this.dmax=this.flags=0,this.head=null,this.wnext=this.whave=this.wsize=this.wbits=0,this.window=null,this.extra=this.offset=this.length=this.bits=this.hold=0,this.distcode=this.lencode=null,this.have=this.ndist=this.nlen=this.ncode=this.distbits=this.lenbits=0,this.next=null,this.lens=new h.Buf16(320),this.work=new h.Buf16(288),this.distdyn=this.lendyn=null,this.was=this.back=this.sane=0}function i(e){if(!e||!e.state)return-2;var t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new h.Buf32(852),t.distcode=t.distdyn=new h.Buf32(592),t.sane=1,t.back=-1,0}function a(e){if(!e||!e.state)return-2;var t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,i(e)}function s(e,t){if(!e||!e.state)return-2;var r=e.state;if(0>t){var n=0;t=-t}else n=1+(t>>4),48>t&&(t&=15);return t&&(8>t||15<t)?-2:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,a(e))}function l(e,t){if(!e)return-2;var r=new o;return e.state=r,r.window=null,0!==(t=s(e,t))&&(e.state=null),t}var c,u,h=e("../utils/common"),f=e("./adler32"),d=e("./crc32"),p=e("./inffast"),m=e("./inftrees"),v=!0;r.inflateReset=a,r.inflateReset2=s,r.inflateResetKeep=i,r.inflateInit=function(e){return l(e,15)},r.inflateInit2=l,r.inflate=function(e,t){var r,o=new h.Buf8(4),i=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return-2;var a=e.state;12===a.mode&&(a.mode=13);var s=e.next_out,l=e.output,g=e.avail_out,y=e.next_in,b=e.input,x=e.avail_in,w=a.hold,D=a.bits,C=x,$=g,S=0;e:for(;;)switch(a.mode){case 1:if(0===a.wrap){a.mode=13;break}for(;16>D;){if(0===x)break e;x--,w+=b[y++]<<D,D+=8}if(2&a.wrap&&35615===w){a.check=0,o[0]=255&w,o[1]=w>>>8&255,a.check=d(a.check,o,2,0),D=w=0,a.mode=2;break}if(a.flags=0,a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&w)<<8)+(w>>8))%31){e.msg="incorrect header check",a.mode=30;break}if(8!=(15&w)){e.msg="unknown compression method",a.mode=30;break}D-=4;var A=8+(15&(w>>>=4));if(0===a.wbits)a.wbits=A;else if(A>a.wbits){e.msg="invalid window size",a.mode=30;break}a.dmax=1<<A,e.adler=a.check=1,a.mode=512&w?10:12,D=w=0;break;case 2:for(;16>D;){if(0===x)break e;x--,w+=b[y++]<<D,D+=8}if(a.flags=w,8!=(255&a.flags)){e.msg="unknown compression method",a.mode=30;break}if(57344&a.flags){e.msg="unknown header flags set",a.mode=30;break}a.head&&(a.head.text=w>>8&1),512&a.flags&&(o[0]=255&w,o[1]=w>>>8&255,a.check=d(a.check,o,2,0)),D=w=0,a.mode=3;case 3:for(;32>D;){if(0===x)break e;x--,w+=b[y++]<<D,D+=8}a.head&&(a.head.time=w),512&a.flags&&(o[0]=255&w,o[1]=w>>>8&255,o[2]=w>>>16&255,o[3]=w>>>24&255,a.check=d(a.check,o,4,0)),D=w=0,a.mode=4;case 4:for(;16>D;){if(0===x)break e;x--,w+=b[y++]<<D,D+=8}a.head&&(a.head.xflags=255&w,a.head.os=w>>8),512&a.flags&&(o[0]=255&w,o[1]=w>>>8&255,a.check=d(a.check,o,2,0)),D=w=0,a.mode=5;case 5:if(1024&a.flags){for(;16>D;){if(0===x)break e;x--,w+=b[y++]<<D,D+=8}a.length=w,a.head&&(a.head.extra_len=w),512&a.flags&&(o[0]=255&w,o[1]=w>>>8&255,a.check=d(a.check,o,2,0)),D=w=0}else a.head&&(a.head.extra=null);a.mode=6;case 6:if(1024&a.flags){var _=a.length;if(_>x&&(_=x),_&&(a.head&&(A=a.head.extra_len-a.length,a.head.extra||(a.head.extra=Array(a.head.extra_len)),h.arraySet(a.head.extra,b,y,_,A)),512&a.flags&&(a.check=d(a.check,b,_,y)),x-=_,y+=_,a.length-=_),a.length)break e}a.length=0,a.mode=7;case 7:if(2048&a.flags){if(0===x)break e;_=0;do{A=b[y+_++],a.head&&A&&65536>a.length&&(a.head.name+=String.fromCharCode(A))}while(A&&_<x);if(512&a.flags&&(a.check=d(a.check,b,_,y)),x-=_,y+=_,A)break e}else a.head&&(a.head.name=null);a.length=0,a.mode=8;case 8:if(4096&a.flags){if(0===x)break e;_=0;do{A=b[y+_++],a.head&&A&&65536>a.length&&(a.head.comment+=String.fromCharCode(A))}while(A&&_<x);if(512&a.flags&&(a.check=d(a.check,b,_,y)),x-=_,y+=_,A)break e}else a.head&&(a.head.comment=null);a.mode=9;case 9:if(512&a.flags){for(;16>D;){if(0===x)break e;x--,w+=b[y++]<<D,D+=8}if(w!==(65535&a.check)){e.msg="header crc mismatch",a.mode=30;break}D=w=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),e.adler=a.check=0,a.mode=12;break;case 10:for(;32>D;){if(0===x)break e;x--,w+=b[y++]<<D,D+=8}e.adler=a.check=n(w),D=w=0,a.mode=11;case 11:if(0===a.havedict)return e.next_out=s,e.avail_out=g,e.next_in=y,e.avail_in=x,a.hold=w,a.bits=D,2;e.adler=a.check=1,a.mode=12;case 12:if(5===t||6===t)break e;case 13:if(a.last){w>>>=7&D,D-=7&D,a.mode=27;break}for(;3>D;){if(0===x)break e;x--,w+=b[y++]<<D,D+=8}switch(a.last=1&w,--D,3&(w>>>=1)){case 0:a.mode=14;break;case 1:if(A=a,v){for(c=new h.Buf32(512),u=new h.Buf32(32),_=0;144>_;)A.lens[_++]=8;for(;256>_;)A.lens[_++]=9;for(;280>_;)A.lens[_++]=7;for(;288>_;)A.lens[_++]=8;for(m(1,A.lens,0,288,c,0,A.work,{bits:9}),_=0;32>_;)A.lens[_++]=5;m(2,A.lens,0,32,u,0,A.work,{bits:5}),v=!1}if(A.lencode=c,A.lenbits=9,A.distcode=u,A.distbits=5,a.mode=20,6===t){w>>>=2,D-=2;break e}break;case 2:a.mode=17;break;case 3:e.msg="invalid block type",a.mode=30}w>>>=2,D-=2;break;case 14:for(w>>>=7&D,D-=7&D;32>D;){if(0===x)break e;x--,w+=b[y++]<<D,D+=8}if((65535&w)!=(w>>>16^65535)){e.msg="invalid stored block lengths",a.mode=30;break}if(a.length=65535&w,D=w=0,a.mode=15,6===t)break e;case 15:a.mode=16;case 16:if(_=a.length){if(_>x&&(_=x),_>g&&(_=g),0===_)break e;h.arraySet(l,b,y,_,s),x-=_,y+=_,g-=_,s+=_,a.length-=_;break}a.mode=12;break;case 17:for(;14>D;){if(0===x)break e;x--,w+=b[y++]<<D,D+=8}if(a.nlen=257+(31&w),w>>>=5,D-=5,a.ndist=1+(31&w),w>>>=5,D-=5,a.ncode=4+(15&w),w>>>=4,D-=4,286<a.nlen||30<a.ndist){e.msg="too many length or distance symbols",a.mode=30;break}a.have=0,a.mode=18;case 18:for(;a.have<a.ncode;){for(;3>D;){if(0===x)break e;x--,w+=b[y++]<<D,D+=8}a.lens[i[a.have++]]=7&w,w>>>=3,D-=3}for(;19>a.have;)a.lens[i[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,_={bits:a.lenbits},S=m(0,a.lens,0,19,a.lencode,0,a.work,_),a.lenbits=_.bits,S){e.msg="invalid code lengths set",a.mode=30;break}a.have=0,a.mode=19;case 19:for(;a.have<a.nlen+a.ndist;){for(;;){var M=a.lencode[w&(1<<a.lenbits)-1];if(_=M>>>24,M&=65535,_<=D)break;if(0===x)break e;x--,w+=b[y++]<<D,D+=8}if(16>M)w>>>=_,D-=_,a.lens[a.have++]=M;else{if(16===M){for(A=_+2;D<A;){if(0===x)break e;x--,w+=b[y++]<<D,D+=8}if(w>>>=_,D-=_,0===a.have){e.msg="invalid bit length repeat",a.mode=30;break}A=a.lens[a.have-1],_=3+(3&w),w>>>=2,D-=2}else if(17===M){for(A=_+3;D<A;){if(0===x)break e;x--,w+=b[y++]<<D,D+=8}D-=_,A=0,_=3+(7&(w>>>=_)),w>>>=3,D-=3}else{for(A=_+7;D<A;){if(0===x)break e;x--,w+=b[y++]<<D,D+=8}D-=_,A=0,_=11+(127&(w>>>=_)),w>>>=7,D-=7}if(a.have+_>a.nlen+a.ndist){e.msg="invalid bit length repeat",a.mode=30;break}for(;_--;)a.lens[a.have++]=A}}if(30===a.mode)break;if(0===a.lens[256]){e.msg="invalid code -- missing end-of-block",a.mode=30;break}if(a.lenbits=9,_={bits:a.lenbits},S=m(1,a.lens,0,a.nlen,a.lencode,0,a.work,_),a.lenbits=_.bits,S){e.msg="invalid literal/lengths set",a.mode=30;break}if(a.distbits=6,a.distcode=a.distdyn,_={bits:a.distbits},S=m(2,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,_),a.distbits=_.bits,S){e.msg="invalid distances set",a.mode=30;break}if(a.mode=20,6===t)break e;case 20:a.mode=21;case 21:if(6<=x&&258<=g){e.next_out=s,e.avail_out=g,e.next_in=y,e.avail_in=x,a.hold=w,a.bits=D,p(e,$),s=e.next_out,l=e.output,g=e.avail_out,y=e.next_in,b=e.input,x=e.avail_in,w=a.hold,D=a.bits,12===a.mode&&(a.back=-1);break}for(a.back=0;_=(M=a.lencode[w&(1<<a.lenbits)-1])>>>24,A=M>>>16&255,M&=65535,!(_<=D);){if(0===x)break e;x--,w+=b[y++]<<D,D+=8}if(A&&0==(240&A)){var z=_,T=A;for(r=M;_=(M=a.lencode[r+((w&(1<<z+T)-1)>>z)])>>>24,A=M>>>16&255,M&=65535,!(z+_<=D);){if(0===x)break e;x--,w+=b[y++]<<D,D+=8}w>>>=z,D-=z,a.back+=z}if(w>>>=_,D-=_,a.back+=_,a.length=M,0===A){a.mode=26;break}if(32&A){a.back=-1,a.mode=12;break}if(64&A){e.msg="invalid literal/length code",a.mode=30;break}a.extra=15&A,a.mode=22;case 22:if(a.extra){for(A=a.extra;D<A;){if(0===x)break e;x--,w+=b[y++]<<D,D+=8}a.length+=w&(1<<a.extra)-1,w>>>=a.extra,D-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=23;case 23:for(;_=(M=a.distcode[w&(1<<a.distbits)-1])>>>24,A=M>>>16&255,M&=65535,!(_<=D);){if(0===x)break e;x--,w+=b[y++]<<D,D+=8}if(0==(240&A)){for(z=_,T=A,r=M;_=(M=a.distcode[r+((w&(1<<z+T)-1)>>z)])>>>24,A=M>>>16&255,M&=65535,!(z+_<=D);){if(0===x)break e;x--,w+=b[y++]<<D,D+=8}w>>>=z,D-=z,a.back+=z}if(w>>>=_,D-=_,a.back+=_,64&A){e.msg="invalid distance code",a.mode=30;break}a.offset=M,a.extra=15&A,a.mode=24;case 24:if(a.extra){for(A=a.extra;D<A;){if(0===x)break e;x--,w+=b[y++]<<D,D+=8}a.offset+=w&(1<<a.extra)-1,w>>>=a.extra,D-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){e.msg="invalid distance too far back",a.mode=30;break}a.mode=25;case 25:if(0===g)break e;if(_=$-g,a.offset>_){if((_=a.offset-_)>a.whave&&a.sane){e.msg="invalid distance too far back",a.mode=30;break}_>a.wnext?(_-=a.wnext,A=a.wsize-_):A=a.wnext-_,_>a.length&&(_=a.length),z=a.window}else z=l,A=s-a.offset,_=a.length;_>g&&(_=g),g-=_,a.length-=_;do{l[s++]=z[A++]}while(--_);0===a.length&&(a.mode=21);break;case 26:if(0===g)break e;l[s++]=a.length,g--,a.mode=21;break;case 27:if(a.wrap){for(;32>D;){if(0===x)break e;x--,w|=b[y++]<<D,D+=8}if($-=g,e.total_out+=$,a.total+=$,$&&(e.adler=a.check=a.flags?d(a.check,l,$,s-$):f(a.check,l,$,s-$)),$=g,(a.flags?w:n(w))!==a.check){e.msg="incorrect data check",a.mode=30;break}D=w=0}a.mode=28;case 28:if(a.wrap&&a.flags){for(;32>D;){if(0===x)break e;x--,w+=b[y++]<<D,D+=8}if(w!==(4294967295&a.total)){e.msg="incorrect length check",a.mode=30;break}D=w=0}a.mode=29;case 29:S=1;break e;case 30:S=-3;break e;case 31:return-4;default:return-2}return e.next_out=s,e.avail_out=g,e.next_in=y,e.avail_in=x,a.hold=w,a.bits=D,(a.wsize||$!==e.avail_out&&30>a.mode&&(27>a.mode||4!==t))&&(b=e.output,y=e.next_out,s=$-e.avail_out,null===(g=e.state).window&&(g.wsize=1<<g.wbits,g.wnext=0,g.whave=0,g.window=new h.Buf8(g.wsize)),s>=g.wsize?(h.arraySet(g.window,b,y-g.wsize,g.wsize,0),g.wnext=0,g.whave=g.wsize):((x=g.wsize-g.wnext)>s&&(x=s),h.arraySet(g.window,b,y-s,x,g.wnext),(s-=x)?(h.arraySet(g.window,b,y-s,s,0),g.wnext=s,g.whave=g.wsize):(g.wnext+=x,g.wnext===g.wsize&&(g.wnext=0),g.whave<g.wsize&&(g.whave+=x)))),C-=e.avail_in,$-=e.avail_out,e.total_in+=C,e.total_out+=$,a.total+=$,a.wrap&&$&&(e.adler=a.check=a.flags?d(a.check,l,$,e.next_out-$):f(a.check,l,$,e.next_out-$)),e.data_type=a.bits+(a.last?64:0)+(12===a.mode?128:0)+(20===a.mode||15===a.mode?256:0),(0===C&&0===$||4===t)&&0===S&&(S=-5),S},r.inflateEnd=function(e){if(!e||!e.state)return-2;var t=e.state;return t.window&&(t.window=null),e.state=null,0},r.inflateGetHeader=function(e,t){return e&&e.state?0==(2&(e=e.state).wrap)?-2:(e.head=t,t.done=!1,0):-2},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":5,"./inffast":7,"./inftrees":9}],9:[function(e,t,r){var n=e("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,r,l,c,u,h,f){var d,p,m,v,g,y,b,x=f.bits,w=0,D=new n.Buf16(16),C=new n.Buf16(16),$=0;for(d=0;15>=d;d++)D[d]=0;for(p=0;p<l;p++)D[t[r+p]]++;var S=x;for(m=15;1<=m&&0===D[m];m--);if(S>m&&(S=m),0===m)return c[u++]=20971520,c[u++]=20971520,f.bits=1,0;for(x=1;x<m&&0===D[x];x++);for(S<x&&(S=x),d=v=1;15>=d;d++)if(v<<=1,0>(v-=D[d]))return-1;if(0<v&&(0===e||1!==m))return-1;for(C[1]=0,d=1;15>d;d++)C[d+1]=C[d]+D[d];for(p=0;p<l;p++)0!==t[r+p]&&(h[C[t[r+p]]++]=p);if(0===e)var A=b=h,_=19;else 1===e?(A=o,w-=257,b=i,$-=257,_=256):(A=a,b=s,_=-1);p=g=0,d=x;var M=u;l=S,C=0;var z=-1,T=1<<S,L=T-1;if(1===e&&852<T||2===e&&592<T)return 1;for(;;){var E=d-C;if(h[p]<_)var F=0,k=h[p];else h[p]>_?(F=b[$+h[p]],k=A[w+h[p]]):(F=96,k=0);v=1<<d-C,x=y=1<<l;do{c[M+(g>>C)+(y-=v)]=E<<24|F<<16|k|0}while(0!==y);for(v=1<<d-1;g&v;)v>>=1;if(0!==v?(g&=v-1,g+=v):g=0,p++,0==--D[d]){if(d===m)break;d=t[r+h[p]]}if(d>S&&(g&L)!==z){for(0===C&&(C=S),M+=x,v=1<<(l=d-C);l+C<m&&!(0>=(v-=D[l+C]));)l++,v<<=1;if(T+=1<<l,1===e&&852<T||2===e&&592<T)return 1;c[z=g&L]=S<<24|l<<16|M-u|0}}return 0!==g&&(c[M+g]=d-C<<24|4194304),f.bits=S,0}},{"../utils/common":1}],10:[function(e,t,r){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],11:[function(e,t,r){t.exports=function(){this.input=null,this.total_in=this.avail_in=this.next_in=0,this.output=null,this.total_out=this.avail_out=this.next_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],"/lib/inflate.js":[function(e,t,r){function n(e,t){if((t=new f(t)).push(e,!0),t.err)throw t.msg;return t.result}var o=e("./zlib/inflate.js"),i=e("./utils/common"),a=e("./utils/strings"),s=e("./zlib/constants"),l=e("./zlib/messages"),c=e("./zlib/zstream"),u=e("./zlib/gzheader"),h=Object.prototype.toString,f=function(e){var t=this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});if(t.raw&&0<=t.windowBits&&16>t.windowBits&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&16>t.windowBits)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&48>t.windowBits&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0,(e=o.inflateInit2(this.strm,t.windowBits))!==s.Z_OK)throw Error(l[e]);this.header=new u,o.inflateGetHeader(this.strm,this.header)};f.prototype.push=function(e,t){var r=this.strm,n=this.options.chunkSize;if(this.ended)return!1;t=t===~~t?t:!0===t?s.Z_FINISH:s.Z_NO_FLUSH,"string"==typeof e?r.input=a.binstring2buf(e):"[object ArrayBuffer]"===h.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;do{if(0===r.avail_out&&(r.output=new i.Buf8(n),r.next_out=0,r.avail_out=n),(e=o.inflate(r,s.Z_NO_FLUSH))!==s.Z_STREAM_END&&e!==s.Z_OK)return this.onEnd(e),this.ended=!0,!1;if(r.next_out&&(0===r.avail_out||e===s.Z_STREAM_END||0===r.avail_in&&(t===s.Z_FINISH||t===s.Z_SYNC_FLUSH)))if("string"===this.options.to){var l=a.utf8border(r.output,r.next_out),c=r.next_out-l,u=a.buf2string(r.output,l);r.next_out=c,r.avail_out=n-c,c&&i.arraySet(r.output,r.output,l,c,0),this.onData(u)}else this.onData(i.shrinkBuf(r.output,r.next_out))}while(0<r.avail_in&&e!==s.Z_STREAM_END);return e===s.Z_STREAM_END&&(t=s.Z_FINISH),t===s.Z_FINISH?(e=o.inflateEnd(this.strm),this.onEnd(e),this.ended=!0,e===s.Z_OK):(t===s.Z_SYNC_FLUSH&&(this.onEnd(s.Z_OK),r.avail_out=0),!0)},f.prototype.onData=function(e){this.chunks.push(e)},f.prototype.onEnd=function(e){e===s.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Inflate=f,r.inflate=n,r.inflateRaw=function(e,t){return(t=t||{}).raw=!0,n(e,t)},r.ungzip=n},{"./utils/common":1,"./utils/strings":2,"./zlib/constants":4,"./zlib/gzheader":6,"./zlib/inflate.js":8,"./zlib/messages":10,"./zlib/zstream":11}]},{},[])("/lib/inflate.js");var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,r){e!=Array.prototype&&e!=Object.prototype&&(e[t]=r.value)},$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:void 0!==__webpack_require__.g&&null!=__webpack_require__.g?__webpack_require__.g:e},$jscomp.global=$jscomp.getGlobal(this),$jscomp.SYMBOL_PREFIX="jscomp_symbol_",$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){},$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)},$jscomp.symbolCounter_=0,$jscomp.Symbol=function(e){return $jscomp.SYMBOL_PREFIX+(e||"")+$jscomp.symbolCounter_++},$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var e=$jscomp.global.Symbol.iterator;e||(e=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator")),"function"!=typeof Array.prototype[e]&&$jscomp.defineProperty(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}}),$jscomp.initSymbolIterator=function(){}},$jscomp.arrayIterator=function(e){var t=0;return $jscomp.iteratorPrototype((function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}))},$jscomp.iteratorPrototype=function(e){return $jscomp.initSymbolIterator(),(e={next:e})[$jscomp.global.Symbol.iterator]=function(){return this},e},$jscomp.makeIterator=function(e){$jscomp.initSymbolIterator();var t=e[Symbol.iterator];return t?t.call(e):$jscomp.arrayIterator(e)},$jscomp.polyfill=function(e,t,r,n){if(t){for(r=$jscomp.global,e=e.split("."),n=0;n<e.length-1;n++){var o=e[n];o in r||(r[o]={}),r=r[o]}(t=t(n=r[e=e[e.length-1]]))!=n&&null!=t&&$jscomp.defineProperty(r,e,{configurable:!0,writable:!0,value:t})}},$jscomp.FORCE_POLYFILL_PROMISE=!1,$jscomp.polyfill("Promise",(function(e){function t(){this.batch_=null}function r(e){return e instanceof o?e:new o((function(t,r){t(e)}))}if(e&&!$jscomp.FORCE_POLYFILL_PROMISE)return e;t.prototype.asyncExecute=function(e){return null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_()),this.batch_.push(e),this},t.prototype.asyncExecuteBatch_=function(){var e=this;this.asyncExecuteFunction((function(){e.executeBatch_()}))};var n=$jscomp.global.setTimeout;t.prototype.asyncExecuteFunction=function(e){n(e,0)},t.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var e=this.batch_;this.batch_=[];for(var t=0;t<e.length;++t){var r=e[t];delete e[t];try{r()}catch(e){this.asyncThrow_(e)}}}this.batch_=null},t.prototype.asyncThrow_=function(e){this.asyncExecuteFunction((function(){throw e}))};var o=function(e){this.state_=0,this.result_=void 0,this.onSettledCallbacks_=[];var t=this.createResolveAndReject_();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}};o.prototype.createResolveAndReject_=function(){function e(e){return function(n){r||(r=!0,e.call(t,n))}}var t=this,r=!1;return{resolve:e(this.resolveTo_),reject:e(this.reject_)}},o.prototype.resolveTo_=function(e){if(e===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof o)this.settleSameAsPromise_(e);else{e:switch(typeof e){case"object":var t=null!=e;break e;case"function":t=!0;break e;default:t=!1}t?this.resolveToNonPromiseObj_(e):this.fulfill_(e)}},o.prototype.resolveToNonPromiseObj_=function(e){var t=void 0;try{t=e.then}catch(e){return void this.reject_(e)}"function"==typeof t?this.settleSameAsThenable_(t,e):this.fulfill_(e)},o.prototype.reject_=function(e){this.settle_(2,e)},o.prototype.fulfill_=function(e){this.settle_(1,e)},o.prototype.settle_=function(e,t){if(0!=this.state_)throw Error("Cannot settle("+e+", "+t|"): Promise already settled in state"+this.state_);this.state_=e,this.result_=t,this.executeOnSettledCallbacks_()},o.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var e=this.onSettledCallbacks_,t=0;t<e.length;++t)e[t].call(),e[t]=null;this.onSettledCallbacks_=null}};var i=new t;return o.prototype.settleSameAsPromise_=function(e){var t=this.createResolveAndReject_();e.callWhenSettled_(t.resolve,t.reject)},o.prototype.settleSameAsThenable_=function(e,t){var r=this.createResolveAndReject_();try{e.call(t,r.resolve,r.reject)}catch(e){r.reject(e)}},o.prototype.then=function(e,t){function r(e,t){return"function"==typeof e?function(t){try{n(e(t))}catch(e){i(e)}}:t}var n,i,a=new o((function(e,t){n=e,i=t}));return this.callWhenSettled_(r(e,n),r(t,i)),a},o.prototype.catch=function(e){return this.then(void 0,e)},o.prototype.callWhenSettled_=function(e,t){function r(){switch(n.state_){case 1:e(n.result_);break;case 2:t(n.result_);break;default:throw Error("Unexpected state: "+n.state_)}}var n=this;null==this.onSettledCallbacks_?i.asyncExecute(r):this.onSettledCallbacks_.push((function(){i.asyncExecute(r)}))},o.resolve=r,o.reject=function(e){return new o((function(t,r){r(e)}))},o.race=function(e){return new o((function(t,n){for(var o=$jscomp.makeIterator(e),i=o.next();!i.done;i=o.next())r(i.value).callWhenSettled_(t,n)}))},o.all=function(e){var t=$jscomp.makeIterator(e),n=t.next();return n.done?r([]):new o((function(e,o){function i(t){return function(r){a[t]=r,0==--s&&e(a)}}var a=[],s=0;do{a.push(void 0),s++,r(n.value).callWhenSettled_(i(a.length-1),o),n=t.next()}while(!n.done)}))},o}),"es6","es3"),$jscomp.checkStringArgs=function(e,t,r){if(null==e)throw new TypeError("The 'this' value for String.prototype."+r+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+r+" must not be a regular expression");return e+""},$jscomp.polyfill("String.prototype.repeat",(function(e){return e||function(e){var t=$jscomp.checkStringArgs(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var r="";e;)1&e&&(r+=t),(e>>>=1)&&(t+=t);return r}}),"es6","es3"),$jscomp.polyfill("String.prototype.startsWith",(function(e){return e||function(e,t){var r=$jscomp.checkStringArgs(this,e,"startsWith");e+="";var n=r.length,o=e.length;t=Math.max(0,Math.min(0|t,r.length));for(var i=0;i<o&&t<n;)if(r[t++]!=e[i++])return!1;return i>=o}}),"es6","es3"),$jscomp.polyfill("String.prototype.endsWith",(function(e){return e||function(e,t){var r=$jscomp.checkStringArgs(this,e,"endsWith");e+="",void 0===t&&(t=r.length),t=Math.max(0,Math.min(0|t,r.length));for(var n=e.length;0<n&&0<t;)if(r[--t]!=e[--n])return!1;return 0>=n}}),"es6","es3"),$jscomp.polyfill("Array.prototype.fill",(function(e){return e||function(e,t,r){var n=this.length||0;for(0>t&&(t=Math.max(0,n+t)),(null==r||r>n)&&(r=n),0>(r=Number(r))&&(r=Math.max(0,n+r)),t=Number(t||0);t<r;t++)this[t]=e;return this}}),"es6","es3"),$jscomp.iteratorFromArray=function(e,t){$jscomp.initSymbolIterator(),e instanceof String&&(e+="");var r=0,n={next:function(){if(r<e.length){var o=r++;return{value:t(o,e[o]),done:!1}}return n.next=function(){return{done:!0,value:void 0}},n.next()}};return n[Symbol.iterator]=function(){return n},n},$jscomp.polyfill("Array.prototype.keys",(function(e){return e||function(){return $jscomp.iteratorFromArray(this,(function(e){return e}))}}),"es6","es3"),$jscomp.polyfill("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}}),"es6","es3"),$jscomp.polyfill("Array.prototype.includes",(function(e){return e||function(e,t){var r=this;r instanceof String&&(r=String(r));var n=r.length;for(t=t||0;t<n;t++)if(r[t]==e||Object.is(r[t],e))return!0;return!1}}),"es7","es3"),$jscomp.polyfill("String.prototype.includes",(function(e){return e||function(e,t){return-1!==$jscomp.checkStringArgs(this,e,"includes").indexOf(e,t||0)}}),"es6","es3"),$jscomp.polyfill("Number.isFinite",(function(e){return e||function(e){return"number"==typeof e&&(!isNaN(e)&&1/0!==e&&-1/0!==e)}}),"es6","es3"),$jscomp.polyfill("Number.isInteger",(function(e){return e||function(e){return!!Number.isFinite(e)&&e===Math.floor(e)}}),"es6","es3"),$3Dmol=window.$3Dmol||{},"object"==typeof module.exports&&(module.exports=$3Dmol),$3Dmol.notrack||$.get("https://3dmol.csb.pitt.edu/track/report.cgi"),String.prototype.startsWith||(String.prototype.startsWith=function(e){return 0===this.lastIndexOf(e,0)}),String.prototype.endsWith||(String.prototype.endsWith=function(e){return-1!==this.indexOf(e,this.length-e.length)}),$.ajaxTransport("+binary",(function(e,t,r){if(window.FormData&&(e.dataType&&"binary"==e.dataType||e.data&&(window.ArrayBuffer&&e.data instanceof ArrayBuffer||window.Blob&&e.data instanceof Blob)))return{send:function(t,r){var n=new XMLHttpRequest,o=e.url,i=e.type,a=e.async||!0,s=e.responseType||"blob",l=e.data||null,c=e.username||null,u=e.password||null,h=function(){var t={};t[e.dataType]=n.response,r(n.status,n.statusText,t,n.getAllResponseHeaders())};for(var f in n.addEventListener("load",h),n.addEventListener("error",h),n.addEventListener("abort",h),n.open(i,o,a,c,u),t)n.setRequestHeader(f,t[f]);n.responseType=s,n.send(l)},abort:function(){r.abort()}}})),$3Dmol.createViewer=function(e,t){if("string"===$.type(e)&&(e=$("#"+e)),e){t=t||{};try{return new $3Dmol.GLViewer(e,t)}catch(e){throw"error creating viewer: "+e}}},$3Dmol.createViewerGrid=function(e,t,r){if("string"===$.type(e)&&(e=$("#"+e)),e){t=t||{},r=r||{};var n=[],o=document.createElement("canvas");r.rows=t.rows,r.cols=t.cols,r.control_all=null!=t.control_all&&t.control_all,$(e).append($(o));try{for(var i=0;i<t.rows;i++){for(var a=[],s=0;s<t.cols;s++){r.row=i,r.col=s,r.canvas=o,r.viewers=n,r.control_all=t.control_all;var l=$3Dmol.createViewer(e,r);a.push(l)}n.unshift(a)}}catch(e){throw"error creating viewer grid: "+e}return n}},$3Dmol.viewers={},$3Dmol.getbin=function(e,t,r,n){var o=new Promise((function(t,o){r=null==r?"GET":r,$.ajax({url:e,dataType:"binary",method:r,data:n,responseType:"arraybuffer",processData:!1}).done((function(e,r,n){t(e)})).fail((function(e,t){console.log(t),o()}))}));return t?o.then(t):o},$3Dmol.base64ToArray=function(e){for(var t=(e=window.atob(e)).length,r=new Uint8Array(t),n=0;n<t;n++)r[n]=e.charCodeAt(n);return r},$3Dmol.download=function(e,t,r,n){var o="",i="";i="";var a=t.addModel();if("mmtf:"===e.substr(0,5)){var s=(i=r&&r.pdbUri?r.pdbUri:"https://mmtf.rcsb.org/v1.0/full/")+(e=e.substr(5).toUpperCase());r&&void 0===r.noComputeSecondaryStructure&&(r.noComputeSecondaryStructure=!0),e=new Promise((function(e,n){$3Dmol.getbin(s).then((function(n){a.addMolData(n,"mmtf",r),t.zoomTo(),t.render(),e(a)}))}))}else{if("pdb:"===e.substr(0,4)){if(o="mmtf",r&&r.format&&(o=r.format),r&&void 0===r.noComputeSecondaryStructure&&(r.noComputeSecondaryStructure=!0),!(e=e.substr(4).toUpperCase()).match(/^[1-9][A-Za-z0-9]{3}$/))return void alert("Wrong PDB ID");"mmtf"==o?(i=r&&r.mmtfUri?r.mmtfUri:"https://mmtf.rcsb.org/v1.0/full/",s=i+e.toUpperCase()):(i=r&&r.pdbUri?r.pdbUri:"https://files.rcsb.org/view/",s=i+e+"."+o)}else if("cid:"==e.substr(0,4)){if(o="sdf",!(e=e.substr(4)).match(/^[0-9]+$/))return void alert("Wrong Compound ID");s="https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+e+"/SDF?record_type=3d"}else"url:"==e.substr(0,4)&&(o=s=e.substr(4));var l=function(e){a.addMolData(e,o,r),t.zoomTo(),t.render()};e=new Promise((function(e,t){"mmtf"==o?$3Dmol.getbin(s).then((function(t){l(t),e(a)})):$.get(s,(function(t){l(t),e(a)})).fail((function(e){console.log("fetch of "+s+" failed: "+e.statusText)}))}))}return n?(e.then((function(e){n(e)})),a):e},$3Dmol.SurfaceType={VDW:1,MS:2,SAS:3,SES:4},$3Dmol.mergeGeos=function(e,t){void 0!==(t=t.geometry)&&e.geometryGroups.push(t.geometryGroups[0])},$3Dmol.multiLineString=function(e){return e.toString().replace(/^[^\/]+\/\*!?/,"").replace(/\*\/[^\/]+$/,"")},$3Dmol.syncSurface=!1,(0<=window.navigator.userAgent.indexOf("MSIE ")||0<=window.navigator.userAgent.indexOf("Trident/"))&&($3Dmol.syncSurface=!0),$3Dmol.specStringToObject=function(e){if("object"==typeof e||void 0===e||null==e)return e;var t=function(e){return $.isNumeric(e)?Math.floor(parseFloat(e))==parseInt(e)||0<=e.indexOf(".")?parseFloat(e):parseInt(e):"true"===e||"false"!==e&&e},r={};if("all"===(e=e.replace(/%7E/,"~")))return r;e=e.split(";");for(var n=0;n<e.length;n++){var o=e[n].split(":"),i=o[0],a={};if(o=o[1])if(-1!==(o=o.replace(/~/g,"=")).indexOf("=")){o=o.split(",");for(var s=0;s<o.length;s++){var l=o[s].split("=",2);a[l[0]]=t(l[1])}}else a=-1!==o.indexOf(",")?o.split(","):t(o);r[i]=a}return r},$3Dmol.getExtent=function(e,t){var r,n,o,i,a,s,l,c=!t;t=r=n=9999;var u=o=i=-9999,h=a=s=l=0;if(0===e.length)return[[0,0,0],[0,0,0],[0,0,0]];for(var f=0;f<e.length;f++){var d=e[f];if(void 0!==d&&isFinite(d.x)&&isFinite(d.y)&&isFinite(d.z)&&(l++,h+=d.x,a+=d.y,s+=d.z,t=t<d.x?t:d.x,r=r<d.y?r:d.y,n=n<d.z?n:d.z,u=u>d.x?u:d.x,o=o>d.y?o:d.y,i=i>d.z?i:d.z,d.symmetries&&c))for(var p=0;p<d.symmetries.length;p++)l++,h+=d.symmetries[p].x,a+=d.symmetries[p].y,s+=d.symmetries[p].z,t=t<d.symmetries[p].x?t:d.symmetries[p].x,r=r<d.symmetries[p].y?r:d.symmetries[p].y,n=n<d.symmetries[p].z?n:d.symmetries[p].z,u=u>d.symmetries[p].x?u:d.symmetries[p].x,o=o>d.symmetries[p].y?o:d.symmetries[p].y,i=i>d.symmetries[p].z?i:d.symmetries[p].z}return[[t,r,n],[u,o,i],[h/l,a/l,s/l]]},$3Dmol.getAtomProperty=function(e,t){var r=null;return e.properties&&void 0!==e.properties[t]?r=e.properties[t]:void 0!==e[t]&&(r=e[t]),r},$3Dmol.getPropertyRange=function(e,t){for(var r=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,o=0,i=e.length;o<i;o++){var a=$3Dmol.getAtomProperty(e[o],t);null!=a&&(a<r&&(r=a),a>n&&(n=a))}return isFinite(r)||isFinite(n)?isFinite(r)?isFinite(n)||(n=r):r=n:r=n=0,[r,n]},__WEBPACK_AMD_DEFINE_FACTORY__=$3Dmol,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__,void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__),$3Dmol.createStereoViewer=function(e){var t=this;if("string"===$.type(e)&&(e=$("#"+e)),e){e=$3Dmol.createViewerGrid(e,{rows:1,cols:2,control_all:!0}),this.glviewer1=e[0][0],this.glviewer2=e[0][1],this.glviewer1.setAutoEyeSeparation(!1),this.glviewer2.setAutoEyeSeparation(!0),this.glviewer1.linkViewer(this.glviewer2),this.glviewer2.linkViewer(this.glviewer1),e=Object.getOwnPropertyNames(this.glviewer1).filter((function(e){return"function"==typeof t.glviewer1[e]}));for(var r=0;r<e.length;r++)this[e[r]]=function(e){return function(){var t=this.glviewer1[e].apply(this.glviewer1,arguments),r=this.glviewer2[e].apply(this.glviewer2,arguments);return[t,r]}}(e[r]);this.setCoordinates=function(e,t,r){for(var n=0;n<e.length;n++)e[n].setCoordinates(t,r)},this.surfacesFinished=function(){return this.glviewer1.surfacesFinished()&&this.glviewer2.surfacesFinished()},this.isAnimated=function(){return this.glviewer1.isAnimated()||this.glviewer2.isAnimated()},this.render=function(e){this.glviewer1.render(),this.glviewer2.render(),e&&e(this)},this.getCanvas=function(){return this.glviewer1.getCanvas()}}};var $3Dmol=$3Dmol||{},b,c;$3Dmol.Math={clamp:function(e,t,r){return Math.min(Math.max(e,t),r)},degToRad:(b=Math.PI/180,function(e){return e*b})},$3Dmol.Quaternion=function(e,t,r,n){this.x=e||0,this.y=t||0,this.z=r||0,this.w=void 0!==n?n:1},$3Dmol.Quaternion.prototype={constructor:$3Dmol.Quaternion,set:function(e,t,r,n){return this.x=e,this.y=t,this.z=r,this.w=n,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this},conjugate:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this},inverse:function(){return this.conjugate().normalize()},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},normalize:function(){var e=this.length();return 0===e?(this.z=this.y=this.x=0,this.w=1):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this},multiply:function(e){return this.multiplyQuaternions(this,e)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},multiplyQuaternions:function(e,t){var r=e.x,n=e.y,o=e.z;e=e.w;var i=t.x,a=t.y,s=t.z;return t=t.w,this.x=r*t+e*i+n*s-o*a,this.y=n*t+e*a+o*i-r*s,this.z=o*t+e*s+r*a-n*i,this.w=e*t-r*i-n*a-o*s,this},sub:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this},clone:function(){return new $3Dmol.Quaternion(this.x,this.y,this.z,this.w)},setFromEuler:function(e){var t=Math.cos(e.x/2),r=Math.cos(e.y/2),n=Math.cos(e.z/2),o=Math.sin(e.x/2),i=Math.sin(e.y/2);return e=Math.sin(e.z/2),this.x=o*r*n+t*i*e,this.y=t*i*n-o*r*e,this.z=t*r*e+o*i*n,this.w=t*r*n-o*i*e,this}},$3Dmol.Vector2=function(e,t){this.x=e||0,this.y=t||0},$3Dmol.Vector2.prototype={constructor:$3Dmol.Vector2,set:function(e,t){return this.x=e,this.y=t,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},copy:function(e){return this.x=e.x,this.y=e.y,this},clone:function(){return new $3Dmol.Vector2(this.x,this.y)}},$3Dmol.Vector3=function(e,t,r){this.x=e||0,this.y=t||0,this.z=r||0},$3Dmol.Vector3.prototype={constructor:$3Dmol.Vector3,set:function(e,t,r){return this.x=e,this.y=t,this.z=r,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},sub:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},divideScalar:function(e){return 0!==e?(this.x/=e,this.y/=e,this.z/=e):this.z=this.y=this.x=0,this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y;return t*t+r*r+(e=this.z-e.z)*e},applyMatrix4:function(e){var t=this.x,r=this.y,n=this.z;return e=e.elements,this.x=e[0]*t+e[4]*r+e[8]*n+e[12],this.y=e[1]*t+e[5]*r+e[9]*n+e[13],this.z=e[2]*t+e[6]*r+e[10]*n+e[14],this},applyProjection:function(e){var t=this.x,r=this.y,n=this.z,o=(e=e.elements)[3]*t+e[7]*r+e[11]*n+e[15];return this.x=(e[0]*t+e[4]*r+e[8]*n+e[12])/o,this.y=(e[1]*t+e[5]*r+e[9]*n+e[13])/o,this.z=(e[2]*t+e[6]*r+e[10]*n+e[14])/o,this},applyQuaternion:function(e){var t=this.x,r=this.y,n=this.z,o=e.x,i=e.y,a=e.z,s=2*(r*a-n*i),l=2*(n*o-t*a),c=2*(t*i-r*o);return this.x=t+e.w*s+(l*a-c*i),this.y=r+e.w*l+(c*o-s*a),this.z=n+e.w*c+(s*i-l*o),this},negate:function(){return this.multiplyScalar(-1)},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},normalize:function(){return this.divideScalar(this.length())},cross:function(e){var t=this.x,r=this.y,n=this.z;return this.x=r*e.z-n*e.y,this.y=n*e.x-t*e.z,this.z=t*e.y-r*e.x,this},crossVectors:function(e,t){return this.x=e.y*t.z-e.z*t.y,this.y=e.z*t.x-e.x*t.z,this.z=e.x*t.y-e.y*t.x,this},getPositionFromMatrix:function(e){return this.x=e.elements[12],this.y=e.elements[13],this.z=e.elements[14],this},setEulerFromRotationMatrix:function(e,t){var r=e.elements;e=r[0];var n=r[4],o=r[8],i=r[5],a=r[9],s=r[6];return r=r[10],void 0===t||"XYZ"===t?(this.y=Math.asin($3Dmol.Math.clamp(o,-1,1)),.99999>Math.abs(o)?(this.x=Math.atan2(-a,r),this.z=Math.atan2(-n,e)):(this.x=Math.atan2(s,i),this.z=0)):console.error("Error with vector's setEulerFromRotationMatrix: Unknown order: "+t),this},rotateAboutVector:function(e,t){e.normalize();var r=Math.cos(t),n=Math.sin(t);return t=this.clone().multiplyScalar(r),n=e.clone().cross(this).multiplyScalar(n),e=e.clone().multiplyScalar(e.clone().dot(this)).multiplyScalar(1-r),e=t.add(n).add(e),this.x=e.x,this.y=e.y,this.z=e.z,this},setFromMatrixPosition:function(e){return e=e.elements,this.x=e[12],this.y=e[13],this.z=e[14],this},transformDirection:function(e){var t=this.x,r=this.y,n=this.z;return e=e.elements,this.x=e[0]*t+e[4]*r+e[8]*n,this.y=e[1]*t+e[5]*r+e[9]*n,this.z=e[2]*t+e[6]*r+e[10]*n,this.normalize()},clone:function(){return new $3Dmol.Vector3(this.x,this.y,this.z)}},$3Dmol.Matrix3=function(e,t,r,n,o,i,a,s,l){this.elements=new Float32Array(9),this.set(void 0!==e?e:1,t||0,r||0,n||0,void 0!==o?o:1,i||0,a||0,s||0,void 0!==l?l:1)},$3Dmol.Matrix3.prototype={constructor:$3Dmol.Matrix3,set:function(e,t,r,n,o,i,a,s,l){var c=this.elements;return c[0]=e,c[3]=t,c[6]=r,c[1]=n,c[4]=o,c[7]=i,c[2]=a,c[5]=s,c[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},copy:function(e){e=e.elements,this.set(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8])},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},getInverse:function(e,t){e=e.elements;var r=this.elements;if(r[0]=e[10]*e[5]-e[6]*e[9],r[1]=-e[10]*e[1]+e[2]*e[9],r[2]=e[6]*e[1]-e[2]*e[5],r[3]=-e[10]*e[4]+e[6]*e[8],r[4]=e[10]*e[0]-e[2]*e[8],r[5]=-e[6]*e[0]+e[2]*e[4],r[6]=e[9]*e[4]-e[5]*e[8],r[7]=-e[9]*e[0]+e[1]*e[8],r[8]=e[5]*e[0]-e[1]*e[4],0===(e=e[0]*r[0]+e[1]*r[3]+e[2]*r[6])){if(t)throw Error("Matrix3.getInverse(): can't invert matrix, determinant is 0");return console.warn("Matrix3.getInverse(): can't invert matrix, determinant is 0"),this.identity(),this}return this.multiplyScalar(1/e),this},getDeterminant:function(){var e=this.elements;return e[0]*e[4]*e[8]+e[1]*e[5]*e[6]+e[2]*e[3]*e[7]-e[2]*e[4]*e[6]-e[1]*e[3]*e[8]-e[0]*e[5]*e[7]},transpose:function(){var e=this.elements,t=e[1];return e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},clone:function(){var e=this.elements;return new $3Dmol.Matrix3(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8])}},$3Dmol.Matrix4=function(e,t,r,n,o,i,a,s,l,c,u,h,f,d,p,m){if(void 0===t&&void 0!==e)this.elements=new Float32Array(e);else{var v=this.elements=new Float32Array(16);v[0]=void 0!==e?e:1,v[4]=t||0,v[8]=r||0,v[12]=n||0,v[1]=o||0,v[5]=void 0!==i?i:1,v[9]=a||0,v[13]=s||0,v[2]=l||0,v[6]=c||0,v[10]=void 0!==u?u:1,v[14]=h||0,v[3]=f||0,v[7]=d||0,v[11]=p||0,v[15]=void 0!==m?m:1}},$3Dmol.Matrix4.prototype={constructor:$3Dmol.Matrix4,set:function(e,t,r,n,o,i,a,s,l,c,u,h,f,d,p,m){var v=this.elements;return v[0]=e,v[4]=t,v[8]=r,v[12]=n,v[1]=o,v[5]=i,v[9]=a,v[13]=s,v[2]=l,v[6]=c,v[10]=u,v[14]=h,v[3]=f,v[7]=d,v[11]=p,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},copy:function(e){return e=e.elements,this.set(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15]),this},matrix3FromTopLeft:function(){var e=this.elements;return new $3Dmol.Matrix3(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10])},setRotationFromEuler:function(e,t){var r=this.elements,n=e.x,o=e.y,i=e.z;e=Math.cos(n),n=Math.sin(n);var a=Math.cos(o);o=Math.sin(o);var s=Math.cos(i);if(i=Math.sin(i),void 0===t||"XYZ"===t){t=e*s;var l=e*i,c=n*s,u=n*i;r[0]=a*s,r[4]=-a*i,r[8]=o,r[1]=l+c*o,r[5]=t-u*o,r[9]=-n*a,r[2]=u-t*o,r[6]=c+l*o,r[10]=e*a}else console.error("Error with matrix4 setRotationFromEuler. Order: "+t);return this},setRotationFromQuaternion:function(e){var t=this.elements,r=e.x,n=e.y,o=e.z,i=e.w,a=r+r,s=n+n,l=o+o;e=r*a;var c=r*s;r*=l;var u=n*s;return n*=l,o*=l,a*=i,s*=i,i*=l,t[0]=1-(u+o),t[4]=c-i,t[8]=r+s,t[1]=c+i,t[5]=1-(e+o),t[9]=n-a,t[2]=r-s,t[6]=n+a,t[10]=1-(e+u),this},lookAt:function(){var e=new $3Dmol.Vector3,t=new $3Dmol.Vector3,r=new $3Dmol.Vector3;return function(n,o,i){var a=this.elements;return r.subVectors(n,o).normalize(),0===r.length()&&(r.z=1),e.crossVectors(i,r).normalize(),0===e.length()&&(r.x+=1e-4,e.crossVectors(i,r).normalize()),t.crossVectors(r,e),a[0]=e.x,a[4]=t.x,a[8]=r.x,a[1]=e.y,a[5]=t.y,a[9]=r.y,a[2]=e.z,a[6]=t.z,a[10]=r.z,this}}(),multiplyMatrices:function(e,t){var r=e.elements,n=t.elements;t=this.elements,e=r[0];var o=r[4],i=r[8],a=r[12],s=r[1],l=r[5],c=r[9],u=r[13],h=r[2],f=r[6],d=r[10],p=r[14],m=r[3],v=r[7],g=r[11];r=r[15];var y=n[0],b=n[4],x=n[8],w=n[12],D=n[1],C=n[5],$=n[9],S=n[13],A=n[2],_=n[6],M=n[10],z=n[14],T=n[3],L=n[7],E=n[11];return n=n[15],t[0]=e*y+o*D+i*A+a*T,t[4]=e*b+o*C+i*_+a*L,t[8]=e*x+o*$+i*M+a*E,t[12]=e*w+o*S+i*z+a*n,t[1]=s*y+l*D+c*A+u*T,t[5]=s*b+l*C+c*_+u*L,t[9]=s*x+l*$+c*M+u*E,t[13]=s*w+l*S+c*z+u*n,t[2]=h*y+f*D+d*A+p*T,t[6]=h*b+f*C+d*_+p*L,t[10]=h*x+f*$+d*M+p*E,t[14]=h*w+f*S+d*z+p*n,t[3]=m*y+v*D+g*A+r*T,t[7]=m*b+v*C+g*_+r*L,t[11]=m*x+v*$+g*M+r*E,t[15]=m*w+v*S+g*z+r*n,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},makeTranslation:function(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this},transpose:function(){var e=this.elements,t=e[1];return e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},getPosition:function(){var e=new $3Dmol.Vector3;return function(){console.warn("DEPRECATED: Matrix4's .getPosition() has been removed. Use Vector3.getPositionFromMatrix( matrix ) instead.");var t=this.elements;return e.set(t[12],t[13],t[14])}}(),setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var r=this.elements,n=(e=e.elements)[0],o=e[4],i=e[8],a=e[12],s=e[1],l=e[5],c=e[9],u=e[13],h=e[2],f=e[6],d=e[10],p=e[14],m=e[3],v=e[7],g=e[11],y=e[15];if(r[0]=c*p*v-u*d*v+u*f*g-l*p*g-c*f*y+l*d*y,r[4]=a*d*v-i*p*v-a*f*g+o*p*g+i*f*y-o*d*y,r[8]=i*u*v-a*c*v+a*l*g-o*u*g-i*l*y+o*c*y,r[12]=a*c*f-i*u*f-a*l*d+o*u*d+i*l*p-o*c*p,r[1]=u*d*m-c*p*m-u*h*g+s*p*g+c*h*y-s*d*y,r[5]=i*p*m-a*d*m+a*h*g-n*p*g-i*h*y+n*d*y,r[9]=a*c*m-i*u*m-a*s*g+n*u*g+i*s*y-n*c*y,r[13]=i*u*h-a*c*h+a*s*d-n*u*d-i*s*p+n*c*p,r[2]=l*p*m-u*f*m+u*h*v-s*p*v-l*h*y+s*f*y,r[6]=a*f*m-o*p*m-a*h*v+n*p*v+o*h*y-n*f*y,r[10]=o*u*m-a*l*m+a*s*v-n*u*v-o*s*y+n*l*y,r[14]=a*l*h-o*u*h-a*s*f+n*u*f+o*s*p-n*l*p,r[3]=c*f*m-l*d*m-c*h*v+s*d*v+l*h*g-s*f*g,r[7]=o*d*m-i*f*m+i*h*v-n*d*v-o*h*g+n*f*g,r[11]=i*l*m-o*c*m-i*s*v+n*c*v+o*s*g-n*l*g,r[15]=o*c*h-i*l*h+i*s*f-n*c*f-o*s*d+n*l*d,0===(r=e[0]*r[0]+e[1]*r[4]+e[2]*r[8]+e[3]*r[12])){if(t)throw Error("Matrix4.getInverse(): can't invert matrix, determinant is 0");return console.warn("Matrix4.getInverse(): can't invert matrix, determinant is 0"),this.identity(),this}return this.multiplyScalar(1/r),this},isReflected:function(){return 0>this.matrix3FromTopLeft().getDeterminant()},compose:function(){var e=new $3Dmol.Matrix4,t=new $3Dmol.Matrix4;return function(r,n,o){var i=this.elements;return e.identity(),e.setRotationFromQuaternion(n),t.makeScale(o.x,o.y,o.z),this.multiplyMatrices(e,t),i[12]=r.x,i[13]=r.y,i[14]=r.z,this}}(),decompose:function(){var e=new $3Dmol.Vector3,t=new $3Dmol.Vector3,r=new $3Dmol.Vector3,n=new $3Dmol.Matrix4;return function(o,i,a){var s=this.elements;return e.set(s[0],s[1],s[2]),t.set(s[4],s[5],s[6]),r.set(s[8],s[9],s[10]),o=o instanceof $3Dmol.Vector3?o:new $3Dmol.Vector3,i=i instanceof $3Dmol.Quaternion?i:new $3Dmol.Quaternion,(a=a instanceof $3Dmol.Vector3?a:new $3Dmol.Vector3).x=e.length(),a.y=t.length(),a.z=r.length(),o.x=s[12],o.y=s[13],o.z=s[14],n.copy(this),n.elements[0]/=a.x,n.elements[1]/=a.x,n.elements[2]/=a.x,n.elements[4]/=a.y,n.elements[5]/=a.y,n.elements[6]/=a.y,n.elements[8]/=a.z,n.elements[9]/=a.z,n.elements[10]/=a.z,i.setFromRotationMatrix(n),[o,i,a]}}(),scale:function(e){var t=this.elements,r=e.x,n=e.y;return e=e.z,t[0]*=r,t[4]*=n,t[8]*=e,t[1]*=r,t[5]*=n,t[9]*=e,t[2]*=r,t[6]*=n,t[10]*=e,t[3]*=r,t[7]*=n,t[11]*=e,this},getMaxScaleOnAxis:function(){var e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],Math.max(e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10])))},makeFrustum:function(e,t,r,n,o,i){var a=this.elements;return a[0]=2*o/(t-e),a[4]=0,a[8]=(t+e)/(t-e),a[12]=0,a[1]=0,a[5]=2*o/(n-r),a[9]=(n+r)/(n-r),a[13]=0,a[2]=0,a[6]=0,a[10]=-(i+o)/(i-o),a[14]=-2*i*o/(i-o),a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makePerspective:function(e,t,r,n){var o=-(e=r*Math.tan($3Dmol.Math.degToRad(.5*e)));return this.makeFrustum(o*t,e*t,o,e,r,n)},makeOrthographic:function(e,t,r,n,o,i){var a=this.elements,s=1/(t-e),l=1/(r-n),c=1/(i-o);return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-(t+e)*s,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-(r+n)*l,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-(i+o)*c,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},isEqual:function(e){e=e.elements;var t=this.elements;return t[0]==e[0]&&t[4]==e[4]&&t[8]==e[8]&&t[12]==e[12]&&t[1]==e[1]&&t[5]==e[5]&&t[9]==e[9]&&t[13]==e[13]&&t[2]==e[2]&&t[6]==e[6]&&t[10]==e[10]&&t[14]==e[14]&&t[3]==e[3]&&t[7]==e[7]&&t[11]==e[11]&&t[15]==e[15]},clone:function(){var e=this.elements;return new $3Dmol.Matrix4(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15])},isIdentity:function(){var e=this.elements;return 1==e[0]&&0==e[4]&&0==e[8]&&0==e[12]&&0==e[1]&&1==e[5]&&0==e[9]&&0==e[13]&&0==e[2]&&0==e[6]&&1==e[10]&&0==e[14]&&0==e[3]&&0==e[7]&&0==e[11]&&1==e[15]}},$3Dmol.Vector3.prototype.unproject=function(){var e=new $3Dmol.Matrix4;return function(t){return e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyMatrix4(e)}}(),$3Dmol.Ray=function(e,t){this.origin=void 0!==e?e:new $3Dmol.Vector3,this.direction=void 0!==t?t:new $3Dmol.Vector3},$3Dmol.Ray.prototype={constructor:$3Dmol.Ray,set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return(t||new $3Dmol.Vector3).copy(this.direction).multiplyScalar(e).add(this.origin)},recast:function(){var e=new $3Dmol.Vector3;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){return(t=t||new $3Dmol.Vector3).subVectors(e,this.origin),e=t.dot(this.direction),t.copy(this.direction).multiplyScalar(e).add(this.origin)},distanceToPoint:(c=new $3Dmol.Vector3,function(e){var t=c.subVectors(e,this.origin).dot(this.direction);return c.copy(this.direction).multiplyScalar(t).add(this.origin),c.distanceTo(e)}),isIntersectionCylinder:function(){},isIntersectionSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},isIntersectionPlane:function(e){return 0!==e.normal.dot(this.direction)||0===e.distanceToPoint(this.origin)},distanceToPlane:function(e){var t=e.normal.dot(this.direction);return 0!==t?-(this.origin.dot(e.normal)+e.constant)/t:0===e.distanceToPoint(this.origin)?0:void 0},intersectPlane:function(e,t){if(void 0!==(e=this.distanceToPlane(e)))return this.at(e,t)},applyMatrix4:function(e){return this.direction.add(this.origin).applyMatrix4(e),this.origin.applyMatrix4(e),this.direction.sub(this.origin),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)},clone:function(){return(new $3Dmol.Ray).copy(this)}},$3Dmol.Sphere=function(e,t){this.center=void 0!==e?e:new $3Dmol.Vector3,this.radius=void 0!==t?t:0},$3Dmol.Sphere.prototype={constructor:$3Dmol.Sphere,set:function(e,t){return this.center.copy(e),this.radius=t,this},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius*=e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius},clone:function(){return(new $3Dmol.Sphere).copy(this)}},$3Dmol.Cylinder=function(e,t,r){this.c1=void 0!==e?e:new $3Dmol.Vector3,this.c2=void 0!==t?t:new $3Dmol.Vector3,this.direction=(new $3Dmol.Vector3).subVectors(this.c2,this.c1).normalize(),this.radius=void 0!==r?r:0},$3Dmol.Cylinder.prototype={constructor:$3Dmol.Cylinder,copy:function(e){return this.c1.copy(e.c1),this.c2.copy(e.c2),this.direction.copy(e.direction),this.radius=e.radius,this},lengthSq:function(){var e=new $3Dmol.Vector3;return function(){return e.subVectors(this.c2,this.c1).lengthSq()}}(),applyMatrix4:function(e){return this.direction.add(this.c1).applyMatrix4(e),this.c1.applyMatrix4(e),this.c2.applyMatrix4(e),this.direction.sub(this.c1).normalize(),this.radius*=e.getMaxScaleOnAxis(),this}},$3Dmol.Triangle=function(e,t,r){this.a=void 0!==e?e:new $3Dmol.Vector3,this.b=void 0!==t?t:new $3Dmol.Vector3,this.c=void 0!==r?r:new $3Dmol.Vector3},$3Dmol.Triangle.prototype={constructor:$3Dmol.Triangle,copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},applyMatrix4:function(e){return this.a.applyMatrix4(e),this.b.applyMatrix4(e),this.c.applyMatrix4(e),this},getNormal:function(){var e=new $3Dmol.Vector3;return function(){var t=this.a.clone();return t.sub(this.b),e.subVectors(this.c,this.b),t.cross(e),t.normalize(),t}}()},$3Dmol.EventDispatcher=function(){var e={};this.addEventListener=function(t,r){void 0===e[t]&&(e[t]=[]),-1===e[t].indexOf(r)&&e[t].push(r)},this.removeEventListener=function(t,r){-1!==(r=e[t].indexOf(r))&&e[t].splice(r,1)},this.dispatchEvent=function(t){var r=e[t.type];if(void 0!==r){t.target=this;for(var n=0,o=r.length;n<o;n++)r[n].call(this,t)}}},$3Dmol.Color=function(e){return 1<arguments.length?(this.r=arguments[0]||0,this.g=arguments[1]||0,this.b=arguments[2]||0,this):this.set(e)},$3Dmol.Color.prototype={constructor:$3Dmol.Color,r:0,g:0,b:0,set:function(e){if(e instanceof $3Dmol.Color)return e.clone();"number"==typeof e?this.setHex(e):"object"==typeof e&&"r"in e&&"g"in e&&"b"in e&&(this.r=e.r,this.g=e.g,this.b=e.b)},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},getHex:function(){return Math.round(255*this.r)<<16|Math.round(255*this.g)<<8|Math.round(255*this.b)},clone:function(){return new $3Dmol.Color(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},scaled:function(){var e={};return e.r=Math.round(255*this.r),e.g=Math.round(255*this.g),e.b=Math.round(255*this.b),e.a=1,e}},$3Dmol.Object3D=function(){this.id=$3Dmol.Object3DIDCount++,this.name="",this.parent=void 0,this.children=[],this.position=new $3Dmol.Vector3,this.rotation=new $3Dmol.Vector3,this.matrix=new $3Dmol.Matrix4,this.matrixWorld=new $3Dmol.Matrix4,this.quaternion=new $3Dmol.Quaternion,this.eulerOrder="XYZ",this.up=new $3Dmol.Vector3(0,1,0),this.scale=new $3Dmol.Vector3(1,1,1),this.rotationAutoUpdate=this.matrixWorldNeedsUpdate=this.matrixAutoUpdate=!0,this.useQuaternion=!1,this.visible=!0},$3Dmol.Object3D.prototype={constructor:$3Dmol.Object3D,lookAt:function(e){this.matrix.lookAt(e,this.position,this.up),this.rotationAutoUpdate&&(!0===this.useQuaternion?this.quaternion.copy(this.matrix.decompose()[1]):this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder))},add:function(e){if(e===this)console.error("Can't add $3Dmol.Object3D to itself");else{e.parent=this,this.children.push(e);for(var t=this;void 0!==t.parent;)t=t.parent;void 0!==t&&t instanceof $3Dmol.Scene&&t.__addObject(e)}},remove:function(e){var t=this.children.indexOf(e);if(-1!==t){for(e.parent=void 0,this.children.splice(t,1),t=this;void 0!==t.parent;)t=t.parent;void 0!==t&&t instanceof $3Dmol.Scene&&t.__removeObject(e)}},updateMatrix:function(){this.matrix.setPosition(this.position),!1===this.useQuaternion?this.matrix.setRotationFromEuler(this.rotation,this.eulerOrder):this.matrix.setRotationFromQuaternion(this.quaternion),1===this.scale.x&&1===this.scale.y&&1===this.scale.z||this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){for(!0===this.matrixAutoUpdate&&this.updateMatrix(),!0!==this.matrixWorldNeedsUpdate&&!0!==e||(void 0===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=0;e<this.children.length;e++)this.children[e].updateMatrixWorld(!0)},clone:function(e){void 0===e&&(e=new $3Dmol.Object3D),e.name=this.name,e.up.copy(this.up),e.position.copy(this.position),e.rotation.copy(this.rotation),e.eulerOrder=this.eulerOrder,e.scale.copy(this.scale),e.rotationAutoUpdate=this.rotationAutoUpdate,e.matrix.copy(this.matrix),e.matrixWorld.copy(this.matrixWorld),e.quaternion.copy(this.quaternion),e.matrixAutoUpdate=this.matrixAutoUpdate,e.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,e.useQuaternion=this.useQuaternion,e.visible=this.visible;for(var t=0;t<this.children.length;t++)e.add(this.children[t].clone());return e},setVisible:function(e){this.visible=e;for(var t=0;t<this.children.length;t++)this.children[t].setVisible(e)}},$3Dmol.Object3DIDCount=0,$3Dmol.Geometry=function(){var e=function(e){this.id=e||0,this.lineArray=this.radiusArray=this.faceArray=this.normalArray=this.colorArray=this.vertexArray=null,this.lineidx=this.faceidx=this.vertices=0};e.prototype.setColors=function(e){var t=this.vertexArray,r=this.colorArray;if(t.length!=r.length)console.log("Cannot re-color geometry group due to mismatched lengths.");else for(var n=0;n<t.length;n+=3){var o=e(t[n],t[n+1],t[n+2]);o instanceof $3Dmol.Color||(o=$3Dmol.CC.color(o)),r[n]=o.r,r[n+1]=o.g,r[n+2]=o.b}},e.prototype.getNumVertices=function(){return this.vertices},e.prototype.getVertices=function(){return this.vertexArray},e.prototype.getCentroid=function(){for(var e,t,r,n=new $3Dmol.Vector3,o=0;o<this.vertices;++o)e=3*o,t=this.vertexArray[e],r=this.vertexArray[e+1],e=this.vertexArray[e+2],n.x+=t,n.y+=r,n.z+=e;return n.divideScalar(this.vertices),n},e.prototype.setNormals=function(){var e=this.faceArray,t=this.vertexArray,r=this.normalArray;if(this.vertices&&this.faceidx)for(var n,o,i,a,s,l,c=0;c<e.length/3;++c)n=3*e[3*c],o=3*e[3*c+1],i=3*e[3*c+2],a=new $3Dmol.Vector3(t[n],t[n+1],t[n+2]),s=new $3Dmol.Vector3(t[o],t[o+1],t[o+2]),l=new $3Dmol.Vector3(t[i],t[i+1],t[i+2]),a.subVectors(a,s),l.subVectors(l,s),l.cross(a),(a=l).normalize(),r[n]+=a.x,r[o]+=a.x,r[i]+=a.x,r[n+1]+=a.y,r[o+1]+=a.y,r[i+1]+=a.y,r[n+2]+=a.z,r[o+2]+=a.z,r[i+2]+=a.z},e.prototype.setLineIndices=function(){if(this.faceidx&&(!this.lineArray||this.lineArray.length!=2*this.faceidx||this.lineidx!=2*this.faceidx)){var e=this.faceArray,t=this.lineArray=new Uint16Array(2*this.faceidx);this.lineidx=2*this.faceidx;for(var r=0;r<this.faceidx/3;++r){var n=3*r,o=2*n,i=e[n],a=e[n+1];n=e[n+2],t[o]=i,t[o+1]=a,t[o+2]=i,t[o+3]=n,t[o+4]=a,t[o+5]=n}}},e.prototype.truncateArrayBuffers=function(e,t){e=!0===e;var r=this.colorArray,n=this.normalArray,o=this.faceArray,i=this.lineArray,a=this.radiusArray;this.vertexArray=this.vertexArray.subarray(0,3*this.vertices),this.colorArray=r.subarray(0,3*this.vertices),e?(this.normalArray=n.subarray(0,3*this.vertices),this.faceArray=o.subarray(0,this.faceidx),this.lineArray=0<this.lineidx?i.subarray(0,this.lineidx):new Uint16Array(0)):(this.normalArray=new Float32Array(0),this.faceArray=new Uint16Array(0),this.lineArray=new Uint16Array(0)),a&&(this.radiusArray=a.subarray(0,this.vertices)),t&&(this.normalArray&&(this.normalArray=new Float32Array(this.normalArray)),this.faceArray&&(this.faceArray=new Uint16Array(this.faceArray)),this.lineArray&&(this.lineArray=new Uint16Array(this.lineArray)),this.vertexArray&&(this.vertexArray=new Float32Array(this.vertexArray)),this.colorArray&&(this.colorArray=new Float32Array(this.colorArray)),this.radiusArray&&(this.radiusArray=new Float32Array(this.radiusArray))),this.__inittedArrays=!0};var t=function(t){var r=new e(t.geometryGroups.length);return t.geometryGroups.push(r),t.groups=t.geometryGroups.length,r.vertexArray=new Float32Array(196605),r.colorArray=new Float32Array(196605),t.mesh&&(r.normalArray=new Float32Array(196605),r.faceArray=new Uint16Array(393210),r.lineArray=new Uint16Array(393210)),t.radii&&(r.radiusArray=new Float32Array(65535)),r.useOffset=t.offset,r},r=function(e,t,r){$3Dmol.EventDispatcher.call(this),this.id=$3Dmol.GeometryIDCount++,this.name="",this.hasTangents=!1,this.dynamic=!0,this.mesh=!0===e,this.radii=t||!1,this.offset=r||!1,this.buffersNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.elementsNeedUpdate=this.verticesNeedUpdate=!1,this.geometryGroups=[],this.groups=0};return r.prototype={constructor:r,updateGeoGroup:function(e){var r=0<this.groups?this.geometryGroups[this.groups-1]:null;return(!r||r.vertices+(e||0)>r.vertexArray.length/3)&&(r=t(this)),r},addGeoGroup:function(){return t(this)},setUpNormals:function(e){e=e||!1;for(var t=0;t<this.groups;t++)this.geometryGroups[t].setNormals(e)},setColors:function(e){for(var t=this.geometryGroups.length,r=0;r<t;r++)this.geometryGroups[r].setColors(e)},setUpWireframe:function(){for(var e=0;e<this.groups;e++)this.geometryGroups[e].setLineIndices()},initTypedArrays:function(){for(var e=0;e<this.groups;e++){var t=this.geometryGroups[e];!0!==t.__inittedArrays&&t.truncateArrayBuffers(this.mesh,!1)}},dispose:function(){this.dispatchEvent({type:"dispose"})}},r}(),Object.defineProperty($3Dmol.Geometry.prototype,"vertices",{get:function(){for(var e=0,t=0;t<this.groups;t++)e+=this.geometryGroups[t].vertices;return e}}),$3Dmol.GeometryIDCount=0,$3Dmol.Raycaster=function(){var e=function(e,t,r,n){this.ray=new $3Dmol.Ray(e,t),0<this.ray.direction.lengthSq()&&this.ray.direction.normalize(),this.near=n||0,this.far=r||1/0},t=new $3Dmol.Sphere,r=new $3Dmol.Cylinder,n=new $3Dmol.Triangle,o=new $3Dmol.Vector3,i=new $3Dmol.Vector3,a=new $3Dmol.Vector3,s=new $3Dmol.Vector3;new $3Dmol.Ray,new $3Dmol.Vector3;var l=new $3Dmol.Vector3;new $3Dmol.Matrix4;var c=function(e,t){return e.distance-t.distance};return e.prototype.precision=1e-4,e.prototype.linePrecision=.2,e.prototype.set=function(e,t){this.ray.set(e,t)},e.prototype.setFromCamera=function(){var e=new $3Dmol.Matrix4;return function(t,r){r.ortho?(this.ray.origin.set(t.x,t.y,(r.near+r.far)/(r.near-r.far)).unproject(r),this.ray.direction.set(0,0,-1).transformDirection(r.matrixWorld)):(this.ray.origin.setFromMatrixPosition(r.matrixWorld),this.ray.direction.set(t.x,t.y,t.z),r.projectionMatrixInverse.getInverse(r.projectionMatrix),e.multiplyMatrices(r.matrixWorld,r.projectionMatrixInverse),this.ray.direction.applyProjection(e),this.ray.direction.sub(this.ray.origin).normalize())}}(),e.prototype.intersectObjects=function(e,u){for(var h=[],f=0,d=u.length;f<d;f++)e:{var p=e,m=u[f],v=h;if(l.getPositionFromMatrix(p.matrixWorld),void 0!==m.intersectionShape){var g=m.intersectionShape,y=this.linePrecision,b=(y*=p.matrixWorld.getMaxScaleOnAxis())*y;if(void 0!==m.boundingSphere&&m.boundingSphere instanceof $3Dmol.Sphere&&(t.copy(m.boundingSphere),t.applyMatrix4(p.matrixWorld),!this.ray.isIntersectionSphere(t)))break e;var x=0;for(y=g.triangle.length;x<y;x++)if(g.triangle[x]instanceof $3Dmol.Triangle){n.copy(g.triangle[x]),n.applyMatrix4(p.matrixWorld);var w=n.getNormal(),D=this.ray.direction.dot(w);if(!(0<=D)){o.subVectors(n.a,this.ray.origin);var C=w.dot(o)/D;if(!(0>C)){i.copy(this.ray.direction).multiplyScalar(C).add(this.ray.origin),i.sub(n.a),a.copy(n.b).sub(n.a),s.copy(n.c).sub(n.a),D=a.dot(s);var $=a.lengthSq();w=s.lengthSq(),0>(w=($*i.dot(s)-D*i.dot(a))/($*w-D*D))||1<w||(0>(D=(i.dot(a)-w*D)/$)||1<D||1<D+w||v.push({clickable:m,distance:C}))}}}for(x=0,y=g.cylinder.length;x<y;x++)if(g.cylinder[x]instanceof $3Dmol.Cylinder){r.copy(g.cylinder[x]),r.applyMatrix4(p.matrixWorld),o.subVectors(r.c1,this.ray.origin);var S=o.dot(r.direction);if($=o.dot(this.ray.direction),0!==(w=1-(D=Math.min(Math.max(this.ray.direction.dot(r.direction),-1),1))*D)){var A=(D*$-S)/w,_=($-D*S)/w;i.copy(r.direction).multiplyScalar(A).add(r.c1),a.copy(this.ray.direction).multiplyScalar(_).add(this.ray.origin);var M=s.subVectors(i,a).lengthSq();M<=(A=r.radius*r.radius)&&(0>(D=D*(w=C=0>=(A=(D*S-$)*(D*S-$)-w*(o.lengthSq()-S*S-A))?Math.sqrt(M):($-D*S-Math.sqrt(A))/w)-S)||D*D>r.lengthSq()||0>w||v.push({clickable:m,distance:C}))}}for(x=0,y=g.line.length;x<y;x+=2)i.copy(g.line[x]),i.applyMatrix4(p.matrixWorld),a.copy(g.line[x+1]),a.applyMatrix4(p.matrixWorld),s.subVectors(a,i),S=s.lengthSq(),s.normalize(),o.subVectors(i,this.ray.origin),M=o.dot(s),$=o.dot(this.ray.direction),0!==(w=1-(D=Math.min(Math.max(this.ray.direction.dot(s),-1),1))*D)&&(A=(D*$-M)/w,_=($-D*M)/w,i.add(s.multiplyScalar(A)),a.copy(this.ray.direction).multiplyScalar(_).add(this.ray.origin),(M=s.subVectors(a,i).lengthSq())<b&&A*A<S&&v.push({clickable:m,distance:_}));for(x=0,y=g.sphere.length;x<y;x++)if(g.sphere[x]instanceof $3Dmol.Sphere&&(t.copy(g.sphere[x]),t.applyMatrix4(p.matrixWorld),this.ray.isIntersectionSphere(t))){if(i.subVectors(t.center,this.ray.origin),A=(p=i.dot(this.ray.direction))*p-(i.lengthSq()-t.radius*t.radius),0>p)break e;C=0>=A?p:p-Math.sqrt(A),v.push({clickable:m,distance:C});break e}}}return h.sort(c),h},e}(),$3Dmol.Projector=function(){new $3Dmol.Matrix4;var e=new $3Dmol.Matrix4;this.projectVector=function(t,r){return r.matrixWorldInverse.getInverse(r.matrixWorld),e.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),t.applyProjection(e)},this.unprojectVector=function(t,r){return r.projectionMatrixInverse.getInverse(r.projectionMatrix),e.multiplyMatrices(r.matrixWorld,r.projectionMatrixInverse),t.applyProjection(e)}},$3Dmol.Camera=function(e,t,r,n,o){$3Dmol.Object3D.call(this),this.fov=void 0!==e?e:50,this.aspect=void 0!==t?t:1,this.near=void 0!==r?r:.1,this.far=void 0!==n?n:2e3,this.projectionMatrix=new $3Dmol.Matrix4,this.projectionMatrixInverse=new $3Dmol.Matrix4,this.matrixWorldInverse=new $3Dmol.Matrix4,this.right=this.position.z*Math.tan(Math.PI/180*e),this.left=-this.right,this.top=this.right/this.aspect,this.bottom=-this.top,this.ortho=!!o,this.updateProjectionMatrix()},$3Dmol.Camera.prototype=Object.create($3Dmol.Object3D.prototype),$3Dmol.Camera.prototype.lookAt=function(e){this.matrix.lookAt(this.position,e,this.up),this.rotationAutoUpdate&&(!1===this.useQuaternion?this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder):this.quaternion.copy(this.matrix.decompose()[1]))},$3Dmol.Camera.prototype.updateProjectionMatrix=function(){this.ortho?this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far):this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},$3Dmol.SpritePlugin=function(){function e(e,t){return e.z!==t.z?t.z-e.z:t.id-e.id}var t,r,n,o,i,a,s,l,c,u;this.init=function(e){t=e.context,r=e,n=e.getPrecision(),o=new Float32Array(16),i=new Uint16Array(6),e=0,o[e++]=-1,o[e++]=-1,o[e++]=0,o[e++]=0,o[e++]=1,o[e++]=-1,o[e++]=1,o[e++]=0,o[e++]=1,o[e++]=1,o[e++]=1,o[e++]=1,o[e++]=-1,o[e++]=1,o[e++]=0,o[e++]=1,e=0,i[e++]=0,i[e++]=1,i[e++]=2,i[e++]=0,i[e++]=2,i[e++]=3,a=t.createBuffer(),s=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,o,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,s),t.bufferData(t.ELEMENT_ARRAY_BUFFER,i,t.STATIC_DRAW),e=$3Dmol.ShaderLib.sprite;var h=n,f=t.createProgram(),d=t.createShader(t.FRAGMENT_SHADER),p=t.createShader(t.VERTEX_SHADER);h="precision "+h+" float;\n",t.shaderSource(d,h+e.fragmentShader),t.shaderSource(p,h+e.vertexShader),t.compileShader(d),t.compileShader(p),t.getShaderParameter(d,t.COMPILE_STATUS)&&t.getShaderParameter(p,t.COMPILE_STATUS)?(t.attachShader(f,d),t.attachShader(f,p),t.linkProgram(f),t.getProgramParameter(f,t.LINK_STATUS)||console.error("Could not initialize shader"),e=f):(console.error(t.getShaderInfoLog(d)),console.error("could not initialize shader"),e=null),l=e,u={},(c={}).position=t.getAttribLocation(l,"position"),c.uv=t.getAttribLocation(l,"uv"),u.uvOffset=t.getUniformLocation(l,"uvOffset"),u.uvScale=t.getUniformLocation(l,"uvScale"),u.rotation=t.getUniformLocation(l,"rotation"),u.scale=t.getUniformLocation(l,"scale"),u.alignment=t.getUniformLocation(l,"alignment"),u.color=t.getUniformLocation(l,"color"),u.map=t.getUniformLocation(l,"map"),u.opacity=t.getUniformLocation(l,"opacity"),u.useScreenCoordinates=t.getUniformLocation(l,"useScreenCoordinates"),u.screenPosition=t.getUniformLocation(l,"screenPosition"),u.modelViewMatrix=t.getUniformLocation(l,"modelViewMatrix"),u.projectionMatrix=t.getUniformLocation(l,"projectionMatrix"),u.fogType=t.getUniformLocation(l,"fogType"),u.fogDensity=t.getUniformLocation(l,"fogDensity"),u.fogNear=t.getUniformLocation(l,"fogNear"),u.fogFar=t.getUniformLocation(l,"fogFar"),u.fogColor=t.getUniformLocation(l,"fogColor"),u.alphaTest=t.getUniformLocation(l,"alphaTest")},this.render=function(n,o,i,h){var f=n.__webglSprites,d=f.length;if(d){var p=c,m=u,v=.5*i,g=.5*h;if(t.useProgram(l),t.enableVertexAttribArray(p.position),t.enableVertexAttribArray(p.uv),t.disable(t.CULL_FACE),t.enable(t.BLEND),t.bindBuffer(t.ARRAY_BUFFER,a),t.vertexAttribPointer(p.position,2,t.FLOAT,!1,16,0),t.vertexAttribPointer(p.uv,2,t.FLOAT,!1,16,8),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,s),t.uniformMatrix4fv(m.projectionMatrix,!1,o.projectionMatrix.elements),t.activeTexture(t.TEXTURE0),t.uniform1i(m.map,0),p=n.fog){t.uniform3f(m.fogColor,p.color.r,p.color.g,p.color.b),t.uniform1f(m.fogNear,p.near),t.uniform1f(m.fogFar,p.far),t.uniform1i(m.fogType,1);var y=p=1}else t.uniform1i(m.fogType,0),y=p=0;var b,x=[];for(b=0;b<d;b++){var w=f[b],D=w.material;w.visible&&0!==D.opacity&&(D.useScreenCoordinates?w.z=-w.position.z:(w._modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,w.matrixWorld),w.z=-w._modelViewMatrix.elements[14]))}for(f.sort(e),b=0;b<d;b++)D=(w=f[b]).material,w.visible&&0!==D.opacity&&D.map&&D.map.image&&D.map.image.width&&(t.uniform1f(m.alphaTest,D.alphaTest),o=D.map.image.height,x[0]=D.map.image.width*r.devicePixelRatio/i,x[1]=o*r.devicePixelRatio/h,!0===D.useScreenCoordinates?(t.uniform1i(m.useScreenCoordinates,1),t.uniform3f(m.screenPosition,(w.position.x*r.devicePixelRatio-v)/v,(g-w.position.y*r.devicePixelRatio)/g,Math.max(0,Math.min(1,w.position.z)))):(t.uniform1i(m.useScreenCoordinates,0),t.uniformMatrix4fv(m.modelViewMatrix,!1,w._modelViewMatrix.elements)),p!==(o=n.fog&&D.fog?y:0)&&(t.uniform1i(m.fogType,o),p=o),o=1/(D.scaleByViewport?h:1),x[0]=x[0]*o*w.scale.x,x[1]=x[1]*o*w.scale.y,t.uniform2f(m.uvScale,D.uvScale.x,D.uvScale.y),t.uniform2f(m.uvOffset,D.uvOffset.x,D.uvOffset.y),t.uniform2f(m.alignment,D.alignment.x,D.alignment.y),t.uniform1f(m.opacity,D.opacity),t.uniform3f(m.color,D.color.r,D.color.g,D.color.b),t.uniform1f(m.rotation,w.rotation),t.uniform2fv(m.scale,x),r.setDepthTest(D.depthTest),r.setDepthWrite(D.depthWrite),r.setTexture(D.map,0),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0));t.enable(t.CULL_FACE)}}},$3Dmol.Light=function(e,t){$3Dmol.Object3D.call(this),this.color=new $3Dmol.Color(e),this.position=new $3Dmol.Vector3(0,1,0),this.target=new $3Dmol.Object3D,this.intensity=void 0!==t?t:1,this.onlyShadow=this.castShadow=!1},$3Dmol.Light.prototype=Object.create($3Dmol.Object3D.prototype),$3Dmol.Material=function(){$3Dmol.EventDispatcher.call(this),this.id=$3Dmol.MaterialIdCount++,this.name="",this.side=$3Dmol.FrontSide,this.opacity=1,this.transparent=!1,this.stencilTest=this.depthWrite=this.depthTest=!0,this.polygonOffset=!1,this.alphaTest=this.polygonOffsetUnits=this.polygonOffsetFactor=0,this.needsUpdate=this.visible=!0},$3Dmol.Material.prototype.setValues=function(e){if(void 0!==e)for(var t in e){var r=e[t];if(void 0===r)console.warn("$3Dmol.Material: '"+t+"' parameter is undefined.");else if(t in this){var n=this[t];n instanceof $3Dmol.Color&&r instanceof $3Dmol.Color?n.copy(r):n instanceof $3Dmol.Color?n.set(r):n instanceof $3Dmol.Vector3&&r instanceof $3Dmol.Vector3?n.copy(r):this[t]=r}}},$3Dmol.Material.prototype.clone=function(e){return void 0===e&&(e=new $3Dmol.Material),e.name=this.name,e.side=this.side,e.opacity=this.opacity,e.transparent=this.transparent,e.depthTest=this.depthTest,e.depthWrite=this.depthWrite,e.stencilTest=this.stencilTest,e.polygonOffset=this.polygonOffset,e.polygonOffsetFactor=this.polygonOffsetFactor,e.polygonOffsetUnits=this.polygonOffsetUnits,e.alphaTest=this.alphaTest,e.overdraw=this.overdraw,e.visible=this.visible,e},$3Dmol.Material.prototype.dispose=function(){this.dispatchEvent({type:"dispose"})},$3Dmol.MaterialIdCount=0,$3Dmol.LineBasicMaterial=function(e){$3Dmol.Material.call(this),this.color=new $3Dmol.Color(16777215),this.linewidth=1,this.linejoin=this.linecap="round",this.vertexColors=!1,this.fog=!0,this.shaderID="basic",this.setValues(e)},$3Dmol.LineBasicMaterial.prototype=Object.create($3Dmol.Material.prototype),$3Dmol.LineBasicMaterial.prototype.clone=function(){var e=new $3Dmol.LineBasicMaterial;return $3Dmol.Material.prototype.clone.call(this,e),e.color.copy(this.color),e},$3Dmol.MeshLambertMaterial=function(e){$3Dmol.Material.call(this),this.color=new $3Dmol.Color(16777215),this.ambient=new $3Dmol.Color(1048575),this.emissive=new $3Dmol.Color(0),this.wrapAround=!1,this.wrapRGB=new $3Dmol.Vector3(1,1,1),this.envMap=this.specularMap=this.lightMap=this.map=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.shading=$3Dmol.SmoothShading,this.shaderID="lambert",this.vertexColors=$3Dmol.NoColors,this.skinning=!1,this.setValues(e)},$3Dmol.MeshLambertMaterial.prototype=Object.create($3Dmol.Material.prototype),$3Dmol.MeshLambertMaterial.prototype.clone=function(e){return void 0===e&&(e=new $3Dmol.MeshLambertMaterial),$3Dmol.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.ambient.copy(this.ambient),e.emissive.copy(this.emissive),e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.shaderID=this.shaderID,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},$3Dmol.MeshDoubleLambertMaterial=function(e){$3Dmol.MeshLambertMaterial.call(this,e),this.shaderID="lambertdouble",this.side=$3Dmol.DoubleSide},$3Dmol.MeshDoubleLambertMaterial.prototype=Object.create($3Dmol.MeshLambertMaterial.prototype),$3Dmol.MeshDoubleLambertMaterial.prototype.clone=function(){var e=new $3Dmol.MeshDoubleLambertMaterial;return $3Dmol.MeshLambertMaterial.prototype.clone.call(this,e),e},$3Dmol.MeshOutlineMaterial=function(e){$3Dmol.Material.call(this),e=e||{},this.fog=!0,this.shaderID="outline",this.wireframe=!1,this.outlineColor=e.color||new $3Dmol.Color(0,0,0),this.outlineWidth=e.width||.1,this.outlinePushback=e.pushback||1},$3Dmol.MeshOutlineMaterial.prototype=Object.create($3Dmol.Material.prototype),$3Dmol.MeshOutlineMaterial.prototype.clone=function(e){return void 0===e&&(e=new $3Dmol.MeshOutlineMaterial),$3Dmol.Material.prototype.clone.call(this,e),e.fog=this.fog,e.shaderID=this.shaderID,e.wireframe=this.wireframe,e},$3Dmol.ImposterMaterial=function(e){$3Dmol.Material.call(this),this.color=new $3Dmol.Color(16777215),this.ambient=new $3Dmol.Color(1048575),this.emissive=new $3Dmol.Color(0),this.imposter=!0,this.wrapAround=!1,this.wrapRGB=new $3Dmol.Vector3(1,1,1),this.envMap=this.specularMap=this.lightMap=this.map=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.shading=$3Dmol.SmoothShading,this.shaderID=null,this.vertexColors=$3Dmol.NoColors,this.skinning=!1,this.setValues(e)},$3Dmol.ImposterMaterial.prototype=Object.create($3Dmol.Material.prototype),$3Dmol.ImposterMaterial.prototype.clone=function(){var e=new $3Dmol.ImposterMaterial;return $3Dmol.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.ambient.copy(this.ambient),e.emissive.copy(this.emissive),e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.shaderID=this.shaderID,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},$3Dmol.SphereImposterMaterial=function(e){$3Dmol.ImposterMaterial.call(this),this.shaderID="sphereimposter",this.setValues(e)},$3Dmol.SphereImposterMaterial.prototype=Object.create($3Dmol.ImposterMaterial.prototype),$3Dmol.SphereImposterMaterial.prototype.clone=function(){var e=new $3Dmol.SphereImposterMaterial;return $3Dmol.ImposterMaterial.prototype.clone.call(this,e),e},$3Dmol.SphereImposterOutlineMaterial=function(e){$3Dmol.ImposterMaterial.call(this),e=e||{},this.shaderID="sphereimposteroutline",this.outlineColor=e.color||new $3Dmol.Color(0,0,0),this.outlineWidth=e.width||.1,this.outlinePushback=e.pushback||1,this.setValues(e)},$3Dmol.SphereImposterOutlineMaterial.prototype=Object.create($3Dmol.ImposterMaterial.prototype),$3Dmol.SphereImposterOutlineMaterial.prototype.clone=function(){var e=new $3Dmol.SphereImposterOutlineMaterial;return $3Dmol.ImposterMaterial.prototype.clone.call(this,e),e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.outlinePushback=this.outlinePushback,e},$3Dmol.StickImposterMaterial=function(e){$3Dmol.ImposterMaterial.call(this),this.shaderID="stickimposter",this.setValues(e)},$3Dmol.StickImposterMaterial.prototype=Object.create($3Dmol.ImposterMaterial.prototype),$3Dmol.StickImposterMaterial.prototype.clone=function(){var e=new $3Dmol.StickImposterMaterial;return $3Dmol.ImposterMaterial.prototype.clone.call(this,e),e},$3Dmol.StickImposterOutlineMaterial=function(e){$3Dmol.ImposterMaterial.call(this),e=e||{},this.shaderID="stickimposteroutline",this.outlineColor=e.color||new $3Dmol.Color(0,0,0),this.outlineWidth=e.width||.1,this.outlinePushback=e.pushback||1,this.setValues(e)},$3Dmol.StickImposterOutlineMaterial.prototype=Object.create($3Dmol.ImposterMaterial.prototype),$3Dmol.StickImposterOutlineMaterial.prototype.clone=function(){var e=new $3Dmol.StickImposterOutlineMaterial;return $3Dmol.ImposterMaterial.prototype.clone.call(this,e),e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.outlinePushback=this.outlinePushback,e},$3Dmol.InstancedMaterial=function(e){$3Dmol.Material.call(this),this.color=new $3Dmol.Color(16777215),this.ambient=new $3Dmol.Color(1048575),this.emissive=new $3Dmol.Color(0),this.wrapAround=!1,this.wrapRGB=new $3Dmol.Vector3(1,1,1),this.envMap=this.specularMap=this.lightMap=this.map=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.shading=$3Dmol.SmoothShading,this.shaderID="instanced",this.vertexColors=$3Dmol.NoColors,this.skinning=!1,this.sphere=null,this.setValues(e)},$3Dmol.InstancedMaterial.prototype=Object.create($3Dmol.Material.prototype),$3Dmol.InstancedMaterial.prototype.clone=function(){var e=new $3Dmol.InstancedMaterial;return $3Dmol.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.ambient.copy(this.ambient),e.emissive.copy(this.emissive),e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.shaderID=this.shaderID,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e.sphere=this.sphere,e},$3Dmol.SpriteMaterial=function(e){$3Dmol.Material.call(this),this.color=new $3Dmol.Color(16777215),this.map=new $3Dmol.Texture,this.useScreenCoordinates=!0,this.depthTest=!this.useScreenCoordinates,this.sizeAttenuation=!this.useScreenCoordinates,this.scaleByViewPort=!this.sizeAttenuation,this.alignment=$3Dmol.SpriteAlignment.center.clone(),this.fog=!1,this.uvOffset=new $3Dmol.Vector2(0,0),this.uvScale=new $3Dmol.Vector2(1,1),this.setValues(e),void 0===(e=e||{}).depthTest&&(this.depthTest=!this.useScreenCoordinates),void 0===e.sizeAttenuation&&(this.sizeAttenuation=!this.useScreenCoordinates),void 0===e.scaleByViewPort&&(this.scaleByViewPort=!this.sizeAttenuation)},$3Dmol.SpriteMaterial.prototype=Object.create($3Dmol.Material.prototype),$3Dmol.SpriteMaterial.prototype.clone=function(){var e=new $3Dmol.SpriteMaterial;return $3Dmol.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.useScreenCoordinates=useScreenCoordinates,e.sizeAttenuation=this.sizeAttenuation,e.scaleByViewport=this.scaleByViewPort,e.alignment.copy(this.alignment),e.uvOffset.copy(this.uvOffset),e},$3Dmol.SpriteAlignment={},$3Dmol.SpriteAlignment.topLeft=new $3Dmol.Vector2(1,-1),$3Dmol.SpriteAlignment.topCenter=new $3Dmol.Vector2(0,-1),$3Dmol.SpriteAlignment.topRight=new $3Dmol.Vector2(-1,-1),$3Dmol.SpriteAlignment.centerLeft=new $3Dmol.Vector2(1,0),$3Dmol.SpriteAlignment.center=new $3Dmol.Vector2(0,0),$3Dmol.SpriteAlignment.centerRight=new $3Dmol.Vector2(-1,0),$3Dmol.SpriteAlignment.bottomLeft=new $3Dmol.Vector2(1,1),$3Dmol.SpriteAlignment.bottomCenter=new $3Dmol.Vector2(0,1),$3Dmol.SpriteAlignment.bottomRight=new $3Dmol.Vector2(-1,1),$3Dmol.Texture=function(e){$3Dmol.EventDispatcher.call(this),this.id=$3Dmol.TextureIdCount++,this.name="",this.image=e,this.mipmaps=[],this.mapping=new $3Dmol.UVMapping,this.wrapT=this.wrapS=$3Dmol.ClampToEdgeWrapping,this.magFilter=$3Dmol.LinearFilter,this.minFilter=$3Dmol.LinearMipMapLinearFilter,this.anisotropy=1,this.format=$3Dmol.RGBAFormat,this.type=$3Dmol.UnsignedByteType,this.offset=new $3Dmol.Vector2(0,0),this.repeat=new $3Dmol.Vector2(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.needsUpdate=!1,this.onUpdate=null},$3Dmol.Texture.prototype={constructor:$3Dmol.Texture,clone:function(e){return void 0===e&&(e=new $3Dmol.Texture),e.image=this.image,e.mipmaps=this.mipmaps.slice(0),e.mapping=this.mapping,e.wrapS=this.wrapS,e.wrapT=this.wrapT,e.magFilter=this.magFilter,e.minFilter=this.minFilter,e.anisotropy=this.anisotropy,e.format=this.format,e.type=this.type,e.offset.copy(this.offset),e.repeat.copy(this.repeat),e.generateMipmaps=this.generateMipmaps,e.premultiplyAlpha=this.premultiplyAlpha,e.flipY=this.flipY,e.unpackAlignment=this.unpackAlignment,e},dispose:function(){this.dispatchEvent({type:"dispose"})}},$3Dmol.TextureIdCount=0,$3Dmol.FrontSide=0,$3Dmol.BackSide=1,$3Dmol.DoubleSide=2,$3Dmol.NoShading=0,$3Dmol.FlatShading=1,$3Dmol.SmoothShading=2,$3Dmol.NoColors=0,$3Dmol.FaceColors=1,$3Dmol.VertexColors=2,$3Dmol.MultiplyOperation=0,$3Dmol.MixOperation=1,$3Dmol.AddOperation=2,$3Dmol.UVMapping=function(){},$3Dmol.ClampToEdgeWrapping=1001,$3Dmol.LinearFilter=1006,$3Dmol.LinearMipMapLinearFilter=1008,$3Dmol.UnsignedByteType=1009,$3Dmol.RGBAFormat=1021,$3Dmol.Line=function(e,t,r){$3Dmol.Object3D.call(this),this.geometry=e,this.material=void 0!==t?t:new $3Dmol.LineBasicMaterial({color:16777215*Math.random()}),this.type=void 0!==r?r:$3Dmol.LineStrip},$3Dmol.LineStrip=0,$3Dmol.LinePieces=1,$3Dmol.Line.prototype=Object.create($3Dmol.Object3D.prototype),$3Dmol.Line.prototype.clone=function(e){return void 0===e&&(e=new $3Dmol.Line(this.geometry,this.material,this.type)),$3Dmol.Object3D.prototype.clone.call(this,e),e},$3Dmol.Mesh=function(e,t){$3Dmol.Object3D.call(this),this.geometry=e,this.material=void 0!==t?t:new $3Dmol.MeshBasicMaterial({color:16777215*Math.random(),wireframe:!0})},$3Dmol.Mesh.prototype=Object.create($3Dmol.Object3D.prototype),$3Dmol.Mesh.prototype.clone=function(e){return void 0===e&&(e=new $3Dmol.Mesh(this.geometry,this.material)),$3Dmol.Object3D.prototype.clone.call(this,e),e},$3Dmol.Sprite=function(e){$3Dmol.Object3D.call(this),this.material=void 0!==e?e:new $3Dmol.SpriteMaterial,this.rotation3d=this.rotation,this.rotation=0},$3Dmol.Sprite.prototype=Object.create($3Dmol.Object3D.prototype),$3Dmol.Sprite.prototype.updateMatrix=function(){this.matrix.setPosition(this.position),this.rotation3d.set(0,0,this.rotation),this.matrix.setRotationFromEuler(this.rotation3d),1===this.scale.x&&1===this.scale.y||this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0},$3Dmol.Sprite.prototype.clone=function(e){return void 0===e&&(e=new $3Dmol.Sprite(this.material)),$3Dmol.Object3D.prototype.clone.call(this,e),e},$3Dmol.Renderer=function(e){function t(e){P[e]||(b.enableVertexAttribArray(e),P[e]=!0)}function r(e,t){var r;return"fragment"===e?r=b.createShader(b.FRAGMENT_SHADER):"vertex"===e&&(r=b.createShader(b.VERTEX_SHADER)),b.shaderSource(r,t),b.compileShader(r),b.getShaderParameter(r,b.COMPILE_STATUS)?r:(console.error(b.getShaderInfoLog(r)),console.error("could not initialize shader"),null)}function n(e,t,r,n,o,i,a,s){if(t){var l=e.length-1;s=t=-1}else l=0,t=e.length,s=1;for(var c=l;c!==t;c+=s){var u=e[c];if(u.render){l=u.object;var h=u.buffer;if(u=u[r]){a&&x.setBlending(!0),x.setDepthTest(u.depthTest),x.setDepthWrite(u.depthWrite);var f=u.polygonOffset;null!==f&&(f?b.enable(b.POLYGON_OFFSET_FILL):b.disable(b.POLYGON_OFFSET_FILL)),f=l._modelViewMatrix.isReflected(),x.setMaterialFaces(u,f),x.renderBuffer(n,o,i,u,h,l),(y||u.outline)&&("sphereimposter"==u.shaderID?x.renderBuffer(n,o,i,v,h,l):"stickimposter"==u.shaderID?x.renderBuffer(n,o,i,g,h,l):u.wireframe||"basic"===u.shaderID||0===u.opacity||x.renderBuffer(n,o,i,m,h,l))}}}}function o(e){return 0==(e&e-1)}function i(e){return e===$3Dmol.UnsignedByteType?b.UNSIGNED_BYTE:e===$3Dmol.RGBAFormat?b.RGBA:0}e=e||{},this.row=e.row,this.col=e.col,this.rows=e.rows,this.cols=e.cols;var a=void 0!==e.canvas?e.canvas:document.createElement("canvas"),s=void 0!==e.precision?e.precision:"highp",l=void 0===e.alpha||e.alpha,c=void 0===e.premultipliedAlpha||e.premultipliedAlpha,u=void 0!==e.antialias&&e.antialias,h=void 0===e.stencil||e.stencil,f=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,d=void 0!==e.clearColor?new $3Dmol.Color(e.clearColor):new $3Dmol.Color(0),p=void 0!==e.clearAlpha?e.clearAlpha:0,m=new $3Dmol.MeshOutlineMaterial(e.outline),v=new $3Dmol.SphereImposterOutlineMaterial(e.outline),g=new $3Dmol.StickImposterOutlineMaterial(e.outline),y=!!e.outline;this.domElement=a,this.context=null,this.devicePixelRatio=void 0!==e.devicePixelRatio?e.devicePixelRatio:void 0!==self.devicePixelRatio?self.devicePixelRatio:1,a.id=e.id,this.autoUpdateScene=this.autoUpdateObjects=this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0,this.renderPluginsPost=[],this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}};var b,x=this,w=[],D=0,C=null,$=-1,S=null,A=null,_=0,M=-1,z=-1,T=-1,L=-1,E=null,F=0,k=0,I=0,O=0,P={},N=new $3Dmol.Matrix4,j=new $3Dmol.Vector3,R=new $3Dmol.Vector3,V=!0,B=[],U=[];try{if(!(b=a.getContext("experimental-webgl",{alpha:l,premultipliedAlpha:c,antialias:u,stencil:h,preserveDrawingBuffer:f}))&&!(b=a.getContext("webgl",{alpha:l,premultipliedAlpha:c,antialias:u,stencil:h,preserveDrawingBuffer:f})))throw"Error creating WebGL context."}catch(e){console.error(e)}b.clearColor(0,0,0,1),b.clearDepth(1),b.clearStencil(0),b.enable(b.DEPTH_TEST),b.depthFunc(b.LEQUAL),b.frontFace(b.CCW),b.cullFace(b.BACK),b.enable(b.CULL_FACE),b.enable(b.BLEND),b.blendEquation(b.FUNC_ADD),b.blendFunc(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA),b.clearColor(d.r,d.g,d.b,p),this.context=b;var G=b.getExtension("ANGLE_instanced_arrays"),q=b.getExtension("EXT_frag_depth");this.supportedExtensions=function(){return{supportsAIA:!!G,supportsImposters:!!q}},this.getContext=function(){return b},this.getPrecision=function(){return s},this.setClearColorHex=function(e,t){d.setHex(e),p=t,b.clearColor(d.r,d.g,d.b,p)},this.enableOutline=function(e){m=new $3Dmol.MeshOutlineMaterial(e),v=new $3Dmol.SphereImposterOutlineMaterial(e),g=new $3Dmol.StickImposterOutlineMaterial(e),y=!0},this.disableOutline=function(){y=!1},this.setViewport=function(){if(null!=this.rows&&null!=this.cols&&null!=this.row&&null!=this.col){var e=a.width/this.cols,t=a.height/this.rows;F=e*this.devicePixelRatio,k=t*this.devicePixelRatio,b.drawingBufferWidth=3*F,b.drawingBufferHeight=k,b.enable(b.SCISSOR_TEST),b.scissor(e*this.col,t*this.row,e,t),b.viewport(e*this.col,t*this.row,e,t)}},this.setSize=function(e,t){if(null!=this.rows&&null!=this.cols&&null!=this.row&&null!=this.col){var r=e/this.cols,n=t/this.rows;a.width=e*this.devicePixelRatio,a.height=t*this.devicePixelRatio,F=r*this.devicePixelRatio,k=n*this.devicePixelRatio,a.style.width=e+"px",a.style.height=t+"px",this.setViewport()}else F=a.width=e*this.devicePixelRatio,k=a.height=t*this.devicePixelRatio,a.style.width=e+"px",a.style.height=t+"px",b.viewport(0,0,b.drawingBufferWidth,b.drawingBufferHeight)},this.clear=function(e,t,r){var n=0;(void 0===e||e)&&(n|=b.COLOR_BUFFER_BIT),(void 0===t||t)&&(n|=b.DEPTH_BUFFER_BIT),(void 0===r||r)&&(n|=b.STENCIL_BUFFER_BIT),b.clear(n)},this.clearTarget=function(e,t,r){this.clear(e,t,r)},this.setMaterialFaces=function(e,t){var r=e.side===$3Dmol.DoubleSide;e=e.side===$3Dmol.BackSide,e=t?!e:e,M!==r&&(r?b.disable(b.CULL_FACE):b.enable(b.CULL_FACE),M=r),z!==e&&(e?b.frontFace(b.CW):b.frontFace(b.CCW),z=e)},this.setDepthTest=function(e){T!==e&&(e?b.enable(b.DEPTH_TEST):b.disable(b.DEPTH_TEST),T=e)},this.setDepthWrite=function(e){L!==e&&(b.depthMask(e),L=e)},this.setBlending=function(e){e?(b.enable(b.BLEND),b.blendEquationSeparate(b.FUNC_ADD,b.FUNC_ADD),b.blendFuncSeparate(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA,b.ONE,b.ONE_MINUS_SRC_ALPHA)):b.disable(b.BLEND)},this.addPostPlugin=function(e){e.init(this),this.renderPluginsPost.push(e)};var H=function(e){if((e=e.target).removeEventListener("dispose",H),e.__webglInit=void 0,void 0!==e.__webglVertexBuffer&&b.deleteBuffer(e.__webglVertexBuffer),void 0!==e.__webglColorBuffer&&b.deleteBuffer(e.__webglColorBuffer),void 0!==e.geometryGroups)for(var t=0,r=e.groups;t<r;t++){var n=e.geometryGroups[t];void 0!==n.__webglVertexBuffer&&b.deleteBuffer(n.__webglVertexBuffer),void 0!==n.__webglColorBuffer&&b.deleteBuffer(n.__webglColorBuffer),void 0!==n.__webglNormalBuffer&&b.deleteBuffer(n.__webglNormalBuffer),void 0!==n.__webglFaceBuffer&&b.deleteBuffer(n.__webglFaceBuffer),void 0!==n.__webglLineBuffer&&b.deleteBuffer(n.__webglLineBuffer)}x.info.memory.geometries--},W=function(e){(e=e.target).removeEventListener("dispose",W),e.image&&e.image.__webglTextureCube?b.deleteTexture(e.image.__webglTextureCube):e.__webglInit&&(e.__webglInit=!1,b.deleteTexture(e.__webglTexture)),x.info.memory.textures--},Y=function(e){(e=e.target).removeEventListener("dispose",Y),Z(e)},Z=function(e){var t=e.program;if(void 0!==t){e.program=void 0;var r,n=!1;for(e=0,r=w.length;e<r;e++){var o=w[e];if(o.program===t){o.usedTimes--,0===o.usedTimes&&(n=!0);break}}if(!0===n){for(n=[],e=0,r=w.length;e<r;e++)(o=w[e]).program!==t&&n.push(o);w=n,b.deleteProgram(t),x.info.memory.programs--}}};this.initMaterial=function(e,t,n,o){e.addEventListener("dispose",Y),(t=e.shaderID)&&(t=$3Dmol.ShaderLib[t],e.vertexShader=t.vertexShader,e.fragmentShader=t.fragmentShader,e.uniforms=$3Dmol.ShaderUtils.clone(t.uniforms));e:{var i=e.fragmentShader;o=e.vertexShader,n=e.uniforms;var a,l={wireframe:e.wireframe,fragdepth:e.imposter};for(c in(t=[]).push(i),t.push(o),l)t.push(c),t.push(l[c]);t=t.join();var c=0;for(a=w.length;c<a;c++){var u=w[c];if(u.code===t){u.usedTimes++;var h=u.program;break e}}for(h in c=b.createProgram(),a=""+(u="precision "+s+" float;"),i=r("fragment",(l=[l.fragdepth?"#extension GL_EXT_frag_depth: enable":"",l.wireframe?"#define WIREFRAME 1":"",u].join("\n"))+i),o=r("vertex",a+o),b.attachShader(c,o),b.attachShader(c,i),b.linkProgram(c),b.getProgramParameter(c,b.LINK_STATUS)||console.error("Could not initialize shader"),c.uniforms={},c.attributes={},o=["viewMatrix","modelViewMatrix","projectionMatrix","normalMatrix"],n)o.push(h);for(h=0;h<o.length;h++)n=o[h],c.uniforms[n]=b.getUniformLocation(c,n);for(o="position normal color lineDistance offset radius".split(" "),h=0;h<o.length;h++)n=o[h],c.attributes[n]=b.getAttribLocation(c,n);c.id=D++,w.push({program:c,code:t,usedTimes:1}),x.info.memory.programs=w.length,h=c}e.program=h},this.renderBuffer=function(e,r,n,o,i,a){if(o.visible){o.needsUpdate&&(o.program&&Z(o),x.initMaterial(o,r,n,a),o.needsUpdate=!1);var s=!1,l=o.program,c=l.uniforms,u=o.uniforms;if(l!=C&&(b.useProgram(l),C=l,s=!0),o.id!=$&&($=o.id,s=!0),e!=A&&(A=e,s=!0),b.uniformMatrix4fv(c.projectionMatrix,!1,e.projectionMatrix.elements),b.uniformMatrix4fv(c.modelViewMatrix,!1,a._modelViewMatrix.elements),b.uniformMatrix3fv(c.normalMatrix,!1,a._normalMatrix.elements),s){if(u.fogColor.value=n.color,u.fogNear.value=n.near,u.fogFar.value=n.far,o.shaderID.startsWith("lambert")||"instanced"===o.shaderID||o.shaderID.endsWith("imposter")){if(b.uniformMatrix4fv(c.viewMatrix,!1,e.matrixWorldInverse.elements),V){var h=0;for(e=0,n=r.length;e<n;e++){var f=(s=r[e]).color,d=s.intensity;s instanceof $3Dmol.Light&&(R.getPositionFromMatrix(s.matrixWorld),j.getPositionFromMatrix(s.target.matrixWorld),R.sub(j),R.normalize(),0!==R.x||0!==R.y||0!==R.z)&&(U[h]=R.x,U[h+1]=R.y,U[h+2]=R.z,B[h]=f.r*d,B[h+1]=f.g*d,B[h+2]=f.b*d,h+=3)}V=!1}u.directionalLightColor.value=B,u.directionalLightDirection.value=U}else o.shaderID.endsWith("outline")?(u.outlineColor.value=o.outlineColor,u.outlineWidth.value=o.outlineWidth,u.outlinePushback.value=o.outlinePushback):"sphereimposter"===o.shaderID&&(b.uniformMatrix4fv(c.viewMatrix,!1,e.matrixWorldInverse.elements),b.uniformMatrix3fv(c.normalMatrix,!1,a._normalMatrix.elements),u.directionalLightColor.value=B,u.directionalLightDirection.value=U);for(var p in u.opacity.value=o.opacity,u)c[p]&&(r=u[p].type,e=u[p].value,n=c[p],"f"===r?b.uniform1f(n,e):"fv"===r?b.uniform3fv(n,e):"c"===r?b.uniform3f(n,e.r,e.g,e.b):"f4"===r&&b.uniform4f(n,e[0],e[1],e[2],e[3]))}if(u=l.attributes,c=!1,(l=16777215*i.id+2*l.id+(o.wireframe?1:0))!==S&&(S=l,c=!0),c){for(var m in P)P[m]&&(b.disableVertexAttribArray(m),P[m]=!1);0<=u.position&&(b.bindBuffer(b.ARRAY_BUFFER,i.__webglVertexBuffer),t(u.position),b.vertexAttribPointer(u.position,3,b.FLOAT,!1,0,0)),0<=u.color&&(b.bindBuffer(b.ARRAY_BUFFER,i.__webglColorBuffer),t(u.color),b.vertexAttribPointer(u.color,3,b.FLOAT,!1,0,0)),0<=u.normal&&(b.bindBuffer(b.ARRAY_BUFFER,i.__webglNormalBuffer),t(u.normal),b.vertexAttribPointer(u.normal,3,b.FLOAT,!1,0,0)),0<=u.offset&&(b.bindBuffer(b.ARRAY_BUFFER,i.__webglOffsetBuffer),t(u.offset),b.vertexAttribPointer(u.offset,3,b.FLOAT,!1,0,0)),0<=u.radius&&(b.bindBuffer(b.ARRAY_BUFFER,i.__webglRadiusBuffer),t(u.radius),b.vertexAttribPointer(u.radius,1,b.FLOAT,!1,0,0))}if(a instanceof $3Dmol.Mesh){if("instanced"===o.shaderID){var v=o.sphere.geometryGroups[0];c&&(b.bindBuffer(b.ARRAY_BUFFER,i.__webglVertexBuffer),b.bufferData(b.ARRAY_BUFFER,v.vertexArray,b.STATIC_DRAW),b.bindBuffer(b.ARRAY_BUFFER,i.__webglNormalBuffer),b.bufferData(b.ARRAY_BUFFER,v.normalArray,b.STATIC_DRAW),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,i.__webglFaceBuffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,v.faceArray,b.STATIC_DRAW)),v=v.faceidx,G.vertexAttribDivisorANGLE(u.offset,1),G.vertexAttribDivisorANGLE(u.radius,1),G.vertexAttribDivisorANGLE(u.color,1),G.drawElementsInstancedANGLE(b.TRIANGLES,v,b.UNSIGNED_SHORT,0,i.radiusArray.length),G.vertexAttribDivisorANGLE(u.offset,0),G.vertexAttribDivisorANGLE(u.radius,0),G.vertexAttribDivisorANGLE(u.color,0)}else o.wireframe?(a=i.lineidx,(o=o.wireframeLinewidth)!==E&&(b.lineWidth(o),E=o),c&&b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,i.__webglLineBuffer),b.drawElements(b.LINES,a,b.UNSIGNED_SHORT,0)):(v=i.faceidx,c&&b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,i.__webglFaceBuffer),b.drawElements(b.TRIANGLES,v,b.UNSIGNED_SHORT,0));x.info.render.calls++,x.info.render.vertices+=v,x.info.render.faces+=v/3}else a instanceof $3Dmol.Line&&(a=i.vertices,(i=o.linewidth)!==E&&(b.lineWidth(i),E=i),b.drawArrays(b.LINES,0,a),x.info.render.calls++)}},this.render=function(e,t,r){if(!1==t instanceof $3Dmol.Camera)console.error("$3Dmol.Renderer.render: camera is not an instance of $3Dmol.Camera.");else{var o,i=e.__lights,a=e.fog;$=-1,V=!0,this.autoUpdateScene&&e.updateMatrixWorld(),void 0===t.parent&&t.updateMatrixWorld(),t.matrixWorldInverse.getInverse(t.matrixWorld),N.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this.autoUpdateObjects&&this.initWebGLObjects(e),x.info.render.calls=0,x.info.render.vertices=0,x.info.render.faces=0,x.info.render.points=0,I=F,O=k,this.setViewport(),(this.autoClear||r)&&(b.clearColor(d.r,d.g,d.b,p),this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil));var s=e.__webglObjects;for(r=0,o=s.length;r<o;r++){var l=s[r],c=l.object;if(l.render=!1,c.visible){c._modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,c.matrixWorld),c._normalMatrix.getInverse(c._modelViewMatrix),c._normalMatrix.transpose();var u=(c=l).object.material;u.transparent?(c.opaque=null,c.transparent=u,u.wireframe||((u=u.clone()).opacity=0,c.blank=u)):(c.opaque=u,c.transparent=null),l.render=!0}}if(this.setBlending(!1),n(e.__webglObjects,!0,"opaque",t,i,a,!1,null),n(e.__webglObjects,!0,"blank",t,i,a,!0,null),n(e.__webglObjects,!1,"transparent",t,i,a,!0,null),i=this.renderPluginsPost,S=-1,A=C=null,z=$=M=T=L=-1,i.length)for(a=0,r=i.length;a<r;a++)V=!0,i[a].render(e,t,I,O),S=-1,A=C=null,z=$=M=T=L=-1;this.setDepthTest(!0),this.setDepthWrite(!0)}},this.initWebGLObjects=function(e){if(e.__webglObjects||(e.__webglObjects=[],e.__webglObjectsImmediate=[],e.__webglSprites=[],e.__webglFlares=[]),e.__objectsAdded.length){for(;e.__objectsAdded.length;){var t,r=e.__objectsAdded[0],n=e;if(!r.__webglInit&&(r.__webglInit=!0,r._modelViewMatrix=new $3Dmol.Matrix4,r._normalMatrix=new $3Dmol.Matrix3,void 0!==r.geometry&&void 0===r.geometry.__webglInit&&(r.geometry.__webglInit=!0,r.geometry.addEventListener("dispose",H)),r instanceof $3Dmol.Mesh||r instanceof $3Dmol.Line)){var o=r.geometry,i=0;for(t=o.geometryGroups.length;i<t;i++){var a=o.geometryGroups[i];a.id=_++,a.__webglVertexBuffer||(r instanceof $3Dmol.Mesh?(a.radiusArray&&(a.__webglRadiusBuffer=b.createBuffer()),a.useOffset&&(a.__webglOffsetBuffer=b.createBuffer()),a.__webglVertexBuffer=b.createBuffer(),a.__webglNormalBuffer=b.createBuffer(),a.__webglColorBuffer=b.createBuffer(),a.__webglFaceBuffer=b.createBuffer(),a.__webglLineBuffer=b.createBuffer(),x.info.memory.geometries++,o.elementsNeedUpdate=!0,o.normalsNeedUpdate=!0):r instanceof $3Dmol.Line&&(a.__webglVertexBuffer=b.createBuffer(),a.__webglColorBuffer=b.createBuffer(),x.info.memory.geometries++),o.verticesNeedUpdate=!0,o.colorsNeedUpdate=!0)}}if(!r.__webglActive){if(r instanceof $3Dmol.Mesh||r instanceof $3Dmol.Line)for(i=0,t=(o=r.geometry).geometryGroups.length;i<t;i++)a=o.geometryGroups[i],n.__webglObjects.push({buffer:a,object:r,opaque:null,transparent:null});else r instanceof $3Dmol.Sprite&&n.__webglSprites.push(r);r.__webglActive=!0}e.__objectsAdded.splice(0,1)}S=-1}for(;e.__objectsRemoved.length;){if(t=e,(o=e.__objectsRemoved[0])instanceof $3Dmol.Mesh||o instanceof $3Dmol.Line)for(i=o,r=(t=t.__webglObjects).length-1;0<=r;--r)t[r].object===i&&t.splice(r,1);else if(o instanceof $3Dmol.Sprite)for(i=o,r=(t=t.__webglSprites).length-1;0<=r;--r)t[r]===i&&t.splice(r,1);o.__webglActive=!1,e.__objectsRemoved.splice(0,1)}for(o=0,t=e.__webglObjects.length;o<t;o++)if(i=(r=e.__webglObjects[o].object).geometry,r instanceof $3Dmol.Mesh||r instanceof $3Dmol.Line){for(r=0,n=i.geometryGroups.length;r<n;r++)if(a=i.geometryGroups[r],i.verticesNeedUpdate||i.elementsNeedUpdate||i.colorsNeedUpdate||i.normalsNeedUpdate){var s=b.STATIC_DRAW,l=a.vertexArray,c=a.colorArray;void 0!==a.__webglOffsetBuffer?b.bindBuffer(b.ARRAY_BUFFER,a.__webglOffsetBuffer):b.bindBuffer(b.ARRAY_BUFFER,a.__webglVertexBuffer),b.bufferData(b.ARRAY_BUFFER,l,s),b.bindBuffer(b.ARRAY_BUFFER,a.__webglColorBuffer),b.bufferData(b.ARRAY_BUFFER,c,s),a.normalArray&&void 0!==a.__webglNormalBuffer&&(l=a.normalArray,b.bindBuffer(b.ARRAY_BUFFER,a.__webglNormalBuffer),b.bufferData(b.ARRAY_BUFFER,l,s)),a.radiusArray&&void 0!==a.__webglRadiusBuffer&&(b.bindBuffer(b.ARRAY_BUFFER,a.__webglRadiusBuffer),b.bufferData(b.ARRAY_BUFFER,a.radiusArray,s)),a.faceArray&&void 0!==a.__webglFaceBuffer&&(l=a.faceArray,b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,a.__webglFaceBuffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,l,s)),a.lineArray&&void 0!==a.__webglLineBuffer&&(l=a.lineArray,b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,a.__webglLineBuffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,l,s))}i.verticesNeedUpdate=!1,i.elementsNeedUpdate=!1,i.normalsNeedUpdate=!1,i.colorsNeedUpdate=!1,i.buffersNeedUpdate=!1}},this.getXYRatio=function(){return null!=this.rows&&null!=this.cols&&null!=this.row&&null!=this.col?[this.cols,this.rows]:[1,1]},this.getAspect=function(e,t){null!=e&&null!=t||(e=a.width,t=a.height);var r=e/t;return null!=this.rows&&null!=this.cols&&null!=this.row&&null!=this.col&&(r=e/this.cols/(t/this.rows)),r},this.setTexture=function(e,t){if(e.needsUpdate){e.__webglInit||(e.__webglInit=!0,e.addEventListener("dispose",W),e.__webglTexture=b.createTexture(),x.info.memory.textures++),b.activeTexture(b.TEXTURE0+t),b.bindTexture(b.TEXTURE_2D,e.__webglTexture),b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,e.flipY),b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),b.pixelStorei(b.UNPACK_ALIGNMENT,e.unpackAlignment),t=o((t=e.image).width)&&o(t.height);var r=i(e.format),n=i(e.type),a=b.TEXTURE_2D;t?(b.texParameteri(a,b.TEXTURE_WRAP_S,i(e.wrapS)),b.texParameteri(a,b.TEXTURE_WRAP_T,i(e.wrapT)),b.texParameteri(a,b.TEXTURE_MAG_FILTER,i(e.magFilter)),b.texParameteri(a,b.TEXTURE_MIN_FILTER,i(e.minFilter))):(b.texParameteri(a,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(a,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texParameteri(a,b.TEXTURE_MAG_FILTER,b.LINEAR),b.texParameteri(a,b.TEXTURE_MIN_FILTER,b.LINEAR));var s=e.mipmaps;if(0<s.length&&t){for(var l=0,c=s.length;l<c;l++)a=s[l],b.texImage2D(b.TEXTURE_2D,l,r,r,n,a);e.generateMipmaps=!1}else b.texImage2D(b.TEXTURE_2D,0,r,r,n,e.image);e.generateMipmaps&&t&&b.generateMipmap(b.TEXTURE_2D),e.needsUpdate=!1,e.onUpdate&&e.onUpdate()}else b.activeTexture(b.TEXTURE0+t),b.bindTexture(b.TEXTURE_2D,e.__webglTexture)},this.addPostPlugin(new $3Dmol.SpritePlugin)},$3Dmol.Scene=function(){$3Dmol.Object3D.call(this),this.overrideMaterial=this.fog=null,this.matrixAutoUpdate=!1,this.__objects=[],this.__lights=[],this.__objectsAdded=[],this.__objectsRemoved=[]},$3Dmol.Scene.prototype=Object.create($3Dmol.Object3D.prototype),$3Dmol.Scene.prototype.__addObject=function(e){e instanceof $3Dmol.Light?(-1===this.__lights.indexOf(e)&&this.__lights.push(e),e.target&&void 0===e.target.parent&&this.add(e.target)):-1===this.__objects.indexOf(e)&&(this.__objects.push(e),this.__objectsAdded.push(e),-1!==this.__objectsRemoved.indexOf(e)&&this.__objectsRemoved.splice(t,1));for(var t=0;t<e.children.length;t++)this.__addObject(e.children[t])},$3Dmol.Scene.prototype.__removeObject=function(e){if(e instanceof $3Dmol.Light){var t=this.__lights.indexOf(e);-1!==t&&this.__lights.splice(t,1)}else-1!==(t=this.__objects.indexOf(e))&&(this.__objects.splice(t,1),this.__objectsRemoved.push(e),-1!==this.__objectsAdded.indexOf(e)&&this.__objectsAdded.splice(t,1));for(t=0;t<e.children.length;t++)this.__removeObject(e.children[t])},$3Dmol.Fog=function(e,t,r){this.name="",this.color=new $3Dmol.Color(e),this.near=void 0!==t?t:1,this.far=void 0!==r?r:1e3},$3Dmol.Fog.prototype.clone=function(){return new $3Dmol.Fog(this.color.getHex(),this.near,this.far)},$3Dmol.ShaderUtils={clone:function(e){var t,r={};for(t in e){r[t]={},r[t].type=e[t].type;var n=e[t].value;n instanceof $3Dmol.Color?r[t].value=n.clone():"number"==typeof n?r[t].value=n:n instanceof Array?r[t].value=[]:console.error("Error copying shader uniforms from ShaderLib: unknown type for uniform")}return r},stickimposterFragmentShader:"uniform float opacity;\nuniform mat4 projectionMatrix;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\nvarying vec3 vLight;\nvarying vec3 vColor;\nvarying vec3 cposition;\nvarying vec3 p1;\nvarying vec3 p2;\nvarying float r;\nvoid main() {\n    vec3 color = abs(vColor);\n    vec3 pos = cposition;\n    vec3 p = pos;\n    vec3 v = normalize(pos);\n    vec3 pa = p1;\n    vec3 va = normalize(p2-p1);\n    vec3 tmp1 = v-(dot(v,va)*va);\n    vec3 deltap = p-pa;\n    float A = dot(tmp1,tmp1);\n    if(A == 0.0) discard;\n    vec3 tmp2 = deltap-(dot(deltap,va)*va);\n    float B = 2.0*dot(tmp1, tmp2);\n    float C = dot(tmp2,tmp2)-r*r;\n    float det = (B*B) - (4.0*A*C);\n    if(det < 0.0) discard;\n    float sqrtDet = sqrt(det);\n    float posT = (-B+sqrtDet)/(2.0*A);\n    float negT = (-B-sqrtDet)/(2.0*A);\n    float intersectionT = min(posT,negT);\n    vec3 qi = p+v*intersectionT;\n    float dotp1 = dot(va,qi-p1);\n    float dotp2 = dot(va,qi-p2);\n    vec3 norm;\n    if( dotp1 < 0.0 || dotp2 > 0.0) {\n       vec3 cp;\n       if( dotp1 < 0.0) {        cp = p1;\n       } else {\n          cp = p2;\n       }\n       vec3 diff = p-cp;\n       A = dot(v,v);\n       B = dot(diff,v)*2.0;\n       C = dot(diff,diff)-r*r;\n       det = (B*B) - (4.0*C);\n       if(det < 0.0) discard;\n       sqrtDet = sqrt(det);\n       posT = (-B+sqrtDet)/(2.0);\n       negT = (-B-sqrtDet)/(2.0);\n       float t = min(posT,negT);\n       qi = p+v*t;\n       norm = normalize(qi-cp);\n    } else {\n       norm = normalize(qi-(dotp1*va + p1));\n    }\n    vec4 clipPos = projectionMatrix * vec4(qi, 1.0);\n    float ndcDepth = clipPos.z / clipPos.w;\n    float depth = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;\n    gl_FragDepthEXT = depth;"},$3Dmol.ShaderLib={basic:{fragmentShader:"uniform mat4 viewMatrix;\nuniform float opacity;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\nvarying vec3 vColor;\nvoid main() {\n    gl_FragColor = vec4( vColor, opacity );\n    float depth = gl_FragCoord.z / gl_FragCoord.w;\n    float fogFactor = smoothstep( fogNear, fogFar, depth );\n    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}",vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nattribute vec3 position;\nattribute vec3 color;\nvarying vec3 vColor;\nvoid main() {\n    vColor = color;\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    gl_Position = projectionMatrix * mvPosition;\n}",uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new $3Dmol.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3}}},sphereimposter:{fragmentShader:"uniform mat4 viewMatrix;\nuniform float opacity;\nuniform mat4 projectionMatrix;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\nuniform float uDepth;\nuniform vec3 directionalLightColor[ 1 ];\nvarying vec3 vColor;\nvarying vec2 mapping;\nvarying float rval;\nvarying vec3 vLight;\nvarying vec3 center;\nvoid main() {\n    float lensqr = dot(mapping,mapping);\n    float rsqr = rval*rval;\n    if(lensqr > rsqr)\n       discard;\n    float z = sqrt(rsqr-lensqr);\n    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z);\n    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);\n    float ndcDepth = clipPos.z / clipPos.w;\n    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;\n    vec3 norm = normalize(vec3(mapping.x,mapping.y,z));\n    float dotProduct = dot( norm, vLight );\n    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n    vec3 vLight = directionalLightColor[ 0 ] * directionalLightWeighting;\n    gl_FragColor = vec4(vLight*vColor, opacity*opacity );\n    float fogFactor = smoothstep( fogNear, fogFar, gl_FragDepthEXT/gl_FragCoord.w );\n    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}",vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 directionalLightColor[ 1 ];\nuniform vec3 directionalLightDirection[ 1 ];\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec3 color;\nvarying vec2 mapping;\nvarying vec3 vColor;\nvarying float rval;\nvarying vec3 vLight;\nvarying vec3 center;\nvoid main() {\n    vColor = color;\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    center = mvPosition.xyz;\n    vec4 projPosition = projectionMatrix * mvPosition;\n    vec4 adjust = projectionMatrix* vec4(normal,0.0); adjust.z = 0.0; adjust.w = 0.0;\n    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );\n    vLight = normalize( lDirection.xyz );\n    mapping = normal.xy;\n    rval = abs(normal.x);\n    gl_Position = projPosition+adjust;\n}",uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new $3Dmol.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},lambert:{fragmentShader:"uniform mat4 viewMatrix;\nuniform float opacity;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\nvarying vec3 vLightFront;\nvarying vec3 vColor;\nvoid main() {\n    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );\n    #ifndef WIREFRAME\n    gl_FragColor.xyz *= vLightFront;\n    #endif\n    gl_FragColor = gl_FragColor * vec4( vColor, opacity );\n    float depth = gl_FragCoord.z / gl_FragCoord.w;\n    float fogFactor = smoothstep( fogNear, fogFar, depth );\n    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}",vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 directionalLightColor[ 1 ];\nuniform vec3 directionalLightDirection[ 1 ];\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec3 color;\nvarying vec3 vColor;\nvarying vec3 vLightFront;\nvoid main() {\n    vColor = color;\n    vec3 objectNormal = normal;\n    vec3 transformedNormal = normalMatrix * objectNormal;\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    vLightFront = vec3( 0.0 );\n    transformedNormal = normalize( transformedNormal );\n    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );\n    vec3 dirVector = normalize( lDirection.xyz );\n    float dotProduct = dot( transformedNormal, dirVector );\n    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;\n    gl_Position = projectionMatrix * mvPosition;\n}",uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new $3Dmol.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},instanced:{fragmentShader:"uniform mat4 viewMatrix;\nuniform float opacity;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\nvarying vec3 vLightFront;\nvarying vec3 vColor;\nvoid main() {\n    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );\n    #ifndef WIREFRAME\n    gl_FragColor.xyz *= vLightFront;\n    #endif\n    gl_FragColor = gl_FragColor * vec4( vColor, opacity );\n    float depth = gl_FragCoord.z / gl_FragCoord.w;\n    float fogFactor = smoothstep( fogNear, fogFar, depth );\n    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}",vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 directionalLightColor[ 1 ];\nuniform vec3 directionalLightDirection[ 1 ];\nattribute vec3 offset;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec3 color;\nattribute float radius;\nvarying vec3 vColor;\nvarying vec3 vLightFront;\nvoid main() {\n    vColor = color;\n    vec3 objectNormal = normal;\n    vec3 transformedNormal = normalMatrix * objectNormal;\n    vec4 mvPosition = modelViewMatrix * vec4( position * radius + offset, 1.0 );\n    vLightFront = vec3( 0.0 );\n    transformedNormal = normalize( transformedNormal );\n    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );\n    vec3 dirVector = normalize( lDirection.xyz );\n    float dotProduct = dot( transformedNormal, dirVector );\n    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;\n    gl_Position = projectionMatrix * mvPosition;\n}",uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new $3Dmol.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},outline:{fragmentShader:"uniform float opacity;\nuniform vec3 outlineColor;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\nvoid main() {\n    gl_FragColor = vec4( outlineColor, 1 );\n}",vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float outlineWidth;\nuniform float outlinePushback;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec3 color;\nvoid main() {\n    vec4 norm = modelViewMatrix*vec4(normalize(normal),0.0);\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    mvPosition.xy += norm.xy*outlineWidth;\n    gl_Position = projectionMatrix * mvPosition;\n    mvPosition.z -= outlinePushback;\n    vec4 pushpos = projectionMatrix*mvPosition;\n    gl_Position.z = gl_Position.w*pushpos.z/pushpos.w;\n}",uniforms:{opacity:{type:"f",value:1},outlineColor:{type:"c",value:new $3Dmol.Color(0,0,0)},fogColor:{type:"c",value:new $3Dmol.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1}}},sphereimposteroutline:{fragmentShader:"uniform float opacity;\nuniform vec3 outlineColor;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\nuniform mat4 projectionMatrix;\nvarying vec2 mapping;\nvarying float rval;\nvarying vec3 center;\nuniform float outlinePushback;\nvoid main() {\n    float lensqr = dot(mapping,mapping);\n    float rsqr = rval*rval;\n    if(lensqr > rsqr)\n       discard;\n    float z = sqrt(rsqr-lensqr);\n    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z-outlinePushback);\n    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);\n    float ndcDepth = clipPos.z / clipPos.w;\n    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;\n    gl_FragColor = vec4(outlineColor, 1 );\n}",vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float outlineWidth;\nuniform float outlinePushback;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec3 color;\nvarying vec2 mapping;\nvarying float rval;\nvarying vec3 center;\nvoid main() {\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    center = mvPosition.xyz;\n    vec4 projPosition = projectionMatrix * mvPosition;\n    vec2 norm = normal.xy + vec2(sign(normal.x)*outlineWidth,sign(normal.y)*outlineWidth);\n    vec4 adjust = projectionMatrix* vec4(norm,normal.z,0.0); adjust.z = 0.0; adjust.w = 0.0;\n    mapping = norm.xy;\n    rval = abs(norm.x);\n    gl_Position = projPosition+adjust;\n}",uniforms:{opacity:{type:"f",value:1},outlineColor:{type:"c",value:new $3Dmol.Color(0,0,0)},fogColor:{type:"c",value:new $3Dmol.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1}}},stickimposter:{fragmentShader:[$3Dmol.ShaderUtils.stickimposterFragmentShader,"    float dotProduct = dot( norm, vLight );\n    vec3 light = vec3( max( dotProduct, 0.0 ) );\n    gl_FragColor = vec4(light*color, opacity*opacity );\n    float fogFactor = smoothstep( fogNear, fogFar, depth );\n    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}"].join("\n"),vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 directionalLightColor[ 1 ];\nuniform vec3 directionalLightDirection[ 1 ];\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec3 color;\nattribute float radius;\nvarying vec3 vColor;\nvarying vec3 vLight;\nvarying vec3 cposition;\nvarying vec3 p1;\nvarying vec3 p2;\nvarying float r;\nvoid main() {\n    vColor = color; vColor.z = abs(vColor.z);\n    r = abs(radius);\n    vec4 to = modelViewMatrix*vec4(normal, 1.0);\n    vec4 pt = modelViewMatrix*vec4(position, 1.0);\n    vec4 mvPosition = pt;\n    p1 = pt.xyz; p2 = to.xyz;\n    vec3 norm = to.xyz-pt.xyz;\n    float mult = 1.1;\n    if(length(p1) > length(p2)) {\n       mvPosition = to;\n    }\n    vec3 n = normalize(mvPosition.xyz);\n    if(color.z >= 0.0) {\n       vec3 pnorm = normalize(p1);\n       float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);\n       mvPosition.xyz = p1+t*pnorm;\n    } else {\n       vec3 pnorm = normalize(p2);\n       float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);\n       mvPosition.xyz = p2+t*pnorm;\n       mult *= -1.0;\n    }\n    vec3 cr = normalize(cross(mvPosition.xyz,norm))*radius;\n    vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*radius;\n    mvPosition.xy +=  mult*(cr + doublecr).xy;\n    cposition = mvPosition.xyz;\n    gl_Position = projectionMatrix * mvPosition;\n    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );\n    vLight = normalize( lDirection.xyz )*directionalLightColor[0];\n}",uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new $3Dmol.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},stickimposteroutline:{fragmentShader:$3Dmol.ShaderUtils.stickimposterFragmentShader+"gl_FragColor = vec4(color,1.0);}",vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 directionalLightColor[ 1 ];\nuniform vec3 directionalLightDirection[ 1 ];\nuniform vec3 outlineColor;\nuniform float outlineWidth;\nuniform float outlinePushback;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec3 color;\nattribute float radius;\nvarying vec3 vColor;\nvarying vec3 vLight;\nvarying vec3 cposition;\nvarying vec3 p1;\nvarying vec3 p2;\nvarying float r;\nvoid main() {\n    vColor = outlineColor;\n    float rad = radius+sign(radius)*outlineWidth;\n    r = abs(rad);\n    vec4 to = modelViewMatrix*vec4(normal, 1.0);\n    vec4 pt = modelViewMatrix*vec4(position, 1.0);\n    to.xyz += normalize(to.xyz)*outlinePushback;\n    pt.xyz += normalize(pt.xyz)*outlinePushback;\n    vec4 mvPosition = pt;\n    p1 = pt.xyz; p2 = to.xyz;\n    vec3 norm = to.xyz-pt.xyz;\n    float mult = 1.1;\n    if(length(p1) > length(p2)) {\n       mvPosition = to;\n    }\n    vec3 n = normalize(mvPosition.xyz);\n    if(color.z >= 0.0) {\n       vec3 pnorm = normalize(p1);\n       float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);\n       mvPosition.xyz = p1+t*pnorm;\n    } else {\n       vec3 pnorm = normalize(p2);\n       float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);\n       mvPosition.xyz = p2+t*pnorm;\n       mult *= -1.0;\n    }\n    vec3 cr = normalize(cross(mvPosition.xyz,norm))*rad;\n    vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*rad;\n    mvPosition.xy +=  mult*(cr + doublecr).xy;\n    cposition = mvPosition.xyz;\n    gl_Position = projectionMatrix * mvPosition;\n    vLight = vec3(1.0,1.0,1.0);\n}",uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new $3Dmol.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineColor:{type:"c",value:new $3Dmol.Color(0,0,0)},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1}}},lambertdouble:{fragmentShader:"uniform mat4 viewMatrix;\nuniform float opacity;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\nvarying vec3 vLightFront;\nvarying vec3 vLightBack;\nvarying vec3 vColor;\nvoid main() {\n    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );\n    #ifndef WIREFRAME\n    if ( gl_FrontFacing )\n       gl_FragColor.xyz *= vLightFront;\n    else\n       gl_FragColor.xyz *= vLightBack;\n    #endif\n    gl_FragColor = gl_FragColor * vec4( vColor, opacity );\n    float depth = gl_FragCoord.z / gl_FragCoord.w;\n    float fogFactor = smoothstep( fogNear, fogFar, depth );\n    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}",vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 directionalLightColor[ 1 ];\nuniform vec3 directionalLightDirection[ 1 ];\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec3 color;\nvarying vec3 vColor;\nvarying vec3 vLightFront;\nvarying vec3 vLightBack;\nvoid main() {\n    vColor = color;\n    vec3 objectNormal = normal;\n    vec3 transformedNormal = normalMatrix * objectNormal;\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    vLightFront = vec3( 0.0 );\n    vLightBack = vec3( 0.0 );\n    transformedNormal = normalize( transformedNormal );\n    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );\n    vec3 dirVector = normalize( lDirection.xyz );\n    float dotProduct = dot( transformedNormal, dirVector );\n    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n    vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;\n    vLightBack += directionalLightColor[ 0 ] * directionalLightWeightingBack;\n    gl_Position = projectionMatrix * mvPosition;\n}",uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new $3Dmol.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},sprite:{fragmentShader:"uniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvoid main() {\n    vec4 texture = texture2D(map, vUV);\n    if (texture.a < alphaTest) discard;\n    gl_FragColor = vec4(color * texture.xyz, texture.a * opacity);\n    if (fogType > 0) {\n        float depth = gl_FragCoord.z / gl_FragCoord.w;\n        float fogFactor = 0.0;\n        if (fogType == 1) {\n            fogFactor = smoothstep(fogNear, fogFar, depth);\n        }\n        else {\n            const float LOG2 = 1.442695;\n            float fogFactor = exp2(- fogDensity * fogDensity * depth * depth * LOG2);\n            fogFactor = 1.0 - clamp(fogFactor, 0.0, 1.0);\n        }\n        gl_FragColor = mix(gl_FragColor, vec4(fogColor, gl_FragColor.w), fogFactor);\n    }\n}",vertexShader:"uniform int useScreenCoordinates;\nuniform vec3 screenPosition;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 alignment;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\n    vUV = uvOffset + uv * uvScale;\n    vec2 alignedPosition = position + alignment;\n    vec2 rotatedPosition;\n    rotatedPosition.x = ( cos(rotation) * alignedPosition.x - sin(rotation) * alignedPosition.y ) * scale.x;\n    rotatedPosition.y = ( sin(rotation) * alignedPosition.x + cos(rotation) * alignedPosition.y ) * scale.y;\n    vec4 finalPosition;\n    if(useScreenCoordinates != 0) {\n        finalPosition = vec4(screenPosition.xy + rotatedPosition, screenPosition.z, 1.0);\n    }\n    else {\n        finalPosition = projectionMatrix * modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0); finalPosition /= finalPosition.w;\n        finalPosition.xy += rotatedPosition; \n    }\n    gl_Position = finalPosition;\n}",uniforms:{}}},$3Dmol.autoload=function(b,c){if(void 0!==$(".viewer_3Dmoljs")[0]&&($3Dmol.autoinit=!0),$3Dmol.autoinit){b=null!=b?b:null,$3Dmol.viewers={};var d=0;$(".viewer_3Dmoljs").each((function(){var h,e,t=$(this),g=[],q=[];"static"==t.css("position")&&t.css("position","relative");var p=null;if(t.data("pdb"))g.push("https://files.rcsb.org/view/"+t.data("pdb")+".pdb"),q.push("pdb");else if(t.data("cid"))q.push("sdf"),g.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+t.data("cid")+"/SDF?record_type=3d");else if(t.data("href")||t.data("url")){var u=t.data("href");g.push(u),p=u.substr(u.lastIndexOf(".")+1),q.push(p)}for(h in p=t.data(),p)"pdb"===h.substring(0,3)&&"pdb"!==h?(g.push("https://files.rcsb.org/view/"+p[h]+".pdb"),q.push("pdb")):"href"===h.substring(0,4)&&"href"!==h?(u=p[h],g.push(u),q.push(u.substr(u.lastIndexOf(".")+1))):"cid"===h.substring(0,3)&&"cid"!==h&&(g.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+p[h]+"/SDF?record_type=3d"),q.push("sdf"));var m={};t.data("options")&&(m=$3Dmol.specStringToObject(t.data("options"))),p=$3Dmol.CC.color(t.data("backgroundcolor"));var l={line:{}};t.data("style")&&(l=$3Dmol.specStringToObject(t.data("style")));var n={};t.data("select")&&(n=$3Dmol.specStringToObject(t.data("select")));var y=[],f=[],x=[],w=t.data(),R=/style(.+)/,P=/surface(.*)/,A=/labelres(.*)/,T=[];for(G in w)w.hasOwnProperty(G)&&T.push(G);for(T.sort(),h=0;h<T.length;h++){var G=T[h];if(e=R.exec(G)){e="select"+e[1];var C=$3Dmol.specStringToObject(w[e]);e=$3Dmol.specStringToObject(w[G]),y.push([C,e])}(e=P.exec(G))&&(e="select"+e[1],C=$3Dmol.specStringToObject(w[e]),e=$3Dmol.specStringToObject(w[G]),f.push([C,e])),(e=A.exec(G))&&(e="select"+e[1],C=$3Dmol.specStringToObject(w[e]),e=$3Dmol.specStringToObject(w[G]),x.push([C,e]))}var z=function(e){e.setStyle(n,l);for(var t=0;t<y.length;t++){var r=y[t][0]||{},o=y[t][1]||{line:{}};e.setStyle(r,o)}for(t=0;t<f.length;t++)r=f[t][0]||{},o=f[t][1]||{},e.addSurface($3Dmol.SurfaceType.VDW,o,r,r);for(t=0;t<x.length;t++)r=x[t][0]||{},o=x[t][1]||{},e.addResLabels(r,o);e.zoomTo(),e.render()},D=b;try{null==D&&(D=$3Dmol.viewers[this.id||d++]=$3Dmol.createViewer(t,{defaultcolors:$3Dmol.rasmolElementColors})),D.setBackgroundColor(p)}catch(e){console.log(e),window.location="http://get.webgl.org"}if(0!=g.length){h=0;var I=function(b){u=g[h];var n=t.data("type")||t.data("datatype")||q[h];D.addModel(b,n,m),h+=1,h<g.length?$.get(g[h],I,"text"):(z(D),t.data("callback")&&(b=eval(t.data("callback")),"function"==typeof b&&b(D)),c&&c(D))};$.get(g[0],I,"text")}else t.data("element")&&(G=$("#"+t.data("element")).val()||"",p=t.data("type")||t.data("datatype"),p||(console.log("Warning: No type specified for embedded viewer with moldata from "+t.data("element")+"\n assuming type 'pdb'"),p="pdb"),D.addModel(G,p,m)),z(D),t.data("callback")&&(G=eval(t.data("callback")),"function"==typeof G&&G(D)),c&&c(D)}))}},$(document).ready((function(){$3Dmol.autoload()}));var htmlColors={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgrey:11119017,darkgreen:25600,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,grey:8421504,green:32768,greenyellow:11403055,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgrey:13882323,lightgreen:9498256,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};$3Dmol.CC={cache:{0:new $3Dmol.Color(0)},color:function e(t){if(!t)return this.cache[0];if(void 0!==this.cache[t])return this.cache[t];if(t&&t.constructor===Array)return t.map(e,this);if("number"==typeof(t=this.getHex(t))){var r=new $3Dmol.Color(t);return this.cache[t]=r}return t},getHex:function(e){return isNaN(parseInt(e))?"string"==typeof e?(4==(e=e.trim()).length&&"#"==e[0]&&(e="#"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),7==e.length&&"#"==e[0]?parseInt(e.substring(1),16):htmlColors[e.toLowerCase()]||0):e:parseInt(e)}},$3Dmol.CC=$3Dmol.CC,$3Dmol.CC.color=$3Dmol.CC.color,$3Dmol.ssColors=$3Dmol.ssColors||{},$3Dmol.ssColors.pyMol={h:16711680,s:16776960,c:65280},$3Dmol.ssColors.Jmol={h:16711808,s:16762880,c:16777215},$3Dmol.elementColors=$3Dmol.elementColors||{},$3Dmol.elementColors.defaultColor=16716947,$3Dmol.elementColors.Jmol={H:16777215,He:14286847,HE:14286847,Li:13402367,LI:13402367,Be:12779264,BE:12779264,B:16758197,C:9474192,N:3166456,O:16715021,F:9494608,Ne:11789301,NE:11789301,Na:11230450,NA:11230450,Mg:9109248,MG:9109248,Al:12560038,AL:12560038,Si:1578e4,SI:1578e4,P:16744448,S:16777008,Cl:2093087,CL:2093087,Ar:8442339,AR:8442339,K:9388244,Ca:4062976,CA:4062976,Sc:15132390,SC:15132390,Ti:12567239,TI:12567239,V:10921643,Cr:9083335,CR:9083335,Mn:10255047,MN:10255047,Fe:14706227,FE:14706227,Co:15765664,CO:15765664,Ni:5296208,NI:5296208,Cu:13140019,CU:13140019,Zn:8224944,ZN:8224944,Ga:12750735,GA:12750735,Ge:6721423,GE:6721423,As:12419299,AS:12419299,Se:16752896,SE:16752896,Br:10889513,BR:10889513,Kr:6076625,KR:6076625,Rb:7351984,RB:7351984,Sr:65280,SR:65280,Y:9764863,Zr:9756896,ZR:9756896,Nb:7586505,NB:7586505,Mo:5551541,MO:5551541,Tc:3907230,TC:3907230,Ru:2396047,RU:2396047,Rh:687500,RH:687500,Pd:27013,PD:27013,Ag:12632256,AG:12632256,Cd:16767375,CD:16767375,In:10909043,IN:10909043,Sn:6717568,SN:6717568,Sb:10380213,SB:10380213,Te:13924864,TE:13924864,I:9699476,Xe:4366e3,XE:4366e3,Cs:5707663,CS:5707663,Ba:51456,BA:51456,La:7394559,LA:7394559,Ce:16777159,CE:16777159,Pr:14286791,PR:14286791,Nd:13107143,ND:13107143,Pm:10747847,PM:10747847,Sm:9437127,SM:9437127,Eu:6422471,EU:6422471,Gd:4587463,GD:4587463,Tb:3211207,TB:3211207,Dy:2097095,DY:2097095,Ho:65436,HO:65436,Er:58997,ER:58997,Tm:54354,TM:54354,Yb:48952,YB:48952,Lu:43812,LU:43812,Hf:5096191,HF:5096191,Ta:5089023,TA:5089023,W:2200790,Re:2522539,RE:2522539,Os:2516630,OS:2516630,Ir:1528967,IR:1528967,Pt:13684960,PT:13684960,Au:16765219,AU:16765219,Hg:12105936,HG:12105936,Tl:10900557,TL:10900557,Pb:5724513,PB:5724513,Bi:10375093,BI:10375093,Po:11230208,PO:11230208,At:7688005,AT:7688005,Rn:4358806,RN:4358806,Fr:4325478,FR:4325478,Ra:32e3,RA:32e3,Ac:7384058,AC:7384058,Th:47871,TH:47871,Pa:41471,PA:41471,U:36863,Np:33023,NP:33023,Pu:27647,PU:27647,Am:5528818,AM:5528818,Cm:7888099,CM:7888099,Bk:9064419,BK:9064419,Cf:10565332,CF:10565332,Es:11739092,ES:11739092,Fm:11739066,FM:11739066,Md:11734438,MD:11734438,No:12389767,NO:12389767,Lr:13041766,LR:13041766,Rf:13369433,RF:13369433,Db:13697103,DB:13697103,Sg:14221381,SG:14221381,Bh:14680120,BH:14680120,Hs:15073326,HS:15073326,Mt:15400998,MT:15400998},$3Dmol.elementColors.rasmol={H:16777215,He:16761035,HE:16761035,Li:11674146,LI:11674146,B:65280,C:13158600,N:9408511,O:15728640,F:14329120,Na:255,NA:255,Mg:2263842,MG:2263842,Al:8421520,AL:8421520,Si:14329120,SI:14329120,P:16753920,S:16762930,Cl:65280,CL:65280,Ca:8421520,CA:8421520,Ti:8421520,TI:8421520,Cr:8421520,CR:8421520,Mn:8421520,MN:8421520,Fe:16753920,FE:16753920,Ni:10824234,NI:10824234,Cu:10824234,CU:10824234,Zn:10824234,ZN:10824234,Br:10824234,BR:10824234,Ag:8421520,AG:8421520,I:10494192,Ba:16753920,BA:16753920,Au:14329120,AU:14329120},$3Dmol.elementColors.defaultColors=$3Dmol.elementColors.rasmol,$3Dmol.elementColors.greenCarbon=$.extend({},$3Dmol.elementColors.defaultColors),$3Dmol.elementColors.greenCarbon.C=65280,$3Dmol.elementColors.cyanCarbon=$.extend({},$3Dmol.elementColors.defaultColors),$3Dmol.elementColors.cyanCarbon.C=65535,$3Dmol.elementColors.magentaCarbon=$.extend({},$3Dmol.elementColors.defaultColors),$3Dmol.elementColors.magentaCarbon.C=16711935,$3Dmol.elementColors.yellowCarbon=$.extend({},$3Dmol.elementColors.defaultColors),$3Dmol.elementColors.yellowCarbon.C=16776960,$3Dmol.elementColors.whiteCarbon=$.extend({},$3Dmol.elementColors.defaultColors),$3Dmol.elementColors.whiteCarbon.C=16777215,$3Dmol.elementColors.orangeCarbon=$.extend({},$3Dmol.elementColors.defaultColors),$3Dmol.elementColors.orangeCarbon.C=16753920,$3Dmol.elementColors.purpleCarbon=$.extend({},$3Dmol.elementColors.defaultColors),$3Dmol.elementColors.purpleCarbon.C=8388736,$3Dmol.elementColors.blueCarbon=$.extend({},$3Dmol.elementColors.defaultColors),$3Dmol.elementColors.blueCarbon.C=255,$3Dmol.residues={},$3Dmol.residues.amino={ALA:13158600,ARG:1334015,ASN:56540,ASP:15075850,CYS:15132160,GLN:56540,GLU:15075850,GLY:15461355,HIS:8553170,ILE:1016335,LEU:1016335,LYS:1334015,MET:15132160,PHE:3289770,PRO:14456450,SER:16422400,THR:16422400,TRP:11819700,TYR:3289770,VAL:1016335,ASX:16738740,GLX:16738740},$3Dmol.residues.shapely={ALA:9240460,ARG:124,ASN:16743536,ASP:10485826,CYS:16777072,GLN:16731212,GLU:6684672,GLY:16777215,HIS:7368959,ILE:19456,LEU:4546117,LYS:4671416,MET:12099650,PHE:5459026,PRO:5395026,SER:16740418,THR:12078080,TRP:5195264,TYR:9203788,VAL:16747775,ASX:16711935,GLX:16711935},$3Dmol.residues.nucleic={A:10526975,G:16740464,I:8454143,C:16747595,T:10551200,U:16744576},$3Dmol.chains={},$3Dmol.chains.atom={A:12636415,B:11599792,C:16761032,D:16777088,E:16761087,F:11596016,G:16765040,H:15761536,I:16113331,J:49151,K:13458524,L:6737322,M:10145074,N:15631086,O:52945,P:65407,Q:3978097,R:139,S:12433259,T:25600,U:8388608,V:8421376,W:8388736,X:32896,Y:12092939,Z:11674146},$3Dmol.chains.hetatm={A:9478351,B:8441752,C:13602992,D:13619056,E:13603023,F:8437952,G:13607008,H:12603504,I:12955267,J:42959,K:11881548,L:5682578,M:9090346,N:12481214,O:46753,P:53103,Q:3447649,R:187,S:10854235,T:37888,U:11534336,V:11579392,W:11534512,X:45232,Y:15250963,Z:12726834},$3Dmol.builtinColorSchemes={ssPyMol:{prop:"ss",map:$3Dmol.ssColors.pyMol},ssJmol:{prop:"ss",map:$3Dmol.ssColors.Jmol},Jmol:{prop:"elem",map:$3Dmol.elementColors.Jmol},greenCarbon:{prop:"elem",map:$3Dmol.elementColors.greenCarbon},default:{prop:"elem",map:$3Dmol.elementColors.defaultColors},amino:{prop:"resn",map:$3Dmol.residues.amino},shapely:{prop:"resn",map:$3Dmol.residues.shapely},nucleic:{prop:"resn",map:$3Dmol.residues.nucleic},chain:{prop:"chain",map:$3Dmol.chains.atom},chainHetatm:{prop:"chain",map:$3Dmol.chains.hetatm}},$3Dmol.getColorFromStyle=function(e,t){var r=t.colorscheme;if(void 0!==$3Dmol.builtinColorSchemes[r])r=$3Dmol.builtinColorSchemes[r];else if("string"==typeof r&&r.endsWith("Carbon")){var n=r.substring(0,r.lastIndexOf("Carbon")).toLowerCase();if(void 0!==htmlColors[n]){var o=$.extend({},$3Dmol.elementColors.defaultColors);o.C=htmlColors[n],$3Dmol.builtinColorSchemes[r]={prop:"elem",map:o},r=$3Dmol.builtinColorSchemes[r]}}return n=e.color,void 0!==t.color&&"spectrum"!=t.color&&(n=t.color),void 0!==r?void 0!==$3Dmol.elementColors[r]?void 0!==(r=$3Dmol.elementColors[r])[e[r.prop]]&&(n=r.map[e[r.prop]]):void 0!==r[e[r.prop]]?n=r.map[e[r.prop]]:void 0!==r.prop&&void 0!==r.gradient?(o=r.prop,t=r.gradient,void 0!==$3Dmol.Gradient.builtinGradients[t]&&(t=new $3Dmol.Gradient.builtinGradients[t](r.min,r.max,r.mid)),r=t.range()||[-1,1],null!=(e=$3Dmol.getAtomProperty(e,o))&&(n=t.valueToHex(e,r))):void 0!==r.prop&&void 0!==r.map?(o=r.prop,e=$3Dmol.getAtomProperty(e,o),void 0!==r.map[e]&&(n=r.map[e])):void 0!==t.colorscheme[e.elem]?n=t.colorscheme[e.elem]:console.log("Could not interpret colorscheme "+r):void 0!==t.colorfunc&&(n=t.colorfunc(e)),$3Dmol.CC.color(n)},$3Dmol=$3Dmol||{},$3Dmol.subdivide_spline=function(e,t){var r,n=[],o=[];o.push(e[0]);var i=1;for(r=e.length-1;i<r;i++){var a=e[i],s=e[i+1];a.smoothen?((s=new $3Dmol.Vector3((a.x+s.x)/2,(a.y+s.y)/2,(a.z+s.z)/2)).atom=a.atom,o.push(s)):o.push(a)}for(o.push(e[e.length-1]),i=-1,e=o.length;i<=e-3;i++){r=o[-1===i?0:i],a=o[i+1],s=o[i+2];var l=o[i===e-3?e-1:i+3];if(r=(new $3Dmol.Vector3).subVectors(s,r).multiplyScalar(.5),l=(new $3Dmol.Vector3).subVectors(l,a).multiplyScalar(.5),!s.skip)for(var c=0;c<t;c++){var u=1/t*c;(u=new $3Dmol.Vector3(a.x+u*r.x+u*u*(-3*a.x+3*s.x-2*r.x-l.x)+u*u*u*(2*a.x-2*s.x+r.x+l.x),a.y+u*r.y+u*u*(-3*a.y+3*s.y-2*r.y-l.y)+u*u*u*(2*a.y-2*s.y+r.y+l.y),a.z+u*r.z+u*u*(-3*a.z+3*s.z-2*r.z-l.z)+u*u*u*(2*a.z-2*s.z+r.z+l.z))).atom=c<t/2?a.atom:s.atom,n.push(u)}}return n.push(o[o.length-1]),n},$3Dmol.drawCartoon=function(){var e=function(e,t,r,n,o,i){for(o=0,i=t.length;o<i;o++){var a=Math.round(o*(n.length-1)/i),s=$3Dmol.CC.color(n[a]);geoGroup=e.updateGeoGroup(2);var l=geoGroup.vertexArray,c=geoGroup.colorArray;a=geoGroup.faceArray;var u=geoGroup.vertices,h=3*u;for(l[h]=t[o].x,l[h+1]=t[o].y,l[h+2]=t[o].z,l[h+3]=r[o].x,l[h+4]=r[o].y,l[h+5]=r[o].z,l=0;6>l;++l)c[h+3*l]=s.r,c[h+1+3*l]=s.g,c[h+2+3*l]=s.b;0<o&&(u=[u,u+1,u-1,u-2],a[h=geoGroup.faceidx]=u[0],a[h+1]=u[1],a[h+2]=u[3],a[h+3]=u[1],a[h+4]=u[2],a[h+5]=u[3],geoGroup.faceidx+=6),geoGroup.vertices+=2}},t=function(e,t,r,n,o){0!==t.length&&(o=void 0===o?5:o,n=new $3Dmol.Geometry,$3Dmol.subdivide_spline(t,o),(t=new $3Dmol.LineBasicMaterial({linewidth:r})).vertexColors=!0,(t=new $3Dmol.Line(n,t)).type=$3Dmol.LineStrip,e.add(t))},r=function(t,r,n,o,i,a,s){if(s&&"default"!==s||(s="rectangle"),"edged"===s){if(!(2>r.length)){var l=r[0];r=r[r.length-1];var c=o||axisDIV;if(l=$3Dmol.subdivide_spline(l,c),r=$3Dmol.subdivide_spline(r,c),i){var u,h,f,d,p;c=[],s=[[0,2,-6,-8],[-4,-2,6,4],[7,-1,-5,3],[-3,5,1,-7]];var m=0;for(p=l.length;m<p;m++){var v=Math.round(m*(n.length-1)/p);if(v=$3Dmol.CC.color(n[v]),c.push(u=l[m]),c.push(u),c.push(h=r[m]),c.push(h),m<p-1){var g=l[m+1].clone().sub(l[m]);g=r[m].clone().sub(l[m]).cross(g).normalize().multiplyScalar(i)}if(c.push(f=l[m].clone().add(g)),c.push(f),c.push(d=r[m].clone().add(g)),c.push(d),void 0!==u.atom)var y=u.atom;var b=(o=t.updateGeoGroup(8)).vertexArray,x=o.colorArray,w=o.faceArray,D=3*(a=o.vertices);for(b[D]=u.x,b[D+1]=u.y,b[D+2]=u.z,b[D+3]=u.x,b[D+4]=u.y,b[D+5]=u.z,b[D+6]=h.x,b[D+7]=h.y,b[D+8]=h.z,b[D+9]=h.x,b[D+10]=h.y,b[D+11]=h.z,b[D+12]=f.x,b[D+13]=f.y,b[D+14]=f.z,b[D+15]=f.x,b[D+16]=f.y,b[D+17]=f.z,b[D+18]=d.x,b[D+19]=d.y,b[D+20]=d.z,b[D+21]=d.x,b[D+22]=d.y,b[D+23]=d.z,b=0;8>b;++b)x[D+3*b]=v.r,x[D+1+3*b]=v.g,x[D+2+3*b]=v.b;if(0<m)for(x=void 0!==_&&void 0!==y&&_.serial!==y.serial,b=0;4>b;b++)if(D=[a+s[b][0],a+s[b][1],a+s[b][2],a+s[b][3]],w[h=o.faceidx]=D[0],w[h+1]=D[1],w[h+2]=D[3],w[h+3]=D[1],w[h+4]=D[2],w[h+5]=D[3],o.faceidx+=6,y.clickable||_.clickable||y.hoverable||_.hoverable){d=c[D[3]].clone(),h=c[D[0]].clone();var C=c[D[2]].clone();if(f=c[D[1]].clone(),d.atom=c[D[3]].atom||null,C.atom=c[D[2]].atom||null,h.atom=c[D[0]].atom||null,f.atom=c[D[1]].atom||null,x){var $=d.clone().add(h).multiplyScalar(.5),S=C.clone().add(f).multiplyScalar(.5),A=d.clone().add(f).multiplyScalar(.5);0==b%2?((_.clickable||_.hoverable)&&(D=new $3Dmol.Triangle($,A,d),u=new $3Dmol.Triangle(S,C,A),d=new $3Dmol.Triangle(A,C,d),_.intersectionShape.triangle.push(D),_.intersectionShape.triangle.push(u),_.intersectionShape.triangle.push(d)),(y.clickable||y.hoverable)&&(D=new $3Dmol.Triangle(h,f,A),u=new $3Dmol.Triangle(f,S,A),d=new $3Dmol.Triangle(h,A,$),y.intersectionShape.triangle.push(D),y.intersectionShape.triangle.push(u),y.intersectionShape.triangle.push(d))):((y.clickable||y.hoverable)&&(D=new $3Dmol.Triangle($,A,d),u=new $3Dmol.Triangle(S,C,A),d=new $3Dmol.Triangle(A,C,d),y.intersectionShape.triangle.push(D),y.intersectionShape.triangle.push(u),y.intersectionShape.triangle.push(d)),(_.clickable||_.hoverable)&&(D=new $3Dmol.Triangle(h,f,A),u=new $3Dmol.Triangle(f,S,A),d=new $3Dmol.Triangle(h,A,$),_.intersectionShape.triangle.push(D),_.intersectionShape.triangle.push(u),_.intersectionShape.triangle.push(d)))}else(y.clickable||y.hoverable)&&(D=new $3Dmol.Triangle(h,f,d),u=new $3Dmol.Triangle(f,C,d),y.intersectionShape.triangle.push(D),y.intersectionShape.triangle.push(u))}o.vertices+=8;var _=y}for(n=c.length-8,b=(o=t.updateGeoGroup(8)).vertexArray,x=o.colorArray,w=o.faceArray,D=3*(a=o.vertices),h=o.faceidx,m=0;4>m;m++)c.push(c[2*m]),c.push(c[n+2*m]),i=c[2*m],t=c[n+2*m],b[D+6*m]=i.x,b[D+1+6*m]=i.y,b[D+2+6*m]=i.z,b[D+3+6*m]=t.x,b[D+4+6*m]=t.y,b[D+5+6*m]=t.z,x[D+6*m]=v.r,x[D+1+6*m]=v.g,x[D+2+6*m]=v.b,x[D+3+6*m]=v.r,x[D+4+6*m]=v.g,x[D+5+6*m]=v.b;D=[a,a+2,a+6,a+4],u=[a+1,a+5,a+7,a+3],w[h]=D[0],w[h+1]=D[1],w[h+2]=D[3],w[h+3]=D[1],w[h+4]=D[2],w[h+5]=D[3],w[h+6]=u[0],w[h+7]=u[1],w[h+8]=u[3],w[h+9]=u[1],w[h+10]=u[2],w[h+11]=u[3],o.faceidx+=12,o.vertices+=8}else e(t,l,r,n,c,a)}}else if(!("rectangle"!==s&&"oval"!==s&&"parabola"!==s||(v=s,y=r.length,2>y||2>r[0].length))){for(o=o||axisDIV,_=0;_<y;_++)r[_]=$3Dmol.subdivide_spline(r[_],o);if(g=r[0].length,i){for(a=[],o=[],s=[],b=0;b<y;b++)a.push(.25+1.5*Math.sqrt((y-1)*b-Math.pow(b,2))/(y-1)),o.push(.5),s.push(2*(Math.pow(b/y,2)-b/y)+.6);for(p=[],b=0;b<2*y-1;b++)p[b]=[b,b+1,b+1-2*y,b-2*y];for(p[2*y-1]=[b,b+1-2*y,b+1-4*y,b-2*y],t=t.updateGeoGroup(2*y*g),_=0;_<g;_++){for(b=Math.round(_*(n.length-1)/g),u=$3Dmol.CC.color(n[b]),x=c,D=m,c=[],m=[],h=[],void 0!==r[0][_].atom&&(w=r[0][_].atom,"oval"===v?l=a:"rectangle"===v?l=o:"parabola"===v&&(l=s)),l||(l=o),b=0;b<y;b++)f=_<g-1?r[b][_+1].clone().sub(r[b][_]):r[b][_-1].clone().sub(r[b][_]).negate(),d=b<y-1?r[b+1][_].clone().sub(r[b][_]):r[b-1][_].clone().sub(r[b][_]).negate(),h[b]=d.cross(f).normalize().multiplyScalar(i*l[b]);for(b=0;b<y;b++)c[b]=r[b][_].clone().add(h[b].clone().negate());for(b=0;b<y;b++)m[b]=r[b][_].clone().add(h[b]);for(C=t.vertexArray,d=t.colorArray,h=t.faceArray,$=3*(f=t.vertices),b=0;b<y;b++)C[$+3*b+0]=c[b].x,C[$+3*b+1]=c[b].y,C[$+3*b+2]=c[b].z;for(b=0;b<y;b++)C[$+3*b+0+3*y]=m[y-1-b].x,C[$+3*b+1+3*y]=m[y-1-b].y,C[$+3*b+2+3*y]=m[y-1-b].z;for(b=0;b<2*y;++b)d[$+3*b+0]=u.r,d[$+3*b+1]=u.g,d[$+3*b+2]=u.b;if(0<_){for(b=0;b<2*y;b++)u=[f+p[b][0],f+p[b][1],f+p[b][2],f+p[b][3]],h[d=t.faceidx]=u[0],h[d+1]=u[1],h[d+2]=u[3],h[d+3]=u[1],h[d+4]=u[2],h[d+5]=u[3],t.faceidx+=6;if(w.clickable||w.hoverable)for(b in(u=[]).push(new $3Dmol.Triangle(x[0],c[0],c[y-1])),u.push(new $3Dmol.Triangle(x[0],c[y-1],x[y-1])),u.push(new $3Dmol.Triangle(x[y-1],c[y-1],m[y-1])),u.push(new $3Dmol.Triangle(x[y-1],m[y-1],D[y-1])),u.push(new $3Dmol.Triangle(m[0],D[0],D[y-1])),u.push(new $3Dmol.Triangle(m[y-1],m[0],D[y-1])),u.push(new $3Dmol.Triangle(c[0],x[0],D[0])),u.push(new $3Dmol.Triangle(m[0],c[0],D[0])),u)w.intersectionShape.triangle.push(u[b])}t.vertices+=2*y}for(h=t.faceArray,f=t.vertices,_=0;_<y-1;_++)u=[_,_+1,2*y-2-_,2*y-1-_],h[d=t.faceidx]=u[0],h[d+1]=u[1],h[d+2]=u[3],h[d+3]=u[1],h[d+4]=u[2],h[d+5]=u[3],t.faceidx+=6;for(_=0;_<y-1;_++)u=[f-1-_,f-2-_,f-2*y+_+1,f-2*y+_],h[d=t.faceidx]=u[0],h[d+1]=u[1],h[d+2]=u[3],h[d+3]=u[1],h[d+4]=u[2],h[d+5]=u[3],t.faceidx+=6}else e(t,r[0],r[y-1],n,o,a)}},n=function(e,t){if(e&&t&&e.chain===t.chain){if(e.reschain===t.reschain&&(e.resi===t.resi||e.resi===t.resi-1))return!0;if(e.resi<t.resi){var r=e.x-t.x,n=e.y-t.y;if(16>r*r+n*n+(e=e.z-t.z)*e)return!0}}return!1},o=function(e,t,r,n,o){null!=t&&0!=t.vertices&&(o&&(t.initTypedArrays(),t.setUpNormals()),(o=new $3Dmol.MeshDoubleLambertMaterial).vertexColors=$3Dmol.FaceColors,"number"==typeof r&&0<=r&&1>r&&(o.transparent=!0,o.opacity=r),o.outline=n,t=new $3Dmol.Mesh(t,o),e.add(t))},i={C:!0,CA:!0,O:!0,P:!0,OP2:!0,O2P:!0,"O5'":!0,"O3'":!0,"C5'":!0,"C2'":!0,"O5*":!0,"O3*":!0,"C5*":!0,"C2*":!0,N1:!0,N3:!0},a={DA:!0,DG:!0,A:!0,G:!0},s={DT:!0,DC:!0,U:!0,C:!0,T:!0},l={DA:!0,DG:!0,A:!0,G:!0,DT:!0,DC:!0,U:!0,C:!0,T:!0},c=function(e,c,h,f,d,p,m){p=p||5,m=m||5;var v,g,y=new $3Dmol.Geometry(!0),b=new $3Dmol.Geometry(!0),x=[],w=[],D=1,C=!1,S={};for(z in $3Dmol.Gradient.builtinGradients)$3Dmol.Gradient.builtinGradients.hasOwnProperty(z)&&(S[z]=new $3Dmol.Gradient.builtinGradients[z](h[1],h[0]));var A=function(e,t){return h&&"spectrum"===t.color?t.colorscheme in S?S[t.colorscheme].valueToHex(e.resi):S.sinebow.valueToHex(e.resi):$3Dmol.getColorFromStyle(e,t).getHex()};for(g=0;g<p;g++)w[g]=[];var _=v=!1;g=0;var M=[];for(g in c){var z=c[g];if("C"===z.elem&&"CA"===z.atom){var T=n(E,z);T&&"s"===z.ss?v=!0:v&&(E&&L&&E.style.cartoon.arrows&&L.style.cartoon.arrows&&(E.ss="arrow end",L.ss="arrow start"),v=!1),T&&("h"===E.ss||"tube start"==E.ss)&&E.style.cartoon.tubes?!_&&"tube start"!=E.ss&&z.style.cartoon.tubes&&(z.ss="tube start",_=!0):_&&("tube start"===E.ss?E.ss="tube end":L&&L.style.cartoon.tubes&&(L.ss="tube end"),_=!1);var L=E,E=z}z&&z.atom in i&&M.push(z)}for(_&&E.style.cartoon.tubes&&(E.ss="tube end",_=!1),c=function(n){for(var i,a,s=0;!k&&s<p;s++)t(e,w[s],1,x,m);if(f&&0<w[0].length&&r(b,w,x,m,k,D,w.style),n){for(a=[],s=0;s<p;s++)a[s]=w[s][w[s].length-1];i=x[x.length-1]}for(w=[],s=0;s<p;s++)w[s]=[];if(x=[],n){for(s=0;s<p;s++)w[s].push(a[s]);x.push(i)}o(e,b,D,C,!0),o(e,y,D,C,!1),b=new $3Dmol.Geometry(!0),y=new $3Dmol.Geometry(!0)},E=void 0,L=0;L<M.length;L++)if(_=(g=(z=M[L]).resn.trim())in l,D=1,v=z.style.cartoon,E&&E.style.cartoon&&(D=E.style.cartoon.opacity),E&&E.style.cartoon&&E.style.cartoon.outline&&(C=E.style.cartoon.outline),!E||!E.style.cartoon||z.style.cartoon&&E.style.cartoon.opacity==z.style.cartoon.opacity||c(E.chain==z.chain),w.length&&w[0].length>3e4/p/m/2&&c(!0),"trace"===v.style){if(!z.hetflag&&("C"===z.elem&&"CA"===z.atom||_&&"P"===z.atom)){var F=A(z,v),k=$.isNumeric(v.thickness)?v.thickness:.4;if(n(E,z))if(F==I){var I=$3Dmol.CC.color(F);$3Dmol.GLDraw.drawCylinder(y,E,z,k,I,2,2)}else v=(new $3Dmol.Vector3).addVectors(E,z).multiplyScalar(.5),I=$3Dmol.CC.color(I),g=$3Dmol.CC.color(F),$3Dmol.GLDraw.drawCylinder(y,E,v,k,I,2,0),$3Dmol.GLDraw.drawCylinder(y,v,z,k,g,0,2);E=z,I=F}}else{if(z&&"C"===z.elem&&"CA"===z.atom||_&&("P"===z.atom||0==z.atom.indexOf("O5"))){if(O)if("tube end"===z.ss){var O=!1;g=new $3Dmol.Vector3(z.x,z.y,z.z),$3Dmol.GLDraw.drawCylinder(y,P,g,2,$3Dmol.CC.color(I),1,1),z.ss="h"}else{if(E.chain==z.chain&&"tube end"!==E.ss)continue;O=!1,E.ss="h",g=new $3Dmol.Vector3(E.x,E.y,E.z),$3Dmol.GLDraw.drawCylinder(y,P,g,2,$3Dmol.CC.color(I),1,1)}if(E&&(!n(E,z)||"tube start"===E.ss)){if("tube start"===E.ss){O=!0;var P=new $3Dmol.Vector3(E.x,E.y,E.z);E.ss="h"}if(N){g=B?(new $3Dmol.Vector3).addVectors(E,B).multiplyScalar(.5):new $3Dmol.Vector3(E.x,E.y,E.z),$3Dmol.GLDraw.drawCylinder(y,g,N,.4,$3Dmol.CC.color(N.color),0,2),u(w,p,!d,B,V,U,E,M,L),x.push(F);var N=g=null}for(g=0;!k&&g<p;g++)t(e,w[g],1,x,m);for(f&&0<w[0].length&&r(b,w,x,m,k,D,w.style),w=[],g=0;g<p;g++)w[g]=[];x=[]}if(void 0===E||E.rescode!=z.rescode||E.resi!=z.resi){N&&(E=(g=(new $3Dmol.Vector3).addVectors(E,z).multiplyScalar(.5)).clone().sub(N).multiplyScalar(.02),g.add(E),$3Dmol.GLDraw.drawCylinder(y,g,N,.4,$3Dmol.CC.color(N.color),0,2),N=g=null),F=A(z,v),x.push(F),k=$.isNumeric(v.thickness)?v.thickness:.4,E=z;var j=new $3Dmol.Vector3(E.x,E.y,E.z);j.resi=E.resi,I=F}!0!==z.clickable&&!0!==z.hoverable||void 0!==z.intersectionShape&&void 0!==z.intersectionShape.triangle||(z.intersectionShape={sphere:null,cylinder:[],line:[],triangle:[]})}else if(E&&"C"===E.elem&&"CA"===E.atom&&"O"===z.atom||_&&"P"===E.atom&&("OP2"===z.atom||"O2P"===z.atom)||_&&0==E.atom.indexOf("O5")&&0==z.atom.indexOf("C5")){var R=new $3Dmol.Vector3(z.x,z.y,z.z);if(R.resi=z.resi,"OP2"===z.atom||"O2P"===z.atom)var V=new $3Dmol.Vector3(z.x,z.y,z.z)}else if(_&&0==z.atom.indexOf("O3"))var B=new $3Dmol.Vector3(z.x,z.y,z.z);else("N1"===z.atom&&g in a||"N3"===z.atom&&g in s)&&((N=new $3Dmol.Vector3(z.x,z.y,z.z)).color=$3Dmol.getColorFromStyle(z,v).getHex());if(R&&j&&R.resi===j.resi){u(w,p,!d,j,R,U,E,M,L);var U=R;R=j=null,x.push(F)}}N&&(g=B?(new $3Dmol.Vector3).addVectors(E,B).multiplyScalar(.5):new $3Dmol.Vector3(E.x,E.y,E.z),$3Dmol.GLDraw.drawCylinder(y,g,N,.4,$3Dmol.CC.color(N.color),0,2),u(w,p,!d,B,V,U,E,M,L),x.push(F)),c()},u=function(e,t,r,n,o,i,a,s,l){if(n&&o&&a){var c=o.sub(n);c.normalize();var u=s[l];for(l+=1;l<s.length&&(u=s[l]).atom!=a.atom;l++);if((u=u?new $3Dmol.Vector3(u.x,u.y,u.z):new $3Dmol.Vector3(0,0,0)).sub(n),"arrow start"===a.ss&&(l=u.clone().multiplyScalar(.3).cross(o),n.add(l),l=u.clone().cross(c).normalize(),c.rotateAboutVector(l,.43)),a.style.cartoon.ribbon)l=a.style.cartoon.thickness||.4;else if(a.style.cartoon.width)l=a.style.cartoon.width;else if("c"===a.ss)l="P"===a.atom?.8:.5;else if("arrow start"===a.ss){l=1.3;var h=!0}else l="arrow end"===a.ss||"h"===a.ss&&a.style.cartoon.tubes||"tube start"===a.ss?.5:1.3;for(null!=i&&0>c.dot(i)&&c.negate(),c.multiplyScalar(l),l=0;l<t;l++)i=2*l/(t-1)-1,(i=new $3Dmol.Vector3(n.x+i*c.x,n.y+i*c.y,n.z+i*c.z)).atom=a,r&&"s"===a.ss&&(i.smoothen=!0),e[l].push(i);if(h)for(c.multiplyScalar(2),l=0;l<t;l++)i=2*l/(t-1)-1,(i=new $3Dmol.Vector3(n.x+i*c.x,n.y+i*c.y,n.z+i*c.z)).atom=a,i.smoothen=!1,i.skip=!0,e[l].push(i);return t=a.style.cartoon.style||"default",e.style?e.style!=t&&(console.log("Warning: a cartoon chain's strand-style is ambiguous"),e.style="default"):e.style=t,"arrow start"!==a.ss&&"arrow end"!==a.ss||(a.ss="s"),h}};return function(e,t,r,n){c(e,t,r,!0,!1,n=n||5,n)}}(),$3Dmol=$3Dmol||{},$3Dmol.CAP={NONE:0,FLAT:1,ROUND:2},$3Dmol.GLDraw=function(){var e={},t=function(){var e=new $3Dmol.Vector3;return function(t){e.set(t[0],t[1],t[2]);var r=e.x,n=e.y,o=e.z,i=Math.sqrt(r*r+n*n);return 1e-4>i?(t=0,i=1):(t=-r/i,i=n/i),n=-t*r+i*n,1e-4>(r=Math.sqrt(n*n+o*o))?(o=0,n=1):(o/=r,n/=r),(r=new Float32Array(9))[0]=i,r[1]=t,r[2]=0,r[3]=-t*n,r[4]=i*n,r[5]=o,r[6]=t*o,r[7]=-i*o,r[8]=n,r}}(),r=function(){var e,t,r=[],n=Math.pow(2,4),o=Math.pow(2,2),i=n/o;for(r[0]=new $3Dmol.Vector3(-1,0,0),r[i]=new $3Dmol.Vector3(0,0,1),r[2*i]=new $3Dmol.Vector3(1,0,0),r[3*i]=new $3Dmol.Vector3(0,0,-1),e=3;4>=e;e++){for(i=n/(o=Math.pow(2,e-1)),t=0;t<o-1;t++)r[i/2+t*i]=r[t*i].clone().add(r[(t+1)*i]).normalize();r[i/2+(t=o-1)*i]=r[t*i].clone().add(r[0]).normalize()}return r}(),n={cache:{},getVerticesForRadius:function(e,t,n){if(void 0!==this.cache[e]&&void 0!==this.cache[e][t+n])return this.cache[e][t+n];new $3Dmol.Vector3(0,1,0);for(var o,i=r.length,a=[],s=[],l=0;l<i;l++)a.push(r[l].clone().multiplyScalar(e)),a.push(r[l].clone().multiplyScalar(e)),o=r[l].clone().normalize(),s.push(o),s.push(o);l=[];var c,u,h=2*Math.PI,f=Math.PI;for(u=0;10>=u;u++){var d=0===u||10===u,p=5===u,m=[],v=[];for(c=0;c<=i;c++)if(p){var g=c<i?2*c:0;v.push(g+1),m.push(g)}else{o=c/i;var y=u/10;d&&0!==c?d&&m.push(a.length-1):c<i?((g=new $3Dmol.Vector3).x=-e*Math.cos(0+o*h)*Math.sin(0+y*f),g.y=1==t?0:e*Math.cos(0+y*f),g.z=e*Math.sin(0+o*h)*Math.sin(0+y*f),1e-5>Math.abs(g.x)&&(g.x=0),1e-5>Math.abs(g.y)&&(g.y=0),1e-5>Math.abs(g.z)&&(g.z=0),(o=t==$3Dmol.CAP.FLAT?new $3Dmol.Vector3(0,Math.cos(0+y*f),0):new $3Dmol.Vector3(g.x,g.y,g.z)).normalize(),a.push(g),s.push(o),m.push(a.length-1)):m.push(a.length-i)}p&&l.push(v),l.push(m)}return i={vertices:a,normals:s,verticesRows:l,w:i,h:10},e in this.cache||(this.cache[e]={}),this.cache[e][t+n]=i}};e.drawCylinder=function(e,r,o,i,a,s,l){if(r&&o){0;var c=l||s;a=a||{r:0,g:0,b:0};var u=[o.x,o.y,o.z];u[0]-=r.x,u[1]-=r.y,u[2]-=r.z,u=t(u);var h=n.getVerticesForRadius(i,l,"to"),f=h.w,d=h.h,p=c?d*f+2:2*f;e=e.updateGeoGroup(p);var m,v=h.vertices,g=h.normals,y=(h=h.verticesRows)[d/2],b=h[d/2+1],x=e.vertices,w=e.vertexArray,D=e.normalArray,C=e.colorArray,$=e.faceArray;for(m=0;m<f;++m){var S=2*m,A=u[0]*v[S].x+u[3]*v[S].y+u[6]*v[S].z,_=u[1]*v[S].x+u[4]*v[S].y+u[7]*v[S].z,M=u[5]*v[S].y+u[8]*v[S].z,z=3*(x+S);S=e.faceidx,w[z]=A+r.x,w[z+1]=_+r.y,w[z+2]=M+r.z,w[z+3]=A+o.x,w[z+4]=_+o.y,w[z+5]=M+o.z,D[z]=A,D[z+3]=A,D[z+1]=_,D[z+4]=_,D[z+2]=M,D[z+5]=M,C[z]=a.r,C[z+3]=a.r,C[z+1]=a.g,C[z+4]=a.g,C[z+2]=a.b,C[z+5]=a.b,$[S]=b[m]+x,$[S+1]=b[m+1]+x,$[S+2]=y[m]+x,$[S+3]=y[m]+x,$[S+4]=b[m+1]+x,$[S+5]=y[m+1]+x,e.faceidx+=6}if(c)for(c=s?d+1:d/2+1,_=l?0:d/2;_<c;_++)if(_!==d/2)for(y=_<=d/2?o:r,A=n.getVerticesForRadius(i,l,"to"),S=n.getVerticesForRadius(i,s,"from"),y===o?(v=A.vertices,g=A.normals,h=A.verticesRows):y==r&&(v=S.vertices,g=S.normals,h=S.verticesRows),A=0;A<f;A++){S=e.faceidx;var T=3*((b=h[_][A+1])+x),L=3*((m=h[_][A])+x),E=3*((M=h[_+1][A])+x),F=3*((z=h[_+1][A+1])+x),k=u[0]*v[b].x+u[3]*v[b].y+u[6]*v[b].z,I=u[0]*v[m].x+u[3]*v[m].y+u[6]*v[m].z,O=u[0]*v[M].x+u[3]*v[M].y+u[6]*v[M].z,P=u[0]*v[z].x+u[3]*v[z].y+u[6]*v[z].z,N=u[1]*v[b].x+u[4]*v[b].y+u[7]*v[b].z,j=u[1]*v[m].x+u[4]*v[m].y+u[7]*v[m].z,R=u[1]*v[M].x+u[4]*v[M].y+u[7]*v[M].z,V=u[1]*v[z].x+u[4]*v[z].y+u[7]*v[z].z,B=u[5]*v[b].y+u[8]*v[b].z,U=u[5]*v[m].y+u[8]*v[m].z,G=u[5]*v[M].y+u[8]*v[M].z,q=u[5]*v[z].y+u[8]*v[z].z;w[T]=k+y.x,w[L]=I+y.x,w[E]=O+y.x,w[F]=P+y.x,w[T+1]=N+y.y,w[L+1]=j+y.y,w[E+1]=R+y.y,w[F+1]=V+y.y,w[T+2]=B+y.z,w[L+2]=U+y.z,w[E+2]=G+y.z,w[F+2]=q+y.z,C[T]=a.r,C[L]=a.r,C[E]=a.r,C[F]=a.r,C[T+1]=a.g,C[L+1]=a.g,C[E+1]=a.g,C[F+1]=a.g,C[T+2]=a.b,C[L+2]=a.b,C[E+2]=a.b,C[F+2]=a.b,k=u[0]*g[b].x+u[3]*g[b].y+u[6]*g[b].z,I=u[0]*g[m].x+u[3]*g[m].y+u[6]*g[m].z,O=u[0]*g[M].x+u[3]*g[M].y+u[6]*g[M].z,P=u[0]*g[z].x+u[3]*g[z].y+u[6]*g[z].z,N=u[1]*g[b].x+u[4]*g[b].y+u[7]*g[b].z,j=u[1]*g[m].x+u[4]*g[m].y+u[7]*g[m].z,R=u[1]*g[M].x+u[4]*g[M].y+u[7]*g[M].z,V=u[1]*g[z].x+u[4]*g[z].y+u[7]*g[z].z,B=u[5]*g[b].y+u[8]*g[b].z,U=u[5]*g[m].y+u[8]*g[m].z,G=u[5]*g[M].y+u[8]*g[M].z,q=u[5]*g[z].y+u[8]*g[z].z,0===_?(D[T]=k,D[E]=O,D[F]=P,D[T+1]=N,D[E+1]=R,D[F+1]=V,D[T+2]=B,D[E+2]=G,D[F+2]=q,$[S]=b+x,$[S+1]=M+x,$[S+2]=z+x,e.faceidx+=3):_===c-1?(D[T]=k,D[L]=I,D[E]=O,D[T+1]=N,D[L+1]=j,D[E+1]=R,D[T+2]=B,D[L+2]=U,D[E+2]=G,$[S]=b+x,$[S+1]=m+x,$[S+2]=M+x,e.faceidx+=3):(D[T]=k,D[L]=I,D[F]=P,D[T+1]=N,D[L+1]=j,D[F+1]=V,D[T+2]=B,D[L+2]=U,D[F+2]=q,D[L]=I,D[E]=O,D[F]=P,D[L+1]=j,D[E+1]=R,D[F+1]=V,D[L+2]=U,D[E+2]=G,D[F+2]=q,$[S]=b+x,$[S+1]=m+x,$[S+2]=z+x,$[S+3]=m+x,$[S+4]=M+x,$[S+5]=z+x,e.faceidx+=6)}e.vertices+=p}},e.drawCone=function(e,n,o,i,a){if(n&&o){console.log(n),console.log(o),a=a||{r:0,g:0,b:0};var s=[o.x,o.y,o.z];s.x-=n.x,s.y-=n.y,s.z-=n.z;var l=t(s),c=r.length,u=(e=e.updateGeoGroup(c+2)).vertices,h=e.vertexArray,f=e.normalArray,d=e.colorArray,p=e.faceArray,m=3*u;for(s=new $3Dmol.Vector3(s[0],s[1],s[2]).normalize(),h[m]=n.x,h[m+1]=n.y,h[m+2]=n.z,f[m]=-s.x,f[m+1]=-s.y,f[m+2]=-s.z,d[m]=a.r,d[m+1]=a.g,d[m+2]=a.b,h[m+3]=o.x,h[m+4]=o.y,h[m+5]=o.z,f[m+3]=s.x,f[m+4]=s.y,f[m+5]=s.z,d[m+3]=a.r,d[m+4]=a.g,d[m+5]=a.b,m+=6,o=0;o<c;++o){var v=r[o].clone();v.multiplyScalar(i),s=l[0]*v.x+l[3]*v.y+l[6]*v.z;var g=l[1]*v.x+l[4]*v.y+l[7]*v.z;v=l[5]*v.y+l[8]*v.z,h[m]=s+n.x,h[m+1]=g+n.y,h[m+2]=v+n.z,f[m]=s,f[m+1]=g,f[m+2]=v,d[m]=a.r,d[m+1]=a.g,d[m+2]=a.b,m+=3}for(e.vertices+=c+2,n=e.faceidx,o=0;o<c;o++)i=u+2+o,a=u+2+(o+1)%c,p[n]=i,p[n+1]=a,p[n+2]=u,p[n+=3]=i,p[n+1]=a,p[n+2]=u+1,n+=3;e.faceidx+=6*c}};var o={cache:{},getVerticesForRadius:function(e){if(void 0!==this.cache[e])return this.cache[e];var t={vertices:[],verticesRows:[],normals:[]},r=16,n=10;1>e&&(r=10,n=8);var o,i,a=2*Math.PI,s=Math.PI;for(i=0;i<=n;i++){var l=[];for(o=0;o<=r;o++){var c=o/r,u=i/n,h={};h.x=-e*Math.cos(0+c*a)*Math.sin(0+u*s),h.y=e*Math.cos(0+u*s),h.z=e*Math.sin(0+c*a)*Math.sin(0+u*s),(c=new $3Dmol.Vector3(h.x,h.y,h.z)).normalize(),t.vertices.push(h),t.normals.push(c),l.push(t.vertices.length-1)}t.verticesRows.push(l)}return this.cache[e]=t}};return e.drawSphere=function(e,t,r,n){new $3Dmol.Vector3(t.x,t.y,t.z);for(var i=o.getVerticesForRadius(r),a=i.vertices,s=i.normals,l=(e=e.updateGeoGroup(a.length)).vertices,c=e.vertexArray,u=e.colorArray,h=e.faceArray,f=e.lineArray,d=e.normalArray,p=0,m=a.length;p<m;++p){var v=3*(l+p),g=a[p];c[v]=g.x+t.x,c[v+1]=g.y+t.y,c[v+2]=g.z+t.z,u[v]=n.r,u[v+1]=n.g,u[v+2]=n.b}for(e.vertices+=a.length,c=(i=i.verticesRows).length-1,n=0;n<c;n++)for(u=i[n].length-1,t=0;t<u;t++){p=e.faceidx,m=e.lineidx,g=3*(v=i[n][t+1]+l);var y=i[n][t]+l,b=3*y,x=i[n+1][t]+l,w=3*x,D=i[n+1][t+1]+l,C=3*D,$=s[v-l],S=s[y-l],A=s[x-l],_=s[D-l];Math.abs(a[v-l].y)===r?(d[g]=$.x,d[w]=A.x,d[C]=_.x,d[g+1]=$.y,d[w+1]=A.y,d[C+1]=_.y,d[g+2]=$.z,d[w+2]=A.z,d[C+2]=_.z,h[p]=v,h[p+1]=x,h[p+2]=D,f[m]=v,f[m+1]=x,f[m+2]=v,f[m+3]=D,f[m+4]=x,f[m+5]=D,e.faceidx+=3,e.lineidx+=6):Math.abs(a[x-l].y)===r?(d[g]=$.x,d[b]=S.x,d[w]=A.x,d[g+1]=$.y,d[b+1]=S.y,d[w+1]=A.y,d[g+2]=$.z,d[b+2]=S.z,d[w+2]=A.z,h[p]=v,h[p+1]=y,h[p+2]=x,f[m]=v,f[m+1]=y,f[m+2]=v,f[m+3]=x,f[m+4]=y,f[m+5]=x,e.faceidx+=3,e.lineidx+=6):(d[g]=$.x,d[b]=S.x,d[C]=_.x,d[g+1]=$.y,d[b+1]=S.y,d[C+1]=_.y,d[g+2]=$.z,d[b+2]=S.z,d[C+2]=_.z,d[b]=S.x,d[w]=A.x,d[C]=_.x,d[b+1]=S.y,d[w+1]=A.y,d[C+1]=_.y,d[b+2]=S.z,d[w+2]=A.z,d[C+2]=_.z,h[p]=v,h[p+1]=y,h[p+2]=D,h[p+3]=y,h[p+4]=x,h[p+5]=D,f[m]=v,f[m+1]=y,f[m+2]=v,f[m+3]=D,f[m+4]=y,f[m+5]=x,f[m+6]=x,f[m+7]=D,e.faceidx+=6,e.lineidx+=8)}},e}(),$3Dmol=$3Dmol||{},$3Dmol.GLModel=function(){function e(n,o){var s=[],l=[],c=null,u=null,h=!1,f=null,d=null,p=null,m={},v=new $3Dmol.Matrix4,g=!0,y=$3Dmol.elementColors.defaultColor,b=(o=o||{}).defaultcolors?o.defaultcolors:$3Dmol.elementColors.defaultColors,x=o.defaultSphereRadius?o.defaultSphereRadius:1.5,w=o.cartoonQuality?o.cartoonQuality:5,D=function(e,t){var n=x;return void 0!==t.radius?n=t.radius:r[e.elem]&&(n=r[e.elem]),void 0!==t.scale&&(n*=t.scale),n},C=function(e,t,r){var n=function(e,t){for(var r=null,n=-1,f=0,d=e.bonds.length;f<d;f++)if(e.bonds[f]!=t.index){l=e.bonds[f],c=s[l],u=new $3Dmol.Vector3(c.x,c.y,c.z),(h=u.clone()).sub(o),(a=h.clone()).cross(i);var p=a.lengthSq();if(p>n&&(r=a,.1<(n=p)))break}return r},o=new $3Dmol.Vector3(e.x,e.y,e.z),i=new $3Dmol.Vector3(t.x,t.y,t.z).clone(),a=null;if(i.sub(o),1===e.bonds.length)if(1===t.bonds.length)a=i.clone(),1e-4<Math.abs(a.x)?a.y+=1:a.x+=1;else{e=(r+1)%t.bonds.length;var l=t.bonds[e],c=s[l],u=new $3Dmol.Vector3(c.x,c.y,c.z),h=u.clone();h.sub(o),(a=h.clone()).cross(i)}else.01>(a=n(e,t)).lengthSq()&&(null!=(t=n(t,e))&&(a=t));return.01>a.lengthSq()&&(a=i.clone(),1e-4<Math.abs(a.x)?a.y+=1:a.x+=1),a.cross(i),a.normalize(),a},S=function(e,t,r,n,o,i){e[r]=n.x,e[r+1]=n.y,e[r+2]=n.z,t[r]=i.r,t[r+1]=i.g,t[r+2]=i.b,e[r+3]=o.x,e[r+4]=o.y,e[r+5]=o.z,t[r+3]=i.r,t[r+4]=i.g,t[r+5]=i.b},A=function(e,t){if(e.style.sphere){var r=e.style.sphere;if(!r.hidden){var n=$3Dmol.getColorFromStyle(e,r);if(r=D(e,r),(!0===e.clickable||e.hoverable)&&void 0!==e.intersectionShape){var o=new $3Dmol.Vector3(e.x,e.y,e.z);e.intersectionShape.sphere.push(new $3Dmol.Sphere(o,r))}$3Dmol.GLDraw.drawSphere(t,e,r,n)}}},_=function(e,t){if(e.style.sphere){var r=e.style.sphere;if(!r.hidden){var n=D(e,r);r=$3Dmol.getColorFromStyle(e,r);var o=(t=t.updateGeoGroup(1)).vertices,i=3*o,a=t.vertexArray,s=t.radiusArray;a[i]=e.x,a[i+1]=e.y,a[i+2]=e.z,(a=t.colorArray)[i]=r.r,a[i+1]=r.g,a[i+2]=r.b,s[o]=n,!0!==e.clickable&&!e.hoverable||void 0===e.intersectionShape||(r=new $3Dmol.Vector3(e.x,e.y,e.z),e.intersectionShape.sphere.push(new $3Dmol.Sphere(r,n))),t.vertices+=1}}},M=function(e,t,r,n){for(var o=(e=e.updateGeoGroup(4)).vertices,i=3*o,a=e.vertexArray,s=0;4>s;s++)a[i+3*s]=t.x,a[i+3*s+1]=t.y,a[i+3*s+2]=t.z;for(a=e.normalArray,t=e.colorArray,s=0;4>s;s++)t[i+3*s]=n.r,t[i+3*s+1]=n.g,t[i+3*s+2]=n.b;a[i+0]=-r,a[i+1]=r,a[i+2]=0,a[i+3]=-r,a[i+4]=-r,a[i+5]=0,a[i+6]=r,a[i+7]=-r,a[i+8]=0,a[i+9]=r,a[i+10]=r,a[i+11]=0,e.vertices+=4,(r=e.faceArray)[(n=e.faceidx)+0]=o,r[n+1]=o+1,r[n+2]=o+2,r[n+3]=o+2,r[n+4]=o+3,r[n+5]=o,e.faceidx+=6},z=function(e,t){if(e.style.sphere){var r=e.style.sphere;if(!r.hidden){var n=D(e,r);if(r=$3Dmol.getColorFromStyle(e,r),(!0===e.clickable||e.hoverable)&&void 0!==e.intersectionShape){var o=new $3Dmol.Vector3(e.x,e.y,e.z);e.intersectionShape.sphere.push(new $3Dmol.Sphere(o,n))}M(t,e,n,r)}}},T=function(e,t,r,n,o,i,a){i=(e=e.updateGeoGroup(4)).vertices,a=e.vertexArray;var s=e.colorArray,l=e.radiusArray,c=e.normalArray,u=o.r,h=o.g;o=o.b;for(var f=3*i,d=0;4>d;d++){if(a[f]=t.x,c[f]=r.x,s[f]=u,a[++f]=t.y,c[f]=r.y,s[f]=h,a[++f]=t.z,c[f]=r.z,2>d)s[f]=o;else{var p=-o;0==p&&(p=-1e-4),s[f]=p}f++}e.vertices+=4,l[i]=-n,l[i+1]=n,l[i+2]=-n,l[i+3]=n,(t=e.faceArray)[(r=e.faceidx)+0]=i,t[r+1]=i+1,t[r+2]=i+2,t[r+3]=i+2,t[r+4]=i+3,t[r+5]=i,e.faceidx+=6};this.getCrystData=function(){return m.cryst?m.cryst:null},this.getSymmetries=function(){return void 0===m.symmetries&&(m.symmetries=[v]),m.symmetries},this.setSymmetries=function(e){m.symmetries=void 0===e?[v]:e},this.getID=function(){return n},this.getNumFrames=function(){return null!=l.numFrames?l.numFrames:l.length};var L=function(e,t,r,n){return(e=t-e)<-r?t+n:e>r?t-n:t};this.setFrame=function(e){var t=this.getNumFrames();return new Promise((function(r,n){0==t&&r(),(0>e||e>=t)&&(e=t-1),null!=l.url?$3Dmol.getbin(l.url+"/traj/frame/"+e+"/"+l.path,null,"POST").then((function(e){e=new Float32Array(e,44);for(var t=0,n=0;n<s.length;n++)s[n].x=e[t++],s[n].y=e[t++],s[n].z=e[t++];if(c&&u&&c&&u)for(var o=.9*(e=c[0]),i=.9*(t=c[1]),a=.9*(n=c[2]),l=0;l<u.length;l++)for(var h=u[l],f=1;f<h.length;f++){var d=s[h[f][0]],p=s[h[f][1]];d.x=L(p.x,d.x,o,e),d.y=L(p.y,d.y,i,t),d.z=L(p.z,d.z,a,n)}r()})).catch(n):(s=l[e],r()),f=null}))},this.addFrame=function(e){l.push(e)},this.vibrate=function(e,t){t=t||1,e=e||10,e--;for(var r=1;r<=e;r++){for(var n=[],o=0;o<s.length;o++){var i=new $3Dmol.Vector3($3Dmol.getAtomProperty(s[o],"dx"),$3Dmol.getAtomProperty(s[o],"dy"),$3Dmol.getAtomProperty(s[o],"dz")),a=new $3Dmol.Vector3(s[o].x,s[o].y,s[o].z);for(var c in i.multiplyScalar(r*t/e),a.add(i),i={},s[o])i[c]=s[o][c];i.x=a.x,i.y=a.y,i.z=a.z,n.push(i)}l.push(n)}l.unshift(s)},this.setAtomDefaults=function(e){for(var r=0;r<e.length;r++){var o=e[r];o&&(o.style=o.style||t,o.color=o.color||b[o.elem]||y,o.model=n,o.clickable||o.hoverable)&&(o.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]})}},this.addMolData=function(e,t,r){if(r=r||{},e=$3Dmol.GLModel.parseMolData(e,t,r),g=!r.duplicateAssemblyAtoms,(t=e.modelData)&&(m=Array.isArray(t)?t[0]:t),c=e.box?e.box:null,0==l.length){for(t=0;t<e.length;t++)0!=e[t].length&&l.push(e[t]);l[0]&&(s=l[0])}else if(r.frames)for(t=0;t<e.length;t++)l.push(e[t]);else for(t=0;t<e.length;t++)this.addAtoms(e[t]);for(t=0;t<l.length;t++)this.setAtomDefaults(l[t],n);r.vibrate&&r.vibrate.frames&&r.vibrate.amplitude&&this.vibrate(r.vibrate.frames,r.vibrate.amplitude),r.style&&this.setStyle({},r.style)},this.setDontDuplicateAtoms=function(e){g=e},this.setModelData=function(e){m=e};var E=function(e,t){if(e==t)return!0;if("string"==typeof t&&"number"==typeof e&&(t=t.match(/(-?\d+)\s*-\s*(-?\d+)/))){var r=parseInt(t[1]),n=parseInt(t[2]);if(t&&e>=r&&e<=n)return!0}return!1};this.atomIsSelected=function(e,t){var r;if(void 0===t)return!0;var n,o=!!t.invert,i=!0;for(n in t)if("and"==n||"or"==n||"not"==n){if("not"==n){if(this.atomIsSelected(e,t[n])){i=!1;break}}else if("and"==n){var a=t[n];for(r=0;r<a.length;r++)if(!this.atomIsSelected(e,a[r])){i=!1;break}}else if("or"==n){for(i=t[n],a=!0,r=0;r<i.length;r++){if(this.atomIsSelected(e,i[r])){a=!0;break}a=!1}i=a}}else if("predicate"===n){if(!t.predicate(e)){i=!1;break}}else if("properties"==n&&e[n])for(var s in t.properties){if(void 0===e.properties[s]){i=!1;break}if(e.properties[s]!=t.properties[s]){i=!1;break}}else if(t.hasOwnProperty(n)&&"props"!=n&&"invert"!=n&&"model"!=n&&"byres"!=n&&"expand"!=n&&"within"!=n&&"and"!=n&&"or"!=n&&"not"!=n){if(void 0===e[n]){i=!1;break}if(a=!1,"bonds"===n){if((r=t[n])!=e.bonds.length){i=!1;break}}else if($.isArray(t[n])){var l=t[n],c=e[n];for(r=0;r<l.length;r++)if(E(c,l[r])){a=!0;break}if(!a){i=!1;break}}else if(r=t[n],!E(e[n],r)){i=!1;break}}return o?!i:i},this.selectedAtoms=function(e,t){var r,n=[];e=e||{},t||(t=s);for(var o=t.length,i=0;i<o;i++)(r=t[i])&&this.atomIsSelected(r,e)&&n.push(r);if(e.hasOwnProperty("expand")){if(0>=(o=parseFloat(e.expand)))o=n;else{for(i=$3Dmol.getExtent(n),r=[[],[],[]],t=0;3>t;t++)r[0][t]=i[0][t]-o,r[1][t]=i[1][t]+o,r[2][t]=i[2][t];for(o=[],t=0;t<s.length;t++){var a=s[t].x,l=s[t].y,c=s[t].z;a>=r[0][0]&&a<=r[1][0]&&l>=r[0][1]&&l<=r[1][1]&&c>=r[0][2]&&c<=r[1][2]&&(a>=i[0][0]&&a<=i[1][0]&&l>=i[0][1]&&l<=i[1][1]&&c>=i[0][2]&&c<=i[1][2]||o.push(s[t]))}}for(a=n.length,i=0;i<o.length;i++)for(var u=0;u<a;u++)(t=F(o[i],n[u]))<(r=Math.pow(e.expand,2))&&0<t&&n.push(o[i])}if(e.hasOwnProperty("within")&&e.within.hasOwnProperty("sel")&&e.within.hasOwnProperty("distance")){for(a=this.selectedAtoms(e.within.sel,s),o={},i=0;i<a.length;i++)for(u=0;u<n.length;u++)(t=F(a[i],n[u]))<(r=Math.pow(parseFloat(e.within.distance),2))&&0<t&&(o[u]=1);if(i=[],e.within.invert)for(u=0;u<n.length;u++)o[u]||i.push(n[u]);else for(u in o)i.push(n[u]);n=i}if(e.hasOwnProperty("byres"))for(e={},t=[],o=[],i=0;i<n.length;i++)if(a=(r=n[i]).chain,l=r.resi,void 0===e[a]&&(e[a]={}),r.hasOwnProperty("resi")&&void 0===e[a][l])for(e[a][l]=!0,o.push(r);0<o.length;)if(a=(r=o.pop()).chain,l=r.resi,void 0===t[r.index])for(t[r.index]=!0,u=0;u<r.bonds.length;u++)void 0===t[(c=s[r.bonds[u]]).index]&&c.hasOwnProperty("resi")&&c.chain==a&&c.resi==l&&(o.push(c),n.push(c));return n};var F=function(e,t){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)+Math.pow(t.z-e.z,2)};this.addAtoms=function(e){f=null;var r,o=s.length,i=[];for(r=0;r<e.length;r++)void 0===e[r].index&&(e[r].index=r),void 0===e[r].serial&&(e[r].serial=r),i[e[r].index]=o+r;for(r=0;r<e.length;r++){var a=i[(o=e[r]).index],l=$.extend(!1,{},o);l.index=a,l.bonds=[],l.bondOrder=[],l.model=n,l.style=l.style||t,void 0===l.color&&(l.color=b[l.elem]||y),a=o.bonds?o.bonds.length:0;for(var c=0;c<a;c++){var u=i[o.bonds[c]];void 0!==u&&(l.bonds.push(u),l.bondOrder.push(o.bondOrder?o.bondOrder[c]:1))}s.push(l)}},this.removeAtoms=function(e){f=null;var t,r=[];for(t=0;t<e.length;t++)r[e[t].index]=!0;for(e=[],t=0;t<s.length;t++){var n=s[t];r[n.index]||e.push(n)}s=[],this.addAtoms(e)},this.setStyle=function(t,r,n){for(var o in void 0===r&&void 0===n&&(r=t,t={}),t)e.validAtomSelectionSpecs.hasOwnProperty(o)||console.log("Unknown selector "+o);for(o in r)e.validAtomStyleSpecs.hasOwnProperty(o)||console.log("Unknown style "+o);var i=!1,a=function(e){for(var a=c.selectedAtoms(t,e),s=0;s<e.length;s++)e[s]&&(e[s].capDrawn=!1);for(s=0;s<a.length;s++)for(o in i=!0,(a[s].clickable||a[s].hoverable)&&(a[s].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),n||(a[s].style={}),r)if(r.hasOwnProperty(o))for(var l in a[s].style[o]=a[s].style[o]||{},r[o])a[s].style[o][l]=r[o][l]},c=this;a(s);for(var u=0;u<l.length;u++)l[u]!==s&&a(l[u]);i&&(f=null)},this.setClickable=function(t,r,n){for(var o in t)e.validAtomSelectionSpecs.hasOwnProperty(o)||console.log("Unknown selector "+o);if(r=!!r,n&&"function"!=typeof n)console.log("Callback is not a function");else{var i=(o=this.selectedAtoms(t,s)).length;for(t=0;t<i;t++)o[t].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},o[t].clickable=r,n&&(o[t].callback=n);0<i&&(f=null)}},this.setHoverable=function(t,r,n,o){for(var i in t)e.validAtomSelectionSpecs.hasOwnProperty(i)||console.log("Unknown selector "+i);if(r=!!r,n&&"function"!=typeof n)console.log("Hover_callback is not a function");else if(o&&"function"!=typeof o)console.log("Unhover_callback is not a function");else{var a=(i=this.selectedAtoms(t,s)).length;for(t=0;t<a;t++)i[t].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},i[t].hoverable=r,n&&(i[t].hover_callback=n),o&&(i[t].unhover_callback=o);0<a&&(f=null)}},this.setColorByElement=function(e,t){var r;if((r=null!==f)&&(r=p,r=t&&r?JSON.stringify(t)==JSON.stringify(r):t==r),!r){p=t;var n=this.selectedAtoms(e,n);for(0<n.length&&(f=null),e=0;e<n.length;e++)void 0!==t[(r=n[e]).elem]&&(r.color=t[r.elem])}},this.setColorByProperty=function(e,t,r,n){var o=this.selectedAtoms(e,o);for(p=null,0<o.length&&(f=null),void 0!==$3Dmol.Gradient.builtinGradients[r]&&(r=new $3Dmol.Gradient.builtinGradients[r]),n||(n=r.range()),n||(n=$3Dmol.getPropertyRange(o,t)),e=0;e<o.length;e++){var i=o[e];null!=$3Dmol.getAtomProperty(i,t)&&(i.color=r.valueToHex(parseFloat(i.properties[t]),n))}},this.setColorByFunction=function(e,t){var r=this.selectedAtoms(e,r);if("function"==typeof t)for(p=null,0<r.length&&(f=null),i=0;i<r.length;i++)a=r[i],a.color=t(a)},this.toCDObject=function(e){var t={a:[],b:[]};e&&(t.s=[]);for(var r=0;r<s.length;r++){var n={},o=s[r];if(n.x=o.x,n.y=o.y,n.z=o.z,"C"!=o.elem&&(n.l=o.elem),e){for(var i=0;i<t.s.length&&JSON.stringify(o.style)!==JSON.stringify(t.s[i]);)i++;i===t.s.length&&t.s.push(o.style),0!==i&&(n.s=i)}for(t.a.push(n),n=0;n<o.bonds.length;n++){i=r;var a=o.bonds[n];i>=a||(i={b:i,e:a},1!=(a=o.bondOrder[n])&&(i.o=a),t.b.push(i))}}return t},this.globj=function(e,t){if(null===f){var r=s,n=t;n=n||{};var o=new $3Dmol.Object3D,i=[],a={},l={},c=A;if(n.supportsImposters){c=z;var u=new $3Dmol.Geometry(!0);u.imposter=!0;var p=new $3Dmol.Geometry(!0,!0);p.imposter=!0,p.sphereGeometry=new $3Dmol.Geometry(!0),p.sphereGeometry.imposter=!0,p.drawnCaps={}}else n.supportsAIA?(c=_,(u=new $3Dmol.Geometry(!1,!0,!0)).instanced=!0):u=new $3Dmol.Geometry(!0),p=new $3Dmol.Geometry(!0);var v,y,b={},x=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],$=0;for(y=r.length;$<y;$++){var L=r[$];if(L&&L.style){(L.clickable||L.hoverable)&&void 0===L.intersectionShape&&(L.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]});var E={line:void 0,cross:void 0,stick:void 0,sphere:void 0};for(v in E)E[v]=L.style[v]?L.style[v].opacity?parseFloat(L.style[v].opacity):1:void 0,b[v]?null!=E[v]&&b[v]!=E[v]&&(console.log("Warning: "+v+" opacity is ambiguous"),b[v]=1):b[v]=E[v];c(L,u);var F=L;if(F.style.clicksphere){var k=F.style.clicksphere;if(!k.hidden){var I=D(F,k);if((!0===F.clickable||F.hoverable)&&void 0!==F.intersectionShape){var O=new $3Dmol.Vector3(F.x,F.y,F.z);F.intersectionShape.sphere.push(new $3Dmol.Sphere(O,I))}}}var P=L,N=l;if(P.style.cross){var j=P.style.cross;if(!j.hidden){var R=j.linewidth||1;N[R]||(N[R]=new $3Dmol.Geometry);var V=N[R].updateGeoGroup(6),B=D(P,j),U=[[B,0,0],[-B,0,0],[0,B,0],[0,-B,0],[0,0,B],[0,0,-B]],G=P.clickable||P.hoverable;G&&void 0===P.intersectionShape&&(P.intersectionShape={sphere:[],cylinder:[],line:[]});for(var q=$3Dmol.getColorFromStyle(P,j),H=V.vertexArray,W=V.colorArray,Y=0;6>Y;Y++){var Z=3*V.vertices;if(V.vertices++,H[Z]=P.x+U[Y][0],H[Z+1]=P.y+U[Y][1],H[Z+2]=P.z+U[Y][2],W[Z]=q.r,W[Z+1]=q.g,W[Z+2]=q.b,G){var X=new $3Dmol.Vector3(U[Y][0],U[Y][1],U[Y][2]);X.multiplyScalar(.1),X.set(X.x+P.x,X.y+P.y,X.z+P.z),P.intersectionShape.line.push(X)}}}}var K=void 0,Q=void 0,J=void 0,ee=void 0,te=void 0,re=void 0,ne=L,oe=r,ie=a;if(ne.style.line){var ae=ne.style.line;if(!ae.hidden){var se=ae.linewidth||1;ie[se]||(ie[se]=new $3Dmol.Geometry);for(var le=ie[se].updateGeoGroup(6*ne.bonds.length),ce=le.vertexArray,ue=le.colorArray,he=0;he<ne.bonds.length;he++){var fe=oe[ne.bonds[he]];if(fe.style.line&&!(ne.serial>=fe.serial)){var de=new $3Dmol.Vector3(ne.x,ne.y,ne.z),pe=new $3Dmol.Vector3(fe.x,fe.y,fe.z),me=de.clone().add(pe).multiplyScalar(.5),ve=!1,ge=ne.clickable||ne.hoverable,ye=fe.clickable||fe.hoverable;(ge||ye)&&(ge&&(void 0===ne.intersectionShape&&(ne.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),ne.intersectionShape.line.push(de),ne.intersectionShape.line.push(me)),ye&&(void 0===fe.intersectionShape&&(fe.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),fe.intersectionShape.line.push(me),fe.intersectionShape.line.push(pe)));var be=$3Dmol.getColorFromStyle(ne,ne.style.line),xe=$3Dmol.getColorFromStyle(fe,fe.style.line);if(ne.bondStyles&&ne.bondStyles[he]){var we=ne.bondStyles[he];if(!we.iswire)continue;we.radius&&(bondR=we.radius),we.singleBond&&(ve=!0),void 0!==we.color1&&(be=$3Dmol.CC.color(we.color1)),void 0!==we.color2&&(xe=$3Dmol.CC.color(we.color2))}var De=3*le.vertices;if(1<ne.bondOrder[he]&&4>ne.bondOrder[he]&&!ve){var Ce=C(ne,fe,he),$e=pe.clone();$e.sub(de),2==ne.bondOrder[he]?(Ce.multiplyScalar(.1),(ee=de.clone()).add(Ce),(J=de.clone()).sub(Ce),(Q=ee.clone()).add($e),(K=J.clone()).add($e),be==xe?(le.vertices+=4,S(ce,ue,De,ee,Q,be),S(ce,ue,De+6,J,K,be)):(le.vertices+=8,$e.multiplyScalar(.5),(te=ee.clone()).add($e),(re=J.clone()).add($e),S(ce,ue,De,ee,te,be),S(ce,ue,De+6,te,Q,xe),S(ce,ue,De+12,J,re,be),S(ce,ue,De+18,re,K,xe))):3==ne.bondOrder[he]&&(Ce.multiplyScalar(.1),(ee=de.clone()).add(Ce),(J=de.clone()).sub(Ce),(Q=ee.clone()).add($e),(K=J.clone()).add($e),be==xe?(le.vertices+=6,S(ce,ue,De,de,pe,be),S(ce,ue,De+6,ee,Q,be),S(ce,ue,De+12,J,K,be)):(le.vertices+=12,$e.multiplyScalar(.5),(te=ee.clone()).add($e),(re=J.clone()).add($e),S(ce,ue,De,de,me,be),S(ce,ue,De+6,me,pe,xe),S(ce,ue,De+12,ee,te,be),S(ce,ue,De+18,te,Q,xe),S(ce,ue,De+24,J,re,be),S(ce,ue,De+30,re,K,xe)))}else be==xe?(le.vertices+=2,S(ce,ue,De,de,pe,be)):(le.vertices+=4,S(ce,ue,De,de,me,be),S(ce,ue,De+6,me,pe,xe))}}}}var Se=void 0,Ae=void 0,_e=void 0,Me=void 0,ze=void 0,Te=void 0,Le=void 0,Ee=void 0,Fe=void 0,ke=void 0,Ie=void 0,Oe=void 0,Pe=void 0,Ne=L,je=r,Re=p;if(Ne.style.stick){var Ve=Ne.style.stick;if(!Ve.hidden){var Be=Ve.radius||.25,Ue=Ve.singleBonds||!1,Ge=0,qe=0,He=$3Dmol.getColorFromStyle(Ne,Ve);!Ne.capDrawn&&4>Ne.bonds.length&&(Ge=2);var We=$3Dmol.GLDraw.drawCylinder;Re.imposter&&(We=T);for(var Ye=0;Ye<Ne.bonds.length;Ye++){var Ze=je[Ne.bonds[Ye]];if(Ne.serial<Ze.serial){var Xe=Ze.style;if(Xe.stick&&!Xe.stick.hidden){var Ke=$3Dmol.getColorFromStyle(Ze,Xe.stick);if(_e=Be,Oe=Ue,Ne.bondStyles&&Ne.bondStyles[Ye]){if((Pe=Ne.bondStyles[Ye]).iswire)continue;Pe.radius&&(_e=Pe.radius),Pe.singleBond&&(Oe=!0),void 0!==Pe.color1&&(He=$3Dmol.CC.color(Pe.color1)),void 0!==Pe.color2&&(Ke=$3Dmol.CC.color(Pe.color2))}var Qe=new $3Dmol.Vector3(Ne.x,Ne.y,Ne.z),Je=new $3Dmol.Vector3(Ze.x,Ze.y,Ze.z);if(1===Ne.bondOrder[Ye]||Oe){if(!Ze.capDrawn&&4>Ze.bonds.length&&(qe=2),He!=Ke?(We(Re,Qe,Ae=(new $3Dmol.Vector3).addVectors(Qe,Je).multiplyScalar(.5),_e,He,Ge,0),We(Re,Ae,Je,_e,Ke,0,qe)):We(Re,Qe,Je,_e,He,Ge,qe),Te=Ne.clickable||Ne.hoverable,Le=Ze.clickable||Ze.hoverable,Te||Le){if(Ae||(Ae=(new $3Dmol.Vector3).addVectors(Qe,Je).multiplyScalar(.5)),Te){var et=new $3Dmol.Cylinder(Qe,Ae,_e),tt=new $3Dmol.Sphere(Qe,_e);Ne.intersectionShape.cylinder.push(et),Ne.intersectionShape.sphere.push(tt)}if(Le){var rt=new $3Dmol.Cylinder(Je,Ae,_e),nt=new $3Dmol.Sphere(Je,_e);Ze.intersectionShape.cylinder.push(rt),Ze.intersectionShape.sphere.push(nt)}}}else if(1<Ne.bondOrder[Ye]){var ot=0,it=0;_e!=Be&&(it=ot=2);var at=Je.clone();if(at.sub(Qe),ze=C(Ne,Ze,Ye),2==Ne.bondOrder[Ye]){Me=_e/2.5,(ze=C(Ne,Ze,Ye)).multiplyScalar(1.5*Me);var st=Qe.clone();st.add(ze);var lt=Qe.clone();lt.sub(ze);var ct=st.clone();ct.add(at);var ut=lt.clone();ut.add(at),He!=Ke?(Ae=(new $3Dmol.Vector3).addVectors(st,ct).multiplyScalar(.5),Se=(new $3Dmol.Vector3).addVectors(lt,ut).multiplyScalar(.5),We(Re,st,Ae,Me,He,ot,0),We(Re,Ae,ct,Me,Ke,0,it),We(Re,lt,Se,Me,He,ot,0),We(Re,Se,ut,Me,Ke,0,it)):(We(Re,st,ct,Me,He,ot,it),We(Re,lt,ut,Me,He,ot,it)),Te=Ne.clickable||Ne.hoverable,Le=Ze.clickable||Ze.hoverable,(Te||Le)&&(Ae||(Ae=(new $3Dmol.Vector3).addVectors(st,ct).multiplyScalar(.5)),Se||(Se=(new $3Dmol.Vector3).addVectors(lt,ut).multiplyScalar(.5)),Te&&(Ee=new $3Dmol.Cylinder(st,Ae,Me),Fe=new $3Dmol.Cylinder(lt,Se,Me),Ne.intersectionShape.cylinder.push(Ee),Ne.intersectionShape.cylinder.push(Fe)),Le&&(ke=new $3Dmol.Cylinder(ct,Ae,Me),Ie=new $3Dmol.Cylinder(ut,Se,Me),Ze.intersectionShape.cylinder.push(ke),Ze.intersectionShape.cylinder.push(Ie)))}else if(3==Ne.bondOrder[Ye]&&(Me=_e/4,ze.cross(at),ze.normalize(),ze.multiplyScalar(3*Me),(st=Qe.clone()).add(ze),(lt=Qe.clone()).sub(ze),(ct=st.clone()).add(at),(ut=lt.clone()).add(at),He!=Ke?(Ae=(new $3Dmol.Vector3).addVectors(st,ct).multiplyScalar(.5),Se=(new $3Dmol.Vector3).addVectors(lt,ut).multiplyScalar(.5),mp3=(new $3Dmol.Vector3).addVectors(Qe,Je).multiplyScalar(.5),We(Re,st,Ae,Me,He,ot,0),We(Re,Ae,ct,Me,Ke,0,it),We(Re,Qe,mp3,Me,He,Ge,0),We(Re,mp3,Je,Me,Ke,0,qe),We(Re,lt,Se,Me,He,ot,0),We(Re,Se,ut,Me,Ke,0,it)):(We(Re,st,ct,Me,He,ot,it),We(Re,Qe,Je,Me,He,Ge,qe),We(Re,lt,ut,Me,He,ot,it)),Te=Ne.clickable||Ne.hoverable,Le=Ze.clickable||Ze.hoverable,Te||Le)){if(Ae||(Ae=(new $3Dmol.Vector3).addVectors(st,ct).multiplyScalar(.5)),Se||(Se=(new $3Dmol.Vector3).addVectors(lt,ut).multiplyScalar(.5)),mp3||(mp3=(new $3Dmol.Vector3).addVectors(Qe,Je).multiplyScalar(.5)),Te){Ee=new $3Dmol.Cylinder(st.clone(),Ae.clone(),Me),Fe=new $3Dmol.Cylinder(lt.clone(),Se.clone(),Me);var ht=new $3Dmol.Cylinder(Qe.clone(),mp3.clone(),Me);Ne.intersectionShape.cylinder.push(Ee),Ne.intersectionShape.cylinder.push(Fe),Ne.intersectionShape.cylinder.push(ht)}if(Le){ke=new $3Dmol.Cylinder(ct.clone(),Ae.clone(),Me),Ie=new $3Dmol.Cylinder(ut.clone(),Se.clone(),Me);var ft=new $3Dmol.Cylinder(Je.clone(),mp3.clone(),Me);Ze.intersectionShape.cylinder.push(ke),Ze.intersectionShape.cylinder.push(Ie),Ze.intersectionShape.cylinder.push(ft)}}}}}}var dt=!1,pt=0,mt=!1;for(Ye=0;Ye<Ne.bonds.length;Ye++)Oe=Ue,Ne.bondStyles&&Ne.bondStyles[Ye]&&((Pe=Ne.bondStyles[Ye]).singleBond&&(Oe=!0),Pe.radius&&Pe.radius!=Be&&(mt=!0)),(Oe||1==Ne.bondOrder[Ye])&&pt++;mt?0<pt&&(dt=!0):0==pt&&0<Ne.bonds.length&&(dt=!0),dt&&(_e=Be,Re.imposter?M(Re.sphereGeometry,Ne,_e,He):$3Dmol.GLDraw.drawSphere(Re,Ne,_e,He))}}void 0===L.style.cartoon||L.style.cartoon.hidden||("spectrum"!==L.style.cartoon.color||"number"!=typeof L.resi||L.hetflag||(L.resi<x[0]&&(x[0]=L.resi),L.resi>x[1]&&(x[1]=L.resi)),i.push(L))}}if(0<i.length&&$3Dmol.drawCartoon(o,i,x,w),u&&0<u.vertices){if(u.initTypedArrays(),u.imposter)var vt=new $3Dmol.SphereImposterMaterial({ambient:0,vertexColors:!0,reflectivity:0});else if(u.instanced){var gt=new $3Dmol.Geometry(!0);$3Dmol.GLDraw.drawSphere(gt,{x:0,y:0,z:0},1,new $3Dmol.Color(.5,.5,.5)),gt.initTypedArrays(),vt=new $3Dmol.InstancedMaterial({sphereMaterial:new $3Dmol.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),sphere:gt})}else vt=new $3Dmol.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0});1>b.sphere&&0<=b.sphere&&(vt.transparent=!0,vt.opacity=b.sphere),gt=new $3Dmol.Mesh(u,vt),o.add(gt)}if(0<p.vertices){var yt=p.sphereGeometry;yt&&void 0!==yt.vertices&&0!=yt.vertices||(yt=null),p.initTypedArrays(),yt&&yt.initTypedArrays();var bt={ambient:0,vertexColors:!0,reflectivity:0};if(p.imposter)var xt=new $3Dmol.StickImposterMaterial(bt),wt=new $3Dmol.SphereImposterMaterial(bt);else xt=new $3Dmol.MeshLambertMaterial(bt),wt=new $3Dmol.MeshLambertMaterial(bt),xt.wireframe&&(p.setUpWireframe(),yt&&yt.setUpWireframe());1>b.stick&&0<=b.stick&&(xt.transparent=!0,xt.opacity=b.stick,wt.transparent=!0,wt.opacity=b.stick);var Dt=new $3Dmol.Mesh(p,xt);if(o.add(Dt),yt){var Ct=new $3Dmol.Mesh(yt,wt);o.add(Ct)}}for($ in a)if(a.hasOwnProperty($)){var $t=$,St=new $3Dmol.LineBasicMaterial({linewidth:$t,vertexColors:!0});1>b.line&&0<=b.line&&(St.transparent=!0,St.opacity=b.line),a[$].initTypedArrays();var At=new $3Dmol.Line(a[$],St,$3Dmol.LinePieces);o.add(At)}for($ in l)if(l.hasOwnProperty($)){$t=$;var _t=new $3Dmol.LineBasicMaterial({linewidth:$t,vertexColors:!0});1>b.cross&&0<=b.cross&&(_t.transparent=!0,_t.opacity=b.cross),l[$].initTypedArrays();var Mt=new $3Dmol.Line(l[$],_t,$3Dmol.LinePieces);o.add(Mt)}if(g&&m.symmetries&&0<m.symmetries.length){var zt,Tt=new $3Dmol.Object3D;for(zt=0;zt<m.symmetries.length;zt++){new $3Dmol.Object3D;var Lt=o.clone();Lt.matrix.copy(m.symmetries[zt]),Lt.matrixAutoUpdate=!1,Tt.add(Lt)}f=Tt}else f=o;d&&(e.remove(d),d=null),d=f.clone(),h&&(d.setVisible(!1),f.setVisible(!1)),e.add(d)}},this.removegl=function(e){d&&(void 0!==d.geometry&&d.geometry.dispose(),void 0!==d.material&&d.material.dispose(),e.remove(d),d=null),f=null},this.hide=function(){h=!0,d&&d.setVisible(!1),f&&f.setVisible(!1)},this.show=function(){h=!1,d&&d.setVisible(!0),f&&f.setVisible(!0)},this.addPropertyLabels=function(e,t,r,n){var o=this.selectedAtoms(t,o);for(t=$.extend(!0,{},n),n=0;n<o.length;n++){var i=o[n],a=null;void 0!==i[e]?a=String(i[e]):(i.properties[e],a=String(i.properties[e])),null!=a&&(t.position=i,r.addLabel(a,t))}},this.addResLabels=function(e,t,r){for(var n=this.selectedAtoms(e,n),o={},i=0;i<n.length;i++){var a=(e=n[i]).chain,s=e.resn+""+e.resi;o[a]||(o[a]={}),o[a][s]||(o[a][s]=[]),o[a][s].push(e)}for(a in r=$.extend(!0,{},r),o)if(o.hasOwnProperty(a)){var l=o[a];for(s in l)if(l.hasOwnProperty(s)){n=l[s];var c=new $3Dmol.Vector3(0,0,0);for(i=0;i<n.length;i++)e=n[i],c.x+=e.x,c.y+=e.y,c.z+=e.z;c.divideScalar(n.length),r.position=c,t.addLabel(s,r)}}};this.setCoordinatesFromURL=function(e,t){l=[];var r=this;return c&&function(){u=[];var e=new Int8Array(s.length);e.fill(0);for(var t=function(r,n,o){o.push([r,n]),n=s[r],e[r]=1;for(var i=0;i<n.bonds.length;i++){var a=n.bonds[i];s[a]&&!e[a]&&t(a,r,o)}},r=0;r<s.length;r++)if(s[r]&&!e[r]){var n=[];t(r,-1,n),u.push(n)}}(),new Promise((function(n,o){e.startsWith("http://")||(e="http://"+e),$.get(e+"/traj/numframes/"+t,(function(i){isNaN(parseInt(i))||(l.push(s),l.numFrames=i,l.url=e,l.path=t,r.setFrame(0).then((function(){n()})).catch(o))}))}))},this.setCoordinates=function(t,r){if(!t)return[];if(/\.gz$/.test(r=r||"")){r=r.replace(/\.gz$/,"");try{t=pako.inflate(t,{to:"string"})}catch(e){console.log(e)}}if({mdcrd:"",inpcrd:"",pdb:"",netcdf:""}.hasOwnProperty(r)){l=[];var n=s.length;for(t=e.parseCrd(t,r),r=0;r<t.length;){for(var o=[],i=0;i<n;i++){var a,c={};for(a in s[i])c[a]=s[i][a];o[i]=c,o[i].x=t[r++],o[i].y=t[r++],o[i].z=t[r++]}l.push(o)}return s=l[0],l}return[]},this.addAtomSpecs=function(t){for(var r=0;r<t.length;r++)e.validAtomSelectionSpecs.hasOwnProperty(t[r])&&e.validAtomSelectionSpecs.push(t[r])}}var t={line:{}},r={H:1.2,Li:1.82,LI:1.82,Na:2.27,NA:2.27,K:2.75,C:1.7,N:1.55,O:1.52,F:1.47,P:1.8,S:1.8,CL:1.75,Cl:1.75,BR:1.85,Br:1.85,SE:1.9,Se:1.9,ZN:1.39,Zn:1.39,CU:1.4,Cu:1.4,NI:1.63,Ni:1.63};e.validElements="H Li LI Na NA K C N O F P S CL Cl BR Br SE Se ZN Zn CU Cu NI Ni".split(" "),e.validAtomSpecs={resn:{type:"string",valid:!0},x:{type:"number",valid:!1,step:.1},y:{type:"number",valid:!1,step:.1},z:{type:"number",valid:!1,step:.1},color:{type:"color",gui:!0},surfaceColor:{type:"color",gui:!0},elem:{type:"element",gui:!0},hetflag:{type:"boolean",valid:!1},chain:{type:"string",gui:!0},resi:{type:"number",gui:!0},icode:{type:"number",valid:!1,step:.1},rescode:{type:"number",valid:!1,step:.1},serial:{type:"number",valid:!1,step:.1},atom:{type:"string",valid:!1},bonds:{type:"array",valid:!1},ss:{type:"string",valid:!1},singleBonds:{type:"boolean",valid:!1},bondOrder:{type:"array",valid:!1},properties:{type:"properties",valid:!1},b:{type:"number",valid:!1,step:.1},pdbline:{type:"string",valid:!1},clickable:{type:"boolean",valid:!1},callback:{type:"function",valid:!1},invert:{type:"boolean",valid:!1},reflectivity:{type:"number",gui:!0,step:.1},altLoc:{type:"invalid",valid:!1}},e.validAtomSelectionSpecs=function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}(e.validAtomSpecs,{model:{type:"string",valid:!1},bonds:{type:"string",valid:!1},predicate:{type:"string",valid:!1},invert:{type:"string",valid:!1},byres:{type:"string",valid:!1},expand:{type:"string",valid:!1},within:{type:"string",valid:!1},and:{type:"string",valid:!1},or:{type:"string",valid:!1},not:{type:"string",valid:!1}});var n={hidden:{type:"boolean",gui:!0},singleBonds:{type:"boolean",gui:!0},colorscheme:{type:"colorscheme",gui:!0},color:{type:"color",gui:!0},radius:{type:"number",gui:!0,step:.1,default:1.5,min:0}};return e.validAtomStyleSpecs={line:{validItems:{hidden:{type:"boolean",gui:!0},linewidth:{type:"number",gui:!0,step:.1,default:1},colorscheme:{type:"colorscheme",gui:!0},color:{type:"color",gui:!0}},gui:!0},cross:{validItems:{hidden:{type:"boolean",gui:!0},linewidth:{type:"number",gui:!1,step:.1,default:1,min:0},colorscheme:{type:"colorscheme",gui:!0},color:{type:"color",gui:!0},radius:{type:"number",gui:!0,step:.1,default:1,min:.1},scale:{type:"number",gui:!0,step:.1,default:1,min:0}},gui:!0},stick:{validItems:{hidden:{type:"boolean",gui:!0},colorscheme:{type:"colorscheme",gui:!0},color:{type:"color",gui:!0},radius:{type:"number",gui:!0,step:.1,default:.25,min:.1},singleBonds:{type:"boolean",gui:!0}},gui:!0},sphere:{validItems:n,gui:!0},cartoon:{validItems:{style:{validItems:["trace","oval","rectangle","parabola","edged"],gui:!0},color:{type:"color",gui:!0},arrows:{type:"boolean",gui:!0},ribbon:{type:"boolean",gui:!0},hidden:{type:"boolean",gui:!0},tubes:{type:"boolean",gui:!0},thickness:{type:"number",gui:!0,step:.1,default:1,min:0},width:{type:"number",gui:!0,step:.1,default:1,min:0},opacity:{type:"number",gui:!0,step:.1,default:1,min:0,max:1}},gui:!0},colorfunc:{validItems:null,valid:!1},clicksphere:{validItems:n}},e.validSurfaceSpecs={opacity:{type:"number",gui:!0,step:.1,default:1,min:0,max:1},colorscheme:{type:"colorscheme",gui:!0},color:{type:"color",gui:!0},voldata:{type:"number",gui:!1},volscheme:{type:"number",gui:!1},map:{type:"number",gui:!1}},e.validLabelResSpecs={font:{type:"string",gui:!0},fontSize:{type:"number",gui:!0,step:1,default:12,min:1},fontColor:{type:"color",gui:!0},fontOpacity:{type:"number",gui:!0,step:.1,default:1,min:0,max:1},borderThickness:{type:"number",gui:!0,step:.1,default:1,min:0},borderColor:{type:"color",gui:!0},borderOpacity:{type:"number",gui:!0,step:.1,default:1,min:0,max:1},backgroundColor:{type:"color",gui:!0},backgroundOpacity:{type:"number",gui:!0,step:.1,default:1,min:0,max:1},position:{type:"array",valid:!1},inFront:{type:"boolean",gui:!0},showBackground:{type:"boolean",gui:!0},fixed:{type:"boolean",gui:!0},alignment:{validItems:"topLeft topCenter topRight centerLeft center centerRight bottomLeft bottomCenter bottomRight".split(" "),gui:!0},scale:{type:"boolean",gui:!1}},e.parseCrd=function(e,t){var r,n=[],o=0;if("pdb"==t)for(r=e.indexOf("\nATOM");-1!=r;){for(;"\nATOM"==e.slice(r,r+5)||"\nHETATM"==e.slice(r,r+7);)n[o++]=parseFloat(e.slice(r+31,r+39)),n[o++]=parseFloat(e.slice(r+39,r+47)),n[o++]=parseFloat(e.slice(r+47,r+55)),r=e.indexOf("\n",r+54),"\nTER"==e.slice(r,r+4)&&(r=e.indexOf("\n",r+5));r=e.indexOf("\nATOM",r)}else"netcdf"==t?(e=new netcdfjs(e),n=[].concat.apply([],e.getDataVariable("coordinates"))):(r=e.indexOf("\n"),"inpcrd"==t&&(r=e.indexOf("\n",r+1)),n=(e=e.slice(r+1)).match(/\S+/g).map(parseFloat));return n},e.parseMolData=function(e,t,r){if(!e)return[];if(/\.gz$/.test(t=t||"")){t=t.replace(/\.gz$/,"");try{e=pako.inflate(e,{to:"string"})}catch(e){console.log(e)}}return void 0===$3Dmol.Parsers[t]&&(t=t.split(".").pop(),void 0===$3Dmol.Parsers[t]&&(console.log("Unknown format: "+t),t=e instanceof Uint8Array?"mmtf":e.match(/^@<TRIPOS>MOLECULE/gm)?"mol2":e.match(/^HETATM/gm)||e.match(/^ATOM/gm)?"pdb":e.match(/ITEM: TIMESTEP/gm)?"lammpstrj":e.match(/^.*\n.*\n.\s*(\d+)\s+(\d+)/gm)?"sdf":e.match(/^%VERSION\s+\VERSION_STAMP/gm)?"prmtop":"xyz",console.log("Best guess: "+t))),(0,$3Dmol.Parsers[t])(e,r)},e.setAtomDefaults=function(e,r){for(var n=0;n<e.length;n++){var o=e[n];o&&(o.style=o.style||t,o.color=o.color||ElementColors[o.elem]||defaultColor,o.model=r,o.clickable||o.hoverable)&&(o.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]})}},e}(),$3Dmol.GLShape=function(){function e(e){e=e||{},$3Dmol.ShapeIDCount++,this.boundingSphere=new $3Dmol.Sphere,this.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},o(this,e);var i=[],a=null,s=null,l=new $3Dmol.Geometry(!0),c=new $3Dmol.Geometry(!0);this.updateStyle=function(t){for(var r in t)e[r]=t[r];o(this,e)},this.addCustom=function(e){e.vertexArr=e.vertexArr||[],e.faceArr=e.faceArr||[],e.normalArr=e.normalArr||[],r(this,l,e)},this.addSphere=function(e){e.center=e.center||{x:0,y:0,z:0},e.radius=e.radius?$3Dmol.Math.clamp(e.radius,0,1/0):1.5,e.color=$3Dmol.CC.color(e.color),this.intersectionShape.sphere.push(new $3Dmol.Sphere(e.center,e.radius)),$3Dmol.GLDraw.drawSphere(l,e.center,e.radius,e.color),i.push({centroid:new $3Dmol.Vector3(e.center.x,e.center.y,e.center.z)}),e=l.updateGeoGroup(0),n(this.boundingSphere,i,e.vertexArray,e.vertices)},this.addBox=function(e){var t=e.dimensions||{w:1,h:1,d:1},o=t.w;"number"==typeof t.w&&(o={x:t.w,y:0,z:0});var a=t.h;"number"==typeof t.h&&(a={x:0,y:t.h,z:0});var s=t.d;"number"==typeof t.d&&(s={x:0,y:0,z:t.d}),null==(t=e.corner)&&(t=void 0!==e.center?{x:e.center.x-.5*(o.x+a.x+s.x),y:e.center.y-.5*(o.y+a.y+s.y),z:e.center.z-.5*(o.z+a.z+s.z)}:{x:0,y:0,z:0}),o=[{x:t.x,y:t.y,z:t.z},{x:t.x+o.x,y:t.y+o.y,z:t.z+o.z},{x:t.x+a.x,y:t.y+a.y,z:t.z+a.z},{x:t.x+o.x+a.x,y:t.y+o.y+a.y,z:t.z+o.z+a.z},{x:t.x+s.x,y:t.y+s.y,z:t.z+s.z},{x:t.x+o.x+s.x,y:t.y+o.y+s.y,z:t.z+o.z+s.z},{x:t.x+a.x+s.x,y:t.y+a.y+s.y,z:t.z+a.z+s.z},{x:t.x+o.x+a.x+s.x,y:t.y+o.y+a.y+s.y,z:t.z+o.z+a.z+s.z}],s=[],(a=[]).splice(a.length,0,o[0],o[1],o[2],o[3]),s.splice(s.length,0,0,2,1,1,2,3),t=4,a.splice(a.length,0,o[2],o[3],o[6],o[7]),s.splice(s.length,0,t+0,t+2,t+1,t+1,t+2,t+3),t+=4,a.splice(a.length,0,o[4],o[5],o[0],o[1]),s.splice(s.length,0,t+0,t+2,t+1,t+1,t+2,t+3),t+=4,a.splice(a.length,0,o[6],o[7],o[4],o[5]),s.splice(s.length,0,t+0,t+2,t+1,t+1,t+2,t+3),t+=4,a.splice(a.length,0,o[3],o[1],o[7],o[5]),s.splice(s.length,0,t+0,t+2,t+1,t+1,t+2,t+3),t+=4,a.splice(a.length,0,o[2],o[0],o[6],o[4]),s.splice(s.length,0,t+0,t+2,t+1,t+1,t+2,t+3),(e=$.extend({},e)).vertexArr=a,e.faceArr=s,e.normalArr=[],r(this,l,e),e=new $3Dmol.Vector3,i.push({centroid:e.addVectors(o[0],o[7]).multiplyScalar(.5)}),e=l.updateGeoGroup(0),n(this.boundingSphere,i,e.vertexArray,e.vertices)},this.addCylinder=function(e){e.start=e.start||{},e.end=e.end||{};var t=new $3Dmol.Vector3(e.start.x||0,e.start.y||0,e.start.z||0),r=new $3Dmol.Vector3(e.end.x,e.end.y||0,e.end.z||0);void 0===r.x&&(r.x=3);var o=e.radius||.1,a=$3Dmol.CC.color(e.color);this.intersectionShape.cylinder.push(new $3Dmol.Cylinder(t,r,o)),$3Dmol.GLDraw.drawCylinder(l,t,r,o,a,e.fromCap,e.toCap),e=new $3Dmol.Vector3,i.push({centroid:e.addVectors(t,r).multiplyScalar(.5)}),t=l.updateGeoGroup(0),n(this.boundingSphere,i,t.vertexArray,t.vertices)},this.addDashedCylinder=function(e){e.start=e.start||{},e.end=e.end||{},e.dashLength=e.dashLength||.25,e.gapLength=e.gapLength||.25;var t=new $3Dmol.Vector3(e.start.x||0,e.start.y||0,e.start.z||0),r=new $3Dmol.Vector3(e.end.x,e.end.y||0,e.end.z||0);void 0===r.x&&(r.x=3);var o=e.radius||.1,a=$3Dmol.CC.color(e.color),s=Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2)+Math.pow(t.z-r.z,2)),c=s/(e.gapLength+e.dashLength),u=new $3Dmol.Vector3(e.start.x||0,e.start.y||0,e.start.z||0);new $3Dmol.Vector3(e.end.x,e.end.y||0,e.end.z||0);for(var h=new $3Dmol.Vector3((r.x-t.x)/(s/e.gapLength),(r.y-t.y)/(s/e.gapLength),(r.z-t.z)/(s/e.gapLength)),f=new $3Dmol.Vector3((r.x-t.x)/(s/e.dashLength),(r.y-t.y)/(s/e.dashLength),(r.z-t.z)/(s/e.dashLength)),d=0;d<c;d++)s=new $3Dmol.Vector3(u.x+f.x,u.y+f.y,u.z+f.z),this.intersectionShape.cylinder.push(new $3Dmol.Cylinder(u,s,o)),$3Dmol.GLDraw.drawCylinder(l,u,s,o,a,e.fromCap,e.toCap),u=new $3Dmol.Vector3(s.x+h.x,s.y+h.y,s.z+h.z);e=new $3Dmol.Vector3,i.push({centroid:e.addVectors(t,r).multiplyScalar(.5)}),t=l.updateGeoGroup(0),n(this.boundingSphere,i,t.vertexArray,t.vertices)},this.addCurve=function(e){e.points=e.points||[],e.smooth=e.smooth||10,void 0===e.fromCap&&(e.fromCap=2),void 0===e.toCap&&(e.toCap=2);var t=$3Dmol.subdivide_spline(e.points,e.smooth);if(3>t.length)console.log("Too few points in addCurve");else{var r=e.radius||.1,n=$3Dmol.CC.color(e.color),o=0,i=t.length-1,a=t[0].distanceTo(t[1]),s=Math.ceil(2*r/a);for(e.toArrow&&(a={start:t[i-=s],end:t[t.length-1],radius:r,color:n,mid:1e-4},this.addArrow(a)),e.fromArrow&&(a={start:t[o+=s],end:t[0],radius:r,color:n,mid:1e-4},this.addArrow(a)),e=Math.ceil(t.length/2),r={radius:r,color:n,fromCap:2,toCap:2};o<i;o++)r.start=t[o],r.end=t[o+1],r.fromCap=2,r.toCap=2,o<e?(r.fromCap=2,r.toCap=0):(r.fromCap=o>e?0:2,r.toCap=2),this.addCylinder(r)}},this.addLine=function(e){e.start=e.start||{},e.end=e.end||{};var t=new $3Dmol.Vector3(e.start.x||0,e.start.y||0,e.start.z||0);void 0===(e=new $3Dmol.Vector3(e.end.x,e.end.y||0,e.end.z||0)).x&&(e.x=3);var r=l.updateGeoGroup(2),o=r.vertices,a=3*o,s=r.vertexArray;s[a]=t.x,s[a+1]=t.y,s[a+2]=t.z,s[a+3]=e.x,s[a+4]=e.y,s[a+5]=e.z,r.vertices+=2,(a=r.lineArray)[s=r.lineidx]=o,a[s+1]=o+1,r.lineidx+=2,r=new $3Dmol.Vector3,i.push({centroid:r.addVectors(t,e).multiplyScalar(.5)}),r=l.updateGeoGroup(0),n(this.boundingSphere,i,r.vertexArray,r.vertices)},this.addArrow=function(e){if(e.start=e.start||{},e.end=e.end||{},e.start=new $3Dmol.Vector3(e.start.x||0,e.start.y||0,e.start.z||0),e.dir instanceof $3Dmol.Vector3&&e.length instanceof number){var t=e.dir.clone().multiplyScalar(e.length).add(start);e.end=t}else e.end=new $3Dmol.Vector3(e.end.x,e.end.y||0,e.end.z||0),void 0===e.end.x&&(e.end.x=3);e.radius=e.radius||.1,e.radiusRatio=e.radiusRatio||1.618034,e.mid=0<e.mid&&1>e.mid?e.mid:.618034;var r=e.start,o=e.end,a=e.radius,s=e.radiusRatio,c=e.mid;if(r&&o){t=l.updateGeoGroup(51);var u=o.clone();u.sub(r).multiplyScalar(c);var h=r.clone().add(u);c=u.clone().negate(),this.intersectionShape.cylinder.push(new $3Dmol.Cylinder(r.clone(),h.clone(),a)),this.intersectionShape.sphere.push(new $3Dmol.Sphere(r.clone(),a));var f=[];f[0]=u.clone(),1e-4<Math.abs(f[0].x)?f[0].y+=1:f[0].x+=1,f[0].cross(u),f[0].normalize(),f[0]=f[0],f[4]=f[0].clone(),f[4].crossVectors(f[0],u),f[4].normalize(),f[8]=f[0].clone().negate(),f[12]=f[4].clone().negate(),f[2]=f[0].clone().add(f[4]).normalize(),f[6]=f[4].clone().add(f[8]).normalize(),f[10]=f[8].clone().add(f[12]).normalize(),f[14]=f[12].clone().add(f[0]).normalize(),f[1]=f[0].clone().add(f[2]).normalize(),f[3]=f[2].clone().add(f[4]).normalize(),f[5]=f[4].clone().add(f[6]).normalize(),f[7]=f[6].clone().add(f[8]).normalize(),f[9]=f[8].clone().add(f[10]).normalize(),f[11]=f[10].clone().add(f[12]).normalize(),f[13]=f[12].clone().add(f[14]).normalize(),f[15]=f[14].clone().add(f[0]).normalize();var d,p=t.vertices,m=t.vertexArray,v=t.faceArray,g=t.normalArray,y=t.lineArray,b=0;for(d=f.length;b<d;++b){var x=3*(p+3*b),w=f[b].clone().multiplyScalar(a).add(r),D=f[b].clone().multiplyScalar(a).add(h),C=f[b].clone().multiplyScalar(a*s).add(h);m[x]=w.x,m[x+1]=w.y,m[x+2]=w.z,m[x+3]=D.x,m[x+4]=D.y,m[x+5]=D.z,m[x+6]=C.x,m[x+7]=C.y,m[x+8]=C.z,0<b&&(x=new $3Dmol.Vector3(m[x-3],m[x-2],m[x-1]),w=o.clone(),D=h.clone(),C=new $3Dmol.Vector3(C.x,C.y,C.z),this.intersectionShape.triangle.push(new $3Dmol.Triangle(C,w,x)),this.intersectionShape.triangle.push(new $3Dmol.Triangle(x.clone(),D,C.clone())))}t.vertices+=48,m[x=3*t.vertices]=r.x,m[x+1]=r.y,m[x+2]=r.z,m[x+3]=h.x,m[x+4]=h.y,m[x+5]=h.z,m[x+6]=o.x,m[x+7]=o.y,m[x+8]=o.z,t.vertices+=3;var $,S,A=t.vertices-3,_=t.vertices-2,M=t.vertices-1,z=3*A,T=3*_,L=3*M;for(b=0,d=f.length-1;b<d;++b){var E=p+3*b;r=t.faceidx,o=t.lineidx,x=3*(a=E),w=3*(s=E+1),D=3*(h=E+2);var F=3*(m=E+4),k=3*(C=E+5),I=3*(E+=3),O=$=f[b],P=S=f[b+1];g[x]=O.x,g[w]=$.x,g[I]=S.x,g[x+1]=O.y,g[w+1]=$.y,g[I+1]=S.y,g[x+2]=O.z,g[w+2]=$.z,g[I+2]=S.z,g[w]=$.x,g[F]=P.x,g[I]=S.x,g[w+1]=$.y,g[F+1]=P.y,g[I+1]=S.y,g[w+2]=$.z,g[F+2]=P.z,g[I+2]=S.z,g[D]=$.x,g[k]=P.x,g[D+1]=$.y,g[k+1]=P.y,g[D+2]=$.z,g[k+2]=P.z,v[r]=a,v[r+1]=s,v[r+2]=E,v[r+3]=s,v[r+4]=m,v[r+5]=E,v[r+6]=a,v[r+7]=E,v[r+8]=A,v[r+9]=h,v[r+10]=_,v[r+11]=C,v[r+12]=h,v[r+13]=M,v[r+14]=C,y[o]=a,y[o+1]=s,y[o+2]=a,y[o+3]=E,y[o+4]=m,y[o+5]=E,y[o+6]=a,y[o+7]=E,y[o+8]=h,y[o+9]=s,y[o+10]=h,y[o+11]=C,y[o+12]=m,y[o+13]=C,y[o+14]=h,y[o+15]=M,y[o+16]=h,y[o+17]=C,y[o+18]=M,y[o+19]=C,t.faceidx+=15,t.lineidx+=20}p=[p+45,p+46,p+1,p,p+47,p+2],r=t.faceidx,o=t.lineidx,x=3*(a=p[0]),w=3*(s=p[1]),D=3*(h=p[4]),F=3*(m=p[2]),k=3*(C=p[5]),I=3*(E=p[3]),O=$=f[15],P=S=f[0],g[x]=O.x,g[w]=$.x,g[I]=S.x,g[x+1]=O.y,g[w+1]=$.y,g[I+1]=S.y,g[x+2]=O.z,g[w+2]=$.z,g[I+2]=S.z,g[w]=$.x,g[F]=P.x,g[I]=S.x,g[w+1]=$.y,g[F+1]=P.y,g[I+1]=S.y,g[w+2]=$.z,g[F+2]=P.z,g[I+2]=S.z,g[D]=$.x,g[k]=P.x,g[D+1]=$.y,g[k+1]=P.y,g[D+2]=$.z,g[k+2]=P.z,u.normalize(),c.normalize(),g[z]=c.x,g[T]=g[L]=u.x,g[z+1]=c.y,g[T+1]=g[L+1]=u.y,g[z+2]=c.z,g[T+2]=g[L+2]=u.z,v[r]=a,v[r+1]=s,v[r+2]=E,v[r+3]=s,v[r+4]=m,v[r+5]=E,v[r+6]=a,v[r+7]=E,v[r+8]=A,v[r+9]=h,v[r+10]=_,v[r+11]=C,v[r+12]=h,v[r+13]=M,v[r+14]=C,y[o]=a,y[o+1]=s,y[o+2]=a,y[o+3]=E,y[o+4]=m,y[o+5]=E,y[o+6]=a,y[o+7]=E,y[o+8]=h,y[o+9]=s,y[o+10]=h,y[o+11]=C,y[o+12]=m,y[o+13]=C,y[o+14]=h,y[o+15]=M,y[o+16]=h,y[o+17]=C,y[o+18]=M,y[o+19]=C,t.faceidx+=15,t.lineidx+=20}t=new $3Dmol.Vector3,i.push({centroid:t.addVectors(e.start,e.end).multiplyScalar(.5)}),e=l.updateGeoGroup(0),n(this.boundingSphere,i,e.vertexArray,e.vertices)},this.addIsosurface=function(e,t,n){var o,i=void 0!==t.isoval&&"number"==typeof t.isoval?t.isoval:0,a=!!t.voxel,s=void 0===t.smoothness?1:t.smoothness,c=e.size.x,u=e.size.y,h=e.size.z,f=new Int16Array(c*u*h),d=e.data,p=0;for(o=f.length;p<o;++p)f[p]=-1;for(f=new Uint8Array(c*u*h),p=0,o=d.length;p<o;++p)0<(0<=i?d[p]-i:i-d[p])&&(f[p]|=2);if(i=[],d=[],$3Dmol.MarchingCube.march(f,i,d,{fulltable:!0,voxel:a,unitCube:e.unit,origin:e.origin,matrix:e.matrix,nX:c,nY:u,nZ:h}),!a&&0<s&&$3Dmol.MarchingCube.laplacianSmooth(s,i,d),a=[],s=[],c=[],t.selectedRegion&&void 0===t.coords&&(t.coords=t.selectedRegion),void 0!==t.coords){u=t.coords[0].x,h=t.coords[0].y,f=t.coords[0].z,o=t.coords[0].x;var m=t.coords[0].y,v=t.coords[0].z;for(p=0;p<t.coords.length;p++)t.coords[p].x>u?u=t.coords[p].x:t.coords[p].x<o&&(o=t.coords[p].x),t.coords[p].y>h?h=t.coords[p].y:t.coords[p].y<m&&(m=t.coords[p].y),t.coords[p].z>f?f=t.coords[p].z:t.coords[p].z<v&&(v=t.coords[p].z);var g=2;for(void 0!==t.radius&&(g=t.radius),void 0!==t.selectedOffset&&(g=t.selectedOffset),void 0!==t.seldist&&(g=t.seldist),o-=g,u+=g,m-=g,h+=g,v-=g,f+=g,p=0;p<i.length;p++){var y;if(y=i[p].x>o&&i[p].x<u&&i[p].y>m&&i[p].y<h&&i[p].z>v&&i[p].z<f)e:{y=i[p];for(var b=t.coords,x=g,w=0;w<b.length;w++){var D=b[w];if(Math.sqrt(Math.pow(D.x-y.x,2)+Math.pow(D.y-y.y,2)+Math.pow(D.z-y.z,2))<=x){y=!0;break e}}y=!1}y?(a.push(s.length),s.push(i[p])):a.push(-1)}for(p=0;p+2<d.length;p+=3)-1!==a[d[p]]&&-1!==a[d[p+1]]&&-1!==a[d[p+2]]&&(c.push(d[p]-(d[p]-a[d[p]])),c.push(d[p+1]-(d[p+1]-a[d[p+1]])),c.push(d[p+2]-(d[p+2]-a[d[p+2]])));i=s,d=c}for(r(this,l,{vertexArr:i,faceArr:d,normalArr:[],clickable:t.clickable,hoverable:t.hoverable}),this.updateStyle(t),p=new $3Dmol.Vector3(e.origin.x,e.origin.y,e.origin.z),d=new $3Dmol.Vector3(e.size.x*e.unit.x,e.size.y*e.unit.y,e.size.z*e.unit.z),e=new $3Dmol.Vector3(0,0,0),t=p.clone(),d=p.clone().add(d),p=0;p<i.length;p++)e.add(i[p]),t.max(i[p]),d.min(i[p]);e.divideScalar(i.length),p=e.distanceTo(d),i=e.distanceTo(t),this.boundingSphere.center=e,this.boundingSphere.radius=Math.max(p,i),"function"==typeof n&&n()},this.addVolumetricData=function(e,t,r){e=new $3Dmol.VolumeData(e,t),this.addIsosurface(e,r)},this.finalize=function(){t(l),l.initTypedArrays()},this.globj=function(e){var r;if(s&&(e.remove(s),s=null),!this.hidden){if(t(l),l.initTypedArrays(),this.wireframe&&l.setUpWireframe(),void 0!==this.color){if((r=this.color)||$3Dmol.CC.color(r),l.colorsNeedUpdate=!0,r.constructor!==Array)var n=r.r,o=r.g,i=r.b;for(var u in l.geometryGroups){var h=l.geometryGroups[u],f=h.colorArray,d=0;for(h=h.vertices;d<h;++d)r.constructor===Array&&(n=(i=r[d]).r,o=i.g,i=i.b),f[3*d]=n,f[3*d+1]=o,f[3*d+2]=i}}a=new $3Dmol.Object3D,r=this.side==$3Dmol.DoubleSide?new $3Dmol.MeshDoubleLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:1>this.opacity,opacity:this.opacity,wireframeLinewidth:this.linewidth}):new $3Dmol.MeshLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:1>this.opacity,opacity:this.opacity,wireframeLinewidth:this.linewidth}),r=new $3Dmol.Mesh(l,r),a.add(r),r=new $3Dmol.LineBasicMaterial({linewidth:this.linewidth,color:this.color}),r=new $3Dmol.Line(c,r,$3Dmol.LinePieces),a.add(r),s=a.clone(),e.add(s)}},this.removegl=function(e){s&&(void 0!==s.geometry&&s.geometry.dispose(),void 0!==s.material&&s.material.dispose(),e.remove(s),s=null),a=null}}var t=function(e){0<(e=e.updateGeoGroup(0)).vertices&&e.truncateArrayBuffers(!0,!0)},r=function(e,t,r){var o=r.faceArr;0!==r.vertexArr.length&&0!==o.length||console.warn("Error adding custom shape component: No vertices and/or face indices supplied!"),void 0===(o=r.color)&&(o=e.color),o=$3Dmol.CC.color(o);for(var i=$3Dmol.splitMesh(r),a=0,s=i.length;a<s;a++){var l,c=void 0,u=l=void 0,h=e,f=t,d=i[a],p=i[a].colorArr?i[a].colorArr:o,m=r.clickable,v=f.addGeoGroup(),g=d.vertexArr,y=d.normalArr,b=d.faceArr;v.vertices=g.length,v.faceidx=b.length;var x=v.vertexArray,w=v.colorArray;p.constructor!==Array&&(c=p.r,l=p.g,u=p.b);var D=0;for(d=v.vertices;D<d;++D){var C=3*D,$=g[D];x[C]=$.x,x[C+1]=$.y,x[C+2]=$.z,p.constructor===Array&&(c=($=p[D]).r,l=$.g,u=$.b),w[C]=c,w[C+1]=l,w[C+2]=u}if(m)for(D=0,d=v.faceidx/3;D<d;++D)l=b[C=3*D],u=b[C+1],$=b[C+2],C=new $3Dmol.Vector3,c=new $3Dmol.Vector3,p=new $3Dmol.Vector3,h.intersectionShape.triangle.push(new $3Dmol.Triangle(C.copy(g[l]),c.copy(g[u]),p.copy(g[$])));if(m){for(d=new $3Dmol.Vector3(0,0,0),l=D=0;l<f.geometryGroups.length;l++)d.add(f.geometryGroups[l].getCentroid()),D++;d.divideScalar(D),n(h.boundingSphere,{centroid:d},x,v.vertices)}if(v.faceArray=new Uint16Array(b),v.truncateArrayBuffers(!0,!0),y.length<v.vertices)v.setNormals();else for(f=v.normalArray=new Float32Array(3*v.vertices),D=0,d=v.vertices;D<d;++D)C=3*D,h=y[D],f[C]=h.x,f[C+1]=h.y,f[C+2]=h.z;v.setLineIndices(),v.lineidx=v.lineArray.length}},n=function(e,t,r,n){var o;if(e.center.set(0,0,0),0<t.length){var i=0;for(o=t.length;i<o;++i)e.center.add(t[i].centroid);e.center.divideScalar(t.length)}for(t=e.radius*e.radius,r.length/3<n&&(n=r.length/3),i=0,o=n;i<o;i++)n=e.center.distanceToSquared({x:r[3*i],y:r[3*i+1],z:r[3*i+2]}),t=Math.max(t,n);e.radius=Math.sqrt(t)},o=function(e,t){void 0!==t.color?(e.color=t.color||new $3Dmol.Color,t.color instanceof $3Dmol.Color||(e.color=$3Dmol.CC.color(t.color))):e.color=$3Dmol.CC.color(0),e.wireframe=!!t.wireframe,e.opacity=t.alpha?$3Dmol.Math.clamp(t.alpha,0,1):1,void 0!==t.opacity&&(e.opacity=$3Dmol.Math.clamp(t.opacity,0,1)),e.side=void 0!==t.side?t.side:$3Dmol.DoubleSide,e.linewidth=void 0===t.linewidth?1:t.linewidth,e.clickable=!!t.clickable,e.callback="function"==typeof t.callback?t.callback:null,e.hoverable=!!t.hoverable,e.hover_callback="function"==typeof t.hover_callback?t.hover_callback:null,e.unhover_callback="function"==typeof t.unhover_callback?t.unhover_callback:null,e.hidden=t.hidden};return Object.defineProperty(e.prototype,"position",{get:function(){return this.boundingSphere.center}}),Object.defineProperty(e.prototype,"x",{get:function(){return this.boundingSphere.center.x}}),Object.defineProperty(e.prototype,"y",{get:function(){return this.boundingSphere.center.y}}),Object.defineProperty(e.prototype,"z",{get:function(){return this.boundingSphere.center.z}}),e}(),$3Dmol.ShapeIDCount=0,$3Dmol.splitMesh=function(e){if(64e3>e.vertexArr.length)return[e];var t=[{vertexArr:[],normalArr:[],faceArr:[]}];e.colorArr&&(t.colorArr=[]);for(var r=[],n=[],o=0,i=e.faceArr,a=0,s=i.length;a<s;a+=3){for(var l=t[o],c=0;3>c;c++){var u=i[a+c];r[u]!==o&&(r[u]=o,n[u]=l.vertexArr.length,l.vertexArr.push(e.vertexArr[u]),e.normalArr&&e.normalArr[u]&&l.normalArr.push(e.normalArr[u]),e.colorArr&&e.colorArr[u]&&l.colorArr.push(e.colorArr[u])),l.faceArr.push(n[u])}64e3<=l.vertexArr.length&&(t.push({vertexArr:[],normalArr:[],faceArr:[]}),e.colorArr&&(t.colorArr=[]),o++)}return t},$3Dmol.GLViewer=function(e,t){function r(e){var t=[];if(void 0===e.model)for(e=0;e<p.length;e++)p[e]&&t.push(p[e]);else for(t=e.model,$.isArray(t)||(t=[t]),e=0;e<t.length;e++)if("number"==typeof t[e]){var r=t[e];0>r&&(r+=p.length),t[e]=p[r]}return t}function n(e){var t=[];void 0===e&&(e={});for(var n=r(e),o=0;o<n.length;o++)t=t.concat(n[o].selectedAtoms(e));return t}function o(e,t,n,o,i){for(var a=r(t),s=0;s<a.length;s++)a[s][e](t,n,o,i)}function i(e){var t=new $3Dmol.MeshLambertMaterial;for(var r in t.vertexColors=$3Dmol.VertexColors,e)"color"!==r&&"map"!==r&&e.hasOwnProperty(r)&&(t[r]=e[r]);return void 0!==e.opacity&&(t.transparent=1!==e.opacity),t}var a=(t=t||{}).callback,s=t.defaultcolors;s||(s=$3Dmol.elementColors.defaultColors);var l,c=t.nomouse,u=0;t.backgroundColor=t.backgroundColor||"#ffffff",u=$3Dmol.CC.color(t.backgroundColor).getHex(),l=parseFloat(t.camerax);var h=this,f=e,d=null,p=[],m={},v=[],g=[],y=[],b=[],x=[],w=null,D=500;D=t.hoverDuration;var C=f.width(),S=f.height(),A=[],_=new $3Dmol.Renderer({antialias:!0,preserveDrawingBuffer:!0,premultipliedAlpha:!1,id:t.id,row:t.row,col:t.col,rows:t.rows,cols:t.cols,canvas:t.canvas});_.domElement.style.width="100%",_.domElement.style.height="100%",_.domElement.style.padding="0",_.domElement.style.position="absolute",_.domElement.style.top="0px",_.domElement.style.left="0px",_.domElement.style.zIndex="0";var M=t.row,z=t.col,T=t.cols,L=t.rows,E=t.viewers,F=t.control_all,k=_.getAspect(C,S),I=new $3Dmol.Camera(20,k,1,800,t.orthographic);I.position=new $3Dmol.Vector3(l,0,150);var O=new $3Dmol.Vector3;I.lookAt(O);var P=new $3Dmol.Raycaster(new $3Dmol.Vector3(0,0,0),new $3Dmol.Vector3(0,0,0)),N=new $3Dmol.Projector;new $3Dmol.Vector3(0,0,0);var j=null,R=null,V=null,B=-50,U=50,G=new $3Dmol.Quaternion(0,0,0,1),q=new $3Dmol.Quaternion(0,0,0,1),H=0,W=!1,Y=0,Z=0,X=0,K=0,Q=0,J=0,ee=0,te=function(){0>--H&&(H=0)},re=function(){var e,t=0;for(e in m)if(m.hasOwnProperty(e)){var r=parseInt(e);isNaN(r)||(e=r),e>t&&(t=e)}return t+1},ne=function(){var e=I.position.z-R.position.z;1>e&&(e=1),I.near=e+B,1>I.near&&(I.near=1),I.far=e+U,I.near+1>I.far&&(I.far=I.near+1),I.fov=20,I.right=e*Math.tan(Math.PI/180*20),I.left=-I.right,I.top=I.right/k,I.bottom=-I.top,I.updateProjectionMatrix(),j.fog.near=I.near+.4*(I.far-I.near),j.fog.far=I.far,t.disableFog&&(j.fog.near=j.fog.far)},oe=function(e){if(_.setViewport(),j&&(ne(),_.render(j,I),!e&&0<A.length)){e=h.getView();for(var t=0;t<A.length;t++)A[t].setView(e,!0)}};!function(){(j=new $3Dmol.Scene).fog=new $3Dmol.Fog(u,100,200),V=new $3Dmol.Object3D,(R=new $3Dmol.Object3D).useQuaternion=!0,R.quaternion=new $3Dmol.Quaternion(0,0,0,1),R.add(V),j.add(R);var e=new $3Dmol.Light(16777215);e.position=new $3Dmol.Vector3(.2,.2,1).normalize(),e.intensity=1,j.add(e)}(),_.setClearColorHex(u,1),j.fog.color=$3Dmol.CC.color(u);var ie=function(e,t){w!=e&&(w&&w.unhover_callback(w,h,t,f),(w=e)&&void 0!==e.hover_callback&&"function"==typeof e.hover_callback&&e.hover_callback(e,h,t,f))},ae=function(e){var t=e.originalEvent.targetTouches[0].pageX-e.originalEvent.targetTouches[1].pageX;return e=e.originalEvent.targetTouches[0].pageY-e.originalEvent.targetTouches[1].pageY,Math.sqrt(t*t+e*e)},se=function(e){var t=e.pageX,r=e.pageY;return null==t&&(t=e.originalEvent.pageX),null==r&&(r=e.originalEvent.pageY),e.originalEvent.targetTouches&&e.originalEvent.targetTouches[0]?(t=e.originalEvent.targetTouches[0].pageX,r=e.originalEvent.targetTouches[0].pageY):e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(t=e.originalEvent.changedTouches[0].pageX,r=e.originalEvent.changedTouches[0].pageY),[t,r]},le=function(e,t){var r=f.width(),n=f.height();if(null!=E&&!F){r/=T,n/=L;var o=$("canvas",f).offset();if(e=Math.floor((e-o.left)/r),L-Math.floor((t-o.top)/n)-1!=M||e!=z)return!1}return!0};$("body").bind("mouseup touchend",(function(e){if(W&&j){var t=se(e),r=t[0];if(t=t[1],r==Y&&t==Z){var n=$("canvas",f).offset();0!=b.length&&(P.setFromCamera({x:(r-n.left)/C*2-1,y:-(t-n.top)/S*2+1,z:-1},I),(r=P.intersectObjects(V,b)).length&&void 0!==(r=r[0].clickable).callback&&"function"==typeof r.callback&&r.callback(r,h,e,f))}}W=!1}));var ce=function(e){if(t.lowerZoomLimit&&0<t.lowerZoomLimit){var r=150-t.lowerZoomLimit;e>r&&(e=r)}return t.upperZoomLimit&&0<t.upperZoomLimit&&e<(r=150-t.upperZoomLimit)&&(e=r),150<e&&(e=149.85),e};this.setZoomLimits=function(e,r){void 0!==e&&(t.lowerZoomLimit=e),r&&(t.upperZoomLimit=r),R.position.z=ce(R.position.z),oe()};var ue,he=this._handleMouseDown=function(e){if(e.preventDefault(),j){var t=se(e),r=t[0];t=t[1],void 0!==r&&(W=!0,ue=e.which,Y=r,Z=t,X=0,e.originalEvent.targetTouches&&2==e.originalEvent.targetTouches.length&&(X=ae(e)),G=R.quaternion,Q=R.position.z,K=V.position.clone(),J=B,ee=U)}},fe=this._handleMouseScroll=function(e){if(e.preventDefault(),j){var t=se(e),r=t[0];void 0!==r&&le(r,t[1])&&(t=.85*(150-R.position.z),r=1,e.originalEvent.ctrlKey&&(r=-1),e.originalEvent.detail?R.position.z+=r*t*e.originalEvent.detail/10:e.originalEvent.wheelDelta&&(R.position.z-=r*t*e.originalEvent.wheelDelta/400),R.position.z=ce(R.position.z),oe())}};this.pngURI=function(){return this.getCanvas().toDataURL("image/png")},this.getCanvas=function(){return d.get(0)},this.setHoverDuration=function(e){D=e};var de,pe=this._handleMouseMove=function(e){C=f.width(),S=f.height(),clearTimeout(de);var t=$("canvas",f).offset(),r=(se(e)[0]-t.left)/C*2-1,n=-(se(e)[1]-t.top)/S*2+1;if(null!==w&&function(e,t,r){P.setFromCamera({x:e,y:t,z:-1},I),0!=(e=P.intersectObjects(V,x)).length&&void 0!==e[0]||ie(null),void 0!==e[0]&&e[0].clickable!==w&&ie(null)}(r,n),de=setTimeout((function(){if(0!=x.length){P.setFromCamera({x:r,y:n,z:-1},I);var e=P.intersectObjects(V,x);e.length?(e=e[0].clickable,ie(e),w=e):ie(null)}}),D),e.preventDefault(),j&&W){t=0;var o=se(e),i=o[0],a=o[1];if(void 0!==i&&le(i,a)){o=(i-Y)/C;var s=(a-Z)/S;0!=X&&e.originalEvent.targetTouches&&2==e.originalEvent.targetTouches.length?(t=2,s=2*((s=ae(e))-X)/(C+S),console.log("pinch "+X+" dy "+s)):e.originalEvent.targetTouches&&3==e.originalEvent.targetTouches.length&&(t=1);var l=_.getXYRatio(),c=l[0],u=l[1];o*=c,s*=u,l=Math.sqrt(o*o+s*s),3==t||3==ue&&e.ctrlKey?(B=J+100*o,U=ee-100*s):2==t||3==ue||e.shiftKey?(80>(e=.85*(150-R.position.z))&&(e=80),R.position.z=Q+s*e,R.position.z=ce(R.position.z)):1==t||2==ue||e.ctrlKey?(e=function(e,t){e/=C,t/=S;var r=R.quaternion,n=new $3Dmol.Vector3(0,0,R.position.z);return N.projectVector(n,I),n.x+=2*e,n.y-=2*t,N.unprojectVector(n,I),n.z=0,n.applyQuaternion(r),n}(c*(i-Y),u*(a-Z)),V.position.addVectors(K,e)):0!==t&&1!=ue||0===l||(e=Math.sin(l*Math.PI)/l,q.x=Math.cos(l*Math.PI),q.y=0,q.z=e*o,q.w=-e*s,R.quaternion=new $3Dmol.Quaternion(1,0,0,0),R.quaternion.multiply(q),R.quaternion.multiply(G)),oe()}}},me=function(e){C=(f=e).width(),S=f.height(),k=_.getAspect(C,S),_.setSize(C,S),f.append(_.domElement),d=$(_.domElement),c||(d.bind("mousedown touchstart",he),d.bind("DOMMouseScroll mousewheel",fe),d.bind("mousemove touchmove",pe),d.bind("contextmenu",(function(e){e.preventDefault()})))};me(f),this.setContainer=function(e){return"string"===$.type(e)&&(e=$("#"+e)),e||(e=f),me(e),this},this.setBackgroundColor=function(e,t){return(void 0===t||0>t||1<t)&&(t=1),e=$3Dmol.CC.color(e),j.fog.color=e,u=e.getHex(),_.setClearColorHex(e.getHex(),t),oe(),this},this.setProjection=function(e){I.ortho="orthographic"===e,ne()},this.setViewStyle=function(e){if("outline"===e.style){var t={};e.color&&(t.color=$3Dmol.CC.color(e.color)),e.width&&(t.width=e.width),_.enableOutline(t)}else _.disableOutline();return this},t.style&&this.setViewStyle(t),this.setWidth=function(e){return C=e||C,_.setSize(C,S),this},this.setHeight=function(e){return S=e||S,_.setSize(C,S),this},this.resize=function(){return C=f.width(),S=f.height(),k=_.getAspect(C,S),_.setSize(C,S),I.aspect=k,I.updateProjectionMatrix(),oe(),this},$(window).resize(this.resize),this.getModel=function(e){return e in p?p[e]:0==p.length?null:p[p.length-1]},this.rotate=function(e,t,r,n){r=void 0!==r?r:0,void 0===t&&(t="y"),"x"==t&&(t={x:1,y:0,z:0}),"y"==t&&(t={x:0,y:1,z:0}),"z"==t&&(t={x:0,y:0,z:1});var o=Math.PI*e/180;return e=Math.sin(o/2),o=Math.cos(o/2),t=new $3Dmol.Quaternion(t.x*e,t.y*e,t.z*e,o).normalize(),r?(t=(new $3Dmol.Quaternion).copy(R.quaternion).multiply(t),ye(r,n,V.position,R.position.z,t,O)):(R.quaternion.multiply(t),oe()),this},this.surfacesFinished=function(){for(var e in m)if(!m[e][0].done)return!1;return!0},this.getView=function(){if(!V)return[0,0,0,0,0,0,0,1];var e=V.position,t=R.quaternion;return[e.x,e.y,e.z,R.position.z,t.x,t.y,t.z,t.w]},this.setView=function(e,t){return void 0!==e&&(e instanceof Array||8!==e.length)&&V&&R?(V.position.x=e[0],V.position.y=e[1],V.position.z=e[2],R.position.z=e[3],R.quaternion.x=e[4],R.quaternion.y=e[5],R.quaternion.z=e[6],R.quaternion.w=e[7],void 0!==e[8]&&(R.position.x=e[8],R.position.y=e[9]),oe(t),this):this},this.render=function(e){var t;_.setViewport(),b.splice(0,b.length),x.splice(0,x.length);var r=0;for(t=p.length;r<t;r++){var n=p[r];if(n){var o=n.selectedAtoms({clickable:!0});n=n.selectedAtoms({hoverable:!0}),Array.prototype.push.apply(x,n),Array.prototype.push.apply(b,o)}}for(r=0,t=v.length;r<t;r++)(o=v[r])&&o.clickable&&b.push(o),o&&o.hoverable&&x.push(o);for(r=this.getView(),o=_.supportedExtensions(),t=0;t<p.length;t++)p[t]&&p[t].globj(V,o);for(t=0;t<v.length;t++)v[t]&&v[t].globj(V,o);for(t in m)if(m.hasOwnProperty(t))for(n=m[t],o=0;o<n.length;o++)if(n.hasOwnProperty(o)){var i=n[o].geo;if(!n[o].finished)if(i.verticesNeedUpdate=!0,i.elementsNeedUpdate=!0,i.normalsNeedUpdate=!0,i.colorsNeedUpdate=!0,i.buffersNeedUpdate=!0,i.boundingSphere=null,n[o].done&&(n[o].finished=!0),n[o].lastGL&&V.remove(n[o].lastGL),(i=n[o].mat instanceof $3Dmol.LineBasicMaterial?new $3Dmol.Line(i,n[o].mat):new $3Dmol.Mesh(i,n[o].mat)).visible=!n[o].mat.transparent||0!=n[o].mat.opacity,1<n[o].symmetries.length||1==n[o].symmetries.length&&!n[o].symmetries[o].isIdentity()){var a,s=new $3Dmol.Object3D;for(a=0;a<n[o].symmetries.length;a++){var l=i.clone();l.matrix=n[o].symmetries[a],l.matrixAutoUpdate=!1,s.add(l)}n[o].lastGL=s,V.add(s)}else n[o].lastGL=i,V.add(i)}return this.setView(r),"function"==typeof e&&e(this),this},this.selectedAtoms=function(e){return n(e)},this.getUniqueValues=function(e,t){void 0===t&&(t={}),t=n(t);var r,o={};for(r in t)t[r].hasOwnProperty(e)&&(o[t[r][e]]=!0);return Object.keys(o)},this.pdbData=function(e){for(var t="",r=0,o=(e=n(e)).length;r<o;++r)t+=e[r].pdbline+"\n";return t};var ve,ge=function(e,t,r){if(1==r)return t;if(0==r)return e;var n=e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w;return.9995<n?((e=new $3Dmol.Quaternion(e.x+r*(t.x-e.x),e.y+r*(t.y-e.y),e.z+r*(t.z-e.z),e.w+r*(t.w-e.w))).normalize(),e):(0>n&&(t=t.clone().multiplyScalar(-1),n=-n),1<n?n=1:-1>n&&(n=-1),r*=Math.acos(n),(t=t.clone()).sub(e.clone().multiplyScalar(n)),t.normalize(),n=Math.cos(r),r=Math.sin(r),(e=new $3Dmol.Quaternion(e.x*n+t.x*r,e.y*n+t.y*r,e.z*n+t.z*r,e.w*n+t.w*r)).normalize(),e)};this.spin=function(e){if(clearInterval(ve),void 0===e&&(e="y"),"boolean"==typeof e){if(!e)return;e="y"}Array.isArray(e)&&(e={x:e[0],y:e[1],z:e[2]});var t=this;ve=setInterval((function(){t.rotate(1,e)}),25)};var ye=function(e,t,r,n,o,i){var a=Math.ceil(e/20);1>a&&(a=1),H++,e=V.position.clone();var s=R.position.z,l=R.quaternion.clone(),c=O.clone();if(t){for(var u=(a=Array(a)).length,h=0;h<u;h++){var f=(h+1)/u;t={mpos:e,rz:s,rot:l},r&&(t.mpos=r.clone().sub(e).multiplyScalar(f).add(e)),void 0!==n&&null!=n&&(t.rz=s+f*(n-s)),o&&(t.rot=ge(l,o,f)),i&&(t.cam=i.clone().sub(c).multiplyScalar(f).add(c)),a[h]=t}var d=0,p=function(){var e=a[d];d+=1,e.mpos&&(V.position=e.mpos),e.rz&&(R.position.z=e.rz),e.rot&&(R.quaternion=e.rot),e.cam&&I.lookAt(e.cam),d<a.length?setTimeout(p,20):te(),oe()}}else{var m,v,g;if(f=1/a,r&&(m=r.clone().sub(e).multiplyScalar(f)),void 0!==n&&null!=n&&(v=f*(n-s)),o){t=ge(l,o,f);var y=l.clone().inverse().multiply(t)}i&&(g=i.clone().sub(c).multiplyScalar(f)),d=0,p=function(){d+=1,m&&V.position.add(m),v&&(R.position.z+=v),y&&R.quaternion.multiply(y),g&&(O.add(g),I.lookAt(O)),d<a?setTimeout(p,20):te(),oe()}}setTimeout(p,20)};this.zoom=function(e,t,r){return t=void 0!==t?t:0,e=150-(150-R.position.z)/(e||2),0<t?ye(t,r,V.position,ce(e),R.quaternion,O):(R.position.z=ce(e),oe()),this},this.translate=function(e,t,r,n){r=void 0!==r?r:0,e/=C,t/=S;var o=new $3Dmol.Vector3(0,0,-150);return N.projectVector(o,I),o.x-=e,o.y-=t,N.unprojectVector(o,I),o.z=0,e=O.clone().add(o),0<r?ye(r,n,V.position,R.position.z,R.quaternion,e):(O=e,I.lookAt(O),oe()),this},this.fitSlab=function(e){e=n(e=e||{});var t=$3Dmol.getExtent(e);e=t[1][0]-t[0][0];var r=t[1][1]-t[0][1];return t=t[1][2]-t[0][2],5>(e=Math.sqrt(e*e+r*r+t*t))&&(e=5),B=-e/1.9,U=e/2,this},this.center=function(e,t,r){t=void 0!==t?t:0;var o=n(e=e||{}),i=$3Dmol.getExtent(o);if($.isEmptyObject(e)){$.each(v,(function(e,t){t&&t.boundingSphere&&t.boundingSphere.center&&(e=t.boundingSphere.center,0<(t=t.boundingSphere.radius)?(o.push(new $3Dmol.Vector3(e.x+t,e.y,e.z)),o.push(new $3Dmol.Vector3(e.x-t,e.y,e.z)),o.push(new $3Dmol.Vector3(e.x,e.y+t,e.z)),o.push(new $3Dmol.Vector3(e.x,e.y-t,e.z)),o.push(new $3Dmol.Vector3(e.x,e.y,e.z+t)),o.push(new $3Dmol.Vector3(e.x,e.y,e.z-t))):o.push(e))})),i=$3Dmol.getExtent(o),e=o;var a=i}else e=n({}),a=$3Dmol.getExtent(e);e=new $3Dmol.Vector3(i[2][0],i[2][1],i[2][2]);var s=a[1][0]-a[0][0],l=a[1][1]-a[0][1];for(a=a[1][2]-a[0][2],5>(s=Math.sqrt(s*s+l*l+a*a))&&(s=5),B=-s/1.9,U=s/2,s=i[1][0]-i[0][0],l=i[1][1]-i[0][1],a=i[1][2]-i[0][2],5>(s=Math.sqrt(s*s+l*l+a*a))&&(s=5),i=25,s=0;s<o.length;s++)o[s]&&(l=e.distanceToSquared(o[s]))>i&&(i=l);return s=2*Math.sqrt(i),e=e.clone().multiplyScalar(-1),0<t?ye(t,r,e,R.position.z,R.quaternion,O):(V.position=e,oe()),this},this.zoomTo=function(e,t,r){t=void 0!==t?t:0;var o=n(e=e||{}),i=$3Dmol.getExtent(o);if($.isEmptyObject(e)){$.each(v,(function(e,t){t&&t.boundingSphere&&t.boundingSphere.center&&(e=t.boundingSphere.center,0<(t=t.boundingSphere.radius)?(o.push(new $3Dmol.Vector3(e.x+t,e.y,e.z)),o.push(new $3Dmol.Vector3(e.x-t,e.y,e.z)),o.push(new $3Dmol.Vector3(e.x,e.y+t,e.z)),o.push(new $3Dmol.Vector3(e.x,e.y-t,e.z)),o.push(new $3Dmol.Vector3(e.x,e.y,e.z+t)),o.push(new $3Dmol.Vector3(e.x,e.y,e.z-t))):o.push(e))})),i=$3Dmol.getExtent(o);var a=o,s=i}else a=n({}),s=$3Dmol.getExtent(a);a=new $3Dmol.Vector3(i[2][0],i[2][1],i[2][2]);var l=s[1][0]-s[0][0],c=s[1][1]-s[0][1];for(s=s[1][2]-s[0][2],5>(l=Math.sqrt(l*l+c*c+s*s))&&(l=5),B=-l/1.9,U=l/2,0===Object.keys(e).length&&(B=-999999,U=999999),l=i[1][0]-i[0][0],c=i[1][1]-i[0][1],s=i[1][2]-i[0][2],5>(l=Math.sqrt(l*l+c*c+s*s))&&(l=5),e=25,i=0;i<o.length;i++)o[i]&&(l=a.distanceToSquared(o[i]))>e&&(e=l);return l=2*Math.sqrt(e),a=a.clone().multiplyScalar(-1),e=-(.5*l/Math.tan(Math.PI/180*I.fov/2)-150),e=ce(e),0<t?ye(t,r,a,e,R.quaternion,O):(V.position=a,R.position.z=e,oe()),this},this.setSlab=function(e,t){B=e,U=t},this.getSlab=function(e){return{near:B,far:U}},this.addLabel=function(e,t,r){return t=t||{},r&&(r=$3Dmol.getExtent(n(r)),t.position={x:r[2][0],y:r[2][1],z:r[2][2]}),(e=new $3Dmol.Label(e,t)).setContext(),V.add(e.sprite),t.fixed&&y.push(g.length),g.push(e),oe(),e},this.addResLabels=function(e,t){return o("addResLabels",e,this,t),oe(),this},this.addPropertyLabels=function(e,t,r){return o("addPropertyLabels",e,t,this,r),oe(),this},this.removeLabel=function(e){for(var t=0;t<g.length;t++)if(g[t]==e){g.splice(t,1),e.dispose(),V.remove(e.sprite);break}return oe(),this},this.removeAllLabels=function(){for(var e=0;e<g.length;e++)V.remove(g[e].sprite);return g.splice(0,g.length),oe(),this},this.setLabelStyle=function(e,t){return V.remove(e.sprite),e.dispose(),e.stylespec=t,e.setContext(),V.add(e.sprite),oe(),e},this.setLabelText=function(e,t){return V.remove(e.sprite),e.dispose(),e.text=t,e.setContext(),V.add(e.sprite),oe(),e},this.addShape=function(e){return e=e||{},(e=new $3Dmol.GLShape(e)).shapePosition=v.length,v.push(e),e},this.removeShape=function(e){if(!e)return this;for(e.removegl(V),delete v[e.shapePosition];0<v.length&&void 0===v[v.length-1];)v.pop();return this},this.removeAllShapes=function(){for(var e=0;e<v.length;e++)v[e].removegl(V);return v.splice(0,v.length),this};var be=function(e){return e.hasOwnProperty("x")&&e.hasOwnProperty("y")&&e.hasOwnProperty("z")?e:0==(e=n(e)).length?{x:0,y:0,z:0}:{x:(e=$3Dmol.getExtent(e))[0][0]+(e[1][0]-e[0][0])/2,y:e[0][1]+(e[1][1]-e[0][1])/2,z:e[0][2]+(e[1][2]-e[0][2])/2}};this.addSphere=function(e){(e=e||{}).center=be(e.center);var t=new $3Dmol.GLShape(e);return t.shapePosition=v.length,t.addSphere(e),v.push(t),t.finalize(),t},this.addBox=function(e){null!=(e=e||{}).corner&&(e.corner=be(e.corner)),null!=e.center&&(e.center=be(e.center));var t=new $3Dmol.GLShape(e);return t.shapePosition=v.length,t.addBox(e),v.push(t),t.finalize(),t},this.addArrow=function(e){(e=e||{}).start=be(e.start),e.end=be(e.end);var t=new $3Dmol.GLShape(e);return t.shapePosition=v.length,t.addArrow(e),v.push(t),t.finalize(),t},this.addCylinder=function(e){(e=e||{}).start=be(e.start),e.end=be(e.end);var t=new $3Dmol.GLShape(e);return t.shapePosition=v.length,e.dashed?t.addDashedCylinder(e):t.addCylinder(e),v.push(t),t.finalize(),t},this.addCurve=function(e){e=e||{};var t=new $3Dmol.GLShape(e);return t.shapePosition=v.length,t.addCurve(e),v.push(t),t.finalize(),t},this.addLine=function(e){(e=e||{}).start=be(e.start),e.end=be(e.end),e.wireframe=!0;var t=new $3Dmol.GLShape(e);if(t.shapePosition=v.length,e.dashed){e.dashLength=e.dashLength||.5,e.gapLength=e.gapLength||.5,e.start=e.start||{},e.end=e.end||{};var r=new $3Dmol.Vector3(e.start.x||0,e.start.y||0,e.start.z||0),n=new $3Dmol.Vector3(e.end.x,e.end.y||0,e.end.z||0),o=new $3Dmol.Vector3;new $3Dmol.Vector3,new $3Dmol.Vector3;var i,a=r.clone(),s=0;o.subVectors(n,r);var l=o.length();o.normalize();var c=o.clone();o=o.clone(),c.multiplyScalar(e.dashLength),o.multiplyScalar(e.gapLength);var u=c.length();for(i=o.length();s<l;){if(s+u>l){e.start=r,e.end=n,t.addLine(e);break}a.addVectors(r,c),e.start=r,e.end=a,t.addLine(e),r=a.clone(),s+=u,a.addVectors(r,o),r=a.clone(),s+=i}t.finalize()}else t.addLine(e);return v.push(t),t.finalize(),t},this.addUnitCell=function(e){e||(e=this.getModel());var t=new $3Dmol.GLShape({wireframe:!0});t.shapePosition=v.length;var r=e.getCrystData();if(r){if(r.matrix)e=r.matrix;else{e=r.a;var n=r.b,o=r.c,i=r.alpha,a=r.beta;r=r.gamma,i=i*Math.PI/180,a=a*Math.PI/180,r=r*Math.PI/180;var s=Math.cos(a);i=(Math.cos(i)-Math.cos(a)*Math.cos(r))/Math.sin(r),e=new $3Dmol.Matrix4(e,n*Math.cos(r),o*s,0,0,n*Math.sin(r),o*i,0,0,0,o*Math.sqrt(Math.max(0,1-s*s-i*i)),0,0,0,0,1)}for(n=[new $3Dmol.Vector3(0,0,0),new $3Dmol.Vector3(1,0,0),new $3Dmol.Vector3(0,1,0),new $3Dmol.Vector3(0,0,1),new $3Dmol.Vector3(1,1,0),new $3Dmol.Vector3(0,1,1),new $3Dmol.Vector3(1,0,1),new $3Dmol.Vector3(1,1,1)],o=0;o<n.length;o++)n[o]=n[o].applyMatrix4(e);t.addLine({start:n[0],end:n[1]}),t.addLine({start:n[0],end:n[2]}),t.addLine({start:n[1],end:n[4]}),t.addLine({start:n[2],end:n[4]}),t.addLine({start:n[0],end:n[3]}),t.addLine({start:n[3],end:n[5]}),t.addLine({start:n[2],end:n[5]}),t.addLine({start:n[1],end:n[6]}),t.addLine({start:n[4],end:n[7]}),t.addLine({start:n[6],end:n[7]}),t.addLine({start:n[3],end:n[6]}),t.addLine({start:n[5],end:n[7]})}return v.push(t),t.finalize(),t},this.addCustom=function(e){e=e||{};var t=new $3Dmol.GLShape(e);return t.shapePosition=v.length,t.addCustom(e),v.push(t),t.finalize(),t},this.addVolumetricData=function(e,t,r){r=r||{};var n=new $3Dmol.GLShape(r);return n.shapePosition=v.length,n.addVolumetricData(e,t,r),v.push(n),n},this.addIsosurface=function(e,t,r){t=t||{};var n=new $3Dmol.GLShape(t);return n.shapePosition=v.length,n.addIsosurface(e,t,r),v.push(n),n},this.enableFog=function(e){e?j.fog=new $3Dmol.Fog(u,100,200):(t.disableFog=!0,oe())},this.setFrame=function(e){return new Promise((function(t,r){r=p.map((function(t){return t.setFrame(e)})),Promise.all(r).then((function(){t()}))}))},this.getNumFrames=function(){for(var e=0,t=0;t<p.length;t++)p[t].getNumFrames()>e&&(e=p[t].getNumFrames());return e},this.animate=function(e){H++;var t=100,r="forward",n=0;(e=e||{}).interval&&(t=e.interval),e.loop&&(r=e.loop),e.reps&&(n=e.reps);var o=this.getNumFrames(),i=this,a=0,s=1;e.step&&(n/=s=e.step);var l=0,c=o*n,u=new Date,h=function(){if(i.render(),++l!=c&&i.isAnimated()){var e=t-(new Date-u);setTimeout(f,0<e?e:0,r)}else clearTimeout(d),te()},f=function(e){u=new Date,"forward"==e?i.setFrame(a).then((function(){a=(a+s)%o,h()})):"backward"==e?i.setFrame(o-1-a).then((function(){a=(a+s)%o,h()})):i.setFrame(a).then((function(){s*=0==(a+=s)%(o-1)?-1:1,h()}))},d=setTimeout(f,0,r);return this},this.stopAnimate=function(){return H=0,this},this.isAnimated=function(){return 0<H},this.addModel=function(e,t,r){r&&!r.defaultcolors&&(r.defaultcolors=s);var n=new $3Dmol.GLModel(p.length,r);return n.addMolData(e,t,r),p.push(n),n},this.addModels=function(e,t,r){for((r=r||{}).multimodel=!0,r.frames=!0,e=$3Dmol.GLModel.parseMolData(e,t,r),t=0;t<e.length;t++){var n=new $3Dmol.GLModel(p.length,s);n.setAtomDefaults(e[t]),n.addFrame(e[t]),n.setFrame(0),e.modelData&&n.setModelData(e.modelData[t]),n.setDontDuplicateAtoms(!r.duplicateAssemblyAtoms),p.push(n)}return p},this.addModelsAsFrames=function(e,t,r){(r=r||{}).multimodel=!0,r.frames=!0;var n=new $3Dmol.GLModel(p.length,s);return n.addMolData(e,t,r),p.push(n),n},this.addAsOneMolecule=function(e,t,r){(r=r||{}).multimodel=!0,r.onemol=!0;var n=new $3Dmol.GLModel(p.length,s);return n.addMolData(e,t,r),p.push(n),n},this.removeModel=function(e){if(e){for(e.removegl(V),delete p[e.getID()];0<p.length&&void 0===p[p.length-1];)p.pop();return this}},this.removeAllModels=function(){for(var e=0;e<p.length;e++)p[e].removegl(V);return p.splice(0,p.length),this},this.exportJSON=function(e,t){var r={};return r.m=void 0===t?p.map((function(t){return t.toCDObject(e)})):[model[t].toCDObject()],JSON.stringify(r)},this.createModelFrom=function(e,t){for(var r=new $3Dmol.GLModel(p.length,s),n=0;n<p.length;n++)if(p[n]){var o=p[n].selectedAtoms(e);r.addAtoms(o),t&&p[n].removeAtoms(o)}return p.push(r),r},this.setStyle=function(e,t){return void 0===t&&(t=e,e={}),o("setStyle",e,t,!1),this},this.addStyle=function(e,t){return void 0===t&&(t=e,e={}),o("setStyle",e,t,!0),this},this.setClickable=function(e,t,r){return o("setClickable",e,t,r),this},this.setHoverable=function(e,t,r,n){return o("setHoverable",e,t,r,n),this},this.vibrate=function(e,t){return o("vibrate",e,t),this},this.setColorByProperty=function(e,t,r,n){return o("setColorByProperty",e,t,r,n),this},this.setColorByElement=function(e,t){return o("setColorByElement",e,t),this};var xe=function(e,t){for(var r=[],n=0;n<e.length;n++){var o=e[n];void 0!==o&&(o.x<t[0][0]||o.x>t[1][0]||o.y<t[0][1]||o.y>t[1][1]||o.z<t[0][2]||o.z>t[1][2]||r.push(o))}return r},we=function(e){return(e[1][0]-e[0][0])*(e[1][1]-e[0][1])*(e[1][2]-e[0][2])},De=function(e,t,r){var n=new $3Dmol.Geometry(!0),o=n.updateGeoGroup(0),i=[],a=0;for(l=e.length;a<l;a++){var s=e[a];s&&(void 0!==s.surfaceColor?i[a]=s.surfaceColor:s.color&&(i[a]=$3Dmol.CC.color(s.color)))}var l,c=o.vertexArray;for(a=0,l=(s=t.vertices).length;a<l;a++)c[e=3*o.vertices]=s[a].x,c[e+1]=s[a].y,c[e+2]=s[a].z,o.vertices++;if(c=o.colorArray,r.voldata&&r.volscheme){i=r.volscheme;var u=r.voldata,h=i.range()||[-1,1];for(a=0,l=s.length;a<l;a++){e=u.getVal(s[a].x,s[a].y,s[a].z);var f=$3Dmol.CC.color(i.valueToHex(e,h));c[e=3*a]=f.r,c[e+1]=f.g,c[e+2]=f.b}}else if(0<i.length)for(a=0,l=s.length;a<l;a++)u=s[a].atomid,c[e=3*a]=i[u].r,c[e+1]=i[u].g,c[e+2]=i[u].b;for(t=t.faces,o.faceidx=t.length,n.initTypedArrays(),s=o.vertexArray,c=o.normalArray,a=0,l=t.length;a<l;a+=3){i=t[a+1],u=t[a+2],e=3*t[a],i*=3,u*=3,h=new $3Dmol.Vector3(s[e],s[e+1],s[e+2]),f=new $3Dmol.Vector3(s[i],s[i+1],s[i+2]);var d=new $3Dmol.Vector3(s[u],s[u+1],s[u+2]);d.subVectors(d,f),h.subVectors(h,f),d.cross(h),(h=d).normalize(),c[e]+=h.x,c[i]+=h.x,c[u]+=h.x,c[e+1]+=h.y,c[i+1]+=h.y,c[u+1]+=h.y,c[e+2]+=h.z,c[i+2]+=h.z,c[u+2]+=h.z}return o.faceArray=new Uint16Array(t),(r=new $3Dmol.Mesh(n,r)).doubleSided=!0,r};this.addMesh=function(e){e={geo:e.geometry,mat:e.material,done:!0,finished:!1};var t=re();return m[t]=e,t};var Ce=function(e){var t=[];return $.each(e,(function(e,r){t[e]=$.extend({},r)})),t},$e={VDW:$3Dmol.SurfaceType.VDW,MS:$3Dmol.SurfaceType.MS,SAS:$3Dmol.SurfaceType.SAS,SES:$3Dmol.SurfaceType.SES};this.addSurface=function(e,t,r,o,a,s){var l=re();"string"==typeof e?void 0!==$e[e]?e=$e[e]:console.log("Surface type : "+e+" is not recognized"):void 0===e&&(e=$3Dmol.SurfaceType.VDW);var c=null,u=null;r=Ce(n(r)),c=o?Ce(n(o)):r;var f=!1;for(o=0;o<p.length;o++)if(p[o]){var d=p[o].getSymmetries();if(1<d.length||1==d.length&&!d[0].isIdentity()){f=!0;break}}d=function(r,o,i){u=a?Ce(n(a)):i;var s=$3Dmol.getExtent(i,!0);if(t.map&&t.map.prop){var c=t.map.prop,f=t.map.scheme||t.map.gradient||new $3Dmol.Gradient.RWB,d=f.range();d||(d=$3Dmol.getPropertyRange(i,c)),t.colorscheme={prop:c,gradient:f}}var p=0;for(c=o.length;p<c;p++)(f=o[p]).surfaceColor=$3Dmol.getColorFromStyle(f,t);var m=we(s),g=function(e,t,r){for(var n=[],o={},i=0,a=t.length;i<a;i++)o[t[i].index]=i;var s=function(e){for(var t=[],r=0,n=e.length;r<n;r++)e[r].index in o&&t.push(o[e[r].index]);return t},l=function(e){var t=[];return t[0]=[e[0][0],e[0][1],e[0][2]],t[1]=[e[1][0],e[1][1],e[1][2]],t},c=function(e){if(64e3>we(e))return[e];var t=e[1][0]-e[0][0],r=e[1][1]-e[0][1],n=e[1][2]-e[0][2];return r=t>r&&t>n?0:r>t&&r>n?1:2,n=l(e),t=l(e),e=(e[1][r]-e[0][r])/2+e[0][r],n[1][r]=e,t[0][r]=e,e=c(n),t=c(t),e.concat(t)};for(i=0,a=(e=c(e)).length;i<a;i++){var u=l(e[i]);u[0][0]-=6,u[0][1]-=6,u[0][2]-=6,u[1][0]+=6,u[1][1]+=6,u[1][2]+=6,u=xe(t,u);var h=xe(r,e[i]);n.push({extent:e[i],atoms:s(u),toshow:s(h)})}return n}(s,o,i);if(u&&u.length&&0<u.length){var y=$3Dmol.getExtent(u,!0);g.sort((function(e,t){var r=function(e,t){var r=e.extent;e=r[1][0]-r[0][0]-t[2][0];var n=r[1][1]-r[0][1]-t[2][1];return e*e+n*n+(t=r[1][2]-r[0][2]-t[2][2])*t};return(e=r(e,y))-(t=r(t,y))}))}var b=[];for(p=0,c=o.length;p<c;p++)f=o[p],b[p]={x:f.x,y:f.y,z:f.z,serial:p,elem:f.elem};if($3Dmol.syncSurface){for(i=function(t){return new Promise((function(n,i){i=e;var a=g[t].extent,s=g[t].atoms,l=g[t].toshow,c=new $3Dmol.ProteinSurface;for(c.initparm(a,1!==i,m),c.fillvoxels(b,s),c.buildboundary(),i!=$3Dmol.SurfaceType.SES&&i!=$3Dmol.SurfaceType.MS||(c.fastdistancemap(),c.boundingatom(!1),c.fillvoxelswaals(b,s)),c.marchingcube(i),l=c.getFacesAndVertices(l),a=0,s=(i=$3Dmol.splitMesh({vertexArr:l.vertices,faceArr:l.faces})).length;a<s;a++)l={vertices:i[a].vertexArr,faces:i[a].faceArr},l=De(o,l,v),$3Dmol.mergeGeos(r.geo,l);h.render(),n()}))},s=[],p=0;p<g.length;p++)s.push(i(p));return Promise.all(s).then((function(){return r.done=!0,Promise.resolve(l)}))}var x=[];for(0>e&&(e=0),p=0,c=4;p<c;p++)i=new Worker($3Dmol.SurfaceWorker),x.push(i),i.postMessage({type:-1,atoms:b,volume:m});return new Promise((function(t,n){var i=0,a=function(e){for(var n=0,a=(e=$3Dmol.splitMesh({vertexArr:e.data.vertices,faceArr:e.data.faces})).length;n<a;n++){var s=De(o,{vertices:e[n].vertexArr,faces:e[n].faceArr},v);$3Dmol.mergeGeos(r.geo,s)}h.render(),++i==g.length&&(r.done=!0,t(l))},s=function(e){console.log(e.message+" ("+e.filename+":"+e.lineno+")"),n(e)};for(p=0;p<g.length;p++){var c=x[p%x.length];c.onmessage=a,c.onerror=s,c.postMessage({type:e,expandedExtent:g[p].extent,extendedAtoms:g[p].atoms,atomsToShow:g[p].toshow})}}))};var v=i(t=t||{}),g=[];if(o=null,f){f={};var y={};for(o=0;o<p.length;o++)f[o]=[],y[o]=[];for(o=0;o<c.length;o++)f[c[o].model].push(c[o]);for(o=0;o<r.length;o++)y[r[o].model].push(r[o]);for(c=[],o=0;o<p.length;o++)0<y[o].length&&(g.push({geo:new $3Dmol.Geometry(!0),mat:v,done:!1,finished:!1,symmetries:p[o].getSymmetries()}),c.append(d(g[o],f[o],y[o])));o=Promise.all(c)}else g.push({geo:new $3Dmol.Geometry(!0),mat:v,done:!1,finished:!1,symmetries:[new $3Dmol.Matrix4]}),o=d(g[g.length-1],c,r);return m[l]=g,o.surfid=l,s&&"function"==typeof s?(o.then((function(e){s(e)})),l):o},this.setSurfaceMaterialStyle=function(e,t){if(m[e]){e=m[e];for(var r=0;r<e.length;r++){var n=e[r].mat=i(t);if(e[r].mat.side=$3Dmol.FrontSide,t.color){e[r].mat.color=t.color,e[r].geo.colorsNeedUpdate=!0;var o=$3Dmol.CC.color(t.color);e[r].geo.setColors((function(){return o}))}else if(n.voldata&&n.volscheme){var a=n.volscheme,s=n.voldata,l=a.range()||[-1,1];e[r].geo.setColors((function(e,t,r){return e=s.getVal(e,t,r),$3Dmol.CC.color(a.valueToHex(e,l))}))}e[r].finished=!1}}return this},this.removeSurface=function(e){for(var t=m[e],r=0;r<t.length;r++)t[r]&&t[r].lastGL&&(void 0!==t[r].geo&&t[r].geo.dispose(),void 0!==t[r].mat&&t[r].mat.dispose(),V.remove(t[r].lastGL));return delete m[e],oe(),this},this.removeAllSurfaces=function(){for(var e in m)if(m.hasOwnProperty(e)){for(var t=m[e],r=0;r<t.length;r++)t[r]&&t[r].lastGL&&(void 0!==t[r].geo&&t[r].geo.dispose(),void 0!==t[r].mat&&t[r].mat.dispose(),V.remove(t[r].lastGL));delete m[e]}return oe(),this},this.jmolMoveTo=function(){var e=V.position;e="center { "+-e.x+" "+-e.y+" "+-e.z+" }; ";var t=R.quaternion;return e+"moveto .5 quaternion { "+t.x+" "+t.y+" "+t.z+" "+t.w+" };"},this.clear=function(){return this.removeAllSurfaces(),this.removeAllModels(),this.removeAllLabels(),this.removeAllShapes(),oe(),this},this.mapAtomProperties=function(e,t){var o=n(t=t||{});if("function"==typeof e)for(var i=0,a=o.length;i<a;i++)e(t=o[i]);else for(i=0,a=o.length;i<a;i++){t=o[i];for(var s=0,l=e.length;s<l;s++){var c=e[s];if(c.props)for(var u in c.props)if(c.props.hasOwnProperty(u)){e:{var h=t,f=c;void 0===f&&(f={});for(var d=r(f),p=0;p<d.length;p++)if(d[p].atomIsSelected(h,f)){h=!0;break e}h=!1}h&&(t.properties||(t.properties={}),t.properties[u]=c.props[u])}}}return this},this.linkViewer=function(e){return A.push(e),this};try{"function"==typeof a&&a(this)}catch(e){console.log("error with glviewer callback: "+e)}this.getPerceivedDistance=function(){return 150-R.position.z},this.setPerceivedDistance=function(e){R.position.z=150-e},this.setAutoEyeSeparation=function(e){var t=this.getPerceivedDistance();return I.position.x=e||0<I.position.x?t*Math.tan(Math.PI/180*5):-t*Math.tan(Math.PI/180*5),I.lookAt(new $3Dmol.Vector3(0,0,R.position.z)),I.position.x}},$3Dmol.glmolViewer=$3Dmol.GLViewer,$3Dmol=$3Dmol||{},$3Dmol.Gradient=function(e,t){},$3Dmol.Gradient.valueToHex=function(e,t){},$3Dmol.Gradient.range=function(){},$3Dmol.Gradient.normalizeValue=function(e,t,r){return t>=e?(r<e&&(r=e),r>t&&(r=t),{lo:e,hi:t,val:r}):(r>e&&(r=e),r<t&&(r=t),{lo:t,hi:e,val:e-r+t})},$3Dmol.Gradient.RWB=function(e,t,r){void 0===t&&$.isArray(e)&&2<=e.length&&(t=e[1],e=e[0]),this.valueToHex=function(n,o){if(n*=1,o)var i=o[0],a=o[1];else i=e,a=t;return void 0===n?16777215:(i=(n=$3Dmol.Gradient.normalizeValue(i,a,n)).lo,a=n.hi,(n=n.val)<=(o=o&&void 0!==o[2]?o[2]:void 0!==r?r:(i+a)/2)?16711680+256*(i=Math.floor(255*Math.sqrt((n-i)/(o-i))))+i:65536*(i=Math.floor(255*Math.sqrt(1-(n-o)/(a-o))))+256*i+255)},this.range=function(){return void 0!==e&&void 0!==t?[e,t]:null}},$3Dmol.Gradient.ROYGB=function(e,t){void 0===t&&$.isArray(e)&&2<=e.length&&(t=e[1],e=e[0]),this.valueToHex=function(r,n){if(r*=1,n){var o=n[0];n=n[1]}else o=e,n=t;if(void 0===r)return 16777215;var i=((o=(r=$3Dmol.Gradient.normalizeValue(o,n,r)).lo)+(n=r.hi))/2,a=(o+i)/2,s=(i+n)/2;return(r=r.val)<a?256*(o=Math.floor(255*Math.sqrt((r-o)/(a-o))))+16711680:r<i?65536*(o=Math.floor(255*Math.sqrt(1-(r-a)/(i-a))))+65280:r<s?65280+1*(o=Math.floor(255*Math.sqrt((r-i)/(s-i)))):256*(o=Math.floor(255*Math.sqrt(1-(r-s)/(n-s))))+255},this.range=function(){return void 0!==e&&void 0!==t?[e,t]:null}},$3Dmol.Gradient.Sinebow=function(e,t){var r=1;void 0===t&&$.isArray(e)&&2<=e.length&&(t=e[1],e=e[0]),t<e&&(r=-1,e*=-1,t*=-1),this.valueToHex=function(n,o){if(n*=r,o){var i=o[0];o=o[1]}else i=e,o=t;return void 0===n?16777215:(i=(n=$3Dmol.Gradient.normalizeValue(i,o,n)).lo,o=n.hi,o=((n=n.val)-i)/(o-i)*5/6+.5,i=Math.sin(Math.PI*o),n=Math.sin(Math.PI*(o+1/3)),o=Math.sin(Math.PI*(o+2/3)),65536*Math.floor(255*i*i)+256*Math.floor(255*o*o)+1*Math.floor(255*n*n))},this.range=function(){return void 0!==e&&void 0!==t?[e,t]:null}},$3Dmol.Gradient.builtinGradients={rwb:$3Dmol.Gradient.RWB,roygb:$3Dmol.Gradient.ROYGB,sinebow:$3Dmol.Gradient.Sinebow},$3Dmol.LabelCount=0,$3Dmol.Label=function(e,t){this.id=$3Dmol.LabelCount++,this.stylespec=t||{},this.canvas=document.createElement("canvas"),this.canvas.width=134,this.canvas.height=35,this.context=this.canvas.getContext("2d"),this.sprite=new $3Dmol.Sprite,this.text=e},$3Dmol.Label.prototype={constructor:$3Dmol.Label,getStyle:function(){return this.stylespec},setContext:function(){var e=function(e,t,r){return void 0!==e&&(r=e instanceof $3Dmol.Color?e.scaled():$3Dmol.CC.color(e).scaled()),void 0!==t&&(r.a=parseFloat(t)),r};return function(){var t=this.stylespec,r=void 0!==t.useScreen&&t.useScreen,n=t.showBackground;"0"!==n&&"false"!==n||(n=!1),void 0===n&&(n=!0);var o=t.font?t.font:"sans-serif",i=parseInt(t.fontSize)?parseInt(t.fontSize):18,a=e(t.fontColor,t.fontOpacity,{r:255,g:255,b:255,a:1}),s=t.padding?t.padding:4,l=t.borderThickness?t.borderThickness:0,c=e(t.backgroundColor,t.backgroundOpacity,{r:0,g:0,b:0,a:1}),u=e(t.borderColor,t.borderOpacity,c),h=t.position?t.position:{x:-10,y:1,z:1},f=void 0===t.inFront||t.inFront;"false"!==f&&"0"!==f||(f=!1);var d=t.alignment||$3Dmol.SpriteAlignment.topLeft;"string"==typeof d&&d in $3Dmol.SpriteAlignment&&(d=$3Dmol.SpriteAlignment[d]);var p="";t.bold&&(p="bold "),this.context.font=p+i+"px  "+o;var m=this.context.measureText(this.text).width;n||(l=0);var v=m+2.5*l+2*s,g=1.25*i+2*l+2*s;if(t.backgroundImage){var y=t.backgroundImage,b=t.backgroundWidth?t.backgroundWidth:y.width;b>v&&(v=b),(p=t.backgroundHeight?t.backgroundHeight:y.height)>g&&(g=p)}this.canvas.width=v,this.canvas.height=g,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),p="",t.bold&&(p="bold "),this.context.font=p+i+"px  "+o,this.context.fillStyle="rgba("+c.r+","+c.g+","+c.b+","+c.a+")",this.context.strokeStyle="rgba("+u.r+","+u.g+","+u.b+","+u.a+")",this.context.lineWidth=l,n&&(c=o=l,v-=2*l,g-=2*l,u=0<l,(n=this.context).beginPath(),n.moveTo(o+6,c),n.lineTo(o+v-6,c),n.quadraticCurveTo(o+v,c,o+v,c+6),n.lineTo(o+v,c+g-6),n.quadraticCurveTo(o+v,c+g,o+v-6,c+g),n.lineTo(o+6,c+g),n.quadraticCurveTo(o,c+g,o,c+g-6),n.lineTo(o,c+6),n.quadraticCurveTo(o,c,o+6,c),n.closePath(),n.fill(),u&&n.stroke()),t.backgroundImage&&(y=t.backgroundImage,b=t.backgroundWidth?t.backgroundWidth:y.width,p=t.backgroundHeight?t.backgroundHeight:y.height,this.context.drawImage(y,0,0,b,p)),this.context.fillStyle="rgba("+a.r+","+a.g+","+a.b+","+a.a+")",this.context.fillText(this.text,l+s,i+l+s,m),(t=new $3Dmol.Texture(this.canvas)).needsUpdate=!0,this.sprite.material=new $3Dmol.SpriteMaterial({map:t,useScreenCoordinates:r,alignment:d,depthTest:!f}),this.sprite.scale.set(1,1,1),this.sprite.position.set(h.x,h.y,h.z)}}(),dispose:function(){void 0!==this.sprite.material.map&&this.sprite.material.map.dispose(),void 0!==this.sprite.material&&this.sprite.material.dispose()}},$3Dmol=$3Dmol||{},$3Dmol.MarchingCubeInitializer=function(){var e={march:function(e,i,a,s){var l,c=!!s.fulltable,u=s.hasOwnProperty("origin")&&s.origin.hasOwnProperty("x")?s.origin:{x:0,y:0,z:0},h=!!s.voxel,f=s.matrix,d=s.nX||0,p=s.nY||0,m=s.nZ||0,v=s.scale||1;l=s.unitCube?s.unitCube:{x:v,y:v,z:v};var g=new Int32Array(d*p*m);for(s=0,v=g.length;s<v;++s)g[s]=-1;v=function(e,t,r,n,o,a){var s={x:0,y:0,z:0},c=o;return!(n&1<<o)&&n&1<<a&&(c=a),1&c&&r++,2&c&&t++,4&c&&e++,f?s={x:(s=(s=new $3Dmol.Vector3(e,t,r)).applyMatrix4(f)).x,y:s.y,z:s.z}:(s.x=u.x+l.x*e,s.y=u.y+l.y*t,s.z=u.z+l.z*r),e=(p*e+t)*m+r,h?(i.push(s),i.length-1):(0>g[e]&&(g[e]=i.length,i.push(s)),g[e])};var y=new Int32Array(12),b=c?n:t;for(c=c?o:r,s=0;s<d-1;++s)for(var x=0;x<p-1;++x)for(var w=0;w<m-1;++w){for(var D=0,C=0;8>C;++C)D|=!!(2&e[(p*(s+((4&C)>>2))+x+((2&C)>>1))*m+w+(1&C)])<<C;if(0!==D&&255!==D){var $=b[D];if(0!==$)for(C=c[D],1&$&&(y[0]=v(s,x,w,D,0,1)),2&$&&(y[1]=v(s,x,w,D,1,3)),4&$&&(y[2]=v(s,x,w,D,3,2)),8&$&&(y[3]=v(s,x,w,D,2,0)),16&$&&(y[4]=v(s,x,w,D,4,5)),32&$&&(y[5]=v(s,x,w,D,5,7)),64&$&&(y[6]=v(s,x,w,D,7,6)),128&$&&(y[7]=v(s,x,w,D,6,4)),256&$&&(y[8]=v(s,x,w,D,0,4)),512&$&&(y[9]=v(s,x,w,D,1,5)),1024&$&&(y[10]=v(s,x,w,D,3,7)),2048&$&&(y[11]=v(s,x,w,D,2,6)),D=0;D<C.length;D+=3){$=y[C[D]];var S=y[C[D+1]],A=y[C[D+2]];h&&3<=D&&(i.push(i[$]),$=i.length-1,i.push(i[S]),S=i.length-1,i.push(i[A]),A=i.length-1),a.push($),a.push(S),a.push(A)}}}},laplacianSmooth:function(e,t,r){var n,o,i=Array(t.length),a=0;for(n=t.length;a<n;a++)i[a]={x:0,y:0,z:0};var s=Array(20);for(a=0;20>a;a++)s[a]=Array(t.length);for(a=0,n=t.length;a<n;a++)s[0][a]=0;for(a=0,n=r.length/3;a<n;a++){var l=3*a,c=3*a+1,u=3*a+2,h=!0,f=0;for(o=s[0][r[l]];f<o;f++)if(r[c]==s[f+1][r[l]]){h=!1;break}for(h&&(s[0][r[l]]++,s[s[0][r[l]]][r[l]]=r[c]),h=!0,f=0,o=s[0][r[l]];f<o;f++)if(r[u]==s[f+1][r[l]]){h=!1;break}for(h&&(s[0][r[l]]++,s[s[0][r[l]]][r[l]]=r[u]),h=!0,f=0,o=s[0][r[c]];f<o;f++)if(r[l]==s[f+1][r[c]]){h=!1;break}for(h&&(s[0][r[c]]++,s[s[0][r[c]]][r[c]]=r[l]),h=!0,f=0,o=s[0][r[c]];f<o;f++)if(r[u]==s[f+1][r[c]]){h=!1;break}for(h&&(s[0][r[c]]++,s[s[0][r[c]]][r[c]]=r[u]),h=!0,f=0;f<s[0][r[u]];f++)if(r[l]==s[f+1][r[u]]){h=!1;break}for(h&&(s[0][r[u]]++,s[s[0][r[u]]][r[u]]=r[l]),h=!0,f=0,o=s[0][r[u]];f<o;f++)if(r[c]==s[f+1][r[u]]){h=!1;break}h&&(s[0][r[u]]++,s[s[0][r[u]]][r[u]]=r[c])}for(r=0;r<e;r++){for(a=0,n=t.length;a<n;a++)if(3>s[0][a])i[a].x=t[a].x,i[a].y=t[a].y,i[a].z=t[a].z;else if(3==s[0][a]||4==s[0][a]){for(i[a].x=0,i[a].y=0,f=i[a].z=0,o=s[0][a];f<o;f++)i[a].x+=t[s[f+1][a]].x,i[a].y+=t[s[f+1][a]].y,i[a].z+=t[s[f+1][a]].z;i[a].x+=.5*t[a].x,i[a].y+=.5*t[a].y,i[a].z+=.5*t[a].z,i[a].x/=.5+s[0][a],i[a].y/=.5+s[0][a],i[a].z/=.5+s[0][a]}else{for(i[a].x=0,i[a].y=0,f=i[a].z=0,o=s[0][a];f<o;f++)i[a].x+=t[s[f+1][a]].x,i[a].y+=t[s[f+1][a]].y,i[a].z+=t[s[f+1][a]].z;i[a].x+=1*t[a].x,i[a].y+=1*t[a].y,i[a].z+=1*t[a].z,i[a].x/=1+s[0][a],i[a].y/=1+s[0][a],i[a].z/=1+s[0][a]}for(a=0,n=t.length;a<n;a++)t[a].x=i[a].x,t[a].y=i[a].y,t[a].z=i[a].z}},edgeTable:[0,0,0,0,0,0,0,2816,0,0,0,1792,0,3328,3584,3840,0,0,0,138,0,21,0,134,0,0,0,652,0,2067,3865,3600,0,0,0,42,0,0,0,294,0,0,21,28,0,3875,1049,3360,0,168,162,170,0,645,2475,2210,0,687,293,172,4010,3747,3497,3232,0,0,0,0,0,69,0,900,0,0,0,1792,138,131,1608,1920,0,81,0,2074,84,85,84,86,0,81,0,3676,330,1105,1881,1616,0,0,0,42,0,69,0,502,0,0,21,3580,138,2035,1273,1520,2816,104,2337,106,840,581,367,102,2816,3695,3429,3180,1898,1635,1385,1120,0,0,0,0,0,0,0,3910,0,0,69,588,42,2083,41,2880,0,0,0,1722,0,2293,4095,3830,0,255,757,764,2538,2291,3065,2800,0,0,81,338,0,3925,1119,3414,84,855,85,340,2130,2899,89,2384,1792,712,194,1162,4036,3781,3535,3270,708,719,197,204,3018,2755,2505,2240,0,0,0,0,168,420,168,1958,162,162,676,2988,170,163,680,928,3328,3096,3328,3642,52,53,1855,1590,2340,2111,2869,2620,298,51,825,560,3584,3584,3090,3482,1668,1941,1183,1430,146,2975,2069,2460,154,915,153,400,3840,3592,3329,3082,1796,1541,1295,1030,2818,2575,2309,2060,778,515,265,0]},t=new Uint32Array(e.edgeTable),r=e.triTable=[[],[],[],[],[],[],[],[11,9,8],[],[],[],[8,10,9],[],[10,8,11],[9,11,10],[8,10,9,8,11,10],[],[],[],[1,7,3],[],[4,2,0],[],[2,1,7],[],[],[],[2,7,3,2,9,7],[],[1,4,11,1,0,4],[3,8,0,11,9,4,11,10,9],[4,11,9,11,10,9],[],[],[],[5,3,1],[],[],[],[2,5,8,2,1,5],[],[],[2,4,0],[3,2,4],[],[0,9,1,8,10,5,8,11,10],[3,4,0,3,10,4],[5,8,10,8,11,10],[],[3,5,7],[7,1,5],[1,7,3,1,5,7],[],[9,2,0,9,7,2],[0,3,8,1,7,11,1,5,7],[11,1,7,1,5,7],[],[9,1,0,5,3,2,5,7,3],[8,2,5,8,0,2],[2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[],[],[],[],[],[0,6,2],[],[7,2,9,7,9,8],[],[],[],[8,10,9],[7,1,3],[7,1,0],[6,9,3,6,10,9],[7,10,8,10,9,8],[],[6,0,4],[],[11,1,4,11,3,1],[2,4,6],[2,0,4,2,4,6],[2,4,6],[1,4,2,4,6,2],[],[6,0,4],[],[2,11,3,6,9,4,6,10,9],[8,6,1,8,1,3],[10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[],[],[],[5,3,1],[],[0,6,2],[],[7,4,8,5,2,1,5,6,2],[],[],[2,4,0],[7,4,8,2,11,3,10,5,6],[7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[9,11,8],[3,5,6],[0,5,11,0,11,8],[6,3,5,3,1,5],[3,9,6,3,8,9],[9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[],[],[],[],[],[],[],[1,10,2,9,11,6,9,8,11],[],[],[6,0,2],[3,6,9,3,2,6],[3,5,1],[0,5,1,0,11,5],[0,3,5],[6,9,11,9,8,11],[],[],[],[4,5,9,7,1,10,7,3,1],[],[11,6,7,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[],[],[0,6,4],[8,6,4,8,1,6],[],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[4,2,6],[1,0,9,2,4,8,2,6,4],[2,4,0,2,6,4],[8,2,4,2,6,4],[11,4,1,11,6,4],[0,9,1,4,11,6,4,8,11],[3,6,0,6,4,0],[8,6,4,8,11,6],[10,8,9],[6,3,9,6,7,3],[6,7,1],[10,7,1,7,3,1],[7,11,6,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2],[1,0,9,3,6,7,3,2,6],[7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[],[],[],[],[5,3,7],[8,5,2,8,7,5],[5,3,7],[1,10,2,5,8,7,5,9,8],[1,7,5],[1,7,5],[9,2,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[0,7,1,7,5,1],[9,3,5,3,7,5],[9,7,5,9,8,7],[8,10,11],[3,4,10,3,10,11],[8,10,11],[5,9,4,1,11,3,1,10,11],[2,4,5],[5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[2,8,5,2,11,8],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[11,9,10],[11,9,10],[1,11,4,1,10,11],[8,7,4,11,1,10,11,3,1],[2,7,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[1,7,4],[3,2,11,4,8,7,9,1,0],[11,4,2,4,0,2],[2,11,3,7,4,8],[4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[3,9,11,9,10,11],[0,10,8,10,11,8],[10,3,1,10,11,3],[2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]],n=[0,265,515,778,2060,2309,2575,2822,1030,1295,1541,1804,3082,3331,3593,3840,400,153,915,666,2460,2197,2975,2710,1430,1183,1941,1692,3482,3219,3993,3728,560,825,51,314,2620,2869,2111,2358,1590,1855,1077,1340,3642,3891,3129,3376,928,681,419,170,2988,2725,2479,2214,1958,1711,1445,1196,4010,3747,3497,3232,2240,2505,2755,3018,204,453,719,966,3270,3535,3781,4044,1226,1475,1737,1984,2384,2137,2899,2650,348,85,863,598,3414,3167,3925,3676,1370,1107,1881,1616,2800,3065,2291,2554,764,1013,255,502,3830,4095,3317,3580,1786,2035,1273,1520,2912,2665,2403,2154,876,613,367,102,3942,3695,3429,3180,1898,1635,1385,1120,1120,1385,1635,1898,3180,3429,3695,3942,102,367,613,876,2154,2403,2665,2912,1520,1273,2035,1786,3580,3317,4095,3830,502,255,1013,764,2554,2291,3065,2800,1616,1881,1107,1370,3676,3925,3167,3414,598,863,85,348,2650,2899,2137,2384,1984,1737,1475,1226,4044,3781,3535,3270,966,719,453,204,3018,2755,2505,2240,3232,3497,3747,4010,1196,1445,1711,1958,2214,2479,2725,2988,170,419,681,928,3376,3129,3891,3642,1340,1077,1855,1590,2358,2111,2869,2620,314,51,825,560,3728,3993,3219,3482,1692,1941,1183,1430,2710,2975,2197,2460,666,915,153,400,3840,3593,3331,3082,1804,1541,1295,1030,2822,2575,2309,2060,778,515,265,0],o=[[],[8,3,0],[9,0,1],[8,3,1,8,1,9],[11,2,3],[11,2,0,11,0,8],[11,2,3,0,1,9],[2,1,11,1,9,11,11,9,8],[10,1,2],[8,3,0,1,2,10],[9,0,2,9,2,10],[3,2,8,2,10,8,8,10,9],[10,1,3,10,3,11],[1,0,10,0,8,10,10,8,11],[0,3,9,3,11,9,9,11,10],[8,10,9,8,11,10],[8,4,7],[3,0,4,3,4,7],[1,9,0,8,4,7],[9,4,1,4,7,1,1,7,3],[2,3,11,7,8,4],[7,11,4,11,2,4,4,2,0],[3,11,2,4,7,8,9,0,1],[2,7,11,2,1,7,1,4,7,1,9,4],[10,1,2,8,4,7],[2,10,1,0,4,7,0,7,3],[4,7,8,0,2,10,0,10,9],[2,7,3,2,9,7,7,9,4,2,10,9],[8,4,7,11,10,1,11,1,3],[11,4,7,1,4,11,1,11,10,1,0,4],[3,8,0,7,11,4,11,9,4,11,10,9],[7,11,4,4,11,9,11,10,9],[9,5,4],[3,0,8,4,9,5],[5,4,0,5,0,1],[4,8,5,8,3,5,5,3,1],[11,2,3,9,5,4],[9,5,4,8,11,2,8,2,0],[3,11,2,1,5,4,1,4,0],[8,5,4,2,5,8,2,8,11,2,1,5],[2,10,1,9,5,4],[0,8,3,5,4,9,10,1,2],[10,5,2,5,4,2,2,4,0],[3,4,8,3,2,4,2,5,4,2,10,5],[5,4,9,1,3,11,1,11,10],[0,9,1,4,8,5,8,10,5,8,11,10],[3,4,0,3,10,4,4,10,5,3,11,10],[4,8,5,5,8,10,8,11,10],[9,5,7,9,7,8],[0,9,3,9,5,3,3,5,7],[8,0,7,0,1,7,7,1,5],[1,7,3,1,5,7],[11,2,3,8,9,5,8,5,7],[9,2,0,9,7,2,2,7,11,9,5,7],[0,3,8,2,1,11,1,7,11,1,5,7],[2,1,11,11,1,7,1,5,7],[1,2,10,5,7,8,5,8,9],[9,1,0,10,5,2,5,3,2,5,7,3],[5,2,10,8,2,5,8,5,7,8,0,2],[10,5,2,2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[11,7,6],[0,8,3,11,7,6],[9,0,1,11,7,6],[7,6,11,3,1,9,3,9,8],[2,3,7,2,7,6],[8,7,0,7,6,0,0,6,2],[1,9,0,3,7,6,3,6,2],[7,6,2,7,2,9,2,1,9,7,9,8],[1,2,10,6,11,7],[2,10,1,7,6,11,8,3,0],[11,7,6,10,9,0,10,0,2],[7,6,11,3,2,8,8,2,10,8,10,9],[6,10,7,10,1,7,7,1,3],[6,10,1,6,1,7,7,1,0,7,0,8],[9,0,3,6,9,3,6,10,9,6,3,7],[6,10,7,7,10,8,10,9,8],[8,4,6,8,6,11],[11,3,6,3,0,6,6,0,4],[0,1,9,4,6,11,4,11,8],[1,9,4,11,1,4,11,3,1,11,4,6],[3,8,2,8,4,2,2,4,6],[2,0,4,2,4,6],[1,9,0,3,8,2,2,8,4,2,4,6],[9,4,1,1,4,2,4,6,2],[10,1,2,11,8,4,11,4,6],[10,1,2,11,3,6,6,3,0,6,0,4],[0,2,10,0,10,9,4,11,8,4,6,11],[2,11,3,6,9,4,6,10,9],[8,4,6,8,6,1,6,10,1,8,1,3],[1,0,10,10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[9,5,4,7,6,11],[4,9,5,3,0,8,11,7,6],[6,11,7,4,0,1,4,1,5],[6,11,7,4,8,5,5,8,3,5,3,1],[4,9,5,6,2,3,6,3,7],[9,5,4,8,7,0,0,7,6,0,6,2],[4,0,1,4,1,5,6,3,7,6,2,3],[7,4,8,5,2,1,5,6,2],[6,11,7,1,2,10,9,5,4],[11,7,6,8,3,0,1,2,10,9,5,4],[11,7,6,10,5,2,2,5,4,2,4,0],[7,4,8,2,11,3,10,5,6],[4,9,5,6,10,7,7,10,1,7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[5,6,9,6,11,9,9,11,8],[0,9,5,0,5,3,3,5,6,3,6,11],[0,1,5,0,5,11,5,6,11,0,11,8],[11,3,6,6,3,5,3,1,5],[9,5,6,3,9,6,3,8,9,3,6,2],[5,6,9,9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[1,2,10,5,6,9,9,6,11,9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[10,6,5],[8,3,0,10,6,5],[0,1,9,5,10,6],[10,6,5,9,8,3,9,3,1],[3,11,2,10,6,5],[6,5,10,2,0,8,2,8,11],[1,9,0,6,5,10,11,2,3],[1,10,2,5,9,6,9,11,6,9,8,11],[1,2,6,1,6,5],[0,8,3,2,6,5,2,5,1],[5,9,6,9,0,6,6,0,2],[9,6,5,3,6,9,3,9,8,3,2,6],[11,6,3,6,5,3,3,5,1],[0,5,1,0,11,5,5,11,6,0,8,11],[0,5,9,0,3,5,3,6,5,3,11,6],[5,9,6,6,9,11,9,8,11],[10,6,5,4,7,8],[5,10,6,7,3,0,7,0,4],[5,10,6,0,1,9,8,4,7],[4,5,9,6,7,10,7,1,10,7,3,1],[7,8,4,2,3,11,10,6,5],[11,6,7,10,2,5,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[7,8,4,5,1,2,5,2,6],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,8,0,7,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,4,5,8,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[10,6,4,10,4,9],[8,3,0,9,10,6,9,6,4],[1,10,0,10,6,0,0,6,4],[8,6,4,8,1,6,6,1,10,8,3,1],[2,3,11,6,4,9,6,9,10],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,11,6,3,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[9,1,4,1,2,4,4,2,6],[1,0,9,3,2,8,2,4,8,2,6,4],[2,4,0,2,6,4],[3,2,8,8,2,4,2,6,4],[1,4,9,11,4,1,11,1,3,11,6,4],[0,9,1,4,11,6,4,8,11],[11,6,3,3,6,0,6,4,0],[8,6,4,8,11,6],[6,7,10,7,8,10,10,8,9],[9,3,0,6,3,9,6,9,10,6,7,3],[6,1,10,6,7,1,7,0,1,7,8,0],[6,7,10,10,7,1,7,3,1],[7,11,6,3,8,2,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2,2,9,1,7,8,9],[1,0,9,3,6,7,3,2,6],[8,0,7,7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[11,7,5,11,5,10],[3,0,8,7,5,10,7,10,11],[9,0,1,10,11,7,10,7,5],[3,1,9,3,9,8,7,10,11,7,5,10],[10,2,5,2,3,5,5,3,7],[5,10,2,8,5,2,8,7,5,8,2,0],[9,0,1,10,2,5,5,2,3,5,3,7],[1,10,2,5,8,7,5,9,8],[2,11,1,11,7,1,1,7,5],[0,8,3,2,11,1,1,11,7,1,7,5],[9,0,2,9,2,7,2,11,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[8,7,0,0,7,1,7,5,1],[0,3,9,9,3,5,3,7,5],[9,7,5,9,8,7],[4,5,8,5,10,8,8,10,11],[3,0,4,3,4,10,4,5,10,3,10,11],[0,1,9,4,5,8,8,5,10,8,10,11],[5,9,4,1,11,3,1,10,11],[3,8,4,3,4,2,2,4,5,2,5,10],[10,2,5,5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[8,4,5,2,8,5,2,11,8,2,5,1],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[4,5,8,8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[7,4,11,4,9,11,11,9,10],[3,0,8,7,4,11,11,4,9,11,9,10],[11,7,4,1,11,4,1,10,11,1,4,0],[8,7,4,11,1,10,11,3,1],[2,3,7,2,7,9,7,4,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[2,11,7,2,7,1,1,7,4,1,4,9],[3,2,11,4,8,7,9,1,0],[7,4,11,11,4,2,4,0,2],[2,11,3,7,4,8],[9,1,4,4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[0,9,3,3,9,11,9,10,11],[1,10,0,0,10,8,10,11,8],[10,3,1,10,11,3],[3,8,2,2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[2,11,1,1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]];return e},$3Dmol.MarchingCube=$3Dmol.MarchingCubeInitializer(),$3Dmol.Parsers=function(){var e={},t=function(e){for(var t,r,n,o=0,a=e.length;o<a;o++)e[o].index||(e[o].index=o);a={};for(var s=0;s<e.length;s++)o=e[s],n=Math.floor(o.x/4.95),r=Math.floor(o.y/4.95),t=Math.floor(o.z/4.95),a[n]||(a[n]={}),a[n][r]||(a[n][r]={}),a[n][r][t]||(a[n][r][t]=[]),a[n][r][t].push(o);for(n in e=[{x:0,y:0,z:1},{x:0,y:1,z:-1},{x:0,y:1,z:0},{x:0,y:1,z:1},{x:1,y:-1,z:-1},{x:1,y:-1,z:0},{x:1,y:-1,z:1},{x:1,y:0,z:-1},{x:1,y:0,z:0},{x:1,y:0,z:1},{x:1,y:1,z:-1},{x:1,y:1,z:0},{x:1,y:1,z:1}],a)for(r in a[n=parseInt(n)])for(t in r=parseInt(r),a[n][r]){for(t=parseInt(t),s=a[n][r][t],o=0;o<s.length;o++)for(var l=s[o],c=o+1;c<s.length;c++){var u=s[c];i(l,u)&&-1==l.bonds.indexOf(u.index)&&(l.bonds.push(u.index),l.bondOrder.push(1),u.bonds.push(l.index),u.bondOrder.push(1))}for(o=0;o<e.length;o++)if(a[n+(c=e[o]).x]&&a[n+c.x][r+c.y]&&a[n+c.x][r+c.y][t+c.z])for(l=s,c=a[n+c.x][r+c.y][t+c.z],u=0;u<l.length;u++)for(var h=l[u],f=0;f<c.length;f++){var d=c[f];if(i(h,d)){var p=h.bonds.indexOf(d.index),m=d.bonds.indexOf(h.index);-1==p&&-1==m?(h.bonds.push(d.index),h.bondOrder.push(1),d.bonds.push(h.index),d.bondOrder.push(1)):-1==p?(h.bonds.push(d.index),h.bondOrder.push(d.bondOrder[m])):-1==m&&(d.bonds.push(h.index),d.bondOrder.push(h.bondOrder[p]))}}}},r=function(e){var r,n=[],o=[],a=0;for(r=e.length;a<r;a++){var s=e[a];s.index=a,s.hetflag?o.push(s):n.push(s)}for(t(o),n.sort((function(e,t){return e.chain!=t.chain?e.chain<t.chain?-1:1:e.resi-t.resi})),o=e=-1,a=0,r=n.length;a<r;a++){if((s=n[a]).resi!==e){e=s.resi,l||o++;var l=!1}s.reschain=o;for(var c=a+1;c<n.length;c++){var u=n[c];if(u.chain!=s.chain)break;if(1<u.resi-s.resi)break;i(s,u)&&(-1===s.bonds.indexOf(u.index)&&(s.bonds.push(u.index),s.bondOrder.push(1),u.bonds.push(s.index),u.bondOrder.push(1)),s.resi!==u.resi&&(l=!0))}}},n=function(e){var t;!function(e){var t,r=[],n=0;for(t=e.length;n<t;n++){e[n].index=n;var o=e[n];o.hetflag||"N"!==o.atom&&"O"!==o.atom||(r.push(o),o.hbondOther=null,o.hbondDistanceSq=Number.POSITIVE_INFINITY)}for(r.sort((function(e,t){return e.z-t.z})),n=0,t=r.length;n<t;n++)for(o=r[n],e=n+1;e<t;e++){var i=r[e],a=i.z-o.z;if(3.2<a)break;if(i.atom!=o.atom){var s=Math.abs(i.y-o.y);if(!(3.2<s)){var l=Math.abs(i.x-o.x);3.2<l||10.24<(a=l*l+s*s+a*a)||i.chain==o.chain&&4>Math.abs(i.resi-o.resi)||(a<o.hbondDistanceSq&&(o.hbondOther=i,o.hbondDistanceSq=a),a<i.hbondDistanceSq&&(i.hbondOther=o,i.hbondDistanceSq=a))}}}}(e);var r,n={},o=0;for(t=e.length;o<t;o++){var i=e[o];if(void 0===n[i.chain]&&(n[i.chain]=[]),isFinite(i.hbondDistanceSq)){var a=i.hbondOther;void 0===n[a.chain]&&(n[a.chain]=[]),4===Math.abs(a.resi-i.resi)&&(n[i.chain][i.resi]="h")}}for(r in n)for(i=1;i<n[r].length-1;i++)t=n[r][i-1],o=n[r][i+1],a=n[r][i],"h"==t&&t==o&&a!=t&&(n[r][i]=t);for(o=0,t=e.length;o<t;o++)i=e[o],isFinite(i.hbondDistanceSq)&&"h"!=n[i.chain][i.resi]&&"h"!=i.ss&&(n[i.chain][i.resi]="maybesheet");for(o=0,t=e.length;o<t;o++)if(i=e[o],isFinite(i.hbondDistanceSq)&&"maybesheet"==n[i.chain][i.resi]){var s=n[(a=i.hbondOther).chain][a.resi];"maybesheet"!=s&&"s"!=s||(n[i.chain][i.resi]="s",n[a.chain][a.resi]="s")}for(r in n){for(i=1;i<n[r].length-1;i++)t=n[r][i-1],o=n[r][i+1],a=n[r][i],"s"==t&&t==o&&a!=t&&(n[r][i]=t);for(i=0;i<n[r].length;i++)"h"!=(a=n[r][i])&&"s"!=a||n[r][i-1]==a||n[r][i+1]==a||delete n[r][i]}for(o=0,t=e.length;o<t;o++)void 0!==(a=n[(i=e[o]).chain][i.resi])&&"maybesheet"!=a&&(i.ss=a,n[i.chain][i.resi-1]!=a&&(i.ssbegin=!0),n[i.chain][i.resi+1]!=a&&(i.ssend=!0))};e.vasp=e.VASP=function(e,t){t=[[]];var r=e.replace(/^\s+/,"").split(/[\n\r]/);if(3>r.length)return t;if(!r[1].match(/\d+/))return console.log("Warning: second line of the vasp structure file must be a number"),t;if(0>(e=parseFloat(r[1])))return console.log("Warning: Vasp implementation for negative lattice lengths is not yet available"),t;var n=new Float32Array(r[2].replace(/^\s+/,"").split(/\s+/)),o=new Float32Array(r[3].replace(/^\s+/,"").split(/\s+/)),i=new Float32Array(r[4].replace(/^\s+/,"").split(/\s+/)),a=new $3Dmol.Matrix4(n[0],n[1],n[2],0,o[0],o[1],o[2],0,i[0],i[1],i[2],0,0,0,0,1);a.multiplyScalar(e),t.modelData=[{symmetries:[],cryst:{matrix:a}}],a=r[5].replace(/\s+/,"").replace(/\s+$/,"").split(/\s+/);var s=new Int16Array(r[6].replace(/^\s+/,"").split(/\s+/)),l=r[7].replace(/\s+/,"");if(l.match(/C/))l="cartesian";else{if(!l.match(/D/))return console.log("Warning: Unknown vasp mode in POSCAR file: mode must be either C(artesian) or D(irect)"),t;l="direct"}if(a.length!=s.length)return console.log("Warning: declaration of atomary species wrong:"),console.log(a),console.log(s),t;r.splice(0,8);for(var c=0,u=0,h=a.length;u<h;u++){for(var f=a[u],d=0,p=s[u];d<p;d++){var m=new Float32Array(r[c+d].replace(/^\s+/,"").split(/\s+/)),v={};v.elem=f,"cartesian"==l?(v.x=e*m[0],v.y=e*m[1],v.z=e*m[2]):(v.x=e*(m[0]*n[0]+m[1]*o[0]+m[2]*i[0]),v.y=e*(m[0]*n[1]+m[1]*o[1]+m[2]*i[1]),v.z=e*(m[0]*n[2]+m[1]*o[2]+m[2]*i[2])),v.bonds=[],t[0].push(v)}c+=s[u]}return t},e.cube=e.CUBE=function(e,r){if(r=[[]],6>(e=e.replace(/^\s+/,"").split(/\n\r|\r+/)).length)return r;var n=e[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),o=Math.abs(parseFloat(n[0]));n=e[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),n=0<parseFloat(n[0])?.529177:1,e=e.splice(6,o);for(var i=(o=r[r.length-1].length)+e.length,a=o;a<i;++a){var s={};s.serial=a;var l=e[a-o].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");6==l[0]?s.elem="C":1==l[0]?s.elem="H":8==l[0]?s.elem="O":17==l[0]&&(s.elem="Cl"),s.x=parseFloat(l[2])*n,s.y=parseFloat(l[3])*n,s.z=parseFloat(l[4])*n,s.hetflag=!0,s.bonds=[],s.bondOrder=[],s.properties={},r[r.length-1].push(s)}for(a=0;a<r.length;a++)t(r[a]);return r},e.xyz=e.XYZ=function(e,r){for(var n=[[]],o=e.split(/\r?\n|\r/);0<o.length&&!(3>o.length);){var i=parseInt(o[0]);if(isNaN(i)||0>=i)break;if(o.length<i+2)break;e=2;var a=n[n.length-1].length;for(i=a+i;a<i;a++){var s=o[e++].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),l={};l.serial=a;var c=s[0];l.atom=l.elem=c[0].toUpperCase()+c.substr(1).toLowerCase(),l.x=parseFloat(s[1]),l.y=parseFloat(s[2]),l.z=parseFloat(s[3]),l.hetflag=!0,l.bonds=[],l.bondOrder=[],l.properties={},n[n.length-1][a]=l,7<=s.length&&(l.dx=parseFloat(s[4]),l.dy=parseFloat(s[5]),l.dz=parseFloat(s[6]))}if(!r.multimodel)break;n.push([]),o.splice(0,e)}for(a=0;a<n.length;a++)t(n[a]);if(r.onemol)for(r=n,(n=[]).push(r[0]),a=1;a<r.length;a++)for(e=n[0].length,o=0;o<r[a].length;o++){for(i=r[a][o],s=0;s<i.bonds.length;s++)i.bonds[s]+=e;i.index=n[0].length,i.serial=n[0].length,n[0].push(i)}return n},e.sdf=e.SDF=function(e,t){var r=[[]],n=!1;for(void 0!==t.keepH&&(n=!t.keepH),e=e.split(/\r?\n|\r/);0<e.length&&!(4>e.length);){var o=parseInt(e[3].substr(0,3));if(isNaN(o)||0>=o)break;var i=parseInt(e[3].substr(3,3)),a=4;if(e.length<4+o+i)break;var s=[],l=r[r.length-1].length,c=l+o;for(o=l;o<c;o++,a++){var u=e[a],h={},f=u.substr(31,3).replace(/ /g,"");h.atom=h.elem=f[0].toUpperCase()+f.substr(1).toLowerCase(),"H"==h.elem&&n||(h.serial=o,s[o]=r[r.length-1].length,h.x=parseFloat(u.substr(0,10)),h.y=parseFloat(u.substr(10,10)),h.z=parseFloat(u.substr(20,10)),h.hetflag=!0,h.bonds=[],h.bondOrder=[],h.properties={},h.index=r[r.length-1].length,r[r.length-1].push(h))}for(o=0;o<i;o++,a++)u=e[a],c=s[parseInt(u.substr(0,3))-1+l],h=s[parseInt(u.substr(3,3))-1+l],u=parseInt(u.substr(6,3)),void 0!==c&&void 0!==h&&(r[r.length-1][c].bonds.push(h),r[r.length-1][c].bondOrder.push(u),r[r.length-1][h].bonds.push(c),r[r.length-1][h].bondOrder.push(u));if(!t.multimodel)break;for(t.onemol||r.push([]);"$$$$"!=e[a];)a++;e.splice(0,++a)}return r},e.cdjson=e.json=function(e,t){var r=[[]];"string"==typeof e&&(e=JSON.parse(e));var n=e.m,o=n[0].a;e=n[0].b;var i=n[0].s,a=void 0!==t&&void 0!==t.parseStyle?t.parseStyle:void 0!==i;for(t=r[r.length-1].length,n=0;n<o.length;n++){var s=o[n],l={};l.id=s.i,l.x=s.x,l.y=s.y,l.z=s.z||0,l.bonds=[],l.bondOrder=[];var c=s.l||"C";l.elem=c[0].toUpperCase()+c.substr(1).toLowerCase(),l.serial=r[r.length-1].length,a&&(l.style=i[s.s||0]),r[r.length-1].push(l)}for(n=0;n<e.length;n++)o=(a=e[n]).b+t,i=a.e+t,a=a.o||1,s=r[r.length-1][o],l=r[r.length-1][i],s.bonds.push(i),s.bondOrder.push(a),l.bonds.push(o),l.bondOrder.push(a);return r},e.mcif=e.cif=function(e,r){function o(e,t){for(var r=[],n=0,o=0;o<e.length;){for(;e.substr(o,t.length)!==t&&o<e.length;){if("'"===e[o])for(o++;o<e.length&&"'"!==e[o];)o++;else if('"'===e[o])for(o++;o<e.length&&'"'!==e[o];)o++;o++}r.push(e.substr(n,o-n)),n=o+=t.length}return r}var i=[],s=!r.doAssembly;r=!r.duplicateAssemblyAtoms;var l=i.modelData=[],c=e.split(/\r?\n|\r/);e=[];for(var u=!1,h=0;h<c.length;h++){var f=c[h].split("#")[0];if(u?";"===f[0]&&(u=!1):";"===f[0]&&(u=!0),u||""!==f){if(!u&&"_"===(f=f.trim())[0]){var d=f.split(/\s/)[0].indexOf(".");-1<d&&(f[d]="_",f=f.substr(0,d)+"_"+f.substr(d+1))}e.push(f)}}for(h=0;h<e.length;){for(c=function(e){var t=e.match("-"),r=void 0===(e=(e=e.replace(/[-xyz]/g,"")).split("/"))[1]?1:parseInt(e[1]);return(""===e[0]?1:parseInt(e[0]))/r*(t?-1:1)},d=function(e,t,r){return{x:$[0][0]*e+$[0][1]*t+$[0][2]*r,y:$[1][0]*e+$[1][1]*t+$[1][2]*r,z:$[2][0]*e+$[2][1]*t+$[2][2]*r}};!e[h].startsWith("data_")||"data_global"===e[h];)h++;for(h++,u={};h<e.length&&!e[h].startsWith("data_");)if(void 0===e[h][0])h++;else if("_"===e[h][0]){var p=e[h].split(/\s/)[0].toLowerCase();f=u[p]=u[p]||[];var m=e[h].substr(e[h].indexOf(p)+p.length);if(""===m)if(";"===e[++h][0]){for(m=e[h].substr(1),h++;";"!==e[h];)m=m+"\n"+e[h],h++;f.push(m)}else f.push(e[h]);else f.push(m.trim());h++}else if("loop_"===e[h].substr(0,5)){for(h++,m=[];""===e[h]||"_"===e[h][0];)""!==e[h]&&(f=u[p=e[h].split(/\s/)[0].toLowerCase()]=u[p]||[],m.push(f)),h++;for(p=0;h<e.length&&"_"!==e[h][0]&&!e[h].startsWith("loop_")&&!e[h].startsWith("data_");){f=o(e[h]," ");for(var v=0;v<f.length;v++)""!==f[v]&&(m[p].push(f[v]),p=(p+1)%m.length);h++}}else h++;if(l.push({symmetries:[]}),i.push([]),m=void 0!==u._atom_site_id?u._atom_site_id.length:u._atom_site_label.length,void 0!==u._cell_length_a){f=parseFloat(u._cell_length_a),p=parseFloat(u._cell_length_b),v=parseFloat(u._cell_length_c);var g=parseFloat(u._cell_angle_alpha)||90,y=parseFloat(u._cell_angle_beta)||90,b=parseFloat(u._cell_angle_gamma)||90,x=b*Math.PI/180,w=Math.cos(g*Math.PI/180),D=Math.cos(y*Math.PI/180),C=Math.cos(x),$=[[f,p*C,v*D],[0,p*(x=Math.sin(x)),v*(w-D*C)/x],[0,0,v*Math.sqrt(1-w*w-D*D-C*C+2*w*D*C)/x]];l[l.length-1].cryst={a:f,b:p,c:v,alpha:g,beta:y,gamma:b}}for(f=0;f<m;f++)void 0!==u._atom_site_group_pdb&&"TER"===u._atom_site_group_pdb[f]||(p={},void 0!==u._atom_site_cartn_x?(p.x=parseFloat(u._atom_site_cartn_x[f]),p.y=parseFloat(u._atom_site_cartn_y[f]),p.z=parseFloat(u._atom_site_cartn_z[f])):(v=d(parseFloat(u._atom_site_fract_x[f]),parseFloat(u._atom_site_fract_y[f]),parseFloat(u._atom_site_fract_z[f])),p.x=v.x,p.y=v.y,p.z=v.z),p.chain=u._atom_site_auth_asym_id?u._atom_site_auth_asym_id[f]:void 0,p.resi=u._atom_site_auth_seq_id?parseInt(u._atom_site_auth_seq_id[f]):void 0,p.resn=u._atom_site_auth_comp_id?u._atom_site_auth_comp_id[f].trim():void 0,p.atom=u._atom_site_auth_atom_id?u._atom_site_auth_atom_id[f].replace(/"/gm,""):void 0,p.hetflag=!u._atom_site_group_pdb||"HETA"===u._atom_site_group_pdb[f]||"HETATM"===u._atom_site_group_pdb[f],v=u._atom_site_type_symbol[f],p.elem=v[0].toUpperCase()+v.substr(1).toLowerCase(),p.bonds=[],p.ss="c",p.serial=f,p.bondOrder=[],p.properties={},i[i.length-1].push(p));if(void 0!==u._pdbx_struct_oper_list_id&&!s){for(f=0;f<u._pdbx_struct_oper_list_id.length;f++){d=parseFloat(u["_pdbx_struct_oper_list_matrix[1][1]"][f]),m=parseFloat(u["_pdbx_struct_oper_list_matrix[1][2]"][f]),p=parseFloat(u["_pdbx_struct_oper_list_matrix[1][3]"][f]),v=parseFloat(u["_pdbx_struct_oper_list_vector[1]"][f]),g=parseFloat(u["_pdbx_struct_oper_list_matrix[2][1]"][f]),y=parseFloat(u["_pdbx_struct_oper_list_matrix[2][2]"][f]),b=parseFloat(u["_pdbx_struct_oper_list_matrix[2][3]"][f]),w=parseFloat(u["_pdbx_struct_oper_list_vector[2]"][f]),D=parseFloat(u["_pdbx_struct_oper_list_matrix[3][1]"][f]),C=parseFloat(u["_pdbx_struct_oper_list_matrix[3][2]"][f]),x=parseFloat(u["_pdbx_struct_oper_list_matrix[3][3]"][f]);var S=parseFloat(u["_pdbx_struct_oper_list_vector[3]"][f]);d=new $3Dmol.Matrix4(d,m,p,v,g,y,b,w,D,C,x,S),l[l.length-1].symmetries.push(d)}for(f=0;f<i.length;f++)a(l[l.length-1].symmetries,r,i[f])}if(void 0!==u._symmetry_equiv_pos_as_xyz)for(f=0;f<u._symmetry_equiv_pos_as_xyz.length;f++){for(m=u._symmetry_equiv_pos_as_xyz[f].replace(/["' ]/g,"").split(",").map((function(e){return e.replace(/-/g,"+-")})),d=new $3Dmol.Matrix4(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1),p=0;3>p;p++)for(v=m[p].split("+"),g=0;g<v.length;g++)""!==(y=v[g])&&(b=c(y),y.match("x")?d.elements[p+0]=b:y.match("y")?d.elements[p+4]=b:y.match("z")?d.elements[p+8]=b:d.elements[p+12]=b);m=new $3Dmol.Matrix4($[0][0],$[0][1],$[0][2],0,$[1][0],$[1][1],$[1][2],0,$[2][0],$[2][1],$[2][2],0),p=(new $3Dmol.Matrix4).getInverse(m,!0),d=(new $3Dmol.Matrix4).multiplyMatrices(d,p),d=(new $3Dmol.Matrix4).multiplyMatrices(m,d),l[l.length-1].symmetries.push(d)}}for(f=0;f<i.length;f++)t(i[f]),n(i[f]),a(l[f].symmetries,r,i[f]);return i},e.mol2=e.MOL2=function(e,t){var r=[[]],n=!1;void 0!==t.keepH&&(n=!t.keepH);var o=e.search(/@<TRIPOS>MOLECULE/),i=e.search(/@<TRIPOS>ATOM/);if(-1==o||-1==i)return r;for(e=e.substr(o,e.length).split(/\r?\n|\r/);0<e.length;){o=[];var a=e[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),s=parseInt(a[0]);i=0,1<a.length&&(i=parseInt(a[1]));var l,c=4;for(l=3;l<e.length;l++)if("@<TRIPOS>ATOM"==e[l]){c=l+1;break}for(s=(l=r[r.length-1].length)+s;l<s;l++){var u={},h=(a=(a=e[c++]).replace(/^\s+/,"").replace(/\s+/g," ").split(" "))[5].split(".")[0];if(u.atom=u.elem=h[0].toUpperCase()+h.substr(1).toLowerCase(),"H"!=u.elem||!n){h=r[r.length-1].length;var f=parseInt(a[0]);u.serial=f,u.x=parseFloat(a[2]),u.y=parseFloat(a[3]),u.z=parseFloat(a[4]),u.atom=a[5],a=parseFloat(a[8]),u.index=h,u.bonds=[],u.bondOrder=[],u.properties={charge:a,partialCharge:a},o[f]=h,r[r.length-1].push(u)}}for(l=!1;c<e.length;)if("@<TRIPOS>BOND"==e[c++]){l=!0;break}if(l&&i)for(l=0;l<i;l++)a=(a=e[c++]).replace(/^\s+/,"").replace(/\s+/g," ").split(" "),s=parseInt(a[1]),u=r[r.length-1][o[s]],h=parseInt(a[2]),f=r[r.length-1][o[h]],a=parseInt(a[3]),isNaN(a)&&(a=1),void 0!==u&&void 0!==f&&(u.bonds.push(o[h]),u.bondOrder.push(a),f.bonds.push(o[s]),f.bondOrder.push(a));if(!t.multimodel)break;t.onemol||r.push([]),e.splice(0,c),e.join("\n")}return r};var o={H:.37,He:.32,Li:1.34,Be:.9,B:.82,C:.77,N:.75,O:.73,F:.71,Ne:.69,Na:1.54,Mg:1.3,Al:1.18,Si:1.11,P:1.06,S:1.02,Cl:.99,Ar:.97,K:1.96,Ca:1.74,Sc:1.44,Ti:1.56,V:1.25,Mn:1.39,Fe:1.25,Co:1.26,Ni:1.21,Cu:1.38,Zn:1.31,Ga:1.26,Ge:1.22,Se:1.16,Br:1.14,Kr:1.1,Rb:2.11,Sr:1.92,Y:1.62,Zr:1.48,Nb:1.37,Mo:1.45,Tc:1.56,Ru:1.26,Rh:1.35,Pd:1.31,Ag:1.53,Cd:1.48,In:1.44,Sn:1.41,Sb:1.38,Te:1.35,I:1.33,Xe:1.3,Cs:2.25,Ba:1.98,Lu:1.6,Hf:1.5,Ta:1.38,W:1.46,Re:1.59,Os:1.44,Ir:1.37,Pt:1.28,Au:1.44,Hg:1.49,Tl:1.48,Pb:1.47,Bi:1.46,Rn:1.45},i=function(e,t){var r=(o[e.elem]||1.6)+(o[t.elem]||1.6);r+=.25,r*=r;var n=e.x-t.x;if((n*=n)>r)return!1;var i=e.y-t.y;if((i*=i)>r)return!1;var a=e.z-t.z;return!((a*=a)>r)&&(n=n+i+a,!isNaN(n)&&(!(.5>n)&&(!(n>r)&&(e.altLoc==t.altLoc||" "==e.altLoc||" "==t.altLoc))))},a=function(e,t,r){var n,o,i=r.length,a=i;if(t){if(1<e.length)for(t=0;t<r.length;t++){for(i=[],n=0;n<e.length;n++)e[n].isIdentity()||((a=new $3Dmol.Vector3).set(r[t].x,r[t].y,r[t].z),a.applyMatrix4(e[n]),i.push(a));r[t].symmetries=i}}else for(t=0;t<e.length;t++)if(!e[t].isIdentity()){var s=new $3Dmol.Vector3;for(o=0;o<i;o++){var l=[];for(n=0;n<r[o].bonds.length;n++)l.push(r[o].bonds[n]+a);for(var c in s.set(r[o].x,r[o].y,r[o].z),s.applyMatrix4(e[t]),n={},r[o])n[c]=r[o][c];n.x=s.x,n.y=s.y,n.z=s.z,n.bonds=l,r.push(n)}a=r.length}},s=function(e,t){return 0<(e=e.replace(/ /g,"")).length&&"H"==e[0]&&"Hg"!=e&&(e="H"),1<e.length&&(e=e[0].toUpperCase()+e.substr(1).toLowerCase(),void 0===o[e]?e=e[0]:t&&("Ca"==e||"Cd"==e)&&(e="C")),e};e.pdb=e.PDB=e.pdbqt=e.PDBQT=function(e,t){var i=[],l={};i.modelData=[];for(var c=e.split(/\r?\n|\r/);0<c.length;){var u,h=c;e=l,c=[];var f=!t.keepH,d=!!t.noSecondaryStructure,p=!t.noComputeSecondaryStructure,m=!t.doAssembly,v=!t.duplicateAssemblyAtoms,g=t.altLoc?t.altLoc:"A",y={symmetries:[]},b=[],x=[],w={};for(u=0;u<h.length;u++){var D=h[u].replace(/^\s*/,""),C=D.substr(0,6);if(0==C.indexOf("END")){if(b=h.slice(u+1),"END"==C)for(var $ in e)e.hasOwnProperty($)&&delete e[$];break}if("ATOM  "==C||"HETATM"==C){var S=D.substr(16,1);if(" "==S||S==g||"*"==g){var A=parseInt(D.substr(6,5)),_=D.substr(12,4).replace(/ /g,""),M=D.substr(17,3).replace(/ /g,""),z=D.substr(21,1),T=parseInt(D.substr(22,4)),L=D.substr(26,1),E=parseFloat(D.substr(30,8)),F=parseFloat(D.substr(38,8)),k=parseFloat(D.substr(46,8)),I=parseFloat(D.substr(60,8)),O=D.substr(76,2).replace(/ /g,"");"H"==(O=""===O||void 0===o[O]?s(D.substr(12,2),"A"==D[0]):O[0].toUpperCase()+O.substr(1).toLowerCase())&&f||(C="H"==C[0],x[A]=c.length,c.push({resn:M,x:E,y:F,z:k,elem:O,hetflag:C,altLoc:S,chain:z,resi:T,icode:L,rescode:T+(" "!=L?"^"+L:""),serial:A,atom:_,bonds:[],ss:"c",bondOrder:[],properties:{},b:I,pdbline:D}))}}else if("SHEET "==C){I=D.substr(21,1),_=parseInt(D.substr(22,4)),D.substr(32,1),D=parseInt(D.substr(33,4)),I in e||(e[I]={}),e[I][_]="s1";for(_+=1;_<D;_++)e[I][_]="s";e[I][D]="s2"}else if("CONECT"==C){for(A=c[_=x[I=parseInt(D.substr(6,5))]],M=[11,16,21,26],I=0;4>I;I++)if(T=c[z=x[z=parseInt(D.substr(M[I],5))]],void 0!==A&&void 0!==T)if(w[[_,z]])for(w[[_,z]]+=1,T=0;T<A.bonds.length;T++)A.bonds[T]==z&&(L=w[[_,z]],A.bondOrder[T]=4<=L?1:L);else w[[_,z]]=1,(0==A.bonds.length||A.bonds[A.bonds.length-1]!=z)&&(A.bonds.push(z),A.bondOrder.push(1))}else if("HELIX "==C){I=D.substr(19,1),_=parseInt(D.substr(21,4)),D.substr(31,1),D=parseInt(D.substr(33,4)),I in e||(e[I]={}),e[I][_]="h1";for(_+=1;_<D;_++)e[I][_]="h";e[I][D]="h2"}else if(m||"REMARK"!=C||"BIOMT"!=D.substr(13,5))"CRYST1"==C?(_=parseFloat(D.substr(7,8)),I=parseFloat(D.substr(16,8)),A=parseFloat(D.substr(25,8)),M=parseFloat(D.substr(34,6)),z=parseFloat(D.substr(41,6)),D=parseFloat(D.substr(48,6)),y.cryst={a:_,b:I,c:A,alpha:M,beta:z,gamma:D}):"ANISOU"==C&&(I=c[x[A=parseInt(D.substr(6,5))]])&&(D=D.substr(30).trim().split(/\s+/),D={u11:parseInt(D[0]),u22:parseInt(D[1]),u33:parseInt(D[2]),u12:parseInt(D[3]),u13:parseInt(D[4]),u23:parseInt(D[5])},I.uMat=D);else{for(_=new $3Dmol.Matrix4,I=1;3>=I;I++)if(D=h[u].replace(/^\s*/,""),parseInt(D.substr(18,1))==I)_.elements[I-1]=parseFloat(D.substr(23,10)),_.elements[I-1+4]=parseFloat(D.substr(33,10)),_.elements[I-1+8]=parseFloat(D.substr(43,10)),_.elements[I-1+12]=parseFloat(D.substr(53)),u++;else for(;"BIOMT"==D.substr(13,5);)D=h[++u].replace(/^\s*/,"");_.elements[3]=0,_.elements[7]=0,_.elements[11]=0,_.elements[15]=1,y.symmetries.push(_),u--}}for((new Date).getTime(),h=0,f=(u=c).length;h<f;h++)for(g=u[h],w=0;w<g.bonds.length;w++)D=u[g.bonds[w]],I=x[g.serial],D&&I&&0>D.bonds.indexOf(I)&&(D.bonds.push(I),D.bondOrder.push(g.bondOrder[w]));r(c),m||a(y.symmetries,v,c),p&&!d&&((new Date).getTime(),n(c)),(new Date).getTime();e:{for(d in d=void 0,p=e){d=!1;break e}d=!0}if(!d)for(u=0;u<c.length;u++)void 0!==(_=c[u])&&_.chain in e&&_.resi in e[_.chain]&&(d=e[_.chain][_.resi],_.ss=d[0],1<d.length&&("1"==d[1]?_.ssbegin=!0:"2"==d[1]&&(_.ssend=!0)));if(e=(c=[c,y,b])[0],y=c[1],c=c[2],0!=e.length){if(t.multimodel&&t.onemol&&0<i.length)for(y=i[0].length,b=0;b<e.length;b++){for((d=e[b]).index=b,p=0;p<d.bonds.length;p++)d.bonds[p]+=y;i[0].push(d)}else i.modelData.push(y),i.push(e);if(!t.multimodel)break}}return i},e.pqr=e.PQR=function(e,t){var o=[[]],i=!t.noSecondaryStructure;o.modelData=[{symmetries:[]}];var a,s=[];for(e=e.split(/\r?\n|\r/),a=0;a<e.length;a++){var l=e[a].replace(/^\s*/,""),c=l.substr(0,6);if(0==c.indexOf("END")){if(!t.multimodel)break;t.onemol||o.push([])}else if("ATOM  "==c||"HETATM"==c){var u=parseInt(l.substr(6,5));c=l.substr(12,4).replace(/ /g,"");var h=l.substr(17,3),f=l.substr(21,1),d=parseInt(l.substr(22,4)),p=l.substr(30).trim().split(/\s+/),m=parseFloat(p[0]),v=parseFloat(p[1]),g=parseFloat(p[2]),y=parseFloat(p[3]),b=parseFloat(p[4]),x=c[0];1<c.length&&c[1].toUpperCase()!=c[1]&&(x=c.substr(0,2)),p="H"==l[0],s[u]=o[o.length-1].length,o[o.length-1].push({resn:h,x:m,y:v,z:g,elem:x,hetflag:p,chain:f,resi:d,serial:u,atom:c,bonds:[],ss:"c",bondOrder:[],properties:{charge:y,partialCharge:y,radius:b},pdbline:l})}else if("CONECT"==c)for(c=parseInt(l.substr(6,5)),u=o[o.length-1][s[c]],c=0;4>c;c++)h=parseInt(l.substr([11,16,21,26][c],5)),f=o[o.length-1][s[h]],void 0!==u&&void 0!==f&&(u.bonds.push(s[h]),u.bondOrder.push(1))}for(a=0;a<o.length;a++)r(o[a]),i&&n(o[a]);return o};var l=function(e){return 0==e||2==e||4==e?"h":3==e?"s":"c"};return e.mmtf=e.MMTF=function(e,t){var r=!t.keepH,o=t.altLoc?t.altLoc:"A",i=!!t.noSecondaryStructure,s=!t.noComputeSecondaryStructure,c=!t.doAssembly,u=!t.duplicateAssemblyAtoms,h=t.assemblyIndex?t.assemblyIndex:0;"string"==typeof e&&(e=$3Dmol.base64ToArray(e)),e=MMTF.decode(e);var f=[[]],d=f.modelData=[],p=0,m=0,v=0,g=0,y=e.secStructList,b=e.insCodeList,x=e.bFactorList,w=e.altLocList,D=e.occupancyList,C=e.bondAtomList,$=e.bondOrderList,S=e.numModels;if(0==S)return f;t.multimodel||(S=1);var A,_=[];if(!c&&e.bioAssemblyList&&0<e.bioAssemblyList.length){var M=e.bioAssemblyList[h].transformList;for(h=0,A=M.length;h<A;h++){var z=new $3Dmol.Matrix4(M[h].matrix);z.transpose(),_.push(z)}}z=null,e.unitCell&&(z={a:(h=e.unitCell)[0],b:h[1],c:h[2],alpha:h[3],beta:h[4],gamma:h[5]});var T=0;for(M=0;M<S;M++){var L=e.chainsPerModel[M],E=f[f.length-1],F=[];for(d.push({symmetries:_,cryst:z}),h=0;h<L;++h){var k=e.groupsPerChain[m],I=String.fromCharCode.apply(null,e.chainIdList.subarray(4*m,4*m+4)).replace(/\0/g,"");e.chainNameList&&(I=String.fromCharCode.apply(null,e.chainNameList.subarray(4*m,4*m+4)).replace(/\0/g,""));var O=v,P="";for(A=0;A<k;++A){var N=e.groupList[e.groupTypeList[v]],j=N.atomNameList.length,R=0,V=!1,B=!1;if(y){R=y[v];var U=l(R);0!=v&&U==P||(V=!0),P=U;var G=v+1;(G>=y.length||l(y[G]!=U))&&(B=!0)}e.insCodeList&&String.fromCharCode(b[v]);var q=e.groupIdList[v],H=N.groupName;for(G=g,U=0;U<j;++U){var W=N.elementList[U];if(!r||"H"!=W){var Y="";x&&(Y=x[g]);var Z="";w&&w[g]&&(Z=String.fromCharCode(w[g]));var X="";if(D&&(X=D[g]),""==Z||Z==o||"*"==o){var K=e.atomIdList[g],Q=N.atomNameList[U],J=0;N.atomChargeList&&(J=N.atomChargeList[U]);var ee=e.xCoordList[g],te=e.yCoordList[g],re=e.zCoordList[g];F[g]=E.length,E.push({resn:H,x:ee,y:te,z:re,elem:W,hetflag:0>R,chain:I,resi:q,icode:Z,rescode:q+(" "!=Z?"^"+Z:""),serial:K,altLoc:Z,index:g,atom:Q,bonds:[],ss:l(R),ssbegin:V,ssend:B,bondOrder:[],properties:{charge:J,occupancy:X},b:Y})}}g+=1}for(V=N.bondAtomList,U=0,R=N.bondOrderList.length;U<R;++U)B=G+V[2*U],q=G+V[2*U+1],j=N.bondOrderList[U],B=F[B],W=F[q],H=E[B],q=E[W],H&&q&&(H.bonds.push(W),H.bondOrder.push(j),q.bonds.push(B),q.bondOrder.push(j));v+=1}for(v=O,A=0;A<k;++A)v+=1;m+=1}if(C)for(U=T,R=C.length;U<R;U+=2){if(B=C[U],q=C[U+1],j=$?$[U/2]:1,B>=g){T=U;break}B=F[B],W=F[q],H=E[B],q=E[W],H&&q&&(H.bonds.push(W),H.bondOrder.push(j),q.bonds.push(B),q.bondOrder.push(j))}if(t.multimodel&&(t.onemol||f.push([])),!c)for(A=0;A<f.length;A++)a(d[p].symmetries,u,f[A]);p+=1}return s&&!i&&n(f),f},e.prmtop=e.PRMTOP=function(e,t){function r(e){var t=a.indexOf(s.filter((function(t){return t.includes(e)}))[0]);if(Number.isInteger(t)&&0<t){for(;!a[t].includes("FORMAT");)t++;return t}return-1}function n(e){var t=a[e].match(/\((\d*)\S*/),r=a[e].match(/[a-zA-Z](\d*)\)\s*/);return null==r&&(r=a[e].match(/[a-zA-Z](\d*)\.\d*\)\s*/)),[t[1],r[1]]}var o;t=[];var i=0,a=e.split(/\r?\n|\r/);if(!(0<a.length&&a[0].includes("VERSION")))return[];var s=a.filter((function(e){return e.includes("POINTERS")||e.includes("ATOM_NAME")||e.includes("CHARGE")||e.includes("RADII")||e.includes("BONDS_INC_HYDROGEN")||e.includes("BONDS_WITHOUT_HYDROGEN")}));if(-1==(e=r("POINTERS")))return[];var l=n(e),c=parseInt(a[e+1].slice(0,l[1]));if(isNaN(c)||0>=c)return[];if(-1==(e=r("ATOM_NAME")))return[];for(var u=(l=n(e))[0],h=0;h<c/l[0];h++){h==parseInt(c/l[0])&&(u=c%l[0]);for(var f=0;f<u;f++){var d={};d.serial=i,d.x=0,d.y=0,d.z=0,d.atom=a[e+1].slice(l[1]*f,l[1]*(f+1)),d.elem=a[e+1].slice(l[1]*f,l[1]*f+1),d.properties={charge:"",radii:""},d.bonds=[],d.bondOrder=[],t.push(d),i++}e++}if(-1!=(e=r("CHARGE")))for(i=0,u=(l=n(e))[0],h=0;h<c/l[0];h++){for(h==parseInt(c/l[0])&&(u=c%l[0]),f=0;f<u;f++)t[i].properties.charge=parseFloat(a[e+1].slice(l[1]*f,l[1]*(f+1))),i++;e++}if(-1!=(e=r("RADII")))for(i=0,u=(l=n(e))[0],h=0;h<c/l[0];h++){for(h==parseInt(c/l[0])&&(u=c%l[0]),f=0;f<u;f++)t[i].properties.radii=parseFloat(a[e+1].slice(l[1]*f,l[1]*(f+1))),i++;e++}if(-1!=(e=r("BONDS_WITHOUT_HYDROGEN")))for(i=0,u=(l=n(e))[0],e+=1;!a[e].match(/^%FLAG/);){for(a[e+1].match(/^%FLAG/)&&(u=c%l[0]),f=0;f<u;f++)0==i%3&&(o=parseInt(a[e].slice(l[1]*f,l[1]*(f+1))/3)),1==i%3&&t[o].bonds.push(parseInt(a[e].slice(l[1]*f,l[1]*(f+1))/3)),i++;e++}if(-1!=(e=r("BONDS_INC_HYDROGEN")))for(i=0,u=(l=n(e))[0],e+=1;!a[e].match(/^%FLAG/);){for(a[e+1].match(/^%FLAG/)&&(u=c%l[0]),f=0;f<u;f++)0==i%3&&(o=parseInt(a[e].slice(l[1]*f,l[1]*(f+1))/3)),1==i%3&&t[o].bonds.push(parseInt(a[e].slice(l[1]*f,l[1]*(f+1))/3)),i++;e++}return[t]},e.gro=e.GRO=function(e,t){for(t=[],e=e.split(/\r?\n|\r/);0<e.length&&!(3>e.length);){var n=parseInt(e[1]);if(isNaN(n)||0>=n)break;if(e.length<n+3)break;var o=[];t.push(o);var i=2,a=o.length;for(n=a+n;a<n;a++){var l=e[i++],c={};c.serial=a,c.atom=l.slice(10,15).trim(),c.elem=s(c.atom,!0),c.x=10*parseFloat(l.slice(20,28)),c.y=10*parseFloat(l.slice(28,36)),c.z=10*parseFloat(l.slice(36,44)),c.resi=parseInt(l.slice(0,5)),c.resn=l.slice(5,10).trim(),c.bonds=[],c.bondOrder=[],c.properties={},44<l.length&&(c.dx=10*parseFloat(l.slice(44,52)),c.dy=10*parseFloat(l.slice(52,60)),c.dz=10*parseFloat(l.slice(60,68))),o[a]=c}if(e.length<=i+3&&3==(o=e[i++].trim().split(/\s+/)).length){for(n=0;3>n;n++)o[n]=10*parseFloat(o[n]);t.box=o}e.splice(0,++i)}for(a=0;a<t.length;a++)r(t[a]);return t},e.lammpstrj=e.LAMMPSTRJ=function(e,r){var n=[],o={id:"serial",type:"atom",element:"elem",q:"charge",radius:"radius",x:"x",xu:"x",xs:"x",xsu:"x",y:"y",yu:"y",ys:"y",ysu:"y",z:"z",zu:"z",zs:"z",zsu:"z"};e=e.split(/\r?\n|\r/);for(var i=0,a=0,s=0;s<e.length-9;){for(;s<e.length;s++)if(e[s].match(/ITEM: NUMBER OF ATOMS/)&&(a=parseInt(e[s+1])),e[s].match(/ITEM: ATOMS/)){i=s+1;break}var l=e[i-1].replace("ITEM: ATOMS ","").split(" ");for(n.push([]),s=i;s<i+a;s++){for(var c={},u={},h=e[s].split(" "),f=0;f<h.length;f++){var d=o[l[f]];null!=d&&("serial"==d?c[d]=parseInt(h[f]):"x"==d||"y"==d||"z"===d?c[d]=parseFloat(h[f]):"charge"==d||"radius"==d?u[d]=parseFloat(h[f]):c[d]=h[f]),c.properties=u,c.bonds=[],c.bondOrder=[]}n[n.length-1][s-i]=c}s=i+a-1}if(r.assignbonds)for(r=0;r<n.length;r++)t(n[r]);return n},e}(),$3Dmol=$3Dmol||{},$3Dmol.partialCharges={"ALA:N":-.15,"ALA:CA":.1,"ALA:CB":0,"ALA:C":.6,"ALA:O":-.55,"ARG:N":-.15,"ARG:CA":.1,"ARG:CB":0,"ARG:CG":0,"ARG:CD":.1,"ARG:NE":-.1,"ARG:CZ":.5,"ARG:NH1":.25,"ARG:NH2":.25,"ARG:C":.6,"ARG:O":-.55,"ASN:N":-.15,"ASN:CA":.1,"ASN:CB":0,"ASN:CG":.55,"ASN:OD1":-.55,"ASN:ND2":0,"ASN:C":.6,"ASN:O":-.55,"ASP:N":-.15,"ASP:CA":.1,"ASP:CB":0,"ASP:CG":.14,"ASP:OD1":-.57,"ASP:OD2":-.57,"ASP:C":.6,"ASP:O":-.55,"CYS:N":-.15,"CYS:CA":.1,"CYS:CB":.19,"CYS:SG":-.19,"CYS:C":.6,"CYS:O":-.55,"GLN:N":-.15,"GLN:CA":.1,"GLN:CB":0,"GLN:CG":0,"GLN:CD":.55,"GLN:OE1":-.55,"GLN:NE2":0,"GLN:C":.6,"GLN:O":-.55,"GLU:N":-.15,"GLU:CA":.1,"GLU:CB":0,"GLU:CG":0,"GLU:CD":.14,"GLU:OE1":-.57,"GLU:OE2":-.57,"GLU:C":.6,"GLU:O":-.55,"GLY:N":-.15,"GLY:CA":.1,"GLY:C":.6,"GLY:O":-.55,"HIS:N":-.15,"HIS:CA":.1,"HIS:CB":0,"HIS:CG":.1,"HIS:ND1":-.1,"HIS:CD2":.1,"HIS:NE2":-.4,"HIS:CE1":.3,"HIS:C":.6,"HIS:O":-.55,"ILE:N":-.15,"ILE:CA":.1,"ILE:CB":0,"ILE:CG2":0,"ILE:CG1":0,"ILE:CD":0,"ILE:C":.6,"ILE:O":-.55,"LEU:N":-.15,"LEU:CA":.1,"LEU:CB":0,"LEU:CG":0,"LEU:CD1":0,"LEU:CD2":0,"LEU:C":.6,"LEU:O":-.55,"LYS:N":-.15,"LYS:CA":.1,"LYS:CB":0,"LYS:CG":0,"LYS:CD":0,"LYS:CE":.25,"LYS:NZ":.75,"LYS:C":.6,"LYS:O":-.55,"MET:N":-.15,"MET:CA":.1,"MET:CB":0,"MET:CG":.06,"MET:SD":-.12,"MET:CE":.06,"MET:C":.6,"MET:O":-.55,"PHE:N":-.15,"PHE:CA":.1,"PHE:CB":0,"PHE:CG":0,"PHE:CD1":0,"PHE:CD2":0,"PHE:CE1":0,"PHE:CE2":0,"PHE:CZ":0,"PHE:C":.6,"PHE:O":-.55,"PRO:N":-.25,"PRO:CD":.1,"PRO:CA":.1,"PRO:CB":0,"PRO:CG":0,"PRO:C":.6,"PRO:O":-.55,"SER:N":-.15,"SER:CA":.1,"SER:CB":.25,"SER:OG":-.25,"SER:C":.6,"SER:O":-.55,"THR:N":-.15,"THR:CA":.1,"THR:CB":.25,"THR:OG1":-.25,"THR:CG2":0,"THR:C":.6,"THR:O":-.55,"TRP:N":-.15,"TRP:CA":.1,"TRP:CB":0,"TRP:CG":-.03,"TRP:CD2":.1,"TRP:CE2":-.04,"TRP:CE3":-.03,"TRP:CD1":.06,"TRP:NE1":-.06,"TRP:CZ2":0,"TRP:CZ3":0,"TRP:CH2":0,"TRP:C":.6,"TRP:O":-.55,"TYR:N":-.15,"TYR:CA":.1,"TYR:CB":0,"TYR:CG":0,"TYR:CD1":0,"TYR:CE1":0,"TYR:CD2":0,"TYR:CE2":0,"TYR:CZ":.25,"TYR:OH":-.25,"TYR:C":.6,"TYR:O":-.55,"VAL:N":-.15,"VAL:CA":.1,"VAL:CB":0,"VAL:CG1":0,"VAL:CG2":0,"VAL:C":.6,"VAL:O":-.55},$3Dmol.applyPartialCharges=function(e,t){t&&void 0!==e.partialCharge||e.resn&&e.atom&&(e.properties.partialCharge=$3Dmol.partialCharges[e.resn+":"+e.atom])},"undefined"==typeof console&&(console={log:function(){}}),$3Dmol.ProteinSurface=function(){var e,t,r=0,n=0,o=0,a=2,s=0,l=0,c=0,u=0,h=null,f=null,d=null,p=0,m=0,v=0,g=0,y=0,b=0,x={H:1.2,Li:1.82,Na:2.27,K:2.75,C:1.7,N:1.55,O:1.52,F:1.47,P:1.8,S:1.8,CL:1.75,BR:1.85,SE:1.9,ZN:1.39,CU:1.4,NI:1.63,X:2},w=function(e){return e.elem&&void 0!==x[e.elem]?e.elem:"X"},D={},C={},$=[new Int32Array([1,0,0]),new Int32Array([-1,0,0]),new Int32Array([0,1,0]),new Int32Array([0,-1,0]),new Int32Array([0,0,1]),new Int32Array([0,0,-1]),new Int32Array([1,1,0]),new Int32Array([1,-1,0]),new Int32Array([-1,1,0]),new Int32Array([-1,-1,0]),new Int32Array([1,0,1]),new Int32Array([1,0,-1]),new Int32Array([-1,0,1]),new Int32Array([-1,0,-1]),new Int32Array([0,1,1]),new Int32Array([0,1,-1]),new Int32Array([0,-1,1]),new Int32Array([0,-1,-1]),new Int32Array([1,1,1]),new Int32Array([1,1,-1]),new Int32Array([1,-1,1]),new Int32Array([-1,1,1]),new Int32Array([1,-1,-1]),new Int32Array([-1,-1,1]),new Int32Array([-1,1,-1]),new Int32Array([-1,-1,-1])];this.getFacesAndVertices=function(i){var s,l={},c=0;for(s=i.length;c<s;c++)l[i[c]]=!0;for(c=0,s=(i=t).length;c<s;c++)i[c].x=i[c].x/a-r,i[c].y=i[c].y/a-n,i[c].z=i[c].z/a-o;var u=[];for(c=0,s=e.length;c<s;c+=3){var p=e[c],m=e[c+1],v=e[c+2],g=i[m].atomid,y=i[v].atomid,b=i[p].atomid;g<b&&(b=g),y<b&&(b=y),l[b]&&p!==m&&m!==v&&p!==v&&(u.push(p),u.push(m),u.push(v))}return d=f=h=null,{vertices:i,faces:u}},this.initparm=function(e,t,i){1e6<i&&(a=1),i=1/a*5.5,p=e[0][0],g=e[1][0],m=e[0][1],y=e[1][1],v=e[0][2],b=e[1][2],t?(p-=1.4+i,m-=1.4+i,v-=1.4+i,g+=1.4+i,y+=1.4+i,b+=1.4+i):(p-=i,m-=i,v-=i,g+=i,y+=i,b+=i),p=Math.floor(p*a)/a,m=Math.floor(m*a)/a,v=Math.floor(v*a)/a,g=Math.ceil(g*a)/a,y=Math.ceil(y*a)/a,b=Math.ceil(b*a)/a,r=-p,n=-m,o=-v,c=Math.ceil(a*(g-p))+1,l=Math.ceil(a*(y-m))+1,s=Math.ceil(a*(b-v))+1,this.boundingatom(t),u=1.4*a,h=new Uint8Array(c*l*s),f=new Float64Array(c*l*s),d=new Int32Array(c*l*s)},this.boundingatom=function(e){var t=[];for(var r in flagradius=e,x)if(x.hasOwnProperty(r)){var n=x[r];for(t[r]=e?(n+1.4)*a+.5:n*a+.5,n=t[r]*t[r],C[r]=Math.floor(t[r])+1,D[r]=new Int32Array(C[r]*C[r]),j=indx=0;j<C[r];j++)for(k=0;k<C[r];k++){var o=j*j+k*k;o>n?D[r][indx]=-1:(o=Math.sqrt(n-o),D[r][indx]=Math.floor(o)),indx++}}},this.fillvoxels=function(e,t){var r,n=0;for(r=h.length;n<r;n++)h[n]=0,f[n]=-1,d[n]=-1;for(n in t)void 0!==(r=e[t[n]])&&this.fillAtom(r,e);for(n=0,r=h.length;n<r;n++)1&h[n]&&(h[n]|=2)},this.fillAtom=function(e,t){var i,u,f,p,m,v,g=Math.floor(.5+a*(e.x+r)),y=Math.floor(.5+a*(e.y+n)),b=Math.floor(.5+a*(e.z+o)),x=w(e),$=0,S=l*s,A=0;for(v=C[x];A<v;A++)for(i=0;i<v;i++){if(-1!=D[x][$])for(f=-1;2>f;f++)for(p=-1;2>p;p++)for(m=-1;2>m;m++)if(0!==f&&0!==p&&0!==m){var _=f*A,M=m*i;for(u=0;u<=D[x][$];u++){var z=u*p,T=g+_,L=y+z,E=b+M;if(!(0>T||0>L||0>E||T>=c||L>=l||E>=s))if(1&h[E=T*S+L*s+E]){var F=t[d[E]];F.serial!=e.serial&&(_*_+z*z+M*M<(T=g+_-Math.floor(.5+a*(F.x+r)))*T+(L=y+z-Math.floor(.5+a*(F.y+n)))*L+(F=b+M-Math.floor(.5+a*(F.z+o)))*F&&(d[E]=e.serial))}else h[E]|=1,d[E]=e.serial}}$++}},this.fillvoxelswaals=function(e,t){var r,n=0;for(r=h.length;n<r;n++)h[n]&=-3;for(n in t)void 0!==(r=e[t[n]])&&this.fillAtomWaals(r,e)},this.fillAtomWaals=function(e,t){var i,u,f,p,m,v,g=0,y=Math.floor(.5+a*(e.x+r)),b=Math.floor(.5+a*(e.y+n)),x=Math.floor(.5+a*(e.z+o)),$=w(e),S=l*s,A=0;for(v=C[$];A<v;A++)for(i=0;i<v;i++){if(-1!=D[$][g])for(f=-1;2>f;f++)for(p=-1;2>p;p++)for(m=-1;2>m;m++)if(0!==f&&0!==p&&0!==m){var _=f*A,M=m*i;for(u=0;u<=D[$][g];u++){var z=u*p,T=y+_,L=b+z,E=x+M;if(!(0>T||0>L||0>E||T>=c||L>=l||E>=s))if(2&h[E=T*S+L*s+E]){var F=t[d[E]];F.serial!=e.serial&&(_*_+z*z+M*M<(T=y+_-Math.floor(.5+a*(F.x+r)))*T+(L=b+z-Math.floor(.5+a*(F.y+n)))*L+(F=x+M-Math.floor(.5+a*(F.z+o)))*F&&(d[E]=e.serial))}else h[E]|=2,d[E]=e.serial}}g++}},this.buildboundary=function(){var e=l*s;for(i=0;i<c;i++)for(j=0;j<s;j++)for(k=0;k<l;k++){var t=i*e+k*s+j;if(1&h[t])for(var r=0;26>r;){var n=i+$[r][0],o=j+$[r][2],a=k+$[r][1];if(-1<n&&n<c&&-1<a&&a<l&&-1<o&&o<s&&!(1&h[n*e+a*s+o])){h[t]|=4;break}r++}}};var S=function(e,t,r){var n=new Int32Array(e*t*r*3);this.set=function(e,o,i,a){n[e=3*((e*t+o)*r+i)]=a.ix,n[e+1]=a.iy,n[e+2]=a.iz},this.get=function(e,o,i){return{ix:n[e=3*((e*t+o)*r+i)],iy:n[e+1],iz:n[e+2]}}};this.fastdistancemap=function(){var e,t,r,n=new S(c,l,s),o=l*s,i=u*u,d=[];for(e=0;e<c;e++)for(t=0;t<l;t++)for(r=0;r<s;r++){var p=e*o+t*s+r;if(h[p]&=-3,1&h[p]&&4&h[p]){var m={ix:e,iy:t,iz:r};n.set(e,t,r,m),d.push(m),f[p]=0,h[p]|=2,h[p]&=-5}}do{for(r=this.fastoneshell(d,n),d=[],e=0,t=r.length;e<t;e++)p=o*r[e].ix+s*r[e].iy+r[e].iz,h[p]&=-5,f[p]<=1.0404*i&&d.push({ix:r[e].ix,iy:r[e].iy,iz:r[e].iz})}while(0!==d.length);for(0>(e=a-.5)&&(e=0),i-=.5/(.1+e),e=0;e<c;e++)for(t=0;t<l;t++)for(r=0;r<s;r++)h[p=e*o+t*s+r]&=-5,1&h[p]&&(!(2&h[p])||2&h[p]&&f[p]>=i)&&(h[p]|=4)},this.fastoneshell=function(e,t){var r,n,o=[];if(0===e.length)return o;tnv={ix:-1,iy:-1,iz:-1};var i=l*s,a=0;for(n=e.length;a<n;a++){var u=e[a].ix,d=e[a].iy,p=e[a].iz,m=t.get(u,d,p);for(r=0;6>r;r++)if(tnv.ix=u+$[r][0],tnv.iy=d+$[r][1],tnv.iz=p+$[r][2],tnv.ix<c&&-1<tnv.ix&&tnv.iy<l&&-1<tnv.iy&&tnv.iz<s&&-1<tnv.iz){var v=tnv.ix*i+s*tnv.iy+tnv.iz;if(1&h[v]&&!(2&h[v])){t.set(tnv.ix,tnv.iy,p+$[r][2],m);var g=tnv.ix-m.ix,y=tnv.iy-m.iy,b=tnv.iz-m.iz;g=g*g+y*y+b*b,f[v]=g,h[v]|=2,h[v]|=4,o.push({ix:tnv.ix,iy:tnv.iy,iz:tnv.iz})}else 1&h[v]&&2&h[v]&&((g=(g=tnv.ix-m.ix)*g+(y=tnv.iy-m.iy)*y+(b=tnv.iz-m.iz)*b)<f[v]&&(t.set(tnv.ix,tnv.iy,tnv.iz,m),f[v]=g,4&h[v]||(h[v]|=4,o.push({ix:tnv.ix,iy:tnv.iy,iz:tnv.iz}))))}}for(a=0,n=e.length;a<n;a++)for(u=e[a].ix,d=e[a].iy,p=e[a].iz,m=t.get(u,d,p),r=6;18>r;r++)tnv.ix=u+$[r][0],tnv.iy=d+$[r][1],tnv.iz=p+$[r][2],tnv.ix<c&&-1<tnv.ix&&tnv.iy<l&&-1<tnv.iy&&tnv.iz<s&&-1<tnv.iz&&(v=tnv.ix*i+s*tnv.iy+tnv.iz,1&h[v]&&!(2&h[v])?(t.set(tnv.ix,tnv.iy,p+$[r][2],m),g=(g=tnv.ix-m.ix)*g+(y=tnv.iy-m.iy)*y+(b=tnv.iz-m.iz)*b,f[v]=g,h[v]|=2,h[v]|=4,o.push({ix:tnv.ix,iy:tnv.iy,iz:tnv.iz})):1&h[v]&&2&h[v]&&((g=(g=tnv.ix-m.ix)*g+(y=tnv.iy-m.iy)*y+(b=tnv.iz-m.iz)*b)<f[v]&&(t.set(tnv.ix,tnv.iy,tnv.iz,m),f[v]=g,4&h[v]||(h[v]|=4,o.push({ix:tnv.ix,iy:tnv.iy,iz:tnv.iz})))));for(a=0,n=e.length;a<n;a++)for(u=e[a].ix,d=e[a].iy,p=e[a].iz,m=t.get(u,d,p),r=18;26>r;r++)tnv.ix=u+$[r][0],tnv.iy=d+$[r][1],tnv.iz=p+$[r][2],tnv.ix<c&&-1<tnv.ix&&tnv.iy<l&&-1<tnv.iy&&tnv.iz<s&&-1<tnv.iz&&(v=tnv.ix*i+s*tnv.iy+tnv.iz,1&h[v]&&!(2&h[v])?(t.set(tnv.ix,tnv.iy,p+$[r][2],m),g=(g=tnv.ix-m.ix)*g+(y=tnv.iy-m.iy)*y+(b=tnv.iz-m.iz)*b,f[v]=g,h[v]|=2,h[v]|=4,o.push({ix:tnv.ix,iy:tnv.iy,iz:tnv.iz})):1&h[v]&&2&h[v]&&((g=(g=tnv.ix-m.ix)*g+(y=tnv.iy-m.iy)*y+(b=tnv.iz-m.iz)*b)<f[v]&&(t.set(tnv.ix,tnv.iy,tnv.iz,m),f[v]=g,4&h[v]||(h[v]|=4,o.push({ix:tnv.ix,iy:tnv.iy,iz:tnv.iz})))));return o},this.marchingcubeinit=function(e){for(var t=0,r=h.length;t<r;t++)1==e?h[t]&=-5:4==e?(h[t]&=-3,4&h[t]&&(h[t]|=2),h[t]&=-5):2==e?4&h[t]&&2&h[t]?h[t]&=-5:4&h[t]&&!(2&h[t])&&(h[t]|=2):3==e&&(h[t]&=-5)},this.marchingcube=function(r){this.marchingcubeinit(r),t=[],e=[],$3Dmol.MarchingCube.march(h,t,e,{smooth:1,nX:c,nY:l,nZ:s}),r=l*s;for(var n=0,o=t.length;n<o;n++)t[n].atomid=d[t[n].x*r+s*t[n].y+t[n].z];$3Dmol.MarchingCube.laplacianSmooth(1,t,e)}},$3Dmol.VolumeData=function(e,t,r){if(this.unit={x:1,y:1,z:1},this.origin={x:0,y:0,z:0},this.size={x:0,y:0,z:0},this.data=new Float32Array([]),this.matrix=null,t=t.toLowerCase(),/\.gz$/.test(t)){t=t.replace(/\.gz$/,"");try{e=this[t]&&this[t].isbinary?pako.inflate(e):new TextDecoder("utf-8").decode(pako.inflate(e))}catch(e){console.log(e)}}if(this[t]&&this[t](e),r){if(r.negate)for(e=0,t=this.data.length;e<t;e++)this.data[e]=-this.data[e];if(r.normalize){var n=0;for(e=0,t=this.data.length;e<t;e++)n+=this.data[e];for(r=n/this.data.length,console.log("computed mean: "+r),e=n=0,t=this.data.length;e<t;e++){var o=this.data[e]-r;n+=o*o}for(n/=this.data.length,e=0,t=this.data.length;e<t;e++)this.data[e]=(this.data[e]-r)/n}}},$3Dmol.VolumeData.prototype.getVal=function(e,t,r){return this.matrix?(this.inversematrix||(this.inversematrix=(new $3Dmol.Matrix4).getInverse(this.matrix)),e=(r=(r=new $3Dmol.Vector3(e,t,r)).applyMatrix4(this.inversematrix)).x,t=r.y,r=r.z):(e-=this.origin.x,t-=this.origin.y,r-=this.origin.z,e/=this.unit.x,t/=this.unit.y,r/=this.unit.z),e=Math.round(e),t=Math.round(t),r=Math.round(r),0>e||e>=this.size.x||0>t||t>=this.size.y||0>r||r>=this.size.z?0:this.data[e*this.size.y*this.size.z+t*this.size.z+r]},$3Dmol.VolumeData.prototype.getCoordinates=function(e){var t=e/(this.size.y*this.size.z),r=e%(this.size.y*this.size.z);return e%=this.size.z,t*=this.unit.x,r*=this.unit.y,e*=this.unit.z,{x:t+=this.origin.x,y:r+=this.origin.y,z:e+=this.origin.z}},$3Dmol.VolumeData.prototype.vasp=function(e){var t=e.replace(/^\s+/,"").split(/[\n\r]/),r=$3Dmol.Parsers.vasp(e)[0].length;if(0==r)console.log("No good formating of CHG or CHGCAR file, not atomic information provided in the file."),this.data=[];else{var n=parseFloat(t[1]),o=t[2].replace(/^\s+/,"").split(/\s+/);e=new $3Dmol.Vector3(parseFloat(o[0]),parseFloat(o[1]),parseFloat(o[2])).multiplyScalar(1.889725992*n),o=t[3].replace(/^\s+/,"").split(/\s+/);var i=new $3Dmol.Vector3(parseFloat(o[0]),parseFloat(o[1]),parseFloat(o[2])).multiplyScalar(1.889725992*n);o=t[4].replace(/^\s+/,"").split(/\s+/),o=new $3Dmol.Vector3(parseFloat(o[0]),parseFloat(o[1]),parseFloat(o[2])).multiplyScalar(1.889725992*n),n=e.x*(i.y*o.z-o.y*i.z)-i.x*(e.y*o.z-o.y*e.z)+o.x*(e.y*i.z-i.y*e.z),n=1/(n=Math.abs(n)/Math.pow(1.889725992,3)),t.splice(0,8+r+1);var a=t[0].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");r=Math.abs(a[0]);var s=Math.abs(a[1]);a=Math.abs(a[2]);var l=this.origin=new $3Dmol.Vector3(0,0,0);for(this.size={x:r,y:s,z:a},this.unit=new $3Dmol.Vector3(e.x,i.y,o.z),e=e.multiplyScalar(1/(1.889725992*r)),i=i.multiplyScalar(1/(1.889725992*s)),o=o.multiplyScalar(1/(1.889725992*a)),0==e.y&&0==e.z&&0==i.x&&0==i.z&&0==o.x&&0==o.y||(this.matrix=new $3Dmol.Matrix4(e.x,i.x,o.x,0,e.y,i.y,o.y,0,e.z,i.z,o.z,0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,(new $3Dmol.Matrix4).makeTranslation(l.x,l.y,l.z)),this.origin=new $3Dmol.Vector3(0,0,0),this.unit=new $3Dmol.Vector3(1,1,1)),t.splice(0,1),(t=(t=(t=t.join(" ")).replace(/^\s+/,"")).split(/[\s\r]+/)).splice(r*s*a+1),t=new Float32Array(t),e=0;e<t.length;e++)t[e]=t[e]*n*.036749309;this.data=t}},$3Dmol.VolumeData.prototype.dx=function(e){e=e.split(/[\n\r]+/);var t,r,n=/gridpositions\s+counts\s+(\d+)\s+(\d+)\s+(\d+)/,o=/^origin\s+(\S+)\s+(\S+)\s+(\S+)/,i=/^delta\s+(\S+)\s+(\S+)\s+(\S+)/,a=/data follows/;for(t=0;t<e.length;t++){var s=e[t];if(r=n.exec(s)){var l=parseInt(r[1]),c=parseInt(r[2]);r=parseInt(r[3]),this.size={x:l,y:c,z:r}}else if(r=i.exec(s)){if(l=parseFloat(r[1]),0==parseFloat(r[2])&&0==parseFloat(r[3])||console.log("Non-orthogonal delta matrix not currently supported in dx format"),s=e[t+=1],null==(r=i.exec(s)))return void console.log("Parse error in dx delta matrix");if(c=parseFloat(r[2]),0==parseFloat(r[1])&&0==parseFloat(r[3])||console.log("Non-orthogonal delta matrix not currently supported in dx format"),s=e[t+=1],null==(r=i.exec(s)))return void console.log("Parse error in dx delta matrix");s=parseFloat(r[3]),0==parseFloat(r[1])&&0==parseFloat(r[2])||console.log("Non-orthogonal delta matrix not currently supported in dx format"),this.unit=new $3Dmol.Vector3(l,c,s)}else if(r=o.exec(s))l=parseFloat(r[1]),c=parseFloat(r[2]),r=parseFloat(r[3]),this.origin=new $3Dmol.Vector3(l,c,r);else if(a.exec(s))break}t+=1,this.size&&this.origin&&this.unit&&this.size?(e=(e=e.splice(t).join(" ")).split(/[\s\r]+/),this.data=new Float32Array(e)):console.log("Error parsing dx format")},$3Dmol.VolumeData.prototype.cube=function(e){if(!(6>(e=e.replace(/^\s+/,"").split(/[\n\r]+/)).length)){var t=e[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),r=parseFloat(t[0]),n=Math.abs(r),o=this.origin=new $3Dmol.Vector3(parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3])),i=0<(t=e[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" "))[0]?.529177:1;o.multiplyScalar(i);var a=Math.abs(t[0]),s=new $3Dmol.Vector3(parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3])).multiplyScalar(i);t=e[4].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var l=Math.abs(t[0]),c=new $3Dmol.Vector3(parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3])).multiplyScalar(i);t=e[5].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var u=Math.abs(t[0]);t=new $3Dmol.Vector3(parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3])).multiplyScalar(i),this.size={x:a,y:l,z:u},this.unit=new $3Dmol.Vector3(s.x,c.y,t.z),0==s.y&&0==s.z&&0==c.x&&0==c.z&&0==t.x&&0==t.y||(this.matrix=new $3Dmol.Matrix4(s.x,c.x,t.x,0,s.y,c.y,t.y,0,s.z,c.z,t.z,0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,(new $3Dmol.Matrix4).makeTranslation(o.x,o.y,o.z)),this.origin=new $3Dmol.Vector3(0,0,0),this.unit=new $3Dmol.Vector3(1,1,1)),o=6,0>r&&o++,e=(e=(e=e.splice(n+o).join(" ")).replace(/^\s+/,"")).split(/[\s\r]+/),this.data=new Float32Array(e)}},$3Dmol.VolumeData.prototype.ccp4=function(e){var t;e=new Int8Array(e);var r=new Int32Array(e.buffer,0,56),n=new Float32Array(e.buffer,0,56),o=new DataView(e.buffer);String.fromCharCode(o.getUint8(208),o.getUint8(209),o.getUint8(210),o.getUint8(211));var i=[o.getUint8(212),o.getUint8(213)];if(17===i[0]&&17===i[1])for(i=e.byteLength,t=0;t<i;t+=4)o.setFloat32(t,o.getFloat32(t),!0);o=r[0],i=r[1];var a=r[2];t=r[4];var s=r[5],l=r[6],c=r[7],u=r[8],h=r[9],f=n[10],d=n[11],p=n[12],m=n[13],v=n[14],g=n[15],y=r[16],b=r[17],x=r[18];r=r[23];var w=n[49],D=n[50];for(n=n[51],f=[f,0,0],d=[d*Math.cos(Math.PI/180*g),d*Math.sin(Math.PI/180*g),0],(m=[p*Math.cos(Math.PI/180*v),p*(Math.cos(Math.PI/180*m)-Math.cos(Math.PI/180*g)*Math.cos(Math.PI/180*v))/Math.sin(Math.PI/180*g),0])[2]=Math.sqrt(p*p*Math.sin(Math.PI/180*v)*Math.sin(Math.PI/180*v)-m[1]*m[1]),p=[0,f,d,m],c=[0,c,u,h],y=[0,y,b,x],this.matrix=new $3Dmol.Matrix4,this.matrix.set(p[y[1]][0]/c[y[1]],p[y[2]][0]/c[y[2]],p[y[3]][0]/c[y[3]],0,p[y[1]][1]/c[y[1]],p[y[2]][1]/c[y[2]],p[y[3]][1]/c[y[3]],0,p[y[1]][2]/c[y[1]],p[y[2]][2]/c[y[2]],p[y[3]][2]/c[y[3]],0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,(new $3Dmol.Matrix4).makeTranslation(t+w,s+D,l+n)),this.origin=new $3Dmol.Vector3(0,0,0),this.unit=new $3Dmol.Vector3(1,1,1),this.size={x:o,y:i,z:a},e=new Float32Array(e.buffer,1024+r),this.data=new Float32Array(o*i*a),t=0;t<o;t++)for(s=0;s<i;s++)for(l=0;l<a;l++)this.data[(t*i+s)*a+l]=e[(l*i+s)*o+t]},$3Dmol.VolumeData.prototype.ccp4.isbinary=!0,$3Dmol.workerString=function(){self.onmessage=function(e){var t=(e=e.data).type;if(0>t)self.atomData=e.atoms,self.volume=e.volume,self.ps=new ProteinSurface;else{var r=self.ps;r.initparm(e.expandedExtent,1!=t,self.volume),r.fillvoxels(self.atomData,e.extendedAtoms),r.buildboundary(),4!==t&&2!==t||(r.fastdistancemap(),r.boundingatom(!1),r.fillvoxelswaals(self.atomData,e.extendedAtoms)),r.marchingcube(t),e=r.getFacesAndVertices(e.atomsToShow),self.postMessage(e)}}}.toString().replace(/(^.*?\{|\}$)/g,""),$3Dmol.workerString+="; var ProteinSurface="+$3Dmol.ProteinSurface.toString().replace(/[a-zA-Z_$]{1}[0-9a-zA-Z_$]*.MarchingCube./g,"MarchingCube."),$3Dmol.workerString+=",MarchingCube=("+$3Dmol.MarchingCubeInitializer.toString()+")();",$3Dmol.SurfaceWorker=window.URL?window.URL.createObjectURL(new Blob([$3Dmol.workerString],{type:"text/javascript"})):{postMessage:function(){}},$3Dmol.workerString=$3Dmol.workerString,$3Dmol.SurfaceWorker=$3Dmol.SurfaceWorker}).call(window)},34754:function(e,t,r){var n,o,i;o=[e,t,r(88034),r(30914)],void 0===(i="function"==typeof(n=function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(r),i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=function(e){function t(){var e,r,n;l(this,t);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return r=n=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.onResize=function(){n.rafId&&window.cancelAnimationFrame(n.rafId),n.rafId=window.requestAnimationFrame(n.update.bind(n))},n.update=function(){n.forceUpdate()},u(n,r)}return h(t,e),c(t,[{key:"componentDidMount",value:function(){var e=document.createElement("canvas"),t=document.createDocumentFragment(),r=window.getComputedStyle(this.scope),n=[r["font-weight"],r["font-style"],r["font-size"],r["font-family"]].join(" ");t.appendChild(e),this.canvas=e.getContext("2d"),this.canvas.font=n,this.forceUpdate(),window.addEventListener("resize",this.onResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize),this.rafId&&window.cancelAnimationFrame(this.rafId)}},{key:"measureWidth",value:function(e){return this.canvas.measureText(e).width}},{key:"getRenderText",value:function(){var e=this.props,t=(e.containerClassName,e.line),r=e.text,n=e.textTruncateChild,i=e.truncateText,a=s(e,["containerClassName","line","text","textTruncateChild","truncateText"]),l=this.scope.getBoundingClientRect().width;if(0===l)return null;if(l>=this.measureWidth(r))return o.default.createElement("div",a,r);var c="";if(n&&"string"==typeof n.type){var u=n.type;(u.indexOf("span")>=0||u.indexOf("a")>=0)&&(c=n.props.children)}for(var h=1,f=r.length,d="",p=0,m=0,v=t,g=0,y=!1,b=-1;v--;){for(var x=v?"":i+" "+c;h<=f;){if(d=r.substr(m,h),!((g=this.measureWidth(d+x))<l)){do{h--," "===(d=r.substr(m,h))[d.length-1]&&(d=r.substr(m,h-1)),y&&(b=d.lastIndexOf(" "))>-1&&(h=b,d=r.substr(m,h)),g=this.measureWidth(d+x)}while(g>=l&&d.length>0);m+=h;break}-1===(p=r.indexOf(" ",h+1))?(h+=1,y=!1):(y=!0,h=p)}if(h>=f){m=f;break}}return m===f?o.default.createElement("div",a,r):o.default.createElement("div",a,r.substr(0,m)+i+" ",n)}},{key:"render",value:function(){var e=this,t=this.props,r=t.text,n=t.containerClassName,i=r;return this.scope&&(i=this.getRenderText()),o.default.createElement("div",{ref:function(t){e.scope=t},className:n,style:{overflow:"hidden"}},i)}}]),t}(r.Component);f.propTypes={containerClassName:i.default.string,line:i.default.number,text:i.default.string,textTruncateChild:i.default.node,truncateText:i.default.string},f.defaultProps={line:1,text:"",truncateText:"â¦"},t.default=f,e.exports=t.default})?n.apply(t,o):n)||(e.exports=i)}}]);