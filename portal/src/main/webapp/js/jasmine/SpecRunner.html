<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <style>
        @import url(css/oncoprint.css);
    </style>

  <title>Jasmine Spec Runner</title>

  <link rel="shortcut icon" type="image/png" href="lib/jasmine-1.2.0/jasmine_favicon.png">
  <link rel="stylesheet" type="text/css" href="lib/jasmine-1.2.0/jasmine.css">
  <script type="text/javascript" src="lib/jasmine-1.2.0/jasmine.js"></script>
  <script type="text/javascript" src="lib/jasmine-1.2.0/jasmine-html.js"></script>
  <script type="text/javascript" src="src/jquery.min.js"></script>
  <script type="text/javascript" src="src/d3.v2.min.js"></script>

  <!-- include source files here... -->
  <!-- <script type="text/javascript" src="spec/SpecHelper.js"></script>
  <script type="text/javascript" src="spec/PlayerSpec.js"></script> -->
  <script type="text/javascript" src="src/DataManagerFactory.js"></script>
  <script type="text/javascript" src="src/QueryGeneData.js"></script>
  <script type="text/javascript" src="src/MemoSort.js"></script>
  <script type="text/javascript" src="src/oncoprint.js"></script>

  <!-- include spec files here... -->
  <script type="text/javascript" src="spec/DataManagerFactorySpec.js"></script>
  <script type="text/javascript" src="spec/QueryGeneDataSpec.js"></script>
  <script type="text/javascript" src="spec/MemoSortSpec.js"></script>

  <script type="text/javascript">
    (function() {
      var jasmineEnv = jasmine.getEnv();
      jasmineEnv.updateInterval = 1000;

      var htmlReporter = new jasmine.HtmlReporter();

      jasmineEnv.addReporter(htmlReporter);

      jasmineEnv.specFilter = function(spec) {
        return htmlReporter.specFilter(spec);
      };

      var currentWindowOnload = window.onload;

      window.onload = function() {
        if (currentWindowOnload) {
          currentWindowOnload();
        }
        execJasmine();
      };

      function execJasmine() {
        jasmineEnv.execute();
      }

    })();
  </script>

</head>

<body>
<div id='oncoprint'>
    <h2>
        oncoprint
    <button type='button' onclick='oncoprint.defaultSort()'>default sort</button>
    <button type='button' onclick='oncoprint.memoSort()'>memo sort</button>
    <button type='button' onclick='oncoprint.toggleWhiteSpace()'>toggle white space</button>
    <button type='button' onclick='oncoprint.scaleWidth(3)'>scale width 3</button>
    <button type='button' onclick='oncoprint.scaleWidth(1.5)'>scale width 1.5</button>
    <button type='button' onclick='oncoprint.scaleWidth(1)'>scale width 1</button>
    <button type='button' onclick='oncoprint.scaleWidth(.5)'>scale width .5</button>
    </h2>
    </div>
  <script type="text/javascript">
// {{{ test data

    var AMPLIFIED = "AMPLIFIED",
        DELETED = "HOMODELETED";

    var UPREGULATED = "UPREGULATED",
        DOWNREGULATED = "DOWNREGULATED";

        var cna1        = [AMPLIFIED, DELETED, null, null, null, null];
        var mutations1  = [null, ['a'], null, ['1'], null, ['b']];

    var GENE1 = { hugo: "GENE1",
        cna: cna1,
        mutations: mutations1,
        mrna: [null, null, null, null, null, null],
        rppa: [null, null, null, null, null, null],
        percent_altered: "10%"
    };

    var cna2        = [null, null, DELETED, AMPLIFIED, null, null];
    var mutations2  = [null, null, null, null, null, null];

    var GENE2 = { hugo: "GENE2",
        cna: cna2,
        mutations: mutations2,
        mrna: [null, null, null, null, null, null],
        rppa: [null, null, null, null, null, null],
        percent_altered: "10%"
    };


    var hugo_to_gene_index = {
        "GENE1": 0,
        "GENE2": 1
    };

    var samples = { "CASE1": 0,
        "CASE2": 1,
        "CASE3": 2,
        "CASE4": 3,
        "CASE5": 4,
        "CASE6": 5
    };

    var data = {
        gene_data: [GENE1, GENE2],
        hugo_to_gene_index: hugo_to_gene_index,
        samples: samples
    };

    var params = {
        data: data,
        cancer_study_id: "tcga-test",
        case_set_str: "case set description",
        num_cases_affected: "-1",
        percent_cases_affected: "-1%"
    };
// }}}
    var oncoprint = Oncoprint($('#oncoprint')[0], params);
    oncoprint.draw();
  </script>
</body>
</html>
